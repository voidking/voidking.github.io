<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />



  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png?v=5.1.4">






  <meta name="keywords" content="linux,windows," />




  


  <link rel="alternate" href="/atom.xml" title="VoidKing" type="application/atom+xml" />






<meta name="description" content="前言迅雷、旋风、百度云盘等下载工具，非VIP有限速，VIP有资源下载限制。在线云播，广告繁多，缓存慢，如今更是被封了99%。 小编在知乎找到了一个很好的解决方案：aria2。aria2 + aria2webui完成下载，emby或plex完成下载后播放功能。 本文，就来研究一下aria2的安装部署。">
<meta property="og:type" content="article">
<meta property="og:title" content="使用aria2离线下载">
<meta property="og:url" content="https://www.voidking.com/love-aria2-download/index.html">
<meta property="og:site_name" content="VoidKing">
<meta property="og:description" content="前言迅雷、旋风、百度云盘等下载工具，非VIP有限速，VIP有资源下载限制。在线云播，广告繁多，缓存慢，如今更是被封了99%。 小编在知乎找到了一个很好的解决方案：aria2。aria2 + aria2webui完成下载，emby或plex完成下载后播放功能。 本文，就来研究一下aria2的安装部署。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2017-05-13T08:00:00.000Z">
<meta property="article:modified_time" content="2020-02-07T15:42:50.021Z">
<meta property="article:author" content="VoidKing">
<meta property="article:tag" content="linux">
<meta property="article:tag" content="windows">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://www.voidking.com/love-aria2-download/"/>





  <title>使用aria2离线下载 | VoidKing</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">VoidKing</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">好好学习，天天向上！</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.voidking.com/love-aria2-download/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="VoidKing">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="VoidKing">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">使用aria2离线下载</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-13T08:00:00+00:00">
                2017-05-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%B8%93%E4%B8%9A/" itemprop="url" rel="index">
                    <span itemprop="name">专业</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%B8%93%E4%B8%9A/%E8%BF%90%E7%BB%B4/" itemprop="url" rel="index">
                    <span itemprop="name">运维</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%B8%93%E4%B8%9A/%E8%BF%90%E7%BB%B4/centos/" itemprop="url" rel="index">
                    <span itemprop="name">centos</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%88%B1%E5%A5%BD/" itemprop="url" rel="index">
                    <span itemprop="name">爱好</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%88%B1%E5%A5%BD/%E7%94%B5%E8%84%91/" itemprop="url" rel="index">
                    <span itemprop="name">电脑</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>迅雷、旋风、百度云盘等下载工具，非VIP有限速，VIP有资源下载限制。<br>在线云播，广告繁多，缓存慢，如今更是被封了99%。</p>
<p>小编在知乎找到了一个很好的解决方案：aria2。aria2 + aria2webui完成下载，emby或plex完成下载后播放功能。</p>
<p>本文，就来研究一下aria2的安装部署。</p>
<a id="more"></a>

<h1 id="aria2简介"><a href="#aria2简介" class="headerlink" title="aria2简介"></a>aria2简介</h1><blockquote>
<p>aria2 is a lightweight multi-protocol &amp; multi-source command-line download utility. It supports HTTP/HTTPS, FTP, SFTP, BitTorrent and Metalink. aria2 can be manipulated via built-in JSON-RPC and XML-RPC interfaces.</p>
</blockquote>
<ul>
<li><a href="http://aria2.github.io/" target="_blank" rel="noopener">aria2官网</a></li>
<li><a href="https://github.com/aria2/aria2/" target="_blank" rel="noopener">aria2源码</a></li>
<li><a href="http://sourceforge.net/projects/aria2/files/stable/" target="_blank" rel="noopener">aria2下载地址</a></li>
</ul>
<h1 id="webui简介"><a href="#webui简介" class="headerlink" title="webui简介"></a>webui简介</h1><p>aria2webui包括yaaw、webui-aria2、AriaNg等。</p>
<h2 id="yaaw"><a href="#yaaw" class="headerlink" title="yaaw"></a>yaaw</h2><blockquote>
<p>YAAW: Yet Another Aria2 Web Frontend in pure HTML/CSS/Javascirpt.No HTTP server, backend or server-side program. All you need is just a browser.</p>
</blockquote>
<ul>
<li><a href="https://github.com/binux/yaaw" target="_blank" rel="noopener">yaaw源码地址</a></li>
<li><a href="http://aria2c.com/usage.html" target="_blank" rel="noopener">Aria2 &amp; YAAW 官方使用说明</a></li>
<li><a href="http://binux.github.io/yaaw/demo/" target="_blank" rel="noopener">yaaw管理页面</a></li>
<li><a href="http://yaaw.ghostry.cn/" target="_blank" rel="noopener">yaaw管理页面2</a></li>
<li><a href="http://aria2c.com/" target="_blank" rel="noopener">yaaw管理页面3</a></li>
</ul>
<h2 id="webui-aria2"><a href="#webui-aria2" class="headerlink" title="webui-aria2"></a>webui-aria2</h2><blockquote>
<p>The aim for this project is to create the worlds best and hottest interface to interact with aria2. aria2 is the worlds best file downloader, but sometimes the command line brings more power than necessary. The project was initially created as part of the GSOC scheme, however it has rapidly grown and changed with tremendous support and feedback from the aria2 community.</p>
</blockquote>
<ul>
<li><a href="https://github.com/ziahamza/webui-aria2" target="_blank" rel="noopener">webui-aria2源码</a></li>
<li><a href="http://ziahamza.github.io/webui-aria2/" target="_blank" rel="noopener">webui-aria2管理页面</a></li>
<li><a href="http://webui-aria2.ghostry.cn/" target="_blank" rel="noopener">webui-aria2管理页面2</a></li>
</ul>
<h2 id="AriaNg"><a href="#AriaNg" class="headerlink" title="AriaNg"></a>AriaNg</h2><blockquote>
<p>AriaNg is a web frontend making aria2 better. AriaNg is written in pure html &amp; javascript, thus it does not need any compilers or runtime environment. You can just put AriaNg in your web server and open it in your browser. AriaNg uses responsive layout, and supports any desktop or mobile devices.</p>
</blockquote>
<ul>
<li><a href="https://github.com/mayswind/AriaNg" target="_blank" rel="noopener">AriaNg源码地址</a></li>
<li><a href="http://ariang.mayswind.net/latest" target="_blank" rel="noopener">AriaNg管理页面</a></li>
</ul>
<h1 id="aria2命令行"><a href="#aria2命令行" class="headerlink" title="aria2命令行"></a>aria2命令行</h1><p>aria2命令行在windows和linux中通用。</p>
<p>1、Download from WEB<br><code>aria2c -c -s 5 http://example.org/mylinux.iso</code></p>
<p>其中-c代表断点续传，-s代表线程数。</p>
<p>2、Download from 2 sources<br><code>aria2c http://a/f.iso   ftp://b/f.iso</code></p>
<p>3、Download using 2 connections per host<br><code>aria2c -x2 http://a/f.iso</code></p>
<p>4、BitTorrent Magnet URI<br><code>aria2c &#39;magnet:?xt=urn:btih:248D0A1CD08284299DE78D5C1ED359BB46717D8C&#39;</code></p>
<p>5、Metalink<br><code>aria2c http://example.org/mylinux.metalink</code></p>
<p>6、Download URIs found in text file<br><code>aria2c -i uris.txt</code></p>
<p>7、BT<br><code>aria2c /tmp/CentOS-6.3-i386-bin-DVD1to2.torrent</code></p>
<p><code>aria2c http://mirrors.163.com/centos/6.6/isos/x86_64/CentOS-6.6-x86_64-minimal.torrent</code></p>
<p>注意：当源地址存在诸如 &amp;, * 等 shell 的特殊字符，请使用单引号或双引号把 URI 包含起来。</p>
<h1 id="windows安装使用aria2"><a href="#windows安装使用aria2" class="headerlink" title="windows安装使用aria2"></a>windows安装使用aria2</h1><h2 id="安装aria2"><a href="#安装aria2" class="headerlink" title="安装aria2"></a>安装aria2</h2><p>1、访问<a href="https://github.com/aria2/aria2/releases" target="_blank" rel="noopener">aria2项目</a>，下载最新的aria2，这里我们下载aria2-1.34.0-win-64bit-build1.zip。</p>
<p>2、解压aria2-1.34.0-win-64bit-build1.zip，并且重命名为aria2，最终路径为<code>D:\develop\aria2</code>。</p>
<h2 id="配置aria2"><a href="#配置aria2" class="headerlink" title="配置aria2"></a>配置aria2</h2><p>参考<a href="https://aria2.github.io/manual/en/html/" target="_blank" rel="noopener">aria2 Online Manual</a>和<a href="https://www.mivm.cn/windows-aria2/" target="_blank" rel="noopener">Windows配置Aria2及Web管理面板教程</a>，配置aria2。</p>
<p>1、下载配置文件<br><code>git clone https://github.com/voidking/aria2-conf.git</code></p>
<p>项目包含两个目录，一个是windows，一个是centos。windows目录下包含如下文件：</p>
<ul>
<li>aria2.conf，配置文件</li>
<li>aria2.log，日志文件</li>
<li>aria2.session，下载历史</li>
<li>Start.bat，启动aria2</li>
<li>Stop.bat，停止aria2</li>
<li>Restart.bat，重启aria2</li>
<li>Start.vbs，隐藏cmd窗口启动aria2</li>
<li>Status.bat，查看aria2状态</li>
<li>Boot.bat，开启或取消aria2开机启动</li>
</ul>
<p>2、aria2-conf/windows中的全部文件复制到<code>D:\develop\aria2</code>中。</p>
<p>3、根据需要，修改aria2.conf文件。</p>
<p>4、双击Start.bat，启动aria2服务。</p>
<h2 id="AriaNg安装配置"><a href="#AriaNg安装配置" class="headerlink" title="AriaNg安装配置"></a>AriaNg安装配置</h2><p>1、访问<a href="https://github.com/mayswind/AriaNg/releases" target="_blank" rel="noopener">ariang项目</a>，下载最新版的ariang，这里我们下载aria-ng-0.4.0.zip。</p>
<p>2、解压aria-ng-0.4.0.zip，并且重命名为ariang，最终路径为<code>D:\develop\ariang</code>。</p>
<p>3、下载EasyWebSvr.exe，这里提供一个<a href="https://pan.baidu.com/s/1-Niuv4AjlcMGrR5UcQwOsg" target="_blank" rel="noopener">下载地址</a>，密码为<code>1ey1</code>。</p>
<p>4、双击EasyWebSvr.exe，点击底部的锤子图标，选择设置，选择主目录为<code>D:\develop\ariang</code>目录，确定，点击底部的锤子图标，选择启动服务器。</p>
<p>如果不想搭建Web服务器的话，可以访问别人搭建的<a href="http://ariang.mayswind.net/latest" target="_blank" rel="noopener">AriaNg管理页面</a>。</p>
<p>PS：除了easywebsvr，还可以把airang扔到nginx、apache或tomcat等服务器的web目录下，效果是一样的。</p>
<p>5、访问 <a href="http://localhost" target="_blank" rel="noopener">http://localhost</a> ，进入Aria2 Web管理页面。</p>
<p>6、在Aria2 Web管理页面点击新建，可以添加HTTP、FTP、BT任务等，同时添加多个任务每行一个URL，添加镜像URL用空格分割，点击文件夹图标可以打开种子文件等。</p>
<p>文件默认下载到<code>D:\develop\aria2\download</code>文件夹，这是在aria2.conf中配置的。</p>
<p>注意：</p>
<ul>
<li>在Web管理面板删除下载任务后，Aria2并不会删除下载文件或者缓存，需要自己去下载文件夹删除掉。</li>
<li>在同一个局域网内，其他设备输入当前设备IP地址，也可以访问Web管理界面，如：192.168.1.2 。</li>
<li>由于Web管理界面只是一个调用的作用，所以即使浏览器关闭也不影响Aria2进行下载。</li>
</ul>
<h1 id="centos安装配置aria2"><a href="#centos安装配置aria2" class="headerlink" title="centos安装配置aria2"></a>centos安装配置aria2</h1><h2 id="yum安装aria2"><a href="#yum安装aria2" class="headerlink" title="yum安装aria2"></a>yum安装aria2</h2><p>1、手动安装EPEL源</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget http:<span class="comment">//dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</span></span><br><span class="line">rpm -ivh epel-release-latest-<span class="number">7</span><span class="selector-class">.noarch</span>.rpm</span><br><span class="line">yum repolist <span class="comment">//查看是否成功安装epel</span></span><br></pre></td></tr></table></figure>

<p>2、自动安装EPEL源</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">yum</span> <span class="string">install epel-release</span></span><br><span class="line"><span class="attr">yum</span> <span class="string">repolist</span></span><br></pre></td></tr></table></figure>

<p>3、安装aria2<br><code>yum install aria2</code></p>
<p>4、查看安装情况<br><code>aria2c -v</code></p>
<h2 id="编译安装aria2"><a href="#编译安装aria2" class="headerlink" title="编译安装aria2"></a>编译安装aria2</h2><p>1、访问<a href="https://github.com/aria2/aria2/releases" target="_blank" rel="noopener">aria2项目</a>，下载最新的aria2，这里我们下载aria2-1.34.0.tar.gz。</p>
<p><code>wget --no-check-certificate --content-disposition https://github.com/aria2/aria2/releases/download/release-1.34.0/aria2-1.34.0.tar.gz</code></p>
<p>或者：<br><code>curl -LJO https://github.com/aria2/aria2/releases/download/release-1.34.0/aria2-1.34.0.tar.gz</code></p>
<p>2、解压aria2-1.34.0.tar.gz并编译安装。</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mv aria2-1.34.0.tar.gz <span class="string">/opt</span></span><br><span class="line"><span class="keyword">cd</span> <span class="string">/opt/</span></span><br><span class="line">tar -zxvf aria2-1.34.0.tar.gz</span><br><span class="line"><span class="keyword">cd</span> aria2-1.34.0/</span><br><span class="line"><span class="string">./configure</span> <span class="params">--enable-bittorrent</span> <span class="params">--enable-metalink</span>  </span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>
<p>默认情况下，会在/usr/local/bin 目录创建 aria2c 可执行程序。</p>
<p>3、查看安装情况。<br><code>aria2c -v</code></p>
<h2 id="配置aria2-1"><a href="#配置aria2-1" class="headerlink" title="配置aria2"></a>配置aria2</h2><p>1、下载配置文件<br><code>git clone https://github.com/voidking/aria2-conf.git</code></p>
<p>项目包含两个目录，一个是windows，一个是centos。centos目录下包含如下文件：</p>
<ul>
<li>aria2.conf，配置文件</li>
<li>aria2.log，日志文件</li>
<li>aria2.session，下载历史</li>
</ul>
<p>2、移动文件<br><code>mkdir -p /data/aria2</code></p>
<p><code>cd aria2-conf/centos &amp;&amp; mv ./* /data/aria2/</code></p>
<p>3、启动测试<br><code>aria2c --conf-path=/data/aria2/aria2.conf</code></p>
<p>4、后台启动<br><code>aria2c --conf-path=/data/aria2/aria2.conf -D</code></p>
<h2 id="AriaNg安装使用"><a href="#AriaNg安装使用" class="headerlink" title="AriaNg安装使用"></a>AriaNg安装使用</h2><p>1、访问<a href="https://github.com/mayswind/AriaNg/releases" target="_blank" rel="noopener">ariang项目</a>，下载最新版的ariang，这里我们下载aria-ng-0.4.0.zip。<br><code>curl -LJO https://github.com/mayswind/AriaNg/releases/download/0.4.0/aria-ng-0.4.0.zip</code></p>
<p>2、参考<a href="https://www.voidking.com/dev-hexo-accelerate/">Hexo加速访问</a>，在/opt/www目录下创建aria2目录。</p>
<p><code>mkdir -p /opt/www/aria2</code></p>
<p>3、移动文件并解压<br><code>mv aria-ng-0.4.0.zip /opt/www/aria2</code></p>
<p><code>cd /opt/www/aria2 &amp;&amp; unzip aria-ng-0.4.0.zip</code></p>
<p><code>rm aria-ng-0.4.0.zip</code></p>
<p>4、配置nginx<br><code>cd /etc/nginx/conf.d/</code></p>
<p><code>vim www.voidking.com.conf</code>，内容为：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> aria2.voidking.com;</span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">root</span> /opt/www/aria2/;</span><br><span class="line">        <span class="attribute">index</span> index.html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5、重启nginx<br><code>/usr/sbin/nginx -s reload</code></p>
<p>6、在dns服务器上添加aria2，解析到centos服务器ip。</p>
<p>7、测试访问<br>访问地址：<a href="http://aria2.voidking.com" target="_blank" rel="noopener">http://aria2.voidking.com</a></p>
<h2 id="无法连接问题"><a href="#无法连接问题" class="headerlink" title="无法连接问题"></a>无法连接问题</h2><p>在ariang页面，如果发现无法连接到aria2，那么参照如下方法解决：</p>
<p>方法一：开放端口（推荐）<br>1、查询6800端口是否开放<br><code>firewall-cmd --query-port=6800/tcp</code></p>
<p>2、打开6800端口<br><code>firewall-cmd --add-port=6800/tcp</code></p>
<p>方法二：关闭防火墙（不推荐）<br><code>systemctl stop firewalld.service</code></p>
<h1 id="bt下载问题"><a href="#bt下载问题" class="headerlink" title="bt下载问题"></a>bt下载问题</h1><p>有些bt文件，在aria2上进行下载，却没有速度。参考<a href="http://baijiahao.baidu.com/s?id=1588382182211754287&wfr=spider&for=pc" target="_blank" rel="noopener">更新Tracker，解决Aria2 BT下载无速度</a>和<a href="https://www.5yun.org/16436.html" target="_blank" rel="noopener">Aria2 bt 没速度? 试试自动更新BT Tracker服务器列表的方法</a>，进行配置。</p>
<p>1、新建addtrackers.sh脚本，内容为</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">list=`wget -qO- https://raw.githubusercontent.com/ngosang/trackerslist/master/trackers_all.txt|awk NF|sed <span class="string">":a;N;s/\n/,/g;ta"</span>`</span><br><span class="line"><span class="keyword">if</span> [ -z <span class="string">"`grep "</span>bt-tracker<span class="string">" /data/aria2/aria2.conf`"</span> ]; <span class="keyword">then</span></span><br><span class="line">    sed -i <span class="string">'$a bt-tracker='</span><span class="variable">$&#123;list&#125;</span> /data/aria2/aria2.conf</span><br><span class="line">    <span class="built_in">echo</span> add......</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    sed -i <span class="string">"s@bt-tracker.*@bt-tracker=<span class="variable">$list</span>@g"</span> /data/aria2/aria2.conf</span><br><span class="line">    <span class="built_in">echo</span> update......</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>2、执行脚本<br><code>chmod +x addtrackers.sh</code></p>
<p><code>./addtrackers.sh</code></p>
<p>3、重启aria2进行测试<br><code>aria2c --conf-path=/data/aria2/aria2.conf</code></p>
<p>PS：或者，直接访问<a href="https://github.com/ngosang/trackerslist" target="_blank" rel="noopener">trackerslist项目</a>，复制list，然后添加到aria2.conf文件中。</p>
<h1 id="磁力链下载问题"><a href="#磁力链下载问题" class="headerlink" title="磁力链下载问题"></a>磁力链下载问题</h1><p>所有磁力链在aria2上进行下载，没有速度。</p>
<h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>关于emby和plex，暂时没有研究。</p>
<h1 id="书签"><a href="#书签" class="headerlink" title="书签"></a>书签</h1><p><a href="http://skypegnu1.blog.51cto.com/8991766/1637168/" target="_blank" rel="noopener">CentOS 下搭建 aria2 远程下载环境</a></p>
<p><a href="http://www.2kil.com/9472.html" target="_blank" rel="noopener">CentOS7安装Aria2</a></p>
<p><a href="http://www.1vip.ga/" target="_blank" rel="noopener">在线磁力播放引擎</a></p>
<p><a href="http://m.blog.csdn.net/article/details?id=38783803" target="_blank" rel="noopener">DIY一套NAS+私有云盘+下载机</a></p>
<p><a href="https://www.jianshu.com/p/b2649d073741" target="_blank" rel="noopener">Ubuntu16 下载软件Aria2 全局配置方法(最全组合)</a></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/linux/" rel="tag"># linux</a>
          
            <a href="/tags/windows/" rel="tag"># windows</a>
          
        </div>
      

      
      
        <div class="post-widgets">
        

        

        
          
          <div id="needsharebutton-postbottom">
            <span class="btn">
              <i class="fa fa-share-alt" aria-hidden="true"></i>
            </span>
          </div>
        
        </div>
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/dev-docker-deploy-javaweb/" rel="next" title="Docker部署JavaWeb项目">
                <i class="fa fa-chevron-left"></i> Docker部署JavaWeb项目
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/dev-yii-in-action/" rel="prev" title="Yii框架实战">
                Yii框架实战 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC8zODU3Mi8xNTEwMA=="></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="VoidKing" />
            
              <p class="site-author-name" itemprop="name">VoidKing</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%20%7C%7C%20archive">
              
                  <span class="site-state-item-count">583</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">40</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">188</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="mailto:voidking@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/voidking" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="http://weibo.com/voidking" target="_blank" title="Weibo">
                      
                        <i class="fa fa-fw fa-weibo"></i>Weibo</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://twitter.com/voidking_com" target="_blank" title="Twitter">
                      
                        <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#aria2简介"><span class="nav-number">2.</span> <span class="nav-text">aria2简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#webui简介"><span class="nav-number">3.</span> <span class="nav-text">webui简介</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#yaaw"><span class="nav-number">3.1.</span> <span class="nav-text">yaaw</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#webui-aria2"><span class="nav-number">3.2.</span> <span class="nav-text">webui-aria2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AriaNg"><span class="nav-number">3.3.</span> <span class="nav-text">AriaNg</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#aria2命令行"><span class="nav-number">4.</span> <span class="nav-text">aria2命令行</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#windows安装使用aria2"><span class="nav-number">5.</span> <span class="nav-text">windows安装使用aria2</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#安装aria2"><span class="nav-number">5.1.</span> <span class="nav-text">安装aria2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#配置aria2"><span class="nav-number">5.2.</span> <span class="nav-text">配置aria2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AriaNg安装配置"><span class="nav-number">5.3.</span> <span class="nav-text">AriaNg安装配置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#centos安装配置aria2"><span class="nav-number">6.</span> <span class="nav-text">centos安装配置aria2</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#yum安装aria2"><span class="nav-number">6.1.</span> <span class="nav-text">yum安装aria2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编译安装aria2"><span class="nav-number">6.2.</span> <span class="nav-text">编译安装aria2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#配置aria2-1"><span class="nav-number">6.3.</span> <span class="nav-text">配置aria2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AriaNg安装使用"><span class="nav-number">6.4.</span> <span class="nav-text">AriaNg安装使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#无法连接问题"><span class="nav-number">6.5.</span> <span class="nav-text">无法连接问题</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#bt下载问题"><span class="nav-number">7.</span> <span class="nav-text">bt下载问题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#磁力链下载问题"><span class="nav-number">8.</span> <span class="nav-text">磁力链下载问题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#后记"><span class="nav-number">9.</span> <span class="nav-text">后记</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#书签"><span class="nav-number">10.</span> <span class="nav-text">书签</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2012 &mdash; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">VoidKing</span>

  
</div>









        
<div class="busuanzi-count">
  <!-- <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script> -->
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
  <div class="footer-beian">
    <a href="http://www.beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp;
    <!-- <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=32032202000223">苏公网安备 32032202000223号</a> -->
    <img src="/images/beian.png" alt="">
    <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a>
  </div>

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    
      <div id="needsharebutton-float">
        <span class="btn">
          <i class="fa fa-share-alt" aria-hidden="true"></i>
        </span>
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  
  
  <link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css">

  
  
  <script src="/lib/needsharebutton/needsharebutton.js"></script>

  <script>
    
      pbOptions = {};
      
          pbOptions.iconStyle = "box";
      
          pbOptions.boxForm = "horizontal";
      
          pbOptions.position = "bottomCenter";
      
          pbOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      
      new needShareButton('#needsharebutton-postbottom', pbOptions);
    
    
      flOptions = {};
      
          flOptions.iconStyle = "box";
      
          flOptions.boxForm = "horizontal";
      
          flOptions.position = "topRight";
      
          flOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      
      new needShareButton('#needsharebutton-float', flOptions);
    
  </script>

  

  
  


  

  

  
   <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
   <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
   <script type="text/javascript" src="/js/src/fireworks.js"></script>

</body>
</html>
