<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="前言开发中，经常需要用到虚拟机，虚拟中的网络配置，让小编头疼了很久。今天，以CentOS7和Ubuntu16.04为例，彻底解决这个问题。过程中，会穿插xshell和xftp的使用说明。"><meta property="og:type" content="article"><meta property="og:title" content="VirtualBox下CentOS7和Ubuntu16.04网络配置"><meta property="og:url" content="https://www.voidking.com/dev-virtualbox-centos-ubuntu-network/index.html"><meta property="og:site_name" content="VoidKing"><meta property="og:description" content="前言开发中，经常需要用到虚拟机，虚拟中的网络配置，让小编头疼了很久。今天，以CentOS7和Ubuntu16.04为例，彻底解决这个问题。过程中，会穿插xshell和xftp的使用说明。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://cdn.voidking.com//imgs/centos-php/ip.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com//imgs/centos-php/sshd.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com//imgs/centos-php/compare.png"><meta property="og:image" content="http://cdn.voidking.com//imgs/centos-php/host-only.jpg"><meta property="og:image" content="http://cdn.voidking.com//imgs/centos-php/nat.jpg"><meta property="article:published_time" content="2016-08-23T12:13:16.000Z"><meta property="article:modified_time" content="2020-03-31T02:52:58.019Z"><meta property="article:author" content="VoidKing"><meta property="article:tag" content="centos"><meta property="article:tag" content="网络"><meta property="article:tag" content="ubuntu"><meta property="article:tag" content="ssh"><meta property="article:tag" content="xshell"><meta property="article:tag" content="xftp"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://cdn.voidking.com//imgs/centos-php/ip.jpg?imageView2/0/w/600"><link rel="canonical" href="https://www.voidking.com/dev-virtualbox-centos-ubuntu-network/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>VirtualBox下CentOS7和Ubuntu16.04网络配置 | VoidKing</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="VoidKing" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">VoidKing</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">好好学习，天天向上！</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-virtualbox-centos-ubuntu-network/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="VoidKing"><meta itemprop="description" content="学而不思则罔，思而不学则殆！"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="VoidKing"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> VirtualBox下CentOS7和Ubuntu16.04网络配置</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2016-08-23 12:13:16" itemprop="dateCreated datePublished" datetime="2016-08-23T12:13:16+00:00">2016-08-23</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/" itemprop="url" rel="index"><span itemprop="name">专业</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/%E8%BF%90%E7%BB%B4/" itemprop="url" rel="index"><span itemprop="name">运维</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/%E8%BF%90%E7%BB%B4/centos/" itemprop="url" rel="index"><span itemprop="name">centos</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/%E8%BF%90%E7%BB%B4/ubuntu/" itemprop="url" rel="index"><span itemprop="name">ubuntu</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>开发中，经常需要用到虚拟机，虚拟中的网络配置，让小编头疼了很久。今天，以CentOS7和Ubuntu16.04为例，彻底解决这个问题。过程中，会穿插xshell和xftp的使用说明。</p><a id="more"></a><h1 id="桥接"><a href="#桥接" class="headerlink" title="桥接"></a>桥接</h1><h2 id="VirtualBox设置"><a href="#VirtualBox设置" class="headerlink" title="VirtualBox设置"></a>VirtualBox设置</h2><p>选中CentOS，设置，网络，连接方式选择桥接网卡。</p><h2 id="CentOS的ip设置"><a href="#CentOS的ip设置" class="headerlink" title="CentOS的ip设置"></a>CentOS的ip设置</h2><p>1、启动CentOS，使用root用户登录。<br>2、查看ip：<code>ip add</code>。<br>3、编辑ifcfg-enp0s3，<code>vi /etc/sysconfig/network-scripts/ifcfg-enp0s3</code>，把ONBOOT=no改为ONBOOT=yes。<br>4、重启网络服务，<code>service network restart</code>。<br>5、再次查看ip：<code>ip add</code>。<br><img src="http://cdn.voidking.com//imgs/centos-php/ip.jpg?imageView2/0/w/600" alt="ip"></p><h2 id="CentOS的ssh设置"><a href="#CentOS的ssh设置" class="headerlink" title="CentOS的ssh设置"></a>CentOS的ssh设置</h2><p>1、启动CentOS，打开终端，切换到root用户。<br>2、检查是否安装了ssh：<code>rpm -qa | grep ssh</code><br>如果没有安装ssh，则执行命令：<code>yum install openssh-server</code></p><p>3、启动ssh：<code>service sshd start</code><br>如果提示:redirecting to /bin/systemctl start，那么改用命令：<code>/bin/systemctl start sshd.service</code></p><p>4、检查是否已经成功启动：<code>netstat -antp | grep sshd</code><br>如果看到如下信息，则表示启动成功。<br><img src="http://cdn.voidking.com//imgs/centos-php/sshd.jpg?imageView2/0/w/600" alt="sshd"></p><p>5、设置开机自启动：<code>chkconfig sshd on</code></p><p>PS：利用右ctrl键来切换主机和虚拟机的鼠标，利用右ctrl+F来切换虚拟机全屏状态。</p><h2 id="xshell设置"><a href="#xshell设置" class="headerlink" title="xshell设置"></a>xshell设置</h2><p>1、文件，新建，主机填入<code>192.168.1.114</code>。<br>2、选择用户身份验证，输入用户名和密码。<br>3、点击确定，建立连接。</p><p>如果连接失败，请检查centos的防火墙是否关闭。关闭防火墙命令：<code>systemctl stop firewalld.service</code></p><h2 id="xftp配置"><a href="#xftp配置" class="headerlink" title="xftp配置"></a>xftp配置</h2><p>1、文件，新建，主机填入<code>192.168.1.114</code>。<br>2、协议选择SFTP。<br>3、输入用户名和密码。<br>4、点击确定，建立连接。</p><h1 id="改进"><a href="#改进" class="headerlink" title="改进"></a>改进</h1><p>采用桥接方式，虚拟机中CentOS的IP地址是DHCP服务器动态分配的。所以每次使用前需要使用<code>ip add</code>命令，重新查询一下CentOS的IP地址，然后修改xshell和xftp中的主机地址。</p><p>当外部没有DHCP服务器时，虚拟机也需要拨号才能上网，很麻烦。于是，再次研究Virtualbox网络设置，盗图一张说明四种连接方式区别。</p><p><img src="http://cdn.voidking.com//imgs/centos-php/compare.png" alt=""></p><p>比较简单的设计，是添加两张网卡。一张选择仅主机（Host-Only）适配器，用于宿主机和虚拟机之间的通讯，使宿主机可以访问虚拟机的服务；一张选择网络地址转换（NAT），用于分享宿主机网络给虚拟机，使虚拟机可以访问外网。<br><img src="http://cdn.voidking.com//imgs/centos-php/host-only.jpg" alt=""><br><img src="http://cdn.voidking.com//imgs/centos-php/nat.jpg" alt=""></p><p>下面详细说明一下四种连接方式的不同。</p><h2 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a>NAT</h2><p>NAT：Network Address Translation，网络地址转换<br>NAT模式是最简单的实现虚拟机上网的方式，你可以这样理解：</p><blockquote><p>Guest访问网络的所有数据都是由主机提供的，Guest并不真实存在于网络中，主机与网络中的任何机器都不能查看和访问到Guest的存在。</p></blockquote><p>Guest可以访问主机能访问到的所有网络，但是对于主机以及主机网络上的其他机器，Guest又是不可见的，甚至主机也访问不到Guest。</p><p>虚拟机与主机的关系：只能单向访问，虚拟机可以通过网络访问到主机，主机无法通过网络访问到虚拟机。</p><p>虚拟机与网络中其他主机的关系：只能单向访问，虚拟机可以访问到网络中其他主机，其他主机不能通过网络访问到虚拟机。</p><p>虚拟机与虚拟机的关系：相互不能访问，虚拟机与虚拟机各自完全独立，相互间无法通过网络访问彼此。</p><h2 id="Bridged-Adapter（网桥模式）"><a href="#Bridged-Adapter（网桥模式）" class="headerlink" title="Bridged Adapter（网桥模式）"></a>Bridged Adapter（网桥模式）</h2><p>网桥模式，你可以这样理解：</p><blockquote><p>它是通过主机网卡，架设了一条桥，直接连入到网络中了。因此，它使得虚拟机能被分配到一个网络中独立的IP，所有网络功能完全和在网络中的真实机器一样。</p></blockquote><p>网桥模式下的虚拟机，你把它认为是真实计算机就行了。</p><p>虚拟机与主机的关系：可以相互访问，因为虚拟机在真实网络段中有独立IP，主机与虚拟机处于同一网络段中，彼此可以通过各自IP相互访问。</p><p>虚拟机于网络中其他主机的关系：可以相互访问，同样因为虚拟机在真实网络段中有独立IP，虚拟机与所有网络其他主机处于同一网络段中，彼此可以通过各自IP相互访问。</p><p>虚拟机与虚拟机的关系：可以相互访问，原因同上。</p><h2 id="Internal（内网模式）"><a href="#Internal（内网模式）" class="headerlink" title="Internal（内网模式）"></a>Internal（内网模式）</h2><p>内网模式，顾名思义就是内部网络模式：</p><blockquote><p>虚拟机与外网完全断开，只实现虚拟机于虚拟机之间的内部网络模式。</p></blockquote><p>虚拟机与主机的关系：不能相互访问，彼此不属于同一个网络，无法相互访问。</p><p>虚拟机与网络中其他主机的关系：不能相互访问，理由同上。</p><p>虚拟机与虚拟机的关系：可以相互访问，前提是在设置网络时，两台虚拟机设置同一网络名称。如上配置图中，名称为intnet。</p><h2 id="Host-only-Adapter（主机模式）"><a href="#Host-only-Adapter（主机模式）" class="headerlink" title="Host-only Adapter（主机模式）"></a>Host-only Adapter（主机模式）</h2><p>主机模式，这是一种比较复杂的模式，需要有比较扎实的网络基础知识才能玩转。可以说前面几种模式所实现的功能，在这种模式下，通过虚拟机及网卡的设置都可以被实现。</p><p>我们可以理解为Guest在主机中模拟出一张专供虚拟机使用的网卡，所有虚拟机都是连接到该网卡上的，我们可以通过设置这张网卡来实现上网及其他很多功能，比如（网卡共享、网卡桥接等）。</p><p>虚拟机与主机的关系：默认不能相互访问，双方不属于同一IP段，host-only网卡默认IP段为192.168.56.X 子网掩码为255.255.255.0，后面的虚拟机被分配到的也都是这个网段。通过网卡共享、网卡桥接等，可以实现虚拟机于主机相互访问。</p><p>虚拟机与网络主机的关系：默认不能相互访问，原因同上，通过设置，可以实现相互访问。</p><p>虚拟机与虚拟机的关系：默认可以相互访问，都是同处于一个网段。</p><h2 id="修正"><a href="#修正" class="headerlink" title="修正"></a>修正</h2><p>采用主机模式，虚拟机与主机的关系，默认可以相互访问。因为，主机IP地址默认为192.168.56.1，虚拟机的IP地址为192.168.56.X。所以，理论上虚拟机和主机可以相互访问。亲测证明，虚拟机和主机确实可以互相访问。</p><h1 id="CentOS7相关"><a href="#CentOS7相关" class="headerlink" title="CentOS7相关"></a>CentOS7相关</h1><h2 id="添加网络命令"><a href="#添加网络命令" class="headerlink" title="添加网络命令"></a>添加网络命令</h2><p>CentOS7没有netstat 和 ifconfig命令，<code>yum install net-tools</code>。<br>CentOS7查看网络配置，<code>ifconfig -a</code>或者<code>ip add</code>，如果没有获取到IP地址，<code>vi /etc/sysconfig/network-scripts/ifcfg-enp0s3</code>，修改<code>ONBOOT=no</code>为<code>ONBOOT=yes</code>，然后<code>service network restart</code>。</p><h2 id="修改时区"><a href="#修改时区" class="headerlink" title="修改时区"></a>修改时区</h2><p>CentOS7修改时区，<code>cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</code>。</p><h2 id="设置静态IP"><a href="#设置静态IP" class="headerlink" title="设置静态IP"></a>设置静态IP</h2><p>第一网卡设置为固定IP，ifcfg-enp0s3原配置：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">TYPE</span>=Ethernet</span><br><span class="line"><span class="attr">BOOTPROTO</span>=dhcp</span><br><span class="line"><span class="attr">DEFROUTE</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">PEERDNS</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">PEERROUTES</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">IPV4_FAILURE_FATAL</span>=<span class="literal">no</span></span><br><span class="line"><span class="attr">IPV6INIT</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">IPV6_AUTOCONF</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">IPV6_DEFROUTE</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">IPV6_PEERDNS</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">IPV6_PEERROUTES</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">IPV6_FAILURE_FATAL</span>=<span class="literal">no</span></span><br><span class="line"><span class="attr">NAME</span>=enp0s3</span><br><span class="line"><span class="attr">UUID</span>=<span class="number">459</span>b17a4-fd16-<span class="number">4</span>ea7-<span class="number">8</span>a4b-<span class="number">9509</span>b6e899e7</span><br><span class="line"><span class="attr">DEVICE</span>=enp0s3</span><br><span class="line"><span class="attr">ONBOOT</span>=<span class="literal">yes</span></span><br></pre></td></tr></table></figure><p>ifcfg-enp0s3修改为：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">TYPE</span>=Ethernet</span><br><span class="line"><span class="attr">BOOTPROTO</span>=static</span><br><span class="line"><span class="attr">IPADDR</span>=<span class="number">192.168</span>.<span class="number">56.101</span></span><br><span class="line"><span class="attr">NETMASK</span>=<span class="number">255.255</span>.<span class="number">255.0</span></span><br><span class="line"><span class="attr">NM_CONTROLLED</span>=<span class="literal">no</span></span><br><span class="line"><span class="attr">DEFROUTE</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">PEERDNS</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">PEERROUTES</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">IPV4_FAILURE_FATAL</span>=<span class="literal">no</span></span><br><span class="line"><span class="attr">IPV6INIT</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">IPV6_AUTOCONF</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">IPV6_DEFROUTE</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">IPV6_PEERDNS</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">IPV6_PEERROUTES</span>=<span class="literal">yes</span></span><br><span class="line"><span class="attr">IPV6_FAILURE_FATAL</span>=<span class="literal">no</span></span><br><span class="line"><span class="attr">NAME</span>=enp0s3</span><br><span class="line"><span class="attr">UUID</span>=<span class="number">459</span>b17a4-fd16-<span class="number">4</span>ea7-<span class="number">8</span>a4b-<span class="number">9509</span>b6e899e7</span><br><span class="line"><span class="attr">DEVICE</span>=enp0s3</span><br><span class="line"><span class="attr">ONBOOT</span>=<span class="literal">yes</span></span><br></pre></td></tr></table></figure><h1 id="Ubuntu相关"><a href="#Ubuntu相关" class="headerlink" title="Ubuntu相关"></a>Ubuntu相关</h1><h2 id="修改root密码"><a href="#修改root密码" class="headerlink" title="修改root密码"></a>修改root密码</h2><p>修改root密码，<code>sudo passwd root</code>。</p><h2 id="安装ssh服务"><a href="#安装ssh服务" class="headerlink" title="安装ssh服务"></a>安装ssh服务</h2><p>安装ssh服务，<code>apt-get install openssh-server</code>，如果提示找不到安装包，执行<code>apt-get update</code>。</p><p>允许以root用户通过ssh登录，<code>vi /etc/ssh/sshd_config</code>，找到：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Authentication:</span></span><br><span class="line"><span class="attr">LoginGraceTime</span> <span class="string">120</span></span><br><span class="line"><span class="attr">PermitRootLogin</span> <span class="string">prohibit-password</span></span><br><span class="line"><span class="attr">StrictModes</span> <span class="string">yes</span></span><br></pre></td></tr></table></figure><p>修改为：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Authentication:</span></span><br><span class="line"><span class="string">LoginGraceTime</span> <span class="number">120</span></span><br><span class="line"><span class="comment">#PermitRootLogin prohibit-password</span></span><br><span class="line"><span class="string">PermitRootLogin</span> <span class="literal">yes</span></span><br><span class="line"><span class="string">StrictModes</span> <span class="literal">yes</span></span><br></pre></td></tr></table></figure><p>然后重启ssh服务，<code>service ssh restart</code>。</p><h2 id="设置静态IP-1"><a href="#设置静态IP-1" class="headerlink" title="设置静态IP"></a>设置静态IP</h2><p>查看网络配置，<code>ifconfig -a</code>，如果只显示一个网卡，执行<code>vi /etc/network/interfaces</code>。<br>interfaces原配置为：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This file describes the network interfaces available on your system</span></span><br><span class="line"><span class="comment"># and how to activate them. For more information, see interfaces(5).</span></span><br><span class="line"></span><br><span class="line"><span class="attr">source</span> <span class="string">/etc/network/interfaces.d/*</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The loopback network interface</span></span><br><span class="line"><span class="attr">auto</span> <span class="string">lo</span></span><br><span class="line"><span class="attr">iface</span> <span class="string">lo inet loopback</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The primary network interface</span></span><br><span class="line"><span class="attr">auto</span> <span class="string">enp0s3</span></span><br><span class="line"><span class="attr">iface</span> <span class="string">enp0s3 inet dhcp</span></span><br></pre></td></tr></table></figure><p>添加如下内容：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># The second network <span class="keyword">interface</span></span><br><span class="line"><span class="symbol">auto</span> <span class="symbol">enp0s8</span></span><br><span class="line"><span class="symbol">iface</span> <span class="symbol">enp0s8</span> <span class="symbol">inet</span> <span class="symbol">dhcp</span></span><br></pre></td></tr></table></figure><p>然后重启网络服务，<code>/etc/init.d/networking restart</code>。</p><p>第一网卡设置为固定IP：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The primary network interface</span></span><br><span class="line">auto enp0s3</span><br><span class="line">iface enp0s3 inet static  </span><br><span class="line">address 192.168.56.102 </span><br><span class="line">netmask 255.255.255.0</span><br></pre></td></tr></table></figure><p>然后重启第一张网卡，<code>sudo ifdown enp0s3</code>，<code>sudo ifup enp0s3</code>。如果报错：RTNETLINK answers: File exists，那就先执行一下<code>sudo ip addr flush dev enp0s3</code>。</p><h2 id="修改网卡名"><a href="#修改网卡名" class="headerlink" title="修改网卡名"></a>修改网卡名</h2><p>网卡名叫enp0s3这种名字，很不友好，不如ubuntu14中的eth0看起来舒服。</p><p>1、编辑grub文件<br><code>sudo vim /etc/default/grub</code></p><p>找到：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">GRUB_CMDLINE_LINUX</span>=<span class="string">""</span></span><br></pre></td></tr></table></figure><p>修改为：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">GRUB_CMDLINE_LINUX</span>=<span class="string">"net.ifnames=0 biosdevname=0"</span></span><br></pre></td></tr></table></figure><p>2、重新生成grub配置<br><code>sudo grub-mkconfig -o /boot/grub/grub.cfg</code></p><p>3、修改/etc/network/interfaces中的enp0s3为eth0，enp0s8修改为eth1。</p><p>4、重启<br><code>sudo reboot</code></p><h2 id="修改主机名"><a href="#修改主机名" class="headerlink" title="修改主机名"></a>修改主机名</h2><p>1、编辑/etc/hostname<br><code>sudo vim /etc/hostname</code></p><p>修改为想要的主机名，比如controller。</p><p>2、编辑/etc/hosts<br><code>sudo vim /etc/hosts</code></p><p>添加或编辑：</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0.0.1</span>  controller</span><br></pre></td></tr></table></figure><p>3、重启<br><code>sudo reboot</code></p><h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>以后不玩图形界面的linux了，专注于服务器配置。</p><h1 id="书签"><a href="#书签" class="headerlink" title="书签"></a>书签</h1><p>如何开启Centos6.4系统的SSH服务<br><a href="http://jingyan.baidu.com/article/3ea51489f9efbf52e61bba05.html" target="_blank" rel="noopener">http://jingyan.baidu.com/article/3ea51489f9efbf52e61bba05.html</a></p><p>通过SSH连接VirtualBox中的CentOS<br><a href="http://www.2cto.com/os/201212/172712.html" target="_blank" rel="noopener">http://www.2cto.com/os/201212/172712.html</a></p><p>VirtualBox + CentOS 虚拟机网卡配置<br><a href="http://my.oschina.net/duangr/blog/182541" target="_blank" rel="noopener">http://my.oschina.net/duangr/blog/182541</a></p><p>CentOS 7 网络配置<br><a href="http://simonhu.blog.51cto.com/196416/1588971" target="_blank" rel="noopener">http://simonhu.blog.51cto.com/196416/1588971</a></p><p>centOS7在VirtualBox中装好后的网络连接问题<br><a href="http://jingyan.baidu.com/article/456c463b4a98460a5931444c.html" target="_blank" rel="noopener">http://jingyan.baidu.com/article/456c463b4a98460a5931444c.html</a></p><p>快速理解VirtualBox的四种网络连接方式<br><a href="http://www.cnblogs.com/york-hust/archive/2422911.html" target="_blank" rel="noopener">http://www.cnblogs.com/york-hust/archive/2422911.html</a></p><p>CentOS 7 修改时区<br><a href="http://blog.csdn.net/robertsong2004/article/details/42268701" target="_blank" rel="noopener">http://blog.csdn.net/robertsong2004/article/details/42268701</a></p><p>centOS7在VirtualBox中装好后的网络连接问题<br><a href="http://jingyan.baidu.com/article/456c463b4a98460a5931444c.html" target="_blank" rel="noopener">http://jingyan.baidu.com/article/456c463b4a98460a5931444c.html</a></p><p>virtualBox下Centos系统扩展磁盘空间详细教程<br><a href="http://blog.csdn.net/timecolor/article/details/48468377" target="_blank" rel="noopener">http://blog.csdn.net/timecolor/article/details/48468377</a></p><p>virtualbox中ubuntu硬盘扩展，Gparted无法进入图形界面<br><a href="http://blog.sina.com.cn/s/blog_7149fc900102wvxh.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_7149fc900102wvxh.html</a></p></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/centos/" rel="tag"># centos</a> <a href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag"># 网络</a> <a href="/tags/ubuntu/" rel="tag"># ubuntu</a> <a href="/tags/ssh/" rel="tag"># ssh</a> <a href="/tags/xshell/" rel="tag"># xshell</a> <a href="/tags/xftp/" rel="tag"># xftp</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-thinkphp-environment/" rel="prev" title="ThinkPHP开发环境搭建"><i class="fa fa-chevron-left"></i> ThinkPHP开发环境搭建</a></div><div class="post-nav-item"> <a href="/dev-centos-php-envirenment/" rel="next" title="在CentOS7上配置PHP运行环境">在CentOS7上配置PHP运行环境<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zODU3Mi8xNTEwMA=="></div></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#桥接"><span class="nav-number">2.</span> <span class="nav-text">桥接</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#VirtualBox设置"><span class="nav-number">2.1.</span> <span class="nav-text">VirtualBox设置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CentOS的ip设置"><span class="nav-number">2.2.</span> <span class="nav-text">CentOS的ip设置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CentOS的ssh设置"><span class="nav-number">2.3.</span> <span class="nav-text">CentOS的ssh设置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#xshell设置"><span class="nav-number">2.4.</span> <span class="nav-text">xshell设置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#xftp配置"><span class="nav-number">2.5.</span> <span class="nav-text">xftp配置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#改进"><span class="nav-number">3.</span> <span class="nav-text">改进</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#NAT"><span class="nav-number">3.1.</span> <span class="nav-text">NAT</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Bridged-Adapter（网桥模式）"><span class="nav-number">3.2.</span> <span class="nav-text">Bridged Adapter（网桥模式）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Internal（内网模式）"><span class="nav-number">3.3.</span> <span class="nav-text">Internal（内网模式）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Host-only-Adapter（主机模式）"><span class="nav-number">3.4.</span> <span class="nav-text">Host-only Adapter（主机模式）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修正"><span class="nav-number">3.5.</span> <span class="nav-text">修正</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#CentOS7相关"><span class="nav-number">4.</span> <span class="nav-text">CentOS7相关</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#添加网络命令"><span class="nav-number">4.1.</span> <span class="nav-text">添加网络命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改时区"><span class="nav-number">4.2.</span> <span class="nav-text">修改时区</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设置静态IP"><span class="nav-number">4.3.</span> <span class="nav-text">设置静态IP</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Ubuntu相关"><span class="nav-number">5.</span> <span class="nav-text">Ubuntu相关</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#修改root密码"><span class="nav-number">5.1.</span> <span class="nav-text">修改root密码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装ssh服务"><span class="nav-number">5.2.</span> <span class="nav-text">安装ssh服务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设置静态IP-1"><span class="nav-number">5.3.</span> <span class="nav-text">设置静态IP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改网卡名"><span class="nav-number">5.4.</span> <span class="nav-text">修改网卡名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改主机名"><span class="nav-number">5.5.</span> <span class="nav-text">修改主机名</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#后记"><span class="nav-number">6.</span> <span class="nav-text">后记</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#书签"><span class="nav-number">7.</span> <span class="nav-text">书签</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="VoidKing" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">VoidKing</p><div class="site-description" itemprop="description">学而不思则罔，思而不学则殆！</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">592</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">40</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">191</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://twitter.com/voidking_com" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;voidking_com" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i> Twitter</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">VoidKing</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://www.beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer><div id="needsharebutton-float"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css"><script src="/lib/needsharebutton/needsharebutton.js"></script><script>pbOptions={iconStyle:"box",boxForm:"horizontal",position:"bottomCenter",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-postbottom",pbOptions),flOptions={iconStyle:"box",boxForm:"horizontal",position:"topRight",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-float",flOptions)</script><script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  // window.livereOptions = {
  //   refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  // };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script></body></html>