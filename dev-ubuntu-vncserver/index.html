<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//qiniu.cdn.voidking.com/doc/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="1. 前言《Linux下使用VirtualBox》一文中，使用命令行操作virtualbox，有很多不方便的地方，比如创建虚拟机就很麻烦。 能不能在远程linux使用VirtualBox的时候，通过图形界面使用呢？可以的。要远程使用图形界面，服务端需要安装vncserver，客户端需要安装vncclient。 参考文档：  XShell+Xmanager实现在XShell中显示远程服务器的图形界面"><meta property="og:type" content="article"><meta property="og:title" content="Ubuntu中配置使用VNCServer"><meta property="og:url" content="https://www.voidking.com/dev-ubuntu-vncserver/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="1. 前言《Linux下使用VirtualBox》一文中，使用命令行操作virtualbox，有很多不方便的地方，比如创建虚拟机就很麻烦。 能不能在远程linux使用VirtualBox的时候，通过图形界面使用呢？可以的。要远程使用图形界面，服务端需要安装vncserver，客户端需要安装vncclient。 参考文档：  XShell+Xmanager实现在XShell中显示远程服务器的图形界面"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://cdn.voidking.com//imgs/linux-virtualbox/twm.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com//imgs/linux-virtualbox/gnone.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/linux-virtualbox/desktop.jpg?imageView2/0/w/600"><meta property="article:published_time" content="2018-06-25T15:30:00.000Z"><meta property="article:modified_time" content="2023-05-27T08:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="linux"><meta property="article:tag" content="ubuntu"><meta property="article:tag" content="virtualbox"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://cdn.voidking.com//imgs/linux-virtualbox/twm.jpg?imageView2/0/w/600"><link rel="canonical" href="https://www.voidking.com/dev-ubuntu-vncserver/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>Ubuntu中配置使用VNCServer | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">一个计算机技术爱好者与学习者</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-ubuntu-vncserver/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="一个计算机技术爱好者与学习者"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> Ubuntu中配置使用VNCServer</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-06-25 15:30:00" itemprop="dateCreated datePublished" datetime="2018-06-25T15:30:00+00:00">2018-06-25</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2023-05-27 08:00:00" itemprop="dateModified" datetime="2023-05-27T08:00:00+00:00">2023-05-27</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/devops/" itemprop="url" rel="index"><span itemprop="name">devops</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="前言"><span class="post-title-index">1.</span><a href="#前言" class="headerlink" title="前言"></a> 前言</h1><p><a href="https://www.voidking.com/dev-linux-virtualbox/">《Linux下使用VirtualBox》</a>一文中，使用命令行操作virtualbox，有很多不方便的地方，比如创建虚拟机就很麻烦。</p><p>能不能在远程linux使用VirtualBox的时候，通过图形界面使用呢？可以的。<br>要远程使用图形界面，服务端需要安装vncserver，客户端需要安装vncclient。</p><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_24571549/article/details/68215724">XShell+Xmanager实现在XShell中显示远程服务器的图形界面</a></li><li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/AbcFly/p/6424316.html">Ubuntu14.04服务器:远程桌面连接</a></li><li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/hubery/p/4141974.html">Linux下VNC配置使用总结：开启+桌面配置+安全访问</a></li></ul><h1 id="xfce4桌面"><span class="post-title-index">2.</span><a href="#xfce4桌面" class="headerlink" title="xfce4桌面"></a> xfce4桌面</h1><p>参考文档<a target="_blank" rel="noopener" href="https://jingyan.baidu.com/article/cbcede077f59bf02f40b4ddb.html">Ubuntu如何安装vncserver</a>。</p><p>1、安装xfce4桌面系统（twm桌面）<br><code>apt-get install xfce4</code> 　　<br>xfce4桌面系统非常简单，界面只有一个灰色背景加上一个shell窗口。</p><p>2、安装vnc4server和xrdp</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install -y vnc4server xrdp</span><br></pre></td></tr></table></figure><p>VNC4Server 是一个基于 VNC（Virtual Network Computing）协议的远程桌面服务器软件，它允许用户通过 VNC 客户端在远程计算机上查看和操作图形界面。VNC4Server 通过在远程计算机上创建虚拟显示设备并将图形渲染传输到客户端来实现远程桌面功能。</p><p>XRDP 是一种远程桌面协议，它允许用户通过 Microsoft 的 RDP（Remote Desktop Protocol）协议访问远程计算机的桌面。XRDP 提供了在 Linux 系统上实现 RDP 功能的方式。</p><p>XRDP 与 VNC4Server 结合使用，以在 Linux 系统上提供远程桌面访问。通常的配置是，XRDP 充当 RDP 服务器，接受来自 Windows 或其他 RDP 客户端的连接请求，并将这些连接请求转发到 VNC4Server。VNC4Server 在远程 Linux 计算机上运行，负责处理图形界面渲染，并将渲染的结果传输回 RDP 客户端。这样，用户可以使用 RDP 客户端连接到远程 Linux 计算机并在其中运行图形应用程序。</p><p>3、配置默认使用xfce4作为登录界面</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;xfce4-session&quot;</span> &gt;~/.xsession</span><br></pre></td></tr></table></figure><p>4、重启xrdp</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service xrdp restart</span><br></pre></td></tr></table></figure><p>5、启动vncserver</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vncserver</span><br></pre></td></tr></table></figure><p>根据提示设置远程密码，默认放在/root/.vnc/passwd中，同时生成/root/.vnc/xstartup。<br>其中<code>:1</code>表示在5900的基础上加1，就是vnc端口。</p><p>xstartup内容为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the following two lines for normal desktop:</span></span><br><span class="line"><span class="comment"># unset SESSION_MANAGER</span></span><br><span class="line"><span class="comment"># exec /etc/X11/xinit/xinitrc</span></span><br><span class="line"></span><br><span class="line">[ -x /etc/vnc/xstartup ] &amp;&amp; <span class="built_in">exec</span> /etc/vnc/xstartup</span><br><span class="line">[ -r <span class="variable">$HOME</span>/.Xresources ] &amp;&amp; xrdb <span class="variable">$HOME</span>/.Xresources</span><br><span class="line">xsetroot -solid grey</span><br><span class="line">vncconfig -iconic &amp;</span><br><span class="line">x-terminal-emulator -geometry 80x24+10+10 -<span class="built_in">ls</span> -title <span class="string">&quot;<span class="variable">$VNCDESKTOP</span> Desktop&quot;</span> &amp;</span><br><span class="line">x-window-manager &amp;</span><br></pre></td></tr></table></figure><p>6、本地打开<a target="_blank" rel="noopener" href="https://www.realvnc.com/en/connect/download/viewer/">vncviewer client</a>，输入<code>ip:5901</code>进行连接。连接成功后发现，桌面是灰色背景，桌面上只有一个shell。这就是传说中的twm界面。<br><img src="http://cdn.voidking.com//imgs/linux-virtualbox/twm.jpg?imageView2/0/w/600"></p><p>7、启动virtualbox<br>在shell中，输入<code>virtualbox</code></p><p>至此，就能愉快地使用virtualbox图形界面了。</p><h1 id="gnome桌面"><span class="post-title-index">3.</span><a href="#gnome桌面" class="headerlink" title="gnome桌面"></a> gnome桌面</h1><p>上面的xfce4桌面，可以满足我们使用virtualbox的需求。<br>但是，这款桌面实在太简单了，快捷键只能切换窗口（Alt+Tab），无法快捷打开terminal，右键鼠标啥也没有。<br>所以，还得折腾下，搞个更好用的桌面，参考文档<a target="_blank" rel="noopener" href="https://jingyan.baidu.com/article/cbcede077f59bf02f40b4ddb.html">Ubuntu如何安装vncserver</a>。</p><p>1、关闭vncserver</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vncserver --list</span><br><span class="line">vncserver -<span class="built_in">kill</span> :1</span><br></pre></td></tr></table></figure><p>2、安装gnome桌面</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install -y gnome-panel gnome-settings-daemon metacity nautilus gnome-terminal</span><br></pre></td></tr></table></figure><p>3、修改xstartup</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /root/.vnc/xstartup&#123;,.xfce4&#125;</span><br><span class="line">vim /root/.vnc/xstartup</span><br></pre></td></tr></table></figure><p>修改后内容如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="built_in">export</span> XKL_XMODMAP_DISABLE=1  </span><br><span class="line"><span class="built_in">unset</span> SESSION_MANAGER  </span><br><span class="line"><span class="built_in">unset</span> DBUS_SESSION_BUS_ADDRESS  </span><br><span class="line"></span><br><span class="line">gnome-panel &amp;  </span><br><span class="line">gnome-settings-daemon &amp;  </span><br><span class="line">metacity &amp;  </span><br><span class="line">nautilus &amp;  </span><br><span class="line">gnome-terminal &amp;</span><br></pre></td></tr></table></figure><p>4、启动vncserver</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vncserver</span><br></pre></td></tr></table></figure><p>5、连接vncserver<br><img src="http://cdn.voidking.com//imgs/linux-virtualbox/gnone.jpg?imageView2/0/w/600"><br>gonme桌面，已经比xfce4好了很多，但是还是比较简陋。</p><h1 id="ubuntu-desktop桌面"><span class="post-title-index">4.</span><a href="#ubuntu-desktop桌面" class="headerlink" title="ubuntu-desktop桌面"></a> ubuntu-desktop桌面</h1><p>参考文档：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_32096735/article/details/126381392">ubuntu20.04 vncservr配置</a></p><p>1、关闭vncserver</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vncserver --list</span><br><span class="line">vncserver -<span class="built_in">kill</span> :1</span><br></pre></td></tr></table></figure><p>2、安装ubuntu-desktop桌面</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install ubuntu-desktop</span><br><span class="line"><span class="built_in">ls</span> -l /usr/share/xsessions/</span><br></pre></td></tr></table></figure><p>3、修改xstartup</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /root/.vnc/xstartup&#123;,.gnome&#125;</span><br><span class="line"><span class="built_in">ls</span> /usr/share/xsessions/</span><br><span class="line"><span class="built_in">cat</span> /usr/share/xsessions/ubuntu.desktop</span><br><span class="line">vim /root/.vnc/xstartup</span><br></pre></td></tr></table></figure><p>修改后内容如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="built_in">export</span> XKL_XMODMAP_DISABLE=1  </span><br><span class="line"><span class="built_in">unset</span> SESSION_MANAGER  </span><br><span class="line"><span class="built_in">unset</span> DBUS_SESSION_BUS_ADDRESS  </span><br><span class="line"></span><br><span class="line"><span class="comment"># Set the default window manager</span></span><br><span class="line"><span class="built_in">export</span> XDG_SESSION_DESKTOP=ubuntu</span><br><span class="line"><span class="built_in">export</span> XDG_DATA_DIRS=/usr/share/ubuntu:/usr/local/share:/usr/share:/var/lib/snapd/desktop</span><br><span class="line"><span class="built_in">export</span> XDG_CONFIG_DIRS=/etc/xdg/xdg-ubuntu:/etc/xdg</span><br><span class="line"></span><br><span class="line"><span class="comment"># Start the window manager</span></span><br><span class="line"><span class="built_in">exec</span> /usr/bin/gnome-session</span><br></pre></td></tr></table></figure><p>其中最关键的是<code>exec /usr/bin/gnome-session</code>，这个值是在<code>/usr/share/xsessions/ubuntu.desktop</code>中获取到的。</p><p>4、启动vncserver</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vncserver</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">vncserver :1 -localhost no</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">vncserver :1 -xstartup /root/.vnc/xstartup -localhost no</span><br></pre></td></tr></table></figure><p><img src="http://cdn.voidking.com/@/imgs/linux-virtualbox/desktop.jpg?imageView2/0/w/600"><br>再次连接后，看到的就是正常的桌面了，nice。</p><p>5、修改窗口大小<br>vncserver默认的窗口大小为1024x768，使用时如果感觉窗口比较小，可以进行修改。<br><code>vim /usr/bin/vncserver</code>，如下修改：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># line 44, change</span></span><br><span class="line"><span class="variable">$geometry</span> = <span class="string">&quot;1280x1024&quot;</span>;</span><br></pre></td></tr></table></figure><p>然后kill掉已经启动的vncserver，启动新的即可。</p><h1 id="错误解决"><span class="post-title-index">5.</span><a href="#错误解决" class="headerlink" title="错误解决"></a> 错误解决</h1><p>在某次远程桌面连接时，提示too many security failures，解决办法参考<a target="_blank" rel="noopener" href="http://www.ouvps.com/?p=1730">vncserver too many security failures</a>。</p><p>1、重置黑名单</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vncconfig -display :1 -<span class="built_in">set</span> BlacklistTimeout=0 -<span class="built_in">set</span> BlacklistThreshold=1000000</span><br></pre></td></tr></table></figure><p>2、连接成功后还原黑名单</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vncconfig -display :1 -<span class="built_in">set</span> BlacklistTimeout=600000000000 -<span class="built_in">set</span> BlacklistThreshold=10</span><br></pre></td></tr></table></figure></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>原文链接：</strong> <a href="https://www.voidking.com/dev-ubuntu-vncserver/" title="Ubuntu中配置使用VNCServer">https://www.voidking.com/dev-ubuntu-vncserver/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本文采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议，转载请注明出处！源站会即时更新知识点并修正错误，欢迎访问~</li><li> <img width="200" height="200" src="/images/avatar.jpg"><p style="text-align:center;margin-bottom:0">微信公众号同步更新，欢迎关注~</p></li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/linux/" rel="tag"># linux</a> <a href="/tags/ubuntu/" rel="tag"># ubuntu</a> <a href="/tags/virtualbox/" rel="tag"># virtualbox</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-ganglia-grid/" rel="prev" title="Ganglia配置Grid架构"><i class="fa fa-chevron-left"></i> Ganglia配置Grid架构</a></div><div class="post-nav-item"> <a href="/dev-linux-virtualbox/" rel="next" title="好好学Linux：Linux系统中使用VirtualBox">好好学Linux：Linux系统中使用VirtualBox<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"><ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-3284447971731414" data-ad-slot="9697986181"></ins><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3284447971731414" crossorigin="anonymous"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">1. 前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#xfce4%E6%A1%8C%E9%9D%A2"><span class="nav-text">2. xfce4桌面</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#gnome%E6%A1%8C%E9%9D%A2"><span class="nav-text">3. gnome桌面</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ubuntu-desktop%E6%A1%8C%E9%9D%A2"><span class="nav-text">4. ubuntu-desktop桌面</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3"><span class="nav-text">5. 错误解决</span></a></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">一个计算机技术爱好者与学习者</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">700</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">31</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">256</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2024</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '5a238b8c32b1e4dd2156',
      clientSecret: 'bfb5d518626f6fdc7da0351d1e0cd37ab75c6361',
      repo: 'gitalk-comments',
      owner: 'voidking',
      admin: ['voidking'],
      id: '59cb676229f7cdc78e2e7f541f255b8a',
      title: 'Ubuntu中配置使用VNCServer',
      body: '欢迎留言，互相交流学习~',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></body></html>