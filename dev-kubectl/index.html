<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="kubectl简介 Kubectl is a command line interface for running commands against Kubernetes clusters.   没错，kubectl是一个命令行工具，用来控制K8S集群。kubectl该怎么读？可以参考HowToPronounce-kubectl，小编喜欢读作kubecontrol。 kubectl命令格式为： 1"><meta property="og:type" content="article"><meta property="og:title" content="kubectl常用命令"><meta property="og:url" content="https://www.voidking.com/dev-kubectl/index.html"><meta property="og:site_name" content="VoidKing"><meta property="og:description" content="kubectl简介 Kubectl is a command line interface for running commands against Kubernetes clusters.   没错，kubectl是一个命令行工具，用来控制K8S集群。kubectl该怎么读？可以参考HowToPronounce-kubectl，小编喜欢读作kubecontrol。 kubectl命令格式为： 1"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2019-09-15T20:00:00.000Z"><meta property="article:modified_time" content="2020-02-18T03:13:36.642Z"><meta property="article:author" content="VoidKing"><meta property="article:tag" content="docker"><meta property="article:tag" content="k8s"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-kubectl/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>kubectl常用命令 | VoidKing</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="VoidKing" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">VoidKing</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">好好学习，天天向上！</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-kubectl/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="VoidKing"><meta itemprop="description" content="学而不思则罔，思而不学则殆！"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="VoidKing"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> kubectl常用命令</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-09-15 20:00:00" itemprop="dateCreated datePublished" datetime="2019-09-15T20:00:00+00:00">2019-09-15</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/" itemprop="url" rel="index"><span itemprop="name">专业</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/%E8%BF%90%E7%BB%B4/" itemprop="url" rel="index"><span itemprop="name">运维</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/%E8%BF%90%E7%BB%B4/k8s/" itemprop="url" rel="index"><span itemprop="name">k8s</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="kubectl简介"><a href="#kubectl简介" class="headerlink" title="kubectl简介"></a>kubectl简介</h1><blockquote><p>Kubectl is a command line interface for running commands against Kubernetes clusters.</p></blockquote><p>没错，kubectl是一个命令行工具，用来控制K8S集群。kubectl该怎么读？可以参考<a href="http://www.howtopronounce.cc/kubectl" target="_blank" rel="noopener">HowToPronounce-kubectl</a>，小编喜欢读作kubecontrol。</p><p>kubectl命令格式为：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">kubectl</span> <span class="selector-attr">[command]</span> <span class="selector-attr">[TYPE]</span> <span class="selector-attr">[NAME]</span> <span class="selector-attr">[flags]</span></span><br></pre></td></tr></table></figure><p>更多内容，参考<a href="https://kubernetes.io/docs/reference/kubectl/overview/" target="_blank" rel="noopener">Overview of kubectl</a>。</p><p><a href="https://www.voidking.com/dev-k8s-start/">《K8S入门篇》</a>一文中，已经学习了kubectl的安装方法，并且使用了一些简单命令。本文整理一下kubectl的常用命令，方便记忆和复习。</p><a id="more"></a><h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><h2 id="指定配置文件"><a href="#指定配置文件" class="headerlink" title="指定配置文件"></a>指定配置文件</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定默认配置文件</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">KUBECONFIG</span>=~/.kube/config</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看kubectl配置</span></span><br><span class="line">kubectl<span class="built_in"> config </span>view</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定单次运行配置文件</span></span><br><span class="line">kubectl <span class="builtin-name">get</span> deployments <span class="attribute">--kubeconfig</span>=/root/.kube/config</span><br><span class="line">kubectl <span class="builtin-name">get</span> deployments --kubeconfig /root/.kube/config</span><br></pre></td></tr></table></figure><h2 id="命令自动补全"><a href="#命令自动补全" class="headerlink" title="命令自动补全"></a>命令自动补全</h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum install -y bash-completion</span><br><span class="line">source <span class="string">/usr/share/bash-completion/bash_completion</span></span><br><span class="line">source &lt;<span class="params">(kubectl completion bash)</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"source /usr/share/bash-completion/bash_completion"</span> &gt;&gt; ~<span class="string">/.bashrc</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"source &lt;(kubectl completion bash)"</span> &gt;&gt; ~<span class="string">/.bashrc</span></span><br></pre></td></tr></table></figure><h2 id="查看资源缩写"><a href="#查看资源缩写" class="headerlink" title="查看资源缩写"></a>查看资源缩写</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kubectl</span> <span class="string">describe</span></span><br><span class="line"><span class="attr">kubectl</span> <span class="string">api-resources</span></span><br></pre></td></tr></table></figure><p>输出结果为：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">NAME</span>                              <span class="string">SHORTNAMES</span>   <span class="string">APIGROUP</span>                       <span class="string">NAMESPACED</span>   <span class="string">KIND</span></span><br><span class="line"><span class="string">bindings</span>                                                                      <span class="literal">true</span>         <span class="string">Binding</span></span><br><span class="line"><span class="string">componentstatuses</span>                 <span class="string">cs</span>                                          <span class="literal">false</span>        <span class="string">ComponentStatus</span></span><br><span class="line"><span class="string">configmaps</span>                        <span class="string">cm</span>                                          <span class="literal">true</span>         <span class="string">ConfigMap</span></span><br><span class="line"><span class="string">endpoints</span>                         <span class="string">ep</span>                                          <span class="literal">true</span>         <span class="string">Endpoints</span></span><br><span class="line"><span class="string">events</span>                            <span class="string">ev</span>                                          <span class="literal">true</span>         <span class="string">Event</span></span><br><span class="line"><span class="string">limitranges</span>                       <span class="string">limits</span>                                      <span class="literal">true</span>         <span class="string">LimitRange</span></span><br><span class="line"><span class="string">namespaces</span>                        <span class="string">ns</span>                                          <span class="literal">false</span>        <span class="string">Namespace</span></span><br><span class="line"><span class="string">nodes</span>                             <span class="literal">no</span>                                          <span class="literal">false</span>        <span class="string">Node</span></span><br><span class="line"><span class="string">persistentvolumeclaims</span>            <span class="string">pvc</span>                                         <span class="literal">true</span>         <span class="string">PersistentVolumeClaim</span></span><br><span class="line"><span class="string">persistentvolumes</span>                 <span class="string">pv</span>                                          <span class="literal">false</span>        <span class="string">PersistentVolume</span></span><br><span class="line"><span class="string">pods</span>                              <span class="string">po</span>                                          <span class="literal">true</span>         <span class="string">Pod</span></span><br><span class="line"><span class="string">podtemplates</span>                                                                  <span class="literal">true</span>         <span class="string">PodTemplate</span></span><br><span class="line"><span class="string">replicationcontrollers</span>            <span class="string">rc</span>                                          <span class="literal">true</span>         <span class="string">ReplicationController</span></span><br><span class="line"><span class="string">resourcequotas</span>                    <span class="string">quota</span>                                       <span class="literal">true</span>         <span class="string">ResourceQuota</span></span><br><span class="line"><span class="string">secrets</span>                                                                       <span class="literal">true</span>         <span class="string">Secret</span></span><br><span class="line"><span class="string">serviceaccounts</span>                   <span class="string">sa</span>                                          <span class="literal">true</span>         <span class="string">ServiceAccount</span></span><br><span class="line"><span class="string">services</span>                          <span class="string">svc</span>                                         <span class="literal">true</span>         <span class="string">Service</span></span><br><span class="line"><span class="string">mutatingwebhookconfigurations</span>                  <span class="string">admissionregistration.k8s.io</span>   <span class="literal">false</span>        <span class="string">MutatingWebhookConfiguration</span></span><br><span class="line"><span class="string">validatingwebhookconfigurations</span>                <span class="string">admissionregistration.k8s.io</span>   <span class="literal">false</span>        <span class="string">ValidatingWebhookConfiguration</span></span><br><span class="line"><span class="string">batchreleases</span>                                  <span class="string">alicloud.com</span>                   <span class="literal">true</span>         <span class="string">BatchRelease</span></span><br><span class="line"><span class="string">customresourcedefinitions</span>         <span class="string">crd,crds</span>     <span class="string">apiextensions.k8s.io</span>           <span class="literal">false</span>        <span class="string">CustomResourceDefinition</span></span><br><span class="line"><span class="string">apiservices</span>                                    <span class="string">apiregistration.k8s.io</span>         <span class="literal">false</span>        <span class="string">APIService</span></span><br><span class="line"><span class="string">controllerrevisions</span>                            <span class="string">apps</span>                           <span class="literal">true</span>         <span class="string">ControllerRevision</span></span><br><span class="line"><span class="string">daemonsets</span>                        <span class="string">ds</span>           <span class="string">apps</span>                           <span class="literal">true</span>         <span class="string">DaemonSet</span></span><br><span class="line"><span class="string">deployments</span>                       <span class="string">deploy</span>       <span class="string">apps</span>                           <span class="literal">true</span>         <span class="string">Deployment</span></span><br><span class="line"><span class="string">replicasets</span>                       <span class="string">rs</span>           <span class="string">apps</span>                           <span class="literal">true</span>         <span class="string">ReplicaSet</span></span><br><span class="line"><span class="string">statefulsets</span>                      <span class="string">sts</span>          <span class="string">apps</span>                           <span class="literal">true</span>         <span class="string">StatefulSet</span></span><br><span class="line"><span class="string">tokenreviews</span>                                   <span class="string">authentication.k8s.io</span>          <span class="literal">false</span>        <span class="string">TokenReview</span></span><br><span class="line"><span class="string">localsubjectaccessreviews</span>                      <span class="string">authorization.k8s.io</span>           <span class="literal">true</span>         <span class="string">LocalSubjectAccessReview</span></span><br><span class="line"><span class="string">selfsubjectaccessreviews</span>                       <span class="string">authorization.k8s.io</span>           <span class="literal">false</span>        <span class="string">SelfSubjectAccessReview</span></span><br><span class="line"><span class="string">selfsubjectrulesreviews</span>                        <span class="string">authorization.k8s.io</span>           <span class="literal">false</span>        <span class="string">SelfSubjectRulesReview</span></span><br><span class="line"><span class="string">subjectaccessreviews</span>                           <span class="string">authorization.k8s.io</span>           <span class="literal">false</span>        <span class="string">SubjectAccessReview</span></span><br><span class="line"><span class="string">horizontalpodautoscalers</span>          <span class="string">hpa</span>          <span class="string">autoscaling</span>                    <span class="literal">true</span>         <span class="string">HorizontalPodAutoscaler</span></span><br><span class="line"><span class="string">cronjobs</span>                          <span class="string">cj</span>           <span class="string">batch</span>                          <span class="literal">true</span>         <span class="string">CronJob</span></span><br><span class="line"><span class="string">jobs</span>                                           <span class="string">batch</span>                          <span class="literal">true</span>         <span class="string">Job</span></span><br><span class="line"><span class="string">certificatesigningrequests</span>        <span class="string">csr</span>          <span class="string">certificates.k8s.io</span>            <span class="literal">false</span>        <span class="string">CertificateSigningRequest</span></span><br><span class="line"><span class="string">leases</span>                                         <span class="string">coordination.k8s.io</span>            <span class="literal">true</span>         <span class="string">Lease</span></span><br><span class="line"><span class="string">events</span>                            <span class="string">ev</span>           <span class="string">events.k8s.io</span>                  <span class="literal">true</span>         <span class="string">Event</span></span><br><span class="line"><span class="string">daemonsets</span>                        <span class="string">ds</span>           <span class="string">extensions</span>                     <span class="literal">true</span>         <span class="string">DaemonSet</span></span><br><span class="line"><span class="string">deployments</span>                       <span class="string">deploy</span>       <span class="string">extensions</span>                     <span class="literal">true</span>         <span class="string">Deployment</span></span><br><span class="line"><span class="string">ingresses</span>                         <span class="string">ing</span>          <span class="string">extensions</span>                     <span class="literal">true</span>         <span class="string">Ingress</span></span><br><span class="line"><span class="string">networkpolicies</span>                   <span class="string">netpol</span>       <span class="string">extensions</span>                     <span class="literal">true</span>         <span class="string">NetworkPolicy</span></span><br><span class="line"><span class="string">podsecuritypolicies</span>               <span class="string">psp</span>          <span class="string">extensions</span>                     <span class="literal">false</span>        <span class="string">PodSecurityPolicy</span></span><br><span class="line"><span class="string">replicasets</span>                       <span class="string">rs</span>           <span class="string">extensions</span>                     <span class="literal">true</span>         <span class="string">ReplicaSet</span></span><br><span class="line"><span class="string">globaljobs</span>                        <span class="string">globaljob</span>    <span class="string">jobs.aliyun.com</span>                <span class="literal">true</span>         <span class="string">GlobalJob</span></span><br><span class="line"><span class="string">nodes</span>                                          <span class="string">metrics.k8s.io</span>                 <span class="literal">false</span>        <span class="string">NodeMetrics</span></span><br><span class="line"><span class="string">pods</span>                                           <span class="string">metrics.k8s.io</span>                 <span class="literal">true</span>         <span class="string">PodMetrics</span></span><br><span class="line"><span class="string">ingresses</span>                         <span class="string">ing</span>          <span class="string">networking.k8s.io</span>              <span class="literal">true</span>         <span class="string">Ingress</span></span><br><span class="line"><span class="string">networkpolicies</span>                   <span class="string">netpol</span>       <span class="string">networking.k8s.io</span>              <span class="literal">true</span>         <span class="string">NetworkPolicy</span></span><br><span class="line"><span class="string">runtimeclasses</span>                                 <span class="string">node.k8s.io</span>                    <span class="literal">false</span>        <span class="string">RuntimeClass</span></span><br><span class="line"><span class="string">poddisruptionbudgets</span>              <span class="string">pdb</span>          <span class="string">policy</span>                         <span class="literal">true</span>         <span class="string">PodDisruptionBudget</span></span><br><span class="line"><span class="string">podsecuritypolicies</span>               <span class="string">psp</span>          <span class="string">policy</span>                         <span class="literal">false</span>        <span class="string">PodSecurityPolicy</span></span><br><span class="line"><span class="string">clusterrolebindings</span>                            <span class="string">rbac.authorization.k8s.io</span>      <span class="literal">false</span>        <span class="string">ClusterRoleBinding</span></span><br><span class="line"><span class="string">clusterroles</span>                                   <span class="string">rbac.authorization.k8s.io</span>      <span class="literal">false</span>        <span class="string">ClusterRole</span></span><br><span class="line"><span class="string">rolebindings</span>                                   <span class="string">rbac.authorization.k8s.io</span>      <span class="literal">true</span>         <span class="string">RoleBinding</span></span><br><span class="line"><span class="string">roles</span>                                          <span class="string">rbac.authorization.k8s.io</span>      <span class="literal">true</span>         <span class="string">Role</span></span><br><span class="line"><span class="string">priorityclasses</span>                   <span class="string">pc</span>           <span class="string">scheduling.k8s.io</span>              <span class="literal">false</span>        <span class="string">PriorityClass</span></span><br><span class="line"><span class="string">csidrivers</span>                                     <span class="string">storage.k8s.io</span>                 <span class="literal">false</span>        <span class="string">CSIDriver</span></span><br><span class="line"><span class="string">csinodes</span>                                       <span class="string">storage.k8s.io</span>                 <span class="literal">false</span>        <span class="string">CSINode</span></span><br><span class="line"><span class="string">storageclasses</span>                    <span class="string">sc</span>           <span class="string">storage.k8s.io</span>                 <span class="literal">false</span>        <span class="string">StorageClass</span></span><br><span class="line"><span class="string">volumeattachments</span>                              <span class="string">storage.k8s.io</span>                 <span class="literal">false</span>        <span class="string">VolumeAttachment</span></span><br></pre></td></tr></table></figure><h2 id="查看资源"><a href="#查看资源" class="headerlink" title="查看资源"></a>查看资源</h2><p>1、查看集群的所有资源</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl <span class="keyword">get</span> <span class="keyword">all</span></span><br><span class="line">kubectl <span class="keyword">get</span> <span class="keyword">all</span> -o wide</span><br></pre></td></tr></table></figure><p>2、查看deployment</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看deployment</span></span><br><span class="line">kubectl <span class="builtin-name">get</span> deploy</span><br><span class="line">kubectl <span class="builtin-name">get</span> deploy -n ratel -o wide</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看deployment实时变化</span></span><br><span class="line">kubectl <span class="builtin-name">get</span> deploy --watch</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看指定deployment</span></span><br><span class="line">kubectl <span class="builtin-name">get</span> deploy/deployment-name</span><br><span class="line">kubectl <span class="builtin-name">get</span> deploy deployment-name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定namespace</span></span><br><span class="line">kubectl <span class="builtin-name">get</span> deploy -n voidking</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据label选择deployment</span></span><br><span class="line">kubectl <span class="builtin-name">get</span> deploy <span class="attribute">--selector</span>=<span class="string">"name=nginx,type=frontend"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看deployment详细信息</span></span><br><span class="line">kubectl describe deploy</span><br></pre></td></tr></table></figure><p>pod、service、node的查看方法和deployment相同。</p><h2 id="导出yaml或json文件"><a href="#导出yaml或json文件" class="headerlink" title="导出yaml或json文件"></a>导出yaml或json文件</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 导出deployment的yaml文件</span><br><span class="line">kubectl <span class="keyword">get</span> deploy -o yaml &gt; deploy.yaml</span><br><span class="line"></span><br><span class="line"># 导出deployment的<span class="type">json</span>文件</span><br><span class="line">kubectl <span class="keyword">get</span> deploy -o <span class="type">json</span> &gt; deploy.json</span><br><span class="line"></span><br><span class="line"># 导出指定deployment的yaml文件</span><br><span class="line">kubectl <span class="keyword">get</span> deploy/deployment-<span class="type">name</span> -o yaml &gt; deploy-<span class="type">name</span>.yaml</span><br><span class="line"></span><br><span class="line"># 导出指定deployment的<span class="type">json</span>文件</span><br><span class="line">kubectl <span class="keyword">get</span> deploy/deployment-<span class="type">name</span> -o <span class="type">json</span> &gt; deploy-<span class="type">name</span>.json</span><br></pre></td></tr></table></figure><p>pod、service、node的yaml/json文件的导出方法和deployment相同。</p><h2 id="node封锁"><a href="#node封锁" class="headerlink" title="node封锁"></a>node封锁</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 封锁node，不允许分配pod</span></span><br><span class="line"><span class="attr">kubectl</span> <span class="string">cordon nodename</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 从指定node驱除pod</span></span><br><span class="line"><span class="attr">kubectl</span> <span class="string">drain nodename --ignore-daemonsets</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解除node的封锁，允许分配pod</span></span><br><span class="line"><span class="attr">kubectl</span> <span class="string">uncordon nodename</span></span><br></pre></td></tr></table></figure><h2 id="事件相关"><a href="#事件相关" class="headerlink" title="事件相关"></a>事件相关</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看集群事件</span></span><br><span class="line">kubectl <span class="builtin-name">get</span> ev</span><br></pre></td></tr></table></figure><h2 id="故障排查"><a href="#故障排查" class="headerlink" title="故障排查"></a>故障排查</h2><p>故障排查的第一步是先给问题分下类。这个问题是什么？Pods，Replication Controller或者Service？<br>1、Pods排查</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 查看pod详细信息</span><br><span class="line">kubectl <span class="keyword">describe</span> pods <span class="variable">$&#123;POD_NAME&#125;</span></span><br><span class="line"></span><br><span class="line"># 查看容器日志</span><br><span class="line">kubectl logs <span class="variable">$&#123;POD_NAME&#125;</span> <span class="variable">$&#123;CONTAINER_NAME&#125;</span></span><br><span class="line"></span><br><span class="line"># 查看crashed容器日志</span><br><span class="line">kubectl logs --previous <span class="variable">$&#123;POD_NAME&#125;</span> <span class="variable">$&#123;CONTAINER_NAME&#125;</span></span><br><span class="line"></span><br><span class="line"># 查看运行的容器内部日志</span><br><span class="line">kubectl exec <span class="variable">$&#123;POD_NAME&#125;</span> -c <span class="variable">$&#123;CONTAINER_NAME&#125;</span> -- <span class="keyword">cat</span> /<span class="keyword">var</span>/<span class="keyword">log</span>/cassandra/system.<span class="keyword">log</span></span><br><span class="line"></span><br><span class="line"># 查看运行的容器内部日志（pod只有一个容器）</span><br><span class="line"># kubectl exec <span class="variable">$&#123;POD_NAME&#125;</span> -- <span class="keyword">cat</span> /<span class="keyword">var</span>/<span class="keyword">log</span>/cassandra/system.<span class="keyword">log</span></span><br></pre></td></tr></table></figure><p>2、Replication Controllers排查</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 监控rc相关事件</span></span><br><span class="line"><span class="attribute">kubectl</span> describe rc <span class="variable">$&#123;CONTROLLER_NAME&#125;</span></span><br></pre></td></tr></table></figure><p>3、Services排查</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看endpoints资源，service选择到了哪些pod和端口</span></span><br><span class="line">kubectl <span class="builtin-name">get</span> endpoints <span class="variable">$&#123;SERVICE_NAME&#125;</span></span><br></pre></td></tr></table></figure><p>更多内容参考<a href="https://kubernetes.io/zh/docs/tasks/debug-application-cluster/debug-application/" target="_blank" rel="noopener">应用故障排查</a>。</p><h2 id="自动生成yaml"><a href="#自动生成yaml" class="headerlink" title="自动生成yaml"></a>自动生成yaml</h2><h3 id="pod-yaml"><a href="#pod-yaml" class="headerlink" title="pod yaml"></a>pod yaml</h3><p>生成pod的yaml文件模板：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl <span class="builtin-name">run</span> vk-pod <span class="attribute">--image</span>=nginx <span class="attribute">--generator</span>=run-pod/v1 --dry-<span class="builtin-name">run</span> -o yaml</span><br></pre></td></tr></table></figure><p>生成内容为：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">creationTimestamp:</span> <span class="literal">null</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">run:</span> <span class="string">vk-pod</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">vk-pod</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">vk-pod</span></span><br><span class="line">    <span class="attr">resources:</span> <span class="string">&#123;&#125;</span></span><br><span class="line">  <span class="attr">dnsPolicy:</span> <span class="string">ClusterFirst</span></span><br><span class="line">  <span class="attr">restartPolicy:</span> <span class="string">Always</span></span><br><span class="line"><span class="attr">status:</span> <span class="string">&#123;&#125;</span></span><br></pre></td></tr></table></figure><p>更多内容，参考<a href="http://docs.kubernetes.org.cn/468.html" target="_blank" rel="noopener">Kubernetes kubectl run 命令详解</a>。</p><h3 id="deployment-yaml"><a href="#deployment-yaml" class="headerlink" title="deployment yaml"></a>deployment yaml</h3><p>1、生成deployment的yaml文件模板（历史方法）：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl <span class="builtin-name">run</span> vk-deploy <span class="attribute">--image</span>=nginx --dry-<span class="builtin-name">run</span> -o yaml</span><br></pre></td></tr></table></figure><p>会出现提示：<br>kubectl run –generator=deployment/apps.v1 is DEPRECATED and will be removed in a future version. Use kubectl run –generator=run-pod/v1 or kubectl create instead.<br>因为官方不推荐使用 run-pod/v1 以外的其他生成器，其他生成器不久后就会弃用。更多内容参考<a href="https://kubernetes.io/zh/docs/reference/kubectl/conventions/#kubectl-run" target="_blank" rel="noopener">kubectl run</a>。</p><p>2、从已有K8S集群中已有资源中导出yaml模板文件（历史方法）：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl <span class="builtin-name">get</span> deploy/deployment-name -o yaml --<span class="builtin-name">export</span> &gt; deploy-name.yaml</span><br></pre></td></tr></table></figure><p>也会出现提示：<br>Flag –export has been deprecated, This flag is deprecated and will be removed in future.<br>很尴尬，–export 也要弃用了，且用且珍惜吧。</p><p>3、生成deployment的yaml文件模板（推荐方法）：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl create deployment vk-deploy <span class="attribute">--image</span>=nginx --dry-<span class="builtin-name">run</span> -o yaml</span><br></pre></td></tr></table></figure><p>生成内容为：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">creationTimestamp:</span> <span class="literal">null</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">vk-deploy</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">vk-deploy</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">vk-deploy</span></span><br><span class="line">  <span class="attr">strategy:</span> <span class="string">&#123;&#125;</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">creationTimestamp:</span> <span class="literal">null</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">vk-deploy</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">resources:</span> <span class="string">&#123;&#125;</span></span><br><span class="line"><span class="attr">status:</span> <span class="string">&#123;&#125;</span></span><br></pre></td></tr></table></figure><p>更多内容，参考<a href="http://docs.kubernetes.org.cn/535.html" target="_blank" rel="noopener">Kubernetes kubectl create deployment 命令详解</a>。</p><h3 id="service-yaml"><a href="#service-yaml" class="headerlink" title="service yaml"></a>service yaml</h3><p>生成service的yaml文件模板（推荐方法）：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl create<span class="built_in"> service </span>clusterip vk-svc <span class="attribute">--tcp</span>=<span class="string">"5678:8080"</span> --dry-<span class="builtin-name">run</span> -o yaml</span><br></pre></td></tr></table></figure><p>生成内容为：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">creationTimestamp:</span> <span class="literal">null</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">vk-svc</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">vk-svc</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="number">5678</span><span class="number">-8080</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5678</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="number">8080</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">vk-svc</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">ClusterIP</span></span><br><span class="line"><span class="attr">status:</span></span><br><span class="line">  <span class="attr">loadBalancer:</span> <span class="string">&#123;&#125;</span></span><br></pre></td></tr></table></figure><p>更多内容，参考<a href="http://docs.kubernetes.org.cn/564.html" target="_blank" rel="noopener">Kubernetes kubectl create service 命令详解</a>和<a href="https://kubernetes.io/docs/concepts/services-networking/service/" target="_blank" rel="noopener">Service</a>。</p><h2 id="编辑yaml"><a href="#编辑yaml" class="headerlink" title="编辑yaml"></a>编辑yaml</h2><p>生成了模板，很多字段依然不记得怎么办？比如要添加节点亲和性，那么可以查看相关解释：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">kubectl</span> <span class="selector-tag">explain</span> <span class="selector-tag">deployment</span><span class="selector-class">.spec</span><span class="selector-class">.template</span><span class="selector-class">.spec</span><span class="selector-class">.affinity</span></span><br><span class="line"><span class="selector-tag">kubectl</span> <span class="selector-tag">explain</span> <span class="selector-tag">deployment</span><span class="selector-class">.spec</span><span class="selector-class">.template</span><span class="selector-class">.spec</span><span class="selector-class">.affinity</span><span class="selector-class">.nodeAffinity</span></span><br><span class="line">...</span><br><span class="line"><span class="selector-tag">kubectl</span> <span class="selector-tag">explain</span> <span class="selector-tag">deployment</span><span class="selector-class">.spec</span><span class="selector-class">.template</span><span class="selector-class">.spec</span><span class="selector-class">.affinity</span><span class="selector-class">.nodeAffinity</span><span class="selector-class">.requiredDuringSchedulingIgnoredDuringExecution</span><span class="selector-class">.nodeSelectorTerms</span><span class="selector-class">.matchExpressions</span></span><br></pre></td></tr></table></figure><p>然后，根据层级关系和解释编辑yaml文件模板。</p><h2 id="yaml验证"><a href="#yaml验证" class="headerlink" title="yaml验证"></a>yaml验证</h2><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl <span class="built_in">create</span> <span class="comment">--validate -f deployment.yaml</span></span><br></pre></td></tr></table></figure><h2 id="徒手写yaml"><a href="#徒手写yaml" class="headerlink" title="徒手写yaml"></a>徒手写yaml</h2><p>首先把yaml文件分成四部分，typeMeta、objectMeta、spec和status，其中status部分可以不写。<br>typeMeta包括apiVersion和kind；<br>metadata必填name、namespace、labels；<br>pod.spec主要填containers的name和image，deployment.spec主要填replicas、selector的matchLabels、template，service.spec主要填selector、ports和type。</p><h2 id="拷贝文件"><a href="#拷贝文件" class="headerlink" title="拷贝文件"></a>拷贝文件</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拷贝pod内容到宿主机</span></span><br><span class="line"><span class="attribute">kubectl</span> cp podname-564949c96c-m986n:/path/filename .</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/docker/" rel="tag"># docker</a> <a href="/tags/k8s/" rel="tag"># k8s</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-k8s-start/" rel="prev" title="K8S入门篇"><i class="fa fa-chevron-left"></i> K8S入门篇</a></div><div class="post-nav-item"> <a href="/dev-k8s-client-go/" rel="next" title="使用client-go操作K8S">使用client-go操作K8S<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zODU3Mi8xNTEwMA=="></div></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#kubectl简介"><span class="nav-number">1.</span> <span class="nav-text">kubectl简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#常用命令"><span class="nav-number">2.</span> <span class="nav-text">常用命令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#指定配置文件"><span class="nav-number">2.1.</span> <span class="nav-text">指定配置文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#命令自动补全"><span class="nav-number">2.2.</span> <span class="nav-text">命令自动补全</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看资源缩写"><span class="nav-number">2.3.</span> <span class="nav-text">查看资源缩写</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看资源"><span class="nav-number">2.4.</span> <span class="nav-text">查看资源</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#导出yaml或json文件"><span class="nav-number">2.5.</span> <span class="nav-text">导出yaml或json文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#node封锁"><span class="nav-number">2.6.</span> <span class="nav-text">node封锁</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#事件相关"><span class="nav-number">2.7.</span> <span class="nav-text">事件相关</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#故障排查"><span class="nav-number">2.8.</span> <span class="nav-text">故障排查</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自动生成yaml"><span class="nav-number">2.9.</span> <span class="nav-text">自动生成yaml</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#pod-yaml"><span class="nav-number">2.9.1.</span> <span class="nav-text">pod yaml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#deployment-yaml"><span class="nav-number">2.9.2.</span> <span class="nav-text">deployment yaml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#service-yaml"><span class="nav-number">2.9.3.</span> <span class="nav-text">service yaml</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编辑yaml"><span class="nav-number">2.10.</span> <span class="nav-text">编辑yaml</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#yaml验证"><span class="nav-number">2.11.</span> <span class="nav-text">yaml验证</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#徒手写yaml"><span class="nav-number">2.12.</span> <span class="nav-text">徒手写yaml</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#拷贝文件"><span class="nav-number">2.13.</span> <span class="nav-text">拷贝文件</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="VoidKing" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">VoidKing</p><div class="site-description" itemprop="description">学而不思则罔，思而不学则殆！</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">584</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">40</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">189</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://twitter.com/voidking_com" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;voidking_com" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i> Twitter</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">VoidKing</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://www.beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer><div id="needsharebutton-float"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css"><script src="/lib/needsharebutton/needsharebutton.js"></script><script>pbOptions={iconStyle:"box",boxForm:"horizontal",position:"bottomCenter",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-postbottom",pbOptions),flOptions={iconStyle:"box",boxForm:"horizontal",position:"topRight",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-float",flOptions)</script><script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  // window.livereOptions = {
  //   refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  // };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script></body></html>