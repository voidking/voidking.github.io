<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//qiniu.cdn.voidking.com/doc/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="需求描述Linux主机中原本有一块数据盘 &#x2F;dev&#x2F;sdb，挂载到了 &#x2F;data 目录，存储了大量数据。现在新增了一块数据盘 &#x2F;dev&#x2F;sdc，想要把sdb的数据完全拷贝到sdc，然后用sdb替换sdc，这个需求该怎样处理？"><meta property="og:type" content="article"><meta property="og:title" content="好好学Linux：Linux中拷贝硬盘"><meta property="og:url" content="https://www.voidking.com/dev-linux-copy-disk/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="需求描述Linux主机中原本有一块数据盘 &#x2F;dev&#x2F;sdb，挂载到了 &#x2F;data 目录，存储了大量数据。现在新增了一块数据盘 &#x2F;dev&#x2F;sdc，想要把sdb的数据完全拷贝到sdc，然后用sdb替换sdc，这个需求该怎样处理？"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2024-03-23T08:00:00.000Z"><meta property="article:modified_time" content="2024-03-23T08:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="linux"><meta property="article:tag" content="好好学Linux"><meta property="article:tag" content="问题排查"><meta property="article:tag" content="shell"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-linux-copy-disk/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>好好学Linux：Linux中拷贝硬盘 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">一个计算机技术爱好者与学习者</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-linux-copy-disk/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="一个计算机技术爱好者与学习者"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> 好好学Linux：Linux中拷贝硬盘</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2024-03-23 08:00:00" itemprop="dateCreated datePublished" datetime="2024-03-23T08:00:00+00:00">2024-03-23</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/devops/" itemprop="url" rel="index"><span itemprop="name">devops</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/troubleshooting/" itemprop="url" rel="index"><span itemprop="name">troubleshooting</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/storage/" itemprop="url" rel="index"><span itemprop="name">storage</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="需求描述"><span class="post-title-index">1.</span><a href="#需求描述" class="headerlink" title="需求描述"></a> 需求描述</h1><p>Linux主机中原本有一块数据盘 /dev/sdb，挂载到了 /data 目录，存储了大量数据。<br>现在新增了一块数据盘 /dev/sdc，想要把sdb的数据完全拷贝到sdc，然后用sdb替换sdc，这个需求该怎样处理？</p><span id="more"></span><h1 id="实现思路"><span class="post-title-index">2.</span><a href="#实现思路" class="headerlink" title="实现思路"></a> 实现思路</h1><p>1、把sdb的数据拷贝到sdc<br>2、检查sdc数据<br>3、修改挂载配置，sdc替换sdb，重启主机</p><h1 id="拷贝硬盘全部数据"><span class="post-title-index">3.</span><a href="#拷贝硬盘全部数据" class="headerlink" title="拷贝硬盘全部数据"></a> 拷贝硬盘全部数据</h1><h2 id="拷贝硬盘全部数据概述"><span class="post-title-index">3.1.</span><a href="#拷贝硬盘全部数据概述" class="headerlink" title="拷贝硬盘全部数据概述"></a> 拷贝硬盘全部数据概述</h2><p>拷贝硬盘全部数据，有三种方法：</p><ul><li>使用cp命令。不推荐，因为cp不能断点续传，所以拷贝大量文件时如果出错会浪费时间重传。</li><li>使用rsync命令。备选，支持断点续传，但是如果存在大量小文件时拷贝速度会很慢。</li><li>使用dd命令。首选，拷贝整个磁盘的数据，速度非常快且数据完整。</li></ul><p>因此，这里选择使用dd命令来拷贝磁盘数据。</p><h2 id="dd命令拷贝数据"><span class="post-title-index">3.2.</span><a href="#dd命令拷贝数据" class="headerlink" title="dd命令拷贝数据"></a> dd命令拷贝数据</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/sdb of=/dev/sdc bs=64K conv=noerror,<span class="built_in">sync</span></span><br></pre></td></tr></table></figure><p>参数说明：</p><ul><li>if：input file，输入文件，这里就是要复制的源盘/dev/sdb。</li><li>of：output file，输出文件，这里就是要复制的目标盘/dev/sdc。</li><li>bs：block size，块大小，这里我们设置为64K。</li><li>conv：convert，转换选项，这里我们设置为noerror（读写出错不停止）和sync（输入输出不足块大小时，会用空字符补足）。</li></ul><p>dd命令默认的块大小是512字节，这意味着默认情况下，dd命令每次读取和写入的数据大小是512字节。如果我们的磁盘支持更大的块大小，那么增加块大小可以帮助提高数据复制的速度。在这个例子中，我们设定块大小为64K，这意味着dd命令每次读取和写入的数据大小是64K字节。</p><p>注意：在执行这个命令之前，确保/dev/sdc 没有被挂载并且没有其他程序正在使用。此外，这个操作可能会需要一些时间，需要耐心等待。</p><h2 id="查看dd进度"><span class="post-title-index">3.3.</span><a href="#查看dd进度" class="headerlink" title="查看dd进度"></a> 查看dd进度</h2><p>dd命令在复制数据完成后会自动结束。有时候，dd命令可能会运行非常长的时间，此时可以通过向dd命令发送SIGUSR1信号来查看它当前的进度。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -USR1 $(pgrep ^<span class="built_in">dd</span>)</span><br></pre></td></tr></table></figure><p>这条命令会找到dd命令的进程ID并向其发送SIGUSR1信号，这将导致dd命令打印出其当前的复制进度。</p><p>输出内容类似于：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">6525616+0 records in</span><br><span class="line">6525616+0 records out</span><br><span class="line">427662770176 bytes (428 GB) copied, 3034.84 s, 141 MB/s</span><br></pre></td></tr></table></figure><p>这个输出中，6525616 指的是已经复制的块数量，块大小为64K（默认512），<code>6525616*64*1024 = 427662770176</code></p><h2 id="dd断点续传"><span class="post-title-index">3.4.</span><a href="#dd断点续传" class="headerlink" title="dd断点续传"></a> dd断点续传</h2><p>dd命令本身并不支持断点续传。如果执行 dd 命令过程中出现了中断，那么重新执行dd命令会从头开始复制，比较浪费时间。<br>但是，我们可以使用一些参数来模拟断点续传的功能。<br>skip 参数可以让 dd 在复制数据前跳过源文件/设备的一定数量的块，seek 参数可以让 dd 在开始写入数据前跳过目标文件/设备的一定数量的块。</p><p>假设我们确认已知的dd进度为：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">6525616+0 records in</span><br><span class="line">6525616+0 records out</span><br><span class="line">427662770176 bytes (428 GB) copied, 3034.84 s, 141 MB/s</span><br></pre></td></tr></table></figure><p>那么，断点续传可以使用如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/sdb of=/dev/sdc bs=64K skip=6525616 seek=6525616 conv=noerror,<span class="built_in">sync</span></span><br></pre></td></tr></table></figure><h2 id="修改UUID"><span class="post-title-index">3.5.</span><a href="#修改UUID" class="headerlink" title="修改UUID"></a> 修改UUID</h2><p>使用dd拷贝一个设备到另一个设备，那么设备的UUID也被同时复制过去。这将导致两个设备拥有相同的UUID，这样在一些情况下可能会引发问题，比如在/boot/grub/grub.cfg文件或者/etc/fstab里面用UUID来标识设备。</p><p>要修改一个文件系统的UUID，需要使用对应文件系统的工具。</p><p>查看UUID命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blkid /dev/sdc</span><br></pre></td></tr></table></figure><p>对于ext2，ext3，ext4文件系统，可以使用tune2fs命令，例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tune2fs -U random /dev/sdc</span><br></pre></td></tr></table></figure><p>对于xfs文件系统，可以使用xfs_admin命令，例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xfs_admin -U generate /dev/sdc</span><br></pre></td></tr></table></figure><p>对于btrfs文件系统，可以使用btrfstune命令，例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">btrfstune -f -u /dev/sdc</span><br></pre></td></tr></table></figure><p>注意：上述所有命令在执行之前，需要先确保该设备已经被卸载。</p><h2 id="修改UUID报错问题"><span class="post-title-index">3.6.</span><a href="#修改UUID报错问题" class="headerlink" title="修改UUID报错问题"></a> 修改UUID报错问题</h2><p>1、执行修改UUID的命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xfs_admin -U generate /dev/sdc</span><br></pre></td></tr></table></figure><p>报错：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ERROR: The filesystem has valuable metadata changes in a log which needs to</span><br><span class="line">be replayed.  Mount the filesystem to replay the log, and unmount it before</span><br><span class="line">re-running xfs_admin.  If you are unable to mount the filesystem, then use</span><br><span class="line">the xfs_repair -L option to destroy the log and attempt a repair.</span><br><span class="line">Note that destroying the log may cause corruption -- please attempt a mount</span><br><span class="line">of the filesystem before doing this.</span><br></pre></td></tr></table></figure><p>2、根据报错提示挂载磁盘，然后卸载磁盘。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /sdc</span><br><span class="line">mount /dev/sdc /sdc</span><br></pre></td></tr></table></figure><p>报错：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mount: wrong fs type, bad option, bad superblock on /dev/sdc,</span><br><span class="line">       missing codepage or helper program, or other error</span><br><span class="line"></span><br><span class="line">       In some cases useful info is found in syslog - try</span><br><span class="line">       dmesg | tail or so.</span><br></pre></td></tr></table></figure><p>3、尝试修复磁盘问题</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xfs_repair -L /dev/sdc</span><br></pre></td></tr></table></figure><p>输出：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Phase 1 - find and verify superblock...</span><br><span class="line">Phase 2 - using internal log</span><br><span class="line">        - zero log...</span><br><span class="line">...</span><br><span class="line">Phase 7 - verify and correct link counts...</span><br><span class="line">Maximum metadata LSN (12:673358) is ahead of log (1:2).</span><br><span class="line">Format log to cycle 15.</span><br><span class="line">done</span><br></pre></td></tr></table></figure><p>4、再次尝试修改UUID</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xfs_admin -U generate /dev/sdc</span><br></pre></td></tr></table></figure><p>输出：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Clearing log and setting UUID</span><br><span class="line">writing all SBs</span><br><span class="line">new UUID = 25b43fed-781f-419e-b5a9-273042c7f1e1</span><br></pre></td></tr></table></figure><p>5、尝试挂载和卸载</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/sdc /sdc</span><br><span class="line"><span class="built_in">ls</span> -l /sdc</span><br><span class="line">umount /sdc</span><br></pre></td></tr></table></figure><h1 id="检查sdc数据（可选）"><span class="post-title-index">4.</span><a href="#检查sdc数据（可选）" class="headerlink" title="检查sdc数据（可选）"></a> 检查sdc数据（可选）</h1><p>1、挂载 sdc</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /sdc</span><br><span class="line">mount /dev/sdc /sdc</span><br></pre></td></tr></table></figure><p>2、比较数据</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -P -avz /data/ /sdc</span><br></pre></td></tr></table></figure><h1 id="修改挂载配置"><span class="post-title-index">5.</span><a href="#修改挂载配置" class="headerlink" title="修改挂载配置"></a> 修改挂载配置</h1><p>1、查看 sdc UUID</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blkid /dev/sdc</span><br></pre></td></tr></table></figure><p>2、修改 /etc/fstab 配置</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UUID=xxx /data xfs  defaults 0 0</span><br></pre></td></tr></table></figure><p>其中 xxx 修改为 sdc 的 UUID</p><p>3、重启主机</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>原文链接：</strong> <a href="https://www.voidking.com/dev-linux-copy-disk/" title="好好学Linux：Linux中拷贝硬盘">https://www.voidking.com/dev-linux-copy-disk/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本文采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议，转载请注明出处！源站会即时更新知识点并修正错误，欢迎访问~</li><li> <img width="200" height="200" src="/images/avatar.jpg"><p style="text-align:center;margin-bottom:0">微信公众号同步更新，欢迎关注~</p></li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/linux/" rel="tag"># linux</a> <a href="/tags/%E5%A5%BD%E5%A5%BD%E5%AD%A6Linux/" rel="tag"># 好好学Linux</a> <a href="/tags/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/" rel="tag"># 问题排查</a> <a href="/tags/shell/" rel="tag"># shell</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-docker-container-blkio-limit/" rel="prev" title="好好学Docker：Docker容器磁盘IO限速"><i class="fa fa-chevron-left"></i> 好好学Docker：Docker容器磁盘IO限速</a></div><div class="post-nav-item"> <a href="/dev-kubectl-enhancements-and-alternatives/" rel="next" title="好好学K8S：kubectl增强工具和替代工具">好好学K8S：kubectl增强工具和替代工具<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"><ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-3284447971731414" data-ad-slot="9697986181"></ins><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3284447971731414" crossorigin="anonymous"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%9C%80%E6%B1%82%E6%8F%8F%E8%BF%B0"><span class="nav-text">1. 需求描述</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"><span class="nav-text">2. 实现思路</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8B%B7%E8%B4%9D%E7%A1%AC%E7%9B%98%E5%85%A8%E9%83%A8%E6%95%B0%E6%8D%AE"><span class="nav-text">3. 拷贝硬盘全部数据</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8B%B7%E8%B4%9D%E7%A1%AC%E7%9B%98%E5%85%A8%E9%83%A8%E6%95%B0%E6%8D%AE%E6%A6%82%E8%BF%B0"><span class="nav-text">3.1. 拷贝硬盘全部数据概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dd%E5%91%BD%E4%BB%A4%E6%8B%B7%E8%B4%9D%E6%95%B0%E6%8D%AE"><span class="nav-text">3.2. dd命令拷贝数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8Bdd%E8%BF%9B%E5%BA%A6"><span class="nav-text">3.3. 查看dd进度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dd%E6%96%AD%E7%82%B9%E7%BB%AD%E4%BC%A0"><span class="nav-text">3.4. dd断点续传</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9UUID"><span class="nav-text">3.5. 修改UUID</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9UUID%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98"><span class="nav-text">3.6. 修改UUID报错问题</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A3%80%E6%9F%A5sdc%E6%95%B0%E6%8D%AE%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89"><span class="nav-text">4. 检查sdc数据（可选）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E6%8C%82%E8%BD%BD%E9%85%8D%E7%BD%AE"><span class="nav-text">5. 修改挂载配置</span></a></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">一个计算机技术爱好者与学习者</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">728</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">31</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">254</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2024</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '5a238b8c32b1e4dd2156',
      clientSecret: 'bfb5d518626f6fdc7da0351d1e0cd37ab75c6361',
      repo: 'gitalk-comments',
      owner: 'voidking',
      admin: ['voidking'],
      id: '217d7185d0e74b312edfcf81e25b8e95',
      title: '好好学Linux：Linux中拷贝硬盘',
      body: '欢迎留言，互相交流学习~',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></body></html>