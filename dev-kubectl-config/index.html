<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//cdn.voidking.com/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="kubectl简介 Kubectl is a command line interface for running commands against Kubernetes clusters.   没错，kubectl是一个命令行工具，用来控制K8S集群。kubectl该怎么读？可以参考HowToPronounce-kubectl，郝同学喜欢读作kubecontrol。 kubectl命令格式为："><meta property="og:type" content="article"><meta property="og:title" content="kubectl命令——配置篇"><meta property="og:url" content="https://www.voidking.com/dev-kubectl-config/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="kubectl简介 Kubectl is a command line interface for running commands against Kubernetes clusters.   没错，kubectl是一个命令行工具，用来控制K8S集群。kubectl该怎么读？可以参考HowToPronounce-kubectl，郝同学喜欢读作kubecontrol。 kubectl命令格式为："><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2019-09-15T12:00:00.000Z"><meta property="article:modified_time" content="2022-11-14T19:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="k8s"><meta property="article:tag" content="shell"><meta property="article:tag" content="kubectl"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-kubectl-config/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>kubectl命令——配置篇 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">好好学习，天天向上！</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-kubectl-config/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="学而不思则罔，思而不学则殆！"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> kubectl命令——配置篇</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-09-15 12:00:00" itemprop="dateCreated datePublished" datetime="2019-09-15T12:00:00+00:00">2019-09-15</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-11-14 19:00:00" itemprop="dateModified" datetime="2022-11-14T19:00:00+00:00">2022-11-14</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/k8s/" itemprop="url" rel="index"><span itemprop="name">k8s</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/cloudnative/" itemprop="url" rel="index"><span itemprop="name">cloudnative</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/shell/" itemprop="url" rel="index"><span itemprop="name">shell</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="kubectl简介"><a href="#kubectl简介" class="headerlink" title="kubectl简介"></a>kubectl简介</h1><blockquote><p>Kubectl is a command line interface for running commands against Kubernetes clusters.</p></blockquote><p>没错，kubectl是一个命令行工具，用来控制K8S集群。kubectl该怎么读？可以参考<a target="_blank" rel="noopener" href="http://www.howtopronounce.cc/kubectl">HowToPronounce-kubectl</a>，郝同学喜欢读作kubecontrol。</p><p>kubectl命令格式为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl [<span class="built_in">command</span>] [TYPE] [NAME] [flags]</span><br></pre></td></tr></table></figure><p>更多内容，参考：</p><ul><li><a target="_blank" rel="noopener" href="https://kubernetes.io/docs/reference/kubectl/overview/">Overview of kubectl</a></li><li><a target="_blank" rel="noopener" href="https://kubernetes.io/docs/reference/kubectl/cheatsheet/">kubectl Cheat Sheet</a></li><li><a target="_blank" rel="noopener" href="https://kubectl.docs.kubernetes.io/">The Kubectl Book</a></li><li><a target="_blank" rel="noopener" href="http://docs.kubernetes.org.cn/683.html">Kubernetes kubectl 命令表</a></li></ul><p><a href="https://www.voidking.com/dev-k8s-start/">《K8S入门篇》</a>一文中，已经学习了kubectl的安装方法，并且使用了一些简单命令。本文学习kubectl的配置方法和配置技巧。</p><span id="more"></span><h1 id="安装kubectl"><a href="#安装kubectl" class="headerlink" title="安装kubectl"></a>安装kubectl</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -LO https://dl.k8s.io/release/v1.22.15/bin/linux/amd64/kubectl</span><br><span class="line"><span class="built_in">chmod</span> a+x kubectl</span><br><span class="line"><span class="built_in">mv</span> kubectl /usr/local/bin/</span><br><span class="line"><span class="built_in">ln</span> -s /usr/local/bin/kubectl /usr/bin/kubectl</span><br><span class="line">kubectl -h</span><br></pre></td></tr></table></figure><h1 id="获取kubeconfig"><a href="#获取kubeconfig" class="headerlink" title="获取kubeconfig"></a>获取kubeconfig</h1><p>要想正常使用kubectl命令，首先要拿到用户认证配置信息（kubeconfig）。</p><p>kubeconfig获取方式：</p><ul><li>使用kubeadm安装的K8S集群，默认的kubeconfig配置文件路径为 <code>/etc/kubernetes/admin.conf</code></li><li>使用minikube安装的K8S集群，默认的kubeconfig配置文件路径为 <code>$&#123;HOME&#125;/.kube/config</code></li><li>用户默认使用的kubeconfig配置文件路径为 <code>$&#123;HOME&#125;/.kube/config</code></li><li>阿里云/腾讯云等云平台提供的K8S集群，从集群管理页面上获取kubeconfig配置，保存为 <code>$&#123;HOME&#125;/.kube/config</code> 即可</li></ul><h1 id="指定配置文件"><a href="#指定配置文件" class="headerlink" title="指定配置文件"></a>指定配置文件</h1><p>如果有多个集群的多个kubeconfig配置文件，那么我们可能需要指定一个配置文件。</p><h2 id="指定默认配置文件"><a href="#指定默认配置文件" class="headerlink" title="指定默认配置文件"></a>指定默认配置文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> KUBECONFIG=~/.kube/config</span><br></pre></td></tr></table></figure><h2 id="查看kubeconfig配置内容"><a href="#查看kubeconfig配置内容" class="headerlink" title="查看kubeconfig配置内容"></a>查看kubeconfig配置内容</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl config view</span><br></pre></td></tr></table></figure><h2 id="指定配置文件和context"><a href="#指定配置文件和context" class="headerlink" title="指定配置文件和context"></a>指定配置文件和context</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl config --kubeconfig=/root/vk-kube-config use-context voidking@kubenertes</span><br></pre></td></tr></table></figure><h2 id="指定单次命令的配置文件"><a href="#指定单次命令的配置文件" class="headerlink" title="指定单次命令的配置文件"></a>指定单次命令的配置文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get deployments --kubeconfig=/root/.kube/config</span><br></pre></td></tr></table></figure><h1 id="指定默认的namespace"><a href="#指定默认的namespace" class="headerlink" title="指定默认的namespace"></a>指定默认的namespace</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl config get-contexts</span><br><span class="line">kubectl config set-context --current --namespace=voidking</span><br><span class="line">kubectl config set-context $(kubectl config current-context) --namespace=voidking</span><br></pre></td></tr></table></figure><h1 id="配置整合"><a href="#配置整合" class="headerlink" title="配置整合"></a>配置整合</h1><h2 id="同时使用多个配置"><a href="#同时使用多个配置" class="headerlink" title="同时使用多个配置"></a>同时使用多个配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> KUBECONFIG=~/.kube/config:~/Download/new-config</span><br></pre></td></tr></table></figure><p>要保证多个config的cluster name、user name、context name不同，否则无法区分它们，会造成配置混乱。<br>如果多个config的cluster name、user name、context name相同，可以自行修改一下，改成不同的name，修改name不会影响对集群的操作。</p><h2 id="多个配置整合成一个配置"><a href="#多个配置整合成一个配置" class="headerlink" title="多个配置整合成一个配置"></a>多个配置整合成一个配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">KUBECONFIG=~/.kube/config:~/Downloads/new-config kubectl config view --merge --flatten &gt; ~/.kube/newconfig</span><br><span class="line"><span class="built_in">export</span> KUBECONFIG=~/.kube/newconfig</span><br></pre></td></tr></table></figure><h2 id="查看和使用配置"><a href="#查看和使用配置" class="headerlink" title="查看和使用配置"></a>查看和使用配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl config get-contexts</span><br><span class="line">kubectl config use-context voidking@kubenertes</span><br></pre></td></tr></table></figure><h2 id="删除某个集群配置"><a href="#删除某个集群配置" class="headerlink" title="删除某个集群配置"></a>删除某个集群配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl config delete-context xxx</span><br><span class="line">kubectl config delete-user xxx</span><br><span class="line">kubectl config delete-cluster xxx</span><br></pre></td></tr></table></figure><h1 id="配置整合2-0"><a href="#配置整合2-0" class="headerlink" title="配置整合2.0"></a>配置整合2.0</h1><p>多个kubeconfig合并成一个kubeconfig后，可以通过<code>kubectl config</code>实现在多个k8s集群间切换，很方便。</p><p>但是，因为很多集群的cluster name、user name、context name是相同的，所以每当有新的k8s集群加入时，或者kubeconfig过期需要重新加入时，我们都需要修改对新的config中的name进行修改，也是比较麻烦。</p><p>这里提供另外一种配置整合的方法：config文件改为软链，软链到真实config，通过修改软链切换配置。</p><p>1、准备真实config</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p ~/.kubeconfig/dev/</span><br><span class="line"><span class="built_in">mkdir</span> -p ~/.kubeconfig/test/</span><br><span class="line">vim ~/.kubeconfig/dev/config</span><br><span class="line">vim ~/.kubeconfig/test/config</span><br></pre></td></tr></table></figure><p>2、准备修改软链脚本 change-kubeconfig.sh</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">CLUSTER=<span class="variable">$1</span></span><br><span class="line"><span class="keyword">if</span> [[ -z <span class="string">&quot;<span class="variable">$CLUSTER</span>&quot;</span> ]];<span class="keyword">then</span></span><br><span class="line">    config_path=$(<span class="built_in">ls</span> -l <span class="variable">$HOME</span>/.kube/config | awk <span class="string">&#x27;&#123;print $NF&#125;&#x27;</span>)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Current kubeconfig is <span class="variable">$config_path</span>&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;You can specify a cluster to change the kubeconfig!&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ ! -e <span class="string">&quot;<span class="variable">$HOME</span>/.kubeconfig/<span class="variable">$CLUSTER</span>/config&quot;</span> ]];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Config file <span class="variable">$HOME</span>/.kubeconfig/<span class="variable">$CLUSTER</span>/config does not exist!&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">ln</span> -sf <span class="variable">$HOME</span>/.kubeconfig/<span class="variable">$CLUSTER</span>/config <span class="variable">$HOME</span>/.kube/config</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Kubeconfig has changed to <span class="variable">$HOME</span>/.kubeconfig/<span class="variable">$CLUSTER</span>/config&quot;</span></span><br></pre></td></tr></table></figure><p>3、脚本配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> a+x change-kubeconfig.sh</span><br><span class="line"><span class="built_in">mkdir</span> <span class="variable">$HOME</span>/.scripts</span><br><span class="line"><span class="built_in">mv</span> change-kubeconfig.sh <span class="variable">$HOME</span>/.scripts</span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF | tee -a $HOME/.bash_profile</span></span><br><span class="line"><span class="string"># kubeconfig script</span></span><br><span class="line"><span class="string">alias changek=&quot;\$HOME/.scripts/change-kubeconfig.sh&quot;</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><p>4、使用脚本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> .bash_profile</span><br><span class="line">changek dev</span><br><span class="line">kubectl get nodes</span><br><span class="line">changek <span class="built_in">test</span></span><br><span class="line">kubectl get nodes</span><br></pre></td></tr></table></figure><h1 id="命令自动补全"><a href="#命令自动补全" class="headerlink" title="命令自动补全"></a>命令自动补全</h1><h2 id="linux系统配置"><a href="#linux系统配置" class="headerlink" title="linux系统配置"></a>linux系统配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum install -y bash-completion</span><br><span class="line"><span class="built_in">source</span> /usr/share/bash-completion/bash_completion</span><br><span class="line"><span class="built_in">source</span> &lt;(kubectl completion bash)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;source /usr/share/bash-completion/bash_completion&quot;</span> &gt;&gt; ~/.bash_profile</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;source &lt;(kubectl completion bash)&quot;</span> &gt;&gt; ~/.bash_profile</span><br></pre></td></tr></table></figure><p>配置后，输入<code>kubectl get s</code>后，两次按下tab键，会提示可以选择的资源。<br>输入<code>kubectl get sec</code>后，按下tab键，会自动补全命令。</p><h2 id="mac系统配置"><a href="#mac系统配置" class="headerlink" title="mac系统配置"></a>mac系统配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">brew install bash-completion</span><br><span class="line"><span class="built_in">source</span> &lt;(kubectl completion zsh)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;source &lt;(kubectl completion zsh)&quot;</span> &gt;&gt; ~/.bash_profile</span><br></pre></td></tr></table></figure><h1 id="快捷命令"><a href="#快捷命令" class="headerlink" title="快捷命令"></a>快捷命令</h1><h2 id="kubectl缩写为k"><a href="#kubectl缩写为k" class="headerlink" title="kubectl缩写为k"></a>kubectl缩写为k</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> kubectl</span><br><span class="line"><span class="built_in">alias</span> k=<span class="string">&quot;/usr/local/bin/kubectl&quot;</span></span><br><span class="line">complete -F __start_kubectl k</span><br></pre></td></tr></table></figure><p>建议把配置写入 <code>.bash_profile</code> ，登录shell后别名自动生效。</p><h2 id="命令合并"><a href="#命令合并" class="headerlink" title="命令合并"></a>命令合并</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> kg=<span class="string">&quot;kubectl get&quot;</span></span><br><span class="line">alisa kd=<span class="string">&quot;kubectl describe&quot;</span></span><br></pre></td></tr></table></figure><p>kubectl get合并为kg，kubectl describe合并为kd。</p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.voidking.com/dev-kubectl-config/" title="kubectl命令——配置篇">https://www.voidking.com/dev-kubectl-config/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！源站会及时更新知识点及修正错误，阅读体验也更好。欢迎分享，欢迎收藏~</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/k8s/" rel="tag"># k8s</a> <a href="/tags/shell/" rel="tag"># shell</a> <a href="/tags/kubectl/" rel="tag"># kubectl</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-k8s-start/" rel="prev" title="K8S入门篇"><i class="fa fa-chevron-left"></i> K8S入门篇</a></div><div class="post-nav-item"> <a href="/dev-kubectl-curd/" rel="next" title="kubectl命令——资源对象增删查改篇">kubectl命令——资源对象增删查改篇<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"><ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-3284447971731414" data-ad-slot="9697986181"></ins><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3284447971731414" crossorigin="anonymous"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#kubectl%E7%AE%80%E4%BB%8B"><span class="nav-number">1.</span> <span class="nav-text">kubectl简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85kubectl"><span class="nav-number">2.</span> <span class="nav-text">安装kubectl</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96kubeconfig"><span class="nav-number">3.</span> <span class="nav-text">获取kubeconfig</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8C%87%E5%AE%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">4.</span> <span class="nav-text">指定配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%87%E5%AE%9A%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">4.1.</span> <span class="nav-text">指定默认配置文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8Bkubeconfig%E9%85%8D%E7%BD%AE%E5%86%85%E5%AE%B9"><span class="nav-number">4.2.</span> <span class="nav-text">查看kubeconfig配置内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%87%E5%AE%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%92%8Ccontext"><span class="nav-number">4.3.</span> <span class="nav-text">指定配置文件和context</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%87%E5%AE%9A%E5%8D%95%E6%AC%A1%E5%91%BD%E4%BB%A4%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">4.4.</span> <span class="nav-text">指定单次命令的配置文件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8C%87%E5%AE%9A%E9%BB%98%E8%AE%A4%E7%9A%84namespace"><span class="nav-number">5.</span> <span class="nav-text">指定默认的namespace</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%95%B4%E5%90%88"><span class="nav-number">6.</span> <span class="nav-text">配置整合</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%8C%E6%97%B6%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AA%E9%85%8D%E7%BD%AE"><span class="nav-number">6.1.</span> <span class="nav-text">同时使用多个配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E4%B8%AA%E9%85%8D%E7%BD%AE%E6%95%B4%E5%90%88%E6%88%90%E4%B8%80%E4%B8%AA%E9%85%8D%E7%BD%AE"><span class="nav-number">6.2.</span> <span class="nav-text">多个配置整合成一个配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%92%8C%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE"><span class="nav-number">6.3.</span> <span class="nav-text">查看和使用配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E6%9F%90%E4%B8%AA%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE"><span class="nav-number">6.4.</span> <span class="nav-text">删除某个集群配置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%95%B4%E5%90%882-0"><span class="nav-number">7.</span> <span class="nav-text">配置整合2.0</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8"><span class="nav-number">8.</span> <span class="nav-text">命令自动补全</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#linux%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE"><span class="nav-number">8.1.</span> <span class="nav-text">linux系统配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mac%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE"><span class="nav-number">8.2.</span> <span class="nav-text">mac系统配置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BF%AB%E6%8D%B7%E5%91%BD%E4%BB%A4"><span class="nav-number">9.</span> <span class="nav-text">快捷命令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#kubectl%E7%BC%A9%E5%86%99%E4%B8%BAk"><span class="nav-number">9.1.</span> <span class="nav-text">kubectl缩写为k</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E5%90%88%E5%B9%B6"><span class="nav-number">9.2.</span> <span class="nav-text">命令合并</span></a></li></ol></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">学而不思则罔，思而不学则殆！</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">646</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">30</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">242</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2023</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '5a238b8c32b1e4dd2156',
      clientSecret: 'bfb5d518626f6fdc7da0351d1e0cd37ab75c6361',
      repo: 'gitalk-comments',
      owner: 'voidking',
      admin: ['voidking'],
      id: '7e7cb20534131bcf161e91c48fb802e3',
      title: 'kubectl命令——配置篇',
      body: '欢迎留言，互相交流学习~',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></body></html>