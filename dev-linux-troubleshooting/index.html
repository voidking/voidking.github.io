<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//qiniu-cdn.voidking.com/doc/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="前言本文记录linux中排查问题时常用的shell命令，备忘。相关文档：《shell命令之系统管理》"><meta property="og:type" content="article"><meta property="og:title" content="好好学Linux：Linux问题排查常用命令"><meta property="og:url" content="https://www.voidking.com/dev-linux-troubleshooting/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="前言本文记录linux中排查问题时常用的shell命令，备忘。相关文档：《shell命令之系统管理》"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2017-06-02T08:00:00.000Z"><meta property="article:modified_time" content="2025-06-01T08:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="linux"><meta property="article:tag" content="好好学Linux"><meta property="article:tag" content="问题排查"><meta property="article:tag" content="shell"><meta property="article:tag" content="iperf"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-linux-troubleshooting/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>好好学Linux：Linux问题排查常用命令 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">一个计算机技术爱好者与学习者</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-linux-troubleshooting/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="一个计算机技术爱好者与学习者"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> 好好学Linux：Linux问题排查常用命令</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2017-06-02 08:00:00" itemprop="dateCreated datePublished" datetime="2017-06-02T08:00:00+00:00">2017-06-02</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-06-01 08:00:00" itemprop="dateModified" datetime="2025-06-01T08:00:00+00:00">2025-06-01</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/troubleshooting/" itemprop="url" rel="index"><span itemprop="name">troubleshooting</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/shell/" itemprop="url" rel="index"><span itemprop="name">shell</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="前言"><span class="post-title-index">1.</span><a href="#前言" class="headerlink" title="前言"></a> 前言</h1><p>本文记录linux中排查问题时常用的shell命令，备忘。<br>相关文档：<a href="https://www.voidking.com/dev-shell-system/">《shell命令之系统管理》</a></p><span id="more"></span><h1 id="查看资源使用情况"><span class="post-title-index">2.</span><a href="#查看资源使用情况" class="headerlink" title="查看资源使用情况"></a> 查看资源使用情况</h1><h2 id="查看CPU负载"><span class="post-title-index">2.1.</span><a href="#查看CPU负载" class="headerlink" title="查看CPU负载"></a> 查看CPU负载</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">top</span><br><span class="line">top <span class="comment"># 按1，查看每个逻辑CPU的使用情况</span></span><br><span class="line"><span class="built_in">uptime</span></span><br><span class="line">htop</span><br></pre></td></tr></table></figure><p>一个逻辑CPU可以处理一个线程，一般当 load average 超过逻辑CPU数量的70%，就可以认为 CPU 的负载较高。</p><h2 id="查看内存占用"><span class="post-title-index">2.2.</span><a href="#查看内存占用" class="headerlink" title="查看内存占用"></a> 查看内存占用</h2><p>查看内容总的占用情况</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">free -h</span><br></pre></td></tr></table></figure><p>查看哪个进程占用内存较多</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">top <span class="comment"># 然后输入大写的M</span></span><br><span class="line"></span><br><span class="line">ps aux --<span class="built_in">sort</span>=-%mem | <span class="built_in">head</span></span><br></pre></td></tr></table></figure><h2 id="查看磁盘空间占用"><span class="post-title-index">2.3.</span><a href="#查看磁盘空间占用" class="headerlink" title="查看磁盘空间占用"></a> 查看磁盘空间占用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">du</span> -sh * <span class="comment"># 不包含隐藏文件</span></span><br><span class="line"><span class="built_in">du</span> -sh .[!.]* <span class="comment"># 查看隐藏文件</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /</span><br><span class="line"><span class="built_in">du</span> -sh * --exclude=proc --exclude=data* <span class="comment"># 通过字符串匹配排除一些目录或文件，也会排除匹配到的子目录和子文件</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">du</span> -sh * --threshold=1G <span class="comment"># 筛选大于1G的目录或文件</span></span><br></pre></td></tr></table></figure><h2 id="查看磁盘空间占用（快速版）"><span class="post-title-index">2.4.</span><a href="#查看磁盘空间占用（快速版）" class="headerlink" title="查看磁盘空间占用（快速版）"></a> 查看磁盘空间占用（快速版）</h2><p>当文件比较多时，du执行速度太慢，这时可以使用它的升级版ncdu（<a target="_blank" rel="noopener" href="https://dev.yorhel.nl/ncdu">NCurses Disk Usage</a>）</p><p>1、安装ncdu</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y ncdu</span><br></pre></td></tr></table></figure><p>ncdu二进制安装方法</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wget https://dev.yorhel.nl/download/ncdu-2.2.1.tar.gz</span></span><br><span class="line">wget https://dev.yorhel.nl/download/ncdu-2.2.1-linux-x86_64.tar.gz --no-check-certificate</span><br><span class="line">tar -xzvf ncdu-2.2.1-linux-x86_64.tar.gz</span><br><span class="line"><span class="built_in">cp</span> ncdu /usr/local/bin</span><br><span class="line"><span class="built_in">ln</span> -s /usr/local/bin/ncdu /usr/bin/ncdu</span><br></pre></td></tr></table></figure><p>2、扫描指定目录磁盘空间占用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ncdu /home/voidking</span><br></pre></td></tr></table></figure><p>3、全局扫描磁盘空间占用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ncdu / --exclude=/data/mntnfs</span><br></pre></td></tr></table></figure><p>等到扫描结束后，通过上下按键和Enter按键，可以查看每一个目录的磁盘空间占用情况。</p><p>4、先扫描保存结果，然后再查看结果（对于超大量文件，ncdu 作者建议的优化方式）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ncdu -o scan_result /data</span><br><span class="line">ncdu -f scan_result</span><br></pre></td></tr></table></figure><h2 id="查看磁盘IO负载"><span class="post-title-index">2.5.</span><a href="#查看磁盘IO负载" class="headerlink" title="查看磁盘IO负载"></a> 查看磁盘IO负载</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat -x</span><br></pre></td></tr></table></figure><p>在iostat命令的输出中，磁盘IO请求队列长度对应的是avgqu-sz字段，表示平均每秒的I/O请求队列长度。它可以用来判断系统的磁盘IO瓶颈情况，如果该值超过了磁盘的最大IO队列长度，就说明磁盘IO请求队列积压了，系统IO性能可能会受到影响。<br>一般来说，当avgqu-sz值超过1时，就可能会有IO瓶颈的风险。</p><h2 id="查看进程的磁盘IO"><span class="post-title-index">2.6.</span><a href="#查看进程的磁盘IO" class="headerlink" title="查看进程的磁盘IO"></a> 查看进程的磁盘IO</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iotop</span><br></pre></td></tr></table></figure><p>iotop工作方式非常类似于 top 命令，但它专门对 I/O 进行监控。<br>iotop 可以为运行中的进程提供实时的磁盘I/O报告，并且通过报告每个进程/线程的磁盘I/O使用情况，帮助我们找出哪个进程/线程在导致磁盘I/O的相关问题。</p><h2 id="记录进程的磁盘IO"><span class="post-title-index">2.7.</span><a href="#记录进程的磁盘IO" class="headerlink" title="记录进程的磁盘IO"></a> 记录进程的磁盘IO</h2><p>使用 iotop 可以查看进程的磁盘IO，但是，这种查看是实时的，阅后即无。<br>如果想要记录进程的磁盘IO，可以配置使用一些监控工具，不过会比较复杂。</p><p>最简单的记录方法，是将 iotop 的结果输出到控制台，然后重定向存储到文件。<br>同时，因为 iotop 命令是一个持续命令，随意需要配合 timeout 来使用。<br>例如，如果我们需要记录60s内的数据，那么命令为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">timeout</span> 60 iotop -botqqq &gt; iotop_output.txt</span><br></pre></td></tr></table></figure><p>如果需要长时间记录，可以使用定时任务：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * * timeout 3 iotop -botqqq &gt; /data/iotop/iotop-`date +\%Y\%m\%d\%H\%M\%S`.log</span><br></pre></td></tr></table></figure><h1 id="查看网络情况"><span class="post-title-index">3.</span><a href="#查看网络情况" class="headerlink" title="查看网络情况"></a> 查看网络情况</h1><h2 id="查看网络负载"><span class="post-title-index">3.1.</span><a href="#查看网络负载" class="headerlink" title="查看网络负载"></a> 查看网络负载</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iftop</span><br></pre></td></tr></table></figure><p>详情参考<a href="https://www.voidking.com/dev-iftop/">《iftop命令》</a></p><h2 id="查看会话数"><span class="post-title-index">3.2.</span><a href="#查看会话数" class="headerlink" title="查看会话数"></a> 查看会话数</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss</span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">State      Recv-Q Send-Q      Local Address:Port       Peer Address:Port</span><br><span class="line">LISTEN     0      128                 *:22                  *:*</span><br><span class="line">LISTEN     0      100           127.0.0.1:25                  *:*</span><br></pre></td></tr></table></figure><ul><li>State: 显示套接字的状态，比如 LISTEN 表示正在监听连接，ESTAB 表示连接已经建立。</li><li>Recv-Q: 接收队列的大小。</li><li>Send-Q: 发送队列的大小。</li><li>Local Address:Port: 本地 IP 地址和端口号。</li><li>Peer Address:Port: 远程 IP 地址和端口号。</li></ul><h2 id="查看本机IP地址"><span class="post-title-index">3.3.</span><a href="#查看本机IP地址" class="headerlink" title="查看本机IP地址"></a> 查看本机IP地址</h2><p>1、查看本机当前namespace所有IP地址<br><code>ifconfig</code> 或者 <code>ip address</code></p><p>2、获取某个网卡的IP地址<br><code>ifconfig eth0 | awk &#39;NR==2&#123;print $2&#125;&#39;</code></p><h2 id="查看外网出口IP"><span class="post-title-index">3.4.</span><a href="#查看外网出口IP" class="headerlink" title="查看外网出口IP"></a> 查看外网出口IP</h2><p><code>curl myip.ipip.net</code></p><h2 id="查看局域网所有IP"><span class="post-title-index">3.5.</span><a href="#查看局域网所有IP" class="headerlink" title="查看局域网所有IP"></a> 查看局域网所有IP</h2><p>需求：查看当前局域网已经分配的IP，已知局域网为<code>192.168.56.0/24</code><br>1、通过扫描更新arp缓存</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 执行快，但是某些情况下无法更新arp缓存</span></span><br><span class="line">nmap -sP 192.168.56.0/24</span><br><span class="line"><span class="comment"># 执行慢，但是肯定可以更新arp缓存</span></span><br><span class="line">nmap -PR 192.168.56.0/24</span><br></pre></td></tr></table></figure><p>2、查看本地arp缓存</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /proc/net/arp | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> | grep <span class="string">&#x27;192.168&#x27;</span> | <span class="built_in">sort</span>  </span><br><span class="line">arp -a | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> | grep <span class="string">&#x27;192.168&#x27;</span> | <span class="built_in">sort</span></span><br></pre></td></tr></table></figure><h2 id="根据IP排序"><span class="post-title-index">3.6.</span><a href="#根据IP排序" class="headerlink" title="根据IP排序"></a> 根据IP排序</h2><p>需求：/proc/net/arp中的内容，根据IP进行排序</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /proc/net/arp | grep 192.168.56 | <span class="built_in">sort</span> -t<span class="string">&#x27;.&#x27;</span> -k1n,1 -k2n,2 -k3n,3 -k4n,4</span><br></pre></td></tr></table></figure><h2 id="测试mtu值"><span class="post-title-index">3.7.</span><a href="#测试mtu值" class="headerlink" title="测试mtu值"></a> 测试mtu值</h2><p>MTU是Maximum Transmission Unit的缩写，表示最大传输单元，MTU的单位是字节。大部分网络设备的MTU都是1500。<br>把本机的MTU设成比网关的MTU小或相同，就可以减少丢包。如果本机的MTU比网关的MTU大，大的数据包就会被拆开来传送，这样会产生很多数据包碎片，增加丢包率。<br>把数据包长度加上数据包头28字节，就得到MTU的值。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ping -c 3 -s 1472 -M <span class="keyword">do</span> www.baidu.com</span><br><span class="line">ping -c 3 -s 1473 -M <span class="keyword">do</span> www.baidu.com</span><br></pre></td></tr></table></figure><h2 id="带宽测试"><span class="post-title-index">3.8.</span><a href="#带宽测试" class="headerlink" title="带宽测试"></a> 带宽测试</h2><p>1、安装测试工具iperf</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y iperf</span><br></pre></td></tr></table></figure><p>2、启动iperf服务端</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf -s</span><br></pre></td></tr></table></figure><p>3、使用iperf客户端测试网速</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf -c 192.168.56.112 -i 3</span><br></pre></td></tr></table></figure><h1 id="查看进程和端口"><span class="post-title-index">4.</span><a href="#查看进程和端口" class="headerlink" title="查看进程和端口"></a> 查看进程和端口</h1><h2 id="查看进程和线程"><span class="post-title-index">4.1.</span><a href="#查看进程和线程" class="headerlink" title="查看进程和线程"></a> 查看进程和线程</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看所有进程</span></span><br><span class="line">ps -ef</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">ps aux</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有进程，并且显示进程启动的全部命令</span></span><br><span class="line">ps auxww</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有进程，并且显示进程的线程</span></span><br><span class="line">ps -efL</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看某个进程的线程</span></span><br><span class="line">ps -T -p 12345</span><br></pre></td></tr></table></figure><h2 id="根据端口找进程"><span class="post-title-index">4.2.</span><a href="#根据端口找进程" class="headerlink" title="根据端口找进程"></a> 根据端口找进程</h2><p>已知端口号（例如22），怎样查找对应的进程（PID）？怎样找到该进程启动命令？</p><p>方法一：使用lsof</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lsof -i:22</span><br><span class="line">ps -ef | grep 12345</span><br></pre></td></tr></table></figure><p>方法二：使用netstat</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -nlp | grep <span class="string">&quot;:22&quot;</span></span><br><span class="line">ps -ef | grep 12345</span><br></pre></td></tr></table></figure><h2 id="查看端口是否可以正常连接"><span class="post-title-index">4.3.</span><a href="#查看端口是否可以正常连接" class="headerlink" title="查看端口是否可以正常连接"></a> 查看端口是否可以正常连接</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">nc -v 192.168.56.101 8080</span><br><span class="line">nc -zv -w 5 192.168.56.101 8080</span><br><span class="line"><span class="comment"># 成功返回0，5s超时失败返回1</span></span><br><span class="line"></span><br><span class="line">telnet 192.168.56.101 8080</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;&#x27;</span> | <span class="built_in">timeout</span> --signal=9 5 telnet 192.168.56.101 8080</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;q&#x27;</span> | <span class="built_in">timeout</span> --signal=9 5 telnet -e <span class="string">&#x27;q&#x27;</span> 192.168.56.101 8080</span><br><span class="line"><span class="comment"># 成功返回1，5s超时失败返回137</span></span><br></pre></td></tr></table></figure><h2 id="查看进程资源占用"><span class="post-title-index">4.4.</span><a href="#查看进程资源占用" class="headerlink" title="查看进程资源占用"></a> 查看进程资源占用</h2><p>1、查看进程的实时资源占用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">top -p 12234</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line"><span class="built_in">cat</span> /proc/12345/status</span><br></pre></td></tr></table></figure><p>2、查看进程从启动到此刻的资源占用平均值</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep 12345</span><br></pre></td></tr></table></figure><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="https://xiaorui.cc/archives/4470">纠结ps和top的cpu占用率不一致问题</a></li><li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/arnoldlu/p/12162860.html">/proc/pid/status简要分析</a></li><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/beckdon/article/details/48491909">Linux下进程信息/proc/pid/status的深入分析</a></li></ul><h2 id="根据TCP连接查找进程"><span class="post-title-index">4.5.</span><a href="#根据TCP连接查找进程" class="headerlink" title="根据TCP连接查找进程"></a> 根据TCP连接查找进程</h2><p>redis主机（192.168.56.101），redis连接数被用完了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; info clients</span><br><span class="line">ERR max number of clients reached</span><br></pre></td></tr></table></figure><p>查看哪些主机在连接redis主机：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano | grep 6379</span><br></pre></td></tr></table></figure><p>发现一台 192.168.56.102 有大量的连接。</p><p>登录 192.168.56.102 主机，执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -i @192.168.56.101:6379</span><br></pre></td></tr></table></figure><p>找到连接redis的具体的进程。</p><h1 id="查看日志"><span class="post-title-index">5.</span><a href="#查看日志" class="headerlink" title="查看日志"></a> 查看日志</h1><h2 id="查看系统日志"><span class="post-title-index">5.1.</span><a href="#查看系统日志" class="headerlink" title="查看系统日志"></a> 查看系统日志</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dmesg -T</span><br><span class="line">dmesg -T | grep -i -e <span class="string">&quot;error&quot;</span> -e <span class="string">&quot;fail&quot;</span></span><br><span class="line"></span><br><span class="line">journalctl -xb</span><br></pre></td></tr></table></figure><p>dmesg用于显示内核环境下的系统日志，包括内核启动时的信息、硬件检测信息、内核模块加载信息、内核错误等。通常用于诊断系统启动和运行时出现的问题。dmesg命令显示的日志信息来自系统内核环缓冲区，因此是最新的系统日志。</p><p><code>journalctl -xb</code>命令用于查看 systemd 日志，输出系统启动时的所有日志信息，包括内核消息、系统服务和应用程序的日志信息。其中，-x 参数显示完整的日志信息，-b 参数表示显示系统启动时的日志信息。</p><p>通过 <code>journalctl -xb</code> 命令，可以查看系统启动时的各个服务启动情况，应用程序启动情况，以及其他系统级别的消息。可以用来诊断系统启动过程中的错误和问题。</p><p>更多journalctl的用法，参考文档<a href="https://www.voidking.com/dev-systemctl-command/">《systemctl命令》</a>。</p><h2 id="查看重启前的系统日志"><span class="post-title-index">5.2.</span><a href="#查看重启前的系统日志" class="headerlink" title="查看重启前的系统日志"></a> 查看重启前的系统日志</h2><p>/var/log目录下存在dmesg日志文件：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dmesg</span><br><span class="line">dmesg.0</span><br><span class="line">dmesg.1.gz</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>dmesg 日志文件中保存的是本次重启后的日志，而 dmesg.0 是这次重启前的 dmesg 日志，dmesg.1.gz 是上次重启前的 dmesg 日志，依次类推。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">journalctl -k -b -1</span><br><span class="line">journalctl -r -k -b -1</span><br></pre></td></tr></table></figure><h2 id="查看OOM日志"><span class="post-title-index">5.3.</span><a href="#查看OOM日志" class="headerlink" title="查看OOM日志"></a> 查看OOM日志</h2><p>方法一：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg -T</span><br></pre></td></tr></table></figure><p>方法二：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">&quot;Out of memory&quot;</span> /var/log/messages</span><br></pre></td></tr></table></figure><p>方法三：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">egrep -i -r <span class="string">&#x27;killed process&#x27;</span> /var/log</span><br></pre></td></tr></table></figure><p>参考文档：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/duanxz/p/10185946.html">Linux进程被杀掉（OOM killer），查看系统日志</a></p><h1 id="检查磁盘和文件系统"><span class="post-title-index">6.</span><a href="#检查磁盘和文件系统" class="headerlink" title="检查磁盘和文件系统"></a> 检查磁盘和文件系统</h1><h2 id="测试磁盘读写性能"><span class="post-title-index">6.1.</span><a href="#测试磁盘读写性能" class="headerlink" title="测试磁盘读写性能"></a> 测试磁盘读写性能</h2><p>测试读取性能：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/path/to/testfile of=/dev/null bs=1M count=1000</span><br></pre></td></tr></table></figure><p>从 /path/to/testfile 测试文件中读取数据并将其丢弃，将结果输出到/dev/null，以避免干扰测试。bs=1M指定每个数据块的大小为1MB，count=1000指定要读取的数据块数量。</p><p>测试写入性能：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=/path/to/testfile bs=1M count=1000 conv=fdatasync</span><br></pre></td></tr></table></figure><p>将/path/to/testfile替换为要进行测试的文件路径，bs=1M和count=1000指定了数据块的大小和数量，conv=fdatasync确保数据同步写入磁盘。</p><h2 id="修复文件系统"><span class="post-title-index">6.2.</span><a href="#修复文件系统" class="headerlink" title="修复文件系统"></a> 修复文件系统</h2><p>fsck（file system check）是一个用于检查和修复文件系统中错误的命令。它可以检测和修复文件系统中的逻辑错误、链接错误、磁盘损坏、超级块错误等。fsck通过扫描文件系统和相关数据结构，以确定文件系统的状态，并尝试修复错误。它可以改善文件系统的健康状态和性能，并保护用户数据。</p><p>文件系统出错时的表现：</p><ul><li>系统无法启动。</li><li>系统上的文件损坏（通常您可能会看到输入/输出错误）。</li><li>连接的驱动器（包括闪存驱动器/SD 卡）未按预期工作。</li></ul><p>1、卸载挂载</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">umount /dev/sdb</span><br></pre></td></tr></table></figure><p>2、检查并修复文件系统</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fsck -y /dev/sdb</span><br></pre></td></tr></table></figure><p>参考文档：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/620706837">如何使用fsck修复Linux文件系统错误</a></p><h2 id="检测磁盘坏扇区"><span class="post-title-index">6.3.</span><a href="#检测磁盘坏扇区" class="headerlink" title="检测磁盘坏扇区"></a> 检测磁盘坏扇区</h2><p>badblocks是一个用于检测坏磁盘扇区的命令。它通过扫描磁盘或磁盘分区，并标记坏扇区。坏扇区可能会导致数据丢失或读写错误，因此通过badblocks命令可以帮助识别和排除这些扇区。badblocks可以在文件系统创建之前或之后使用，以确保磁盘或分区没有坏扇区。</p><p>1、检测整个磁盘并输出到文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">badblocks -s -v -o /root/bb-sdb.log /dev/sdb</span><br></pre></td></tr></table></figure><p>如果报错：badblocks: Value too large for defined data type invalid end block (15625879552): must be 32-bit value</p><p>那么需要修改命令为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">badblocks -b 5120 -s -v -o /root/bb-sdb.log /dev/sdb</span><br></pre></td></tr></table></figure><p><code>-b</code> 参数默认为512，意思为512字节一扇区，对于大硬盘需要把这个参数修改为5120，那么就能顺利执行了。最后得到的结果也要除以10，就是真正的坏道位置了。</p><p>2、暴力写测试整个磁盘</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">badblocks -s -w /dev/sdb </span><br></pre></td></tr></table></figure><p>参考文档：<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/badblocks">badblocks</a></p><h1 id="查看安全情况"><span class="post-title-index">7.</span><a href="#查看安全情况" class="headerlink" title="查看安全情况"></a> 查看安全情况</h1><h2 id="查看异常进程"><span class="post-title-index">7.1.</span><a href="#查看异常进程" class="headerlink" title="查看异常进程"></a> 查看异常进程</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">top</span><br><span class="line">htop</span><br></pre></td></tr></table></figure><h2 id="查看登录记录"><span class="post-title-index">7.2.</span><a href="#查看登录记录" class="headerlink" title="查看登录记录"></a> 查看登录记录</h2><p>查看登录记录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">last</span><br><span class="line">lastlog</span><br></pre></td></tr></table></figure><p>查看登录失败记录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lastb</span><br></pre></td></tr></table></figure><p>CentOS专用查看登录失败记录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">&quot;Failed password&quot;</span> /var/log/secure</span><br></pre></td></tr></table></figure><p>Ubuntu/Debian专用查看登录失败记录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">&quot;Failed password&quot;</span> /var/log/auth.log</span><br></pre></td></tr></table></figure></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>原文链接：</strong> <a href="https://www.voidking.com/dev-linux-troubleshooting/" title="好好学Linux：Linux问题排查常用命令">https://www.voidking.com/dev-linux-troubleshooting/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本文采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议，转载请注明出处！源站会即时更新知识点并修正错误，欢迎访问~</li><li> <img width="200" height="200" src="/images/avatar.jpg"><p style="text-align:center;margin-bottom:0">微信公众号同步更新，欢迎关注~</p></li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/linux/" rel="tag"># linux</a> <a href="/tags/%E5%A5%BD%E5%A5%BD%E5%AD%A6Linux/" rel="tag"># 好好学Linux</a> <a href="/tags/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/" rel="tag"># 问题排查</a> <a href="/tags/shell/" rel="tag"># shell</a> <a href="/tags/iperf/" rel="tag"># iperf</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-nohup-and-screen/" rel="prev" title="好好学Linux：Linux后台运行脚本或程序"><i class="fa fa-chevron-left"></i> 好好学Linux：Linux后台运行脚本或程序</a></div><div class="post-nav-item"> <a href="/dev-linux-top/" rel="next" title="好好学Linux：top命令">好好学Linux：top命令<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"><ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-3284447971731414" data-ad-slot="9697986181"></ins><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3284447971731414" crossorigin="anonymous"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">1. 前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E8%B5%84%E6%BA%90%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5"><span class="nav-text">2. 查看资源使用情况</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8BCPU%E8%B4%9F%E8%BD%BD"><span class="nav-text">2.1. 查看CPU负载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%86%85%E5%AD%98%E5%8D%A0%E7%94%A8"><span class="nav-text">2.2. 查看内存占用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E5%8D%A0%E7%94%A8"><span class="nav-text">2.3. 查看磁盘空间占用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E5%8D%A0%E7%94%A8%EF%BC%88%E5%BF%AB%E9%80%9F%E7%89%88%EF%BC%89"><span class="nav-text">2.4. 查看磁盘空间占用（快速版）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%A3%81%E7%9B%98IO%E8%B4%9F%E8%BD%BD"><span class="nav-text">2.5. 查看磁盘IO负载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B%E7%9A%84%E7%A3%81%E7%9B%98IO"><span class="nav-text">2.6. 查看进程的磁盘IO</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%B0%E5%BD%95%E8%BF%9B%E7%A8%8B%E7%9A%84%E7%A3%81%E7%9B%98IO"><span class="nav-text">2.7. 记录进程的磁盘IO</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%BD%91%E7%BB%9C%E6%83%85%E5%86%B5"><span class="nav-text">3. 查看网络情况</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%BD%91%E7%BB%9C%E8%B4%9F%E8%BD%BD"><span class="nav-text">3.1. 查看网络负载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E4%BC%9A%E8%AF%9D%E6%95%B0"><span class="nav-text">3.2. 查看会话数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%9C%AC%E6%9C%BAIP%E5%9C%B0%E5%9D%80"><span class="nav-text">3.3. 查看本机IP地址</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%A4%96%E7%BD%91%E5%87%BA%E5%8F%A3IP"><span class="nav-text">3.4. 查看外网出口IP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%B1%80%E5%9F%9F%E7%BD%91%E6%89%80%E6%9C%89IP"><span class="nav-text">3.5. 查看局域网所有IP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AEIP%E6%8E%92%E5%BA%8F"><span class="nav-text">3.6. 根据IP排序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95mtu%E5%80%BC"><span class="nav-text">3.7. 测试mtu值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%A6%E5%AE%BD%E6%B5%8B%E8%AF%95"><span class="nav-text">3.8. 带宽测试</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%AB%AF%E5%8F%A3"><span class="nav-text">4. 查看进程和端口</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B"><span class="nav-text">4.1. 查看进程和线程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E7%AB%AF%E5%8F%A3%E6%89%BE%E8%BF%9B%E7%A8%8B"><span class="nav-text">4.2. 根据端口找进程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E6%AD%A3%E5%B8%B8%E8%BF%9E%E6%8E%A5"><span class="nav-text">4.3. 查看端口是否可以正常连接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B%E8%B5%84%E6%BA%90%E5%8D%A0%E7%94%A8"><span class="nav-text">4.4. 查看进程资源占用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AETCP%E8%BF%9E%E6%8E%A5%E6%9F%A5%E6%89%BE%E8%BF%9B%E7%A8%8B"><span class="nav-text">4.5. 根据TCP连接查找进程</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%97%A5%E5%BF%97"><span class="nav-text">5. 查看日志</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97"><span class="nav-text">5.1. 查看系统日志</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E9%87%8D%E5%90%AF%E5%89%8D%E7%9A%84%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97"><span class="nav-text">5.2. 查看重启前的系统日志</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8BOOM%E6%97%A5%E5%BF%97"><span class="nav-text">5.3. 查看OOM日志</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A3%80%E6%9F%A5%E7%A3%81%E7%9B%98%E5%92%8C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-text">6. 检查磁盘和文件系统</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E7%A3%81%E7%9B%98%E8%AF%BB%E5%86%99%E6%80%A7%E8%83%BD"><span class="nav-text">6.1. 测试磁盘读写性能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E5%A4%8D%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-text">6.2. 修复文件系统</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A3%80%E6%B5%8B%E7%A3%81%E7%9B%98%E5%9D%8F%E6%89%87%E5%8C%BA"><span class="nav-text">6.3. 检测磁盘坏扇区</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%AE%89%E5%85%A8%E6%83%85%E5%86%B5"><span class="nav-text">7. 查看安全情况</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%BC%82%E5%B8%B8%E8%BF%9B%E7%A8%8B"><span class="nav-text">7.1. 查看异常进程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%99%BB%E5%BD%95%E8%AE%B0%E5%BD%95"><span class="nav-text">7.2. 查看登录记录</span></a></li></ol></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">一个计算机技术爱好者与学习者</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">748</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">32</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">259</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2025</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '5a238b8c32b1e4dd2156',
      clientSecret: 'bfb5d518626f6fdc7da0351d1e0cd37ab75c6361',
      repo: 'gitalk-comments',
      owner: 'voidking',
      admin: ['voidking'],
      id: '503c0f5ed920bf5223d286160daa30df',
      title: '好好学Linux：Linux问题排查常用命令',
      body: '欢迎留言，互相交流学习~',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></body></html>