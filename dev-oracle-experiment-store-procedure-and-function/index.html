<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//cdn.jsdelivr.net/gh/voidking/voidking.github.io/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="创建、编译并运行PL&#x2F;SQL存储过程在SQL Developer中，创建、编译并运行PL&#x2F;SQL存储过程1、右击过程，创建过程2、输入过程名“emp_list”3、添加参数    Name Type Mode Default Value    v_empno VARCHAR2 IN    v_ename VARCHAR2 OUT    4、显示指定参数的过程的框架 12345678CREATE O"><meta property="og:type" content="article"><meta property="og:title" content="Oracle实验记录——存储过程和函数"><meta property="og:url" content="https://www.voidking.com/dev-oracle-experiment-store-procedure-and-function/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="创建、编译并运行PL&#x2F;SQL存储过程在SQL Developer中，创建、编译并运行PL&#x2F;SQL存储过程1、右击过程，创建过程2、输入过程名“emp_list”3、添加参数    Name Type Mode Default Value    v_empno VARCHAR2 IN    v_ename VARCHAR2 OUT    4、显示指定参数的过程的框架 12345678CREATE O"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2015-05-19T19:05:53.000Z"><meta property="article:modified_time" content="2015-05-19T19:05:53.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="数据库"><meta property="article:tag" content="oracle"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-oracle-experiment-store-procedure-and-function/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>Oracle实验记录——存储过程和函数 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">好好学习，天天向上！</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-oracle-experiment-store-procedure-and-function/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="学而不思则罔，思而不学则殆！"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> Oracle实验记录——存储过程和函数</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2015-05-19 19:05:53" itemprop="dateCreated datePublished" datetime="2015-05-19T19:05:53+00:00">2015-05-19</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/database/" itemprop="url" rel="index"><span itemprop="name">database</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="创建、编译并运行PL-SQL存储过程"><a href="#创建、编译并运行PL-SQL存储过程" class="headerlink" title="创建、编译并运行PL/SQL存储过程"></a>创建、编译并运行PL/SQL存储过程</h3><p>在SQL Developer中，创建、编译并运行PL/SQL存储过程<br>1、右击过程，创建过程<br>2、输入过程名“emp_list”<br>3、添加参数</p><table><thead><tr><th>Name</th><th>Type</th><th>Mode</th><th>Default Value</th></tr></thead><tbody><tr><td>v_empno</td><td>VARCHAR2</td><td>IN</td><td></td></tr><tr><td>v_ename</td><td>VARCHAR2</td><td>OUT</td><td></td></tr></tbody></table><p>4、显示指定参数的过程的框架</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE</span><br><span class="line"><span class="keyword">PROCEDURE</span> <span class="title function_">EMP_LIST</span></span><br><span class="line"><span class="params">( v_empno <span class="keyword">IN</span> VARCHAR2</span></span><br><span class="line"><span class="params">, v_ename <span class="keyword">OUT</span> VARCHAR2</span></span><br><span class="line"><span class="params">)</span> <span class="title function_">AS</span></span><br><span class="line"><span class="title function_">BEGIN</span></span><br><span class="line">  <span class="title function_">NULL</span>;</span><br><span class="line"><span class="keyword">END</span> EMP_LIST<span class="punctuation">;</span></span><br></pre></td></tr></table></figure><p>5、替换NULL为：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename <span class="keyword">into</span> v_ename <span class="keyword">from</span> emp <span class="keyword">where</span> empno = v_empno;</span><br></pre></td></tr></table></figure><p>单击工具栏的save按钮，编译PL/SQL子程序。</p><p>6、运行PL/SQL过程<br>单击编译图标，过程成功编译。右击emp_list，选择运行。<br>该操作将调用“运行PL/SQL”对话框。运行PL/SQL对话框允许选择要运行的目标过程或函数（对程序包有用），并显示所选目标的参数列表。PL/SQL块文本区域中包含的SQL Developer用来调用所选程序的生成代码。使用该区域填充要传送到程序单元的参数及处理复杂的返回类型。<br>将 “V_EMPNO:=NULL;”更改为“V_EMPNO:=7369;”，然后单击确定。<br>可以看到运行日志：</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">连接到数据库 <span class="keyword">scott。</span></span><br><span class="line"><span class="keyword"></span>V_ENAME = SMITH</span><br><span class="line">进程已退出。</span><br><span class="line">从数据库 <span class="keyword">scott </span>断开连接。</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="无参数的存储过程"><a href="#无参数的存储过程" class="headerlink" title="无参数的存储过程"></a>无参数的存储过程</h3><p>创建一个存储过程，使用游标实现，每输出dept表的一条记录（deptno、dname、loc）后，诉后输出该部门的员工记录（empno、ename、sal）。</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or replace</span> <span class="keyword">procedure</span> query_dept_emp <span class="keyword">is</span></span><br><span class="line">  <span class="keyword">type</span> sp_emp_cursor <span class="keyword">is</span> <span class="keyword">ref</span> <span class="keyword">cursor</span>;</span><br><span class="line">  test_cursor1 sp_emp_cursor;</span><br><span class="line">  test_cursor2 sp_emp_cursor;</span><br><span class="line">  v_deptno dept.Deptno<span class="meta">%type</span>;</span><br><span class="line">  v_dname dept.dname<span class="meta">%type</span>;</span><br><span class="line">  v_loc dept.loc<span class="meta">%type</span>;</span><br><span class="line">  v_empno emp.empno<span class="meta">%type</span>;</span><br><span class="line">  v_ename emp.ename<span class="meta">%type</span>;</span><br><span class="line">  v_sal emp.sal<span class="meta">%type</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">open</span> test_cursor1 <span class="keyword">for</span> <span class="keyword">select</span> deptno,dname,loc <span class="keyword">from</span> dept;</span><br><span class="line">  <span class="keyword">loop</span></span><br><span class="line">    <span class="keyword">fetch</span> test_cursor1 <span class="keyword">into</span> v_deptno, v_dname, v_loc;</span><br><span class="line">    <span class="keyword">exit</span> <span class="keyword">when</span> test_cursor1%notfound;</span><br><span class="line">    dbms_output.put_line(<span class="string">&#x27;部门编号：&#x27;</span>||v_deptno||<span class="string">&#x27;部门名称：&#x27;</span>||v_dname||<span class="string">&#x27;部门位置：&#x27;</span>|| v_loc);</span><br><span class="line">    dbms_output.put_line(<span class="string">&#x27;-----------------------------------------------&#x27;</span>);</span><br><span class="line">    <span class="keyword">open</span> test_cursor2 <span class="keyword">for</span> <span class="keyword">select</span> empno,ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = v_deptno;</span><br><span class="line">    <span class="keyword">loop</span></span><br><span class="line">      <span class="keyword">fetch</span> test_cursor2 <span class="keyword">into</span> v_empno, v_ename, v_sal;</span><br><span class="line">      <span class="keyword">exit</span> <span class="keyword">when</span> test_cursor2%notfound;</span><br><span class="line">      dbms_output.put_line(v_empno||<span class="string">&#x27;          &#x27;</span>|| v_ename||<span class="string">&#x27;         &#x27;</span>|| v_sal);</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">  <span class="keyword">close</span> test_cursor1;</span><br><span class="line">  <span class="keyword">close</span> test_cursor2;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line">exec query_dept_emp;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="带in参数的存储过程"><a href="#带in参数的存储过程" class="headerlink" title="带in参数的存储过程"></a>带in参数的存储过程</h3><p>创建一个PL/SQL块，根据输入的部门编号，用游标实现逐条输出emp表中该部门每位员工的编号（empno）、姓名（ename）和工资（sal）信息。</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or replace</span> <span class="keyword">procedure</span> query_by_deptno(v_deptno <span class="keyword">in</span> emp.Deptno<span class="meta">%type</span>) <span class="keyword">is</span></span><br><span class="line">  <span class="keyword">type</span> sp_emp_cursor <span class="keyword">is</span> <span class="keyword">ref</span> <span class="keyword">cursor</span>;</span><br><span class="line">  test_cursor sp_emp_cursor;</span><br><span class="line">  v_empno emp.empno<span class="meta">%type</span>;</span><br><span class="line">  v_ename emp.ename<span class="meta">%type</span>;</span><br><span class="line">  v_sal emp.sal<span class="meta">%type</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">open</span> test_cursor <span class="keyword">for</span> <span class="keyword">select</span> empno,ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> deptno = v_deptno;</span><br><span class="line">  dbms_output.put_line(<span class="string">&#x27;员工编号    姓名    工资&#x27;</span>);</span><br><span class="line">  <span class="keyword">loop</span></span><br><span class="line">    <span class="keyword">fetch</span> test_cursor <span class="keyword">into</span> v_empno, v_ename, v_sal;</span><br><span class="line">    <span class="keyword">exit</span> <span class="keyword">when</span> test_cursor%notfound;</span><br><span class="line">    dbms_output.put_line(v_empno||<span class="string">&#x27;    &#x27;</span>|| v_ename||<span class="string">&#x27;    &#x27;</span>|| v_sal);</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">  <span class="keyword">close</span> test_cursor;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">exec query_by_deptno(<span class="number">10</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="带输入in、输出out参数的存储过程"><a href="#带输入in、输出out参数的存储过程" class="headerlink" title="带输入in、输出out参数的存储过程"></a>带输入in、输出out参数的存储过程</h3><p>查询emp中给定职工号的姓名、工资和佣金。</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or replace</span></span><br><span class="line"><span class="keyword">procedure</span> query_emp</span><br><span class="line">  (v_emp_no <span class="keyword">in</span> emp.empno<span class="meta">%type</span>, </span><br><span class="line">  v_emp_name <span class="keyword">out</span> emp.ename<span class="meta">%type</span>,</span><br><span class="line">  v_emp_sal <span class="keyword">out</span> emp.sal<span class="meta">%type</span>,</span><br><span class="line">  v_emp_comm <span class="keyword">out</span> emp.comm<span class="meta">%type</span></span><br><span class="line">  )</span><br><span class="line"><span class="keyword">is</span></span><br><span class="line">  <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">select</span> ename,sal,comm</span><br><span class="line">    <span class="keyword">into</span> v_emp_name, v_emp_sal, v_emp_comm</span><br><span class="line">    <span class="keyword">from</span> emp </span><br><span class="line">    <span class="keyword">where</span> empno = v_emp_no;</span><br><span class="line"><span class="keyword">end</span> query_emp;</span><br><span class="line"></span><br><span class="line">variable emp_name varchar2(<span class="number">15</span>);</span><br><span class="line">variable emp_sal number;</span><br><span class="line">variable emp_comm number;</span><br><span class="line"><span class="keyword">execute</span> query_emp(<span class="number">7369</span>,:emp_name,:emp_sal,:emp_comm);</span><br><span class="line">print emp_name;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="使用隐式游标SQL-NOTFOUND的存储过程"><a href="#使用隐式游标SQL-NOTFOUND的存储过程" class="headerlink" title="使用隐式游标SQL%NOTFOUND的存储过程"></a>使用隐式游标SQL%NOTFOUND的存储过程</h3><p>解雇给定职工号的职工。如果职工号7654的职工不存在则出错。为了避免出错可使用隐式游标SQL%NOTFOUND语句。</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or replace</span> <span class="keyword">procedure</span> fire_emp(v_emp_no <span class="keyword">in</span> emp.empno<span class="meta">%type</span>)</span><br><span class="line"><span class="keyword">is</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">delete</span> <span class="keyword">from</span> emp <span class="keyword">where</span> empno = v_emp_no;</span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">sql</span>%notfound <span class="keyword">then</span></span><br><span class="line">    dbms_output.put_line(<span class="string">&#x27;雇员号为：&#x27;</span>||v_emp_no||<span class="string">&#x27;的员工不存在！&#x27;</span>);</span><br><span class="line">  <span class="keyword">else</span> </span><br><span class="line">    dbms_output.put_line(<span class="string">&#x27;已删除雇员号为：&#x27;</span>|| v_emp_no || <span class="string">&#x27;的员工。&#x27;</span>);</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line"><span class="keyword">end</span> fire_emp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">execute</span> fire_emp(<span class="number">7654</span>);</span><br></pre></td></tr></table></figure><h3 id="自定义函数"><a href="#自定义函数" class="headerlink" title="自定义函数"></a>自定义函数</h3><p>用Function查询出EMP中给定职工号的工资。</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or replace</span> <span class="keyword">function</span> get_sal</span><br><span class="line">  (v_emp_no <span class="keyword">in</span> emp.empno<span class="meta">%type</span>)</span><br><span class="line">  <span class="keyword">return</span> number </span><br><span class="line"><span class="keyword">is</span> </span><br><span class="line">  v_emp_sal emp.sal<span class="meta">%type</span>:=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> sal <span class="keyword">into</span> v_emp_sal</span><br><span class="line">  <span class="keyword">from</span> emp <span class="keyword">where</span> empno = v_emp_no;</span><br><span class="line">  <span class="keyword">return</span> (v_emp_sal);</span><br><span class="line"><span class="keyword">end</span> get_sal;</span><br><span class="line"></span><br><span class="line">variable emp_sal number;</span><br><span class="line"><span class="keyword">execute</span>:emp_sal:=get_sal(<span class="string">&#x27;7900&#x27;</span>);</span><br><span class="line">print emp_sal;</span><br></pre></td></tr></table></figure><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>这个实验肯定是和PL/SQL程序设计一伙的！感觉在专业中基本用不到。<br>本篇是Oracle实验记录的的最后一篇，书上还有一些内容，什么分区表的创建和使用、使用RMAN工具、闪回技术等等，需要时再去学习。</p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.voidking.com/dev-oracle-experiment-store-procedure-and-function/" title="Oracle实验记录——存储过程和函数">https://www.voidking.com/dev-oracle-experiment-store-procedure-and-function/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！源站会及时更新知识点及修正错误，阅读体验也更好。欢迎分享，欢迎收藏~</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag"># 数据库</a> <a href="/tags/oracle/" rel="tag"># oracle</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-oracle-experiment-plsql-design/" rel="prev" title="Oracle实验记录——PL/SQL程序设计"><i class="fa fa-chevron-left"></i> Oracle实验记录——PL/SQL程序设计</a></div><div class="post-nav-item"> <a href="/dev-quickly-open-android-offline-document/" rel="next" title="加快Android离线文档的访问速度">加快Android离线文档的访问速度<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zODU3Mi8xNTEwMA=="></div></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E3%80%81%E7%BC%96%E8%AF%91%E5%B9%B6%E8%BF%90%E8%A1%8CPL-SQL%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">1.</span> <span class="nav-text">创建、编译并运行PL&#x2F;SQL存储过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A0%E5%8F%82%E6%95%B0%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">2.</span> <span class="nav-text">无参数的存储过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%A6in%E5%8F%82%E6%95%B0%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">3.</span> <span class="nav-text">带in参数的存储过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%A6%E8%BE%93%E5%85%A5in%E3%80%81%E8%BE%93%E5%87%BAout%E5%8F%82%E6%95%B0%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">4.</span> <span class="nav-text">带输入in、输出out参数的存储过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E9%9A%90%E5%BC%8F%E6%B8%B8%E6%A0%87SQL-NOTFOUND%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">5.</span> <span class="nav-text">使用隐式游标SQL%NOTFOUND的存储过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0"><span class="nav-number">6.</span> <span class="nav-text">自定义函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%8F%E7%BB%93"><span class="nav-number">7.</span> <span class="nav-text">小结</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">学而不思则罔，思而不学则殆！</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">642</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">30</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">241</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2023</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer><div id="needsharebutton-float"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css"><script src="/lib/needsharebutton/needsharebutton.js"></script><script>pbOptions={iconStyle:"box",boxForm:"horizontal",position:"bottomCenter",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-postbottom",pbOptions),flOptions={iconStyle:"box",boxForm:"horizontal",position:"topRight",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-float",flOptions)</script><script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  // window.livereOptions = {
  //   refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  // };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script></body></html>