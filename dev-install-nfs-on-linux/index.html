<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//qiniu-cdn.voidking.com/doc/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="NFS简介 Network File System (NFS) is a distributed file system protocol originally developed by Sun Microsystems (Sun) in 1984, allowing a user on a client computer to access files over a computer netwo"><meta property="og:type" content="article"><meta property="og:title" content="Linux中安装NFS"><meta property="og:url" content="https://www.voidking.com/dev-install-nfs-on-linux/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="NFS简介 Network File System (NFS) is a distributed file system protocol originally developed by Sun Microsystems (Sun) in 1984, allowing a user on a client computer to access files over a computer netwo"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2018-11-15T09:00:00.000Z"><meta property="article:modified_time" content="2024-06-29T08:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="linux"><meta property="article:tag" content="ubuntu"><meta property="article:tag" content="存储"><meta property="article:tag" content="nfs"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-install-nfs-on-linux/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>Linux中安装NFS | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">一个计算机技术爱好者与学习者</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-install-nfs-on-linux/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="一个计算机技术爱好者与学习者"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> Linux中安装NFS</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-11-15 09:00:00" itemprop="dateCreated datePublished" datetime="2018-11-15T09:00:00+00:00">2018-11-15</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2024-06-29 08:00:00" itemprop="dateModified" datetime="2024-06-29T08:00:00+00:00">2024-06-29</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/devops/" itemprop="url" rel="index"><span itemprop="name">devops</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/storage/" itemprop="url" rel="index"><span itemprop="name">storage</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="NFS简介"><span class="post-title-index">1.</span><a href="#NFS简介" class="headerlink" title="NFS简介"></a> NFS简介</h1><blockquote><p>Network File System (NFS) is a distributed file system protocol originally developed by Sun Microsystems (Sun) in 1984, allowing a user on a client computer to access files over a computer network much like local storage is accessed. NFS, like many other protocols, builds on the Open Network Computing Remote Procedure Call (ONC RPC) system. NFS is an open IETF standard defined in a Request for Comments (RFC), allowing anyone to implement the protocol.</p></blockquote><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Network_File_System">Wikipedia - Network File System</a></li></ul><span id="more"></span><h1 id="CentOS中安装NFS"><span class="post-title-index">2.</span><a href="#CentOS中安装NFS" class="headerlink" title="CentOS中安装NFS"></a> CentOS中安装NFS</h1><h2 id="安装nfs-server"><span class="post-title-index">2.1.</span><a href="#安装nfs-server" class="headerlink" title="安装nfs-server"></a> 安装nfs-server</h2><p>作为存储节点的主机安装nfs-server，本节中的存储节点主机IP为192.168.56.101。</p><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="https://kuboard.cn/learning/k8s-intermediate/persistent/nfs.html">搭建NFS Server</a></li></ul><p>1、关闭防火墙</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld.service</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service</span><br></pre></td></tr></table></figure><p>2、安装nfs（包括nfs-server和nfs-client）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y nfs-utils rpcbind</span><br></pre></td></tr></table></figure><p>3、创建共享目录，设置共享目录权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /data/nfs</span><br><span class="line"><span class="built_in">chmod</span> -R 777 /data/nfs</span><br></pre></td></tr></table></figure><p>4、配置共享目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;/data/nfs *(insecure,rw,sync,no_root_squash)&#x27;</span> &gt;&gt; /etc/exports</span><br></pre></td></tr></table></figure><p>5、启动nfs-server</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> rpcbind</span><br><span class="line">systemctl <span class="built_in">enable</span> nfs-server</span><br><span class="line"></span><br><span class="line">systemctl start rpcbind</span><br><span class="line">systemctl start nfs-server</span><br><span class="line"></span><br><span class="line">systemctl status rpcbind</span><br><span class="line">systemctl status nfs-server</span><br><span class="line">exportfs -r <span class="comment"># 重新挂载</span></span><br></pre></td></tr></table></figure><p>6、检查nfs状态</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exportfs</span><br><span class="line">rpcinfo -p | grep nfs</span><br></pre></td></tr></table></figure><p>7、查看目录挂载权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /var/lib/nfs/etab</span><br></pre></td></tr></table></figure><h2 id="安装nfs-client"><span class="post-title-index">2.2.</span><a href="#安装nfs-client" class="headerlink" title="安装nfs-client"></a> 安装nfs-client</h2><p>在需要挂载nfs的主机上安装nfs-client，本节中主机IP为192.168.56.102。</p><p>1、关闭防火墙</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld.service</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service</span><br></pre></td></tr></table></figure><p>2、安装nfs（包括nfs-server和nfs-client）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y nfs-utils rpcbind</span><br></pre></td></tr></table></figure><p>3、启动nfs-client</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> rpcbind</span><br><span class="line">systemctl <span class="built_in">enable</span> nfs</span><br><span class="line">systemctl start rpcbind</span><br><span class="line">systemctl start nfs</span><br><span class="line">systemctl status rpcbind</span><br><span class="line">systemctl status nfs</span><br></pre></td></tr></table></figure><h2 id="测试nfs挂载"><span class="post-title-index">2.3.</span><a href="#测试nfs挂载" class="headerlink" title="测试nfs挂载"></a> 测试nfs挂载</h2><p>192.168.56.102机器上，测试nfs挂载。</p><p>1、检查101是否有nfs共享目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">showmount -e 192.168.56.101</span><br></pre></td></tr></table></figure><p>2、挂载nfs共享目录到本机</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /data/mntnfs</span><br><span class="line">mount -t nfs 192.168.56.101:/data/nfs /data/mntnfs</span><br></pre></td></tr></table></figure><p>3、测试读写文件<br>102机器读写文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;test&quot;</span> &gt; /data/mntnfs/test.txt</span><br><span class="line"><span class="built_in">cat</span> /data/mntnfs/test.txt</span><br></pre></td></tr></table></figure><p>101机器读文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /data/nfs/test.txt</span><br></pre></td></tr></table></figure><p>4、配置自动挂载</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF | tee -a /etc/fstab</span></span><br><span class="line"><span class="string">192.168.56.101:/data/nfs /data/mntnfs nfs default 0 0</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">mount -a</span><br></pre></td></tr></table></figure><h1 id="Ubuntu中安装NFS"><span class="post-title-index">3.</span><a href="#Ubuntu中安装NFS" class="headerlink" title="Ubuntu中安装NFS"></a> Ubuntu中安装NFS</h1><h2 id="安装nfs-server-1"><span class="post-title-index">3.1.</span><a href="#安装nfs-server-1" class="headerlink" title="安装nfs-server"></a> 安装nfs-server</h2><p>作为存储节点的主机安装nfs-server，本节中的存储节点主机IP为192.168.56.103。</p><p>1、安装nfs-server</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get -y install nfs-kernel-server</span><br></pre></td></tr></table></figure><p>2、创建共享目录，设置共享目录权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /data/nfs</span><br><span class="line"><span class="built_in">chmod</span> -R 777 /data/nfs</span><br></pre></td></tr></table></figure><p>3、配置共享目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># echo &#x27;/data/nfs *(rw,sync,no_root_squash)&#x27; &gt;&gt; /etc/exports</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;/data/nfs *(insecure,rw,sync,no_root_squash)&#x27;</span> &gt;&gt; /etc/exports</span><br></pre></td></tr></table></figure><p>4、启动nfs-server，配置开机自启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># service nfs-kernel-server restart</span></span><br><span class="line">systemctl start nfs-kernel-server</span><br><span class="line">systemctl status nfs-kernel-server</span><br><span class="line">systemctl <span class="built_in">enable</span> nfs-kernel-server</span><br></pre></td></tr></table></figure><p>5、检查nfs状态</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exportfs</span><br><span class="line">rpcinfo -p | grep nfs</span><br></pre></td></tr></table></figure><h2 id="安装nfs-client-1"><span class="post-title-index">3.2.</span><a href="#安装nfs-client-1" class="headerlink" title="安装nfs-client"></a> 安装nfs-client</h2><p>在需要挂载nfs的主机上安装nfs-client，本节中主机IP为192.168.56.104。</p><p>安装nfs-client</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install nfs-common</span><br></pre></td></tr></table></figure><h2 id="测试nfs挂载-1"><span class="post-title-index">3.3.</span><a href="#测试nfs挂载-1" class="headerlink" title="测试nfs挂载"></a> 测试nfs挂载</h2><p>192.168.56.104机器上，测试nfs挂载。</p><p>1、检查103是否有nfs共享目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">showmount -e 192.168.56.103</span><br></pre></td></tr></table></figure><p>2、挂载nfs共享目录到本机</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /data/mntnfs</span><br><span class="line">mount -t nfs 192.168.56.103:/data/nfs /data/mntnfs</span><br></pre></td></tr></table></figure><p>3、测试读写文件<br>104机器读写文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;test&quot;</span> &gt; /data/mntnfs/test.txt</span><br><span class="line"><span class="built_in">cat</span> /data/mntnfs/test.txt</span><br></pre></td></tr></table></figure><p>103机器读文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /data/nfs/test.txt</span><br></pre></td></tr></table></figure><p>4、配置自动挂载</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF | tee -a /etc/fstab</span></span><br><span class="line"><span class="string">192.168.56.103:/data/nfs /data/mntnfs nfs default 0 0</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">mount -a</span><br></pre></td></tr></table></figure><h1 id="NFS高可用"><span class="post-title-index">4.</span><a href="#NFS高可用" class="headerlink" title="NFS高可用"></a> NFS高可用</h1><p>上文中，我们搭建的nfs-server都是单节点的，如果节点挂掉，会造成很多依赖它的软件不可用。如果节点数据丢失，更是一场灾难。因此，生产环境最好搭建nfs高可用环境。</p><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/kevingrace/p/13970193.html">NFS双机热备高可用环境 - 运维笔记</a></li><li><a target="_blank" rel="noopener" href="https://blog.51cto.com/shoufu/2405717">NFS高可用(NFS+keepalive+Sersync)</a></li></ul><h1 id="NFS重叠挂载"><span class="post-title-index">5.</span><a href="#NFS重叠挂载" class="headerlink" title="NFS重叠挂载"></a> NFS重叠挂载</h1><p>已知NFS的共享和挂载情况如下：</p><ul><li>主机1通过NFS对外共享了其本地的 /data 目录。</li><li>主机2通过NFS对外共享了其本地的 /data 目录。</li><li>主机1的 /data/subdata 目录通过NFS挂载了主机2共享的 /data 目录。</li><li>主机3的 /data 目录挂载了主机1共享的 /data 目录。</li></ul><p>当主机3 /data 目录时，如果其访问的路径深入到了/data/subdata，在这种特殊的设置下，主机3实际上通过主机1中的重叠挂载，间接地访问了主机2的/data目录。</p><p>这种场景是通过NFS的转发和重叠挂载功能实现的：</p><ul><li>当主机1收到针对 /data/subdata 目录的NFS请求时，它会将这些请求转发给主机2。</li><li>主机2接收到请求后，会像处理任何NFS请求一样处理这些转发过来的请求，返回相应的数据。</li></ul><p>注意：不是所有的NFS配置都默认支持这种重叠挂载转发行为。某些NFS版本和实现（特别是较早的版本）可能不支持这样的设置或需要特殊的配置参数来启用重叠挂载的转发。例如，NFSv4协议引入了重叠挂载和委托功能的改进，但是在使用时仍然需要注意初始NFS共享和客户端挂载的正确配置。</p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>原文链接：</strong> <a href="https://www.voidking.com/dev-install-nfs-on-linux/" title="Linux中安装NFS">https://www.voidking.com/dev-install-nfs-on-linux/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本文采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议，转载请注明出处！源站会即时更新知识点并修正错误，欢迎访问~</li><li> <img width="200" height="200" src="/images/avatar.jpg"><p style="text-align:center;margin-bottom:0">微信公众号同步更新，欢迎关注~</p></li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/linux/" rel="tag"># linux</a> <a href="/tags/ubuntu/" rel="tag"># ubuntu</a> <a href="/tags/%E5%AD%98%E5%82%A8/" rel="tag"># 存储</a> <a href="/tags/nfs/" rel="tag"># nfs</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-openstack-vm-live-migration/" rel="prev" title="好好学OpenStack：OpenStack中共享存储的虚拟机在线迁移"><i class="fa fa-chevron-left"></i> 好好学OpenStack：OpenStack中共享存储的虚拟机在线迁移</a></div><div class="post-nav-item"> <a href="/dev-virtualbox-ubuntu-extend-storage/" rel="next" title="VirtualBox中Ubuntu扩容">VirtualBox中Ubuntu扩容<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"><ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-3284447971731414" data-ad-slot="9697986181"></ins><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3284447971731414" crossorigin="anonymous"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#NFS%E7%AE%80%E4%BB%8B"><span class="nav-text">1. NFS简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#CentOS%E4%B8%AD%E5%AE%89%E8%A3%85NFS"><span class="nav-text">2. CentOS中安装NFS</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85nfs-server"><span class="nav-text">2.1. 安装nfs-server</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85nfs-client"><span class="nav-text">2.2. 安装nfs-client</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95nfs%E6%8C%82%E8%BD%BD"><span class="nav-text">2.3. 测试nfs挂载</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Ubuntu%E4%B8%AD%E5%AE%89%E8%A3%85NFS"><span class="nav-text">3. Ubuntu中安装NFS</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85nfs-server-1"><span class="nav-text">3.1. 安装nfs-server</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85nfs-client-1"><span class="nav-text">3.2. 安装nfs-client</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95nfs%E6%8C%82%E8%BD%BD-1"><span class="nav-text">3.3. 测试nfs挂载</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#NFS%E9%AB%98%E5%8F%AF%E7%94%A8"><span class="nav-text">4. NFS高可用</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#NFS%E9%87%8D%E5%8F%A0%E6%8C%82%E8%BD%BD"><span class="nav-text">5. NFS重叠挂载</span></a></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">一个计算机技术爱好者与学习者</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">725</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">32</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">255</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2024</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '5a238b8c32b1e4dd2156',
      clientSecret: 'bfb5d518626f6fdc7da0351d1e0cd37ab75c6361',
      repo: 'gitalk-comments',
      owner: 'voidking',
      admin: ['voidking'],
      id: 'c898c95c72c40f7a9aa25259614cfaf2',
      title: 'Linux中安装NFS',
      body: '欢迎留言，互相交流学习~',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></body></html>