<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//cdn.voidking.com/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="ELK简介ELK是一个日志分析平台，它主要由Elasticsearch、Logstash和Kibana三个部分组成。Elasticsearch是一个开源的全文搜索和分析引擎，它可以实现数据的实时全文搜索，可以处理大规模日志数据，比如Nginx、Tomcat、系统日志等功能。Logstash负责日志收集和转发，支持日志过滤，支持普通log、自定义json格式的日志解析。Kibana通过接口调用Ela"><meta property="og:type" content="article"><meta property="og:title" content="CentOS7安装部署ELK"><meta property="og:url" content="https://www.voidking.com/dev-centos7-install-elk/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="ELK简介ELK是一个日志分析平台，它主要由Elasticsearch、Logstash和Kibana三个部分组成。Elasticsearch是一个开源的全文搜索和分析引擎，它可以实现数据的实时全文搜索，可以处理大规模日志数据，比如Nginx、Tomcat、系统日志等功能。Logstash负责日志收集和转发，支持日志过滤，支持普通log、自定义json格式的日志解析。Kibana通过接口调用Ela"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/structure.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/elasticsearch.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/curl.jpg?imageView2/0/w/500"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/kibana.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/welcome.jpg?imageView2/0/w/800"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/sample.jpg?imageView2/0/w/800"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/logstash.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/helloworld.jpg?imageView2/0/w/700"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/hellologstash.jpg?imageView2/0/w/300"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/indices.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/search.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/kibanalogs.jpg?imageView2/0/h/700"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/configuresource.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/kibanainfo.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/update.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/logstash.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/kibanainfo2.jpg?imageView2/0/w/600"><meta property="article:published_time" content="2019-07-26T20:00:00.000Z"><meta property="article:modified_time" content="2022-10-21T10:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="centos"><meta property="article:tag" content="elk"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/structure.jpg?imageView2/0/w/600"><link rel="canonical" href="https://www.voidking.com/dev-centos7-install-elk/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>CentOS7安装部署ELK | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">好好学习，天天向上！</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-centos7-install-elk/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="学而不思则罔，思而不学则殆！"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> CentOS7安装部署ELK</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-07-26 20:00:00" itemprop="dateCreated datePublished" datetime="2019-07-26T20:00:00+00:00">2019-07-26</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-10-21 10:00:00" itemprop="dateModified" datetime="2022-10-21T10:00:00+00:00">2022-10-21</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/devops/" itemprop="url" rel="index"><span itemprop="name">devops</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="ELK简介"><a href="#ELK简介" class="headerlink" title="ELK简介"></a>ELK简介</h1><p>ELK是一个日志分析平台，它主要由Elasticsearch、Logstash和Kibana三个部分组成。<br>Elasticsearch是一个开源的全文搜索和分析引擎，它可以实现数据的实时全文搜索，可以处理大规模日志数据，比如Nginx、Tomcat、系统日志等功能。<br>Logstash负责日志收集和转发，支持日志过滤，支持普通log、自定义json格式的日志解析。<br>Kibana通过接口调用Elasticsearch的数据，并进行前端数据可视化。</p><span id="more"></span><h1 id="部署规划"><a href="#部署规划" class="headerlink" title="部署规划"></a>部署规划</h1><p>计划在三台CentOS7机器上部署ELK，其中一台机器作为ELK的服务节点，IP为192.168.56.101；另外两台作为客户节点，IP为192.168.56.102/103。<br>其中服务节点部署Elasticsearch、Logstash和Kibana三个组件，客户节点部署Logstash。<br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/structure.jpg?imageView2/0/w/600"></p><h1 id="服务节点部署"><a href="#服务节点部署" class="headerlink" title="服务节点部署"></a>服务节点部署</h1><h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><p>默认root用户下操作，其他用户请自觉添加sudo。</p><p>1、安装JDK，参考<a href="https://www.voidking.com/dev-install-jdk-on-all-platforms/">《全平台安装JDK》</a>。</p><p>2、关闭防火墙。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld</span><br></pre></td></tr></table></figure><p>或者设置防火墙规则：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --add-port=9200/tcp --permanent</span><br><span class="line">firewall-cmd --add-port=9300/tcp --permanent</span><br><span class="line">firewall-cmd --add-port=5601/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>3、添加ELK仓库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF | tee /etc/yum.repos.d/elasticsearch.repo</span></span><br><span class="line"><span class="string">[elasticsearch-7.x]</span></span><br><span class="line"><span class="string">name=Elasticsearch repository for 7.x packages</span></span><br><span class="line"><span class="string">baseurl=https://artifacts.elastic.co/packages/7.x/yum</span></span><br><span class="line"><span class="string">gpgcheck=1</span></span><br><span class="line"><span class="string">gpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch</span></span><br><span class="line"><span class="string">enabled=1</span></span><br><span class="line"><span class="string">autorefresh=1</span></span><br><span class="line"><span class="string">type=rpm-md</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><p>4、引入GPG key</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch</span><br></pre></td></tr></table></figure><p>5、更新yum包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure><h2 id="Elasticsearch"><a href="#Elasticsearch" class="headerlink" title="Elasticsearch"></a>Elasticsearch</h2><p>1、安装Elasticsearch</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y elasticsearch</span><br></pre></td></tr></table></figure><p>安装过程中会下载 <a target="_blank" rel="noopener" href="https://artifacts.elastic.co/packages/7.x/yum/7.2.0/elasticsearch-7.2.0-x86_64.rpm">https://artifacts.elastic.co/packages/7.x/yum/7.2.0/elasticsearch-7.2.0-x86_64.rpm</a> ，但是，下载速度非常慢。这里建议通过浏览器下载，然后上传到服务节点上。上传完成后，执行安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh elasticsearch-7.2.0-x86_64.rpm</span><br></pre></td></tr></table></figure><p>提示future versions of Elasticsearch will require Java 11; your Java version does not meet this requirement. 不过没关系，当前版本能用就行。</p><p>2、确认Elasticsearch的安装信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qi elasticsearch</span><br></pre></td></tr></table></figure><p><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/elasticsearch.jpg?imageView2/0/w/600"></p><p>3、启动Elasticsearch并设置开机启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl start elasticsearch</span><br><span class="line">systemctl <span class="built_in">enable</span> elasticsearch</span><br></pre></td></tr></table></figure><p>4、查看Elasticsearch运行状态</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl status elasticsearch</span><br><span class="line">ps -ef | grep elasticsearch</span><br><span class="line">netstat -nlpt</span><br></pre></td></tr></table></figure><p>5、尝试请求</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl localhost:9200</span><br></pre></td></tr></table></figure><p><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/curl.jpg?imageView2/0/w/500"></p><p>6、设置允许其他机器访问<br>当前只能响应本机的请求，想要其他机器也能访问的话，那么需要修改elasticsearch的配置。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/elasticsearch/elasticsearch.yml</span><br></pre></td></tr></table></figure><p>elasticsearch.yml如下修改：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># line 17, uncomment</span></span><br><span class="line"><span class="attr">cluster.name:</span> <span class="string">my-application</span></span><br><span class="line"><span class="comment"># line 22, uncomment and change</span></span><br><span class="line"><span class="attr">node.name:</span> <span class="string">master</span></span><br><span class="line"><span class="comment"># line 55, uncomment and change</span></span><br><span class="line"><span class="attr">network.host:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line"><span class="comment"># line 59, uncomment</span></span><br><span class="line"><span class="attr">ttp.port:</span> <span class="number">9200</span></span><br><span class="line"><span class="comment"># line 72, uncomment and change</span></span><br><span class="line"><span class="attr">cluster.initial_master_nodes:</span> [<span class="string">&quot;master&quot;</span>, <span class="string">&quot;node-2&quot;</span>]</span><br></pre></td></tr></table></figure><p>7、重启Elasticsearch</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop elasticsearch</span><br><span class="line">systemctl start elasticsearch</span><br><span class="line"><span class="comment"># 启动后稍等一会</span></span><br><span class="line">netstat -nlpt</span><br></pre></td></tr></table></figure><p>如果可以看到<code>:::9200</code>，就可以通过外部浏览器访问Elasticsearch服务了，至此Elasticsearch安装配置完成。</p><h2 id="Kibana"><a href="#Kibana" class="headerlink" title="Kibana"></a>Kibana</h2><p>1、安装Kibana</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y kibana</span><br></pre></td></tr></table></figure><p>同样的，如果下载速度缓慢，那么可以通过浏览器下载 <a target="_blank" rel="noopener" href="https://artifacts.elastic.co/packages/7.x/yum/7.2.0/kibana-7.2.0-x86_64.rpm">https://artifacts.elastic.co/packages/7.x/yum/7.2.0/kibana-7.2.0-x86_64.rpm</a> ，然后上传到服务节点，上传后执行安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh kibana-7.2.0-x86_64.rpm</span><br></pre></td></tr></table></figure><p>2、确认Kibana的安装信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qi kibana</span><br></pre></td></tr></table></figure><p><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/kibana.jpg?imageView2/0/w/600"></p><p>3、启动Kibana并设置开机启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start kibana</span><br><span class="line">systemctl <span class="built_in">enable</span> kibana</span><br></pre></td></tr></table></figure><p>4、查看Kibana运行状态</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl status kibana</span><br><span class="line">ps -ef | grep kibana</span><br><span class="line">netstat -nlpt</span><br></pre></td></tr></table></figure><p>5、测试访问</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl localhost:5601 -L</span><br></pre></td></tr></table></figure><p>6、设置允许其他机器访问</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/kibana/kibana.yml</span><br></pre></td></tr></table></figure><p>kibana.yml如下修改：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># line 2, uncomment and change</span></span><br><span class="line"><span class="attr">server.port:</span> <span class="number">5601</span></span><br><span class="line"><span class="comment"># line 7, uncomment and change</span></span><br><span class="line"><span class="attr">server.host:</span> <span class="string">&quot;0.0.0.0&quot;</span></span><br><span class="line"><span class="comment"># line 28, uncomment</span></span><br><span class="line"><span class="attr">elasticsearch.hosts:</span> [<span class="string">&quot;http://localhost:9200&quot;</span>]</span><br></pre></td></tr></table></figure><p>7、重启Kibana</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop kibana</span><br><span class="line">systemctl start kibana</span><br><span class="line"><span class="comment"># 启动后稍等一会</span></span><br><span class="line">netstat -nlpt</span><br></pre></td></tr></table></figure><p>如果可以看到<code>0.0.0.0:5601</code>，就可以通过外部浏览器访问Kibana服务了，至此Kibana安装配置完成。<br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/welcome.jpg?imageView2/0/w/800"><br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/sample.jpg?imageView2/0/w/800"></p><h2 id="Logstash"><a href="#Logstash" class="headerlink" title="Logstash"></a>Logstash</h2><p>1、安装Logstash</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y logstash</span><br></pre></td></tr></table></figure><p>也可以通过浏览器下载 <a target="_blank" rel="noopener" href="https://artifacts.elastic.co/packages/7.x/yum/7.2.0/logstash-7.2.0.rpm">https://artifacts.elastic.co/packages/7.x/yum/7.2.0/logstash-7.2.0.rpm</a> ，然后上传到服务节点，上传后执行安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh logstash-7.2.0.rpm</span><br></pre></td></tr></table></figure><p>2、确认Logstash的安装信息<br><code>rpm -qi logstash</code><br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/logstash.jpg?imageView2/0/w/600"></p><p>3、启动Logstash</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start logstash</span><br></pre></td></tr></table></figure><p>4、查看Logstash运行状态</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl status logstash</span><br><span class="line">ps -ef | grep logstash</span><br><span class="line">netstat -nlpt</span><br></pre></td></tr></table></figure><p>启动成功了，然后呢？怎么使用？</p><p>5、Logstash hello world</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop logstash</span><br><span class="line">/usr/share/logstash/bin/logstash -e <span class="string">&#x27;input &#123; stdin &#123; &#125; &#125; output &#123; stdout &#123;&#125; &#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>输入启动命令后，耐心等待服务启动，直到出现Successfully started Logstash API endpoint。输入“hello world”回车，即可打印出输出。<br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/helloworld.jpg?imageView2/0/w/700"><br>logstash通过管道来处理数据，标准的管道包含input、filter和output。以上命令，指定了一个管道的参数，没有filter，input是控制台标准输入，output是控制台标准输出。</p><p>6、管道配置写入文件<br>新建配置文件std.conf，内容为：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">input &#123; </span><br><span class="line">    stdin &#123; &#125; </span><br><span class="line">&#125; </span><br><span class="line">output &#123; </span><br><span class="line">    stdout &#123;&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>7、测试配置文件并启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/logstash/bin/logstash -f ~/std.conf --config.test_and_exit</span><br><span class="line">/usr/share/logstash/bin/logstash -f ~/std.conf</span><br></pre></td></tr></table></figure><p>8、从文件中读取信息<br>（1）新建/usr/local/test.log文件，内容为：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello logstash!</span><br></pre></td></tr></table></figure><p>（2）新建test.conf，内容为：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">    file &#123;</span><br><span class="line">        path =&gt; [&quot;/usr/local/test.log&quot;]</span><br><span class="line">        sincedb_path =&gt; &quot;/dev/null&quot;</span><br><span class="line">        start_position =&gt; &quot;beginning&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">filter &#123;</span><br><span class="line">&#125;</span><br><span class="line">output &#123;</span><br><span class="line">    stdout &#123;</span><br><span class="line">        codec =&gt; rubydebug</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>（3）启动Logstash</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/logstash/bin/logstash -f ~/test.conf</span><br></pre></td></tr></table></figure><p><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/hellologstash.jpg?imageView2/0/w/300"></p><p>9、写入信息到文件<br>（1）修改test.conf为：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">    file &#123;</span><br><span class="line">        path =&gt; [&quot;/usr/local/test.log&quot;]</span><br><span class="line">        sincedb_path =&gt; &quot;/dev/null&quot;</span><br><span class="line">        start_position =&gt; &quot;beginning&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">filter &#123;</span><br><span class="line">&#125;</span><br><span class="line">output &#123;</span><br><span class="line">    file &#123;</span><br><span class="line">        path =&gt; [&quot;/usr/local/test.log.out&quot;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>（2）启动Logstash</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/logstash/bin/logstash -f ~/test.conf</span><br></pre></td></tr></table></figure><p>启动后，/usr/local/目录下多了test.log.out文件。</p><h2 id="数据传递"><a href="#数据传递" class="headerlink" title="数据传递"></a>数据传递</h2><p>Logstash收集到了数据，怎样传递给Elasticsearch显示？怎样传递给Kibana显示？<br>1、修改test.conf为：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">    file &#123;</span><br><span class="line">        path =&gt; [&quot;/usr/local/test.log&quot;]</span><br><span class="line">        sincedb_path =&gt; &quot;/dev/null&quot;</span><br><span class="line">        start_position =&gt; &quot;beginning&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">filter &#123;</span><br><span class="line">&#125;</span><br><span class="line">output &#123;</span><br><span class="line">    elasticsearch &#123;</span><br><span class="line">        hosts =&gt; [&quot;http://localhost:9200&quot;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2、启动Logstash</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/logstash/bin/logstash -f ~/test.conf</span><br></pre></td></tr></table></figure><p>3、查看索引<br>浏览器访问 <a target="_blank" rel="noopener" href="http://192.168.56.101:9200/_cat/indices?v">http://192.168.56.101:9200/_cat/indices?v</a><br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/indices.jpg?imageView2/0/w/600"><br>其中有个索引是logstash的，这就是我们想要查看的数据索引。</p><p>4、查看数据<br>浏览器访问 <a target="_blank" rel="noopener" href="http://192.168.56.101:9200/logstash-2019.07.24-000001/_search">http://192.168.56.101:9200/logstash-2019.07.24-000001/_search</a><br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/search.jpg?imageView2/0/w/600"><br>看到了hello logstash!，说明数据已经成功传递到了Elasticsearch。链接后添加?pretty参数，可以进行格式化显示。</p><p>5、Kibana添加indices<br>浏览器访问Kibana <a target="_blank" rel="noopener" href="http://192.168.56.101:5601/">http://192.168.56.101:5601</a><br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/kibanalogs.jpg?imageView2/0/h/700"><br>点击页面上的Logs，然后填写indices相关信息。<br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/configuresource.jpg?imageView2/0/w/600"><br>最后点击Update Source，即可在页面上看到Logstash传递的信息。<br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/kibanainfo.jpg?imageView2/0/w/600"></p><p>6、修改test.log<br>修改test.log为：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hello logstash!</span><br><span class="line">the log has been updated.</span><br></pre></td></tr></table></figure><p>再次查看Kibana的日志显示，可以看到更新。<br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/update.jpg?imageView2/0/w/600"></p><h1 id="客户节点部署"><a href="#客户节点部署" class="headerlink" title="客户节点部署"></a>客户节点部署</h1><h2 id="环境准备-1"><a href="#环境准备-1" class="headerlink" title="环境准备"></a>环境准备</h2><p>默认root用户下操作，其他用户请自觉添加sudo。</p><p>1、安装JDK。</p><p>2、关闭防火墙。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld</span><br></pre></td></tr></table></figure><p>3、添加ELK仓库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF | tee /etc/yum.repos.d/elasticsearch.repo</span></span><br><span class="line"><span class="string">[elasticsearch-7.x]</span></span><br><span class="line"><span class="string">name=Elasticsearch repository for 7.x packages</span></span><br><span class="line"><span class="string">baseurl=https://artifacts.elastic.co/packages/7.x/yum</span></span><br><span class="line"><span class="string">gpgcheck=1</span></span><br><span class="line"><span class="string">gpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch</span></span><br><span class="line"><span class="string">enabled=1</span></span><br><span class="line"><span class="string">autorefresh=1</span></span><br><span class="line"><span class="string">type=rpm-md</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><p>4、引入GPG key</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch</span><br></pre></td></tr></table></figure><p>5、更新yum包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure><h2 id="Logstash-1"><a href="#Logstash-1" class="headerlink" title="Logstash"></a>Logstash</h2><p>1、安装Logstash</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y logstash</span><br></pre></td></tr></table></figure><p>也可以通过浏览器下载 <a target="_blank" rel="noopener" href="https://artifacts.elastic.co/packages/7.x/yum/7.2.0/logstash-7.2.0.rpm">https://artifacts.elastic.co/packages/7.x/yum/7.2.0/logstash-7.2.0.rpm</a> ，然后上传到服务节点，上传后执行安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh logstash-7.2.0.rpm</span><br></pre></td></tr></table></figure><p>2、确认Logstash的安装信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qi logstash</span><br></pre></td></tr></table></figure><p><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/logstash.jpg?imageView2/0/w/600"></p><p>3、创建测试文件<br>新建配置文件test.conf，内容为：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">    file &#123;</span><br><span class="line">        path =&gt; [&quot;/usr/local/test.log&quot;]</span><br><span class="line">        sincedb_path =&gt; &quot;/dev/null&quot;</span><br><span class="line">        start_position =&gt; &quot;beginning&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">filter &#123;</span><br><span class="line">&#125;</span><br><span class="line">output &#123;</span><br><span class="line">    elasticsearch &#123;</span><br><span class="line">        hosts =&gt; [&quot;http://192.168.56.101:9200&quot;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>新建/usr/local/test.log，内容为：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this is a log recorded by 102</span><br></pre></td></tr></table></figure><p>4、启动logstash</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/logstash/bin/logstash -f ~/test.conf</span><br></pre></td></tr></table></figure><p>5、在Kibana查看日志<br>刷新Kibana，即可看到客户节点的日志。<br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/kibanainfo2.jpg?imageView2/0/w/600"></p><h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>以上，完成了ELK的基本安装配置，实现了一个最简单的架构。Logstash收集数据，传递给Elasticsearch，然后Kibana显示Elasticsearch中的数据。更多关于ELK的内容，后续会继续学习。</p><h1 id="书签"><a href="#书签" class="headerlink" title="书签"></a>书签</h1><ul><li><a target="_blank" rel="noopener" href="https://computingforgeeks.com/how-to-install-elk-stack-on-centos-fedora/">How to Install ELK Stack on CentOS 7</a></li><li><a target="_blank" rel="noopener" href="https://www.elastic.co/cn/blog/a-practical-introduction-to-logstash">Logstash 实用介绍</a></li><li><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/logstash/current/getting-started-with-logstash.html">Getting Started with Logstash</a></li><li><a target="_blank" rel="noopener" href="https://www.ihaiyun.cc/2018/06/28/ELK/">开源日志实时分析平台ELK</a></li><li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/qingqing74647464/p/9378385.html">logstash的各个场景应用（配置文件均已实践过）</a></li><li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/cjsblog/p/9459781.html">Logstash介绍</a></li><li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/cheesebar/p/9126171.html">在 CentOS7 安装 ELK</a></li><li><a target="_blank" rel="noopener" href="https://blog.51cto.com/lingxudong/2397209">ELK-7.0安装部署收集展示</a></li><li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/e7362ccfe7e3">ELK部署安装以及配置</a></li><li><a target="_blank" rel="noopener" href="https://www.elastic.co/cn/learn">Learn About the Elastic Stack</a></li><li><a target="_blank" rel="noopener" href="https://elasticsearch.cn/">Elastic 中文社区</a></li><li><a target="_blank" rel="noopener" href="https://yq.aliyun.com/articles/435986">Elastic中文社区运维监控实战之架构篇</a></li><li><a target="_blank" rel="noopener" href="https://yq.aliyun.com/articles/261432">从零开始搭建ELK+GPE监控预警系统</a></li><li><a target="_blank" rel="noopener" href="https://www.bookstack.cn/read/ELKstack-guide-cn/README.md">《ELK Stack 中文指南》</a></li><li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/22400290?from_voters_page=true">ELK不权威指南</a></li><li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/eedb3c948543">零代码如何打造自己的实时监控预警系统</a></li><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/boling_cavalry/article/details/79950677">Docker下ELK三部曲之一：极速体验</a></li></ul></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.voidking.com/dev-centos7-install-elk/" title="CentOS7安装部署ELK">https://www.voidking.com/dev-centos7-install-elk/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！源站会及时更新知识点及修正错误，阅读体验也更好。欢迎分享，欢迎收藏~</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/centos/" rel="tag"># centos</a> <a href="/tags/elk/" rel="tag"># elk</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-centos7-change-repo/" rel="prev" title="CentOS7更换软件安装源"><i class="fa fa-chevron-left"></i> CentOS7更换软件安装源</a></div><div class="post-nav-item"> <a href="/dev-elk-with-filebeat/" rel="next" title="ELK配置FileBeat">ELK配置FileBeat<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"><ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-3284447971731414" data-ad-slot="9697986181"></ins><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3284447971731414" crossorigin="anonymous"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ELK%E7%AE%80%E4%BB%8B"><span class="nav-number">1.</span> <span class="nav-text">ELK简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2%E8%A7%84%E5%88%92"><span class="nav-number">2.</span> <span class="nav-text">部署规划</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2"><span class="nav-number">3.</span> <span class="nav-text">服务节点部署</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="nav-number">3.1.</span> <span class="nav-text">环境准备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Elasticsearch"><span class="nav-number">3.2.</span> <span class="nav-text">Elasticsearch</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Kibana"><span class="nav-number">3.3.</span> <span class="nav-text">Kibana</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Logstash"><span class="nav-number">3.4.</span> <span class="nav-text">Logstash</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92"><span class="nav-number">3.5.</span> <span class="nav-text">数据传递</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%A2%E6%88%B7%E8%8A%82%E7%82%B9%E9%83%A8%E7%BD%B2"><span class="nav-number">4.</span> <span class="nav-text">客户节点部署</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87-1"><span class="nav-number">4.1.</span> <span class="nav-text">环境准备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Logstash-1"><span class="nav-number">4.2.</span> <span class="nav-text">Logstash</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%8E%E8%AE%B0"><span class="nav-number">5.</span> <span class="nav-text">后记</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B9%A6%E7%AD%BE"><span class="nav-number">6.</span> <span class="nav-text">书签</span></a></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">学而不思则罔，思而不学则殆！</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">647</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">29</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">242</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2023</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '5a238b8c32b1e4dd2156',
      clientSecret: 'bfb5d518626f6fdc7da0351d1e0cd37ab75c6361',
      repo: 'gitalk-comments',
      owner: 'voidking',
      admin: ['voidking'],
      id: 'cc1855b697da519de163327cd84be04a',
      title: 'CentOS7安装部署ELK',
      body: '欢迎留言，互相交流学习~',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></body></html>