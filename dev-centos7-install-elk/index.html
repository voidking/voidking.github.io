<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.1"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="ELK简介ELK是一个日志分析平台，它主要由Elasticsearch、Logstash和Kibana三个部分组成。Elasticsearch是一个开源的全文搜索和分析引擎，它可以实现数据的实时全文搜索，可以处理大规模日志数据，比如Nginx、Tomcat、系统日志等功能。Logstash负责日志收集和转发，支持日志过滤，支持普通log、自定义json格式的日志解析。Kibana通过接口调用Ela"><meta property="og:type" content="article"><meta property="og:title" content="CentOS7安装部署ELK"><meta property="og:url" content="https://www.voidking.com/dev-centos7-install-elk/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="ELK简介ELK是一个日志分析平台，它主要由Elasticsearch、Logstash和Kibana三个部分组成。Elasticsearch是一个开源的全文搜索和分析引擎，它可以实现数据的实时全文搜索，可以处理大规模日志数据，比如Nginx、Tomcat、系统日志等功能。Logstash负责日志收集和转发，支持日志过滤，支持普通log、自定义json格式的日志解析。Kibana通过接口调用Ela"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/structure.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/elasticsearch.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/curl.jpg?imageView2/0/w/500"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/kibana.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/welcome.jpg?imageView2/0/w/800"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/sample.jpg?imageView2/0/w/800"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/logstash.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/helloworld.jpg?imageView2/0/w/700"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/hellologstash.jpg?imageView2/0/w/300"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/indices.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/search.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/kibanalogs.jpg?imageView2/0/h/700"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/configuresource.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/kibanainfo.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/update.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/logstash.jpg?imageView2/0/w/600"><meta property="og:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/kibanainfo2.jpg?imageView2/0/w/600"><meta property="article:published_time" content="2019-07-26T20:00:00.000Z"><meta property="article:modified_time" content="2021-04-11T16:02:02.769Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="linux"><meta property="article:tag" content="centos"><meta property="article:tag" content="elk"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://cdn.voidking.com/@/imgs/centos7-install-elk/structure.jpg?imageView2/0/w/600"><link rel="canonical" href="https://www.voidking.com/dev-centos7-install-elk/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>CentOS7安装部署ELK | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">好好学习，天天向上！</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-centos7-install-elk/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="学而不思则罔，思而不学则殆！"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> CentOS7安装部署ELK</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-07-26 20:00:00" itemprop="dateCreated datePublished" datetime="2019-07-26T20:00:00+00:00">2019-07-26</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/" itemprop="url" rel="index"><span itemprop="name">专业</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/%E8%BF%90%E7%BB%B4/" itemprop="url" rel="index"><span itemprop="name">运维</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/%E8%BF%90%E7%BB%B4/centos/" itemprop="url" rel="index"><span itemprop="name">centos</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="ELK简介"><a href="#ELK简介" class="headerlink" title="ELK简介"></a>ELK简介</h1><p>ELK是一个日志分析平台，它主要由Elasticsearch、Logstash和Kibana三个部分组成。<br>Elasticsearch是一个开源的全文搜索和分析引擎，它可以实现数据的实时全文搜索，可以处理大规模日志数据，比如Nginx、Tomcat、系统日志等功能。<br>Logstash负责日志收集和转发，支持日志过滤，支持普通log、自定义json格式的日志解析。<br>Kibana通过接口调用Elasticsearch的数据，并进行前端数据可视化。</p><a id="more"></a><h1 id="部署规划"><a href="#部署规划" class="headerlink" title="部署规划"></a>部署规划</h1><p>计划在三台CentOS7机器上部署ELK，其中一台机器作为ELK的服务节点，IP为192.168.56.101；另外两台作为客户节点，IP为192.168.56.102/103。<br>其中服务节点部署Elasticsearch、Logstash和Kibana三个组件，客户节点部署Logstash。<br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/structure.jpg?imageView2/0/w/600" alt=""></p><h1 id="服务节点部署"><a href="#服务节点部署" class="headerlink" title="服务节点部署"></a>服务节点部署</h1><h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><p>默认root用户下操作，其他用户请自觉添加sudo。</p><p>1、安装JDK，参考<a href="">《全平台安装JDK》</a>。</p><p>2、关闭防火墙。</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="keyword">stop</span> firewalld</span><br><span class="line">systemctl <span class="keyword">disable</span> firewalld</span><br></pre></td></tr></table></figure><p>或者设置防火墙规则：</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">firewall-<span class="keyword">cmd</span><span class="bash"> --add-port=9200/tcp --permanent</span></span><br><span class="line">firewall-<span class="keyword">cmd</span><span class="bash"> --add-port=9300/tcp --permanent</span></span><br><span class="line">firewall-<span class="keyword">cmd</span><span class="bash"> --add-port=5601/tcp --permanent</span></span><br><span class="line">firewall-<span class="keyword">cmd</span><span class="bash"> --reload</span></span><br></pre></td></tr></table></figure><p>3、添加ELK仓库</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOF | tee /etc/yum.repos.d/elasticsearch.repo</span><br><span class="line">[elasticsearch-7.x]</span><br><span class="line"><span class="attribute">name</span>=Elasticsearch repository <span class="keyword">for</span> 7.x packages</span><br><span class="line"><span class="attribute">baseurl</span>=https://artifacts.elastic.co/packages/7.x/yum</span><br><span class="line"><span class="attribute">gpgcheck</span>=1</span><br><span class="line"><span class="attribute">gpgkey</span>=https://artifacts.elastic.co/GPG-KEY-elasticsearch</span><br><span class="line"><span class="attribute">enabled</span>=1</span><br><span class="line"><span class="attribute">autorefresh</span>=1</span><br><span class="line"><span class="attribute">type</span>=rpm-md</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p>4、引入GPG key<br><code>rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch</code></p><p>5、更新yum包</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">yum</span> <span class="string">clean all</span></span><br><span class="line"><span class="attr">yum</span> <span class="string">makecache</span></span><br></pre></td></tr></table></figure><h2 id="Elasticsearch"><a href="#Elasticsearch" class="headerlink" title="Elasticsearch"></a>Elasticsearch</h2><p>1、安装Elasticsearch<br><code>yum install -y elasticsearch</code><br>安装过程中会下载 <a href="https://artifacts.elastic.co/packages/7.x/yum/7.2.0/elasticsearch-7.2.0-x86_64.rpm" target="_blank" rel="noopener">https://artifacts.elastic.co/packages/7.x/yum/7.2.0/elasticsearch-7.2.0-x86_64.rpm</a> ，但是，下载速度非常慢。这里建议通过浏览器下载，然后上传到服务节点上。上传完成后，执行安装：<br><code>rpm -ivh elasticsearch-7.2.0-x86_64.rpm</code><br>提示future versions of Elasticsearch will require Java 11; your Java version does not meet this requirement. 不过没关系，当前版本能用就行。</p><p>2、确认Elasticsearch的安装信息<br><code>rpm -qi elasticsearch</code><br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/elasticsearch.jpg?imageView2/0/w/600" alt=""></p><p>3、启动Elasticsearch并设置开机启动</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">systemctl</span> <span class="string">daemon-reload</span></span><br><span class="line"><span class="attr">systemctl</span> <span class="string">start elasticsearch</span></span><br><span class="line"><span class="attr">systemctl</span> <span class="string">enable elasticsearch</span></span><br></pre></td></tr></table></figure><p>4、查看Elasticsearch运行状态</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">systemctl</span> <span class="string">status elasticsearch</span></span><br><span class="line"><span class="attr">ps</span> <span class="string">-ef | grep elasticsearch</span></span><br><span class="line"><span class="attr">netstat</span> <span class="string">-nlpt</span></span><br></pre></td></tr></table></figure><p>5、尝试请求<br><code>curl localhost:9200</code><br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/curl.jpg?imageView2/0/w/500" alt=""></p><p>6、设置允许其他机器访问<br>当前只能响应本机的请求，想要其他机器也能访问的话，那么需要修改elasticsearch的配置。<code>vim /etc/elasticsearch/elasticsearch.yml</code>，如下修改：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># line 17, uncomment</span></span><br><span class="line"><span class="attr">cluster.name:</span> <span class="string">my-application</span></span><br><span class="line"><span class="comment"># line 22, uncomment and change</span></span><br><span class="line"><span class="attr">node.name:</span> <span class="string">master</span></span><br><span class="line"><span class="comment"># line 55, uncomment and change</span></span><br><span class="line"><span class="attr">network.host:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line"><span class="comment"># line 59, uncomment</span></span><br><span class="line"><span class="attr">ttp.port:</span> <span class="number">9200</span></span><br><span class="line"><span class="comment"># line 72, uncomment and change</span></span><br><span class="line"><span class="attr">cluster.initial_master_nodes:</span> <span class="string">["master",</span> <span class="string">"node-2"</span><span class="string">]</span></span><br></pre></td></tr></table></figure><p>7、重启Elasticsearch</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">systemctl</span> <span class="string">stop elasticsearch</span></span><br><span class="line"><span class="attr">systemctl</span> <span class="string">start elasticsearch</span></span><br><span class="line"><span class="comment"># 启动后稍等一会</span></span><br><span class="line"><span class="attr">netstat</span> <span class="string">-nlpt</span></span><br></pre></td></tr></table></figure><p>如果可以看到<code>:::9200</code>，就可以通过外部浏览器访问Elasticsearch服务了，至此Elasticsearch安装配置完成。</p><h2 id="Kibana"><a href="#Kibana" class="headerlink" title="Kibana"></a>Kibana</h2><p>1、安装Kibana<br><code>yum install -y kibana</code><br>同样的，如果下载速度缓慢，那么可以通过浏览器下载 <a href="https://artifacts.elastic.co/packages/7.x/yum/7.2.0/kibana-7.2.0-x86_64.rpm" target="_blank" rel="noopener">https://artifacts.elastic.co/packages/7.x/yum/7.2.0/kibana-7.2.0-x86_64.rpm</a> ，然后上传到服务节点，上传后执行安装：<br><code>rpm -ivh kibana-7.2.0-x86_64.rpm</code></p><p>2、确认Kibana的安装信息<br><code>rpm -qi kibana</code><br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/kibana.jpg?imageView2/0/w/600" alt=""></p><p>3、启动Kibana并设置开机启动</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="keyword">start</span> kibana</span><br><span class="line">systemctl <span class="keyword">enable</span> kibana</span><br></pre></td></tr></table></figure><p>4、查看Kibana运行状态</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">systemctl</span> <span class="string">status kibana</span></span><br><span class="line"><span class="attr">ps</span> <span class="string">-ef | grep kibana</span></span><br><span class="line"><span class="attr">netstat</span> <span class="string">-nlpt</span></span><br></pre></td></tr></table></figure><p>5、测试访问<br><code>curl localhost:5601 -L</code></p><p>6、设置允许其他机器访问<br><code>vim /etc/kibana/kibana.yml</code>，如下修改：</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># <span class="built_in">line</span> <span class="number">2</span>, uncomment <span class="built_in">and</span> <span class="keyword">change</span></span><br><span class="line">server.por<span class="variable">t:</span> <span class="number">5601</span></span><br><span class="line"># <span class="built_in">line</span> <span class="number">7</span>, uncomment <span class="built_in">and</span> <span class="keyword">change</span></span><br><span class="line">server.hos<span class="variable">t:</span> <span class="string">"0.0.0.0"</span></span><br><span class="line"># <span class="built_in">line</span> <span class="number">28</span>, uncomment</span><br><span class="line">elasticsearch.host<span class="variable">s:</span> [<span class="string">"http://localhost:9200"</span>]</span><br></pre></td></tr></table></figure><p>7、重启Kibana</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">systemctl</span> <span class="string">stop kibana</span></span><br><span class="line"><span class="attr">systemctl</span> <span class="string">start kibana</span></span><br><span class="line"><span class="comment"># 启动后稍等一会</span></span><br><span class="line"><span class="attr">netstat</span> <span class="string">-nlpt</span></span><br></pre></td></tr></table></figure><p>如果可以看到<code>0.0.0.0:5601</code>，就可以通过外部浏览器访问Kibana服务了，至此Kibana安装配置完成。<br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/welcome.jpg?imageView2/0/w/800" alt=""><br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/sample.jpg?imageView2/0/w/800" alt=""></p><h2 id="Logstash"><a href="#Logstash" class="headerlink" title="Logstash"></a>Logstash</h2><p>1、安装Logstash<br><code>yum install -y logstash</code><br>也可以通过浏览器下载 <a href="https://artifacts.elastic.co/packages/7.x/yum/7.2.0/logstash-7.2.0.rpm" target="_blank" rel="noopener">https://artifacts.elastic.co/packages/7.x/yum/7.2.0/logstash-7.2.0.rpm</a> ，然后上传到服务节点，上传后执行安装：<br><code>rpm -ivh logstash-7.2.0.rpm</code></p><p>2、确认Logstash的安装信息<br><code>rpm -qi logstash</code><br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/logstash.jpg?imageView2/0/w/600" alt=""></p><p>3、启动Logstash</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="literal">start</span> logstash</span><br></pre></td></tr></table></figure><p>4、查看Logstash运行状态</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">systemctl</span> <span class="string">status logstash</span></span><br><span class="line"><span class="attr">ps</span> <span class="string">-ef | grep logstash</span></span><br><span class="line"><span class="attr">netstat</span> <span class="string">-nlpt</span></span><br></pre></td></tr></table></figure><p>启动成功了，然后呢？怎么使用？</p><p>5、Logstash hello world</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="keyword">stop</span> logstash</span><br><span class="line">/usr/<span class="keyword">share</span>/logstash/<span class="keyword">bin</span>/logstash -e <span class="string">'input &#123; stdin &#123; &#125; &#125; output &#123; stdout &#123;&#125; &#125;'</span></span><br></pre></td></tr></table></figure><p>输入启动命令后，耐心等待服务启动，直到出现Successfully started Logstash API endpoint。输入“hello world”回车，即可打印出输出。<br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/helloworld.jpg?imageView2/0/w/700" alt=""><br>logstash通过管道来处理数据，标准的管道包含input、filter和output。以上命令，指定了一个管道的参数，没有filter，input是控制台标准输入，output是控制台标准输出。</p><p>6、管道配置写入文件<br>新建配置文件std.conf，内容为：</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">input </span>&#123; </span><br><span class="line">    <span class="class">stdin </span>&#123; &#125; </span><br><span class="line">&#125; </span><br><span class="line"><span class="class">output </span>&#123; </span><br><span class="line">    <span class="class">stdout </span>&#123;&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>7、测试配置文件并启动</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>share<span class="regexp">/logstash/</span>bin<span class="regexp">/logstash -f ~/</span>std.conf --config.test_and_exit</span><br><span class="line"><span class="regexp">/usr/</span>share<span class="regexp">/logstash/</span>bin<span class="regexp">/logstash -f ~/</span>std.conf</span><br></pre></td></tr></table></figure><p>8、从文件中读取信息<br>（1）新建/usr/local/test.log文件，内容为：</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello logstash!</span><br></pre></td></tr></table></figure><p>（2）新建test.conf，内容为：</p><figure class="highlight puppet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">input</span> &#123;</span><br><span class="line">    file &#123;</span><br><span class="line">        <span class="attr">path</span> =&gt; [<span class="string">"/usr/local/test.log"</span>]</span><br><span class="line">        <span class="attr">sincedb_path</span> =&gt; <span class="string">"/dev/null"</span></span><br><span class="line">        <span class="attr">start_position</span> =&gt; <span class="string">"beginning"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">filter</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">output</span> &#123;</span><br><span class="line">    stdout &#123;</span><br><span class="line">        <span class="attr">codec</span> =&gt; rubydebug</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>（3）启动Logstash<br><code>/usr/share/logstash/bin/logstash -f ~/test.conf</code><br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/hellologstash.jpg?imageView2/0/w/300" alt=""></p><p>9、写入信息到文件<br>（1）修改test.conf为：</p><figure class="highlight puppet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">input</span> &#123;</span><br><span class="line">    file &#123;</span><br><span class="line">        <span class="attr">path</span> =&gt; [<span class="string">"/usr/local/test.log"</span>]</span><br><span class="line">        <span class="attr">sincedb_path</span> =&gt; <span class="string">"/dev/null"</span></span><br><span class="line">        <span class="attr">start_position</span> =&gt; <span class="string">"beginning"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">filter</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">output</span> &#123;</span><br><span class="line">    file &#123;</span><br><span class="line">        <span class="attr">path</span> =&gt; [<span class="string">"/usr/local/test.log.out"</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>（2）启动Logstash<br><code>/usr/share/logstash/bin/logstash -f ~/test.conf</code><br>启动后，/usr/local/目录下多了test.log.out文件。</p><h2 id="数据传递"><a href="#数据传递" class="headerlink" title="数据传递"></a>数据传递</h2><p>Logstash收集到了数据，怎样传递给Elasticsearch显示？怎样传递给Kibana显示？<br>1、修改test.conf为：</p><figure class="highlight puppet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">input</span> &#123;</span><br><span class="line">    file &#123;</span><br><span class="line">        <span class="attr">path</span> =&gt; [<span class="string">"/usr/local/test.log"</span>]</span><br><span class="line">        <span class="attr">sincedb_path</span> =&gt; <span class="string">"/dev/null"</span></span><br><span class="line">        <span class="attr">start_position</span> =&gt; <span class="string">"beginning"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">filter</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">output</span> &#123;</span><br><span class="line">    elasticsearch &#123;</span><br><span class="line">        <span class="attr">hosts</span> =&gt; [<span class="string">"http://localhost:9200"</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2、启动Logstash<br><code>/usr/share/logstash/bin/logstash -f ~/test.conf</code></p><p>3、查看索引<br>浏览器访问 <a href="http://192.168.56.101:9200/_cat/indices?v" target="_blank" rel="noopener">http://192.168.56.101:9200/_cat/indices?v</a><br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/indices.jpg?imageView2/0/w/600" alt=""><br>其中有个索引是logstash的，这就是我们想要查看的数据索引。</p><p>4、查看数据<br>浏览器访问 <a href="http://192.168.56.101:9200/logstash-2019.07.24-000001/_search" target="_blank" rel="noopener">http://192.168.56.101:9200/logstash-2019.07.24-000001/_search</a><br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/search.jpg?imageView2/0/w/600" alt=""><br>看到了hello logstash!，说明数据已经成功传递到了Elasticsearch。链接后添加?pretty参数，可以进行格式化显示。</p><p>5、Kibana添加indices<br>浏览器访问Kibana <a href="http://192.168.56.101:5601" target="_blank" rel="noopener">http://192.168.56.101:5601</a><br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/kibanalogs.jpg?imageView2/0/h/700" alt=""><br>点击页面上的Logs，然后填写indices相关信息。<br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/configuresource.jpg?imageView2/0/w/600" alt=""><br>最后点击Update Source，即可在页面上看到Logstash传递的信息。<br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/kibanainfo.jpg?imageView2/0/w/600" alt=""></p><p>6、修改test.log<br>修改test.log为：</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hello logstash!</span><br><span class="line"><span class="keyword">the</span> <span class="built_in">log</span> has been updated.</span><br></pre></td></tr></table></figure><p>再次查看Kibana的日志显示，可以看到更新。<br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/update.jpg?imageView2/0/w/600" alt=""></p><h1 id="客户节点部署"><a href="#客户节点部署" class="headerlink" title="客户节点部署"></a>客户节点部署</h1><h2 id="环境准备-1"><a href="#环境准备-1" class="headerlink" title="环境准备"></a>环境准备</h2><p>默认root用户下操作，其他用户请自觉添加sudo。</p><p>1、安装JDK。</p><p>2、关闭防火墙。</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="keyword">stop</span> firewalld</span><br><span class="line">systemctl <span class="keyword">disable</span> firewalld</span><br></pre></td></tr></table></figure><p>3、添加ELK仓库</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOF | tee /etc/yum.repos.d/elasticsearch.repo</span><br><span class="line">[elasticsearch-7.x]</span><br><span class="line"><span class="attribute">name</span>=Elasticsearch repository <span class="keyword">for</span> 7.x packages</span><br><span class="line"><span class="attribute">baseurl</span>=https://artifacts.elastic.co/packages/7.x/yum</span><br><span class="line"><span class="attribute">gpgcheck</span>=1</span><br><span class="line"><span class="attribute">gpgkey</span>=https://artifacts.elastic.co/GPG-KEY-elasticsearch</span><br><span class="line"><span class="attribute">enabled</span>=1</span><br><span class="line"><span class="attribute">autorefresh</span>=1</span><br><span class="line"><span class="attribute">type</span>=rpm-md</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p>4、引入GPG key<br><code>rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch</code></p><p>5、更新yum包</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">yum</span> <span class="string">clean all</span></span><br><span class="line"><span class="attr">yum</span> <span class="string">makecache</span></span><br></pre></td></tr></table></figure><h2 id="Logstash-1"><a href="#Logstash-1" class="headerlink" title="Logstash"></a>Logstash</h2><p>1、安装Logstash<br><code>yum install -y logstash</code><br>也可以通过浏览器下载 <a href="https://artifacts.elastic.co/packages/7.x/yum/7.2.0/logstash-7.2.0.rpm" target="_blank" rel="noopener">https://artifacts.elastic.co/packages/7.x/yum/7.2.0/logstash-7.2.0.rpm</a> ，然后上传到服务节点，上传后执行安装：<br><code>rpm -ivh logstash-7.2.0.rpm</code></p><p>2、确认Logstash的安装信息<br><code>rpm -qi logstash</code><br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/logstash.jpg?imageView2/0/w/600" alt=""></p><p>3、创建测试文件<br>新建配置文件test.conf，内容为：</p><figure class="highlight puppet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">input</span> &#123;</span><br><span class="line">    file &#123;</span><br><span class="line">        <span class="attr">path</span> =&gt; [<span class="string">"/usr/local/test.log"</span>]</span><br><span class="line">        <span class="attr">sincedb_path</span> =&gt; <span class="string">"/dev/null"</span></span><br><span class="line">        <span class="attr">start_position</span> =&gt; <span class="string">"beginning"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">filter</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">output</span> &#123;</span><br><span class="line">    elasticsearch &#123;</span><br><span class="line">        <span class="attr">hosts</span> =&gt; [<span class="string">"http://192.168.56.101:9200"</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>新建/usr/local/test.log，内容为：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span> <span class="keyword">is</span> a log recorded <span class="keyword">by</span> <span class="number">102</span></span><br></pre></td></tr></table></figure><p>4、启动logstash</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>share<span class="regexp">/logstash/</span>bin<span class="regexp">/logstash -f ~/</span>test.conf</span><br></pre></td></tr></table></figure><p>5、在Kibana查看日志<br>刷新Kibana，即可看到客户节点的日志。<br><img src="http://cdn.voidking.com/@/imgs/centos7-install-elk/kibanainfo2.jpg?imageView2/0/w/600" alt=""></p><h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>以上，完成了ELK的基本安装配置，实现了一个最简单的架构。Logstash收集数据，传递给Elasticsearch，然后Kibana显示Elasticsearch中的数据。更多关于ELK的内容，后续会继续学习。</p><h1 id="书签"><a href="#书签" class="headerlink" title="书签"></a>书签</h1><p><a href="https://computingforgeeks.com/how-to-install-elk-stack-on-centos-fedora/" target="_blank" rel="noopener">How to Install ELK Stack on CentOS 7</a></p><p><a href="https://www.elastic.co/cn/blog/a-practical-introduction-to-logstash" target="_blank" rel="noopener">Logstash 实用介绍</a></p><p><a href="https://www.elastic.co/guide/en/logstash/current/getting-started-with-logstash.html" target="_blank" rel="noopener">Getting Started with Logstash</a></p><p><a href="https://www.ihaiyun.cc/2018/06/28/ELK/" target="_blank" rel="noopener">开源日志实时分析平台ELK</a></p><p><a href="https://www.cnblogs.com/qingqing74647464/p/9378385.html" target="_blank" rel="noopener">logstash的各个场景应用（配置文件均已实践过）</a></p><p><a href="https://www.cnblogs.com/cjsblog/p/9459781.html" target="_blank" rel="noopener">Logstash介绍</a></p><p><a href="https://www.cnblogs.com/cheesebar/p/9126171.html" target="_blank" rel="noopener">在 CentOS7 安装 ELK</a></p><p><a href="https://blog.51cto.com/lingxudong/2397209" target="_blank" rel="noopener">ELK-7.0安装部署收集展示</a></p><p><a href="https://www.jianshu.com/p/e7362ccfe7e3" target="_blank" rel="noopener">ELK部署安装以及配置</a></p><p><a href="https://www.elastic.co/cn/learn" target="_blank" rel="noopener">Learn About the Elastic Stack</a></p><p><a href="https://elasticsearch.cn/" target="_blank" rel="noopener">Elastic 中文社区</a></p><p><a href="https://yq.aliyun.com/articles/435986" target="_blank" rel="noopener">Elastic中文社区运维监控实战之架构篇</a></p><p><a href="https://yq.aliyun.com/articles/261432" target="_blank" rel="noopener">从零开始搭建ELK+GPE监控预警系统</a></p><p><a href="https://www.bookstack.cn/read/ELKstack-guide-cn/README.md" target="_blank" rel="noopener">《ELK Stack 中文指南》</a></p><p><a href="https://zhuanlan.zhihu.com/p/22400290?from_voters_page=true" target="_blank" rel="noopener">ELK不权威指南</a></p><p><a href="https://www.jianshu.com/p/eedb3c948543" target="_blank" rel="noopener">零代码如何打造自己的实时监控预警系统</a></p><p><a href="https://blog.csdn.net/boling_cavalry/article/details/79950677" target="_blank" rel="noopener">Docker下ELK三部曲之一：极速体验</a></p></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/linux/" rel="tag"># linux</a> <a href="/tags/centos/" rel="tag"># centos</a> <a href="/tags/elk/" rel="tag"># elk</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-centos7-change-repo/" rel="prev" title="CentOS7更换软件安装源"><i class="fa fa-chevron-left"></i> CentOS7更换软件安装源</a></div><div class="post-nav-item"> <a href="/dev-elk-with-filebeat/" rel="next" title="ELK配置FileBeat">ELK配置FileBeat<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zODU3Mi8xNTEwMA=="></div></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ELK简介"><span class="nav-number">1.</span> <span class="nav-text">ELK简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#部署规划"><span class="nav-number">2.</span> <span class="nav-text">部署规划</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#服务节点部署"><span class="nav-number">3.</span> <span class="nav-text">服务节点部署</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#环境准备"><span class="nav-number">3.1.</span> <span class="nav-text">环境准备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Elasticsearch"><span class="nav-number">3.2.</span> <span class="nav-text">Elasticsearch</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Kibana"><span class="nav-number">3.3.</span> <span class="nav-text">Kibana</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Logstash"><span class="nav-number">3.4.</span> <span class="nav-text">Logstash</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据传递"><span class="nav-number">3.5.</span> <span class="nav-text">数据传递</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#客户节点部署"><span class="nav-number">4.</span> <span class="nav-text">客户节点部署</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#环境准备-1"><span class="nav-number">4.1.</span> <span class="nav-text">环境准备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Logstash-1"><span class="nav-number">4.2.</span> <span class="nav-text">Logstash</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#后记"><span class="nav-number">5.</span> <span class="nav-text">后记</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#书签"><span class="nav-number">6.</span> <span class="nav-text">书签</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">学而不思则罔，思而不学则殆！</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">619</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">50</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">198</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2021</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://www.beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer><div id="needsharebutton-float"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css"><script src="/lib/needsharebutton/needsharebutton.js"></script><script>pbOptions={iconStyle:"box",boxForm:"horizontal",position:"bottomCenter",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-postbottom",pbOptions),flOptions={iconStyle:"box",boxForm:"horizontal",position:"topRight",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-float",flOptions)</script><script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  // window.livereOptions = {
  //   refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  // };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script></body></html>