<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//cdn.jsdelivr.net/gh/voidking/voidking.github.io/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="Win10安装配置Docker的方法在Win10中安装配置Docker，有四种方法：（1）在Win10上安装Docker Desktop。Docker Desktop 利用了 Windows 10 的 Hyper-V 虚拟化技术，来创建一个轻量级的 Linux 虚拟机（VM），并在其中运行 Docker 引擎和容器。这样，用户就可以在 Windows 上享受到 Linux 上的 Docker 功能"><meta property="og:type" content="article"><meta property="og:title" content="Win10安装配置Docker"><meta property="og:url" content="https://www.voidking.com/dev-win10-docker/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="Win10安装配置Docker的方法在Win10中安装配置Docker，有四种方法：（1）在Win10上安装Docker Desktop。Docker Desktop 利用了 Windows 10 的 Hyper-V 虚拟化技术，来创建一个轻量级的 Linux 虚拟机（VM），并在其中运行 Docker 引擎和容器。这样，用户就可以在 Windows 上享受到 Linux 上的 Docker 功能"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2017-05-08T14:00:00.000Z"><meta property="article:modified_time" content="2023-03-11T08:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="docker"><meta property="article:tag" content="windows"><meta property="article:tag" content="wsl2"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-win10-docker/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>Win10安装配置Docker | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">好好学习，天天向上！</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-win10-docker/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="学而不思则罔，思而不学则殆！"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> Win10安装配置Docker</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2017-05-08 14:00:00" itemprop="dateCreated datePublished" datetime="2017-05-08T14:00:00+00:00">2017-05-08</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2023-03-11 08:00:00" itemprop="dateModified" datetime="2023-03-11T08:00:00+00:00">2023-03-11</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="Win10安装配置Docker的方法"><a href="#Win10安装配置Docker的方法" class="headerlink" title="Win10安装配置Docker的方法"></a>Win10安装配置Docker的方法</h1><p>在Win10中安装配置Docker，有四种方法：<br>（1）在Win10上安装Docker Desktop。Docker Desktop 利用了 Windows 10 的 Hyper-V 虚拟化技术，来创建一个轻量级的 Linux 虚拟机（VM），并在其中运行 Docker 引擎和容器。这样，用户就可以在 Windows 上享受到 Linux 上的 Docker 功能和性能。<br>（2）在Win10上安装Docker Toolbox。Docker Toolbox 是一种适用于不支持 Hyper-V 的旧版 Windows 系统的替代方案，它使用了 Oracle VirtualBox 来创建一个 Linux VM，并在其中运行 Docker 引擎和容器。Docker Toolbox 需要用户手动配置一些网络和存储设置，以便让 Windows 和 VM 之间进行通信和数据交换。<br>（3）使用VirtualBox等虚拟化工具启动一个Linux虚拟机（与方法（2）类似），然后在虚拟机中安装使用Docker。<br>（4）在Win10上安装一个WSL2 Linux系统，然后在Linux系统中安装Docker。</p><p>无论哪种方法，想要在 Windows 上运行 Docker，都需要一个 Linux VM 来托管 Docker 引擎和容器，因为 Docker 是基于 Linux 内核的技术，而不能直接在 Windows 内核上运行。但是，用户可以通过命令行或图形界面来操作和管理 Docker 容器，就像它们是本地应用程序一样。</p><p>方法（2），Docker Toolbox的安装配置方法，参考文档<a href="https://www.voidking.com/dev-k8s-start">《K8S入门篇》</a>。<br>方法（3），虚拟机中安装使用Docker的方法，和Linux中安装使用Docker的方法没有区别，参考文档<a href="https://www.voidking.com/dev-docker-start/">《Docker入门篇》</a>。</p><p>本文中，我们学习方法（1）Docker Desktop安装配置方法，以及方法（4）Win10中安装Linux并在Linux中安装Docker的方法。</p><span id="more"></span><h1 id="WSL2简介"><a href="#WSL2简介" class="headerlink" title="WSL2简介"></a>WSL2简介</h1><p>WSL全拼是Windows Subsystem for Linux，WSL2是适用于Linux的Windows子系统体系结构的一个新版本。<br>WSL2是基于Hyper-V虚拟化技术的，它在Windows上启动一个真正的Linux系统，使用一个定制的Linux内核。这个内核支持完整的Linux系统调用，所以可以在WSL2中运行任何Linux应用程序。</p><p>WSL2和Windows之间相当于两台处于一个网络中但分别独立的主机，我们称这个网络为WSL网络。我们可以在Windows主机上使用ipconfig命令来查看Windows主机在WSL网络中的地址，相应地，在WSL2中你可以使用ifconfig命令来查看WSL2在WSL网络中的地址2。这样我们就可以在两个系统之间进行网络通信，比如访问Web服务或数据库等。</p><p>WSL2还保留了WSL1的无缝集成特性，比如我们可以从Windows资源管理器中访问Linux文件系统，或者从Linux终端中运行Windows应用程序等。我们还可以通过wsl命令来管理和配置WSL2。</p><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/windows/wsl/">适用于 Linux 的 Windows 子系统文档</a></li><li><a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/windows/wsl/install">使用 WSL 在 Windows 上安装 Linux</a></li><li><a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/windows/wsl/install-manual">旧版 WSL 的手动安装步骤</a></li><li><a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/windows/wsl/basic-commands">WSL 的基本命令</a></li></ul><h1 id="安装WSL2"><a href="#安装WSL2" class="headerlink" title="安装WSL2"></a>安装WSL2</h1><p>1、打开PowerShell<br>搜索PowerShell，以管理员身份运行</p><p>2、启用适用于 Linux 的 Windows 子系统</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart</span><br></pre></td></tr></table></figure><p>3、启用虚拟机功能</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart</span><br></pre></td></tr></table></figure><p>4、下载 Linux 内核更新包<br>下载<a target="_blank" rel="noopener" href="https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi">Linux 内核更新包</a>，双击安装。</p><p>5、将WSL2设置为默认版本</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --set-default-version 2</span><br></pre></td></tr></table></figure><h1 id="安装配置Docker-Desktop"><a href="#安装配置Docker-Desktop" class="headerlink" title="安装配置Docker Desktop"></a>安装配置Docker Desktop</h1><h2 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h2><p>下载<a target="_blank" rel="noopener" href="https://docs.docker.com/desktop/install/windows-install/">Docker Desktop for Windows</a>，双击安装。<br>安装时勾选使用WSL2 backend，在Windows上运行一个真正的Linux环境，但是无需传统虚拟机或双系统的额外负担，性能更好。</p><h2 id="进入根路径的方法"><a href="#进入根路径的方法" class="headerlink" title="进入根路径的方法"></a>进入根路径的方法</h2><p>方法一：打开文件资源管理器，点击左侧Linux</p><p>方法二：Windows资源管理器路径中输入</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\\wsl.localhost\docker-desktop-data</span><br></pre></td></tr></table></figure><h2 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h2><p>以安装MySQL为例：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker pull mysql:8.0.28</span><br><span class="line"></span><br><span class="line">docker run --name mysql -d -p 3306:3306 -v D:\DockerData\mysql\mysql-files:/var/lib/mysql-files -v D:\DockerData\mysql\conf.d:/etc/mysql/conf.d -v D:\DockerData\mysql\mysql:/var/lib/mysql -v D:\DockerData\mysql\log:/var/log/mysql -e MYSQL_ROOT_PASSWORD=voidking mysql:8.0.28</span><br></pre></td></tr></table></figure><p>注意：这里挂载宿主机目录使用的是Win10中的目录<code>D:\DockerData\mysql</code>，方便查找文件。<br>如果依然使用<code>/opt/mysql</code>，那么文件很难找到（我没找到，捂脸）。</p><p>更多内容参考文档：<a href="https://www.voidking.com/dev-docker-mysql/">《使用Docker安装配置MySQL》</a></p><h1 id="更改Docker数据盘到D盘"><a href="#更改Docker数据盘到D盘" class="headerlink" title="更改Docker数据盘到D盘"></a>更改Docker数据盘到D盘</h1><p>参考文档：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/yangyezhuang/p/16896899.html">WSL2下修改Docker Desktop镜像存放路径</a></p><p>WSL发行版默认安装在C盘，在<code>%LOCALAPPDATA%/Docker/wsl</code>目录。<br>Docker的运行数据、镜像文件都存在<code>%LOCALAPPDATA%/Docker/wsl/data/ext4.vhdx</code>中。</p><p>更改Docker数据盘方法：</p><p>1、关闭docker</p><p>2、关闭所有linux发行版</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wsl -l --all</span><br><span class="line">wsl -l -v</span><br><span class="line">wsl --shutdown</span><br></pre></td></tr></table></figure><p>3、导出docker-desktop-data到D盘（原有的docker images不会一起导出）<br>只需要迁移docker-desktop-data一个发行版就行，docker-desktop不用管，它占用空间很小。<br>手动创建目录<code>D:\DockerData\docker-desktop-data\</code>，然后执行导出命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --export docker-desktop-data D:\DockerData\docker-desktop-data\docker-desktop-data.tar</span><br></pre></td></tr></table></figure><p>4、注销 docker-desktop-data</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --unregister docker-desktop-data</span><br></pre></td></tr></table></figure><p>5、导入 docker-desktop-data</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --import docker-desktop-data D:\DockerData\docker-desktop-data\ D:\DockerData\docker-desktop-data\docker-desktop-data.tar --version 2</span><br></pre></td></tr></table></figure><p>6、启动docker</p><h1 id="Win10中安装Ubuntu18"><a href="#Win10中安装Ubuntu18" class="headerlink" title="Win10中安装Ubuntu18"></a>Win10中安装Ubuntu18</h1><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/windows/wsl/install-manual">旧版 WSL 的手动安装步骤</a></li><li><a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/windows/wsl/setup/environment">设置 WSL 开发环境</a></li></ul><h2 id="安装Ubuntu18"><a href="#安装Ubuntu18" class="headerlink" title="安装Ubuntu18"></a>安装Ubuntu18</h2><p>打开<a target="_blank" rel="noopener" href="https://aka.ms/wslstore">Microsoft Store</a>，搜索Ubuntu，选择Ubuntu18版本，获取<br>或者直接打开<a target="_blank" rel="noopener" href="https://www.microsoft.com/store/apps/9N9TNGVNDL3Q">Ubuntu 18.04 LTS</a>，获取</p><p>首次启动新安装的 Linux 发行版时，将打开一个控制台窗口，系统会要求你等待一分钟或两分钟，以便文件解压缩并存储到电脑上。 未来的所有启动时间应不到一秒。</p><p>然后，需要为新的 Linux 发行版创建用户帐户和密码。</p><h2 id="设置WSL2默认发行版"><a href="#设置WSL2默认发行版" class="headerlink" title="设置WSL2默认发行版"></a>设置WSL2默认发行版</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wsl -l -v</span><br><span class="line">wsl --set-default Ubuntu-18.04</span><br></pre></td></tr></table></figure><p>设置默认WSL2默认发行版之后，就不用使用指定<code>-d</code>指定发行版了。</p><p>详情参阅<a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/windows/wsl/basic-commands#set-default-linux-distribution">WSL 文档的基本 comands</a></p><h2 id="登录Ubuntu18"><a href="#登录Ubuntu18" class="headerlink" title="登录Ubuntu18"></a>登录Ubuntu18</h2><p>方法一：搜索Ubuntu，打开Ubuntu 18.04.5 on Windows，会直接登录到发行版内部</p><p>方法二：PowerShell中执行wsl命令登录进入发行版内部</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wsl -l -v</span><br><span class="line">wsl -d Ubuntu-18.04</span><br><span class="line">wsl -d Ubuntu-18.04 -u root</span><br></pre></td></tr></table></figure><p>PS：docker-desktop-data 发行版是不支持 wsl -d 登录的。</p><h2 id="磁盘路径说明"><a href="#磁盘路径说明" class="headerlink" title="磁盘路径说明"></a>磁盘路径说明</h2><p>C盘对应Ubuntu18路径<code>/mnt/c</code>，D盘对应Ubuntu18路径<code>/mnt/d</code></p><h2 id="配置SSH登录"><a href="#配置SSH登录" class="headerlink" title="配置SSH登录"></a>配置SSH登录</h2><p>参考文档：<a href="https://www.voidking.com/hobby-ubuntu-on-windows/">Win10安装Ubuntu</a></p><h2 id="配置远程登录"><a href="#配置远程登录" class="headerlink" title="配置远程登录"></a>配置远程登录</h2><p>Ubuntu18支持SSH登录了，但是只能从Win10宿主机上登录，相同局域网的其他主机还不能访问到Ubuntu18。<br>本节配置使局域网其他主机也可以访问到Ubuntu18。</p><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/425312804">如何在局域网的其他主机上中访问本机的WSL2</a></li><li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/allen167/p/14775844.html">wsl转wsl2与局域网内网访问填坑</a></li><li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/35703811">如何用笔记本ssh连接局域网内其他电脑上的wsl2 ubuntu</a></li></ul><h3 id="固定IP地址（无效）"><a href="#固定IP地址（无效）" class="headerlink" title="固定IP地址（无效）"></a>固定IP地址（无效）</h3><p>每次重启WSL2 Ubuntu18重启后，IP地址都会发生变化，无法固定路由规则，因此需要配置固定IP。</p><p>1、查看当前IP配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ifconfig</span><br><span class="line">route -n</span><br></pre></td></tr></table></figure><p>查看到IP地址为172.29.132.34，网关为172.29.128.1（Win10虚拟网卡的IP）。</p><p>2、编辑网卡配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/netplan/01-network-manager-all.yaml</span><br></pre></td></tr></table></figure><p>如下修改：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Let NetworkManager manage all devices on this system</span></span><br><span class="line"><span class="attr">network:</span></span><br><span class="line">  <span class="attr">version:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">renderer:</span> <span class="string">NetworkManager</span></span><br><span class="line">  <span class="attr">ethernets:</span></span><br><span class="line">    <span class="attr">eth0:</span></span><br><span class="line">      <span class="attr">dhcp4:</span> <span class="literal">false</span>                          <span class="comment"># 禁止动态IP</span></span><br><span class="line">      <span class="attr">addresses:</span> [<span class="number">172.29</span><span class="number">.132</span><span class="number">.34</span><span class="string">/20</span>]       <span class="comment"># IP地址和掩码</span></span><br><span class="line">      <span class="attr">gateway4:</span> <span class="number">172.29</span><span class="number">.128</span><span class="number">.1</span>               <span class="comment"># 网关</span></span><br><span class="line">      <span class="attr">nameservers:</span></span><br><span class="line">        <span class="attr">addresses:</span> [<span class="number">180.76</span><span class="number">.76</span><span class="number">.76</span>,<span class="number">114.114</span><span class="number">.114</span><span class="number">.114</span>]   <span class="comment">#DNS服务器</span></span><br></pre></td></tr></table></figure><p>3、使配置生效</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netplan apply</span><br></pre></td></tr></table></figure><p>报错：System has not been booted with systemd as init system (PID 1). Can’t operate.</p><h3 id="固定IP地址（有效）"><a href="#固定IP地址（有效）" class="headerlink" title="固定IP地址（有效）"></a>固定IP地址（有效）</h3><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="https://github.com/microsoft/WSL/issues/4210#issuecomment-648570493">Open WSL2 Set static ip?</a></li><li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/onecyl/p/16643926.html">将bat文件设置为开机启动</a></li></ul><p>1、编写 setip.bat 脚本</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">setlocal</span> enabledelayedexpansion</span><br><span class="line"></span><br><span class="line">:: <span class="built_in">set</span> windows ip</span><br><span class="line"><span class="built_in">ipconfig</span> | <span class="built_in">findstr</span> &quot;<span class="number">172</span>.<span class="number">29</span>.<span class="number">128</span>.<span class="number">1</span>&quot; &gt; <span class="built_in">nul</span></span><br><span class="line"><span class="keyword">if</span> <span class="variable">!errorlevel!</span> <span class="keyword">equ</span> <span class="number">0</span> (</span><br><span class="line">    <span class="built_in">echo</span> windows ip has <span class="built_in">set</span></span><br><span class="line">) <span class="keyword">else</span> (</span><br><span class="line">    netsh interface ip add address &quot;vEthernet (WSL)&quot; <span class="number">172</span>.<span class="number">29</span>.<span class="number">128</span>.<span class="number">1</span> <span class="number">255</span>.<span class="number">255</span>.<span class="number">240</span>.<span class="number">0</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="built_in">set</span> windows ip success: <span class="number">172</span>.<span class="number">29</span>.<span class="number">128</span>.<span class="number">1</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">:: <span class="built_in">set</span> wsl2 ip</span><br><span class="line">wsl -d Ubuntu-<span class="number">18</span>.<span class="number">04</span> -u root ip addr | <span class="built_in">findstr</span> &quot;<span class="number">172</span>.<span class="number">29</span>.<span class="number">132</span>.<span class="number">34</span>&quot; &gt; <span class="built_in">nul</span></span><br><span class="line"><span class="keyword">if</span> <span class="variable">!errorlevel!</span> <span class="keyword">equ</span> <span class="number">0</span> (</span><br><span class="line">    <span class="built_in">echo</span> wsl2 ip has <span class="built_in">set</span></span><br><span class="line">) <span class="keyword">else</span> (</span><br><span class="line">    wsl -d Ubuntu-<span class="number">18</span>.<span class="number">04</span> -u root ip addr add <span class="number">172</span>.<span class="number">29</span>.<span class="number">132</span>.<span class="number">34</span>/<span class="number">20</span> broadcast <span class="number">172</span>.<span class="number">29</span>.<span class="number">143</span>.<span class="number">255</span> dev eth0 <span class="built_in">label</span> eth0:<span class="number">1</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="built_in">set</span> wsl2 ip success: <span class="number">172</span>.<span class="number">29</span>.<span class="number">132</span>.<span class="number">34</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure><p>2、以管理员身份运行脚本</p><p>3、登录到Ubuntu18，查看IP</p><h3 id="配置路由规则"><a href="#配置路由规则" class="headerlink" title="配置路由规则"></a>配置路由规则</h3><p>Win10中以管理员身份打开PowerShell，执行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">netsh interface portproxy add v4tov4 listenaddress=0.0.0.0 listenport=22 connectaddress=172.29.132.34 connectport=22</span><br><span class="line"></span><br><span class="line">netsh interface portproxy show v4tov4</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">netsh interface portproxy delete v4tov4 listenaddress=0.0.0.0 listenport=22</span></span><br></pre></td></tr></table></figure><p>参考文档：<a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-tw/windows-server/networking/technologies/netsh/netsh-interface-portproxy">Netsh interface portproxy 命令</a></p><h3 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h3><p>搜索“防火墙”，选择Windows Defender 防火墙，启用或关闭Windows Defender防火墙，关闭防火墙。</p><p>或者操作开放端口，参考文档：<a target="_blank" rel="noopener" href="https://jingyan.baidu.com/article/6079ad0e448ad769ff86dbda.html">WIN10电脑怎么开放可访问端口</a></p><p>关闭防火墙之后，使用局域网内的其他主机尝试远程登录Ubuntu18进行测试。</p><h2 id="开机自动初始化"><a href="#开机自动初始化" class="headerlink" title="开机自动初始化"></a>开机自动初始化</h2><p>1、编写Win10开机自启动脚本 ubuntu18-init.bat<br>功能包括：自动设置固定IP地址、配置路由规则、启动SSH</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">setlocal</span> enabledelayedexpansion</span><br><span class="line"></span><br><span class="line">:: <span class="built_in">set</span> windows ip</span><br><span class="line"><span class="built_in">ipconfig</span> | <span class="built_in">findstr</span> &quot;<span class="number">172</span>.<span class="number">29</span>.<span class="number">128</span>.<span class="number">1</span>&quot; &gt; <span class="built_in">nul</span></span><br><span class="line"><span class="keyword">if</span> <span class="variable">!errorlevel!</span> <span class="keyword">equ</span> <span class="number">0</span> (</span><br><span class="line">    <span class="built_in">echo</span> windows ip has <span class="built_in">set</span></span><br><span class="line">) <span class="keyword">else</span> (</span><br><span class="line">    netsh interface ip add address &quot;vEthernet (WSL)&quot; <span class="number">172</span>.<span class="number">29</span>.<span class="number">128</span>.<span class="number">1</span> <span class="number">255</span>.<span class="number">255</span>.<span class="number">240</span>.<span class="number">0</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="built_in">set</span> windows ip success: <span class="number">172</span>.<span class="number">29</span>.<span class="number">128</span>.<span class="number">1</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">:: <span class="built_in">set</span> wsl2 ip</span><br><span class="line">wsl -d Ubuntu-<span class="number">18</span>.<span class="number">04</span> -u root ip addr | <span class="built_in">findstr</span> &quot;<span class="number">172</span>.<span class="number">29</span>.<span class="number">132</span>.<span class="number">34</span>&quot; &gt; <span class="built_in">nul</span></span><br><span class="line"><span class="keyword">if</span> <span class="variable">!errorlevel!</span> <span class="keyword">equ</span> <span class="number">0</span> (</span><br><span class="line">    <span class="built_in">echo</span> wsl2 ip has <span class="built_in">set</span></span><br><span class="line">) <span class="keyword">else</span> (</span><br><span class="line">    wsl -d Ubuntu-<span class="number">18</span>.<span class="number">04</span> -u root ip addr add <span class="number">172</span>.<span class="number">29</span>.<span class="number">132</span>.<span class="number">34</span>/<span class="number">20</span> broadcast <span class="number">172</span>.<span class="number">29</span>.<span class="number">143</span>.<span class="number">255</span> dev eth0 <span class="built_in">label</span> eth0:<span class="number">1</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="built_in">set</span> wsl2 ip success: <span class="number">172</span>.<span class="number">29</span>.<span class="number">132</span>.<span class="number">34</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">:: <span class="built_in">set</span> portproxy</span><br><span class="line">netsh interface portproxy add v4tov4 listenaddress=<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span> listenport=<span class="number">22</span> connectaddress=<span class="number">172</span>.<span class="number">29</span>.<span class="number">132</span>.<span class="number">34</span> connectport=<span class="number">22</span></span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">set</span> <span class="built_in">set</span> protproxy success: <span class="number">22</span> -&gt; <span class="number">172</span>.<span class="number">29</span>.<span class="number">132</span>.<span class="number">34</span>:<span class="number">22</span></span><br><span class="line"></span><br><span class="line">:: <span class="built_in">start</span> sshd</span><br><span class="line">wsl -d Ubuntu-<span class="number">18</span>.<span class="number">04</span> -u root /usr/sbin/service ssh <span class="built_in">start</span></span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">start</span> sshd success: port <span class="number">172</span>.<span class="number">29</span>.<span class="number">132</span>.<span class="number">34</span>:<span class="number">22</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure><p>2、ubuntu18-init.bat 脚本放入指定目录<br>脚本如果放入启动目录中，开机后会自动执行<br><code>C:\Users\&lt;username&gt;\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup</code></p><p>但是，因为我们需要以管理员身份执行，所以放入目录<br><code>C:\Users\&lt;username&gt;\AppData\Roaming\Microsoft\Windows\Start Menu\Programs</code></p><p>3、创建快捷方式<br>右键 ubuntu18-init.bat，创建快捷方式，放入到 Startup 目录中<br>右键快捷方式，属性，高级，勾选用管理员身份运行。</p><p>4、重启机器测试<br>重启机器后，打开任务管理器，详细信息，启动，可以看到ubuntu18-init.bat被调用了。</p><p>但是，并没有生效。</p><h2 id="开机自动初始化v2-0"><a href="#开机自动初始化v2-0" class="headerlink" title="开机自动初始化v2.0"></a>开机自动初始化v2.0</h2><p>1、打开任务计划程序<br>按键盘上的<code>Windows + R</code>键以打开运行，然后键入<code>taskschd.msc</code>，回车。</p><p>2、创建任务<br>点击创建任务，进行任务配置。</p><p>常规参数：</p><ul><li>名称：ubuntu18-init</li><li>勾选不管用户是否登录都要运行</li><li>勾选不存储密码。该任务将只有访问本地计算机资源的权限。</li><li>勾选使用最高权限运行。</li></ul><p>触发器，新建，开始任务选择启动时，延迟任务时间选择1分钟，勾选已启用，确定。<br>操作，新建，操作选择启动程序，程序或脚本通过浏览选中ubuntu18-init.bat，添加参数空白，起始于空白（在哪个路径中执行），确定。</p><p>3、查看任务<br>右键任务计划程序库，刷新，即可看到新增的任务。</p><p>4、重启机器测试</p><p>参考文档：<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1889190">Windows开机启动bat文件</a></p><h1 id="Ubuntu18中安装Docker"><a href="#Ubuntu18中安装Docker" class="headerlink" title="Ubuntu18中安装Docker"></a>Ubuntu18中安装Docker</h1><p>安装方法参考文档：<a href="https://www.voidking.com/dev-docker-start/">《Docker入门篇》</a></p><h2 id="启动Docker"><a href="#启动Docker" class="headerlink" title="启动Docker"></a>启动Docker</h2><p>使用service命令启动Docker</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service docker start</span><br></pre></td></tr></table></figure><h2 id="使用示例-1"><a href="#使用示例-1" class="headerlink" title="使用示例"></a>使用示例</h2><p>以安装MySQL为例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker pull mysql:8.0.28</span><br><span class="line"></span><br><span class="line">docker run --name mysql -d \</span><br><span class="line">-p 3306:3306 \</span><br><span class="line">-v /opt/mysql/mysql-files:/var/lib/mysql-files \</span><br><span class="line">-v /opt/mysql/conf.d:/etc/mysql/conf.d \</span><br><span class="line">-v /opt/mysql/data:/var/lib/mysql \</span><br><span class="line">-v /opt/mysql/log:/var/log/mysql \</span><br><span class="line">-e MYSQL_ROOT_PASSWORD=voidking \</span><br><span class="line">mysql:8.0.28</span><br></pre></td></tr></table></figure><p>更多内容参考文档：<a href="https://www.voidking.com/dev-docker-mysql/">《使用Docker安装配置MySQL》</a></p><h1 id="更改Ubuntu18数据盘到D盘"><a href="#更改Ubuntu18数据盘到D盘" class="headerlink" title="更改Ubuntu18数据盘到D盘"></a>更改Ubuntu18数据盘到D盘</h1><p>参考文档：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/yangyezhuang/p/16896899.html">WSL2下修改Docker Desktop镜像存放路径</a></p><p>1、关闭Ubuntu18</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wsl -l --all</span><br><span class="line">wsl -l -v</span><br><span class="line">wsl -t Ubuntu-18.04</span><br></pre></td></tr></table></figure><p>2、导出Ubuntu18备份文件到<code>D:\Ubuntu18</code>（需要提前创建目录）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --export Ubuntu-18.04 D:\Ubuntu18\Ubuntu-18.04.tar</span><br></pre></td></tr></table></figure><p>3、注销Ubuntu18</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --unregister Ubuntu-18.04</span><br></pre></td></tr></table></figure><p>5、导入Ubuntu18</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --import Ubuntu-18.04 D:\Ubuntu18\ D:\Ubuntu18\Ubuntu-18.04.tar --version 2</span><br></pre></td></tr></table></figure><p>6、启动Ubuntu18</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl -d Ubuntu-18.04</span><br></pre></td></tr></table></figure></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.voidking.com/dev-win10-docker/" title="Win10安装配置Docker">https://www.voidking.com/dev-win10-docker/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！源站会及时更新知识点及修正错误，阅读体验也更好。欢迎分享，欢迎收藏~</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/docker/" rel="tag"># docker</a> <a href="/tags/windows/" rel="tag"># windows</a> <a href="/tags/wsl2/" rel="tag"># wsl2</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-idea-maven-javaweb-miniproject/" rel="prev" title="使用IDEA开发Maven JavaWeb迷你项目"><i class="fa fa-chevron-left"></i> 使用IDEA开发Maven JavaWeb迷你项目</a></div><div class="post-nav-item"> <a href="/dev-win10-docker-usb/" rel="next" title="Win10中的Docker使用USB设备">Win10中的Docker使用USB设备<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zODU3Mi8xNTEwMA=="></div></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Win10%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEDocker%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">1.</span> <span class="nav-text">Win10安装配置Docker的方法</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#WSL2%E7%AE%80%E4%BB%8B"><span class="nav-number">2.</span> <span class="nav-text">WSL2简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85WSL2"><span class="nav-number">3.</span> <span class="nav-text">安装WSL2</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEDocker-Desktop"><span class="nav-number">4.</span> <span class="nav-text">安装配置Docker Desktop</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85Docker"><span class="nav-number">4.1.</span> <span class="nav-text">安装Docker</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%9B%E5%85%A5%E6%A0%B9%E8%B7%AF%E5%BE%84%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">4.2.</span> <span class="nav-text">进入根路径的方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="nav-number">4.3.</span> <span class="nav-text">使用示例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9B%B4%E6%94%B9Docker%E6%95%B0%E6%8D%AE%E7%9B%98%E5%88%B0D%E7%9B%98"><span class="nav-number">5.</span> <span class="nav-text">更改Docker数据盘到D盘</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Win10%E4%B8%AD%E5%AE%89%E8%A3%85Ubuntu18"><span class="nav-number">6.</span> <span class="nav-text">Win10中安装Ubuntu18</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85Ubuntu18"><span class="nav-number">6.1.</span> <span class="nav-text">安装Ubuntu18</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AEWSL2%E9%BB%98%E8%AE%A4%E5%8F%91%E8%A1%8C%E7%89%88"><span class="nav-number">6.2.</span> <span class="nav-text">设置WSL2默认发行版</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%99%BB%E5%BD%95Ubuntu18"><span class="nav-number">6.3.</span> <span class="nav-text">登录Ubuntu18</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A3%81%E7%9B%98%E8%B7%AF%E5%BE%84%E8%AF%B4%E6%98%8E"><span class="nav-number">6.4.</span> <span class="nav-text">磁盘路径说明</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AESSH%E7%99%BB%E5%BD%95"><span class="nav-number">6.5.</span> <span class="nav-text">配置SSH登录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95"><span class="nav-number">6.6.</span> <span class="nav-text">配置远程登录</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%BA%E5%AE%9AIP%E5%9C%B0%E5%9D%80%EF%BC%88%E6%97%A0%E6%95%88%EF%BC%89"><span class="nav-number">6.6.1.</span> <span class="nav-text">固定IP地址（无效）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%BA%E5%AE%9AIP%E5%9C%B0%E5%9D%80%EF%BC%88%E6%9C%89%E6%95%88%EF%BC%89"><span class="nav-number">6.6.2.</span> <span class="nav-text">固定IP地址（有效）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99"><span class="nav-number">6.6.3.</span> <span class="nav-text">配置路由规则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99"><span class="nav-number">6.6.4.</span> <span class="nav-text">关闭防火墙</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E6%9C%BA%E8%87%AA%E5%8A%A8%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-number">6.7.</span> <span class="nav-text">开机自动初始化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E6%9C%BA%E8%87%AA%E5%8A%A8%E5%88%9D%E5%A7%8B%E5%8C%96v2-0"><span class="nav-number">6.8.</span> <span class="nav-text">开机自动初始化v2.0</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Ubuntu18%E4%B8%AD%E5%AE%89%E8%A3%85Docker"><span class="nav-number">7.</span> <span class="nav-text">Ubuntu18中安装Docker</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8Docker"><span class="nav-number">7.1.</span> <span class="nav-text">启动Docker</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B-1"><span class="nav-number">7.2.</span> <span class="nav-text">使用示例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9B%B4%E6%94%B9Ubuntu18%E6%95%B0%E6%8D%AE%E7%9B%98%E5%88%B0D%E7%9B%98"><span class="nav-number">8.</span> <span class="nav-text">更改Ubuntu18数据盘到D盘</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">学而不思则罔，思而不学则殆！</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">640</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">30</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">239</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2023</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer><div id="needsharebutton-float"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css"><script src="/lib/needsharebutton/needsharebutton.js"></script><script>pbOptions={iconStyle:"box",boxForm:"horizontal",position:"bottomCenter",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-postbottom",pbOptions),flOptions={iconStyle:"box",boxForm:"horizontal",position:"topRight",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-float",flOptions)</script><script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  // window.livereOptions = {
  //   refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  // };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script></body></html>