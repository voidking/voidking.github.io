<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//qiniu-cdn.voidking.com/doc/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="前言本文记录使用Docker过程中遇到的问题和解决办法。"><meta property="og:type" content="article"><meta property="og:title" content="好好学Docker：Docker问题记录"><meta property="og:url" content="https://www.voidking.com/dev-docker-problem/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="前言本文记录使用Docker过程中遇到的问题和解决办法。"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2022-11-15T16:00:00.000Z"><meta property="article:modified_time" content="2024-09-07T08:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="docker"><meta property="article:tag" content="gpu"><meta property="article:tag" content="问题排查"><meta property="article:tag" content="好好学Docker"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-docker-problem/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>好好学Docker：Docker问题记录 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">一个计算机技术爱好者与学习者</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-docker-problem/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="一个计算机技术爱好者与学习者"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> 好好学Docker：Docker问题记录</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-11-15 16:00:00" itemprop="dateCreated datePublished" datetime="2022-11-15T16:00:00+00:00">2022-11-15</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2024-09-07 08:00:00" itemprop="dateModified" datetime="2024-09-07T08:00:00+00:00">2024-09-07</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/cloudnative/" itemprop="url" rel="index"><span itemprop="name">cloudnative</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/troubleshooting/" itemprop="url" rel="index"><span itemprop="name">troubleshooting</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="前言"><span class="post-title-index">1.</span><a href="#前言" class="headerlink" title="前言"></a> 前言</h1><p>本文记录使用Docker过程中遇到的问题和解决办法。</p><span id="more"></span><h1 id="docker启动失败"><span class="post-title-index">2.</span><a href="#docker启动失败" class="headerlink" title="docker启动失败"></a> docker启动失败</h1><h2 id="问题描述"><span class="post-title-index">2.1.</span><a href="#问题描述" class="headerlink" title="问题描述"></a> 问题描述</h2><p>docker启动卡住，查看日志</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl status docker -l</span><br><span class="line">journalctl -ru docker</span><br></pre></td></tr></table></figure><p>报错：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error (Unable to complete atomic operation, key modified) deleting object [endpoint 622bf1a499580702606742e5f5554ac99e7c0d61abcd5d9063881fc2da33d16f afdce62ce70de2cbe5a971b05521280940947e4968c163e48c3e5252919a4fae], retrying....</span><br></pre></td></tr></table></figure><h2 id="解决办法"><span class="post-title-index">2.2.</span><a href="#解决办法" class="headerlink" title="解决办法"></a> 解决办法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep docker</span><br><span class="line"><span class="built_in">kill</span> -9 xxx</span><br><span class="line">systemctl stop containerd</span><br><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure><h1 id="OCI-runtime-create-failed"><span class="post-title-index">3.</span><a href="#OCI-runtime-create-failed" class="headerlink" title="OCI runtime create failed"></a> OCI runtime create failed</h1><h2 id="问题描述-1"><span class="post-title-index">3.1.</span><a href="#问题描述-1" class="headerlink" title="问题描述"></a> 问题描述</h2><p>原本可以正常启动nvidia runtime的容器，使用相同的启动命令，突然有一天开始报错：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker: Error response from daemon: OCI runtime create failed: container_linux.go:380: starting container process caused: process_linux.go:545: container init caused: Running hook #1:: error running hook: exit status 1, stdout: , stderr: nvidia-container-cli: initialization error: driver error: failed to process request: unknown.</span><br><span class="line"></span><br><span class="line">docker: Error response from daemon: OCI runtime create failed: container_linux.go:380: starting container process caused: process_linux.go:545: container init caused: Running hook #1:: error running hook: exit status 1, stdout: , stderr: Auto-detected mode as &#x27;legacy&#x27;</span><br><span class="line">nvidia-container-cli: initialization error: load library failed: /usr/bin/../lib64/libm.so.6: symbol __strtof128_nan, version glibc_private not defined in file libc.so.6 with link time reference: unknown.</span><br></pre></td></tr></table></figure><h2 id="解决办法-1"><span class="post-title-index">3.2.</span><a href="#解决办法-1" class="headerlink" title="解决办法"></a> 解决办法</h2><p>尝试了重启docker、重启主机、重装nvidia-container-tookit、重装nvidia驱动，全部无效。</p><p>最终解决办法：检查libm.so.6的软链指向，修改指向到另外的libm。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/bin/../lib64/</span><br><span class="line"><span class="built_in">ln</span> -snf libm-2.17.so  libm.so.6</span><br></pre></td></tr></table></figure><h1 id="error-pulling-image-configuration"><span class="post-title-index">4.</span><a href="#error-pulling-image-configuration" class="headerlink" title="error pulling image configuration"></a> error pulling image configuration</h1><h2 id="问题描述-2"><span class="post-title-index">4.1.</span><a href="#问题描述-2" class="headerlink" title="问题描述"></a> 问题描述</h2><p><code>docker pull ubuntu</code> 报错：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/ubuntu</span><br><span class="line">6b851dcae6ca: Pulling fs layer</span><br><span class="line">error pulling image configuration: Get https://production.cloudflare.docker.com/registry-v2/docker/registry/v2/blobs/sha256/99/99284ca6cea039c7784d1414608c6e846dd56830c2a13e1341be681c3ffcc8ac/data?verify=1687183284-D5%2FDxEvl7V%2BLtRcgWmwP0MDFiTo%3D: dial tcp 104.18.125.25:443: i/o timeout</span><br></pre></td></tr></table></figure><h2 id="问题分析"><span class="post-title-index">4.2.</span><a href="#问题分析" class="headerlink" title="问题分析"></a> 问题分析</h2><p>production.cloudflare.docker.com 的IP是会变化的，当前的这个 104.18.121.25 刚好被墙了，无法访问。<br>查看是否被墙的办法：访问<a target="_blank" rel="noopener" href="https://www.itdog.cn/http/">ITDOG</a>，输入 production.cloudflare.docker.com 这个网址。</p><h2 id="解决办法一"><span class="post-title-index">4.3.</span><a href="#解决办法一" class="headerlink" title="解决办法一"></a> 解决办法一</h2><p>配置使用镜像站，从镜像站拉取镜像，避开 production.cloudflare.docker.com 这个域名。</p><p>1、编辑docker配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/docker/daemon.json</span><br></pre></td></tr></table></figure><p>添加 registry-mirrors 配置，配置方法参考<a href="https://www.voidking.com/dev-docker-registry-mirror/">《Docker镜像站的配置和使用》</a></p><p>2、重启docker</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker</span><br><span class="line">docker info</span><br></pre></td></tr></table></figure><h2 id="解决办法二"><span class="post-title-index">4.4.</span><a href="#解决办法二" class="headerlink" title="解决办法二"></a> 解决办法二</h2><p>解决办法一，有时也不可行，因为有可能全国都被墙了，镜像站也无法从源站拉取我们需要的镜像。</p><p>此时只能使用终极解决办法：使用梯子。<br>方法一：机器上直接配置使用梯子，配置方法参考<a href="https://www.voidking.com/dev-linux-network-proxy/">《Linux配置网络代理》</a>。<br>方法二：搭建一个docker本地镜像站，配置使用梯子；其他机器配置使用这个docker镜像站。配置方法参考<a href="https://www.voidking.com/dev-docker-registry-mirror/">《Docker镜像站的配置和使用》</a>。</p><h1 id="failed-to-compute-cache-key"><span class="post-title-index">5.</span><a href="#failed-to-compute-cache-key" class="headerlink" title="failed to compute cache key"></a> failed to compute cache key</h1><h2 id="问题描述-3"><span class="post-title-index">5.1.</span><a href="#问题描述-3" class="headerlink" title="问题描述"></a> 问题描述</h2><p>已知Dockerfile内容为：</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> alpine:<span class="number">3.7</span>.<span class="number">3</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /home/work</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> Dockerfile .</span></span><br></pre></td></tr></table></figure><p>Dockerfile所在目录，执行<code>docker build</code>报错：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">failed to compute cache key: failed to calculate checksum of ref moby::heujqm1lca2el12jsbquzoarg: &quot;/Dockerfile&quot;: not found</span><br></pre></td></tr></table></figure><h2 id="解决办法-2"><span class="post-title-index">5.2.</span><a href="#解决办法-2" class="headerlink" title="解决办法"></a> 解决办法</h2><p>检查 <code>.dockerignore</code> 文件，大概率是因为该文件中忽略了 <code>Dockerfile</code> 。</p><h1 id="Docker打满CPU内存问题"><span class="post-title-index">6.</span><a href="#Docker打满CPU内存问题" class="headerlink" title="Docker打满CPU内存问题"></a> Docker打满CPU内存问题</h1><h2 id="问题描述-4"><span class="post-title-index">6.1.</span><a href="#问题描述-4" class="headerlink" title="问题描述"></a> 问题描述</h2><p>系统环境：</p><ul><li>主机系统CentOS7.9，kernal 4.19.188-10.el7.ucloud.x86_64</li><li>K8S集群版本1.20.14，calico版本3.22.1，集群是使用sealos4.2.3安装的，详情参考<a href="https://www.voidking.com/dev-sealos-start/">《sealos入门篇》</a></li><li>Docker版本19.03.15</li></ul><p>当一个节点上的pod数量超过一定数量，或者pod比较繁忙时，CPU和内存就会被Docker进程进行打满。</p><ul><li>pod的limits都是进行过限制的，总和远小于宿主机CPU资源总量</li><li>通过容器监控看，pod总的CPU资源用量远小于100%，大约只有20%到30%</li><li>通过主机监控看，<code>busy system</code>（cpu处于核心态的占比）约90%，<code>busy user</code>（cpu处理用户态的占比）约6%</li><li>通过主机监控看，从<code>busy system</code>占比90%开始，内存使用率逐步增加，经过一个小时左右内存使用率增长到100%</li></ul><p>此时查看docker日志，发现大量报错：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Handler for GET /v1.40/containers/xxx/json returned error: write unix /var/run/docker.sock-&gt;@: write: broken pipe</span><br></pre></td></tr></table></figure><h2 id="解决办法-3"><span class="post-title-index">6.2.</span><a href="#解决办法-3" class="headerlink" title="解决办法"></a> 解决办法</h2><p>没有检索到解决办法。<br>尝试升级Docker版本到 24.0.6 ，无效。</p><p>经过和正常集群的对比，发现有问题主机的内核版本为 4.19.188-10.el7.ucloud.x86_64 ，没问题主机的内核版本为 5.4.148-1.el7.elrepo.x86_64 。<br>中间差了一个大版本，而且有问题主机的内核版本还是ucloud定制版。<br>因此，尝试升级内核，升级方法参考<a href="https://www.voidking.com/dev-centos7-kernal-upgrade/">《CentOS7内核升级》</a>。<br>升级后，问题消失了。。。</p><h1 id="Docker启动容器很慢问题"><span class="post-title-index">7.</span><a href="#Docker启动容器很慢问题" class="headerlink" title="Docker启动容器很慢问题"></a> Docker启动容器很慢问题</h1><h2 id="问题描述-5"><span class="post-title-index">7.1.</span><a href="#问题描述-5" class="headerlink" title="问题描述"></a> 问题描述</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name <span class="built_in">test</span> -d busybox <span class="built_in">tail</span> -f /dev/null</span><br></pre></td></tr></table></figure><p>Docker启动任何容器都很慢，需要十几秒甚至几分钟才能启动成功。</p><h2 id="解决办法-4"><span class="post-title-index">7.2.</span><a href="#解决办法-4" class="headerlink" title="解决办法"></a> 解决办法</h2><p>查看一下主机磁盘使用情况，可能是IO使用率高。<br>找到占用大量IO的进程，判断是否是正常占用，非正常占用的话就干掉它。</p><h1 id="docker-run的内容重定向到文件"><span class="post-title-index">8.</span><a href="#docker-run的内容重定向到文件" class="headerlink" title="docker run的内容重定向到文件"></a> docker run的内容重定向到文件</h1><h2 id="问题描述-6"><span class="post-title-index">8.1.</span><a href="#问题描述-6" class="headerlink" title="问题描述"></a> 问题描述</h2><p>使用docker批量运行一些任务时，需要多个容器同时运行，同时容器跑完即删，例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">seq</span> 0 3`;<span class="keyword">do</span></span><br><span class="line">screen -dmS part<span class="variable">$&#123;i&#125;</span> docker run --<span class="built_in">rm</span> \</span><br><span class="line">-e PART=<span class="variable">$&#123;i&#125;</span> \</span><br><span class="line">-v /data/test:/data/test \</span><br><span class="line">test-image-name:latest \</span><br><span class="line">/bin/bash -c <span class="string">&quot;xxx&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>想要查看某个容器的输出时，使用命令 <code>screen -ls</code> + <code>screen -r yyy.partN</code> 实现。<br>但是，这样并不方便查看输出，出错时容器直接就没了，不方便追查问题。<br>因此，我们需要把docker run的内容重定向到文件中，该怎样修改命令？</p><h2 id="解决办法-5"><span class="post-title-index">8.2.</span><a href="#解决办法-5" class="headerlink" title="解决办法"></a> 解决办法</h2><p>单独执行 <code>docker run --rm</code> 时，怎样重定向内容到文件？<br>答：重定向标准输出和错误输出到文件即可。<br>方法一：直接重定向，这种方法拿到的数据的最全的。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --<span class="built_in">rm</span> nginx &gt; output.log 2&gt;&amp;1</span><br></pre></td></tr></table></figure><p>方法二：使用tee重定向，但是拿到的是缺失的数据，这是因为管道符只能重定向标准输出。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run --<span class="built_in">rm</span> nginx | <span class="built_in">tee</span> output.log <span class="comment"># 缺失nginx日志输出</span></span><br><span class="line">docker run --<span class="built_in">rm</span> nginx 2&gt;&amp;1 | <span class="built_in">tee</span> output.log <span class="comment"># 缺失ctrl+c后的数据</span></span><br></pre></td></tr></table></figure><p><code>screen -dm</code> + <code>docker run --rm</code> 时，怎样重定向内容到文件？<br>答：首先，上面的两种办法，经测试都是不可行的，需要考虑screen的输出机制。<br>执行 <code>screen -dm</code> 时，screen创建一个新会话并立即后台运行（Detached）。当screen后台运行时，它关闭了标准输入、输出和错误流。</p><p>方法一：打开screen的标准输出，输出文件名不可控，默认为 screenlog.0</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">screen -L -dmS nginx docker run --<span class="built_in">rm</span> nginx</span><br></pre></td></tr></table></figure><p>方法二：在screen session中使用tee</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">screen -dm bash -c <span class="string">&quot;docker run --rm nginx 2&gt;&amp;1 | tee output.log&quot;</span></span><br></pre></td></tr></table></figure><p>方法三：改用nohup（推荐）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span> docker run --<span class="built_in">rm</span> nginx &gt; output.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><p>综上，脚本修改为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">seq</span> 0 3`;<span class="keyword">do</span></span><br><span class="line"><span class="built_in">nohup</span> docker run --<span class="built_in">rm</span> --name part<span class="variable">$&#123;i&#125;</span> \</span><br><span class="line">-e PART=<span class="variable">$&#123;i&#125;</span> \</span><br><span class="line">-v /data/test:/data/test \</span><br><span class="line">test-image-name:latest \</span><br><span class="line">/bin/bash -c <span class="string">&quot;xxx&quot;</span> &gt; part<span class="variable">$&#123;i&#125;</span>.<span class="built_in">log</span> 2&gt;&amp;1 &amp;</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h1 id="run-目录下没有空间"><span class="post-title-index">9.</span><a href="#run-目录下没有空间" class="headerlink" title="/run 目录下没有空间"></a> /run 目录下没有空间</h1><h2 id="问题描述-7"><span class="post-title-index">9.1.</span><a href="#问题描述-7" class="headerlink" title="问题描述"></a> 问题描述</h2><p>docker run启动一个容器时，报错：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker: Error response from daemon: failed to create task for container: failed to start shim: write /run/containerd/io.containerd.runtime.v2.task/moby/781958621c259371c2fec92ea1ab86f0937fa480bcf4aefc15d30ce3c5da90eb/config.json: no space left on device: unknown.</span><br></pre></td></tr></table></figure><h2 id="问题排查"><span class="post-title-index">9.2.</span><a href="#问题排查" class="headerlink" title="问题排查"></a> 问题排查</h2><p>1、查看磁盘使用情况</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">df</span> -h</span><br></pre></td></tr></table></figure><p>发现 /run 目录已经打满</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/root        29G   16G   14G  53% /</span><br><span class="line">devtmpfs        3.9G     0  3.9G   0% /dev</span><br><span class="line">tmpfs           3.9G     0  3.9G   0% /dev/shm</span><br><span class="line">tmpfs           794M  794M     0 100% /run</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>2、查看 /run 目录下是哪些文件占用了磁盘</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">du</span> -h --max-depth=1 /run</span><br></pre></td></tr></table></figure><h2 id="解决办法一-1"><span class="post-title-index">9.3.</span><a href="#解决办法一-1" class="headerlink" title="解决办法一"></a> 解决办法一</h2><p>找到占用磁盘空间的文件，并清理</p><h2 id="解决办法二-1"><span class="post-title-index">9.4.</span><a href="#解决办法二-1" class="headerlink" title="解决办法二"></a> 解决办法二</h2><p>扩容tmpfs</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -o remount,size=4G /run</span><br></pre></td></tr></table></figure><p>扩容tmpfs，并且系统重启后自动生效。编辑 /etc/fstab ，添加配置：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tmpfs /run tmpfs defaults,size=4G 0 0</span><br></pre></td></tr></table></figure><p>注意：</p><ul><li>tmpfs 的大小是动态的，实际占用的内存会根据存储的数据量而变化。</li><li>tmpfs 数据在系统重启后会丢失，因此不适合存储持久数据。</li><li>确保在修改大小时考虑到系统的可用内存，以避免影响系统性能。</li></ul><h1 id="重启系统后无法启动Docker容器"><span class="post-title-index">10.</span><a href="#重启系统后无法启动Docker容器" class="headerlink" title="重启系统后无法启动Docker容器"></a> 重启系统后无法启动Docker容器</h1><h2 id="问题描述-8"><span class="post-title-index">10.1.</span><a href="#问题描述-8" class="headerlink" title="问题描述"></a> 问题描述</h2><p>20.04.6 重启系统后，发现 Docker 容器没有正常启动。<br>启动Docker服务，发现虽然Docker服务启动成功，但是日志中出现了很多报错：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error response from daemon: AppArmor enabled on system but the docker-default profile could not be loaded: strconv.Atoi: parsing &quot;file&quot;: invalid syntax</span><br></pre></td></tr></table></figure><p>通过 <code>docker start xxx</code> 命令手动启动某个容器，同样会出现上面的错误。</p><h2 id="问题排查解决"><span class="post-title-index">10.2.</span><a href="#问题排查解决" class="headerlink" title="问题排查解决"></a> 问题排查解决</h2><p>AppArmor（Application Armor）是Linux上的一个安全模块，用于限制进程的权限和行为。它通过定义访问控制规则来保护系统中的应用程序免受潜在的安全威胁。</p><p>1、尝试重新安装AppArmor</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">apt remove --assume-yes --purge apparmor</span><br><span class="line"><span class="built_in">rm</span> -rf /etc/apparmor*</span><br><span class="line">apt install apparmor</span><br><span class="line">systemctl restart apparmor</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><p>问题依然存在。</p><p>2、卸载AppArmor</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt remove --assume-yes --purge apparmor</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><p>卸载AppArmor后，容器就可以正常启动了。</p><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/58393628/docker-error-response-from-daemon-apparmor-enabled-on-system-but-the-docker-de">docker: Error response from daemon: AppArmor enabled on system but the docker-default profile could not be loaded</a></li><li><a target="_blank" rel="noopener" href="https://gist.github.com/tankala/200e9286fde580acdfb38c3f0a737bf2">tankala/appArmorDockerProfileCorrpution.md</a></li><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44477424/article/details/132253859">docker运行报错docker: Error response from daemon: AppArmor enabled on system but the docker-default prof</a></li></ul></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>原文链接：</strong> <a href="https://www.voidking.com/dev-docker-problem/" title="好好学Docker：Docker问题记录">https://www.voidking.com/dev-docker-problem/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本文采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议，转载请注明出处！源站会即时更新知识点并修正错误，欢迎访问~</li><li> <img width="200" height="200" src="/images/avatar.jpg"><p style="text-align:center;margin-bottom:0">微信公众号同步更新，欢迎关注~</p></li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/docker/" rel="tag"># docker</a> <a href="/tags/gpu/" rel="tag"># gpu</a> <a href="/tags/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/" rel="tag"># 问题排查</a> <a href="/tags/%E5%A5%BD%E5%A5%BD%E5%AD%A6Docker/" rel="tag"># 好好学Docker</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-gitlab-ci-code-quality-check/" rel="prev" title="好好学GitLab：GitLab CI配置代码质量检查"><i class="fa fa-chevron-left"></i> 好好学GitLab：GitLab CI配置代码质量检查</a></div><div class="post-nav-item"> <a href="/dev-ack-gpu-problem/" rel="next" title="阿里云ACK使用GPU问题">阿里云ACK使用GPU问题<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"><ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-3284447971731414" data-ad-slot="9697986181"></ins><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3284447971731414" crossorigin="anonymous"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">1. 前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#docker%E5%90%AF%E5%8A%A8%E5%A4%B1%E8%B4%A5"><span class="nav-text">2. docker启动失败</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0"><span class="nav-text">2.1. 问题描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="nav-text">2.2. 解决办法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#OCI-runtime-create-failed"><span class="nav-text">3. OCI runtime create failed</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0-1"><span class="nav-text">3.1. 问题描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95-1"><span class="nav-text">3.2. 解决办法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#error-pulling-image-configuration"><span class="nav-text">4. error pulling image configuration</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0-2"><span class="nav-text">4.1. 问题描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90"><span class="nav-text">4.2. 问题分析</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95%E4%B8%80"><span class="nav-text">4.3. 解决办法一</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95%E4%BA%8C"><span class="nav-text">4.4. 解决办法二</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#failed-to-compute-cache-key"><span class="nav-text">5. failed to compute cache key</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0-3"><span class="nav-text">5.1. 问题描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95-2"><span class="nav-text">5.2. 解决办法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Docker%E6%89%93%E6%BB%A1CPU%E5%86%85%E5%AD%98%E9%97%AE%E9%A2%98"><span class="nav-text">6. Docker打满CPU内存问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0-4"><span class="nav-text">6.1. 问题描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95-3"><span class="nav-text">6.2. 解决办法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Docker%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E5%BE%88%E6%85%A2%E9%97%AE%E9%A2%98"><span class="nav-text">7. Docker启动容器很慢问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0-5"><span class="nav-text">7.1. 问题描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95-4"><span class="nav-text">7.2. 解决办法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#docker-run%E7%9A%84%E5%86%85%E5%AE%B9%E9%87%8D%E5%AE%9A%E5%90%91%E5%88%B0%E6%96%87%E4%BB%B6"><span class="nav-text">8. docker run的内容重定向到文件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0-6"><span class="nav-text">8.1. 问题描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95-5"><span class="nav-text">8.2. 解决办法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#run-%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%B2%A1%E6%9C%89%E7%A9%BA%E9%97%B4"><span class="nav-text">9. &#x2F;run 目录下没有空间</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0-7"><span class="nav-text">9.1. 问题描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5"><span class="nav-text">9.2. 问题排查</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95%E4%B8%80-1"><span class="nav-text">9.3. 解决办法一</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95%E4%BA%8C-1"><span class="nav-text">9.4. 解决办法二</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%87%8D%E5%90%AF%E7%B3%BB%E7%BB%9F%E5%90%8E%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8Docker%E5%AE%B9%E5%99%A8"><span class="nav-text">10. 重启系统后无法启动Docker容器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0-8"><span class="nav-text">10.1. 问题描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%E8%A7%A3%E5%86%B3"><span class="nav-text">10.2. 问题排查解决</span></a></li></ol></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">一个计算机技术爱好者与学习者</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">744</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">32</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">258</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2024</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '5a238b8c32b1e4dd2156',
      clientSecret: 'bfb5d518626f6fdc7da0351d1e0cd37ab75c6361',
      repo: 'gitalk-comments',
      owner: 'voidking',
      admin: ['voidking'],
      id: '9a7d79eb45e1cae6ef84ad95ca27ac8d',
      title: '好好学Docker：Docker问题记录',
      body: '欢迎留言，互相交流学习~',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></body></html>