<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.1"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//cdn.jsdelivr.net/gh/voidking/voidking.github.io/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="概念简析库、插件、框架、加载项、扩展和控件都是组件。 组件（Component）是一个含义很大的概念，一般是指软件系统的一部分，承担了特定的职责，可以独立于整个系统进行开发和测试，一个良好设计的组件应该可以在不同的软件系统中被使用（可复用）。例如V8引擎是Chrome浏览器的一部分，负责运行javascript代码，这里V8引擎就可以视为一个组件。V8引擎同时也是node.js的javascrip"><meta property="og:type" content="article"><meta property="og:title" content="从零开始打造自己的JavaScript框架——第0章"><meta property="og:url" content="https://www.voidking.com/dev-vkjs-0/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="概念简析库、插件、框架、加载项、扩展和控件都是组件。 组件（Component）是一个含义很大的概念，一般是指软件系统的一部分，承担了特定的职责，可以独立于整个系统进行开发和测试，一个良好设计的组件应该可以在不同的软件系统中被使用（可复用）。例如V8引擎是Chrome浏览器的一部分，负责运行javascript代码，这里V8引擎就可以视为一个组件。V8引擎同时也是node.js的javascrip"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://cdn.voidking.com//imgs/vkjs-0/library.png?imageView2/0/w/700"><meta property="article:published_time" content="2017-09-20T06:00:00.000Z"><meta property="article:modified_time" content="2017-09-20T06:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="node"><meta property="article:tag" content="框架"><meta property="article:tag" content="js"><meta property="article:tag" content="puer"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://cdn.voidking.com//imgs/vkjs-0/library.png?imageView2/0/w/700"><link rel="canonical" href="https://www.voidking.com/dev-vkjs-0/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>从零开始打造自己的JavaScript框架——第0章 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">好好学习，天天向上！</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-vkjs-0/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="学而不思则罔，思而不学则殆！"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> 从零开始打造自己的JavaScript框架——第0章</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2017-09-20 14:00:00" itemprop="dateCreated datePublished" datetime="2017-09-20T14:00:00+08:00">2017-09-20</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/" itemprop="url" rel="index"><span itemprop="name">专业</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">开发</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/%E5%BC%80%E5%8F%91/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="概念简析"><a href="#概念简析" class="headerlink" title="概念简析"></a>概念简析</h1><p>库、插件、框架、加载项、扩展和控件都是组件。</p><p>组件（Component）是一个含义很大的概念，一般是指软件系统的一部分，承担了特定的职责，可以独立于整个系统进行开发和测试，一个良好设计的组件应该可以在不同的软件系统中被使用（可复用）。例如V8引擎是Chrome浏览器的一部分，负责运行javascript代码，这里V8引擎就可以视为一个组件。V8引擎同时也是node.js的javascript解释器，这体现了组件的可复用性。</p><p>库（Library）是一系列预先定义好的数据结构和函数（对于面向对象语言来说，是类）的集合，程序员通过使用这些数据结构和函数实现功能。例如Moment.js是一个javascript库，提供了处理时间的一些函数。在js中，插件和库的含义相同，我们也可以说Moment.js是一个插件。</p><p>框架（Framework）也是一系列预先定义好的数据结构和函数，一般用于作为一个软件的骨架，但程序真正的功能还需要由开发者实现。框架和库的最大区别在于“控制反转”，当你使用一个库，你会调用库中的代码，而当你使用一个框架，框架会调用你的代码。框架和库是一个有交叉的概念，很多框架都是以库的形式发布的，例如Java的Spring MVC框架，其发布的jar包本身就是一个库。下图来自<a href="https://www.programcreek.com/2011/09/what-is-the-difference-between-a-java-library-and-a-framework/" target="_blank" rel="noopener">Library vs. Framework?</a> ，从调用的角度说明了框架和库的关系：<br><img src="http://cdn.voidking.com//imgs/vkjs-0/library.png?imageView2/0/w/700" alt=""></p><p><a href="https://www.zhihu.com/question/49536781/answer/117606933" target="_blank" rel="noopener">来自知乎龚世伟的回答</a></p><a id="more"></a><h1 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h1><p>说到js框架和插件，我们可以想到jquery、zepto、requirejs、seajs、art-template、page.js、angularjs、vue等等。这些框架和插件有什么区别？来个表格比较。</p><table><caption>js框架和插件比较</caption><tr><th>框架名称</th><th>选择器</th><th>DOM操作</th><th>事件处理</th><th>AJAX</th><th>异步处理</th><th>动画模块</th><th>模块化管理依赖</th><th>模板引擎</th><th>路由管理</th></tr><pre><code>&lt;tr&gt;
    &lt;th&gt;jquery&lt;/th&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;th&gt;zepto&lt;/th&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;th&gt;requirejs&lt;/th&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;th&gt;seajs&lt;/th&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;th&gt;art-template&lt;/th&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;th&gt;page.js&lt;/th&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;×&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;th&gt;angularjs&lt;/th&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;th&gt;vue&lt;/th&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
    &lt;td&gt;√&lt;/td&gt;
&lt;/tr&gt;</code></pre></table><p>接下来，我们要开发一个js框架，类似于requirejs和seajs，实现模块化管理依赖的功能。</p><p>最早的时候，所有Javascript代码都写在一个文件里面，只要加载这一个文件就够了。后来，代码越来越多，一个文件不够了，必须分成多个文件，依次加载。下面的网页代码，相信很多人都见过。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"1.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"2.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"3.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"5.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"6.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这段代码依次加载多个js文件，这样的写法有很大的缺点。首先，加载的时候，浏览器会停止网页渲染，加载文件越多，网页失去响应的时间就会越长；其次，由于js文件之间存在依赖关系，因此必须严格保证加载顺序（比如上例的1.js要在2.js的前面），依赖性最大的模块一定要放到最后加载，当依赖关系很复杂的时候，代码的编写和维护都会变得困难。</p><p>详情请参考<a href="http://www.ruanyifeng.com/blog/2012/11/require_js.html" target="_blank" rel="noopener">Javascript模块化编程（三）：require.js的用法</a>。</p><p>我们要编写的vkjs，就是为了解决这两个问题：<br>（1）实现js文件的异步加载，避免网页失去响应；<br>（2）管理模块之间的依赖性，便于代码的编写和维护。</p><h1 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h1><p>1、安装node，参考<a href="https://github.com/creationix/nvm" target="_blank" rel="noopener">nvm项目</a>。<br>2、安装puer，参考<a href="http://leeluolee.github.io/use-puer-helpus-developer-frontend/" target="_blank" rel="noopener">超简单工具puer</a>。</p><h1 id="异步加载"><a href="#异步加载" class="headerlink" title="异步加载"></a>异步加载</h1><p>首先，我们来看怎样实现异步加载。js的异步很容易实现，使用回调函数即可。</p><h2 id="引入js"><a href="#引入js" class="headerlink" title="引入js"></a>引入js</h2><p>js的引入，不是写在页面中，那么，肯定是写在js中。参考<a href="https://coolshell.cn/articles/9749.html#jtss-tsina" target="_blank" rel="noopener">JAVASCRIPT 装载和执行</a>和<a href="https://creamidea.github.io/static/html/articles/Preload-Javascript.html" target="_blank" rel="noopener">Preload Javascript</a>，我们可以写出如下代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> vk_config = &#123;</span><br><span class="line">        root: <span class="string">'/'</span>,</span><br><span class="line">        path: &#123;</span><br><span class="line">            <span class="string">'jquery'</span>: <span class="string">'lib/jquery/jquery.min.js'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> vk = &#123;</span><br><span class="line">        loadjs: <span class="function"><span class="keyword">function</span>(<span class="params">script_filename,callback</span>) </span>&#123;</span><br><span class="line">            script_doc = <span class="built_in">document</span>.getElementById(script_filename);</span><br><span class="line">            <span class="keyword">if</span>(script_doc)&#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</span><br><span class="line">            script.setAttribute(<span class="string">'id'</span>, script_filename);</span><br><span class="line">            script.setAttribute(<span class="string">'type'</span>, <span class="string">'text/javascript'</span>);</span><br><span class="line">            script.setAttribute(<span class="string">'src'</span>, vk_config.root + vk_config.path[script_filename]);</span><br><span class="line">            <span class="built_in">document</span>.getElementsByTagName(<span class="string">'body'</span>)[<span class="number">0</span>].appendChild(script);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'loading:'</span>+script_filename);</span><br><span class="line">            script.onload = script.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'loaded:'</span>+script_filename);</span><br><span class="line">                callback();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">window</span>.vk = vk;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>在页面中使用的时候，调用loadjs方法即可。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>vkjs<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>vkjs测试页面<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../src/vk.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    vk.loadjs(<span class="string">'jquery'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log($(<span class="string">'h2'</span>).html());</span></span><br><span class="line">    &#125;); </span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">'页面加载完毕'</span>);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>查看控制台，我们可以看到执行顺序：</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">loading:</span>jquery</span><br><span class="line">页面加载完毕</span><br><span class="line"><span class="symbol">loaded:</span>jquery</span><br><span class="line">vkjs测试页面</span><br></pre></td></tr></table></figure><p>引入jquery的时候，该script是插入到页面最底部的，但是我们在回调函数中依然可以使用<code>$</code>，因为jquery加载完毕后我们才调用回调函数，这时就和页面位置无关了。</p><h2 id="引入多个js"><a href="#引入多个js" class="headerlink" title="引入多个js"></a>引入多个js</h2><p>引入单个js，是比较容易的。而在开发时，常常需要引入多个js，如果多次调用loadjs方法的话，非常不友好。那么，怎样引入多个js文件？同样的，我们需要先加载js文件，等到所有js文件加载完成，调用回调函数即可。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> vk_config = &#123;</span><br><span class="line">        root: <span class="string">'/'</span>,</span><br><span class="line">        path: &#123;</span><br><span class="line">            <span class="string">'jquery'</span>: <span class="string">'lib/jquery/jquery.min.js'</span>,</span><br><span class="line">            <span class="string">'layer'</span>: <span class="string">'lib/layer/layer.js'</span>,</span><br><span class="line">            <span class="string">'template'</span>: <span class="string">'lib/art-template/dist/template.js'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> vk = &#123;</span><br><span class="line">        loadjs: <span class="function"><span class="keyword">function</span>(<span class="params">script_filename,callback</span>) </span>&#123;</span><br><span class="line">            script_doc = <span class="built_in">document</span>.getElementById(script_filename);</span><br><span class="line">            <span class="keyword">if</span>(script_doc)&#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</span><br><span class="line">            script.setAttribute(<span class="string">'id'</span>, script_filename);</span><br><span class="line">            script.setAttribute(<span class="string">'type'</span>, <span class="string">'text/javascript'</span>);</span><br><span class="line">            script.setAttribute(<span class="string">'src'</span>, vk_config.root + vk_config.path[script_filename]);</span><br><span class="line">            <span class="built_in">document</span>.getElementsByTagName(<span class="string">'body'</span>)[<span class="number">0</span>].appendChild(script);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'loading:'</span>+script_filename);</span><br><span class="line">            script.onload = script.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'loaded:'</span>+script_filename);</span><br><span class="line">                callback();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        count_js: <span class="number">0</span>,</span><br><span class="line">        use: <span class="function"><span class="keyword">function</span>(<span class="params">ids,callback</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(ids)) &#123;</span><br><span class="line">                ids = [ids];</span><br><span class="line">            &#125;</span><br><span class="line">            that.count_js = ids.length;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;ids.length;i++)&#123;</span><br><span class="line">                (<span class="function"><span class="keyword">function</span>(<span class="params">i</span>)</span>&#123;</span><br><span class="line">                    script_doc = <span class="built_in">document</span>.getElementById(ids[i]);</span><br><span class="line">                    <span class="keyword">if</span>(script_doc)&#123;</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</span><br><span class="line">                    script.setAttribute(<span class="string">'id'</span>, ids[i]);</span><br><span class="line">                    script.setAttribute(<span class="string">'type'</span>, <span class="string">'text/javascript'</span>);</span><br><span class="line">                    script.setAttribute(<span class="string">'src'</span>, vk_config.root + vk_config.path[ids[i]]);</span><br><span class="line">                    <span class="built_in">document</span>.getElementsByTagName(<span class="string">'body'</span>)[<span class="number">0</span>].appendChild(script);</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">'loading:'</span>+ids[i]);</span><br><span class="line">                    script.onload = script.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">'loaded:'</span>+ids[i]); </span><br><span class="line">                        that.count_js--;</span><br><span class="line">                        <span class="keyword">if</span>(that.count_js == <span class="number">0</span>)&#123;</span><br><span class="line">                            callback();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)(i);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">window</span>.vk = vk;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>在页面使用的时候，调用use方法：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>vkjs<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>vkjs测试页面<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../src/vk.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    vk.use([<span class="string">'jquery'</span>,<span class="string">'template'</span>],<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log($(<span class="string">'h2'</span>).html());</span></span><br><span class="line">    &#125;); </span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">'页面加载完毕'</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>查看控制台，我们可以看到执行顺序：</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">loading:</span>jquery</span><br><span class="line"><span class="symbol">loading:</span>template</span><br><span class="line">页面加载完毕</span><br><span class="line"><span class="symbol">loaded:</span>template</span><br><span class="line"><span class="symbol">loaded:</span>jquery</span><br><span class="line">vkjs测试页面</span><br></pre></td></tr></table></figure><h2 id="有序引入js"><a href="#有序引入js" class="headerlink" title="有序引入js"></a>有序引入js</h2><p>很多时候，我们不止要引入多个js，而且要有顺序地引入js。为了实现有序加载js，又不想使用js回调重重嵌套，所以郝同学选择使用Promise。具体用法参考<a href="http://www.ruanyifeng.com/blog/2012/12/asynchronous%EF%BC%BFjavascript.html" target="_blank" rel="noopener">Javascript异步编程的4种方法</a>、<a href="https://segmentfault.com/a/1190000002395343" target="_blank" rel="noopener">JavaScript Promise 告别异步乱嵌套</a>、<a href="http://www.cnblogs.com/lvdabao/p/es6-promise-1.html" target="_blank" rel="noopener">大白话讲解Promise（一）</a>。</p><p>未完待续。。。</p><h2 id="管理依赖"><a href="#管理依赖" class="headerlink" title="管理依赖"></a>管理依赖</h2><h1 id="源码分享"><a href="#源码分享" class="headerlink" title="源码分享"></a>源码分享</h1><p><a href="https://github.com/voidking/vkjs.git" target="_blank" rel="noopener">https://github.com/voidking/vkjs.git</a></p><h1 id="书签"><a href="#书签" class="headerlink" title="书签"></a>书签</h1><p><a href="http://www.ituring.com.cn/article/48461" target="_blank" rel="noopener">从零开始编写自己的JavaScript框架（一）</a></p><p><a href="http://www.ituring.com.cn/article/48463" target="_blank" rel="noopener">从零开始编写自己的JavaScript框架（二）</a></p><p><a href="http://www.imooc.com/learn/172" target="_blank" rel="noopener">jQuery源码解析（架构与依赖模块）</a></p><p><a href="https://github.com/JsAaron/jQuery" target="_blank" rel="noopener">Query源码解析（架构与依赖模块）对应源码</a></p><p><a href="http://island205.github.io/HelloSea.js/how-seajs-works.html" target="_blank" rel="noopener">Sea.js是如何工作的？</a></p><p><a href="http://wxx2258.github.io/sea-js%E6%BA%90%E7%A0%81%EF%BC%88Module-js%E6%A0%B8%E5%BF%83%E4%BB%A3%E7%A0%81%EF%BC%89/" target="_blank" rel="noopener">sea.js源码（Module.js核心代码）</a></p><p><a href="https://www.zhihu.com/question/21157540" target="_blank" rel="noopener">JS模块加载器加载原理是怎么样的？</a></p><p><a href="http://natumsol.github.io/a-mirco-cmd-loader/" target="_blank" rel="noopener">如何构建一个微型的CMD模块化加载器</a></p><p><a href="http://annn.me/how-to-realize-cmd-loader/" target="_blank" rel="noopener">如何实现一个 CMD 模块加载器</a></p><p><a href="http://www.jackness.org/grunt-%E5%AE%9E%E4%BE%8B%E4%B9%8B-%E6%9E%84%E5%BB%BA-seajs-%E9%A1%B9%E7%9B%AE/" target="_blank" rel="noopener">Grunt 实例之构建seajs项目</a></p><p><a href="http://www.zhangxinxu.com/wordpress/2012/04/js-dom%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6/" target="_blank" rel="noopener">漫谈js自定义事件、DOM/伪DOM自定义事件</a></p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.voidking.com/dev-vkjs-0/" title="从零开始打造自己的JavaScript框架——第0章">https://www.voidking.com/dev-vkjs-0/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！源站会及时更新知识点及修正错误，阅读体验也更好。欢迎分享，欢迎收藏~</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/node/" rel="tag"># node</a> <a href="/tags/%E6%A1%86%E6%9E%B6/" rel="tag"># 框架</a> <a href="/tags/js/" rel="tag"># js</a> <a href="/tags/puer/" rel="tag"># puer</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-vkphp-7/" rel="prev" title="从零开始打造自己的PHP框架——第7章"><i class="fa fa-chevron-left"></i> 从零开始打造自己的PHP框架——第7章</a></div><div class="post-nav-item"> <a href="/dev-object-detection/" rel="next" title="使用OpenCV实现实时视频目标检测">使用OpenCV实现实时视频目标检测<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zODU3Mi8xNTEwMA=="></div></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#概念简析"><span class="nav-number">1.</span> <span class="nav-text">概念简析</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#目标"><span class="nav-number">2.</span> <span class="nav-text">目标</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#环境准备"><span class="nav-number">3.</span> <span class="nav-text">环境准备</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#异步加载"><span class="nav-number">4.</span> <span class="nav-text">异步加载</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#引入js"><span class="nav-number">4.1.</span> <span class="nav-text">引入js</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#引入多个js"><span class="nav-number">4.2.</span> <span class="nav-text">引入多个js</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#有序引入js"><span class="nav-number">4.3.</span> <span class="nav-text">有序引入js</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#管理依赖"><span class="nav-number">4.4.</span> <span class="nav-text">管理依赖</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#源码分享"><span class="nav-number">5.</span> <span class="nav-text">源码分享</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#书签"><span class="nav-number">6.</span> <span class="nav-text">书签</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">学而不思则罔，思而不学则殆！</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">645</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">52</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">201</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2022</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://www.beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer><div id="needsharebutton-float"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css"><script src="/lib/needsharebutton/needsharebutton.js"></script><script>pbOptions={iconStyle:"box",boxForm:"horizontal",position:"bottomCenter",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-postbottom",pbOptions),flOptions={iconStyle:"box",boxForm:"horizontal",position:"topRight",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-float",flOptions)</script><script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  // window.livereOptions = {
  //   refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  // };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script></body></html>