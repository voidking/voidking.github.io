<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//cdn.jsdelivr.net/gh/voidking/voidking.github.io/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="名词解释Hibernate是一个开放源代码的对象关系映射框架，它对JDBC进行了非常轻量级的对象封装（未完全封装），使得Java程序员可以随心所欲的使用对象编程思维来操纵数据库。  Hibernate可以应用在任何使用JDBC的场合，既可以在Java的客户端程序使用，也可以在Servlet&#x2F;JSP的Web应用中使用，最具革命意义的是，Hibernate可以在应用EJB的J2EE架构中取代CMP，完"><meta property="og:type" content="article"><meta property="og:title" content="Hibernate概述"><meta property="og:url" content="https://www.voidking.com/dev-hibernate-start/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="名词解释Hibernate是一个开放源代码的对象关系映射框架，它对JDBC进行了非常轻量级的对象封装（未完全封装），使得Java程序员可以随心所欲的使用对象编程思维来操纵数据库。  Hibernate可以应用在任何使用JDBC的场合，既可以在Java的客户端程序使用，也可以在Servlet&#x2F;JSP的Web应用中使用，最具革命意义的是，Hibernate可以在应用EJB的J2EE架构中取代CMP，完"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2014-02-21T10:10:24.000Z"><meta property="article:modified_time" content="2014-02-21T10:10:24.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="java"><meta property="article:tag" content="eclipse"><meta property="article:tag" content="hibernate"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-hibernate-start/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>Hibernate概述 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">好好学习，天天向上！</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-hibernate-start/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="学而不思则罔，思而不学则殆！"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> Hibernate概述</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2014-02-21 10:10:24" itemprop="dateCreated datePublished" datetime="2014-02-21T10:10:24+00:00">2014-02-21</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="名词解释"><a href="#名词解释" class="headerlink" title="名词解释"></a>名词解释</h3><p>Hibernate是一个开放源代码的对象关系映射框架，它对JDBC进行了非常轻量级的对象封装（未完全封装），使得Java程序员可以随心所欲的使用对象编程思维来操纵数据库。</p><p>Hibernate可以应用在任何使用JDBC的场合，既可以在Java的客户端程序使用，也可以在Servlet/JSP的Web应用中使用，最具革命意义的是，Hibernate可以在应用EJB的J2EE架构中取代CMP，完成数据持久化的重任。</p><p>对目前的JavaEE信息化系统而言，通常采用面向对象分析和面向对象设计的过程。系统从需求分析到系统设计都是按面向对象方式进行。但是到详细设计阶段，由于数据持久化需要保存到关系数据库，不得不自底向上修改设计方案，又回到了按照过程进行编程的老路上来，这是非常令人沮丧的。</p><p>但人们的智慧是无穷的，遇到问题总会想办法解决，而不是与之妥协或绕道而走。Hibernate的问世解决了这个问题，Hibernate是一个面向Java环境的对象/关系映射工具，它可将对象模型表示的对象映射到基于SQL的关系数据模型中。这样就不用再为怎样用面向对象的方法进行数据持久化而大伤脑筋了。</p><span id="more"></span><h3 id="官网"><a href="#官网" class="headerlink" title="官网"></a>官网</h3><p><a target="_blank" rel="noopener" href="http://hibernate.org/">http://hibernate.org</a></p><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p><a target="_blank" rel="noopener" href="http://sourceforge.net/projects/hibernate/files/hibernate3/">http://sourceforge.net/projects/hibernate/files/hibernate3/</a></p><h3 id="导入包"><a href="#导入包" class="headerlink" title="导入包"></a>导入包</h3><p>解压缩hibernate-distribution-*.zip。导入hibernate-distribution-*GA/lib/required目录中的jar包。<br>hibernate3.jar 核心类库<br>antlr-2.7.6.jar 代码扫描器,用来翻译HQL语句<br>commons-collections-3.1.jar Apache Commons包中的一个，包含了一些Apache开发的集合类，功能比java.util.*强大<br>dom4j-1.6.1.jar 一个Java的XML API，类似于jdom，用来读写XML文件的<br>javassist-3.4.GA.jar Javassist 字节码解释器<br>jta-1.1.jar 标准的JTA API。<br>slf4j-api-1.5.2.jar<br>slf4j-nop-1.5.2.jar</p><h3 id="ORM"><a href="#ORM" class="headerlink" title="ORM"></a>ORM</h3><p>对象/关系映射ORM（Object-Relation Mapping）是用于将对象与对象之间的关系对应到数据库表与表之间的关系一种模式。</p><p>简单的说，ORM是通过使用描述对象和数据库之间映射的元数据，将Java程序中的对象自动持久化到关系数据库中。对象和关系数据是业务实现的两种表现形式，业务实体在内存中表现为对象，在数据库中表现为关系数据。内存中的对象之间存在着关联和继承关系。而在数据库中，关系数据无法直接表达多对多关联和继承关系。因此，ORM系统一般以中间件的形式存在，主要实现程序对象到关系数据库数据的映射。</p><p>一般的ORM包括四个部分：对持久类对象进行CRUD操作的API、用来规定类和类属性相关查询的语言或API、规定mapping metadata的工具，以及可以让ORM实现同事务对象一起进行dirty checking、lazy association fetching和其他优化操作的技术。</p><p>目前，很多厂商和开源社区都提供了持久层框架的实现，但其中Hibernate的轻量级ORM模型逐步确立了在Java ORM架构中的领导地位。</p><h3 id="Hibernate体系结构"><a href="#Hibernate体系结构" class="headerlink" title="Hibernate体系结构"></a>Hibernate体系结构</h3><p>Hibernate作为模型层/数据访问层。它通过配置文件（hibernate.cfg.xml或hibernate.properties）和映射文件（*.hbm.xml）把Java对象或持久化对象（Persistent Object，PO）映射到数据库中的数据表，然后通过操作PO，对数据库中的表进行各种操作。实际上，PO由POJO和映射文件生成。</p><h3 id="POJO、JavaBean和PO"><a href="#POJO、JavaBean和PO" class="headerlink" title="POJO、JavaBean和PO"></a>POJO、JavaBean和PO</h3><p>POJO = pure old java object or plain ordinary java object or what ever。<br>POJO中文可以翻译成：普通Java类，具有一部分get/set方法的那种类就可以称作POJO。</p><p>JavaBean则比POJO复杂很多，JavaBean是一种组件技术，就好像你做了一个扳子，而这个扳子会在很多地方被拿去用，这个扳子也提供多种功能(你可以拿这个扳子扳、锤、撬等等)，而这个扳子就是一个组件。<br>很显然POJO也是JavaBean的一种。一般在web应用程序中建立一个数据库的映射对象时，我们只能称它为POJO。<br>JavaBean必须满足如下规范：<br>1）必须有一个零参数的默认构造函数<br>2）必须有get和set方法，类的字段必须通过get/set方法来访问。</p><p>PO = persisent object 持久对象。<br>实际上，PO必须对应数据库中的entity，所以和POJO有所区别。比如说POJO是由new创建，由GC回收。但是PO是数据库insert创建，由数据库delete删除的。基本上持久对象生命周期和数据库密切相关。另外持久对象往往只能存在一个数据库Connection之中，Connnection关闭以后，持久对象就不存在了，而POJO只要不被GC回收，总是存在的。<br>由于存在诸多差别，因此PO在代码上肯定和POJO不同，起码PO相对于POJO会增加一些用来管理数据库entity状态的属性和方法。而ORM追求的目标就是要PO在使用上尽量和POJO一致，对于程序员来说，他们可以把PO当做POJO来用，而感觉不到PO的存在。<br>所以我们项目中的entity可以看作是POJO，其实Hibernate最后作持久，是把PO持久化的，主要的机制是：<br>1、编写POJO<br>2、编译POJO<br>3、直接运行，在运行期，由Hibernate的CGLIB动态把POJO转换为PO。</p><h3 id="应用实例"><a href="#应用实例" class="headerlink" title="应用实例"></a>应用实例</h3><p>Hibernate的配置文件是实体对象与数据库关系表之间相互转换的重要依据。一般而言，一个映射配置文件对应着数据库中一个关系表，关系表之间的关系也在映射文件中进行配置。</p><h4 id="建立数据库和表"><a href="#建立数据库和表" class="headerlink" title="建立数据库和表"></a>建立数据库和表</h4><p>使用MySQL，scott用户。在xscj数据库中建立kcb，表结构如下：</p><table><thead><tr><th align="center">项目名</th><th align="center">列名</th><th align="left">数据类型</th><th align="center">可空</th><th align="center">默认值</th><th align="left">说明</th></tr></thead><tbody><tr><td align="center">课程号</td><td align="center">KCH</td><td align="left">定长字符型（char3）</td><td align="center">×</td><td align="center">无</td><td align="left">主键</td></tr><tr><td align="center">课程名</td><td align="center">KCM</td><td align="left">不定长字符串型（varchar12）</td><td align="center">√</td><td align="center">无</td><td align="left"></td></tr><tr><td align="center">开学学期</td><td align="center">KXXQ</td><td align="left">整数型（smallint）</td><td align="center">√</td><td align="center">无</td><td align="left">只能为1~8</td></tr><tr><td align="center">学时</td><td align="center">XS</td><td align="left">整数型（int）</td><td align="center">√</td><td align="center">0</td><td align="left"></td></tr><tr><td align="center">学分</td><td align="center">XF</td><td align="left">整数型（int）</td><td align="center">√</td><td align="center">0</td><td align="left"></td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> kcb(</span><br><span class="line">kch <span class="type">char</span>(<span class="number">3</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key,</span><br><span class="line">kcm <span class="type">varchar</span>(<span class="number">12</span>),</span><br><span class="line">kxxq <span class="type">smallint</span> <span class="keyword">check</span>(kxxq<span class="operator">&gt;=</span><span class="number">1</span> <span class="keyword">and</span> kxxq<span class="operator">&lt;=</span><span class="number">8</span>),</span><br><span class="line">xs <span class="type">int</span> <span class="keyword">default</span> <span class="number">0</span>,</span><br><span class="line">xf <span class="type">int</span> <span class="keyword">default</span> <span class="number">0</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="新建项目"><a href="#新建项目" class="headerlink" title="新建项目"></a>新建项目</h4><p>新建Dynamic Web Project，命名为hibernate。</p><h4 id="添加hibernate开发能力"><a href="#添加hibernate开发能力" class="headerlink" title="添加hibernate开发能力"></a>添加hibernate开发能力</h4><p>右击项目名，Properties，Java Build Path，Libraries，Add Library…，User Library，Next，User Libraries…，New…，输入“hibernate”，OK，Add External JARs…，选中需要的jar文件，打开，OK。</p><h4 id="POJO对象和映射文件"><a href="#POJO对象和映射文件" class="headerlink" title="POJO对象和映射文件"></a>POJO对象和映射文件</h4><p>新建包com.voidking.hibernate.model，在包中新建POJO，命名为Kcb，代码如下：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">voidking</span>.<span class="property">hibernate</span>.<span class="property">model</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Kcb</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">String</span> kch;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">String</span> kcm;</span><br><span class="line">	<span class="keyword">private</span> short kxxq;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">Integer</span> xs;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">Integer</span> xf;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Kcb</span>() &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">getKch</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> kch;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setKch</span>(<span class="params"><span class="built_in">String</span> kch</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">kch</span> = kch;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">getKcm</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> kcm;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setKcm</span>(<span class="params"><span class="built_in">String</span> kcm</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">kcm</span> = kcm;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> short <span class="title function_">getKxxq</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> kxxq;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setKxxq</span>(<span class="params">short kxxq</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">kxxq</span> = kxxq;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Integer</span> <span class="title function_">getXs</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> xs;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setXs</span>(<span class="params">Integer xs</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">xs</span> = xs;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Integer</span> <span class="title function_">getXf</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> xf;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setXf</span>(<span class="params">Integer xf</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">xf</span> = xf;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在包中新建文件Kcb.hbm.xml，内容如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">hibernate-mapping</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- name指定POJO类，table指定对应数据库的表 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">&quot;com.voidking.hibernate.model.Kcb&quot;</span> <span class="attr">table</span>=<span class="string">&quot;kcb&quot;</span>&gt;</span></span><br><span class="line">    	<span class="comment">&lt;!-- name指定主键，type主键类型 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">&quot;kch&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;kch&quot;</span> <span class="attr">length</span>=<span class="string">&quot;3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line">        	<span class="comment">&lt;!-- 主键生成策略 --&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">&quot;assigned&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- POJO属性及表中字段对应的属性 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;kcm&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;kcm&quot;</span> <span class="attr">length</span>=<span class="string">&quot;12&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;kxxq&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Short&quot;</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;kxxq&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;xs&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;xs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;xf&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;xf&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="hibernate-cfg-xml"><a href="#hibernate-cfg-xml" class="headerlink" title="hibernate.cfg.xml"></a>hibernate.cfg.xml</h4><p>在src中新建hibernate.cfg.xml或者hibernate.properties，内容如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&#x27;1.0&#x27; encoding=&#x27;utf-8&#x27;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">hibernate-configuration</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;</span>&gt;</span></span><br><span class="line">     </span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-factory</span>&gt;</span></span><br><span class="line">     </span><br><span class="line">    <span class="comment">&lt;!-- Database connection settings --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;connection.driver_class&quot;</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;connection.url&quot;</span>&gt;</span>jdbc:mysql://localhost/xscj<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;connection.username&quot;</span>&gt;</span>scott<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;connection.password&quot;</span>&gt;</span>tiger<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">         </span><br><span class="line">    <span class="comment">&lt;!-- JDBC connection pool (use the built-in) --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;property name=&quot;connection.pool_size&quot;&gt;1&lt;/property&gt; --&gt;</span></span><br><span class="line">         </span><br><span class="line">    <span class="comment">&lt;!-- SQL dialect --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dialect&quot;</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">         </span><br><span class="line">    <span class="comment">&lt;!-- Echo all executed SQL to stdout --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;show_sql&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">         </span><br><span class="line">    <span class="comment">&lt;!-- Enable Hibernate&#x27;s automatic session context management --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;--&gt;</span></span><br><span class="line">         </span><br><span class="line">    <span class="comment">&lt;!-- Drop and re-create the database schema on startup --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;property name=&quot;hbm2ddl.auto&quot;&gt;create&lt;/property&gt; --&gt;</span></span><br><span class="line">         </span><br><span class="line">    <span class="comment">&lt;!-- Disable the second-level cache --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cache.provider_class&quot;</span>&gt;</span>org.hibernate.cache.NoCacheProvider<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     </span><br><span class="line">    <span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">&quot;com/voidking/hibernate/model/Kcb.hbm.xml&quot;</span>/&gt;</span></span><br><span class="line">         </span><br><span class="line">    <span class="tag">&lt;/<span class="name">session-factory</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="创建测试类"><a href="#创建测试类" class="headerlink" title="创建测试类"></a>创建测试类</h4><p>新建包com.voidking.hibernate.test，新建类Test，代码如下：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">package com.voidking.hibernate.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.hibernate.Query;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.<span class="keyword">Session</span>;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.SessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.<span class="keyword">Transaction</span>;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.cfg.<span class="keyword">Configuration</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.voidking.hibernate.model.Kcb;</span><br><span class="line"></span><br><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> Test &#123;</span><br><span class="line">	<span class="built_in">public</span> static <span class="type">void</span> main(String[] args)&#123;</span><br><span class="line">		//创建<span class="keyword">Session</span>对象</span><br><span class="line">		<span class="keyword">Configuration</span> cfg = <span class="built_in">new</span> <span class="keyword">Configuration</span>();</span><br><span class="line">        SessionFactory sf = cfg.configure().buildSessionFactory();</span><br><span class="line">		<span class="keyword">Session</span> <span class="keyword">session</span> = sf.openSession();</span><br><span class="line">		</span><br><span class="line">		//创建事务对象</span><br><span class="line">		<span class="keyword">Transaction</span> ts=<span class="keyword">session</span>.beginTransaction();</span><br><span class="line">		Kcb kc = <span class="built_in">new</span> Kcb();</span><br><span class="line">		kc.setKch(&quot;198&quot;);</span><br><span class="line">		kc.setKcm(&quot;机电&quot;);</span><br><span class="line">		kc.setKxxq(<span class="built_in">new</span> Short((short) <span class="number">5</span>));</span><br><span class="line">		kc.setXf(<span class="built_in">new</span> <span class="type">Integer</span>(<span class="number">5</span>));</span><br><span class="line">		kc.setXs(<span class="built_in">new</span> <span class="type">Integer</span>(<span class="number">59</span>));</span><br><span class="line">		</span><br><span class="line">		//保存对象</span><br><span class="line">		<span class="keyword">session</span>.save(kc);</span><br><span class="line">		ts.<span class="keyword">commit</span>();</span><br><span class="line">		Query query = <span class="keyword">session</span>.createQuery(&quot;from Kcb where kch=198&quot;);</span><br><span class="line">		List list = query.list();</span><br><span class="line">		Kcb kcl=(Kcb)list.<span class="keyword">get</span>(<span class="number">0</span>);</span><br><span class="line">		<span class="keyword">System</span>.<span class="keyword">out</span>.println(kcl.getKcm());</span><br><span class="line">		<span class="keyword">session</span>.<span class="keyword">close</span>();</span><br><span class="line">		sf.<span class="keyword">close</span>();</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="导入数据库驱动"><a href="#导入数据库驱动" class="headerlink" title="导入数据库驱动"></a>导入数据库驱动</h4><p>导入<code>mysql-connector-java-*-bin.jar</code>。</p><h4 id="运行错误"><a href="#运行错误" class="headerlink" title="运行错误"></a>运行错误</h4><p>运行Test.java为Java Application，出现错误。<br><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax/persistence/EntityListeners</code><br>原因是缺少<code>hibernate-jpa-*-api-*.Final.jar</code>，导入该包，问题解决。</p><h4 id="提示"><a href="#提示" class="headerlink" title="提示"></a>提示</h4><p>运行错误解决了，但是控制台仍然有提示信息。</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">SLF4J:</span> Failed to load class <span class="string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span>.</span><br><span class="line"><span class="symbol">SLF4J:</span> Defaulting to no-operation (<span class="keyword">NOP</span>) logger implementation</span><br><span class="line"><span class="symbol">SLF4J:</span> See http://www.slf4j<span class="meta">.org</span>/codes.html<span class="meta">#StaticLoggerBinder for further details.</span></span><br></pre></td></tr></table></figure><p>经过搜索，解决办法如下：</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Placing one (<span class="keyword">and </span>only one) of slf4j-<span class="keyword">nop.jar, </span>slf4j-simple.<span class="keyword">jar, </span>slf4j-log4j12.<span class="keyword">jar, </span>slf4j-<span class="keyword">jdk14.jar </span><span class="keyword">or </span>logback-classic.<span class="keyword">jar </span>on the class path <span class="keyword">should </span>solve the problem.</span><br></pre></td></tr></table></figure><p>之前下载的hibernate压缩包里没有slf4j-nop.jar，就没有导入。单独下载该jar文件，导入，问题解决。</p><h4 id="再次运行错误"><a href="#再次运行错误" class="headerlink" title="再次运行错误"></a>再次运行错误</h4><p>其实，报错是应该的，因为两次插入的数据完全相同，而主键要求唯一。这时，应该怎么配置，才能在不改变代码的情况下不断运行呢？<br>经测试，只要在hibernate.cfg.xml配置文件中，把注释中的这一句释放出来，就可以了。</p><figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">property</span><span class="string"> name</span>=<span class="string">&quot;hbm2ddl.auto&quot;</span>&gt;create&lt;/<span class="keyword">property</span><span class="string">&gt;</span></span><br></pre></td></tr></table></figure><h3 id="各文件的作用"><a href="#各文件的作用" class="headerlink" title="各文件的作用"></a>各文件的作用</h3><h4 id="POJO和映射配置文件"><a href="#POJO和映射配置文件" class="headerlink" title="POJO和映射配置文件"></a>POJO和映射配置文件</h4><p>POJO中的属性和表中的字段是一一对应的。那么通过什么方法把它们一一映射起来呢？就是*.hbm.xml映射文件。<br>该配置文件大致分为3个部分：<br>1、类、表映射配置</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">class</span> <span class="type">name</span>=&quot;com.voidking.hibernate.model.Kcb&quot; table=&quot;kcb&quot;&gt;</span><br></pre></td></tr></table></figure><p>2、id映射配置</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">&quot;kch&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;kch&quot;</span> <span class="attr">length</span>=<span class="string">&quot;3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">&quot;assigned&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Hibernate的主键生成策略分为三大类：Hibernate对主键id赋值、应用程序自身对id赋值、由数据库对id赋值。</p><ul><li>assigned：应用程序自身对id赋值。</li><li>native：由数据库对id赋值。</li><li>hilo：通过hi/lo算法实现的主键生成机制，需要额外的数据库表保存主键生成历史状态。</li><li>seqhilo：与hi/lo类似，通过hi/lo算法实现的主键生成机制，只是主键历史状态保存在sequence中，适用于支持sequence的数据库，比如Oracle。</li><li>increment：主键按数值顺序递增。</li><li>identity：采用数据库提供的主键生成机制，如SQL Server、MySQL中的自增主键生成机制。</li><li>sequence：采用数据库提供的sequence机制生成主键，如Oracle sequence。</li><li>uuid.hex：由Hibernate基于128位唯一值产生算法，根据当前设备IP、时间、JVM启动时间、内部自增量等4个参数生成十六进制数值（编码长度为32位的字符串表示）作为主键。即使是在多实例并发运行的情况下，这种算法在最大程度上保证了产生id的唯一性。</li><li>uuid.string：与uuid.hex类似，只是对生成的主键进行编码（长度16位）。在某些数据库中可能出现问题。</li><li>foreign：使用外部表的字段作为主键。</li><li>select：Hibernate3引入的主键生成机制，主要针对遗留系统的改造工程。</li></ul><p>由于常用的数据库，如SQL Sever、MySQL等，都提供了易用的主键生成机制（如auto-increase字段）。可以在数据库提供的主键生成机制上，采用generator class=”native”的主键生成方式。</p><p>3、属性、字段映射配置</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;property <span class="type">name</span>=&quot;kcm&quot; <span class="keyword">type</span>=&quot;java.lang.String&quot;&gt;</span><br><span class="line">	&lt;<span class="keyword">column</span> <span class="type">name</span>=&quot;kcm&quot; length=&quot;12&quot;&gt;&lt;/<span class="keyword">column</span>&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure><p>4、关系配置<br>表与表之间的关系，会被映射成类与类之间的关系，它们的关系的具体体现也会在该配置文件中配置。</p><h4 id="hibernate-cfg-xml-1"><a href="#hibernate-cfg-xml-1" class="headerlink" title="hibernate.cfg.xml"></a>hibernate.cfg.xml</h4><p>Hibernate配置文件主要用于配置数据库连接和Hibernate运行时所需要的各种属性，配置文件一般默认为hibernate.cfg.xml，Hibernate初始化期间会自动在classpath中寻找这个文件，并读取其中的配置信息，为后期数据库操作做好准备。</p><h4 id="HibernateSessionFactory"><a href="#HibernateSessionFactory" class="headerlink" title="HibernateSessionFactory"></a>HibernateSessionFactory</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">package com.voidking.hibernate.util;</span><br><span class="line"></span><br><span class="line">import org.hibernate.HibernateException;</span><br><span class="line">import org.hibernate.Session;</span><br><span class="line">import org.hibernate.cfg.Configuration;</span><br><span class="line">import org.hibernate.service.ServiceRegistry;</span><br><span class="line">import org.hibernate.service.ServiceRegistryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Configures and provides access to Hibernate sessions, tied to the</span></span><br><span class="line"><span class="comment"> * current thread of execution.  Follows the Thread Local Session</span></span><br><span class="line"><span class="comment"> * pattern, see &#123;@link http://hibernate.org/42.html &#125;.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">HibernateSessionFactory</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** </span></span><br><span class="line"><span class="comment">     * Location of hibernate.cfg.xml file.</span></span><br><span class="line"><span class="comment">     * Location should be on the classpath as Hibernate uses  </span></span><br><span class="line"><span class="comment">     * #resourceAsStream style lookup for its configuration file. </span></span><br><span class="line"><span class="comment">     * The default classpath location of the hibernate config file is </span></span><br><span class="line"><span class="comment">     * in the default package. Use #setConfigFile() to update </span></span><br><span class="line"><span class="comment">     * the location of the configuration file for the current session.   </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> final ThreadLocal&lt;Session&gt; threadLocal = <span class="keyword">new</span> ThreadLocal&lt;Session&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> org.hibernate.SessionFactory sessionFactory;</span><br><span class="line">	</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Configuration configuration = <span class="keyword">new</span> Configuration();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ServiceRegistry serviceRegistry; </span><br><span class="line"></span><br><span class="line">	<span class="keyword">static</span> &#123;</span><br><span class="line">    	<span class="keyword">try</span> &#123;</span><br><span class="line">			configuration.configure();</span><br><span class="line">			serviceRegistry = <span class="keyword">new</span> ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();</span><br><span class="line">			sessionFactory = configuration.buildSessionFactory(serviceRegistry);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			System.err.println(<span class="string">&quot;%%%% Error Creating SessionFactory %%%%&quot;</span>);</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">HibernateSessionFactory</span>()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns the ThreadLocal Session instance.  Lazy initialize</span></span><br><span class="line"><span class="comment">     * the &lt;code&gt;SessionFactory&lt;/code&gt; if needed.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *  @return Session</span></span><br><span class="line"><span class="comment">     *  @throws HibernateException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Session <span class="title">getSession</span>() throws HibernateException</span> &#123;</span><br><span class="line">        Session session = (Session) threadLocal.<span class="keyword">get</span>();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (session == <span class="literal">null</span> || !session.isOpen()) &#123;</span><br><span class="line">			<span class="keyword">if</span> (sessionFactory == <span class="literal">null</span>) &#123;</span><br><span class="line">				rebuildSessionFactory();</span><br><span class="line">			&#125;</span><br><span class="line">			session = (sessionFactory != <span class="literal">null</span>) ? sessionFactory.openSession()</span><br><span class="line">					: <span class="literal">null</span>;</span><br><span class="line">			threadLocal.<span class="keyword">set</span>(session);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> session;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  Rebuild hibernate session factory</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">rebuildSessionFactory</span>()</span> &#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			configuration.configure();</span><br><span class="line">			serviceRegistry = <span class="keyword">new</span> ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();</span><br><span class="line">			sessionFactory = configuration.buildSessionFactory(serviceRegistry);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			System.err.println(<span class="string">&quot;%%%% Error Creating SessionFactory %%%%&quot;</span>);</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  Close the single hibernate session instance.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *  @throws HibernateException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">closeSession</span>() throws HibernateException</span> &#123;</span><br><span class="line">        Session session = (Session) threadLocal.<span class="keyword">get</span>();</span><br><span class="line">        threadLocal.<span class="keyword">set</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (session != <span class="literal">null</span>) &#123;</span><br><span class="line">            session.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  return session factory</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> org.hibernate.<span class="function">SessionFactory <span class="title">getSessionFactory</span>()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> sessionFactory;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  return hibernate configuration</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Configuration <span class="title">getConfiguration</span>()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> configuration;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面的实例中，我并没有使用这个类，如果使用它的话，Test.java文件可以修改如下：</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.voidking.hibernate.test;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.Query;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.Session;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.Transaction;</span><br><span class="line"><span class="keyword">import</span> org.model.Kcb;</span><br><span class="line"><span class="keyword">import</span> com.voidking.hibernate.util.HibernateSessionFactory;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> void main(<span class="keyword">String</span>[] args) &#123;</span><br><span class="line">	<span class="comment">// 调用HibernateSessionFactory的getSession方法创建Session对象</span></span><br><span class="line">	Session session=HibernateSessionFactory.getSession();</span><br><span class="line">	<span class="comment">// 创建事务对象</span></span><br><span class="line">	Transaction ts=session.beginTransaction();</span><br><span class="line">	Kcb kc=<span class="keyword">new</span> <span class="type">Kcb</span>();                       	<span class="comment">// 创建POJO类对象</span></span><br><span class="line">	kc.setKch(<span class="string">&quot;198&quot;</span>);                        	<span class="comment">// 设置课程号</span></span><br><span class="line">	kc.setKcm(<span class="string">&quot;机电&quot;</span>);                       	<span class="comment">// 设置课程名</span></span><br><span class="line">	kc.setKxxq(<span class="keyword">new</span> <span class="type">Short</span>((short) <span class="number">5</span>));			 	<span class="comment">// 设置开学学期</span></span><br><span class="line">	kc.setXf(<span class="keyword">new</span> <span class="type">Integer</span>(<span class="number">5</span>));				 	<span class="comment">// 设置学分</span></span><br><span class="line">	kc.setXs(<span class="keyword">new</span> <span class="type">Integer</span>(<span class="number">59</span>));				 	<span class="comment">// 设置学时</span></span><br><span class="line">	<span class="comment">// 保存对象</span></span><br><span class="line">	session.save(kc);</span><br><span class="line">	ts.commit();                             	<span class="comment">// 提交事务</span></span><br><span class="line">	Query query=session.createQuery(<span class="string">&quot;from Kcb where kch=198&quot;</span>);</span><br><span class="line">	List list=query.list();</span><br><span class="line">	Kcb kc1=(Kcb) list.<span class="keyword">get</span>(<span class="number">0</span>);</span><br><span class="line">	System.out.println(kc1.getKcm());</span><br><span class="line">	HibernateSessionFactory.closeSession();		 	<span class="comment">// 关闭Session</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>HibernateSessionFactory类是自定义的SessionFactory，名字可以根据自己的喜好来决定。在Hibernate中，Session负责完成对象持久化操作。该文件负责创建Session对象，以及关闭Session对象。从HibernateSessionFactory文件可以看出，Session对象的创建大致需要以下3个步骤：<br>1、初始化Hibernate配置管理类Configuration。<br>2、通过Configuration类实例创建Session的工厂类SessionFactory。<br>3、通过SessionFactory得到Session实例。</p><h3 id="Hibernate核心接口"><a href="#Hibernate核心接口" class="headerlink" title="Hibernate核心接口"></a>Hibernate核心接口</h3><p>Hibernate核心接口一共有5个：Configuration、SessionFactory、Session、Transaction和Query。这5个接口在任何开发中都会用到。通过这些接口，不仅可以对持久化对象进行存取，还能够进行事务控制。</p><h4 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h4><p>Configuration接口负责Hibernate的配置信息。Hibernate运行时需要一些底层实现的基本信息。这些信息包括：数据库URL、数据库用户名、数据库用户密码、数据库JDBC驱动类、数据库dialect。用于对特定数据库提供支持，其中包含了针对特定数据库特性的实现，如Hibernate数据库类型到特定数据库类型的映射等。<br>使用Hibernate必须首先提供这些基础信息以完成初始化工作，为后续操作做好准备。这些属性在Hibernate配置文件hibernate.cfg.xml中加以设定，当调用：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Configuration</span> config = <span class="built_in">new</span> <span class="keyword">Configuration</span>().configure();</span><br></pre></td></tr></table></figure><p>Hibernate会自动在目录下搜索hibernate.cfg.xml文件，并将其自动读取到内存中作为后续操作的基础配置。</p><h4 id="SessionFactory"><a href="#SessionFactory" class="headerlink" title="SessionFactory"></a>SessionFactory</h4><p>SessionFactory负责创建Session实例，可以通过Configuration实例构建SessionFactory。</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Configuration config <span class="operator">=</span> new Configuration().configure()<span class="comment">;</span></span><br><span class="line">SessionFactory sessionFactory <span class="operator">=</span> config.buildSessionFactory()<span class="comment">;</span></span><br></pre></td></tr></table></figure><p>Configuration实例config会根据当前数据库的配置信息，构造SessionFactory实例并返回。SessionFactory一旦构造完毕，即被赋予特定的配置信息。也就是说，以后config的任何变更将不会影响到已经创建的SessionFactory实例sessionFactory。<br>如果应用中需要访问多个数据库，针对每个数据库，应分别对其创建对应的SessionFactory实例。<br>SessionFactory保存了对应当前数据库配置的所有映射关系，同时也负责维护当前的二级数据缓存和Statement Pool。由此可见，SessionFactory的创建过程非常复杂、代价高昂。由于SessionFactory采用了线程安全的设计，可由多个线程并发调用。大多数情况下，应用中针对一个数据库共享一个SessionFactory实例即可。</p><h4 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h4><p>Session是Hibernate持久化操作的基础，提供了众多持久化方法，如save、update、delete等。通过这些方法，透明地完成对象的增加、删除、修改、查找等操作。<br>同时，值得注意的是，Hibernate Session的设计是非线程安全的，即一个Session实例同时只可由一个线程使用。同一个Session实例的多线程并发调用将导致难以预知的错误。<br>Session实例由SessionFactory构建：</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Configuration config <span class="operator">=</span> new Configuration().configure()<span class="comment">;</span></span><br><span class="line">SessionFactory sessionFactory <span class="operator">=</span> config.buildSessionFactory()<span class="comment">;</span></span><br><span class="line">Session session <span class="operator">=</span> sessionFactory.openSession()<span class="comment">;</span></span><br></pre></td></tr></table></figure><p>之后可以调用Session提供的save、get、delete等方法完成持久层操作。</p><h4 id="Transaction"><a href="#Transaction" class="headerlink" title="Transaction"></a>Transaction</h4><p>Transaction是Hibernate中进行事务操作的接口，Transaction接口是对实际事务实现的一个抽象，这些实现包括JDBC的事务、JTA中的UserTransaction，甚至可以是CORBA事务。之所以这样设计是可以让开发者能够使用一个统一的操作界面，使得自己的项目可以在不同的环境和容器之间方便地移植。事务对象通过Session创建。</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Transaction ts <span class="operator">=</span> session.beginTransaction()<span class="comment">;</span></span><br></pre></td></tr></table></figure><h4 id="Query"><a href="#Query" class="headerlink" title="Query"></a>Query</h4><p>在Hibernate 2.X中，find()方法用于执行HQL语句。Hibernate 3.X废除了find()方法，取而代之的是Query接口，它们都用于执行HQL语句。Query和HQL是分不开的。</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Query query <span class="operator">=</span> session.createQuery(<span class="string">&quot;from Kcb where kch=198&quot;</span>)<span class="comment">;</span></span><br></pre></td></tr></table></figure><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Query</span> <span class="keyword">query</span> = session.createQuery(<span class="string">&quot;from Kcb where kch=?&quot;</span>);</span><br><span class="line"><span class="keyword">query</span>.setString(0,<span class="string">&quot;要设置的值&quot;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Query</span> <span class="keyword">query</span> = session.createQuery(<span class="string">&quot;from Kcb where kch=:kchValue&quot;</span>);</span><br><span class="line"><span class="keyword">query</span>.setString(<span class="string">&quot;kchValue&quot;</span>,<span class="string">&quot;要设置的值&quot;</span>);</span><br></pre></td></tr></table></figure><p>由于上例中的kch为String类型，所以设置的时候用setString，如果是int类型就要用setInt。还有一种通用的设置方法，就是setParameter方法，不管什么类型的参数都可以应用。</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">query</span>.setParameter(<span class="number">0</span>,<span class="string">&quot;要设置的值&quot;</span>);</span><br><span class="line"><span class="keyword">query</span>.setParameter(<span class="string">&quot;kchValue&quot;</span>,<span class="string">&quot;要设置的值&quot;</span>);</span><br></pre></td></tr></table></figure><p>Query还有一个list()方法，用于取得一个List集合的示例，此示例中包括可能是一个Object集合，也可能是Object数组集合。</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Query query <span class="operator">=</span> session.createQuery(<span class="string">&quot;form Kcb where kch=198&quot;</span>)<span class="comment">;</span></span><br><span class="line">List list <span class="operator">=</span> query.list()<span class="comment">;</span></span><br></pre></td></tr></table></figure><h3 id="HQL查询"><a href="#HQL查询" class="headerlink" title="HQL查询"></a>HQL查询</h3><p>HQL是Hibernate Query Language的缩写。HQL的语法很像SQL，但HQL是一种面向对象查询语言。SQL的操作对象是数据表和列等数据对象，而HQL的操作对象是类、实例、属性等。HQL的查询依赖于Query类，每个Query实例对应一个查询对象。</p><h4 id="基本查询"><a href="#基本查询" class="headerlink" title="基本查询"></a>基本查询</h4><p>1、查询所有课程信息</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Session session<span class="operator">=</span>HibernateSessionFactory.getSession()<span class="comment">;</span></span><br><span class="line">Transaction ts<span class="operator">=</span>session.beginTransaction()<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">Query query<span class="operator">=</span>session.createQuery(<span class="string">&quot;from Kcb&quot;</span>)<span class="comment">;</span></span><br><span class="line">List list<span class="operator">=</span>query.list()<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">ts.commit()<span class="comment">; </span></span><br><span class="line">HibernateSessionFactory.closeSession()<span class="comment">;		 	</span></span><br></pre></td></tr></table></figure><p>2、查询某门课程信息</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Session session<span class="operator">=</span>HibernateSessionFactory.getSession()<span class="comment">;</span></span><br><span class="line">Transaction ts<span class="operator">=</span>session.beginTransaction()<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">Query query<span class="operator">=</span>session.createQuery(<span class="string">&quot;from Kcb order by xs desc&quot;</span>)<span class="comment">;</span></span><br><span class="line">query.setMaxResults(<span class="number">1</span>)<span class="comment">;//设置最大检索数目为1</span></span><br><span class="line">Kcb kc <span class="operator">=</span> (Kcb)query.uniqueResult()<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">ts.commit()<span class="comment">; </span></span><br><span class="line">HibernateSessionFactory.closeSession()<span class="comment">;		 	</span></span><br></pre></td></tr></table></figure><p>3、查询满足条件的课程信息</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Session session<span class="operator">=</span>HibernateSessionFactory.getSession()<span class="comment">;</span></span><br><span class="line">Transaction ts<span class="operator">=</span>session.beginTransaction()<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">Query query<span class="operator">=</span>session.createQuery(<span class="string">&quot;from Kcb where kch=001&quot;</span>)<span class="comment">;</span></span><br><span class="line">List list<span class="operator">=</span>query.list()<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">ts.commit()<span class="comment">; </span></span><br><span class="line">HibernateSessionFactory.closeSession()<span class="comment">;		 	</span></span><br></pre></td></tr></table></figure><h4 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h4><p>1、按指定参数查询</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Session <span class="attribute">session</span>=HibernateSessionFactory.getSession();</span><br><span class="line">Transaction <span class="attribute">ts</span>=session.beginTransaction();</span><br><span class="line"></span><br><span class="line">Query <span class="attribute">query</span>=session.createQuery(&quot;from Kcb where <span class="attribute">kcm</span>=?&quot;);</span><br><span class="line">query.setParameter(0,<span class="string">&quot;计算机基础&quot;</span>);</span><br><span class="line">List <span class="attribute">list</span>=query.list();</span><br><span class="line"></span><br><span class="line">ts.commit(); </span><br><span class="line">HibernateSessionFactory.closeSession();		 	</span><br></pre></td></tr></table></figure><p>2、使用范围运算查询</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Session session<span class="operator">=</span>HibernateSessionFactory.getSession()<span class="comment">;</span></span><br><span class="line">Transaction ts<span class="operator">=</span>session.beginTransaction()<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">Query query<span class="operator">=</span>session.createQuery(<span class="string">&quot;from Kcb where (xs between 40 and 60) and kcm in(&#x27;计算机基础&#x27;,&#x27;数据结构&#x27;)&quot;</span>)<span class="comment">;</span></span><br><span class="line">List list<span class="operator">=</span>query.list()<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">ts.commit()<span class="comment">; </span></span><br><span class="line">HibernateSessionFactory.closeSession()<span class="comment">;		 	</span></span><br></pre></td></tr></table></figure><p>3、使用比较运算符查询</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Session session<span class="operator">=</span>HibernateSessionFactory.getSession()<span class="comment">;</span></span><br><span class="line">Transaction ts<span class="operator">=</span>session.beginTransaction()<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">Query query<span class="operator">=</span>session.createQuery(<span class="string">&quot;from Kcb where xs &gt; 50 and kcm is not null&quot;</span>)<span class="comment">;</span></span><br><span class="line">List list<span class="operator">=</span>query.list()<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">ts.commit()<span class="comment">; </span></span><br><span class="line">HibernateSessionFactory.closeSession()<span class="comment">;		 	</span></span><br></pre></td></tr></table></figure><p>4、使用字符串匹配运算查询</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Session session<span class="operator">=</span>HibernateSessionFactory.getSession()<span class="comment">;</span></span><br><span class="line">Transaction ts<span class="operator">=</span>session.beginTransaction()<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">Query query<span class="operator">=</span>session.createQuery(<span class="string">&quot;from Kcb where kch like &#x27;%001%&#x27; and kcm like &#x27;计算机%&#x27;&quot;</span>)<span class="comment">;</span></span><br><span class="line">List list<span class="operator">=</span>query.list()<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">ts.commit()<span class="comment">; </span></span><br><span class="line">HibernateSessionFactory.closeSession()<span class="comment">;		 	</span></span><br></pre></td></tr></table></figure><h4 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h4><p>在页面上显示数据结果时，如果数据太多，一个页面无法全部显示，这是务必要对查询结果进行分页显示。为了满足分页查询的需要，Hibernate的Query实例提供了两个有用的方法：setFirstResult(int firstResult)和setMaxResult(int maxResult)。</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Session session<span class="operator">=</span>HibernateSessionFactory.getSession()<span class="comment">;</span></span><br><span class="line">Transaction ts<span class="operator">=</span>session.beginTransaction()<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">Query query<span class="operator">=</span>session.createQuery(<span class="string">&quot;from Kcb&quot;</span>)<span class="comment">;</span></span><br><span class="line">int pageNow<span class="operator">=</span><span class="number">1</span><span class="comment">;</span></span><br><span class="line">int pageSize<span class="operator">=</span><span class="number">5</span><span class="comment">;</span></span><br><span class="line">query.setFirstResult((pageNow-<span class="number">1</span>)*pageSize)<span class="comment">;</span></span><br><span class="line">query.setMaxResult(pageSize)<span class="comment">;</span></span><br><span class="line">List list<span class="operator">=</span>query.list()<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">ts.commit()<span class="comment">; </span></span><br><span class="line">HibernateSessionFactory.closeSession()<span class="comment">;		 	</span></span><br></pre></td></tr></table></figure><p>通常情况下，pageNow会作为一个参数传进来，这样就可以得到想要显示的页数的结果集了。</p><h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h3><p>《Java EE基础实用教程》，郑阿奇主编<br>关于对POJO PO 的理解：<a target="_blank" rel="noopener" href="http://fluagen.blog.51cto.com/146595/36396/">http://fluagen.blog.51cto.com/146595/36396/</a></p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.voidking.com/dev-hibernate-start/" title="Hibernate概述">https://www.voidking.com/dev-hibernate-start/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！源站会及时更新知识点及修正错误，阅读体验也更好。欢迎分享，欢迎收藏~</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/java/" rel="tag"># java</a> <a href="/tags/eclipse/" rel="tag"># eclipse</a> <a href="/tags/hibernate/" rel="tag"># hibernate</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-struts2-comprehensive-example/" rel="prev" title="Struts2综合应用实例"><i class="fa fa-chevron-left"></i> Struts2综合应用实例</a></div><div class="post-nav-item"> <a href="/dev-hibernate-orm/" rel="next" title="Hibernate关系映射">Hibernate关系映射<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"><div class="_xduxciwe4ao"></div><div class="_ft8kcphe7kl"></div><script type="text/javascript">(window.slotbydup=window.slotbydup||[]).push({id:"u6921432",container:"_ft8kcphe7kl",async:!0})</script><script type="text/javascript">(window.slotbydup=window.slotbydup||[]).push({id:"u6920911",container:"_xduxciwe4ao",async:!0}),(window.slotbydup=window.slotbydup||[]).push({id:"u6920919",container:"_053ydasmd31h",async:!0}),(window.slotbydup=window.slotbydup||[]).push({id:"u6921432",container:"_ft8kcphe7kl",async:!0})</script><script type="text/javascript" src="//cpro.baidustatic.com/cpro/ui/cm.js" async="async" defer="defer"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3284447971731414" crossorigin="anonymous"></script></div><div class="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zODU3Mi8xNTEwMA=="></div></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A"><span class="nav-number">1.</span> <span class="nav-text">名词解释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%98%E7%BD%91"><span class="nav-number">2.</span> <span class="nav-text">官网</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD"><span class="nav-number">3.</span> <span class="nav-text">下载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5%E5%8C%85"><span class="nav-number">4.</span> <span class="nav-text">导入包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ORM"><span class="nav-number">5.</span> <span class="nav-text">ORM</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hibernate%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="nav-number">6.</span> <span class="nav-text">Hibernate体系结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#POJO%E3%80%81JavaBean%E5%92%8CPO"><span class="nav-number">7.</span> <span class="nav-text">POJO、JavaBean和PO</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B"><span class="nav-number">8.</span> <span class="nav-text">应用实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BB%BA%E7%AB%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E8%A1%A8"><span class="nav-number">8.1.</span> <span class="nav-text">建立数据库和表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="nav-number">8.2.</span> <span class="nav-text">新建项目</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0hibernate%E5%BC%80%E5%8F%91%E8%83%BD%E5%8A%9B"><span class="nav-number">8.3.</span> <span class="nav-text">添加hibernate开发能力</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#POJO%E5%AF%B9%E8%B1%A1%E5%92%8C%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6"><span class="nav-number">8.4.</span> <span class="nav-text">POJO对象和映射文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#hibernate-cfg-xml"><span class="nav-number">8.5.</span> <span class="nav-text">hibernate.cfg.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%B5%8B%E8%AF%95%E7%B1%BB"><span class="nav-number">8.6.</span> <span class="nav-text">创建测试类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A9%B1%E5%8A%A8"><span class="nav-number">8.7.</span> <span class="nav-text">导入数据库驱动</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C%E9%94%99%E8%AF%AF"><span class="nav-number">8.8.</span> <span class="nav-text">运行错误</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%90%E7%A4%BA"><span class="nav-number">8.9.</span> <span class="nav-text">提示</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%8D%E6%AC%A1%E8%BF%90%E8%A1%8C%E9%94%99%E8%AF%AF"><span class="nav-number">8.10.</span> <span class="nav-text">再次运行错误</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%84%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-number">9.</span> <span class="nav-text">各文件的作用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#POJO%E5%92%8C%E6%98%A0%E5%B0%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">9.1.</span> <span class="nav-text">POJO和映射配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#hibernate-cfg-xml-1"><span class="nav-number">9.2.</span> <span class="nav-text">hibernate.cfg.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HibernateSessionFactory"><span class="nav-number">9.3.</span> <span class="nav-text">HibernateSessionFactory</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hibernate%E6%A0%B8%E5%BF%83%E6%8E%A5%E5%8F%A3"><span class="nav-number">10.</span> <span class="nav-text">Hibernate核心接口</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Configuration"><span class="nav-number">10.1.</span> <span class="nav-text">Configuration</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SessionFactory"><span class="nav-number">10.2.</span> <span class="nav-text">SessionFactory</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Session"><span class="nav-number">10.3.</span> <span class="nav-text">Session</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Transaction"><span class="nav-number">10.4.</span> <span class="nav-text">Transaction</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Query"><span class="nav-number">10.5.</span> <span class="nav-text">Query</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HQL%E6%9F%A5%E8%AF%A2"><span class="nav-number">11.</span> <span class="nav-text">HQL查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2"><span class="nav-number">11.1.</span> <span class="nav-text">基本查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="nav-number">11.2.</span> <span class="nav-text">条件查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="nav-number">11.3.</span> <span class="nav-text">分页查询</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3"><span class="nav-number">12.</span> <span class="nav-text">参考文档</span></a></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="_053ydasmd31h"></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">学而不思则罔，思而不学则殆！</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">645</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">30</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">242</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2023</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer><div id="needsharebutton-float"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css"><script src="/lib/needsharebutton/needsharebutton.js"></script><script>pbOptions={iconStyle:"box",boxForm:"horizontal",position:"bottomCenter",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-postbottom",pbOptions),flOptions={iconStyle:"box",boxForm:"horizontal",position:"topRight",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-float",flOptions)</script><script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  // window.livereOptions = {
  //   refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  // };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script></body></html>