<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//qiniu-cdn.voidking.com/doc/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="Prometheus简介 Prometheus is an open-source systems monitoring and alerting toolkit originally built at SoundCloud. Since its inception in 2012, many companies and organizations have adopted Prometheus,"><meta property="og:type" content="article"><meta property="og:title" content="Prometheus入门篇"><meta property="og:url" content="https://www.voidking.com/dev-prometheus-start/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="Prometheus简介 Prometheus is an open-source systems monitoring and alerting toolkit originally built at SoundCloud. Since its inception in 2012, many companies and organizations have adopted Prometheus,"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2020-01-13T20:00:00.000Z"><meta property="article:modified_time" content="2024-09-07T08:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="prometheus"><meta property="article:tag" content="监控"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-prometheus-start/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>Prometheus入门篇 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">一个计算机技术爱好者与学习者</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-prometheus-start/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="一个计算机技术爱好者与学习者"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> Prometheus入门篇</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-01-13 20:00:00" itemprop="dateCreated datePublished" datetime="2020-01-13T20:00:00+00:00">2020-01-13</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2024-09-07 08:00:00" itemprop="dateModified" datetime="2024-09-07T08:00:00+00:00">2024-09-07</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/monitoring/" itemprop="url" rel="index"><span itemprop="name">monitoring</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="Prometheus简介"><span class="post-title-index">1.</span><a href="#Prometheus简介" class="headerlink" title="Prometheus简介"></a> Prometheus简介</h1><blockquote><p>Prometheus is an open-source systems monitoring and alerting toolkit originally built at SoundCloud. Since its inception in 2012, many companies and organizations have adopted Prometheus, and the project has a very active developer and user community. It is now a standalone open source project and maintained independently of any company. To emphasize this, and to clarify the project’s governance structure, Prometheus joined the Cloud Native Computing Foundation in 2016 as the second hosted project, after Kubernetes.</p></blockquote><blockquote><p>Prometheus是在SoundCloud的基础上构建的开源系统监视和警报工具。自从2012年以来，许多公司和组织都采用了Prometheus，该项目拥有非常活跃的开发人员和用户社区。现在，它是一个独立的开源项目，并且独立于任何公司进行维护。为了强调这一点并阐明项目的治理结构，Prometheus在2016年加入了Cloud Native Computing Foundation，这是继Kubernetes之后的第二个托管项目。</p></blockquote><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="https://prometheus.io/docs/introduction/overview/">Prometheus官方文档</a></li><li><a target="_blank" rel="noopener" href="https://prometheus.io/docs/prometheus/latest/getting_started/">Prometheus - GETTING STARTED</a></li></ul><span id="more"></span><h1 id="Prometheus的核心概念"><span class="post-title-index">2.</span><a href="#Prometheus的核心概念" class="headerlink" title="Prometheus的核心概念"></a> Prometheus的核心概念</h1><p>Prometheus的核心概念包括：</p><ul><li>时间序列数据：Prometheus将数据以时间序列的形式存储，每个时间序列由一个唯一的指标名称和一组键值对（标签）标识。时间序列数据可以通过Prometheus的查询语言进行灵活查询。</li><li>抓取机制：Prometheus通过HTTP协议定期抓取被监控应用的指标数据。被监控的应用需要暴露一个HTTP端点，Prometheus会定期访问该端点获取数据。</li><li>数据模型：Prometheus使用一种多维数据模型来存储时间序列数据，每个时间序列都与一组标签相关联，这使得数据查询更加灵活和强大。</li><li>查询语言（PromQL）：Prometheus提供了一种强大的查询语言PromQL，用户可以利用它对时间序列数据进行复杂的查询和计算。</li><li>警报管理：Prometheus支持通过Alertmanager进行警报管理，用户可以根据自定义的规则设置警报，并通过多种渠道（如电子邮件、Slack等）发送通知。</li></ul><h1 id="Prometheus的核心组件"><span class="post-title-index">3.</span><a href="#Prometheus的核心组件" class="headerlink" title="Prometheus的核心组件"></a> Prometheus的核心组件</h1><h2 id="Prometheus-Server"><span class="post-title-index">3.1.</span><a href="#Prometheus-Server" class="headerlink" title="Prometheus Server"></a> Prometheus Server</h2><p>Prometheus Server是整个监控系统的核心组件。它负责定期从配置的目标中拉取(pull)监控数据，并将数据存储在本地的时间序列数据库中。Prometheus Server还提供了一种灵活的查询语言PromQL，用于查询和分析监控数据。</p><h2 id="Exporters"><span class="post-title-index">3.2.</span><a href="#Exporters" class="headerlink" title="Exporters"></a> Exporters</h2><p>Exporters是一组工具，用于将不支持直接暴露监控指标的应用程序或服务的指标数据转换为Prometheus可以抓取的格式。常见的Exporter包括Node Exporter(用于收集机器级别指标)、MySQL Exporter(用于收集MySQL数据库指标)等。</p><h2 id="PushGateway"><span class="post-title-index">3.3.</span><a href="#PushGateway" class="headerlink" title="PushGateway"></a> PushGateway</h2><p>Prometheus采集数据是用的Pull方式，Prometheus配置文件设置的X秒就是采集数据的频率。<br>但是有些数据并不适合这样的方式，比如短期作业或批处理作业生成的指标数据。由于这些作业是short-lived的，如果采用Pull的模式，可能在Prometheus采集之前，作业已经执行结束，最终采集不到数据。</p><p>对这样的数据可以使用PushGateway服务，PushGateway相当于一个暂存器，用于接收由短期作业或批处理作业生成的指标数据，并允许Prometheus Server从PushGateway中拉取这些数据。</p><p>如果没有短期作业或者批处理作业，那么我们并不需要PushGateway，因此PushGateway是一个可选的组件。</p><h2 id="Alertmanager"><span class="post-title-index">3.4.</span><a href="#Alertmanager" class="headerlink" title="Alertmanager"></a> Alertmanager</h2><p>Alertmanager负责处理来自Prometheus Server的告警。它可以对告警进行去重、分组和路由，并通过电子邮件、Slack、PagerDuty、Webhook等方式发送通知。</p><p>因为Alertmanager支持的通知方式是有限的，所以如果想要支持微信、钉钉、飞书等更多平台，我们还需要借助Webhook实现一个消息中转服务。该消息中转服务能够把Prometheus AlertManager发出的WebHook请求，转成微信、钉钉、飞书等平台可以接收的请求。</p><p>在实际开发和生产环境场景中，我们并不需要自己来实现消息中转服务，github上有很多开源的消息中转服务，推荐 PrometheusAlert 和 prometheus-webhook-dingtalk 。</p><p>消息中转服务的安装配置方法，请参考文档：</p><ul><li><a href="https://www.voidking.com/dev-prometheus-alert/">《PrometheusAlert全家桶》</a></li><li><a href="https://www.voidking.com/dev-prometheus-webhook-dingtalk/">《Prometheus AlertManager WebHook通知到到钉钉群》</a></li></ul><h1 id="Prometheus的工作原理"><span class="post-title-index">4.</span><a href="#Prometheus的工作原理" class="headerlink" title="Prometheus的工作原理"></a> Prometheus的工作原理</h1><p>1、Prometheus Server根据配置文件中定义的监控目标，定期通过HTTP协议拉取(pull)监控数据。</p><p>2、对于直接支持Prometheus的监控目标，Prometheus Server可以直接从目标获取数据。对于不支持的目标，需要使用Exporter将数据转换为Prometheus可以识别的格式。</p><p>3、Prometheus Server将拉取到的监控数据存储在本地的时间序列数据库中。</p><p>4、用户可以使用PromQL查询语言对存储的监控数据进行分析和可视化。Prometheus Server内置了一个Web UI，也可以与Grafana等可视化工具集成。</p><p>5、Prometheus Server会根据定义的告警规则，持续检查监控数据，一旦满足告警条件，就会向Alertmanager发送告警。Alertmanager负责对告警进行处理和通知。</p><h1 id="安装Prometheus"><span class="post-title-index">5.</span><a href="#安装Prometheus" class="headerlink" title="安装Prometheus"></a> 安装Prometheus</h1><p>1、下载Prometheus<br>访问<a target="_blank" rel="noopener" href="https://prometheus.io/download/">Prometheus官网</a>下载最新版本的Prometheus。</p><p>2、解压缩文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar xvfz prometheus-*.tar.gz</span><br></pre></td></tr></table></figure><p>3、启动Prometheus<br>进入解压后的目录，使用以下命令启动Prometheus</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./prometheus --config.file=prometheus.yml</span><br></pre></td></tr></table></figure><p>4、访问Prometheus界面<br>打开浏览器，访问<code>http://localhost:9090</code>，即可进入Prometheus的Web界面。</p><p>更多安装方法，请参考文档：</p><ul><li><a href="https://www.voidking.com/dev-docker-prometheus/">《好好学Docker：使用Docker安装配置Prometheus》</a></li><li><a href="https://www.voidking.com/dev-prom-on-k8s-kube-prometheus-stack/">《好好学K8S：安装配置Prometheus官方套装》</a></li><li><a href="https://www.voidking.com/dev-prom-on-k8s-ks-prometheus/">《好好学K8S：安装配置ks-prometheus套装》</a></li></ul><h1 id="配置Prometheus"><span class="post-title-index">6.</span><a href="#配置Prometheus" class="headerlink" title="配置Prometheus"></a> 配置Prometheus</h1><p>Prometheus的配置文件<code>prometheus.yml</code>用于定义抓取目标和其他设置。以下是一个基本的配置示例：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">global:</span></span><br><span class="line">  <span class="attr">scrape_interval:</span> <span class="string">15s</span>  <span class="comment"># 默认抓取间隔</span></span><br><span class="line"></span><br><span class="line"><span class="attr">scrape_configs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;my_app&#x27;</span></span><br><span class="line">    <span class="attr">static_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;localhost:8080&#x27;</span>]  <span class="comment"># 被监控应用的地址</span></span><br></pre></td></tr></table></figure><p>在这个示例中，Prometheus将每15秒抓取一次位于<code>localhost:8080</code>的应用的指标数据。</p><p>Prometheus找到抓取目标的途径，被称为服务发现方法。上面的例子中，直接配置抓取目标地址，是服务发现方法中的静态配置法。静态配置法配置简单，但是灵活性差。<br>更多服务发现方法，请参考文档<a href="https://www.voidking.com/dev-prometheus-service-discovery/">《Prometheus服务发现》</a></p><h1 id="使用PromQL查询数据"><span class="post-title-index">7.</span><a href="#使用PromQL查询数据" class="headerlink" title="使用PromQL查询数据"></a> 使用PromQL查询数据</h1><p>PromQL是Prometheus的查询语言，用户可以使用它对存储的时间序列数据进行查询。以下是一些基本的PromQL查询示例：</p><p>1、获取所有指标</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;__name__=~&quot;.+&quot;&#125;</span><br></pre></td></tr></table></figure><p>2、计算某个指标的平均值</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">avg(my_metric)</span><br></pre></td></tr></table></figure><p>3、获取某个标签的指标数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my_metric&#123;job=&quot;my_app&quot;&#125;</span><br></pre></td></tr></table></figure><p>更多内容参考文档：<a href="https://www.voidking.com/dev-prometheus-query-language-promql/">《Prometheus查询语言：PromQL》</a></p><h1 id="可视化数据"><span class="post-title-index">8.</span><a href="#可视化数据" class="headerlink" title="可视化数据"></a> 可视化数据</h1><p>Prometheus可以与多种可视化工具集成，最常用的可视化工具是Grafana。通过Grafana，用户可以创建丰富的仪表板来展示Prometheus收集的数据。<br>Grafana的安装配置方法，参考文档<a href="https://www.voidking.com/dev-docker-grafana/">《使用Docker安装配置Grafana》</a></p><h1 id="Alertmanager和Grafana-Alerting"><span class="post-title-index">9.</span><a href="#Alertmanager和Grafana-Alerting" class="headerlink" title="Alertmanager和Grafana Alerting"></a> Alertmanager和Grafana Alerting</h1><p>grafana alerting也可以配置告警，它和alertmanager有什么区别？<br>答：它们是互为替代的关系，grafana alerting更加简单，alertmanager更加强大。</p><p>grafana alerting优点：<br>1）支持多个数据源。整合各种数据源发出告警，Prometheus只是数据源之一。<br>2）使用友好。可视化和告警放在一个地方，所见即所得，非常友好。</p><p>alertmanager优点：<br>1）不依赖dashboard。grafana alerting需要dashboard，alertmanager不需要dashboard，只要编写PromQL就可以了。<br>2）更加强大。grafana alerting只支持单个指标的简单阈值告警，而alertmanager通过PromQL支持更复杂的告警，还支持聚合、分组、删除重复等。<br>3）高可用。alertmanager可以非常容易实现高可用。</p><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="https://www.reddit.com/r/PrometheusMonitoring/comments/e89tcs/alerting_via_grafana_vs_alertmanager/">Alerting via Grafana Vs Alertmanager</a></li><li><a target="_blank" rel="noopener" href="https://groups.google.com/g/prometheus-users/c/2cMhCTABFFo">Prometheus AlertManager vs Grafana v.4.0.2 Alerting</a></li><li><a target="_blank" rel="noopener" href="https://grafana.com/go/observabilitycon/2021/alerting/">Deep dive into the Grafana, Prometheus, and Alertmanager stack for alerting and on-call management</a></li></ul><h1 id="后记"><span class="post-title-index">10.</span><a href="#后记" class="headerlink" title="后记"></a> 后记</h1><p>Prometheus 是CNCF基金会继K8S后第二个毕业项目，已经成为云原生监控领域的事实标准。<br>但是，Prometheus也有一些缺陷，比如数据量大的时候需要拆分集群，聚合数据很难数据去重，可用性较低等。因此出现了Thanos，能够解决Prometheus的很多问题，详情参考 <a target="_blank" rel="noopener" href="https://thanos.io/">Thanos官网</a> 和 <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/b1f74d552b12">分布式 Promethues 之 Thanos</a>。</p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>原文链接：</strong> <a href="https://www.voidking.com/dev-prometheus-start/" title="Prometheus入门篇">https://www.voidking.com/dev-prometheus-start/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本文采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议，转载请注明出处！源站会即时更新知识点并修正错误，欢迎访问~</li><li> <img width="200" height="200" src="/images/avatar.jpg"><p style="text-align:center;margin-bottom:0">微信公众号同步更新，欢迎关注~</p></li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/prometheus/" rel="tag"># prometheus</a> <a href="/tags/%E7%9B%91%E6%8E%A7/" rel="tag"># 监控</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-docker-crontab/" rel="prev" title="好好学Docker：Docker容器中使用定时任务"><i class="fa fa-chevron-left"></i> 好好学Docker：Docker容器中使用定时任务</a></div><div class="post-nav-item"> <a href="/dev-prometheus-service-discovery/" rel="next" title="Prometheus服务发现">Prometheus服务发现<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"><ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-3284447971731414" data-ad-slot="9697986181"></ins><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3284447971731414" crossorigin="anonymous"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Prometheus%E7%AE%80%E4%BB%8B"><span class="nav-text">1. Prometheus简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Prometheus%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="nav-text">2. Prometheus的核心概念</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Prometheus%E7%9A%84%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6"><span class="nav-text">3. Prometheus的核心组件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Prometheus-Server"><span class="nav-text">3.1. Prometheus Server</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Exporters"><span class="nav-text">3.2. Exporters</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PushGateway"><span class="nav-text">3.3. PushGateway</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Alertmanager"><span class="nav-text">3.4. Alertmanager</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Prometheus%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-text">4. Prometheus的工作原理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85Prometheus"><span class="nav-text">5. 安装Prometheus</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEPrometheus"><span class="nav-text">6. 配置Prometheus</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8PromQL%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE"><span class="nav-text">7. 使用PromQL查询数据</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%AF%E8%A7%86%E5%8C%96%E6%95%B0%E6%8D%AE"><span class="nav-text">8. 可视化数据</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Alertmanager%E5%92%8CGrafana-Alerting"><span class="nav-text">9. Alertmanager和Grafana Alerting</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%8E%E8%AE%B0"><span class="nav-text">10. 后记</span></a></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">一个计算机技术爱好者与学习者</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">744</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">32</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">259</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2025</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '5a238b8c32b1e4dd2156',
      clientSecret: 'bfb5d518626f6fdc7da0351d1e0cd37ab75c6361',
      repo: 'gitalk-comments',
      owner: 'voidking',
      admin: ['voidking'],
      id: '3f5d5dda1a14d38d521f64a0b26cbcf6',
      title: 'Prometheus入门篇',
      body: '欢迎留言，互相交流学习~',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></body></html>