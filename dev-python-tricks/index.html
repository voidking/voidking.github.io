<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//qiniu.cdn.voidking.com/doc/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="查找文件在指定目录中，根据文件前缀查找文件。 12345678import globdef find_files_by_prefix(prefix, dir_path):    file_list &#x3D; list()    file_pattern &#x3D; os.path.join(dir_path, &amp;#x27;&amp;#123;&amp;#125;*&amp;#x27;.format(prefix))    for f"><meta property="og:type" content="article"><meta property="og:title" content="好好学Python：Python小技巧"><meta property="og:url" content="https://www.voidking.com/dev-python-tricks/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="查找文件在指定目录中，根据文件前缀查找文件。 12345678import globdef find_files_by_prefix(prefix, dir_path):    file_list &#x3D; list()    file_pattern &#x3D; os.path.join(dir_path, &amp;#x27;&amp;#123;&amp;#125;*&amp;#x27;.format(prefix))    for f"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2021-11-07T20:00:00.000Z"><meta property="article:modified_time" content="2024-03-09T08:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="python"><meta property="article:tag" content="docker"><meta property="article:tag" content="ubuntu"><meta property="article:tag" content="mysql"><meta property="article:tag" content="好好学Python"><meta property="article:tag" content="debian"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-python-tricks/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>好好学Python：Python小技巧 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">一个计算机技术爱好者与学习者</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-python-tricks/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="一个计算机技术爱好者与学习者"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> 好好学Python：Python小技巧</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2021-11-07 20:00:00" itemprop="dateCreated datePublished" datetime="2021-11-07T20:00:00+00:00">2021-11-07</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2024-03-09 08:00:00" itemprop="dateModified" datetime="2024-03-09T08:00:00+00:00">2024-03-09</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="查找文件"><span class="post-title-index">1.</span><a href="#查找文件" class="headerlink" title="查找文件"></a> 查找文件</h1><p>在指定目录中，根据文件前缀查找文件。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_files_by_prefix</span>(<span class="params">prefix, dir_path</span>):</span><br><span class="line">    file_list = <span class="built_in">list</span>()</span><br><span class="line">    file_pattern = os.path.join(dir_path, <span class="string">&#x27;&#123;&#125;*&#x27;</span>.<span class="built_in">format</span>(prefix))</span><br><span class="line">    <span class="keyword">for</span> f <span class="keyword">in</span> glob.glob(file_pattern):</span><br><span class="line">        file_list.append(f)</span><br><span class="line">    <span class="keyword">return</span> file_list</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="删除目录和文件"><span class="post-title-index">2.</span><a href="#删除目录和文件" class="headerlink" title="删除目录和文件"></a> 删除目录和文件</h1><p>封装几个简单函数，删除目录和文件。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除空目录</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">remove_dir</span>(<span class="params">dir_path</span>):</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(dir_path):</span><br><span class="line">        os.removedirs(dir_path)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除文件</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">remove_file</span>(<span class="params">file_path</span>):</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(file_path):</span><br><span class="line">        os.remove(file_path)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除目录和文件</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">remove_dir_and_file</span>(<span class="params">dir_path</span>):</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(dir_path):</span><br><span class="line">        shutil.rmtree(dir_path)</span><br></pre></td></tr></table></figure><h1 id="url特殊字符转义"><span class="post-title-index">3.</span><a href="#url特殊字符转义" class="headerlink" title="url特殊字符转义"></a> url特殊字符转义</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> parse</span><br><span class="line">labelselector = parse.quote(<span class="string">&#x27;app_id=voidking,env in (test,online)&#x27;</span>)</span><br><span class="line">url = <span class="string">f&#x27;https://www.voidking.com?labelselector=<span class="subst">&#123;labelselector&#125;</span>&#x27;</span></span><br></pre></td></tr></table></figure><p>特殊字符对应url编码表：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">空格 : %20</span><br><span class="line">&quot; : %22</span><br><span class="line"># : %23</span><br><span class="line">% : %25</span><br><span class="line">&amp; : %26</span><br><span class="line">( : %28</span><br><span class="line">) : %29</span><br><span class="line">+ : %2B</span><br><span class="line">, : %2C</span><br><span class="line">/ : %2F</span><br><span class="line">: : %3A</span><br><span class="line">; : %3B</span><br><span class="line">&lt; : %3C</span><br><span class="line">= : %3D</span><br><span class="line">&gt; : %3E</span><br><span class="line">? : %3F</span><br><span class="line">@ : %40</span><br><span class="line">\ : %5C</span><br><span class="line">| : %7C </span><br></pre></td></tr></table></figure><h1 id="装饰器"><span class="post-title-index">4.</span><a href="#装饰器" class="headerlink" title="装饰器"></a> 装饰器</h1><p>实现一个装饰器，功能：只要函数里传了name参数，且name参数的值为haojin，那么就把这个值替换为voidking。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">haojin_to_voidking</span>(<span class="params">func</span>):</span><br><span class="line"><span class="meta">    @wraps(<span class="params">func</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">decorated</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;name&#x27;</span> <span class="keyword">in</span> kwargs <span class="keyword">and</span> kwargs[<span class="string">&#x27;name&#x27;</span>] == <span class="string">&#x27;haojin&#x27;</span>:</span><br><span class="line">            kwargs[<span class="string">&#x27;name&#x27;</span>] = <span class="string">&#x27;voidking&#x27;</span></span><br><span class="line">        <span class="keyword">return</span> func(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> decorated</span><br><span class="line"></span><br><span class="line"><span class="meta">@haojin_to_voidking</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">print_name</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br><span class="line"></span><br><span class="line">print_name(name=<span class="string">&#x27;haojin&#x27;</span>)</span><br></pre></td></tr></table></figure><h1 id="Python镜像选择"><span class="post-title-index">5.</span><a href="#Python镜像选择" class="headerlink" title="Python镜像选择"></a> Python镜像选择</h1><p>我们可能倾向于选择一个小镜像Alpine，但是这会导致更长的构建时间和模糊的错误，因此不建议。</p><p>推荐的镜像：</p><ul><li>ubuntu:18.04</li><li>ubuntu:20.04</li><li>python:3.7.10-slim-buster （基于Debian buster）</li></ul><p>Ubuntu/Debian的默认软件安装源都比较慢，因此最好先替换成国内软件安装源，详情参考<a href="https://www.voidking.com/dev-ubuntu-change-sources/">《Ubuntu/Debian替换软件安装源》</a>。</p><p>Debian buster软件包查找地址为<a target="_blank" rel="noopener" href="https://packages.debian.org/buster/">Debian - buster版面列表</a>，找到软件包后使用apt install安装即可，例如安装mysql client</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install default-libmysqlclient-dev</span><br><span class="line">apt install default-mysql-client</span><br></pre></td></tr></table></figure><p>参考文档：<a target="_blank" rel="noopener" href="https://devpress.csdn.net/cloudnative/62f92dfbc6770329307fd72a.html">适用于您的 Python 应用程序的最佳 Docker 基础镜像</a></p><h1 id="启动python-web服务器"><span class="post-title-index">6.</span><a href="#启动python-web服务器" class="headerlink" title="启动python web服务器"></a> 启动python web服务器</h1><p>使用sz传输大文件，有时候会被中断。这时我们可以启动一个web服务，把大文件作为静态资源下载。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python -m SimpleHTTPServer 9999</span><br><span class="line">python3 -m http.server 9999</span><br></pre></td></tr></table></figure><p>然后浏览器输入ip:port，即可下载文件。</p><h1 id="py编译为pyc"><span class="post-title-index">7.</span><a href="#py编译为pyc" class="headerlink" title="py编译为pyc"></a> py编译为pyc</h1><p>1、批量编译整个项目</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m compileall project_dir</span><br></pre></td></tr></table></figure><p>2、移动位置和重命名<br>编译后的 pyc 文件，放在 <code>__pycache__</code> 目录中，需要移动到上一层目录。<br>编译后的 pyc 文件名中，会带着解释器的版本（例如 cpython-37），会导致找不到模块，因此需要将所有 pyc 文件重命名。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">find project_dir -<span class="built_in">type</span> d -name <span class="string">&quot;__pycache__&quot;</span> -<span class="built_in">exec</span> sh -c <span class="string">&#x27;mv &quot;$0&quot;/* &quot;$(dirname &quot;$0&quot;)&quot;&#x27;</span> &#123;&#125; \;</span><br><span class="line">find project_dir -name <span class="string">&quot;*.pyc&quot;</span> -<span class="built_in">exec</span> sh -c <span class="string">&#x27;mv &quot;$0&quot; &quot;$&#123;0%.cpython-37.pyc&#125;.pyc&quot;&#x27;</span> &#123;&#125; \;</span><br><span class="line"><span class="comment">#for file in *.cpython-37.pyc;do mv &quot;$file&quot; &quot;$&#123;file%.cpython-37.pyc&#125;.pyc&quot;;done</span></span><br></pre></td></tr></table></figure><p>3、删除py文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find project_dir -name <span class="string">&quot;*.py&quot;</span> | xargs <span class="built_in">rm</span> -fv</span><br></pre></td></tr></table></figure><p>4、启动项目<br>假设原启动命令为 python main.py ，那么编译后的启动命令为</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python main.pyc</span><br></pre></td></tr></table></figure><h1 id="pyc反编译py"><span class="post-title-index">8.</span><a href="#pyc反编译py" class="headerlink" title="pyc反编译py"></a> pyc反编译py</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install uncompyle6</span><br><span class="line">uncompyle6 -o filename.py filename.pyc</span><br></pre></td></tr></table></figure><h1 id="py文件加密"><span class="post-title-index">9.</span><a href="#py文件加密" class="headerlink" title="py文件加密"></a> py文件加密</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install pyarmor</span><br><span class="line">pyarmor gen test.py</span><br></pre></td></tr></table></figure><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="https://pyarmor.readthedocs.io/en/latest/index.html">Pyarmor Documentation</a></li><li><a target="_blank" rel="noopener" href="https://www.escapelife.site/posts/c2c0a0fd.html">使用PyArmor保护Python代码</a></li></ul><h1 id="jupyter转python"><span class="post-title-index">10.</span><a href="#jupyter转python" class="headerlink" title="jupyter转python"></a> jupyter转python</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter nbconvert --to python github_stars.ipynb</span><br></pre></td></tr></table></figure><h1 id="自动生成python项目的依赖"><span class="post-title-index">11.</span><a href="#自动生成python项目的依赖" class="headerlink" title="自动生成python项目的依赖"></a> 自动生成python项目的依赖</h1><p>1、安装pipreqs工具</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pipreqs</span><br></pre></td></tr></table></figure><p>2、生成依赖文件 requirements.txt</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipreqs /path/to/project</span><br></pre></td></tr></table></figure><p>这种方法，不能保证找到所有的依赖，但是能找到大部分的依赖，已经够用了。</p><h1 id="pip安装依赖报错"><span class="post-title-index">12.</span><a href="#pip安装依赖报错" class="headerlink" title="pip安装依赖报错"></a> pip安装依赖报错</h1><p><code>pip install anyjson</code> 报错：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Looking in indexes: https://pypi.tuna.tsinghua.edu.cn/simple/</span><br><span class="line">Collecting anyjson</span><br><span class="line">  Using cached https://pypi.tuna.tsinghua.edu.cn/packages/c3/4d/d4089e1a3dd25b46bebdb55a992b0797cff657b4477bc32ce28038fdecbc/anyjson-0.3.3.tar.gz (8.3 kB)</span><br><span class="line">  Preparing metadata (setup.py) ... error</span><br><span class="line">  error: subprocess-exited-with-error</span><br><span class="line">  </span><br><span class="line">  × python setup.py egg_info did not run successfully.</span><br><span class="line">  │ exit code: 1</span><br><span class="line">  ╰─&gt; [1 lines of output]</span><br><span class="line">      error in anyjson setup command: use_2to3 is invalid.</span><br><span class="line">      [end of output]</span><br></pre></td></tr></table></figure><p>这个错误是由于 Python 从 3.10 版本开始，移除了对 use_2to3 支持导致的。<br>anyjson库在安装时候需要用到这个选项，而在新版本Python中该选项已经被移除，所以出现了此错误。<br>解决办法是使用老版本的Python，比如Python3.9。</p><p>如果使用的是老版本的Python，依然报错了这个错误，那么很可能是 setuptools 版本过高。<br>解决办法是 setuptools 降版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install <span class="string">&#x27;setuptools&lt;58.0.0&#x27;</span></span><br></pre></td></tr></table></figure><h1 id="参考文档"><span class="post-title-index">13.</span><a href="#参考文档" class="headerlink" title="参考文档"></a> 参考文档</h1><ul><li><a target="_blank" rel="noopener" href="https://docs.python.org/3.6/">Python官方文档</a></li><li><a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.6/download.html">Python官方文档下载</a></li><li><a target="_blank" rel="noopener" href="https://www.python.org/downloads/windows/">Python官方文档下载-chm格式</a></li><li><a target="_blank" rel="noopener" href="https://magic.iswbm.com/">Python黑魔法手册</a></li><li><a target="_blank" rel="noopener" href="https://python3-cookbook.readthedocs.io/zh_CN/latest/">Python Cookbook 3rd Edition Documentation</a></li><li><a target="_blank" rel="noopener" href="https://www.kancloud.cn/kancloud/google-style-guide/43289">Google Python风格指南</a></li></ul></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>原文链接：</strong> <a href="https://www.voidking.com/dev-python-tricks/" title="好好学Python：Python小技巧">https://www.voidking.com/dev-python-tricks/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本文采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议，转载请注明出处！源站会即时更新知识点并修正错误，欢迎访问~</li><li> <img width="200" height="200" src="/images/avatar.jpg"><p style="text-align:center;margin-bottom:0">微信公众号同步更新，欢迎关注~</p></li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/python/" rel="tag"># python</a> <a href="/tags/docker/" rel="tag"># docker</a> <a href="/tags/ubuntu/" rel="tag"># ubuntu</a> <a href="/tags/mysql/" rel="tag"># mysql</a> <a href="/tags/%E5%A5%BD%E5%A5%BD%E5%AD%A6Python/" rel="tag"># 好好学Python</a> <a href="/tags/debian/" rel="tag"># debian</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-python-unittest/" rel="prev" title="好好学Python：Python单元测试"><i class="fa fa-chevron-left"></i> 好好学Python：Python单元测试</a></div><div class="post-nav-item"> <a href="/dev-python-script-path/" rel="next" title="好好学Python：Python脚本路径">好好学Python：Python脚本路径<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"><ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-3284447971731414" data-ad-slot="9697986181"></ins><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3284447971731414" crossorigin="anonymous"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9F%A5%E6%89%BE%E6%96%87%E4%BB%B6"><span class="nav-text">1. 查找文件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E7%9B%AE%E5%BD%95%E5%92%8C%E6%96%87%E4%BB%B6"><span class="nav-text">2. 删除目录和文件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#url%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6%E8%BD%AC%E4%B9%89"><span class="nav-text">3. url特殊字符转义</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="nav-text">4. 装饰器</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Python%E9%95%9C%E5%83%8F%E9%80%89%E6%8B%A9"><span class="nav-text">5. Python镜像选择</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8python-web%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-text">6. 启动python web服务器</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#py%E7%BC%96%E8%AF%91%E4%B8%BApyc"><span class="nav-text">7. py编译为pyc</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#pyc%E5%8F%8D%E7%BC%96%E8%AF%91py"><span class="nav-text">8. pyc反编译py</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#py%E6%96%87%E4%BB%B6%E5%8A%A0%E5%AF%86"><span class="nav-text">9. py文件加密</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#jupyter%E8%BD%ACpython"><span class="nav-text">10. jupyter转python</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90python%E9%A1%B9%E7%9B%AE%E7%9A%84%E4%BE%9D%E8%B5%96"><span class="nav-text">11. 自动生成python项目的依赖</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#pip%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E6%8A%A5%E9%94%99"><span class="nav-text">12. pip安装依赖报错</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3"><span class="nav-text">13. 参考文档</span></a></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">一个计算机技术爱好者与学习者</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">710</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">31</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">253</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2024</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '5a238b8c32b1e4dd2156',
      clientSecret: 'bfb5d518626f6fdc7da0351d1e0cd37ab75c6361',
      repo: 'gitalk-comments',
      owner: 'voidking',
      admin: ['voidking'],
      id: '0f0ae98b18d4336e7251fcf8f70ff0f4',
      title: '好好学Python：Python小技巧',
      body: '欢迎留言，互相交流学习~',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></body></html>