<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//qiniu-cdn.voidking.com/doc/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="前言在现代电子邮件系统中，确保邮件的安全性和可靠性至关重要。SPF、DKIM和DMARC是三种主要的电子邮件身份验证机制，它们共同工作以防止垃圾邮件、钓鱼攻击和其他形式的邮件欺诈。 SPF、DKIM和DMARC机制在配置DNS时，记录类型都是TXT类型，在配置记录值时请注意DNS平台是否需要双引号。 本文将学习这三种机制及其在邮箱配置中的作用。 参考文档：  详解 SPF、DKIM、DMARC 记"><meta property="og:type" content="article"><meta property="og:title" content="邮箱配置中的SPF、DKIM、DMARC记录"><meta property="og:url" content="https://www.voidking.com/dev-mail-spf-dkim-dmarc/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="前言在现代电子邮件系统中，确保邮件的安全性和可靠性至关重要。SPF、DKIM和DMARC是三种主要的电子邮件身份验证机制，它们共同工作以防止垃圾邮件、钓鱼攻击和其他形式的邮件欺诈。 SPF、DKIM和DMARC机制在配置DNS时，记录类型都是TXT类型，在配置记录值时请注意DNS平台是否需要双引号。 本文将学习这三种机制及其在邮箱配置中的作用。 参考文档：  详解 SPF、DKIM、DMARC 记"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2024-10-26T08:00:00.000Z"><meta property="article:modified_time" content="2024-11-09T08:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="shell"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-mail-spf-dkim-dmarc/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>邮箱配置中的SPF、DKIM、DMARC记录 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">一个计算机技术爱好者与学习者</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-mail-spf-dkim-dmarc/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="一个计算机技术爱好者与学习者"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> 邮箱配置中的SPF、DKIM、DMARC记录</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2024-10-26 08:00:00" itemprop="dateCreated datePublished" datetime="2024-10-26T08:00:00+00:00">2024-10-26</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2024-11-09 08:00:00" itemprop="dateModified" datetime="2024-11-09T08:00:00+00:00">2024-11-09</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/devops/" itemprop="url" rel="index"><span itemprop="name">devops</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="前言"><span class="post-title-index">1.</span><a href="#前言" class="headerlink" title="前言"></a> 前言</h1><p>在现代电子邮件系统中，确保邮件的安全性和可靠性至关重要。SPF、DKIM和DMARC是三种主要的电子邮件身份验证机制，它们共同工作以防止垃圾邮件、钓鱼攻击和其他形式的邮件欺诈。</p><p>SPF、DKIM和DMARC机制在配置DNS时，记录类型都是TXT类型，在配置记录值时请注意DNS平台是否需要双引号。</p><p>本文将学习这三种机制及其在邮箱配置中的作用。</p><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="https://jovialchap.com/spf-dkim-dmarc-explained/">详解 SPF、DKIM、DMARC 记录与工作原理</a></li><li><a target="_blank" rel="noopener" href="https://powerdmarc.com/fix-this-mail-is-unauthenticated-gmail-error/">550-5.7.26 Gmail Error: Email Blocked Because Sender is Unauthenticated</a></li><li><a target="_blank" rel="noopener" href="https://powerdmarc.com/zh/what-is-a-dns-txt-record/">POWERDMARC - 什么是DNS TXT记录？</a></li><li><a target="_blank" rel="noopener" href="https://www.cloudflare.com/zh-cn/learning/dns/dns-records/dns-txt-record/">CloudFlare - 什么是 DNS TXT 记录？</a></li></ul><span id="more"></span><h1 id="SPF"><span class="post-title-index">2.</span><a href="#SPF" class="headerlink" title="SPF"></a> SPF</h1><h2 id="SPF简介"><span class="post-title-index">2.1.</span><a href="#SPF简介" class="headerlink" title="SPF简介"></a> SPF简介</h2><p>SPF全称为发件人策略框架，SPF是一种用于验证发送电子邮件的服务器是否被授权代表域名发送邮件的机制。<br>通过在DNS中添加SPF记录，域名所有者可以指定哪些IP地址可以发送该域名的邮件。</p><h2 id="SPF工作原理"><span class="post-title-index">2.2.</span><a href="#SPF工作原理" class="headerlink" title="SPF工作原理"></a> SPF工作原理</h2><p>当接收邮件服务器收到一封来自某个域名的邮件时，它会查找该域名的SPF记录，验证发件服务器的IP地址是否在授权列表中。如果匹配，邮件将被接受；如果不匹配，邮件可能会被标记为垃圾邮件或拒绝。</p><h2 id="SPF记录示例"><span class="post-title-index">2.3.</span><a href="#SPF记录示例" class="headerlink" title="SPF记录示例"></a> SPF记录示例</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">主机记录：@</span><br><span class="line">记录类型：TXT</span><br><span class="line">记录值：&quot;v=spf1 ip4:192.0.2.0/24 include:_spf.example.com -all&quot;</span><br></pre></td></tr></table></figure><p>记录值字段说明：</p><ul><li><code>v=spf1</code>：表示使用SPF版本1。</li><li><code>ip4:192.0.2.0/24</code>：允许该IP地址范围发送邮件。</li><li><code>include:_spf.example.com</code>：允许其他域名的SPF记录。</li><li><code>-all</code>：表示不允许其他IP地址发送邮件。</li></ul><p>腾讯企业邮推荐记录值：<code>&quot;v=spf1 include:spf.mail.qq.com ~all&quot;</code></p><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="https://open.work.weixin.qq.com/help2/pc/20047?person_id=1">550 SPF check failed</a></li><li><a target="_blank" rel="noopener" href="https://open.work.weixin.qq.com/help2/pc/19817?person_id=1">如何设置企业邮箱的SPF记录值？</a></li></ul><h2 id="SPF语法解释"><span class="post-title-index">2.4.</span><a href="#SPF语法解释" class="headerlink" title="SPF语法解释"></a> SPF语法解释</h2><p>SPF记录定义了多种不同的 mechanism，这些 mechanism 规定了哪些 IP 是被允许的，哪些 IP 是被禁止的。</p><p>这一些mechanism包含以下几类：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">all | ip4 | ip6 | a | mx | ptr | exists | include</span><br><span class="line">同时还支持以下四种前缀：</span><br><span class="line">&quot;+&quot; -&gt; Pass (通过/同时这也是默认值) -&gt; 发件IP合法，接收</span><br><span class="line">&quot;-&quot; -&gt; Fail (拒绝) -&gt; 发件IP非法，退信</span><br><span class="line">&quot;~&quot; -&gt; Soft Fail (软拒绝) -&gt; 发件IP非法，接收</span><br><span class="line">&quot;?&quot; -&gt; Neutral (中立) -&gt; SPF记录中没有该IP信息，接收</span><br></pre></td></tr></table></figure><p>all 表示命中所有的 IP，通常放在 SPF 记录的尾部作为 fallback，结合上面提到的前缀举几个例子：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;v=spf1 -all&quot; 拒绝所有</span><br><span class="line">&quot;v=spf1 +all&quot; 接受所有</span><br></pre></td></tr></table></figure><p>ip4/ip6 的格式相近，具体的配置举例如下：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;v=spf1 ip4:192.168.0.1/16 -all&quot;</span><br><span class="line">只允许在 192.168.0.1 ~ 192.168.255.255 范围内的 IP</span><br><span class="line">&quot;v=spf1 ip6:1080::8:800:200C:417A/96 -all&quot;</span><br><span class="line">只允许在 1080::8:800:0000:0000 ~ 1080::8:800:FFFF:FFFF 范围内的 IP</span><br><span class="line">如果没有指定前缀长度，则默认只表示记录中所填写的IP（1个IP）</span><br></pre></td></tr></table></figure><p>a/mx 这两个 mechanism 会命中相应域名的 a 记录和 mx 记录，a语法mx的语法一致，如果没有填写域名则默认值为当前域名：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;v=spf1 mx -all&quot; 允许当前域名的 mx 记录对应的 IP 地址。</span><br><span class="line">&quot;v=spf1 mx mx:deferrals.example.com -all&quot; 允许当前域名和 deferrals.example.com 的 mx 记录对应的 IP 地址。</span><br><span class="line">&quot;v=spf1 a/24 -all&quot; 这个配置允许一个地址段</span><br></pre></td></tr></table></figure><p>include 用于引入某个域名下的SPF记录，例如：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;v=spf1 include:example.com -all&quot; 采用和 example.com 完全一样的 SPF 记录</span><br></pre></td></tr></table></figure><h1 id="DKIM"><span class="post-title-index">3.</span><a href="#DKIM" class="headerlink" title="DKIM"></a> DKIM</h1><h2 id="DKIM简介"><span class="post-title-index">3.1.</span><a href="#DKIM简介" class="headerlink" title="DKIM简介"></a> DKIM简介</h2><p>DKIM全称为域名密钥识别邮件，DKIM是一种电子邮件身份验证方法，它通过数字签名确保邮件内容在传输过程中未被篡改。<br>发件人使用私钥对邮件进行签名，而接收方则使用公钥进行验证。</p><h2 id="DKIM工作原理"><span class="post-title-index">3.2.</span><a href="#DKIM工作原理" class="headerlink" title="DKIM工作原理"></a> DKIM工作原理</h2><p>当接收服务器收到一封带有DKIM签名的邮件时，它会提取签名并查找相应的公钥。如果公钥验证成功，表明邮件未被篡改且确实来自声称的发件人。</p><h2 id="DKIM记录示例"><span class="post-title-index">3.3.</span><a href="#DKIM记录示例" class="headerlink" title="DKIM记录示例"></a> DKIM记录示例</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">主机记录：&lt;selector&gt;._domainkey</span><br><span class="line">记录类型：TXT</span><br><span class="line">记录值：&quot;v=DKIM1; k=rsa; p=MIGfMA0GCS...&quot;</span><br><span class="line">记录值中的k=rsa</span><br></pre></td></tr></table></figure><p>记录值字段说明：</p><ul><li><code>v=DKIM1</code>：表示使用DKIM版本1。</li><li><code>k=rsa</code>：表示公钥是以RSA方式进行加密的。</li><li><code>p=MIGfMA0GCS...</code>：公钥部分。</li></ul><p>主机记录和记录值通常由电子邮件服务商提供，比如使用腾讯企业邮箱或网易企业邮箱，就登录管理员查看DKIM配置。</p><h1 id="DMARC"><span class="post-title-index">4.</span><a href="#DMARC" class="headerlink" title="DMARC"></a> DMARC</h1><h2 id="DMARC简介"><span class="post-title-index">4.1.</span><a href="#DMARC简介" class="headerlink" title="DMARC简介"></a> DMARC简介</h2><p>DMARC全称为基于域名的消息身份验证、报告和一致性，DMARC是建立在SPF和DKIM之上的一种机制，允许域名所有者指定如何处理未通过身份验证的邮件，并提供报告功能。</p><h2 id="DMARC工作原理"><span class="post-title-index">4.2.</span><a href="#DMARC工作原理" class="headerlink" title="DMARC工作原理"></a> DMARC工作原理</h2><p>接收服务器根据DMARC策略处理未通过SPF或DKIM验证的邮件。根据设置，它可以选择拒绝、隔离或无操作。同时，发送报告给域名所有者，以便他们监控和分析身份验证结果。</p><h2 id="DMARC记录示例"><span class="post-title-index">4.3.</span><a href="#DMARC记录示例" class="headerlink" title="DMARC记录示例"></a> DMARC记录示例</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">主机记录：_dmarc</span><br><span class="line">记录类型：TXT</span><br><span class="line">记录值：&quot;v=DMARC1; p=reject; rua=mailto:dmarc-reports@example.com&quot;</span><br></pre></td></tr></table></figure><p>记录字段说明：</p><ul><li><code>v=DMARC1</code>：表示使用DMARC版本1。</li><li><code>p=reject</code>：指示接收方拒绝未通过身份验证的邮件。</li><li><code>rua=mailto:dmarc-reports@example.com</code>：指定接收报告的电子邮件地址。</li></ul><p>腾讯企业邮推荐记录值：<code>&quot;v=DMARC1; p=none; rua=mailto:mailauth-reports@qq.com&quot;</code></p><p>参考文档：<a target="_blank" rel="noopener" href="https://open.work.weixin.qq.com/help2/pc/19820">企业邮箱如何设置DMARC（TXT记录）</a></p><h1 id="发送邮件给Gmail报错问题"><span class="post-title-index">5.</span><a href="#发送邮件给Gmail报错问题" class="headerlink" title="发送邮件给Gmail报错问题"></a> 发送邮件给Gmail报错问题</h1><h2 id="问题描述"><span class="post-title-index">5.1.</span><a href="#问题描述" class="headerlink" title="问题描述"></a> 问题描述</h2><p>发送邮件给Gmail邮箱时，报错：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">550-5.7.26 Your email has been blocked because the sender is unauthenticated. </span><br><span class="line">550-5.7.26 Gmail requires all senders to authenticate with either SPF or DKIM. 550-5.7.26</span><br><span class="line">550-5.7.26 Authentication results: 550-5.7.26 DKIM = did not pass</span><br><span class="line">550-5.7.26 SPF [fuzhi.ai] with ip: [128.x.x.x] = did not pass</span><br></pre></td></tr></table></figure><h2 id="解决办法"><span class="post-title-index">5.2.</span><a href="#解决办法" class="headerlink" title="解决办法"></a> 解决办法</h2><p>报错很清晰，发送邮件的服务器被Gmail拒绝了，Gmail怀疑这是伪造的发件人，因为邮件没能通过SPF或DKIM验证。</p><p>解决办法：检查并配置SPF和DKIM。</p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>原文链接：</strong> <a href="https://www.voidking.com/dev-mail-spf-dkim-dmarc/" title="邮箱配置中的SPF、DKIM、DMARC记录">https://www.voidking.com/dev-mail-spf-dkim-dmarc/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本文采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议，转载请注明出处！源站会即时更新知识点并修正错误，欢迎访问~</li><li> <img width="200" height="200" src="/images/avatar.jpg"><p style="text-align:center;margin-bottom:0">微信公众号同步更新，欢迎关注~</p></li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/shell/" rel="tag"># shell</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-k8s-leader-election/" rel="prev" title="好好学K8S：K8S中的Leader Election机制"><i class="fa fa-chevron-left"></i> 好好学K8S：K8S中的Leader Election机制</a></div><div class="post-nav-item"> <a href="/dev-docker-filebrowser/" rel="next" title="好好学Docker：使用Docker安装配置FileBrowser">好好学Docker：使用Docker安装配置FileBrowser<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"><ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-3284447971731414" data-ad-slot="9697986181"></ins><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3284447971731414" crossorigin="anonymous"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">1. 前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SPF"><span class="nav-text">2. SPF</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SPF%E7%AE%80%E4%BB%8B"><span class="nav-text">2.1. SPF简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SPF%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-text">2.2. SPF工作原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SPF%E8%AE%B0%E5%BD%95%E7%A4%BA%E4%BE%8B"><span class="nav-text">2.3. SPF记录示例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SPF%E8%AF%AD%E6%B3%95%E8%A7%A3%E9%87%8A"><span class="nav-text">2.4. SPF语法解释</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DKIM"><span class="nav-text">3. DKIM</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#DKIM%E7%AE%80%E4%BB%8B"><span class="nav-text">3.1. DKIM简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DKIM%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-text">3.2. DKIM工作原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DKIM%E8%AE%B0%E5%BD%95%E7%A4%BA%E4%BE%8B"><span class="nav-text">3.3. DKIM记录示例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DMARC"><span class="nav-text">4. DMARC</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#DMARC%E7%AE%80%E4%BB%8B"><span class="nav-text">4.1. DMARC简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DMARC%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-text">4.2. DMARC工作原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DMARC%E8%AE%B0%E5%BD%95%E7%A4%BA%E4%BE%8B"><span class="nav-text">4.3. DMARC记录示例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6%E7%BB%99Gmail%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98"><span class="nav-text">5. 发送邮件给Gmail报错问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0"><span class="nav-text">5.1. 问题描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="nav-text">5.2. 解决办法</span></a></li></ol></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">一个计算机技术爱好者与学习者</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">744</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">32</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">259</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2025</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '5a238b8c32b1e4dd2156',
      clientSecret: 'bfb5d518626f6fdc7da0351d1e0cd37ab75c6361',
      repo: 'gitalk-comments',
      owner: 'voidking',
      admin: ['voidking'],
      id: '12feb9d496f464e9b1b2b1842e386cda',
      title: '邮箱配置中的SPF、DKIM、DMARC记录',
      body: '欢迎留言，互相交流学习~',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></body></html>