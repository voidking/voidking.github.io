<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.1"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="功能进阶1、Java网页爬虫，最基础的功能，是能爬取某个页面的html源码。2、图形化界面。3、爬取某个页面的html源码，以及页面需要的静态资源（图片、css和js）。4、爬取某个页面的html源码，以及页面中的链接指向的页面的html源码，并且不断地延伸爬取。 整个开发过程，需要用到网络编程、正则表达式、I&#x2F;O流、图形界面编程、事件监听、多线程等。为了简化开发，还需要用到一些外部jar包，比如"><meta property="og:type" content="article"><meta property="og:title" content="Java网页爬虫"><meta property="og:url" content="https://www.voidking.com/dev-java-crawler/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="功能进阶1、Java网页爬虫，最基础的功能，是能爬取某个页面的html源码。2、图形化界面。3、爬取某个页面的html源码，以及页面需要的静态资源（图片、css和js）。4、爬取某个页面的html源码，以及页面中的链接指向的页面的html源码，并且不断地延伸爬取。 整个开发过程，需要用到网络编程、正则表达式、I&#x2F;O流、图形界面编程、事件监听、多线程等。为了简化开发，还需要用到一些外部jar包，比如"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://cdn.voidking.com//imgs/java-crawler/result.gif"><meta property="article:published_time" content="2016-11-26T04:04:06.000Z"><meta property="article:modified_time" content="2016-11-26T04:04:06.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="java"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://cdn.voidking.com//imgs/java-crawler/result.gif"><link rel="canonical" href="https://www.voidking.com/dev-java-crawler/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>Java网页爬虫 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">好好学习，天天向上！</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-java-crawler/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="学而不思则罔，思而不学则殆！"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> Java网页爬虫</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2016-11-26 12:04:06" itemprop="dateCreated datePublished" datetime="2016-11-26T12:04:06+08:00">2016-11-26</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/" itemprop="url" rel="index"><span itemprop="name">专业</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">开发</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/%E5%BC%80%E5%8F%91/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="功能进阶"><a href="#功能进阶" class="headerlink" title="功能进阶"></a>功能进阶</h1><p>1、Java网页爬虫，最基础的功能，是能爬取某个页面的html源码。<br>2、图形化界面。<br>3、爬取某个页面的html源码，以及页面需要的静态资源（图片、css和js）。<br>4、爬取某个页面的html源码，以及页面中的链接指向的页面的html源码，并且不断地延伸爬取。</p><p>整个开发过程，需要用到网络编程、正则表达式、I/O流、图形界面编程、事件监听、多线程等。为了简化开发，还需要用到一些外部jar包，比如jsoup。</p><a id="more"></a><h1 id="模块划分"><a href="#模块划分" class="headerlink" title="模块划分"></a>模块划分</h1><p>1、获取页面模块：获取页面文档，以及页面文档的字符串。<br>2、获取页面链接模块：获取页面中存在的各种链接，包括a标签、img标签、css链接、js链接等。<br>3、获取静态文件模块：静态文件分为两种，一种是字符串类型，一种是字节类型。<br>4、保存文件模块：保存页面文档和静态文件。<br>5、界面模块：包括界面设计，事件监听处理。</p><h1 id="核心代码摘要"><a href="#核心代码摘要" class="headerlink" title="核心代码摘要"></a>核心代码摘要</h1><h2 id="获取页面模块"><a href="#获取页面模块" class="headerlink" title="获取页面模块"></a>获取页面模块</h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Page</span> &#123;</span></span><br><span class="line">    Document doc = null;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Page</span><span class="params">(<span class="keyword">String</span> url)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            doc = Jsoup.<span class="built_in">connect</span>(url).timeout(<span class="number">5000</span>).userAgent(<span class="string">"Mozilla"</span>).<span class="built_in">get</span>();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">String</span> <span class="title">getHtml</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> doc.html();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Document <span class="title">getDoc</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> doc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="获取页面链接模块"><a href="#获取页面链接模块" class="headerlink" title="获取页面链接模块"></a>获取页面链接模块</h2><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UrlList</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Document doc = <span class="literal">null</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UrlList</span>(<span class="params">String url</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            doc = Jsoup.connect(url).timeout(<span class="number">5000</span>).userAgent(<span class="string">"Mozilla"</span>).<span class="keyword">get</span>();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Element&gt; <span class="title">getLinkList</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        Elements links = doc.<span class="keyword">select</span>(<span class="string">"link[href]"</span>);</span><br><span class="line">        ArrayList&lt;Element&gt; resultList = <span class="keyword">new</span> ArrayList&lt;Element&gt;();</span><br><span class="line">        <span class="keyword">for</span>(Element link : links)&#123;</span><br><span class="line">            resultList.<span class="keyword">add</span>(link);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> resultList;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Element&gt; <span class="title">getCssList</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        Elements links = doc.<span class="keyword">select</span>(<span class="string">"link[href]"</span>);</span><br><span class="line">        ArrayList&lt;Element&gt; resultList = <span class="keyword">new</span> ArrayList&lt;Element&gt;();</span><br><span class="line">        <span class="keyword">for</span>(Element link : links)&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">"stylesheet"</span>.<span class="keyword">equals</span>(link.attr(<span class="string">"rel"</span>)))&#123;</span><br><span class="line">                resultList.<span class="keyword">add</span>(link);               </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> resultList;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Element&gt; <span class="title">getAList</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        Elements links = doc.<span class="keyword">select</span>(<span class="string">"a[href]"</span>);</span><br><span class="line">        ArrayList&lt;Element&gt; resultList = <span class="keyword">new</span> ArrayList&lt;Element&gt;();</span><br><span class="line">        <span class="keyword">for</span>(Element link : links)&#123;</span><br><span class="line">            resultList.<span class="keyword">add</span>(link);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> resultList;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Element&gt; <span class="title">getImgList</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        Elements links = doc.<span class="keyword">select</span>(<span class="string">"img[src]"</span>);</span><br><span class="line">        ArrayList&lt;Element&gt; resultList = <span class="keyword">new</span> ArrayList&lt;Element&gt;();</span><br><span class="line">        <span class="keyword">for</span>(Element link : links)&#123;</span><br><span class="line">            resultList.<span class="keyword">add</span>(link);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> resultList;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Element&gt; <span class="title">getJsList</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        Elements links = doc.<span class="keyword">select</span>(<span class="string">"script[src]"</span>);</span><br><span class="line">        ArrayList&lt;Element&gt; resultList = <span class="keyword">new</span> ArrayList&lt;Element&gt;();</span><br><span class="line">        <span class="keyword">for</span>(Element link : links)&#123;</span><br><span class="line">            resultList.<span class="keyword">add</span>(link);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> resultList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="获取静态文件"><a href="#获取静态文件" class="headerlink" title="获取静态文件"></a>获取静态文件</h2><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> class Source &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">String</span> getString(<span class="keyword">String</span> url) &#123; <span class="comment">// 定义一个字符串用来存储网页内容</span></span><br><span class="line">        <span class="keyword">String</span> result = <span class="string">""</span>;</span><br><span class="line">        <span class="comment">// 定义一个缓冲字符输入流</span></span><br><span class="line">        <span class="keyword">BufferedReader</span> in = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 将string转成url对象</span></span><br><span class="line">            URL realUrl = <span class="keyword">new</span> URL(url);</span><br><span class="line">            <span class="comment">// 初始化一个链接到那个url的连接</span></span><br><span class="line">            URLConnection connection = realUrl.openConnection();</span><br><span class="line">            <span class="comment">// 开始实际的连接</span></span><br><span class="line">            connection.connect();</span><br><span class="line">            <span class="comment">// 初始化 BufferedReader输入流来读取URL的响应</span></span><br><span class="line">            in = <span class="keyword">new</span> <span class="keyword">BufferedReader</span>(<span class="keyword">new</span> InputStreamReader(connection.getInputStream()));</span><br><span class="line">            <span class="comment">// 用来临时存储抓取到的每一行的数据</span></span><br><span class="line">            <span class="keyword">String</span> <span class="built_in">line</span>;</span><br><span class="line">            <span class="keyword">while</span> ((<span class="built_in">line</span> = in.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// 遍历抓取到的每一行并将其存储到result里面</span></span><br><span class="line">                result += <span class="built_in">line</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.<span class="built_in">println</span>(<span class="string">"发送GET请求出现异常！"</span> + e);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (in != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    in.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e2) &#123;</span><br><span class="line">                e2.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="保存文件模块"><a href="#保存文件模块" class="headerlink" title="保存文件模块"></a>保存文件模块</h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SaveFile</span> &#123;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveFile</span><span class="params">(<span class="keyword">String</span> path, <span class="keyword">String</span> htmlStr)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">File</span> file = <span class="keyword">new</span> <span class="built_in">File</span>(path + <span class="string">"\\爬取的文件\\index.html"</span>);</span><br><span class="line">        <span class="keyword">if</span> (!file.getParentFile().<span class="built_in">exists</span>()) &#123;</span><br><span class="line">            file.getParentFile().mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 字节输出流</span></span><br><span class="line">        FileOutputStream fos = null;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            fos = <span class="keyword">new</span> FileOutputStream(file);</span><br><span class="line">            OutputStreamWriter writer = <span class="keyword">new</span> OutputStreamWriter(fos, <span class="string">"UTF-8"</span>);</span><br><span class="line">            writer.<span class="built_in">write</span>(htmlStr);</span><br><span class="line">            writer.<span class="built_in">close</span>();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fos.<span class="built_in">close</span>();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveCss</span><span class="params">(<span class="keyword">String</span> path, ArrayList&lt;Element&gt; cssList)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cssList.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!cssList.<span class="built_in">get</span>(i).attr(<span class="string">"abs:href"</span>).equals(cssList.<span class="built_in">get</span>(i).attr(<span class="string">"href"</span>))) &#123;</span><br><span class="line">                Source source = <span class="keyword">new</span> Source();</span><br><span class="line">                <span class="keyword">String</span> css = source.getString(cssList.<span class="built_in">get</span>(i).attr(<span class="string">"abs:href"</span>));</span><br><span class="line"></span><br><span class="line">                <span class="keyword">String</span> paths[] = cssList.<span class="built_in">get</span>(i).attr(<span class="string">"href"</span>).split(<span class="string">"\\?"</span>);</span><br><span class="line">                <span class="built_in">File</span> file = <span class="keyword">new</span> <span class="built_in">File</span>(path + <span class="string">"\\爬取的文件\\"</span> + paths[<span class="number">0</span>]);</span><br><span class="line">                <span class="keyword">if</span> (!file.getParentFile().<span class="built_in">exists</span>()) &#123;</span><br><span class="line">                    file.getParentFile().mkdirs();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 字节输出流</span></span><br><span class="line">                FileOutputStream fos = null;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    fos = <span class="keyword">new</span> FileOutputStream(file);</span><br><span class="line">                    OutputStreamWriter writer = <span class="keyword">new</span> OutputStreamWriter(fos, <span class="string">"UTF-8"</span>);</span><br><span class="line">                    writer.<span class="built_in">write</span>(css);</span><br><span class="line">                    writer.<span class="built_in">close</span>();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; finally &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        fos.<span class="built_in">close</span>();</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                        <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveImg</span><span class="params">(<span class="keyword">String</span> path, ArrayList&lt;Element&gt; imgList)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; imgList.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!imgList.<span class="built_in">get</span>(i).attr(<span class="string">"abs:src"</span>).equals(imgList.<span class="built_in">get</span>(i).attr(<span class="string">"src"</span>))) &#123;</span><br><span class="line">                <span class="keyword">String</span> paths[] = imgList.<span class="built_in">get</span>(i).attr(<span class="string">"src"</span>).split(<span class="string">"\\?"</span>);</span><br><span class="line">                <span class="built_in">File</span> file = <span class="keyword">new</span> <span class="built_in">File</span>(path + <span class="string">"\\爬取的文件\\"</span> + paths[<span class="number">0</span>]);</span><br><span class="line">                <span class="keyword">if</span> (!file.getParentFile().<span class="built_in">exists</span>()) &#123;</span><br><span class="line">                    file.getParentFile().mkdirs();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    URL uri = <span class="keyword">new</span> URL(imgList.<span class="built_in">get</span>(i).attr(<span class="string">"abs:src"</span>));  </span><br><span class="line">                    InputStream in = uri.openStream();  </span><br><span class="line">                    FileOutputStream fo = <span class="keyword">new</span> FileOutputStream(file);  </span><br><span class="line">                    <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];  </span><br><span class="line">                    <span class="keyword">int</span> length = <span class="number">0</span>;  </span><br><span class="line">                    <span class="keyword">while</span> ((length = in.<span class="built_in">read</span>(buf, <span class="number">0</span>, buf.length)) != <span class="number">-1</span>) &#123;  </span><br><span class="line">                        fo.<span class="built_in">write</span>(buf, <span class="number">0</span>, length);  </span><br><span class="line">                    &#125;  </span><br><span class="line">                    in.<span class="built_in">close</span>();  </span><br><span class="line">                    fo.<span class="built_in">close</span>();  </span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;  </span><br><span class="line">                    e.printStackTrace();  </span><br><span class="line">                &#125;  </span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveJs</span><span class="params">(<span class="keyword">String</span> path, ArrayList&lt;Element&gt; jsList)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; jsList.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!jsList.<span class="built_in">get</span>(i).attr(<span class="string">"abs:src"</span>).equals(jsList.<span class="built_in">get</span>(i).attr(<span class="string">"src"</span>))) &#123;</span><br><span class="line">                Source source = <span class="keyword">new</span> Source();</span><br><span class="line">                <span class="keyword">String</span> css = source.getString(jsList.<span class="built_in">get</span>(i).attr(<span class="string">"abs:src"</span>));</span><br><span class="line"></span><br><span class="line">                <span class="keyword">String</span> paths[] = jsList.<span class="built_in">get</span>(i).attr(<span class="string">"src"</span>).split(<span class="string">"\\?"</span>);</span><br><span class="line">                <span class="built_in">File</span> file = <span class="keyword">new</span> <span class="built_in">File</span>(path + <span class="string">"\\爬取的文件\\"</span> + paths[<span class="number">0</span>]);</span><br><span class="line">                <span class="keyword">if</span> (!file.getParentFile().<span class="built_in">exists</span>()) &#123;</span><br><span class="line">                    file.getParentFile().mkdirs();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 字节输出流</span></span><br><span class="line">                FileOutputStream fos = null;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    fos = <span class="keyword">new</span> FileOutputStream(file);</span><br><span class="line">                    OutputStreamWriter writer = <span class="keyword">new</span> OutputStreamWriter(fos, <span class="string">"UTF-8"</span>);</span><br><span class="line">                    writer.<span class="built_in">write</span>(css);</span><br><span class="line">                    writer.<span class="built_in">close</span>();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; finally &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        fos.<span class="built_in">close</span>();</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                        <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="界面模块"><a href="#界面模块" class="headerlink" title="界面模块"></a>界面模块</h2><p>代码略，来个图说明设计。<br><img src="http://cdn.voidking.com//imgs/java-crawler/result.gif" alt=""></p><h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>未填的坑：<br>1、最终设计做到了功能3，功能4未做。<br>2、爬取文件的相对位置需要另做处理。</p><h1 id="源码分享"><a href="#源码分享" class="headerlink" title="源码分享"></a>源码分享</h1><p><a href="https://github.com/voidking/java-crawler" target="_blank" rel="noopener">https://github.com/voidking/java-crawler</a></p><h1 id="书签"><a href="#书签" class="headerlink" title="书签"></a>书签</h1><p>如何用Java写一个爬虫？<br><a href="https://www.zhihu.com/question/30626103" target="_blank" rel="noopener">https://www.zhihu.com/question/30626103</a></p><p>零基础写Java知乎爬虫之先拿百度首页练练手<br><a href="http://www.jb51.net/article/57193.htm" target="_blank" rel="noopener">http://www.jb51.net/article/57193.htm</a></p><p>网页爬虫的设计与实现（Java版）<br><a href="http://www.aiuxian.com/article/p-2279197.html" target="_blank" rel="noopener">http://www.aiuxian.com/article/p-2279197.html</a></p><p>网页爬虫系统的设计<br><a href="http://www.tuicool.com/articles/7JVzIza" target="_blank" rel="noopener">http://www.tuicool.com/articles/7JVzIza</a></p><p>专栏：使用JSOUP实现网络爬虫<br><a href="http://blog.csdn.net/column/details/jsoup.html" target="_blank" rel="noopener">http://blog.csdn.net/column/details/jsoup.html</a></p><p>jsoup Cookbook(中文版)<br><a href="http://www.open-open.com/jsoup/" target="_blank" rel="noopener">http://www.open-open.com/jsoup/</a></p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.voidking.com/dev-java-crawler/" title="Java网页爬虫">https://www.voidking.com/dev-java-crawler/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！源站会及时更新知识点及修正错误，阅读体验也更好。欢迎分享，欢迎收藏~</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/java/" rel="tag"># java</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-hadoop-wordcount/" rel="prev" title="Hadoop单词计数"><i class="fa fa-chevron-left"></i> Hadoop单词计数</a></div><div class="post-nav-item"> <a href="/dev-thinkphp-nginx/" rel="next" title="thinkphp部署到nginx服务器">thinkphp部署到nginx服务器<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zODU3Mi8xNTEwMA=="></div></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#功能进阶"><span class="nav-number">1.</span> <span class="nav-text">功能进阶</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#模块划分"><span class="nav-number">2.</span> <span class="nav-text">模块划分</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#核心代码摘要"><span class="nav-number">3.</span> <span class="nav-text">核心代码摘要</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#获取页面模块"><span class="nav-number">3.1.</span> <span class="nav-text">获取页面模块</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#获取页面链接模块"><span class="nav-number">3.2.</span> <span class="nav-text">获取页面链接模块</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#获取静态文件"><span class="nav-number">3.3.</span> <span class="nav-text">获取静态文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#保存文件模块"><span class="nav-number">3.4.</span> <span class="nav-text">保存文件模块</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#界面模块"><span class="nav-number">3.5.</span> <span class="nav-text">界面模块</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#后记"><span class="nav-number">4.</span> <span class="nav-text">后记</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#源码分享"><span class="nav-number">5.</span> <span class="nav-text">源码分享</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#书签"><span class="nav-number">6.</span> <span class="nav-text">书签</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">学而不思则罔，思而不学则殆！</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">622</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">50</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">198</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2021</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://www.beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer><div id="needsharebutton-float"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css"><script src="/lib/needsharebutton/needsharebutton.js"></script><script>pbOptions={iconStyle:"box",boxForm:"horizontal",position:"bottomCenter",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-postbottom",pbOptions),flOptions={iconStyle:"box",boxForm:"horizontal",position:"topRight",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-float",flOptions)</script><script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  // window.livereOptions = {
  //   refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  // };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script></body></html>