<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//qiniu-cdn.voidking.com/doc/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="前言本文中，我们会使用Docker安装配置Prometheus核心组件，实现一个完整的监控告警系统。具体的组件包括：Prometheus Server、Exporters、PushGateway、Alertmanager、Grafana 参考文档：  《Prometheus入门篇》 Prometheus官方文档 Prometheus - GETTING STARTED Prometheus下载 P"><meta property="og:type" content="article"><meta property="og:title" content="好好学Docker：使用Docker安装配置Prometheus"><meta property="og:url" content="https://www.voidking.com/dev-docker-prometheus/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="前言本文中，我们会使用Docker安装配置Prometheus核心组件，实现一个完整的监控告警系统。具体的组件包括：Prometheus Server、Exporters、PushGateway、Alertmanager、Grafana 参考文档：  《Prometheus入门篇》 Prometheus官方文档 Prometheus - GETTING STARTED Prometheus下载 P"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://cdn.voidking.com/img/docker-prometheus/graph.jpg?imageView2/0/w/800"><meta property="og:image" content="http://cdn.voidking.com/img/docker-prometheus/targets.jpg?imageView2/0/w/800"><meta property="og:image" content="http://cdn.voidking.com/img/docker-prometheus/metrics.jpg?imageView2/0/w/800"><meta property="og:image" content="http://cdn.voidking.com/img/docker-prometheus/targets2.png?imageView2/0/w/800"><meta property="og:image" content="http://cdn.voidking.com/img/docker-prometheus/pushgateway.png?imageView2/0/w/800"><meta property="og:image" content="http://cdn.voidking.com/img/docker-prometheus/pushgateway2.png?imageView2/0/w/800"><meta property="og:image" content="http://cdn.voidking.com/img/docker-prometheus/chinese.png?imageView2/0/w/800"><meta property="og:image" content="http://cdn.voidking.com/img/docker-prometheus/alertmanager.png?imageView2/0/w/800"><meta property="og:image" content="http://cdn.voidking.com/img/docker-prometheus/alert.jpg?imageView2/0/w/800"><meta property="og:image" content="http://cdn.voidking.com/img/docker-prometheus/alert.png?imageView2/0/w/800"><meta property="og:image" content="http://cdn.voidking.com/img/docker-prometheus/webhook.png?imageView2/0/w/800"><meta property="article:published_time" content="2020-01-13T20:00:00.000Z"><meta property="article:modified_time" content="2024-09-07T08:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="docker"><meta property="article:tag" content="好好学Docker"><meta property="article:tag" content="prometheus"><meta property="article:tag" content="监控"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://cdn.voidking.com/img/docker-prometheus/graph.jpg?imageView2/0/w/800"><link rel="canonical" href="https://www.voidking.com/dev-docker-prometheus/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>好好学Docker：使用Docker安装配置Prometheus | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">一个计算机技术爱好者与学习者</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-docker-prometheus/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="一个计算机技术爱好者与学习者"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> 好好学Docker：使用Docker安装配置Prometheus</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-01-13 20:00:00" itemprop="dateCreated datePublished" datetime="2020-01-13T20:00:00+00:00">2020-01-13</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2024-09-07 08:00:00" itemprop="dateModified" datetime="2024-09-07T08:00:00+00:00">2024-09-07</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/monitoring/" itemprop="url" rel="index"><span itemprop="name">monitoring</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="前言"><span class="post-title-index">1.</span><a href="#前言" class="headerlink" title="前言"></a> 前言</h1><p>本文中，我们会使用Docker安装配置Prometheus核心组件，实现一个完整的监控告警系统。<br>具体的组件包括：Prometheus Server、Exporters、PushGateway、Alertmanager、Grafana</p><p>参考文档：</p><ul><li><a href="https://www.voidking.com/dev-prometheus-start/">《Prometheus入门篇》</a></li><li><a target="_blank" rel="noopener" href="https://prometheus.io/docs/introduction/overview/">Prometheus官方文档</a></li><li><a target="_blank" rel="noopener" href="https://prometheus.io/docs/prometheus/latest/getting_started/">Prometheus - GETTING STARTED</a></li><li><a target="_blank" rel="noopener" href="https://prometheus.io/download/">Prometheus下载</a></li><li><a target="_blank" rel="noopener" href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/">Prometheus - CONFIGURATION</a></li><li><a target="_blank" rel="noopener" href="https://www.bookstack.cn/read/prometheus_practice/configuration-README.md">Prometheus实战 - Prometheus配置</a></li><li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/informatics/p/12215255.html">Prometheus监控系统之入门篇</a></li></ul><span id="more"></span><h1 id="安装配置Prometheus-Server"><span class="post-title-index">2.</span><a href="#安装配置Prometheus-Server" class="headerlink" title="安装配置Prometheus Server"></a> 安装配置Prometheus Server</h1><p>1、下载prometheus镜像（以v2.45.6为例）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull prom/prometheus:v2.45.6</span><br></pre></td></tr></table></figure><p>更多版本镜像，访问<a target="_blank" rel="noopener" href="https://hub.docker.com/r/prom/prometheus">dockerhub - prometheus</a>获取。</p><p>2、拷贝配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /opt/prometheus/&#123;conf,data&#125;</span><br><span class="line">docker run --name tmp -d prom/prometheus:v2.45.6</span><br><span class="line">docker <span class="built_in">cp</span> tmp:/etc/prometheus/prometheus.yml /opt/prometheus/conf/</span><br><span class="line">docker <span class="built_in">rm</span> tmp -f</span><br></pre></td></tr></table></figure><p>3、编辑配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /opt/prometheus/conf/targets</span><br><span class="line"><span class="built_in">touch</span> /opt/prometheus/conf/targets/targets.yml</span><br><span class="line">vim /opt/prometheus/conf/prometheus.yml</span><br><span class="line">vim /opt/prometheus/conf/targets/targets.yml</span><br></pre></td></tr></table></figure><p>配置方法参考文档<a href="https://www.voidking.com/dev-prometheus-service-discovery/">《Prometheus服务发现》</a>中的【文件服务发现】一节。</p><p>4、启动prometheus</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">docker run --name=prometheus -d \</span><br><span class="line">  -u root \</span><br><span class="line">  -p 9090:9090 \</span><br><span class="line">  -v /opt/prometheus/conf/prometheus.yml:/etc/prometheus/prometheus.yml \</span><br><span class="line">  -v /opt/prometheus/conf/targets:/etc/prometheus/targets \</span><br><span class="line">  -v /opt/prometheus/conf/rules:/etc/prometheus/rules \</span><br><span class="line">  -v /opt/prometheus/data:/data/prometheus \</span><br><span class="line">  -v /etc/localtime:/etc/localtime \</span><br><span class="line">  prom/prometheus:v2.45.6 \</span><br><span class="line">  --config.file=/etc/prometheus/prometheus.yml \</span><br><span class="line">  --web.enable-lifecycle \</span><br><span class="line">  --storage.tsdb.path=/data/prometheus \</span><br><span class="line">  --storage.tsdb.retention.time=30d \</span><br><span class="line">  --web.enable-remote-write-receiver</span><br></pre></td></tr></table></figure><p>5、查看prometheus状态</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs prometheus</span><br></pre></td></tr></table></figure><h1 id="访问Prometheus-Server"><span class="post-title-index">3.</span><a href="#访问Prometheus-Server" class="headerlink" title="访问Prometheus Server"></a> 访问Prometheus Server</h1><p>1、访问Prometheus<br>浏览器访问 <a target="_blank" rel="noopener" href="http://192.168.56.102:9090/">http://192.168.56.102:9090/</a><br><img src="http://cdn.voidking.com/img/docker-prometheus/graph.jpg?imageView2/0/w/800"></p><p>2、查看targets<br>浏览器访问 <a target="_blank" rel="noopener" href="http://192.168.56.102:9090/targets/">http://192.168.56.102:9090/targets/</a><br><img src="http://cdn.voidking.com/img/docker-prometheus/targets.jpg?imageView2/0/w/800"></p><p>3、查看指标<br>浏览器访问 <a target="_blank" rel="noopener" href="http://192.168.56.102:9090/metrics/">http://192.168.56.102:9090/metrics/</a><br><img src="http://cdn.voidking.com/img/docker-prometheus/metrics.jpg?imageView2/0/w/800"></p><h1 id="安装Node-Exporter"><span class="post-title-index">4.</span><a href="#安装Node-Exporter" class="headerlink" title="安装Node Exporter"></a> 安装Node Exporter</h1><h2 id="Docker安装Node-Exporter"><span class="post-title-index">4.1.</span><a href="#Docker安装Node-Exporter" class="headerlink" title="Docker安装Node Exporter"></a> Docker安装Node Exporter</h2><p>参考文档：<a target="_blank" rel="noopener" href="https://github.com/prometheus/node_exporter">github - prometheus/node_exporter</a></p><p>1、下载node-exporter镜像（以v1.6.0为例）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull prom/node-exporter:v1.6.0</span><br></pre></td></tr></table></figure><p>更多版本镜像，访问<a target="_blank" rel="noopener" href="https://hub.docker.com/r/prom/node-exporter">dockerhub - node exporter</a>获取。</p><p>2、启动node exporter</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run --name=node-exporter -d \</span><br><span class="line">  -p 9100:9100 \</span><br><span class="line">  --net=<span class="string">&quot;host&quot;</span> \</span><br><span class="line">  --pid=<span class="string">&quot;host&quot;</span> \</span><br><span class="line">  -v <span class="string">&quot;/:/host:ro,rslave&quot;</span> \</span><br><span class="line">  prom/node-exporter:v1.6.0 \</span><br><span class="line">  --path.rootfs=/host</span><br></pre></td></tr></table></figure><p>3、访问node exporter</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://localhost:9100/metrics</span><br></pre></td></tr></table></figure><h2 id="Bin安装Node-Exporter"><span class="post-title-index">4.2.</span><a href="#Bin安装Node-Exporter" class="headerlink" title="Bin安装Node Exporter"></a> Bin安装Node Exporter</h2><p>bin安装node exporter的优势是适用于所有主机，不管主机上有没有安装docker。</p><p>1、安装node exporter</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/prometheus/node_exporter/releases/download/v1.6.0/node_exporter-1.6.0.linux-amd64.tar.gz</span><br><span class="line">tar -xzvf node_exporter-1.6.0.linux-amd64.tar.gz</span><br><span class="line"><span class="built_in">mv</span> node_exporter-1.6.0.linux-amd64/node_exporter /usr/local/bin</span><br></pre></td></tr></table></figure><p>2、测试启动node exporter</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node_exporter</span><br></pre></td></tr></table></figure><p>3、配置systemd管理</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF &gt; /etc/systemd/system/node_exporter.service </span></span><br><span class="line"><span class="string">[Unit]</span></span><br><span class="line"><span class="string">Description=Node Exporter</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Service]</span></span><br><span class="line"><span class="string">User=root</span></span><br><span class="line"><span class="string">ExecStart=/usr/local/bin/node_exporter</span></span><br><span class="line"><span class="string">Restart=always</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Install]</span></span><br><span class="line"><span class="string">WantedBy=multi-user.target</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><p>4、启动node exporter</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl start node_exporter</span><br><span class="line">systemctl status node_exporter</span><br><span class="line">systemctl <span class="built_in">enable</span> node_exporter</span><br></pre></td></tr></table></figure><p>5、访问node exporter</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://localhost:9100/metrics</span><br></pre></td></tr></table></figure><h1 id="Promserver采集Node-Exporter数据"><span class="post-title-index">5.</span><a href="#Promserver采集Node-Exporter数据" class="headerlink" title="Promserver采集Node Exporter数据"></a> Promserver采集Node Exporter数据</h1><p>1、修改targets.yml （假设主机IP为 192.168.56.102）</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;192.168.56.102:9100&#x27;</span>]</span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">group:</span> <span class="string">&#x27;node-exporter&#x27;</span></span><br></pre></td></tr></table></figure><p>2、查看targets<br>浏览器访问 <a target="_blank" rel="noopener" href="http://192.168.56.102:9090/targets/">http://192.168.56.102:9090/targets/</a><br><img src="http://cdn.voidking.com/img/docker-prometheus/targets2.png?imageView2/0/w/800"></p><h1 id="安装PushGateway"><span class="post-title-index">6.</span><a href="#安装PushGateway" class="headerlink" title="安装PushGateway"></a> 安装PushGateway</h1><p>1、登录dockerhub查看需要的<a target="_blank" rel="noopener" href="https://hub.docker.com/r/prom/pushgateway">pushgateway</a></p><p>2、下载pushgateway镜像（以v1.1.0为例）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull prom/pushgateway:v1.1.0</span><br></pre></td></tr></table></figure><p>3、启动pushgateway</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run --name=pushgateway -d \</span><br><span class="line">-p 9091:9091 \</span><br><span class="line">prom/pushgateway:v1.1.0</span><br></pre></td></tr></table></figure><p>4、测试服务<br>浏览器访问 <a target="_blank" rel="noopener" href="http://192.168.56.102:9091/#">http://192.168.56.102:9091/#</a><br><img src="http://cdn.voidking.com/img/docker-prometheus/pushgateway.png?imageView2/0/w/800"></p><p>5、推送数据给pushgateway</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;exam_metric 100&quot;</span> | curl --data-binary @- http://127.0.0.1:9091/metrics/job/exam</span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF | curl --data-binary @- http://127.0.0.1:9091/metrics/job/exam/instance/test</span></span><br><span class="line"><span class="string">chinese 120</span></span><br><span class="line"><span class="string">math 150</span></span><br><span class="line"><span class="string">english 140</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><p><img src="http://cdn.voidking.com/img/docker-prometheus/pushgateway2.png?imageView2/0/w/800"></p><h1 id="Promserver采集PushGateway数据"><span class="post-title-index">7.</span><a href="#Promserver采集PushGateway数据" class="headerlink" title="Promserver采集PushGateway数据"></a> Promserver采集PushGateway数据</h1><p>1、修改targets.yml文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;192.168.56.102:9091&#x27;</span>]</span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">group:</span> <span class="string">&#x27;pushgateway&#x27;</span></span><br></pre></td></tr></table></figure><p>2、在promserver查看数据<br><img src="http://cdn.voidking.com/img/docker-prometheus/chinese.png?imageView2/0/w/800"></p><h1 id="安装Alertmanager"><span class="post-title-index">8.</span><a href="#安装Alertmanager" class="headerlink" title="安装Alertmanager"></a> 安装Alertmanager</h1><p>1、登录dockerhub查看需要的<a target="_blank" rel="noopener" href="https://hub.docker.com/r/prom/alertmanager">alertmanager</a></p><p>2、下载alertmanager镜像（以v0.23.0为例）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull prom/alertmanager:v0.23.0</span><br></pre></td></tr></table></figure><p>v0.15.0以下版本只支持<code>/api/v1</code>，不支持<code>/api/v2</code></p><p>3、创建配置文件（建议和prometheus.yml放在一起）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run --name tmp -d prom/alertmanager:v0.23.0</span><br><span class="line">docker <span class="built_in">cp</span> tmp:/etc/alertmanager/alertmanager.yml /opt/prometheus/conf/alertmanager.yml</span><br><span class="line">docker <span class="built_in">rm</span> tmp -f</span><br></pre></td></tr></table></figure><p>alertmanager.yml 默认配置为：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">global:</span></span><br><span class="line">  <span class="attr">resolve_timeout:</span> <span class="string">5m</span></span><br><span class="line"></span><br><span class="line"><span class="attr">route:</span></span><br><span class="line">  <span class="attr">group_by:</span> [<span class="string">&#x27;alertname&#x27;</span>]</span><br><span class="line">  <span class="attr">group_wait:</span> <span class="string">10s</span></span><br><span class="line">  <span class="attr">group_interval:</span> <span class="string">10s</span></span><br><span class="line">  <span class="attr">repeat_interval:</span> <span class="string">1h</span></span><br><span class="line">  <span class="attr">receiver:</span> <span class="string">&#x27;web.hook&#x27;</span></span><br><span class="line"><span class="attr">receivers:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&#x27;web.hook&#x27;</span></span><br><span class="line">  <span class="attr">webhook_configs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">url:</span> <span class="string">&#x27;http://127.0.0.1:5001/&#x27;</span></span><br><span class="line"><span class="attr">inhibit_rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">source_match:</span></span><br><span class="line">      <span class="attr">severity:</span> <span class="string">&#x27;critical&#x27;</span></span><br><span class="line">    <span class="attr">target_match:</span></span><br><span class="line">      <span class="attr">severity:</span> <span class="string">&#x27;warning&#x27;</span></span><br><span class="line">    <span class="attr">equal:</span> [<span class="string">&#x27;alertname&#x27;</span>, <span class="string">&#x27;dev&#x27;</span>, <span class="string">&#x27;instance&#x27;</span>]</span><br></pre></td></tr></table></figure><p>修改 alertmanager.yml 为：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">global:</span></span><br><span class="line">  <span class="attr">resolve_timeout:</span> <span class="string">5m</span></span><br><span class="line"><span class="attr">route:</span></span><br><span class="line">  <span class="attr">group_by:</span> [<span class="string">&#x27;exam&#x27;</span>]  <span class="comment">#与prometheus告警规则配置的groupname对应</span></span><br><span class="line">  <span class="attr">group_wait:</span> <span class="string">10s</span> <span class="comment">#报警等待时间</span></span><br><span class="line">  <span class="attr">group_interval:</span> <span class="string">10s</span> <span class="comment">#报警间隔时间</span></span><br><span class="line">  <span class="attr">repeat_interval:</span> <span class="string">1m</span> <span class="comment">#重复报警间隔时间</span></span><br><span class="line">  <span class="attr">receiver:</span> <span class="string">&#x27;web.hook&#x27;</span> <span class="comment">#告警处理方式，我们这里通过web.hook方式，也可以配置成邮件等方式</span></span><br><span class="line"><span class="attr">receivers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&#x27;web.hook&#x27;</span></span><br><span class="line">    <span class="attr">webhook_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">url:</span> <span class="string">&#x27;http://192.168.56.102:8080/exam/test&#x27;</span> <span class="comment">#告警webhook地址，告警信息会post到该地址，需要编写服务接收该告警数据</span></span><br><span class="line"><span class="attr">inhibit_rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">source_match:</span></span><br><span class="line">      <span class="attr">severity:</span> <span class="string">&#x27;critical&#x27;</span></span><br><span class="line">    <span class="attr">target_match:</span></span><br><span class="line">      <span class="attr">severity:</span> <span class="string">&#x27;warning&#x27;</span> <span class="comment">#目标告警状态</span></span><br><span class="line">    <span class="attr">equal:</span> [<span class="string">&#x27;alertname&#x27;</span>, <span class="string">&#x27;dev&#x27;</span>, <span class="string">&#x27;instance&#x27;</span>]</span><br></pre></td></tr></table></figure><p>4、启动alertmanager</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run --name=alertmanager -d \</span><br><span class="line">  -p 9093:9093 \</span><br><span class="line">  -v /opt/prometheus/conf/alertmanager.yml:/etc/alertmanager/alertmanager.yml \</span><br><span class="line">  prom/alertmanager:v0.23.0 \</span><br><span class="line">  --config.file=/etc/alertmanager/alertmanager.yml \</span><br><span class="line">  --storage.path=/alertmanager</span><br></pre></td></tr></table></figure><p>5、测试服务<br>浏览器访问 <a target="_blank" rel="noopener" href="http://192.168.56.102:9093/">http://192.168.56.102:9093/</a><br><img src="http://cdn.voidking.com/img/docker-prometheus/alertmanager.png?imageView2/0/w/800"></p><h1 id="配置告警"><span class="post-title-index">9.</span><a href="#配置告警" class="headerlink" title="配置告警"></a> 配置告警</h1><p>1、编辑prometheus.yml配置文件，添加alertmanager配置和报警规则配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">global:</span></span><br><span class="line">  <span class="attr">scrape_interval:</span> <span class="string">15s</span> <span class="comment">#默认采集监控数据时间间隔</span></span><br><span class="line"><span class="attr">scrape_configs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;file_sd_targets&#x27;</span></span><br><span class="line">    <span class="attr">file_sd_configs:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">files:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;/etc/prometheus/targets/*.yml&#x27;</span></span><br><span class="line"><span class="attr">alerting:</span>   <span class="comment">#告警管理器设置</span></span><br><span class="line">  <span class="attr">alertmanagers:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">static_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;192.168.56.102:9093&#x27;</span>] <span class="comment">#告警信息会发送给alertmanager进一步处理</span></span><br><span class="line"><span class="attr">rule_files:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/etc/prometheus/rules/*.rules</span>   <span class="comment">#告警规则文件路径，对应宿主机 /opt/prometheus/conf/rules/*.rules</span></span><br></pre></td></tr></table></figure><p>2、设置报警规则</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /opt/prometheus/conf/rules/exam.rules</span><br></pre></td></tr></table></figure><p>exam.rules内容为：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">groups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">exam</span></span><br><span class="line">    <span class="attr">rules:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">alert:</span> <span class="string">exam告警测试</span></span><br><span class="line">        <span class="attr">expr:</span> <span class="string">chinese</span> <span class="string">&gt;</span> <span class="number">100</span> <span class="comment">#语文成绩大于100告警，注：我们在pushgateway推送数据的时候，设置的是120，因此会触发告警</span></span><br><span class="line">        <span class="attr">for:</span> <span class="string">1m</span></span><br><span class="line">        <span class="attr">labels:</span></span><br><span class="line">          <span class="attr">status:</span> <span class="string">warning</span></span><br><span class="line">        <span class="attr">annotations:</span></span><br><span class="line">          <span class="attr">summary:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123;$labels.instance&#125;&#125;</span>:语文成绩优秀! nb了!!!&quot;</span></span><br><span class="line">          <span class="attr">description:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123;$labels.instance&#125;&#125;</span>: 语文成绩优秀! nbnbnb!!!&quot;</span></span><br></pre></td></tr></table></figure><p>exam.rules 也可以先配置为空。</p><p>3、重新加载配置或者重启promserver</p><p>4、查看告警<br>在<a target="_blank" rel="noopener" href="http://192.168.56.102:9090/alerts/">prometheus alerts页面</a>查看告警<br><img src="http://cdn.voidking.com/img/docker-prometheus/alert.jpg?imageView2/0/w/800"></p><p>或者在<a target="_blank" rel="noopener" href="http://192.168.56.102:9093/#/alerts">alertmanager alerts页面</a>查看告警<br><img src="http://cdn.voidking.com/img/docker-prometheus/alert.png?imageView2/0/w/800"></p><h1 id="告警通知处理"><span class="post-title-index">10.</span><a href="#告警通知处理" class="headerlink" title="告警通知处理"></a> 告警通知处理</h1><p>alertmanager.yml文件中配置的告警方式是webhook，告警发送到 <a target="_blank" rel="noopener" href="http://192.168.56.102:8080/exam/test">http://192.168.56.102:8080/exam/test</a> ，因此，我们需要一个服务来接收处理这个告警。</p><p>1、安装golang环境，参考<a href="https://www.voidking.com/dev-centos7-beego-env/">《CentOS7部署beego项目》</a>golang安装一节</p><p>2、创建main.go</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;fmt&quot;</span></span><br><span class="line">  <span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">  <span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  r := gin.Default()</span><br><span class="line">  r.POST(<span class="string">&quot;/exam/test&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">    res, _ := ioutil.ReadAll(c.Request.Body)</span><br><span class="line">    fmt.Println(<span class="type">string</span>(res)) <span class="comment">//这里我们只简单打印告警信息</span></span><br><span class="line">    c.JSON(<span class="number">200</span>, gin.H&#123;</span><br><span class="line">      <span class="string">&quot;message&quot;</span>: <span class="string">&quot;alert message&quot;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  r.Run(<span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3、运行代码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">go get github.com/gin-gonic/gin</span><br><span class="line">go run main.go</span><br></pre></td></tr></table></figure><p><img src="http://cdn.voidking.com/img/docker-prometheus/webhook.png?imageView2/0/w/800"><br>如上图，服务接收到了告警信息，并且打印了告警信息。</p><h1 id="Grafana"><span class="post-title-index">11.</span><a href="#Grafana" class="headerlink" title="Grafana"></a> Grafana</h1><p>Grafana常被用来展示Prometheus的数据，详情参考<a href="https://www.voidking.com/dev-docker-grafana/">《使用Docker安装配置Grafana》</a>。</p><h1 id="后记"><span class="post-title-index">12.</span><a href="#后记" class="headerlink" title="后记"></a> 后记</h1><p>以上，配置完成了Prometheus Server、Exporters、PushGateway、Alertmanager、Grafana，跑通了数据的收集和显示，测试了告警信息的收集，nice。</p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>原文链接：</strong> <a href="https://www.voidking.com/dev-docker-prometheus/" title="好好学Docker：使用Docker安装配置Prometheus">https://www.voidking.com/dev-docker-prometheus/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本文采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议，转载请注明出处！源站会即时更新知识点并修正错误，欢迎访问~</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/docker/" rel="tag"># docker</a> <a href="/tags/%E5%A5%BD%E5%A5%BD%E5%AD%A6Docker/" rel="tag"># 好好学Docker</a> <a href="/tags/prometheus/" rel="tag"># prometheus</a> <a href="/tags/%E7%9B%91%E6%8E%A7/" rel="tag"># 监控</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-grafana-prometheus-problem/" rel="prev" title="Grafana和Prometheus问题记录"><i class="fa fa-chevron-left"></i> Grafana和Prometheus问题记录</a></div><div class="post-nav-item"> <a href="/dev-docker-grafana/" rel="next" title="好好学Docker：使用Docker安装配置Grafana">好好学Docker：使用Docker安装配置Grafana<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">1. 前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEPrometheus-Server"><span class="nav-text">2. 安装配置Prometheus Server</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AE%BF%E9%97%AEPrometheus-Server"><span class="nav-text">3. 访问Prometheus Server</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85Node-Exporter"><span class="nav-text">4. 安装Node Exporter</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker%E5%AE%89%E8%A3%85Node-Exporter"><span class="nav-text">4.1. Docker安装Node Exporter</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Bin%E5%AE%89%E8%A3%85Node-Exporter"><span class="nav-text">4.2. Bin安装Node Exporter</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Promserver%E9%87%87%E9%9B%86Node-Exporter%E6%95%B0%E6%8D%AE"><span class="nav-text">5. Promserver采集Node Exporter数据</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85PushGateway"><span class="nav-text">6. 安装PushGateway</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Promserver%E9%87%87%E9%9B%86PushGateway%E6%95%B0%E6%8D%AE"><span class="nav-text">7. Promserver采集PushGateway数据</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85Alertmanager"><span class="nav-text">8. 安装Alertmanager</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%91%8A%E8%AD%A6"><span class="nav-text">9. 配置告警</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%91%8A%E8%AD%A6%E9%80%9A%E7%9F%A5%E5%A4%84%E7%90%86"><span class="nav-text">10. 告警通知处理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Grafana"><span class="nav-text">11. Grafana</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%8E%E8%AE%B0"><span class="nav-text">12. 后记</span></a></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">一个计算机技术爱好者与学习者</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">779</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">34</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">271</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2026</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="https://cdn.staticfile.net/gitalk/1.7.2/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://cdn.staticfile.net/gitalk/1.7.2/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '5a238b8c32b1e4dd2156',
      clientSecret: 'bfb5d518626f6fdc7da0351d1e0cd37ab75c6361',
      repo: 'gitalk-comments',
      owner: 'voidking',
      admin: ['voidking'],
      id: '6461bedf846bf6c7a12d141f01a493da',
      title: '好好学Docker：使用Docker安装配置Prometheus',
      body: '欢迎留言，互相交流学习~',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></body></html>