<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//qiniu-cdn.voidking.com/doc/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="前言本着“需要什么就学习什么”的原则，花了几天时间，实践了一下thinkphp框架的使用。整理了一下必须掌握的三个部分：路由控制、模板渲染、增删改查。"><meta property="og:type" content="article"><meta property="og:title" content="好好学PHP：ThinkPHP实战"><meta property="og:url" content="https://www.voidking.com/dev-thinkphp-in-action/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="前言本着“需要什么就学习什么”的原则，花了几天时间，实践了一下thinkphp框架的使用。整理了一下必须掌握的三个部分：路由控制、模板渲染、增删改查。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://cdn.voidking.com/img/thinkphp-in-action/copy.jpg"><meta property="og:image" content="http://cdn.voidking.com/img/thinkphp-in-action/firstfunc.jpg"><meta property="og:image" content="http://cdn.voidking.com/img/thinkphp-in-action/template.jpg"><meta property="article:published_time" content="2016-08-28T22:15:11.000Z"><meta property="article:modified_time" content="2016-08-28T22:15:11.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="php"><meta property="article:tag" content="好好学PHP"><meta property="article:tag" content="thinkphp"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://cdn.voidking.com/img/thinkphp-in-action/copy.jpg"><link rel="canonical" href="https://www.voidking.com/dev-thinkphp-in-action/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>好好学PHP：ThinkPHP实战 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">一个计算机技术爱好者与学习者</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-thinkphp-in-action/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="一个计算机技术爱好者与学习者"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> 好好学PHP：ThinkPHP实战</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2016-08-28 22:15:11" itemprop="dateCreated datePublished" datetime="2016-08-28T22:15:11+00:00">2016-08-28</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/php/" itemprop="url" rel="index"><span itemprop="name">php</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="前言"><span class="post-title-index">1.</span><a href="#前言" class="headerlink" title="前言"></a> 前言</h1><p>本着“需要什么就学习什么”的原则，花了几天时间，实践了一下thinkphp框架的使用。整理了一下必须掌握的三个部分：路由控制、模板渲染、增删改查。</p><span id="more"></span><h1 id="准备"><span class="post-title-index">2.</span><a href="#准备" class="headerlink" title="准备"></a> 准备</h1><p>在《ThinkPHP开发环境搭建》中，我们已经准备好了thinkphp的开发环境。在此基础上，复制Application中的Home文件夹，重命名为Admin。<br><img src="http://cdn.voidking.com/img/thinkphp-in-action/copy.jpg"><br>然后，修改Admin/IndexController.class.php文件的namespace为：</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">namespace Admin\Controller<span class="comment">;</span></span><br></pre></td></tr></table></figure><p>好了，可以进入真正的开发了！</p><h1 id="路由控制"><span class="post-title-index">3.</span><a href="#路由控制" class="headerlink" title="路由控制"></a> 路由控制</h1><p>路由控制，在thinkphp开发手册中对应“架构&gt;URL模式”。thinkphp提供了多种URL模式，本次开发采用标准URL格式。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>serverName<span class="regexp">/index.php/</span>模块<span class="regexp">/控制器/</span>操作</span><br></pre></td></tr></table></figure><p>比如，我们在Admin/IndexController.class.php文件中添加函数：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">firstFunc</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;第一个函数&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>那么，这个函数的访问路径为<code>http://localhost/thinkphp/index.php/Admin/Index/firstFunc</code>。<br>访问该路径，我们可以在页面上看到返回值“第一个函数”。<br><img src="http://cdn.voidking.com/img/thinkphp-in-action/firstfunc.jpg"></p><h1 id="模板渲染"><span class="post-title-index">4.</span><a href="#模板渲染" class="headerlink" title="模板渲染"></a> 模板渲染</h1><p>模板渲染，在thinkphp开发手册中对应“视图&gt;模板赋值和模板渲染”以及“模板”。<br>在Admin/View/Index文件夹下，新建文件template.html。在Admin/IndexController.class.php文件中添加函数：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">template</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$data</span> = <span class="string">&#x27;测试数据&#x27;</span>;</span><br><span class="line">    <span class="variable">$dataArr</span> = <span class="keyword">array</span>(</span><br><span class="line">        <span class="keyword">array</span>(<span class="string">&#x27;name&#x27;</span>=&gt;<span class="string">&#x27;郝锦&#x27;</span>,<span class="string">&#x27;age&#x27;</span>=&gt;<span class="string">&#x27;24&#x27;</span>),</span><br><span class="line">        <span class="keyword">array</span>(<span class="string">&#x27;name&#x27;</span>=&gt;<span class="string">&#x27;小帅&#x27;</span>,<span class="string">&#x27;age&#x27;</span>=&gt;<span class="string">&#x27;22&#x27;</span>),</span><br><span class="line">        <span class="keyword">array</span>(<span class="string">&#x27;name&#x27;</span>=&gt;<span class="string">&#x27;小飞&#x27;</span>,<span class="string">&#x27;age&#x27;</span>=&gt;<span class="string">&#x27;22&#x27;</span>)</span><br><span class="line">    );</span><br><span class="line">    <span class="variable">$dataObj</span> = <span class="keyword">new</span> <span class="title function_ invoke__">userInfo</span>();</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">assign</span>(<span class="string">&#x27;data2&#x27;</span>,<span class="variable">$data</span>);</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">assign</span>(<span class="string">&#x27;dataArr&#x27;</span>,<span class="variable">$dataArr</span>);</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">assign</span>(<span class="string">&#x27;dataObj&#x27;</span>,<span class="variable">$dataObj</span>);</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">display</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>同时，在文件最后添加一个userInfo类：</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">userInfo</span></span>&#123;</span><br><span class="line">    public <span class="variable">$name</span> = <span class="string">&#x27;郝锦&#x27;</span>;</span><br><span class="line">    public <span class="variable">$age</span> = <span class="string">&#x27;24&#x27;</span>;</span><br><span class="line">    function show()&#123;</span><br><span class="line">        echo <span class="string">&#x27;一个函数&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>那么，$data、$dataArr和$dataObj都会通过assign函数传送到template.html页面。template.html页面代码如下：</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>模板<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>模板<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><span class="template-variable">&#123;$data2&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><span class="template-variable">&#123;$dataObj:name&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><span class="template-variable">&#123;$dataObj:age&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">volist</span> <span class="attr">name</span>=<span class="string">&#x27;dataArr&#x27;</span> <span class="attr">id</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        </span><span class="template-variable">&#123;$item.name&#125;</span><span class="language-xml"><span class="symbol">&amp;nbsp;</span></span><span class="template-variable">&#123;$item.age&#125;</span><span class="language-xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">volist</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>最终效果如下：<br><img src="http://cdn.voidking.com/img/thinkphp-in-action/template.jpg"></p><p>注意，函数名和页面名字是相同的，一一对应的。</p><h1 id="增删查改"><span class="post-title-index">5.</span><a href="#增删查改" class="headerlink" title="增删查改"></a> 增删查改</h1><p>增删查改，在thinkphp开发手册中对应“模型&gt;GURD操作”和“专题&gt;数据分页”。</p><h2 id="数据库配置"><span class="post-title-index">5.1.</span><a href="#数据库配置" class="headerlink" title="数据库配置"></a> 数据库配置</h2><p>利用navicat等工具连接到本地mysql数据库，创建数据库volunteer，在数据库中创建表volun_admin(int id, varchar name, vachar password)和volun_project(int id, varchar title, varchar content)。注意，编码格式选择utf8。</p><h2 id="php配置"><span class="post-title-index">5.2.</span><a href="#php配置" class="headerlink" title="php配置"></a> php配置</h2><p>在进行数据库增删查改之前，我们需要先连接到数据库。<br>打开Application/Common/Conf/config.php文件，修改内容如下：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">array</span>(</span><br><span class="line">    <span class="comment">//&#x27;配置项&#x27;=&gt;&#x27;配置值&#x27;</span></span><br><span class="line">    <span class="string">&#x27;DB_TYPE&#x27;</span>=&gt;<span class="string">&#x27;mysql&#x27;</span>, <span class="comment">//数据库类型</span></span><br><span class="line">    <span class="string">&#x27;DB_HOST&#x27;</span>=&gt;<span class="string">&#x27;localhost&#x27;</span>, <span class="comment">//服务器地址</span></span><br><span class="line">    <span class="string">&#x27;DB_NAME&#x27;</span>=&gt;<span class="string">&#x27;volunteer&#x27;</span>, <span class="comment">//数据库名</span></span><br><span class="line">    <span class="string">&#x27;DB_USER&#x27;</span>=&gt;<span class="string">&#x27;root&#x27;</span>, <span class="comment">//用户名</span></span><br><span class="line">    <span class="string">&#x27;DB_PWD&#x27;</span>=&gt;<span class="string">&#x27;&#x27;</span>, <span class="comment">//密码</span></span><br><span class="line">    <span class="string">&#x27;DB_PORT&#x27;</span>=&gt;<span class="number">3306</span>, <span class="comment">//端口</span></span><br><span class="line">    <span class="string">&#x27;DB_PREFIX&#x27;</span>=&gt;<span class="string">&#x27;volun_&#x27;</span>, <span class="comment">//数据库表前缀</span></span><br><span class="line">    <span class="string">&#x27;SHOW_PAGE_TRACE&#x27;</span> =&gt;<span class="literal">true</span>,</span><br><span class="line">);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h2 id="project表的增删查改"><span class="post-title-index">5.3.</span><a href="#project表的增删查改" class="headerlink" title="project表的增删查改"></a> project表的增删查改</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 志愿项目增删查改</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">projectAdd</span>(<span class="params"><span class="variable">$title</span>, <span class="variable">$content</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$project</span> = <span class="title function_ invoke__">D</span>(<span class="string">&#x27;project&#x27;</span>);</span><br><span class="line">    <span class="variable">$data</span>[<span class="string">&#x27;title&#x27;</span>] = <span class="variable">$title</span>;</span><br><span class="line">    <span class="variable">$data</span>[<span class="string">&#x27;content&#x27;</span>] = <span class="variable">$content</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$project</span>-&gt;<span class="title function_ invoke__">create</span>(<span class="variable">$data</span>))&#123;</span><br><span class="line">        <span class="variable">$id</span> = <span class="variable">$project</span>-&gt;<span class="title function_ invoke__">add</span>();</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$id</span>)&#123;</span><br><span class="line">            <span class="variable">$result</span> = <span class="keyword">array</span>(</span><br><span class="line">                <span class="string">&#x27;code&#x27;</span>=&gt; <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;ext&#x27;</span>=&gt; <span class="string">&#x27;success&#x27;</span></span><br><span class="line">            );</span><br><span class="line">            <span class="keyword">echo</span> <span class="title function_ invoke__">json_encode</span>(<span class="variable">$result</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">projectEdit</span>(<span class="params"><span class="variable">$id</span>, <span class="variable">$title</span>, <span class="variable">$content</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$project</span> = <span class="title function_ invoke__">D</span>(<span class="string">&#x27;project&#x27;</span>);</span><br><span class="line">    <span class="variable">$data</span>[<span class="string">&#x27;title&#x27;</span>] = <span class="variable">$title</span>;</span><br><span class="line">    <span class="variable">$data</span>[<span class="string">&#x27;content&#x27;</span>] = <span class="variable">$content</span>;</span><br><span class="line">    <span class="variable">$success</span> = <span class="variable">$project</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&quot;id=&#x27;<span class="subst">$id</span>&#x27;&quot;</span>)-&gt;<span class="title function_ invoke__">save</span>(<span class="variable">$data</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$success</span>)&#123;</span><br><span class="line">        <span class="variable">$result</span> = <span class="keyword">array</span>(</span><br><span class="line">            <span class="string">&#x27;code&#x27;</span>=&gt; <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;ext&#x27;</span>=&gt; <span class="string">&#x27;success&#x27;</span></span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">echo</span> <span class="title function_ invoke__">json_encode</span>(<span class="variable">$result</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$result</span> = <span class="keyword">array</span>(</span><br><span class="line">            <span class="string">&#x27;code&#x27;</span>=&gt; <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;ext&#x27;</span>=&gt; <span class="string">&#x27;fail&#x27;</span></span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">echo</span> <span class="title function_ invoke__">json_encode</span>(<span class="variable">$result</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">projectDelete</span>(<span class="params"><span class="variable">$id</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$project</span> = <span class="title function_ invoke__">D</span>(<span class="string">&#x27;project&#x27;</span>);</span><br><span class="line">    <span class="variable">$success</span> = <span class="variable">$project</span>-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&quot;id=&#x27;<span class="subst">$id</span>&#x27;&quot;</span>)-&gt;<span class="title function_ invoke__">delete</span>();</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$success</span>)&#123;</span><br><span class="line">        <span class="variable">$result</span> = <span class="keyword">array</span>(</span><br><span class="line">            <span class="string">&#x27;code&#x27;</span>=&gt; <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;ext&#x27;</span>=&gt; <span class="string">&#x27;success&#x27;</span></span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">echo</span> <span class="title function_ invoke__">json_encode</span>(<span class="variable">$result</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$result</span> = <span class="keyword">array</span>(</span><br><span class="line">            <span class="string">&#x27;code&#x27;</span>=&gt; <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;ext&#x27;</span>=&gt; <span class="string">&#x27;fail&#x27;</span></span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">echo</span> <span class="title function_ invoke__">json_encode</span>(<span class="variable">$result</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">projectList</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$project</span> = <span class="title function_ invoke__">D</span>(<span class="string">&#x27;project&#x27;</span>);</span><br><span class="line">    <span class="variable">$resultArr</span> = <span class="variable">$project</span>-&gt;<span class="title function_ invoke__">select</span>();</span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">json_encode</span>(<span class="variable">$resultArr</span>,JSON_UNESCAPED_UNICODE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">projectPage</span>(<span class="params"><span class="variable">$pageSize</span>,<span class="variable">$pageNum</span></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$project</span> = <span class="title function_ invoke__">D</span>(<span class="string">&#x27;project&#x27;</span>);</span><br><span class="line">    <span class="variable">$total</span> = <span class="variable">$project</span>-&gt;<span class="title function_ invoke__">count</span>();</span><br><span class="line">    <span class="variable">$totalPage</span> = <span class="variable">$total</span>%<span class="variable">$pageSize</span> ? (<span class="keyword">int</span>)(<span class="variable">$total</span>/<span class="variable">$pageSize</span>)+<span class="number">1</span> : (<span class="keyword">int</span>)(<span class="variable">$total</span>/<span class="variable">$pageSize</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="variable">$list</span> = <span class="variable">$project</span>-&gt;<span class="title function_ invoke__">page</span>(<span class="variable">$pageNum</span>.<span class="string">&#x27;,&#x27;</span>.<span class="variable">$pageSize</span>)-&gt;<span class="title function_ invoke__">select</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$list</span>)&#123;</span><br><span class="line">        <span class="variable">$resultArr</span> = <span class="keyword">array</span>(</span><br><span class="line">            <span class="string">&#x27;totalPage&#x27;</span>=&gt; <span class="variable">$totalPage</span>,</span><br><span class="line">            <span class="string">&#x27;pageNum&#x27;</span>=&gt; <span class="variable">$pageNum</span>,</span><br><span class="line">            <span class="string">&#x27;projectList&#x27;</span>=&gt; <span class="variable">$list</span></span><br><span class="line"></span><br><span class="line">        );</span><br><span class="line">        <span class="variable">$result</span> = <span class="keyword">array</span>(</span><br><span class="line">            <span class="string">&#x27;code&#x27;</span>=&gt; <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;ext&#x27;</span>=&gt; <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;obj&#x27;</span>=&gt; <span class="variable">$resultArr</span></span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">echo</span> <span class="title function_ invoke__">json_encode</span>(<span class="variable">$result</span>,JSON_UNESCAPED_UNICODE);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上方法，在js中，可以使用GET方式请求，也可以使用POST方式请求。</p><p>路由控制、模板渲染、增删改查，至此全部跑通，可以进行简单的开发了。至于thinkphp提供的其他更加强大的功能，在需要时查查文档就好。</p><h1 id="接口测试"><span class="post-title-index">6.</span><a href="#接口测试" class="headerlink" title="接口测试"></a> 接口测试</h1><p>上次在给大家演示HttpRequester的时候，验证登录接口，一直出现错误。猜测有四种可能：<br>1、HttpRequester的问题<br>2、thinkphp的问题<br>3、php的问题<br>4、apache的问题</p><h2 id="HttpRequester的问题"><span class="post-title-index">6.1.</span><a href="#HttpRequester的问题" class="headerlink" title="HttpRequester的问题"></a> HttpRequester的问题</h2><p>以projectAdd方法为例，在js中使用ajax请求该方法，无论type是GET还是POST，都能成功拿到返回值<code>&#123;&quot;code&quot;:&quot;0&quot;,&quot;ext&quot;:&quot;success&quot;&#125;</code>。</p><p>在HttpRequester中，使用GET方式请求该方法，可以拿到返回值；但是，使用POST方式请求，拿不到返回值，提示“参数错误或者未定义:title”，因为projectAdd方法没有拿到我们传过去的参数。</p><p>修改projectAdd方法为：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">projectAdd</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="variable">$title</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;title&#x27;</span>];</span><br><span class="line">    <span class="variable">$content</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;content&#x27;</span>];</span><br><span class="line">    <span class="variable">$project</span> = <span class="title function_ invoke__">D</span>(<span class="string">&#x27;project&#x27;</span>);</span><br><span class="line">    <span class="variable">$data</span>[<span class="string">&#x27;title&#x27;</span>] = <span class="variable">$title</span>;</span><br><span class="line">    <span class="variable">$data</span>[<span class="string">&#x27;content&#x27;</span>] = <span class="variable">$content</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$project</span>-&gt;<span class="title function_ invoke__">create</span>(<span class="variable">$data</span>))&#123;</span><br><span class="line">        <span class="variable">$id</span> = <span class="variable">$project</span>-&gt;<span class="title function_ invoke__">add</span>();</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$id</span>)&#123;</span><br><span class="line">            <span class="variable">$result</span> = <span class="keyword">array</span>(</span><br><span class="line">                <span class="string">&#x27;code&#x27;</span>=&gt; <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;ext&#x27;</span>=&gt; <span class="string">&#x27;success&#x27;</span></span><br><span class="line">            );</span><br><span class="line">            <span class="keyword">echo</span> <span class="title function_ invoke__">json_encode</span>(<span class="variable">$result</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>再次使用HttpRequester请求projectAdd方法，这次换了个错误：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Column</span> <span class="string">&#x27;content&#x27;</span> cannot be <span class="keyword">null</span> [ <span class="keyword">SQL</span>语句 ] : <span class="keyword">INSERT</span> <span class="keyword">INTO</span> `volun_project` (`title`,`content`) <span class="keyword">VALUES</span> (<span class="keyword">NULL</span>,<span class="keyword">NULL</span>)</span><br></pre></td></tr></table></figure><p>显然，错误的原因依然是projectAdd方法没有拿到我们传过去的参数，导致title和content为空。</p><p>使用ajax的POST方式请求该方法，成功拿到返回值。可见，这是HttpRequester的问题，它无法模拟ajax的POST请求。</p><p>那么问题来了，ajax的POST和HttpRequester的POST到底有什么区别？很遗憾，暂时没有找到答案。</p><h2 id="thinkphp的问题"><span class="post-title-index">6.2.</span><a href="#thinkphp的问题" class="headerlink" title="thinkphp的问题"></a> thinkphp的问题</h2><p>在公司开发时，一直使用HttpRequester来验证接口，能用ajax请求的接口，都可以使用HttpRequester来模拟请求。这样看来，就是接口的问题，也就是thinkphp框架的问题！或者，就是php的问题！</p><h2 id="php的问题"><span class="post-title-index">6.3.</span><a href="#php的问题" class="headerlink" title="php的问题"></a> php的问题</h2><p>在thinkphp文件下，新建了一个test.php文件：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="variable">$title</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;title&#x27;</span>];</span><br><span class="line">    <span class="variable">$array</span> = <span class="keyword">array</span>(</span><br><span class="line">        <span class="string">&#x27;title&#x27;</span>=&gt;<span class="variable">$title</span></span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">json_encode</span>(<span class="variable">$array</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>在ajax中，带入参数<code>&#123;title:&#39;测试标题&#39;&#125;</code>，POST请求<code>http://localhost/thinkphp/test.php</code>，成功拿到返回值。</p><p>在HttpRequester中，带入参数<code>&#123;title:&#39;测试标题&#39;&#125;</code>，POST请求<code>http://localhost/thinkphp/test.php</code>，提示错误“Notice: Undefined index: title in D:\Server\wamp64\www\thinkphp\test.php on line 2”。</p><p>修改test.php文件为：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="variable">$title</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;title&#x27;</span>];</span><br><span class="line">    <span class="variable">$array</span> = <span class="keyword">array</span>(</span><br><span class="line">        <span class="string">&#x27;title&#x27;</span>=&gt;<span class="variable">$title</span></span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">json_encode</span>(<span class="variable">$array</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>在ajax中，带入参数<code>&#123;title:&#39;测试标题&#39;&#125;</code>，GET请求<code>http://localhost/thinkphp/test.php</code>，成功拿到返回值。</p><p>在HttpRequester中，带入参数<code>&#123;title:&#39;测试标题&#39;&#125;</code>，GET请求<code>http://localhost/thinkphp/test.php</code>，成功拿到返回值。</p><p>由此排除thinkphp的问题。</p><h2 id="apache的问题"><span class="post-title-index">6.4.</span><a href="#apache的问题" class="headerlink" title="apache的问题"></a> apache的问题</h2><p>还有一种可能，apache的问题，于是把test.php文件放到nginx下，经测试，接口同样拿不到参数。<br>由此排除apache的问题。</p><h2 id="小结"><span class="post-title-index">6.5.</span><a href="#小结" class="headerlink" title="小结"></a> 小结</h2><p>综上，HttpRequester无法测试thinkphp的POST接口问题，有两个可能，一个是HttpRequester存在缺陷，另一个是php存在缺陷。</p><h1 id="后记"><span class="post-title-index">7.</span><a href="#后记" class="headerlink" title="后记"></a> 后记</h1><p>无论哪种原因，总之，无法使用HttpRequester的POST请求来验证我们的thinkphp接口了。需要验证接口时，暂时使用GET请求，因为我们的接口两种请求方式都可以拿到返回值。</p><p>注意，本应该是POST请求的接口，接口文档中的请求类型依然写POST，ajax的type也使用POST，保证规范性。</p><h1 id="2016-09-14更新"><span class="post-title-index">8.</span><a href="#2016-09-14更新" class="headerlink" title="2016.09.14更新"></a> 2016.09.14更新</h1><p>Thinkphp3.2.3 接收不到json数据<br><a target="_blank" rel="noopener" href="https://segmentfault.com/q/1010000004980405">https://segmentfault.com/q/1010000004980405</a></p><p>原来，造成HttpRequester无法测试接口的原因，是Content-Type没有选对。</p><p>由于PHP默认只识别<code>Content-Type: application/x-www.form-urlencoded</code>标准的数据类型，因此，对型如<code>application/json</code>的内容无法解析为<code>$_POST</code>数组，故保留原型，交给<code>$GLOBALS[&#39;HTTP_RAW_POST_DATA&#39;]</code>来接收。</p><p><code>file_get_contents(&#39;php://input&#39;)</code>允许读取 POST 的原始数据，和<code>$GLOBALS[&#39;HTTP_RAW_POST_DATA&#39;]</code>比起来，它给内存带来的压力较小，并且不需要任何特殊的php.ini设置。<code>file_get_contents(&#39;php://input&#39;)</code>不能用于<code>enctype=&quot;multipart/form-data&quot;</code>。</p><h1 id="书签"><span class="post-title-index">9.</span><a href="#书签" class="headerlink" title="书签"></a> 书签</h1><p>序言 - ThinkPHP3.2完全开发手册<br><a target="_blank" rel="noopener" href="http://document.thinkphp.cn/manual_3_2.html">http://document.thinkphp.cn/manual_3_2.html</a></p><p>ThinkPHP框架教程 - 猿团<br><a target="_blank" rel="noopener" href="http://edu.yuantuan.com/course/explore/thinkphp">http://edu.yuantuan.com/course/explore/thinkphp</a></p><p>PHP: 语言参考 - Manual<br><a target="_blank" rel="noopener" href="http://php.net/manual/zh/langref.php">http://php.net/manual/zh/langref.php</a></p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>原文链接：</strong> <a href="https://www.voidking.com/dev-thinkphp-in-action/" title="好好学PHP：ThinkPHP实战">https://www.voidking.com/dev-thinkphp-in-action/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本文采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议，转载请注明出处！源站会即时更新知识点并修正错误，欢迎访问~</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/php/" rel="tag"># php</a> <a href="/tags/%E5%A5%BD%E5%A5%BD%E5%AD%A6PHP/" rel="tag"># 好好学PHP</a> <a href="/tags/thinkphp/" rel="tag"># thinkphp</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-oschina-teamwork/" rel="prev" title="开源中国团队协作开发平台"><i class="fa fa-chevron-left"></i> 开源中国团队协作开发平台</a></div><div class="post-nav-item"> <a href="/dev-thinkphp-login-state/" rel="next" title="好好学PHP：ThinkPHP登录状态记录">好好学PHP：ThinkPHP登录状态记录<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">1. 前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%87%86%E5%A4%87"><span class="nav-text">2. 准备</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E6%8E%A7%E5%88%B6"><span class="nav-text">3. 路由控制</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A8%A1%E6%9D%BF%E6%B8%B2%E6%9F%93"><span class="nav-text">4. 模板渲染</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A2%9E%E5%88%A0%E6%9F%A5%E6%94%B9"><span class="nav-text">5. 增删查改</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE"><span class="nav-text">5.1. 数据库配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#php%E9%85%8D%E7%BD%AE"><span class="nav-text">5.2. php配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#project%E8%A1%A8%E7%9A%84%E5%A2%9E%E5%88%A0%E6%9F%A5%E6%94%B9"><span class="nav-text">5.3. project表的增删查改</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95"><span class="nav-text">6. 接口测试</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#HttpRequester%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-text">6.1. HttpRequester的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#thinkphp%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-text">6.2. thinkphp的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#php%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-text">6.3. php的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#apache%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-text">6.4. apache的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%8F%E7%BB%93"><span class="nav-text">6.5. 小结</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%8E%E8%AE%B0"><span class="nav-text">7. 后记</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2016-09-14%E6%9B%B4%E6%96%B0"><span class="nav-text">8. 2016.09.14更新</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B9%A6%E7%AD%BE"><span class="nav-text">9. 书签</span></a></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">一个计算机技术爱好者与学习者</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">779</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">34</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">271</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2026</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="https://cdn.staticfile.net/gitalk/1.7.2/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://cdn.staticfile.net/gitalk/1.7.2/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '5a238b8c32b1e4dd2156',
      clientSecret: 'bfb5d518626f6fdc7da0351d1e0cd37ab75c6361',
      repo: 'gitalk-comments',
      owner: 'voidking',
      admin: ['voidking'],
      id: 'e29fdd33c45c019c5891f4bd2417aee8',
      title: '好好学PHP：ThinkPHP实战',
      body: '欢迎留言，互相交流学习~',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></body></html>