<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//qiniu-cdn.voidking.com/doc/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="K8S管理方式的进阶传统的K8S管理使用kubectl命令，门槛降低一点使用k9e等工具，门槛再降低一点使用k8slens、kubesphere等GUI工具。 如今AI智能体兴起，出现了一种管理K8S集群的新方式：K8S智能体。 本文中，我们会基于一些开源项目实现一个K8S智能体（Agent），最终效果是通过对话的方式就能管理K8S集群。"><meta property="og:type" content="article"><meta property="og:title" content="从0到1开发K8S智能体"><meta property="og:url" content="https://www.voidking.com/dev-k8s-agent/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="K8S管理方式的进阶传统的K8S管理使用kubectl命令，门槛降低一点使用k9e等工具，门槛再降低一点使用k8slens、kubesphere等GUI工具。 如今AI智能体兴起，出现了一种管理K8S集群的新方式：K8S智能体。 本文中，我们会基于一些开源项目实现一个K8S智能体（Agent），最终效果是通过对话的方式就能管理K8S集群。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.voidking.com/img/k8s-agent/kubernetes-mcp-server.png?imageView2/0/w/800"><meta property="og:image" content="https://cdn.voidking.com/img/k8s-agent/namespace.png?imageView2/0/w/800"><meta property="og:image" content="https://cdn.voidking.com/img/k8s-agent/k8s-agent.png?imageView2/0/w/800"><meta property="og:image" content="https://cdn.voidking.com/img/k8s-agent/web1.png?imageView2/0/w/800"><meta property="og:image" content="https://cdn.voidking.com/img/k8s-agent/web2.png?imageView2/0/w/800"><meta property="article:published_time" content="2026-01-31T08:00:00.000Z"><meta property="article:modified_time" content="2026-02-01T08:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="docker"><meta property="article:tag" content="k8s"><meta property="article:tag" content="aigc"><meta property="article:tag" content="llm"><meta property="article:tag" content="agent"><meta property="article:tag" content="mcp"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.voidking.com/img/k8s-agent/kubernetes-mcp-server.png?imageView2/0/w/800"><link rel="canonical" href="https://www.voidking.com/dev-k8s-agent/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>从0到1开发K8S智能体 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">一个计算机技术爱好者与学习者</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-k8s-agent/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="一个计算机技术爱好者与学习者"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> 从0到1开发K8S智能体</h2><div class="post-meta"><i class="fa fa-thumb-tack"></i> <font color="RED">置顶</font> <span class="post-meta-divider">|</span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2026-01-31 08:00:00" itemprop="dateCreated datePublished" datetime="2026-01-31T08:00:00+00:00">2026-01-31</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2026-02-01 08:00:00" itemprop="dateModified" datetime="2026-02-01T08:00:00+00:00">2026-02-01</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/k8s/" itemprop="url" rel="index"><span itemprop="name">k8s</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/aigc/" itemprop="url" rel="index"><span itemprop="name">aigc</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/agent/" itemprop="url" rel="index"><span itemprop="name">agent</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="K8S管理方式的进阶"><span class="post-title-index">1.</span><a href="#K8S管理方式的进阶" class="headerlink" title="K8S管理方式的进阶"></a> K8S管理方式的进阶</h2><p>传统的K8S管理使用kubectl命令，门槛降低一点使用k9e等工具，门槛再降低一点使用k8slens、kubesphere等GUI工具。</p><p>如今AI智能体兴起，出现了一种管理K8S集群的新方式：K8S智能体。</p><p>本文中，我们会基于一些开源项目实现一个K8S智能体（Agent），最终效果是通过对话的方式就能管理K8S集群。</p><span id="more"></span><h2 id="对于智能体的理解"><span class="post-title-index">2.</span><a href="#对于智能体的理解" class="headerlink" title="对于智能体的理解"></a> 对于智能体的理解</h2><p>当前对智能体的定义是能够自主感知环境、作出决策、执行行动以实现特定目标的系统。<br>智能体就像是人，LLM是大脑，工具是手脚或者手脚的延伸，Runtime是让大脑和手脚协调运行起来的一套系统和机制。</p><p>智能体开发概述：</p><ul><li>LLM门槛较高，我们一般会使用成熟大模型，gpt、claude、gemini、deepseek等等，较少情况下会有公司微调或者蒸馏自己的大模型</li><li>工具门槛较低，在基本功能的基础上，封装成符合Function Calling工具或者MCP工具，就可以给大模型调用了，当前市场上已经有了大量的公共MCP服务和开源MCP工具</li><li>Runtime门槛中等，是智能体开发的核心，我们熟悉的各种Agent框架，比如langchain、autogen、dify、metagpt等，其实都可以算作是Runtime开发框架。考虑到智能体之间的交互，可能还要考虑兼容A2A协议。</li></ul><p>MCP 是一种让AI模型（如Claude）安全使用外部工具和数据的协议，包含：</p><ul><li>工具（Tools）：AI可调用的功能接口</li><li>资源（Resources）：结构化数据源</li><li>提示词（Prompts）：可复用的对话模板</li></ul><h2 id="K8S智能体架构设计"><span class="post-title-index">3.</span><a href="#K8S智能体架构设计" class="headerlink" title="K8S智能体架构设计"></a> K8S智能体架构设计</h2><p>核心组件：</p><ul><li>web server：智能体的web服务（前端+后端），用于便捷调用agent runtime</li><li>agent runtime：智能体的核心控制逻辑实现</li><li>k8s mcp server：负责与k8s交互，被agent runtime调用</li><li>llm api：智能体的大脑，被agent runtime调用</li></ul><p>交互逻辑：</p><ul><li>web server启动，agent runtime启动，agent runtime启动时从k8s mcp server获取工具列表，放入大模型上下文</li><li>用户通过web页面提交需求，比如“当前k8s集群中有哪些namespace？”</li><li>用户的输入转交给agent runtime，agent runtime调用大模型</li><li>大模型思考、决策，需要调用mcp工具时则告知runtime，runtime发送标准化调用（JSON-RPC）给mcp server</li><li>mcp server执行mcp工具，执行对k8s集群的操作（增删查改）</li><li>执行结果返回给runtime，runtime传递结构化结果给大模型</li><li>大模型整合信息后决定是继续工作还是生成回复，生成回复时则将回复给到用户</li></ul><p>参考文档：<a target="_blank" rel="noopener" href="https://chat.deepseek.com/share/aqjf01kvh5wahmr12w">人类与大模型及MCP工具交互流程</a></p><h2 id="安装K8S-MCP-Server"><span class="post-title-index">4.</span><a href="#安装K8S-MCP-Server" class="headerlink" title="安装K8S MCP Server"></a> 安装K8S MCP Server</h2><h3 id="安装kubernetes-mcp-server"><span class="post-title-index">4.1.</span><a href="#安装kubernetes-mcp-server" class="headerlink" title="安装kubernetes-mcp-server"></a> 安装kubernetes-mcp-server</h3><p>参考文档：<a target="_blank" rel="noopener" href="https://github.com/containers/kubernetes-mcp-server">github - containers/kubernetes-mcp-server</a></p><p>kubernetes-mcp-server 是由 containers 组织维护的开源项目，实现了 Model Context Protocol (MCP) 标准在 Kubernetes（及 OpenShift）环境中的服务器端功能。它充当了 AI 助手（如 Claude、Cursor、GitHub Copilot）与 Kubernetes 集群之间的桥梁，允许 AI 通过自然语言查询和管理集群资源。<br>核心功能包括资源增删查改、获取日志和监控、进入容器执行命令等。</p><p>kubernetes-mcp-server提供了多种安装方式，这里选择Docker安装方式。</p><ol><li><p>调试配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker run quay.io/containers/kubernetes_mcp_server</span><br><span class="line"></span><br><span class="line">docker run -d --name temp \</span><br><span class="line">  -p 8000:8000 \</span><br><span class="line">  -v ~/.kube/config:/home/mcp/.kube/config \</span><br><span class="line">  --entrypoint <span class="built_in">tail</span> \</span><br><span class="line">  quay.io/containers/kubernetes_mcp_server \</span><br><span class="line">  -f /dev/null</span><br><span class="line"></span><br><span class="line">docker <span class="built_in">exec</span> -it temp /bin/bash</span><br></pre></td></tr></table></figure></li><li><p>启动mcp server</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name kubernetes-mcp-server \</span><br><span class="line">  -p 8000:8000 \</span><br><span class="line">  -v ~/.kube/config:/home/mcp/.kube/config  \</span><br><span class="line">  quay.io/containers/kubernetes_mcp_server \</span><br><span class="line">  --port 8000 \</span><br><span class="line">  --cluster-provider kubeconfig --kubeconfig /home/mcp/.kube/config </span><br></pre></td></tr></table></figure></li><li><p>访问测试</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://localhost:8000/healthz -v</span><br></pre></td></tr></table></figure></li></ol><h3 id="安装k8sgpt"><span class="post-title-index">4.2.</span><a href="#安装k8sgpt" class="headerlink" title="安装k8sgpt"></a> 安装k8sgpt</h3><p>参考文档：<a target="_blank" rel="noopener" href="https://github.com/k8sgpt-ai/k8sgpt">github - k8sgpt-ai/k8sgpt</a></p><p>k8sgpt 是一个开源的 AI 驱动的 Kubernetes 故障诊断工具（Kubernetes Troubleshooting AI Assistant）。它利用大语言模型（LLM）自动分析 Kubernetes 集群中的日志、错误信息和资源状态，并解释问题原因和建议解决方案。<br>同时，这个工具支持启动MCP Server作为MCP工具。</p><ol><li>调试配置<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/k8sgpt-ai/k8sgpt/releases/download/v0.4.27/k8sgpt_amd64.rpm</span><br><span class="line">rpm -i k8sgpt_amd64.rpm</span><br><span class="line">k8sgpt</span><br></pre></td></tr></table></figure></li></ol><p>调试出 <code>~/.config/k8sgpt/k8sgpt.yaml</code> 配置如下：</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">ai:</span></span><br><span class="line">    <span class="params">providers:</span></span><br><span class="line">        <span class="operator">-</span> <span class="params">name:</span> openai</span><br><span class="line">          <span class="params">model:</span> gpt-<span class="number">4</span>o</span><br><span class="line">          <span class="params">password:</span> sk-xxx</span><br><span class="line">          <span class="params">baseurl:</span> https:<span class="symbol">//newapi.voidking.com/v1</span></span><br><span class="line">          <span class="params">temperature:</span> <span class="number">0.7</span></span><br><span class="line">          <span class="params">topp:</span> <span class="number">0.5</span></span><br><span class="line">          <span class="params">topk:</span> <span class="number">50</span></span><br><span class="line">          <span class="params">maxtokens:</span> <span class="number">2048</span></span><br><span class="line">          <span class="params">customheaders:</span> []</span><br><span class="line">    <span class="params">defaultprovider:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="params">commit:</span> e7b7a5d</span><br><span class="line"><span class="params">date:</span> unknown</span><br><span class="line"><span class="params">kubeconfig:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="params">kubecontext:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="params">verbose:</span> <span class="literal">false</span></span><br><span class="line"><span class="params">version:</span> <span class="number">0.4</span>.<span class="number">27</span></span><br></pre></td></tr></table></figure><ol start="2"><li><p>启动mcp server</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name k8sgpt \</span><br><span class="line">  -p 8080:8080 \</span><br><span class="line">  -p 8081:8081 \</span><br><span class="line">  -p 8089:8089 \</span><br><span class="line">  -v ~/.config/k8sgpt/k8sgpt.yaml:/home/nonroot/.config/k8sgpt/k8sgpt.yaml \</span><br><span class="line">  -v ~/.kube/config:/home/nonroot/.kube/config \</span><br><span class="line">  ghcr.io/k8sgpt-ai/k8sgpt \</span><br><span class="line">  serve --mcp --mcp-http --mcp-port 8089 \</span><br><span class="line">  --kubeconfig /home/nonroot/.kube/config</span><br></pre></td></tr></table></figure></li><li><p>访问测试<br>未成功。</p></li></ol><p>留个坑，暂时不使用这个mcp server。</p><h2 id="测试调用MCP-Server"><span class="post-title-index">5.</span><a href="#测试调用MCP-Server" class="headerlink" title="测试调用MCP Server"></a> 测试调用MCP Server</h2><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="https://github.com/OpenAgentPlatform/Dive">github - OpenAgentPlatform/Dive</a></li><li><a target="_blank" rel="noopener" href="https://oaphub.ai/">Open Agent Platform</a></li></ul><ol><li><p>安装Dive<br>访问<a target="_blank" rel="noopener" href="https://github.com/OpenAgentPlatform/Dive/releases">Dive Release</a>页面，下载Dive客户端并安装。</p></li><li><p>配置mcp server</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mcpServers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;kubernetes-mcp-server&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;transport&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sse&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;enabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://192.168.56.101:8000/sse&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;initialTimeout&quot;</span><span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;toolCallTimeout&quot;</span><span class="punctuation">:</span> <span class="number">600</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>启用mcp server<br>启用后，可以看到mcp server的工具列表<br><img src="https://cdn.voidking.com/img/k8s-agent/kubernetes-mcp-server.png?imageView2/0/w/800"></p></li><li><p>调用mcp工具<br>Dive对话，输入<code>当前k8s集群中有哪些namespace？</code><br>如果配置正常，就可以触发mcp工具调用，获取到k8s集群中的信息<br><img src="https://cdn.voidking.com/img/k8s-agent/namespace.png?imageView2/0/w/800"></p></li></ol><p>至此，如果是本地使用，那么整个智能体已经完成了，Dive充当了Agent Runtime。</p><h2 id="开发Agent-Runtime"><span class="post-title-index">6.</span><a href="#开发Agent-Runtime" class="headerlink" title="开发Agent Runtime"></a> 开发Agent Runtime</h2><p>建议借助AI编程（Vibe Coding）工具来辅助开发，用AI来开发AI才是未来！</p><p>初始版本的Agent Runtime代码：<a target="_blank" rel="noopener" href="https://github.com/voidking/k8s-agent/tree/0a49e0162eaddb2222d0dc9de05943bcc6914f05">github - voidking/k8s-agent</a></p><p>交互效果：<br><img src="https://cdn.voidking.com/img/k8s-agent/k8s-agent.png?imageView2/0/w/800"></p><h2 id="开发Web-Server"><span class="post-title-index">7.</span><a href="#开发Web-Server" class="headerlink" title="开发Web Server"></a> 开发Web Server</h2><p>初始版本的Web Server代码：<a target="_blank" rel="noopener" href="https://github.com/voidking/k8s-agent/tree/f2304df0b0407e3c11ab1f3d4232b2ecabfdc116">github - voidking/k8s-agent</a></p><p>交互效果：<br><img src="https://cdn.voidking.com/img/k8s-agent/web1.png?imageView2/0/w/800"><br><img src="https://cdn.voidking.com/img/k8s-agent/web2.png?imageView2/0/w/800"></p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>原文链接：</strong> <a href="https://www.voidking.com/dev-k8s-agent/" title="从0到1开发K8S智能体">https://www.voidking.com/dev-k8s-agent/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本文采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议，转载请注明出处！源站会即时更新知识点并修正错误，欢迎访问~</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/docker/" rel="tag"># docker</a> <a href="/tags/k8s/" rel="tag"># k8s</a> <a href="/tags/aigc/" rel="tag"># aigc</a> <a href="/tags/llm/" rel="tag"># llm</a> <a href="/tags/agent/" rel="tag"># agent</a> <a href="/tags/mcp/" rel="tag"># mcp</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-codex-start/" rel="prev" title="编程辅助工具 Codex 入门篇"><i class="fa fa-chevron-left"></i> 编程辅助工具 Codex 入门篇</a></div><div class="post-nav-item"> <a href="/dev-clawdbot-start/" rel="next" title="ClawdBot试用记录">ClawdBot试用记录<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#K8S%E7%AE%A1%E7%90%86%E6%96%B9%E5%BC%8F%E7%9A%84%E8%BF%9B%E9%98%B6"><span class="nav-text">1. K8S管理方式的进阶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%B9%E4%BA%8E%E6%99%BA%E8%83%BD%E4%BD%93%E7%9A%84%E7%90%86%E8%A7%A3"><span class="nav-text">2. 对于智能体的理解</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#K8S%E6%99%BA%E8%83%BD%E4%BD%93%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1"><span class="nav-text">3. K8S智能体架构设计</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85K8S-MCP-Server"><span class="nav-text">4. 安装K8S MCP Server</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85kubernetes-mcp-server"><span class="nav-text">4.1. 安装kubernetes-mcp-server</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85k8sgpt"><span class="nav-text">4.2. 安装k8sgpt</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E8%B0%83%E7%94%A8MCP-Server"><span class="nav-text">5. 测试调用MCP Server</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E5%8F%91Agent-Runtime"><span class="nav-text">6. 开发Agent Runtime</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E5%8F%91Web-Server"><span class="nav-text">7. 开发Web Server</span></a></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">一个计算机技术爱好者与学习者</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">780</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">34</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">272</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2026</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="https://cdn.staticfile.net/gitalk/1.7.2/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://cdn.staticfile.net/gitalk/1.7.2/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '5a238b8c32b1e4dd2156',
      clientSecret: 'bfb5d518626f6fdc7da0351d1e0cd37ab75c6361',
      repo: 'gitalk-comments',
      owner: 'voidking',
      admin: ['voidking'],
      id: '8ead807057fa30755c01dc0978c5d382',
      title: '从0到1开发K8S智能体',
      body: '欢迎留言，互相交流学习~',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></body></html>