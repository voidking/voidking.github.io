<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//qiniu-cdn.voidking.com/doc/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="前言Hibernate关系映射的主要任务是实现数据库关系表与持久化类之间的映射。 一对一关联（共享主键方式）在注册某个论坛会员的时候，往往不但要填写登录账户和密码，还要填写其他的详细信息，这两部分信息通常会放在不同的表中。共享主键方式就是限制两个数据表的主键使用相同的值，通过主键形成一对一映射关系。 建立表命令建立login表和detail表： 123456789101112create tabl"><meta property="og:type" content="article"><meta property="og:title" content="Hibernate关系映射"><meta property="og:url" content="https://www.voidking.com/dev-hibernate-orm/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="前言Hibernate关系映射的主要任务是实现数据库关系表与持久化类之间的映射。 一对一关联（共享主键方式）在注册某个论坛会员的时候，往往不但要填写登录账户和密码，还要填写其他的详细信息，这两部分信息通常会放在不同的表中。共享主键方式就是限制两个数据表的主键使用相同的值，通过主键形成一对一映射关系。 建立表命令建立login表和detail表： 123456789101112create tabl"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2014-02-21T12:10:24.000Z"><meta property="article:modified_time" content="2014-02-21T12:10:24.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="java"><meta property="article:tag" content="eclipse"><meta property="article:tag" content="hibernate"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-hibernate-orm/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>Hibernate关系映射 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">一个计算机技术爱好者与学习者</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-hibernate-orm/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="一个计算机技术爱好者与学习者"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> Hibernate关系映射</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2014-02-21 12:10:24" itemprop="dateCreated datePublished" datetime="2014-02-21T12:10:24+00:00">2014-02-21</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="前言"><span class="post-title-index">1.</span><a href="#前言" class="headerlink" title="前言"></a> 前言</h3><p>Hibernate关系映射的主要任务是实现数据库关系表与持久化类之间的映射。</p><h3 id="一对一关联（共享主键方式）"><span class="post-title-index">2.</span><a href="#一对一关联（共享主键方式）" class="headerlink" title="一对一关联（共享主键方式）"></a> 一对一关联（共享主键方式）</h3><p>在注册某个论坛会员的时候，往往不但要填写登录账户和密码，还要填写其他的详细信息，这两部分信息通常会放在不同的表中。<br>共享主键方式就是限制两个数据表的主键使用相同的值，通过主键形成一对一映射关系。</p><h4 id="建立表命令"><span class="post-title-index">2.1.</span><a href="#建立表命令" class="headerlink" title="建立表命令"></a> 建立表命令</h4><p>建立login表和detail表：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">login</span>(</span><br><span class="line">id <span class="type">int4</span> <span class="keyword">primary key</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">username <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line"><span class="keyword">password</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> detail(</span><br><span class="line">id <span class="type">int4</span> <span class="keyword">primary key</span> auto_increment <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">truename <span class="type">varchar</span>(<span class="number">8</span>),</span><br><span class="line">email <span class="type">varchar</span>(<span class="number">50</span>)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>登陆表和详细信息表属于典型的一对一关联关系，可按共享主键方式进行。<br>在Hibernate概述中实例的基础上，接着开发。</p><span id="more"></span><h4 id="Login-java"><span class="post-title-index">2.2.</span><a href="#Login-java" class="headerlink" title="Login.java"></a> Login.java</h4><p>在包com.voidking.hibernate.model中，新建类Login，代码如下：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">voidking</span>.<span class="property">hibernate</span>.<span class="property">model</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Login</span> <span class="keyword">implements</span> java.<span class="property">io</span>.<span class="property">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Fields</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">Integer</span> id;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">String</span> username;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">String</span> password;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">Detail</span> detail;		</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Constructors</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/** default constructor */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Login</span>() &#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** full constructor */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Login</span>(<span class="title class_">String</span> username, <span class="title class_">String</span> password, <span class="title class_">Detail</span> detail) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">username</span> = username;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">password</span> = password;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">detail</span> = detail;	</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Property accessors</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Integer</span> <span class="title function_">getId</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">id</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setId</span>(<span class="params"><span class="title class_">Integer</span> id</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">id</span> = id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">getUsername</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">username</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setUsername</span>(<span class="params"><span class="title class_">String</span> username</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">username</span> = username;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">getPassword</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">password</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setPassword</span>(<span class="params"><span class="title class_">String</span> password</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">password</span> = password;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Detail</span> <span class="title function_">getDetail</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">detail</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setDetail</span>(<span class="params"><span class="title class_">Detail</span> detail</span>)&#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">detail</span> = detail;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Login-hbm-xml"><span class="post-title-index">2.3.</span><a href="#Login-hbm-xml" class="headerlink" title="Login.hbm.xml"></a> Login.hbm.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">hibernate-mapping</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">&quot;com.voidking.hibernate.model.Login&quot;</span> <span class="attr">table</span>=<span class="string">&quot;login&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;ID&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">&quot;foreign&quot;</span>&gt;</span></span><br><span class="line">            	<span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;property&quot;</span>&gt;</span>detail<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">generator</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;USERNAME&quot;</span> <span class="attr">length</span>=<span class="string">&quot;20&quot;</span> <span class="attr">not-null</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;PASSWORD&quot;</span> <span class="attr">length</span>=<span class="string">&quot;20&quot;</span> <span class="attr">not-null</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--constrained=&quot;true&quot;表明当前的主键上存在一个外键约束--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">one-to-one</span> <span class="attr">name</span>=<span class="string">&quot;detail&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.voidking.hibernate.model.Detail&quot;</span> <span class="attr">constrained</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">one-to-one</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="Detail-java"><span class="post-title-index">2.4.</span><a href="#Detail-java" class="headerlink" title="Detail.java"></a> Detail.java</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">voidking</span>.<span class="property">hibernate</span>.<span class="property">model</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Detail</span> <span class="keyword">implements</span> java.<span class="property">io</span>.<span class="property">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Fields</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">Integer</span> id;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">String</span> truename;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">String</span> email;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">Login</span> login;		</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Constructors</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/** default constructor */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Detail</span>() &#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** full constructor */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Detail</span>(<span class="title class_">String</span> truename, <span class="title class_">String</span> email, <span class="title class_">Login</span> login) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">truename</span> = truename;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">email</span> = email;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">login</span> = login;		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Property accessors</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Integer</span> <span class="title function_">getId</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">id</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setId</span>(<span class="params"><span class="title class_">Integer</span> id</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">id</span> = id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">getTruename</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">truename</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setTruename</span>(<span class="params"><span class="title class_">String</span> truename</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">truename</span> = truename;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">getEmail</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">email</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setEmail</span>(<span class="params"><span class="title class_">String</span> email</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">email</span> = email;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Login</span> <span class="title function_">getLogin</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">login</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setLogin</span>(<span class="params"><span class="title class_">Login</span> login</span>)&#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">login</span> = login;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Detail-hbm-xml"><span class="post-title-index">2.5.</span><a href="#Detail-hbm-xml" class="headerlink" title="Detail.hbm.xml"></a> Detail.hbm.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">hibernate-mapping</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">&quot;com.voidking.hibernate.model.Detail&quot;</span> <span class="attr">table</span>=<span class="string">&quot;detail&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;ID&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">&quot;identity&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;truename&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;TRUENAME&quot;</span> <span class="attr">length</span>=<span class="string">&quot;8&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;EMAIL&quot;</span> <span class="attr">length</span>=<span class="string">&quot;50&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--cascade=all，表示主控类的所有操作，对关联类也执行同样操作--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">one-to-one</span> <span class="attr">name</span>=<span class="string">&quot;login&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.voidking.hibernate.model.Login&quot;</span> <span class="attr">cascade</span>=<span class="string">&quot;all&quot;</span> <span class="attr">lazy</span>=<span class="string">&quot;false&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">one-to-one</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="hibernate-cfg-xml"><span class="post-title-index">2.6.</span><a href="#hibernate-cfg-xml" class="headerlink" title="hibernate.cfg.xml"></a> hibernate.cfg.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&#x27;1.0&#x27; encoding=&#x27;utf-8&#x27;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">hibernate-configuration</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;</span>&gt;</span></span><br><span class="line">     </span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-factory</span>&gt;</span></span><br><span class="line">     </span><br><span class="line">    <span class="comment">&lt;!-- Database connection settings --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;connection.driver_class&quot;</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;connection.url&quot;</span>&gt;</span>jdbc:mysql://localhost/xscj<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;connection.username&quot;</span>&gt;</span>scott<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;connection.password&quot;</span>&gt;</span>tiger<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">         </span><br><span class="line">    <span class="comment">&lt;!-- JDBC connection pool (use the built-in) --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;property name=&quot;connection.pool_size&quot;&gt;1&lt;/property&gt; --&gt;</span></span><br><span class="line">         </span><br><span class="line">    <span class="comment">&lt;!-- SQL dialect --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dialect&quot;</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">         </span><br><span class="line">    <span class="comment">&lt;!-- Echo all executed SQL to stdout --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;show_sql&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">         </span><br><span class="line">    <span class="comment">&lt;!-- Enable Hibernate&#x27;s automatic session context management --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;--&gt;</span></span><br><span class="line">         </span><br><span class="line">    <span class="comment">&lt;!-- Drop and re-create the database schema on startup --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;hbm2ddl.auto&quot;</span>&gt;</span>create<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">         </span><br><span class="line">    <span class="comment">&lt;!-- Disable the second-level cache --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cache.provider_class&quot;</span>&gt;</span>org.hibernate.cache.NoCacheProvider<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     </span><br><span class="line">    <span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">&quot;com/voidking/hibernate/model/Kcb.hbm.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">&quot;com/voidking/hibernate/model/Login.hbm.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapping</span> <span class="attr">resource</span>=<span class="string">&quot;com/voidking/hibernate/model/Detail.hbm.xml&quot;</span>/&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;/<span class="name">session-factory</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="SharePrimaryKey-java"><span class="post-title-index">2.7.</span><a href="#SharePrimaryKey-java" class="headerlink" title="SharePrimaryKey.java"></a> SharePrimaryKey.java</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">package com.voidking.hibernate.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.hibernate.<span class="keyword">Session</span>;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.SessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.<span class="keyword">Transaction</span>;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.cfg.<span class="keyword">Configuration</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.voidking.hibernate.model.Detail;</span><br><span class="line"><span class="keyword">import</span> com.voidking.hibernate.model.<span class="keyword">Login</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> SharePrimaryKey&#123;</span><br><span class="line">	<span class="built_in">public</span> static <span class="type">void</span> main(String[] args) &#123;</span><br><span class="line">		<span class="keyword">Configuration</span> cfg = <span class="built_in">new</span> <span class="keyword">Configuration</span>();</span><br><span class="line">        SessionFactory sf = cfg.configure().buildSessionFactory();</span><br><span class="line">		<span class="keyword">Session</span> <span class="keyword">session</span> = sf.openSession();</span><br><span class="line">		</span><br><span class="line">		// 创建事务对象</span><br><span class="line">		<span class="keyword">Transaction</span> ts=<span class="keyword">session</span>.beginTransaction();</span><br><span class="line">		//共享主键方式</span><br><span class="line">		Detail detail=<span class="built_in">new</span> Detail();</span><br><span class="line">		<span class="keyword">Login</span> <span class="keyword">login</span>=<span class="built_in">new</span> <span class="keyword">Login</span>();</span><br><span class="line">		<span class="keyword">login</span>.setUsername(&quot;yanhong&quot;);</span><br><span class="line">		<span class="keyword">login</span>.setPassword(&quot;123&quot;);</span><br><span class="line">		detail.setTruename(&quot;严红&quot;);</span><br><span class="line">		detail.setEmail(&quot;yanhong@126.com&quot;);</span><br><span class="line">		//相互设置关联</span><br><span class="line">		<span class="keyword">login</span>.setDetail(detail);</span><br><span class="line">		detail.setLogin(<span class="keyword">login</span>);</span><br><span class="line">		//这样完成后就可以通过<span class="keyword">Session</span>对象调用<span class="keyword">session</span>.save(detail)来持久化该对象</span><br><span class="line">		<span class="keyword">session</span>.save(detail);</span><br><span class="line">		</span><br><span class="line">		ts.<span class="keyword">commit</span>();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">session</span>.<span class="keyword">close</span>();</span><br><span class="line">		sf.<span class="keyword">close</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="运行"><span class="post-title-index">2.8.</span><a href="#运行" class="headerlink" title="运行"></a> 运行</h4><p>以Java Application运行，查看数据库，可以发现，数据成功插入。</p><h3 id="唯一外键方式"><span class="post-title-index">3.</span><a href="#唯一外键方式" class="headerlink" title="唯一外键方式"></a> 唯一外键方式</h3><p>唯一外键方式就是一个表的外键和另一个表的唯一主键形成一对一的映射关系，这种一对一的关系其实就是多对一关联关系的一种特殊情况而已。</p><p>唯一外键的情况很多，比如，每个人对应一个房间。很多情况下，可以是几个人住在同一个房间里面，就是多对一的关系。但是如果让一个人住一个房间，就变成了一对一的关系了，这就是前面说的一对一关系其实是多对一关系的一种特殊情况。</p><h4 id="创建表命令"><span class="post-title-index">3.1.</span><a href="#创建表命令" class="headerlink" title="创建表命令"></a> 创建表命令</h4><p>创建表person和room：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> person(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary key</span> auto_increment <span class="keyword">not</span> <span class="keyword">null</span> ,</span><br><span class="line"><span class="type">name</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">room_id <span class="type">int</span>(<span class="number">4</span>) </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> room(</span><br><span class="line">id <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">primary key</span> auto_increment <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">address <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="Person-java"><span class="post-title-index">3.2.</span><a href="#Person-java" class="headerlink" title="Person.java"></a> Person.java</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">voidking</span>.<span class="property">hibernate</span>.<span class="property">model</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">implements</span> java.<span class="property">io</span>.<span class="property">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Fields</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">Integer</span> id;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">String</span> name;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">Room</span> room;			</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Constructors</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/** default constructor */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Person</span>() &#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** minimal constructor */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Person</span>(<span class="title class_">String</span> name) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** full constructor */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Person</span>(<span class="title class_">String</span> name, <span class="title class_">Room</span> room) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">		<span class="comment">//this.roomId = roomId;</span></span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">room</span> = room;		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Property accessors</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Integer</span> <span class="title function_">getId</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">id</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setId</span>(<span class="params"><span class="title class_">Integer</span> id</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">id</span> = id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setName</span>(<span class="params"><span class="title class_">String</span> name</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Room</span> <span class="title function_">getRoom</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">room</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setRoom</span>(<span class="params"><span class="title class_">Room</span> room</span>)&#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">room</span> = room;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Person-hbm-xml"><span class="post-title-index">3.3.</span><a href="#Person-hbm-xml" class="headerlink" title="Person.hbm.xml"></a> Person.hbm.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">hibernate-mapping</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">&quot;com.voidking.hibernate.model.Person&quot;</span> <span class="attr">table</span>=<span class="string">&quot;Person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">&quot;native&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">length</span>=<span class="string">&quot;20&quot;</span> <span class="attr">not-null</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">many-to-one</span> <span class="attr">name</span>=<span class="string">&quot;room&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.voidking.hibernate.model.Room&quot;</span>  <span class="attr">column</span>=<span class="string">&quot;room_id&quot;</span> <span class="attr">cascade</span>=<span class="string">&quot;all&quot;</span> <span class="attr">unique</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">many-to-one</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="Room-java"><span class="post-title-index">3.4.</span><a href="#Room-java" class="headerlink" title="Room.java"></a> Room.java</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">voidking</span>.<span class="property">hibernate</span>.<span class="property">model</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Room</span> <span class="keyword">implements</span> java.<span class="property">io</span>.<span class="property">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Fields</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">Integer</span> id;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">String</span> address;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">Person</span> person;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Constructors</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/** default constructor */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Room</span>() &#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** full constructor */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Room</span>(<span class="title class_">String</span> address) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">address</span> = address;</span><br><span class="line">		<span class="comment">//this.person = person;</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Property accessors</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Integer</span> <span class="title function_">getId</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">id</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setId</span>(<span class="params"><span class="title class_">Integer</span> id</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">id</span> = id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">getAddress</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">address</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setAddress</span>(<span class="params"><span class="title class_">String</span> address</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">address</span> = address;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Person</span> <span class="title function_">getPerson</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">person</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setPerson</span>(<span class="params"><span class="title class_">Person</span> person</span>)&#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">person</span> = person;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Room-hbm-xml"><span class="post-title-index">3.5.</span><a href="#Room-hbm-xml" class="headerlink" title="Room.hbm.xml"></a> Room.hbm.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">hibernate-mapping</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">&quot;com.voidking.hibernate.model.Room&quot;</span> <span class="attr">table</span>=<span class="string">&quot;Room&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">&quot;native&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">length</span>=<span class="string">&quot;100&quot;</span> <span class="attr">not-null</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">one-to-one</span> <span class="attr">name</span>=<span class="string">&quot;person&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.voidking.hibernate.model.Person&quot;</span> <span class="attr">property-ref</span>=<span class="string">&quot;room&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="hibernate-cfg-xml-1"><span class="post-title-index">3.6.</span><a href="#hibernate-cfg-xml-1" class="headerlink" title="hibernate.cfg.xml"></a> hibernate.cfg.xml</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;mapping <span class="attribute">resource</span>=<span class="string">&quot;com/voidking/hibernate/model/Person.hbm.xml&quot;</span>/&gt; </span><br><span class="line">&lt;mapping <span class="attribute">resource</span>=<span class="string">&quot;com/voidking/hibernate/model/Room.hbm.xml&quot;</span>/&gt;  </span><br></pre></td></tr></table></figure><h5 id="OneForeign-java"><span class="post-title-index">3.6.1.</span><a href="#OneForeign-java" class="headerlink" title="OneForeign.java"></a> OneForeign.java</h5><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">package com.voidking.hibernate.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.hibernate.<span class="keyword">Session</span>;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.SessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.<span class="keyword">Transaction</span>;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.cfg.<span class="keyword">Configuration</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.voidking.hibernate.model.Person;</span><br><span class="line"><span class="keyword">import</span> com.voidking.hibernate.model.Room;</span><br><span class="line"></span><br><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> OneForeign&#123;</span><br><span class="line">	<span class="built_in">public</span> static <span class="type">void</span> main(String[] args) &#123;</span><br><span class="line">		<span class="keyword">Configuration</span> cfg = <span class="built_in">new</span> <span class="keyword">Configuration</span>();</span><br><span class="line">        SessionFactory sf = cfg.configure().buildSessionFactory();</span><br><span class="line">		<span class="keyword">Session</span> <span class="keyword">session</span> = sf.openSession();</span><br><span class="line">		</span><br><span class="line">		// 创建事务对象</span><br><span class="line">		<span class="keyword">Transaction</span> ts=<span class="keyword">session</span>.beginTransaction();</span><br><span class="line"></span><br><span class="line">		//唯一外键方式</span><br><span class="line">		Person person=<span class="built_in">new</span> Person();</span><br><span class="line">		person.setName(&quot;liumin&quot;);</span><br><span class="line">		Room room=<span class="built_in">new</span> Room();</span><br><span class="line">		room.setAddress(&quot;NJ-S1-328&quot;);</span><br><span class="line">		person.setRoom(room);</span><br><span class="line">		<span class="keyword">session</span>.save(person);</span><br><span class="line">		</span><br><span class="line">		ts.<span class="keyword">commit</span>();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">session</span>.<span class="keyword">close</span>();</span><br><span class="line">		sf.<span class="keyword">close</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="运行-1"><span class="post-title-index">3.7.</span><a href="#运行-1" class="headerlink" title="运行"></a> 运行</h4><p>以Java Application运行，查看数据库，可以发现，数据成功插入。</p><h4 id="关于外键"><span class="post-title-index">3.8.</span><a href="#关于外键" class="headerlink" title="关于外键"></a> 关于外键</h4><p>在创建表person时，我们并没有设置room_id为外键，但是，当我们运行这个项目的之后。使用<code>desc person;</code>命令可以发现，room_id变成了外键。<br>可见，Hibernate不仅可以改变数据库中表的数据，也可以改变数据库中表的属性。理论上，也可以创建删除表。<br>曾经开发时，使用JPA直接生成表，根本不用操作数据库，很方便。</p><h3 id="多对一单向关联"><span class="post-title-index">4.</span><a href="#多对一单向关联" class="headerlink" title="多对一单向关联"></a> 多对一单向关联</h3><p>只要把上例中的一对一的唯一外键关联实例稍微修改，就可以变成多对一。</p><h4 id="Person-hbm-xml-1"><span class="post-title-index">4.1.</span><a href="#Person-hbm-xml-1" class="headerlink" title="Person.hbm.xml"></a> Person.hbm.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">hibernate-mapping</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">&quot;com.voidking.hibernate.model.Person&quot;</span> <span class="attr">table</span>=<span class="string">&quot;Person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">&quot;native&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">length</span>=<span class="string">&quot;20&quot;</span> <span class="attr">not-null</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">many-to-one</span> <span class="attr">name</span>=<span class="string">&quot;room&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.voidking.hibernate.model.Room&quot;</span>  <span class="attr">column</span>=<span class="string">&quot;room_id&quot;</span> <span class="attr">cascade</span>=<span class="string">&quot;all&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">many-to-one</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="Room-java-1"><span class="post-title-index">4.2.</span><a href="#Room-java-1" class="headerlink" title="Room.java"></a> Room.java</h4><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.voidking.hibernate.model;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title class_"><span class="keyword">class</span> <span class="title">Room</span> <span class="keyword"><span class="keyword">implements</span> <span class="type">java</span></span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> Integer id;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">String</span> address;</span><br><span class="line">	<span class="comment">//setter和getter方法</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Room-hbm-xml-1"><span class="post-title-index">4.3.</span><a href="#Room-hbm-xml-1" class="headerlink" title="Room.hbm.xml"></a> Room.hbm.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">hibernate-mapping</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">&quot;com.voidking.hibernate.model.Room&quot;</span> <span class="attr">table</span>=<span class="string">&quot;Room&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">&quot;native&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">length</span>=<span class="string">&quot;100&quot;</span> <span class="attr">not-null</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ManyToOne-java"><span class="post-title-index">4.4.</span><a href="#ManyToOne-java" class="headerlink" title="ManyToOne.java"></a> ManyToOne.java</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">package com.voidking.hibernate.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.hibernate.<span class="keyword">Session</span>;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.SessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.<span class="keyword">Transaction</span>;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.cfg.<span class="keyword">Configuration</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.voidking.hibernate.model.Person;</span><br><span class="line"><span class="keyword">import</span> com.voidking.hibernate.model.Room;</span><br><span class="line"></span><br><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> ManyToOne&#123;</span><br><span class="line">	<span class="built_in">public</span> static <span class="type">void</span> main(String[] args) &#123;</span><br><span class="line">		<span class="keyword">Configuration</span> cfg = <span class="built_in">new</span> <span class="keyword">Configuration</span>();</span><br><span class="line">        SessionFactory sf = cfg.configure().buildSessionFactory();</span><br><span class="line">		<span class="keyword">Session</span> <span class="keyword">session</span> = sf.openSession();</span><br><span class="line">		</span><br><span class="line">		// 创建事务对象</span><br><span class="line">		<span class="keyword">Transaction</span> ts=<span class="keyword">session</span>.beginTransaction();</span><br><span class="line"></span><br><span class="line">		Room room=<span class="built_in">new</span> Room();</span><br><span class="line">		room.setAddress(&quot;NJ-S1-328&quot;);</span><br><span class="line">		Person person=<span class="built_in">new</span> Person();</span><br><span class="line">		person.setName(&quot;liumin&quot;);</span><br><span class="line">		</span><br><span class="line">		person.setRoom(room);</span><br><span class="line">		<span class="keyword">session</span>.save(person);</span><br><span class="line">		</span><br><span class="line">		ts.<span class="keyword">commit</span>();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">session</span>.<span class="keyword">close</span>();</span><br><span class="line">		sf.<span class="keyword">close</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="一对多双向关联"><span class="post-title-index">5.</span><a href="#一对多双向关联" class="headerlink" title="一对多双向关联"></a> 一对多双向关联</h3><p>上面的例子中，多对一单向关联是从多控制一，也就是说，从多可以知道一，但从一不知道多。如果一也只知道多，那么就变成了双向一对多（或多对一）关联。</p><h4 id="Room-java-2"><span class="post-title-index">5.1.</span><a href="#Room-java-2" class="headerlink" title="Room.java"></a> Room.java</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">voidking</span>.<span class="property">hibernate</span>.<span class="property">model</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.<span class="property">util</span>.<span class="property">HashSet</span>;</span><br><span class="line"><span class="keyword">import</span> java.<span class="property">util</span>.<span class="property">Set</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Room</span> <span class="keyword">implements</span> java.<span class="property">io</span>.<span class="property">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Fields</span></span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">Integer</span> id;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">String</span> address;	</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">Set</span> person = <span class="keyword">new</span> <span class="title class_">HashSet</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Constructors</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/** default constructor */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Room</span>() &#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** full constructor */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Room</span>(<span class="title class_">String</span> address) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">address</span> = address;</span><br><span class="line">		<span class="comment">//this.person = person;</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Property accessors</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Integer</span> <span class="title function_">getId</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">id</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setId</span>(<span class="params"><span class="title class_">Integer</span> id</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">id</span> = id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">getAddress</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">address</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setAddress</span>(<span class="params"><span class="title class_">String</span> address</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">address</span> = address;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Set</span> <span class="title function_">getPerson</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> person;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setPerson</span>(<span class="params"><span class="title class_">Set</span> person</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">person</span> = person;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Room-hbm-xml-2"><span class="post-title-index">5.2.</span><a href="#Room-hbm-xml-2" class="headerlink" title="Room.hbm.xml"></a> Room.hbm.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">hibernate-mapping</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">&quot;com.voidking.hibernate.model.Room&quot;</span> <span class="attr">table</span>=<span class="string">&quot;Room&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">&quot;native&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">length</span>=<span class="string">&quot;100&quot;</span> <span class="attr">not-null</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">&quot;person&quot;</span> <span class="attr">inverse</span>=<span class="string">&quot;false&quot;</span> <span class="attr">cascade</span>=<span class="string">&quot;all&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">&quot;room_id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">one-to-many</span> <span class="attr">class</span>=<span class="string">&quot;com.voidking.hibernate.model.Person&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="cascade取值"><span class="post-title-index">5.3.</span><a href="#cascade取值" class="headerlink" title="cascade取值"></a> cascade取值</h4><ul><li>all：表示所有操作在关联层级上进行连锁操作。</li><li>save-update：表示只有save和update操作进行连锁操作。</li><li>delete：表示只有delete操作进行连锁操作。</li><li>all-delete-orphan：在删除当前持久化对象时，它相当于delete；在保存或更新当前持久化对象时，它相当于save-update。另外它还可以删除与当前持久化对象断开关联关系的其他持久化对象。</li></ul><h4 id="OneToMany-java"><span class="post-title-index">5.4.</span><a href="#OneToMany-java" class="headerlink" title="OneToMany.java"></a> OneToMany.java</h4><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">package com.voidking.hibernate.test<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">import org.hibernate.Session<span class="comment">;</span></span><br><span class="line">import org.hibernate.SessionFactory<span class="comment">;</span></span><br><span class="line">import org.hibernate.Transaction<span class="comment">;</span></span><br><span class="line">import org.hibernate.cfg.Configuration<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">import com.voidking.hibernate.model.Person<span class="comment">;</span></span><br><span class="line">import com.voidking.hibernate.model.Room<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">public class OneToMany&#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		Configuration cfg <span class="operator">=</span> new Configuration()<span class="comment">;</span></span><br><span class="line">        SessionFactory sf <span class="operator">=</span> cfg.configure().buildSessionFactory()<span class="comment">;</span></span><br><span class="line">		Session session <span class="operator">=</span> sf.openSession()<span class="comment">;</span></span><br><span class="line">		</span><br><span class="line">		// 创建事务对象</span><br><span class="line">		Transaction ts<span class="operator">=</span>session.beginTransaction()<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">		Person person1<span class="operator">=</span>new Person()<span class="comment">; </span></span><br><span class="line">		Person person2<span class="operator">=</span>new Person()<span class="comment">;</span></span><br><span class="line">		Room room<span class="operator">=</span>new Room()<span class="comment">;</span></span><br><span class="line">		room.setAddress(<span class="string">&quot;NJ-S1-328&quot;</span>)<span class="comment">;</span></span><br><span class="line">		person1.setName(<span class="string">&quot;李方方&quot;</span>)<span class="comment">;</span></span><br><span class="line">		person2.setName(<span class="string">&quot;王艳&quot;</span>)<span class="comment">;</span></span><br><span class="line">		person1.setRoom(room)<span class="comment">;</span></span><br><span class="line">		person2.setRoom(room)<span class="comment">;</span></span><br><span class="line">		//这样完成后就可以通过Session对象</span><br><span class="line">		//调用session.save(person1)和session.save(person)</span><br><span class="line">		//会自动保存room</span><br><span class="line">		session.save(person1)<span class="comment">;</span></span><br><span class="line">		session.save(person2)<span class="comment">;</span></span><br><span class="line">		</span><br><span class="line">		ts.commit()<span class="comment">;</span></span><br><span class="line">		</span><br><span class="line">		session.close()<span class="comment">;</span></span><br><span class="line">		sf.close()<span class="comment">;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="多对多单向关联"><span class="post-title-index">6.</span><a href="#多对多单向关联" class="headerlink" title="多对多单向关联"></a> 多对多单向关联</h3><p>学生和课程就是多对多的关系，一个学生可以选择多门课程，而一门课程又可以被多个学生选择。多对多关系在关系数据库中不能直接表现，还必须依赖一张连接表。<br>由于是单向的，也就是说一方可以知道另一方，反之不行。这里以从学生知道选择了哪些课程为例实现多对多单向关联。</p><h4 id="创建表命令-1"><span class="post-title-index">6.1.</span><a href="#创建表命令-1" class="headerlink" title="创建表命令"></a> 创建表命令</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary key</span> auto_increment <span class="keyword">not</span> <span class="keyword">null</span> ,</span><br><span class="line">snumber <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">sname <span class="type">varchar</span>(<span class="number">10</span>),</span><br><span class="line">sage <span class="type">int</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> course(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary key</span> auto_increment <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">cnumber <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">cname <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> stu_cour(</span><br><span class="line">sid <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">cid <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line"><span class="keyword">primary key</span> (sid,cid)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="Student-java"><span class="post-title-index">6.2.</span><a href="#Student-java" class="headerlink" title="Student.java"></a> Student.java</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">voidking</span>.<span class="property">hibernate</span>.<span class="property">model</span>;</span><br><span class="line"><span class="keyword">import</span> java.<span class="property">util</span>.<span class="property">HashSet</span>;</span><br><span class="line"><span class="keyword">import</span> java.<span class="property">util</span>.<span class="property">Set</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> java.<span class="property">io</span>.<span class="property">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Fields</span></span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">Integer</span> id;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">String</span> snumber;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">String</span> sname;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">Integer</span> sage;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">Set</span> courses = <span class="keyword">new</span> <span class="title class_">HashSet</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Constructors</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/** default constructor */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Student</span>() &#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** minimal constructor */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Student</span>(<span class="title class_">String</span> snumber) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">snumber</span> = snumber;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** full constructor */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Student</span>(<span class="title class_">String</span> snumber, <span class="title class_">String</span> sname, <span class="title class_">Integer</span> sage) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">snumber</span> = snumber;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">sname</span> = sname;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">sage</span> = sage;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Property accessors</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Integer</span> <span class="title function_">getId</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">id</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setId</span>(<span class="params"><span class="title class_">Integer</span> id</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">id</span> = id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">getSnumber</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">snumber</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setSnumber</span>(<span class="params"><span class="title class_">String</span> snumber</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">snumber</span> = snumber;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">getSname</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">sname</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setSname</span>(<span class="params"><span class="title class_">String</span> sname</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">sname</span> = sname;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Integer</span> <span class="title function_">getSage</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">sage</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setSage</span>(<span class="params"><span class="title class_">Integer</span> sage</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">sage</span> = sage;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Set</span> <span class="title function_">getCourses</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> courses;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setCourses</span>(<span class="params"><span class="title class_">Set</span> courses</span>)&#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">courses</span> = courses;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Student-hbm-xml"><span class="post-title-index">6.3.</span><a href="#Student-hbm-xml" class="headerlink" title="Student.hbm.xml"></a> Student.hbm.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">hibernate-mapping</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">&quot;com.voidking.hibernate.model.Student&quot;</span> <span class="attr">table</span>=<span class="string">&quot;student&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;ID&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">&quot;identity&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;snumber&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;SNUMBER&quot;</span> <span class="attr">length</span>=<span class="string">&quot;10&quot;</span> <span class="attr">not-null</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;SNAME&quot;</span> <span class="attr">length</span>=<span class="string">&quot;10&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sage&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;SAGE&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">&quot;courses&quot;</span> <span class="attr">table</span>=<span class="string">&quot;stu_cour&quot;</span> <span class="attr">lazy</span>=<span class="string">&quot;true&quot;</span> <span class="attr">cascade</span>=<span class="string">&quot;all&quot;</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">&quot;SID&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">many-to-many</span> <span class="attr">class</span>=<span class="string">&quot;com.voidking.hibernate.model.Course&quot;</span> <span class="attr">column</span>=<span class="string">&quot;CID&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="Course-java"><span class="post-title-index">6.4.</span><a href="#Course-java" class="headerlink" title="Course.java"></a> Course.java</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">voidking</span>.<span class="property">hibernate</span>.<span class="property">model</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Course</span> <span class="keyword">implements</span> java.<span class="property">io</span>.<span class="property">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Fields</span></span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">Integer</span> id;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">String</span> cnumber;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">String</span> cname;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Constructors</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/** default constructor */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Course</span>() &#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** minimal constructor */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Course</span>(<span class="title class_">String</span> cnumber) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">cnumber</span> = cnumber;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** full constructor */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Course</span>(<span class="title class_">String</span> cnumber, <span class="title class_">String</span> cname) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">cnumber</span> = cnumber;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">cname</span> = cname;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Property accessors</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Integer</span> <span class="title function_">getId</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">id</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setId</span>(<span class="params"><span class="title class_">Integer</span> id</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">id</span> = id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">getCnumber</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">cnumber</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setCnumber</span>(<span class="params"><span class="title class_">String</span> cnumber</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">cnumber</span> = cnumber;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">getCname</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">cname</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setCname</span>(<span class="params"><span class="title class_">String</span> cname</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">cname</span> = cname;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Course-hbm-xml"><span class="post-title-index">6.5.</span><a href="#Course-hbm-xml" class="headerlink" title="Course.hbm.xml"></a> Course.hbm.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">hibernate-mapping</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">&quot;com.voidking.hibernate.model.Course&quot;</span> <span class="attr">table</span>=<span class="string">&quot;course&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;ID&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">&quot;identity&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cnumber&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;CNUMBER&quot;</span> <span class="attr">length</span>=<span class="string">&quot;10&quot;</span> <span class="attr">not-null</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;CNAME&quot;</span> <span class="attr">length</span>=<span class="string">&quot;20&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="hibernate-cfg-xml-2"><span class="post-title-index">6.6.</span><a href="#hibernate-cfg-xml-2" class="headerlink" title="hibernate.cfg.xml"></a> hibernate.cfg.xml</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;mapping <span class="attribute">resource</span>=<span class="string">&quot;com/voidking/hibernate/model/Student.hbm.xml&quot;</span>/&gt; </span><br><span class="line">&lt;mapping <span class="attribute">resource</span>=<span class="string">&quot;com/voidking/hibernate/model/Course.hbm.xml&quot;</span>/&gt;   </span><br></pre></td></tr></table></figure><h4 id="ManyToManySingle-java"><span class="post-title-index">6.7.</span><a href="#ManyToManySingle-java" class="headerlink" title="ManyToManySingle.java"></a> ManyToManySingle.java</h4><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">package com.voidking.hibernate.test<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">import java.util.HashSet<span class="comment">;</span></span><br><span class="line">import java.util.Set<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">import org.hibernate.Session<span class="comment">;</span></span><br><span class="line">import org.hibernate.SessionFactory<span class="comment">;</span></span><br><span class="line">import org.hibernate.Transaction<span class="comment">;</span></span><br><span class="line">import org.hibernate.cfg.Configuration<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">import com.voidking.hibernate.model.Course<span class="comment">;</span></span><br><span class="line">import com.voidking.hibernate.model.Student<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">public class ManyToManySingle&#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		Configuration cfg <span class="operator">=</span> new Configuration()<span class="comment">;</span></span><br><span class="line">        SessionFactory sf <span class="operator">=</span> cfg.configure().buildSessionFactory()<span class="comment">;</span></span><br><span class="line">		Session session <span class="operator">=</span> sf.openSession()<span class="comment">;</span></span><br><span class="line">		</span><br><span class="line">		// 创建事务对象</span><br><span class="line">		Transaction ts<span class="operator">=</span>session.beginTransaction()<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">		//多对多单向关联</span><br><span class="line">		Course cour1<span class="operator">=</span>new Course()<span class="comment">;</span></span><br><span class="line">		Course cour2<span class="operator">=</span>new Course()<span class="comment">;</span></span><br><span class="line">		Course cour3<span class="operator">=</span>new Course()<span class="comment">;</span></span><br><span class="line">		cour1.setCnumber(<span class="string">&quot;101&quot;</span>)<span class="comment">;</span></span><br><span class="line">		cour1.setCname(<span class="string">&quot;计算机基础&quot;</span>)<span class="comment">;</span></span><br><span class="line">		cour2.setCnumber(<span class="string">&quot;102&quot;</span>)<span class="comment">;</span></span><br><span class="line">		cour2.setCname(<span class="string">&quot;数据库原理&quot;</span>)<span class="comment">;</span></span><br><span class="line">		cour3.setCnumber(<span class="string">&quot;103&quot;</span>)<span class="comment">;</span></span><br><span class="line">		cour3.setCname(<span class="string">&quot;计算机原理&quot;</span>)<span class="comment">;</span></span><br><span class="line">		Set courses<span class="operator">=</span>new HashSet()<span class="comment">;</span></span><br><span class="line">		courses.add(cour1)<span class="comment">;</span></span><br><span class="line">		courses.add(cour2)<span class="comment">;</span></span><br><span class="line">		courses.add(cour3)<span class="comment">;</span></span><br><span class="line">		Student stu<span class="operator">=</span>new Student()<span class="comment">;</span></span><br><span class="line">		stu.setSnumber(<span class="string">&quot;081101&quot;</span>)<span class="comment">;</span></span><br><span class="line">		stu.setSname(<span class="string">&quot;李方方&quot;</span>)<span class="comment">;</span></span><br><span class="line">		stu.setSage(<span class="number">21</span>)<span class="comment">;</span></span><br><span class="line">		stu.setCourses(courses)<span class="comment">;</span></span><br><span class="line">		session.save(stu)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">		ts.commit()<span class="comment">;</span></span><br><span class="line">		</span><br><span class="line">		session.close()<span class="comment">;</span></span><br><span class="line">		sf.close()<span class="comment">;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="多对多双向关联"><span class="post-title-index">7.</span><a href="#多对多双向关联" class="headerlink" title="多对多双向关联"></a> 多对多双向关联</h3><p>学会多对多单向关联后，只要同时实现两个互逆的多对多单向关联便可轻而易举地实现多对多双向关联。在上面的例子中只要修改课程的代码就可以了。</p><h4 id="Course-java-1"><span class="post-title-index">7.1.</span><a href="#Course-java-1" class="headerlink" title="Course.java"></a> Course.java</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">voidking</span>.<span class="property">hibernate</span>.<span class="property">model</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.<span class="property">util</span>.<span class="property">HashSet</span>;</span><br><span class="line"><span class="keyword">import</span> java.<span class="property">util</span>.<span class="property">Set</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Course</span> <span class="keyword">implements</span> java.<span class="property">io</span>.<span class="property">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Fields</span></span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">Integer</span> id;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">String</span> cnumber;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">String</span> cname;</span><br><span class="line">	<span class="keyword">private</span> <span class="title class_">Set</span> stus = <span class="keyword">new</span> <span class="title class_">HashSet</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Constructors</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/** default constructor */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Course</span>() &#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** minimal constructor */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Course</span>(<span class="title class_">String</span> cnumber) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">cnumber</span> = cnumber;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** full constructor */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Course</span>(<span class="title class_">String</span> cnumber, <span class="title class_">String</span> cname) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">cnumber</span> = cnumber;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">cname</span> = cname;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Property accessors</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Integer</span> <span class="title function_">getId</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">id</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setId</span>(<span class="params"><span class="title class_">Integer</span> id</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">id</span> = id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">getCnumber</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">cnumber</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setCnumber</span>(<span class="params"><span class="title class_">String</span> cnumber</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">cnumber</span> = cnumber;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">getCname</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">cname</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setCname</span>(<span class="params"><span class="title class_">String</span> cname</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">cname</span> = cname;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title class_">Set</span> <span class="title function_">getStus</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> stus;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setStus</span>(<span class="params"><span class="title class_">Set</span> stus</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">stus</span> = stus;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Course-hbm-xml-1"><span class="post-title-index">7.2.</span><a href="#Course-hbm-xml-1" class="headerlink" title="Course.hbm.xml"></a> Course.hbm.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">hibernate-mapping</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">&quot;com.voidking.hibernate.model.Course&quot;</span> <span class="attr">table</span>=<span class="string">&quot;course&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;ID&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">&quot;identity&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cnumber&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;CNUMBER&quot;</span> <span class="attr">length</span>=<span class="string">&quot;10&quot;</span> <span class="attr">not-null</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">&quot;CNAME&quot;</span> <span class="attr">length</span>=<span class="string">&quot;20&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">&quot;stus&quot;</span> <span class="attr">table</span>=<span class="string">&quot;stu_cours&quot;</span> <span class="attr">lazy</span>=<span class="string">&quot;true&quot;</span> <span class="attr">cascade</span>=<span class="string">&quot;all&quot;</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">&quot;cid&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">many-to-many</span> <span class="attr">class</span>=<span class="string">&quot;com.voidking.hibernate.model.Student&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">many-to-many</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-mapping</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ManyToManyDouble-java"><span class="post-title-index">7.3.</span><a href="#ManyToManyDouble-java" class="headerlink" title="ManyToManyDouble.java"></a> ManyToManyDouble.java</h4><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">package com.voidking.hibernate.test<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">import java.util.HashSet<span class="comment">;</span></span><br><span class="line">import java.util.Set<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">import org.hibernate.Session<span class="comment">;</span></span><br><span class="line">import org.hibernate.SessionFactory<span class="comment">;</span></span><br><span class="line">import org.hibernate.Transaction<span class="comment">;</span></span><br><span class="line">import org.hibernate.cfg.Configuration<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">import com.voidking.hibernate.model.Course<span class="comment">;</span></span><br><span class="line">import com.voidking.hibernate.model.Student<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">public class ManyToManyDouble&#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		Configuration cfg <span class="operator">=</span> new Configuration()<span class="comment">;</span></span><br><span class="line">        SessionFactory sf <span class="operator">=</span> cfg.configure().buildSessionFactory()<span class="comment">;</span></span><br><span class="line">		Session session <span class="operator">=</span> sf.openSession()<span class="comment">;</span></span><br><span class="line">		</span><br><span class="line">		// 创建事务对象</span><br><span class="line">		Transaction ts<span class="operator">=</span>session.beginTransaction()<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">		//多对多单向关联</span><br><span class="line">		Course cour1<span class="operator">=</span>new Course()<span class="comment">;</span></span><br><span class="line">		Course cour2<span class="operator">=</span>new Course()<span class="comment">;</span></span><br><span class="line">		Course cour3<span class="operator">=</span>new Course()<span class="comment">;</span></span><br><span class="line">		cour1.setCnumber(<span class="string">&quot;101&quot;</span>)<span class="comment">;</span></span><br><span class="line">		cour1.setCname(<span class="string">&quot;计算机基础&quot;</span>)<span class="comment">;</span></span><br><span class="line">		cour2.setCnumber(<span class="string">&quot;102&quot;</span>)<span class="comment">;</span></span><br><span class="line">		cour2.setCname(<span class="string">&quot;数据库原理&quot;</span>)<span class="comment">;</span></span><br><span class="line">		cour3.setCnumber(<span class="string">&quot;103&quot;</span>)<span class="comment">;</span></span><br><span class="line">		cour3.setCname(<span class="string">&quot;计算机原理&quot;</span>)<span class="comment">;</span></span><br><span class="line">		Set courses<span class="operator">=</span>new HashSet()<span class="comment">;</span></span><br><span class="line">		courses.add(cour1)<span class="comment">;</span></span><br><span class="line">		courses.add(cour2)<span class="comment">;</span></span><br><span class="line">		courses.add(cour3)<span class="comment">;</span></span><br><span class="line">		Student stu<span class="operator">=</span>new Student()<span class="comment">;</span></span><br><span class="line">		stu.setSnumber(<span class="string">&quot;081101&quot;</span>)<span class="comment">;</span></span><br><span class="line">		stu.setSname(<span class="string">&quot;李方方&quot;</span>)<span class="comment">;</span></span><br><span class="line">		stu.setSage(<span class="number">21</span>)<span class="comment">;</span></span><br><span class="line">		stu.setCourses(courses)<span class="comment">;</span></span><br><span class="line">		session.save(stu)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">		ts.commit()<span class="comment">;</span></span><br><span class="line">		</span><br><span class="line">		session.close()<span class="comment">;</span></span><br><span class="line">		sf.close()<span class="comment">;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="小结"><span class="post-title-index">8.</span><a href="#小结" class="headerlink" title="小结"></a> 小结</h3><p>我靠，Hibernate关系映射好复杂！根本没有明显规律，能不能愉快地玩耍了！</p><h3 id="参考文档"><span class="post-title-index">9.</span><a href="#参考文档" class="headerlink" title="参考文档"></a> 参考文档</h3><p>《Java EE基础实用教程》，郑阿奇主编</p><p>初识Hibernate——关系映射：<a target="_blank" rel="noopener" href="http://blog.csdn.net/laner0515/article/details/12905711">http://blog.csdn.net/laner0515/article/details/12905711</a></p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>原文链接：</strong> <a href="https://www.voidking.com/dev-hibernate-orm/" title="Hibernate关系映射">https://www.voidking.com/dev-hibernate-orm/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本文采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议，转载请注明出处！源站会即时更新知识点并修正错误，欢迎访问~</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/java/" rel="tag"># java</a> <a href="/tags/eclipse/" rel="tag"># eclipse</a> <a href="/tags/hibernate/" rel="tag"># hibernate</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-hibernate-start/" rel="prev" title="Hibernate概述"><i class="fa fa-chevron-left"></i> Hibernate概述</a></div><div class="post-nav-item"> <a href="/dev-hibernate-senior/" rel="next" title="Hibernate高级应用">Hibernate高级应用<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">1. 前言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E5%AF%B9%E4%B8%80%E5%85%B3%E8%81%94%EF%BC%88%E5%85%B1%E4%BA%AB%E4%B8%BB%E9%94%AE%E6%96%B9%E5%BC%8F%EF%BC%89"><span class="nav-text">2. 一对一关联（共享主键方式）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BB%BA%E7%AB%8B%E8%A1%A8%E5%91%BD%E4%BB%A4"><span class="nav-text">2.1. 建立表命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Login-java"><span class="nav-text">2.2. Login.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Login-hbm-xml"><span class="nav-text">2.3. Login.hbm.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Detail-java"><span class="nav-text">2.4. Detail.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Detail-hbm-xml"><span class="nav-text">2.5. Detail.hbm.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#hibernate-cfg-xml"><span class="nav-text">2.6. hibernate.cfg.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SharePrimaryKey-java"><span class="nav-text">2.7. SharePrimaryKey.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C"><span class="nav-text">2.8. 运行</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%94%AF%E4%B8%80%E5%A4%96%E9%94%AE%E6%96%B9%E5%BC%8F"><span class="nav-text">3. 唯一外键方式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%E5%91%BD%E4%BB%A4"><span class="nav-text">3.1. 创建表命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Person-java"><span class="nav-text">3.2. Person.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Person-hbm-xml"><span class="nav-text">3.3. Person.hbm.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Room-java"><span class="nav-text">3.4. Room.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Room-hbm-xml"><span class="nav-text">3.5. Room.hbm.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#hibernate-cfg-xml-1"><span class="nav-text">3.6. hibernate.cfg.xml</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#OneForeign-java"><span class="nav-text">3.6.1. OneForeign.java</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C-1"><span class="nav-text">3.7. 运行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E%E5%A4%96%E9%94%AE"><span class="nav-text">3.8. 关于外键</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E5%AF%B9%E4%B8%80%E5%8D%95%E5%90%91%E5%85%B3%E8%81%94"><span class="nav-text">4. 多对一单向关联</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Person-hbm-xml-1"><span class="nav-text">4.1. Person.hbm.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Room-java-1"><span class="nav-text">4.2. Room.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Room-hbm-xml-1"><span class="nav-text">4.3. Room.hbm.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ManyToOne-java"><span class="nav-text">4.4. ManyToOne.java</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%8F%8C%E5%90%91%E5%85%B3%E8%81%94"><span class="nav-text">5. 一对多双向关联</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Room-java-2"><span class="nav-text">5.1. Room.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Room-hbm-xml-2"><span class="nav-text">5.2. Room.hbm.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cascade%E5%8F%96%E5%80%BC"><span class="nav-text">5.3. cascade取值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#OneToMany-java"><span class="nav-text">5.4. OneToMany.java</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A%E5%8D%95%E5%90%91%E5%85%B3%E8%81%94"><span class="nav-text">6. 多对多单向关联</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%E5%91%BD%E4%BB%A4-1"><span class="nav-text">6.1. 创建表命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Student-java"><span class="nav-text">6.2. Student.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Student-hbm-xml"><span class="nav-text">6.3. Student.hbm.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Course-java"><span class="nav-text">6.4. Course.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Course-hbm-xml"><span class="nav-text">6.5. Course.hbm.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#hibernate-cfg-xml-2"><span class="nav-text">6.6. hibernate.cfg.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ManyToManySingle-java"><span class="nav-text">6.7. ManyToManySingle.java</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A%E5%8F%8C%E5%90%91%E5%85%B3%E8%81%94"><span class="nav-text">7. 多对多双向关联</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Course-java-1"><span class="nav-text">7.1. Course.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Course-hbm-xml-1"><span class="nav-text">7.2. Course.hbm.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ManyToManyDouble-java"><span class="nav-text">7.3. ManyToManyDouble.java</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%8F%E7%BB%93"><span class="nav-text">8. 小结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3"><span class="nav-text">9. 参考文档</span></a></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">一个计算机技术爱好者与学习者</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">779</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">34</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">271</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2026</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="https://cdn.staticfile.net/gitalk/1.7.2/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://cdn.staticfile.net/gitalk/1.7.2/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '5a238b8c32b1e4dd2156',
      clientSecret: 'bfb5d518626f6fdc7da0351d1e0cd37ab75c6361',
      repo: 'gitalk-comments',
      owner: 'voidking',
      admin: ['voidking'],
      id: '56cf0e7bf0b17ed2c483bbf445b0bb81',
      title: 'Hibernate关系映射',
      body: '欢迎留言，互相交流学习~',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></body></html>