<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="Ganglia简介Ganglia是UC Berkeley发起的一个开源集群监视项目，设计用于测量数以千计的节点。Ganglia的核心包含gmond、gmetad以及一个Web前端。主要是用来监控系统性能，如：cpu 、mem、硬盘利用率， I&#x2F;O负载、网络流量情况等，通过曲线很容易见到每个节点的工作状态，对合理调整、分配系统资源，提高系统整体性能起到重要作用。"><meta property="og:type" content="article"><meta property="og:title" content="Ubuntu14.04安装配置Ganglia"><meta property="og:url" content="https://www.voidking.com/dev-ubuntu-ganglia/index.html"><meta property="og:site_name" content="VoidKing"><meta property="og:description" content="Ganglia简介Ganglia是UC Berkeley发起的一个开源集群监视项目，设计用于测量数以千计的节点。Ganglia的核心包含gmond、gmetad以及一个Web前端。主要是用来监控系统性能，如：cpu 、mem、硬盘利用率， I&#x2F;O负载、网络流量情况等，通过曲线很容易见到每个节点的工作状态，对合理调整、分配系统资源，提高系统整体性能起到重要作用。"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2018-03-20T16:00:00.000Z"><meta property="article:modified_time" content="2020-02-20T08:24:30.777Z"><meta property="article:author" content="VoidKing"><meta property="article:tag" content="ubuntu"><meta property="article:tag" content="ganglia"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-ubuntu-ganglia/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>Ubuntu14.04安装配置Ganglia | VoidKing</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="VoidKing" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">VoidKing</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">好好学习，天天向上！</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-ubuntu-ganglia/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="VoidKing"><meta itemprop="description" content="学而不思则罔，思而不学则殆！"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="VoidKing"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> Ubuntu14.04安装配置Ganglia</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-03-20 16:00:00" itemprop="dateCreated datePublished" datetime="2018-03-20T16:00:00+00:00">2018-03-20</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/" itemprop="url" rel="index"><span itemprop="name">专业</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/%E8%BF%90%E7%BB%B4/" itemprop="url" rel="index"><span itemprop="name">运维</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/%E8%BF%90%E7%BB%B4/ubuntu/" itemprop="url" rel="index"><span itemprop="name">ubuntu</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="Ganglia简介"><a href="#Ganglia简介" class="headerlink" title="Ganglia简介"></a>Ganglia简介</h1><p>Ganglia是UC Berkeley发起的一个开源集群监视项目，设计用于测量数以千计的节点。Ganglia的核心包含gmond、gmetad以及一个Web前端。主要是用来监控系统性能，如：cpu 、mem、硬盘利用率， I/O负载、网络流量情况等，通过曲线很容易见到每个节点的工作状态，对合理调整、分配系统资源，提高系统整体性能起到重要作用。</p><a id="more"></a><h1 id="Ganlia结构"><a href="#Ganlia结构" class="headerlink" title="Ganlia结构"></a>Ganlia结构</h1><p>Ganglia在结构上由三种守护进程组成gmond 、gmetad和gweb。在操作上，每种守护进程都是独立的，运行时只需要自己的配置文件来操作即可，任意守护进程在缺少其他两种守护进程的情况下也可以正常启动和运行。然而，三者在结构上又是相互协作的，需要同时使用才能发挥功效。</p><h2 id="gmond"><a href="#gmond" class="headerlink" title="gmond"></a>gmond</h2><p>gmond和普通代理一样，安装在每一台需要监控的主机上，负责与操作系统交互以获得需要关注的指标数据，例如CPU负载和硬盘容量。</p><p>gmond在内部采用模块化设计，采用基于C语言编写的、根据操作系统定制的插件进行监控。和其他监控系统采用的客户端代理软件不同，gmond不需要等待外部轮询引擎的数据监测请求，也不将监控数据直接上传至集中式轮询器，而是根据自己本地配置文件定义的调度方案进行轮询。监测数据时使用简单的监听／通告协议，通过 XDR (External Data Representation)在集群内的主机之间共享。因此，Ganglia集群内的每个节点都知道同一集群内所有主机的当前指标数据。远程轮询器可以通过端口8649向集群内任意节点请求获得该集群XML格式的所有数据。</p><p>gmond并不是消极等待被监控系统服务器唤醒，而总是处于激活态，以便进行测量、传输和共享。轮询器不再需要知道从哪些主机获取哪些服务，而只需要一个包含每个集群内至少一台主机名称的列表即可。</p><h2 id="gmetad"><a href="#gmetad" class="headerlink" title="gmetad"></a>gmetad</h2><p>gmetad的作用是整合所有信息。</p><p>gmeted是一个简单的轮询器，对网络中每个集群进行轮询，并将每台主机上返回的所有指标数据写入各个集群对应的轮询数据库RRD。<br>作为数据存储的一种流行的解决方案，RRDtool是很好的选择。指标数据存储于轮询数据库（Round Robin Database），这种数据库包含了多个时间块内静态分配的数值。如果每10秒进行一次轮询，每次数据都进行存储，一天将需要8640次存储。考虑到数据保留需求， RRDtool内部以“循环覆盖”的方式管理数据，将新数据的值叠加到原来的数值上来覆盖原有数据。</p><h2 id="gweb"><a href="#gweb" class="headerlink" title="gweb"></a>gweb</h2><p>Ganglia可视化工具——gweb无需用户进行任何自定义设置即可便捷、及时地访问网络中任意一台主机的任意一种指标数据。</p><h1 id="主节点安装配置"><a href="#主节点安装配置" class="headerlink" title="主节点安装配置"></a>主节点安装配置</h1><p>ganglia是一个集群监控项目，要分主节点和从节点。首先，我们来完成主节点的安装配置。</p><p>1、更新软件源中的软件列表<br><code>sudo apt-get update</code></p><p>2、安装gmond、gmetad和gweb<br><code>sudo apt-get install ganglia-monitor rrdtool gmetad ganglia-webfrontend</code></p><p>3、配置gmond<br><code>sudo vi /etc/ganglia/gmond.conf</code><br>分别找到：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">cluster &#123;</span><br><span class="line">  name = <span class="string">"unspecified"</span></span><br><span class="line">  owner = <span class="string">"unspecified"</span></span><br><span class="line">  latlong = <span class="string">"unspecified"</span></span><br><span class="line">  url = <span class="string">"unspecified"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">udp_send_channel &#123;</span><br><span class="line">  mcast_join = 239.2.11.71</span><br><span class="line"> <span class="built_in"> port </span>= 8649</span><br><span class="line">  ttl = 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">udp_recv_channel &#123;</span><br><span class="line">  mcast_join = 239.2.11.71</span><br><span class="line"> <span class="built_in"> port </span>= 8649</span><br><span class="line">  bind = 239.2.11.71</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改为：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">cluster &#123;</span><br><span class="line">  name = <span class="string">"my cluster"</span> </span><br><span class="line">  owner = <span class="string">"unspecified"</span></span><br><span class="line">  latlong = <span class="string">"unspecified"</span></span><br><span class="line">  url = <span class="string">"unspecified"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">udp_send_channel &#123;</span><br><span class="line">  # mcast_join = 239.2.11.71</span><br><span class="line">  host = 192.168.56.103</span><br><span class="line"> <span class="built_in"> port </span>= 8649</span><br><span class="line">  ttl = 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">udp_recv_channel &#123;</span><br><span class="line">  # mcast_join = 239.2.11.71</span><br><span class="line"> <span class="built_in"> port </span>= 8649</span><br><span class="line">  # bind = 239.2.11.71</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4、配置gmetad<br><code>sudo vi /etc/ganglia/gmetad.conf</code></p><p>查找<code>cluster</code>，注释掉该行，修改为：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># data_source <span class="string">"my cluster"</span> localhost</span><br><span class="line">data_source <span class="string">"my cluster"</span> <span class="number">10</span> <span class="number">192.168</span><span class="number">.56</span><span class="number">.103</span>:<span class="number">8649</span></span><br></pre></td></tr></table></figure><p>data_source后面有三个参数，第一个参数”my cluster”是集群名称；第二个参数10是轮询时间（单位：秒）；第三个参数192.168.56.103:8649是要监听的机器的IP和端口（可写多个，用空格隔开）。</p><p>5、配置gweb<br><code>sudo cp /etc/ganglia-webfrontend/apache.conf /etc/apache2/sites-enabled/ganglia.conf</code></p><p>6、重启服务</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="meta-keyword">/etc/</span>init.d/ganglia-monitor restart</span><br><span class="line">sudo <span class="meta-keyword">/etc/</span>init.d/gmetad restart</span><br><span class="line">sudo <span class="meta-keyword">/etc/</span>init.d/apache2 restart</span><br></pre></td></tr></table></figure><p>7、测试访问<br>ubuntu测试：<code>curl http://192.168.56.103/ganglia/</code><br>浏览器访问测试：<a href="http://192.168.56.103/ganglia/" target="_blank" rel="noopener">http://192.168.56.103/ganglia/</a></p><h1 id="从节点安装配置"><a href="#从节点安装配置" class="headerlink" title="从节点安装配置"></a>从节点安装配置</h1><p>以上，已经完成了ganglia主节点的安装配置，但是往往我们要监控的是一个集群。接下里，我们就来研究一下从节点的配置。</p><p>Ganglia结构一节中，我们了解到，gmond要安装在每一个节点，负责监控主机情况；gmetad（包括rrdtool）只要安装在主节点就可以，负责收集各个节点的数据；gweb只要安装在主节点，负责显示gmetad收集的数据。</p><p>综上，从节点只要安装gmond就可以了。</p><h2 id="从节点"><a href="#从节点" class="headerlink" title="从节点"></a>从节点</h2><p>假设我们有一个从节点，IP为192.168.56.104，那么它的安装配置步骤如下：</p><p>1、更新软件源中的软件列表<br><code>sudo apt-get update</code></p><p>2、安装gmond<br><code>sudo apt-get install ganglia-monitor</code></p><p>3、配置gmond<br><code>sudo vi /etc/ganglia/gmond.conf</code><br>分别找到：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">cluster &#123;</span><br><span class="line">  name = <span class="string">"unspecified"</span></span><br><span class="line">  owner = <span class="string">"unspecified"</span></span><br><span class="line">  latlong = <span class="string">"unspecified"</span></span><br><span class="line">  url = <span class="string">"unspecified"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">udp_send_channel &#123;</span><br><span class="line">  mcast_join = 239.2.11.71</span><br><span class="line"> <span class="built_in"> port </span>= 8649</span><br><span class="line">  ttl = 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">udp_recv_channel &#123;</span><br><span class="line">  mcast_join = 239.2.11.71</span><br><span class="line"> <span class="built_in"> port </span>= 8649</span><br><span class="line">  bind = 239.2.11.71</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改为：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">cluster &#123;</span><br><span class="line">  name = <span class="string">"my cluster"</span> </span><br><span class="line">  owner = <span class="string">"unspecified"</span></span><br><span class="line">  latlong = <span class="string">"unspecified"</span></span><br><span class="line">  url = <span class="string">"unspecified"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">udp_send_channel &#123;</span><br><span class="line">  # mcast_join = 239.2.11.71</span><br><span class="line">  host = 192.168.56.103</span><br><span class="line"> <span class="built_in"> port </span>= 8649</span><br><span class="line">  ttl = 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">udp_recv_channel &#123;</span><br><span class="line">  # mcast_join = 239.2.11.71</span><br><span class="line"> <span class="built_in"> port </span>= 8649</span><br><span class="line">  # bind = 239.2.11.71</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>没错，从节点的gmond配置和主节点完全相同。</p><p>4、重启服务<br><code>sudo /etc/init.d/ganglia-monitor restart</code></p><h2 id="主节点"><a href="#主节点" class="headerlink" title="主节点"></a>主节点</h2><p>配置完从节点就好了吗？并没有，主节点也要做相应修改，主要是修改下gmetad配置。</p><p>1、<code>sudo vi /etc/ganglia/gmetad.conf</code></p><p>查找<code>cluster</code>，修改为：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># data_source <span class="string">"my cluster"</span> localhost</span><br><span class="line">data_source <span class="string">"my cluster"</span> <span class="number">10</span> <span class="number">192.168</span><span class="number">.56</span><span class="number">.103</span>:<span class="number">8649</span> <span class="number">192.168</span><span class="number">.56</span><span class="number">.104</span>:<span class="number">8649</span></span><br></pre></td></tr></table></figure><p>这样，就添加好了192.168.56.104这个从节点。</p><p>注意：gmetad会依次检测指定主机，并从第一台响应主机开始收集状态数据，而每一台主机上的gmond都知道所在集群的所有状态数据，所以无需在data_source定义里指定集群内的所有主机。假若有节点失效，通常指定两三个主机也就足够保证数据的收集。</p><p>2、重启gmetad<br><code>sudo /etc/init.d/gmetad restart</code></p><p>3、测试访问<br>等待10秒，再次访问 <a href="http://192.168.56.103/ganglia/" target="_blank" rel="noopener">http://192.168.56.103/ganglia/</a> ，就能看到新加入的从节点。</p><h1 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h1><p>由于重设了管理机的系统时间，发现所有的机器状态都变成了Hosts down，这时我们需要删除数据重新开始统计。</p><p>1、管理机删除rrds目录下所有文件<br><code>cd /var/lib/ganglia/rrds &amp;&amp; sudo rm -rf ./*</code></p><p>2、管理机重启gmond和gmetad<br><code>sudo /etc/init.d/ganglia-monitor restart</code><br><code>sudo /etc/init.d/gmetad restart</code></p><p>3、客户机重启gmond<br><code>sudo /etc/init.d/ganglia-monitor restart</code></p><h1 id="删除机器"><a href="#删除机器" class="headerlink" title="删除机器"></a>删除机器</h1><p>ganglia默认服务器down机也不会在web前端清除该设备，官方文档介绍的办法如下：</p><p>1、登录管理机</p><p>2、编辑gmond.conf，<code>sudo vim /etc/ganglia/gmond.conf</code><br>在globals中找到host_dmax，它的默认值为0，意思是不清除节点。host_dmax的单位为秒，我们把host_dmax的值修改为7天，就是60x60x24x7=604800，即超过7天未汇报数据的节点会从前端清除。</p><h1 id="书签"><a href="#书签" class="headerlink" title="书签"></a>书签</h1><p><a href="http://blog.csdn.net/Regan_Hoo/article/details/78742740" target="_blank" rel="noopener">Ganglia_简述</a></p><p><a href="http://blog.csdn.net/runner__1/article/details/50733772" target="_blank" rel="noopener">ubuntu14.04系统中安装Ganglia</a></p><p><a href="http://blog.csdn.net/u014743697/article/details/54999356" target="_blank" rel="noopener">Ganglia 监控实战！</a></p><p><a href="http://book.51cto.com/art/201309/409605.htm" target="_blank" rel="noopener">gmetad.conf：gmetad配置文件（1）</a></p></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/ubuntu/" rel="tag"># ubuntu</a> <a href="/tags/ganglia/" rel="tag"># ganglia</a></div><div class="post-nav"><div class="post-nav-item"><a href="/essay-clienthold/" rel="prev" title="域名被clienthold解封方法"><i class="fa fa-chevron-left"></i> 域名被clienthold解封方法</a></div><div class="post-nav-item"> <a href="/dev-centos-nginx-autostart/" rel="next" title="CentOS7设置Nginx开机自启动">CentOS7设置Nginx开机自启动<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zODU3Mi8xNTEwMA=="></div></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Ganglia简介"><span class="nav-number">1.</span> <span class="nav-text">Ganglia简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Ganlia结构"><span class="nav-number">2.</span> <span class="nav-text">Ganlia结构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#gmond"><span class="nav-number">2.1.</span> <span class="nav-text">gmond</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#gmetad"><span class="nav-number">2.2.</span> <span class="nav-text">gmetad</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#gweb"><span class="nav-number">2.3.</span> <span class="nav-text">gweb</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#主节点安装配置"><span class="nav-number">3.</span> <span class="nav-text">主节点安装配置</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#从节点安装配置"><span class="nav-number">4.</span> <span class="nav-text">从节点安装配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#从节点"><span class="nav-number">4.1.</span> <span class="nav-text">从节点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#主节点"><span class="nav-number">4.2.</span> <span class="nav-text">主节点</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#删除数据"><span class="nav-number">5.</span> <span class="nav-text">删除数据</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#删除机器"><span class="nav-number">6.</span> <span class="nav-text">删除机器</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#书签"><span class="nav-number">7.</span> <span class="nav-text">书签</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="VoidKing" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">VoidKing</p><div class="site-description" itemprop="description">学而不思则罔，思而不学则殆！</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">584</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">40</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">189</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://twitter.com/voidking_com" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;voidking_com" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i> Twitter</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">VoidKing</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://www.beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer><div id="needsharebutton-float"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css"><script src="/lib/needsharebutton/needsharebutton.js"></script><script>pbOptions={iconStyle:"box",boxForm:"horizontal",position:"bottomCenter",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-postbottom",pbOptions),flOptions={iconStyle:"box",boxForm:"horizontal",position:"topRight",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-float",flOptions)</script><script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  // window.livereOptions = {
  //   refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  // };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script></body></html>