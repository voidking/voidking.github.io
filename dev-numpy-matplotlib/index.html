<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="前言在进行机器学习时，经常用到两个库，numpy和matplotlib。 numpy(Numerical Python extensions)是一个第三方的Python包，用于科学计算。这个库的前身是1995年就开始开发的一个用于数组运算的库。经过了长时间的发展，基本上成了绝大部分Python科学计算的基础包，当然也包括所有提供Python接口的深度学习框架。 Matplotlib是Python中"><meta property="og:type" content="article"><meta property="og:title" content="Numpy和Matplotlib"><meta property="og:url" content="https://www.voidking.com/dev-numpy-matplotlib/index.html"><meta property="og:site_name" content="VoidKing"><meta property="og:description" content="前言在进行机器学习时，经常用到两个库，numpy和matplotlib。 numpy(Numerical Python extensions)是一个第三方的Python包，用于科学计算。这个库的前身是1995年就开始开发的一个用于数组运算的库。经过了长时间的发展，基本上成了绝大部分Python科学计算的基础包，当然也包括所有提供Python接口的深度学习框架。 Matplotlib是Python中"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2017-10-08T22:00:00.000Z"><meta property="article:modified_time" content="2020-03-12T07:37:57.796Z"><meta property="article:author" content="VoidKing"><meta property="article:tag" content="python"><meta property="article:tag" content="numpy"><meta property="article:tag" content="matplotlib"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-numpy-matplotlib/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>Numpy和Matplotlib | VoidKing</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="VoidKing" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">VoidKing</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">好好学习，天天向上！</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-numpy-matplotlib/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="VoidKing"><meta itemprop="description" content="学而不思则罔，思而不学则殆！"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="VoidKing"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> Numpy和Matplotlib</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2017-10-08 22:00:00" itemprop="dateCreated datePublished" datetime="2017-10-08T22:00:00+00:00">2017-10-08</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/" itemprop="url" rel="index"><span itemprop="name">专业</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">后端</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/%E5%90%8E%E7%AB%AF/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">机器学习</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在进行机器学习时，经常用到两个库，numpy和matplotlib。</p><p>numpy(Numerical Python extensions)是一个第三方的Python包，用于科学计算。这个库的前身是1995年就开始开发的一个用于数组运算的库。经过了长时间的发展，基本上成了绝大部分Python科学计算的基础包，当然也包括所有提供Python接口的深度学习框架。</p><p>Matplotlib是Python中最常用的可视化工具之一，可以非常方便地创建海量类型地2D图表和一些基本的3D图表。Matplotlib最早是为了可视化癫痫病人的脑皮层电图相关的信号而研发，因为在函数的设计上参考了MATLAB，所以叫做Matplotlib。</p><a id="more"></a><h1 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h1><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip <span class="keyword">install</span> numpy</span><br><span class="line">pip <span class="keyword">install</span> matplotlib</span><br></pre></td></tr></table></figure><h1 id="numpy"><a href="#numpy" class="headerlink" title="numpy"></a>numpy</h1><h2 id="基本类型（array）"><a href="#基本类型（array）" class="headerlink" title="基本类型（array）"></a>基本类型（array）</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">a = [1, 2, 5, 3, 4]</span><br><span class="line">b = np.array(a)</span><br><span class="line"></span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'a='</span>,a)</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'b='</span>,b)</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'type(a):'</span>,type(a))</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'type(b)'</span>,type(b))  </span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'b.dtype'</span>,b.dtype)</span><br><span class="line">b2 = b.astype(np.float32)</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'b2.dtype'</span>,b2.dtype)                   </span><br><span class="line"></span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'b.shape:'</span>, b.shape)                    </span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'b.argmax():'</span>,b.argmax())                  </span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'b.max():'</span>,b.max())                     </span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'b.mean():'</span>,b.mean())            </span><br><span class="line"></span><br><span class="line">c = [[1, 2], [3, 4]]    </span><br><span class="line">d = np.array(c)</span><br><span class="line"></span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'c='</span>,c)</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'d='</span>,d)</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'d.shape:'</span>,d.shape) </span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'d.size:'</span>,d.size)</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'d.max(axis=0):'</span>,d.max(<span class="attribute">axis</span>=0)) # 找列最大值</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'d.max(axis=1):'</span>,d.max(<span class="attribute">axis</span>=1)) # 找行最大值</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'d.mean(axis=0):'</span>,d.mean(<span class="attribute">axis</span>=0))  # 求列平均数      </span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'d.flatten():'</span>,d.flatten()) # 展开为一维数组</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'np.ravel(c)'</span>,np.ravel(c)) # 展开为一维数组</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3x3的浮点型2维数组，并且初始化所有元素值为1</span></span><br><span class="line">e = np.ones((3, 3), <span class="attribute">dtype</span>=np.float32)</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'e='</span>,e)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个一维数组，元素值是把3重复4次，array([3, 3, 3, 3])</span></span><br><span class="line">f = np.repeat(3, 4)</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'f='</span>,f)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2x2x3的无符号8位整型3维数组，并且初始化所有元素值为0</span></span><br><span class="line">g = np.zeros((2, 2, 3), <span class="attribute">dtype</span>=np.uint8)</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'g='</span>,g)</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'g.shape'</span>,g.shape)</span><br><span class="line"></span><br><span class="line">h = g.astype(np.float)  # 用另一种类型表示</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'h='</span>,h)</span><br><span class="line"></span><br><span class="line">l = np.arange(10)       # 类似range，array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'l='</span>,l)</span><br><span class="line"></span><br><span class="line">m = np.linspace(0, 6, 5)# 等差数列，0到6之间5个取值，array([ 0., 1.5, 3., 4.5, 6.])</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">'m'</span>,m)</span><br><span class="line"></span><br><span class="line">p = np.array(</span><br><span class="line">    [[1, 2, 3, 4],</span><br><span class="line">     [5, 6, 7, 8]]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">np.save(<span class="string">'p.npy'</span>, p)     # 保存到文件</span><br><span class="line">q = np.load(<span class="string">'p.npy'</span>)    # 从文件读取</span><br></pre></td></tr></table></figure><h2 id="array相关操作"><a href="#array相关操作" class="headerlink" title="array相关操作"></a>array相关操作</h2><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">'''</span><br><span class="line">array([[[ 0,  1,  2,  3],</span><br><span class="line"><span class="code">        [ 4,  5,  6,  7],</span></span><br><span class="line"><span class="code">        [ 8,  9, 10, 11]],</span></span><br><span class="line"></span><br><span class="line"><span class="code">       [[12, 13, 14, 15],</span></span><br><span class="line"><span class="code">        [16, 17, 18, 19],</span></span><br><span class="line"><span class="code">        [20, 21, 22, 23]]])</span></span><br><span class="line">'''</span><br><span class="line">a = np.arange(24).reshape((2, 3, 4))</span><br><span class="line">print(<span class="emphasis">'a='</span>,a)</span><br><span class="line">b = a[1][1][1]</span><br><span class="line">print(<span class="emphasis">'a[1][1][1]='</span>,b)</span><br><span class="line"></span><br><span class="line">'''</span><br><span class="line">array([[ 8,  9, 10, 11],</span><br><span class="line"><span class="code">       [20, 21, 22, 23]])</span></span><br><span class="line">'''</span><br><span class="line">c = a[:, 2, :]</span><br><span class="line">print(<span class="emphasis">'a[:, 2, :]='</span>,c)</span><br><span class="line"></span><br><span class="line">''' 用:表示当前维度上所有下标</span><br><span class="line">array([[ 1,  5,  9],</span><br><span class="line"><span class="code">       [13, 17, 21]])</span></span><br><span class="line">'''</span><br><span class="line">d = a[:, :, 1]</span><br><span class="line">print(<span class="emphasis">'a[:, :, 1]='</span>,d)</span><br><span class="line"></span><br><span class="line">''' 用...表示没有明确指出的维度</span><br><span class="line">array([[ 1,  5,  9],</span><br><span class="line"><span class="code">       [13, 17, 21]])</span></span><br><span class="line">'''</span><br><span class="line">e = a[..., 1]</span><br><span class="line">print(<span class="emphasis">'a[..., 1]='</span>,e)</span><br><span class="line"></span><br><span class="line">'''</span><br><span class="line">array([[[ 5,  6],</span><br><span class="line"><span class="code">        [ 9, 10]],</span></span><br><span class="line"></span><br><span class="line"><span class="code">       [[17, 18],</span></span><br><span class="line"><span class="code">        [21, 22]]])</span></span><br><span class="line">'''</span><br><span class="line">f = a[:, 1:, 1:-1]</span><br><span class="line">print(<span class="emphasis">'a[:, 1:, 1:-1]='</span>,f)</span><br><span class="line"></span><br><span class="line">'''</span><br><span class="line">平均分成3份</span><br><span class="line"><span class="meta">[array([0, 1, 2]), array([3, 4, 5]), array([6, 7, 8])]</span></span><br><span class="line">'''</span><br><span class="line">g = np.split(np.arange(9), 3)</span><br><span class="line">print(<span class="emphasis">'g='</span>,g)</span><br><span class="line"></span><br><span class="line">'''</span><br><span class="line">按照下标位置进行划分</span><br><span class="line"><span class="meta">[array([0, 1]), array([2, 3, 4, 5]), array([6, 7, 8])]</span></span><br><span class="line">'''</span><br><span class="line">h = np.split(np.arange(9), [2, -3])</span><br><span class="line">print(<span class="emphasis">'h='</span>,h)</span><br><span class="line"></span><br><span class="line">l<span class="emphasis">_0 = np.arange(6).reshape((2, 3))</span></span><br><span class="line"><span class="emphasis">l_</span>1 = np.arange(6, 12).reshape(2, 3)</span><br><span class="line">print(<span class="emphasis">'l_0='</span>,l<span class="emphasis">_0)</span></span><br><span class="line"><span class="emphasis">print('l_</span>1=<span class="emphasis">',l_1)</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">'</span>'<span class="emphasis">'</span></span><br><span class="line"><span class="emphasis">vstack是指沿着纵轴拼接两个array，vertical</span></span><br><span class="line"><span class="emphasis">hstack是指沿着横轴拼接两个array，horizontal</span></span><br><span class="line"><span class="emphasis">更广义的拼接用concatenate实现，horizontal后的两句依次等效于vstack和hstack</span></span><br><span class="line"><span class="emphasis">stack不是拼接而是在输入array的基础上增加一个新的维度</span></span><br><span class="line"><span class="emphasis">'</span>'<span class="emphasis">'</span></span><br><span class="line"><span class="emphasis">m = np.vstack((l_0, l_1))</span></span><br><span class="line"><span class="emphasis">p = np.hstack((l_0, l_1))</span></span><br><span class="line"><span class="emphasis">q = np.concatenate((l_0, l_1))</span></span><br><span class="line"><span class="emphasis">r = np.concatenate((l_0, l_1), axis=-1)</span></span><br><span class="line"><span class="emphasis">s = np.stack((l_0, l_1))</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">print('</span>np.vstack((l<span class="emphasis">_0, l_</span>1))=<span class="emphasis">',m)</span></span><br><span class="line"><span class="emphasis">print('</span>np.hstack((l<span class="emphasis">_0, l_</span>1))=<span class="emphasis">',p)</span></span><br><span class="line"><span class="emphasis">print('</span>np.concatenate((l<span class="emphasis">_0, l_</span>1))=<span class="emphasis">',q)</span></span><br><span class="line"><span class="emphasis">print('</span>np.concatenate((l<span class="emphasis">_0, l_</span>1), axis=-1) = <span class="emphasis">',r)</span></span><br><span class="line"><span class="emphasis">print('</span>np.stack((l<span class="emphasis">_0, l_</span>1)) = <span class="emphasis">',s)</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">'</span>'<span class="emphasis">'</span></span><br><span class="line"><span class="emphasis">按指定轴进行转置</span></span><br><span class="line"><span class="emphasis">array([[[ 0,  3],</span></span><br><span class="line"><span class="emphasis">        [ 6,  9]],</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">       [[ 1,  4],</span></span><br><span class="line"><span class="emphasis">        [ 7, 10]],</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">       [[ 2,  5],</span></span><br><span class="line"><span class="emphasis">        [ 8, 11]]])</span></span><br><span class="line"><span class="emphasis">'</span>'<span class="emphasis">'</span></span><br><span class="line"><span class="emphasis">t = s.transpose((2, 0, 1))</span></span><br><span class="line"><span class="emphasis">print('</span>s.transpose((2, 0, 1)) = <span class="emphasis">',t)</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">'</span>'<span class="emphasis">'</span></span><br><span class="line"><span class="emphasis">默认转置将维度倒序，对于2维就是横纵轴互换</span></span><br><span class="line"><span class="emphasis">array([[ 0,  4,  8],</span></span><br><span class="line"><span class="emphasis">       [ 1,  5,  9],</span></span><br><span class="line"><span class="emphasis">       [ 2,  6, 10],</span></span><br><span class="line"><span class="emphasis">       [ 3,  7, 11]])</span></span><br><span class="line"><span class="emphasis">'</span>'<span class="emphasis">'</span></span><br><span class="line"><span class="emphasis">u = a[0].transpose()    # 或者u=a[0].T也是获得转置</span></span><br><span class="line"><span class="emphasis">print('</span>u = a[0].transpose() = <span class="emphasis">',u)</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">'</span>'<span class="emphasis">'</span></span><br><span class="line"><span class="emphasis">逆时针旋转90度，第二个参数是旋转次数</span></span><br><span class="line"><span class="emphasis">array([[ 3,  2,  1,  0],</span></span><br><span class="line"><span class="emphasis">       [ 7,  6,  5,  4],</span></span><br><span class="line"><span class="emphasis">       [11, 10,  9,  8]])</span></span><br><span class="line"><span class="emphasis">'</span>'<span class="emphasis">'</span></span><br><span class="line"><span class="emphasis">v = np.rot90(u, 3)</span></span><br><span class="line"><span class="emphasis">print('</span>np.rot90(u, 3) = <span class="emphasis">',v)</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">'</span>'<span class="emphasis">'</span></span><br><span class="line"><span class="emphasis">沿纵轴左右翻转</span></span><br><span class="line"><span class="emphasis">array([[ 8,  4,  0],</span></span><br><span class="line"><span class="emphasis">       [ 9,  5,  1],</span></span><br><span class="line"><span class="emphasis">       [10,  6,  2],</span></span><br><span class="line"><span class="emphasis">       [11,  7,  3]])</span></span><br><span class="line"><span class="emphasis">'</span>'<span class="emphasis">'</span></span><br><span class="line"><span class="emphasis">w = np.fliplr(u)</span></span><br><span class="line"><span class="emphasis">print('</span>np.fliplr(u) = <span class="emphasis">',w)</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">'</span>'<span class="emphasis">'</span></span><br><span class="line"><span class="emphasis">沿水平轴上下翻转</span></span><br><span class="line"><span class="emphasis">array([[ 3,  7, 11],</span></span><br><span class="line"><span class="emphasis">       [ 2,  6, 10],</span></span><br><span class="line"><span class="emphasis">       [ 1,  5,  9],</span></span><br><span class="line"><span class="emphasis">       [ 0,  4,  8]])</span></span><br><span class="line"><span class="emphasis">'</span>'<span class="emphasis">'</span></span><br><span class="line"><span class="emphasis">x = np.flipud(u)</span></span><br><span class="line"><span class="emphasis">print('</span>np.flipud(u) = <span class="emphasis">',x)</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">'</span>'<span class="emphasis">'</span></span><br><span class="line"><span class="emphasis">按照一维顺序滚动位移</span></span><br><span class="line"><span class="emphasis">array([[11,  0,  4],</span></span><br><span class="line"><span class="emphasis">       [ 8,  1,  5],</span></span><br><span class="line"><span class="emphasis">       [ 9,  2,  6],</span></span><br><span class="line"><span class="emphasis">       [10,  3,  7]])</span></span><br><span class="line"><span class="emphasis">'</span>'<span class="emphasis">'</span></span><br><span class="line"><span class="emphasis">y = np.roll(u, 1)</span></span><br><span class="line"><span class="emphasis">print('</span>np.roll(u, 1)<span class="emphasis">', y)</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">'</span>'<span class="emphasis">'</span></span><br><span class="line"><span class="emphasis">按照指定轴滚动位移</span></span><br><span class="line"><span class="emphasis">array([[ 8,  0,  4],</span></span><br><span class="line"><span class="emphasis">       [ 9,  1,  5],</span></span><br><span class="line"><span class="emphasis">       [10,  2,  6],</span></span><br><span class="line"><span class="emphasis">       [11,  3,  7]])</span></span><br><span class="line"><span class="emphasis">'</span>'<span class="emphasis">'</span></span><br><span class="line"><span class="emphasis">z = np.roll(u, 1, axis=1)</span></span><br><span class="line"><span class="emphasis">print('</span>np.roll(u, 1, axis=1)<span class="emphasis">',z)</span></span><br></pre></td></tr></table></figure><h2 id="数学运算"><a href="#数学运算" class="headerlink" title="数学运算"></a>数学运算</h2><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy as np</span><br><span class="line"></span><br><span class="line"># 绝对值，<span class="number">1</span></span><br><span class="line">a = np.abs(<span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line"># sin函数，<span class="number">1.0</span></span><br><span class="line">b = np.sin(np.pi/<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"># tanh逆函数，<span class="number">0.50000107157840523</span></span><br><span class="line">c = np.arctanh(<span class="number">0.462118</span>)</span><br><span class="line"></span><br><span class="line"># e为底的指数函数，<span class="number">20.085536923187668</span></span><br><span class="line">d = np.exp(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"># <span class="number">2</span>的<span class="number">3</span>次方，<span class="number">8</span></span><br><span class="line">f = np.power(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"># 点积，<span class="number">1</span>*<span class="number">3</span>+<span class="number">2</span>*<span class="number">4</span>=<span class="number">11</span></span><br><span class="line">g = np.dot([<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"># 开方，<span class="number">5</span></span><br><span class="line">h = np.sqrt(<span class="number">25</span>)</span><br><span class="line"></span><br><span class="line"># 求和，<span class="number">10</span></span><br><span class="line">l = np.sum([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"># 平均值，<span class="number">5.5</span></span><br><span class="line">m = np.mean([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>])</span><br><span class="line"></span><br><span class="line"># 标准差，<span class="number">0.96824583655185426</span></span><br><span class="line">p = np.std([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">0</span>])</span><br></pre></td></tr></table></figure><h2 id="对位运算"><a href="#对位运算" class="headerlink" title="对位运算"></a>对位运算</h2><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">a = np.array([</span><br><span class="line"><span class="code">    [1, 2, 3],</span></span><br><span class="line"><span class="code">    [4, 5, 6]</span></span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">b = np.array([</span><br><span class="line"><span class="code">    [1, 2, 3],</span></span><br><span class="line"><span class="code">    [1, 2, 3]</span></span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">'''</span><br><span class="line">维度一样的array，对位计算</span><br><span class="line">array([[2, 4, 6],</span><br><span class="line"><span class="code">       [5, 7, 9]])</span></span><br><span class="line">'''</span><br><span class="line">a + b</span><br><span class="line"></span><br><span class="line">'''</span><br><span class="line">array([[0, 0, 0],</span><br><span class="line"><span class="code">       [3, 3, 3]])</span></span><br><span class="line">'''</span><br><span class="line">a - b</span><br><span class="line"></span><br><span class="line">'''</span><br><span class="line">array([[ 1,  4,  9],</span><br><span class="line"><span class="code">       [ 4, 10, 18]])</span></span><br><span class="line">'''</span><br><span class="line">a * b</span><br><span class="line"></span><br><span class="line">'''</span><br><span class="line">array([[1, 1, 1],</span><br><span class="line"><span class="code">       [4, 2, 2]])</span></span><br><span class="line">'''</span><br><span class="line">a / b</span><br><span class="line"></span><br><span class="line">'''</span><br><span class="line">array([[ 1,  4,  9],</span><br><span class="line"><span class="code">       [16, 25, 36]])</span></span><br><span class="line">'''</span><br><span class="line">a ** 2</span><br><span class="line"></span><br><span class="line">'''</span><br><span class="line">array([[  1,   4,  27],</span><br><span class="line"><span class="code">       [  4,  25, 216]])</span></span><br><span class="line">'''</span><br><span class="line">a ** b</span><br><span class="line"></span><br><span class="line">c = np.array([</span><br><span class="line"><span class="code">    [1, 2, 3],</span></span><br><span class="line"><span class="code">    [4, 5, 6],</span></span><br><span class="line"><span class="code">    [7, 8, 9],</span></span><br><span class="line"><span class="code">    [10, 11, 12]</span></span><br><span class="line">])</span><br><span class="line">d = np.array([2, 2, 2])</span><br><span class="line"></span><br><span class="line">'''</span><br><span class="line">广播机制让计算的表达式保持简洁</span><br><span class="line">d和c的每一行分别进行运算</span><br><span class="line">array([[ 3,  4,  5],</span><br><span class="line"><span class="code">       [ 6,  7,  8],</span></span><br><span class="line"><span class="code">       [ 9, 10, 11],</span></span><br><span class="line"><span class="code">       [12, 13, 14]])</span></span><br><span class="line">'''</span><br><span class="line">c + d</span><br><span class="line"></span><br><span class="line">'''</span><br><span class="line">array([[ 2,  4,  6],</span><br><span class="line"><span class="code">       [ 8, 10, 12],</span></span><br><span class="line"><span class="code">       [14, 16, 18],</span></span><br><span class="line"><span class="code">       [20, 22, 24]])</span></span><br><span class="line">'''</span><br><span class="line">c * d</span><br><span class="line"></span><br><span class="line">'''</span><br><span class="line">1和c的每个元素分别进行运算</span><br><span class="line">array([[ 0,  1,  2],</span><br><span class="line"><span class="code">       [ 3,  4,  5],</span></span><br><span class="line"><span class="code">       [ 6,  7,  8],</span></span><br><span class="line"><span class="code">       [ 9, 10, 11]])</span></span><br><span class="line">'''</span><br><span class="line">c - 1</span><br></pre></td></tr></table></figure><h2 id="线性代数模块（linalg）"><a href="#线性代数模块（linalg）" class="headerlink" title="线性代数模块（linalg）"></a>线性代数模块（linalg）</h2><p>在深度学习相关的数据处理和运算中，线性代数模块（linalg）是最常用的之一。结合numpy提供的基本函数，可以对向量，矩阵，或是说多维张量进行一些基本的运算。</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">a = np.array([3, 4])</span><br><span class="line">print(<span class="emphasis">'a='</span>,a)</span><br><span class="line"># 求范数，默认二范数，平方和开平方</span><br><span class="line">print(<span class="emphasis">'np.linalg.norm(a) = '</span>,np.linalg.norm(a))</span><br><span class="line"></span><br><span class="line"># 求范数，一范数，绝对值求和</span><br><span class="line">print(<span class="emphasis">'np.linalg.norm(a,ord=1) = '</span>,np.linalg.norm(a,ord=1))</span><br><span class="line"></span><br><span class="line"># 求范数，无穷范数，绝对值中的最大者</span><br><span class="line">print(<span class="emphasis">'np.linalg.norm(a,ord=np.inf) = '</span>,np.linalg.norm(a,ord=np.inf))</span><br><span class="line"></span><br><span class="line">b = np.array([</span><br><span class="line"><span class="code">    [1, 2, 3],</span></span><br><span class="line"><span class="code">    [4, 5, 6],</span></span><br><span class="line"><span class="code">    [7, 8, 9]</span></span><br><span class="line">])</span><br><span class="line">c = np.array([1, 0, 1])</span><br><span class="line"></span><br><span class="line"># 矩阵和向量之间的乘法</span><br><span class="line">np.dot(b, c)                    # array([ 4, 10, 16])</span><br><span class="line">np.dot(c, b.T)                  # array([ 4, 10, 16])</span><br><span class="line"></span><br><span class="line">np.trace(b)                     # 求矩阵的迹，15</span><br><span class="line">np.linalg.det(b)                # 求矩阵的行列式值，0</span><br><span class="line">np.linalg.matrix<span class="emphasis">_rank(b)    # 求矩阵的秩，2，不满秩，因为行与行之间等差</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">d = np.array([</span></span><br><span class="line"><span class="emphasis">    [2, 1],</span></span><br><span class="line"><span class="emphasis">    [1, 2]</span></span><br><span class="line"><span class="emphasis">])</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">'''</span></span><br><span class="line"><span class="emphasis">对正定矩阵求本征值和本征向量</span></span><br><span class="line"><span class="emphasis">本征值为u，array([ 3.,  1.])</span></span><br><span class="line"><span class="emphasis">本征向量构成的二维array为v，</span></span><br><span class="line"><span class="emphasis">array([[ 0.70710678, -0.70710678],</span></span><br><span class="line"><span class="emphasis">       [ 0.70710678,  0.70710678]])</span></span><br><span class="line"><span class="emphasis">是沿着45°方向</span></span><br><span class="line"><span class="emphasis">eig()是一般情况的本征值分解，对于更常见的对称实数矩阵，</span></span><br><span class="line"><span class="emphasis">eigh()更快且更稳定，不过输出的值的顺序和eig()是相反的</span></span><br><span class="line"><span class="emphasis">'''</span></span><br><span class="line"><span class="emphasis">u, v = np.linalg.eig(d)</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis"># Cholesky分解并重建</span></span><br><span class="line"><span class="emphasis">l = np.linalg.cholesky(d)</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">'''</span></span><br><span class="line"><span class="emphasis">array([[ 2.,  1.],</span></span><br><span class="line"><span class="emphasis">       [ 1.,  2.]])</span></span><br><span class="line"><span class="emphasis">'''</span></span><br><span class="line"><span class="emphasis">np.dot(l, l.T)</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">e = np.array([</span></span><br><span class="line"><span class="emphasis">    [1, 2],</span></span><br><span class="line"><span class="emphasis">    [3, 4]</span></span><br><span class="line"><span class="emphasis">])</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis"># 对不镇定矩阵，进行SVD分解并重建</span></span><br><span class="line"><span class="emphasis">U, s, V = np.linalg.svd(e)</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">S = np.array([</span></span><br><span class="line"><span class="emphasis">    [s[0], 0],</span></span><br><span class="line"><span class="emphasis">    [0, s[1]]</span></span><br><span class="line"><span class="emphasis">])</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">'''</span></span><br><span class="line"><span class="emphasis">array([[ 1.,  2.],</span></span><br><span class="line"><span class="emphasis">       [ 3.,  4.]])</span></span><br><span class="line"><span class="emphasis">'''</span></span><br><span class="line"><span class="emphasis">np.dot(U, np.dot(S, V))</span></span><br></pre></td></tr></table></figure><h2 id="随机模块（random）"><a href="#随机模块（random）" class="headerlink" title="随机模块（random）"></a>随机模块（random）</h2><p>随机模块包含了随机数产生和统计分布相关的基本函数，Python本身也有随机模块random，不过功能更丰富。</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">import numpy <span class="keyword">as</span> np</span><br><span class="line">import numpy.<span class="built_in">random</span> <span class="keyword">as</span> <span class="built_in">random</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置随机数种子，随机数确定</span></span><br><span class="line"><span class="built_in">random</span>.seed(<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'Random number with seed 42: '</span>, <span class="built_in">random</span>.<span class="built_in">random</span>())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 产生一个1x3，[0,1)之间的浮点型随机数</span></span><br><span class="line"><span class="comment"># array([[ 0.37454012,  0.95071431,  0.73199394]])</span></span><br><span class="line"><span class="comment"># 后面的例子就不在注释中给出具体结果了</span></span><br><span class="line">print(<span class="string">'random.rand(1, 3) = '</span>,<span class="built_in">random</span>.rand(<span class="number">1</span>, <span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 产生一个[0,1)之间的浮点型随机数</span></span><br><span class="line">print(<span class="string">'Random number with no seed: '</span>, <span class="built_in">random</span>.<span class="built_in">random</span>())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下边4个没有区别，都是按照指定大小产生[0,1)之间的浮点型随机数array，不Pythonic…</span></span><br><span class="line">print(<span class="string">'random.random((3, 3))='</span>,<span class="built_in">random</span>.<span class="built_in">random</span>((<span class="number">3</span>, <span class="number">3</span>)))</span><br><span class="line">print(<span class="string">'random.sample((3, 3))='</span>,<span class="built_in">random</span>.sample((<span class="number">3</span>, <span class="number">3</span>)))</span><br><span class="line">print(<span class="string">'random.random_sample((3, 3))='</span>,<span class="built_in">random</span>.random_sample((<span class="number">3</span>, <span class="number">3</span>)))</span><br><span class="line">print(<span class="string">'random.ranf((3, 3))='</span>,<span class="built_in">random</span>.ranf((<span class="number">3</span>, <span class="number">3</span>)))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 产生10个[1,6)之间的浮点型随机数</span></span><br><span class="line"><span class="number">5</span>*<span class="built_in">random</span>.<span class="built_in">random</span>(<span class="number">10</span>) + <span class="number">1</span></span><br><span class="line"><span class="built_in">random</span>.uniform(<span class="number">1</span>, <span class="number">6</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 产生10个[1,6)之间的整型随机数</span></span><br><span class="line"><span class="built_in">random</span>.randint(<span class="number">1</span>, <span class="number">6</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 产生2x5的标准正态分布样本</span></span><br><span class="line"><span class="built_in">result</span> = <span class="built_in">random</span>.<span class="keyword">normal</span>(size=(<span class="number">5</span>, <span class="number">2</span>))</span><br><span class="line">print(<span class="string">'random.normal(size=(5, 2))='</span>, <span class="built_in">result</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 产生5个，n=5，p=0.5的二项分布样本</span></span><br><span class="line"><span class="built_in">random</span>.binomial(n=<span class="number">5</span>, p=<span class="number">0.5</span>, size=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">a</span> = np.arange(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从a中有回放的随机采样7个</span></span><br><span class="line"><span class="built_in">random</span>.choice(<span class="keyword">a</span>, <span class="number">7</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从a中无回放的随机采样7个</span></span><br><span class="line"><span class="built_in">random</span>.choice(<span class="keyword">a</span>, <span class="number">7</span>, <span class="built_in">replace</span>=False)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对a进行乱序并返回一个新的array</span></span><br><span class="line">b = <span class="built_in">random</span>.permutation(<span class="keyword">a</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对a进行in-place乱序</span></span><br><span class="line"><span class="built_in">random</span>.shuffle(<span class="keyword">a</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成一个长度为9的随机bytes序列并作为str返回</span></span><br><span class="line"><span class="comment"># '\x96\x9d\xd1?\xe6\x18\xbb\x9a\xec'</span></span><br><span class="line"><span class="built_in">random</span>.<span class="keyword">bytes</span>(<span class="number">9</span>)</span><br></pre></td></tr></table></figure><h1 id="Matplotlib"><a href="#Matplotlib" class="headerlink" title="Matplotlib"></a>Matplotlib</h1><h2 id="2D图表"><a href="#2D图表" class="headerlink" title="2D图表"></a>2D图表</h2><p>Matplotlib中最基础的模块是pyplot。先从最简单的点图和线图开始，比如我们有一组数据，还有一个拟合模型，通过下面的代码图来可视化：</p><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import matplotlib as mpl</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line"></span><br><span class="line"><span class="meta"># 通过rcParams设置全局横纵轴字体大小</span></span><br><span class="line">mpl.rcParams[<span class="string">'xtick.labelsize'</span>] = <span class="number">24</span></span><br><span class="line">mpl.rcParams[<span class="string">'ytick.labelsize'</span>] = <span class="number">24</span></span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta"># x轴的采样点</span></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">5</span>, <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta"># 通过下面曲线加上噪声生成数据，所以拟合模型就用y了……</span></span><br><span class="line">y = <span class="number">2</span>*np.sin(x) + <span class="number">0.3</span>*x**<span class="number">2</span></span><br><span class="line">y_data = y + np.random.normal(scale=<span class="number">0.3</span>, size=<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta"># figure()指定图表名称</span></span><br><span class="line">plt.figure(<span class="string">'data'</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta"># '.'标明画散点图，每个散点的形状是个圆</span></span><br><span class="line">plt.plot(x, y_data, <span class="string">'.'</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta"># 画模型的图，plot函数默认画连线图</span></span><br><span class="line">plt.figure(<span class="string">'model'</span>)</span><br><span class="line">plt.plot(x, y)</span><br><span class="line"></span><br><span class="line"><span class="meta"># 两个图画一起</span></span><br><span class="line">plt.figure(<span class="string">'data &amp; model'</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta"># 通过'k'指定线的颜色，lw指定线的宽度</span></span><br><span class="line"><span class="meta"># 第三个参数除了颜色也可以指定线形，比如'r--'表示红色虚线</span></span><br><span class="line"><span class="meta"># 更多属性可以参考官网：http://matplotlib.org/api/pyplot_api.html</span></span><br><span class="line">plt.plot(x, y, <span class="string">'k'</span>, lw=<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta"># scatter可以更容易地生成散点图</span></span><br><span class="line">plt.scatter(x, y_data)</span><br><span class="line"></span><br><span class="line"><span class="meta"># 将当前figure的图保存到文件result.png</span></span><br><span class="line">plt.savefig(<span class="string">'result.png'</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta"># 一定要加上这句才能让画好的图显示在屏幕上</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="对比图表"><a href="#对比图表" class="headerlink" title="对比图表"></a>对比图表</h2><p>点和线图表只是最基本的用法，有的时候我们获取了分组数据要做对比，柱状或饼状类型的图或许更合适。</p><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import matplotlib as mpl</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line"></span><br><span class="line">mpl.rcParams[<span class="string">'axes.titlesize'</span>] = <span class="number">20</span></span><br><span class="line">mpl.rcParams[<span class="string">'xtick.labelsize'</span>] = <span class="number">16</span></span><br><span class="line">mpl.rcParams[<span class="string">'ytick.labelsize'</span>] = <span class="number">16</span></span><br><span class="line">mpl.rcParams[<span class="string">'axes.labelsize'</span>] = <span class="number">16</span></span><br><span class="line">mpl.rcParams[<span class="string">'xtick.major.size'</span>] = <span class="number">0</span></span><br><span class="line">mpl.rcParams[<span class="string">'ytick.major.size'</span>] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># 包含了狗，猫和猎豹的最高奔跑速度，还有对应的可视化颜色</span></span><br><span class="line">speed_map = &#123;</span><br><span class="line">    <span class="string">'dog'</span>: (<span class="number">48</span>, <span class="string">'#7199cf'</span>),</span><br><span class="line">    <span class="string">'cat'</span>: (<span class="number">45</span>, <span class="string">'#4fc4aa'</span>),</span><br><span class="line">    <span class="string">'cheetah'</span>: (<span class="number">120</span>, <span class="string">'#e1a7a2'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta"># 整体图的标题</span></span><br><span class="line">fig = plt.figure(<span class="string">'Bar chart &amp; Pie chart'</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta"># 在整张图上加入一个子图，121的意思是在一个1行2列的子图中的第一张</span></span><br><span class="line">ax = fig.add_subplot(<span class="number">121</span>)</span><br><span class="line">ax.set_title(<span class="string">'Running speed - bar chart'</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta"># 生成x轴每个元素的位置</span></span><br><span class="line">xticks = np.arange(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta"># 定义柱状图每个柱的宽度</span></span><br><span class="line">bar_width = <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># 动物名称</span></span><br><span class="line">animals = speed_map.keys()</span><br><span class="line"></span><br><span class="line"><span class="meta"># 奔跑速度</span></span><br><span class="line">speeds = [x[<span class="number">0</span>] <span class="keyword">for</span> x in speed_map.values()]</span><br><span class="line"></span><br><span class="line"><span class="meta"># 对应颜色</span></span><br><span class="line">colors = [x[<span class="number">1</span>] <span class="keyword">for</span> x in speed_map.values()]</span><br><span class="line"></span><br><span class="line"><span class="meta"># 画柱状图，横轴是动物标签的位置，纵轴是速度，定义柱的宽度，同时设置柱的边缘为透明</span></span><br><span class="line">bars = ax.bar(xticks, speeds, width=bar_width, edgecolor=<span class="string">'none'</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta"># 设置y轴的标题</span></span><br><span class="line">ax.set_ylabel(<span class="string">'Speed(km/h)'</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta"># x轴每个标签的具体位置，设置为每个柱的中央</span></span><br><span class="line">ax.set_xticks(xticks+bar_width/<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta"># 设置每个标签的名字</span></span><br><span class="line">ax.set_xticklabels(animals)</span><br><span class="line"></span><br><span class="line"><span class="meta"># 设置x轴的范围</span></span><br><span class="line">ax.set_xlim([bar_width/<span class="number">2</span><span class="number">-0.5</span>, <span class="number">3</span>-bar_width/<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta"># 设置y轴的范围</span></span><br><span class="line">ax.set_ylim([<span class="number">0</span>, <span class="number">125</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta"># 给每个bar分配指定的颜色</span></span><br><span class="line"><span class="keyword">for</span> bar, color in zip(bars, colors):</span><br><span class="line">    bar.set_color(color)</span><br><span class="line"></span><br><span class="line"><span class="meta"># 在122位置加入新的图</span></span><br><span class="line">ax = fig.add_subplot(<span class="number">122</span>)</span><br><span class="line">ax.set_title(<span class="string">'Running speed - pie chart'</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta"># 生成同时包含名称和速度的标签</span></span><br><span class="line">labels = [<span class="string">'&#123;&#125;\n&#123;&#125; km/h'</span>.format(animal, speed) <span class="keyword">for</span> animal, speed in zip(animals, speeds)]</span><br><span class="line"></span><br><span class="line"><span class="meta"># 画饼状图，并指定标签和对应颜色</span></span><br><span class="line">ax.pie(speeds, labels=labels, colors=colors)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>在Matplotlib中，画图时有两个常用概念，一个是平时画图蹦出的一个窗口，这叫一个figure。Figure相当于一个大的画布，在每个figure中，又可以存在多个子图，这种子图叫做axes。顾名思义，有了横纵轴就是一幅简单的图表。在上面代码中，先把figure定义成了一个一行两列的大画布，然后通过fig.add_subplot()加入两个新的子图。subplot的定义格式很有趣，数字的前两位分别定义行数和列数，最后一位定义新加入子图的所处顺序，当然想写明确些也没问题，用逗号分开即可。</p><h2 id="3D图表"><a href="#3D图表" class="headerlink" title="3D图表"></a>3D图表</h2><p>Matplotlib中也能支持一些基础的3D图表，比如曲面图，散点图和柱状图。这些3D图表需要使用mpl_toolkits模块。<br>1、访问 <a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/" target="_blank" rel="noopener">Unofficial Windows Binaries for Python Extension Packages</a>，下载两个文件：</p><ul><li>pyproj-1.9.5.1-cp36-cp36m-win_amd64.whl</li><li>basemap-1.1.0-cp36-cp36m-win_amd64.whl</li></ul><p>2、假设下载到了D盘下，那么在D盘下打开命令行，执行</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">pip</span> <span class="selector-tag">install</span> <span class="selector-tag">pyproj-1</span><span class="selector-class">.9</span><span class="selector-class">.5</span><span class="selector-class">.1-cp36-cp36m-win_amd64</span><span class="selector-class">.whl</span></span><br><span class="line"><span class="selector-tag">pip</span> <span class="selector-tag">install</span> <span class="selector-tag">basemap-1</span><span class="selector-class">.1</span><span class="selector-class">.0-cp36-cp36m-win_amd64</span><span class="selector-class">.whl</span></span><br></pre></td></tr></table></figure><p>ps：相关pip命令<br><code>pip list</code>，查看安装列表<br><code>pip uninstall package_name</code>，删除包</p><p>3、示例代码</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot as plt</span><br><span class="line"><span class="keyword">import</span> numpy as np</span><br><span class="line"></span><br><span class="line"># <span class="number">3</span>D图标必须的模块，project=<span class="string">'3d'</span>的定义</span><br><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> Axes3D     </span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line">n_grids = <span class="number">51</span>            # x-y平面的格点数 </span><br><span class="line">c = n_grids / <span class="number">2</span>         # 中心位置</span><br><span class="line">nf = <span class="number">2</span>                  # 低频成分的个数</span><br><span class="line"></span><br><span class="line"># 生成格点</span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">1</span>, n_grids)</span><br><span class="line">y = np.linspace(<span class="number">0</span>, <span class="number">1</span>, n_grids)</span><br><span class="line"></span><br><span class="line"># x和y是长度为n_grids的<span class="built_in">array</span></span><br><span class="line"># meshgrid会把x和y组合成n_grids*n_grids的<span class="built_in">array</span>，X和Y对应位置就是所有格点的坐标</span><br><span class="line">X, Y = np.meshgrid(x, y)</span><br><span class="line"></span><br><span class="line"># 生成一个<span class="number">0</span>值的傅里叶谱</span><br><span class="line">spectrum = np.zeros((n_grids, n_grids), dtype=np.complex)</span><br><span class="line"></span><br><span class="line"># 生成一段噪音，长度是(<span class="number">2</span>*nf+<span class="number">1</span>)**<span class="number">2</span>/<span class="number">2</span></span><br><span class="line">noise = [np.complex(x, y) <span class="keyword">for</span> x, y <span class="keyword">in</span> np.random.uniform(<span class="number">-1</span>,<span class="number">1</span>,((<span class="number">2</span>*nf+<span class="number">1</span>)**<span class="number">2</span>/<span class="number">2</span>, <span class="number">2</span>))]</span><br><span class="line"></span><br><span class="line"># 傅里叶频谱的每一项和其共轭关于中心对称</span><br><span class="line">noisy_block = np.concatenate((noise, [<span class="number">0</span>j], np.conjugate(noise[::<span class="number">-1</span>])))</span><br><span class="line"></span><br><span class="line"># 将生成的频谱作为低频成分</span><br><span class="line">spectrum[c-nf:c+nf+<span class="number">1</span>, c-nf:c+nf+<span class="number">1</span>] = noisy_block.reshape((<span class="number">2</span>*nf+<span class="number">1</span>, <span class="number">2</span>*nf+<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"># 进行反傅里叶变换</span><br><span class="line">Z = np.real(np.fft.ifft2(np.fft.ifftshift(spectrum)))</span><br><span class="line"></span><br><span class="line"># 创建图表</span><br><span class="line">fig = plt.figure(<span class="string">'3D surface &amp; wire'</span>)</span><br><span class="line"></span><br><span class="line"># 第一个子图，surface图</span><br><span class="line">ax = fig.add_subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, projection=<span class="string">'3d'</span>)</span><br><span class="line"></span><br><span class="line"># alpha定义透明度，cmap是color map</span><br><span class="line"># rstride和cstride是两个方向上的采样，越小越精细，lw是线宽</span><br><span class="line">ax.plot_surface(X, Y, Z, alpha=<span class="number">0.7</span>, cmap=<span class="string">'jet'</span>, rstride=<span class="number">1</span>, cstride=<span class="number">1</span>, lw=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"># 第二个子图，网线图</span><br><span class="line">ax = fig.add_subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, projection=<span class="string">'3d'</span>)</span><br><span class="line">ax.plot_wireframe(X, Y, Z, rstride=<span class="number">3</span>, cstride=<span class="number">3</span>, lw=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="3D散点图"><a href="#3D散点图" class="headerlink" title="3D散点图"></a>3D散点图</h2><p>3D的散点图也是常常用来查看空间样本分布的一种手段，并且画起来比表面图和网线图更加简单。</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot as plt</span><br><span class="line"><span class="keyword">import</span> numpy as np</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> Axes3D</span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line"># 采样个数<span class="number">500</span></span><br><span class="line">n_samples = <span class="number">500</span></span><br><span class="line">dim = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"># 先生成一组<span class="number">3</span>维正态分布数据，数据方向完全随机</span><br><span class="line">samples = np.random.multivariate_normal(</span><br><span class="line">    np.zeros(dim),</span><br><span class="line">    np.eye(dim),</span><br><span class="line">    n_samples</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># 通过把每个样本到原点距离和均匀分布吻合得到球体内均匀分布的样本</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(samples.shape[<span class="number">0</span>]):</span><br><span class="line">    r = np.power(np.random.random(), <span class="number">1.0</span>/<span class="number">3.0</span>)</span><br><span class="line">    samples[i] *= r / np.linalg.norm(samples[i])</span><br><span class="line"></span><br><span class="line">upper_samples = []</span><br><span class="line">lower_samples = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x, y, z <span class="keyword">in</span> samples:</span><br><span class="line">    # <span class="number">3</span>x+<span class="number">2</span>y-z=<span class="number">1</span>作为判别平面</span><br><span class="line">    <span class="keyword">if</span> z &gt; <span class="number">3</span>*x + <span class="number">2</span>*y - <span class="number">1</span>:</span><br><span class="line">        upper_samples.append((x, y, z))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        lower_samples.append((x, y, z))</span><br><span class="line"></span><br><span class="line">fig = plt.figure(<span class="string">'3D scatter plot'</span>)</span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>, projection=<span class="string">'3d'</span>)</span><br><span class="line"></span><br><span class="line">uppers = np.<span class="built_in">array</span>(upper_samples)</span><br><span class="line">lowers = np.<span class="built_in">array</span>(lower_samples)</span><br><span class="line"></span><br><span class="line"># 用不同颜色不同形状的图标表示平面上下的样本</span><br><span class="line"># 判别平面上半部分为红色圆点，下半部分为绿色三角</span><br><span class="line">ax.scatter(uppers[:, <span class="number">0</span>], uppers[:, <span class="number">1</span>], uppers[:, <span class="number">2</span>], c=<span class="string">'r'</span>, marker=<span class="string">'o'</span>)</span><br><span class="line">ax.scatter(lowers[:, <span class="number">0</span>], lowers[:, <span class="number">1</span>], lowers[:, <span class="number">2</span>], c=<span class="string">'g'</span>, marker=<span class="string">'^'</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="图像显示"><a href="#图像显示" class="headerlink" title="图像显示"></a>图像显示</h2><p>Matplotlib也支持图像的存取和显示，并且和OpenCV一类的接口比起来，对于一般的二维矩阵的可视化要方便很多。</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">import</span> matplotlib.pyplot as plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取图片并显示</span></span><br><span class="line">plt.figure('A image')</span><br><span class="line"><span class="attr">result_img</span> = plt.imread('result.png')</span><br><span class="line">plt.imshow(result_img)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Z是上小节生成的随机图案，img0就是Z，img1是Z做了个简单的变换</span></span><br><span class="line"><span class="attr">img0</span> = Z</span><br><span class="line"><span class="attr">img1</span> = <span class="number">3</span>*Z + <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cmap指定为'gray'用来显示灰度图</span></span><br><span class="line"><span class="attr">fig</span> = plt.figure('Auto Normalized Visualization')</span><br><span class="line"><span class="attr">ax0</span> = fig.add_subplot(<span class="number">121</span>)</span><br><span class="line">ax0.imshow(img0, <span class="attr">cmap='gray')</span></span><br><span class="line"></span><br><span class="line"><span class="attr">ax1</span> = fig.add_subplot(<span class="number">122</span>)</span><br><span class="line">ax1.imshow(img1, <span class="attr">cmap='gray')</span></span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>这段代码中第一个例子是读取一个本地图片并显示，第二个例子中直接把上小节中反傅里叶变换生成的矩阵作为图像拿过来，原图和经过乘以3再加4变换的图直接绘制了两个形状一样，但是值的范围不一样的图案。显示的时候imshow会自动进行归一化，把最亮的值显示为纯白，最暗的值显示为纯黑。这是一种非常方便的设定，尤其是查看深度学习中某个卷积层的响应图时。</p><h1 id="源码分享"><a href="#源码分享" class="headerlink" title="源码分享"></a>源码分享</h1><p><a href="https://github.com/voidking/udacity-python/tree/master/numpy" target="_blank" rel="noopener">https://github.com/voidking/udacity-python/tree/master/numpy</a></p><p><a href="https://github.com/voidking/udacity-python/tree/master/matplotlib" target="_blank" rel="noopener">https://github.com/voidking/udacity-python/tree/master/matplotlib</a></p><h1 id="书签"><a href="#书签" class="headerlink" title="书签"></a>书签</h1><p><a href="https://zhuanlan.zhihu.com/p/24162430" target="_blank" rel="noopener">给深度学习入门者的Python快速教程 - 基础篇</a><br><a href="https://zhuanlan.zhihu.com/p/24309547" target="_blank" rel="noopener">给深度学习入门者的Python快速教程 - numpy和Matplotlib篇</a><br><a href="http://www.cnblogs.com/LeftNotEasy/archive/svd-and-applications.html" target="_blank" rel="noopener">机器学习中的数学(5)-强大的矩阵奇异值分解(SVD)及其应用</a></p></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/python/" rel="tag"># python</a> <a href="/tags/numpy/" rel="tag"># numpy</a> <a href="/tags/matplotlib/" rel="tag"># matplotlib</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-app-login-qq-sina/" rel="prev" title="APP第三方登录QQ和微博配置"><i class="fa fa-chevron-left"></i> APP第三方登录QQ和微博配置</a></div><div class="post-nav-item"> <a href="/dev-tensorflow-start/" rel="next" title="tensorflow入门">tensorflow入门<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zODU3Mi8xNTEwMA=="></div></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#准备"><span class="nav-number">2.</span> <span class="nav-text">准备</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#numpy"><span class="nav-number">3.</span> <span class="nav-text">numpy</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#基本类型（array）"><span class="nav-number">3.1.</span> <span class="nav-text">基本类型（array）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#array相关操作"><span class="nav-number">3.2.</span> <span class="nav-text">array相关操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数学运算"><span class="nav-number">3.3.</span> <span class="nav-text">数学运算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对位运算"><span class="nav-number">3.4.</span> <span class="nav-text">对位运算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#线性代数模块（linalg）"><span class="nav-number">3.5.</span> <span class="nav-text">线性代数模块（linalg）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#随机模块（random）"><span class="nav-number">3.6.</span> <span class="nav-text">随机模块（random）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Matplotlib"><span class="nav-number">4.</span> <span class="nav-text">Matplotlib</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2D图表"><span class="nav-number">4.1.</span> <span class="nav-text">2D图表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对比图表"><span class="nav-number">4.2.</span> <span class="nav-text">对比图表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3D图表"><span class="nav-number">4.3.</span> <span class="nav-text">3D图表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3D散点图"><span class="nav-number">4.4.</span> <span class="nav-text">3D散点图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#图像显示"><span class="nav-number">4.5.</span> <span class="nav-text">图像显示</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#源码分享"><span class="nav-number">5.</span> <span class="nav-text">源码分享</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#书签"><span class="nav-number">6.</span> <span class="nav-text">书签</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="VoidKing" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">VoidKing</p><div class="site-description" itemprop="description">学而不思则罔，思而不学则殆！</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">588</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">40</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">190</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://twitter.com/voidking_com" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;voidking_com" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i> Twitter</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">VoidKing</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://www.beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer><div id="needsharebutton-float"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css"><script src="/lib/needsharebutton/needsharebutton.js"></script><script>pbOptions={iconStyle:"box",boxForm:"horizontal",position:"bottomCenter",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-postbottom",pbOptions),flOptions={iconStyle:"box",boxForm:"horizontal",position:"topRight",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-float",flOptions)</script><script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  // window.livereOptions = {
  //   refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  // };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script></body></html>