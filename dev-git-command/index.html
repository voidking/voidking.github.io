<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="前言学习工作中，越来越习惯使用git，本文记录一下常用的git命令，方便以后查阅。"><meta property="og:type" content="article"><meta property="og:title" content="常用git命令"><meta property="og:url" content="https://www.voidking.com/dev-git-command/index.html"><meta property="og:site_name" content="VoidKing"><meta property="og:description" content="前言学习工作中，越来越习惯使用git，本文记录一下常用的git命令，方便以后查阅。"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2015-07-21T09:00:00.000Z"><meta property="article:modified_time" content="2020-02-10T04:21:52.746Z"><meta property="article:author" content="VoidKing"><meta property="article:tag" content="git"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-git-command/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>常用git命令 | VoidKing</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="VoidKing" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">VoidKing</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">好好学习，天天向上！</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-git-command/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="VoidKing"><meta itemprop="description" content="学而不思则罔，思而不学则殆！"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="VoidKing"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> 常用git命令</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2015-07-21 09:00:00" itemprop="dateCreated datePublished" datetime="2015-07-21T09:00:00+00:00">2015-07-21</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/" itemprop="url" rel="index"><span itemprop="name">专业</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>学习工作中，越来越习惯使用git，本文记录一下常用的git命令，方便以后查阅。</p><a id="more"></a><h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>1、全局配置</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git<span class="built_in"> config </span>--list</span><br><span class="line">git<span class="built_in"> config </span>--global user.name <span class="string">"voidking"</span></span><br><span class="line">git<span class="built_in"> config </span>--global user.email <span class="string">"voidking@qq.com"</span></span><br></pre></td></tr></table></figure><p>2、生成ssh密钥<br><code>ssh-keygen -t rsa -C &quot;voidking@qq.com&quot;</code>，按3个回车，密码为空。</p><p>在<code>C:\Users\Administrator\.ssh</code>下，得到两个文件id_rsa和id_rsa.pub。<br>需要注意的是，命令中的-C参数，后面跟的内容是注释。也就是说，内容随意，与github完全无关。</p><p>3、在GitHub上添加SSH密钥<br>打开id_rsa.pub，复制全文。<a href="https://github.com/settings/ssh" target="_blank" rel="noopener">https://github.com/settings/ssh</a> ，Add SSH key，粘贴进去。</p><p>4、测试<br><code>ssh git@github.com</code>，提示：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">The authenticity of host <span class="string">'github.com (192.30.252.128)'</span> can<span class="string">'t be established.</span></span><br><span class="line"><span class="string">RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no)? yes</span></span><br><span class="line"><span class="string">Warning: Permanently added '</span>github.com,192.30.252.128<span class="string">' (RSA) to the list of known hosts.</span></span><br><span class="line"><span class="string">Hi voidking! You'</span>ve successfully authenticated, but GitHub does <span class="keyword">not</span> provide shell access.</span><br><span class="line">Connection <span class="keyword">to</span> github.com closed.</span><br></pre></td></tr></table></figure><h1 id="下载项目"><a href="#下载项目" class="headerlink" title="下载项目"></a>下载项目</h1><h2 id="克隆项目"><a href="#克隆项目" class="headerlink" title="克隆项目"></a>克隆项目</h2><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 普通克隆</span></span><br><span class="line">git <span class="keyword">clone</span> <span class="title">https</span>://github.com/voidking/voidking.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 克隆并重命名为vk</span></span><br><span class="line">git <span class="keyword">clone</span> <span class="title">https</span>://github.com/voidking/voidking.git vk</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用access token克隆项目</span></span><br><span class="line">git <span class="keyword">clone</span> <span class="title">https</span>://<span class="tag">&lt;gh_token&gt;</span>@github.com/voidking/voidking.git</span><br></pre></td></tr></table></figure><p>PS：下载失败问题解决 SSL certificate problem</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git<span class="built_in"> config </span>--global http.sslVerify <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="开启代理"><a href="#开启代理" class="headerlink" title="开启代理"></a>开启代理</h2><p>如果克隆项目特别慢，自己又有科学上网的ssr，那么可以开启代理。</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git<span class="built_in"> config </span>--global http.proxy <span class="string">'socks5://127.0.0.1:1080'</span> </span><br><span class="line">git<span class="built_in"> config </span>--global https.proxy <span class="string">'socks5://127.0.0.1:1080'</span></span><br></pre></td></tr></table></figure><h2 id="拉取项目"><a href="#拉取项目" class="headerlink" title="拉取项目"></a>拉取项目</h2><p><code>.git/config</code>文件里，配置了remote和branch，以下为例。</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[core]</span><br><span class="line">	<span class="attr">repositoryformatversion</span> = <span class="number">0</span></span><br><span class="line">	<span class="attr">filemode</span> = <span class="literal">false</span></span><br><span class="line">	<span class="attr">bare</span> = <span class="literal">false</span></span><br><span class="line">	<span class="attr">logallrefupdates</span> = <span class="literal">true</span></span><br><span class="line">	<span class="attr">symlinks</span> = <span class="literal">false</span></span><br><span class="line">	<span class="attr">ignorecase</span> = <span class="literal">true</span></span><br><span class="line">[remote <span class="string">"origin"</span>]</span><br><span class="line">	<span class="attr">url</span> = https://github.com/voidking/voidking.git</span><br><span class="line">	<span class="attr">fetch</span> = +refs/heads<span class="comment">/*:refs/remotes/origin/*</span></span><br><span class="line"><span class="comment">[branch "master"]</span></span><br><span class="line"><span class="comment">	remote = origin</span></span><br><span class="line"><span class="comment">	merge = refs/heads/master</span></span><br></pre></td></tr></table></figure><p>拉取项目的时候，会根据这个配置来拉取。</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看本地分支追踪的远程分支</span></span><br><span class="line"><span class="comment"># 一个本地分支可以追踪多个远程分支</span></span><br><span class="line"><span class="attr">git</span> <span class="string">branch -vv</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 格式说明</span></span><br><span class="line"><span class="attr">git</span> <span class="string">pull &lt;远程仓库名&gt; &lt;远程分支名&gt;:&lt;本地分支名&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 拉取当前分支追踪的唯一远程分支</span></span><br><span class="line"><span class="attr">git</span> <span class="string">pull</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 拉取当前分支追踪的origin/master分支</span></span><br><span class="line"><span class="attr">git</span> <span class="string">pull origin master</span></span><br><span class="line"><span class="attr">git</span> <span class="string">pull origin</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 拉取remote origin的next分支，与本地master合并</span></span><br><span class="line"><span class="attr">git</span> <span class="string">pull origin next:master</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 拉取origin主机的next分支，与当前分支合并</span></span><br><span class="line"><span class="attr">git</span> <span class="string">pull origin next</span></span><br></pre></td></tr></table></figure><h2 id="切换分支"><a href="#切换分支" class="headerlink" title="切换分支"></a>切换分支</h2><p>1、查看分支</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">git</span> <span class="keyword">branch </span>-a</span><br></pre></td></tr></table></figure><p>2、切换分支和新建分支</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 切换远程分支</span></span><br><span class="line">git checkout origin/branch_name</span><br><span class="line"></span><br><span class="line"><span class="meta"># 新建与当前分支相同的分支</span></span><br><span class="line">git checkout -b <span class="keyword">new</span><span class="type">_branch</span></span><br><span class="line"><span class="type"></span></span><br><span class="line"><span class="type"></span># 新建与远程分支相同的分支</span><br><span class="line">git checkout -b <span class="keyword">new</span><span class="type">_branch</span> origin/branch_name</span><br></pre></td></tr></table></figure><h1 id="上传项目"><a href="#上传项目" class="headerlink" title="上传项目"></a>上传项目</h1><h2 id="上传分支"><a href="#上传分支" class="headerlink" title="上传分支"></a>上传分支</h2><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 提交代码</span></span><br><span class="line">git <span class="keyword">add</span> .</span><br><span class="line">git commit -m <span class="string">"something"</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># 格式说明</span></span><br><span class="line">git <span class="keyword">push</span> &lt;远程仓库名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta"># 上传代码到唯一远程追踪分支</span></span><br><span class="line">git <span class="keyword">push</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># 上传到指定远程追踪分支</span></span><br><span class="line">git <span class="keyword">push</span> origin HEAD:branch_name</span><br></pre></td></tr></table></figure><h2 id="修改commit-message"><a href="#修改commit-message" class="headerlink" title="修改commit message"></a>修改commit message</h2><p><code>git commit -m &quot;something&quot;</code>，之后，想要修改“something”为“something_new”。</p><p>使用<code>git commit --amend</code>，可以修改最后一次commit的附加信息。</p><h2 id="查看日志"><a href="#查看日志" class="headerlink" title="查看日志"></a>查看日志</h2><p>使用<code>git log</code>，只可以查看到当前分支的commit日志，而且不能查看已经删除了的commit操作。</p><p>若要查看全局日志，需要使用<code>git reflog</code>或者<code>git log -g</code>，可以查看所有分支的所有操作记录，包括reset操作、checkout操作、已经删除了的commit操作等等。</p><h1 id="免密下载上传"><a href="#免密下载上传" class="headerlink" title="免密下载上传"></a>免密下载上传</h1><p>1、开启密码记录<br><code>git config --global credential.helper store</code><br>用户家目录下的 .gitconfig 文件末尾会添加：</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">credential</span>]</span><br><span class="line">	helper = store</span><br></pre></td></tr></table></figure><p>2、记住密码<br>再次使用git密码，系统就会记住用户的git密码，存储在用户家目录下的 .git-credentials 文件中。之后就不再需要输入git密码了。</p><h1 id="版本回退"><a href="#版本回退" class="headerlink" title="版本回退"></a>版本回退</h1><p>版本回退常用<code>git reset</code>和<code>git revert</code>命令，这两个命令都是作用于当前分支（HEAD所在的分支）。<code>git reset</code> 是把HEAD向后移动了一下，而<code>git revert</code>是HEAD继续前进，只是新的commit的内容和要revert的内容正好相反，能够抵消要被revert的内容。</p><h2 id="reset"><a href="#reset" class="headerlink" title="reset"></a>reset</h2><p>1、每个文件单独版本回退</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">git</span> <span class="string">status</span></span><br><span class="line"><span class="attr">git</span> <span class="string">log</span></span><br><span class="line"><span class="attr">git</span> <span class="string">reset  1fe37e1bcbb894a1b594cf405ae31880cbaa6cd7 filepath/filename</span></span><br><span class="line"><span class="attr">git</span> <span class="string">checkout filepath/filename</span></span><br></pre></td></tr></table></figure><p>2、全部文件版本回退</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset <span class="params">--hard</span> 1fe37e1bcbb894a1b594cf405ae31880cbaa6<span class="keyword">cd</span>7</span><br></pre></td></tr></table></figure><p>3、远程仓库回退</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git reset <span class="params">--hard</span> 1fe37e1bcbb894a1b594cf405ae31880cbaa6<span class="keyword">cd</span>7</span><br><span class="line">git push -f</span><br></pre></td></tr></table></figure><p>4、回退后回退<br>reset后，回退版本之后的commit操作记录，都被删除掉了。<br>如果回退过之后又后悔了，那么，需要查看全局日志，然后再次执行reset操作。</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git reflog</span><br><span class="line">git <span class="keyword">reset</span> a246dcd <span class="comment">--hard</span></span><br></pre></td></tr></table></figure><p>需要注意的是，版本回退，我们没有使用<code>git checkout</code>。<br>假设当前在bugFix分支，使用<code>git checkout</code>，理论上输入如下命令：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">git</span> <span class="string">reflog</span></span><br><span class="line"><span class="attr">git</span> <span class="string">checkout a246dcd</span></span><br></pre></td></tr></table></figure><p>这时，输入<code>git log</code>，发现版本完美回退了。但是，这只是假象，输入<code>git branch -a</code>，发现HEAD从bugFix分支切换到了a246dcd那个commit。而bugFix分支，没有进行任何改变。所以，我们不使用<code>git checkout</code>进行版本回退，而是使用它进行历史版本的查看。</p><h2 id="revert"><a href="#revert" class="headerlink" title="revert"></a>revert</h2><p>1、全部文件版本回退</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">git</span> <span class="keyword">revert </span>cf000</span><br></pre></td></tr></table></figure><p>2、远程仓库回退</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">push</span> <span class="built_in">origin</span> HEAD:branch_name</span><br></pre></td></tr></table></figure><p>回退过之后又后悔了，那么，执行reset操作即可。</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">log</span></span><br><span class="line">git <span class="keyword">reset</span> a246dcd <span class="comment">--hard</span></span><br></pre></td></tr></table></figure><h1 id="git-push-403"><a href="#git-push-403" class="headerlink" title="git push 403"></a>git push 403</h1><p>公司电脑（win10系统）以前有一个用户，github账号是haojin。现在电脑分配给我使用，但是，我的github账号是voidking，在我git push的时候报错403。</p><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git push</span><br><span class="line">remote: Permission <span class="keyword">to</span> voidking/hexo-back-up.git denied <span class="keyword">to</span> haojin.</span><br><span class="line">fatal: unable <span class="keyword">to</span> <span class="keyword">access</span> <span class="symbol">'https</span>://github.com/voidking/hexo-back-up.git/': The requested URL returned <span class="literal">error</span>: <span class="number">403</span></span><br></pre></td></tr></table></figure><p>哪怕重置了全局设置的user.name和user.email，依然会报错。<br>原因：win10系统自动保存用户凭据，gitpush的时候默认使用以前的用户凭据。<br>解决办法：Win+X，搜索，控制面板，用户账户，凭据管理器，管理Windows凭据，普通凭据，删除github的凭据即可。</p><h1 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h1><p>本地有修改， 但是想更新服务器上代码。</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 保存stash</span></span><br><span class="line"><span class="attr">git</span> <span class="string">stash</span></span><br><span class="line"><span class="attr">git</span> <span class="string">stash save "something"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 拉取最新代码</span></span><br><span class="line"><span class="attr">git</span> <span class="string">pull</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看stash</span></span><br><span class="line"><span class="attr">git</span> <span class="string">stash list</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 弹出之前的修改</span></span><br><span class="line"><span class="attr">git</span> <span class="string">stash pop</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 弹出之前的修改（只能恢复一次）</span></span><br><span class="line"><span class="attr">git</span> <span class="string">stash pop stash@&#123;num&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 弹出之前的修改（可恢复多次）</span></span><br><span class="line"><span class="attr">git</span> <span class="string">stash apply stash@&#123;num&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除stash</span></span><br><span class="line"><span class="attr">git</span> <span class="string">stash drop stash@&#123;num&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除所有stash</span></span><br><span class="line"><span class="attr">git</span> <span class="string">stash clear</span></span><br></pre></td></tr></table></figure><h1 id="统计"><a href="#统计" class="headerlink" title="统计"></a>统计</h1><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 统计个人代码量</span><br><span class="line">git <span class="keyword">log</span> --author=<span class="string">"voidking"</span> --pretty=tformat: --numstat | awk '&#123; add += <span class="variable">$1</span>; subs += <span class="variable">$2</span>; <span class="keyword">loc</span> += <span class="variable">$1</span> - <span class="variable">$2</span> &#125; END &#123; printf <span class="string">"added lines: %s, removed lines: %s, total lines: %s\n"</span>, add, subs, <span class="keyword">loc</span> &#125;' -</span><br><span class="line"></span><br><span class="line"># 统计每个人代码量</span><br><span class="line">git <span class="keyword">log</span> --<span class="keyword">format</span>='%<span class="keyword">aN</span>' | <span class="keyword">sort</span> -<span class="keyword">u</span> | <span class="keyword">while</span> <span class="keyword">read</span> name; <span class="keyword">do</span> echo -<span class="keyword">en</span> <span class="string">"$name\t"</span>; git <span class="keyword">log</span> --author=<span class="string">"$name"</span> --pretty=tformat: --numstat | awk '&#123; add += <span class="variable">$1</span>; subs += <span class="variable">$2</span>; <span class="keyword">loc</span> += <span class="variable">$1</span> - <span class="variable">$2</span> &#125; END &#123; printf <span class="string">"added lines: %s, removed lines: %s, total lines: %s\n"</span>, add, subs, <span class="keyword">loc</span> &#125;' -; done</span><br><span class="line"></span><br><span class="line"># 统计提交者前五</span><br><span class="line">git <span class="keyword">log</span> --pretty='%<span class="keyword">aN</span>' | <span class="keyword">sort</span> | uniq -c | <span class="keyword">sort</span> -k1 -<span class="keyword">n</span> -r | head -<span class="keyword">n</span> 5</span><br><span class="line"></span><br><span class="line"># 统计提交者数量</span><br><span class="line">git <span class="keyword">log</span> --pretty='%<span class="keyword">aN</span>' | <span class="keyword">sort</span> -<span class="keyword">u</span> | wc -<span class="keyword">l</span></span><br><span class="line"></span><br><span class="line"># 统计提交数</span><br><span class="line">git <span class="keyword">log</span> --oneline | wc -<span class="keyword">l</span></span><br><span class="line"></span><br><span class="line"># 添加或修改的代码行数</span><br><span class="line">git <span class="keyword">log</span> --stat|perl -ne 'END &#123; <span class="keyword">print</span> <span class="variable">$c</span> &#125; <span class="variable">$c</span> += <span class="variable">$1</span> <span class="keyword">if</span> /(\<span class="keyword">d</span>+) insertions/'</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/git/" rel="tag"># git</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-software-version-name/" rel="prev" title="软件版本号命名规则"><i class="fa fa-chevron-left"></i> 软件版本号命名规则</a></div><div class="post-nav-item"> <a href="/dev-git-tag/" rel="next" title="git tag使用说明">git tag使用说明<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zODU3Mi8xNTEwMA=="></div></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#配置"><span class="nav-number">2.</span> <span class="nav-text">配置</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#下载项目"><span class="nav-number">3.</span> <span class="nav-text">下载项目</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#克隆项目"><span class="nav-number">3.1.</span> <span class="nav-text">克隆项目</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#开启代理"><span class="nav-number">3.2.</span> <span class="nav-text">开启代理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#拉取项目"><span class="nav-number">3.3.</span> <span class="nav-text">拉取项目</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#切换分支"><span class="nav-number">3.4.</span> <span class="nav-text">切换分支</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#上传项目"><span class="nav-number">4.</span> <span class="nav-text">上传项目</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#上传分支"><span class="nav-number">4.1.</span> <span class="nav-text">上传分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改commit-message"><span class="nav-number">4.2.</span> <span class="nav-text">修改commit message</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看日志"><span class="nav-number">4.3.</span> <span class="nav-text">查看日志</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#免密下载上传"><span class="nav-number">5.</span> <span class="nav-text">免密下载上传</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#版本回退"><span class="nav-number">6.</span> <span class="nav-text">版本回退</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#reset"><span class="nav-number">6.1.</span> <span class="nav-text">reset</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#revert"><span class="nav-number">6.2.</span> <span class="nav-text">revert</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-push-403"><span class="nav-number">7.</span> <span class="nav-text">git push 403</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-stash"><span class="nav-number">8.</span> <span class="nav-text">git stash</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#统计"><span class="nav-number">9.</span> <span class="nav-text">统计</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="VoidKing" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">VoidKing</p><div class="site-description" itemprop="description">学而不思则罔，思而不学则殆！</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">583</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">40</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">189</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://twitter.com/voidking_com" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;voidking_com" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i> Twitter</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2020</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">VoidKing</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://www.beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer><div id="needsharebutton-float"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css"><script src="/lib/needsharebutton/needsharebutton.js"></script><script>pbOptions={iconStyle:"box",boxForm:"horizontal",position:"bottomCenter",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-postbottom",pbOptions),flOptions={iconStyle:"box",boxForm:"horizontal",position:"topRight",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-float",flOptions)</script><script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  // window.livereOptions = {
  //   refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  // };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script></body></html>