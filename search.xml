<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>éƒ¨ç½²ChatGPTé•œåƒç«™</title>
    <url>/dev-chatgpt-mirror-site/</url>
    <content><![CDATA[ChatGPTé•œåƒç«™ç®€ä»‹ä½¿ç”¨ChatGPTæ˜¯æœ‰ä¸€å®šé—¨æ§›çš„ï¼šç§‘å­¦ä¸Šç½‘ï¼Œå¹¶ä¸”æ˜¯ç‰¹å®šåœ°åŒºç§‘å­¦ä¸Šç½‘ã€‚è¿‘æœŸChatGPTå¼€å§‹å°å·ï¼Œå¦‚æœç§‘å­¦ä¸Šç½‘å·¥å…·çš„å‡ºå£IPé¢‘ç¹å˜åŒ–ï¼Œé‚£ä¹ˆChatGPTè´¦å·å¯èƒ½è¢«å°ã€‚
è€Œæ­å»ºä½¿ç”¨ChatGPTé•œåƒç«™ï¼Œå¯ä»¥é™ä½å›½å†…ä½¿ç”¨ChatGPTçš„é—¨æ§›ï¼Œå¹¶ä¸”é¿å…è´¦å·è¢«å°ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

æ•™ç¨‹ï¼šéƒ¨ç½²ä¸ªäººä¸“å±çš„ ChatGPT é•œåƒæ•™ç¨‹



æ•´ä½“éƒ¨ç½²æ€è·¯1ã€æ³¨å†ŒChatGPTè´¦å·2ã€è·å–OpenAI API Key3ã€å‡†å¤‡å›½å¤–ä¸»æœº4ã€å‡†å¤‡Dockerç¯å¢ƒ5ã€éƒ¨ç½²ChatGPTé•œåƒç«™6ã€é…ç½®åŸŸå
æ³¨å†ŒChatGPTè´¦å·å‚è€ƒæ–‡æ¡£ï¼š

å›½å†…å¼€é€šChat GPT Plusä¿å§†çº§æ•™ç¨‹ã€å…¸è—ã€‘
ChatGPTå­¦ä¹ æ‰‹å†Œ
æ¨èä¸€ä¸ªæ–¹ä¾¿å¥½ç”¨çš„ ChatGPT å®¢æˆ·ç«¯

è·å–OpenAI API Keyè®¿é—®OpenAI - API keysï¼ŒCreate new secret key
å‡†å¤‡å›½å¤–ä¸»æœºé€‰æ‹©ä¸€ä¸ªæä¾›å›½å¤–ä¸»æœºçš„äº‘å‚å•†ï¼Œè´­ä¹°ä¸€å°å›½å¤–ä¸»æœºï¼ˆæ¨èç¾å›½ï¼‰ï¼Œå¹¶ä¸”ä¸»æœºçš„IPå›½å†…å¯ä»¥è®¿é—®ï¼Œå®‰è£…Linuxç³»ç»Ÿã€‚
å¾®è½¯ä½œä¸ºopenaiçš„å¤§è‚¡ä¸œï¼Œé€‰æ‹©å¾®è½¯azureçš„äº‘ä¸»æœºï¼Œå¯èƒ½æ›´ä¸å®¹æ˜“è¢«å°å·ã€‚azureæ³¨å†Œéœ€è¦visaæˆ–è€…masterä¿¡ç”¨å¡ã€‚æ³¨å†Œåazureæä¾›$200çš„å…è´¹è¯•ç”¨é¢åº¦ï¼ŒæœŸé™ä¸€ä¸ªæœˆï¼Œå‡çº§åˆ°å³ç”¨å³ä»˜è®¢é˜…ï¼Œå¯ä»¥å»¶é•¿å…è´¹æœŸé™åˆ°ä¸€å¹´ã€‚
ç›¸å…³æ–‡æ¡£ï¼š

Azureå®˜ç½‘
Azure ä¸­çš„è™šæ‹Ÿæœº
å®šä»·è®¡ç®—å™¨
è™šæ‹Ÿæœºé€‰æ‹©å™¨

å‡†å¤‡Dockerç¯å¢ƒå®‰è£…Dockerï¼Œå‚è€ƒæ–‡æ¡£ï¼šã€ŠDockerå…¥é—¨ç¯‡ã€‹
éƒ¨ç½²ChatGPTé•œåƒç«™ChatGPTé•œåƒç«™æºç å¾ˆå¤šï¼Œæœ¬æ–‡ä¸­é€‰æ‹©Staræ•°å¾ˆé«˜çš„ChuanhuChatGPTã€‚
ChuanhuChatGPTä¼˜ç‚¹ï¼š

æµå¼ä¼ è¾“ / æ— é™å¯¹è¯ / ä¿å­˜å¯¹è¯ / é¢„è®¾Prompté›† / è”ç½‘æœç´¢ / æ ¹æ®æ–‡ä»¶å›ç­”
æ¸²æŸ“LaTeX / æ¸²æŸ“è¡¨æ ¼ / ä»£ç é«˜äº® / è‡ªåŠ¨äº®æš—è‰²åˆ‡æ¢ / è‡ªé€‚åº”ç•Œé¢ / â€œå°è€Œç¾â€çš„ä½“éªŒ
è‡ªå®šä¹‰api-Host / å¤šå‚æ•°å¯è°ƒ / å¤šAPI Keyå‡è¡¡è´Ÿè½½ / å¤šç”¨æˆ·æ˜¾ç¤º / é€‚é…GPT-4 / æ”¯æŒæœ¬åœ°éƒ¨ç½²LLM

å‚è€ƒæ–‡æ¡£ï¼š

GaiZhenbiao/ChuanhuChatGPT
ChuanhuChatGPT - ä½¿ç”¨æ•™ç¨‹

æ‰“åŒ…æœåŠ¡é•œåƒ1ã€å…‹éš†ChuanhuChatGPTé¡¹ç›®ï¼Œåˆ‡æ¢åˆ°æŒ‡å®šç‰ˆæœ¬
git clone https://github.com/GaiZhenbiao/ChuanhuChatGPT.gitcd ChuanhuChatGPTgit checkout 20230409

2ã€æ‰“åŒ…é•œåƒ
docker build -t voidking/chuanhuchatgpt:20230409 .

å¯åŠ¨æœåŠ¡1ã€å‡†å¤‡é…ç½®æ–‡ä»¶å¤åˆ¶ config_example.json ä¸º /opt/chuanhuchatgpt/config.jsonï¼ŒæŒ‰ç…§æç¤ºä¿®æ”¹å‚æ•°é…ç½®
&#123;    // ä½ çš„OpenAI API Keyï¼Œä¸€èˆ¬å¿…å¡«ï¼Œ    // è‹¥ç¼ºçœå¡«ä¸º &quot;openai_api_key&quot;: &quot;&quot; åˆ™å¿…é¡»å†åœ¨å›¾å½¢ç•Œé¢ä¸­å¡«å…¥API Key    &quot;openai_api_key&quot;: &quot;sk-xxxxxxxxxxxxxxxxxxxxxxxxx&quot;,    // å¦‚æœä½¿ç”¨ä»£ç†ï¼Œè¯·å–æ¶ˆæ³¨é‡Šä¸‹é¢çš„ä¸¤è¡Œï¼Œå¹¶æ›¿æ¢ä»£ç†URL    // &quot;https_proxy&quot;: &quot;http://127.0.0.1:1079&quot;,    // &quot;http_proxy&quot;: &quot;http://127.0.0.1:1079&quot;,    &quot;users&quot;: [        [&quot;ç”¨æˆ·1çš„ç”¨æˆ·å&quot;, &quot;ç”¨æˆ·1çš„å¯†ç &quot;],        [&quot;ç”¨æˆ·2çš„ç”¨æˆ·å&quot;, &quot;ç”¨æˆ·2çš„å¯†ç &quot;]    ],    &quot;advance_docs&quot;: &#123;        &quot;pdf&quot;: &#123;            // æ˜¯å¦è®¤ä¸ºPDFæ˜¯åŒæ çš„            &quot;two_column&quot;: false,            // æ˜¯å¦ä½¿ç”¨OCRè¯†åˆ«PDFä¸­çš„å…¬å¼            &quot;formula_ocr&quot;: true        &#125;    &#125;,    // æ˜¯å¦å¤šä¸ªAPI Keyè½®æ¢ä½¿ç”¨    &quot;multi_api_key&quot;: false,    &quot;api_key_list&quot;: [        &quot;sk-xxxxxxxxxxxxxxxxxxxxxxxx1&quot;,        &quot;sk-xxxxxxxxxxxxxxxxxxxxxxxx2&quot;,        &quot;sk-xxxxxxxxxxxxxxxxxxxxxxxx3&quot;    ]&#125;

å…¶ä¸­userså‚æ•°å¯ä»¥ä¸ºç©ºï¼Œ&quot;users&quot;: []ï¼Œè¡¨ç¤ºä¸è®¾ç½®ç”¨æˆ·åå¯†ç ã€‚
å»ºè®®é…ç½®ï¼š

openai_api_keyä¸ç”¨å¡«ï¼Œå› ä¸ºdocker runæ—¶ä¼šè¦†ç›–è¿™ä¸ªå‚æ•°ã€‚
å¡«å…¥ç”¨æˆ·åå¯†ç ï¼Œé¿å…è¢«ç›—ç”¨ã€‚
å¯ç”¨multi_api_keyï¼Œä¸ç”¨åœ¨é¡µé¢è¾“å…¥keyï¼Œè€Œä¸”æ‹¥æœ‰å¤šä¸ªkeyæ—¶èƒ½å¤Ÿè´Ÿè½½å‡è¡¡ã€‚

2ã€å¯åŠ¨æœåŠ¡
docker run --name chuanhuchatgpt -d \    -e my_api_key=&quot;æ›¿æ¢æˆAPI&quot; \    -e api_host=&quot;æ›¿æ¢æˆè‡ªå®šä¹‰çš„apiè¯·æ±‚åœ°å€&quot; \    -v /opt/chuanhuchatgpt/history:/app/history \    -v /opt/chuanhuchatgpt/config.json:/app/config.json \    -p 7860:7860 \    voidking/chuanhuchatgpt:20230409

å…¶ä¸­ my_api_key å¿…å¡«ï¼Œapi_host å¯çœç•¥ã€‚config.jsonä¸­é…ç½®çš„openai_api_keyæ— æ•ˆï¼Œå› ä¸ºmy_api_keyè¿™é‡Œå¿…å¡«ï¼Œä¼šè¦†ç›–config.jsonä¸­çš„é…ç½®ã€‚
3ã€æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker logs chuanhuchatgptdocker update --restart=always chuanhuchatgpt

4ã€è®¿é—®æœåŠ¡æµè§ˆå™¨è®¿é—® http://&lt;ä¸»æœºIP&gt;:7860
é…ç½®åŸŸåå‚è€ƒæ–‡æ¡£ï¼š

ã€ŠNginxå…¥é—¨ç¯‡ã€‹
ChuanhuChatGPT - ä½¿ç”¨æ•™ç¨‹

]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>chatgpt</tag>
      </tags>
  </entry>
  <entry>
    <title>æ­å»ºSpark on Yarné›†ç¾¤</title>
    <url>/dev-spark-on-yarn/</url>
    <content><![CDATA[å‰è¨€è®¡åˆ’åœ¨ä¸‰å°Linuxä¸»æœºä¸­æ­å»ºSpark on Yarné›†ç¾¤ï¼ŒSparkç‰ˆæœ¬3.2.3ï¼ŒHadoopç‰ˆæœ¬3.2.3ã€‚
ä¸»æœºé…ç½®ä¸º4C8Gï¼Œæ“ä½œç³»ç»Ÿä¸ºCentOS7ï¼Œhostsé…ç½®ä¸ºï¼š
192.168.56.101 spark-master192.168.56.102 spark-slave1192.168.56.103 spark-slave2
é€‰æ‹©101ä½œä¸ºmasterèŠ‚ç‚¹ï¼Œå¦å¤–ä¸¤ä¸ªä½œä¸ºworkerèŠ‚ç‚¹ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ã€ŠLinuxä¸­å®‰è£…é…ç½®Hadoopã€‹
ã€ŠLinuxä¸­æ­å»ºSparké›†ç¾¤ã€‹
Hadoop 3.2.2 å®‰è£…ä¸ä½¿ç”¨æ–‡æ¡£è¶…è¯¦ç»†å›¾æ–‡æ­¥éª¤
spark3.2+hadoop3.3.2ä¸‰èŠ‚ç‚¹åˆ†å¸ƒå¼éƒ¨ç½²åˆä½“éªŒ
æ­å»ºSpark on Yarné›†ç¾¤
spark3.3.0å®‰è£…&amp;éƒ¨ç½²è¿‡ç¨‹



å®‰è£…Javaå‚è€ƒæ–‡æ¡£ã€Šå…¨å¹³å°å®‰è£…JDKã€‹
å®‰è£…Hadoopä¸‹è½½Hadoopå®‰è£…åŒ…wget https://dlcdn.apache.org/hadoop/common/hadoop-3.2.3/hadoop-3.2.3.tar.gz --no-check-certificatemkdir -p /usr/local/hadoop/tar -xzvf hadoop-3.2.3.tar.gz -C /usr/local/hadoop/

ä¿®æ”¹Hadoopé…ç½®1ã€ä¿®æ”¹hadoop-env.sh
cd /usr/local/hadoop/hadoop-3.2.3vim etc/hadoop/hadoop-env.sh
ä¿®æ”¹JAVA_HOMEä¸ºç»å¯¹è·¯å¾„ã€‚
export JAVA_HOME=/usr/lib/jvm/jdk1.8.0_161

2ã€éªŒè¯ç¯å¢ƒ
./bin/hadoop version

å•æœºæµ‹è¯•è¿è¡Œmkdir ./inputcp ./etc/hadoop/*.xml ./input./bin/hadoop jar ./share/hadoop/mapreduce/hadoop-mapreduce-examples-*.jar grep ./input ./output &#x27;dfs[a-z.]+&#x27;cat ./output/*

çœ‹åˆ°ç»“æœ1  dfsadminè¡¨æ˜è¿è¡ŒæˆåŠŸã€‚
masterèŠ‚ç‚¹é…ç½®HDFS1ã€ä¿®æ”¹etc/hadoop/core-site.xml
&lt;configuration&gt;    &lt;!-- æŒ‡å®šhdfsä¸­nomenodeçš„åœ°å€ --&gt;    &lt;property&gt;        &lt;name&gt;fs.defaultFS&lt;/name&gt;        &lt;value&gt;hdfs://spark-master:9000&lt;/value&gt;    &lt;/property&gt;    &lt;!-- æŒ‡å®šhadoopè¿è¡Œæ—¶äº§ç”Ÿæ–‡ä»¶çš„å­˜å‚¨ç›®å½• --&gt;    &lt;property&gt;        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;        &lt;value&gt;file:/usr/local/hadoop/hadoop-3.2.3/data/tmp&lt;/value&gt;    &lt;/property&gt;&lt;/configuration&gt;

é…ç½®å‚è€ƒæ–‡æ¡£ï¼šhadoop3.2.3 core-default.xml
2ã€ä¿®æ”¹etc/hadoop/hdfs-site.xml
&lt;configuration&gt;    &lt;!-- è®¾ç½®dfså‰¯æœ¬æ•° --&gt;    &lt;property&gt;        &lt;name&gt;dfs.replication&lt;/name&gt;        &lt;value&gt;1&lt;/value&gt;    &lt;/property&gt;    &lt;!-- hdfsçš„webç®¡ç†é¡µé¢çš„ç«¯å£ --&gt;    &lt;property&gt;        &lt;name&gt;dfs.http.address&lt;/name&gt;        &lt;value&gt;0.0.0.0:50070&lt;/value&gt;    &lt;/property&gt;    &lt;!-- è®¾ç½®secondnamenodeçš„ç«¯å£ --&gt;    &lt;property&gt;        &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;        &lt;value&gt;spark-master:9001&lt;/value&gt;    &lt;/property&gt;    &lt;!-- namenodeç›®å½• --&gt;    &lt;property&gt;        &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;        &lt;value&gt;file:/usr/local/hadoop/hadoop-3.2.3/data/dfs/name&lt;/value&gt;    &lt;/property&gt;    &lt;!-- datanodeç›®å½• --&gt;    &lt;property&gt;        &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;        &lt;value&gt;file:/usr/local/hadoop/hadoop-3.2.3/data/dfs/data&lt;/value&gt;    &lt;/property&gt;&lt;/configuration&gt;

é…ç½®å‚è€ƒæ–‡æ¡£ï¼šhadoop3.2.3 hdfs-default.xml
3ã€ä¿®æ”¹etc/hadoop/workers
spark-masterspark-slave1spark-slave2

masterèŠ‚ç‚¹é…ç½®é…ç½®Yarn1ã€ç¼–è¾‘ etc/hadoop/mapred-site.xml
&lt;configuration&gt;    &lt;!-- æŒ‡å®šmrè¿è¡Œåœ¨yarnä¸Š --&gt;    &lt;property&gt;      &lt;name&gt;mapreduce.framework.name&lt;/name&gt;      &lt;value&gt;yarn&lt;/value&gt;    &lt;/property&gt;&lt;/configuration&gt;

2ã€ç¼–è¾‘ etc/hadoop/yarn-site.xml
&lt;configuration&gt;    &lt;!-- reducer è·å–æ•°æ®çš„æ–¹å¼ --&gt;    &lt;property&gt;        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;    &lt;/property&gt;    &lt;!-- æŒ‡å®š YARN çš„ ResourceManager çš„åœ°å€ --&gt;    &lt;property&gt;        &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;        &lt;value&gt;spark-master&lt;/value&gt;    &lt;/property&gt;     &lt;!-- è¯¥èŠ‚ç‚¹ä¸ŠYARNå¯ä½¿ç”¨çš„ç‰©ç†å†…å­˜æ€»é‡ï¼Œé»˜è®¤æ˜¯ 8192ï¼ˆMBï¼‰--&gt;    &lt;!-- æ³¨æ„ï¼Œå¦‚æœä½ çš„èŠ‚ç‚¹å†…å­˜èµ„æºä¸å¤Ÿ8GBï¼Œåˆ™éœ€è¦è°ƒå‡å°è¿™ä¸ªå€¼ --&gt;    &lt;property&gt;        &lt;name&gt;yarn.nodemanager.resource.memory-mb&lt;/name&gt;        &lt;value&gt;4096&lt;/value&gt;    &lt;/property&gt;     &lt;!-- å•ä¸ªä»»åŠ¡å¯ç”³è¯·æœ€å°‘å†…å­˜ï¼Œé»˜è®¤ 1024 MB --&gt;    &lt;property&gt;        &lt;name&gt;yarn.scheduler.minimum-allocation-mb&lt;/name&gt;        &lt;value&gt;1024&lt;/value&gt;    &lt;/property&gt;      &lt;!-- å•ä¸ªä»»åŠ¡å¯ç”³è¯·æœ€å¤§å†…å­˜ï¼Œé»˜è®¤ 8192 MB --&gt;    &lt;property&gt;        &lt;name&gt;yarn.scheduler.maximum-allocation-mb&lt;/name&gt;        &lt;value&gt;4096&lt;/value&gt;    &lt;/property&gt;&lt;/configuration&gt;

é…ç½®ç¯å¢ƒå˜é‡vim /etc/profile
æ·»åŠ ï¼š
export HADOOP_HOME=/usr/local/hadoop/hadoop-3.2.3export PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$PATH

ä½¿ç”Ÿæ•ˆï¼š
source /etc/profile

æ‹·è´é…ç½®åˆ°slaveèŠ‚ç‚¹rsync -P -avz /usr/local/hadoop 192.168.56.102:/usr/local/rsync -P -avz /usr/local/hadoop 192.168.56.103:/usr/local/rsync -P -avz /etc/profile 192.168.56.102:/etc/profilersync -P -avz /etc/profile 192.168.56.103:/etc/profile

masterèŠ‚ç‚¹å¯åŠ¨HDFS1ã€æ ¼å¼åŒ–namenode
./bin/hdfs namenode -format

æ‰§è¡Œå®Œæˆï¼Œæ²¡æœ‰æŠ¥é”™ï¼Œå½“å‰ç›®å½•ä¸­å‡ºç°äº†tmpç›®å½•ï¼Œè¡¨æ˜æ ¼å¼åŒ–æˆåŠŸã€‚slaveèŠ‚ç‚¹ä¸ä¼šå‡ºç°tmpç›®å½•ã€‚
2ã€æ·»åŠ HDFSç”¨æˆ·ç¯å¢ƒå˜é‡/etc/profileä¸­æ·»åŠ 
export HDFS_DATANODE_USER=rootexport HDFS_DATANODE_SECURE_USER=hdfsexport HDFS_NAMENODE_USER=rootexport HDFS_SECONDARYNAMENODE_USER=root

æˆ–è€…sbin/start-dfs.sh å’Œ sbin/stop-dfs.shï¼Œæ–‡ä»¶é¡¶éƒ¨æ·»åŠ 
HDFS_DATANODE_USER=rootHDFS_DATANODE_SECURE_USER=hdfsHDFS_NAMENODE_USER=rootHDFS_SECONDARYNAMENODE_USER=root

å¦åˆ™æ‰§è¡Œå¯èƒ½æŠ¥é”™ï¼šStarting namenodes on [spark-master]ERROR: Attempting to operate on hdfs namenode as rootERROR: but there is no HDFS_NAMENODE_USER defined. Aborting operation.Starting datanodesERROR: Attempting to operate on hdfs datanode as rootERROR: but there is no HDFS_DATANODE_USER defined. Aborting operation.Starting secondary namenodes [spark-master]ERROR: Attempting to operate on hdfs secondarynamenode as rootERROR: but there is no HDFS_SECONDARYNAMENODE_USER defined. Aborting operation.
3ã€å¯åŠ¨hdfsæœåŠ¡
./sbin/start-dfs.sh
è¿™æ¡å‘½ä»¤ä¼šåœ¨masterå’ŒslaveèŠ‚ç‚¹åŒæ—¶å¯åŠ¨hdfsï¼Œä¼šæç¤ºè¾“å…¥å¯†ç ï¼Œæœ€å¥½æå‰é…ç½®å¥½å…å¯†ç™»å½•ã€‚
4ã€æŸ¥çœ‹hdfsè¿›ç¨‹
jps -l

masterèŠ‚ç‚¹å¯ä»¥çœ‹åˆ°ï¼š

org.apache.hadoop.hdfs.server.namenode.NameNode
org.apache.hadoop.hdfs.server.datanode.DataNode
org.apache.hadoop.hdfs.server.namenode.SecondaryNameNode

slaveèŠ‚ç‚¹å¯ä»¥çœ‹åˆ°ï¼š

org.apache.hadoop.hdfs.server.datanode.DataNode

5ã€æµè§ˆå™¨è®¿é—®æµè§ˆå™¨è®¿é—® http://192.168.56.101:50070å¯ä»¥çœ‹åˆ° NameNode å’Œ Datanode çš„ä¿¡æ¯ã€‚
masterèŠ‚ç‚¹å¯åŠ¨Yarn1ã€ä¿®æ”¹ sbin/start-yarn.sh å’Œ sbin/stop-yarn.shï¼Œæ–‡ä»¶é¡¶éƒ¨æ·»åŠ 
YARN_RESOURCEMANAGER_USER=rootHADOOP_SECURE_DN_USER=yarnYARN_NODEMANAGER_USER=root

2ã€å¯åŠ¨yarn
./sbin/start-yarn.sh

3ã€æŸ¥çœ‹è¿›ç¨‹
jps -l

masterå¯ä»¥çœ‹åˆ°ï¼š

org.apache.hadoop.yarn.server.nodemanager.NodeManager
org.apache.hadoop.yarn.server.resourcemanager.ResourceManager

slaveèŠ‚ç‚¹å¯ä»¥çœ‹åˆ°ï¼š

org.apache.hadoop.yarn.server.nodemanager.NodeManager

4ã€æµè§ˆå™¨è®¿é—®æµè§ˆå™¨è®¿é—® http://192.168.56.101:8088å¯ä»¥çœ‹åˆ° Yarn ResourceManagerçš„ä¿¡æ¯ã€‚
å®‰è£…SparkmasterèŠ‚ç‚¹é…ç½®1ã€ä¸‹è½½sparkå¹¶è§£å‹
wget https://archive.apache.org/dist/spark/spark-3.2.3/spark-3.2.3-bin-hadoop3.2-scala2.13.tgzmkdir -p /usr/local/sparktar -xzvf spark-3.2.3-bin-hadoop3.2-scala2.13.tgz -C /usr/local/spark

æ›´å¤šç‰ˆæœ¬çš„sparkï¼Œå¯ä»¥åœ¨Spark release archivesé¡µé¢æ‰¾åˆ°ã€‚
2ã€åˆ›å»ºé…ç½®æ–‡ä»¶
cd /usr/local/spark/spark-3.2.3-bin-hadoop3.2-scala2.13/confcp workers.template workerscp spark-defaults.conf.template spark-defaults.confcp spark-env.sh.template spark-env.sh

3ã€ä¿®æ”¹é…ç½®ï¼ˆ1ï¼‰workersä¸­åˆ é™¤localhostï¼Œæ·»åŠ 
spark-masterspark-slave1spark-slave2

ï¼ˆ2ï¼‰spark-defaults.confæš‚æ—¶ä¸å˜
ï¼ˆ3ï¼‰spark-env.shä¸­æ·»åŠ 
export JAVA_HOME=/usr/lib/jvm/jdk1.8.0_161export SPARK_MASTER_HOST=spark-masterexport SPARK_MASTER_PORT=7077export SPARK_HOME=/usr/local/spark/spark-3.2.3-bin-hadoop3.2-scala2.13export HADOOP_HOME=/usr/local/hadoop/hadoop-3.2.3export HADOOP_CONF_DIR=/usr/local/hadoop/hadoop-3.2.3/etc/hadoop/export YARN_CONF_DIR=/usr/local/hadoop/hadoop-3.2.3/etc/hadoop/

4ã€/etc/profileä¸­æ·»åŠ ç¯å¢ƒå˜é‡
export SPARK_HOME=/usr/local/spark/spark-3.2.3-bin-hadoop3.2-scala2.13export PATH=$SPARK_HOME/bin:$PATH

5ã€ä½¿é…ç½®ç”Ÿæ•ˆ
source /etc/profile

masteré…ç½®åŒæ­¥åˆ°workerrsync -P -avz /usr/local/spark 192.168.56.102:/usr/local/rsync -P -avz /usr/local/spark 192.168.56.103:/usr/local/rsync -P -avz /etc/profile 192.168.56.102:/etc/profilersync -P -avz /etc/profile 192.168.56.103:/etc/profile

è¿è¡ŒSpark1ã€å¯åŠ¨sparkï¼ˆåœ¨masterèŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼‰
cd /usr/local/spark/spark-3.2.3-bin-hadoop3.2-scala2.13/sbin./start-all.sh

æ ¹æ®æç¤ºï¼Œä¾æ¬¡è¾“å…¥ä¸¤å°workerèŠ‚ç‚¹çš„å¯†ç ã€‚ï¼ˆè¿™é‡Œæœ€å¥½é…ç½®ä¸Šå…å¯†ç™»å½•ï¼‰è¿™æ ·ï¼Œä¸‰ä¸ªèŠ‚ç‚¹ä¸Šçš„sparkå°±éƒ½å¯ä»¥å¯åŠ¨èµ·æ¥ã€‚
2ã€éªŒè¯å®‰è£…
jps -l

masterèŠ‚ç‚¹çœ‹åˆ°Masterå’ŒWorkerè¿›ç¨‹ï¼ŒworkerèŠ‚ç‚¹çœ‹åˆ°Workerè¿›ç¨‹ã€‚
3ã€æµè§ˆå™¨è®¿é—®æµè§ˆå™¨è®¿é—® http://192.168.56.101:8080å¯ä»¥çœ‹åˆ°spark masterä¿¡æ¯ã€‚æµè§ˆå™¨è®¿é—® http://192.168.56.102:8081å¯ä»¥çœ‹åˆ°spark slaveèŠ‚ç‚¹ä¿¡æ¯ã€‚
æµ‹è¯•ä½¿ç”¨Spark on Yarn1ã€spark-submitæäº¤ä»»åŠ¡
./bin/spark-submit \  --class org.apache.spark.examples.SparkPi \  --master yarn \  ./examples/jars/spark-examples_2.13-3.2.3.jar 1000

3ã€æµè§ˆå™¨æŸ¥çœ‹è¿›åº¦æµè§ˆå™¨è®¿é—® http://192.168.50.105:8088åœ¨Yarn ResourceManageré¡µé¢ï¼Œå¯ä»¥æŸ¥çœ‹åˆ°ä»»åŠ¡è¯¦æƒ…ã€‚
vcoreæ•°é‡ä¸å¯¹é—®é¢˜é—®é¢˜æè¿°ç†è®ºä¸Šï¼švcoresä½¿ç”¨æ•° = executor-cores * num-executors + 1ä½†æ˜¯å®é™…æäº¤ä»»åŠ¡åï¼Œé…ç½®çš„executor-coreså¹¶æ²¡æœ‰èµ·ä½œç”¨ã€‚
ä¾‹å¦‚ï¼š
./bin/spark-submit --class org.apache.spark.examples.SparkPi \--master yarn \--deploy-mode cluster \--driver-memory 2g \--executor-memory 1g \--num-executors 4 \--executor-cores 2 \./examples/jars/spark-examples_2.13-3.2.3.jar 10

ä¸Šé¢çš„æäº¤ï¼Œç†è®ºä¸Šåº”è¯¥ä½¿ç”¨2 * 4 + 1 = 9æ ¸ï¼Œå®é™…ä¸Šä»Yarn ResourceManageré¡µé¢æŸ¥çœ‹Allocated CPU VCoresï¼Œåªåˆ†é…äº†5æ ¸ã€‚ä¹Ÿå°±æ˜¯è¯´executor-coresæ²¡æœ‰ç”Ÿæ•ˆï¼Œä½¿ç”¨äº†é»˜è®¤å€¼1ã€‚
è§£å†³åŠæ³•1ã€ç¼–è¾‘ capacity-scheduler.xml 
cd /usr/local/hadoop/hadoop-3.2.3vim etc/hadoop/capacity-scheduler.xml
å¦‚ä¸‹ä¿®æ”¹ï¼š
&lt;property&gt;  &lt;name&gt;yarn.scheduler.capacity.resource-calculator&lt;/name&gt;  &lt;!-- &lt;value&gt;org.apache.hadoop.yarn.util.resource.DefaultResourceCalculator&lt;/value&gt; --&gt;  &lt;value&gt;org.apache.hadoop.yarn.util.resource.DominantResourceCalculator&lt;/value&gt;  &lt;description&gt;    The ResourceCalculator implementation to be used to compare    Resources in the scheduler.    The default i.e. DefaultResourceCalculator only uses Memory while    DominantResourceCalculator uses dominant-resource to compare    multi-dimensional resources such as Memory, CPU etc.  &lt;/description&gt;&lt;/property&gt;

2ã€åŒæ­¥åˆ°slaveèŠ‚ç‚¹
rsync -P -avz /usr/local/hadoop/hadoop-3.2.3/etc/hadoop/ 192.168.56.102:/usr/local/hadoop/hadoop-3.2.3/etc/hadooprsync -P -avz /usr/local/hadoop/hadoop-3.2.3/etc/hadoop/ 192.168.56.103:/usr/local/hadoop/hadoop-3.2.3/etc/hadoop

3ã€é‡å¯yarn
./sbin/stop-yarn.sh./sbin/start-yarn.sh

å‚è€ƒæ–‡æ¡£ï¼šspark on yarnæäº¤åvcoreæ•°ä¸å¯¹
]]></content>
      <categories>
        <category>engineering</category>
        <category>bigdata</category>
        <category>java</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>java</tag>
        <tag>hadoop</tag>
        <tag>spark</tag>
      </tags>
  </entry>
  <entry>
    <title>K8Sä¸­PodæŠ“åŒ…</title>
    <url>/dev-k8s-pod-packet-capture/</url>
    <content><![CDATA[PodæŠ“åŒ…æ¦‚è¿°æ’æŸ¥ç½‘ç»œé—®é¢˜çš„æœ€å¥½æ–¹æ³•å°±æ˜¯æŠ“åŒ…åˆ†æï¼Œåœ¨ Kubernetes ä¸­å¯¹ Pod è¿›è¡ŒæŠ“åŒ…çš„å¸¸è§æ–¹æ³•åŒ…æ‹¬ï¼š

åœ¨ Pod ä¸­å®‰è£… tcpdump å·¥å…·ï¼Œç›´æ¥å¯¹æµé‡è¿›è¡ŒæŠ“åŒ…ï¼Œæ•è·ç½‘ç»œæµé‡å¹¶è¾“å‡ºåˆ°æ–‡ä»¶æˆ–ç»ˆç«¯ä¸Šã€‚è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯çµæ´»æ€§é«˜ï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œå®šåˆ¶å’Œè°ƒè¯•ï¼Œä½†éœ€è¦åœ¨ Pod ä¸­å®‰è£…é¢å¤–çš„å·¥å…·ï¼Œå¯èƒ½ä¼šå¢åŠ  Pod çš„å¤§å°å’Œå¤æ‚åº¦ã€‚
ä½¿ç”¨ kubectl port-forward å‘½ä»¤å°† Pod çš„ç½‘ç»œæµé‡è½¬å‘åˆ°æœ¬åœ°ï¼Œç„¶åä½¿ç”¨æœ¬åœ°çš„ tcpdump å·¥å…·å¯¹æµé‡è¿›è¡ŒæŠ“åŒ…ã€‚è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ç®€å•æ˜“ç”¨ï¼Œä¸éœ€è¦åœ¨ Pod ä¸­å®‰è£…é¢å¤–çš„å·¥å…·ï¼Œä½†éœ€è¦æ‰‹åŠ¨è¿›è¡Œè½¬å‘å’ŒæŠ“åŒ…ï¼Œå¯èƒ½ä¸å¤ªæ–¹ä¾¿ã€‚
ä½¿ç”¨ Kubernetes ä¸­çš„ç½‘ç»œæ’ä»¶æä¾›çš„æŠ“åŒ…åŠŸèƒ½ï¼Œä¾‹å¦‚ Ciliumã€Weave Netã€Calico ç­‰ã€‚è¿™äº›ç½‘ç»œæ’ä»¶ä¸€èˆ¬éƒ½æä¾›äº†æŠ“åŒ…å·¥å…·æˆ–è€…æŠ“åŒ…æ¥å£ï¼Œå¯ä»¥ç›´æ¥å¯¹ Pod çš„ç½‘ç»œæµé‡è¿›è¡ŒæŠ“åŒ…ï¼Œè€Œæ— éœ€åœ¨ Pod ä¸­å®‰è£…é¢å¤–çš„å·¥å…·æˆ–è€…è¿›è¡Œæ‰‹åŠ¨è½¬å‘ã€‚
ç™»å½• Pod æ‰€åœ¨èŠ‚ç‚¹ï¼Œè¿›å…¥å®¹å™¨ netnsï¼Œç„¶åä½¿ç”¨èŠ‚ç‚¹ä¸Š tcpdump å·¥å…·è¿›è¡ŒæŠ“åŒ…ã€‚

ä»¥ä¸Šæ–¹æ³•éƒ½æ¯”è¾ƒç¹çï¼Œä»¤äººæƒŠå–œçš„æ˜¯å‡ºç°äº† ksniffï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨ Kubernetes æ›´ç®€ä¾¿åœ°æŠ“åŒ…ã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¼šå­¦ä¹ ä½¿ç”¨ksniffæ¥è¿›è¡ŒPodæŠ“åŒ…ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Wiresharkå…¥é—¨ç¯‡
eldadru/ksniff
kubernetes å®ç”¨æŠ€å·§: ä½¿ç”¨ ksniff æŠ“åŒ…
å¦‚ä½•åœ¨ Kubernetes Pod å†…è¿›è¡Œç½‘ç»œæŠ“åŒ…
Kubernetes ç½‘ç»œå¼‚å¸¸åˆ†ç±»åŠæ’é”™æŒ‡å—



ksniffæŠ“åŒ…åŸç†æ™®é€šæ¨¡å¼ksniff ä¸Šä¼  tcpdump äºŒè¿›åˆ¶æ–‡ä»¶åˆ°ç›®æ ‡ Pod çš„ä¸€ä¸ªå®¹å™¨é‡Œï¼Œç„¶åæ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶æ¥å®ç°æŠ“åŒ…ã€‚
ç‰¹æƒæ¨¡å¼ksniff å¯åŠ¨å¦å¤–ä¸€ä¸ªpodï¼Œå’Œç›®æ ‡podå…±äº«network namespaceï¼ŒæŠ“å–ç›®æ ‡podä¸­çš„ç½‘ç»œåŒ…ã€‚
å®‰è£…wiresharkwiresharkå®‰è£…æ–¹æ³•å‚è€ƒæ–‡æ¡£ã€ŠWiresharkå…¥é—¨ç¯‡ã€‹
å®‰è£…ksniff1ã€å®‰è£…krewkrewå®‰è£…æ–¹æ³•å‚è€ƒæ–‡æ¡£ã€Škubectlæ’ä»¶ç®¡ç†å™¨krewã€‹
2ã€å®‰è£…ksniff
kubectl krew install sniffkubectl sniff --help

ä½¿ç”¨ksniffåˆ›å»ºæµ‹è¯•å®¹å™¨kubectl run test --image=busybox --command sleep 7200

å®æ—¶æŠ“åŒ…kubectl sniff test -n default
æ‰§è¡Œè¯¥å‘½ä»¤åï¼Œä¼šè‡ªåŠ¨å¼¹å‡ºæœ¬åœ°å®‰è£…çš„ wireshark å¹¶å®æ—¶æ•è·ã€‚å¦‚æœæŠ¥é”™Error: signal: abort trapï¼Œå¯ä»¥å°è¯•å†æ¬¡æ‰§è¡Œè¯¥å‘½ä»¤ã€‚
æ‰§è¡Œä¸€äº›ç½‘ç»œå‘½ä»¤kubectl exec -it test -- /bin/shnslookup www.baidu.com
podä¸­æ‰§è¡Œå‘½ä»¤åï¼Œä¼šåœ¨wiresharkä¸­çœ‹åˆ°æ•è·çš„ç½‘ç»œåŒ…ã€‚
æŠ“åŒ…ä¿å­˜æˆæ–‡ä»¶æœ‰æ—¶æˆ‘ä»¬å¯èƒ½æ— æ³•ç›´æ¥åœ¨æœ¬åœ°æ‰§è¡Œ kubectlï¼Œè¿™æ—¶å¯ä»¥å…ˆæŠ“åŒ…ä¿å­˜æˆæ–‡ä»¶ï¼Œç„¶åæ‹·è´åˆ°æœ¬åœ°ä½¿ç”¨wiresharkè¿›è¡Œåˆ†æã€‚
kubectl sniff test -n default -o test.pcap

ç‰¹æƒæ¨¡å¼kubectl sniff test -n default -p

æŸ¥çœ‹æ˜æ–‡å¦‚æœæ•°æ®åŒ…å†…å®¹å¾ˆå¤šéƒ½æ˜¯æ˜æ–‡ (æ¯”å¦‚ HTTP)ï¼Œåªå¸Œæœ›å¤§æ¦‚çœ‹ä¸‹æ˜æ–‡å†…å®¹ï¼Œå¯ä»¥æŒ‡å®š -o - å°†æŠ“åŒ…å†…å®¹ç›´æ¥æ‰“å°åˆ°æ ‡å‡†è¾“å‡º (stdout)
kubectl sniff test -n default -o -

æŠ“åŒ…æ—¶è¿‡æ»¤æŒ‡å®š tcpdump è¿‡æ»¤æ¡ä»¶ï¼Œå±è”½æ‰ä¸éœ€è¦çš„æ•°æ®ï¼Œé¿å…æ•°æ®é‡è¿‡å¤§ã€‚
kubectl sniff test -n default -f &quot;port 80&quot;




]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>network</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>chatgpt</tag>
        <tag>ç½‘ç»œ</tag>
        <tag>kubectl</tag>
        <tag>wireshark</tag>
      </tags>
  </entry>
  <entry>
    <title>GitLab Pipelineç»Ÿè®¡</title>
    <url>/dev-gitlab-pipeline-statistics/</url>
    <content><![CDATA[éœ€æ±‚æè¿°è®¡åˆ’å¯¹CICDè¿›è¡Œä¼˜åŒ–ï¼Œä¸»è¦åŒ…æ‹¬é™ä½pipelineçš„å¤±è´¥ç‡å’Œé™ä½æ„å»ºå‘å¸ƒæ—¶é—´ã€‚
æœ€å¼€å§‹ï¼Œè¦å¯¹pipelineè¿›è¡Œç»Ÿè®¡ï¼Œææ¸…æ¥šå½“å‰çš„æƒ…å†µï¼Œåšåˆ°å¿ƒé‡Œæœ‰â€œæ•°â€ï¼Œåˆ¶å®šåˆç†çš„ç›®æ ‡ã€‚ä¼˜åŒ–ä¸€æ®µæ—¶é—´åï¼Œéœ€è¦å†ç”¨ç›¸åŒçš„ç»Ÿè®¡æ–¹æ³•å¯¹pipelineè¿›è¡Œç»Ÿè®¡ï¼Œçœ‹çœ‹ä¼˜åŒ–çš„æ•ˆæœã€‚
å¥½äº†ï¼Œé—®é¢˜æ¥äº†ï¼šæ€æ ·ç»Ÿè®¡æœ€è¿‘ä¸¤ä¸ªæœˆçš„gitlab pipelineï¼Ÿå…·ä½“éœ€æ±‚åŒ…æ‹¬ï¼š 

æ€»çš„pipelineæ¬¡æ•°
æˆåŠŸçš„pipelineæ¬¡æ•°
å¤±è´¥çš„pipelineæ¬¡æ•°
å–æ¶ˆçš„pipelineæ¬¡æ•°
è·³è¿‡çš„pipelineæ¬¡æ•°
è€—æ—¶è¶…è¿‡5åˆ†é’Ÿçš„pipelineæ¬¡æ•°
è€—æ—¶è¶…è¿‡10åˆ†é’Ÿçš„pipelineæ¬¡æ•°
è€—æ—¶è¶…è¿‡åŠå°æ—¶çš„pipelineæ¬¡æ•°
è€—æ—¶è¶…è¿‡1å°æ—¶çš„pipelineæ¬¡æ•°
pipelineçš„å¤±è´¥ç‡

ä½¿ç”¨GitLabçš„Analyticså¯ä»¥çœ‹åˆ°éƒ¨åˆ†æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ï¼Œæ¯”å¦‚æŸä¸ªæœˆçš„pipelineæ€»æ¬¡æ•°ï¼Œå¤±è´¥çš„æ€»æ¬¡æ•°ç­‰ã€‚ä½†æ˜¯å¹¶ä¸èƒ½æ ¹æ®æˆ‘ä»¬çš„éœ€è¦é€‰æ‹©æ—¶é—´æ®µè¿›è¡Œç»Ÿè®¡ï¼Œä¹Ÿä¸èƒ½ç»Ÿè®¡pipelineçš„æŒç»­æ—¶é—´ï¼Œå› æ­¤æœ€å¥½çš„æ–¹æ³•æ˜¯é€šè¿‡GitLab APIè¿›è¡Œç»Ÿè®¡ã€‚
å‚è€ƒæ–‡æ¡£ï¼šPipelines API


éœ€æ±‚å¤„ç†ä»¥ä¸‹å†…å®¹ä¸»è¦æ¥è‡ªchatgptï¼Œç¨ä½œä¿®æ”¹ã€‚
è·å–API Tokenåœ¨ GitLab ä¸­è·å– API è®¿é—® token çš„æ­¥éª¤å¦‚ä¸‹ï¼š

ç™»å½•åˆ° GitLab ç½‘ç«™ã€‚

ç‚¹å‡»å³ä¸Šè§’å¤´åƒï¼Œé€‰æ‹© â€œSettingsâ€ã€‚

åœ¨å·¦ä¾§èœå•æ ä¸­ï¼Œé€‰æ‹© â€œAccess Tokensâ€ã€‚

è¾“å…¥ä¸€ä¸ªæè¿°ä¿¡æ¯ï¼Œå¹¶é€‰æ‹©éœ€è¦æˆäºˆ API è®¿é—®æƒé™çš„èŒƒå›´ï¼Œç„¶åç‚¹å‡» â€œCreate Personal Access Tokenâ€ã€‚

å¤åˆ¶ç”Ÿæˆçš„è®¿é—® tokenã€‚


è¯·æ³¨æ„ï¼Œè®¿é—® token æ˜¯æ•æ„Ÿä¿¡æ¯ï¼Œè¯·å¦¥å–„ä¿ç®¡ï¼Œä¸è¦æ³„éœ²ç»™ä»–äººã€‚æ­¤å¤–ï¼Œä¸ºäº†ä¿è¯å®‰å…¨æ€§ï¼Œå»ºè®®å®šæœŸæ›´æ¢è®¿é—® tokenã€‚
ä»£ç å®Œæ•´ä»£ç è¯·è®¿é—®ï¼šgitlab-pipeline-statistics/statistics.py
ä»¥ä¸Šä»£ç é€‚ç”¨äºGitLab 14.0.5 ï¼Œå…¶ä»–ç‰ˆæœ¬ä¸ä¸€å®šé€‚ç”¨ã€‚
æ³¨æ„ï¼šæˆåŠŸæ¬¡æ•°+å¤±è´¥æ¬¡æ•°+å–æ¶ˆæ¬¡æ•°+è·³è¿‡æ¬¡æ•° != æ€»æ¬¡æ•°å› ä¸ºé™¤äº†è¿™å››ç§å¸¸è§çŠ¶æ€ï¼Œè¿˜æœ‰ä¸ƒç§çŠ¶æ€ï¼Œå…·ä½“çŠ¶æ€å¯ä»¥å‚è€ƒPipelines APIã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>cicd</tag>
        <tag>gitlab</tag>
        <tag>chatgpt</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoé…ç½®GitHub Actionsè‡ªåŠ¨æ„å»ºå‘å¸ƒ</title>
    <url>/dev-hexo-github-actions/</url>
    <content><![CDATA[Travis CIå¿…é¡»ä»˜è´¹äº†2023å¹´2æœˆ25æ—¥ï¼Œä½¿ç”¨travis ciéƒ¨ç½²hexoé¡¹ç›®ï¼Œå‘ç°å¹¶æ²¡æœ‰è§¦å‘ä»»åŠ¡ã€‚
ç™»å½•travis ciï¼Œå‘ç°æç¤ºï¼š

Builds have been temporarily disabled for public repositories due to a negative credit balance. Please go to the Plan page to replenish your credit balance or alter your Consume paid credits for OSS setting.

åœ¨travis ci plané¡µé¢å…³é—­äº†Consume paid credits for OSSï¼Œä½†æ˜¯ä¾ç„¶æç¤ºï¼š

Builds have been temporarily disabled for private and public repositories due to a negative credit balance. Please go to the Plan page to replenish your credit balance.

ç‚¹å‡»Change planï¼Œå‘ç°å·²ç»æ²¡æœ‰å…è´¹çš„planäº†ï¼Œè€Œæœ€ä¾¿å®œçš„planï¼Œä¹Ÿè¦$69/monthlyï¼Œå¤ªè´µäº†ï¼Œæ”¾å¼ƒã€‚ä¸è¿‡å¯ä»¥ç†è§£ï¼Œæ¯•ç«Ÿè·‘CIæ˜¯éœ€è¦æœåŠ¡å™¨çš„ï¼ŒæœåŠ¡å™¨æ˜¯éœ€è¦èŠ±é’±çš„ã€‚
é‚£å°±æ¢æˆGitHub Actionså§ï¼Œæœ‰ä»˜è´¹ç‰ˆï¼Œä¹Ÿæœ‰å…è´¹ç‰ˆã€‚


Quickstart for GitHub Actionså‚è€ƒæ–‡æ¡£ï¼šQuickstart for GitHub Actions
1ã€ åˆ›å»ºæ–°çš„åˆ†æ”¯ï¼ˆå› ä¸ºåŸåˆ†æ”¯æ˜¯é€‚ç”¨äºtravis ciçš„ï¼‰
git checkout -b github-actiongit push origin HEAD:github-action

2ã€ åˆ›å»º github-actions-demo.yml æ–‡ä»¶voidking/hexo-deployé¡¹ç›®ä¸­æ‰§è¡Œ
mkdir -p .github/workflowsvim .github/workflows/github-actions-demo.yml

github-actions-demo.yml æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
name: GitHub Actions Demorun-name: $&#123;&#123; github.actor &#125;&#125; is testing out GitHub Actions ğŸš€on: [push]jobs:  Explore-GitHub-Actions:    runs-on: ubuntu-latest    steps:      - run: echo &quot;ğŸ‰ The job was automatically triggered by a $&#123;&#123; github.event_name &#125;&#125; event.&quot;      - run: echo &quot;ğŸ§ This job is now running on a $&#123;&#123; runner.os &#125;&#125; server hosted by GitHub!&quot;      - run: echo &quot;ğŸ” The name of your branch is $&#123;&#123; github.ref &#125;&#125; and your repository is $&#123;&#123; github.repository &#125;&#125;.&quot;      - name: Check out repository code        uses: actions/checkout@v3      - run: echo &quot;ğŸ’¡ The $&#123;&#123; github.repository &#125;&#125; repository has been cloned to the runner.&quot;      - run: echo &quot;ğŸ–¥ï¸ The workflow is now ready to test your code on the runner.&quot;      - name: List files in the repository        run: |          ls $&#123;&#123; github.workspace &#125;&#125;      - run: echo &quot;ğŸ This job&#x27;s status is $&#123;&#123; job.status &#125;&#125;.&quot;

3ã€ ä¸Šä¼ ä»£ç 
git add .git commit -m &quot;github action test&quot;git push

æŠ¥é”™ï¼šrefusing to allow a Personal Access Token to create or update workflow .github/workflows/github-actions-demo.yml without workflow scope
è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„Access Tokenéœ€è¦å…·æœ‰create or update workflowçš„æƒé™ï¼Œå› æ­¤éœ€è¦é‡æ–°åˆ›å»ºä¸€ä¸ªAccess Tokenã€‚å…·ä½“æ“ä½œæ–¹æ³•ï¼šè®¿é—®Personal access tokens (classic)é¡µé¢ï¼ŒGenerate new tokenï¼Œç”Ÿæˆtokenæ—¶ä¸€å®šè¦å‹¾é€‰repoå’Œworkflowã€‚
ç„¶åï¼Œä½¿ç”¨æ–°çš„tokenå†æ¬¡pushå³å¯ã€‚ä¿®æ”¹tokençš„æ–¹æ³•å‚è€ƒæ–‡æ¡£ã€ŠGitå®ç”¨å‘½ä»¤ã€‹ã€‚
4ã€æŸ¥çœ‹Actionsè®¿é—®voidking/hexo-deploy Actionsé¡µé¢ï¼Œå³å¯çœ‹åˆ°CI workflowsï¼ˆç›¸å½“äºgitlabä¸­çš„pipelinesï¼‰ã€‚
Hexoé…ç½®GitHub Actionså‚è€ƒæ–‡æ¡£ï¼š

GitHub Actions
Workflow syntax for GitHub Actions
Hexo Action
åˆ©ç”¨ Github Actions è‡ªåŠ¨éƒ¨ç½² Hexo åšå®¢
GitHub Actions æ•™ç¨‹ï¼šå®šæ—¶å‘é€å¤©æ°”é‚®ä»¶

CICDæ€è·¯
æ‹‰å–è´Ÿè´£éƒ¨ç½²çš„hexo-deploy repoï¼Œé‡Œé¢æ˜¯hexoçš„é…ç½®æ–‡ä»¶ï¼ˆå…³äºç«™ç‚¹é…ç½®å’Œæ„å»ºé…ç½®ç­‰ï¼Œè¯¦æƒ…å‚è€ƒã€ŠHexoé…ç½®Travis CIè‡ªåŠ¨æ„å»ºå‘å¸ƒã€‹ï¼‰
æ‹‰å–hexo theme repoï¼Œé‡Œé¢æ˜¯ç«™ç‚¹ä¸»é¢˜
æ‹‰å–hexo-backup repoï¼Œé‡Œé¢æ˜¯markdownæ–‡æ¡£
hexo-backupä¸­çš„æ–‡æ¡£æ”¾åˆ°hexoå¯ä»¥æ„å»ºï¼ˆç¼–è¯‘ï¼‰çš„ä½ç½®
å®‰è£…nodejs
å®‰è£…hexoã€gulpç­‰ä¾èµ–
æ‰§è¡Œæ„å»ºï¼ˆç¼–è¯‘ï¼‰
ä¸Šä¼ ç¼–è¯‘åçš„htmlç­‰é™æ€æ–‡ä»¶åˆ°ä¸¤ä¸ªpages repoa. github pagesæ˜¯å›½å¤–æµé‡çš„æºç«™b. aliyun serveræ˜¯å›½å†…æµé‡çš„æºç«™c. aliyun serverä»gitee pagesæ‹‰å–æœ€æ–°ç‰ˆæœ¬d. gitee pagesæœ¬èº«ä¸å¯¹å¤–æä¾›æœåŠ¡ï¼Œåªæ˜¯ä½œä¸ºä¸€ä¸ªgitä»“åº“
aliyun serverä»gitee pagesæ‹‰å–æœ€æ–°ç‰ˆæœ¬

å‡†å¤‡github-actions.ymlgithub-actions.ymlå†…å®¹å¦‚ä¸‹ï¼š
name: Hexo CICDrun-name: $&#123;&#123; github.actor &#125;&#125; build and deploy hexo!on:  push:    branches:      - master      - github-actionsenv:  GIT_USER: voidking  HEXO_BACKUP_REPO: voidking/hexo-backup  HEXO_BACKUP_REPO_BRANCH: master  HEXO_THEME_REPO: voidking/hexo-theme-next  HEXO_THEME_REPO_BRANCH: root  GITHUB_PAGES_REPO: github.com/voidking/voidking.github.io.git  GITEE_PAGES_REPO: gitee.com/voidking/voidking.git  GITHUB_PAGES_URL: &quot;https://$&#123;GIT_USER&#125;:$&#123;&#123; secrets.GH_TOKEN &#125;&#125;@$&#123;GITHUB_PAGES_REPO&#125;&quot;  GITEE_PAGES_URL: &quot;https://$&#123;GIT_USER&#125;:$&#123;&#123; secrets.GITEE_TOKEN &#125;&#125;@$&#123;GITEE_PAGES_REPO&#125;&quot;  ALI_IP: 8.136.13.58  ALI_USER: voidking  jobs:  build:    name: Build on node $&#123;&#123; matrix.node_version &#125;&#125; and $&#123;&#123; matrix.os &#125;&#125;    runs-on: ubuntu-latest    strategy:      matrix:        os: [ubuntu-latest]        node_version: [12.22.5]    steps:    - name: Checkout repo      uses: actions/checkout@v2    - name: Checkout theme repo      uses: actions/checkout@v2      with:        repository: $&#123;&#123; env.HEXO_THEME_REPO &#125;&#125;        ref: $&#123;&#123; env.HEXO_THEME_REPO_BRANCH &#125;&#125;        path: themes/next    - name: Checkout hexo-backup repo      uses: actions/checkout@v2      with:        repository: $&#123;&#123; env.HEXO_BACKUP_REPO &#125;&#125;        ref: $&#123;&#123; env.HEXO_BACKUP_REPO_BRANCH &#125;&#125;        path: hexo-backup        token: $&#123;&#123; secrets.GH_TOKEN &#125;&#125;    - name: Move markdown articles to current directory      run: mv hexo-backup/source . &amp;&amp; rm -rf source/private    - name: Install nodejs $&#123;&#123; matrix.node_version &#125;&#125;      uses: actions/setup-node@v3      with:        node-version: $&#123;&#123; matrix.node_version &#125;&#125;    - name: Install nodejs dependencies      run: npm install    - name: Build nodejs project      run: npm run build    - name: Push to voidking.github.io and gitee      run: |        git config --global user.name &quot;voidking&quot;        git config --global user.email &quot;voidking@qq.com&quot;        git clone https://$&#123;&#123; secrets.GH_TOKEN &#125;&#125;@$&#123;&#123; env.GITHUB_PAGES_REPO &#125;&#125; voidking        cd voidking        rm -rfv `ls -a | grep -vw &#x27;\.&#x27; | grep -vw &#x27;\.git&#x27; | xargs`        ls -al        # unalias cp         cp -rf ../public/. .        cp ../source/.travis.yml .        git add . &amp;&amp; git commit -m &quot;GitHub Actions Auto Builder&quot;        git push --force --quiet $&#123;&#123; env.GITHUB_PAGES_URL &#125;&#125; master:master        git push --force --quiet $&#123;&#123; env.GITEE_PAGES_URL &#125;&#125; master:master    deploy:    name: Deploy to Aliyun Server    needs: build    runs-on: ubuntu-latest    steps:    - name: Configure id_rsa      run: |        mkdir -p ~/.ssh/        echo $&#123;&#123; secrets.ID_RSA &#125;&#125; | base64 -d &gt; ~/.ssh/id_rsa        chmod 600 ~/.ssh/id_rsa    - name: Execute ssh command      run: |        ssh -o StrictHostKeyChecking=no \        -o PubkeyAcceptedKeyTypes=ssh-rsa \        $&#123;&#123; env.ALI_USER &#125;&#125;@$&#123;&#123; env.ALI_IP &#125;&#125; \        &quot;cd /opt/nginx/work/voidking/ &amp;&amp; git pull --force --quiet $&#123;&#123; env.GITEE_PAGES_URL &#125;&#125; master:master&quot;

è¯´æ˜ï¼š

github actionä¸­å®šä¹‰å˜é‡æœ‰ä¸‰ç§æ–¹å¼ï¼švarsã€secretså’Œenvã€‚
vars/secretsåœ¨workflowè§¦å‘å‰å®šä¹‰ï¼Œenvåœ¨workflowè§¦å‘åå®šä¹‰ã€‚
$&#123;&#123;&#125;&#125;åŒèŠ±æ‹¬å·è¡¨ç¤ºä¸Šä¸‹æ–‡å¼•ç”¨ï¼Œè¯¦æƒ…å‚è€ƒContext availabilityã€‚
$&#123;&#125;å•èŠ±æ‹¬å·è¡¨ç¤ºshellæ–¹å¼ä½¿ç”¨ä¸­envå˜é‡ã€‚
ä½¿ç”¨envä¸­çš„å˜é‡æœ‰ä¸¤ç§æ–¹å¼ï¼šä¸Šä¸‹æ–‡å¼•ç”¨å’Œshellæ–¹å¼ä½¿ç”¨ã€‚

é…ç½®åŠ å¯†å˜é‡ä¸Šé¢çš„workflowé…ç½®ä¸­ï¼Œç”¨åˆ°äº†ä¸€äº›æ•æ„Ÿå˜é‡ï¼ŒGH_TOKENã€GITEE_TOKENå’ŒID_RSAï¼Œè¿™äº›å˜é‡éœ€è¦åŠ å¯†ã€‚
é…ç½®åŠ å¯†å˜é‡çš„æ–¹æ³•ï¼š

repositoryçº§åˆ«å˜é‡ï¼šProject -&gt; Settings -&gt; Actions secrets and variables -&gt; New repository secret
environmentsçº§åˆ«å˜é‡ï¼šProject -&gt; Settings -&gt; Actions secrets and variables -&gt; Manage enviroments -&gt; New enviroment -&gt; Environment secrets -&gt; Add secret

å…¶ä¸­ID_RSAçš„è·å–æ–¹æ³•ä¸ºï¼š
ssh-keygenALI_IP=&quot;8.136.13.58&quot;ssh-copy-id -i ~/.ssh/id_rsa.pub voidking@$&#123;ALI_IP&#125;cat .ssh/id_rsa | base64 | tr -d &#x27;\n&#x27;

CICDæµ‹è¯•git add .git commit -m &quot;github action test&quot;git push

è®¿é—®voidking/hexo-deploy Actionsé¡µé¢ï¼Œå³å¯çœ‹åˆ°æœ€æ–°çš„workflowã€‚æœ€å¼€å§‹éš¾å…å‡ºé”™ï¼Œæ ¹æ®æŠ¥é”™è¿›è¡Œè°ƒæ•´å³å¯ã€‚
æœ€ç»ˆï¼Œå®ç°äº†å’Œtravis ciä¸Šä¸€æ ·çš„åŠŸèƒ½ï¼Œniceã€‚
è¸©å‘è®°å½•envä¸èƒ½ç”¨åœ¨job:ifå½“ä½¿ç”¨job:ifæ—¶ï¼Œå¦‚ä¸‹å®šä¹‰ï¼š
env:  BUILD: &quot;false&quot;jobs:  build:    name: Build    if: $&#123;&#123; env.BUILD == &quot;true&quot; &#125;&#125;    runs-on: ubuntu-latest

æŠ¥é”™ï¼š Unrecognized named-value: â€˜envâ€™. Located at position 1 within expression: env.BUILD == â€œtrueâ€ .github/workflows/github-actions.yml
è¿™æ˜¯ä¸ªgithub actionçš„å‘ï¼Œå‚è€ƒæ–‡æ¡£ï¼š

Workflow level env does not work properly in all fields.
workflow level env. is unrecognised on job levelâ€™s â€˜ifâ€™-expression when calling reusable workflow

workflow_dispatchæ— æ•ˆå½“ä½¿ç”¨job:ifæ—¶ï¼Œå¦‚ä¸‹å®šä¹‰ï¼š
on:  workflow_dispatch:    inputs:      build:        description: &quot;build project&quot;        required: true        default: true        type: booleanjobs:  build:    name: Build    if: $&#123;&#123; inputs.build &#125;&#125;    runs-on: ubuntu-latest

æ— æ³•è§¦å‘build jobã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>hexo</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>git</tag>
        <tag>cicd</tag>
        <tag>travis-ci</tag>
        <tag>github-actions</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS8æ›´æ¢è½¯ä»¶å®‰è£…æº</title>
    <url>/dev-centos8-change-repo/</url>
    <content><![CDATA[å‰è¨€CentOS8å·²äº2021å¹´12æœˆ31æ—¥åœæ­¢ç»´æŠ¤ï¼Œåœ¨2022å¹´1æœˆ31æ—¥ï¼ŒCentOSå›¢é˜Ÿç»ˆäºä»å®˜æ–¹é•œåƒä¸­ç§»é™¤CentOS8çš„æ‰€æœ‰åŒ…ã€‚
å¦‚æœä»ç„¶éœ€è¦è¿è¡ŒCentOS8ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨/etc/yum.repos.dä¸­æ›´æ–°å®‰è£…æºã€‚


æ›´æ¢æ–¹æ³•1ã€å¤‡ä»½åŸå®‰è£…æº
cp -r /etc/yum.repos.d&#123;,.bak&#125;

2ã€æ›¿æ¢å®‰è£…æº
rm /etc/yum.repos.d/*.repo -rfwget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo#curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo

3ã€æ›´æ–°å®‰è£…æº
yum clean allyum makecache

]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>centos</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockeré—®é¢˜è®°å½•</title>
    <url>/dev-docker-problem/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡è®°å½•ä½¿ç”¨Dockerè¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³åŠæ³•ã€‚


dockerå¯åŠ¨å¤±è´¥é—®é¢˜æè¿°dockerå¯åŠ¨å¡ä½ï¼ŒæŸ¥çœ‹æ—¥å¿—
systemctl status docker -ljournalctl -ru docker
æŠ¥é”™ï¼š
Error (Unable to complete atomic operation, key modified) deleting object [endpoint 622bf1a499580702606742e5f5554ac99e7c0d61abcd5d9063881fc2da33d16f afdce62ce70de2cbe5a971b05521280940947e4968c163e48c3e5252919a4fae], retrying....

è§£å†³åŠæ³•ps -ef | grep dockerkill -9 xxxsystemctl stop containerdsystemctl start docker

OCI runtime create failedé—®é¢˜æè¿°åŸæœ¬å¯ä»¥æ­£å¸¸å¯åŠ¨nvidia runtimeçš„å®¹å™¨ï¼Œä½¿ç”¨ç›¸åŒçš„å¯åŠ¨å‘½ä»¤ï¼Œçªç„¶æœ‰ä¸€å¤©å¼€å§‹æŠ¥é”™ï¼š
docker: Error response from daemon: OCI runtime create failed: container_linux.go:380: starting container process caused: process_linux.go:545: container init caused: Running hook #1:: error running hook: exit status 1, stdout: , stderr: nvidia-container-cli: initialization error: driver error: failed to process request: unknown.docker: Error response from daemon: OCI runtime create failed: container_linux.go:380: starting container process caused: process_linux.go:545: container init caused: Running hook #1:: error running hook: exit status 1, stdout: , stderr: Auto-detected mode as &#x27;legacy&#x27;nvidia-container-cli: initialization error: load library failed: /usr/bin/../lib64/libm.so.6: symbol __strtof128_nan, version glibc_private not defined in file libc.so.6 with link time reference: unknown.

è§£å†³åŠæ³•å°è¯•äº†é‡å¯dockerã€é‡å¯ä¸»æœºã€é‡è£…nvidia-container-tookitã€é‡è£…nvidiaé©±åŠ¨ï¼Œå…¨éƒ¨æ— æ•ˆã€‚
æœ€ç»ˆè§£å†³åŠæ³•ï¼šæ£€æŸ¥libm.so.6çš„è½¯é“¾æŒ‡å‘ï¼Œä¿®æ”¹æŒ‡å‘åˆ°å¦å¤–çš„libmã€‚
cd /usr/bin/../lib64/ln -snf libm-2.17.so  libm.so.6

error pulling image configurationé—®é¢˜æè¿°docker pull ubuntu æŠ¥é”™ï¼š
Using default tag: latestlatest: Pulling from library/ubuntu6b851dcae6ca: Pulling fs layererror pulling image configuration: Get https://production.cloudflare.docker.com/registry-v2/docker/registry/v2/blobs/sha256/99/99284ca6cea039c7784d1414608c6e846dd56830c2a13e1341be681c3ffcc8ac/data?verify=1687183284-D5%2FDxEvl7V%2BLtRcgWmwP0MDFiTo%3D: dial tcp 104.18.125.25:443: i/o timeout

é—®é¢˜åˆ†æproduction.cloudflare.docker.com çš„IPæ˜¯ä¼šå˜åŒ–çš„ï¼Œå½“å‰çš„è¿™ä¸ª 104.18.121.25 åˆšå¥½è¢«å¢™äº†ï¼Œæ— æ³•è®¿é—®ã€‚æŸ¥çœ‹æ˜¯å¦è¢«å¢™çš„åŠæ³•ï¼šè®¿é—®ITDOGï¼Œè¾“å…¥ production.cloudflare.docker.com è¿™ä¸ªç½‘å€ã€‚
è§£å†³åŠæ³•ä¸€é…ç½®ä½¿ç”¨é•œåƒç«™ï¼Œä»é•œåƒç«™æ‹‰å–é•œåƒï¼Œé¿å¼€ production.cloudflare.docker.com è¿™ä¸ªåŸŸåã€‚
1ã€ç¼–è¾‘dockeré…ç½®æ–‡ä»¶ 
vim /etc/docker/daemon.json

æ·»åŠ  registry-mirrors é…ç½®ï¼Œé…ç½®æ–¹æ³•å‚è€ƒã€ŠDockeré•œåƒç«™çš„é…ç½®å’Œä½¿ç”¨ã€‹
2ã€é‡å¯docker
systemctl restart dockerdocker info

è§£å†³åŠæ³•äºŒè§£å†³åŠæ³•ä¸€ï¼Œæœ‰æ—¶ä¹Ÿä¸å¯è¡Œï¼Œå› ä¸ºæœ‰å¯èƒ½å…¨å›½éƒ½è¢«å¢™äº†ï¼Œé•œåƒç«™ä¹Ÿæ— æ³•ä»æºç«™æ‹‰å–æˆ‘ä»¬éœ€è¦çš„é•œåƒã€‚
æ­¤æ—¶åªèƒ½ä½¿ç”¨ç»ˆæè§£å†³åŠæ³•ï¼šä½¿ç”¨æ¢¯å­ã€‚æ–¹æ³•ä¸€ï¼šæœºå™¨ä¸Šç›´æ¥é…ç½®ä½¿ç”¨æ¢¯å­ï¼Œé…ç½®æ–¹æ³•å‚è€ƒã€ŠLinuxé…ç½®ç½‘ç»œä»£ç†ã€‹ã€‚æ–¹æ³•äºŒï¼šæ­å»ºä¸€ä¸ªdockeræœ¬åœ°é•œåƒç«™ï¼Œé…ç½®ä½¿ç”¨æ¢¯å­ï¼›å…¶ä»–æœºå™¨é…ç½®ä½¿ç”¨è¿™ä¸ªdockeré•œåƒç«™ã€‚é…ç½®æ–¹æ³•å‚è€ƒã€ŠDockeré•œåƒç«™çš„é…ç½®å’Œä½¿ç”¨ã€‹ã€‚
failed to compute cache keyé—®é¢˜æè¿°å·²çŸ¥Dockerfileå†…å®¹ä¸ºï¼š
FROM alpine:3.7.3WORKDIR /home/workCOPY Dockerfile .

Dockerfileæ‰€åœ¨ç›®å½•ï¼Œæ‰§è¡Œdocker buildæŠ¥é”™ï¼š
failed to compute cache key: failed to calculate checksum of ref moby::heujqm1lca2el12jsbquzoarg: &quot;/Dockerfile&quot;: not found

è§£å†³åŠæ³•æ£€æŸ¥ .dockerignore æ–‡ä»¶ï¼Œå¤§æ¦‚ç‡æ˜¯å› ä¸ºè¯¥æ–‡ä»¶ä¸­å¿½ç•¥äº† Dockerfile ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>cloudnative</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>gpu</tag>
      </tags>
  </entry>
  <entry>
    <title>GitLab CIé…ç½®ä»£ç è´¨é‡æ£€æŸ¥</title>
    <url>/dev-gitlab-ci-code-quality-check/</url>
    <content><![CDATA[æ€æ ·ä¿è¯ä»£ç è´¨é‡ï¼Ÿä¿è¯ä»£ç è´¨é‡æœ‰ä¸‰ç§å¸¸ç”¨çš„æ–¹æ³•ï¼šCode Reviewã€ç¼–ç è§„èŒƒå’Œå•å…ƒæµ‹è¯•ã€‚
Code Reviewéœ€è¦åˆ«äººå¸®åŠ©Reviewï¼Œç°åœ¨å¯ä»¥æ‰¾ChatGPTå¸®åŠ©Reviewã€‚è€Œå¯¹äºç¼–ç è§„èŒƒæ£€æŸ¥å’Œè¿è¡Œå•å…ƒæµ‹è¯•ï¼Œæ˜¯å¯ä»¥é€šè¿‡CIæµæ°´çº¿è‡ªåŠ¨å®Œæˆçš„ã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ åœ¨GitLab CIæµæ°´çº¿ä¸­é…ç½®ç¼–ç è§„èŒƒæ£€æŸ¥å’Œè¿è¡Œå•å…ƒæµ‹è¯•ã€‚


ç¼–ç è§„èŒƒæ£€æŸ¥å‚è€ƒæ–‡æ¡£ï¼š

Code Quality
gitlab-org/ci-cd/codequality

GitLabå®˜æ–¹ç»™çš„æ–‡æ¡£ï¼Œä½¿ç”¨codeclimateè¿›è¡Œç¼–ç è§„èŒƒæ£€æŸ¥ã€‚é’ˆå¯¹pythonï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨codeclimateï¼Œè€Œæ˜¯ä½¿ç”¨æ›´åŠ å¸¸ç”¨çš„pylintæˆ–è€…flake8ã€‚
ç¤ºä¾‹ï¼š
stages:  - code_checkcode_check:  stage: code_check  image: python:3.7.10-slim-buster  before_script:   - pip install pylint -i https://pypi.tuna.tsinghua.edu.cn/simple  script:    - pylint **/*.py

å•å…ƒæµ‹è¯•ç¤ºä¾‹ï¼š
stages:  - unittestunittest:  stage: unittest  image: python:3.7.10-slim-buster  before_script:     - pip install pytest -i https://pypi.tuna.tsinghua.edu.cn/simple  script:    - pytest --junitxml=report.xml tests/  artifacts:    reports:      junit: report.xml

ä¸‹è½½report.xmlçš„æ–¹æ³•ï¼šè¿›å…¥CI/CD Pipelinesé¡µé¢ï¼Œæ‰¾åˆ°Jobå¯¹åº”çš„Pipelineï¼Œæœ€å³è¾¹ä¸‰ä¸ªç‚¹ï¼Œç‚¹å‡»ä¸‹è½½artifactsã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ã€ŠPythonå•å…ƒæµ‹è¯•ã€‹
ã€ŠGitLab CI/CDå…¥é—¨ç¯‡ã€‹

å•å…ƒæµ‹è¯•è¦†ç›–ç‡ç¤ºä¾‹ï¼š
stages:  - unittestunittest:  stage: unittest  image: python:3.7.10-slim-buster  before_script:     - pip install pytest pytest-cov -i https://pypi.tuna.tsinghua.edu.cn/simple  script:    - pytest --cov-report xml --cov=. tests/    - coverage report --precision=2  coverage: &#x27;/\d+\.\d+%$/&#x27;  artifacts:    reports:      cobertura: coverage.xml

å…¶ä¸­coverage reportè¾“å‡ºå†…å®¹ç»“æ„ä¸ºï¼š
Name    Stmts    Miss   Cover-----------------------------...main.py   36      36       0%-----------------------------TOTAL   3130    3127    0.10%

æ­£åˆ™åŒ¹é…coverageï¼Œæœ€ç»ˆè¾“å‡ºåˆ°UIçš„æ˜¯æœ€åä¸€ä¸ªåŒ¹é…åˆ°çš„å€¼0.10ã€‚
ä¸‹è½½coverage.xmlçš„æ–¹æ³•ï¼šè¿›å…¥CI/CD Pipelinesé¡µé¢ï¼Œæ‰¾åˆ°Jobå¯¹åº”çš„Pipelineï¼Œæœ€å³è¾¹ä¸‰ä¸ªç‚¹ï¼Œç‚¹å‡»ä¸‹è½½artifactsã€‚
æŸ¥çœ‹å•æµ‹è¦†ç›–ç‡çš„æ–¹æ³•ï¼šè¿›å…¥CI/CD Pipelinesé¡µé¢ï¼Œè¿›å…¥Jobå¯¹åº”çš„Pipelineè¯¦æƒ…ï¼Œç‚¹å‡»Jobsï¼Œå¯ä»¥çœ‹åˆ°Coverageã€‚
æŸ¥çœ‹å•æµ‹è¦†ç›–ç‡çš„æ–¹æ³•2ï¼šJobè¯¦æƒ…é¡µï¼Œç›´æ¥æŸ¥çœ‹coverage reportå‘½ä»¤çš„è¾“å‡ºå†…å®¹ã€‚
å•å…ƒæµ‹è¯•å’Œå•å…ƒæµ‹è¯•è¦†ç›–ç‡ï¼Œå¯ä»¥åˆå¹¶ä¸ºä¸€ä¸ªstageï¼š
stages:  - unittestunittest:  stage: unittest  image: python:3.7.10-slim-buster  before_script:     - pip install pytest pytest-cov -i https://pypi.tuna.tsinghua.edu.cn/simple  script:    #- export PYTHONPATH=&quot;$CI_PROJECT_DIR&quot;    - pytest --junitxml=report.xml --cov-report xml --cov=. tests/    - coverage report --precision=2  coverage: &#x27;/\d+\.\d+%$/&#x27;  artifacts:    reports:      junit: report.xml      cobertura: coverage.xml

å‚è€ƒæ–‡æ¡£ï¼š

Test coverage visualization
ã€ŠGitLab CI/CDå…¥é—¨ç¯‡ã€‹

æ‰©å±•git hooksGité’©å­æ˜¯ä¸€äº›åœ¨Gitæ‰§è¡Œç‰¹å®šæ“ä½œæ—¶è§¦å‘çš„è„šæœ¬ï¼Œå¯ä»¥ç”¨äºè‡ªå®šä¹‰å’Œè‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹ï¼Œä¸åŒçš„Gité’©å­æœ‰ä¸åŒçš„è°ƒç”¨æ—¶é—´ã€‚
å®¢æˆ·ç«¯é’©å­ï¼š

pre-commitï¼šåœ¨æ¯æ¬¡æäº¤ä¹‹å‰è¿è¡Œã€‚
pre-pushï¼šåœ¨git pushä¹‹å‰è¿è¡Œã€‚
post-commitï¼šåœ¨æ¯æ¬¡æäº¤ä¹‹åè¿è¡Œã€‚
post-checkoutï¼šåœ¨åˆ‡æ¢åˆ†æ”¯æˆ–æ£€å‡ºæ–‡ä»¶åè¿è¡Œã€‚
post-mergeï¼šåœ¨åˆå¹¶æ“ä½œå®Œæˆåè¿è¡Œã€‚

æœåŠ¡å™¨ç«¯é’©å­ï¼š

pre-receiveï¼šåœ¨è¿œç¨‹ä»“åº“æ¥æ”¶åˆ°æ¨é€å‰è¿è¡Œã€‚
updateï¼šåœ¨è¿œç¨‹ä»“åº“æ¥æ”¶åˆ°æ¨é€åï¼Œå¯¹æ¯ä¸ªè¦æ›´æ–°çš„å¼•ç”¨ï¼ˆåˆ†æ”¯æˆ–æ ‡ç­¾ï¼‰è¿è¡Œä¸€æ¬¡ã€‚
post-receiveï¼šåœ¨è¿œç¨‹ä»“åº“æ¥æ”¶åˆ°æ¨é€åï¼Œå¯¹æ‰€æœ‰è¦æ›´æ–°çš„å¼•ç”¨è¿è¡Œä¸€æ¬¡ã€‚

æ¯ä¸ªé¡¹ç›®çš„.git/hooksçš„ç›®å½•ä¸­ï¼Œçœ‹åˆ°è¿™äº›é’©å­çš„å®˜æ–¹ç¤ºä¾‹ã€‚ç¤ºä¾‹æ–‡ä»¶ä»¥.sampleç»“å°¾ï¼Œå»æ‰.sampleåç¼€å¯æ¿€æ´»è¯¥é’©å­è„šæœ¬ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

githooks - Hooks used by Git
pre-commit
Gité¡¹ç›®ç®¡ç†ï¼Œä»£ç è§„èŒƒpre-commitä½¿ç”¨è¯¦è§£
ç”¨ pre-commit hook è§£å†³ Python é¡¹ç›®ç¼–ç è§„èŒƒ

]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>python</category>
        <category>git</category>
        <category>testing</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>git</tag>
        <tag>gitlab</tag>
        <tag>chatgpt</tag>
        <tag>æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>GitLab CIé—®é¢˜è®°å½•</title>
    <url>/dev-gitlab-ci-problems/</url>
    <content><![CDATA[Job is stuckShell Runnerè·‘CIä»»åŠ¡ï¼ŒæŠ¥é”™ï¼š
Job is stuck. Check runners. allowed to fail

è§£å†³åŠæ³•ï¼šç»æŸ¥æ˜¯å› ä¸ºgitlab-runnerç‰ˆæœ¬æ¯”è¾ƒé«˜ï¼ˆ15.5.0ï¼‰ï¼Œæ–°ç‰ˆæœ¬çš„runnerï¼Œè¦æ±‚.gitlab-ci.ymlå¿…é¡»è¦é…ç½®tagsï¼ŒæŒ‡å®šrunnerã€‚


setting GIT_CLONE_PATH is not allowedShell Runnerè·‘CIä»»åŠ¡ï¼ŒæŠ¥é”™ï¼š
ERROR: Job failed: setting GIT_CLONE_PATH is not allowed, enable `custom_build_dir` feature

è§£å†³åŠæ³•ï¼šå¯ç”¨custom_build_dir
vim /etc/gitlab-runner/config.toml

æ·»åŠ custom_build_diré…ç½®
[[runners]]  [runners.custom_build_dir]    enabled = true

é‡å¯gitlab-runner
gitlab-runner restart

fatal: git fetch-packShell Runnerè·‘CIä»»åŠ¡ï¼ŒæŠ¥é”™ï¼š
fatal: git fetch-pack: expected shallow listfatal: The remote end hung up unexpectedly

è§£å†³åŠæ³•ï¼šgitç‰ˆæœ¬é—®é¢˜ï¼Œå‡çº§git
rpm -ivh http://opensource.wandisco.com/centos/7/git/x86_64/wandisco-git-release-7-1.noarch.rpmyum install -y git 

ä¸èƒ½é”å®šé…ç½®æ–‡ä»¶Shell Runnerè·‘CIä»»åŠ¡ï¼ŒæŠ¥é”™ï¼šerror: ä¸èƒ½é”å®šé…ç½®æ–‡ä»¶ /home/gitlab-runner/builds/builds/xxx/main.tmp/git-template/config: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•
è§£å†³åŠæ³•ï¼šæ²¡æœ‰æ£€ç´¢åˆ°æ‰¾åˆ°è§£å†³åŠæ³•ï¼Œå°è¯•é™çº§åˆ°14.5.0ï¼Œé—®é¢˜è§£å†³ã€‚é™çº§æ–¹æ³•å‚è€ƒã€Linuxç¯å¢ƒå®‰è£…runnerã€‘ä¸€èŠ‚ã€‚
No such file or directoryShell Runnerè·‘CIä»»åŠ¡ï¼ŒæŠ¥é”™ï¼š
Skipping Git checkoutSkipping Git submodules setup...$ pip3 install -r requirements.txtERROR: Could not open requirements file: [Errno 2] No such file or directory: &#x27;requirements.txt&#x27;

è§£å†³åŠæ³•ï¼š.gitlab-ci.ymlæ–‡ä»¶ä¸­æ·»åŠ GIT_CHECKOUTå˜é‡
variables:  GIT_CHECKOUT: &quot;true&quot;

ä¸‹è½½é•œåƒæŠ¥é”™Docker Machine Runnerè·‘CIä»»åŠ¡ï¼Œä¸€ç›´æ­£å¸¸ã€‚Docker Machine Runneræ²¡æœ‰ä»»ä½•å˜åŠ¨ï¼Œçªç„¶æœ‰ä¸€å¤©ï¼Œæ‰§è¡Œdocker buildçš„æ—¶å€™ï¼Œä¸‹è½½åŸºç¡€é•œåƒæŠ¥é”™ï¼šERROR: failed to do request: Head https://192.168.56.101:5000/v2/library/python/manifests/3.8: http: server gave HTTP response to HTTPS client
é‡å¯gitlab-runneré—®é¢˜ä¾æ—§ï¼Œé‡å¯æœºå™¨é—®é¢˜ä¾æ—§ã€‚
è§£å†³åŠæ³•ï¼šrunneré…ç½®é‡Œï¼ŒæŒ‡å®šdocker imageçš„ç‰ˆæœ¬ä¸ºdocker:19.03ï¼Œè€Œä¸è¦ä½¿ç”¨dockerï¼Œå¦åˆ™ä¸€ç›´ä¼šæ‹‰å–æœ€æ–°ç‰ˆçš„dockerï¼Œè€Œæœ€æ–°ç‰ˆçš„dockerä¸æ”¯æŒå‘é€httpè¯·æ±‚é•œåƒä»“åº“ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>troubleshooting</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>git</tag>
        <tag>cicd</tag>
        <tag>gitlab</tag>
      </tags>
  </entry>
  <entry>
    <title>GitLab Runnerå®‰è£…å®è·µ</title>
    <url>/dev-gitlab-runner-install/</url>
    <content><![CDATA[GitLab Runnerç‰ˆæœ¬è¯´æ˜å‡ºäºå…¼å®¹æ€§åŸå› ï¼ŒGitLab Runner major.minor ç‰ˆæœ¬åº”ä¸ GitLab major.minor ç‰ˆæœ¬ä¿æŒåŒæ­¥ã€‚è¾ƒæ—§çš„runnerå¯èƒ½ä»ç„¶å¯ä»¥ä½¿ç”¨è¾ƒæ–°çš„ GitLab ç‰ˆæœ¬ï¼Œåä¹‹äº¦ç„¶ã€‚ä½†æ˜¯ï¼Œå¦‚æœå­˜åœ¨ç‰ˆæœ¬å·®å¼‚ï¼ŒåŠŸèƒ½å¯èƒ½æ— æ³•ä½¿ç”¨æˆ–æ— æ³•æ­£å¸¸å·¥ä½œã€‚minorç‰ˆæœ¬æ›´æ–°æ—¶ï¼Œä¼šä¿éšœå‘åå…¼å®¹æ€§ã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶ GitLab çš„minorç‰ˆæœ¬æ›´æ–°ä¼šå¼•å…¥æ–°åŠŸèƒ½ï¼Œè¿™äº›æ–°åŠŸèƒ½éœ€è¦ GitLab Runner åœ¨åŒä¸€minorç‰ˆæœ¬ä¸Šã€‚
éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼šGitLab Runner 15.0 å¯¹æ³¨å†Œ API è¯·æ±‚æ ¼å¼è¿›è¡Œäº†æ›´æ”¹ã€‚å®ƒé˜»æ­¢ GitLab Runner ä¸ä½äº 14.8 çš„ GitLab ç‰ˆæœ¬é€šä¿¡ã€‚æˆ‘ä»¬å¿…é¡»ä½¿ç”¨é€‚åˆ GitLab ç‰ˆæœ¬çš„ Runner ç‰ˆæœ¬ï¼Œæˆ–å‡çº§ GitLab åº”ç”¨ç¨‹åºã€‚
æ›´å¤šå†…å®¹å‚è€ƒæ–‡æ¡£GitLab Runner


æŸ¥çœ‹å®‰è£…æ•™ç¨‹æŒ‡å®šé¡¹ç›®çš„Runneræ‰“å¼€gitlabé¡¹ç›® -&gt; Settings -&gt; CI/CD -&gt; Runners -&gt; Expand -&gt; Show Runner installation instructions
é¡µé¢çš„ registration tokenï¼Œç”¨äºæ³¨å†ŒæŒ‡å®šé¡¹ç›®ï¼ˆå½“å‰é¡¹ç›®ï¼‰çš„runnerã€‚
å…±äº«çš„RunneræŸ¥çœ‹Runnerï¼šhttps://gitlab.voidking.com/admin/runners  
æ‰“å¼€gitlab runnerç®¡ç†é¡µé¢ -&gt; Show Runner installation instructions
é¡µé¢çš„ registration tokenï¼Œç”¨äºæ³¨å†Œå…±äº«runnerã€‚
TOMLè¯­æ³•gitlab-runneré…ç½®æ–‡ä»¶ä¸ºconfig.tomlï¼Œä½¿ç”¨TOMLè¯­æ³•ã€‚TOMLçš„ç›®æ ‡æ˜¯æˆä¸ºä¸€ç§æ˜“äºé˜…è¯»çš„æœ€å°é…ç½®æ–‡ä»¶æ ¼å¼ã€‚TOMLè¢«è®¾è®¡ä¸ºæ˜ç¡®åœ°æ˜ å°„åˆ°å“ˆå¸Œè¡¨ã€‚TOMLåº”è¯¥å¾ˆå®¹æ˜“è§£ææˆå„ç§è¯­è¨€çš„æ•°æ®ç»“æ„ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Configuring GitLab Runner
TOML
TOML 1.0æ ¼å¼è¯­æ³•
Convert TOML To JSON

æ³¨é‡Š#ï¼Œäº•å·åé¢è¡¨ç¤ºæ³¨é‡Š
é”®å€¼å¯¹é”®åä¸ºå­—ç¬¦ä¸²ï¼Œå€¼å¯ä»¥ä¸ºå­—ç¬¦ä¸²ã€æ•´æ•°ã€æµ®ç‚¹æ•°ã€å¸ƒå°”å€¼ã€æ—¥æœŸã€æ—¶åˆ»ã€æ•°ç»„ã€è¡Œå†…è¡¨ç­‰ã€‚é”®ååœ¨ç­‰å·çš„å·¦è¾¹ï¼Œå€¼åœ¨ç­‰å·çš„å³è¾¹ã€‚
ä¾‹å¦‚ï¼š
name = &quot;voidking&quot;

è¡¨è¡¨çš„è¡¨ç¤ºæ–¹æ³•ï¼šæ–¹æ‹¬å·+è¡¨åï¼Œä¾‹å¦‚[table]ã€‚è¡¨æ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œç±»ä¼¼äºjsonä¸­çš„å¯¹è±¡ï¼ˆèŠ±æ‹¬å·ä¸­å†…å®¹ï¼‰ã€‚åœ¨å®ƒä¸‹æ–¹ï¼Œç›´è‡³ä¸‹ä¸€ä¸ªè¡¨å¤´æˆ–æ–‡ä»¶ç»“æŸï¼Œéƒ½æ˜¯è¿™ä¸ªè¡¨çš„é”®å€¼å¯¹ã€‚é¡¶å±‚è¡¨ï¼Œåˆè¢«ç§°ä¸ºæ ¹è¡¨ï¼Œäºæ–‡æ¡£å¼€å§‹å¤„å¼€å§‹å¹¶åœ¨ç¬¬ä¸€ä¸ªè¡¨å¤´ï¼ˆæˆ–æ–‡ä»¶ç»“æŸå¤„ï¼‰å‰ç»“æŸã€‚
è¡¨åçš„è§„åˆ™å’Œé”®åçš„è§„åˆ™ç›¸åŒã€‚
è¡¨çš„å±‚çº§ç»“æ„ä»¥ç‚¹.åˆ†éš”ï¼Œåˆ†éš”çš„æ¯ä¸ªéƒ¨åˆ†éƒ½æ˜¯ä¸€ä¸ªè¡¨åã€‚å®šä¹‰ä¸€ä¸ªå¤šå±‚çº§è¡¨æ—¶ï¼Œå¦‚æœæœ€åä¸€ä¸ªè¡¨åå‰çš„è¡¨æ²¡æœ‰è¢«åˆ›å»ºï¼Œé‚£ä¹ˆä¼šè¢«è‡ªåŠ¨åˆ›å»ºã€‚
ä¾‹å¦‚ï¼š
[table]# å®šä¹‰ä¸€ä¸ªåä¸º table çš„è¡¨key1 = &quot;some string&quot;key2 = 123fruit.apple.color = &quot;çº¢è‰²&quot;# å®šä¹‰ä¸€ä¸ªåä¸º fruit çš„è¡¨# å®šä¹‰ä¸€ä¸ªåä¸º fruit.apple çš„è¡¨fruit.apple.taste.sweet = true# å®šä¹‰ä¸€ä¸ªåä¸º fruit.apple.taste çš„è¡¨# fruit å’Œ fruit.apple å·²ç»åˆ›å»ºè¿‡äº†

è¡¨æ•°ç»„è¡¨æ•°ç»„è¡¨ç¤ºæ–¹æ³•ï¼šåŒå±‚æ–¹æ‹¬å·+è¡¨åï¼Œä¾‹å¦‚[[fruits]]ã€‚è¡¨æ•°ç»„æ˜¯è¡¨çš„æ•°ç»„ï¼Œç±»ä¼¼äºjsonä¸­çš„å¯¹è±¡æ•°ç»„ã€‚
è¡¨æ•°ç»„çš„ç¬¬ä¸€ä¾‹å®šä¹‰äº†è¿™ä¸ªæ•°ç»„åŠå…¶é¦–ä¸ªè¡¨å…ƒç´ ï¼Œè€Œåç»­çš„æ¯ä¸ªè¡¨æ•°ç»„åœ¨è¯¥æ•°ç»„ä¸­åˆ›å»ºå¹¶å®šä¹‰ä¸€ä¸ªæ–°çš„è¡¨å…ƒç´ ã€‚
[[fruits]]name = &quot;è‹¹æœ&quot;[fruits.physical]  # å­è¡¨color = &quot;çº¢è‰²&quot;shape = &quot;åœ†å½¢&quot;[[fruits.varieties]]  # åµŒå¥—è¡¨æ•°ç»„name = &quot;è›‡æœ&quot;[[fruits.varieties]]name = &quot;æ¾³æ´²é’è‹¹&quot;[[fruits]]name = &quot;é¦™è•‰&quot;[[fruits.varieties]]name = &quot;è½¦å‰è‰&quot;

å¯¹åº”çš„jsonæ ¼å¼ä¸ºï¼š
&#123;  &quot;fruits&quot;: [    &#123;      &quot;name&quot;: &quot;è‹¹æœ&quot;,      &quot;physical&quot;: &#123;        &quot;color&quot;: &quot;çº¢è‰²&quot;,        &quot;shape&quot;: &quot;åœ†å½¢&quot;      &#125;,      &quot;varieties&quot;: [        &#123; &quot;name&quot;: &quot;è›‡æœ&quot; &#125;,        &#123; &quot;name&quot;: &quot;æ¾³æ´²é’è‹¹&quot; &#125;      ]    &#125;,    &#123;      &quot;name&quot;: &quot;é¦™è•‰&quot;,      &quot;varieties&quot;: [        &#123; &quot;name&quot;: &quot;è½¦å‰è‰&quot; &#125;      ]    &#125;  ]&#125;

ç¼©è¿›TOMLä¸­çš„ç¼©è¿›æ²¡æœ‰æ„ä¹‰ï¼Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿è¯»è€…ç†è§£å±‚çº§ç»“æ„ã€‚
Linuxç¯å¢ƒå®‰è£…Runnerå‚è€ƒæ–‡æ¡£ï¼šInstall GitLab Runner
1ã€å®‰è£…runner
# Download the binary for your systemsudo curl -L --output /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-amd64# Give it permissions to executesudo chmod +x /usr/local/bin/gitlab-runner# Create a GitLab CI usersudo useradd --comment &#x27;GitLab Runner&#x27; --create-home gitlab-runner --shell /bin/bash# Install and run as servicesudo gitlab-runner install --user=gitlab-runner --working-directory=/home/gitlab-runnersudo gitlab-runner startsudo gitlab-runner -v

PSï¼šå…¶ä»–ç‰ˆæœ¬çš„runneræºç å’ŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯ä»¥åœ¨gitlab-runner Releasesé¡µé¢æ‰¾åˆ°ã€‚
å¯¹äºcentosç³»ç»Ÿï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨rpmåŒ…å®‰è£…ã€‚
yum install -y https://gitlab-runner.downloads.s3.amazonaws.com/latest/rpm/gitlab-runner_amd64.rpm 

2ã€æ·»åŠ åˆ°gitlab-runneråˆ°dockerç”¨æˆ·ç»„ï¼ˆå¯é€‰ï¼‰å¦‚æœgitlab-runneræ‰§è¡Œçš„ciè„šæœ¬éœ€è¦è¿è¡Œdockerï¼Œé‚£ä¹ˆéœ€è¦å°†gitlab-runneråˆ°dockerç”¨æˆ·ç»„
sudo usermod -a -G docker gitlab-runner# if no docker groupsudo usermod -a -G root gitlab-runnersudo -u gitlab-runner -H docker info

3ã€gitlab-runneræ·»åŠ sudoæƒé™ï¼ˆå¯é€‰ï¼‰
vim /etc/sudoers

æ·»åŠ é…ç½®ï¼š
gitlab-runner ALL=(ALL) NOPASSWD: ALL

æ³¨å†ŒShellç±»å‹RunnerShellç±»å‹çš„Executorï¼Œåœ¨Runnerç¨‹åºæ‰€åœ¨ä¸»æœºä¸Šè¿è¡ŒCIä»»åŠ¡ã€‚
å‰ç½®æ¡ä»¶ï¼šå®‰è£…å¥½äº†Runnerã€‚
sudo gitlab-runner register -hsudo gitlab-runner register --url https://gitlab.voidking.com/ --registration-token $REGISTRATION_TOKEN
REGISTRATION_TOKENå¯ä»¥åœ¨gitlabé¡µé¢è·å–åˆ°ï¼Œè¯¦æƒ…å‚è€ƒä¸Šæ–‡ã€æŸ¥çœ‹å®‰è£…æ•™ç¨‹ã€‘ä¸€èŠ‚ã€‚æ ¹æ®æç¤ºï¼Œå¡«å†™urlã€tokenã€descriptionã€tagsï¼ˆå¤šä¸ªtagä»¥è‹±æ–‡é€—å·åˆ†éš”ï¼‰ã€executorç±»å‹ç­‰ä¿¡æ¯ï¼Œè¿™é‡Œexecutorç±»å‹å¡«å†™shellã€‚
æ³¨å†ŒDockerç±»å‹RunnerDockerç±»å‹çš„Executorï¼Œåœ¨Runnerç¨‹åºæ‰€åœ¨ä¸»æœºä¸Šçš„Dockerå®¹å™¨ä¸­è¿è¡ŒCIä»»åŠ¡ã€‚
å‰ç½®æ¡ä»¶ï¼šå®‰è£…å¥½äº†Runnerï¼Œè€Œä¸”Runneræ‰€åœ¨ä¸»æœºå·²ç»å®‰è£…é…ç½®å¥½äº†Dockerã€‚
sudo gitlab-runner register --url https://gitlab.voidking.com/ --registration-token $REGISTRATION_TOKEN

æ ¹æ®æç¤ºï¼Œå¡«å†™urlã€tokenã€descriptionã€tagsã€executorç±»å‹ç­‰ä¿¡æ¯ï¼Œè¿™é‡Œexecutorç±»å‹å¡«å†™dockerï¼Œæœ€åå¡«å†™ä¸€ä¸ªé»˜è®¤çš„é•œåƒã€‚
æ³¨å†ŒDocker Machineç±»å‹Runnerå‚è€ƒæ–‡æ¡£ï¼š

Install and register GitLab Runner for autoscaling with Docker Machine
Docker Machine Executor autoscale configuration
Docker Machine
docker-machineçš„å®‰è£…ä¸ä½¿ç”¨

å®‰è£…è™šæ‹Ÿæœºé©±åŠ¨å¯é€‰é©±åŠ¨ï¼š

virtualboxï¼ˆæ¨èï¼‰ï¼Œå‚è€ƒæ–‡æ¡£Linuxä¸‹ä½¿ç”¨VirtualBox
qemuï¼Œå‚è€ƒæ–‡æ¡£machine-drivers/docker-machine-driver-qemu
kvmï¼Œå‚è€ƒæ–‡æ¡£dhiltgen/docker-machine-kvm

1ã€å®‰è£…virtualboxé©±åŠ¨
yum install https://download.virtualbox.org/virtualbox/6.1.26/VirtualBox-6.1-6.1.26_145957_el7-1.x86_64.rpm

2ã€å®‰è£…ç¼–è¯‘ç¯å¢ƒ
yum install -y kernel-devel kernel-devel install gcc make perl kernel-headers

3ã€æ¿€æ´»virtualboxå†…æ ¸æ”¯æŒ
/sbin/vboxconfig

å®‰è£…Docker Machine1ã€ä¸‹è½½docker-machineäºŒè¿›åˆ¶æ–‡ä»¶
wget https://gitlab.com/gitlab-org/ci-cd/docker-machine/-/releases/v0.16.2-gitlab.15/downloads/docker-machine-Linux-x86_64mv docker-machine-Linux-x86_64 /usr/sbin/docker-machinechmod +x /usr/sbin/docker-machine

æ›´å¤šç‰ˆæœ¬å¯ä»¥è®¿é—®docker-machine/releasesé¡µé¢æŸ¥æ‰¾ã€‚
2ã€æµ‹è¯•å¯åŠ¨è™šæ‹Ÿæœº
docker-machine create -d virtualbox test

æ³¨å†ŒRunnerå‰ç½®æ¡ä»¶ï¼šå®‰è£…å¥½äº†Runnerã€‚
sudo gitlab-runner register --url https://gitlab.voidking.com/ --registration-token $REGISTRATION_TOKEN

æ ¹æ®æç¤ºï¼Œå¡«å†™urlã€tokenã€descriptionã€tagsã€executorç±»å‹ç­‰ä¿¡æ¯ï¼Œè¿™é‡Œexecutorç±»å‹å¡«å†™docker+machineï¼Œæœ€åå¡«å†™ä¸€ä¸ªé»˜è®¤çš„é•œåƒã€‚
é…ç½®é•œåƒåŠ é€Ÿï¼ˆå¯é€‰ï¼‰å‚è€ƒæ–‡æ¡£ã€ŠDockeré•œåƒç«™çš„é…ç½®å’Œä½¿ç”¨ã€‹ï¼Œæ­å»ºæœ¬åœ°é•œåƒç«™ã€‚
é…ç½®ç¼“å­˜1ã€å¯åŠ¨minioå®¹å™¨
docker run -d --name minio \--restart always \-p 9000:9000 \-p 9001:9001  \-v /data/minio/.minio:/data/.minio \-v /data/minio/export:/export \-e &quot;MINIO_ROOT_USER=root&quot; \-e &quot;MINIO_ROOT_PASSWORD=xxxxxx&quot; \minio/minio:latest server /export --console-address &quot;:9001&quot;

2ã€é¡µé¢è®¿é—®http://192.168.56.101:9001/ 
é…ç½®Runner1ã€ä¿®æ”¹ /etc/gitlab-runner/config.toml
concurrent = 3check_interval = 0[session_server]  session_timeout = 1800[[runners]]  limit = 3  name = &quot;dockermachine&quot;  url = &quot;https://gitlab.voidking.com&quot;  token = &quot;xxx&quot;  executor = &quot;docker+machine&quot;  [runners.custom_build_dir]    enabled = true  [runners.cache]    Type = &quot;s3&quot;    Path = &quot;runner&quot;    Shared = true    [runners.cache.s3]      ServerAddress = &quot;192.168.56.101:9000&quot;      AccessKey = &quot;root&quot;      SecretKey = &quot;xxx&quot;      BucketName = &quot;runner&quot;      Insecure = true    [runners.cache.gcs]    [runners.cache.azure]  [runners.docker]    tls_verify = false    image = &quot;docker:19.03&quot;    privileged = true    disable_entrypoint_overwrite = false    oom_kill_disable = false    disable_cache = false    volumes = [&quot;/certs/client&quot;,&quot;/cache&quot;, &quot;/var/run/docker.sock:/var/run/docker.sock&quot;]    pull_policy = [&quot;if-not-present&quot;]    shm_size = 0  [runners.machine]    IdleCount = 5    MaxGrowthRate = 1    IdleTime = 1800    MachineDriver = &quot;virtualbox&quot;    MachineName = &quot;auto-scale-%s&quot;    MachineOptions = [      &quot;engine-registry-mirror=http://192.168.56.101:5000&quot;,      &quot;engine-registry-mirror=http://192.168.56.101:5001&quot;,      &quot;virtualbox-memory=4048&quot;,      &quot;virtualbox-disk-size=204800&quot;,      &quot;virtualbox-cpu-count=2&quot;    ]

æ³¨æ„ï¼šrunners.docker.imageè¦æŒ‡å®šç‰ˆæœ¬ï¼Œå¦åˆ™æ¯æ¬¡æ„å»ºéƒ½ä¼šæ‹‰å–æœ€æ–°ç‰ˆçš„dockerï¼Œè€Œæœ€æ–°ç‰ˆæœ¬çš„dockerä¸æ”¯æŒhttpè¯·æ±‚é•œåƒä»“åº“ã€‚æ›´å¤šdockerç‰ˆæœ¬å¯ä»¥è®¿é—®dockerhub - dockerè·å–ã€‚
å…¶ä¸­MachineOptionsä¸­ç»™å®šçš„å‚æ•°ï¼Œæ˜¯docker-machine createå‘½ä»¤æ¥æ”¶çš„å‚æ•°ã€‚
2ã€é‡æ–°å¯åŠ¨runner
gitlab-runner restart

ç®¡ç†Docker Machinedocker-machine lsdocker-machine ssh xxx

K8Sç¯å¢ƒå®‰è£…Runneræœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬åœ¨K8Sä¸­é€šè¿‡helmå®‰è£…Runnerã€‚
å‚è€ƒæ–‡æ¡£ï¼š

GitLab Runner Helm Chart
GitLab Runner Helm Chart - Running Docker-in-Docker containers with GitLab Runner
GitLab CI CD | Install and Configure GitLab Runner on Kubernetes with Helm
Runneræ„å»ºä¼˜åŒ–
åœ¨ Kubernetes ä¸Šå®‰è£… Gitlab CI Runner

å‡†å¤‡å­˜å‚¨é€šè¿‡helmå®‰è£…runnerï¼Œvalueså½“å‰è¿˜ä¸æ”¯æŒé…ç½®storageclassã€‚å› æ­¤ï¼Œéœ€è¦å…ˆè‡ªè¡Œå‡†å¤‡å¥½runnerçš„å­˜å‚¨ã€‚ä¸»è¦å‚è€ƒæ–‡æ¡£ã€ŠK8Sä¸­å®‰è£…é…ç½®StorageClassã€‹
å‡†å¤‡pvcå®šä¹‰ runner-pvc.yaml
apiVersion: v1kind: PersistentVolumeClaimmetadata:  name: gitlab-runner-cachespec:  storageClassName: nfs-storage  accessModes:    - ReadWriteMany  resources:    requests:      storage: 50Gi

å‡†å¤‡Runneré…ç½®1ã€æ·»åŠ gitlab repo
helm repo add gitlab https://charts.gitlab.iohelm repo update

2ã€æŸ¥çœ‹å¯ç”¨çš„runnerç‰ˆæœ¬
helm search repo -l gitlab/gitlab-runner

CHART VERSIONæœ‰å¯¹åº”çš„APP VERSIONç‰ˆæœ¬ï¼Œé€‰æ‹©éœ€è¦çš„APP VERSIONç‰ˆæœ¬ã€‚è¿™é‡Œé€‰æ‹©14.0.0ç‰ˆæœ¬ï¼Œå¯¹åº”CHART VERSIONä¸º0.30.0
3ã€ä¸‹è½½chart
helm fetch gitlab/gitlab-runner --version 0.30.0tar -xzvf gitlab-runner-0.30.0.tgz

4ã€values.yamlä¿®æ”¹é…ç½®

imageï¼šæŒ‡å®šç‰ˆæœ¬gitlab/gitlab-runner:alpine-v14.0.1ï¼Œæ›´å¤šé•œåƒç‰ˆæœ¬å¯ä»¥è®¿é—®docker hubæŸ¥æ‰¾
gitlabUrlï¼šæ”¹æˆæˆ‘ä»¬è‡ªå·±çš„çš„gitlabåœ°å€
runnerRegistrationTokenï¼šå‚è€ƒã€æŸ¥çœ‹å®‰è£…æ•™ç¨‹ã€‘ä¸€èŠ‚è·å–
resourcesï¼šä¿®æ”¹ç”³è¯·å’Œé™åˆ¶çš„èµ„æº
rbac.createï¼šæ”¹æˆtrueï¼Œåˆ›å»ºsaç”¨äºåˆ›å»ºrunner
nameï¼šæ”¹æˆrunneræƒ³è¦åœ¨gitlabä¸­æ˜¾ç¤ºçš„åç§°
tagsï¼šæ”¹æˆrunneræƒ³è¦æ³¨å†Œçš„tagsï¼Œå¤šä¸ªtagä»¥è‹±æ–‡é€—å·åˆ†éš”
replicasï¼šæ”¹æˆrunneræœŸæœ›çš„å‰¯æœ¬æ•°ï¼Œè¿™äº›runnerå‰¯æœ¬ä½¿ç”¨åŒä¸€ä¸ªnameã€‚
privilegedï¼šæ”¹æˆtrueï¼Œå¯ç”¨docker in docker
runners.configï¼šæ”¯æŒè‡ªå®šä¹‰æ„å»ºç›®å½•ï¼Œæ”¯æŒdocker in docker

runners.configå†…å®¹ï¼š
[runners.custom_build_dir]  enabled = true[[runners.kubernetes.volumes.host_path]]  name = &quot;docker&quot;  mount_path = &quot;/var/run/docker.sock&quot;  read_only = true  host_path = &quot;/var/run/docker.sock&quot;

æˆ‘ä»¬æƒ³è¦å¯¹æ„å»ºç¼“å­˜ä½¿ç”¨æŒä¹…åŒ–å­˜å‚¨ï¼Œå› æ­¤éœ€è¦æ·»åŠ 
## configure build cachecibuild:  cache:    pvcName: gitlab-runner-cache    mountPath: /home/gitlab-runner/ci-build-cache

åŒæ—¶ï¼Œéœ€è¦ä¿®æ”¹gitlab-runner/templates/configmap.yamldata.entrypointéƒ¨åˆ†æ·»åŠ runneré…ç½®ï¼Œè‡ªåŠ¨æŒ‚è½½å­˜å‚¨
# add build cache and cat &lt;&lt;EOF &gt;&gt;/home/gitlab-runner/.gitlab-runner/config.toml  [[runners.kubernetes.volumes.pvc]]    name = &quot;&#123;&#123;.Values.cibuild.cache.pvcName&#125;&#125;&quot;    mount_path = &quot;&#123;&#123;.Values.cibuild.cache.mountPath&#125;&#125;&quot;EOF# Start the runnerexec /entrypoint run --user=gitlab-runner \  --working-directory=/home/gitlab-runner

å®‰è£…Runner1ã€å®‰è£…runner
kubectl create ns gitlab-14-0kubectl apply -f runner-pvc.yaml -n gitlab-14-0helm install --namespace gitlab-14-0 gitlab-runner ./gitlab-runner

2ã€æŸ¥çœ‹å®‰è£…
kubectl get all -n gitlab-14-0kubectl get pvc -n gitlab-14-0kubectl logs pod/gitlab-runner-gitlab-runner-849988b584-kllqv -n gitlab-14-0

3ã€æŸ¥çœ‹runneræ³¨å†Œç»“æœhttps://gitlab.voidking.com/admin/runners
æ‰¾åˆ°æ–°çš„runnerï¼Œç‚¹å‡»å³ä¾§çš„EditæŒ‰é’®ï¼Œå¯ä»¥åšè¿›ä¸€æ­¥çš„é…ç½®ã€‚
è‡ªå®šä¹‰buildsè·¯å¾„å‚è€ƒæ–‡æ¡£Optimize GitLab for large repositories
1ã€å‡†å¤‡buildsç›®å½•
mkdir /buildsmkdir /cachechown gitlab-runner:gitlab-runner -R /buildschown gitlab-runner:gitlab-runner -R /cache

2ã€ä¿®æ”¹runneré…ç½®
vim /etc/gitlab-runner/config.toml

æ·»åŠ é…ç½®
[[runners]]  builds_dir = &quot;/builds&quot;  cache_dir = &quot;/cache&quot;  [runners.custom_build_dir]    enabled = true

3ã€é‡å¯runner
gitlab-runner restart

å–æ¶ˆæ³¨å†ŒRunner# æŸ¥çœ‹tokengitlab-runner list# tokenè¿˜å¯ä»¥åœ¨/etc/gitlab-runner/config.tomlä¸­æŸ¥çœ‹# å–æ¶ˆæ³¨å†Œrunnergitlab-runner unregister -t $token -u https://gitlab.voidking.com/



]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>k8s</category>
        <category>cloudnative</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>git</tag>
        <tag>cicd</tag>
        <tag>gitlab</tag>
        <tag>helm</tag>
        <tag>virtualbox</tag>
      </tags>
  </entry>
  <entry>
    <title>GitLab Runnerå…¥é—¨ç¯‡</title>
    <url>/dev-gitlab-runner-start/</url>
    <content><![CDATA[GitLab Runnerç®€ä»‹GitLab Runner æ˜¯ä¸€ä¸ªå¼€æºè½¯ä»¶ï¼Œå®ƒä¸ GitLab CI/CD é…åˆï¼Œåœ¨ç®¡é“æµä¸­è¿è¡Œä½œä¸šã€‚GitLab Runner æ˜¯ç”¨Goç¼–å†™ï¼Œå‡ ä¹å¯ä»¥ç›´æ¥è¿è¡Œåœ¨ä»»ä½•æ“ä½œç³»ç»Ÿï¼ˆä¸ªåˆ«ç³»ç»Ÿéœ€è¦è‡ªè¡Œç¼–è¯‘ï¼‰ã€‚GitLab Runner ä¹Ÿå¯ä»¥åœ¨ Docker å®¹å™¨å†…è¿è¡Œæˆ–éƒ¨ç½²åˆ° Kubernetes é›†ç¾¤ä¸­ã€‚
GitLab Runnerèƒ½ä¸èƒ½æ›¿æ¢æˆå…¶ä»–çš„Runnerï¼Ÿå¯ä»¥ï¼Œä½†æ˜¯æ²¡æœ‰å¿…è¦ï¼Œæ¯•ç«ŸGitlab Runneræ˜¯å¼€æºçš„ï¼Œæœ‰ä»€ä¹ˆä¸ªæ€§åŒ–éœ€æ±‚å°±è‡ªå·±æ”¹ä¸€æ”¹ã€‚è€Œä¸”ï¼Œä¹Ÿæ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„æ›¿ä»£äº§å“ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

GitLab Runner 
GitLab CI/CDä¸­æ–‡æ–‡æ¡£
GitLab CI/CDæ–‡æ¡£
GitLab Runner
Executors
The Shell executor
ã€ŠGitLab CI/CDå…¥é—¨ç¯‡ã€‹



GitLabã€Runnerå’ŒExecutorå…³äºGitLabã€Runnerå’ŒExecutorçš„å…³ç³»ï¼Œæœ‰ä¸€ä¸ªæ¯”å–»å¾ˆæ°å½“ï¼šGitLabæ˜¯è€æ¿ï¼Œä¼šå»æŸ¥çœ‹éœ€æ±‚å•ï¼ˆ.gitlab-ci.ymlï¼‰ï¼Œå»ºç«‹ä¸€å¼ åˆä¸€å¼ æœ‰å…ˆåé¡ºåºçš„å·¥å•ï¼ˆCI Pipelineï¼‰ã€‚GitLab Runner æ˜¯æ‰§è¡Œ CI Job çš„å·¥äººï¼Œå®šæœŸå»è¯¢é—®è€æ¿ï¼ˆGitLabï¼‰ç°åœ¨æœ‰åˆ†é…ç»™è‡ªå·±çš„å·¥ä½œï¼ˆCI Jobï¼‰å—ï¼Ÿå¦‚æœæ‹¿åˆ°å·¥ä½œï¼Œå°±å¼€å§‹æ‰§è¡Œï¼Œå¹¶åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å°†è¿›åº¦å³æ—¶å†™åœ¨å·¥å•ä¸Šã€‚Executor æ˜¯å·¥äººï¼ˆRunnerï¼‰æ‰§è¡Œ CI Job çš„å·¥ä½œç¯å¢ƒï¼Œä¾‹å¦‚ä¸€ä¸ª CI Job æ˜¯æ‰“å°å‡ºâ€helloâ€ï¼Œé‚£ä¹ˆRunnerå¯ä»¥åœ¨æœ¬åœ°Shellç¯å¢ƒä¸­æ‰§è¡Œï¼Œå¯ä»¥åœ¨è™šæ‹Ÿæœºç¯å¢ƒä¸­æ‰§è¡Œï¼Œè¿˜å¯ä»¥åœ¨Dockerç¯å¢ƒä¸­æ‰§è¡Œï¼›è€Œå¦‚æœä¸€ä¸ªCI Jobéœ€è¦åœ¨åŸºç¡€é•œåƒä¸Šè¿›è¡Œæ„å»ºï¼Œé‚£ä¹ˆå°±éœ€è¦Dockerç¯å¢ƒæˆ–è€…K8Sç¯å¢ƒäº†ã€‚
Runneré€šå¸¸åœ¨å®‰è£…Runnerçš„åŒä¸€å°æœºå™¨ä¸Šå¤„ç†ä½œä¸šã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®©Runneråœ¨å®¹å™¨ã€k8s é›†ç¾¤ã€æˆ–è€…äº‘ä¸Šçš„è‡ªåŠ¨ç¼©æ”¾å®ä¾‹ä¸­å¤„ç†ä½œä¸šã€‚
å®‰è£…Runneråï¼Œæƒ³è¦ä½¿ç”¨å®ƒï¼Œéœ€è¦åœ¨GitLabå¹³å°è¿›è¡Œæ³¨å†Œï¼Œæ³¨å†Œåšçš„å·¥ä½œå°±æ˜¯å»ºç«‹Gitlabä¸Runnerä¹‹é—´çš„é€šä¿¡ã€‚æ³¨å†Œå®Œæˆåï¼ŒRunnerå°±å¯ä»¥è¿è¡Œæ¥è‡ª GitLab çš„ CI/CD ä½œä¸šäº†ã€‚
å½“æˆ‘ä»¬æ³¨å†Œä¸€ä¸ªRunneræ—¶ï¼Œå¿…é¡»é€‰æ‹©ä¸€ä¸ªExecutorã€‚Executorå†³å®šäº†æ¯ä¸ªä½œä¸šè¿è¡Œçš„ç¯å¢ƒã€‚
Gitlab Runnerçš„å®‰è£…ç¯å¢ƒåŒ…æ‹¬Linuxã€MacOSã€Windowsã€Dockerå’ŒKubernetesã€‚è€Œä¸åŒå®‰è£…ç¯å¢ƒçš„Runnerï¼Œæ”¯æŒä¸åŒçš„Executorsã€‚æ ¹æ®Executorçš„ä¸åŒï¼ŒåŒä¸€ä¸ªRunnerç¨‹åºï¼Œå¯ä»¥æ³¨å†Œä¸ºä¸åŒExecutorç±»å‹çš„Runnerï¼Œä¾‹å¦‚SSHã€Shellã€Parallelsã€VirtualBoxã€Dockerã€Docker Machine (auto-scaling)ã€Kubernetesã€Customã€‚
ä¾‹å¦‚ï¼š

å¦‚æœæˆ‘ä»¬å¸Œæœ› CI/CD ä½œä¸šè¿è¡Œ PowerShell å‘½ä»¤ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ Windows æœåŠ¡å™¨ä¸Šå®‰è£… GitLab Runnerï¼Œç„¶åæ³¨å†Œä¸€ä¸ªä½¿ç”¨ Shell Executorçš„Runnerã€‚
å¦‚æœæˆ‘ä»¬å¸Œæœ› CI/CD ä½œä¸šåœ¨è‡ªå®šä¹‰ Docker å®¹å™¨ä¸­è¿è¡Œå‘½ä»¤ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ Linux æœåŠ¡å™¨ä¸Šå®‰è£… GitLab Runner å¹¶æ³¨å†Œä¸€ä¸ªä½¿ç”¨ Docker Executor çš„ Runnerã€‚
æˆ‘ä»¬è¿˜å¯ä»¥åœ¨è™šæ‹Ÿæœºä¸Šå®‰è£… GitLab Runnerï¼Œå¹¶è®©å®ƒä½¿ç”¨å¦ä¸€ä¸ªè™šæ‹Ÿæœºä½œä¸ºExecutorã€‚

æœ€å¸¸ç”¨çš„Executorï¼šShellã€Dockerã€Docker Machineã€Kubernetesã€‚
å‚è€ƒæ–‡æ¡£ï¼š

GitLab Runner 
Executors
GitLab CI ä¹‹ Runner çš„ Executor è©²å¦‚ä½•é¸æ“‡ï¼Ÿ

Executorç®€ä»‹ShellShell æ˜¯æœ€ç®€å•çš„é…ç½®æ‰§è¡Œå™¨ã€‚æ„å»ºæ‰€éœ€çš„æ‰€æœ‰ä¾èµ–é¡¹éƒ½éœ€è¦æ‰‹åŠ¨å®‰è£…åœ¨å®‰è£… GitLab Runner çš„åŒä¸€å°æœºå™¨ä¸Šã€‚
Docker executorä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©æ˜¯ä½¿ç”¨ Dockerï¼Œå› ä¸ºå®ƒå…è®¸ä¸€ä¸ªå¹²å‡€çš„æ„å»ºç¯å¢ƒï¼Œå¹¶ä¸”å…·æœ‰ç®€å•çš„ä¾èµ–é¡¹ç®¡ç†ï¼ˆæ„å»ºé¡¹ç›®çš„æ‰€æœ‰ä¾èµ–é¡¹éƒ½å¯ä»¥æ”¾åœ¨ Docker æ˜ åƒä¸­ï¼‰ã€‚ Docker æ‰§è¡Œå™¨å…è®¸æ‚¨è½»æ¾åˆ›å»ºå…·æœ‰ä¾èµ–æœåŠ¡çš„æ„å»ºç¯å¢ƒï¼Œä¾‹å¦‚ MySQLã€‚
å½“æˆ‘ä»¬åœ¨ Docker å®¹å™¨ä¸­å®‰è£… GitLab Runner å¹¶é€‰æ‹© Docker executoræ¥è¿è¡Œä½œä¸šæ—¶ï¼Œå®ƒæœ‰æ—¶è¢«ç§°ä¸º Docker-in-Docker ï¼ˆdindï¼‰é…ç½®ã€‚
æ³¨æ„ï¼šæœ‰äº›Dockerå®¹å™¨ä¸­ï¼Œé»˜è®¤çš„shellå¹¶ä¸æ˜¯bashï¼Œshellé€‰æ‹©é€»è¾‘å¦‚ä¸‹
if [ -x /usr/local/bin/bash ]; then    exec /usr/local/bin/bash $@elif [ -x /usr/bin/bash ]; then    exec /usr/bin/bash $@elif [ -x /bin/bash ]; then    exec /bin/bash $@elif [ -x /usr/local/bin/sh ]; then    exec /usr/local/bin/sh $@elif [ -x /usr/bin/sh ]; then    exec /usr/bin/sh $@elif [ -x /bin/sh ]; then    exec /bin/sh $@else    echo shell not found    exit 1fi

å‚è€ƒæ–‡æ¡£ï¼š

How To Run Docker in Docker
How To Run Docker in Docker Container
Docker-in-Docker in Gitlab Runners
shell in docker executor isnâ€™t bash

Docker Machine executorDocker Machine æ˜¯ Docker æ‰§è¡Œå™¨çš„ç‰¹æ®Šç‰ˆæœ¬ï¼Œæ”¯æŒè‡ªåŠ¨ç¼©æ”¾ã€‚å®ƒåƒæ™®é€šçš„ Docker æ‰§è¡Œå™¨ä¸€æ ·å·¥ä½œï¼Œä½†ä½¿ç”¨ Docker Machine æŒ‰éœ€åˆ›å»ºçš„æ„å»ºä¸»æœºã€‚
Dockerå®˜æ–¹å·²ç»åºŸå¼ƒäº†Docker Machineï¼ŒGitLab Runnerä½¿ç”¨çš„æ˜¯è‡ªå·±ç»´æŠ¤çš„Docker Machineã€‚
Docker Machine executoråŸç†ï¼š

å®‰è£…Runnerå¹¶é…ç½®gitlab-runnerç”¨æˆ·å…·æœ‰å¯åŠ¨è™šæ‹Ÿæœºçš„æƒé™
Runnerè°ƒç”¨é©±åŠ¨å¯åŠ¨Docker Machine VMï¼ŒVMç³»ç»Ÿä¸ºBoot2Docker
å½“VMä¸­å¼€å§‹è·‘CI Jobæ—¶ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªDockerå®¹å™¨ä½œä¸ºæ‰§è¡Œå®¹å™¨ï¼Œåœ¨å®¹å™¨ä¸­è·‘CI Job
CI Jobä¸­å¯ä»¥åŒ…å«docker buildç­‰å‘½ä»¤ï¼Œæ­¤æ—¶ä¼šå…±äº«è°ƒç”¨VMçš„Dockerï¼Œæ˜¯Docker in Dockeræ¨¡å¼çš„ä¸€ç§

å‚è€ƒæ–‡æ¡£ï¼š

Install and register GitLab Runner for autoscaling with Docker Machine
Docker Machine Executor autoscale configuration

Kubernetes executorKubernetes æ‰§è¡Œå™¨å…è®¸æ‚¨ä½¿ç”¨ç°æœ‰çš„ Kubernetes é›†ç¾¤è¿›è¡Œæ„å»ºã€‚æ‰§è¡Œå™¨å°†è°ƒç”¨ Kubernetes é›†ç¾¤ API å¹¶ä¸ºæ¯ä¸ª GitLab CI ä½œä¸šåˆ›å»ºä¸€ä¸ªæ–°çš„ Podï¼ˆå¸¦æœ‰æ„å»ºå®¹å™¨å’ŒæœåŠ¡å®¹å™¨ï¼‰ã€‚
Kubernetes executorä¹Ÿæ˜¯æ”¯æŒ Docker-in-Docker çš„ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

The Kubernetes executor for GitLab Runner
The Kubernetes executor for GitLab Runner - Using Docker in your builds
Cannot access docker daemon in gitlab runner using Kubernetes executor

SSH executorSSH æ‰§è¡Œå™¨æ˜¯ä¸ºäº†å®Œæ•´æ€§è€Œæ·»åŠ çš„ï¼Œä½†å®ƒæ˜¯æ‰€æœ‰æ‰§è¡Œå™¨ä¸­å—æ”¯æŒæœ€å°‘çš„ã€‚å®ƒä½¿ GitLab Runner è¿æ¥åˆ°å¤–éƒ¨æœåŠ¡å™¨å¹¶åœ¨é‚£é‡Œè¿è¡Œæ„å»ºã€‚æˆ‘ä»¬æœ‰ä¸€äº›æ¥è‡ªä½¿ç”¨æ­¤æ‰§è¡Œå™¨çš„ç»„ç»‡çš„æˆåŠŸæ¡ˆä¾‹ï¼Œä½†é€šå¸¸æˆ‘ä»¬å»ºè®®ä½¿ç”¨å…¶ä»–ç±»å‹ä¹‹ä¸€ã€‚
Virtual Machine executorè¿™ç§ç±»å‹çš„æ‰§è¡Œå™¨å…è®¸æ‚¨ä½¿ç”¨å·²åˆ›å»ºçš„è™šæ‹Ÿæœºï¼Œè¯¥è™šæ‹Ÿæœºè¢«å…‹éš†å¹¶ç”¨äºè¿è¡Œæ‚¨çš„æ„å»ºã€‚æˆ‘ä»¬æä¾›ä¸¤ä¸ªå®Œæ•´çš„ç³»ç»Ÿè™šæ‹ŸåŒ–é€‰é¡¹ï¼šVirtualBox å’Œ Parallelsã€‚å¦‚æœæ‚¨æƒ³åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œæ„å»ºï¼Œå®ƒä»¬å¯èƒ½ä¼šå¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒå…è®¸åœ¨ Windowsã€Linuxã€macOS æˆ– FreeBSD ä¸Šåˆ›å»ºè™šæ‹Ÿæœºï¼Œç„¶å GitLab Runner è¿æ¥åˆ°è™šæ‹Ÿæœºå¹¶åœ¨å…¶ä¸Šè¿è¡Œæ„å»ºã€‚å®ƒçš„ä½¿ç”¨ä¹Ÿæœ‰åŠ©äºé™ä½åŸºç¡€è®¾æ–½æˆæœ¬ã€‚
Custom executorè‡ªå®šä¹‰æ‰§è¡Œå™¨å…è®¸æ‚¨æŒ‡å®šè‡ªå·±çš„æ‰§è¡Œç¯å¢ƒã€‚å½“ GitLab Runner ä¸æä¾›æ‰§è¡Œå™¨ï¼ˆä¾‹å¦‚ï¼ŒLXC å®¹å™¨ï¼‰æ—¶ï¼Œæ‚¨å¯ä»¥å‘ GitLab Runner æä¾›è‡ªå·±çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä»¥é…ç½®å’Œæ¸…ç†æ‚¨æƒ³è¦ä½¿ç”¨çš„ä»»ä½•ç¯å¢ƒã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>k8s</category>
        <category>cloudnative</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>cicd</tag>
        <tag>gitlab</tag>
      </tags>
  </entry>
  <entry>
    <title>GitLab CIæŠ¥é”™ERROR: Job failed (system failure)</title>
    <url>/dev-gitlab-ci-job-faild-system-failure/</url>
    <content><![CDATA[é—®é¢˜æè¿°GitLab CIä»»åŠ¡ï¼ŒRunnerä½¿ç”¨çš„æ˜¯docker machine executorç±»å‹çš„æ‰§è¡Œå™¨ï¼Œæ‰§è¡Œå¤±è´¥æŠ¥é”™ï¼š
Running on runner-h6ezaymy-project-1037-concurrent-0 via runner-h6ezaymy-auto-scale-1668060271-ce458595......WARNING: Failed to pull image with policy &quot;if-not-present&quot;: error during connect: Post https://192.168.99.251:2376/v1.25/images/create?fromImage=registry.gitlab.com%2Fgitlab-org%2Fgitlab-runner%2Fgitlab-runner-helper&amp;tag=x86_64-58ba2b95: dial tcp 192.168.99.251:2376: connect: no route to host (manager.go:205:3s)ERROR: Job failed (system failure): error during connect: Post https://192.168.99.251:2376/v1.25/containers/47272fbe49e4be0f85724ad99f0657b72f568810ce0f4914c57e7fcf114764e2/wait: dial tcp 192.168.99.251:2376: connect: no route to host

é‡è¯•ï¼Œé—®é¢˜ä¾æ—§ã€‚


æ’æŸ¥æ€è·¯é—®é¢˜åŸå› çŒœæµ‹ï¼š

å¶å‘é—®é¢˜ï¼Ÿç¡®è®¤æ˜¯å¦èƒ½ç¨³å®šå¤ç°
CICDé…ç½®é—®é¢˜ï¼Ÿç¡®è®¤CICDé…ç½®ï¼Œæ£€æŸ¥ç”¨æ³•æ˜¯å¦æ­£ç¡®
runneré—®é¢˜ï¼Ÿé‡å¯runnerï¼Œå†æ¬¡å°è¯•å¤ç°

æ’æŸ¥ç¡®è®¤ï¼š

å¶å‘é—®é¢˜ï¼Œé‡è¯•å¤±è´¥ï¼Œä½†æ˜¯å¤œé—´å¯ä»¥æˆåŠŸæ‰§è¡Œ
CICDé…ç½®æ­£å¸¸ï¼ŒæŠ¥é”™ä¸é…ç½®æ— å…³ï¼Œè€Œä¸”å¤œé—´å¯ä»¥æˆåŠŸæ‰§è¡Œ
runneré—®é¢˜æ— æ³•æ’é™¤ï¼Œéœ€è¦è¿›ä¸€æ­¥æ’æŸ¥

Runneré—®é¢˜æ’æŸ¥ç½‘ç»œé—®é¢˜ï¼Ÿç™»å½•åˆ°runneræ‰€åœ¨å®¿ä¸»æœºï¼Œè¿›å…¥åˆ°runner
docker-machine ssh runner-h6ezaymy-auto-scale-1668060271-ce458595
æç¤ºvmä¸å­˜åœ¨ã€‚
docker-machine ls
æŸ¥çœ‹å½“å‰çš„vmï¼Œè´Ÿè´£è¿è¡Œä»»åŠ¡çš„vmç¡®å®ä¸å­˜åœ¨äº†ï¼Œçœ‹æ¥ä¸æ˜¯ç½‘ç»œé—®é¢˜ã€‚æ€€ç–‘æ˜¯vmå‡ºé—®é¢˜è¢«å¹²æ‰äº†ï¼Œç„¶åé‡æ–°åˆ›å»ºäº†ä¸€ä¸ªvmã€‚é‚£ä¹ˆvmä¸ºä»€ä¹ˆä¼šè¢«å¹²æ‰ï¼Ÿçœ‹çœ‹æ—¥å¿—å§ã€‚
æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—journalctl -xe# orcat /var/log/messages | grep -i kill -A3 -B3

ç¡®å®æ‰¾åˆ°äº†ç¨‹åºè¢«å¹²æ‰çš„è¯æ®ï¼Œåˆšå¥½å’Œgitlabciä»»åŠ¡å¤±è´¥çš„æ—¶é—´å»åˆã€‚
11æœˆ 10 17:13:42 runner kernel: Out of memory: Kill process 12293 (MainHGCMthread) score 215 or sacrifice child11æœˆ 10 17:13:42 runner kernel: Killed process 12294 (EMT-0), UID 0, total-vm:4345420kB, anon-rss:45340kB, file-rss:2622104kB, shmem-rss:4kB

é‚£ä¹ˆè¿™ä¸ªvmä¸ºä»€ä¹ˆè¢«å¹²æ‰äº†ï¼Ÿoomï¼Ÿ
CIä»»åŠ¡å ç”¨å†…å­˜å¤ªé«˜ï¼Ÿæ£€æŸ¥ciä»»åŠ¡çš„ä»£ç ï¼Œå¹¶æ²¡æœ‰å‘ç°å¯¼è‡´è¶…é«˜å†…å­˜å ç”¨çš„é€»è¾‘ã€‚
Linux OOMæœºåˆ¶å›æƒ³èµ·Linux OOMçš„é€»è¾‘ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªç¨‹åºå ç”¨å†…å­˜é«˜å°±æŠŠå®ƒå¹²æ‰ï¼Œè€Œæ˜¯æ•´ä¸ªç³»ç»Ÿçš„å†…å­˜é«˜ï¼Œæ‰ä¼šé€‰å‡ºä¸€ä¸ªæ‰“åˆ†æœ€é«˜çš„ç¨‹åºå¹²æ‰ã€‚
è¿™å°±åˆç†äº†ï¼Œä¸‹åˆçš„æ—¶å€™runneræ‰€åœ¨å®¿ä¸»æœºä¸Šè·‘æ»¡äº†ä»»åŠ¡ï¼Œå¾ˆæœ‰å¯èƒ½å‡ºç°å†…å­˜ç´§å¼ çš„æƒ…å†µã€‚è€Œè¿™ä¸ªè¢«å¹²æ‰çš„runnerå½“æ—¶è¢«æ‰“åˆ†æœ€é«˜ï¼Œæ‰€ä»¥è¢«å¹²æ‰äº†ã€‚
Linux OOMæœºåˆ¶å‚è€ƒï¼š

Linux OOMæœºåˆ¶åˆ†æ
å¦‚ä½•ç†è§£å’Œé…ç½® Linux ä¸‹çš„ OOM Killerï¼Ÿ

è§£å†³åŠæ³•æ–¹æ³•ä¸€ï¼šå¢åŠ èµ„æºå‡çº§å®¿ä¸»æœºå†…å­˜ï¼Œæˆ–è€…æ·»åŠ runnerå®¿ä¸»æœº
æ–¹æ³•äºŒï¼šé”™å³°æ‰§è¡Œciä»»åŠ¡æ¯”å¦‚è¿™ä¸ªå¤±è´¥çš„ä»»åŠ¡ï¼Œè¿˜æ˜¯å¤œé—´æ‰§è¡Œå§
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>troubleshooting</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>git</tag>
        <tag>cicd</tag>
        <tag>gitlab</tag>
        <tag>oom</tag>
      </tags>
  </entry>
  <entry>
    <title>ArgoCDæŠ¥é”™Unable to load dataé—®é¢˜</title>
    <url>/dev-argocd-unable-to-load-data/</url>
    <content><![CDATA[é—®é¢˜æè¿°æ–­ç”µåï¼Œk8sé›†ç¾¤é‡æ–°æ‹‰èµ·ã€‚argocdæ— æ³•åŒæ­¥gitlabä¸­çš„æ•°æ®ï¼ŒæŠ¥é”™ï¼š
Unable to load data: Failed to fetch default: git fetch origin --tags --force failed exit status 128: fatal: unable to access â€˜https://gitlab.voidking.com/devops/argocd.git/&#39;: server certificate verification failed. CAfile: none CRLfile: none


æŸ¥æ—¥å¿—æŸ¥çœ‹argocd repo-serveræ—¥å¿—repo-serverè´Ÿè´£ä»gitlabåŒæ­¥æ•°æ®ï¼ŒæŸ¥çœ‹ä¸€ä¸‹å®ƒçš„æ—¥å¿—ã€‚
kubectl logs --tail=100 argo-cd-argocd-repo-server-547b6cf9f9-dff7d -n argocd

å†…å®¹ä¸ºï¼š
time=&quot;2022-11-03T06:04:33Z&quot; level=error msg=&quot;finished unary call with code Unknown&quot; error=&quot;Get \&quot;https://gitlab.voidking.com/devops/argocd.git/info/refs?service=git-upload-pack\&quot;: x509: certificate is not valid for any names, but wanted to match gitlab.voidking.com&quot; grpc.code=Unknown grpc.method=GenerateManifest grpc.request.deadline=&quot;2022-11-03T06:05:33Z&quot; grpc.service=repository.RepoServerService grpc.start_time=&quot;2022-11-03T06:04:33Z&quot; grpc.time_ms=38.558 span.kind=server system=grpc

æŸ¥çœ‹argocdå…¶ä»–ç»„ä»¶æ—¥å¿—æŒ¨ä¸ªæŸ¥çœ‹argocdå…¶ä»–ç»„ä»¶æ—¥å¿—ï¼Œå…¶ä¸­dex-serverçœ‹ç€æœ‰äº›é—®é¢˜
kubectl logs --tail=100 argo-cd-argocd-dex-server-7cc5cc5455-c7q29  -n argocd

å†…å®¹ä¸ºï¼š
time=&quot;2022-10-31T03:24:16Z&quot; level=info msg=&quot;keys expired, rotating&quot;time=&quot;2022-10-31T03:24:16Z&quot; level=info msg=&quot;keys rotated, next rotation: 2022-10-31 09:24:16.595711381 +0000 UTC&quot;

è¯ä¹¦é—®é¢˜ï¼Ÿæ€€ç–‘æ˜¯è¯ä¹¦åˆ°æœŸå¯¼è‡´çš„ï¼Œæ‰“ç®—å¯¹è¯ä¹¦è¿›è¡Œæ›´æ–°ï¼Œå‚è€ƒæ–‡æ¡£TLS configuration
ä½†æ˜¯ï¼Œæ€ä¹ˆç¡®è®¤è¯ä¹¦å·²ç»åˆ°æœŸäº†å‘¢ï¼Ÿå…·ä½“æ€ä¹ˆæ“ä½œæ›´æ–°è¯ä¹¦ï¼Ÿæ²¡æœ‰æ‰¾åˆ°æ–¹æ³•ï¼Œå…ˆçœ‹çœ‹è¿˜æœ‰æ²¡æœ‰å…¶ä»–å¯èƒ½ã€‚
é‡å¯ä¸€ä¸‹è¯•è¯•ï¼Ÿk get pod argo-cd-argocd-repo-server-547b6cf9f9-dff7d -n argocd -oyaml | k replace --force -f -

é‡å»ºpodåï¼Œé—®é¢˜è§£å†³äº†ã€‚ã€‚ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>k8s</category>
        <category>cloudnative</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>argocd</tag>
        <tag>cicd</tag>
        <tag>devops</tag>
      </tags>
  </entry>
  <entry>
    <title>KubeSphereç‰ˆæœ¬å‡çº§</title>
    <url>/dev-kubesphere-upgrade/</url>
    <content><![CDATA[éœ€æ±‚æè¿°å½“å‰KubeSphereç‰ˆæœ¬v3.2.1ï¼Œä½†æ˜¯å› ä¸ºæƒé™ç®¡ç†ä¸å¥½ç”¨ï¼ˆä¸èƒ½é’ˆå¯¹ä¸åŒé›†ç¾¤å•ç‹¬æˆæƒï¼‰ï¼Œå› æ­¤è®¡åˆ’å‡çº§åˆ°v3.3.1ã€‚KubeSphere v3.3.0ä¹‹åæ”¯æŒä¸ºæ¯ä¸ªé›†ç¾¤å•ç‹¬è®¾ç½®é›†ç¾¤æˆå‘˜å’Œé›†ç¾¤è§’è‰²ï¼Œæä¾›äº†æ›´ç»†ç²’åº¦çš„æƒé™ç®¡æ§æœºåˆ¶ï¼Œè¿›ä¸€æ­¥å®Œå–„äº† KubeSphere çš„å¤šç§Ÿæˆ·ç³»ç»Ÿã€‚
å‚è€ƒæ–‡æ¡£ï¼š

KubeSphere 3.3.0 å…¨æ–°å‡çº§ï¼Œæ¥äº†ï¼
Release Notes - 3.3.1 ç‰ˆæœ¬è¯´æ˜
ä½¿ç”¨ ks-installer å‡çº§
ä½¿ç”¨ ks-installer ç¦»çº¿å‡çº§



æ³¨æ„äº‹é¡¹
æ‚¨åº”è¯¥å…ˆåœ¨æµ‹è¯•ç¯å¢ƒä¸­å®æ–½å‡çº§æ¨¡æ‹Ÿã€‚åœ¨æµ‹è¯•ç¯å¢ƒä¸­æˆåŠŸå‡çº§å¹¶ä¸”æ‰€æœ‰åº”ç”¨ç¨‹åºéƒ½æ­£å¸¸è¿è¡Œä¹‹åï¼Œå†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å‡çº§æ‚¨çš„é›†ç¾¤ã€‚
åœ¨å‡çº§è¿‡ç¨‹ä¸­ï¼Œåº”ç”¨ç¨‹åºå¯èƒ½ä¼šçŸ­æš‚ä¸­æ–­ï¼ˆå°¤å…¶æ˜¯å•å‰¯æœ¬å®¹å™¨ç»„ï¼‰ï¼Œè¯·å®‰æ’åˆç†çš„å‡çº§æ—¶é—´ã€‚
å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å‡çº§ä¹‹å‰å¤‡ä»½ etcd å’Œæœ‰çŠ¶æ€åº”ç”¨ç¨‹åºã€‚æ‚¨å¯ä»¥ä½¿ç”¨ Velero æ¥å¤‡ä»½å’Œè¿ç§» Kubernetes èµ„æºä»¥åŠæŒä¹…åŒ–å­˜å‚¨å·ã€‚

å‚è€ƒæ–‡æ¡£ï¼š

å‡çº§ - æ¦‚è¿°
Velero
è¯¦è§£kuberneteså¤‡ä»½æ¢å¤åˆ©å™¨ Velero

æ€è·¯1ã€å¤‡ä»½2ã€kubesphereæ‰§è¡Œå‡çº§
å¤‡ä»½etcdå¤‡ä»½etcdï¼Œå‚è€ƒ ã€ŠK8Sé›†ç¾¤ä¸­etcdå¤‡ä»½å’Œæ¢å¤ã€‹
æœ‰çŠ¶æ€åº”ç”¨ç¨‹åºæœªå®Œå¾…ç»­
æ‰§è¡Œå‡çº§1ã€ä¸‹è½½yamlæ–‡ä»¶&amp;æäº¤åˆ°k8sé›†ç¾¤
wget https://github.com/kubesphere/ks-installer/releases/download/v3.3.1/kubesphere-installer.yamlkubectl apply -f kubesphere-installer.yaml  --force

2ã€è§‚å¯Ÿå‡çº§è¿›å±•
kubectl get all -n kubesphere-systemkubectl get pods -n kubesphere-systemkubectl describe job.batch/ks-upgrade -n kubesphere-systemkubectl logs -f ks-installer-895b8994d-5qrjs -n kubesphere-system

3ã€éªŒè¯å‡çº§åçš„ç‰ˆæœ¬
kubectl get pod -n kubesphere-system -oyaml | grep image:

æµè§ˆå™¨è®¿é—®ksï¼Œå³ä¸Šè§’ç‚¹å‡»ç”¨æˆ·åï¼Œå…³äºï¼Œå°±å¯ä»¥çœ‹åˆ°å½“å‰ksç‰ˆæœ¬ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>kubesphere</tag>
      </tags>
  </entry>
  <entry>
    <title>kubectlæ’ä»¶ç®¡ç†å™¨krew</title>
    <url>/dev-kubectl-krew/</url>
    <content><![CDATA[krewç®€ä»‹
Krew itself is a kubectl plugin that is installed and updated via Krew (yes, Krew self-hosts).

Krew æ˜¯ kubectl æ’ä»¶çš„åŒ…ç®¡ç†å™¨ã€‚Krew æ˜¯ä¸€ä¸ªè®©ä½¿ç”¨ kubectl æ’ä»¶å˜å¾—å®¹æ˜“çš„å·¥å…·ã€‚ Krew å¸®åŠ©æ‚¨å‘ç°æ’ä»¶ï¼Œåœ¨æ‚¨çš„æœºå™¨ä¸Šå®‰è£…å’Œç®¡ç†å®ƒä»¬ã€‚å®ƒç±»ä¼¼äº aptã€dnf æˆ– brew ç­‰å·¥å…·ã€‚å½“å‰ï¼ŒKrew ä¸Šæä¾›äº† 200 å¤šä¸ª kubectl æ’ä»¶ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

krew - Installing
Krew



å®‰è£…é…ç½®krewMacOS/Linuxä¸­é€šç”¨å®‰è£…æ–¹æ³•(  set -x; cd &quot;$(mktemp -d)&quot; &amp;&amp;  OS=&quot;$(uname | tr &#x27;[:upper:]&#x27; &#x27;[:lower:]&#x27;)&quot; &amp;&amp;  ARCH=&quot;$(uname -m | sed -e &#x27;s/x86_64/amd64/&#x27; -e &#x27;s/\(arm\)\(64\)\?.*/\1\2/&#x27; -e &#x27;s/aarch64$/arm64/&#x27;)&quot; &amp;&amp;  KREW=&quot;krew-$&#123;OS&#125;_$&#123;ARCH&#125;&quot; &amp;&amp;  curl -fsSLO &quot;https://github.com/kubernetes-sigs/krew/releases/latest/download/$&#123;KREW&#125;.tar.gz&quot; &amp;&amp;  tar zxvf &quot;$&#123;KREW&#125;.tar.gz&quot; &amp;&amp;  ./&quot;$&#123;KREW&#125;&quot; install krew)

MacOSä¸­å®‰è£…æ–¹æ³•uname | tr &#x27;[:upper:]&#x27; &#x27;[:lower:]&#x27;wget https://github.com/kubernetes-sigs/krew/releases/download/v0.4.3/krew.yamlwget https://github.com/kubernetes-sigs/krew/releases/download/v0.4.3/krew-darwin_amd64.tar.gztar -xzvf krew-darwin_amd64.tar.gz./krew-darwin_amd64 install --manifest=krew.yaml --archive=krew-darwin_amd64.tar.gz

Linuxä¸­å®‰è£…æ–¹æ³•uname | tr &#x27;[:upper:]&#x27; &#x27;[:lower:]&#x27;wget https://github.com/kubernetes-sigs/krew/releases/download/v0.4.3/krew.yamlwget https://github.com/kubernetes-sigs/krew/releases/download/v0.4.3/krew-linux_amd64.tar.gztar -xzvf krew-linux_amd64.tar.gz./krew-linux_amd64 install --manifest=krew.yaml --archive=krew-linux_amd64.tar.gz

æ·»åŠ krewåˆ°ç¯å¢ƒå˜é‡1ã€~/.bashrcæˆ–è€…~/.bash_profileä¸­æ·»åŠ PATH
export PATH=&quot;$&#123;PATH&#125;:$&#123;HOME&#125;/.krew/bin&quot;

2ã€ä½¿ç”Ÿæ•ˆ
source ~/.bashrc

éªŒè¯å®‰è£…kubectl krewkubectl krew updatekubectl krew search

ä½¿ç”¨krewä¾‹å¦‚ï¼Œå®‰è£…neat
kubectl krew install neat

ä¾‹å¦‚ï¼Œå®‰è£…sniff
kubectl krew install sniff

åè®°é™¤äº†ä½¿ç”¨krewå®‰è£…kubectlæ’ä»¶ä¹‹å¤–ï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªæ›´åŠ ç›´æ¥çš„åŠæ³•å®‰è£…kubectlæ’ä»¶ï¼šä¸‹è½½æ’ä»¶çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå’Œkubectlæ–‡ä»¶æ”¾åˆ°ä¸€èµ·ã€‚ä¾‹å¦‚ï¼Œå®‰è£…neatï¼š
wget https://github.com/itaysk/kubectl-neat/releases/download/v2.0.3/kubectl-neat_linux_amd64.tar.gztar -xzvf kubectl-neat_linux_amd64.tar.gzwhich kubectl # /usr/bin/kubectlmv kubectl-neat /usr/binkubectl neat -hkubectl get pod test -oyaml | kubectl neat





]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>kubectl</tag>
        <tag>krew</tag>
      </tags>
  </entry>
  <entry>
    <title>K8Sé…ç½®ä½¿ç”¨imagePullSecrets</title>
    <url>/dev-k8s-imagepullsecrets/</url>
    <content><![CDATA[å‰è¨€ã€ŠHarborå…¥é—¨ç¯‡ã€‹ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®‰è£…é…ç½®å¥½äº†Harborã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹æ€æ ·åœ¨K8Sä¸­é…ç½®ä½¿ç”¨imagePullSecretsï¼Œä»Harboræˆ–è€…å…¶ä»–ç§æœ‰é•œåƒä»“åº“æ‹‰å–é•œåƒã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ä»ç§æœ‰ä»“åº“æ‹‰å–é•œåƒ



åˆ›å»ºimagePullSecretsåˆ›å»ºä¸€ä¸ªdocker-registryç±»å‹çš„secretï¼Œåå­—ä¸ºharbor-secret
kubectl create secret docker-registry harbor-secret \  --docker-server=harbor.voidking.com \  --docker-username=admin \  --docker-password=Harbor12345

ä½¿ç”¨imagePullSecretsapiVersion: v1kind: Podmetadata:  name: testpodspec:  containers:  - name: busybox    image: harbor.voidking.com/voidking/busybox:1.31    command:     - sleep    - &quot;3600&quot;  imagePullSecrets:  - name: harbor-secret

ç»™podæ·»åŠ é»˜è®¤imagePullSecretsä¸Šé¢çš„é…ç½®ï¼Œå·²ç»å¯ä»¥æ­£å¸¸ä»harboré•œåƒä»“åº“æ‹‰å–é•œåƒäº†ã€‚ä½†æ˜¯ï¼Œæ¯ä¸ªpodéƒ½éœ€è¦æŒ‡å®šä¸€ä¸‹imagePullSecretsï¼Œä¹Ÿæ˜¯æ¯”è¾ƒéº»çƒ¦ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥åœ¨å‘½åç©ºé—´é»˜è®¤saä¸­æ·»åŠ imagePullSecretsï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨åœ¨podä¸­æŒ‡å®šimagePullSecretsäº†ï¼Œåˆ›å»ºpodæ—¶ä¼šè‡ªåŠ¨æ³¨å…¥ã€‚
kubectl patch serviceaccount default \  -p &quot;&#123;\&quot;imagePullSecrets\&quot;: [&#123;\&quot;name\&quot;: \&quot;docker-secret\&quot;&#125;]&#125;&quot; \  -n &lt;your-namespace&gt;

å…¨å±€é…ç½®imagePullSecretså¦‚æœæ–°å¢äº†namespaceï¼Œé‚£ä¹ˆè¿™ä¸ªnamespaceå°±éœ€è¦å•ç‹¬æ·»åŠ ä¸€æ¬¡imagePullSecretsï¼Œè€Œä¸”è¿™ä¸ªnamespaceçš„saä¹Ÿéœ€è¦æ·»åŠ imagePullSecretsã€‚
è¿™é‡Œå¯ä»¥ä½¿ç”¨imagepullsecret-patcheræ¥ç®€åŒ–æˆ‘ä»¬çš„å·¥ä½œï¼Œå‚è€ƒæ–‡æ¡£ï¼š

How to use imagePullSecrets cluster-wide??
Kubernetes cluster-wide access to private container registry with imagepullsecret-patcher
imagepullsecret-patcher
imagepullsecret-patcher deploy-example

1ã€è·å– dockerconfigjson
# kubectl get secret harbor-secret -oyamlkubectl create secret docker-registry harbor-secret \  --docker-server=harbor.voidking.com \  --docker-username=admin \  --docker-password=Harbor12345 \  --dry-run=client -oyaml

è·å–åˆ° dockerconfigjson ï¼Œå¡«å…¥åˆ°ä¸‹ä¸€æ­¥çš„ deployment.yaml æ–‡ä»¶ä¸­ã€‚
2ã€å‡†å¤‡èµ„æºæ¸…å•

namespace.yamlï¼Œå®šä¹‰namespace
rbac.yamlï¼Œå®šä¹‰saæƒé™
deploymentï¼Œå®šä¹‰imagepullsecret-patcheræœåŠ¡

namespace.yaml å†…å®¹å¦‚ä¸‹ï¼š
apiVersion: v1kind: Namespacemetadata:  name: imagepullsecret-patcher

rbac.yaml å†…å®¹å¦‚ä¸‹ï¼š
apiVersion: v1kind: ServiceAccountmetadata:  name: imagepullsecret-patcher  namespace: imagepullsecret-patcher---apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRolemetadata:  labels:    k8s-app: imagepullsecret-patcher  name: imagepullsecret-patcherrules:- apiGroups:  - &quot;&quot;  resources:  - secrets  - serviceaccounts  verbs:  - list  - patch  - create  - get  - delete- apiGroups:  - &quot;&quot;  resources:  - namespaces  verbs:  - list  - get---apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRoleBindingmetadata:  name: imagepullsecret-patcherroleRef:  apiGroup: rbac.authorization.k8s.io  kind: ClusterRole  name: imagepullsecret-patchersubjects:  - kind: ServiceAccount    name: imagepullsecret-patcher    namespace: imagepullsecret-patcher

deployment.yaml å†…å®¹å¦‚ä¸‹ï¼š
apiVersion: v1kind: Secrettype: kubernetes.io/dockerconfigjsonmetadata:  name: image-pull-secret-src  namespace: imagepullsecret-patcherdata:  .dockerconfigjson: eyJhdXRocyI6eyJoYXJib3Iudm9pZGtpbmcuY29tIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJwYXNzd29yZCI6IkhhcmJvcjEyMzQ1IiwiYXV0aCI6IllXUnRhVzQ2U0dGeVltOXlNVEl6TkRVPSJ9fX0=---apiVersion: apps/v1kind: Deploymentmetadata:  name: imagepullsecret-patcher  namespace: imagepullsecret-patcher  labels:    name: imagepullsecret-patcherspec:  replicas: 1  selector:    matchLabels:      name: imagepullsecret-patcher  template:    metadata:      labels:        name: imagepullsecret-patcher    spec:      automountServiceAccountToken: true      serviceAccountName: imagepullsecret-patcher      containers:        - name: imagepullsecret-patcher          image: &quot;quay.io/titansoft/imagepullsecret-patcher:v0.14&quot;          env:            - name: CONFIG_FORCE              value: &quot;true&quot;            - name: CONFIG_DEBUG              value: &quot;false&quot;            - name: CONFIG_ALLSERVICEACCOUNT              value: &quot;true&quot;            - name: CONFIG_DOCKERCONFIGJSONPATH              value: &quot;/app/secrets/.dockerconfigjson&quot;            - name: CONFIG_SECRETNAME              value: &quot;harbor-secret&quot;          volumeMounts:            - name: src-dockerconfigjson              mountPath: &quot;/app/secrets&quot;              readOnly: true          resources:            requests:              cpu: 0.1              memory: 15Mi            limits:              cpu: 0.2              memory: 30Mi      volumes:        - name: src-dockerconfigjson          secret:             secretName: image-pull-secret-src

å…¶ä¸­dockerconfigjsonæ”¹æˆä¸Šä¸€æ­¥ä¸­è·å–åˆ°çš„dockerconfigjsonï¼ŒCONFIG_SECRETNAMEå˜é‡çš„valueæ”¹æˆæœŸæœ›çš„secretåç§°ã€‚
3ã€å®‰è£…imagepullsecret-patcher
kubectl apply -f namespace.yamlkubectl apply -f rbac.yamlkubectl apply -f deployment.yaml

4ã€æŸ¥çœ‹å®‰è£…
kubectl get all -n imagepullsecret-patcherkubectl get sa -n imagepullsecret-patcherkubectl get sa default -n imagepullsecret-patcher -oyaml
å¯ä»¥å‘ç°ï¼Œharbor-secret å·²ç»æ³¨å…¥åˆ°äº†saä¸­ã€‚
ä¿®æ”¹imagePullSecretsæœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹imagePullSecretsï¼Œæ¯”å¦‚ä¿®æ”¹ç”¨æˆ·åå’Œå¯†ç ã€‚è¿™æ—¶å¯ä»¥ç›´æ¥ä¿®æ”¹ image-pull-secret-src è¿™ä¸ªsecretï¼Œä¿®æ”¹å®Œæˆåï¼Œimagepullsecret-patcherä¼šè‡ªåŠ¨å®Œæˆæ‰€æœ‰namespaceä¸‹çš„ harbor-secret çš„ä¿®æ”¹ã€‚
kubectl edit secret image-pull-secret-src -n imagepullsecret-patcher

åˆ é™¤imagePullSecretsæœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ›¿æ¢imagePullSecretsï¼Œæ¯”å¦‚imagePullSecretsåç§°å‘ç”Ÿäº†å˜æ›´ã€‚è¿™æ—¶å°±éœ€è¦åˆ é™¤åŸæœ¬çš„imagePullSecretsã€‚
å•ä¸ªsaåˆ é™¤imagePullSecretsæ–¹æ³•ï¼š
INDEX=$(kubectl get sa default -n imagepullsecret-patcher -o json | jq &#x27;.imagePullSecrets | map(.name == &quot;harbor-secret&quot;) | index(true)&#x27;)kubectl patch sa default --type=json -p=&quot;[&#123;&#x27;op&#x27;: &#x27;remove&#x27;, &#x27;path&#x27;: &#x27;/imagePullSecrets/$INDEX&#x27;&#125;]&quot; -n imagepullsecret-patcher

æ‰¹é‡saåˆ é™¤imagePullSecretsæ–¹æ³•ï¼š
#!/bin/bashkubectl get ns | awk &#x27;&#123;print $1&#125;&#x27; | grep -v &quot;NAME&quot; &gt; namespace.txtfor namespace in `cat namespace.txt`;do  INDEX=$(kubectl get sa default -n $namespace -o json | jq &#x27;.imagePullSecrets | map(.name == &quot;harbor-secret&quot;) | index(true)&#x27;)  kubectl patch sa default --type=json -p=&quot;[&#123;&#x27;op&#x27;: &#x27;remove&#x27;, &#x27;path&#x27;: &#x27;/imagePullSecrets/$INDEX&#x27;&#125;]&quot; -n $namespacedone

æ·»åŠ å¤šä¸ªimagePullSecretsé—®ï¼šå¦‚æœæœ‰å¤šä¸ªé•œåƒä»“åº“éœ€è¦é…ç½®imagePullSecretsï¼Œè¯¥æ€ä¹ˆå¤„ç†ï¼Ÿç­”ï¼šå¯ä»¥æŠŠå¤šä¸ªimagePullSecretså†™å…¥åˆ°åŒä¸€ä¸ªdockerconfigjsonã€‚
dockerconfigjsonè§£ædockerconfigjsonæ˜¯ä¸€ä¸ªbase64åŠ å¯†çš„å­—ç¬¦ä¸²ï¼Œæ‰§è¡Œ
echo &quot;eyJhdXRocyI6eyJoYXJib3Iudm9pZGtpbmcuY29tIjp7InVzZXJuYW1lIjoiYWRtaW4iLCJwYXNzd29yZCI6IkhhcmJvcjEyMzQ1IiwiYXV0aCI6IllXUnRhVzQ2U0dGeVltOXlNVEl6TkRVPSJ9fX0=&quot; | base64 -d
ç»“æœä¸ºï¼š
&#123;&quot;auths&quot;:&#123;&quot;harbor.voidking.com&quot;:&#123;&quot;username&quot;:&quot;admin&quot;,&quot;password&quot;:&quot;Harbor12345&quot;,&quot;auth&quot;:&quot;YWRtaW46SGFyYm9yMTIzNDU=&quot;&#125;&#125;&#125;

å®é™…ä¸Šï¼Œå®ƒçš„ç»“æ„å’Œdocker loginåäº§ç”Ÿçš„$HOME/.docker/config.jsonå®Œå…¨ä¸€è‡´ã€‚
å…¶ä¸­ï¼Œauthçš„valueä¹Ÿæ˜¯base64åŠ å¯†çš„å­—ç¬¦ä¸²ï¼Œæ‰§è¡Œ
echo &quot;YWRtaW46SGFyYm9yMTIzNDU=&quot; | base64 -d
ç»“æœä¸ºï¼š
admin:Harbor12345

dockerconfigjsonæ‹¼æ¥çŸ¥é“äº†dockerconfigjsonçš„ç»“æ„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå¦‚æœæœ‰å¤šä¸ªimagePullSecretsï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±æ‹¼æ¥ä¸€ä¸ªdockerconfigjsonæ˜æ–‡å­—ç¬¦ä¸²ï¼Œç„¶åè¿›è¡Œbase64åŠ å¯†ã€‚
dockerconfigjson1 å†…å®¹ä¸ºï¼š
&#123;&quot;auths&quot;:&#123;&quot;harbor.voidking.com&quot;:&#123;&quot;username&quot;:&quot;admin&quot;,&quot;password&quot;:&quot;Harbor12345&quot;,&quot;auth&quot;:&quot;YWRtaW46SGFyYm9yMTIzNDU=&quot;&#125;&#125;&#125;

dockerconfigjson2 å†…å®¹ä¸ºï¼š
&#123;  &quot;auths&quot;: &#123;    &quot;harbor1.voidking.com&quot;: &#123;      &quot;username&quot;: &quot;haojin&quot;,      &quot;password&quot;: &quot;haojin123&quot;,      &quot;auth&quot;: &quot;aGFvamluOmhhb2ppbjEyMwo=&quot;    &#125;  &#125;&#125;

é‚£ä¹ˆ dockerconfigjson1 å’Œ dockerconfigjson2 å¯ä»¥æ‹¼æ¥æˆä¸€ä¸ªæ˜æ–‡dockerconfigjsonï¼š
jq -n &#x27;reduce inputs as $i (&#123;&#125;; . * $i)&#x27; dockerconfigjson1 dockerconfigjson2 | jq -c

ç„¶åé€šè¿‡base64åŠ å¯†ï¼Œå°±æ˜¯æˆ‘ä»¬éœ€è¦çš„åŠ å¯†åçš„dockerconfigjsonã€‚
jq -n &#x27;reduce inputs as $i (&#123;&#125;; . * $i)&#x27; dockerconfigjson1 dockerconfigjson2 | jq -c | base64 | tr -d &#x27;\n&#x27;

å‚è€ƒæ–‡æ¡£ï¼š

Multiple deployments for multiple secrets / private registries?
ã€Šjqå‘½ä»¤çš„å®‰è£…ä½¿ç”¨ã€‹

]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
        <tag>shell</tag>
        <tag>harbor</tag>
      </tags>
  </entry>
  <entry>
    <title>K8Sä¸­å®‰è£…é…ç½®KubeSphere</title>
    <url>/dev-k8s-kubesphere/</url>
    <content><![CDATA[KubeSphereç®€ä»‹
KubeSphere æ„¿æ™¯æ˜¯æ‰“é€ ä¸€ä¸ªä»¥ Kubernetes ä¸ºå†…æ ¸çš„äº‘åŸç”Ÿåˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿï¼Œå®ƒçš„æ¶æ„å¯ä»¥éå¸¸æ–¹ä¾¿åœ°ä½¿ç¬¬ä¸‰æ–¹åº”ç”¨ä¸äº‘åŸç”Ÿç”Ÿæ€ç»„ä»¶è¿›è¡Œå³æ’å³ç”¨ï¼ˆplug-and-playï¼‰çš„é›†æˆï¼Œæ”¯æŒäº‘åŸç”Ÿåº”ç”¨åœ¨å¤šäº‘ä¸å¤šé›†ç¾¤çš„ç»Ÿä¸€åˆ†å‘å’Œè¿ç»´ç®¡ç†ã€‚

ç®€å•æ¥è¯´ï¼ŒKubeSphereï¼ˆä¸‹æ–‡ç®€ç§°ksï¼‰å°±æ˜¯ä¸€ä¸ªå®¹å™¨ç®¡ç†å¹³å°ï¼Œå¯ä»¥å›¾å½¢åŒ–ç®¡ç†å¤šä¸ªK8Sé›†ç¾¤ã€‚
ç›¸å…³é“¾æ¥ï¼š

KubeSphereå®˜ç½‘
KubeSphereå­¦ä¹ è§†é¢‘



å®‰è£…å‡†å¤‡å‚è€ƒåœ¨ Kubernetes ä¸Šå®‰è£… KubeSphere - å‡†å¤‡å·¥ä½œï¼Œç¡®è®¤ç¯å¢ƒæ»¡è¶³kså®‰è£…éœ€æ±‚ã€‚
k8sç‰ˆæœ¬è®¡åˆ’å®‰è£…kubesphere-v3.3.0ç‰ˆæœ¬ï¼Œéœ€è¦ç¡®è®¤ Kubernetes ç‰ˆæœ¬å¿…é¡»ä¸ºï¼šv1.19.xï¼Œv1.20.xï¼Œv1.21.xï¼Œv1.22.x æˆ– v1.23.xï¼ˆå®éªŒæ€§æ”¯æŒï¼‰ã€‚
èµ„æºå¯ç”¨ CPU &gt; 1 æ ¸ï¼›å†…å­˜ &gt; 2 Gã€‚CPU å¿…é¡»ä¸º x86_64ï¼Œæš‚æ—¶ä¸æ”¯æŒ Arm æ¶æ„çš„ CPUã€‚
StorageClassKubernetes é›†ç¾¤å·²é…ç½®é»˜è®¤ StorageClassï¼ˆè¯·ä½¿ç”¨ kubectl get sc è¿›è¡Œç¡®è®¤ï¼‰ã€‚è¿™ä¸€æ¡æ˜¯æœ€é‡è¦çš„ï¼Œå› ä¸ºk8sé›†ç¾¤é»˜è®¤å¹¶ä¸ä¼šé…ç½®storageclassï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±å•ç‹¬é…ç½®ã€‚storageå®‰è£…é…ç½®æ–¹æ³•å‚è€ƒã€ŠK8Sä¸­å®‰è£…é…ç½®StorageClassã€‹
å®‰è£…kså‚è€ƒåœ¨ Kubernetes ä¸Šå®‰è£… KubeSphere - æ¦‚è¿°ï¼Œå®‰è£…kubesphere-v3.3.0ç‰ˆæœ¬
1ã€ä¸‹è½½manifests
wget https://github.com/kubesphere/ks-installer/releases/download/v3.3.0/kubesphere-installer.yamlwget https://github.com/kubesphere/ks-installer/releases/download/v3.3.0/cluster-configuration.yaml

2ã€ä¿®æ”¹é›†ç¾¤é…ç½® cluster-configuration.yamlks-apiserverå’Œks-controller-managerçš„èµ„æºè°ƒæ•´ç¤ºä¾‹å¦‚ä¸‹ï¼š
spec:  common:    core:      console:        enableMultiLogin: true        port: 30880      apiserver:        resources:          requests:            cpu: 100m            memory: 400Mi          limits:            cpu: &quot;2&quot;            memory: 8Gi      controllerManager:        resources:          requests:            cpu: 100m            memory: 400Mi          limits:            cpu: &quot;2&quot;            memory: 8Gi    minio:      volumeSize: 200Gi # Minio PVC size.

å› ä¸ºks-apiserverå’Œks-controller-managerå®¹æ˜“OOMï¼Œæ‰€ä»¥å†…å­˜ä¸Šé™è®¾ç½®é«˜ä¸€äº›ã€‚
kubesphereçš„ä¸€äº›åŠŸèƒ½ï¼ˆæ•°æ®å¤‡ä»½ã€æ—¥å¿—å­˜å‚¨ã€åº”ç”¨æ•°æ®å­˜å‚¨ï¼‰éœ€è¦ä¾èµ–minioï¼Œå› æ­¤æŠŠminioçš„å­˜å‚¨è°ƒå¤§ä¸€äº›ã€‚
opensearchä¸€èˆ¬ç”¨ä¸åˆ°ï¼Œopensearch.enabled æ”¹æˆfalseã€‚
3ã€æäº¤èµ„æºæ¸…å•åˆ°k8sé›†ç¾¤
kubectl apply -f kubesphere-installer.yamlkubectl apply -f cluster-configuration.yaml

4ã€æŸ¥çœ‹å®‰è£…è¿‡ç¨‹
k describe pod/ks-installer-xxx-xxx -n kubesphere-systemkubectl logs -n kubesphere-system $(kubectl get pod -n kubesphere-system -l &#x27;app in (ks-install, ks-installer)&#x27; -o jsonpath=&#x27;&#123;.items[0].metadata.name&#125;&#x27;) -f

5ã€æŸ¥çœ‹ksçŠ¶æ€
kubectl get all -n kubesphere-systemkubectl get svc/ks-console -n kubesphere-system

storageclassé—®é¢˜æ’æŸ¥redisæ²¡æœ‰readyï¼Œä¸€ç›´å¤„äºpendingçŠ¶æ€ï¼ŒæŸ¥çœ‹è¯¦æƒ…
kubectl describe pod/redis-d744b7468-45sh4 -n kubesphere-system
æŠ¥é”™ï¼š0/x nodes are available: x pod has unbound immediate PersistentVolumeClaims.
æŸ¥çœ‹nfs-client-provisioneræ—¥å¿—
kubectl logs --tail=100 nfs-client-provisioner-7975f9b954-7fw5l
æŠ¥é”™ï¼šprovision â€œkubesphere-system/redis-pvcâ€ class â€œnfs-storageâ€: unexpected error getting claim reference: selfLink was empty, canâ€™t make reference
è¿™æ˜¯å› ä¸ºï¼Œ1.20.xä¹‹åçš„k8sç‰ˆæœ¬ï¼Œselflinkå·²ç»å¼ƒç”¨äº†ã€‚è€Œnfs-client-provisionerçš„å®ç°åŸºäºselflinkï¼Œå› æ­¤æŠ¥é”™ã€‚
è§£å†³åŠæ³•ï¼šapiserverå¯åŠ¨æ—¶æ·»åŠ å‚æ•°--feature-gates=RemoveSelfLink=false1ã€ç¼–è¾‘kube-apiserver.yaml
sudo vim /etc/kubernetes/manifests/kube-apiserver.yaml
å¦‚ä¸‹ä¿®æ”¹ï¼š
spec:  containers:  - command:    - kube-apiserver    - --...    - --feature-gates=RemoveSelfLink=false

2ã€é‡å»ºapiserver podå› ä¸ºapiserveræ˜¯static podï¼Œæ‰€ä»¥åœ¨ä¿®æ”¹å®Œkube-apiserver.yamlåä¼šè‡ªåŠ¨é‡å»ºã€‚
å‚è€ƒæ–‡æ¡£ï¼š

unexpected error getting claim reference: selfLink was empty, canâ€™t make reference
kubernetes1.20ç‰ˆæœ¬ nfs-provisioneræŠ¥é”™é—®é¢˜:â€selfLink was emptyâ€

éªŒè¯ksKSé»˜è®¤å¯¹å¤–å¼€æ”¾ 30880 ç«¯å£ï¼Œé€šè¿‡ NodePort (IP:30880) ä½¿ç”¨é»˜è®¤å¸æˆ·å’Œå¯†ç  (admin/P@88w0rd) è®¿é—® Web æ§åˆ¶å°ã€‚http://192.168.56.101:30880/loginç¬¬ä¸€æ¬¡ç™»å½•æ—¶ï¼Œä¼šæç¤ºä¿®æ”¹å¯†ç ã€‚
ä¿®æ”¹ksé…ç½®å¦‚æœkså·²ç»å®‰è£…å®Œæˆï¼Œæƒ³è¦ä¿®æ”¹ksé›†ç¾¤é…ç½®çš„è¯ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹clusterconfigurationé…ç½®æ¥å®ç°ã€‚
kubectl get cm kubesphere-config -n kubesphere-system -oyamlkubectl get clusterconfiguration ks-installer -n kubesphere-system -oyamlkubectl edit clusterconfiguration ks-installer -n kubesphere-system
ä¿®æ”¹ks-installeré…ç½®åï¼Œç›¸å…³podä¼šè‡ªåŠ¨é‡å¯ï¼ˆè¯·è€å¿ƒç­‰å¾…ï¼Œå¤§æ¦‚5åˆ†é’Ÿå†…ä¼šè‡ªåŠ¨é‡å¯ï¼‰ã€‚
å‚è€ƒæ–‡æ¡£KubeSphere - LDAPèº«ä»½æä¾›è€…
é‡ç½®kså¯†ç å¦‚æœå¿˜è®°äº†ksçš„å¯†ç ï¼Œå¯ä»¥é€šè¿‡kubectlå‘½ä»¤è¿›è¡Œé‡ç½®ã€‚å‚è€ƒæ–‡æ¡£Reset the Account Password
kubectl patch users &lt;USERNAME&gt; -p &#x27;&#123;&quot;spec&quot;:&#123;&quot;password&quot;:&quot;&lt;YOURPASSWORD&gt;&quot;&#125;&#125;&#x27; --type=&#x27;merge&#x27; &amp;&amp; kubectl annotate users &lt;USERNAME&gt; iam.kubesphere.io/password-encrypted-

nginxé…ç½®é…ç½®å¥½nginxï¼Œé€šè¿‡åŸŸåè®¿é—®ksæ­£å¸¸ï¼Œä½†æ˜¯åœ¨ksé¡µé¢ä¸Šè®¿é—®å®¹å™¨ç»ˆç«¯æ—¶å¯èƒ½æŠ¥é”™ï¼š
Could not connect to the container. Do you have sufficient privileges?

è¿™æ˜¯å› ä¸ºé¡µé¢è®¿é—®ç»ˆç«¯éœ€è¦websocketæ”¯æŒï¼Œæ‰€ä»¥nginxé…ç½®ä¸­éœ€è¦æ·»åŠ websocketæ”¯æŒï¼Œé…ç½®æ–¹æ³•å‚è€ƒã€ŠNginxå…¥é—¨ç¯‡ã€‹ã€‚
æ·»åŠ é¡¹ç›®åˆ°ä¼ä¸šç©ºé—´Kuberneteså‘½åç©ºé—´å°±æ˜¯KubeSphereé¡¹ç›®ï¼Œè¿™äº›é¡¹ç›®å¯ä»¥åœ¨ å¹³å°ç®¡ç†-&gt;é›†ç¾¤ç®¡ç†-&gt;å…·ä½“é›†ç¾¤-&gt;é¡¹ç›® ä¸­æŸ¥çœ‹åˆ°ã€‚
æ·»åŠ ç°æœ‰KubeSphereé¡¹ç›®åˆ°ä¼ä¸šç©ºé—´ï¼š1ã€ä»¥ç®¡ç†å‘˜èº«ä»½ç™»å½•KubeSphereæ§åˆ¶å°ï¼Œè½¬åˆ°é›†ç¾¤ç®¡ç†é¡µé¢ã€‚ç‚¹å‡»é¡¹ç›®ï¼Œå¯ä»¥æŸ¥çœ‹åœ¨å½“å‰é›†ç¾¤ä¸­è¿è¡Œçš„æ‰€æœ‰é¡¹ç›®ã€‚2ã€é€šè¿‡ kubectl åˆ›å»ºçš„å‘½åç©ºé—´ä¸å±äºä»»ä½•ä¼ä¸šç©ºé—´ã€‚è¯·ç‚¹å‡»å³ä¾§çš„ä¸‰ä¸ªç‚¹ï¼Œé€‰æ‹©åˆ†é…ä¼ä¸šç©ºé—´ã€‚3ã€åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­ï¼Œä¸ºè¯¥é¡¹ç›®é€‰æ‹©ä¸€ä¸ªä¼ä¸šç©ºé—´å’Œé¡¹ç›®ç®¡ç†å‘˜ï¼Œç„¶åç‚¹å‡»ç¡®å®šã€‚4ã€è½¬åˆ°ä¼ä¸šç©ºé—´ï¼Œå¯ä»¥åœ¨é¡¹ç›®é¡µé¢çœ‹åˆ°è¯¥é¡¹ç›®å·²æ˜¾ç¤ºã€‚
å‚è€ƒæ–‡æ¡£ï¼š

æ·»åŠ ç°æœ‰ Kubernetes å‘½åç©ºé—´è‡³ KubeSphere ä¼ä¸šç©ºé—´

æ‰¹é‡æ·»åŠ é¡¹ç›®åˆ°ä¼ä¸šç©ºé—´kubectl get ns |grep voidking | awk &#x27;&#123;print $1&#125;&#x27; | xargs kubectl patch ns -p &#x27;metadata: &#123;labels: &#123;kubesphere.io/workspace: &quot;voidking&quot;&#125;, annotations: &#123;kubesphere.io/creator: &quot;haojin&quot;&#125;&#125;&#x27;

kså¤šé›†ç¾¤å‚è€ƒæ–‡æ¡£ï¼š

Kubernetes å¤šé›†ç¾¤åœ¨å¼€æºé¡¹ç›® KubeSphere çš„åº”ç”¨

å¤šç§Ÿæˆ·ç®¡ç†åŸºæœ¬æ¦‚å¿µ
é›†ç¾¤ï¼šk8sé›†ç¾¤ã€‚
ä¼ä¸šç©ºé—´ï¼šä¸šåŠ¡ç®¡ç†åŸºæœ¬å•å…ƒã€‚
å…¬å¸éƒ¨é—¨ï¼šå…¬å¸å†…éƒ¨çš„éƒ¨é—¨å’Œkséƒ¨é—¨æ²¡æœ‰å¿…ç„¶è”ç³»ã€‚
kséƒ¨é—¨ï¼šä¼ä¸šç©ºé—´ä¸­æƒé™åˆ’åˆ†çš„å•ä½ï¼Œæ¯ä¸ªä¼ä¸šç©ºé—´åŒ…å«å¤šä¸ªkséƒ¨é—¨ï¼Œæ¯ä¸ªkséƒ¨é—¨åŒ…å«å¤šä¸ªç”¨æˆ·ï¼Œæ–¹ä¾¿æ‰¹é‡æˆæƒã€‚
ksç”¨æˆ·ï¼šæ¯ä¸ªå…¬å¸æˆå‘˜ï¼Œå¯¹åº”ä¸€ä¸ªksç”¨æˆ·ï¼Œä¸€ä¸ªksç”¨æˆ·å¯ä»¥å±äºå¤šä¸ªkséƒ¨é—¨ã€‚
é¡¹ç›®ï¼šé¡¹ç›®å¯¹åº”k8sä¸­çš„namespaceï¼Œä¸€ä¸ªé¡¹ç›®å¯ä»¥åŒæ—¶åˆ†é…ç»™ä¸åŒçš„kséƒ¨é—¨ã€‚

é›†ç¾¤å’Œä¼ä¸šç©ºé—´ï¼Œæ˜¯å¤šå¯¹å¤šçš„å…³ç³»ã€‚ä¸€ä¸ªä¼ä¸šç©ºé—´å¯ä»¥åŒ…å«å¤šä¸ªé›†ç¾¤ï¼Œä¸€ä¸ªé›†ç¾¤å¯ä»¥è¢«å¤šä¸ªä¼ä¸šç©ºé—´åŒ…å«ã€‚
ksä¸­æ¯ä¸ªé¡¹ç›®åªèƒ½æ·»åŠ åˆ°ä¸€ä¸ªä¼ä¸šç©ºé—´ï¼Œå› æ­¤ä¼ä¸šç©ºé—´æŒ‰ç…§ä¸šåŠ¡æ¥åˆ’åˆ†ï¼Œä½œä¸ºä¸šåŠ¡ç®¡ç†çš„åŸºæœ¬å•ä½ã€‚
ä¼ä¸šç©ºé—´ä½œä¸ºæ“ä½œkubesphereçš„å”¯ä¸€å…¥å£ï¼Œåœ¨ä¼ä¸šç©ºé—´æˆæƒä¸€ä¸ªé¡¹ç›®çš„ç®¡ç†æƒé™åï¼Œå¦‚æœç”¨æˆ·é€šè¿‡é›†ç¾¤ç®¡ç†æ‰¾åˆ°ä¸€ä¸ªé¡¹ç›®ï¼Œæ˜¯æ²¡æœ‰æƒé™çš„ã€‚
æ¯ä¸ªä¼ä¸šç©ºé—´ï¼Œå»ºè®®è®¾ç½®1-3ä¸ªç®¡ç†å‘˜ã€‚ç®¡ç†å‘˜è´Ÿè´£æœ¬ä¼ä¸šç©ºé—´çš„å…·ä½“æƒé™ç®¡ç†ï¼Œä¾‹å¦‚æ·»åŠ ç®¡ç†å‘˜ã€æ–°å»ºéƒ¨é—¨ã€ç»™æ–°æˆå‘˜æˆæƒç­‰
kséƒ¨é—¨åˆ’åˆ†çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†é¡¹ç›®çš„æƒé™ç®¡ç†ï¼Œå› æ­¤éœ€è¦å…ˆå¯¹é›†ç¾¤å’Œé¡¹ç›®æƒé™è¿›è¡Œè§„åˆ’ã€‚é€šè¿‡kséƒ¨é—¨ï¼Œæˆæƒå¯ä»¥ç²¾ç¡®åˆ°æ¯ä¸ªé¡¹ç›®å’Œæ¯ä¸ªäººã€‚
å‚è€ƒæ–‡æ¡£ï¼š

KubeSphere ä¸­çš„å¤šç§Ÿæˆ·
æ·»åŠ ç°æœ‰ Kubernetes å‘½åç©ºé—´è‡³ KubeSphere ä¼ä¸šç©ºé—´

å¤šç§Ÿæˆ·ç®¡ç†æ“ä½œæµç¨‹1ã€åˆ›å»ºä¼ä¸šç©ºé—´ï¼Œå¹¶å…³è”é›†ç¾¤
2ã€æ·»åŠ ç°æœ‰é¡¹ç›®åˆ°ä¼ä¸šç©ºé—´
3ã€åˆ›å»ºéƒ¨é—¨ï¼Œé’ˆå¯¹éƒ¨é—¨ç²¾ç»†åŒ–æˆæƒ
4ã€æ·»åŠ ç”¨æˆ·åˆ°éƒ¨é—¨
5ã€é€šçŸ¥kså…¥å£éƒ½ä½¿ç”¨ä¼ä¸šç©ºé—´ï¼Œä¸è¦ä½¿ç”¨é›†ç¾¤ç®¡ç†
]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
        <category>troubleshooting</category>
        <category>storage</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>å­˜å‚¨</tag>
        <tag>kubesphere</tag>
        <tag>storageclass</tag>
      </tags>
  </entry>
  <entry>
    <title>KubeSphereç™»å½•åæŠ¥é”™Session Timeout</title>
    <url>/dev-kubesphere-session-timeout/</url>
    <content><![CDATA[é—®é¢˜æè¿°å¤§éƒ¨åˆ†ç”¨æˆ·èƒ½å¤Ÿæ­£å¸¸ç™»å½•å’Œä½¿ç”¨ksï¼Œä½†æ˜¯ä¸ªåˆ«ç”¨æˆ·ï¼ˆvoidking01ï¼‰ç™»å½•ksåæŠ¥é”™ã€‚ç”¨æˆ·ç™»å½•ksï¼Œæ­£å¸¸ï¼›ç™»å½•åæŸ¥çœ‹å·¥ä½œå°ï¼Œæ­£å¸¸ï¼›æŸ¥çœ‹hosté›†ç¾¤å’ŒåªåŒ…å«hosté›†ç¾¤çš„ä¼ä¸šç©ºé—´ï¼Œæ­£å¸¸ã€‚
ä½†æ˜¯ï¼Œé€‰æ‹©ä¸€ä¸ªéhosté›†ç¾¤æˆ–è€…é€‰æ‹©ä¸€ä¸ªåŒ…å«éhosté›†ç¾¤çš„ä¼ä¸šç©ºé—´åï¼Œé¡µé¢å°±ä¼šå¼¹å‡ºé”™è¯¯æç¤ºï¼šSession timeout or this account is logged in elsewhere, please login again
ç„¶åè½¬åˆ°ç™»å½•é¡µé¢ï¼Œå†æ¬¡ç™»å½•ï¼Œç»§ç»­å¼¹å‡ºä¸Šé¢çš„é”™è¯¯æç¤ºã€‚å¾ªç¯å¾€å¤ã€‚

æƒé™é—®é¢˜ï¼Ÿæ›´æ”¹ç”¨æˆ·æƒé™ä¸ºadminï¼Œé—®é¢˜ä¾æ—§ã€‚
é‡æ–°ç»™ç”¨æˆ·æˆæƒï¼Œé—®é¢˜ä¾æ—§ã€‚
ksç‰ˆæœ¬é—®é¢˜ï¼Ÿksç‰ˆæœ¬ä»3.2.1å‡çº§åˆ°äº†3.3.1ï¼Œé—®é¢˜ä¾æ—§ã€‚
kube-eventsç»„ä»¶é—®é¢˜ï¼Ÿå‚è€ƒæ–‡æ¡£ç™»å½•æˆåŠŸåï¼Œæ€»æ˜¯æç¤ºä¼šè¯è¶…æ—¶æˆ–æ­¤è´¦æˆ·åœ¨å…¶ä»–ç™»å½•åœ°æ–¹ç™»å½•ï¼Œè¯·é‡æ–°ç™»å½•
ç»æ£€æŸ¥ï¼Œå¹¶æ²¡æœ‰kube-eventså¤±è´¥æ—¥å¿—ï¼Œä¸æ˜¯å®ƒçš„é—®é¢˜ã€‚
ksé…ç½®é—®é¢˜ï¼Ÿå‚è€ƒæ–‡æ¡£ï¼š

Session Timeout
Set Up External Authentication

é˜…è¯»ksæ–‡æ¡£ï¼Œæ€€ç–‘æ˜¯ksé…ç½®ä¸å¯¹å¼•èµ·çš„ã€‚é‚£å°±æŒ‰ç…§å®˜æ–¹æ–‡æ¡£é‡æ–°é…ç½®ä¸€ä¸‹è¯•è¯•ã€‚
hosté›†ç¾¤1ã€ç¼–è¾‘ks-installeré…ç½®æ–‡ä»¶
kubectl -n kubesphere-system edit cc ks-installer

2ã€ä¿®æ”¹authenticationéƒ¨åˆ†é…ç½®
spec:  authentication:    jwtSecret: &#x27;&#x27;    authenticateRateLimiterMaxTries: 10    authenticateRateLimiterDuration: 10m0s    loginHistoryRetentionPeriod: 168h    maximumClockSkew: 10s    multipleLogin: true    oauthOptions:      accessTokenMaxAge: 1h      accessTokenInactivityTimeout: 30m      identityProviders:      - name: LDAP        type: LDAPIdentityProvider        mappingMethod: auto        provider:          host: 192.168.0.2:389          managerDN: uid=root,cn=users,dc=nas          managerPassword: ********          userSearchBase: cn=users,dc=nas          loginAttribute: uid          mailAttribute: mail

memberé›†ç¾¤memberé›†ç¾¤åªè¦é…ç½®jwtSecretå³å¯ï¼Œå’Œhosté›†ç¾¤ä¿æŒä¸€è‡´ã€‚è¯¦æƒ…å‚è€ƒDirect Connection
ä¿®æ”¹å®Œæˆï¼Œks podé‡å»ºåï¼Œé—®é¢˜ä¾æ—§ã€‚
åˆ é™¤ç”¨æˆ·é‡å»ºï¼Ÿåˆ é™¤ç”¨æˆ·ï¼Œç”¨æˆ·é‡æ–°ç™»å½•ï¼Œé‡æ–°æˆæƒï¼Œé—®é¢˜ä¾æ—§ã€‚
æ—¶é’Ÿé—®é¢˜ï¼Ÿå‚è€ƒSession Timeoutæ–‡æ¡£ï¼Œè¿˜æœ‰ä¸€ç§å¯èƒ½æ˜¯èŠ‚ç‚¹æ—¶é’Ÿåå·®ã€‚

The node clock skew affects time-sensitive operations such as validating the expiration time of a user token. You can configure the server time synchronization with an NTP server. MaximumClockSkew can also be set, which defaults to 10 seconds.

åˆ†åˆ«ç™»å½•hosté›†ç¾¤å’Œmemberé›†ç¾¤çš„apiserver podï¼Œæ‰§è¡Œdateå‘½ä»¤æŸ¥çœ‹æ—¶é—´ã€‚å‘ç°ä¸åŒé›†ç¾¤çš„æ—¶åŒºé…ç½®ä¸åŒï¼Œå•Šå“ˆï¼Œå¤§æ¦‚ç‡æ˜¯è¿™ä¸ªé—®é¢˜äº†ï¼ï¼ï¼
sudo cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime

ç»Ÿä¸€æ‰€æœ‰é›†ç¾¤èŠ‚ç‚¹æ—¶åŒºä¸ºAsia/Shanghaiï¼Œç„¶åé‡å»ºks podã€‚é—®é¢˜ä¾æ—§ã€‚
æŠŠmaximumClockSkewä¹Ÿè°ƒå¤§ä¸€äº›ï¼Œé»˜è®¤10sï¼Œè°ƒæ•´åˆ°60sè¯•è¯•ã€‚é—®é¢˜ä¾æ—§ã€‚
æŸ¥çœ‹æ—¥å¿—å‚è€ƒæ–‡æ¡£æ¢å¤ä¸»é›†ç¾¤å¯¹æˆå‘˜é›†ç¾¤çš„è®¿é—®æƒé™ï¼ŒæŸ¥çœ‹memberé›†ç¾¤çš„api-serveræ—¥å¿—ã€‚
kubectl -n kubesphere-system logs ks-apiserver-7c9c9456bd-qv6bs

å‡ºç°æŠ¥é”™ä¿¡æ¯ï¼š
W1104 11:13:28.432457       1 clusterroles.go:117] invalid aggregation role found: cluster-admin, role-template-manage-configmapsW1104 11:13:28.432464       1 clusterroles.go:117] invalid aggregation role found: cluster-admin, role-template-view-secretsW1104 11:13:28.432469       1 clusterroles.go:117] invalid aggregation role found: cluster-admin, role-template-manage-secretsW1104 11:13:28.432475       1 clusterroles.go:117] invalid aggregation role found: cluster-admin, role-template-view-service-accountsW1104 11:13:28.432484       1 clusterroles.go:117] invalid aggregation role found: cluster-admin, role-template-manage-service-accountsE1104 11:13:51.879574       1 upgradeaware.go:401] Error proxying data from backend to client: readfrom tcp 10.244.161.166:9090-&gt;192.168.50.74:34540: write tcp 10.244.161.166:9090-&gt;192.168.50.74:34540: write: connection reset by peer

é¡ºç€è¿™ä¸ªæ—¥å¿—ï¼Œåœ¨kubesphereç¤¾åŒºæ‰¾åˆ°äº†ä¸€ä¸ªç›¸åŒçš„é—®é¢˜kubesphereä½¿ç”¨å­è´¦æˆ·â€¦ä¼šè·³è½¬åˆ°ç™»å½•ç•Œé¢

çœ‹èµ·æ¥æ˜¯å¤šé›†ç¾¤åŒæ­¥å‡ºé—®é¢˜äº†ï¼Œçœ‹ä¸‹ host é›†ç¾¤ kube-federation-system è¿™ä¸ª namespace ä¸‹çš„ pod æ˜¯å¦éƒ½æ­£å¸¸

æ ¹æ®è®ºå›å¤§ä½¬çš„æç¤ºï¼Œæ£€æŸ¥kube-federation-system è¿™ä¸ª namespace ä¸‹çš„podä¿¡æ¯ã€‚
kubectl get pod -n kube-federation-systemkubectl logs --tail=100 kubefed-admission-webhook-657959d4d6-2sx5f -n kube-federation-systemkubectl logs --tail=100 kubefed-controller-manager-54fbd87f7f-6t7jq -n kube-federation-systemkubectl logs --tail=100 kubefed-controller-manager-54fbd87f7f-fh9pk -n kube-federation-system

çœ‹ç€ä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ˜æ˜¾çš„æŠ¥é”™ä¿¡æ¯ã€‚
æ ¹æ®è®ºå›çš„æç¤ºï¼Œæœ‰ä¸¤ä¸ªè§£å†³åŠæ³•ï¼šä¸€ä¸ªæ˜¯æ›¿æ¢kubeconfigï¼Œä¸€ä¸ªæ˜¯å‡çº§kubefed controllerã€‚

Update the version of kubefed controller 
fix: controller-manager panic when kubeconfig set filed insecure-skip-tls-verify

è¿™é‡Œæˆ‘ä»¬é€‰æ‹©å‡çº§kubefed controllerã€‚
å‡çº§kubefed controller1ã€æŸ¥çœ‹å½“å‰kubefed controllerç‰ˆæœ¬
kubectl get deployment.apps/kubefed-controller-manager -n kube-federation-system -oyaml| grep image
æŸ¥çœ‹åˆ°å½“å‰ç‰ˆæœ¬v0.8.1
2ã€æŸ¥çœ‹kubefed controlleræœ€æ–°ç‰ˆæœ¬è®¿é—®dockerhub - kubesphere/kubefedæ‰¾åˆ°å½“å‰æœ€æ–°ç‰ˆæœ¬ï¼Œä¹Ÿæ˜¯v0.8.1
è«éä¸æ˜¯ç‰ˆæœ¬é—®é¢˜ï¼Ÿå†å¯¹æ¯”æœ¬åœ°é•œåƒå’Œçº¿ä¸Šé•œåƒçš„DIGESTï¼Œå‘ç°å®ƒä»¬æ˜¯ä¸åŒçš„ã€‚çœ‹æ¥æ˜¯ä¿®å¤bugåï¼Œä½¿ç”¨äº†åŸæ¥çš„é•œåƒtagã€‚
docker inspect kubesphere/kubefed:v0.8.1 | grep -i id

3ã€ç¼©å®¹kubefed controller
kubectl scale --replicas=0 deployment.apps/kubefed-controller-manager -n kube-federation-system

4ã€åˆ é™¤å®¿ä¸»æœºæœ¬åœ°é•œåƒ&amp;æ‹‰å–æœ€æ–°é•œåƒ
docker rmi kubesphere/kubefed:v0.8.1 docker pull kubesphere/kubefed:v0.8.1

5ã€é‡æ–°æ‹‰èµ·kubefed controller
kubectl scale --replicas=1 deployment.apps/kubefed-controller-manager -n kube-federation-system

é—®é¢˜ä¾æ—§ã€‚ã€‚ã€‚
åºŸå¼ƒé›†ç¾¤çš„é—®é¢˜ï¼Ÿå†æ¬¡æŸ¥çœ‹kubefed-controller-managerçš„æ—¥å¿—ï¼Œæ„Ÿè§‰åƒæ˜¯åºŸå¼ƒé›†ç¾¤å¼•èµ·çš„é—®é¢˜ã€‚
E1104 08:10:15.107249       1 controller.go:512] failed to delete FederatedGlobalRoleBinding &quot;voidking01-platform-regular&quot;: the following clusters were not ready: vk-dev, edge-clusterI1104 08:10:15.702028       1 controller.go:471] Ensuring deletion of FederatedGlobalRoleBinding &quot;voidking01-platform-admin&quot;I1104 08:10:15.702064       1 controller.go:500] Deserializing delete options of FederatedGlobalRoleBinding &quot;voidking01-platform-admin&quot;I1104 08:10:15.702072       1 controller.go:508] Deleting resources managed by FederatedGlobalRoleBinding &quot;voidking01-platform-admin&quot; from member clusters.E1104 08:10:15.702117       1 controller.go:512] failed to delete FederatedGlobalRoleBinding &quot;voidking01-platform-admin&quot;: the following clusters were not ready: vk-dev, edge-cluster

åˆ é™¤åºŸå¼ƒçš„é›†ç¾¤åï¼ˆæœªå°±ç»ªçš„é›†ç¾¤ï¼‰ï¼Œé—®é¢˜è§£å†³ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
        <category>troubleshooting</category>
        <category>storage</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>å­˜å‚¨</tag>
        <tag>kubesphere</tag>
        <tag>storageclass</tag>
      </tags>
  </entry>
  <entry>
    <title>K8Sé›†ç¾¤ä¸­å˜æ›´æ•°æ®å­˜å‚¨è·¯å¾„</title>
    <url>/dev-change-data-dir-in-k8s/</url>
    <content><![CDATA[éœ€æ±‚æè¿°dockerçš„é»˜è®¤å·¥ä½œç›®å½•æ˜¯/var/lib/dockerï¼Œä¼šå­˜æ”¾é•œåƒæ–‡ä»¶ã€å®¹å™¨æ—¥å¿—å’Œå†™å…¥åˆ°å®¹å™¨ä¸´æ—¶ç›®å½•çš„æ–‡ä»¶ç­‰ï¼Œé»˜è®¤æŒ‚è½½åœ¨ç³»ç»Ÿç›˜ã€‚
kubeletçš„é»˜è®¤å·¥ä½œç›®å½•æ˜¯/var/lib/kubeletï¼Œä¼šå­˜æ”¾volumeæ–‡ä»¶ï¼ˆåŒ…æ‹¬emptyDir volume)ã€pluginæ–‡ä»¶ç­‰ï¼Œä¹Ÿæ˜¯é»˜è®¤æŒ‚è½½åœ¨ç³»ç»Ÿç›˜ã€‚
ä½¿ç”¨kubeadmå®‰è£…çš„etcdï¼Œé»˜è®¤æ•°æ®ç›®å½•æ˜¯/var/lib/etcdï¼Œä¹Ÿæ˜¯é»˜è®¤æŒ‚è½½åœ¨ç³»ç»Ÿç›˜ã€‚
è€Œç³»ç»Ÿç›˜ä¸€èˆ¬éƒ½ä¸ä¼šå¤ªå¤§ï¼Œå› æ­¤æœ€å¥½æŠŠdockerå·¥ä½œç›®å½•ã€kubeletå·¥ä½œç›®å½•å’Œetcdæ•°æ®ç›®å½•æ›´æ”¹åˆ°æ•°æ®ç›˜ã€‚


æ“ä½œæ€è·¯èŠ‚ç‚¹åˆ†ä¸ºä¸¤ç±»ï¼ŒmasterèŠ‚ç‚¹ï¼ˆå¤šä¸ªèŠ‚ç‚¹ï¼‰å’ŒworkerèŠ‚ç‚¹ï¼ˆå¤šä¸ªèŠ‚ç‚¹ï¼‰ã€‚
å•ä¸ªmasterèŠ‚ç‚¹æ“ä½œæµç¨‹ï¼š1ã€master-xç¦æ­¢è°ƒåº¦ã€é©±é€pod2ã€master-xæ“ä½œä¿®æ”¹dockerå·¥ä½œç›®å½•ã€kubeletå·¥ä½œç›®å½•3ã€master-xå¼€æ”¾è°ƒåº¦4ã€master-xæ“ä½œä¿®æ”¹etcdæ•°æ®ç›®å½•
å•ä¸ªworkerèŠ‚ç‚¹æ“ä½œæµç¨‹ï¼š1ã€worker-xç¦æ­¢è°ƒåº¦ã€é©±é€pod2ã€worker-xæ“ä½œä¿®æ”¹dockerå·¥ä½œç›®å½•ã€kubeletå·¥ä½œç›®å½•3ã€worker-xå¼€æ”¾è°ƒåº¦
masterèŠ‚ç‚¹æŒ¨ä¸ªæ“ä½œï¼ŒworkerèŠ‚ç‚¹æŒ¨ä¸ªæ“ä½œæˆ–è€…åˆ†æ‰¹æ“ä½œã€‚
masterèŠ‚ç‚¹æ“ä½œä»¥master-0ä¸ºä¾‹ï¼Œæ–¹ä¾¿è¿›è¡Œæè¿°ã€‚
ç¦æ­¢è°ƒåº¦&amp;é©±é€podkubectl drain master-0 --ignore-daemonsets

é©±é€master-0èŠ‚ç‚¹ä¸Šçš„podï¼Œé™„å¸¦æ•ˆæœç¦æ­¢è°ƒåº¦ã€‚
ä¿®æ”¹dockerå·¥ä½œç›®å½•è¯¦æƒ…å‚è€ƒ ã€ŠDockerä¿®æ”¹å·¥ä½œç›®å½•ã€‹
ä¿®æ”¹kubeletå·¥ä½œç›®å½•è¯¦æƒ…å‚è€ƒ ã€Škubeletä¿®æ”¹å·¥ä½œç›®å½•ã€‹
å¼€æ”¾è°ƒåº¦kubectl uncordon master-0

å•ä¸ªèŠ‚ç‚¹ä¿®æ”¹etcdæ•°æ®ç›®å½•è¯¦æƒ…å‚è€ƒ ã€Šetcdä¿®æ”¹æ•°æ®ç›®å½•ã€‹
workerèŠ‚ç‚¹æ“ä½œä»¥worker-0ä¸ºä¾‹ï¼Œæ–¹ä¾¿è¿›è¡Œæè¿°ã€‚
ç¦æ­¢è°ƒåº¦&amp;é©±é€podkubectl drain worker-0 --ignore-daemonsets
é©±é€worker-0èŠ‚ç‚¹ä¸Šçš„podï¼Œé™„å¸¦æ•ˆæœç¦æ­¢è°ƒåº¦ã€‚
ä¿®æ”¹dockerå·¥ä½œç›®å½•è¯¦æƒ…å‚è€ƒ ã€ŠDockerä¿®æ”¹å·¥ä½œç›®å½•ã€‹
ä¿®æ”¹kubeletå·¥ä½œç›®å½•è¯¦æƒ…å‚è€ƒ ã€Škubeletä¿®æ”¹å·¥ä½œç›®å½•ã€‹
å¼€æ”¾è°ƒåº¦kubectl uncordon worker-0







]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>etcdä¿®æ”¹æ•°æ®ç›®å½•</title>
    <url>/dev-etcd-data-dir/</url>
    <content><![CDATA[éœ€æ±‚æè¿°ä½¿ç”¨kubeadmå®‰è£…çš„etcdï¼Œé»˜è®¤æ•°æ®ç›®å½•æ˜¯/var/lib/etcdï¼Œé»˜è®¤æŒ‚è½½åœ¨ç³»ç»Ÿç›˜ã€‚
è€Œç³»ç»Ÿç›˜ä¸€èˆ¬éƒ½ä¸ä¼šå¤ªå¤§ï¼Œå› æ­¤æœ€å¥½æŠŠetcdçš„æ•°æ®ç›®å½•æ›´æ”¹åˆ°æ•°æ®ç›˜ã€‚
æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¼šæŠŠetcdçš„æ•°æ®ç›®å½•ä»/var/lib/etcdæ”¹åˆ°/data/etcdï¼Œå…¶ä¸­/dataç›®å½•æŒ‚è½½äº†æ•°æ®ç›˜ã€‚


æ€è·¯æƒ³åˆ°ä¸¤ä¸ªæ–¹æ³•ï¼š

ä¿®æ”¹é…ç½®æ³•ï¼šæ‹·è´æ•°æ®åˆ°æ–°ç›®å½•ï¼Œä¿®æ”¹å·¥ä½œç›®å½•é…ç½®åˆ°æ–°ç›®å½•ã€‚
è½¯é“¾æ³•ï¼šæ‹·è´æ•°æ®åˆ°æ–°ç›®å½•ï¼Œä½¿ç”¨æ–°ç›®å½•çš„è½¯é“¾æ›¿æ¢åŸæ¥çš„å·¥ä½œç›®å½•ã€‚ä¸æ¨èï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰ä»€ä¹ˆéšè—å‘ã€‚

etcdæ˜¯é›†ç¾¤ï¼Œä¸ºäº†ä¿è¯etcdæœåŠ¡å¯ç”¨ï¼Œéœ€è¦æŒ¨ä¸ªèŠ‚ç‚¹åœæœæ“ä½œï¼Œå®Œæˆä¸€ä¸ªèŠ‚ç‚¹å†è¿›è¡Œä¸‹ä¸€ä¸ªã€‚
ä¿®æ”¹é…ç½®æ³•1ã€åœæ­¢etcd
sudo docker ps | grep etcdsudo mv /etc/kubernetes/manifests/etcd.yaml ~/sudo docker ps | grep etcdsudo etcdctl  --cacert=/etc/kubernetes/pki/etcd/ca.crt --cert=/etc/kubernetes/pki/etcd/peer.crt --key=/etc/kubernetes/pki/etcd/peer.key --endpoints=&quot;https://192.168.56.101:2379,https://192.168.56.102:2379,https://192.168.56.103:2379&quot; endpoint health

2ã€ä¿®æ”¹etcdæ•°æ®ç›®å½•ç¼–è¾‘~/etcd.yamlï¼Œetcd-dataçš„pathä»/var/lib/etcdæ”¹ä¸º/data/etcd
spec:  volumes:  - hostPath:      path: /etc/kubernetes/pki/etcd      type: DirectoryOrCreate    name: etcd-certs  - hostPath:      path: /data/etcd      type: DirectoryOrCreate    name: etcd-data

3ã€æ‹·è´æ•°æ®
sudo mkdir -p /data/etcdsudo cp -rf /var/lib/etcd/. /data/etcdsudo mv /var/lib/etcd /var/lib/etcd.old

4ã€å¯åŠ¨etcd&amp;æŸ¥çœ‹etcdçŠ¶æ€
sudo mv ~/etcd.yaml /etc/kubernetes/manifests/sudo docker ps | grep etcdsudo etcdctl  --cacert=/etc/kubernetes/pki/etcd/ca.crt \    --cert=/etc/kubernetes/pki/etcd/peer.crt --key=/etc/kubernetes/pki/etcd/peer.key \    --endpoints=&quot;https://192.168.56.101:2379,https://192.168.56.102:2379,https://192.168.56.103:2379&quot; \    endpoint health

è½¯é“¾æ³•å¯ä»¥å‚è€ƒ ã€ŠDockerä¿®æ”¹å·¥ä½œç›®å½•ã€‹
kubeadmæŒ‡å®šetcdæ•°æ®ç›®å½•ä¿®æ”¹etcdæ•°æ®ç›®å½•ä½¿ç”¨kubeadmå®‰è£…çš„etcdï¼Œetcdçš„æ•°æ®ç›®å½•æ˜¯åœ¨kubeadm.confæ–‡ä»¶ä¸­æŒ‡å®šçš„ã€‚
æ ¹æ®kubeadm.confä¸­çš„é…ç½®ï¼Œæ–°åŠ å…¥çš„masterèŠ‚ç‚¹ä¸Šä¼šç”Ÿæˆ/etc/kubernetes/manifests/etcd.yamlæ–‡ä»¶ï¼Œç„¶åetcdå°±ä¼šä½œä¸ºstatic podè¿è¡Œã€‚
å¯¹äºå·²ç»å®‰è£…å¥½çš„k8sé›†ç¾¤ï¼Œå¯ä»¥é€šè¿‡kubectlä¿®æ”¹é›†ç¾¤ä¸­kubeadmçš„é…ç½®
kubectl edit cm kubeadm-config -n kube-system 

å…¶ä¸­ï¼Œetcdæ•°æ®ç›®å½•çš„ä¿®æ”¹æ–¹æ³•ä¸ºï¼šetcd.local.dataDir å˜é‡ä¿®æ”¹ä¸º /data/etcd
ä¿®æ”¹ä¹‹åï¼Œå¹¶ä¸ä¼šé©¬ä¸Šç”Ÿæ•ˆï¼Œæœ‰æ–°çš„masterèŠ‚ç‚¹åŠ å…¥ï¼Œæ‰ä¼šä½¿ç”¨è¿™ä»½æ–°çš„etcdæ•°æ®ç›®å½•é…ç½®ã€‚
åˆå§‹åŒ–å‰æŒ‡å®šetcdæ•°æ®ç›®å½•åœ¨æ‰§è¡Œkubeadm initä¹‹å‰ï¼Œåœ¨kubeadm.confæ–‡ä»¶ä¸­æŒ‡å®šæ•°æ®ç›®å½•ã€‚
etcd:  local:    dataDir: /data/etcd





]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>cloudnative</tag>
        <tag>etcd</tag>
      </tags>
  </entry>
  <entry>
    <title>kubeletä¿®æ”¹å·¥ä½œç›®å½•</title>
    <url>/dev-kubelet-root-dir/</url>
    <content><![CDATA[éœ€æ±‚æè¿°kubeletçš„é»˜è®¤å·¥ä½œç›®å½•ï¼ˆå­˜å‚¨ç›®å½•ï¼‰æ˜¯/var/lib/kubeletï¼Œä¼šå­˜æ”¾volumeæ–‡ä»¶ï¼ˆåŒ…æ‹¬emptyDir volume)ã€pluginæ–‡ä»¶ç­‰ï¼Œé»˜è®¤æŒ‚è½½åœ¨ç³»ç»Ÿç›˜ã€‚
è€Œç³»ç»Ÿç›˜ä¸€èˆ¬éƒ½ä¸ä¼šå¤ªå¤§ï¼Œå› æ­¤æœ€å¥½æŠŠkubeletå·¥ä½œç›®å½•æ›´æ”¹åˆ°æ•°æ®ç›˜ã€‚
æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¼šæŠŠdockerçš„å·¥ä½œç›®å½•ä»/var/lib/kubeletæ”¹åˆ°/data/kubeletï¼Œå…¶ä¸­/dataç›®å½•æŒ‚è½½äº†æ•°æ®ç›˜ã€‚


æ€è·¯æƒ³åˆ°ä¸¤ä¸ªæ–¹æ³•ï¼š

ä¿®æ”¹é…ç½®æ³•ï¼šæ‹·è´æ•°æ®åˆ°æ–°ç›®å½•ï¼Œä¿®æ”¹å·¥ä½œç›®å½•é…ç½®åˆ°æ–°ç›®å½•ã€‚
è½¯é“¾æ³•ï¼šæ‹·è´æ•°æ®åˆ°æ–°ç›®å½•ï¼Œä½¿ç”¨æ–°ç›®å½•çš„è½¯é“¾æ›¿æ¢åŸæ¥çš„å·¥ä½œç›®å½•ã€‚ä¸æ¨èï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰ä»€ä¹ˆéšè—å‘ã€‚

ä¿®æ”¹kubeleté…ç½®ä¹‹å‰ï¼Œä¸ºäº†ä¿è¯ä¸å½±å“èŠ‚ç‚¹ä¸Šçš„æœåŠ¡ï¼Œæœ€å¥½å…ˆå¯¹èŠ‚ç‚¹æ“ä½œç¦æ­¢è°ƒåº¦å’Œé©±é€ã€‚
ä¿®æ”¹é…ç½®æ³•1ã€åœæ­¢kubelet
systemctl stop kubelet

2ã€æ‹·è´kubeletå·¥ä½œç›®å½•æ•°æ®æ–‡ä»¶åˆ°æ–°è·¯å¾„
mkdir -p /data/kubeletcp -rf /var/lib/kubelet/pods /data/kubelet/cp -rf /var/lib/kubelet/pod-resources /data/kubelet/mv /var/lib/kubelet/pods&#123;,.old&#125;mv /var/lib/kubelet/pod-resources&#123;,.old&#125;

æ³¨æ„ï¼Œä»¥ä¸‹æ–‡ä»¶å’Œç›®å½•ä¸€å®šè¦ä¿ç•™åœ¨è€è·¯å¾„ï¼Œä¸è¦ç§»åŠ¨å’Œåˆ é™¤

/var/lib/kubelet/config.yaml
/var/lib/kubelet/kubeadm-flags.env
/var/lib/kubelet/pki
/var/lib/kubelet/device-plugins

3ã€æ·»åŠ æˆ–ä¿®æ”¹ /etc/sysconfig/kubelet é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ root-dirå‚æ•°
KUBELET_EXTRA_ARGS=&quot;--root-dir=/data/kubelet&quot;

PSï¼šå¦‚æœæ˜¯ubuntuç³»ç»Ÿï¼Œåˆ™è¦ä¿®æ”¹ /etc/default/kubelet é…ç½®æ–‡ä»¶
4ã€é‡å¯kubelet
systemctl daemon-reload &amp;&amp; systemctl restart kubeletsystemctl status kubelet

5ã€ç¡®è®¤å·¥ä½œç›®å½•
ps -aux | grep kubelet | grep root-dir

PSï¼šå¦‚æœkubeletå¯åŠ¨å¤±è´¥ï¼Œå¯ä»¥é€šè¿‡æŸ¥çœ‹kubeletè¯¦ç»†æ—¥å¿—è¿›è¡Œæ’æŸ¥ã€‚
journalctl -xu kubelet -r

6ã€æ¸…ç†æ—§å·¥ä½œç›®å½•ï¼ˆå¯é€‰ï¼‰
rm /var/lib/kubelet/pods.old -rfrm /var/lib/kubelet/pod-resources.old -rf

è½¯é“¾æ³•1ã€åœæ­¢kubelet
systemctl stop kubelet

2ã€æ‹·è´kubeletæ•°æ®æ–‡ä»¶åˆ°æ–°è·¯å¾„
mkdir -p /data/kubeletcp -rf /var/lib/kubelet/. /data/kubeletmv /var/lib/kubelet /var/lib/kubelet.old

3ã€åˆ›å»ºè½¯é“¾
ln -s /data/kubelet /var/lib/kubelet

4ã€å¯åŠ¨kubelet
systemctl daemon-reload &amp;&amp; systemctl restart kubeletsystemctl status kubelet

5ã€ç¡®è®¤å·¥ä½œç›®å½•
ps -aux | grep kubelet | grep root-dir

6ã€æ¸…ç†æ—§å·¥ä½œç›®å½•ï¼ˆå¯é€‰ï¼‰
rm /var/lib/kubelet.old -rf

kubeadmæŒ‡å®škubeletå·¥ä½œç›®å½•ä¸å…¶ä¸´æ¸´æ˜äº•ï¼Œä¸å¦‚æœªé›¨ç»¸ç¼ªã€‚èƒ½å¦åœ¨ä½¿ç”¨kubeadméƒ¨ç½²k8sé›†ç¾¤çš„æ—¶å€™ï¼Œç›´æ¥æŒ‡å®šå¥½kubeletçš„å·¥ä½œç›®å½•ï¼Ÿå¿…é¡»æ˜¯å¯ä»¥çš„ã€‚
åœ¨æ‰§è¡Œkubeadm initä¹‹å‰ï¼Œä¿®æ”¹kubeadm.confæ–‡ä»¶ï¼Œæ·»åŠ kubeletExtraArgså­—æ®µã€‚
apiVersion: kubeadm.k8s.io/v1beta3kind: InitConfigurationnodeRegistration:    kubeletExtraArgs:        root-dir: &quot;/data/kubelet&quot;

å‚è€ƒæ–‡æ¡£ï¼š

kubeadm Configuration - NodeRegistrationOptions

kubeadméƒ¨ç½²kubeletåŸç†æœ¬èŠ‚å±äºæ‰©å±•é˜…è¯»ã€‚åœ¨ä¿®æ”¹kubeletå·¥ä½œç›®å½•æ—¶ï¼Œèµ°äº†å¾ˆå¤šå¼¯è·¯ã€‚å…¶å®å¦‚æœç†Ÿæ‚‰kubeadméƒ¨ç½²kubeletçš„åŸç†ï¼Œä¼šå‘ç°ä¿®æ”¹kubeletå·¥ä½œç›®å½•æ˜¯å¾ˆç®€å•çš„ã€‚å¥½å¥½è¯»æ–‡æ¡£ï¼å¥½å¥½è¯»æ–‡æ¡£ï¼å¥½å¥½è¯»æ–‡æ¡£ï¼
å‚è€ƒæ–‡æ¡£ï¼š

ä½¿ç”¨ kubeadm é…ç½®é›†ç¾¤ä¸­çš„æ¯ä¸ª kubelet
kubeletæºç åˆ†æâ€”â€”kubeletç®€ä»‹ä¸å¯åŠ¨

kubeadm init æ—¶çš„å·¥ä½œæµç¨‹å½“è°ƒç”¨ kubeadm init æ—¶ï¼Œkubelet çš„é…ç½®ä¼šè¢«å†™å…¥ç£ç›˜ /var/lib/kubelet/config.yamlï¼Œ å¹¶ä¸Šä¼ åˆ°é›†ç¾¤ kube-system å‘½åç©ºé—´çš„ kubelet-config ConfigMapã€‚ kubelet é…ç½®ä¿¡æ¯ä¹Ÿè¢«å†™å…¥ /etc/kubernetes/kubelet.confï¼Œå…¶ä¸­åŒ…å«é›†ç¾¤å†…æ‰€æœ‰ kubelet çš„åŸºçº¿é…ç½®ã€‚ æ­¤é…ç½®æ–‡ä»¶æŒ‡å‘å…è®¸ kubelet ä¸ API æœåŠ¡å™¨é€šä¿¡çš„å®¢æˆ·ç«¯è¯ä¹¦ã€‚ è¿™è§£å†³äº†å°†é›†ç¾¤çº§é…ç½®ä¼ æ’­åˆ°æ¯ä¸ª kubelet çš„éœ€æ±‚ã€‚
é’ˆå¯¹ä¸ºç‰¹å®šå®ä¾‹æä¾›é…ç½®ç»†èŠ‚ï¼Œ kubeadm çš„è§£å†³æ–¹æ³•æ˜¯å°†ç¯å¢ƒæ–‡ä»¶å†™å…¥ /var/lib/kubelet/kubeadm-flags.envï¼Œå…¶ä¸­åŒ…å«äº†ä¸€ä¸ªæ ‡å¿—åˆ—è¡¨KUBELET_KUBEADM_ARGS
å°†è¿™ä¸¤ä¸ªæ–‡ä»¶ç¼–ç»„åˆ°ç£ç›˜åï¼Œå¦‚æœä½¿ç”¨ systemdï¼Œåˆ™ kubeadm å°è¯•è¿è¡Œä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤ï¼š
systemctl daemon-reload &amp;&amp; systemctl restart kubelet

kubeadm join æ—¶çš„å·¥ä½œæµç¨‹å½“è¿è¡Œ kubeadm join æ—¶ï¼Œkubeadm ä½¿ç”¨ Bootstrap Token è¯ä¹¦æ‰§è¡Œ TLS å¼•å¯¼ï¼Œè¯¥å¼•å¯¼ä¼šè·å–ä¸€ä»½è¯ä¹¦ï¼Œ è¯¥è¯ä¹¦éœ€è¦ä¸‹è½½ kubelet-config ConfigMap å¹¶æŠŠå®ƒå†™å…¥ /var/lib/kubelet/config.yaml ä¸­ã€‚ åŠ¨æ€ç¯å¢ƒæ–‡ä»¶çš„ç”Ÿæˆæ–¹å¼æ°å¥½ä¸ kubeadm init å®Œå…¨ç›¸åŒã€‚
æ¥ä¸‹æ¥ï¼Œkubeadm è¿è¡Œä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤å°†æ–°é…ç½®åŠ è½½åˆ° kubelet ä¸­ï¼š
systemctl daemon-reload &amp;&amp; systemctl restart kubelet

åœ¨ kubelet åŠ è½½æ–°é…ç½®åï¼Œkubeadm å°†å†™å…¥ /etc/kubernetes/bootstrap-kubelet.conf KubeConfig æ–‡ä»¶ä¸­ï¼Œ è¯¥æ–‡ä»¶åŒ…å« CA è¯ä¹¦å’Œå¼•å¯¼ç¨‹åºä»¤ç‰Œã€‚ kubelet ä½¿ç”¨è¿™äº›è¯ä¹¦æ‰§è¡Œ TLS å¼•å¯¼ç¨‹åºå¹¶è·å–å”¯ä¸€çš„å‡­æ®ï¼Œè¯¥å‡­æ®è¢«å­˜å‚¨åœ¨ /etc/kubernetes/kubelet.conf ä¸­ã€‚
å½“ /etc/kubernetes/kubelet.conf æ–‡ä»¶è¢«å†™å…¥åï¼Œkubelet å°±å®Œæˆäº† TLS å¼•å¯¼è¿‡ç¨‹ã€‚ Kubeadm åœ¨å®Œæˆ TLS å¼•å¯¼è¿‡ç¨‹åå°†åˆ é™¤ /etc/kubernetes/bootstrap-kubelet.conf æ–‡ä»¶ã€‚
kubelet çš„ systemd drop-in æ–‡ä»¶é€šè¿‡ kubeadm DEB åŒ… æˆ–è€… RPM åŒ… å®‰è£…çš„é…ç½®æ–‡ä»¶è¢«å†™å…¥ /etc/systemd/system/kubelet.service.d/10-kubeadm.conf å¹¶ç”± systemd ä½¿ç”¨ã€‚å®ƒå¯¹åŸæ¥çš„ RPM ç‰ˆæœ¬ kubelet.service æˆ–è€… DEB ç‰ˆæœ¬ kubelet.service åšäº†å¢å¼ºã€‚
10-kubeadm.conf ç¤ºä¾‹å†…å®¹å¦‚ä¸‹ï¼š
[Service]Environment=&quot;KUBELET_KUBECONFIG_ARGS=--bootstrap-kubeconfig=/etc/kubernetes/bootstrap-kubelet.conf --kubeconfig=/etc/kubernetes/kubelet.conf&quot;Environment=&quot;KUBELET_CONFIG_ARGS=--config=/var/lib/kubelet/config.yaml&quot;# è¿™æ˜¯ &quot;kubeadm init&quot; å’Œ &quot;kubeadm join&quot; è¿è¡Œæ—¶ç”Ÿæˆçš„æ–‡ä»¶ï¼Œ# åŠ¨æ€åœ°å¡«å…… KUBELET_KUBEADM_ARGS å˜é‡EnvironmentFile=-/var/lib/kubelet/kubeadm-flags.env# è¿™æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨æˆ·åœ¨ä¸å¾—å·²ä¸‹å¯ä»¥å°†å…¶ç”¨ä½œæ›¿ä»£ kubelet argsã€‚# ç”¨æˆ·æœ€å¥½ä½¿ç”¨ .NodeRegistration.KubeletExtraArgs å¯¹è±¡åœ¨é…ç½®æ–‡ä»¶ä¸­æ›¿ä»£ã€‚# KUBELET_EXTRA_ARGS åº”è¯¥ä»æ­¤æ–‡ä»¶ä¸­è·å–ã€‚EnvironmentFile=-/etc/default/kubeletExecStart=ExecStart=/usr/bin/kubelet $KUBELET_KUBECONFIG_ARGS $KUBELET_CONFIG_ARGS $KUBELET_KUBEADM_ARGS $KUBELET_EXTRA_ARGS

å‚æ•°è¯´æ˜ï¼š

ç”¨äº TLS å¼•å¯¼ç¨‹åºçš„ KubeConfig æ–‡ä»¶ä¸º /etc/kubernetes/bootstrap-kubelet.confï¼Œ ä½†ä»…å½“ /etc/kubernetes/kubelet.conf ä¸å­˜åœ¨æ—¶æ‰èƒ½ä½¿ç”¨ã€‚
å…·æœ‰å”¯ä¸€ kubelet æ ‡è¯†çš„ KubeConfig æ–‡ä»¶ä¸º /etc/kubernetes/kubelet.confã€‚
åŒ…å« kubelet çš„ç»„ä»¶é…ç½®çš„æ–‡ä»¶ä¸º /var/lib/kubelet/config.yamlã€‚
KUBELET_KUBEADM_ARGS æ¥æºäº /var/lib/kubelet/kubeadm-flags.env ï¼Œ
KUBELET_EXTRA_ARGS æ¥æºäº /etc/default/kubeletï¼ˆå¯¹äº DEBï¼‰ï¼Œæˆ–è€… /etc/sysconfig/kubeletï¼ˆå¯¹äº RPMï¼‰ã€‚KUBELET_EXTRA_ARGS åœ¨æ ‡å¿—é“¾ä¸­æ’åœ¨æœ€åï¼Œå¹¶ä¸”åœ¨è®¾ç½®å†²çªæ—¶å…·æœ‰æœ€é«˜ä¼˜å…ˆçº§ã€‚

æŒ‡å®škubeletå·¥ä½œç›®å½•é€šè¿‡ä¸Šé¢çš„åŸç†æˆ‘ä»¬äº†è§£åˆ°ï¼Œå¯¹äºkubeletï¼Œå¯ä»¥åœ¨KUBELET_KUBEADM_ARGSæˆ–è€…KUBELET_EXTRA_ARGSæ ‡å¿—åˆ—è¡¨ä¸­æ·»åŠ root-diræ ‡å¿—ï¼ŒæŒ‡å®škubeletçš„å·¥ä½œç›®å½•ã€‚
æ–¹æ³•ä¸€ï¼š/var/lib/kubelet/kubeadm-flags.env ä¸­æ·»åŠ æ ‡å¿—
KUBELET_KUBEADM_ARGS=&quot;--root-dir=/data/kubelet&quot;

æ–¹æ³•äºŒï¼š/etc/sysconfig/kubelet ä¸­æ·»åŠ æ ‡å¿—
KUBELET_EXTRA_ARGS=&quot;--root-dir=/data/kubelet&quot;

æ·»åŠ æ ‡å¿—åï¼Œé‡å¯kubeletå³å¯ã€‚
ä¹Ÿå¯ä»¥åœ¨éƒ¨ç½²k8sé›†ç¾¤æ—¶ä¸€æ­¥åˆ°ä½æŒ‡å®škubeletå·¥ä½œç›®å½•ï¼Œå…·ä½“æ“ä½œæ–¹æ³•å‚è€ƒã€kubeadmæŒ‡å®škubeletå·¥ä½œç›®å½•ã€‘ä¸€èŠ‚ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>cloudnative</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockerä¿®æ”¹å·¥ä½œç›®å½•</title>
    <url>/dev-docker-data-root-dir/</url>
    <content><![CDATA[éœ€æ±‚æè¿°dockerçš„é»˜è®¤å·¥ä½œç›®å½•ï¼ˆå­˜å‚¨ç›®å½•ï¼‰æ˜¯/var/lib/dockerï¼Œä¼šå­˜æ”¾é•œåƒæ–‡ä»¶ã€å®¹å™¨æ—¥å¿—å’Œå†™å…¥åˆ°å®¹å™¨ä¸´æ—¶ç›®å½•çš„æ–‡ä»¶ç­‰ï¼Œé»˜è®¤æŒ‚è½½åœ¨ç³»ç»Ÿç›˜ã€‚
è€Œç³»ç»Ÿç›˜ä¸€èˆ¬éƒ½ä¸ä¼šå¤ªå¤§ï¼Œå› æ­¤æœ€å¥½æŠŠdockerå·¥ä½œç›®å½•æ›´æ”¹åˆ°æ•°æ®ç›˜ã€‚
æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¼šæŠŠdockerçš„å·¥ä½œç›®å½•ä»/var/lib/dockeræ”¹åˆ°/data/dockerï¼Œå…¶ä¸­/dataç›®å½•æŒ‚è½½äº†æ•°æ®ç›˜ã€‚


æ€è·¯æƒ³åˆ°ä¸¤ä¸ªæ–¹æ³•ï¼š

ä¿®æ”¹é…ç½®æ³•ï¼šæ‹·è´æ•°æ®åˆ°æ–°ç›®å½•ï¼Œä¿®æ”¹å·¥ä½œç›®å½•é…ç½®åˆ°æ–°ç›®å½•ã€‚
è½¯é“¾æ³•ï¼šæ‹·è´æ•°æ®åˆ°æ–°ç›®å½•ï¼Œä½¿ç”¨æ–°ç›®å½•çš„è½¯é“¾æ›¿æ¢åŸæ¥çš„å·¥ä½œç›®å½•ã€‚ä¸æ¨èï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰ä»€ä¹ˆéšè—å‘ã€‚

ä¿®æ”¹é…ç½®æ³•å‚è€ƒæ–‡æ¡£How to change docker root data directory
0ã€å…³é—­kubeletï¼ˆå¯é€‰æ“ä½œï¼Œåªé’ˆå¯¹k8sèŠ‚ç‚¹ï¼‰
systemctl stop kubelet

1ã€å…³é—­docker
systemctl stop docker
Warning: Stopping docker.service, but it can still be activated by: docker.socketè¯¥è­¦å‘Šæ„å‘³ç€ï¼šå¦‚æœä½ è¯•å›¾è¿æ¥åˆ°docker socketï¼Œè€ŒdockeræœåŠ¡æ²¡æœ‰è¿è¡Œï¼Œç³»ç»Ÿå°†è‡ªåŠ¨å¯åŠ¨dockerã€‚è¿™æ˜¯å› ä¸ºé™¤äº†docker.serviceå•å…ƒæ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€ä¸ªdocker.socketå•å…ƒæ–‡ä»¶ï¼Œç”¨äºå¥—æ¥å­—æ¿€æ´»ã€‚
è¿™é‡Œå¯ä»¥ä½¿ç”¨å¦å¤–ä¸€ä¸ªå‘½ä»¤å…³é—­dockerï¼Œç¦æ­¢å¥—æ¥å­—æ¿€æ´»ã€‚
systemctl stop docker.socket

2ã€æ›´æ”¹dockeræ•°æ®å­˜å‚¨è·¯å¾„
vim /etc/docker/daemon.json

æ·»åŠ ï¼š
&#123;    &quot;data-root&quot;: &quot;/data/docker&quot;&#125;

3ã€æ‹·è´dockeræ•°æ®æ–‡ä»¶åˆ°æ–°è·¯å¾„
mkdir -p /data/dockercp -rf /var/lib/docker/. /data/dockermv /var/lib/docker /var/lib/docker.old

4ã€é‡å¯docker&amp;ç¡®è®¤å·¥ä½œç›®å½•
systemctl start dockerdocker info | grep Dir

5ã€é‡å¯kubeletï¼ˆå¯é€‰æ“ä½œï¼Œåªé’ˆå¯¹k8sèŠ‚ç‚¹ï¼‰
systemctl start kubelet

è½¯é“¾æ³•0ã€å…³é—­kubeletï¼ˆå¯é€‰æ“ä½œï¼Œåªé’ˆå¯¹k8sèŠ‚ç‚¹ï¼‰
systemctl stop kubelet

1ã€å…³é—­docker
systemctl stop dockersystemctl stop docker.socket

2ã€æ‹·è´dockeræ•°æ®æ–‡ä»¶åˆ°æ–°è·¯å¾„
mkdir -p /data/dockercp -rf /var/lib/docker/. /data/dockermv /var/lib/docker /var/lib/docker.old

3ã€åˆ›å»ºè½¯é“¾
ln -s /data/docker /var/lib/docker

4ã€é‡å¯docker&amp;ç¡®è®¤å·¥ä½œç›®å½•
systemctl start dockerdocker info | grep Dir

5ã€é‡å¯kubeletï¼ˆå¯é€‰æ“ä½œï¼Œåªé’ˆå¯¹k8sèŠ‚ç‚¹ï¼‰
systemctl start kubelet




]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>cloudnative</tag>
      </tags>
  </entry>
  <entry>
    <title>kubeadmå®‰è£…çš„K8Sé›†ç¾¤è¯ä¹¦è¿‡æœŸé—®é¢˜</title>
    <url>/dev-kubeadm-k8s-cert-expired/</url>
    <content><![CDATA[é—®é¢˜æè¿°ä½¿ç”¨kubectlè®¿é—®k8sé›†ç¾¤ï¼ŒæŠ¥é”™è¯ä¹¦è¿‡æœŸï¼šUnable to connect to the server: x509: certificate has expired or is not yet valid: current time 2022-09-26T01:33:25-04:00 is after 2022-09-26T03:45:02Z


è§£å†³æ€è·¯1ã€ç¡®è®¤è¯ä¹¦è¿‡æœŸ2ã€æ›´æ–°è¯ä¹¦3ã€æ›´æ–°ç›¸å…³é…ç½®
å‚è€ƒæ–‡æ¡£ï¼š

è§£å†³kubernetesè¯ä¹¦è¿‡æœŸé—®é¢˜
Kubeadmé›†ç¾¤è¯ä¹¦è¿‡æœŸåçš„å¤„ç†

å…·ä½“æ“ä½œç¡®è®¤è¯ä¹¦è¿‡æœŸ1ã€ç™»å½•è¯ä¹¦è¿‡æœŸé›†ç¾¤çš„ä»»æ„masterèŠ‚ç‚¹
2ã€æŸ¥çœ‹è¯ä¹¦è¿‡æœŸæ—¶é—´
kubeadm certs check-expiration

çœ‹åˆ° RESIDUAL TIME ä¸º &lt;invalid&gt;ï¼Œè¡¨æ˜è¯ä¹¦å·²ç»è¿‡æœŸã€‚
æ›´æ–°è¯ä¹¦æ³¨æ„ï¼šæ›´æ–°è¯ä¹¦æ—¶ï¼Œæ‰€æœ‰masterèŠ‚ç‚¹éƒ½éœ€è¦æ“ä½œ
1ã€å¤‡ä»½k8sé…ç½®
cp -r /etc/kubernetes&#123;,.old&#125;#cp -r /var/lib/etcd&#123;,.old&#125;

2ã€æ›´æ–°è¯ä¹¦
kubeadm certs renew all

æ›´æ–°æˆåŠŸåï¼Œä¼šæç¤ºé‡å¯ä¸€äº›podï¼š

Done renewing certificates. You must restart the kube-apiserver, kube-controller-manager, kube-scheduler and etcd, so that they can use the new certificates.

3ã€é‡å¯kubeletå’Œå®¹å™¨
systemctl restart kubeletdocker ps | grep -v pause | grep -E &quot;etcd|scheduler|controller|apiserver&quot; | awk &#x27;&#123;print $1&#125;&#x27; | awk &#x27;&#123;print &quot;docker&quot;,&quot;restart&quot;,$1&#125;&#x27; | bash

4ã€éªŒè¯
cd /etc/kubernetes/pkillkubeadm certs check-expiration

æ›´æ–°kubectlé…ç½®1ã€æ›´æ–°kubeconfigé…ç½®
cp /etc/kubernetes/admin.conf .kube/config

2ã€æµ‹è¯•
kubectl get nodes

æ›´æ–°kubesphereé…ç½®ä»¥ä¸Šï¼Œk8sé›†ç¾¤çš„è¯ä¹¦è¿‡æœŸé—®é¢˜å·²ç»è§£å†³ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨é€šè¿‡kubesphereçš„ç®¡ç†é¡µé¢è®¿é—®k8sé›†ç¾¤æ—¶ï¼Œä¼šæŠ¥é”™ï¼š

ä¼šè¯è¶…æ—¶æˆ–æ­¤å¸æˆ·åœ¨å…¶å®ƒåœ°æ–¹ç™»å½•ï¼Œè¯·é‡æ–°ç™»å½•

kså®˜æ–¹ç»™çš„è§£å†³æ–¹æ¡ˆæ˜¯åœ¨é¡µé¢ä¸Šæ›´æ–° kubeconfigï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ¡ˆåªé€‚ç”¨äºv3.3ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼ˆé¡µé¢ä¸Šä¼šæç¤ºkubeconfigå·²è¿‡æœŸï¼‰ï¼Œè¯¦æƒ…å‚è€ƒæ›´æ–° Kubeconfig
å¦‚æœæ˜¯v3.2æˆ–è€…æ›´ä½ç‰ˆæœ¬ï¼Œå¯ä»¥é€šè¿‡kubectlä¿®æ”¹CRD clusters.cluster.kubesphere.ioï¼Œè¯¦æƒ…å‚è€ƒmemberèŠ‚ç‚¹è¯ä¹¦åˆ°æœŸï¼Œç»­çº¦è¯ä¹¦åï¼Œkubesphereå¦‚ä½•æ›´æ–°kubeconfigï¼Ÿ
ä¸ºæ–¹ä¾¿æè¿°ï¼Œå‡è®¾è¯ä¹¦è¿‡æœŸçš„k8sé›†ç¾¤åç§°ä¸º devã€‚è¯ä¹¦æ›´æ–°åï¼Œåœ¨kubesphereä¸»é›†ç¾¤æ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼š
1ã€æŸ¥çœ‹æ‰€æœ‰é›†ç¾¤é…ç½®
kubectl get clusters.cluster.kubesphere.io -n kubesphere-system

2ã€å¤‡ä»½devé›†ç¾¤é…ç½®
kubectl get clusters.cluster.kubesphere.io/dev -n kubesphere-system -o yaml &gt; dev.yaml

3ã€base64åŠ å¯†æ–°çš„devé›†ç¾¤çš„kubeconfig
cat .kube/config | base64 | tr -d &#x27;\n&#x27;

4ã€æ›´æ–°devé›†ç¾¤é…ç½®
kubectl edit clusters.cluster.kubesphere.io/dev -n kubesphere-system

spec:  connection:    kubeconfig: xxx

æŠŠ kubeconfig çš„valueæ›¿æ¢ä¸ºbase64åŠ å¯†åçš„kubeconfigå†…å®¹ã€‚
5ã€éªŒè¯é€šè¿‡ksçš„ç®¡ç†é¡µé¢å†æ¬¡è®¿é—®k8sé›†ç¾¤ï¼Œå·²ç»å¯ä»¥æ­£å¸¸è®¿é—®ã€‚
æ›´æ–°argocdé…ç½®æŸ¥çœ‹argocdå’Œk8s devé›†ç¾¤çš„è¿æ¥ï¼Œå‘ç°CONNECTION STATUSå·²ç»å¤±è”ã€‚
å‚è€ƒArgocd cluster addï¼Œé€šè¿‡--upsertå‚æ•°æ›´æ–°é›†ç¾¤é…ç½®ã€‚æ³¨æ„ï¼šæ›´æ–°é›†ç¾¤é…ç½®æ—¶ï¼Œé›†ç¾¤çš„åç§°ä¸€å®šè¦å’Œç°æœ‰åç§°ä¿æŒä¸€è‡´ã€‚
å‡è®¾ï¼š

argocdæ‰€åœ¨k8sé›†ç¾¤ä¸ºmanager
managerçš„masterèŠ‚ç‚¹ä¸ŠåŒ…å«devé›†ç¾¤çš„æ–°çš„kubeconfigï¼Œè·¯å¾„ä¸º~/.kube/newconfig
devé›†ç¾¤åœ¨argocdä¸­çš„åç§°ä¸ºdev(å¼€å‘)
argo-cd-argocd-server pod ipä¸º 10.x.x.x

é‚£ä¹ˆï¼Œåœ¨manageré›†ç¾¤çš„masterèŠ‚ç‚¹ä¸Šæ‰§è¡Œå¦‚ä¸‹æ“ä½œã€‚
kubectl get pod -n argocd -owideargocd login 10.x.x.x:8080 --grpc-webargocd cluster listargocd cluster add kubernetes-admin@kubernetes --kubeconfig ~/.kube/newconfig --name &quot;dev(å¼€å‘)&quot; --upsert 

å¦‚æœmasterèŠ‚ç‚¹æ²¡æœ‰argocd clientï¼Œå¯ä»¥ç™»å½•åˆ°argo-cd-argocd-server podä¸­è¿›è¡Œæ“ä½œã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>k8s</category>
        <category>cloudnative</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>cicd</tag>
        <tag>kubesphere</tag>
        <tag>kubeadm</tag>
      </tags>
  </entry>
  <entry>
    <title>K8Sä¸­å®‰è£…é…ç½®Spark</title>
    <url>/dev-k8s-spark/</url>
    <content><![CDATA[spark-on-k8s-operatorç®€ä»‹
spark-on-k8s-operator: Kubernetes operator for managing the lifecycle of Apache Spark applications on Kubernetes.The Kubernetes Operator for Apache Spark aims to make specifying and running Spark applications as easy and idiomatic as running other workloads on Kubernetes. It uses Kubernetes custom resources for specifying, running, and surfacing status of Spark applications. 

spark-on-k8s-operatorå·¥ä½œæµç¨‹ï¼š1ã€æäº¤sparkApplicationçš„è¯·æ±‚åˆ°api-server2ã€æŠŠsparkApplicationçš„CRDæŒä¹…åŒ–åˆ°etcd3ã€operatorè®¢é˜…å‘ç°æœ‰sparkApplicationï¼Œè·å–åé€šè¿‡submission   4ã€runneræäº¤spark-submitè¿‡ç¨‹ï¼Œè¯·æ±‚ç»™åˆ°api-serveråç”Ÿæˆå¯¹åº”çš„driver/executor pod5ã€spark pod monitorä¼šç›‘æ§åˆ°applicationæ‰§è¡Œçš„çŠ¶æ€ï¼ˆæ‰€ä»¥é€šè¿‡sparkctlå¯ä»¥é€šè¿‡listã€statusçœ‹åˆ°ï¼‰mutating adminission webhookå»ºsvcï¼Œå¯ä»¥æŸ¥çœ‹spark web ui
ç®€è€Œè¨€ä¹‹ï¼Œspark-on-k8s-operatoræ”¹å˜äº†ä¼ ç»Ÿçš„sparkä»»åŠ¡è¿è¡Œæ–¹å¼ï¼Œèƒ½å¤Ÿæé«˜èµ„æºåˆ©ç”¨ç‡å’ŒèŠ‚çœèµ„æºã€‚ç”¨æˆ·æäº¤CRDä¹‹åï¼Œk8sæ‰ä¼šåˆ›å»ºè¿è¡Œsparkä»»åŠ¡éœ€è¦çš„podï¼Œä»è€Œèƒ½å¤Ÿåˆ©ç”¨æ•´ä¸ªk8sé›†ç¾¤çš„èµ„æºã€‚ä»»åŠ¡è·‘å®Œä¹‹åï¼Œpodä¼šè¢«å›æ”¶ï¼Œä»è€ŒèŠ‚çœèµ„æºã€‚
å‚è€ƒæ–‡æ¡£ï¼š

spark-on-k8s-operator
spark operatoréƒ¨ç½²å®‰è£…
spark-on-kubernetes-operatorç¯å¢ƒæ­å»º
Apache Spark on K8S Best Practice and Performance in the Cloud
è‹¹æœå·¥ç¨‹å¸ˆåˆ†äº«å¦‚ä½•è¿ç»´è¶…å¤§è§„æ¨¡Spark on Kubernetesé›†ç¾¤



å®‰è£…spark-on-k8s-operator1ã€å®‰è£…operator
helm repo add spark-operator https://googlecloudplatform.github.io/spark-on-k8s-operatorhelm install my-release spark-operator/spark-operator --namespace spark-operator --create-namespace

æˆ–è€…
git clone https://github.com/GoogleCloudPlatform/spark-on-k8s-operator.gitcd spark-on-k8s-operator/charts/spark-operator-charthelm install my-release . --namespace spark-operator --create-namespace

2ã€é•œåƒæ‹‰å–æŠ¥é”™å¤„ç†æ‹‰å–é•œåƒ ghcr.io/googlecloudplatform/spark-operator:v1beta2-1.3.7-3.1.1 æ—¶æŠ¥é”™ErrImagePullï¼Œè¿™æ˜¯å› ä¸ºghcr.ioè¢«å¢™äº†ï¼Œéœ€è¦ä¸€äº›æŠ€å·§è¿›è¡Œä¸‹è½½ã€‚æ–¹æ³•ä¸€ï¼šç§‘å­¦ä¸Šç½‘ä¸‹è½½é•œåƒåˆ°æœ¬åœ°ï¼Œç„¶åä¸Šä¼ é•œåƒåˆ°å†…éƒ¨é•œåƒä»“åº“ï¼Œä¿®æ”¹yamlä½¿ç”¨å†…éƒ¨é•œåƒä»“åº“ã€‚æ–¹æ³•äºŒï¼šåˆ©ç”¨GitHub Actionsä¸‹è½½ghcr.ioçš„é•œåƒï¼Œä¸Šä¼ åˆ°Docker Hubï¼Œè¯¦æƒ…å‚è€ƒtogettoyou/hub-mirror
è¿™é‡Œä½¿ç”¨æ–¹æ³•ä¸€ï¼Œä¿®æ”¹é•œåƒä¸ºå†…éƒ¨é•œåƒï¼š
docker pull ghcr.io/googlecloudplatform/spark-operator:v1beta2-1.3.7-3.1.1docker tag ghcr.io/googlecloudplatform/spark-operator:v1beta2-1.3.7-3.1.1 harbor.voidking.com/ghcr.io/googlecloudplatform/spark-operator:v1beta2-1.3.7-3.1.1docker login harbor.voidking.comdocker push harbor.voidking.com/ghcr.io/googlecloudplatform/spark-operator:v1beta2-1.3.7-3.1.1

3ã€æ›¿æ¢é•œåƒ
kubectl edit deployment.apps/my-release-spark-operator -n spark-operator
ä¿®æ”¹é•œåƒä¸ºå†…éƒ¨é•œåƒåœ°å€ã€‚
ä½¿ç”¨spark-on-k8s-operator1ã€ä¸‹è½½spark-on-k8s-operator/examples/spark-pi.yaml
2ã€ä¿®æ”¹é•œåƒä¸ºå†…éƒ¨é•œåƒ
docker pull gcr.io/spark-operator/spark:v3.1.1docker tag gcr.io/spark-operator/spark:v3.1.1 harbor.voidking.com/gcr.io/spark-operator/spark:v3.1.1docker push harbor.voidking.com/gcr.io/spark-operator/spark:v3.1.1

3ã€æ›¿æ¢é•œåƒä¿®æ”¹spark-pi.yamlä¸­çš„é•œåƒä¸ºå†…éƒ¨é•œåƒåœ°å€
4ã€ç”Ÿæ•ˆyamlæ–‡ä»¶
kubectl apply -f spark-pi.yaml

5ã€æŸ¥çœ‹sparkåº”ç”¨
kubectl get sparkapplications spark-pi -o=yaml -n defaultkubectl describe sparkapplication spark-pi -n default
æŠ¥é”™ï¼šerror looking up service account default/spark: serviceaccount â€œsparkâ€ not found.
å®˜æ–¹æ–‡æ¡£ä¸­ä¹Ÿç»™äº†è¯´æ˜ï¼Œsparkè¿™ä¸ªserviceaccountéœ€è¦æ›¿æ¢æˆæœ‰æƒé™çš„serviceaccountï¼Œè¯¥serviceaccountæœ‰æƒåˆ›å»ºã€è·å–ã€åˆ—å‡ºå’Œåˆ é™¤æ‰§è¡Œç¨‹åº podï¼Œå¹¶ä¸ºé©±åŠ¨ç¨‹åºåˆ›å»º Kubernetes æ— å¤´æœåŠ¡ã€‚
æ³¨æ„ï¼šä¸èƒ½ç›´æ¥æ›¿æ¢æˆdefaultï¼Œå¦åˆ™spark-pi-driveræ‰§è¡Œæ—¶ä¼šæŠ¥é”™æƒé™ä¸å¤Ÿã€‚å¯ä»¥é€‰æ‹©ç»™defaultæˆæƒï¼Œæˆ–è€…è‡ªå·±åˆ›å»ºä¸€ä¸ªæ–°çš„saï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©åè€…ã€‚
6ã€åˆ›å»ºsaå‚è€ƒspark-application-rbac.yamlï¼Œä¿®æ”¹ä¸ºï¼š
apiVersion: v1kind: ServiceAccountmetadata:  name: spark  namespace: default---apiVersion: rbac.authorization.k8s.io/v1kind: Rolemetadata:  namespace: default  name: spark-rolerules:- apiGroups: [&quot;&quot;]  resources: [&quot;pods&quot;]  verbs: [&quot;*&quot;]- apiGroups: [&quot;&quot;]  resources: [&quot;services&quot;]  verbs: [&quot;*&quot;]- apiGroups: [&quot;&quot;]  resources: [&quot;configmaps&quot;]  verbs: [&quot;*&quot;]---apiVersion: rbac.authorization.k8s.io/v1kind: RoleBindingmetadata:  name: spark-role-binding  namespace: defaultsubjects:- kind: ServiceAccount  name: spark  namespace: defaultroleRef:  kind: Role  name: spark-role  apiGroup: rbac.authorization.k8s.io

æ³¨æ„ï¼š configmaps çš„ç®¡ç†æƒé™ä¹Ÿæ˜¯å¿…è¦çš„ã€‚
æ‰§è¡Œåˆ›å»ºsa
kubectl apply -f spark-application-rbac.yaml

å¦‚æœåˆ›å»ºçš„ä¸æ˜¯åä¸ºsparkçš„saï¼Œé‚£ä¹ˆè¿˜éœ€è¦ä¿®æ”¹spark-piçš„spec yaml
kubectl edit sparkapplication spark-pi -n default

7ã€æŸ¥çœ‹sparkèµ„æºæƒ…å†µ
kubectl get all -n default | grep spark
ä»¥ä¸Šï¼Œç¬¦åˆé¢„æœŸã€‚å¦‚æœå‡ºç°Errorï¼Œé‚£ä¹ˆé€šè¿‡æ—¥å¿—è¿›è¡Œæ’æŸ¥ã€‚
8ã€æŸ¥çœ‹æ‰§è¡Œç»“æœï¼ˆæŸ¥çœ‹æ—¥å¿—ï¼‰
kubectl logs pod/spark-pi-driver -n default
æ—¥å¿—ä¸­ä¼šè¾“å‡ºï¼šPi is roughly 3.145515727578638
sparkapplication yamlç¼–å†™å‚è€ƒæ–‡æ¡£ï¼š

spark-on-k8s-operator/examples
User Guide

è°ƒç”¨hivehiveåŸºæœ¬æ“ä½œ1ã€ç™»å½•hiveserverkubectl execè¿›å…¥åˆ°hive podä¸­ï¼Œæ‰§è¡Œç™»å½•å‘½ä»¤
hive # orbeeline -u jdbc:hive2://localhost:10000 username password

2ã€æŸ¥çœ‹hive_client_testè¡¨å†…å®¹
show databases;use default;show tables;select * from hive_client_test;

sparkè°ƒç”¨hivesparkè°ƒç”¨hiveæ—¶ï¼Œå…³äºhiveçš„é…ç½®ï¼Œæœ‰ä¸¤ç§é…ç½®æ–¹å¼ï¼šä¸€ç§æ˜¯å†™åœ¨ä»£ç ä¸­ï¼Œä¸€ç§æ˜¯é…ç½®åœ¨ç¯å¢ƒå˜é‡ä¸­ã€‚å†™åœ¨ä»£ç ä¸­çš„demoï¼š
spark = SparkSession.builder \        .config(&quot;hive.metastore.uris&quot;,&quot;thrift://hive-metastore.bigdata.svc:9083&quot;) \        .appName(&quot;test&quot;) \        .enableHiveSupport() \        .getOrCreate()read_df = spark.sql(&quot;select * from default.hive_client_test limit 1&quot;)read_df.show()

å¦‚æœä¸ä½¿ç”¨configï¼Œé‚£ä¹ˆé»˜è®¤è¯»å–ç¯å¢ƒå˜é‡ä¸­çš„é…ç½®ï¼š
spark = SparkSession.builder\        .master(&quot;local[*]&quot;) \        .appName(&quot;test&quot;) \        .enableHiveSupport() \        .getOrCreate()read_df=spark.sql(&quot;select * from default.hive_client_test limit 1&quot;)read_df.show()

hive.metastore.uriså¯¹åº”çš„ç¯å¢ƒå˜é‡æ˜¯å•¥ï¼Ÿ
sparkapplicationå®šä¹‰å‚è€ƒæ–‡æ¡£ï¼š

spark examples - hive.py
spark-on-k8s-operator/examples/spark-py-pi.yaml

è¿™é‡Œæ¯”è¾ƒå‹å¥½çš„æ˜¯ï¼Œgcr.io/spark-operator/spark-py:v3.1.1é•œåƒä¸­åŒ…å«æ‰€æœ‰çš„spark examplesï¼Œå¯ä»¥æ¯”è¾ƒæ–¹ä¾¿åœ°è¿›è¡Œæµ‹è¯•ã€‚
å·²çŸ¥k8sé›†ç¾¤ä¸­å­˜åœ¨hiveï¼Œhive-metastoreçš„svcä¸ºhive-metastore.bigdata.svcã€‚
1ã€ä¿®æ”¹hive.pyï¼Œå†…å®¹ä¸ºï¼š
&quot;&quot;&quot;A simple example demonstrating Spark SQL Hive integration.Run with:  ./bin/spark-submit examples/src/main/python/sql/hive.py&quot;&quot;&quot;# $example on:spark_hive$from os.path import abspathfrom pyspark.sql import SparkSessionfrom pyspark.sql import Row# $example off:spark_hive$if __name__ == &quot;__main__&quot;:    # $example on:spark_hive$    # warehouse_location points to the default location for managed databases and tables    warehouse_location = abspath(&#x27;spark-warehouse&#x27;)    spark = SparkSession \        .builder \        .config(&quot;hive.metastore.uris&quot;,&quot;thrift://hive-metastore.bigdata.svc:9083&quot;) \        .appName(&quot;Python Spark SQL Hive integration example&quot;) \        .config(&quot;spark.sql.warehouse.dir&quot;, warehouse_location) \        .enableHiveSupport() \        .getOrCreate()    # spark is an existing SparkSession    spark.sql(&quot;CREATE TABLE IF NOT EXISTS src (key INT, value STRING) USING hive&quot;)    spark.sql(&quot;LOAD DATA LOCAL INPATH &#x27;/opt/spark/examples/src/main/resources/kv1.txt&#x27; INTO TABLE src&quot;)    # Queries are expressed in HiveQL    spark.sql(&quot;SELECT * FROM src&quot;).show()    # +---+-------+    # |key|  value|    # +---+-------+    # |238|val_238|    # | 86| val_86|    # |311|val_311|    # ...    # Aggregation queries are also supported.    spark.sql(&quot;SELECT COUNT(*) FROM src&quot;).show()    # +--------+    # |count(1)|    # +--------+    # |    500 |    # +--------+    # The results of SQL queries are themselves DataFrames and support all normal functions.    sqlDF = spark.sql(&quot;SELECT key, value FROM src WHERE key &lt; 10 ORDER BY key&quot;)    # The items in DataFrames are of type Row, which allows you to access each column by ordinal.    stringsDS = sqlDF.rdd.map(lambda row: &quot;Key: %d, Value: %s&quot; % (row.key, row.value))    for record in stringsDS.collect():        print(record)    # Key: 0, Value: val_0    # Key: 0, Value: val_0    # Key: 0, Value: val_0    # ...    # You can also use DataFrames to create temporary views within a SparkSession.    Record = Row(&quot;key&quot;, &quot;value&quot;)    recordsDF = spark.createDataFrame([Record(i, &quot;val_&quot; + str(i)) for i in range(1, 101)])    recordsDF.createOrReplaceTempView(&quot;records&quot;)    # Queries can then join DataFrame data with data stored in Hive.    spark.sql(&quot;SELECT * FROM records r JOIN src s ON r.key = s.key&quot;).show()    # +---+------+---+------+    # |key| value|key| value|    # +---+------+---+------+    # |  2| val_2|  2| val_2|    # |  4| val_4|  4| val_4|    # |  5| val_5|  5| val_5|    # ...    # $example off:spark_hive$    spark.stop()

2ã€docker commitæ–°çš„é•œåƒharbor.voidking.com/gcrmirror/spark-operator/spark-py:v3.1.1.0
3ã€åˆ›å»ºspark-hive.yamlï¼Œå†…å®¹ä¸ºï¼š
apiVersion: &quot;sparkoperator.k8s.io/v1beta2&quot;kind: SparkApplicationmetadata:  name: pyspark-hive  namespace: defaultspec:  type: Python  pythonVersion: &quot;3&quot;  mode: cluster  image: &quot;harbor.voidking.com/gcrmirror/spark-operator/spark-py:v3.1.1.0&quot;  imagePullPolicy: Always  mainApplicationFile: local:///opt/spark/examples/src/main/python/sql/hive.py  sparkVersion: &quot;3.1.1&quot;  restartPolicy:    type: OnFailure    onFailureRetries: 3    onFailureRetryInterval: 10    onSubmissionFailureRetries: 5    onSubmissionFailureRetryInterval: 20  driver:    cores: 1    coreLimit: &quot;1200m&quot;    memory: &quot;512m&quot;    labels:      version: 3.1.1.0    serviceAccount: spark  executor:    cores: 1    instances: 1    memory: &quot;512m&quot;    labels:      version: 3.1.1.0

4ã€åˆ›å»ºsparkapplication
kubectl apply -f spark-hive.yaml

5ã€æŸ¥çœ‹ç»“æœ
kubectl get all | grep hivekubectl logs pod/pyspark-hive-driver

]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
        <category>bigdata</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>helm</tag>
        <tag>hive</tag>
        <tag>spark</tag>
        <tag>operator</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxä¸­å®‰è£…é…ç½®Clash</title>
    <url>/dev-linux-clash/</url>
    <content><![CDATA[Clashç®€ä»‹
Clash: A rule-based tunnel in Go.

Clashæ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„ç§‘å­¦ä¸Šç½‘å®¢æˆ·ç«¯ï¼Œé€‚ç”¨äºwindowsã€macosã€linuxã€androidã€‚
æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ åœ¨linuxä¸­å®‰è£…é…ç½®clashã€‚å…¶ä»–ç³»ç»Ÿå¹³å°éƒ½æ˜¯å›¾å½¢åŒ–ç•Œé¢æ“ä½œï¼Œä¸ç”¨é¢å¤–å­¦ä¹ ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Dreamacro/clash
åœ¨ Linux ä¸­ä½¿ç”¨ Clash
wanhebin/clash-for-linux



å®‰è£…Clash1ã€ä¸‹è½½clashè®¿é—®Clash Releasesï¼Œä¸‹è½½linuxå¹³å°çš„è½¯ä»¶åŒ…ï¼Œè¿™é‡Œé€‰æ‹©ä¸‹è½½clash-linux-amd64-v1.14.0.gz
wget https://github.com/Dreamacro/clash/releases/download/v1.14.0/clash-linux-amd64-v1.14.0.gz

2ã€å®‰è£…Clash
gunzip clash-linux-amd64-v1.14.0.gzmv clash-linux-amd64-v1.14.0 clashchmod a+x clashmv clash /usr/local/bin/

3ã€åˆå§‹åŒ–
clash
Clash è¿è¡Œæ—¶éœ€è¦ Country.mmdb æ–‡ä»¶ï¼Œå½“ç¬¬ä¸€æ¬¡å¯åŠ¨ Clash æ—¶ï¼Œä¼šè‡ªåŠ¨ä¸‹è½½ Country.mmdb åˆ° $HOME/.config/clash ç›®å½•ä¸‹ã€‚å¦‚æœä¸‹è½½å¡ä½ï¼Œå»ºè®®æ‰‹åŠ¨ä¸‹è½½Country.mmdbæ”¾åˆ° $HOME/.config/clash ï¼Œç„¶åé‡æ–°æ‰§è¡Œclashã€‚
å½“çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼Œè¡¨æ˜åˆå§‹åŒ–æˆåŠŸã€‚INFO[0204] Mixed(http+socks) proxy listening at: 127.0.0.1:7890
æ³¨ï¼šCountry.mmdb æ–‡ä»¶åˆ©ç”¨ GeoIP2 æœåŠ¡èƒ½è¯†åˆ«äº’è”ç½‘ç”¨æˆ·çš„åœ°ç‚¹ä½ç½®ï¼Œä»¥ä¾›è§„åˆ™åˆ†æµæ—¶ä½¿ç”¨ã€‚
é…ç½®Clashè´­ä¹°æ¢¯å­è´­ä¹°ä¸€ä¸ªåŸºäºSSRï¼ˆShadowsocksRï¼‰çš„æ¢¯å­ï¼Œè·å–åˆ°è®¢é˜…åœ°å€ã€‚
é…ç½®Clash1ã€ä¸‹è½½é…ç½®
curl -o config.yaml &#x27;https://xxx.example.com/yyy&#x27;#curl -L -o config.yaml &#x27;https://xxx.example.com/yyy&#x27;

å…¶ä¸­çš„urlæ˜¯SSRçš„è®¢é˜…åœ°å€ã€‚
2ã€é…ç½®æ–‡ä»¶æ”¾åˆ°æŒ‡å®šä½ç½®
mkdir /etc/clashcp config.yaml /etc/clash/cp $HOME/.config/clash/Country.mmdb /etc/clash/

3ã€é…ç½®systemd
vim /etc/systemd/system/clash.service

å†™å…¥å†…å®¹ï¼š
[Unit]Description=Clash daemon, A rule-based proxy in Go.After=network.target[Service]Type=simpleRestart=alwaysExecStart=/usr/local/bin/clash -d /etc/clash[Install]WantedBy=multi-user.target

å¯åŠ¨Clashsystemctl enable clashsystemctl start clashsystemctl status clashjournalctl -xe


ä½¿ç”¨Clashä»£ç†1ã€é…ç½®ä½¿ç”¨Clashä»£ç†
export https_proxy=http://127.0.0.1:7890 http_proxy=http://127.0.0.1:7890 all_proxy=socks5://127.0.0.1:7890

2ã€æµ‹è¯•
curl www.google.com -L

3ã€å–æ¶ˆä½¿ç”¨Clashä»£ç†
unset  http_proxy  https_proxy  all_proxy

å‚è€ƒæ–‡æ¡£ï¼šã€ŠLinuxé…ç½®ç½‘ç»œä»£ç†ã€‹
GUIç®¡ç†Clash æä¾›äº†é»˜è®¤çš„ 9090 ç«¯å£ä½œä¸ºGUIç®¡ç†ç«¯å£ã€‚
1ã€æµ‹è¯•ç®¡ç†ç«¯å£
curl 127.0.0.1:9090

2ã€æ·»åŠ è§£æclash.voidking.com åŸŸåè§£æåˆ°ä¸»æœºã€‚
3ã€å‡†å¤‡nginxé…ç½®æ–‡ä»¶ clash.voidking.com.conf
server &#123;    listen 80;    server_name clash.voidking.com;    charset utf-8;    location / &#123;        proxy_set_header   Host             $host;        proxy_set_header   X-Real-IP        $remote_addr;        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;        proxy_pass http://172.17.12.85:9090;    &#125;&#125;

4ã€é‡æ–°åŠ è½½nginx
docker exec -it vk-nginx nginx -tdocker exec -it vk-nginx nginx -s reload

5ã€è®¿é—®ç®¡ç†ç•Œé¢è®¿é—®Clashå¤–éƒ¨æ§åˆ¶ï¼Œå¡«å…¥Clashçš„IPï¼ˆåŸŸåï¼‰ã€ç«¯å£ã€å¯†é’¥ï¼Œå°±å¯ä»¥å¯¹Clashè¿›è¡Œé…ç½®äº†ã€‚å…¶ä¸­ï¼Œå¯†é’¥åœ¨config.yamlæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxé…ç½®ç½‘ç»œä»£ç†</title>
    <url>/dev-linux-network-proxy/</url>
    <content><![CDATA[ç½‘ç»œä»£ç†ã€ŠLinuxé…ç½®SNATä¸Šç½‘ã€‹ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬äº†è§£åˆ°ï¼Œé€šè¿‡SNATçš„æ–¹å¼èƒ½å¤Ÿè®©å±€åŸŸç½‘ä¸­æ‰€æœ‰ä¸»æœºéƒ½èƒ½è®¿é—®å¤–ç½‘ã€‚è€Œç½‘ç»œä»£ç†ï¼Œä¹Ÿèƒ½è®©å±€åŸŸç½‘ä¸­æ‰€æœ‰ä¸»æœºéƒ½èƒ½è®¿é—®å¤–ç½‘ã€‚å¹¶ä¸”ï¼Œå¦‚æœç½‘ç»œä»£ç†æ”¯æŒç§‘å­¦ä¸Šç½‘ï¼Œé‚£ä¹ˆæ‰€æœ‰ä½¿ç”¨è¿™ä¸ªä»£ç†çš„ä¸»æœºä¹Ÿå¯ä»¥ç§‘å­¦ä¸Šç½‘ã€‚
æœ¬æ–‡æˆ‘ä»¬å°±æ¥å­¦ä¹ ä¸€ä¸‹Linuxä¸­å¸¸è§çš„ç½‘ç»œä»£ç†é…ç½®æ–¹æ³•ï¼Œå‚è€ƒæ–‡æ¡£ï¼š

linuxè®¾ç½®ä»£ç†ä¸Šç½‘
docker pull é…ç½®ä»£ç†

å·²çŸ¥ç½‘ç»œä»£ç†çš„IPå’ŒPORTä¸ºï¼š192.168.56.1:7890


bashç¯å¢ƒç½‘ç»œä»£ç†bashç¯å¢ƒç½‘ç»œä»£ç†è®¾ç½®ï¼Œæ˜¯é€‚ç”¨äºå…¨å±€çš„ï¼Œå› ä¸ºç»å¤§éƒ¨åˆ†è½¯ä»¶éƒ½ä¼šä»ç¯å¢ƒå˜é‡ä¸­è¯»å–æ•°æ®ï¼Œæ¯”å¦‚curlå‘½ä»¤ã€yumå‘½ä»¤ã€wgetå‘½ä»¤ç­‰ç­‰ã€‚
ä¸´æ—¶é…ç½®export https_proxy=http://192.168.56.1:7890 http_proxy=http://192.168.56.1:7890 all_proxy=socks5://192.168.56.1:7890 ftp_proxy=http://192.168.56.1:7890 no_proxy=localhost,127.0.0.1,192.168.56.0/24

è¿™é‡Œçš„no_proxyéœ€è¦æ³¨æ„ï¼Œä¸åŒçš„è½¯ä»¶å¯¹äºå®ƒæœ‰ä¸åŒçš„å¤„ç†ã€‚æœ€å…¸å‹çš„ä¾‹å­ï¼š

example.comï¼šå¤§éƒ¨åˆ†è½¯ä»¶éƒ½æ”¯æŒç²¾ç¡®åŒ¹é…å’Œä¸‹ä¸€çº§åŸŸååŒ¹é…ï¼Œä¾‹å¦‚è¿˜å¯ä»¥åŒ¹é…subdomain.example.com
.example.comï¼šcurlå‰¥ç¦»å‰ç¼€.ï¼Œå¯¹äºexample.comä¸ä¼šä½¿ç”¨ä»£ç†ï¼›wgetä¸ä¼šå‰¥ç¦»å‰ç¼€.ï¼Œå¯¹äºexample.comä¼šä½¿ç”¨ä»£ç†
192.168.56.0/24ï¼šåªæœ‰Goå’ŒRubyæ”¯æŒè¿™ç§CIDRå—

è¯¦æƒ…å‚è€ƒWe need to talk: Can we standardize NO_PROXY?
æ°¸ä¹…ç”Ÿæ•ˆ1ã€å†™å…¥é…ç½®å†…å®¹åˆ°.bashrcæ–‡ä»¶ä¸­
export https_proxy=http://192.168.56.1:7890 export http_proxy=http://192.168.56.1:7890 export all_proxy=socks5://192.168.56.1:7890export ftp_proxy=http://192.168.56.1:7890 export no_proxy=localhost,127.0.0.1,192.168.56.0/24

å†™åˆ°.bashrcï¼Œæ— è®ºæ˜¯ç™»å½•sessionè¿˜æ˜¯éç™»å½•sessionï¼Œéƒ½å¯ä»¥ä½¿ç”¨è¿™äº›å˜é‡ï¼Œè¯¦æƒ…å‚è€ƒbash_profileå’Œbashrcçš„åŒºåˆ«ã€‚
2ã€ä½¿ç”Ÿæ•ˆ
source .bashrc

wgetä»£ç†ç¼–è¾‘æ–‡ä»¶/etc/wgetrcï¼Œæ·»åŠ å†…å®¹ï¼š
http_proxy = http://192.168.56.1:7890  https_proxy = http://192.168.56.1:7890ftp_proxy = http://192.168.56.1:7890

yumä»£ç†ç¼–è¾‘æ–‡ä»¶/etc/yum.confï¼Œæ·»åŠ å†…å®¹ï¼š
proxy=http://192.168.56.1:7890

æµè§ˆå™¨ä¸Šç½‘ä»£ç†ä»¥Firefoxæµè§ˆå™¨ä¸ºä¾‹ï¼šEdit -&gt; Preferences -&gt; Advanced -&gt; Networkåœ¨Connectionä¸‹ç‚¹å‡»Settingsï¼Œmanual proxy configurationé‡Œè®¾ç½®IPå’ŒPORTã€‚
docker pullä»£ç†1ã€åˆ›å»ºdockeré…ç½®ç›®å½•
mkdir /etc/systemd/system/docker.service.d

2ã€æ·»åŠ ä»£ç†é…ç½®
vim /etc/systemd/system/docker.service.d/http-proxy.conf

å†™å…¥å†…å®¹ä¸ºï¼š
[Service]Environment=&quot;HTTP_PROXY=http://192.168.56.1:7890&quot;Environment=&quot;HTTPS_PROXY=http://192.168.56.1:7890&quot;Environment=&quot;NO_PROXY=localhost,127.0.0.1,192.168.56.200,harbor.voidking.com&quot;

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ20.10.18å’Œæ›´æ—©çš„dockerç‰ˆæœ¬ï¼ŒNO_PROXYä¸æ”¯æŒCIDRï¼Œè¯¦æƒ…å‚è€ƒNO_PROXY does not support CIDR notation
3ã€é‡å¯docker
systemctl daemon-reloadsystemctl restart docker

4ã€æŸ¥çœ‹dockerä»£ç†
systemctl show docker --property Environmentdocker info | grep Proxy

docker buildä»£ç†docker buildæ—¶ï¼Œå®¹å™¨å†…éœ€è¦ä½¿ç”¨pipä¸‹è½½ä¾èµ–ã€‚
docker build \--network=host \--build-arg HTTP_PROXY=http://192.168.56.1:7890 \--build-arg HTTPS_PROXY=http://192.168.56.1:7890 \-t voidking/demo:v1.0.0 . \-f Dockerfile_test

pipä»£ç†æ‰§è¡Œpipå‘½ä»¤æ—¶ç›´æ¥æŒ‡å®šä»£ç†
pip install xxx --proxy http://192.168.56.1:7890



]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>docker</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>linux</tag>
        <tag>centos</tag>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxä¸­æ­å»ºSparké›†ç¾¤</title>
    <url>/dev-install-spark-on-linux/</url>
    <content><![CDATA[å‰è¨€è®¡åˆ’åœ¨ä¸‰å°Linuxä¸»æœºä¸­æ­å»ºSpark 3.3.1é›†ç¾¤ï¼Œä¸»æœºé…ç½®ä¸º4C8Gï¼Œæ“ä½œç³»ç»Ÿä¸ºCentOS7ã€‚ä¸‰å°ä¸»æœºçš„IPä¸ºï¼š
192.168.56.101192.168.56.102192.168.56.103
é€‰æ‹©101ä½œä¸ºmasterèŠ‚ç‚¹ï¼Œå¦å¤–ä¸¤ä¸ªä½œä¸ºworkerèŠ‚ç‚¹ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

spark3.3.0å®‰è£…&amp;éƒ¨ç½²è¿‡ç¨‹
Spark Overview
Spark Standalone Mode
Submitting Applications



å®‰è£…Javaå‚è€ƒæ–‡æ¡£ã€Šå…¨å¹³å°å®‰è£…JDKã€‹
å®‰è£…SparkmasterèŠ‚ç‚¹é…ç½®1ã€ä¸‹è½½sparkå¹¶è§£å‹
wget https://dlcdn.apache.org/spark/spark-3.3.1/spark-3.3.1-bin-hadoop3-scala2.13.tgzmkdir -p /usr/local/sparktar -xzvf spark-3.3.1-bin-hadoop3-scala2.13.tgz -C /usr/local/spark

è¿™é‡Œé€‰æ‹©spark-3.3.1-bin-hadoop3-scala2.13.tgzç‰ˆæœ¬ï¼Œå¸¦ç€scalaä¸€èµ·ã€‚spark-3.3.1-bin-hadoop3.tgzä¹ŸåŒ…å«scalaï¼Œä½†æ˜¯ç‰ˆæœ¬å¥½åƒæœ‰äº›é—®é¢˜ï¼Œå› æ­¤ä¸é€‰æ‹©å®ƒã€‚
æ›´å¤šç‰ˆæœ¬çš„sparkï¼Œå¯ä»¥åœ¨ Download Apache Spark å’Œ Spark release archives é¡µé¢æ‰¾åˆ°ã€‚
2ã€åˆ›å»ºé…ç½®æ–‡ä»¶
cd /usr/local/spark/spark-3.3.1-bin-hadoop3-scala2.13/confcp workers.template workerscp spark-defaults.conf.template spark-defaults.confcp spark-env.sh.template spark-env.sh

3ã€ä¿®æ”¹é…ç½®ï¼ˆ1ï¼‰workersä¸­åˆ é™¤localhostï¼Œæ·»åŠ 
#192.168.56.101192.168.56.102192.168.56.103

ï¼ˆ2ï¼‰spark-defaults.confæš‚æ—¶ä¸å˜
ï¼ˆ3ï¼‰spark-env.shä¸­æ·»åŠ 
export JAVA_HOME=/usr/lib/jvm/jdk1.8.0_161export SPARK_MASTER_HOST=192.168.56.101export SPARK_MASTER_PORT=7077

4ã€/etc/profileä¸­æ·»åŠ ç¯å¢ƒå˜é‡
export SPARK_HOME=/usr/local/spark/spark-3.3.1-bin-hadoop3-scala2.13export PATH=$SPARK_HOME/bin:$PATH

5ã€ä½¿é…ç½®ç”Ÿæ•ˆ
source /etc/profile

masteré…ç½®åŒæ­¥åˆ°worker1ã€æ‰“åŒ…sparkç¨‹åºå’Œé…ç½®
cd /usr/local/sparktar -czvf spark-3.3.1-bin-hadoop3-scala2.13.tgz spark-3.3.1-bin-hadoop3-scala2.13

2ã€æ‹·è´ç¨‹åºå’Œé…ç½®åˆ°workerèŠ‚ç‚¹
scp spark-3.3.1-bin-hadoop3-scala2.13.tgz 192.168.56.102:~scp /etc/profile 192.168.56.102:/etc/profilescp spark-3.3.1-bin-hadoop3-scala2.13.tgz 192.168.56.103:~scp /etc/profile 192.168.56.103:/etc/profile

workerèŠ‚ç‚¹é…ç½®1ã€è§£å‹spark
mkdir -p /usr/local/sparktar -xzvf spark-3.3.1-bin-hadoop3-scala2.13.tgz -C /usr/local/spark

è¿è¡ŒSpark1ã€å¯åŠ¨sparkï¼ˆåœ¨masterèŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼‰
cd /usr/local/spark/spark-3.3.1-bin-hadoop3-scala2.13/sbin./start-all.sh

æ ¹æ®æç¤ºï¼Œä¾æ¬¡è¾“å…¥ä¸¤å°workerèŠ‚ç‚¹çš„å¯†ç ã€‚ï¼ˆè¿™é‡Œæœ€å¥½é…ç½®ä¸Šå…å¯†ç™»å½•ï¼‰è¿™æ ·ï¼Œä¸‰ä¸ªèŠ‚ç‚¹ä¸Šçš„sparkå°±éƒ½å¯ä»¥å¯åŠ¨èµ·æ¥ã€‚
2ã€éªŒè¯å®‰è£…
jps

masterèŠ‚ç‚¹çœ‹åˆ°Masterå’ŒJpsä¸¤ä¸ªè¿›ç¨‹ï¼ŒworkerèŠ‚ç‚¹çœ‹åˆ°Workerå’ŒJpsä¸¤ä¸ªè¿›ç¨‹ã€‚
ä½¿ç”¨Sparkå•æœºæµ‹è¯•1ã€åœ¨masteræˆ–è€…workerèŠ‚ç‚¹ä¸Šæ‰§è¡Œ
cd /usr/local/spark/spark-3.3.1-bin-hadoop3-scala2.13/./bin/run-example SparkPi 10

è¾“å‡ºï¼š
22/11/09 20:38:29 INFO DAGScheduler: ResultStage 0 (reduce at SparkPi.scala:38) finished in 1.118 s22/11/09 20:38:29 INFO DAGScheduler: Job 0 is finished. Cancelling potential speculative or zombie tasks for this job22/11/09 20:38:29 INFO TaskSchedulerImpl: Killing all running tasks in stage 0: Stage finished22/11/09 20:38:29 INFO DAGScheduler: Job 0 finished: reduce at SparkPi.scala:38, took 1.175116 sPi is roughly 3.13890713890713922/11/09 20:38:29 INFO SparkUI: Stopped Spark web UI at http://spark-master:4040


2ã€æŸ¥çœ‹æ‰§è¡Œè¿›åº¦æµè§ˆå™¨è®¿é—® http://192.168.56.101:8080
spark-submitæäº¤ä»»åŠ¡./bin/spark-submit \  --class org.apache.spark.examples.SparkPi \  --master spark://192.168.56.101:7077 \  ./examples/jars/spark-examples_2.12-3.3.1.jar 1000

spark-submitæäº¤çš„ä»»åŠ¡ï¼Œæ‰§è¡Œé€Ÿåº¦éå¸¸éå¸¸æ…¢ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œç•™ä¸ªå‘å§ã€‚ã€‚ã€‚
è¿æ¥mysql1ã€åˆ›å»ºæµ‹è¯•æ–‡ä»¶ test_mysql.py
from pyspark.sql import SparkSessiondef test_sql():    spark = SparkSession.builder.appName(&#x27;testmysql&#x27;).master(&#x27;local&#x27;).getOrCreate()    df = spark.read.format(&quot;jdbc&quot;)\        .option(&quot;url&quot;, &quot;jdbc:mysql://192.168.56.101:3306/testdb&quot;)\        .option(&quot;driver&quot;, &quot;org.mariadb.jdbc.Driver&quot;)\        .option(&quot;dbtable&quot;, &quot;testtable&quot;)\        .option(&quot;user&quot;, &quot;root&quot;)\        .option(&quot;password&quot;, &quot;xxxxxx&quot;)\        .load()    df.printSchema()    df.select(df[&#x27;testcolumn&#x27;]).show()if __name__ == &quot;__main__&quot;:    test_sql()

2ã€æäº¤æµ‹è¯•
spark-submit mysql.py

è¿æ¥kafka1ã€åˆ›å»ºæµ‹è¯•æ–‡ä»¶ test_kafka.py
from pyspark.sql import SparkSessiondef read_data():    spark = SparkSession.builder.appName(&#x27;testkafka&#x27;).getOrCreate()    # Creating a Kafka Source for Streaming Queries    df = spark.readStream\        .format(&#x27;kafka&#x27;)\        .option(&quot;kafka.bootstrap.servers&quot;, &quot;192.168.56.101:9092&quot;)\        .option(&quot;subscribe&quot;, &quot;customer_volume&quot;)\        .load()    print(&quot;&gt;&gt;&gt;&gt; print schema:&quot;)    df.printSchema()    df.selectExpr(&quot;CAST(key AS STRING)&quot;, &quot;CAST(value AS STRING)&quot;)if __name__ == &quot;__main__&quot;:    read_data()


2ã€æäº¤æµ‹è¯•
spark-submit test_kafka.py
æŠ¥é”™ï¼špy4j.protocol.Py4JJavaError: An error occurred while calling o29.load.java.lang.NoClassDefFoundError: org/apache/kafka/common/serialization/ByteArraySerializerçœ‹æç¤ºæ˜¯å› ä¸ºç¼ºå°‘kafkaåºåˆ—åŒ–ç±»ï¼Œæ ¹æœ¬åŸå› æ˜¯å› ä¸ºç¼ºå°‘kafka client jaråŒ…ã€‚
è§£å†³åŠæ³•ï¼Œä¸‹è½½kafka-clients jarï¼Œæ”¾å…¥åˆ° /usr/local/spark/spark-3.3.1-bin-hadoop3-scala2.13/jars ç›®å½•ä¸­
ç±»ä¼¼çš„ï¼Œsparkè¿æ¥kafkaç›¸å…³çš„jaråŒ…è¿˜æœ‰ï¼š

spark-sql-kafka jar
spark-token-provider-kafka jar
commons-pool2 jar

å‚è€ƒæ–‡æ¡£ï¼šSpark 3.0.1 Structured Streaming æäº¤ç¨‹åºå¼‚å¸¸è§£å†³
åè®°å¯¹äºç¼ºå°‘jaråŒ…é—®é¢˜ï¼Œéƒ½å¯ä»¥åˆ° MVNREPOSITORY è¿™ä¸ªç½‘ç«™æŸ¥æ‰¾éœ€è¦çš„jaråŒ…ï¼Œå¾ˆå…¨ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
        <category>bigdata</category>
        <category>java</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>java</tag>
        <tag>maven</tag>
        <tag>spark</tag>
      </tags>
  </entry>
  <entry>
    <title>Sparkå…¥é—¨ç¯‡</title>
    <url>/dev-spark-start/</url>
    <content><![CDATA[Sparkç®€ä»‹Sparkæ˜¯ä¸€ä¸ªå¤§æ•°æ®å¤„ç†æ¡†æ¶ï¼Œå¯ä»¥è¿›è¡Œåˆ†ç‰‡è®¡ç®—å’Œå¹¶è¡Œè®¡ç®—ã€‚å’ŒMapReduceç›¸æ¯”ï¼Œè®¡ç®—é€Ÿåº¦æ›´å¿«ï¼Œç¼–ç¨‹æ¨¡å‹æ›´ç®€å•æ˜“ç”¨ã€‚å½“éœ€è¦å¤„ç†çš„æ•°æ®é‡è¶…è¿‡äº†å•æœºå°ºåº¦ï¼ˆæ¯”å¦‚æˆ‘ä»¬çš„è®¡ç®—æœºæœ‰4GBçš„å†…å­˜ï¼Œè€Œæˆ‘ä»¬éœ€è¦å¤„ç†100GBä»¥ä¸Šçš„æ•°æ®ï¼‰ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥é€‰æ‹©sparké›†ç¾¤è¿›è¡Œè®¡ç®—ã€‚æœ‰æ—¶æˆ‘ä»¬å¯èƒ½éœ€è¦å¤„ç†çš„æ•°æ®é‡å¹¶ä¸å¤§ï¼Œä½†æ˜¯è®¡ç®—å¾ˆå¤æ‚ï¼Œéœ€è¦å¤§é‡çš„æ—¶é—´ï¼Œè¿™æ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é€‰æ‹©åˆ©ç”¨sparké›†ç¾¤å¼ºå¤§çš„è®¡ç®—èµ„æºï¼Œå¹¶è¡ŒåŒ–åœ°è®¡ç®—ã€‚
è¯¦æƒ…å‚è€ƒï¼š

ä¸€æ–‡è¯¦è§£SparkåŸºæœ¬æ¶æ„åŸç†
ä¸€æ–‡å¸¦ä½ äº†è§£ Spark æ¶æ„è®¾è®¡ä¸åŸç†æ€æƒ³



Sparkæ¶æ„

Spark Coreï¼šåŒ…å«Sparkçš„åŸºæœ¬åŠŸèƒ½ï¼›å°¤å…¶æ˜¯å®šä¹‰RDDçš„APIã€æ“ä½œä»¥åŠè¿™ä¸¤è€…ä¸Šçš„åŠ¨ä½œã€‚å…¶ä»–Sparkçš„åº“éƒ½æ˜¯æ„å»ºåœ¨RDDå’ŒSpark Coreä¹‹ä¸Šçš„ã€‚
Spark SQLï¼šæä¾›é€šè¿‡Apache Hiveçš„SQLå˜ä½“HiveæŸ¥è¯¢è¯­è¨€ï¼ˆHiveQLï¼‰ä¸Sparkè¿›è¡Œäº¤äº’çš„APIã€‚æ¯ä¸ªæ•°æ®åº“è¡¨è¢«å½“åšä¸€ä¸ªRDDï¼ŒSpark SQLæŸ¥è¯¢è¢«è½¬æ¢ä¸ºSparkæ“ä½œã€‚
Spark Streamingï¼šå¯¹å®æ—¶æ•°æ®æµè¿›è¡Œå¤„ç†å’Œæ§åˆ¶ã€‚Spark Streamingå…è®¸ç¨‹åºèƒ½å¤Ÿåƒæ™®é€šRDDä¸€æ ·å¤„ç†å®æ—¶æ•°æ®ã€‚
MLlibï¼šä¸€ä¸ªå¸¸ç”¨æœºå™¨å­¦ä¹ ç®—æ³•åº“ï¼Œç®—æ³•è¢«å®ç°ä¸ºå¯¹RDDçš„Sparkæ“ä½œã€‚è¿™ä¸ªåº“åŒ…å«å¯æ‰©å±•çš„å­¦ä¹ ç®—æ³•ï¼Œæ¯”å¦‚åˆ†ç±»ã€å›å½’ç­‰éœ€è¦å¯¹å¤§é‡æ•°æ®é›†è¿›è¡Œè¿­ä»£çš„æ“ä½œã€‚
GraphXï¼šæ§åˆ¶å›¾ã€å¹¶è¡Œå›¾æ“ä½œå’Œè®¡ç®—çš„ä¸€ç»„ç®—æ³•å’Œå·¥å…·çš„é›†åˆã€‚GraphXæ‰©å±•äº†RDD APIï¼ŒåŒ…å«æ§åˆ¶å›¾ã€åˆ›å»ºå­å›¾ã€è®¿é—®è·¯å¾„ä¸Šæ‰€æœ‰é¡¶ç‚¹çš„æ“ä½œã€‚
HDFSï¼šåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚sparkæœ¬èº«å¹¶æ²¡æœ‰æä¾›åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œå› æ­¤sparkçš„åˆ†æå¤§å¤šä¾èµ–äºHadoopçš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»ŸHDFSã€‚

Sparkæ‰§è¡Œæµç¨‹Spark æ”¯æŒ Standaloneã€Yarnã€Mesosã€Kubernetes ç­‰å¤šç§éƒ¨ç½²æ–¹æ¡ˆï¼Œå‡ ç§éƒ¨ç½²æ–¹æ¡ˆåŸç†ä¹Ÿéƒ½ä¸€æ ·ï¼Œåªæ˜¯ä¸åŒç»„ä»¶è§’è‰²å‘½åä¸åŒï¼Œä½†æ˜¯æ ¸å¿ƒåŠŸèƒ½å’Œè¿è¡Œæµç¨‹éƒ½å·®ä¸å¤šã€‚
é¦–å…ˆï¼ŒSpark åº”ç”¨ç¨‹åºå¯åŠ¨åœ¨è‡ªå·±çš„ JVM è¿›ç¨‹é‡Œï¼Œå³ Driver è¿›ç¨‹ï¼Œå¯åŠ¨åè°ƒç”¨ SparkContext åˆå§‹åŒ–æ‰§è¡Œé…ç½®å’Œè¾“å…¥æ•°æ®ã€‚SparkContext å¯åŠ¨ DAGScheduler æ„é€ æ‰§è¡Œçš„ DAG å›¾ï¼Œåˆ‡åˆ†æˆæœ€å°çš„æ‰§è¡Œå•ä½ä¹Ÿå°±æ˜¯è®¡ç®—ä»»åŠ¡ã€‚
ç„¶å Driver å‘ Cluster Manager è¯·æ±‚è®¡ç®—èµ„æºï¼Œç”¨äº DAG çš„åˆ†å¸ƒå¼è®¡ç®—ã€‚Cluster Manager æ”¶åˆ°è¯·æ±‚ä»¥åï¼Œå°† Driver çš„ä¸»æœºåœ°å€ç­‰ä¿¡æ¯é€šçŸ¥ç»™é›†ç¾¤çš„æ‰€æœ‰è®¡ç®—èŠ‚ç‚¹ Workerã€‚
Worker æ”¶åˆ°ä¿¡æ¯ä»¥åï¼Œæ ¹æ® Driver çš„ä¸»æœºåœ°å€ï¼Œè·Ÿ Driver é€šä¿¡å¹¶æ³¨å†Œï¼Œç„¶åæ ¹æ®è‡ªå·±çš„ç©ºé—²èµ„æºå‘ Driver é€šæŠ¥è‡ªå·±å¯ä»¥é¢†ç”¨çš„ä»»åŠ¡æ•°ã€‚Driver æ ¹æ® DAG å›¾å¼€å§‹å‘æ³¨å†Œçš„ Worker åˆ†é…ä»»åŠ¡ã€‚
Worker æ”¶åˆ°ä»»åŠ¡åï¼Œå¯åŠ¨ Executor è¿›ç¨‹å¼€å§‹æ‰§è¡Œä»»åŠ¡ã€‚Executor å…ˆæ£€æŸ¥è‡ªå·±æ˜¯å¦æœ‰ Driver çš„æ‰§è¡Œä»£ç ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä» Driver ä¸‹è½½æ‰§è¡Œä»£ç ï¼Œé€šè¿‡ Java åå°„åŠ è½½åå¼€å§‹æ‰§è¡Œã€‚
Sparkéƒ¨ç½²æ¨¡å¼æœ¬èŠ‚å†…å®¹æ¥è‡ªchatgptã€‚
Apache Spark å¯ä»¥è¿è¡Œåœ¨ä¸åŒçš„éƒ¨ç½²æ¨¡å¼ä¸‹ï¼Œä»¥æ»¡è¶³ä¸åŒçš„éœ€æ±‚ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ Spark éƒ¨ç½²æ¨¡å¼ï¼š

Local æ¨¡å¼ï¼šåœ¨å•ä¸ª JVM è¿›ç¨‹ä¸­è¿è¡Œï¼Œä¸»è¦ç”¨äºå¼€å‘å’Œæµ‹è¯•ã€‚
Standalone æ¨¡å¼ï¼šåœ¨ Spark è‡ªå¸¦çš„èµ„æºç®¡ç†å™¨ä¸‹è¿è¡Œï¼Œé€‚ç”¨äºä¸­å°è§„æ¨¡é›†ç¾¤ã€‚
Apache Mesos æ¨¡å¼ï¼šåœ¨ Mesos é›†ç¾¤ä¸Šè¿è¡Œï¼Œå¯ä»¥ä¸å…¶ä»–æ¡†æ¶å…±äº«ç¡¬ä»¶èµ„æºã€‚
Hadoop YARN æ¨¡å¼ï¼šåœ¨ Hadoop YARN é›†ç¾¤ä¸Šè¿è¡Œï¼Œå¯ä»¥ä¸å…¶ä»– Hadoop åº”ç”¨ç¨‹åºå…±äº«èµ„æºã€‚
Kubernetes æ¨¡å¼ï¼šåœ¨ Kubernetes é›†ç¾¤ä¸Šè¿è¡Œï¼Œå¯ä»¥ä¸å…¶ä»–å®¹å™¨åŒ–åº”ç”¨ç¨‹åºå…±äº«ç¡¬ä»¶èµ„æºã€‚

Spark è¿˜æ”¯æŒå„ç§äº‘ç¯å¢ƒä¸­çš„éƒ¨ç½²ï¼Œä¾‹å¦‚ Amazon EMRã€Microsoft Azure å’Œ Google Cloud Platform ç­‰ã€‚åœ¨è¿™äº›ç¯å¢ƒä¸­ï¼ŒSpark é›†æˆäº†ç›¸åº”çš„ç®¡ç†å·¥å…·ï¼Œä½¿å¾—éƒ¨ç½²æ›´åŠ ç®€å•ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>bigdata</category>
        <category>chatgpt</category>
      </categories>
      <tags>
        <tag>chatgpt</tag>
        <tag>spark</tag>
      </tags>
  </entry>
  <entry>
    <title>Argo CDå…¥é—¨ç¯‡</title>
    <url>/dev-argocd-start/</url>
    <content><![CDATA[Argo CDæ˜¯å•¥ï¼Ÿ
What Is Argo CD? Argo CD is a declarative, GitOps continuous delivery tool for Kubernetes.Why Argo CD? Application definitions, configurations, and environments should be declarative and version controlled. Application deployment and lifecycle management should be automated, auditable, and easy to understand.

Argo CDæ˜¯ä»€ä¹ˆï¼ŸArgo CDæ˜¯ä¸€ä¸ªå£°æ˜å¼çš„åŸºäºGitOpsçš„ç”¨äºK8Sçš„æŒç»­äº¤ä»˜å·¥å…·ã€‚ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Argo CDï¼Ÿåº”ç”¨å®šä¹‰ã€é…ç½®å’Œç¯å¢ƒéƒ½åº”è¯¥è¢«å£°æ˜å’Œç‰ˆæœ¬æ§åˆ¶ã€‚åº”ç”¨éƒ¨ç½²å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†éƒ½åº”è¯¥æ˜¯è‡ªåŠ¨çš„ã€å¯å®¡è®¡çš„ã€æ˜“ç†è§£çš„ã€‚
Argo CD éµå¾ª GitOps æ¨¡å¼ï¼Œä½¿ç”¨ Git ä»“åº“ä½œä¸ºå®šä¹‰æ‰€éœ€åº”ç”¨ç¨‹åºçŠ¶æ€çš„çœŸå®æ¥æºï¼ŒArgo CD æ”¯æŒå¤šç§ Kubernetes æ¸…å•ï¼š

kustomize
helm charts
ksonnet applications
jsonnet files
Plain directory of YAML/json manifests
Any custom config management tool configured as a config management pluginArgo CD å¯åœ¨æŒ‡å®šçš„ç›®æ ‡ç¯å¢ƒä¸­è‡ªåŠ¨éƒ¨ç½²æ‰€éœ€çš„åº”ç”¨ç¨‹åºçŠ¶æ€ï¼Œåº”ç”¨ç¨‹åºéƒ¨ç½²å¯ä»¥åœ¨ Git æäº¤æ—¶è·Ÿè¸ªå¯¹åˆ†æ”¯ã€æ ‡ç­¾çš„æ›´æ–°ï¼Œæˆ–å›ºå®šåˆ°æ¸…å•çš„æŒ‡å®šç‰ˆæœ¬ã€‚

å‚è€ƒæ–‡æ¡£ï¼š

Argo CDå®˜æ–¹æ–‡æ¡£
Argo CD



GitOpsæ˜¯å•¥ï¼Ÿä¸Šé¢æåˆ°äº†GitOpsï¼Œè¿™æ˜¯ä¸ªå•¥ï¼Ÿåœ¨èŠGitOpsä¹‹å‰ï¼Œå…ˆèŠä¸€ä¸‹DevOpsã€‚

DevOpsï¼ˆDevelopmentå’ŒOperationsçš„ç»„åˆè¯ï¼‰æ˜¯ä¸€ç§é‡è§†â€œè½¯ä»¶å¼€å‘äººå‘˜ï¼ˆDevï¼‰â€å’Œâ€œITè¿ç»´æŠ€æœ¯äººå‘˜ï¼ˆOpsï¼‰â€ä¹‹é—´æ²Ÿé€šåˆä½œçš„æ–‡åŒ–ã€è¿åŠ¨æˆ–æƒ¯ä¾‹ã€‚é€šè¿‡è‡ªåŠ¨åŒ–â€œè½¯ä»¶äº¤ä»˜â€å’Œâ€œæ¶æ„å˜æ›´â€çš„æµç¨‹ï¼Œæ¥ä½¿å¾—æ„å»ºã€æµ‹è¯•ã€å‘å¸ƒè½¯ä»¶èƒ½å¤Ÿæ›´åŠ åœ°å¿«æ·ã€é¢‘ç¹å’Œå¯é ã€‚

DevOpsç®€å•æ¥è¯´ï¼Œå°±æ˜¯æ•æ·æ€ç»´ï¼ˆç‰ˆæœ¬æ›´æ–°åˆå¿«åˆå¥½ï¼‰ï¼ä¸ºäº†å®ç°æ•æ·ï¼Œéœ€è¦æ ‡å‡†å’Œè§„èŒƒï¼Œéœ€è¦å¼€å‘ã€æµ‹è¯•ã€è¿ç»´åˆä½œï¼Œéœ€è¦è‡ªåŠ¨åŒ–ã€‚
è€ŒGitOpsï¼Œæ­£æ˜¯åŸºäºæ•æ·æ€ç»´è€Œè¯ç”Ÿçš„ä¸€ç§æŒç»­äº¤ä»˜æ–¹å¼ï¼Œèƒ½å¤Ÿç”¨å£°æ˜çš„æ–¹å¼ä¼˜é›…åœ°è¿›è¡ŒCICDã€‚1ã€æºç å­˜å‚¨äºGitæºç ä»“åº“ï¼Œå¼€å‘äººå‘˜æ¨é€æäº¤åŒ…å«æ–°åŠŸèƒ½çš„ä»£ç åˆ°ä»£ç ä»“åº“çš„å¯¹åº”åˆ†æ”¯ä¸­ï¼›ä»£ç å®¡æ ¸é€šè¿‡åå°†è¢«åˆå¹¶è‡³å¯¹åº”åˆ†æ”¯ã€‚2ã€åˆå¹¶è¯·æ±‚é€šè¿‡åä¼šè§¦å‘æ„å»ºå¹¶è¿›è¡Œæµ‹è¯•ï¼Œæ„å»ºå¥½çš„é•œåƒå°†è¢«æ¨é€è‡³é•œåƒä»“åº“ä¸­ã€‚3ã€GitOpsæ£€æµ‹åˆ°æœ‰æ–°çš„é•œåƒï¼Œä¼šæå–æœ€æ–°çš„é•œåƒæ ‡è®°ï¼Œç„¶ååŒæ­¥åˆ°Gité…ç½®ä»“åº“ï¼ˆConfigï¼‰çš„æ¸…å•ä¸­ã€‚4ã€GitOpsæ£€æµ‹åˆ°é›†ç¾¤çŠ¶æ€è¿‡æœŸï¼Œä¼šä»é…ç½®ä»“åº“ä¸­æ‹‰å–æ›´æ–°åçš„æ¸…å•ï¼Œå¹¶å°†åŒ…å«æ–°åŠŸèƒ½çš„é•œåƒé€šè¿‡éƒ¨ç½²åˆ°é›†ç¾¤é‡Œã€‚
å¯¹äºä¸åŒç¯å¢ƒè€Œè¨€ï¼Œå¯ä»¥åœ¨Configä»“ä¸­åˆ›å»ºå¤šä¸ªå­ç›®å½•æˆ–è€…å­åˆ†æ”¯ç®¡ç†ä¸åŒç¯å¢ƒå¯¹åº”çš„å¤šä¸ªé›†ç¾¤ï¼Œä»è€Œå®ç°å¤šç¯å¢ƒçš„GitOpsã€‚
æ›´å¤šå†…å®¹å‚è€ƒæµ…è°ˆGitOps
Argo CDæ¶æ„

API Serveræ˜¯ä¸€ä¸ª gRPC/REST serverï¼Œå®ƒå¼€æ”¾äº† Web UIã€CLI å’Œ CI/CD ç³»ç»Ÿä½¿ç”¨çš„ APIã€‚
Repository Serveræ˜¯ä¸€ä¸ªå†…éƒ¨æœåŠ¡ï¼Œå®ƒç»´æŠ¤åº”ç”¨æ¸…å•çš„Gitä»“åº“çš„æœ¬åœ°ç¼“å­˜ï¼Œè´Ÿè´£ç”Ÿæˆå’Œè¿”å› Kubernetes æ¸…å•ã€‚
Application Controlleræ˜¯ä¸€ä¸ª Kubernetes æ§åˆ¶å™¨ï¼Œå®ƒæŒç»­ç›‘æ§æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºå¹¶å°†å½“å‰çš„æ´»åŠ¨çŠ¶æ€ä¸æ‰€éœ€çš„ç›®æ ‡çŠ¶æ€ï¼ˆå¦‚ repo ä¸­æŒ‡å®šçš„ï¼‰è¿›è¡Œæ¯”è¾ƒï¼Œæ£€æµ‹ OutOfSync åº”ç”¨ç¨‹åºçŠ¶æ€å¹¶å¯é€‰æ‹©é‡‡å–çº æ­£æªæ–½ã€‚è´Ÿè´£ä¸ºç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼ˆPreSyncã€Syncã€PostSyncï¼‰è°ƒç”¨ç”¨æˆ·å®šä¹‰çš„é’©å­ã€‚

ä»¥ä¸Šæ˜¯å®˜æ–¹ç»™çš„argocdæ¶æ„å›¾å’Œè¯´æ˜ï¼Œè¯¦æƒ…å‚è€ƒArchitectural Overviewã€‚è¿™ä¸ªæ¶æ„å›¾ä¸å¤ªå‹å¥½ï¼Œæ²¡æœ‰æ˜æ˜¾ä½“ç°å‡ºargocdç›‘å¬gitä»“åº“ã€‚
ä¸‹é¢å†çœ‹ä¸€ä¸ªæ¯”è¾ƒå‹å¥½çš„argocdæ¶æ„å›¾ï¼šCIæµæ°´çº¿è§¦å‘æ›´æ–°Gitä»“åº“ä¸­çš„K8Såº”ç”¨æ¸…å•ï¼Œæˆ–è€…å·¥ç¨‹å¸ˆç›´æ¥ä¿®æ”¹Gitä»“åº“ä¸­çš„K8Såº”ç”¨æ¸…å•ï¼ŒArgo CDéƒ½ä¼šè‡ªåŠ¨æ‹‰å–æœ€æ–°çš„é…ç½®å¹¶åº”ç”¨åˆ°K8Sé›†ç¾¤ä¸­ã€‚è¯¦æƒ…å‚è€ƒArgo CD å…¥é—¨æ•™ç¨‹
è§¦å‘Argo CDåŒæ­¥çš„æ–¹å¼è§¦å‘Argo CDåŒæ­¥æœ‰ä¸‰ç§æ–¹å¼ï¼š

æ‰‹åŠ¨ï¼šåœ¨é¡µé¢ä¸Šç‚¹å‡»è§¦å‘åŒæ­¥ï¼Œæˆ–è€…ä½¿ç”¨CLIè§¦å‘åŒæ­¥
è‡ªåŠ¨ï¼šé…ç½®åè‡ªåŠ¨è§¦å‘åŒæ­¥
Webhookï¼šGitä»“åº“æ›´æ–°åï¼Œé€šè¿‡Webhookå‘ŠçŸ¥Argo CDè§¦å‘åŒæ­¥ã€‚è¯¦æƒ…å‚è€ƒæ–‡æ¡£Git Webhook Configuration

Argo CDä½¿ç”¨å‚è€ƒæ–‡æ¡£ï¼š

Argo CD - Getting Started
Argo CD å…¥é—¨æ•™ç¨‹
Argo CD ä½¿ç”¨
Kustomize + Argo CD ä¼˜åŒ–å‘å¸ƒæµç¨‹
Argo CD - Automated Sync Policy
Argo CD - Sync Options

å‡†å¤‡gitä»“åº“åˆ›å»ºä¸€ä¸ªgitä»“åº“ï¼ŒåŒ…å«k8sèµ„æºæ¸…å•ï¼ˆä¸€èˆ¬æ˜¯kustomizationæ–‡ä»¶ï¼‰ã€‚ä½¿ç”¨è¿™äº›èµ„æºæ¸…å•å¯ä»¥åœ¨k8sä¸­åˆ›å»ºå’Œå˜æ›´deploymentã€serviceç­‰èµ„æºå¯¹è±¡ï¼ˆä¸ä½¿ç”¨argocdï¼Œç›´æ¥ä½¿ç”¨kubectlä¹Ÿå¯ä»¥ï¼‰ã€‚
gitä»“åº“å‚è€ƒï¼švoidking/argocd-demo
kustomizeç›¸å…³çŸ¥è¯†ç‚¹å‚è€ƒï¼šã€ŠKustomizeå·¥å…·ã€‹
é…ç½®argocdåº”ç”¨é€šè¿‡argocdçš„clientæˆ–è€…UIç•Œé¢ï¼Œé…ç½®ä¸€ä¸ªargocdåº”ç”¨ã€‚åº”ç”¨ä¼šæŒ‡å®šgitä»“åº“ã€è·¯å¾„ï¼Œè¿™æ ·å°±çŸ¥é“ä½¿ç”¨å“ªäº›èµ„æºæ¸…å•äº†ã€‚åº”ç”¨è¿˜ä¼šæŒ‡å®šk8sé›†ç¾¤ï¼Œè¿™æ ·å°±çŸ¥é“åœ¨å“ªä¸ªé›†ç¾¤ä¸­åˆ›å»ºå’Œå˜æ›´èµ„æºå¯¹è±¡äº†ã€‚
Automated SYNC POLICYâ€‹â€‹â€‹ï¼š

RRUNE RESOURCESâ€‹â€‹ï¼šè‡ªåŠ¨ä¿®å‰ªã€‚é›†ç¾¤ä¸ŠæŸä¸ªèµ„æºåœ¨ GitRepo ä¸­æ‰¾ä¸åˆ°å¯¹åº”çš„é…ç½®æ—¶ï¼Œè‡ªåŠ¨åˆ é™¤é›†ç¾¤ä¸Šçš„è¯¥èµ„æºã€‚
SELF HEALâ€‹â€‹ï¼šè‡ªæ„ˆã€‚å› å„ç§åŸå› ï¼ˆå¦‚æ‰‹åŠ¨ä¿®æ”¹ï¼‰é›†ç¾¤ä¸Šèµ„æºçš„å®æ—¶çŠ¶æ€è€Œå¯¼è‡´ä¸ GitRepo ä¸åŒ¹é…æ—¶ï¼Œè‡ªåŠ¨å°†å®é™…çŠ¶æ€ä¸ GitRepo çš„æœŸæœ›çŠ¶æ€åŒæ­¥ã€‚ä¸å‹¾é€‰æ—¶ï¼Œè™½ç„¶ä¹Ÿä¼šè¿›è¡Œè‡ªåŠ¨åŒæ­¥çš„æ¢æµ‹ï¼Œä½†æ˜¯åªæœ‰å½“GitRepoä¸­æ¸…å•å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šè§¦å‘k8sèµ„æºå˜æ›´ã€‚
è‡ªåŠ¨åŒæ­¥æ—¶é—´é—´éš”ï¼šé»˜è®¤180sã€‚è¯¦æƒ…å‚è€ƒæ–‡æ¡£Automated Sync Policy default interval value

SYNC OPTIONSï¼šâ€‹- SKIP SCHEMA VALIDATIONâ€‹â€‹ï¼šæ˜¯å¦æ‰§è¡Œèµ„æºè§„èŒƒæ ¼å¼çš„æ ¡éªŒã€‚â€‹â€‹- AUTO-CREATE NAMESPACEâ€‹â€‹ï¼šè‡ªåŠ¨åˆ›å»ºå‘½åç©ºé—´ã€‚â€‹â€‹- PRUNE LASTâ€‹â€‹ï¼šåœ¨åŒæ­¥æ“ä½œçš„æœ€ååœ¨æ‰§è¡Œä¿®å‰ªæ“ä½œï¼Œå³å…¶ä»–èµ„æºå·²ç»éƒ¨ç½²ä¸”è½¬ä¸ºå¥åº·çŠ¶æ€åå†è¿›è¡Œ pruneâ€‹â€‹- APPLY OUT OF SYNC ONLYâ€‹â€‹â€‹ï¼šä»…å¯¹é‚£äº›å¤„äº â€‹â€‹OutOfSyncâ€‹â€‹â€‹ çŠ¶æ€çš„èµ„æºæ‰§è¡ŒåŒæ­¥æ“ä½œã€‚â€‹â€‹- REPLACEâ€‹â€‹ï¼šå°†ä½¿ç”¨ kubectl replace/create å‘½ä»¤åŒæ­¥èµ„æºï¼Œè€Œéé»˜è®¤çš„ applyâ€‹â€‹- PRUNE PROPAGATION POLICYâ€‹â€‹ï¼šèµ„æºä¿®å‰ªä¼ æ’­ç­–ç•¥ï¼Œé»˜è®¤å€¼ä½¿ç”¨ foreground ç­–ç•¥ï¼Œè¿˜æœ‰ background å’Œ orphanâ€‹â€‹- RESPECT IGNORE DIFFERENCESâ€‹â€‹â€‹ï¼šåœ¨åŒæ­¥é˜¶æ®µå¿½ç•¥æœŸæœ›çŠ¶æ€çš„å­—æ®µã€‚ä¾‹å¦‚æˆ‘ä»¬æœ‰ä¸ª deploymentï¼Œé‡Œé¢çš„ replicas ä¸º 20ï¼Œä»£è¡¨æˆ‘ä»¬æœŸæœ›çš„ pod æ•°é‡ä¸º 20 ä¸ªï¼Œä½†å¦‚æœæˆ‘ä»¬è¿›è¡Œç°åº¦å‘å¸ƒçš„æ—¶å€™ï¼Œå¯èƒ½å¤šï¼Œä¹Ÿå¯èƒ½å°‘ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœä¸å‹¾é€‰ â€‹â€‹RESPECT IGNORE DIFFERENCESâ€‹â€‹ ï¼Œå°±ä¼šå¯¼è‡´ç°åº¦å‘å¸ƒå‡ºç°é—®é¢˜ï¼Œæ‰€ä»¥è¿™æ—¶å€™æˆ‘ä»¬æœ€å¥½æ˜¯å‹¾é€‰ä¸Šè¯¥å‚æ•°ã€‚
èµ„æºåˆ›å»º/å˜æ›´é…ç½®å®Œæˆï¼Œç‚¹å‡»åŒæ­¥ï¼Œargocdå°±ä¼šä»gitä»“åº“è·å–æœ€æ–°çš„é…ç½®æ¸…å•ï¼Œapplyåˆ°k8sé›†ç¾¤ã€‚å¦‚æœé…ç½®äº†è‡ªåŠ¨åŒæ­¥ï¼Œé‚£ä¹ˆé»˜è®¤3åˆ†é’Ÿè‡ªåŠ¨åŒæ­¥ä¸€æ¬¡ï¼Œå¯ä»¥ä¿®æ”¹timeout.reconciliationå­—æ®µä¿®æ”¹åŒæ­¥é—´éš”ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>argocd</tag>
        <tag>cicd</tag>
        <tag>devops</tag>
      </tags>
  </entry>
  <entry>
    <title>GitLab CIæŠ¥é”™no space left on device</title>
    <url>/dev-gitlab-ci-no-space-left-on-device/</url>
    <content><![CDATA[é—®é¢˜æè¿°gitlab CIä»»åŠ¡ï¼Œæ‹‰åŸºç¡€é•œåƒçš„æ—¶å€™æŠ¥é”™no space left on deviceï¼š
failed to register layer: Error processing tar file(exit status 1): write /root/miniconda3/envs/cv/lib/python3.7/site-packages/xxx.so: no space left on device



æ’æŸ¥æ€è·¯é—®é¢˜åŸå› çŒœæµ‹ï¼š

å¶å‘é—®é¢˜ï¼Ÿç¡®è®¤æ˜¯å¦èƒ½ç¨³å®šå¤ç°
ç£ç›˜ç©ºé—´é—®é¢˜ï¼Ÿç¡®è®¤runneræ‰€åœ¨ä¸»æœºçš„ç£ç›˜ç©ºé—´
CICDé…ç½®é—®é¢˜ï¼Ÿç¡®è®¤CICDé…ç½®ï¼Œæ£€æŸ¥ç”¨æ³•æ˜¯å¦æ­£ç¡®
runneré—®é¢˜ï¼Ÿé‡å¯runnerï¼Œå†æ¬¡å°è¯•å¤ç°

æ’æŸ¥ç¡®è®¤ï¼š

é—®é¢˜å¶å‘å¤ç°ï¼Œéƒ½æ˜¯åœ¨åŒä¸€ä¸ªrunneræ‰€åœ¨ä¸»æœº
runneræ‰€åœ¨ä¸»æœºçš„ç£ç›˜ç©ºé—´å……è¶³
CICDé…ç½®æ­£ç¡®
é‡å¯runneråæ— æ³•å¤ç°ï¼Œé—®é¢˜è§£å†³äº†ï¼Œè¯´æ˜æ˜¯runneré—®é¢˜ã€‚ä½†æ˜¯è¿‡å‡ å¤©ä¼šå†æ¬¡å¤ç°ï¼Œéœ€è¦ç»§ç»­å®šä½æ ¹å› ã€‚

runneré—®é¢˜æ’æŸ¥å‡ºé—®é¢˜çš„runnerï¼Œä½¿ç”¨çš„æ‰§è¡Œå™¨æ˜¯ docker machine executordocker machineç±»å‹çš„æ‰§è¡Œå™¨ï¼Œç‰¹ç‚¹æ˜¯å…ˆåˆ›å»ºVMï¼Œç„¶ååœ¨VMä¸­æ‰§è¡Œä½œä¸šã€‚äº†è§£äº†è¿™ä¸ªç‰¹ç‚¹ï¼Œæˆ‘ä»¬å°±èƒ½çŸ¥é“æŠ¥é”™ç£ç›˜æ»¡çš„å¹¶ä¸æ˜¯runneræ‰€åœ¨å®¿ä¸»æœºï¼Œè€Œæ˜¯å®é™…æ‰§è¡Œä½œä¸šçš„VMã€‚
1ã€ç™»å½•åˆ°æ‰§è¡Œä½œä¸šçš„VMè¿›è¡Œç¡®è®¤
docker-machine lsdocker-machine ssh xxxdf -h
ç»ç¡®è®¤ï¼Œç¡®å®æ˜¯æ‰§è¡Œä½œä¸šçš„VMç£ç›˜æ»¡äº†ã€‚å› ä¸ºrunneræ‰€åœ¨å®¿ä¸»æœºç£ç›˜å……è¶³ï¼Œå› æ­¤è§£å†³åŠæ³•æ˜¯ç»™VMæ‰©ç£ç›˜ã€‚
2ã€VMç£ç›˜æ‰©å®¹å› æ­¤VMæ˜¯å—runnerç®¡ç†çš„ï¼Œæ‰€ä»¥æœ€å¥½ä¸è¦é€šè¿‡docker-machineå‘½ä»¤æ‰‹åŠ¨æ‰©å®¹ï¼Œè€Œæ˜¯é€šè¿‡ä¿®æ”¹runneré…ç½®æ¥ä¿®æ”¹ã€‚
sudo vim /etc/gitlab-runner/config.toml

config.tomlä¸­çš„virtualbox-disk-sizeä¿®æ”¹åˆ°æœŸæœ›çš„å€¼ï¼š
...  [runners.machine]    IdleCount = 5    MaxGrowthRate = 1    IdleTime = 1800    MachineDriver = &quot;virtualbox&quot;    MachineName = &quot;auto-scale-%s&quot;    MachineOptions = [      &quot;engine-registry-mirror=http://xxxxxx:5000&quot;,      &quot;virtualbox-memory=4048&quot;,      &quot;virtualbox-disk-size=204800&quot;,      &quot;virtualbox-cpu-count=2&quot;    ]

3ã€é‡å¯runner
gitlab-runner restartdocker-machine ls
é‡å¯runneråï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°VMè¢«é‡å»ºäº†ã€‚
4ã€ç¡®è®¤ç£ç›˜å¤§å°
docker-machine ssh xxxdf -h

ä»¥ä¸Šï¼Œé—®é¢˜è§£å†³ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>troubleshooting</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>git</tag>
        <tag>cicd</tag>
        <tag>gitlab</tag>
      </tags>
  </entry>
  <entry>
    <title>GitLab CI/CDå…¥é—¨ç¯‡</title>
    <url>/dev-gitlab-cicd/</url>
    <content><![CDATA[GitLab CI/CDæ˜¯å•¥ï¼ŸCIï¼ŒCONTINUOUS INTEGRATIONï¼ŒæŒç»­é›†æˆã€‚ç®€å•æ¥è¯´å°±æ˜¯è‡ªåŠ¨åŒ–æ„å»ºå’Œæµ‹è¯•ã€‚ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„ä»£ç å­˜å‚¨åœ¨Gitä»“åº“ä¸­ã€‚å¼€å‘äººå‘˜æ¨é€çš„æ¯ä¸ªæ›´æ”¹ï¼Œç”šè‡³æ˜¯å¼€å‘åˆ†æ”¯ï¼Œéƒ½å¯ä»¥é€šè¿‡ä¸€ç»„è„šæœ¬æ¥è‡ªåŠ¨åœ°æ„å»ºå’Œæµ‹è¯•ã€‚è¿™äº›æµ‹è¯•å¯ç¡®ä¿æ›´æ”¹é€šè¿‡æ‚¨ä¸ºåº”ç”¨ç¨‹åºå»ºç«‹çš„æ‰€æœ‰æµ‹è¯•ã€æŒ‡å—å’Œä»£ç åˆè§„æ€§æ ‡å‡†ã€‚
CDï¼ŒCONTINUOUS DELIVERYï¼ŒæŒç»­äº¤ä»˜ã€‚ç®€å•æ¥è¯´å°±æ˜¯è‡ªåŠ¨åŒ–æ„å»ºå’Œæµ‹è¯•+æ”¯æŒæ‰‹åŠ¨è§¦å‘éƒ¨ç½²ã€‚æ¯æ¬¡å°†ä»£ç æ›´æ”¹æ¨é€åˆ°ä»£ç åº“æ—¶ï¼Œä¸ä»…ä¼šè‡ªåŠ¨æ„å»ºå’Œæµ‹è¯•åº”ç”¨ç¨‹åºï¼Œè¿˜æ”¯æŒä¸€é”®éƒ¨ç½²åº”ç”¨ç¨‹åºï¼Œè¿™é‡Œçš„éƒ¨ç½²éœ€è¦æ‰‹åŠ¨è§¦å‘ã€‚
CDï¼ŒCONTINUOUS DEPLOYMENTï¼ŒæŒç»­éƒ¨ç½²ã€‚ç®€å•æ¥è¯´å°±æ˜¯è‡ªåŠ¨åŒ–æ„å»ºå’Œæµ‹è¯•+è‡ªåŠ¨éƒ¨ç½²ã€‚æŒç»­éƒ¨ç½²ç±»ä¼¼äºæŒç»­äº¤ä»˜ï¼Œä¸åŒä¹‹å¤„åœ¨äºï¼Œä¸æ˜¯æ‰‹åŠ¨è§¦å‘éƒ¨ç½²åº”ç”¨ç¨‹åºï¼Œè€Œæ˜¯å°†å…¶è®¾ç½®ä¸ºè‡ªåŠ¨éƒ¨ç½²ã€‚
è€ŒGitLab CI/CDï¼Œå°±æ˜¯ä¸€ç§æ”¯æŒåœ¨GitLabä¸­é…ç½®ä½¿ç”¨æŒç»­é›†æˆã€æŒç»­äº¤ä»˜å’ŒæŒç»­éƒ¨ç½²çš„å·¥å…·ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

GitLab CI/CD Document
GitLab CI/CD ä¸­æ–‡æ–‡æ¡£
CI/CD æ¦‚å¿µ
è¯¦è§£CIã€CD &amp; CD
ä»€ä¹ˆæ˜¯ CI/CDï¼Ÿ
Deployment environment



GitLab CI/CDåŸºæœ¬æ¦‚å¿µ
pipelineï¼šåœ¨æ¯ä¸ªä»“åº“ä¸­ï¼Œä½¿ç”¨åä¸º.gitlab-ci.ymlçš„yamlæ–‡ä»¶é…ç½®gitlab ci/cdæµæ°´çº¿ï¼ˆpipelineï¼‰
stageï¼šä¸€æ¡æµæ°´çº¿å¯ä»¥åŒ…å«å¤šä¸ªé˜¶æ®µï¼ˆstageï¼‰ï¼Œä¸€ä¸ªé˜¶æ®µå¯ä»¥åŒ…å«å¤šä¸ªä½œä¸š
jobï¼šä½œä¸šï¼ˆjobï¼‰æ˜¯å…·ä½“è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œæ˜¯å‘½ä»¤è„šæœ¬è¯­å¥çš„é›†åˆ
runnerï¼šrunneræ˜¯æ¯ä¸ªä½œä¸šçš„æ‰§è¡ŒèŠ‚ç‚¹ï¼›æ¯ä¸ªä½œä¸šå¯ä»¥æ ¹æ®æ ‡ç­¾é€‰æ‹©ä¸åŒçš„æ‰§è¡ŒèŠ‚ç‚¹

Gitlab CI/CDå·¥ä½œæœºåˆ¶1ã€åœ¨gitlabä»“åº“ä¸­æ·»åŠ .gitlab-ci.ymlæ–‡ä»¶ï¼Œå®šä¹‰æµæ°´çº¿  
2ã€å½“ä»“åº“ä¸­å‘ç”Ÿcommitã€pushã€mergeç­‰äº‹ä»¶æ—¶ï¼Œæ ¹æ®.gitlab-ci.ymlçš„å®šä¹‰è§¦å‘æµæ°´çº¿  
3ã€æµæ°´çº¿ä¼šè°ƒç”¨gitlab runnerï¼Œåœ¨gitlab runnerä¸­æŒ‰ç…§.gitlab-ci.ymlçš„å®šä¹‰è·‘ä½œä¸š
GitLab CI/CDæµæ°´çº¿è¯­æ³•å‚è€ƒæ–‡æ¡£ï¼š

The .gitlab-ci.yml file
.gitlab-ci.yml keyword reference
.gitlab-ci.yml å…³é”®å­—å‚è€ƒ
GitLabCI-CDæµæ°´çº¿è¯­æ³•

å…¸å‹ç¤ºä¾‹stages: #å¯¹stagesçš„ç¼–æ’  - build  - test  - deployvariables:  DEPLOY_ENV: &quot;dev&quot;ciinit:  tags:    - build  stage: .pre  script:    - echo &quot;Pipeline init first job&quot;ciend:  tags:    - build  stage: .post  script:    - echo &quot;Pipeline end job&quot;before_script:  - echo &quot;Before script section&quot;  - echo &quot;For example you might run an update here or install a build dependency&quot;  - echo &quot;Or perhaps you might print out some debugging details&quot;after_script:  - echo &quot;After script section&quot;  - echo &quot;For example you might do some cleanup here&quot;build:  tags:    - k8s  stage: build  script:    - echo &quot;Do your build here&quot;test1:  tags:    - k8s    stage: test  script:    - echo &quot;Do a test here&quot;    - echo &quot;For example run a test suite&quot;test2:  tags:    - k8s    stage: test  script:    - echo &quot;Do a test here&quot;    - echo &quot;For example run a test suite&quot;deploy:  tags:    - k8s    stage: deploy  variables:    DEPLOY_ENV: &quot;test&quot;  script:    - echo &quot;$&#123;DEPLOY_ENV&#125;&quot;    - echo &quot;Do your deploy here&quot;

stagesé˜¶æ®µæ§åˆ¶
stagesé‡Œå¯ä»¥å®šä¹‰å„ä¸ªstageæ‰§è¡Œçš„å‰åé¡ºåºï¼Œä½†æ˜¯.preå’Œ.posté˜¶æ®µä¸å—å…¶æ§åˆ¶
.preé˜¶æ®µçš„ä½œä¸šæ€»æ˜¯åœ¨æµæ°´çº¿å¼€å§‹æ—¶æ‰§è¡Œ
.posté˜¶æ®µçš„ä½œä¸šæ€»æ˜¯åœ¨æµæ°´çº¿ç»“æŸæ—¶æ‰§è¡Œ
å¦‚æœä¸¤ä¸ªæˆ–è€…å¤šä¸ªä½œä¸šï¼ŒæŒ‡å‘åŒä¸€ä¸ªé˜¶æ®µåç§°ï¼Œåˆ™è¯¥é˜¶æ®µä¸‹çš„æ‰€æœ‰ä½œä¸šéƒ½å¹¶è¡Œè¿è¡Œï¼›å¦‚æœä¸èƒ½å¹¶è¡Œè¿è¡Œï¼Œéœ€è¦æ£€æŸ¥runnerçš„é…ç½®æ–‡ä»¶ä¸­çš„concurrent

variablesç¯å¢ƒå˜é‡ç¯å¢ƒå˜é‡å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šå…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ï¼Œå±€éƒ¨å˜é‡ä¼˜å…ˆçº§é«˜äºå…¨å±€å˜é‡

å…¨å±€å˜é‡æ˜¯æ•´ä¸ªæµæ°´çº¿ç”Ÿæ•ˆçš„ï¼Œå±€éƒ¨å˜é‡æ˜¯ä»…åœ¨ä½œä¸šä¸­ç”Ÿæ•ˆçš„
å…¨å±€å˜é‡å¯ä»¥ä½¿ç”¨CIè‡ªå¸¦çš„é¢„å®šä¹‰å˜é‡ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰å˜é‡
å…¨å±€å˜é‡å®šä¹‰åœ¨å…¨å±€ variables ä¸­ï¼Œä¹Ÿå¯ä»¥å®šä¹‰åœ¨ workflow:rules:variables ä¸­
å±€éƒ¨å˜é‡å®šä¹‰åœ¨ job:variables ä¸­ï¼Œä¹Ÿå¯ä»¥å®šä¹‰åœ¨ job:rules:variables ä¸­

.gitlab-ci.ymlè§£æé¡ºåºä¸ºï¼šå…¨å±€å˜é‡ -&gt; workflowè§„åˆ™ -&gt; jobè§„åˆ™ï¼Œå› æ­¤ï¼šjobä¸­å˜é‡ä¼˜å…ˆçº§ &gt; workflowä¸­å˜é‡ä¼˜å…ˆçº§ &gt; å…¨å±€å˜é‡ä¼˜å…ˆçº§
å¸¸ç”¨å…¨å±€é¢„å®šä¹‰å˜é‡ï¼š



å˜é‡åç§°
GitLab
GitLab Runner
æè¿°



CI
all
0.4
å¯¹CI/CDä¸­çš„æ‰€æœ‰ä½œä¸šå¯è§ï¼Œå€¼ä¸ºtrue


CI_BUILDS_DIR
all
11.10
æ„å»ºæ—¶çš„æœ€é¡¶å±‚ç›®å½•


CI_COMMIT_AUTHOR
13.11
all
æäº¤çš„ä½œè€…ï¼Œæ ¼å¼ä¸ºï¼šåç§°&lt;é‚®ç®±&gt;


CI_COMMIT_BEFORE_SHA
11.2
all
å½“å‰åˆ†æ”¯çš„ä¸Šä¸€ä¸ªæäº¤å“ˆå¸Œå€¼


CI_COMMIT_BRANCH
12.6
0.5
æäº¤çš„åˆ†æ”¯åï¼Œåœ¨åˆå¹¶æµæ°´çº¿å’Œtagæµæ°´çº¿æ—¶ä¸å¯è§


CI_COMMIT_DESCRIPTION
10.8
all
æäº¤çš„æè¿°


CI_COMMIT_MESSAGE
10.8
all
å®Œæ•´çš„æäº¤ä¿¡æ¯


CI_COMMIT_REF_NAME
9.0
all
é¡¹ç›®çš„åˆ†æ”¯åæˆ–tagå


CI_COMMIT_REF_PROTECTED
11.11
all
å¦‚æœä½œä¸šæ­£åœ¨æ„å»ºçš„æ˜¯è¢«ä¿æŠ¤çš„åˆ†æ”¯æˆ–tagï¼Œå€¼ä¸ºtrue


CI_COMMIT_REF_SLUG
9.0
all
CI_COMMIT_REF_NAMEçš„å°å†™å½¢å¼ã€‚


CI_COMMIT_SHA
9.0
all
æäº¤çš„å®Œæ•´å“ˆå¸Œå€¼


CI_COMMIT_SHORT_SHA
11.7
all
8ä¸ªå­—ç¬¦çš„æäº¤å“ˆå¸Œå€¼


CI_COMMIT_TAG
9.0
0.5
æäº¤çš„tagï¼Œä»…åœ¨tagæµæ°´çº¿å¯è§


CI_COMMIT_TIMESTAMP
13.4
all
æäº¤æ—¶çš„æ—¶é—´æˆ³


CI_COMMIT_TITLE
10.8
all
æäº¤çš„æ ‡é¢˜


CI_DEFAULT_BRANCH
12.4
all
é¡¹ç›®çš„é»˜è®¤åˆ†æ”¯


CI_DEPLOY_FREEZE
13.2
all
å½“æµæ°´è¿è¡Œæ˜¯å¤„äºéƒ¨ç½²å†»ç»“é˜¶æ®µæ—¶å¯è§ï¼Œå€¼ä¸ºtrueã€‚


CI_ENVIRONMENT_NAME
8.15
all
å½“å‰ä½œä¸šçš„éƒ¨ç½²ç¯å¢ƒåï¼Œå½“è®¾ç½®äº†environment:name æ—¶å¯è§


CI_ENVIRONMENT_URL
9.3
all
å½“å‰ä½œä¸šçš„éƒ¨ç½²ç¯å¢ƒåœ°å€ï¼Œåªæœ‰è®¾ç½®äº†environment:urlå¯è§


CI_JOB_ID
9.0
all
å½“å‰ä½œä¸šçš„IDï¼Œç³»ç»Ÿå†…å”¯ä¸€


CI_JOB_IMAGE
12.9
12.9
å½“å‰ä½œä¸šä½¿ç”¨çš„Dockeré•œåƒå


CI_JOB_NAME
9.0
0.5
å½“å‰ä½œä¸šåç§°


CI_JOB_STAGE
9.0
0.5
å½“å‰ä½œä¸šæ‰€å±çš„é˜¶æ®µå


CI_PIPELINE_ID
8.10
all
å½“å‰æµæ°´çº¿IDï¼ˆå®ä¾‹çº§ï¼‰ï¼Œç³»ç»Ÿå†…å”¯ä¸€


CI_PIPELINE_SOURCE
10.0
all
æµæ°´çº¿è§¦å‘æ–¹å¼ï¼Œæšä¸¾å€¼ä¸ºpush,web, schedule, api, external, chat, webide,merge_request_event, external_pull_request_event, parent_pipeline, trigger, æˆ–è€… pipeline


CI_PIPELINE_TRIGGERED
all
all
å½“ä½œä¸šæ˜¯ä½¿ç”¨triggerè§¦å‘çš„æ—¶ä¸ºtrue


CI_PIPELINE_URL
11.1
0.5
æµæ°´çº¿è¯¦æƒ…çš„åœ°å€


CI_PIPELINE_CREATED_AT
13.10
all
æµæ°´çº¿åˆ›å»ºæ—¶é—´


CI_PROJECT_DIR
all
all
å­˜æ”¾å…‹éš†é¡¹ç›®çš„å®Œæ•´è·¯å¾„ï¼Œä½œä¸šè¿è¡Œçš„ç›®å½•ã€‚


CI_PROJECT_NAME
8.10
0.5
å½“å‰é¡¹ç›®åç§°ï¼Œä¸åŒ…å«ç»„å


CI_PROJECT_NAMESPACE
8.10
0.5
é¡¹ç›®çš„å‘½åç©ºé—´ï¼ˆç»„åæˆ–ç”¨æˆ·åï¼‰


CI_PROJECT_PATH
8.10
0.5
åŒ…å«é¡¹ç›®åç§°çš„å‘½åç©ºé—´


CI_PROJECT_TITLE
12.4
all
é¡¹ç›®åç§°ï¼ˆç½‘é¡µä¸Šæ˜¾ç¤ºçš„ï¼‰


CI_PROJECT_URL
8.10
0.5
é¡¹ç›®HTTP(S)åœ°å€


CI_RUNNER_TAGS
8.10
0.5
é€—å·åˆ†å‰²çš„runneræ ‡ç­¾åˆ—è¡¨


GITLAB_USER_EMAIL
8.12
all
å¼€å§‹å½“å‰ä½œä¸šçš„ç”¨æˆ·é‚®ç®±


GITLAB_USER_LOGIN
10.0
all
å¼€å§‹å½“å‰ä½œä¸šçš„ç™»å½•ç”¨æˆ·å


GITLAB_USER_NAME
10.0
all
å¼€å§‹å½“å‰ä½œä¸šçš„ç”¨æˆ·å


CI_MERGE_REQUEST_APPROVED ï¼ˆä»…åˆå¹¶æµæ°´çº¿ï¼‰
14.1
all
å½“åˆå¹¶æµæ°´çº¿çš„MRè¢«é€šè¿‡æ—¶å€¼ä¸ºtrue


CI_MERGE_REQUEST_ASSIGNEES ï¼ˆä»…åˆå¹¶æµæ°´çº¿ï¼‰
11.9
all
é€—å·åˆ†å‰²çš„åˆå¹¶è¯·æ±‚æŒ‡æ´¾äººåˆ—è¡¨


CI_MERGE_REQUEST_SOURCE_BRANCH_NAMEï¼ˆä»…åˆå¹¶æµæ°´çº¿ï¼‰
11.6
all
åˆå¹¶è¯·æ±‚ä¸­çš„æºåˆ†æ”¯åç§°


CI_MERGE_REQUEST_TARGET_BRANCH_NAMEï¼ˆä»…åˆå¹¶æµæ°´çº¿ï¼‰
11.6
all
åˆå¹¶è¯·æ±‚ä¸­çš„ç›®æ ‡åˆ†æ”¯åç§°


CI_MERGE_REQUEST_TITLEï¼ˆä»…åˆå¹¶æµæ°´çº¿ï¼‰
11.9
all
åˆå¹¶è¯·æ±‚çš„æ ‡é¢˜


é¢„å®šä¹‰å˜é‡è¯¦æƒ…å‚è€ƒæ–‡æ¡£ï¼š

Predefined variables reference
GitLab CI/CDä¸­çš„å¸¸ç”¨é¢„è®¾å˜é‡

jobå…³é”®å­—
variablesï¼šå®šä¹‰ä½œä¸šä¸­çš„ç¯å¢ƒå˜é‡
tagsï¼šæ ¹æ®æ ‡ç­¾é€‰æ‹©è¿è¡Œä½œä¸šçš„èŠ‚ç‚¹ï¼Œå¦‚æœæœ‰å¤šä¸ªæ ‡ç­¾ï¼Œåˆ™åŒ¹é…å…·æœ‰æ‰€æœ‰æ ‡ç­¾çš„èŠ‚ç‚¹
stageï¼šæŒ‡å®šå½“å‰ä½œä¸šæ‰€å±çš„é˜¶æ®µåç§°
before_scriptï¼šä½œä¸šåœ¨è¿è¡Œå‰æ‰§è¡Œçš„Shellå‘½ä»¤è¡Œ
scriptï¼šä½œä¸šåœ¨è¿è¡Œä¸­æ‰§è¡Œçš„Shellå‘½ä»¤è¡Œï¼Œæ¯ä¸ªä½œä¸šè‡³å°‘è¦åŒ…å«ä¸€ä¸ªscript
after_scriptï¼šä½œä¸šåœ¨è¿è¡Œåæ‰§è¡Œçš„Shellå‘½ä»¤è¡Œ
onlyï¼šä½œä¸šæ§åˆ¶ï¼Œæ»¡è¶³æ¡ä»¶æ—¶æ‰§è¡Œ
exceptï¼šä½œä¸šæ§åˆ¶ï¼Œæ»¡è¶³æ¡ä»¶æ—¶ä¸æ‰§è¡Œ
rulesï¼šä½œä¸šæ§åˆ¶ï¼Œ12.3ä¹‹åå¼•å…¥çš„ç‰¹æ€§ï¼Œä¸èƒ½ä¸only/exceptæ··ç”¨ï¼Œå…·ä½“ç”¨æ³•å‚è€ƒã€jobs:rulesä½œä¸šæ§åˆ¶ã€‘ä¸€èŠ‚

æœ‰äº†before_scriptã€scriptã€å’Œafter_scriptï¼Œå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬æŠŠé€šç”¨çš„è„šæœ¬æŠ½è±¡å‡ºæ¥ã€‚

before_scriptï¼šæœ‰å‘½ä»¤æ‰§è¡Œç»“æœé0ï¼Œjobåˆ¤å®šå¤±è´¥ï¼Œä¸å†æ‰§è¡Œbefore_scriptçš„åç»­å‘½ä»¤ï¼Œè·³è¿‡scriptï¼Œç»§ç»­æ‰§è¡Œafter_script
scriptï¼šæœ‰å‘½ä»¤æ‰§è¡Œç»“æœä¸º0ï¼Œjobåˆ¤å®šå¤±è´¥ï¼Œä¸å†æ‰§è¡Œscriptçš„åç»­å‘½ä»¤ï¼Œç»§ç»­æ‰§è¡Œafter_script
after_scriptï¼šæœ‰å‘½ä»¤æ‰§è¡Œç»“æœé0ï¼Œjobåˆ¤å®šä¸å—å½±å“ï¼Œä¸å†æ‰§è¡Œafter_scriptåç»­å‘½ä»¤

job:rulesä½œä¸šæ§åˆ¶ä½¿ç”¨ job:rules å…³é”®å­—æ¥æ§åˆ¶ä½•æ—¶åˆ›å»ºä½œä¸šã€‚
rulesåŒ…å«ä»¥ä¸‹å­å…³é”®å­—ï¼š

ifï¼šæ¡ä»¶åˆ¤æ–­ï¼Œä¸ºtrueæ—¶å†çœ‹å¯¹åº”çš„å…¶ä»–è§„åˆ™ã€‚
ifçš„è¯­æ³•å’Œbashä¸­çš„ifè¯­æ³•å¾ˆåƒ
ä¸åŒ1ï¼šæ¨¡å¼åŒ¹é…æ—¶æ·»åŠ äº†ä¸¤ä¸ªæ–œæ 
ä¸åŒ2ï¼šå˜é‡ä¸èƒ½åŠ èŠ±æ‹¬å·ï¼ˆç‰ˆæœ¬14.0.5ï¼‰


whenï¼šå‰é¢çš„ä½œä¸šæˆåŠŸæˆ–è€…å¤±è´¥æ—¶è¿è¡Œã€‚on_successï¼ˆé»˜è®¤å€¼ï¼‰å‰é¢ä½œä¸šæˆåŠŸæ—¶æ‰§è¡Œï¼›on_failure å‰é¢ä½œä¸šå¤±è´¥æ—¶æ‰§è¡Œï¼›always æ€»æ˜¯æ‰§è¡Œï¼›manual æ‰‹åŠ¨æ‰§è¡Œï¼›delayed&amp;start_in å»¶è¿Ÿæ‰§è¡Œï¼›never æ°¸ä¸æ‰§è¡Œã€‚
allow_failureï¼šæ˜¯å¦å…è®¸ä½œä¸šå¤±è´¥ï¼Œé»˜è®¤å€¼ä¸ºfalseã€‚å¯ç”¨åï¼Œä½œä¸šå¤±è´¥ä¸ä¼šé˜»å¡æ¥ä¸‹æ¥çš„ä»»åŠ¡ã€‚
retryï¼šä½œä¸šé‡åˆ°é”™è¯¯é‡æ–°è¿è¡Œçš„æ¬¡æ•°ã€‚
timeoutï¼šä½œä¸šè¿è¡Œè¶…æ—¶æ—¶é—´ã€‚
needsï¼šä½œä¸šä¾èµ–æ§åˆ¶ã€‚å½“å‰ä½œä¸šå¯èƒ½åªä¾èµ–å‰ä¸€ä¸ªstageçš„å…¶ä¸­ä¸€ä¸ªä½œä¸šï¼Œå°±ä¸ç”¨ç­‰å‰ä¸€ä¸ªstageçš„ä½œä¸šå…¨éƒ¨å®Œæˆã€‚
parallelï¼šç”Ÿæˆå¤šä¸ªä½œä¸šï¼Œå¹¶è¡Œè¿è¡Œã€‚å€¼åœ¨2-50ä¹‹é—´ã€‚
variablesï¼šå®šä¹‰ç‰¹å®šä½œä¸šæ¡ä»¶ä¸‹çš„å˜é‡ã€‚

å‚è€ƒæ–‡æ¡£ï¼š

GitLabCIç³»åˆ—ä¹‹æµæ°´çº¿è¯­æ³•ç¬¬ä¸‰éƒ¨åˆ†
Choose when to run jobs
é€‰æ‹©ä½•æ—¶è¿è¡Œä½œä¸š
.gitlab-ci.yml å…³é”®å­—å‚è€ƒ - rules

workflow:rulesæµæ°´çº¿æ§åˆ¶ä½¿ç”¨ workflow:rules å…³é”®å­—æ¥æ§åˆ¶ä½•æ—¶åˆ›å»ºæµæ°´çº¿ã€‚workflow:rules å…³é”®å­—åœ¨ä½œä¸šä¹‹å‰è¿›è¡Œè¯„ä¼°ã€‚ä¾‹å¦‚ï¼Œå°†ä½œä¸šé…ç½®ä¸ºé’ˆå¯¹æ ‡ç­¾è¿è¡Œï¼Œä½†å·¥ä½œæµé˜»æ­¢æ ‡ç­¾æµæ°´çº¿ï¼Œåˆ™è¯¥ä½œä¸šæ°¸è¿œä¸ä¼šè¿è¡Œã€‚
rulesåŒ…å«ä»¥ä¸‹å…³é”®å­—ï¼š

ifï¼šæ¡ä»¶åˆ¤æ–­ï¼Œä¸ºtrueæ—¶å†çœ‹å¯¹åº”çš„whenè§„åˆ™ã€‚
whenï¼šå–å€¼neverè¡¨ç¤ºæµæ°´çº¿ä¸è¿è¡Œï¼Œå–å€¼alwaysæˆ–è€…ç¼ºçœè¡¨ç¤ºæµæ°´çº¿è¿è¡Œã€‚
æœ€åä¸€ä¸ªè§„åˆ™çš„ifç¼ºçœï¼Œwhen: alwaysè¡¨ç¤ºå…¶ä»–æ‰€æœ‰æµæ°´çº¿ç±»å‹éƒ½è¿è¡Œã€‚
æœ€åä¸€ä¸ªè§„åˆ™ä¸æ˜¯when: alwaysï¼Œè¡¨ç¤ºå…¶ä»–æ‰€æœ‰æµæ°´çº¿ç±»å‹éƒ½ä¸è¿è¡Œã€‚


variablesï¼šå®šä¹‰ç‰¹å®šæµæ°´çº¿æ¡ä»¶çš„å˜é‡ï¼ˆå¼•å…¥äº13.11ç‰ˆæœ¬ï¼‰ã€‚ä¾‹å¦‚ä¸åŒåˆ†æ”¯ï¼ŒåŒä¸€ä¸ªå˜é‡å¯ä»¥å®šä¹‰ä¸åŒçš„å€¼ã€‚

å‚è€ƒæ–‡æ¡£ï¼š

GitLab CI/CD workflow å…³é”®å­—
.gitlab-ci.yml å…³é”®å­—å‚è€ƒ - workflow
Interaction between workflow:rules and rules

includeä½¿ç”¨ include åœ¨ CI/CD é…ç½®ä¸­åŒ…å«å¤–éƒ¨ YAML æ–‡ä»¶ã€‚ æ‚¨å¯ä»¥å°†ä¸€ä¸ªé•¿çš„ .gitlab-ci.yml æ–‡ä»¶æ‹†åˆ†ä¸ºå¤šä¸ªæ–‡ä»¶ä»¥æé«˜å¯è¯»æ€§ï¼Œæˆ–å‡å°‘åŒä¸€é…ç½®åœ¨å¤šä¸ªä½ç½®çš„é‡å¤ã€‚
æ‚¨è¿˜å¯ä»¥å°†æ¨¡æ¿æ–‡ä»¶å­˜å‚¨åœ¨ä¸­å¤®ä»“åº“ä¸­å¹¶å°†å®ƒä»¬åŒ…å«åœ¨é¡¹ç›®ä¸­ã€‚
include æ–‡ä»¶è¯´æ˜ï¼š

ä¸ .gitlab-ci.yml æ–‡ä»¶ä¸­çš„é‚£äº›åˆå¹¶ã€‚
æ— è®º include å…³é”®å­—çš„ä½ç½®å¦‚ä½•ï¼Œå§‹ç»ˆå…ˆæ±‚å€¼ï¼Œç„¶åä¸ .gitlab-ci.yml æ–‡ä»¶çš„å†…å®¹åˆå¹¶ã€‚

include å­é”®ï¼š

include:local
include:projectï¼Œinclude:fileï¼Œinclude:ref
include:remote
include:template

æ³¨æ„ï¼šå¦‚æœincludeäº†å¤šä¸ªæ–‡ä»¶ä¸­éƒ½åŒ…å«stagesï¼Œé‚£ä¹ˆæœ€åä¸€ä¸ªæ–‡ä»¶ä¸­çš„stagesä¼šç”Ÿæ•ˆã€‚
å‚è€ƒæ–‡æ¡£ï¼šgitlab-ci - include
extendsä½¿ç”¨ extends æ¥é‡ç”¨é…ç½® sectionã€‚å®ƒæ˜¯ YAML é”šç‚¹ çš„æ›¿ä»£æ–¹æ¡ˆï¼Œå¹¶ä¸”æ›´åŠ çµæ´»å’Œå¯è¯»ã€‚
å…³é”®å­—ç±»å‹ï¼šä½œä¸šå…³é”®å­—ã€‚æ‚¨åªèƒ½å°†å…¶ç”¨ä½œä½œä¸šçš„ä¸€éƒ¨åˆ†ã€‚
å¯èƒ½çš„è¾“å…¥ï¼š

æµæ°´çº¿ä¸­å¦ä¸€ä¸ªä½œä¸šçš„åç§°ã€‚
æµæ°´çº¿ä¸­å…¶ä»–ä½œä¸šçš„åç§°åˆ—è¡¨ï¼ˆæ•°ç»„ï¼‰ã€‚

æ³¨æ„ï¼šextendsçˆ¶ä½œä¸šæ—¶ï¼Œå¦‚æœä¸æƒ³æ‰§è¡Œçˆ¶ä½œä¸šï¼Œé‚£ä¹ˆçˆ¶ä½œä¸šçš„åç§°åº”è¯¥ä»¥ç‚¹.å¼€å¤´ã€‚
å‚è€ƒæ–‡æ¡£ï¼šgitlab-ci - extends
job:servicesä½¿ç”¨serviceså¯ä»¥æŒ‡å®šjobè¿è¡Œæ‰€éœ€çš„æœåŠ¡é•œåƒã€‚GitLab CI/CDä¼šä¸ºæ¯ä¸ªä»»åŠ¡åˆ›å»ºä¸€ä¸ªDockerç½‘ç»œï¼Œå¹¶ä¸”æŠŠä»»åŠ¡å®¹å™¨å’ŒæœåŠ¡å®¹å™¨éƒ½è¿æ¥åˆ°è¿™ä¸ªç½‘ç»œä¸Šã€‚æœåŠ¡å®¹å™¨çš„åˆ«åå°±æ˜¯å®ƒåœ¨è¿™ä¸ªç½‘ç»œä¸Šçš„ä¸»æœºåï¼Œæ‰€ä»¥ä»»åŠ¡å®¹å™¨å¯ä»¥é€šè¿‡åˆ«åæ¥è®¿é—®æœåŠ¡å®¹å™¨æä¾›çš„ç«¯å£ã€‚
ä½¿ç”¨Dockeræ‰§è¡Œå™¨çš„è¯ï¼Œä»»åŠ¡å’ŒæœåŠ¡éƒ½è·‘åœ¨å®¹å™¨ä¸­ã€‚ä½¿ç”¨Shellæ‰§è¡Œå™¨çš„è¯ï¼Œä»»åŠ¡è·‘åœ¨æ‰§è¡Œå™¨æ‰€åœ¨çš„æœºå™¨ä¸Šï¼ŒæœåŠ¡è·‘åœ¨å®¹å™¨ä¸­ã€‚åŒæ—¶ï¼Œæ‰§è¡Œå™¨æ‰€åœ¨æœºå™¨éœ€è¦å®‰è£…Dockerã€‚
å‚è€ƒæ–‡æ¡£ï¼š

gitlab-ci - services
Available settings for services
Define services in the .gitlab-ci.yml file

job:artifactsjob:artifactsçš„ä½œç”¨æ˜¯å°†Jobæ‰§è¡Œåç”Ÿæˆçš„æ–‡ä»¶æˆ–ç›®å½•å­˜å‚¨åœ¨GitLabæœåŠ¡å™¨ä¸Šï¼Œä¾›åç»­çš„Jobæˆ–ç”¨æˆ·ä¸‹è½½å’Œä½¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡UIæˆ–APIæ¥ä¸‹è½½Job artifactsã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒJob artifactsçš„å¤§å°ä¸èƒ½è¶…è¿‡é…ç½®çš„æœ€å¤§å€¼ã€‚
artifactså¸¸ç”¨å…³é”®å­—ï¼š

pathsï¼šæ‰€æœ‰æŒ‡å®šçš„è·¯å¾„ä¸­çš„æ–‡ä»¶ï¼Œéƒ½ä¼šè¢«æ”¾å…¥artifactsç›®å½•ã€‚ç”¨äºæŒ‡å®šä»»æ„ç±»å‹çš„Job artifactï¼Œä¾‹å¦‚ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€æ—¥å¿—æ–‡ä»¶ã€å›¾ç‰‡æ–‡ä»¶ç­‰ï¼Œè¿™äº›ç±»å‹çš„Job artifactå¯ä»¥è¢«åç»­çš„Jobæˆ–ç”¨æˆ·ä¸‹è½½å’Œä½¿ç”¨ã€‚åªæœ‰åœ¨Jobæ‰§è¡ŒæˆåŠŸæ—¶æ‰ä¼šä¸Šä¼ ï¼Œé™¤éæŒ‡å®šäº†when:alwayså‚æ•°ã€‚
nameï¼šæŒ‡å®šåˆ¶å“åç§°ï¼Œé»˜è®¤åˆ¶å“åç§°æ˜¯artifactsï¼Œä¸‹è½½æ—¶å¯¹åº”artifacts.zipã€‚
excludeï¼šæ’é™¤ä¸è¦æ”¾å…¥artifactsç›®å½•çš„æ–‡ä»¶ã€‚
expire_inï¼šåˆ¶å“çš„è¿‡æœŸæ—¶é—´ï¼Œé»˜è®¤30å¤©ã€‚æ¯å°æ—¶ä¼šè‡ªåŠ¨åˆ é™¤ä¸€æ¬¡è¿‡æœŸåˆ¶å“ã€‚
expose_asï¼šè¦åœ¨åˆ¶å“ä¸‹è½½é“¾æ¥çš„UIä¸­æ˜¾ç¤ºçš„åç§°ã€‚
publicï¼šåˆ¶å“æ˜¯å¦å¯ä»¥å…¬å¼€ä¸‹è½½ã€‚
reportsï¼šç”¨äºæŒ‡å®šä¸€äº›ç‰¹å®šç±»å‹çš„Job artifactï¼Œä¾‹å¦‚JUnitæµ‹è¯•æŠ¥å‘Šã€ä»£ç è¦†ç›–ç‡æŠ¥å‘Šã€æ€§èƒ½æµ‹è¯•æŠ¥å‘Šç­‰ï¼Œè¿™äº›æŠ¥å‘Šæ˜¯å¯ä»¥åœ¨GitLabçš„æµæ°´çº¿è§†å›¾ã€æ€§èƒ½ä»ªè¡¨ç›˜å’Œå®‰å…¨ä»ªè¡¨ç›˜ä¸­æŸ¥çœ‹çš„ã€‚æ€»æ˜¯ä¸Šä¼ åˆ¶å“ï¼Œæ— è®ºJobæ‰§è¡ŒæˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚
untrackedï¼šæ˜¯å¦æŠŠ.gitignoreä¸­å¿½ç•¥çš„æ–‡ä»¶ä¹Ÿä½œä¸ºåˆ¶å“ï¼Œé»˜è®¤falseï¼Œä¸åŒ…å«è¢«å¿½ç•¥çš„æ–‡ä»¶ã€‚
whenï¼šä»€ä¹ˆæ—¶å€™ä¸Šä¼ åˆ¶å“ã€‚å–å€¼on_successã€on_failureå’Œalwaysï¼Œåªå¯¹pathsç”Ÿæ•ˆï¼Œreportsä¸€å®šä¼šä¸Šä¼ ã€‚

ä¸‹è½½åˆ¶å“çš„æ–¹æ³•ï¼šè¿›å…¥CI/CD Pipelinesé¡µé¢ï¼Œæ‰¾åˆ°Jobå¯¹åº”çš„Pipelineï¼Œæœ€å³è¾¹ä¸‰ä¸ªç‚¹ï¼Œç‚¹å‡»ä¸‹è½½artifactsã€‚
å‚è€ƒæ–‡æ¡£ï¼š

gitlab-ci - artifacts

job:coverageå°†è¦†ç›–ç‡ä¸è‡ªå®šä¹‰æ­£åˆ™è¡¨è¾¾å¼ä¸€èµ·ä½¿ç”¨ï¼Œå¯ä»¥é…ç½®å¦‚ä½•ä»ä½œä¸šè¾“å‡ºä¸­æå–ä»£ç è¦†ç›–ç‡ã€‚å¦‚æœä½œä¸šè¾“å‡ºä¸­è‡³å°‘æœ‰ä¸€è¡Œä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œåˆ™è¦†ç›–ç‡å°†æ˜¾ç¤ºåœ¨UIä¸­ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

gitlab-ci - coverage
Test coverage visualization

å¸¸ç”¨é…ç½®å½“æµæ°´çº¿æˆåŠŸæ—¶åˆå¹¶åˆ†æ”¯1ã€é¡¹ç›®é…ç½®Project -&gt; Settings -&gt; General -&gt; Merge requests -&gt; Expand -&gt; Merge checks -&gt; å‹¾é€‰ Pipelines must succeed
2ã€gitlab-cié…ç½®gitlab-cié…ç½®æ—¶ï¼Œè¦ä¿è¯workflowå’Œjobä¸­éƒ½å…è®¸merge requestsè§¦å‘pipelineã€‚
3ã€è§¦å‘åˆå¹¶è¯·æ±‚gitlabé¡µé¢ä¸Šå‘èµ·ä¸€æ¬¡åˆå¹¶è¯·æ±‚ï¼Œæˆ–è€…ä½¿ç”¨glabå‘èµ·åˆå¹¶è¯·æ±‚
4ã€æµæ°´çº¿æˆåŠŸæ—¶è‡ªåŠ¨åˆå¹¶æ‰“å¼€åˆå¹¶ä»£ç çš„é¡µé¢ï¼Œå½“pipelineè¿è¡Œæ—¶ï¼Œç‚¹å‡» Merge when pipeline succeeds
å‚è€ƒæ–‡æ¡£ï¼š

å½“æµæ°´çº¿æˆåŠŸæ—¶åˆå¹¶
Configuring pipelines for merge requests
é…ç½®Gitlabåˆå¹¶æµæ°´çº¿
Gitlab å‘èµ·åˆå¹¶è¯·æ±‚ï¼Œä¸€è¡Œå‘½ä»¤å°±æå®šï¼

Gitlab Runnerå‚è€ƒæ–‡æ¡£ã€ŠGitLab Runnerå…¥é—¨ç¯‡ã€‹
TODO
é˜…è¯»The .gitlab-ci.yml file

]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>cicd</tag>
        <tag>gitlab</tag>
      </tags>
  </entry>
  <entry>
    <title>ClickHouseå…¥é—¨ç¯‡</title>
    <url>/dev-clickhouse-start/</url>
    <content><![CDATA[ClickHouseç®€ä»‹
ClickHouse æ˜¯ä¸€ä¸ªç”¨äºè”æœºåˆ†æ(OLAP)çš„åˆ—å¼æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ(DBMS)ã€‚

å‚è€ƒæ–‡æ¡£ï¼š 

GitHub - ClickHouse
ä»€ä¹ˆæ˜¯ClickHouseï¼Ÿ
ClickHouseæ·±åº¦æ­ç§˜



ClickHouseåŸºç¡€æ¦‚å¿µåœ¨clickhouseé›†ç¾¤ä¸­ï¼Œclickhouseçš„è¡¨æœ‰ä¸¤ç§ç±»å‹ï¼šä¸€ç§æ˜¯æœ¬åœ°è¡¨ï¼Œä¸€ç§æ˜¯åˆ†å¸ƒå¼è¡¨ã€‚åœ¨å•æœºæƒ…å†µä¸‹ï¼Œä½¿ç”¨æœ¬åœ°è¡¨å°±å¯ä»¥äº†ï¼›åœ¨é›†ç¾¤æƒ…å†µä¸‹ï¼Œä¸€èˆ¬ä½¿ç”¨åˆ†å¸ƒå¼è¡¨ã€‚chçš„å•æœºå’Œåˆ†å¸ƒå¼çš„å¢åˆ æŸ¥æ”¹å·®å¼‚å¾ˆå¤§ï¼Œä½¿ç”¨çš„æ—¶å€™éœ€è¦æ³¨æ„ã€‚åˆ†å¸ƒå¼è¡¨é¦–å…ˆéœ€è¦åœ¨é›†ç¾¤æ‰€æœ‰èŠ‚ç‚¹ä¸Šåˆ›å»ºæœ¬åœ°è¡¨ï¼Œç„¶ååœ¨æœ¬åœ°è¡¨çš„åŸºç¡€ä¸Šåˆ›å»ºåˆ†å¸ƒå¼è¡¨ï¼ˆæœ¬è´¨æ˜¯åˆ†å¸ƒå¼è§†å›¾ï¼‰ï¼Œé€šè¿‡åˆ†å¸ƒå¼è¡¨å¼•æ“èšåˆæœ¬åœ°è¡¨å¼•æ“çš„æ•°æ®ã€‚
ä¸€èˆ¬å†™å…¥ä½¿ç”¨æœ¬åœ°è¡¨ï¼ŒæŸ¥è¯¢ä½¿ç”¨åˆ†å¸ƒå¼è¡¨ã€‚
å†™åˆ†å¸ƒå¼è¡¨çš„ä¼˜ç‚¹ï¼šå¯ä»¥è®©ClickHouseæ§åˆ¶æ•°æ®åˆ°åˆ†ç‰‡çš„è·¯ç”±ã€‚å†™åˆ†å¸ƒå¼è¡¨çš„ç¼ºç‚¹ï¼š

æ•°æ®æ˜¯å…ˆå†™åˆ°ä¸€ä¸ªåˆ†å¸ƒå¼è¡¨çš„å®ä¾‹ä¸­å¹¶ç¼“å­˜èµ·æ¥ï¼Œå†é€æ¸åˆ†å‘åˆ°å„ä¸ªåˆ†ç‰‡ä¸Šå»ï¼Œå®é™…æ˜¯åŒå†™äº†æ•°æ®ï¼ˆå†™å…¥æ”¾å¤§ï¼‰ï¼Œæµªè´¹èµ„æºï¼›
æ•°æ®å†™å…¥é»˜è®¤æ˜¯å¼‚æ­¥çš„ï¼ŒçŸ­æ—¶é—´å†…å¯èƒ½é€ æˆä¸ä¸€è‡´ï¼›
ç›®æ ‡è¡¨ä¸­ä¼šäº§ç”Ÿè¾ƒå¤šçš„å°partsï¼Œä½¿mergeï¼ˆå³compactionï¼‰è¿‡ç¨‹å‹åŠ›å¢å¤§ã€‚

å†™æœ¬åœ°è¡¨ä¼˜ç‚¹ï¼šåŒæ­¥æ“ä½œï¼Œæ›´å¿«ï¼Œpartsçš„å¤§å°ä¹Ÿæ¯”è¾ƒåˆé€‚ã€‚å†™æœ¬åœ°è¡¨ç¼ºç‚¹ï¼šè¦æ±‚åº”ç”¨å±‚é¢å¤–å®ç°shardingå’Œè·¯ç”±é€»è¾‘ï¼Œå¦‚è½®è¯¢æˆ–è€…éšæœºç­‰ã€‚
è¡¨å¼•æ“ç‰¹æ®Šè¯´æ˜ï¼š

20ç‰ˆæœ¬çš„chåªæœ‰ä½¿ç”¨äº†replicatedå¼€å¤´çš„engineçš„å¼•æ“çš„è¡¨ï¼Œæ‰èƒ½å¤Ÿåœ¨æ‹¥æœ‰on cluster xxxæ¡ä»¶çš„ddlè¯­å¥ä¸­è¿›è¡Œé›†ç¾¤æ›´æ–°ï¼›å…¶ä»–engineçš„è¡¨ï¼Œåªèƒ½å¤Ÿæ¯ä¸ªnodeè¿›è¡Œupdateï¼›21ç‰ˆæœ¬ä¿®å¤äº†è¿™ä¸ªbugã€‚
ç›®å‰é˜¿é‡Œäº‘20ç‰ˆæœ¬çš„chçš„mergeTreeå¼•æ“æ˜¯æ”¯æŒon cluster xxxè¿™æ ·çš„ddlè¯­å¥çš„ã€‚

å‚è€ƒæ–‡æ¡£ï¼š

ClickHouse - åŸºæœ¬æ¦‚å¿µ
ClickHouseåˆ›å»ºåˆ†å¸ƒå¼è¡¨
ClickHouseå¸¸è§é—®é¢˜
ã€ŒClickhouseç³»åˆ—ã€åˆ†å¸ƒå¼è¡¨&amp;æœ¬åœ°è¡¨è¯¦è§£
CK åˆ†å¸ƒå¼è¡¨å’Œæœ¬åœ°è¡¨
clickhouseå•æœºçš„å¢åˆ æŸ¥è¯¢å®ç°æ–¹æ¡ˆå’Œclickhouseåˆ†å¸ƒå¼éƒ¨ç½²çš„å¢åˆ æŸ¥æ”¹å®ç°æ–¹æ¡ˆ
ClickHouse - Data Replication
clickhouseåˆ é™¤ReplicatedMergeTreeå¤åˆ¶è¡¨åï¼Œæ–°å»ºåŒåè¡¨å¤±è´¥åŸå› åˆ†æ

å®‰è£…ClickHouseæœåŠ¡ç«¯å‚è€ƒæ–‡æ¡£ã€ŠK8Sä¸­å®‰è£…é…ç½®ClickHouseã€‹
å®‰è£…ClickHouseå®¢æˆ·ç«¯dbeaverä½¿ç”¨dbeaverï¼Œå¯ä»¥å›¾å½¢åŒ–è¿æ¥clickhouseã€‚å®‰è£…æ–¹æ³•ï¼šä¸‹è½½å®‰è£…åŒ…ï¼ŒåŒå‡»å®‰è£…ã€‚
clickhouse-clientä½¿ç”¨clickhouse-clientï¼Œå¯ä»¥å‘½ä»¤è¡Œè¿æ¥clickhouseã€‚
å®‰è£…æ–¹æ³•å‚è€ƒClickHouse - å®‰è£…
centos7ä¸­å®‰è£…å®‰è£…ï¼š
wget https://packages.clickhouse.com/rpm/stable/clickhouse-common-static-21.8.15.7-2.x86_64.rpmwget https://packages.clickhouse.com/rpm/stable/clickhouse-client-21.8.15.7-2.noarch.rpmrpm -ivh clickhouse-common-static-21.8.15.7-2.x86_64.rpmrpm -ivh clickhouse-client-21.8.15.7-2.noarch.rpm

æµ‹è¯•ï¼š
clickhouse-client -h 192.168.56.101 --port 9000 \-u default --password xxx \--query &quot;select hostName()&quot;

å¦‚æœæ‰§è¡ŒæŠ¥é”™ï¼šCode: 102. DB::NetException: Unexpected packet from server 192.168.56.101:9000 (expected Hello or Exception, got Unknown packet). (UNEXPECTED_PACKET_FROM_SERVER)
è¯·æ£€æŸ¥clickhouseæœåŠ¡ç«¯ç«¯å£æ˜¯å¦æ­£ç¡®ï¼Œæ”¹æˆæ­£ç¡®çš„ç«¯å£ã€‚
macosä¸­å®‰è£…å®‰è£…ï¼š
curl -O &#x27;https://builds.clickhouse.com/master/macos/clickhouse&#x27; &amp;&amp; chmod a+x ./clickhouse

æµ‹è¯•ï¼š
./clickhouse client -h 192.168.56.101 --port 9000 \-u default --password xxx \--query &quot;select hostName()&quot;


ä½¿ç”¨ClickHouseä½¿ç”¨åˆ†å¸ƒå¼è¡¨1ã€æ–°å»ºåˆ†å¸ƒå¼è¡¨
-- æŸ¥çœ‹å®å˜é‡select * from `system`.macros;-- æŸ¥çœ‹clusterselect * from `system`.clusters;-- åˆ›å»ºæœ¬åœ°è¡¨-- create table `default`.optest on cluster cluster (a UInt64) Engine = MergeTree() order by tuple();create table `default`.optest on cluster cluster (a UInt64) Engine = ReplicatedMergeTree(&#x27;/clickhouse/tables/&#123;shard&#125;/default.optest&#x27;,&#x27;&#123;replica&#125;&#x27;) order by tuple();-- åˆ›å»ºæœ¬åœ°è¡¨å¯¹åº”çš„åˆ†å¸ƒå¼è¡¨create table `default`.optest_dis on cluster cluster as optest Engine = Distributed(cluster, default, optest, cityHash64(a));-- åˆ é™¤æœ¬åœ°è¡¨drop table `default`.optest on cluster cluster;-- è¦ç­‰å¾…480sæ‰ä¼šåˆ é™¤zkä¸­çš„æ•°æ®

order byæŒ‡å®šçš„å­—æ®µæ˜¯å¯¹åˆ†åŒºå†…æ•°æ®è¿›è¡Œæ’åºï¼Œåœ¨ReplicatedMergeTreeå¼•æ“ä¸‹ï¼Œä¼šå¯¹ç›¸é‚»çš„é‡å¤æ•°æ®è¿›è¡Œåˆ é™¤ã€‚
2ã€å¢åˆ æŸ¥æ”¹
INSERT INTO `default`.optest(a) values(10);SELECT * FROM `default`.optest_dis;ALTER TABLE `default`.optest  on cluster cluster UPDATE `a` = &#x27;11&#x27; WHERE `a` = &#x27;10&#x27;;SELECT * FROM `default`.optest_dis;ALTER TABLE `default`.optest on cluster cluster DELETE WHERE `a`=&#x27;11&#x27;;SELECT * FROM `default`.optest_dis;

æ›´æ–°å»¶è¿Ÿå¤„ç†ä»ä½¿ç”¨åœºæ™¯æ¥è¯´ï¼ŒClickhouseæ˜¯ä¸ªåˆ†æå‹æ•°æ®åº“ã€‚è¿™ç§åœºæ™¯ä¸‹ï¼Œæ•°æ®ä¸€èˆ¬æ˜¯ä¸å˜çš„ï¼Œå› æ­¤Clickhouseå¯¹updateã€deleteçš„æ”¯æŒæ˜¯æ¯”è¾ƒå¼±çš„ï¼Œå®é™…ä¸Šå¹¶ä¸æ”¯æŒæ ‡å‡†çš„updateã€deleteæ“ä½œã€‚
Clickhouseé€šè¿‡alteræ–¹å¼å®ç°æ›´æ–°ã€åˆ é™¤ï¼Œå®ƒæŠŠupdateã€deleteæ“ä½œå«åšmutation(çªå˜)ã€‚
æ ‡å‡†SQLçš„æ›´æ–°ã€åˆ é™¤æ“ä½œæ˜¯åŒæ­¥çš„ï¼Œå³å®¢æˆ·ç«¯è¦ç­‰æœåŠ¡ç«¯åå›æ‰§è¡Œç»“æœï¼ˆé€šå¸¸æ˜¯intå€¼ï¼‰ï¼›è€ŒClickhouseçš„updateã€deleteæ˜¯é€šè¿‡å¼‚æ­¥æ–¹å¼å®ç°çš„ï¼Œå½“æ‰§è¡Œupdateè¯­å¥æ—¶ï¼ŒæœåŠ¡ç«¯ç«‹å³åå›ï¼Œä½†æ˜¯å®é™…ä¸Šæ­¤æ—¶æ•°æ®è¿˜æ²¡å˜ï¼Œè€Œæ˜¯æ’é˜Ÿç­‰ç€ã€‚
ClickHouseæœ¬èº«å¯¹updateçš„æ‰§è¡Œæ˜¯ä½æ•ˆçš„ï¼Œå› ä¸ºClickHouseçš„MergeTreeå­˜å‚¨ä¸€æ—¦ç”Ÿæˆä¸€ä¸ªData Partï¼Œè¿™ä¸ªPartå°±ä¸æ”¯æŒæ›´æ”¹ï¼Œè€Œæ˜¯éœ€è¦åˆ é™¤æ—§Part, é‡å†™æ•´ä¸ªPartã€‚æ‰€ä»¥ä»MergeTreeå­˜å‚¨å†…æ ¸å±‚é¢ï¼ŒClickHouseå°±ä¸æ“…é•¿åšæ•°æ®æ›´æ–°åˆ é™¤æ“ä½œã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ClickHouseå¤šç§å®æ—¶æ›´æ–°æ–¹æ³•æ€»ç»“
clickhouseæ•°æ®å®æ—¶æ›´æ–°å®ç°çš„ä¸‰ç§æ–¹å¼
Clickhouseä¸­update/deleteçš„ä½¿ç”¨

mutations_syncä½¿ç”¨mutations_syncå‚æ•°ï¼Œæ˜¯æœ€ç®€å•çš„æ–¹æ³•ã€‚æ–¹æ³•ä¸€ï¼šå®¢æˆ·ç«¯å’Œclickhouseå»ºç«‹è¿æ¥æ—¶ï¼Œæ·»åŠ å‚æ•°mutations_sync=2æ–¹æ³•äºŒï¼šæ‰§è¡Œsqlæ—¶ï¼Œæ·»åŠ å‚æ•°settings mutations_sync=2æ–¹æ³•ä¸‰ï¼šä¿®æ”¹clickhouseæœåŠ¡ç«¯é…ç½®ï¼Œè®¾ç½®mutations_sync=2
pythonå®¢æˆ·ç«¯è¿æ¥å‚æ•°ï¼š
ck_config = &#123;  &quot;host&quot;: ck_host,   &quot;port&quot;: ck_port,   &quot;user&quot;: ck_user,   &quot;password&quot;: ck_pwd,   &quot;settings&quot;: &#123;&quot;mutations_sync&quot;: &quot;2&quot;&#125;&#125;

ä½†æ˜¯ï¼Œå¦‚æœå­˜åœ¨å¤§é‡æ›´æ–°ï¼Œè¿™ç§æ–¹æ³•ä¼šå¤§é‡é‡å»ºPartï¼Œæ•ˆç‡ä¼šå¾ˆä½ã€‚
ReplacingMergeTreeReplacingMergeTree + INSERT + Final å¯ä»¥å®ç°è™šæ‹Ÿæ›´æ–°ï¼Œä»¥insertä»£æ›¿alteræ“ä½œï¼Œæ¯æ¬¡selectæ—¶éƒ½æ‹‰å–æœ€æ–°ä¸€æ¡æ•°æ®ã€‚å½“æ‰§è¡Œoptimizeæ—¶ï¼Œè€çš„æ•°æ®æ‰ä¼šè¢«åˆ é™¤ã€‚
CREATE TABLE tb_test_replacing(ts DateTime,uid String,biz String) ENGINE = ReplacingMergeTree(ts) ORDER BY (ts) SETTINGS index_granularity = 8192;INSERT INTO tb_test_replacing VALUES (&#x27;2019-06-07 20:01:01&#x27;, &#x27;c&#x27;, &#x27;c1&#x27;);INSERT INTO tb_test_replacing VALUES (&#x27;2019-06-07 20:01:01&#x27;, &#x27;c&#x27;, &#x27;c2&#x27;);SELECT * FROM tb_test_replacing;SELECT * FROM tb_test_replacing FINAL;optimize table tb_test_replacing;SELECT * FROM tb_test_replacing;

ä»MySQLåŒæ­¥æ•°æ®åˆ°ClickHouseClickHouseå®˜æ–¹å·¥å…·set allow_experimental_database_materialize_mysql = 1;select value from system.settings where name = &#x27;allow_experimental_database_materialize_mysql&#x27;;CREATE DATABASE db1_mysqlENGINE = MaterializeMySQL(  &#x27;mysql-host.domain.com:3306&#x27;,  &#x27;db1&#x27;,  &#x27;clickhouse_user&#x27;,  &#x27;ClickHouse_123&#x27;);

å‚è€ƒæ–‡æ¡£ï¼š

Replicate a MySQL Database in ClickHouse
Integrating MySQL with ClickHouse
[experimental] MaterializedMySQL
MaterializeMySQLå¼•æ“
ClickHouseå’Œä»–çš„æœ‹å‹ä»¬ï¼ˆ9ï¼‰MySQLå®æ—¶å¤åˆ¶ä¸å®ç°

æ³¨æ„ï¼šå®˜æ–¹æ–‡æ¡£ä¸­çš„materializedï¼Œéœ€è¦æ”¹æˆmaterializeã€‚
MaterializeMySQLåŒæ­¥åŸç†ï¼ˆChatGPTï¼‰ä½¿ç”¨ MaterializeMySQL å¼•æ“åŒæ­¥æ•°æ®æ—¶ï¼Œé¦–å…ˆä¼šè¿›è¡Œä¸€æ¬¡å…¨é‡åŒæ­¥ï¼Œç„¶åå†è¿›è¡Œå¢é‡åŒæ­¥ã€‚
å…¨é‡åŒæ­¥å…¨é‡åŒæ­¥çš„è¿‡ç¨‹ï¼š
1ã€å»ºç«‹è¿æ¥ï¼šé¦–å…ˆéœ€è¦å»ºç«‹åˆ° MySQL æœåŠ¡å™¨çš„è¿æ¥ï¼Œæä¾›ä¸»æœºåã€ç«¯å£ã€ç”¨æˆ·åå’Œå¯†ç ã€‚
2ã€åˆ›å»ºæ•°æ®åº“ï¼šåœ¨ ClickHouse ä¸­åˆ›å»ºä¸€ä¸ªä½¿ç”¨ MaterializeMySQL å¼•æ“çš„æ•°æ®åº“ã€‚è¿™å°†è‡ªåŠ¨è§¦å‘å…¨é‡åŒæ­¥è¿‡ç¨‹ã€‚
3ã€è·å–æ•°æ®è¡¨ç»“æ„ï¼šClickHouse ä¼šä» MySQL æ•°æ®åº“è·å–è¡¨çš„ç»“æ„ä¿¡æ¯ï¼ŒåŒ…æ‹¬åˆ—åã€æ•°æ®ç±»å‹ç­‰ï¼Œå¹¶åœ¨ ClickHouse ä¸­åˆ›å»ºç›¸åº”çš„è¡¨ç»“æ„ã€‚
4ã€å¯¼å‡ºæ•°æ®ï¼šClickHouse ä¼šä» MySQL æ•°æ®åº“å¯¼å‡ºæ‰€æœ‰è¡¨çš„æ•°æ®ã€‚è¿™ä¸€è¿‡ç¨‹é€šå¸¸ä½¿ç”¨ mysqldump å·¥å…·æˆ–ç±»ä¼¼æ–¹æ³•æ¥å®Œæˆã€‚
5ã€å¯¼å…¥æ•°æ®ï¼šå°†å¯¼å‡ºçš„æ•°æ®å¯¼å…¥åˆ° ClickHouse ä¸­ç›¸åº”çš„è¡¨ä¸­ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ•°æ®å¯èƒ½éœ€è¦è¿›è¡Œè½¬æ¢ï¼Œä»¥ä¾¿ä¸ ClickHouse çš„æ•°æ®æ ¼å¼ç›¸åŒ¹é…ã€‚
6ã€å¯åŠ¨å¢é‡åŒæ­¥ï¼šå®Œæˆå…¨é‡åŒæ­¥åï¼ŒClickHouse ä¼šè‡ªåŠ¨å¼€å§‹ç›‘å¬ MySQL æœåŠ¡å™¨çš„äºŒè¿›åˆ¶æ—¥å¿—ï¼Œä»¥å®æ—¶æ•è·å’Œåº”ç”¨æ•°æ®æ›´æ”¹ã€‚
å¢é‡åŒæ­¥ä½¿ç”¨ClickHouseçš„MaterializeMySQLå¼•æ“å¢é‡åŒæ­¥æ•°æ®çš„åŸç†ä¸»è¦åŸºäºMySQLçš„äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆBinary Logï¼Œç®€ç§°binlogï¼‰ã€‚äºŒè¿›åˆ¶æ—¥å¿—æ˜¯MySQLç”¨äºè®°å½•æ‰€æœ‰æ›´æ”¹ï¼ˆå¦‚æ•°æ®ä¿®æ”¹å’Œè¡¨ç»“æ„å˜æ›´ï¼‰çš„æ—¥å¿—æ–‡ä»¶ã€‚binlogæ˜¯ä¸€ç§è¡Œçº§åˆ«çš„æ—¥å¿—è®°å½•æ ¼å¼ï¼ŒåŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯æ¥é‡æ”¾æ‰€æœ‰å·²æ‰§è¡Œçš„æ•°æ®æ›´æ”¹ã€‚
ä»¥ä¸‹æ˜¯MaterializeMySQLå¼•æ“åŒæ­¥æ•°æ®çš„ä¸»è¦æ­¥éª¤ï¼š
1ã€è¿æ¥åˆ° MySQLï¼šé¦–å…ˆï¼ŒClickHouse éœ€è¦è¿æ¥åˆ° MySQL æœåŠ¡å™¨ã€‚ä¸ºæ­¤ï¼Œéœ€è¦æä¾› MySQL æœåŠ¡å™¨çš„è¿æ¥ä¿¡æ¯ï¼Œå¦‚ä¸»æœºåã€ç«¯å£ã€ç”¨æˆ·åå’Œå¯†ç ã€‚
2ã€è¯»å– binlogï¼šClickHouse ä» MySQL æœåŠ¡å™¨è¯»å–äºŒè¿›åˆ¶æ—¥å¿—ï¼Œè¿™äº›æ—¥å¿—è®°å½•äº†æ•°æ®åº“ä¸­çš„æ‰€æœ‰æ›´æ”¹ã€‚ClickHouse ä½¿ç”¨ mysqlbinlog å·¥å…·è§£æäºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶ã€‚
3ã€è§£ææ›´æ”¹ï¼šClickHouse è§£æäºŒè¿›åˆ¶æ—¥å¿—ä¸­çš„äº‹ä»¶ï¼Œå¦‚æ’å…¥ã€æ›´æ–°ã€åˆ é™¤æ“ä½œã€‚è¿™äº›äº‹ä»¶å°†è¢«è½¬æ¢ä¸º ClickHouse å¯ä»¥ç†è§£çš„æ ¼å¼ã€‚
4ã€åº”ç”¨æ›´æ”¹ï¼šæ ¹æ®è§£æçš„æ›´æ”¹äº‹ä»¶ï¼ŒClickHouse æ›´æ–°å…¶æ•°æ®åº“ã€‚æ­¤è¿‡ç¨‹æ¶‰åŠå°†æ›´æ”¹åº”ç”¨åˆ°ç›¸åº”çš„è¡¨å’Œåˆ—ä¸­ã€‚
5ã€å®æ—¶åŒæ­¥ï¼šMaterializeMySQL å¼•æ“ä¼šæŒç»­ç›‘å¬ MySQL æœåŠ¡å™¨çš„äºŒè¿›åˆ¶æ—¥å¿—ï¼Œå½“ MySQL æ•°æ®åº“ä¸­å‘ç”Ÿæ•°æ®æ›´æ”¹äº‹ä»¶æ—¶ï¼ŒClickHouse ä¼šç«‹å³æ•è·è¿™äº›äº‹ä»¶å¹¶åº”ç”¨ç›¸åº”çš„æ›´æ”¹ã€‚
clickhouse-clientclickhouse-clientæ”¯æŒé€šè¿‡è¾“å…¥æ•°æ®æ–‡ä»¶ã€ç®¡é“ã€JDBCç­‰æ–¹å¼å¯¼å…¥æ•°æ®ã€‚å¯ä»¥å°†MySQLä¸­çš„æ•°æ®å¯¼å‡ºæˆcsvæ–‡ä»¶ï¼Œç„¶åä½¿ç”¨clickhouse-clientå¯¼å…¥åˆ°ClickHouseä¸­ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Command-Line Client

é˜¿é‡Œäº‘å·¥å…·å‚è€ƒæ–‡æ¡£ï¼š

é˜¿é‡Œäº‘ClickHouse - ä»MySQLå¯¼å…¥æ•°æ®
é˜¿é‡Œäº‘ClickHouse - ä»RDS MySQLåŒæ­¥

]]></content>
      <categories>
        <category>engineering</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>macos</tag>
        <tag>æ•°æ®åº“</tag>
        <tag>chatgpt</tag>
        <tag>clickhouse</tag>
      </tags>
  </entry>
  <entry>
    <title>K8Sä¸­å®‰è£…é…ç½®ClickHouse</title>
    <url>/dev-k8s-clickhouse/</url>
    <content><![CDATA[RadonDB ClickHouseç®€ä»‹
[RadonDB ClickHouse](RadonDB ClickHouse) æ˜¯åŸºäº ClickHouse çš„å¼€æºã€é«˜å¯ç”¨ã€äº‘åŸç”Ÿé›†ç¾¤è§£å†³æ–¹æ¡ˆã€‚RadonDB ClickHouse Kubernetes è‡´åŠ›äºåœ¨ Kubernetes ä¸Šè½»ä¾¿å¿«é€Ÿåˆ›å»º ClickHouse é›†ç¾¤ã€‚

å‚è€ƒæ–‡æ¡£ï¼š 

ä»€ä¹ˆæ˜¯ RadonDB ClickHouse



Helmæ–¹å¼å®‰è£…ClickHouseå®‰è£…æ–¹å¼é€‰æ‹©helmï¼Œå‚è€ƒæ–‡æ¡£Deploy Radondb ClickHouse On kubernetesã€‚
ä¸è¦å‚è€ƒDeploy Radondb ClickHouse On kubernetesä¸­æ–‡ç‰ˆï¼ŒæŒ‰ç…§è¿™ä¸ªé…ç½®æ˜¯æœ‰é—®é¢˜çš„ã€‚
Step 1 : Add Helm Repository
helm repo add ck https://radondb.github.io/radondb-clickhouse-kubernetes/

Step 2 : Install to Kubernetes
kubectl create ns clickhousehelm search repo ck/clickhouse-cluster -lhelm install clickhouse ck/clickhouse-cluster -n clickhouse --version v1.0

ä¸Šé¢çš„å®‰è£…å‘½ä»¤ä¼šä½¿ç”¨é»˜è®¤çš„valuesï¼Œè¿™é‡Œå¯ä»¥æŒ‡å®šä¸€äº›è‡ªå®šä¹‰é…ç½®ã€‚
éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œclickhouseå’Œzkä¾èµ–pvï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œé‚£ä¹ˆä¼šä½¿ç”¨é›†ç¾¤ä¸­é»˜è®¤çš„storageclassåˆ›å»ºpvã€‚
Step 3 : Verification
kubectl get all -n clickhousekubectl get all --selector app.kubernetes.io/instance=clickhouse -n clickhouse

è®¿é—®ClickHouseä½¿ç”¨podæ‰§è¡Œå‘½ä»¤æµ‹è¯•æ‰§è¡Œä¸€æ¡queryå‘½ä»¤ï¼š
kubectl exec -it clickhouse-s0-r0-0 -n clickhouse -- clickhouse-client -u default --password=C1ickh0use --query=&#x27;select hostName()&#x27;

é€šè¿‡serviceè®¿é—®clickhouseæ‰§è¡Œå‘½ä»¤kubectl get service -n clickhouse | grep clickhouseecho &#x27;select hostname()&#x27; | curl &#x27;http://default:C1ickh0use@10.96.71.193:8123/&#x27; --data-binary @-

æŸ¥çœ‹é…ç½®kubectl get cm clickhouse-configuration -n clickhouse -oyaml

å¼€æ”¾serviceç»™é›†ç¾¤å¤–æœºå™¨1ã€å¯¼å‡ºservice yaml
kubectl get service -n clickhouse -oyaml &gt; ck.yaml

2ã€ä¿®æ”¹specéƒ¨åˆ†ä¸º
spec:  ports:  - name: native    port: 9000    protocol: TCP    targetPort: 9000    nodePort: 31000  - name: http    port: 8123    protocol: TCP    targetPort: 8123    nodePort: 30123  selector:    app.kubernetes.io/instance: clickhouse    app.kubernetes.io/name: clickhouse-cluster    clickhouse/component: clickhouse  sessionAffinity: None  type: NodePort

å…¶ä¸­9000æ˜¯åŸç”Ÿåè®®ç«¯å£ï¼Œ8123æ˜¯HTTPç«¯å£ï¼Œ8443æ˜¯HTTPSç«¯å£ã€‚è¯¦æƒ…å‚è€ƒClickHouse - Network ports
3ã€ä¿®æ”¹service
kubectl apply -f ck.yaml

4ã€æµ‹è¯•
echo &#x27;select hostname()&#x27; | curl &#x27;http://default:C1ickh0use@192.168.56.112:30123/&#x27; --data-binary @-

å…¶ä¸­192.168.56.112æ˜¯ä¸€ä¸ªé›†ç¾¤èŠ‚ç‚¹IPã€‚
ä½¿ç”¨ClickHouseå‚è€ƒæ–‡æ¡£ã€ŠClickhouseå…¥é—¨ç¯‡ã€‹
å…¶ä»–æ¸…ç†clickhouse-operatoré™¤äº†ä½¿ç”¨helmå®‰è£…chä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨kubesphereå®‰è£…chï¼Œä½†æ˜¯å®‰è£…å¤±è´¥äº†ã€‚å‚è€ƒåœ¨ KubeSphere ä¸­éƒ¨ç½² ClickHouse é›†ç¾¤ï¼Œéƒ¨ç½²æ—¶å¡åœ¨äº†æ•™ç¨‹ä¸­çš„æ­¥éª¤3ï¼ŒæŠ¥é”™ï¼šError: unable to build kubernetes objects from release manifest: unable to recognize â€œâ€: no matches for kind â€œclickhouseinstallationâ€ in version â€œclickhouse.radondb.com/v1â€
ç¼ºå°‘CRD clickhouseinstallationï¼Œç†è®ºä¸Šç›´æ¥å®‰è£…ä¸€ä¸‹è¿™ä¸ªCRDå°±å¯ä»¥ã€‚ä½†æ˜¯æœ€å¼€å§‹æ²¡æœ‰æ„è¯†åˆ°è¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿæ²¡æœ‰æ£€ç´¢åˆ°è§£å†³åŠæ³•ï¼Œå› æ­¤é€‰æ‹©äº†ä½¿ç”¨helmçš„æ–¹å¼è¿›è¡Œé‡è£…ï¼Œé‚£å°±éœ€è¦æ¸…ç†æ•™ç¨‹ä¸­æ­¥éª¤1å®‰è£…çš„clickhouse-operatorã€‚
é¢„æœŸç»“æœä¸­çš„èµ„æºéœ€è¦å…¨éƒ¨åˆ é™¤ï¼Œå¤§éƒ½åœ¨kube-systemç©ºé—´ã€‚
customresourcedefinition.apiextensions.k8s.io/clickhouseinstallations.clickhouse.radondb.com createdcustomresourcedefinition.apiextensions.k8s.io/clickhouseinstallationtemplates.clickhouse.radondb.com createdcustomresourcedefinition.apiextensions.k8s.io/clickhouseoperatorconfigurations.clickhouse.radondb.com createdserviceaccount/clickhouse-operator createdclusterrole.rbac.authorization.k8s.io/clickhouse-operator-kube-system createdclusterrolebinding.rbac.authorization.k8s.io/clickhouse-operator-kube-system createdconfigmap/etc-clickhouse-operator-files createdconfigmap/etc-clickhouse-operator-confd-files createdconfigmap/etc-clickhouse-operator-configd-files createdconfigmap/etc-clickhouse-operator-templatesd-files createdconfigmap/etc-clickhouse-operator-usersd-files createddeployment.apps/clickhouse-operator createdservice/clickhouse-operator-metrics created



]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>database</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>æ•°æ®åº“</tag>
        <tag>clickhouse</tag>
        <tag>cloudnative</tag>
        <tag>helm</tag>
      </tags>
  </entry>
  <entry>
    <title>kséƒ¨ç½²clickhouseéªŒè¯ä»“åº“é—®é¢˜</title>
    <url>/dev-ks-clickhouse-problem/</url>
    <content><![CDATA[é—®é¢˜æè¿°å‚è€ƒåœ¨ KubeSphere ä¸­éƒ¨ç½² ClickHouse é›†ç¾¤ï¼Œéƒ¨ç½²ClickHouseï¼Œæ·»åŠ åº”ç”¨ä»“åº“æ—¶ï¼ŒéªŒè¯ä»“åº“çš„URLæŠ¥é”™404ã€‚
ä»“åº“URLï¼šhttps://radondb.github.io/radondb-clickhouse-kubernetes/



æ’æŸ¥æ€è·¯1ã€ç¡®è®¤ä»“åº“URLæ˜¯å¦æ­£ç¡®2ã€ç¡®è®¤ksçš„åŸŸåè§£ææ˜¯å¦æ­£å¸¸
ç¡®è®¤ä»“åº“URLcurl https://radondb.github.io/radondb-clickhouse-kubernetes/æœ¬åœ°å’Œks-apiserverå®¿ä¸»æœºéƒ½æ˜¯æ­£å¸¸å¯ä»¥è·å–åˆ°æ•°æ®çš„ï¼Œæµè§ˆå™¨è®¿é—® https://radondb.github.io/radondb-clickhouse-kubernetes/index.yaml ä¹Ÿæ­£å¸¸ï¼Œè¯´æ˜ä»“åº“URLæ²¡æœ‰é—®é¢˜ã€‚
ç¡®è®¤ksåŸŸåè§£æå®¿ä¸»æœºè§£æå…ˆæŸ¥çœ‹ä¸€ä¸‹æ­£å¸¸çš„è§£æã€‚
1ã€nslookupæŸ¥çœ‹è§£æ
nslookup radondb.github.io

Server:     10.96.0.10Address:    10.96.0.10#53Non-authoritative answer:Name:   radondb.github.ioAddress: 185.199.111.153Name:   radondb.github.ioAddress: 185.199.108.153Name:   radondb.github.ioAddress: 185.199.110.153Name:   radondb.github.ioAddress: 185.199.109.153Name:   radondb.github.ioAddress: 2606:50c0:8002::153Name:   radondb.github.ioAddress: 2606:50c0:8003::153Name:   radondb.github.ioAddress: 2606:50c0:8000::153Name:   radondb.github.ioAddress: 2606:50c0:8001::153

2ã€pingæŸ¥çœ‹è§£æ
ping radondb.github.io

PING radondb.github.io (185.199.108.153) 56(84) bytes of data.

nslookupå’Œpingçš„ç»“æœä¸€è‡´ã€‚
ks-apiserver podå†…è§£æ1ã€nslookupæŸ¥çœ‹è§£æ
nslookup radondb.github.io

Server:     10.96.0.10Address:    10.96.0.10:53Non-authoritative answer:Name:   radondb.github.ioAddress: 2606:50c0:8001::153Name:   radondb.github.ioAddress: 2606:50c0:8002::153Name:   radondb.github.ioAddress: 2606:50c0:8003::153Name:   radondb.github.ioAddress: 2606:50c0:8000::153Non-authoritative answer:Name:   radondb.github.ioAddress: 185.199.109.153Name:   radondb.github.ioAddress: 185.199.111.153Name:   radondb.github.ioAddress: 185.199.108.153Name:   radondb.github.ioAddress: 185.199.110.153

2ã€pingæŸ¥çœ‹è§£æ
ping radondb.github.io

PING radondb.github.io (192.168.50.11): 56 data bytes64 bytes from 192.168.50.11: seq=0 ttl=63 time=2.151 ms64 bytes from 192.168.50.11: seq=1 ttl=63 time=3.443 ms

é—®é¢˜æ¥äº†ï¼Œè¿™é‡Œnslookupå’Œpingçš„è§£æç»“æœä¸ä¸€è‡´ã€‚
3ã€æŸ¥çœ‹è§£æé…ç½® 
cat /etc/resolv.conf

nameserver 10.96.0.10search kubesphere-system.svc.cluster.local svc.cluster.local cluster.local abc.comoptions ndots:5

ç”¨hostå‘½ä»¤ç¡®è®¤ä¸‹è§£æè¿‡ç¨‹ï¼š
host -v radondb.github.io

è‡³æ­¤é—®é¢˜å°±æ˜ç¡®äº†ï¼Œnslookup/digä¼šç›´æ¥æŸ¥è¯¢DNSæœåŠ¡å™¨ï¼Œå› æ­¤æŸ¥è¯¢ç»“æœæ²¡é—®é¢˜ã€‚è€Œpingã€hostã€curlç­‰å‘½ä»¤å®é™…ä¸Šä¼šæŸ¥çœ‹æœ¬åœ°hostsï¼Œå†æ ¹æ®resolv.confä¸­çš„é…ç½®æŸ¥è¯¢åŸŸåï¼Œå½“åŸŸåçš„ç‚¹çš„æ•°é‡å°äº5ä¸ªæ—¶ä¼šä¾æ¬¡åŠ ä¸Šåç¼€ï¼ˆsearchï¼‰å»DNSæœåŠ¡å™¨æŸ¥æ‰¾ï¼Œå¦‚æœéƒ½æ‰¾ä¸åˆ°å†ç›´æ¥å»DNSæœåŠ¡å™¨æŸ¥æ‰¾åŸŸåã€‚å½“æŸ¥æ‰¾radondb.github.io.abc.comåŸŸåæ—¶ï¼Œå› ä¸ºåŒ¹é…åˆ°äº†*.abc.comæ³›åŸŸåè§£æï¼Œæ‰€ä»¥æ‰¾åˆ°äº†éé¢„æœŸçš„æœåŠ¡å™¨å»å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œå› æ­¤æŠ¥é”™404ã€‚è¯¦æƒ…å‚è€ƒ/etc/resolv.conf searchå’Œndotsé…ç½®
è§£å†³åŠæ³•ä¸´æ—¶è§£æ³•ç›´æ¥ä¿®æ”¹ks-apiserver podé‡Œçš„resolv.confï¼Œæ”¹ä¸º
nameserver 10.96.0.10search kubesphere-system.svc.cluster.local svc.cluster.local cluster.local abc.comoptions ndots:2

æ°¸ä¹…è§£æ³•ä¿®æ”¹ks-apiserverçš„deployment yamlæ–‡ä»¶ï¼Œpodéƒ¨åˆ†æ·»åŠ ï¼š
spec:  dnsConfig:    options:    - name: ndots      value: &quot;2&quot;
optionsï¼šå¯é€‰çš„å¯¹è±¡åˆ—è¡¨ï¼Œå…¶ä¸­æ¯ä¸ªå¯¹è±¡å¯èƒ½å…·æœ‰ name å±æ€§ï¼ˆå¿…éœ€ï¼‰å’Œ value å±æ€§ï¼ˆå¯é€‰ï¼‰ã€‚ æ­¤å±æ€§ä¸­çš„å†…å®¹å°†åˆå¹¶åˆ°ä»æŒ‡å®šçš„ DNS ç­–ç•¥ç”Ÿæˆçš„é€‰é¡¹ï¼Œé‡å¤çš„æ¡ç›®å°†è¢«åˆ é™¤ã€‚è¯¦æƒ…å‚è€ƒk8sç½‘ç»œé…ç½®DNS
å…¨å±€è§£æ³•å¦‚æœé›†ç¾¤ä¸­æ‰€æœ‰podçš„resolv.conféƒ½æƒ³è¦ä¿®æ”¹ï¼Œè¯¥æ€ä¹ˆæ“ä½œï¼Ÿæš‚æ—¶æ²¡æœ‰æ‰¾åˆ°é…ç½®æ–¹æ³•ï¼Œæœªå®Œå¾…ç»­ã€‚ã€‚ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>network</category>
        <category>cloudnative</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>clickhouse</tag>
        <tag>ç½‘ç»œ</tag>
        <tag>dns</tag>
        <tag>kubesphere</tag>
      </tags>
  </entry>
  <entry>
    <title>Helmå®˜æ–¹æ–‡æ¡£æ‘˜å½•</title>
    <url>/dev-helm-doc-extract/</url>
    <content><![CDATA[å‰è¨€Helmå®˜æ–¹æ–‡æ¡£å†™çš„å¾ˆæ£’ï¼Œæœ¬æ–‡ä¼šæ‘˜å½•Helmå®˜æ–¹æ–‡æ¡£ä¸­çš„ä¸€äº›åŸºç¡€çŸ¥è¯†å’Œæœ€ä½³å®è·µï¼Œå¤‡å¿˜ã€‚æ›´ç»†è‡´å…¨é¢çš„å†…å®¹ï¼Œè¯·ç§»æ­¥é˜…è¯»Helmå®˜æ–¹æ–‡æ¡£ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ã€ŠHelmå…¥é—¨ç¯‡ã€‹
Helm - Getting Started



Helmä¸‰å¤§æ¦‚å¿µChart ä»£è¡¨ç€ Helm åŒ…ã€‚å®ƒåŒ…å«åœ¨ Kubernetes é›†ç¾¤å†…éƒ¨è¿è¡Œåº”ç”¨ç¨‹åºï¼Œå·¥å…·æˆ–æœåŠ¡æ‰€éœ€çš„æ‰€æœ‰èµ„æºå®šä¹‰ã€‚ä½ å¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯ Homebrew formulaï¼ŒApt dpkgï¼Œæˆ– Yum RPM åœ¨Kubernetes ä¸­çš„ç­‰ä»·ç‰©ã€‚
Repositoryï¼ˆä»“åº“ï¼‰ æ˜¯ç”¨æ¥å­˜æ”¾å’Œå…±äº« charts çš„åœ°æ–¹ã€‚å®ƒå°±åƒ Perl çš„ CPAN æ¡£æ¡ˆåº“ç½‘ç»œ æˆ–æ˜¯ Fedora çš„ è½¯ä»¶åŒ…ä»“åº“ï¼Œåªä¸è¿‡å®ƒæ˜¯ä¾› Kubernetes åŒ…æ‰€ä½¿ç”¨çš„ã€‚
Release æ˜¯è¿è¡Œåœ¨ Kubernetes é›†ç¾¤ä¸­çš„ chart çš„å®ä¾‹ã€‚ä¸€ä¸ª chart é€šå¸¸å¯ä»¥åœ¨åŒä¸€ä¸ªé›†ç¾¤ä¸­å®‰è£…å¤šæ¬¡ã€‚æ¯ä¸€æ¬¡å®‰è£…éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ releaseã€‚ä»¥ MySQL chartä¸ºä¾‹ï¼Œå¦‚æœä½ æƒ³åœ¨ä½ çš„é›†ç¾¤ä¸­è¿è¡Œä¸¤ä¸ªæ•°æ®åº“ï¼Œä½ å¯ä»¥å®‰è£…è¯¥chartä¸¤æ¬¡ã€‚æ¯ä¸€ä¸ªæ•°æ®åº“éƒ½ä¼šæ‹¥æœ‰å®ƒè‡ªå·±çš„ release å’Œ release nameã€‚
åœ¨äº†è§£äº†ä¸Šè¿°è¿™äº›æ¦‚å¿µä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿™æ ·æ¥è§£é‡Š Helmï¼šHelm å®‰è£… charts åˆ° Kubernetes é›†ç¾¤ä¸­ï¼Œæ¯æ¬¡å®‰è£…éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ releaseã€‚ä½ å¯ä»¥åœ¨ Helm çš„ chart repositories ä¸­å¯»æ‰¾æ–°çš„ chartã€‚
Helmå®‰è£…èµ„æºçš„é¡ºåºHelmæŒ‰ç…§ä»¥ä¸‹é¡ºåºå®‰è£…èµ„æºï¼š

Namespace
NetworkPolicy
ResourceQuota
LimitRange
PodSecurityPolicy
PodDisruptionBudget
ServiceAccount
Secret
SecretList
ConfigMap
StorageClass
PersistentVolume
PersistentVolumeClaim
CustomResourceDefinition
ClusterRole
ClusterRoleList
ClusterRoleBinding
ClusterRoleBindingList
Role
RoleList
RoleBinding
RoleBindingList
Service
DaemonSet
Pod
ReplicationController
ReplicaSet
Deployment
HorizontalPodAutoscaler
StatefulSet
Job
CronJob
Ingress
APIService

Chartæ¨¡æ¿æŒ‡å—å†…å®¹å¤ªå¤šï¼Œå»ºè®®ç›´æ¥é˜…è¯»Helmå®˜æ–¹æ–‡æ¡£ - Chartæ¨¡æ¿æŒ‡å—ï¼Œäº†è§£åŸºç¡€æ¦‚å¿µå’Œè¯­æ³•ã€‚
æœ¬èŠ‚åªç®€å•è¯´æ˜å‡ ä¸ªæ¦‚å¿µå’Œè¯­æ³•ã€‚
æ¨¡æ¿templates/ç›®å½•ä¸­çš„.yamlæ–‡ä»¶å’Œ.tplæ–‡ä»¶ï¼Œå°±æ˜¯æ¨¡æ¿ã€‚å½“Helmè¯„ä¼°chartæ—¶ï¼Œä¼šé€šè¿‡æ¨¡æ¿æ¸²æŸ“å¼•æ“å°†æ‰€æœ‰æ–‡ä»¶å‘é€åˆ°templates/ç›®å½•ä¸­ã€‚ ç„¶åæ”¶é›†æ¨¡æ¿çš„ç»“æœå¹¶å‘é€ç»™Kubernetesã€‚
values.yaml æ–‡ä»¶ä¹Ÿå¯¼å…¥åˆ°äº†æ¨¡æ¿ã€‚è¿™ä¸ªæ–‡ä»¶åŒ…å«äº†chartçš„ é»˜è®¤å€¼ ã€‚è¿™äº›å€¼ä¼šåœ¨ç”¨æˆ·æ‰§è¡Œhelm install æˆ– helm upgradeæ—¶è¢«è¦†ç›–ã€‚
Chart.yaml æ–‡ä»¶åŒ…å«äº†è¯¥chartçš„æè¿°ã€‚ä½ å¯ä»¥ä»æ¨¡æ¿ä¸­è®¿é—®å®ƒã€‚charts/ç›®å½• å¯ä»¥ åŒ…å«å…¶ä»–çš„chart(ç§°ä¹‹ä¸º å­chart)ã€‚
æ¨¡æ¿ä¸­æ¨ªçº¿çš„ä½œç”¨ï¼š

&#123;&#123;-`ï¼šè¡¨ç¤ºåœ¨æ¨¡æ¿æ¸²æŸ“æ—¶è¦å»æ‰å‰é¢çš„ç©ºç™½å­—ç¬¦å’Œæ¢è¡Œç¬¦ã€‚
- `-&#125;&#125;ï¼šè¡¨ç¤ºåœ¨æ¨¡æ¿æ¸²æŸ“æ—¶è¦å»æ‰åé¢çš„ç©ºç™½å­—ç¬¦å’Œæ¢è¡Œç¬¦ã€‚

å˜é‡å’Œä½œç”¨åŸŸHelmæ¨¡æ¿ä¸­ï¼Œå˜é‡æ˜¯å¯¹å¦ä¸€ä¸ªå¯¹è±¡çš„å‘½åå¼•ç”¨ã€‚
å˜é‡çš„ä½œç”¨åŸŸä¸€èˆ¬ä¸æ˜¯å…¨å±€çš„ï¼Œè€Œæ˜¯å…¶å£°æ˜æ‰€åœ¨çš„å—ã€‚æ‰€è°“å—ï¼Œæ˜¯æŒ‡if/elseã€withã€rangeã€defineã€templateã€blockå®šä¹‰çš„èŒƒå›´ã€‚
.ä»£è¡¨å¯¹å½“å‰ä½œç”¨åŸŸçš„å¼•ç”¨ï¼Œ.Valuesè¡¨ç¤ºåœ¨å½“å‰ä½œç”¨åŸŸæŸ¥æ‰¾Valueså¯¹è±¡ã€‚æ¯ä¸ªæ¨¡æ¿ä¸­ï¼Œé»˜è®¤å¯ä»¥è®¿é—®åˆ°çš„å†…ç½®å¯¹è±¡æœ‰Releaseã€Valuesã€Chartã€Filesã€Capabilitieså’ŒTemplateã€‚å¦‚æœå®šä¹‰äº†å—ï¼Œé‚£ä¹ˆåœ¨å—ä¸­ä¸å¯ä»¥é€šè¿‡.Valuesæ‰¾åˆ°Valueså¯¹è±¡ã€‚
$ä»£è¡¨å¯¹æ ¹ä½œç”¨åŸŸçš„å¼•ç”¨ï¼Œ$.Valuesè¡¨ç¤ºåœ¨æ ¹ä½œç”¨åŸŸæŸ¥æ‰¾Valueså¯¹è±¡ã€‚å¦‚æœå®šä¹‰äº†å—ï¼Œé‚£ä¹ˆåœ¨å—ä¸­å¯ä»¥é€šè¿‡$.Valuesæ‰¾åˆ°Valueså¯¹è±¡ã€‚
å˜é‡å®šä¹‰æ ¼å¼ç¤ºä¾‹ï¼š&#123;&#123;- $name := .Release.Name -&#125;&#125;åœ¨æ¨¡æ¿é¡¶å±‚å®šä¹‰å˜é‡ï¼Œå˜é‡çš„ä½œç”¨åŸŸä¼šæ˜¯æ•´ä¸ªæ¨¡æ¿ï¼›åœ¨å—ä¸­å®šä¹‰å˜é‡ï¼Œå˜é‡çš„ä½œç”¨åŸŸåªåœ¨å—å†…ã€‚
å˜é‡ç±»å‹Helm æ¨¡æ¿è¯­è¨€æ˜¯ç”¨å¼ºç±»å‹Goç¼–ç¨‹è¯­è¨€å®ç°çš„ã€‚ å› æ­¤ï¼Œæ¨¡æ¿ä¸­çš„å˜é‡æ˜¯ æœ‰ç±»å‹çš„ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå˜é‡å°†ä½œä¸ºä»¥ä¸‹ç±»å‹ä¹‹ä¸€æ˜¾ç¤ºï¼š

string: æ–‡æœ¬å­—ç¬¦ä¸²
bool: true æˆ– false
int: æ•´å‹å€¼ï¼ˆåŒ…å«8ä½ï¼Œ16ä½ï¼Œ32ä½ï¼Œå’Œ64æœ‰ç¬¦å·å’Œæ— ç¬¦å·æ•´æ•°ï¼‰
float64: 64ä½æµ®ç‚¹æ•°(ä¹Ÿæœ‰8ä½ï¼Œ16ä½ï¼Œ32ä½ç±»å‹)
å­—èŠ‚åˆ‡ç‰‡([]byte)ï¼Œä¸€èˆ¬ç”¨äºä¿å­˜ï¼ˆå¯èƒ½çš„ï¼‰äºŒè¿›åˆ¶æ•°æ®
struct: æœ‰å±æ€§å’Œæ–¹æ³•çš„å¯¹è±¡
ä¸Šè¿°æŸç§ç±»å‹çš„åˆ‡ç‰‡(ç´¢å¼•åˆ—è¡¨)
å­—ç¬¦ä¸²é”®map (map[string]interface&#123;&#125;) å€¼æ˜¯ä¸Šè¿°æŸç§ç±»å‹

Goé‡Œé¢æœ‰å¾ˆå¤šå…¶ä»–ç±»å‹ï¼Œæœ‰æ—¶ä½ éœ€è¦åœ¨æ¨¡æ¿é‡Œè½¬æ¢ã€‚è°ƒè¯•å¯¹è±¡ç±»å‹æœ€ç®€ä¾¿çš„æ–¹å¼æ˜¯åœ¨æ¨¡æ¿ä¸­ä¼ é€’ç»™printf â€œ%tâ€ï¼Œè¿™æ ·ä¼šæ‰“å°ç±»å‹ã€‚ ä¹Ÿå¯ä»¥ä½¿ç”¨ typeOf å’Œ kindOf å‡½æ•°ã€‚
å‘½åæ¨¡æ¿å‘½åæ¨¡æ¿ï¼ˆä¹Ÿè¢«ç§°ä½œä¸€ä¸ª éƒ¨åˆ† æˆ–ä¸€ä¸ª å­æ¨¡æ¿ï¼‰åç§°æ˜¯å…¨å±€çš„ã€‚ä¸€ä¸ªå¸¸è§çš„å‘½åæƒ¯ä¾‹æ˜¯ç”¨chartåç§°ä½œä¸ºæ¨¡æ¿å‰ç¼€ã€‚ä½¿ç”¨ç‰¹å®šchartåç§°ä½œä¸ºå‰ç¼€å¯ä»¥é¿å…å¯èƒ½å› ä¸º ä¸¤ä¸ªä¸åŒchartä½¿ç”¨äº†ç›¸åŒåç§°çš„æ¨¡æ¿è€Œå¼•èµ·çš„å†²çªã€‚
ç”¨defineå’Œtemplateå£°æ˜å’Œä½¿ç”¨æ¨¡æ¿ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œdefineå£°æ˜çš„å‘½åæ¨¡æ¿ä¸€èˆ¬æ”¾åœ¨_helpers.tplæ–‡ä»¶ä¸­ã€‚å› ä¸ºæ˜¯æ¨¡æ¿åç§°æ˜¯å…¨å±€çš„ï¼Œå› æ­¤å¯ä»¥è¢«.yamlæ–‡ä»¶å¼•ç”¨ã€‚
templateæ¸²æŸ“æ—¶ï¼Œä¸€èˆ¬ä¼ å…¥.ä½œä¸ºå‘½åæ¨¡æ¿å¯ä»¥è®¿é—®çš„èŒƒå›´ã€‚includeæ˜¯templateçš„æ›¿ä»£ï¼Œåªæ˜¯ä¸ºäº†æ›´å¥½åœ°å¤„ç†YAMLæ–‡æ¡£çš„è¾“å‡ºæ ¼å¼ï¼Œæ–¹ä¾¿ç¼©è¿›ã€‚
NOTES.txtæ–‡ä»¶åœ¨helm install æˆ– helm upgradeå‘½ä»¤çš„æœ€åï¼ŒHelmä¼šæ‰“å°å‡ºå¯¹ç”¨æˆ·æœ‰ç”¨çš„ä¿¡æ¯ã€‚ ä½¿ç”¨æ¨¡æ¿å¯ä»¥é«˜åº¦è‡ªå®šä¹‰è¿™éƒ¨åˆ†ä¿¡æ¯ã€‚è¦åœ¨chartæ·»åŠ å®‰è£…è¯´æ˜ï¼Œåªéœ€åˆ›å»º templates/NOTES.txt æ–‡ä»¶å³å¯ã€‚è¯¥æ–‡ä»¶æ˜¯çº¯æ–‡æœ¬ï¼Œä½†ä¼šåƒæ¨¡æ¿ä¸€æ ·å¤„ç†ï¼Œ æ‰€æœ‰æ­£å¸¸çš„æ¨¡æ¿å‡½æ•°å’Œå¯¹è±¡éƒ½æ˜¯å¯ç”¨çš„ã€‚
.helmignore æ–‡ä»¶.helmignore æ–‡ä»¶ç”¨æ¥æŒ‡å®šä½ ä¸æƒ³åŒ…å«åœ¨ä½ çš„helm chartä¸­çš„æ–‡ä»¶ã€‚å¦‚æœè¯¥æ–‡ä»¶å­˜åœ¨ï¼Œhelm package å‘½ä»¤ä¼šåœ¨æ‰“åŒ…åº”ç”¨æ—¶å¿½ç•¥æ‰€æœ‰åœ¨ .helmignore æ–‡ä»¶ä¸­åŒ¹é…çš„æ–‡ä»¶ã€‚
ä¸€äº›å€¼å¾—æ³¨æ„çš„å’Œ.gitignoreä¸åŒä¹‹å¤„ï¼š

ä¸æ”¯æŒ**è¯­æ³•ã€‚
globbingåº“æ˜¯Goçš„ â€˜filepath.Matchâ€™ï¼Œä¸æ˜¯fnmatch(3)
æœ«å°¾ç©ºæ ¼æ€»ä¼šè¢«å¿½ç•¥(ä¸æ”¯æŒè½¬ä¹‰åºåˆ—)
ä¸æ”¯æŒ!ä½œä¸ºç‰¹æ®Šçš„å¼•å¯¼åºåˆ—
é»˜è®¤ä¸ä¼šæ’é™¤è‡ªèº«ï¼Œéœ€è¦æ˜¾å¼æ·»åŠ  .helmignore

YAMLæŠ€æœ¯å‚è€ƒæ–‡æ¡£ï¼šã€ŠYAMLè¯­è¨€ã€‹
Chartå¼€å‘æŠ€å·§æ¨¡æ¿æ–¹æ³•Helmä½¿ç”¨Goæ¨¡æ¿ï¼ŒåŒæ—¶å¢åŠ äº†ä¸¤ä¸ªç‰¹æ®Šæ¨¡æ¿æ–¹æ³•ï¼šincludeå’Œrequiredã€‚
includeæ–¹æ³•å…è®¸ä½ å¼•å…¥å¦ä¸€ä¸ªæ¨¡æ¿ï¼Œå¹¶å°†ç»“æœä¼ é€’ç»™å…¶ä»–æ¨¡æ¿æ–¹æ³•ã€‚æ¯”å¦‚ï¼Œè¿™ä¸ªæ¨¡æ¿ç‰‡æ®µåŒ…å«äº†ä¸€ä¸ªå«mytplçš„æ¨¡æ¿ï¼Œç„¶åå°†å…¶è½¬æˆå°å†™ï¼Œå¹¶ä½¿ç”¨åŒå¼•å·æ‹¬èµ·æ¥ã€‚
value: &#123;&#123; include &quot;mytpl&quot; . | lower | quote &#125;&#125;

requiredæ–¹æ³•å¯ä»¥è®©ä½ å£°æ˜æ¨¡æ¿æ¸²æŸ“æ‰€éœ€çš„ç‰¹å®šå€¼ã€‚å¦‚æœè¿™ä¸ªå€¼æ˜¯ç©ºçš„ï¼Œæ¨¡æ¿æ¸²æŸ“ä¼šå‡ºé”™å¹¶æ‰“å°ç”¨æˆ·æäº¤çš„é”™è¯¯ä¿¡æ¯ã€‚ä¸‹é¢è¿™ä¸ªrequiredæ–¹æ³•çš„ä¾‹å­å£°æ˜äº†ä¸€ä¸ª.Values.whoéœ€è¦çš„æ¡ç›®ï¼Œå¹¶ä¸”å½“è¿™ä¸ªæ¡ç›®ä¸å­˜åœ¨æ—¶ä¼šæ‰“å°é”™è¯¯ä¿¡æ¯ï¼š
value: &#123;&#123; required &quot;A valid .Values.who entry required!&quot; .Values.who &#125;&#125;

tplæ–¹æ³•å…è®¸å¼€å‘è€…åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸ºæ¨¡æ¿ã€‚å°†æ¨¡æ¿å­—ç¬¦ä¸²ä½œä¸ºå€¼ä¼ ç»™chartæˆ–æ¸²æŸ“é¢å¤–çš„é…ç½®æ–‡ä»¶æ—¶ä¼šå¾ˆæœ‰ç”¨ã€‚è¯­æ³•ï¼š &#123;&#123; tpl TEMPLATE_STRING VALUES &#125;&#125;
ä½¿ç”¨Partialså’Œæ¨¡æ¿å¼•ç”¨æœ‰æ—¶ä½ æƒ³åœ¨chartä¸­åˆ›å»ºå¯ä»¥é‡å¤åˆ©ç”¨çš„éƒ¨åˆ†ï¼Œä¸ç®¡æ˜¯å—è¿˜æ˜¯å±€éƒ¨æ¨¡æ¿ã€‚é€šå¸¸å°†è¿™äº›æ–‡ä»¶ä¿å­˜åœ¨è‡ªå·±çš„æ–‡ä»¶ä¸­ä¼šæ›´å¹²å‡€ã€‚
åœ¨ templates/ ç›®å½•ä¸­ï¼Œä»»ä½•ä»¥ä¸‹åˆ’çº¿(_)å¼€å§‹çš„æ–‡ä»¶ä¸å¸Œæœ›è¾“å‡ºåˆ°Kubernetesæ¸…å•æ–‡ä»¶ä¸­ã€‚å› æ­¤æŒ‰ç…§æƒ¯ä¾‹ï¼Œè¾…åŠ©æ¨¡æ¿å’Œå±€éƒ¨æ¨¡æ¿ä¼šè¢«æ”¾åœ¨_helpers.tplæ–‡ä»¶ä¸­ã€‚
åˆ›å»ºé•œåƒæ‹‰å–å¯†é’¥1ã€å®šä¹‰ values.yaml
imageCredentials:  registry: quay.io  username: someone  password: sillyness  email: someone@host.com

2ã€å®šä¹‰è¾…åŠ©æ¨¡æ¿ï¼ˆå†™åœ¨ _helpers.tpl æ–‡ä»¶é‡Œï¼‰
&#123;&#123;- define &quot;imagePullSecret&quot; &#125;&#125;&#123;&#123;- with .Values.imageCredentials &#125;&#125;&#123;&#123;- printf &quot;&#123;\&quot;auths\&quot;:&#123;\&quot;%s\&quot;:&#123;\&quot;username\&quot;:\&quot;%s\&quot;,\&quot;password\&quot;:\&quot;%s\&quot;,\&quot;email\&quot;:\&quot;%s\&quot;,\&quot;auth\&quot;:\&quot;%s\&quot;&#125;&#125;&#125;&quot; .registry .username .password .email (printf &quot;%s:%s&quot; .username .password | b64enc) | b64enc &#125;&#125;&#123;&#123;- end &#125;&#125;&#123;&#123;- end &#125;&#125;

3ã€æ¨¡æ¿ä¸­ä½¿ç”¨è¾…åŠ©æ¨¡æ¿
apiVersion: v1kind: Secretmetadata:  name: myregistrykeytype: kubernetes.io/dockerconfigjsondata:  .dockerconfigjson: &#123;&#123; template &quot;imagePullSecret&quot; . &#125;&#125;

YAMLæ˜¯JSONçš„è¶…é›†æ ¹æ®YAMLè§„èŒƒï¼ŒYAMLæ˜¯JSONçš„è¶…é›†ã€‚è¿™æ„å‘³ç€ä»»æ„çš„åˆæ³•JSONç»“æ„åœ¨YAMLä¸­åº”è¯¥æ˜¯åˆæ³•çš„ã€‚
è¿™æœ‰ä¸ªä¼˜åŠ¿ï¼šæœ‰æ—¶å€™æ¨¡æ¿å¼€å‘è€…ä¼šå‘ç°ä½¿ç”¨ç±»JSONè¯­æ³•æ›´å®¹æ˜“è¡¨è¾¾æ•°æ®ç»“æ„è€Œä¸æ˜¯å¤„ç†YAMLçš„ç©ºç™½æ•æ„Ÿåº¦ã€‚
ä½œä¸ºæœ€ä½³å®è·µï¼Œæ¨¡æ¿åº”éµå¾ªç±»YAMLè¯­æ³• é™¤é JSONè¯­æ³•å¤§å¤§é™ä½äº†æ ¼å¼é—®é¢˜çš„é£é™©ã€‚
æ„å»ºå¤æ‚Chartåœ¨CNCFçš„ Artifact Hub ä¸­çš„å¾ˆå¤šchartæ˜¯åˆ›å»ºæ›´å…ˆè¿›åº”ç”¨çš„â€œç»„æˆéƒ¨åˆ†â€ã€‚ä½†æ˜¯chartå¯èƒ½è¢«ç”¨äºåˆ›å»ºå¤§è§„æ¨¡åº”ç”¨å®ä¾‹ã€‚ åœ¨è¿™ç§åœºæ™¯ä¸­ï¼Œä¸€ä¸ªæ€»çš„chartä¼šæœ‰å¾ˆå¤šå­chartï¼Œæ¯ä¸€ä¸ªæ˜¯æ•´ä½“åŠŸèƒ½çš„ä¸€éƒ¨åˆ†ã€‚
å½“å‰ä»ç¦»æ•£ç»„ä»¶ç»„æˆä¸€ä¸ªå¤æ‚åº”ç”¨çš„æœ€ä½³å®è·µæ˜¯åˆ›å»ºä¸€ä¸ªé¡¶å±‚æ€»ä½“chartæ„å»ºå…¨å±€é…ç½®ï¼Œç„¶åä½¿ç”¨chartså­ç›®å½•åµŒå…¥æ¯ä¸ªç»„ä»¶ã€‚
æœ€ä½³å®è·µä¸€èˆ¬æƒ¯ä¾‹chartåç§°chartåç§°å¿…é¡»æ˜¯å°å†™å­—æ¯å’Œæ•°å­—ã€‚å•è¯ä¹‹é—´å¯ä»¥ä½¿ç”¨æ¨ªæ åˆ†éš”(-)ã€‚
ç‰ˆæœ¬å·Helmå°½å¯èƒ½ä½¿ç”¨ SemVer 2æ¥è¡¨ç¤ºç‰ˆæœ¬å·ã€‚ï¼ˆæ³¨æ„Dockeré•œåƒçš„tagä¸ä¸€å®šéµå¾ªSemVerï¼Œ å› æ­¤è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªä¸å¹¸çš„ä¾‹å¤–è§„åˆ™ã€‚ï¼‰
å½“SemVerç‰ˆæœ¬å­˜å‚¨åœ¨Kubernetesæ ‡ç­¾ä¸­æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸æŠŠ+å­—ç¬¦æ”¹æˆ_ï¼Œå› ä¸ºæ ‡ç­¾ä¸å…è®¸ä½¿ç”¨+ä½œä¸ºå€¼è¿›è¡Œç­¾åã€‚
æ ¼å¼åŒ–YAMLYAML æ–‡ä»¶åº”è¯¥æŒ‰ç…§ åŒç©ºæ ¼ ç¼©è¿›(ç»ä¸è¦ä½¿ç”¨tabé”®)ã€‚
Helm å’Œ Chartçš„ç”¨æ³•ä»¥ä¸‹æ˜¯å‡ ä¸ª Helm å’Œ helm çš„æƒ¯ç”¨æ–¹æ³•ã€‚

Helm æ˜¯æŒ‡æ•´ä¸ªé¡¹ç›®
helm æ˜¯æŒ‡å®¢æˆ·ç«¯å‘½ä»¤
chart ä¸æ˜¯ä¸“æœ‰åè¯ï¼Œä¸éœ€è¦é¦–å­—æ¯å¤§å†™
Chart.yaml éœ€è¦é¦–å­—æ¯å¤§å†™ï¼Œå› ä¸ºæ–‡ä»¶åå¤§å°å†™æ•æ„Ÿ

è‹¥æœ‰ç–‘é—®ï¼Œä½¿ç”¨ Helm (â€˜Hâ€™å¤§å†™)ã€‚
Valueså‘½åè§„èŒƒå˜é‡åç§°ä»¥å°å†™å­—æ¯å¼€å¤´ï¼Œå•è¯æŒ‰é©¼å³°åŒºåˆ†
æ‰å¹³æˆ–åµŒå¥—çš„ValueYAMLæ˜¯ä¸€ç§çµæ´»æ ¼å¼ï¼Œå€¼å¯ä»¥åµŒå¥—å¾—å¾ˆæ·±ï¼Œä¹Ÿå¯ä»¥æ˜¯æ‰å¹³çš„ã€‚å¤§å¤šæ•°åœºæ™¯ä¸­ï¼Œæ‰å¹³çš„ä¼˜äºåµŒå¥—çš„ã€‚å› ä¸ºå¯¹æ¨¡æ¿å¼€å‘è€…å’Œç”¨æˆ·æ¥è¯´æ›´åŠ ç®€å•ã€‚
ç±»å‹æ¸…æ¥šYAMLçš„ç±»å‹å¼ºåˆ¶è§„åˆ™æœ‰æ—¶å€™æ˜¯å¾ˆåå¸¸çš„ã€‚æ¯”å¦‚ï¼Œfoo: false å’Œ foo: â€œfalseâ€ æ˜¯ä¸ä¸€æ ·çš„ã€‚å¤§æ•´å‹æ•°å¦‚ï¼šfoo: 12345678 æœ‰æ—¶ä¼šè¢«è½¬æ¢æˆç§‘å­¦è®¡æ•°æ³•ã€‚
é¿å…ç±»å‹å¼ºåˆ¶è§„åˆ™é”™è¯¯æœ€ç®€å•çš„æ–¹å¼æ˜¯å­—ç¬¦ä¸²æ˜ç¡®å®šä¹‰ï¼Œå…¶ä»–éƒ½æ˜¯ä¸æ˜ç¡®çš„ã€‚æˆ–è€…ï¼Œç®€å•æ¥è®²ï¼Œ ç»™æ‰€æœ‰å­—ç¬¦ä¸²æ‰“å¼•å·ã€‚
é€šå¸¸ï¼Œä¸ºäº†é¿å…æ•´æ•°è½¬æ¢é—®é¢˜ï¼Œå°†æ•´å‹å­˜å‚¨ä¸ºå­—ç¬¦ä¸²æ›´å¥½ï¼Œå¹¶ç”¨ &#123;&#123; int $value &#125;&#125; åœ¨æ¨¡æ¿ä¸­å°†å­—ç¬¦ä¸²è½¬å›æ•´å‹ã€‚
åœ¨å¤§å¤šæ•°åœºæ™¯ä¸­ï¼Œæ˜¾å¼çš„ç±»å‹æ ‡è®°æ›´å¥½ï¼Œæ‰€ä»¥ foo: !!string 1234 ä¼šå°†1234ä½œä¸ºå­—ç¬¦ä¸²å¯¹å¾…ã€‚ ä½†æ˜¯ï¼ŒYAMLè§£æå™¨ä¼šæ¶ˆè€—æ ‡è®°ï¼Œå› æ­¤ç±»å‹æ•°æ®åœ¨ä¸€æ¬¡è§£æåä¼šä¸¢å¤±ã€‚
è€ƒè™‘ç”¨æˆ·ä½¿ç”¨valueæœ‰ä¸‰ç§valueæ¥æº:

chartçš„values.yamlæ–‡ä»¶
ç”±helm install -fæä¾›çš„valuesæ–‡ä»¶
åœ¨æ‰§è¡Œhelm install æ—¶ä¼ é€’ç»™â€“set æˆ– â€“set-string å‚æ•°çš„values

å½“è®¾è®¡valuesçš„ç»“æ„æ—¶ï¼Œè®°å¾—ä½ çš„chartç”¨æˆ·å¯èƒ½ä¼šé€šè¿‡-f å‚æ•°æˆ–â€“seté€‰é¡¹è¦†ç›–ä»–ä»¬ã€‚ç”±äºâ€“setåœ¨è¡¨ç°ä¸Šæ›´æœ‰é™ï¼Œç¼–å†™ä½ values.yamlæ–‡ä»¶çš„ç¬¬ä¸€æŒ‡å¯¼åŸåˆ™æ˜¯ç¡®ä¿å®ƒå®¹æ˜“è¢«â€“setè¦†ç›–ã€‚å› æ­¤ä½¿ç”¨mapæ„å»ºvaluesæ–‡ä»¶æ›´å¥½ã€‚
ç»™values.yamlå†™æ–‡æ¡£values.yamlä¸­æ¯ä¸ªå®šä¹‰çš„å±æ€§éƒ½åº”è¯¥æ–‡æ¡£åŒ–ã€‚æ–‡æ¡£å­—ç¬¦ä¸²åº”è¯¥ä»¥å®ƒè¦æè¿°çš„å±æ€§å¼€å¤´ï¼Œå¹¶è‡³å°‘ç»™å‡ºä¸€å¥æè¿°ã€‚
æ¨¡æ¿templates ç»“æ„templates/ç›®å½•ç»“æ„åº”è¯¥å¦‚ä¸‹ï¼š

å¦‚æœç”ŸæˆYAMLè¾“å‡ºï¼Œæ¨¡æ¿æ–‡ä»¶åº”è¯¥æœ‰æ‰©å±•å.yamlã€‚ æ‰©å±•åæ˜¯.tplå¯ç”¨äºç”Ÿæˆéæ ¼å¼åŒ–å†…å®¹çš„æ¨¡æ¿æ–‡ä»¶ã€‚
æ¨¡æ¿æ–‡ä»¶åç§°åº”è¯¥ä½¿ç”¨æ¨ªæ ç¬¦å·(my-example-configmap.yaml)ï¼Œä¸ç”¨é©¼å³°è®°æ³•ã€‚
æ¯ä¸ªèµ„æºçš„å®šä¹‰åº”è¯¥åœ¨å®ƒè‡ªå·±çš„æ¨¡æ¿æ–‡ä»¶ä¸­ã€‚
æ¨¡æ¿æ–‡ä»¶çš„åç§°åº”è¯¥åæ˜ åç§°ä¸­çš„èµ„æºç±»å‹ã€‚æ¯”å¦‚ï¼šfoo-pod.yamlï¼Œ bar-svc.yaml

å®šä¹‰æ¨¡æ¿çš„åç§°å®šä¹‰çš„æ¨¡æ¿(åœ¨&#123;&#123; define &#125;&#125;å‘½ä»¤ä¸­å®šä¹‰çš„æ¨¡æ¿)æ˜¯å¯å…¨å±€è®¿é—®çš„ã€‚è¿™å°±æ„å‘³ç€chartå’Œæ‰€æœ‰çš„å­chartéƒ½å¯ä»¥è®¿é—®ç”¨&#123;&#123; define &#125;&#125;åˆ›å»ºçš„æ‰€æœ‰æ¨¡æ¿ã€‚
å› æ­¤ï¼Œ æ‰€æœ‰å®šä¹‰çš„æ¨¡æ¿åç§°åº”è¯¥è¢«å‘½åç©ºé—´åŒ–ã€‚
æ­£ç¡®çš„ï¼š
&#123;&#123;- define &quot;nginx.fullname&quot; &#125;&#125;&#123;&#123;/* ... */&#125;&#125;&#123;&#123; end -&#125;&#125;

ä¸æ­£ç¡®çš„ï¼š
&#123;&#123;- define &quot;fullname&quot; -&#125;&#125;&#123;&#123;/* ... */&#125;&#125;&#123;&#123; end -&#125;&#125;

å¼ºçƒˆå»ºè®®é€šè¿‡helm createå‘½ä»¤åˆ›å»ºæ–°chartï¼Œå› ä¸ºæ¨¡æ¿åç§°æ˜¯æ ¹æ®æ­¤æœ€ä½³å®è·µè‡ªåŠ¨å®šä¹‰çš„ã€‚
æ ¼å¼åŒ–æ¨¡æ¿æ¨¡æ¿åº”è¯¥ä½¿ç”¨ä¸¤ä¸ª ç©ºæ ¼ ç¼©è¿›ï¼ˆæ°¸è¿œä¸è¦ç”¨tabï¼‰ã€‚æ¨¡æ¿å‘½ä»¤çš„å¤§æ‹¬å·å‰ååº”è¯¥ä½¿ç”¨ç©ºæ ¼ã€‚æ­£ç¡®çš„ï¼š
&#123;&#123; .foo &#125;&#125;&#123;&#123; print &quot;foo&quot; &#125;&#125;&#123;&#123;- print &quot;bar&quot; -&#125;&#125;

ä¸æ­£ç¡®çš„ï¼š
&#123;&#123;.foo&#125;&#125;&#123;&#123;print &quot;foo&quot;&#125;&#125;&#123;&#123;-print &quot;bar&quot;-&#125;&#125;

ç”Ÿæˆæ¨¡æ¿ä¸­çš„ç©ºæ ¼æœ€å¥½åœ¨ç”Ÿæˆçš„æ¨¡æ¿ä¸­å°†ç©ºæ ¼é‡ä¿æŒåœ¨æœ€å°å€¼ã€‚å°¤å…¶æ˜¯å¤§é‡çš„ç©ºè¡Œä¸åº”è¯¥ç›¸é‚»å‡ºç°ã€‚ä½†å¶å°”æœ‰ç©ºè¡Œï¼ˆå°¤å…¶åœ¨é€»è¾‘å—ä¹‹é—´ï¼‰æ˜¯æ²¡é—®é¢˜çš„ã€‚
æ³¨é‡ŠYAMLå’ŒHelmæ¨¡æ¿éƒ½æœ‰æ³¨é‡Šæ ‡è®°ç¬¦ã€‚YAMLæ³¨é‡Šï¼š
# This is a commenttype: sprocket

æ¨¡æ¿æ³¨é‡Šï¼š
&#123;&#123;- /*This is a comment.*/&#125;&#125;type: frobnitz

åœ¨æ¨¡æ¿å’Œæ¨¡æ¿è¾“å‡ºä¸­ä½¿ç”¨JSONYAMLæ˜¯JSONçš„è¶…é›†ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨JSONè¯­æ³•æ¯”å…¶ä»–YAMLè¡¨ç¤ºæ›´å…·å¯è¯»æ€§ã€‚
æ¯”å¦‚ï¼Œè¿™ä¸ªYAMLæ›´æ¥è¿‘è¡¨ç¤ºåˆ—è¡¨çš„æ™®é€šYAMLæ–¹æ³•ï¼š
arguments:  - &quot;--dirname&quot;  - &quot;/foo&quot;

ä½†æ˜¯æŠ˜å æˆJSONåˆ—è¡¨æ ·å¼æ—¶ä¼šæ›´æ˜“é˜…è¯»:
arguments: [&quot;--dirname&quot;, &quot;/foo&quot;]

ä½¿ç”¨JSONå¯ä»¥å¾ˆå¥½åœ°æé«˜æ˜“è¯»æ€§ã€‚ç„¶è€Œï¼ŒJSONè¯­æ³•ä¸åº”ç”¨äºè¡¨ç¤ºæ›´å¤æ‚çš„ç»“æ„ã€‚
æ ‡ç­¾å’Œæ³¨é‡Šå»ºè®®ä½¿ç”¨ helm.sh/chart: NAME-VERSION ä½œä¸ºæ ‡ç­¾ï¼Œä»¥ä¾¿æ“ä½œå‘˜å¯ä»¥æ‰¾åˆ°ç‰¹å®šchartçš„æ‰€æœ‰å®ä¾‹ã€‚
å¦‚æœå…ƒæ•°æ®é¡¹ä¸æ˜¯ç”¨äºæŸ¥è¯¢ï¼Œå°±åº”è¯¥è®¾ç½®ä¸ºæ³¨é‡Šã€‚
æ ‡å‡†æ ‡ç­¾å‚è€ƒæ–‡æ¡£ï¼šæ ‡ç­¾å’Œæ³¨é‡Š
Podå’ŒPodæ¨¡æ¿PodæŒ‡çš„æ˜¯Podï¼ŒPodæ¨¡æ¿æŒ‡çš„æ˜¯Deploymentã€ReplicationControllerã€ReplicaSetã€DaemonSetã€StatefulSetç­‰ã€‚
å®¹å™¨é•œåƒåº”è¯¥ä½¿ç”¨å›ºå®šçš„tagæˆ–é•œåƒSHAã€‚ä¸åº”è¯¥ä½¿ç”¨latest, head, canaryç­‰æ ‡ç­¾æˆ–å…¶ä»–è¢«è®¾è®¡ä¸ºâ€œæµ®åŠ¨çš„â€æ ‡ç­¾ã€‚
æ‰€æœ‰çš„Podæ¨¡æ¿éƒ¨åˆ†åº”è¯¥æŒ‡å®šä¸€ä¸ªselectorã€‚æ¯”å¦‚ï¼š
selector:  matchLabels:      app.kubernetes.io/name: MyNametemplate:  metadata:    labels:      app.kubernetes.io/name: MyName

åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶RBAC èµ„æºæœ‰ï¼š

ServiceAccount (namespaced)
Role (namespaced)
ClusterRole
RoleBinding (namespaced)
ClusterRoleBinding

RBACå’ŒæœåŠ¡è´¦æˆ·é…ç½®åº”è¯¥ä½¿ç”¨ç‹¬ç«‹çš„keyã€‚å®ƒä»¬æ˜¯ç‹¬ç«‹çš„å†…å®¹ã€‚åœ¨YAMLä¸­å°†è¿™ä¸¤ä¸ªæ¦‚å¿µåˆ†å¼€å¯ä»¥æ¶ˆé™¤æ­§ä¹‰ä½¿å…¶æ›´åŠ æ¸…æ™°ã€‚
rbac:  # Specifies whether RBAC resources should be created  create: trueserviceAccount:  # Specifies whether a ServiceAccount should be created  create: true  # The name of the ServiceAccount to use.  # If not set and create is true, a name is generated using the fullname template  name:

rbac.create åº”è¯¥æ˜¯å¸ƒå°”å€¼ï¼Œç”¨äºæ§åˆ¶RBACèµ„æºæ˜¯å¦è¢«åˆ›å»ºã€‚é»˜è®¤æ˜¯ trueã€‚ç”¨æˆ·æƒ³è‡ªå·±ç®¡ç†RBACè®¿é—®æ§åˆ¶æ—¶å¯ä»¥è®¾ç½®ä¸ºfalse (ç¤ºä¾‹å¦‚ä¸‹)ã€‚
serviceAccount.name è¦è®¾ç½®ä¸ºç”±chartåˆ›å»ºçš„è®¿é—®æ§åˆ¶èµ„æºçš„ServiceAccountçš„åç§°ã€‚ å¦‚æœserviceAccount.createæ˜¯trueï¼Œåˆ™ä½¿ç”¨è¯¥åç§°çš„ServiceAccountä¼šè¢«åˆ›å»ºã€‚å¦‚æœæ²¡æœ‰è®¾ç½®åç§°ï¼Œ åˆ™ä¼šä½¿ç”¨fullnameæ¨¡æ¿ç”Ÿæˆä¸€ä¸ªåç§°ã€‚å¦‚æœserviceAccount.createæ˜¯falseï¼Œåˆ™ä¸ä¼šè¢«åˆ›å»ºï¼Œä½†ä»ç„¶ä¼šä¸ç›¸åŒçš„èµ„æºå…³è”ï¼Œ ä»¥ä¾¿åç»­æ‰‹åŠ¨åˆ›å»ºçš„å¼•ç”¨å®ƒçš„RBACèµ„æºå¯ä»¥æ­£å¸¸å·¥ä½œã€‚å¦‚æœserviceAccount.createæ˜¯falseä¸”æ²¡æœ‰æŒ‡å®šåç§°ï¼Œ ä¼šä½¿ç”¨é»˜è®¤çš„ServiceAccountã€‚
&#123;&#123;/*Create the name of the service account to use*/&#125;&#125;&#123;&#123;- define &quot;mychart.serviceAccountName&quot; -&#125;&#125;&#123;&#123;- if .Values.serviceAccount.create -&#125;&#125;    &#123;&#123; default (include &quot;mychart.fullname&quot; .) .Values.serviceAccount.name &#125;&#125;&#123;&#123;- else -&#125;&#125;    &#123;&#123; default &quot;default&quot; .Values.serviceAccount.name &#125;&#125;&#123;&#123;- end -&#125;&#125;&#123;&#123;- end -&#125;&#125;

è°ƒè¯•è¯­æ³•æ£€æŸ¥helm lint

æµ‹è¯•æœ¬åœ°æ¸²æŸ“helm template --debug

æµ‹è¯•æœåŠ¡å™¨æ¸²æŸ“helm install --dry-run --debug

å¿½ç•¥æ£€æŸ¥æµ‹è¯•æœåŠ¡å™¨æ¸²æŸ“helm install --dry-run --disable-openapi-validation

æŸ¥çœ‹å®‰è£…åœ¨æœåŠ¡ä¸Šçš„æ¨¡æ¿helm get manifest




]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>helm</tag>
      </tags>
  </entry>
  <entry>
    <title>VSCodeå¸¸ç”¨å¿«æ·é”®å’Œé…ç½®</title>
    <url>/dev-vscode-shortcut-and-config/</url>
    <content><![CDATA[VSCodeç®€ä»‹JetBrains å…¨å®¶æ¡¶éå¸¸å¥½ç”¨ï¼Œä½†æ˜¯æ¯å¹´ $249 çš„ä»·æ ¼ï¼Œç›´æ¥åŠé€€äº†ã€‚ç„¶åï¼ŒVSCodeï¼ˆVisual Studio Codeï¼‰å°±æˆäº†æœ€å¥½çš„é€‰æ‹©ã€‚

VSCode æ˜¯ä¸€ä¸ªè½»é‡ä½†åŠŸèƒ½å¼ºå¤§çš„ä»£ç ç¼–è¾‘å™¨ï¼Œé€‚ç”¨äº Windowsã€macOS å’Œ Linuxã€‚å®ƒå†…ç½®äº†å¯¹ JavaScriptã€TypeScript å’Œ Node.js çš„æ”¯æŒï¼Œå¹¶ä¸ºå…¶ä»–è¯­è¨€ï¼ˆå¦‚ C++ã€C#ã€Javaã€Pythonã€PHPã€Goï¼‰å’Œè¿è¡Œæ—¶ï¼ˆå¦‚ .NET å’Œ Unityï¼‰æä¾›äº†ä¸°å¯Œçš„æ‰©å±•ç”Ÿæ€ç³»ç»Ÿã€‚

æœ¬æ–‡è®°å½•ä¸€ä¸‹ VSCode å¸¸ç”¨çš„ä¸€äº›å¿«æ·é”®å’Œé…ç½®ï¼Œå¤‡å¿˜ã€‚


å¿«æ·é”®æŸ¥çœ‹å¿«æ·é”®å·¦ä¸‹è§’é½¿è½®ï¼ˆManageï¼‰ï¼ŒKeyboard Shortcuts
VSCodeçš„å¾ˆå¤šå¿«æ·é”®å’Œsublimeç›¸åŒï¼Œè¿™ä¸ªå¿…é¡»ç‚¹èµã€‚sublimeå¿«æ·é”®å‚è€ƒã€ŠSublime Text3ã€‹ã€‚
å…¨å±€æœç´¢command-shift-F
é€‰æ‹©ç›¸åŒå†…å®¹é€‰ä¸­ä¸€éƒ¨åˆ†å†…å®¹åï¼Œcommand-Då¯ä»¥é€‰ä¸­ç›¸åŒå†…å®¹ï¼Œè¿›è¡Œæ‰¹é‡æ“ä½œï¼Œæ¯”å¦‚printå˜logã€‚é…åˆcommand-å·¦å³é”®ï¼Œå¯ä»¥æ‰¹é‡æ“ä½œä¸Šä¸€è¡Œä¸‹ä¸€è¡Œï¼Œæ¯”å¦‚printæ‰€åœ¨è¡Œè·³è½¬åˆ°è¡Œå°¾ï¼Œä¸‹é¢ä¸€è¡Œæ·»åŠ logã€‚
åŒåˆ—å¤šè¡Œç¼–è¾‘command-option-ä¸Šä¸‹é”®
sublimeä¸­ä½¿ç”¨control-shift-ä¸Šä¸‹é”®
è‡ªåŠ¨è¡¥å…¨å‡½æ•°è¿”å›å€¼å°šæœªæ‰¾åˆ°è§£å†³åŠæ³•ã€‚
æƒ³è¦åƒã€ŠIDEAå¸¸ç”¨å¿«æ·é”®å’Œé…ç½®ã€‹ä¸€æ–‡ä¸­çš„IDEAå¿«æ·é”®ä¸€æ ·ï¼Œè‡ªåŠ¨è¡¥å…¨å‡½æ•°è¿”å›å€¼ï¼Œä½†æ˜¯å°šæœªæ‰¾åˆ°è§£å†³åŠæ³•ã€‚
å‡½æ•°è·³è½¬command-å•å‡»ï¼šè·³è½¬å‡½æ•°å®šä¹‰ï¼Œæˆ–è·³è½¬å‡½æ•°å¼•ç”¨control-å‡å·ï¼šè·³å›ä¹‹å‰ä½ç½®
ä»£ç æ ¼å¼åŒ–option-shift-Få¯¹äºPythonä»£ç ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œä¼šæç¤ºå®‰è£…autopep8ï¼Œå®‰è£…å³å¯ã€‚
pip install autopep8



é…ç½®æ‰“å¼€é…ç½®æ–‡ä»¶command-shift-Pï¼Œè¾“å…¥settings.jsonï¼Œé€‰æ‹©Open User Settings
terminalé…ç½®Codeï¼ŒPreferencesï¼ŒSettingsï¼ŒUserï¼ŒFeaturesï¼ŒTerminal
è§£å†³terminalä¸­æ–‡ä¹±ç é—®é¢˜vscodeä¸­ä½¿ç”¨terminalæ—¶å‘ç°ä¸­æ–‡ä¹±ç ï¼Œecho $LANGæŸ¥çœ‹localeï¼Œå€¼ä¸ºzh_HANS_cn.UTF-8ï¼Œéœ€è¦æ”¹æˆzh_CN.UTF-8ã€‚
vim ~/.zshrc# orvim ~/.bash_profile

æ·»åŠ ï¼š
export LANG=zh_CN.UTF-8

å®‰è£…æ’ä»¶å·¦ä¾§è¾¹æ ï¼ŒExtensionsï¼Œæœç´¢æ’ä»¶å®‰è£…å³å¯ã€‚
æ’ä»¶é…ç½®æ–¹æ³•ï¼šCodeï¼ŒPreferencesï¼ŒSettingsï¼Œæœç´¢æ’ä»¶åç§°ã€‚
ä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨æ ¼å¼åŒ–Codeï¼ŒPreferencesï¼ŒSettingsï¼ŒText Editorï¼ŒFormattingï¼Œå‹¾é€‰Format On Saveã€‚å½“ command-S ä¿å­˜æ–‡ä»¶æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡ä»£ç æ ¼å¼åŒ–ã€‚
ç²˜è´´æ—¶æ­£ç¡®ç¼©è¿›å¤åˆ¶ä¸€æ•´å—ä»£ç è¿›è¡Œç²˜è´´æ—¶ï¼Œç¼©è¿›å¾€å¾€ä¸å¯¹ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒæ•´ï¼Œè¿™ç‚¹è¿˜æ˜¯jetbrainså¥½ç”¨ã€‚ä¸è¿‡å¥½åœ¨vscodeæ’ä»¶å¾ˆå¤šï¼Œâ€œPaste and Indentâ€è¿™ä¸ªæ’ä»¶å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚
1ã€å®‰è£…â€œPaste and Indentâ€
2ã€command-shift-Pï¼Œæ‰“å¼€å‘½ä»¤é¢æ¿ã€‚
3ã€è¾“å…¥keyboardï¼Œé€‰æ‹© References: Open Keyboard Shortcuts(JSON)
4ã€ç¼–è¾‘ keybindings.jsonï¼Œå¡«å…¥å†…å®¹ä¸º
// Place your key bindings in this file to override the defaults[    &#123;        &quot;key&quot;: &quot;ctrl+v&quot;,        &quot;command&quot;: &quot;pasteAndIndent.action&quot;,        &quot;when&quot;: &quot;editorTextFocus &amp;&amp; !editorReadonly&quot;    &#125;,    &#123;        &quot;key&quot;: &quot;ctrl+v&quot;,        &quot;command&quot;: &quot;editor.action.clipboardPasteAction&quot;,        &quot;when&quot;: &quot;!editorTextFocus&quot;    &#125;,    &#123;        &quot;key&quot;: &quot;ctrl+shift+v&quot;,        &quot;command&quot;: &quot;editor.action.clipboardPasteAction&quot;,        &quot;when&quot;: &quot;editorTextFocus &amp;&amp; !editorReadonly&quot;    &#125;]

é‡å¯vscodeï¼Œå¤åˆ¶ç²˜è´´æ—¶ï¼Œä½¿ç”¨ctrl+vå°±èƒ½å¤Ÿè‡ªåŠ¨ç¼©è¿›äº†ã€‚ä½†æ˜¯ï¼Œctrl+væœ‰æ—¶å€™çš„è¡¨ç°åè€Œä¸å¦‚å¸¸è§„ç²˜è´´ï¼ˆcmd+vï¼‰ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨cmd+zè¿›è¡Œæ’¤é”€ï¼Œå°±å˜æˆäº†å¸¸è§„ç²˜è´´çš„æ•ˆæœã€‚è¿™ä¸ªæ’ä»¶çš„åŸç†åº”è¯¥æ˜¯å…ˆè¿›è¡Œäº†å¸¸è§„çš„ç²˜è´´ï¼Œç„¶åè¿›è¡Œäº†ç¼©è¿›æ ¼å¼åŒ–ï¼Œå› æ­¤cmd+zå¯ä»¥è¿˜åŸå¸¸è§„ç²˜è´´çš„æ•ˆæœã€‚
pythonä»£ç æ£€æŸ¥å‚è€ƒæ–‡æ¡£ï¼šã€ŠPythonä»£ç è´¨é‡æ£€æŸ¥ã€‹
è®¾ç½®Pythonä»£ç ç‰‡æ®µ1ã€æ‰“å¼€ä»£ç ç‰‡æ®µé…ç½®Codeï¼ŒPreferencesï¼ŒUser Snippetsï¼Œé€‰æ‹©Pythonæ­¤æ—¶ä¼šæ‰“å¼€ä¸€ä¸ªpython.jsonæ–‡ä»¶ï¼Œè¿™å°±æ˜¯ä»£ç ç‰‡æ®µæ¨¡æ¿é…ç½®æ–‡ä»¶ã€‚ä¸æ­¢å¯ä»¥é…ç½®æ–‡ä»¶å¤´éƒ¨æ³¨é‡Šï¼Œè¿˜å¯ä»¥é…ç½®é€šç”¨å†…å®¹ã€‚
2ã€å¡«å…¥ä»£ç ç‰‡æ®µé…ç½®ç™¾åº¦é£æ ¼çš„Python Header Docstringï¼š
&#123;    // Place your snippets for python here. Each snippet is defined under a snippet name and has a prefix, body and     // description. The prefix is what is used to trigger the snippet and the body will be expanded and inserted. Possible variables are:    // $1, $2 for tab stops, $0 for the final cursor position, and $&#123;1:label&#125;, $&#123;2:another&#125; for placeholders. Placeholders with the     // same ids are connected.    // Example:    // &quot;Print to console&quot;: &#123;    //  &quot;prefix&quot;: &quot;log&quot;,    //  &quot;body&quot;: [    //      &quot;console.log(&#x27;$1&#x27;);&quot;,    //      &quot;$2&quot;    //  ],    //  &quot;description&quot;: &quot;Log output to console&quot;    // &#125;    &quot;header&quot;: &#123;        &quot;prefix&quot;: &quot;pythonheader&quot;,        &quot;body&quot;: [            &quot;#!/usr/bin/env python3&quot;,            &quot;# -*- coding:utf-8 -*-&quot;,            &quot;#&quot;,            &quot;# Copyright (c) $CURRENT_YEAR voidking.com, Inc. All Rights Reserved&quot;,            &quot;#&quot;,            &quot;\&quot;\&quot;\&quot;&quot;,            &quot;Authors: voidking&quot;,            &quot;Date:    $CURRENT_YEAR/$CURRENT_MONTH/$CURRENT_DATE&quot;,            &quot;\&quot;\&quot;\&quot;&quot;        ]    &#125;&#125;

è°·æ­Œé£æ ¼çš„Python Header Docstringï¼š
&#123;    &quot;header&quot;: &#123;        &quot;prefix&quot;: &quot;pythonheader&quot;,        &quot;body&quot;: [            &quot;#!/usr/bin/env python3&quot;,            &quot;# -*- coding:utf-8 -*-&quot;,            &quot;#&quot;,            &quot;# Copyright (c) $CURRENT_YEAR voidking.com, Inc. All Rights Reserved&quot;,            &quot;#&quot;,            &quot;\&quot;\&quot;\&quot;A one-line summary of the module or program, terminated by a period.&quot;,            &quot;&quot;,            &quot;Leave one blank line.  The rest of this docstring should contain an&quot;,            &quot;overall description of the module or program.  Optionally, it may also&quot;,            &quot;contain a brief description of exported classes and functions and/or usage&quot;,            &quot;examples.&quot;,            &quot;\&quot;\&quot;\&quot;&quot;        ]    &#125;&#125;

å‚è€ƒæ–‡æ¡£ï¼š

What is the common header format of Python files?
Google Python Style Guide - Comments and Docstrings
Snippets in Visual Studio Code - Variables

3ã€ä½¿ç”¨ä»£ç ç‰‡æ®µæ–°å»ºPythonæ–‡ä»¶ï¼Œæ–‡ä»¶å¤´éƒ¨ä¸ä¼šå‡ºç°æ³¨é‡Šã€‚è¾“å…¥pythonheaderï¼Œæ ¹æ®æç¤ºå›è½¦ï¼Œå°±ä¼šè‡ªåŠ¨æ·»åŠ æ³¨é‡Šäº†ã€‚è¿™ç§ç”¨æ³•å’Œsublimeçš„Emmetæ’ä»¶å¾ˆåƒï¼Œ!+tabè‡ªåŠ¨ç”Ÿæˆhtml5æ¡†æ¶ã€‚
è‡ªåŠ¨ç”ŸæˆDocstring1ã€å®‰è£…æ’ä»¶ autoDocstring - Python Docstring Generator 
2ã€ä½¿ç”¨ autoDocstringåœ¨æŸä¸ªå‡½æ•°åä¸‹é¢çš„ç¬¬ä¸€è¡Œï¼Œè¾“å…¥command+shift+2ï¼Œå°±ä¼šè‡ªåŠ¨æ·»åŠ Docstringæ¨¡æ¿æˆ–è€…å³é”®ï¼Œé€‰æ‹©Generate Docstringï¼Œå°±ä¼šè‡ªåŠ¨æ·»åŠ Docstringæ¨¡æ¿
é»˜è®¤æ˜¯é£æ ¼æ˜¯google python styleï¼Œä¸€èˆ¬ä¸ç”¨ä¿®æ”¹ã€‚
ä¿®æ”¹é£æ ¼çš„æ–¹æ³•ï¼šCodeï¼ŒPreferencesï¼ŒSettingsï¼Œæœç´¢autoDocstringï¼Œæ‰¾åˆ°Auto Docstring: Docstring Formatï¼Œé€‰æ‹©å…¶ä»–é£æ ¼ï¼ˆä¾‹å¦‚pep257ï¼‰ã€‚
å‚è€ƒæ–‡æ¡£ï¼šã€ŠPythonä»£ç é£æ ¼æŒ‡å—ã€‹
gitåˆ†æ”¯ä»£ç æ¯”è¾ƒgitåˆ†æ”¯ä»£ç æ¯”è¾ƒåˆå¹¶ï¼ŒJetBrainsä¸­çš„Show Diff with Working Treeéå¸¸å¥½ç”¨ã€‚vscodeä¸Šæ²¡æœ‰èƒ½å¤Ÿå®Œç¾æ›¿ä»£è¿™ä¸ªåŠŸèƒ½çš„æ’ä»¶ï¼Œgitlensåªèƒ½ç®—å·®å¼ºäººæ„ã€‚
1ã€å®‰è£…gitlensæ’ä»¶
2ã€å·¦è¾¹æ æ˜¾ç¤ºgitlensæ’ä»¶command-shift-Pï¼Œæ‰“å¼€å‘½ä»¤é¢æ¿ã€‚è¾“å…¥gitlenssï¼Œæ‰¾åˆ° Gitlens: Set Views Layoutï¼Œç‚¹å‡»å®ƒã€‚é€‰æ‹©Gitlens Layoutï¼Œè¿™æ—¶gitlensæ’ä»¶å°±ä¼šæ˜¾ç¤ºåœ¨å·¦è¾¹æ ã€‚
3ã€é€‰æ‹©åˆ†æ”¯è¿›è¡Œæ¯”è¾ƒç‚¹å‡»gitlensæ’ä»¶ï¼ŒBRANCHSï¼Œå½“å‰åˆ†æ”¯ä¼šæœ‰ä¸€ä¸ªå¯¹å·ã€‚é€‰ä¸­æƒ³è¦å¯¹æ¯”çš„åˆ†æ”¯ï¼Œoption+å•å‡»ï¼ŒCompare with Working Treeå°±ä¼šå‡ºç°åœ¨ SEARCH&amp;COMPAREã€‚
4ã€ä»£ç æ¯”è¾ƒSEARCH&amp;COMPAREï¼Œé€‰ä¸­Comparing Workingâ€¦ï¼Œç‚¹å‡»Swap Comparisonï¼Œè®©å½“å‰ä»£ç æ”¾åœ¨å·¦è¾¹ï¼ˆä¸ªäººä¹ æƒ¯ï¼‰ã€‚x files changedä¸­ç‚¹å‡»é‚£äº›å­˜åœ¨diffçš„æ–‡ä»¶ï¼Œå°±å¯ä»¥æ„‰å¿«åœ°è¿›è¡Œä»£ç æ¯”è¾ƒäº†ã€‚
5ã€ä»£ç åˆå¹¶æ ¹æ®å·¦å³ä¸¤è¾¹ä»£ç çš„ä¸åŒï¼Œè‡ªè¡Œä¿®æ”¹å·¦è¾¹çš„ä»£ç ã€‚å’ŒJetBrainsç›¸æ¯”ï¼Œæœ¬æ’ä»¶æœ€å¤§çš„ç¼ºç‚¹æ˜¯ä¸èƒ½é€šè¿‡å¿«æ·æŒ‰é’®ä¿®æ”¹å·¦è¾¹çš„ä»£ç ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
        <category>java</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>vscode</tag>
        <tag>ç¼–è¾‘å™¨</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>macosæŒ‚è½½é˜¿é‡Œäº‘ç›˜å½“åšæœ¬åœ°ç›˜</title>
    <url>/hobby-macos-mount-aliyundrive/</url>
    <content><![CDATA[å‰è¨€ç›¸æ¯”äºç™¾åº¦äº‘ç›˜ï¼Œé˜¿é‡Œäº‘ç›˜è¿˜ä¸å¤Ÿæˆç†Ÿï¼Œå¾ˆå¤šåŠŸèƒ½è¿˜ä¸å®Œå–„ï¼Œä½†æ˜¯æœ€å¤§çš„ä¼˜ç‚¹æ˜¯ä¸é™é€Ÿï¼Œä¸é™é€Ÿï¼Œä¸é™é€Ÿï¼ä¸ºäº†æ›´æ–¹ä¾¿åœ°ä½¿ç”¨é˜¿é‡Œäº‘ç›˜ï¼Œæœ¬æ–‡ç ”ç©¶ä¸€ä¸‹é˜¿é‡Œäº‘ç›˜æŒ‚è½½åˆ°æœ¬åœ°macosç³»ç»Ÿçš„æ–¹æ³•ã€‚å‚è€ƒæ–‡æ¡£ï¼š

webdav-aliyundriver
macæŒ‚è½½é˜¿é‡Œäº‘ç›˜



æ€è·¯é¦–å…ˆé€šè¿‡webdavåè®®æŠŠé˜¿é‡Œäº‘ç›˜å˜æˆæœ¬åœ°æ–‡ä»¶æœåŠ¡å™¨ï¼Œç„¶åé€šè¿‡macæŒ‚è½½å·¥å…·æŒ‚è½½æœ¬åœ°æ–‡ä»¶æœåŠ¡å™¨ï¼Œå½“åšæœ¬åœ°ç£ç›˜ä½¿ç”¨ã€‚
å…¶ä¸­webdavåè®®æ˜¯åŸºäºWebçš„åˆ†å¸ƒå¼åˆ›ä½œå’Œç‰ˆæœ¬æ§åˆ¶åè®®ï¼ˆWeb-based Distributed Authoring and Versioningï¼‰ï¼Œå®ƒæ‰©å±•äº†HTTP 1.1ï¼Œåœ¨GETã€POSTã€HEADç­‰å‡ ä¸ªHTTPæ ‡å‡†æ–¹æ³•ä»¥å¤–æ·»åŠ äº†ä¸€äº›æ–°çš„æ–¹æ³•ï¼Œä½¿åº”ç”¨ç¨‹åºå¯å¯¹Web Serverç›´æ¥è¯»å†™ï¼Œè¿˜å¯ä»¥æ”¯æŒæ–‡ä»¶çš„ç‰ˆæœ¬æ§åˆ¶ã€‚
webdav-aliyundriverè¿™ä¸ªå·¥å…·å®ç°äº†é˜¿é‡Œäº‘ç›˜çš„webdavåè®®ï¼Œå¯ä»¥ç”¨æ¥æŠŠé˜¿é‡Œäº‘ç›˜å˜æˆæœ¬åœ°æ–‡ä»¶æœåŠ¡å™¨ã€‚
CloudMounterè¿™ä¸ªå·¥å…·å¯ä»¥ç”¨æ¥æŒ‚è½½æ–‡ä»¶æœåŠ¡å™¨å½“åšæœ¬åœ°ç£ç›˜ã€‚
æ“ä½œè·å–é˜¿é‡Œäº‘token1ã€ç™»å½•é˜¿é‡Œäº‘ç›˜ç½‘é¡µç‰ˆ
2ã€F12 -&gt; Application -&gt; Storage -&gt; Local Storage -&gt; token -&gt; refresh_token
å¯åŠ¨æœ¬åœ°æ–‡ä»¶æœåŠ¡å™¨1ã€ä¸‹è½½webdav-aliyundriver.jarã€‚
2ã€å¯åŠ¨é˜¿é‡Œäº‘ç›˜ä¸ºæœ¬åœ°æ–‡ä»¶æœåŠ¡å™¨java -jar webdav-aliyundriver.jar --aliyundrive.refresh-token=&quot;your refreshToken&quot;
3ã€æµ‹è¯•è®¿é—®æµè§ˆå™¨è®¿é—® http://127.0.0.1:8080 ï¼Œè¾“å…¥ç”¨æˆ·åå’Œå¯†ç å°±å¯ä»¥çœ‹åˆ°äº‘ç›˜é‡Œçš„æ–‡ä»¶äº†ã€‚å…¶ä¸­ç”¨æˆ·åå’Œå¯†ç éƒ½æ˜¯adminã€‚
æŒ‚è½½æœ¬åœ°æ–‡ä»¶æœåŠ¡å™¨1ã€ä¸‹è½½å®‰è£…CloudMounterç ´è§£ç‰ˆï¼ˆæœ‰æ¡ä»¶çš„åŒå­¦è¿˜æ˜¯è¦æ”¯æŒæ­£ç‰ˆå•Šï¼‰
2ã€æ‰“å¼€CloudMounterï¼Œé€‰æ‹©WebDAVã€‚å¡«å…¥åç§°ã€WebDAV URLã€ç”¨æˆ·åå’Œå¯†ç ã€‚
3ã€ç„¶åï¼Œå°±å¯ä»¥åœ¨macosç³»ç»Ÿä¸­æ„‰å¿«åœ°ä½¿ç”¨é˜¿é‡Œäº‘ç›˜äº†ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>macos</tag>
      </tags>
  </entry>
  <entry>
    <title>Airflowå…¥é—¨ç¯‡</title>
    <url>/dev-airflow-start/</url>
    <content><![CDATA[Airflowæ˜¯å•¥ï¼Ÿ
Airflow is a platform to programmatically author, schedule and monitor workflows.Airflow æ˜¯ä¸€ä¸ªä»¥ç¼–ç¨‹æ–¹å¼åˆ›ä½œã€å®‰æ’å’Œç›‘æ§å·¥ä½œæµçš„å¹³å°ã€‚


Airflow å¯ä»¥å°†å·¥ä½œæµç¼–æ’ä¸ºä»»åŠ¡çš„æœ‰å‘æ— ç¯å›¾ (DAG)ã€‚ 
Airflow è°ƒåº¦å™¨è°ƒåº¦ä»»åŠ¡åœ¨ä¸€ç»„workä¸Šæ‰§è¡Œï¼ŒåŒæ—¶æ»¡è¶³æŒ‡å®šçš„ä¾èµ–é¡¹ã€‚
Airflow æ‹¥æœ‰å¤§é‡çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥è½»æ¾åœ¨DAGä¸Šæ‰§è¡Œå¤æ‚çš„æ“ä½œã€‚
Airflow ç•Œé¢å‹å¥½ï¼Œç®¡é“ã€è¿›åº¦ã€é—®é¢˜ä¸€ç›®äº†ç„¶ã€‚

å­¦ä¹ èµ„æ–™ï¼š

Airflowå®˜æ–¹æ–‡æ¡£
Airflowä»é›¶åˆ°ç¥
æ²¡çœ‹è¿‡è¿™ç¯‡æ–‡ç« ï¼Œåˆ«è¯´ä½ ä¼šç”¨Airflow
ä½ ä¸å¯ä¸çŸ¥çš„ä»»åŠ¡è°ƒåº¦ç¥å™¨-AirFlow
æµ·å¤–çš„å·¥ç¨‹å¸ˆæ˜¯å¦‚ä½•ä½¿ç”¨Airflowçš„ï¼Ÿ



å®‰è£…å’Œåˆå§‹åŒ–å®‰è£…é…ç½®airflowï¼Œä¸»è¦å‚è€ƒAirflowæœ¬åœ°å¿«é€Ÿè¿è¡Œå’ŒAirflow Installationã€‚
å‰ç½®æ¡ä»¶ï¼šå®‰è£…é…ç½®å¥½python3.6ï¼Œè¯¦æƒ…å‚è€ƒã€ŠMacOSä¸Šè½¯ä»¶é…ç½®ã€‹ã€‚
1ã€å®‰è£…airflow
pip install &quot;apache-airflow[celery]==2.0.0&quot; --constraint &quot;https://raw.githubusercontent.com/apache/airflow/constraints-2.0.0/constraints-3.6.txt&quot;

2ã€åˆå§‹åŒ–
airflow db initairflow users create \    --username admin \    --firstname Peter \    --lastname Parker \    --role Admin \    --email spiderman@superhero.org

é»˜è®¤å®‰è£…ç›®å½•ä¸º /Users/voidking/airflowï¼Œå¦‚æœè¦æŒ‡å®šå®‰è£…ç›®å½•çš„è¯ï¼Œå¯ä»¥åœ¨æ‰§è¡Œåˆå§‹åŒ–å‘½ä»¤å‰é…ç½® AIRFLOW_HOME å˜é‡ã€‚
å¯åœAirflow1ã€å¯åŠ¨airflow
airflow webserver -D  # å¯åŠ¨webairflow scheduler -D  # å¯åŠ¨è°ƒåº¦å™¨

2ã€åœæ­¢airflowï¼Œå‚è€ƒAirflowä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ
# åœæ­¢airflow webserverps -ef | grep &#x27;airflow&#x27; | grep &#x27;webserver&#x27; | awk &#x27;&#123;print $2&#125;&#x27; | xargs kill -9 cd $AIRFLOW_HOME  rm -rf airflow-webserver.pidrm -rf airflow-webserver-monitor.pid# åœæ­¢airflow scheduler  ps -ef | grep &#x27;airflow&#x27; | grep &#x27;scheduler&#x27; | awk &#x27;&#123;print $2&#125;&#x27; | xargs kill -9  cd $AIRFLOW_HOME  rm -rf airflow-scheduler.pid

3ã€å°è£…ä¸€ä¸ªå¯åœè„šæœ¬è„šæœ¬é“¾æ¥
å¸¸ç”¨å‘½ä»¤airflow dags list

å®ç”¨é…ç½®ä¿®æ”¹airflow.cfgï¼š
# æŒ‡å®šdagsç›®å½•dags_folder = /Users/voidking/airflow/dags# dagsç›®å½•æ‰«ææ—¶é—´é—´éš”dag_dir_list_interval = 30# å¯ç”¨apiè¯·æ±‚auth_backend = airflow.api.auth.backend.basic_auth# æ—¥å¿—è·¯å¾„å’Œæ—¥å¿—æ–‡ä»¶ålog_filename_template = &#123;&#123; ti.dag_id &#125;&#125;/&#123;&#123; ti.task_id &#125;&#125;.log

æ›´å¤šå†…å®¹å‚è€ƒConfiguration Referenceã€‚
Hello DAGs1ã€å¯åŠ¨airflowå¯åŠ¨airflow webserverå’Œairflow schedulerï¼Œç„¶åè®¿é—®æœ¬åœ°8080ç«¯å£ï¼Œçœ‹åˆ°airflowç®¡ç†é¡µé¢
2ã€ç¼–å†™dagsè„šæœ¬ç¼–å†™ç¬¬ä¸€ä¸ªdagsè„šæœ¬ï¼Œå‘½åä¸º hello.py
#!/usr/bin/env python3# -*- coding: utf-8 -*-import datetimefrom airflow.models import DAGfrom airflow.operators.bash import BashOperatordefault_args = &#123;    &#x27;owner&#x27;: &#x27;airflow&#x27;,    &#x27;depends_on_past&#x27;: False,    &#x27;email&#x27;: [&#x27;airflow@example.com&#x27;],    &#x27;email_on_failure&#x27;: False,    &#x27;email_on_retry&#x27;: False,    &#x27;retries&#x27;: 1,    &#x27;retry_delay&#x27;: datetime.timedelta(minutes=5),&#125;dag = DAG(    dag_id=&#x27;hello&#x27;,    default_args=default_args,    description=&#x27;The first DAG&#x27;,    catchup=False,    schedule_interval=None,    start_date=datetime.datetime(2021, 1, 1),    tags=[&#x27;example&#x27;],)t1 = BashOperator(    task_id=&#x27;print_hello&#x27;,    bash_command=&#x27;echo &quot;Hello dags!&quot;&#x27;,    dag=dag)t2 = BashOperator(    task_id=&#x27;print_hello_again&#x27;,    bash_command=&#x27;echo &quot;Hello dags again!&quot;&#x27;,    dag=dag)t1 &gt;&gt; t2
ç®€å•æµ‹è¯•dagsè„šæœ¬ï¼špython hello.py
3ã€dagsè„šæœ¬æ”¾å…¥åˆ°airflow dagsç›®å½•hello.py æ”¾å…¥ /Users/voidking/airflow/dags ç›®å½•ï¼ˆæˆ–è€…åˆ›å»ºè½¯é“¾ï¼‰ï¼Œä½¿airflowå¯ä»¥æ‰«æè¯»å–åˆ°å®ƒï¼ˆå‰ææ˜¯å¯åŠ¨schedulerï¼‰ã€‚æ³¨æ„ï¼Œæ–°å»ºçš„dagsä»»åŠ¡å¹¶ä¸ä¼šé©¬ä¸Šå‡ºç°åœ¨ç•Œé¢ä¸Šï¼Œé»˜è®¤éœ€è¦5åˆ†é’Ÿã€‚å¦‚æœé¡µé¢å¤´éƒ¨å‡ºç°æŠ¥é”™ä¿¡æ¯ï¼Œè¯·æŒ‰ç…§æç¤ºä¿®æ”¹dagsè„šæœ¬ã€‚
å¦å¤–ï¼Œdagsè„šæœ¬ä¹Ÿå¯ä»¥æ”¾å…¥åˆ° /Users/voidking/.pyenv/versions/3.6.4/lib/python3.6/site-packages/airflow/example_dags/ ç›®å½•ï¼Œå’Œç¤ºä¾‹è„šæœ¬æ”¾åˆ°ä¸€èµ·ã€‚
4ã€è§¦å‘è¿è¡Œè¿™é‡Œçš„ä¼ å‚ä¸ºç©ºï¼Œå› ä¸ºä¸éœ€è¦é¢å¤–å‚æ•°ã€‚
5ã€æŸ¥çœ‹æ‰§è¡Œæ—¥å¿—ç‚¹å‡»æŸ¥çœ‹helloçš„dagsè¯¦æƒ…ï¼ŒæŸ¥çœ‹æ‰§è¡Œæ—¥å¿—ã€‚ä»¥ä¸Šï¼Œç¬¬ä¸€ä¸ªdagsè„šæœ¬è¿è¡Œå®Œæˆã€‚
é‡è·‘ä»»åŠ¡1ã€è¿›å…¥dagsè¯¦æƒ…é¡µé¢
2ã€ç‚¹å‡»éœ€è¦é‡è·‘çš„taskçš„å°æ–¹å—
3ã€ç‚¹å‡»Clearæˆ–è€…Runï¼Œé‡è·‘ä»»åŠ¡
TODOtutorial.pyè¯¦è§£ã€ä¼ å‚ã€æ¥å£è°ƒç”¨airflow + django
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonä»£ç è´¨é‡æ£€æŸ¥</title>
    <url>/dev-python-code-quality-check/</url>
    <content><![CDATA[Pylint vs Flake8FROM ChatGPTï¼š
Pylintå’ŒFlake8éƒ½æ˜¯ç”¨äºPythonä»£ç é™æ€åˆ†æçš„å·¥å…·ï¼Œå®ƒä»¬éƒ½å¯ä»¥å¸®åŠ©æ‚¨å‘ç°ä»£ç ä¸­çš„æ½œåœ¨é—®é¢˜å¹¶æä¾›ä¸€äº›ä»£ç è´¨é‡æ–¹é¢çš„å»ºè®®ã€‚ä½†æ˜¯ï¼Œå®ƒä»¬çš„è®¾è®¡ç›®æ ‡å’Œä½¿ç”¨æ–¹æ³•æœ‰æ‰€ä¸åŒã€‚
Pylintæ˜¯ä¸€ä¸ªéå¸¸å…¨é¢çš„å·¥å…·ï¼Œå®ƒä¼šå¯¹ä»£ç è¿›è¡Œæ›´ä¸¥æ ¼çš„æ£€æŸ¥ï¼ŒåŒ…æ‹¬PEP 8é£æ ¼æŒ‡å—å’Œä¸€äº›è¯­æ³•è§„åˆ™ã€‚å®ƒè¿˜å¯ä»¥æ£€æŸ¥ä»£ç ä¸­çš„é”™è¯¯å’Œæ¼æ´ï¼Œå¹¶æä¾›å¤æ‚åº¦å’Œç»´æŠ¤æ€§æ–¹é¢çš„å»ºè®®ã€‚å®ƒè¿˜å¯ä»¥è¿›è¡Œç±»å‹æ£€æŸ¥å’Œä»£ç é‡æ„å»ºè®®ç­‰é«˜çº§åŠŸèƒ½ã€‚å› æ­¤ï¼ŒPylinté€‚åˆå¤§å‹é¡¹ç›®å’Œå›¢é˜Ÿï¼Œå¯ä»¥å¸®åŠ©ä»–ä»¬ä¿æŒä»£ç è´¨é‡å’Œä¸€è‡´æ€§ã€‚
Flake8æ˜¯ä¸€ä¸ªæ›´è½»é‡çº§çš„å·¥å…·ï¼Œä¸»è¦å…³æ³¨ä»£ç é£æ ¼å’Œè¯­æ³•è§„åˆ™ã€‚å®ƒé€šè¿‡ç»“åˆå¤šä¸ªå·¥å…·ï¼Œå¦‚PyFlakeså’ŒPEP 8é£æ ¼æŒ‡å—æ£€æŸ¥å·¥å…·ï¼Œæä¾›äº†æ›´å¿«é€Ÿå’Œç®€ä¾¿çš„æ£€æŸ¥æ–¹å¼ã€‚Flake8å¯¹äºå°å‹é¡¹ç›®å’Œä¸ªäººå¼€å‘è€…éå¸¸é€‚ç”¨ã€‚
å› æ­¤ï¼Œå¦‚æœæ‚¨éœ€è¦ä¸€ä¸ªæ›´å…¨é¢çš„ä»£ç åˆ†æå·¥å…·å¹¶ä¸”æœ‰æ—¶é—´å’Œèµ„æºï¼Œæ‚¨å¯ä»¥é€‰æ‹©Pylintã€‚ä½†å¦‚æœæ‚¨æƒ³è¦ä¸€ä¸ªæ›´å¿«é€Ÿï¼Œè½»ä¾¿çš„å·¥å…·ï¼Œåˆ™Flake8å¯èƒ½æ›´é€‚åˆæ‚¨ã€‚æ— è®ºå“ªç§é€‰æ‹©ï¼Œå®ƒä»¬éƒ½å¯ä»¥æä¾›æœ‰ä»·å€¼çš„å¸®åŠ©æ¥æ”¹è¿›æ‚¨çš„ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

pylintå’Œflake8æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå„é€‚ç”¨äºä»€ä¹ˆåœºæ™¯ï¼Ÿ



Pylintpip install pylintpylint test.py

************* Module testtest.py:62:0: C0305: Trailing newlines (trailing-newlines)test.py:1:0: C0114: Missing module docstring (missing-module-docstring)test.py:30:-1: W0105: String statement has no effect (pointless-string-statement)test.py:43:4: C0116: Missing function or method docstring (missing-function-docstring)test.py:43:4: C0103: Method name &quot;twoSum&quot; doesn&#x27;t conform to snake_case naming style (invalid-name)test.py:43:21: W0621: Redefining name &#x27;nums&#x27; from outer scope (line 57) (redefined-outer-name)test.py:43:38: W0621: Redefining name &#x27;target&#x27; from outer scope (line 58) (redefined-outer-name)test.py:44:20: R1735: Consider using &#x27;&#123;&#125;&#x27; instead of a call to &#x27;dict&#x27;. (use-dict-literal)test.py:32:0: R0903: Too few public methods (1/2) (too-few-public-methods)test.py:58:4: C0103: Constant name &quot;target&quot; doesn&#x27;t conform to UPPER_CASE naming style (invalid-name)------------------------------------------------------------------Your code has been rated at 4.12/10 (previous run: 4.12/10, +0.00)

Flake8pip install flake8flake8 test.py#flake8 --ignore=E231,E302 *.py

solution.py:32:1: E302 expected 2 blank lines, found 1solution.py:45:14: E231 missing whitespace after &#x27;,&#x27;solution.py:52:52: E231 missing whitespace after &#x27;,&#x27;solution.py:57:14: E231 missing whitespace after &#x27;,&#x27;solution.py:57:16: E231 missing whitespace after &#x27;,&#x27;solution.py:57:19: E231 missing whitespace after &#x27;,&#x27;solution.py:60:31: E231 missing whitespace after &#x27;,&#x27;solution.py:62:1: W391 blank line at end of file

å°ç»“Pylintå’ŒFlake8çš„é»˜è®¤æ£€æŸ¥ç»“æœï¼Œå®Œå…¨ä¸ä¸€è‡´ï¼Œè¿™ä¸ªæ˜¯æˆ‘æ²¡æƒ³åˆ°çš„ã€‚
ç»¼åˆæ¥çœ‹ï¼Œè¿˜æ˜¯Pylinkæ›´ä¼˜ï¼Œå› ä¸ºå®ƒç»™å‡ºçš„æ£€æŸ¥ç»“æœæ›´æœ‰æ„ä¹‰ã€‚è€ŒFlake8ç»™å‡ºçš„æ£€æŸ¥ç»“æœï¼Œéƒ½æ˜¯äº›ç©ºæ ¼ç©ºè¡Œè§„èŒƒï¼Œè¿™äº›å¯ä»¥é€šè¿‡é…ç½®autopep8è‡ªåŠ¨è¿›è¡Œæ ¼å¼åŒ–ã€‚
VSCodeä¸­autopep8é…ç½®æ–¹æ³•å‚è€ƒã€ŠVSCodeå¸¸ç”¨å¿«æ·é”®å’Œé…ç½®ã€‹ã€‚
ä½¿ç”¨autopep8çš„æ–¹æ³•ï¼š
pip install autopep8autopep8 test.pyautopep8 -i test.py

å‚è€ƒæ–‡æ¡£ï¼š

How can I configure Pylint to check all things PEP8 checks?

]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
        <category>testing</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>chatgpt</tag>
        <tag>æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonæ‰“å°æ—¥å¿—</title>
    <url>/dev-python-log/</url>
    <content><![CDATA[è¾“å‡ºæ—¥å¿—åˆ°æ§åˆ¶å°import sysimport logginglog = logging.getLogger(__name__)log.setLevel(logging.DEBUG)log.addHandler(logging.StreamHandler(sys.stdout)) #é»˜è®¤sys.errorlog.info(&#x27;print info level log to console&#x27;)



è¾“å‡ºæ—¥å¿—åˆ°æ–‡ä»¶import sysimport logginglog = logging.getLogger(__name__)log.setLevel(logging.DEBUG)log.addHandler(logging.FileHandler(&#x27;python.log&#x27;))log.info(&#x27;print info level log to file&#x27;)
æ—¥å¿—æ–‡ä»¶é»˜è®¤å­˜å‚¨åˆ°æ‰§è¡Œå‘½ä»¤çš„è·¯å¾„ä¸‹ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ç»å¯¹è·¯å¾„æ¥æŒ‡å®šæ—¥å¿—æ–‡ä»¶è·¯å¾„ã€‚
å°è£…æ—¥å¿—æ¨¡å—1ã€å°è£…ä¸€ä¸ªæ—¥å¿—æ¨¡å— log.py
#!/usr/bin/env python# -*- coding: utf-8 -*-import osimport loggingimport logging.handlersdef init_log(log_path, level=logging.INFO, when=&quot;D&quot;, backup=7,             format=&quot;%(levelname)s: %(asctime)s: %(filename)s:%(lineno)d * %(thread)d %(message)s&quot;,             datefmt=&quot;%m-%d %H:%M:%S&quot;):    &quot;&quot;&quot;    init_log - initialize log module    Args:    log_path - Log file path prefix.    Log data will go to two files: log_path.log and log_path.log.wf    Any non-exist parent directories will be created automatically    level - msg above the level will be displayed    DEBUG &lt; INFO &lt; WARNING &lt; ERROR &lt; CRITICAL    the default value is logging.INFO    when - how to split the log file by time interval    &#x27;S&#x27; : Seconds    &#x27;M&#x27; : Minutes    &#x27;H&#x27; : Hours    &#x27;D&#x27; : Days    &#x27;W&#x27; : Week day    default value: &#x27;D&#x27;    format - format of the log    default format:    %(levelname)s: %(asctime)s: %(filename)s:%(lineno)d * %(thread)d %(message)s    INFO: 12-09 18:02:42: log.py:40 * 139814749787872 HELLO WORLD    backup - how many backup file to keep    default value: 7    Raises:    OSError: fail to create log directories    IOError: fail to open log file    &quot;&quot;&quot;    formatter = logging.Formatter(format, datefmt)    logger = logging.getLogger()    logger.setLevel(level)    dir = os.path.dirname(log_path)    if not os.path.isdir(dir):        os.makedirs(dir)    handler = logging.handlers.TimedRotatingFileHandler(log_path + &quot;.log&quot;,                                                        when=when,                                                        backupCount=backup)    handler.setLevel(level)    handler.setFormatter(formatter)    logger.addHandler(handler)    handler = logging.handlers.TimedRotatingFileHandler(log_path + &quot;.log.wf&quot;,                                                        when=when,                                                        backupCount=backup)    handler.setLevel(logging.WARNING)    handler.setFormatter(formatter)    logger.addHandler(handler)

2ã€ä½¿ç”¨æ—¥å¿—æ¨¡å—
#!/usr/bin/env python# -*- coding: utf-8 -*-import osimport loggingimport logclass VKTest(object):    def __init__(self):        logging.info(&#x27;print info level log to file&#x27;)if __name__==&quot;__main__&quot;:    # æ—¥å¿—ä¿å­˜åˆ°./log/vk.logå’Œ./log/vk.log.wfï¼ŒæŒ‰å¤©åˆ‡å‰²ï¼Œä¿ç•™7å¤©    log.init_log(&quot;./log/vk&quot;)    logging.info(&quot;ç¨‹åºå¯åŠ¨!!!&quot;)    vk = VKTest()    logging.info(&quot;ç¨‹åºç»“æŸ!!!&quot;)

æ‰§è¡Œè„šæœ¬åï¼Œæ—¥å¿—å†…å®¹ä¼šè¾“å‡ºåˆ° log/vk.log ä¸­ã€‚
å°è£…æ—¥å¿—æ¨¡å—2.01ã€å°è£…ä¸€ä¸ªæ—¥å¿—æ¨¡å— log.py
#!/usr/bin/env python# -*- coding: utf-8 -*-import osimport loggingimport logging.handlersDEFAULT_LOG_PATH = &#x27;./log/&#x27;class Log(object):    def __init__(self,                 logfile_name=&#x27;default&#x27;,                 log_path=DEFAULT_LOG_PATH,                 level=logging.INFO,                 when=&quot;D&quot;,                 backup=7,                 format=&quot;%(levelname)s: %(asctime)s: %(filename)s:%(lineno)d * %(thread)d %(message)s&quot;,                 datefmt=&quot;%m-%d %H:%M:%S&quot;):        &quot;&quot;&quot;        init_log - initialize log module        Args:        log_path - Log file path prefix.        Log data will go to two files: log_path.log and log_path.log.wf        Any non-exist parent directories will be created automatically        level - msg above the level will be displayed        DEBUG &lt; INFO &lt; WARNING &lt; ERROR &lt; CRITICAL        the default value is logging.INFO        when - how to split the log file by time interval        &#x27;S&#x27; : Seconds        &#x27;M&#x27; : Minutes        &#x27;H&#x27; : Hours        &#x27;D&#x27; : Days        &#x27;W&#x27; : Week day        default value: &#x27;D&#x27;        format - format of the log        default format:        %(levelname)s: %(asctime)s: %(filename)s:%(lineno)d * %(thread)d %(message)s        INFO: 12-09 18:02:42: log.py:40 * 139814749787872 HELLO WORLD        backup - how many backup file to keep        default value: 7        Raises:        OSError: fail to create log directories        IOError: fail to open log file        &quot;&quot;&quot;        formatter = logging.Formatter(format, datefmt)        # getLoggerä¸€å®šè¦ä¼ å‚ï¼Œå¦åˆ™å¤šæ¬¡è°ƒç”¨å¯¹è±¡åˆ›å»ºï¼Œå¾—åˆ°çš„ä¼šæ˜¯åŒä¸€ä¸ªloggerå¯¹è±¡        # åæœå°±æ˜¯ç›¸åŒçš„æ—¥å¿—å†…å®¹ï¼Œä¼šåŒæ—¶å†™åˆ°å¤šä¸ªä¸åŒçš„æ—¥å¿—æ–‡ä»¶ä¸­        self.logger = logging.getLogger(logfile_name)        self.logger.setLevel(level)        if not os.path.exists(log_path):            os.makedirs(log_path)                    common_log = os.path.join(log_path, logfile_name + &quot;.log&quot;)        handler = logging.handlers.TimedRotatingFileHandler(common_log,                                                            when=when,                                                            backupCount=backup)        handler.setLevel(level)        handler.setFormatter(formatter)        self.logger.addHandler(handler)        wf_log = os.path.join(log_path, logfile_name + &quot;.log.wf&quot;)        handler = logging.handlers.TimedRotatingFileHandler(wf_log,                                                            when=when,                                                            backupCount=backup)        handler.setLevel(logging.WARNING)        handler.setFormatter(formatter)        self.logger.addHandler(handler)    def get_logger(self):        return self.logger

2ã€ä½¿ç”¨æ—¥å¿—æ¨¡å—
#!/usr/bin/env python# -*- coding: utf-8 -*-import osimport log# æ—¥å¿—ä¿å­˜åˆ°./log/vk.logå’Œ./log/vk.log.wfï¼ŒæŒ‰å¤©åˆ‡å‰²ï¼Œä¿ç•™7å¤©logger = log.Log(logfile_name=&#x27;vk_test&#x27;).get_logger()logger = log.Log(logfile_name=&#x27;vk&#x27;).get_logger()class VKTest(object):    def __init__(self):        logger.info(&#x27;print info level log to file&#x27;)if __name__==&quot;__main__&quot;:    logger.info(&quot;ç¨‹åºå¯åŠ¨!!!&quot;)    vk = VKTest()    logger.info(&quot;ç¨‹åºç»“æŸ!!!&quot;)

æ‰§è¡Œè„šæœ¬åï¼Œæ—¥å¿—å†…å®¹ä¼šè¾“å‡ºåˆ° log/vk.log ä¸­ã€‚
å‚è€ƒæ–‡æ¡£
Pythoné»‘é­”æ³•æ‰‹å†Œ
Python Cookbook 3rd Edition Documentation
Google Pythoné£æ ¼æŒ‡å—
unittest - å•å…ƒæµ‹è¯•æ¡†æ¶

]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonæ“ä½œMySQL</title>
    <url>/dev-python-mysql/</url>
    <content><![CDATA[å‰è¨€pythonæ“ä½œmysqlæ•°æ®åº“è¿›è¡Œå¢åˆ æŸ¥æ”¹ï¼Œæ˜¯ç»å¸¸é‡åˆ°çš„éœ€æ±‚ï¼Œä¸‹é¢æ•´ç†ä¸€ä¸‹å…·ä½“æ“ä½œæ–¹æ³•ã€‚
æ•°æ®åº“å‡†å¤‡1ã€å®‰è£…é…ç½®å¥½mysqlå‚è€ƒã€Šä½¿ç”¨Dockerå®‰è£…é…ç½®Mysqlã€‹
2ã€åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç”¨çš„æ•°æ®åº“
create database vkphp default character set utf8 collate utf8_general_ci;use vkphp;CREATE TABLE IF NOT EXISTS `user` (  `id` int(8) NOT NULL AUTO_INCREMENT,  `name` varchar(32) NOT NULL,  `password` varchar(32) NOT NULL DEFAULT &#x27;&#x27;,  PRIMARY KEY (id)) ENGINE=InnoDB DEFAULT CHARSET=utf8;

æ›´å¤šå‘½ä»¤å‚è€ƒ ã€ŠMySQLå¸¸ç”¨å‘½ä»¤ã€‹


å®‰è£…ä¾èµ–pip3 install mysqlclient==1.3.13
æ’å…¥æ•°æ®#!/usr/bin/python3# -*- coding: UTF-8 -*-import MySQLdb# æ‰“å¼€æ•°æ®åº“è¿æ¥db = MySQLdb.connect(host=&quot;localhost&quot;,                     port=&quot;3306&quot;,                    user=&quot;root&quot;,                     password=&quot;voidking&quot;,                     database=&quot;vkphp&quot;,                     charset=&#x27;utf8&#x27;)# ä½¿ç”¨cursor()æ–¹æ³•è·å–æ“ä½œæ¸¸æ ‡ cursor = db.cursor()# SQL æ’å…¥è¯­å¥sql = &quot;insert into `user` (`name`,`password`) values(&#x27;haojin&#x27;,&#x27;voidking&#x27;);&quot;try:   # æ‰§è¡Œsqlè¯­å¥   cursor.execute(sql)   # æäº¤åˆ°æ•°æ®åº“æ‰§è¡Œ   db.commit()except:   # å‘ç”Ÿé”™è¯¯æ—¶å›æ»š   db.rollback()# å…³é—­æ•°æ®åº“è¿æ¥db.close()

å…¶ä»–æ“ä½œå‚è€ƒPython æ“ä½œ MySQL æ•°æ®åº“ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>mysql</tag>
        <tag>æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>PythonåŒ…ç®¡ç†å·¥å…·pip</title>
    <url>/dev-python-pip/</url>
    <content><![CDATA[pipç®€ä»‹
Pip is a package-management system written in Python and is used to install and manage software packages. The Python Software Foundation recommends using pip for installing Python applications and its dependencies during deployment. Pip connects to an online repository of public packages, called the Python Package Index. Pip can be configured to connect to other package repositories (local or remote), provided that they comply to Python Enhancement Proposal 503.


Most distributions of Python come with pip preinstalled. Python 2.7.9 and later (on the python2 series), and Python 3.4 and later include pip by default.

ç›¸å…³æ–‡æ¡£ï¼š

Wikipedia - pip
ã€ŠPythonè½¯ä»¶ä»“åº“PyPIã€‹
ã€ŠPythonåŒ…ç®¡ç†å·¥å…·Condaã€‹
ã€ŠPythonç‰ˆæœ¬ç®¡ç†å™¨pyenvã€‹



å®‰è£…pipä½ç‰ˆæœ¬çš„pythonæ²¡æœ‰é»˜è®¤å®‰è£…pipï¼Œè¿™æ—¶å°±éœ€è¦æ‰‹åŠ¨å®‰è£…ã€‚
æ–¹æ³•ä¸€ï¼š
python -m ensurepip
æ–¹æ³•äºŒï¼š
wget https://bootstrap.pypa.io/get-pip.pypython get-pip.py -i http://pypi.douban.com/simple/ --trusted-host pypi.douban.com

æŸ¥çœ‹pipè·¯å¾„æŸ¥æ‰¾é»˜è®¤pythonçš„pipè·¯å¾„
which pipwhich python

æŸ¥çœ‹ç‰¹å®špythonçš„pipè·¯å¾„ï¼Œå·²çŸ¥pythonè·¯å¾„ä¸º/path/to/python
ls -l /path/to/pip/path/to/python -m pip --version

pip binä¸€èˆ¬å’Œpython binåœ¨ç›¸åŒè·¯å¾„ã€‚
pipå¸¸ç”¨å‘½ä»¤å®‰è£…è½¯ä»¶åŒ…å®‰è£…æœ€æ–°è½¯ä»¶åŒ…
pip install requests

å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„è½¯ä»¶åŒ…
pip install requests==2.25.1

æ›´å¤šç‰ˆæœ¬æ§åˆ¶æ–¹æ³•ï¼Œå‚è€ƒã€pipæ§åˆ¶è½¯ä»¶ç‰ˆæœ¬ã€‘ä¸€èŠ‚ã€‚
å®‰è£…wheelåŒ…
pip install xxx.whl

æŒ‡å®špypiåŠ é€Ÿpip install requests -i https://pypi.tuna.tsinghua.edu.cn/simple

æ‰¹é‡å®‰è£…è½¯ä»¶åŒ…1ã€ä¾èµ–çš„è½¯ä»¶åŒ…ï¼Œå…¨éƒ¨å†™å…¥ requirements.txt æ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚
pylint=2.17.0requests==2.25.1

2ã€æ‰§è¡Œå®‰è£…
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

ä¸‹è½½è½¯ä»¶åŒ…ä¸‹è½½è½¯ä»¶åŒ…ä½†ä¸å®‰è£…
pip download requests -d &quot;./&quot;

æŸ¥çœ‹è½¯ä»¶åŒ…æŸ¥çœ‹è½¯ä»¶åŒ…
pip show requestspip show -f requests

æŸ¥çœ‹éœ€è¦å‡çº§çš„è½¯ä»¶åŒ…
pip list -o

å‡çº§è½¯ä»¶åŒ…pip install --upgrade requestspip install -U requests

å¸è½½è½¯ä»¶åŒ…pip uninstall requests

æŸ¥çœ‹å…¼å®¹é—®é¢˜pip check package_namepip check # æ£€æŸ¥æ‰€æœ‰åŒ…

pipæ§åˆ¶è½¯ä»¶ç‰ˆæœ¬pipå®‰è£…è½¯ä»¶æ—¶ï¼Œæ§åˆ¶è½¯ä»¶ç‰ˆæœ¬çš„ç¬¦å·åŠå…¶å«ä¹‰å¦‚ä¸‹ï¼š
==: ç²¾ç¡®ç‰ˆæœ¬ã€‚å¦‚ requests==2.25.1ï¼Œè¡¨ç¤ºåªå®‰è£… requests çš„ 2.25.1 ç‰ˆæœ¬ã€‚!=: ä¸ç­‰äºæŸä¸ªç‰ˆæœ¬ã€‚å¦‚ requests!=2.25.1ï¼Œè¡¨ç¤ºå®‰è£…çš„ requests ç‰ˆæœ¬ä¸èƒ½æ˜¯ 2.25.1ã€‚&gt;: å¤§äºæŸä¸ªç‰ˆæœ¬ã€‚å¦‚ requests&gt;2.25.1ï¼Œè¡¨ç¤ºå®‰è£…çš„ requests ç‰ˆæœ¬å¿…é¡»å¤§äº 2.25.1ã€‚&gt;=: å¤§äºç­‰äºæŸä¸ªç‰ˆæœ¬ã€‚å¦‚ requests&gt;=2.25.1ï¼Œè¡¨ç¤ºå®‰è£…çš„ requests ç‰ˆæœ¬å¿…é¡»å¤§äºç­‰äº 2.25.1ã€‚&lt;: å°äºæŸä¸ªç‰ˆæœ¬ã€‚å¦‚ requests&lt;2.26.0ï¼Œè¡¨ç¤ºå®‰è£…çš„ requests ç‰ˆæœ¬å¿…é¡»å°äº 2.26.0ã€‚&lt;=: å°äºç­‰äºæŸä¸ªç‰ˆæœ¬ã€‚å¦‚ requests&lt;=2.25.1ï¼Œè¡¨ç¤ºå®‰è£…çš„ requests ç‰ˆæœ¬å¿…é¡»å°äºç­‰äº 2.25.1ã€‚~=: å…¼å®¹ç‰ˆæœ¬ã€‚å¦‚ requests~=2.25.1ï¼Œè¡¨ç¤ºå…è®¸çš„ requests ç‰ˆæœ¬èŒƒå›´ä¸ 2.25.1 å…¼å®¹ï¼Œå³å®‰è£…çš„ç‰ˆæœ¬åœ¨ 2.25.1ï¼ˆåŒ…å«ï¼‰åˆ° 2.26.0ï¼ˆä¸åŒ…å«ï¼‰ä¹‹é—´ã€‚å®‰è£…è¿™ä¸ªèŒƒå›´å†…å¯è·å¾—çš„æœ€é«˜çš„ç‰ˆæœ¬ã€‚===: ç²¾ç¡®åŒ¹é…ã€‚å¦‚ requests===2.25.1ï¼Œè¡¨ç¤ºåªå®‰è£…ä¸ 2.25.1 å®Œå…¨åŒ¹é…çš„ requests ç‰ˆæœ¬ã€‚è¿™ä¸ == ç±»ä¼¼ï¼Œä½†æ›´ä¸¥æ ¼ï¼Œè¦æ±‚ç‰ˆæœ¬æ ‡è¯†ç¬¦å®Œå…¨ä¸€è‡´ã€‚æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨é€—å· , æ¥ç»„åˆå¤šä¸ªæ¡ä»¶ã€‚ä¾‹å¦‚ï¼Œrequests&gt;=2.25.1,&lt;=2.26.0 è¡¨ç¤ºå®‰è£…çš„ requests ç‰ˆæœ¬å¿…é¡»å¤§äºç­‰äº 2.25.1 ä¸”å°äºç­‰äº 2.26.0ã€‚è¿™å…è®¸ä½ å®šä¹‰æ›´ç²¾ç¡®çš„ç‰ˆæœ¬èŒƒå›´ã€‚

pythonè½¯ä»¶åŒ…çš„ä¾èµ–Python è½¯ä»¶åŒ…ä¸­çš„ä¾èµ–é€šå¸¸åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šå¿…è¦ä¾èµ–ï¼ˆä¹Ÿç§°ä¸ºç¡¬ä¾èµ–ï¼‰å’Œå¯é€‰ä¾èµ–ï¼ˆä¹Ÿç§°ä¸ºè½¯ä¾èµ–ï¼‰ã€‚
å¿…è¦ä¾èµ–ï¼ˆç¡¬ä¾èµ–ï¼‰ï¼šå¿…è¦ä¾èµ–æ˜¯æŒ‡ä¸€ä¸ª Python åŒ…æ­£å¸¸è¿è¡Œæ‰€å¿…éœ€çš„å…¶ä»–åŒ…ã€‚è¿™äº›ä¾èµ–é€šå¸¸åŒ…å«åœ¨åŒ…çš„ setup.py æˆ– setup.cfg æ–‡ä»¶ä¸­ï¼Œæˆ–è€…åœ¨ä¸€ä¸ªåä¸º requirements.txt çš„æ–‡ä»¶ä¸­ã€‚å½“ä½ ä½¿ç”¨ pip å®‰è£…ä¸€ä¸ªåŒ…æ—¶ï¼Œå¿…è¦ä¾èµ–ä¼šè‡ªåŠ¨è¢«å®‰è£…ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªåŒ…åä¸º foo çš„å¿…è¦ä¾èµ–æ˜¯ bar å’Œ bazï¼Œé‚£ä¹ˆå½“ä½ è¿è¡Œ pip install foo æ—¶ï¼Œpip ä¼šè‡ªåŠ¨å®‰è£… fooã€bar å’Œ bazã€‚
å¯é€‰ä¾èµ–ï¼ˆè½¯ä¾èµ–ï¼‰ï¼šå¯é€‰ä¾èµ–æ˜¯æŒ‡é‚£äº›å¯¹äºä¸€ä¸ª Python åŒ…çš„æ ¸å¿ƒåŠŸèƒ½ä¸æ˜¯å¿…éœ€çš„ï¼Œä½†å¯èƒ½å¯¹æŸäº›é¢å¤–åŠŸèƒ½æˆ–ç‰¹æ€§æœ‰ç”¨çš„å…¶ä»–åŒ…ã€‚å¯é€‰ä¾èµ–é€šå¸¸åœ¨ setup.py æˆ– setup.cfg æ–‡ä»¶ä¸­çš„ â€œextras_requireâ€ éƒ¨åˆ†å®šä¹‰ã€‚å½“ä½ ä½¿ç”¨ pip å®‰è£…ä¸€ä¸ªåŒ…æ—¶ï¼Œå¯é€‰ä¾èµ–é»˜è®¤ä¸ä¼šè¢«å®‰è£…ã€‚ä½†æ˜¯ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨åŒ…ååé¢ä½¿ç”¨æ–¹æ‹¬å·ï¼ˆ[]ï¼‰å¹¶æŒ‡å®šå¯é€‰ä¾èµ–çš„åç§°ï¼Œæ¥å‘Šè¯‰ pip å®‰è£…æŸä¸ªæˆ–å¤šä¸ªå¯é€‰ä¾èµ–ã€‚
ä¾‹å¦‚ï¼Œå‡è®¾ä¸€ä¸ªåä¸º foo çš„åŒ…å…·æœ‰ä»¥ä¸‹å¯é€‰ä¾èµ–ï¼štestingã€docs
extras_require = &#123;    &quot;testing&quot;: [&quot;pytest==7.2.2&quot;, &quot;pytest-cov==4.0.0&quot;],    &quot;docs&quot;: [&quot;sphinx&quot;],&#125;

é‚£ä¹ˆå®‰è£…å¯é€‰ä¾èµ–çš„æ–¹æ³•ä¸ºï¼š
pip install foo[testing]pip install foo[testing,docs]pip install foo[all]

å¹¶éæ‰€æœ‰åŒ…éƒ½å®šä¹‰äº†allå¯é€‰ä¾èµ–ï¼Œallçš„å®šä¹‰æ–¹æ³•ä¸ºï¼š
extras_require[&quot;all&quot;] = list(set(reduce(operator.add, [requires, test_requirements, *extras_require.values()])))

ModuleNotFoundErrorå¤„ç†æ–¹æ³•python æŠ¥é”™ ModuleNotFoundError: No module named â€˜xxxâ€™ ï¼Œè¯¥æ€ä¹ˆæ‰¾åˆ°moduleå¯¹åº”çš„packageï¼Ÿ
ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç›´æ¥æ‰§è¡Œpip installå®‰è£…packageå³å¯
pip install xxx

ä½†æ˜¯ï¼ŒæŸäº›æƒ…å†µä¸‹xxxè¿™ä¸ªmoduleï¼Œå¯¹åº”çš„packageåç§°å¹¶ä¸æ˜¯xxxï¼Œè¿™æ—¶å¯ä»¥é€šè¿‡æœç´¢å¼•æ“æˆ–è€…chatgptæŸ¥æ‰¾xxxè¿™ä¸ªmoduleå¯¹åº”çš„packageã€‚
moduleå’Œpackageçš„å¯¹åº”å…³ç³»ï¼Œå¯ä»¥å‚è€ƒã€ŠPythonåŸºç¡€ã€‹
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>pip</tag>
        <tag>pypi</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythoné‡è¯•</title>
    <url>/dev-python-retry/</url>
    <content><![CDATA[ä¸ºä»€ä¹ˆéœ€è¦é‡è¯•ï¼Ÿå…¸å‹åœºæ™¯ï¼šç¨‹åºçš„å®ç°éœ€è¦è°ƒç”¨ç¬¬ä¸‰æ–¹çš„APIï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸èƒ½ä¿è¯ç¬¬ä¸‰æ–¹APIä¸€ç›´å¥½ç”¨ï¼Œä¹Ÿä¸èƒ½ä¿è¯ç½‘ç»œä¸€ç›´ç•…é€šï¼Œæ‰€ä»¥åœ¨è°ƒç”¨ç¬¬ä¸‰æ–¹APIæ—¶éœ€è¦åŠ ä¸Šé”™è¯¯é‡è¯•ã€‚  
é€šç”¨åœºæ™¯ï¼šç¨‹åºçš„è¿è¡Œä¸ç¬¦åˆé¢„æœŸï¼Œæˆ‘ä»¬çŸ¥é“å†æ¬¡è°ƒç”¨å¤§æ¦‚ç‡å¯ä»¥ä½¿ä¹‹ç¬¦åˆé¢„æœŸï¼Œè¿™æ—¶å°±éœ€è¦é‡è¯•ã€‚  
è€Œé‡è¯•é€»è¾‘æˆ‘ä»¬å¯ä»¥é€šè¿‡å¾ªç¯å¤šæ¬¡è°ƒç”¨å®ç°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å°è£…å¥½çš„é‡è¯•æ¨¡å—ã€‚æœ¬æ–‡æˆ‘ä»¬å°±å­¦ä¹ ä¸€ä¸‹Pythonä¸­æ¯”è¾ƒæµè¡Œçš„ retrying æ¨¡å—ï¼Œå®ç°ä¸€äº›é‡è¯•Demoã€‚


å®‰è£…retryingpip install retrying
ä»»æ„å¼‚å¸¸é‡è¯•from retrying import retry@retry(stop_max_attempt_number=3, wait_random_min=1000, wait_random_max=3000)def run():    print(&#x27;run&#x27;)    raise ValueErrorif __name__ == &#x27;__main__&#x27;:    run()

å½“å‡½æ•°runæŠ›å‡ºä»»æ„å¼‚å¸¸æ—¶ï¼Œåˆ™è¿›è¡Œé‡è¯•ã€‚

stop_max_attempt_numberï¼šæœ€å¤§é‡è¯•æ¬¡æ•°
wait_random_minï¼šæœ€å°é‡è¯•é—´éš”
wait_random_maxï¼šæœ€å¤§é‡è¯•é—´éš”

æ³¨æ„å‡½æ•°å†…ä¸è¦ä½¿ç”¨try exceptï¼Œå¦åˆ™å¼‚å¸¸å°±è¢«å‡½æ•°è‡ªå·±æ•è·å¤„ç†äº†ï¼Œä¸ä¼šæŠ›ç»™retryã€‚
æŒ‡å®šå¼‚å¸¸é‡è¯•from retrying import retryimport randomdef if_value_error(exception):    return isinstance(exception, ValueError)@retry(retry_on_exception=if_value_error, stop_max_attempt_number=3, wait_random_min=1000, wait_random_max=3000)def run():    value = random.randint(0, 10)    msg = f&#x27;value is &#123;value&#125;&#x27;    print(msg)    if value &lt;= 5:        raise ValueError(&#x27;value is too small!&#x27;)    else:        raise Exception(&#x27;value is too large!&#x27;)if __name__ == &#x27;__main__&#x27;:    run()

å½“å‡½æ•°runæŠ›å‡ºValueErrorå¼‚å¸¸æ—¶ï¼Œåˆ™è¿›è¡Œé‡è¯•ï¼›æŠ›å‡ºExceptionå¼‚å¸¸æ—¶ï¼Œä¸ä¼šé‡è¯•ã€‚
æŒ‡å®šè¿”å›å€¼é‡è¯•from retrying import retryimport randomdef if_return_small(value):    return value &lt;= 5@retry(retry_on_result=if_return_small, stop_max_attempt_number=3, wait_random_min=1000, wait_random_max=3000)def run():    value = random.randint(0, 10)    msg = f&#x27;value is &#123;value&#125;&#x27;    print(msg)    return valueif __name__ == &#x27;__main__&#x27;:    run()

å½“å‡½æ•°runè¿”å›å€¼å°äº5æ—¶ï¼Œè¿›è¡Œé‡è¯•ã€‚
å¤šæ¬¡é‡è¯•åå®¹å¿å¼‚å¸¸from retrying import retry@retry(stop_max_attempt_number=3, wait_random_min=1000, wait_random_max=3000)def run():    print(&#x27;run&#x27;)    raise ValueErrordef run2():    print(&#x27;run2&#x27;)if __name__ == &#x27;__main__&#x27;:    run()    run2()

å½“å‡½æ•°runæŠ›å‡ºä»»æ„å¼‚å¸¸æ—¶ï¼Œåˆ™è¿›è¡Œé‡è¯•ã€‚é‡è¯•æŒ‡å®šæ¬¡æ•°åï¼Œç¨‹åºå°±å¼‚å¸¸ç»“æŸäº†ã€‚è¿™æ—¶ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦å®¹å¿å¼‚å¸¸ï¼Œè®©run2å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå¾ˆç®€å•ï¼Œç»™runå‡½æ•°åŒ…è£¹ä¸€ä¸ªtry exceptå³å¯ã€‚
from retrying import retry@retry(wrap_exception=True,stop_max_attempt_number=3, wait_random_min=1000, wait_random_max=3000)def run():    print(&#x27;run&#x27;)    raise ValueErrordef wrap_run():    try:        run()    except:        passdef run2():    print(&#x27;run2&#x27;)if __name__ == &#x27;__main__&#x27;:    wrap_run()    run2()


]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonè„šæœ¬è·¯å¾„</title>
    <url>/dev-python-script-path/</url>
    <content><![CDATA[æ€æ ·è·å–ä¸€ä¸ªè„šæœ¬çš„è·¯å¾„ï¼Ÿæ€æ ·è·å–æ‰§è¡Œè„šæœ¬çš„ç»å¯¹è·¯å¾„ï¼Ÿæ€æ ·è·å–æ‰§è¡Œè„šæœ¬çš„çˆ¶ç»å¯¹è·¯å¾„ï¼Ÿæ€æ ·è·å–å…¥å£è„šæœ¬çš„ç»å¯¹è·¯å¾„ï¼Ÿã€‚ã€‚ã€‚å¸¦ç€è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬è¿›è¡Œä¸€ä¸ªç®€å•çš„å®éªŒï¼Œè·çŸ¥è¿™äº›é—®é¢˜çš„ç­”æ¡ˆã€‚


è·¯å¾„å®éªŒè·¯å¾„è®¾è®¡pathâ””â”€â”€ module_a    â”œâ”€â”€ getpath.py    â””â”€â”€ module_b        â””â”€â”€ getpath.py

è„šæœ¬å†…å®¹getpath.pyè„šæœ¬å†…å®¹ä¸ºï¼š
import osimport sysfrom module_b import getpathdef print_path():    print(f&#x27;os.getcwd() is &#123;os.getcwd()&#125;&#x27;)    print(f&#x27;sys.path[0] is &#123;sys.path[0]&#125;&#x27;)    print(f&#x27;sys.argv[0] is &#123;sys.argv[0]&#125;&#x27;)    print(f&#x27;__file__ is &#123;__file__&#125;&#x27;)    print(f&#x27;os.path.dirname(__file__) is &#123;os.path.dirname(__file__)&#125;&#x27;)    print(f&#x27;os.path.abspath(__file__) is &#123;os.path.abspath(__file__)&#125;&#x27;)    print(f&#x27;os.path.realpath(__file__) is &#123;os.path.realpath(__file__)&#125;&#x27;)    print(f&#x27;os.path.split(os.path.realpath(__file__))[0] is &#123;os.path.split(os.path.realpath(__file__))[0]&#125;&#x27;)print(&#x27;------ module_a/getpath.py ------&#x27;)print_path()print(&#x27;---------------------------------&#x27;)print(&#x27;------ module_a/module_b/getpath.py ------&#x27;)getpath.print_path()print(&#x27;------------------------------------------&#x27;)

æ‰§è¡Œè„šæœ¬åœ¨pathç›®å½•ä¸­æ‰§è¡Œè„šæœ¬python module_a/getpath.py ï¼Œå¾—åˆ°ç»“æœä¸ºï¼š
------ module_a/getpath.py ------os.getcwd() is /Users/vk/tmp/pathsys.path[0] is /Users/vk/tmp/path/module_asys.argv[0] is module_a/getpath.py__file__ is module_a/getpath.pyos.path.dirname(__file__) is module_aos.path.abspath(__file__) is /Users/vk/tmp/path/module_a/getpath.pyos.path.realpath(__file__) is /Users/vk/tmp/path/module_a/getpath.pyos.path.split(os.path.realpath(__file__))[0] is /Users/vk/tmp/path/module_a--------------------------------------- module_a/module_b/getpath.py ------os.getcwd() is /Users/vk/tmp/pathsys.path[0] is /Users/vk/tmp/path/module_asys.argv[0] is module_a/getpath.py__file__ is /Users/vk/tmp/path/module_a/module_b/getpath.pyos.path.dirname(__file__) is /Users/vk/tmp/path/module_a/module_bos.path.abspath(__file__) is /Users/vk/tmp/path/module_a/module_b/getpath.pyos.path.realpath(__file__) is /Users/vk/tmp/path/module_a/module_b/getpath.pyos.path.split(os.path.realpath(__file__))[0] is /Users/vk/tmp/path/module_a/module_b------------------------------------------

å®éªŒç»“è®ºç”±å®éªŒç»“æœï¼Œå¯ä»¥å¾—å‡ºå¦‚ä¸‹ç»“è®ºã€‚
è·å–æ‰§è¡Œå‘½ä»¤çš„ç»å¯¹è·¯å¾„os.getcwd()

è·å–å…¥å£è„šæœ¬çš„çˆ¶ç»å¯¹è·¯å¾„sys.path[0]

è·å–æ‰§è¡Œè„šæœ¬çš„ç»å¯¹è·¯åŠ²os.path.abspath(__file__)os.path.realpath(__file__)

è·å–æ‰§è¡Œè„šæœ¬çš„çˆ¶ç»å¯¹è·¯å¾„os.path.split(os.path.realpath(__file__))[0]

è·å–æ–‡ä»¶/ç›®å½•çš„çˆ¶è·¯å¾„os.path.dirname(__file__)



]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonå°æŠ€å·§</title>
    <url>/dev-python-tricks/</url>
    <content><![CDATA[æŸ¥æ‰¾æ–‡ä»¶åœ¨æŒ‡å®šç›®å½•ä¸­ï¼Œæ ¹æ®æ–‡ä»¶å‰ç¼€æŸ¥æ‰¾æ–‡ä»¶ã€‚
import globdef find_files_by_prefix(prefix, dir_path):    file_list = list()    file_pattern = os.path.join(dir_path, &#x27;&#123;&#125;*&#x27;.format(prefix))    for f in glob.glob(file_pattern):        file_list.append(f)    return file_list



åˆ é™¤ç›®å½•å’Œæ–‡ä»¶å°è£…å‡ ä¸ªç®€å•å‡½æ•°ï¼Œåˆ é™¤ç›®å½•å’Œæ–‡ä»¶ã€‚
import osimport shutil# åˆ é™¤ç©ºç›®å½•def remove_dir(dir_path):    if os.path.exists(dir_path):        os.removedirs(dir_path)# åˆ é™¤æ–‡ä»¶def remove_file(file_path):    if os.path.exists(file_path):        os.remove(file_path)# åˆ é™¤ç›®å½•å’Œæ–‡ä»¶def remove_dir_and_file(dir_path):    if os.path.exists(dir_path):        shutil.rmtree(dir_path)

urlç‰¹æ®Šå­—ç¬¦è½¬ä¹‰from urllib import parselabelselector = parse.quote(&#x27;app_id=voidking,env in (test,online)&#x27;)url = f&#x27;https://www.voidking.com?labelselector=&#123;labelselector&#125;&#x27;

ç‰¹æ®Šå­—ç¬¦å¯¹åº”urlç¼–ç è¡¨ï¼š
ç©ºæ ¼ : %20&quot; : %22# : %23% : %25&amp; : %26( : %28) : %29+ : %2B, : %2C/ : %2F: : %3A; : %3B&lt; : %3C= : %3D&gt; : %3E? : %3F@ : %40\ : %5C| : %7C 

è£…é¥°å™¨å®ç°ä¸€ä¸ªè£…é¥°å™¨ï¼ŒåŠŸèƒ½ï¼šåªè¦å‡½æ•°é‡Œä¼ äº†nameå‚æ•°ï¼Œä¸”nameå‚æ•°çš„å€¼ä¸ºhaojinï¼Œé‚£ä¹ˆå°±æŠŠè¿™ä¸ªå€¼æ›¿æ¢ä¸ºvoidkingã€‚
from functools import wrapsdef haojin_to_voidking(func):    @wraps(func)    def decorated(*args, **kwargs):        if &#x27;name&#x27; in kwargs and kwargs[&#x27;name&#x27;] == &#x27;haojin&#x27;:            kwargs[&#x27;name&#x27;] = &#x27;voidking&#x27;        return func(*args, **kwargs)    return decorated@haojin_to_voidkingdef print_name(name):    print(name)print_name(name=&#x27;haojin&#x27;)

Pythoné•œåƒé€‰æ‹©æˆ‘ä»¬å¯èƒ½å€¾å‘äºé€‰æ‹©ä¸€ä¸ªå°é•œåƒAlpineï¼Œä½†æ˜¯è¿™ä¼šå¯¼è‡´æ›´é•¿çš„æ„å»ºæ—¶é—´å’Œæ¨¡ç³Šçš„é”™è¯¯ï¼Œå› æ­¤ä¸å»ºè®®ã€‚
æ¨èçš„é•œåƒï¼š

ubuntu:18.04
ubuntu:20.04
python:3.7.10-slim-buster ï¼ˆåŸºäºDebian busterï¼‰

Ubuntu/Debiançš„é»˜è®¤è½¯ä»¶å®‰è£…æºéƒ½æ¯”è¾ƒæ…¢ï¼Œå› æ­¤æœ€å¥½å…ˆæ›¿æ¢æˆå›½å†…è½¯ä»¶å®‰è£…æºï¼Œè¯¦æƒ…å‚è€ƒã€ŠUbuntu/Debianæ›¿æ¢è½¯ä»¶å®‰è£…æºã€‹ã€‚
Debian busterè½¯ä»¶åŒ…æŸ¥æ‰¾åœ°å€ä¸ºDebian - busterç‰ˆé¢åˆ—è¡¨ï¼Œæ‰¾åˆ°è½¯ä»¶åŒ…åä½¿ç”¨apt installå®‰è£…å³å¯ï¼Œä¾‹å¦‚å®‰è£…mysql client
apt install default-libmysqlclient-devapt install default-mysql-client

å‚è€ƒæ–‡æ¡£ï¼šé€‚ç”¨äºæ‚¨çš„ Python åº”ç”¨ç¨‹åºçš„æœ€ä½³ Docker åŸºç¡€é•œåƒ
å¯åŠ¨python webæœåŠ¡å™¨ä½¿ç”¨szä¼ è¾“å¤§æ–‡ä»¶ï¼Œæœ‰æ—¶å€™ä¼šè¢«ä¸­æ–­ã€‚è¿™æ—¶æˆ‘ä»¬å¯ä»¥å¯åŠ¨ä¸€ä¸ªwebæœåŠ¡ï¼ŒæŠŠå¤§æ–‡ä»¶ä½œä¸ºé™æ€èµ„æºä¸‹è½½ã€‚
python -m SimpleHTTPServer 9999python3 -m http.server 9999
ç„¶åæµè§ˆå™¨è¾“å…¥ip:portï¼Œå³å¯ä¸‹è½½æ–‡ä»¶ã€‚
pycåç¼–è¯‘pypip install uncompyle6uncompyle6 -o filename.py filename.pyc

å‚è€ƒæ–‡æ¡£
Pythonå®˜æ–¹æ–‡æ¡£
Pythonå®˜æ–¹æ–‡æ¡£ä¸‹è½½
Pythonå®˜æ–¹æ–‡æ¡£ä¸‹è½½-chmæ ¼å¼
Pythoné»‘é­”æ³•æ‰‹å†Œ
Python Cookbook 3rd Edition Documentation
Google Pythoné£æ ¼æŒ‡å—

]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>docker</tag>
        <tag>mysql</tag>
        <tag>ubuntu</tag>
        <tag>debian</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonå•å…ƒæµ‹è¯•</title>
    <url>/dev-python-unittest/</url>
    <content><![CDATA[unittestç®€ä»‹unittestæ˜¯ä¸€ä¸ªPythonå•å…ƒæµ‹è¯•æ¡†æ¶ã€‚å®ƒå—åˆ° JUnit çš„å¯å‘ï¼Œä¸å…¶ä»–è¯­è¨€ä¸­çš„ä¸»æµå•å…ƒæµ‹è¯•æ¡†æ¶æœ‰ç€ç›¸ä¼¼çš„é£æ ¼ã€‚å…¶æ”¯æŒæµ‹è¯•è‡ªåŠ¨åŒ–ï¼Œé…ç½®å…±äº«å’Œå…³æœºä»£ç æµ‹è¯•ã€‚æ”¯æŒå°†æµ‹è¯•æ ·ä¾‹èšåˆåˆ°æµ‹è¯•é›†ä¸­ï¼Œå¹¶å°†æµ‹è¯•ä¸æŠ¥å‘Šæ¡†æ¶ç‹¬ç«‹ã€‚
ä¸»è¦å‚è€ƒ unittest - å•å…ƒæµ‹è¯•æ¡†æ¶ã€‚


è„šæœ¬ç¼–å†™æ–°å»ºä¸€ä¸ª tests/test_demo.py è„šæœ¬ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
import unittestclass TestStringMethods(unittest.TestCase):    def test_upper(self):        self.assertEqual(&#x27;foo&#x27;.upper(), &#x27;FOO&#x27;)    def test_isupper(self):        self.assertTrue(&#x27;FOO&#x27;.isupper())        self.assertFalse(&#x27;Foo&#x27;.isupper())    def test_split(self):        s = &#x27;hello world&#x27;        self.assertEqual(s.split(), [&#x27;hello&#x27;, &#x27;world&#x27;])        # check that s.split fails when the separator is not a string        with self.assertRaises(TypeError):            s.split(2)if __name__ == &#x27;__main__&#x27;:    unittest.main()

ç»§æ‰¿ unittest.TestCase å°±åˆ›å»ºäº†ä¸€ä¸ªæµ‹è¯•æ ·ä¾‹ã€‚ä¸Šè¿°ä¸‰ä¸ªç‹¬ç«‹çš„æµ‹è¯•æ˜¯ä¸‰ä¸ªç±»çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•çš„å‘½åéƒ½ä»¥ test å¼€å¤´ã€‚ è¿™ä¸ªå‘½åçº¦å®šå‘Šè¯‰æµ‹è¯•è¿è¡Œè€…ç±»çš„å“ªäº›æ–¹æ³•è¡¨ç¤ºæµ‹è¯•ã€‚
æ¯ä¸ªæµ‹è¯•çš„å…³é”®æ˜¯ï¼šè°ƒç”¨ assertEqual() æ¥æ£€æŸ¥é¢„æœŸçš„è¾“å‡ºï¼› è°ƒç”¨ assertTrue() æˆ– assertFalse() æ¥éªŒè¯ä¸€ä¸ªæ¡ä»¶ï¼›è°ƒç”¨ assertRaises() æ¥éªŒè¯æŠ›å‡ºäº†ä¸€ä¸ªç‰¹å®šçš„å¼‚å¸¸ã€‚
é€šè¿‡ setUp() å’Œ tearDown() æ–¹æ³•ï¼Œå¯ä»¥è®¾ç½®æµ‹è¯•å¼€å§‹å‰ä¸å®Œæˆåéœ€è¦æ‰§è¡Œçš„æŒ‡ä»¤ã€‚
æœ€åçš„ä»£ç å—ä¸­ï¼Œæ¼”ç¤ºäº†è¿è¡Œæµ‹è¯•çš„ä¸€ä¸ªç®€å•çš„æ–¹æ³•ã€‚ unittest.main() æä¾›äº†ä¸€ä¸ªæµ‹è¯•è„šæœ¬çš„å‘½ä»¤è¡Œæ¥å£ã€‚
æ‰§è¡Œæµ‹è¯•æ–¹æ³•ä¸€ï¼šè„šæœ¬çº§åˆ«è°ƒç”¨ï¼ˆç›´æ¥è¿è¡Œè„šæœ¬ï¼‰
python tests/test_demo.pypython tests/test_demo.py -vpython -m unittest tests/test_demo.py

æ–¹æ³•äºŒï¼šåŒ…ã€æ¨¡å—ã€ç±»å’Œæ–¹æ³•çº§åˆ«è°ƒç”¨
# åŒ…çº§åˆ«è°ƒç”¨ï¼ˆè¿›å…¥testsç›®å½•æŸ¥æ‰¾æ‰€æœ‰test_*.pyæ–‡ä»¶å¹¶è¿è¡Œï¼‰python -m unittest discover -s tests -p &quot;test_*.py&quot;# æ¨¡å—çº§åˆ«è°ƒç”¨python -m unittest tests.test_demo# ç±»çº§åˆ«è°ƒç”¨python -m unittest tests.test_demo.TestStringMethods# æ–¹æ³•çº§åˆ«è°ƒç”¨python -m unittest tests.test_demo.TestStringMethods.test_upper

å•å…ƒæµ‹è¯•ä¹‹mockå•å…ƒæµ‹è¯•æ—¶ï¼Œå¦‚æœæ¶‰åŠç½‘ç»œè¯·æ±‚ï¼Œå»ºè®®ä½¿ç”¨mockæ¨¡å—æ¥æ¨¡æ‹Ÿã€‚
import jsonimport unittestfrom unittest import mockimport requestsdef request_system(method: str, url: str, data=&#123;&#125;):    headers = &#123;        &#x27;Content-Type&#x27;: &#x27;application/json&#x27;    &#125;    response = requests.request(method=method, url=url, headers=headers, data=json.dumps(data))    return responsedef login(username: str, password: str):    # ä»¥ä¸‹æ¥å£æš‚æ—¶è®¿é—®ä¸é€š    LOGIN_URL=&#x27;http://127.0.0.1/login&#x27;    data = &#123;        &#x27;username&#x27;: username,        &#x27;password&#x27;: password    &#125;    response = request_system(&#x27;POST&#x27;, LOGIN_URL)    if response.status == 200:        return json.loads(response.text)    else:        return Noneclass TestMockMethods(unittest.TestCase):    def test_request_system(self):        mock_response = mock.Mock()        mock_response.status_code = 200        mock_response.text = json.dumps(&#123;&quot;code&quot;: 0, &quot;msg&quot;:&quot;success&quot;&#125;)        request_system = mock.Mock(return_value=mock_response)        response = request_system(method=&#x27;POST&#x27;,url=&#x27;http://127.0.0.1/&#x27;)        print(response.status_code)        print(response.text)        self.assertEqual(200, response.status_code)    def test_login(self):        login = mock.Mock(return_value=&#123;&quot;code&quot;: 0, &quot;msg&quot;:&quot;success&quot;&#125;)        data = login(username=&#x27;voidking&#x27;,password=&#x27;voidking&#x27;)        print(data)        self.assertEqual(0, data.get(&#x27;code&#x27;))if __name__ == &#x27;__main__&#x27;:    unittest.main()

è¿™ç§æ¨¡æ‹Ÿæµ‹è¯•æ–¹å¼å¾ˆå·§å¦™ï¼Œé€‚åˆæµ‹è¯•è®¿é—®ç¬¬ä¸‰æ–¹æ¥å£ï¼Œä½†æ˜¯å¹¶ä¸ä¼šçœŸæ­£å‘å‡ºè¯·æ±‚ã€‚å¦ä¸€ä¸ªé—®é¢˜æ¥äº†ï¼ŒPythonæ€ä¹ˆæµ‹è¯•è‡ªå·±çš„æ¥å£ï¼Ÿä¸çŸ¥é“ã€‚æƒ³åˆ°ä»¥å‰ä½¿ç”¨Beegoæ¡†æ¶è¿›è¡Œå¼€å‘ï¼Œå®ƒçš„å•å…ƒæµ‹è¯•å°±å¾ˆå·§å¦™ï¼Œå…ˆåœ¨æµ‹è¯•æ•°æ®åº“æ’å…¥æ•°æ®ï¼Œç„¶åé€šè¿‡beego.BeeApp.Handlers.ServeHTTP(w, r)æŠŠè‡ªå·±ä¸´æ—¶å¯åŠ¨èµ·æ¥ï¼Œæœ€åè‡ªå·±çš„å•å…ƒæµ‹è¯•è°ƒç”¨è‡ªå·±çš„æ¥å£ã€‚å…¶ä¸­çš„å…³é”®åœ¨äºæŠŠè‡ªå·±å¯åŠ¨èµ·æ¥ï¼Œç†è®ºä¸ŠPythonä¹Ÿèƒ½åšåˆ°ã€‚
åè®°pythonè¯­è¨€ä¸­çš„å•å…ƒæµ‹è¯•ï¼Œé™¤äº†ä½¿ç”¨unittestï¼Œè¿˜å¯ä»¥ä½¿ç”¨pytestã€‚
FROM ChatGPTï¼šunittestå’Œpytestæ˜¯Pythonä¸­ä¸¤ç§æµè¡Œçš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œå®ƒä»¬æœ‰ä»¥ä¸‹ä¸»è¦åŒºåˆ«ï¼š

è¯­æ³•ï¼šunittestæ˜¯Pythonæ ‡å‡†åº“ä¸­çš„æµ‹è¯•æ¡†æ¶ï¼Œè€Œpytestæ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹æµ‹è¯•æ¡†æ¶ã€‚å› æ­¤ï¼Œunittestçš„è¯­æ³•æ›´åŠ æ­£å¼å’Œä¸¥æ ¼ï¼Œè€Œpytestçš„è¯­æ³•æ›´åŠ ç®€æ´å’Œçµæ´»ã€‚
è‡ªåŠ¨åŒ–ï¼špytestæ¯”unittestæ›´åŠ è‡ªåŠ¨åŒ–å’Œæ™ºèƒ½åŒ–ã€‚pytestå¯ä»¥è‡ªåŠ¨å‘ç°å’Œè¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œè€Œunittestéœ€è¦æ‰‹åŠ¨ç¼–å†™æµ‹è¯•ç”¨ä¾‹çš„å¥—ä»¶å’Œè¿è¡Œä»£ç ã€‚
æ’ä»¶å’Œæ‰©å±•æ€§ï¼špytestæä¾›äº†å¤§é‡çš„æ’ä»¶å’Œæ‰©å±•åŠŸèƒ½ï¼Œä¾‹å¦‚æµ‹è¯•æŠ¥å‘Šã€ä»£ç è¦†ç›–ç‡ã€æµ‹è¯•å¹¶è¡ŒåŒ–ã€æµ‹è¯•é‡è¯•ç­‰ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œunittestçš„æ‰©å±•æ€§è¾ƒå¼±ï¼Œéœ€è¦ç¼–å†™æ›´å¤šçš„è‡ªå®šä¹‰ä»£ç æ‰èƒ½å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚
æ–­è¨€ï¼šunittestå’Œpytestéƒ½æä¾›äº†ä¸°å¯Œçš„æ–­è¨€æ–¹æ³•ï¼Œç”¨äºæ£€æŸ¥æµ‹è¯•ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚ä½†æ˜¯ï¼Œpytestçš„æ–­è¨€æ–¹æ³•æ›´åŠ çµæ´»å’Œæ˜“äºä½¿ç”¨ï¼Œä¾‹å¦‚ä½¿ç”¨assertè¯­å¥è¿›è¡Œæ–­è¨€ã€‚
ç”¨ä¾‹å‚æ•°åŒ–ï¼špytestæ”¯æŒç”¨ä¾‹å‚æ•°åŒ–ï¼Œå¯ä»¥é€šè¿‡æ•°æ®é©±åŠ¨çš„æ–¹å¼å¤šæ¬¡è¿è¡ŒåŒä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œä»¥æ£€æŸ¥ä¸åŒçš„è¾“å…¥å’Œè¾“å‡ºã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œunittestéœ€è¦æ‰‹åŠ¨ç¼–å†™å¤šä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œä»¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚

]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>chatgpt</tag>
        <tag>æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>multipasså…¥é—¨ç¯‡</title>
    <url>/dev-multipass-start/</url>
    <content><![CDATA[multipassæ˜¯å•¥ï¼Ÿmultipass æ˜¯ä¸€ä¸ªè½»é‡è™šæ‹Ÿæœºç®¡ç†å™¨ï¼Œæ˜¯ç”±Ubuntuè¿è¥å…¬å¸Canonicalæ‰€æ¨å‡ºçš„å¼€æºé¡¹ç›®ã€‚è¿è¡Œç¯å¢ƒæ”¯æŒLinuxã€Windowsã€macOSï¼Œåœ¨Linuxä¸Šä½¿ç”¨çš„æ˜¯KVMã€Windowä¸Šä½¿ç”¨Hyper-Vã€macOSä¸­ä½¿ç”¨HyperKitä»¥æœ€å°å¼€é”€è¿è¡ŒVMã€‚æ”¯æŒåœ¨ç¬”è®°æœ¬æ¨¡æ‹Ÿå°å‹äº‘ã€‚æ›´å¤šå†…å®¹å‚è€ƒMultipasså®˜ç½‘ã€‚


å®‰è£…ä½¿ç”¨multipasså®‰è£…multipassbrew install multipass

åˆ›å»ºè™šæ‹Ÿæœºåˆ›å»ºä¸€ä¸ªubuntu 18.04è™šæ‹Ÿæœºã€‚
multipass findmultipass launch -n ubuntu18 -c 1 -m 2G -d 10G 18.04

å¯åœè™šæ‹Ÿæœºmultipass listmultipass stop ubuntu18multipass start ubuntu18

åˆ é™¤è™šæ‹Ÿæœºmultipass delete ubuntu18multipass purge ubuntu18

ä½¿ç”¨è™šæ‹Ÿæœºmultipass exec ubuntu18 -- lsb_release -amultipass shell ubuntu18

é…ç½®è¿œç¨‹ç™»å½•ä¸Šæ–‡å®‰è£…å¥½çš„ubuntu18è™šæ‹Ÿæœºï¼Œé»˜è®¤æ˜¯ä¸æ”¯æŒè¿œç¨‹ç™»å½•çš„ï¼Œå¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤å¼€å¯ã€‚1ã€åˆ‡æ¢åˆ°rootsudo su
2ã€ä¿®æ”¹sshdé…ç½®ï¼Œå¼€å¯æ”¯æŒè¿œç¨‹ç™»å½•vim /etc/ssh/sshd_configï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
Port 22ListenAddress 0.0.0.0ListenAddress ::PasswordAuthentication yes

3ã€é‡å¯sshdsystemctl restart sshd
4ã€ç»™ubuntuç”¨æˆ·è®¾ç½®ä¸€ä¸ªå¯†ç passwd ubuntu
5ã€ç™»å½•æµ‹è¯•ssh ubuntu@localhost
ä»¥ä¸Šï¼Œè¿œç¨‹ç™»å½•å¼€å¯å®Œæˆã€‚
å®‰è£…ä½¿ç”¨Dockerå®‰è£…Dockeråœ¨è™šæ‹Ÿæœºä¸­ï¼Œä½¿ç”¨snapæ–¹å¼å®‰è£…dockerã€‚
sudo susnap install dockerdocker info

snapæ–¹å¼å®‰è£…çš„dockerï¼Œåªåœ¨ç”¨æˆ·ç›®å½•ä¸‹æ‹¥æœ‰è¯»å†™æƒé™ã€‚å¦‚æœå¯¹dockeræŒ‚è½½è·¯å¾„æœ‰è¦æ±‚ï¼Œå»ºè®®ä½¿ç”¨å…¶ä»–æ–¹å¼å®‰è£…ã€‚
å®‰è£…mysqldocker run --name vk-mysql -d \-p 3306:3306 \-v /opt/data/mysql:/var/lib/mysql \-e MYSQL_ROOT_PASSWORD=voidking \mysql:5.6.50
æŠ¥é”™ä¸ºï¼šdocker: Error response from daemon: error while creating mount source path â€˜/opt/data/mysqlâ€™: mkdir /opt/data: read-only file system.
è¿™å°±æ˜¯åˆšæ‰è¯´åˆ°çš„é—®é¢˜ï¼Œsnapæ–¹å¼å®‰è£…çš„dockerï¼Œåªåœ¨ç”¨æˆ·ç›®å½•ä¸‹æ‹¥æœ‰è¯»å†™æƒé™ã€‚å¯ä»¥æ”¹æˆï¼š
docker run --name vk-mysql -d \-p 3306:3306 \-v /home/work/data/mysql:/var/lib/mysql \-e MYSQL_ROOT_PASSWORD=voidking \mysql:5.6.50

ç™»å½•mysqlmysql -uroot -pç™»å½•æŠ¥é”™ï¼šERROR 2002 (HY000): Canâ€™t connect to local MySQL server through socket â€˜/var/run/mysqld/mysqld.sockâ€™ (2)
åº”è¯¥æ˜¯mysqlçš„ç‰ˆæœ¬åŸå› ï¼Œéœ€è¦æŒ‡å®šhost ipã€‚
mysql -h127.0.0.1 -uroot -pmysql -h192.168.64.3 -P3306 -uroot -p



]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>MacOSå®‰è£…Minikube</title>
    <url>/dev-macos-minikube/</url>
    <content><![CDATA[å‰è¨€Minikubeæ˜¯åœ¨ä¸ªäººè®¡ç®—æœºä¸Šçš„è™šæ‹Ÿæœºä¸­è¿è¡Œå•èŠ‚ç‚¹Kubernetesé›†ç¾¤çš„å·¥å…·ã€‚ã€ŠK8Så…¥é—¨ç¯‡ã€‹ä¸€æ–‡ä¸­ï¼Œåœ¨Windowsç³»ç»Ÿä¸­å®‰è£…è¿‡Minikubeã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹åœ¨MacOSç³»ç»Ÿä¸­å®‰è£…Minikubeã€‚ä¸»è¦å‚è€ƒå†è§Docker Desktopï¼Œä½ å¥½ Minikubeï¼ã€‚


æ“ä½œæ­¥éª¤å¸è½½Docker Desktopå¸è½½Docker Desktopï¼ŒåŒ…æ‹¬Docker Clientã€Docker Daemonã€Hyperkitç­‰ã€‚
brew uninstall docker

PSï¼šDocker Desktopå®‰è£…æ–¹æ³•å‚è€ƒã€ŠMacOSä¸Šè½¯ä»¶é…ç½®ã€‹ã€‚
å®‰è£…Docker ClientDocker Clientæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œç”¨äºå’ŒDocker Daemonè¿›è¡Œäº¤äº’ã€‚
brew install dockerdocker info

å®‰è£…KubectlKubectlæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œç”¨äºå’ŒK8S ApiServerè¿›è¡Œäº¤äº’ã€‚
brew install kubectl

å®‰è£…HyperkitHyperkitæ˜¯ä¸€ç§MacOSä¸Šçš„è™šæ‹ŸåŒ–å·¥å…·åŒ…ï¼Œæä¾›Hypervisorï¼ˆè™šæ‹Ÿæœºç›‘è§†å™¨ï¼ŒVMMï¼‰çš„èƒ½åŠ›ï¼Œä½¿è™šæ‹Ÿæœºå¯ä»¥ä½¿ç”¨å®¿ä¸»æœºçš„èµ„æºè¿›è¡Œè®¡ç®—ã€‚hyperæ˜¯è¶…çº§çš„æ„æ€ï¼Œæ¯”superè¿˜è¦é«˜çº§ã€‚
brew install hyperkithyperkid -v

å®‰è£…Minikubebrew install minikube

è®¾å®šminikubeå‚æ•°è®¾ç½®CPUå’Œå†…å­˜çš„é™åˆ¶ã€‚
minikube config set cpus 3minikube config set memory 6g
å¯åŠ¨Minikubeå¯åŠ¨Minikubeï¼Œéƒ¨ç½²ä¸€ä¸ªk8sé›†ç¾¤ã€‚
minikube start --kubernetes-version=v1.19.14 --driver=hyperkit --container-runtime=docker

å…¶ä¸­ï¼š

â€“kubernetes-version æŒ‡å®šK8Sç‰ˆæœ¬ã€‚
â€“driver æŒ‡å®šè™šæ‹ŸåŒ–é©±åŠ¨ç¨‹åºï¼Œæ¯”å¦‚hyperkitã€multipassã€virtualboxã€parallelsç­‰ã€‚
â€“container-runtime æŒ‡å®šå®¹å™¨è¿è¡Œæ—¶ï¼Œæ¯”å¦‚dockerã€containerdã€cri-oç­‰ã€‚

æŸ¥çœ‹k8sé›†ç¾¤minikube kubectl get nodeskubectl get nodes

è®¾ç½®dockerç¯å¢ƒå˜é‡eval $(minikube docker-env)

ä»¥ä¸Šï¼ŒMinikubeå®‰è£…å®Œæˆï¼Œä¹Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨Dockerã€‚ä½†æ˜¯ï¼ŒDockerçš„ä½¿ç”¨ä¾èµ–Minikubeçš„å¯åŠ¨ï¼Œè¿™æœ‰ç‚¹å‘å•Šï¼èƒ½ä¸èƒ½ä¸å¯åŠ¨Minikubeï¼Œåªå¯åŠ¨Docker Daemonå‘¢ï¼Ÿå¯ä»¥çš„ï¼Œä½¿ç”¨multipasså¯åŠ¨ä¸€ä¸ªè™šæ‹Ÿæœºï¼Œç„¶ååœ¨è™šæ‹Ÿæœºä¸Šå®‰è£…Dockerã€‚è¯¦æƒ…å‚è€ƒã€Šmultipasså…¥é—¨ç¯‡ã€‹ã€‚ä¹‹æ‰€ä»¥ä¸ä½¿ç”¨virtualboxï¼Œæ˜¯å› ä¸ºvirtualboxä½¿ç”¨virtualboxé©±åŠ¨ï¼Œè€Œä¸æ˜¯hyperkitã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>macos</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoç¯å¢ƒæ­å»º2021å¹´8æœˆç‰ˆ</title>
    <url>/dev-hexo-build-environment-2021-08/</url>
    <content><![CDATA[å‰è¨€15å¹´çš„æ—¶å€™ï¼Œå†™äº†ä¸€ç¯‡ã€ŠHexoç¯å¢ƒæ­å»ºã€‹ï¼Œè®°å½•äº†hexoçš„è¯¦ç»†å®‰è£…éƒ¨ç½²æ­¥éª¤ã€‚18å¹´çš„æ—¶å€™ï¼Œå†™äº†ä¸€ç¯‡ã€ŠHexoç¯å¢ƒæ­å»º2018å¹´5æœˆç‰ˆã€‹ï¼Œå¯¹å®‰è£…æ–¹æ³•å’Œæ­¥éª¤è¿›è¡Œäº†æ›´æ–°ã€‚è½¬çœ¼åˆè¿‡äº†ä¸‰å¹´ï¼Œä»Šå¤©å†æ•´ç†ä¸€ç‰ˆhexoç¯å¢ƒæ­å»ºçš„æµç¨‹ï¼Œä¸æ—¶ä¿±è¿›ã€‚


ç¯å¢ƒå‡†å¤‡ç³»ç»Ÿç¯å¢ƒï¼šMACOS
å®‰è£…brewã€gitã€nvmã€nodeï¼Œå…·ä½“å®‰è£…æ–¹æ³•å¯ä»¥å‚è€ƒã€ŠMacOSä¸Šè½¯ä»¶é…ç½®ã€‹ã€‚
å…¶ä¸­ï¼Œnodeç‰ˆæœ¬é€‰æ‹© v12.22.5
å®‰è£…hexo1ã€åˆ‡æ¢å›½å†…æºnpm config set registry=&quot;https://registry.npm.taobao.org&quot;
2ã€å®‰è£…hexo
npm install -g hexowhich hexo

3ã€åˆå§‹åŒ–æ–°å»ºhexoç›®å½•ï¼Œå¹¶å®‰è£…ä¾èµ–åŒ…ã€‚
hexo init hexocd hexonpm install --force

4ã€æµ‹è¯•hexo gï¼Œhexo sï¼Œç„¶åæŸ¥çœ‹ http://localhost:4000
å®‰è£…ä¾èµ–æ·»åŠ RSSnpm install hexo-generator-feed --saveï¼Œ
æ³¨æ„ï¼Œåé¢çš„å‚æ•°--saveç»å¯¹ä¸èƒ½çœï¼Œå¦åˆ™è¯¥æ’ä»¶ä¿¡æ¯ä¸ä¼šå†™å…¥package.jsonã€‚hexo cleanï¼Œhexo gï¼ŒæŸ¥çœ‹publicæ–‡ä»¶å¤¹ï¼Œå¯ä»¥çœ‹åˆ°atom.xmlæ–‡ä»¶ã€‚
æ·»åŠ sitemapnpm install hexo-generator-sitemap --savenpm install hexo-generator-baidu-sitemap --save
å¦‚æœæŠ¥é”™ï¼šgyp: No Xcode or CLT version detected!å¯ä»¥å¿½ç•¥å®ƒï¼Œä¹Ÿå¯ä»¥é€šè¿‡é‡è£…xcode-selectè§£å†³
xcode-select --print-pathsudo rm -r -f /Library/Developer/CommandLineToolssudo xcode-select --installxcode-select --installsudo xcode-select --reset

hexo cleanï¼Œhexo gï¼ŒæŸ¥çœ‹publicæ–‡ä»¶å¤¹ï¼Œå¯ä»¥çœ‹åˆ°sitemap.xmlå’Œbaidusitemap.xmlæ–‡ä»¶ã€‚sitemapçš„åˆè¡·æ˜¯ç»™æœç´¢å¼•æ“çœ‹çš„ï¼Œä¸ºäº†æé«˜æœç´¢å¼•æ“å¯¹è‡ªå·±ç«™ç‚¹çš„æ”¶å½•æ•ˆæœï¼Œæˆ‘ä»¬æœ€å¥½æ‰‹åŠ¨åˆ°googleå’Œç™¾åº¦ç­‰æœç´¢å¼•æ“æäº¤sitemap.xmlã€‚å…·ä½“å‚è€ƒã€Šhexoç”Ÿæˆsitemapã€‹ã€‚
æ”¯æŒæœ¬åœ°æœç´¢npm install hexo-generator-searchdb --save
éœ€è¦é…åˆ_config.ymlé…ç½®å’Œä¸»é¢˜é…ç½®ï¼Œè¯¦æƒ…å‚è€ƒã€ŠHexoæ›´æ¢ä¸»é¢˜ä¸ºNextã€‹ã€‚
æ”¯æŒgitéƒ¨ç½²npm install hexo-deployer-git --save

å®‰è£…ä¸»é¢˜è¿›å…¥hexo/themesç›®å½•ï¼Œä¸‹è½½è‡ªå·±ç»´æŠ¤çš„nextä¸»é¢˜git clone https://github.com/voidking/hexo-theme-next.git next
è¯¥ä¸»é¢˜çš„æ›´å¤šä¸ªæ€§åŒ–è®¾ç½®ï¼Œå¯ä»¥å‚è€ƒã€ŠHexoæ›´æ¢ä¸»é¢˜ä¸ºNextã€‹ã€‚
config.ymlé…ç½®hexoç›®å½•ä¸­çš„_config.ymlä¿®æ”¹ä¸ºï¼š
# Hexo Configuration## Docs: http://hexo.io/docs/configuration.html## Source: https://github.com/hexojs/hexo/# Sitetitle: å¥½å¥½å­¦ä¹ çš„éƒsubtitle: å¥½å¥½å­¦ä¹ ï¼Œå¤©å¤©å‘ä¸Šï¼description: å­¦è€Œä¸æ€åˆ™ç½”ï¼Œæ€è€Œä¸å­¦åˆ™æ®†ï¼author: å¥½å¥½å­¦ä¹ çš„éƒlanguage: zh-CNtimezone:# URL## If your site is put in a subdirectory, set url as &#x27;http://yoursite.com/child&#x27; and root as &#x27;/child/&#x27;url: https://www.voidking.comroot: /permalink: :title/permalink_defaults:# Directorysource_dir: sourcepublic_dir: publictag_dir: tagsarchive_dir: archivescategory_dir: categoriescode_dir: downloads/codei18n_dir: :langskip_render:  - &#x27;*.html&#x27;# Writingnew_post_name: :title.md # File name of new postsdefault_layout: posttitlecase: false # Transform title into titlecaseexternal_link: true # Open external links in new tabfilename_case: 0render_drafts: falsepost_asset_folder: falserelative_link: falsefuture: truehighlight:  enable: true  line_number: true  auto_detect: true  tab_replace:# Category &amp; Tagdefault_category: uncategorizedcategory_map:tag_map:# Date / Time format## Hexo uses Moment.js to parse and display date## You can customize the date format as defined in## http://momentjs.com/docs/#/displaying/format/date_format: YYYY-MM-DDtime_format: HH:mm:ss# Pagination## Set per_page to 0 to disable paginationper_page: 5pagination_dir: pageindex_generator:  per_page: 5archive_generator:  per_page: 100  yearly: true    monthly: true tag_generator:  per_page: 100 category_generator:   per_page: 100 # local searchsearch:  path: search.xml  field: post  format: striptags  limit: 10000# Extensions## Plugins: http://hexo.io/plugins/## Themes: http://hexo.io/themes/theme: next# Deployment## Docs: http://hexo.io/docs/deployment.html# github and giteedeploy:- type: git  repo: https://voidking.com/voidking/voidking.github.io.git  branch: master

å‘å¸ƒgithub1ã€åœ¨githubä¸Šæ³¨å†Œä¸€ä¸ªå¸å·ã€‚
2ã€æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå’Œå¸å·åç›¸åŒã€‚
3ã€é¡¹ç›®å¯åŠ¨PagesæœåŠ¡ã€‚
æœ¬åœ°æ“ä½œ1ã€ç”Ÿæˆæœ¬åœ°ä»£ç hexo g
2ã€æœ¬åœ°æµ‹è¯•hexo sï¼Œç„¶åè®¿é—® http://localhost:4000
3ã€å‘å¸ƒåˆ°githubhexo d
4ã€çº¿ä¸Šæµ‹è¯•http://voidking.github.io
åŸŸå1ã€ç”³è¯·åŸŸåã€‚
2ã€åŸŸåè§£ææ·»åŠ CNAMEè®°å½•æŒ‡å‘voidking.github.ioã€‚
3ã€voidking.github.ioé¡¹ç›®ä¸­æ·»åŠ CNAMEæ–‡ä»¶ï¼Œç»‘å®šåŸŸåã€‚
4ã€æµ‹è¯•è®¿é—®ã€‚
åè®°ä»¥ä¸Šï¼Œhexoå®‰è£…éƒ¨ç½²å®Œæˆã€‚æœ‰äº›æ­¥éª¤å†™çš„æ¯”è¾ƒç®€å•ï¼Œä¸ç†è§£çš„å¯ä»¥è‡ªè¡Œè°·æ­Œç™¾åº¦ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title>Travis CIå¤±æ•ˆ</title>
    <url>/dev-hexo-travis-ci-not-work-anymore/</url>
    <content><![CDATA[é—®é¢˜æè¿°2021å¹´8æœˆ8æ—¥ï¼Œè¶ç€å‘¨æœ«ç©ºé—²ä¿®æ”¹äº†ä¸€äº›æ–‡ç« ï¼Œç„¶åå‘äº†æ–°ç‰ˆã€‚ä½†æ˜¯ï¼Œå‘ç°ç½‘ç«™æ²¡æœ‰æ›´æ–°ã€‚çœ‹çœ‹é‚®ä»¶ï¼Œæ²¡æœ‰æ”¶åˆ°travis ciçš„é‚®ä»¶ï¼Œå†ä»”ç»†æƒ³æƒ³ï¼Œè²Œä¼¼å¥½ä¹…æ²¡æœ‰æ”¶åˆ°travis ciçš„é‚®ä»¶äº†ã€‚ç™»å½•Travis CIæŸ¥çœ‹æ„å»ºè®°å½•ï¼Œå¥½å®¶ä¼™ï¼Œä¸Šæ¬¡æ„å»ºè¿˜æ˜¯5æœˆä»½çš„ï¼é—®é¢˜å¤§äº†ï¼
åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹ï¼ŸTravis CIæœ‰bugä¸èƒ½ç”¨äº†ï¼ŸGitHubå°æ€äº†Travis CIï¼ŸTravis CIè§„åˆ™æ”¹äº†ï¼Œå¼€æºé¡¹ç›®ä¹Ÿæœ‰æ„å»ºæ¬¡æ•°é™åˆ¶ï¼Ÿâ€¦ä¸çŸ¥é“å…·ä½“ä»€ä¹ˆåŸå› ï¼Œæœ¬æ–‡æˆ‘ä»¬å°±æ¥æ’æŸ¥ä¸€ä¸‹ã€‚


æ‰‹åŠ¨è§¦å‘1ã€ç™»å½•Travis CI
2ã€ç‚¹å‡» voidking/hexo-deploy é¡¹ç›®ï¼Œç‚¹å‡»å³ä¸Šè§’ More optionsï¼Œç‚¹å‡» Trigger build è¿›è¡Œæ‰‹åŠ¨è§¦å‘æ„å»º
3ã€Branch ä¿æŒé»˜è®¤ master ï¼ŒCUSTOM COMMIT MESSAGE è¾“å…¥éšæ„å†…å®¹ï¼ŒCUSTOM CONFIG ä¸å¡«
4ã€ç‚¹å‡» Trigger custom buildï¼Œå°±çœ‹åˆ°äº†å…·ä½“çš„æŠ¥é”™äº†å¼¹æ¡†æç¤º Oh no! You tried to trigger a build for voidking/hexo-deploy but the request was rejected.Requests Tabé¡µæç¤º Could not authorize build request for voidking/hexo-deploy.ä»5æœˆ7æ—¥è‡³ä»Šï¼Œä¸€ç›´æ˜¯è¿™ä¸ªé”™è¯¯ã€‚
çŒœæƒ³å’ŒéªŒè¯Travis CIæˆæƒè¿‡æœŸäº†ï¼Ÿæ ¹æ®æŠ¥é”™ä¿¡æ¯ï¼Œå¾ˆå®¹æ˜“è”æƒ³åˆ°æˆæƒè¿‡æœŸï¼Œå› ä¸ºä¹‹å‰è¿˜å¥½å¥½çš„ï¼Œçªç„¶ä¸èƒ½ç”¨äº†ã€‚
1ã€è¿›å…¥GitHub Applications settingsé¡µé¢ï¼Œé…ç½®Travis CIã€‚2ã€æ£€æŸ¥äº†ä¸€éï¼Œå¹¶æ²¡æœ‰æˆæƒè¿‡æœŸä¸€è¯´ï¼Œæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚3ã€ä¿é™©èµ·è§ï¼Œè°ƒæ•´äº†ä¸€ä¸‹ Repository access ï¼Œä¿å­˜ã€‚ç„¶è€Œé—®é¢˜å¹¶æ²¡æœ‰è§£å†³ï¼Œè¯´æ˜ä¸æ˜¯æˆæƒè¿‡æœŸé—®é¢˜ã€‚
ç¼ºå°‘ .travis.yml ï¼ŸTravis CIè®ºå›ä¸Šæœ‰äººæ˜¯å› ä¸ºç¼ºå°‘ .travis.yml æ–‡ä»¶å¯¼è‡´ã€‚

In your case, itâ€™s due to a missing .travis.yml.

æ€€ç–‘è‡ªå·±ä¹Ÿæ˜¯è¯¯åˆ äº† .travis.yml æ–‡ä»¶ï¼Œä½†æ˜¯æ£€æŸ¥äº†ä¸€éï¼Œå¹¶æ²¡æœ‰è¯¯åˆ ã€‚
éœ€è¦æ¢å…è´¹ç‰ˆï¼ŸTravis CIè®ºå›ä¸Šè¿˜æœ‰äººæ²¡æœ‰æ‰¾åˆ°åŸå› ï¼Œæœ€ç»ˆæ¢äº†Github Actionsã€‚

I kept struggling on this, and finally left travis.com for Github Actions :persevere: Now I can build &amp; deploy again 

å¦‚æœéæ¢ä¸å¯çš„è¯ï¼Œæˆ‘æ‰“ç®—æ¢æˆTravis CIå…è´¹ç‰ˆï¼Œæ¯•ç«Ÿæ›´åŠ ç†Ÿæ‚‰ã€‚ä½†æ˜¯å·¥ä½œé‡å¾ˆå¤§ï¼Œå¾ˆå¤šåœ°æ–¹éƒ½éœ€è¦é‡æ–°é…ç½®ã€‚æˆ‘ä¸ä¿¡éœ€è¦è¿™ä¹ˆéº»çƒ¦ï¼
éœ€è¦åŠ å…¥ç»„ç»‡ï¼Ÿstackoverflowä¸Šæœ‰äººè¯´éœ€è¦ä¸ºç»„ç»‡é€‰æ‹©ä¸€ä¸ªplanï¼Œè«éç°åœ¨å¿…é¡»è¦åŠ å…¥ç»„ç»‡æ‰èƒ½ä½¿ç”¨Travis CIï¼Ÿ

Itâ€™s also worth mentioning that this happens if you do not have a plan selected for your organization. First, you need to select a plan (Travis does not automatically select the free plan for you). Then, you can trigger a build and see if things work.


If that does not work, youâ€™re likely out of builds and will need to upgrade the account.

äºæ˜¯ï¼Œåˆ›å»ºäº†ä¸€ä¸ªOrganizationsï¼šbegoodcoderã€‚ç„¶è€Œåˆ›å»ºç»„ç»‡åå¹¶æ²¡æœ‰è§£å†³é—®é¢˜ã€‚PSï¼šä¸ªäººæ„Ÿè§‰ç»„ç»‡å’Œä¸ªäººè´¦å·çš„åŒºåˆ«ï¼Œä¸»è¦æ˜¯ç»„ç»‡å¯ä»¥åˆ›å»ºå›¢é˜Ÿã€‚
Plan! Plan! Plan!stackoverflowä¸Šæœ‰å¤šä¸ªä¼˜è´¨å›ç­”æåˆ°äº†Planï¼Œè¿™ä¸ªPlanæ˜¯ä¸ªå•¥ï¼Ÿ

â€˜Could not authorize build request â€¦â€™ usually occurs due to

Has not activated either a free plan or a paid plan.
Expiration of the subscription.
Ran out of free trial build credits available for private repositories.Travis CI is always-free only for public repositories. The free plan also provides 10,000 build credits try out building private repositories. Read updated info on Billing FAQ.


1ã€Travis CIå³ä¸Šè§’ç‚¹å‡»è´¦å·ï¼Œé€‰æ‹©Settings
2ã€ç‚¹å‡»é¡µé¢ä¸Šçš„Plan
3ã€é€‰æ‹©Free plan
4ã€å†æ¬¡æ‰‹åŠ¨è§¦å‘é…é€ï¼ŒæˆåŠŸï¼
ä»¥ä¸Šï¼ŒTravis CIå¤±æ•ˆçš„é—®é¢˜å°±å®šä½å¹¶è§£å†³äº†ï¼Œéœ€è¦é€‰æ‹©ä¸€ä¸ªPlanï¼
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>cicd</tag>
        <tag>travis-ci</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Pythonæ“ä½œExcelè¡¨æ ¼</title>
    <url>/dev-python-excel/</url>
    <content><![CDATA[å‰è¨€æœ€è¿‘ç–«æƒ…åˆå˜å¾—ä¸¥é‡ï¼Œå¤šåœ°éƒ½æ¨è¿Ÿäº†å¼€å­¦ï¼Œæ”¹ä¸ºä¸Šç½‘è¯¾ã€‚è¿™æ ·ä¸€æ¥ï¼Œè€å¸ˆä»¬å°±éœ€è¦æ¯æ¬¡ä¸Šå®Œè¯¾åç»Ÿè®¡å­¦ç”Ÿçš„å‡ºå‹¤æƒ…å†µï¼ŒåŒ…æ‹¬æœªä¸Šè¯¾çš„åŒå­¦å’Œä¸Šè¯¾æ—¶é—´ä¸è¶³40åˆ†é’Ÿçš„åŒå­¦ã€‚
ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬å®¶è°­è€å¸ˆçš„ç»Ÿè®¡å·¥ä½œï¼Œå†³å®šè¶å‘¨æœ«å†™ä¸€ä¸ªè„šæœ¬ï¼ŒæŠŠäººå·¥ç»Ÿè®¡å˜æˆè‡ªåŠ¨ç»Ÿè®¡ã€‚


æ€è·¯1ã€é€‰æ‹©excelè¯»å†™æ¨¡å—ï¼Œç»è¿‡ç®€å•æ¯”è¾ƒå†³å®šé€‰æ‹© xlrd å’Œ xlwt ã€‚2ã€å·²çŸ¥å­¦ç”Ÿæ²¡æœ‰é‡åï¼Œå› æ­¤å…¨ä½“å­¦ç”Ÿå§“åä½œä¸ºé›†åˆAï¼Œä¸Šè¯¾å­¦ç”Ÿä½œä¸ºé›†åˆBï¼Œä¸Šè¯¾æ»¡40åˆ†é’Ÿå­¦ç”Ÿä½œä¸ºé›†åˆCã€‚æœªä¸Šè¯¾å­¦ç”Ÿä¸ºA-Bï¼Œä¸Šè¯¾æ—¶é—´ä¸è¶³40åˆ†é’Ÿçš„å­¦ç”Ÿä¸ºA-C-(A-B)ã€‚3ã€å› ä¸ºä¸¤ä¸ªç­çº§éœ€è¦åˆ†å¼€ç»Ÿè®¡ï¼Œå› æ­¤ä½¿ç”¨å­¦ç”Ÿå§“åä½œä¸ºdictçš„keyï¼Œç­çº§ä½œä¸ºdictçš„valueã€‚
å®ç°1ã€å®‰è£…ä¾èµ–
pip3 install xlrd==1.2.0pip3 install xlwt
ä¹‹æ‰€ä»¥æŒ‡å®šxlrdçš„ç‰ˆæœ¬ï¼Œæ˜¯å› ä¸ºæ›´é«˜çš„ç‰ˆæœ¬ä¸æ”¯æŒè¯»å–xlsxæ ¼å¼çš„è¡¨æ ¼ã€‚
2ã€ä»£ç å®ç°ç»Ÿè®¡ç¼ºå‹¤å­¦ç”Ÿ
3ã€ä»£ç æ‰§è¡Œ./main.py xxx.xlsx
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonä»£ç é£æ ¼æŒ‡å—</title>
    <url>/dev-python-style-guide/</url>
    <content><![CDATA[ä¸ºä»€ä¹ˆéœ€è¦ä»£ç é£æ ¼æŒ‡å—ï¼Ÿæœ¬æ–‡ä¸­å¤§éƒ¨åˆ†å†…å®¹æ¥è‡ªChatGPTã€‚
ä»£ç é£æ ¼æŒ‡å—æ˜¯ä¸€ç§æ—¨åœ¨ä¿ƒè¿›ä»£ç å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯é‡ç”¨æ€§çš„çº¦å®šã€‚è™½ç„¶å®ƒä»¬å¹¶ä¸å¼ºåˆ¶æ‰§è¡Œç‰¹å®šçš„ç¼–ç æ ‡å‡†ï¼Œä½†å®ƒä»¬å»ºè®®ä¸€äº›æœ€ä½³å®è·µå’Œå¸¸è§„çº¦å®šï¼Œä»¥å¸®åŠ©å¼€å‘è€…ç¼–å†™æ›´å…·ä¸€è‡´æ€§ã€å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§çš„ä»£ç ã€‚
ä»¥ä¸‹æ˜¯ä¸€äº›ä»£ç é£æ ¼æŒ‡å—çš„é‡è¦åŸå› ï¼š

å¯è¯»æ€§ï¼šä»£ç é£æ ¼æŒ‡å—å¯ä»¥å¸®åŠ©å¼€å‘è€…ç¼–å†™æ›´åŠ å¯è¯»çš„ä»£ç ã€‚è¿™æœ‰åŠ©äºé™ä½ä»£ç ç»´æŠ¤æˆæœ¬ï¼Œå› ä¸ºä»£ç æ›´å®¹æ˜“ç†è§£å’Œä¿®æ”¹ã€‚

ä¸€è‡´æ€§ï¼šä»£ç é£æ ¼æŒ‡å—å¯ä»¥ç¡®ä¿ä»£ç åœ¨æ•´ä¸ªé¡¹ç›®ä¸­ä¿æŒä¸€è‡´çš„å¤–è§‚å’Œæ„Ÿè§‰ã€‚è¿™æœ‰åŠ©äºæé«˜ä»£ç å¯ç»´æŠ¤æ€§å’Œå¯é‡ç”¨æ€§ï¼Œå› ä¸ºå¼€å‘è€…å¯ä»¥æ›´è½»æ¾åœ°äº†è§£ä»£ç å¦‚ä½•å·¥ä½œã€‚

é”™è¯¯ï¼šä»£ç é£æ ¼æŒ‡å—å¯ä»¥å‡å°‘ç¼–ç é”™è¯¯çš„å¯èƒ½æ€§ã€‚ä¾‹å¦‚ï¼Œå¼ºåˆ¶å®æ–½ç¼©è¿›çº¦å®šå¯ä»¥é˜²æ­¢ä¸æ­£ç¡®çš„ç¼©è¿›å¯¼è‡´çš„è¯­æ³•é”™è¯¯ã€‚

æ²Ÿé€šï¼šä»£ç é£æ ¼æŒ‡å—å¯ä»¥æé«˜ä»£ç çš„å¯äº¤æµæ€§ï¼Œå› ä¸ºå¼€å‘è€…å¯ä»¥è½»æ¾åœ°äº†è§£ä»£ç ä¸­ä½¿ç”¨çš„æƒ¯ç”¨è¯­å’Œæƒ¯ä¾‹ã€‚

æœ€ä½³å®è·µï¼šä»£ç é£æ ¼æŒ‡å—å¯ä»¥æä¾›æœ€ä½³å®è·µå’Œè§„åˆ™ï¼Œä»¥ç¡®ä¿å¼€å‘äººå‘˜éµå¾ªæœ€ä½³å®è·µå’Œè§„åˆ™ï¼Œä»¥æé«˜ä»£ç è´¨é‡å’Œå¯é‡ç”¨æ€§ã€‚


åœ¨ç°ä»£è½¯ä»¶å¼€å‘ä¸­ï¼Œä»£ç é£æ ¼æŒ‡å—å·²æˆä¸ºä¸€ç§éå¸¸é‡è¦çš„çº¦å®šï¼Œä»¥å¸®åŠ©å›¢é˜Ÿå¼€å‘ä¸€è‡´ã€å¯è¯»æ€§å¼ºä¸”æ˜“äºç»´æŠ¤çš„ä»£ç ã€‚
æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹Google Pythonä»£ç é£æ ¼æŒ‡å—ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

google/styleguide
Google Python Style Guide
PEP 257 â€“ Docstring Conventions
PEP 3107 â€“ Function Annotations



å…³é”®åæ¡
ç¼©è¿›ä½¿ç”¨å››ä¸ªç©ºæ ¼ã€‚ä¸è¦ä½¿ç”¨åˆ¶è¡¨ç¬¦ï¼Œä¹Ÿä¸è¦æ··åˆä½¿ç”¨ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ã€‚
å˜é‡å’Œå‡½æ•°ååº”è¯¥æ˜¯å°å†™å­—æ¯ï¼Œç”¨ä¸‹åˆ’çº¿åˆ†éš”å•è¯ã€‚æ¨¡å—ååº”è¯¥æ˜¯å°å†™å­—æ¯ï¼Œç”¨ä¸‹åˆ’çº¿åˆ†éš”å•è¯ã€‚
ç±»ååº”è¯¥æ˜¯é©¼å³°å¼å‘½åï¼Œå³é¦–å­—æ¯å¤§å†™ï¼Œåç»­å•è¯é¦–å­—æ¯ä¹Ÿå¤§å†™ã€‚
æ¨¡å—çº§åˆ«çš„å¸¸é‡åº”è¯¥ä½¿ç”¨å…¨å¤§å†™å­—æ¯å’Œä¸‹åˆ’çº¿åˆ†éš”å•è¯ã€‚
å‡½æ•°å’Œæ–¹æ³•å‚æ•°åº”è¯¥ä½¿ç”¨selfã€clsä½œä¸ºå®ä¾‹æ–¹æ³•å’Œç±»æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚
è¡Œçš„é•¿åº¦ä¸åº”è¯¥è¶…è¿‡80ä¸ªå­—ç¬¦ï¼Œæ³¨é‡Šçš„è¡Œé•¿åº¦ä¸åº”è¯¥è¶…è¿‡72ä¸ªå­—ç¬¦ã€‚
ä½¿ç”¨æ–‡æ¡£å­—ç¬¦ä¸²ï¼ˆDocstringsï¼‰å¯¹æ¨¡å—ã€å‡½æ•°ã€ç±»å’Œæ–¹æ³•è¿›è¡Œæ–‡æ¡£åŒ–ã€‚
åœ¨ç±»å®šä¹‰ä¸­ä½¿ç”¨æ— å‚çš„super()è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ã€‚
ä½¿ç”¨list comprehensionæ¥æ›¿ä»£forå¾ªç¯è¿›è¡Œåˆ—è¡¨æ“ä½œã€‚
æ¯ä¸ªæ¨¡å—åº”è¯¥å…·æœ‰å¦‚ä¸‹çš„ç»“æ„ï¼šæ–‡ä»¶æ³¨é‡Šã€æ¨¡å—å¯¼å…¥ã€å¸¸é‡å®šä¹‰ã€å‡½æ•°å®šä¹‰ã€ç±»å®šä¹‰ç­‰ã€‚

é™¤äº†è¿™åæ¡è§„åˆ™ä¹‹å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„ç¼–ç è§„èŒƒéœ€è¦å¼€å‘è€…éµå¾ªï¼Œä»¥ç¡®ä¿ä»£ç çš„è´¨é‡å’Œå¯ç»´æŠ¤æ€§ã€‚
Docstringä»£ç é£æ ¼æŒ‡å—ä¸­çš„å†…å®¹éå¸¸å¤šï¼Œå¦‚æœè¯´å“ªä¸ªæœ€é‡è¦ï¼Œæˆ‘è®¤ä¸ºæ˜¯Docstringï¼ˆæ–‡æ¡£å­—ç¬¦ä¸²ï¼‰ã€‚
DocstringæŒ‡å—ï¼š

æ¨¡å—çº§åˆ«çš„æ–‡æ¡£åº”è¯¥åœ¨æ¨¡å—çš„é¡¶éƒ¨ä½¿ç”¨æ–‡æ¡£å­—ç¬¦ä¸²è¿›è¡Œæè¿°ã€‚
å‡½æ•°ã€ç±»å’Œæ–¹æ³•åº”è¯¥åœ¨å…¶å®šä¹‰ä¹‹åçš„ç¬¬ä¸€è¡Œä½¿ç”¨æ–‡æ¡£å­—ç¬¦ä¸²è¿›è¡Œæè¿°ã€‚
ä½¿ç”¨ä¸‰é‡å¼•å·æ¥åˆ›å»ºæ–‡æ¡£å­—ç¬¦ä¸²ï¼Œå¹¶ç¡®ä¿æ–‡æ¡£å­—ç¬¦ä¸²æ ¼å¼æ­£ç¡®ã€‚
æ–‡æ¡£å­—ç¬¦ä¸²çš„ç¬¬ä¸€è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªç®€è¦çš„æ‘˜è¦ï¼Œæ¦‚æ‹¬å‡½æ•°ã€ç±»æˆ–æ–¹æ³•çš„åŠŸèƒ½ã€‚
åœ¨æ–‡æ¡£å­—ç¬¦ä¸²çš„ç¬¬ä¸€è¡Œä¹‹åï¼Œåº”è¯¥ä½¿ç”¨ä¸€ä¸ªç©ºç™½è¡Œåˆ†éš”æ‘˜è¦å’Œè¯¦ç»†æè¿°ã€‚
åœ¨æ–‡æ¡£å­—ç¬¦ä¸²çš„è¯¦ç»†æè¿°ä¸­ï¼Œå¯ä»¥æä¾›æ›´å¤šæœ‰å…³å‡½æ•°ã€ç±»æˆ–æ–¹æ³•çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬å‚æ•°ã€è¿”å›å€¼ã€å¼‚å¸¸ã€å®ç°ç»†èŠ‚ç­‰ã€‚
å‚æ•°å’Œè¿”å›å€¼åº”è¯¥æŒ‰ç…§å‚æ•°åç§°å’Œç±»å‹è¿›è¡Œæè¿°ï¼Œå¹¶åœ¨å®ƒä»¬ä¹‹å‰æ·»åŠ â€œArgsâ€å’Œâ€œReturnsâ€ç­‰å…³é”®è¯ã€‚
å¼‚å¸¸åº”è¯¥æŒ‰ç…§å¼‚å¸¸ç±»å‹è¿›è¡Œæè¿°ï¼Œå¹¶åœ¨å®ƒä»¬ä¹‹å‰æ·»åŠ â€œRaisesâ€å…³é”®è¯ã€‚
åœ¨ç±»çš„æ–‡æ¡£å­—ç¬¦ä¸²ä¸­ï¼Œåº”è¯¥æè¿°ç±»çš„æ„é€ å‡½æ•°å’Œæ‰€æœ‰å…¬å…±æ–¹æ³•ã€‚
åœ¨å‡½æ•°å’Œæ–¹æ³•çš„æ–‡æ¡£å­—ç¬¦ä¸²ä¸­ï¼Œåº”è¯¥æè¿°å‡½æ•°æˆ–æ–¹æ³•çš„å‚æ•°ã€è¿”å›å€¼ã€å¼‚å¸¸ã€å®ç°ç»†èŠ‚ç­‰ã€‚

å‡½æ•°å’Œæ–¹æ³•çš„Docstringç¤ºä¾‹ï¼š
def fetch_smalltable_rows(    table_handle: smalltable.Table,    keys: Sequence[bytes | str],    require_all_keys: bool = False,) -&gt; Mapping[bytes, tuple[str, ...]]:    &quot;&quot;&quot;Fetches rows from a Smalltable.    Retrieves rows pertaining to the given keys from the Table instance    represented by table_handle.  String keys will be UTF-8 encoded.    Args:        table_handle: An open smalltable.Table instance.        keys: A sequence of strings representing the key of each table          row to fetch.  String keys will be UTF-8 encoded.        require_all_keys: If True only rows with values set for all keys will be          returned.    Returns:        A dict mapping keys to the corresponding table row data        fetched. Each row is represented as a tuple of strings. For        example:        &#123;b&#x27;Serak&#x27;: (&#x27;Rigel VII&#x27;, &#x27;Preparer&#x27;),         b&#x27;Zim&#x27;: (&#x27;Irk&#x27;, &#x27;Invader&#x27;),         b&#x27;Lrrr&#x27;: (&#x27;Omicron Persei 8&#x27;, &#x27;Emperor&#x27;)&#125;        Returned keys are always bytes.  If a key from the keys argument is        missing from the dictionary, then that row was not found in the        table (and require_all_keys must have been False).    Raises:        IOError: An error occurred accessing the smalltable.    &quot;&quot;&quot;

ç±»çš„Docstringç¤ºä¾‹ï¼š
class SampleClass:    &quot;&quot;&quot;Summary of class here.    Longer class information...    Longer class information...    Attributes:        likes_spam: A boolean indicating if we like SPAM or not.        eggs: An integer count of the eggs we have laid.    &quot;&quot;&quot;    def __init__(self, likes_spam: bool = False):        &quot;&quot;&quot;Initializes the instance based on spam preference.        Args:          likes_spam: Defines if instance exhibits this preference.        &quot;&quot;&quot;        self.likes_spam = likes_spam        self.eggs = 0    def public_method(self):        &quot;&quot;&quot;Performs operation blah.&quot;&quot;&quot;

å—å’Œè¡Œçš„Docstringç¤ºä¾‹ï¼š
# We use a weighted dictionary search to find out where i is in# the array.  We extrapolate position based on the largest num# in the array and the array size and then do binary search to# get the exact number.if i &amp; (i-1) == 0:  # True if i is 0 or a power of 2.

VSCodeä¸­çš„è‡ªåŠ¨ç”ŸæˆDocstringçš„æ–¹æ³•ï¼Œå‚è€ƒæ–‡æ¡£ã€ŠVSCodeå¸¸ç”¨å¿«æ·é”®å’Œé…ç½®ã€‹
åè®°æ›´å¤šè¯¦ç»†å†…å®¹ï¼Œè¯·ç§»æ­¥é˜…è¯»Google Python Style Guide
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>chatgpt</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¿®æ”¹ MP3 çš„ ID3Tags</title>
    <url>/dev-modify-mp3-id3tags/</url>
    <content><![CDATA[ID3Tagsæ˜¯å•¥ï¼ŸID3Tagsï¼Œç®€ç§° ID3 ï¼Œè¡¨ç¤ºMP3æ–‡ä»¶æ›²ç›®æ ‡ç­¾ã€‚ID3ä½äºä¸€ä¸ªmp3æ–‡ä»¶çš„å¼€å¤´æˆ–æœ«å°¾çš„è‹¥å¹²å­—èŠ‚å†…ï¼Œé™„åŠ äº†å…³äºè¯¥mp3çš„æ­Œæ‰‹ï¼Œæ ‡é¢˜ï¼Œä¸“è¾‘åç§°ï¼Œå¹´ä»£ï¼Œé£æ ¼ç­‰ä¿¡æ¯ï¼Œè¯¥ä¿¡æ¯å°±è¢«ç§°ä¸ºID3ä¿¡æ¯ï¼ŒID3ä¿¡æ¯åˆ†ä¸ºä¸¤ä¸ªç‰ˆæœ¬ï¼Œv1å’Œv2ç‰ˆã€‚å…¶ä¸­v1ç‰ˆçš„ID3åœ¨mp3æ–‡ä»¶çš„æœ«å°¾128å­—èŠ‚ï¼Œä»¥TAGä¸‰ä¸ªå­—ç¬¦å¼€å¤´ï¼Œåé¢è·Ÿä¸Šæ­Œæ›²ä¿¡æ¯ã€‚v2ç‰ˆä¸€èˆ¬ä½äºmp3çš„å¼€å¤´ï¼Œå¯ä»¥å­˜å‚¨æ­Œè¯ï¼Œè¯¥ä¸“è¾‘çš„å›¾ç‰‡ç­‰å¤§å®¹é‡çš„ä¿¡æ¯ã€‚
ID3å…¨ç§°æ˜¯å•¥ï¼Ÿæ²¡æœ‰æ‰¾åˆ°ï¼Œæ‡‚å¾—çš„å°ä¼™ä¼´æ„Ÿè°¢ç•™è¨€å‘ŠçŸ¥ã€‚


æ€è·¯ä½¿ç”¨pythonç¬¬ä¸‰æ–¹åº“ï¼ŒæŸ¥çœ‹mp3å½“å‰id3tagsï¼Œä¿®æ”¹id3tagså¹¶ä¿å­˜ã€‚æ‰¾åˆ°äº†ä¸¤ä¸ªä¸é”™çš„pythonç¬¬ä¸‰æ–¹åº“ï¼š

eyeD3 document
Mutagen document

è¿™é‡Œé€‰æ‹©eyeD3ï¼Œå› ä¸ºä½¿ç”¨æ›´ç®€å•ã€‚ä½¿ç”¨åˆ°çš„å‚æ•°å’Œæ–¹æ³•ï¼Œå‚è€ƒeyed3.id3ã€‚
å®‰è£…ä½¿ç”¨eyeD3å®‰è£…eyeD3python3 -m pip install eyed3 -i https://pypi.tuna.tsinghua.edu.cn/simple/

æŸ¥çœ‹mp3çš„id3eyeD3 -heyeD3 song.mp3

å¯èƒ½è¾“å‡ºï¼šNo audio files found.è¿™æ˜¯å› ä¸ºï¼Œæœ‰äº›éŸ³é¢‘æ–‡ä»¶è™½ç„¶ä»¥.mp3ç»“å°¾ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨éŸ³é¢‘æ’­æ”¾å™¨æ’­æ”¾ï¼Œä½†æ˜¯ä¸ä¸€å®šæ˜¯mp3æ–‡ä»¶ã€‚æŸ¥çœ‹çœŸå®æ–‡ä»¶ç±»å‹çš„æ–¹æ³•ï¼š
file song.mp3file *

å¦‚æœå‘ç°äº†émp3æ–‡ä»¶ï¼Œè¯·å…ˆè½¬æˆmp3æ–‡ä»¶ï¼Œå†è¿›è¡Œid3ä¿®æ”¹ï¼Œå› ä¸ºåªæœ‰mp3æ–‡ä»¶æ‰å…·æœ‰mp3æ–‡ä»¶æ›²ç›®æ ‡ç­¾ã€‚
ç¼–ç å®ç°ä¿®æ”¹ID3TagsæŸ¥çœ‹id3æŸ¥çœ‹æ‰€æœ‰mp3çš„id3ä¿¡æ¯
#!/usr/bin/env python3# coding: utf-8import osimport eyed3from pydub.utils import mediainfofrom pydub import AudioSegmentdef get_audio_paths(dir_path):    audio_paths = []    for dirs, dirnames, files in os.walk(dir_path):        for file in files:            if file.endswith(&#x27;.mp3&#x27;):                audio_paths.append(dirs+&#x27;/&#x27;+file)    return audio_pathsdef show_id3(audio_path):    # load å’Œ save æ—¶ä¼šæ‰“å°å‡º Invalid date: ???????:36903863 ï¼Œå¯å¿½ç•¥    audio = eyed3.load(audio_path)    audio_name = audio_path.split(&#x27;/&#x27;)[-1]    if audio is None:        info = mediainfo(audio_path)        print(&#x27;------ &#x27; + audio_name + &#x27; ------&#x27;)        print(audio_name + &#x27;ä¸æ˜¯mp3æ ¼å¼&#x27;)        print(&#x27;éŸ³é¢‘ç¼–ç : &#x27; + info[&#x27;codec_name&#x27;])        print(&#x27;æ–‡ä»¶ç±»å‹: &#x27; + info[&#x27;codec_tag_string&#x27;])        print(&#x27;------ &#x27; + &#x27;------&#x27; + &#x27; ------&#x27;)    elif audio.tag is None:        print(&#x27;------ &#x27; + audio_name + &#x27; ------&#x27;)        print(&#x27;ä¸å­˜åœ¨id3&#x27;)        print(&#x27;------ &#x27; + &#x27;------&#x27; + &#x27; ------&#x27;)    else:        print(&#x27;------ &#x27; + audio_name + &#x27; ------&#x27;)        if audio.tag.title:            print(&#x27;title: &#x27; + audio.tag.title)        if audio.tag.artist:            print(&#x27;artist: &#x27; + audio.tag.artist)        print(&#x27;------ &#x27; + &#x27;------&#x27; + &#x27; ------&#x27;)if __name__ == &#x27;__main__&#x27;:    audio_paths = get_audio_paths(&#x27;./mp3&#x27;)    # æ˜¾ç¤ºid3ä¿¡æ¯    for audio_path in audio_paths:        show_id3(audio_path)

m4aè½¬æ¢ä¸ºmp3m4aï¼ˆmp4aï¼‰æ ¼å¼çš„æ–‡ä»¶ï¼Œè½¬æ¢ä¸ºmp3æ ¼å¼ã€‚
def m4a_to_mp3(audio_path):    audio = eyed3.load(audio_path)    audio_name = audio_path.split(&#x27;/&#x27;)[-1]    if audio is None:        info = mediainfo(audio_path)        print(&#x27;------ &#x27; + audio_name + &#x27; ------&#x27;)        print(&#x27;codec_name: &#x27; + info[&#x27;codec_name&#x27;])        print(&#x27;codec_tag_string: &#x27; + info[&#x27;codec_tag_string&#x27;])        print(&#x27;------ &#x27; + &#x27;------&#x27; + &#x27; ------&#x27;)        if info[&#x27;codec_tag_string&#x27;] == &#x27;mp4a&#x27;:            # åŠ è½½m4aæ–‡ä»¶            audio = AudioSegment.from_file(audio_path, format=&quot;m4a&quot;)            # å¯¼å‡ºä¸ºmp3æ–‡ä»¶            audio.export(audio_path + &#x27;.mp3&#x27;, format=&quot;mp3&quot;)            print(audio_name + &#x27; converted to &#x27; + audio_path + &#x27;.mp3&#x27;)

è„šæœ¬ä¿®æ”¹id3éœ€æ±‚ï¼šå·²æœ‰200ä¸ªmp3æ–‡ä»¶ï¼Œid3ä¿¡æ¯éƒ½æ˜¯å¹¿å‘Šã€‚ç°åœ¨æƒ³è¦æ‰¹é‡æ¸…é™¤mp3æ–‡ä»¶ç°æœ‰çš„id3ï¼Œç„¶åæ ¹æ®æ–‡ä»¶åä¿®æ”¹titleï¼Œæ ¹æ®çœŸå®ä½œè€…ä¿®æ”¹artistï¼Œæ ¹æ®çœŸå®å°é¢ä¿®æ”¹å°é¢ã€‚
def modify_id3(audio_path, title, artist ,img_path):    audio = eyed3.load(audio_path)    if not audio.tag:        audio.initTag()    else:        audio.tag.clear()    audio.tag.title = title    audio.tag.artist = artist    audio.tag.images.set(3, open(img_path,&#x27;rb&#x27;).read(), &#x27;image/jpeg&#x27;)    audio.tag.save()    if __name__ == &#x27;__main__&#x27;:    audio_paths = get_audio_paths(&#x27;./mp3&#x27;)    # ä¿®æ”¹id3ä¿¡æ¯    for audio_path in audio_paths:        title = audio_path.split(&#x27;/&#x27;)[-1]        artist = &#x27;é’±æ–‡å¿ &#x27;        img_path = &#x27;./img.png&#x27; # 200x200        modify_id3(audio_path, title, artist ,img_path)


]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
        <category>computer</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo Nextä¸»é¢˜æ˜¾ç¤ºæ–‡ç« æ›´æ–°æ—¶é—´</title>
    <url>/dev-hexo-next-update-time/</url>
    <content><![CDATA[é—®é¢˜ã€ŠHexoæ›´æ¢ä¸»é¢˜ä¸ºNextã€‹ä¸€æ–‡ä¸­ï¼Œå…³é—­äº†æ–‡ç« çš„æ›´æ–°æ—¶é—´ã€‚å› ä¸ºnextä¸»é¢˜é»˜è®¤æ˜¯ä½¿ç”¨markdownæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ä½œä¸ºæ›´æ–°æ—¶é—´ï¼Œè¿™ä¸ªæ—¶é—´æ˜¯ä¸ç¬¦åˆé¢„æœŸçš„ã€‚æ¯”å¦‚æˆ‘æ¢äº†ç”µè„‘ï¼Œcloneä¸‹æ¥markdownæ–‡ä»¶ï¼Œå†™å®Œåå‘å¸ƒï¼Œé‚£ä¹ˆæ‰€æœ‰æ–‡ç« çš„æ›´æ–°æ—¶é—´éƒ½ä¼šå˜æˆå½“å‰æ—¶é—´ï¼Œè¿™ä¸ªå°±ä¸ç¬¦åˆé¢„æœŸï¼Œå°±ä¸å¯¹ã€‚
ä½†æ˜¯ï¼Œæ–‡ç« æ›´æ–°æ—¶é—´ç¡®å®æ˜¯æœ‰æ„ä¹‰çš„ï¼Œè¯»è€…èƒ½å¤Ÿé€šè¿‡æ›´æ–°æ—¶é—´æ¨æ–­å‡ºä¸€ç¯‡æ–‡ç« çš„æœ‰æ•ˆæ€§ã€‚æ¯”å¦‚å¾ˆå¤šå·¥å…·å’ŒæŠ€æœ¯æ˜¨å¤©å¯ä»¥ç”¨ï¼Œæ–‡ç« å†™çš„æ²¡æ¯›ç—…ï¼Œä½†æ˜¯ä¹Ÿè®¸ä»Šå¤©å°±ä¸èƒ½ç”¨äº†ã€‚
æœ¬æ–‡å°±æ¥ç ”ç©¶ä¸€ä¸‹ï¼Œæ€æ ·è®©nextä¸»é¢˜æ˜¾ç¤ºç¬¦åˆé¢„æœŸçš„ã€å‡†ç¡®çš„æ›´æ–°æ—¶é—´ã€‚


æ€è·¯é¦–å…ˆï¼Œæˆ‘ä»¬çŸ¥é“nextä¸»é¢˜æ˜¯æ”¯æŒæ˜¾ç¤ºæ›´æ–°æ—¶é—´çš„ï¼Œåªä¸è¿‡æ˜¾ç¤ºçš„æ›´æ–°æ—¶é—´ä¸å¯¹ã€‚é‚£ä¹ˆï¼Œèƒ½ä¸èƒ½æ˜¾ç¤ºå¯¹çš„æ›´æ–°æ—¶é—´å‘¢ï¼Ÿçœ‹ä»£ç ã€‚
1ã€_config.ymlï¼Œå…¶ä¸­å…³äºæ›´æ–°æ—¶é—´çš„éƒ¨åˆ†ï¼š
# Post meta display settingspost_meta:  item_text: true  created_at: true  updated_at:    enable: true    another_day: true  categories: true

2ã€layout/_macro/post.swigï¼Œå…¶ä¸­å…³äºæ›´æ–°æ—¶é—´çš„éƒ¨åˆ†ï¼š
&#123;%- if theme.post_meta.updated_at.enable and datetime_diff %&#125;  &#123;%- set display_updated = not theme.post_meta.updated_at.another_day or theme.post_meta.updated_at.another_day and date_diff %&#125;  &#123;%- if display_updated or not theme.post_meta.created_at %&#125;    &lt;span class=&quot;post-meta-item&quot;&gt;      &lt;span class=&quot;post-meta-item-icon&quot;&gt;        &lt;i class=&quot;fa fa-calendar-check-o&quot;&gt;&lt;/i&gt;      &lt;/span&gt;      &lt;span class=&quot;post-meta-item-text&quot;&gt;&#123;&#123; __(&#x27;post.edited&#x27;) &#125;&#125;&lt;/span&gt;      &lt;time title=&quot;&#123;&#123; __(&#x27;post.modified&#x27;) + __(&#x27;symbol.colon&#x27;) + full_date(post.updated) &#125;&#125;&quot; itemprop=&quot;dateModified&quot; datetime=&quot;&#123;&#123; moment(post.updated).format() &#125;&#125;&quot;&gt;&#123;&#123; date(post.updated) &#125;&#125;&lt;/time&gt;    &lt;/span&gt;  &#123;%- endif %&#125;&#123;%- endif %&#125;

ç”±ä¸Šé¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼š

åªè¦åœ¨æ–‡ç« å¤´éƒ¨yamlå®šä¹‰ä¸­æ·»åŠ  updated å­—æ®µï¼Œå°±å¯ä»¥æ˜¾ç¤ºæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„æ›´æ–°æ—¶é—´ï¼Œè€Œä¸æ˜¯æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ã€‚
å¦‚æœå¼€å¯äº† post_meta.updated_at.another_day ï¼Œå½“ date å’Œ updated æ—¥æœŸç›¸åŒæ—¶ï¼Œåªä¼šæ˜¾ç¤ºå‘å¸ƒæ—¶é—´ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬ç°åœ¨æœ‰ä¸¤ä¸ªæ€è·¯æ¥å®ç°nextä¸»é¢˜æ˜¾ç¤ºç¬¦åˆé¢„æœŸçš„æ›´æ–°æ—¶é—´ã€‚æ€è·¯ä¸€ï¼šå¼€å¯ post_meta.updated_at.enableï¼Œç„¶åç»™æ‰€æœ‰çš„mdæ–‡ä»¶æ·»åŠ  updated å­—æ®µã€‚æ€è·¯äºŒï¼šå¼€å¯ post_meta.updated_at.enableï¼Œä¿®æ”¹ post.swig ï¼Œä»¤æ²¡æœ‰ updated å­—æ®µçš„mdæ–‡ä»¶åªæ˜¾ç¤ºå‘å¸ƒæ—¶é—´ï¼Œæœ‰ updated å­—æ®µçš„mdæ–‡ä»¶æ˜¾ç¤ºå‘å¸ƒæ—¶é—´å’Œæ›´æ–°æ—¶é—´ã€‚
è¿™é‡Œé€‰æ‹©æ€è·¯ä¸€ï¼Œå› ä¸ºå®ç°çš„é€»è¾‘æœ€ç®€å•ï¼Œè€Œä¸”éƒåŒå­¦çš„shellè„šæœ¬ç”¨çš„è¿˜ä¸é”™ã€‚
å®ç°å¼€å¯æ›´æ–°æ—¶é—´æ˜¾ç¤º_config.ymlï¼Œå¼€å¯æ›´æ–°æ—¶é—´æ˜¾ç¤ºï¼š
# Post meta display settingspost_meta:  item_text: true  created_at: true  updated_at:    enable: true    another_day: true  categories: true

æ·»åŠ updatedå­—æ®µ1ã€å‡†å¤‡è„šæœ¬
#!/bin/bashdir=&quot;_posts&quot;for file in `ls $&#123;dir&#125; | grep &#x27;.md&#x27;`;do    content=$(cat $&#123;dir&#125;/$&#123;file&#125;| head -n 10 | grep &#x27;date: &#x27;)    datestr=$(echo &quot;$content&quot; | awk &#x27;&#123;print $2&quot; &quot;$3&#125;&#x27;)    newcontent=&quot;updated: &quot;$datestr    sed -i &quot;/$content/a\\$newcontent&quot; $&#123;dir&#125;/$&#123;file&#125;done

2ã€æ‰§è¡Œè„šæœ¬æŠŠè„šæœ¬æ”¾åˆ° source ç›®å½•ä¸‹ï¼Œç„¶åæ‰§è¡Œè„šæœ¬ bash modify.shå¤‡æ³¨ï¼šéœ€è¦linuxç¯å¢ƒï¼Œmacç¯å¢ƒçš„sedå‘½ä»¤å’Œlinuxç¯å¢ƒçš„sedå‘½ä»¤æœ‰å·®å¼‚ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Travis CIéƒ¨ç½²é¡¹ç›®åˆ°æœåŠ¡å™¨</title>
    <url>/dev-travis-ci-deploy-to-server/</url>
    <content><![CDATA[å‰è¨€ã€ŠHexoé…ç½®Travis CIè‡ªåŠ¨å‘å¸ƒã€‹ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†ä½¿ç”¨travis-ciæ„å»ºå‘å¸ƒhexoé¡¹ç›®çš„æ–¹æ³•ã€‚
å› ä¸ºé¡¹ç›®çš„ç‰¹æ®Šæ€§ï¼Œæ‰€ä»¥å‘å¸ƒæ—¶åªæ˜¯æŠŠä»£ç pushåˆ°äº†gitä»“åº“ï¼Œå¹¶æ²¡æœ‰æŠŠä»£ç å‘å¸ƒåˆ°æˆ‘ä»¬è‡ªå·±çš„æœåŠ¡ã€‚æœ¬æ–‡ï¼Œæˆ‘ä»¬å°±æ¥å­¦ä¹ ä¸€ä¸‹æ€æ ·é€šè¿‡travis-ciï¼ŒæŠŠé¡¹ç›®å‘å¸ƒåˆ°æˆ‘ä»¬è‡ªå·±çš„æœåŠ¡å™¨ã€‚
éœ€æ±‚ï¼šå·²çŸ¥hexoé¡¹ç›®éƒ¨ç½²åœ¨githubï¼Œç™¾åº¦æŠ“å–ä¸åˆ°githubçš„å†…å®¹ï¼Œå› æ­¤æˆ‘ä»¬æƒ³è¦åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¹Ÿéƒ¨ç½²ä¸€ä»½ä»£ç ï¼Œå›½å†…çš„æµé‡æ‰“åˆ°è‡ªå·±çš„æœåŠ¡å™¨ã€‚å®ç°å›½å†…æµé‡ -&gt; é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œå›½å¤–æµé‡ -&gt; github pagesã€‚é…ç½® hexo-deploy ï¼Œåœ¨å‘å¸ƒæ—¶ä¼šåŒæ—¶å‘å¸ƒé™æ€é¡µé¢åˆ° voidking.github.io å’Œ voidkingã€‚é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Šæœ‰é¡¹ç›® /opt/nginx/work/voidking ï¼Œé¡¹ç›®ä»“åº“ä¸º voidkingã€‚ç°åœ¨æƒ³è¦å®ç°çš„æ˜¯ï¼Œå½“ä½¿ç”¨ hexo-deploy ä¹‹åï¼Œé˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Šçš„ä»£ç èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°ã€‚


æ€è·¯ç»™ voidking.github.io é¡¹ç›®é…ç½®travis-ciï¼Œå½“é™æ€é¡µé¢æ›´æ–°å®Œæˆåï¼Œåœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Šæ‰§è¡Œ git pullã€‚ä¸­é—´éœ€è¦è§£å†³çš„ä¸»è¦é—®é¢˜æ˜¯ï¼š travis-ci è®¿é—®é˜¿é‡Œäº‘æœåŠ¡å™¨çš„æƒé™é—®é¢˜ã€‚
å¦å¤–ï¼Œå› ä¸º voidking.github.io é¡¹ç›®æ˜¯çº¿ä¸Šé¡¹ç›®ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåœ¨githubä¸Šå’Œtravis-ciä¸Šåˆ†åˆ«åˆ›å»ºä¸€ä¸ª travis-test é¡¹ç›®ï¼Œç”¨æ¥æµ‹è¯•travis-ciçš„é…ç½®ã€‚
é…ç½®travis-ciæœåŠ¡å™¨å¯†é’¥é…ç½®1ã€åˆ›å»ºä¸€ä¸ªç”¨æˆ·ä¸“é—¨ç”¨æ¥æ›´æ–°ä»£ç 
useradd -m voidking -s /bin/bashpasswd voidkingchown voidking -R /opt/nginx/work/

2ã€ç”Ÿæˆå¯†é’¥
su voidkingcd ~ssh-keygen
æ‰§è¡Œå®Œä¹‹åï¼Œ.sshç›®å½•ä¸‹ç”Ÿæˆäº† id_rsa å’Œ id_rsa.pubã€‚
3ã€ä½¿å¯†é’¥ç”Ÿæ•ˆ
ALI_IP=&quot;8.136.13.58&quot;ssh-copy-id -i .ssh/id_rsa.pub voidking@$&#123;ALI_IP&#125;ssh voidking@$&#123;ALI_IP&#125;

å®‰è£…travis clientç›´æ¥å®‰è£…travisç ´åæœåŠ¡å™¨ç¯å¢ƒï¼Œå› æ­¤æœ€å¥½ä½¿ç”¨Dockerå®‰è£…travisã€‚1ã€è¿è¡Œtraviså®¹å™¨
docker pull ruby:slimdocker run --name travis -it -d ruby:slim /bin/bashdocker exec -it travis /bin/bash

2ã€å®¹å™¨å†…å®‰è£…travis client
# gem sources --add https://gems.ruby-china.com/ --remove https://rubygems.org/gem install travistravis -h

travis-ciå¯†é’¥é…ç½®1ã€æ‹·è´å¯†é’¥åˆ°å®¹å™¨
docker cp /home/voidking/.ssh/id_rsa travis:/tmpdocker exec -it travis /bin/bash

2ã€ç™»å½•travis-ci
cd /tmptravis login --com --github-token xxxxxx

3ã€å¯¹id_rsaåŠ å¯†ï¼Œç”Ÿæˆid_rsa.encï¼›åŒæ—¶ç”ŸæˆæœåŠ¡ç«¯è§£å¯†å‘½ä»¤
touch .travis.ymltravis encrypt-file id_rsa --add --com --repo=voidking/travis-test
è¯¦æƒ…å‚è€ƒEncrypting Filesã€‚
æ‰§è¡Œå®Œå‘½ä»¤ï¼Œä¼šç”ŸæˆåŠ å¯†æ–‡ä»¶ id_rsa.encï¼Œ.travis.yml ä¸­ä¼šè¢«å†™å…¥è§£å¯†å‘½ä»¤ï¼š
before_install:- openssl aes-256-cbc -K $encrypted_f217180e22ee_key -iv $encrypted_f217180e22ee_iv -in id_rsa.enc -out id_rsa -d
å¹¶ä¸”ï¼Œå˜é‡ encrypted_f217180e22ee_key å’Œ encrypted_f217180e22ee_iv ä¼šå¡«å…¥travis-ciä¸Štravis-testé¡¹ç›®ä¸­çš„ç¯å¢ƒå˜é‡é…ç½®ä¸­ã€‚
travis.ymlé…ç½®1ã€è®¿é—®Travis CI Proï¼Œæ‰¾åˆ° travis-test é¡¹ç›®ï¼ŒSettingsï¼Œåœ¨Environment Variablesä¸€æ å¡«å…¥Nameä¸ºGITEE_TOKENï¼ŒVALUEä¸ºgiteeçš„access tokenã€‚
2ã€åœ¨githubä¸Š travis-test é¡¹ç›®ä¸­æ”¾å…¥ id_rsa.enc
3ã€åœ¨githubä¸Š travis-test é¡¹ç›®ä¸­åˆ›å»º .travis.ymlï¼Œå†…å®¹ä¸º
sudo: falselanguage: pythonpython:- 3.6branches:  only:  - main # build main branch onlyenv:  global:  - ALI_IP: 8.136.13.58  - GIT_USER: voidking  - GITEE_PAGES_REPO: gitee.com/voidking/voidking.gitaddons:  ssh_known_hosts:   - 8.136.13.58before_install:- openssl aes-256-cbc -K $encrypted_f217180e22ee_key -iv $encrypted_f217180e22ee_iv -in id_rsa.enc -out ~/.ssh/id_rsa -d- chmod 600 ~/.ssh/id_rsascript:- ssh voidking@$&#123;ALI_IP&#125; &quot;cd /opt/nginx/work/voidking/ &amp;&amp; git pull --force --quiet \&quot;https://$&#123;GIT_USER&#125;:$&#123;GITEE_TOKEN&#125;@$&#123;GITEE_PAGES_REPO&#125;\&quot; master:master&quot;after_success:- echo &quot;deploy success&quot;

4ã€æäº¤ä»£ç 
git add .git commmit -m &quot;æ·»åŠ travis.yml&quot;git push

5ã€éªŒè¯æ‰“å¼€travis voidking/travis-test ï¼Œå¯ä»¥çœ‹åˆ°è„šæœ¬å·²ç»æˆåŠŸæ‰§è¡Œã€‚
ç™»å½•é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œgit logæŸ¥çœ‹ä»£ç ç‰ˆæœ¬ï¼Œç¡®å®ä¹Ÿå·²ç»æ›´æ–°åˆ°äº†æœ€æ–°ç‰ˆã€‚niceï¼
æœ€åï¼ŒåŒæ ·çš„æ­¥éª¤é…ç½®åˆ° voidking.github.io é¡¹ç›®ä¸Šå³å¯ã€‚
é…ç½®travis-ciç®€åŒ–ç‰ˆä¸Šé¢çš„æµç¨‹ï¼Œå®‰å…¨æ€§è¾ƒé«˜ï¼Œä½†æ˜¯æ•´ä¸ªæµç¨‹å¾ˆéº»çƒ¦ï¼Œæœ‰æ²¡æœ‰æ›´ç®€å•çš„åŠæ³•ï¼Ÿå¿…é¡»æ˜¯æœ‰çš„ã€‚æ–¹æ³•ä¸€ï¼šå®‰è£…sshpassï¼Œç›´æ¥ä½¿ç”¨å¯†ç ç™»å½•æœåŠ¡å™¨æ‰§è¡Œå‘½ä»¤ã€‚æ–¹æ³•äºŒï¼šæŠŠç§é’¥ä½œä¸ºå‚æ•°é…ç½®åˆ°travis-ciï¼Œä½¿ç”¨æ—¶å†™å…¥åˆ°æ–‡ä»¶ä¸­ã€‚
æœ¬èŠ‚ä¸­æˆ‘ä»¬ç ”ç©¶ä¸€ä¸‹æ–¹æ³•äºŒçš„é…ç½®æ–¹æ³•ã€‚
æœåŠ¡å™¨å¯†é’¥é…ç½®1ã€åˆ›å»ºä¸€ä¸ªç”¨æˆ·ä¸“é—¨ç”¨æ¥æ›´æ–°ä»£ç 
useradd -m voidking -s /bin/bashpasswd voidkingchown voidking -R /opt/nginx/work/

2ã€ç”Ÿæˆå¯†é’¥
su voidkingcd ~ssh-keygen
æ‰§è¡Œå®Œä¹‹åï¼Œ.sshç›®å½•ä¸‹ç”Ÿæˆäº† id_rsa å’Œ id_rsa.pubã€‚
3ã€ä½¿å¯†é’¥ç”Ÿæ•ˆ
ALI_IP=&quot;8.136.13.58&quot;ssh-copy-id -i .ssh/id_rsa.pub voidking@$&#123;ALI_IP&#125;ssh voidking@$&#123;ALI_IP&#125;

travis-ciå¯†é’¥é…ç½®1ã€åŠ å¯†ç§é’¥cat .ssh/id_rsa | base64 | tr -d &#39;\n&#39;
2ã€è®¿é—®Travis CI Proï¼Œæ‰¾åˆ° travis-test é¡¹ç›®ï¼ŒSettingsï¼ŒEnvironment Variablesã€‚åˆ›å»ºä¸¤ç»„ç¯å¢ƒå˜é‡ï¼š

Nameä¸ºGITEE_TOKENï¼ŒVALUEä¸ºgiteeçš„access tokenã€‚
Nameä¸ºID_RSAï¼ŒVALUEä¸ºåŠ å¯†åçš„ç§é’¥ã€‚

travis.ymlé…ç½®1ã€åœ¨githubä¸Š travis-test é¡¹ç›®ä¸­åˆ›å»º .travis.ymlï¼Œå†…å®¹ä¸º
sudo: falselanguage: pythonpython:- 3.6branches:  only:  - main # build main branch onlyenv:  global:  - ALI_IP: 8.136.13.58  - GIT_USER: voidking  - GITEE_PAGES_REPO: gitee.com/voidking/voidking.gitaddons:  ssh_known_hosts:   - 8.136.13.58before_install:- echo $&#123;ID_RSA&#125; | base64 -d &gt; ~/.ssh/id_rsa- chmod 600 ~/.ssh/id_rsascript:- ssh voidking@$&#123;ALI_IP&#125; &quot;cd /opt/nginx/work/voidking/ &amp;&amp; git pull --force --quiet \&quot;https://$&#123;GIT_USER&#125;:$&#123;GITEE_TOKEN&#125;@$&#123;GITEE_PAGES_REPO&#125;\&quot; master:master&quot;after_success:- echo &quot;deploy success&quot;

2ã€æäº¤ä»£ç 
git add .git commmit -m &quot;ç®€åŒ–travis.yml&quot;git push

3ã€éªŒè¯æ‰“å¼€travis voidking/travis-test ï¼ŒæŸ¥çœ‹è„šæœ¬æ‰§è¡Œæ—¥å¿—ã€‚ç™»å½•é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œgit logæŸ¥çœ‹ä»£ç ç‰ˆæœ¬ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>cicd</tag>
        <tag>travis-ci</tag>
      </tags>
  </entry>
  <entry>
    <title>æ€æ ·ç»™æ–‡ä»¶ã€å˜é‡å’Œå‡½æ•°å‘½åï¼Ÿ</title>
    <url>/dev-how-to-name-better/</url>
    <content><![CDATA[å‰è¨€ä½¿ç”¨user_tool.pyè¿˜æ˜¯user_utils.pyï¼Ÿä½¿ç”¨nameè¿˜æ˜¯usernameï¼Ÿä½¿ç”¨user_addè¿˜æ˜¯add_userï¼Ÿä½¿ç”¨get_user_by_nameè¿˜æ˜¯get_users_by_nameï¼Ÿç­‰ç­‰ç­‰ç­‰ï¼Œåœ¨ç¼–ç¨‹æ´»åŠ¨ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šäº§ç”Ÿå„ç§å…³äºå‘½åçš„çº ç»“ã€‚ç»™æ–‡ä»¶ã€å‡½æ•°ã€å˜é‡å‘½åæ˜¯ä¸€ä»¶å¾ˆéš¾çš„äº‹ï¼Œä½†æ˜¯ä¹Ÿæ˜¯æœ‰æ–¹æ³•çš„ã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°±æ¥å­¦ä¹ ä¸€ä¸‹æ–‡ä»¶ã€å˜é‡å’Œå‡½æ•°å‘½åçš„æ–¹æ³•ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

å·¥ç¨‹å®è·µï¼šç»™å‡½æ•°å–ä¸€ä¸ªâ€å¥½â€çš„åå­—
Google å¼€æºé¡¹ç›®é£æ ¼æŒ‡å— (ä¸­æ–‡ç‰ˆ)
å‘½åè§„èŒƒ

å‘½åæ–¹æ³•è¦é¢†ï¼šä¸€çœ‹å°±æ‡‚ï¼Œä¿æŒä¸€è‡´ã€‚
æ–‡ä»¶ç”±äºWindows, OSXä¸‹æ–‡ä»¶åä¸åŒºåˆ†å¤§å°å†™(linuxæ˜¯åŒºåˆ†çš„)ï¼Œæ‰€ä»¥å‘½åå»ºè®®è¿˜æ˜¯ä»¥å…¨éƒ¨å°å†™ä¸ºä¸»ã€‚è¿å­—ç¬¦å¯ä»¥ä½¿ç”¨ä¸­åˆ’çº¿ã€ä¸‹åˆ’çº¿æˆ–è€…çœç•¥ï¼Œå…³é”®æ˜¯è¦ç»Ÿä¸€ã€‚
ç›®å½•å»ºè®®è¿å­—ç¬¦ä½¿ç”¨ä¸­åˆ’çº¿ï¼Œæ¯”å¦‚: my-project-nameã€‚æœ‰å¤æ•°çš„æƒ…å†µä½¿ç”¨å¤æ•°å‘½åæ³•ï¼Œæ¯”å¦‚: scripts, styles, imageså’Œdata-modulesã€‚æ–‡ä»¶å»ºè®®è¿å­—ç¬¦ä½¿ç”¨ä¸‹åˆ’çº¿ï¼Œæ¯”å¦‚ï¼šuser_test.pyã€‚
å˜é‡å˜é‡å‘½åå¸¸ç”¨çš„æœ‰ä¸¤ç§æ–¹å¼:ä¸‹åˆ’çº¿å‘½åæ³•ï¼Œæ¯”å¦‚: my_variableé©¼å³°å¼å‘½åæ³•ï¼Œæ¯”å¦‚: myVariale
pythonè¯­è¨€å»ºè®®ä½¿ç”¨ä¸‹åˆ’çº¿å‘½åæ³•ã€‚
å‡½æ•°å‡½æ•°å‘½åå¸¸ç”¨çš„æœ‰ä¸¤ç§æ–¹å¼:ä¸‹åˆ’çº¿å‘½åæ³•ï¼Œæ¯”å¦‚: get_user_by_nameé©¼å³°å¼å‘½åæ³•ï¼Œæ¯”å¦‚: getUserByName
pythonè¯­è¨€å»ºè®®ä½¿ç”¨ä¸‹åˆ’çº¿å‘½åæ³•ã€‚ä¸åŒäºå˜é‡å‘½åçš„æ˜¯ï¼Œå‡½æ•°åç§°è¦ä½¿ç”¨åŠ¨è¯å¼€å¤´ï¼Œå¹¶ä¸”å°½å¯èƒ½å‡†ç¡®ã€‚
å¸¸ç”¨åŠ¨è¯è¡¨åŠ¨è¯é€‰å–è¦ç²¾å‡†ã€‚é€šå¸¸æ¥è¯´ï¼ŒåŠ¨è¯å†³å®šäº†ä¸€ä¸ªå‡½æ•°è¦é‡‡å–ä»€ä¹ˆâ€åŠ¨ä½œâ€ã€‚åŠ¨è¯å–çš„å¥½ï¼Œä¸€ä¸ªå‡½æ•°åå­—å·²ç»æˆåŠŸäº†80%ã€‚
å¸¸ç”¨åŠ¨è¯è¡¨ï¼š



ç±»åˆ«
å•è¯



æ·»åŠ /æ’å…¥/åˆ›å»º/åˆå§‹åŒ–/åŠ è½½
addã€appendã€insertã€createã€initializeã€load


åˆ é™¤/é”€æ¯
deleteã€removeã€destroyã€drop


æ‰“å¼€/å¼€å§‹/å¯åŠ¨
openã€start


å…³é—­/åœæ­¢
closeã€stop


è·å–/è¯»å–/æŸ¥æ‰¾/æŸ¥è¯¢
getã€fetchã€acquireã€readã€searchã€findã€query


è®¾ç½®/é‡ç½®/æ”¾å…¥/å†™å…¥/é‡Šæ”¾/åˆ·æ–°
setã€resetã€putã€writeã€releaseã€refresh


å‘é€/æ¨é€
sendã€push


æ¥æ”¶/æ‹‰å–
receiveã€pull


æäº¤/æ’¤é”€/å–æ¶ˆ
submitã€cancel


æ”¶é›†/é‡‡é›†/é€‰å–/é€‰æ‹©
collectã€pickã€select


æå–/è§£æ
subã€extractã€parse


ç¼–ç /è§£ç 
encodeã€decode


å¡«å……/æ‰“åŒ…/å‹ç¼©
fillã€packã€compress


æ¸…ç©º/æ‹†åŒ…/è§£å‹
flushã€clearã€unpackã€decompress


å¢åŠ /å‡å°‘
increaseã€decreaseã€reduce


åˆ†éš”/æ‹¼æ¥
splitã€joinã€concat


è¿‡æ»¤/æ ¡éªŒ/æ£€æµ‹
filterã€validã€check


å¸¸ç”¨é¢†åŸŸè¯åè¯ä½¿ç”¨é¢†åŸŸè¯æ±‡ã€‚ä¸¾ä¸ªä¾‹å­ï¼šé›†åˆçš„å®¹é‡é€šå¸¸ç”¨capacityã€é›†åˆå®é™…å…ƒç´ ä¸ªæ•°ç”¨sizeã€å­—ç¬¦ä¸²é•¿åº¦ç”¨lengthï¼Œè¿™ç§å°±éµå¾ªå¤§å®¶çš„ä½¿ç”¨ä¹ æƒ¯ï¼Œä¸è¦ç”¨sizeå»å½¢å¦‚å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚
å†æ¯”å¦‚ï¼Œå‡å¦‚ä½¿ç”¨åˆ°å»ºé€ è€…æ¨¡å¼ï¼Œé‚£ä¹ˆé€šå¸¸ä¼šç”¨buildä½œä¸ºå‡½æ•°åå­—ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¸è¦å¦è¾Ÿè¹Šå¾„ï¼Œç”¨createæ¥ä½œä¸ºå‡½æ•°åå­—ï¼Œä½¿ç”¨å¤§å®¶çº¦å®šä¿—æˆçš„å‘½åä¹ æƒ¯æ›´å®¹æ˜“è®©ä½ çš„ä»£ç è¢«åˆ«äººè¯»æ‡‚ã€‚
å¸¸ç”¨åè¯è¡¨ï¼š



ç±»åˆ«
å•è¯



å®¹é‡/å¤§å°/é•¿åº¦
capacityã€sizeã€length


å®ä¾‹/ä¸Šä¸‹æ–‡
instanceã€context


é…ç½®
configã€settings


å¤´éƒ¨/å‰é¢/å‰ä¸€ä¸ª/ç¬¬ä¸€ä¸ª
headerã€frontã€previousã€first


å°¾éƒ¨/åé¢/åä¸€ä¸ª/æœ€åä¸€ä¸ª
tailã€backã€nextã€last


åŒºé—´/åŒºåŸŸ/æŸä¸€éƒ¨åˆ†/èŒƒå›´/è§„æ¨¡
rangeã€intervalã€regionã€areaã€sectionã€scopeã€scale


ç¼“å­˜/ç¼“å†²/ä¼šè¯
cacheã€bufferã€session


æœ¬åœ°/å±€éƒ¨/å…¨å±€
localã€global


æˆå‘˜/å…ƒç´ 
memberã€element


èœå•/åˆ—è¡¨
menuã€list


æº/ç›®æ ‡
sourceã€destinationã€target


å¸¸ç”¨ç¼©å†™è¡¨1ã€æœ¬ç¼©å†™è¡¨æ˜¯ã€Šç¼–ç å‘½åè§„èŒƒã€‹çš„é™„å½•ã€‚
2ã€æœ¬ç¼©å†™è¡¨ä¸­åˆ—å‡ºçš„éƒ½æ˜¯é€šç”¨æ€§ç¼©å†™ï¼Œä¸æä¾›æ ‡å‡†ç¼©å†™ï¼Œå¦‚ï¼šWin9xã€COM ç­‰ã€‚
3ã€ä½¿ç”¨æœ¬ç¼©å†™è¡¨é‡Œçš„ç¼©å†™æ—¶ï¼Œè¯·å¯¹å…¶è¿›è¡Œå¿…è¦çš„æ³¨é‡Šè¯´æ˜ã€‚
4ã€é™¤å°‘æ•°æƒ…å†µä»¥å¤–ï¼Œå¤§éƒ¨åˆ†ç¼©å†™ä¸å¤§å°å†™æ— å…³ã€‚





ç¼©å†™
å…¨ç§°



addr
Address


adm
Administrator


app
Application


arg
Argument


asm
assemble


asyn
asynchronization


avg
average


DB
Database


bk
back


bmp
Bitmap


btn
Button


buf
Buffer


calc
Calculate


char
Character


chg
Change


clk
Click


clr
color


cmd
Command


cmp
Compare


col
Column


coord
coordinates


cpy
copy


ctl/ctrl
Control


cur
Current


cyl
Cylinder


dbg
Debug


dbl
Double


dec
Decrease


def
default


del
Delete


dest/dst
Destination


dev
Device


dict
dictionary


diff
different


dir
directory


disp
Display


div
Divide


dlg
Dialog


doc
Document


drv
Driver


dyna
Dynamic


env
Environment


err
error


ex/ext
Extend


exec
execute


flg
flag


frm
Frame


func/fn
Function


grp
group


horz
Horizontal


idx/ndx
Index


img
Image


impl
Implement


inc
Increase


info
Information


init
Initial/Initialize/Initialization


ins
Insert


inst
Instance


INT/intr
Interrupt


len
Length


lib
Library


lnk
Link


log
logical


lst
List


max
maximum


mem
Memory


mgr/man
Manage/Manager


mid
middle


min
minimum


msg
Message


mul
Multiply


num
Number


obj
Object


ofs
Offset


org
Origin


param
Parameter


pic
picture


pkg
package


pnt/pt
Point


pos
Position


pre/prev
previous


prg
program


prn
Print


proc
Process


prop
Properties


psw
Password


ptr
Pointer


pub
Public


rc
rect


ref
Reference


reg
Register


req
request


res
Resource


ret
return


rgn
region


scr
screen


sec
Second


seg
Segment


sel
Select


src
Source


std
Standard


stg
Storage


stm
Stream


str
String


sub
Subtract


sum
summation


svr
Server


sync
Synchronization


sys
System


tbl
Table


temp/tmp
Temporary


tran/trans
translate/transation/transparent


tst
Test


txt
text


unk
Unknown


upd
Update


upg
Upgrade


util
Utility


var
Variable


ver
Version


vert
Vertical


vir
Virus


wnd
Window


]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>è½¬è½½</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoæœ¬åœ°æœç´¢åŠ é€Ÿ</title>
    <url>/dev-hexo-local-search-accelerate/</url>
    <content><![CDATA[å‰è¨€éšç€æ–‡ç« æ•°é‡çš„å¢é•¿ï¼Œsearch.xmlæ–‡ä»¶è¶Šæ¥è¶Šå¤§ã€‚å› æ­¤åœ¨åŠ è½½è¿™ä¸ªæ–‡ä»¶æ—¶ï¼Œéœ€è¦çš„æ—¶é—´å¾ˆé•¿ï¼Œè€Œä¸”å¶å°”ä¼šå‡ºç°åŠ è½½ä¸å‡ºæ¥çš„æƒ…å†µã€‚
æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•èƒ½å¤ŸåŠ å¿«åŠ è½½é€Ÿåº¦å‘¢ï¼Ÿå¿…é¡»æ˜¯æœ‰çš„ï¼Œæœ¬æ–‡å°±æ¥ç ”ç©¶ä¸€ä¸‹ã€‚
ã€ŠHexoä½¿ç”¨Gulpå‹ç¼©é™æ€èµ„æºã€‹ä¸€æ–‡ä¸­ï¼Œæåˆ°search.xmlå¤§å°ä¸º3.5Mã€‚ä»Šå¤©åˆçœ‹äº†ä¸€ä¸‹ï¼Œæ–‡ä»¶å¤§å°å˜æˆäº†4.3Mï¼ˆåŠ è½½æ—¶ä¼šå‹ç¼©ä¼ è¾“ï¼Œå¤§å°çº¦ä¸º1.3Mï¼‰ã€‚ä»æ–‡ä¸­çš„å®éªŒå¯ä»¥å¾—å‡ºç»“è®ºï¼Œåœ¨æ–‡ä»¶å¤§å°æ–¹é¢ï¼Œæ²¡æœ‰ä»€ä¹ˆä¼˜åŒ–çš„ç©ºé—´äº†ã€‚
å†æƒ³ä¼˜åŒ–ï¼Œå°±å¾—ä»ç½‘ç»œæ–¹é¢å…¥æ‰‹ï¼šCDNåŠ é€Ÿã€‚ä¸»è¦å‚è€ƒjsDelivr+Github ä½¿ç”¨æ–¹æ³•ã€‚
æ›´å¤šHexoç›¸å…³å†…å®¹ï¼Œå‚è€ƒHexoç³»åˆ—æ–‡ç« ã€‚


æ€è·¯ä¿®æ”¹ search.xml çš„æ–‡ä»¶é“¾æ¥ï¼Œæ”¹æˆcdnçš„åœ°å€ã€‚
å®ç°1ã€æµ‹è¯•jsdelivré“¾æ¥ï¼Œsearch.xmlçš„cdnåœ°å€ä¸ºhttps://cdn.jsdelivr.net/gh/voidking/voidking.github.io/search.xml
2ã€ç¼–è¾‘ next/source/js/local-search.js ï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
// const path = CONFIG.root + searchPath;const jsdelivr = &#x27;https://cdn.jsdelivr.net/gh/&#x27;const userRepo = &#x27;voidking/voidking.github.io/&#x27;const path = jsdelivr + userRepo + searchPath;

3ã€æœ¬åœ°æµ‹è¯•ï¼Œæäº¤ä»£ç ï¼Œä½¿ç”¨ä¿®æ”¹åçš„ä¸»é¢˜è¿›è¡Œéƒ¨ç½²
å®æµ‹åŠ è½½é€Ÿåº¦é£å¿«ï¼Œ4.3Mçš„search.xmlèƒ½å¤Ÿç¨³å®šåœ¨2ç§’å†…åŠ è½½å®Œæ¯•ï¼Œå®Œç¾ã€‚
æé«˜é€šç”¨æ€§1ã€cdnçš„é…ç½®æ”¾åœ¨ _config.yml æ–‡ä»¶ä¸­
# Local Search# Dependencies: https://github.com/theme-next/hexo-generator-searchdblocal_search:  enable: true  # If auto, trigger search by changing input.  # If manual, trigger search by pressing enter key or search button.  trigger: auto  # Show top n results per article, show all results by setting to -1  top_n_per_article: 1  # Unescape html strings to the readable one.  unescape: false  # Preload the search data when the page loads.  preload: false  # Use CDN to accelerate the speed of loading search.xml  cdn:    enable: false    # url: //cdn.jsdelivr.net/gh/&lt;username&gt;/&lt;username&gt;.github.io/search.xml    url: 

2ã€ç¼–è¾‘ next/source/js/local-search.js ï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
let path = CONFIG.root + searchPath;// Use CDN to accelerate the speed of loading search.xmlif (&#x27;cdn&#x27; in CONFIG.localsearch &amp;&amp; CONFIG.localsearch.cdn.enable === true &amp;&amp; CONFIG.localsearch.cdn.url !== null)&#123;  path = CONFIG.localsearch.cdn.url;&#125;


]]></content>
      <categories>
        <category>engineering</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>wikiä½¿ç”¨æŠ€å·§</title>
    <url>/dev-wiki-skill/</url>
    <content><![CDATA[å‰è¨€wikiæ˜¯åœ¨å…¬å¸é‡Œæœ€å¸¸ç”¨çš„å·¥å…·ä¹‹ä¸€ï¼Œæœ¬æ–‡æ€»ç»“è®°å½•ä¸€äº›wikiä½¿ç”¨æŠ€å·§ï¼Œå¸Œæœ›å¯¹å¤§å®¶ä¹Ÿæœ‰ä¸€äº›å¸®åŠ©ã€‚


æ ‡é¢˜è‡ªåŠ¨ç¼–å·èƒŒæ™¯ç»™æ–‡æ¡£æ ‡é¢˜æ‰‹åŠ¨æ·»åŠ ç¼–å·å¾ˆéº»çƒ¦ï¼Œè€Œä¸”å®¹æ˜“å†™é”™ã€‚å¦‚æœæ’å…¥æˆ–åˆ é™¤ç« èŠ‚ï¼Œåé¢çš„ç¼–å·éƒ½è¦é‡æ–°ä¿®æ”¹ä¸€éï¼Œæ— æ³•æ¥å—ã€‚
ç›®çš„å®ç°wikiæ ‡é¢˜è‡ªåŠ¨ç¼–å·ã€‚
åŸç†é€šè¿‡wikiçš„markdownæ’ä»¶ï¼Œå¯ä»¥æ’å…¥ä¸€äº›è‡ªå®šä¹‰çš„css/jsï¼Œæ¥è‡ªå®šä¹‰é¡µé¢å†…å®¹ã€‚å‚è€ƒæ–‡æ¡£ï¼šMarkDownæ ‡é¢˜è‡ªåŠ¨æ·»åŠ ç¼–å·ã€‚
æ–¹æ³•1ã€æ’å…¥ï¼Œå…¶ä»–å®ï¼Œmarkdownã€‚
2ã€markdownä¸­å¡«å…¥å¦‚ä¸‹cssä»£ç 
&lt;style type=&quot;text/css&quot;&gt;    #main-content &#123; counter-reset: h1counter; &#125;    #main-content h1 &#123; counter-reset: h2counter; &#125;    #main-content h2 &#123; counter-reset: h3counter; &#125;    #main-content h3 &#123; counter-reset: h4counter; &#125;    #main-content h4 &#123; counter-reset: h5counter; &#125;    #main-content h5 &#123; counter-reset: h6counter; &#125;    #main-content h6 &#123; &#125;    #main-content h1:before &#123;      counter-increment: h1counter;      content: counter(h1counter) &quot;.\0000a0\0000a0&quot;;    &#125;    #main-content h2:before &#123;      counter-increment: h2counter;      content: counter(h1counter) &quot;.&quot;                counter(h2counter) &quot;.\0000a0\0000a0&quot;;    &#125;    #main-content h3:before &#123;      counter-increment: h3counter;      content: counter(h1counter) &quot;.&quot;                counter(h2counter) &quot;.&quot;                counter(h3counter) &quot;.\0000a0\0000a0&quot;;    &#125;    #main-content h4:before &#123;      counter-increment: h4counter;      content: counter(h1counter) &quot;.&quot;                counter(h2counter) &quot;.&quot;                counter(h3counter) &quot;.&quot;                counter(h4counter) &quot;.\0000a0\0000a0&quot;;    &#125;    #main-content h5:before &#123;      counter-increment: h5counter;      content: counter(h1counter) &quot;.&quot;                counter(h2counter) &quot;.&quot;                counter(h3counter) &quot;.&quot;                counter(h4counter) &quot;.&quot;                counter(h5counter) &quot;.\0000a0\0000a0&quot;;    &#125;    #main-content h6:before &#123;      counter-increment: h6counter;      content: counter(h1counter) &quot;.&quot;                counter(h2counter) &quot;.&quot;                counter(h3counter) &quot;.&quot;                counter(h4counter) &quot;.&quot;                counter(h5counter) &quot;.&quot;                counter(h6counter) &quot;.\0000a0\0000a0&quot;;    &#125;&lt;/style&gt;

ä¿å­˜åï¼Œå³å¯çœ‹åˆ°æ ‡é¢˜ç¼–å·åçš„æ•ˆæœã€‚
3ã€ç›®å½•åœ¨æ’å…¥ç›®å½•å®æ—¶ï¼Œé€šè¿‡cssåŠ çš„ç¼–å·æ•ˆæœåœ¨ç›®å½•ä¸­ä¸ä¼šæ˜¾ç¤ºï¼Œå‹¾é€‰ â€œæ˜¾ç¤ºèŠ‚æ•°â€ å³å¯è‡ªåŠ¨ç¼–å·ã€‚
æµ®åŠ¨ç›®å½•èƒŒæ™¯wiki çš„æ ‡é¢˜æ— æµ®åŠ¨åŠŸèƒ½ï¼Œå¯¹äºå¤§æ–‡æ¡£é˜…è¯»ä½“éªŒä¸ä½³ã€‚
ç›®çš„é€šè¿‡è‡ªå®šä¹‰css/jsï¼Œè¾¾åˆ°æµ®åŠ¨ç›®å½•çš„æ•ˆæœï¼Œæé«˜é•¿æ–‡æ¡£çš„é˜…è¯»ä½“éªŒã€‚
åŸç†é€šè¿‡wikiçš„markdownæ’ä»¶ï¼Œå¯ä»¥æ’å…¥ä¸€äº›è‡ªå®šä¹‰çš„css/jsï¼Œæ¥è‡ªå®šä¹‰é¡µé¢å†…å®¹ã€‚  
æ–¹æ³•1ã€é¡µé¢å¸ƒå±€ï¼Œä¿®æ”¹ä¸ºä¸¤åˆ—ä¸€åˆ—æ”¾å†…å®¹ï¼Œå¦å¤–ä¸€åˆ—æ”¾ç›®å½•ã€‚
2ã€æ’å…¥ç›®å½•å®ï¼ŒCSSç±»åå¡«å…¥ floating_catalog
3ã€æ’å…¥ï¼Œå…¶ä»–å®ï¼Œmarkdownï¼Œå¡«å…¥å¦‚ä¸‹å†…å®¹ï¼š
&lt;style type=&quot;text/css&quot;&gt;.floating_catalog &#123;  position: fixed;  background-color: #FFF;  background: #FFF;  margin-top: -80px;  font-size: 12px;  z-index:100;&#125;.current_catalog &#123;  font-size: 14px;  font-weight: bolder;  background-color: yellow;&#125;&lt;/style&gt;&lt;script type=&quot;text/javascript&quot;&gt;function updateCatalog()&#123;    var catalog = $(&#x27;.floating_catalog a&#x27;);    var isFirst = true;    for (var i = catalog.length - 1; i &gt;= 0; --i) &#123;        var header = $(decodeURIComponent(catalog[i].hash).replace(/([ ;?%&amp;,.+*~\&#x27;:&quot;!^$[\]()=&gt;|\/@])/g,&#x27;\\$1&#x27;));        if (isFirst &amp;&amp; (i == 0 || (!(header === null) &amp;&amp; header[0].getBoundingClientRect().top &lt; 20))) &#123;            catalog[i].parentElement.classList.add(&#x27;current_catalog&#x27;);            isFirst = false;        &#125;        else &#123;            catalog[i].parentElement.classList.remove(&#x27;current_catalog&#x27;);        &#125;    &#125;&#125;$(document).ready(updateCatalog);$(document).scroll(updateCatalog);&lt;/script&gt;

ä¿å­˜åï¼Œå³å¯çœ‹åˆ°æµ®åŠ¨æ ‡é¢˜çš„æ•ˆæœã€‚
å¼•ç”¨é¡µé¢èƒŒæ™¯å·¥ä½œå†…å®¹é€šå¸¸ä¼šæ”¾åœ¨å…¬å…±wikiï¼Œä¸ªäººå·¥ä½œå†…å®¹æ— æ³•å¾ˆå¥½æ±‡æ€»ã€‚wikiçš„æ”¶è—åŠŸèƒ½ä¸èƒ½åˆ†å±‚çº§ï¼Œä¸æ˜¯å¾ˆå¥½ç”¨ã€‚
ç›®çš„åˆ›å»ºå¼•ç”¨é¡µé¢ï¼Œå³ï¼šåˆ›å»ºä¸€ä¸ªé¡µé¢ï¼Œæœ¬èº«æ²¡æœ‰å†…å®¹ï¼Œä½†æ˜¯ä¼šå°†å…¶ä»–é¡µé¢å†…å®¹å¼•ç”¨è¿‡æ¥ï¼Œè¿›è¡Œå±•ç¤ºã€‚å¯ä»¥æ–¹ä¾¿ä¸ªäººä¿¡æ¯æ±‡æ€»ï¼Œåˆ›å»ºå¤šå±‚çº§é¡µé¢æ”¶è—ç­‰ã€‚
åŸç†é€šè¿‡wikiçš„markdownæ’ä»¶ï¼Œå¯ä»¥æ’å…¥ä¸€äº›è‡ªå®šä¹‰çš„css/jsï¼Œæ¥è‡ªå®šä¹‰é¡µé¢å†…å®¹ã€‚  
æ–¹æ³•1ã€æ–°å»ºwikiï¼Œæ ‡é¢˜éšæ„
2ã€æ’å…¥ï¼Œå…¶ä»–å®ï¼Œmarkdownï¼Œå¡«å…¥å¦‚ä¸‹å†…å®¹ï¼š
&lt;script type=&quot;text/javascript&quot;&gt;function setupPage(sourcePage) &#123;    $(&#x27;.page-metadata-modification-info&#x27;).append(&#x27; | å½“å‰é¡µé¢æ˜¯å…¶ä»–é¡µé¢çš„å¼•ç”¨ï¼Œæ— æ³•å¯¼å‡ºpdf/workï¼Œå¦‚éœ€å¯¼å‡ºè¯·ç‚¹å‡»&lt;a class=&quot;like-button&quot; href=&quot;&#x27; + sourcePage + &#x27;&quot;&gt;ã€é˜…è¯»åŸæ–‡ã€‘&lt;/a&gt;&#x27;);    $(&#x27;#main-content&#x27;).append($(&#x27;&lt;iframe id=&quot;frame_load_other_page&quot; style=&quot;display:none&quot; width=&quot;100%&quot; height=&quot;100%&quot; src=&quot;&#x27; + sourcePage + &#x27;&quot;&gt;&lt;/iframe&gt;&#x27;));    var frame_load_other_page = $(&#x27;#frame_load_other_page&#x27;);    frame_load_other_page.on(&quot;load&quot;, function() &#123;        setTimeout(function()&#123;            main_content = $(&#x27;#main-content&#x27;, frame_load_other_page.contents()).html();            $(&#x27;#main-content&#x27;).append(main_content);            frame_load_other_page.remove();            // ä¿®å¤æŠ˜å é¡µé¢æ— æ³•è®¿é—®çš„é—®é¢˜            $(&#x27;div[id^=expander-control-]&#x27;).click(function(event)&#123;                let item = $(&quot;#&quot; + event.currentTarget.id.replace(&#x27;control&#x27;, &#x27;content&#x27;));                item.css(&#x27;display&#x27;, item.css(&#x27;display&#x27;) == &#x27;none&#x27; ? &#x27;inline&#x27; : &#x27;none&#x27;);            &#125;);            // éšè—ç»˜å›¾éƒ¨åˆ†çš„æŒ‰é’®ï¼ˆåŠ è½½ä¸å‡ºæ¥ï¼Œå½±å“ç¾è§‚ï¼Œæ‰€ä»¥å°±æš‚æ—¶æ˜¾ç¤ºäº†ï¼‰            $(&#x27;.gliffy-chrome-container&#x27;).css(&quot;display&quot;, &quot;none&quot;);        &#125;, 100);    &#125;);&#125;$(document).ready(function()&#123;    setupPage(&quot;http://wiki.baidu.com/pages/viewpage.action?pageId=&#123;PAGE_ID&#125;&quot;);&#125;);&lt;/script&gt;

å…¶ä¸­ï¼Œ{PAGE_ID} éœ€è¦æ›¿æ¢æˆå¼•ç”¨çš„wikié¡µé¢çš„urlã€‚
ä¿å­˜åï¼Œå³å¯çœ‹åˆ°å¼•ç”¨æ•ˆæœã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>wiki</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownç¼–è¾‘å™¨</title>
    <url>/dev-markdown-editor/</url>
    <content><![CDATA[å‰è¨€å‡è®¾ç°åœ¨è¦å†™ä¸€ç¯‡markdownæ ¼å¼æ–‡ç« ï¼Œä½¿ç”¨ä»€ä¹ˆç¼–è¾‘å™¨æ¯”è¾ƒå¥½ï¼Ÿç­”ï¼šsublimeæˆ–è€…typoraã€‚
å‡è®¾ç°åœ¨è¦æŠŠä¸€ç¯‡markdownæ ¼å¼æ–‡ç« å¯¼å‡ºæˆpdfæ–‡æ¡£ï¼Œä½¿ç”¨ä»€ä¹ˆç¼–è¾‘å™¨æ¯”è¾ƒå¥½ï¼Ÿç­”ï¼štyporaã€‚
å‡è®¾ç°åœ¨è¦æŠŠä¸€ç¯‡markdownæ ¼å¼æ–‡ç« å‘å¸ƒæˆå¾®ä¿¡å…¬ä¼—å·æ–‡ç« ï¼Œä½¿ç”¨ä»€ä¹ˆç¼–è¾‘å™¨æ¯”è¾ƒå¥½ï¼Ÿç­”ï¼šwechat-formatã€‚
æœ¬æ–‡ä¸»è¦ä»‹ç»ä¸‰æ¬¾ markdown ç¼–è¾‘å™¨ï¼Œåˆ†åˆ«æ˜¯ sublimeã€typoraå’Œwechat-formatã€‚æ­¤å¤–ï¼Œè¿˜ä¼šä»‹ç»å‡ ä¸ªåœ¨çº¿markdownç¼–è¾‘å™¨ï¼Œæµ‹è¯•å’Œé¢„è§ˆéƒ½å¾ˆæ–¹ä¾¿ã€‚


sublime.md ç»“å°¾çš„æ–‡ä»¶ï¼Œåœ¨ä½¿ç”¨ sublime è¿›è¡Œç¼–è¾‘æ—¶ä¼šè‡ªåŠ¨è¯­æ³•é«˜äº®ã€‚ä¹‹æ‰€ä»¥æ¨èsublimeï¼Œæ˜¯å› ä¸ºè¿™ä¸ªç¼–è¾‘å™¨æ˜¯ä¸ªä¸‡èƒ½çš„ç¼–è¾‘å™¨ï¼Œè€Œä¸”éå¸¸è½»é‡ã€‚ä½¿ç”¨äº†å…­å¹´äº†ï¼Œä¾ç„¶æƒ…æœ‰ç‹¬é’Ÿã€‚
typoraç®€ä»‹typoraæ˜¯è¿‘ä¸¤å¹´å´›èµ·çš„markdownç¼–è¾‘å™¨ç¥å™¨ã€‚ä¼ ç»Ÿçš„markdownç¼–è¾‘å™¨ï¼Œå·¦è¾¹æ˜¯ç¼–è¾‘å™¨ï¼Œå³è¾¹æ˜¯é¢„è§ˆã€‚typoraå¦è¾Ÿè¹Šå¾„ï¼Œæ²¡æœ‰å·¦å³åˆ†å¼€ï¼Œè€Œæ˜¯æŠŠç¼–è¾‘å’Œé¢„è§ˆç»“åˆåœ¨ä¸€èµ·ï¼Œéšæ—¶åˆ‡æ¢ï¼ˆcommand+/ï¼‰ï¼Œæ›´å¯ä»¥åœ¨é¢„è§ˆæ—¶è¿›è¡Œç¼–è¾‘ã€‚
è‡ªå®šä¹‰ä¸»é¢˜typoraæä¾›å„ç§ä¸»é¢˜ï¼Œæ›´æ˜¯æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰ä¸»é¢˜ï¼Œç®€å•å¥½ç”¨ã€‚ä¸‹é¢æˆ‘ä»¬æŒ‰ç…§è‡ªå·±çš„éœ€æ±‚æ¥å®šåˆ¶ä¸»é¢˜ï¼Œç†Ÿæ‚‰ä¸€ä¸‹è‡ªå®šä¹‰ä¸»é¢˜çš„æµç¨‹ã€‚
å·²çŸ¥éœ€æ±‚ä¸ºï¼š

githubä¸»é¢˜è‡ªå·±å¾ˆå–œæ¬¢ï¼Œä½†æ˜¯æ ‡é¢˜å­—å·å¤ªå¤§ï¼Œæƒ³è¦æ”¹å°ä¸€ç‚¹ã€‚
æ ‡é¢˜åœ¨æ˜¾ç¤ºçš„æ—¶å€™è‡ªåŠ¨ç¼–å·ã€‚

1ã€Typoraï¼Œåå¥½è®¾ç½®ï¼Œå¤–è§‚ï¼Œæ‰“å¼€ä¸»é¢˜æ–‡ä»¶å¤¹
2ã€å¤‡ä»½github.cssä¸ºgithub.css.bak
3ã€ç¼–è¾‘github.cssï¼Œä¿®æ”¹å­—å·
h1 &#123;    font-size: 1.5em;    line-height: 1.2;    border-bottom: 1px solid #eee;&#125;h2 &#123;    font-size: 1.25em;    line-height: 1.225;    border-bottom: 1px solid #eee;&#125;h3 &#123;    font-size: 1.15em;    line-height: 1.43;&#125;h4 &#123;    font-size: 1.05em;&#125;h5 &#123;    font-size: 1em;&#125;h6 &#123;   font-size: 1em;    color: #777;&#125;

4ã€ç¼–è¾‘github.cssï¼Œç»™æ ‡é¢˜å‰æ·»åŠ è‡ªåŠ¨ç¼–å·
/* æ ‡é¢˜è‡ªåŠ¨ç¼–å· */body &#123; counter-reset: h1counter; &#125;h1 &#123; counter-reset: h2counter; &#125;h2 &#123; counter-reset: h3counter; &#125;h3 &#123; counter-reset: h4counter; &#125;h4 &#123; counter-reset: h5counter; &#125;h5 &#123; counter-reset: h6counter; &#125;h6 &#123; &#125;h1:before &#123;  counter-increment: h1counter;  content: counter(h1counter) &quot;.\0000a0\0000a0&quot;;&#125;h2:before &#123;  counter-increment: h2counter;  content: counter(h1counter) &quot;.&quot;            counter(h2counter) &quot;.\0000a0\0000a0&quot;;&#125;h3:before &#123;  counter-increment: h3counter;  content: counter(h1counter) &quot;.&quot;            counter(h2counter) &quot;.&quot;            counter(h3counter) &quot;.\0000a0\0000a0&quot;;&#125;h4:before &#123;  counter-increment: h4counter;  content: counter(h1counter) &quot;.&quot;            counter(h2counter) &quot;.&quot;            counter(h3counter) &quot;.&quot;            counter(h4counter) &quot;.\0000a0\0000a0&quot;;&#125;h5:before &#123;  counter-increment: h5counter;  content: counter(h1counter) &quot;.&quot;            counter(h2counter) &quot;.&quot;            counter(h3counter) &quot;.&quot;            counter(h4counter) &quot;.&quot;            counter(h5counter) &quot;.\0000a0\0000a0&quot;;&#125;h6:before &#123;  counter-increment: h6counter;  content: counter(h1counter) &quot;.&quot;            counter(h2counter) &quot;.&quot;            counter(h3counter) &quot;.&quot;            counter(h4counter) &quot;.&quot;            counter(h5counter) &quot;.&quot;            counter(h6counter) &quot;.\0000a0\0000a0&quot;;&#125;

5ã€é‡å¯typoraå¯è§æ ‡é¢˜å­—å·å˜å°äº†ï¼ŒåŒæ—¶æ·»åŠ äº†ç¼–å·ã€‚ä½†æ˜¯ï¼Œå¦‚æœç›´æ¥å¤åˆ¶ç²˜è´´å†…å®¹åˆ°å¾®ä¿¡å…¬ä¼—å·ï¼Œè¿™äº›æ ‡é¢˜ç¼–å·ä¸ä¼šè¢«å¤åˆ¶ã€‚è€Œä¸”ï¼Œæ¢è¡Œæ•ˆæœä¹Ÿæ²¡æœ‰äº†ã€‚å› æ­¤ï¼Œä»typoraç›´æ¥å¤åˆ¶ç²˜è´´åˆ°å¾®ä¿¡å…¬ä¼—å·ï¼Œä¸æ˜¯ä¸€ä¸ªå¥½çš„æ–¹æ¡ˆã€‚
å¯¼å‡ºpdfæ–‡ä»¶ï¼Œå¯¼å‡ºï¼ŒPDFã€‚å¦‚ä¸Šï¼Œtyporaå¯¼å‡ºçš„pdfæ–‡æ¡£ï¼Œç®€ç›´å®Œç¾ã€‚
wechat-formatç®€ä»‹wechat-formatæœ€å¤§çš„ä¼˜ç‚¹æ˜¯ï¼šé€‚åº”å¾®ä¿¡å…¬ä¼—å·ã€‚æ¯”å¦‚ï¼Œå¾®ä¿¡ä¸æ”¯æŒå¤–é“¾ï¼Œwechat-formatç”Ÿæˆçš„é¢„è§ˆä¼šåŒ…å« referenceã€‚ä½†æ˜¯ï¼Œæ ‡é¢˜å±…ä¸­æ•ˆæœä¸æ˜¯æˆ‘æƒ³è¦çš„ï¼Œæ ‡é¢˜ä¹Ÿæ²¡æœ‰è‡ªåŠ¨ç¼–å·ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦è‡ªå®šä¹‰ä¸€ä¸‹ã€‚
è‡ªå®šä¹‰ä¸»é¢˜ä¸‹è½½wechat-formatæºç ï¼Œä¸»è¦ä¿®æ”¹ï¼š

src/assets/scripts/themes/default.js
src/assets/scripts/renderers/wx-renderer.js
src/assets/css/app.css

ä¿®æ”¹åçš„ä»£ç å‚è€ƒ wechat-formatï¼Œæœ€ç»ˆæ•ˆæœå¦‚ä¸‹
å¤±è´¥çš„å°è¯•ä½†æ˜¯ï¼Œä¿®æ”¹å®Œæˆä¹‹åï¼Œå¤åˆ¶ç²˜è´´åˆ°å¾®ä¿¡å…¬ä¼—å·ï¼Œè¿™äº›æ ‡é¢˜ç¼–å·ä¾ç„¶ä¸ä¼šè¢«å¤åˆ¶ã€‚é‚£ä¹ˆï¼Œæ€æ ·æ‰èƒ½å¤åˆ¶åˆ°è¿™äº›ç¼–å·ï¼Ÿç­”ï¼šä½¿è¿™äº›ç¼–å·å˜æˆå…ƒç´ ï¼Œè€Œä¸æ˜¯æ ·å¼ã€‚æ‰€ä»¥ï¼Œéœ€è¦ä½¿ç”¨jsç»™é¡µé¢æ·»åŠ ç¼–å·å…ƒç´ ã€‚ä»£ç å¦‚ä¸‹ï¼š
// https://www.cnblogs.com/qiudeqing/p/3229583.htmlfunction number()&#123;    var headings;    if (document.querySelectorAll)        headings = document.querySelectorAll(&quot;h1,h2,h3,h4,h5,h6&quot;);    else        headings = findHeadings(document.body, []);    function findHeadings(root, sects) &#123;        for(var c = root.firstChild; c != null; c = c.nextSibling) &#123;            if (c.nodeType !== 1) continue;            if (c.tagName.length == 2 &amp;&amp; c.tagName.charAt(0) == &quot;H&quot;)                sects.push(c);            else                findHeadings(c, sects);        &#125;        return sects;    &#125;    var sectionNumbers = [0,0,0,0,0,0];    for(var h = 0; h &lt; headings.length; h++) &#123;        var heading = headings[h];        var level = parseInt(heading.tagName.charAt(1));        if (isNaN(level) || level &lt; 1 || level &gt; 6) continue;        sectionNumbers[level-1]++;        for(var i = level; i &lt; 6; i++) sectionNumbers[i] = 0;        var sectionNumber = sectionNumbers.slice(0,level).join(&quot;.&quot;) + &quot;. &quot;;        var span = document.createElement(&quot;span&quot;);        span.className = &quot;TOCSectNum&quot;;        span.innerHTML = sectionNumber;        heading.insertBefore(span, heading.firstChild);    &#125;&#125;

ä½†æ˜¯ï¼Œæƒ³è¦æŠŠè¿™ä¸ªä»£ç åº”ç”¨åˆ°wechat-formatï¼Œæ˜¯æœ‰éš¾åº¦çš„ï¼Œå‡æœŸæäº†ä¸€å¤©ï¼Œæœ€ç»ˆæ•ˆæœä¸ç†æƒ³ï¼Œæš‚æ—¶æ”¾å¼ƒã€‚æ€è·¯ï¼šä¿®æ”¹ src/assets/scripts/editor.js ï¼ŒæŠŠnumberå‡½æ•°æ”¹å†™åˆ°è¿™ä¸ªæ–‡ä»¶é‡Œã€‚ä¸­é—´ä¼šç”¨åˆ°domè½¬strå’Œstrè½¬domï¼Œä»£ç é™„ä¸Šã€‚
// https://developer.mozilla.org/zh-CN/docs/Web/API/DOMParser// https://developer.mozilla.org/zh-CN/docs/XMLSerializerfunction trans(str)&#123;      var parser = new DOMParser();    var doc=parser.parseFromString(str, &quot;text/xml&quot;);    doc = number(doc);    var s = new XMLSerializer();    return s.serializeToString(doc);&#125;

åœ¨çº¿markdownç¼–è¾‘å™¨mdniceMarkdown Niceæ˜¯ä¸€ä¸ªæ”¯æŒè‡ªå®šä¹‰æ ·å¼çš„ Markdown ç¼–è¾‘å™¨ï¼Œæ”¯æŒå¯¼å‡ºæˆå¾®ä¿¡å…¬ä¼—å·æ–‡ç« å’ŒçŸ¥ä¹æ–‡ç« ã€‚
å€¼å¾—ä¸€æçš„æ˜¯ï¼Œmdniceå¯¼å‡ºçš„å¾®ä¿¡å…¬ä¼—å·æ–‡ç« ï¼Œæ’ç‰ˆéå¸¸niceï¼Œæ¯” wechat-format è¿˜è¦ç¾è§‚ã€‚å°è¯•äº†è‡ªå®šä¹‰æ ·å¼ï¼Œæ·»åŠ äº†æ ‡é¢˜ç¼–å·ï¼ŒåŒæ ·æ— æ³•å¤åˆ¶åˆ°å¾®ä¿¡å…¬ä¼—å·ã€‚
openwriteOpenWriteæ˜¯ä¸€ä¸ªåšå®¢ç¾¤å‘å¹³å°ï¼Œæ”¯æŒä¸€é”®å‘æ–‡åˆ°å¾®ä¿¡å…¬ä¼—å·ã€çŸ¥ä¹ã€å¤´æ¡ã€åšå®¢å›­ã€CSDNç­‰å¹³å°ã€‚å…¶ä¸­ä¸€é¡¹åŠŸèƒ½æ˜¯Markdownæ ¼å¼æ–‡ç« å¯¼å‡ºå¾®ä¿¡å…¬ä¼—å·é¢„è§ˆã€‚
Cmd MarkdownCmd Markdownæ˜¯ä¸€ä¸ªç”¨äº†å¾ˆå¤šå¹´çš„åœ¨çº¿markdownç¼–è¾‘å™¨ï¼Œç¨³å®šé è°±ï¼Œæ”¯æŒé«˜äº®ä»£ç å—ã€LaTeX å…¬å¼ã€æµç¨‹å›¾ã€‚
é©¬å…‹é£è±¡é©¬å…‹é£è±¡æ˜¯ä¸€æ¬¾ä¸“ä¸ºå°è±¡ç¬”è®°ï¼ˆEvernoteï¼‰æ‰“é€ çš„Markdownç¼–è¾‘å™¨ï¼Œæ”¯æŒé«˜äº®ä»£ç å—ã€LaTeX å…¬å¼ã€æµç¨‹å›¾ï¼Œæœ¬åœ°å›¾ç‰‡ä»¥åŠé™„ä»¶ä¸Šä¼ ã€‚é©¬å…‹é£è±¡åŒæ—¶æä¾›æ¡Œé¢å®¢æˆ·ç«¯ä»¥åŠç¦»çº¿Chrome Appï¼Œæ”¯æŒç§»åŠ¨ç«¯ Webã€‚
StackEditStackEditæ”¯æŒgoogleç™»å½•ï¼Œå‘å¸ƒæ–‡ç« åˆ°webï¼ˆgithubã€gitlabã€wordpressç­‰ï¼‰ï¼Œæ”¯æŒé«˜äº®ä»£ç å—ã€LaTeX å…¬å¼ã€æµç¨‹å›¾ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>ç¼–è¾‘å™¨</tag>
        <tag>markdown</tag>
        <tag>sublime</tag>
        <tag>typora</tag>
        <tag>wechat-format</tag>
      </tags>
  </entry>
  <entry>
    <title>Shellå’ŒPythonäº’ç›¸è°ƒç”¨</title>
    <url>/dev-shell-python/</url>
    <content><![CDATA[å‰è¨€åœ¨linuxä¸Šï¼Œæœ€å¸¸ç”¨çš„ç¼–ç¨‹è¯­è¨€æ˜¯shellï¼Œå…¶æ¬¡æ˜¯pythonã€‚è€Œè¿™ä¸¤ç§è¯­è¨€ï¼Œå¾ˆå¤šæ—¶å€™éœ€è¦é…åˆä½¿ç”¨ã€‚æœ¬æ–‡å°±ç ”ç©¶ä¸€ä¸‹è¿™ä¸¤ç§è¯­è¨€äº’ç›¸è°ƒç”¨çš„æ–¹æ³•ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ã€ŠShellè„šæœ¬ç¼–ç¨‹ã€‹
ã€ŠPythonåŸºç¡€ã€‹



shellè°ƒç”¨pythonè°ƒç”¨pythonè„šæœ¬shellè°ƒç”¨pythonè„šæœ¬ï¼Œç›´æ¥è°ƒç”¨å³å¯ï¼Œä¾‹å¦‚ï¼š
python main.py

è°ƒç”¨pythonæ¨¡å—ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬æƒ³è¦å¯¹curlè·å–çš„ç»“æœè¿›è¡Œjsonæ ¼å¼åŒ–ã€‚å‡è®¾å®‰è£…äº†jqï¼Œå¯ä»¥ä½¿ç”¨jqå‘½ä»¤ï¼š
curl -s &quot;http://rap2api.taobao.org/app/mock/241888/example/1578301745121&quot; | jq

å‡è®¾æ²¡æœ‰å®‰è£…jqï¼Œé‚£æˆ‘ä»¬å¯ä»¥ä½¿ç”¨pythonçš„ json.tool æ¨¡å—ï¼š
curl -s &quot;http://rap2api.taobao.org/app/mock/241888/example/1578301745121&quot; | python -m json.tool

è°ƒç”¨pythonå‡½æ•°1ã€test.py å†…å®¹ä¸ºï¼š
#!/usr/bin/env python#-*- coding:utf-8 -*-#scriptname:test.pydef helloworld():	return &quot;helloworld&quot;def echo():	print helloworld()def get_user():	return &quot;haojin&quot;,100,&quot;beijing&quot;

2ã€shellä¸­è°ƒç”¨ test.py ä¸­çš„æ–¹æ³•
python -c &#x27;import test;print test.helloworld()&#x27;python -c &#x27;import test;test.echo()&#x27;res=$(python -c &#x27;import test;print test.get_user()&#x27;)name=$(echo $res | cut -d&#x27; &#x27; -f1 | sed &#x27;s/,$//&#x27; | sed &#x27;s/^(//&#x27; | sed &quot;s/\&#x27;//g&quot;)score=$(echo $res | cut -d&#x27; &#x27; -f2 | sed &#x27;s/,$//&#x27;)loc=$(echo $res | cut -d&#x27; &#x27; -f3 | sed &#x27;s/)$//&#x27; | sed &quot;s/\&#x27;//g&quot;)

pythonè°ƒç”¨shellè°ƒç”¨shellå‘½ä»¤main.pyå†…å®¹ä¸º
import osval = os.system(&#x27;ls -al&#x27;)print val
å…¶ä¸­ï¼Œvalçš„å€¼æ˜¯exit codeã€‚
æ‰§è¡Œmain.pyï¼Œpython main.py
è°ƒç”¨shellè„šæœ¬1ã€main.sh å†…å®¹ä¸º
#!/bin/bashecho &quot;hello&quot;

2ã€python è°ƒç”¨ main.sh
import osval = os.system(&#x27;sh main.sh&#x27;)print val

è·å–shellæŒ‡ä»¤çš„ç»“æœä¾‹å­ï¼šè·å–echoå‘½ä»¤ç»“æœã€‚
import osres = os.popen(&#x27;echo &quot;hello&quot;&#x27;)print res.read()res.close()

é«˜çº§ä¾‹å­ï¼šè·å–curlå‘½ä»¤çš„è¿”å›ç»“æœï¼Œè½¬åŒ–æˆdictã€‚1ã€main.sh å†…å®¹ä¸º
#!/bin/bashcurl -s &quot;http://rap2api.taobao.org/app/mock/241888/example/1578301745121&quot;

2ã€python è°ƒç”¨ main.sh
import osimport jsonres = os.popen(&#x27;sh main.sh&#x27;)data = json.loads(res.read())res.close()print data[&#x27;number&#x27;]print data[&#x27;string&#x27;]print data[&#x27;array&#x27;][0][&#x27;foo&#x27;]
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>linux</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Dockerå®‰è£…é…ç½®Jupyter</title>
    <url>/dev-docker-jupyter/</url>
    <content><![CDATA[å‰è¨€ã€ŠJupyter notebookã€‹ä¸€æ–‡ä¸­å­¦ä¹ äº†jupyterçš„ä½¿ç”¨ï¼Œæœ¬æ–‡å­¦ä¹ ä¸€ä¸‹æ€æ ·ä½¿ç”¨dockerå®‰è£…jupyterï¼Œå¹¶ä¸”é…ç½®è®¿é—®å¯†ç ã€‚
å‰ç½®æ¡ä»¶æ˜¯å®‰è£…é…ç½®å¥½äº†dockerç¯å¢ƒï¼Œå®‰è£…æ–¹æ³•å‚è€ƒã€ŠDockerå…¥é—¨ã€‹ã€‚å·²çŸ¥dockerå®¿ä¸»æœºIPä¸º192.168.56.130ã€‚


å®‰è£…jupyter1ã€ç™»å½•dockerhubæŸ¥çœ‹éœ€è¦çš„Jupyter - Docker Official Imagesã€‚
2ã€ä¸‹è½½jupyteré•œåƒï¼ˆä»¥6.1.1ä¸ºä¾‹ï¼‰docker pull jupyter/base-notebook:notebook-5.7.8
æ³¨æ„ä¸è¦ä½¿ç”¨6.x.xï¼Œå­˜åœ¨é¡µé¢æ— æ³•æ˜¾ç¤ºæ‰©å±•æ’ä»¶çš„bugï¼Œè¯¦æƒ…å‚è€ƒJupyter nbextensions_configurator not shownã€‚
3ã€åˆ›å»ºé…ç½®ç›®å½•
mkdir -p /opt/jupyter/jovyanmkdir -p /opt/jupyter/jovyan/.jupyterchmod 777 -R /opt/jupyter/jovyan

4ã€å¯åŠ¨jupyteræœåŠ¡
docker run --name vk-jupyter -d \-p 8888:8888 \-v /opt/jupyter/jovyan:/home/jovyan \jupyter/base-notebook:notebook-5.7.8

ä»¥ä¸Šå‘½ä»¤ï¼š

å‘½åå®¹å™¨ä¸ºvk-jupyterï¼Œåå°è¿è¡Œ
æ˜ å°„å®¿ä¸»æœº8888ç«¯å£åˆ°å®¹å™¨çš„8888ç«¯å£
æŒ‚è½½å®¿ä¸»æœºç›®å½•/opt/jupyter/jovyanåˆ°å®¹å™¨ç›®å½•/home/jovyan

æ›´å¤šå¯åŠ¨å‘½ä»¤å‚æ•°å¯ä»¥å‚è€ƒJupyter Docker Stacksã€‚
5ã€éªŒè¯å®‰è£…docker psï¼Œjupyterå¯åŠ¨æ­£å¸¸çš„è¯å°±å¯ä»¥çœ‹åˆ°vk-jupyterå®¹å™¨ã€‚
æµè§ˆå™¨è®¿é—® http://192.168.56.130:8888 ï¼Œå¯ä»¥çœ‹åˆ°Jupyterç™»å½•é¡µé¢ã€‚
6ã€ç™»å½•docker exec -it vk-jupyter jupyter notebook listå¯ä»¥æŸ¥çœ‹åˆ°ç™»å½•éœ€è¦çš„tokenï¼Œä½¿ç”¨tokenå³å¯ç™»å½•è¿›å…¥jupyterç¼–è¾‘é¡µé¢ã€‚
é…ç½®jupyter1ã€è®¾ç½®å¯†ç 
docker exec -it vk-jupyter jupyter notebook passworddocker restart vk-jupyter

2ã€ä½¿ç”¨å¯†ç æµè§ˆå™¨è®¿é—® http://192.168.56.130:8888æ­¤æ—¶ä½¿ç”¨è‡ªå·±è®¾ç½®çš„å¯†ç å°±å¯ä»¥è®¿é—®jupyteräº†ã€‚
3ã€æ ¹ç›®å½•jupyterç¼–è¾‘å™¨çš„é»˜è®¤æ ¹ç›®å½•ä¸º /home/jovyan ï¼Œå¯¹åº”å®¿ä¸»æœºç›®å½• /opt/jupyter/jovyan ï¼Œåˆ›å»ºçš„ç›®å½•å’Œæ–‡ä»¶éƒ½å»è¿™ä¸ªè·¯å¾„ä¸‹é¢å»æ‰¾ã€‚
4ã€å®‰è£…ipywidgets å¦‚æœä¸å®‰è£…ipywidgetsï¼Œé¡µé¢åŠ è½½ /nbextensions/widgets/notebook/js/extension.js æ–‡ä»¶æ—¶ä¼šæŠ¥é”™404ã€‚
docker exec -it vk-jupyter pip install ipywidgets

é…ç½®Nginxjupyter ä½¿ç”¨äº† websocket åè®®ï¼Œæ‰€ä»¥éœ€è¦é…ç½®æ”¯æŒ websocketã€‚å¦‚æœä¸é…ç½®çš„è¯ï¼Œé€šè¿‡åŸŸåè®¿é—®æ—¶ä¼šæŠ¥é”™æ— æ³•è¿æ¥å†…æ ¸ï¼Œä¹Ÿå°±æ— æ³•è¿è¡Œpythonè„šæœ¬ã€‚
server &#123;    listen 80;    server_name jupyter.voidking.com;    charset utf-8;    location /&#123;        proxy_set_header   Host             $host;        proxy_set_header   X-Real-IP        $remote_addr;        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;        proxy_pass http://172.17.12.85:8888;        # WebSocket support        proxy_http_version 1.1;        proxy_set_header Upgrade $http_upgrade;        proxy_set_header Connection &quot;upgrade&quot;;    &#125;&#125;

jupyterå°æŠ€å·§æ‰§è¡Œbashåœ¨ä»£ç æ¡†é‡Œè¾“å…¥å¹å·+bashå‘½ä»¤ï¼Œå³å¯æ‰§è¡Œbashï¼Œä¾‹å¦‚ï¼š!ls -l
ç™»å½•è¿›å®¹å™¨docker exec -it vk-jupyter /bin/bashdocker exec --user root -it vk-jupyter /bin/bash

å®‰è£…å¸¸ç”¨å‘½ä»¤docker exec --user root -it vk-jupyter /bin/bashapt updateapt install curlapt install unzip

å®‰è£…æ’ä»¶Jupyter Notebook æ‰©å±•æ’ä»¶ï¼ˆnbextensionsï¼‰æ˜¯ä¸€äº› JavaScript æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ’ä»¶å¼ºåŒ– Notebook çš„åŠŸèƒ½ã€‚æ‰©å±•æ’ä»¶æœ¬è´¨ä¸Šä¿®æ”¹äº† Jupyter UIï¼Œä»¥å®ç°æ›´å¼ºå¤§çš„åŠŸèƒ½ã€‚1ã€ç•Œé¢æ·»åŠ  Nbextensions
docker exec -it vk-jupyter conda install -c conda-forge jupyter_nbextensions_configurator#docker exec -it vk-jupyter pip install jupyter_nbextensions_configurator -i https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple/docker exec -it vk-jupyter jupyter nbextensions_configurator enable --userdocker exec -it vk-jupyter jupyter nbextension listdocker restart vk-jupyter

2ã€å®‰è£…å¸¸ç”¨æ‰©å±•é›†åˆ
docker exec -it vk-jupyter pip install jupyter_contrib_nbextensions -i https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple/#docker exec -it vk-jupyter conda install -c conda-forge jupyter_contrib_nbextensionsdocker exec -it vk-jupyter jupyter contrib nbextension install --userdocker exec -it vk-jupyter jupyter nbextension list

]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Dockerå®‰è£…é…ç½®OpenVPN</title>
    <url>/dev-docker-openvpn/</url>
    <content><![CDATA[å‰è¨€
OpenVPN is a virtual private network (VPN) system that implements techniques to create secure point-to-point or site-to-site connections in routed or bridged configurations and remote access facilities. It implements both client and server applications.

å‚è€ƒæ–‡æ¡£ï¼š

WikiPedia - OpenVPN



OpenVPNåŸç†FROM ChatGPT:
OpenVPNæ˜¯ä¸€ä¸ªå¼€æºçš„è™šæ‹Ÿç§äººç½‘ç»œï¼ˆVPNï¼‰è§£å†³æ–¹æ¡ˆã€‚å®ƒä½¿ç”¨SSL/TLSåè®®è¿›è¡Œå®‰å…¨é€šä¿¡ï¼Œå¹¶èƒ½å¤Ÿç©¿è¶Šå¤§å¤šæ•°é˜²ç«å¢™å’ŒNATè·¯ç”±å™¨ã€‚
OpenVPNçš„åŸç†å¦‚ä¸‹ï¼š

é€šä¿¡åŒæ–¹é¦–å…ˆå»ºç«‹ä¸€ä¸ªåŠ å¯†é€šé“ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšæ¡æ‰‹ï¼ˆhandshakeï¼‰ã€‚
æ¡æ‰‹å®Œæˆåï¼Œé€šä¿¡åŒæ–¹ä¼šäº’ç›¸éªŒè¯å¯¹æ–¹çš„èº«ä»½ã€‚
éªŒè¯å®Œæˆåï¼ŒOpenVPNå°†ä½¿ç”¨TLSåè®®è¿›è¡Œæ•°æ®é€šä¿¡ï¼Œæ‰€æœ‰ä¼ è¾“çš„æ•°æ®å°†é€šè¿‡OpenVPNçš„é€šé“è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ï¼Œä¿è¯é€šä¿¡çš„å®‰å…¨æ€§ã€‚
OpenVPNæ”¯æŒå¤šç§åŠ å¯†ç®—æ³•ï¼Œä¾‹å¦‚AESå’ŒBlowfishç­‰ï¼ŒåŒæ—¶è¿˜æ”¯æŒTLSv1.2åè®®ï¼Œç¡®ä¿ä¼ è¾“çš„æ•°æ®ä¸ä¼šè¢«çªƒå–æˆ–ç¯¡æ”¹ã€‚åœ¨OpenVPNä¸­ï¼Œé€šå¸¸ä¼šæœ‰ä¸€ä¸ªæœåŠ¡å™¨å’Œå¤šä¸ªå®¢æˆ·ç«¯ã€‚æœåŠ¡å™¨ä¼šä¸ºæ¯ä¸ªå®¢æˆ·ç«¯åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„IPåœ°å€ï¼Œå¹¶ä¸”ä½¿ç”¨è·¯ç”±å™¨å°†å…¶æ‰€æœ‰å®¢æˆ·ç«¯çš„æµé‡è·¯ç”±åˆ°å…¬ç½‘ä¸Šã€‚

OpenVPNå¯ä»¥é€šè¿‡åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œæ¥å®ç°è·¨å¹³å°æ€§ã€‚æ­¤å¤–ï¼ŒOpenVPNè¿˜å¯ä»¥ä½¿ç”¨å¤šç§ç½‘ç»œåè®®ï¼Œä¾‹å¦‚TCPã€UDPå’ŒICMPç­‰ã€‚
æ€»çš„æ¥è¯´ï¼ŒOpenVPNçš„åŸç†æ˜¯é€šè¿‡åŠ å¯†å’Œèº«ä»½éªŒè¯ç­‰å®‰å…¨æªæ–½æ¥å®ç°å¯¹æ•°æ®ä¼ è¾“çš„ä¿æŠ¤ï¼Œä»è€Œå®ç°åœ¨ä¸å®‰å…¨çš„å…¬å…±ç½‘ç»œä¸­å»ºç«‹å®‰å…¨çš„ç§äººç½‘ç»œã€‚
å‡†å¤‡VPNåŸŸå1ã€ç™»å½•dnspodæˆ–è€…å…¶ä»–åŸŸåè§£æå¹³å°2ã€è§£ævpn.voidking.comåŸŸåï¼ŒæŒ‡å‘å‡†å¤‡å®‰è£…OpenVPN Serverçš„ä¸»æœºIPã€‚
å®‰è£…OpenVPN Serverå‚è€ƒæ–‡æ¡£ï¼š

OpenVPN for Docker
ååˆ†é˜ OpenVPN server æ¶è¨­ â€“ docker æ‰‹æŠŠæ‰‹æ•™å­¸
DockerHub - OpenVPN

å‡†å¤‡volumeOVPN_DATA=&quot;ovpn-data-example&quot;docker volume create --name $OVPN_DATAdocker inspect volume ovpn-data-example

åˆå§‹åŒ–volumeä¸­çš„æ•°æ®1ã€ç”Ÿæˆé…ç½®
docker pull kylemanna/openvpn:2.4docker run --rm \-v $OVPN_DATA:/etc/openvpn \kylemanna/openvpn:2.4 ovpn_genconfig -u udp://vpn.voidking.com
å¦‚æœæ²¡æœ‰åŸŸåï¼Œä½¿ç”¨IPä¹Ÿæ˜¯å¯ä»¥çš„ã€‚
2ã€ç”ŸæˆCAè¯ä¹¦
docker run --rm -it \-v $OVPN_DATA:/etc/openvpn \--privileged --network host \kylemanna/openvpn:2.4 ovpn_initpki

Enter New CA Key Passphrase: # è¾“å…¥å¯†ç  voidking
Re-Enter New CA Key Passphrase: # å†æ¬¡è¾“å…¥å¯†ç  voidking
Common Name (eg: your user, host, or server name) [Easy-RSA CA]: # è¾“å…¥ openvpn-server
Enter pass phrase for /etc/openvpn/pki/private/ca.key: # è¾“å…¥å¯†ç  voidking
Enter pass phrase for /etc/openvpn/pki/private/ca.key: # å†æ¬¡è¾“å…¥å¯†ç  voidking

3ã€æŸ¥çœ‹æ•°æ®
cd /var/lib/docker/volumes/ovpn-data-example/_data/pki/privatell

å¯åŠ¨openvpn serverdocker run --name openvpn -d \-v $OVPN_DATA:/etc/openvpn \-p 1194:1194/udp \--cap-add=NET_ADMIN \kylemanna/openvpn:2.4docker psdocker logs openvpn

The UDP server uses 192.168.255.0/24 for dynamic clients by default.
ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦docker run --rm -it \-v $OVPN_DATA:/etc/openvpn \kylemanna/openvpn:2.4 easyrsa build-client-full client0 nopass

è¿™é‡Œçš„client0å¯ä»¥æ›¿æ¢æˆå…¶ä»–åç§°ã€‚
ç”Ÿæˆå®¢æˆ·ç«¯é…ç½®docker run --rm -it \-v $OVPN_DATA:/etc/openvpn \kylemanna/openvpn:2.4 ovpn_getclient client0 &gt; client0.ovpn

å¼€å¯é˜²ç«å¢™åœ¨å…¬æœ‰äº‘é˜²ç«å¢™æˆ–è€…å®‰å…¨ç»„ç®¡ç†é¡µé¢ï¼Œæ”¾å¼€1194ç«¯å£çš„UDPåè®®ã€‚
OpenVPN Serveræ—¥å¿—docker logs -f openvpn
ç›‘å¬æ—¥å¿—å˜åŒ–ï¼Œæµ‹è¯•å®¢æˆ·ç«¯æ¥å…¥æ—¶ã€‚
MacOSå®‰è£…ä½¿ç”¨OpenVPN Clientå®‰è£…OpenVPN Clientæœ‰å¾ˆå¤šï¼Œè¿™é‡Œé€‰æ‹©ä½¿ç”¨OpenVPNå®˜æ–¹Client - OpenVPN Connectã€‚ç‰ˆæœ¬é€‰æ‹©OpenVPN Connect v3ï¼Œä¸‹è½½å®‰è£…å³å¯ã€‚
ä½¿ç”¨æ‰“å¼€OpenVPN Connect v3 -&gt; File -&gt; BROWSE-&gt; é€‰æ‹©client0.ovpn -&gt; é€‰æ‹©OpenVPN Serverç‚¹å‡»å¯åŠ¨
å½“æŒ‰é’®å˜ç»¿ï¼Œæ˜¾ç¤ºCONNECTEDï¼Œè¡¨æ˜è¿æ¥æˆåŠŸï¼Œå³ä¸Šè§’æ—¥å¿—å¯ä»¥æŸ¥çœ‹åˆ°æ›´è¯¦ç»†ä¿¡æ¯ã€‚åŒæ—¶OpenVPN Serveræ—¥å¿—ä¸­ä¹Ÿä¼šå‡ºç°æ–°çš„å®¢æˆ·ç«¯è¿æ¥ä¿¡æ¯ã€‚
æŸ¥çœ‹ç½‘ç»œé…ç½®ifconfig | grep 192netstat -r

âœ  ~ ifconfig | grep 192    inet 192.168.199.141 netmask 0xffffff00 broadcast 192.168.199.255    inet 192.168.56.1 netmask 0xffffff00 broadcast 192.168.56.255    inet 192.168.255.6 --&gt; 192.168.255.5 netmask 0xfffffffcâœ  ~ netstat -rRouting tablesInternet:Destination        Gateway            Flags        Netif Expire0/1                192.168.255.5      UGSc         utun2default            192.168.199.1      UGSc           en08.136.13.58/32     192.168.199.1      UGSc           en0128.0/1            192.168.255.5      UGSc         utun2192.168.255.1/32   192.168.255.5      UGSc         utun2192.168.255.4/30   192.168.255.6      UGSc         utun2192.168.255.5      192.168.255.6      UHr          utun2

å¯ä»¥çœ‹åˆ°ï¼Œæœ¬æœºæ–°å¢äº†ä¸€ä¸ª 192.168.255.6 çš„IPï¼Œç½‘å…³æ˜¯ 192.168.255.5 ï¼Œä½¿ç”¨çš„ç½‘å¡è®¾å¤‡æ˜¯éš§é“utun2ã€‚
æµ‹è¯•è¿é€šæ€§ping 172.17.12.85
ping OpenVPN Server çš„å†…ç½‘IPï¼Œç½‘ç»œç•…é€šã€‚
Linuxå®‰è£…ä½¿ç”¨OpenVPN Clientå®‰è£…å‚è€ƒæ–‡æ¡£ï¼š

OpenVPN 3 for Linux
OpenVPN 3 Linux

Debian/Ubuntuï¼š
apt install apt-transport-httpscurl -fsSL https://swupdate.openvpn.net/repos/openvpn-repo-pkg-key.pub | gpg --dearmor &gt; /etc/apt/trusted.gpg.d/openvpn-repo-pkg-keyring.gpgcurl -fsSL https://swupdate.openvpn.net/community/openvpn3/repos/openvpn3-$DISTRO.list &gt;/etc/apt/sources.list.d/openvpn3.listapt updateapt install openvpn3

CentOSï¼š
yum install yum-plugin-copryum copr enable dsommers/openvpn3yum install openvpn3-client

ä½¿ç”¨1ã€å¯åŠ¨OpenVPN Client
openvpn3 session-start --config client0.ovpn
è¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œå³å¯è¿æ¥åˆ°OpenVPN Serverã€‚
2ã€é‡å¯OpenVPN Client
ps -ef | grep openvpnopenvpn3 sessions-listopenvpn3 session-manage --config client0.ovpn --restart# oropenvpn3 session-manage --config --session-path /net/openvpn/v3/sessions/45aea145s8fb7s4143sa23as933981fb09d3 --restart

3ã€å…³é—­OpenVPN Client
openvpn3 session-manage --config client0.ovpn --disconnect# oropenvpn3 session-manage --config --session-path /net/openvpn/v3/sessions/45aea145s8fb7s4143sa23as933981fb09d3 --disconnect

æŸ¥çœ‹ç½‘ç»œé…ç½®route -n

OpenVPN vs IPsecOpenVPNå’ŒIPsecéƒ½æ˜¯VPNåè®®ï¼Œä½†æ˜¯å®‰å…¨æ€§å’Œç”¨é€”ä¸åŒã€‚
OpenVPNæ˜¯ä¸€ç§é«˜åº¦å¯é…ç½®çš„å¼€æºåè®®ï¼Œå¯ä»¥ä½¿ç”¨å„ç§ç«¯å£å’ŒåŠ å¯†æ–¹æ³•ã€‚å®ƒæ˜¯æœ€å®‰å…¨çš„VPNåè®®ä¹‹ä¸€ï¼Œå¹¶é€šè¿‡äº†è®¸å¤šç¬¬ä¸‰æ–¹å®‰å…¨å®¡è®¡ã€‚ä¸€èˆ¬éœ€è¦è‡ªè¡Œå®‰è£…ã€‚é€‚åˆç”¨äº client-to-site çš„è¿æ¥ï¼Œä¾‹å¦‚è¿œç¨‹åŠå…¬ã€‚
IPSecï¼ˆInternet Security Protocolï¼‰æ˜¯ä¸€å¥—å®‰å…¨çš„åè®®ï¼Œå¯ç¡®ä¿æ•°æ®åŒ…çš„èº«ä»½éªŒè¯å’ŒåŠ å¯†ï¼Œä»¥é€šè¿‡äº’è”ç½‘åè®®ï¼ˆIPï¼‰ç½‘ç»œåœ¨ä¸¤ä¸ªç«¯ç‚¹ä¹‹é—´æä¾›å—ä¿æŠ¤çš„é€šä¿¡ã€‚å¸¸å†…ç½®åœ¨ç½‘å…³è®¾å¤‡ä¸­ï¼Œä¹Ÿå¯ä»¥è‡ªè¡Œå®‰è£…ã€‚é€‚åˆç”¨äº site-to-site çš„è¿æ¥ï¼Œä¾‹å¦‚æ‰“é€šå¤šä¸ªç‹¬ç«‹çš„ç½‘ç»œï¼ˆå†…ç½‘å’Œå†…ç½‘ã€åŠå…¬ç½‘å’Œå†…ç½‘ç­‰ï¼‰ã€‚å®‰å…¨æ€§ä¸å¦‚OpenVPNï¼Œä½†æ˜¯é€Ÿåº¦é€šå¸¸æ¯”OpenVPNè¦æ›´å¿«ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

IPSec vs. OpenVPNâ€”what are the differences?
IPSecâ€Œ â€Œvs.â€Œ â€ŒOpenVPN:â€Œ â€ŒUnderstandingâ€Œ â€Œtheâ€Œ â€ŒDifferencesâ€Œ
ä»€ä¹ˆæ˜¯IPsecï¼Ÿ

]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>macos</tag>
        <tag>docker</tag>
        <tag>chatgpt</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨IDEAåˆå¹¶ä»£ç çš„ä¸ªäººå®è·µ</title>
    <url>/dev-idea-git-merge-code/</url>
    <content><![CDATA[å‰è¨€å›¢é˜Ÿåˆä½œå¼€å‘ï¼Œè‚¯å®šä¼šæ¶‰åŠåˆ°ä»£ç åˆå¹¶çš„é—®é¢˜ã€‚ä»¥å‰åœ¨ä»£ç åˆå¹¶çš„æ—¶å€™ï¼Œå–œæ¬¢ä½¿ç”¨beyond compareã€‚åŒä¸€ä¸ªé¡¹ç›®æ‹·è´ä¸¤ä»½ï¼Œä¸€ä¸ªä¿æŒæœ€æ–°ä»£ç ï¼Œä¸€ä¸ªç”¨äºå¼€å‘ï¼Œå¼€å‘å®Œæˆåä½¿ç”¨beyond compareæŠŠå¼€å‘ä»£ç åˆå¹¶åˆ°æœ€æ–°ä»£ç ã€‚ç„¶åpushåˆ°è¿œç¨‹åˆ†æ”¯ï¼Œæä¸€ä¸ªMRã€‚åæ¥å‘ç°ï¼Œä½¿ç”¨IDEAé…åˆGitå‘½ä»¤æ¥åˆå¹¶ä»£ç ï¼Œç®€ç›´å®Œç¾ã€‚æœ¬æ–‡å°±æ¥è®°å½•ä¸€ä¸‹è¿™ç§æ–¹æ³•ï¼Œä¾›å¤§å®¶å‚è€ƒã€‚
å·²çŸ¥é¡¹ç›®åä¸º voidkingï¼Œæœ‰å¾ˆå¤šåˆ†æ”¯ï¼Œå…¶ä¸­ pre åˆ†æ”¯ç”¨æ¥å‘å¸ƒæœåŠ¡åˆ°é¢„å‘ç¯å¢ƒï¼Œmasteråˆ†æ”¯ç”¨æ¥å‘å¸ƒæœåŠ¡åˆ°ç”Ÿäº§ç¯å¢ƒã€‚ä»£ç åˆå¹¶åï¼Œåˆ›å»ºpreæˆ–è€…prodå¼€å¤´çš„tagï¼Œè§¦å‘CICDã€‚


å¼€å‘1ã€åœ¨githubæˆ–è€…gitlabæ–°å»ºä¸€ä¸ªissueï¼Œæè¿°æ¸…æ¥šé—®é¢˜æˆ–è€…åŠŸèƒ½ã€‚2ã€é’ˆå¯¹è¿™ä¸ªissueï¼Œåˆ›å»ºä¸€ä¸ªåˆ†æ”¯ã€‚è¿™ä¸ªåˆ†æ”¯ä¼šä»¥issueçš„æ ‡é¢˜å‘½åï¼Œå‰é¢åŠ ä¸Šissueçš„ç¼–å·ã€‚å‡è®¾ç”Ÿæˆçš„branchä¸º 3-add-new-feat ã€‚3ã€æ‹‰å–æœ€æ–°ä»£ç åï¼Œæœ¬åœ°åˆ›å»ºè‡ªå·±çš„åˆ†æ”¯git checkout -b haojin
4ã€ä¸€é¡¿å¤åˆ¶ç²˜è´´ï¼ŒåŠŸèƒ½å®Œæˆï¼Œcommitè‡ªå·±çš„ä»£ç ã€‚
preåˆ†æ”¯ä»£ç åˆå¹¶åˆ°äº†ä»£ç åˆå¹¶çš„æ­¥éª¤ï¼Œè¡¨æ¼”å¼€å§‹ã€‚
1ã€æ‹‰å–æœ€æ–°ä»£ç 
git checkout mastergit pull

2ã€åˆ›å»ºmergepreåˆ†æ”¯
git checkout -b mergepre origin/pre

3ã€ä½¿ç”¨IDEAåˆå¹¶ä»£ç ç‚¹å‡»ç•Œé¢å³ä¸‹è§’Git Branchesï¼Œé€‰æ‹© haojin åˆ†æ”¯ï¼ŒShow Diff with Working Treeã€‚æ ¹æ®è‡ªå·±çš„ä¿®æ”¹ï¼Œåˆå¹¶ä»£ç åˆ°å½“å‰çš„mergepreåˆ†æ”¯ï¼Œä¿®æ”¹å®Œæˆåcommitä»£ç ã€‚
4ã€pushä»£ç 
git push origin HEAD:haojin --force
éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œæˆ‘ä»¬æŠŠmergepreçš„åˆ†æ”¯pushåˆ°äº†è¿œç¨‹çš„haojinåˆ†æ”¯ï¼Œå¹¶æ²¡æœ‰pushåˆ° 3-add-new-feat ã€‚è¿™æ˜¯å› ä¸ºï¼Œ3-add-new-featè¿™ä¸ªåˆ†æ”¯æˆ‘ä»¬ç•™ç€ï¼Œä»£ç åˆå¹¶åˆ°masteråˆ†æ”¯æ—¶ä½¿ç”¨ã€‚
ç‚¹å‡»å‡ºç°çš„é“¾æ¥ï¼Œæˆ–è€…åœ¨gitlabä¸Šçš„haojinåˆ†æ”¯ç‚¹å‡»åˆ›å»ºMRï¼Œè¿›å…¥åˆ›å»ºMRçš„é¡µé¢ã€‚
5ã€é€‰æ‹©è¦åˆå¹¶åˆ°çš„åˆ†æ”¯ä¸º pre ï¼Œå¯ä»¥çœ‹åˆ°ä»£ç çš„å˜æ›´ï¼Œå†æ¬¡æ£€æŸ¥ã€‚
6ã€æ£€æŸ¥æ²¡é—®é¢˜çš„è¯ï¼Œæäº¤MRå³å¯ã€‚
masteråˆ†æ”¯ä»£ç åˆå¹¶ä»¥ä¸Šï¼Œå‡è®¾æˆ‘ä»¬å·²ç»åˆå¹¶äº†è‡ªå·±çš„ä»£ç åˆ° pre åˆ†æ”¯ã€‚å¹¶ä¸”åœ¨é¢„å‘ç¯å¢ƒå‘ç‰ˆéªŒè¯é€šè¿‡ï¼Œæ²¡æœ‰é—®é¢˜ã€‚æ¥ä¸‹æ¥å°±å¯ä»¥åˆå¹¶ä»£ç åˆ° master åˆ†æ”¯äº†ã€‚
1ã€æ‹‰å–æœ€æ–°ä»£ç 
git checkout mastergit pull

2ã€åˆ›å»ºmergeprodåˆ†æ”¯
git checkout -b mergeprod

3ã€ä½¿ç”¨IDEAåˆå¹¶ä»£ç ç‚¹å‡»ç•Œé¢å³ä¸‹è§’Git Branchesï¼Œé€‰æ‹© haojin åˆ†æ”¯ï¼ŒShow Diff with Working Treeã€‚æ ¹æ®è‡ªå·±çš„ä¿®æ”¹ï¼Œåˆå¹¶ä»£ç åˆ°å½“å‰çš„mergeprodåˆ†æ”¯ï¼Œä¿®æ”¹å®Œæˆåcommitä»£ç ã€‚
4ã€pushä»£ç 
git push origin HEAD:3-add-new-feat
ç‚¹å‡»å‡ºç°çš„é“¾æ¥ï¼Œæˆ–è€…åœ¨gitlabä¸Šçš„haojinåˆ†æ”¯ç‚¹å‡»åˆ›å»ºMRï¼Œè¿›å…¥åˆ›å»ºMRçš„é¡µé¢ã€‚
5ã€é€‰æ‹©è¦åˆå¹¶åˆ°çš„åˆ†æ”¯ä¸º master ï¼Œå¯ä»¥çœ‹åˆ°ä»£ç çš„å˜æ›´ï¼Œå†æ¬¡æ£€æŸ¥ã€‚
6ã€æ£€æŸ¥æ²¡é—®é¢˜çš„è¯ï¼Œæäº¤MRå³å¯ã€‚
ä»£ç å†²çªè§£å†³åŠæ³•é—®é¢˜æè¿°ï¼šgit pull ä¹‹åï¼Œå‡ºç°ä»£ç å†²çªã€‚è§£å†³åŠæ³•ï¼šèœå•æ Gitï¼ŒMergeï¼ŒResolve Conflictsï¼Œé€‰ä¸­å†²çªä»£ç ï¼ŒMergeã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>ç¼–è¾‘å™¨</tag>
        <tag>git</tag>
        <tag>idea</tag>
      </tags>
  </entry>
  <entry>
    <title>Goè¯­è¨€å¼€å‘çš„å°æŠ€å·§</title>
    <url>/dev-golang-skills/</url>
    <content><![CDATA[å‰è¨€æœ€è¿‘å­¦åˆ°äº†ä¸€äº›Goè¯­è¨€å¼€å‘æ—¶çš„å°æŠ€å·§ï¼Œåšä¸‹è®°å½•ã€‚
æé«˜ä¸‹è½½é€Ÿåº¦æ–¹æ³•ä¸€ï¼šç§‘å­¦ä¸Šç½‘
æ–¹æ³•äºŒï¼šé…ç½®ä»£ç†ï¼Œè¯¦æƒ…å‚è€ƒã€ŠGolangåŒ…ç®¡ç†å·¥å…·ã€‹
# export GOPROXY=https://goproxy.cnexport GOPROXY=https://goproxy.ioexport GO111MODULE=ongo get -v golang.org/x/tools/cmd/goimports

æ–¹æ³•ä¸‰ï¼šä½¿ç”¨gopm
go get -v github.com/gpmgo/gopmgopm get -v golang.org/x/tools/cmd/goimports



ç¼–è¯‘å®‰è£…è½¯ä»¶go build golang.org/x/tools/cmd/goimportsgo install golang.org/x/tools/cmd/goimports

è‡ªåŠ¨æ ¼å¼åŒ–Golangå¸Œæœ›ç»Ÿä¸€ä»£ç é£æ ¼ï¼Œå› æ­¤æ¨å‡ºäº†gofmtå·¥å…·ã€‚gofmtå¯ä»¥æ ¼å¼åŒ–å•ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ ¼å¼åŒ–æ•´ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰goæ–‡ä»¶ã€‚é™¤äº†gofmtå·¥å…·ï¼Œgoè¯­è¨€ä¸­è¿˜æœ‰ä¸€ä¸ªgo fmtå‘½ä»¤ï¼Œè¯¥å‘½ä»¤æ˜¯gofmtçš„ç®€å•å°è£…ã€‚
åœ¨IDEAä¸­ï¼Œæ€æ ·ä½¿ç”¨gofmtå‘¢ï¼Ÿ1ã€èœå•æ ï¼ŒIntelliJ IDEAï¼ŒPreferencesâ€¦ã€‚2ã€Pluginsï¼Œæœç´¢Fileï¼Œæ‰¾åˆ°File Watchersæ’ä»¶å¹¶å®‰è£…ã€‚3ã€Toolsï¼ŒFile Watchersï¼Œæ·»åŠ æˆ–ä¿®æ”¹gofmtæ¨¡ç‰ˆã€‚
File typeï¼šGoScopeï¼šProject filesProgramï¼š/usr/local/go/bin/gofmtArgumentsï¼š-l -w -s $FilePath$Output paths to refreshï¼š$FilePath$
4ã€å‹¾é€‰Enabledã€‚
ä¿å­˜æºç æ—¶ï¼Œå°±ä¼šæ‰§è¡Œä»£ç æ ¼å¼åŒ–äº†ã€‚
è‡ªåŠ¨å¼•å…¥ä¾èµ–åŒ…å‚è€ƒä¸Šä¸€èŠ‚è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œé…ç½® goimports ï¼Œè‡ªåŠ¨å¼•å…¥ä¾èµ–åŒ…ã€‚
æŸ¥çœ‹æ–‡æ¡£å¦‚æœå¯¹ä¸€ä¸ªåŒ…æˆ–è€…å‡½æ•°ä¸ç†Ÿæ‚‰ï¼Œå¯ä»¥ä½¿ç”¨go docå‘½ä»¤æŸ¥çœ‹æ–‡æ¡£ã€‚æ¯”å¦‚ï¼š
go doc http.ListenAndServe

å¦‚æœæƒ³è¦çœ‹ä¸€ä¸ªé¡¹ç›®çš„å¸®åŠ©æ–‡æ¡£ï¼Œå¯ä»¥ä½¿ç”¨godocå·¥å…·å¯åŠ¨ä¸€ä¸ªæ–‡æ¡£æœåŠ¡å™¨ã€‚
go get -v golang.org/x/tools/cmd/godocgodoc -http :6060

æµ‹è¯•Debugging Sucks! Testing Rocks!Goè¯­è¨€æ”¯æŒä¸‰ç§æµ‹è¯•ï¼šå•å…ƒæµ‹è¯•ã€æ€§èƒ½æµ‹è¯•å’Œhttpæµ‹è¯•ï¼Œä¸‹é¢åˆ†åˆ«æ¥çœ‹ä¸€ä¸‹ã€‚
å•å…ƒæµ‹è¯•Goè¯­è¨€å•å…ƒæµ‹è¯•å‡½æ•°ä»¥Testä¸ºå‰ç¼€ï¼Œè¯¦æƒ…å‚è€ƒæµ‹è¯•å‡½æ•°ã€‚
å®é™…å¼€å‘ä¸­æ¨èä½¿ç”¨è¡¨æ ¼é©±åŠ¨æµ‹è¯•ï¼Œå°±æ˜¯æŠŠæµ‹è¯•æ•°æ®å’Œæµ‹è¯•é€»è¾‘åˆ†å¼€ã€‚æ¯”å¦‚ï¼š
func TestShortFilename(t *testing.T) &#123;    tests := []struct &#123;        in       string        expected string    &#125;&#123;        &#123;&quot;???&quot;, &quot;???&quot;&#125;,        &#123;&quot;filename.go&quot;, &quot;filename.go&quot;&#125;,        &#123;&quot;hello/filename.go&quot;, &quot;filename.go&quot;&#125;,        &#123;&quot;main/hello/filename.go&quot;, &quot;filename.go&quot;&#125;,    &#125;    for _, tt := range tests &#123;        actual := getShortFilename(tt.in)        if strings.Compare(actual, tt.expected) != 0 &#123;            t.Fail()        &#125;    &#125;&#125;

åœ¨IDEAä¸­æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼šåœ¨å•å…ƒæµ‹è¯•å‡½æ•°å·¦è¾¹ï¼Œä¼šå‡ºç°ä¸€ä¸ªä¸‰è§’ç®­å¤´ï¼Œç‚¹å‡»å®ƒï¼Œé€‰æ‹© Run â€˜Testxxxâ€™ with Coverageï¼Œå³å¯çœ‹åˆ°ä»£ç è¦†ç›–ç‡ã€‚ç»¿çº¿ä»£è¡¨è¦†ç›–åˆ°äº†ï¼Œçº¢çº¿ä»£è¡¨æ²¡æœ‰è¦†ç›–åˆ°ã€‚
ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼š
go test -coverprofile=c.outgo tool covergo tool cover html=c.out

æ€§èƒ½æµ‹è¯•1ã€ç¼–å†™æ€§èƒ½æµ‹è¯•å‡½æ•°ï¼Œä»¥Benchmarkä¸ºå‰ç¼€ï¼Œè¯¦æƒ…å‚è€ƒåŸºå‡†æµ‹è¯•ã€‚
2ã€è¿è¡ŒåŸºå‡†æµ‹è¯•
go test -bench .

3ã€è¯¦ç»†åˆ†æï¼ˆæ–‡æœ¬ï¼‰
go test bench . -cpuprofile cpu.outgo tool pprof -text -nodecount=10 ./cpu.test cpu.out

4ã€è¯¦ç»†åˆ†æï¼ˆå›¾è¡¨ï¼‰
go tool pprof cpu.outweb
PSï¼šéœ€è¦å®‰è£…graphvizï¼Œä»¥ä¾¿ç”Ÿæˆå›¾è¡¨ã€‚
httpæµ‹è¯•Goè¯­è¨€çš„httpæµ‹è¯•ä½¿ç”¨ net/http/httptest åŒ…ï¼Œæµ‹è¯•æ–¹æ³•å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼šä¸€ç§æ˜¯ä½¿ç”¨å‡çš„Request/Responseï¼Œé€Ÿåº¦å¿«ï¼Œæµ‹è¯•ç²’åº¦å°ï¼Œé€‚ç”¨äºæµ‹è¯•å‡½æ•°å’Œæ–¹æ³•ï¼›å¦å¤–ä¸€ç§æ˜¯å¯åŠ¨httpæœåŠ¡å™¨ï¼Œé€Ÿåº¦æ…¢ï¼Œä»£ç è¦†ç›–é‡æ›´å¤§ï¼Œé€‚ç”¨äºæµ‹è¯•å’Œæ¨¡æ‹Ÿåç«¯æ¥å£ã€‚
å…ˆè¯´ç¬¬ä¸€ç§ï¼Œä½¿ç”¨å‡çš„Request/Responseï¼š1ã€å·²çŸ¥å‡½æ•°
func HelloHandler(w http.ResponseWriter, r *http.Request) &#123;	w.Write([]byte(&quot;hello world&quot;))&#125;

2ã€æµ‹è¯•ä»£ç 
import (	&quot;io/ioutil&quot;	&quot;net/http&quot;	&quot;net/http/httptest&quot;	&quot;testing&quot;)func TestHelloHandler(t *testing.T) &#123;	req := httptest.NewRequest(&quot;GET&quot;, &quot;http://www.voidking.com/&quot;, nil)	w := httptest.NewRecorder()	HelloHandler(w, req)	bytes, _ := ioutil.ReadAll(w.Result().Body)	if string(bytes) != &quot;hello world&quot; &#123;		t.Fatal(&quot;expected hello world, but got&quot;, string(bytes))	&#125;&#125;

3ã€è¿è¡Œæµ‹è¯•go test -v .
å†è¯´ç¬¬äºŒç§ï¼Œå¯åŠ¨httpæœåŠ¡å™¨ã€‚1ã€å·²çŸ¥å‡½æ•°
func HelloHandler(w http.ResponseWriter, r *http.Request) &#123;	w.Write([]byte(&quot;hello world&quot;))&#125;

2ã€æµ‹è¯•ä»£ç 
import (	&quot;io/ioutil&quot;	&quot;net/http&quot;	&quot;net/http/httptest&quot;	&quot;testing&quot;)func TestHelloHandler(t *testing.T) &#123;	ts := httptest.NewServer(http.HandlerFunc(HelloHandler))	defer ts.Close() 	res, err := http.Get(ts.URL)	if err != nil &#123;		t.Fatal(err)	&#125;	bytes, err := ioutil.ReadAll(res.Body)	res.Body.Close()	if err != nil &#123;		t.Fatal(err)	&#125; 	if string(bytes) != &quot;hello world&quot; &#123;		t.Fatal(&quot;expected hello world, but got&quot;, string(bytes))	&#125;&#125;

3ã€è¿è¡Œæµ‹è¯•go test -v .
]]></content>
      <categories>
        <category>engineering</category>
        <category>golang</category>
      </categories>
      <tags>
        <tag>golang</tag>
        <tag>idea</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨IDEAå¼€å‘Golangå’ŒPython</title>
    <url>/dev-idea-golang-python/</url>
    <content><![CDATA[å‰è¨€çªç„¶å‘ç°ï¼Œè‡ªå·±å®‰è£…äº†ä¸‰æ¬¾ JetBrains çš„äº§å“ï¼šIDEAã€GoLandå’ŒPyCharmã€‚è¿™ä¸‰æ¬¾è½¯ä»¶å¤§å°å·®ä¸å¤šï¼Œé•¿å¾—å·®ä¸å¤šï¼Œç”¨èµ·æ¥ä¹Ÿå·®ä¸å¤šã€‚å”¯ä¸€çš„å·®åˆ«ï¼Œå°±æ˜¯è‡ªå·±åœ¨ä½¿ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€å†™ä»£ç æ—¶ï¼Œéœ€è¦åœ¨å®ƒä»¬ä¹‹é—´æ¥å›åˆ‡æ¢ã€‚èƒ½ä¸èƒ½ï¼Œåªä¿ç•™å…¶ä¸­ä¸€æ¬¾å‘¢ï¼Ÿä¸€ä¸ªIDEï¼Œæ‰€æœ‰ç¼–ç¨‹è¯­è¨€é€šç”¨ï¼Œæˆ–è€…è‡³å°‘èƒ½å¤Ÿä¿è¯Javaã€Golangã€Pythoné€šç”¨ã€‚è¿™ä¸ªéœ€æ±‚æ˜¯åˆç†çš„ï¼Œè€Œä¸”æ˜¯å¾ˆç®€å•çš„é…ç½®å°±å¯ä»¥å®ç°çš„ï¼Œæœ¬æ–‡å°±æ¥æ€»ç»“ä¸€ä¸‹IDEAé…ç½®å¼€å‘Golangå’ŒPythonçš„æ–¹æ³•ã€‚


JavaIDEAæœ¬èº«å°±æ˜¯é€‚ç”¨äºJavaå¼€å‘çš„ï¼Œå…·ä½“é…ç½®æ–¹æ³•å¯ä»¥å‚è€ƒã€ŠIDEAçš„å¸¸ç”¨é…ç½®ã€‹å’Œã€Šä½¿ç”¨IDEAæ–°å»ºMaven JavaWebé¡¹ç›®ã€‹ã€‚
æ­¤å¤–ï¼ŒIDEAè¿˜æ”¯æŒAndroidå¼€å‘ï¼Œå¯ä»¥å‚è€ƒã€ŠAndroidå¼€å‘â€”â€”Android Studioã€‹è¿›è¡Œé…ç½®ã€‚
Golang1ã€èœå•æ ï¼ŒIntelliJ IDEAï¼ŒPreferencesâ€¦ã€‚2ã€Pluginsï¼Œæœç´¢Goï¼Œæ‰¾åˆ°Goæ’ä»¶å¹¶å®‰è£…ã€‚This plugin extends IntelliJ platform with Go-specific coding assistance and tool integrations, and has everything you could find in GoLand.3ã€é‡å¯IDEAã€‚èœå•æ ï¼ŒIntelliJ IDEAï¼ŒPreferencesâ€¦ã€‚4ã€Languages &amp; Frameworksï¼ŒGoã€‚5ã€é…ç½®å¥½GOROOTå’ŒGOPATHã€‚
ä¸Šé¢çš„IDEAé…ç½®ï¼Œå’ŒGolandå‡ ä¹ç›¸åŒï¼Œç„¶åå°±å¯ä»¥åƒGolandä¸€æ ·å¼€å‘Goè¯­è¨€ç¨‹åºäº†ã€‚
Goé¡¹ç›®Debugçš„é…ç½®æ–¹æ³•ï¼Œå‚è€ƒã€Šbeegoå…¥é—¨ç¯‡â€”â€”ä¸‹ã€‹ä¸­çš„è°ƒè¯•ä¸€èŠ‚ã€‚
Pythoné…ç½®æ–¹æ³•å‚è€ƒConfigure a Python SDKã€‚
1ã€èœå•æ ï¼ŒIntelliJ IDEAï¼ŒPreferencesâ€¦ã€‚2ã€Pluginsï¼Œæœç´¢Pythonï¼Œæ‰¾åˆ°Pythonæ’ä»¶å¹¶å®‰è£…ã€‚The Python plug-in provides smart editing for Python scripts. The feature set of the plugin corresponds to PyCharm IDE Professional Edition.3ã€é‡å¯IDEAã€‚èœå•æ ï¼ŒFileï¼ŒProject Structureâ€¦ã€‚4ã€Platform Settingsï¼ŒåŠ å·ï¼ŒAdd Python SDKâ€¦ã€‚5ã€Project Settingsï¼ŒProject SDKï¼Œé€‰æ‹©æ–°æ·»åŠ çš„Python SDKã€‚
ä¸Šé¢çš„IDEAé…ç½®ï¼Œå’ŒPyCharmæœ‰æ‰€ä¸åŒã€‚PyCharmä¸­çš„Python SDKé…ç½®ï¼Œä½ç½®åœ¨Preferencesï¼ŒProject: project_nameã€‚
Pythoné¡¹ç›®Debugçš„é…ç½®æ–¹æ³•ï¼Œå‚è€ƒã€ŠPyCharmè°ƒè¯•ã€‹ã€‚ä¸åŒçš„æ˜¯ï¼Œå¦‚æœDebug Configurationsçª—å£ç‚¹å‡»åŠ å·ï¼Œç¬¬ä¸€çœ¼çœ‹ä¸åˆ°Pythonï¼Œé‚£ä¹ˆPythonåœ¨Otherå±‚çº§ä¸‹ã€‚
åè®°ä»¥ä¸Šï¼ŒIDEAå°±æˆäº†ä¸€ä¸ªå…¨èƒ½IDEï¼Œå¯ä»¥å¼€å‘Javaã€Golangå’ŒPythonã€‚å¦‚æœéœ€è¦æ”¯æŒå…¶ä»–è¯­è¨€ï¼ŒåŒæ ·çš„æ–¹æ³•ï¼ŒæŸ¥æ‰¾å¹¶å®‰è£…æ’ä»¶å³å¯ã€‚Golandå’ŒPyCharmå¯ä»¥å¸è½½äº†ï¼Œniceã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
        <category>golang</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>golang</tag>
        <tag>ç¼–è¾‘å™¨</tag>
        <tag>java</tag>
        <tag>idea</tag>
      </tags>
  </entry>
  <entry>
    <title>æ›´å¥½çš„ git commit message</title>
    <url>/dev-git-commit-message/</url>
    <content><![CDATA[è¿˜å¯ä»¥æ›´å¥½ä½¿ç”¨gitå¾ˆå¤šå¹´ï¼Œä¹Ÿæäº¤äº†å¾ˆå¤šä»£ç ï¼Œè‡ªä»¥ä¸ºä½¿ç”¨ä¹ æƒ¯è‰¯å¥½ã€‚å› ä¸ºæ¯æ¬¡æäº¤ä»£ç ï¼Œæˆ‘éƒ½ä¼šåœ¨git commit messageä¸­è¯´æ˜æ¸…æ¥šä¿®æ”¹çš„å†…å®¹ã€‚ä½†æ˜¯ï¼Œå¶ç„¶é—´è¯»åˆ°ä¸€äº›å…³äºcommit messageçš„æ–‡ç« ï¼Œæ‰å‘ç°è¿˜æœ‰å¾ˆå¤šè¿›æ­¥çš„ç©ºé—´ã€‚
æœ¬æ–‡å°±æ¥å­¦ä¹ ä¸€ä¸‹ç¼–å†™æ›´é«˜è´¨é‡çš„æäº¤ä¿¡æ¯ï¼Œä¸»è¦å‚è€ƒï¼š

Commit message å’Œ Change log ç¼–å†™æŒ‡å—
ä¼˜é›…çš„æäº¤ä½ çš„ Git Commit Message 
Conventional Commits
ä½ å¯èƒ½å·²ç»å¿½ç•¥çš„ git commit è§„èŒƒ



çº¦å®šå¼æäº¤ç®€ä»‹çº¦å®šå¼æäº¤è§„èŒƒæ˜¯ä¸€ç§åŸºäºæäº¤æ¶ˆæ¯çš„è½»é‡çº§çº¦å®šã€‚å®ƒæä¾›äº†ä¸€ç»„ç”¨äºåˆ›å»ºæ¸…æ™°çš„æäº¤å†å²çš„ç®€å•è§„åˆ™ï¼›è¿™ä½¿å¾—ç¼–å†™åŸºäºè§„èŒƒçš„è‡ªåŠ¨åŒ–å·¥å…·å˜å¾—æ›´å®¹æ˜“ã€‚ è¿™ä¸ªçº¦å®šä¸ SemVer ç›¸å»åˆï¼Œ åœ¨æäº¤ä¿¡æ¯ä¸­æè¿°æ–°ç‰¹æ€§ã€bug ä¿®å¤å’Œç ´åæ€§å˜æ›´ã€‚
çº¦å®šå¼æäº¤ä¼˜ç‚¹ï¼š

è‡ªåŠ¨åŒ–ç”Ÿæˆ CHANGELOGã€‚
åŸºäºæäº¤çš„ç±»å‹ï¼Œè‡ªåŠ¨å†³å®šè¯­ä¹‰åŒ–çš„ç‰ˆæœ¬å˜æ›´ã€‚
å‘åŒäº‹ã€å…¬ä¼—ä¸å…¶ä»–åˆ©ç›Šå…³ç³»è€…ä¼ è¾¾å˜åŒ–çš„æ€§è´¨ã€‚
è§¦å‘æ„å»ºå’Œéƒ¨ç½²æµç¨‹ã€‚
è®©äººä»¬æ¢ç´¢ä¸€ä¸ªæ›´åŠ ç»“æ„åŒ–çš„æäº¤å†å²ï¼Œä»¥ä¾¿é™ä½å¯¹ä½ çš„é¡¹ç›®åšå‡ºè´¡çŒ®çš„éš¾åº¦ã€‚

ä½¿ç”¨è¯´æ˜æäº¤è¯´æ˜çš„ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š
&lt;ç±»å‹&gt;[å¯é€‰çš„ä½œç”¨åŸŸ]: &lt;æè¿°&gt;[å¯é€‰çš„æ­£æ–‡][å¯é€‰çš„è„šæ³¨]

æäº¤æ–¹æ³•ï¼š
git commit -m &quot;dquote&gt; &lt;ç±»å‹&gt;[å¯é€‰çš„ä½œç”¨åŸŸ]: &lt;æè¿°&gt;dquote&gt;dquote&gt; [å¯é€‰çš„æ­£æ–‡]dquote&gt;dquote&gt; [å¯é€‰çš„è„šæ³¨]dquote&gt; &quot;

æäº¤è¯´æ˜åŒ…å«äº†ä¸‹é¢çš„ç»“æ„åŒ–å…ƒç´ ï¼Œä»¥å‘ç±»åº“ä½¿ç”¨è€…è¡¨æ˜å…¶æ„å›¾ï¼š



ç±»å‹
æè¿°



fix
åœ¨ä»£ç åº“ä¸­ä¿®å¤äº†ä¸€ä¸ª bugï¼ˆè¿™å’Œè¯­ä¹‰åŒ–ç‰ˆæœ¬ä¸­çš„ PATCH ç›¸å¯¹åº”ï¼‰ã€‚


feat
åœ¨ä»£ç åº“ä¸­æ–°å¢äº†ä¸€ä¸ªåŠŸèƒ½ï¼ˆè¿™å’Œè¯­ä¹‰åŒ–ç‰ˆæœ¬ä¸­çš„ MINOR ç›¸å¯¹åº”ï¼‰ã€‚


docs
æ–‡æ¡£ç›¸å…³çš„æ”¹åŠ¨ã€‚


refactor
é‡æ„


improvement
æ€§èƒ½æå‡


test
æµ‹è¯•ç”¨ä¾‹ä¿®æ”¹


style
ä»£ç æ ¼å¼ä¿®æ”¹, æ³¨æ„ä¸æ˜¯ css ä¿®æ”¹


chore
å…¶ä»–ä¿®æ”¹, æ¯”å¦‚æ„å»ºæµç¨‹, ä¾èµ–ç®¡ç†ã€‚


Close
åœ¨å¯é€‰çš„æ­£æ–‡æˆ–è„šæ³¨çš„èµ·å§‹ä½ç½®ï¼Œå…³é—­issue


BREAKING CHANGE
åœ¨å¯é€‰çš„æ­£æ–‡æˆ–è„šæ³¨çš„èµ·å§‹ä½ç½®ï¼Œè¡¨ç¤ºå¼•å…¥äº†ç ´åæ€§ API å˜æ›´ï¼ˆè¿™å’Œè¯­ä¹‰åŒ–ç‰ˆæœ¬ä¸­çš„ MAJOR ç›¸å¯¹åº”ï¼‰ã€‚ ç ´åæ€§å˜æ›´å¯ä»¥æ˜¯ä»»æ„ç±»å‹æäº¤çš„ä¸€éƒ¨åˆ†ã€‚






ä»¥ä¸Šç±»å‹éƒ½æ˜¯å¯é€‰çš„ï¼Œå…¶ä»–ç±»å‹ä¹Ÿè¢«å…è®¸ï¼Œæ ¹æ®éœ€è¦å®šä¹‰é¡¹ç›®çš„æäº¤è§„èŒƒå°±å¥½ã€‚å¹¶ä¸”åœ¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ä¸­æ²¡æœ‰éšå¼çš„å½±å“ï¼ˆé™¤éä»–ä»¬åŒ…å« BREAKING CHANGEï¼‰ã€‚



å¯ä»¥ä¸ºæäº¤ç±»å‹æ·»åŠ ä¸€ä¸ªå›´åœ¨åœ†æ‹¬å·å†…çš„ä½œç”¨åŸŸï¼Œä»¥ä¸ºå…¶æä¾›é¢å¤–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š



feat(parser): adds ability to parse arrays.

å¯ä»¥åœ¨ç±»å‹/ä½œç”¨åŸŸå‰ç¼€ä¹‹åï¼Œ: ä¹‹å‰ï¼Œé™„åŠ  ! å­—ç¬¦ï¼Œä»¥è¿›ä¸€æ­¥æé†’æ³¨æ„ç ´åæ€§å˜æ›´ã€‚å½“æœ‰ ! å‰ç¼€æ—¶ï¼Œæ­£æ–‡æˆ–è„šæ³¨å†…å¿…é¡»åŒ…å« BREAKING CHANGE: description
çº¦å®šå¼æäº¤å’Œ SemVer çš„å…³è”ï¼šfix ç±»å‹æäº¤åº”å½“å¯¹åº”åˆ° PATCH ç‰ˆæœ¬ã€‚feat ç±»å‹æäº¤åº”è¯¥å¯¹åº”åˆ° MINOR ç‰ˆæœ¬ã€‚å¸¦æœ‰ BREAKING CHANGE çš„æäº¤ä¸ç®¡ç±»å‹å¦‚ä½•ï¼Œéƒ½åº”è¯¥å¯¹åº”åˆ° MAJOR ç‰ˆæœ¬ã€‚
å‚è€ƒ
yargsï¼šå¹¿å—æ¬¢è¿çš„å‘½ä»¤è¡Œå‚æ•°è§£æå™¨ã€‚
istanbuljsï¼šä¸€å¥—ä¸º JavaScript æµ‹è¯•ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡çš„å¼€æºå·¥å…·å’Œç±»åº“ã€‚
massive.jsï¼šä¸€ä¸ªç”¨äº Node å’Œ PostgreSQL çš„æ•°æ®è®¿é—®ç±»åº“ã€‚
electronï¼šç”¨ JavaScriptã€HTML å’Œ CSS æ„å»ºè·¨å¹³å°åº”ç”¨ã€‚
scroll-utilityï¼šä¸€ä¸ªå±…ä¸­å…ƒç´ å’Œå¹³æ»‘åŠ¨ç”»çš„æ»šå±å·¥å…·åŒ…å®ä¾‹ã€‚
Blaze UIï¼šæ— æ¡†æ¶å¼€æº UI å¥—ä»¶ã€‚
Monicaï¼šä¸€ä¸ªå¼€æºçš„äººé™…å…³ç³»ç®¡ç†ç³»ç»Ÿã€‚
mhyï¼šä¸€ä¸ªé›¶é…ç½®ã€å¼€ç®±å³ç”¨çš„ã€å¤šç”¨é€”å·¥å…·ç®±ä¸å¼€å‘ç¯å¢ƒã€‚
sharecï¼šä¸€ä¸ªç”¨äºæ¨¡æ¿å’Œé…ç½®æ–‡ä»¶ç‰ˆæœ¬åŒ–çš„æç®€å·¥å…·ã€‚

æäº¤å¸®åŠ©å·¥å…·git commitæç¤º1ã€ä¿®æ”¹ ~/.gitconfig ï¼Œæ·»åŠ 
[commit]template = ~/.gitmessage

2ã€æ–°å»º ~/.gitmessage ï¼Œå†…å®¹ä¸º
# head: &lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;# - type: feat, fix, docs, style, refactor, test, chore# - scope: can be empty (eg. if the change is a global or difficult to assign to a single component)# - subject: start with verb (such as &#x27;change&#x27;), 50-character line## body: 72-character wrapped. This should answer:# * Why was this change necessary?# * How does it address the problem?# * Are there any side effects?## footer: # - Include a link to the ticket, if any.# - BREAKING CHANGE#

3ã€ä½¿ç”¨æç¤ºgit commit
commitizenå‚è€ƒ commitizen/cz-cli ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>K8Sä¸­çš„ç½‘ç»œç­–ç•¥</title>
    <url>/dev-k8s-network-policy/</url>
    <content><![CDATA[æ€æ ·é™åˆ¶Podä¸­çš„ç½‘ç»œæµé‡ï¼Ÿå·²çŸ¥podåä¸º webapp ï¼Œlabelä¸º name=webapp ã€‚ç°åœ¨æƒ³è¦æ¨¡æ‹Ÿæ— æ³•è®¿é—®æ•°æ®åº“ï¼Œé™åˆ¶å®ƒçš„æµé‡ï¼Œç¦æ­¢å®ƒè®¿é—® 10.0.0.0/24 ç½‘æ®µçš„æ‰€æœ‰3306ç«¯å£ï¼Œè¯¥æ€ä¹ˆå®ç°ï¼Ÿ
æ–¹æ³•ä¸€ï¼šä½¿ç”¨NetworkPolicyé™æµæ–¹æ³•äºŒï¼šå¼€å¯podç‰¹æƒæ¨¡å¼ï¼Œåœ¨podå†…éƒ¨ä½¿ç”¨iptablesé™æµæ–¹æ³•ä¸‰ï¼šç™»å½•podæ‰€åœ¨å®¿ä¸»æœºï¼Œåœ¨podæ‰€åœ¨nsä¸­ä½¿ç”¨iptablesé™æµ


NetworkPolicyç½‘ç»œç­–ç•¥ï¼ˆNetworkPolicyï¼‰æ˜¯ä¸€ç§å…³äº Pod é—´åŠä¸å…¶ä»–ç½‘ç»œç«¯ç‚¹é—´æ‰€å…è®¸çš„é€šä¿¡è§„åˆ™çš„è§„èŒƒã€‚NetworkPolicy èµ„æºä½¿ç”¨ æ ‡ç­¾ é€‰æ‹© Podï¼Œå¹¶å®šä¹‰é€‰å®š Pod æ‰€å…è®¸çš„é€šä¿¡è§„åˆ™ã€‚
ç½‘ç»œç­–ç•¥é€šè¿‡ç½‘ç»œæ’ä»¶æ¥å®ç°ã€‚è¦ä½¿ç”¨ç½‘ç»œç­–ç•¥ï¼Œç”¨æˆ·å¿…é¡»ä½¿ç”¨æ”¯æŒ NetworkPolicy çš„ç½‘ç»œè§£å†³æ–¹æ¡ˆã€‚åˆ›å»ºä¸€ä¸ªèµ„æºå¯¹è±¡ï¼Œè€Œæ²¡æœ‰æ§åˆ¶å™¨æ¥ä½¿å®ƒç”Ÿæ•ˆçš„è¯ï¼Œæ˜¯æ²¡æœ‰ä»»ä½•ä½œç”¨çš„ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼ŒPod æ˜¯ééš”ç¦»çš„ï¼Œå®ƒä»¬æ¥å—ä»»ä½•æ¥æºçš„æµé‡ã€‚Pod å¯ä»¥é€šè¿‡ç›¸å…³çš„ç½‘ç»œç­–ç•¥è¿›è¡Œéš”ç¦»ã€‚ä¸€æ—¦å‘½åç©ºé—´ä¸­æœ‰ç½‘ç»œç­–ç•¥é€‰æ‹©äº†ç‰¹å®šçš„ Podï¼Œè¯¥ Pod ä¼šæ‹’ç»ç½‘ç»œç­–ç•¥æ‰€ä¸å…è®¸çš„è¿æ¥ã€‚ (å‘½åç©ºé—´ä¸‹å…¶ä»–æœªè¢«ç½‘ç»œç­–ç•¥æ‰€é€‰æ‹©çš„ Pod ä¼šç»§ç»­æ¥æ”¶æ‰€æœ‰çš„æµé‡)ç½‘ç»œç­–ç•¥ä¸ä¼šå†²çªï¼Œå®ƒä»¬æ˜¯é™„åŠ çš„ã€‚å¦‚æœä»»ä½•ä¸€ä¸ªæˆ–å¤šä¸ªç­–ç•¥é€‰æ‹©äº†ä¸€ä¸ª Pod, åˆ™è¯¥ Pod å—é™äºè¿™äº›ç­–ç•¥çš„ ingress/egress è§„åˆ™çš„å¹¶é›†ã€‚å› æ­¤è¯„ä¼°çš„é¡ºåºå¹¶ä¸ä¼šå½±å“ç­–ç•¥çš„ç»“æœã€‚
æ›´å¤šå†…å®¹å‚è€ƒç½‘ç»œç­–ç•¥å’ŒNetworkPolicyæœ€ä½³å®è·µã€‚
åŸºç¡€è§„åˆ™ï¼š

å¦‚æœ Pod æ²¡æœ‰è¢« NetworkPolicy åŒ¹é…åˆ°ï¼Œé‚£ä¹ˆå®ƒçš„æµé‡æ˜¯è¢«å…è®¸çš„ 
å¦‚æœ Pod è¢« NetworkPolicy åŒ¹é…åˆ°ï¼Œä½†æ˜¯æ²¡æœ‰å‡ºå£/å…¥å£è§„åˆ™è¢«åŒ¹é…åˆ°ï¼Œé‚£ä¹ˆå®ƒçš„å‡ºå£/å…¥å£æµé‡æ˜¯è¢«ç¦æ­¢çš„
åªèƒ½æŒ‡å®šè§„åˆ™æ¥å…è®¸æµé‡é€šè¡Œï¼Œè€Œä¸èƒ½ç›´æ¥ç¦æ­¢æµé‡é€šè¡Œ
NetworkPolicy ä¸­çš„ Rule ä¹‹é—´çš„åŒ¹é…é€»è¾‘æ˜¯ OR
NetworkPolicy é»˜è®¤çš„ä½œç”¨åŸŸæ˜¯ Pod æ‰€åœ¨çš„ Namespace

1ã€åˆ›å»ºnp.yaml
apiVersion: networking.k8s.io/v1kind: NetworkPolicymetadata:  name: webapp-network-policy  namespace: defaultspec:  podSelector:    matchLabels:      name: webapp  policyTypes:  - Ingress  - Egress  ingress:  - &#123;&#125;  egress:  - to:    - ipBlock:        cidr: 0.0.0.0/0        except:         - 10.0.0.0/24

è¿™ç§å®ç°æ–¹å¼ï¼Œå…¶å®æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯é™æµæ—¶ä¸æ­¢é™åˆ¶äº†3306ç«¯å£ï¼Œè¿˜é™åˆ¶äº† 10.0.0.0/24 ç½‘æ®µçš„æ‰€æœ‰ç«¯å£ã€‚èƒ½ä¸èƒ½åªé™åˆ¶ 10.0.0.0/24 ç½‘æ®µçš„ 3306 ç«¯å£å‘¢ï¼Ÿç†è®ºä¸Šå¯ä»¥å®ç°ï¼Œç„¶è€Œæˆ‘ä¸ä¼šã€‚ã€‚ã€‚
2ã€æ‰§è¡Œé™æµ
kubectl apply -f np.yaml

3ã€è§£é™¤é™æµ
kubectl delete -f np.yaml

podç‰¹æƒæ¨¡å¼é™æµ1ã€åœ¨podå®šä¹‰ä¸­æ·»åŠ ï¼š
securityContext:  privileged: true  #runAsUser: 0

2ã€åœ¨podå†…éƒ¨æ‰§è¡Œé™æµ
iptables -A OUTPUT -p tcp --dport 3306 -j DROP

3ã€è§£é™¤é™æµ
iptables -t nat -nL --line-numberiptables -D OUTPUT 1

å®¿ä¸»æœºé™æµ1ã€ç™»å½•å®¿ä¸»æœº
2ã€æŸ¥æ‰¾å®¹å™¨pid
docker ps | grep webappdocker inspect &lt;container_id&gt; | grep pid -i

3ã€æ‰§è¡Œé™æµ
nsenter -t &lt;pid&gt; -n iptables -A OUTPUT -p tcp --dport 3306 -j DROP

4ã€è§£é™¤é™æµ
nsenter -t &lt;pid&gt; -n iptables -t nat -nL --line-numbernsenter -t 8993 -n iptables -D OUTPUT 1


]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>network</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>jqå‘½ä»¤çš„å®‰è£…ä½¿ç”¨</title>
    <url>/dev-jq-command/</url>
    <content><![CDATA[jqå‘½ä»¤ç®€ä»‹jq æ˜¯ä¸€æ¬¾å‘½ä»¤è¡Œä¸‹å¤„ç† JSON æ•°æ®çš„å·¥å…·ã€‚å…¶å¯ä»¥æ¥å—æ ‡å‡†è¾“å…¥ï¼Œå‘½ä»¤ç®¡é“æˆ–è€…æ–‡ä»¶ä¸­çš„ JSON æ•°æ®ï¼Œç»è¿‡ä¸€ç³»åˆ—çš„è¿‡æ»¤å™¨(filters)å’Œè¡¨è¾¾å¼çš„è½¬åå½¢æˆæˆ‘ä»¬éœ€è¦çš„æ•°æ®ç»“æ„å¹¶å°†ç»“æœè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºä¸­ã€‚jq çš„è¿™ç§ç‰¹æ€§ä½¿æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨ Shell è„šæœ¬ä¸­è°ƒç”¨å®ƒã€‚
æ›´å¤šå†…å®¹ï¼Œå‚è€ƒ å‘½ä»¤è¡Œ JSON å¤„ç†å·¥å…· jq çš„ä½¿ç”¨ä»‹ç»ã€‚


å®‰è£…jqmacosbrew install jq

linuxé€šç”¨å®‰è£…wget https://github.com/stedolan/jq/releases/download/jq-1.6/jq-linux64chmod a+x jq-linux64 &amp;&amp; mv jq-linux64 /usr/bin/jq

centosyum install epel-releaseyum install jq

ubuntuapt updateapt install -y jq

jqè¡¨è¾¾å¼ä¸¾ä¸ªæ —å­echo &#x27;&#123;&quot;name&quot;:&quot;voidking&quot;&#125;&#x27; | jq .echo &#x27;&#123;&quot;name&quot;:&quot;voidking&quot;&#125;&#x27; | jq .nameecho &#x27;&#123;&quot;name&quot;:&quot;voidking&quot;&#125;&#x27; | jq -r .nameecho &#x27;&#123;&quot;name&quot;:&quot;voidking&quot;&#125;&#x27; | jq -c

ç”¨æˆ·åœ¨ä½¿ç”¨jqæ—¶ï¼Œéœ€è¦ä½¿ç”¨jqæ”¯æŒçš„è¯­æ³•æ¥æ„å»ºè¡¨è¾¾å¼(filters)å¹¶å°†å…¶ä¼ ç»™jqã€‚jqæ ¹æ®è¯­æ³•è§„åˆ™è§£æè¡¨è¾¾å¼ï¼Œå¹¶åº”ç”¨åœ¨è¾“å…¥çš„JSONæ•°æ®ä¸Šä»è€Œå¾—åˆ°éœ€è¦çš„ç»“æœã€‚
ä¸Šé¢ä¾‹å­ä¸­çš„ . å’Œ .name å°±æ˜¯è¡¨è¾¾å¼ã€‚. ç¬¦å·è¡¨ç¤ºå¯¹è¡¨è¾¾å¼è¾“å…¥çš„æ•´ä¸ªJSONå¯¹è±¡çš„å¼•ç”¨ï¼Œ.nameå’Œ.name?è¡¨ç¤ºè·å–JSONå¯¹è±¡çš„å±æ€§ã€‚å½“è¾“å…¥ä¸æ˜¯JSONå¯¹è±¡æˆ–æ•°ç»„æ—¶ï¼Œå¸¦ç€é—®å·çš„æ–¹å¼ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚
é€‰é¡¹çš„å«ä¹‰æŸ¥çœ‹jqå¸®åŠ©å³å¯ï¼Œæ¯”å¦‚-rè¡¨ç¤ºè¾“å‡ºrawæ ¼å¼å†…å®¹ï¼Œ-cè¡¨ç¤ºå»ç©ºæ ¼å’Œæ¢è¡Œå‹ç¼©è¾“å‡ºã€‚
ä¸²è¡Œæ“ä½œecho &#x27;&#123;&quot;name&quot;:&#123;&quot;firstname&quot;:&quot;Void&quot;,&quot;lastname&quot;:&quot;King&quot;&#125;&#125;&#x27; | jq .name.firstnameecho &#x27;&#123;&quot;name&quot;:&#123;&quot;firstname&quot;:&quot;Void&quot;,&quot;lastname&quot;:&quot;King&quot;&#125;&#125;&#x27; | jq &#x27;.name | .firstname&#x27;echo &#x27;&#123;&quot;name&quot;:&#123;&quot;firstname&quot;:&quot;Void&quot;,&quot;lastname&quot;:&quot;King&quot;&#125;&#125;&#x27; | jq &#x27;.name | .firstname,.lastname&#x27;echo &#x27;[&#123;&quot;firstname&quot;:&quot;Void&quot;,&quot;lastname&quot;:&quot;King&quot;&#125;,&#123;&quot;firstname&quot;:&quot;Hao&quot;,&quot;lastname&quot;:&quot;Jin&quot;&#125;]&#x27; | jq &#x27;.[] | .firstname,.lastname&#x27; | sed -n &quot;N;s/\n/ /p&quot;

jqè¡¨è¾¾å¼æ”¯æŒä¸²è¡ŒåŒ–æ“ä½œã€‚ä¸€ä¸ªå¤æ‚çš„è¡¨è¾¾å¼å¯ä»¥ç”±å¤šä¸ªç®€å•çš„è¡¨è¾¾å¼ç»„æˆï¼Œä»¥ç®¡é“ç¬¦å· | åˆ†å‰²ï¼Œä¸²è¡ŒåŒ–æ‰§è¡Œã€‚ç®¡é“å‰é¢è¡¨è¾¾å¼çš„è¾“å‡ºï¼Œæ˜¯ç®¡é“åé¢è¡¨è¾¾å¼çš„è¾“å…¥ã€‚
é€—å· , è¡¨ç¤ºå¯¹åŒä¸€ä¸ªè¾“å…¥åº”ç”¨å¤šä¸ªè¡¨è¾¾å¼ã€‚
æ•°ç»„æ“ä½œecho &#x27;[&#123;&quot;name&quot;:&quot;voidking&quot;&#125;,&#123;&quot;name&quot;:&quot;haojin&quot;&#125;]&#x27; | jq .echo &#x27;[&#123;&quot;name&quot;:&quot;voidking&quot;&#125;,&#123;&quot;name&quot;:&quot;haojin&quot;&#125;]&#x27; | jq &#x27;.[]&#x27;echo &#x27;[&#123;&quot;name&quot;:&quot;voidking&quot;&#125;,&#123;&quot;name&quot;:&quot;haojin&quot;&#125;]&#x27; | jq &#x27;.[0:2]&#x27;echo &#x27;[&#123;&quot;name&quot;:&quot;voidking&quot;&#125;,&#123;&quot;name&quot;:&quot;haojin&quot;&#125;]&#x27; | jq &#x27;.[0,1]&#x27;echo &#x27;[&#123;&quot;name&quot;:&quot;voidking&quot;&#125;,&#123;&quot;name&quot;:&quot;haojin&quot;&#125;]&#x27; | jq &#x27;.[].name&#x27;echo &#x27;[&#123;&quot;name&quot;:&quot;voidking&quot;&#125;,&#123;&quot;name&quot;:&quot;haojin&quot;&#125;]&#x27; | jq &#x27;.[] | .name&#x27;echo &#x27;[&#123;&quot;name&quot;:&quot;voidking&quot;&#125;,&#123;&quot;name&quot;:&quot;haojin&quot;&#125;]&#x27; | jq &#x27;.[] | .[&quot;name&quot;]&#x27;

jq æä¾›ä¸‰ç§åŸºç¡€è¡¨è¾¾å¼æ¥æ“ä½œæ•°ç»„ï¼šè¿­ä»£å™¨æ“ä½œ.[]ï¼Œè¯¥è¡¨è¾¾å¼çš„è¾“å…¥å¯ä»¥æ˜¯æ•°ç»„æˆ–è€…JSONå¯¹è±¡ï¼Œè¾“å‡ºçš„æ˜¯åŸºäºæ•°ç»„å…ƒç´ æˆ–è€…JSONå¯¹è±¡å±æ€§å€¼çš„è¿­ä»£å™¨ï¼ˆiteratorï¼‰ã€‚è®¿é—®ç‰¹å®šå…ƒç´ çš„æ“ä½œ.[index]æˆ–.[&quot;attributename&quot;]ã€‚ç”¨æ¥è®¿é—®æ•°ç»„å…ƒç´ æˆ–è€…JSONå¯¹è±¡çš„å±æ€§å€¼ï¼Œè¾“å‡ºæ˜¯å•ä¸ªå€¼ã€‚æ•°ç»„åˆ‡ç‰‡æ“ä½œ.[startindex:endindex]&#39;ï¼Œå…¶è¡Œä¸ºç±»ä¼¼äº python è¯­è¨€ä¸­æ•°ç»„åˆ‡ç‰‡æ“ä½œã€‚
ä¸€ä¸ªè¡¨è¾¾å¼äº§ç”Ÿçš„ç»“æœæ˜¯è¿­ä»£å™¨æ—¶ï¼Œè¿­ä»£å™¨çš„æ¯ä¸€ä¸ªå€¼ä¼šåˆ†åˆ«ä½œä¸ºçš„è¾“å…¥ï¼Œä¼ ç»™åé¢çš„è¡¨è¾¾å¼ã€‚
jqè¿ç®—echo &#x27;&#123;&quot;num&quot;:3,&quot;str&quot;:&quot;343&quot;&#125;&#x27; | jq &#x27;.num*3&#x27;echo &#x27;&#123;&quot;num&quot;:3,&quot;str&quot;:&quot;343&quot;&#125;&#x27; | jq &#x27;.num/3&#x27;echo &#x27;&#123;&quot;num&quot;:3,&quot;str&quot;:&quot;343&quot;&#125;&#x27; | jq &#x27;.str+&quot;3&quot;&#x27;echo &#x27;&#123;&quot;num&quot;:3,&quot;str&quot;:&quot;343&quot;&#125;&#x27; | jq &#x27;.str*3&#x27;echo &#x27;&#123;&quot;num&quot;:3,&quot;str&quot;:&quot;343&quot;&#125;&#x27; | jq &#x27;.str/&quot;4&quot;&#x27;echo &#x27;[&#123;&quot;name&quot;:&quot;voidking&quot;&#125;,&#123;&quot;name&quot;:&quot;haojin&quot;&#125;]&#x27; | jq &#x27;.+[&#123;&quot;name&quot;:&quot;voidking&quot;&#125;]&#x27;echo &#x27;[&#123;&quot;name&quot;:&quot;voidking&quot;&#125;,&#123;&quot;name&quot;:&quot;haojin&quot;&#125;]&#x27; | jq &#x27;.-[&#123;&quot;name&quot;:&quot;voidking&quot;&#125;]&#x27;echo &#x27;&#123;&quot;name&quot;:&#123;&quot;firstname&quot;:&quot;Void&quot;,&quot;lastname&quot;:&quot;King&quot;&#125;&#125;&#x27; | jq &#x27;.+&#123;&quot;name&quot;:&#123;&quot;nickname&quot;:&quot;Hankin&quot;&#125;&#125;&#x27;echo &#x27;&#123;&quot;name&quot;:&#123;&quot;firstname&quot;:&quot;Void&quot;,&quot;lastname&quot;:&quot;King&quot;&#125;&#125;&#x27; | jq &#x27;.*&#123;&quot;name&quot;:&#123;&quot;nickname&quot;:&quot;Hankin&quot;&#125;&#125;&#x27;echo &#x27;&#123;&quot;name&quot;:&#123;&quot;firstname&quot;:&quot;Void&quot;,&quot;lastname&quot;:&quot;King&quot;&#125;&#125;&#x27; | jq &#x27;.name.nickname//&quot;Hankin&quot;&#x27;jq -n &#x27;([1,2]|.[])+([4,6]|.[])&#x27;

jq å†…éƒ¨æ”¯æŒçš„æ•°æ®ç±»å‹æœ‰ï¼šæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œæ•°ç»„å’Œå¯¹è±¡(object)ã€‚
æ•°å­—è¿ç®—ï¼šjqæ”¯æŒåŠ å‡ä¹˜é™¤(/)å’Œæ±‚ä½™(%)è¿ç®—ã€‚å­—ç¬¦ä¸²è¿ç®—ï¼šjq æä¾›å­—ç¬¦ä¸²çš„è¿æ¥ã€å¤åˆ¶ã€åˆ†å‰²è¿ç®—ã€‚æ•°ç»„è¿ç®—ï¼šå¹¶é›†ã€å·®é›†è¿ç®—ã€‚å¯¹è±¡è¿ç®—ï¼šåˆå¹¶ã€‚æ¯”è¾ƒè¿ç®—ï¼šjq å†…éƒ¨æ”¯æŒçš„æ¯”è¾ƒè¿ç®—ï¼Œè§„åˆ™ä¸jsåŸºæœ¬ç›¸åŒã€‚é€»è¾‘è¿ç®—: and/or/notã€‚åœ¨ jq é€»è¾‘è¿ç®—ä¸­ï¼Œé™¤äº† false å’Œ null å¤–ï¼Œå…¶ä½™çš„ä»»ä½•å€¼éƒ½ç­‰åŒäº trueã€‚é»˜è®¤å€¼è¿ç®—ç¬¦ï¼šåŒæ–œæ ã€‚è¿­ä»£å™¨è¿ç®—ï¼šæ¯ä¸€ä¸ªå…ƒç´ æ‹¿å‡ºæ¥åˆ†åˆ«è¿ç®—ã€‚
jqå‡½æ•°jq æ”¯æŒå‡½æ•°ã€‚åœ¨ä½¿ç”¨ jq å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥æ³¨æ„åŒºåˆ†ä¸¤ä¸ªæ¦‚å¿µï¼šè¾“å…¥å’Œå‚æ•°ã€‚è¾“å…¥å¯èƒ½æ˜¯æ•´ä¸ªè¡¨è¾¾å¼çš„è¾“å…¥æ•°æ®ä¹Ÿå¯èƒ½æ˜¯è¡¨è¾¾å¼åˆ«çš„éƒ¨åˆ†çš„è¾“å‡ºã€‚è€Œå‚æ•°å’Œå‡½æ•°ä¸€èµ·æ„æˆæ–°çš„filteræ¥å¤„ç†è¾“å…¥ã€‚å’Œå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸åŒçš„æ˜¯ï¼Œåœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¤šä¸ªå‚æ•°ä¹‹é—´ä»¥åˆ†å·åˆ†éš”ã€‚jqé€šè¿‡å†…ç½®å‡½æ•°æä¾›äº†æ•°æ®å¤„ç†æ—¶å¸¸ç”¨çš„æ“ä½œï¼Œä¾‹å¦‚ï¼šåˆ é™¤ã€æ˜ å°„ï¼Œè¿‡æ»¤ã€è·¯å¾„æ“ä½œç­‰ã€‚
åˆ é™¤echo &#x27;&#123;&quot;name&quot;:&#123;&quot;firstname&quot;:&quot;Void&quot;,&quot;lastname&quot;:&quot;King&quot;&#125;&#125;&#x27; | jq &#x27;del(.name.firstname)&#x27;
åˆ é™¤ä¸éœ€è¦çš„å…ƒç´ ã€‚
æ˜ å°„echo &#x27;[1,2,3,4]&#x27;| jq -r &#x27;map(.+1)&#x27;

åœ¨æ•°æ®å¤„ç†è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å°†æ•°æ®ä»ä¸€ç§å½¢å¼è½¬æ¢æˆå¦å¤–ä¸€ç§å½¢å¼ï¼Œæˆ–è€…æ”¹å˜æ•°æ®çš„å€¼ã€‚jqæä¾›äº†ä¸¤ä¸ªå†…ç½®æ˜ å°„å‡½æ•°æ¥å®ç°è¿™ç§è½¬æ¢ï¼šmap å’Œ map_valuesã€‚å…¶ä¸­ï¼Œmapå¤„ç†çš„å¯¹è±¡æ˜¯æ•°ç»„ï¼Œè€Œmap_valuesåˆ™å¤„ç†å¯¹è±¡å±æ€§çš„å€¼ã€‚map å‡½æ•°çš„å‚æ•°ä¸º filter è¡¨è¾¾å¼ã€‚
è¿‡æ»¤echo &#x27;[1,2,3,4]&#x27;| jq -r &#x27;map(select(.&gt;2))&#x27;echo &#x27;[1,2,3,4]&#x27;| jq -r &#x27;.[]|select(.&gt;2)&#x27;echo &#x27;[&#123;&quot;name&quot;:&quot;voidking&quot;,&quot;age&quot;: 18&#125;,&#123;&quot;name&quot;:&quot;haojin&quot;,&quot;age&quot;: 28&#125;]&#x27; | jq &#x27;.[]|select(.name==&quot;haojin&quot;)&#x27;

jqä¸­æœ‰ä¸¤ç§ç±»å‹çš„é€‰æ‹©è¿‡æ»¤æ“ä½œã€‚ç¬¬ä¸€ç§æ˜¯åŸºäºæ•°æ®ç±»å‹çš„è¿‡æ»¤ï¼Œå¦‚è¡¨è¾¾å¼.[]|arraysçš„ç»“æœåªåŒ…å«æ•°ç»„ã€‚å¯ä»¥ç”¨æ¥è¿‡æ»¤çš„ç±»å‹è¿‡æ»¤å™¨æœ‰ï¼šarrays, objects, iterables, booleans, numbers, normals, finites, strings, nulls, values, scalarsã€‚ç¬¬äºŒç§æ˜¯selectå‡½æ•°ã€‚selectæ¥å—ä¸€ä¸ªæ¡ä»¶è¡¨è¾¾å¼ä½œä¸ºå‚æ•°ã€‚å…¶è¾“å…¥å¯ä»¥æ˜¯è¿­ä»£å™¨ï¼Œæˆ–è€…å’Œmapå‡½æ•°é…åˆä½¿ç”¨æ¥å¤„ç†æ•°ç»„ã€‚å½“è¾“å…¥ä¸­çš„æŸä¸ªå…ƒç´ ä½¿selectå‚æ•°ä¸­çš„æ¡ä»¶è¡¨è¾¾å¼ç»“æœä¸ºçœŸæ—¶ï¼Œåˆ™åœ¨ç»“æœä¸­ä¿ç•™è¯¥å…ƒç´ ï¼Œå¦åˆ™ä¸ä¿ç•™è¯¥å…ƒç´ ã€‚
è·¯å¾„jqä¸­çš„pathæ˜¯æŒ‡ä»æ ¹åˆ°æŸä¸ªå¶å­å±æ€§çš„è®¿é—®è·¯å¾„ã€‚åœ¨jqä¸­æœ‰ä¸¤ç§è¡¨ç¤ºè·¯å¾„çš„æ–¹å¼ï¼šæ•°ç»„è¡¨ç¤ºæ³•å’Œå±æ€§è¡¨ç¤ºæ³•ã€‚å±æ€§è¡¨ç¤ºæ³•ç±»ä¼¼äºæˆ‘ä»¬åœ¨filterä¸­è®¿é—®æŸä¸ªå±æ€§å€¼çš„æ–¹å¼ï¼Œå¦‚.a.bã€‚æ•°ç»„è¡¨ç¤ºæ³•æ˜¯å°†è·¯å¾„ä¸­çš„æ¯ä¸€éƒ¨åˆ†è¡¨ç¤ºä¸ºæ•°ç»„çš„ä¸€ä¸ªå…ƒç´ ã€‚jqæä¾›äº†ä¸€ä¸ªå†…ç½®å‡½æ•°pathç”¨æ¥å®ç°è·¯å¾„ä»å±æ€§è¡¨ç¤ºæ³•åˆ°æ•°ç»„è¡¨ç¤ºæ³•çš„è½¬æ¢ã€‚
jqè¿˜æä¾›äº†å‡½æ•°ç”¨æ¥è¯»å–è·¯å¾„çš„å€¼ï¼ˆgetpathï¼‰, è®¾ç½®è·¯å¾„çš„å€¼ï¼ˆsetpathï¼‰å’Œåˆ é™¤è·¯å¾„ï¼ˆdelï¼‰ã€‚ä¸è¿‡è¿™ä¸‰ä¸ªå‡½æ•°å¯¹è·¯å¾„çš„å¤„ç†å¹¶ä¸ä¸€è‡´ã€‚å…¶ä¸­getpathå’Œsetpathåªæ¥å—æ•°ç»„è¡¨ç¤ºæ³•çš„è·¯å¾„ï¼Œè€Œdelå‡½æ•°åªèƒ½æ­£ç¡®å¤„ç†å±æ€§è¡¨ç¤ºæ³•çš„è·¯å¾„ã€‚
jqè¿˜æä¾›äº†ä¸€ä¸ªå‡½æ•°pathsç”¨æ¥æšä¸¾å¯èƒ½å­˜åœ¨çš„è·¯å¾„ã€‚åœ¨æ²¡æœ‰å‚æ•°çš„æƒ…å†µä¸‹ï¼Œpathså‡½æ•°å°†è¾“å‡ºJSONæ•°æ®ä¸­æ‰€æœ‰å¯èƒ½çš„è·¯å¾„ã€‚pathså‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œæ¥åªè¾“å‡ºæ»¡è¶³æ¡ä»¶çš„è·¯å¾„ã€‚
jqä¸­æä¾›äº†ä¸€ç³»åˆ—çš„å‡½æ•°ç”¨æ¥åˆ¤æ–­æŸä¸ªå…ƒç´ æˆ–è€…å±æ€§æ˜¯å¦å­˜åœ¨äºè¾“å…¥æ•°æ®ä¸­ã€‚å…¶ä¸­å‡½æ•°haså’Œinç”¨æ¥åˆ¤æ–­JSONå¯¹è±¡æˆ–æ•°ç»„æ˜¯å¦åŒ…å«ç‰¹å®šçš„å±æ€§æˆ–ç´¢å¼•ã€‚å‡½æ•°containså’Œinsideç”¨æ¥åˆ¤æ–­å‚æ•°æ˜¯å¦å®Œå…¨åŒ…å«åœ¨è¾“å…¥æ•°æ®ä¸­ã€‚å¯¹äºä¸åŒçš„æ•°æ®ç±»å‹ï¼Œåˆ¤æ–­æ˜¯å¦å®Œå…¨åŒ…å«çš„è§„åˆ™ä¸åŒã€‚å¯¹äºå­—ç¬¦ä¸²ï¼Œå¦‚æœAæ˜¯Bçš„å­å­—ç¬¦ä¸²ï¼Œåˆ™è®¤ä¸ºAå®Œå…¨åŒ…å«äºBã€‚å¯¹äºå¯¹è±¡ç±»å‹ï¼Œå¦‚æœå¯¹è±¡Açš„æ‰€æœ‰å±æ€§åœ¨å¯¹è±¡Bä¸­éƒ½èƒ½æ‰¾åˆ°ä¸”å€¼ç›¸åŒï¼Œåˆ™è®¤ä¸ºAå®Œå…¨åŒ…å«äºBã€‚
æ•°ç»„å‡½æ•°jq -nr &#x27;[1,[2,3],4]|flatten&#x27;jq -nr &#x27;[1,2,3]|reverse&#x27;jq -nr &#x27;[3,1,2]|sort&#x27;jq -nr &#x27;[&#123;&quot;a&quot;:1&#125;,&#123;&quot;a&quot;:2&#125;]|sort_by(.a)&#x27;jq -nr &#x27;&quot;abcb&quot;|indices(&quot;b&quot;)&#x27;jq -nr &#x27;[1,3,2,3]|indices(3)&#x27;
jq æä¾›å†…ç½®å‡½æ•°ç”¨äºå®Œæˆæ•°ç»„çš„æ‰å¹³åŒ–ï¼ˆflattenï¼‰ï¼Œååºï¼ˆreverseï¼‰ï¼Œæ’åºï¼ˆsortã€sort_byï¼‰ï¼Œæ¯”è¾ƒï¼ˆminã€min_byã€maxã€max_byï¼‰å’ŒæŸ¥æ‰¾ï¼ˆindicesã€indexã€rindexï¼‰ã€‚å…¶ä¸­indiceså‡½æ•°çš„è¾“å…¥æ•°æ®å¯ä»¥æ˜¯æ•°ç»„ï¼Œä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€‚å’Œ indexå‡½æ•°ä¸åŒçš„æ˜¯ï¼Œå…¶ç»“æœæ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰å‚æ•°åœ¨è¾“å…¥æ•°æ®ä¸­ä½ç½®çš„æ•°ç»„ã€‚
jqé«˜çº§ç‰¹æ€§jsé«˜çº§ç‰¹æ€§åŒ…æ‹¬ï¼šå˜é‡ã€Reduceã€è‡ªå®šä¹‰å‡½æ•°å’Œæ¨¡å—ç­‰ã€‚
å·²çŸ¥file1.jsonå†…å®¹ä¸ºï¼š
&#123;  &quot;auths&quot;: &#123;    &quot;harbor.voidking.com&quot;: &#123;      &quot;auth&quot;: &quot;YWRtaW46SGFyYm9yMTIzNDU=&quot;    &#125;  &#125;&#125;

file2.jsonå†…å®¹ä¸ºï¼š
&#123;  &quot;auths&quot;: &#123;    &quot;harbor1.voidking.com&quot;: &#123;      &quot;username&quot;: &quot;haojin&quot;,      &quot;password&quot;: &quot;haojin123&quot;,      &quot;auth&quot;: &quot;aGFvamluOmhhb2ppbjEyMwo=&quot;    &#125;  &#125;&#125;

jsonç›¸åŠ jsonç›¸åŠ å‘½ä»¤ï¼š
jq -s &#x27;add&#x27; file1.json file2.json# orjq -n &#x27;reduce inputs as $i (&#123;&#125;; . + $i)&#x27; file1.json file2.json

file1.jsonå’Œfile2.jsonç›¸åŠ çš„ç»“æœä¸ºï¼š
&#123;  &quot;auths&quot;: &#123;    &quot;harbor1.voidking.com&quot;: &#123;      &quot;username&quot;: &quot;haojin&quot;,      &quot;password&quot;: &quot;haojin123&quot;,      &quot;auth&quot;: &quot;aGFvamluOmhhb2ppbjEyMwo=&quot;    &#125;  &#125;&#125;

file2.jsonä¼šè¦†ç›–file1.jsonçš„ä¸€éƒ¨åˆ†ã€‚
jsonç»„åˆjsonç»„åˆå‘½ä»¤ï¼š
jq -s &#x27;.&#x27; file1.json file2.json

file1.jsonå’Œfile2.jsonç»„åˆçš„ç»“æœä¸ºï¼š
[  &#123;    &quot;auths&quot;: &#123;      &quot;harbor.voidking.com&quot;: &#123;        &quot;auth&quot;: &quot;YWRtaW46SGFyYm9yMTIzNDU=&quot;      &#125;    &#125;  &#125;,  &#123;    &quot;auths&quot;: &#123;      &quot;harbor1.voidking.com&quot;: &#123;        &quot;username&quot;: &quot;haojin&quot;,        &quot;password&quot;: &quot;haojin123&quot;,        &quot;auth&quot;: &quot;aGFvamluOmhhb2ppbjEyMwo=&quot;      &#125;    &#125;  &#125;]

jsonåˆå¹¶jsonåˆå¹¶å‘½ä»¤ï¼š
jq -n &#x27;reduce inputs as $i (&#123;&#125;; . * $i)&#x27; file1.json file2.json

file1.jsonå’Œfile2.jsonåˆå¹¶çš„ç»“æœä¸ºï¼š
&#123;  &quot;auths&quot;: &#123;    &quot;harbor.voidking.com&quot;: &#123;      &quot;auth&quot;: &quot;YWRtaW46SGFyYm9yMTIzNDU=&quot;    &#125;,    &quot;harbor1.voidking.com&quot;: &#123;      &quot;username&quot;: &quot;haojin&quot;,      &quot;password&quot;: &quot;haojin123&quot;,      &quot;auth&quot;: &quot;aGFvamluOmhhb2ppbjEyMwo=&quot;    &#125;  &#125;&#125;



]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker Swarm</title>
    <url>/dev-docker-swarm/</url>
    <content><![CDATA[Docker Swarmç®€ä»‹Docker Swarmæ˜¯ä¸€ä¸ªDockeré›†ç¾¤è°ƒåº¦ç®¡ç†å·¥å…·ã€‚ç›¸æ¯”äºKubernetesï¼ŒSwarmå†…ç½®äºDockerï¼Œæ›´åŠ è½»é‡ï¼Œæ›´åŠ ç®€å•æ–¹ä¾¿ï¼›ç›¸åº”çš„ï¼Œå°±æ²¡æœ‰Kubernetesé‚£ä¹ˆå¤šå¼ºå¤§çš„ç‰¹æ€§ã€‚
æœ¬æ–‡æ­å»ºä½¿ç”¨Swarmï¼Œä¸»è¦å‚è€ƒSwarm mode overview å’Œ docker swarmï¼ˆä¸€ï¼‰ å…¥é—¨ â€“ æ­å»ºä¸€ä¸ªç®€å•çš„swarmé›†ç¾¤ã€‚
å·²æœ‰ä¸¤ä¸ªå®‰è£…å¥½Dockerçš„æœºå™¨ï¼ˆswarm-managerå’Œswarm-workerï¼‰ï¼ŒIPåˆ†åˆ«ä¸º 192.168.56.104 å’Œ 192.168.56.105 ï¼Œä¸¤å°ä¸»æœºçš„hostséƒ½æ·»åŠ ï¼š
192.168.56.104 swarm-manager192.168.56.105 swarm-worker



Swarmé›†ç¾¤æ­å»ºmanager nodeåœ¨swarm-managerèŠ‚ç‚¹ï¼š
1ã€åˆ›å»ºswarm manager
docker swarm init --advertise-addr 192.168.56.104

è¿™ä¸€æ­¥ä¼šç”Ÿæˆjoinå‘½ä»¤ï¼Œå¤åˆ¶è®°å½•ä¸€ä¸‹ã€‚
2ã€éªŒè¯å®‰è£…
docker infodocker node ls

3ã€å…³é—­é˜²ç«å¢™ï¼Œæ–¹ä¾¿å…¶ä»–ä¸»æœºåŠ å…¥æˆä¸ºworker
systemctl stop firewalldsystemctl disable firewalld

worker nodeåœ¨swarm-workerèŠ‚ç‚¹ï¼š1ã€å…³é—­é˜²ç«å¢™ï¼Œæ–¹ä¾¿managerè°ƒç”¨
systemctl stop firewalldsystemctl disable firewalld

2ã€åŠ å…¥swarmæˆä¸ºworker
docker swarm join --token SWMTKN-1-21v9lvwrzapfzdzhq4js6xbtyasak4hdcdhz9p13fch23zdbn9-bneduvi9fi4ba05eywhqbe94z 192.168.56.104:2377

PSï¼šè„±ç¦»swarmdocker swarm leave
éªŒè¯docker node lsï¼ŒæŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€ã€‚
ä½¿ç”¨Swarm1ã€éƒ¨ç½²ä¸€ä¸ªæœåŠ¡
docker service create \--name=vk-nginx \--publish published=80,target=80 \--replicas 1  \voidking/nginx:v1.0

2ã€æŸ¥çœ‹æœåŠ¡
docker service lsdocker inspect vk-nginx

3ã€è®¿é—®æœåŠ¡
curl 192.168.56.104curl 192.168.56.105
å¦‚æœæ­¤æ—¶æœ‰ä¸€ä¸ªipæ˜¯curlä¸é€šçš„ï¼Œé‚£ä¹ˆè¯´æ˜æœ‰é—®é¢˜ï¼Œå› ä¸ºæ‰€æœ‰èŠ‚ç‚¹éƒ½åº”è¯¥æ·»åŠ ç«¯å£æ˜ å°„å…³ç³»ã€‚
4ã€æœåŠ¡æ‰©å®¹
docker service scale vk-nginx=4

5ã€æŸ¥çœ‹æœåŠ¡åœ¨èŠ‚ç‚¹çš„åˆ†å¸ƒ
docker service ps vk-nginx

]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>swarm</tag>
      </tags>
  </entry>
  <entry>
    <title>youtubeã€youkuã€çˆ±å¥‡è‰ºç­‰è§†é¢‘å¹³å°ä¸‹è½½æ–¹æ³•</title>
    <url>/hobby-video-download/</url>
    <content><![CDATA[è§†é¢‘ä¸‹è½½çš„ç—›ç‚¹å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬åœ¨youtubeã€youkuã€çˆ±å¥‡è‰ºã€è…¾è®¯è§†é¢‘ã€bilibiliç­‰è§†é¢‘å¹³å°çœ‹åˆ°äº†å–œæ¬¢çš„è§†é¢‘ï¼Œæƒ³è¦ä¸‹è½½åˆ°æœ¬åœ°ï¼Œä½†æ˜¯æ— æ³•ä¸‹è½½ï¼Œè¦ä¹ˆå¿…é¡»è¦å®¢æˆ·ç«¯æ‰èƒ½ä¸‹è½½ã€‚å¥½ä¸å®¹æ˜“ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå¯¹äºä¸åŒå¹³å°ä¸‹è½½çš„è§†é¢‘ï¼Œè¿˜å¿…é¡»ä½¿ç”¨ä¸åŒçš„å®¢æˆ·ç«¯è¿›è¡Œæ’­æ”¾ã€‚å¦‚æœæƒ³è¦ä½œä¸ºæ•™å­¦è§†é¢‘æ”¾åˆ°PPTä¸­ï¼Œè¿˜å¿…é¡»è¿›è¡Œè½¬ç ï¼Œä¸åŒå¹³å°è¿˜å¾—å¯»æ‰¾ä¸åŒçš„è½¬ç æ–¹æ³•ã€‚
å¤ªéš¾äº†ï¼Œå¥½åœ¨ä¸€äº›å‰è¾ˆå¸®æˆ‘ä»¬è§£å†³äº†è¿™äº›é—®é¢˜ï¼Œå¹¶ä¸”å¼€å‘å‡ºäº†å¾ˆå¤šå¥½ç”¨çš„å·¥å…·ã€‚æœ¬æ–‡ä¸­ï¼Œé‡ç‚¹æ¨èä¸¤æ¬¾ä¸ªäººåœ¨ç”¨çš„è§†é¢‘ä¸‹è½½å·¥å…·ï¼šyoutube-dlå’Œyou-getã€‚


youtube-dl1ã€è®¿é—®youtube-dlï¼Œä¸‹è½½éœ€è¦çš„ç‰ˆæœ¬ï¼Œè¿™é‡Œä»¥macosç‰ˆæœ¬ä¸ºä¾‹
sudo curl -L https://yt-dl.org/downloads/latest/youtube-dl -o /usr/local/bin/youtube-dlsudo chmod a+rx /usr/local/bin/youtube-dl# or brew install youtube-dl

2ã€æŸ¥çœ‹è§†é¢‘æ”¯æŒçš„ä¸‹è½½æ ¼å¼ï¼Œä¸‹è½½è§†é¢‘
youtube-dl -F http://v.youku.com/v_show/id_XODQzMTQ4NDQ=.htmlyoutube-dl -f mp4 http://v.youku.com/v_show/id_XODQzMTQ4NDQ=.html

you-get1ã€è®¿é—®you-getï¼Œä¸‹è½½éœ€è¦çš„ç‰ˆæœ¬ï¼Œè¿™é‡Œä»¥macosç‰ˆæœ¬ä¸ºä¾‹
pip3 install you-get# orbrew install you-get

2ã€æŸ¥çœ‹è§†é¢‘æ”¯æŒçš„ä¸‹è½½æ ¼å¼ï¼Œä¸‹è½½è§†é¢‘
you-get -i http://v.youku.com/v_show/id_XODQzMTQ4NDQ=.htmlyou-get http://v.youku.com/v_show/id_XODQzMTQ4NDQ=.html#you-get --itag=18 &#x27;https://www.youtube.com/watch?v=jNQXAC9IVRw&#x27;

å¯¹æ¯”è¿™ä¸¤ä¸ªè½¯ä»¶åŠŸèƒ½ä¸Šæ²¡æœ‰å¤ªå¤§å·®åˆ«ï¼Œä¸‹è½½é€Ÿåº¦ä¹Ÿæ²¡æœ‰å¤ªå¤§å·®åˆ«ã€‚youtube-dlæ›´åŠ è½»é‡ï¼Œå®‰è£…ä¹Ÿè¦æ¯”you-getå¿«çš„å¤šï¼ˆyou-getä¾èµ–ä¸€å †è½¯ä»¶ï¼‰ã€‚å¯¹äºåŒä¸€ä¸ªè§†é¢‘ï¼Œè¿™ä¸¤ä¸ªè½¯ä»¶æ”¯æŒçš„ä¸‹è½½æ ¼å¼æœ‰æ‰€ä¸åŒï¼Œæ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œyoutube-dlæ”¯æŒmp4æ ¼å¼ï¼Œyou-getæ”¯æŒflvæ ¼å¼ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>ä¸‹è½½</tag>
      </tags>
  </entry>
  <entry>
    <title>Helmå…¥é—¨ç¯‡</title>
    <url>/dev-helm-start/</url>
    <content><![CDATA[Helmç®€ä»‹
Helm is the best way to find, share, and use software built for Kubernetes.

helmæ˜¯k8sçš„åŒ…ç®¡ç†å·¥å…·ï¼Œå°±åƒyumä¹‹äºcentosï¼Œaptä¹‹äºubuntuã€‚ä¸åŒçš„æ˜¯ï¼Œyumç®¡ç†çš„æ˜¯è½¯ä»¶åŒ…ï¼Œhelmç®¡ç†çš„æ˜¯é…ç½®å¥½çš„k8sèµ„æºåŒ…ã€‚è¿™ç§é…ç½®å¥½çš„k8sèµ„æºåŒ…ï¼ŒæŒ‰ç…§chartçš„åŒ…æ ¼å¼è¿›è¡ŒåŒ…è£…ã€‚ä»¥ä¸‹æ˜¯wordpressçš„chartåŒ…ç»“æ„ï¼š
wordpress/  Chart.yaml          # A YAML file containing information about the chart  LICENSE             # OPTIONAL: A plain text file containing the license for the chart  README.md           # OPTIONAL: A human-readable README file  requirements.yaml   # OPTIONAL: A YAML file listing dependencies for the chart  values.yaml         # The default configuration values for this chart  charts/             # A directory containing any charts upon which this chart depends.  templates/          # A directory of templates that, when combined with values,                      # will generate valid Kubernetes manifest files.  templates/NOTES.txt # OPTIONAL: A plain text file containing short usage notes

Helm2åŒ…æ‹¬ä¸¤ä¸ªç»„ä»¶ï¼šå®¢æˆ·ç«¯ï¼ˆHelm Clientï¼‰å’ŒæœåŠ¡ç«¯ï¼ˆTillerï¼‰ã€‚Helmå‘é€æŒ‡ä»¤ç»™Tiller(gRPCåè®®)ï¼ŒTillerä¸»è¦ç”¨äºç®¡ç†å„ç§åº”ç”¨å‘å¸ƒçš„ç‰ˆæœ¬ï¼Œå¹¶ä¸”ä¸k8sè¿›è¡Œäº¤äº’ã€‚ä¸è¿‡ï¼Œåœ¨ Helm3 ä¸­ Tiller è¢«ç§»é™¤æ‰äº†ï¼ŒHelmç›´æ¥ä¸k8sè¿›è¡Œäº¤äº’ï¼Œç‰ˆæœ¬ç›¸å…³çš„æ•°æ®å­˜å‚¨åœ¨k8sä¸­ã€‚
Helm3ä¸­å‘½ä»¤ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ï¼š

helm delete æ›´åä¸º helm uninstall 
helm inspect æ›´åä¸º helm show 
helm fetch æ›´åä¸º helm pull

æ—§çš„å‘½ä»¤ä¾ç„¶å¯ä»¥ä½¿ç”¨ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

helm/helm
Helm Quickstart Guide
ä½¿ç”¨Helm
Helm ä»å…¥é—¨åˆ°å®è·µ | ä» 0 å¼€å§‹åˆ¶ä½œä¸€ä¸ª Helm Charts
Helmç”¨æˆ·ä¸å¼€å‘è€…æŒ‡å—ã€‚



ä½“éªŒHelmè¶Šæ¥è¶Šå–œæ¬¢ç”¨katacodaæ¥å­¦ä¹ æ–°æŠ€èƒ½ï¼ŒHelmä¹Ÿå¯ä»¥åœ¨ä¸Šé¢é€šè¿‡å®è·µå­¦ä¹ ã€‚
Helmç›¸å…³æ•™ç¨‹ï¼š

Helm Package Manager - BY JAVAJON
Helm Package Manager - BY KATACODA

å®‰è£…Helmå‚è€ƒ Installing Helmï¼Œå®‰è£…helmã€‚
macosbrew install helmhelm version

linux1ã€æŸ¥æ‰¾éœ€è¦çš„releaseç‰ˆæœ¬
2ã€ä¸‹è½½å¹¶å®‰è£…
wget https://get.helm.sh/helm-v3.2.4-linux-amd64.tar.gztar -xzvf helm-v3.2.4-linux-amd64.tar.gzmv linux-amd64/helm /usr/local/bin/helmln -s /usr/local/bin/helm /usr/bin/helmhelm version

Helmå¸¸ç”¨å‘½ä»¤ä½¿ç”¨æ¡ä»¶helmå‘½ä»¤ä½¿ç”¨æ¡ä»¶ï¼š

å®‰è£…é…ç½®å¥½k8sé›†ç¾¤
å®‰è£…é…ç½®å¥½kubectlï¼Œå¯ä»¥æ­£å¸¸è®¿é—®k8s
å®‰è£…å¥½helm

helmå’Œkubectlä¸€æ ·ï¼Œå¯ä»¥åœ¨ä¸€å°æœºå™¨ä¸Šç®¡ç†å¤šä¸ªk8sé›†ç¾¤ï¼Œä½¿ç”¨kubectl config use-context xxxåˆ‡æ¢ä¸€ä¸‹é›†ç¾¤å³å¯ã€‚
æŸ¥çœ‹å¸®åŠ©helm -hhelm get -h

ä» Artifact Hub æŸ¥æ‰¾charthelm search hub mysql

Artifact Hubä¸­å­˜æ”¾äº†å¤§é‡ä¸åŒçš„ä»“åº“ã€‚
æ·»åŠ chartä»“åº“åˆ°æœ¬åœ°# helm repo add stable https://kubernetes-charts.storage.googleapis.com/# helm repo add stable https://charts.helm.sh/stable# helm repo remove stablehelm repo add stable https://kubernetes.oss-cn-hangzhou.aliyuncs.com/chartshelm repo updatehelm repo list

æ‰§è¡Œhelm repo addï¼Œå®é™…ä¸Šæ˜¯åœ¨æœ¬åœ°åˆ›å»ºæˆ–æ›´æ–°ä¸€ä¸ªåä¸ºrepositories.yamlçš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å­˜å‚¨äº†æ‰€æœ‰å·²æ·»åŠ çš„ä»“åº“çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åç§°å’ŒURLã€‚
repositories.yaml æ–‡ä»¶è·¯å¾„ä¸ºï¼š

åœ¨Linuxä¸Šï¼š$HOME/.config/helm
åœ¨macOSä¸Šï¼š$HOME/Library/Preferences/helm
åœ¨Windowsä¸Šï¼š%USERPROFILE%\AppData\Roaming\Helm

æœ¬åœ°æŸ¥æ‰¾chartåˆ—è¡¨helm search repo stablehelm search repo stable/mysqlhelm search repo stable/mysql -l

æŸ¥çœ‹chartè¯¦æƒ…helm show chart stable/mysqlhelm show all stable/mysql

å®‰è£…è½¯ä»¶ä»¥å®‰è£…mysqlä¸ºä¾‹ï¼ˆé€‚ç”¨äº k8s v1.16- ç‰ˆæœ¬ï¼‰
helm install mysql stable/mysql# orhelm install stable/mysql --generate-namehelm status mysql

å®‰è£…æŒ‡å®šchartç‰ˆæœ¬çš„mysql
helm search repo stable/mysql -lhelm install mysql stable/mysql --version 0.3.5

k8s v1.16+ ç‰ˆæœ¬ï¼Œextensions/v1beta1 API versionä¸­Deploymentèµ„æºå·²ç»è¢«ç§»é™¤äº†ï¼Œå› æ­¤è¿™é‡Œçš„mysql chartä»…é€‚ç”¨äº1.16ä»¥ä¸‹çš„ç‰ˆæœ¬ã€‚è¯¦æƒ…å‚è€ƒDeprecated APIs Removed In 1.16: Hereâ€™s What You Need To Know
å¦‚æœæƒ³è¦åœ¨ k8s v1.16+ ç‰ˆæœ¬ä¸­ä½¿ç”¨è¿™ä¸ªmysql chartï¼Œè¯·å‚è€ƒã€ŠK8Sä¸­å®‰è£…Mysqlã€‹ä¸€æ–‡ä¸­çš„ã€helmå®‰è£…å•èŠ‚ç‚¹mysqlï¼ˆ5.7.xï¼‰ã€‘ä¸€èŠ‚ã€‚
æ¨¡æ‹Ÿå®‰è£…è½¯ä»¶helm install mysql stable/mysql --version 0.3.5 --debug --dry-run

æŸ¥çœ‹k8sä¸­å®‰è£…çš„charthelm listhelm list -Ahelm list -n mysqlhelm status mysql -n mysql

æŸ¥çœ‹k8sä¸­å®‰è£…çš„chartè¯¦æƒ…helm get manifest mysql -n mysql

è¯¥å‘½ä»¤èƒ½å¤Ÿæ‰“å°å‡ºæ‰€æœ‰ä¸Šä¼ åˆ°k8sçš„èµ„æºæ¸…å•ã€‚æ¯ä¸ªæ–‡ä»¶ä»¥---å¼€å¤´è¡¨ç¤ºYAMLæ–‡ä»¶çš„å¼€å¤´ï¼Œç„¶åæ˜¯è‡ªåŠ¨ç”Ÿæˆçš„æ³¨é‡Šè¡Œï¼Œè¡¨ç¤ºå“ªä¸ªæ¨¡æ¿æ–‡ä»¶ç”Ÿæˆäº†è¿™ä¸ªYAMLæ–‡æ¡£ã€‚
å¸è½½è½¯ä»¶ä»¥å¸è½½mysqlä¸ºä¾‹
helm lshelm uninstall mysqlhelm status mysql

å¸è½½æŒ‡å®šnamespaceä¸‹çš„è½¯ä»¶
helm ls -Ahelm uninstall xxx -n yyy

ä¿®æ”¹é»˜è®¤é…ç½®æ–¹æ³•ä¸€ï¼šä¸‹è½½chartï¼ˆæ¨èï¼‰ä¸‹è½½chartï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚è¿™ç§æ–¹æ³•æ˜¯æœ€æ¨èçš„æ–¹æ³•ï¼ŒåŸå› æœ‰äºŒï¼š

æœ‰æ—¶ä¸æ­¢éœ€è¦ä¿®æ”¹values.yamlï¼Œè¿˜éœ€è¦ä¿®æ”¹å…¶ä»–yamlæ–‡ä»¶
å®‰è£…ä¹‹åæœ‰å®Œæ•´ç•™æ¡£ï¼Œæ–¹ä¾¿ä»¥åçš„é…ç½®è°ƒæ•´å’Œå‡çº§

ä»¥ä¿®æ”¹mysqlçš„é»˜è®¤é…ç½®ä¸ºä¾‹ï¼š
1ã€è·å–chartå¹¶è§£å‹
helm fetch stable/mysql # orhelm fetch stable/mysql --version 0.3.5tar -xzvf mysql-0.3.5.tgz

2ã€ç¼–è¾‘values
cd mysqlvim values.yaml

é…ç½®é¡¹æ”¹ä¸ºæˆ‘ä»¬éœ€è¦çš„é…ç½®ã€‚
3ã€æ‰§è¡Œå®‰è£…åœ¨valuesæ‰€åœ¨ç›®å½•ä¸‹ï¼Œæ‰§è¡Œå‘½ä»¤
kubectl create ns mysqlhelm install mysql -f values.yaml . -n mysql

å®‰è£…è¿‡ç¨‹ä¸­æœ‰ä¸¤ç§æ–¹å¼ä¼ é€’é…ç½®æ•°æ®ï¼š

--values (æˆ– -f)ï¼šä½¿ç”¨ YAML æ–‡ä»¶è¦†ç›–é…ç½®ã€‚å¯ä»¥æŒ‡å®šå¤šæ¬¡ï¼Œä¼˜å…ˆä½¿ç”¨æœ€å³è¾¹çš„æ–‡ä»¶ã€‚
--setï¼šé€šè¿‡å‘½ä»¤è¡Œçš„æ–¹å¼å¯¹æŒ‡å®šé¡¹è¿›è¡Œè¦†ç›–ã€‚ä¼˜å…ˆçº§æ›´é«˜ã€‚

æ–¹æ³•äºŒï¼šå¯¼å‡ºé…ç½®æ–‡ä»¶å¯¼å‡ºé…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶
ä»¥ä¿®æ”¹mysqlçš„é»˜è®¤é…ç½®ä¸ºä¾‹ï¼š
1ã€è·å–é»˜è®¤values
helm show values stable/mysql &gt; mysql-values.yaml

2ã€ç¼–è¾‘valuesç¼–è¾‘mysql-values.yaml
3ã€æ‰§è¡Œå®‰è£…
kubectl create ns mysqlhelm install mysql stable/mysql -f mysql-values.yaml -n mysql

æ–¹æ³•ä¸‰ï¼šæ‰§è¡Œå‘½ä»¤æ—¶æŒ‡å®šé…ç½®æ‰§è¡Œhelm installå‘½ä»¤æ—¶ï¼ŒæŒ‡å®šé…ç½®
ä»¥ä¿®æ”¹mysqlçš„é»˜è®¤é…ç½®ä¸ºä¾‹ï¼š
helm install mysql stable/mysql -n mysql --set persistence.size=10Gi

ä¿®æ”¹é…ç½®åæ›´æ–°helm upgrade mysql stable/mysql -f mysql-values.yaml -n mysql

åˆ›å»ºchartå¹¶æ‰“åŒ…1ã€åˆ›å»ºchart
helm create wecms

2ã€éªŒè¯chart
helm lint wecms

3ã€æ‰“åŒ…chart
helm package wecms

4ã€ä½¿ç”¨chartå®‰è£…
helm install wecms ./wecms-0.1.0.tgz

æ›´å¤šå…³äºåˆ›å»ºchartçš„å†…å®¹ï¼Œå‚è€ƒæ–‡æ¡£ã€Šè‡ªå·±åŠ¨æ‰‹åˆ¶ä½œHelm Chartã€‹
ç”Ÿæˆæ¸²æŸ“å¥½çš„èµ„æºæ¸…å•helm template wecms wecms &gt; wecms_manifest.yaml# orhelm template wecms wecms-0.1.0.tgz &gt; wecms_manifest.yaml

HelmåŸºç¡€çŸ¥è¯†å‚è€ƒæ–‡æ¡£ã€ŠHelmå®˜æ–¹æ–‡æ¡£æ‘˜å½•ã€‹
å¸¸ç”¨chartä»“åº“
github - MySQL packaged by Bitnami
artifacthub - MySQL packaged by Bitnami
github - Bitnami package for Redis(R)
artifacthub - Bitnami package for Redis(R)

]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>helm</tag>
        <tag>bitnami</tag>
      </tags>
  </entry>
  <entry>
    <title>Prometheus Operator + Blackbox exporter</title>
    <url>/dev-prometheus-operator-blackbox-exporter/</url>
    <content><![CDATA[å‰è¨€ã€ŠKubernetes Operatorã€‹ä¸€æ–‡ä¸­å­¦ä¹ äº†Operatorçš„åŸºç¡€ï¼Œã€ŠPrometheus Blackbox exporterã€‹ä¸€æ–‡ä¸­å­¦ä¹ äº†blackbox exporterçš„å®‰è£…é…ç½®ã€‚
è€ŒPrometheus Operatorï¼Œé¡¾åæ€ä¹‰ï¼Œæ˜¯è´Ÿè´£K8Sä¸­è‡ªåŠ¨åŒ–ç®¡ç†Prometheusçš„Custom Controllerã€‚æ›´å¤šå†…å®¹ï¼Œå‚è€ƒcoreos/prometheus-operator
æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶çš„é—®é¢˜æ˜¯ï¼šæ€æ ·åˆ©ç”¨Prometheus Operatorï¼Œåœ¨Kubernetesé›†ç¾¤ä¸­å®‰è£…éƒ¨ç½²Prometheusï¼Œå¹¶ä¸”æ·»åŠ Blackbox exporterç»„ä»¶ï¼Ÿ


å®‰è£…Prom Operatorå‚è€ƒPrometheus Operator åˆä½“éªŒå’Œcoreos/kube-prometheusï¼Œå®‰è£…Prometheus Operatorã€‚
1ã€kubeleté…ç½®æ·»åŠ å‚æ•°vim /etc/systemd/system/kubelet.service.d/10-kubeadm.confæ·»åŠ ï¼š
--authentication-token-webhook=true--authorization-mode=Webhook 

2ã€è·å–æºç ï¼Œå¹¶åˆ‡æ¢ç‰ˆæœ¬ï¼ˆä¸k8sç‰ˆæœ¬çš„å¯¹åº”å…³ç³»å¯ä»¥åœ¨githubä»“åº“æ‰¾åˆ°ï¼‰
git clone https://github.com/coreos/kube-prometheus.gitcd kube-prometheuskubectl versiongit branch -agit checkout origin/release-0.4

3ã€å®‰è£…Prom Operator
# Create the namespace and CRDs, and then wait for them to be availble before creating the remaining resourceskubectl create -f manifests/setupuntil kubectl get servicemonitors --all-namespaces ; do date; sleep 1; echo &quot;&quot;; donekubectl create -f manifests/

4ã€æŸ¥çœ‹å®‰è£…
kubectl get crd | grep coreoskubectl get pod -n monitoringkubectl get svc -n monitoring
ä»¥ä¸Šï¼ŒPrometheus Operatorå®‰è£…å®Œæˆï¼ŒPrometheusä¹Ÿå®‰è£…å®Œæˆã€‚
PSï¼šå¸è½½Prom Operator
kubectl delete --ignore-not-found=true -f manifests/ -f manifests/setup

å®‰è£…Blackbox exporter1ã€åˆ›å»ºyamlæ–‡ä»¶ blackbox-exporter.yaml
apiVersion: v1data:  config.yml: |    modules:      http_2xx:        prober: http        http:          method: GET          preferred_ip_protocol: &quot;ip4&quot;      http_post_2xx:        prober: http        http:          method: POST          preferred_ip_protocol: &quot;ip4&quot;      tcp:        prober: tcp      ping:        prober: icmp        timeout: 3s        icmp:          preferred_ip_protocol: &quot;ip4&quot;      dns_k8s:        prober: dns        timeout: 5s        dns:          transport_protocol: &quot;tcp&quot;          preferred_ip_protocol: &quot;ip4&quot;          query_name: &quot;kubernetes.default.svc.cluster.local&quot;          query_type: &quot;A&quot;kind: ConfigMapmetadata:  name: blackbox-exporter  namespace: monitoring---apiVersion: apps/v1kind: Deploymentmetadata:  creationTimestamp: null  labels:    name: blackbox-exporter    cluster: ali-huabei2-dev  name: blackbox-exporter  namespace: monitoringspec:  replicas: 1  selector:    matchLabels:      name: blackbox-exporter  strategy: &#123;&#125;  template:    metadata:      creationTimestamp: null      labels:        name: blackbox-exporter        cluster: ali-huabei2-dev    spec:      containers:      - image: prom/blackbox-exporter:v0.16.0        name: blackbox-exporter        ports:        - containerPort: 9115        volumeMounts:        - name: config          mountPath: /etc/blackbox_exporter        args:        - --config.file=/etc/blackbox_exporter/config.yml        - --log.level=info      volumes:      - name: config        configMap:          name: blackbox-exporter---apiVersion: v1kind: Servicemetadata:  #annotations:  #  service.beta.kubernetes.io/alicloud-loadbalancer-address-type: intranet  labels:    name: blackbox-exporter    cluster: ali-huabei2-dev  name: blackbox-exporter  namespace: monitoringspec:  #externalTrafficPolicy: Local  selector:    name: blackbox-exporter  ports:  - name: http-metrics    port: 9115    targetPort: 9115  type: LoadBalancer

2ã€åº”ç”¨yamlæ–‡ä»¶
kubectl apply -f blackbox-exporter.yamlkubectl get svc -n monitoringkubectl get deploy -n monitoring

é…ç½®ä½¿ç”¨Blackbox exporterï¼ˆé”™è¯¯æ–¹æ³•ï¼‰åœ¨Prometheusä¸­é…ç½®ä½¿ç”¨Blackbox exporteræ˜¯å¾ˆç®€å•çš„ï¼Œscrape_configsé‡Œé…ç½®ç›¸åº”å­—æ®µå³å¯ã€‚ä½†æ˜¯ï¼Œk8sä¸­çš„Prometheusé…ç½®ï¼Œä¼šæœ‰ä¸€äº›ä¸åŒã€‚
1ã€è·å–prometheus.ymlé…ç½®
kubectl get secrets -n monitoring prometheus-k8s -oyaml | grep prometheus.yaml.gz | awk &#x27;&#123;print $2&#125;&#x27; | base64 --decode | gzip -d &gt; prometheus.yml

2ã€æŸ¥çœ‹prometheus.ymlé…ç½®ï¼Œä¸‹é¢æˆªå–ä¸€æ®µï¼š
global:  evaluation_interval: 30s  scrape_interval: 30s  external_labels:    prometheus: monitoring/k8s    prometheus_replica: $(POD_NAME)rule_files:- /etc/prometheus/rules/prometheus-k8s-rulefiles-0/*.yamlscrape_configs:- job_name: monitoring/node-exporter/0  honor_labels: false  kubernetes_sd_configs:  - role: endpoints    namespaces:      names:      - monitoring  scrape_interval: 15s  scheme: https  tls_config:    insecure_skip_verify: true  bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token  relabel_configs:  - action: keep    source_labels:    - __meta_kubernetes_service_label_k8s_app    regex: node-exporter  - action: keep    source_labels:    - __meta_kubernetes_endpoint_port_name    regex: https  - source_labels:    - __meta_kubernetes_endpoint_address_target_kind    - __meta_kubernetes_endpoint_address_target_name    separator: ;    regex: Node;(.*)    replacement: $&#123;1&#125;    target_label: node  - source_labels:    - __meta_kubernetes_endpoint_address_target_kind    - __meta_kubernetes_endpoint_address_target_name    separator: ;    regex: Pod;(.*)    replacement: $&#123;1&#125;    target_label: pod  - source_labels:    - __meta_kubernetes_namespace    target_label: namespace  - source_labels:    - __meta_kubernetes_service_name    target_label: service  - source_labels:    - __meta_kubernetes_pod_name    target_label: pod  - source_labels:    - __meta_kubernetes_service_name    target_label: job    replacement: $&#123;1&#125;  - source_labels:    - __meta_kubernetes_service_label_k8s_app    target_label: job    regex: (.+)    replacement: $&#123;1&#125;  - target_label: endpoint    replacement: https  - source_labels:    - __meta_kubernetes_pod_node_name    target_label: instance    regex: (.*)    replacement: $1    action: replace  - source_labels:    - __meta_kubernetes_service_label_cluster    target_label: cluster    regex: (.*)    replacement: $1    action: replace
å…¶ä¸­ï¼Œjob_nameé…ç½®targetåç§°ï¼Œkubernetes_sd_configsé…ç½®k8sçš„æœåŠ¡å‘ç°ï¼Œrelabel_configsé…ç½®æ ‡ç­¾æœ€ç»ˆçš„æ˜¾ç¤ºã€‚source_labelsæ˜¯æ ·æœ¬çš„åŸæ ‡ç­¾ï¼Œtarget_labelæ˜¯æ˜¾ç¤ºçš„æ ‡ç­¾ï¼›regexä½¿ç”¨æ­£åˆ™åŒ¹é…valueï¼Œreplacementä»£è¡¨æœ€ç»ˆæ˜¾ç¤ºçš„valueã€‚$1ä»£è¡¨regexæ­£åˆ™åŒ¹é…åˆ°çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚
3ã€æ·»åŠ blackbox exporterçš„é…ç½®
- job_name: monitoring/blackbox-exporter/0  honor_labels: false  kubernetes_sd_configs:  - role: endpoints    namespaces:      names:      - monitoring  scrape_interval: 15s  scheme: http  tls_config:    insecure_skip_verify: true  bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token  relabel_configs:  - action: keep    source_labels:    - __meta_kubernetes_service_label_name    regex: blackbox-exporter  - source_labels:    - __meta_kubernetes_service_label_name    target_label: job    regex: (.+)    replacement: $&#123;1&#125;  - source_labels:    - __meta_kubernetes_service_label_cluster    target_label: cluster    regex: (.*)    replacement: $1    action: replace

4ã€åº”ç”¨æ–°çš„é…ç½®
# 1. compress prometheus.yamlcat prometheus.yaml | gzip -f | base64 | tr -d &quot;\n&quot;# 2. copy string# 3. edit secretkubectl edit secrets -n monitoring prometheus-k8s# 4. replace prometheus.yaml.gz# 5. get the latest configkubectl get secrets -n monitoring prometheus-k8s -oyaml | grep prometheus.yaml.gz | awk &#x27;&#123;print $2&#125;&#x27; | base64 --decode | gzip -d | grep blackbox
ç„¶è€Œï¼Œé…ç½®ä¸­å¹¶æ²¡æœ‰blackboxï¼Œé…ç½®æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼è¯æ˜äº†prometheusçš„é…ç½®æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œæ‰‹åŠ¨ä¿®æ”¹æ— æ•ˆã€‚
é…ç½®ä½¿ç”¨Blackbox exporterï¼ˆæ­£ç¡®æ–¹æ³•ï¼‰Prometheus Operatorä¸­é…ç½®Targetï¼Œæ˜¯åˆ©ç”¨ServiceMonitorè¿›è¡ŒåŠ¨æ€å‘ç°çš„æ–¹å¼ã€‚
1ã€åˆ›å»ºservicemonitorçš„yamlæ–‡ä»¶ï¼Œblackbox-exporter-sm.yaml
apiVersion: monitoring.coreos.com/v1kind: ServiceMonitormetadata:  labels:    name: blackbox-exporter    release: p  name: blackbox-exporter  namespace: monitoringspec:  namespaceSelector:    matchNames:    - monitoring  selector:    matchLabels:      name: blackbox-exporter  endpoints:  - interval: 15s    port: http-metrics    path: /probe    relabelings:    - action: replace      regex: (.*)      replacement: $1      sourceLabels:      - __meta_kubernetes_service_label_cluster      targetLabel: cluster    - action: replace      regex: (.*)      replacement: $1      sourceLabels:      - __param_module      targetLabel: module    - action: replace      regex: (.*)      replacement: $1      sourceLabels:      - __param_target      targetLabel: target    params:      module:      - http_2xx      target:      - http://prometheus.io    # Target to probe with http.      - https://prometheus.io   # Target to probe with https.      - http://example.com:8080 # Target to probe with http on port 8080.  - interval: 15s    port: http-metrics    path: /probe    relabelings:    - action: replace      regex: (.*)      replacement: $1      sourceLabels:      - __meta_kubernetes_service_label_cluster      targetLabel: cluster    - action: replace      regex: (.*)      replacement: $1      sourceLabels:      - __param_module      targetLabel: module    - action: replace      regex: (.*)      replacement: $1      sourceLabels:      - __param_target      targetLabel: target    params:      module:      - dns_k8s      target:      - 172.31.16.10 # dns ip address

2ã€åº”ç”¨åˆ°k8sé›†ç¾¤kubectl apply -f blackbox-exporter-sm.yaml
3ã€ç­‰å¾…ä¸€åˆ†é’Ÿåï¼Œè¿›è¡ŒéªŒè¯è®¿é—®prometheusçš„graphé¡µé¢ï¼Œå¯ä»¥æŸ¥çœ‹blackbox-exporteræŒ‡æ ‡ã€‚
&#123;job=~&quot;blackbox-exporter&quot;,__name__!~&quot;^go.*&quot;&#125;
æŸ¥çœ‹ç»“æœè¡¨æ˜ï¼Œparamsçš„é…ç½®ä¸­ï¼Œhttp_2xx æ¢æµ‹åªæœ‰ç¬¬ä¸€ä¸ªtargetç”Ÿæ•ˆäº†ï¼Œå¦å¤–ä¸¤ä¸ªtargetæ ¹æœ¬æ²¡æœ‰æ¢æµ‹è®°å½•ã€‚æœ¬å®éªŒè¯æ˜äº†ï¼Œtargeté‡Œåªèƒ½å¡«å†™ä¸€ä¸ªåŸŸåï¼Œå¤šäº†æ— æ•ˆã€‚è¦æƒ³é…ç½®å¤šä¸ªç«™ç‚¹çš„æ¢æµ‹ï¼Œæœ€ç®€å•çš„åŠæ³•å°±æ˜¯é…ç½®å¤šä¸ªendpointã€‚è‡³äºNä¸ªç«™ç‚¹é…ç½®Mç§æ¢æµ‹æ–¹å¼ï¼Œå¦‚æœä½ çŸ¥é“æ€ä¹ˆé…ç½®ï¼Œæ¬¢è¿ç•™è¨€å‘ŠçŸ¥ï¼Œæ„Ÿè°¢~
é…ç½®å‘Šè­¦ã€Šä½¿ç”¨Dockerå®‰è£…é…ç½®Prometheusã€‹ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“é…ç½®å‘Šè­¦éœ€è¦åœ¨prometheusé…ç½®æ–‡ä»¶ä¸­æŒ‡å®šalertmanagerå®ä¾‹å’ŒæŠ¥è­¦çš„rulesæ–‡ä»¶ã€‚è€Œé€šè¿‡operatoréƒ¨ç½²çš„prometheusï¼Œæ€æ ·é…ç½®å‘Šè­¦å‘¢ï¼Ÿè¿™é‡Œéœ€è¦å®šä¹‰PrometheusRuleèµ„æºï¼Œå¹¶ä¸”å…·å¤‡æ ‡ç­¾ prometheus=k8s å’Œ role=alert-rulesã€‚è¿™é‡Œä»¥é…ç½®dnsæœåŠ¡å‘Šè­¦ä¸ºä¾‹ï¼ŒdnsæœåŠ¡å‡ºé—®é¢˜ï¼Œä¸èƒ½æ­£å¸¸è§£æ kubernetes.default.svc.cluster.local ã€‚
1ã€æŸ¥çœ‹alertmanageré…ç½®
kubectl get secrets -n monitoring alertmanager-main -oyaml | grep &quot;alertmanager.yaml&quot; | awk &#x27;&#123;print $2&#125;&#x27; | base64 -d

2ã€åˆ›å»ºprometheus-rule-dns.yaml
apiVersion: monitoring.coreos.com/v1kind: PrometheusRulemetadata:  labels:    prometheus: k8s    role: alert-rules  name: dns-alert-rules  namespace: monitoringspec:  groups:  - name: DNS    rules:    - alert: DNSServerError      annotations:        summary: No summary        description: No description        webhookToken: xxxxxxxxx      expr: |        probe_success&#123;module=&quot;dns_k8s&quot;&#125; == 0      for: 1m      labels:        severity: critical        alertTag: k8s

3ã€åº”ç”¨rulekubectl apply -f prometheus-rule-dns.yaml
]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>monitoring</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>prometheus</tag>
        <tag>ç›‘æ§</tag>
      </tags>
  </entry>
  <entry>
    <title>Prometheus Blackbox exporter</title>
    <url>/dev-prometheus-blackbox-exporter/</url>
    <content><![CDATA[ç™½ç›’ç›‘æ§å’Œé»‘ç›’ç›‘æ§æˆ‘ä»¬ç›‘æ§ä¸»æœºçš„èµ„æºç”¨é‡ã€å®¹å™¨çš„è¿è¡ŒçŠ¶æ€ã€æ•°æ®åº“ä¸­é—´ä»¶çš„è¿è¡Œæ•°æ®ã€‚è¿™äº›éƒ½æ˜¯æ”¯æŒä¸šåŠ¡å’ŒæœåŠ¡çš„åŸºç¡€è®¾æ–½ï¼Œé€šè¿‡ç™½ç›’èƒ½å¤Ÿäº†è§£å…¶å†…éƒ¨çš„å®é™…è¿è¡ŒçŠ¶æ€ï¼Œé€šè¿‡å¯¹ç›‘æ§æŒ‡æ ‡çš„è§‚å¯Ÿèƒ½å¤Ÿé¢„åˆ¤å¯èƒ½å‡ºç°çš„é—®é¢˜ï¼Œä»è€Œå¯¹æ½œåœ¨çš„ä¸ç¡®å®šå› ç´ è¿›è¡Œä¼˜åŒ–ã€‚è€Œä»å®Œæ•´çš„ç›‘æ§é€»è¾‘çš„è§’åº¦ï¼Œé™¤äº†å¤§é‡çš„åº”ç”¨ç™½ç›’ç›‘æ§ä»¥å¤–ï¼Œè¿˜åº”è¯¥æ·»åŠ é€‚å½“çš„é»‘ç›’ç›‘æ§ã€‚é»‘ç›’ç›‘æ§å³ä»¥ç”¨æˆ·çš„èº«ä»½æµ‹è¯•æœåŠ¡çš„å¤–éƒ¨å¯è§æ€§ï¼Œå¸¸è§çš„é»‘ç›’ç›‘æ§åŒ…æ‹¬HTTPæ¢é’ˆã€TCPæ¢é’ˆç­‰ç”¨äºæ£€æµ‹ç«™ç‚¹æˆ–è€…æœåŠ¡çš„å¯è®¿é—®æ€§ï¼Œä»¥åŠè®¿é—®æ•ˆç‡ç­‰ã€‚
é»‘ç›’ç›‘æ§ç›¸è¾ƒäºç™½ç›’ç›‘æ§æœ€å¤§çš„ä¸åŒåœ¨äºé»‘ç›’ç›‘æ§æ˜¯ä»¥æ•…éšœä¸ºå¯¼å‘å½“æ•…éšœå‘ç”Ÿæ—¶ï¼Œé»‘ç›’ç›‘æ§èƒ½å¿«é€Ÿå‘ç°æ•…éšœï¼Œè€Œç™½ç›’ç›‘æ§åˆ™ä¾§é‡äºä¸»åŠ¨å‘ç°æˆ–è€…é¢„æµ‹æ½œåœ¨çš„é—®é¢˜ã€‚ä¸€ä¸ªå®Œå–„çš„ç›‘æ§ç›®æ ‡æ˜¯è¦èƒ½å¤Ÿä»ç™½ç›’çš„è§’åº¦å‘ç°æ½œåœ¨é—®é¢˜ï¼Œèƒ½å¤Ÿåœ¨é»‘ç›’çš„è§’åº¦å¿«é€Ÿå‘ç°å·²ç»å‘ç”Ÿçš„é—®é¢˜ã€‚
Prometheus Blackbox exporterå…è®¸é€šè¿‡HTTPï¼ŒHTTPSï¼ŒDNSï¼ŒTCPå’ŒICMPå¯¹ç«¯ç‚¹è¿›è¡Œé»‘ç›’æ¢æµ‹ã€‚
æ›´å¤šå†…å®¹ï¼Œå‚è€ƒç½‘ç»œæ¢æµ‹ï¼šBlackbox Exporter å’Œ prometheus/blackbox_exporterã€‚
æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¼šå®‰è£…blackbox exporterï¼Œå¹¶ä¸”ä½¿ç”¨httpæ¢é’ˆå¯¹ä¸€äº›æ¥å£è¿›è¡Œæ¢æ´»ã€‚


å®‰è£…ä½¿ç”¨blackbox exporterblackbox exporterçš„å¸¸è§„å®‰è£…ä½¿ç”¨æ–¹æ³•æœ‰ä¸‰ç§ï¼šç›´æ¥ä½¿ç”¨äºŒè¿›åˆ¶æ–‡ä»¶ã€ä½¿ç”¨docker imageã€ç¼–è¯‘å®‰è£…ã€‚è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨docker imageçš„æ–¹å¼æ¥è¿›è¡Œå®‰è£…ï¼Œé»˜è®¤å·²ç»å®‰è£…äº†dockerã€‚
1ã€åˆ›å»ºé…ç½®æ–‡ä»¶blackbox.yml
modules:  http_2xx:    prober: http    http:      method: GET      preferred_ip_protocol: &quot;ip4&quot;  http_post_2xx:    prober: http    http:      method: POST      preferred_ip_protocol: &quot;ip4&quot;  tcp:    prober: tcp  ping:    prober: icmp    timeout: 3s    icmp:      preferred_ip_protocol: &quot;ip4&quot;  dns_baidu:    prober: dns    timeout: 5s    dns:      query_name: &quot;baidu.com&quot;      query_type: &quot;A&quot;      preferred_ip_protocol: &quot;ip4&quot;
æ¢æµ‹æ—¶é»˜è®¤ä½¿ç”¨ipv6ï¼Œæ¢æµ‹ä¸æ”¯æŒipv6çš„ç«™ç‚¹éƒ½ä¼šæ˜¾ç¤ºå¤±è´¥ï¼Œå› æ­¤åœ¨é…ç½®æ—¶æ”¹æˆäº†ipv4ï¼Œæ›´å¤šå†…å®¹å‚è€ƒUNDERSTANDING AND USING THE MULTI-TARGET EXPORTER PATTERNã€‚
2ã€å¯åŠ¨blackbox exporter
docker run --name blackbox-exporter -d \-p 9115:9115  \-v `pwd`:/config \prom/blackbox-exporter:v0.16.0 --config.file=/config/blackbox.yml

3ã€æµ‹è¯•
curl &quot;http://127.0.0.1:9115/probe?module=http_2xx&amp;target=baidu.com&quot;curl &quot;http://127.0.0.1:9115/probe?module=http_post_2xx&amp;target=baidu.com&quot;curl &quot;http://127.0.0.1:9115/probe?module=tcp&amp;target=baidu.com:80&quot;curl &quot;http://127.0.0.1:9115/probe?module=ping&amp;target=baidu.com&quot;curl &quot;http://127.0.0.1:9115/probe?module=dns_baidu&amp;target=180.76.76.76&quot;
ä»è¿”å›çš„æ ·æœ¬ä¸­ï¼Œå¯ä»¥è·å–ç«™ç‚¹çš„DNSè§£æè€—æ—¶ã€ç«™ç‚¹å“åº”æ—¶é—´ã€HTTPå“åº”çŠ¶æ€ç ç­‰ç­‰å’Œç«™ç‚¹è®¿é—®è´¨é‡ç›¸å…³çš„ç›‘æ§æŒ‡æ ‡ï¼Œä»è€Œå¸®åŠ©ç®¡ç†å‘˜ä¸»åŠ¨çš„å‘ç°æ•…éšœå’Œé—®é¢˜ã€‚
ä¸prometheusé›†æˆç´§æ¥ç€ã€Šä½¿ç”¨Dockerå®‰è£…é…ç½®Prometheusã€‹ï¼Œå½“å‰prometheus.ymlé…ç½®å†…å®¹ä¸ºï¼š
global:  scrape_interval: 15s #é»˜è®¤é‡‡é›†ç›‘æ§æ•°æ®æ—¶é—´é—´éš”  external_labels:    monitor: &#x27;my-monitor&#x27;scrape_configs:  #ç›‘æ§å¯¹è±¡è®¾ç½®  - job_name: prometheus #ä»»åŠ¡åç§°    scrape_interval: 5s #æ¯éš”5sè·å–ä¸€æ¬¡ç›‘æ§æ•°æ®    static_configs: #ç›‘æ§å¯¹è±¡åœ°å€      - targets: [&#x27;127.0.0.1:9090&#x27;]  # å°†è‡ªå·±åŠ å…¥åˆ°ç›‘æ§å¯¹è±¡ä¸­      - targets: [&#x27;192.168.56.102:9100&#x27;]        labels:          group: &#x27;client-node-exporter&#x27;      - targets: [&#x27;192.168.56.102:9091&#x27;]        labels:          group: &#x27;pushgateway&#x27;rule_files:  - /etc/prometheus/rules.yml   #å‘Šè­¦è§„åˆ™æ–‡ä»¶è·¯å¾„alerting:   #å‘Šè­¦ç®¡ç†å™¨è®¾ç½®  alertmanagers:    - static_configs:      - targets: [&#x27;192.168.56.102:9093&#x27;] #å‘Šè­¦ä¿¡æ¯ä¼šå‘é€ç»™alertmanagerè¿›ä¸€æ­¥å¤„ç†

ç®€å•é…ç½®ä¿®æ”¹prometheus.ymlï¼Œæ·»åŠ blackbox exporterç›¸å…³å­—æ®µã€‚
- job_name: baidu_http2xx_probe  params:    module:    - http_2xx    target:    - baidu.com  metrics_path: /probe  static_configs:  - targets:    - 127.0.0.1:9115- job_name: prometheus_http2xx_probe  params:    module:    - http_2xx    target:    - prometheus.io  metrics_path: /probe  static_configs:  - targets:    - 127.0.0.1:9115
è¿™é‡Œåˆ†åˆ«é…ç½®äº†åä¸ºbaidu_http2x_probeå’Œprometheus_http2xx_probeçš„é‡‡é›†ä»»åŠ¡ï¼Œå¹¶ä¸”é€šè¿‡paramsæŒ‡å®šä½¿ç”¨çš„æ¢é’ˆï¼ˆmoduleï¼‰ä»¥åŠæ¢æµ‹ç›®æ ‡ï¼ˆtargetï¼‰ã€‚
é«˜çº§é…ç½®ä»¥ä¸Šé…ç½®ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå‡å¦‚æˆ‘ä»¬æœ‰Nä¸ªç›®æ ‡ç«™ç‚¹ä¸”éƒ½éœ€è¦Mç§æ¢æµ‹æ–¹å¼ï¼Œé‚£ä¹ˆPrometheusä¸­å°†åŒ…å«N * M ä¸ªé‡‡é›†ä»»åŠ¡ï¼Œä»é…ç½®ç®¡ç†çš„è§’åº¦æ¥è¯´æ˜¾ç„¶æ˜¯ä¸å¯æ¥å—çš„ã€‚è¿™é‡Œæˆ‘ä»¬åˆ©ç”¨Prometheusçš„Relabelingæ–¹å¼å¯¹è¿™äº›é…ç½®è¿›è¡Œç®€åŒ–ï¼Œé…ç½®æ–¹å¼å¦‚ä¸‹ï¼š
scrape_configs:  #ç›‘æ§å¯¹è±¡è®¾ç½®  - job_name: prometheus #ä»»åŠ¡åç§°    scrape_interval: 5s #æ¯éš”5sè·å–ä¸€æ¬¡ç›‘æ§æ•°æ®    static_configs: #ç›‘æ§å¯¹è±¡åœ°å€      - targets: [&#x27;127.0.0.1:9090&#x27;]  # å°†è‡ªå·±åŠ å…¥åˆ°ç›‘æ§å¯¹è±¡ä¸­      - targets: [&#x27;192.168.56.102:9100&#x27;]        labels:          group: &#x27;client-node-exporter&#x27;      - targets: [&#x27;192.168.56.102:9091&#x27;]        labels:          group: &#x27;pushgateway&#x27;      - targets: [&#x27;192.168.56.102:9115&#x27;]  - job_name: &#x27;blackbox&#x27;    metrics_path: /probe    params:      module: [http_2xx]    static_configs:      - targets:        - http://prometheus.io    # Target to probe with http.        - https://prometheus.io   # Target to probe with https.        - http://example.com:8080 # Target to probe with http on port 8080.    relabel_configs:      - source_labels: [__address__]        target_label: __param_target      - source_labels: [__param_target]        target_label: instance      - target_label: __address__        replacement: 192.168.56.102:9115 # The blackbox exporter&#x27;s real hostname:port.

è¿™é‡Œé’ˆå¯¹æ¯ä¸€ä¸ªæ¢é’ˆæœåŠ¡ï¼ˆå¦‚http_2xxï¼‰å®šä¹‰ä¸€ä¸ªé‡‡é›†ä»»åŠ¡ï¼Œå¹¶ä¸”ç›´æ¥å°†ä»»åŠ¡çš„é‡‡é›†ç›®æ ‡å®šä¹‰ä¸ºæˆ‘ä»¬éœ€è¦æ¢æµ‹çš„ç«™ç‚¹ã€‚åœ¨é‡‡é›†æ ·æœ¬æ•°æ®ä¹‹å‰é€šè¿‡relabel_configså¯¹é‡‡é›†ä»»åŠ¡è¿›è¡ŒåŠ¨æ€è®¾ç½®ã€‚
ä¸Šé¢çš„é…ç½®ï¼Œå®é™…ä¸Šç›¸å½“äºï¼š
curl &quot;http://192.168.56.102:9115/probe?module=http_2xx&amp;target=http://prometheus.io&quot;curl &quot;http://192.168.56.102:9115/probe?module=http_2xx&amp;target=https://prometheus.io&quot;curl &quot;http://192.168.56.102:9115/probe?module=http_2xx&amp;target=http://example.com:8080&quot;

è¿™ä¸ªé…ç½®å®é™…ä¸Šæ˜¯å¾ˆå¥‡æ€ªçš„ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªjobä¸­ static_configs.targets ä»£è¡¨çš„æ˜¯ç”¨æ¥exporterå¯¹å¤–æš´éœ²çš„æ¥å£ï¼Œç¬¬äºŒä¸ªjobä¸­ static_configs.targets å´ä»£è¡¨blackboxè¦æ¢æµ‹çš„ç«™ç‚¹ã€‚è€Œä¸”ç¬¬äºŒä¸ªjobçš„ relabel_configs.replacement å±…ç„¶ç”¨æ¥æŒ‡å®šblackboxçš„urlï¼Œæˆ‘ä¹Ÿæ˜¯æœæ°”äº†ï¼Œè¯´å¥½çš„ç”¨æ¥æ›¿æ¢æ ‡ç­¾å€¼çš„å‘¢ï¼Ÿ
é‡å¯prometheusï¼Œç„¶åè¿›è¡ŒéªŒè¯ï¼šï¼ˆ1ï¼‰è®¿é—®blackbox-exporteré¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°æ¢æµ‹è®°å½•çš„æ—¥å¿—ã€‚ï¼ˆ2ï¼‰è®¿é—®prometheusçš„targeté¡µé¢ï¼Œå³å¯çœ‹åˆ°blackbox-exporterã€‚ï¼ˆ3ï¼‰è®¿é—®prometheusçš„graphé¡µé¢ï¼Œå¯ä»¥æŸ¥çœ‹blackbox-exporteræŒ‡æ ‡ã€‚ &#123;job=~&quot;blackbox&quot;,__name__!~&quot;^go.*&quot;&#125;
]]></content>
      <categories>
        <category>engineering</category>
        <category>monitoring</category>
      </categories>
      <tags>
        <tag>prometheus</tag>
        <tag>ç›‘æ§</tag>
      </tags>
  </entry>
  <entry>
    <title>Kubernetes Operator</title>
    <url>/dev-k8s-operator/</url>
    <content><![CDATA[Kubernetes Operatoræ˜¯å•¥ï¼Ÿ
Operators are software extensions to Kubernetes that make use of custom resources to manage applications and their components. Operators follow Kubernetes principles, notably the control loop.

Operator æ˜¯ Kubernetes çš„æ‰©å±•è½¯ä»¶ï¼Œé€šè¿‡è‡ªå®šä¹‰èµ„æºï¼Œç®¡ç†åº”ç”¨åŠå…¶ç»„ä»¶ã€‚ Operator éµå¾ª Kubernetes çš„ç†å¿µï¼Œç‰¹åˆ«æ˜¯åœ¨æ§åˆ¶å›è·¯æ–¹é¢ã€‚
Kubernetesè‡ªå®šä¹‰èµ„æºåŒ…æ‹¬Custom resources å’Œ Custom controllersã€‚
Operator æ¨¡å¼æ—¨åœ¨æ•è·ï¼ˆæ­£åœ¨ç®¡ç†ä¸€ä¸ªæˆ–ä¸€ç»„æœåŠ¡çš„ï¼‰è¿ç»´äººå‘˜çš„å…³é”®ç›®æ ‡ã€‚è´Ÿè´£ç‰¹å®šåº”ç”¨å’Œserviceçš„è¿ç»´äººå‘˜ï¼Œåœ¨ç³»ç»Ÿåº”è¯¥å¦‚ä½•è¿è¡Œã€å¦‚ä½•éƒ¨ç½²ä»¥åŠå‡ºç°é—®é¢˜æ—¶å¦‚ä½•å¤„ç†ç­‰æ–¹é¢æœ‰æ·±å…¥çš„äº†è§£ã€‚åœ¨ Kubernetes ä¸Šè¿è¡Œå·¥ä½œè´Ÿè½½çš„äººä»¬éƒ½å–œæ¬¢é€šè¿‡è‡ªåŠ¨åŒ–æ¥å¤„ç†é‡å¤çš„ä»»åŠ¡ã€‚Operator æ¨¡å¼ä¼šå°è£…æˆ‘ä»¬ç¼–å†™çš„ï¼ˆKubernetes æœ¬èº«æä¾›åŠŸèƒ½ä»¥å¤–çš„ï¼‰ä»»åŠ¡è‡ªåŠ¨åŒ–ä»£ç ã€‚
Operatorå¯ä»¥è‡ªåŠ¨åŒ–çš„äº‹æƒ…åŒ…æ‹¬ï¼š

æŒ‰éœ€éƒ¨ç½²åº”ç”¨
è·å–/è¿˜åŸåº”ç”¨çŠ¶æ€çš„å¤‡ä»½
å¤„ç†åº”ç”¨ä»£ç çš„å‡çº§ä»¥åŠç›¸å…³æ”¹åŠ¨ã€‚ä¾‹å¦‚ï¼Œæ•°æ®åº“ schema æˆ–é¢å¤–çš„é…ç½®è®¾ç½®
å‘å¸ƒä¸€ä¸ª serviceï¼Œè¦æ±‚ä¸æ”¯æŒ Kubernetes API çš„åº”ç”¨ä¹Ÿèƒ½å‘ç°å®ƒ
æ¨¡æ‹Ÿæ•´ä¸ªæˆ–éƒ¨åˆ†é›†ç¾¤ä¸­çš„æ•…éšœä»¥æµ‹è¯•å…¶ç¨³å®šæ€§
åœ¨æ²¡æœ‰å†…éƒ¨æˆå‘˜é€‰ä¸¾ç¨‹åºçš„æƒ…å†µä¸‹ï¼Œä¸ºåˆ†å¸ƒå¼åº”ç”¨é€‰æ‹©é¦–é¢†è§’è‰²

ç®€å•æ¥è¯´ï¼ŒKuberneteså®é™…æ˜¯æœŸæœ›çŠ¶æ€ç®¡ç†å™¨ï¼Œå¦‚æœKubernetesæœ¬èº«æä¾›çš„åŠŸèƒ½æ— æ³•è¾¾åˆ°æœŸæœ›çŠ¶æ€ï¼Œç‰¹åˆ«æ˜¯å¯¹äºæœ‰çŠ¶æ€åº”ç”¨ï¼Œé‚£ä¹ˆå°±éœ€è¦æ‰‹åŠ¨å¤„ç†ï¼Œè€ŒOperatorå¯ä»¥ä½¿è¿™ç§å¤„ç†è‡ªåŠ¨åŒ–ã€‚
æ›´å¤šå†…å®¹ï¼Œå‚è€ƒOperator æ¨¡å¼ã€‚
æœ¬æ–‡ä¸­ï¼Œå°†ä¼šå­¦ä¹ ç¼–å†™ä¸€ä¸ªOperatorï¼Œå¹¶åº”ç”¨åˆ°k8sé›†ç¾¤ã€‚


å·¥å…·Operatorçš„yamlæ–‡ä»¶å’Œgoæ–‡ä»¶ï¼Œå¯ä»¥çº¯æ‰‹å†™ï¼Œæ²¡æ¯›ç—…ã€‚ä½†æ˜¯ä½¿ç”¨å·¥å…·èƒ½å¤Ÿæé«˜æˆ‘ä»¬çš„ç¼–å†™æ•ˆç‡ã€‚ç¼–å†™Operatorçš„å·¥å…·æœ‰ï¼š

KUDOï¼ŒKubernetes é€šç”¨å£°æ˜å¼ Operator)
kubebuilder
Metacontrollerï¼Œå¯ä¸ Webhook ç»“åˆä½¿ç”¨ï¼Œä»¥å®ç°è‡ªå·±çš„åŠŸèƒ½ã€‚
Operator Framework

æŸ¥æ‰¾å’Œåˆ†äº«Operatorï¼šOperatorHub
Operator FrameworkOperator Frameworkæ˜¯ä¸€ä¸ªå¼€æºå·¥å…·åŒ…ï¼Œç”¨æ¥ç®¡ç†è¢«ç§°ä¸ºoperatorsçš„k8såº”ç”¨ç¨‹åºï¼Œé«˜æ•ˆã€è‡ªåŠ¨åŒ–ã€å¯æ‰©å±•ã€‚å®ƒçš„ä¸¤ä¸ªæ ¸å¿ƒéƒ¨åˆ†æ˜¯Operator SDK å’Œ Operator Lifecycle Manager ã€‚
Operator SDKï¼šå…è®¸å¼€å‘äººå‘˜æ ¹æ®ä¸“ä¸šçŸ¥è¯†æ¥æ„å»ºOperatorï¼Œè€Œæ— éœ€äº†è§£Kubernetes APIçš„å¤æ‚æ€§ã€‚Operator Lifecycle Managerï¼šå¸®åŠ©ç”¨æˆ·å®‰è£…ã€æ›´æ–°å’Œæ€»ä½“ç®¡ç†è·¨é›†ç¾¤è¿è¡Œçš„æ‰€æœ‰Operatorsï¼ˆåŠå…¶ç›¸å…³æœåŠ¡ï¼‰çš„ç”Ÿå‘½å‘¨æœŸã€‚
åœ¨å¼€å‘æœºä¸Šå®‰è£…Operator SDKï¼Œåœ¨é›†ç¾¤ä¸­å®‰è£…Operator Operator Lifecycle Managerã€‚
å¯¹äºè¿™ä¸¤ä¸ªç»„ä»¶ï¼Œå¯ä»¥åœ¨katacodaä¸Šè¯•ç©ï¼Œç†Ÿæ‚‰å®ƒä»¬çš„å®‰è£…å’Œä½¿ç”¨ï¼ŒBuilding Operators on OpenShiftã€‚
ç¬¬ä¸€ä¸ªOperatorå‚è€ƒKubernetes Operator å¿«é€Ÿå…¥é—¨æ•™ç¨‹ï¼Œä½¿ç”¨Operator Frameworkå¼€å‘ä¸€ä¸ªOperatoråº”ç”¨ï¼Œä»£ç ä»“åº“cnych/opdemoã€‚
ä¹¦ç­¾Introducing Operators: Putting Operational Knowledge into SoftwareBest practices for building Kubernetes Operators and stateful appsæ­ç§˜Kubernetes Operatorï¼ˆä¸€ï¼‰ç¬¬ä¸€æ¬¡ç© operator-sdk å°±ä¸Šæ‰‹
]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>æºç </tag>
        <tag>golang</tag>
      </tags>
  </entry>
  <entry>
    <title>kube-controller-manageræŒ‡æ ‡æ”¶é›†</title>
    <url>/dev-kube-controller-manager-metrics/</url>
    <content><![CDATA[å‰è¨€å¤§å®¶éƒ½çŸ¥é“éœ€è¦ç›‘æ§k8sæŒ‡æ ‡ï¼Œä½†æ˜¯å…·ä½“éœ€è¦ç›‘æ§k8sçš„å“ªäº›ç»„ä»¶çš„å“ªäº›æŒ‡æ ‡ï¼Ÿæœ¬æ–‡ï¼Œå°±æ¥å­¦ä¹ æ¢³ç†kube-controller-manangerç»„ä»¶çš„ç›‘æ§æŒ‡æ ‡ã€‚

æœ‰å“ªäº›æŒ‡æ ‡ï¼Ÿè¦æ”¶é›†æŒ‡æ ‡ï¼Œé¦–å…ˆè¦çŸ¥é“æœ‰å“ªäº›æŒ‡æ ‡å¯ä»¥æ”¶é›†ã€‚æ–¹æ³•ä¸€ï¼šä½¿ç”¨curlå‘½ä»¤
k get pods -n kube-system -o wide | grep kube-controller-managerk get svc -n kube-system -o wide | grep kube-controller-managerssh &lt;clusterhost&gt;curl localhost:&lt;nodeport&gt;/metrics

æ–¹æ³•äºŒï¼šåœ¨prometheusä½¿ç”¨promql
count(&#123;job=&quot;kube-controller-manager&quot;&#125;) by (__name__)count(&#123;job=&quot;kube-controller-manager&quot;,__name__!~&quot;^go_.*&quot;&#125;) by (__name__)

æŒ‡æ ‡å«ä¹‰ï¼Ÿæ‰¾åˆ°äº†æŒ‡æ ‡ï¼Œæ¥ä¸‹æ¥éœ€è¦çŸ¥é“æŒ‡æ ‡çš„å«ä¹‰ã€‚è®¿é—® Splunk doc - kube-controller-managerï¼Œä½¿ç”¨æŒ‡æ ‡åç§°æœç´¢å³å¯ã€‚
æ¯”å¦‚æœç´¢ï¼šrest_client_request_duration_seconds_bucketå¾—åˆ°ç»“æœï¼šrest_client_request_duration_seconds_bucket (cumulative)Request latency in seconds. Broken down by verb and URL. (bucket)
]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>monitoring</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>prometheus</tag>
        <tag>ç›‘æ§</tag>
      </tags>
  </entry>
  <entry>
    <title>PrometheusæŸ¥è¯¢è¯­è¨€ï¼šPromQL</title>
    <url>/dev-prometheus-query-language-promql/</url>
    <content><![CDATA[PromQLç®€ä»‹
Prometheusæä¾›äº†ä¸€ç§ç§°ä¸ºPromQLï¼ˆPrometheusæŸ¥è¯¢è¯­è¨€ï¼‰çš„åŠŸèƒ½æŸ¥è¯¢è¯­è¨€ï¼Œä½¿ç”¨æˆ·å¯ä»¥å®æ—¶é€‰æ‹©å’Œæ±‡æ€»æ—¶é—´åºåˆ—æ•°æ®ã€‚è¡¨è¾¾å¼çš„ç»“æœæ—¢å¯ä»¥æ˜¾ç¤ºä¸ºå›¾å½¢ï¼Œä¹Ÿå¯ä»¥åœ¨Prometheusçš„è¡¨è¾¾å¼æµè§ˆå™¨ä¸­æ˜¾ç¤ºä¸ºè¡¨æ ¼æ•°æ®ï¼Œä¹Ÿå¯ä»¥ç”±å¤–éƒ¨ç³»ç»Ÿé€šè¿‡HTTP APIä½¿ç”¨ã€‚

æ›´å¤šå†…å®¹å‚è€ƒQUERYING PROMETHEUS å’Œ æ¢ç´¢PromQLã€‚


æ—¶é—´åºåˆ—# HELP node_cpu Seconds the cpus spent in each mode.# TYPE node_cpu counternode_cpu&#123;cpu=&quot;cpu0&quot;,mode=&quot;idle&quot;&#125; 362812.7890625# HELP node_load1 1m load average.# TYPE node_load1 gaugenode_load1 3.0703125
å…¶ä¸­é#å¼€å¤´çš„æ¯ä¸€è¡Œè¡¨ç¤ºå½“å‰Node Exporteré‡‡é›†åˆ°çš„ä¸€ä¸ªç›‘æ§æŒ‡æ ‡ï¼ˆç›‘æ§æ ·æœ¬ï¼‰ï¼šnode_cpuå’Œnode_load1è¡¨æ˜äº†å½“å‰æŒ‡æ ‡çš„åç§°ï¼ˆå¤§æ‹¬å·ä¸­çš„æ ‡ç­¾åˆ™åæ˜ äº†è¯¥æŒ‡æ ‡çš„ä¸€äº›ç‰¹å¾å’Œç»´åº¦ï¼‰ï¼Œæµ®ç‚¹æ•°æ˜¯è¯¥æŒ‡æ ‡çš„å…·ä½“å€¼ã€‚æŒ‡æ ‡æ ¼å¼ä¸ºï¼š
metric_name [ &#123;label_name=&quot;label_value&quot;&#125; ] value [ timestamp ]

å…¶ä¸­metric_nameå’Œlabel_nameå¿…é¡»éµå¾ªPromQLçš„æ ¼å¼è§„èŒƒè¦æ±‚ã€‚valueæ˜¯ä¸€ä¸ªfloatæ ¼å¼çš„æ•°æ®ï¼Œtimestampçš„ç±»å‹ä¸ºint64ï¼ˆä»1970-01-01 00:00:00ä»¥æ¥çš„æ¯«ç§’æ•°ï¼‰ï¼Œtimestampä¸ºå¯é€‰é»˜è®¤ä¸ºå½“å‰æ—¶é—´ã€‚å…·æœ‰ç›¸åŒmetric_nameçš„æ ·æœ¬å¿…é¡»æŒ‰ç…§ä¸€ä¸ªç»„çš„å½¢å¼æ’åˆ—ï¼Œå¹¶ä¸”æ¯ä¸€è¡Œå¿…é¡»æ˜¯å”¯ä¸€çš„æŒ‡æ ‡åç§°å’Œæ ‡ç­¾é”®å€¼å¯¹ç»„åˆã€‚
Prometheusä¼šå°†æ‰€æœ‰é‡‡é›†åˆ°çš„æŒ‡æ ‡æ•°æ®ä»¥æ—¶é—´åºåˆ—ï¼ˆtime-seriesï¼‰çš„æ–¹å¼ä¿å­˜åœ¨å†…å­˜æ•°æ®åº“ä¸­ï¼Œå¹¶ä¸”å®šæ—¶ä¿å­˜åˆ°ç¡¬ç›˜ä¸Šã€‚æ—¶é—´åºåˆ—æ˜¯æŒ‰ç…§æ—¶é—´æˆ³å’ŒæŒ‡æ ‡çš„åºåˆ—é¡ºåºå­˜æ”¾çš„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå‘é‡(vector)ã€‚
å¯ä»¥å°†time-seriesç†è§£ä¸ºä¸€ä¸ªæ•°å­—çŸ©é˜µï¼ŒXè½´æ˜¯æ—¶é—´æˆ³ï¼ŒYè½´æ˜¯æŒ‡æ ‡ã€‚
æ•°æ®ç±»å‹åœ¨Prometheusçš„è¡¨è¾¾è¯­è¨€ä¸­ï¼Œä¸€ä¸ªè¡¨è¾¾å¼æˆ–å­è¡¨è¾¾å¼å¯ä»¥åˆ†ä»¥ä¸‹å››ç§ç±»å‹ä¹‹ä¸€ï¼š

ç¬æ—¶å‘é‡ï¼šä¸€ç»„æ—¶é—´åºåˆ—ï¼Œè¿™ç»„æ—¶é—´åºåˆ—å…·æœ‰ç›¸åŒçš„æ—¶é—´æˆ³
èŒƒå›´å‘é‡ï¼šä¸€æ®µæ—¶é—´èŒƒå›´çš„æ—¶é—´åºåˆ—
æ ‡é‡ï¼šä¸€ä¸ªç®€å•çš„æ•°å­—æµ®ç‚¹å€¼
Stringï¼šä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²å€¼ï¼›ç›®å‰æœªä½¿ç”¨

æ ¹æ®ç”¨ä¾‹ï¼ˆä¾‹å¦‚åœ¨ç»˜åˆ¶å›¾å½¢æˆ–æ˜¾ç¤ºè¡¨è¾¾å¼çš„è¾“å‡ºæ—¶ï¼‰ï¼Œç”±äºç”¨æˆ·æŒ‡å®šçš„è¡¨è¾¾å¼çš„ç»“æœï¼Œå…¶ä¸­åªæœ‰æŸäº›ç±»å‹æ˜¯åˆæ³•çš„ã€‚ä¾‹å¦‚ï¼Œè¿”å›ç¬æ—¶å‘é‡çš„è¡¨è¾¾å¼æ˜¯å”¯ä¸€å¯ä»¥ç›´æ¥ç»˜åˆ¶å›¾å½¢çš„ç±»å‹ã€‚
å¸¸é‡å­—ç¬¦ä¸²å¸¸é‡å­—ç¬¦ä¸²å¯ä»¥ç”¨å•å¼•å·ï¼ŒåŒå¼•å·æˆ–åå¼•å·æŒ‡å®šä¸ºå¸¸é‡ã€‚PromQLéµå¾ªä¸Goç›¸åŒçš„è½¬ä¹‰è§„åˆ™ã€‚åœ¨å•å¼•å·æˆ–åŒå¼•å·ä¸­ï¼Œåæ–œæ å¼€å§‹ä¸€ä¸ªè½¬ä¹‰åºåˆ—ã€‚å¯ä»¥ä½¿ç”¨å…«è¿›åˆ¶æˆ–åå…­è¿›åˆ¶æä¾›ç‰¹å®šå­—ç¬¦ã€‚åå¼•å·å†…ä¸ä¼šå¤„ç†ä»»ä½•è½¬ä¹‰ã€‚ä¸Goä¸åŒï¼ŒPrometheusä¸ä¼šåœ¨åå¼•å·å†…ä¸¢å¼ƒæ¢è¡Œç¬¦ã€‚
&quot;this is a string&quot;&#x27;these are unescaped: \n \\ \t&#x27;`these are not unescaped: \n &#x27; &quot; \t`

æµ®ç‚¹å¸¸é‡æµ®ç‚¹å¸¸é‡å¯ä»¥å†™åšæ•°å­—å½¢å¼ï¼š[-](digits)[.(digits)] ï¼Œä¾‹å¦‚ -2.43
æ—¶é—´åºåˆ—é€‰æ‹©å™¨ç¬æ—¶å‘é‡é€‰æ‹©å™¨ç¬æ—¶å‘é‡é€‰æ‹©å™¨å…è®¸åœ¨ç»™å®šçš„æ—¶é—´æˆ³ï¼ˆç¬æ—¶ï¼‰ä¸‹é€‰æ‹©ä¸€ç»„æ—¶é—´åºåˆ—å’Œæ¯ä¸ªæ ·æœ¬çš„å•ä¸ªæ ·æœ¬å€¼ï¼šä»¥æœ€ç®€å•çš„å½¢å¼ï¼Œä»…æŒ‡å®šåº¦é‡åç§°ã€‚è¿™å°†å¯¼è‡´ä¸€ä¸ªç¬æ—¶å‘é‡ï¼Œå…¶ä¸­åŒ…å«å…·æœ‰è¯¥åº¦é‡åç§°çš„æ‰€æœ‰æ—¶é—´åºåˆ—çš„å…ƒç´ ã€‚é€šè¿‡åœ¨èŠ±æ‹¬å· &#123;&#125; ä¸­é™„åŠ é€—å·åˆ†éš”çš„æ ‡ç­¾åŒ¹é…å™¨åˆ—è¡¨ï¼Œå¯ä»¥è¿›ä¸€æ­¥è¿‡æ»¤è¿™äº›æ—¶é—´åºåˆ—ã€‚ä¹Ÿå¯ä»¥å¦å®šæ ‡ç­¾å€¼ï¼Œæˆ–å°†æ ‡ç­¾å€¼ä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€‚å­˜åœ¨ä»¥ä¸‹æ ‡ç­¾åŒ¹é…è¿ç®—ç¬¦ï¼š

=ï¼šé€‰æ‹©ä¸å­—ç¬¦ä¸²å®Œå…¨ç›¸ç­‰çš„æ ‡ç­¾ã€‚
!=ï¼šé€‰æ‹©ä¸ç­‰äºå­—ç¬¦ä¸²çš„æ ‡ç­¾ã€‚
=ã€œï¼šé€‰æ‹©ä¸å­—ç¬¦ä¸²è¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„æ ‡ç­¾ã€‚
!ã€œï¼šé€‰æ‹©ä¸å­—ç¬¦ä¸²æ­£åˆ™è¡¨è¾¾å¼ä¸åŒ¹é…çš„æ ‡ç­¾ã€‚

åŒ¹é…ç©ºæ ‡ç­¾å€¼çš„æ ‡ç­¾åŒ¹é…å™¨è¿˜ä¼šé€‰æ‹©æ‰€æœ‰æ ¹æœ¬æ²¡æœ‰è®¾ç½®ç‰¹å®šæ ‡ç­¾çš„æ—¶é—´åºåˆ—ã€‚æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å®Œå…¨é”šå®šã€‚åŒä¸€æ ‡ç­¾åç§°å¯èƒ½æœ‰å¤šä¸ªåŒ¹é…å™¨ã€‚å‘é‡é€‰æ‹©å™¨å¿…é¡»æŒ‡å®šä¸€ä¸ªåç§°æˆ–è‡³å°‘ä¸€ä¸ªä¸ç©ºå­—ç¬¦ä¸²ä¸åŒ¹é…çš„æ ‡ç­¾åŒ¹é…å™¨ã€‚é€šè¿‡ä¸å†…éƒ¨ __name__ æ ‡ç­¾è¿›è¡ŒåŒ¹é…ï¼Œæ ‡ç­¾åŒ¹é…å™¨ä¹Ÿå¯ä»¥åº”ç”¨äºåº¦é‡æ ‡å‡†åç§°ã€‚Prometheusä¸­çš„æ‰€æœ‰æ­£åˆ™è¡¨è¾¾å¼éƒ½ä½¿ç”¨RE2è¯­æ³•ã€‚
&#123;job=~&quot;.*&quot;&#125; # Bad!&#123;job=~&quot;.+&quot;&#125;              # Good!&#123;job=~&quot;.*&quot;,method=&quot;get&quot;&#125; # Good!&#123;__name__=~&quot;job:.*&quot;&#125; # selects all metrics that have a name starting with job:on&#123;&#125; # Bad!&#123;__name__=&quot;on&quot;&#125; # Good!

èŒƒå›´å‘é‡é€‰æ‹©å™¨èŒƒå›´å‘é‡çš„å·¥ä½œæ–¹å¼ä¸ç¬æ—¶å‘é‡ç›¸åŒï¼Œä¸åŒçš„æ˜¯èŒƒå›´å‘é‡ä»ç¬æ—¶å‘é‡ä¸­é€‰æ‹©äº†ä¸€å®šèŒƒå›´çš„æ ·æœ¬ã€‚è¯­æ³•ä¸Šï¼Œå°†èŒƒå›´æŒç»­æ—¶é—´é™„åŠ åœ¨å‘é‡é€‰æ‹©å™¨æœ«å°¾çš„æ–¹æ‹¬å· [] ä¸­ï¼Œä»¥æŒ‡å®šæå–æ—¶é—´å€¼çš„èŒƒå›´ã€‚æŒç»­æ—¶é—´ä»¥æ•°å­—æŒ‡å®šï¼Œåé¢ç´§è·Ÿä»¥ä¸‹å•ä½ä¹‹ä¸€ï¼šs - secondsï¼Œm - minutesï¼Œh - hoursï¼Œd - daysï¼Œw - weeksï¼Œy - years
åç§»é‡åç§»é‡å…è®¸æ›´æ”¹æŸ¥è¯¢ä¸­å„ä¸ªç¬æ—¶å‘é‡å’ŒèŒƒå›´å‘é‡çš„æ—¶é—´åç§»ã€‚
http_requests_total offset 5msum(http_requests_total&#123;method=&quot;GET&quot;&#125; offset 5m) // GOOD.sum(http_requests_total&#123;method=&quot;GET&quot;&#125;) offset 5m // INVALID.rate(http_requests_total[5m] offset 1w)

å­æŸ¥è¯¢å­æŸ¥è¯¢å¯¹ç»™å®šçš„èŒƒå›´è¿›è¡Œå³æ—¶æŸ¥è¯¢ã€‚å­æŸ¥è¯¢çš„ç»“æœæ˜¯èŒƒå›´å‘é‡ã€‚è¯­æ³•ï¼š
&lt;instant_query&gt; &#x27;[&#x27; &lt;range&gt; &#x27;:&#x27; [&lt;resolution&gt;] &#x27;]&#x27; [ offset &lt;duration&gt; ]

resolutionæ˜¯å¯é€‰çš„ã€‚é»˜è®¤å€¼ä¸ºå…¨å±€è¯„ä¼°é—´éš”ã€‚
è¿ç®—ç¬¦Prometheusæ”¯æŒè®¸å¤šäºŒè¿›åˆ¶å’Œèšåˆè¿ç®—ç¬¦ï¼Œæ›´å¤šå†…å®¹å‚è€ƒè¡¨è¾¾å¼è¯­è¨€è¿ç®—ç¬¦ã€‚
å‡½æ•°Prometheusæ”¯æŒå¤šç§å¯¹æ•°æ®è¿›è¡Œæ“ä½œçš„å‡½æ•°ï¼Œæ›´å¤šå†…å®¹å‚è€ƒè¡¨è¾¾å¼è¯­è¨€å‡½æ•°ã€‚
æ³¨é‡ŠPromQLæ”¯æŒä»¥ï¼ƒå¼€å¤´çš„è¡Œæ³¨é‡Šã€‚
ä¾‹å­è¯¦ç»†å†…å®¹å‚è§QUERY EXAMPLE
ç®€å•æ—¶é—´åºåˆ—æŸ¥è¯¢http_requests_total&#123;__name__=&quot;http_requests_total&quot;&#125;http_requests_total&#123;job=&quot;apiserver&quot;, handler=&quot;/api/comments&quot;&#125;http_requests_total&#123;job=&quot;apiserver&quot;, handler=&quot;/api/comments&quot;&#125;[5m]http_requests_total&#123;job=~&quot;.*server&quot;&#125;http_requests_total&#123;status!~&quot;4..&quot;&#125;

å­æŸ¥è¯¢rate(http_requests_total[5m])[30m:1m]max_over_time(deriv(rate(distance_covered_total[5s])[30s:5s])[10m:])

å‡½æ•°è¿ç®—ç­‰rate(http_requests_total[5m])sum by (job) (  rate(http_requests_total[5m]))(instance_memory_limit_bytes - instance_memory_usage_bytes) / 1024 / 1024sum by (app, proc) (  instance_memory_limit_bytes - instance_memory_usage_bytes) / 1024 / 1024topk(3, sum by (app, proc) (rate(instance_cpu_time_ns[5m])))count by (app) (instance_cpu_time_ns)]]></content>
      <categories>
        <category>engineering</category>
        <category>monitoring</category>
      </categories>
      <tags>
        <tag>prometheus</tag>
        <tag>ç›‘æ§</tag>
        <tag>promql</tag>
      </tags>
  </entry>
  <entry>
    <title>httploadä½¿ç”¨è¯´æ˜</title>
    <url>/dev-httpload/</url>
    <content><![CDATA[httploadç®€ä»‹http_loadå¯ä»¥å¹¶è¡Œå¯åŠ¨å¤šä¸ªhttpè¯·æ±‚ï¼Œä»¥ä¾¿æµ‹è¯•WebæœåŠ¡å™¨çš„ååé‡ã€‚ä½†æ˜¯ï¼Œä¸å¤§å¤šæ•°æµ‹è¯•å®¢æˆ·ç«¯ä¸åŒçš„æ˜¯ï¼Œå®ƒæ˜¯å•çº¿ç¨‹è¿è¡Œçš„ï¼Œå› æ­¤ä¸ä¼šä½¿å®¢æˆ·ç«¯è®¡ç®—æœºäº§ç”Ÿå¤§é‡è´Ÿè½½ã€‚æ­¤å¤–ï¼Œhttp_loadè¿˜å¯ä»¥é…ç½®æ”¯æŒhttpsè¯·æ±‚ã€‚æ›´å¤šå†…å®¹å‚è€ƒhttp_load - multiprocessing http test clientã€‚


å®‰è£…1ã€å®‰è£…opensslï¼Œä»¥ä¾¿æ”¯æŒhttps
yum install opensslyum install openssl-devel

2ã€ä¸‹è½½httploadå¹¶è§£å‹
# wget http://acme.com/software/http_load/http_load-12mar2006.tar.gzwget http://www.acme.com/software/http_load/http_load-09Mar2016.tar.gztar -xzvf http_load-09Mar2016.tar.gzcd http_load-09Mar2016/

3ã€ç¼–è¾‘Makefileï¼Œå–æ¶ˆSSLç›¸å…³æ³¨é‡Š
SSL_TREE =     /usr/local/sslSSL_DEFS =     -DUSE_SSLSSL_INC =      -I$(SSL_TREE)/includeSSL_LIBS =     -L$(SSL_TREE)/lib -lssl -lcrypto

4ã€ç¼–è¯‘ä¸å®‰è£…makeæ‰§è¡Œå‘½ä»¤åï¼Œå½“å‰ç›®å½•ä¸‹ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ http_load
ä½¿ç”¨1ã€æŸ¥çœ‹å¸®åŠ©./http_load --help
2ã€åˆ›å»ºæ–‡ä»¶ url.list
https://www.baidu.com

3ã€å¯åŠ¨æµ‹è¯•
./http_load -s 10 -p 1 -r 10 url.list./http_load -s 180 -p 1 -r 10 -timeout 1 url.list./http_load -seconds 180 -parallel 1 -rate 10 -timeout 1 url.list]]></content>
      <categories>
        <category>engineering</category>
        <category>testing</category>
      </categories>
      <tags>
        <tag>æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>git commité—®é¢˜è¯¦è§£</title>
    <url>/dev-git-commit/</url>
    <content><![CDATA[æ€æ ·ä¿®æ”¹ commit user ï¼Ÿé—®é¢˜æè¿°gitçš„ user.name å’Œ user.email é…ç½®é”™äº†ï¼Œç„¶åè¿˜æäº¤äº†å¾ˆå¤šcommitï¼Œæ€ä¹ˆåŠï¼Ÿä¸è¦æ…Œï¼Œgitæ”¯æŒä¿®æ”¹å†å²commitè®°å½•çš„ç”¨æˆ·åå’Œé‚®ç®±ã€‚


æ€è·¯å‚è€ƒChanging author infoï¼Œä½¿ç”¨è„šæœ¬è¿›è¡Œä¿®æ”¹ã€‚
å®ç°ä»¥macosä¸Šæ“ä½œä¸ºä¾‹ã€‚
1ã€cloneé¡¹ç›®
git clone --bare https://github.com/user/repo.gitcd repo

2ã€åˆ›å»ºä¿®æ”¹ç”¨æˆ·åçš„è„šæœ¬ change-author.sh
#!/bin/shgit filter-branch -f --env-filter &#x27;OLD_EMAIL=&quot;your-old-email@example.com&quot;CORRECT_NAME=&quot;Your Correct Name&quot;CORRECT_EMAIL=&quot;your-correct-email@example.com&quot;if [ &quot;$GIT_COMMITTER_EMAIL&quot; = &quot;$OLD_EMAIL&quot; ]thenexport GIT_COMMITTER_NAME=&quot;$CORRECT_NAME&quot;export GIT_COMMITTER_EMAIL=&quot;$CORRECT_EMAIL&quot;fiif [ &quot;$GIT_AUTHOR_EMAIL&quot; = &quot;$OLD_EMAIL&quot; ]thenexport GIT_AUTHOR_NAME=&quot;$CORRECT_NAME&quot;export GIT_AUTHOR_EMAIL=&quot;$CORRECT_EMAIL&quot;fi&#x27; --tag-name-filter cat -- --branches --tags

å…¶ä¸­ OLD_EMAILã€CORRECT_NAMEã€CORRECT_EMAIL ä¸‰ä¸ªå˜é‡éœ€è¦æ›¿æ¢ã€‚
3ã€æ‰§è¡Œè„šæœ¬sh change-author.sh
4ã€æ£€æŸ¥ç»“æœï¼Œå¼ºåˆ¶åŒæ­¥åˆ°è¿œç¨‹ä»“åº“
git loggit push --force --tags origin &#x27;refs/heads/*&#x27;

æ€æ ·ä¿®æ”¹ä¸Šæ¬¡ commit message ï¼Ÿé—®é¢˜æè¿°git commit -m &quot;something&quot;ï¼Œä¹‹åï¼Œæƒ³è¦ä¿®æ”¹â€œsomethingâ€ä¸ºâ€œsomething_newâ€ã€‚
è§£å†³åŠæ³•ä½¿ç”¨git commit --amendï¼Œå¯ä»¥ä¿®æ”¹æœ€åä¸€æ¬¡commitçš„é™„åŠ ä¿¡æ¯ã€‚
æ€æ ·åˆå¹¶å¤šæ¬¡ commit ï¼Ÿéœ€æ±‚æœ€è¿‘ä¸‰æ¬¡æäº¤ï¼š

ç¬¬ä¸€æ¬¡ä»¥ä¸ºå®Œæˆäº†ï¼Œcommit messageå†™äº†â€œå®Œæˆäº†xxxåŠŸèƒ½â€ã€‚
ç»“æœå‘ç°æœ‰bugï¼Œä¿®å¤åç¬¬äºŒæ¬¡æäº¤ï¼Œcommit messageå†™äº†â€œä¿®å¤xxxåŠŸèƒ½çš„bugâ€ã€‚
ç»“æœå‘ç°è¿˜æœ‰bugï¼Œä¿®å¤åç¬¬ä¸‰æ¬¡æäº¤ï¼Œcommit messageå†™äº†â€œä¿®å¤xxxåŠŸèƒ½çš„bugâ€ã€‚

è¿™æ ·çš„ä¸‰æ¬¡æäº¤ï¼Œæ²¡æ¯›ç—…ï¼Œä½†æ˜¯å¯ä»¥ç¾åŒ–ä¸€ä¸‹ï¼Œåˆå¹¶æˆä¸€æ¬¡æäº¤ã€‚
æ“ä½œæ­¥éª¤1ã€åˆå¹¶æœ€æ–°ä¸‰æ¬¡çš„æäº¤
git rebase -i HEAD~3# orgit loggit rebase -i 0861a7db58
è‡ªåŠ¨è¿›å…¥viç¼–è¾‘æ¨¡å¼ï¼Œæ­¤æ—¶çœ‹åˆ°çš„commitä¿¡æ¯æ˜¯æŒ‰ç…§æ—¶é—´é¡ºåºæ’åˆ—çš„ï¼Œæœ€æ–°çš„commitåœ¨æœ€ä¸‹é¢ã€‚æŒ‰ç…§æç¤ºçš„å‘½ä»¤ç¼–è¾‘commitä¿¡æ¯ï¼Œä¸€èˆ¬æ”¹æˆp s så³å¯ã€‚
å¦‚æœä¿®æ”¹å®ŒæŠ¥é”™ï¼šerror: cannot â€˜squashâ€™ without a previous commité‚£ä¹ˆå¯ä»¥ç»§ç»­ä¿®æ”¹ï¼š
git rebase --edit-todo

2ã€è§£å†³å†²çªåæäº¤ï¼ˆä¸ä½¿ç”¨git commitï¼‰
git add .git rebase --continue

3ã€å–æ¶ˆrebase
git rebase --abort

æ€æ ·åˆ é™¤æŸæ¬¡ commit ï¼Ÿéœ€æ±‚å·²çŸ¥ä¸€äº›æäº¤è®°å½•ä¸ºï¼š
commit efaec33c2a081e427c5201898b3fc61179475f69commit 5fdf644e089dcb245b1f3dde5e8942fc935ffccccommit 550ae58fc222c5c4cd99027a580423d2567969e6commit f3e9a940df8371d5282f151a5c6e6e74a1e3dead
ç°åœ¨æƒ³è¦åˆ é™¤ 550ae58fc222c5c4cd99027a580423d2567969e6 è¿™æ¬¡commitï¼Œè¯¥æ€ä¹ˆæ“ä½œï¼Ÿ
æ“ä½œæ­¥éª¤1ã€rebaseåˆ°è¦åˆ é™¤çš„commitçš„å‰ä¸€ä¸ªcommit
git rebase -i f3e9a940df8371d5282f151a5c6e6e74a1e3dead

2ã€æ‰¾åˆ°åˆ é™¤çš„commitï¼ˆç¬¬ä¸€ä¸ªï¼‰ï¼Œæ ‡è®°ä¸º dropï¼Œä¿å­˜
drop 550ae58 add: xxxpick 5fdf644 modify: xxxpick efaec33 modify: xxx

3ã€è§£å†³å†²çªåæäº¤ï¼ˆä¸ä½¿ç”¨git commitï¼‰
git statusgit rm &lt;conflict-file&gt;git add .git rebase --continue


]]></content>
      <categories>
        <category>engineering</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockerfileä¸­çš„CMDå’ŒENTRYPOINT</title>
    <url>/dev-dockerfile-cmd-entrypoint/</url>
    <content><![CDATA[å‰è¨€Dockerfileä¸­çš„CMDå’ŒENTRYPOINTæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿdocker runæ—¶é»˜è®¤æ‰§è¡Œä»€ä¹ˆå‘½ä»¤ï¼Œæ€æ ·è¦†ç›–é»˜è®¤å‘½ä»¤ï¼Ÿpodå®šä¹‰ä¸­çš„argså’Œcommandå­—æ®µæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿæœ¬æ–‡ï¼Œæˆ‘ä»¬æ¥å›ç­”ä¸€ä¸‹è¿™äº›é—®é¢˜ã€‚ä¸»è¦å‚è€ƒDocker RUN vs CMD vs ENTRYPOINTå’ŒMumshad Mannambethçš„è¯¾ç¨‹ã€‚


æŒ‡ä»¤æ‰§è¡Œæ–¹å¼RUNã€CMDå’ŒENTRYPOINTæŒ‡ä»¤éƒ½å¯ä»¥æœ‰ä¸¤ç§æ‰§è¡Œæ–¹å¼ï¼šshellæ–¹å¼å’Œexecæ–¹å¼ã€‚
shellæ–¹å¼shellæ–¹å¼æ ¼å¼ï¼š&lt;instruction&gt; &lt;command&gt;
ä¾‹å­ï¼š
RUN apt-get install python3CMD echo &quot;Hello world&quot;ENTRYPOINT echo &quot;Hello world&quot;

å½“æŒ‡ä»¤ä»¥shellæ–¹å¼æ‰§è¡Œæ—¶ï¼Œå®ƒä¼šåœ¨åå°è°ƒç”¨ /bin/sh -c &lt;command&gt;ï¼Œå¹¶ä¸”ä¼šè¿›è¡Œå¸¸è§„çš„shellå¤„ç†ã€‚ä¾‹å¦‚ï¼ŒDockerfileä¸­çš„ä»¥ä¸‹å®šä¹‰ï¼š
ENV name voidkingENTRYPOINT echo &quot;Hello, $name&quot;
docker run ä¼šè¾“å‡º Hello, voidking ï¼Œå˜é‡ä¼šè¢«æ›¿æ¢ã€‚
execæ–¹å¼execæ–¹å¼æ ¼å¼ï¼š&lt;instruction&gt; [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;, ...]
æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªæ•´ä½“ã€‚å¦‚æœå†™æˆ [&quot;executable param1 param2&quot;]ï¼Œexecutable param1 param2ä¼šè¢«å½“æˆä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œæ˜¯æ‰¾ä¸åˆ°è·¯å¾„çš„ã€‚å¦‚æœå†™æˆ [&quot;executable&quot;, &quot;param1 param2&quot;]ï¼Œparam1 param2ä¼šè¢«å½“æˆä¸€ä¸ªå‚æ•°ï¼Œæ˜¯ä¸ç¬¦åˆé¢„æœŸçš„ã€‚
ä¾‹å­ï¼š
RUN [&quot;apt-get&quot;, &quot;install&quot;, &quot;python3&quot;]CMD [&quot;/bin/echo&quot;, &quot;Hello world&quot;]ENTRYPOINT [&quot;/bin/echo&quot;, &quot;Hello world&quot;]

å½“æŒ‡ä»¤ä»¥execæ–¹å¼æ‰§è¡Œæ—¶ï¼Œå®ƒå°†ç›´æ¥è°ƒç”¨å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶ä¸”ä¸ä¼šè¿›è¡Œshellå¤„ç†ã€‚ä¾‹å¦‚ï¼ŒDockerfileä¸­çš„ä»¥ä¸‹å®šä¹‰ï¼š
ENV name voidkingENTRYPOINT [&quot;/bin/echo&quot;, &quot;Hello, $name&quot;]
docker run ä¼šè¾“å‡º Hello, $name ï¼Œå˜é‡ä¸ä¼šè¢«æ›¿æ¢ã€‚
å¦‚æœéœ€è¦è¿è¡Œbashè€Œä¸æ˜¯shï¼Œéœ€è¦ä½¿ç”¨execæ–¹å¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†è¿›è¡Œå¸¸è§„çš„shellå¤„ç†ã€‚ä¾‹å¦‚ï¼ŒDockerfileä¸­çš„ä»¥ä¸‹å®šä¹‰ï¼š
ENV name voidkingENTRYPOINT [&quot;/bin/bash&quot;, &quot;-c&quot;, &quot;echo Hello, $name&quot;]
docker run ä¼šè¾“å‡º Hello, voidking ï¼Œå˜é‡ä¼šè¢«æ›¿æ¢ã€‚
CMDå’ŒENTRYPOINTCMDå®šä¹‰è®¿é—®dockerhub ubuntuï¼ŒSupported tags and respective Dockerfile linksï¼Œéšä¾¿é€‰æ‹©ä¸€ä¸ªç³»ç»Ÿç‰ˆæœ¬ï¼Œè¿™é‡Œé€‰æ‹© 16.04 ã€‚ç‚¹å‡»é“¾æ¥ï¼Œå¯ä»¥çœ‹åˆ°Dockerfileçš„å®šä¹‰ã€‚
FROM scratchADD ubuntu-xenial-core-cloudimg-amd64-root.tar.gz /# overlook all the definitionCMD [&quot;/bin/bash&quot;]

å¯ä»¥çœ‹åˆ°ï¼ŒDockerfileä¸­å®šä¹‰äº†CMDä¸º /bin/bash ï¼Œä¹Ÿå°±æ˜¯å®šä¹‰äº†é»˜è®¤å‘½ä»¤ä¸º /bin/bashã€‚
docker run ubuntu:16.04 ä¼šæ‰§è¡Œé»˜è®¤å‘½ä»¤ /bin/bash ã€‚
æ‰§è¡Œç‰¹å®šå‘½ä»¤æˆ‘ä»¬æƒ³è¦æ‰§è¡Œå‘½ä»¤ï¼Œé‚£ä¹ˆéœ€è¦åœ¨docker runæ—¶æŒ‡å®šå‘½ä»¤ï¼Œè¦†ç›–é»˜è®¤å‘½ä»¤ã€‚æ‰§è¡Œsleep 3600
docker run ubuntu:16.04 sleep 3600

å¦‚æœæƒ³è¦ä½¿è¿™ä¸ªç‰¹å®šå‘½ä»¤æ°¸ä¹…ç”Ÿæ•ˆï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨Dockerfileå®šä¹‰ä¸€ä¸ªæ–°çš„é•œåƒã€‚
FROM ubuntu:16.04CMD [&quot;sleep&quot;,&quot;3600&quot;]

ç”Ÿæˆæ–°çš„é•œåƒï¼Œæ‰§è¡Œé»˜è®¤å‘½ä»¤ sleep 3600
docker build -t ubuntu-sleeper .docker run ubuntu-sleeper

ç‰¹å®šå‚æ•°å¦‚æœæˆ‘ä»¬æƒ³è¦ä¿®æ”¹sleepçš„æ—¶é—´ï¼Œè¯¥æ€ä¹ˆåšï¼Ÿ
docker run ubuntu:16.04 sleep 3600docker run ubuntu:16.04 sleep 1200

sleepå‘½ä»¤æ²¡æœ‰å˜ï¼Œå˜åŒ–çš„åªæœ‰å‚æ•°ï¼Œsleepæ˜¯å¦å¯ä»¥çœç•¥ï¼Ÿå¯ä»¥çš„ï¼Œå®šä¹‰ä¸€ä¸ªæ–°çš„é•œåƒã€‚
FROM ubuntu:16.04ENTRYPOINT [&quot;sleep&quot;]CMD [&quot;3600&quot;]

# ç”Ÿæˆæ–°é•œåƒdocker build -t ubuntu-sleeper .# æ‰§è¡Œé»˜è®¤å‘½ä»¤ sleep 3600docker run ubuntu-sleeper # æ‰§è¡Œå‘½ä»¤ sleep 1200docker run ubuntu-sleeper 1200

ENTRYPOINTé‡Œçš„å‘½ä»¤æ˜¯å¦å¯ä»¥è¢«æ›¿æ¢çš„å‘¢ï¼Ÿä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä»¥æ‰§è¡Œ sleep2.0 1200 ä¸ºä¾‹
docker run --entrypoint sleep2.0 ubuntu-sleeper 1200

ç»¼ä¸Šï¼Œdocker runä¼šé»˜è®¤æ‰§è¡Œ ENTRYPOINT + CMDã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šåœ¨Dockerfileä¸­å®šä¹‰ENTRYPOINTä½œä¸ºå›ºå®šå‘½ä»¤ï¼Œå®šä¹‰CMDä½œä¸ºé»˜è®¤å‚æ•°ã€‚
k8sä¸­çš„argså’Œcommandåœ¨k8sä¸­å®šä¹‰podæ—¶ï¼Œæœ‰argså’Œcommandä¸¤ä¸ªå­—æ®µã€‚è¿™ä¸¤ä¸ªå­—æ®µï¼Œåˆ†åˆ«è¦†ç›–CMDå’ŒENTRYPOINTã€‚k8sä¸­çš„argså’Œcommandï¼Œåªæ”¯æŒexecçš„æ‰§è¡Œæ–¹å¼ï¼Œå› æ­¤å‚æ•°æ ¼å¼ä¸ºï¼š[&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;, ...]
ä¾‹å¦‚ï¼š
apiVersion: v1kind: Podmetadata:  creationTimestamp: null  labels:    run: ubuntu  name: ubuntuspec:  containers:  - image: ubuntu:16.04    name: ubuntu    resources: &#123;&#125;    command: [&quot;sleep&quot;]    args: [&quot;1200&quot;]  dnsPolicy: ClusterFirst  restartPolicy: Alwaysstatus: &#123;&#125;
è¯¥podå¯åŠ¨åçš„æ‰§è¡Œå‘½ä»¤ä¸º sleep 1200
]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>æ€æ ·åšå‡ºå¯å£çš„é£Ÿç‰©ï¼Ÿ</title>
    <url>/essay-how-to-cook-good-food/</url>
    <content><![CDATA[å‰è¨€è®°ä¸å¾—æ–°å† ç–«æƒ…å¼€å§‹çš„å…·ä½“æ—¶é—´ï¼ŒåªçŸ¥é“ä»Šå¹´çš„æ˜¥èŠ‚ï¼ˆ2020å¹´1æœˆ25æ—¥ï¼‰ï¼Œæ²¡æœ‰å‡ºå»æ‹œå¹´ï¼Œæ˜¥èŠ‚æœŸé—´ä¹Ÿæ²¡æœ‰å‡ºå»èšé¤ã€‚ç„¶åï¼Œç–«æƒ…æ—¥ç›Šä¸¥é‡ï¼Œç»§æ¹–åŒ—æ­¦æ±‰ä¹‹åï¼Œå„å¸‚ä¹Ÿå¼€å§‹å°åŸã€‚å¤å·¥æ—¥æœŸä¸€æ¨å†æ¨ï¼Œ2æœˆ15æ—¥ç»å†äº†ä¸¤æ¬¡ä¿¡æ¯ç™»è®°ï¼Œä¸‰æ¬¡ä½“æ¸©æ£€æµ‹ï¼Œé¡ºåˆ©è¿”å›åŒ—äº¬ã€‚å…ˆå»ç¤¾åŒºåŠç†è§‚å¯Ÿè¯ï¼Œå°åŒºå†…éš”ç¦»ä¸¤å‘¨ï¼Œæ‹¿åˆ°å‡ºå…¥è¯ï¼Œè¿˜è¦å½•å…¥äººè„¸è¯†åˆ«ï¼Œä»¥ä¾¿è¿›å‡ºå°åŒºã€‚3æœˆ9æ—¥å¹´åç¬¬ä¸€æ¬¡ä¸Šç­ï¼Œéœ€è¦æŸ¥è¯¢è¿‘æœŸè¡Œç¨‹ï¼Œæµ‹é‡ä½“æ¸©ï¼Œæ‰èƒ½è¿›å…¥è¾¾ç¾ä¸­å¿ƒã€‚å¤å·¥åä¸‰å‘¨ä¼‘ä¸¤å‘¨ï¼Œç›´åˆ°æœ€è¿‘ï¼Œæ‰æ¯å‘¨ä¸Šç­ã€‚ä½†æ˜¯ï¼Œä»ç„¶ä¸æ•¢åœ¨å¤–é¢åƒé¥­ï¼Œå› ä¸ºå¤šäººç”¨é¤æ˜¯æœ€å®¹æ˜“ä¼ æ’­æ–°å† çš„é€”å¾„ã€‚
å› æ­¤ï¼Œå¨é“å¤§å…´ï¼è€ŒéƒåŒå­¦ä¸æ‰ä¹ŸåŠ å…¥äº†è‡ªå·±åšé¥­çš„è¡Œåˆ—ï¼Œæ¯•ç«Ÿè‡ªå·±åšæ‰æœ€æ”¾å¿ƒã€‚åšçš„å¤šäº†ï¼Œè‡ªç„¶ä¸èƒ½åªæ»¡è¶³äºèƒ½åƒï¼Œè€Œè¦è¿½æ±‚å¥½åƒã€‚


ç§˜è¯€ç”¨æœ€å°‘çš„è°ƒæ–™ï¼Œæœ€ç®€å•çš„çƒ¹é¥ªæ–¹æ³•ï¼Œæœ€å¤§ç¨‹åº¦å‘æŒ¥å‡ºé£Ÿç‰©æœ¬æ¥çš„å‘³é“ã€‚
1ã€ç³–ï¼Œæ˜¯ä¸‡èƒ½çš„ï¼Œåˆ«æ€•ï¼Œä¸ç®¡æ˜¯ä»»ä½•èœå¼ï¼Œå‡ºé”…å‰æ”¾ä¸€ä¸¢ä¸¢ï¼Œæ€»ä¼šé‡åˆ°ä½ æƒ³è¦çš„å‘³é“ã€‚ç³–ï¼Œä¸æ˜¯ä¸ºäº†è®©èœå˜å¾—ç”œè…»ï¼Œè€Œæ˜¯ä½œä¸ºå‘³å¼•ï¼Œæ¿€å‘å‡ºè¶³ä»¥æŒ‘æ‹¨ä½ å‘³è•¾çš„å£æ„Ÿã€‚
2ã€è±†ç“£é…±åœ¨è‚‰ç±»å¤„ç†ä¸Šï¼Œæ˜¯ä¸ä¼šçŠ¯é”™çš„å­˜åœ¨ï¼Œæœ€ç®€å•çš„ï¼Œæ”¾æ²¹ï¼Œæ”¾è±†ç“£é…±å’Œè‚‰æ²«ï¼ŒåŠ ä¸€ç‚¹ç‚¹æ–™é…’å»è…¥ï¼Œå°±å¯ä»¥å¾—åˆ°æ»¡æ»¡ä¸€ç¢—è¾£è‚‰é¢çš„è‚‰é…±ï¼Œæ”¾åœ¨å†°ç®±é‡Œå§ï¼Œä»€ä¹ˆæ—¶å€™é¥¿äº†ï¼Œä¸‹ç¢—é¢æ¡æµ‡ä¸€ç‚¹è¿™ä¸ªè‚‰é…±ä¸Šå»ï¼Œç«¯åœ¨é¢å‰ï¼Œæ˜¯ä¸€ç¢—é¢æ¡å—ï¼Ÿä¸ï¼Œæ˜¯ä¸€ç¢—å‡†å¤‡æ—¶é—´åªéœ€è¦5åˆ†é’Ÿçš„å¹¸ç¦ã€‚
3ã€èšæ²¹åœ¨å¥½å¤šç´ èœçš„å¤„ç†ä¸Šï¼Œå®Œå…¨å¯ä»¥æ›¿ä»£ç›ï¼Œè€Œä¸”æœ‰ç€ç›æ²¡æœ‰çš„é‚£è‚¡â€œé²œâ€å‘³ï¼Œæœ€ç›´æ¥çš„å°±æ˜¯èŠ±èœï¼Œå°¤å…¶æ˜¯å¹²é”…èŠ±èœã€‚æ´—å¹²å‡€æ²¥å¹²ï¼Œç„¶åä¸‹æ²¹ï¼Œæ”¾ä¸€ç‚¹ç‚¹èŠ±æ¤’æˆ–è€…è¾£æ¤’ï¼Œå§èŠ±èœæ”¾è¿›å»ï¼Œä¸€æ»´æ°´ä¹Ÿä¸è¦åŠ ï¼Œæ„Ÿè§‰å·®ä¸å¤šäº†ï¼Œæ”¾è€—æ²¹+ç”ŸæŠ½ï¼Œåˆ«æ”¾ç›ï¼Œå‡ºé”…ï¼Œæœ‰è¿½æ±‚çš„å°±å†æ”¾äº›äº”èŠ±è‚‰ç‰‡è¿›å»ï¼Œå°å°ï¼Œæ˜¯ä¸æ˜¯è§‰å¾—å¤–é¢çš„å¹²é”…ç®€ç›´æ˜¯åƒåœ¾ï¼Ÿ
4ã€åˆå­¦è€…ï¼Œä¸è¦æƒ³ç€ä¸€æ°”å‘µæˆï¼Œå¾ˆå¤šä¸œè¥¿æ˜¯å¯ä»¥åœ¨çƒ¹é¥ªè¿‡ç¨‹ä¸­ä¸æ–­è°ƒæ•´çš„ï¼Œå®¹é”™æ€§å·¨é«˜ï¼Œç‰¹åˆ«æ˜¯çƒ¹é¥ªæ—¶é—´è¾ƒé•¿çš„èœå¼ï¼Œä¾‹å¦‚è’¸èœã€‚å¤§ä¸ªæ¯”æ–¹ï¼šæ¢…å¹²èœæ‰£è‚‰ï¼Œå‰é¢ä¸ç½—å—¦ï¼Œå°±è¯´ä¸Šè’¸é”…å¼€è’¸ä¹‹åï¼Œæ¯éš”åŠå°æ—¶ç”¨ç­·å­èˆ”ä¸€ä¸‹ï¼Œè§‰å¾—å’¸äº†èµ¶ç´§å§é‡Œé¢çš„æ±æ°´é€¼å‡ºæ¥ä¸€ç‚¹ï¼Œè§‰å¾—æ·¡äº†å°±åŠ ä¸€å‹ºè€æŠ½è¿›å»ï¼Œè§‰å¾—ä¸å¤Ÿç”œå°±æ”¾ä¸€å°ç²’å†°ç³–åœ¨è¾¹è¾¹ï¼Œå®¹é”™æ€§å·¨é«˜ã€‚
5ã€æ´‹è‘±æ²¡æœ‰ä»€ä¹ˆå‘³é“ï¼Œå®ƒçš„å…¨éƒ¨ä»·å€¼åœ¨äºå¢é¦™ã€‚ä¸¾ä¸ªä¾‹å­ï¼šæœ€æœ€æœ€æœ€ç®€å•çš„ï¼Œç‚’é¸¡è›‹ï¼ŒåŠ ä¸€ä¸¤ç‰‡æ´‹è‘±è¿›å»ï¼Œæ„Ÿè§‰æ˜¯ä¸¤ä¸ªèœã€‚
6ã€åˆ€å·¥æ²¡æœ‰é‚£ä¹ˆé‡è¦ï¼Œç°åœ¨çš„å¨æˆ¿æ‡’äººå·¥å…·å¤ªå¤šäº†ï¼Œä¸è¦æŠŠæ—¶é—´æµªè´¹åœ¨ç»ƒä¹ åˆ€å·¥ä¸Šï¼Œè‡³å°‘æˆ‘æ˜¯è¿™ä¹ˆè®¤ä¸ºçš„ï¼Œè¿˜å®¹æ˜“å—ä¼¤ã€‚
7ã€å¤–é¢çš„èœå£æ„Ÿæ€»è§‰å¾—å’Œå®¶é‡Œä¸ä¸€æ ·ï¼Œæ˜¯å› ä¸ºå¤–é¢çš„ç«ï¼Œè¿œè¿œæ¯”å®¶é‡Œçš„è¦æ—ºï¼Œè¿™ä¸ªæ˜¯ç…¤æ°”ç¶çš„ç¡¬ä¼¤ï¼Œè§£å†³ä¸äº†çš„ï¼Œä½†ä¹Ÿå¹¶ä¸æ˜¯æ²¡æœ‰ä¸€ç‚¹åŠæ³•ï¼Œæˆ‘ä¸ªäººçš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œå°¤å…¶åœ¨æ‰€è°“çš„â€œçˆ†ç‚’â€èœå¼ä¸­ï¼Œä¼šå°†ç«å¼€è‡³æœ€å¤§ï¼Œç„¶åå°†é”…å€¾æ–œè‡³å¾ˆå¤¸å¼ çš„è§’åº¦ï¼Œç›®çš„æ˜¯è®©ç«èˆŒèˆ”åˆ°é”…é‡Œçš„æ²¹ï¼Œè¿™æ ·å°±ä¼šæœ‰é”…é‡Œèµ·ç«çš„æ•ˆæœï¼Œæ¸©åº¦éå¸¸ä¹‹é«˜ï¼Œç„¶åä¸Šç›–å­å‹ç­ï¼Œå‡ºé”…ã€‚è¿™æ‹›æ˜¯æˆ‘è‡ªå·±æ£é¼“å‡ºæ¥çš„ï¼Œæœ‰çš„æ—¶å€™å®åœ¨æ˜¯å°‘æ²¹ï¼Œç«èˆŒèˆ”ä¸åˆ°ï¼Œæˆ‘å°±åœ¨é”…è¾¹è¾¹åˆ·ä¸€ç‚¹æ²¹ã€‚
8ã€æ±¤ç±»ä¸­çš„â€œé²œâ€ï¼Œæˆ‘æŒ‡çš„æ˜¯çš„å¯»å¸¸æ±¤ç±»ï¼Œä¸å¤–ä¹æ¥è‡ªè¿™å››ç§ä¸œè¥¿â€”â€”ç¬‹ã€è‚‰ã€å‘³ç²¾ã€ç™½èƒ¡æ¤’ç²‰ï¼ˆè¯„è®ºæé†’ï¼Œè¿˜æœ‰ä¸€ç§ï¼Œä½†æˆ‘ä¸ç»å¸¸åšï¼Œå°±æ˜¯è‡ç±»ï¼‰ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ç»å¸¸åšçš„å‡ é“ï¼Œæå…¶æ–¹ä¾¿ã€‚æ¯”å¦‚ï¼Œä¸Šæµ·èœä¸­æœ‰ä¸€é“â€œè…Œç¬ƒé²œâ€ï¼Œå†¬ç¬‹ã€ç²¾è‚‰ã€å’¸è‚‰ï¼Œä¸€æ¯”ä¸€æ¯”ä¸€å…¥é”…ï¼Œä¸€å¤§é”…ï¼Œç†¬ç€å§ï¼Œå•¥ä¹Ÿä¸ç”¨æ”¾ï¼ŒçœŸçš„å…¶ä»–å•¥ä¹Ÿä¸ç”¨æ”¾ï¼ˆå§œç‰‡å’Œæ–™é…’å»è…¥è¿˜æ˜¯å¿…éœ€çš„ï¼‰ï¼Œ1ä¸ªå°æ—¶åå‡ºé”…ï¼Œæ’’ç‚¹è‘±èŠ±ï¼Œå†¬å¤©é‡Œç®€ç›´æ˜¯ã€‚ã€‚ã€‚ç‹è²æœ‰é¦–æ­Œå«ä»€ä¹ˆæ¥ç€ï¼Ÿå¤©ä¸Šäººé—´æ˜¯å§ï¼Œè¯¶ã€‚
å†æ¯”å¦‚ï¼Œæˆ‘è¿™è¾¹æœ‰ä¸ªå–è‡­è±†è…çš„ï¼Œç‚¸å®Œåæµ¸å…¥ä¸€ç§æ±¤é‡Œï¼Œå·¨å¥½å–ï¼Œé—®ä»–æ€ä¹ˆå¼„çš„ï¼Œä»–æ‘†æ‘†æ‰‹è¯´æ˜¯ç§˜æ–¹ï¼Œä¸å¤–ä¼ ã€‚å›å®¶è‡ªå·±ç»†ç»†ä¸€å“ï¼Œè½¬èº«è¿›å¨æˆ¿ï¼Œä¸è¯´ä¸€æ¨¡ä¸€æ ·ï¼Œä½†å¯ä»¥ä¹±çœŸâ€”â€”ç‰›è‚‰æ±¤ï¼Œå‘³ç²¾ã€äº”é¦™ç²‰ï¼Œé…¸è±†è§’ï¼Œç™½èƒ¡æ¤’ç²‰ï¼Œé¦™èœã€‚å°±è¿™ä¹ˆç®€å•ï¼Œè¿˜ç§˜æ–¹ä¸å¤–ä¼ ï¼Œå•Šæˆ‘å‘¸ã€‚
9ã€ç”¨çŒªæ²¹ï¼Œæ¯”å…¶ä»–ä»»ä½•çš„å¤§è±†æ²¹æˆ–è‰²æ‹‰æ²¹ç‚’å‡ºæ¥çš„èœï¼Œéƒ½è¦é¦™ï¼Œæˆ‘ç”¨è¿‡ä¸€æ¬¡å°±ä¸Šç˜¾ï¼Œå”¯ä¸€çš„ç¼ºç‚¹å°±æ˜¯å‡å›ºç‚¹å¤ªé«˜äº†ï¼ˆå¾ˆå¤šäººè¯„è®ºçº æ­£æˆ‘æ˜¯ä½ï¼Ÿæˆ‘ä¹Ÿæä¸æ˜ç™½äº†ï¼Œå¦‚æœæ™®é€šæ²¹å‡å›ºéœ€è¦é›¶ä¸‹1åº¦ï¼Œè€ŒçŒªæ²¹å‡å›ºé›¶ä¸Š5åº¦ï¼Œåˆ°åº•æ˜¯è°é«˜è°ä½å‘¢ï¼Ÿï¼‰ï¼Œå¾ˆå®¹æ˜“å°±å˜æˆè†ä½“ï¼Œå†¬å¤©æ˜¯éœ€è¦ç”¨å‹ºå­æŒ–çš„ã€‚
10ã€æœ€åç»™ä¸ªå¿ƒå¾—ï¼Œå…¶å®å¨è‰ºè¿™ä¸œè¥¿æ²¡æœ‰ä»€ä¹ˆç„å¦™çš„ï¼Œæ— éæ˜¯ç»éªŒè€Œå·²ï¼Œæˆ‘ä¸€ä¸ªäººæé‚£æ£é¼“äº”å…­åå¹´ï¼Œå‡ºæ¥ç»å¯¹ä¹Ÿæ˜¯ä¸€ç­‰ä¸€çš„å¤§å¸ˆï¼Œæ€»æœ‰ä¸ªé˜´å·®é˜³é”™èƒ½è®©æˆ‘æ‚Ÿåˆ°ä¸€äº›åŸæœ¬æ²¡äººç‚¹æ‹¨åˆ°çš„TIPSï¼Œé‚£ä¸ºä»€ä¹ˆä¸å»å¯»æ±‚èº«è¾¹çš„é«˜æ‰‹å‘¢ï¼Ÿæ¯”æ–¹ï¼Œæˆ‘åƒç•ªèŒ„ç‚’è›‹ï¼Œæ°¸è¿œæ˜¯æ·¡è€Œæ— å‘³ï¼ŒåŠ å†å¤šè°ƒå‘³å“éƒ½æ²¡åŠæ³•æ‹¯æ•‘çš„å“ªç§ï¼Œç»“æœæˆ‘ä¸€æœ‹å‹å¯¹æˆ‘è¯´ï¼Œä½ è¯´è¯´ä½ æ€ä¹ˆå¼„çš„å‘¢ï¼Ÿè¯´å®Œï¼Œæ‰€æœ‰çš„æ­¥éª¤å’Œè·¯æ•°éƒ½æ˜¯OKçš„ï¼Œå”¯ä¸€ä¸€ç‚¹ï¼Œå‡ºé”™äº†ï¼Œç‚’ç•ªèŒ„çš„æ—¶å€™æ²¡æœ‰ç”¨å‹ºå­ç”¨åŠ›å‹ç•ªèŒ„ï¼Œè¿™æ ·ç•ªèŒ„é‡Œçš„é…±æ±å°±ä¸ä¼šè¢«å‹å‡ºæ¥ï¼Œä¹Ÿå°±æ²¡æœ‰åŠæ³•è£¹åœ¨è›‹ä¸Šå½¢æˆç‹¬ç‰¹çš„å£æ„Ÿäº†ã€‚æˆ‘ä¸€å¬ï¼Œå¤§æƒŠï¼Œå¯¹å•Šï¼Œå°±æ˜¯è¿™ä¸ªé“ç†ã€‚
å†æ¯”æ–¹ï¼Œé‚£ä¸ªè–¯æ¡ï¼Œæˆ‘éšä¾¿æ€ä¹ˆéƒ½å¼„ä¸å‡ºé‚£ç§éº¦å½“åŠ³çš„é£å‘³ï¼Œå£æ„Ÿä¸€æ¨¡ä¸€æ ·ï¼Œå°±æ˜¯æ²¡æœ‰é‚£ç§é£å‘³ï¼Œæœ€åé—®é¢˜å‡ºåœ¨ï¼ŒåœŸè±†åˆ‡æ¡ä¹‹åéœ€è¦ç”¨ç‰›å¥¶æµ¸æ³¡ä¸€æ™šä¸Šï¼Œæ²¡æœ‰ç‰›å¥¶ç”¨å¥¶ç²‰ä¹Ÿå¯ä»¥ï¼Œè¿™æ ·ä¼šæœ‰è‹¥æœ‰è‹¥æ— çš„å¥¶é¦™å‘³é“ï¼Œå‘³è•¾å†å‘è¾¾çš„äººï¼Œåˆ«äººä¸è¯´ï¼Œè¿™ç§å‘³é“ä½ è¦èƒ½é¢†æ‚ŸåŸææ–™ä¼°è®¡å¾—é ç¼˜åˆ†ã€‚
ä½ çœ‹ï¼Œæ˜¯ä¸æ˜¯ä¸€ä¸ªå¾ˆå°çš„ç‚¹æ‹¨ï¼Ÿå°åˆ°ä½ å‹æ ¹ä¸ä¼šå»æ³¨æ„ã€‚
å¤šé—®å¤šè®¨æ•™å°±å¯¹äº†ã€‚
11ã€æœ€åçš„æœ€åï¼Œå¤§å®¶éƒ½æ˜¯ä¸€åŒæ‰‹ï¼Œå¨è‰ºè¿™ä¸œè¥¿ç»ƒç»ƒæ€»ä¼šä¸Šå»çš„ï¼Œä½†å·§å¦‡éš¾ä¸ºæ— ç±³ä¹‹ç‚Šï¼Œå®¶é‡Œçš„è°ƒæ–™ä¸€å®šè¦é½å…¨ï¼Œä¸ç„¶å°±ä¼šå˜æˆæˆ‘ï¼Œç»å¸¸æˆ´ç€å£ç½©å›´ç€å›´è£™åç”µæ¢¯åˆ°å°åŒºé—¨å£è¶…å¸‚ä¹°ç¼ºçš„è°ƒæ–™ï¼ˆé‚£å›å¤´ç‡è€é«˜äº†ï¼‰ã€‚éƒ«å¿è±†ç“£é…±ã€æ–™é…’ã€è€å§œã€è’œç“£ã€è€æŠ½ï¼ˆé…±æ²¹ï¼‰ã€ç”ŸæŠ½ï¼ˆé²œé…±æ²¹ï¼‰ã€é¦™é†‹ã€ç™½é†‹ã€ç™½ç ‚ç³–ã€è€å†°ç³–ã€ç™½èŠéº»ã€å°ç£¨éº»æ²¹ã€ç”œé¢é…±ã€èšæ²¹ã€è¾£æ¤’é¢ã€äº”é¦™ç²‰ã€å…«è§’ã€æ¡‚çš®ã€é¦™å¶ã€å’–å“©ç²‰ã€ç™½èƒ¡æ¤’ç²‰ã€é²œè¾£ç²‰ã€èŠ±æ¤’ç²‰ã€æ¤’ç›ã€å­œç„¶ç²‰ã€ç•ªèŒ„é…±ã€æµ“æ±¤å®ï¼ˆç‰›è‚‰ã€çŒªè‚‰å’Œè€æ¯é¸¡ï¼‰ã€èœ‚èœœã€è€å¹²å¦ˆè±†è±‰é…±ã€‚
è¿™äº›è°ƒå‘³å“æœ‰å…±åŒçš„ç‰¹å¾â€”â€”1ã€ä¿è´¨æœŸè¾ƒé•¿ï¼Œå¸¸å¤‡ç€ï¼Œä¸å®¹æ˜“åã€‚2ã€ä½¿ç”¨é¢‘ç‡æå…¶é¢‘ç¹ã€‚3ã€è¦ä¹ˆä¸ç”¨ï¼Œä¸€æ—¦é‚£é“èœå¼éœ€è¦ç”¨åˆ°ï¼Œè€Œä½ æ°æ°ç¼ºå°‘ï¼Œé‚£è¿™é“èœåŸºæœ¬å°±å±äºåšä¸äº†äº†ï¼Œéè¦ä¸å¯çš„é‚£ç§ã€‚
è°ƒå‘³å“
æ²¹ï¼šå¤§è±†æ²¹å³å¯ï¼Œèœç±½æ²¹æ›´å¥½ã€‚
ç›ï¼šæµ·ç›ã€æ¹–ç›ã€äº•ç›ã€å²©ç›ï¼Œä»»é€‰å³å¯ã€‚
é…±æ²¹ï¼šç”ŸæŠ½ï¼Œè€æŠ½ã€‚ç”ŸæŠ½ä¸€èˆ¬ç”¨æ¥è˜¸æ–™ï¼Œæ‹Œå‡‰èœï¼Œæˆ–è€…æ˜¯ç‚’èœæ—¶æä¸ªé²œï¼›è€æŠ½ä¸€èˆ¬åœ¨çº¢çƒ§æ—¶åšä¸Šè‰²ç”¨ã€‚ç®€å•æ¥è¯´ï¼Œæ‹Œèœç‚’èœç”¨ç”ŸæŠ½ï¼Œçº¢çƒ§ç”¨è€æŠ½ã€‚
é†‹ï¼šé™ˆé†‹ï¼Œç™½é†‹ï¼Œç±³é†‹ã€‚é™ˆé†‹ç”¨é€”æœ€å¹¿ï¼Œå¯ä»¥ç‚’èœï¼Œå¯ä»¥å‡‰æ‹Œï¼Œå¯ä»¥è˜¸é…±ï¼Œè¿˜èƒ½ä¸Šè‰²ï¼›ç™½é†‹æœ€å¤§çš„ç”¨å¤„ä½“ç°åœ¨å®ƒçš„åŠŸèƒ½æ€§ï¼Œæ¯”å¦‚é™¤è‡­é™¤å‘³ã€ç¾è‚¤å…»é¢œã€æ´—æ¶¤é™¤å¢ç­‰ç­‰ï¼›ç±³é†‹å› ä¸ºå£å‘³æŸ”å’Œï¼Œæœ‰ç€éå¸¸æµ“åšçš„é¦™æ°”ï¼Œæ‰€ä»¥å¤šç”¨æ¥å‡‰æ‹Œã€‚
ç³–ï¼šç»µç³–ã€‚
å…¶ä»–ï¼šåä¸‰é¦™ã€å¹²è¾£æ¤’ï¼ˆå°ç±³æ¤’ï¼‰/è¾£æ¤’ç²‰ã€å¤§èŒ´é¦™ï¼ˆå­œç„¶ï¼‰/å­œç„¶ç²‰ã€å…«è§’ã€èŠ±æ¤’/èŠ±æ¤’ç²‰ã€æ¡‚çš®ã€é¦™å¶ã€å°èŒ´é¦™ã€èŠéº»ã€çƒ§çƒ¤æ–™ã€‚

çƒ¹é¥ªä¸‡èƒ½æµç¨‹ï¼š1ã€æ”¾æ²¹ï¼Œæ”¾è‚‰ï¼Œæ”¾æ–™é…’ï¼Œç¿»ç‚’ã€‚2ã€æ”¾èœï¼Œç¿»ç‚’ã€‚3ã€æ”¾å…¥è°ƒå‘³æ–™ï¼ˆæœ€åæ”¾ç›ï¼‰ï¼Œç¿»ç‚’ã€‚4ã€æ ¹æ®ç»éªŒï¼Œè§‚å¯Ÿè‰²æ³½ï¼Œå°ä¸€å°ï¼Œå‡ºé”…ã€‚
å°æŠ€å·§
APPï¼šä¸‹å¨æˆ¿
ä¿å­˜åœŸè±†ï¼šçº¸ç®±+ä¸é€å…‰
å­˜è‚‰ï¼šä¹°æ¥è‚‰ä¹‹åæŒ‰ä¸€é¡¿çš„ä»½é‡åˆ‡å—ï¼Œæ¯å—åˆ†åˆ«æ”¾å…¥ä¿é²œè†œï¼Œå†·å†»ã€‚
åŒ–è‚‰ï¼šç›+ç™½é†‹
ç£¨åˆ€ï¼šç¢—åº•ï¼ŒåŒä¸€ä¸ªæ–¹å‘
ç‚–ç¾Šè‚‰ï¼šè‘±å§œèåœç›ï¼Œä¸è¦æ”¾å…«è§’

ä¹¦ç­¾ä½ æ˜¯æ˜ç™½äº†å“ªå‡ ä¸ªåŸºæœ¬åŸç†ä¹‹åè€Œå¨è‰ºå¤§å¢çš„ï¼Ÿ
æ¥è‡ªä¸“ä¸šå¨å¸ˆçš„36ä¸ªæ— ä»·çš„çƒ¹é¥ªæŠ€å·§
20ä¸ªä½ ä¸çŸ¥é“çš„èªæ˜çš„çƒ¹é¥ªæŠ€å·§
]]></content>
      <categories>
        <category>essay</category>
      </categories>
  </entry>
  <entry>
    <title>ä½¿ç”¨curlè®¿é—®k8sçš„apiserver</title>
    <url>/dev-curl-k8s-api-server/</url>
    <content><![CDATA[k8sç®¡ç†å·¥å…·ç®¡ç†k8sé›†ç¾¤ï¼Œé™¤äº†kubectlå’Œgo-clientï¼Œå…¶å®è¿˜å¯ä»¥ä½¿ç”¨curlå‘½ä»¤ã€‚æœ¬æ–‡ï¼Œæˆ‘ä»¬å°±å­¦ä¹ ä¸€ä¸‹æ€æ ·ä½¿ç”¨curlè®¿é—®k8sçš„apiserverï¼Œå®ç°k8sé›†ç¾¤çš„ç®¡ç†ã€‚ä¸»è¦å‚è€ƒå¦‚ä½•ä½¿ç”¨curlè®¿é—®k8sçš„apiserverã€‚
éœ€æ±‚ï¼šä½¿ç”¨curlå‘½ä»¤ï¼Œå®ç° kubectl get pod åŒæ ·çš„æ•ˆæœã€‚ä½¿ç”¨curlå‘½ä»¤è®¿é—®k8sé›†ç¾¤æ—¶ï¼Œåˆ†åˆ«ä½¿ç”¨è¯ä¹¦å’Œtokenä¸¤ç§è®¤è¯æ–¹å¼ã€‚


ä½¿ç”¨è¯ä¹¦å‡è®¾æˆ‘ä»¬æ‹¥æœ‰é›†ç¾¤çš„kubeconfigæ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ä»ä¸­æ‹¿å‡ºca certã€client certå’Œclient keyï¼Œä¿å­˜ä¸ºæ–‡ä»¶ã€‚å¹¶ä¸”æ‹¿å‡ºapiserverï¼Œä¿å­˜ä¸ºå˜é‡ã€‚
cat config | grep certificate-authority-data | awk &#x27;&#123;print $2&#125;&#x27; | base64 -d &gt; ca.crtcat config | grep client-certificate-data | awk &#x27;&#123;print $2&#125;&#x27; | base64 -d &gt; client.crtcat config | grep client-key-data | awk &#x27;&#123;print $2&#125;&#x27; | base64 -d &gt; client.keyAPISERVER=$(cat config | grep server | awk &#x27;&#123;print $2&#125;&#x27;)

æŸ¥çœ‹APIçš„urlï¼Œä½¿ç”¨curlå‘½ä»¤è°ƒç”¨API
curl --cert ./client.crt --cacert ./ca.crt --key ./client.key $APISERVER/apikubectl get pods -v8curl --cert ./client.crt --cacert ./ca.crt --key ./client.key $APISERVER/api/v1/namespaces/default/pods/

ä»¥ä¸Šï¼Œæ‹¿åˆ°äº†defaultç©ºé—´ä¸‹çš„podä¿¡æ¯ï¼Œå’Œ kubectl get pod ç­‰åŒã€‚
ä½¿ç”¨tokenè·å–tokenæƒ³è¦ä½¿ç”¨curlå‘½ä»¤è®¿é—®apiserverï¼Œé¦–å…ˆè¦è·å¾—ä¸€ä¸ªå…·æœ‰æƒé™çš„tokenã€‚
kubectl get secrets --all-namespaces | grep adminkubectl describe secrets admin-token-vmv2c -n kube-system

è¾“å‡ºç»“æœä¸ºï¼š
Name:         admin-token-vmv2cNamespace:    kube-systemLabels:       &lt;none&gt;Annotations:  kubernetes.io/service-account.name: admin              kubernetes.io/service-account.uid: a75b4cdc-e120-11e9-8695-00163e300424Type:  kubernetes.io/service-account-tokenData====ca.crt:     1419 bytesnamespace:  11 bytestoken:      xxxthisisatokenxxx
æœ€åä¸€ä¸ªå­—æ®µå°±æ˜¯tokenï¼Œé‚£ä¹ˆè¿™ä¸ªtokenæœ‰å“ªäº›æƒé™å‘¢ï¼Ÿ
æŸ¥çœ‹tokenæƒé™æ ¹æ®annotationsä¸­çš„key valueï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªsecretsç»‘å®šäº†ä¸€ä¸ªservice-account(sa)ï¼Œnameä¸ºadminã€‚ç­‰åŒäºè¿™ä¸ªtokenç»‘å®šäº†ä¸€ä¸ªsaï¼Œnameä¸ºadminã€‚
æŸ¥çœ‹adminè¿™ä¸ªservice-accountçš„ä¿¡æ¯ã€‚
kubectl get sa --all-namespaces | grep adminkubectl describe sa admin -n kube-system

è¾“å‡ºç»“æœä¸ºï¼š
Name:                adminNamespace:           kube-systemLabels:              &lt;none&gt;Annotations:         kubectl.kubernetes.io/last-applied-configuration:                       &#123;&quot;apiVersion&quot;:&quot;v1&quot;,&quot;kind&quot;:&quot;ServiceAccount&quot;,&quot;metadata&quot;:&#123;&quot;annotations&quot;:&#123;&#125;,&quot;name&quot;:&quot;admin&quot;,&quot;namespace&quot;:&quot;kube-system&quot;&#125;&#125;Image pull secrets:  &lt;none&gt;Mountable secrets:   admin-token-vmv2cTokens:              admin-token-vmv2cEvents:              &lt;none&gt;
æ²¡æœ‰å…³äºadminçš„æƒé™ä¿¡æ¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å†çœ‹ä¸€ä¸‹adminç»‘å®šäº†å“ªäº›roleå’Œclusterroleã€‚
kubectl get rolebindings --all-namespaces -oyaml | grep &quot;name: admin&quot; -A10 -B10kubectl get clusterrolebindings --all-namespaces -oyaml | grep &quot;name: admin&quot; -A10 -B10

æ‰¾åˆ°æœ‰ç”¨ä¿¡æ¯ä¸ºï¼š
- apiVersion: rbac.authorization.k8s.io/v1  kind: ClusterRoleBinding  metadata:    annotations:      kubectl.kubernetes.io/last-applied-configuration: |        &#123;&quot;apiVersion&quot;:&quot;rbac.authorization.k8s.io/v1beta1&quot;,&quot;kind&quot;:&quot;ClusterRoleBinding&quot;,&quot;metadata&quot;:&#123;&quot;annotations&quot;:&#123;&#125;,&quot;name&quot;:&quot;admin&quot;&#125;,&quot;roleRef&quot;:&#123;&quot;apiGroup&quot;:&quot;rbac.authorization.k8s.io&quot;,&quot;kind&quot;:&quot;ClusterRole&quot;,&quot;name&quot;:&quot;cluster-admin&quot;&#125;,&quot;subjects&quot;:[&#123;&quot;kind&quot;:&quot;ServiceAccount&quot;,&quot;name&quot;:&quot;admin&quot;,&quot;namespace&quot;:&quot;kube-system&quot;&#125;]&#125;    creationTimestamp: &quot;2019-09-27T12:16:37Z&quot;    name: admin    resourceVersion: &quot;1317&quot;    selfLink: /apis/rbac.authorization.k8s.io/v1/clusterrolebindings/admin    uid: a75e1ef9-e120-11e9-8695-00163e300424  roleRef:    apiGroup: rbac.authorization.k8s.io    kind: ClusterRole    name: cluster-admin  subjects:  - kind: ServiceAccount    name: admin    namespace: kube-system

å¯çŸ¥adminç»‘å®šäº†ä¸€ä¸ªåä¸ºcluster-adminçš„clusterroleï¼Œæ¥ç€æŸ¥çœ‹cluster-adminçš„æƒé™ã€‚
kubectl describe clusterrole cluster-admin -n kube-system

ç»“æœä¸ºï¼š
Name:         cluster-adminLabels:       kubernetes.io/bootstrapping=rbac-defaultsAnnotations:  rbac.authorization.kubernetes.io/autoupdate: truePolicyRule:  Resources  Non-Resource URLs  Resource Names  Verbs  ---------  -----------------  --------------  -----  *.*        []                 []              [*]             [*]                []              [*]

cluster-adminè¿™ä¸ªè§’è‰²æ‹¥æœ‰é›†ç¾¤çš„æ‰€æœ‰æƒé™ï¼Œå› æ­¤adminè¿™ä¸ªsaæ‹¥æœ‰é›†ç¾¤çš„æ‰€æœ‰æƒé™ã€‚
ä½¿ç”¨token1ã€è·å–admin saçš„token
TOKEN=$(kubectl describe secrets $(kubectl get secrets -n kube-system |grep admin |cut -f1 -d &#x27; &#x27;) -n kube-system |grep -E &#x27;^token&#x27; |cut -f2 -d&#x27;:&#x27;|tr -d &#x27;\t&#x27;|tr -d &#x27; &#x27;)APISERVER=$(kubectl config view |grep server|cut -f 2- -d &quot;:&quot; | tr -d &quot; &quot;)

æˆ–è€…è·å–default saçš„token
APISERVER=$(kubectl config view --minify | grep server | cut -f 2- -d &quot;:&quot; | tr -d &quot; &quot;)SECRET_NAME=$(kubectl get secrets | grep ^default | cut -f1 -d &#x27; &#x27;)TOKEN=$(kubectl describe secret $SECRET_NAME | grep -E &#x27;^token&#x27; | cut -f2 -d&#x27;:&#x27; | tr -d &quot; &quot;)


2ã€æŸ¥çœ‹APIçš„urlï¼Œä½¿ç”¨curlå‘½ä»¤è°ƒç”¨API
curl --header &quot;Authorization: Bearer $TOKEN&quot; --insecure $APISERVER/apikubectl get pods -v8curl -H &quot;Authorization: Bearer $TOKEN&quot; --insecure $APISERVER/api/v1/namespaces/default/pods/

ä»¥ä¸Šï¼Œæ‹¿åˆ°äº†defaultç©ºé—´ä¸‹çš„podä¿¡æ¯ï¼Œå’Œ kubectl get pod ç­‰åŒã€‚
kubectl proxyä¸Šæ–‡ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨curlå‘½ä»¤è®¿é—®k8sé›†ç¾¤æ—¶ï¼Œåˆ†åˆ«ä½¿ç”¨è¯ä¹¦å’Œtokenä¸¤ç§è®¤è¯æ–¹å¼ã€‚
è€Œä½¿ç”¨kubectl proxyå‘½ä»¤ï¼Œå¯ä»¥å¯åŠ¨ä¸€ä¸ªapiserverçš„æœ¬åœ°ä»£ç†ï¼Œé»˜è®¤ç›‘å¬åœ¨æœ¬åœ°çš„8001ç«¯å£ä¸Šã€‚ä½¿ç”¨apiserveræœ¬åœ°ä»£ç†æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ

æˆ‘ä»¬ä½¿ç”¨curlè®¿é—®apiserverçš„æ—¶å€™ï¼Œä¸ç”¨è‡ªå·±è·å–tokenï¼Œæ›´åŠ ç®€å•ã€‚
å› ä¸ºä¸éœ€è¦ä½¿ç”¨tokenï¼Œæ‰€ä»¥è¿˜å¯ä»¥æµè§ˆå™¨è®¿é—®apiserverã€‚

1ã€å¯åŠ¨apiserveræœ¬åœ°ä»£ç†
kubectl proxykubectl proxy --port 8080

2ã€å¦å¤–æ‰“å¼€ä¸€ä¸ªç»ˆç«¯
curl http://localhost:8001curl http://localhost:8080/api/v1/proxy/namespaces/YOURNAMESPACE/services/YOURSERVICE:PORT






]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>PSç»˜åˆ¶æŠ›ç‰©çº¿</title>
    <url>/hobby-ps-parabola/</url>
    <content><![CDATA[éœ€æ±‚å·²æœ‰ä¸€å¼  draw.io ç»˜åˆ¶å‡ºçš„å›¾åƒå¦‚ä¸‹ã€‚
ç°åœ¨éœ€è¦åœ¨å°çƒä¹‹é—´ç»˜åˆ¶å¹³æŠ›è¿åŠ¨çš„æŠ›ç‰©çº¿ã€‚


ç»˜åˆ¶æ–¹æ³•1ã€ä½¿ç”¨PSæ‰“å¼€åŸå§‹å›¾åƒï¼Œä½¿ç”¨ ctrl+åŠ å· æ”¾å¤§åˆ°åˆé€‚çš„å¤§å°ã€‚
2ã€èœå•æ å›¾å±‚ï¼Œæ–°å»ºï¼Œå›¾å±‚ã€‚
3ã€å·¥å…·æ é€‰æ‹©é’¢ç¬”å·¥å…·ã€‚å•å‡»ä¸Šé¢çš„å°çƒï¼Œç„¶åå•å‡»ä¸‹é¢çš„å°çƒå¹¶æŒ‰ä½é¼ æ ‡ï¼Œå‘ä¸‹æ‹‰ä¼¸ï¼Œç§»åŠ¨è°ƒæ•´æ›²çº¿çš„å¼§åº¦ã€‚
4ã€å³é”®æ›²çº¿ï¼Œå»ºç«‹é€‰åŒºï¼Œç¡®å®šã€‚æˆ–è€…ç›´æ¥ ctrl+Enter ï¼Œè·¯å¾„å˜æˆé€‰åŒºã€‚
5ã€èœå•æ ç¼–è¾‘ï¼Œæè¾¹ï¼Œç¡®å®šã€‚ctrl+D å–æ¶ˆé€‰åŒºï¼Œé€‰ä¸­å›¾å±‚ Enterå›è½¦ å»æ‰é’¢ç¬”ç¬”è¿¹ã€‚
6ã€å›¾å±‚ï¼Œåªæ˜¾ç¤ºæŠ›ç‰©çº¿ï¼Œå·¥å…·æ é€‰æ‹©æ©¡çš®æ“¦å·¥å…·ï¼Œæ“¦é™¤ä¸éœ€è¦çš„éƒ¨åˆ†ã€‚
7ã€å›¾å±‚ï¼Œæ˜¾ç¤ºæ‰€æœ‰å›¾å±‚ï¼Œå³å¯çœ‹åˆ°éœ€è¦çš„æŠ›ç‰©çº¿ã€‚
é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œå®Œæˆå¦å¤–ä¸¤æ¡æŠ›ç‰©çº¿ï¼Œæœ€ç»ˆç»“æœå¦‚ä¸‹å›¾ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>ps</tag>
      </tags>
  </entry>
  <entry>
    <title>MacOSå¿«æ·é”®</title>
    <url>/hobby-macos-shortcut-key/</url>
    <content><![CDATA[å‰è¨€ä¸ºäº†æé«˜å·¥ä½œæ•ˆç‡ï¼ŒåŒæ—¶ç»™macosçœç”µï¼ˆmacosè§¦æ‘¸æ¿æ˜¯æœ€è€—ç”µçš„è®¾å¤‡ï¼‰ï¼Œæœ€å¥½èƒ½å¤ŸæŒæ¡macosçš„å¿«æ·é”®ã€‚æœ¬æ–‡ä¸­ï¼Œå¯¹å¸¸ç”¨çš„macoså¿«æ·é”®è¿›è¡Œæ•´ç†ï¼Œå¤‡å¿˜ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Mac é”®ç›˜å¿«æ·é”®
ã€ŠMacOSç³»ç»Ÿé…ç½®ã€‹
ã€ŠMacOSä¸Šè½¯ä»¶é…ç½®ã€‹
ã€ŠMacOSå°æŠ€å·§ã€‹
ã€ŠVimè¿›é˜¶ã€‹
ã€ŠVSCodeå¸¸ç”¨å¿«æ·é”®å’Œé…ç½®ã€‹
ã€ŠIDEAå¸¸ç”¨å¿«æ·é”®å’Œé…ç½®ã€‹
ã€ŠSublime Text3ã€‹
macä¸­chromeå¸¸ç”¨å¿«æ·é”®
iTerm2 å¿«æ·é”®å¤§å…¨



æ–‡ä»¶/æ–‡æœ¬æ“ä½œ
Command-Xï¼šå‰ªåˆ‡æ‰€é€‰é¡¹å¹¶æ‹·è´åˆ°å‰ªè´´æ¿ã€‚
Command-Cï¼šå°†æ‰€é€‰é¡¹æ‹·è´åˆ°å‰ªè´´æ¿ã€‚è¿™åŒæ ·é€‚ç”¨äºâ€œè®¿è¾¾â€ä¸­çš„æ–‡ä»¶ã€‚
Command-Vï¼šå°†å‰ªè´´æ¿çš„å†…å®¹ç²˜è´´åˆ°å½“å‰æ–‡ç¨¿æˆ– App ä¸­ã€‚è¿™åŒæ ·é€‚ç”¨äºâ€œè®¿è¾¾â€ä¸­çš„æ–‡ä»¶ã€‚
Command-Zï¼šæ’¤é”€ä¸Šä¸€ä¸ªå‘½ä»¤ã€‚
Shift-Command-Zï¼šé‡åšä¸Šä¸€ä¸ªå‘½ä»¤ã€‚
Command-Aï¼šå…¨é€‰å„é¡¹ã€‚
Command-Fï¼šæŸ¥æ‰¾æ–‡ç¨¿ä¸­çš„é¡¹ç›®æˆ–æ‰“å¼€â€œæŸ¥æ‰¾â€çª—å£ã€‚
Command-Gï¼šå†æ¬¡æŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾ä¹‹å‰æ‰€æ‰¾åˆ°é¡¹ç›®å‡ºç°çš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚
Shift-Command-Gï¼šæŸ¥æ‰¾å‡ºç°çš„ä¸Šä¸€ä¸ªä½ç½®ã€‚
Command-Oï¼šæ‰“å¼€æ‰€é€‰é¡¹ï¼Œæˆ–æ‰“å¼€ä¸€ä¸ªå¯¹è¯æ¡†ä»¥é€‰æ‹©è¦æ‰“å¼€çš„æ–‡ä»¶ã€‚
Command-Pï¼šæ‰“å°å½“å‰æ–‡ç¨¿ã€‚
Command-Sï¼šå­˜å‚¨å½“å‰æ–‡ç¨¿ã€‚
Shift-Command-Nï¼šåœ¨â€œè®¿è¾¾â€ä¸­åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ã€‚
Control-Command-ç©ºæ ¼é”®ï¼šæ˜¾ç¤ºå­—ç¬¦æ£€è§†å™¨ï¼Œä½ å¯ä»¥ä»ä¸­é€‰æ‹©è¡¨æƒ…ç¬¦å·å’Œå…¶ä»–ç¬¦å·ã€‚

App/çª—å£æ“ä½œ
Command-Nï¼šæ–°å»ºä¸€ä¸ªAppçª—å£ã€‚
Command-Tï¼šæ‰“å¼€æ–°æ ‡ç­¾é¡µã€‚
Command-Hï¼šéšè—æœ€å‰é¢çš„ App çš„çª—å£ã€‚
Option-Command-Hï¼šæŸ¥çœ‹æœ€å‰é¢çš„ App ï¼Œéšè—æ‰€æœ‰å…¶ä»– Appã€‚
Command-Mï¼šå°†æœ€å‰é¢çš„çª—å£æœ€å°åŒ–è‡³â€œç¨‹åºåâ€ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ€å‰é¢çš„çª—å£ä¸èƒ½æ˜¯æœ€å¤§åŒ–çŠ¶æ€ã€‚
Option-Command-Mï¼šæœ€å°åŒ–æœ€å‰é¢çš„ App çš„æ‰€æœ‰çª—å£ã€‚
Command-Wï¼šå…³é—­æœ€å‰é¢çš„çª—å£ã€‚
Option-Command-Wï¼šå…³é—­ App çš„æ‰€æœ‰çª—å£ã€‚
Command-Qï¼šå…³é—­æœ€å‰é¢çš„çª—å£å¹¶é€€å‡ºç¨‹åºã€‚
Option-Command-Escï¼šå¼ºåˆ¶é€€å‡º Appã€‚
Command-Tabï¼šåœ¨æ‰“å¼€çš„ App ä¸­åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªæœ€è¿‘ä½¿ç”¨çš„ Appã€‚
Command-ç©ºæ ¼é”®ï¼šæ˜¾ç¤ºæˆ–éšè—â€œèšç„¦â€æœç´¢æ ã€‚
Commandâ€“Optionâ€“ç©ºæ ¼é”®ï¼šä»â€œè®¿è¾¾â€çª—å£æ‰§è¡Œâ€œèšç„¦â€æœç´¢ã€‚
Control-Command-Fï¼šå…¨å±ä½¿ç”¨ Appï¼ˆå¦‚æœ App æ”¯æŒï¼‰ï¼Œå–æ¶ˆå…¨å±ä½¿ç”¨Appã€‚
Command-é€—å·(,)ï¼šæ‰“å¼€æœ€å‰é¢çš„ App çš„åå¥½è®¾ç½®ã€‚
Control-Tabï¼šåˆ‡æ¢æ ‡ç­¾é¡µ
Shift-Control-Tabï¼šåå‘åˆ‡æ¢æ ‡ç­¾é¡µ

Command-Tabé¢å¤–è¯´æ˜ï¼š

Command-Tabï¼Œè°ƒå‡ºAppé€‰æ‹©æ¡†
æŒ‰ä½Commandï¼Œç‚¹å‡»Tabå¯ä»¥åˆ‡æ¢Appçª—å£åˆ°æœ€å‰é¢
Command-Tabï¼ŒæŒ‰ä½Commandï¼Œä½¿ç”¨å·¦å³æŒ‰é”®å¯ä»¥åˆ‡æ¢Appçª—å£åˆ°æœ€å‰é¢
å·²ç»æœ€å°åŒ–çš„Appï¼Œæƒ³è¦æ¢å¤ï¼ŒCommand-Tabï¼Œé€‰ä¸­Appåæ¾å¼€Tabï¼ŒæŒ‰ä½Optionï¼Œæ¾å¼€Commandï¼Œæœ€åæ¾å¼€Option

æˆªå±å½•å±
Shift-Command-5ï¼šæ‹æ‘„æˆªå±æˆ–å½•åˆ¶å±å¹•ã€‚
Shift-Command-3ï¼šæˆªå±å±å¹•ã€‚
Shift-Command-4ï¼šæˆªå±é€‰å®šåŒºåŸŸã€‚

æ–‡æœ¬ç¼–è¾‘
Command-å·¦é”®ï¼šè·³è½¬åˆ°æœ¬è¡Œæœ€å‰é¢
Command-å³é”®ï¼šè·³è½¬åˆ°æœ¬è¡Œæœ€åé¢
Command-ä¸Šé”®ï¼šè·³è½¬åˆ°æ–‡æ¡£æœ€å‰é¢
Command-ä¸‹é”®ï¼šè·³è½¬åˆ°æ–‡æ¡£æœ€åé¢
Shift-Command-å·¦é”®ï¼šé€‰ä¸­ä»å…‰æ ‡åˆ°æœ¬è¡Œæœ€å‰é¢
Shift-Command-å³é”®ï¼šé€‰ä¸­ä»å…‰æ ‡åˆ°æœ¬è¡Œæœ€åé¢
Shift-Command-ä¸Šé”®ï¼šé€‰ä¸­ä»å…‰æ ‡åˆ°æ–‡æ¡£æœ€å‰é¢
Shift-Command-ä¸‹é”®ï¼šé€‰ä¸­ä»å…‰æ ‡åˆ°æ–‡æ¡£æœ€åé¢
Command-Deleteï¼šåˆ é™¤å…‰æ ‡å‰çš„æ–‡å­—
Option-å·¦é”®ï¼šè·³è½¬åˆ°ä¸Šä¸€ä¸ªå…³é”®å­—
Option-å³é”®ï¼šè·³è½¬åˆ°ä¸‹ä¸€ä¸ªå…³é”®å­—
Shift-Option-å·¦é”®ï¼šé€‰ä¸­ä¸Šä¸€ä¸ªå…³é”®å­—
Shift-Option-å³é”®ï¼šé€‰ä¸­ä¸‹ä¸€ä¸ªå…³é”®å­—
Command-Enterï¼šè·³è½¬åˆ°ä¸‹ä¸€è¡Œï¼Œå…‰æ ‡åæ–‡å­—ä¸å—å½±å“

Chrome
Command-Tï¼šæ–°å»ºæ ‡ç­¾é¡µ
Command-Wï¼šå…³é—­å½“å‰æ ‡ç­¾é¡µ
Shift-Command-Tï¼šæ¢å¤ä¸Šæ¬¡å…³é—­çš„æ ‡ç­¾é¡µ
Shift-Command-Wï¼šå…³é—­å½“å‰çª—å£
Command-Qï¼šæŒ‰ä½ä¸‰ç§’é€€å‡ºApp
Control-Tabï¼šåˆ‡æ¢æ ‡ç­¾é¡µ
Shift-Control-Tabï¼šåå‘åˆ‡æ¢æ ‡ç­¾é¡µ
Command-Yï¼šæ‰“å¼€å†å²è®°å½•
Shift-Command-Jï¼šæ‰“å¼€ä¸‹è½½è®°å½•
Shift-Command-Deleteï¼šæ‰“å¼€æ¸…ç†æµè§ˆæ•°æ®
Command-Lï¼šèšç„¦åˆ°åœ°å€æ 
Option-Command-Iï¼šæ‰“å¼€å¼€å‘äººå‘˜å·¥å…·

shellé€šç”¨å¿«æ·é”®
Control-Aï¼šåˆ°è¡Œé¦–
Control-Eï¼šåˆ°è¡Œå°¾
Control-Rï¼šæœç´¢å†å²å‘½ä»¤ï¼›å†æ¬¡ç‚¹å‡»Control-Rï¼Œç»§ç»­æœç´¢ä¸Šä¸€æ¡å‘½ä»¤ï¼›å³é”®é€‰ä¸­é€€å‡ºæœç´¢
Control-Lï¼šæ¸…å±
Shift-ZZï¼švimé€€å‡ºæˆ–è€…ä¿å­˜é€€å‡º
ä¸Šä¸‹é”®ï¼šæŸ¥çœ‹å†å²å‘½ä»¤
Control-Dï¼šåˆ é™¤å½“å‰å…‰æ ‡å­—ç¬¦ï¼Œæ²¡æœ‰å­—ç¬¦æ—¶é€€å‡ºå½“å‰ç™»å½•
Control-Hï¼šåˆ é™¤å…‰æ ‡å‰çš„ä¸€ä¸ªå­—ç¬¦
Control-Wï¼šåˆ é™¤å…‰æ ‡å‰çš„ä¸€ä¸ªå•è¯
Control-Kï¼šåˆ é™¤å…‰æ ‡åˆ°æœ«å°¾

iterm2
Command-Tï¼šæ–°å»ºæ ‡ç­¾é¡µ
Command-Wï¼šå…³é—­å½“å‰æ ‡ç­¾é¡µæˆ–è€…åˆ†å±
Command-æ•°å­—ï¼šåˆ‡æ¢æ ‡ç­¾é¡µ
Command-å·¦å³é”®ï¼šåˆ‡æ¢æ ‡ç­¾é¡µ
Command-Enterï¼šåˆ‡æ¢å…¨å±
Shift-Command-Tï¼šå…¨å±æ—¶æ˜¾ç¤ºTab
Command-Dï¼šå‚ç›´åˆ†å±
Shift-Command-Dï¼šæ°´å¹³åˆ†å±
Command-Option-å·¦å³é”®ï¼šåˆ‡æ¢åˆ†å±
Command-æ–¹æ‹¬å·([])ï¼šåˆ‡æ¢åˆ†å±
Command-åˆ†å·(;)ï¼šæŸ¥çœ‹å†å²å‘½ä»¤
è¾“å…¥å‘½ä»¤å¼€å¤´ï¼ŒCommand-åˆ†å·(;)ï¼šæŸ¥çœ‹ä»¥æŸäº›å‘½ä»¤å¼€å¤´çš„å†å²å‘½ä»¤
Shift-Command-Hï¼šæŸ¥çœ‹ç²˜è´´æ¿å†å²
Command-Fï¼šæœç´¢å±å¹•ä¸­çš„å†…å®¹

å…¶ä»–
Control-Shift-Aï¼šæ‰“å¼€å¯åŠ¨å°

]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>macos</tag>
      </tags>
  </entry>
  <entry>
    <title>MacOSå°æŠ€å·§</title>
    <url>/hobby-macos-tricks/</url>
    <content><![CDATA[ä½¿ç”¨å‘½ä»¤æ‰“å¼€ç›®å½•å’Œæ–‡ä»¶1ã€åœ¨finderä¸­æ‰“å¼€å½“å‰ç›®å½•open .
2ã€ä½¿ç”¨é»˜è®¤ç¨‹åºæ‰“å¼€æŒ‡å®šæ–‡ä»¶open README.md
åˆ‡æ¢çª—å£1ã€command + tab2ã€ä¸‰æŒ‡å·¦å³æ»‘åŠ¨3ã€ä¸‰æŒ‡ä¸Šæ»‘


å¿«é€Ÿé¢„è§ˆé€‰ä¸­æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ï¼Œç‚¹å‡»ç©ºæ ¼å³å¯é¢„è§ˆæ–‡ä»¶ï¼Œç‚¹å‡»ä¸Šä¸‹å·¦å³å¯ä»¥é¢„è§ˆå…¶ä»–æ–‡ä»¶ã€‚
éš”ç©ºæŠ•é€æ¥æ”¶æ–¹ï¼šæ‰“å¼€éš”ç©ºæŠ•é€åŠŸèƒ½ï¼ŒåŒæ—¶æ¥æ”¶äººé€‰æ‹©ä»…é™è”ç³»äººæˆ–æ‰€æœ‰äººã€‚
å‘é€æ–¹ï¼š1ã€æ‰“å¼€è¦å‘é€çš„æ–‡ä»¶ï¼Œç„¶åç‚¹æŒ‰ App çª—å£ä¸­çš„â€œå…±äº«â€æŒ‰é’® ã€‚æˆ–è€…ï¼Œåœ¨â€œè®¿è¾¾â€ä¸­æŒ‰ä½ Control é”®ç‚¹æŒ‰ç›¸åº”æ–‡ä»¶ï¼Œç„¶åä»å¿«æ·é”®èœå•ä¸­é€‰å–â€œå…±äº«â€ã€‚2ã€ä»åˆ—å‡ºçš„å…±äº«é€‰é¡¹ä¸­ï¼Œé€‰å–â€œéš”ç©ºæŠ•é€â€ã€‚3ã€ä»â€œéš”ç©ºæŠ•é€â€è¡¨å•ä¸­é€‰å–ä¸€ä½æ¥æ”¶è€…ã€‚
æˆ–è€…æ‰“å¼€â€œéš”ç©ºæŠ•é€â€çª—å£ï¼Œç„¶åå°†æ–‡ä»¶æ‹–ç§»åˆ°æ¥æ”¶è€…ï¼š1ã€åœ¨â€œè®¿è¾¾â€çª—å£çš„è¾¹æ ä¸­é€‰æ‹©â€œéš”ç©ºæŠ•é€â€ã€‚æˆ–è€…ä»èœå•æ ä¸­é€‰å–â€œå‰å¾€â€&gt;â€œéš”ç©ºæŠ•é€â€ã€‚2ã€â€œéš”ç©ºæŠ•é€â€çª—å£éšå³ä¼šæ˜¾ç¤ºé™„è¿‘çš„â€œéš”ç©ºæŠ•é€â€ç”¨æˆ·ã€‚å°†ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ç¨¿ã€ç…§ç‰‡æˆ–å…¶ä»–æ–‡ä»¶æ‹–ç§»åˆ°çª—å£ä¸­æ˜¾ç¤ºçš„æ¥æ”¶è€…ã€‚
è¯¦æƒ…å‚è€ƒ åœ¨ Mac ä¸Šä½¿ç”¨â€œéš”ç©ºæŠ•é€â€ã€‚
ä¼ é€é€Ÿåº¦éå¸¸å¿«ï¼Œç½‘ç»œæ¡ä»¶ä¸é”™çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è¾¾åˆ°å‡ ç™¾MBæ¯ç§’ã€‚
macå’Œipadä¹‹é—´ï¼Œmacå’Œiphoneä¹‹é—´ä¹Ÿå¯ä»¥ä½¿ç”¨éš”ç©ºæŠ•é€ï¼Œéå¸¸æ–¹ä¾¿å®ç”¨ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>macos</tag>
      </tags>
  </entry>
  <entry>
    <title>MacOSå®‰è£…é…ç½®Homebrew</title>
    <url>/dev-macos-homebrew/</url>
    <content><![CDATA[Homebrewç®€ä»‹
Homebrew: The Missing Package Manager for macOS (or Linux).Homebrew installs the stuff you need that Apple (or your Linux system) didnâ€™t.

Homebrewæ˜¯Mac OSXä¸Šçš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ï¼Œç®€ç§°brewã€‚


å®‰è£…Homebrew/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)&quot;# å›½å†…å®‰è£…å¤±è´¥çš„è¯ï¼Œå»ºè®®æ¢ä¸‹é¢çš„è„šæœ¬/bin/zsh -c &quot;$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)&quot;

æ›´æ¢Homebrewè½¯ä»¶æºcd &quot;$(brew --repo)&quot; &amp;&amp; git remote set-url origin git://mirrors.ustc.edu.cn/brew.gitcd &quot;$(brew --repo homebrew/core)&quot; &amp;&amp; git remote set-url origin git://mirrors.ustc.edu.cn/homebrew-core.gitcd &quot;$(brew --repo homebrew/cask)&quot; &amp;&amp; git remote set-url origin git://mirrors.ustc.edu.cn/homebrew-cask.gitbrew update# è¿˜åŸcd &quot;$(brew --repo)&quot; &amp;&amp; git remote set-url origin https://github.com/Homebrew/brew.gitcd &quot;$(brew --repo homebrew/core)&quot; &amp;&amp; git remote set-url origin https://github.com/Homebrew/homebrew-core.gitcd &quot;$(brew --repo homebrew/cask)&quot; &amp;&amp; git remote set-url origin https://github.com/Homebrew/homebrew-cask.gitbrew update

æ›´å¤šå†…å®¹å‚è€ƒHomebrew/Linuxbrew é•œåƒä½¿ç”¨å¸®åŠ©ã€‚
ä½¿ç”¨HomebrewæŸ¥æ‰¾è½¯ä»¶brew search mysql

å®‰è£…æœ€æ–°ç‰ˆè½¯ä»¶brew install mysql

å®‰è£…æŒ‡å®šç‰ˆæœ¬è½¯ä»¶brew install mysql@5.7

æ›´æ–°Homebrewè½¯ä»¶æºbrew update-reset

Error opening archiveé—®é¢˜æè¿°ä½¿ç”¨å›½å†…brewæºå‡ºç°æŠ¥é”™ï¼š
tar: Error opening archive: Failed to open &#x27;xxx.catalina.bottle.tar.gz&#x27;

è§£å†³åŠæ³•æš‚æ—¶æ”¹å›é»˜è®¤çš„brewæºï¼š
unset HOMEBREW_BREW_GIT_REMOTEunset HOMEBREW_CORE_GIT_REMOTEunset HOMEBREW_BOTTLE_DOMAIN





]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
        <category>troubleshooting</category>
        <category>computer</category>
      </categories>
      <tags>
        <tag>macos</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>MacOSå®‰è£…é…ç½®iTerm2</title>
    <url>/dev-macos-iterm2/</url>
    <content><![CDATA[iTerm2ç®€ä»‹
iTerm2 is a replacement for Terminal and the successor to iTerm. It works on Macs with macOS 10.14 or newer. iTerm2 brings the terminal into the modern age with features you never knew you always wanted.

iTerm2æ˜¯MacOSç³»ç»Ÿçš„ä¸€ä¸ªç»ˆç«¯å·¥å…·ã€‚
å‚è€ƒæ–‡æ¡£ï¼šiterm2


å®‰è£…iTerm2ä¸‹è½½iTerm2ï¼ŒåŒå‡»å®‰è£…å³å¯ã€‚
é…ç½®iTerm2é…ç½®rzsz1ã€å®‰è£…iterm2-zmodem
brew install wgetbrew install lrzszgit clone https://github.com/aikuyun/iterm2-zmodem.gitcd iterm2-zmodemcp iterm2-* /usr/local/bincd /usr/local/binchmod +x iterm2-*

2ã€iterm2é…ç½®é¡¹ 
Profiles-&gt;OpenProfiles-&gt;EditProfiles-&gt;Advanced-&gt;Tirggerï¼Œæ·»åŠ 
Regular expression:  /*/*B0100Action: Run Silent CoprocessParameters: /usr/local/bin/iterm2-send-zmodem.shInstant: trueRegular expression:  /*/*B00000000000000Action: Run Silent CoprocessParameters: /usr/local/bin/iterm2-recv-zmodem.shInstant: true

é…ç½®clone session1ã€Iterm2-&gt;Preferences-&gt;Profiles-&gt;Working Directoryå‹¾é€‰ Reuse previous sessionâ€™s directory
2ã€ç¼–è¾‘ .ssh/config æ–‡ä»¶ï¼Œæ·»åŠ 
host *ControlMaster autoControlPath ~/.ssh/master-%r@%h:%pServerAliveInterval 60

3ã€é‡æ–°æ‰“å¼€ç»ˆç«¯ï¼Œç¬¬ä¸€æ¬¡ç™»å½•éœ€è¦å¯†ç ã€‚ç¬¬äºŒæ¬¡ç™»å½•åŒä¸€å°æœºå™¨ï¼Œå°±ä¸éœ€è¦å¯†ç äº†ï¼Œniceã€‚
æ›´æ¢ä¸»é¢˜å’ŒèƒŒæ™¯è‰²æ›´æ¢ä¸»é¢˜ï¼šIterm2 -&gt; Preferences -&gt; Appearance -&gt; General -&gt; Themeæ›´æ¢èƒŒæ™¯è‰²ï¼šIterm2 -&gt; Preferences -&gt; Profiles -&gt; Colors -&gt; Color Presets
è®¾ç½®scrollback linesIterm2 -&gt; Preferences -&gt; Profiles -&gt; Terminal -&gt; ä¿®æ”¹ä¸ºæ›´å¤šçš„è¡Œæ•°ï¼Œæˆ–è€…ç›´æ¥å‹¾é€‰Unlimited scrollback
å…¨å±æ—¶æ˜¾ç¤ºTabView -&gt; Show Tabs in Fullscreenå¿«æ·é”®ï¼šShift-Command-T
]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
        <category>computer</category>
      </categories>
      <tags>
        <tag>macos</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>MacOSé…ç½®å‘é€é‚®ä»¶</title>
    <url>/dev-macos-mail/</url>
    <content><![CDATA[é‚®ä»¶ç³»ç»Ÿç®€ä»‹é‚®ä»¶ç³»ç»Ÿæœ‰ä¸‰ä¸ªç»„æˆéƒ¨åˆ†ï¼š

é‚®ä»¶ç”¨æˆ·ä»£ç†ï¼ˆMUAï¼ŒMail User Agentï¼‰ï¼›
é‚®ä»¶ä¼ é€ä»£ç†ï¼ˆMTAï¼ŒMail Transport Agentï¼‰ï¼›
é‚®ä»¶åˆ†å‘ä»£ç†ï¼ˆMDAï¼ŒMail Deliver Agentï¼‰ã€‚

æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ ä¸€ä¸‹åœ¨MacOSç³»ç»Ÿä¸­ä½¿ç”¨å‘½ä»¤è¡Œå‘é€é‚®ä»¶ã€‚


å®‰è£…é…ç½®msmtpmacosè‡ªå¸¦mailï¼ˆmailxï¼‰å‘½ä»¤ï¼Œè¿™æ˜¯ä¸€ä¸ªMUAï¼Œä¸ä¹‹é…åˆçš„æ˜¯sendmailï¼Œä¸€ä¸ªMTAã€‚ä½†æ˜¯ï¼Œsendmailä¸æ”¯æŒä½¿ç”¨å¤–éƒ¨MDAå‘é‚®ä»¶ï¼Œå› æ­¤éœ€è¦æŠŠsendmailæ›¿æ¢æˆmsmtpã€‚
1ã€å®‰è£…msmtp
brew install msmtp

2ã€é…ç½®ä½¿ç”¨msmtp
sudo vim /etc/mail.rc

mail.rcä¸­æ·»åŠ ï¼š
set sendmail=/usr/local/bin/msmtp

3ã€é…ç½®msmtp
vim ~/.msmtprc

.msmtprc å†…å®¹ä¸ºï¼š
defaultsaccount defaulthost smtp.163.comport 25from quizthink@163.comauth logintls offuser quizthink@163.compassword xxxxxx

4ã€ä¿®æ”¹ .msmtprc æƒé™
chmod 600 ~/.msmtprc

å‘é€é‚®ä»¶echo &quot;Hello world&quot; | mail -s &quot;test&quot; voidking@qq.com


]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
        <category>computer</category>
      </categories>
      <tags>
        <tag>macos</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>Chromeæµè§ˆå™¨ä¸­å¥½ç”¨çš„æ’ä»¶</title>
    <url>/hobby-chrome-plugins/</url>
    <content><![CDATA[å‰è¨€è®°å½•ä¸€ä¸‹Chromeæµè§ˆå™¨ä¸­å¥½ç”¨æ’ä»¶ï¼Œå¤‡å¿˜ã€‚


æ’ä»¶åˆ—è¡¨
LastPass: Free Password Managerï¼Œå¯†ç ä¿å­˜å·¥å…·ï¼Œç¼ºé™·ï¼šå…è´¹ç‰ˆåªèƒ½å•è®¾å¤‡ç™»å½•
Bitwarden - å…è´¹å¯†ç ç®¡ç†å™¨ï¼Œå¯†ç ä¿å­˜å·¥å…·ï¼Œå°ç¼ºé™·ï¼šæ–°å¢å¯†ç éœ€è¦æ‰‹åŠ¨
Bitwardenç®¡ç†é¡µé¢
LastPassæœ€ä½³æ›¿ä»£å·¥å…·BitWarden
command+shift+L è‡ªåŠ¨å¡«å……å¯†ç 


Chronoä¸‹è½½ç®¡ç†å™¨ï¼Œä¸‹è½½ç®¡ç†å™¨
Fatkunå›¾ç‰‡æ‰¹é‡ä¸‹è½½ï¼Œæ‰¹é‡ä¸‹è½½å›¾ç‰‡çš„å·¥å…·
floccus bookmarks syncï¼Œä¹¦ç­¾åŒæ­¥å·¥å…·ï¼Œæºç floccusaddon/floccus
JSONVueï¼Œjsonæ ¼å¼åŒ–æŸ¥çœ‹
Octotree - GitHub code treeï¼Œgithubä»£ç æ ‘æŸ¥çœ‹å·¥å…·
AdBlock â€” æœ€ä½³å¹¿å‘Šæ‹¦æˆªå·¥å…·ï¼Œæµè§ˆå™¨å»å¹¿å‘Šç¥å™¨
ODM çš„è§†é¢‘ä¸‹è½½å™¨ï¼Œåœ¨çº¿è§†é¢‘ä¸‹è½½å™¨ï¼Œä¸‹è½½éŸ³ä¹ã€è§†é¢‘ã€mp3ã€å›¾åƒã€æ–‡ä»¶
è§†é¢‘ä¸‹è½½å™¨ - CoCoCutï¼Œåœ¨çº¿è§†é¢‘ä¸‹è½½å™¨
FetchVï¼Œåœ¨çº¿è§†é¢‘ä¸‹è½½å™¨
OneTabï¼ŒTabé¡µåˆå¹¶ï¼ŒèŠ‚çœæµè§ˆå™¨å†…å­˜
Tampermonkeyï¼ˆæ²¹çŒ´ï¼‰ï¼Œåœ¨ç½‘ç«™ä¸Šè¿è¡Œç”¨æˆ·è„šæœ¬
äºŒç»´ç ï¼ˆç”ŸæˆåŠè¯†åˆ«ï¼‰ï¼Œç”Ÿæˆå’Œè¯†åˆ«äºŒç»´ç çš„å·¥å…·
åˆ’è¯ç¿»è¯‘ï¼Œç¿»è¯‘å·¥å…·
æ²™æ‹‰æŸ¥è¯-èšåˆè¯å…¸åˆ’è¯ç¿»è¯‘ï¼Œç¿»è¯‘å·¥å…·
æ•æ‰ç½‘é¡µæˆªå›¾ - FireShotçš„ï¼Œç½‘é¡µæˆªå›¾å·¥å…·
èº«ä»½éªŒè¯å™¨ï¼Œåœ¨æµè§ˆå™¨ä¸­ç”ŸæˆäºŒæ­¥è®¤è¯ç 

]]></content>
      <categories>
        <category>computer</category>
      </categories>
  </entry>
  <entry>
    <title>MacOSä¸Šè½¯ä»¶é…ç½®</title>
    <url>/hobby-macos-settings/</url>
    <content><![CDATA[MacOSè½¯ä»¶æ¨è
Chromeï¼Œæµè§ˆå™¨
iterm2ï¼Œshellç»ˆç«¯
tabbyï¼Œshellç»ˆç«¯ï¼Œæ”¯æŒmacosã€windowså’Œlinux
sublimeï¼Œç¼–è¾‘å™¨
wpsï¼Œæ–‡æ¡£è¡¨æ ¼ç¼–è¾‘å™¨
ç™¾åº¦äº‘ç›˜ï¼Œäº‘ç›˜
Skimï¼Œpdfé˜…è¯»å™¨
CHM Viewer Starï¼Œchmé˜…è¯»å™¨
draw.io/diagramsï¼Œè½¯ä»¶å·¥ç¨‹ç»˜å›¾è½¯ä»¶ã€‚å°æŠ€å·§ï¼šé£ä¹¦äº‘æ–‡æ¡£ç»˜å›¾å’Œæœ¬åœ°ç»˜å›¾å¯ä»¥ç›¸äº’å¤åˆ¶ç²˜è´´ã€‚
youtube-dlï¼Œè§†é¢‘ä¸‹è½½å·¥å…·
you-getï¼Œè§†é¢‘ä¸‹è½½å·¥å…·
FDMï¼Œä¸‹è½½å·¥å…·
IINAï¼Œè§†é¢‘æ’­æ”¾å™¨
DBeaverï¼Œé€šç”¨æ•°æ®åº“å®¢æˆ·ç«¯ï¼Œèƒ½å¤Ÿè¿æ¥mysqlã€postgresqlã€sqliteã€oracleç­‰ç­‰æ•°æ®åº“
sequelproï¼Œmysqlå®¢æˆ·ç«¯ã€‚sequelproæµ‹è¯•ç‰ˆè§£å†³äº†é€€å‡ºæŠ¥é”™é—®é¢˜
Mountyï¼Œç£ç›˜æŒ‚è½½å·¥å…·
postmanï¼Œæ¥å£æµ‹è¯•å·¥å…·
typoraï¼Œmarkdownç¼–è¾‘å™¨
Stretchlyï¼Œæé†’ä¼‘æ¯å·¥å…·
å¹•äº«ï¼Œå±å¹•å…±äº«å·¥å…·
splashtopï¼Œå±å¹•å…±äº«å·¥å…·
JSON Viewerï¼Œjsonæ ¼å¼åŒ–å·¥å…·
Meldï¼Œä»£ç å¯¹æ¯”å·¥å…·
Multipassï¼Œè™šæ‹Ÿæœºç®¡ç†å·¥å…·
Proxymanï¼ŒæŠ“åŒ…å·¥å…·
Wiresharkï¼ŒæŠ“åŒ…å·¥å…·
Turbo Boost Switcherï¼ŒCPUæ¸©åº¦ç›‘æµ‹å·¥å…·
openconnectï¼Œanyconnectæ›¿ä»£å·¥å…·
QuickFTP Serverï¼Œmacoså¯åŠ¨ftpæœåŠ¡å™¨
AppCleanerï¼Œmacosè½¯ä»¶å¸è½½å·¥å…·
Apache Directory Studioï¼Œldap client
He3ï¼Œå¼€å‘è€…å¿…å¤‡çš„ä¸‡èƒ½å·¥å…·ç®±ï¼Œå†…ç½®è¶…è¿‡200ç§å®ç”¨å·¥å…·
PrettyZooï¼Œzookeeperå¯è§†åŒ–å®¢æˆ·ç«¯å·¥å…·
RedisInsightï¼Œrediså¯è§†åŒ–å®¢æˆ·ç«¯å·¥å…·
HandBrakeï¼Œå¼€æºè§†é¢‘å‹ç¼©å·¥å…·
KeepingYouAwakeï¼Œmacoså±å¹•å¸¸äº®å·¥å…·
Amphetamineï¼Œmacoså±å¹•å¸¸äº®å·¥å…·
RealVNC Viewerï¼Œvnc client
TigerVNC Viewerï¼Œvnc client



ç»ˆç«¯é…ç½®MacOS Terminal1ã€æ‰“å¼€terminalcommandï¼‹spaceï¼Œè¾“å…¥terminalã€‚æˆ–è€… Launchpadï¼Œå…¶ä»–ï¼Œç»ˆç«¯ã€‚ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œå¯ä»¥æŠŠç»ˆç«¯æ”¾åˆ°Dockã€‚
2ã€ä¸ªæ€§è®¾ç½®åœ¨homeç›®å½•ä¸‹åˆ›å»º .bash_profile æ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
# llalias ll=&quot;ls -l&quot;# for colorexport CLICOLOR=1# \h:\W \u\$export PS1=&#x27;\[\033[01;33m\]\u@\h\[\033[01;31m\] \W\$\[\033[00m\] &#x27;# grepalias grep=&#x27;grep --color=always&#x27;

æ›´å¥½çš„æ–¹å¼æ˜¯ï¼Œä½¿ç”¨ohmyzshã€‚
ohmyzshOh My Zsh is a delightful, open source, community-driven framework for managing your Zsh configuration. It comes bundled with thousands of helpful functions, helpers, plugins, themes, and a few things that make you shoutâ€¦â€Oh My ZSH!â€
sh -c &quot;$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot;# orsh -c &quot;$(wget https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O -)&quot;

å®‰è£…å®Œohmyzshåï¼Œé»˜è®¤ä½¿ç”¨çš„shellé…ç½®æ–‡ä»¶æ˜¯ .zshrc ï¼Œåœ¨æœ€åæ·»åŠ ï¼š
# bash_profilesource ~/.bash_profile
å¹³æ—¶æ·»åŠ ç¯å¢ƒé…ç½®ï¼Œä¾ç„¶åœ¨ .bash_profile ä¸­æ·»åŠ ï¼Œè¿™æ ·å°±ä¿æŒäº†å’Œlinuxé…ç½®çš„ä¸€è‡´æ€§ã€‚
åœ¨ .zshrc æˆ–è€… .bash_profile ä¸­æ·»åŠ ä¸€äº›è®¾ç½®åï¼Œä¹Ÿè®¸ä¼šæç¤ºï¼š
zsh compinit: insecure directories, run compaudit for list.Ignore insecure directories and continue [y] or abort compinit [n]? 

è§£å†³åŠæ³•ï¼š
compaudit | xargs chmod g-w,o-w

iterm2å‚è€ƒæ–‡æ¡£ï¼šã€ŠMacOSå®‰è£…é…ç½®iTerm2ã€‹
homebrewå‚è€ƒæ–‡æ¡£ï¼šã€ŠMacOSå®‰è£…é…ç½®Homebrewã€‹
gitå‚è€ƒæ–‡æ¡£ï¼šã€ŠGitå®ç”¨å‘½ä»¤ã€‹ã€‚
ssh configç™»å½•è¿œç¨‹æœåŠ¡å™¨ï¼Œéœ€è¦æ‰§è¡Œå‘½ä»¤
ssh username@host -p port
è®°å¿†è¿™äº›ä¿¡æ¯æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç®€å•çš„æ–¹æ³•ã€‚
1ã€åˆ›å»º .ssh/config æ–‡ä»¶ï¼Œå†…å®¹ä¸º
Host jumpboxHostName jumpbox.voidking.comUser voidkingPort 2345IdentityFile ~/.ssh/id_rsaHost bastionhostHostName 45.68.78.134User rootPort 3456IdentityFile ~/.ssh/id_rsa

2ã€é…ç½®authorized_keys
sudo curl -L https://raw.githubusercontent.com/beautifulcode/ssh-copy-id-for-OSX/master/install.sh | shssh-copy-id -i ~/.ssh/id_rsa.pub jumpboxssh-copy-id -i ~/.ssh/id_rsa.pub bastionhost

3ã€ç™»å½•æœåŠ¡å™¨ 
ssh jumpboxssh bastionhost

tldrtldré¡¹ç›®æ˜¯ç¤¾åŒºç»´æŠ¤çš„å‘½ä»¤è¡Œå·¥å…·å¸®åŠ©é¡µé¢çš„é›†åˆï¼Œæ—¨åœ¨æˆä¸ºå¯¹ä¼ ç»Ÿå¸®åŠ©çš„æ›´ç®€å•çš„è¡¥å……ã€‚
1ã€å®‰è£…tldr
pip3 install tldr

2ã€ä½¿ç”¨
tldr tartldr iconv

gnu-sedmacï¼ˆç±»unixç³»ç»Ÿï¼‰ä½¿ç”¨bsd sedï¼Œè€Œå„ç§linuxå‘è¡Œç‰ˆç”¨çš„æ˜¯linux sedã€‚å› æ­¤ï¼Œmac sedçš„ç”¨æ³•å’Œlinux sedçš„ç”¨æ³•ä¼šæœ‰ä¸€äº›å·®å¼‚ï¼Œè¿™å°±å¸¦æ¥å¾ˆå¤šä¸ä¾¿ï¼Œè§£å†³åŠæ³•æ˜¯ç»™macå®‰è£…linux sedã€‚
1ã€å®‰è£…gnu-sed
brew install gnu-sed

2ã€.bash_profileæ·»åŠ é…ç½®
export PATH=&quot;/usr/local/opt/gnu-sed/libexec/gnubin:$PATH&quot;

3ã€ä½¿é…ç½®ç”Ÿæ•ˆ
source .bash_profile

å¿«æ·cdç›®å½•1ã€macosä¸­å®‰è£…autojump
brew update &amp;&amp; brew install autojump

2ã€.bash_profileä¸­æ·»åŠ é…ç½®
# autojump[ -f /usr/local/etc/profile.d/autojump.sh ] &amp;&amp; . /usr/local/etc/profile.d/autojump.sh

3ã€ä½¿é…ç½®ç”Ÿæ•ˆ
source .bash_profile

4ã€ä½¿ç”¨
j dirname
ç„¶åé…åˆtabè¡¥å…¨ï¼Œå›è½¦è·³è½¬ç›®å½•ã€‚
PSï¼šlinuxä¸­å¯ä»¥é€šè¿‡é…ç½®CDPATHå˜é‡å®ç°å¿«æ·cdç›®å½•.bash_profileæ·»åŠ ï¼š
# workdirCDPATH=&quot;.:~:~/git&quot;

ftp client1ã€è§£é™¤telneté“¾æ¥
brew unlink telnet

å¦‚æœä¹‹å‰å·²ç»å®‰è£…è¿‡telnetï¼Œéœ€è¦è§£é™¤é“¾æ¥ã€‚å› ä¸ºftpå‘½ä»¤ä¾èµ–inetutilsï¼ŒinetutilsåŒ…å«telnetï¼Œå®‰è£…inetutilsæ—¶ä¼šå’Œå•ç‹¬å®‰è£…çš„telnetå‘ç”Ÿå†²çªã€‚
2ã€å®‰è£…inetutils
brew install libidnbrew install inetutilstelnet --helpftp --help

ç¼–è¾‘å™¨sublimesublimeç ´è§£æ–¹æ³•ï¼ˆå·²å¤±æ•ˆï¼‰ï¼š
1ã€vim /etc/hostsï¼Œæ·»åŠ 
127.0.0.1 www.sublimetext.com127.0.0.1 license.sublimehq.com

2ã€sublimeä¸­è¾“å…¥license
----- BEGIN LICENSE -----Member J2TeaMSingle User LicenseEA7E-1011316D7DA350E 1B8B0760 972F8B60 F3E64036B9B4E234 F356F38F 0AD1E3B7 0E9C5FADFA0A2ABE 25F65BD8 D51458E5 3923CE8087428428 79079A01 AA69F319 A1AF29A4A684C2DC 0B1583D4 19CBD290 217618CD5653E0A0 BACE3948 BB2EE45E 422D2C87DD9AF44B 99C49590 D2DBDEE1 75860FD28C8BB2AD B2ECE5A4 EFC08AF2 25A9B864------ END LICENSE ------

ç¼–ç¨‹ç¯å¢ƒjavaå‚è€ƒæ–‡æ¡£ï¼šã€Šå…¨å¹³å°å®‰è£…JDKï¼ˆJavaå¼€å‘ç¯å¢ƒï¼‰ã€‹
pyenvå‚è€ƒæ–‡æ¡£ï¼šã€ŠMacOSå®‰è£…é…ç½®pyenvã€‹
nvmnvmæ˜¯nodeç‰ˆæœ¬ç®¡ç†ç®¡ç†å·¥å…·ï¼ˆNode Version Managerï¼‰ï¼Œå…è®¸æˆ‘ä»¬é€šè¿‡å‘½ä»¤è¡Œå¿«é€Ÿå®‰è£…å’Œä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„nodeã€‚
1ã€å®‰è£…nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.36.0/install.sh | bash
å¦‚æœä¸‹è½½è„šæœ¬æŠ¥é”™ï¼Œå°±æœ¬åœ°åˆ›å»ºinstall.shï¼Œä»ç½‘é¡µæ‹·è´å†…å®¹åˆ°install.shåæ‰§è¡Œã€‚
2ã€ç¼–è¾‘ .bash_profile ï¼Œæ·»åŠ å†…å®¹ï¼š
export NVM_DIR=&quot;$HOME/.nvm&quot;[ -s &quot;$NVM_DIR/nvm.sh&quot; ] &amp;&amp; \. &quot;$NVM_DIR/nvm.sh&quot;  # This loads nvm[ -s &quot;$NVM_DIR/bash_completion&quot; ] &amp;&amp; \. &quot;$NVM_DIR/bash_completion&quot;  # This loads nvm bash_completion

3ã€ä½¿é…ç½®ç”Ÿæ•ˆ
source .bash_profilenvm

4ã€å®‰è£…ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬
export NVM_NODEJS_ORG_MIRROR=https://npm.taobao.org/mirrors/nodenvm -hnvm ls-remotenvm install v10.16.3nvm listnvm use v10.16.3nvm alias default v10.16.3

puerpueræ˜¯ä¸€ä¸ªå‰ç«¯å·¥å…·ï¼Œèƒ½å¤Ÿåœ¨ä»»æ„ç›®å½•å¯åŠ¨webé™æ€æœåŠ¡ï¼Œå¹¶ä¸”å®æ—¶åˆ·æ–°ã€‚
1ã€å…¨å±€å®‰è£…puer
npm install puer -g

2ã€å¯åŠ¨æœåŠ¡
cd /path/to/workspacepuer

svrxæ˜¯puerçš„è¿›åŒ–ç‰ˆï¼ŒåŒæ ·å¥½ç”¨ã€‚1ã€å…¨å±€å®‰è£…svrx
npm install @svrx/cli -g

2ã€å¯åŠ¨æœåŠ¡
cd /path/to/workspacesvrx

nginxå®‰è£…nginxbrew install nginxnginx -V

é»˜è®¤é…ç½®è·¯å¾„ï¼š/usr/local/etc/nginxé»˜è®¤é¡µé¢è·¯å¾„ï¼š/usr/local/var/www
å¯åŠ¨nginxnginxlsof -i :8080

å…³é—­nginxnginx -s stop

é‡è½½é…ç½®nginx -tnginx -s reload

æ•°æ®åº“mysql1ã€å®‰è£…å¯åŠ¨mysql
brew install mysqlmysql.server start

2ã€mysqlclientè¿æ¥mysql
mysql -uroot

3ã€ä½¿ç”¨sequelproè¿æ¥mysqlæŠ¥é”™ï¼š MySQL said: Authentication plugin â€˜caching_sha2_passwordâ€™ cannot be loaded: dlopen(/usr/local/mysql/lib/plugin/caching_sha2_password.so, 2): image not found
è§£å†³ï¼šå‚è€ƒMySQLé‡ç½®å¯†ç ï¼Œè®¾ç½®å¯†ç ã€‚
mysqlclient1ã€å®‰è£…mysqlclient
brew install mysql-client

2ã€.bash_profile ä¸­æ·»åŠ è·¯å¾„
# mysql-clientexport PATH=&quot;/usr/local/opt/mysql-client/bin:$PATH&quot;export LDFLAGS=&quot;-L/usr/local/opt/mysql-client/lib&quot;export CPPFLAGS=&quot;-I/usr/local/opt/mysql-client/include&quot;export PKG_CONFIG_PATH=&quot;/usr/local/opt/mysql-client/lib/pkgconfig&quot;

3ã€æµ‹è¯•ä½¿ç”¨
source ~/.zshrcmysql --help

Uncategorieswscatwscatæ˜¯ç”¨æ¥æµ‹è¯•websocketæ¥å£çš„å·¥å…·ï¼Œå‚è€ƒæ–‡æ¡£websockets/wscat
npm install -g wscat wscat -c ws://websocket-echo.com

å‹ç¼©ä¸è§£å‹zipå‹ç¼©å’Œè§£å‹zipæ–‡ä»¶ï¼š
zip filename.zip filenameunzip filename.zip

åŠ å¯†å‹ç¼©å’Œè§£å‹zipæ–‡ä»¶ï¼š
zip -er filename.zip filenamezip -er -P xxxxxx filename.zip filenamefor i in `ls`;do zip -er -P xxxxxx $i.zip $i;doneunzip -P xxxxxx filename.zipfor i in *.zip;do unzip -P xxxxxx $i;done

è§£å‹ä¸­æ–‡åzipæ–‡ä»¶ï¼š
brew updatebrew install unarunar -e GBK ä¸­æ–‡å.zipunar -e GBK -p xxxxxx ä¸­æ–‡å.zipfor i in *.zip;do unar -e GBK -p xxxxxx $i;done

è§£å‹rarbrew install unrarunrar x package-name.rar

å‘½ä»¤è¡Œå‘é‚®ä»¶å‚è€ƒæ–‡æ¡£ï¼šã€ŠMacOSé…ç½®å‘é€é‚®ä»¶ã€‹
frpå‰æï¼šå‚è€ƒã€Šä½¿ç”¨frpè¿›è¡Œå†…ç½‘ç©¿é€ã€‹é…ç½®å¥½frpæœåŠ¡ç«¯ã€‚æœ¬èŠ‚ä¸­ï¼Œé…ç½®macosçš„å†…ç½‘ç©¿é€ï¼Œ
1ã€ä¸‹è½½macosç”¨çš„frpï¼Œè¿™é‡Œä¸‹è½½frp_0.31.1_darwin_amd64.tar.gzã€‚
2ã€è§£å‹å¹¶é…ç½® frpc.ini
[common]server_addr = 120.77.36.182server_port = 7000token = 12345678[ssh]type = tcplocal_ip = 127.0.0.1local_port = 22remote_port = 3422

3ã€å¯åŠ¨frpcå®¢æˆ·ç«¯
./frpc -c frpc.ini# control+Cbrew install screenscreen ./frpc -c frpc.ini# control+A+D

4ã€å¯ç”¨è¿œç¨‹ç™»å½•ç³»ç»Ÿåå¥½è®¾ç½®ï¼Œå…±äº«ï¼Œå‹¾é€‰è¿œç¨‹ç™»å½•ã€‚
5ã€æµ‹è¯•
ssh localhostssh vk@120.77.36.182 -p 3422

6ã€ä¸´æ—¶ç¦ç”¨macä¼‘çœ å…³é—­å±å¹•åï¼Œmacå¾ˆå¿«ä¼šè¿›å…¥ä¼‘çœ æ¨¡å¼ï¼Œæ— æ³•å†è¿œç¨‹ç™»å½•macï¼Œå› æ­¤éœ€è¦ä¸´æ—¶ç¦ç”¨macä¼‘çœ ã€‚
pmset noidle

dockerå‚è€ƒDocker on Mac with Homebrewï¼Œå®‰è£…é…ç½®dockerã€‚
1ã€å®‰è£…docker
brew cask install docker

2ã€åˆå§‹åŒ–é…ç½®å¯åŠ¨å°ï¼Œç‚¹å‡»dockerå›¾æ ‡ï¼ŒæŒ‰ç…§æç¤ºè¿›è¡Œåˆå§‹åŒ–é…ç½®ã€‚
3ã€æŸ¥çœ‹å®‰è£…ç»“æœ  
docker --version

stretchlyStretchly is a cross-platform Electron app that reminds you to take breaks when working on your computer.è¿™æ¬¾è½¯ä»¶ç•Œé¢å‹å¥½ï¼Œè®¾ç½®ç®€å•ï¼Œæé†’ä¹Ÿå¾ˆniceã€‚å”¯ä¸€ç¼ºç‚¹æ˜¯è½¯ä»¶æ¯”è¾ƒå¤§ï¼Œ70Mã€‚
brew update &amp;&amp; brew install --cask stretchly

æˆ–è€…ä¸‹è½½dmgè½¯ä»¶åŒ…è¿›è¡Œå®‰è£…ã€‚å¦‚æœä¸‹è½½ä¸ä¸‹æ¥ï¼Œå»ºè®®ä½¿ç”¨FDMè¿›è¡Œä¸‹è½½ã€‚
virtualboxvirtualboxé…ç½®win10æ–‡ä»¶å¤¹å…±äº«ï¼š1ã€å¯åŠ¨win10è™šæ‹Ÿæœº2ã€virtualboxèœå•æ ï¼ŒDevicesï¼ŒInsert Guest Additions CD images3ã€win10å†…ï¼Œç‚¹å‡»CDé©±åŠ¨å™¨é‡Œçš„VBoxWindowAddions.exeè¿›è¡Œæ’ä»¶å®‰è£…4ã€virtualbox win10è™šæ‹Ÿæœºè®¾ç½®ï¼Œå…±äº«æ–‡ä»¶å¤¹5ã€æ·»åŠ å…±äº«æ–‡ä»¶ï¼Œå…±äº«æ–‡ä»¶å¤¹è·¯å¾„é€‰æ‹©å®¿ä¸»æœº(Mac)ä¸Šçš„ä¸€ä¸ªè·¯å¾„ï¼Œå…±äº«æ–‡ä»¶å¤¹åç§°éšæ„ï¼ŒæŒ‚è½½ç‚¹å¡«å…¥X:6ã€win10è™šæ‹Ÿæœºå†…å‡ºç°äº†Xç›˜ï¼Œç”¨äºå…±äº«
ffmpegã€Šm3u8è§†é¢‘ä¸‹è½½æ–¹æ³•ã€‹ä¸€æ–‡ä¸­æåˆ°ffmpegæ˜¯ä¸€ä¸ªå¾ˆå¥½ç”¨çš„è§†é¢‘æ ¼å¼è½¬æ¢å·¥å…·ï¼Œåœ¨macosä¸Šå®‰è£…å’Œä½¿ç”¨ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚
1ã€å®‰è£…ffmpeg
brew install ffmpeg

å®‰è£…æŠ¥é”™ tar: Error opening archive: Failed to open â€˜â€¦â€“bdw-gc-8.0.4_2.catalina.bottle.tar.gzâ€™è§£å†³åŠæ³•ï¼š
export HOMEBREW_BOTTLE_DOMAIN=&#x27;&#x27;

2ã€flvè½¬mp4
ffmpeg -i filename.flv filename.mp4

openconnectanyconnectä¸‹è½½è´¹åŠ²ï¼Œéœ€è¦æ³¨å†Œå¹¶å¡«å†™å®Œæ•´ä¿¡æ¯ï¼Œè€Œä¸”é…ç½®ä¹Ÿå¾ˆéº»çƒ¦ï¼Œå› æ­¤é€‰æ‹©ä½¿ç”¨openconnectæ›¿ä»£ã€‚
1ã€å®‰è£…openconnect
brew install openconnect

2ã€å¯åŠ¨openconnect
sudo openconnect vpn.voidking.com
ç¬¬ä¸€æ¬¡æˆåŠŸè¿æ¥åï¼Œç¬¬äºŒæ¬¡è¿æ¥æ—¶æƒ³è¦ä¿®æ”¹ç”¨æˆ·åå¯†ç ï¼Œä½†æ˜¯æ²¡æœ‰æ‰¾åˆ°å…¥å£ï¼Œäºæ˜¯æ¢æˆå›¾å½¢ç•Œé¢çš„openconnectã€‚
3ã€å®‰è£…å›¾å½¢ç•Œé¢çš„openconnect
brew install openconnect-gui --cask

å‚è€ƒæ–‡æ¡£ï¼š

RV34x: Install Cisco AnyConnect Secure Mobility Client on a Mac Computer
MacOSä¸Šä½¿ç”¨Openconnectä»£æ›¿Cisco Anyconnect

iperf1ã€å®‰è£…iperf
brew install iperf

2ã€æœåŠ¡å™¨ç«¯å®‰è£…iperfï¼Œå¯åŠ¨iperfæœåŠ¡ç«¯
yum install -y iperfiperf -s

3ã€ä½¿ç”¨iperfå®¢æˆ·ç«¯æµ‹è¯•ç½‘é€Ÿ
iperf -c 192.168.56.112 -i 3



]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
        <category>computer</category>
      </categories>
      <tags>
        <tag>macos</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>MacOSç³»ç»Ÿé…ç½®</title>
    <url>/hobby-macos-system-settings/</url>
    <content><![CDATA[ç”¨æˆ·åé…ç½®ç³»ç»Ÿåå¥½è®¾ç½®ï¼Œç”¨æˆ·ä¸ç¾¤ç»„ï¼Œç‚¹æŒ‰é”æŒ‰é’®ä»¥è¿›è¡Œä¿®æ”¹ã€‚å³é”®ç”¨æˆ·ï¼Œé«˜çº§é€‰é¡¹ã€‚ä¿®æ”¹è´¦æˆ·åç§°ä¸ºvkï¼Œè¿™ä¸ªåç§°æ˜¯shellä¸­æ˜¾ç¤ºçš„ç”¨æˆ·åã€‚ä¿®æ”¹å…¨åä¸ºvoidkingï¼Œè¿™ä¸ªåç§°æ˜¯macç³»ç»Ÿæ˜¾ç¤ºçš„åç§°ã€‚ä¸ªäººç›®å½•ï¼Œä¿®æ”¹ä¸º /Users/vk ï¼Œè¿™ä¸ªç›®å½•æ˜¯æ–°çš„homeç›®å½•ã€‚
ä¿®æ”¹å®Œæˆåç‚¹å‡»â€œå¥½â€ï¼Œç³»ç»Ÿé‡å¯ï¼Œç„¶åæ•´ä¸ªç³»ç»Ÿæ¢å¤åˆ°å‡ºå‚çŠ¶æ€ã€‚


å¯†ç ç³»ç»Ÿåå¥½è®¾ç½®ï¼Œç”¨æˆ·ä¸ç¾¤ç»„ï¼Œæ›´æ”¹å¯†ç ã€‚
è§¦æ§æ¿ç³»ç»Ÿåå¥½è®¾ç½®ï¼Œè§¦æ§æ¿ï¼Œå…‰æ ‡ä¸ç‚¹æŒ‰ã€‚å‹¾é€‰ è½»ç‚¹æ¥ç‚¹æŒ‰ï¼Œå‹¾é€‰ è¾…åŠ©ç‚¹æŒ‰ï¼Œè·Ÿè¸ªé€Ÿåº¦è°ƒæ•´ä¸ºå–œæ¬¢çš„é€Ÿåº¦ã€‚ 
ç”µè„‘åç§°ç³»ç»Ÿåå¥½è®¾ç½®ï¼Œå…±äº«ï¼Œç”µè„‘åç§°ï¼Œç¼–è¾‘ã€‚
å¼€æœºå£°éŸ³1ã€å…³é—­å¼€æœºå£°éŸ³
sudo nvram BootAudio=%00sudo nvram SystemAudioVolume=%80

2ã€æ‰“å¼€å¼€æœºå£°éŸ³
sudo nvram BootAudio=%01sudo nvram -d SystemAudioVolume

WindowServerå ç”¨èµ„æºè¿‡å¤šç³»ç»Ÿåå¥½è®¾ç½®ï¼Œè¾…åŠ©åŠŸèƒ½ï¼Œæ˜¾ç¤ºï¼Œå‹¾é€‰å‡å¼±åŠ¨æ€æ•ˆæœå’Œå‡å°‘é€æ˜åº¦
ä¸´æ—¶è®¾ç½®ä¸å…³é—­å±å¹•sudo supmset -g | grep sleeppmset -a displaysleep 30pmset -g | grep sleeppmset -a displaysleep 10pmset -g | grep sleep

èœå•å¿«æ·é”®å³ä¸Šè§’è‹¹æœæŒ‰é’®ï¼Œç‚¹å‡»ä¼šå‡ºç°â€œç¡çœ â€ã€â€œé‡æ–°å¯åŠ¨â€¦â€ã€â€œå…³æœºâ€¦â€ç­‰èœå•é€‰é¡¹ï¼Œè¿™äº›é€‰é¡¹å¯ä»¥è®¾ç½®å¯¹åº”çš„å¿«æ·é”®ã€‚ä»¥è®¾ç½®â€œç¡çœ â€å¿«æ·é”®ä¸ºä¾‹ï¼šå³ä¸Šè§’è‹¹æœæŒ‰é’®ï¼Œç³»ç»Ÿåå¥½è®¾ç½®ï¼Œé”®ç›˜ï¼Œå¿«æ·é”®ï¼ŒAppå¿«æ·é”®ï¼ŒåŠ å·ï¼Œèœå•æ ‡é¢˜è¾“å…¥â€œç¡çœ â€ï¼Œé”®ç›˜å¿«æ·é”®æŒ‰ä¸‹â€œcontrol+command+Sâ€ã€‚ä»¥ä¸Šï¼Œå°±è®¾ç½®å¥½äº†ç¡çœ çš„å¿«æ·é”®ã€‚
æŸ¥çœ‹æ–‡ä»¶ä½¿ç”¨macç³»ç»Ÿçš„Finderï¼Œå¯ä»¥æŸ¥çœ‹â€œæˆ‘çš„æ‰€æœ‰æ–‡ä»¶â€ï¼Œä½†æ˜¯è¿™æ˜¯å‡çš„ï¼Œç‚¹å‡»è¿™ä¸ªé€‰é¡¹åªèƒ½çœ‹åˆ°æœ€è¿‘ä½¿ç”¨çš„ä¸€äº›æ–‡ä»¶ã€‚
è§£å†³åŠæ³•ï¼šæ‰“å¼€Finderï¼Œcommandï¼‹é€—å·ï¼Œå‡ºç°Finderåå¥½è®¾ç½®ï¼Œè¾¹æ ï¼Œè®¾å¤‡ä¸­å‹¾é€‰ç¡¬ç›˜ã€‚ç„¶ååœ¨ä¾§è¾¹æ ä¸­ï¼Œå°±å¯ä»¥æ‰“å¼€ç¡¬ç›˜ï¼Œçœ‹åˆ°æ‰€æœ‰æ–‡ä»¶äº†ã€‚
å½“ç„¶ï¼Œ /etc è¿™ç§æ–‡ä»¶å¤¹æ˜¯çœ‹ä¸åˆ°çš„ã€‚
è®¾ç½®é»˜è®¤æ–‡ä»¶æ’åºæ‰“å¼€Finderï¼Œç‚¹å‡»å®¶ç›®å½•ï¼Œcommandï¼‹Jï¼Œé€‰æ‹©æ’åºæ–¹å¼ï¼ˆç§ç±»ï¼‰ï¼Œç”¨åšé»˜è®¤ã€‚å®¶ç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•ï¼Œéƒ½ä¼šç»§æ‰¿è¿™ç§é»˜è®¤æ’åºæ–¹å¼ã€‚
ç¦æ­¢ç”Ÿæˆ .DS_Store.DS_Store(Desktop Services Store)æ–‡ä»¶ç›®çš„åœ¨äºå­˜è´®ç›®å½•çš„è‡ªå®šä¹‰å±æ€§ï¼Œä¾‹å¦‚æ˜¾ç¤ºæ–¹å¼ä¸ºå›¾æ ‡è¿˜æ˜¯åˆ—è¡¨ã€‚
ç¦æ­¢ï¼šdefaults write com.apple.desktopservices DSDontWriteNetworkStores -bool TRUEå¼€å¯ï¼šdefaults delete com.apple.desktopservices DSDontWriteNetworkStores
æ³¨æ„ï¼šç¦æ­¢ç”Ÿæˆ .DS_Store åï¼Œå·²ç»å­˜åœ¨çš„ .DS_Store ä¸å—å½±å“ã€‚
æ¸…é™¤æœ€è¿‘é¡¹ç›®ç‚¹å‡»å·¦ä¸Šè§’è‹¹æœå›¾æ ‡ï¼Œæœ€è¿‘ä½¿ç”¨çš„é¡¹ç›®ï¼Œæ¸…é™¤èœå•ã€‚
ä½†æ˜¯ï¼Œä¸Šé¢çš„æ–¹æ³•å¹¶ä¸ä¼šæ¸…é™¤â€œæœ€è¿‘é¡¹ç›®â€è¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶è®°å½•ï¼Œè¿™æ˜¯å› ä¸ºâ€œæœ€è¿‘é¡¹ç›®â€æ˜¯spotlightç®¡ç†çš„ã€‚è§£å†³åŠæ³•ï¼š1ã€ç‚¹å‡»å·¦ä¸Šè§’è‹¹æœå›¾æ ‡ï¼Œç³»ç»Ÿåå¥½è®¾ç½®ï¼Œèšç„¦ï¼Œéšç§ï¼Œç‚¹å‡»+å·ã€‚2ã€é€‰æ‹©ç›®å½•Aï¼Œç‚¹å‡»é€‰å–ã€‚3ã€å†çœ‹â€œæœ€è¿‘é¡¹ç›®â€ï¼Œå·²ç»ä¸å†æ˜¾ç¤ºç›®å½•Aé‡Œçš„æ–‡ä»¶ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä»éšç§é‡Œå»æ‰ç›®å½•Aï¼Œé‚£ä¹ˆç›®å½•Aé‡Œçš„æ–‡ä»¶è¿˜ä¼šæ…¢æ…¢å‡ºç°åœ¨â€œæœ€è¿‘é¡¹ç›®â€ã€‚
å¦‚æœæƒ³è¦æ”¹å˜â€œæœ€è¿‘é¡¹ç›®â€ç›®å½•ç­›é€‰æ–‡ä»¶çš„è§„åˆ™ï¼ŒæŒ‰ç…§å¦‚ä¸‹æ–¹æ³•å¤„ç†ï¼š1ã€ç»™â€œæœ€è¿‘é¡¹ç›®â€æ·»åŠ ä¸€ä¸ªæœç´¢æ¡ä»¶ï¼Œè®©å…¶åªæ˜¾ç¤ºæœ€è¿‘ä¸‰å¤©å†…æ‰“å¼€æˆ–ä¿®æ”¹è¿‡çš„é¡¹ç›®2ã€åœ¨â€œæœ€è¿‘é¡¹ç›®â€çª—å£ä¸­ç‚¹å‡»å·¥å…·æ çš„é½¿è½®æŒ‰é’®ç„¶åé€‰æ‹©â€œæ˜¾ç¤ºæœç´¢æ¡ä»¶â€3ã€åœ¨æœç´¢é¡¹ç›®é‡Œé€‰æ‹©â€œä¸Šæ¬¡æ‰“å¼€æ—¥æœŸâ€4ã€ç„¶åè®¾å®šå¥½ç›¸åº”çš„æœç´¢æ¡ä»¶ï¼Œç‚¹å‡»â€œå­˜å‚¨â€5ã€æœ€åä¸ºå…¶å‘½åï¼Œåˆ‡è®°å‹¾é€‰â€œæ·»åŠ åˆ°è¾¹æ â€å†ç‚¹å‡»â€œå­˜å‚¨â€6ã€è¾¹æ å°±ä¼šæ–°å¢è¿™ä¸ªåªæ˜¾ç¤ºæœ€è¿‘ 3 å¤©é¡¹ç›®çš„é€‰é¡¹ï¼Œç„¶åæŠŠåŸæ¥çš„â€œæœ€è¿‘é¡¹ç›®â€ä»è¾¹æ ç§»é™¤æ‰ã€‚
é¢„è§ˆæ¸…é™¤æœ€è¿‘é¡¹ç›®æ‰“å¼€é¢„è§ˆï¼Œèœå•æ ï¼Œæ–‡ä»¶ï¼Œæ‰“å¼€æœ€è¿‘ä½¿ç”¨ï¼Œæ¸…é™¤èœå•ã€‚
æ‰“ä¸å¼€è½¯ä»¶ä»ç½‘ç»œä¸‹è½½çš„è½¯ä»¶ï¼Œå®‰è£…æ—¶æç¤ºï¼šæ‰“ä¸å¼€â€œxxxâ€ï¼Œå› ä¸ºå®ƒæ¥è‡ªèº«ä»½ä¸æ˜çš„å¼€å‘è€…ã€‚
è§£å†³åŠæ³•ï¼šç³»ç»Ÿåå¥½è®¾ç½®ï¼Œå®‰å…¨æ€§å’Œéšç§ï¼Œç‚¹é”æŒ‰é’®ä»¥è¿›è¡Œæ›´æ”¹ï¼Œä»»ä½•æ¥æºï¼Œå…è®¸æ¥è‡ªä»»ä½•æ¥æºã€‚
è§£é”å±å¹•åå¡ä½è§£é”å±å¹•åå¡ä½ï¼šè“ç‰™é”®ç›˜è®¾ç½® æ²¡æœ‰è¿æ¥å¥½çš„é”®ç›˜
è§£å†³åŠæ³•ï¼šç³»ç»Ÿåå¥½è®¾ç½®ï¼Œè“ç‰™ï¼Œé«˜çº§ï¼Œå–æ¶ˆå‹¾é€‰ â€œå¦‚æœæœªæ£€æµ‹åˆ°é”®ç›˜ï¼Œåˆ™åœ¨å¯åŠ¨æ—¶æ‰“å¼€è“ç‰™è®¾ç½®åŠ©ç†â€
å®‰è£…å­—ä½“1ã€ä»windowsç³»ç»Ÿ C:\Windows\Fonts ç›®å½•ä¸­æ‹·è´éœ€è¦çš„å­—ä½“ã€‚2ã€command+shift+Gï¼Œè¾“å…¥ /Library/Fontsï¼Œå‰å¾€ã€‚3ã€å­—ä½“æ”¾å…¥ Fonts ç›®å½•ã€‚
å¯åŠ¨sftp1ã€ç³»ç»Ÿåå¥½è®¾ç½®ï¼Œå…±äº«ï¼Œå‹¾é€‰è¿œç¨‹ç™»å½•
2ã€æµ‹è¯•
sftp localhost

å¯åŠ¨ftpä½¿ç”¨QuickFTP Server
ç›®å½•è§„åˆ’$&#123;HOME&#125;ç›®å½•ä¸‹ï¼Œåˆ›å»ºä»¥ä¸‹ç›®å½•ï¼š

tmpï¼šåœ¨è¯¥ç›®å½•ä¸­æ‰§è¡Œå‘½ä»¤ã€æµ‹è¯•è„šæœ¬ç­‰ï¼Œéšæ—¶å¯åˆ ã€‚
scriptsï¼šæˆç†Ÿçš„è„šæœ¬æ”¾åœ¨è¯¥ç›®å½•ä¸‹ã€‚
gitï¼šåœ¨è¯¥ç›®å½•ä¸­å­˜æ”¾gitä»“åº“ã€‚

è¯»å†™ntfsmacä¸å€ŸåŠ©ç¬¬ä¸‰æ–¹è½¯ä»¶ï¼Œä¹Ÿæ˜¯å¯ä»¥è¯»å†™ntfsæ–‡ä»¶ç³»ç»Ÿçš„ç§»åŠ¨ç¡¬ç›˜çš„ã€‚1ã€æŸ¥çœ‹ç§»åŠ¨ç¡¬ç›˜åç§°åœ¨æ¡Œé¢ä¸ŠæŸ¥çœ‹ç¡¬ç›˜åç§°ï¼Œæˆ–è€…é€šè¿‡diskutil listå‘½ä»¤æŸ¥çœ‹ç¡¬ç›˜åç§°ã€‚
2ã€ä¿®æ”¹fstabé…ç½®æ¯”å¦‚ç¡¬ç›˜åç§°ä¸ºWDï¼Œé‚£ä¹ˆåœ¨/etc/fstabä¸­æ·»åŠ é…ç½®ï¼š
LABEL=WD none ntfs rw,auto,nobrowse

3ã€é‡æ–°æ’å…¥ç¡¬ç›˜æ¨å‡ºç¡¬ç›˜ï¼Œå†é‡æ–°æ’å…¥ï¼Œå‘ç°æ¡Œé¢ä¸å†æ˜¾ç¤ºè¯¥ç¡¬ç›˜ï¼Œæ²¡å…³ç³»ã€‚
4ã€è¯»å†™ç§»åŠ¨ç¡¬ç›˜
df -hcd /Volumes/WDopen .

5ã€æ¨å‡ºç§»åŠ¨ç¡¬ç›˜æ–¹æ³•ä¸€ï¼š
cd ..open .# ç•Œé¢ç‚¹å‡»æ¨å‡ºç§»åŠ¨ç¡¬ç›˜

æ–¹æ³•äºŒï¼š
cd ..diskutil unmount /Volumes/WDdiskutil unmount force /Volumes/WD

æ£€æŸ¥wifiä¿¡å·å¼ºåº¦å›¾å½¢ç•Œé¢æ‰“å¼€wireless Diagnosticsï¼ˆæ— çº¿è¯Šæ–­ï¼‰ï¼Œå¿½ç•¥æ‰“å¼€çš„çª—å£ã€‚èœå•æ ç‚¹å‡»çª—å£ï¼Œæ‰«æï¼Œçœ‹åˆ°ç½‘ç»œä¿¡æ¯ä¸­ï¼ŒRSSIè¡¨ç¤ºä¿¡å·å¼ºåº¦ï¼Œè¿™ä¸ªå€¼è¶Šæ¥è¿‘0å€¼ï¼Œä¿¡å·å¼ºåº¦è¶Šå¥½ã€‚
å‘½ä»¤è¡Œæ˜¾ç¤ºé™„è¿‘å¯ç”¨wifiç½‘ç»œåˆ—è¡¨ï¼ŒåŒ…æ‹¬ä¿¡å·å¼ºåº¦ã€ä¿¡é“å’ŒåŠ å¯†ç±»å‹ç­‰ã€‚
/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -s
å…¶ä¸­RSSIè¡¨ç¤ºä¿¡å·å¼ºåº¦ï¼Œè¿™ä¸ªå€¼è¶Šæ¥è¿‘0å€¼ï¼Œä¿¡å·å¼ºåº¦è¶Šå¥½ã€‚
æŸ¥çœ‹å½“å‰è¿æ¥çš„wifiç½‘ç»œä¿¡æ¯ï¼ŒåŒ…æ‹¬ä¿¡å·å¼ºåº¦ã€ä¿¡é“å’ŒåŠ å¯†ç±»å‹ç­‰ã€‚
/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -I
å…¶ä¸­agrCtlRSSIè¡¨ç¤ºä¿¡å·å¼ºåº¦ï¼Œè¿™ä¸ªå€¼è¶Šæ¥è¿‘0å€¼ï¼Œä¿¡å·å¼ºåº¦è¶Šå¥½ã€‚
é—®é¢˜è®°å½•é›·ç”µæ¥å£çªç„¶ä¸å¯ç”¨é—®é¢˜é—®é¢˜æè¿°ï¼šMacBookå››ä¸ªé›·ç”µ3æ¥å£ï¼Œå…¶ä¸­ä¸€ä¸ªæ¥å£çªç„¶ä¸èƒ½ç”¨äº†ï¼Œå……ç”µæ²¡ååº”ï¼Œæ¥æ˜¾ç¤ºå™¨ä¹Ÿæ²¡ååº”ï¼Œå¦å¤–ä¸‰ä¸ªæ¥å£æ­£å¸¸ã€‚
è§£å†³åŠæ³•ï¼šå°† Mac å…³æœºå¹¶åˆä¸Šæ˜¾ç¤ºå±ç­‰å¾… 30 ç§’ï¼Œç„¶åç¿»å¼€æ˜¾ç¤ºå±ä»¥å¯åŠ¨ Macã€‚
command+spaceå¤±æ•ˆé—®é¢˜é—®é¢˜æè¿°ï¼šcommand+spaceæ˜¯æ‰“å¼€èšç„¦æœç´¢çš„å¿«æ·é”®ï¼Œä½†æ˜¯ï¼Œæœ‰æ—¶å€™å‘ç°ç‚¹å‡»äº†command+spaceä¹Ÿä¸ä¼šå‡ºç°èšç„¦æœç´¢çš„çª—å£ã€‚æŸ¥çœ‹ç³»ç»Ÿåå¥½é…ç½®ï¼Œå¿«æ·é”®ä¹Ÿæ²¡æœ‰è¢«æ›´æ”¹ã€‚é‡å¯æœºå™¨åï¼Œå¿«æ·é”®èƒ½å¤Ÿèƒ½å¤Ÿæ¢å¤æ­£å¸¸ã€‚
è§£å†³åŠæ³•ï¼šçœ‹çœ‹å¦å¤–ä¸€å—å±å¹•ï¼ï¼ï¼æœ‰æ—¶å€™èšç„¦æœç´¢ä¼šè·‘åˆ°å¦å¤–ä¸€å—å±å¹•ä¸Šã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>macos</tag>
      </tags>
  </entry>
  <entry>
    <title>å®‰è£…éƒ¨ç½²K8Sé›†ç¾¤çš„è‰°éš¾ä¹‹è·¯</title>
    <url>/dev-install-k8s-the-hard-way/</url>
    <content><![CDATA[å‰è¨€ã€Šä½¿ç”¨kubeadmå®‰è£…éƒ¨ç½²K8Sé›†ç¾¤ã€‹ä¸€æ–‡ä¸­ï¼Œä½¿ç”¨kubeadmå®‰è£…éƒ¨ç½²äº†k8sé›†ç¾¤ã€‚ä½†æ˜¯ï¼Œkubeadmçš„å®‰è£…æ–¹å¼å¤ªç®€å•äº†ï¼Œè€Œckaçš„è¦æ±‚ä¸æ­¢è¿™ä¹ˆç®€å•ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å­¦ä¹ ä»é›¶å¼€å§‹ï¼Œä¸€ä¸ªä¸€ä¸ªç»„ä»¶å®‰è£…é…ç½®k8sé›†ç¾¤çš„æ–¹æ³•ï¼Œæ‰€è°“k8s the hard wayã€‚
æœ¬æ–‡çš„ç›®æ ‡æ˜¯åœ¨virtualboxä¸­ï¼Œæ­å»ºä¸€ä¸ªk8sé›†ç¾¤ï¼Œä¸€ä¸ªmasterèŠ‚ç‚¹ï¼Œä¸€ä¸ªnode01èŠ‚ç‚¹ã€‚
ä¸»è¦å‚è€ƒkelseyhightower/kubernetes-the-hard-wayå’Œmmumshad/kubernetes-the-hard-wayã€‚


å‡†å¤‡
åˆ›å»ºä¸¤å°centos7è™šæ‹Ÿæœºï¼ŒmasterèŠ‚ç‚¹1C2Gï¼Œnode01èŠ‚ç‚¹1C1G
é…ç½®ç½‘ç»œï¼ŒmasterèŠ‚ç‚¹IPä¸º192.168.56.150ï¼Œnode01èŠ‚ç‚¹çš„IPä¸º192.168.56.151
é…ç½®hostnameï¼Œå¹¶ä¸”æŠŠä¸¤ä¸ªèŠ‚ç‚¹çš„hostnameæ·»åŠ åˆ°/etc/hosts
å®‰è£…Dockerï¼Œå‚è€ƒã€ŠDockerå…¥é—¨ã€‹

å®‰è£…æµç¨‹1ã€å®‰è£…kubectl
2ã€åˆ›å»ºCAï¼Œç»™æ¯ä¸ªç»„ä»¶ç”ŸæˆTLSè¯ä¹¦TLSè¯ä¹¦åŒ…æ‹¬ï¼šETCD Server CertificateKubernetes API Server CertificateController Manager Client CertificateScheduler Client Certificate
Service Account Key PairKube Proxy Client CertificateKubelet Client CertificatesAdmin Client Certificate
3ã€ç»™æ¯ä¸ªç»„ä»¶ç”Ÿæˆk8sé…ç½®æ–‡ä»¶ï¼Œç”¨äºè®¿é—®apiserver
4ã€ç”Ÿæˆæ•°æ®åŠ å¯†é…ç½®å’Œå¯†é’¥ï¼Œä½¿é›†ç¾¤æ”¯æŒé™æ€åŠ å¯†
5ã€æŒ‡å®šCAå’ŒTLSï¼Œåœ¨masterèŠ‚ç‚¹å¯åŠ¨etcd
6ã€æŒ‡å®šCAå’ŒTLSï¼Œåœ¨masterèŠ‚ç‚¹å¯åŠ¨kube-apiserverã€kube-controller-managerã€kube-scheduler
7ã€æŒ‡å®šCAå’ŒTLSï¼Œåœ¨node01èŠ‚ç‚¹å¯åŠ¨kubeletå’Œkube-proxy
8ã€æŒ‡å®šCAå’ŒTLSï¼Œç”Ÿæˆadminç”¨æˆ·çš„é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨kubectlå¯ä»¥è®¿é—®é›†ç¾¤
9ã€éƒ¨ç½²weaveï¼Œä½¿podå¯ä»¥è·å–åˆ°IP
10ã€éƒ¨ç½²corednsï¼Œä½¿svcæœåŠ¡åå¯ä»¥ä½¿ç”¨
11ã€Smoke Testå’ŒEnd-to-End Tests
å®è·µç¯‡æ“ä½œè¿‡ç¨‹å¤ªé•¿ï¼Œå…·ä½“è¿˜æ˜¯å‚è€ƒå‰è¨€ä¸­çš„ä¸¤ä¸ª kubernetes-the-hard-way æ–‡æ¡£å§ã€‚ã€‚ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQLä¸­çš„æ¸¸æ ‡</title>
    <url>/dev-mysql-cursor/</url>
    <content><![CDATA[éœ€æ±‚å·²çŸ¥appè¡¨æœ‰ä¸¤ä¸ªå­—æ®µï¼šidå’Œnameï¼Œbuild_historyè¡¨æœ‰å››ä¸ªå­—æ®µï¼šidã€app_idã€image_pathå’Œcreate_timeã€‚appæ„å»ºåä¼šç”Ÿæˆé•œåƒï¼Œé•œåƒåœ°å€å­˜åœ¨äºbuild_historyè¡¨ä¸­çš„image_pathå­—æ®µã€‚
ç°åœ¨æƒ³è¦æŸ¥æ‰¾å‡ºæ¯ä¸ªappçš„æœ€æ–°çš„äº”ä¸ªé•œåƒï¼Œè¯¥æ€æ ·å®ç°ï¼Ÿ


æ€è·¯æ€è·¯ä¸€ï¼šä½¿ç”¨selectæ‹¿åˆ°æ‰€æœ‰çš„app idï¼Œç„¶åä½¿ç”¨shellè„šæœ¬ç”Ÿæˆå¾ˆå¤šæ¡sqlè¯­å¥ï¼Œæ¯æ¡sqlè¯­å¥çš„æŸ¥è¯¢ç»“æœæ’å…¥åˆ°ä¸€ä¸ªç»“æœè¡¨ä¸­ã€‚å…·ä½“å‚è€ƒã€ŠShellå®ç”¨è„šæœ¬ã€‹å¾ªç¯è¯»å–å¤šåˆ—æ–‡æœ¬éƒ¨åˆ†ã€‚
æ€è·¯äºŒï¼šä½¿ç”¨mysql cursorï¼Œæ‹¿åˆ°æ‰€æœ‰çš„app idï¼Œç„¶åå¾ªç¯è¯»å–build_imageä¸­çš„å†…å®¹ï¼Œæ’å…¥åˆ°ç»“æœè¡¨ä¸­ã€‚æœ¬æ–‡ä¸­é‡‡ç”¨mysql cursorçš„æ–¹æ³•ï¼Œå®ç°æˆ‘ä»¬çš„éœ€æ±‚ã€‚
ä»£ç å®ç°-- create tabledrop table if exists latest_image;CREATE TABLE test.latest_image (    id INT auto_increment NOT null primary key,	app_id INT NULL,	app_name varchar(128) NULL,	app_image varchar(512) NULL)ENGINE=InnoDBDEFAULT CHARSET=utf8COLLATE=utf8_general_ci;-- create proceduredrop procedure if exists get_latest;CREATE PROCEDURE get_latest (num int(2))BEGINdeclare appid int default 0;declare appname varchar(128) default &#x27;&#x27;;declare appimage varchar(512) default &#x27;&#x27;;declare finished int default 0;	-- declare cursor for appdeclare appcursor CURSOR FOR SELECT id,name FROM app;	-- declare NOT FOUND handlerdeclare CONTINUE HANDLER FOR NOT FOUND SET finished = 1;OPEN appcursor;get_item: LOOP	FETCH appcursor INTO appid,appname;	IF finished = 1 THEN 		LEAVE get_item;	END IF;	-- select appid,appname;	-- select id,app_id,image_path from build_history where app_id=appid order by create_time desc limit 5;	-- insert into latest_image(`app_id`,&#x27;app_name&#x27;,&#x27;app_image&#x27;) values(appid,appname,appimage);	insert into latest_image(`app_id`,`app_image`)	select app_id as app_id,image_path as app_image 	from build_history 	where app_id=appid order by create_time desc limit num;END LOOP get_item;CLOSE appcursor;END-- call procedurecall get_latest(5);
]]></content>
      <categories>
        <category>engineering</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>PostgreSQLå…¥é—¨ç¯‡</title>
    <url>/dev-postgresql-start/</url>
    <content><![CDATA[PostgreSQLç®€ä»‹
PostgreSQL is a powerful, open source object-relational database system with over 30 years of active development that has earned it a strong reputation for reliability, feature robustness, and performance.

æ›´å¤šå†…å®¹å‚è€ƒPostgreSQLå®˜ç½‘å’ŒPostgreSQL Documentationã€‚
Harborä¸­ä½¿ç”¨çš„æ•°æ®åº“å°±æ˜¯PostgreSQLï¼Œå› æ­¤æœ¬æ–‡å¯¹PostgreSQLï¼ˆpgï¼‰è¿›è¡Œä¸€ä¸ªç®€å•çš„å­¦ä¹ ï¼Œä¸»è¦å‚è€ƒPostgreSQL èœé¸Ÿæ•™ç¨‹ã€‚


Harborä¸­çš„pg1ã€è¿›å…¥pgå®¹å™¨docker exec -it harbor-db /bin/bash
2ã€ç™»å½•pgpsql -U postgres -h postgresql -p 5432é»˜è®¤å¯†ç ä¸º root123 ï¼Œå®é™…å¯†ç æŸ¥çœ‹harbor.ymlä¸­çš„é…ç½®ã€‚
3ã€æŸ¥çœ‹å¸®åŠ©
\help\help select

4ã€æŸ¥çœ‹æ•°æ®åº“ï¼Œåˆ‡æ¢æ•°æ®åº“ï¼ŒæŸ¥çœ‹è¡¨
\l\c registry;\d\dt

5ã€æŸ¥çœ‹è¡¨ç»“æ„
\d registry;\d replication_policy;

6ã€æŸ¥çœ‹è¡¨æ•°æ®
select * from registry;select * from replication_policy;
å¯ä»¥çœ‹åˆ°ï¼ŒæŸ¥çœ‹è¡¨æ•°æ®çš„æ–¹æ³•å’Œmysqlå®Œå…¨ç›¸åŒã€‚å®é™…ä¸Šï¼Œpgæ”¯æŒæ ‡å‡†çš„sqlè¯­æ³•ï¼Œå› æ­¤å¢åˆ æŸ¥æ”¹çš„è¯­æ³•å‚è€ƒã€ŠMySQLå¸¸ç”¨å‘½ä»¤ã€‹å³å¯ã€‚
å®‰è£…pgå¦‚æœå•ç‹¬ä½¿ç”¨pgï¼Œè¯¥æ€æ ·å®‰è£…ï¼Ÿä¸‹é¢å­¦ä¹ ä½¿ç”¨dockerå®‰è£…pgçš„æ–¹æ³•ã€‚
1ã€ç™»å½•dockerhubæŸ¥çœ‹éœ€è¦çš„pgç‰ˆæœ¬ã€‚
2ã€ä¸‹è½½pgé•œåƒï¼ˆä»¥pg12.2ä¸ºä¾‹ï¼‰docker pull postgres:12.2
3ã€å¯åŠ¨pgæœåŠ¡
docker run --name vk-pg -d \-p 5432:5432 \-e POSTGRES_PASSWORD=voidking \-e PGDATA=/var/lib/postgresql/data/pgdata \-v /opt/postgresql/data:/var/lib/postgresql/data \postgres:12.2

ä»¥ä¸Šå‘½ä»¤ï¼š

å‘½åå®¹å™¨ä¸ºvk-pgï¼Œåå°è¿è¡Œ
æ˜ å°„å®¿ä¸»æœº5432ç«¯å£åˆ°å®¹å™¨5432ç«¯å£
è®¾ç½®pgæ•°æ®åº“å¯†ç å’Œæ•°æ®å­˜æ”¾ç›®å½•
æ˜ å°„å®¿ä¸»æœº/opt/postgresql/dataç›®å½•ï¼ˆä¸éœ€è¦æå‰åˆ›å»ºç›®å½•ï¼‰åˆ°å®¹å™¨/var/lib/postgresql/dataç›®å½•

æ›´é«˜çº§çš„å¯åŠ¨å‘½ä»¤å‚è€ƒHow to use this imageã€‚
4ã€éªŒè¯å®‰è£…docker psgpå¯åŠ¨æ­£å¸¸çš„è¯å°±å¯ä»¥çœ‹åˆ°vk-pgå®¹å™¨ã€‚å¦‚æœå¯åŠ¨å¤±è´¥ï¼Œå¯ä»¥ä½¿ç”¨docker logs vk-pgæŸ¥çœ‹å¤±è´¥åŸå› å¹¶è¿›è¡Œè§£å†³ã€‚
ä½¿ç”¨ncå‘½ä»¤éªŒè¯ï¼š
yum install ncnc -v localhost 5432

5ã€ç™»å½•pg
docker exec -it vk-pg /bin/bashpsql -U postgrespsql -U postgres -h localhost -p 5432
å•Šå˜ï¼Œç›´æ¥ç™»å½•è¿›å»äº†ï¼Œä¸éœ€è¦å¯†ç ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œpgé•œåƒåœ¨æœ¬åœ°è®¾ç½®äº†ä¿¡ä»»èº«ä»½éªŒè¯ï¼Œå› æ­¤ä»å®¹å™¨å†…è¿æ¥æ—¶ä¸éœ€è¦å¯†ç ã€‚
ä½†æ˜¯ï¼Œå¦‚æœä»å…¶ä»–ä¸»æœº/å®¹å™¨è¿›è¡Œè¿æ¥ï¼Œåˆ™éœ€è¦è¾“å…¥å¯†ç ã€‚æ¯”å¦‚åœ¨å®¿ä¸»æœºï¼ˆç³»ç»Ÿä¸ºcentos7ï¼‰ä¸Šç™»å½•pgï¼š
yum list | grep postgresqlyum install postgresql.x86_64psql -U postgres -h localhost -p 5432
è¿™æ¬¡å¿…é¡»è¾“å…¥æ­£ç¡®çš„å¯†ç æ‰èƒ½ç™»å½•ã€‚
ä»¥ä¸Šï¼Œpgå®‰è£…é…ç½®å®Œæˆã€‚
Postgresqlå¯åŠ¨æŠ¥é”™é—®é¢˜é—®é¢˜æè¿°bitnamiå®‰è£…çš„postgresqlï¼Œpodé‡å»ºåæ— æ³•å¯åŠ¨ï¼Œä¸€ç›´é‡å¯ï¼Œçœ‹æ—¥å¿—æŠ¥é”™ï¼š
LOG: database system was interrupted; last known up at xxxx-xx-xx xx:xx:xx GMTFATAL: the database system is starting up

è§£å†³åŠæ³•ä¿®æ”¹æ¢æ´»ï¼Œå¢åŠ  initialDelaySeconds æˆ–è€…å¢åŠ  failureThreshold ã€‚
é—®é¢˜åŸå› ï¼šå¦‚æœæœåŠ¡å™¨çªç„¶åœæ­¢ï¼Œæˆ–è€…çªç„¶å¤±å»å¯¹æ–‡ä»¶ç³»ç»Ÿçš„è®¿é—®æƒé™ï¼Œé‚£ä¹ˆå†…å­˜ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½ä¼šä¸¢å¤±ï¼Œä¸‹æ¬¡å¯åŠ¨å®ƒæ—¶ï¼Œå®ƒéœ€è¦é‡æ–°æ’­æ”¾æ—¥å¿—ï¼Œä»¥ä½¿è¡¨æ¢å¤åˆ°æ­£ç¡®çš„çŠ¶æ€ï¼ˆè¿™å¯èƒ½éœ€è¦ç›¸å½“é•¿çš„æ—¶é—´ï¼Œå…·ä½“å–å†³äºè‡ªä¸Šæ¬¡æ£€æŸ¥ç‚¹ä»¥æ¥å‘ç”Ÿäº†å¤šå°‘ï¼‰ã€‚åœ¨å®Œæˆä¹‹å‰ï¼Œä»»ä½•ä½¿ç”¨æœåŠ¡å™¨çš„å°è¯•éƒ½å°†å¯¼è‡´ FATAL: the database system is starting up
å‚è€ƒæ–‡æ¡£ï¼šPostgresql fatal the database system is starting up - windows 10
]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
        <tag>æ•°æ®åº“</tag>
        <tag>harbor</tag>
        <tag>bitnami</tag>
        <tag>postgresql</tag>
      </tags>
  </entry>
  <entry>
    <title>Harborå…¥é—¨ç¯‡</title>
    <url>/dev-harbor-start/</url>
    <content><![CDATA[Harborç®€ä»‹
Harbor is an open source container image registry that secures images with role-based access control, scans images for vulnerabilities, and signs images as trusted. As a CNCF Incubating project, Harbor delivers compliance, performance, and interoperability to help you consistently and securely manage images across cloud native compute platforms like Kubernetes and Docker.

æ›´å¤šå†…å®¹å‚è€ƒHarborå®˜ç½‘ã€‚


å®‰è£…Harborå‰ç½®æ¡ä»¶å‚è€ƒHarbor Installation Prerequisites
1ã€ç¡¬ä»¶éœ€æ±‚ç¡¬ä»¶æœ€å°éœ€æ±‚ï¼š2C4G40Gã€‚ç¡¬ä»¶æ¨èéœ€æ±‚ï¼š4C8G160Gã€‚
2ã€è½¯ä»¶éœ€æ±‚Docker engineï¼ŒVersion 17.06.0-ce+ or higherDocker Composeï¼ŒVersion 1.18.0 or higherOpensslï¼ŒLatest is preferred
3ã€ç½‘ç»œç«¯å£444ã€4443å’Œ80
ä¸‹è½½å®‰è£…Harborharborè®¡åˆ’å®‰è£…ç›®å½•ä¸º/opt/harborï¼Œæ•°æ®ç›®å½•ä¸º/opt/harbor_data
1ã€è®¿é—®Harbor releases pageï¼Œä¸‹è½½éœ€è¦çš„harborç‰ˆæœ¬ï¼Œè¿™é‡Œé€‰æ‹©ä¸‹è½½ harbor-offline-installer-v1.10.1.tgz
cd ~wget https://github.com/goharbor/harbor/releases/download/v1.10.1/harbor-offline-installer-v1.10.1.tgz# orcurl -C - -O -L https://github.com/goharbor/harbor/releases/download/v1.10.1/harbor-offline-installer-v1.10.1.tgz

2ã€è§£å‹
tar -xzvf harbor-offline-installer-v1.10.1.tgzmv harbor /optcd /opt/harbor

3ã€é…ç½®harbor.yml
# The IP address or hostname to access admin UI and registry service.# DO NOT use localhost or 127.0.0.1, because Harbor needs to be accessed by external clients.hostname: harbor.voidking.com# http related confighttp:  # port for http, default is 80. If https enabled, this port will redirect to https port  port: 80# https related config# https:  # https port for harbor, default is 443  #port: 443  # The path of cert and key files for nginx  #certificate: /your/certificate/path  #private_key: /your/private/key/path# The initial password of Harbor admin# It only works in first time to install harbor# Remember Change the admin password from UI after launching Harbor.harbor_admin_password: Harbor12345# The default data volumedata_volume: /opt/harbor_data# Harbor DB configurationdatabase:  # The password for the root user of Harbor DB. Change this before any production use.  password: root123  # The maximum number of connections in the idle connection pool. If it &lt;=0, no idle connections are retained.  max_idle_conns: 50  # The maximum number of open connections to the database. If it &lt;= 0, then there is no limit on the number of open connections.  # Note: the default number of connections is 100 for postgres.  max_open_conns: 100# Log configurationslog:  # options are debug, info, warning, error, fatal  level: info  # configs for logs in local storage  local:    # Log files are rotated log_rotate_count times before being removed. If count is 0, old versions are removed rather than rotated.    rotate_count: 50    # Log files are rotated only if they grow bigger than log_rotate_size bytes. If size is followed by k, the size is assumed to be in kilobytes.    # If the M is used, the size is in megabytes, and if G is used, the size is in gigabytes. So size 100, size 100k, size 100M and size 100G    # are all valid.    rotate_size: 200M    # The directory on your host that store log    location: /var/log/harbor

é…ç½®è¯´æ˜ï¼š

hostname: æŒ‡å®šharboråŸŸåï¼Œè¿™ä¸ªåŸŸåçš„ä½œç”¨æœ‰ä¸¤ä¸ªï¼š1ï¼‰è¿™æ˜¯ç”¨æ¥é‰´æƒçš„åŸŸåï¼Œæˆ‘ä»¬å¯ä»¥ç»™harboré…ç½®å¤šä¸ªåŸŸåï¼Œä½†æ˜¯åœ¨é‰´æƒæ—¶åªä¼šè¯·æ±‚è¿™ä¸ªåŸŸåï¼›2ï¼‰ä»é¡µé¢æ‹·è´docker pullå‘½ä»¤æ—¶ä¼šä½¿ç”¨è¿™ä¸ªåŸŸåä½œä¸ºå‰ç¼€ã€‚
httpsï¼šå»ºè®®æ³¨é‡Šæ‰ï¼Œä¸è¦åœ¨è¿™é‡Œé…ç½®è¯ä¹¦ï¼Œè€Œæ˜¯é…ç½®åˆ°nginxå±‚ã€‚
harbor_admin_passwordï¼šharborçš„adminç”¨æˆ·å¯†ç ã€‚
data_volumeï¼šå­˜å‚¨é•œåƒæ•°æ®çš„è·¯å¾„ã€‚

æ›´å¤šé…ç½®å†…å®¹ï¼Œå‚è€ƒConfigure the Harbor YML File
4ã€æ‰§è¡Œå®‰è£…
./install.sh
å¦‚æœå®‰è£…å®Œæˆå‘ç°é…ç½®é”™è¯¯ï¼Œå¯ä»¥ä¿®æ”¹é…ç½®åå†æ¬¡æ‰§è¡Œè„šæœ¬ã€‚å¦‚æœæŠ¥é”™ ERROR: Failed to Setup IP tables: Unable to enable SKIP DNAT rule ï¼Œé‚£ä¹ˆé‡å¯dockeråå†æ¬¡æ‰§è¡Œè„šæœ¬ã€‚
è‡³æ­¤ï¼Œharborå®‰è£…å®Œæˆï¼Œæ²¡æœ‰é…ç½®httpsã€‚
ä¿®æ”¹Harboré…ç½®1ã€åœæ­¢
docker-compose down -v

2ã€ä¿®æ”¹é…ç½®ä¿®æ”¹harbor.ymlåï¼Œæ‰§è¡Œ
./prepare

3ã€å¯åŠ¨
docker-compose up -d

æ³¨æ„ï¼šå¦‚æœæ˜¯ä¿®æ”¹harborçš„hostnameï¼Œharboré‡æ–°å¯åŠ¨åï¼Œæ•°æ®åº“å†…å®¹å’Œé•œåƒå†…å®¹æ˜¯ä¾ç„¶å­˜åœ¨çš„ï¼Œå¯ä»¥æ”¾å¿ƒä¿®æ”¹ã€‚
éªŒè¯Harborå®‰è£…æµè§ˆå™¨éªŒè¯æµè§ˆå™¨è®¿é—® http://192.168.56.200 ï¼Œå¯ä»¥çœ‹åˆ°harborç™»å½•é¡µé¢ã€‚è¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œadminå’ŒHarbor12345ï¼Œç™»å½•harboræ§åˆ¶å°ã€‚
ç™»å½•éªŒè¯docker psdocker login 192.168.56.200docker login harbor.voidking.com
è¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œadminå’ŒHarbor12345ï¼Œç™»å½•æŠ¥é”™ã€‚
ç™»å½•éªŒè¯æŠ¥é”™å¤„ç†æŠ¥é”™connection refusedError response from daemon: Get https://192.168.56.200/v2/: dial tcp 192.168.56.200:443: connect: connection refused
è¿™æ˜¯å› ä¸ºï¼Œdocker1.3.xä¹‹åä¸registryäº¤äº’ï¼Œé»˜è®¤ä½¿ç”¨httpsåè®®ã€‚
1ã€ä¿®æ”¹/etc/docker/daemon.jsonï¼Œæ·»åŠ insecure-registrieså‚æ•°
&#123;  &quot;registry-mirrors&quot;: [    &quot;https://mirror.ccs.tencentyun.com&quot;  ],  &quot;insecure-registries&quot;: [    &quot;http://192.168.56.200&quot;,    &quot;http://harbor.voidking.com&quot;  ]&#125;

2ã€é‡å¯dockerå’Œharbor
systemctl daemon-reloadsystemctl restart dockerdocker infocd /opt/harbordocker-compose up -ddocker-compose ps -a

æŠ¥é”™Service UnavailableError response from daemon: Get â€œhttps://192.168.56.200/v2/&quot;: Service Unavailableæˆ–è€…Error response from daemon: Get â€œhttp://192.168.56.200/v2/&quot;: received unexpected HTTP status: 503 Service Unavailable
è¿™ä¸ªé”™è¯¯ï¼Œå¤§æ¦‚ç‡æ˜¯å› ä¸ºdockeré…ç½®äº†ä»£ç†ï¼Œdockeré…ç½®ä»£ç†çš„æ–¹æ³•å‚è€ƒã€ŠLinuxé…ç½®ç½‘ç»œä»£ç†ã€‹ã€‚
1ã€å»æ‰dockerä»£ç†ï¼Œæˆ–è€…åœ¨ä»£ç†é…ç½®çš„NO_PROXYå˜é‡ä¸­åŠ å…¥harborçš„IPå’ŒåŸŸå
vim /etc/systemd/system/docker.service.d/http-proxy.conf

2ã€é‡å¯dockerå’Œharbor
systemctl daemon-reloadsystemctl restart dockerdocker infocd harbordocker-compose up -d

æŠ¥é”™no such hostError response from daemon: Get â€œhttp://192.168.56.200/v2/&quot;: Get â€œhttp://harbor.voidking.com/service/token?account=admin&amp;client_id=docker&amp;offline_token=true&amp;service=harbor-registry&quot;: dial tcp: lookup harbor.voidking.com: no such host
åœ¨/etc/hostsä¸­æ·»åŠ è§£æï¼š
harbor.voidking.com 192.168.56.200

é‡æ–°ç™»å½•ï¼ŒæˆåŠŸã€‚
ä½¿ç”¨Harborå¯åŠ¨å’Œåœæ­¢Harborå‚è€ƒæ–‡æ¡£Reconfigure Harbor and Manage the Harbor Lifecycle
cd /opt/harbor# æŸ¥çœ‹å®¹å™¨çŠ¶æ€docker-compose ps -a# åœæ­¢harbordocker-compose stop# å¯åŠ¨harbordocker-compose start

ä¸Šä¼ é•œåƒdocker pull busybox:1.31docker tag busybox:1.31 harbor.voidking.com/voidking/busybox:1.31docker tag busybox:1.31 harbor.voidking.com/voidking/subpath/busybox:1.31docker push harbor.voidking.com/voidking/busybox:1.31

docker pushå¦‚æœæŠ¥é”™ï¼šThe push refers to repository [harbor.voidking.com/voidking/busybox]a6d503001157: Preparingdenied: requested access to the resource is deniedè¿™æ˜¯å› ä¸ºï¼Œéœ€è¦å…ˆåˆ›å»ºé¡¹ç›®ã€‚åœ¨webæ§åˆ¶å°åˆ›å»ºé¡¹ç›® voidkingï¼Œå†æ¬¡ä¸Šä¼ ï¼ŒæˆåŠŸã€‚å¸¦æœ‰subpathçš„é•œåƒï¼ŒåŒæ ·å¯ä»¥ä¸Šä¼ æˆåŠŸã€‚
ä¸‹è½½é•œåƒdocker pull harbor.voidking.com/voidking/busybox:1.31

æŸ¥æ‰¾docker-compose.ymlå¦‚æœä¸çŸ¥é“harbor docker-compose.ymlçš„ç›®å½•ï¼Œå°±æ²¡æœ‰åŠæ³•å¯¹harboræœåŠ¡è¿›è¡Œå¯åœã€‚æŸ¥æ‰¾docker-compose.ymlæœ€å¥½ä½¿ç”¨locateå‘½ä»¤ï¼Œé€Ÿåº¦å¿«ã€‚
locate docker-compose.yml

ä¿®æ”¹harboræ•°æ®åº“å‚è€ƒæ–‡æ¡£ï¼šã€ŠPostgreSQLå…¥é—¨ç¯‡ã€‹
é”™è¯¯æ’æŸ¥cd /var/log/harbor/ls -ltail -n 100 core.log

é…ç½®Harborè‡ªåŠ¨å¯åŠ¨å½“dockerå‘ç”Ÿäº†é‡å¯ä¹‹åï¼Œéœ€è¦æ‰‹åŠ¨æ‰§è¡Œdocker-compose startå¯åŠ¨harborï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œå› æ­¤æœ€å¥½é…ç½®ä¸Šharborçš„è‡ªåŠ¨å¯åŠ¨ã€‚è¯¦æƒ…å‚è€ƒDocker ç¬”è®° - å°† Harbor è®¾ç½®ä¸ºç³»ç»ŸæœåŠ¡
1ã€å‡†å¤‡systemdé…ç½®æ–‡ä»¶
vim /etc/systemd/system/harbor.service

harbor.serviceå†…å®¹å¦‚ä¸‹ï¼š
[Unit]Description=harborAfter=docker.service systemd-networkd.service systemd-resolved.serviceRequires=docker.serviceDocumentation=http://github.com/vmware/harbor[Service]Type=simpleRestart=on-failureRestartSec=5ExecStart=/usr/local/bin/docker-compose -f  /opt/harbor/docker-compose.yml startExecStop=/usr/local/bin/docker-compose -f  /opt/harbor/docker-compose.yml stopRemainAfterExit=yes[Install]WantedBy=multi-user.target

2ã€è®¾ç½®å¼€æœºè‡ªå¯åŠ¨
systemctl daemon-reloadsystemctl enable harbor.servicesystemctl status harbor.servicedocker-compose ps -a

3ã€æµ‹è¯•é‡å¯dockeråharborè‡ªå¯åŠ¨
systemctl restart dockersystemctl status harbor.servicedocker-compose ps -a

é«˜å¯ç”¨å¦‚æœæ­å»ºé«˜å¯ç”¨harborï¼Œæ¯”å¦‚æ­å»ºä¸¤ä¸ªå®ä¾‹çš„harborï¼Œé‚£ä¹ˆéœ€è¦XSRFKeyä¿æŒä¸€è‡´ï¼Œåœ¨ common/config/core/app.conf ä¸­é…ç½®ã€‚
HarboråŒæ­¥é…ç½®å‚è€ƒæ–‡æ¡£ï¼š

Creating Replication Endpoints
Creating a Replication Rule

]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>k8s</category>
        <category>cloudnative</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
        <tag>docker-compose</tag>
        <tag>harbor</tag>
        <tag>é”™è¯¯æ’æŸ¥</tag>
      </tags>
  </entry>
  <entry>
    <title>JSONPathå…¥é—¨ç¯‡</title>
    <url>/dev-jsonpath-start/</url>
    <content><![CDATA[JSONPathç®€ä»‹
JSON (JavaScript Object Notation) allows for easy interchange of data, often between a program and a database.


JSONPath is a query language for JSON, similar to XPath for XML. 

å¦‚ä¸Šï¼Œjsonæ˜¯ä¸€ç§å¸¸ç”¨çš„æ•°æ®æ ¼å¼ï¼Œjsonpathæ˜¯jsonçš„æŸ¥è¯¢è¯­è¨€ï¼Œç±»ä¼¼äºXPathå’ŒSQLã€‚
jsonpathåœ¨çº¿æµ‹è¯•ï¼šJSONPath Online Evaluator


YAMLå’ŒJSONYAMLå’ŒJSONå¯ä»¥ç›¸äº’è½¬åŒ–ï¼Œè¯¦æƒ…å‚è€ƒã€ŠYAMLè¯­è¨€ã€‹ã€‚
JSONPathè¯­æ³•æ‘˜è‡ª json-path/JsonPath
æ“ä½œç¬¦


Operator
Description



$
The root element to query. This starts all path expressions.


@
The current node being processed by a filter predicate.


*
Wildcard. Available anywhere a name or numeric are required.


..
Deep scan. Available anywhere a name is required.


.&lt;name&gt;
Dot-notated child


[&#39;&lt;name&gt;&#39; (, &#39;&lt;name&gt;&#39;)]
Bracket-notated child or children


[&lt;number&gt; (, &lt;number&gt;)]
Array index or indexes


[start:end]
Array slice operator


[?(&lt;expression&gt;)]
Filter expression. Expression must evaluate to a boolean value.


å‡½æ•°Functions can be invoked at the tail end of a path - the input to a function is the output of the path expression.The function output is dictated by the function itself.



Function
Description
Output



min()
Provides the min value of an array of numbers
Double


max()
Provides the max value of an array of numbers
Double


avg()
Provides the average value of an array of numbers
Double


stddev()
Provides the standard deviation value of an array of numbers
Double


length()
Provides the length of an array
Integer


sum()
Provides the sum value of an array of numbers
Double


è¿‡æ»¤å™¨Filters are logical expressions used to filter arrays. A typical filter would be [?(@.age &gt; 18)] where @ represents the current item being processed. More complex filters can be created with logical operators &amp;&amp; and ||. String literals must be enclosed by single or double quotes ([?(@.color == &#39;blue&#39;)] or [?(@.color == &quot;blue&quot;)]).   



Operator
Description



==
left is equal to right (note that 1 is not equal to â€˜1â€™)


!=
left is not equal to right


&lt;
left is less than right


&lt;=
left is less or equal to right


&gt;
left is greater than right


&gt;=
left is greater than or equal to right


=~
left matches regular expression  [?(@.name =~ /foo.*?/i)]


in
left exists in right [?(@.size in [â€˜Sâ€™, â€˜Mâ€™])]


nin
left does not exists in right


subsetof
left is a subset of right [?(@.sizes subsetof [â€˜Sâ€™, â€˜Mâ€™, â€˜Lâ€™])]


anyof
left has an intersection with right [?(@.sizes anyof [â€˜Mâ€™, â€˜Lâ€™])]


noneof
left has no intersection with right [?(@.sizes noneof [â€˜Mâ€™, â€˜Lâ€™])]


size
size of left (array or string) should match right


empty
left (array or string) should be empty


DEMOGiven the json
&#123;    &quot;store&quot;: &#123;        &quot;book&quot;: [            &#123;                &quot;category&quot;: &quot;reference&quot;,                &quot;author&quot;: &quot;Nigel Rees&quot;,                &quot;title&quot;: &quot;Sayings of the Century&quot;,                &quot;price&quot;: 8.95            &#125;,            &#123;                &quot;category&quot;: &quot;fiction&quot;,                &quot;author&quot;: &quot;Evelyn Waugh&quot;,                &quot;title&quot;: &quot;Sword of Honour&quot;,                &quot;price&quot;: 12.99            &#125;,            &#123;                &quot;category&quot;: &quot;fiction&quot;,                &quot;author&quot;: &quot;Herman Melville&quot;,                &quot;title&quot;: &quot;Moby Dick&quot;,                &quot;isbn&quot;: &quot;0-553-21311-3&quot;,                &quot;price&quot;: 8.99            &#125;,            &#123;                &quot;category&quot;: &quot;fiction&quot;,                &quot;author&quot;: &quot;J. R. R. Tolkien&quot;,                &quot;title&quot;: &quot;The Lord of the Rings&quot;,                &quot;isbn&quot;: &quot;0-395-19395-8&quot;,                &quot;price&quot;: 22.99            &#125;        ],        &quot;bicycle&quot;: &#123;            &quot;color&quot;: &quot;red&quot;,            &quot;price&quot;: 19.95        &#125;    &#125;,    &quot;expensive&quot;: 10&#125;




JsonPath (click link to try)
Result



$.store.book[*].author
The authors of all books


$..author
All authors


$.store.*
All things, both books and bicycles


$.store..price
The price of everything


$..book[2]
The third book


$..book[-2]
The second to last book


$..book[0,1]
The first two books


$..book[:2]
All books from index 0 (inclusive) until index 2 (exclusive)


$..book[1:2]
All books from index 1 (inclusive) until index 2 (exclusive)


$..book[-2:]
Last two books


$..book[2:]
Book number two from tail


$..book[?(@.isbn)]
All books with an ISBN number


$.store.book[?(@.price &lt; 10)]
All books in store cheaper than 10


$..book[?(@.price &lt;= $[â€˜expensiveâ€™])]
All books in store that are not â€œexpensiveâ€


$..book[?(@.author =~ /.*REES/i)]
All books matching regex (ignore case)


$..*
Give me every thing


$..book.length()
The number of books


kubectl + JSONPathkubeletæ”¯æŒJSONPathï¼Œå…·ä½“å‚è€ƒJSONPath æ”¯æŒã€‚é™¤äº†æ ‡å‡†jsonpathè¯­æ³•å¤–,kubernetes jsonpathæ¨¡æ¿è¿˜é¢å¤–æ”¯æŒä»¥ä¸‹è¯­æ³•:

ç”¨â€â€åŒå¼•å·æ¥å¼•ç”¨JSONPathè¡¨è¾¾å¼ä¸­çš„æ–‡æœ¬
ä½¿ç”¨rangeå’Œendæ¥éå†é›†åˆ
ä½¿ç”¨è´Ÿæ•°æ¥ä»å°¾éƒ¨ç´¢å¼•é›†åˆ

ä¾‹å¦‚æŸ¥çœ‹nodeçš„cpuä¿¡æ¯ï¼š
kubectl get nodes -o=jsonpath=&#x27;&#123;.items[*].metadata.name&#125;&#x27;kubectl get nodes -o=jsonpath=&#x27;&#123;.items[*].status.capacity.cpu&#125;&#x27;kubectl get nodes -o=jsonpath=&#x27;&#123;.items[*].metadata.name&#125;&#123;.items[*].status.capacity.cpu&#125;&#x27;kubectl get nodes -o=jsonpath=&#x27;&#123;.items[*].metadata.name&#125;&#123;&quot;\n&quot;&#125;&#123;.items[*].status.capacity.cpu&#125;&#x27;kubectl get nodes -o=jsonpath=&#x27;&#123;range .items[*]&#125;&#123;.metadata.name&#125;&#123;&quot;\t&quot;&#125;&#123;.status.capacity.cpu&#125;&#123;end&#125;&#x27;kubectl get nodes -o=custom-columns=NODE:.metadata.name,CPU:.status.capacity.cpukubectl get nodes --sort-by=.metadata.namekubectl get nodes --sort-by=.status.capacity.cpu

ç‰¹æ®Šè¯´æ˜å¦‚æœkeyä¸­åŒ…å«ç‚¹.ï¼Œä¾‹å¦‚keyä¸ºconfig.yamlï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨jsonpathçš„æ—¶å€™éœ€è¦å¯¹keyä¸­çš„ç‚¹.è¿›è¡Œè½¬ä¹‰ã€‚
kubectl get cm test-config -n test -o jsonpath=&#x27;&#123;.data.config\.yaml&#125;&#x27;



]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
        <tag>json</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨kubeadmè·¨äº‘æ­å»ºK8Sé›†ç¾¤</title>
    <url>/dev-kubeadm-install-k8s-in-multi-cloud/</url>
    <content><![CDATA[å‰è¨€æ­å»ºK8Sé›†ç¾¤æ—¶ï¼Œæˆ‘ä»¬å¾€å¾€ä½¿ç”¨åŒä¸€ä¸ªäº‘å‚å•†çš„æœºå™¨ï¼Œæˆ–è€…è‡ªå»ºæœºæˆ¿ï¼Œèƒ½å¤Ÿä¿è¯å®¿ä¸»æœºçš„äºŒå±‚ç½‘ç»œæ˜¯é€šçš„ã€‚åŸºäºè¿™ç§ç½‘ç»œç¯å¢ƒæ­å»ºK8Sé›†ç¾¤ï¼Œç®€å•è€Œç¨³å®šã€‚ä½†æ˜¯æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è·¨äº‘ï¼ˆä½¿ç”¨ä¸åŒäº‘å‚å•†çš„æœºå™¨ï¼‰æ­å»ºK8Sé›†ç¾¤ï¼Œè¿™æ—¶å€™å°±éœ€è¦å……åˆ†è€ƒè™‘ç½‘ç»œé—®é¢˜ã€‚æœ¬æ–‡ï¼Œæˆ‘ä»¬å°±æ¥å­¦ä¹ ä¸€ä¸‹è·¨äº‘æ­å»ºK8Sé›†ç¾¤çš„æ–¹æ³•ã€‚


éœ€æ±‚è¯´æ˜å½“å‰æˆ‘ä»¬åœ¨è…¾è®¯äº‘ä½¿ç”¨kubeadmå·²ç»æ­å»ºå¥½äº†K8Sé›†ç¾¤ï¼Œç½‘ç»œæ’ä»¶ä½¿ç”¨çš„æ˜¯Flannel VXLANæ¨¡å¼ï¼Œç°åœ¨æˆ‘ä»¬æƒ³è¦æ·»åŠ ä¸€å°é˜¿é‡Œäº‘çš„æœºå™¨åˆ°è¿™ä¸ªè…¾è®¯äº‘çš„K8Sé›†ç¾¤ã€‚
ç½‘ç»œé…ç½®æ€è·¯åŸºäºNATé…ç½®æ€è·¯ï¼šè…¾è®¯äº‘nodeå’Œé˜¿é‡Œäº‘nodeé—´é€šä¿¡é…ç½®åŒå‘dnatè½¬å‘
ç¼ºé™·ï¼š1ã€nodeå’Œnodeé—´é€šä¿¡é…ç½®dnatï¼Œæ˜¯å¤šå¯¹å¤šå…³ç³»ï¼Œå¤ªå¤æ‚ï¼Œè€Œä¸”å¢åŠ èŠ‚ç‚¹æ—¶æ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ·»åŠ é…ç½®2ã€nodeæ— æ³•è·¨äº‘å’Œpodé€šä¿¡ï¼Œå› æ­¤ä¸å¯è¡Œ
åŸºäºK8Sé…ç½®é…ç½®æ€è·¯ï¼š1ã€controlPlaneEndpointåœ°å€å’ŒapiServeråœ°å€æ”¹ä¸ºå…¬ç½‘IP2ã€Flannelä¿®æ”¹æ¯ä¸ªèŠ‚ç‚¹Annotationsçš„public-ipå‚æ•°3ã€masterå’Œnodeé—´é€šä¿¡é…ç½®åŒå‘dnatè½¬å‘4ã€ä¿®æ”¹metrics serveré…ç½®ï¼Œå¢åŠ hostAliasesæ¥è‡ªå®šä¹‰hosts
ç¼ºé™·ï¼šéœ€è¦é‡æ–°é…ç½®åŸæœ‰çš„K8Sé›†ç¾¤ï¼Œå½±å“å¤ªå¤§ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

è·¨VPCæˆ–è€…è·¨äº‘ä¾›åº”å•†æ­å»ºK8Sé›†ç¾¤æ­£ç¡®å§¿åŠ¿
è·¨VPCæˆ–è€…è·¨äº‘ä¾›åº”å•†æ­å»ºK8Sé›†ç¾¤æ­£ç¡®å§¿åŠ¿-ç•ªå¤–ç¯‡

åŸºäºOpenVPNé€šä¿¡é…ç½®æ€è·¯ï¼š1ã€é˜¿é‡Œäº‘æœºå™¨è¿æ¥åˆ°è…¾è®¯äº‘OpenVPNï¼Œå®ç°é˜¿é‡Œäº‘åˆ°è…¾è®¯äº‘çš„ç½‘ç»œç•…é€šã€‚2ã€è…¾è®¯äº‘é…ç½®dnatï¼Œå®ç°é€šè¿‡é˜¿é‡Œäº‘å†…ç½‘IPè®¿é—®é˜¿é‡Œäº‘æœºå™¨ã€‚
ç¼ºé™·ï¼šnodeæ— æ³•è·¨äº‘å’Œpodé€šä¿¡ï¼Œå› æ­¤ä¸å¯è¡Œã€‚
å‚è€ƒæ–‡æ¡£ï¼šã€Šä½¿ç”¨Dockerå®‰è£…é…ç½®OpenVPNã€‹
åŸºäºIPsec VPNé€šä¿¡é…ç½®æ€è·¯ï¼š1ã€è…¾è®¯äº‘é…ç½®IPsecï¼Œå¯¹ç«¯è¿æ¥é˜¿é‡Œäº‘IPsecï¼›é˜¿é‡Œäº‘é…ç½®IPsecï¼Œå¯¹ç«¯è¿æ¥è…¾è®¯äº‘IPsec2ã€è…¾è®¯äº‘é…ç½®è·¯ç”±è¡¨ï¼Œé˜¿é‡Œäº‘ç½‘æ®µè½¬å‘åˆ°VPNï¼›é˜¿é‡Œäº‘é…ç½®è·¯ç”±è¡¨ï¼Œè…¾è®¯äº‘ç½‘æ®µè½¬å‘åˆ°VPN
ç¼ºé™·ï¼š1ã€é›†ç¾¤ç¨³å®šæ€§ä¾èµ–VPNçš„ç¨³å®šæ€§2ã€VPN Clientä¼šè‡ªåŠ¨ä¿®æ”¹è·¯ç”±è§„åˆ™ï¼Œå½±å“äº‘ä¸»æœºçš„ç½‘ç»œï¼Œéœ€è¦æå‰åšå¥½ç½‘ç»œè§„åˆ’ï¼ŒVPNã€è…¾è®¯äº‘å’Œé˜¿é‡Œäº‘çš„ç½‘ç»œèŒƒå›´ä¸è¦é‡åˆã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ã€Šä½¿ç”¨Dockerå®‰è£…é…ç½®OpenVPNã€‹
ä»€ä¹ˆæ˜¯IPsecï¼Ÿ

å°ç»“ç»¼ä¸Šï¼ŒåŸºäºIPsec VPNé€šä¿¡çš„æ–¹å¼å¯è¡Œï¼Œå¹¶ä¸”ç›¸å¯¹ç®€å•ï¼Œé€‰æ‹©å®ƒã€‚
IPsecç½‘ç»œé…ç½®IPsecç½‘ç»œé…ç½®æ¦‚è¿°åœ¨äº‘å‚å•†æ§åˆ¶å°é…ç½®IPsecæ—¶ï¼Œå¤§è‡´éƒ½æ˜¯ä¸‰ä¸ªæ­¥éª¤ï¼š1ã€åˆ›å»ºVPNç½‘å…³2ã€åˆ›å»ºå¯¹ç«¯ç½‘å…³ï¼ˆç”¨æˆ·ç½‘å…³ï¼‰3ã€åˆ›å»ºå’Œé…ç½®VPNé€šé“ï¼ˆVPNéš§é“ã€IPsecè¿æ¥ï¼‰
å…¶ä¸­ï¼Œæœ€å…³é”®çš„ä¸€æ­¥æ˜¯åˆ›å»ºå’Œé…ç½®VPNé€šé“ï¼Œé…ç½®æ—¶éœ€è¦æ³¨æ„ï¼š

ä¸¤ç«¯IKEç‰ˆæœ¬ä¸€è‡´ï¼ŒåŠ å¯†ç®—æ³•ã€è®¤è¯ç®—æ³•ã€DHç»„ä¸€è‡´
IKEç‰ˆæœ¬å»ºè®®é€‰æ‹©V2
åŠ å¯†ç®—æ³•å»ºè®®é€‰æ‹©aes128
è®¤è¯ç®—æ³•å»ºè®®é€‰æ‹©sha1
DHç»„å»ºè®®é€‰æ‹©14


ä¸¤ç«¯IKEçš„ç«¯å£IDç±»å‹ä¸€è‡´ï¼Œé€‰æ‹©IPåœ°å€ç±»å‹æ—¶IPå€¼è¦å¯¹åº”
ä¸¤ç«¯IKEçš„é¢„å…±äº«å¯†é’¥ä¸€è‡´ï¼ŒSAè¶…æ—¶æ—¶é—´ä¸€è‡´
ä¸¤ç«¯IPsecçš„å®‰å…¨åè®®ã€åŠ å¯†ç®—æ³•ã€è®¤è¯ç®—æ³•ã€PFS DHç»„ä¸€è‡´
å®‰å…¨åè®®å»ºè®®é€‰æ‹©ESP
åŠ å¯†ç®—æ³•å»ºè®®é€‰æ‹©aes128
è®¤è¯ç®—æ³•å»ºè®®é€‰æ‹©sha1
PFS DHç»„å»ºè®®é€‰æ‹©disable


ä¸¤ç«¯IPsecçš„æŠ¥æ–‡å°è£…æ¨¡å¼ä¸€è‡´ï¼ŒTunnelå³å¯
ä¸¤ç«¯IPsecçš„SAè¶…æ—¶ä¿æŒä¸€è‡´
æœ¬ç«¯ç½‘æ®µå’Œå¯¹ç«¯ç½‘æ®µé…ç½®æ­£ç¡®
VPNé€šé“åˆ›å»ºå®Œæˆåï¼Œä¾ç„¶å¯ä»¥è°ƒæ•´éƒ¨åˆ†é…ç½®
å½“VPNé€šé“å‘ç”Ÿå˜æ›´æ—¶ï¼Œè¦é‡ç½®è¿æ¥æ‰èƒ½ç”Ÿæ•ˆ

è…¾è®¯äº‘é…ç½®å‚è€ƒæ–‡æ¡£ï¼š

åˆ›å»º VPN ç½‘å…³
åˆ›å»ºå¯¹ç«¯ç½‘å…³
åˆ›å»º VPN é€šé“
è·¯ç”±è¡¨ - æ¦‚è¿°

1ã€åˆ›å»ºVPNç½‘å…³ï¼Œç»‘å®šVPC
2ã€åˆ›å»ºå¯¹ç«¯ç½‘å…³ï¼Œå¡«å…¥é˜¿é‡Œäº‘VPNç½‘å…³
3ã€åˆ›å»ºVPNé€šé“ï¼Œä¸åˆšåˆšåˆ›å»ºçš„VPNç½‘å…³å’Œå¯¹ç«¯ç½‘å…³å…³è”ç‰¹åˆ«æ³¨æ„ï¼šé€šä¿¡æ¨¡å¼å»ºè®®é€‰æ‹©SPDç­–ç•¥ï¼Œå¯ä»¥è‡ªå®šä¹‰æœ¬ç«¯ç½‘ç»œå’Œå¯¹ç«¯ç½‘ç»œï¼Œæ¸…æ™°æ˜äº†ã€‚
4ã€é…ç½®è·¯ç”±è¡¨ï¼ˆVPNç½‘å…³è·¯ç”±è¡¨å’ŒVPCè·¯ç”±è¡¨ï¼‰
é˜¿é‡Œäº‘é…ç½®å‚è€ƒæ–‡æ¡£ï¼š

ä»€ä¹ˆæ˜¯VPNç½‘å…³
IPsec-VPNå…¥é—¨æ¦‚è¿°

1ã€åˆ›å»ºVPNç½‘å…³
2ã€åˆ›å»ºç”¨æˆ·ç½‘å…³
3ã€åˆ›å»ºIPsecè¿æ¥
4ã€é…ç½®è·¯ç”±è¡¨
æ·»åŠ èŠ‚ç‚¹ç»è¿‡VPNç½‘ç»œæ‰“é€šï¼Œæ­¤æ—¶é˜¿é‡Œäº‘å’Œè…¾è®¯äº‘çš„æœºå™¨å·²ç»å¯ä»¥é€šè¿‡å†…ç½‘IPäº’ç›¸è®¿é—®äº†ã€‚æ­¤æ—¶ï¼Œç›´æ¥ä½¿ç”¨kubeadm joinå‘½ä»¤æ·»åŠ èŠ‚ç‚¹å³å¯ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>docker</category>
        <category>k8s</category>
        <category>network</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
        <tag>centos</tag>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨kubeadmå®‰è£…éƒ¨ç½²K8Sé›†ç¾¤â€”â€”CentOSç¯‡</title>
    <url>/dev-kubeadm-install-k8s-in-centos/</url>
    <content><![CDATA[kubeadmç®€ä»‹ã€Šä½¿ç”¨kubeadmå‡çº§K8Sé›†ç¾¤ã€‹ä¸€æ–‡ä¸­ï¼Œäº†è§£äº†k8sé›†ç¾¤ä¸­å¸¸è§ç»„ä»¶ï¼Œå¹¶ä¸”ä½¿ç”¨kubeadmå¯¹k8sé›†ç¾¤è¿›è¡Œäº†å‡çº§ã€‚æœ¬æ–‡ä¸­ï¼Œä¼šå­¦ä¹ ä½¿ç”¨kubeadmå®‰è£…éƒ¨ç½²k8sé›†ç¾¤ã€‚

Kubeadm is a tool built to provide kubeadm init and kubeadm join as best-practice â€œfast pathsâ€ for creating Kubernetes clusters.

å‚è€ƒæ–‡æ¡£ï¼š

Overview of kubeadm
Installing kubeadm



å®‰è£…æµç¨‹ç›®æ ‡ï¼šæ­å»ºä¸€ä¸ªk8sé›†ç¾¤ï¼ŒåŒ…æ‹¬masterå’Œnode01ä¸¤ä¸ªèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹ç³»ç»Ÿä¸ºcentos7.6.1810ã€‚masterèŠ‚ç‚¹ipä¸º192.168.56.200ï¼Œnode01èŠ‚ç‚¹ipä¸º192.168.56.201ã€‚
1ã€ç¯å¢ƒå‡†å¤‡ã€‚
2ã€åœ¨masterèŠ‚ç‚¹å’Œnode01èŠ‚ç‚¹å®‰è£…kubeadmã€‚
3ã€åˆå§‹åŒ–masterèŠ‚ç‚¹ï¼Œåˆ›å»ºk8sé›†ç¾¤ï¼ˆè®°å¾—å®‰è£…ç½‘ç»œæ’ä»¶ï¼‰ã€‚
4ã€node01èŠ‚ç‚¹åŠ å…¥åˆ°k8sé›†ç¾¤ã€‚
5ã€éªŒè¯å®‰è£…ã€‚
ç¯å¢ƒå‡†å¤‡1ã€é…ç½®ä¸»æœºå
2ã€é…ç½®IPåœ°å€
å®‰è£…dockerå‚è€ƒDockerå…¥é—¨ï¼Œå®‰è£…Docker
å…è®¸iptablesæ£€æŸ¥æ¡¥æ¥æµé‡å…è®¸ iptables æ£€æŸ¥æ¡¥æ¥æµé‡ï¼Œå…è®¸æµé‡è½¬å‘
cat &lt;&lt;EOF | sudo tee /etc/modules-load.d/k8s.confbr_netfilterEOFcat &lt;&lt;EOF | sudo tee /etc/sysctl.d/k8s.confnet.bridge.bridge-nf-call-ip6tables = 1net.bridge.bridge-nf-call-iptables = 1EOFsudo sysctl --system

æ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ‰§è¡Œã€‚
å®‰è£…kubeadm+kubelet+kubectlå‚è€ƒå®‰è£…kubeadmã€‚
å‡†å¤‡kubernetes.repoé…ç½®cat &lt;&lt;EOF | sudo tee /etc/yum.repos.d/kubernetes.repo[kubernetes]name=Kubernetesbaseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-$basearchenabled=1gpgcheck=1repo_gpgcheck=0gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpgexclude=kubelet kubeadm kubectlEOF

å¦‚æœä¸èƒ½è¿é€šgoogleï¼Œkubernetes.repoä¸­çš„baseurlå°±æ›¿æ¢æˆaliyun
cat &lt;&lt;EOF | sudo tee /etc/yum.repos.d/kubernetes.repo[kubernetes]name=Kubernetesbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64enabled=1gpgcheck=0EOF

æ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ‰§è¡Œã€‚
SELinuxè®¾ç½®ä¸ºpermissiveæ¨¡å¼å°† SELinux è®¾ç½®ä¸º permissive æ¨¡å¼ï¼ˆç›¸å½“äºå°†å…¶ç¦ç”¨ï¼‰
sudo setenforce 0sudo sed -i &#x27;s/^SELINUX=enforcing$/SELINUX=permissive/&#x27; /etc/selinux/config

å®‰è£…kubeadm+kubelet+kubectl1ã€å®‰è£…é»˜è®¤ç‰ˆæœ¬çš„kubeadm+kubelet+kubectl
sudo yum install -y kubelet kubeadm kubectl --disableexcludes=kubernetessudo systemctl enable --now kubelet

centoså®‰è£…è¿™äº›ç»„ä»¶æ—¶å¦‚æœæŠ¥é”™ï¼š[Errno -1] repomd.xml signature could not be verified for kubernetesä¸è€ƒè™‘å®‰å…¨æ€§çš„è¯ï¼Œæœ€ç®€å•çš„è§£å†³åŠæ³•æ˜¯ä¿®æ”¹ /etc/yum.repos.d/kubernetes.repo æ–‡ä»¶ï¼Œè®¾ç½® repo_gpgcheck=0
2ã€æŸ¥çœ‹kubeletç‰ˆæœ¬kubelet --version
å¦‚æœæƒ³è¦å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„k8sï¼Œæ¯”å¦‚1.22.15ï¼Œé‚£ä¹ˆéœ€è¦å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„kubeadmã€kubeletå’Œkubectlã€‚
sudo yum remove -y kubelet kubeadm kubectlsudo yum list kubeadm kubelet kubectl --showduplicatessudo yum install -y kubeadm-1.22.15-0 kubelet-1.22.15-0 kubectl-1.22.15-0 --disableexcludes=kubernetes
ä¸‹æ–‡ä¸­kubeadm.confä¸­çš„ç‰ˆæœ¬ä¹Ÿéœ€è¦åŒæ­¥ä¿®æ”¹kubernetesVersion: 1.22.15
å…³é—­swap
Swap disabled. You MUST disable swap in order for the kubelet to work properly.

å¦‚å®˜æ–¹æ–‡æ¡£æ‰€è¯´ï¼Œkubeletæ­£å¸¸å·¥ä½œçš„å‰ææ˜¯å…³é—­swapï¼Œå¦åˆ™kubeadmæ‰§è¡Œåˆå§‹åŒ–æ—¶ä¼šæŠ¥é”™ï¼šâ€œâ€“cgroups-per-qos enabled, but â€“cgroup-root was not specified.  defaulting to /â€œâ€œFailed to run kubeletâ€ err=â€failed to run Kubelet: running with swap on is not supported, please disable swap!æŠ¥é”™æŸ¥çœ‹æ–¹æ³•ï¼š
systemctl status kubeletjournalctl -xeu kubelet

1ã€ä¸´æ—¶å…³é—­swapswapoff -a
2ã€æ°¸ä¹…å…³é—­swapsed -i &#39;/ swap / s/^/#/&#39; /etc/fstabæˆ–è€…ç¼–è¾‘ /etc/fstabï¼Œæ‰‹åŠ¨æ³¨é‡Šæ‰swapé…ç½®ã€‚
#/dev/mapper/centos-swap swap swap defaults 0 0

æ— è®ºæ˜¯masterèŠ‚ç‚¹ï¼Œè¿˜æ˜¯workerèŠ‚ç‚¹ï¼Œè®°å¾—éƒ½è¦å…³é—­swapã€‚
é…ç½®cgroupé©±åŠ¨
Both the container runtime and the kubelet have a property called â€œcgroup driverâ€, which is important for the management of cgroups on Linux machines.

å¦‚å®˜æ–¹æ–‡æ¡£æ‰€è¯´ï¼Œcgroupé©±åŠ¨å¯¹äºåœ¨linuxä¸­ç®¡ç†cgroupsä¸­éå¸¸é‡è¦ã€‚å› æ­¤éœ€è¦æ­£ç¡®é…ç½® kubelet çš„ cgroup é©±åŠ¨ä»¥åŒ¹é… kubeadm é›†ç¾¤ä¸­çš„å®¹å™¨è¿è¡Œæ—¶çš„ cgroup é©±åŠ¨ï¼Œè¯¦æƒ…å‚è€ƒ é…ç½® cgroup é©±åŠ¨
å¦åˆ™kubeadmæ‰§è¡Œåˆå§‹åŒ–æ—¶ä¼šæŠ¥é”™ï¼š[kubelet-check] It seems like the kubelet isnâ€™t running or healthy.The kubelet is not runningThe kubelet is unhealthy due to a misconfiguration of the node in some way (required cgroups disabled)è¿™æ˜¯å› ä¸ºï¼Œ docker å’Œ kubelet æœåŠ¡ä¸­çš„cgroupä¸ä¸€è‡´ï¼Œdockeré»˜è®¤ä½¿ç”¨cgroupfsï¼Œkubeleté»˜è®¤ä½¿ç”¨systemdcgroupé©±åŠ¨æŸ¥çœ‹æ–¹æ³•ï¼š
docker system info | grep -i drivercat /var/lib/kubelet/config.yaml | grep cgroup

æ–¹æ³•ä¸€ï¼škubeletåŒ¹é…dockerç¼–è¾‘kubeadm.confï¼Œæ·»åŠ kubeletçš„cgroupé…ç½®ï¼ŒæŒ‡å®šé©±åŠ¨ä¸ºcgroupfs
---kind: KubeletConfigurationapiVersion: kubelet.config.k8s.io/v1beta1#cgroupDriver: systemdcgroupDriver: cgroupfs

æ–¹æ³•äºŒï¼šdockeråŒ¹é…kubeletç¼–è¾‘ /etc/docker/daemon.json ï¼Œæ·»åŠ ï¼š
&#123;    &quot;exec-opts&quot;: [        &quot;native.cgroupdriver=systemd&quot;    ]&#125;
é‡å¯docker
systemctl daemon-reloadsystemctl restart docker

è¿™é‡Œé€‰æ‹©æ–¹æ³•äºŒï¼Œå› ä¸ºå®˜æ–¹æ›´åŠ æ¨èï¼Œå¯ä»¥é¿å…åç»­kubeadmå‡çº§å¯èƒ½å¼•å‘çš„cgroupé©±åŠ¨é—®é¢˜ã€‚
åˆå§‹åŒ–masterèŠ‚ç‚¹å‚è€ƒInstalling kubeadm on your hostsã€‚
ä¸‹è½½é•œåƒæ–‡ä»¶kubeadmé»˜è®¤ä»gcr.ioä¸‹è½½k8sç»„ä»¶é•œåƒï¼Œå›½å†…éœ€è¦ç§‘å­¦ä¸Šç½‘ï¼Œæˆ–è€…æ›´æ”¹ä¸ºå›½å†…æºã€‚æœ¬æ–‡é€‰æ‹©æ›´æ”¹ä¸ºå›½å†…æºã€‚
1ã€å¯¼å‡ºä¸€ä»½é»˜è®¤é…ç½®æ–‡ä»¶kubeadm config print init-defaults &gt; kubeadm.conf
é»˜è®¤é…ç½®å†…å®¹ä¸ºï¼š
apiVersion: kubeadm.k8s.io/v1beta3bootstrapTokens:- groups:  - system:bootstrappers:kubeadm:default-node-token  token: abcdef.0123456789abcdef  ttl: 24h0m0s  usages:  - signing  - authenticationkind: InitConfigurationlocalAPIEndpoint:  advertiseAddress: 1.2.3.4  bindPort: 6443nodeRegistration:  criSocket: /var/run/dockershim.sock  imagePullPolicy: IfNotPresent  name: node  taints: null---apiServer:  timeoutForControlPlane: 4m0sapiVersion: kubeadm.k8s.io/v1beta3certificatesDir: /etc/kubernetes/pkiclusterName: kubernetescontrollerManager: &#123;&#125;dns: &#123;&#125;etcd:  local:    dataDir: /var/lib/etcdimageRepository: k8s.gcr.iokind: ClusterConfigurationkubernetesVersion: 1.23.0networking:  dnsDomain: cluster.local  serviceSubnet: 10.96.0.0/12scheduler: &#123;&#125;

2ã€ä¸‹è½½åœ°å€æ”¹ä¸ºå›½å†…é•œåƒæºç¼–è¾‘kubeadm.confï¼ŒimageRepositoryæ”¹ä¸ºå›½å†…æº
imageRepository: registry.cn-hangzhou.aliyuncs.com/google_containers

3ã€æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œæ‰§è¡Œä¸‹è½½kubeadm config images pull --config kubeadm.conf
[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/kube-apiserver:v1.23.0[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/kube-controller-manager:v1.23.0[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/kube-scheduler:v1.23.0[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/kube-proxy:v1.23.0[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.6[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/etcd:3.5.1-0[config/images] Pulled registry.cn-hangzhou.aliyuncs.com/google_containers/coredns:v1.8.6
k8sé›†ç¾¤é…ç½®ç¼–è¾‘kubeadm.confï¼ŒæŒ‡å®šk8sé›†ç¾¤é…ç½®ï¼Œè¯¦æƒ…å‚è€ƒkubeadm é…ç½® (v1beta2)
advertiseAddressä¿®æ”¹ localAPIEndpoint.advertiseAddress å­—æ®µï¼Œä¹Ÿå°±æ˜¯apiserverå¯¹å¤–å¼€æ”¾çš„åœ°å€ï¼Œè¿™é‡Œæ”¹ä¸ºmasterèŠ‚ç‚¹åœ°å€ï¼ˆå› ä¸ºæ²¡æœ‰é…ç½®é«˜å¯ç”¨ï¼‰
localAPIEndpoint:  advertiseAddress: 192.168.56.200  bindPort: 6443

å¦‚æœåœ¨æ‰§è¡Œåˆå§‹å‰ä¸æŒ‡å®šå¯ç”¨çš„advertiseAddressï¼Œé‚£ä¹ˆkubeadm initåˆå§‹åŒ–æ—¶ä¼šæŠ¥é”™ï¼šError getting nodeâ€ err=â€node â€œnodeâ€ not found
æŒ‡å®šèŠ‚ç‚¹åç§°ä¿®æ”¹ nodeRegistration.name å­—æ®µï¼Œè¿™ä¸ªå­—æ®µä¼šä½œä¸ºæ‰§è¡Œåˆå§‹åŒ–çš„è¿™ä¸ªmasterèŠ‚ç‚¹çš„åç§°ã€‚å»ºè®®æ”¹ä¸ºmasterèŠ‚ç‚¹çš„ä¸»æœºåï¼Œå¦åˆ™é»˜è®¤å°±ä¼šå«nodeã€‚
nodeRegistration:  criSocket: /var/run/dockershim.sock  imagePullPolicy: IfNotPresent  name: master  taints: null

å¦‚æœåœ¨æ‰§è¡Œåˆå§‹åŒ–å‰æ²¡æœ‰æŒ‡å®šèŠ‚ç‚¹åå­—ï¼Œæƒ³è¦ä¿®æ”¹çš„è¯ï¼Œéœ€è¦ä¿®æ”¹kubeadm.confåé‡æ–°éƒ¨ç½²k8sé›†ç¾¤ã€‚
ä¸é‡æ–°éƒ¨ç½²k8sé›†ç¾¤ï¼Œæ˜¯å¦å¯ä»¥ç›´æ¥ç¼–è¾‘ä¿®æ”¹èŠ‚ç‚¹çš„åç§°ï¼Ÿkubectl edit nodes/nodeï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š
metadata:  labels:    kubernetes.io/hostname: master  name: master

å¾ˆé—æ†¾ï¼Œä¸å¯ä»¥ï¼Œä¼šæŠ¥é”™ï¼šerror: At least one of apiVersion, kind and name was changed
æŒ‡å®špod ipèŒƒå›´æ·»åŠ  networking.podSubnet å­—æ®µï¼ŒæŒ‡å®špod ipèŒƒå›´ï¼ˆpod-network-cidrï¼‰
networking:  dnsDomain: cluster.local  serviceSubnet: 10.96.0.0/12  podSubnet: &quot;10.244.0.0/16&quot;

å…³äºpod ipèŒƒå›´å’Œservcie ipèŒƒå›´çš„è®¾ç½®ï¼Œå¯ä»¥å‚è€ƒå­ç½‘åˆ’åˆ†è¯¦è§£ä¸å­ç½‘åˆ’åˆ†å®ä¾‹ç²¾æå’Œè¯¦è§£ç½‘ç»œåˆ†ç±»ABC
å¦‚æœåœ¨æ‰§è¡Œåˆå§‹åŒ–å‰æ²¡æœ‰æŒ‡å®špod ipèŒƒå›´ï¼Œä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸åˆå§‹åŒ–çš„ï¼Œä½†æ˜¯åé¢ä¼šå¯¼è‡´CNIæ’ä»¶æ— æ³•æ­£å¸¸å¯åŠ¨ã€‚æ¯”å¦‚kube-flannelä¼šæŠ¥é”™ï¼šError registering network: failed to acquire lease: node â€œnodeâ€ pod cidr not assignedåæœŸæƒ³è¦ä¿®æ”¹çš„è¯ï¼Œéœ€è¦ä¿®æ”¹kubeadm.confåé‡æ–°éƒ¨ç½²k8sé›†ç¾¤ã€‚
ä¸é‡æ–°éƒ¨ç½²k8sé›†ç¾¤ï¼Œèƒ½å¦è¡¥æ•‘ï¼Ÿè¿™ä¸ªæ˜¯å¯ä»¥çš„ç¼–è¾‘ /etc/kubernetes/manifests/kube-controller-manager.yaml ï¼Œæ·»åŠ å‚æ•°ï¼š
- command:  - --allocate-node-cidrs=true  - --cluster-cidr=10.244.0.0/16
ç„¶åé‡å¯kubeletï¼šsystemctl restart kubelet
æ‰§è¡Œåˆå§‹åŒ–#rm -rf /etc/kubernetes/manifests/ #kubeadm resetkubeadm init --config kubeadm.conf
å®Œæˆåï¼Œå±å¹•è¾“å‡ºä¼šæç¤ºåˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œä»¥åŠæ·»åŠ worker nodeçš„joinå‘½ä»¤ï¼Œè®°å½•ä¸‹æ¥ã€‚ä¾‹å¦‚ï¼š
kubeadm join 192.168.56.200:6443 --token abcdef.0123456789abcdef \    --discovery-token-ca-cert-hash sha256:6743eaae41ba8fd99e495e3df94ff9a996878e7c9cf8ac590a3c52b97ea8012e

PSï¼šå¦‚æœå¿˜è®°äº†æ·»åŠ worker nodeçš„joinå‘½ä»¤ï¼Œå¯ä»¥é‡æ–°ç”Ÿæˆã€‚
kubeadm token create --helpkubeadm token create --print-join-command
ç”Ÿæˆæ–°çš„joinå‘½ä»¤åï¼Œä¹‹å‰çš„joinå‘½ä»¤åŒæ ·å¯ä»¥ä½¿ç”¨ã€‚
åˆ›å»ºé…ç½®æ–‡ä»¶mkdir -p $HOME/.kubecp -i /etc/kubernetes/admin.conf $HOME/.kube/configchown $(id -u):$(id -g) $HOME/.kube/config

éªŒè¯å®‰è£…docker ps -akubectl get nodeskubectl get pods --namespace kube-system

éªŒè¯å‘ç°é—®é¢˜é—®é¢˜ä¸€ï¼šcorednså¤„äºpendingçŠ¶æ€æŸ¥çœ‹corednsæŠ¥é”™ä¿¡æ¯ï¼š
kubectl get deployment/coredns -n kube-system -o yamlkubectl get pods -n kube-systemkubectl describe pods coredns-65c54cc984-srzl4 -n kube-systemkubectl logs pods coredns-65c54cc984-srzl4 -n kube-system
Warning  FailedScheduling  2m57s (x36 over 38m)  default-scheduler  0/1 nodes are available: 1 node(s) had taint {node.kubernetes.io/not-ready: }, that the pod didnâ€™t tolerate.åŸæ¥æ˜¯corednsé»˜è®¤æ— æ³•éƒ¨ç½²åœ¨masterèŠ‚ç‚¹ï¼Œå› ä¸ºæ²¡æœ‰é…ç½®å®¹å¿ã€‚å‚è€ƒæ±¡ç‚¹å’Œå®¹å¿åº¦è¿›è¡Œé…ç½®å³å¯ã€‚kubectl edit deployment/coredns -n kube-system -o yamltolerationséƒ¨åˆ†æ·»åŠ ï¼š
tolerations:- effect: NoSchedule  key: node.kubernetes.io/not-ready

é—®é¢˜äºŒï¼šcorednsæ— æ³•å¯åŠ¨é—®é¢˜ä¸€è§£å†³åï¼Œcorednså¯ä»¥è°ƒåº¦äº†ï¼Œä½†æ˜¯æ— æ³•å¯åŠ¨ã€‚kubectl describe pods/coredns-55b7b56cf8-jv2dc -n kube-systemnetwork is not ready: container runtime network not ready: NetworkReady=false reason:NetworkPluginNotReady message:docker: network plugin is not ready: cni config uninitialized
ä»”ç»†ç ”è¯»ä½¿ç”¨ kubeadm åˆ›å»ºé›†ç¾¤ï¼ŒåŸæ¥é—®é¢˜ä¸€æ˜¯ç¬¦åˆé¢„æœŸçš„ï¼ŒmasterèŠ‚ç‚¹è¿˜æ²¡æœ‰readyï¼Œå› ä¸ºç¼ºå°‘cniæ’ä»¶ã€‚
å®‰è£…CNIæ’ä»¶å‚è€ƒé›†ç¾¤ç½‘ç»œç³»ç»Ÿé€‰æ‹©ä¸€ä¸ªcniæ’ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©flannelã€‚
kubectl apply -f https://raw.githubusercontent.com/flannel-io/flannel/master/Documentation/kube-flannel.yml

node01åŠ å…¥k8sé›†ç¾¤1ã€ä½¿ç”¨joinå‘½ä»¤ï¼Œæ·»åŠ node01èŠ‚ç‚¹åˆ°é›†ç¾¤
kubeadm join 192.168.56.200:6443 --token abcdef.0123456789abcdef \    --discovery-token-ca-cert-hash sha256:6743eaae41ba8fd99e495e3df94ff9a996878e7c9cf8ac590a3c52b97ea8012e

2ã€éªŒè¯ç»“æœåœ¨masterèŠ‚ç‚¹æ‰§è¡Œï¼škubectl get nodesçœ‹åˆ°masterèŠ‚ç‚¹å’Œnode01èŠ‚ç‚¹éƒ½æ˜¯Readyçš„çŠ¶æ€ï¼Œè¯´æ˜å®‰è£…æˆåŠŸã€‚
å¼€å‘æ¨¡å¼å‡ºäºå®‰å…¨åŸå› ï¼Œk8sé›†ç¾¤é»˜è®¤ä¸ä¼šåœ¨æ§åˆ¶èŠ‚ç‚¹(masterèŠ‚ç‚¹)ä¸Šè°ƒåº¦Podã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›å¯ä»¥åœ¨masterèŠ‚ç‚¹ä¸Šè°ƒåº¦Podï¼Œæ¯”å¦‚åœ¨å¼€å‘æµ‹è¯•æ—¶ï¼Œå¯ä»¥å»æ‰masterèŠ‚ç‚¹çš„æ±¡ç‚¹ã€‚kubectl taint nodes --all node-role.kubernetes.io/master-
éªŒè¯å®‰è£…æ‰‹åŠ¨éªŒè¯kubectl get nodeskubectl get pods --all-namespacesservice kube-apiserver statusservice kube-controller-manager statusservice kube-scheduler statusservice kubelet statusservice kube-proxy status

kubectl run nginxkubectl get podskubectl scale --replicas=3 deploy/nginxkubectl get podskubectl expose deployment nginx --port=80 --type=NodePortkubectl get servicecurl http://node01:31850

test-infraæºç åœ°å€ï¼škubernetes/test-infra
1ã€æ‹‰å–æºç go get -u k8s.io/test-infra/kubetest
2ã€æ‰§è¡Œkubetest
kubetest --extract=v1.11.3cd kubernetesexport KUBE_MASTER_IP=&quot;192.168.56.200:6443&quot;export KUBE_MASTER=kube-masterkubetest --test --provider=skeleton &gt; testout.txtkubetest --test --provider=skeleton --test_args=&quot;ginkgo.focus=Secrets&quot; &gt; testout.txtcat testout.txt

Smoke TestæŒ‰ç…§Smoke Testæ–‡æ¡£æ“ä½œä¸€éã€‚
sonobuoyå®˜ç½‘åœ°å€ï¼šsonobuoyæºç åœ°å€ï¼švmware-tanzu/sonobuoy
èŠ‚ç‚¹é‡å¯åcorednså¯åŠ¨é—®é¢˜masterèŠ‚ç‚¹é‡å¯åï¼Œå‘ç°corednsæ— æ³•æ­£å¸¸å¯åŠ¨ã€‚Warning  Unhealthy  2m1s (x22 over 5m)  kubelet            Readiness probe failed: HTTP probe failed with statuscode: 503[ERROR] plugin/errors: HINFO: read udp 10.244.0.7:48010-&gt;202.106.195.68:53: i/o timeout[INFO] plugin/ready: Still waiting on: â€œkubernetesâ€
å‚è€ƒHow to solve CoreDNS always stuck at â€œwaiting for kubernetesâ€?ï¼Œå‘ç°éœ€è¦å…³é—­é˜²ç«å¢™ï¼Œä½çº§é”™è¯¯ï¼
systemctl status firewalldsystemctl stop firewalldsystemctl disable firewalld

é›†ç¾¤é…ç½®æ›´æ”¹æ‰§è¡Œkubeadm initåˆå§‹åŒ–åï¼Œkubeadm.confä¸­çš„å†…å®¹å°±å†™å…¥åˆ°äº†k8sé›†ç¾¤äº†configmapï¼Œå¯ä»¥é€šè¿‡kubectlå‘½ä»¤æŸ¥çœ‹ã€‚kubectl get cm kubeadm-config -n kube-system -oyaml
å¦‚æœæƒ³è¦ä¿®æ”¹é…ç½®ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹kubeadm-configè¿™ä¸ªconfigmapï¼Œè¯¦æƒ…å‚è€ƒé‡æ–°é…ç½® kubeadm é›†ç¾¤ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>docker</category>
        <category>k8s</category>
        <category>network</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
        <tag>centos</tag>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨kubeadmå®‰è£…éƒ¨ç½²K8Sé›†ç¾¤â€”â€”Ubuntuç¯‡</title>
    <url>/dev-kubeadm-install-k8s-in-ubuntu/</url>
    <content><![CDATA[å‰è¨€ã€Šä½¿ç”¨kubeadmå®‰è£…éƒ¨ç½²K8Sé›†ç¾¤â€”â€”CentOSç¯‡ã€‹ä¸€æ–‡ä¸­ï¼Œåœ¨CentOSç³»ç»Ÿä¸­éƒ¨ç½²äº†K8Sé›†ç¾¤ã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ ä½¿ç”¨kubeadmåœ¨Ubuntuç³»ç»Ÿä¸­å®‰è£…éƒ¨ç½²k8sé›†ç¾¤ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Overview of kubeadm
Installing kubeadm



å®‰è£…æµç¨‹ç›®æ ‡ï¼šæ­å»ºä¸€ä¸ªk8sé›†ç¾¤ï¼ŒåŒ…æ‹¬masterå’Œnode01ä¸¤ä¸ªèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹ç³»ç»Ÿä¸ºubuntu16.04.2ã€‚
1ã€ç¯å¢ƒå‡†å¤‡ã€‚
2ã€åœ¨ä¸¤ä¸ªèŠ‚ç‚¹ä¸Šå®‰è£…kubeadmã€‚
3ã€ä½¿ç”¨kubeadmåˆå§‹åŒ–èŠ‚ç‚¹ã€‚
4ã€å®‰è£…ç½‘ç»œæ’ä»¶ã€‚
5ã€éªŒè¯å®‰è£…ã€‚
ç¯å¢ƒå‡†å¤‡1ã€é…ç½®ä¸»æœºå
2ã€é…ç½®IPåœ°å€
3ã€å‚è€ƒLetting iptables see bridged trafficï¼Œé…ç½®iptables
# ensure legacy binaries are installedsudo apt-get install -y iptables arptables ebtables# switch to legacy versionssudo update-alternatives --set iptables /usr/sbin/iptables-legacysudo update-alternatives --set ip6tables /usr/sbin/ip6tables-legacysudo update-alternatives --set arptables /usr/sbin/arptables-legacysudo update-alternatives --set ebtables /usr/sbin/ebtables-legacy# Letting iptables see bridged trafficcat &lt;&lt;EOF &gt; /etc/sysctl.d/k8s.confnet.bridge.bridge-nf-call-ip6tables = 1net.bridge.bridge-nf-call-iptables = 1EOFsysctl --system

4ã€å‚è€ƒDockerå…¥é—¨ï¼Œå®‰è£…Docker
å®‰è£…kubeadmå‚è€ƒInstalling kubeadmã€‚
1ã€ç¡®è®¤ç³»ç»Ÿç‰ˆæœ¬
cat /etc/os-release

2ã€æ‰§è¡Œå®‰è£…kubeadmã€kubeletå’Œkubectlï¼ˆä¸¤ä¸ªèŠ‚ç‚¹éƒ½è¦æ‰§è¡Œï¼‰
sudo apt-get update &amp;&amp; sudo apt-get install -y apt-transport-https curlcurl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -cat &lt;&lt;EOF | sudo tee /etc/apt/sources.list.d/kubernetes.listdeb https://apt.kubernetes.io/ kubernetes-xenial mainEOFsudo apt-get updatesudo apt-get install -y kubelet kubeadm kubectlsudo apt-mark hold kubelet kubeadm kubectl

3ã€æŸ¥çœ‹kubeletç‰ˆæœ¬
kubelet --version

CONTINUEåç»­æ­¥éª¤ï¼Œå’Œã€Šä½¿ç”¨kubeadmå®‰è£…éƒ¨ç½²K8Sé›†ç¾¤â€”â€”CentOSç¯‡ã€‹ä¸­çš„æ­¥éª¤ç›¸åŒã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>docker</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
        <tag>ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>AutoHotkeyé…ç½®é¼ æ ‡å…‰æ ‡åœ¨å±å¹•ä¹‹é—´ç¬ç§»</title>
    <url>/hobby-autohotkey-mouse-cursor-switch-between-screens/</url>
    <content><![CDATA[åŒå±å¹•å¸¦æ¥çš„é—®é¢˜å¾ˆå¤šåŒäº‹éƒ½ä¼šåœ¨ç¬”è®°æœ¬ç”µè„‘ä¹‹å¤–ï¼Œå†é…å¤‡ä¸€ä¸ªæˆ–ä¸¤ä¸ªå±å¹•ï¼Œæˆ‘ä¹Ÿå¦å¤–é…å¤‡äº†ä¸€å—å±å¹•ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨åŒå±å¹•ä¼šå¸¦æ¥ä¸¤ä¸ªé—®é¢˜ï¼šä¸€ä¸ªæ˜¯çª—å£çš„åˆ‡æ¢ç§»åŠ¨ä¸æ–¹ä¾¿ï¼Œå¦ä¸€ä¸ªæ˜¯é¼ æ ‡çš„åˆ‡æ¢ç§»åŠ¨ä¸æ–¹ä¾¿ã€‚
ã€ŠWindowså¿«æ·é”®ã€‹ä¸€æ–‡ä¸­ï¼Œæåˆ°äº†ä¸¤ä¸ªå¯ä»¥ç”¨äºå¤šä¸ªå±å¹•çª—å£æ“ä½œçš„å¿«æ·é”®ï¼š1ã€alt+tabï¼Œåˆ‡æ¢çª—å£ã€‚2ã€win+shift+å·¦å³é”®ï¼Œå¯ä»¥ç§»åŠ¨çª—å£åˆ°å¦ä¸€ä¸ªå±å¹•ã€‚
çª—å£çš„é—®é¢˜åŸºæœ¬è§£å†³äº†ï¼Œä½†æ˜¯é¼ æ ‡çš„é—®é¢˜è¿˜æ²¡æœ‰è§£å†³ã€‚æ€ä¹ˆåŠï¼Ÿå¾ˆå¤šæ–‡ç« è¯´ï¼Œé€šè¿‡â€œæ˜¾ç¤ºè®¾ç½®â€ï¼Œè°ƒæ•´ä¸¤ä¸ªå±å¹•çš„ç›¸å¯¹ä½ç½®ï¼Œå°±èƒ½æ›´åŠ å®¹æ˜“åœ°åœ¨ä¸¤ä¸ªå±å¹•é—´ç§»åŠ¨é¼ æ ‡å…‰æ ‡ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªæ–¹æ³•åªæ˜¯ç¼“è§£äº†é—®é¢˜ï¼Œå¹¶æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œé¼ æ ‡å…‰æ ‡ç§»åŠ¨ä¾ç„¶å¾ˆéº»çƒ¦ã€‚
æ­¤æ—¶ï¼Œå°±è¯¥æœ¬æ–‡çš„ä¸»è§’ AutoHotkey å‡ºé©¬äº†ï¼


AutoHotkeyç®€ä»‹
AutoHotkey is a free, open-source scripting language for Windows that allows users to easily create small to complex scripts for all kinds of tasks such as: form fillers, auto-clicking, macros, etc.

æ­£å¦‚å®˜æ–¹çš„ä»‹ç»ï¼Œautohotkeyæ˜¯ä¸€ä¸ªå…è´¹å¼€æºçš„è„šæœ¬è¯­è¨€ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·åœ¨Windowsä¸Šè½»æ¾åˆ›å»ºè„šæœ¬ï¼Œä¾‹å¦‚ï¼šè¡¨æ ¼å¡«å……ï¼Œè‡ªåŠ¨å•å‡»ï¼Œå®ç­‰ã€‚
å®‰è£…1ã€è®¿é—®AutoHotkeyå®˜ç½‘æˆ–è€…AutoHotkey-githubï¼Œä¸‹è½½å®‰è£…åŒ…ï¼Œæœ¬æ–‡ä¸­é€‰æ‹©ä¸‹è½½ AutoHotkey_1.1.32.00_setup.exe 
2ã€åŒå‡»å®‰è£…å³å¯
åŸºæœ¬è¯­æ³•helloworld1ã€æ–°å»ºæ–‡ä»¶helloworld.ahkï¼Œå†…å®¹ä¸ºï¼š
!H::Send, helloworldReturn
ç¬¬ä¸€è¡Œå®šä¹‰å¿«æ·é”®ï¼Œå…¶ä¸­!ä»£è¡¨altï¼ŒHå°±æ˜¯Hã€‚ç¬¬äºŒè¡ŒSendå‘½ä»¤ï¼Œ,åçš„æ˜¯å‚æ•°ã€‚ç¬¬ä¸‰è¡ŒReturnåœæ­¢åé¢çš„è„šæœ¬ã€‚
2ã€å¯åŠ¨è„šæœ¬åŒå‡»helloworld.ahkï¼Œæˆ–è€…å³é”®helloworld.ahkï¼ŒRun Scriptã€‚æŸ¥çœ‹ç³»ç»Ÿæ‰˜ç›˜ï¼Œå¯ä»¥çœ‹åˆ°å¤šäº†ä¸€ä¸ªHçš„å›¾æ ‡ï¼Œè¿™å°±æ˜¯æ­£åœ¨è¿è¡Œçš„è„šæœ¬ã€‚
3ã€æµ‹è¯•è„šæœ¬æ‰“å¼€ä»»æ„ä¸€ä¸ªæ–‡æ¡£ï¼ŒæŒ‰ä¸‹ alt+H ï¼Œå‘ç°ä¼šè‡ªåŠ¨å¡«å…¥ â€œhelloworldâ€ï¼Œniceã€‚
è¯­æ³•è¯´æ˜1ã€ç¬¦å·è¯´æ˜
#	Win!	Alt^	Control+	Shift&amp;	è¿æ¥ä¸¤ä¸ªæŒ‰é”®(å«é¼ æ ‡æŒ‰é”®)ï¼Œåˆå¹¶æˆä¸€ä¸ªè‡ªå®šä¹‰çƒ­é”®

2ã€å¸¸ç”¨å‘½ä»¤
Send å‘é€ä¸€æ®µå­—ç¬¦SendInput å‘é€ä¸€æ®µå­—ç¬¦MsgBox å¼¹å‡ºå¯¹è¯æ¡†Run è¿è¡Œä¸€ä¸ªè½¯ä»¶æˆ–è€…æ‰“å¼€ç½‘é¡µWinActivate çª—å£æ¿€æ´»WinWaitActive ç­‰å¾…çª—å£æ¿€æ´»

æ›´å¤šå†…å®¹å‚è€ƒAutoHotkeyå®˜æ–¹æ–‡æ¡£ã€‚
å®šä¹‰å¿«æ·é”®åˆ©ç”¨autohotkeyï¼Œå¯ä»¥å®ç°è‡ªå®šä¹‰å¿«æ·é”®ã€‚
åŒè„šæœ¬1ã€æ–°å»ºæ–‡ä»¶ mousemove1.ahkï¼Œå†…å®¹ä¸º
!1::CoordMode, Mouse, ScreenMouseMove, (A_ScreenWidth // 2), (A_ScreenHeight // 2)return

è¿™æ®µè„šæœ¬è¿è¡Œåï¼ŒæŒ‰ä¸‹ alt+1 ï¼Œé¼ æ ‡å…‰æ ‡ä¼šè·³è½¬åˆ°å±å¹•1çš„ä¸­å¿ƒã€‚
2ã€æ–°å»ºæ–‡ä»¶ mousemove2.ahkï¼Œå†…å®¹ä¸ºï¼š
!2::CoordMode, Mouse, ScreenMouseMove, (A_ScreenWidth + 100), 100return

è¿™æ®µè„šæœ¬è¿è¡Œåï¼ŒæŒ‰ä¸‹ alt+2 ï¼Œé¼ æ ‡å…‰æ ‡ä¼šè·³è½¬åˆ°å±å¹•2çš„å·¦ä¸Šè§’çš„(100,100)ä½ç½®ã€‚
è¿™ä¸¤ä¸ªè„šæœ¬é…åˆï¼Œå·²ç»å¯ä»¥é¼ æ ‡å…‰æ ‡åœ¨ä¸¤ä¸ªå±å¹•é—´åˆ‡æ¢ï¼Œniceã€‚ä½†æ˜¯ï¼Œmousemove2.ahk è¿˜æœ‰æ”¹è¿›çš„ç©ºé—´ã€‚æ—¢ç„¶å±å¹•1æ˜¯è·³è½¬åˆ°å±å¹•ä¸­é—´ï¼Œé‚£ä¹ˆå±å¹•2è‡ªç„¶ä¹Ÿæ˜¯è·³è½¬åˆ°å±å¹•ä¸­é—´æ›´å¥½ã€‚
å±å¹•2çš„åˆ†è¾¨ç‡ä¸º3840x2160ï¼Œå› æ­¤è„šæœ¬ä¿®æ”¹ä¸ºï¼š
!2::CoordMode, Mouse, ScreenMouseMove, (A_ScreenWidth + 1920), 1080return

å•è„šæœ¬ä»¥ä¸Šï¼Œå·²ç»å®ç°äº†é¼ æ ‡å…‰æ ‡åœ¨ä¸¤ä¸ªå±å¹•é—´çš„å®Œç¾åˆ‡æ¢ã€‚ä½†æ˜¯ï¼Œå› ä¸ºåˆ‡æ¢æ—¶æœ‰ä¸¤ä¸ªå¿«æ·é”®ï¼Œæ‰€ä»¥åˆ‡æ¢é¼ æ ‡æ‰€åœ¨å±å¹•æ—¶ï¼Œè¿˜è¦æƒ³ä¸€ä¸‹æ˜¯åˆ‡åˆ°1è¿˜æ˜¯åˆ‡åˆ°2ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¯ä»¥æ”¹è¿›çš„ç‚¹ã€‚
åˆ›å»ºæ–‡ä»¶ mousemove.ahkï¼Œå†…å®¹ä¸ºï¼š
!J::CoordMode, Mouse, ScreenMouseGetPos, xpos, yposif (xpos &lt;= A_ScreenWidth) and (ypos &lt;= A_ScreenHeight)&#123;    MouseMove, (A_ScreenWidth // 2), (A_ScreenHeight // 2)&#125;else &#123;	MouseMove, (A_ScreenWidth + 1920), 1080&#125;return

è¿™æ®µè„šæœ¬è¿è¡Œåï¼ŒæŒ‰ä¸‹ alt+J ï¼Œå¯ä»¥å®ç°é¼ æ ‡å…‰æ ‡åˆ‡æ¢åˆ°å¦ä¸€ä¸ªå±å¹•çš„ä¸­å¿ƒã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title>K8Sä¸­çš„RBACé‰´æƒ</title>
    <url>/dev-k8s-rbac-auth/</url>
    <content><![CDATA[RBAC Authorization
Role-based access control (RBAC) is a method of regulating access to computer or network resources based on the roles of individual users within your organization.

æ›´å¤šå†…å®¹ï¼Œå‚è€ƒUsing RBAC Authorizationã€‚
ã€Šä¸ºK8Såˆ›å»ºç”¨æˆ·è´¦æˆ·å’ŒæœåŠ¡è´¦æˆ·ã€‹ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†æ–°ç”¨æˆ·janeï¼Œå¹¶ä¸”ä½¿ç”¨CAè¯ä¹¦ç»™è¯¥ç”¨æˆ·ç­¾å‘äº†è¯ä¹¦ã€‚ç°åœ¨æˆ‘ä»¬æœ‰äº†jane.crtå’Œjane.keyï¼Œæœ¬æ–‡ä¸­ä¼šç»™janeé…ç½®ä¸€äº›k8sé›†ç¾¤çš„ç®¡ç†æƒé™ã€‚


è§’è‰²å’Œç»‘å®šé¦–å…ˆï¼Œç»™ç”¨æˆ·janeé…ç½®æƒé™ï¼Œä½¿å…¶èƒ½å¤Ÿåˆ›å»ºå’ŒæŸ¥çœ‹defaultç©ºé—´ä¸‹çš„podsã€‚
å‘½ä»¤å®ç°æˆæƒ1ã€åˆ›å»ºè§’è‰²
kubectl create role --helpkubectl create role developer --resource=pods --verb=list,create

2ã€è§’è‰²ç»‘å®š
kubectl create rolebinding dev-user-binding --role=developer --user=jane

manifestå®ç°æˆæƒç›´æ¥é€šè¿‡é…ç½®æ¸…å•ï¼Œä¹Ÿå¯ä»¥å®ç°è§’è‰²åˆ›å»ºå’Œè§’è‰²ç»‘å®šã€‚
1ã€åˆ›å»ºæˆæƒæ–‡ä»¶auth.yaml
---kind: RoleapiVersion: rbac.authorization.k8s.io/v1metadata:  namespace: default  name: developerrules:- apiGroups: [&quot;&quot;]  resources: [&quot;pods&quot;]  verbs: [&quot;list&quot;, &quot;create&quot;]---kind: RoleBindingapiVersion: rbac.authorization.k8s.io/v1metadata:  name: dev-user-bindingsubjects:- kind: User  name: jane  apiGroup: rbac.authorization.k8s.ioroleRef:  kind: Role  name: developer  apiGroup: rbac.authorization.k8s.iomaster

2ã€æ‰§è¡Œæˆæƒ
kubectl apply -f auth.yaml

éªŒè¯æƒé™kubectl auth can-i list pods --as janekubectl get pods --as jane
è‡³æ­¤ï¼Œç”¨æˆ·janeçš„æƒé™é…ç½®å®Œæˆã€‚
é›†ç¾¤è§’è‰²å’Œç»‘å®šä»¥ä¸Šï¼Œç»™janeæˆæƒï¼Œæ˜¯åœ¨namespaceèŒƒå›´å†…çš„ã€‚å½“æˆ‘ä»¬æƒ³ç»™janeæˆæƒclusterèŒƒå›´çš„æƒé™æ—¶ï¼Œå°±éœ€è¦clusterrolesã€‚
æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³ç»™janeæˆæƒnodeç›¸å…³çš„æƒé™ï¼Œå¯ä»¥å¦‚ä¸‹å®ç°ã€‚
å‘½ä»¤å®ç°1ã€åˆ›å»ºé›†ç¾¤è§’è‰²
kubectl create clusterrole node-reader --verb=get,list,watch --resource=nodes

2ã€ç»‘å®šé›†ç¾¤è§’è‰²
kubectl create clusterrolebinding node-reader-binding --user=jane --clusterrole=node-reader

manifestå®ç°1ã€åˆ›å»ºæˆæƒæ–‡ä»¶auth.yaml
---apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRolemetadata:  creationTimestamp: null  name: node-readerrules:- apiGroups:  - &quot;&quot;  resources:  - nodes  verbs:  - get  - list  - watch---apiVersion: rbac.authorization.k8s.io/v1beta1kind: ClusterRoleBindingmetadata:  creationTimestamp: null  name: node-reader-bindingroleRef:  apiGroup: rbac.authorization.k8s.io  kind: ClusterRole  name: node-readersubjects:- apiGroup: rbac.authorization.k8s.io  kind: User  name: jane

2ã€æ‰§è¡Œæˆæƒ
kubectl apply -f auth.yaml

æˆæƒèŒƒå›´å¦‚æœä½¿ç”¨clusterroleæŒ‡å®šçš„èµ„æºæ˜¯podsè¿™ç§namespaceçº§åˆ«çš„èµ„æºï¼Œè¯¥é›†ç¾¤è§’è‰²ç»‘å®šç»™janeåä¼šæœ‰ä»€ä¹ˆæ•ˆæœï¼Ÿç­”ï¼šjaneå¯¹æ‰€æœ‰namespaceä¸­çš„podsèµ„æºæ‹¥æœ‰clusterroleä¸­å®šä¹‰çš„æ“ä½œæƒé™ã€‚

ClusterRole + ClusterRoleBinding = All Namespaces
ClusterRole + RoleBindings = Particular Namespaces
Role + RoleBinding = Same Namespace

æ›´å¤šå†…å®¹å‚è€ƒHow to Use ClusterRoleBinding With A ServiceAccount in All Namespaces (or a few)
logs&amp;execå‘½ä»¤æƒé™æˆæƒapiVersion: rbac.authorization.k8s.io/v1kind: Rolemetadata:  namespace: default  name: pod-and-pod-logs-readerrules:- apiGroups:   - &quot;&quot;  resources:   - pods  - pods/log  verbs:   - get  - list  - watch- apiGroups:   - &quot;&quot;  resources:   - pods/exec  verbs:   - create

è¯¦æƒ…å‚è€ƒkubernetes RBAC role verbs to exec to pod
CRDèµ„æºæˆæƒå¦‚æœæ˜¯CRDèµ„æºéœ€è¦æˆæƒï¼Œå¯ä»¥å…ˆæŸ¥çœ‹CRDèµ„æºï¼Œç„¶åå†™å…¥åˆ°yamlæ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œæƒ³è¦æˆæƒsparkapplitionèµ„æºçš„æ“ä½œæƒé™ï¼š
1ã€é¦–å…ˆæŸ¥çœ‹spark crdèµ„æº
kubectl get crd | grep spark

çœ‹åˆ°å†…å®¹ä¸ºï¼š
scheduledsparkapplications.sparkoperator.k8s.io       sparkapplications.sparkoperator.k8s.io               

2ã€ç¼–å†™clusterrole yaml
apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRolemetadata:  creationTimestamp: null  name: sparkdev-rolerules:- apiGroups:  - &quot;sparkoperator.k8s.io&quot;  resources:  - sparkapplications  - scheduledsparkapplications  verbs:  - get  - list  - watch  - create  - update  - patch  - delete

è®¿é—®K8Sé›†ç¾¤ç”¨æˆ·janeå·²ç»æ‹¥æœ‰äº†éœ€è¦çš„æƒé™ï¼Œè¯¥æ€æ ·è®¿é—®k8sé›†ç¾¤å‘¢ï¼Ÿç­”æ¡ˆæ˜¯é€šè¿‡kubeconfigæ–‡ä»¶ã€‚
è·å–é›†ç¾¤åŸºæœ¬ä¿¡æ¯å‡è®¾å½“å‰ç”¨æˆ·æ˜¯adminï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡å‘½ä»¤æ‹¿åˆ°apiserveråœ°å€å’Œca.crtæ–‡ä»¶ã€‚
1ã€æŸ¥çœ‹apiserveråœ°å€
kubectl config view | grep server

2ã€ä¿å­˜ca.crt
cat ~/.kube/config | grep certificate-authority-data | awk &#x27;&#123;print $2&#125;&#x27; | base64 --decode &gt; ca.crt

ç”Ÿæˆjane.kubeconfig1ã€ç”Ÿæˆï¼ˆè®¾ç½®ï¼‰kubeconfigé›†ç¾¤å‚æ•°
kubectl config set-cluster kubernetes \--server=&quot;https://172.17.0.69:6443&quot; \--certificate-authority=ca.crt \--embed-certs=true \--kubeconfig=jane.kubeconfig
å½“å‰ç›®å½•ç”Ÿæˆjane.kubeconfigæ–‡ä»¶ã€‚
2ã€è®¾ç½®kubeconfigå®¢æˆ·ç«¯è®¤è¯å‚æ•°
kubectl config set-credentials jane \--client-certificate=jane.crt \--client-key=jane.key \--embed-certs=true \--kubeconfig=jane.kubeconfig

3ã€è®¾ç½®kubeconfigä¸Šä¸‹æ–‡å‚æ•°
kubectl config set-context jane@kubernetes \--cluster=kubernetes \--user=jane \--namespace=default \--kubeconfig=jane.kubeconfig

4ã€æŸ¥çœ‹é…ç½®
cat jane.kubeconfigkubectl config view --kubeconfig jane.kubeconfig

éªŒè¯è®¿é—®1ã€è®¾ç½®é»˜è®¤ä¸Šä¸‹æ–‡
export KUBECONFIG=jane.kubeconfigkubectl config get-contextskubectl config use-context jane@kubernetes

2ã€æµ‹è¯•æ‰§è¡Œå‘½ä»¤
kubectl get pods
å¦‚æœæ²¡æœ‰é…ç½®æƒé™ï¼Œä¼šè¾“å‡ºï¼š
Error from server (Forbidden): pods is forbidden: User &quot;jane&quot; cannot list resource &quot;pods&quot; in API group &quot;&quot; in the namespace &quot;default&quot;
å¦‚æœé…ç½®å¥½äº†æƒé™ï¼Œä¼šè¾“å‡ºpodç›¸å…³ä¿¡æ¯ã€‚
ä½†æ˜¯ï¼Œä»¥ä¸Šæƒé™æµ‹è¯•åªæ˜¯åœ¨minikubeæˆ–è€…katacodaå¹³å°ç”Ÿæ•ˆã€‚å¦‚æœä½¿ç”¨kodekloudæˆ–è€…é˜¿é‡Œäº‘k8sé›†ç¾¤ï¼Œä¼šæŠ¥é”™ï¼š
error: You must be logged in to the server (Unauthorized)
ç ”ç©¶äº†å››ä¸ªå¤šå°æ—¶ï¼Œæ‰å‘ç°æ˜¯å¹³å°çš„é—®é¢˜ï¼Œæœæ°”äº†ã€‚ã€‚ã€‚
åè®°ä¸Šæ–‡ä¸­æè¿°äº†useraccountçš„æˆæƒï¼Œä½†æ˜¯æ²¡æœ‰æåˆ°serviceaccountçš„æˆæƒã€‚
å…¶å®å¯¹äºserviceaccountçš„æˆæƒï¼Œéå¸¸ç®€å•ã€‚åˆ›å»ºrole/clusterroleï¼Œsaç»‘å®šrole/clusterroleå³å¯ã€‚ä¾‹å¦‚ï¼šdefault namespaceä¸‹çš„saè´¦æˆ·janeï¼Œæˆæƒapp namespaceä¸‹çš„podåˆ›å»ºæƒé™ã€‚
kubectl create role developer --resource=pods --verb=list,create -n appkubectl create rolebinding dev-user-binding --role=developer --serviceaccount=default:jane -n app



]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>K8Sä¸­åˆ›å»ºç”¨æˆ·è´¦æˆ·å’ŒæœåŠ¡è´¦æˆ·</title>
    <url>/dev-k8s-useraccount-serviceaccount/</url>
    <content><![CDATA[K8Sä¸­çš„è´¦æˆ·ç®€ä»‹k8sä¸­çš„è´¦æˆ·åˆ†ä¸ºuseraccountå’Œserviceaccountï¼Œä¸»è¦å·®å¼‚æœ‰å››ç‚¹ï¼š

useraccountæ˜¯ç»™äººä½¿ç”¨çš„ï¼Œserviceaccountæ˜¯ç»™podä¸­è¿›ç¨‹è°ƒç”¨APIServerä½¿ç”¨çš„
useraccountæ˜¯è·¨namespaceçš„ï¼Œserviceaccountæ˜¯å±€é™åœ¨å®ƒæ‰€åœ¨çš„namespaceçš„
useraccountä¸èƒ½é€šè¿‡k8s apiæ·»åŠ ï¼Œä½†æ˜¯èƒ½å¤Ÿé€šè¿‡è¯ä¹¦ç­¾åæ–¹å¼è¿›è¡Œè®¤è¯ï¼›serviceaccountå¯ä»¥é€šè¿‡k8s apiæ·»åŠ 
æ¯ä¸ªnamespaceéƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„serviceaccountï¼Œå«åšdefault

æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦ç ”ç©¶æ€æ ·ä¸ºK8Såˆ›å»ºç”¨æˆ·è´¦æˆ·å’Œæ€æ ·åˆ›å»ºæœåŠ¡è´¦æˆ·ã€‚


åˆ›å»ºç”¨æˆ·è´¦æˆ·éœ€æ±‚ï¼šåˆ›å»ºä¸€ä¸ªåä¸ºjaneçš„ç”¨æˆ·è´¦æˆ·ã€‚
åˆ›å»ºç”¨æˆ·å¯†é’¥å¯¹openssl genrsa -out jane.key 2048openssl req -new -key jane.key -subj  &quot;/CN=jane&quot; -out jane.csr
å…¶ä¸­ï¼Œkeyæ–‡ä»¶æ˜¯ç§é’¥ï¼›csræ–‡ä»¶æ˜¯è¯ä¹¦ç­¾åç”³è¯·ï¼ˆCertificate Signing Requestï¼‰ï¼Œé‡Œé¢åŒ…å«è¯ä¹¦çš„å…¬é’¥å’Œå…¶ä»–ä¿¡æ¯ã€‚
ä½¿ç”¨CAç­¾åå‡è®¾å¯ä»¥ç™»å½•è¿è¡Œkube-controller-managerçš„masterèŠ‚ç‚¹ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥åœ¨è¯¥èŠ‚ç‚¹è¿›è¡ŒCAç­¾åã€‚
1ã€æŸ¥çœ‹ç­¾åç”¨çš„CAè·¯å¾„
cat /etc/kubernetes/manifests/kube-controller-manager.yaml | grep ca.crtcat /etc/kubernetes/manifests/kube-controller-manager.yaml | grep ca.key

æŸ¥åˆ°çš„è·¯å¾„ä¸º/etc/kubernetes/pki/ca.crt å’Œ /etc/kubernetes/pki/ca.key
2ã€ä½¿ç”¨CAç­¾å
openssl x509 -req -in /root/jane.csr -CA /etc/kubernetes/pki/ca.crt -CAkey /etc/kubernetes/pki/ca.key -CAcreateserial -out /root/jane.crt
å…¶ä¸­ï¼Œcrtæ–‡ä»¶æ˜¯ç­¾ååçš„è¯ä¹¦ã€‚
ä»¥ä¸Šï¼Œæœ‰äº†crtå’Œkeyï¼Œè¿™ä¿©åŠ èµ·æ¥å°±æ˜¯janeç”¨æˆ·è´¦æˆ·ã€‚ä¸€èˆ¬çš„ç”¨æˆ·è´¦æˆ·æ˜¯ç”¨æˆ·åå’Œå¯†ç ï¼ŒK8Sçš„ç”¨æˆ·è´¦æˆ·å°±æ˜¯ç­¾åè¯ä¹¦å’Œç§é’¥ã€‚
ä½¿ç”¨APIç­¾åå¦‚æœæ— æ³•ç›´æ¥ä½¿ç”¨CAè¯ä¹¦è¿›è¡Œç­¾åï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡APIServerçš„æ–¹å¼è¿›è¡Œç­¾åã€‚
1ã€æŸ¥çœ‹è¯ä¹¦ç­¾åç”³è¯·ï¼Œbase64åŠ å¯†
cat jane.csr | base64 | tr -d &#x27;\n&#x27;

2ã€åˆ›å»ºjane-csr.yamlæ–‡ä»¶ï¼ŒæŠŠè¯ä¹¦ç­¾åç”³è¯·çš„å†…å®¹ç²˜è´´åˆ°spec.requestéƒ¨åˆ†
apiVersion: certificates.k8s.io/v1beta1kind: CertificateSigningRequestmetadata:  name: janespec:  groups:  - system:authenticated  usages:  - digital signature  - key encipherment  - server auth  - client auth  request: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURSBSRVFVRVNULS0tLS0KTUlJQ1ZEQ0NBVHdDQVFBd0R6RU5NQXNHQTFVRUF3d0VhbUZ1WlRDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRApnZ0VQQURDQ0FRb0NnZ0VCQUtxbWFIa3BJeE94dDN2UmxJT1FnSUFxSUFsekhQcTRRVTBDTDVhS04xbmY4NXRzCi9LU3o0eml1a1hEQ1NOSVNIT1pWbTY5NzVJa3RXcGFySmhaTXptc1B2eUFSeXFWbWY2L1h0bmwyeE0xblhaUzAKZGc0b0E1dXFuR0w2dHpaQzF3VFY4RVFIZnRlcWYzbUpTN2JtdlppaXFlak12a2UzVkk5RTNFK0xsUUttNnVXRwprS2RDZ2ZHNUszRGJFczR1VzR6M0lMdTdEa1BlamJodWFtYzlxYVZNRVpLSGZ0bnlBYlFITkZVLzhvWVYvR1VzCnRFVWZMRXBBTmlqUFc5U0pPWHJtNUg1NXhOdExXVHMwenU3YlRSZWE0ZjFVaDFCbkZuUkhWYUJqNysydHpITTgKaklJS01KakdWOS9rUVltRmo3UTJZUW1wYzdXWGpPZEFWcHBSc1kwQ0F3RUFBYUFBTUEwR0NTcUdTSWIzRFFFQgpDd1VBQTRJQkFRQUZ2ZUxrUmYxd0xDQmN6cWdMVkJIUGZBa0MzeU1CTDA3VXl0QUlCcVhkR3h1QWtyL3NQT1dkClNxTkhIRkNzQVNmU0lNVC96djBrQS9yN3Fnd25BMCtZREZJSjNzUlBKZkJmNm1Ic3FrbjlPd1htR1E3d0orNFQKWXVCc1lJSllnNWtzVWJoQVhiQkVZekk2OUY0Uk52U0d0K1ZLOHBBdUQzcXRvejJsd3liV0cvaUo4V3FESTZNegpuMURBeDBkRDZmRWhIKy9DTWdSREY5OExCL1ZqMWZOUUlqZ2k3Rmc1aTByU1NtZUdUMllOblJldERZYWN4aWlzCjNFN1B4STdYWDd2QjRjY3pITlUrTG92N3JnSkVXM3lRMXZRTXRCNTZlbWJaNGVnL01XZEhkeWliVXo2aDQ1ZW8KUGN5b3QxaW1wdFRyK3kwSkt0SmJ1YllQOGd2RG5FeFYKLS0tLS1FTkQgQ0VSVElGSUNBVEUgUkVRVUVTVC0tLS0tCg==

3ã€ç­¾åè¯·æ±‚å¹¶é€šè¿‡
kubectl apply -f jane-csr.yamlkubectl get csr kubectl certificate approve jane

4ã€å¯¼å‡ºç­¾åè¯ä¹¦
kubectl get csr jane -o yamlkubectl get csr jane -o jsonpath=&#x27;&#123;.status.certificate&#125;&#x27; | base64 --decode &gt; jane.crt

ä»¥ä¸Šï¼Œæœ‰äº†crtå’Œkeyï¼Œè¿™ä¿©åŠ èµ·æ¥å°±æ˜¯janeç”¨æˆ·è´¦æˆ·ã€‚
æ›´å¤šå†…å®¹å‚è€ƒManage TLS Certificates in a Clusterã€‚
è¯ä¹¦æ ¼å¼è½¬æ¢X.509æ˜¯ä¸€ç§è¯ä¹¦æ ‡å‡†ï¼Œå®šä¹‰äº†è¯ä¹¦ä¸­åº”è¯¥åŒ…å«å“ªäº›å†…å®¹ï¼Œè¯¦æƒ…å‚è€ƒRFC5280ï¼ŒSSLä½¿ç”¨çš„å°±æ˜¯è¿™ç§è¯ä¹¦æ ‡å‡†ã€‚åŒæ ·çš„X.509è¯ä¹¦ï¼Œå¯èƒ½æœ‰ä¸åŒçš„ç¼–ç æ ¼å¼ï¼Œç›®å‰æœ‰ä»¥ä¸‹ä¸¤ç§ç¼–ç æ ¼å¼ã€‚PEMï¼šPrivacy Enhanced Mailï¼ŒBASE64ç¼–ç ï¼Œä»¥â€â€”â€“BEGINâ€”â€“â€å¼€å¤´ï¼Œâ€â€”â€“ENDâ€”â€“â€ç»“å°¾ã€‚æŸ¥çœ‹PEMæ ¼å¼è¯ä¹¦çš„ä¿¡æ¯ï¼š
openssl x509 -in cert.pem -text -noout

DERï¼šDistinguished Encoding Rulesï¼ŒäºŒè¿›åˆ¶æ ¼å¼ï¼Œä¸å¯è¯»ã€‚æŸ¥çœ‹DERæ ¼å¼è¯ä¹¦çš„ä¿¡æ¯ï¼š
openssl x509 -in cert.der -inform der -text -noout

é—®é¢˜æ¥äº†ï¼Œk8sä¸­çš„è¯ä¹¦ï¼Œé™¤äº†ä½¿ç”¨pemæ ¼å¼ï¼Œè¿˜æœ‰å°±æ˜¯crtæ ¼å¼ï¼Œå¹¶æ²¡æœ‰deræ ¼å¼å•Šï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œcrtåªæ˜¯ä¸€ä¸ªæ–‡ä»¶åç¼€ï¼Œç¼–ç æ ¼å¼å¯èƒ½æ˜¯pemä¹Ÿå¯èƒ½æ˜¯derã€‚
é‚£ä¹ˆï¼Œpemå’Œderæ€æ ·äº’ç›¸è½¬æ¢å‘¢ï¼Ÿ
# pem to deropenssl x509 -in cert.crt -outform der -out cert.der# der to pemopenssl x509 -in cert.crt -inform der -outform pem -out cert.pem

åˆ›å»ºæœåŠ¡è´¦æˆ·kubectl create serviceaccount jane

æ³¨æ„ï¼šv1.22 ä¹‹å‰çš„ Kubernetes ç‰ˆæœ¬ä¼šè‡ªåŠ¨åˆ›å»ºå‡­æ®è®¿é—® Kubernetes APIã€‚ è¿™ç§æ›´è€çš„æœºåˆ¶åŸºäºå…ˆåˆ›å»ºä»¤ç‰Œ Secretï¼Œç„¶åå°†å…¶æŒ‚è½½åˆ°æ­£è¿è¡Œçš„ Pod ä¸­ã€‚åœ¨åŒ…æ‹¬ Kubernetes v1.27 åœ¨å†…æœ€è¿‘çš„å‡ ä¸ªç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨ TokenRequest API ç›´æ¥è·å¾— API å‡­æ®ï¼Œ å¹¶ä½¿ç”¨æŠ•å°„å·æŒ‚è½½åˆ° Pod ä¸­ã€‚ä½¿ç”¨è¿™ç§æ–¹æ³•è·å¾—çš„ä»¤ç‰Œå…·æœ‰ç»‘å®šçš„ç”Ÿå‘½å‘¨æœŸï¼Œ å½“æŒ‚è½½çš„ Pod è¢«åˆ é™¤æ—¶è¿™äº›ä»¤ç‰Œå°†è‡ªåŠ¨å¤±æ•ˆã€‚ä½ ä»ç„¶å¯ä»¥æ‰‹åŠ¨åˆ›å»º Secret æ¥ä¿å­˜æœåŠ¡è´¦å·ä»¤ç‰Œï¼›ä¾‹å¦‚åœ¨ä½ éœ€è¦ä¸€ä¸ªæ°¸ä¸è¿‡æœŸçš„ä»¤ç‰Œçš„æ—¶å€™ã€‚ä¸€æ—¦ä½ æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ª Secret å¹¶å°†å…¶å…³è”åˆ° ServiceAccountï¼Œ Kubernetes æ§åˆ¶å¹³é¢å°±ä¼šè‡ªåŠ¨å°†ä»¤ç‰Œå¡«å……åˆ°è¯¥ Secret ä¸­ã€‚
ç®€å•æ¥è¯´ï¼Œæ–°ç‰ˆæœ¬çš„K8Såˆ›å»ºsaæ—¶ï¼Œå·²ç»ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆadmin-user-token-xxxè¿™ç§secretï¼Œä¹Ÿå°±ä¸åŒä»è¿™ç§secretä¸­è·å–tokenã€‚
è¯¦æƒ…å‚è€ƒæ–‡æ¡£æ‰‹åŠ¨ç®¡ç† ServiceAccount çš„ Secret
æ‰‹åŠ¨åˆ›å»ºAPIä»¤ç‰Œçš„æ–¹æ³•ï¼š
kubectl create token jane --duration=8760h
è¯¥ä»¤ç‰Œåªä¼šæ˜¾ç¤ºä¸€æ¬¡ï¼Œè¯·ä¿å­˜å¥½å®ƒã€‚
åˆ›å»ºé•¿æœŸæœ‰æ•ˆAPIä»¤ç‰Œçš„æ–¹æ³•ï¼š
kubectl apply -f - &lt;&lt;EOFapiVersion: v1kind: Secretmetadata:  name: jane-secret  annotations:    kubernetes.io/service-account.name: janetype: kubernetes.io/service-account-tokenEOFkubectl describe secrets/jane-secret # æŸ¥çœ‹tokenéƒ¨åˆ†

æˆæƒåˆ›å»ºå®Œç”¨æˆ·è´¦æˆ·å’ŒæœåŠ¡è´¦æˆ·ï¼Œåªæ˜¯æœ‰äº†è´¦æˆ·ï¼Œå¹¶æ²¡æœ‰K8Sé›†ç¾¤çš„æƒé™ã€‚è´¦æˆ·æˆæƒæ–¹æ³•å‚è€ƒæ–‡æ¡£ã€ŠK8Sä¸­çš„RBACé‰´æƒã€‹ã€‚
K8Sä¸­çš„æ•°å­—è¯ä¹¦æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„ç”¨æˆ·è´¦æˆ·æ‹¥æœ‰è‡ªå·±çš„æ•°å­—è¯ä¹¦ï¼Œé™¤æ­¤ä¹‹å¤–ï¼ŒK8Sçš„å„ä¸ªç»„ä»¶ä¹Ÿæ‹¥æœ‰è‡ªå·±çš„æ•°å­—è¯ä¹¦ï¼Œç”¨äºç»„ä»¶ä¹‹é—´çš„å®‰å…¨è®¿é—®ã€‚
HTTPS(SSL/TLS)åŠ å¯†åŸç†ï¼Œå‚è€ƒæ–‡æ¡£ã€Šæµ…è°ˆæ•°æ®åŠ å¯†ã€‹ã€‚
æŸ¥çœ‹è¯ä¹¦1ã€æŸ¥çœ‹è¯ä¹¦ä½ç½®
ps aux | grep kubelet# find config filecat /var/lib/kubelet/config.yaml | grep staticPodPathcd /etc/kubernetes/manifestscat kube-apiserver.yaml

2ã€æŸ¥çœ‹è¯ä¹¦è¯¦æƒ…
openssl x509 -in /etc/kubernetes/pki/apiserver.crt -text

ç­¾åç­¾åï¼Œæˆ–è€…ç­¾åè¿‡æœŸåé‡æ–°ç­¾å
openssl x509 -req -in /etc/kubernetes/pki/apiserver-etcd-client.csr -CA /etc/kubernetes/pki/etcd/ca.crt -CAkey /etc/kubernetes/pki/etcd/ca.key -CAcreateserial -out /etc/kubernetes/pki/apiserver-etcd-client.crt






]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
      </tags>
  </entry>
  <entry>
    <title>K8Sé›†ç¾¤ä¸­etcdå¤‡ä»½å’Œæ¢å¤</title>
    <url>/dev-k8s-etcd-backup-restore/</url>
    <content><![CDATA[å‰è¨€å°±åƒå¤‡ä»½æ•°æ®åº“ä¸€æ ·ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿæƒ³å¯¹k8sèµ„æºé…ç½®è¿›è¡Œå¤‡ä»½ã€‚
kubectl get all --all-namespaces -o yaml &gt; all-deploy-services.yaml
ä¸Šé¢çš„æ–¹æ³•ï¼Œå¯ä»¥å®ç°å¯¹k8sèµ„æºé…ç½®çš„å¤‡ä»½ã€‚ä½†æ˜¯æ›´å¥½çš„åŠæ³•ï¼Œæ˜¯å¯¹etcdè¿›è¡Œå¤‡ä»½ã€‚æœ¬æ–‡å°±å­¦ä¹ ä¸€ä¸‹k8sä¸­etcdçš„å¤‡ä»½å’Œæ¢å¤æ–¹æ³•ã€‚


å®‰è£…etcdctl1ã€æŸ¥çœ‹etcdç‰ˆæœ¬
kubectl get pod/etcd-$nodename -n kube-system -oyaml | grep image# orcat /etc/kubernetes/manifests/etcd.yaml | grep image

2ã€ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„etcdctlï¼ˆè¿™é‡Œä»¥3.4.13ä¸ºä¾‹ï¼‰
wget https://github.com/etcd-io/etcd/releases/download/v3.4.13/etcd-v3.4.13-linux-amd64.tar.gztar -xzvf etcd-v3.4.13-linux-amd64.tar.gzcp etcd-v3.4.13-linux-amd64/etcdctl /usr/local/bin/ln -s /usr/local/bin/etcdctl /usr/bin/etcdctl

3ã€æµ‹è¯•
etcdctl version

etcdé›†ç¾¤çŠ¶æ€HOST_1=10.240.0.17HOST_2=10.240.0.18HOST_3=10.240.0.19ENDPOINTS=$HOST_1:2379,$HOST_2:2379,$HOST_3:2379etcdctl --endpoints=$ENDPOINTS member listetcdctl --write-out=table --endpoints=$ENDPOINTS endpoint statusetcdctl --endpoints=$ENDPOINTS endpoint health

å¤‡ä»½1ã€æŸ¥çœ‹é…ç½®
kubectl describe pod etcd-master -n kube-system | grep Command -i -A 20# orcat /etc/kubernetes/manifests/etcd.yaml | grep Command -i -A 20

çœ‹åˆ°Commandå­—æ®µä¸ºï¼š
Command:  etcd  --advertise-client-urls=https://172.17.0.10:2379  --cert-file=/etc/kubernetes/pki/etcd/server.crt  --client-cert-auth=true  --data-dir=/var/lib/etcd  --initial-advertise-peer-urls=https://172.17.0.10:2380  --initial-cluster=master=https://172.17.0.10:2380  --key-file=/etc/kubernetes/pki/etcd/server.key  --listen-client-urls=https://127.0.0.1:2379,https://172.17.0.10:2379  --listen-metrics-urls=http://127.0.0.1:2381  --listen-peer-urls=https://172.17.0.10:2380  --name=master  --peer-cert-file=/etc/kubernetes/pki/etcd/peer.crt  --peer-client-cert-auth=true  --peer-key-file=/etc/kubernetes/pki/etcd/peer.key  --peer-trusted-ca-file=/etc/kubernetes/pki/etcd/ca.crt  --snapshot-count=10000  --trusted-ca-file=/etc/kubernetes/pki/etcd/ca.crt

2ã€æ‰§è¡Œå¤‡ä»½
ETCDCTL_API=3 etcdctl \--endpoints=https://[127.0.0.1]:2379 \--cacert=/etc/kubernetes/pki/etcd/ca.crt \--cert=/etc/kubernetes/pki/etcd/server.crt \--key=/etc/kubernetes/pki/etcd/server.key \snapshot save /tmp/snapshot-pre-boot.db

3ã€æŸ¥çœ‹å¤‡ä»½
ETCDCTL_API=3 etcdctl \--endpoints=https://[127.0.0.1]:2379 \--cacert=/etc/kubernetes/pki/etcd/ca.crt \--cert=/etc/kubernetes/pki/etcd/server.crt \--key=/etc/kubernetes/pki/etcd/server.key \snapshot status /tmp/snapshot-pre-boot.db -w table

æ¢å¤1ã€æ¢å¤etcdæ•°æ®
ETCDCTL_API=3 etcdctl \--endpoints=https://[127.0.0.1]:2379 \--cacert=/etc/kubernetes/pki/etcd/ca.crt \--cert=/etc/kubernetes/pki/etcd/server.crt \--key=/etc/kubernetes/pki/etcd/server.key \--initial-cluster=master=https://127.0.0.1:2380 \--initial-cluster-token etcd-cluster-1 \--initial-advertise-peer-urls=https://127.0.0.1:2380 \--name=master \--data-dir /var/lib/etcd-from-backup \snapshot restore /tmp/snapshot-pre-boot.db

2ã€ä¿®æ”¹etcd.yaml
vim /etc/kubernetes/manifests/etcd.yaml

å¦‚ä¸‹ä¿®æ”¹ï¼š
# Update --data-dir to use new target location--data-dir=/var/lib/etcd-from-backup# Update new initial-cluster-token to specify new cluster--initial-cluster-token=etcd-cluster-1# Update volumes and volume mounts to point to new path    volumeMounts:    - mountPath: /var/lib/etcd-from-backup      name: etcd-data    - mountPath: /etc/kubernetes/pki/etcd      name: etcd-certs  hostNetwork: true  priorityClassName: system-cluster-critical  volumes:  - hostPath:      path: /var/lib/etcd-from-backup      type: DirectoryOrCreate    name: etcd-data  - hostPath:      path: /etc/kubernetes/pki/etcd      type: DirectoryOrCreate    name: etcd-certs

]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>database</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>æ•°æ®åº“</tag>
        <tag>etcd</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨kubeadmå‡çº§K8Sé›†ç¾¤</title>
    <url>/dev-kubeadm-upgrade/</url>
    <content><![CDATA[K8Sç»„ä»¶ç‰ˆæœ¬è¯´æ˜k8sé›†ç¾¤ä¸­çš„å¸¸è§ç»„ä»¶åŒ…æ‹¬ï¼šAç±»ï¼škube-apiserverBç±»ï¼šcontroller-managerã€kube-schedulerCç±»ï¼škubeletã€kube-proxyDç±»ï¼šetcd clusterã€CoreDNSEç±»ï¼škubectl
ç»„ä»¶çš„ç‰ˆæœ¬å·ä¸€èˆ¬è¡¨ç¤ºä¸º major.minor.patchï¼Œæ¯”å¦‚v1.10.3ã€‚å…¶ä¸­ï¼ŒAç±»ç»„ä»¶æ˜¯ä¸»è¦ç»„ä»¶ï¼Œä»¥å®ƒä¸ºç‰ˆæœ¬åŸºå‡†ã€‚æ¯”å¦‚ï¼ŒAç±»ç»„ä»¶ç‰ˆæœ¬çš„minorå·ä¸ºxï¼Œé‚£ä¹ˆBç±»ç»„ä»¶ç‰ˆæœ¬å¿…é¡»ä¸ºxæˆ–è€…x-1ï¼ŒCç±»ç»„ä»¶ç‰ˆæœ¬å¿…é¡»ä¸ºxã€x-1æˆ–è€…x-2ï¼ŒEç±»ç»„ä»¶ç‰ˆæœ¬å¿…é¡»ä¸ºxã€x-1æˆ–è€…x+1ã€‚è€ŒDç±»ç»„ä»¶ï¼Œå’ŒAç±»ç»„ä»¶ä¸æ˜¯åŒä¸€ç‰ˆæœ¬ä½“ç³»ï¼Œç‰ˆæœ¬å…¼å®¹æƒ…å†µéœ€è¦æŸ¥çœ‹æ–‡æ¡£ã€‚æ•´ç†æˆè¡¨æ ¼å¦‚ä¸‹ï¼š



ç»„ä»¶ç±»åˆ«
minorç‰ˆæœ¬
ç»„ä»¶



Aç±»
x
kube-apiserver


Bç±»
xã€x-1
controller-managerã€kube-scheduler


Cç±»
xã€x-1ã€x-2
kubeletã€kube-proxy


Eç±»
xã€x-1ã€x+1
kubectl


Dç±»
æŸ¥çœ‹æ–‡æ¡£
etcd clusterã€CoreDNS


æœ¬æ–‡å­¦ä¹ ä½¿ç”¨kubeadmè¿›è¡Œk8sé›†ç¾¤çš„å‡çº§ï¼Œå‚è€ƒå‡çº§ kubeadm é›†ç¾¤ã€‚


å‡çº§é¡ºåºæ¨èçš„å‡çº§æ–¹æ³•ï¼Œæ˜¯æ ¹æ®minorç‰ˆæœ¬å·é€çº§è¿›è¡Œå‡çº§ã€‚æ¯”å¦‚v1.10.0æƒ³è¦å‡çº§åˆ°v1.13.0ï¼Œä¸åº”è¯¥ç›´æ¥å‡çº§åˆ°v1.13.0ï¼Œè€Œæ˜¯åº”è¯¥v1.10.0-&gt;v1.11.0-&gt;v1.12.0-&gt;v1.13.0ã€‚
å‡çº§é¡ºåºä¸€èˆ¬ä¸ºï¼š1ã€å‡çº§kubeadm2ã€å‡çº§master node3ã€å‡çº§worker node4ã€å‡çº§kubelet
å‡çº§æ“ä½œä»¥v1.11.0å‡çº§v1.12.0ä¸ºä¾‹ã€‚
masterèŠ‚ç‚¹1ã€æŸ¥çœ‹å‡çº§å¸®åŠ©kubeadm upgrade plan
2ã€å‡çº§kubeadm
apt-get upgrade -y kubeadm=1.12.0-00# orapt install kubeadm=1.12.0-00

3ã€å‡çº§k8sçš„ABç±»ç»„ä»¶
kubeadm upgrade apply v1.12.0
æ­¤æ—¶ä½¿ç”¨kubectl get nodesï¼Œçœ‹åˆ°çš„versionä¾ç„¶æ˜¯v1.11.0ï¼Œå› ä¸ºè¿™é‡Œæ˜¾ç¤ºçš„æ˜¯kubeletçš„ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯kube-apiserverçš„ç‰ˆæœ¬ã€‚
4ã€å‡çº§masterèŠ‚ç‚¹çš„kubelet
apt install kubelet=1.12.0-00systemctl restart kubelet

workerèŠ‚ç‚¹1ã€é©±é€workerèŠ‚ç‚¹çš„podsï¼Œå°é”èŠ‚ç‚¹
kubectl drain node-1kubectl cordon node-1

2ã€å‡çº§kubeadmå’Œkubectl
apt-get install kubeadm=1.12.0-00apt-get install kubelet=1.12.0-00kubeadm upgrade node config --kubelet-version v1.12.0systemctl restart kubelet

3ã€è§£é™¤èŠ‚ç‚¹å°é”kubectl uncordon node-1
]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Dockerå®‰è£…é…ç½®GateOne</title>
    <url>/dev-docker-gateone/</url>
    <content><![CDATA[GateOneç®€ä»‹
Gate One is a web-based Terminal Emulator and SSH client that brings the power of the command line to the web. It requires no browser plugins and is built on top of a powerful plugin system that allows every aspect of its appearance and functionality to be customized.

æœ¬æ–‡ä½¿ç”¨Dockerå®‰è£…é…ç½®GateOneï¼Œæ­å»ºä¸€ä¸ªWeb Shellç¯å¢ƒã€‚å‰ç½®æ¡ä»¶æ˜¯å®‰è£…é…ç½®å¥½äº†dockerç¯å¢ƒï¼Œå®‰è£…æ–¹æ³•å‚è€ƒã€ŠDockerå…¥é—¨ã€‹ã€‚å·²çŸ¥dockerå®¿ä¸»æœºIPä¸º192.168.56.130ã€‚


å®‰è£…GateOne1ã€ç™»å½•dockerhubæŸ¥çœ‹éœ€è¦çš„liftoff/gateoneç‰ˆæœ¬ï¼Œå®é™…ä¸Šåªæœ‰ä¸€ä¸ªç‰ˆæœ¬ã€‚
2ã€ä¸‹è½½gateoneé•œåƒdocker pull liftoff/gateone
3ã€å¯åŠ¨gateoneæœåŠ¡
docker run --name=vk-gateone -d \-p 8000:8000 \liftoff/gateone gateone

ä»¥ä¸Šå‘½ä»¤ï¼šå‘½åå®¹å™¨ä¸ºvk-gateoneï¼Œåå°è¿è¡Œï¼›æ˜ å°„å®¿ä¸»æœº8000ç«¯å£åˆ°å®¹å™¨8000ç«¯å£ã€‚
æ›´å¤šå‘½ä»¤å‚è€ƒUsing this Imageã€‚
4ã€éªŒè¯å®‰è£…docker psgateoneå¯åŠ¨æ­£å¸¸çš„è¯å°±å¯ä»¥çœ‹åˆ°vk-gateoneå®¹å™¨ã€‚å¦‚æœå¯åŠ¨å¤±è´¥ï¼Œå¯ä»¥ä½¿ç”¨docker logs vk-gateoneæŸ¥çœ‹å¤±è´¥åŸå› å¹¶è¿›è¡Œè§£å†³ã€‚
ä½¿ç”¨ncå‘½ä»¤éªŒè¯ï¼š
yum install ncnc -v localhost 8000

æµè§ˆå™¨è®¿é—®ï¼š https://192.168.56.130:8000
5ã€ä½¿ç”¨ç‚¹å‡» Terminal:SSH ï¼Œè¾“å…¥ä¸»æœºIPã€ç«¯å£å·ã€ç”¨æˆ·åå’Œå¯†ç ï¼Œå³å¯ç™»å½•ä¸»æœºã€‚
å¦‚æœæƒ³è¦æ·»åŠ é‰´æƒéªŒè¯ï¼Œå‚è€ƒarchlinux-Gateoneå’ŒAPI Authenticationã€‚
å¼€æ”¾ç«¯å£å¦‚æœæµè§ˆå™¨æ— æ³•è®¿é—®8000ç«¯å£ï¼Œé‚£ä¹ˆéœ€è¦å¯¹é˜²ç«å¢™è¿›è¡Œè®¾ç½®ã€‚
firewall-cmd --add-port=8000/tcp --permanentsystemctl reload firewalld# æˆ–è€…systemctl stop firewalld

å®‰è£…openssh-server1ã€è¿›å…¥vk-gateonedocker exec -it vk-gateone /bin/bash
2ã€å®‰è£…openssh-server
apt updateapt install openssh-server

3ã€vim /etc/ssh/sshd_configï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
PasswordAuthentication yes

4ã€é‡å¯sshservice ssh restart
5ã€æ·»åŠ ç”¨æˆ·
useradd -m voidking -s /bin/bashpasswd voidkingadduser voidking sudo# å®‰è£…sudoå‘½ä»¤ï¼ˆè¯¥å®¹å™¨å†…æ²¡æœ‰sudoï¼‰apt install sudo

6ã€ç™»å½•vk-gateoneå®¹å™¨ç‚¹å‡» Terminal:SSH ï¼Œä¸»æœºåå’Œç«¯å£ä½¿ç”¨é»˜è®¤ï¼Œè¾“å…¥ç”¨æˆ·åvoidkingå’Œå¯†ç ï¼Œå³å¯ç™»å½•vk-gateoneã€‚
å°æŠ€å·§åœ¨gateone shellé‡Œï¼Œå¯ä»¥ä½¿ç”¨ ctrl+insert è¿›è¡Œå¤åˆ¶ï¼Œä½¿ç”¨ shift+insert è¿›è¡Œç²˜è´´ã€‚å¦‚æœåœ¨ç•Œé¢æ— æ³•ä½¿ç”¨é¼ æ ‡å…‰æ ‡é€‰ä¸­ä¸€äº›åŒºåŸŸï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ä»»æ„ä½ç½®è¿›è¡ŒåŒå‡»ï¼Œå³å¯æ¿€æ´»å…‰æ ‡é€‰æ‹©ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>ssh</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>K8Sä¸­å®‰è£…ä½¿ç”¨Ingress</title>
    <url>/dev-k8s-ingress/</url>
    <content><![CDATA[Ingressç®€ä»‹ingressæ˜¯k8sä¸­çš„ä¸€ä¸ªä¸ƒå±‚çš„è´Ÿè½½å‡è¡¡ï¼Œå¯ä»¥æŠŠæµé‡è·¯ç”±åˆ°serviceã€‚å¦‚æœæ²¡æœ‰ingressï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¤–éƒ¨çš„nginxã€haproxyç­‰ä¹Ÿå¯ä»¥å®ç°ä¸ƒå±‚è´Ÿè½½å‡è¡¡ï¼Œä½†æ˜¯é…ç½®nginxæ¯”è¾ƒéº»çƒ¦ï¼Œå› ä¸ºæƒ³è¦é…ç½®nginxçš„upstreamå¿…é¡»å…ˆæŸ¥è¯¢serviceçš„ipï¼Œé‚£å¦‚æœä½¿ç”¨serviceçš„nameï¼Œè¿˜è¦ç»´æŠ¤ä¸€ä¸ªdnsï¼›å¦‚æœæƒ³è¦æ¢æˆhaproxyï¼Œæˆæœ¬ä¹Ÿæ¯”è¾ƒé«˜ã€‚è€Œæœ‰äº†ingressï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠnginxç­‰ä¸ƒå±‚è´Ÿè½½å‡è¡¡é›†æˆåˆ°äº†k8sä¸­ï¼Œé…ç½®å°±æ›´åŠ ç®€å•ä¹Ÿæ›´åŠ é€šç”¨ã€‚
å®ƒçš„å·¥ä½œåŸç†æ˜¯ingressæœåŠ¡ä½œä¸ºæµé‡çš„å…¥å£ï¼Œæ”¶åˆ°è¯·æ±‚åï¼Œæ ¹æ®hostã€pathç­‰è§„åˆ™ï¼ŒåŒ¹é…åˆ°å¯¹åº”çš„serviceå’Œç«¯å£ï¼Œç„¶åæŠŠæµé‡è½¬å‘åˆ°serviceçš„ç«¯å£ï¼Œserviceå†è½¬å‘æµé‡ç»™podã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Ingress
Ingress Controllers



å®‰è£…Ingress Controlleræœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨helmåœ¨K8Sé›†ç¾¤ä¸­å®‰è£…Ingress NGINX Controllerã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Set up Ingress on Minikube with the NGINX Ingress Controller
Ingress NGINX Controller
Ingress NGINX Controller - Installation Guide
ä½¿ç”¨Helmå®‰è£…Ingress-nginx

å®˜æ–¹æ¨èä¸€é”®å®‰è£…ï¼š
helm upgrade --install ingress-nginx ingress-nginx \  --repo https://kubernetes.github.io/ingress-nginx \  --namespace ingress-nginx --create-namespace

å› ä¸ºéƒåŒå­¦å–œæ¬¢å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼Œå¹¶ä¸”å¯¹é…ç½®åšä¸€äº›äº†è§£ï¼Œå› æ­¤æœ¬èŠ‚ä½¿ç”¨ç¨å¾®éº»çƒ¦ä¸€ç‚¹çš„æ–¹å¼ã€‚
1ã€æ·»åŠ chartä»“åº“
helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginxhelm repo updatehelm repo list

2ã€å¯¼å‡ºé…ç½®ï¼Œchart4.1.4 å¯¹åº” app1.2.1
helm search repo ingress-nginx/ingress-nginx -lhelm show values ingress-nginx/ingress-nginx --version 4.1.4 &gt; values-4.1.4.yaml

3ã€ä¿®æ”¹é…ç½®values-4.1.4.yamlæŒ‰éœ€ä¿®æ”¹ï¼Œè¿™é‡Œä¸»è¦ä¿®æ”¹ä¸€ä¸‹é•œåƒï¼š 

controller.image.registry ï¼Œæ”¹ä¸ºregistry.cn-hangzhou.aliyuncs.com
controller.image.imageï¼Œæ”¹ä¸ºgoogle_containers/nginx-ingress-controller
controller.image.tagï¼Œä¿æŒä¸å˜v1.2.1
æ³¨é‡Šæ‰ controller.image.digest å’Œ controller.image.digestChroot

4ã€å®‰è£…ingress nginx controller
kubectl create ns ingress-nginxhelm install ingress-nginx ingress-nginx/ingress-nginx -f values-4.1.4.yaml -n ingress-nginx

5ã€æŸ¥çœ‹å®‰è£…
kubectl get all -n ingress-nginxkubectl get ingressclass

æ³¨æ„ï¼šæ–°ç‰ˆæœ¬çš„ingressï¼Œä¼šåˆ›å»ºingressclassï¼Œä½†æ˜¯ä¸€äº›æ—§ç‰ˆæœ¬çš„ingressï¼Œå¹¶æ²¡æœ‰ingressclassè¿™ç§èµ„æºã€‚åœ¨ Kubernetes 1.18 ä¹‹å‰ï¼Œé€šå¸¸æ˜¯åœ¨ Ingress èµ„æºä¸Šé€šè¿‡ kubernetes.io/ingress.class æ³¨è§£æ¥æŒ‡å®šä½¿ç”¨çš„ Ingress Controllerã€‚è™½ç„¶è¿™ä¸ªæ³¨è§£ä»æœªè¢«æ­£å¼å®šä¹‰è¿‡ï¼Œä½†å´æ˜¯è¢«å„ä¸ª Ingress Controller æ‰€å¹¿æ³›æ”¯æŒçš„ï¼Œæ³¨è§£çš„å€¼å¯ä»¥åœ¨Ingress Controllerå¯åŠ¨æ—¶æŒ‡å®šã€‚Kubernetes 1.18 èµ·æä¾›äº† IngressClass èµ„æºï¼ŒIngressClassæŒ‡å®šå…³è”spec.controllerï¼ŒIngressæŒ‡å®šå…³è”spec.ingressClassNameï¼Œå°±å®ç°äº†IngressæŒ‡å®šIngress Controllerã€‚è¯¦æƒ…å‚è€ƒæ–‡æ¡£K8s Ingressã€Ingress Controller å’Œ Ingress Class
KSä¸­çš„Ingress Controllerå¦‚æœk8sé›†ç¾¤ä¸­å®‰è£…äº†kubesphereï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥å¯ç”¨kubesphereçš„ç½‘å…³ï¼Œæœ¬è´¨ä¹Ÿæ˜¯ingress nginx controllerã€‚å¼€å¯åŠæ³•ï¼šadminç”¨æˆ·ç™»å½•æ§åˆ¶å°ï¼Œé›†ç¾¤è®¾ç½®ï¼Œç½‘å…³è®¾ç½®ï¼Œå¯ç”¨ç½‘å…³ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Guide to Kubernetes Ingress Controllers
Canary Release in Kubernetes with Nginx Ingress
é›†ç¾¤ç½‘å…³
é¡¹ç›®ç½‘å…³
åº”ç”¨è·¯ç”±

é…ç½®Ingresså‚è€ƒæ–‡æ¡£ï¼š

Ingress
Default IngressClass

Ingress Controlleré…ç½®å¯ä»¥è®¤ä¸ºIngress Controllerå°±æ˜¯ä¸€ä¸ªK8Så†…éƒ¨çš„Nginxã€‚æŸ¥çœ‹ Ingress Controller çš„ service é…ç½®ï¼Œæ‰¾åˆ°80å’Œ433ç«¯å£å¯¹åº”çš„NodePortï¼Œç”¨äºè®¿é—®Nginxã€‚å‡è®¾ä¸€ä¸ªèŠ‚ç‚¹IPä¸º192.168.56.102ï¼Œserviceçš„80ç«¯å£å¯¹åº”30490ï¼Œ443ç«¯å£å¯¹åº”30499ã€‚
åˆ›å»ºæµ‹è¯•æœåŠ¡1ã€åˆ›å»ºæµ‹è¯•æœåŠ¡ï¼ˆNginxï¼‰
kubectl create deployment test --image=nginx --dry-run=client -oyaml &gt; deployment.yamlkubectl create service clusterip test --tcp=80:80 --tcp=443:443 --dry-run=client -oyaml &gt; service.yamlkubectl apply -f deployment.yamlkubectl apply -f service.yaml

2ã€æŸ¥çœ‹æµ‹è¯•æœåŠ¡
kubectl get podskubectl get svc

åˆ›å»ºIngress1ã€å‡†å¤‡ minimal-ingress.yaml
apiVersion: networking.k8s.io/v1kind: Ingressmetadata:  name: minimal-ingress  annotations:    nginx.ingress.kubernetes.io/rewrite-target: /spec:  ingressClassName: nginx  rules:  - http:      paths:      - path: /testpath        pathType: Prefix        backend:          service:            name: test            port:              number: 80

å…¶ä¸­ï¼ŒingressClassNameå¯ä»¥çœç•¥ï¼Œçœç•¥åä¼šä½¿ç”¨é»˜è®¤çš„ingressClassã€‚å› ä¸ºé…ç½®äº†rewrite-targetï¼Œæ‰€ä»¥è¯·æ±‚åˆ°è¾¾serviceæ—¶ï¼Œ/testpathä¼šè¢«æ›¿æ¢ä¸º/ã€‚
2ã€åˆ›å»ºingress
kubectl apply -f minimal-ingress.yamlkubectl get ingress

3ã€é€šè¿‡ingress controllerè®¿é—®æµ‹è¯•æœåŠ¡
curl 192.168.56.102:30490/testpath

è®¿é—®é“¾è·¯ä¸ºï¼šip+portï¼ˆingressï¼‰ -&gt; nginx service
å¤šä¸ªIngress Controlleræ€æ ·åœ¨k8sé›†ç¾¤ä¸­é…ç½®å¤šä¸ªIngress Controllerï¼Ÿç­”ï¼šå¤šä¸ªIngress Controllerçš„--controller-classå’Œ--ingress-classè®¾ç½®æˆä¸åŒçš„å€¼ã€‚
å¦‚æœk8sé›†ç¾¤ä¸­å­˜åœ¨å¤šä¸ªIngress Controllerï¼Œå“ªä¸ªä¼šç”Ÿæ•ˆå‘¢ï¼Ÿç­”ï¼šåœ¨Ingressçš„specä¸­æŒ‡å®šingressClassNameï¼Œæˆ–è€…åœ¨Ingressçš„annotationsä¸­æŒ‡å®škubernetes.io/ingress.classï¼ˆå³å°†åºŸå¼ƒï¼‰ã€‚å¦‚æœä¸æŒ‡å®šï¼Œé‚£ä¹ˆå°†ä¼šä½¿ç”¨é»˜è®¤çš„ingressClassï¼Œé»˜è®¤çš„ingressClassä¸­ä¼šåŒ…å«ä¸€ä¸ªannotationsï¼š
annotations:  ingressclass.kubernetes.io/is-default-class: &quot;true&quot;

Ingress NGINX Controllerçš„--controller-classé»˜è®¤å€¼ä¸ºk8s.io/ingress-nginxï¼Œ--ingress-classçš„é»˜è®¤å€¼ä¸ºnginxã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Ingress
Default IngressClass
Multiple Ingress controllers
kuberneteséƒ¨ç½²å¤šä¸ªingress controllerï¼ˆingress controlleråˆ†ç»„éƒ¨ç½²ï¼‰å®è·µ
éƒ¨ç½²å¤šä¸ªIngress Controller
åŒä¸€kuberneteséƒ¨ç½²å¤šä¸ªNginx Ingress Controller

å¸¸ç”¨Ingressé…ç½®æ”¯æŒwebsocketæ¨èæ–¹æ³•ï¼š
apiVersion: networking.k8s.io/v1kind: Ingressmetadata:  name: minimal-ingress  annotations:    nginx.ingress.kubernetes.io/proxy-http-version: &quot;1.1&quot;    nginx.ingress.kubernetes.io/proxy-read-timeout: &quot;3600&quot;    nginx.ingress.kubernetes.io/proxy-send-timeout: &quot;3600&quot;

å‚è€ƒæ–‡æ¡£ï¼š

ingress-nginx Websockets
ingress-nginx Annotations
Advanced Configuration with Annotations
WebSocket support

å†å²æ–¹æ³•ï¼š
apiVersion: networking.k8s.io/v1kind: Ingressmetadata:  name: minimal-ingress  annotations:    nginx.ingress.kubernetes.io/configuration-snippet: |      proxy_http_version 1.1;      proxy_set_header Upgrade &quot;websocket&quot;;      proxy_set_header Connection &quot;Upgrade&quot;;

åŸŸåè¯ä¹¦é…ç½®æ™®é€šåŸŸåé…ç½®è¯ä¹¦1ã€åˆ›å»ºsecret
kubectl create secret tls cert \--cert=/etc/letsencrypt/live/voidking.com/fullchain.pem \--key=/etc/letsencrypt/live/voidking.com/privkey.pem \--dry-run=client \-oyaml &gt; secret.yaml

apiVersion: v1data:  tls.crt: xxx  tls.key: yyykind: Secretmetadata:  name: certtype: Opaque

å…¶ä¸­ï¼Œtls.crtæ˜¯base64åŠ å¯†åçš„è¯ä¹¦ï¼Œtls.keyæ˜¯base64åŠ å¯†åçš„keyã€‚
2ã€ingressæ·»åŠ tlså®šä¹‰
spec:  ingressClassName: nginx  rules:  - host: test.voidking.com    http:      paths:      - path: /        pathType: Prefix        backend:          service:            name: test            port:              number: 80    tls:    - hosts:      - test.voidking.com      secretName: cert

æ³›åŸŸåé…ç½®è¯ä¹¦æ³›åŸŸåçš„è¯ä¹¦é…ç½®æ–¹æ³•ï¼Œå’Œæ™®é€šåŸŸåçš„è¯ä¹¦é…ç½®æ–¹æ³•å®Œå…¨ä¸€è‡´ã€‚
spec:  ingressClassName: nginx  rules:  - host: *.voidking.com    http:      paths:      - path: /        pathType: Prefix        backend:          service:            name: test            port:              number: 80  tls:  - hosts:    - &#x27;*.voidking.com&#x27;    secretName: cert

å‚è€ƒæ–‡æ¡£ï¼š

Ingress è¯ä¹¦é…ç½®

å¤šä¸ªåŸŸåé…ç½®æ³›åŸŸåè¯ä¹¦å¤šä¸ªåŸŸåä½¿ç”¨åŒä¸€ä¸ªæ³›åŸŸåè¯ä¹¦ï¼Œå»ºè®®é›†ä¸­é…ç½®æ³›åŸŸåè¯ä¹¦ã€‚
1ã€åŸŸåè¯ä¹¦é…ç½®
spec:  ingressClassName: nginx  rules:  - host: test0.voidking.com  - host: test1.voidking.com  tls:  - hosts:    - &#x27;test0.voidking.com&#x27;    - &#x27;test1.voidking.com&#x27;    secretName: cert

2ã€è·¯ç”±é…ç½®
spec:  ingressClassName: nginx  rules:  - host: test0.voidking.com    http:      paths:      - path: /        pathType: Prefix        backend:          service:            name: test            port:              number: 80

æ‰¹é‡ä¿®æ”¹åŸŸåè¯ä¹¦å·²çŸ¥æ¡ä»¶ï¼š

k8sé›†ç¾¤ä¸­ï¼Œä½¿ç”¨ingressé…ç½®äº†å¾ˆå¤šå››çº§åŸŸåï¼Œä¾‹å¦‚ test0.intl.voidking.com å’Œ test1.intl.voidking.com 
é™¤äº†å››çº§åŸŸåï¼Œè¿˜æœ‰äº”çº§åŸŸåï¼Œä¾‹å¦‚ web.core.intl.voidking.com å’Œ api.core.intl.voidking.com
æ¯ä¸ªåŸŸåéƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ingressé…ç½®æ–‡ä»¶ï¼ŒåŒ…å«tlsé…ç½®
ingressä½äºä¸åŒçš„namespace

éœ€æ±‚ï¼š*.intl.voidking.comåŸŸåè¯ä¹¦è¿‡æœŸï¼Œéœ€è¦æ‰¹é‡ä¿®æ”¹k8sä¸­å¯¹åº”çš„å››çº§åŸŸåè¯ä¹¦ï¼Œä¸è¦å½±å“äº”çº§åŸŸåè¯ä¹¦ã€‚
è„šæœ¬å®ç°ï¼špatch-ingress-tls
å‰åç«¯åˆ†ç¦»éœ€æ±‚æè¿°ï¼šå‰ç«¯åç«¯æ˜¯ä¸¤ä¸ªæœåŠ¡ï¼Œä½äºä¸¤ä¸ªnamespaceï¼Œè¦é…ç½®ingressï¼Œä½¿å‘å¾€è·¯ç”±/çš„æµé‡æ‰“åˆ°å‰ç«¯æœåŠ¡ï¼Œå‘å¾€/apiçš„æµé‡æ‰“åˆ°åç«¯æœåŠ¡ã€‚
æ–¹æ³•ä¸€ï¼šåœ¨ä¸€ä¸ªnamespaceä¸­ï¼Œåˆ›å»ºä¸€ä¸ªingresså’Œä¸€ä¸ªexternalnameç±»å‹çš„serviceã€‚åœ¨ingressä¸­é…ç½®ä¸¤ä¸ªpathã€‚
æ–¹æ³•äºŒï¼šåœ¨ä¸¤ä¸ªnamespaceä¸­ï¼Œåˆ†åˆ«åˆ›å»ºä¸€ä¸ªingressã€‚hostç›¸åŒï¼Œé…ç½®ä¸åŒçš„pathï¼Œingress-controllerä¼šè‡ªåŠ¨åˆå¹¶è¿™ä¸¤ä¸ªé…ç½®ã€‚
è®¾ç½®max_client_body_sizenginx-ingress-controlleræœ‰ä¸€ä¸ªå…¨å±€é…ç½®æ–‡ä»¶ï¼ˆconfigmapï¼‰ï¼Œç±»ä¼¼äºnginxä¸­çš„nginx.confï¼Œé€šè¿‡å®ƒå¯ä»¥é…ç½®ä¸€äº›é€šç”¨é…ç½®ï¼Œä¾‹å¦‚max_client_body_sizeã€‚
1ã€ç¼–è¾‘é…ç½®æ–‡ä»¶
kubectl edit cm nginx-configuration -n ingress-nginx

ä¿®æ”¹dataéƒ¨åˆ†çš„é…ç½®ï¼š
data:  proxy-body-size: &quot;1000m&quot;

2ã€é‡å¯nginx-ingress-controller
kubectl rollout restart deployment nginx-ingress-controller -n ingress-nginx

è·¯å¾„é‡å†™å‚è€ƒæ–‡æ¡£ï¼š

How to proxy_pass with nginx-ingress?
ingress-resources/rewrites
Advanced Configuration with Annotations

éœ€æ±‚ï¼šå‘å¾€ /api/* çš„æµé‡ï¼Œå˜æˆ /* è½¬å‘åˆ° api-service ï¼›å‘å¾€ /cms/* çš„æµé‡ï¼Œå˜æˆ /* è½¬å‘åˆ° cms-serviceï¼›å…¶ä½™æµé‡å‘å¾€ frontend-serviceã€‚
é…ç½®æ–¹æ³•ï¼š
apiVersion: networking.k8s.io/v1kind: Ingressmetadata:  name: ingress  annotations:    nginx.ingress.kubernetes.io/rewrite-target: /$1    nginx.ingress.kubernetes.io/use-regex: truespec:  ingressClassName: nginx  rules:  - host: test0.voidking.com    http:      paths:      - path: /(.*)        backend:          serviceName: frontend-service          servicePort: 80      - path: /api/(.*)        backend:          serviceName: api-service          servicePort: 8080      - path: /cms/(.*)        backend:          serviceName: cms-service          servicePort: 8080

å…¶ä¸­ï¼Œpathä¸­çš„(.*)æ˜¯ç¬¬ä¸€ä¸ªåŒ¹é…ï¼Œä¸rewrite-targetä¸­çš„$1å¯¹åº”ã€‚
éœ€æ±‚ï¼šå‘å¾€ /api/* çš„æµé‡ï¼Œå˜æˆ /api/v1/* è½¬å‘åˆ° api-service ï¼›å‘å¾€ /api-v2/* çš„æµé‡ï¼Œå˜æˆ /api/v2/* è½¬å‘åˆ° api-serviceã€‚
é…ç½®æ–¹æ³•ï¼š
apiVersion: networking.k8s.io/v1kind: Ingressmetadata:  name: fe  namespace: default  annotations:    kubernetes.io/ingress.class: &quot;nginx&quot;    nginx.ingress.kubernetes.io/rewrite-target: /    nginx.ingress.kubernetes.io/configuration-snippet: |      rewrite ^/api/(.*)$ /api/v1/$1 redirect;      rewrite ^/api-v2/(.*)$ /api/v2/$1 redirect;spec:  ingressClassName: nginx  rules:  - host: test0.voidking.com    http:      paths:      - path: /api        backend:          serviceName: api-service          servicePort: 8080

éœ€æ±‚ï¼šå‘å¾€ /tea/* çš„æµé‡ï¼Œå˜æˆ /* è½¬å‘åˆ° tea-svc ï¼›å‘å¾€ /coffee/* çš„æµé‡ï¼Œå˜æˆ /beans/* è½¬å‘åˆ° api-serviceã€‚
é…ç½®æ–¹æ³•ï¼š
apiVersion: networking.k8s.io/v1kind: Ingressmetadata:  name: cafe-ingress  annotations:    nginx.org/rewrites: &quot;serviceName=tea-svc rewrite=/;serviceName=coffee-svc rewrite=/beans/&quot;spec:  rules:  - host: cafe.example.com    http:      paths:      - path: /tea/        pathType: Prefix        backend:          service:            name: tea-svc            port:              number: 80      - path: /coffee/        pathType: Prefix        backend:          service:            name: coffee-svc            port:              number: 80


æŸ¥çœ‹æœ€ç»ˆçš„nginxé…ç½®æˆ‘ä»¬ç¼–å†™çš„ingressï¼Œå®é™…ä¸Šæœ€ç»ˆä¼šç”Ÿæˆnginx.confï¼Œå¯ä»¥åœ¨nginx-ingress-controllerä¸­æŸ¥çœ‹æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚
kubectl exec -it nginx-ingress-controller-xxx -- /bin/bashcd /etc/nginxcat nginx.conf

Ingressæ¨èé“¾è·¯LB -&gt; ServiceDomain -&gt; LB(Ingress) -&gt; Service -&gt; Pod
è¿™ç§é“¾è·¯ï¼Œé€‚ç”¨äºäº‘å‚å•†æä¾›çš„k8sé›†ç¾¤ã€‚åœ¨åˆ›å»ºingress-controllerçš„serviceæ—¶ï¼Œç›´æ¥ç»™è¿™ä¸ªserviceåˆ†é…ä¸€ä¸ªLBå¯ä¾›å¤–éƒ¨è®¿é—®ã€‚è¿™ç§é“¾è·¯æœ€å¤§çš„ä¼˜ç‚¹æ˜¯é“¾è·¯çŸ­ï¼Œé€Ÿåº¦å¿«ã€‚
LB -&gt; IngressDomain -&gt; LB -&gt; Ingress -&gt; Service -&gt; Pod
è¿™ç§é“¾è·¯ï¼Œé€‚ç”¨äºäº‘å‚å•†æä¾›çš„k8sé›†ç¾¤ã€‚é€šè¿‡äº‘å‚å•†æä¾›çš„LBï¼Œå¯ä»¥é…ç½®å››å±‚æˆ–è€…ä¸ƒå±‚è´Ÿè½½å‡è¡¡åˆ°Ingressï¼Œè¿˜å¯ä»¥åœ¨LBå±‚åŠ ä¸€äº›å®‰å…¨é˜²æŠ¤äº§å“ã€‚å¦‚æœä½¿ç”¨çš„æ˜¯ä¸ƒå±‚è´Ÿè½½å‡è¡¡ï¼Œè¿˜å¯ä»¥ç»Ÿä¸€é…ç½®æ³›åŸŸåè¯ä¹¦ã€‚
Nginx -&gt; IngressDomain -&gt; Nginx -&gt; Ingress -&gt; Service -&gt; Pod
è¿™ç§é“¾è·¯ï¼Œé€‚ç”¨äºæ‰€æœ‰k8sé›†ç¾¤ã€‚é€šè¿‡Nginxï¼Œå¯ä»¥é…ç½®å››å±‚æˆ–è€…ä¸ƒå±‚è´Ÿè½½å‡è¡¡åˆ°Ingressã€‚å¦‚æœä½¿ç”¨çš„æ˜¯ä¸ƒå±‚è´Ÿè½½å‡è¡¡ï¼Œè¿˜å¯ä»¥ç»Ÿä¸€é…ç½®æ³›åŸŸåè¯ä¹¦ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>network</category>
        <category>cloudnative</category>
        <category>architecture</category>
      </categories>
      <tags>
        <tag>æ¶æ„</tag>
        <tag>k8s</tag>
        <tag>nginx</tag>
        <tag>shell</tag>
        <tag>https</tag>
        <tag>tls</tag>
        <tag>ssl</tag>
        <tag>ç½‘ç»œ</tag>
        <tag>helm</tag>
        <tag>ingress</tag>
        <tag>kubesphere</tag>
      </tags>
  </entry>
  <entry>
    <title>K8Sä¸­çš„Serviceè¯¦è§£</title>
    <url>/dev-k8s-service/</url>
    <content><![CDATA[K8Sä¸­çš„Serviceåˆ†ç±»K8Sä¸­Serviceçš„ä½œç”¨æ˜¯å››å±‚è´Ÿè½½å‡è¡¡ï¼ŒæŠŠå‘å¾€Serviceçš„æµé‡è´Ÿè½½å‡è¡¡åˆ°å¯¹åº”çš„Podï¼ˆendpointsï¼‰ä¸Šã€‚æ ¹æ®æš´éœ²æœåŠ¡æ–¹å¼çš„ä¸åŒï¼Œå¯ä»¥åˆ†ä¸ºå››ç§ç±»å‹ï¼šClusterIPã€NodePortã€LoadBalancerå’ŒExternalNameã€‚
å‚è€ƒæ–‡æ¡£ï¼š

æœåŠ¡
ä¸€æ–‡è®²é€K8sçš„Serviceæ¦‚å¿µ



ClusterIPClusterIPï¼šé€šè¿‡é›†ç¾¤çš„å†…éƒ¨ IP æš´éœ²æœåŠ¡ï¼Œé€‰æ‹©è¯¥å€¼æ—¶æœåŠ¡åªèƒ½å¤Ÿåœ¨é›†ç¾¤å†…éƒ¨è®¿é—®ã€‚ è¿™ä¹Ÿæ˜¯é»˜è®¤çš„ ServiceTypeã€‚
NodePortNodePortï¼šé€šè¿‡æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„ IP å’Œé™æ€ç«¯å£ï¼ˆNodePortï¼‰æš´éœ²æœåŠ¡ã€‚ NodePort æœåŠ¡ä¼šè·¯ç”±åˆ°è‡ªåŠ¨åˆ›å»ºçš„ ClusterIP æœåŠ¡ã€‚ é€šè¿‡è¯·æ±‚ &lt;èŠ‚ç‚¹ IP&gt;:&lt;èŠ‚ç‚¹ç«¯å£&gt;ï¼Œä½ å¯ä»¥ä»é›†ç¾¤çš„å¤–éƒ¨è®¿é—®ä¸€ä¸ª NodePort æœåŠ¡ã€‚NodePortçš„é»˜è®¤èŒƒå›´æ˜¯30000-32767ï¼Œå¯ä»¥é€šè¿‡â€“service-node-port-rangeä¿®æ”¹ã€‚
LoadBalancerLoadBalancerï¼šä½¿ç”¨äº‘æä¾›å•†çš„è´Ÿè½½å‡è¡¡å™¨å‘å¤–éƒ¨æš´éœ²æœåŠ¡ã€‚ å¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨å¯ä»¥å°†æµé‡è·¯ç”±åˆ°è‡ªåŠ¨åˆ›å»ºçš„ NodePort æœåŠ¡å’Œ ClusterIP æœåŠ¡ä¸Šã€‚
ExternalNameExternalNameï¼šé€šè¿‡è¿”å› CNAME å’Œå¯¹åº”å€¼ï¼Œå¯ä»¥å°†æœåŠ¡æ˜ å°„åˆ° externalName å­—æ®µçš„å†…å®¹ï¼ˆä¾‹å¦‚ï¼Œfoo.bar.example.comï¼‰ï¼Œå®ç°å¤–éƒ¨æœåŠ¡çš„å¯¹å†…æ˜ å°„ã€‚
è¿™ä¸ªç±»å‹çš„ä½œç”¨ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿è¿ç§»ï¼Œæ¯”å¦‚ç°åœ¨é›†ç¾¤ä¸­çš„æœåŠ¡ä¾èµ–ä¸€ä¸ªå¤–éƒ¨çš„æœåŠ¡ï¼Œé‚£å°±å¯ä»¥ä½¿ç”¨ExternalNameæŠŠè¿™ä¸ªå¤–éƒ¨æœåŠ¡æ˜ å°„åˆ°é›†ç¾¤å†…éƒ¨ï¼Œä»¥åè¿™ä¸ªå¤–éƒ¨æœåŠ¡è¿ç§»åˆ°é›†ç¾¤å†…éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹serviceç±»å‹ä½¿ç”¨å†…éƒ¨çš„æ–°æœåŠ¡ï¼Œå¯¹äºä¾èµ–æ–¹æ˜¯æ— æ„Ÿçš„ã€‚
externalNameè™½ç„¶å¯ä»¥é…ç½®IPåœ°å€ï¼Œä½†æ˜¯Ingresså’ŒCoreDNSå¹¶æ²¡æœ‰è§£æã€‚å¦‚æœå¤–éƒ¨æœåŠ¡ä¸ºIPï¼Œåˆ™å¯ä»¥ä½¿ç”¨Headless Serviceæ¥å®ç°æ˜ å°„ã€‚
ç¤ºä¾‹1ï¼š
apiVersion: v1kind: Servicemetadata:  name: mysqlspec:  type: ExternalName  externalName: mysql.example.com  ports:    - protocol: TCP      port: 3306      targetPort: 3306

ç¤ºä¾‹2ï¼š
apiVersion: v1kind: Servicemetadata:  name: mysqlspec:  type: ClusterIP  clusterIP: None  ports:  - port: 3306    targetPort: 3306---apiVersion: v1kind: Endpointsmetadata: name: mysqlsubsets:- addresses:  - ip: 192.168.56.10  ports:  - port: 3306

å‚è€ƒæ–‡æ¡£ï¼šKubernetes External Service Mapping
æ³¨æ„ï¼šä¸€ä¸ªserviceå¯èƒ½æœ‰å¤šä¸ªendpointï¼Œè¿™äº›endpointè¦æ±‚IPä¸åŒã€‚æ¯”å¦‚ï¼Œmysql:3306å¯¹åº”çš„endpointæ˜¯192.168.56.10:3306ï¼Œå¦‚æœæƒ³è¦å†å¢åŠ endpointï¼Œé‚£ä¹ˆéœ€è¦å¢åŠ IPï¼Œè€Œä¸æ˜¯å¢åŠ portã€‚
Headless ServiceHeadless Serviceï¼Œå®é™…ä¸Šå±äºClusterIPç±»å‹ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„ClusterIPã€‚æœ‰æ—¶ä¸éœ€è¦è´Ÿè½½å‡è¡¡ï¼Œä¹Ÿä¸éœ€è¦å•ç‹¬çš„ ServiceIPï¼Œå¯ä»¥é€šè¿‡æŒ‡å®š ClusterIPï¼ˆspec.clusterIPï¼‰çš„å€¼ä¸º â€œNoneâ€ æ¥åˆ›å»º Headless Serviceã€‚Headless Serviceå¸¸ç”¨äºStatefulSetç±»å‹è´Ÿè½½çš„å¯¹å¤–æœåŠ¡æš´éœ²ï¼Œæˆ–è€…å¤–éƒ¨æœåŠ¡çš„å¯¹å†…æ˜ å°„ã€‚
Headless Serviceå’Œæ™®é€šServiceçš„ä¸åŒæœ‰ä¸¤ç‚¹ï¼š1ã€åœ¨DNSæŸ¥è¯¢æ—¶æ™®é€šServiceä¼šè¿”å›ServiceIPï¼Œè€ŒHeadless Serviceä¼šè¿”å›å¤šä¸ªçœŸå®çš„endpointï¼Œè¿™æ ·å®¢æˆ·ç«¯å°±å¯ä»¥è‡ªå·±é€‰æ‹©è°ƒç”¨å“ªä¸€ä¸ªendpointã€‚2ã€Headless Serviceå¯¹åº”çš„æ¯ä¸€ä¸ªpodéƒ½ä¼šåˆ†é…ä¸€ä¸ªDNSåŸŸåï¼Œè¿™æ ·podé—´å°±å¯ä»¥é€šè¿‡åŸŸåäº’ç›¸è®¿é—®äº†ã€‚è€Œæœ‰çŠ¶æ€æœåŠ¡å°±éœ€è¦è¿™ç§äº’ç›¸ä¸åŒçš„è¯†åˆ«ï¼Œå› æ­¤ï¼ŒHeadless Serviceå¸¸å¸¸å’Œstatefulseté…åˆä½¿ç”¨ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Headless Services
K8Så®¹å™¨ç¼–æ’ä¹‹Headlessæµ…è°ˆ

]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>network</category>
        <category>cloudnative</category>
        <category>architecture</category>
      </categories>
      <tags>
        <tag>æ¶æ„</tag>
        <tag>k8s</tag>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>CKAå’ŒCKADå¤‡è€ƒ</title>
    <url>/dev-cka-ckad-prepare/</url>
    <content><![CDATA[Flagã€ŠK8Så…¥é—¨ç¯‡ã€‹ä¸€æ–‡ä¸­ï¼Œå®šä¸‹äº†ç›®æ ‡ï¼šæ‹¿åˆ°CKAå’ŒCKADè¯ä¹¦ã€‚è½¬çœ¼è¿‡å»äº†å¤§åŠå¹´ï¼Œä½†æ˜¯ä¸€ç›´æ²¡æœ‰ä»˜è¯¸è¡ŒåŠ¨ã€‚ä»Šå¤©ï¼Œè¶ç”Ÿæ—¥ï¼Œç«‹ä¸‹flagï¼š2020å¹´5æœˆ1å‰è€ƒä¸‹CKAï¼Œ2020å¹´6æœˆ1æ—¥å‰è€ƒä¸‹CKADã€‚
CKAå’ŒCKADæ˜¯å•¥ï¼Ÿ
The Certified Kubernetes Administrator (CKA) program was created by the Cloud Native Computing Foundation (CNCF), in collaboration with The Linux Foundation, to help develop the Kubernetes ecosystem. 


The Certified Kubernetes Application Developer (CKAD) program has been developed by the Cloud Native Computing Foundation (CNCF), in collaboration with The Linux Foundation, to help expand the Kubernetes ecosystem through standardized training and certification. 

ç®€è€Œè¨€ä¹‹ï¼ŒCKA/CKADæ˜¯CNCFå’ŒLinuxåŸºé‡‘ä¼šè”åˆæ¨å‡ºçš„ä¸¤ä¸ªK8Sè€ƒè¯•è®¤è¯ã€‚å§”æ‰˜ç»™PSIæ¥è¿›è¡Œç›‘ç£è€ƒè¯•ã€‚å…¶ä¸­ï¼ŒCKAä¾§é‡äºK8Sç®¡ç†ï¼ŒCKADä¾§é‡äºK8Så¼€å‘ã€‚
æƒ³è¦æ‹¿åˆ°CKAå’ŒCKADè¯ä¹¦ï¼Œéœ€è¦å“ªäº›å‡†å¤‡å·¥ä½œï¼Ÿæœ¬æ–‡å°±æ¥æ¢³ç†ä¸€ä¸‹ã€‚ä¸»è¦å‚è€ƒï¼š

CKAåŠCKADè®¤è¯è€ƒè¯•ç»éªŒåˆ†äº«
CKAè®¤è¯è·å–å†ç¨‹
How to prepare and pass CKA exam
How to prepare for CKA and CKAD exam ?
Mumshad Mannambeth Courses



æ³¨æ„äº‹é¡¹æŠ¥åç½‘å€ï¼šCertified Kubernetes Administrator (CKA) Programå’ŒCertified Kubernetes Application Developer (CKAD) Programã€‚æŠ¥åæ—¶ä½¿ç”¨æŠ˜æ‰£ç DEVOPS15å¯ä»¥è·å¾—15%çš„æŠ˜æ‰£ã€‚
æŠ¥åæ—¶éœ€è¦æ”¯æŒæµ·å¤–æ”¯ä»˜çš„ä¿¡ç”¨å¡ï¼ˆVISAæˆ–è€…MasterCardï¼‰ã€‚
ç¨³å®šçš„ç§‘å­¦ä¸Šç½‘å·¥å…·ã€‚
åœ¨çº¦å®šçš„è€ƒè¯•æ—¶é—´ç™»å½•è€ƒè¯•ç³»ç»Ÿã€‚
ç¡¬ä»¶æ£€æµ‹ï¼šä½¿ç”¨Chromeæµè§ˆå™¨è®¿é—®CompatibilityCheckï¼Œé€‰æ‹© â€Linux Foundationâ€ as the Exam Sponsor and â€œCKAâ€ as the Examã€‚
æŒ‰ç…§è€ƒå®˜è¦æ±‚æ‰“å¼€æ‘„åƒå¤´å’Œéº¦å…‹é£ï¼Œå¹¶ä¸”å…±äº«æ¡Œé¢ã€‚
èº«ä»½æ£€æµ‹ï¼šè€ƒå®˜æŸ¥çœ‹è€ƒç”Ÿè¯ä»¶ï¼Œæ¯”å¦‚æŠ¤ç…§ï¼ˆèº«ä»½è¯ä¸è¡Œï¼Œéœ€è¦æœ‰ç…§ç‰‡å’ŒLatinå­—æ¯å†™çš„å…¨åï¼‰ã€‚
ç¯å¢ƒæ£€æµ‹ï¼šè€ƒå®˜é€šè¿‡æ‘„åƒå¤´æ£€æŸ¥æˆ¿é—´ï¼Œè¦æ±‚æˆ¿é—´åªæœ‰è€ƒç”Ÿä¸€ä¸ªäººï¼Œæ¡Œå­åªèƒ½æ”¾ç”µè„‘ï¼Œæ²¡æœ‰å…¶ä»–ä¸œè¥¿ã€‚
è½¯ä»¶æ£€æµ‹ï¼šè€ƒå®˜è¦æ±‚æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œç¡®è®¤é™¤æµè§ˆå™¨ä¹‹å¤–çš„æ²¡æœ‰å…¶ä»–ä»»åŠ¡ï¼Œç¡®è®¤æ— è¯¯åè€ƒè¯•å¼€å§‹ã€‚
è¦æ±‚Chromeæµè§ˆå™¨å½“å‰åªèƒ½æœ‰ä¸€ä¸ªtabé¡µï¼ˆå°±æ˜¯è€ƒè¯•ç³»ç»Ÿï¼‰ï¼Œè€ƒè¯•è¿‡ç¨‹ä¸­å¯ä»¥å†æ‰“å¼€ä¸€ä¸ªtabé¡µç”¨äºè®¿é—®Kubernetesæ–‡æ¡£ï¼Œå°±æ˜¯è¯´è€ƒè¯•å…¨ç¨‹æœ€å¤šä¸¤ä¸ªtabé¡µã€‚
CKAä¸€å…±180åˆ†é’Ÿï¼Œ25é“é¢˜ï¼›CKADä¸€å…±120åˆ†é’Ÿï¼Œ20é“é¢˜ã€‚
è€ƒè¯•çš„ç½‘é¡µä¸€åŠæ˜¯è¯•é¢˜ï¼Œä¸€åŠæ˜¯GateOneçš„ç»ˆç«¯ç•Œé¢ã€‚
è€ƒè¯•ä¸­ä¸èƒ½å–æ°´ã€åƒä¸œè¥¿ï¼Œå¯ä»¥ç”³è¯·ä¼‘æ¯ã€‚
è€ƒè¯•ç»“æŸåï¼Œ36ä¸ªå°æ—¶ä¹‹å†…ï¼ŒCNCFå°±ä¼šé€šè¿‡é‚®ä»¶å‘Šè¯‰è€ƒç”Ÿæˆç»©ã€‚CKAåˆ†æ•°å¤§äº74%åˆ™é€šè¿‡è€ƒè¯•ï¼ŒCKADåˆ†æ•°å¤§äº66%åˆ™ä¸ºé€šè¿‡è€ƒè¯•ï¼Œå¹¶ä¸”é™„ä»¶åŒ…å«è¯ä¹¦ã€‚å¦‚æœè€ƒè¯•ä¸é€šè¿‡ï¼Œè€ƒç”Ÿè´¦å·ä¸Šå°±ä¼šæœ‰ä¸€æ¬¡ä¸€å¹´å†…Free Retakeçš„æœºä¼šã€‚
æ›´å¤šå…³äºè€ƒè¯•åŠè€ƒè¯•ç¯å¢ƒçš„æ³¨æ„äº‹é¡¹ï¼Œå¯å‚è§å®˜æ–¹çš„Exam Tipsã€Candidate Handbookã€CNCF FAQã€‚
æŠ¥åå’Œçº¦è€ƒ1ã€æ”¯ä»˜å®Œæˆåï¼Œè·³è½¬åˆ°Certification Statusé¡µé¢ã€‚
2ã€æŒ‰ç…§æç¤ºï¼ŒCheck System Requirementsï¼ŒéªŒè¯æˆåŠŸåä»¥åä¹Ÿå¯ä»¥å†æ¬¡éªŒè¯ã€‚
3ã€ç‚¹å‡» Schedule Examï¼Œè·³è½¬åˆ°è€ƒè¯•æ—¶é—´å®‰æ’é¡µé¢ï¼Œé€‰æ‹©ä¸€ä¸ªè€ƒè¯•æ—¶é—´ã€‚
4ã€ç‚¹å‡» Get Candidate Handbookï¼Œè·å–è€ƒè¯•æ‰‹å†Œã€‚
5ã€ç‚¹å‡» Verify Nameï¼Œç¡®è®¤å§“åï¼Œä»¥åä¼šå‡ºç°åœ¨è¯ä¹¦ä¸Šã€‚
6ã€ç‚¹å‡» Important Tipsï¼Œè·å–å¸®åŠ©æç¤ºã€‚
7ã€ç‚¹å‡»å³ä¾§ Schedule Examï¼Œå³å¯çœ‹åˆ°è€ƒè¯•ä¿¡æ¯ï¼ŒåŒ…æ‹¬è€ƒè¯•çš„æ—¶é—´ã€å€’è®¡æ—¶ã€ç¡®è®¤ç ã€è€ƒç”ŸIDç­‰ã€‚
ä»¥ä¸Šï¼ŒæŠ¥åå’Œçº¦è€ƒå®Œæˆã€‚
æŠ€èƒ½GetDockeræµ™æ±Ÿå¤§å­¦SELå®éªŒå®¤ç¼–å†™çš„ã€ŠDockerå®¹å™¨ä¸å®¹å™¨äº‘ã€‹Docker Documentationèœé¸Ÿæ•™ç¨‹ä¹‹Dockeræ•™ç¨‹Learn Docker &amp; Containers using Interactive Browser
K8Sã€ŠKubernetesæƒå¨æŒ‡å—ï¼šä»Dockeråˆ°Kuberneteså®è·µå…¨æ¥è§¦ ç¬¬4ç‰ˆã€‹Kubernetes Documentationkubernetesä¸­æ–‡ç¤¾åŒºåä¸ºäº‘-Cloud Native Livesé˜¿é‡Œäº‘-K8s èµ„æºå…¨æ±‡æ€» | K8s å¤§å’–å¸¦ä½  31 å ‚è¯¾ä»é›¶å…¥é—¨ K8sé˜¿é‡Œäº‘-äº‘åŸç”ŸæŠ€æœ¯å…¬å¼€è¯¾é˜¿é‡Œäº‘-äº‘åŸç”ŸæŠ€æœ¯å…¬å¼€è¯¾ï¼ˆå¤‡ç”¨åœ°å€ï¼‰Certified Kubernetes Administrator (CKA) with Practice TestsLabs - Certified Kubernetes Administrator with Practice TestsKubernetes Certified Application Developer (CKAD) with TestsLabs - Certified Kubernetes Application Developercka&amp;cakdè€ƒçº²-curriculumStudying for the Certified Kubernetes Administrator ExamK8S TasksLearn Kubernetes using Interactive Browser-Based ScenariosPlay with KubernetesCKA CKAD Simulator
k8s-toolå¤‡è€ƒçš„è¿‡ç¨‹ä¸­ï¼Œå®Œå–„è‡ªå·±çš„k8s-toolï¼Œè€ƒè¯•çš„æ—¶å€™å¯ä»¥ä½¿ç”¨ã€‚
åè®°5æœˆ19æ—¥æ›´æ–°ä¸‰ä¸ªæœˆå¿™ç¢Œçš„æ—©æ™šï¼Œæ— ä¼‘çš„å‘¨æœ«ï¼Œç»ˆäºåœ¨ä»Šå¤©æ—©ä¸Šï¼Œæ”¶åˆ°äº†CKADçš„è¯ä¹¦ã€‚åŠ ä¸Š4æœˆä»½æ‹¿åˆ°çš„CKAè¯ä¹¦ï¼Œç›®æ ‡è¾¾æˆï¼CKAè€ƒäº†90%ï¼ˆ74%é€šè¿‡ï¼‰ï¼ŒCKADè€ƒäº†89%ï¼ˆ66%é€šè¿‡ï¼‰ã€‚
è€ƒè¯•å¿ƒå¾—CKAå’ŒCKADæœ‰ä»€ä¹ˆå·®åˆ«ï¼Ÿ1ã€è€ƒè¯•å†…å®¹æœ‰é‡å ï¼Œä½†æ˜¯ä¹Ÿæœ‰å„è‡ªç‹¬ç«‹çš„å†…å®¹ã€‚æ¯”å¦‚CKAä¼šè€ƒetcdå’Œk8séƒ¨ç½²ç›¸å…³çš„å†…å®¹ï¼ŒCKADä¸ä¼šæ¶‰åŠã€‚CKADä¼šæœ‰æ¢æ´»ã€cronjobå’Œhpaçš„å†…å®¹ï¼ŒCKAä¸ä¼šæ¶‰åŠã€‚2ã€CKADæ¯”CKAéš¾åº¦æ›´å¤§ä¸€äº›ã€‚è€ƒè¿‡äº†CKAï¼Œæœ¬ä»¥ä¸ºå¯ä»¥è½»æ¾æ‹¿ä¸‹CKADï¼Œç»“æœè€ƒè¯•æ—¶å‘ç°CKADçš„é¢˜ç›®æ›´å¤æ‚ä¸€äº›ï¼ŒèŠ±è´¹æ—¶é—´æ›´é•¿ã€‚åæ¥æƒ³æƒ³ä¹Ÿåˆç†ï¼Œæ¯•ç«ŸCKAéœ€è¦74åˆ†é€šè¿‡ï¼Œè€ŒCKADåªéœ€è¦66åˆ†å°±å¯ä»¥é€šè¿‡ã€‚3ã€å…¶å®æˆ‘è§‰å¾—CKAå’ŒCKADå®Œå…¨å¯ä»¥åˆæˆä¸€ä¸ªè€ƒè¯•ï¼Œå› ä¸ºæ²¡æœ‰ç‰¹åˆ«æ˜æ˜¾çš„ç•Œé™ï¼Œå®˜æ–¹å¯èƒ½å°±æ˜¯ä¸ºäº†å¤šèµšç‚¹é’±ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
        <tag>cka</tag>
        <tag>ckad</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoä½¿ç”¨Gulpå‹ç¼©é™æ€èµ„æº</title>
    <url>/dev-hexo-gulp/</url>
    <content><![CDATA[Gulpç®€ä»‹gulpæ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œèƒ½å¤Ÿå¼ºåŒ–æˆ‘ä»¬çš„å‰ç«¯å·¥ä½œæµã€‚

gulp is an open-source JavaScript toolkit created by Eric Schoffstall used as a streaming build system (similar to a more package-focussed Make) in front-end web development.


It is a task runner built on Node.js and npm, used for automation of time-consuming and repetitive tasks involved in web development like minification, concatenation, cache busting, unit testing, linting, optimization, etc.


gulp uses a code-over-configuration approach to define its tasks and relies on its small, single-purpose plugins to carry them out. The gulp ecosystem includes more than 3500 such plugins.

æ›´å¤šå†…å®¹ï¼Œå‚è€ƒwikipedia-gulp.jsã€Gulpå®˜ç½‘å’ŒGulpä¸­æ–‡ç½‘ã€‚æœ¬æ–‡ä¸­ï¼Œä¼šä½¿ç”¨gulpæ¥å‹ç¼©hexoç”Ÿæˆçš„é™æ€èµ„æºæ–‡ä»¶ï¼ŒåŠ å¿«ç«™ç‚¹çš„è®¿é—®é€Ÿåº¦ã€‚


å®‰è£…é…ç½®gulp1ã€å®‰è£…gulpnpm install --global gulp-cli
2ã€å®‰è£…gulpæ¨¡å—
npm install gulp --savenpm install gulp-htmlclean gulp-htmlmin gulp-clean-css gulp-uglify gulp-imagemin --savenpm install gulp-babel babel-preset-env babel-preset-mobx --savenpm install -D @babel/core @babel/preset-react @babel/preset-env --save
æœ€ç»ˆç”Ÿæˆçš„package.jsonä¸ºï¼š
&#123;  &quot;name&quot;: &quot;hexo-site&quot;,  &quot;version&quot;: &quot;0.0.0&quot;,  &quot;private&quot;: true,  &quot;scripts&quot;: &#123;    &quot;build&quot;: &quot;hexo generate&quot;,    &quot;clean&quot;: &quot;hexo clean&quot;,    &quot;deploy&quot;: &quot;hexo deploy&quot;,    &quot;server&quot;: &quot;hexo server&quot;  &#125;,  &quot;hexo&quot;: &#123;    &quot;version&quot;: &quot;4.2.0&quot;  &#125;,  &quot;dependencies&quot;: &#123;    &quot;babel-preset-env&quot;: &quot;^1.7.0&quot;,    &quot;babel-preset-mobx&quot;: &quot;^2.0.0&quot;,    &quot;gulp&quot;: &quot;^4.0.2&quot;,    &quot;gulp-babel&quot;: &quot;^8.0.0&quot;,    &quot;gulp-clean-css&quot;: &quot;^4.2.0&quot;,    &quot;gulp-htmlclean&quot;: &quot;^2.7.22&quot;,    &quot;gulp-htmlmin&quot;: &quot;^5.0.1&quot;,    &quot;gulp-imagemin&quot;: &quot;^7.1.0&quot;,    &quot;gulp-uglify&quot;: &quot;^3.0.2&quot;,    &quot;hexo&quot;: &quot;^4.0.0&quot;,    &quot;hexo-generator-archive&quot;: &quot;^1.0.0&quot;,    &quot;hexo-generator-baidu-sitemap&quot;: &quot;^0.1.6&quot;,    &quot;hexo-generator-category&quot;: &quot;^1.0.0&quot;,    &quot;hexo-generator-feed&quot;: &quot;^2.2.0&quot;,    &quot;hexo-generator-index&quot;: &quot;^1.0.0&quot;,    &quot;hexo-generator-searchdb&quot;: &quot;^1.2.0&quot;,    &quot;hexo-generator-sitemap&quot;: &quot;^2.0.0&quot;,    &quot;hexo-generator-tag&quot;: &quot;^1.0.0&quot;,    &quot;hexo-neat&quot;: &quot;^1.0.4&quot;,    &quot;hexo-renderer-ejs&quot;: &quot;^1.0.0&quot;,    &quot;hexo-renderer-marked&quot;: &quot;^2.0.0&quot;,    &quot;hexo-renderer-stylus&quot;: &quot;^1.1.0&quot;,    &quot;hexo-server&quot;: &quot;^1.0.0&quot;  &#125;,  &quot;devDependencies&quot;: &#123;    &quot;@babel/core&quot;: &quot;^7.8.4&quot;,    &quot;@babel/preset-env&quot;: &quot;^7.8.4&quot;,    &quot;@babel/preset-react&quot;: &quot;^7.8.3&quot;  &#125;&#125;

4ã€åœ¨hexoç›®å½•åˆ›å»ºgulpfile.jsï¼Œå†…å®¹ä¸ºï¼š
let gulp = require(&#x27;gulp&#x27;)let cleanCSS = require(&#x27;gulp-clean-css&#x27;)let htmlmin = require(&#x27;gulp-htmlmin&#x27;)let htmlclean = require(&#x27;gulp-htmlclean&#x27;)let babel = require(&#x27;gulp-babel&#x27;) /* è½¬æ¢ä¸ºes2015 */let uglify = require(&#x27;gulp-uglify&#x27;)let imagemin = require(&#x27;gulp-imagemin&#x27;)// è®¾ç½®æ ¹ç›®å½•const root = &#x27;./public&#x27;// åŒ¹é…æ¨¡å¼ï¼Œ **/*ä»£è¡¨åŒ¹é…æ‰€æœ‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶const pattern = &#x27;**/*&#x27;// å‹ç¼©htmlgulp.task(&#x27;minify-html&#x27;, function() &#123;  return gulp    // åŒ¹é…æ‰€æœ‰ .htmlç»“å°¾çš„æ–‡ä»¶    .src(`$&#123;root&#125;/$&#123;pattern&#125;.html`)    .pipe(htmlclean())    .pipe(      htmlmin(&#123;        removeComments: true,        minifyJS: true,        minifyCSS: true,        minifyURLs: true      &#125;)    )    .pipe(gulp.dest(&#x27;./public&#x27;))&#125;)// å‹ç¼©cssgulp.task(&#x27;minify-css&#x27;, function() &#123;  return gulp    // åŒ¹é…æ‰€æœ‰ .cssç»“å°¾çš„æ–‡ä»¶    .src(`$&#123;root&#125;/$&#123;pattern&#125;.css`)    .pipe(      cleanCSS(&#123;        compatibility: &#x27;ie8&#x27;      &#125;)    )    .pipe(gulp.dest(&#x27;./public&#x27;))&#125;)// å‹ç¼©jsgulp.task(&#x27;minify-js&#x27;, function() &#123;  return gulp    // åŒ¹é…æ‰€æœ‰ .jsç»“å°¾çš„æ–‡ä»¶    .src(`$&#123;root&#125;/$&#123;pattern&#125;.js`)    .pipe(      babel(&#123;        presets: [&#x27;env&#x27;]      &#125;)    )    .pipe(uglify())    .pipe(gulp.dest(&#x27;./public&#x27;))&#125;)// å‹ç¼©å›¾ç‰‡gulp.task(&#x27;minify-images&#x27;, function() &#123;  return gulp    // åŒ¹é…public/imagesç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶    .src(`$&#123;root&#125;/images/$&#123;pattern&#125;`)    .pipe(      imagemin(        [          imagemin.gifsicle(&#123; optimizationLevel: 3 &#125;),          imagemin.jpegtran(&#123; progressive: true &#125;),          imagemin.optipng(&#123; optimizationLevel: 7 &#125;),          imagemin.svgo()        ],        &#123; verbose: true &#125;      )    )    .pipe(gulp.dest(&#x27;./public/images&#x27;))&#125;)gulp.task(&#x27;default&#x27;, gulp.series(&#x27;minify-html&#x27;, &#x27;minify-css&#x27;, &#x27;minify-js&#x27;))

4ã€æ‰§è¡Œå‹ç¼©gulp
å‘½ä»¤ç²¾ç®€ä½¿ç”¨äº†gulpæ—¶å€™ï¼Œæ„å»ºå‘å¸ƒéœ€è¦å››ä¸ªå‘½ä»¤ï¼š
hexo cleanhexo ggulphexo d
è¿™å››ä¸ªå‘½ä»¤ï¼Œå¯ä»¥éƒ½å†™åœ¨package.jsonã€‚
&quot;scripts&quot;: &#123;  &quot;build&quot;: &quot;hexo clean &amp;&amp; hexo g &amp;&amp; gulp&quot;,  &quot;deploy&quot;: &quot;hexo clean &amp;&amp; hexo g &amp;&amp; gulp &amp;&amp; hexo d&quot;&#125;
æ„å»ºåªéœ€è¦æ‰§è¡Œnpm run buildï¼Œæ„å»ºå‘å¸ƒåªéœ€è¦æ‰§è¡Œnpm run deployã€‚
travisé…ç½®å¯¹åº”çš„ï¼Œä¿®æ”¹.travis.ymlé…ç½®ä¸ºï¼š
sudo: falselanguage: node_jsnode_js:- 10.16.3cache: npmbranches:  only:  - master # build master branch onlyenv:  global:  - GIT_USER: voidking  - HEXO_BACKUP_REPO: github.com/voidking/hexo-backup.git  - HEXO_THEME_REPO: github.com/voidking/hexo-theme-next.git  - GITHUB_PAGES_REPO: github.com/voidking/voidking.github.io.git  - VOIDKING_REPO: github.com/voidking/voidking.gitbefore_install:- export TZ=&#x27;Asia/Shanghai&#x27;- npm install hexo -g- npm install gulp-cli -ginstall:- npm installscript:- git clone https://$&#123;HEXO_THEME_REPO&#125; themes/next- git clone https://$&#123;GIT_USER&#125;:$&#123;GITHUB_TOKEN&#125;@$&#123;HEXO_BACKUP_REPO&#125; hexo-backup- mv hexo-backup/source .- rm -rf source/private- npm run buildafter_success:- git config --global user.name &quot;voidking&quot;- git config --global user.email &quot;voidking@qq.com&quot;- git clone https://$&#123;GIT_USER&#125;:$&#123;GITHUB_TOKEN&#125;@$&#123;GITHUB_PAGES_REPO&#125; voidking- unalias cp- cp -rf public/. voidking- cd voidking- git add .- git commit -m &quot;Travis CI Auto Builder&quot;- git push --force --quiet &quot;https://$&#123;GIT_USER&#125;:$&#123;GITHUB_TOKEN&#125;@$&#123;GITHUB_PAGES_REPO&#125;&quot; master:master

ç²¾ç®€search.xmlhtmlã€csså’Œjséƒ½å‹ç¼©äº†ï¼Œå¾ˆå¼€å¿ƒã€‚ä½†æ˜¯ï¼Œè¿˜æœ‰ä¸€ä¸ªå¤§æ–‡ä»¶æ²¡æœ‰å‹ç¼©ï¼Œå°±æ˜¯æœ¬åœ°æœç´¢çš„DBæ–‡ä»¶search.xmlã€‚æˆ‘çš„åšå®¢æœ‰æ¥è¿‘600ç¯‡æ–‡ç« ï¼Œè¿™ä¸ªsearch.xmlæ–‡ä»¶çš„å¤§å°ä¸º7.5Mï¼Œå¾ˆå¤§ã€‚æ‰“å¼€search.xmlæ–‡ä»¶ï¼Œå‘ç°é‡Œé¢ä¸æ­¢åŒ…å«æ–‡ç« å†…å®¹ï¼Œè¿˜åŒ…å«htmlæ ‡ç­¾ã€‚å‚è€ƒhexo-generator-searchdbï¼Œå‘ç°å¯ä»¥è®¾ç½®ä¸ç”Ÿæˆæ ‡ç­¾ã€‚
ä¿®æ”¹localsearché…ç½®1ã€ä¿®æ”¹hexo/_config.ymlçš„localsearché…ç½®ä¸ºï¼š
# local searchsearch:  path: search.xml  field: post  format: striptags  limit: 10000

2ã€é‡æ–°ç”Ÿæˆsearch.xmlæ–‡ä»¶ï¼Œæ–°çš„æ–‡ä»¶åªæœ‰3.5Mã€‚
3ã€ä¿®æ”¹local-search.jsä¸ºäº†æ­£å¸¸ä½¿ç”¨æœç´¢åŠŸèƒ½ï¼Œéœ€è¦ä¿®æ”¹hexoä¸»é¢˜çš„local-search.jsã€‚å¦‚æœä¸ä¿®æ”¹çš„è¯ï¼Œæœç´¢æ—¶åªæœç´¢æ ‡é¢˜ï¼Œä¸ä¼šæœç´¢å†…å®¹ã€‚ç¼–è¾‘next/source/js/local-search.jsï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
// line 120// let content = data.content ? data.content.trim().replace(/&lt;[^&gt;]+&gt;/g, &#x27;&#x27;) : &#x27;&#x27;;let content = data.content;

ä»¥ä¸Šï¼Œå®ç°äº†search.xmlçš„ç²¾ç®€ï¼Œniceã€‚
è‡ªå®šä¹‰ç²¾ç®€ä½†æ˜¯ï¼Œ3.5Mä¾ç„¶å¾ˆå¤§ï¼Œèƒ½ä¸èƒ½å†ç²¾ç®€ä¸€ä¸‹ï¼Ÿå¯ä»¥ã€‚1ã€localsearchçš„formatæ”¹å›htmlã€‚
2ã€ä¿®æ”¹xml_generator.jsç¼–è¾‘hexo/node_modules/hexo-generator-searchdb/lib/xml_generator.jsï¼Œå®šä¹‰è‡ªå·±æƒ³è¦åˆ é™¤çš„å­—ç¬¦ï¼š
&#x27;use strict&#x27;;const path = require(&#x27;path&#x27;);const fs = require(&#x27;fs&#x27;);const nunjucks = require(&#x27;nunjucks&#x27;);var env = new nunjucks.Environment();var searchTmplSrc = path.join(__dirname, &#x27;../templates/search.xml&#x27;);var searchTmpl = nunjucks.compile(fs.readFileSync(searchTmplSrc, &#x27;utf8&#x27;), env);var stripe_code_line_num = function(str) &#123; // å»é™¤ä»£ç     return str.replace(/&lt;figure class=&quot;highlight.*?&lt;\/figure&gt;/ig, &#x27;&#x27;);&#125;var stripe = function (str) &#123; // å»é™¤htmlæ ‡ç­¾    return str.replace(/(&lt;([^&gt;]+)&gt;)/ig, &#x27;&#x27;);&#125;var minify = function (str) &#123; // å‹ç¼©æˆä¸€è¡Œ    return str.trim().replace(/\n/g, &#x27; &#x27;).replace(/\s+/g, &#x27; &#x27;);&#125;module.exports = function(locals) &#123;  var config = this.config;  var database = require(&#x27;./database&#x27;)(locals, config);  database.forEach( function(element, index) &#123;    element.content = minify(stripe(stripe_code_line_num(element.content)));  &#125;);  var xml = searchTmpl.render(&#123;    articles: database,    config  : config.search  &#125;);  return &#123;    path: config.search.path,    data: xml  &#125;;&#125;;

3ã€é‡æ–°ç”Ÿæˆsearch.xmlï¼Œè¿™æ¬¡åªæœ‰2.5Mï¼Œniceã€‚
ä»¥ä¸Šä¸¤ç§ç²¾ç®€search.xmlçš„æ–¹æ³•éƒ½å¾ˆå¥½ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©ä½¿ç”¨ä¿®æ”¹localsearch formatçš„æ–¹æ³•ã€‚å› ä¸ºå¦‚æœåœ¨xml_generator.jsä¸åˆ é™¤æ–‡ç« ä¸­çš„ä»£ç ï¼Œä¸¤ç§æ–¹æ³•çš„å‹ç¼©ç»“æœåŸºæœ¬ç›¸åŒï¼Œè€Œæ–¹æ³•ä¸€é€šç”¨æ€§æ›´å¥½ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>cicd</tag>
        <tag>gulp</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoé…ç½®Travis CIè‡ªåŠ¨æ„å»ºå‘å¸ƒ</title>
    <url>/dev-hexo-travis-ci/</url>
    <content><![CDATA[ä¸ºä»€ä¹ˆè¦é…ç½®è‡ªåŠ¨æ„å»ºå‘å¸ƒï¼Ÿã€ŠHexoé…ç½®å¤šä¸ªgitä»“åº“ã€‹ä¸€æ–‡ä¸­å·²ç»å­¦ä¹ äº†hexoé…ç½®å¤šä¸ªgitä»“åº“çš„æ–¹æ³•ï¼Œå‘å¸ƒé¡¹ç›®ä¹Ÿå¾ˆç®€å•ã€‚ä¸ºä»€ä¹ˆè¿˜éœ€è¦hexoçš„è‡ªåŠ¨å‘å¸ƒï¼Ÿå› ä¸ºå‘å¸ƒæµç¨‹è¿˜å¯ä»¥æ›´ç®€å•ã€‚è€Œä¸”ï¼Œç°åœ¨çš„å‘å¸ƒæ–¹å¼ï¼Œå¦‚æœæƒ³è¦å¤šå°ç”µè„‘åŒæ—¶ä½¿ç”¨ï¼Œé‚£ä¹ˆæ¯å°ç”µè„‘éƒ½éœ€è¦é…ç½®hexoç¯å¢ƒï¼Œå¾ˆéº»çƒ¦ã€‚å¦‚æœæœ¬åœ°åªè´Ÿè´£å†™å†™markdownæ–‡ä»¶ï¼Œè€Œæ„å»ºå‘å¸ƒéƒ½æ”¾åˆ°äº‘ç«¯ï¼Œæ˜¯ä¸æ˜¯æ›´åŠ ç¾å¥½ï¼Ÿæœ¬æ–‡è¦åšçš„ï¼Œå°±æ˜¯è¿™æ ·ä¸€ä»¶äº‹ã€‚
åœ¨gitlabä¸­ï¼ŒCI/CDå¯ä»¥é€šè¿‡é…ç½®gitlab-ci.ymlæ¥å®ç°ã€‚è€Œgithubï¼Œåœ¨2019å¹´8æœˆ8æ—¥ä¹Ÿæ”¯æŒå†…ç½®çš„CI/CDäº†ã€‚ä½†æ˜¯æœ¬æ–‡ä¸­ï¼Œå¹¶ä¸æ˜¯ä½¿ç”¨githubå†…ç½®çš„CI/CDï¼Œè€Œæ˜¯ä½¿ç”¨Travis CIæ¥å®ç°hexoçš„è‡ªåŠ¨æ„å»ºå‘å¸ƒã€‚
æ›´å¤šå…³äºCI/CDçš„å†…å®¹ï¼Œå‚è€ƒã€ŠGitLab CI/CDã€‹


å®‰è£…é…ç½®æœ¬åœ°hexoå‚è€ƒã€ŠHexoç¯å¢ƒæ­å»º2018å¹´5æœˆç‰ˆã€‹ï¼Œå®‰è£…v10.16.3ç‰ˆæœ¬çš„nodeï¼Œåˆ›å»ºhexoé¡¹ç›®ï¼Œç„¶åæŠŠéœ€è¦çš„ä¾èµ–å†™å…¥package.jsonï¼š
npm install hexo-generator-feed --savenpm install hexo-generator-sitemap --savenpm install hexo-generator-baidu-sitemap --savenpm install hexo-deployer-git --savenpm install hexo-generator-searchdb --save
æ¥ä¸‹æ¥æ”¹é€ hexoé…ç½®ï¼Œç”¨äºTravis CIå‘å¸ƒã€‚
1ã€åˆ›å»ºhexo-deployé¡¹ç›®åœ¨githubåˆ›å»ºpublicé¡¹ç›®hexo-deployï¼Œæ³¨æ„ä¸€å®šè¦æ˜¯publicé¡¹ç›®ï¼Œå¦åˆ™ä¸ä¼šè§¦å‘travis-ciã€‚git cloneåˆ°æœ¬åœ°ï¼Œç„¶åæŠŠhexoé¡¹ç›®é‡Œçš„å†…å®¹å‰ªåˆ‡åˆ°hexo-deployç›®å½•ã€‚
2ã€é…ç½®config.ymlç¼–è¾‘config.ymlï¼Œæ ¹æ®è‡ªå·±çš„éœ€è¦è¿›è¡Œé…ç½®ã€‚
3ã€æ¸…ç†æ–‡ä»¶hexo-deployç›®å½•é‡Œåªéœ€è¦ä¿ç•™ï¼š
.git.gitignorepackage.json_config.ymlREADME.md

é…ç½®travis.ymlä¸»è¦å‚è€ƒä½¿ç”¨Travis CIæŒç»­éƒ¨ç½²Hexoåšå®¢å’Œå°‡ Hexo éƒ¨ç½²åˆ° GitHub Pagesã€‚å·²çŸ¥ voidking.github.io å’Œ voidking æ˜¯hexoå‘å¸ƒåçš„gitä»“åº“ï¼ˆpublicï¼‰ï¼Œhexo-backupæ˜¯å­˜å‚¨markdownæ–‡ä»¶çš„gitä»“åº“ï¼ˆprivateï¼‰ã€‚
1ã€å®‰è£…Travis CIæ’ä»¶åœ¨githubæ·»åŠ Travis CIæ’ä»¶ï¼Œå¹¶ä¸”åœ¨Applications settingsé…ç½®Travis CIçš„æƒé™ã€‚
2ã€ç”Ÿæˆaccess tokenè®¿é—®githubçš„Personal access tokensé¡µé¢ï¼ŒGenerate new tokenã€‚Noteè¾“å…¥travisï¼ŒSelect scopeé€‰æ‹©repoï¼Œç„¶åç‚¹å‡»Generate tokenã€‚ç”Ÿæˆäº†ä¸€ä¸ªtokenï¼Œä¿å­˜å®ƒã€‚
3ã€æ·»åŠ access tokenè®¿é—®Travis CI Proï¼Œæ‰¾åˆ°hexo-deployé¡¹ç›®ï¼ŒSettingsï¼Œåœ¨Environment Variablesä¸€æ å¡«å…¥Nameä¸ºGITHUB_TOKENï¼ŒVALUEä¸ºgithubçš„access tokenã€‚
3ã€åœ¨hexo-deployç›®å½•ä¸‹æ·»åŠ .travis.ymlæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
sudo: falselanguage: node_jsnode_js:  - 10.16.3cache: npmbranches:  only:  - master # build master branch onlyenv:  global:  - GIT_USER: voidking  - HEXO_BACKUP_REPO: github.com/voidking/hexo-backup.git  - HEXO_THEME_REPO: github.com/voidking/hexo-theme-next.git  - GITHUB_PAGES_REPO: github.com/voidking/voidking.github.io.git  - VOIDKING_REPO: github.com/voidking/voidking.gitbefore_install:- export TZ=&#x27;Asia/Shanghai&#x27;- npm install hexo -ginstall:- npm installscript:- git clone https://$&#123;HEXO_THEME_REPO&#125; themes/next- git clone https://$&#123;GIT_USER&#125;:$&#123;GITHUB_TOKEN&#125;@$&#123;HEXO_BACKUP_REPO&#125; hexo-backup- mv hexo-backup/source .- rm -rf source/private- hexo g# æ­¤å¤„æœ‰bugï¼Œå‚è€ƒä¸‹æ–‡ç»§ç»­ä¿®æ”¹after_success:- git config --global user.name &quot;voidking&quot;- git config --global user.email &quot;voidking@qq.com&quot;- cd ./public- git init- git add .- git commit -m &quot;Travis CI Auto Builder&quot;- git push --force --quiet &quot;https://$&#123;GIT_USER&#125;:$&#123;GITHUB_TOKEN&#125;@$&#123;GITHUB_PAGES_REPO&#125;&quot; master:master- git push --force --quiet &quot;https://$&#123;GIT_USER&#125;:$&#123;GITHUB_TOKEN&#125;@$&#123;VOIDKING_REPO&#125;&quot; master:master

hexoå‘å¸ƒåœ¨hexo-deployé¡¹ç›®ä¸­ï¼Œä¿®æ”¹README.mdï¼ˆå»ºè®®æ·»åŠ æ—¥æœŸä¿¡æ¯ï¼‰ï¼Œç„¶åæäº¤ä»£ç ï¼Œè§¦å‘å‘å¸ƒã€‚
git add .git commit -m &quot;20200202deploy&quot;git push

ç„¶åæ‰“å¼€Travis CI - hexo-deployï¼Œå³å¯çœ‹åˆ°æ„å»ºå‘å¸ƒçš„æ—¥å¿—ã€‚å¦‚æœæ„å»ºå‘å¸ƒå‡ºé”™ï¼Œæ ¹æ®æç¤ºä¿®æ”¹å‘å¸ƒè„šæœ¬æˆ–è€…markdownæ–‡ä»¶å³å¯ã€‚
è‡³æ­¤ï¼ŒHexoé…ç½®Travis CIè‡ªåŠ¨å‘å¸ƒå®Œæˆï¼
åŸŸå404é—®é¢˜å‘å¸ƒå®Œæˆï¼Œå‡ºç°äº†ä¸€ä¸ªç¥å¥‡çš„é—®é¢˜ï¼Œwww.voidking.com åŸŸå404ã€‚æŸ¥çœ‹github pagesé…ç½®ï¼Œå‘ç°è‡ªå®šä¹‰åŸŸåå˜å›äº† voidking.github.io ã€‚ç¥å¥‡äº†ï¼è«éï¼Œæ˜¯å› ä¸ºforce pushåˆ·æ‰äº†gitä»“åº“çš„commitï¼Ÿé‚£å°±ä¿ç•™commitè¯•è¯•ã€‚ä¿®æ”¹.travis.ymlçš„aftersuccesséƒ¨åˆ†ï¼š
after_success:- git config --global user.name &quot;voidking&quot;- git config --global user.email &quot;voidking@qq.com&quot;- git clone https://$&#123;GIT_USER&#125;:$&#123;GITHUB_TOKEN&#125;@$&#123;GITHUB_PAGES_REPO&#125; voidking- unalias cp- cp -rf public/. voidking- cd voidking- git add .- git commit -m &quot;Travis CI Auto Builder&quot;- git push --force --quiet &quot;https://$&#123;GIT_USER&#125;:$&#123;GITHUB_TOKEN&#125;@$&#123;GITHUB_PAGES_REPO&#125;&quot; master:master- cd ../public- git init- git add .- git commit -m &quot;Travis CI Auto Builder&quot;- git push --force --quiet &quot;https://$&#123;GIT_USER&#125;:$&#123;GITHUB_TOKEN&#125;@$&#123;VOIDKING_REPO&#125;&quot; master:master
ä¿ç•™commitä¹‹åï¼Œè‡ªå®šä¹‰åŸŸåæœç„¶ä¸ä¼šå†å˜åŒ–ï¼Œniceã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>hexo</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>git</tag>
        <tag>cicd</tag>
        <tag>travis-ci</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoé…ç½®å¤šä¸ªgitä»“åº“</title>
    <url>/dev-hexo-multi-git/</url>
    <content><![CDATA[åæ§½åœ¨ç»å†è¿‡åŸŸåè¢«å°ä¹‹åï¼Œä»Šå¤©åˆç»å†äº†æ¬ç“¦å·¥æœåŠ¡å™¨IPè¢«å°ï¼Œæˆ‘å¤ªéš¾äº†ã€‚ã€‚ã€‚o(â•¥ï¹â•¥)oæœåŠ¡å™¨IPè¢«å°ï¼Œå¸¦æ¥äº†ä¸‰ä¸ªé—®é¢˜ï¼šç¬¬ä¸€ä¸ªæ˜¯ä¸èƒ½æ„‰å¿«åœ°ç§‘å­¦ä¸Šç½‘äº†ï¼›ç¬¬äºŒä¸ªæ˜¯å†…ç½‘ç©¿é€ä¸èƒ½ä½¿ç”¨äº†ï¼›ç¬¬ä¸‰ä¸ªæ˜¯è‡ªå·±çš„ www.voidking.com åŸŸåæ— æ³•è®¿é—®äº†ã€‚
å¯¹äºé—®é¢˜ä¸€ï¼Œæš‚æ—¶ä½¿ç”¨å…è´¹çš„å…¬å…±é£æœºåœºã€‚å¯¹äºé—®é¢˜äºŒï¼Œæš‚æ—¶ä½¿ç”¨ç™¾åº¦æœåŠ¡å™¨ï¼Œä½†æ˜¯å› ä¸ºæ²¡æœ‰å¤‡æ¡ˆï¼Œæ‰€ä»¥ä¸èƒ½è¿›è¡ŒåŸŸåè§£æã€‚å¯¹äºé—®é¢˜ä¸‰ï¼Œå°±æ˜¯æœ¬æ–‡è¦è§£å†³çš„é—®é¢˜ä¹‹ä¸€ã€‚


å›åˆ°githubé‚£ä¹ˆï¼Œå› ä¸ºæœåŠ¡å™¨IPè¢«å°ï¼ŒåŸŸåæ— æ³•è®¿é—®æ€ä¹ˆåŠï¼Ÿ
æ–¹æ³•ä¸€ï¼šå†è´­ä¹°ä¸€ä¸ªæ–°çš„æ¬ç“¦å·¥IPï¼Œæˆ–è€…å†è´­ä¹°ä¸€ä¸ªæ–°çš„å›½å¤–æœåŠ¡å™¨ã€‚ä½†æ˜¯å› ä¸ºä¸æƒ³å†èŠ±é’±ï¼ˆå°±æ˜¯è¿™ä¹ˆæŠ ï¼‰ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•è¢«å¦å®šäº†ã€‚æ–¹æ³•äºŒï¼šä½¿ç”¨å…è´¹çš„git pagesæœåŠ¡ï¼Œæ¯”å¦‚github pagesã€gitlab pagesã€gitee pagesç­‰ï¼Œå¹¶ä¸”æŠŠåŸŸåè§£æåˆ°git pagesæœåŠ¡å™¨ã€‚è¿™é‡Œæˆ‘é€‰æ‹©æœ€å¼€å§‹æ­å»ºhexoå°±ä½¿ç”¨çš„github pagesï¼Œå®ƒæ”¯æŒå…è´¹çš„è‡ªå®šä¹‰åŸŸåå’Œhttpsã€‚
å‚è€ƒã€ŠHexoç¯å¢ƒæ­å»ºã€‹å’Œã€ŠHexoç¯å¢ƒæ­å»º2018å¹´5æœˆç‰ˆã€‹ï¼Œé…ç½®å¥½github pagesæœåŠ¡ï¼Œå¹¶ä¸”é…ç½®åŸŸåçš„CNAMEè§£æåˆ° voidking.github.io ï¼Œå¼€å¯å¼ºåˆ¶httpsï¼ˆgithubä¼šè‡ªåŠ¨ç”³è¯·sslè¯ä¹¦ï¼Œç‚¹ä¸ªèµï¼‰ã€‚
ç™¾åº¦æ”¶å½•é—®é¢˜é™¤äº†è®¿é—®é€Ÿåº¦æ…¢ä¸€ç‚¹ä¹‹å¤–ï¼Œç°åœ¨æˆ‘çš„åŸŸåå·²ç»æ­£å¸¸äº†ï¼Œniceã€‚ä½†æ˜¯ï¼Œå¦å¤–çš„é—®é¢˜å‡ºç°äº†ï¼šç™¾åº¦æœç´¢ä¸åˆ°æˆ‘çš„åŸŸåäº†ï¼
ä½¿ç”¨ç™¾åº¦æŠ“å–è¯Šæ–­å·¥å…·è¯Šæ–­ï¼Œå‘ç°æŠ“å–å¼‚å¸¸ä¿¡æ¯æ˜¯æ‹’ç»è®¿é—®ï¼Œ403 Forbiddenã€‚è¿™æ˜¯å› ä¸ºgithubå±è”½äº†ç™¾åº¦èœ˜è››ï¼Œæ‰€ä»¥ç™¾åº¦æ— æ³•æ”¶å½•è§£æåˆ°githubçš„åŸŸåã€‚
æµè§ˆäº†ä¸€äº›æ–‡ç« ï¼Œæ‰¾åˆ°äº†è§£å†³åŠæ³•ï¼šåœ¨DNSPodé…ç½®ä¸¤ä¸ªwwwçš„åŸŸåè§£æï¼Œçº¿è·¯ç±»å‹â€œé»˜è®¤â€è§£æåˆ° voidking.github.io ï¼Œçº¿è·¯ç±»å‹â€œç™¾åº¦â€è§£æåˆ°ä¸€ä¸ªç™¾åº¦å¯ä»¥æŠ“å–çš„åœ°å€ï¼Œå¦‚ä¸‹å›¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œéœ€è¦ç»´æŠ¤ä¸¤ä¸ªç«™ç‚¹ï¼Œä¸¤ä¸ªç«™ç‚¹åˆ†åˆ«å¤„ç†æ¥è‡ªä¸åŒçº¿è·¯çš„æµé‡ã€‚å…¶ä¸­ä¸€ä¸ªç«™ç‚¹å»ºç«‹åœ¨githubï¼Œå¦å¤–ä¸€ä¸ªç«™ç‚¹å»ºç«‹åœ¨å“ªå„¿å‘¢ï¼Ÿè¿™é‡Œæˆ‘é€‰æ‹©ZEIT Nowã€‚
ç†æƒ³æ˜¯ç¾å¥½çš„ï¼Œç°å®æ˜¯æ®‹é…·çš„ï¼å› ä¸ºæ— è®ºæ˜¯githubè¿˜æ˜¯zeitï¼Œéƒ½éœ€è¦éªŒè¯åŸŸåè§£æï¼Œè€Œå®ƒä»¬éƒ½æ˜¯å¢ƒå¤–æœåŠ¡å™¨ï¼Œæ‰€ä»¥éƒ½éœ€è¦çº¿è·¯ç±»å‹â€œå¢ƒå¤–â€çš„CNAMEè§£æï¼Œå¦åˆ™æ— æ³•é€šè¿‡éªŒè¯ï¼å°´å°¬äº†ã€‚ã€‚ã€‚åªèƒ½é€‰æ‹©å…¶ä¸€ã€‚
ä¸ºäº†ç™¾åº¦çš„æ”¶å½•ï¼Œçœ‹èµ·æ¥åªèƒ½é€‰æ‹©zeitäº†ï¼Œä¸è¿‡zeitæ¯ä¸ªæœˆåªæœ‰20Gçš„æµé‡ã€‚ä¸ºäº†åœ¨zeitæµé‡ç”¨å…‰åæ–¹ä¾¿åœ°åˆ‡åˆ°githubï¼Œå› æ­¤è¿˜æ˜¯éœ€è¦ç»´æŠ¤ä¸¤ä¸ªç«™ç‚¹ã€‚
hexoé…ç½®å¤šä¸ªgitä»“åº“ä¸ºäº†ç»´æŠ¤ä¸¤ä¸ªç«™ç‚¹ï¼Œæ‰€ä»¥æ¯æ¬¡æ›´æ–°ï¼Œéœ€è¦å‘å¸ƒgithub pageså’Œzeitã€‚github pagesçš„å‘å¸ƒå¾ˆæ–¹ä¾¿ï¼Œä¸Šä¼ ä»£ç åç›´æ¥å°±å‘å¸ƒäº†ï¼›è€Œzeitçš„å‘å¸ƒæœ‰å¤šç§æ–¹å¼ï¼Œå…¶ä¸­ä¸€ç§æ–¹å¼æ˜¯é€šè¿‡Deploy Hooksè§¦å‘ã€‚
å¦‚æœgithubå’Œzeitéƒ½ä½¿ç”¨ voidking.github.io è¿™ä¸€ä¸ªgitä»“åº“ï¼Œé‚£ä¹ˆé—®é¢˜å¾ˆç®€å•ã€‚hexo dåï¼Œå†è®¿é—®ä¸€ä¸ªurlè§¦å‘ Deploy Hookså°±å¯ä»¥äº†ã€‚è€Œzeitï¼Œä¸æ”¯æŒ voidking.github.io è¿™ç§é¡¹ç›®åç§°ï¼Œå› æ­¤ç¨å¾®éº»çƒ¦ä¸€ç‚¹ã€‚
1ã€æ–°å»ºgitä»“åº“åœ¨githubä¸Šå†åˆ›å»ºä¸€ä¸ªgitä»“åº“å«åšvoidkingï¼Œimport voidking.github.ioä»“åº“ã€‚
2ã€é…ç½®zeitå…³è”æŠŠvoidkingè¿™ä¸ªä»“åº“å’Œzeitåšå…³è”ï¼Œå¹¶ä¸”å‘å¸ƒé¡¹ç›®ï¼Œé…ç½®ç”Ÿæˆä¸€ä¸ªDeploy Hooksã€‚
3ã€é…ç½®åŸŸåæŒ‰ç…§æç¤ºç»‘å®š www.voidking.com è¿™ä¸ªåŸŸååˆ°zeitç«™ç‚¹ã€‚
4ã€ä¿®æ”¹config.ymlæ–‡ä»¶ä¿®æ”¹hexoçš„config.ymlæ–‡ä»¶ä¸­çš„deployéƒ¨åˆ†ä¸ºï¼š
# githubdeploy:- type: git  repo: https://voidking.com/voidking/voidking.github.io.git  branch: master- type: git  repo: https://voidking.com/voidking/voidking.git  branch: master
ä»¥ä¸Šé…ç½®å‚è€ƒHexoä¸€é”®å‘å¸ƒã€‚
5ã€å‘å¸ƒé¡¹ç›®æ­£å¸¸æ‰§è¡Œhexo dï¼Œé™æ€èµ„æºä»£ç ä¼šä¸Šä¼ åˆ°ä¸¤ä¸ªgitä»“åº“ä¸­ã€‚å…¶ä¸­ï¼Œvoidking.github.ioè¿™ä¸ªä»“åº“å°±ç›´æ¥å‘å¸ƒäº†ã€‚è€Œvoidkingè¿™ä¸ªä»“åº“æƒ³è¦å‘å¸ƒåˆ°zeitä¸Šï¼Œè¿˜éœ€è¦æ‰‹åŠ¨è§¦å‘ä¸€ä¸‹ï¼ˆè®¿é—®Deploy Hooksçš„urlï¼‰ã€‚
è‡³æ­¤ï¼Œhexoå¤šä¸ªgitä»“åº“ï¼Œå¤šä¸ªç«™ç‚¹é…ç½®å®Œæˆã€‚
åè®°å¦‚æœzeitä¸Šçš„æµé‡ç”¨å®Œäº†ï¼Œå¯ä»¥åœ¨DNSPodä¸Šä¿®æ”¹åŸŸåè§£æåˆ°githubã€‚è™½ç„¶æœ‰å»¶è¿Ÿï¼Œä½†æ˜¯å¯¹äºä¸ªäººä½¿ç”¨æ¥è¯´è¶³å¤Ÿäº†ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>hexo</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>m3u8è§†é¢‘ä¸‹è½½æ–¹æ³•</title>
    <url>/hobby-m3u8-download/</url>
    <content><![CDATA[m3u8æ ¼å¼M3Uæ˜¯ä¸€ç§æ’­æ”¾å¤šåª’ä½“åˆ—è¡¨çš„æ–‡ä»¶æ ¼å¼ï¼Œå®ƒçš„è®¾è®¡åˆè¡·æ˜¯ä¸ºäº†æ’­æ”¾éŸ³é¢‘æ–‡ä»¶ï¼Œæ¯”å¦‚MP3ï¼Œä½†æ˜¯è¶Šæ¥è¶Šå¤šçš„è½¯ä»¶ç°åœ¨ç”¨æ¥æ’­æ”¾è§†é¢‘æ–‡ä»¶åˆ—è¡¨ï¼ŒM3Uä¹Ÿå¯ä»¥æŒ‡å®šåœ¨çº¿æµåª’ä½“éŸ³é¢‘æºã€‚å¾ˆå¤šæ’­æ”¾å™¨å’Œè½¯ä»¶éƒ½æ”¯æŒM3Uæ–‡ä»¶æ ¼å¼ã€‚
M3U8æ˜¯Unicodeç‰ˆæœ¬çš„M3Uï¼Œç”¨UTF-8ç¼–ç ã€‚â€M3Uâ€å’Œâ€M3U8â€æ–‡ä»¶éƒ½æ˜¯è‹¹æœå…¬å¸ä½¿ç”¨çš„HTTP Live Streamingæ ¼å¼çš„åŸºç¡€ï¼Œè¿™ç§æ ¼å¼å¯ä»¥åœ¨iPhoneå’ŒMacbookç­‰è®¾å¤‡æ’­æ”¾ã€‚
HTTP Live Streamingï¼ˆç¼©å†™æ˜¯HLSï¼‰æ˜¯ç”±è‹¹æœå…¬å¸æå‡ºåŸºäºHTTPçš„æµåª’ä½“ç½‘ç»œä¼ è¾“åè®®ã€‚æ˜¯è‹¹æœå…¬å¸QuickTime Xå’ŒiPhoneè½¯ä»¶ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯æŠŠæ•´ä¸ªæµåˆ†æˆä¸€ä¸ªä¸ªå°çš„åŸºäºHTTPçš„æ–‡ä»¶æ¥ä¸‹è½½ï¼Œæ¯æ¬¡åªä¸‹è½½ä¸€äº›ã€‚å½“åª’ä½“æµæ­£åœ¨æ’­æ”¾æ—¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥é€‰æ‹©ä»è®¸å¤šä¸åŒçš„å¤‡ç”¨æºä¸­ä»¥ä¸åŒçš„é€Ÿç‡ä¸‹è½½åŒæ ·çš„èµ„æºï¼Œå…è®¸æµåª’ä½“ä¼šè¯é€‚åº”ä¸åŒçš„æ•°æ®é€Ÿç‡ã€‚åœ¨å¼€å§‹ä¸€ä¸ªæµåª’ä½“ä¼šè¯æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šä¸‹è½½ä¸€ä¸ªåŒ…å«å…ƒæ•°æ®çš„extended M3U (m3u8) playlistæ–‡ä»¶ï¼Œç”¨äºå¯»æ‰¾å¯ç”¨çš„åª’ä½“æµã€‚
ç»¼ä¸Šï¼Œm3u8æ˜¯ä¸€ç§æ–‡ä»¶æ ¼å¼ã€‚ä¸‹è½½m3u8æ ¼å¼çš„æ–‡ä»¶æ—¶ï¼Œä¼šä¸‹è½½ä¸€ä¸ªm3u8æ–‡ä»¶ï¼ˆæ–‡ä»¶åˆ—è¡¨ï¼‰ï¼Œä»¥åŠä¸€ä¸ªåŒ…å«äº†å¾ˆå¤štsæ–‡ä»¶ï¼ˆè§†é¢‘ç‰‡æ®µï¼‰çš„éšè—æ–‡ä»¶å¤¹ã€‚
æ›´å¤šå†…å®¹å‚è€ƒM3Uå’ŒHTTP Live Streamingã€‚


æ€æ ·ä¸‹è½½m3u8æ ¼å¼è§†é¢‘ï¼Ÿè·å–ä¸‹è½½åœ°å€1ã€å®‰è£…chromeæ’ä»¶ï¼ŒStream Video Downloaderã€‚
2ã€æ‰“å¼€ä¸€ä¸ªåŒ…å«m3u8è§†é¢‘çš„é¡µé¢ï¼Œæ¯”å¦‚äº‘åŸç”ŸæŠ€æœ¯çš„å‰ä¸–ä»Šç”Ÿã€‚ç‚¹å‡»æ’­æ”¾ï¼ŒStream Video Downloaderå°±å¯ä»¥å—…æ¢åˆ°m3u8æ–‡ä»¶ã€‚
3ã€å¤åˆ¶ä¸‹è½½åœ°å€å¹¶ä¿å­˜ï¼Œæ­¤å¤„çš„ä¸‹è½½åœ°å€ä¸ºï¼šhttps://myun-hw-s3.myun.tv/melj80jz/5a3ydjj0/1551265736611296603.m3u8
FFmpegFFmpegæ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„è§†é¢‘æ ¼å¼è½¬æ¢å·¥å…·ï¼ŒåŒæ—¶å¯ä»¥ç”¨æ¥ä¸‹è½½m3u8æ–‡ä»¶ã€‚
1ã€è®¿é—®github-FFmpegæˆ–è€…FFmpegå®˜ç½‘ï¼Œä¸‹è½½FFmpegï¼Œæœ¬æ–‡ä¸­ä¸‹è½½ffmpeg-4.2.2-win64-static.zipã€‚
2ã€è§£å‹é‡å‘½åæ–‡ä»¶å¤¹ä¸ºffmpegï¼Œè¿›å…¥ffmpeg/binç›®å½•ã€‚
3ã€å³é”®åŠ +Shiftï¼Œæ‰“å¼€Powershellï¼Œè¾“å…¥ä¸‹è½½åˆå¹¶å‘½ä»¤ï¼š
.\ffmpeg.exe -i &quot;https://myun-hw-s3.myun.tv/melj80jz/5a3ydjj0/1551265736611296603.m3u8&quot; -c copy 01-äº‘åŸç”ŸæŠ€æœ¯çš„å‰ä¸–ä»Šç”Ÿ.mp4

è€å¿ƒç­‰å¾…ï¼Œä¸‹è½½å®Œæˆå³å¯åœ¨ffmpeg/binç›®å½•ä¸­çœ‹åˆ°ä¸‹è½½å¥½çš„mp4è§†é¢‘æ–‡ä»¶ã€‚
m3u8è½¬mp4æ‰‹æœºQQæµè§ˆå™¨çš„è§†é¢‘ä¸‹è½½åŠŸèƒ½ç¡®å®å¼ºå¤§ï¼Œå¤§éƒ¨åˆ†èƒ½çœ‹åˆ°çš„è§†é¢‘éƒ½å¯ä»¥ä¸‹çº¿ï¼ŒåŒ…æ‹¬äº‘åŸç”ŸæŠ€æœ¯çš„å‰ä¸–ä»Šç”Ÿè¿™ä¸ªé¡µé¢ä¸­çš„è§†é¢‘ã€‚
ä¸‹è½½å¥½çš„æ–‡ä»¶ï¼Œæ˜¯m3u8æ ¼å¼è§†é¢‘ã€‚æ­£å¦‚ä¸Šæ–‡æ‰€è¯´ï¼Œè¿™ä¸ªè§†é¢‘æ–‡ä»¶å®é™…ä¸Šæ˜¯ä¸€ä¸ªè§†é¢‘åˆ—è¡¨å’Œä¸€ä¸ªéšè—æ–‡ä»¶å¤¹ç»„æˆã€‚æƒ³è¦ç»™å®ƒåˆå¹¶è½¬æ¢æˆmp4æ ¼å¼è§†é¢‘ï¼Œæ€ä¹ˆåŠï¼ŸåŒæ ·å¯ä»¥ä½¿ç”¨FFmpegã€‚
1ã€æŠŠè§†é¢‘åˆ—è¡¨å’Œéšè—æ–‡ä»¶å¤¹éƒ½æ‹·è´åˆ°PCã€‚
2ã€ä½¿ç”¨sublimeæ‰“å¼€m3u8æ–‡ä»¶ï¼Œæ‰¹é‡æ›¿æ¢è·¯å¾„ã€‚æ›¿æ¢å‰ä¸ºï¼š
#EXTM3U#EXT-X-TARGETDURATION:11#EXTINF:10.000000,file:///storage/emulated/0/QQBrowser/è§†é¢‘/.820a585fc4f1a85d4875007aff5ba7a5/0.ts#EXTINF:10.000000,file:///storage/emulated/0/QQBrowser/è§†é¢‘/.820a585fc4f1a85d4875007aff5ba7a5/1.ts#EXTINF:10.000000,file:///storage/emulated/0/QQBrowser/è§†é¢‘/.820a585fc4f1a85d4875007aff5ba7a5/2.ts#EXTINF:10.000000,file:///storage/emulated/0/QQBrowser/è§†é¢‘/.820a585fc4f1a85d4875007aff5ba7a5/3.ts#EXTINF:10.000000,file:///storage/emulated/0/QQBrowser/è§†é¢‘/.820a585fc4f1a85d4875007aff5ba7a5/4.ts#EXTINF:10.000000,file:///storage/emulated/0/QQBrowser/è§†é¢‘/.820a585fc4f1a85d4875007aff5ba7a5/5.ts
è½¬æ¢åä¸ºï¼š
#EXTM3U#EXT-X-TARGETDURATION:11#EXTINF:10.000000,.820a585fc4f1a85d4875007aff5ba7a5/0.ts#EXTINF:10.000000,.820a585fc4f1a85d4875007aff5ba7a5/1.ts#EXTINF:10.000000,.820a585fc4f1a85d4875007aff5ba7a5/2.ts#EXTINF:10.000000,.820a585fc4f1a85d4875007aff5ba7a5/3.ts#EXTINF:10.000000,.820a585fc4f1a85d4875007aff5ba7a5/4.ts#EXTINF:10.000000,.820a585fc4f1a85d4875007aff5ba7a5/5.ts

3ã€æ‰“å¼€Powershellï¼Œæ‰§è¡Œè½¬æ¢å‘½ä»¤ï¼š
# ç›´æ¥åˆå¹¶è½¬æ¢ï¼ˆé€Ÿåº¦å¿«ï¼‰.\ffmpeg.exe -i input-filename.m3u8 -c copy output-filename.mp4# åˆå¹¶è½¬ç å‹ç¼©ï¼ˆé€Ÿåº¦æ…¢ï¼‰.\ffmpeg.exe -i input-filename.m3u8 output-filename.mp4
æ‰§è¡Œå®Œæˆï¼Œå³å¯çœ‹åˆ°è½¬æ¢å¥½çš„mp4æ–‡ä»¶ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>chrome</tag>
        <tag>ä¸‹è½½</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoå¼€å‘å¾®ä¿¡å…¬ä¼—å¹³å°ç®¡ç†ç³»ç»Ÿâ€”â€”ç¬¬1ç« </title>
    <url>/dev-django-wechat-1/</url>
    <content><![CDATA[å‰è¨€ç´§æ¥ç€ã€ŠDjangoå¼€å‘å¾®ä¿¡å…¬ä¼—å¹³å°ç®¡ç†ç³»ç»Ÿâ€”â€”ç¬¬0ç« ã€‹ï¼Œæœ¬æ–‡å­¦ä¹ ä¸€ä¸‹å¾®ä¿¡å…¬ä¼—å¹³å°å„ç§æ¶ˆæ¯çš„æ¥æ”¶å’Œå›å¤ï¼Œä¸»è¦å‚è€ƒWeRoBotæ–‡æ¡£ã€‚
æ¶ˆæ¯ç±»å‹åŒ…æ‹¬ï¼šTextMessageã€ImageMessageã€LinkMessageã€LocationMessageã€VoiceMessageã€VideoMessageã€UnknownMessageï¼›äº‹ä»¶ç±»å‹åŒ…æ‹¬ï¼šSubscribeEventã€UnSubscribeEventã€ScanEventã€ScanCodePushEventã€ScanCodeWaitMsgEventã€PicSysphotoEventã€PicPhotoOrAlbumEventã€PicWeixinEventã€LocationSelectEventã€ClickEventã€ViewEventã€LocationEventã€TemplateSendJobFinishEventã€UserScanProductEventã€UserScanProductEnterSessionEventã€UserScanProductAsyncEventã€UserScanProductVerifyActionEventã€CardPassCheckEventã€CardNotPassCheckEventã€UserGetCardEventã€UserGiftingCardEventã€UserDelCardEventã€UserConsumeCardEventã€UserPayFromPayCellEventã€UserViewCardEventã€UserEnterSessionFromCardEventã€UpdateMemberCardEventã€CardSkuRemindEventã€CardPayOrderEventã€SubmitMembercardUserInfoEventã€UnknownEventï¼›å›å¤ç±»å‹åŒ…æ‹¬ï¼šTextReplyã€ImageReplyã€VoiceReplyã€VideoReplyã€ArticlesReplyã€MusicReplyã€TransferCustomerServiceReplyã€SuccessReplyã€‚


åŸç†å¾®ä¿¡å‘ç»™ /main/wechat/ æ¥å£çš„ä¿¡æ¯ï¼ˆmessageï¼‰ï¼Œéƒ½ä¼ ç»™äº†robotå¯¹è±¡ï¼Œrobotå¯¹è±¡æ ¹æ®æ¶ˆæ¯ç±»å‹è°ƒç”¨è‡ªå·±çš„handlerï¼Œå¤„ç†åè¿”å›ç»“æœç»™å¾®ä¿¡ã€‚
å®ç°æ ¹æ®æ¶ˆæ¯ç±»å‹è¿”å›ä¿¡æ¯ä¿®æ”¹ wecms/main/views_wechat.py ï¼Œå†…å®¹ä¸ºï¼š
import werobotrobot = werobot.WeRoBot(token=&#x27;vkwechat&#x27;)@robot.handlerdef index(message):    return &#x27;Today is wonderful day!&#x27;@robot.textdef text(message):    return &#x27;æ‚¨å‘é€äº†æ–‡æœ¬æ¶ˆæ¯ï¼Œå†…å®¹ä¸ºï¼š&#x27; + message.content@robot.imagedef image(message):    return &#x27;æ‚¨å‘é€äº†å›¾ç‰‡æ¶ˆæ¯ï¼Œå›¾ç‰‡ä¸ºï¼š&#x27; + message.img@robot.linkdef link(message):    return &#x27;æ‚¨å‘é€äº†é“¾æ¥æ¶ˆæ¯ï¼Œé“¾æ¥ä¸ºï¼š&#x27; + message.url@robot.locationdef location(message):    return &#x27;æ‚¨å‘é€äº†ä½ç½®æ¶ˆæ¯ï¼Œä½ç½®ä¸ºï¼š&#x27; + message.label@robot.voicedef voice(message):    return &#x27;æ‚¨å‘é€äº†å£°éŸ³æ¶ˆæ¯ï¼Œmedia_idä¸ºï¼š&#x27; + message.media_id@robot.videodef video(message):    return &#x27;æ‚¨å‘é€äº†è§†é¢‘æ¶ˆæ¯ï¼Œmedia_idä¸ºï¼š&#x27; + message.media_id

æ­¤æ—¶ç»™å…¬ä¼—å·å‘é€ä¸åŒç±»å‹çš„æ¶ˆæ¯ï¼Œè¿”å›çš„å†…å®¹ä¹Ÿæ˜¯ä¸åŒçš„ã€‚
è¿”å›å›¾ç‰‡æ¶ˆæ¯1ã€ç™»å½•å¾®ä¿¡å…¬ä¼—å¹³å°ï¼ŒæŸ¥çœ‹â€œå…¬ä¼—å·å¼€å‘ä¿¡æ¯â€ä¸­çš„â€œå¼€å‘è€…ID(AppID)â€å’Œâ€œå¼€å‘è€…å¯†ç (AppSecret)â€ï¼Œå¹¶è®°å½•ä¸‹æ¥ã€‚
2ã€ä¿®æ”¹ wecms/main/views_wechat.py ï¼Œæ·»åŠ AppIDå’ŒAppSecretçš„é…ç½®ï¼Œæ·»åŠ mediaå‡½æ•°ï¼š
import werobotfrom werobot.replies import ImageReplyrobot = werobot.WeRoBot(token=&#x27;vkwechat&#x27;)robot.config[&#x27;APP_ID&#x27;] = &#x27;app_id&#x27;robot.config[&#x27;APP_SECRET&#x27;] = &#x27;app_secret&#x27;client = robot.client@robot.handlerdef index(message):    return &#x27;Today is wonderful day!&#x27;@robot.filter(&#x27;image&#x27;)def media(message):    media_id = client.upload_permanent_media(&#x27;image&#x27;, open(r&#x27;C:\Users\haojin\Desktop\favicon.png&#x27;, &#x27;rb&#x27;))[&#x27;media_id&#x27;]    reply = ImageReply(message=message, media_id=media_id)    return reply# other code

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œrobot.filter(â€˜imageâ€™)éœ€è¦æ”¾åœ¨robot.textçš„å‰é¢ã€‚å› ä¸ºwerobotæ˜¯é“¾å¼åŒ¹é…çš„ï¼Œå¦‚æœrobot.textåœ¨å‰ï¼ŒåŒ¹é…ä¸Šäº†â€œimageâ€ï¼Œå°±ä¼šè¢«text()å‡½æ•°å¤„ç†ã€‚
2ã€æŸ¥çœ‹æœ¬æœºçš„å‡ºå£IPï¼Œä¿®æ”¹â€œå…¬ä¼—å·å¼€å‘ä¿¡æ¯â€ä¸­çš„â€œIPç™½åå•â€ï¼ŒæŠŠå‡ºå£IPå¡«è¿›å»ã€‚
æ­¤æ—¶ç»™å…¬ä¼—å·å‘é€â€œimageâ€ï¼Œä¼šè¿”å›ä¸€å¼ å›¾ç‰‡ã€‚
äº‹ä»¶å¤„ç†ä»¥è®¢é˜…äº‹ä»¶å’Œå–æ¶ˆäº‹ä»¶ä¸ºä¾‹ï¼Œæ·»åŠ äº‹ä»¶å¤„ç†ï¼š
@robot.subscribedef subscribe(event):    print(&#x27;ç”¨æˆ·&#x27; + event.source + &#x27;å…³æ³¨äº†å…¬ä¼—å·&#x27;)    return &#x27;æ„Ÿè°¢å…³æ³¨voidkingï¼Œæ‚¨çš„IDä¸ºï¼š&#x27; + event.source@robot.unsubscribedef unsubscribe(event):    print(&#x27;ç”¨æˆ·&#x27; + event.source + &#x27;å–æ¶ˆäº†å…³æ³¨&#x27;)    return &#x27;&#x27;
æ­¤æ—¶å…³æ³¨å…¬ä¼—å·ï¼Œä¼šæ”¶åˆ°è‡ªå·±çš„OpenIDã€‚
é…ç½®æ–‡ä»¶å‰é¢çš„å¼€å‘ä¸­ï¼Œç”¨åˆ°äº†tokenã€APP_IDå’ŒAPP_SECRETã€‚è¿™äº›ä¿¡æ¯åº”è¯¥å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯ä»£ç ä¸­ï¼Œå› æ­¤éœ€è¦è°ƒæ•´ã€‚
1ã€ç¼–è¾‘ wecms/wecms/settings.pyï¼Œæ·»åŠ ï¼š
# Wechat ConfigTOKEN = &#x27;vkwechat&#x27;APP_ID = &#x27;app_id&#x27;APP_SECRET = &#x27;app_secret&#x27;

2ã€ç¼–è¾‘ wecms/main/views_wechat.py ï¼Œä¿®æ”¹ä¸ºï¼š
from django.conf import settingsimport werobotfrom werobot.replies import ImageReplyrobot = werobot.WeRoBot(token=settings.TOKEN)robot.config[&#x27;APP_ID&#x27;] = settings.APP_IDrobot.config[&#x27;APP_SECRET&#x27;] = settings.APP_SECRETclient = robot.client# other code

æºç åˆ†äº«https://github.com/voidking/wecms/releases/tag/v0.1.0
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>django</tag>
        <tag>å¾®ä¿¡å…¬ä¼—å¹³å°</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoå¼€å‘å¾®ä¿¡å…¬ä¼—å¹³å°ç®¡ç†ç³»ç»Ÿâ€”â€”å‘å¸ƒç¯‡</title>
    <url>/dev-django-wechat-deploy/</url>
    <content><![CDATA[å‰è¨€ã€ŠDjangoå¼€å‘å¾®ä¿¡å…¬ä¼—å¹³å°ç®¡ç†ç³»ç»Ÿâ€”â€”ç¬¬0ç« ã€‹ä¸€æ–‡ä¸­å®Œæˆäº†wecmsé¡¹ç›®åˆå§‹æ¡†æ¶çš„æ­å»ºï¼Œå¹¶ä¸”ç»‘å®šäº†å¾®ä¿¡å…¬ä¼—å·ï¼Œå®ç°äº†å›å¤ç”¨æˆ·çš„ä»»æ„æ¶ˆæ¯ã€‚ä½†æ˜¯ï¼Œwecmsé¡¹ç›®æ˜¯è¿è¡Œåœ¨æœ¬åœ°çš„ï¼Œå…³æœºåæœåŠ¡å°±ä¸å¯ç”¨äº†ï¼Œå› æ­¤éœ€è¦æŠŠé¡¹ç›®éƒ¨ç½²åˆ°çº¿ä¸Šã€‚æœ¬æ–‡ä¸­ä¼šä½¿ç”¨dockeræ­å»ºdjangoç¯å¢ƒï¼Œå¹¶ä¸”éƒ¨ç½²wecmsé¡¹ç›®ã€‚


å®‰è£…django1ã€ç™»å½•dockerhubæŸ¥çœ‹éœ€è¦çš„Django - Docker Official Imagesã€‚wecmsä¾èµ–django2.1.7ï¼Œä½†æ˜¯æ²¡æœ‰å¯¹åº”ç‰ˆæœ¬ï¼Œå› æ­¤éœ€è¦é‡‡ç”¨Plan Bï¼Œè‡ªå·±å®‰è£…Djangoã€‚
2ã€ç™»å½•dockerhubæŸ¥çœ‹éœ€è¦çš„Python - Docker Official Imagesã€‚
3ã€ä¸‹è½½pythoné•œåƒï¼ˆwecmsä¾èµ–python3.6.3ï¼‰docker pull python:3.6.3
4ã€å¯¼å‡ºæœ¬åœ°ä¾èµ–ä¿¡æ¯
pip freeze &gt; requirements.txt
å¯¼å‡ºåæŠŠrequirements.txtä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚
5ã€ç¼–å†™Dockerfileå®‰è£…django2.1.7ï¼ŒæŒ‡å®šå·¥ä½œç›®å½•ï¼Œæ·»åŠ å¯åŠ¨å‘½ä»¤
FROM python:3.6.3COPY requirements.txt /tmpRUN pip install --no-cache-dir -i https://pypi.doubanio.com/simple/ -r /tmp/requirements.txtWORKDIR /opt/wecmsEXPOSE 8000CMD [&quot;python&quot;, &quot;manage.py&quot;, &quot;runserver&quot;, &quot;0.0.0.0:8000&quot;]

6ã€ç”Ÿæˆwecmsé•œåƒå¹¶ä¸Šä¼ 
docker build -t voidking/wecms:v1.0 .docker logindocker push voidking/wecms:v1.0

7ã€ä¸‹è½½é¡¹ç›®æºç 
cd /optgit clone https://github.com/voidking/wecms.gitcd wecmsgit checkout v0.0.0

8ã€å¯åŠ¨wecmsæœåŠ¡
docker run --name vk-wecms -d \-p 8000:8000 \-v /opt/wecms:/opt/wecms \voidking/wecms:v1.0

ä»¥ä¸Šå‘½ä»¤ï¼š

å‘½åå®¹å™¨ä¸ºvk-wecmsï¼Œåå°è¿è¡Œ
æ˜ å°„å®¿ä¸»æœº8000ç«¯å£åˆ°å®¹å™¨çš„8000ç«¯å£
æŒ‚è½½å®¿ä¸»æœºç›®å½•/opt/wecmsåˆ°å®¹å™¨ç›®å½•/opt/wecms

æ›´å¤šå¯åŠ¨å‘½ä»¤å‚æ•°å¯ä»¥å‚è€ƒpython - How to use this imageå’Œdjango - How to use this imageã€‚
9ã€éªŒè¯å®‰è£…docker psï¼Œnginxå¯åŠ¨æ­£å¸¸çš„è¯å°±å¯ä»¥çœ‹åˆ°vk-wecmså®¹å™¨ã€‚curl localhost:8000ï¼Œå¯ä»¥çœ‹åˆ°welcome to wecms!
æµè§ˆå™¨è®¿é—® http://hostip:8000/ ï¼Œæç¤ºYou may need to add â€˜hostipâ€™ to ALLOWED_HOSTS.å› æ­¤ä¿®æ”¹ wecms/wecms/settings.py ï¼Œæ·»åŠ ï¼š
ALLOWED_HOSTS = [&#x27;*&#x27;]
ä¿®æ”¹åçš„tagä¸ºv0.0.1ã€‚
å®‰è£…mysqlå½“å‰é¡¹ç›®è¿˜æ²¡æœ‰ä½¿ç”¨åˆ°æ•°æ®åº“ï¼Œè€Œä¸”é»˜è®¤ä½¿ç”¨sqlite3ï¼Œä¸è¿‡åæœŸä¼šæ”¹æˆmysqlï¼Œæ‰€ä»¥è¿™é‡Œåšä¸ªé“ºå«ã€‚mysqlå®‰è£…é…ç½®å‚è€ƒã€Šä½¿ç”¨Dockerå®‰è£…é…ç½®Mysqlã€‹ã€‚
åŸŸåé…ç½®åŸŸåè§£ædnspodæ·»åŠ Aè®°å½•ï¼Œwecmsè®°å½•å€¼è§£æåˆ°hostipã€‚
é…ç½®Nginxåˆ›å»º /etc/nginx/conf.d/wecms.voidking.com.conf ï¼Œå†…å®¹ä¸ºï¼š
server &#123;    server_name wecms.voidking.com;     listen 80;    location / &#123;        proxy_set_header Host $host;        proxy_set_header X-Forward-For $remote_addr;        proxy_set_header X-Real-IP $remote_addr;        proxy_pass http://127.0.0.1:8000;     &#125;&#125;
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>django</tag>
        <tag>å¾®ä¿¡å…¬ä¼—å¹³å°</tag>
        <tag>dokcer</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoå¼€å‘å¾®ä¿¡å…¬ä¼—å¹³å°ç®¡ç†ç³»ç»Ÿâ€”â€”ç¬¬0ç« </title>
    <url>/dev-django-wechat-0/</url>
    <content><![CDATA[å‰è¨€ä¸¤å¹´å‰ï¼Œå­¦ä¹ äº†Djangoçš„å¼€å‘ï¼Œæ•´ç†äº†ä¸€ä¸ªç³»åˆ—çš„æ–‡æ¡£ï¼Œã€ŠDjangoå…¥é—¨ã€‹ã€ã€ŠDjangoå¼€å‘ç®€å•Blogç³»ç»Ÿã€‹ã€ã€ŠDjangoéƒ¨ç½²åˆ°çº¿ä¸Šã€‹ç­‰ã€‚åŠå¹´å‰ï¼Œä½¿ç”¨Djangoå’Œå›¾åƒå¤„ç†æ–¹æ³•å®Œæˆäº†æ¯•ä¸šè®¾è®¡ã€‚
æœ€è¿‘ï¼Œæ‰“ç®—ç©ºé—²æ—¶é—´æ‰“é€ ä¸€ä¸‹è‡ªå·±çš„å¾®ä¿¡å…¬ä¼—å·ï¼Œäºæ˜¯å®‰è£…äº†å¾®æ“ç³»ç»Ÿã€‚ä½†æ˜¯å‘ç°å¾®æ“ç³»ç»Ÿå­˜åœ¨å¾ˆå¤šé—®é¢˜ï¼Œæœ€ä¸èƒ½å¿å—çš„æ˜¯æ·»åŠ è‡ªåŠ¨å›å¤ï¼Œæ·»åŠ å®Œæˆæ²¡æœ‰æŠ¥é”™ï¼Œä½†æ˜¯æ•°æ®åº“æ ¹æœ¬æ²¡æœ‰è®°å½•ï¼æ‰¾å®¢æœï¼Ÿå¯¹ä¸èµ·å’±ä¸æ˜¯ä»˜è´¹ç”¨æˆ·ï¼Œæ²¡äººç»™å’±æœåŠ¡ã€‚çœ‹æ–‡æ¡£ï¼Ÿå¯¹ä¸èµ·æ–‡æ¡£ä¸æ¶‰åŠå’±è¿™ä¸ªå…·ä½“é—®é¢˜ã€‚æ‰¾ç¤¾åŒºï¼Ÿå¯¹ä¸èµ·ç¤¾åŒºä¸æ´»è·ƒï¼Œæ²¡äººé‡åˆ°è¿‡å’±è¿™ä¸ªé—®é¢˜ï¼Œæ— äººè§£ç­”ã€‚å­¦å®Œå¾®æ“æ¡†æ¶è‡ªå·±è§£å†³ï¼Ÿæœ‰è¿™ä¸ªé—²å·¥å¤«ï¼Œå’±å°±è‡ªå·±å†™ä¸€ä¸ªäº†ï¼ã€‚ã€‚ã€‚è¡Œå§ï¼Œæ‹œæ‹œäº†æ‚¨å“ªï¼
æ‰¾äº†ä¸€åœˆï¼Œæ²¡æœ‰æ‰¾åˆ°ç‰¹åˆ«æ»¡æ„çš„å…¶ä»–å¾®ä¿¡å…¬ä¼—å¹³å°ç®¡ç†ç³»ç»Ÿï¼Œé‚£å°±ï¼Œè‡ªå·±å†™ä¸€ä¸ªå§ï¼åŸºäºDjangoå’ŒWeRoBotï¼Œå‚è€ƒæ–‡æ¡£WeRoBotä¸å…¶ä»– Web æ¡†æ¶é›†æˆã€‚


å¼€å‘ç¯å¢ƒå‡†å¤‡1ã€Pythonç‰ˆæœ¬3.6.3
2ã€Djangoç‰ˆæœ¬2.1.7
3ã€PyCharmç‰ˆæœ¬2018.1.4(Community Edition)
4ã€å®‰è£…WeRoBotpip install werobot
åˆ›å»ºé¡¹ç›®é¦–å…ˆç»™é¡¹ç›®èµ·ä¸ªå¥½åå­—å§ï¼Œä¸‡ä¸€ä»¥åç«äº†å‘¢ï¼å°±å«wecmså§ï¼Œæ²¡é”™å°±æ˜¯è¿™ä¹ˆéšæ„ã€‚
1ã€åˆ›å»ºé¡¹ç›®django-admin startproject wecms
2ã€è¿è¡Œwecms
cd wecmspython manage.py runserver# orpython manage.py runserver 0.0.0.0:8080

3ã€æµ‹è¯•è®¿é—®æµè§ˆå™¨è®¿é—® http://localhost:8000/ ï¼Œå³å¯çœ‹åˆ°é¡¹ç›®é¦–é¡µã€‚
åˆ›å»ºåº”ç”¨1ã€åˆ›å»ºåº”ç”¨å‰æœŸæ‰€æœ‰çš„æ¨¡å—éƒ½æ”¾åœ¨ä¸€èµ·ï¼Œä»¥åå†è¿›è¡Œæ‹†åˆ†ä¼˜åŒ–ï¼Œå› æ­¤åˆ›å»ºåº”ç”¨åä¸ºmainã€‚python manage.py startapp main
2ã€æ³¨å†Œåº”ç”¨ç¼–è¾‘ wecms/wecms/settings.pyï¼Œæ·»åŠ ï¼š
# Application definitionINSTALLED_APPS = [    &#x27;django.contrib.admin&#x27;,    &#x27;django.contrib.auth&#x27;,    &#x27;django.contrib.contenttypes&#x27;,    &#x27;django.contrib.sessions&#x27;,    &#x27;django.contrib.messages&#x27;,    &#x27;django.contrib.staticfiles&#x27;,    &#x27;main&#x27;,]

3ã€ç¬¬ä¸€ä¸ªå‡½æ•°ç¼–è¾‘ wecms/main/views.pyï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
from django.shortcuts import renderfrom django.http import HttpResponse# Create your views here.def index(request):    return HttpResponse(&#x27;welcome to wecms!&#x27;)

4ã€æ·»åŠ è·¯ç”±ç¼–è¾‘ wecms/wecms/urls.pyï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
from django.contrib import adminfrom django.urls import path, includeurlpatterns = [    path(&#x27;admin/&#x27;, admin.site.urls),    path(&#x27;&#x27;, include(&#x27;main.urls&#x27;)),    path(&#x27;main/&#x27;, include(&#x27;main.urls&#x27;)),]

åˆ›å»º wecms/main/urls.pyï¼Œå†…å®¹å¦‚ä¸‹ï¼š
from django.urls import pathfrom . import viewsurlpatterns = [    path(&#x27;&#x27;,views.index, name=&#x27;index&#x27;),    path(&#x27;index/&#x27;,views.index, name=&#x27;index&#x27;),]

5ã€å¯åŠ¨æœåŠ¡python manage.py runserver
6ã€æµ‹è¯•è®¿é—®æµè§ˆå™¨è®¿é—®http://127.0.0.1:8000/http://127.0.0.1:8000/main/http://127.0.0.1:8000/main/index/éƒ½å¯ä»¥çœ‹åˆ°welcome to wecms!
å¼•å…¥WeRoBot1ã€åˆ›å»º wecms/main/views_wechat.pyï¼Œå†…å®¹ä¸ºï¼š
import werobotrobot = werobot.WeRoBot(token=&#x27;vkwechat&#x27;)@robot.handlerdef index(message):    return &#x27;Today is wonderful day!&#x27;
æ”¶åˆ°çš„æ‰€æœ‰ä¿¡æ¯è¿”å›Today is wonderful day!
2ã€wecms/main/urls.pyä¿®æ”¹ä¸ºï¼š
from django.urls import pathfrom . import viewsfrom . import views_wechatfrom werobot.contrib.django import make_viewurlpatterns = [    path(&#x27;&#x27;,views.index),    path(&#x27;index/&#x27;,views.index),    path(&#x27;wechat/&#x27;,make_view(views_wechat.robot)),]

æ³¨æ„ï¼Œmake_viewså‡½æ•°ä¸­çš„å‚æ•°å¹¶ä¸æ˜¯å‡½æ•°ï¼Œè€Œæ˜¯robotå¯¹è±¡ã€‚
3ã€æµ‹è¯•è®¿é—®æµè§ˆå™¨è®¿é—® http://127.0.0.1:8000/main/wechat/
å¾®ä¿¡é…ç½®1ã€ä½¿ç”¨å†…ç½‘ç©¿é€ï¼ŒæŠŠæœ¬åœ°8000ç«¯å£ä»£ç†åˆ° wecms-dev.voidking.com åŸŸåã€‚
2ã€æµ‹è¯•è®¿é—®http://wecms-dev.voidking.com/main/wechat/
3ã€é…ç½®å¾®ä¿¡å…¬ä¼—å·ç™»å½•å¾®ä¿¡å…¬ä¼—å¹³å°ï¼Œå¼€å‘ï¼ŒåŸºæœ¬é…ç½®ï¼ŒæœåŠ¡å™¨é…ç½®ï¼Œä¿®æ”¹é…ç½®ã€‚å¡«å…¥URLå’Œä»£ç ä¸­å®šä¹‰çš„Tokenï¼Œéšæœºç”ŸæˆEncodingAESKeyï¼Œæ¶ˆæ¯åŠ è§£å¯†æ–¹å¼é€‰æ‹©æ˜æ–‡ï¼Œæäº¤ã€‚æäº¤æˆåŠŸï¼Œå°±å®Œæˆäº†å¾®ä¿¡å…¬ä¼—å·å’ŒæœåŠ¡å™¨çš„ç»‘å®šã€‚ç”¨æˆ·å‘é€ç»™å¾®ä¿¡å…¬ä¼—å·çš„æ¶ˆæ¯ï¼Œä¼šè½¬å‘ç»™æˆ‘ä»¬çš„æœåŠ¡å™¨ï¼›æœåŠ¡å™¨å¤„ç†å®Œæˆåçš„ä¿¡æ¯è¿”å›ç»™å¾®ä¿¡å…¬ä¼—å·ï¼Œå¾®ä¿¡å…¬ä¼—å·å†æŠŠæ¶ˆæ¯è½¬å‘ç»™ç”¨æˆ·ã€‚
4ã€æµ‹è¯•æ‰«ç å…³æ³¨è‡ªå·±çš„å…¬ä¼—å·ï¼Œç„¶åå‘é€ä»»æ„ä¿¡æ¯ï¼Œçœ‹çœ‹è¿”å›äº†å•¥ï¼ŸToday is wonderful day!
æºç åˆ†äº«https://github.com/voidking/wecms/releases/tag/v0.0.0
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>django</tag>
        <tag>å¾®ä¿¡å…¬ä¼—å¹³å°</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Dockerå®‰è£…é…ç½®Grafana</title>
    <url>/dev-docker-grafana/</url>
    <content><![CDATA[Grafanaç®€ä»‹
Grafana allows you to query, visualize, alert on and understand your metrics no matter where they are stored.

æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨Dockeræ¥å®‰è£…é…ç½®grafanaï¼ˆå·²çŸ¥ä¸»æœºIPä¸º192.168.56.102ï¼‰ï¼Œå¹¶ä¸”æ˜¾ç¤ºprometheusä¸­çš„æ•°æ®ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ã€ŠDockerå…¥é—¨ã€‹
ã€Šä½¿ç”¨Dockerå®‰è£…é…ç½®Prometheusã€‹



å®‰è£…Grafana1ã€ä¸‹è½½grafanaé•œåƒï¼ˆä»¥grafana6.7.4ä¸ºä¾‹ï¼‰
docker pull grafana/grafana:6.7.4

æ›´å¤šç‰ˆæœ¬ï¼Œå¯ä»¥è®¿é—®dockerhub - grafanaè·å–ã€‚
2ã€å¯åŠ¨grafanaæœåŠ¡
docker run --name=vk-grafana -d \    -p 3000:3000 \    grafana/grafana:6.7.4

ä»¥ä¸Šå‘½ä»¤ï¼š

å‘½åå®¹å™¨ä¸ºvk-grafanaï¼Œåå°è¿è¡Œ
æ˜ å°„å®¿ä¸»æœº3000ç«¯å£åˆ°å®¹å™¨3000ç«¯å£

grafanaçš„é…ç½®æ–‡ä»¶ä¸º /etc/grafana/grafana.ini ï¼Œå¯ä»¥è¿›å…¥å®¹å™¨è¿›è¡Œä¿®æ”¹ï¼Œæˆ–è€…æŒ‚å‡ºåˆ°å®¿ä¸»æœºã€‚
æ›´é«˜çº§çš„å¯åŠ¨å‘½ä»¤å‚è€ƒHow to use the containerã€‚
4ã€éªŒè¯å®‰è£…
docker ps
mysqlå¯åŠ¨æ­£å¸¸çš„è¯å°±å¯ä»¥çœ‹åˆ°vk-grafanaå®¹å™¨ã€‚å¦‚æœå¯åŠ¨å¤±è´¥ï¼Œå¯ä»¥ä½¿ç”¨docker logs vk-grafanaæŸ¥çœ‹å¤±è´¥åŸå› å¹¶è¿›è¡Œè§£å†³ã€‚
å¼€æ”¾ç«¯å£firewall-cmd --add-port=3000/tcp --permanentsystemctl reload firewalld# æˆ–è€…systemctl stop firewalld

æµ‹è¯•Grafana1ã€æœ¬æœºæµ‹è¯•
curl localhost:3000

2ã€æµè§ˆå™¨æµ‹è¯•è®¿é—® http://192.168.56.102:3000ç”¨æˆ·åå¯†ç é»˜è®¤éƒ½æ˜¯adminï¼Œç¬¬ä¸€æ¬¡ç™»å½•ä¼šæç¤ºä¿®æ”¹ã€‚
é…ç½®Prometheusæ•°æ®å‡è®¾æˆ‘ä»¬å·²ç»å®‰è£…é…ç½®å¥½äº†prometheusï¼Œå‚è€ƒã€Šä½¿ç”¨Dockerå®‰è£…é…ç½®Prometheusã€‹ã€‚
1ã€æ·»åŠ æ•°æ®èµ„æº
2ã€é…ç½®Prometheusæ•°æ®Nameå¡«å…¥ Prometheus ï¼ŒURLå¡«å…¥ http://192.168.56.102:9090ï¼Œå…¶ä»–ä¸ç”¨å˜ã€‚Save&amp;Testã€‚
3ã€é€‰æ‹©dashboardç‚¹å‡»Dashboardsï¼Œç‚¹å‡»ä¸‰ä¸ªImportï¼Œå¼•å…¥ä¸‰ä¸ªdashboardã€‚
4ã€å¼•å…¥å…¶ä»–dashboardæ¯”å¦‚å¯ä»¥å¡«å…¥URL https://grafana.com/grafana/dashboards/405 ï¼Œç‚¹å‡»Loadï¼Œå°±å¯ä»¥ä¸‹è½½Node Exporterçš„dashboardã€‚é€‰æ‹©Folderï¼Œé€‰æ‹©Prometheusæ•°æ®æºï¼ŒImportã€‚
5ã€æŸ¥çœ‹dashboardå·¦ä¸Šè§’HOMEï¼Œå‡ºç°ä¸‹æ‹‰æ¡†ï¼Œå³å¯é€‰æ‹©dashboardã€‚
Grafanaé—®ç­”æ•°æ®æºå’ŒDashboardé—®ï¼šä¸€ä¸ªprometheusæ•°æ®æºä¸­ï¼Œä¼šåŒ…å«ä¸åŒç±»å‹exporteré‡‡é›†çš„metricsæ•°æ®ï¼Œgrafanaä¸­çš„ä¸€ä¸ªdashboardæ€æ ·çŸ¥é“å“ªäº›æ•°æ®æ˜¯è‡ªå·±åº”è¯¥å±•ç¤ºçš„ï¼Ÿç­”ï¼šå’Œexporteræ— å…³ï¼Œgrafanaåªå…³å¿ƒmetricsï¼Œgrafanaæ ¹æ®æŒ‡æ ‡åç§°å’Œæ ‡ç­¾è¿‡æ»¤è‡ªå·±éœ€è¦çš„æ•°æ®ã€‚
label_valuesé—®ï¼šGrafanaçš„Dashboardä¸­ï¼Œå¯ä»¥åˆ›å»ºVariablesç”¨æ¥ç­›é€‰æ•°æ®ï¼Œå…¶ä¸­Queryç»å¸¸ä½¿ç”¨ label_values ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯Grafanaè‡ªå¸¦çš„ï¼Œè¿˜æ˜¯PromQLè‡ªå¸¦çš„ï¼Ÿç­”ï¼šGrafanaè‡ªå¸¦çš„ï¼ŒPromQLä¸­ç”¨ä¸äº†ã€‚
label_values(node_uname_info, job)è¯¦è§£ï¼š

label_values() å‡½æ•°ç”¨äºä»æŒ‡å®šæŒ‡æ ‡ä¸­æå–æŒ‡å®šæ ‡ç­¾çš„å”¯ä¸€å€¼åˆ—è¡¨ã€‚
node_uname_info æ˜¯ä¸€ä¸ªæŒ‡æ ‡åç§°ï¼Œä»£è¡¨äº†åŒ…å«æœ‰å…³èŠ‚ç‚¹æ“ä½œç³»ç»Ÿå’Œå†…æ ¸çš„ä¿¡æ¯çš„æŒ‡æ ‡ã€‚
job æ˜¯è¦æå–çš„æ ‡ç­¾åç§°ï¼Œè¿™é‡Œè¡¨ç¤ºä½œä¸šæˆ–æœåŠ¡çš„æ ‡è¯†ã€‚

]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>monitoring</category>
      </categories>
      <tags>
        <tag>prometheus</tag>
        <tag>ç›‘æ§</tag>
        <tag>docker</tag>
        <tag>grafana</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Dockerå®‰è£…é…ç½®Prometheus</title>
    <url>/dev-docker-prometheus/</url>
    <content><![CDATA[Prometheusç®€ä»‹
Prometheus is an open-source systems monitoring and alerting toolkit originally built at SoundCloud. Since its inception in 2012, many companies and organizations have adopted Prometheus, and the project has a very active developer and user community. It is now a standalone open source project and maintained independently of any company. To emphasize this, and to clarify the projectâ€™s governance structure, Prometheus joined the Cloud Native Computing Foundation in 2016 as the second hosted project, after Kubernetes.


Prometheusæ˜¯åœ¨SoundCloudçš„åŸºç¡€ä¸Šæ„å»ºçš„å¼€æºç³»ç»Ÿç›‘è§†å’Œè­¦æŠ¥å·¥å…·ã€‚è‡ªä»2012å¹´ä»¥æ¥ï¼Œè®¸å¤šå…¬å¸å’Œç»„ç»‡éƒ½é‡‡ç”¨äº†Prometheusï¼Œè¯¥é¡¹ç›®æ‹¥æœ‰éå¸¸æ´»è·ƒçš„å¼€å‘äººå‘˜å’Œç”¨æˆ·ç¤¾åŒºã€‚ç°åœ¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¼€æºé¡¹ç›®ï¼Œå¹¶ä¸”ç‹¬ç«‹äºä»»ä½•å…¬å¸è¿›è¡Œç»´æŠ¤ã€‚ä¸ºäº†å¼ºè°ƒè¿™ä¸€ç‚¹å¹¶é˜æ˜é¡¹ç›®çš„æ²»ç†ç»“æ„ï¼ŒPrometheusåœ¨2016å¹´åŠ å…¥äº†Cloud Native Computing Foundationï¼Œè¿™æ˜¯ç»§Kubernetesä¹‹åçš„ç¬¬äºŒä¸ªæ‰˜ç®¡é¡¹ç›®ã€‚

Prometheusçš„ä¸»è¦ç‰¹æ€§åŒ…æ‹¬ï¼š

ä¸€ä¸ªåŒ…å«æ—¶é—´åºåˆ—çš„å¤šç»´æ•°æ®æ¨¡å‹ï¼Œç”±æŒ‡æ ‡åç§°å’Œé”®å€¼å¯¹è¿›è¡Œæ ‡è®°
PromQLï¼Œä¸€ç§çµæ´»çš„æŸ¥è¯¢è¯­è¨€
ä¸ä¾èµ–åˆ†å¸ƒå¼å­˜å‚¨ï¼›å•æœåŠ¡å™¨èŠ‚ç‚¹æ˜¯è‡ªæ²»çš„
æ—¶é—´åºåˆ—æ”¶é›†æ˜¯é€šè¿‡HTTPæ‹‰å–æ¨¡å‹å®ç°çš„
æ”¯æŒé€šè¿‡ä¸­é—´ç½‘å…³æ¨é€æ—¶é—´åºåˆ—
é€šè¿‡æœåŠ¡å‘ç°æˆ–é™æ€é…ç½®å‘ç°ç›®æ ‡
æ”¯æŒå¤šç§å›¾å½¢å’Œä»ªè¡¨æ¿

Prometheusç”Ÿæ€ç³»ç»ŸåŒ…å«å¤šä¸ªç»„ä»¶ï¼Œå…¶ä¸­è®¸å¤šæ˜¯å¯é€‰çš„ï¼š

prometheus serverï¼Œè´Ÿè´£æ”¶å–å¹¶å­˜å‚¨æ—¶é—´åºåˆ—æ•°æ®
client librariesï¼Œç”¨äºæ£€æµ‹åº”ç”¨ç¨‹åºä»£ç 
push gatewayï¼Œæ”¯æŒçŸ­æœŸå·¥ä½œ
exportersï¼Œé€‚ç”¨äºç‰¹å®šæœåŠ¡çš„æŒ‡æ ‡æ”¶é›†å™¨ï¼Œå¦‚HAProxyï¼ŒStatsDï¼ŒGraphite
alertmanagerï¼Œå¤„ç†æŠ¥è­¦
å„ç§æ”¯æŒå·¥å…·

æœ¬æ–‡ä¸­ï¼Œä¼šä½¿ç”¨Dockerå®‰è£…é…ç½®Prometheusç”Ÿæ€ç³»ç»Ÿçš„ç»„ä»¶ï¼ˆå·²çŸ¥ä¸»æœºIPä¸º192.168.56.102ï¼‰ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ã€ŠDockerå…¥é—¨ç¯‡ã€‹
Prometheuså®˜æ–¹æ–‡æ¡£
Prometheus - GETTING STARTED
Prometheusä¸‹è½½
Prometheus - CONFIGURATION
Prometheuså®æˆ˜ - Prometheusé…ç½®
Prometheusç›‘æ§ç³»ç»Ÿä¹‹å…¥é—¨ç¯‡



å®‰è£…prometheus server1ã€ä¸‹è½½prometheusé•œåƒï¼ˆä»¥v2.18.0ä¸ºä¾‹ï¼‰
docker pull prom/prometheus:v2.18.0

æ›´å¤šç‰ˆæœ¬é•œåƒï¼Œè®¿é—®dockerhub - prometheusè·å–ã€‚
2ã€å‡†å¤‡é…ç½®æ–‡ä»¶
docker run --rm \    -u root \    --entrypoint cp \    -v /opt:/opt \    prom/prometheus:v2.18.0 \    -rf /etc/prometheus /opt/vim /opt/prometheus/prometheus.yml

prometheus.ymlæ–‡ä»¶å†…å®¹ä¸ºï¼š
global:  scrape_interval: 15s #é»˜è®¤é‡‡é›†ç›‘æ§æ•°æ®æ—¶é—´é—´éš”  external_labels:    monitor: &#x27;my-monitor&#x27;scrape_configs:  #ç›‘æ§å¯¹è±¡è®¾ç½®  - job_name: prometheus #ä»»åŠ¡åç§°    scrape_interval: 5s #æ¯éš”5sè·å–ä¸€æ¬¡ç›‘æ§æ•°æ®    static_configs: #ç›‘æ§å¯¹è±¡åœ°å€      - targets: [&#x27;127.0.0.1:9090&#x27;]  # å°†è‡ªå·±åŠ å…¥åˆ°ç›‘æ§å¯¹è±¡ä¸­

3ã€å¯åŠ¨prometheus
docker run --name=prometheus -d \-p 9090:9090 \-v /opt/prometheus:/etc/prometheus \prom/prometheus:v2.18.0 --config.file=/etc/prometheus/prometheus.yml --web.enable-lifecycle 

å¦‚æœä½¿ç”¨ file_sd_configs ï¼Œé‚£ä¹ˆä¿®æ”¹å¯åŠ¨å‘½ä»¤ä¸ºï¼š
docker run --name=prometheus -d \-p 9090:9090 \-v /opt/prometheus/prometheus.yml:/etc/prometheus/prometheus.yml \-v /opt/prometheus/targets:/etc/prometheus/targets \prom/prometheus:v2.18.0 --config.file=/etc/prometheus/prometheus.yml --web.enable-lifecycle 

4ã€è®¿é—®Prometheusæµè§ˆå™¨è®¿é—® http://192.168.56.102:9090/
5ã€æŸ¥çœ‹targetsæµè§ˆå™¨è®¿é—® http://192.168.56.102:9090/targets/
6ã€æŸ¥çœ‹æŒ‡æ ‡æµè§ˆå™¨è®¿é—® http://192.168.56.102:9090/metrics/
å®‰è£…node exporterå‚è€ƒæ–‡æ¡£ï¼šprometheus/node_exporter
Dockerå®‰è£…node exporter1ã€ä¸‹è½½node-exporteré•œåƒï¼ˆä»¥v1.0.0ä¸ºä¾‹ï¼‰
docker pull prom/node-exporter:v1.0.0

æ›´å¤šç‰ˆæœ¬é•œåƒï¼Œè®¿é—®dockerhub - node exporterè·å–ã€‚
2ã€å¯åŠ¨node exporter
docker run --name=node-exporter -d \  -p 9100:9100 \  --net=&quot;host&quot; \  --pid=&quot;host&quot; \  -v &quot;/:/host:ro,rslave&quot; \  prom/node-exporter:v1.0.0 \  --path.rootfs=/host

3ã€è®¿é—®node exporter
curl http://localhost:9100/metrics

binå®‰è£…node exporterbinå®‰è£…node exporterçš„ä¼˜åŠ¿æ˜¯é€‚ç”¨äºæ‰€æœ‰ä¸»æœºï¼Œä¸ç®¡ä¸»æœºä¸Šæœ‰æ²¡æœ‰å®‰è£…dockerã€‚
1ã€å®‰è£…node exporter
wget https://github.com/prometheus/node_exporter/releases/download/v1.0.0/node_exporter-1.0.0.linux-amd64.tar.gztar -xzvf node_exporter-1.0.0.linux-amd64.tar.gzmv node_exporter-1.0.0.linux-amd64/node_exporter /usr/local/bin

2ã€æµ‹è¯•å¯åŠ¨node exporter
node_exporter

3ã€é…ç½®systemdç®¡ç†
cat &lt;&lt;EOF &gt; /etc/systemd/system/node_exporter.service [Unit]Description=Node Exporter[Service]User=rootExecStart=/usr/local/bin/node_exporterRestart=always[Install]WantedBy=multi-user.targetEOF

4ã€å¯åŠ¨node exporter
systemctl start node_exportersystemctl status node_exportersystemctl enable node_exporter

5ã€è®¿é—®node exporter
curl http://localhost:9100/metrics

promserveræ”¶é›†exporteræ•°æ®1ã€ä¿®æ”¹prometheus.yml
global:  scrape_interval: 15s #é»˜è®¤é‡‡é›†ç›‘æ§æ•°æ®æ—¶é—´é—´éš”  external_labels:    monitor: &#x27;my-monitor&#x27;scrape_configs:  #ç›‘æ§å¯¹è±¡è®¾ç½®  - job_name: prometheus #ä»»åŠ¡åç§°    scrape_interval: 5s #æ¯éš”5sè·å–ä¸€æ¬¡ç›‘æ§æ•°æ®    static_configs: #ç›‘æ§å¯¹è±¡åœ°å€      - targets: [&#x27;127.0.0.1:9090&#x27;]  # å°†è‡ªå·±åŠ å…¥åˆ°ç›‘æ§å¯¹è±¡ä¸­      - targets: [&#x27;192.168.56.102:9100&#x27;]        labels:          group: &#x27;client-node-exporter&#x27;

2ã€é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶
curl -X POST http://localhost:9090/-/reload
ç„¶è€Œé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶å¹¶ä¸ç”Ÿæ•ˆï¼Œæœ€åé‡å¯äº†prometheusæ‰ç”Ÿæ•ˆã€‚
3ã€æŸ¥çœ‹targetsæµè§ˆå™¨è®¿é—® http://192.168.56.102:9090/targets/
push gatewayPrometheusé‡‡é›†æ•°æ®æ˜¯ç”¨çš„pullæ–¹å¼ï¼Œprometheusé…ç½®æ–‡ä»¶è®¾ç½®çš„5ç§’å°±æ˜¯é‡‡é›†æ•°æ®çš„é¢‘ç‡ã€‚ä½†æ˜¯æœ‰äº›æ•°æ®å¹¶ä¸é€‚åˆé‡‡ç”¨è¿™æ ·çš„æ–¹å¼ï¼Œå¯¹è¿™æ ·çš„æ•°æ®å¯ä»¥ä½¿ç”¨Push GatewayæœåŠ¡ã€‚PushGatewayæ¯”è¾ƒé€‚åˆä¸´æ—¶ä½œä¸šå’Œæ‰¹å¤„ç†ä½œä¸šï¼Œç”±äºè¿™äº›ä½œä¸šæ˜¯short-livedçš„ï¼Œå¦‚æœé‡‡ç”¨pullçš„æ¨¡å¼ï¼Œå¯èƒ½åœ¨prometheusé‡‡é›†ä¹‹å‰ï¼Œä½œä¸šå·²ç»æ‰§è¡Œç»“æŸã€‚pushgatewayç›¸å½“äºä¸€ä¸ªæš‚å­˜å™¨ï¼Œè¿™äº›ä¸´æ—¶ä½œä¸šå°†metricsæ•°æ®ç¼“å­˜åˆ°pushgatewayä¸­ï¼Œç„¶åç­‰å¾…Prometheusæ¥pullæ•°æ®ã€‚
1ã€ç™»å½•dockerhubæŸ¥çœ‹éœ€è¦çš„pushgatewayã€‚
2ã€ä¸‹è½½pushgatewayé•œåƒï¼ˆä»¥v1.1.0ä¸ºä¾‹ï¼‰
docker pull prom/pushgateway:v1.1.0

3ã€å¯åŠ¨push gateway
docker run --name=pushgateway -d \-p 9091:9091 \prom/pushgateway:v1.1.0

4ã€æµ‹è¯•æœåŠ¡æµè§ˆå™¨è®¿é—® http://192.168.56.102:9091/#
5ã€æ¨é€æ•°æ®ç»™push gateway
echo &quot;exam_metric 100&quot; | curl --data-binary @- http://127.0.0.1:9091/metrics/job/examcat &lt;&lt;EOF | curl --data-binary @- http://127.0.0.1:9091/metrics/job/exam/instance/testchinese 120math 150english 140EOF


promserveræ”¶é›†pushgatewayæ•°æ®1ã€ä¿®æ”¹prometheus.ymlæ–‡ä»¶
global:  scrape_interval: 15s #é»˜è®¤é‡‡é›†ç›‘æ§æ•°æ®æ—¶é—´é—´éš”  external_labels:    monitor: &#x27;my-monitor&#x27;scrape_configs:  #ç›‘æ§å¯¹è±¡è®¾ç½®  - job_name: prometheus #ä»»åŠ¡åç§°    scrape_interval: 5s #æ¯éš”5sè·å–ä¸€æ¬¡ç›‘æ§æ•°æ®    static_configs: #ç›‘æ§å¯¹è±¡åœ°å€      - targets: [&#x27;127.0.0.1:9090&#x27;]  # å°†è‡ªå·±åŠ å…¥åˆ°ç›‘æ§å¯¹è±¡ä¸­      - targets: [&#x27;192.168.56.102:9100&#x27;]        labels:          group: &#x27;client-node-exporter&#x27;      - targets: [&#x27;192.168.56.102:9091&#x27;]        labels:          group: &#x27;pushgateway&#x27;

2ã€é‡æ–°åŠ è½½é…ç½®æˆ–è€…é‡å¯promserver
3ã€åœ¨promserveræŸ¥çœ‹æ•°æ®
alertmanager1ã€ç™»å½•dockerhubæŸ¥çœ‹éœ€è¦çš„alertmanagerã€‚
2ã€ä¸‹è½½alertmanageré•œåƒï¼ˆä»¥v0.15.0ä¸ºä¾‹ï¼‰
docker pull prom/alertmanager:v0.15.0

é«˜ç‰ˆæœ¬æ¯”å¦‚v0.20.0æ‰“å¼€é¡µé¢åä¼šæŠ¥é”™ï¼ŒUncaught TypeError: Cannot read property â€˜elmFsâ€™ of undefined
3ã€åˆ›å»ºé…ç½®æ–‡ä»¶
mkdir -p /opt/alertmanager/vim /opt/alertmanager/alertmanager.yml

alertmanager.ymlå†…å®¹ä¸ºï¼š
global:  resolve_timeout: 5mroute:  group_by: [&#x27;exam&#x27;]  #ä¸prometheuså‘Šè­¦è§„åˆ™é…ç½®çš„groupnameå¯¹åº”  group_wait: 10s #æŠ¥è­¦ç­‰å¾…æ—¶é—´  group_interval: 10s #æŠ¥è­¦é—´éš”æ—¶é—´  repeat_interval: 1m #é‡å¤æŠ¥è­¦é—´éš”æ—¶é—´  receiver: &#x27;web.hook&#x27; #å‘Šè­¦å¤„ç†æ–¹å¼ï¼Œæˆ‘ä»¬è¿™é‡Œé€šè¿‡web.hookæ–¹å¼ï¼Œä¹Ÿå¯ä»¥é…ç½®æˆé‚®ä»¶ç­‰æ–¹å¼receivers:  - name: &#x27;web.hook&#x27;    webhook_configs:      - url: &#x27;http://192.168.56.102:8080/exam/test&#x27; #å‘Šè­¦webhookåœ°å€ï¼Œå‘Šè­¦ä¿¡æ¯ä¼špoståˆ°è¯¥åœ°å€ï¼Œéœ€è¦ç¼–å†™æœåŠ¡æ¥æ”¶è¯¥å‘Šè­¦æ•°æ®inhibit_rules:  - source_match:      severity: &#x27;critical&#x27;    target_match:      severity: &#x27;warning&#x27; #ç›®æ ‡å‘Šè­¦çŠ¶æ€    equal: [&#x27;alertname&#x27;, &#x27;dev&#x27;, &#x27;instance&#x27;]

4ã€å¯åŠ¨alertmanager
docker run --name=alertmanager -d \-p 9093:9093 \-v /opt/alertmanager/alertmanager.yml:/etc/alertmanager/alertmanager.yml \prom/alertmanager:v0.15.0 --config.file=/etc/alertmanager/alertmanager.yml --storage.path=/alertmanager

5ã€æµ‹è¯•æœåŠ¡æµè§ˆå™¨è®¿é—® http://192.168.56.102:9093/
å‘Šè­¦é…ç½®1ã€è®¾ç½®æŠ¥è­¦è§„åˆ™
mkdir -p /opt/prometheus/rules/vim /opt/prometheus/rules/exam.rules

exam.ruleså†…å®¹ä¸º
groups:  - name: exam    rules:      - alert: examå‘Šè­¦æµ‹è¯•        expr: chinese &gt; 100 #è¯­æ–‡æˆç»©å¤§äº100å‘Šè­¦ï¼Œæ³¨ï¼šæˆ‘ä»¬åœ¨pushgatewayæ¨é€æ•°æ®çš„æ—¶å€™ï¼Œè®¾ç½®çš„æ˜¯120ï¼Œå› æ­¤ä¼šè§¦å‘å‘Šè­¦        for: 1m        labels:          status: warning        annotations:          summary: &quot;&#123;&#123;$labels.instance&#125;&#125;:è¯­æ–‡æˆç»©ä¼˜ç§€! nbäº†!!!&quot;          description: &quot;&#123;&#123;$labels.instance&#125;&#125;: è¯­æ–‡æˆç»©ä¼˜ç§€! nbnbnb!!!&quot;

2ã€ç¼–è¾‘prometheus.ymlé…ç½®æ–‡ä»¶ï¼Œæ·»åŠ alertmanageré…ç½®å’ŒæŠ¥è­¦è§„åˆ™é…ç½®
global:  scrape_interval: 15s #é»˜è®¤é‡‡é›†ç›‘æ§æ•°æ®æ—¶é—´é—´éš”  external_labels:    monitor: &#x27;my-monitor&#x27;scrape_configs:  #ç›‘æ§å¯¹è±¡è®¾ç½®  - job_name: prometheus #ä»»åŠ¡åç§°    scrape_interval: 5s #æ¯éš”5sè·å–ä¸€æ¬¡ç›‘æ§æ•°æ®    static_configs: #ç›‘æ§å¯¹è±¡åœ°å€      - targets: [&#x27;127.0.0.1:9090&#x27;]  # å°†è‡ªå·±åŠ å…¥åˆ°ç›‘æ§å¯¹è±¡ä¸­      - targets: [&#x27;192.168.56.102:9100&#x27;]        labels:          group: &#x27;client-node-exporter&#x27;      - targets: [&#x27;192.168.56.102:9091&#x27;]        labels:          group: &#x27;pushgateway&#x27;alerting:   #å‘Šè­¦ç®¡ç†å™¨è®¾ç½®  alertmanagers:    - static_configs:      - targets: [&#x27;192.168.56.102:9093&#x27;] #å‘Šè­¦ä¿¡æ¯ä¼šå‘é€ç»™alertmanagerè¿›ä¸€æ­¥å¤„ç†rule_files:  - /etc/prometheus/rules/*.rules   #å‘Šè­¦è§„åˆ™æ–‡ä»¶è·¯å¾„ï¼Œå¯¹åº”å®¿ä¸»æœº /opt/prometheus/rules/*.rules

3ã€é‡æ–°åŠ è½½é…ç½®æˆ–è€…é‡å¯promserver
4ã€åœ¨prometheus alertsé¡µé¢æŸ¥çœ‹å‘Šè­¦
æˆ–è€…åœ¨alertmanager alertsé¡µé¢æŸ¥çœ‹å‘Šè­¦
å‘Šè­¦é€šçŸ¥å¤„ç†alertmanager.ymlæ–‡ä»¶ä¸­é…ç½®çš„å‘Šè­¦æ–¹å¼æ˜¯webhookï¼Œå‘Šè­¦å‘é€åˆ° http://192.168.56.102:8080/exam/test ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæœåŠ¡æ¥æ¥æ”¶å¤„ç†è¿™ä¸ªå‘Šè­¦ã€‚
1ã€å®‰è£…golangç¯å¢ƒï¼Œå‚è€ƒã€ŠCentOS7éƒ¨ç½²beegoé¡¹ç›®ã€‹golangå®‰è£…ä¸€èŠ‚
2ã€åˆ›å»ºmain.go
package mainimport (  &quot;fmt&quot;  &quot;io/ioutil&quot;  &quot;github.com/gin-gonic/gin&quot;)func main() &#123;  r := gin.Default()  r.POST(&quot;/exam/test&quot;, func(c *gin.Context) &#123;    res, _ := ioutil.ReadAll(c.Request.Body)    fmt.Println(string(res)) //è¿™é‡Œæˆ‘ä»¬åªç®€å•æ‰“å°å‘Šè­¦ä¿¡æ¯    c.JSON(200, gin.H&#123;      &quot;message&quot;: &quot;alert message&quot;,    &#125;)  &#125;)  r.Run(&quot;:8080&quot;)&#125;

3ã€è¿è¡Œä»£ç 
go get github.com/gin-gonic/gingo run main.go
å¦‚ä¸Šå›¾ï¼ŒæœåŠ¡æ¥æ”¶åˆ°äº†å‘Šè­¦ä¿¡æ¯ã€‚
grafanagrafanaå¸¸è¢«ç”¨æ¥å±•ç¤ºprometheusçš„æ•°æ®ï¼Œè¯¦æƒ…å‚è€ƒã€Šä½¿ç”¨Dockerå®‰è£…é…ç½®Grafanaã€‹ã€‚
PrometheusæœåŠ¡å‘ç°å‚è€ƒæ–‡æ¡£ï¼š

prometheusæœåŠ¡å‘ç°
Prometheus - Configuration file
æ·±å…¥æµ…å‡ºprometheusä¹‹æœåŠ¡å‘ç°(sd)
Prometheusç›‘æ§ç¥å™¨-æœåŠ¡å‘ç°ç¯‡ï¼ˆä¸€ï¼‰

static_configsé™æ€æœåŠ¡å‘ç°ï¼ŒåŸºäºPrometheusé…ç½®æ–‡ä»¶æŒ‡å®šç›‘æ§ç›®æ ‡ã€‚
ç¤ºä¾‹å‚è€ƒä¸Šæ–‡ã€å®‰è£…Prometheus serverã€‘ä¸€èŠ‚ã€‚
file_sd_configsåŠ¨æ€æœåŠ¡å‘ç°ï¼ŒåŸºäºæŒ‡å®šçš„æ–‡ä»¶å‘ç°ç›‘æ§ç›®æ ‡ï¼ŒPrometheuså®šæœŸè¯»å–æŒ‡å®šæ–‡ä»¶ä¸­çš„å†…å®¹å¹¶æ›´æ–°ç›‘æ§ç›®æ ‡ã€‚
ç¤ºä¾‹ï¼šscrape_configsé…ç½®ä¸ºï¼š
scrape_configs:  - job_name: &#x27;file_sd_targets&#x27;    file_sd_configs:      - files:          - &#x27;/path/to/targets.yaml&#x27;

targets.yaml å†…å®¹ä¸ºï¼š
- targets:    - localhost:9090  labels:    job: prometheus- targets:    - localhost:9100  labels:    job: node_exporter- targets:    - localhost:8080  labels:    job: my_app

PSï¼štargets.yaml å¯ä»¥æ”¹æˆ json æ ¼å¼ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼ŒPrometheusæ¯éš”15ç§’ä¼šé‡æ–°è¯»å–ä¸€æ¬¡é…ç½®æ–‡ä»¶ï¼Œå› æ­¤ä¿®æ”¹äº†targets.yamlåï¼Œä¸éœ€è¦é‡æ–°Prometheusã€‚
kubernetes_sd_configsåŠ¨æ€æœåŠ¡å‘ç°ï¼ŒåŸºäº Kubernetes APIå‘ç°ç›‘æ§ç›®æ ‡ï¼ŒPrometheus Operatoré€šè¿‡ServiceMonitorèµ„æºè‡ªåŠ¨å‘ç°è¿è¡Œåœ¨é›†ç¾¤ä¸­çš„æœåŠ¡ï¼Œå¹¶æ ¹æ®å®šä¹‰çš„æ ‡ç­¾é€‰æ‹©å™¨å°†å®ƒä»¬åŠ å…¥ç›‘æ§ç›®æ ‡åˆ—è¡¨ã€‚
dns_sd_configsåŠ¨æ€æœåŠ¡å‘ç°ï¼ŒåŸºäºDNSå‘ç°ç›‘æ§ç›®æ ‡ã€‚åŸºäºDNSçš„æœåŠ¡å‘ç°ï¼Œæœ‰ä¸¤ç§é…ç½®æ–¹æ³•ï¼Œç¬¬ä¸€ç§æ˜¯ä½¿ç”¨DNA Aè®°å½•æ¥åšè‡ªåŠ¨å‘ç°ï¼Œç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨DNS SRVè®°å½•æ¥åšæœåŠ¡å‘ç°ã€‚
ä½¿ç”¨DNA Aè®°å½•æ¥åšæœåŠ¡å‘ç°ï¼Œå…¶å®å’ŒåŸºäºæŒ‡å®šæ–‡ä»¶çš„æœåŠ¡å‘ç°å¹¶æ²¡æœ‰å¤ªå¤§å·®åˆ«ã€‚ä½¿ç”¨DNS SRVè®°å½•æ¥åšæœåŠ¡å‘ç°ï¼Œç›‘æ§ç›®æ ‡çš„é…ç½®å°±ä»Prometheusè½¬ç§»åˆ°äº†DNSã€‚
consul_sd_configsåŠ¨æ€æœåŠ¡å‘ç°ï¼ŒåŸºäºConsulè¿™ä¸ªæœåŠ¡æ³¨å†Œä¸å‘ç°å·¥å…·å‘ç°ç›‘æ§ç›®æ ‡ã€‚
åè®°ä»¥ä¸Šï¼Œé…ç½®å®Œæˆäº†promserverã€exporterã€pushgatewayã€alertmanagerï¼Œè·‘é€šäº†æ•°æ®çš„æ”¶é›†å’Œæ˜¾ç¤ºï¼Œæµ‹è¯•äº†å‘Šè­¦ä¿¡æ¯çš„æ”¶é›†ã€‚ä½†æ˜¯ï¼ŒPrometheusä¹Ÿæœ‰ä¸å°‘é—®é¢˜ï¼Œæ¯”å¦‚æ•°æ®é‡å¤§çš„æ—¶å€™éœ€è¦æ‹†åˆ†é›†ç¾¤ï¼Œèšåˆæ•°æ®å¾ˆéš¾æ•°æ®å»é‡ï¼Œå¯ç”¨æ€§è¾ƒä½ç­‰ã€‚å› æ­¤å‡ºç°äº†Thanosï¼Œèƒ½å¤Ÿè§£å†³Prometheusçš„å¾ˆå¤šé—®é¢˜ï¼Œè¯¦æƒ…å‚è€ƒ Thanoså®˜ç½‘ å’Œ åˆ†å¸ƒå¼ Promethues ä¹‹ Thanosã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>monitoring</category>
      </categories>
      <tags>
        <tag>prometheus</tag>
        <tag>ç›‘æ§</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockerä¸­ä½¿ç”¨å®šæ—¶ä»»åŠ¡</title>
    <url>/dev-docker-crontab/</url>
    <content><![CDATA[å‰è¨€ã€ŠLinuxè®¾ç½®å®šæ—¶ä»»åŠ¡ã€‹ä¸€æ–‡ä¸­å­¦ä¹ äº†crontabçš„ä½¿ç”¨æ–¹æ³•ï¼Œä½†æ˜¯åŒæ ·çš„é…ç½®æ–¹æ³•ï¼Œåœ¨Dockerä¸­æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚å› ä¸ºDockerä¸­é»˜è®¤åªä¼šå¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ï¼Œcrondå¹¶ä¸ä¼šå¯åŠ¨ã€‚æœ¬æ–‡ç ”ç©¶ä¸€ä¸‹åœ¨Dockerä¸­é…ç½®å®šæ—¶ä»»åŠ¡çš„æ–¹æ³•ï¼Œè¸©è¸©å‘ã€‚


å¯åŠ¨crondè¦æƒ³åœ¨å®¹å™¨ä¸­ä½¿ç”¨å®šæ—¶ä»»åŠ¡ï¼Œæœ‰ä¸‰ä¸ªåŠæ³•ï¼š

æŠŠcrondä½œä¸ºä¸€å·è¿›ç¨‹å¯åŠ¨ã€‚
supervisorä½œä¸ºä¸€å·è¿›ç¨‹å¯åŠ¨ï¼Œä½¿ç”¨supervisorå¯åŠ¨crondã€‚
è¿›å…¥å®¹å™¨æ‰‹åŠ¨å¯åŠ¨crondã€‚

æœ¬æ–‡ä½¿ç”¨ç¬¬ä¸€ä¸ªæ–¹æ³•å¯åŠ¨crondï¼Œå¯åŠ¨å‘½ä»¤ä¸ºï¼š
docker run --name vkcrond -d -it voidking/crond:v1.0 &quot;/bin/bash&quot; &quot;-c&quot; &quot;/usr/sbin/crond &gt; start.log &amp;&amp; tail -f start.log&quot;

crondæ—¥å¿—1ã€æŸ¥çœ‹crondæ—¥å¿—tail /var/log/cronæŠ¥é”™æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œè¿™æ˜¯å› ä¸ºæ²¡æœ‰æ‰“å¼€rsyslogã€‚
2ã€æ‰“å¼€rsyslog
# centos/etc/init.d/rsyslog start# centos7systemctl restart rsyslog.service# centos6service rsyslog restart

å†æ¬¡æŸ¥çœ‹ï¼Œcrondæ—¥å¿—æ–‡ä»¶å°±å­˜åœ¨äº†ã€‚
ä½¿ç”¨crondcrondå¯åŠ¨åï¼Œå…¶ä»–çš„é…ç½®å‚è€ƒã€ŠLinuxè®¾ç½®å®šæ—¶ä»»åŠ¡ã€‹å³å¯ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>crontab</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Dockerå®‰è£…é…ç½®Tomcat</title>
    <url>/dev-docker-tomcat/</url>
    <content><![CDATA[å‰è¨€ã€ŠCentOS7è®¾ç½®tomcatå¼€æœºè‡ªå¯åŠ¨ã€‹ä¸€æ–‡ä¸­ï¼Œå­¦ä¹ äº†å¸¸è§„çš„tomcatå®‰è£…é…ç½®æ–¹æ³•ï¼›ã€ŠDockerå®‰è£…tomcatæœåŠ¡ã€‹ä¸€æ–‡ä¸­ï¼Œå­¦ä¹ äº†åœ¨Dockerå®¹å™¨ä¸­å®‰è£…é…ç½®tomcatçš„æ–¹æ³•ï¼›ã€ŠDockerfileæ„å»ºTomcatã€‹ä¸€æ–‡ä¸­ï¼Œå­¦ä¹ äº†ä½¿ç”¨Dockerfileå®‰è£…é…ç½®tomcatçš„æ–¹æ³•ã€‚æœ¬æ–‡æ˜¯å¯¹å‰ä¸‰ç§æ–¹æ³•çš„å‡çº§ï¼Œæ›´åŠ ç®€å•ã€‚ä¸éœ€è¦è‡ªå·±åˆ¶ä½œtomcaté•œåƒï¼Œè€Œæ˜¯ä½¿ç”¨dockerhubæä¾›çš„tomcaté•œåƒã€‚
å‰ç½®æ¡ä»¶æ˜¯å®‰è£…é…ç½®å¥½äº†dockerç¯å¢ƒï¼Œå®‰è£…æ–¹æ³•å‚è€ƒã€ŠDockerå…¥é—¨ã€‹ã€‚å·²çŸ¥dockerå®¿ä¸»æœºIPä¸º192.168.56.130ã€‚


å®‰è£…Tomcatå®‰è£…Tomcat1ã€ç™»å½•dockerhubæŸ¥çœ‹éœ€è¦çš„tomcatç‰ˆæœ¬ã€‚
2ã€ä¸‹è½½tomcaté•œåƒï¼ˆä»¥tomcat8.5.51ä¸ºä¾‹ï¼‰docker pull tomcat:8.5.51-jdk8-openjdk
3ã€å¯åŠ¨tomcatæœåŠ¡
docker run --name vk-tomcat -d \-p 8080:8080 \-v /opt/tomcat/webapps:/usr/local/tomcat/webapps \tomcat:8.5.51-jdk8-openjdk

ä»¥ä¸Šå‘½ä»¤ï¼š

å‘½åå®¹å™¨ä¸ºvk-tomcatï¼Œåå°è¿è¡Œ
æ˜ å°„å®¿ä¸»æœº8080ç«¯å£åˆ°å®¹å™¨8080ç«¯å£
æ˜ å°„å®¿ä¸»æœº/opt/tomcat/webappsç›®å½•ï¼ˆä¸éœ€è¦æå‰åˆ›å»ºç›®å½•ï¼‰åˆ°å®¹å™¨/usr/local/tomcat/webappsç›®å½•

æ›´é«˜çº§çš„å¯åŠ¨å‘½ä»¤å‚è€ƒHow to use this imageã€‚
4ã€éªŒè¯å®‰è£…docker pstomcatå¯åŠ¨æ­£å¸¸çš„è¯å°±å¯ä»¥çœ‹åˆ°vk-tomcatå®¹å™¨ã€‚å¦‚æœå¯åŠ¨å¤±è´¥ï¼Œå¯ä»¥ä½¿ç”¨docker logs vk-tomcatæŸ¥çœ‹å¤±è´¥åŸå› å¹¶è¿›è¡Œè§£å†³ã€‚
ä½¿ç”¨ncå‘½ä»¤éªŒè¯ï¼š
yum install ncnc -v localhost 8080

ä½¿ç”¨curlå‘½ä»¤éªŒè¯ï¼šcurl localhost:8080
å¼€æ”¾ç«¯å£firewall-cmd --add-port=8080/tcp --permanentsystemctl reload firewalld# æˆ–è€…systemctl stop firewalld

]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>JVMå‚æ•°è®¾ç½®è§„èŒƒæè¿°</title>
    <url>/dev-jvm-params/</url>
    <content><![CDATA[é…ç½®æ¨¡æ¿-Xms2304m -Xmx2304m -XX:NewRatio=2 -XX:G1HeapRegionSize=8m -XX:MetaspaceSize=256m -XX:MaxMetaspaceSize=256m -XX:MaxTenuringThreshold=10 -XX:+UseG1GC -XX:InitiatingHeapOccupancyPercent=45 -XX:MaxGCPauseMillis=200 -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintReferenceGC -XX:+PrintAdaptiveSizePolicy -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=6 -XX:GCLogFileSize=32m -Xloggc:logs/gc.log.$(date +%Y%m%d%H%M) -Dfile.encoding=UTF-8 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=9999 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false
1ï¼‰æ— è®ºå¦‚ä½•å‚æ•°ä¸­-XX:MaxMetaspaceSize=256mï¼Œæ­¤å‚æ•°ä¸è¦æ”¹åŠ¨ã€‚æ‰€æœ‰ç±»å‹çš„æœºå‹éƒ½ä¸€æ ·ã€‚2ï¼‰GCå›æ”¶å™¨ï¼Œç»Ÿä¸€ä½¿ç”¨G1ã€‚3ï¼‰å…¶ä»–å‚æ•°ï¼Œmeteor 2.xä¸å…¶ä»–ç±»å‹é¡¹ç›®ç•¥æœ‰ä¸åŒã€‚4ï¼‰Xmså’ŒXmxçš„å€¼ä¿æŒç›¸åŒã€‚


heapå¤§å°è®¾ç½®1ã€æ ‡å‡†æœºå‹å†…å­˜1Gçš„æœºå™¨ï¼Œjvmå‚æ•°ä¿æŒé»˜è®¤ï¼Œä¸å†è®¾ç½®xmxå’Œxmsã€‚å†…å­˜2G[Â±200M]ï¼Œheapå¤§å°ä¸º1Gã€‚å†…å­˜4G[Â±200M]ï¼Œheapå¤§å°ä¸º2Gã€‚å†…å­˜8G[Â±200M]ï¼Œheapå¤§å°ä¸º4Gã€‚å†…å­˜16Gï¼Œheapå¤§å°ä¸º12Gã€‚
2ã€éæ ‡å‡†æœºå‹å’Œå®¹å™¨å¯¹äºéæ ‡å‡†æœºå‹æˆ–è€…å®¹å™¨å†…å­˜ï¼Œç»Ÿä¸€è®¡ç®—æ–¹å¼ä¸ºï¼š
heapå¤§å° = (æ€»å†…å­˜ - 256M) * 60%

ä»¥å†…å­˜ä¸º4Gçš„dockerå®¹å™¨ä¸ºä¾‹ï¼š
heapå¤§å° = (4096 - 256) * 60% = 2304M

å› æ­¤Xmså’ŒXmxä¸ºï¼š
-Xms2304m -Xmx2304m

GCé¢‘æ¬¡è°ƒä¼˜è¯„ä¼°å‚è€ƒï¼ˆé€šç”¨WEBç³»ç»Ÿï¼‰1ã€YGCï¼Œ5åˆ°10Sä¸€æ¬¡ï¼Œæš‚å®šè§„åˆ™ï¼šä¸º10æ¬¡/åˆ†é’Ÿã€‚2ã€FGCï¼Œæ•°å°æ—¶ç”šè‡³æ•°å¤©ä¸€æ¬¡ï¼Œæš‚å®šè§„åˆ™ï¼š2æ¬¡/å¤©ã€‚3ã€GCæ—¶é—´å æ¯”æ ‡å‡† å°äºç­‰äº 5%å¦‚æœä½ çš„åº”ç”¨GCé¢‘æ¬¡è¶…å‡ºä¸Šè¿°è§„åˆ™ï¼Œéœ€è¦è°ƒä¼˜æˆ–è€…è¯„ä¼°è§„åˆ™å¯è¡Œæ€§ã€‚
ä¾‹å­spring bootset -e &amp;&amp; cd &lt;workDir&gt;/&lt;appName&gt; &amp;&amp; source /etc/bashrc &amp;&amp; java -Xms2304m -Xmx2304m -XX:NewRatio=2 -XX:G1HeapRegionSize=8m -XX:MetaspaceSize=256m -XX:MaxMetaspaceSize=256m -XX:MaxTenuringThreshold=10 -XX:+UseG1GC -XX:InitiatingHeapOccupancyPercent=45 -XX:MaxGCPauseMillis=200 -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintReferenceGC -XX:+PrintAdaptiveSizePolicy -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=6 -XX:GCLogFileSize=32m -Xloggc:logs/gc.log.$(date +%Y%m%d%H%M) -Dfile.encoding=UTF-8 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=9999 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false -javaagent:/opt/vipkid/jmx_agent.jar=18080:- -jar &lt;packageName&gt; --server.port=&lt;port&gt;

meteor2set -e &amp;&amp; cd &lt;workDir&gt;/&lt;appName&gt; &amp;&amp; source /etc/bashrc &amp;&amp; JMX_PORT=9999 JAVA_OPTS=&quot;-Xms2304m -Xmx2304m -javaagent:/opt/vipkid/vkcat-agent-1.0.2/vkcat-agent-1.0.2.jar -DapplicationDomain=&lt;appName&gt; -DvkcatDomain=vkcat.vipkid.com.cn:80 -javaagent:/opt/vipkid/jmx_agent.jar=18080:-&quot; ./application.jar start --profile=prod --cloud=ali &amp;&amp; tail -f std.out

å‚è€ƒæ–‡æ¡£jvmå‚æ•°å’Œgcæ™®åŠ
åˆæ­¥è¯Šæ–­ä½ çš„GC
ä»å®é™…æ¡ˆä¾‹èŠèŠJavaåº”ç”¨çš„GCä¼˜åŒ–
å®˜æ–¹oracleå®å…¸ç»†è¯»-Tuning Tips
å®˜æ–¹oracleå®å…¸ç»†è¯»-VM Heap Size and Garbage Collectionï¼ˆå¯ä»¥å¾—å‡ºgcæœåŠ¡æ—¶é—´å æ¯”5%æœ€ä½³ï¼Œheap sizeè®¾ç½®è€ƒç©¶ï¼‰
4Gå†…å­˜è®¾ç½®çš„è¿‡ç¨‹å®å…¸-5 Tips for Proper Java Heap Size
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Dockerå®‰è£…é…ç½®Apacheå’ŒPHPç¯å¢ƒï¼ˆå¾®æ“ç¯å¢ƒï¼‰</title>
    <url>/dev-docker-apache-php/</url>
    <content><![CDATA[å‰è¨€ã€Šåœ¨CentOS7ä¸Šé…ç½®PHPè¿è¡Œç¯å¢ƒã€‹ä¸€æ–‡ä¸­å­¦ä¹ äº†å®‰è£…é…ç½®LNMPç¯å¢ƒï¼Œã€ŠCentOSå®‰è£…Apacheå’ŒPHPç¯å¢ƒã€‹ä¸€æ–‡ä¸­å­¦ä¹ äº†å®‰è£…é…ç½®Apacheå’ŒPHPç¯å¢ƒã€‚
æœ¬æ–‡å­¦ä¹ ä½¿ç”¨Dockerå®‰è£…é…ç½®Apacheå’ŒPHPï¼Œä¸Mysqlç»“åˆï¼Œæ­å»ºä¸€ä¸ªå®¹å™¨åŒ–çš„LAMPç¯å¢ƒï¼Œéƒ¨ç½²å¾®æ“æœåŠ¡ã€‚
å‰ç½®æ¡ä»¶æ˜¯å®‰è£…é…ç½®å¥½äº†dockerç¯å¢ƒï¼Œå®‰è£…æ–¹æ³•å‚è€ƒã€ŠDockerå…¥é—¨ã€‹ã€‚å·²çŸ¥dockerå®¿ä¸»æœºIPä¸º192.168.56.130ã€‚


å®‰è£…Mysqlå‚è€ƒã€Šä½¿ç”¨Dockerå®‰è£…é…ç½®Mysqlã€‹ï¼Œå®‰è£…å¥½mysql serverå’Œmysql clientã€‚
1ã€ç™»å½•mysql servermysql -h 127.0.0.1 -u root -p
2ã€åˆ›å»ºæ•°æ®åº“
create database `w7` default character set utf8 collate utf8_general_ci; 

å®‰è£…PHP1ã€ç™»å½•dockerhubæŸ¥çœ‹éœ€è¦çš„PHP - Docker Official Imagesã€‚
2ã€ä¸‹è½½phpé•œåƒï¼ˆä»¥7.2-apacheä¸ºä¾‹ï¼‰docker pull php:7.2-apache
é€‰æ‹©å¸¦æœ‰apacheçš„ç‰ˆæœ¬ï¼Œçœå»äº†å®‰è£…apacheçš„æ­¥éª¤ã€‚
3ã€å¯åŠ¨phpå’ŒapacheæœåŠ¡
docker run --name vk-php -d \-p 8080:80 \-v /opt/php/w7:/var/www/html \php:7.2-apache

ä»¥ä¸Šå‘½ä»¤ï¼š

å‘½åå®¹å™¨ä¸ºvk-phpï¼Œåå°è¿è¡Œ
æ˜ å°„å®¿ä¸»æœº8080ç«¯å£åˆ°å®¹å™¨çš„80ç«¯å£
æŒ‚è½½å®¿ä¸»æœºç›®å½•/opt/php/w7åˆ°å®¹å™¨ç›®å½•/var/www/html

æ›´å¤šå¯åŠ¨å‘½ä»¤å‚æ•°å¯ä»¥å‚è€ƒHow to use this imageã€‚
4ã€åˆ›å»ºæµ‹è¯•æ–‡ä»¶vim /opt/php/w7/index.phpï¼Œå†…å®¹ä¸ºï¼š
&lt;?php    echo &#x27;hello php7.2&#x27;;?&gt;

5ã€éªŒè¯å®‰è£…curl localhost:8080ï¼Œå¯ä»¥çœ‹åˆ°hello php7.2ã€‚æµè§ˆå™¨è®¿é—® http://192.168.56.130:8080 ï¼Œå¯ä»¥çœ‹åˆ°hello php7.2ã€‚
ä»¥ä¸Šï¼Œapacheå’Œphpç¯å¢ƒå®‰è£…é…ç½®å®Œæˆã€‚
å®‰è£…å¾®æ“åˆå§‹å°è¯•ä¸»è¦å‚è€ƒã€Šå¾®æ“ç³»ç»Ÿæ­å»ºã€‹å’Œå¾®æ“linuxæœåŠ¡å™¨å®‰è£…ã€‚1ã€ä¸‹è½½å¾®æ“å®‰è£…å¼•å¯¼æ–‡ä»¶
cd /opt/php/w7wget https://cdn.w7.cc/download/WeEngine-Laster-Online.zipunzip WeEngine-Laster-Online.zip

2ã€æµè§ˆå™¨è®¿é—®å®‰è£…é¡µé¢http://192.168.56.130:8080/install.phpå¡«å…¥ç”¨æˆ·åå¯†ç åï¼Œç‚¹å‡»éªŒè¯åå®‰è£…å¾®æ“ã€‚æ²¡æœ‰é€šè¿‡éªŒè¯ï¼Œå¦‚ä¸‹å›¾ï¼šç”±æŠ¥é”™çœ‹ï¼Œä¸»è¦æ˜¯ç›®å½•æƒé™é—®é¢˜å’Œç¼ºå°‘æ‰©å±•é—®é¢˜ã€‚
é‡åšé•œåƒ1ã€ä¿®æ”¹sources.liståœ¨å®¹å™¨ä¸­æŸ¥çœ‹/etc/apt/sources.listï¼Œå‘ç°é•œåƒç‰ˆæœ¬æ˜¯debian busterï¼Œå› æ­¤æ–°å»ºä¸€ä¸ªsources.listä¸ºï¼š
deb http://mirrors.aliyun.com/debian/ buster main non-free contribdeb-src http://mirrors.aliyun.com/debian/ buster main non-free contribdeb http://mirrors.aliyun.com/debian-security buster/updates maindeb-src http://mirrors.aliyun.com/debian-security buster/updates maindeb http://mirrors.aliyun.com/debian/ buster-updates main non-free contribdeb-src http://mirrors.aliyun.com/debian/ buster-updates main non-free contribdeb http://mirrors.aliyun.com/debian/ buster-backports main non-free contribdeb-src http://mirrors.aliyun.com/debian/ buster-backports main non-free contrib

2ã€ç¼–å†™Dockerfile
FROM php:7.2-apacheCOPY sources.list /etc/apt/sources.listRUN apt-get update &amp;&amp; apt-get install -y libpng-dev libzip-dev \    &amp;&amp; docker-php-ext-install zip gd pdo pdo_mysqlRUN chmod 777 /var/www/html

3ã€ç”Ÿæˆæ–°é•œåƒdocker build -t voidking/w7:v1.0 .
å†æ¬¡å°è¯•1ã€åˆ é™¤åŸæœ‰å®¹å™¨
docker stop vk-phpdocker rm vk-php

2ã€å¯åŠ¨æ–°çš„å®¹å™¨
docker run --name vk-php -d \-p 8080:80 \-v /opt/php/w7:/var/www/html \voidking/w7:v1.0

3ã€å†æ¬¡å®‰è£…ï¼Œå†æ¬¡éªŒè¯å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ¬¡è¿˜å‰©ä¸€ä¸ªé—®é¢˜ï¼šå¤–ç½‘ä¸å¯è®¿é—®ã€‚è¿™å°±å¥‡æ€ªäº†ï¼Œåœ¨å®¹å™¨å†…æ˜æ˜æ˜¯å¯ä»¥æ­£å¸¸è®¿é—®å¤–ç½‘çš„ï¼Œä¸ºå•¥æŠ¥è¿™ä¸ªé”™ï¼Ÿæ—¢ç„¶æ²¡é”™ï¼Œé‚£å°±å¿½ç•¥å®ƒå¥½äº†ã€‚ä½†æ˜¯è¿™ä¸ªé”™å­˜åœ¨ï¼Œå°±æ— æ³•è¿›è¡Œä¸‹ä¸€æ­¥ï¼Œå› æ­¤è¿™é‡Œæˆ‘ä»¬æ¢ä¸€ç§å®‰è£…æ–¹å¼ï¼šæºç å®‰è£…ã€‚
æºç å®‰è£…1ã€ä¸‹è½½æºç 
cd /opt/php/w7rm -rf ./*cd ..git clone https://gitee.com/we7coreteam/pros.git w7

2ã€å†æ¬¡å®‰è£…ï¼Œå†æ¬¡éªŒè¯niceï¼Œå®Œç¾è·³è¿‡äº†å¤–ç½‘ä¸å¯è®¿é—®è¿™ä¸ªå‘ã€‚ç„¶åï¼Œdataç›®å½•æƒé™æŠ¥é”™ã€‚ä¿®æ”¹dataç›®å½•æƒé™ï¼Œchmod 777 /opt/php/w7/data/ï¼Œé—®é¢˜è§£å†³ã€‚
3ã€å¡«å…¥æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼Œä»¥åŠç®¡ç†å‘˜ç”¨æˆ·åå¯†ç 
4ã€ç„¶åï¼Œå®‰è£…å®Œæˆã€‚
5ã€æµ‹è¯•è®¿é—®æµè§ˆå™¨è®¿é—®é¦–é¡µ http://192.168.56.130:8080/index.php ï¼Œå³ä¼šè·³è½¬åˆ°å¾®æ“ç™»å½•é¡µã€‚
ä»¥ä¸Šï¼Œå¾®æ“ç³»ç»Ÿå®‰è£…é…ç½®å®Œæˆï¼Œå¯ä»¥æ„‰å¿«åœ°ä½¿ç”¨äº†ã€‚
ç™¾åº¦äº‘è§£æå¤‡æ¡ˆå¤±è´¥ç™¾åº¦æ™ºèƒ½äº‘å¹´ç»ˆç››å…¸ï¼Œå…¨åœºäº‘æœåŠ¡å™¨ä¸€æŠ˜èµ·ï¼Œäºæ˜¯151å—é’±å…¥æ‰‹äº†ä¸€å°1C2G2Mçš„ç™¾åº¦äº‘BCCä¸»æœºã€‚ä½†æ˜¯ï¼Œæ²¡æœ‰æƒ³åˆ°çš„æ˜¯ï¼Œç½‘ç«™éœ€è¦æ–°å¢æ¥å…¥å¤‡æ¡ˆï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨åŸŸåï¼ï¼ï¼è¿™ä¸ªä¸æ€ªç™¾åº¦ï¼Œå¦‚æœä½¿ç”¨ç™¾åº¦äº‘å¤‡æ¡ˆæˆåŠŸï¼Œä»¥åæƒ³è¦æ¥å…¥é˜¿é‡Œäº‘æˆ–è€…è…¾è®¯äº‘ï¼Œä¹Ÿéœ€è¦æ–°å¢æ¥å…¥å¤‡æ¡ˆã€‚
ä¸è¿‡ç™¾åº¦äº‘æ¯”è¾ƒå‘çš„æœ‰ä¸¤ç‚¹ï¼šç¬¬ä¸€ç‚¹æ˜¯å¤‡æ¡ˆæœŸé—´åŸŸåä¸èƒ½è§£æï¼Œè€Œé˜¿é‡Œäº‘å¤‡æ¡ˆæœŸé—´å¯ä»¥æ­£å¸¸è§£æã€‚ç¬¬äºŒç‚¹æ˜¯æ— æ³•é€šè¿‡ç™¾åº¦äº‘çš„å¤‡æ¡ˆå®¡æ ¸ï¼Œæäº¤å¤‡æ¡ˆåç™¾åº¦äº‘ç»™å‡ºäº†å…­æ¡ä¸ç¬¦åˆå®¡æ ¸æ¡ä»¶çš„ç†ç”±ï¼Œè€ŒåŒæ ·çš„å®¡æ ¸ææ–™ï¼Œä¸€ä¸ªæœˆå‰åœ¨é˜¿é‡Œäº‘é€šè¿‡äº†å¤‡æ¡ˆå®¡æ ¸ã€‚
çœŸçš„æ˜¯æ²¡æœ‰å¯¹æ¯”å°±æ²¡æœ‰ä¼¤å®³ï¼Œç¬¬ä¸€ä¸ªå¿µå¤´æ˜¯é€€è´§ï¼Œç„¶è€Œé€€è´§å¤±è´¥ã€‚ä¸èƒ½é€€è´§ï¼Œé‚£è¯¥æ€æ ·ä½¿ç”¨è¿™å°æœåŠ¡å™¨å‘¢ï¼Ÿé‚£è¯¥æ€æ ·åœ¨è¿™å°æœåŠ¡å™¨ä¸Šéƒ¨ç½²æœåŠ¡ï¼Œç„¶åé€šè¿‡åŸŸåè®¿é—®å‘¢ï¼Ÿ
åœ¨githubæ‰¾åˆ°äº†ä¸€äº›é¡¹ç›®ï¼Œawesome-selfhostedï¼Œæƒ³è¦éƒ¨ç½²ä¸€äº›ä¸éœ€è¦åŸŸåçš„æœåŠ¡ï¼Œå¥½æ­¹ç»™åˆ©ç”¨èµ·æ¥äº†ã€‚ä½†æ˜¯ï¼Œä¾ç„¶ä¸ç”˜å¿ƒï¼Œæƒ³è¦ç»™è¿™äº›æœåŠ¡åŠ ä¸ŠåŸŸåï¼ç„¶åï¼ŒçœŸçš„æ‰¾åˆ°äº†åŠæ³•ï¼å‰ææ˜¯ä½ è¿˜æœ‰ä¸€å°å¯ä»¥è¿›è¡ŒåŸŸåæ¥å…¥çš„ä¸»æœºï¼Œæ— è®ºæ˜¯å¤‡æ¡ˆè¿‡çš„é˜¿é‡Œäº‘ä¸»æœºï¼Œè¿˜æ˜¯ä¸éœ€è¦å¤‡æ¡ˆçš„æµ·å¤–ä¸»æœºï¼Œéƒ½å¯ä»¥ã€‚
è§£ææ–¹æ¡ˆå·²çŸ¥ä¸¤å°ä¸»æœºï¼šå¯ä»¥åŸŸåæ¥å…¥çš„ä¸»æœºï¼ˆä¸»æœºAï¼‰ï¼Œç™¾åº¦äº‘ä¸»æœºï¼ˆä¸»æœºBï¼‰ã€‚æˆ‘ä»¬åœ¨ä¸»æœºBä¸Šéƒ¨ç½²å¥½äº†å¾®æ“æœåŠ¡ï¼Œæƒ³è¦ç»™è¿™ä¸ªæœåŠ¡æ·»åŠ ä¸€ä¸ªåŸŸåï¼šw7.voidking.com 
1ã€å®‰è£…frpå‚è€ƒã€Šä½¿ç”¨frpè¿›è¡Œå†…ç½‘ç©¿é€ã€‹ï¼Œåœ¨ä¸»æœºAä¸Šå®‰è£…é…ç½®å¥½frp serverï¼Œåœ¨ä¸»æœºBä¸Šå®‰è£…é…ç½®å¥½frp clientã€‚ä¸»æœºBä¸Šçš„8080ç«¯å£ï¼Œæ˜ å°„ä¸ºä¸»æœºAä¸Šçš„3480ç«¯å£ã€‚
2ã€nginxé…ç½®åœ¨ä¸»æœºAä¸Šï¼Œæ·»åŠ nginxè§£æ w7.voidking.com.conf ï¼Œå†…å®¹ä¸ºï¼š
server &#123;    server_name w7.voidking.com;    listen 80;    location / &#123;        proxy_pass http://127.0.0.1:3480/;        proxy_set_header X-Real-IP $remote_addr;    &#125;&#125;

æ³¨æ„ï¼Œä¸ç”¨å¤šåŠ å…¶ä»–å‚æ•°ï¼Œä¸ç„¶ä¼šå‡ºç°502ç­‰é”™è¯¯ã€‚
3ã€åŸŸåè§£æåœ¨dnspodä¸Šæ·»åŠ Aè®°å½•è§£æåˆ°ä¸»æœºAã€‚
ä»¥ä¸Šï¼Œå¯ä»¥é€šè¿‡åŸŸåè®¿é—®ç™¾åº¦äº‘ä¸Šçš„å¾®æ“æœåŠ¡äº†ã€‚
å¾®æ“åç»­é—®é¢˜ç«™ç‚¹URLé—®é¢˜ç¡®å®å¯ä»¥é€šè¿‡åŸŸåè®¿é—®å¾®æ“æœåŠ¡äº†ï¼Œä½†æ˜¯ç«™ç‚¹çš„å¾ˆå¤šè¯·æ±‚åœ°å€ä¸º 127.0.0.1:3480 ï¼Œå› ä¸ºå¾®æ“æœåŠ¡ä½¿ç”¨proxy_passé‡Œçš„URLä½œä¸ºäº†ç«™ç‚¹URLã€‚æˆ‘ä»¬æƒ³è®©å¾®æ“æœåŠ¡æŠŠåŸŸåä½œä¸ºç«™ç‚¹URLï¼Œè§£å†³åŠæ³•å¾ˆç®€å•ï¼Œæ·»åŠ ï¼š
proxy_set_header Host $http_host;
ä½†æ˜¯ï¼Œæ·»åŠ å®Œè¿™ä¸ªå‚æ•°ï¼Œå°±ä¼šå‡ºç°502é”™è¯¯ï¼Œå°´å°¬äº†å§ã€‚ã€‚ã€‚nginxå±‚æ²¡æ³•è¿›è¡Œä¿®å¤ï¼Œçœ‹æ¥è¿™ä¸ªé—®é¢˜åªèƒ½é€šè¿‡ä¿®æ”¹å¾®æ“æºç æ¥ä¿®å¤äº†ã€‚ç¼–è¾‘/opt/php/w7/framework/bootstrap.inc.phpï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 90, change// $_W[&#x27;siteroot&#x27;] = htmlspecialchars($_W[&#x27;sitescheme&#x27;] . (isset($_SERVER[&#x27;HTTP_HOST&#x27;]) ? $_SERVER[&#x27;HTTP_HOST&#x27;] : &#x27;&#x27;) . $sitepath);$_W[&#x27;siteroot&#x27;] = &#x27;w7.voidking.com&#x27;;

ç„¶åï¼Œè¯·æ±‚åœ°å€å°±å…¨éƒ¨å˜æˆ w7.voidking.com ï¼Œniceã€‚
è·¨åŸŸé—®é¢˜ä½†æ˜¯ï¼Œä¸€äº›è¯·æ±‚æŠ¥é”™ï¼š
Access to XMLHttpRequest at &#x27;javascript:;&#x27; from origin &#x27;http://w7.voidking.com&#x27; has been blocked by CORS policy: Cross origin requests are only supported for protocol schemes: http, data, chrome, chrome-extension, https.

æ˜æ˜éƒ½æ˜¯åŒä¸€ä¸ªurlï¼Œå±…ç„¶è¿˜æ˜¯è·¨åŸŸé”™è¯¯ï¼Œæ²¡æœ‰æ‰¾åˆ°è§£å†³åŠæ³•ã€‚
é‡è£…å¾®æ“æ—¢ç„¶è‡ªå·±å®‰è£…å¾®æ“é—®é¢˜è¿™ä¹ˆå¤šï¼Œé‚£å°±ä½¿ç”¨å®˜ç½‘ç»™çš„dockeré•œåƒå¥½äº†ï¼Œå‚è€ƒdockerå®‰è£…å¾®æ“ã€‚
1ã€åˆ é™¤åŸæœ‰ç¯å¢ƒ
docker stop vk-phpdocker rm vk-php

2ã€å¯åŠ¨æ–°çš„å®¹å™¨
docker run -it --name vk-php -d \-p 8080:80 \-v /opt/w7/mysql:/var/lib/mysql \-v /opt/w7/html:/var/www/html \-e MYSQL\_ROOT\_PASSWORD=123456 -d \--restart=always \ccr.ccs.tencentyun.com/weiqing/nginxphpmysql:1.0

3ã€é‡æ–°å®‰è£…å¾®æ“http://ip:8080/install.php
4ã€è®¾ç½®ç”¨æˆ·åå¯†ç 
5ã€åŒæ ·ä¿®æ”¹å¾®æ“æºç ï¼Œä¿®æ”¹ç«™ç‚¹URLã€‚
ç„¶åï¼ŒåŒæ ·æœ‰è·¨åŸŸé—®é¢˜ï¼Œä½†æ˜¯ç«™ç‚¹å·²ç»å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼Œå°±å…ˆè¿™ä¹ˆæ»´å§ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>apache</tag>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Dockerå®‰è£…é…ç½®Nginx</title>
    <url>/dev-docker-nginx/</url>
    <content><![CDATA[å‰è¨€ã€ŠCentOS7è®¾ç½®nginxå¼€æœºè‡ªå¯åŠ¨ã€‹ä¸€æ–‡ä¸­å­¦ä¹ äº†åœ¨CentOS7ä¸­å®‰è£…é…ç½®Nginxçš„æ–¹æ³•ï¼Œæœ¬æ–‡å­¦ä¹ ä¸€ä¸‹ä½¿ç”¨Dockerå®‰è£…é…ç½®Nginxçš„æ–¹æ³•ã€‚
å‰ç½®æ¡ä»¶æ˜¯å®‰è£…é…ç½®å¥½äº†dockerç¯å¢ƒï¼Œå®‰è£…æ–¹æ³•å‚è€ƒã€ŠDockerå…¥é—¨ã€‹ã€‚å·²çŸ¥dockerå®¿ä¸»æœºIPä¸º8.136.13.58ã€‚


å®‰è£…Nginx1ã€ç™»å½•dockerhubæŸ¥çœ‹éœ€è¦çš„Nginx - Docker Official Imagesã€‚
2ã€ä¸‹è½½nginxé•œåƒï¼ˆä»¥1.17.7ä¸ºä¾‹ï¼‰
docker pull nginx:1.17.7

3ã€åˆ›å»ºnginxæŒ‚è½½ç›®å½•
mkdir -p /opt/nginx/&#123;conf,html,ssl,work,log&#125;

4ã€æ‹·è´nginxé•œåƒä¸­çš„é…ç½®åˆ°å®¿ä¸»æœº
docker run --name tmp-nginx -d nginx:1.17.7docker cp tmp-nginx:/etc/nginx/nginx.conf /opt/nginx/conf/docker cp tmp-nginx:/etc/nginx/conf.d/ /opt/nginx/conf/docker cp tmp-nginx:/usr/share/nginx/html/. /opt/nginx/html/docker stop tmp-nginxdocker rm tmp-nginx

5ã€å¯åŠ¨nginxæœåŠ¡
docker run --name vk-nginx -d --privileged=true \-p 80:80 -p 443:443 \-v /opt/nginx/conf/nginx.conf:/etc/nginx/nginx.conf \-v /opt/nginx/conf/conf.d:/etc/nginx/conf.d \-v /opt/nginx/ssl:/etc/nginx/ssl \-v /opt/nginx/html:/usr/share/nginx/html \-v /opt/nginx/work:/usr/share/nginx/work \-v /opt/nginx/log:/var/log/nginx \-v /etc/localtime:/etc/localtime \nginx:1.17.7

ä»¥ä¸Šå‘½ä»¤ï¼š

å‘½åå®¹å™¨ä¸ºvk-nginxï¼Œåå°è¿è¡Œ
æ˜ å°„å®¿ä¸»æœº80ã€443ç«¯å£åˆ°å®¹å™¨çš„80ã€443ç«¯å£
æŒ‚è½½å®¿ä¸»æœºæ–‡ä»¶ /opt/nginx/conf/nginx.conf åˆ°å®¹å™¨æ–‡ä»¶ /etc/nginx/nginx.conf
æŒ‚è½½å®¿ä¸»æœºç›®å½• /opt/nginx/conf/conf.d åˆ°å®¹å™¨ç›®å½• /etc/nginx/conf.d
æŒ‚è½½å®¿ä¸»æœºç›®å½• /opt/nginx/ssl åˆ°å®¹å™¨ç›®å½• /etc/nginx/ssl
æŒ‚è½½å®¿ä¸»æœºç›®å½• /opt/nginx/html åˆ°å®¹å™¨ç›®å½• /usr/share/nginx/html
æŒ‚è½½å®¿ä¸»æœºç›®å½• /opt/nginx/work åˆ°å®¹å™¨ç›®å½• /usr/share/nginx/work
æŒ‚è½½å®¿ä¸»æœºç›®å½• /opt/nginx/log åˆ°å®¹å™¨ç›®å½• /var/nginx/log
æŒ‚è½½å®¿ä¸»æœºç›®å½• /etc/localtime åˆ°å®¹å™¨ç›®å½• /etc/localtime

æ›´å¤šå¯åŠ¨å‘½ä»¤å‚æ•°å¯ä»¥å‚è€ƒHow to use this imageã€‚
6ã€éªŒè¯å®‰è£…ï¼ˆ1ï¼‰docker psï¼Œnginxå¯åŠ¨æ­£å¸¸çš„è¯å°±å¯ä»¥çœ‹åˆ°vk-nginxå®¹å™¨ã€‚ï¼ˆ2ï¼‰curl localhostï¼Œå¯ä»¥çœ‹åˆ°htmlæ–‡æœ¬ã€‚ï¼ˆ3ï¼‰æµè§ˆå™¨è®¿é—® http://8.136.13.58 ï¼Œå¯ä»¥çœ‹åˆ°Welcome to nginx!
å¸¸ç”¨å‘½ä»¤æµ‹è¯•é…ç½®docker exec -it vk-nginx nginx -t

é‡æ–°åŠ è½½é…ç½®docker exec -it vk-nginx nginx -s reload

é‡å¯nginxdocker restart vk-nginx

é…ç½®WebæœåŠ¡ä»¥é…ç½® www.voidking.com åŸŸåçš„WebæœåŠ¡ä¸ºä¾‹ï¼Œå‚è€ƒã€ŠHexoå¯ç”¨httpsåŠ å¯†è¿æ¥ã€‹å’Œã€ŠHexoåŠ é€Ÿè®¿é—®ã€‹ã€‚
1ã€ä¸‹è½½åšå®¢é¡¹ç›®
mkdir /opt/nginx/workgit clone https://gitee.com/voidking/voidking.github.io.git voidking

2ã€ä¸Šä¼ è¯ä¹¦ä¸Šä¼  1_www.voidking.com_bundle.crt å’Œ 2_www.voidking.com.key åˆ°/opt/nginx/conf.d/sslç›®å½•
3ã€åˆ›å»ºé…ç½®æ–‡ä»¶
cd /opt/nginx/conf/conf.dvim www.voidking.com.conf 

å†…å®¹ä¸ºï¼š
server &#123;    listen 80;    listen 443 ssl;    server_name www.voidking.com;    charset utf-8;    ssl_certificate /etc/nginx/ssl/1_www.voidking.com_bundle.crt;    ssl_certificate_key  /etc/nginx/ssl/2_www.voidking.com.key;    ssl_session_timeout  5m;    ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;    ssl_ciphers  HIGH:!ADH:!EXPORT56:RC4+RSA:+MEDIUM;    ssl_prefer_server_ciphers on;    if ($ssl_protocol = &quot;&quot;) &#123;        return 301 https://$host$request_uri;    &#125;    location / &#123;        proxy_set_header   Host             $host;        proxy_set_header   X-Real-IP        $remote_addr;        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;        root /usr/share/nginx/work/voidking/;        index index.html;    &#125;    error_page 404 /404.html;    location = /404.html &#123;        root /usr/share/nginx/work/voidking/;        index 404.html;    &#125;    location ~ /\.git &#123;        return 404;    &#125;&#125;

4ã€é‡å¯nginx
docker restart vk-nginx

5ã€æŸ¥çœ‹æ˜¯å¦å¯åŠ¨æˆåŠŸ
docker psdocker logs vk-nginxdocker logs --tail 10 vk-nginx

è‡³æ­¤ï¼Œ www.voidking.com åŸŸåé…ç½®å®Œæˆï¼Œåœ¨dnspodæ·»åŠ å¥½è§£æå³å¯è®¿é—®ï¼Œniceã€‚
é…ç½®ä¸ƒç‰›å›¾åºŠåå‘ä»£ç†ä¸ƒç‰›å›¾åºŠï¼Œhttpè®¿é—®ä¸æ”¶è´¹ï¼Œhttpsæ”¶è´¹ã€‚ä¸ºäº†ç»™å›¾åºŠçœé’±ï¼Œä½¿ç”¨nginxé…ç½®äº†ä¸€å±‚ä»£ç†ï¼Œæ·»åŠ äº†åŸŸå cdn.voidking.com.conf çš„é…ç½®ï¼š
server &#123;    listen 80;    listen 443 ssl;    server_name cdn.voidking.com;    charset utf-8;    #sslé…ç½®    ssl_certificate /etc/nginx/ssl/1_cdn.voidking.com_bundle.crt;    ssl_certificate_key  /etc/nginx/ssl/2_cdn.voidking.com.key;    ssl_session_timeout  5m;    ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;    ssl_ciphers  HIGH:!ADH:!EXPORT56:RC4+RSA:+MEDIUM;    if ($ssl_protocol = &quot;&quot;) &#123;        return 301 https://$host$request_uri;    &#125;    location / &#123;        proxy_set_header   Host             $host;        proxy_set_header   X-Real-IP        $remote_addr;        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;        proxy_pass http://qiniu.cdn.voidking.com;    &#125;&#125;

é‡å®šå‘é—®é¢˜æ’æŸ¥æœ‰ä¸€å¤©ï¼Œé€šè¿‡chromeæµè§ˆå™¨è®¿é—® http://8.136.13.58 ï¼Œå‘ç°æŠ¥é”™ 403
ä»”ç»†çœ‹äº†ä¸‹åœ°å€æ ï¼ŒåŸæ¥æ˜¯ http è‡ªåŠ¨è½¬åˆ°äº† httpsã€‚æœ¬åœ°curléªŒè¯ä¸€ä¸‹æ˜¯å¦æ˜¯chromeçš„é—®é¢˜ï¼š
curl http://8.136.13.58curl http://8.136.13.58 -L
ç”±ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œç¡®å®æ˜¯nginxå¯¹è¯·æ±‚è¿›è¡Œäº†é‡å®šå‘ã€‚
é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆé€šè¿‡ipè®¿é—®ä¼šè¿›è¡Œé‡å®šå‘ï¼Ÿåœ¨ default.conf çš„é…ç½®ä¸­ï¼Œæ²¡æœ‰è¿›è¡Œä¿®æ”¹ï¼Œæ²¡æœ‰é…ç½®ä»»ä½•é‡å®šå‘ï¼è¿™æ ·çœ‹æ¥ï¼Œé—®é¢˜åªèƒ½å‡ºåœ¨ www.voidking.com.conf å’Œ cdn.voidking.com.conf è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚
åˆ é™¤ www.voidking.com.conf ï¼Œé‡å¯nginxï¼Œé—®é¢˜ä¾ç„¶å­˜åœ¨ã€‚åˆ é™¤ cdn.voidking.com.conf ï¼Œé‡å¯nginxï¼Œé—®é¢˜è§£å†³ï¼é‚£ä¹ˆï¼Œé—®é¢˜å°±è‚¯å®šå‡ºåœ¨ cdn.voidking.com.conf è¿™ä¸ªæ–‡ä»¶ä¸Šã€‚ä»é…ç½®ä¸Šçœ‹ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆä¼šå¯¼è‡´IPè®¿é—®nginxè¢«é‡å®šå‘å‘¢ï¼Ÿæ‰¾äº†å¾ˆå¤šèµ„æ–™ï¼Œæ²¡æœ‰æ‰¾åˆ°ç­”æ¡ˆã€‚åæ¥çµå…‰ä¸€ç°ï¼šcdn.voidking.com.conf æ¯” default.conf ä¼˜å…ˆçº§æ›´é«˜ï¼å› ä¸ºcå¼€å¤´çš„é…ç½®æ–‡ä»¶è¦æ¯”då¼€å¤´çš„é…ç½®æ–‡ä»¶å…ˆåŠ è½½ï¼Œè€Œ default.conf å¹¶æ²¡æœ‰ç‰¹æ®Šçš„ä¼˜å…ˆçº§é…ç½®ã€‚æ‰€ä»¥ï¼Œæœ€ç»ˆç»“æœå°±æ˜¯ cdn.voidking.com.conf æ‰æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„ default ï¼
è§£å†³æ–¹æ¡ˆï¼šé‡å‘½å default.conf ä¸º 0.default.conf ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>hexo</category>
        <category>docker</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>nginx</tag>
        <tag>docker</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Dockerå®‰è£…é…ç½®Jenkins</title>
    <url>/dev-docker-jenkins/</url>
    <content><![CDATA[å‰è¨€ã€ŠCentOS7å®‰è£…éƒ¨ç½²Jenkinsã€‹ä¸€æ–‡ä¸­å­¦ä¹ äº†Jenkinsçš„å®‰è£…æ–¹æ³•ï¼Œå¦‚æœä½¿ç”¨Dockeræ¥å®‰è£…Jenkinsï¼ŒåŒæ ·å¯ä»¥ç®€å•å¾ˆå¤šã€‚
å‰ç½®æ¡ä»¶æ˜¯å®‰è£…é…ç½®å¥½äº†dockerç¯å¢ƒï¼Œå®‰è£…æ–¹æ³•å‚è€ƒã€ŠDockerå…¥é—¨ã€‹ã€‚å·²çŸ¥dockerå®¿ä¸»æœºIPä¸º192.168.56.130ã€‚


å®‰è£…Jenkins1ã€ç™»å½•dockerhubæŸ¥çœ‹éœ€è¦çš„jenkins-Docker Official Imagesã€‚éœ€è¦æ³¨æ„ï¼Œå®˜æ–¹çš„jenkinsæœ€æ–°ç‰ˆæœ¬æ˜¯2.60.3ï¼Œç‰ˆæœ¬å¤ªä½ï¼å¦‚æœå®‰è£…è¯¥ç‰ˆæœ¬ï¼Œå®‰è£…åä¼šå‡ºç°å„ç§æ’ä»¶ä½¿ç”¨ä¸äº†çš„æƒ…å†µã€‚å› æ­¤ï¼Œè¿™é‡ŒçœŸæ­£éœ€è¦ä½¿ç”¨çš„jenkinså‘½åç©ºé—´ä¸‹çš„jenkinsã€‚
2ã€ä¸‹è½½jenkinsé•œåƒï¼ˆä»¥2.210ä¸ºä¾‹ï¼‰docker pull jenkins/jenkins:2.210
3ã€å¯åŠ¨jenkinsæœåŠ¡
docker run --name vk-jenkins -d \-p 8080:8080 -p 50000:50000 \-v /opt/jenkins_home:/var/jenkins_home \jenkins/jenkins:2.210
ä»¥ä¸Šå‘½ä»¤ï¼š

å‘½åå®¹å™¨ä¸ºvk-jenkinsï¼Œåå°è¿è¡Œ
æ˜ å°„å®¿ä¸»æœº8080ã€50000ç«¯å£åˆ°å®¹å™¨8080ã€50000ç«¯å£
æŒ‚è½½å®¿ä¸»æœºç›®å½•/opt/jenkins_homeåˆ°å®¹å™¨ç›®å½•/var/jenkins_home

æ›´å¤šå¯åŠ¨å‘½ä»¤å‚æ•°å¯ä»¥å‚è€ƒHow to use this imageã€‚
å¯åŠ¨æŠ¥é”™ï¼š
docker: Error response from daemon: driver failed programming external connectivity on endpoint vk-jenkins (d95f7502bb87d6795547061a2f13b5e2ba44648977399fcde1c05640f678554a):  (iptables failed: iptables --wait -t nat -A DOCKER -p tcp -d 0/0 --dport 50000 -j DNAT --to-destination 172.17.0.2:50000 ! -i docker0: iptables: No chain/target/match by that name. (exit status 1)).

è§£å†³åŠæ³•ï¼šé‡å¯dockerï¼Œç„¶åé‡æ–°æ‰§è¡Œå¯åŠ¨å‘½ä»¤ã€‚
systemctl restart dockerdocker rm vk-jenkinsdocker run --name vk-jenkins -d \-p 8080:8080 -p 50000:50000 \-v /opt/jenkins_home:/var/jenkins_home \jenkins/jenkins:2.210

4ã€éªŒè¯å®‰è£…docker psjenkinså¯åŠ¨æ­£å¸¸çš„è¯å°±å¯ä»¥çœ‹åˆ°vk-jenkinså®¹å™¨ã€‚å¦‚æœå¯åŠ¨å¤±è´¥ï¼Œå¯ä»¥ä½¿ç”¨docker logs vk-jenkinsæŸ¥çœ‹å¤±è´¥åŸå› å¹¶è¿›è¡Œè§£å†³ã€‚æœ¬ä¾‹ä¸­ç¡®å®æŠ¥é”™äº†ï¼Œæç¤ºç›®å½•æƒé™é—®é¢˜ï¼š
touch: cannot touch &#x27;/var/jenkins_home/copy_reference_file.log&#x27;: Permission deniedCan not write to /var/jenkins_home/copy_reference_file.log. Wrong volume permissions?

è¿™æ˜¯å› ä¸º/opt/jenkins_homeç›®å½•çš„æ‹¥æœ‰è€…ä¸ºrootç”¨æˆ·ï¼Œè€Œå®¹å™¨ä¸­jenkins userçš„uidä¸º1000ï¼Œå› æ­¤éœ€è¦ä¿®æ”¹ç›®å½•æƒé™ã€‚
chown -R 1000:1000 /opt/jenkins_homedocker start vk-jenkins

é…ç½®ä½¿ç”¨Jenkins1ã€åŠ é€Ÿæ’ä»¶å®‰è£…ï¼ˆæ¨èï¼‰å‚è€ƒJenkinså®‰è£…æ’ä»¶æé€Ÿï¼Œä¿®æ”¹/opt/jenkins_home/updates/default.jsonã€‚
sed -i &#x27;s/http:\/\/updates.jenkins-ci.org\/download/https:\/\/mirrors.tuna.tsinghua.edu.cn\/jenkins/g&#x27; default.jsonsed -i &#x27;s/http:\/\/www.google.com/https:\/\/www.baidu.com/g&#x27; default.json
ä¿®æ”¹å®Œæˆé‡å¯vk-jenkinsï¼Œæ­£å¸¸è¿›å…¥å®‰è£…æµç¨‹ï¼Œç›´è§‚æ„Ÿè§‰å°±æ˜¯â€œå®‰è£…æ¨èçš„æ’ä»¶â€è¿™ä¸€æ­¥é€Ÿåº¦èƒ½å¤Ÿæé«˜ä¸€ç™¾å€ã€‚
2ã€æŸ¥çœ‹åˆå§‹å¯†ç cat /opt/jenkins_home/secrets/initialAdminPassword
3ã€jenkinsé…ç½®æµè§ˆå™¨è®¿é—®ï¼šhttp://192.168.56.130:8080/åˆå§‹å¯†ç å¡«å…¥é¡µé¢ï¼Œå¼€å§‹è¿›è¡Œjenkinsé…ç½®ã€‚
4ã€åç»­æ¥ä¸‹æ¥çš„é…ç½®å’Œä½¿ç”¨å‚è€ƒã€ŠCentOS7å®‰è£…éƒ¨ç½²Jenkinsã€‹å³å¯ã€‚
è‡³æ­¤ï¼Œdockerå®‰è£…é…ç½®jenkinså®Œæˆã€‚å› ä¸ºç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ˜¯å®˜æ–¹çš„jenkins2.60.3é•œåƒï¼Œæ‰€ä»¥é‡åˆ°äº†ä¸€äº›å‘ï¼Œä¸‹é¢ä¸€èŠ‚ä¸­è¿›è¡Œè®°å½•ã€‚
jenkins2.60.3é—®é¢˜è§£å†³1ã€å®‰è£…æ¨èçš„æ’ä»¶ï¼Œä¼šå¡åœ¨Getting Startedã€‚ã€‚è¿™æ˜¯å› ä¸ºå®‰è£…æ’ä»¶å‰ä¼šå°è¯•è¿æ¥ www.google.com ï¼Œæ¥åˆ¤æ–­ç½‘ç»œæ˜¯å¦è¿é€šã€‚å›½å†…ç”¨æˆ·éœ€è¦æ”¹æˆ www.baidu.com ï¼Œvim /opt/jenkins_home/updates/default.jsonï¼Œæ‰¾åˆ°googleï¼Œä¿®æ”¹ä¸ºbaiduã€‚
# ä¿®æ”¹å‰&quot;connectionCheckUrl&quot;:&quot;http://www.google.com/&quot;,# ä¿®æ”¹å&quot;connectionCheckUrl&quot;:&quot;http://www.baidu.com/&quot;,

2ã€é‡å¯jenkinsç‰¹åˆ«æ…¢docker restart vk-jenkinså‘ç°é‡å¯ç‰¹åˆ«ç‰¹åˆ«æ…¢ï¼Œå¤§æ¦‚è¦10åˆ†é’Ÿå·¦å³æ‰èƒ½é‡å¯æˆåŠŸã€‚è€Œä¸”ï¼Œé‡å¯åconnectionCheckUrlä¸­çš„baiduåˆå˜æˆäº†googleï¼ï¼ï¼
3ã€ä¿®æ”¹updatecenteræ€€ç–‘åœ¨jenkinså¯åŠ¨æ—¶ä¼šæ ¹æ®å…¶ä»–åœ°æ–¹çš„é…ç½®æ›´æ”¹default.jsonï¼Œä½†æ˜¯æ²¡æœ‰æ‰¾åˆ°ã€‚æŸ¥æ‰¾èµ„æ–™å‘ç°äº†ä¸€ç¯‡update jenkins Updatecenter from CLIï¼Œå…¶ä¸­ä¸€è¡Œï¼š
wget -O default.json http://updates.jenkins-ci.org/update-center.json
é‚£ä¹ˆï¼Œå¦‚æœä¿®æ”¹updatecenterä¸ºä¸­å›½çš„é•œåƒç«™ï¼Œæ˜¯ä¸æ˜¯å°±ä¼šä½¿ç”¨ä¸­å›½çš„update-center.jsonä»£æ›¿default.jsonï¼Ÿè¯•ä¸€è¯•ï¼Œvim /opt/jenkins_home/hudson.model.UpdateCenter.xmlï¼ŒåŸæ–‡ä¸ºï¼š
&lt;?xml version=&#x27;1.0&#x27; encoding=&#x27;UTF-8&#x27;?&gt;&lt;sites&gt;  &lt;site&gt;    &lt;id&gt;default&lt;/id&gt;    &lt;url&gt;http://updates.jenkins-ci.org/update-center.json&lt;/url&gt;  &lt;/site&gt;&lt;/sites&gt;
ä¸­å›½é•œåƒç«™å»å“ªé‡Œæ‰¾å‘¢ï¼Ÿå¯ä»¥åœ¨the status of Jenkins mirrorsç½‘ç«™ä¸Šé€‰æ‹©ã€‚hudson.model.UpdateCenter.xmlä¿®æ”¹ä¸ºï¼š
&lt;?xml version=&#x27;1.0&#x27; encoding=&#x27;UTF-8&#x27;?&gt;&lt;sites&gt;  &lt;site&gt;    &lt;id&gt;default&lt;/id&gt;    &lt;url&gt;https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json&lt;/url&gt;  &lt;/site&gt;&lt;/sites&gt;
åˆ é™¤/opt/jenkins_home/updatesç›®å½•ï¼Œå†æ¬¡é‡å¯vk-jenkinsã€‚é‡å¯é€Ÿåº¦é£å¿«ï¼Œ10ç§’å·¦å³ï¼Œä½†æ˜¯default.jsonä¸­ä¾ç„¶æ˜¯googleï¼Œå› ä¸ºé•œåƒç«™é‡Œçš„update-center.jsonå’Œjenkinsæºç«™é‡Œçš„update-center.jsonç›¸åŒã€‚æ—¢ç„¶jenkinså¯åŠ¨æ—¶éƒ½ä¼šä½¿ç”¨è¿œç«¯çš„update-center.jsonæ›¿ä»£æœ¬åœ°çš„default.jsonï¼Œé‚£ä¹ˆè§£å†³è¯¥é—®é¢˜çš„æ–¹æ³•å°±æ˜¯ç»™hudson.model.UpdateCenter.xmlä¸€ä¸ªè¿œç«¯çš„ä¿®æ”¹åçš„update-center.jsonï¼Œæˆ–è€…ä¸è®©jenkinsè·å–åˆ°è¿œç«¯update-center.jsonã€‚
4ã€å¡«å†™å‡çš„updatecenterä¿®æ”¹hudson.model.UpdateCenter.xmlä¸ºï¼š
&lt;?xml version=&#x27;1.0&#x27; encoding=&#x27;UTF-8&#x27;?&gt;&lt;sites&gt;  &lt;site&gt;    &lt;id&gt;default&lt;/id&gt;    &lt;url&gt;http://localhost&lt;/url&gt;  &lt;/site&gt;&lt;/sites&gt;
å› ä¸ºè·å–ä¸åˆ°update-center.jsonï¼Œç„¶åå°±å¯ä»¥è·³è¿‡å®‰è£…æ’ä»¶çš„æ­¥éª¤ã€‚
5ã€æ›´æ¢æ–°ç‰ˆjenkinsé•œåƒjenkinså®‰è£…æˆåŠŸï¼Œä½†æ˜¯åœ¨jenkinsçš„ç³»ç»Ÿé…ç½®é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°å¾ˆå¤šæ’ä»¶æŠ¥é”™ï¼Œè€Œä¸”æ— æ³•ä¿®å¤ï¼Œç³»ç»Ÿå»ºè®®è¿›è¡Œjenkinså‡çº§ã€‚æ­¤æ—¶ï¼ŒéƒåŒå­¦æ‰æ„è¯†åˆ°ï¼Œå®˜æ–¹jenkinsé•œåƒä¸æ˜¯æœ€æ–°ç‰ˆï¼ï¼ï¼éœ€è¦æ”¹ç”¨jenkinså‘½åç©ºé—´ä¸‹çš„æ–°ç‰ˆjenkinsé•œåƒï¼Œä½†æ˜¯â€œå®‰è£…æ¨èçš„æ’ä»¶â€è¿™ä¸€æ­¥ä¾ç„¶å¾ˆæ…¢ï¼Œå‡ ä¸ªå°æ—¶ç”šè‡³æ›´ä¹…æ‰èƒ½å®‰è£…æˆåŠŸã€‚åŠ é€Ÿæ–¹æ³•å¯ä»¥å‚è€ƒæœ¬æ–‡ é…ç½®ä½¿ç”¨Jenkins ä¸€èŠ‚ä¸­çš„ åŠ é€Ÿæ’ä»¶å®‰è£…ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Dockerå®‰è£…é…ç½®GitLab</title>
    <url>/dev-docker-gitlab/</url>
    <content><![CDATA[å‰è¨€ã€ŠCentOS7å®‰è£…é…ç½®GitLabã€‹ä¸€æ–‡ä¸­å­¦ä¹ äº†GitLabçš„å®‰è£…æ–¹æ³•ï¼Œå¦‚æœä½¿ç”¨Dockeræ¥å®‰è£…GitLabï¼Œå¯ä»¥ç®€å•å¾ˆå¤šã€‚
å‰ç½®æ¡ä»¶æ˜¯å®‰è£…é…ç½®å¥½äº†dockerç¯å¢ƒï¼Œå®‰è£…æ–¹æ³•å‚è€ƒã€ŠDockerå…¥é—¨ã€‹ã€‚å·²çŸ¥dockerå®¿ä¸»æœºIPä¸º192.168.56.130ã€‚


å®‰è£…GitLab1ã€ç™»å½•dockerhubæŸ¥çœ‹éœ€è¦çš„GitLab Docker imagesã€‚
2ã€ä¸‹è½½gitlabé•œåƒï¼ˆä»¥12.6.1-ce.0ç‰ˆæœ¬ä¸ºä¾‹ï¼‰docker pull gitlab/gitlab-ce:12.6.1-ce.0
3ã€å¯åŠ¨gitlabæœåŠ¡
docker run --name vk-gitlab -d  \-p 80:80 -p 443:443 -p 3422:22  \--restart always \-v /opt/gitlab/config:/etc/gitlab \-v /opt/gitlab/logs:/var/log/gitlab \-v /opt/gitlab/data:/var/opt/gitlab \gitlab/gitlab-ce:12.6.1-ce.0
ä»¥ä¸Šå‘½ä»¤ï¼š

å‘½åå®¹å™¨ä¸ºvk-gitlabï¼Œåå°è¿è¡Œ
æ˜ å°„å®¿ä¸»æœº80ã€443ã€3422ç«¯å£åˆ°å®¹å™¨80ã€443ã€22ç«¯å£
æ„å¤–å…³é—­åè‡ªåŠ¨é‡å¯
æŒ‚è½½ä¸‰ä¸ªå®¿ä¸»æœºç›®å½•åˆ°å®¹å™¨

4ã€éªŒè¯å®‰è£…docker psgitlabå¯åŠ¨æ­£å¸¸çš„è¯å°±å¯ä»¥çœ‹åˆ°vk-gitlabå®¹å™¨ã€‚å¦‚æœå¯åŠ¨å¤±è´¥ï¼Œå¯ä»¥ä½¿ç”¨docker logs vk-gitlabæŸ¥çœ‹å¤±è´¥åŸå› å¹¶è¿›è¡Œè§£å†³ã€‚
éªŒè¯GitLabå¼€æ”¾ç«¯å£firewall-cmd --add-port=80/tcp --permanentfirewall-cmd --add-port=443/tcp --permanentfirewall-cmd --add-port=3422/tcp --permanentsystemctl reload firewalld# æˆ–è€…systemctl stop firewalld

ç«¯å£éªŒè¯nc -v localhost 22nc -v localhost 3422
å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªç«¯å£çš„è¿”å›ç»“æœä¸åŒï¼šSSH-2.0-OpenSSH_7.4SSH-2.0-OpenSSH_7.2p2 Ubuntu-4ubuntu2.8
æœåŠ¡éªŒè¯å®¿ä¸»æœºæµ‹è¯•ï¼šcurl localhost -Læµè§ˆå™¨æµ‹è¯•ï¼šhttp://192.168.56.130
é…ç½®GitLabhttpåŸŸåè®¿é—®1ã€é…ç½®urlå’Œsshåè®®ç«¯å£vim /opt/gitlab/config/gitlab.rbï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 23, uncomment and changeexternal_url &#x27;http://gitlab.voidking.com&#x27;# line 56, uncomment and changegitlab_rails[&#x27;gitlab_ssh_host&#x27;] = &#x27;gitlab.voidking.com&#x27;# line 456, uncomment and changegitlab_rails[&#x27;gitlab_shell_ssh_port&#x27;] = 3422

è¯¥é…ç½®çš„æ•ˆæœæ˜¯ï¼Œå½“ç”¨æˆ·åœ¨gitlabé¡¹ç›®é¡µé¢ç‚¹å‡»Cloneæ—¶ï¼ŒClone with HTTPå’ŒClone with SSHçš„ç»“æœç±»ä¼¼äºï¼š
http://gitlab.voidking.com/root/voidking.gitssh://git@gitlab.voidking.com:3422/root/voidking.git

2ã€é‡å¯vk-gitlabdocker restart vk-gitlab
3ã€ä¿®æ”¹ä¸»æœºhosts
192.168.56.130  gitlab.voidking.com

4ã€æµ‹è¯•è®¿é—®æµè§ˆå™¨è®¿é—®ï¼šhttp://gitlab.voidking.com
httpsåŸŸåè®¿é—®å‚è€ƒã€ŠCentOS7å®‰è£…é…ç½®GitLabã€‹æ·»åŠ SSLä¸€èŠ‚ï¼Œç”Ÿæˆè¯ä¹¦ï¼Œé…ç½®gitlabä½¿ç”¨è¯ä¹¦ï¼Œå¹¶ä¸”æ·»åŠ åˆ°æµè§ˆå™¨ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>git</tag>
        <tag>gitlab</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Dockerå®‰è£…é…ç½®MySQL</title>
    <url>/dev-docker-mysql/</url>
    <content><![CDATA[å‰è¨€ã€ŠCentOS7è®¾ç½®mysqlå¼€æœºè‡ªå¯åŠ¨ã€‹å’Œã€ŠCentOSå®‰è£…å¤šç‰ˆæœ¬MySQLã€‹ä¸­éƒ½æ¶‰åŠäº†Mysqlçš„å®‰è£…æ–¹æ³•ï¼Œæœ¬æ–‡ä¸­ä¼šæä¾›ä¸€ä¸ªæ›´å¥½çš„Mysqlå®‰è£…æ–¹æ³•ã€‚
å‰ç½®æ¡ä»¶æ˜¯å®‰è£…é…ç½®å¥½äº†dockerç¯å¢ƒï¼Œå®‰è£…æ–¹æ³•å‚è€ƒã€ŠDockerå…¥é—¨ã€‹ã€‚å·²çŸ¥dockerå®¿ä¸»æœºIPä¸º192.168.56.130ã€‚


å®‰è£…MySQLå®‰è£…MySQL5.7.x1ã€ç™»å½•dockerhubæŸ¥çœ‹éœ€è¦çš„mysqlç‰ˆæœ¬ã€‚
2ã€ä¸‹è½½mysqlé•œåƒï¼ˆä»¥mysql5.7.28ä¸ºä¾‹ï¼‰
docker pull mysql:5.7.28

3ã€å¯åŠ¨mysqlæœåŠ¡
docker run --name vk-mysql -d \-p 3306:3306 \-v /opt/data/mysql:/var/lib/mysql \-e MYSQL_ROOT_PASSWORD=voidking \mysql:5.7.28

ä»¥ä¸Šå‘½ä»¤ï¼š

å‘½åå®¹å™¨ä¸ºvk-mysqlï¼Œåå°è¿è¡Œ
æ˜ å°„å®¿ä¸»æœº3306ç«¯å£åˆ°å®¹å™¨3306ç«¯å£
æ˜ å°„å®¿ä¸»æœº/opt/data/mysqlç›®å½•ï¼ˆä¸éœ€è¦æå‰åˆ›å»ºç›®å½•ï¼‰åˆ°å®¹å™¨/var/lib/mysqlï¼Œç”¨äºå­˜å‚¨mysqlæ•°æ®åˆ°å®¿ä¸»æœº
è®¾ç½®æ•°æ®åº“å¯†ç ä¸ºvoidking

æ›´é«˜çº§çš„å¯åŠ¨å‘½ä»¤å‚è€ƒHow to use this imageã€‚
4ã€éªŒè¯å®‰è£…docker psmysqlå¯åŠ¨æ­£å¸¸çš„è¯å°±å¯ä»¥çœ‹åˆ°vk-mysqlå®¹å™¨ã€‚å¦‚æœå¯åŠ¨å¤±è´¥ï¼Œå¯ä»¥ä½¿ç”¨docker logs vk-mysqlæŸ¥çœ‹å¤±è´¥åŸå› å¹¶è¿›è¡Œè§£å†³ã€‚
å®‰è£…MySQL8.0.xå‚è€ƒæ–‡æ¡£ï¼š

Dockerå®‰è£…æœ€æ–°ç‰ˆMySQL8ï¼ˆmysql-8.0.31ï¼‰æ•™ç¨‹
MySQL Product Archives
MySQL8.0 æ¸…åé•œåƒç«™

1ã€ç™»å½•dockerhubæŸ¥çœ‹éœ€è¦çš„mysqlç‰ˆæœ¬ã€‚
2ã€ä¸‹è½½mysqlé•œåƒï¼ˆä»¥mysql8.0.28ä¸ºä¾‹ï¼‰
docker pull mysql:8.0.28

3ã€å¯åŠ¨mysqlæœåŠ¡
docker run --name vk-mysql -d \-p 3306:3306 \-v /opt/mysql/mysql-files:/var/lib/mysql-files \-v /opt/mysql/conf.d:/etc/mysql/conf.d \-v /opt/mysql/data:/var/lib/mysql \-v /opt/mysql/log:/var/log/mysql \-e MYSQL_ROOT_PASSWORD=voidking \mysql:8.0.28

ä»¥ä¸Šå‘½ä»¤ï¼š

å‘½åå®¹å™¨ä¸ºvk-mysqlï¼Œåå°è¿è¡Œ
æ˜ å°„å®¿ä¸»æœº3306ç«¯å£åˆ°å®¹å™¨3306ç«¯å£
æ˜ å°„å®¿ä¸»æœº/opt/mysqlç›®å½•ä¸‹çš„å­ç›®å½•åˆ°å®¹å™¨ç›®å½•ï¼Œç”¨äºå­˜å‚¨mysqlæ•°æ®åˆ°å®¿ä¸»æœº
è®¾ç½®æ•°æ®åº“å¯†ç ä¸ºvoidking

æ›´é«˜çº§çš„å¯åŠ¨å‘½ä»¤å‚è€ƒHow to use this imageã€‚
4ã€éªŒè¯å®‰è£…docker psmysqlå¯åŠ¨æ­£å¸¸çš„è¯å°±å¯ä»¥çœ‹åˆ°vk-mysqlå®¹å™¨ã€‚å¦‚æœå¯åŠ¨å¤±è´¥ï¼Œå¯ä»¥ä½¿ç”¨docker logs vk-mysqlæŸ¥çœ‹å¤±è´¥åŸå› å¹¶è¿›è¡Œè§£å†³ã€‚
é»˜è®¤é…ç½®æ–‡ä»¶ä¸º/etc/my.cnfï¼Œä¼šå¼•ç”¨/etc/mysql/conf.d/ç›®å½•ä¸­çš„ä»¥cnfç»“å°¾é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚custom.cnfã€‚
[mysqld]general_log_file=/var/log/mysql/mysql.loggeneral_log = 1

ä¸Šé¢çš„é…ç½®ï¼Œä¼šå¼€å¯sqlæ—¥å¿—ã€‚
æµ‹è¯•è®¿é—®å®¹å™¨å†…è®¿é—®docker exec -it vk-mysql /bin/bashmysql -uroot -p

å®¿ä¸»æœºä¸Šè®¿é—®centos7ä¸Šè®¿é—®mysql server5.7.x
yum install -y mariadb.x86_64 mariadb-libs.x86_64mysql -h 127.0.0.1 -uroot -p

centos7ä¸Šè®¿é—®mysql server8.0.x
wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpmcurl -L https://repo.mysql.com/RPM-GPG-KEY-mysql-2022 -o /etc/pki/rpm-gpg/RPM-GPG-KEY-mysqlrpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-mysqlrpm -ivh mysql80-community-release-el7-3.noarch.rpm # å®‰è£…repoæºyum makecacheyum list | grep mysqlyum list mysql-community-client --showduplicates | sort -ryum install mysql-community-client-8.0.28-1.el7.x86_64 --setopt=protected_multilib=false

ubuntu18ä¸Šè®¿é—®mysql server5.7.x
#apt install mysql-client-core-8.0apt install mysql-client-core-5.7mysql -h 127.0.0.1 -uroot -p

å¼€æ”¾è®¿é—®1ã€å¼€æ”¾ç«¯å£
# centosfirewall-cmd --add-port=3306/tcp --permanentsystemctl reload firewalld# æˆ–è€…systemctl stop firewalld# ubuntu18ufw allow 3306

2ã€å®‰è£…mysql-clientï¼Œæ–¹æ³•åŒä¸Š
3ã€è®¿é—®mysql-server
mysql -h 192.168.56.130 -P 3306 -u root -p
è¾“å…¥å¯†ç ï¼Œå³å¯è¿æ¥åˆ°vk-mysqlå®¹å™¨æœåŠ¡ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>mysql</tag>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨LastPassç®¡ç†å¯†ç </title>
    <url>/dev-manage-pwd-by-lastpass/</url>
    <content><![CDATA[å‰è¨€ä¹‹å‰æ•´ç†è¿‡ä¸€ç¯‡ã€Šä½¿ç”¨KeePassç®¡ç†å¯†ç ã€‹ï¼Œä¹Ÿå®é™…ä½¿ç”¨äº†ä¸€æ®µæ—¶é—´çš„KeePassï¼Œä½†æ˜¯å‘ç°è¿™ä¸ªå·¥å…·å¹¶ä¸èƒ½å¾ˆå¥½åœ°æ»¡è¶³è‡ªå·±çš„éœ€æ±‚ã€‚å› ä¸ºKeePassé€‚åˆç”¨æ¥æœ¬åœ°å­˜å‚¨å¯†ç ï¼Œä½†æ˜¯ç”¨æ¥è‡ªåŠ¨å¡«å……å¯†ç ï¼Œè¿˜æ˜¯ä¸å¤Ÿå¥½ç”¨ã€‚
æœ¬æ–‡ä¸­ï¼Œå°†ä¼šå­¦ä¹ ä½¿ç”¨æ›´åŠ æ–¹ä¾¿çš„LastPassï¼Œç”¨æ¥å­˜å‚¨ç®¡ç†å®‰å…¨çº§åˆ«ä¸ºå•†å¯†å’Œæ™®å¯†çš„å¯†ç ã€‚


ç®€å•ä½¿ç”¨1ã€è®¿é—®LastPasså®˜ç½‘ï¼Œåˆ›å»ºè´¦å·ï¼Œç„¶ååœ¨chromeå®‰è£…LastPassæ’ä»¶ã€‚
2ã€åœ¨chromeç™»å½•lastpassè´¦å·ã€‚
3ã€æ­£å¸¸è®¿é—®ç½‘ç«™ï¼Œç™»å½•åä¼šæç¤ºä¿å­˜å¯†ç åˆ°lastpassï¼Œä¸‹æ¬¡ç™»å½•å³å¯è‡ªåŠ¨å¡«å……å¯†ç ã€‚
å¯¼å‡ºå¯¼å…¥å¯†ç keepasså¯¼å‡ºå¯†ç å‡è®¾ä¹‹å‰ä½¿ç”¨keepassç®¡ç†å¯†ç ï¼Œéœ€è¦è¿›è¡Œå¯¼å‡ºã€‚1ã€ä½¿ç”¨keepassæ‰“å¼€æ•°æ®åº“æ–‡ä»¶
2ã€Fileï¼ŒExportï¼ŒKeePass XMLï¼ŒExport toï¼ŒOKã€‚
lastpasså¯¼å…¥å¯†ç 1ã€ç‚¹å‡»lastpasså›¾æ ‡ï¼ŒAccount Optionsï¼ŒAdvanceï¼ŒImportï¼ŒOtherã€‚
2ã€Sourceé€‰æ‹©KeePass
3ã€ä½¿ç”¨æ‰“å¼€xmlå¯†ç æ–‡ä»¶ï¼Œå¤åˆ¶ï¼Œç²˜è´´åˆ°Cententã€‚
4ã€UPLOADï¼ŒIMPORT SELECTEDæˆ–è€…IMPORT ALLã€‚
lastpasså¯¼å‡ºå¯†ç 1ã€ç‚¹å‡»lastpasså›¾æ ‡ï¼ŒAccount Optionsï¼ŒAdvanceï¼ŒExportï¼ŒLastPass CSV Fileã€‚
2ã€å¤åˆ¶é¡µé¢çš„æ–‡æœ¬ï¼Œä¿å­˜ä¸ºcsvæ–‡ä»¶ã€‚
åè®°å’Œkeepassç›¸æ¯”ï¼Œlastpassç¡®å®æ›´åŠ å®ç”¨ã€‚ä¸ªäººç»éªŒæ˜¯ä½¿ç”¨lastpassä»£æ›¿chromeçš„å¯†ç ç®¡ç†ï¼Œä¿å­˜ç®¡ç†å•†å¯†å’Œæ™®å¯†ï¼›ä½¿ç”¨keepassæˆ–è€…å…¶ä»–æ–¹æ³•ä¿å­˜æ ¸å¯†ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>chrome</tag>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title>K8SèŠ‚ç‚¹å…³æœºåä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</title>
    <url>/dev-k8s-node-shutdown/</url>
    <content><![CDATA[é—®é¢˜æè¿°å½“ä¸€ä¸ªk8sèŠ‚ç‚¹å…³æœºåï¼Œk8sä¼šå¯¹podåšä»€ä¹ˆæ“ä½œï¼Ÿç­”ï¼šk8så‘ç°èŠ‚ç‚¹ä¸å¯ç”¨ä¹‹åï¼Œè¿‡ä¸€æ®µæ—¶é—´èŠ‚ç‚¹è¿˜æ²¡æœ‰æ¢å¤ï¼Œä¼šåœ¨å…¶ä»–èŠ‚ç‚¹ä¸Šæ‹‰èµ·æŒ‚æ‰èŠ‚ç‚¹ä¸Šçš„podã€‚
è¿™ä¸ªå›ç­”å¯¹ï¼Œä½†æ˜¯åªå¯¹äº†ä¸€åŠã€‚é€‚ç”¨äºdeploymentï¼Œå¹¶ä¸é€‚ç”¨äºstatefulsetã€‚


æ­£ç¡®è§£ç­”å‚è€ƒæ–‡æ¡£ï¼š

èŠ‚ç‚¹éä½“é¢å…³é—­
Kubernetes 1.24: èŠ‚ç‚¹éä½“é¢å…³é—­ç‰¹æ€§è¿›å…¥ Alpha é˜¶æ®µ

k8sèŠ‚ç‚¹å…³é—­åˆ†ä¸ºèŠ‚ç‚¹ä½“é¢å…³é—­å’ŒèŠ‚ç‚¹éä½“é¢å…³é—­ã€‚
èŠ‚ç‚¹ä½“é¢å…³é—­kubelet ä¼šå°è¯•æ£€æµ‹èŠ‚ç‚¹ç³»ç»Ÿå…³é—­äº‹ä»¶å¹¶ç»ˆæ­¢åœ¨èŠ‚ç‚¹ä¸Šè¿è¡Œçš„æ‰€æœ‰ Podã€‚
åœ¨èŠ‚ç‚¹ç»ˆæ­¢æœŸé—´ï¼Œkubelet ä¿è¯ Pod éµä»å¸¸è§„çš„ Pod ç»ˆæ­¢æµç¨‹ã€‚
èŠ‚ç‚¹ä½“é¢å…³é—­ç‰¹æ€§ä¾èµ–äº systemdï¼Œå› ä¸ºå®ƒè¦åˆ©ç”¨ systemd æŠ‘åˆ¶å™¨é”æœºåˆ¶ï¼Œ åœ¨ç»™å®šçš„æœŸé™å†…å»¶è¿ŸèŠ‚ç‚¹å…³é—­ã€‚
èŠ‚ç‚¹ä½“é¢å…³é—­ç‰¹æ€§å— GracefulNodeShutdown ç‰¹æ€§é—¨æ§æ§åˆ¶ï¼Œ åœ¨ 1.21 ç‰ˆæœ¬ä¸­æ˜¯é»˜è®¤å¯ç”¨çš„ã€‚
åœ¨ä½“é¢å…³é—­èŠ‚ç‚¹è¿‡ç¨‹ä¸­ï¼Œkubelet åˆ†ä¸¤ä¸ªé˜¶æ®µæ¥ç»ˆæ­¢ Podï¼š

ç»ˆæ­¢åœ¨èŠ‚ç‚¹ä¸Šè¿è¡Œçš„å¸¸è§„ Podã€‚
ç»ˆæ­¢åœ¨èŠ‚ç‚¹ä¸Šè¿è¡Œçš„å…³é”® Podã€‚

èŠ‚ç‚¹éä½“é¢å…³é—­èŠ‚ç‚¹å…³é—­çš„æ“ä½œå¯èƒ½æ— æ³•è¢« kubelet çš„èŠ‚ç‚¹å…³é—­ç®¡ç†å™¨æ£€æµ‹åˆ°ï¼Œ æ˜¯å› ä¸ºè¯¥å‘½ä»¤ä¸ä¼šè§¦å‘ kubelet æ‰€ä½¿ç”¨çš„æŠ‘åˆ¶é”å®šæœºåˆ¶ï¼Œæˆ–è€…æ˜¯å› ä¸ºç”¨æˆ·é”™è¯¯çš„åŸå› ï¼Œ å³ ShutdownGracePeriod å’Œ ShutdownGracePeriodCriticalPod é…ç½®ä¸æ­£ç¡®ã€‚
å½“æŸèŠ‚ç‚¹å…³é—­ä½† kubelet çš„èŠ‚ç‚¹å…³é—­ç®¡ç†å™¨æœªæ£€æµ‹åˆ°è¿™ä¸€äº‹ä»¶æ—¶ï¼Œ åœ¨é‚£ä¸ªå·²å…³é—­èŠ‚ç‚¹ä¸Šã€å±äº StatefulSet çš„ Pod å°†åœæ»äºç»ˆæ­¢çŠ¶æ€ï¼Œå¹¶ä¸”ä¸èƒ½ç§»åŠ¨åˆ°æ–°çš„è¿è¡ŒèŠ‚ç‚¹ä¸Šã€‚ è¿™æ˜¯å› ä¸ºå·²å…³é—­èŠ‚ç‚¹ä¸Šçš„ kubelet å·²ä¸å­˜åœ¨ï¼Œäº¦æ— æ³•åˆ é™¤ Podï¼Œ å› æ­¤ StatefulSet æ— æ³•åˆ›å»ºåŒåçš„æ–° Podã€‚ å¦‚æœ Pod ä½¿ç”¨äº†å·ï¼Œåˆ™ VolumeAttachments ä¸ä¼šä»åŸæ¥çš„å·²å…³é—­èŠ‚ç‚¹ä¸Šåˆ é™¤ï¼Œ å› æ­¤è¿™äº› Pod æ‰€ä½¿ç”¨çš„å·ä¹Ÿæ— æ³•æŒ‚æ¥åˆ°æ–°çš„è¿è¡ŒèŠ‚ç‚¹ä¸Šã€‚ æ‰€ä»¥ï¼Œé‚£äº›ä»¥ StatefulSet å½¢å¼è¿è¡Œçš„åº”ç”¨æ— æ³•æ­£å¸¸å·¥ä½œã€‚ å¦‚æœåŸæ¥çš„å·²å…³é—­èŠ‚ç‚¹è¢«æ¢å¤ï¼Œkubelet å°†åˆ é™¤ Podï¼Œæ–°çš„ Pod å°†è¢«åœ¨ä¸åŒçš„è¿è¡ŒèŠ‚ç‚¹ä¸Šåˆ›å»ºã€‚ å¦‚æœåŸæ¥çš„å·²å…³é—­èŠ‚ç‚¹æ²¡æœ‰è¢«æ¢å¤ï¼Œé‚£äº›åœ¨å·²å…³é—­èŠ‚ç‚¹ä¸Šçš„ Pod å°†æ°¸è¿œæ»ç•™åœ¨ç»ˆæ­¢çŠ¶æ€ã€‚
ä¸ºäº†ç¼“è§£ä¸Šè¿°æƒ…å†µï¼Œç”¨æˆ·å¯ä»¥æ‰‹åŠ¨å°†å…·æœ‰ NoExecute æˆ– NoSchedule æ•ˆæœçš„ node.kubernetes.io/out-of-service æ±¡ç‚¹æ·»åŠ åˆ°èŠ‚ç‚¹ä¸Šï¼Œæ ‡è®°å…¶æ— æ³•æä¾›æœåŠ¡ã€‚ å¦‚æœåœ¨ kube-controller-manager ä¸Šå¯ç”¨äº† NodeOutOfServiceVolumeDetach ç‰¹æ€§é—¨æ§ï¼Œ å¹¶ä¸”èŠ‚ç‚¹è¢«é€šè¿‡æ±¡ç‚¹æ ‡è®°ä¸ºæ— æ³•æä¾›æœåŠ¡ï¼Œå¦‚æœèŠ‚ç‚¹ Pod ä¸Šæ²¡æœ‰è®¾ç½®å¯¹åº”çš„å®¹å¿åº¦ï¼Œ é‚£ä¹ˆè¿™æ ·çš„ Pod å°†è¢«å¼ºåˆ¶åˆ é™¤ï¼Œå¹¶ä¸”è¯¥åœ¨èŠ‚ç‚¹ä¸Šè¢«ç»ˆæ­¢çš„ Pod å°†ç«‹å³è¿›è¡Œå·åˆ†ç¦»æ“ä½œã€‚ è¿™æ ·å°±å…è®¸é‚£äº›åœ¨æ— æ³•æä¾›æœåŠ¡èŠ‚ç‚¹ä¸Šçš„ Pod èƒ½åœ¨å…¶ä»–èŠ‚ç‚¹ä¸Šå¿«é€Ÿæ¢å¤ã€‚
åœ¨éä½“é¢å…³é—­æœŸé—´ï¼ŒPod åˆ†ä¸¤ä¸ªé˜¶æ®µç»ˆæ­¢ï¼š

å¼ºåˆ¶åˆ é™¤æ²¡æœ‰åŒ¹é…çš„ out-of-service å®¹å¿åº¦çš„ Podã€‚
ç«‹å³å¯¹æ­¤ç±» Pod æ‰§è¡Œåˆ†ç¦»å·æ“ä½œã€‚

statefulsetå¤„ç†å¦‚æœæ²¡æœ‰é…ç½®èŠ‚ç‚¹ä½“é¢å…³é—­ï¼Œç›´æ¥å…³æœºäº†ä¸€ä¸ªk8sèŠ‚ç‚¹ï¼Œæ€æ ·æ¢å¤èŠ‚ç‚¹ä¸Šçš„statefulset podï¼Ÿç­”ï¼šå¼ºåˆ¶åˆ é™¤statefulset podï¼ˆä»k8s apiserverä¸­åˆ é™¤ï¼‰ã€‚ä¾‹å¦‚ï¼š
kubectl delete pod mysql-2 -n mysql --force

åè®°å¾ˆå¤šé—®é¢˜å¹¶ä¸æ˜¯æƒ³è±¡çš„é‚£æ ·ï¼Œä¸èƒ½æƒ³å½“ç„¶ï¼Œè¿˜æ˜¯éœ€è¦å¥½å¥½è¯»ä¸€ék8sæ–‡æ¡£ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>k8s</category>
        <category>cloudnative</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
      </tags>
  </entry>
  <entry>
    <title>å½“K8Sé‡åˆ°PM2</title>
    <url>/dev-k8s-pm2/</url>
    <content><![CDATA[é—®é¢˜æè¿°æŸä¸ªå‰ç«¯é¡¹ç›®ä½¿ç”¨PM2è¿›è¡Œnodeè¿›ç¨‹çš„ç®¡ç†ï¼ŒæŠŠè¯¥é¡¹ç›®æ‰“åŒ…æ”¾åˆ°äº†dockeré•œåƒä¸­ï¼Œä½¿ç”¨docker runå‘½ä»¤å¯ä»¥æ­£å¸¸å¯åŠ¨ã€‚ä½†æ˜¯ï¼ŒæŠŠdockeré•œåƒæ”¾å…¥K8Sé›†ç¾¤åï¼Œå¯åŠ¨æŠ¥é”™ï¼Œ[PM2][ERROR] Process failed to launch spawn E2BIGã€‚


è§£å†³æ–¹æ¡ˆæŸ¥é˜…èµ„æ–™å‘ç°ï¼Œä¸Šé¢çš„é—®é¢˜ï¼Œæ˜¯å› ä¸ºç¯å¢ƒå˜é‡è¿‡å¤šå¼•èµ·çš„ã€‚K8Så¯åŠ¨æ—¶ä¼šç»™å®¹å™¨æ³¨å…¥ç¯å¢ƒå˜é‡ï¼ŒK8Sé›†ç¾¤ä¸­çš„é¡¹ç›®æ•°è¶Šå¤šï¼Œç¯å¢ƒå˜é‡ä¹Ÿå°±è¶Šå¤šã€‚è€Œpm2åœ¨å¯åŠ¨æ—¶ä¼šå¯¼å…¥ç³»ç»Ÿä¸­çš„ç¯å¢ƒå˜é‡ï¼Œå½“ç¯å¢ƒå˜é‡æ•°é‡è¿‡å¤šæ—¶ï¼Œå°±ä¼šæŠ¥é”™[PM2][ERROR] Process failed to launch spawn E2BIGã€‚
ä½¿ç”¨envæˆ–è€…printenvå‘½ä»¤æŸ¥çœ‹å®¹å™¨ä¸­çš„å˜é‡ï¼Œæœç„¶ç¯å¢ƒå˜é‡ç‰¹åˆ«å¤šã€‚è§£å†³æ–¹æ¡ˆä¹Ÿå°±æ˜ç¡®äº†ï¼šå‡å°‘ç¯å¢ƒå˜é‡ã€‚
ä¿®æ”¹pm2æºç ç¬¬ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯ä¿®æ”¹pm2æºç ï¼Œè¿‡æ»¤æ‰ç¯å¢ƒå˜é‡ã€‚ç¼–è¾‘/usr/local/lib/node_modules/pm2/lib/Common.jsï¼Œä¿®æ”¹process.envéƒ¨åˆ†ã€‚
function filterDockerEnv(envObj)&#123;	let keys = Object.keys(envObj);	let new_env = &#123;&#125;;	let allowKeys = keys.filter(item =&gt; !item.startsWith(&quot;ENV_HOST_&quot;));	allowKeys.forEach(key =&gt; &#123;		new_env[key] = envObj[key];	&#125;);	return new_env;&#125;var newEnv = filterDockerEnv(env);// Change to double check  (dropped , &#123;pm_cwd: cwd&#125;)app.env = [&#123;&#125;, newEnv, app.env || &#123;&#125;].reduce(function(e1, e2)&#123;	return util._extend(e1, e2);&#125;);

æ¸…é™¤ç¯å¢ƒå˜é‡ç¬¬äºŒä¸ªæ–¹æ¡ˆæ˜¯åœ¨pm2å¯åŠ¨å‰æ¸…é™¤ç³»ç»Ÿä¸­çš„ç¯å¢ƒå˜é‡ã€‚æ­£å¸¸å¯åŠ¨å‘½ä»¤å‰ï¼Œå…ˆæ‰§è¡Œä¸€æ®µæ¸…é™¤ç³»ç»Ÿå˜é‡çš„è„šæœ¬ã€‚
for i in `env | grep -E -i &#x27;SERVICE|HOST|ADDR|PORT&#x27; | sed &#x27;s/=.*//&#x27;` ; do unset $i;done

ç¬¬äºŒç§æ–¹æ¡ˆæ›´åŠ çµæ´»ï¼Œæ¨èä½¿ç”¨è¿™ç§æ–¹å¼ã€‚
ä¹¦ç­¾
ä¸€æ¬¡NodeJSæµ‹è¯•é›†ç¾¤å…¨çº¿ç˜«ç—ªçš„è§£å†³æ€è·¯
ä¸€æ¬¡ç¯å¢ƒå˜é‡å¼•å‘çš„è¡€æ¡ˆ
[PM2][ERROR] Process failed to launch spawn E2BIG

]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>k8s</category>
        <category>frontend</category>
        <category>cloudnative</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
        <tag>å‰ç«¯</tag>
        <tag>node</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>pm2</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockerå†…éƒ¨ä½¿ç”¨Supervisor</title>
    <url>/dev-docker-supervisor/</url>
    <content><![CDATA[é—®é¢˜æè¿°ä½¿ç”¨docker runå¯åŠ¨ä¸€ä¸ªbeegoæœåŠ¡ï¼Œå‘½ä»¤ä¸ºï¼š
docker run --name bservice -d -p 8080:8080 voidking/bservice:v1 &quot;/bin/bash&quot; &quot;-c&quot; &quot;cd /opt/bservice &amp;&amp; nohup ./bservice&quot;
å¯åŠ¨åï¼ŒbeegoæœåŠ¡æ˜¯å®¹å™¨å†…PIDä¸º1çš„å‰å°è¿›ç¨‹ã€‚å‡è®¾è¯¥æœåŠ¡ä¸æ˜¯é‚£ä¹ˆå¥å£®ï¼Œå‡ºäº†bugä¼šåœæ­¢æœåŠ¡ï¼Œé‚£ä¹ˆå®¹å™¨ä¹Ÿä¼šéšä¹‹åœæ­¢ã€‚å¦‚æœæƒ³è¦æœåŠ¡åœæ­¢åè‡ªåŠ¨å¯åŠ¨ï¼Œé‚£ä¹ˆå°±éœ€è¦supervisorå‡ºé©¬äº†ã€‚


è§£å†³æ–¹æ¡ˆå‚è€ƒã€ŠCentOSå®‰è£…é…ç½®Supervisorã€‹ï¼Œåœ¨å®¹å™¨ä¸­å®‰è£…supervisorã€‚
1ã€åœ¨/etc/supervisorä¸­æ–°å»ºbservice.confæ–‡ä»¶
[program:bservice]directory=/opt/bservicecommand=/opt/bservice/bserviceuser=rootautostart=trueautorestart=truestdout_logfile=/var/log/supervisor/%(program_name)s.logstderr_logfile=/var/log/supervisor/%(program_name)s.log

2ã€æµ‹è¯•å¯åŠ¨
systemctl retart supervisordsupervisorctl statusps aux | grep bservice

3ã€ç¼–è¾‘/etc/supervisord.confï¼Œè®¾ç½®supervisorä¸ºå‰å°è¿›ç¨‹
nodaemon=true

4ã€æŠŠå®¹å™¨ä¿å­˜ä¸ºé•œåƒ
docker commit container_id voidking/bservice:v2

5ã€ä¿®æ”¹å¯åŠ¨å‘½ä»¤ä¸º
docker run --name bservice -d -p 8080:8080 voidking/bservice:v2 &quot;/bin/bash&quot; &quot;-c&quot; &quot;supervisord -c /etc/supervisord.conf&quot;

ä½¿ç”¨è¿™ç§å¯åŠ¨æ–¹å¼ï¼Œå“ªæ€•æœåŠ¡å› ä¸ºæ„å¤–åœæ­¢ï¼Œä¹Ÿä¼šé©¬ä¸Šè¢«supervisoræ‹‰èµ·ï¼Œæé«˜äº†æœåŠ¡çš„å¯ç”¨æ€§ã€‚
æ‰©å±•åº”ç”¨å†æ¥çœ‹å¦å¤–ä¸€ä¸ªåœºæ™¯ï¼šnpm run startåŸæœ¬å¯ä»¥æ­£å¸¸å¯åŠ¨nodeæœåŠ¡è¿›å…¥åå°è¿è¡Œï¼Œå®¹å™¨åŒ–åé€šè¿‡docker runå¯åŠ¨ï¼Œå‘½ä»¤ä¸ºï¼š
docker run --name fservice -d -p 80:80 voidking/fservice:v1 &quot;/bin/bash&quot; &quot;-c&quot; &quot;cd /opt/fservice &amp;&amp; npm run start&quot;
å°´å°¬çš„æ˜¯ï¼Œå®¹å™¨å¯åŠ¨åå°±ä¼šè‡ªåŠ¨é€€å‡ºï¼Œè¿™æ˜¯å› ä¸ºå®¹å™¨è¿è¡Œå¿…é¡»è¦ä¸€ä¸ªå‰å°è¿›ç¨‹ã€‚å› æ­¤ä¸€ä¸ªç®€å•çš„è§£å†³åŠæ³•æ˜¯ä¿®æ”¹å¯åŠ¨å‘½ä»¤ï¼Œæ·»åŠ tail -fï¼š
docker run --name fservice -d -p 80:80 voidking/fservice:v1 &quot;/bin/bash&quot; &quot;-c&quot; &quot;cd /opt/fservice &amp;&amp; npm run start &gt; ./start.log &amp;&amp; tail -f ./start.log&quot;

ä½†æ˜¯ï¼Œæ›´å¥½çš„åŠæ³•è¿˜æ˜¯ä½¿ç”¨supervisorè¿›è¡ŒnodeæœåŠ¡çš„ç®¡ç†ã€‚åŒæ ·éœ€è¦åœ¨å®¹å™¨ä¸­å®‰è£…supervisorï¼Œç„¶åè¿›è¡Œé…ç½®ã€‚
1ã€åœ¨/etc/supervisorä¸­æ–°å»ºfservice.confæ–‡ä»¶
[program:fservice]directory=/opt/fservicecommand=npm run startuser=rootautostart=trueautorestart=truestdout_logfile=/var/log/supervisor/%(program_name)s.logstderr_logfile=/var/log/supervisor/%(program_name)s.log

2ã€æµ‹è¯•å¯åŠ¨
systemctl retart supervisordsupervisorctl statusps aux | grep fservice

3ã€ç¼–è¾‘/etc/supervisord.confï¼Œè®¾ç½®supervisorä¸ºå‰å°è¿›ç¨‹
nodaemon=true

4ã€æŠŠå®¹å™¨ä¿å­˜ä¸ºé•œåƒ
docker commit container_id voidking/fservice:v2

5ã€ä¿®æ”¹å¯åŠ¨å‘½ä»¤ä¸º
docker run --name bservice -d -p 8080:8080 voidking/fservice:v2 &quot;/bin/bash&quot; &quot;-c&quot; &quot;supervisord -c /etc/supervisord.conf&quot;]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS6.8ä¸ŠPython2.6.6å‡çº§Python2.7.15</title>
    <url>/dev-centos68-python26-to-python27/</url>
    <content><![CDATA[å‰è¨€
Python 2.6 is no longer supported by the Python core team, please upgrade your Python.

è™½ç„¶Python2.6å·²ç»ä¸å†ç»´æŠ¤ï¼Œä½†æ˜¯CentOS6.8ç³»ç»Ÿé‡Œé»˜è®¤çš„Pythonç‰ˆæœ¬ä¾ç„¶æ˜¯2.6.6ã€‚è¿™å°±å¾ˆå°´å°¬äº†ï¼Œè¦ä¹ˆå‡‘åˆç”¨ï¼Œä½†æ˜¯æ²¡æœ‰pipå‘½ä»¤ï¼Œå¸¸è§„å®‰è£…pipçš„æ–¹æ³•è¿˜ä¼šå¤±è´¥ã€‚è¦ä¹ˆè¿›è¡Œå‡çº§ï¼Œä½†æ˜¯æ•´ä¸ªè¿‡ç¨‹å¾ˆéº»çƒ¦ã€‚æœ¬æ–‡è®°å½•ä¸€ä¸‹2.6.6å‡‘åˆç”¨çš„æ–¹æ³•ï¼Œä»¥åŠå‡çº§2.7.15çš„æ–¹æ³•ã€‚


å‡‘åˆç”¨å‚è€ƒpython2.6å®‰è£…pipã€‚
curl https://bootstrap.pypa.io/2.6/get-pip.py -o get-pip.pypython get-pip.py

å‡çº§å‚è€ƒcentos6.5å‡çº§åˆ°python2.7ã€‚
1ã€å®‰è£…ç¼–è¯‘ä¾èµ–
yum -y install gcc openssl-devel bzip2-devel

2ã€ä¸‹è½½å®‰è£…åŒ…å¹¶è§£å‹
cd /optwget https://www.python.org/ftp/python/2.7.15/Python-2.7.15.tgztar xvzf Python-2.7.15.tgz

3ã€å®‰è£…
cd Python-2.7.15./configure --enable-optimizationsmake &amp;&amp; make altinstall
configureæ—¶åŠ ä¸Šenable-optimizationsï¼Œå¯ç”¨PGOä¼˜åŒ–ï¼Œè®©Pythonåœ¨è¿è¡Œæ—¶èƒ½å˜å¾—æ›´å¿«ã€‚make åŠ altinstallå‚æ•°ï¼Œé¿å…è¦†ç›–åŸæ¥å®‰è£…åœ¨/usr/bin/python çš„ç‰ˆæœ¬ã€‚
4ã€æ£€æŸ¥å®‰è£…/usr/local/bin/python2.7 -V
5ã€ä¿®æ”¹ç³»ç»Ÿé»˜è®¤python
mv /usr/bin/python /usr/bin/python2.6.6 ln -s /usr/local/bin/python2.7 /usr/bin/python

6ã€è§£å†³yumä¸æ”¯æŒpython2.7çš„é—®é¢˜sed -i &#39;s/python/python2.6.6/&#39; /usr/bin/yum
7ã€å®‰è£…pip
python -m ensurepippip -V

æˆ–è€…ï¼š
wget https://bootstrap.pypa.io/get-pip.pypython get-pip.py -i http://pypi.douban.com/simple/ --trusted-host pypi.douban.com

ä»¥ä¸Šï¼Œå‡çº§å®Œæˆã€‚
æŠ¥é”™è§£å†³pippip -V å¦‚æœæŠ¥é”™ï¼špkg_resources.DistributionNotFound: The â€˜pip==7.1.0â€™ distribution was not found and is required by the application
é‚£ä¹ˆæ ¹æ® python -m ensurepip è¾“å‡ºçš„ç‰ˆæœ¬ï¼Œä¿®æ”¹ /usr/bin/pip æ–‡ä»¶é‡Œpipçš„ç‰ˆæœ¬ã€‚è¿™é‡Œæˆ‘çš„è¾“å‡ºä¸º pip-9.0.3 ï¼Œé‚£ä¹ˆä¿®æ”¹ç»“æœå¦‚ä¸‹ï¼š
#!/usr/bin/python# EASY-INSTALL-ENTRY-SCRIPT: &#x27;pip==7.1.0&#x27;,&#x27;console_scripts&#x27;,&#x27;pip&#x27;__requires__ = &#x27;pip==9.0.3&#x27;import sysfrom pkg_resources import load_entry_pointif __name__ == &#x27;__main__&#x27;:    sys.exit(        load_entry_point(&#x27;pip==9.0.3&#x27;, &#x27;console_scripts&#x27;, &#x27;pip&#x27;)()    )

å†æ¬¡æ‰§è¡Œ pip -V ï¼Œå³å¯çœ‹åˆ°å‡çº§åçš„pipç‰ˆæœ¬ã€‚
easy_installeasy_install -h å¦‚æœæŠ¥é”™ï¼špkg_resources.DistributionNotFound: The â€˜distribute==0.6.10â€™ distribution was not found and is required by the application
é‚£ä¹ˆå®‰è£…distributeæ¨¡å—ï¼š
wget https://pypi.python.org/packages/source/d/distribute/distribute-0.6.10.tar.gztar -zxvf distribute-0.6.10.tar.gzcd distribute-0.6.10python setup.py install
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>centos</tag>
        <tag>pip</tag>
      </tags>
  </entry>
  <entry>
    <title>ldapå…¥é—¨ç¯‡</title>
    <url>/dev-ldap-start/</url>
    <content><![CDATA[ldapç®€ä»‹
The LDAP(Lightweight Directory Access Protocol) is an open, vendor-neutral, industry standard application protocol for accessing and maintaining distributed directory information services over an Internet Protocol (IP) network. Directory services play an important role in developing intranet and Internet applications by allowing the sharing of information about users, systems, networks, services, and applications throughout the network. As examples, directory services may provide any organized set of records, often with a hierarchical structure, such as a corporate email directory. Similarly, a telephone directory is a list of subscribers with an address and a phone number.

ç®€å•æ¥è¯´ï¼ŒLDAPï¼ˆè½»é‡ç›®å½•è®¿é—®åè®®ï¼‰æ˜¯ä¸€ä¸ªåè®®ï¼Œç”¨æ¥è§£å†³å¤šä¸ªç³»ç»Ÿçš„ç»Ÿä¸€æƒé™ç®¡ç†é—®é¢˜ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Lightweight Directory Access Protocol
LDAP åè®®å…¥é—¨ï¼ˆè½»é‡ç›®å½•è®¿é—®åè®®ï¼‰



ldapç»“æ„ldapçš„æ ¸å¿ƒæ˜¯ç›®å½•æ ‘ï¼Œå‡†ç¡®æ¥è¯´ï¼Œæ˜¯DITï¼ˆDirectory Information Tree ç›®å½•ä¿¡æ¯æ ‘ï¼‰ã€‚

LDAP directory servers present data arranged in tree-like hierarchies in which each entry may have zero or more subordinate entries. This structure is called the Directory Information Tree, or DIT.

LDAP ç›®å½•æœåŠ¡å™¨å°†ä¿¡æ¯ä»¥æ ‘å½¢çš„æ–¹å¼ç»„ç»‡ï¼Œæ¯ä¸€é¡¹éƒ½å¯ä»¥åŒ…å« 0 ä¸ªæˆ–å¤šä¸ªå­é¡¹ã€‚è¿™æ ·çš„ç»“æ„å«åšç›®å½•ä¿¡æ¯æ ‘ã€‚
ç›®å½•ä¿¡æ¯æ ‘å’Œæ–‡ä»¶ç³»ç»Ÿç›®å½•æ ‘æœ‰ä»€ä¹ˆå·®åˆ«ï¼Ÿç­”ï¼šç›®å½•ä¿¡æ¯æ ‘æ˜¯ä¿¡æ¯å­˜å‚¨çš„ç»„ç»‡ç»“æ„ï¼Œæ–‡ä»¶ç³»ç»Ÿç›®å½•æ ‘æ˜¯æ–‡ä»¶å­˜å‚¨çš„ç»„ç»‡ç»“æ„ã€‚
Entryåœ¨ç›®å½•ä¿¡æ¯æ ‘ä¸­ï¼Œæ¯ä¸€è¡Œï¼Œéƒ½å¯ä»¥å«åšä¸€é¡¹ï¼ˆEntryï¼‰ï¼Œä¸è®ºæ˜¯å¶å­èŠ‚ç‚¹è¿˜æ˜¯ä¸­é—´çš„èŠ‚ç‚¹ã€‚é¡¹åŒ…å«ä¸€ä¸ª DNï¼Œä¸€äº›å±æ€§ï¼Œä¸€äº›å¯¹è±¡ç±»ã€‚
Root DSEæ¯ä¸ª LDAP æœåŠ¡å™¨å¿…é¡»å¯¹å¤–æš´éœ²ä¸€ä¸ªç‰¹æ®Šçš„é¡¹ï¼Œå«åš Root DSEï¼ˆRoot DSA-specific Entryï¼‰ï¼Œè¿™ä¸ªé¡¹çš„ DN æ˜¯ç©ºå­—ç¬¦ä¸²ã€‚è¿™ä¸ªé¡¹æ˜¯æ ¹èŠ‚ç‚¹ï¼Œæè¿°äº† LDAP æœåŠ¡å™¨è‡ªèº«çš„ä¿¡æ¯å’Œèƒ½åŠ›ã€‚ä¾‹å¦‚ LDAP æœåŠ¡å™¨æ”¯æŒçš„åŠŸèƒ½ï¼ŒLDAP åè®®ç‰ˆæœ¬ç­‰ä¿¡æ¯ã€‚
DNDNï¼ˆDistinguished Name åˆ†è¾¨åï¼‰æ˜¯ç”¨äºå”¯ä¸€æ ‡è¯†ä¸€ä¸ªé¡¹ï¼Œç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„ä¸»é”®ã€‚DNä¹Ÿè¡¨ç¤ºé¡¹åœ¨ç›®å½•ä¿¡æ¯æ ‘ä¸­çš„ä½ç½®ï¼ŒDNå­—ç¬¦ä¸²ä»å·¦å‘å³ï¼Œå„ç»„æˆéƒ¨åˆ†ä¾æ¬¡å‘æ ‘æ ¹é è¿‘ã€‚
RDNRDNï¼ˆRelative Distinguished Name ç›¸å¯¹åˆ†è¾¨åï¼‰å°±æ˜¯é”®å€¼å¯¹ã€‚DN ç”±è‹¥å¹²ä¸ª RDN ç»„æˆï¼Œä»¥é€—å·åˆ†éš”ã€‚
DCDCï¼ˆDomain Component åŸŸåç»„æˆï¼‰http://example.com è¿™æ ·çš„åŸŸåï¼Œæ‹†æˆ dc=example,dc=com è¿™æ ·çš„å½¢å¼ã€‚
OOï¼ˆOrganization ç»„ç»‡æœºæ„ã€å…¬å¸ï¼‰ï¼Œåœ¨ DN ä¸­å¯èƒ½ä¼šåŒ…å« O=å…¬å¸ è¿™æ ·çš„ç»„æˆéƒ¨åˆ†ï¼Œè¿™é‡Œçš„ O æŒ‡ä»£ç»„ç»‡æœºæ„ã€‚
OUOUï¼ˆOrganization Unit ç»„ç»‡å•å…ƒã€éƒ¨é—¨ï¼‰ï¼Œåœ¨ DN ä¸­å¯èƒ½ä¼šåŒ…å« OU=æŸæŸéƒ¨é—¨ è¿™æ ·çš„ç»„æˆéƒ¨åˆ†ï¼Œè¿™é‡Œçš„ OU æŒ‡ä»£ç»„ç»‡å•å…ƒã€‚
Object Classesæ¯ä¸ªé¡¹é‡Œé¢åŒ…å«è‹¥å¹²ä¸ª Object Classesï¼ŒObject ClassæŒ‡å®šäº†æœ¬é¡¹ä¸­å¿…é¡»ã€å¯èƒ½åŒ…å«çš„å±æ€§ï¼Œç›¸å½“äº MySQL ä¸­çš„å»ºè¡¨è¯­å¥ã€‚åŒ…å«æŸä¸ª Object Class çš„é¡¹ï¼Œå¿…é¡»æ»¡è¶³ Object Class ä¸­çº¦å®šçš„è§„èŒƒï¼Œä¾‹å¦‚è§„å®šå“ªäº›å±æ€§å¿…é¡»å­˜åœ¨ã€‚
éƒ¨ç½²ldap serverLDAPæ˜¯ä¸€ä¸ªåè®®ï¼Œçº¦å®šäº† Client ä¸ Server ä¹‹é—´çš„ä¿¡æ¯äº¤äº’æ ¼å¼ã€ä½¿ç”¨çš„ç«¯å£å·ã€è®¤è¯æ–¹å¼ç­‰å†…å®¹ã€‚è€Œ LDAP åè®®çš„å®ç°ï¼Œæœ‰ç€ä¼—å¤šç‰ˆæœ¬ã€‚ä¾‹å¦‚å¾®è½¯çš„ Active Directory æ˜¯ LDAP åœ¨ Windows ä¸Šçš„å®ç°ï¼ŒAD å®ç°äº† LDAP æ‰€éœ€çš„æ ‘å½¢æ•°æ®åº“ã€å…·ä½“å¦‚ä½•è§£æè¯·æ±‚æ•°æ®å¹¶åˆ°æ•°æ®åº“æŸ¥è¯¢ç„¶åè¿”å›ç»“æœç­‰åŠŸèƒ½ã€‚å†ä¾‹å¦‚ OpenLDAP æ˜¯å¯ä»¥è¿è¡Œåœ¨ Linux ä¸Šçš„ LDAP åè®®çš„å¼€æºå®ç°ã€‚è€Œæˆ‘ä»¬å¹³å¸¸è¯´çš„ LDAP Serverï¼Œä¸€èˆ¬æŒ‡çš„æ˜¯å®‰è£…å¹¶é…ç½®äº† Active Directoryã€OpenLDAP è¿™äº›ç¨‹åºçš„æœåŠ¡å™¨ã€‚
æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨OpenLDAPå®‰è£…éƒ¨ç½²ä¸€ä¸ªldap serverã€‚
å‚è€ƒæ–‡æ¡£ï¼š

openldapå®˜ç½‘
Quickly Setup LDAP User Directory for Jira
dockerä¸‹å¿«é€Ÿéƒ¨ç½²openldapä¸PHPLdapAdmin
dockerä¸‹å¿«é€Ÿéƒ¨ç½²openldapä¸self-service-password

1ã€ä¸‹è½½ldapé•œåƒ
docker pull bitnami/openldap:2.5.12-debian-10-r29

ç½‘ä¸Šæ¨èè¾ƒå¤šçš„æ˜¯osixia/openldapï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©çš„æ˜¯bitnami/openldapã€‚å› ä¸ºbitnamiå¾ˆé è°±ï¼Œä½¿å‘½å°±æ˜¯è®©å¼€æºè½¯ä»¶çš„ä½¿ç”¨æ›´åŠ ç®€å•ã€‚
2ã€å¯åŠ¨ldap
mkdir -p /opt/openldapchmod a+w /opt/openldapdocker run --name openldap -d \  -p 1389:1389 \  -p 1636:1636 \  -v /opt/openldap:/bitnami/openldap \  --env LDAP_ROOT=dc=voidking,dc=com \  --env LDAP_ADMIN_USERNAME=admin \  --env LDAP_ADMIN_PASSWORD=adminpassword \  --env LDAP_USERS=customuser \  --env LDAP_PASSWORDS=custompassword \  bitnami/openldap:2.5.12-debian-10-r29

adminç”¨æˆ·å¯¹åº”çš„DNä¸ºcn=admin,dc=voidking,dc=comã€‚
å¦‚æœä¸æŒ‡å®šLDAP_ROOTï¼Œé‚£ä¹ˆé»˜è®¤ä¸ºdc=example,dc=orgï¼Œadminç”¨æˆ·å¯¹åº”çš„DNä¸ºcn=admin,dc=example,dc=orgã€‚
3ã€æŸ¥çœ‹ldap
docker ps | grep openldapdocker logs openldap

ldap clientldap clientä¹Ÿæœ‰å¾ˆå¤šï¼Œæœ¬æ–‡ä¸­é€‰æ‹©Apache Directory Studioã€‚å®‰è£…è¿‡ç¨‹æ¯”è¾ƒç®€å•ä¸å†å±•å¼€ï¼Œè¿™é‡Œé‡ç‚¹è¯´ä¸€ä¸‹å®ƒçš„ä½¿ç”¨æ–¹æ³•ã€‚
1ã€æ–°å»ºLDAP Connection
2ã€å¡«å†™ç½‘ç»œå‚æ•°ä¸»æœºåå¡«å†™openldapæ‰€åœ¨ä¸»æœºIPï¼Œç«¯å£å¡«å†™1389ï¼ŒCheck Network Parameterï¼Œæ²¡é—®é¢˜çš„è¯ç‚¹å‡»Next
3ã€å¡«å†™é‰´æƒå‚æ•°Bind DN or userå¡«å…¥DN cn=admin,dc=voidking,dc=comï¼Œå¯†ç å¡«å…¥ adminpassword ï¼ŒCheck Authenticationï¼Œæ²¡é—®é¢˜çš„è¯ç‚¹å‡»Finish
4ã€æŸ¥çœ‹ç›®å½•ä¿¡æ¯æ ‘æ•°æ®
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>bitnami</tag>
        <tag>ldap</tag>
      </tags>
  </entry>
  <entry>
    <title>Redisæ•°æ®å¤‡ä»½å’Œæ¢å¤</title>
    <url>/dev-redis-backup-and-recovery/</url>
    <content><![CDATA[Redisæ•°æ®å¤‡ä»½æ¦‚è¿°å¸¸ç”¨çš„Redisæ•°æ®å¤‡ä»½æ–¹æ³•ä¸»è¦æœ‰RDBæŒä¹…åŒ–å’ŒAOFæŒä¹…åŒ–ã€‚
æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ ä¸€ä¸‹è¿™ä¸¤ç§å¤‡ä»½æ–¹æ³•çš„ä¸åŒï¼Œä»¥åŠRDBå¤‡ä»½å’Œæ¢å¤æ–¹æ³•ã€‚


Redisæ•°æ®å¤‡ä»½åŸç†RDBæŒä¹…åŒ–RDBï¼ˆRedis DataBaseï¼‰æŒä¹…åŒ–å°† Redis å†…å­˜ä¸­çš„æ•°æ®ä»¥å¿«ç…§çš„å½¢å¼ä¿å­˜åˆ°ç£ç›˜ä¸Šï¼Œä»¥ä¾¿åœ¨ Redis é‡å¯æˆ–è€…å‡ºç°æ•…éšœæ—¶è¿›è¡Œæ•°æ®æ¢å¤ã€‚è¿™ç§æ–¹å¼å¯ä»¥å®ç°å…¨é‡å¤‡ä»½ï¼Œæ•°æ®æ¢å¤æ—¶æ¯”è¾ƒå¿«ï¼Œä½†å¯èƒ½ä¼šé€ æˆæ•°æ®ä¸¢å¤±ã€‚
å¯ä»¥åœ¨ Redis é›†ç¾¤è¿è¡ŒæœŸé—´å®šæœŸæ‰§è¡Œ RDB å¿«ç…§å¤‡ä»½ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œå¤‡ä»½å‘½ä»¤ã€‚
RDB æŒä¹…åŒ–æ˜¯é€šè¿‡ fork() å‡½æ•°åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œå°† Redis æ•°æ®åº“çš„çŠ¶æ€å†™å…¥ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œå†ç”¨è¯¥ä¸´æ—¶æ–‡ä»¶æ›¿æ¢åŸæœ‰çš„ RDB æ–‡ä»¶çš„æ–¹å¼å®ç°çš„ã€‚RDB æŒä¹…åŒ–æ“ä½œå¯ä»¥åœ¨ Redis ä¸»è¿›ç¨‹ä¸è¢«é˜»å¡çš„æƒ…å†µä¸‹å®Œæˆã€‚
RDB æŒä¹…åŒ–é€‚ç”¨äºéœ€è¦å¿«é€Ÿå¤‡ä»½å’Œæ¢å¤ Redis æ•°æ®åº“çŠ¶æ€çš„åœºæ™¯ï¼Œä¾‹å¦‚è¿›è¡Œæ•°æ®è¿ç§»ã€å¤‡ä»½å’Œæ¢å¤ç­‰æ“ä½œã€‚ä½†ç”±äº RDB æŒä¹…åŒ–æ˜¯æŒ‰ç…§æ—¶é—´é—´éš”æˆ–è€…å†™æ“ä½œæ•°é‡è§¦å‘çš„ï¼Œå› æ­¤å¯èƒ½ä¼šé€ æˆä¸€å®šçš„æ•°æ®ä¸¢å¤±ã€‚
AOFæŒä¹…åŒ–AOFï¼ˆAppend-Only Fileï¼‰æŒä¹…åŒ–å°†æ‰€æœ‰å†™æ“ä½œä»¥è¿½åŠ çš„æ–¹å¼è®°å½•åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå³å°† Redis æ‰§è¡Œçš„æ¯ä¸ªå†™æ“ä½œè®°å½•åˆ° AOF æ–‡ä»¶ä¸­ã€‚è¿™ç§æ–¹å¼å¯ä»¥å®ç°å¢é‡å¤‡ä»½ï¼Œæ•°æ®æ¢å¤æ—¶æ¯”è¾ƒæ…¢ï¼Œä½†å¯ä»¥ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚å½“ Redis é‡å¯æˆ–è€…å‡ºç°æ•…éšœæ—¶ï¼Œå¯ä»¥é€šè¿‡é‡æ”¾ AOF æ–‡ä»¶ä¸­çš„å†™æ“ä½œæ¥æ¢å¤ Redis æ•°æ®åº“çš„çŠ¶æ€ã€‚
AOF æŒä¹…åŒ–é€‚ç”¨äºå¯¹æ•°æ®çš„å®Œæ•´æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„åœºæ™¯ï¼Œä¾‹å¦‚å¯¹æ•°æ®çš„å®æ—¶æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„ç¼“å­˜åœºæ™¯ã€‚ä½†ç”±äº AOF æŒä¹…åŒ–ä¼šå°†æ‰€æœ‰å†™æ“ä½œéƒ½è®°å½•ä¸‹æ¥ï¼Œå› æ­¤å¯èƒ½ä¼šå ç”¨è¾ƒå¤šçš„ç£ç›˜ç©ºé—´ï¼Œä¹Ÿä¼šå½±å“ Redis çš„æ€§èƒ½ã€‚
RDBå¤‡ä»½å’Œæ¢å¤æœ¬èŠ‚ä»¥é›†ç¾¤æ¨¡å¼éƒ¨ç½²çš„Redisä¸ºä¾‹ï¼Œå­¦ä¹ å…·ä½“çš„RDBå¤‡ä»½å’Œæ¢å¤æ­¥éª¤ã€‚å…¶ä»–æ¨¡å¼éƒ¨ç½²çš„Redisï¼Œå¤‡ä»½å’Œæ¢å¤æ–¹å¼ç±»ä¼¼ã€‚
Redis Clusterå¤‡ä»½å¯¹äº Redis Clusterï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ª master èŠ‚ç‚¹åˆ›å»ºä¸€ä¸ª RDB æ–‡ä»¶ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ä¸ºæ¯ä¸ªèŠ‚ç‚¹åˆ›å»º RDB æ–‡ä»¶ï¼š
1ã€ç”Ÿæˆå¤‡ä»½æ–‡ä»¶ä½¿ç”¨ redis-cli å‘½ä»¤æ‰‹åŠ¨æ‰§è¡Œ BGSAVE
redis-cli -h &lt;host&gt; -p &lt;port&gt; -a &lt;password&gt; bgsave

æˆ–è€…åœ¨ redis.conf é…ç½®æ–‡ä»¶ä¸­è®¾ç½®å®šæœŸè‡ªåŠ¨æ‰§è¡Œ BGSAVE
save &lt;seconds&gt; &lt;changes&gt;

é…ç½®å®Œæˆåï¼Œæ¯éš”ä¸€æ®µæ—¶é—´ï¼ŒRedis ä¼šå°†å†…å­˜ä¸­çš„æ•°æ®å¿«ç…§ä¿å­˜åˆ°ç£ç›˜ä¸Šã€‚
2ã€æ”¶é›†å¤‡ä»½æ–‡ä»¶ä»æ¯ä¸ª master èŠ‚ç‚¹æ”¶é›†ç”Ÿæˆçš„ RDB æ–‡ä»¶ï¼ˆdump.rdbï¼‰ï¼Œå¹¶å°†å…¶ä¿å­˜åœ¨ä¸€ä¸ªå®‰å…¨çš„ä½ç½®ã€‚è¿™äº›æ–‡ä»¶åŒ…å«äº† Redis é›†ç¾¤çš„å®Œæ•´æ•°æ®ã€‚
æ³¨æ„ï¼šåœ¨æ‰§è¡Œå¤‡ä»½å’Œæ¢å¤æ“ä½œæ—¶ï¼Œè¯·ç¡®ä¿é›†ç¾¤å¤„äºä½è´Ÿè½½çŠ¶æ€ï¼Œä»¥å…å½±å“é›†ç¾¤æ€§èƒ½ã€‚åŒæ—¶ï¼Œæ ¹æ®æ•°æ®é‡çš„å¤§å°ï¼Œå¤‡ä»½å’Œæ¢å¤è¿‡ç¨‹å¯èƒ½éœ€è¦ä¸€å®šæ—¶é—´ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚
Redis Clusteræ¢å¤è¦æ¢å¤ Redis Clusterï¼Œé¦–å…ˆéœ€è¦å°†å¤‡ä»½çš„ RDB æ–‡ä»¶åˆ†å‘åˆ°å„ä¸ª master èŠ‚ç‚¹ã€‚ç„¶åï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š
1ã€åœæ­¢æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„ Redis æœåŠ¡
systemctl stop redis

2ã€æ”¾ç½®å¤‡ä»½æ–‡ä»¶å°† RDB æ–‡ä»¶å¤åˆ¶åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„ Redis æ•°æ®ç›®å½•ã€‚é»˜è®¤æ•°æ®ç›®å½•é€šå¸¸ä¸º /var/lib/redisï¼Œæ–‡ä»¶ååº”ä¸º dump.rdbã€‚
3ã€ä¿®æ”¹ redis.conf é…ç½®æ–‡ä»¶
dbfilename dump.rdbdir /var/lib/redis

4ã€å¯åŠ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„ Redis æœåŠ¡
systemctl start redis

5ã€éªŒè¯æ•°æ®æ¢å¤æ˜¯å¦æˆåŠŸå¯ä»¥ä½¿ç”¨ redis-cli å‘½ä»¤è¿æ¥åˆ° Redis Clusterï¼Œæ£€æŸ¥æ•°æ®æ˜¯å¦å­˜åœ¨å¹¶æ­£ç¡®æ¢å¤ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>chatgpt</tag>
        <tag>redis</tag>
        <tag>ç¼“å­˜</tag>
      </tags>
  </entry>
  <entry>
    <title>Redisé›†ç¾¤æ¨¡å¼æ¦‚è¿°</title>
    <url>/dev-redis-cluster/</url>
    <content><![CDATA[Redisé›†ç¾¤æ¨¡å¼ç®€ä»‹Redisé›†ç¾¤æ˜¯Redisçš„ä¸€ç§é«˜å¯ç”¨è§£å†³æ–¹æ¡ˆï¼Œå®ƒé€šè¿‡åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šåˆ†ç‰‡å­˜å‚¨æ•°æ®ï¼Œå®ç°æ•°æ®çš„é«˜å¯ç”¨å’Œæ‰©å±•ã€‚Redisé›†ç¾¤æœ€åˆæ˜¯åœ¨Redis 3.0ç‰ˆæœ¬ä¸­å¼•å…¥çš„ã€‚
Redisé›†ç¾¤çš„èŠ‚ç‚¹ç”±å¤šä¸ªä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹ç»„æˆï¼Œæ¯ä¸ªä¸»èŠ‚ç‚¹éƒ½æœ‰å¤šä¸ªä»èŠ‚ç‚¹ã€‚é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½ç»´æŠ¤äº†æ•´ä¸ªé›†ç¾¤çš„çŠ¶æ€ä¿¡æ¯ï¼ŒèŠ‚ç‚¹ä¹‹é—´é€šè¿‡Gossipåè®®è¿›è¡Œé€šä¿¡ï¼Œé€šè¿‡ç›¸äº’äº¤æ¢çŠ¶æ€ä¿¡æ¯æ¥ä¿æŒé›†ç¾¤ä¸­èŠ‚ç‚¹çš„ä¸€è‡´æ€§ã€‚Redisé›†ç¾¤ä½¿ç”¨çš„å“ˆå¸Œæ§½ï¼ˆhash slotï¼‰å°†é”®æ˜ å°„åˆ°ä¸åŒçš„èŠ‚ç‚¹ï¼Œå®ç°äº†æ•°æ®çš„åˆ†å¸ƒå¼å­˜å‚¨ã€‚
Redisé›†ç¾¤çš„ä¼˜ç‚¹åŒ…æ‹¬ï¼š

é«˜å¯ç”¨ï¼šå½“é›†ç¾¤ä¸­çš„æŸä¸ªèŠ‚ç‚¹æ•…éšœæ—¶ï¼Œé›†ç¾¤ä»ç„¶å¯ä»¥æ­£å¸¸è¿è¡Œã€‚
æ‰©å±•æ€§ï¼šRedisé›†ç¾¤å¯ä»¥æ”¯æŒæ›´å¤šçš„æ•°æ®å’Œå®¢æˆ·ç«¯è¯·æ±‚ï¼Œå¯ä»¥é€šè¿‡å¢åŠ èŠ‚ç‚¹æ¥å®ç°æ¨ªå‘æ‰©å±•ã€‚
åˆ†å¸ƒå¼ï¼šRedisé›†ç¾¤å¯ä»¥å°†æ•°æ®åˆ†æ•£åœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œä½¿å¾—æ•°æ®çš„è¯»å†™è´Ÿè½½å¾—åˆ°äº†å¹³è¡¡ï¼Œæé«˜äº†Redisçš„æ€§èƒ½ã€‚

ä½†æ˜¯Redisé›†ç¾¤ä¹Ÿå­˜åœ¨ä¸€äº›é™åˆ¶å’Œæ³¨æ„äº‹é¡¹ï¼Œä¾‹å¦‚ï¼š

Redisé›†ç¾¤åªèƒ½æ”¯æŒå•ä¸ªæ•°æ®åº“ç©ºé—´ï¼Œä¸èƒ½åœ¨ä¸åŒèŠ‚ç‚¹ä¹‹é—´å­˜å‚¨ä¸åŒçš„æ•°æ®åº“ã€‚
Redisé›†ç¾¤ä¸æ”¯æŒäº‹åŠ¡åµŒå¥—å’Œ Lua è„šæœ¬ä¸­çš„äº‹åŠ¡æ“ä½œã€‚
Redisé›†ç¾¤ä½¿ç”¨çš„æ˜¯å“ˆå¸Œæ§½åˆ†ç‰‡ï¼Œå› æ­¤åœ¨é›†ç¾¤è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸èƒ½åŠ¨æ€æ·»åŠ æˆ–åˆ é™¤å“ˆå¸Œæ§½ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ•°æ®çš„è¿ç§»ï¼Œå¯¹é›†ç¾¤æ€§èƒ½äº§ç”Ÿå½±å“ã€‚

åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨Redisé›†ç¾¤ï¼Œéœ€è¦å¯¹é›†ç¾¤ä¸­çš„èŠ‚ç‚¹è¿›è¡Œé€‚å½“çš„é…ç½®å’Œè°ƒä¼˜ï¼Œä»¥ç¡®ä¿é›†ç¾¤çš„é«˜å¯ç”¨æ€§ã€æ€§èƒ½å’Œå¯é æ€§ã€‚
æœ¬èŠ‚å†…å®¹æ¥è‡ªChatGPTã€‚


Redisé›†ç¾¤å®¹é”™æœºåˆ¶Redisé›†ç¾¤çš„èŠ‚ç‚¹ç”±å¤šä¸ªä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹ç»„æˆï¼Œæ¯ä¸ªä¸»èŠ‚ç‚¹éƒ½æœ‰å¤šä¸ªä»èŠ‚ç‚¹ï¼Œä»èŠ‚ç‚¹å’Œä¸»èŠ‚ç‚¹çš„æ•°æ®ä¸€è‡´ã€‚ä»èŠ‚ç‚¹æŒ‚æ‰ï¼Œä¸ä¼šå½±å“redisé›†ç¾¤æ•°æ®çš„å†™å…¥å’Œè¯»å–ï¼Œåªä¼šé™ä½è¯»å–çš„æ€§èƒ½å’Œå®¹é”™èƒ½åŠ›ã€‚ä»èŠ‚ç‚¹å¯åŠ¨åä¼šè‡ªåŠ¨ä»ä¸»èŠ‚ç‚¹åŒæ­¥æ•°æ®ã€‚ä¸»èŠ‚ç‚¹æŒ‚æ‰ï¼ŒRedisé›†ç¾¤ä¼šå°†è¯¥ä¸»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹åˆ‡æ¢ä¸ºæ–°çš„ä¸»èŠ‚ç‚¹ï¼ˆç†è®ºä¸Šä¼šå‡ ç§’å†…å®Œæˆï¼Œå®æµ‹ä¸‰åˆ†é’Ÿæ²¡æœ‰ç­‰åˆ°åˆ‡æ¢ï¼Œå¯èƒ½æ˜¯é…ç½®é—®é¢˜ï¼‰ï¼Œä»¥ä¿è¯æ•°æ®å¯ç”¨æ€§å’Œä¸€è‡´æ€§ï¼Œåœ¨æ–°çš„ä¸»èŠ‚ç‚¹é€‰å‡ºæ¥ä¹‹å‰ï¼Œé›†ç¾¤å†™èƒ½åŠ›ä¸å¯ç”¨ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

dockeræ­å»º3ä¸»3ä»redisé›†ç¾¤(ä¸»ä»å®¹é”™åˆ‡æ¢ã€ä¸»ä»æ‰©å®¹ã€ä¸»ä»ç¼©å®¹)
K8Séƒ¨ç½²Redis Clusteré›†ç¾¤ï¼ˆä¸‰ä¸»ä¸‰ä»æ¨¡å¼ï¼‰
redisé›†ç¾¤èŠ‚ç‚¹å®•æœº
æ·±å…¥ç†è§£redis clusterçš„failoveræœºåˆ¶
CLUSTER FAILOVER
Scaling with Redis Cluster
è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº - cluster failover

Redisé›†ç¾¤æ“ä½œå‘½ä»¤clusterå‘½ä»¤æŸ¥çœ‹å’Œæ“ä½œredisé›†ç¾¤ã€‚é€šè¿‡ç»™å®šå¯é€‰çš„å‚æ•° section ï¼Œå¯ä»¥è®©å‘½ä»¤åªè¿”å›æŸä¸€éƒ¨åˆ†çš„ä¿¡æ¯ï¼š

cluster infoï¼šæ‰“å°redisé›†ç¾¤çš„ä¿¡æ¯
cluster slotsï¼šåˆ—å‡ºé›†ç¾¤çš„æ§½ä¿¡æ¯
cluster nodesï¼šåˆ—å‡ºé›†ç¾¤å½“å‰å·²çŸ¥çš„æ‰€æœ‰èŠ‚ç‚¹ï¼ˆnodeï¼‰ï¼Œä»¥åŠè¿™äº›èŠ‚ç‚¹çš„ç›¸å…³ä¿¡æ¯
cluster meet &lt;ip&gt; &lt;port&gt;ï¼šå°† ip å’Œ port æ‰€æŒ‡å®šçš„èŠ‚ç‚¹æ·»åŠ åˆ°é›†ç¾¤å½“ä¸­ï¼Œè®©å®ƒæˆä¸ºé›†ç¾¤çš„ä¸€ä»½å­
cluster forget &lt;node_id&gt;ï¼šä»é›†ç¾¤ä¸­ç§»é™¤ node_id æŒ‡å®šçš„èŠ‚ç‚¹
cluster failoverï¼šè¯¥å‘½ä»¤åªèƒ½åœ¨ç¾¤é›†slaveèŠ‚ç‚¹æ‰§è¡Œï¼Œè®©slaveèŠ‚ç‚¹è¿›è¡Œä¸€æ¬¡äººå·¥æ•…éšœåˆ‡æ¢ï¼Œæˆä¸ºmasterã€‚åˆ‡æ¢è¿‡ç¨‹ä¸­redisä¼šé˜»å¡è¯·æ±‚ï¼ˆ10sï¼‰ï¼Œåˆ‡æ¢å®Œæˆå†å¤„ç†è¯·æ±‚ã€‚

Redisé›†ç¾¤é‡å¯éœ€æ±‚æè¿°ï¼š192.168.56.101-103 ä¸‰å°æœºå™¨ï¼Œä½¿ç”¨7001å’Œ7002ç«¯å£ï¼Œæ­å»ºäº†redisé›†ç¾¤ã€‚ç°åœ¨æƒ³é™ä½å†…å­˜ç¢ç‰‡ç‡ï¼Œå› æ­¤è®¡åˆ’å¯¹redisé›†ç¾¤è¿›è¡Œé‡å¯ã€‚
æ ¹æ®Redisé›†ç¾¤å®¹é”™æœºåˆ¶ï¼Œä¸ºäº†å¯¹ä¸Šæ¸¸è°ƒç”¨çš„æœåŠ¡å½±å“æœ€å°ï¼Œé‡å¯æµç¨‹å¦‚ä¸‹ï¼š
1ã€æŸ¥çœ‹ä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹
redis-cli -c -h 192.168.56.101 -p 7001 -a &#x27;xxx&#x27; cluster nodesredis-cli --cluster check 192.168.56.101:7001 -a &#x27;xxx&#x27;

å…¶ä¸­-cå‚æ•°çš„ä½œç”¨æ˜¯å¯ç”¨é›†ç¾¤æ¨¡å¼ï¼Œè¿™æ ·å¯ä»¥è‡ªåŠ¨é‡å®šå‘åˆ°æ­£ç¡®çš„èŠ‚ç‚¹ã€‚
æŸ¥çœ‹åˆ°ä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹ï¼Œä»¥åŠå®ƒä»¬çš„å¯¹åº”å…³ç³»ã€‚
2ã€æŒ¨ä¸ªé‡å¯ä»èŠ‚ç‚¹ï¼ˆä¸€ä¸ªèŠ‚ç‚¹é‡å¯æˆåŠŸå†è¿›è¡Œä¸‹ä¸€ä¸ªï¼‰
# ç™»å½•192.168.56.101æ‰§è¡Œredis-cli -c -h 192.168.56.101 -p 7002 -a &#x27;xxx&#x27; shutdownredis-server /path/to/conf/7002.confredis-cli --cluster check 192.168.56.101:7002 -a &#x27;xxx&#x27;# ç™»å½•192.168.56.102æ‰§è¡Œredis-cli -c -h 192.168.56.102 -p 7002 -a &#x27;xxx&#x27; shutdownredis-server /path/to/conf/7002.confredis-cli --cluster check 192.168.56.102:7002 -a &#x27;xxx&#x27;# ç™»å½•192.168.56.103æ‰§è¡Œredis-cli -c -h 192.168.56.103 -p 7002 -a &#x27;xxx&#x27; shutdownredis-server /path/to/conf/7002.confredis-cli --cluster check 192.168.56.103:7002 -a &#x27;xxx&#x27;

3ã€æ‰‹åŠ¨æ•…éšœè½¬ç§»ï¼Œä»èŠ‚ç‚¹å‡çº§ä¸ºä¸»èŠ‚ç‚¹
redis-cli -c -h 192.168.56.101 -p 7002 -a &#x27;xxx&#x27; cluster failover TAKEOVERredis-cli -c -h 192.168.56.102 -p 7002 -a &#x27;xxx&#x27; cluster failover TAKEOVERredis-cli -c -h 192.168.56.103 -p 7002 -a &#x27;xxx&#x27; cluster failover TAKEOVER

å…¶ä¸­TAKEOVERå¯é€‰ï¼Œè¯¦æƒ…å‚è€ƒè…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº - cluster failover
4ã€æŒ¨ä¸ªé‡å¯ä»èŠ‚ç‚¹ï¼ˆåŸæœ¬çš„ä¸»èŠ‚ç‚¹ï¼‰
# ç™»å½•192.168.56.101æ‰§è¡Œredis-cli -c -h 192.168.56.101 -p 7001 -a &#x27;xxx&#x27; shutdownredis-server /path/to/conf/7001.confredis-cli --cluster check 192.168.56.101:7001 -a &#x27;xxx&#x27;# ç™»å½•192.168.56.102æ‰§è¡Œredis-cli -c -h 192.168.56.102 -p 7001 -a &#x27;xxx&#x27; shutdownredis-server /path/to/conf/7001.confredis-cli --cluster check 192.168.56.102:7001 -a &#x27;xxx&#x27;# ç™»å½•192.168.56.103æ‰§è¡Œredis-cli -c -h 192.168.56.103 -p 7001 -a &#x27;xxx&#x27; shutdownredis-server /path/to/conf/7001.confredis-cli --cluster check 192.168.56.103:7001 -a &#x27;xxx&#x27;

5ã€æ‰‹åŠ¨æ•…éšœè½¬ç§»ï¼Œä»èŠ‚ç‚¹å‡çº§ä¸ºä¸»èŠ‚ç‚¹
redis-cli -c -h 192.168.56.101 -p 7001 -a &#x27;xxx&#x27; cluster failover TAKEOVERredis-cli -c -h 192.168.56.102 -p 7001 -a &#x27;xxx&#x27; cluster failover TAKEOVERredis-cli -c -h 192.168.56.103 -p 7001 -a &#x27;xxx&#x27; cluster failover TAKEOVER

Redisé›†ç¾¤å¼‚å¸¸æ’æŸ¥Redisé›†ç¾¤æ¨¡å¼ï¼ŒJavaè®¿é—®Redisé›†ç¾¤æŠ¥é”™ï¼š
io.lettuce.core.RedisCommandExecutionException: CLUSTERDOWN The cluster is down

æ’æŸ¥æ–¹æ³•ï¼š
redis-cli -c -h 192.168.56.101 -p 7001 -a &#x27;xxx&#x27; cluster nodesredis-cli --cluster check 192.168.56.101:7001 -a &#x27;xxx&#x27;# yum install -y ruby# cd redis-6.2.4/src# ./redis-trib.rb check 192.168.56.101:7001 -a &#x27;xxx&#x27;

å‘ç°æŠ¥é”™ï¼š
[ERR] Nodes don&#x27;t agree about configuration!&gt;&gt;&gt; Check for open slots...[WARNING] Node 192.168.56.101:7002 has slots in importing state ...

è§£å†³åŠæ³•ä¸€ï¼šé‡æ–°æ¡æ‰‹ã€‚
redis-cli -c -h 192.168.56.101 -p 7002 -a &#x27;xxx&#x27; cluster meet 192.168.56.101 7001redis-cli -c -h 192.168.56.101 -p 7002 -a &#x27;xxx&#x27; cluster meet 192.168.56.102 7001redis-cli -c -h 192.168.56.101 -p 7002 -a &#x27;xxx&#x27; cluster meet 192.168.56.102 7002redis-cli -c -h 192.168.56.101 -p 7002 -a &#x27;xxx&#x27; cluster meet 192.168.56.103 7001redis-cli -c -h 192.168.56.101 -p 7002 -a &#x27;xxx&#x27; cluster meet 192.168.56.103 7001
å‚è€ƒæ–‡æ¡£ï¼šRedis [ERR] Nodes donâ€™t agree about configuration!
è§£å†³åŠæ³•äºŒï¼ˆæ¨èï¼‰ï¼šé‡å¯redisèŠ‚ç‚¹ã€‚
redis-cli -c -h 192.168.56.101 -p 7002 -a &#x27;xxx&#x27; shutdownredis-server /path/to/conf/7002.confredis-cli --cluster check 192.168.56.101:7001 -a &#x27;xxx&#x27;



]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>docker</category>
        <category>database</category>
        <category>cloudnative</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>æ•°æ®åº“</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>chatgpt</tag>
        <tag>redis</tag>
        <tag>ç¼“å­˜</tag>
      </tags>
  </entry>
  <entry>
    <title>Rediså…¥é—¨ç¯‡</title>
    <url>/dev-redis-start/</url>
    <content><![CDATA[Redisç®€ä»‹
Redis: The open source, in-memory data store used by millions of developers as a database, cache, streaming engine, and message broker.

Redisæ˜¯è¢«æ•°ç™¾ä¸‡å¼€å‘äººå‘˜ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜ã€æµå¼•æ“å’Œæ¶ˆæ¯ä»£ç†çš„å¼€æºå†…å­˜æ•°æ®å­˜å‚¨ã€‚
Redisç‰¹ç‚¹ï¼š

Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚
Redisä¸ä»…ä»…æ”¯æŒç®€å•çš„key-valueç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾›listï¼Œsetï¼Œzsetï¼Œhashç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚
Redisæ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³master-slaveæ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚

Redisä¼˜åŠ¿ï¼š

æ€§èƒ½æé«˜ â€“ Redisèƒ½è¯»çš„é€Ÿåº¦æ˜¯110000æ¬¡/sï¼Œå†™çš„é€Ÿåº¦æ˜¯81000æ¬¡/s ã€‚
ä¸°å¯Œçš„æ•°æ®ç±»å‹ â€“ Redisæ”¯æŒäºŒè¿›åˆ¶æ¡ˆä¾‹çš„ Stringsï¼Œ Listsï¼Œ Hashesï¼Œ Sets åŠ Ordered Sets æ•°æ®ç±»å‹æ“ä½œã€‚
åŸå­ â€“ Redisçš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ï¼Œæ„æ€å°±æ˜¯è¦ä¹ˆæˆåŠŸæ‰§è¡Œè¦ä¹ˆå¤±è´¥å®Œå…¨ä¸æ‰§è¡Œã€‚å•ä¸ªæ“ä½œæ˜¯åŸå­æ€§çš„ã€‚å¤šä¸ªæ“ä½œä¹Ÿæ”¯æŒäº‹åŠ¡ï¼Œå³åŸå­æ€§ï¼Œé€šè¿‡MULTIå’ŒEXECæŒ‡ä»¤åŒ…èµ·æ¥ã€‚
ä¸°å¯Œçš„ç‰¹æ€§ â€“ Redisè¿˜æ”¯æŒ publish/subscribeï¼Œ é€šçŸ¥ï¼Œ key è¿‡æœŸç­‰ç­‰ç‰¹æ€§ã€‚

å‚è€ƒæ–‡æ¡£ï¼š

Rediså®˜ç½‘
Redisæºç 
Redisåœ¨çº¿æµ‹è¯•
Redis - Commands
Rediså‘½ä»¤å‚è€ƒ
Redisæ•™ç¨‹
Redisã€æ•°æ®ç»“æ„ç±»å‹ç¯‡ã€‘



å®‰è£…RedisRediså®‰è£…æ¨¡å¼Redisæœ‰å››ç§å®‰è£…æ¨¡å¼ï¼š

å•æœºæ¨¡å¼ï¼šåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚ç®€å•ï¼Œä½†æ˜¯å¯ç”¨æ€§ä½ã€‚
ä¸»ä»å¤åˆ¶ï¼šå…¨éƒ¨èŠ‚ç‚¹è¯»ï¼Œä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºä¸»èŠ‚ç‚¹è´Ÿè´£å†™ï¼Œå†™æ•°æ®åå¤åˆ¶åˆ°ä»èŠ‚ç‚¹ã€‚ä¸»èŠ‚ç‚¹å®•æœºï¼Œä»èŠ‚ç‚¹å¯ä»¥å˜æˆä¸»èŠ‚ç‚¹ï¼Œå¯ç”¨æ€§æé«˜äº†ã€‚ä½†æ˜¯ï¼Œåº”ç”¨æ–¹éœ€è¦æ„ŸçŸ¥ä¸»èŠ‚ç‚¹å˜åŒ–å¹¶éšç€å˜åŒ–ï¼Œå¦åˆ™æ— æ³•å†™ã€‚
å“¨å…µæ¨¡å¼ï¼šåœ¨ä¸»ä»å¤åˆ¶çš„åŸºç¡€ä¸Šï¼Œå“¨å…µå®ç°äº†è‡ªåŠ¨åŒ–çš„æ•…éšœæ¢å¤ã€‚å“¨å…µæ¨¡å¼åŒ…æ‹¬å“¨å…µé›†ç¾¤å’Œæ•°æ®é›†ç¾¤ï¼Œå“¨å…µé›†ç¾¤ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå“¨å…µèŠ‚ç‚¹ç»„æˆï¼Œä¸å­˜å‚¨æ•°æ®ï¼›æ•°æ®é›†ç¾¤åŒ…æ‹¬ä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹ï¼Œå­˜å‚¨æ•°æ®ã€‚è®¿é—®redisé›†ç¾¤çš„æ•°æ®éƒ½æ˜¯ç»è¿‡å“¨å…µé›†ç¾¤çš„ï¼Œå“¨å…µé›†ç¾¤è´Ÿè´£æ•°æ®çš„è½¬å‘ã€‚å“¨å…µé›†ç¾¤é«˜å¯ç”¨ï¼Œæ•°æ®é›†ç¾¤é«˜å¯ç”¨ï¼Œä¸»èŠ‚ç‚¹æŒ‚æ‰å‘ç”Ÿåˆ‡æ¢ï¼Œåº”ç”¨æ–¹æ— æ„ŸçŸ¥ã€‚
é›†ç¾¤æ¨¡å¼ï¼šå•æœºã€ä¸»ä»å’Œå“¨å…µæ¨¡å¼ä¸­ï¼Œå•ä¸ªèŠ‚ç‚¹çš„å­˜å‚¨èƒ½åŠ›æ˜¯æœ‰ä¸Šé™çš„ï¼Œè®¿é—®èƒ½åŠ›æ˜¯æœ‰ä¸Šé™çš„ã€‚é›†ç¾¤æ¨¡å¼æŠŠæ•°æ®è¿›è¡Œåˆ†ç‰‡å­˜å‚¨ï¼Œå½“ä¸€ä¸ªåˆ†ç‰‡æ•°æ®è¾¾åˆ°ä¸Šé™çš„æ—¶å€™ï¼Œå°±åˆ†æˆå¤šä¸ªåˆ†ç‰‡ã€‚é›†ç¾¤æ¨¡å¼å…·æœ‰é«˜å¯ç”¨ã€å¯æ‰©å±•ã€åˆ†å¸ƒå¼ã€å®¹é”™ç­‰ç‰¹æ€§ã€‚

å‚è€ƒæ–‡æ¡£ï¼š

Redisçš„å››ç§æ¨¡å¼ï¼Œå•æœºã€ä¸»ä»ã€å“¨å…µã€é›†ç¾¤

å®‰è£…Rediså•æœºæ¨¡å¼æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨dockerå®‰è£…ä¸€ä¸ªredisèŠ‚ç‚¹ã€‚
1ã€ä¸‹è½½redisé•œåƒï¼Œè¿™é‡Œé€‰æ‹©ç‰ˆæœ¬ redis:5.0.14-alpine3.15
docker pull redis:5.0.14-alpine3.15

2ã€å¯åŠ¨redis
docker run --name redis -d \-p 6379:6379 \redis:5.0.14-alpine3.15

å‚è€ƒæ–‡æ¡£ï¼š

Installing Redis
ã€ŠK8Sä¸­å®‰è£…Redisã€‹

å®‰è£…Redisä¸»ä»æ¨¡å¼å‚è€ƒæ–‡æ¡£ã€ŠK8Sä¸­å®‰è£…é…ç½®Redisã€‹
å®‰è£…Rediså“¨å…µæ¨¡å¼å‚è€ƒæ–‡æ¡£ã€ŠK8Sä¸­å®‰è£…é…ç½®Redisã€‹
å®‰è£…Redisé›†ç¾¤æ¨¡å¼å‚è€ƒæ–‡æ¡£ï¼š

ã€ŠRedisé›†ç¾¤æ¨¡å¼æ¦‚è¿°ã€‹
ã€ŠK8Sä¸­å®‰è£…é…ç½®Redisã€‹

è‡ªå®šä¹‰redisé…ç½®1ã€å‡†å¤‡redis5.0çš„é…ç½®æ–‡ä»¶ 
mkdir -p /opt/redis/vim /opt/redis/redis.conf

é…ç½®å†…å®¹å‚è€ƒgithub redis.confï¼ŒæŒ‰éœ€ä¿®æ”¹
2ã€ä½¿ç”¨é…ç½®æ–‡ä»¶
docker run --name redis -d \-p 6379:6379 \-v /opt/redis/redis.conf:/etc/redis/redis.conf \redis:5.0.14-alpine3.15 \redis-server /etc/redis/redis.conf

æµ‹è¯•Rediså®¹å™¨å†…æµ‹è¯•docker exec -it redis /bin/shredis-cli&gt; ping

å®¿ä¸»æœºæµ‹è¯•1ã€å¯åŠ¨æµ‹è¯•å®¹å™¨
docker run --name redis-client -d \redis:5.0.14-alpine3.15

2ã€æµ‹è¯•
docker exec -it redis-client redis-cli -h 192.168.56.102 -p 6379&gt; ping

é‡å¯Redisdocker redisdocker restart redis

bin redisæ–¹æ³•ä¸€ï¼š
/usr/local/bin/redis-server stop/usr/local/bin/redis-server start /opt/redis/redis.conf# /usr/local/bin/redis-server restart

æ–¹æ³•äºŒï¼š
redis-cli -h 127.0.0.1 -p 6379 shutdownredis-server

æ–¹æ³•ä¸‰ï¼š
ps -ef | grep rediskill -9 xxxredis-server

Redisæ•°æ®ç»“æ„å‚è€ƒæ–‡æ¡£ï¼šRedisã€æ•°æ®ç»“æ„ç±»å‹ç¯‡ã€‘redisæ•°æ®ç»“æ„ç±»å‹åŒ…æ‹¬ï¼šStringã€Listã€Hashã€Setã€ZSetï¼Œæ¯ç§ç±»å‹éƒ½æœ‰è‡ªå·±çš„æ“ä½œå‘½ä»¤ã€‚redisçš„ä¸åŒæ•°æ®ç»“æ„ç±»å‹é€‚ç”¨äºä¸åŒçš„åœºæ™¯ã€‚
Stringç‰¹ç‚¹ï¼šStringç±»å‹æ˜¯redisæœ€å¸¸ç”¨çš„æ•°æ®ç»“æ„ç±»å‹ï¼Œå­˜å‚¨çš„å€¼ä¸ºå­—ç¬¦ä¸²ã€‚
åº”ç”¨åœºæ™¯ï¼ši. åšä¸ç»Ÿè®¡æœ‰å…³çš„ä¸šåŠ¡ï¼Œå¦‚æ–°æµªå¾®åšï¼ˆå¾®ä¿¡æœ‹å‹åœˆï¼‰ä¸­çš„ç‚¹èµåŠŸèƒ½ã€‚ç›¸å…³å‘½ä»¤ï¼šincrã€incrbyã€decrã€decrbyã€‚
ii. è§£å†³å¤šçº¿ç¨‹çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚redisçš„keyæ˜¯å•çº¿ç¨‹æ¨¡å¼ï¼Œè¿™å°±æ„å‘³ä¸€ç¬é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤ŸæŒæœ‰è¿™ä¸ªkeyï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨redisè§£å†³éƒ¨åˆ†æ¶‰åŠçº¿ç¨‹å®‰å…¨çš„ä¸šåŠ¡ï¼Œæ¯”å¦‚è¯´æŠ¢è´­ã€ç§’æ€ã€‚
Listç‰¹ç‚¹ï¼š

åŸºäºLinked Listå®ç°ã€‚
å…ƒç´ æ˜¯å­—ç¬¦ä¸²ç±»å‹ã€‚
åˆ—è¡¨å¤´å°¾å¢åˆ å¿«ï¼Œä¸­é—´å¢åˆ æ…¢ï¼Œå¢åˆ å…ƒç´ æ˜¯å¸¸æ€ã€‚
ä»å·¦è‡³å³ï¼Œä»0å¼€å§‹ï¼Œä»å³è‡³å·¦ï¼Œä»-1å¼€å§‹ã€‚
å…ƒç´ å¯ä»¥é‡å¤å‡ºç°ã€‚
æœ€å¤šåŒ…å«2^32-1å…ƒç´ ã€‚

åº”ç”¨åœºæ™¯ï¼ši. å¤„ç†é¡ºåºç±»ä¸šåŠ¡ã€‚å¦‚æ–°æµªå¾®åšè¯„è®ºã€è®ºå›å›å¸–æ¥¼å±‚ç­‰ã€‚ii. èŠå¤©å®¤ã€‚
Hashç‰¹ç‚¹ï¼š

hashå†…å®¹ç”±fieldå’Œä¸ä¹‹å…³è”çš„valueç»„æˆmapé”®å€¼å¯¹ç»„æˆ
keyã€fieldå’Œvalueæ˜¯å­—ç¬¦ä¸²ç±»å‹
ä¸€ä¸ªhashä¸­æœ€å¤šåŒ…å«2^32-1é”®å€¼å¯¹

åº”ç”¨åœºæ™¯ï¼ši. èŠ‚çœèµ„æºredisæ¯åˆ›å»ºä¸€ä¸ªé”®ï¼Œéƒ½ä¼šä¸ºè¿™ä¸ªé”®å‚¨å­˜ä¸€äº›é™„åŠ çš„ç®¡ç†ä¿¡æ¯ï¼ˆæ¯”å¦‚è¿™ä¸ªé”®çš„ç±»å‹ï¼Œè¿™ä¸ªé”®æœ€åä¸€æ¬¡è¢«è®¿é—®çš„æ—¶é—´ç­‰ç­‰ï¼‰ï¼Œå› æ­¤redisçš„keyç›¸å¯¹äºå€¼æ¥è¯´ï¼Œæ›´çè´µï¼ï¼ï¼reidsæ•°æ®åº“ä¸­çš„é”®è¶Šå¤šï¼Œredisæ•°æ®åº“æœåŠ¡å™¨åœ¨å‚¨å­˜é™„åŠ ç®¡ç†ä¿¡æ¯æ–¹é¢è€—è´¹çš„å†…å­˜å°±è¶Šå¤šï¼Œåœ¨è·å–keyå¯¹åº”çš„valueå€¼æ—¶cpuçš„å¼€é”€ä¹Ÿä¼šæ›´å¤šã€‚Hashç»“æ„å¯ä»¥å°†å…·æœ‰å…³è”å…³ç³»çš„ä¸€ç»„key-valueï¼Œå­˜å‚¨åˆ°åŒä¸€ä¸ªhashç»“æ„ä¸­ï¼Œä»è€Œå‡å°‘keyçš„æ•°é‡ã€‚å› æ­¤èƒ½ä½¿ç”¨hashçš„æ—¶å€™å°½é‡ä½¿ç”¨hashï¼Œè¿™ä¹Ÿæ˜¯hashç±»å‹çš„åº”ç”¨åœºæ™¯ã€‚
Hashç±»å‹ä¸é€‚ç”¨çš„åœºæ™¯ï¼ši. å¯¹æŸä¸€ä¸ªfieldè®¾ç½®è¿‡æœŸæ—¶é—´å¦‚æœæˆ‘ä»¬ä»…ä»…åªå¯¹ä¸€ä¸ªå­—æ®µè®¾ç½®è¿‡æœŸï¼Œå°±ä¸èƒ½ä½¿ç”¨hashã€‚å› ä¸ºRedisçš„keyçš„è¿‡æœŸåŠŸèƒ½åªèƒ½å¯¹é”®æ“ä½œï¼Œè€ŒHashç»“æ„ä¸èƒ½å•ç‹¬å¯¹æŸä¸€ä¸ªfiledè®¾ç½®è¿‡æœŸåŠŸèƒ½ã€‚
Setç‰¹ç‚¹ï¼š

æ— åºçš„ã€æ— é‡å¤çš„
å…ƒç´ æ˜¯å­—ç¬¦ä¸²ç±»å‹
æœ€å¤šåŒ…å«2^32-1å…ƒç´ 

åº”ç”¨åœºæ™¯ï¼ši. æ–°æµªå¾®åšçš„å…±åŒå…³æ³¨å½“ç”¨æˆ·è®¿é—®å¦ä¸€ä¸ªç”¨æˆ·çš„æ—¶å€™ï¼Œä¼šæ˜¾ç¤ºå‡ºä¸¤ä¸ªç”¨æˆ·å…±åŒå…³æ³¨å“ªäº›ç›¸åŒçš„ç”¨æˆ·ã€‚å°†æ¯ä¸ªç”¨æˆ·å…³æ³¨çš„ç”¨æˆ·æ”¾åœ¨é›†åˆä¸­ï¼Œæ±‚äº¤é›†å³å¯ã€‚
ZSetç‰¹ç‚¹ï¼š

ç±»ä¼¼Seté›†åˆ
æœ‰åºçš„ã€æ— é‡å¤çš„
å…ƒç´ æ˜¯å­—ç¬¦ä¸²ç±»å‹
æ¯ä¸€ä¸ªå…ƒç´ éƒ½å…³è”ç€ä¸€ä¸ªæµ®ç‚¹æ•°åˆ†å€¼ï¼ˆScoreï¼‰ï¼Œå¹¶æŒ‰ç…§åˆ†å€¼ä»å°åˆ°å¤§çš„é¡ºåºæ’åˆ—é›†åˆä¸­çš„å…ƒç´ ã€‚æ³¨æ„ï¼šåˆ†å€¼å¯ä»¥ç›¸åŒ
æœ€å¤šåŒ…å«2^32-1å…ƒç´ 

é€‚ç”¨åœºæ™¯ï¼ši. é€‚ç”¨äºéœ€è¦æœ‰åºä¸”å”¯ä¸€çš„ä¸šåŠ¡æˆ–æ“ä½œï¼šç½‘æ˜“éŸ³ä¹æ’è¡Œæ¦œæ¯é¦–æ­Œçš„æ­Œåä½œä¸ºå…ƒç´ ï¼ˆå”¯ä¸€ã€ä¸é‡å¤ï¼‰ï¼›æ¯é¦–æ­Œçš„æ’­æ”¾æ¬¡æ•°ä½œä¸ºåˆ†å€¼ï¼›ä½¿ç”¨zrevrange å‘½ä»¤æ¥è·å–æ’­æ”¾æ¬¡æ•°æœ€å¤šçš„æ­Œæ›²
Rediså¸¸ç”¨å‘½ä»¤å‚è€ƒæ–‡æ¡£ï¼šRediså‘½ä»¤å‚è€ƒ
ç‰¹åˆ«æ³¨æ„ï¼šrediså‘½ä»¤ä¸åŒºåˆ†å¤§å°å†™ã€‚
æ•°æ®åº“æ“ä½œå»ºç«‹è¿æ¥redis-cli -h 192.168.56.102 -p 6379# docker exec -it redis-client redis-cli -h 192.168.56.102 -p 6379
è¯·æ±‚å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ã€‚
é€€å‡ºè¿æ¥quit
è¯·æ±‚æœåŠ¡å™¨å…³é—­ä¸å½“å‰å®¢æˆ·ç«¯çš„è¿æ¥ã€‚ä¸€æ—¦æ‰€æœ‰ç­‰å¾…ä¸­çš„å›å¤(å¦‚æœæœ‰çš„è¯)é¡ºåˆ©å†™å…¥åˆ°å®¢æˆ·ç«¯ï¼Œè¿æ¥å°±ä¼šè¢«å…³é—­ã€‚
è®¾ç½®å¯†ç é€šè¿‡è®¾ç½®é…ç½®æ–‡ä»¶ä¸­ requirepass é¡¹çš„å€¼(ä½¿ç”¨å‘½ä»¤ CONFIG SET requirepass password )ï¼Œå¯ä»¥ä½¿ç”¨å¯†ç æ¥ä¿æŠ¤ Redis æœåŠ¡å™¨ã€‚
å¦‚æœå¼€å¯äº†å¯†ç ä¿æŠ¤çš„è¯ï¼Œåœ¨æ¯æ¬¡è¿æ¥ Redis æœåŠ¡å™¨ä¹‹åï¼Œå°±è¦ä½¿ç”¨ AUTH å‘½ä»¤è§£é”ï¼Œè§£é”ä¹‹åæ‰èƒ½ä½¿ç”¨å…¶ä»– Redis å‘½ä»¤ã€‚
å¦‚æœ AUTH å‘½ä»¤ç»™å®šçš„å¯†ç  password å’Œé…ç½®æ–‡ä»¶ä¸­çš„å¯†ç ç›¸ç¬¦çš„è¯ï¼ŒæœåŠ¡å™¨ä¼šè¿”å› OK å¹¶å¼€å§‹æ¥å—å‘½ä»¤è¾“å…¥ã€‚
å¦ä¸€æ–¹é¢ï¼Œå‡å¦‚å¯†ç ä¸åŒ¹é…çš„è¯ï¼ŒæœåŠ¡å™¨å°†è¿”å›ä¸€ä¸ªé”™è¯¯ï¼Œå¹¶è¦æ±‚å®¢æˆ·ç«¯éœ€é‡æ–°è¾“å…¥å¯†ç ã€‚
1ã€è®¾ç½®å¯†ç 
config set requirepass secret_password   # å°†å…¨å±€å¯†ç è®¾ç½®ä¸º secret_passwordquit

2ã€ä½¿ç”¨å¯†ç 
pingauth secret_password                     # è¾“å…¥æ­£ç¡®çš„å¯†ç ping 

è®¾ç½®äº†å¯†ç ä¿æŠ¤ä¹‹åï¼Œå¦‚æœæƒ³è¦ç›´æ¥é€šè¿‡redis-cliç›´æ¥æ‰§è¡Œrediså‘½ä»¤ï¼Œå¯ä»¥åŠ ä¸Š-aå‚æ•°ã€‚
docker exec -it redis-client redis-cli -h 192.168.56.102 -p 6379 -a &#x27;secret_password&#x27; ping

æ–°å¢ç”¨æˆ·å¹¶æˆæƒACL SETUSER alice on +@read +@allchannels#ACL SETUSER alice on allkeys +get +setACL LISTACL GETUSER aliceACL SETUSER alice &gt;alice_passwordAUTH alice alice_password# ACL DELUSER alice

å‚è€ƒæ–‡æ¡£ï¼šACLï¼ˆRedis Access Control Listï¼‰
æŒ‡å®šç”¨æˆ·è¿æ¥Redisæ–¹æ³•ä¸€ï¼š
redis-cli -h 192.168.56.102 -p 6379&gt; AUTH alice alice_password

æ–¹æ³•äºŒï¼š
redis-cli -h 192.168.56.102 -p 6379 -u alice -p alice_password

æ–¹æ³•ä¸‰ï¼š
redis-cli -u redis://alice:alice_password@192.168.56.102:6379

å‚è€ƒæ–‡æ¡£ï¼šhow to login redis 6.0+ use username and password
åˆ‡æ¢æ•°æ®åº“ä½¿ç”¨selectåˆ‡æ¢åˆ°æŒ‡å®šçš„æ•°æ®åº“ï¼Œæ•°æ®åº“ç´¢å¼•å· index ç”¨æ•°å­—å€¼æŒ‡å®šï¼Œä»¥ 0 ä½œä¸ºèµ·å§‹ç´¢å¼•å€¼ã€‚
SET db_number 0SELECT 1 GET db_numberSET db_number 1GET db_number

ç»Ÿè®¡ä¿¡æ¯ä»¥ä¸€ç§æ˜“äºè§£é‡Šï¼ˆparseï¼‰ä¸”æ˜“äºé˜…è¯»çš„æ ¼å¼ï¼Œè¿”å›å…³äº Redis æœåŠ¡å™¨çš„å„ç§ä¿¡æ¯å’Œç»Ÿè®¡æ•°å€¼ã€‚é€šè¿‡ç»™å®šå¯é€‰çš„å‚æ•° section ï¼Œå¯ä»¥è®©å‘½ä»¤åªè¿”å›æŸä¸€éƒ¨åˆ†çš„ä¿¡æ¯ï¼š

info serverï¼š ä¸€èˆ¬ Redis æœåŠ¡å™¨ä¿¡æ¯
info clientsï¼š å·²è¿æ¥å®¢æˆ·ç«¯ä¿¡æ¯
info memoryï¼š å†…å­˜ä¿¡æ¯
info persistenceï¼š RDB å’Œ AOF çš„ç›¸å…³ä¿¡æ¯
info statsï¼š ä¸€èˆ¬ç»Ÿè®¡ä¿¡æ¯
info replicationï¼š ä¸»/ä»å¤åˆ¶ä¿¡æ¯
info cpuï¼š CPU è®¡ç®—é‡ç»Ÿè®¡ä¿¡æ¯
info commandstatsï¼š Redis å‘½ä»¤ç»Ÿè®¡ä¿¡æ¯
info clusterï¼š Redis é›†ç¾¤ä¿¡æ¯
info keyspaceï¼š æ•°æ®åº“ç›¸å…³çš„ç»Ÿè®¡ä¿¡æ¯
info allï¼š è¿”å›æ‰€æœ‰ä¿¡æ¯
info defaultï¼š è¿”å›é»˜è®¤é€‰æ‹©çš„ä¿¡æ¯

å½“ä¸å¸¦å‚æ•°ç›´æ¥è°ƒç”¨ INFO å‘½ä»¤æ—¶ï¼Œä½¿ç”¨ default ä½œä¸ºé»˜è®¤å‚æ•°ã€‚
info memoryinfo stats

æµ‹è¯•pingpingä½¿ç”¨å®¢æˆ·ç«¯å‘ Redis æœåŠ¡å™¨å‘é€ä¸€ä¸ª PING ï¼Œå¦‚æœæœåŠ¡å™¨è¿ä½œæ­£å¸¸çš„è¯ï¼Œä¼šè¿”å›ä¸€ä¸ª PONG ã€‚é€šå¸¸ç”¨äºæµ‹è¯•ä¸æœåŠ¡å™¨çš„è¿æ¥æ˜¯å¦ä»ç„¶ç”Ÿæ•ˆï¼Œæˆ–è€…ç”¨äºæµ‹é‡å»¶è¿Ÿå€¼ã€‚
echoæ‰“å°ä¸€ä¸ªç‰¹å®šçš„ä¿¡æ¯ message ï¼Œæµ‹è¯•æ—¶ä½¿ç”¨ã€‚
echo &quot;test&quot;

Stringç±»å‹æ“ä½œè®¾ç½®keyselect 3set key_name key_value

æŸ¥è¯¢keyselect 3get key_namekeys *

éå†keySCAN cursor [MATCH pattern] [COUNT count]SCAN å‘½ä»¤åŠå…¶ç›¸å…³çš„ SSCAN å‘½ä»¤ã€ HSCAN å‘½ä»¤å’Œ ZSCAN å‘½ä»¤éƒ½ç”¨äºå¢é‡åœ°è¿­ä»£ï¼ˆincrementally iterateï¼‰ä¸€é›†å…ƒç´ ï¼ˆa collection of elementsï¼‰ï¼š

SCAN å‘½ä»¤ç”¨äºè¿­ä»£å½“å‰æ•°æ®åº“ä¸­çš„æ•°æ®åº“é”®ã€‚
SSCAN å‘½ä»¤ç”¨äºè¿­ä»£é›†åˆé”®ä¸­çš„å…ƒç´ ã€‚
HSCAN å‘½ä»¤ç”¨äºè¿­ä»£å“ˆå¸Œé”®ä¸­çš„é”®å€¼å¯¹ã€‚
ZSCAN å‘½ä»¤ç”¨äºè¿­ä»£æœ‰åºé›†åˆä¸­çš„å…ƒç´ ï¼ˆåŒ…æ‹¬å…ƒç´ æˆå‘˜å’Œå…ƒç´ åˆ†å€¼ï¼‰ã€‚

æŸ¥çœ‹keyæ•°é‡dbsizeï¼šè¿”å›å½“å‰æ•°æ®åº“çš„ key çš„æ•°é‡ã€‚
Hashç±»å‹æ“ä½œ
hkeys keyï¼šè¿”å›å“ˆå¸Œè¡¨ key ä¸­çš„æ‰€æœ‰åŸŸã€‚
hget key fieldï¼šè¿”å›å“ˆå¸Œè¡¨ key ä¸­ç»™å®šåŸŸfieldçš„å€¼
hlen keyï¼šè¿”å›å“ˆå¸Œè¡¨ key ä¸­åŸŸçš„æ•°é‡ã€‚
hgetall keyï¼šè¿”å›å“ˆå¸Œè¡¨ key ä¸­ï¼Œæ‰€æœ‰çš„åŸŸå’Œå€¼ã€‚
hexists key fieldï¼šæŸ¥çœ‹å“ˆå¸Œè¡¨ key ä¸­ï¼Œç»™å®šåŸŸ field æ˜¯å¦å­˜åœ¨ã€‚
hset key field valueï¼šå°†å“ˆå¸Œè¡¨ key ä¸­çš„åŸŸ field çš„å€¼è®¾ä¸º value ã€‚
hdel key field [field ...]ï¼šåˆ é™¤å“ˆå¸Œè¡¨ key ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡å®šåŸŸï¼Œä¸å­˜åœ¨çš„åŸŸå°†è¢«å¿½ç•¥ã€‚

Redisé›†ç¾¤æ“ä½œå‚è€ƒæ–‡æ¡£ï¼šã€ŠRedisé›†ç¾¤æ¨¡å¼æ¦‚è¿°ã€‹
å†…å­˜ç¢ç‰‡ç‡è¯´æ˜ä½¿ç”¨info memoryå¯ä»¥æŸ¥çœ‹å†…å­˜ç¢ç‰‡ç‡ï¼Œå†…å­˜ç¢ç‰‡ç‡è®¡ç®—æ–¹æ³•ä¸ºï¼šmem_fragmentation_ratio = used_memory_rss / used_memory
å†…å­˜ç¢ç‰‡ç‡å¤§å°è¯´æ˜ï¼š

mem_fragmentation_ratio &lt; 1 è¡¨ç¤ºRediså†…å­˜åˆ†é…è¶…å‡ºäº†ç‰©ç†å†…å­˜ï¼Œæ“ä½œç³»ç»Ÿæ­£åœ¨è¿›è¡Œå†…å­˜äº¤æ¢ï¼Œå†…å­˜äº¤æ¢ä¼šå¼•èµ·éå¸¸æ˜æ˜¾çš„å“åº”å»¶è¿Ÿï¼›
mem_fragmentation_ratio &gt; 1 æ˜¯åˆç†çš„ï¼›
mem_fragmentation_ratio &gt; 1.5 è¯´æ˜Redisæ¶ˆè€—äº†å®é™…éœ€è¦ç‰©ç†å†…å­˜çš„150%ä»¥ä¸Šï¼Œå…¶ä¸­50%æ˜¯å†…å­˜ç¢ç‰‡ç‡ï¼Œå¯èƒ½æ˜¯æ“ä½œç³»ç»Ÿæˆ–Rediså®ä¾‹ä¸­å†…å­˜ç®¡ç†å˜å·®çš„è¡¨ç°

æ‰‹åŠ¨æ¸…ç†å†…å­˜ç¢ç‰‡æ–¹æ³•ï¼š
memory purge

ä½†æ˜¯ï¼Œå¯¹äºredis5.0.14ï¼Œè¿™ä¸ªå†…å­˜ç¢ç‰‡ç‡çš„è¯´æ˜å¹¶ä¸é€‚ç”¨ï¼Œç»æµ‹è¯•æŸ¥çœ‹åˆ°çš„å†…å­˜ç¢ç‰‡ç‡ä¸º13-15ï¼Œè¿œå¤§äº1ã€‚å‚è€ƒæ–‡æ¡£Commands - INFOå’ŒRedis 5.0.11 high memory fragmentation ratioå¯çŸ¥ï¼š

allocator_frag_ratio:: Ratio between allocator_active and allocator_allocated. This is the true (external) fragmentation metric (not mem_fragmentation_ratio).


you are looking at mem_fragmentation_ratio which is not actually fragmentation. Itâ€™s the ratio of used memory to RSS (resident physical memory), We donâ€™t rename if for the sake of backwards compatibility.RSS includes shared libraries, code, stack and other things, so while this metric is useful, itâ€™s not actually fragmentation (which has risk of rising to high values).If you wanna look at fragmentation, you should look at allocator_frag_ratio instead.But another point is that your db is nearly empty, so although the ratio seems high, itâ€™s not actually a lot of memory.allocator_frag_bytes shows just about 400kb.You only wanna be concerned if that number is high, and in that case you can enable activedefrag

å› æ­¤ï¼Œå¯¹äºredis5.0.14å’Œæ›´é«˜ç‰ˆæœ¬ï¼Œå†…å­˜ç¢ç‰‡ç‡åº”è¯¥æŸ¥çœ‹ allocator_frag_ratio è€Œä¸æ˜¯ mem_fragmentation_ratioã€‚
Rediså¯è§†åŒ–å·¥å…·RedisInsightRedisInsight is supported on multiple operating systems: Linux, Windows, and macOS.
RedisInsight supports all Redis deployments. Whether you use Redis Open Source, Redis Stack, Redis Enterprise Software, Redis Enterprise Cloud, or Amazon ElastiCache, RedisInsight makes it easy to interact with your data and your application.
å®˜æ–¹ç½‘ç«™ï¼šRedisInsight
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>docker</category>
        <category>database</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>æ•°æ®åº“</tag>
        <tag>redis</tag>
        <tag>ç¼“å­˜</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker-Composeå…¥é—¨ç¯‡</title>
    <url>/dev-docker-compose/</url>
    <content><![CDATA[Docker-Composeç®€ä»‹Composeæ˜¯ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨Dockeråº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚é€šè¿‡Composeï¼Œå¯ä»¥ä½¿ç”¨YAMLæ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºçš„æœåŠ¡ã€‚ç„¶åä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥ä»é…ç½®ä¸­åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚Composeå¯åœ¨æ‰€æœ‰ç¯å¢ƒä¸­å·¥ä½œï¼šç”Ÿäº§ã€æ¨¡æ‹Ÿã€å¼€å‘ã€æµ‹è¯•ä»¥åŠCIå·¥ä½œæµã€‚
ä½¿ç”¨ComposeåŸºæœ¬ä¸Šæ˜¯ä¸‰æ­¥æµç¨‹ï¼š

ä½¿ç”¨Dockerfileå®šä¹‰åº”ç”¨ç¨‹åºçš„ç¯å¢ƒï¼Œä»¥ä¾¿å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å¤åˆ¶å®ƒã€‚
åœ¨docker-compose.ymlä¸­å®šä¹‰ç»„æˆæ‚¨çš„åº”ç”¨ç¨‹åºçš„æœåŠ¡ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥åœ¨éš”ç¦»çš„ç¯å¢ƒä¸­ä¸€èµ·è¿è¡Œã€‚
è¿è¡Œdocker-compose upï¼Œç„¶åComposeå¯åŠ¨å¹¶è¿è¡Œæ•´ä¸ªåº”ç”¨ç¨‹åºã€‚

Docker-Composeé¡¹ç›®ç”±Pythonç¼–å†™ï¼Œè°ƒç”¨DockeræœåŠ¡æä¾›çš„APIæ¥å¯¹å®¹å™¨è¿›è¡Œç®¡ç†ã€‚å› æ­¤ï¼Œåªè¦æ‰€æ“ä½œçš„å¹³å°æ”¯æŒDocker APIï¼Œå°±å¯ä»¥åœ¨å…¶ä¸Šåˆ©ç”¨Composeæ¥è¿›è¡Œç¼–æ’ç®¡ç†ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Overview of Docker Compose
Docker å…¥é—¨æ•™ç¨‹
docker/compose



å®‰è£…Composeåœ¨CentOS7æœºå™¨ä¸Šï¼Œå‡è®¾å·²ç»äº†Dockerï¼Œå‚è€ƒInstall Docker Composeå®‰è£…Compose-Dockerã€‚å¦‚æœæ²¡æœ‰å®‰è£…Dockerï¼Œé‚£ä¹ˆå‚è€ƒDockerå…¥é—¨è¿›è¡Œå®‰è£…ã€‚
1ã€å®‰è£…docker-compose 1.24.1 ç‰ˆæœ¬
sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.24.1/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose

2ã€æ·»åŠ æ‰§è¡Œæƒé™
sudo chmod +x /usr/local/bin/docker-composesudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose

3ã€éªŒè¯å®‰è£…
docker-compose --version

Hello World1ã€åˆ›å»ºæµ‹è¯•ç›®å½•
mkdir composetestcd composetest

2ã€åœ¨é¡¹ç›®ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸ºapp.pyçš„æ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
import timeimport redisfrom flask import Flaskapp = Flask(__name__)cache = redis.Redis(host=&#x27;redis&#x27;, port=6379)def get_hit_count():    retries = 5    while True:        try:            return cache.incr(&#x27;hits&#x27;)        except redis.exceptions.ConnectionError as exc:            if retries == 0:                raise exc            retries -= 1            time.sleep(0.5)@app.route(&#x27;/&#x27;)def hello():    count = get_hit_count()    return &#x27;Hello World! I have been seen &#123;&#125; times.\n&#x27;.format(count)
åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œredisæ˜¯åº”ç”¨ç¨‹åºç½‘ç»œä¸Šçš„rediså®¹å™¨çš„ä¸»æœºåï¼Œä½¿ç”¨é»˜è®¤ç«¯å£6379ã€‚
3ã€åˆ›å»ºrequirements.txtæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
flaskredis

4ã€åˆ›å»ºDockerfileï¼Œå†…å®¹ä¸ºï¼š
FROM python:3.7-alpineWORKDIR /codeENV FLASK_APP app.pyENV FLASK_RUN_HOST 0.0.0.0RUN apk add --no-cache gcc musl-dev linux-headersCOPY requirements.txt requirements.txtRUN pip install -r requirements.txtCOPY . .CMD [&quot;flask&quot;, &quot;run&quot;]

è¯¥æ–‡ä»¶è¯´æ˜ï¼š

ä»Python 3.7é•œåƒåƒå¼€å§‹æ„å»ºé•œåƒã€‚
å°†å·¥ä½œç›®å½•è®¾ç½®ä¸º/codeã€‚
è®¾ç½®flaskå‘½ä»¤ä½¿ç”¨çš„ç¯å¢ƒå˜é‡ã€‚
å®‰è£…gccï¼Œä»¥ä¾¿è¯¸å¦‚MarkupSafeå’ŒSQLAlchemyä¹‹ç±»çš„PythonåŒ…å¯ä»¥ç¼–è¯‘åŠ é€Ÿã€‚
å¤åˆ¶requirements.txtå¹¶å®‰è£…Pythonä¾èµ–é¡¹ã€‚
å¤åˆ¶å½“å‰ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶åˆ°å·¥ä½œç›®å½•ã€‚
å°†å®¹å™¨çš„é»˜è®¤å‘½ä»¤è®¾ç½®ä¸ºflask runã€‚

æœ‰å…³å¦‚ä½•ç¼–å†™Dockerfileçš„æ›´å¤šä¿¡æ¯ï¼Œå‚è€ƒDockerç”¨æˆ·æŒ‡å—å’ŒDockerfileå‚è€ƒã€‚
5ã€åˆ›å»ºdocker-compose.ymlï¼Œå†…å®¹ä¸ºï¼š
version: &#x27;3&#x27;services:  web:    build: .    ports:      - &quot;15000:5000&quot;  redis:    image: &quot;redis:alpine&quot;
è¯¥Composeæ–‡ä»¶å®šä¹‰äº†ä¸¤ä¸ªæœåŠ¡ï¼šWebå’ŒRedisã€‚WebæœåŠ¡ä»Dockerfileæ„å»ºé•œåƒï¼Œå¯åŠ¨åå®¹å™¨åœ¨5000ç«¯å£æä¾›æœåŠ¡ï¼Œç„¶åå°†å®¹å™¨ç«¯å£5000ç»‘å®šåˆ°ä¸»æœºç«¯å£15000ã€‚
6ã€ä½¿ç”¨Composeæ„å»ºå’Œè¿è¡Œåº”ç”¨
docker-compose up

7ã€æµ‹è¯•åº”ç”¨
curl http://127.0.0.1:15000

Hello World 2.01ã€ç¼–è¾‘docker-compose.ymlï¼ŒæŒ‚è½½å½“å‰ç›®å½•åˆ°/code
version: &#x27;3&#x27;services:  web:    build: .    ports:      - &quot;5000:5000&quot;    volumes:      - .:/code    environment:      FLASK_ENV: development  redis:    image: &quot;redis:alpine&quot;

2ã€è¿è¡Œåº”ç”¨
docker-compose up

3ã€ä¿®æ”¹app.py
import timeimport redisfrom flask import Flaskapp = Flask(__name__)cache = redis.Redis(host=&#x27;redis&#x27;, port=6379)def get_hit_count():    retries = 5    while True:        try:            return cache.incr(&#x27;hits&#x27;)        except redis.exceptions.ConnectionError as exc:            if retries == 0:                raise exc            retries -= 1            time.sleep(0.5)@app.route(&#x27;/&#x27;)def hello():    count = get_hit_count()    return &#x27;Hello World 2.0! I have been seen &#123;&#125; times.\n&#x27;.format(count)

4ã€æµ‹è¯•åº”ç”¨
curl http://127.0.0.1:15000

å¸¸ç”¨å‘½ä»¤åˆ›å»º/é”€æ¯å®¹å™¨# åˆ›å»ºå¹¶è¿è¡Œå®¹å™¨docker-compose up# åˆ›å»ºå¹¶åå°è¿è¡Œå®¹å™¨docker-compose up -d# å…³é—­å¹¶åˆ é™¤å®¹å™¨docker-compose down# å…³é—­å¹¶åˆ é™¤å®¹å™¨ï¼Œè¿å¸¦åˆ é™¤å®¹å™¨æŒ‚è½½å·docker-compose down --volumes

å¯åŠ¨/åœæ­¢å®¹å™¨# å…³é—­å®¹å™¨ä½†ä¸åˆ é™¤å®¹å™¨docker-compose stop# å¯åŠ¨å®¹å™¨docker-compose start

æŸ¥çœ‹å®¹å™¨# æŸ¥çœ‹å®¹å™¨docker-compose psdocker-compose ps -a# æŸ¥çœ‹webæœåŠ¡çš„ç¯å¢ƒå˜é‡docker-compose run web env

volumeè¯´æ˜dockerä½¿ç”¨æŒä¹…åŒ–å­˜å‚¨çš„æ—¶å€™ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š

bind mountæ–¹å¼ï¼šæŒ‚è½½å®¿ä¸»æœºçš„ç»å¯¹è·¯å¾„ï¼ˆç›®å½•å’Œæ–‡ä»¶éƒ½å¯ä»¥ï¼‰åˆ°å®¹å™¨
volumeæ–¹å¼ï¼šæŒ‚è½½volumeï¼ˆæœ¬è´¨æ˜¯ç›®å½•ï¼‰åˆ°å®¹å™¨

ä½¿ç”¨bind mountæ–¹å¼ï¼Œå¦‚æœå®¿ä¸»æ–‡ä»¶å¤¹æ˜¯ç©ºçš„ï¼Œä¸å…‰å®¹å™¨å†…çš„æ–‡ä»¶ä¸ä¼šè¢«å¤åˆ¶åˆ°å®¿ä¸»æœºå™¨ä¸Šï¼Œå®¹å™¨çš„å†…å®¹è¿˜ä¼šè¢«è¦†ç›–ä¸ºç©ºï¼Œå¯¹äºä¸€äº›å®¹å™¨å†…è·¯å¾„æ–‡ä»¶å¤¹å­˜æ”¾configæ–‡ä»¶çš„æƒ…å†µï¼Œå®¿ä¸»ç›®å½•ä¸ºç©ºä¼šå¯¼è‡´å®¹å™¨å†…çš„å¯¹åº”ç›®å½•è¢«æ¸…ç©ºï¼Œé€ æˆå¯åŠ¨é”™è¯¯çš„é—®é¢˜ã€‚ä½¿ç”¨volumeæ–¹å¼ï¼Œå®¹å™¨å†…çš„æ–‡ä»¶ä¼šè¢«ä¿ç•™åœ¨volumeä¸­ï¼ˆå¯¹åº”çš„_dataæ–‡ä»¶å¤¹ï¼‰å†…éƒ¨ï¼Œä¹Ÿå°±æ˜¯æ–‡ä»¶è¢«å¤åˆ¶åˆ°å®¿ä¸»æœºå™¨ä¸Š.
ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥ä½¿ç”¨-v(â€“volume)å’Œâ€“mountå‚æ•°ï¼Œä½†æ˜¯ï¼Œåœ¨åˆ›å»ºbind mountçš„æ—¶å€™ï¼Œä½¿ç”¨â€“volumeä¼šè‡ªåŠ¨åˆ›å»ºå®¿ä¸»æ–¹çš„æ–‡ä»¶å¤¹ï¼Œè€Œâ€“mountä¸ä¼šï¼Œå› æ­¤ä½¿ç”¨â€“mountæ˜ å°„ä¸å­˜åœ¨çš„ç›®å½•ï¼Œä¼šæŠ¥é”™ã€‚
docker-composeæŒ‡å®šçš„æ—¶å€™ï¼Œæœ‰ä¸€äº›åŒºåˆ«ï¼š

ä½¿ç”¨bind mountçš„æ—¶å€™ï¼Œå®¿ä¸»è¿™è¾¹å¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„äº†(./)ï¼Œä¸éœ€è¦æ˜¾ç¤ºæŒ‡å®š($PWD)
å¯ä»¥åœ¨æŒ‡å®švolumeåç§°çš„åŒæ—¶åˆ›å»ºvolumeï¼Œéœ€è¦ä½¿ç”¨volume:çš„é…ç½®é¡¹

services:  ...  dolphinscheduler-master:    volumes:      - dolphinscheduler-logs:/opt/dolphinscheduler/logs      - dolphinscheduler-shared-local:/opt/soft      #- /xxx/mysql-connector.jar:/opt/dolphinscheduler/libs/mysql-connector.jar      - type: bind        source: /xxx/mysql-connector.jar        target: /opt/dolphinscheduler/libs/mysql-connector.jar

å‚è€ƒæ–‡æ¡£ï¼š

å…³äºä½¿ç”¨docker volumeæŒ‚è½½çš„æ³¨æ„äº‹é¡¹

exposeå’Œportså‚è€ƒæ–‡æ¡£ï¼š

Difference Between Expose and Ports in Docker Compose
docker compose run

exposeexposeæš´éœ²çš„ç«¯å£ï¼Œå¯ç”±è¿æ¥åˆ°åŒä¸€ç½‘ç»œçš„å…¶ä»–æœåŠ¡è®¿é—®ï¼Œä½†ä¸ä¼šåœ¨å®¿ä¸»æœºä¸Šå‘å¸ƒã€‚ä¾‹å¦‚ï¼š
services:  myapp1:    ...    expose:      - &quot;3000&quot;      - &quot;8000&quot;  myapp2:    ...    expose:      - &quot;5000&quot;

docker psç»“æœå¦‚ä¸‹ï¼š
CONTAINER ID   IMAGE    COMMAND     CREATED     STATUS      PORTS               NAMES8673c14f18d1   ...      ...         ...         ...         3000/tcp, 8000/tcp  bael_myapp1bc044e180131   ...      ...         ...         ...         5000/tcp            bael_myapp2

portsportsæš´éœ²çš„ç«¯å£ï¼Œå¯ç”±è¿æ¥åˆ°åŒä¸€ç½‘ç»œçš„å…¶ä»–æœåŠ¡è®¿é—®ï¼Œå¹¶åœ¨å®¿ä¸»æœºä¸Šå‘å¸ƒã€‚ä¾‹å¦‚ï¼š
services:  myapp1:    ...    ports:    - &quot;3000&quot;                             # container port (3000), assigned to random host port    - &quot;3001-3005&quot;                        # container port range (3001-3005), assigned to random host ports    - &quot;8000:8000&quot;                        # container port (8000), assigned to given host port (8000)    - &quot;9090-9091:8080-8081&quot;              # container port range (8080-8081), assigned to given host port range (9090-9091)    - &quot;127.0.0.1:8002:8002&quot;              # container port (8002), assigned to given host port (8002) and bind to 127.0.0.1    - &quot;6060:6060/udp&quot;                    # container port (6060) restricted to UDP protocol, assigned to given host (6060)

docker psç»“æœå¦‚ä¸‹ï¼š
CONTAINER ID   ... PORTS                                                                        NAMESe8c65b9eec91   ... 0.0.0.0:51060-&gt;3000/tcp, 0.0.0.0:51063-&gt;3001/tcp, 0.0.0.0:51064-&gt;3002/tcp,   bael_myapp1                   0.0.0.0:51065-&gt;3003/tcp, 0.0.0.0:51061-&gt;3004/tcp, 0.0.0.0:51062-&gt;3005/tcp,                    0.0.0.0:8000-&gt;8000/tcp, 0.0.0.0:9090-&gt;8080/tcp, 0.0.0.0:9091-&gt;8081/tcp                   127.0.0.1:8002-&gt;8002/tcp, 0.0.0.0:6060-&gt;6060/udp

portsé•¿è¯­æ³•ï¼š
services:   myapp1:  ...  ports:  # - &quot;127.0.0.1:6060:6060/udp&quot;  - target: 6060    host_ip: 127.0.0.1    published: 6060    protocol: udp    mode: host

å°ç»“è¿™ä¸¤ç§æš´éœ²æ–¹å¼ï¼Œæœ€å¤§çš„åŒºåˆ«åœ¨äºæ˜¯å¦åœ¨å®¿ä¸»æœºä¸Šæš´éœ²ç«¯å£ï¼Œæ˜¯å¦å¯¹å¤–éƒ¨ç½‘ç»œæä¾›æœåŠ¡ã€‚ä½¿ç”¨docker psæŸ¥çœ‹å®¹å™¨æ—¶ï¼Œæ ¹æ®PORTSå­—æ®µï¼Œæˆ‘ä»¬ä¹Ÿèƒ½åˆ¤æ–­å‡ºè¯¥å®¹å™¨æ˜¯å¦åœ¨å®¿ä¸»æœºä¸Šæš´éœ²ç«¯å£ã€‚
ä½†æ˜¯ï¼Œä¸ªåˆ«æƒ…å†µä¸‹ï¼Œè™½ç„¶æˆ‘ä»¬çœ‹åˆ°çš„æ˜¯ç«¯å£æ˜¯3000/tcpï¼Œä½†æ˜¯ä¾ç„¶å¯èƒ½åœ¨å®¿ä¸»æœºä¸Šæš´éœ²ç«¯å£ã€‚å¯èƒ½æ˜¯docker/docker-composeæŸä¸ªç‰ˆæœ¬çš„bugï¼Œä¹Ÿå¯èƒ½æ˜¯yamlæ–‡ä»¶ä¸­çš„versionä¸åŒ¹é…ï¼Œä¹Ÿå¯èƒ½æ˜¯å…¶ä»–ä»€ä¹ˆåŸå› ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œåªèƒ½æ‰¾åˆ°docker-compose.ymlï¼ŒæŸ¥çœ‹ç«¯å£æ˜ å°„å…³ç³»ï¼Œç„¶åæŸ¥çœ‹å®¿ä¸»æœºç«¯å£å¼€æ”¾æƒ…å†µã€‚
Docker-Composeç½‘ç»œé—®é¢˜docker-compose upçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç½‘æ¡¥ï¼Œå ç”¨ä¸€ä¸ªç½‘æ®µï¼Œå¹¶ä¸”æ·»åŠ è·¯ç”±è§„åˆ™ã€‚å¦‚æœè¿™ä¸ªç½‘æ®µå’Œç°æœ‰ç½‘æ®µå‘ç”Ÿäº†å†²çªï¼Œå°±ä¼šå¯¼è‡´ä¸€äº›éé¢„æœŸçš„ç½‘ç»œé—®é¢˜ï¼Œæ¯”å¦‚ä¸»æœºçªç„¶è®¿é—®ä¸é€šäº†ã€‚è§£å†³åŠæ³•æ˜¯æŒ‡å®šç½‘æ®µï¼Œè¯¦æƒ…å‚è€ƒdocker-compose upä½¿ç”¨è‡ªå®šä¹‰çš„ç½‘æ®µçš„ä¸¤ç§æ–¹å¼
æŸ¥çœ‹è·¯ç”±ï¼š
ip routeroute -n

æŸ¥çœ‹dockerç½‘æ®µä½¿ç”¨æƒ…å†µï¼š
docker network listdocker network inspect xxx







]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
        <category>docker</category>
        <category>network</category>
        <category>troubleshooting</category>
        <category>storage</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>docker</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>ç½‘ç»œ</tag>
        <tag>docker-compose</tag>
        <tag>å­˜å‚¨</tag>
      </tags>
  </entry>
  <entry>
    <title>Alpineå…¥é—¨ç¯‡</title>
    <url>/dev-alpine-start/</url>
    <content><![CDATA[Alpineç®€ä»‹Alpine Linuxæ˜¯åŸºäºmusl libcå’Œ busybox çš„é¢å‘å®‰å…¨çš„è½»é‡çº§Linuxå‘è¡Œç‰ˆã€‚Alpineçš„VMé•œåƒå¤§å°113Mï¼ŒAlpineçš„Dockeré•œåƒå¤§å°åªæœ‰2Mï¼
Alpineç”±éå•†ä¸šç»„ç»‡ç»´æŠ¤çš„ï¼Œæ”¯æŒå¹¿æ³›åœºæ™¯çš„Linuxå‘è¡Œç‰ˆï¼Œå®ƒç‰¹åˆ«ä¸ºèµ„æ·±/é‡åº¦Linuxç”¨æˆ·è€Œä¼˜åŒ–ï¼Œå…³æ³¨å®‰å…¨ï¼Œæ€§èƒ½å’Œèµ„æºæ•ˆèƒ½ã€‚Alpine é•œåƒå¯ä»¥é€‚ç”¨äºæ›´å¤šå¸¸ç”¨åœºæ™¯ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ªä¼˜ç§€çš„å¯ä»¥é€‚ç”¨äºç”Ÿäº§çš„åŸºç¡€ç³»ç»Ÿ/ç¯å¢ƒã€‚
ç¬¬ä¸€æ¬¡æ¥è§¦alpineï¼Œæ˜¯ä½¿ç”¨å®ƒè·‘å•æµ‹ã€‚gitlabè®¾ç½®ä»£ç æäº¤åè§¦å‘å•æµ‹ï¼Œè€Œè¿™ä¸ªå•æµ‹ï¼Œå¯ä»¥ä½¿ç”¨alpineæ¥è¿›è¡Œã€‚ä½†æ˜¯å› ä¸ºæ—¶åŒºé—®é¢˜ï¼Œè·‘å‡ºçš„å•æµ‹ç»“æœå’Œé¢„æœŸä¸åŒã€‚å› æ­¤ï¼Œæœ¬æ–‡ä»¥ä¿®æ”¹Alpineæ—¶åŒºä¸ºå¼•å­ï¼Œç®€å•å­¦ä¹ äº†è§£ä¸€ä¸‹Alpineã€‚
PSï¼šä¸Alpineç›¸ä¼¼çš„ä¸€ä¸ªå°ç³»ç»ŸCirrOSçš„VMé•œåƒå¤§å°åªæœ‰12Mï¼ŒCirrOSçš„Dockeré•œåƒå¤§å°åªæœ‰10Mã€‚


AlpineåŒ…ç®¡ç†Alpineé‡‡ç”¨äº† musl libc å’Œ busybox ä»¥å‡å°ç³»ç»Ÿçš„ä½“ç§¯å’Œè¿è¡Œæ—¶èµ„æºæ¶ˆè€—ï¼Œä½†åŠŸèƒ½ä¸Šæ¯” busybox åˆå®Œå–„çš„å¤šï¼Œå› æ­¤å¾—åˆ°å¼€æºç¤¾åŒºè¶Šæ¥è¶Šå¤šçš„é’çã€‚
åœ¨ä¿æŒç˜¦èº«çš„åŒæ—¶ï¼ŒAlpineè¿˜æä¾›äº†è‡ªå·±çš„åŒ…ç®¡ç†å·¥å…·apkã€‚å‚è€ƒæ–‡æ¡£ï¼š

Alpine Linux package management
Alpine Linuxä¸‹çš„åŒ…ç®¡ç†å·¥å…·ã€‚

å¸¸ç”¨å‘½ä»¤ï¼š
# æ›´æ–°æœ€æ–°æœ¬åœ°é•œåƒæºapk update # å‡çº§è½¯ä»¶apk upgrade # æŒ‡å®šå‡çº§éƒ¨åˆ†è½¯ä»¶åŒ…apk add --upgrade xxx # å®‰è£…åŒ…apk add xxx# æœç´¢åŒ…ï¼Œæ”¯æŒæ­£åˆ™apk search xxxapk search -v &#x27;xx*&#x27;apk search -v -d &#x27;xxx&#x27;# æŸ¥çœ‹åŒ…è¯¦ç»†ä¿¡æ¯apk info -a xxx# æŸ¥çœ‹åŒ…åˆ—è¡¨apk show# å¸è½½å¹¶åˆ é™¤åŒ…apk del xxx

ä½¿ç”¨apk addå‘½ä»¤æ—¶ï¼Œå¾€å¾€ä¸‹è½½ç¼“æ…¢æˆ–è€…ä¸‹è½½å¤±è´¥ã€‚å‚è€ƒæ¸…åå¤§å­¦Alpineé•œåƒä½¿ç”¨å¸®åŠ©ï¼Œä¿®æ”¹é•œåƒæºã€‚
sed -i &#x27;s/dl-cdn.alpinelinux.org/mirrors.tuna.tsinghua.edu.cn/g&#x27; /etc/apk/repositories

ç¼–è¯‘ä¾èµ–åŒ…build-basebuild-baseé‡Œé¢åŒ…å«gccã€libcã€makeã€g++
apk add --no-cache build-baseapk info -a build-base

ä¿®æ”¹æ—¶åŒºAlpineä¿®æ”¹æ—¶åŒºï¼Œä¸»è¦å‚è€ƒä¿®æ”¹ä½¿ç”¨Alpine Linuxçš„Dockerå®¹å™¨çš„æ—¶åŒºã€‚
1ã€ä¸‹è½½aplineé•œåƒ
docker pull alpine:3.7.3

2ã€å¯åŠ¨aplineå®¹å™¨&amp;ç™»å½•è¿›å…¥å®¹å™¨
docker run -d --name alpine_timezone alpine:3.7.3 sleep 3000docker exec -it alpine_timezone /bin/sh

3ã€å®‰è£…timezone
apk add -U tzdatals /usr/share/zoneinfo

4ã€æ‹·è´éœ€è¦çš„æ—¶åŒºæ–‡ä»¶åˆ°localtime
cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime

5ã€éªŒè¯æ—¶åŒº
date

6ã€ç²¾ç®€é•œåƒ
apk del tzdata

7ã€ä¿å­˜é•œåƒ
exitdocker commit alpine_timezone voidking/alpine:v1.0docker logindocker push

ä»¥ä¸Šï¼Œå®Œæˆäº†Alpineé•œåƒæ—¶åŒºçš„ä¿®æ”¹ã€‚
æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•ï¼Œåœ¨å¯åŠ¨Alpineå®¹å™¨æ—¶æ˜ å°„å®¿ä¸»æœºçš„æ—¶åŒºæ–‡ä»¶ã€‚
docker run --name alpine -it -d -v /etc/localtime:/etc/localtime alpine:3.7.3

æˆ–è€…æ›´ç®€å•ä¸€äº›ï¼Œä½¿ç”¨Dockerfileæ„å»ºæ–°é•œåƒï¼ŒæŠŠå®¿ä¸»æœº/etc/localtimeæ‹·è´åˆ°alpineé•œåƒä¸­ã€‚
é—®é¢˜æ’æŸ¥pipåŒ…å®‰è£…å¤±è´¥python:3.8.8-alpine3.12 ä¸­ï¼Œå®‰è£…pythonåŒ…bcrypt==3.2.2ï¼ŒæŠ¥é”™ï¼š
  unable to execute &#x27;gcc&#x27;: No such file or directory  error: command &#x27;gcc&#x27; failed with exit status 1  ----------------------------------------  ERROR: Failed building wheel for cffi  Running setup.py clean for cffiFailed to build cffiInstalling collected packages: pycparser, wheel, setuptools, cffi    Running setup.py install for cffi: started    Running setup.py install for cffi: finished with status &#x27;error&#x27;    ERROR: Command errored out with exit status 1:

åŸå› ï¼šä»bcryptæ–‡æ¡£å¯çŸ¥ï¼Œbcryptæœ‰ä¸€äº›ä¾èµ–éœ€è¦æå‰å®‰è£…
è§£å†³åŠæ³•ï¼šå®‰è£…gccä¾èµ–
apk add --update musl-dev gcc cargo

å†æ¬¡å®‰è£…bcrypt==3.2.2ï¼ŒæŠ¥é”™ï¼š
  ERROR: Failed building wheel for cffi  Running setup.py clean for cffiFailed to build cffi

è§£å†³åŠæ³•ï¼šå®‰è£…libffi-dev
apk add libffi-dev

å‚è€ƒæ–‡æ¡£ï¼š

bcrypt
libffi / ffi.h issue on alpine-python:3.6-onbuild

è½¯ä»¶åŒ…ä¸‹è½½å¤±è´¥apk add libffi-develæŠ¥é”™ï¼š
ERROR: unsatisfiable constraints:  libffi-devel (missing):    required by: world[libffi-devel]

è¿™æ˜¯å› ä¸ºè½¯ä»¶ä»“åº“æ²¡æœ‰è¿™ä¸ªè½¯ä»¶ï¼Œå¯ä»¥åœ¨Alpineâ€™s package searchç½‘ç«™ä¸Šæœç´¢ï¼Œçœ‹çœ‹åŒ…æ˜¯å¦å­˜åœ¨ï¼Œå«ä»€ä¹ˆåå­—ã€‚
è¿™é‡Œå¯ä»¥æœç´¢å…³é”®å­—libffi*ï¼Œå‘ç°åœ¨alpineä¸­ï¼Œæ²¡æœ‰libffi-develï¼Œåªæœ‰libffi-devï¼Œå®‰è£…å®ƒå³å¯ã€‚
å‚è€ƒæ–‡æ¡£How to resolve missing dependencies in Docker Alpine
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
        <category>docker</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>docker</tag>
        <tag>alpine</tag>
        <tag>busybox</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7éƒ¨ç½²beegoé¡¹ç›®</title>
    <url>/dev-centos7-beego-env/</url>
    <content><![CDATA[å‰è¨€ã€Šbeegoå…¥é—¨ç¯‡â€”â€”ä¸Šã€ä¸­ã€ä¸‹ã€‹ä¸‰ç¯‡æ–‡ç« ä¸­ï¼Œè®°å½•äº†beegoçš„åŸºæœ¬ç”¨æ³•ã€‚å‡è®¾å·²ç»å®Œæˆäº†beegoé¡¹ç›®çš„ä»£ç ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦æŠŠé¡¹ç›®éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šï¼Œæœ¬æ–‡å°±ç ”ç©¶ä¸€ä¸‹æ€æ ·åœ¨CentOS7ç¯å¢ƒé‡Œéƒ¨ç½²beegoæœåŠ¡ã€‚


ç¯å¢ƒå®‰è£…golangå®‰è£…golangï¼Œä¸»è¦å‚è€ƒcentos7å®‰è£…golangç¯å¢ƒã€‚
1ã€golangå®˜ç½‘æŸ¥æ‰¾å®‰è£…åŒ…
2ã€å®‰è£…golangwget https://dl.google.com/go/go1.12.7.linux-amd64.tar.gz
3ã€è§£å‹è‡³/usr/localç›®å½•tar -C /usr/local -xzf go1.12.7.linux-amd64.tar.gz
4ã€é…ç½®ç¯å¢ƒå˜é‡vim /etc/profileï¼Œæ·»åŠ ï¼š
export GOROOT=/usr/local/goexport GOPATH=$HOME/goexport PATH=$PATH:$GOROOT/bin:$GOPATH/bin

source /etc/profileä½¿ä¿®æ”¹ç”Ÿæ•ˆã€‚
5ã€æŸ¥çœ‹å®‰è£…
go versiongo env

beegoå®‰è£…1ã€å®‰è£…beegogo get -v github.com/astaxie/beego
å¦‚æœä¸‹è½½ç¼“æ…¢ï¼Œå¯ä»¥è®¾ç½®GOPROXYã€‚
export GOPROXY=https://goproxy.ioexport GO111MODULE=on

2ã€å®‰è£…beeå·¥å…·go get -v github.com/beego/bee
3ã€åˆ›å»ºæµ‹è¯•é¡¹ç›®testbee new test
4ã€è¿è¡Œé¡¹ç›®
cd $GOPATH/src/testbee run

5ã€è®¿é—®é¡¹ç›®curl http://localhost:8080
æ•°æ®åº“ä¾èµ–1ã€å®‰è£…go-sqlite3
go get -v github.com/mattn/go-sqlite3

éƒ¨ç½²é¡¹ç›®æµ‹è¯•é¡¹ç›®1ã€ä¸‹è½½vkbeego
cd $GOPATH/src/git clone https://github.com/voidking/vkbeego.git

2ã€è¿è¡Œé¡¹ç›®
cd vkbeegobee run
ç¬¬ä¸€æ¬¡è¿è¡Œåä¼šåœ¨é¡¹ç›®ä¸‹ç”Ÿæˆdb.sqlite3æ–‡ä»¶ï¼Œé‡Œé¢æ˜¯userè¡¨ã€‚å¦‚æœå·²ç»æœ‰äº†db.sqlite3æ–‡ä»¶ï¼Œåˆ™ä¼šè¿›è¡Œæ ¡éªŒã€‚æˆ–è€…ä½¿ç”¨bee migrateå‘½ä»¤ç”Ÿæˆè¡¨ç»“æ„ï¼Œå…·ä½“å‚è€ƒbee å·¥å…·å‘½ä»¤è¯¦è§£ã€‚
3ã€è®¿é—®é¡¹ç›®curl http://localhost:8080
å…¶ä»–æœºå™¨å¦‚æœæ— æ³•è®¿é—®ï¼Œå°±å…ˆå…³é—­é˜²ç«å¢™ã€‚systemctl stop firewalld
ç¼–è¯‘éƒ¨ç½²1ã€ç¼–è¯‘å‘½ä»¤go buildé¡¹ç›®ä¸‹ç”Ÿæˆåä¸ºvkbeegoçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚
2ã€è¿è¡Œé¡¹ç›®./vkbeego
3ã€åå°è¿è¡Œnohup ./vkbeego &gt; nohup.out 2&gt;&amp;1 &amp;
4ã€å…³é—­fgï¼Œç„¶åCtrl+Cã€‚
ä»¥ä¸Šï¼Œå°±åœ¨CentOS7ä¸Šéƒ¨ç½²å¥½äº†beegoé¡¹ç›®ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>golang</category>
      </categories>
      <tags>
        <tag>golang</tag>
        <tag>beego</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoæ›´æ¢ä¸»é¢˜ä¸ºNext</title>
    <url>/dev-hexo-theme-next/</url>
    <content><![CDATA[å‰è¨€ä½¿ç”¨Yiliaä¸»é¢˜å¾ˆä¹…äº†ï¼Œè‡ªå·±ä¹Ÿè¿›è¡Œäº†å¾ˆå¤šä¸ªæ€§åŒ–çš„å®šåˆ¶ã€‚ä»Šæ—¥å§‹ï¼Œå†³å®šæŠŠåšå®¢ä¸»é¢˜æ¢æˆæ›´åŠ ç‚«é…·å¼ºå¤§çš„Nextï¼Œæœ¬æ–‡è®°å½•ä¸€ä¸‹æ›¿æ¢è¿‡ç¨‹ã€‚


ä¸‹è½½ä¸»é¢˜1ã€è¿›å…¥hexo/themesç›®å½•ä¸‹ï¼Œå…‹éš†nextä¸»é¢˜git clone https://github.com/voidking/hexo-theme-next.git next
2ã€ç¼–è¾‘hexo/_config.yml
theme: next

ä¸ªæ€§åŒ–é£æ ¼Nextä¸»é¢˜æ”¯æŒå¤šç§é£æ ¼ï¼Œé»˜è®¤ä½¿ç”¨Museé£æ ¼ã€‚è¿™é‡Œåˆ‡æ¢æˆè‡ªå·±æ›´å–œæ¬¢çš„Piscesé£æ ¼ï¼Œç¼–è¾‘next/_config.yml
scheme: Gemini

å¯¼èˆªç¼–è¾‘next/_config.ymlï¼Œå¯ç”¨aboutã€tagsã€categoriesã€archivesã€‚
menu:  home: / || home  about: /about/ || user  tags: /tags/ || tags  categories: /categories/ || th  archives: /archives/ || archive

tagsåŸYiliaä¸»é¢˜ä¸­ï¼Œæ˜¯æ²¡æœ‰tagsé¡µé¢çš„ï¼Œå› æ­¤éœ€è¦åˆ›å»ºã€‚1ã€åˆ›å»ºtagsé¡µé¢hexo new page tags
2ã€ç¼–è¾‘tags/index.md
---title: tagstype: &quot;tags&quot;layout: &quot;tags&quot;comments: false---

å¤´åƒå’Œç­¾åç™¾å¹´è€åº—ï¼Œéœ€è¦logoã€‚1ã€æŠŠavatar.jpgæ”¾å…¥next/source/imagesç›®å½•
2ã€ç¼–è¾‘next/_config.ymlï¼Œå¯ç”¨avatar
# Sidebar Avataravatar:  # Replace the default image and set the url here.  url: /images/avatar.jpg  # If true, the avatar will be dispalyed in circle.  rounded: false  # If true, the avatar will be rotated with the cursor.  rotated: false

ä¸è¿‡ï¼Œé»‘ç™½ä¸»é¢˜é…è¿™ä¸ªå¤´åƒï¼Œæœ‰ç§æç»¿åŒ–çš„æ„Ÿè§‰ï¼Œå“ˆå“ˆã€‚
3ã€ç¼–è¾‘hexo/_config.ymlï¼Œä¿®æ”¹ç­¾å
# Sitetitle: VoidKingsubtitle: å¥½å¥½å­¦ä¹ ï¼Œå¤©å¤©å‘ä¸Šï¼description: å­¦è€Œä¸æ€åˆ™ç½”ï¼Œæ€è€Œä¸å­¦åˆ™æ®†ï¼author: VoidKinglanguage: zh-CNtimezone:

favicon1ã€æŠŠfavicon.pngæ”¾å…¥next/source/imagesç›®å½•
2ã€ç¼–è¾‘next/_config.ymlï¼Œé…ç½®favicon
favicon:  small: /images/favicon.png  medium: /images/favicon.png

scrollpercentåœ¨é˜…è¯»æ–‡ç« è¿‡ç¨‹ä¸­ï¼Œscroll to topæŒ‰é’®æ˜¾ç¤ºå½“å‰æ»šåŠ¨çš„ç™¾åˆ†æ¯”ã€‚
back2top:  enable: true  # Back to top in sidebar.  sidebar: false  # Scroll percent label in b2t button.  scrollpercent: true

ç¤¾äº¤é“¾æ¥ç¼–è¾‘next/_config.ymlï¼Œé…ç½®ç¤¾äº¤é“¾æ¥
# Social Linkssocial:  E-Mail: mailto:voidking@qq.com || envelope  GitHub: https://github.com/voidking || github  Weibo: http://weibo.com/voidking  || weibo  Twitter: https://twitter.com/voidking_com || twitter# `Follow me on GitHub` banner in the top-right corner.github_banner:  enable: true  permalink: https://github.com/voidking  title: Follow me on GitHub

å…³é—­æ›´æ–°æ—¶é—´ç¼–è¾‘next/_config.ymlï¼Œå…³é—­æ–‡ç« çš„æ›´æ–°æ—¶é—´ã€‚
# Post meta display settingspost_meta:  item_text: true  created_at: true  updated_at:    enable: false    another_day: false  categories: true

åŠŸèƒ½å¼ºåŒ–è¯„è®ºåŸYiliaä¸»é¢˜çš„è¯„è®ºæ’ä»¶æ˜¯è‡ªå·±æ·»åŠ çš„livereï¼Œè€ŒNextä¸»é¢˜æ”¯æŒlivereã€‚
ç¼–è¾‘next/_config.ymlï¼Œå¯ç”¨livere
livere_uid: MTAyMC8zODU3Mi8xNTEwMA==

åˆ†äº«1ã€ç¼–è¾‘next/_config.ymlï¼Œæ·»åŠ needmoreshare2åˆ†äº«
needmoreshare2:  enable: true  postbottom:    enable: true    options:      iconStyle: box      boxForm: horizontal      position: bottomCenter      networks: Weibo,Wechat,Douban,QQZone,Twitter,Facebook  float:    enable: true    options:      iconStyle: box      boxForm: horizontal      position: topRight      networks: Weibo,Wechat,Douban,QQZone,Twitter,Facebook

2ã€ä¿®å¤å¾®ä¿¡åˆ†äº«bugneedmoreshare2æœ‰ä¸€ä¸ªbugï¼Œå¾®ä¿¡åˆ†äº«ä¸èƒ½ç”¨ï¼Œæ˜¾ç¤ºloading wechat imageç¼–è¾‘next/source/lib/needsharebutton/needsharebutton.jsï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# var imgSrc = &quot;https://api.qinco.me/api/qr?size=400&amp;content=&quot; + encodeURIComponent(myoptions.url);var imgSrc = &quot;http://api.qrserver.com/v1/create-qr-code/?size=150x150&amp;data=&quot; + encodeURIComponent(myoptions.url);

æœç´¢1ã€hexoç›®å½•ä¸‹ï¼Œå®‰è£…æœç´¢æ’ä»¶npm install hexo-generator-searchdb --save
2ã€ç¼–è¾‘hexo/_config.ymlï¼Œæ·»åŠ 
# local searchsearch:  path: search.xml  field: post  format: html  limit: 10000

3ã€ç¼–è¾‘next/_config.ymlï¼Œå¯ç”¨æœç´¢åŠŸèƒ½
# Local Searchlocal_search:  enable: true  # If auto, trigger search by changing input.  # If manual, trigger search by pressing enter key or search button.  trigger: auto  # Show top n results per article, show all results by setting to -1  top_n_per_article: 1  # Unescape html strings to the readable one.  unescape: false  # Preload the search data when the page loads.  preload: false

é˜…è¯»é‡ç»Ÿè®¡1ã€ç¼–è¾‘next/_config.ymlï¼Œå¯ç”¨ä¸è’œå­ç»Ÿè®¡
busuanzi_count:  enable: true  total_visitors: true  total_visitors_icon: user  total_views: true  total_views_icon: eye  post_views: true  post_views_icon: eye

2ã€ä¿®å¤404é—®é¢˜ä¸è’œå­çš„åŸæœ‰jsåœ°å€å·²ç»è¿‡æœŸï¼Œå› æ­¤æ’ä»¶éœ€è¦ä¿®æ”¹ã€‚ç¼–è¾‘next/layout/_third-party/analytics/busuanzi-counter.swigï¼Œå¦‚ä¸‹ä¿®æ”¹
&lt;!-- &lt;script async src=&quot;https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;&lt;/script&gt; --&gt;&lt;script async src=&quot;//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;&lt;/script&gt;

æ–‡ç« ç½®é¡¶1ã€å®‰è£…æ”¯æŒç½®é¡¶çš„æ’ä»¶
npm uninstall hexo-generator-index --savenpm install hexo-generator-index-pin-top --save

2ã€nextä¸»é¢˜é…ç½®æ”¯æŒæ˜¾ç¤ºç½®é¡¶ç¼–è¾‘æ–‡ä»¶next/layout/_macro/post.swigï¼Œ&lt;div class=&quot;post-meta&quot;&gt;ä¸­æ·»åŠ ï¼š
&#123;% if post.top %&#125;  &lt;i class=&quot;fa fa-thumb-tack&quot;&gt;&lt;/i&gt;  &lt;font color=&quot;RED&quot;&gt;ç½®é¡¶&lt;/font&gt;  &lt;span class=&quot;post-meta-divider&quot;&gt;|&lt;/span&gt;&#123;% endif %&#125;

3ã€éœ€è¦ç½®é¡¶çš„æ–‡ç« å¤´éƒ¨æ·»åŠ topå­—æ®µ
top: true

seo1ã€ç¼–è¾‘next/_config.ymlï¼Œä¿®æ”¹keywords
keywords: &quot;VoidKing, Hankin, å¥½å¥½å­¦ä¹ çš„å¥½, éƒé”¦&quot;

2ã€å¯ç”¨seoä¼˜åŒ–
canonical: trueseo: trueindex_with_subtitle: true

3ã€å¯ç”¨ç™¾åº¦ç»Ÿè®¡
baidu_analytics: b759ac2a7fa45129e3ef060bf68259f0

MathJaxç¼–è¾‘next/_config.ymlï¼Œå¯ç”¨mathjaxã€‚è¿™é‡ŒæŒ‡å®šæŸäº›é¡µé¢å¯ç”¨mathjaxï¼Œè€Œä¸æ˜¯å…¨å±€ã€‚
# Math Formulas Render Supportmath:  per_page: true  mathjax:    enable: true    mhchem: false  katex:    enable: false    copy_tex: false

èƒŒæ™¯åŠ¨ç”»ç¼–è¾‘next/_config.ymlï¼Œå¯ç”¨èƒŒæ™¯åŠ¨ç”»
# Canvas-nestcanvas_nest:  enable: true  onmobile: true # Display on mobile or not  color: &quot;0,0,255&quot; # RGB values, use `,` to separate  opacity: 0.5 # The opacity of line: 0~1  zIndex: -1 # z-index property of the background  count: 99 # The number of lines

çƒŸç«åŠ¨ç”»1ã€åœ¨next/source/js/srcç›®å½•ä¸‹æ–°å»ºfireworks.jsæ–‡ä»¶
&quot;use strict&quot;;function updateCoords(e) &#123;    pointerX = (e.clientX || e.touches[0].clientX) - canvasEl.getBoundingClientRect().left,    pointerY = e.clientY || e.touches[0].clientY - canvasEl.getBoundingClientRect().top&#125;function setParticuleDirection(e) &#123;    var t = anime.random(0, 360) * Math.PI / 180,    a = anime.random(50, 180),    n = [ - 1, 1][anime.random(0, 1)] * a;    return &#123;        x: e.x + n * Math.cos(t),        y: e.y + n * Math.sin(t)    &#125;&#125;function createParticule(e, t) &#123;    var a = &#123;&#125;;    return a.x = e,    a.y = t,    a.color = colors[anime.random(0, colors.length - 1)],    a.radius = anime.random(16, 32),    a.endPos = setParticuleDirection(a),    a.draw = function() &#123;        ctx.beginPath(),        ctx.arc(a.x, a.y, a.radius, 0, 2 * Math.PI, !0),        ctx.fillStyle = a.color,        ctx.fill()    &#125;,    a&#125;function createCircle(e, t) &#123;    var a = &#123;&#125;;    return a.x = e,    a.y = t,    a.color = &quot;#F00&quot;,    a.radius = 0.1,    a.alpha = 0.5,    a.lineWidth = 6,    a.draw = function() &#123;        ctx.globalAlpha = a.alpha,        ctx.beginPath(),        ctx.arc(a.x, a.y, a.radius, 0, 2 * Math.PI, !0),        ctx.lineWidth = a.lineWidth,        ctx.strokeStyle = a.color,        ctx.stroke(),        ctx.globalAlpha = 1    &#125;,    a&#125;function renderParticule(e) &#123;    for (var t = 0; t &lt; e.animatables.length; t++) &#123;        e.animatables[t].target.draw()    &#125;&#125;function animateParticules(e, t) &#123;    for (var a = createCircle(e, t), n = [], i = 0; i &lt; numberOfParticules; i++) &#123;        n.push(createParticule(e, t))    &#125;    anime.timeline().add(&#123;        targets: n,        x: function(e) &#123;            return e.endPos.x        &#125;,        y: function(e) &#123;            return e.endPos.y        &#125;,        radius: 0.1,        duration: anime.random(1200, 1800),        easing: &quot;easeOutExpo&quot;,        update: renderParticule    &#125;).add(&#123;        targets: a,        radius: anime.random(80, 160),        lineWidth: 0,        alpha: &#123;            value: 0,            easing: &quot;linear&quot;,            duration: anime.random(600, 800)        &#125;,        duration: anime.random(1200, 1800),        easing: &quot;easeOutExpo&quot;,        update: renderParticule,        offset: 0    &#125;)&#125;function debounce(e, t) &#123;    var a;    return function() &#123;        var n = this,        i = arguments;        clearTimeout(a),        a = setTimeout(function() &#123;            e.apply(n, i)        &#125;,        t)    &#125;&#125;var canvasEl = document.querySelector(&quot;.fireworks&quot;);if (canvasEl) &#123;    var ctx = canvasEl.getContext(&quot;2d&quot;),    numberOfParticules = 30,    pointerX = 0,    pointerY = 0,    tap = &quot;mousedown&quot;,    colors = [&quot;#FF1461&quot;, &quot;#18FF92&quot;, &quot;#5A87FF&quot;, &quot;#FBF38C&quot;],    setCanvasSize = debounce(function() &#123;        canvasEl.width = 2 * window.innerWidth,        canvasEl.height = 2 * window.innerHeight,        canvasEl.style.width = window.innerWidth + &quot;px&quot;,        canvasEl.style.height = window.innerHeight + &quot;px&quot;,        canvasEl.getContext(&quot;2d&quot;).scale(2, 2)    &#125;,    500),    render = anime(&#123;        duration: 1 / 0,        update: function() &#123;            ctx.clearRect(0, 0, canvasEl.width, canvasEl.height)        &#125;    &#125;);    document.addEventListener(tap,    function(e) &#123;        &quot;sidebar&quot; !== e.target.id &amp;&amp; &quot;toggle-sidebar&quot; !== e.target.id &amp;&amp; &quot;A&quot; !== e.target.nodeName &amp;&amp; &quot;IMG&quot; !== e.target.nodeName &amp;&amp; (render.play(), updateCoords(e), animateParticules(pointerX, pointerY))    &#125;,    !1),    setCanvasSize(),    window.addEventListener(&quot;resize&quot;, setCanvasSize, !1)&#125;&quot;use strict&quot;;function updateCoords(e) &#123;    pointerX = (e.clientX || e.touches[0].clientX) - canvasEl.getBoundingClientRect().left,    pointerY = e.clientY || e.touches[0].clientY - canvasEl.getBoundingClientRect().top&#125;function setParticuleDirection(e) &#123;    var t = anime.random(0, 360) * Math.PI / 180,    a = anime.random(50, 180),    n = [ - 1, 1][anime.random(0, 1)] * a;    return &#123;        x: e.x + n * Math.cos(t),        y: e.y + n * Math.sin(t)    &#125;&#125;function createParticule(e, t) &#123;    var a = &#123;&#125;;    return a.x = e,    a.y = t,    a.color = colors[anime.random(0, colors.length - 1)],    a.radius = anime.random(16, 32),    a.endPos = setParticuleDirection(a),    a.draw = function() &#123;        ctx.beginPath(),        ctx.arc(a.x, a.y, a.radius, 0, 2 * Math.PI, !0),        ctx.fillStyle = a.color,        ctx.fill()    &#125;,    a&#125;function createCircle(e, t) &#123;    var a = &#123;&#125;;    return a.x = e,    a.y = t,    a.color = &quot;#F00&quot;,    a.radius = 0.1,    a.alpha = 0.5,    a.lineWidth = 6,    a.draw = function() &#123;        ctx.globalAlpha = a.alpha,        ctx.beginPath(),        ctx.arc(a.x, a.y, a.radius, 0, 2 * Math.PI, !0),        ctx.lineWidth = a.lineWidth,        ctx.strokeStyle = a.color,        ctx.stroke(),        ctx.globalAlpha = 1    &#125;,    a&#125;function renderParticule(e) &#123;    for (var t = 0; t &lt; e.animatables.length; t++) &#123;        e.animatables[t].target.draw()    &#125;&#125;function animateParticules(e, t) &#123;    for (var a = createCircle(e, t), n = [], i = 0; i &lt; numberOfParticules; i++) &#123;        n.push(createParticule(e, t))    &#125;    anime.timeline().add(&#123;        targets: n,        x: function(e) &#123;            return e.endPos.x        &#125;,        y: function(e) &#123;            return e.endPos.y        &#125;,        radius: 0.1,        duration: anime.random(1200, 1800),        easing: &quot;easeOutExpo&quot;,        update: renderParticule    &#125;).add(&#123;        targets: a,        radius: anime.random(80, 160),        lineWidth: 0,        alpha: &#123;            value: 0,            easing: &quot;linear&quot;,            duration: anime.random(600, 800)        &#125;,        duration: anime.random(1200, 1800),        easing: &quot;easeOutExpo&quot;,        update: renderParticule,        offset: 0    &#125;)&#125;function debounce(e, t) &#123;    var a;    return function() &#123;        var n = this,        i = arguments;        clearTimeout(a),        a = setTimeout(function() &#123;            e.apply(n, i)        &#125;,        t)    &#125;&#125;var canvasEl = document.querySelector(&quot;.fireworks&quot;);if (canvasEl) &#123;    var ctx = canvasEl.getContext(&quot;2d&quot;),    numberOfParticules = 30,    pointerX = 0,    pointerY = 0,    tap = &quot;mousedown&quot;,    colors = [&quot;#FF1461&quot;, &quot;#18FF92&quot;, &quot;#5A87FF&quot;, &quot;#FBF38C&quot;],    setCanvasSize = debounce(function() &#123;        canvasEl.width = 2 * window.innerWidth,        canvasEl.height = 2 * window.innerHeight,        canvasEl.style.width = window.innerWidth + &quot;px&quot;,        canvasEl.style.height = window.innerHeight + &quot;px&quot;,        canvasEl.getContext(&quot;2d&quot;).scale(2, 2)    &#125;,    500),    render = anime(&#123;        duration: 1 / 0,        update: function() &#123;            ctx.clearRect(0, 0, canvasEl.width, canvasEl.height)        &#125;    &#125;);    document.addEventListener(tap,    function(e) &#123;        &quot;sidebar&quot; !== e.target.id &amp;&amp; &quot;toggle-sidebar&quot; !== e.target.id &amp;&amp; &quot;A&quot; !== e.target.nodeName &amp;&amp; &quot;IMG&quot; !== e.target.nodeName &amp;&amp; (render.play(), updateCoords(e), animateParticules(pointerX, pointerY))    &#125;,    !1),    setCanvasSize(),    window.addEventListener(&quot;resize&quot;, setCanvasSize, !1)&#125;;

2ã€æ·»åŠ next/layout/_third-party/fireworks.swigï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&#123;% if theme.fireworks %&#125;   &lt;canvas class=&quot;fireworks&quot; style=&quot;position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;&quot; &gt;&lt;/canvas&gt;    &lt;script type=&quot;text/javascript&quot; src=&quot;//cdn.bootcss.com/animejs/2.2.0/anime.min.js&quot;&gt;&lt;/script&gt;    &lt;script type=&quot;text/javascript&quot; src=&quot;/js/src/fireworks.js&quot;&gt;&lt;/script&gt;&#123;% endif %&#125;

3ã€ç¼–è¾‘next/layout/_layout.swigï¼Œåœ¨&lt;/body&gt;ä¸Šé¢æ·»åŠ ï¼š
&#123;% include &#x27;_third-party/fireworks.swig&#x27; %&#125;

4ã€ç¼–è¾‘next/_config.ymlï¼Œæ·»åŠ å¹¶å¯ç”¨firework
# Fireworksfireworks: true

åè®°è‡³æ­¤ï¼Œå®Œæˆäº†Hexoä¸»é¢˜ä»Yiliaåˆ°Nextçš„æ›¿æ¢ã€‚è¿›è¡Œäº†ä¸€äº›ä¸ªæ€§åŒ–è®¾ç½®ï¼Œå¹¶ä¸”åº”ç”¨äº†Nextçš„å¾ˆå¤šæ–°ç‰¹æ€§ã€‚æ›´å¤šå…³äºNextä¸»é¢˜çš„å†…å®¹ï¼Œéœ€è¦æ—¶å†å»å­¦ä¹ ä½¿ç”¨ã€‚
ä¹¦ç­¾theme-next/hexo-theme-next
Next
iissnan/hexo-theme-next
IIssNanâ€™s Notes
Elegant Theme for Hexo
]]></content>
      <categories>
        <category>engineering</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨client-goåœ¨K8Sé›†ç¾¤å‘å¸ƒé¡¹ç›®</title>
    <url>/dev-k8s-client-go-deploy/</url>
    <content><![CDATA[é—®é¢˜ç®€è¿°æ€æ ·åœ¨K8Sé›†ç¾¤ä¸­å‘å¸ƒä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Ÿæ€æ ·åˆ¤æ–­ä¸€ä¸ªé¡¹ç›®æ˜¯å‘å¸ƒæˆåŠŸäº†è¿˜æ˜¯å¤±è´¥äº†ï¼Ÿæ€æ ·è®¿é—®ä¸€ä¸ªé¡¹ç›®ï¼Ÿæ€æ ·å®ç°ç°åº¦å‘å¸ƒï¼Ÿæ€æ ·å®ç°å‘å¸ƒè¿‡ç¨‹ä¸­çš„å¹¶å‘åº¦æ§åˆ¶ã€æš‚åœã€ç»§ç»­ã€å–æ¶ˆï¼Ÿæ€æ ·å®ç°å›æ»šï¼Ÿ
æœ¬æ–‡ä¸­ï¼Œä¼šåŠªåŠ›å¯»æ±‚è¿™äº›é—®é¢˜çš„ç­”æ¡ˆã€‚


å‡†å¤‡é•œåƒé¦–å…ˆå‡†å¤‡ä¸¤ä¸ªé•œåƒï¼Œåˆ†åˆ«æ˜¯nginx:v1.0å’Œnginx:v2.0ã€‚
1ã€å¯åŠ¨å¹¶è¿›å…¥å®¹å™¨
docker run --name nginx -d -p 80:80 voidking/nginx:latestdocker exec -it nginx /bin/bash

æœ‰äº›å°ä¼™ä¼´ä¼šæœ‰ç–‘é—®ï¼Œä¸ºä»€ä¹ˆä¸ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¯åŠ¨å¹¶è¿›å…¥å®¹å™¨ï¼Ÿåªéœ€è¦ä¸€æ¡å‘½ä»¤ã€‚docker run -it voidking/nginx:latest /bin/bashå¦‚æœä½¿ç”¨è¿™ç§æ–¹å¼è¿›å…¥å®¹å™¨ï¼Œä¿®æ”¹å†…å®¹åcommité•œåƒï¼Œé‚£ä¹ˆé•œåƒæ— æ³•æ­£å¸¸å¯åŠ¨ã€‚docker ps -a --no-truncä½¿ç”¨è¯¥å‘½ä»¤å¯ä»¥çœ‹åˆ°ï¼Œvoidking/nginx:latestçš„é»˜è®¤å¯åŠ¨å‘½ä»¤ä¸ºï¼šnginx -g &#39;daemon off;&#39;è€Œcommitåçš„é•œåƒï¼Œé»˜è®¤å¯åŠ¨å‘½ä»¤è¢«ä¿®æ”¹ä¸ºï¼š/bin/bashçœ‹åˆ°è¿™é‡Œå°±çŸ¥é“ï¼Œå› ä¸ºè‡ªå®šä¹‰çš„å¯åŠ¨å‘½ä»¤è¦†ç›–æ‰äº†åŸæœ‰çš„å¯åŠ¨å‘½ä»¤ï¼Œæ‰€ä»¥é•œåƒæ— æ³•æ­£å¸¸å¯åŠ¨ã€‚ä¸ºä»€ä¹ˆä¼šè¦†ç›–å‘¢ï¼Ÿå› ä¸ºCMDæŒ‡ä»¤å…è®¸ç”¨æˆ·æŒ‡å®šå®¹å™¨çš„é»˜è®¤çš„æ‰§è¡Œå‘½ä»¤ï¼Œæ­¤å‘½ä»¤ä¼šåœ¨å®¹å™¨å¯åŠ¨ä¸”docker runæ²¡æœ‰æŒ‡å®šå…¶ä»–å‘½ä»¤æ—¶è¿è¡Œã€‚å½“docker runæŒ‡å®šå…¶ä»–å‘½ä»¤æ—¶ï¼Œåˆ™ä¼šè¦†ç›–é»˜è®¤çš„æ‰§è¡Œå‘½ä»¤ã€‚æ›´å¤šå†…å®¹å‚è€ƒDockerfile RUNï¼ŒCMDï¼ŒENTRYPOINTå‘½ä»¤åŒºåˆ«ã€‚
2ã€ä¿®æ”¹index.html
cd /usr/share/nginx/htmlsed &#x27;s/nginx!/nginx!v1.0/&#x27; index.htmlsed -i &#x27;s/nginx!/nginx!v1.0/&#x27; index.htmlcat index.html

3ã€commit/pushé•œåƒ
docker ps -ldocker commit 6efcd878d0d1 voidking/nginx:v1.0docker logindocker push voidking/nginx:v1.0

kubectlåœ¨ä½¿ç”¨go-clientä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å­¦ä¹ ä¸€ä¸‹ä½¿ç”¨kubectlæ€æ ·å‘å¸ƒé¡¹ç›®ã€è·å–çŠ¶æ€ã€è®¿é—®é¡¹ç›®ã€æ›´æ–°é¡¹ç›®ã€‚
å‘å¸ƒé¡¹ç›®ä»¥å‘å¸ƒä¸€ä¸ªnginxé¡¹ç›®ä¸ºä¾‹ã€‚
1ã€å‡†å¤‡deployment yamlæ–‡ä»¶nginx.yaml
apiVersion: apps/v1kind: Deploymentmetadata:  name: nginxspec:  replicas: 1  selector:    matchLabels:      app: nginx  template:    metadata:      labels:        app: nginx    spec:      containers:      - name: nginx        image: voidking/nginx:v1.0        ports:        - containerPort: 80        imagePullPolicy: Always

2ã€å‘å¸ƒé¡¹ç›®kubectl apply -f nginx.yaml
è·å–çŠ¶æ€kubectl get deployments nginxkubectl get deployments nginx -o jsonkubectl get pods -l app=nginxkubectl get pods -l app=nginx -o jsonkubectl describe deployments nginxkubectl describe pods -l app=nginx
æ ¹æ®è·å–åˆ°çš„ä¿¡æ¯ï¼Œåˆ¤æ–­å‘å¸ƒæˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚
è®¿é—®é¡¹ç›®1ã€å‡†å¤‡service yamlæ–‡ä»¶nginx-svc.yaml
apiVersion: v1kind: Servicemetadata:  name: nginxspec:  ports:  - port: 80    protocol: TCP    targetPort: 80  selector:    app: nginx  sessionAffinity: None  type: NodePort  #type: LoadBalancer

2ã€æŸ¥çœ‹æœåŠ¡IPå’Œç«¯å£kubectl get svc nginx
3ã€è®¿é—®é¡¹ç›®minikube service nginxï¼Œè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ã€‚æˆ–è€…curl http://192.168.99.100:32329/
4ã€ä»å®¹å™¨å†…éƒ¨è®¿é—®é¡¹ç›®ï¼ˆä¸‰ç§æ–¹å¼ï¼‰
kubectl get podskubectl exec -it hello-node-6747d458b6-d757m /bin/bash# wget -O- 10.97.151.28curl 10.97.151.28curl nginx.defaultenv | grep NGINXcurl $NGINX_SERVICE_HOST:$NGINX_SERVICE_PORT

å¦‚æœenvå‘½ä»¤æ²¡æœ‰æ˜¾ç¤ºå‡ºnginx serviceä¿¡æ¯ï¼Œé‚£ä¹ˆå¯ä»¥é‡å»ºpodï¼š
kubectl get pod hello-node-6747d458b6-d757m -n default -o yaml | kubectl replace --force -f -

PSï¼šä½¿ç”¨kubectlè¿›å…¥å®¹å™¨çš„æ–¹æ³•
kubectl get podskubectl exec -it pod-name /bin/bashkubectl exec -it pod-name -c container-name /bin/bash

æ›´æ–°å‘å¸ƒ1ã€ä¿®æ”¹nginx.yamlä¸­çš„é…ç½®ï¼Œå‡çº§é•œåƒä¸ºvoidking/nginx:2.0
apiVersion: apps/v1kind: Deploymentmetadata:  name: nginxspec:  replicas: 1  selector:    matchLabels:      app: nginx  template:    metadata:      labels:        app: nginx    spec:      containers:      - name: nginx        image: voidking/nginx:v2.0        ports:        - containerPort: 80        imagePullPolicy: Always

2ã€æ›´æ–°å‘å¸ƒkubectl apply -f nginx.yaml
3ã€è®¿é—®é¡¹ç›®curl http://192.168.99.100:32329/
client-goã€Šä½¿ç”¨client-goæ“ä½œK8Sã€‹ä¸€æ–‡ä¸­ï¼Œé…ç½®å¥½äº†k8s-client-goé¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªé¡¹ç›®å¯¹k8sé›†ç¾¤è¿›è¡Œä¸€äº›åŸºæœ¬æ“ä½œã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæœ¬èŠ‚ä¼šå®ç°ä¸€äº›æ›´é«˜é˜¶çš„æ“ä½œã€‚
åˆ¤æ–­å‘å¸ƒçŠ¶æ€æ ¹æ®deploymentå’Œpodçš„çŠ¶æ€ï¼Œæ€æ ·åˆ¤æ–­ä¸€æ¬¡å‘å¸ƒæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Ÿé¦–å…ˆï¼Œè¦çŸ¥é“deploymentå’Œpodéƒ½æœ‰å“ªäº›çŠ¶æ€ã€‚
1ã€é€šè¿‡kubectlå‘½ä»¤è·å–å‘å¸ƒæ•°æ®
kubectl get deployments hello-node -o jsonkubectl get deployments nginx -o jsonkubectl get pods -l app=hello-node -o jsonkubectl get pods -l app=nginx -o json

2ã€è·å–åˆ°çš„å‘å¸ƒæ•°æ®å‘å¸ƒæˆåŠŸçš„jsonæ•°æ®ï¼šhello-node.jsonå‘å¸ƒå¤±è´¥çš„jsonæ•°æ®ï¼šnginx.json
3ã€å…·ä½“å¯ç”¨çŠ¶æ€æœ‰å“ªäº›
# deploymentéƒ¨åˆ†deployment.generationdeployment.spec.replicasdeployment.status.observedGenerationdeployment.status.replicasdeployment.status.readyReplicas/unavailableReplicasdeployment.status.updatedReplicasdeployment.status.conditions[*].type&#123;Available,Progressing&#125; &amp;&amp; deployment.status.conditions[*].status&#123;True,False&#125;# podéƒ¨åˆ†pod.status.phase&#123;Pending,Running&#125;pod.status.conditions[*].type&#123;Initialized,Ready,ContainersReady,PodScheduled&#125; &amp;&amp; pod.status.conditions[*].status&#123;True,False&#125;pod.status.containerStatuses[*].state.&#123;waiting,running&#125;

4ã€åˆ¤æ–­æ¡ä»¶ç»„åˆå‚è€ƒk8s-client-go/common/deployment.goæ–‡ä»¶çš„GetDeploymentStatuså‡½æ•°ã€‚
ç°åº¦å‘å¸ƒå¸¸è§çš„å‘å¸ƒæ–¹æ¡ˆåŒ…æ‹¬è“ç»¿å‘å¸ƒã€æ»šåŠ¨å‘å¸ƒå’Œç°åº¦å‘å¸ƒï¼ˆé‡‘ä¸é›€å‘å¸ƒï¼‰ï¼Œæ›´å¤šå†…å®¹å‚è€ƒå¾®æœåŠ¡éƒ¨ç½²ï¼šè“ç»¿éƒ¨ç½²ã€æ»šåŠ¨éƒ¨ç½²ã€ç°åº¦å‘å¸ƒã€é‡‘ä¸é›€å‘å¸ƒã€‚å‚è€ƒSpinnakerç¬¬å››èŠ‚-å¯¹æ¥k8sã€åŸºäº Spinnaker çš„ K8S ç°åº¦å‘å¸ƒã€ç°åº¦å‘å¸ƒ/è“ç»¿å‘å¸ƒï¼Œä½¿ç”¨Ingressï¼Œå¯ä»¥å¾ˆå¥½åœ°å®ç°ç°åº¦å‘å¸ƒã€‚ä½†æ˜¯ï¼Œåœ¨æ²¡æœ‰Ingressçš„æƒ…å†µä¸‹ï¼Œè¯¥æ€æ ·å®ç°ç°åº¦å‘å¸ƒï¼Ÿ
æœ€ç®€å•çš„æ–¹æ¡ˆæ˜¯å‘å¸ƒä¸€ä¸ªæ–°çš„deploymentï¼ŒæŠŠserviceçš„æµé‡åˆ†æµåˆ°æ–°çš„deploymentï¼Œæµ‹è¯•é€šè¿‡ååˆ é™¤è€çš„deploymentï¼Œæµé‡å°±å…¨éƒ¨åˆ°äº†æ–°çš„deploymentã€‚å…·ä½“å®ç°å‚è€ƒk8s-client-go/common/deploy.goæ–‡ä»¶çš„GrayDeployå’ŒUpdateDeployå‡½æ•°ã€‚
ä½†æ˜¯ï¼Œå¦‚æœåªå…è®¸ç»´æŠ¤ä¸€ä¸ªdeploymentï¼Œè¯¥æ€ä¹ˆå¤„ç†ï¼Ÿåˆ›å»ºç°åº¦çš„deploymentï¼Œæµ‹è¯•é€šè¿‡ååˆ é™¤ç°åº¦çš„deploymentï¼Œç„¶åæ­£å¸¸æ›´æ–°åŸæœ‰çš„deploymentã€‚å…·ä½“å®ç°å‚è€ƒk8s-client-go/common/deploy.goæ–‡ä»¶çš„GrayDeploy2å’ŒUpdateDeploy2å‡½æ•°ã€‚
åè®°å¹¶å‘åº¦æ§åˆ¶ã€æš‚åœã€ç»§ç»­ã€å–æ¶ˆã€å›æ»šç­‰ç­‰åŠŸèƒ½ï¼Œæœªå®Œå¾…ç»­ã€‚ã€‚ã€‚
ä¹¦ç­¾Pod çš„ç”Ÿå‘½å‘¨æœŸ
ç®¡ç†èµ„æº
Service
10 Most Common Reasons Kubernetes Deployments Fail (Part 1)
10 Most Common Reasons Kubernetes Deployments Fail (Part 2)
]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>golang</tag>
        <tag>docker</tag>
        <tag>client-go</tag>
        <tag>kubectl</tag>
      </tags>
  </entry>
  <entry>
    <title>GolangåŒ…ç®¡ç†å·¥å…·</title>
    <url>/dev-golang-gpm/</url>
    <content><![CDATA[åŒ…ç®¡ç†å·¥å…·ç®€ä»‹å¤§ä¸€ç‚¹çš„é¡¹ç›®ï¼Œé€šå¸¸ä¼šä¾èµ–å¾ˆå¤šç¬¬ä¸‰æ–¹åŒ…ã€‚GolangæŠŠæ‰€æœ‰çš„ç¬¬ä¸‰æ–¹åŒ…éƒ½æ”¾åœ¨GOPATH/srcç›®å½•ä¸‹ï¼Œä¸”æ¯ä¸ªåŒ…ä»…ä¿ç•™ä¸€ä¸ªç‰ˆæœ¬ã€‚å¦‚æœä¸¤ä¸ªé¡¹ç›®ä¾èµ–ä¸åŒç‰ˆæœ¬çš„ç¬¬ä¸‰æ–¹åŒ…ï¼Œå°±ä¼šäº§ç”Ÿé—®é¢˜ã€‚
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œgoåœ¨1.5ç‰ˆæœ¬å¼•å…¥äº†vendorå±æ€§ï¼ˆé»˜è®¤å…³é—­ï¼‰ï¼Œå¹¶åœ¨1.6ç‰ˆæœ¬ä¸­é»˜è®¤å¼€å¯äº†vendorå±æ€§ã€‚ç®€å•æ¥è¯´ï¼Œvendorå±æ€§å°±æ˜¯è®©goç¼–è¯‘æ—¶ï¼Œä¼˜å…ˆä»é¡¹ç›®æºç æ ‘æ ¹ç›®å½•ä¸‹çš„vendorç›®å½•æŸ¥æ‰¾ä»£ç ï¼ˆå¯ä»¥ç†è§£ä¸ºåˆ‡äº†ä¸€æ¬¡GOPATHï¼‰ï¼Œå¦‚æœvendorä¸­æœ‰ï¼Œåˆ™ä¸å†å»GOPATHä¸­å»æŸ¥æ‰¾ã€‚
ä½†æ˜¯vendorç›®å½•åˆå¸¦æ¥äº†æ–°çš„é—®é¢˜ï¼šï¼ˆ1ï¼‰vendorç›®å½•ä¸­ä¾èµ–åŒ…æ²¡æœ‰ç‰ˆæœ¬ä¿¡æ¯ã€‚è¿™æ ·ä¾èµ–åŒ…è„±ç¦»äº†ç‰ˆæœ¬ç®¡ç†ï¼Œå¯¹äºå‡çº§ã€é—®é¢˜è¿½æº¯ï¼Œä¼šæœ‰ç‚¹å›°éš¾ã€‚ï¼ˆ2ï¼‰å¦‚ä½•æ–¹ä¾¿çš„å¾—åˆ°æœ¬é¡¹ç›®ä¾èµ–äº†å“ªäº›åŒ…ï¼Œå¹¶æ–¹ä¾¿çš„å°†å…¶æ‹·è´åˆ°vendorç›®å½•ä¸‹ï¼Ÿ
ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œå¼€å‘è€…åœ¨vendoråŸºç¡€ä¸Šå¼€å‘äº†å¤šä¸ªç®¡ç†å·¥å…·ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æœ‰godepã€govendorã€glideï¼Œä»¥åŠå®˜æ–¹çš„depå’Œgomodã€‚ä¸‹é¢æ¥å­¦ä¹ ä¸€ä¸‹godepã€govendorå’Œgomodï¼Œæ›´å¤šå†…å®¹å‚è€ƒgoä¾èµ–åŒ…ç®¡ç†å·¥å…·å¯¹æ¯”ã€golangåŒ…ç®¡ç†è§£å†³ä¹‹é“â€”â€”go modulesåˆæ¢ã€å†æ¢go modulesï¼šä½¿ç”¨ä¸ç»†èŠ‚ã€‚


ç†è®ºç¯‡godepgodepçš„ä½¿ç”¨è€…ä¼—å¤šï¼Œå¦‚dockerã€kubernetesã€coreosç­‰goé¡¹ç›®å¾ˆå¤šéƒ½æ˜¯ä½¿ç”¨godepæ¥ç®¡ç†å…¶ä¾èµ–ï¼Œå½“ç„¶åŸå› å¯èƒ½æ˜¯æ—©æœŸä¹Ÿæ²¡çš„å·¥å…·å¯é€‰ã€‚
godepæ—©æœŸç‰ˆæœ¬å¹¶ä¸ä¾èµ–vendorï¼Œæ‰€ä»¥å¯¹goçš„ç‰ˆæœ¬è¦æ±‚å¾ˆæ¾ï¼Œgo 1.5ä¹‹å‰çš„ç‰ˆæœ¬ä¹Ÿå¯ä»¥ç”¨ï¼Œåªæ˜¯è¡Œä¸ºä¸Šæœ‰æ‰€ä¸åŒã€‚åœ¨vendoræ¨å‡ºä»¥åï¼Œgodepä¹Ÿæ”¹ä¸ºä½¿ç”¨vendoräº†ã€‚
godepä½¿ç”¨å¾ˆç®€å•ï¼Œå½“é¡¹ç›®ç¼–å†™å®Œæˆï¼Œä½¿ç”¨GOPATHçš„ä¾èµ–åŒ…æµ‹è¯•æ²¡é—®é¢˜çš„æ—¶å€™ï¼Œæ‰§è¡Œgodep saveï¼Œè¯¥å‘½ä»¤ä¼šåšä¸¤ä»¶äº‹ï¼šï¼ˆ1ï¼‰æ‰«æé¡¹ç›®çš„ä»£ç ï¼Œå°†é¡¹ç›®ä¾èµ–çš„åŒ…åŠè¯¥åŒ…çš„ç‰ˆæœ¬å·ï¼ˆå³git commitï¼‰è®°å½•åˆ°Godeps/Godeps.jsonæ–‡ä»¶ä¸­ã€‚ï¼ˆ2ï¼‰å°†ä¾èµ–çš„åŒ…ä»GOPATH/srcä¸­æ‹·è´åˆ°vendorç›®å½•ï¼ˆå¿½ç•¥ä¾èµ–åŒ…çš„.gitç›®å½•ï¼‰ã€‚å¯¹äºä¸æ”¯æŒvendorçš„æ—©æœŸç‰ˆæœ¬ï¼Œåˆ™ä¼šæ‹·è´åˆ°Godeps/_workspace/é‡Œã€‚
å…¶ä»–å‘½ä»¤ï¼š
# å®‰è£…go get -u -v github.com/tools/godep# å®‰è£…æ–°çš„åŒ…go get github.com/voidking/k8s-client-goimport &quot;github.com/voidking/k8s-client-go&quot;godep save# æ›´æ–°ä¾èµ–åŒ…go get -u github.com/voidking/k8s-client-gogodep update github.com/voidking/k8s-client-go# orgodep update github.com/voidking/...# ä¸‹è½½godeps.jsoné‡Œçš„åŒ…åˆ°GOPATH/srcgodep restore

govendorgovendoræ˜¯åœ¨vendorä¹‹åå‡ºç°çš„ï¼ŒåŠŸèƒ½ç›¸å¯¹godepå¤šä¸€ç‚¹ï¼Œä¸è¿‡å°±æ ¸å¿ƒé—®é¢˜çš„è§£å†³æ¥è¯´åŸºæœ¬æ˜¯ä¸€æ ·çš„ã€‚govendorç”Ÿæˆvendorç›®å½•çš„æ—¶å€™éœ€è¦2æ¡å‘½ä»¤ï¼šgovendor initç”Ÿæˆvendor/vendor.jsonï¼Œæ­¤æ—¶æ–‡ä»¶ä¸­åªæœ‰æœ¬é¡¹ç›®çš„ä¿¡æ¯ã€‚govendor add +externalæ›´æ–°vendor/vendor.jsonï¼Œå¹¶æ‹·è´GOPATHä¸‹çš„ç¬¬ä¸‰æ–¹åŒ…åˆ°vendorç›®å½•ä¸­ã€‚
å…¶ä»–å‘½ä»¤ï¼š
# å®‰è£…go get -u github.com/kardianos/govendor# è·å–æŒ‡å®šç‰ˆæœ¬çš„åŒ…govendor fetch golang.org/x/net/context@v1# æŸ¥çœ‹ä¾èµ–çš„åŒ…govendor list# æŸ¥çœ‹å“ªäº›åŒ…ä½¿ç”¨äº†fmtgovendor list -v fmt

gomodgo moduleséšç€golang1.11çš„å‘å¸ƒå’Œæˆ‘ä»¬è§é¢äº†ï¼Œè¿™æ˜¯å®˜æ–¹æå€¡çš„æ–°çš„åŒ…ç®¡ç†ï¼Œä¹ƒè‡³é¡¹ç›®ç®¡ç†æœºåˆ¶ï¼Œå¯ä»¥ä¸å†éœ€è¦GOPATHçš„å­˜åœ¨ã€‚
ç°åœ¨modulesæœºåˆ¶ä»åœ¨æ—©æœŸé˜¶æ®µï¼Œæ‰€ä»¥golangæä¾›äº†ä¸€ä¸ªç¯å¢ƒå˜é‡â€œGO111MODULEâ€ï¼Œé»˜è®¤å€¼ä¸ºautoï¼Œå¦‚æœå½“å‰ç›®å½•é‡Œæœ‰go.modæ–‡ä»¶ï¼Œå°±ä½¿ç”¨go modulesï¼Œå¦åˆ™ä½¿ç”¨æ—§çš„GOPATHå’Œvendoræœºåˆ¶ï¼Œå› ä¸ºåœ¨modulesæœºåˆ¶ä¸‹go getåªä¼šä¸‹è½½go modulesï¼Œè¿™ä¸€è¡Œä¸ºä¼šåœ¨ä»¥åç‰ˆæœ¬ä¸­æˆä¸ºé»˜è®¤å€¼ï¼Œè¿™é‡Œæˆ‘ä»¬ä¿æŒautoå³å¯ï¼Œå¦‚æœä½ æƒ³ç›´æ¥ä½¿ç”¨modulesè€Œä¸éœ€è¦ä»GOPATHè¿‡åº¦ï¼Œé‚£ä¹ˆæŠŠâ€œGO111MODULEâ€è®¾ç½®ä¸ºonã€‚
moduleså’Œä¼ ç»Ÿçš„GOPATHä¸åŒï¼Œä¸éœ€è¦åŒ…å«ä¾‹å¦‚srcï¼Œbinè¿™æ ·çš„å­ç›®å½•ï¼Œä¸€ä¸ªæºä»£ç ç›®å½•ç”šè‡³æ˜¯ç©ºç›®å½•éƒ½å¯ä»¥ä½œä¸ºmoduleï¼Œåªè¦å…¶ä¸­åŒ…å«æœ‰go.modæ–‡ä»¶ã€‚
1ã€å¯ç”¨modulesæœºåˆ¶
# linux and macexport GO111MODULE=on# windows powershell$env:GO111MODULE = &quot;on&quot;

2ã€åˆå§‹åŒ–testé¡¹ç›®ä¸ºmodulego mod init teståˆå§‹åŒ–ä¹‹åï¼Œç›®å½•ä¸‹ä¼šè‡ªåŠ¨ç”Ÿæˆgo.modæ–‡ä»¶ã€‚å½“æˆ‘ä»¬ä½¿ç”¨go buildï¼Œgo testä»¥åŠgo listæ—¶ï¼Œgoä¼šè‡ªåŠ¨å¾—æ›´æ–°go.modæ–‡ä»¶ï¼Œå°†ä¾èµ–å…³ç³»å†™å…¥å…¶ä¸­ã€‚
3ã€æ•´ç†ä¾èµ–go mod tidy -v

è¿™æ¡å‘½ä»¤ä¼šè‡ªåŠ¨ä¸‹è½½ä¾èµ–çš„moduleåˆ°cacheï¼Œæ¸…é™¤æ— ç”¨çš„moduleã€‚
ç”Ÿæˆgo.modçš„requireéƒ¨åˆ†ï¼Œå’Œgo.sumæ–‡ä»¶ã€‚go.sumæ˜¯ä¸€ä¸ªæ„å»ºçŠ¶æ€è·Ÿè¸ªæ–‡ä»¶ï¼Œå®ƒä¼šè®°å½•å½“å‰moduleæ‰€æœ‰çš„é¡¶å±‚å’Œé—´æ¥ä¾èµ–ï¼Œgo modulesæ ¹æ®è¿™äº›è®°å½•å»å¯»æ‰¾å¯¹åº”çš„ä¾èµ–ã€‚
ä¾èµ–çš„moduleä¸‹è½½åˆ°GOPATH/pkg/cache/å’ŒGOPATH/pkg/mod/ç›®å½•ä¸‹ã€‚

4ã€Golandå¯ç”¨gomodFileï¼ŒSettingsï¼ŒGoï¼ŒGo Modulesï¼Œå‹¾é€‰Enable Go Modules(vgo) integrationï¼ŒApplyã€‚
å…¶ä»–å‘½ä»¤ï¼š
# å¸®åŠ©go help mod# å·²æœ‰go.modï¼Œä¸‹è½½ä¾èµ–åˆ°cachego mod download# æ‹·è´ä¾èµ–åˆ°vendorï¼ˆæ²¡æœ‰åˆ™å…ˆä¸‹è½½ï¼‰go mod vendor# æ¸…ç©ºcachego clean -modcache

gomodå®è·µç¯‡å®‰è£…client-goå‡è®¾ä¸€ä¸ªé¡¹ç›®ä¾èµ–client-goï¼Œé‚£ä¹ˆå‚è€ƒå®˜æ–¹è¯´æ˜è¿›è¡Œå®‰è£…ã€‚
1ã€æŸ¥çœ‹k8sç‰ˆæœ¬kubectl versionClient Versionè¡¨ç¤ºkubectlçš„ç‰ˆæœ¬ï¼ŒServer Versionè¡¨ç¤ºapiserverçš„ç‰ˆæœ¬ï¼ˆå‡è®¾ç‰ˆæœ¬ä¸ºv1.15.0ï¼‰ã€‚
2ã€æŸ¥æ‰¾å¯¹åº”ç‰ˆæœ¬çš„client-goåœ¨kubernetes/client-goä¸ŠæŸ¥æ‰¾k8s v1.15.0å¯¹åº”çš„client-goç‰ˆæœ¬ï¼Œæ‰¾åˆ°ç‰ˆæœ¬ä¸º12.0
3ã€å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„client-gogo get k8s.io/client-go/12.0/kubernetesè¿™é‡Œæœ‰ä¸ªå‘ï¼Œå›½å†…æ— æ³•è®¿é—®k8s.ioï¼Œéœ€è¦ç§‘å­¦ä¸Šç½‘ï¼ˆæ°å¥½æˆ‘çš„æ¬ç“¦å·¥æœåŠ¡å™¨ä¹Ÿè®¿é—®ä¸åˆ°k8s.ioï¼‰ã€‚å› æ­¤ï¼Œè¿™é‡Œä½¿ç”¨GOPROXYçš„æ–¹å¼æ¥è§£å†³ï¼Œå‚è€ƒä¸€é”®è§£å†³ go get golang.org/x åŒ…å¤±è´¥ã€‚
# export GOPROXY=https://goproxy.cnexport GOPROXY=https://goproxy.ioexport GO111MODULE=ongo get k8s.io/client-go/12.0/kubernetes


å¤±è´¥äº†ï¼Œè¿”å›404ï¼ŒçŒœæµ‹æ˜¯12.0ç‰ˆæœ¬åœ¨ä»£ç†æœåŠ¡å™¨ä¸å­˜åœ¨ï¼Œä½¿ç”¨å¦å¤–ä¸€ç§ä¸‹è½½æ–¹å¼ã€‚
go get k8s.io/client-go@kubernetes-1.15.0
æ­¤å¤„ä¸‹è½½äº†ä¸¤ä¸ªç‰ˆæœ¬çš„client-goï¼Œæˆ‘ä»¬ä½¿ç”¨v0.0.0ç‰ˆæœ¬ã€‚
4ã€å®‰è£…client-goç›¸å…³ä¾èµ–client-goé»˜è®¤ä¸‹è½½åˆ°$GOPATH/pkg/mod/k8s.ioç›®å½•ä¸‹ï¼ŒæŠŠk8s.ioç›®å½•ç§»åŠ¨åˆ°$GOPATH/srcç›®å½•ä¸‹ã€‚ç„¶åæŠŠ&#x63;&#108;&#x69;&#101;&#110;&#x74;&#45;&#x67;&#x6f;&#64;&#x76;&#x30;&#x2e;&#x30;&#x2e;&#48;é‡å‘½åä¸ºclient-goï¼Œç„¶ååœ¨client-goç›®å½•ä¸‹æ‰§è¡Œå®‰è£…ä¾èµ–çš„å‘½ä»¤ï¼š
export GOPROXY=https://goproxy.ioexport GO111MODULE=ongo mod vendor
å®Œæˆä¹‹åï¼Œæ‰€æœ‰çš„ä¾èµ–éƒ½ä¸‹è½½åˆ°äº†client-go/vendorç›®å½•ä¸‹ï¼Œä¸€ä¸ªå®Œæ•´çš„client-goä¾èµ–åº“å°±å‡†å¤‡å¥½äº†ã€‚
ä¾èµ–åº“ç‰ˆæœ¬ç®¡ç†client-goä¾èµ–åº“å‡†å¤‡å¥½äº†ï¼Œä½†æ˜¯å¦ä¸€ä¸ªé—®é¢˜æ¥äº†ï¼šå‡è®¾é¡¹ç›®vk-projectä¾èµ–client-goå’Œåº“Aï¼Œclient-goä¾èµ–åº“Aï¼Œä¸¤ä¸ªä¾èµ–åº“Aç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆvk-projectåœ¨ç¼–è¯‘æ—¶ï¼Œä¼šåŒæ—¶ä¾èµ–ä¸¤ä¸ªä¸åŒçš„åº“Aï¼Œå¯¼è‡´ç¼–è¯‘å‡ºçš„äºŒè¿›åˆ¶åŒ…æœ‰é—®é¢˜ã€‚
æ­¤æ—¶ï¼Œä¸€ä¸ªç®€å•çš„åŠæ³•æ˜¯æŠŠGOPATH/src/k8s.io/client-go/vendorç›®å½•å‰ªåˆ‡è¦†ç›–vk-project/vendorç›®å½•ï¼Œç„¶åæŠŠGOPATH/src/k8s.io/client-goç›®å½•ç§»åŠ¨åˆ°vk-project/vendor/k8s.io/ç›®å½•ä¸‹ã€‚è¿™ä¹ˆåšçš„è¯ï¼Œclient-goå°±å’Œè‡ªå·±çš„ä¾èµ–æ˜¯å¹³çº§çš„å­˜åœ¨äº†ã€‚
ä½†æ˜¯ï¼Œè¿™ä¹ˆåšæœ‰å¦ä¸€ä¸ªé—®é¢˜ï¼šä¾èµ–åº“ç‰ˆæœ¬æ²¡æœ‰è®°å½•ã€‚å› ä¸ºæ²¡æœ‰ç‰ˆæœ¬è®°å½•ï¼Œé‚£ä¹ˆåœ¨ä¸Šä¼ vk-projecté¡¹ç›®æ—¶ï¼Œå°±è¦æŠŠä¾èµ–å…¨éƒ¨ä¸Šä¼ ï¼Œå¦åˆ™åˆ«äººä¸‹è½½äº†vk-projectä¹Ÿæ²¡åŠæ³•æ­£ç¡®å®‰è£…ä¾èµ–ã€‚
è¿™é‡Œï¼Œä½¿ç”¨gomodè¿›è¡Œä¾èµ–åº“ç‰ˆæœ¬ç®¡ç†ã€‚
go mod init vk-projectgo mod tidy -vgo mod vendor

ä¸Šä¼ ä»£ç æ—¶å¿½ç•¥vendorç›®å½•ï¼Œåœ¨gitignoreä¸­æ·»åŠ ï¼š
/vendor/

å®‰è£…ä¾èµ–1ã€ä¸‹è½½é¡¹ç›®åï¼Œè¿›å…¥é¡¹ç›®ç›®å½•cd vk-project
2ã€ä¸‹è½½ä¾èµ–go mod download
3ã€æ‹·è´ä¾èµ–åˆ°vendorï¼ˆå¯é€‰ï¼‰go mod vendor
]]></content>
      <categories>
        <category>engineering</category>
        <category>golang</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>golang</tag>
        <tag>client-go</tag>
        <tag>godep</tag>
        <tag>govendor</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨client-goæ“ä½œK8S</title>
    <url>/dev-k8s-client-go/</url>
    <content><![CDATA[client-goç®€ä»‹ç›´è§‚ä¸Šçœ‹ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨kubectlã€å®¢æˆ·ç«¯åº“æˆ–è€…RESTè¯·æ±‚æ¥è®¿é—®K8S APIã€‚è€Œå®é™…ä¸Šï¼Œæ— è®ºæ˜¯kubectlè¿˜æ˜¯å®¢æˆ·ç«¯åº“ï¼Œéƒ½æ˜¯å°è£…äº†RESTè¯·æ±‚çš„å·¥å…·ã€‚client-goä½œä¸ºä¸€ä¸ªå®¢æˆ·ç«¯åº“ï¼Œèƒ½å¤Ÿè°ƒç”¨K8S APIï¼Œå®ç°å¯¹K8Sé›†ç¾¤ä¸­èµ„æºå¯¹è±¡ï¼ˆåŒ…æ‹¬deploymentã€serviceã€ingressã€replicaSetã€podã€namespaceã€nodeç­‰ï¼‰çš„å¢åˆ æ”¹æŸ¥ç­‰æ“ä½œã€‚æºç åœ°å€ï¼škubernetes/client-goæ¥å£æ–‡æ¡£ï¼škubernetes - GoDoc


é€šè¿‡RESTè®¿é—®K8Sã€ŠK8Så…¥é—¨ç¯‡ã€‹ä¸€æ–‡ä¸­ä½¿ç”¨kubectlå¯¹minikubeè¿›è¡Œç®¡ç†ï¼Œæœ¬èŠ‚ä¸­ç›´æ¥ä½¿ç”¨RESTè¯·æ±‚æ¥å¯¹minikubeè¿›è¡Œç®¡ç†ã€‚å‚è€ƒAccess Clusters Using the Kubernetes APIï¼Œæ¥æµ‹è¯•ä¸€ä¸‹ã€‚
kubectlå¤„ç†APIæœåŠ¡å™¨çš„å®šä½å’Œèº«ä»½éªŒè¯ã€‚å¦‚æœè¦ä½¿ç”¨curlæˆ–wgetç­‰httpå®¢æˆ·ç«¯æˆ–æµè§ˆå™¨ç›´æ¥è®¿é—®REST APIï¼Œå¯ä»¥é€šè¿‡å¤šç§æ–¹å¼æŸ¥æ‰¾å’ŒéªŒè¯APIæœåŠ¡å™¨ï¼šï¼ˆ1ï¼‰åœ¨ä»£ç†æ¨¡å¼ä¸‹è¿è¡Œkubectlï¼ˆæ¨èï¼‰ã€‚å»ºè®®ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œå› ä¸ºå®ƒä½¿ç”¨å­˜å‚¨çš„apiserverä½ç½®å¹¶ä½¿ç”¨è‡ªç­¾åè¯ä¹¦éªŒè¯APIæœåŠ¡å™¨çš„æ ‡è¯†ã€‚ä½¿ç”¨æ­¤æ–¹æ³•æ— æ³•è¿›è¡Œä¸­é—´äººï¼ˆMITMï¼‰æ”»å‡»ã€‚ï¼ˆ2ï¼‰ç›´æ¥å‘httpå®¢æˆ·ç«¯æä¾›ä½ç½®å’Œå‡­æ®ã€‚è¿™é€‚ç”¨äºè¢«ä»£ç†æ··æ·†çš„å®¢æˆ·ç«¯ä»£ç ã€‚ä¸ºäº†é˜²æ­¢ä¸­é—´äººæ”»å‡»ï¼Œéœ€è¦å°†æ ¹è¯ä¹¦å¯¼å…¥æµè§ˆå™¨ã€‚ä½¿ç”¨Goæˆ–Pythonå®¢æˆ·ç«¯åº“å¯ä»¥åœ¨ä»£ç†æ¨¡å¼ä¸‹è®¿é—®kubectlã€‚
å¯åŠ¨minikubeï¼ŒæŸ¥çœ‹é›†ç¾¤é…ç½®
minikube startkubectl config view

æŸ¥çœ‹kubectlè®¿é—®äº†ä»€ä¹ˆurlï¼Œè·å¾—äº†ä»€ä¹ˆä¿¡æ¯ã€‚
kubectl get nodes -v=8kubectl get nodes -v=9

kubectlä»£ç†æ¨¡å¼å……å½“åå‘ä»£ç†æ¨¡å¼ä¸‹è¿è¡Œkubectlï¼Œå®ƒå¤„ç†å®šä½APIæœåŠ¡å™¨å’Œè¿›è¡Œèº«ä»½éªŒè¯ã€‚
kubectl proxy --port=8080 &amp;curl http://localhost:8080/api/
æ­¤æ—¶ä½¿ç”¨æµè§ˆå™¨è¿›è¡Œè®¿é—®ï¼ŒåŒæ ·å¯ä»¥æ‹¿åˆ°æ•°æ®ã€‚
grep/cutæ–¹æ³•# Check all possible clusters, as you .KUBECONFIG may have multiple contexts:kubectl config view -o jsonpath=&#x27;&#123;&quot;Cluster name\tServer\n&quot;&#125;&#123;range .clusters[*]&#125;&#123;.name&#125;&#123;&quot;\t&quot;&#125;&#123;.cluster.server&#125;&#123;&quot;\n&quot;&#125;&#123;end&#125;&#x27;# Select name of cluster you want to interact with from above output:# export CLUSTER_NAME=&quot;some_server_name&quot;export CLUSTER_NAME=&quot;minikube&quot;# Point to the API server refering the cluster nameAPISERVER=$(kubectl config view -o jsonpath=&quot;&#123;.clusters[?(@.name==\&quot;$CLUSTER_NAME\&quot;)].cluster.server&#125;&quot;)# Gets the token valueTOKEN=$(kubectl get secrets -o jsonpath=&quot;&#123;.items[?(@.metadata.annotations[&#x27;kubernetes\.io/service-account\.name&#x27;]==&#x27;default&#x27;)].data.token&#125;&quot;|base64 -d)# Explore the API with TOKENcurl -X GET $APISERVER/api --header &quot;Authorization: Bearer $TOKEN&quot; --insecure


jsonpathæ–¹æ³•APISERVER=$(kubectl config view --minify -o jsonpath=&#x27;&#123;.clusters[0].cluster.server&#125;&#x27;)TOKEN=$(kubectl get secret $(kubectl get serviceaccount default -o jsonpath=&#x27;&#123;.secrets[0].name&#125;&#x27;) -o jsonpath=&#x27;&#123;.data.token&#125;&#x27; | base64 --decode )curl $APISERVER/api --header &quot;Authorization: Bearer $TOKEN&quot; --insecure


client-goæ“ä½œK8Sclient-goå®é™…ä¸Šæ˜¯å°è£…äº†RESTè¯·æ±‚çš„å®¢æˆ·ç«¯åº“ï¼Œèƒ½å¤Ÿç®€åŒ–æˆ‘ä»¬çš„å·¥ä½œã€‚
å‚è€ƒk8s-client-goé¡¹ç›®ï¼Œå¯¹k8sè¿›è¡Œä¸€äº›åŸºæœ¬æ“ä½œï¼ŒåŒ…æ‹¬è¿æ¥k8sï¼Œåˆ›å»ºæ›´æ–°deploymentï¼ŒæŸ¥çœ‹deploymentçŠ¶æ€ï¼ŒæŸ¥çœ‹podçŠ¶æ€ç­‰ã€‚åœ¨ä½¿ç”¨è¯¥é¡¹ç›®ä¹‹å‰ï¼Œéœ€è¦è·å–k8sé›†ç¾¤çš„é…ç½®ä¿¡æ¯ï¼škubectl config viewæŠŠé…ç½®ä¿¡æ¯æ‹·è´ä¸€ä¸‹ï¼Œç²˜è´´åˆ°é¡¹ç›®ä¸­çš„admin.confæ–‡ä»¶ä¸­å³å¯ã€‚
æ­¤å¤–ï¼Œk8s-client-goé¡¹ç›®ä¾èµ–client-goï¼Œå› æ­¤éœ€è¦å‚è€ƒã€ŠGolangåŒ…ç®¡ç†å·¥å…·ã€‹å®‰è£…å¥½ä¾èµ–ã€‚
åè®°æœ¬æ–‡ä¸­å­¦ä¹ äº†client-goçš„å®‰è£…æ–¹æ³•ï¼Œç„¶åå€ŸåŠ©k8s-client-goé¡¹ç›®å­¦ä¹ äº†client-goçš„åŸºæœ¬ç”¨æ³•ã€‚æ¥ä¸‹æ¥ï¼Œä½¿ç”¨client-goå®ç°åœ¨K8Sé›†ç¾¤ä¸­å‘å¸ƒé¡¹ç›®ï¼Œgoï¼goï¼goï¼
]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>golang</tag>
        <tag>docker</tag>
        <tag>client-go</tag>
        <tag>kubectl</tag>
      </tags>
  </entry>
  <entry>
    <title>K8Sä¸­å®‰è£…é…ç½®StorageClass</title>
    <url>/dev-k8s-storageclass/</url>
    <content><![CDATA[StorageClassç®€ä»‹StorageClass ä¸ºç®¡ç†å‘˜æä¾›äº†æè¿°å­˜å‚¨ â€œç±»â€ çš„æ–¹æ³•ã€‚ ä¸åŒçš„ç±»å‹å¯èƒ½ä¼šæ˜ å°„åˆ°ä¸åŒçš„æœåŠ¡è´¨é‡ç­‰çº§æˆ–å¤‡ä»½ç­–ç•¥ï¼Œæˆ–æ˜¯ç”±é›†ç¾¤ç®¡ç†å‘˜åˆ¶å®šçš„ä»»æ„ç­–ç•¥ã€‚ Kubernetes æœ¬èº«å¹¶ä¸æ¸…æ¥šå„ç§ç±»ä»£è¡¨çš„ä»€ä¹ˆã€‚è¿™ä¸ªç±»çš„æ¦‚å¿µåœ¨å…¶ä»–å­˜å‚¨ç³»ç»Ÿä¸­æœ‰æ—¶è¢«ç§°ä¸º â€œé…ç½®æ–‡ä»¶â€ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

K8Så®˜æ–¹æ–‡æ¡£ - å­˜å‚¨
K8Så®˜æ–¹æ–‡æ¡£ - å­˜å‚¨ç±»
ã€ŠK8Sä¸­çš„Volumeã€‹



å®‰è£…é…ç½®StorageClassæ¦‚è¿°è¦ä½¿ç”¨ StorageClassï¼Œæˆ‘ä»¬å°±å¾—å®‰è£…å¯¹åº”çš„è‡ªåŠ¨é…ç½®ç¨‹åºï¼Œæ¯”å¦‚å­˜å‚¨åç«¯ä½¿ç”¨çš„æ˜¯ nfs-serverï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨åˆ°ä¸€ä¸ª nfs-client çš„è‡ªåŠ¨é…ç½®ç¨‹åºï¼Œæˆ‘ä»¬ä¹Ÿå«å®ƒ Provisionerï¼Œè¿™ä¸ªç¨‹åºä½¿ç”¨æˆ‘ä»¬å·²ç»é…ç½®å¥½çš„ nfs æœåŠ¡å™¨ï¼Œæ¥è‡ªåŠ¨åˆ›å»ºæŒä¹…å·ï¼Œä¹Ÿå°±æ˜¯è‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»º PVã€‚
å‚è€ƒæ–‡æ¡£ï¼š

github - kubernetes-sigs/sig-storage-lib-external-provisioner
github - kubernetes-retired/external-storage
github - kubernetes-sigs/nfs-subdir-external-provisioner
StorageClass
åˆ©ç”¨NFSåŠ¨æ€æä¾›Kubernetesåç«¯å­˜å‚¨å·
nacos - nfs storageclass yaml
æ­å»ºNFS Server

å®‰è£…NFSå‚è€ƒæ–‡æ¡£ã€ŠLinuxä¸­å®‰è£…NFSã€‹ï¼Œåœ¨å­˜å‚¨èŠ‚ç‚¹å®‰è£…nfs-serverï¼ŒK8Sæ‰€æœ‰èŠ‚ç‚¹å®‰è£…nfs-clientã€‚
nfs-serverå®‰è£…å®Œæˆåï¼Œå¯¹å¤–æœåŠ¡è·¯å¾„ä¸ºï¼š
192.168.56.101:/data/nfs

å®‰è£…nfs-provisioner1ã€ç¼–å†™sa specï¼Œnfs-client-sa.yaml
apiVersion: v1kind: ServiceAccountmetadata:  name: nfs-client-provisioner---kind: ClusterRoleapiVersion: rbac.authorization.k8s.io/v1metadata:  name: nfs-client-provisioner-runnerrules:  - apiGroups: [&quot;&quot;]    resources: [&quot;persistentvolumes&quot;]    verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;, &quot;create&quot;, &quot;delete&quot;]  - apiGroups: [&quot;&quot;]    resources: [&quot;persistentvolumeclaims&quot;]    verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;, &quot;update&quot;]  - apiGroups: [&quot;storage.k8s.io&quot;]    resources: [&quot;storageclasses&quot;]    verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;]  - apiGroups: [&quot;&quot;]    resources: [&quot;events&quot;]    verbs: [&quot;list&quot;, &quot;watch&quot;, &quot;create&quot;, &quot;update&quot;, &quot;patch&quot;]  - apiGroups: [&quot;&quot;]    resources: [&quot;endpoints&quot;]    verbs: [&quot;create&quot;, &quot;delete&quot;, &quot;get&quot;, &quot;list&quot;, &quot;watch&quot;, &quot;patch&quot;, &quot;update&quot;]---kind: ClusterRoleBindingapiVersion: rbac.authorization.k8s.io/v1metadata:  name: run-nfs-client-provisionersubjects:  - kind: ServiceAccount    name: nfs-client-provisioner    namespace: defaultroleRef:  kind: ClusterRole  name: nfs-client-provisioner-runner  apiGroup: rbac.authorization.k8s.io

2ã€ç¼–å†™nfs-client-provisionerçš„deployment specï¼Œnfs-client.yaml
kind: DeploymentapiVersion: apps/v1metadata:  name: nfs-client-provisionerspec:  replicas: 1  strategy:    type: Recreate  selector:    matchLabels:      app: nfs-client-provisioner  template:    metadata:      labels:        app: nfs-client-provisioner    spec:      serviceAccountName: nfs-client-provisioner      containers:        - name: nfs-client-provisioner          #image: quay.io/external_storage/nfs-client-provisioner:latest          image: registry.cn-beijing.aliyuncs.com/mydlq/nfs-subdir-external-provisioner:v4.0.0          volumeMounts:            - name: nfs-client-root              mountPath: /persistentvolumes          env:            - name: PROVISIONER_NAME              value: fuseim.pri/ifs            - name: NFS_SERVER              value: 192.168.56.101            - name: NFS_PATH              value: /data/nfs      volumes:        - name: nfs-client-root          nfs:            server: 192.168.56.101            path: /data/nfs

3ã€ç¼–å†™sc specï¼Œnfs-client-sc.yaml
apiVersion: storage.k8s.io/v1kind: StorageClassmetadata:  name: nfs-storage  annotations:    &quot;storageclass.kubernetes.io/is-default-class&quot;: &quot;true&quot;provisioner: fuseim.pri/ifs
è¿™é‡Œçš„fuseim.pri/ifsæ˜¯deploymentä¸­å®šä¹‰çš„ PROVISIONER_NAME å˜é‡
4ã€åˆ›å»ºèµ„æºå¯¹è±¡
kubectl apply -f nfs-client-sa.yamlkubectl apply -f nfs-client.yamlkubectl apply -f nfs-client-sc.yaml

5ã€æŸ¥çœ‹podçŠ¶æ€
kubectl describe pods nfs-client-provisioner-7975f9b954-7fw5l
æŠ¥é”™ï¼š
Output: mount: wrong fs type, bad option, bad superblock on 192.168.56.101:/data/nfs       missing codepage or helper program, or other error       (for several filesystems (e.g. nfs, cifs) you might       need a /sbin/mount.&lt;type&gt; helper program)

è¿™æ˜¯å› ä¸ºnfs-client-providerä¾èµ–å®¿ä¸»æœºä¸Šçš„/sbin/mount.&lt;type&gt;ï¼Œæ‰€ä»¥æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½éœ€è¦å®‰è£…nfså’Œrpcbindã€‚è¯¦æƒ…å‚è€ƒnfsæŒ‚è½½æŠ¥é”™è¯¯wrong fs type, bad option, bad superblock
å®‰è£…nfs-provisionerç®€åŒ–ç‰ˆhelm repo add nfs-subdir-external-provisioner https://kubernetes-sigs.github.io/nfs-subdir-external-provisioner/helm install nfs-provisioner nfs-subdir-external-provisioner/nfs-subdir-external-provisioner \    --set nfs.server=192.168.56.101 \    --set nfs.path=/data/nfs \    --set image.repository=registry.cn-beijing.aliyuncs.com/mydlq/nfs-subdir-external-provisioner \    --set image.tag=v4.0.0

å‚è€ƒæ–‡æ¡£ï¼šgithub - kubernetes-sigs/nfs-subdir-external-provisioner
è®¾ç½®é»˜è®¤StorageClasså¦‚æœæ²¡æœ‰è®¾ç½®é»˜è®¤çš„storageclassï¼Œå¯ä»¥å‚è€ƒæ”¹å˜é»˜è®¤ StorageClassï¼Œè®¾ç½®nfs-storageä¸ºé»˜è®¤storageclass
kubectl patch storageclass nfs-storage -p &#x27;&#123;&quot;metadata&quot;: &#123;&quot;annotations&quot;:&#123;&quot;storageclass.kubernetes.io/is-default-class&quot;:&quot;true&quot;&#125;&#125;&#125;&#x27;

å¯ç”¨selflink1.20.xä¹‹åçš„k8sç‰ˆæœ¬ï¼Œselflinkå·²ç»å¼ƒç”¨äº†ã€‚è€Œquay.io/external_storage/nfs-client-provisioner:latestçš„å®ç°åŸºäºselflinkï¼Œå› æ­¤åœ¨ä½¿ç”¨æ—¶ä¼šæŠ¥é”™ã€‚
è§£å†³åŠæ³•ï¼šapiserveræ·»åŠ å¯åŠ¨å‚æ•°--feature-gates=RemoveSelfLink=falseã€‚è¯¦æƒ…å‚è€ƒæ–‡æ¡£ã€ŠK8Sä¸­å®‰è£…KubeSphereã€‹
å¦‚æœæ˜¯k8s1.24.xä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œæ˜¯ä¸æ”¯æŒä¿®æ”¹å¯åŠ¨å‚æ•°RemoveSelfLinkçš„ï¼Œå¦åˆ™api-serveræ— æ³•å¯åŠ¨ã€‚è§£å†³åŠæ³•ï¼šæ›¿æ¢nfs-client-provisionerçš„é•œåƒç‰ˆæœ¬ä¸ºæ–°ç‰ˆæœ¬ï¼ˆä¸Šæ–‡ä¸­å·²ç»æ›¿æ¢ï¼‰ã€‚
ä½¿ç”¨StorageClasså‚è€ƒæ–‡æ¡£é…ç½® Pod ä»¥ä½¿ç”¨ PersistentVolume ä½œä¸ºå­˜å‚¨
åˆ›å»º PersistentVolumeClaim1ã€å®šä¹‰pvc.yaml
apiVersion: v1kind: PersistentVolumeClaimmetadata:  name: busybox-pv-claimspec:  storageClassName: nfs-storage  accessModes:    - ReadWriteOnce  resources:    requests:      storage: 3Gi

2ã€åˆ›å»ºpvc
kubectl apply -f pvc.yamlkubectl get pvckubectl get pv # ä¸ä¼šåˆ›å»ºå‡ºå¯¹åº”çš„pv

æ³¨æ„ï¼šnfs-privisioneræä¾›çš„å­˜å‚¨ï¼Œåœ¨ç”³è¯·æ—¶æ˜¯å¯ä»¥è¶…è¿‡çœŸå®å­˜å‚¨å®¹é‡çš„ã€‚æ¯”å¦‚NFSçš„çœŸå®å­˜å‚¨åªæœ‰10GBï¼Œæˆ‘ä»¬ç”³è¯·çš„PVCæ˜¯100GBæˆ–è€…1000GBï¼Œä¹Ÿå¯ä»¥ç”³è¯·æˆåŠŸï¼Œå½“PVCç»‘å®šç»™Podåï¼Œèƒ½å¤Ÿåˆ›å»ºå‡ºå¯¹åº”PVã€‚
åˆ›å»ºPod1ã€å®šä¹‰pod.yaml
apiVersion: v1kind: Podmetadata:  creationTimestamp: null  labels:    run: busybox  name: busyboxspec:  containers:  - command:    - sleep    - &quot;3000&quot;    image: busybox:1.25    name: busybox    resources: &#123;&#125;    volumeMounts:    - mountPath: &quot;/data&quot;      name: busybox-pv-storage  volumes:  - name: busybox-pv-storage    persistentVolumeClaim:      claimName: busybox-pv-claim  dnsPolicy: ClusterFirst  restartPolicy: Neverstatus: &#123;&#125;

2ã€åˆ›å»ºpod
kubectl apply -f pod.yamlkubectl get podskubectl get pvckubectl get pv # åˆ›å»ºå‡ºäº†å¯¹åº”çš„pv

3ã€éªŒè¯æŒ‚è½½
kubectl exec -it busybox /bin/shls /datatouch /data/test.txt

ç„¶åï¼Œç™»å½•åˆ°nfs-serverçš„ä¸»æœº192.168.56.101ï¼ŒæŸ¥çœ‹å†™å…¥ç»“æœã€‚
volumeClaimTemplateså¯¹äºstatefulsetï¼Œéœ€è¦ä½¿ç”¨volumeClaimTemplatesæ¥å£°æ˜ä½¿ç”¨storageclassï¼Œè¯¦æƒ…å‚è€ƒStatefulSet
å®‰è£…é…ç½®å¤šä¸ªStorageClasså¦‚æœk8sé›†ç¾¤ä¸­çš„å­˜å‚¨å…¨éƒ¨ä½¿ç”¨åŒä¸€ä¸ªnfs-serverï¼Œé‚£ä¹ˆè¿™ä¸ªnfs-serverçš„ç½‘ç»œå‹åŠ›ä¼šå¾ˆå¤§ã€‚ä¸ºäº†åˆ†æ‹…å•ä¸ªnfs-serverçš„å‹åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤šä¸ªä¸»æœºä¸Šå®‰è£…é…ç½®nfs-serverï¼Œç„¶ååœ¨k8sä¸­è½¯ä»¶éƒ¨ç½²æ—¶è§„åˆ’å¥½å“ªäº›è½¯ä»¶ä½¿ç”¨å“ªä¸ªnfs-serverã€‚
å‡è®¾ç°åœ¨æˆ‘ä»¬åœ¨192.168.56.102ä¸»æœºä¸Šä¹Ÿå®‰è£…å¥½äº†nfs-serverï¼Œä¸‹é¢æˆ‘ä»¬åœ¨k8sé›†ç¾¤ä¸­æ·»åŠ å®ƒçš„é…ç½®ã€‚
1ã€å†åˆ›å»ºä¸€ä¸ªnfs-client-provisionerï¼Œsaä¸ç”¨å˜
kind: DeploymentapiVersion: apps/v1metadata:  name: nfs-client-provisioner-102spec:  replicas: 1  strategy:    type: Recreate  selector:    matchLabels:      app: nfs-client-provisioner-102  template:    metadata:      labels:        app: nfs-client-provisioner-102    spec:      serviceAccountName: nfs-client-provisioner      containers:        - name: nfs-client-provisioner          image: quay.io/external_storage/nfs-client-provisioner:latest          volumeMounts:            - name: nfs-client-root              mountPath: /persistentvolumes          env:            - name: PROVISIONER_NAME              value: fuseim.pri/ifs-102            - name: NFS_SERVER              value: 192.168.56.102            - name: NFS_PATH              value: /data/nfs      volumes:        - name: nfs-client-root          nfs:            server: 192.168.56.102            path: /data/nfs

2ã€å†åˆ›å»ºä¸€ä¸ªstorageclass
apiVersion: storage.k8s.io/v1kind: StorageClassmetadata:  name: nfs-storage-102provisioner: fuseim.pri/ifs-102

3ã€ä½¿ç”¨192.168.56.102å­˜å‚¨æ•°æ®å½“æˆ‘ä»¬ä½¿ç”¨nfs-storage-102è¿™ä¸ªstorageclassæ—¶ï¼Œå°±èƒ½å¤Ÿå­˜å‚¨æ•°æ®åˆ° 192.168.56.102 è¿™å°ä¸»æœºä¸Šäº†ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
        <category>storage</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>å­˜å‚¨</tag>
        <tag>helm</tag>
        <tag>nfs</tag>
      </tags>
  </entry>
  <entry>
    <title>è‡ªå·±åŠ¨æ‰‹åˆ¶ä½œHelm Chart</title>
    <url>/dev-make-helm-chart/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ åˆ¶ä½œHelm Chartï¼Œç”¨æ¥ç®€åŒ–imagepullsecret-patcherçš„éƒ¨ç½²ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ã€ŠHelmå…¥é—¨ç¯‡ã€‹
Helm - Getting Started
ã€ŠK8Sé…ç½®ä½¿ç”¨imagePullSecretsã€‹
imagepullsecret-patcher
imagepullsecret-patcher deploy-example



ç¬¬ä¸€ä¸ªChart1ã€ç”Ÿæˆchartæ¨¡æ¿
helm create imagepullsecret-patcher

2ã€åˆ é™¤æ‰€æœ‰templates
rm -rf imagepullsecret-patcher/templates/*

3ã€å‡†å¤‡èµ„æºæ¸…å•

imagepullsecret-patcher/templates/namespace.yaml
imagepullsecret-patcher/templates/rbac.yaml
imagepullsecret-patcher/templates/deployment.yaml

å…·ä½“èµ„æºæ¸…å•å†…å®¹å‚è§ï¼šmake-helm-chart/v1/imagepullsecret-patcher
è¿™ä»½èµ„æºæ¸…å•æ¥è‡ªã€ŠK8Sé…ç½®ä½¿ç”¨imagePullSecretsã€‹ï¼Œyamlæ–‡ä»¶ä¸­æ²¡æœ‰ä½¿ç”¨ä»»ä½•å˜é‡ã€‚
4ã€æ£€æŸ¥chart
helm lint imagepullsecret-patcher

5ã€æ‰§è¡Œå®‰è£…
helm install imagepullsecret-patcher ./imagepullsecret-patcher

chartå®‰è£…æˆåŠŸï¼Œä½†æ˜¯å‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼šchartæ‰€å±namespaceæ˜¯defaultï¼Œä½†æ˜¯çœŸå®èµ„æºæ‰€å±namespaceæ˜¯imagepullsecret-patcherï¼ˆåœ¨yamlæ–‡ä»¶ä¸­æŒ‡å®šçš„ï¼‰ã€‚
ç¬¬ä¸€ä¸ªChartå­˜åœ¨çš„é—®é¢˜ç¬¬ä¸€ä¸ªChartï¼Œå­˜åœ¨å‡ ä¸ªé—®é¢˜ï¼š

helm install çš„namespaceå’ŒçœŸå®èµ„æºçš„namespaceä¸åŒ
deploymentç­‰èµ„æºçš„nameæ˜¯å›ºå®šçš„ï¼Œä¸èƒ½åœ¨values.yamlä¸­æˆ–è€…å®‰è£…æ—¶è‡ªå®šä¹‰
dockerconfigjsonæ˜¯å›ºå®šçš„ï¼Œä¸èƒ½åœ¨values.yamlä¸­æˆ–è€…å®‰è£…æ—¶è‡ªå®šä¹‰
imagepullsecret-patcher/values.yaml ä¸­çš„å˜é‡å®Œå…¨æ— ç”¨
chartçš„versionå’Œappçš„versionä¸ç¬¦åˆé¢„æœŸ

ä¸ºäº†è§£å†³ä¸Šé¢å‡ ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å…ˆæ¥è¡¥å……ä¸‹helmçš„çŸ¥è¯†ã€‚å‚è€ƒæ–‡æ¡£ã€ŠHelmå®˜æ–¹æ–‡æ¡£æ‘˜å½•ã€‹
ç¬¬äºŒä¸ªChartç¬¬äºŒä¸ªChartï¼Œè§£å†³ç¬¬ä¸€ä¸ªChartä¸­å­˜åœ¨çš„é—®é¢˜ã€‚
1ã€å‡†å¤‡èµ„æºæ¸…å•

imagepullsecret-patcher/templates/rbac.yaml
imagepullsecret-patcher/templates/deployment.yaml
imagepullsecret-patcher/templates/_helpers.tpl
imagepullsecret-patcher/templates/NOTES.txt
imagepullsecret-patcher/values.yaml

å…·ä½“èµ„æºæ¸…å•å†…å®¹å‚è§ï¼šmake-helm-chart/v2/imagepullsecret-patcher
2ã€æ£€æŸ¥chart
helm lint imagepullsecret-patcher

3ã€æ‰§è¡Œå®‰è£…
helm install imagepullsecret-patcher ./imagepullsecret-patcher \    -n imagepullsecret-patcher --create-namespace \    --set imageCredentials.registry=harbor.voidking.com \    --set imageCredentials.username=haojin \    --set imageCredentials.password=haojin123

4ã€æ‰“åŒ…chart
helm package imagepullsecret-patcher
ç”ŸæˆchartåŒ… imagepullsecret-patcher-0.1.0.tgz
åˆ†äº«Chartä»“åº“å‚è€ƒæ–‡æ¡£ï¼š

Chartä»“åº“æŒ‡å—
Helmä¸Šä¼ Chartåˆ°Artifact Hub
Helm è¿›é˜¶åˆ°éª¨ç°ç©å®¶ï¼Œè¯·æ”¶è—ï¼
bitnami/charts
bitnami/index.yaml

åˆ›å»ºChartä»“åº“1ã€åœ¨githubåˆ›å»ºä¸€ä¸ªå…¬å…±ä»“åº“
æœªå®Œå¾…ç»­
]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>helm</tag>
      </tags>
  </entry>
  <entry>
    <title>K8Sä¸­çš„Volume</title>
    <url>/dev-k8s-volume/</url>
    <content><![CDATA[Volumeç®€ä»‹Container ä¸­çš„æ–‡ä»¶åœ¨ç£ç›˜ä¸Šæ˜¯ä¸´æ—¶å­˜æ”¾çš„ï¼Œè¿™ä¼šå¸¦æ¥ä¸¤ä¸ªé—®é¢˜ï¼š1ï¼‰å½“å®¹å™¨å´©æºƒæ—¶æ–‡ä»¶ä¼šä¸¢å¤±ï¼›2ï¼‰åŒä¸€Podä¸­è¿è¡Œå¤šä¸ªå®¹å™¨å¹¶å…±äº«æ–‡ä»¶æ—¶ï¼Œå®¹å™¨é‡å¯æ—¶çŠ¶æ€ä¸¢å¤±ã€‚Kubernetes å·ï¼ˆVolumeï¼‰ è¿™ä¸€æŠ½è±¡æ¦‚å¿µèƒ½å¤Ÿè§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ã€‚
Dockerå·çš„æœ¬è´¨æ˜¯ç›®å½•ï¼Œå­˜åœ¨ä¸ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä¸­ï¼Œç”±dockeræŒ‚è½½åˆ°å®¹å™¨ï¼Œä½†ä¸å±äºè”åˆæ–‡ä»¶ç³»ç»Ÿï¼Œå› æ­¤èƒ½å¤Ÿç»•è¿‡â€œè”åˆæ–‡ä»¶ç³»ç»Ÿâ€æä¾›ä¸€äº›ç”¨äºæŒç»­å­˜å‚¨æˆ–å…±äº«æ•°æ®çš„ç‰¹æ€§ã€‚K8Så·çš„æœ¬è´¨ä¹Ÿæ˜¯ç›®å½•ï¼Œå…¶ä¸­å¯èƒ½å­˜æœ‰æ•°æ®ï¼ŒPod ä¸­çš„å®¹å™¨å¯ä»¥è®¿é—®è¯¥ç›®å½•ä¸­çš„æ•°æ®ã€‚ æ‰€é‡‡ç”¨çš„ç‰¹å®šçš„å·ç±»å‹å°†å†³å®šè¯¥ç›®å½•å¦‚ä½•å½¢æˆçš„ã€ä½¿ç”¨ä½•ç§ä»‹è´¨ä¿å­˜æ•°æ®ä»¥åŠç›®å½•ä¸­å­˜æ”¾çš„å†…å®¹ã€‚
Kubernetesä¸­çš„å·åˆ†ä¸ºä¸¤ç±»ï¼šä¸´æ—¶å·å’ŒæŒä¹…å·ã€‚ä¸´æ—¶å·ä¼šéµä» Pod çš„ç”Ÿå‘½å‘¨æœŸï¼Œå’ŒPodä¸€èµ·åˆ›å»ºå’Œåˆ é™¤ï¼›æŒä¹…å·çš„ç”Ÿå‘½å‘¨æœŸç‹¬ç«‹äºpodçš„ç”Ÿå‘½å‘¨æœŸã€‚
Kubernetesä¸­å¸¸ç”¨çš„å·ç±»å‹åŒ…æ‹¬ï¼š

configMapï¼šä¸´æ—¶å·/æŠ•å°„å·ï¼Œå¸¸ç”¨æ¥å­˜å‚¨é…ç½®æ•°æ®
secretï¼šä¸´æ—¶å·/æŠ•å°„å·ï¼Œå¸¸ç”¨æ¥å­˜å‚¨é…ç½®æ•°æ®ï¼Œä½¿ç”¨base64åŠ å¯†æ•°æ®
downwardAPIï¼šä¸´æ—¶å·/æŠ•å°„å·ï¼Œè®© Pod é‡Œçš„å®¹å™¨èƒ½å¤Ÿç›´æ¥è·å–åˆ°è¿™ä¸ª Pod API å¯¹è±¡æœ¬èº«çš„ä¿¡æ¯ã€‚
emptyDirï¼šä¸´æ—¶å·ï¼Œå­˜å‚¨podä¸­çš„æ•°æ®ï¼Œpodåˆ é™¤æ—¶æ•°æ®ä¼šè¢«åˆ é™¤
hostPathï¼šæŒä¹…å·ï¼Œå°†ä¸»æœºèŠ‚ç‚¹ä¸Šçš„æ–‡ä»¶æˆ–ç›®å½•æŒ‚è½½åˆ°podä¸­ï¼ˆå­˜åœ¨è®¸å¤šå®‰å…¨é£é™©ï¼Œå°½é‡é¿å…ä½¿ç”¨ï¼‰
localï¼šæŒä¹…å·ï¼Œåˆ›å»ºpvæ—¶æŒ‡å®špvæ‰€åœ¨èŠ‚ç‚¹ï¼Œä½¿ç”¨pvcçš„podä¼šè¢«è°ƒåº¦åˆ°æŒ‡å®šèŠ‚ç‚¹ï¼Œå°†ä¸»æœºèŠ‚ç‚¹ä¸Šçš„æ–‡ä»¶æˆ–ç›®å½•æŒ‚è½½åˆ°podä¸­
nfsï¼šæŒä¹…å·ï¼Œå°† NFS (ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ) æŒ‚è½½åˆ°çš„podä¸­ã€‚ 
persistentVolumeClaimï¼šæŒä¹…å·ç”³é¢†ï¼Œä¸éœ€è¦çŸ¥é“æŒä¹…å·ç»†èŠ‚ã€‚
projectedï¼šæŠ•å°„å·èƒ½å°†å¤šä¸ªå·æ¥æºæ˜ å°„åˆ°åŒä¸€ç›®å½•ä¸Šã€‚

æŒä¹…å·ï¼ˆPersistentVolumeï¼ŒPVï¼‰ æ˜¯é›†ç¾¤ä¸­çš„ä¸€å—å­˜å‚¨ï¼Œå¯ä»¥ç”±ç®¡ç†å‘˜äº‹å…ˆåˆ¶å¤‡ï¼Œ æˆ–è€…ä½¿ç”¨å­˜å‚¨ç±»ï¼ˆStorage Classï¼‰æ¥åŠ¨æ€åˆ¶å¤‡ã€‚ æŒä¹…å·æ˜¯é›†ç¾¤èµ„æºï¼Œå°±åƒèŠ‚ç‚¹ä¹Ÿæ˜¯é›†ç¾¤èµ„æºä¸€æ ·ã€‚PV æŒä¹…å·å’Œæ™®é€šçš„ Volume ä¸€æ ·ï¼Œ ä¹Ÿæ˜¯ä½¿ç”¨å·æ’ä»¶æ¥å®ç°çš„ï¼Œåªæ˜¯å®ƒä»¬æ‹¥æœ‰ç‹¬ç«‹äºä»»ä½•ä½¿ç”¨ PV çš„ Pod çš„ç”Ÿå‘½å‘¨æœŸã€‚ æ­¤ API å¯¹è±¡ä¸­è®°è¿°äº†å­˜å‚¨çš„å®ç°ç»†èŠ‚ï¼Œæ— è®ºå…¶èƒŒåæ˜¯ NFSã€iSCSI è¿˜æ˜¯ç‰¹å®šäºäº‘å¹³å°çš„å­˜å‚¨ç³»ç»Ÿã€‚
æŒä¹…å·ç”³é¢†ï¼ˆPersistentVolumeClaimï¼ŒPVCï¼‰ è¡¨è¾¾çš„æ˜¯ç”¨æˆ·å¯¹å­˜å‚¨çš„è¯·æ±‚ã€‚æ¦‚å¿µä¸Šä¸ Pod ç±»ä¼¼ã€‚ Pod ä¼šè€—ç”¨èŠ‚ç‚¹èµ„æºï¼Œè€Œ PVC ç”³é¢†ä¼šè€—ç”¨ PV èµ„æºã€‚Pod å¯ä»¥è¯·æ±‚ç‰¹å®šæ•°é‡çš„èµ„æºï¼ˆCPU å’Œå†…å­˜ï¼‰ï¼›åŒæ · PVC ç”³é¢†ä¹Ÿå¯ä»¥è¯·æ±‚ç‰¹å®šçš„å¤§å°å’Œè®¿é—®æ¨¡å¼ ï¼ˆä¾‹å¦‚ï¼Œå¯ä»¥è¦æ±‚ PV å·èƒ½å¤Ÿä»¥ ReadWriteOnceã€ReadOnlyMany æˆ– ReadWriteMany æ¨¡å¼ä¹‹ä¸€æ¥æŒ‚è½½ï¼Œå‚è§è®¿é—®æ¨¡å¼ï¼‰ã€‚
PVCä¸PVæ˜¯ä¸€ä¸€å¯¹åº”å…³ç³»ï¼Œä¸èƒ½ä¸€ä¸ªPVCæŒ‚è½½å¤šä¸ªPVï¼Œä¹Ÿä¸èƒ½ä¸€ä¸ªPVæŒ‚è½½å¤šä¸ªPVCã€‚
å‚è€ƒæ–‡æ¡£ï¼š

K8Så®˜æ–¹æ–‡æ¡£ - å­˜å‚¨
K8Så®˜æ–¹æ–‡æ¡£ - å·
K8Så®˜æ–¹æ–‡æ¡£ - æŒä¹…å·
K8Så®˜æ–¹æ–‡æ¡£ - ä¸´æ—¶å·
K8Så®˜æ–¹æ–‡æ¡£ - æŠ•å°„å·
K8Så®˜æ–¹æ–‡æ¡£ - Downward API
é˜¿é‡Œäº‘ACK - å­˜å‚¨åŸºç¡€çŸ¥è¯†
ã€ŠK8Sä¸­å®‰è£…é…ç½®StorageClassã€‹



ConfigMap/Secretä¸ºä»€ä¹ˆæ˜¯ä¸´æ—¶å·ï¼Ÿä¸´æ—¶å·ä¼šéµä» Pod çš„ç”Ÿå‘½å‘¨æœŸï¼Œå’ŒPodä¸€èµ·åˆ›å»ºå’Œåˆ é™¤ã€‚
ConfigMapæœ¬èº«æ˜¯ä¸€ä¸ªAPIå¯¹è±¡ï¼Œç”¨æ¥å°†éæœºå¯†æ€§çš„æ•°æ®ä¿å­˜åˆ°é”®å€¼å¯¹ä¸­ã€‚ä½¿ç”¨æ—¶ï¼ŒPodså¯ä»¥å°†å…¶ç”¨ä½œç¯å¢ƒå˜é‡ã€å‘½ä»¤è¡Œå‚æ•°æˆ–è€…å­˜å‚¨å·ä¸­çš„é…ç½®æ–‡ä»¶ã€‚å½“å®¹å™¨æŒ‚è½½ ConfigMap æ—¶ï¼ŒConfigMapçš„ä¿¡æ¯ä¼šè¢«èŠ‚ç‚¹æœ¬åœ°ä¸´æ—¶å­˜å‚¨ï¼Œç„¶åæŒ‚è½½åˆ°å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚å½“Podåˆ é™¤æ—¶ï¼Œå®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿæ²¡äº†ï¼Œæœ¬åœ°ä¸´æ—¶å­˜å‚¨ä¸­çš„ConfigMapä¿¡æ¯ä¹Ÿæ²¡äº†ï¼Œå› æ­¤ConfigMapæ˜¯ä¸´æ—¶å·ã€‚
SecretåŒç†ã€‚
å…¶å®ï¼Œå¦‚æœè¯´ConfigMap/Secretæ˜¯æŒä¹…å·ï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå› ä¸ºConfigMap/Secretä¸ä¼šéšç€Podåˆ é™¤è€Œåˆ é™¤ã€‚
ä¸ç”¨å¤ªçº ç»“äºè¿™ç§æ¦‚å¿µæ€§çš„ä¸œè¥¿ï¼Œäº†è§£å³å¯ã€‚
ä½¿ç”¨configmapæˆ‘ä»¬æœ‰å››ç§æ–¹å¼æ¥ä½¿ç”¨ ConfigMap é…ç½® Pod ä¸­çš„å®¹å™¨ï¼š

å®¹å™¨çš„ç¯å¢ƒå˜é‡
åœ¨å®¹å™¨å‘½ä»¤å’Œå‚æ•°å†…
åœ¨åªè¯»å·é‡Œé¢æ·»åŠ ä¸€ä¸ªæ–‡ä»¶ï¼Œè®©åº”ç”¨æ¥è¯»å–
ç¼–å†™ä»£ç åœ¨ Pod ä¸­è¿è¡Œï¼Œä½¿ç”¨ Kubernetes API æ¥è¯»å– ConfigMap

å‚è€ƒæ–‡æ¡£ï¼š

K8Så®˜æ–¹æ–‡æ¡£ - ConfigMap
Podä¸­ä½¿ç”¨ConfigMap

ç”ŸæˆconfigmapåŸºäºæ–‡å­—ç”Ÿæˆconfigmapkubectl create cm game-demo \--from-literal=sleep_seconds=3600 \--from-literal=player_initial_lives=3 \--from-literal=ui_properties_file_name=user-interface.properties \--dry-run=client -oyaml &gt; configmap.yaml

åŸºäºç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ç”Ÿæˆconfigmap1ã€å‡†å¤‡ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ env.sh
sleep_seconds=3600player_initial_lives=3ui_properties_file_name=user-interface.properties

2ã€ç”Ÿæˆconfigæ–‡ä»¶
kubectl create cm game-demo \--from-env-file=env.sh \--dry-run=client -oyaml &gt; configmap.yaml

åŸºäºæ–‡ä»¶ç”Ÿæˆconfigmap1ã€å‡†å¤‡é…ç½®æ–‡ä»¶ game.properties å’Œ user-interface.properties
enemy.types=aliens,monstersplayer.maximum-lives=5

color.good=purplecolor.bad=yellowallow.textmode=true 

2ã€ç”Ÿæˆconfigmapæ–‡ä»¶
kubectl create cm game-demo \--from-file=game.properties=game.properties \--from-file=user-interface.properties=user-interface.properties \--dry-run=client -oyaml &gt; configmap.yaml

podä¸­ä½¿ç”¨configmapç®€å•ç¤ºä¾‹1ã€configmap.yaml
apiVersion: v1kind: ConfigMapmetadata:  name: game-demodata:  # ç±»å±æ€§é”®ï¼›æ¯ä¸€ä¸ªé”®éƒ½æ˜ å°„åˆ°ä¸€ä¸ªç®€å•çš„å€¼  sleep_seconds: &quot;3600&quot;  player_initial_lives: &quot;3&quot;  ui_properties_file_name: &quot;user-interface.properties&quot;  # ç±»æ–‡ä»¶é”®  game.properties: |    enemy.types=aliens,monsters    player.maximum-lives=5      user-interface.properties: |    color.good=purple    color.bad=yellow    allow.textmode=true 

2ã€pod.yaml
apiVersion: v1kind: Podmetadata:  name: configmap-demo-podspec:  containers:    - name: demo      image: alpine      command: [&quot;sleep&quot;, &quot;$(SLEEP_SECONDS)&quot;]      env:        # å®šä¹‰ç¯å¢ƒå˜é‡        - name: SLEEP_SECONDS # è¯·æ³¨æ„è¿™é‡Œå’Œ ConfigMap ä¸­çš„é”®åæ˜¯ä¸ä¸€æ ·çš„          valueFrom:            configMapKeyRef:              name: game-demo           # è¿™ä¸ªå€¼æ¥è‡ª ConfigMap              key: sleep_seconds # éœ€è¦å–å€¼çš„é”®        - name: PLAYER_INITIAL_LIVES # è¯·æ³¨æ„è¿™é‡Œå’Œ ConfigMap ä¸­çš„é”®åæ˜¯ä¸ä¸€æ ·çš„          valueFrom:            configMapKeyRef:              name: game-demo           # è¿™ä¸ªå€¼æ¥è‡ª ConfigMap              key: player_initial_lives # éœ€è¦å–å€¼çš„é”®        - name: UI_PROPERTIES_FILE_NAME          valueFrom:            configMapKeyRef:              name: game-demo              key: ui_properties_file_name      volumeMounts:      - name: config        mountPath: &quot;/config&quot;        readOnly: true  volumes:  # ä½ å¯ä»¥åœ¨ Pod çº§åˆ«è®¾ç½®å·ï¼Œç„¶åå°†å…¶æŒ‚è½½åˆ° Pod å†…çš„å®¹å™¨ä¸­  - name: config    configMap:      # æä¾›ä½ æƒ³è¦æŒ‚è½½çš„ ConfigMap çš„åå­—      name: game-demo      # æ¥è‡ª ConfigMap çš„ä¸€ç»„é”®ï¼Œå°†è¢«åˆ›å»ºä¸ºæ–‡ä»¶      items:      - key: &quot;game.properties&quot;        path: &quot;game.properties&quot;      - key: &quot;user-interface.properties&quot;        path: &quot;user-interface.properties&quot;

ConfigMap ä¸ä¼šåŒºåˆ†å•è¡Œå±æ€§å€¼å’Œå¤šè¡Œç±»ä¼¼æ–‡ä»¶çš„å€¼ï¼Œé‡è¦çš„æ˜¯ Pods å’Œå…¶ä»–å¯¹è±¡å¦‚ä½•ä½¿ç”¨è¿™äº›å€¼ã€‚
ä¸Šé¢çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªå·å¹¶å°†å®ƒä½œä¸º /config æ–‡ä»¶å¤¹æŒ‚è½½åˆ° demo å®¹å™¨å†…ï¼Œ åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶ï¼Œ/config/game.properties å’Œ /config/user-interface.propertiesï¼Œ å°½ç®¡ ConfigMap ä¸­åŒ…å«äº†å››ä¸ªé”®ã€‚ è¿™æ˜¯å› ä¸º Pod å®šä¹‰ä¸­åœ¨ volumes èŠ‚æŒ‡å®šäº†ä¸€ä¸ª items æ•°ç»„ã€‚ å¦‚æœä½ å®Œå…¨å¿½ç•¥ items æ•°ç»„ï¼Œåˆ™ ConfigMap ä¸­çš„æ¯ä¸ªé”®éƒ½ä¼šå˜æˆä¸€ä¸ªä¸è¯¥é”®åŒåçš„æ–‡ä»¶ï¼Œ å› æ­¤ä½ ä¼šå¾—åˆ°å››ä¸ªæ–‡ä»¶ã€‚
PSï¼šä½¿ç”¨ envFrom å¯ä»¥å°† ConfigMap çš„æ‰€æœ‰æ•°æ®å®šä¹‰ä¸ºå®¹å™¨çš„ç¯å¢ƒå˜é‡ã€‚
ä½¿ç”¨secretPod å¯ä»¥ç”¨ä¸‰ç§æ–¹å¼ä¹‹ä¸€æ¥ä½¿ç”¨ Secretï¼š

ä½œä¸ºå®¹å™¨çš„ç¯å¢ƒå˜é‡ã€‚
ä½œä¸ºæŒ‚è½½åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä¸Šçš„å· ä¸­çš„æ–‡ä»¶ã€‚
ç”± kubelet åœ¨ä¸º Pod æ‹‰å–é•œåƒæ—¶ä½¿ç”¨ã€‚

åˆ›å»º Secret æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Secret èµ„æºçš„ type å­—æ®µï¼Œæˆ–è€…ä¸å…¶ç­‰ä»·çš„ kubectl å‘½ä»¤è¡Œå‚æ•°ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ä¸ºå…¶è®¾ç½®ç±»å‹ã€‚ Secret ç±»å‹æœ‰åŠ©äºå¯¹ Secret æ•°æ®è¿›è¡Œç¼–ç¨‹å¤„ç†ã€‚
Kubernetes æä¾›è‹¥å¹²ç§å†…ç½®çš„ç±»å‹ï¼Œç”¨äºä¸€äº›å¸¸è§çš„ä½¿ç”¨åœºæ™¯ã€‚ é’ˆå¯¹è¿™äº›ç±»å‹ï¼ŒKubernetes æ‰€æ‰§è¡Œçš„åˆæ³•æ€§æ£€æŸ¥æ“ä½œä»¥åŠå¯¹å…¶æ‰€å®æ–½çš„é™åˆ¶å„ä¸ç›¸åŒã€‚
å¦‚æœ type å€¼ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œåˆ™è¢«è§†ä¸º Opaque ç±»å‹ï¼ˆç”¨æˆ·å®šä¹‰çš„ä»»æ„æ•°æ®ï¼‰ã€‚
Secretä½¿ç”¨base64åŠ å¯†ï¼Œå¯ä»¥ä½¿ç”¨echo &quot;YWRtaW4=&quot; | base64 -då‘½ä»¤è¿›è¡Œè§£å¯†ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

K8Så®˜æ–¹æ–‡æ¡£ - Secret

ç”ŸæˆsecretåŸºäºæ–‡å­—ç”Ÿæˆsecretkubectl create secret generic mysecret \--from-literal=username=admin \--from-literal=password=1f2d1e2e67df \--dry-run=client -oyaml &gt; secret.yaml

åŸºäºç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ç”Ÿæˆsecret1ã€å‡†å¤‡ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ env.sh
username=adminpassword=1f2d1e2e67df

2ã€ç”Ÿæˆsecret
kubectl create secret generic mysecret \--from-env-file=env.sh \--dry-run=client -oyaml &gt; secret.yaml

åŸºäºæ–‡ä»¶ç”Ÿæˆsecretkubectl create secret generic mysecret \--from-file=ssh-privatekey=path/to/id_rsa \--from-file=ssh-publickey=path/to/id_rsa.pub \--dry-run=client -oyaml &gt; secret.yaml

podä¸­ä½¿ç”¨secretç®€å•ç¤ºä¾‹1ã€secret.yaml
apiVersion: v1kind: Secretmetadata:  name: mysecrettype: Opaquedata:  username: YWRtaW4=  password: MWYyZDFlMmU2N2Rm

2ã€pod.yaml
apiVersion: v1kind: Podmetadata:  name: secret-demo-podspec:  containers:  - name: mycontainer    image: alpine    command: [&quot;sleep&quot;, &quot;3600&quot;]    env:    - name: SECRET_USERNAME      valueFrom:        secretKeyRef:          name: mysecret          key: username          optional: false # æ­¤å€¼ä¸ºé»˜è®¤å€¼ï¼›æ„å‘³ç€ &quot;mysecret&quot;                          # å¿…é¡»å­˜åœ¨ä¸”åŒ…å«åä¸º &quot;username&quot; çš„ä¸»é”®    - name: SECRET_PASSWORD      valueFrom:        secretKeyRef:          name: mysecret          key: password          optional: false # æ­¤å€¼ä¸ºé»˜è®¤å€¼ï¼›æ„å‘³ç€ &quot;mysecret&quot;                          # å¿…é¡»å­˜åœ¨ä¸”åŒ…å«åä¸º &quot;password&quot; çš„ä¸»é”®    volumeMounts:    - name: foo      mountPath: &quot;/etc/foo&quot;  volumes:  - name: foo    secret:      secretName: mysecret      defaultMode: 0400  restartPolicy: Never

å®¹å™¨ä¸­çœ‹åˆ°çš„ç¯å¢ƒå˜é‡ï¼Œå’Œæ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œéƒ½æ˜¯æ˜æ–‡ã€‚
PSï¼šä½¿ç”¨ envFrom å¯ä»¥å°† Secret çš„æ‰€æœ‰æ•°æ®å®šä¹‰ä¸ºå®¹å™¨çš„ç¯å¢ƒå˜é‡ã€‚
imagePullSecretså‚è€ƒæ–‡æ¡£ ã€ŠK8Sé…ç½®ä½¿ç”¨imagePullSecretsã€‹
ä½¿ç”¨emptyDirå‚è€ƒæ–‡æ¡£K8Så®˜æ–¹æ–‡æ¡£ - å· - emptyDir configuration example
apiVersion: v1kind: Podmetadata:  name: test-pdspec:  containers:  - image: registry.k8s.io/test-webserver    name: test-container    volumeMounts:    - mountPath: /cache      name: cache-volume  volumes:  - name: cache-volume    emptyDir:      sizeLimit: 500Mi

ä½¿ç”¨hostPathå‚è€ƒæ–‡æ¡£K8Så®˜æ–¹æ–‡æ¡£ - å· - hostPath configuration example
apiVersion: v1kind: Podmetadata:  name: test-pdspec:  containers:  - image: registry.k8s.io/test-webserver    name: test-container    volumeMounts:    - mountPath: /test-pd      name: test-volume  volumes:  - name: test-volume    hostPath:      # directory location on host      path: /data      # this field is optional      type: Directory

ä½¿ç”¨nfsç›´æ¥ä½¿ç”¨nfså‚è€ƒæ–‡æ¡£K8Så®˜æ–¹æ–‡æ¡£ - å· - nfs
apiVersion: v1kind: Podmetadata:  name: test-podspec:  containers:  - image: busybox    name: busybox    command: [&quot;sleep&quot;, &quot;3600&quot;]    volumeMounts:    - mountPath: /my-nfs-data      name: test-volume  volumes:  - name: test-volume    nfs:      server: my-nfs-server.example.com      path: /my-nfs-volume      readOnly: true

nfsä½œä¸ºpvå‚è€ƒæ–‡æ¡£ï¼š

K8Så®˜æ–¹æ–‡æ¡£ - Persistent Volumes
K8Så®˜æ–¹æ–‡æ¡£ - Persistent Volumes - Reclaiming

1ã€pv.yaml
apiVersion: v1kind: PersistentVolumemetadata:  name: nfs-pv  labels:    release: &quot;stable&quot;    environment: &quot;dev&quot;spec:  capacity:    storage: 5Gi  volumeMode: Filesystem  accessModes:    - ReadOnlyMany  persistentVolumeReclaimPolicy: Retain  storageClassName: slow  mountOptions:    - hard    - nfsvers=4  nfs:    server: my-nfs-server.example.com    path: /my-nfs-volume

éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒpersistentVolumeReclaimPolicyä½¿ç”¨çš„Retainï¼Œå½“pvcåˆ é™¤åï¼ŒçœŸå®å­˜å‚¨è®¾å¤‡ä¸Šçš„æ•°æ®ä¾ç„¶å­˜åœ¨ï¼Œpvä¸èƒ½è¢«å…¶ä»–pvcç”³é¢†ï¼›å½“pvåˆ é™¤åï¼ŒçœŸå®å­˜å‚¨è®¾å¤‡ä¸Šçš„æ•°æ®ä¾ç„¶å­˜åœ¨ã€‚
å¦‚æœä½¿ç”¨Deleteï¼Œé‚£ä¹ˆå½“pvcåˆ é™¤åï¼Œpvä¹Ÿä¼šè¢«åˆ é™¤ï¼ŒçœŸå®å­˜å‚¨è®¾å¤‡ä¸Šçš„æ•°æ®ä¹Ÿä¼šè¢«åˆ é™¤ã€‚pvè‡ªåŠ¨åˆ é™¤å¯èƒ½ä¼šåˆ é™¤å¤±è´¥ï¼Œéœ€è¦æ‰‹åŠ¨åˆ é™¤ï¼Œæ‰‹åŠ¨åˆ é™¤pvåï¼ŒçœŸå®å­˜å‚¨è®¾å¤‡ä¸Šçš„æ•°æ®ä¾ç„¶å­˜åœ¨ã€‚
å¦‚æœä½¿ç”¨Recycleï¼Œé‚£ä¹ˆå½“pvcåˆ é™¤åï¼ŒçœŸå®å­˜å‚¨è®¾å¤‡ä¸Šçš„æ•°æ®ä¼šè¢«åˆ é™¤ï¼ˆrm -rf /thevolume/*ï¼‰ï¼Œpvå¯ä»¥è¢«æ–°çš„pvcç”³é¢†ï¼›å¦‚æœåªåˆ é™¤pvï¼ŒçœŸå®å­˜å‚¨è®¾å¤‡ä¸Šçš„æ•°æ®ä¸ä¼šè¢«åˆ é™¤ã€‚å›æ”¶ç­–ç•¥Recycle å·²è¢«åºŸå¼ƒã€‚å–è€Œä»£ä¹‹çš„å»ºè®®æ–¹æ¡ˆæ˜¯ä½¿ç”¨åŠ¨æ€åˆ¶å¤‡ã€‚
2ã€pvc.yaml
apiVersion: v1kind: PersistentVolumeClaimmetadata:  name: nfs-pvcspec:  accessModes:    - ReadOnlyMany  volumeMode: Filesystem  resources:    requests:      storage: 5Gi  storageClassName: slow  selector:    matchLabels:      release: &quot;stable&quot;    matchExpressions:      - &#123;key: environment, operator: In, values: [dev]&#125;

3ã€pod.yaml
apiVersion: v1kind: Podmetadata:  name: test-podspec:  containers:  - image: busybox    name: busybox    command: [&quot;sleep&quot;, &quot;3600&quot;]    volumeMounts:    - mountPath: /my-nfs-data      name: test-volume  volumes:  - name: test-volume    persistentVolumeClaim:      claimName: nfs-pvc

ä½¿ç”¨storageclasså‚è€ƒæ–‡æ¡£ã€ŠK8Sä¸­å®‰è£…é…ç½®StorageClassã€‹
subPathè¯´æ˜æœ‰æ—¶ï¼Œåœ¨å•ä¸ª Pod ä¸­å…±äº«å·ä»¥ä¾›å¤šæ–¹ä½¿ç”¨æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ volumeMounts.subPath å±æ€§å¯ç”¨äºæŒ‡å®šæ‰€å¼•ç”¨çš„å·å†…çš„å­è·¯å¾„ï¼Œè€Œä¸æ˜¯å…¶æ ¹è·¯å¾„ã€‚
ä¾‹å¦‚ï¼š
apiVersion: v1kind: Podmetadata:  name: my-lamp-sitespec:    containers:    - name: mysql      image: mysql      env:      - name: MYSQL_ROOT_PASSWORD        value: &quot;rootpasswd&quot;      volumeMounts:      - mountPath: /var/lib/mysql        name: site-data        subPath: mysql    - name: php      image: php:7.0-apache      volumeMounts:      - mountPath: /var/www/html        name: site-data        subPath: html    volumes:    - name: site-data      persistentVolumeClaim:        claimName: my-lamp-site-data
ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒPod ä½¿ç”¨åŒä¸€å…±äº«å·ã€‚å…¶ä¸­ PHP åº”ç”¨çš„ä»£ç å’Œç›¸å…³æ•°æ®æ˜ å°„åˆ°å·çš„ html æ–‡ä»¶å¤¹ï¼ŒMySQL æ•°æ®åº“å­˜å‚¨åœ¨å·çš„ mysql æ–‡ä»¶å¤¹ã€‚
ä½¿ç”¨ subPathExpr å­—æ®µå¯ä»¥åŸºäº downward API ç¯å¢ƒå˜é‡æ¥æ„é€  subPath ç›®å½•åã€‚ subPath å’Œ subPathExpr å±æ€§æ˜¯äº’æ–¥çš„ã€‚ä¾‹å¦‚ï¼š
apiVersion: v1kind: Podmetadata:  name: pod1spec:  containers:  - name: container1    env:    - name: POD_NAME      valueFrom:        fieldRef:          apiVersion: v1          fieldPath: metadata.name    image: busybox:1.28    command: [ &quot;sh&quot;, &quot;-c&quot;, &quot;while [ true ]; do echo &#x27;Hello&#x27;; sleep 10; done | tee -a /logs/hello.txt&quot; ]    volumeMounts:    - name: workdir1      mountPath: /logs      # åŒ…è£¹å˜é‡åçš„æ˜¯å°æ‹¬å·ï¼Œè€Œä¸æ˜¯å¤§æ‹¬å·      subPathExpr: $(POD_NAME)  restartPolicy: Never  volumes:  - name: workdir1    hostPath:      path: /var/log/pods
åœ¨è¿™ä¸ªç¤ºï¦µä¸­ï¼ŒPod ä½¿ç”¨ subPathExpr åœ¨ hostPath å· /var/log/pods ä¸­åˆ›å»ºç›®å½• pod1ã€‚ hostPath å·é‡‡ç”¨æ¥è‡ª downwardAPI çš„ Pod åç§°ç”Ÿæˆç›®å½•åã€‚ å®¿ä¸»ç›®å½• /var/log/pods/pod1 è¢«æŒ‚è½½åˆ°å®¹å™¨çš„ /logs ä¸­ã€‚
å¦‚æœæˆ‘ä»¬æƒ³è¦æŒ‚åœ¨ä¸€ä¸ªconfigmapæˆ–è€…secreté…ç½®æ–‡ä»¶åˆ°podï¼Œä½†æ˜¯ä¸æƒ³è¦†ç›–podä¸­çš„æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œè¿™æ—¶ä¹Ÿéœ€è¦ä½¿ç”¨subPathã€‚
spec:  containers:    volumeMounts:    - name: nginx-config      mountPath: /etc/nginx/nginx.conf      subPath: nginx.conf  volumes:  - name: nginx-config    configMap:      name: nginx-config      items:      - key: &quot;nginx.conf&quot;        path: &quot;nginx.conf&quot;

å‚æ•°è¯´æ˜ï¼š

volumes.configMap.items.key è¡¨ç¤ºconfigmapä¸­çš„data key
volumes.configMap.items.path è¡¨ç¤ºè¦å°†keyæ˜ å°„åˆ°çš„æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ï¼ˆç›¸å¯¹äºvolumeï¼‰
containers.volumeMounts.mountPath è¡¨ç¤ºvolumeåœ¨å®¹å™¨ä¸­çš„æŒ‚è½½è·¯å¾„
containers.volumeMounts.subPath è¡¨ç¤ºvolumeçš„å­è·¯å¾„

æœ¬ä¾‹ä¸­ï¼Œconfigmapä½œä¸ºvolumeï¼Œå¯ä»¥è®¤ä¸ºæ˜¯æ ¹ç›®å½•/ï¼Œkey nginx.conf è¢«æ˜ å°„ä¸ºvolumeçš„ç›¸å¯¹è·¯å¾„nginx.confï¼Œç»å¯¹è·¯å¾„å°±æ˜¯ /nginx.confã€‚å®¹å™¨ä¸­æŒ‚è½½volumeï¼Œä½¿ç”¨volumeçš„å­è·¯å¾„nginx.confï¼ˆç»å¯¹è·¯å¾„/nginx.confï¼‰ï¼ŒæŒ‚è½½åˆ°å®¹å™¨ä¸­çš„/etc/nginx/nginx.confã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
        <category>storage</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
        <tag>å­˜å‚¨</tag>
      </tags>
  </entry>
  <entry>
    <title>K8Sä¸­é•œåƒæ‹‰å–å¡ä½é—®é¢˜</title>
    <url>/dev-k8s-image-pull-hang-up/</url>
    <content><![CDATA[é—®é¢˜æè¿°èŠ‚ç‚¹ä¸Šå·²ç»å­˜åœ¨æŸä¸ªé•œåƒäº†ï¼Œä½†æ˜¯æ‹‰å–é•œåƒæ—¶å¡ä½ï¼šPulling image â€¦


é—®é¢˜åŸå› kubeletçš„é…ç½®ä¸­ï¼ŒserializeImagePullsé»˜è®¤å€¼trueï¼Œè¢«å¯ç”¨æ—¶ä¼šé€šçŸ¥ kubelet æ¯æ¬¡ä»…æ‹‰å–ä¸€ä¸ªé•œåƒã€‚å¦‚æœæœ‰ä¸€ä¸ªé•œåƒæ‹‰å–æ—¶å¡ä½ï¼Œé‚£ä¹ˆå…¶ä»–é•œåƒæ‹‰å–æ—¶ä¼šç­‰å¾…å‰ä¸€ä¸ªé•œåƒå®Œæˆï¼Œå› æ­¤ä¹Ÿä¼šå¡ä½ã€‚
å‚è€ƒæ–‡æ¡£Kubelet é…ç½® (v1beta1)
è§£å†³åŠæ³•ä¸€ï¼ˆæ¨èï¼‰é—®é¢˜è§£å†³æ€è·¯ï¼šæ‰¾åˆ°æ‹‰å–é•œåƒå¡ä½çš„podï¼Œè§£å†³å®ƒ
# kubectl get pod -A -owide | grep nodenamekubectl get pod -A -o wide --field-selector spec.nodeName=nodenamekubectl get pod -A --field-selector spec.nodeName=slave8 | egrep -v &quot;Completed|Running&quot;

è§£å†³åŠæ³•äºŒé—®é¢˜è§£å†³æ€è·¯ï¼šæ‹‰å–é•œåƒæ”¹æˆå¹¶è¡Œã€‚
1ã€ä¿®æ”¹kubeleté…ç½®
vim /var/lib/kubelet/config.yaml

æ·»åŠ ï¼š
serializeImagePulls: false

2ã€é‡å¯kubelet
systemctl restart kubelet






]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
      </tags>
  </entry>
  <entry>
    <title>K8Sé—®é¢˜è®°å½•</title>
    <url>/dev-k8s-problem/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡è®°å½•ä½¿ç”¨K8Sè¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ã€è§£å†³åŠæ³•å’Œä¸€äº›åŸç†ã€‚é—®é¢˜æ’æŸ¥æ–¹æ³•å‚è€ƒã€Škubectlå‘½ä»¤â€”â€”æ•…éšœæ’æŸ¥ç¯‡ã€‹ã€‚


kubeletä¸åœé‡å¯é—®é¢˜æè¿°K8Sçš„ä¸€ä¸ªworkerèŠ‚ç‚¹ç£ç›˜ä¸è¶³ï¼Œå…³æœºè¿›è¡Œç£ç›˜æ‰©å®¹ï¼Œç‰©ç†æ‰©å®¹åå¼€æœºï¼Œæ‰§è¡Œesize2fs /dev/vdbï¼Œæ‰©å®¹å®Œæˆã€‚
docker psï¼Œå‘ç°æ²¡æœ‰å®¹å™¨è¢«å¯åŠ¨ã€‚kubectl status kubeletï¼Œå‘ç°kubeletä¸åœè¿›è¡Œé‡å¯ï¼Œæ¯æ¬¡éƒ½å¯åŠ¨å¤±è´¥ã€‚kubectl status dockerï¼Œæ­£å¸¸dockeræ­£å¸¸runningã€‚
é‡å¯æœºå™¨ï¼Œé—®é¢˜ä¾æ—§ã€‚
æ’æŸ¥è§£å†³journalctl -xeu kubelet -rjournalctl -xeu docker -r

kubeletæ—¥å¿—æ²¡æœ‰æŠ¥é”™ï¼Œdockeræ—¥å¿—ä¸­æŠ¥é”™ï¼š
level=error msg=&quot;xxx cleanup: failed to delete container from containerd: no such container


FROM ChatGPTï¼šè¯¥é”™è¯¯æ—¥å¿—è¡¨ç¤º Docker æ¸…ç†å®¹å™¨æ—¶å¤±è´¥ï¼ŒåŸå› æ˜¯æ²¡æœ‰æ‰¾åˆ°ç›¸åº”çš„å®¹å™¨ã€‚


å¯èƒ½åŸå› åŠè§£å†³æ–¹æ³•ï¼š

å®¹å™¨ä¸å­˜åœ¨ï¼šæ£€æŸ¥å®¹å™¨æ˜¯å¦å·²è¢«åˆ é™¤æˆ–è€…å·²ç»é€€å‡ºï¼Œå¦‚æœæ˜¯åˆ™ä¸éœ€è¦å¤„ç†è¯¥é”™è¯¯ã€‚
å®¹å™¨æ­£åœ¨è¿è¡Œï¼šå¦‚æœå®¹å™¨æ­£åœ¨è¿è¡Œï¼Œå¯èƒ½æ˜¯ç”±äºæ­£åœ¨æ‰§è¡ŒæŸäº›ä»»åŠ¡è€Œæ— æ³•æ¸…ç†ã€‚æ­¤æ—¶å¯ä»¥å°è¯•åœæ­¢å®¹å™¨åå†è¿›è¡Œæ¸…ç†ã€‚
Docker daemon å‡ºç°æ•…éšœï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒDocker daemon å¯èƒ½ä¼šå‡ºç°æ•…éšœå¯¼è‡´æ— æ³•æ¸…ç†å®¹å™¨ã€‚å°è¯•é‡å¯ Docker daemon å¯èƒ½ä¼šè§£å†³é—®é¢˜ã€‚
æ“ä½œç³»ç»Ÿå‡ºç°æ•…éšœï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ“ä½œç³»ç»Ÿå¯èƒ½ä¼šå‡ºç°æ•…éšœå¯¼è‡´æ— æ³•æ¸…ç†å®¹å™¨ã€‚å°è¯•é‡å¯æ“ä½œç³»ç»Ÿå¯èƒ½ä¼šè§£å†³é—®é¢˜ã€‚


è§£å†³åŠæ³•ï¼šæ‰‹åŠ¨æ¸…ç†å®¹å™¨ï¼Œç„¶åé‡å¯æœºå™¨ã€‚
docker container prunereboot

æ–°å¢èŠ‚ç‚¹flannelå¯åŠ¨å¤±è´¥é—®é¢˜æè¿°K8Sé›†ç¾¤æ–°å¢äº†ä¸€ä¸ªèŠ‚ç‚¹ï¼Œflannel podè‡ªåŠ¨è°ƒåº¦ä¸Šå»äº†ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å¯åŠ¨æˆåŠŸã€‚æŸ¥çœ‹kubeletæ—¥å¿—ï¼ŒæŠ¥é”™ä¸ºï¼š[failed to find plugin â€œflannelâ€ in path [/opt/cni/bin]]W0523 20:49:19.343813   12586 cni.go:239] Unable to update cni config: no valid networks found in /etc/cni/net.d
è§£å†³åŠæ³•ä»å…¶ä»–æ­£å¸¸èŠ‚ç‚¹æ‹·è´ä¸€ä¸ªflannelæ–‡ä»¶åˆ°è¿™ä¸ªé—®é¢˜èŠ‚ç‚¹ä¸Šçš„ /opt/cni/bin ç›®å½•ã€‚
èŠ‚ç‚¹ä¸Šçš„podè¢«é©±é€é—®é¢˜æè¿°å› ä¸ºç£ç›˜å‹åŠ›ï¼ŒèŠ‚ç‚¹ä¸Šçš„podè¢«é©±é€äº†ã€‚ä½†æ˜¯ï¼Œå®é™…ä¸ŠèŠ‚ç‚¹è¿˜æœ‰å¾ˆå¤šç£ç›˜ç©ºé—´ã€‚
è§£å†³åŠæ³•1ã€æŸ¥æ‰¾kubeleté…ç½®æ–‡ä»¶è·¯å¾„
systemctl status kubelet -l

æ‰¾åˆ°Drop-Iné…ç½®æ–‡ä»¶è·¯å¾„ï¼Œä¸€èˆ¬ä¸ºï¼š/usr/lib/systemd/system/kubelet.service.d/10-kubeadm.confæˆ–è€…ï¼š/etc/systemd/system/kubelet.service.d/10-kubeadm.conf
2ã€ä¿®æ”¹kubeleté…ç½®æ–‡ä»¶é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š
KUBELET_EXTRA_ARGS=&quot;--eviction-hard=memory.available&lt;100Mi,nodefs.available&lt;5%,imagefs.available&lt;15%,nodefs.inodesFree&lt;5%&quot;

3ã€é‡å¯kubelet
systemctl restart kubelet

æ‰©å±•é˜…è¯»èŠ‚ç‚¹å‹åŠ›é©±é€æ˜¯ kubelet ä¸»åŠ¨ç»ˆæ­¢ Pod ä»¥å›æ”¶èŠ‚ç‚¹ä¸Šèµ„æºçš„è¿‡ç¨‹ã€‚
kubelet ç›‘æ§é›†ç¾¤èŠ‚ç‚¹çš„å†…å­˜ã€ç£ç›˜ç©ºé—´å’Œæ–‡ä»¶ç³»ç»Ÿçš„ inode ç­‰èµ„æºã€‚ å½“è¿™äº›èµ„æºä¸­çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªè¾¾åˆ°ç‰¹å®šçš„æ¶ˆè€—æ°´å¹³ï¼Œ kubelet å¯ä»¥ä¸»åŠ¨åœ°ä½¿èŠ‚ç‚¹ä¸Šä¸€ä¸ªæˆ–è€…å¤šä¸ª Pod å¤±æ•ˆï¼Œä»¥å›æ”¶èµ„æºé˜²æ­¢é¥¥é¥¿ã€‚
åœ¨èŠ‚ç‚¹å‹åŠ›é©±é€æœŸé—´ï¼Œkubelet å°†æ‰€é€‰ Pod çš„ PodPhase è®¾ç½®ä¸º Failedã€‚è¿™å°†ç»ˆæ­¢ Podã€‚
æˆ‘ä»¬å¯ä»¥ä¸º kubelet æŒ‡å®šè‡ªå®šä¹‰é©±é€æ¡ä»¶ï¼Œä»¥ä¾¿åœ¨ä½œå‡ºé©±é€å†³å®šæ—¶ä½¿ç”¨ã€‚é©±é€æ¡ä»¶åˆ†ä¸ºè½¯é©±é€æ¡ä»¶å’Œç¡¬é©±é€æ¡ä»¶ã€‚è½¯é©±é€æ¡ä»¶å°†é©±é€æ¡ä»¶ä¸ç®¡ç†å‘˜æ‰€å¿…é¡»æŒ‡å®šçš„å®½é™æœŸé…å¯¹ã€‚ åœ¨è¶…è¿‡å®½é™æœŸä¹‹å‰ï¼Œkubelet ä¸ä¼šé©±é€ Podã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šçš„å®½é™æœŸï¼Œkubelet ä¼šåœ¨å¯åŠ¨æ—¶è¿”å›é”™è¯¯ã€‚ç¡¬é©±é€æ¡ä»¶æ²¡æœ‰å®½é™æœŸã€‚å½“è¾¾åˆ°ç¡¬é©±é€æ¡ä»¶æ—¶ï¼Œ kubelet ä¼šç«‹å³æ€æ­» podï¼Œè€Œä¸ä¼šæ­£å¸¸ç»ˆæ­¢ä»¥å›æ”¶ç´§ç¼ºçš„èµ„æºã€‚
kubelet å…·æœ‰ä»¥ä¸‹é»˜è®¤ç¡¬é©±é€æ¡ä»¶ï¼š

memory.available&lt;100Mi
nodefs.available&lt;10%
imagefs.available&lt;15%
nodefs.inodesFree&lt;5%ï¼ˆLinux èŠ‚ç‚¹ï¼‰

å‚è€ƒæ–‡æ¡£ï¼šèŠ‚ç‚¹å‹åŠ›é©±é€
æœåŠ¡å“åº”å¾ˆæ…¢é—®é¢˜æè¿°æŸä¸ªæœåŠ¡çš„Podå“åº”å¾ˆæ…¢ï¼Œå‘ç°å®ƒçš„requestsèµ„æºé…ç½®å¾ˆä½ï¼Œlimitsèµ„æºé…ç½®å¾ˆé«˜ã€‚è°ƒå¤§requestsåå“åº”é€Ÿåº¦æ˜æ˜¾å˜å¿«äº†ï¼Œæ˜¯ä»€ä¹ˆåŸç†ï¼Ÿ
åŸç†è§£ærequestsæ˜¯é•¿æœŸå…è®¸ï¼Œä¿è¯èµ„æºï¼›limitsæ˜¯ä¸´æ—¶å…è®¸ï¼Œå¹¶ä¸ä¿è¯èµ„æºã€‚ä¸Šé¢çš„é—®é¢˜ä¸­ï¼Œå› ä¸ºrequestsé…ç½®çš„å¾ˆä½ï¼Œæ‰€ä»¥åªèƒ½ä¿è¯requestsä¸­é…ç½®çš„èµ„æºï¼Œå¹¶ä¸èƒ½ä¿è¯ç”¨åˆ°ç”¨åˆ°limitsä¸­é…ç½®çš„èµ„æºã€‚
æ‰©å±•é˜…è¯»â€œrequestsâ€å’Œâ€limitsâ€åœ¨Kubernetesä¸­çš„åŸç†æ˜¯é€šè¿‡Linuxçš„cgroupsï¼ˆcontrol groupsï¼‰æ¥å®ç°èµ„æºç®¡ç†å’Œéš”ç¦»ã€‚cgroupsæ˜¯Linuxå†…æ ¸æä¾›çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒå…è®¸å¯¹è¿›ç¨‹ç»„è¿›è¡Œèµ„æºé™åˆ¶ã€ä¼˜å…ˆçº§è°ƒæ•´å’Œç»Ÿè®¡ã€‚Kubernetesåˆ©ç”¨cgroupså°†èµ„æºé™åˆ¶å’Œéš”ç¦»åº”ç”¨åˆ°å®¹å™¨çº§åˆ«ã€‚
â€œrequestsâ€å®šä¹‰äº†å®¹å™¨æ‰€éœ€çš„æœ€å°èµ„æºæ•°é‡ã€‚Kubernetesè°ƒåº¦å™¨ä½¿ç”¨è¿™ä¸ªå€¼æ¥å†³å®šåœ¨å“ªä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œå®¹å™¨ï¼Œå¹¶ç¡®ä¿èŠ‚ç‚¹ä¸Šæœ‰è¶³å¤Ÿçš„èµ„æºæ»¡è¶³å®¹å™¨çš„è¯·æ±‚ã€‚â€requestsâ€çš„ç›®çš„æ˜¯ä¸ºäº†ç¡®ä¿å®¹å™¨èƒ½å¤Ÿæ­£å¸¸è¿è¡Œè€Œä¸ä¼šé‡åˆ°èµ„æºä¸è¶³çš„é—®é¢˜ã€‚
è€Œâ€limitsâ€å®šä¹‰äº†å®¹å™¨å…è®¸ä½¿ç”¨çš„èµ„æºçš„ä¸Šé™ã€‚Kubernetesä½¿ç”¨è¿™ä¸ªå€¼æ¥ç›‘æ§å®¹å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µï¼Œå¹¶ä¿æŠ¤èŠ‚ç‚¹çš„ç¨³å®šæ€§ã€‚å¦‚æœå®¹å™¨è¯•å›¾ä½¿ç”¨è¶…è¿‡å…¶é™åˆ¶çš„èµ„æºé‡ï¼ŒKubernetesä¼šé‡‡å–ç›¸åº”çš„æªæ–½ï¼Œå¦‚ç»ˆæ­¢å®¹å™¨æˆ–é‡æ–°è°ƒåº¦åˆ°å…¶ä»–èŠ‚ç‚¹ã€‚â€limitsâ€çš„ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢å®¹å™¨ä½¿ç”¨è¿‡å¤šçš„èµ„æºï¼Œä»è€Œä¿æŠ¤æ•´ä¸ªé›†ç¾¤çš„ç¨³å®šæ€§ã€‚
å°½ç®¡å¯ä»¥åœ¨å®¹å™¨ä¸­è®¾ç½®è¶…è¿‡â€requestsâ€çš„èµ„æºä½¿ç”¨é‡ï¼Œä½†è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªæ¨èçš„åšæ³•ã€‚å½“å®¹å™¨è¶…è¿‡å…¶â€requestsâ€çš„èµ„æºä½¿ç”¨é‡æ—¶ï¼Œå®ƒå¯èƒ½ä¼šå½±å“å…¶ä»–å®¹å™¨çš„æ€§èƒ½ï¼Œå¯¼è‡´èµ„æºç«äº‰å’Œä¸ç¨³å®šçš„æƒ…å†µã€‚è¶…è¿‡â€requestsâ€çš„ä½¿ç”¨é‡åªæ˜¯æš‚æ—¶å…è®¸ï¼ŒKubernetesä¼šå°½åŠ›æ»¡è¶³å®¹å™¨çš„éœ€æ±‚ï¼Œä½†ä¸ä¿è¯æŒç»­æä¾›é¢å¤–çš„èµ„æºã€‚
èŠ‚ç‚¹èµ„æºå……è¶³ä½†æ˜¯æ— æ³•è°ƒåº¦é—®é¢˜æè¿°æŸä¸ªèŠ‚ç‚¹CPUã€å†…å­˜èµ„æºå……è¶³ï¼Œä¹Ÿæ²¡æœ‰æ±¡ç‚¹å’Œäº²å’Œæ€§é…ç½®ï¼Œä½†æ˜¯Podæ— æ³•è°ƒåº¦åˆ°ä¸Šé¢ã€‚
æ’æŸ¥è§£å†³é™¤äº†æ£€æŸ¥èµ„æºä¹‹å¤–ï¼Œå†æ£€æŸ¥ä¸‹èŠ‚ç‚¹ä¸ŠPodæ•°é‡çš„é™åˆ¶ã€‚
kubectl describe node node01

Non-terminated Pods è¦å°äº Allocatable.pods ï¼Œå¦‚æœPodæ•°é‡å·²ç»è¾¾åˆ°äº†èŠ‚ç‚¹ä¸ŠPodæ•°é‡é™åˆ¶ï¼Œé‚£ä¹ˆéœ€è¦è°ƒå¤§è¿™ä¸ªä¸Šé™ã€‚
vim /var/lib/kubelet/config.yaml # maxPodsé»˜è®¤110ï¼Œè°ƒå¤§å®ƒsystemctl restart kubelet

kubectl topå‘½ä»¤æ‰§è¡ŒæŠ¥é”™é—®é¢˜æè¿°æ‰§è¡Œkubectl top podï¼ŒæŠ¥é”™ï¼šerror: Metrics API not available 
åœ¨Kubernetes Dashboardä¸Šï¼Œä¹Ÿå‘ç°Podçš„CPUä½¿ç”¨ç‡å’Œå†…å­˜ä½¿ç”¨éƒ½æ— æ³•æ˜¾ç¤ºã€‚
é—®é¢˜åˆ†æå‚è€ƒkubectl top node error: metrics not available yetå¯çŸ¥ï¼Œä¹‹æ‰€ä»¥å‡ºç°ä¸Šé¢çš„é—®é¢˜ï¼Œæ˜¯å› ä¸ºK8Sé›†ç¾¤æ²¡æœ‰å®‰è£… metrics-server ã€‚
è§£å†³åŠæ³•è§£å†³åŠæ³•ï¼šå®‰è£… metrics-server ã€‚
é€šç”¨å®‰è£…æ–¹æ³•ï¼š
wget https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yamlkubectl apply -f components.yaml

å¦‚æœæ˜¯sealoså®‰è£…çš„K8Sé›†ç¾¤ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ metrics-server é›†ç¾¤é•œåƒå®‰è£…ã€‚
sealos run labring/metrics-server:v0.6.2 --cmd=&quot;\    helm upgrade -i metrics-server charts/metrics-server \    -n kube-system \    -f /root/metrics-server/values.yaml&quot;

å…¶ä¸­ /root/metrics-server/values.yaml å†…å®¹ä¸ºï¼š
defaultArgs:  - --cert-dir=/tmp  - --kubelet-preferred-address-types=InternalIP  - --kubelet-use-node-status-port  - --metric-resolution=15s  - --kubelet-insecure-tls





]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>kubectl</tag>
        <tag>sealos</tag>
      </tags>
  </entry>
  <entry>
    <title>K8Sæ•…éšœæ’æŸ¥å¸¸ç”¨å‘½ä»¤</title>
    <url>/dev-k8s-trouble-shooting-command/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡è®°å½•K8Sæ•…éšœæ’æŸ¥å¸¸ç”¨å‘½ä»¤ï¼Œå¤‡å¿˜ã€‚


æŸ¥çœ‹èµ„æºå¯¹è±¡è¯¦æƒ…æŸ¥æ‰¾namespaceä¸‹æ‰€æœ‰èµ„æºkubectl api-resources --verbs=list --namespaced -o name | \    xargs -n 1 kubectl get --show-kind --ignore-not-found -n &lt;your-namespace&gt;

æŸ¥çœ‹Podè¯¦ç»†ä¿¡æ¯kubectl get pods $pod_name -n $namespace -oyamlkubectl describe pods $pod_name -n $namespace 

æŸ¥çœ‹èŠ‚ç‚¹è¯¦æƒ…kubectl describe node $node_name

æŸ¥çœ‹Deploymentè¯¦æƒ…kubectl get deployment $controller_name -n $namespace -oyamlkubectl describe deployment $controller_name -n $namespace

æŸ¥çœ‹Serviceè¯¦æƒ…kubectl get service $service_name -n $namespacekubectl get service $service_name -n $namespace -oyaml

æŸ¥çœ‹endpointsèµ„æºï¼Œserviceé€‰æ‹©åˆ°äº†å“ªäº›podå’Œç«¯å£  
kubectl get endpoints $service_name

èµ„æºç”¨é‡ç»Ÿè®¡æŸ¥çœ‹Nodeèµ„æºä½¿ç”¨kubectl top nodeskubectl top nodes --sort-by=&#x27;cpu&#x27;kubectl top nodes --sort-by=&#x27;memory&#x27;

æŸ¥çœ‹Podèµ„æºä½¿ç”¨kubectl top pods -Akubectl top pods -A --sort-by=&#x27;cpu&#x27;kubectl top pods -A --sort-by=&#x27;memory&#x27;

æŸ¥çœ‹Podèµ„æºç”³è¯·kubectl get po -A \    -o custom-columns=&quot;name:metadata.name,namespace:metadata.namespace,requests-cpu:spec.containers[*].resources.requests.cpu,requests-memory:spec.containers[*].resources.requests.memory&quot;kubectl get po -A --field-selector status.phase==Running \    -o custom-columns=&quot;name:metadata.name,namespace:metadata.namespace,requests-cpu:spec.containers[*].resources.requests.cpu,requests-memory:spec.containers[*].resources.requests.memory&quot;kubectl get po -A --field-selector status.phase==Running,spec.nodeName=worker0 \    -o custom-columns=&quot;name:metadata.name,namespace:metadata.namespace,requests-cpu:spec.containers[*].resources.requests.cpu,requests-memory:spec.containers[*].resources.requests.memory&quot;kubectl get po -A \    -o=jsonpath=&quot;&#123;range .items[*]&#125;&#123;.metadata.namespace&#125;:&#123;.metadata.name&#125;&#123;&#x27;\n&#x27;&#125;&#123;range .spec.containers[*]&#125;  &#123;.name&#125;:&#123;.resources.requests.cpu&#125;&#123;&#x27;\n&#x27;&#125;&#123;end&#125;&#123;&#x27;\n&#x27;&#125;&#123;end&#125;&quot;kubectl get po -A \    -o=jsonpath=&quot;&#123;range .items[*]&#125;&#123;.metadata.namespace&#125;:&#123;.metadata.name&#125;&#123;&#x27;\n&#x27;&#125;&#123;range .spec.containers[*]&#125;  &#123;.name&#125;:&#123;.resources.requests.memory&#125;&#123;&#x27;\n&#x27;&#125;&#123;end&#125;&#123;&#x27;\n&#x27;&#125;&#123;end&#125;&quot;

æŸ¥çœ‹Podèµ„æºé™åˆ¶kubectl get po -A \    -o custom-columns=&quot;name:metadata.name,namespace:metadata.namespace,limits-cpu:spec.containers[*].resources.limits.cpu,limits-memory:spec.containers[*].resources.limits.memory&quot;kubectl get po -A --field-selector status.phase==Running \    -o custom-columns=&quot;name:metadata.name,namespace:metadata.namespace,limits-cpu:spec.containers[*].resources.limits.cpu,limits-memory:spec.containers[*].resources.limits.memory&quot;kubectl get po -A --field-selector status.phase==Running,spec.nodeName=worker0 \    -o custom-columns=&quot;name:metadata.name,namespace:metadata.namespace,limits-cpu:spec.containers[*].resources.limits.cpu,limits-memory:spec.containers[*].resources.limits.memory&quot;kubectl get po -A \    -o=jsonpath=&quot;&#123;range .items[*]&#125;&#123;.metadata.namespace&#125;:&#123;.metadata.name&#125;&#123;&#x27;\n&#x27;&#125;&#123;range .spec.containers[*]&#125;  &#123;.name&#125;:&#123;.resources.limits.cpu&#125;&#123;&#x27;\n&#x27;&#125;&#123;end&#125;&#123;&#x27;\n&#x27;&#125;&#123;end&#125;&quot;kubectl get po -A \    -o=jsonpath=&quot;&#123;range .items[*]&#125;&#123;.metadata.namespace&#125;:&#123;.metadata.name&#125;&#123;&#x27;\n&#x27;&#125;&#123;range .spec.containers[*]&#125;  &#123;.name&#125;:&#123;.resources.limits.memory&#125;&#123;&#x27;\n&#x27;&#125;&#123;end&#125;&#123;&#x27;\n&#x27;&#125;&#123;end&#125;&quot;

Podæ“ä½œæŸ¥çœ‹å®¹å™¨æ—¥å¿—æŸ¥çœ‹å®¹å™¨æ ‡å‡†è¾“å‡ºæ—¥å¿—
kubectl logs $pod_name -n $namespace kubectl logs $pod_name -c $container_name -n $namespacekubectl logs --tail=100 $pod_name -c $container_name -n $namespacekubectl logs -f $pod_name -c $container_name -n $namespacekubectl logs --tail=100 -l app=test -n $namespace

æŸ¥çœ‹crashedå®¹å™¨æ ‡å‡†è¾“å‡ºæ—¥å¿—
kubectl logs --previous $pod_name -c $container_name -n $namespace 

æŸ¥çœ‹å®¹å™¨å†…éƒ¨æ—¥å¿—kubectl exec $pod_name -n $namespace -- cat /var/log/cassandra/system.logkubectl exec $pod_name -c $container_name -n $namespace -- cat /var/log/cassandra/system.log

æ‰§è¡Œå‘½ä»¤1ã€ç™»å½•å®¹å™¨
kubectl exec -it pod-name /bin/bashkubectl exec -it pod-name -c container-name /bin/bashkubectl exec -it pod-name -c container-name sh

2ã€ç›´æ¥æ‰§è¡Œå‘½ä»¤
kubectl exec pod-name envkubectl exec pod-name -- envkubectl exec pod-name -it -- envkubectl exec -n default pod-name -it -- env# å‘½ä»¤å¸¦å‚æ•°æ—¶å¿…é¡»åŠ åŒæ¨ªçº¿kubectl exec pod-name -- sh -c &#x27;echo $&#123;LANG&#125;&#x27;

æ‹·è´æ–‡ä»¶æ‹·è´podå†…å®¹åˆ°å®¿ä¸»æœº
kubectl cp $podname:/tmp/$filename .

æ‹·è´å®¿ä¸»æœºå†…å®¹åˆ°pod
kubectl cp $filename $podname:/tmp/

å‰ææ˜¯å®¹å™¨é‡Œéœ€è¦æœ‰tarå‘½ä»¤ï¼Œå¦åˆ™æ‰§è¡Œä¼šæŠ¥é”™ï¼š
OCI runtime exec failed: exec failed: unable to start container process: exec: &quot;tar&quot;: executable file not found in $PATH: unknowncommand terminated with exit code 126

éªŒè¯æµ‹è¯•Podæµ‹è¯•ä¸ºäº†éªŒè¯dnsè§£ææ˜¯å¦æ­£ç¡®ã€serviceè®¿é—®æ˜¯å¦æ­£å¸¸ï¼Œæœ€å¥½çš„æ–¹æ³•å°±æ˜¯åœ¨k8sé›†ç¾¤ä¸­å¯åŠ¨ä¸€ä¸ªpodè¿›è¡Œæµ‹è¯•ã€‚
#kubectl run test --image=busybox:1.25 --command sleep 3600kubectl run test --image=alpine:3.7.3 --command sleep 3600kubectl run test --image=debian:buster --command sleep 3600

æ³¨æ„ï¼šç”¨äºæµ‹è¯•çš„å®¹å™¨é•œåƒä¸è¦ä½¿ç”¨busyboxé•œåƒï¼Œæµ‹è¯•ç»“æœå¯èƒ½ä¸å‡†ç¡®ã€‚æ¯”å¦‚ï¼Œä½¿ç”¨æœ€æ–°ç‰ˆbusyboxçš„nslookupè§£æå¯èƒ½è§£æå¤±è´¥ï¼Œä½†æ˜¯æ¢ä¸ªä½ç‰ˆæœ¬çš„busyboxå¯èƒ½å°±æ­£å¸¸äº†ï¼›ä½¿ç”¨telnetçš„æµ‹è¯•ç«¯å£æç¤ºConnection closed by foreign hostï¼Œncæµ‹è¯•ä¹Ÿæ˜¯æ²¡æœ‰ç»“æœï¼Œä½†æ˜¯æ¢æˆå…¶ä»–é•œåƒå°±å¯ä»¥æ­£å¸¸è¿æ¥ã€‚
è‡ªå®šä¹‰æµ‹è¯•é•œåƒ1ã€å‡†å¤‡Dockerfile
FROM debian:busterRUN sed -i &#x27;s#http://deb.debian.org#http://mirrors.tuna.tsinghua.edu.cn#g&#x27; /etc/apt/sources.listRUN sed -i &#x27;s#http://security.debian.org/debian-security#http://mirrors.tuna.tsinghua.edu.cn/debian-security#g&#x27; /etc/apt/sources.listRUN apt update &amp;&amp; apt install -y telnet netcat curl

2ã€æ„å»ºé•œåƒ&amp;ä¸Šä¼ é•œåƒ
docker build -t voidking/debian:buster .docker push voidking/debian:buster

3ã€å¯åŠ¨æµ‹è¯•pod
kubectl run test --image=voidking/debian:buster --command sleep 3600

æŸ¥çœ‹IPèŒƒå›´service cidræ€æ ·æŸ¥çœ‹ä¸€ä¸ªk8sé›†ç¾¤çš„service ipèŒƒå›´ï¼Ÿ
kubeadm config view | grep Subnetkubectl get pods -n kube-system kube-apiserver-master -oyaml | grep service-cluster-ip-range

pod cidræ€æ ·æŸ¥çœ‹ä¸€ä¸ªk8sé›†ç¾¤çš„pod ipèŒƒå›´ï¼Ÿ
kubeadm config view | grep Subnetkubectl cluster-info dump | grep -i cidr

å¦‚æœä¸Šé¢ä¸¤ä¸ªæ–¹æ³•éƒ½æ‰¾ä¸åˆ°ï¼Œé‚£ä¹ˆè¿˜å¯ä»¥é€šè¿‡ç½‘ç»œç»„ä»¶çš„æ—¥å¿—æ¥æŸ¥çœ‹ï¼Œä»¥weaveä¸ºä¾‹ã€‚
docker ps | grep weavedocker logs &lt;weave-container-id&gt; | grep ipalloc-range

é›†ç¾¤æ“ä½œæŸ¥çœ‹é›†ç¾¤ä¿¡æ¯kubectl cluster-infokubectl cluster-info dump

æŸ¥çœ‹é›†ç¾¤çŠ¶æ€kubectl get cskubectl get componentstatuses

NAME                 STATUS      MESSAGE                                                                                       ERRORcontroller-manager   Unhealthy   Get &quot;http://127.0.0.1:10252/healthz&quot;: dial tcp 127.0.0.1:10252: connect: connection refusedscheduler            Unhealthy   Get &quot;http://127.0.0.1:10251/healthz&quot;: dial tcp 127.0.0.1:10251: connect: connection refusedetcd-0               Healthy     &#123;&quot;health&quot;:&quot;true&quot;&#125;
å¦‚æœçœ‹åˆ°ä¸Šé¢çš„ä¿¡æ¯ï¼Œä¸è¦ç´§å¼ ã€‚é€šè¿‡kubeadmå®‰è£…çš„k8sé›†ç¾¤ï¼Œéƒ½æ˜¯è¿™æ ·ï¼Œå¯ä»¥å¿½ç•¥ã€‚å¦‚æœéè¦è§£å†³ï¼Œé‚£ä¹ˆå¯ä»¥ä¿®æ”¹kube-controller-manager.yamlå’Œkube-scheduler.yamlä¸­çš„commandå¯åŠ¨å‚æ•°ï¼Œæ·»åŠ addresså‚æ•°ã€‚
spec:  containers:  - command:    - kube-scheduler    - --authentication-kubeconfig=/etc/kubernetes/scheduler.conf    - --authorization-kubeconfig=/etc/kubernetes/scheduler.conf    - --bind-address=127.0.0.1    - --kubeconfig=/etc/kubernetes/scheduler.conf    - --leader-elect=true    - --port=0    - --address=127.0.0.1

æŸ¥çœ‹é›†ç¾¤äº‹ä»¶kubectl get ev




]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
        <tag>alpine</tag>
        <tag>busybox</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>kubectl</tag>
        <tag>debian</tag>
      </tags>
  </entry>
  <entry>
    <title>K8Sæ•…éšœæ’æŸ¥æ‰‹å†Œ</title>
    <url>/dev-k8s-trouble-shooting/</url>
    <content><![CDATA[æ•…éšœæ’æŸ¥æ•´ä½“æ€è·¯æ•…éšœæ’æŸ¥ä¸‰æ­¥èµ°ï¼š1ã€åˆ†ç±»ã€‚æ•…éšœæ’æŸ¥çš„ç¬¬ä¸€æ­¥æ˜¯åˆ†ç±»ï¼Œç¼©å°é—®é¢˜èŒƒå›´ã€‚2ã€å¥—è·¯ã€‚ä¸åŒé—®é¢˜ï¼Œæœ‰ä¸åŒçš„æ ‡å‡†æ’æŸ¥æ–¹æ³•ï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒé˜¿é‡Œäº‘ACK - æ•…éšœæ’é™¤ã€‚3ã€å‘æ•£ã€‚ç™¾åº¦+è°·æ­Œ+ChatGPTï¼Œæœå¯»å„ç§å¯èƒ½çš„è§£å†³åŠæ³•å¹¶è¿›è¡Œå°è¯•ã€‚
æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ æ•…éšœæ’æŸ¥çš„å¥—è·¯ï¼ˆæ ‡å‡†æµç¨‹ï¼‰ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

é˜¿é‡Œäº‘ACK - æ•…éšœæ’é™¤
é˜¿é‡Œäº‘ACK - èŠ‚ç‚¹å¼‚å¸¸é—®é¢˜æ’æŸ¥
è…¾è®¯äº‘TKE - æ•…éšœå¤„ç†
è…¾è®¯äº‘TKE - Pod å¼‚å¸¸æ’æŸ¥æ¦‚è¿°
åº”ç”¨æ•…éšœæ’æŸ¥
Kubernetes ç½‘ç»œå¼‚å¸¸åˆ†ç±»åŠæ’é”™æŒ‡å—
k8så®è·µæŒ‡å—-æ’é”™æ¡ˆä¾‹-åˆ†æ ExitCode å®šä½ Pod å¼‚å¸¸é€€å‡ºåŸå› 



é—®é¢˜åˆ†ç±»K8Sä¸­çš„é—®é¢˜å¯ä»¥åˆ†ä¸ºä¸‹é¢å‡ ç±»ï¼š

èŠ‚ç‚¹å¼‚å¸¸
Podå¼‚å¸¸
DNSè§£æå¼‚å¸¸
Serviceå¼‚å¸¸
Ingresså¼‚å¸¸
å­˜å‚¨å¼‚å¸¸
ç»„ä»¶å¼‚å¸¸

èŠ‚ç‚¹å¼‚å¸¸é—®é¢˜æ’æŸ¥æ’æŸ¥æ€è·¯
æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€kubectl describe nodes $nodename

æŸ¥çœ‹ntpsystemctl status chronydsystemctl restart chronydjournalctl -u chronyd

é‡å¯kubeletå’Œdockersystemctl stop kubeletsystemctl stop dockersystemctl stop docker.socketsystemctl stop containerdsystemctl daemon-reloadsystemctl start containerdsystemctl start dockersystemctl start kubelet

PLEGé—®é¢˜Podç”Ÿå‘½å‘¨æœŸäº‹ä»¶ç”Ÿæˆå™¨PLEGï¼ˆPod Lifecycle Event Generatorï¼‰ä¼šè®°å½•Podç”Ÿå‘½å‘¨æœŸä¸­çš„å„ç§äº‹ä»¶ï¼Œå¦‚å®¹å™¨çš„å¯åŠ¨ã€ç»ˆæ­¢ç­‰ã€‚PLEG is not healthy å¼‚å¸¸é€šå¸¸æ˜¯ç”±äºèŠ‚ç‚¹ä¸Šçš„è¿è¡Œæ—¶è¿›ç¨‹å¼‚å¸¸æˆ–è€…èŠ‚ç‚¹Systemdç‰ˆæœ¬ç¼ºé™·å¯¼è‡´ã€‚
Podå¼‚å¸¸é—®é¢˜æ’æŸ¥æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚
DNSè§£æå¼‚å¸¸é—®é¢˜æ’æŸ¥æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚
Serviceå¼‚å¸¸é—®é¢˜æ’æŸ¥æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚
Ingresså¼‚å¸¸é—®é¢˜æ’æŸ¥æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚
å­˜å‚¨å¼‚å¸¸é—®é¢˜æ’æŸ¥æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚
ç»„ä»¶å¼‚å¸¸é—®é¢˜æ’æŸ¥æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
        <tag>alpine</tag>
        <tag>busybox</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>kubectl</tag>
        <tag>debian</tag>
      </tags>
  </entry>
  <entry>
    <title>K8Sä¸­çš„è°ƒåº¦</title>
    <url>/dev-k8s-schedule/</url>
    <content><![CDATA[è°ƒåº¦æ˜¯å•¥ï¼Ÿåœ¨ K8S ä¸­ï¼Œè°ƒåº¦ æ˜¯æŒ‡å°† Pod æ”¾ç½®åˆ°åˆé€‚çš„èŠ‚ç‚¹ä¸Šï¼Œä»¥ä¾¿å¯¹åº”èŠ‚ç‚¹ä¸Šçš„ Kubelet èƒ½å¤Ÿè¿è¡Œè¿™äº› Podã€‚è°ƒåº¦å™¨é€šè¿‡ K8S çš„ç›‘æµ‹ï¼ˆWatchï¼‰æœºåˆ¶æ¥å‘ç°é›†ç¾¤ä¸­æ–°åˆ›å»ºä¸”å°šæœªè¢«è°ƒåº¦åˆ°èŠ‚ç‚¹ä¸Šçš„ Podï¼ŒæŠŠå®ƒè°ƒåº¦åˆ°ä¸€ä¸ªåˆé€‚çš„èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚K8Sè°ƒåº¦åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šè¿‡æ»¤å’Œæ‰“åˆ†ã€‚è¿‡æ»¤é˜¶æ®µä¼šå°†æ‰€æœ‰æ»¡è¶³ Pod è°ƒåº¦éœ€æ±‚çš„èŠ‚ç‚¹é€‰å‡ºæ¥ï¼›åœ¨æ‰“åˆ†é˜¶æ®µä¼šä¸º Pod ä»æ‰€æœ‰å¯è°ƒåº¦èŠ‚ç‚¹ä¸­é€‰å–ä¸€ä¸ªæœ€åˆé€‚çš„èŠ‚ç‚¹ã€‚æœ€åï¼Œä¼šå°†podè°ƒåº¦åˆ°å¾—åˆ†æœ€é«˜çš„èŠ‚ç‚¹ä¸Šã€‚
æˆ‘ä»¬å¯ä»¥çº¦æŸä¸€ä¸ª Pod é™åˆ¶å…¶åªèƒ½åœ¨ç‰¹å®šçš„èŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œæˆ–ä¼˜å…ˆåœ¨ç‰¹å®šçš„èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚å…·ä½“æ–¹æ³•åŒ…æ‹¬ï¼š

nodeName
labelå’ŒnodeSelector
äº²å’Œæ€§ä¸åäº²å’Œæ€§
Pod æ‹“æ‰‘åˆ†å¸ƒçº¦æŸ

æˆ‘ä»¬ä¹Ÿå¯ä»¥çº¦æŸä¸€äº› Pod ä¸èƒ½åœ¨ç‰¹å®šçš„èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚å…·ä½“æ–¹æ³•æ˜¯ä½¿ç”¨æ±¡ç‚¹ï¼ˆtaintï¼‰å’Œå®¹å¿ï¼ˆtolerationsï¼‰ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Kubernetes è°ƒåº¦å™¨
å°† Pod æŒ‡æ´¾ç»™èŠ‚ç‚¹
Pod æ‹“æ‰‘åˆ†å¸ƒçº¦æŸ
æ±¡ç‚¹å’Œå®¹å¿åº¦



è°ƒåº¦è§„åˆ™æ¯ä¸ªèŠ‚ç‚¹å…·æœ‰æ¯ç§èµ„æºç±»å‹çš„æœ€å¤§å®¹é‡ï¼šå¯ä¸º Pod æä¾›çš„ CPU å’Œå†…å­˜é‡ã€‚è°ƒåº¦ç¨‹åºç¡®ä¿å¯¹äºæ¯ç§èµ„æºç±»å‹ï¼Œè°ƒåº¦çš„å®¹å™¨çš„èµ„æºè¯·æ±‚çš„æ€»å’Œå°äºèŠ‚ç‚¹çš„å®¹é‡ã€‚å“ªæ€•èŠ‚ç‚¹ä¸Šå®é™…CPUæˆ–å†…å­˜çš„èµ„æºä½¿ç”¨é‡éå¸¸ä½ï¼Œä½†å¦‚æœå®¹é‡æ£€æŸ¥å¤±è´¥ï¼Œåˆ™è°ƒåº¦ç¨‹åºä»ç„¶æ‹’ç»åœ¨è¯¥èŠ‚ç‚¹ä¸Šæ”¾ç½® Podã€‚
å‚è€ƒæ–‡æ¡£ï¼šç®¡ç†å®¹å™¨çš„è®¡ç®—èµ„æº
nodeNamepodæƒ³è¦æŒ‡å®šè°ƒåº¦åˆ°æŸä¸ªnodeï¼Œå¯ä»¥ç›´æ¥åœ¨specä¸‹åˆ¶å®šnodeNameå­—æ®µ
spec:  nodeName: node1

labelå’ŒnodeSelectoræ·»åŠ labelkubectl label nodes node1 key1=value1,key2=value2

æ·»åŠ nodeSelectornodeæ·»åŠ labelåï¼Œpodæƒ³è¦æŒ‡å®šè°ƒåº¦åˆ°è¿™ä¸ªnodeï¼Œå¯ä»¥åœ¨specä¸‹æ·»åŠ nodeSelectorå­—æ®µ
spec:  nodeSelector:    key1: value1

åˆ é™¤labelå¦‚æœä¸å†ä½¿ç”¨æŸä¸ªlabelï¼Œå¯ä»¥è¿›è¡Œåˆ é™¤ã€‚
kubectl label nodes node1 key2-

äº²å’Œæ€§ä¸åäº²å’Œæ€§èŠ‚ç‚¹äº²å’Œæ€§èŠ‚ç‚¹äº²å’Œæ€§(Node Affinity)æ˜¯ä¸€ç§ Pod è°ƒåº¦å™¨æœºåˆ¶ï¼Œç”¨äºæŒ‡å®š Pod å¯ä»¥è°ƒåº¦åˆ°å“ªäº›èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚å®ƒå¯ä»¥é€šè¿‡æŒ‡å®šèŠ‚ç‚¹çš„æ ‡ç­¾æ¥å®ç°ï¼Œä»è€Œç¡®ä¿ Pod è¿è¡Œåœ¨å®ƒæ‰€éœ€è¦çš„èŠ‚ç‚¹ä¸Šï¼Œä»¥å®ç°æ›´å¥½çš„èµ„æºåˆ©ç”¨ç‡å’Œæ€§èƒ½è¡¨ç°ã€‚
1ã€èŠ‚ç‚¹æ·»åŠ label
kubectl label nodes node1 key1=value1,key2=value2

2ã€specæ·»åŠ affinitynodeæ·»åŠ labelåï¼Œpodæƒ³è¦æŒ‡å®šè°ƒåº¦åˆ°è¿™ä¸ªnodeï¼Œä¹Ÿå¯ä»¥åœ¨specä¸‹æ·»åŠ affinityå­—æ®µ
spec:  affinity:    nodeAffinity:      requiredDuringSchedulingIgnoredDuringExecution:        nodeSelectorTerms:        - matchExpressions:          - key: key1            operator: In            values:            - value1            - valuex      preferredDuringSchedulingIgnoredDuringExecution:      - weight: 1        preference:          matchExpressions:          - key: key2            operator: In            values:            - value2            - valuey

èŠ‚ç‚¹åäº²å’Œæ€§èŠ‚ç‚¹åäº²å’Œæ€§(Node Anti-Affinity)ï¼Ÿä¸å­˜åœ¨è¿™ç§æœºåˆ¶ã€‚
podäº²å’Œæ€§Pod äº²å’Œæ€§(Pod Affinity)æ˜¯ä¸€ç§ Pod è°ƒåº¦å™¨æœºåˆ¶ï¼Œç”¨äºæŒ‡å®šå¤šä¸ª Pod ä¹‹é—´çš„äº²å’Œæ€§å…³ç³»ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥è¢«è°ƒåº¦åˆ°åŒä¸€èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚è¿™ç§äº²å’Œæ€§é…ç½®å¯ä»¥ç”¨äºå®ç°åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºçš„é«˜å¯ç”¨æ€§å’Œèµ„æºåˆ©ç”¨ç‡ï¼Œä»¥åŠé¿å…æ•°æ®ä¼ è¾“å»¶è¿Ÿç­‰é—®é¢˜ã€‚
æœåŠ¡Aå’ŒæœåŠ¡Bçš„podæƒ³è¦éƒ¨ç½²åœ¨åŒä¸€ä¸ªä¸»æœºä¸Šï¼š
apiVersion: apps/v1kind: Deploymentmetadata:  name: my-app-aspec:  replicas: 3  selector:    matchLabels:      app: my-app-a  template:    metadata:      labels:        app: my-app-a    spec:      affinity:        podAffinity:          requiredDuringSchedulingIgnoredDuringExecution:            - labelSelector:                matchExpressions:                - key: app                  operator: In                  values:                  - my-app-b              topologyKey: &quot;kubernetes.io/hostname&quot;      containers:      - name: my-container        image: nginx---apiVersion: apps/v1kind: Deploymentmetadata:  name: my-app-bspec:  replicas: 3  selector:    matchLabels:      app: my-app-b  template:    metadata:      labels:        app: my-app-b    spec:      affinity:        podAffinity:          requiredDuringSchedulingIgnoredDuringExecution:            - labelSelector:                matchExpressions:                - key: app                  operator: In                  values:                  - my-app-a              topologyKey: &quot;kubernetes.io/hostname&quot;      containers:      - name: my-container        image: nginx

podåäº²å’Œæ€§Pod åäº²å’Œæ€§(Pod Anti-Affinity)æ˜¯ä¸€ç§ Pod è°ƒåº¦å™¨æœºåˆ¶ï¼Œç”¨äºæŒ‡å®šå¤šä¸ª Pod ä¹‹é—´çš„åäº²å’Œæ€§å…³ç³»ï¼Œä»¥ä¾¿å®ƒä»¬ä¸ä¼šè¢«è°ƒåº¦åˆ°åŒä¸€èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚è¿™ç§åäº²å’Œæ€§é…ç½®å¯ä»¥ç”¨äºå®ç°åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºçš„é«˜å¯ç”¨æ€§å’Œé¿å…èµ„æºå†²çªï¼Œä»¥åŠç¡®ä¿å®¹å™¨ä¹‹é—´çš„ç›¸äº’ç‹¬ç«‹æ€§ã€‚
å‚è€ƒæ–‡æ¡£Pod æ‰“æ•£è°ƒåº¦
ç›¸åŒæœåŠ¡çš„podå¿…é¡»æ‰“æ•£ï¼Œå¼ºåäº²å’Œï¼š
apiVersion: apps/v1kind: Deploymentmetadata:  name: nginxspec:  replicas: 2  selector:    matchLabels:      app: nginx  template:    metadata:      labels:        app: nginx    spec:      affinity:        podAntiAffinity:          requiredDuringSchedulingIgnoredDuringExecution:          - topologyKey: kubernetes.io/hostname            labelSelector:              matchLabels:                app: nginx      containers:      - name: nginx        image: nginx

ç›¸åŒæœåŠ¡çš„podå°½é‡æ‰“æ•£ï¼Œå¼±åäº²å’Œï¼š
apiVersion: apps/v1kind: Deploymentmetadata:  name: nginxspec:  replicas: 2  selector:    matchLabels:      app: nginx  template:    metadata:      labels:        app: nginx    spec:      affinity:        podAntiAffinity:          preferredDuringSchedulingIgnoredDuringExecution:          - podAffinityTerm:              topologyKey: kubernetes.io/hostname            weight: 100

Pod æ‹“æ‰‘åˆ†å¸ƒçº¦æŸæœªå®Œå¾…ç»­ã€‚ã€‚ã€‚
æ±¡ç‚¹å’Œå®¹å¿æ·»åŠ taintkubectl taint nodes node1 key1=value1:NoSchedulekubectl taint nodes node1 key2=value2:PreferNoSchedulekubectl taint nodes node1 key3=value3:NoExecute

æ·»åŠ tolerationsnodeæ·»åŠ taintåï¼Œpodæƒ³è¦è°ƒåº¦åˆ°è¿™ä¸ªnodeï¼Œéœ€è¦åœ¨specä¸‹æ·»åŠ tolerationså­—æ®µï¼š
spec:  tolerations:  - key: &quot;key1&quot;    operator: &quot;Equal&quot;    value: &quot;value1&quot;    effect: &quot;NoSchedule&quot;  - key: &quot;key2&quot;    operator: &quot;Exists&quot;    effect: &quot;PreferNoSchedule&quot;  - key: &quot;key3&quot;    operator: &quot;Equal&quot;    value: &quot;value3&quot;    effect: &quot;NoExecute&quot;

åˆ é™¤taintkubectl taint nodes node1 key1:NoSchedule-

nodeå°é”å¦‚æœnodeå­˜åœ¨é—®é¢˜ï¼Œæˆ–è€…nodeéœ€è¦å‡çº§ç»´æŠ¤ï¼Œè¿™æ—¶éœ€è¦å¯¹nodeè¿›è¡Œå°é”ï¼Œå¹¶ä¸”é©±é™¤podã€‚
å°é”nodeï¼Œä¸å…è®¸åˆ†é…podkubectl cordon nodename

ä»æŒ‡å®šnodeé©±é™¤podkubectl drain nodename --ignore-daemonsets

è§£é™¤nodeçš„å°é”ï¼Œå…è®¸åˆ†é…podkubectl uncordon nodename




]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>kubectl</tag>
      </tags>
  </entry>
  <entry>
    <title>Kustomizeå·¥å…·</title>
    <url>/dev-kubectl-kustomize/</url>
    <content><![CDATA[Kustomizeç®€ä»‹Kustomizeæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å·¥å…·ï¼Œç”¨æ¥é€šè¿‡kustomizationæ–‡ä»¶å®šåˆ¶Kuberneteså¯¹è±¡ã€‚ä» 1.14 ç‰ˆæœ¬å¼€å§‹ï¼Œkubectl ä¹Ÿå¼€å§‹æ”¯æŒä½¿ç”¨ kustomization æ–‡ä»¶æ¥ç®¡ç† Kubernetes å¯¹è±¡ã€‚è¦æŸ¥çœ‹åŒ…å« kustomization æ–‡ä»¶çš„ç›®å½•ä¸­çš„èµ„æºï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š
kubectl kustomize &lt;kustomization_directory&gt;

è¦åº”ç”¨è¿™äº›èµ„æºï¼Œä½¿ç”¨ â€“kustomize æˆ– -k å‚æ•°æ¥æ‰§è¡Œ kubectl applyï¼š
kubectl apply -k &lt;kustomization_directory&gt;

å‚è€ƒæ–‡æ¡£ï¼š

Kustomize
ä½¿ç”¨ Kustomize å¯¹ Kubernetes å¯¹è±¡è¿›è¡Œå£°æ˜å¼ç®¡ç†
kustomize - kustomization
kustomize - PatchesJson6902
kubernetes-sigs/kustomize
kustomize - Examples
Demo: change image names and tags



Kustomizeä½œç”¨ç”Ÿæˆèµ„æºConfigMap å’Œ Secret åŒ…å«å…¶ä»– Kubernetes å¯¹è±¡ï¼ˆå¦‚ Podï¼‰æ‰€éœ€è¦çš„é…ç½®æˆ–æ•æ„Ÿæ•°æ®ã€‚ ConfigMap æˆ– Secret ä¸­æ•°æ®çš„æ¥æºå¾€å¾€æ˜¯é›†ç¾¤å¤–éƒ¨ï¼Œä¾‹å¦‚æŸä¸ª .properties æ–‡ä»¶æˆ–è€… SSH å¯†é’¥æ–‡ä»¶ã€‚ Kustomize æä¾› secretGenerator å’Œ configMapGeneratorï¼Œå¯ä»¥åŸºäºæ–‡ä»¶æˆ–å­—é¢å€¼æ¥ç”Ÿæˆ Secret å’Œ ConfigMapã€‚
è®¾ç½®è´¯ç©¿æ€§å­—æ®µåœ¨é¡¹ç›®ä¸­ä¸ºæ‰€æœ‰ Kubernetes å¯¹è±¡è®¾ç½®è´¯ç©¿æ€§å­—æ®µæ˜¯ä¸€ç§å¸¸è§æ“ä½œã€‚ è´¯ç©¿æ€§å­—æ®µçš„ä¸€äº›ä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼š

ä¸ºæ‰€æœ‰èµ„æºè®¾ç½®ç›¸åŒçš„åå­—ç©ºé—´
ä¸ºæ‰€æœ‰å¯¹è±¡æ·»åŠ ç›¸åŒçš„å‰ç¼€æˆ–åç¼€
ä¸ºå¯¹è±¡æ·»åŠ ç›¸åŒçš„æ ‡ç­¾é›†åˆ
ä¸ºå¯¹è±¡æ·»åŠ ç›¸åŒçš„æ³¨è§£é›†åˆ

ç»„ç»‡å’Œå®šåˆ¶èµ„æºä¸€ç§å¸¸è§çš„åšæ³•æ˜¯åœ¨é¡¹ç›®ä¸­æ„é€ èµ„æºé›†åˆå¹¶å°†å…¶æ”¾åˆ°åŒä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•ä¸­ç®¡ç†ã€‚Kustomizeæä¾›åŸºäºä¸åŒæ–‡ä»¶æ¥ç»„ç»‡èµ„æºå¹¶å‘å…¶åº”ç”¨è¡¥ä¸æˆ–è€…å…¶ä»–å®šåˆ¶çš„èƒ½åŠ›ã€‚
Kustomize æ”¯æŒç»„åˆä¸åŒçš„èµ„æºã€‚kustomization.yaml æ–‡ä»¶çš„ resources å­—æ®µå®šä¹‰é…ç½®ä¸­è¦åŒ…å«çš„èµ„æºåˆ—è¡¨ã€‚æˆ‘ä»¬å¯ä»¥å°† resources åˆ—è¡¨ä¸­çš„è·¯å¾„è®¾ç½®ä¸ºèµ„æºé…ç½®æ–‡ä»¶çš„è·¯å¾„ã€‚
è¡¥ä¸æ–‡ä»¶ï¼ˆPatchesï¼‰å¯ä»¥ç”¨æ¥å¯¹èµ„æºæ‰§è¡Œä¸åŒçš„å®šåˆ¶ã€‚Kustomize é€šè¿‡ patchesStrategicMerge å’Œ patchesJson6902 æ”¯æŒä¸åŒçš„æ‰“è¡¥ä¸æœºåˆ¶ã€‚ä¸‹æ–‡ã€ä½¿ç”¨Kustomizeã€‘ä¸€èŠ‚ä¸­ä¼šæœ‰è¡¥ä¸æœºåˆ¶çš„å…·ä½“ç”¨æ³•ã€‚
å®‰è£…Kustomizekubectlä¸­é›†æˆçš„kustomizeåŠŸèƒ½ä¸å…¨ï¼Œå› æ­¤æœ€å¥½è¿˜æ˜¯å•ç‹¬å®‰è£…kustomizeã€‚
brew install kustomize

ä½¿ç”¨KustomizepatchesStrategicMergeæ‰“è¡¥ä¸patchesStrategicMerge çš„å†…å®¹æ˜¯ä¸€ä¸ªæ–‡ä»¶è·¯å¾„çš„åˆ—è¡¨ï¼Œå…¶ä¸­æ¯ä¸ªæ–‡ä»¶éƒ½åº”å¯è§£æä¸ºç­–ç•¥æ€§åˆå¹¶è¡¥ä¸ï¼ˆStrategic Merge Patchï¼‰ã€‚ è¡¥ä¸æ–‡ä»¶ä¸­çš„åç§°å¿…é¡»ä¸å·²ç»åŠ è½½çš„èµ„æºçš„åç§°åŒ¹é…ã€‚å»ºè®®æ„é€ è§„æ¨¡è¾ƒå°çš„ã€ä»…åšä¸€ä»¶äº‹æƒ…çš„è¡¥ä¸ã€‚ä¾‹å¦‚ï¼Œæ„é€ ä¸€ä¸ªè¡¥ä¸æ¥å¢åŠ  Deployment çš„å‰¯æœ¬ä¸ªæ•°ï¼›æ„é€ å¦å¤–ä¸€ä¸ªè¡¥ä¸æ¥è®¾ç½®å†…å­˜é™åˆ¶ã€‚
ç¤ºä¾‹ï¼š
# base/deployment.yamlapiVersion: apps/v1kind: Deploymentmetadata:  name: my-deploymentspec:  replicas: 3# overlays/patch.yamlapiVersion: apps/v1kind: Deploymentmetadata:  name: my-deploymentspec:  template:    spec:      containers:        - name: my-container          image: nginx:latest# kustomization.yamlresources:  - base/deployment.yamlpatchesStrategicMerge:  - overlays/patch.yaml

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒpatchesStrategicMerge ä½¿ç”¨ YAML æ ¼å¼çš„è¡¥ä¸ã€‚å®ƒä¿®æ”¹äº† my-deployment çš„ spec.template.spec.containersï¼Œå°†å…¶ä¸­çš„é•œåƒæ›´æ”¹ä¸º nginx:latestã€‚è¡¥ä¸ä¼šä¸åŸå§‹èµ„æºåˆå¹¶ï¼Œç”Ÿæˆæœ€ç»ˆçš„éƒ¨ç½²èµ„æºã€‚
patchesJson6902æ‰“è¡¥ä¸patchesJson6902 è¡¥ä¸æœºåˆ¶ä½¿ç”¨ JSON Patch æ ¼å¼ï¼Œå®ƒæè¿°äº†å¦‚ä½•å¯¹ç°æœ‰èµ„æºè¿›è¡Œç²¾ç¡®çš„æ›´æ”¹ã€‚JSON Patch æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ RFC 6902 æ–‡æ¡£ï¼Œå®ƒå®šä¹‰äº†ä¸€ç»„æ“ä½œï¼Œå¦‚æ·»åŠ ã€æ›¿æ¢ã€ç§»åŠ¨ã€å¤åˆ¶å’Œåˆ é™¤ï¼Œä»¥ä¾¿å¯¹ JSON å¯¹è±¡è¿›è¡Œä¿®æ”¹ã€‚ä½¿ç”¨ patchesJson6902ï¼Œä½ å¯ä»¥æä¾›ä¸€ä¸ªæˆ–å¤šä¸ª JSON Patch æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶å°†æŒ‰é¡ºåºåº”ç”¨äºåŸå§‹èµ„æºï¼Œç”Ÿæˆæœ€ç»ˆçš„ç»“æœã€‚
ç¤ºä¾‹1ï¼š
// patches/patch.json[  &#123; &quot;op&quot;: &quot;replace&quot;, &quot;path&quot;: &quot;/spec/replicas&quot;, &quot;value&quot;: 5 &#125;]// kustomization.yamlresources:  - base/deployment.yamlpatchesJson6902:  - target:      group: apps      version: v1      kind: Deployment      name: my-deployment    path: patches/patch.json

ç¤ºä¾‹1ä¸­ï¼ŒpatchesJson6902 ä½¿ç”¨ JSON Patch æ ¼å¼çš„è¡¥ä¸ã€‚å®ƒä½¿ç”¨ replace æ“ä½œå°† my-deployment çš„ spec.replicas æ›´æ”¹ä¸º 5ã€‚è¡¥ä¸ä¼šè¢«åº”ç”¨åˆ°åŸå§‹èµ„æºä¸Šï¼Œç”Ÿæˆå…·æœ‰ä¿®æ”¹çš„æœ€ç»ˆéƒ¨ç½²èµ„æºã€‚
ç¤ºä¾‹2ï¼š
// kustomization.yamlresources:  - base/deployment.yamlpatchesJson6902:  - target:      group: apps      version: v1      kind: Deployment      name: my-deployment    patch: |-      - op: replace        path: /spec/replicas        value: 5

ç¤ºä¾‹2å®ç°çš„æ•ˆæœï¼Œå’Œç¤ºä¾‹1ç›¸åŒã€‚
ç¤ºä¾‹3ï¼š
- target:    group: networking.k8s.io    kind: Ingress    name: test    version: v1  patch: |-    - op: add      path: /metadata/annotations/argocd.argoproj.io~1sync-options      value: Skip

ç¤ºä¾‹3ä¸­ï¼Œä½¿ç”¨ patchesJson6902 åœ¨ Ingress èµ„æºä¸­æ·»åŠ  argocd.argoproj.io/sync-options: Skip ï¼Œä½¿argocdå¿½ç•¥è¯¥èµ„æºçš„åŒæ­¥ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œannotationsçš„keyä¸­çš„/ï¼Œè¢«æ”¹æˆäº†~1ã€‚
ä¿®æ”¹é•œåƒéœ€æ±‚ï¼šä½¿ç”¨kustomizeä¿®æ”¹podä¸­ä½¿ç”¨çš„é•œåƒã€‚
cat &lt;&lt;EOF &gt;kustomization.yamlresources:- pod.yamlEOFcat &lt;&lt;EOF &gt;$DEMO_HOME/pod.yamlapiVersion: v1kind: Podmetadata:  name: myapp-pod  labels:    app: myappspec:  containers:  - name: myapp-container    image: busybox:1.29.0    command: [&#x27;sh&#x27;, &#x27;-c&#x27;, &#x27;echo The app is running! &amp;&amp; sleep 3600&#x27;]  initContainers:  - name: init-mydb    image: busybox:1.29.0    command: [&#x27;sh&#x27;, &#x27;-c&#x27;, &#x27;until nslookup mydb; do echo waiting for mydb; sleep 2; done;&#x27;]EOFkustomize build .kustomize edit set image busybox=alpine:3.6kustomize build .

æ‰§è¡Œkustomize edit set imageåï¼Œkustomization.yamlä¸­ä¼šå†™å…¥ï¼š
images:- name: busybox  newName: alpine  newTag: 3.6


]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>argocd</tag>
        <tag>kubectl</tag>
      </tags>
  </entry>
  <entry>
    <title>kubectlå‘½ä»¤â€”â€”èµ„æºå¯¹è±¡å¢åˆ æŸ¥æ”¹ç¯‡</title>
    <url>/dev-kubectl-curd/</url>
    <content><![CDATA[K8Sèµ„æºå¯¹è±¡æ˜¯å•¥ï¼Ÿåœ¨ Kubernetes ç³»ç»Ÿä¸­ï¼ŒKubernetes å¯¹è±¡ æ˜¯æŒä¹…åŒ–çš„å®ä½“ã€‚ Kubernetes ä½¿ç”¨è¿™äº›å®ä½“å»è¡¨ç¤ºæ•´ä¸ªé›†ç¾¤çš„çŠ¶æ€ï¼Œå…·ä½“åŒ…æ‹¬podã€replicasetã€deploymentã€serviceã€configmapã€secretç­‰ç­‰ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ç†è§£ Kubernetes å¯¹è±¡
Kubernetes å¯¹è±¡ç®¡ç†



èµ„æºå¯¹è±¡ç®¡ç†æ–¹å¼èµ„æºå¯¹è±¡çš„ç®¡ç†æœ‰ä¸‰ç§æ–¹å¼ï¼šæŒ‡ä»¤å¼å‘½ä»¤ã€æŒ‡ä»¤å¼å¯¹è±¡é…ç½®å’Œå£°æ˜å¼å¯¹è±¡é…ç½®ã€‚å…¶ä¸­ï¼ŒæŒ‡ä»¤å¼å¯¹è±¡é…ç½®å’Œå£°æ˜å¼å¯¹è±¡é…ç½®éƒ½è¦ä¾èµ–èµ„æºå¯¹è±¡çš„yaml/jsonå®šä¹‰æ–‡ä»¶ã€‚
æŒ‡ä»¤å¼å‘½ä»¤ä½¿ç”¨æŒ‡ä»¤å¼å‘½ä»¤æ—¶ï¼Œç”¨æˆ·å¯ä»¥åœ¨é›†ç¾¤ä¸­çš„æ´»åŠ¨å¯¹è±¡ä¸Šè¿›è¡Œæ“ä½œã€‚ç”¨æˆ·å°†æ“ä½œä¼ ç»™ kubectl å‘½ä»¤ä½œä¸ºå‚æ•°æˆ–æ ‡å¿—ã€‚è¿™æ˜¯å¼€å§‹æˆ–è€…åœ¨é›†ç¾¤ä¸­è¿è¡Œä¸€æ¬¡æ€§ä»»åŠ¡çš„æ¨èæ–¹æ³•ã€‚å› ä¸ºè¿™ç§æ–¹å¼ç›´æ¥åœ¨æ´»è·ƒå¯¹è±¡ä¸Šæ“ä½œï¼Œæ‰€ä»¥å®ƒä¸æä¾›ä»¥å‰é…ç½®çš„å†å²è®°å½•ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªnginx deploymentï¼š
kubectl create deployment nginx --image nginx

æŒ‡ä»¤å¼å¯¹è±¡é…ç½®åœ¨æŒ‡ä»¤å¼å¯¹è±¡é…ç½®ä¸­ï¼Œkubectl å‘½ä»¤æŒ‡å®šæ“ä½œï¼ˆåˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤ï¼‰ï¼Œå¯é€‰æ ‡å¿—å’Œè‡³å°‘ä¸€ä¸ªæ–‡ä»¶åã€‚æŒ‡å®šçš„æ–‡ä»¶å¿…é¡»åŒ…å« YAML æˆ– JSON æ ¼å¼çš„å¯¹è±¡çš„å®Œæ•´å®šä¹‰ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºé…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„å¯¹è±¡ï¼ˆå‰ææ˜¯å†™å¥½äº†nginx.yamlï¼‰ï¼š
kubectl create -f nginx.yaml

é€šè¿‡è¦†ç›–æ›´æ–°é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„å¯¹è±¡ï¼š
kubectl replace -f nginx.yaml

åˆ é™¤ä¸¤ä¸ªé…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„å¯¹è±¡ï¼š
kubectl delete -f nginx.yaml -f redis.yaml

å£°æ˜å¼å¯¹è±¡é…ç½®ä½¿ç”¨å£°æ˜å¼å¯¹è±¡é…ç½®æ—¶ï¼Œç”¨æˆ·å¯¹æœ¬åœ°å­˜å‚¨çš„å¯¹è±¡é…ç½®æ–‡ä»¶è¿›è¡Œæ“ä½œï¼Œä½†æ˜¯ç”¨æˆ·æœªå®šä¹‰è¦å¯¹è¯¥æ–‡ä»¶æ‰§è¡Œçš„æ“ä½œã€‚ kubectl ä¼šè‡ªåŠ¨æ£€æµ‹æ¯ä¸ªæ–‡ä»¶çš„åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤æ“ä½œã€‚è¿™ä½¿å¾—é…ç½®å¯ä»¥åœ¨ç›®å½•ä¸Šå·¥ä½œï¼Œæ ¹æ®ç›®å½•ä¸­é…ç½®æ–‡ä»¶å¯¹ä¸åŒçš„å¯¹è±¡æ‰§è¡Œä¸åŒçš„æ“ä½œã€‚ä¾‹å¦‚ï¼Œå¤„ç† configs ç›®å½•ä¸­çš„æ‰€æœ‰å¯¹è±¡é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºå¹¶æ›´æ–°æ´»è·ƒå¯¹è±¡ã€‚å¯ä»¥é¦–å…ˆä½¿ç”¨ diff å­å‘½ä»¤æŸ¥çœ‹å°†è¦è¿›è¡Œçš„æ›´æ”¹ï¼Œç„¶åå†è¿›è¡Œåº”ç”¨ï¼š
kubectl diff -f configs/kubectl apply -f configs/

ä¸æŒ‡ä»¤å¼å¯¹è±¡é…ç½®ç›¸æ¯”çš„ä¼˜ç‚¹ï¼š

å¯¹æ´»åŠ¨å¯¹è±¡æ‰€åšçš„æ›´æ”¹å³ä½¿æœªåˆå¹¶åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼Œä¹Ÿä¼šè¢«ä¿ç•™ä¸‹æ¥ã€‚
å£°æ˜æ€§å¯¹è±¡é…ç½®æ›´å¥½åœ°æ”¯æŒå¯¹ç›®å½•è¿›è¡Œæ“ä½œå¹¶è‡ªåŠ¨æ£€æµ‹æ¯ä¸ªæ–‡ä»¶çš„æ“ä½œç±»å‹ï¼ˆåˆ›å»ºï¼Œæ›´æ–°ï¼Œåˆ é™¤ï¼‰ã€‚

ä¸æŒ‡ä»¤å¼å¯¹è±¡é…ç½®ç›¸æ¯”çš„ç¼ºç‚¹ï¼š

å£°æ˜å¼å¯¹è±¡é…ç½®éš¾äºè°ƒè¯•å¹¶ä¸”å‡ºç°å¼‚å¸¸æ—¶ç»“æœéš¾ä»¥ç†è§£ã€‚
ä½¿ç”¨ diff äº§ç”Ÿçš„éƒ¨åˆ†æ›´æ–°ä¼šåˆ›å»ºå¤æ‚çš„åˆå¹¶å’Œè¡¥ä¸æ“ä½œã€‚

èµ„æºå¯¹è±¡çš„yaml/jsonæ–‡ä»¶è¯¦è§£yaml/jsonæ–‡ä»¶æ„æˆk8sèµ„æºå¯¹è±¡çš„yamlæ–‡ä»¶åˆ†æˆå››éƒ¨åˆ†ï¼ŒapiVersionã€kindã€metadataå’Œspecã€‚

apiVersionå’Œkindæ˜¯å…³è”çš„ï¼Œå‚è€ƒkubectl api-resourcesã€‚
metadataå¿…å¡«nameã€namespaceã€labelsã€‚
pod.specä¸»è¦å¡«containersçš„nameå’Œimageï¼›deployment.specä¸»è¦å¡«replicasã€templateå’Œselectorï¼›service.specä¸»è¦å¡«selectorã€portså’Œtypeã€‚

yaml/jsonæ–‡ä»¶ç¼–å†™ç¼–å†™k8sèµ„æºå¯¹è±¡çš„yaml/jsonæ–‡ä»¶ï¼Œæœ‰ä¸‰ç§æ–¹æ³•ï¼š

çº¯æ‰‹å·¥ç¼–å†™ï¼ˆéš¾åº¦æœ€é«˜ï¼‰
ä½¿ç”¨--dry-runç”Ÿæˆyaml/jsonæ–‡ä»¶ï¼Œç„¶åä¿®æ”¹
ä»çº¿ä¸Šå¯¼å‡ºyaml/jsonæ–‡ä»¶ï¼Œç„¶åä¿®æ”¹

ç”Ÿæˆæ–‡ä»¶æ¨¡æ¿ç”Ÿæˆdeploymentçš„yaml/jsonæ–‡ä»¶æ¨¡æ¿ï¼ˆæ¨èï¼‰ï¼š
kubectl create deployment vk-deploy --image=nginx --dry-run -o yaml &gt; deploy-name.yamlkubectl create deployment vk-deploy --image=nginx --dry-run -o json &gt; deploy-name.json

æ›´å¤šå†…å®¹ï¼Œå‚è€ƒKubernetes kubectl create deployment å‘½ä»¤è¯¦è§£ã€‚
æ³¨æ„ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦åœ¨deploymentä¸­æŒ‡å®šå®¹å™¨å¯¹å¤–æš´éœ²çš„portsï¼Œå› ä¸ºè¯¥å­—æ®µåªæ˜¯ä¸€ä¸ªæç¤ºä½œç”¨ã€‚

List of ports to expose from the container. Exposing a port here gives the system additional information about the network connections a container uses, but is primarily informational. Not specifying a port here DOES NOT prevent that port from being exposed. Any port which is listening on the default â€œ0.0.0.0â€ address inside a container will be accessible from the network. Cannot be updated.

ç”Ÿæˆdeploymentçš„yamlæ–‡ä»¶æ¨¡æ¿ï¼ˆå³å°†åºŸå¼ƒï¼‰ï¼š
kubectl run vk-deploy --image=nginx --dry-run -o yaml
ä¼šå‡ºç°æç¤ºï¼škubectl run â€“generator=deployment/apps.v1 is DEPRECATED and will be removed in a future version. Use kubectl run â€“generator=run-pod/v1 or kubectl create instead.å› ä¸ºå®˜æ–¹ä¸æ¨èä½¿ç”¨ run-pod/v1 ä»¥å¤–çš„å…¶ä»–ç”Ÿæˆå™¨ï¼Œå…¶ä»–ç”Ÿæˆå™¨ä¸ä¹…åå°±ä¼šå¼ƒç”¨ã€‚æ›´å¤šå†…å®¹å‚è€ƒkubectl runã€‚
å¯¼å‡ºæ–‡ä»¶æ¨¡æ¿ä»K8Sé›†ç¾¤ä¸­å¯¼å‡ºå·²ç»å­˜åœ¨çš„èµ„æºå¯¹è±¡çš„yamlæ–‡ä»¶ï¼ˆå·²ç»åºŸå¼ƒï¼‰ï¼š
kubectl get deploy/deployment-name -o yaml --export &gt; deploy-name.yaml
å‡ºç°æç¤ºï¼šFlag â€“export has been deprecated, This flag is deprecated and will be removed in future.è¯¥flag 1.14ç‰ˆæœ¬å¼ƒç”¨ï¼Œ1.18ç‰ˆæœ¬ç§»é™¤ï¼Œç›®å‰å·²ç»ä¸å¯ç”¨ã€‚
æ›¿ä»£æ–¹æ¡ˆï¼š
kubectl krew install neatkubectl get deploy/deployment-name -o yaml | kubectl neat

-hå¸®åŠ©åœ¨ç”Ÿæˆyamlæ–‡ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå¿˜è®°äº†å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨kubectl xxx -hå‘½ä»¤æ¥è·å–å¸®åŠ©ã€‚
kubectl -hkubectl create -hkubectl create deployment -h

-hé™¤äº†å¯ä»¥æŸ¥çœ‹ç”Ÿæˆyamlæ–‡ä»¶çš„å‘½ä»¤å¸®åŠ©ï¼Œè¿˜å¯ä»¥ç”¨æ¥æŸ¥çœ‹æ‰€æœ‰kubectlå­å‘½ä»¤çš„å¸®åŠ©ï¼Œéå¸¸å®ç”¨ã€‚
explainå¸®åŠ©ç¼–å†™yamlæ–‡ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå¿˜è®°äº†æŸäº›ç»“æ„å’Œå­—æ®µï¼Œå¯ä»¥ä½¿ç”¨kubectl explainå‘½ä»¤æ¥è·å–å¸®åŠ©ã€‚
1ã€æŸ¥çœ‹èµ„æºåŒ…å«å“ªäº›å­—æ®µä»¥æŸ¥çœ‹deploymentçš„yamlåŒ…å«å“ªäº›å­—æ®µä¸ºä¾‹ï¼š
kubectl explain deploymentkubectl explain deployment --api-version=apps/v1kubectl explain deployment --api-version=apps/v1 --recursive=true

2ã€æŸ¥çœ‹å­å­—æ®µä»¥æŸ¥çœ‹èŠ‚ç‚¹äº²å’Œæ€§å­—æ®µä¸ºä¾‹ï¼š
kubectl explain deployment.spec.template.spec.affinitykubectl explain deployment.spec.template.spec.affinity.nodeAffinity...kubectl explain deployment.spec.template.spec.affinity.nodeAffinity.requiredDuringSchedulingIgnoredDuringExecution.nodeSelectorTerms.matchExpressions

å¿…é¡»è¯´æ˜çš„æ˜¯ï¼Œexplainä¸æ­¢å¯ä»¥æŸ¥çœ‹k8så†…ç½®èµ„æºç»“æ„ï¼Œè¿˜å¯ä»¥æŸ¥çœ‹crdèµ„æºç»“æ„ï¼Œä¾‹å¦‚ï¼š
kubectl explain milvus --api-version=milvus.io/v1beta1kubectl explain milvus.spec --api-version=milvus.io/v1beta1kubectl explain milvus.spec.components --api-version=milvus.io/v1beta1kubectl explain milvus.spec.dependencies --api-version=milvus.io/v1beta1

milvuså®‰è£…é…ç½®æ–¹æ³•ï¼Œå‚è€ƒã€ŠK8Sä¸­å®‰è£…é…ç½®Milvusã€‹
yaml/jsonæ–‡ä»¶éªŒè¯kubectl create --validate -f deploy-name.yaml --dry-run=client

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ--dry-run=clientå‚æ•°è¦å¸¦ç€ï¼Œå¦åˆ™éªŒè¯æˆåŠŸåï¼Œè¿™ä¸ªæ–‡ä»¶ç›´æ¥å°±æäº¤ç»™k8säº†ã€‚
pod yamlç”Ÿæˆpodçš„yamlæ–‡ä»¶æ¨¡æ¿æ¯”è¾ƒå¸¸ç”¨ï¼Œè¿™é‡Œå•ç‹¬åšä¸€ä¸‹è®°å½•ã€‚
kubectl run vkpod --image=busybox --restart=Never --dry-run=client -oyamlkubectl run vk-pod --image=busybox --dry-run=client -o yaml --command -- sleep 1000kubectl run vk-pod --image=busybox -l &#x27;name=vk-pod,env=dev&#x27; --dry-run=client -o yamlkubectl run vk-pod --image=busybox --labels=&#x27;name=vk-pod,env=dev&#x27; --dry-run=client -o yaml

æ›´å¤šå†…å®¹ï¼Œå‚è€ƒKubernetes kubectl run å‘½ä»¤è¯¦è§£å’Œkubectl çš„ç”¨æ³•çº¦å®šã€‚
æŸ¥çœ‹èµ„æºå¯¹è±¡æŸ¥çœ‹å¯ç”¨apiç‰ˆæœ¬kubectl api-versions

æŸ¥çœ‹èµ„æºç¼©å†™kubectl describekubectl api-resources
å»ºè®®è®°ä½å¸¸ç”¨èµ„æºçš„SHORTNAMESï¼Œå¯ä»¥æå‡è¾“å…¥æ•ˆç‡ã€‚æ­¤å¤–ï¼Œè®°ä½å¸¸ç”¨èµ„æºçš„APIGROUPï¼Œå¯ä»¥æé«˜ç¼–å†™yamlæ–‡ä»¶æ—¶çš„æ•ˆç‡ã€‚
æŸ¥çœ‹æ‰€æœ‰èµ„æºå¯¹è±¡kubectl get allkubectl get all -o wide

æŸ¥çœ‹æŒ‡å®šçš„èµ„æºå¯¹è±¡ä»¥deploymentèµ„æºå¯¹è±¡ä¸ºä¾‹ï¼Œå…¶ä»–èµ„æºå¯¹è±¡æ“ä½œæ–¹æ³•ç›¸åŒã€‚
æŸ¥çœ‹æ‰€æœ‰ç©ºé—´çš„æ‰€æœ‰deploymentï¼Œdeploymentå¯ä»¥ç¼©å†™ä¸ºdeploy
kubectl get deployment --all-namespaces

æŸ¥çœ‹æŒ‡å®šç©ºé—´ä¸‹çš„æ‰€æœ‰deploymentï¼Œé»˜è®¤ç©ºé—´default
kubectl get deploykubectl get deploy -n voidkingkubectl get deploy -n voidking -o wide

æŸ¥çœ‹deploymentï¼Œæ˜¾ç¤ºlabel
kubectl get deploy --show-labels

æ ¹æ®labelç­›é€‰deployment
kubectl get deploy -l &#x27;env=dev&#x27;kubectl get deploy --selector=&#x27;env=dev&#x27;kubectl get deploy --selector=&quot;env=dev,type=frontend&quot;

æŸ¥çœ‹æŒ‡å®šçš„deployment
kubectl get deploy/deployment-namekubectl get deploy/deployment-name -o widekubectl get deploy/deployment-name -o yaml

æŸ¥çœ‹deploymentè¯¦ç»†ä¿¡æ¯
kubectl describe deploy/deployment-name

æŸ¥çœ‹deploymentå®æ—¶å˜åŒ–
kubectl get deploy/deployment-name --watch

æ ¹æ®labelç­›é€‰èµ„æºå¯¹è±¡ç­›é€‰æ‰€æœ‰labelåŒ…å« env=dev çš„èµ„æºå¯¹è±¡
kubectl get all -l &#x27;env=dev&#x27;# orkubectl get all --selector &#x27;env=dev&#x27;

æ ¹æ®fieldç­›é€‰èµ„æºå¯¹è±¡å¯¹äºPodèµ„æºæ¥è¯´ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¯ç”¨äº--field-selectorçš„å­—æ®µï¼š

metadata.name
metadata.namespace
status.phaseï¼ˆä¾‹å¦‚ï¼ŒRunningï¼ŒPendingï¼ŒSucceededï¼ŒFailedï¼ŒUnknownï¼‰
status.podIP
spec.nodeNameï¼ˆèŠ‚ç‚¹åï¼‰

è¿™æ˜¯ä¸€ä¸ªä¸å®Œå…¨çš„åˆ—è¡¨ï¼Œæ”¯æŒçš„å­—æ®µå¯èƒ½ä¼šéšç€Kubernetesç‰ˆæœ¬çš„æ›´æ–°è€Œå˜åŒ–ã€‚
ç­›é€‰æ‰€æœ‰RunningçŠ¶æ€çš„Pod
kubectl get pod -A --field-selector status.phase==Running

æ ¹æ®jsonpathç­›é€‰èµ„æºå¯¹è±¡ç­›é€‰æ‰€æœ‰ReadyçŠ¶æ€çš„Pod
#!/bin/bashkubectl get pods -A -o jsonpath=&#x27;&#123;range .items[*]&#125;&#123;.metadata.namespace&#125;&#123;&quot;\t&quot;&#125;&#123;.metadata.name&#125;&#123;&quot;\n&quot;&#125;&#123;end&#125;&#x27; &gt; pods.txtwhile read line;do  namespace=$(echo &quot;$line&quot; | awk &#x27;&#123;print $1&#125;&#x27;)  name=$(echo &quot;$line&quot; | awk &#x27;&#123;print $2&#125;&#x27;)  # ready å–å€¼ True/False  ready=$(kubectl get pods $name -n $namespace -o jsonpath=&quot;&#123;.status.conditions[?(@.type==&#x27;Ready&#x27;)].status&#125;&quot;)  if [[ $ready == &quot;True&quot; ]];then    echo &quot;$&#123;namespace&#125;/$&#123;name&#125; is ready!&quot;  else    echo &quot;$&#123;namespace&#125;/$&#123;name&#125; is not ready!&quot;  fidone &lt; pods.txt

æ›´å¤šjsonpathçš„å†…å®¹ï¼Œå‚è€ƒæ–‡æ¡£ã€ŠJSONPathå…¥é—¨ç¯‡ã€‹
åˆ›å»ºèµ„æºå¯¹è±¡ä»¥deploymentèµ„æºå¯¹è±¡ä¸ºä¾‹ï¼Œå…¶ä»–èµ„æºå¯¹è±¡æ“ä½œæ–¹æ³•ç›¸åŒã€‚
æŒ‡ä»¤å¼å‘½ä»¤kubectl create deployment vk-deploy --image=nginx

æŒ‡ä»¤å¼å¯¹è±¡é…ç½®æŒ‡ä»¤å¼å¯¹è±¡é…ç½®ï¼Œéœ€è¦ä¾èµ–å®šä¹‰å¥½çš„èµ„æºå¯¹è±¡yamlæ–‡ä»¶ã€‚
kubectl create -f deploy.yaml

å£°æ˜å¼å¯¹è±¡é…ç½®å’ŒæŒ‡ä»¤å¼å¯¹è±¡é…ç½®å”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œkubectl create æ”¹ä¸º kubectl applyã€‚
æ›´æ–°èµ„æºå¯¹è±¡ä»¥deploymentèµ„æºå¯¹è±¡ä¸ºä¾‹ï¼Œå…¶ä»–èµ„æºå¯¹è±¡æ“ä½œæ–¹æ³•ç›¸åŒã€‚
åŸºæœ¬æ“ä½œ# ç¼–è¾‘é›†ç¾¤ä¸­çš„èµ„æºkubectl edit deployment deployment-name# æ¯”è¾ƒmanifestä¸é›†ç¾¤ä¸­å½“å‰èµ„æºçš„ä¸åŒkubectl diff -f deploy.yaml# åº”ç”¨æœ€æ–°å®šä¹‰kubectl replace -f deploy.yamlkubectl apply -f deploy.yaml# æ·»åŠ labelkubectl label deployment deployment-name new-label=awesome# æ·»åŠ annotationkubectl annotate deployment deployment-name icon-url=http://goo.gl/XXBTWq 

patchæ“ä½œkubectl patch: Update field(s) of a resource using strategic merge patch.
ç”¨æ³•ï¼š
kubectl patch (-f FILENAME | TYPE NAME) -p PATCH

JSON and YAML formats are accepted.
--typeæœ‰ä¸‰ä¸ªé€‰é¡¹ï¼š

strategicï¼šç­–ç•¥æ›´æ–°ï¼Œä¹Ÿæ˜¯é»˜è®¤çš„é€‰é¡¹ã€‚æ ¹æ®k8s crd èµ„æºå¯¹è±¡çš„å­—æ®µå®šä¹‰ï¼ˆpatchStrategyï¼‰å†³å®šå¦‚ä½•è¯¥å¦‚ä½•æ›´æ–°ï¼Œä¸æŒ‡å®špatchStrategyæ—¶ï¼Œé»˜è®¤æ˜¯replaceï¼Œå½“å‰å¤§å¤šèµ„æºå¯¹è±¡åœ¨ä»£ç ä¸­å·²ç»æŒ‡å®špatchStrategyä¸ºmergeã€‚
mergeï¼šåˆå¹¶æ›´æ–°ï¼Œæœ‰ç›¸åŒçš„å­—æ®µå°±æ›¿æ¢ï¼Œæ²¡æœ‰ç›¸åŒçš„å­—æ®µå°±åˆå¹¶ã€‚å’Œä»£ç ä¸­æŒ‡å®špatchStrategyä¸ºmergeæ•ˆæœç›¸åŒã€‚
jsonï¼šjsonæ›´æ–°ï¼Œè¦æ±‚--patchå‚æ•°æ˜¯ä¸€ä¸ªjsonåˆ—è¡¨ [&#123;&quot;op&quot;:&quot;&quot;,&quot;path&quot;:&quot;&quot;,&quot;value&quot;:&quot;&quot;&#125;]ã€‚

mergeä¹‹å‘ï¼š

å¦‚æœä¸€ä¸ªå­—æ®µçš„å€¼ä¸ºæ•°ç»„ï¼Œæ— è®ºä½ æœ‰æ²¡æœ‰æŒ‡å®š --type=mergeï¼Œæ–°çš„å…ƒç´ éƒ½å°†è¦†ç›–æ‰åŸå…ˆæ‰€æœ‰çš„åˆ—è¡¨å…ƒç´ ã€‚
merge æƒ³è¦åˆ é™¤ä¸€ä¸ª keyï¼Œåªèƒ½é€šè¿‡å°† key è®¾ç½®ä¸º nullï¼Œä½†æœ‰äº› key å¯¹åº”çš„ value æ˜¯ä¸èƒ½ä¸º null çš„ã€‚

å½“ --patch å‚æ•°æ˜¯ json æ ¼å¼æ—¶ï¼Œpath é‡Œçš„æ–œæ å°±ä¼šä¸ key å†²çªï¼Œæ­¤æ—¶å¯ä»¥å°† æ³¢æµªçº¿å’Œæ–œæ  æ›¿æ¢æˆå¦‚ä¸‹è½¬ä¹‰å­—ç¬¦ã€‚

~ï¼ˆæ³¢æµªçº¿ï¼‰å¯¹åº”çš„æ˜¯ ~0
/ï¼ˆæ–œæ ï¼‰å¯¹åº”çš„æ˜¯ ~1

è¿™ä¸ªè§„åˆ™å’Œkustomizeä¸­çš„patchesJson6902ç±»ä¼¼ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

kubectl patch
è¯¦è§£ kubectl patch å‘½ä»¤ â€“ strategicã€json å’Œ merge åŒºåˆ«
ã€ŠKustomizeå·¥å…·ã€‹

æ·»åŠ èŠ‚ç‚¹äº²å’Œæ€§kubectl patch deployment deployment-name --type=merge -p &quot;$(cat data.yaml)&quot;# orkubectl patch deployment deployment-name --type=merge --patch-file data.yaml

data.yamlå†…å®¹ä¸ºï¼š
spec:  template:    spec:      affinity:        nodeAffinity:          requiredDuringSchedulingIgnoredDuringExecution:            nodeSelectorTerms:              - matchExpressions:                  - key: key1                    operator: In                    values:                      - value1

jsonæ ¼å¼çš„æ–‡ä»¶ä¹Ÿæ˜¯æ”¯æŒçš„ã€‚
åˆ é™¤å­˜æ´»æ¢é’ˆkubectl patch deployment deployment-name --type json \    -p=&#x27;[&#123;&quot;op&quot;: &quot;remove&quot;, &quot;path&quot;: &quot;/spec/template/spec/containers/0/livenessProbe&quot;&#125;]&#x27;

åˆ é™¤èµ„æºå¯¹è±¡ä»¥deploymentèµ„æºå¯¹è±¡ä¸ºä¾‹ï¼Œå…¶ä»–èµ„æºå¯¹è±¡æ“ä½œæ–¹æ³•ç›¸åŒã€‚
åˆ é™¤å•ä¸ªdeploymentï¼š
kubectl delete deployment deployment-name

æ‰¹é‡åˆ é™¤deploymentï¼š
kubectl get deployment -n &lt;your-namespace&gt; -oname | \    xargs kubectl delete -n &lt;your-namespace&gt;

æ‰©ç¼©å®¹æ‰©ç¼©å®¹é’ˆå¯¹podå¯¹è±¡ï¼Œéœ€è¦æ“ä½œdeploymentå¯¹è±¡ã€‚
æ–¹æ³•ä¸€ï¼šæ‰©ç¼©å®¹å‘½ä»¤ã€‚
kubectl scale --replicas=2 deployment deployment-name

æ–¹æ³•äºŒï¼šæ›´æ–°yamlæ–‡ä»¶ã€‚
é‡å¯podk8sä¸­ï¼Œæ²¡æœ‰podé‡å¯å‘½ä»¤ï¼Œåªæœ‰podé‡å»ºå‘½ç†ã€‚è€Œæˆ‘ä»¬é…ç½®çš„podé‡å¯ç­–ç•¥ï¼Œæœ¬è´¨ä¸Šä¹Ÿæ˜¯é‡å»ºpodï¼Œåªä¸è¿‡podåç§°ç›¸åŒï¼Œä¿ç•™äº†eventè®°å½•ã€‚
éªŒè¯æ–¹æ³•ï¼šåˆ›å»ºä¸€ä¸ª100ç§’é‡å¯çš„podï¼Œå¯åŠ¨ååœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ã€‚å½“podé‡å¯åï¼Œæ–‡ä»¶æ¶ˆå¤±ï¼Œpodåœ¨å®¿ä¸»æœºä¸Šå¯¹åº”çš„å®¹å™¨idä¹Ÿå…¨éƒ¨æ”¹å˜äº†ã€‚
é‡å»ºpodå‚è€ƒæ–‡æ¡£Using Kubectl to Restart a Kubernetes Pod
æ–¹æ³•ä¸€ï¼šåˆ é™¤podå¹¶é‡å»º
kubectl get pod &lt;pod_name&gt; -n &lt;namespace&gt; -o yaml | kubectl replace --force -f -

æ–¹æ³•äºŒï¼šåˆ é™¤podåˆ©ç”¨ä¿æ´»é‡å»ºï¼ˆå‰ææ˜¯æœ‰replicasetï¼‰
kubectl delete pod &lt;pod_name&gt; -n &lt;namespace&gt;

æ–¹æ³•ä¸‰ï¼šé€šè¿‡æ‰©ç¼©å®ç°é‡å»ºpod
kubectl scale deployment &lt;deployment_name&gt; --replicas=0 -n &lt;namespace&gt;kubectl scale deployment &lt;deployment_name&gt; --replicas=2 -n &lt;namespace&gt;

æ–¹æ³•å››ï¼šé€šè¿‡rolloutå®ç°é‡å»ºpod
kubectl rollout restart deployment &lt;deployment_name&gt; -n &lt;namespace&gt;

æ–¹æ³•äº”ï¼šé€šè¿‡dockeråœæ­¢å®¹å™¨å®ç°é‡å»ºpodå‰ææ˜¯ä¿è¯podçš„é‡å¯ç­–ç•¥æ˜¯Alwaysã€‚ç™»å½•åˆ°podæ‰€åœ¨å®¿ä¸»æœºï¼Œé€šè¿‡dockerå‘½ä»¤åœæ­¢podçš„pauseå®¹å™¨ã€‚
docker ps | grep xxxdocker stop yyy

pauseå®¹å™¨è¢«åœæ­¢åï¼Œkubectl get pods xxxçœ‹åˆ°çš„æ˜¯podé‡å¯ã€‚kubectl describe pod xxxä¼šçœ‹åˆ°ï¼šPod xxx changed, it will be killed and re-created.æ˜¯çš„ï¼Œå®é™…ä¸Špodçš„æ‰€æœ‰å®¹å™¨éƒ½ä¼šè¢«é‡å»ºã€‚
åˆ›å»ºservice/æš´éœ²æœåŠ¡å‘½ä»¤å¼æŒ‡ä»¤ä¸ºdeploymentåˆ›å»ºclusteripï¼Œæš´éœ²clusteripçš„80ç«¯å£ï¼Œå¯¹åº”podçš„80ç«¯å£
kubectl expose deployment deployment-name --port=80 --name svc-name

ä¸ºdeploymentåˆ›å»ºclusteripï¼Œæš´éœ²clusteripçš„6789ç«¯å£ï¼Œå¯¹åº”podçš„80ç«¯å£
kubectl expose deployment deployment-name --target-port=80 --port=6789kubectl expose -f vk-deploy.yaml --target-port=80 --port=6789

åˆ›å»ºnodeportï¼Œæš´éœ²clusteripçš„80ç«¯å£ï¼Œå¯¹åº”podçš„80ç«¯å£ï¼Œæš´éœ²nodeçš„éšæœºç«¯å£
kubectl expose deployment deployment-name --port=80 --type=NodePort --name svc-name

åˆ›å»ºclusteripï¼Œæš´éœ²clusteripçš„80ç«¯å£ï¼Œå¯¹åº”podçš„80ç«¯å£
kubectl create service clusterip svc-name --tcp=80:80

åˆ›å»ºnodeportï¼Œæš´éœ²clusteripçš„80ç«¯å£ï¼Œå¯¹åº”podçš„podç«¯å£ï¼Œæš´éœ²nodeçš„30080ç«¯å£
kubectl create service nodeport svc-name --tcp=80:80 --node-port=30080


å‘½ä»¤å¼é…ç½®æ–‡ä»¶ç”Ÿæˆserviceçš„yamlæ–‡ä»¶æ¨¡æ¿ï¼ˆæ¨èæ–¹æ³•ï¼‰ï¼š
kubectl create service clusterip vk-svc --tcp=&quot;5678:80&quot; --dry-run -o yaml &gt; service.yaml

åˆ›å»ºservice
kubectl create -f service.yaml

æ›´å¤šå†…å®¹ï¼Œå‚è€ƒKubernetes kubectl create service å‘½ä»¤è¯¦è§£å’ŒServiceã€‚
å£°æ˜å¼é…ç½®æ–‡ä»¶åˆ›å»ºservice
kubectl apply -f service.yaml

kubectl port-forwardå¯¹å¤–æš´éœ²æœåŠ¡ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨nodeportæˆ–è€…loadbalanceç±»å‹çš„serviceã€‚å¦‚æœæ˜¯ä¸´æ—¶æµ‹è¯•ï¼Œè¿˜å¯ä»¥ä½¿ç”¨kubectl port-forwardã€‚
kubectl port-forward é€šè¿‡ç«¯å£è½¬å‘æ˜ å°„æœ¬åœ°ç«¯å£åˆ°æŒ‡å®šçš„åº”ç”¨ç«¯å£ï¼Œä»è€Œè®¿é—®é›†ç¾¤ä¸­çš„åº”ç”¨ç¨‹åºã€‚
# æœ¬åœ°ç«¯å£æ˜ å°„podç«¯å£kubectl port-forward pod/$pod_name -n $namespace $node_port:$pod_portkubectl port-forward pod/$pod_name -n $namespace --address 0.0.0.0 $node_port:$pod_port# æœ¬åœ°ç«¯å£æ˜ å°„serviceç«¯å£kubectl port-forward service/$service_name -n $namespace $node_port:$service_portkubectl port-forward service/$service_name -n $namespace --address 0.0.0.0 $node_port:$service_port

æ³¨æ„ï¼šä½¿ç”¨è¯¥è½¬å‘åŠŸèƒ½ä¾èµ–socatï¼Œéœ€è¦æå‰å®‰è£…å¦åˆ™ä¼šæŠ¥é”™ï¼šunable to do port forwarding: socat not found
yum install -y socat

ç‰ˆæœ¬å›é€€# æŸ¥çœ‹å‘å¸ƒå†å²kubectl rollout history deployment deployment-name# æŸ¥çœ‹å‘å¸ƒçŠ¶æ€kubectl rollout status deployment deployment-name# å›é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬kubectl rollout undo deployment deployment-name
rolloutè¡¨ç¤ºroll outï¼Œè¿™é‡Œç¿»è¯‘ä¸ºå‘å¸ƒ
configmapå’Œsecret1ã€åˆ›å»ºconfigmap
kubectl create configmap special-config --from-literal=special.how=very --from-literal=special.type=charmkubectl create configmap game-config-3 --from-file=&lt;my-key-name&gt;=&lt;path-to-file&gt;

2ã€åˆ›å»ºsecret
# åœ¨å‘½ä»¤ä¸­æŒ‡å®škeyå’Œvaluekubectl create secret generic db-user-pass --from-literal=username=voidking --from-literal=password=&#x27;vkpassword&#x27;kubectl get secret db-user-pass -o yaml# åœ¨æ–‡ä»¶ä¸­æŒ‡å®švalueecho -n &#x27;voidking&#x27; &gt; ./username.txtecho -n &#x27;vkpassword&#x27; &gt; ./password.txtkubectl create secret generic db-user-pass --from-file=./username.txt --from-file=./password.txtkubectl create secret generic db-user-pass --from-file=username=./username.txt --from-file=password=./password.txtkubectl get secret db-user-pass -o yaml

åœ¨yamlæ–‡ä»¶ä¸­çœ‹åˆ°çš„usernameå’Œpasswordï¼Œéƒ½æ˜¯ç»è¿‡base64åŠ å¯†çš„å­—ç¬¦ä¸²ã€‚
# åŠ å¯†echo -n &#x27;voidking&#x27; | base64# è§£å¯†echo &#x27;dm9pZGtpbmc=&#x27; | base64 --decode

åˆ›å»ºå¤šä¸ªèµ„æºå¦‚æœè¦åˆ›å»ºnsï¼Œç„¶ååœ¨nsä¸­åˆ›å»ºconfigmapï¼Œæœ€ååˆ›å»ºdeploymentï¼ˆä¾èµ–configmapï¼‰ï¼Œè¯¥æ€ä¹ˆæ“ä½œï¼Ÿæ–¹æ³•ä¸€ï¼šæŒ¨ä¸ªapply
kubectl apply -f ns.yamlkubectl apply -f cm.yamlkubectl apply -f deploy.yaml

æ–¹æ³•äºŒï¼šæŒ‰é¡ºåºåˆå¹¶ï¼Œç„¶åapply
cat ns.yaml &lt;(echo &quot;---&quot;) cm.yaml &lt;(echo &quot;---&quot;) deploy.yaml &gt; ns-cm-deploy.yamlkubecl apply -f ns-cm-deploy.yaml

æ–¹æ³•ä¸‰ï¼šå¤šæ¬¡apply
kubectl apply -f .kubectl apply -f .

æ–¹æ³•å››ï¼šæ·»åŠ ç¼–å·
mv ns.yaml 00-ns.yamlmv cm.yaml 01-cm.yamlmv deploy.yaml 02-deploy.yamlkubectl apply -f .

å¼ºåˆ¶åˆ é™¤namspaceé—®é¢˜æè¿°æœ‰æ—¶ï¼Œé€šè¿‡kubectlåˆ é™¤äº†ä¸€ä¸ªnamespaceä¹‹åï¼Œnamespaceå¹¶ä¸ä¼šæ¶ˆå¤±ï¼Œè€Œæ˜¯ä¸€ç›´å¤„äºTerminatingçŠ¶æ€ã€‚
è§£å†³åŠæ³•æ–¹æ³•ä¸€ï¼šå…ˆåˆ é™¤namespaceä¸­çš„èµ„æº
kubectl get ns &lt;your-namespace&gt; -oyamlkubectl api-resources --verbs=list --namespaced -o name | \    xargs -n 1 kubectl get --show-kind --ignore-not-found -n &lt;your-namespace&gt;kubectl delete &lt;resource-type&gt; &lt;resource-name&gt; --namespace=&lt;your-namespace&gt;

æ–¹æ³•äºŒï¼šå¼ºåˆ¶åˆ é™¤
kubectl delete ns &lt;your-namespace&gt; --force --grace-period=0

æ–¹æ³•ä¸‰ï¼šå¼ºåˆ¶åˆ é™¤plus
kubectl patch namespace &lt;your-namespace&gt; -p &#x27;&#123;&quot;metadata&quot;:&#123;&quot;finalizers&quot;: []&#125;&#125;&#x27; --type=merge

æ–¹æ³•å››ï¼šæ–¹æ³•ä¸‰çš„APIè°ƒç”¨ç‰ˆ
1ã€è·å–namepaceé…ç½®
kubectl get ns &lt;your-namespace&gt; -o json &gt; namespace.json

2ã€ç¼–è¾‘namespaceé…ç½®ç¼–è¾‘namespace.jsonï¼Œä» finalizers å­—æ®µä¸­åˆ é™¤ kubernetesã€‚
3ã€æäº¤namespaceé…ç½®
kubectl proxy --port=6880 &amp;curl -k -H &quot;Content-Type: application/json&quot; -X  PUT --data-binary @namespace.json http://127.0.0.1:6880/api/v1/namespaces/$&#123;NAMESPACE&#125;/finalizekubectl get ns










]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>shell</tag>
        <tag>kubectl</tag>
      </tags>
  </entry>
  <entry>
    <title>kubectlå‘½ä»¤â€”â€”é…ç½®ç¯‡</title>
    <url>/dev-kubectl-config/</url>
    <content><![CDATA[kubectlç®€ä»‹
Kubectl is a command line interface for running commands against Kubernetes clusters. 

æ²¡é”™ï¼Œkubectlæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æ¥æ§åˆ¶K8Sé›†ç¾¤ã€‚kubectlè¯¥æ€ä¹ˆè¯»ï¼Ÿå¯ä»¥å‚è€ƒHowToPronounce-kubectlï¼ŒéƒåŒå­¦å–œæ¬¢è¯»ä½œkubecontrolã€‚
kubectlå‘½ä»¤æ ¼å¼ä¸ºï¼š
kubectl [command] [TYPE] [NAME] [flags]

æ›´å¤šå†…å®¹ï¼Œå‚è€ƒï¼š

Overview of kubectl
kubectl Cheat Sheet
The Kubectl Book
Kubernetes kubectl å‘½ä»¤è¡¨

ã€ŠK8Så…¥é—¨ç¯‡ã€‹ä¸€æ–‡ä¸­ï¼Œå·²ç»å­¦ä¹ äº†kubectlçš„å®‰è£…æ–¹æ³•ï¼Œå¹¶ä¸”ä½¿ç”¨äº†ä¸€äº›ç®€å•å‘½ä»¤ã€‚æœ¬æ–‡å­¦ä¹ kubectlçš„é…ç½®æ–¹æ³•å’Œé…ç½®æŠ€å·§ã€‚


å®‰è£…kubectlcurl -LO https://dl.k8s.io/release/v1.22.15/bin/linux/amd64/kubectlchmod a+x kubectlmv kubectl /usr/local/bin/ln -s /usr/local/bin/kubectl /usr/bin/kubectlkubectl -h

è·å–kubeconfigè¦æƒ³æ­£å¸¸ä½¿ç”¨kubectlå‘½ä»¤ï¼Œé¦–å…ˆè¦æ‹¿åˆ°ç”¨æˆ·è®¤è¯é…ç½®ä¿¡æ¯ï¼ˆkubeconfigï¼‰ã€‚
kubeconfigè·å–æ–¹å¼ï¼š

ä½¿ç”¨kubeadmå®‰è£…çš„K8Sé›†ç¾¤ï¼Œé»˜è®¤çš„kubeconfigé…ç½®æ–‡ä»¶è·¯å¾„ä¸º /etc/kubernetes/admin.conf
ä½¿ç”¨minikubeå®‰è£…çš„K8Sé›†ç¾¤ï¼Œé»˜è®¤çš„kubeconfigé…ç½®æ–‡ä»¶è·¯å¾„ä¸º $&#123;HOME&#125;/.kube/config
ç”¨æˆ·é»˜è®¤ä½¿ç”¨çš„kubeconfigé…ç½®æ–‡ä»¶è·¯å¾„ä¸º $&#123;HOME&#125;/.kube/config
é˜¿é‡Œäº‘/è…¾è®¯äº‘ç­‰äº‘å¹³å°æä¾›çš„K8Sé›†ç¾¤ï¼Œä»é›†ç¾¤ç®¡ç†é¡µé¢ä¸Šè·å–kubeconfigé…ç½®ï¼Œä¿å­˜ä¸º $&#123;HOME&#125;/.kube/config å³å¯

æŒ‡å®šé…ç½®æ–‡ä»¶å¦‚æœæœ‰å¤šä¸ªé›†ç¾¤çš„å¤šä¸ªkubeconfigé…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯èƒ½éœ€è¦æŒ‡å®šä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚
æŒ‡å®šé»˜è®¤é…ç½®æ–‡ä»¶export KUBECONFIG=~/.kube/config

æŸ¥çœ‹kubeconfigé…ç½®å†…å®¹kubectl config view

æŒ‡å®šé…ç½®æ–‡ä»¶å’Œcontextkubectl config --kubeconfig=/root/vk-kube-config use-context voidking@kubenertes

æŒ‡å®šå•æ¬¡å‘½ä»¤çš„é…ç½®æ–‡ä»¶kubectl get deployments --kubeconfig=/root/.kube/config

æŒ‡å®šé»˜è®¤çš„namespacekubectl config get-contextskubectl config set-context --current --namespace=voidkingkubectl config set-context $(kubectl config current-context) --namespace=voidking

é…ç½®æ•´åˆåŒæ—¶ä½¿ç”¨å¤šä¸ªé…ç½®export KUBECONFIG=~/.kube/config:~/Download/new-config

è¦ä¿è¯å¤šä¸ªconfigçš„cluster nameã€user nameã€context nameä¸åŒï¼Œå¦åˆ™æ— æ³•åŒºåˆ†å®ƒä»¬ï¼Œä¼šé€ æˆé…ç½®æ··ä¹±ã€‚å¦‚æœå¤šä¸ªconfigçš„cluster nameã€user nameã€context nameç›¸åŒï¼Œå¯ä»¥è‡ªè¡Œä¿®æ”¹ä¸€ä¸‹ï¼Œæ”¹æˆä¸åŒçš„nameï¼Œä¿®æ”¹nameä¸ä¼šå½±å“å¯¹é›†ç¾¤çš„æ“ä½œã€‚
å¤šä¸ªé…ç½®æ•´åˆæˆä¸€ä¸ªé…ç½®KUBECONFIG=~/.kube/config:~/Downloads/new-config kubectl config view --merge --flatten &gt; ~/.kube/newconfigexport KUBECONFIG=~/.kube/newconfig

æŸ¥çœ‹å’Œä½¿ç”¨é…ç½®kubectl config get-contextskubectl config use-context voidking@kubenertes

åˆ é™¤æŸä¸ªé›†ç¾¤é…ç½®kubectl config delete-context xxxkubectl config delete-user xxxkubectl config delete-cluster xxx

é…ç½®æ•´åˆ2.0å¤šä¸ªkubeconfigåˆå¹¶æˆä¸€ä¸ªkubeconfigåï¼Œå¯ä»¥é€šè¿‡kubectl configå®ç°åœ¨å¤šä¸ªk8sé›†ç¾¤é—´åˆ‡æ¢ï¼Œå¾ˆæ–¹ä¾¿ã€‚
ä½†æ˜¯ï¼Œå› ä¸ºå¾ˆå¤šé›†ç¾¤çš„cluster nameã€user nameã€context nameæ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥æ¯å½“æœ‰æ–°çš„k8sé›†ç¾¤åŠ å…¥æ—¶ï¼Œæˆ–è€…kubeconfigè¿‡æœŸéœ€è¦é‡æ–°åŠ å…¥æ—¶ï¼Œæˆ‘ä»¬éƒ½éœ€è¦ä¿®æ”¹å¯¹æ–°çš„configä¸­çš„nameè¿›è¡Œä¿®æ”¹ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒéº»çƒ¦ã€‚
è¿™é‡Œæä¾›å¦å¤–ä¸€ç§é…ç½®æ•´åˆçš„æ–¹æ³•ï¼šconfigæ–‡ä»¶æ”¹ä¸ºè½¯é“¾ï¼Œè½¯é“¾åˆ°çœŸå®configï¼Œé€šè¿‡ä¿®æ”¹è½¯é“¾åˆ‡æ¢é…ç½®ã€‚
1ã€å‡†å¤‡çœŸå®config
mkdir -p ~/.kubeconfig/dev/mkdir -p ~/.kubeconfig/test/vim ~/.kubeconfig/dev/configvim ~/.kubeconfig/test/config

2ã€å‡†å¤‡ä¿®æ”¹è½¯é“¾è„šæœ¬ change-kubeconfig.sh
#!/bin/bashCLUSTER=$1if [[ -z &quot;$CLUSTER&quot; ]];then    config_path=$(ls -l $HOME/.kube/config | awk &#x27;&#123;print $NF&#125;&#x27;)    echo &quot;Current kubeconfig is $config_path&quot;    echo &quot;You can specify a cluster to change the kubeconfig!&quot;    exit 1fiif [[ ! -e &quot;$HOME/.kubeconfig/$CLUSTER/config&quot; ]];then    echo &quot;Config file $HOME/.kubeconfig/$CLUSTER/config does not exist!&quot;    exit 1filn -sf $HOME/.kubeconfig/$CLUSTER/config $HOME/.kube/configecho &quot;Kubeconfig has changed to $HOME/.kubeconfig/$CLUSTER/config&quot;

3ã€è„šæœ¬é…ç½®
chmod a+x change-kubeconfig.shmkdir $HOME/.scriptsmv change-kubeconfig.sh $HOME/.scriptscat &lt;&lt;EOF | tee -a $HOME/.bash_profile# kubeconfig scriptalias changek=&quot;\$HOME/.scripts/change-kubeconfig.sh&quot;EOF

4ã€ä½¿ç”¨è„šæœ¬
source .bash_profilechangek devkubectl get nodeschangek testkubectl get nodes


å‘½ä»¤è‡ªåŠ¨è¡¥å…¨linuxç³»ç»Ÿé…ç½®yum install -y bash-completionsource /usr/share/bash-completion/bash_completionsource &lt;(kubectl completion bash)echo &quot;source /usr/share/bash-completion/bash_completion&quot; &gt;&gt; ~/.bash_profileecho &quot;source &lt;(kubectl completion bash)&quot; &gt;&gt; ~/.bash_profile

é…ç½®åï¼Œè¾“å…¥kubectl get såï¼Œä¸¤æ¬¡æŒ‰ä¸‹tabé”®ï¼Œä¼šæç¤ºå¯ä»¥é€‰æ‹©çš„èµ„æºã€‚è¾“å…¥kubectl get secåï¼ŒæŒ‰ä¸‹tabé”®ï¼Œä¼šè‡ªåŠ¨è¡¥å…¨å‘½ä»¤ã€‚
macç³»ç»Ÿé…ç½®brew install bash-completionsource &lt;(kubectl completion zsh)echo &quot;source &lt;(kubectl completion zsh)&quot; &gt;&gt; ~/.bash_profile

å¿«æ·å‘½ä»¤kubectlç¼©å†™ä¸ºkwhich kubectlalias k=&quot;/usr/local/bin/kubectl&quot;complete -F __start_kubectl k

å»ºè®®æŠŠé…ç½®å†™å…¥ .bash_profile ï¼Œç™»å½•shellååˆ«åè‡ªåŠ¨ç”Ÿæ•ˆã€‚
å‘½ä»¤åˆå¹¶alias kg=&quot;kubectl get&quot;alisa kd=&quot;kubectl describe&quot;
kubectl getåˆå¹¶ä¸ºkgï¼Œkubectl describeåˆå¹¶ä¸ºkdã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>cloudnative</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>shell</tag>
        <tag>kubectl</tag>
      </tags>
  </entry>
  <entry>
    <title>K8Så…¥é—¨ç¯‡</title>
    <url>/dev-k8s-start/</url>
    <content><![CDATA[K8Sç®€ä»‹Dockeræœ€å¼€å§‹æ˜¯ä¸€ä¸ªç®¡ç†å®¹å™¨çš„å·¥å…·ï¼Œåæ¥å‘å±•æˆä¸ºå®¹å™¨äº‘ã€‚å®¹å™¨äº‘ä»¥å®¹å™¨ä¸ºèµ„æºåˆ†å‰²å’Œè°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œå°è£…æ•´ä¸ªè½¯ä»¶è¿è¡Œæ—¶ç¯å¢ƒï¼Œä¸ºå¼€å‘è€…å’Œç³»ç»Ÿç®¡ç†å‘˜æä¾›ç”¨äºæ„å»ºã€å‘å¸ƒå’Œè¿è¡Œåˆ†å¸ƒå¼åº”ç”¨çš„å¹³å°ã€‚å½“å®¹å™¨äº‘ä¸“æ³¨äºèµ„æºå…±äº«ä¸éš”ç¦»ã€å®¹å™¨ç¼–æ’ä¸éƒ¨ç½²æ—¶ï¼Œå®ƒæ›´æ¥è¿‘ä¼ ç»Ÿçš„IaaSï¼›å½“å®¹å™¨äº‘æ¸—é€åˆ°åº”ç”¨æ”¯æ’‘ä¸è¿è¡Œæ—¶ç¯å¢ƒæ—¶ï¼Œå®ƒæ˜¯ä¸€ç§PaaSã€‚
ä½†æ˜¯ï¼Œå¦‚æœæƒ³è¦å°†Dockeråº”ç”¨äºå…·ä½“çš„ä¸šåŠ¡å®ç°ï¼Œæ˜¯å­˜åœ¨å›°éš¾çš„â€”â€”ç¼–æ’ã€ç®¡ç†å’Œè°ƒåº¦ç­‰å„ä¸ªæ–¹é¢ï¼Œéƒ½ä¸å®¹æ˜“ã€‚äºæ˜¯ï¼Œäººä»¬è¿«åˆ‡éœ€è¦ä¸€å¥—ç®¡ç†ç³»ç»Ÿï¼Œå¯¹DockeråŠå®¹å™¨è¿›è¡Œæ›´é«˜çº§æ›´çµæ´»çš„ç®¡ç†ã€‚äºæ˜¯ï¼ŒKuberneteså‡ºç°äº†ã€‚Kubernetesè¿™ä¸ªå•è¯æ¥è‡ªäºå¸Œè…Šè¯­ï¼Œå«ä¹‰æ˜¯èˆµæ‰‹æˆ–é¢†èˆªå‘˜ã€‚ç¼©å†™ä¸ºK8Sï¼Œ8ä»£è¡¨â€œuberneteâ€è¿™8ä¸ªå­—ç¬¦ã€‚
æ›´å¤šå†…å®¹ï¼Œå‚è€ƒ10åˆ†é’Ÿçœ‹æ‡‚Dockerå’ŒK8Så’Œæµ™å¤§SELå®éªŒå®¤çš„ã€ŠDocker å®¹å™¨ä¸å®¹å™¨äº‘ã€‹ã€‚


K8Sæ¶æ„K8Sèµ·æºäºBorgï¼ŒBorgæ˜¯è°·æ­Œå†…éƒ¨çš„å¤§è§„æ¨¡é›†ç¾¤ç®¡ç†ç³»ç»Ÿï¼Œè´Ÿè´£å¯¹è°·æ­Œå†…éƒ¨å¾ˆå¤šæ ¸å¿ƒæœåŠ¡çš„è°ƒåº¦å’Œç®¡ç†ã€‚Borg çš„ç›®çš„æ˜¯è®©ç”¨æˆ·èƒ½å¤Ÿä¸å¿…æ“å¿ƒèµ„æºç®¡ç†çš„é—®é¢˜ï¼Œè®©ä»–ä»¬ä¸“æ³¨äºè‡ªå·±çš„æ ¸å¿ƒä¸šåŠ¡ï¼Œå¹¶ä¸”åšåˆ°è·¨å¤šä¸ªæ•°æ®ä¸­å¿ƒçš„èµ„æºåˆ©ç”¨ç‡æœ€å¤§åŒ–ã€‚Borg ä¸»è¦ç”± BorgMasterã€Borgletã€borgcfg å’Œ Scheduler ç»„æˆã€‚

BorgMaster æ˜¯æ•´ä¸ªé›†ç¾¤çš„å¤§è„‘ï¼Œè´Ÿè´£ç»´æŠ¤æ•´ä¸ªé›†ç¾¤çš„çŠ¶æ€ï¼Œå¹¶å°†æ•°æ®æŒä¹…åŒ–åˆ° Paxos å­˜å‚¨ä¸­ï¼›
Scheduer è´Ÿè´£ä»»åŠ¡çš„è°ƒåº¦ï¼Œæ ¹æ®åº”ç”¨çš„ç‰¹ç‚¹å°†å…¶è°ƒåº¦åˆ°å…·ä½“çš„æœºå™¨ä¸Šå»ï¼›
Borglet è´Ÿè´£çœŸæ­£è¿è¡Œä»»åŠ¡ï¼ˆåœ¨å®¹å™¨ä¸­ï¼‰ï¼›
borgcfg æ˜¯ Borg çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºè·Ÿ Borg ç³»ç»Ÿäº¤äº’ï¼Œä¸€èˆ¬é€šè¿‡ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥æäº¤ä»»åŠ¡ã€‚

K8Så€Ÿé‰´äº†Borgçš„è®¾è®¡ç†å¿µï¼Œæ•´ä½“æ¶æ„è·Ÿ Borg éå¸¸åƒï¼Œä¸€ä¸ªK8Sç³»ç»Ÿï¼Œé€šå¸¸ç§°ä¸ºä¸€ä¸ªK8Sé›†ç¾¤ï¼ˆClusterï¼‰ã€‚è¿™ä¸ªé›†ç¾¤ä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€ä¸ªMasterèŠ‚ç‚¹ï¼ˆä¸»èŠ‚ç‚¹ï¼‰å’Œä¸€ç¾¤NodeèŠ‚ç‚¹ï¼ˆè®¡ç®—èŠ‚ç‚¹ï¼‰ã€‚MasterèŠ‚ç‚¹ä¸»è¦è¿˜æ˜¯è´Ÿè´£ç®¡ç†å’Œæ§åˆ¶ã€‚NodeèŠ‚ç‚¹æ˜¯å·¥ä½œè´Ÿè½½èŠ‚ç‚¹ï¼Œé‡Œé¢æ˜¯å…·ä½“çš„å®¹å™¨ã€‚
MasterèŠ‚ç‚¹åŒ…æ‹¬API Serverã€Schedulerã€Controller managerã€Etcdç­‰ã€‚

API Serveræä¾›äº†èµ„æºæ“ä½œçš„å”¯ä¸€å…¥å£ï¼Œå¹¶æä¾›è®¤è¯ã€æˆæƒã€è®¿é—®æ§åˆ¶ã€API æ³¨å†Œå’Œå‘ç°ç­‰æœºåˆ¶ï¼›
Schedulerè´Ÿè´£èµ„æºçš„è°ƒåº¦ï¼ŒæŒ‰ç…§é¢„å®šçš„è°ƒåº¦ç­–ç•¥å°† Pod è°ƒåº¦åˆ°ç›¸åº”çš„æœºå™¨ä¸Šï¼›
Controller managerè´Ÿè´£ç»´æŠ¤é›†ç¾¤çš„çŠ¶æ€ï¼Œæ¯”å¦‚æ•…éšœæ£€æµ‹ã€è‡ªåŠ¨æ‰©å±•ã€æ»šåŠ¨æ›´æ–°ç­‰ï¼›
Etcdä¿å­˜äº†æ•´ä¸ªé›†ç¾¤çš„çŠ¶æ€ã€‚

NodeèŠ‚ç‚¹åŒ…æ‹¬Dockerã€Kubeletã€Proxyã€Podç­‰ã€‚

Dockerè´Ÿè´£ç®¡ç†å®¹å™¨ã€‚
Kubeletè´Ÿè´£ç»´æŠ¤å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒæ—¶ä¹Ÿè´Ÿè´£ Volumeï¼ˆCVIï¼‰å’Œç½‘ç»œï¼ˆCNIï¼‰çš„ç®¡ç†ï¼›
Proxyè´Ÿè´£ä¸ºPodå¯¹è±¡æä¾›ä»£ç†ã€‚
Podæ˜¯Kubernetesæœ€åŸºæœ¬çš„æ“ä½œå•å…ƒã€‚ä¸€ä¸ªPodä»£è¡¨ç€é›†ç¾¤ä¸­è¿è¡Œçš„ä¸€ä¸ªè¿›ç¨‹ï¼Œå®ƒå†…éƒ¨å°è£…äº†ä¸€ä¸ªæˆ–å¤šä¸ªç´§å¯†ç›¸å…³çš„å®¹å™¨ã€‚é™¤äº†Podä¹‹å¤–ï¼ŒK8Sè¿˜æœ‰ä¸€ä¸ªServiceçš„æ¦‚å¿µï¼Œä¸€ä¸ªServiceå¯ä»¥çœ‹ä½œä¸€ç»„æä¾›ç›¸åŒæœåŠ¡çš„Podçš„å¯¹å¤–è®¿é—®æ¥å£ã€‚

é™¤äº†æ ¸å¿ƒç»„ä»¶ï¼Œè¿˜æœ‰ä¸€äº›æ¨èçš„ Add-onsï¼š

kube-dns è´Ÿè´£ä¸ºæ•´ä¸ªé›†ç¾¤æä¾› DNS æœåŠ¡
Ingress Controller ä¸ºæœåŠ¡æä¾›å¤–ç½‘å…¥å£
Heapster æä¾›èµ„æºç›‘æ§
Dashboard æä¾› GUI
Federation æä¾›è·¨å¯ç”¨åŒºçš„é›†ç¾¤
Fluentd-elasticsearch æä¾›é›†ç¾¤æ—¥å¿—é‡‡é›†ã€å­˜å‚¨ä¸æŸ¥è¯¢

æ›´å¤šå†…å®¹ï¼Œå‚è€ƒKubernetes æ¶æ„åŸç†ã€‚
Minikubeå®‰è£…Minikubeæ˜¯åœ¨ä¸ªäººè®¡ç®—æœºä¸Šçš„è™šæ‹Ÿæœºä¸­è¿è¡Œå•èŠ‚ç‚¹Kubernetesé›†ç¾¤çš„å·¥å…·ã€‚å› ä¸ºminikubeè¦å¯åŠ¨virtualboxè™šæ‹Ÿæœºï¼Œåœ¨è™šæ‹Ÿæœºä¸­è¿è¡Œk8sé›†ç¾¤ã€‚æ‰€ä»¥è¿™é‡Œæœ‰ä¸¤ä¸ªå®‰è£…æ€è·¯ï¼šæ€è·¯ä¸€ï¼šåœ¨centos7è™šæ‹Ÿæœºä¸­å®‰è£…virtualboxï¼Œä»¥åŠminikubeã€‚æ€è·¯äºŒï¼šåœ¨æœ¬æœºwin10ä¸­å®‰è£…virtualboxï¼Œä»¥åŠminikubeã€‚
å¯¹äºæ€è·¯ä¸€ï¼Œå› ä¸ºvirtualboxä¸æ”¯æŒIntelå¤„ç†å™¨çš„åµŒå¥—è™šæ‹ŸåŒ–ï¼Œå› æ­¤minikubeæ— æ³•åœ¨centos7è™šæ‹Ÿæœºä¸­å†å¯åŠ¨è™šæ‹Ÿæœºï¼Œè¯¥æ€è·¯ä¸å¯è¡Œã€‚
æœ¬æ–‡æ¥ä¸‹æ¥ä½¿ç”¨æ€è·¯äºŒè¿›è¡Œå®‰è£…ï¼Œé»˜è®¤virtualboxå·²ç»å®‰è£…å®Œæˆã€‚å®‰è£…æ–¹æ³•å‚è€ƒ

Install Minikube and Docker with VirtualBox on Windows 10 Home
Kubernetes å­¦ä¹ ç¬”è®°ä¹‹ MiniKube å®‰è£…

å®‰è£…Docker Toolbox1ã€ä¸‹è½½Docker Toolboxï¼ŒåŒå‡»å®‰è£…ã€‚
2ã€å¯åŠ¨Docker Toolboxæ‰“å¼€Docker quickstart terminalï¼ŒDockerä¼šè¿›è¡Œåˆå§‹åŒ–ã€‚
é•œåƒåŠ é€Ÿå™¨å‚è€ƒã€ŠDockeré•œåƒç«™çš„é…ç½®å’Œä½¿ç”¨ã€‹é…ç½®é•œåƒåŠ é€Ÿå™¨ï¼Œæœ¬æ–‡ä¸­ä½¿ç”¨é˜¿é‡Œäº‘çš„é•œåƒåŠ é€Ÿå™¨ã€‚
1ã€è®¿é—®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨ï¼Œå¾—åˆ°ä¸€ä¸ªä¸“å±çš„åŠ é€Ÿåœ°å€ã€‚
2ã€å¯¹äºDocker Toolboxç”¨æˆ·ï¼Œé¦–å…ˆè¿›å…¥defaultè™šæ‹Ÿæœºdocker-machine ssh default
3ã€è®¾ç½®åŠ é€Ÿåœ°å€
sudo sed -i &quot;s|EXTRA_ARGS=&#x27;|EXTRA_ARGS=&#x27;--registry-mirror=https://wrqtu3hz.mirror.aliyuncs.com |g&quot; /var/lib/boot2docker/profileexit

4ã€éªŒè¯é…ç½®
docker-machine restart defaultdocker info
å¦‚æœå‡ºç°Registry Mirrorså’ŒåŠ é€Ÿåœ°å€ï¼Œåˆ™è¡¨æ˜è®¾ç½®æˆåŠŸã€‚
å¸¸ç”¨å‘½ä»¤ï¼š
# é‡å¯ç”µè„‘åï¼Œéœ€è¦æ‰‹åŠ¨å¯åŠ¨defaultè™šæ‹Ÿæœºdocker-machine start default# defaultè™šæ‹ŸæœºIPå‘ç”Ÿå˜åŠ¨æ—¶ï¼Œéœ€è¦é‡æ–°ç”Ÿæˆé…ç½®docker-machine regenerate-certs defaultdocker-machine enveval $(&quot;C:\Program Files\Docker Toolbox\docker-machine.exe&quot; env)

å®‰è£…Minikube1ã€ä¸‹è½½é˜¿é‡Œäº‘ç‰ˆminikube v1.2.0ï¼Œæ”¾å…¥k8sç›®å½•ï¼Œé‡å‘½åä¸ºminikube.exeï¼Œå¹¶åŠ å…¥ç¯å¢ƒå˜é‡ã€‚å…¶ä»–ç‰ˆæœ¬ä¿®æ”¹ä¸‹è½½çš„urlå³å¯ï¼Œç‰ˆæœ¬å·å¯ä»¥åœ¨github aliyun minikubeä¸­æ‰¾åˆ°ã€‚
ä¹‹æ‰€ä»¥ä½¿ç”¨é˜¿é‡Œäº‘ç‰ˆminikubeï¼Œæ˜¯å› ä¸ºåŸç‰ˆçš„minikubeåœ¨å›½å†…å¯åŠ¨å¤±è´¥ï¼Œæ— æ³•ä¸‹è½½Minikube ISOé•œåƒã€‚
2ã€éªŒè¯å®‰è£…å³é”®+Shiftæ‰“å¼€Powershellï¼Œè¾“å…¥minikube version
3ã€å¯åŠ¨minikube
minikube start# orminikube start --vm-driver=virtualbox --registry-mirror=https://registry.docker-cn.com


4ã€éªŒè¯å¯åŠ¨minikube status
5ã€å¯åŠ¨minikube dashboardminikube dashboard

å…¶ä»–å®‰è£…æ–¹å¼å‚è€ƒInstall Minikubeã€‚
å®‰è£…kubectl1ã€ä¸‹è½½kubectlï¼ŒåŒæ ·æ”¾åˆ°k8sç›®å½•ã€‚
2ã€éªŒè¯å®‰è£…kubectl version
Hello Minikubeå‚è€ƒHello Minikubeï¼Œç›®æ ‡ï¼š

å°†éƒ¨ç½²hello worldåº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°Minikubeã€‚
è¿è¡Œåº”ç”¨ç¨‹åºã€‚
æŸ¥çœ‹åº”ç”¨æ—¥å¿—ã€‚

1ã€ä½¿ç”¨git bashå¯åŠ¨minikubeminikube start
2ã€å‡†å¤‡é•œåƒ
# å‡†å¤‡æ–‡ä»¶docker pull node:6.14.2vi server.jsvi Dockerfile# åˆ›å»ºé•œåƒdocker build -t voidking/hello-node .# ç™»å½•ä¸Šä¼ # docker loginwinpty docker logindocker push voidking/hello-node

å…¶ä¸­server.jså†™å…¥å†…å®¹ä¸ºï¼š
var http = require(&#x27;http&#x27;);var handleRequest = function(request, response) &#123;  console.log(&#x27;Received request for URL: &#x27; + request.url);  response.writeHead(200);  response.end(&#x27;Hello World!&#x27;);&#125;;var www = http.createServer(handleRequest);www.listen(8080);

Dockerfileå†™å…¥å†…å®¹ä¸ºï¼š
FROM node:6.14.2EXPOSE 8080COPY server.js .CMD node server.js

3ã€åˆ›å»ºç®¡ç†Podçš„Deploymentï¼ŒPodæ ¹æ®æä¾›çš„Dockeré•œåƒè¿è¡Œå®¹å™¨ã€‚
kubectl create deployment hello-node --image=voidking/hello-node

4ã€æŸ¥çœ‹Deploymentså’ŒPods
kubectl get deploymentskubectl get podskubectl describe pod hello-node

ç”±ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œåˆ›å»ºpodçš„è¿‡ç¨‹ä¸­ï¼ŒèŠ±è´¹æ—¶é—´æœ€é•¿çš„æ˜¯ä¸‹è½½é•œåƒçš„æ­¥éª¤ï¼Œå¤§çº¦10åˆ†é’Ÿã€‚è¿™é‡Œæœ‰ä¸ªç–‘é—®ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰ä½¿ç”¨æœ¬åœ°çš„é•œåƒï¼Ÿ
5ã€åˆ›å»ºæœåŠ¡ï¼Œå°†Podå…¬å¼€åˆ°å…¬å…±Internet
kubectl expose deployment hello-node --type=LoadBalancer --port=8080kubectl get servicesminikube service hello-node

åœ¨æ”¯æŒè´Ÿè½½å‡è¡¡å™¨çš„äº‘æä¾›å•†ä¸Šï¼Œå°†é…ç½®å¤–éƒ¨IPåœ°å€ä»¥è®¿é—®æœåŠ¡ã€‚åœ¨Minikubeä¸Šï¼ŒLoadBalancerç±»å‹é€šè¿‡minikube serviceå‘½ä»¤ä½¿æœåŠ¡å¯è®¿é—®ã€‚æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ï¼šhttp://192.168.99.103:30378/ ï¼Œå¯ä»¥çœ‹åˆ° Hello World!
6ã€æŸ¥çœ‹Podå’ŒServicekubectl get pod,svc -n kube-system

7ã€åˆ é™¤serviceå’Œdeploymentï¼ˆå¯é€‰ï¼‰
kubectl delete service hello-nodekubectl delete deployment hello-node

8ã€å…³é—­é›†ç¾¤ï¼Œåˆ é™¤é›†ç¾¤ï¼ˆå¯é€‰ï¼‰
minikube stopminikube delete

minikubeå¸¸ç”¨å‘½ä»¤# è¿›å…¥èŠ‚ç‚¹æœåŠ¡å™¨minikube ssh# æ‰§è¡ŒèŠ‚ç‚¹æœåŠ¡å™¨å‘½ä»¤ï¼Œä¾‹å¦‚æŸ¥çœ‹èŠ‚ç‚¹ docker infominikube ssh -- docker info# æŸ¥çœ‹æ’ä»¶ï¼Œå¯ç”¨æ’ä»¶minikube addons listminikube addons enable heapsterminikube addons disable heapster

åè®°è‡³æ­¤ï¼Œè·‘é€šäº†Minikubeçš„ç¬¬ä¸€ä¸ªDeploymentï¼Œk8sçš„ä¸‡é‡Œé•¿å¾å¼€å§‹äº†ç¬¬ä¸€æ­¥ã€‚æ¥ä¸‹æ¥ç»§ç»­æ·±å…¥å­¦ä¹ ï¼Œç›®æ ‡æ˜¯æ‹¿åˆ°åŒè¯ï¼šCertified Kubernetes Administrator (CKA) Programå’ŒCertified Kubernetes Application Developer (CKAD) Programï¼Œå…·ä½“è¦æ±‚å‚è€ƒcurriculumã€‚
ä¹¦ç­¾Learn Kubernetes Basics
Interactive Tutorial - Creating a Cluster
Installing Kubernetes with Minikube
Kubernetes å­¦ä¹ è·¯å¾„
å­¦ä¹  Kubernetes å’Œå®¹å™¨æŠ€æœ¯ä½“ç³»çš„æœ€ä½³æ–¹æ³•
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>docker</tag>
        <tag>virtualbox</tag>
      </tags>
  </entry>
  <entry>
    <title>beegoå…¥é—¨ç¯‡â€”â€”ä¸‹</title>
    <url>/dev-beego-start-2/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡ä¸­ç ”ç©¶å­¦ä¹ beegoçš„é™æ€æ–‡ä»¶é…ç½®ä½¿ç”¨æ–¹æ³•ï¼Œè¯·æ±‚è¿”å›å€¼çš„jsonåŒ–å¤„ç†ï¼Œä½¿ç”¨golandè°ƒè¯•beegoæ¡†æ¶ï¼Œæ•°æ®åº“ä»sqliteè¿ç§»åˆ°mysqlã€‚


é™æ€æ–‡ä»¶é…ç½®ä½¿ç”¨beeå·¥å…·ç”Ÿæˆçš„vkbeegoé¡¹ç›®ï¼Œindex.tplä¸­åŒ…å«cssã€‚å®é™…é¡¹ç›®ä¸­ï¼Œé™æ€æ–‡ä»¶æ˜¯å’Œæ¨¡æ¿æ–‡ä»¶åˆ†ç¦»çš„ï¼Œä¸‹é¢åˆ†ç¦»å‡ºindex.tplä¸­çš„cssï¼Œæ”¹æˆå¼•ç”¨çš„æ–¹å¼ã€‚
1ã€å›¾ç‰‡å‡†å¤‡index.tplä¸­çš„ä¸¤ä¸ªbase64æ ¼å¼çš„å›¾ç‰‡ï¼Œå¦å­˜ä¸ºicon.pngå’Œbackground.pngï¼Œæ”¾åˆ°åœ¨static/imgç›®å½•ä¸‹ã€‚
2ã€åœ¨static/cssç›®å½•ä¸‹æ–°å»ºindex.cssæ–‡ä»¶ï¼Œå†…å®¹ä»index.tplä¸­æ‹·è´ï¼Œè¯¦è§æºç v0.0.2ã€‚
3ã€ä¿®æ”¹views/index.tplæ–‡ä»¶ä¸ºï¼š
&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;  &lt;title&gt;Beego&lt;/title&gt;  &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;  &lt;link rel=&quot;icon&quot; href=&quot;/static/img/icon.png&quot; /&gt;  &lt;link rel=&quot;stylesheet&quot; href=&quot;/static/css/index.css&quot;&gt;&lt;/head&gt;&lt;body&gt;  &lt;!--keep the same--&gt;&lt;/body&gt;&lt;/html&gt;

å¯åŠ¨beegoï¼Œæ­¤æ—¶çœ‹åˆ°çš„é¦–é¡µå’ŒåŸé¦–é¡µç›¸åŒã€‚
jsonå¤„ç†å½“ä»Šï¼Œjsonå·²ç»æˆä¸ºäº†Webå¼€å‘ä¸­å‰åç«¯äº¤äº’çš„æ ‡å‡†æ ¼å¼ã€‚æœ¬èŠ‚ä¸­ä¿®æ”¹ã€Šbeegoå…¥é—¨ç¯‡â€”â€”ä¸­ã€‹ä¸€æ–‡ä¸­çš„å¢åˆ æŸ¥æ”¹æ¥å£ï¼Œä½¿è¿”å›æ•°æ®å˜æˆjsonæ ¼å¼ã€‚ä¸ºèŠ‚çœç¯‡å¹…ï¼Œä¸‹æ–‡ä¸­çœç•¥äº†æ–‡ä»¶å¤´éƒ¨ã€‚
1ã€ä¿®æ”¹controllers/user/add.goï¼Œå†…å®¹ä¸ºï¼š
// omit the headfunc (c *AddController) Get() &#123;    var username = c.GetString(&quot;username&quot;)    fmt.Println(username)    c.Ctx.WriteString(&quot;Please add user by post request.&quot;)&#125;func (c *AddController) Post() &#123;    var username = c.GetString(&quot;username&quot;)    var password = c.GetString(&quot;password&quot;)    var o = orm.NewOrm()    o.Using(&quot;default&quot;)    exist := o.QueryTable(&quot;user&quot;).Filter(&quot;UserName&quot;, username).Exist()    if exist&#123;        c.Data[&quot;json&quot;] = map[string]interface&#123;&#125;&#123;&quot;code&quot;: 1, &quot;ext&quot;: &quot;Username has been existed!&quot;&#125;        c.ServeJSON()        return    &#125;    var user = new(models.User)    user.Username = username    user.Password = password    id,err := o.Insert(user)    if err == nil &#123;        fmt.Println(id)        c.Data[&quot;json&quot;] = map[string]interface&#123;&#125;&#123;&quot;code&quot;: 0, &quot;userid&quot;: id,&quot;ext&quot;: &quot;User has been added!&quot;&#125;        c.ServeJSON()    &#125;else &#123;        c.Data[&quot;json&quot;] = map[string]interface&#123;&#125;&#123;&quot;code&quot;: 2, &quot;ext&quot;: &quot;Write to database failed!&quot;&#125;        c.ServeJSON()    &#125;    //c.Ctx.WriteString(&quot;add user: &quot; + username)    return&#125;

2ã€ä¿®æ”¹controllers/user/list.goï¼Œå†…å®¹ä¸ºï¼š
// omit the headfunc (c *ListController) Get() &#123;    var o = orm.NewOrm()    o.Using(&quot;default&quot;)    var qs orm.QuerySeter    qs = o.QueryTable(&quot;user&quot;)    var users []*models.User    //num, err := qs.All(&amp;users)    num, err := qs.All(&amp;users,&quot;Id&quot;, &quot;Username&quot;)    fmt.Printf(&quot;Returned Rows Num: %d, %s \n&quot;, num, err)    fmt.Println(users[0].Username)    c.Data[&quot;users&quot;] = users    c.TplName = &quot;user/list.tpl&quot;&#125;func (c *ListController) Post() &#123;    var o = orm.NewOrm()    o.Using(&quot;default&quot;)    var qs orm.QuerySeter    qs = o.QueryTable(&quot;user&quot;)    var users []*models.User    //num, err := qs.All(&amp;users)    qs.All(&amp;users,&quot;Id&quot;, &quot;Username&quot;)    c.Data[&quot;json&quot;] = map[string]interface&#123;&#125;&#123;&quot;code&quot;: 0, &quot;ext&quot;: &quot;success&quot;, &quot;userlist&quot;: users&#125;    c.ServeJSON()    return&#125;

3ã€ä¿®æ”¹controllers/user/update.goï¼Œå†…å®¹ä¸ºï¼š
// omit the headfunc (c *UpdateController) Post() &#123;    //id,_ := c.GetInt(&quot;id&quot;)    username := c.GetString(&quot;username&quot;)    password := c.GetString(&quot;password&quot;)    new_password := c.GetString(&quot;new_password&quot;)    var o = orm.NewOrm()    o.Using(&quot;default&quot;)    exist := o.QueryTable(&quot;user&quot;).Filter(&quot;UserName&quot;, username).Exist()    if !exist&#123;        c.Data[&quot;json&quot;] = map[string]interface&#123;&#125;&#123;&quot;code&quot;: 1, &quot;ext&quot;: &quot;Username doesn&#x27;t exist!&quot;&#125;        c.ServeJSON()        return    &#125;    var user models.User    o.QueryTable(&quot;user&quot;).Filter(&quot;Username&quot;,username).Filter(&quot;Password&quot;,password).One(&amp;user)    if o.Read(&amp;user) == nil &#123;        user.Password = new_password        if num, err := o.Update(&amp;user); err == nil &#123;            if num != 0 &#123;                c.Data[&quot;json&quot;] = map[string]interface&#123;&#125;&#123;&quot;code&quot;: 0, &quot;ext&quot;: &quot;Password has been updated!&quot;&#125;                c.ServeJSON()            &#125;        &#125;    &#125;else &#123;        c.Data[&quot;json&quot;] = map[string]interface&#123;&#125;&#123;&quot;code&quot;: 2, &quot;ext&quot;: &quot;Username or password is wrong!&quot;&#125;        c.ServeJSON()    &#125;    return&#125;

4ã€ä¿®æ”¹controllers/user/del.goï¼Œå†…å®¹ä¸ºï¼š
// omit the headfunc (c *DelController) Get() &#123;    c.Ctx.WriteString(&quot;Please use post request.&quot;)&#125;func (c *DelController) Post() &#123;    id,_ := c.GetInt(&quot;id&quot;)    var o = orm.NewOrm()    o.Using(&quot;default&quot;)    num,err := o.QueryTable(&quot;user&quot;).Filter(&quot;Id&quot;,id).Delete()    fmt.Printf(&quot;Returned Rows Num: %d, %s \n&quot;, num, err)    if num != 0 &#123;        c.Data[&quot;json&quot;] = map[string]interface&#123;&#125;&#123;&quot;code&quot;: 0, &quot;ext&quot;: &quot;User has been deleted!&quot;&#125;        c.ServeJSON()    &#125;else&#123;        c.Data[&quot;json&quot;] = map[string]interface&#123;&#125;&#123;&quot;code&quot;: 1, &quot;ext&quot;: &quot;User Id doesn&#x27;t exist! Can&#x27;t delete!&quot;&#125;        c.ServeJSON()    &#125;    return&#125;

ä¿®æ”¹ä¹‹åï¼Œå››ä¸ªæ¥å£éƒ½èƒ½å¤Ÿè¿”å›jsonæ ¼å¼çš„æ•°æ®ï¼Œä½¿ç”¨Postmanæµ‹è¯•é€šè¿‡ï¼Œå¯ä¾›jsè¿›è¡Œè°ƒç”¨ã€‚
è°ƒè¯•ä»¥è°ƒè¯•controllers/user/add.goä¸­çš„Postæ–¹æ³•ä¸ºä¾‹ã€‚1ã€è®¾ç½®è°ƒè¯•ç¯å¢ƒRunï¼ŒEdit Configurationï¼ŒAdd New Configurationï¼ŒGo Buildã€‚Run kindé€‰æ‹©Directoryï¼ŒDirectoryã€Output directoryã€Working directoryéƒ½é€‰æ‹©é¡¹ç›®ç›®å½•ï¼ŒOKã€‚ç‚¹å‡»å·¥å…·æ çš„DebugæŒ‰é’®ï¼Œè¿›å…¥è°ƒè¯•æ¨¡å¼ã€‚
2ã€åœ¨Postæ–¹æ³•ä¸­æ·»åŠ æ–­ç‚¹åœ¨ä»£ç å·¦ä¾§ï¼Œå•å‡»æ·»åŠ æ–­ç‚¹ã€‚
3ã€æµ‹è¯•è°ƒè¯•ä½¿ç”¨Postmanï¼Œå‘é€Postè¯·æ±‚åˆ° http://localhost:8080/user/add ï¼Œè¯·æ±‚å‚æ•°åŒ…æ‹¬usernameå’Œpasswordã€‚æŸ¥çœ‹Golandé¢æ¿ï¼Œå¯ä»¥çœ‹åˆ°é¢æ¿ä¸­æ˜¾ç¤ºå‡ºäº†è¯·æ±‚çš„å‚æ•°ç­‰ä¿¡æ¯ã€‚ä½¿ç”¨F8è¿›å…¥ä¸‹ä¸€æ­¥ï¼ŒF7è¿›å…¥å‡½æ•°ï¼ŒShift+F8é€€å‡ºå‡½æ•°ã€‚
æ•°æ®åº“è¿ç§»å‰æ–‡ä¸­ï¼Œä½¿ç”¨sqliteæ•°æ®åº“ï¼Œè€Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¤§å¤šæ˜¯ä½¿ç”¨mysqlã€‚æœ¬èŠ‚ä¸­ç ”ç©¶å­¦ä¹ æ•°æ®åº“çš„è¿ç§»ï¼ŒæŠŠsqliteæ•°æ®åº“ä¸­çš„æ•°æ®ç§»åŠ¨åˆ°mysqlæ•°æ®åº“ä¸­ã€‚
è¡¨ç»“æ„è¿ç§»1ã€åˆ›å»ºæ•°æ®åº“ä½¿ç”¨mysqlæ—¶ï¼Œbeegoä¸ä¼šè‡ªåŠ¨ç”Ÿæˆæ•°æ®åº“ï¼Œå› æ­¤éœ€è¦æ‰‹åŠ¨åˆ›å»ºvkbeegoæ•°æ®åº“ã€‚
2ã€ä¿®æ”¹models/model.goæ–‡ä»¶ï¼Œä¿®æ”¹æ³¨å†Œé©±åŠ¨å’Œæ³¨å†Œæ•°æ®åº“ä¸ºmysqlï¼š
import (    _ &quot;github.com/go-sql-driver/mysql&quot;)orm.RegisterDriver(&quot;mysql&quot;, orm.DRMySQL)orm.RegisterDataBase(&quot;default&quot;, &quot;mysql&quot;, &quot;root:voidking@tcp(192.168.56.104:3306)/vkbeego?charset=utf8&quot;)

3ã€ç”Ÿæˆè¡¨ç»“æ„è¿è¡Œbee runï¼Œå³å¯åœ¨beegoæ•°æ®åº“ä¸­ç”Ÿæˆè¡¨ç»“æ„ã€‚
è¡¨ç»“æ„è¿ç§»2.01ã€åˆ›å»ºbeego/database/migrations/vkbeego.sqlæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
CREATE TABLE IF NOT EXISTS `user` (    `id` integer NOT NULL PRIMARY KEY AUTOINCREMENT,    `username` varchar(255) NOT NULL DEFAULT &#x27;&#x27; ,    `password` varchar(255) NOT NULL DEFAULT &#x27;&#x27; );

2ã€ç”Ÿæˆè¡¨ç»“æ„åˆ›å»ºæ•°æ®åº“ï¼Œä¿®æ”¹models/model.goä½¿ç”¨mysqlåï¼Œæ‰§è¡Œå‘½ä»¤ï¼šbee migrate [-driver=mysql] [-conn=&quot;root:voidking@tcp(127.0.0.1:3306)/vkbeego&quot;]
æ•°æ®è¿ç§»sqliteå’Œmysqlçš„SQLè¯­å¥ä¸å…¼å®¹ï¼Œå‚è€ƒsqliteå¯¼å…¥åˆ°mysqlè¿›è¡Œæ•°æ®è¿ç§»ï¼Œæ­¤å¤„ä¸å†å±•å¼€ã€‚
åè®°ä»¥ä¸Šï¼Œå­¦ä¹ äº†beegoé™æ€æ–‡ä»¶é…ç½®ã€jsonå¤„ç†ã€è°ƒè¯•å’Œæ•°æ®åº“è¿ç§»ã€‚beegoè¿˜æœ‰å¥½å¤šå†…å®¹å€¼å¾—å­¦ä¹ ï¼Œæ¯”å¦‚æ¨¡å—ä½¿ç”¨ã€è¿›ç¨‹ç›‘æ§ã€åº”ç”¨éƒ¨ç½²ã€ç¬¬ä¸‰æ–¹åº“ç­‰ç­‰ï¼Œä½†æ˜¯å…¥é—¨ç¯‡åˆ°è¿™é‡Œå°±å‘Šä¸€æ®µè½ï¼Œsee youã€‚
æºç åˆ†äº«ï¼šv0.0.2
ä¹¦ç­¾beegoå®˜ç½‘beegoå¼€å‘æ–‡æ¡£
]]></content>
      <categories>
        <category>engineering</category>
        <category>golang</category>
      </categories>
      <tags>
        <tag>golang</tag>
        <tag>beego</tag>
        <tag>debug</tag>
      </tags>
  </entry>
  <entry>
    <title>beegoå…¥é—¨ç¯‡â€”â€”ä¸­</title>
    <url>/dev-beego-start-1/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡ä¸­ç ”ç©¶å­¦ä¹ beegoå¯¹äºæ•°æ®åº“çš„å¢åˆ æŸ¥æ”¹ã€‚beegoçš„å®˜æ–¹ORM DEMOä¸æ˜¯å¾ˆå¥½ï¼Œdemoæ— æ³•è·‘é€šï¼Œä¹Ÿæ— æ³•è‡ªåŠ¨åˆ›å»ºè¡¨ç»“æ„ã€‚å› æ­¤ï¼Œæœ¬æ–‡é‡æ–°è®¾è®¡äº†å­¦ä¹ æµç¨‹ã€‚


ç¯å¢ƒå‡†å¤‡1ã€å®‰è£…ORMgo get github.com/astaxie/beego/orm
2ã€å®‰è£…é©±åŠ¨
go get -u github.com/mattn/go-sqlite3go get -u github.com/go-sql-driver/mysqlgo get -u github.com/lib/pq

First Modelæœ¬èŠ‚ä¸­åˆ›å»ºä¸€ä¸ªåä¸ºUserçš„Modelï¼Œåªæœ‰ä¸‰ä¸ªå­—æ®µï¼ŒIdã€Nameå’ŒAgeã€‚è¿è¡Œä»£ç ï¼Œåˆ›å»ºsqliteæ•°æ®åº“å’Œuserè¡¨ç»“æ„ï¼Œå¹¶ä¸”å‘userè¡¨ä¸­æ’å…¥ä¸€æ¡æ•°æ®ã€‚
1ã€åœ¨vkbeego/modelsç›®å½•ä¸­åˆ›å»ºmain.goæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
package mainimport (    &quot;fmt&quot;    &quot;github.com/astaxie/beego/orm&quot;    _ &quot;vkbeego/routers&quot;    //_ &quot;github.com/go-sql-driver/mysql&quot;    _ &quot;github.com/mattn/go-sqlite3&quot;)type User struct &#123;    Id      int    Name    string    Age     int&#125;func create_table()&#123;    // æ•°æ®åº“åˆ«å    name := &quot;default&quot;    // drop table åå†å»ºè¡¨    force := true    // æ‰“å°æ‰§è¡Œè¿‡ç¨‹    verbose := true    // é‡åˆ°é”™è¯¯ç«‹å³è¿”å›    err := orm.RunSyncdb(name, force, verbose)    if err != nil &#123;        fmt.Println(err)    &#125;&#125;func init() &#123;    //orm.RegisterDriver(&quot;mysql&quot;, orm.DRMySQL)    //orm.RegisterDataBase(&quot;default&quot;, &quot;mysql&quot;, &quot;root:root@/orm_test?charset=utf8&quot;)    orm.RegisterDriver(&quot;sqlite3&quot;, orm.DRSqlite)    orm.RegisterDataBase(&quot;default&quot;, &quot;sqlite3&quot;, &quot;db.sqlite3&quot;)    orm.RegisterModel(new(User))    create_table()&#125;func main() &#123;    o := orm.NewOrm()    o.Using(&quot;default&quot;) // é»˜è®¤ä½¿ç”¨ defaultï¼Œä½ å¯ä»¥æŒ‡å®šä¸ºå…¶ä»–æ•°æ®åº“    user := new(User)    user.Name = &quot;Hankin&quot;    fmt.Println(o.Insert(user))&#125;

2ã€è¿è¡Œä»£ç åœ¨modelsç›®å½•ï¼Œgo run main.goï¼Œæ§åˆ¶å°è¾“å‡ºåˆ›å»ºè¡¨çš„ä¿¡æ¯ã€‚

3ã€æŸ¥çœ‹æ‰§è¡Œæ•ˆæœæŸ¥çœ‹vkbeego/modelsç›®å½•ï¼Œå‘ç°å‡ºç°äº†db.sqlite3æ–‡ä»¶ã€‚å¦‚æœè¿è¡Œä»£ç æ—¶å³é”®runï¼Œé‚£ä¹ˆdb.sqlite3æ–‡ä»¶ä¼šå‡ºç°åœ¨æ ¹ç›®å½•ä¸‹ã€‚ä½¿ç”¨navicat for sqliteï¼Œæ‰“å¼€db.sqlite3æ•°æ®åº“ï¼Œå¯ä»¥çœ‹åˆ°åˆ›å»ºçš„è¡¨å’Œæ•°æ®ã€‚
å¢åŠ æ•°æ®ä»¥ä¸Šï¼Œå·²ç»å®ç°äº†å‘æ•°æ®åº“ä¸­æ·»åŠ æ•°æ®ï¼Œä½†æ˜¯ï¼ŒModelçš„å®šä¹‰å’Œæ³¨å†Œã€æ•°æ®åº“çš„è¿æ¥ã€æ’å…¥æ•°æ®çš„é€»è¾‘éƒ½åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œéå¸¸æ··ä¹±ã€‚å› æ­¤éœ€è¦å¯¹ä»£ç è¿›è¡Œæ‹†åˆ†ï¼Œè°ƒæ•´ç»“æ„ã€‚
1ã€åˆ é™¤First Modelåˆ é™¤modelsç›®å½•ä¸‹çš„main.goå’Œdb.sqlite3ã€‚
2ã€åœ¨modelsç›®å½•ä¸‹æ–°å»ºmodels.goï¼Œå†…å®¹ä¸ºï¼š
package modelsimport (    &quot;fmt&quot;    &quot;github.com/astaxie/beego/orm&quot;    _ &quot;github.com/mattn/go-sqlite3&quot;)type User struct &#123;    Id      int    Username    string    Password     string&#125;func create_table()&#123;    // æ•°æ®åº“åˆ«å    name := &quot;default&quot;    // drop table åå†å»ºè¡¨    force := false    // æ‰“å°æ‰§è¡Œè¿‡ç¨‹    verbose := true    // é‡åˆ°é”™è¯¯ç«‹å³è¿”å›    err := orm.RunSyncdb(name, force, verbose)    if err != nil &#123;        fmt.Println(err)    &#125;&#125;func init() &#123;    orm.RegisterModel(new(User))    orm.RegisterDriver(&quot;sqlite3&quot;, orm.DRSqlite)    orm.RegisterDataBase(&quot;default&quot;, &quot;sqlite3&quot;, &quot;db.sqlite3&quot;)    create_table()&#125;

3ã€åœ¨routers/user.goä¸­æ·»åŠ è·¯ç”±ï¼š
beego.Router(&quot;/user/add&quot;, &amp;user.AddController&#123;&#125;)

4ã€åœ¨controllers/userç›®å½•ä¸­æ–°å»ºæ–‡ä»¶add.goï¼Œå†…å®¹ä¸ºï¼š
package userimport (    &quot;fmt&quot;    &quot;github.com/astaxie/beego&quot;    &quot;github.com/astaxie/beego/orm&quot;    &quot;vkbeego/models&quot;)type AddController struct &#123;    beego.Controller&#125;func (c *AddController) Get() &#123;    var username = c.GetString(&quot;username&quot;)    fmt.Println(username)    c.Ctx.WriteString(&quot;Please add user by post request.&quot;)&#125;func (c *AddController) Post() &#123;    var username = c.GetString(&quot;username&quot;)    var password = c.GetString(&quot;password&quot;)    //fmt.Println(username)    //fmt.Println(password)    var o = orm.NewOrm()    o.Using(&quot;default&quot;)    var user = new(models.User)    user.Username = username    user.Password = password    o.Insert(user)    c.Ctx.WriteString(&quot;add user: &quot; + username)&#125;

5ã€æµ‹è¯•å¯åŠ¨beegoï¼Œä½¿ç”¨Postmanï¼Œå‘é€Postè¯·æ±‚åˆ° http://localhost:8080/user/add ï¼Œè¯·æ±‚å‚æ•°åŒ…æ‹¬usernameå’Œpasswordï¼ŒæˆåŠŸå†™å…¥å‚æ•°åˆ°æ•°æ®åº“ã€‚
æŸ¥çœ‹æ•°æ®1ã€åœ¨routers/user.goä¸­æ·»åŠ è·¯ç”±ï¼š
beego.Router(&quot;/user/list&quot;, &amp;user.ListController&#123;&#125;)

2ã€åœ¨controllers/userç›®å½•ä¸­æ–°å»ºæ–‡ä»¶list.goï¼Œå†…å®¹ä¸ºï¼š
package userimport (    &quot;fmt&quot;    &quot;github.com/astaxie/beego&quot;    &quot;github.com/astaxie/beego/orm&quot;    &quot;vkbeego/models&quot;)type ListController struct &#123;    beego.Controller&#125;func (c *ListController) Get() &#123;    var o = orm.NewOrm()    o.Using(&quot;default&quot;)    var qs orm.QuerySeter    qs = o.QueryTable(&quot;user&quot;)    var users []*models.User    //num, err := qs.All(&amp;users)    num, err := qs.All(&amp;users,&quot;Id&quot;, &quot;Username&quot;)    fmt.Printf(&quot;Returned Rows Num: %d, %s \n&quot;, num, err)    fmt.Println(users[0].Username)    c.Data[&quot;users&quot;] = users    c.TplName = &quot;user/list.tpl&quot;&#125;

3ã€åœ¨views/userç›®å½•ä¸­æ–°å»ºlist.tplæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;User List&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;h2&gt;User List&lt;/h2&gt;    &#123;&#123;range .users&#125;&#125;    &lt;p&gt;        IDä¸ºï¼š&#123;&#123;.Id&#125;&#125;ï¼Œç”¨æˆ·åä¸ºï¼š&#123;&#123;.Username&#125;&#125;    &lt;/p&gt;    &#123;&#123;end&#125;&#125;    &#123;&#123;range $index,$user := .users&#125;&#125;    &lt;p&gt;        Indexä¸ºï¼š&#123;&#123;$index&#125;&#125;ï¼ŒIDä¸ºï¼š&#123;&#123;$user.Id&#125;&#125;ï¼Œç”¨æˆ·åä¸ºï¼š&#123;&#123;$user.Username&#125;&#125;    &lt;/p&gt;    &#123;&#123;end&#125;&#125;&lt;/body&gt;&lt;/html&gt;

4ã€æµ‹è¯•å¯åŠ¨beegoï¼Œä½¿ç”¨Postmanï¼Œå‘é€Getè¯·æ±‚åˆ° http://localhost:8080/user/list ï¼Œå³å¯çœ‹åˆ°ç”¨æˆ·åˆ—è¡¨ã€‚
ä¿®æ”¹æ•°æ®1ã€åœ¨routers/user.goä¸­æ·»åŠ è·¯ç”±ï¼š
beego.Router(&quot;/user/update&quot;, &amp;user.UpdateController&#123;&#125;)

2ã€åœ¨controllers/userç›®å½•ä¸­æ–°å»ºæ–‡ä»¶update.goï¼Œå†…å®¹ä¸ºï¼š
package userimport (    &quot;fmt&quot;    &quot;github.com/astaxie/beego&quot;    &quot;github.com/astaxie/beego/orm&quot;    &quot;vkbeego/models&quot;)type UpdateController struct &#123;    beego.Controller&#125;func (c *UpdateController) Get() &#123;    c.Ctx.WriteString(&quot;Please use post request.&quot;)&#125;func (c *UpdateController) Post() &#123;    //id,_ := c.GetInt(&quot;id&quot;)    username := c.GetString(&quot;username&quot;)    password := c.GetString(&quot;password&quot;)    new_password := c.GetString(&quot;new_password&quot;)    var o = orm.NewOrm()    o.Using(&quot;default&quot;)    exist := o.QueryTable(&quot;user&quot;).Filter(&quot;UserName&quot;, username).Exist()    if !exist&#123;        c.Ctx.WriteString(&quot;Username doesn&#x27;t exist!&quot;)        return;    &#125;    var user models.User    o.QueryTable(&quot;user&quot;).Filter(&quot;Username&quot;,username).Filter(&quot;Password&quot;,password).One(&amp;user)    if o.Read(&amp;user) == nil &#123;        user.Password = new_password        if num, err := o.Update(&amp;user); err == nil &#123;            fmt.Println(num)        &#125;    &#125;else &#123;        c.Ctx.WriteString(&quot;Username or password is wrong!&quot;)        return;    &#125;    c.Ctx.WriteString(&quot;Password has been updated!&quot;)&#125;

3ã€æµ‹è¯•å¯åŠ¨beegoï¼Œä½¿ç”¨Postmanï¼Œå‘é€Postè¯·æ±‚åˆ° http://localhost:8080/user/update è¿›è¡Œå¯†ç çš„æ›´æ–°ï¼Œè¯·æ±‚å‚æ•°åŒ…æ‹¬usernameã€passwordå’Œnew_passwordã€‚
åˆ é™¤æ•°æ®1ã€åœ¨routers/user.goä¸­æ·»åŠ è·¯ç”±ï¼š
beego.Router(&quot;/user/del&quot;, &amp;user.DelController&#123;&#125;)

2ã€åœ¨controllers/userç›®å½•ä¸­æ–°å»ºæ–‡ä»¶del.goï¼Œå†…å®¹ä¸ºï¼š
package userimport (    &quot;fmt&quot;    &quot;github.com/astaxie/beego&quot;    &quot;github.com/astaxie/beego/orm&quot;)type DelController struct &#123;    beego.Controller&#125;func (c *DelController) Get() &#123;    c.Ctx.WriteString(&quot;Please use post request.&quot;)&#125;func (c *DelController) Post() &#123;    id,_ := c.GetInt(&quot;id&quot;)    var o = orm.NewOrm()    o.Using(&quot;default&quot;)    num,err := o.QueryTable(&quot;user&quot;).Filter(&quot;Id&quot;,id).Delete()    fmt.Printf(&quot;Returned Rows Num: %d, %s \n&quot;, num, err)    if num != 0 &#123;        c.Ctx.WriteString(&quot;User has been deleted!&quot;)    &#125;else&#123;        c.Ctx.WriteString(&quot;User Id doesn&#x27;t exist! Can&#x27;t delete!&quot;)    &#125;&#125;

3ã€æµ‹è¯•å¯åŠ¨beegoï¼Œä½¿ç”¨Postmanï¼Œå‘é€Postè¯·æ±‚åˆ° http://localhost:8080/user/del è¿›è¡Œåˆ é™¤æ•°æ®ï¼Œè¯·æ±‚å‚æ•°ä¸ºidã€‚
ç»“æ„ä½“å’Œè¡¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æŒ‡å®šç»“æ„ä½“å’Œæ•°æ®åº“è¡¨çš„å¯¹åº”å…³ç³»ï¼Œé‚£ä¹ˆå®ƒä»¬æ˜¯æ€æ ·å…³è”èµ·æ¥çš„å‘¢ï¼Ÿå‚è€ƒbeegoæ¡†æ¶ä¹‹ormæ¨¡å—â€”â€”mysqlã€BeegoOrm æ˜ å°„è‡ªå®šä¹‰è¡¨åä»¥åŠè‡ªå®šä¹‰å­—æ®µï¼Œå¯çŸ¥åœ¨beegoçš„modelsæ¨¡å—é‡Œï¼Œä¼šè‡ªåŠ¨å¤„ç†ç»“æ„ä½“å’Œæ•°æ®åº“è¡¨çš„å¯¹åº”å…³ç³»ï¼Œæ¯”å¦‚ï¼š
type User struct&#123;    // é»˜è®¤æƒ…å†µå¯¹åº”æ•°æ®åº“çš„è¡¨åä¸ºï¼šuser   MyName  string    // é»˜è®¤æƒ…å†µå¯¹åº”æ•°æ®åº“é‡Œuserè¡¨å­—æ®µä¸ºï¼šmy_name   MyAge   string    // é»˜è®¤æƒ…å†µå¯¹åº”æ•°æ®åº“é‡Œuserè¡¨å­—æ®µä¸ºï¼šmy_age&#125;orm.RegisterModel(new(User))

æ–°çš„éœ€æ±‚ï¼šç»“æ„ä½“åä¸ºUserå¯¹åº”æ•°æ®åº“çš„è¡¨åä¸ºtest_userMyNameçš„æˆå‘˜å¯¹åº”æ•°æ®åº“çš„å­—æ®µåä¸ºMyNameMyAgeçš„æˆå‘˜å¯¹åº”æ•°æ®åº“çš„å­—æ®µåä¸ºMyAge
é‚£ä¹ˆè¯¥Userçš„ç»“æ„ä½“åˆè¯¥å¦‚ä½•å®šä¹‰å‘¢ï¼Ÿæ–°éœ€æ±‚çš„Userç»“æ„ä½“ï¼š
type User struct&#123;   MyName  string `orm:&quot;column(MyName)&quot;`   MyAge   string `orm:&quot;column(MySex)&quot;`&#125;orm.RegisterModel(new(User))// è‡ªå®šä¹‰è¡¨åï¼ˆç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ï¼‰func (u *User) TableName() string &#123;    return &quot;test_user&quot;&#125;

åè®°è‡³æ­¤ï¼Œbeegoçš„å¢åˆ æŸ¥æ”¹æ“ä½œåŸºæœ¬éƒ½å·²ç»æ¶‰åŠï¼Œæ›´é«˜çº§çš„æŸ¥è¯¢åœ¨ä½¿ç”¨æ—¶å†å»å­¦ä¹ ã€‚
æºç åˆ†äº«ï¼šv0.0.1
ä¹¦ç­¾beegoå®˜ç½‘beegoå¼€å‘æ–‡æ¡£
]]></content>
      <categories>
        <category>engineering</category>
        <category>golang</category>
      </categories>
      <tags>
        <tag>golang</tag>
        <tag>beego</tag>
      </tags>
  </entry>
  <entry>
    <title>beegoå…¥é—¨ç¯‡â€”â€”ä¸Š</title>
    <url>/dev-beego-start-0/</url>
    <content><![CDATA[beegoç®€ä»‹beego æ˜¯ä¸€ä¸ªå¿«é€Ÿå¼€å‘ Go åº”ç”¨çš„ HTTP æ¡†æ¶ï¼Œä»–å¯ä»¥ç”¨æ¥å¿«é€Ÿå¼€å‘ APIã€Web åŠåç«¯æœåŠ¡ç­‰å„ç§åº”ç”¨ï¼Œæ˜¯ä¸€ä¸ª RESTful çš„æ¡†æ¶ï¼Œä¸»è¦è®¾è®¡çµæ„Ÿæ¥æºäº tornadoã€sinatra å’Œ flask è¿™ä¸‰ä¸ªæ¡†æ¶ï¼Œä½†æ˜¯ç»“åˆäº† Go æœ¬èº«çš„ä¸€äº›ç‰¹æ€§ï¼ˆinterfaceã€struct åµŒå…¥ç­‰ï¼‰è€Œè®¾è®¡çš„ä¸€ä¸ªæ¡†æ¶ã€‚


beegoæ¶æ„beegoæ¨¡å—beego æ˜¯åŸºäºå…«å¤§ç‹¬ç«‹çš„æ¨¡å—æ„å»ºçš„ï¼Œæ˜¯ä¸€ä¸ªé«˜åº¦è§£è€¦çš„æ¡†æ¶ã€‚å½“åˆè®¾è®¡ beego çš„æ—¶å€™å°±æ˜¯è€ƒè™‘åŠŸèƒ½æ¨¡å—åŒ–ï¼Œç”¨æˆ·å³ä½¿ä¸ä½¿ç”¨ beego çš„ HTTP é€»è¾‘ï¼Œä¹Ÿä¾æ—§å¯ä»¥ä½¿ç”¨è¿™äº›ç‹¬ç«‹æ¨¡å—ã€‚è¿™äº›æ¨¡å—åˆ†åˆ«æ˜¯cacheã€configã€contextã€httplibsã€logsã€ormã€sessionå’Œtoolboxã€‚
beegoæ‰§è¡Œé€»è¾‘beego æ˜¯ä¸€ä¸ªå…¸å‹çš„ MVC æ¶æ„ï¼Œå®ƒçš„æ‰§è¡Œé€»è¾‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
beegoé¡¹ç›®ç»“æ„ä¸€èˆ¬çš„ beego é¡¹ç›®çš„ç›®å½•å¦‚ä¸‹æ‰€ç¤ºï¼š
â”œâ”€â”€ confâ”‚   â””â”€â”€ app.confâ”œâ”€â”€ controllersâ”‚   â”œâ”€â”€ adminâ”‚   â””â”€â”€ default.goâ”œâ”€â”€ main.goâ”œâ”€â”€ modelsâ”‚   â””â”€â”€ models.goâ”œâ”€â”€ staticâ”‚   â”œâ”€â”€ cssâ”‚   â”œâ”€â”€ icoâ”‚   â”œâ”€â”€ imgâ”‚   â””â”€â”€ jsâ”œâ”€â”€ routersâ”‚   â”œâ”€â”€ router.goâ””â”€â”€ views    â”œâ”€â”€ admin    â””â”€â”€ index.tpl

MVCä¸­çš„Måœ¨modelsç›®å½•ã€Våœ¨viewsç›®å½•ã€Cåœ¨controllersç›®å½•ï¼Œmain.goæ˜¯å…¥å£æ–‡ä»¶ã€‚
beegoå®‰è£…1ã€å®‰è£…beegoå®‰è£…åŒ…go get github.com/astaxie/beego
2ã€å®‰è£…beeå·¥å…·å‘½ä»¤è¡Œæ‰§è¡Œ go get github.com/beego/bee
3ã€åˆ›å»ºæ–°é¡¹ç›®vkbeegoå‘½ä»¤è¡Œæ‰§è¡Œ bee new vkbeego$GOPATH/srcç›®å½•ä¸‹å°±ç”Ÿæˆäº†vkbeegoé¡¹ç›®ã€‚
4ã€è¿è¡Œé¡¹ç›®åœ¨vkbeegoç›®å½•ä¸‹æ‰§è¡Œ bee run
5ã€è®¿é—®é¡¹ç›®æµè§ˆå™¨è®¿é—® http://localhost:8080
å…¥å£æ–‡ä»¶main.goæ˜¯beegoé¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
package mainimport (    _ &quot;vkbeego/routers&quot;    &quot;github.com/astaxie/beego&quot;)func main() &#123;    beego.Run()&#125;
å…¥å£æ–‡ä»¶ä¸­å¼•å…¥äº†routersæ¨¡å—å’Œbeegoæ¨¡å—ï¼Œç„¶ååœ¨mainå‡½æ•°ä¸­è°ƒç”¨äº†beegoæ¨¡å—çš„Run()å‡½æ•°ã€‚æ•´ä¸ªåˆå§‹åŒ–è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š
è·¯ç”±è·¯ç”±æ¨¡å—è´Ÿè´£è·¯ç”±è½¬å‘ï¼Œè½¬å‘è¯·æ±‚ç»™å¯¹åº”çš„æ§åˆ¶å™¨ã€‚beegoçš„å…¥å£æ–‡ä»¶ä¸­å¼•å…¥äº†routersæ¨¡å—ï¼ŒæŸ¥çœ‹routers/router.goæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
package routersimport (    &quot;vkbeego/controllers&quot;    &quot;github.com/astaxie/beego&quot;)func init() &#123;    beego.Router(&quot;/&quot;, &amp;controllers.MainController&#123;&#125;)&#125;

è·¯ç”±æ³¨å†Œbeego.Routerï¼Œè¿™ä¸ªå‡½æ•°çš„åŠŸèƒ½æ˜¯æ˜ å°„ URL åˆ° Controllerï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ URL ï¼ˆç”¨æˆ·è¯·æ±‚çš„åœ°å€ï¼‰ï¼Œè¿™é‡Œæˆ‘ä»¬æ³¨å†Œçš„æ˜¯ /ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è®¿é—®çš„ä¸å¸¦ä»»ä½•å‚æ•°çš„ URLï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯¹åº”çš„ Controllerï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å³å°†æŠŠè¯·æ±‚åˆ†å‘åˆ°é‚£ä¸ªæ§åˆ¶å™¨æ¥æ‰§è¡Œç›¸åº”çš„é€»è¾‘ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œç±»ä¼¼çš„æ–¹å¼æ³¨å†Œå¦‚ä¸‹è·¯ç”±ï¼š
beego.Router(&quot;/test&quot;, &amp;controllers.TestController&#123;&#125;)

æ§åˆ¶å™¨æ§åˆ¶å™¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œè§£æè¯·æ±‚å‚æ•°ï¼Œè´Ÿè´£å®ç°å…·ä½“çš„å¤„ç†é€»è¾‘ã€‚ä¸Šé¢çš„ä»£ç ï¼Œåœ¨routerä¸­æ³¨å†Œäº†è·¯ç”±ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰TestControlleræ§åˆ¶å™¨ï¼Œå› æ­¤éœ€è¦åˆ›å»ºè¯¥æ§åˆ¶å™¨ã€‚æ‰“å¼€controllers/default.goæ–‡ä»¶ï¼Œæ·»åŠ ï¼š
type TestController struct &#123;    beego.Controller&#125;func (c *TestController) Get() &#123;    c.Data[&quot;Website&quot;] = &quot;beego.me&quot;    c.Data[&quot;Email&quot;] = &quot;astaxie@gmail.com&quot;    c.Data[&quot;IsMale&quot;] = true    c.Data[&quot;LuckyNumbers&quot;] = [...]int&#123;0,1,3,4&#125;    c.TplName = &quot;test.tpl&quot;&#125;

æ–°å»ºviews/test.tplæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;Test&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;p&gt;Test Page&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;

æµè§ˆå™¨è®¿é—® http://localhost:8080/test ï¼Œå³å¯çœ‹åˆ°â€œTest Pageâ€ã€‚
æ¨¡æ¿å¼•æ“æ¨¡æ¿å¼•æ“è´Ÿè´£é¡µé¢çš„æ¸²æŸ“ï¼Œæ¯”å¦‚ä¸Šé¢çš„test.tplå°±æ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œæ¨¡æ¿å¼•æ“æŠŠæ§åˆ¶å™¨å¤„ç†åçš„æ•°æ®ä¼ é€’ç»™æ¨¡æ¿ï¼Œç„¶åæ ¹æ®æ¨¡æ¿ç»“æ„ç”Ÿæˆhtmlé¡µé¢ã€‚TestControlleræŠŠWebsiteç­‰å‚æ•°ä¼ é€’ç»™test.tplï¼Œä½†æ˜¯test.tplå¹¶æ²¡æœ‰æ˜¾ç¤ºï¼Œè¿™é‡Œå¯¹test.tplè¿›è¡Œæ”¹é€ ï¼Œæ˜¾ç¤ºå‚æ•°ã€‚
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;Test&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;h2&gt;Test Page&lt;/h2&gt;    &lt;p&gt;Website: &#123;&#123;.Website&#125;&#125;&lt;/p&gt;    &lt;p&gt;Email: &#123;&#123;.Email&#125;&#125;&lt;/p&gt;    &lt;p&gt;        Gender:        &#123;&#123;if .IsMale&#125;&#125;        Male        &#123;&#123;else&#125;&#125;        Female        &#123;&#123;end&#125;&#125;    &lt;/p&gt;    &lt;p&gt;        Lucky Numbers:        &#123;&#123;range .LuckyNumbers&#125;&#125;        &#123;&#123;.&#125;&#125;&amp;nbsp;&amp;nbsp;        &#123;&#123;end&#125;&#125;    &lt;/p&gt;&lt;/body&gt;&lt;/html&gt;

æ›´å¤šè¯¦ç»†çš„æ¨¡æ¿è¯­æ³•å‚è€ƒbeego æ¨¡æ¿è¯­æ³•æŒ‡å—ã€‚
è·¯å¾„ç¾åŒ–ä»¥ä¸Šï¼Œå·²ç»å®ç°äº†åŸºæœ¬çš„é¡µé¢è®¿é—®é€»è¾‘ï¼Œä½†æ˜¯è·¯å¾„ä¸å‹å¥½ï¼Œæ¯”å¦‚æ‰€æœ‰çš„è·¯ç”±éƒ½å†™åœ¨routers/router.goä¸­ï¼Œæ‰€æœ‰çš„å¤„ç†é€»è¾‘éƒ½å†™åœ¨controller/default.goä¸­ï¼Œæ‰€æœ‰çš„æ¨¡æ¿éƒ½å†™åœ¨viewsè·¯å¾„ä¸‹ã€‚æœ¬èŠ‚ä¸­å¯¹è·¯å¾„è¿›è¡Œç¾åŒ–ï¼Œä½¿ä¹‹çœ‹èµ·æ¥æ›´åŠ å‹å¥½åˆç†ã€‚å‡è®¾ç°åœ¨è¦æ·»åŠ ä¸¤ä¸ªè·¯ç”±ï¼Œåˆ†åˆ«ç”¨æ¥æ˜¾ç¤ºç™»å½•é¡µé¢å’Œæ³¨å†Œé¡µé¢ã€‚ä»¥æ­¤ä¸ºä¾‹ï¼Œè¯´æ˜è·¯å¾„è¯¥æ€æ ·è®¾è®¡ã€‚
æ€»ä½“è®¾è®¡å› ä¸ºç™»å½•å’Œæ³¨å†Œéƒ½å±äºç”¨æˆ·ç®¡ç†ï¼Œå› æ­¤å¯ä»¥æŠŠå®ƒä»¬å½’ç±»åˆ°ä¸€ä¸ªæ¨¡å—userï¼Œè®¾è®¡è·¯å¾„ç»“æ„å¦‚ä¸‹ã€‚
vkbeegoâ”œâ”€controllersâ”‚  â”‚  default.goâ”‚  â””â”€userâ”‚      login.goâ”‚      reg.goâ”œâ”€routersâ”‚   router.goâ”‚   user.goâ””â”€views  â”‚  index.tpl  â”‚  test.tpl  â””â”€user      login.tpl      reg.tpl

è·¯ç”±ä¸€ä¸ªæ¨¡å—å¯¹åº”ä¸€ä¸ªè·¯ç”±æ–‡ä»¶ï¼Œå› æ­¤æ–°å»ºrouters/user.goæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
package routersimport (    &quot;vkbeego/controllers/user&quot;    &quot;github.com/astaxie/beego&quot;)func init() &#123;    beego.Router(&quot;/user/login&quot;, &amp;user.LoginController&#123;&#125;)    beego.Router(&quot;/user/reg&quot;, &amp;user.RegController&#123;&#125;)&#125;

æ§åˆ¶å™¨ä¸€ä¸ªæ¨¡å—å¯¹åº”ä¸€ä¸ªæ§åˆ¶å™¨ç›®å½•ï¼Œå› æ­¤æ–°å»ºcontrollers/userç›®å½•ï¼Œç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶login.goå’Œreg.goã€‚
package userimport (    &quot;github.com/astaxie/beego&quot;)type LoginController struct &#123;    beego.Controller&#125;func (c *LoginController) Get() &#123;    c.TplName = &quot;user/login.tpl&quot;&#125;

package userimport (    &quot;github.com/astaxie/beego&quot;)type RegController struct &#123;    beego.Controller&#125;func (c *RegController) Get() &#123;    c.TplName = &quot;user/reg.tpl&quot;&#125;

å½“å‰login.goå’Œreg.goä¸­ï¼Œåªæœ‰ä¸€ä¸ªGetè¯·æ±‚çš„æ§åˆ¶å™¨ï¼Œè´Ÿè´£é¡µé¢æ˜¾ç¤ºã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­è¿˜å¯ä»¥æ·»åŠ Postè¯·æ±‚çš„æ§åˆ¶å™¨ï¼Œç”¨æ¥å¤„ç†Postè¯·æ±‚ã€‚
æ¨¡æ¿ä¸€ä¸ªæ¨¡å—å¯¹åº”ä¸€ä¸ªè§†å›¾ç›®å½•ï¼Œå› æ­¤æ–°å»ºviews/userç›®å½•ï¼Œç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶login.tplå’Œreg.tplã€‚
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;Login&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;p&gt;Login Page&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;

&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;Register&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;p&gt;Register Page&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;

æ‰§è¡Œå‘½ä»¤ bee runï¼Œç„¶åå°±å¯ä»¥æµè§ˆå™¨è®¿é—®URLäº†ã€‚
åè®°æœ¬æ–‡ä¸­ï¼Œé¦–å…ˆå­¦ä¹ äº†beegoçš„æ¨¡å—æ„æˆã€æ‰§è¡Œé€»è¾‘å’Œé¡¹ç›®ç»“æ„ï¼Œç„¶åä½¿ç”¨beeå·¥å…·æ„å»ºäº†ç¬¬ä¸€ä¸ªbeegoé¡¹ç›®vkbeegoï¼Œæ¥ç€å­¦ä¹ äº†beegoçš„è·¯ç”±ã€æ§åˆ¶å™¨å’Œæ¨¡æ¿å¼•æ“ï¼Œæœ€åç¾åŒ–äº†é¡¹ç›®è·¯å¾„ã€‚æ¥ä¸‹æ¥ï¼Œå­¦ä¹ ä½¿ç”¨beegoå¯¹æ•°æ®åº“è¿›è¡Œå¢åˆ æŸ¥æ”¹ã€‚
æºç åˆ†äº«ï¼šv0.0.0
ä¹¦ç­¾beegoå®˜ç½‘beegoå¼€å‘æ–‡æ¡£GoWebå¼€å‘å®æˆ˜(Beegoæ¡†æ¶å®ç°é¡¹ç›®)Qihoo360/wayne
]]></content>
      <categories>
        <category>engineering</category>
        <category>golang</category>
      </categories>
      <tags>
        <tag>golang</tag>
        <tag>beego</tag>
      </tags>
  </entry>
  <entry>
    <title>Goè¯­è¨€å…¥é—¨ç¯‡</title>
    <url>/dev-go-start/</url>
    <content><![CDATA[Goè¯­è¨€ç®€ä»‹Goï¼ˆåˆç§° Golangï¼‰æ˜¯ Google çš„ Robert Griesemerï¼ŒRob Pike åŠ Ken Thompson å¼€å‘çš„ä¸€ç§é™æ€å¼ºç±»å‹ã€ç¼–è¯‘å‹è¯­è¨€ã€‚Go è¯­è¨€è¯­æ³•ä¸ C ç›¸è¿‘ï¼Œä½†åŠŸèƒ½ä¸Šæœ‰ï¼šå†…å­˜å®‰å…¨ï¼ŒGCï¼ˆåƒåœ¾å›æ”¶ï¼‰ï¼Œç»“æ„å½¢æ€åŠ CSP-style å¹¶å‘è®¡ç®—ã€‚
æœ¬æ–‡ï¼Œæˆ‘ä»¬å¼€å§‹å­¦ä¹ Golangï¼Œä¸»è¦å‚è€ƒï¼š

Go è¯­è¨€æ•™ç¨‹
Goæ ‡å‡†åº“ä¸­æ–‡æ–‡æ¡£
Goç¨‹åºè®¾è®¡è¯­è¨€ï¼ˆGoè¯­è¨€åœ£ç»ï¼‰



å¼€å‘ç¯å¢ƒ1ã€è®¿é—®Goå®˜ç½‘ï¼Œä¸‹è½½å®‰è£…Golangç¯å¢ƒã€‚
2ã€æŠŠGolangçš„binç›®å½•æ·»åŠ åˆ°Pathç¯å¢ƒå˜é‡ã€‚
3ã€è®¿é—®Jetbrains-Goï¼Œä¸‹è½½å®‰è£…Golandã€‚
4ã€åœ¨Golandä¸­é…ç½®å¥½GOROOTå’ŒGOPATHã€‚
helloworldæŒ‰ç…§å›½é™…æƒ¯ä¾‹ï¼Œå­¦ä¹ æ–°è¯­è¨€ï¼Œå…ˆæ¥ä¸€ä¸ªhelloworldã€‚æ–°å»ºtest.goæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
package mainimport &quot;fmt&quot;func main() &#123;   fmt.Println(&quot;Hello, World!&quot;)&#125;

Shift+å³é”®æ‰“å¼€Powershellï¼Œä½¿ç”¨go run test.goï¼Œè¿è¡Œä»£ç ã€‚é™¤äº†ä½¿ç”¨go runå‘½ä»¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨go buildå‘½ä»¤ï¼Œå…ˆå¯¹ä»£ç è¿›è¡Œç¼–è¯‘ï¼Œç„¶åè¿è¡Œç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚
ç”±ä¸Šé¢è¿™æ®µä»£ç å¯ä»¥çœ‹å‡ºï¼ŒGoè¯­è¨€ä»£ç çš„åŸºç¡€ç»„æˆæœ‰åŒ…å£°æ˜ã€å¼•å…¥åŒ…ã€å‡½æ•°ã€è¯­å¥å’Œè¡¨è¾¾å¼ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰æ³¨é‡Šã€å¸¸é‡ã€å˜é‡ã€æ•°ç»„ã€ç»“æ„ä½“ç­‰ã€‚
GoåŸºç¡€è¯­æ³•Goçš„è¯­æ³•å’ŒCå¾ˆåƒï¼Œè¿™é‡Œå’ŒCè¿›è¡Œå¯¹æ¯”ï¼ŒæŒ‡å‡ºä¸åŒä¹‹å¤„ï¼Œæ–¹ä¾¿è®°å¿†ã€‚

&#123;ä¸èƒ½å•ç‹¬æ”¾åœ¨ä¸€è¡Œ
è¡¨è¾¾å¼ä¸éœ€è¦åˆ†å·ç»“å°¾
å˜é‡å£°æ˜èµ‹å€¼ï¼Œvar age int = 0
æ•°æ®ç±»å‹æœ‰å·®å¼‚
å¼ºåˆ¶ç±»å‹è½¬æ¢æ—¶æ‹¬å·çš„ä½ç½®ä¸åŒ
æ”¯æŒå¤šå˜é‡èµ‹å€¼ï¼ŒæŒ‰é¡ºåºèµ‹å€¼
:=æ“ä½œç¬¦ä¹Ÿå¯ä»¥å£°æ˜å˜é‡ï¼Œä½†æ˜¯åªèƒ½åœ¨å‡½æ•°ä½“å†…
constå£°æ˜å¯ä»¥ä½¿ç”¨iota
ifå’Œforåé¢ä¸éœ€è¦åœ†æ‹¬å·
switchä¸éœ€è¦break
å¾ªç¯éƒ½ç”¨forï¼Œæ²¡æœ‰while
å‡½æ•°å®šä¹‰ï¼Œfunc func_name([params]) [return_types]&#123;&#125;
æ•°ç»„å£°æ˜ï¼Œvar arr [10] float32; var arr2 = [3]float32&#123;1.0, 2.0, 3.4&#125;
ç»“æ„ä½“å®šä¹‰ï¼Œtypeå…ˆè¡Œï¼Œä¸‹é¢æœ‰demo
åˆ‡ç‰‡ï¼ˆåŠ¨æ€æ•°ç»„ï¼‰ï¼Œvar slice1 []int = make([]int, 3, 9)
åˆ‡ç‰‡appendï¼Œcopy
å­—å…¸mapå®šä¹‰ï¼Œvar map1 map[string]string = make(map[string]string)
å­—å…¸deleteæ¡ç›®
for rangeå¾ªç¯åˆ‡ç‰‡å’Œå­—å…¸
å®šä¹‰æ¥å£ï¼Œä¸‹é¢æœ‰demo
é”™è¯¯å¤„ç†ï¼Œerroræ¥å£ï¼Œä¸‹é¢æœ‰demo
å¹¶å‘ï¼Œgoè¯­å¥å¼€å¯æ–°çº¿ç¨‹ï¼Œä¸‹é¢æœ‰demo

ç»“æ„ä½“demoï¼š
package mainimport &quot;fmt&quot;type Books struct &#123;   title string   author string   subject string   book_id int&#125;func main() &#123;    // åˆ›å»ºä¸€ä¸ªæ–°çš„ç»“æ„ä½“    fmt.Println(Books&#123;&quot;Go è¯­è¨€&quot;, &quot;www.voidking.com&quot;, &quot;Go è¯­è¨€æ•™ç¨‹&quot;, 6495407&#125;)    // ä¹Ÿå¯ä»¥ä½¿ç”¨ key =&gt; value æ ¼å¼    fmt.Println(Books&#123;title: &quot;Go è¯­è¨€&quot;, author: &quot;www.voidking.com&quot;, subject: &quot;Go è¯­è¨€æ•™ç¨‹&quot;, book_id: 6495407&#125;)    // å¿½ç•¥çš„å­—æ®µä¸º 0 æˆ– ç©º    fmt.Println(Books&#123;title: &quot;Go è¯­è¨€&quot;, author: &quot;www.voidking.com&quot;&#125;)    // ç»“æ„ä½“å£°æ˜å’Œèµ‹å€¼    var Book1 Books    Book1.title = &quot;Goè¯­è¨€å…¥é—¨ç¯‡&quot;    Book1.author = &quot;www.voidking.com&quot;    Book1.subject = &quot;Goè¯­è¨€&quot;    Book1.book_id = 123456    printBook(Book1)&#125;func printBook( book Books ) &#123;   fmt.Printf( &quot;Book title : %s\n&quot;, book.title);   fmt.Printf( &quot;Book author : %s\n&quot;, book.author);   fmt.Printf( &quot;Book subject : %s\n&quot;, book.subject);   fmt.Printf( &quot;Book book_id : %d\n&quot;, book.book_id);&#125;


æ¥å£demoï¼š
package mainimport (    &quot;fmt&quot;)type Phone interface &#123;    call()&#125;type NokiaPhone struct &#123;&#125;func (nokiaPhone NokiaPhone) call() &#123;    fmt.Println(&quot;I am Nokia, I can call you!&quot;)&#125;type IPhone struct &#123;&#125;func (iPhone IPhone) call() &#123;    fmt.Println(&quot;I am iPhone, I can call you!&quot;)&#125;func main() &#123;    var phone Phone    phone = new(NokiaPhone)    phone.call()    phone = new(IPhone)    phone.call()&#125;

é”™è¯¯å¤„ç†demoï¼š
package mainimport (    &quot;fmt&quot;)// å®šä¹‰ä¸€ä¸ª DivideError ç»“æ„type DivideError struct &#123;    dividee int    divider int&#125;// å®ç° `error` æ¥å£func (de *DivideError) Error() string &#123;    strFormat := `    Cannot proceed, the divider is zero.    dividee: %d    divider: 0`    return fmt.Sprintf(strFormat, de.dividee)&#125;// å®šä¹‰ `int` ç±»å‹é™¤æ³•è¿ç®—çš„å‡½æ•°func Divide(varDividee int, varDivider int) (result int, errorMsg string) &#123;    if varDivider == 0 &#123;        dData := DivideError&#123;            dividee: varDividee,            divider: varDivider,        &#125;        errorMsg = dData.Error()        return    &#125; else &#123;        return varDividee / varDivider, &quot;&quot;    &#125;&#125;func main() &#123;    // æ­£å¸¸æƒ…å†µ    if result, errorMsg := Divide(100, 10); errorMsg == &quot;&quot; &#123;        fmt.Println(&quot;100/10 = &quot;, result)    &#125;    // å½“è¢«é™¤æ•°ä¸ºé›¶çš„æ—¶å€™ä¼šè¿”å›é”™è¯¯ä¿¡æ¯    if _, errorMsg := Divide(100, 0); errorMsg != &quot;&quot; &#123;        fmt.Println(&quot;errorMsg is: &quot;, errorMsg)    &#125;&#125;

å¹¶å‘demoï¼š
package mainimport (    &quot;fmt&quot;    &quot;time&quot;)func say(s string) &#123;    for i := 0; i &lt; 5; i++ &#123;        time.Sleep(100 * time.Millisecond)        fmt.Println(s)    &#125;&#125;func main() &#123;    say(&quot;hello&quot;)    go say(&quot;world&quot;)&#125;

åè®°Goè¯­è¨€å…¥é—¨ç¯‡ï¼Œæ ¸å¿ƒå°±æ˜¯æŠŠGoè¯­è¨€å½“æˆCæ¥å†™ï¼Œå’ŒCä¸åŒçš„åœ°æ–¹ï¼Œç•™å¿ƒæ³¨æ„å³å¯ã€‚æ›´å¤šé«˜é˜¶çš„å†…å®¹ï¼Œç”¨åˆ°çš„æ—¶å€™å†å»å­¦ä¹ æ•´ç†ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>golang</category>
      </categories>
      <tags>
        <tag>golang</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨KeePassç®¡ç†å¯†ç </title>
    <url>/dev-manage-pwd-by-keepass/</url>
    <content><![CDATA[å‰è¨€ä¸€ç›´ä½¿ç”¨Chromeç®¡ç†å¯†ç ï¼Œç®€å•æ–¹ä¾¿ï¼Œä½†æ˜¯ä»Šå¤©çªç„¶æ„è¯†åˆ°ï¼ŒChromeç®¡ç†å¯†ç æœ‰ä¸€ä¸ªå¤§å‘ï¼šåªè¦çŸ¥é“å¼€æœºå¯†ç ï¼Œå°±å¯ä»¥æ˜æ–‡æŸ¥çœ‹æ‰€æœ‰å¯†ç ï¼è€Œä¸”ï¼Œè¿˜å¯ä»¥ä¸€é”®å¯¼å‡ºï¼ä¸èƒ½å¿ï¼Œäºæ˜¯å¯»æ±‚æ›´å®‰å…¨çš„ä¿å­˜å¯†ç çš„æ–¹å¼ï¼ŒåŒæ—¶ä¹Ÿè¦è¶³å¤Ÿæ–¹ä¾¿ï¼Œè‡³å°‘å¯ä»¥è‡ªåŠ¨å¡«å……å¯†ç å’ŒåŒæ­¥å¯†ç ã€‚
å½“å‰æµè¡Œçš„ç§˜å¯†ç®¡ç†å·¥å…·ä¸»è¦åŒ…æ‹¬KeePassã€LastPassã€1Passwordå’ŒEnpassï¼Œç»è¿‡ç®€å•æ¯”è¾ƒï¼ŒéƒåŒå­¦å†³å®šé€‰æ‹©KeePassï¼Œå…¶å…è´¹ã€å¼€æºã€åŠŸèƒ½å¼ºå¤§ã€å¤šå¹³å°ä½¿ç”¨ï¼Œå¯†ç æ•°æ®åº“ä¿å­˜åœ¨æœ¬åœ°ã€‚


KeePassç®€ä»‹æˆ‘ä»¬éœ€è¦è®°ä½è®¸å¤šå¯†ç ï¼ŒåŒ…æ‹¬Windowsç™»å½•å¯†ç ï¼Œç”µå­é‚®ä»¶å¸æˆ·ç½‘ç«™çš„FTPå¯†ç ï¼Œåœ¨çº¿å¯†ç ï¼ˆå¦‚ç½‘ç«™ä¼šå‘˜å¸æˆ·ï¼‰ç­‰ç­‰ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬åº”è¯¥ä¸ºæ¯ä¸ªå¸æˆ·ä½¿ç”¨ä¸åŒçš„å¯†ç ã€‚å› ä¸ºå¦‚æœä½ åœ¨ä»»ä½•åœ°æ–¹åªä½¿ç”¨ä¸€ä¸ªå¯†ç å¹¶ä¸”æœ‰äººè·å¾—è¿™ä¸ªå¯†ç å°±ä¼šå‡ºç°é—®é¢˜ï¼Œä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ã€‚å°å·å¯ä»¥è®¿é—®æ‚¨çš„ç”µå­é‚®ä»¶å¸æˆ·ï¼Œç½‘ç«™ç­‰ï¼Œéš¾ä»¥æƒ³è±¡ã€‚KeePassæ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æºå¯†ç ç®¡ç†å™¨ï¼Œå¯ä»¥å¸®åŠ©æ‚¨ä»¥å®‰å…¨çš„æ–¹å¼ç®¡ç†å¯†ç ã€‚æ‚¨å¯ä»¥å°†æ‰€æœ‰å¯†ç æ”¾åœ¨ä¸€ä¸ªæ•°æ®åº“ä¸­ï¼Œè¯¥æ•°æ®åº“ä½¿ç”¨ä¸€ä¸ªä¸»å¯†é’¥æˆ–å¯†é’¥æ–‡ä»¶é”å®šã€‚å› æ­¤ï¼Œæ‚¨åªéœ€è®°ä½ä¸€ä¸ªä¸»å¯†ç æˆ–é€‰æ‹©å¯†é’¥æ–‡ä»¶å³å¯è§£é”æ•´ä¸ªæ•°æ®åº“ã€‚ä½¿ç”¨å½“å‰å·²çŸ¥çš„æœ€ä½³å’Œæœ€å®‰å…¨çš„åŠ å¯†ç®—æ³•ï¼ˆAESå’ŒTwofishï¼‰å¯¹æ•°æ®åº“è¿›è¡ŒåŠ å¯†ã€‚
ç®€å•ä½¿ç”¨1ã€è®¿é—®KeePasså®˜ç½‘ï¼Œä¸‹è½½å¯¹åº”å¹³å°çš„è½¯ä»¶ï¼Œæœ¬æ–‡ä¸­ä¸‹è½½KeePass-2.42.1-Setup.exeï¼ŒåŒå‡»å®‰è£…å³å¯ã€‚
2ã€æ–°å»ºå¯†ç æ•°æ®åº“Fileï¼ŒNewï¼ŒOKï¼ŒInput DBNameï¼ŒSaveï¼ŒInput Master passwordï¼ŒShow expert optionsï¼ŒKey file/providï¼ŒUse an existing file as key fileï¼ŒOKã€‚è¿™é‡Œçš„key fileå¯é€‰ï¼Œä½¿ç”¨key fileä¼šæ›´åŠ å®‰å…¨ã€‚
4ã€å¯¼å…¥å¯†ç ä»Chromeä¸­å¯¼å‡ºå¯†ç ï¼ŒFileï¼ŒImportï¼Œé€‰æ‹©cvsæ–‡ä»¶å¯¼å…¥å³å¯ã€‚æœ€åè®°å¾—åˆ é™¤Chromeä¸­çš„å…¨éƒ¨å¯†ç ã€‚
5ã€ä¿®æ”¹æ•°æ®åº“åç¼€ä¿®æ”¹æ•°æ®åº“åç¼€ä¸ºå¸¸è§æ–‡ä»¶åç¼€ï¼Œå¢åŠ å®‰å…¨æ€§ã€‚
è‡ªåŠ¨å¡«å……å¯†ç å‚è€ƒKeepassç”¨æ’ä»¶å®ç°ç½‘é¡µè‡ªåŠ¨å¡«å†™åŠŸèƒ½ï¼Œè¿›è¡Œé…ç½®ã€‚
Keepassæ’ä»¶1ã€ä¸‹è½½KeePassHttp.plgx
2ã€å°† KeePassHttp.plgx ç§»åŠ¨åˆ° keepass å®‰è£…ç›®å½•çš„ Plugins ç›®å½•ä¸‹ï¼Œåœ¨ä»»åŠ¡æ å³é”®é€€å‡º keepassï¼Œç„¶åé‡æ–°æ‰“å¼€ keepassã€‚
3ã€åœ¨keepassèœå•æ ç‚¹å‡»Toolsï¼ŒKeePassHTTP Optionsï¼ŒAdvancedï¼Œå‹¾é€‰Always allow access to entrieså’ŒAlways allow updating entriesï¼ŒSaveã€‚
Chromeæ’ä»¶1ã€å®‰è£…KeePassHttp-Connector
2ã€ç‚¹å‡»Chromeå³ä¸Šè§’çš„KeePassHttp-Connectorå›¾æ ‡ï¼Œé€‰æ‹©settingsã€‚é€‰æ‹©è¿æ¥æ•°æ®åº“Connected Databasesé¡µé¢ï¼Œç‚¹å‡»å³ä¸‹è§’çš„Connectã€‚keepassä¼šå¼¹å‡ºçª—å£ï¼Œæˆ‘ä»¬å¡«å…¥ä¸€ä¸ªkeyï¼Œç”¨æ¥æ ‡è®°è¿™ä¸ªå®¢æˆ·ç«¯ã€‚
ä½¿ç”¨æ‰“å¼€ä¸€ä¸ªä½¿ç”¨è¿‡çš„ç½‘ç«™ï¼Œé¦–æ¬¡ä½¿ç”¨è‡ªåŠ¨å¡«å†™åŠŸèƒ½ï¼Œä¼šæœ‰å¼¹å‡ºæ¡†æé†’ã€‚å‹¾é€‰Remember this decisionï¼Œç„¶åå•å‡»Allowã€‚å¦‚æœå·²ç»å‹¾é€‰Always allow access to entrieså’ŒAlways allow updating entriesï¼Œåˆ™ä¸ä¼šå‡ºç°å¼¹å‡ºæ¡†ã€‚
æ³¨å†Œä¸€ä¸ªæ–°ç½‘ç«™ï¼Œå¡«å…¥ç”¨æˆ·åå¯†ç åï¼ŒKeePassHttp-Connectorå›¾æ ‡ä¼šå˜æˆçº¢è‰²ï¼Œç‚¹å‡»å®ƒå¯ä»¥é€‰æ‹©ä¿å­˜æ–°å¯†ç ã€‚
åŒæ­¥å¯†ç å‚è€ƒé€šè¿‡ Google drive å¤‡ä»½ä¸åŒæ­¥ Keepass æ•°æ®åº“ï¼Œä½¿å„ä¸ªè®¾å¤‡çš„å¯†ç å¯ä»¥åŒæ­¥ã€‚
1ã€ä¸‹è½½å®‰è£…Google Drive
2ã€é€‰æ‹©äº‘ç«¯æ–‡ä»¶åŒæ­¥åˆ°æœ¬åœ°ã€‚
3ã€æŠŠkeepassæ•°æ®åº“æ”¾å…¥åŒæ­¥æ–‡ä»¶å¤¹ã€‚
4ã€å®‰å“è®¾å¤‡ä¸‹è½½å®‰è£…keepass2androidã€‚
5ã€æ‰“å¼€keepass2androidï¼Œå­˜å‚¨ç±»å‹é€‰æ‹©Google Driveï¼Œæ‰“å¼€keepassæ•°æ®åº“å³å¯ã€‚
åè®°ä½¿ç”¨KeePassHttp-Connectoræœ‰ä¸€ä¸ªå‘ï¼Œå¿…é¡»ä¿è¯keepasså¤„äºunlockçš„çŠ¶æ€ï¼Œè¿™å°±ç›¸å½“äºåœ¨æ¡Œé¢æ‘†ç€è‡ªå·±çš„å¯†ç ï¼æ‰¾åˆ°äº†æ›¿ä»£æ–¹æ¡ˆï¼ŒCKP - KeePass integration for Chromeï¼Œä½†æ˜¯è¯¥æ’ä»¶ä¸èƒ½æ·»åŠ æ–°å¯†ç ï¼Œä¹Ÿæ— æ³•æ›´æ–°å¯†ç ã€‚æ–¹ä¾¿å®‰å…¨éš¾ä¸¤å…¨ï¼Œå°±è¿™ä¹ˆç”¨ç€å§ï¼Œä¹Ÿè®¸ä»¥åèƒ½æ‰¾åˆ°æ›´å¥½çš„åŠæ³•ã€‚
ä¹¦ç­¾æœ‰ä»€ä¹ˆå€¼å¾—æ¨èçš„å¯†ç ç®¡ç†è½¯ä»¶ï¼Ÿ
æ€ä¹ˆä½¿ç”¨å¯†ç ç®¡ç†å™¨å¦‚keepassæ›´å®‰å…¨ï¼Ÿ
KeeWebï¼šä¸€ä¸ªå¼€æºä¸”è·¨å¹³å°çš„å¯†ç ç®¡ç†å·¥å…·
KeeWeb-WebApp
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>chrome</tag>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7å®‰è£…éƒ¨ç½²Jenkins</title>
    <url>/dev-centos7-install-jenkins/</url>
    <content><![CDATA[Jenkinsç®€ä»‹Jenkinsæ˜¯ä¸€ä¸ªå¼€æºè½¯ä»¶é¡¹ç›®ï¼Œæ˜¯åŸºäºJavaå¼€å‘çš„ä¸€ç§æŒç»­é›†æˆå·¥å…·ï¼Œç”¨äºç›‘æ§æŒç»­é‡å¤çš„å·¥ä½œï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªå¼€æ”¾æ˜“ç”¨çš„è½¯ä»¶å¹³å°ï¼Œä½¿è½¯ä»¶çš„æŒç»­é›†æˆå˜æˆå¯èƒ½ã€‚
æœ¬æ–‡ç ”ç©¶ä¸€ä¸‹åœ¨CentOS7ï¼ˆIPä¸º192.168.56.104ï¼‰ä¸Šå®‰è£…éƒ¨ç½²Jenkinsï¼Œå¯ä»¥ç®¡ç†éƒ¨ç½²GitLabä¸­çš„é¡¹ç›®ï¼ˆIPä¸º192.168.56.103ï¼‰åˆ°WebæœåŠ¡å™¨ï¼ˆIPä¸º192.168.56.105ï¼‰ã€‚


ç¯å¢ƒå‡†å¤‡1ã€åœ¨JenkinsæœåŠ¡å™¨ç¼–è¾‘hostsvim /etc/hostsï¼Œæ·»åŠ ï¼š
192.168.56.103  gitlab.voidking.com

2ã€åˆ›å»ºå¯†é’¥ssh-keygen/root/.sshç›®å½•ä¸‹ç”Ÿæˆäº†ç§é’¥id_rsaå’Œå…¬é’¥id_rsa.pubã€‚
3ã€æ·»åŠ å…¬é’¥åˆ°gitlabæµè§ˆå™¨è®¿é—® https://gitlab.voidking.com/profile/keys ï¼ŒæŠŠå…¬é’¥ç²˜è´´è¿›å»ã€‚
4ã€å®‰è£…gityum install git
å®‰è£…JenkinsJenkinsä¾èµ–Javaï¼Œå› æ­¤é¦–å…ˆå‚è€ƒã€Šå…¨å¹³å°å®‰è£…JDKã€‹ï¼Œå®‰è£…é…ç½®å¥½JDKï¼Œç„¶åå¦‚ä¸‹æ­¥éª¤å®‰è£…Jenkinsã€‚
1ã€æ·»åŠ jenkinsæºï¼š
wget -O /etc/yum.repos.d/jenkins.repo http://jenkins-ci.org/redhat/jenkins.repo rpm --import http://pkg.jenkins-ci.org/redhat/jenkins-ci.org.key

2ã€å®‰è£…jenkinsï¼š
yum install jenkins

3ã€å¯åŠ¨jenkinsï¼š
service jenkins start

Jenkinså®‰è£…ç›®å½•ï¼š/usr/lib/jenkins/ã€‚Jenkinsé…ç½®æ–‡ä»¶ï¼š/etc/sysconfig/jenkinsã€‚
4ã€é˜²ç«å¢™è®¾ç½®
firewall-cmd --add-port=8080/tcp --permanentsystemctl reload firewalld

5ã€åŸºæœ¬è®¾ç½®æµè§ˆå™¨è®¿é—® http://192.168.56.104:8080 ï¼Œå³å¯çœ‹åˆ°jenkinsé¡µé¢ã€‚cat /var/lib/jenkins/secrets/initialAdminPasswordæŸ¥çœ‹ç®¡ç†å‘˜å¯†ç ï¼Œå¡«å…¥é¡µé¢ï¼Œç»§ç»­ï¼›å®‰è£…æ¨èçš„æ’ä»¶ï¼›åˆ›å»ºç¬¬ä¸€ä¸ªç®¡ç†å‘˜ï¼›è®¾ç½®Jenkins URLï¼›å¼€å§‹ä½¿ç”¨Jenkinsã€‚
ä½¿ç”¨Jenkins1ã€æ–°å»ºé¡¹ç›®ç‚¹å‡»æ–°å»ºItemæˆ–è€…åˆ›å»ºä¸€ä¸ªæ–°ä»»åŠ¡ï¼Œæ–°å»ºé¡¹ç›®ã€‚é€‰æ‹©Freestyle projectï¼Œè¾“å…¥åç§°ï¼Œç¡®å®šã€‚
2ã€è®¾ç½®æºç ç®¡ç†ç‚¹å‡»æºç ç®¡ç†Tabé¡µï¼Œé€‰æ‹©Gitï¼ŒRepository URLå¡«å…¥git@gitlab.voidking.com:root/voidking.gitã€‚æ­¤æ—¶æç¤ºæ²¡æœ‰æƒé™è®¿é—®ï¼ŒCredentialsåé¢ç‚¹å‡»æ·»åŠ ï¼ŒJenkinsã€‚Domainå…¨å±€å‡­æ®ï¼ˆunrestrictedï¼‰ï¼Œç±»å‹é€‰æ‹©SSH Username with private keyï¼ŒèŒƒå›´é€‰æ‹©å…¨å±€ï¼ŒUsernameè¾“å…¥rootï¼Œç„¶åæŠŠid_rsaä¸­çš„å†…å®¹ç²˜è´´è¿›å»ï¼Œæ·»åŠ ã€‚ç„¶ååœ¨Credentialsä¸€æ rootï¼Œé¡µé¢ä¸Šçš„è­¦å‘Šå°±æ¶ˆå¤±äº†ã€‚æœ€åä¿å­˜å³å¯ã€‚
3ã€æ„å»ºé¡¹ç›®åœ¨voidkingé¡¹ç›®é¡µé¢ï¼Œç‚¹å‡»ç«‹å³æ„å»ºï¼Œå³å¯å®Œæˆé¡¹ç›®æ„å»ºã€‚ç‚¹å‡»æ§åˆ¶å°è¾“å‡ºï¼Œå¯ä»¥çœ‹åˆ°æ•´ä¸ªæ„å»ºè¿‡ç¨‹ã€‚ä»æ„å»ºè¿‡ç¨‹å¯ä»¥çœ‹å‡ºï¼Œæ•´ä¸ªè¿‡ç¨‹åªæ‹‰å–äº†ä¸€æ¬¡ä»£ç ï¼Œå…¶ä»–å•¥ä¹Ÿæ²¡åšï¼Œä»£ç å­˜æ”¾åœ¨/var/lib/jenkins/workspace/voidkingç›®å½•ã€‚
æ„å»ºJavaWebé¡¹ç›®æ„å»ºJavaWebé¡¹ç›®çš„åŸºæœ¬åŸç†ï¼šJenkinsä»GitLabæ‹‰å–é¡¹ç›®ä»£ç ï¼Œç„¶ååœ¨workspaceçš„é¡¹ç›®ç›®å½•ä¸­æ‰§è¡Œmvn installå‘½ä»¤ç”ŸæˆwaråŒ…ï¼Œæœ€åæ‹·è´waråŒ…åˆ°WebæœåŠ¡å™¨çš„webappsç›®å½•ä¸­å¹¶å¯åŠ¨tomcatã€‚
GitLabé¡¹ç›®å‡†å¤‡1ã€ä½¿ç”¨æœ¬åœ°ç¯å¢ƒï¼ˆJDK+Tomcat+Mavenï¼‰ï¼Œç”ŸæˆJavaWebé¡¹ç›®çš„waråŒ…å¹¶æ”¾å…¥Tomcatè¿›è¡Œæµ‹è¯•ï¼Œæœ¬æ–‡ä¸­ä½¿ç”¨pandawork-starté¡¹ç›®ã€‚
2ã€ä¸Šä¼ Maven JavaWebé¡¹ç›®çš„æºç åˆ°gitlabã€‚å¦‚æœgitlabä¸å…è®¸git push -fï¼Œé‚£ä¹ˆåœ¨gitlabä¸­ç‚¹å‡»é¡¹ç›®åï¼ŒSettingsï¼ŒRepositoryï¼Œä¿®æ”¹Protected Branchesçš„é…ç½®å³å¯ã€‚
WebæœåŠ¡å™¨å‡†å¤‡1ã€å®‰è£…JDKï¼Œå‚è€ƒå‚è€ƒã€Šå…¨å¹³å°å®‰è£…JDKã€‹ã€‚
2ã€å®‰è£…Tomcatï¼Œå‚è€ƒCentOS7è®¾ç½®tomcatå¼€æœºè‡ªå¯åŠ¨ã€‚
3ã€å®‰è£…Mysqlï¼Œå‚è€ƒCentOS7è®¾ç½®mysqlå¼€æœºè‡ªå¯åŠ¨ã€‚
4ã€é…ç½®å…å¯†ç™»å½•ï¼Œä½¿JenkinsæœåŠ¡å™¨å¯ä»¥å…å¯†è®¿é—®WebæœåŠ¡å™¨ï¼Œä½¿Jenkinså¯ä»¥å…å¯†è®¿é—®WebæœåŠ¡å™¨ã€‚ssh-copy-id -i .ssh/id_rsa.pub -p 22 root@192.168.56.105
JenkinsæœåŠ¡å™¨é…ç½®JenkinæœåŠ¡å™¨é…ç½®ä¸»è¦å‚è€ƒJenkinså®‰è£…åŠè‡ªåŠ¨éƒ¨ç½²Mavené¡¹ç›®ã€‚
1ã€å®‰è£…é…ç½®Mavenï¼Œå‚è€ƒcentos7 å®‰è£…mavenã€‚
2ã€ç™»å½•Jenkinsï¼Œç³»ç»Ÿç®¡ç†ï¼Œæ’ä»¶ç®¡ç†ï¼Œå¯é€‰æ’ä»¶ï¼Œä¸‹è½½Maven Integrationã€‚
3ã€è¿”å›å·¥ä½œå°ï¼Œç³»ç»Ÿç®¡ç†ï¼Œå…¨å±€å·¥å…·é…ç½®ã€‚é…ç½®JDKï¼Œé…ç½®Mavenï¼Œä¿å­˜ã€‚
4ã€Jenkinså·¥ä½œå°ï¼Œæ–°å»ºé¡¹ç›®ï¼Œæ„å»ºä¸€ä¸ªMavené¡¹ç›®ã€‚æºç ç®¡ç†é…ç½®gitlabä¸­çš„Java Webé¡¹ç›®ã€‚
5ã€Buildé€‰é¡¹å¡ï¼ŒGoals and Optionsï¼Œè¾“å…¥clean install -Dmaven.test.skip=trueã€‚
6ã€Post Stepsé€‰é¡¹å¡ï¼ŒAdd post-build stepï¼Œæ‰§è¡Œshellï¼Œå¡«å…¥æ‹·è´waråŒ…å’Œå¯åŠ¨tomcatå‘½ä»¤ï¼Œä¿å­˜ã€‚
scp /var/lib/jenkins/workspace/pandawork-start/target/pandawork-start.war root@192.168.56.105:/opt/apache-tomcat-8.5.43/webapps/ssh root@192.168.56.105 &quot;nohup sh /opt/apache-tomcat-8.5.43/bin/startup.sh &amp;&quot;

7ã€Jenkinså·¥ä½œå°ï¼Œç‚¹å‡»Webé¡¹ç›®ï¼Œç«‹å³æ„å»ºï¼Œæ§åˆ¶å°è¾“å‡ºã€‚ç”±ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒMavené¡¹ç›®æ„å»ºæˆåŠŸï¼Œä½†æ˜¯åœ¨æ‰§è¡Œè¿œç¨‹æ‹·è´è„šæœ¬çš„æ—¶å€™å‡ºé”™ï¼Œè¯´æ˜ä¹‹å‰æ·»åŠ çš„å…å¯†ç™»å½•æ²¡æœ‰ç”Ÿæ•ˆã€‚
8ã€ç»™Jenkinsç”¨æˆ·æ·»åŠ å…å¯†ç™»å½•ã€‚ï¼ˆ1ï¼‰æ·»åŠ ç™»å½•æƒé™ï¼Œvim /etc/passwdï¼Œä¿®æ”¹jenkinsç”¨æˆ·æƒé™
#jenkins:x:997:995:Jenkins Automation Server:/var/lib/jenkins:/bin/falsejenkins:x:997:995:Jenkins Automation Server:/var/lib/jenkins:/bin/bash

ï¼ˆ2ï¼‰åˆ‡æ¢åˆ°jenkinsç”¨æˆ·ï¼Œsu jenkins
ï¼ˆ3ï¼‰ç”Ÿæˆå¯†é’¥ï¼Œssh-keygen
ï¼ˆ4ï¼‰å¯†é’¥æ·»åŠ åˆ°WebæœåŠ¡å™¨
cd /var/lib/jenkinsssh-copy-id -i .ssh/id_rsa.pub -p 22 root@192.168.56.105

ï¼ˆ5ï¼‰å†æ¬¡æ„å»ºé¡¹ç›®ï¼Œæ‰§è¡ŒæˆåŠŸï¼
8ã€æµ‹è¯•æœåŠ¡æµè§ˆå™¨è®¿é—® http://192.168.56.105:8080/pandawork-start/ ï¼Œå³å¯çœ‹åˆ°hello worldã€‚
jobå¹¶å‘æ„å»ºéœ€æ±‚ï¼šå·²çŸ¥æœ‰10ä¸ªJavaé¡¹ç›®ï¼Œåç§°åˆ†åˆ«ä¸ºtest1ã€test2ã€â€¦ã€test10ï¼Œç°åœ¨æƒ³è¦ä½¿ç”¨jenkinså¯¹è¿™10ä¸ªé¡¹ç›®è¿›è¡Œæ„å»ºã€‚é—®é¢˜æ¥äº†ï¼Œå¦‚æœä½¿ç”¨åŒä¸€ä¸ªjobï¼Œé‚£ä¹ˆæ¯ä¸ªé¡¹ç›®æ„å»ºæ—¶éƒ½éœ€è¦ç­‰å¾…å‰ä¸€ä¸ªé¡¹ç›®æ„å»ºå®Œæˆï¼Œæ•ˆç‡å¾ˆä½ã€‚å¦‚æœä½¿ç”¨10ä¸ªjobï¼Œé‚£ä¹ˆè¿™10ä¸ªjobçš„é…ç½®åŸºæœ¬ç›¸åŒï¼Œä»¥åå¦‚æœæœ‰ä¿®æ”¹ï¼Œç»´æŠ¤æˆæœ¬å¾ˆé«˜ã€‚è¿™ç§æƒ…å†µä¸‹è¯¥æ€ä¹ˆå¤„ç†ï¼Ÿä½¿ç”¨jobå¹¶å‘æ„å»ºï¼Œå‚è€ƒjenkins å¤šç”¨æˆ·åŒæ—¶è§¦å‘æ„å»ºã€‚
1ã€ç™»å½•Jenkinsï¼Œç³»ç»Ÿç®¡ç†ï¼Œæ’ä»¶ç®¡ç†ï¼Œå¯é€‰æ’ä»¶ï¼Œåœ¨è¿‡æ»¤ä¸­è¾“å…¥build nameå‡ºç°äº† Build Name and Description Setter æ’ä»¶ï¼Œå®‰è£…å®ƒã€‚å®‰è£…å®Œæˆé‡å¯jenkinsã€‚
2ã€åˆ›å»ºä¸€ä¸ªè‡ªç”±é£æ ¼çš„jobï¼Œåä¸ºtest
ï¼ˆ1ï¼‰å‚æ•°åŒ–æ„å»ºè¿‡ç¨‹ï¼Œæ·»åŠ å­—ç¬¦å‚æ•°ï¼Œè¾“å…¥projectNameï¼ˆ2ï¼‰å‹¾é€‰ åœ¨å¿…è¦çš„æ—¶å€™å¹¶å‘æ„å»ºï¼ˆ3ï¼‰å¢åŠ æ„å»ºæ­¥éª¤ï¼ŒUpdate build nameï¼ŒUse macroï¼ŒBuild name macro templateï¼Œè¾“å…¥#$&#123;BUILD_NUMBER&#125;_$&#123;projectName&#125;ï¼ˆ4ï¼‰å‹¾é€‰ Insert macro firstï¼ˆ5ï¼‰å¢åŠ æ„å»ºæ­¥éª¤ï¼Œæ‰§è¡Œshellï¼Œè¾“å…¥
pwdfor i in `seq 0 120`do	echo &quot;Project Name: &quot;$&#123;projectName&#125;    sleep 1sdone

ï¼ˆ6ï¼‰ä¸¤æ¬¡ç‚¹å‡»Build with Parametersï¼Œåˆ†åˆ«è¾“å…¥é¡¹ç›®åtest1å’Œtest2è¿›è¡Œæ„å»ºã€‚å¯ä»¥çœ‹åˆ°ï¼ŒBuild Historyé‡Œçš„æ„å»ºåç§°æ˜¯ä¸¤ä¸ªä¸åŒçš„åç§°ã€‚
3ã€æ¸…é™¤workspaceå¹¶å‘æ„å»ºåï¼Œworkspaceä¸‹ä¼šç”Ÿæˆtestå’Œtest@2ä¸¤ä¸ªç›®å½•ï¼Œå¦‚æœå¹¶å‘é‡é«˜äº†è¿˜ä¼šæ›´å¤šï¼Œæ­¤æ—¶éœ€è¦æ¸…é™¤workspaceã€‚åœ¨jobé…ç½®é¡µé¢ï¼Œå¢åŠ æ„å»ºåæ“ä½œæ­¥éª¤ï¼Œé€‰æ‹© Delete workspace when build is doneã€‚
æ·»åŠ slaveèŠ‚ç‚¹1ã€æ–°å»ºèŠ‚ç‚¹ç³»ç»Ÿç®¡ç†ï¼Œæ–°å»ºèŠ‚ç‚¹ï¼Œè¾“å…¥èŠ‚ç‚¹åç§°ï¼Œé€‰ä¸­å›ºå®šèŠ‚ç‚¹ï¼Œç¡®å®šã€‚
2ã€å®Œå–„èŠ‚ç‚¹ç»†èŠ‚è¾“å…¥æè¿°ï¼ˆä¸»æœºåï¼‰ï¼Œæ‰§è¡Œå™¨æ•°é‡ï¼ˆä¸€èˆ¬å’ŒèŠ‚ç‚¹CPUæ ¸æ•°ç›¸åŒï¼Œæ­¤å¤„å¡«4ï¼‰ï¼Œè¿œç¨‹å·¥ä½œç›®å½•ï¼ˆ/home/jenkinsï¼‰ï¼Œæ ‡ç­¾ï¼ˆç”¨äºæ„å»ºå“ªäº›é¡¹ç›®ï¼Œæ­¤å¤„å¡«project1ï¼‰ï¼Œç”¨æ³•ï¼ˆåªå…è®¸è¿è¡Œç»‘å®šåˆ°è¿™å°æœºå™¨çš„Jobï¼‰ï¼Œå¯åŠ¨æ–¹å¼ï¼ˆLaunch agent agents via SSHï¼‰ï¼Œä¸»æœºï¼ˆèŠ‚ç‚¹IPï¼‰ï¼ŒHost Key Verification Strategyï¼ˆNon verifying Verification Strategyï¼‰ï¼Œå¯ç”¨æ€§ï¼ˆå°½é‡ä¿æŒä»£ç†åœ¨çº¿ï¼‰
3ã€è¯ä¹¦é…ç½®ä»¥ä¸Šé…ç½®è¿˜æ¼äº†ä¸€ä¸ªCredentialsï¼Œè¿™ä¸ªéœ€è¦è¯¦ç»†è¯´ä¸€ä¸‹ã€‚ï¼ˆ1ï¼‰åœ¨masterèŠ‚ç‚¹ä½¿ç”¨rootç”¨æˆ·ç”Ÿæˆå¯†é’¥å¯¹ï¼Œssh-keygenï¼ˆ2ï¼‰åœ¨slaveèŠ‚ç‚¹æ·»åŠ masterèŠ‚ç‚¹çš„å…¬é’¥ï¼Œvim /root/.ssh/authorized_keysï¼ŒæŠŠmasterèŠ‚ç‚¹çš„id_rsa.pubå†…å®¹æ·»åŠ è¿›å»ã€‚ï¼ˆ3ï¼‰åœ¨jenkinsèŠ‚ç‚¹é…ç½®é¡µé¢ï¼Œä¸Šå›¾çº¢æ¡†çš„åœ°æ–¹ï¼Œæ·»åŠ ï¼ŒJenkinsã€‚ï¼ˆ4ï¼‰æ·»åŠ å‡­æ®ï¼ŒDomainï¼ˆå…¨å±€å‡­æ®ï¼‰ï¼Œç±»å‹ï¼ˆSSH Username with private keyï¼‰ï¼ŒèŒƒå›´ï¼ˆå…¨å±€ï¼‰ï¼Œæè¿°ï¼ˆroot private keyï¼‰ï¼ŒUsernameï¼ˆrootï¼‰ï¼ŒPrivate Keyé€‰ä¸­Enter directlyï¼ŒKeyï¼ˆç²˜è´´masterèŠ‚ç‚¹çš„id_rsaï¼‰ï¼Œæ·»åŠ ã€‚
4ã€å¯åŠ¨ä»£ç†èŠ‚ç‚¹åˆ—è¡¨ï¼Œç‚¹å‡»èŠ‚ç‚¹åç§°ï¼Œå¯åŠ¨ä»£ç†ï¼Œå»ºç«‹masterèŠ‚ç‚¹ä¸slaveèŠ‚ç‚¹çš„è¿æ¥ã€‚å¯åŠ¨æ—¥å¿—æ˜¾ç¤ºï¼š
&lt;===[JENKINS REMOTING CAPACITY]===&gt;channel startedRemoting version: 3.36This is a Unix agentEvacuated stdoutAgent successfully connected and online...
è¡¨ç¤ºè¿æ¥æˆåŠŸï¼ŒæˆåŠŸåŠ å…¥äº†ä¸€ä¸ªjenkins slaveèŠ‚ç‚¹ã€‚
æŒ‡å®šslaveèŠ‚ç‚¹æ„å»ºæ–¹æ³•ä¸€1ã€åœ¨é…ç½®jobæ—¶ï¼Œå‹¾é€‰é™åˆ¶é¡¹ç›®çš„è¿è¡ŒèŠ‚ç‚¹ï¼Œæ ‡ç­¾è¡¨è¾¾å¼è¾“å…¥â€œproject1â€ï¼ˆå’ŒslaveèŠ‚ç‚¹çš„æ ‡ç­¾å¯¹åº”ï¼‰ã€‚
2ã€æ„å»ºé¡¹ç›®ï¼Œå› ä¸ºslaveçš„æ‰§è¡Œå™¨æ•°é‡è®¾ç½®ä¸º4ï¼Œæ‰€ä»¥å½“åŒæ—¶æ„å»ºçš„æ•°é‡åœ¨4ä»¥å†…æ—¶ï¼Œä¼šä½¿ç”¨slave1ï¼›å½“åŒæ—¶æ„å»ºçš„æ•°é‡è¶…è¿‡4ä¸ªæ—¶ï¼Œä¼šä½¿ç”¨slave2ã€‚
æ–¹æ³•äºŒ1ã€ç™»å½•Jenkinsï¼Œç³»ç»Ÿç®¡ç†ï¼Œæ’ä»¶ç®¡ç†ï¼Œå¯é€‰æ’ä»¶ï¼Œåœ¨è¿‡æ»¤ä¸­è¾“å…¥nodeæ‰¾åˆ° Node and Label parameter plugin æ’ä»¶ï¼Œå®‰è£…å®ƒã€‚
2ã€å‚æ•°åŒ–æ„å»ºè¿‡ç¨‹ï¼Œæ·»åŠ å‚æ•°ï¼ŒNodeã€‚æŒ‰ä½ctrlé€‰æ‹©ä½¿ç”¨çš„æœºå™¨ï¼Œå¹¶ä¸”é€‰ä¸­Allow multi node selection for concurrent buildsã€‚
ä½¿ç”¨ä¸Šæ¬¡çš„å‚æ•°æ„å»ºå¦‚æœä¸€ä¸ªjobçš„å‚æ•°å¾ˆå¤šï¼Œé‚£ä¹ˆæ¯æ¬¡æ„å»ºéƒ½è¦è¾“å…¥å¾ˆå¤šå‚æ•°ï¼Œå¾ˆéº»çƒ¦ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨Rebuilderæ’ä»¶ã€‚1ã€ç™»å½•Jenkinsï¼Œç³»ç»Ÿç®¡ç†ï¼Œæ’ä»¶ç®¡ç†ï¼Œå¯é€‰æ’ä»¶ï¼Œåœ¨è¿‡æ»¤ä¸­è¾“å…¥rebuilderæ‰¾åˆ° Rebuilder æ’ä»¶ï¼ˆThis plugin is for rebuilding a job using the same parameters.ï¼‰ï¼Œå®‰è£…å®ƒã€‚
2ã€æ„å»ºé¡¹ç›®é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°Rebuild Lasté€‰é¡¹ï¼Œç‚¹å‡»å®ƒä½¿ç”¨ä¸Šæ¬¡å‚æ•°å†æ¬¡æ„å»ºã€‚ä¹Ÿå¯ä»¥è¿›å…¥æŸæ¬¡Build Historyï¼Œå¯ä»¥çœ‹åˆ°Rebuildé€‰é¡¹ï¼Œç‚¹å‡»å®ƒï¼Œå³å¯ä½¿ç”¨è¯¥æ¬¡æ„å»ºçš„å‚æ•°å†æ¬¡æ„å»ºã€‚
ä»»åŠ¡è¶…æ—¶è‡ªåŠ¨åœæ­¢å¦‚æœä¸€ä¸ªæ„å»ºä»»åŠ¡ï¼Œå› ä¸ºç½‘ç»œæˆ–è€…å…¶ä»–åŸå› é˜»å¡äº†ï¼Œå¡ä½äº†10åˆ†é’Ÿä»¥ä¸Šï¼Œè¿™æ—¶æˆ‘ä»¬å¸Œæœ›è¿™ä¸ªä»»åŠ¡èƒ½å¤Ÿè‡ªåŠ¨åœæ­¢ã€‚1ã€ç™»å½•Jenkinsï¼Œç³»ç»Ÿç®¡ç†ï¼Œæ’ä»¶ç®¡ç†ï¼Œå¯é€‰æ’ä»¶ï¼Œåœ¨è¿‡æ»¤ä¸­è¾“å…¥timeoutã€‚æ‰¾åˆ° Build Timeout æ’ä»¶ï¼ˆThis plugin allows builds to be automatically terminated after the specified amount of time has elapsed.ï¼‰ï¼Œå®‰è£…å®ƒã€‚
2ã€è¿›å…¥éœ€è¦é…ç½®çš„jobï¼Œé…ç½®ï¼Œæ„å»ºç¯å¢ƒï¼Œå‹¾é€‰ Abort the build if itâ€™s stuckã€‚

Time-out strategy ä¿æŒé»˜è®¤ Absolute 
Timeout minutes è°ƒæ•´ä¸º 10 
Time-out variable ä¸ç”¨å¡«
Time-out actionsï¼ŒAdd actionï¼ŒAbort the build

Jenkins API1ã€åˆ›å»ºjob
curl -X POST JENKINS_URL/createItem \  --user USER:TOKEN \  --data-urlencode json=&#x27;&#123;&quot;name&quot;:&quot;new_job&quot;,&quot;mode&quot;:&quot;copy&quot;,&quot;from&quot;:&quot;old_job&quot;&#125;&#x27;

2ã€æ„å»º
curl -X POST JENKINS_URL/job/JOB_NAME/buildWithParameters \  --user USER:TOKEN \  --data-urlencode json=&#x27;&#123;&quot;parameter&quot;: [&#123;&quot;name&quot;:&quot;id&quot;, &quot;value&quot;:&quot;123&quot;&#125;, &#123;&quot;name&quot;:&quot;verbosity&quot;, &quot;value&quot;:&quot;high&quot;&#125;]&#125;&#x27;

3ã€æŸ¥çœ‹buildnum
curl -X POST JENKINS_URL/job/JOB_NAME/lastBuild/buildNumber

å¦‚æœä½¿ç”¨postmanæµ‹è¯•çš„è¯ï¼Œ--user USER:TOKEN å¯¹åº” Authorization ä¸­çš„ Basic Authï¼ŒUsernameå’ŒPasswordã€‚--data-urlencode json å¯¹åº” Body ä¸­çš„ x-www-form-urlencodedã€‚
æ›´å¤šå†…å®¹å‚è€ƒï¼š

Remote access API
Python Jenkins documentation
jjb/python-jenkins
ä½¿ç”¨APIå¯¹Jobè¿›è¡Œæ“ä½œ
build now option is not coming for job in jenkins
Jenkins api too slow

åè®°è‡³æ­¤ï¼ŒJenkinså®‰è£…é…ç½®å®Œæˆï¼Œä½¿ç”¨Jenkinsé…ç½®éƒ¨ç½²äº†ä¸€ä¸ªJava Webé¡¹ç›®ã€‚æœ¬æ–‡ä¸­ç”¨åˆ°äº†ä¸‰å°æœåŠ¡å™¨ï¼Œåˆ†åˆ«æ˜¯GitLabæœåŠ¡å™¨ã€WebæœåŠ¡å™¨å’ŒJenkinsæœåŠ¡å™¨ã€‚Jenkinsä»GitLabæ‹‰å–é¡¹ç›®ä»£ç ï¼Œç„¶ååœ¨workspaceçš„é¡¹ç›®ç›®å½•ä¸­æ‰§è¡Œmvn installå‘½ä»¤ç”ŸæˆwaråŒ…ï¼Œæœ€åæ‹·è´waråŒ…åˆ°WebæœåŠ¡å™¨çš„webappsç›®å½•ä¸­å¹¶å¯åŠ¨tomcatã€‚
ä¹¦ç­¾CentOS å®‰è£… Jenkins
Jenkinsè¯¦ç»†å®‰è£…ä¸æ„å»ºéƒ¨ç½²ä½¿ç”¨æ•™ç¨‹
æŒç»­é›†æˆJenkins+Gitlab
åŸºäºgitlabå’Œjenkinsçš„è‡ªåŠ¨åŒ–éƒ¨ç½²å®ä¾‹
Jenkinså¸¸ç”¨æ’ä»¶ä¹‹Deploy Plugin
jenkins plugins
Least Load
ä½¿ç”¨Jenkinsè¿›è¡ŒæŒç»­é›†æˆ
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>git</tag>
        <tag>tomcat</tag>
        <tag>java</tag>
        <tag>maven</tag>
        <tag>centos</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7å®‰è£…é…ç½®GitLab</title>
    <url>/dev-centos7-install-gitlab/</url>
    <content><![CDATA[GitLabç®€ä»‹GitLabæ˜¯GitLabå…¬å¸å¼€å‘çš„åŸºäºRailsçš„å¼€æºå­˜å‚¨åº“ç®¡ç†å™¨ã€‚å®ƒæ˜¯ä¸€ä¸ªåŸºäºWebçš„gitå­˜å‚¨åº“ç®¡ç†å™¨ï¼Œå…è®¸å›¢é˜Ÿåä½œç¼–å†™ã€æµ‹è¯•å’Œéƒ¨ç½²åº”ç”¨ç¨‹åºã€‚GitLabæä¾›äº†å¤šç§åŠŸèƒ½ï¼ŒåŒ…æ‹¬wikiã€é—®é¢˜è·Ÿè¸ªã€ä»£ç å®¡æŸ¥å’Œæ´»åŠ¨æºã€‚GitLab Incæä¾›5ç§äº§å“ï¼š

Gitlab CEï¼ˆç¤¾åŒºç‰ˆï¼‰ï¼šè‡ªæ‰˜ç®¡å’Œå…è´¹ï¼Œç¤¾åŒºè®ºå›çš„æ”¯æŒã€‚
Gitlab EEï¼ˆä¼ä¸šç‰ˆï¼‰ï¼šè‡ªæ‰˜ç®¡å’Œä»˜è´¹ï¼Œé™„å¸¦å…¶ä»–åŠŸèƒ½ã€‚
Gitlab JHï¼ˆä¼ä¸šçº§ä¸­å›½å‘è¡Œç‰ˆï¼‰ï¼šæç‹ï¼Œè‡ªæ‰˜ç®¡å’Œä»˜è´¹ï¼Œé™„å¸¦å…¶ä»–åŠŸèƒ½ã€‚
GitLab.comï¼šSaaSå’Œå…è´¹ã€‚
GitLab.ioï¼šç”±GitLab Inc.ç®¡ç†çš„ç§æœ‰GitLabå®ä¾‹ã€‚

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨å…·æœ‰2GB RAMçš„CentOS7æœåŠ¡å™¨ä¸Šé€æ­¥å®‰è£…GitLab CEï¼ˆCommunity Editionï¼‰ï¼ŒæœåŠ¡å™¨IPä¸º192.168.56.103ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

How to Install and Configure GitLab CE on CentOS 7
How to Install and Configure GitLab on CentOS 7
CentOS 7 æ­å»ºCAè®¤è¯ä¸­å¿ƒå®ç°httpså–è¯



ç¯å¢ƒå‡†å¤‡é¦–å…ˆå®‰è£…GitLabä¾èµ–çš„ç›¸å…³è½¯ä»¶ã€‚
1ã€è½¯ä»¶å®‰è£…yum -y install curl policycoreutils openssh-server openssh-clients postfix
2ã€postfixè®¾ç½®å¼€æœºè‡ªå¯åŠ¨
systemctl start postfixsystemctl enable postfixsystemctl status postfix

å®‰è£…GitLab1ã€æ·»åŠ GitLab CE repositorycurl -sS https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh | sudo bash
2ã€å®‰è£…gitlabyum -y install gitlab-ceè½¯ä»¶642Mï¼Œéœ€è¦ä¸‹è½½ä¸€ä¼šï¼Œè€å¿ƒç­‰å¾…ï¼Œå®‰è£…å®Œæˆä¼šå‡ºç°æç¤ºã€‚
3ã€é…ç½®gitlab urlvim /etc/gitlab/gitlab.rbï¼Œä¿®æ”¹external_urlä¸ºï¼š
external_url &#x27;http://gitlab.voidking.com&#x27;

ä½¿gitlabé…ç½®ç”Ÿæ•ˆï¼Œgitlab-ctl reconfigureã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªå‘½ä»¤æ‰§è¡Œæ—¶é—´ç‰¹åˆ«ä¹…ï¼Œå› æ­¤å»ºè®®åœ¨å®‰è£…çš„æ—¶å€™å°±æŒ‡å®šexternal_urlï¼šEXTERNAL_URL=&quot;http://gitlab.voidking.com&quot; yum -y install gitlab-ce
4ã€å¼€æ”¾ç«¯å£
firewall-cmd --add-port=80/tcp --permanentfirewall-cmd --add-port=443/tcp --permanentsystemctl reload firewalld

5ã€æµ‹è¯•è®¿é—®æµè§ˆå™¨è®¿é—® http://192.169.56.103 ï¼Œå³å¯è·³è½¬åˆ°gitlabç™»å½•é¡µé¢ã€‚é‡ç½®å¯†ç ä¹‹åï¼Œä½¿ç”¨rootç”¨æˆ·ç™»å½•ï¼Œå³å¯è¿›è¡Œé¡¹ç›®ç®¡ç†ã€‚
6ã€åŸŸåè®¿é—®ä¿®æ”¹æœ¬æœºhostï¼Œæ·»åŠ ï¼š
192.168.56.103  gitlab.voidking.com
ç„¶åå°±å¯ä»¥é€šè¿‡åŸŸåè®¿é—®gitlabäº†ï¼Œå¥‡æ€ªçš„æ˜¯ï¼ŒåŸŸåå“ªæ€•ä¸æ˜¯è®¾ç½®æˆexternal_urlä¸­çš„urlï¼Œä¹Ÿå¯ä»¥é€šè¿‡åŸŸåè®¿é—®ã€‚
é…ç½®HTTPSåŠ å¯†è®¿é—®HTTPS(SSL/TLS)åŠ å¯†åŸç†ï¼Œå‚è€ƒæ–‡æ¡£ã€Šæµ…è°ˆæ•°æ®åŠ å¯†ã€‹ã€‚
è‡ªå»ºCAå¹¶é¢å‘è¯ä¹¦å‚è€ƒæ–‡æ¡£ï¼š

å®‰è£…åŠä½¿ç”¨mkcertåœ¨Linuxå’ŒmacOSä¸­åˆ›å»ºæœ¬åœ°å—ä¿¡ä»»çš„SSLè¯ä¹¦
mkcert githut
åŸºäºOpenSSLè‡ªå»ºCAå’Œé¢å‘SSLè¯ä¹¦
ä½¿ç”¨ OpenSSL è‡ªå»º CA å¹¶ç­¾å‘è¯ä¹¦

æœ¬èŠ‚ä¸­ï¼Œå®‰è£…mkcertå¹¶ä½¿ç”¨å®ƒç”ŸæˆSSLè¯ä¹¦ã€‚
1ã€å®‰è£…nss-toolså·¥å…·yum install nss-tools
2ã€ä¸‹è½½äºŒè¿›åˆ¶åŒ…wget -O mkcert https://github.com/FiloSottile/mkcert/releases/download/v1.3.0/mkcert-v1.3.0-linux-amd64
3ã€æ·»åŠ æ‰§è¡Œæƒé™å¹¶ç§»å…¥bin
chmod +x  mkcertmv mkcert /usr/local/bin

4ã€è·å–CAæ ¹ç›®å½•mkcert -CAROOT
5ã€å®‰è£…æœ¬åœ°CAmkcert -installï¼Œè¾“å‡ºï¼š
Using the local CA at &quot;/root/.local/share/mkcert&quot; âœ¨The local CA is now installed in the system trust store! âš¡ERROR: no Firefox and/or Chrome/Chromium security databases foundThe local CA is now installed in Java&#x27;s trust store! â˜•

6ã€ç”Ÿæˆè¯ä¹¦mkcert gitlab.voidking.com localhost 127.0.0.1ï¼Œè¾“å‡ºï¼š
Using the local CA at &quot;/root/.local/share/mkcert&quot; âœ¨Warning: the local CA is not installed in the Firefox and/or Chrome/Chromium trust store! âš Run &quot;mkcert -install&quot; to avoid verification errors â€¼ Created a new certificate valid for the following names ğŸ“œ - &quot;gitlab.voidking.com&quot; - &quot;localhost&quot; - &quot;127.0.0.1&quot;The certificate is at &quot;./gitlab.voidking.com+2.pem&quot; and the key at &quot;./gitlab.voidking.com+2-key.pem&quot; âœ…

7ã€åˆ›å»ºè¯ä¹¦ç›®å½•å¹¶ä¸”ç§»åŠ¨è¯ä¹¦
mkdir -p /etc/gitlab/ssl/mv gitlab.voidking.com* /etc/gitlab/ssl/

ç”ŸæˆDHPARAM1ã€ä½¿ç”¨OpenSSLç”ŸæˆDHPARAMè¯ä¹¦pemæ–‡ä»¶openssl dhparam -out /etc/gitlab/ssl/dhparams.pem 2048
2ã€å°†è¯ä¹¦æ–‡ä»¶çš„æƒé™æ›´æ”¹ä¸º600chmod 600 /etc/gitlab/ssl/dhparams.pem
ä½¿ç”¨1ã€ä¿®æ”¹gitlab urlvim /etc/gitlab/gitlab.rbï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
external_url &#x27;https://gitlab.voidking.com&#x27;nginx[&#x27;redirect_http_to_https&#x27;] = truenginx[&#x27;ssl_certificate&#x27;] = &quot;/etc/gitlab/ssl/gitlab.voidking.com+2.pem&quot;nginx[&#x27;ssl_certificate_key&#x27;] = &quot;/etc/gitlab/ssl/gitlab.voidking.com+2-key.pem&quot;nginx[&#x27;ssl_dhparam&#x27;] = &quot;/etc/gitlab/ssl/dhparams.pem&quot;

2ã€é‡æ–°é…ç½®gitlabgitlab-ctl reconfigure
3ã€æµ‹è¯•è®¿é—®æœåŠ¡å™¨ä¸Šæµ‹è¯•ï¼Œcurl localhost -Lï¼Œæ­£å¸¸ã€‚æœ¬åœ°æµè§ˆå™¨è®¿é—® https://gitlab.voidking.com/users/sign_in ï¼Œå‡ºç°å®‰å…¨æç¤ºã€‚è¿™æ˜¯å› ä¸ºï¼Œè¿™æ˜¯å› ä¸ºæµè§ˆå™¨ä¸ä¿¡ä»»åˆšæ‰è‡ªå»ºçš„CAï¼Œè§£å†³åŠæ³•æ˜¯å®‰è£…rootCAï¼Œæ›´å¤šå†…å®¹å‚è€ƒhttps ä»¥åŠå†…ç½‘å¦‚ä½•ä½¿ç”¨ã€‚ 
4ã€ä¸‹è½½rootCA.pemä»/root/.local/share/mkcertç›®å½•ä¸­ä¸‹è½½rootCA.pemåˆ°æœ¬åœ°ã€‚
5ã€Chromeæ·»åŠ è¯ä¹¦è®¾ç½®ï¼Œé«˜çº§è®¾ç½®ï¼Œç®¡ç†è¯ä¹¦ï¼Œå¯¼å…¥ï¼Œé€‰æ‹©rootCA.pemï¼Œè¯ä¹¦å­˜å‚¨é€‰æ‹©å—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæ„ï¼Œå®Œæˆï¼Œå‡ºç°è­¦å‘Šç‚¹ç¡®å®šã€‚é‡å¯Chromeï¼Œå†æ¬¡è®¿é—®å°±æ²¡æœ‰è­¦å‘Šäº†ã€‚
6ã€Firefoxæ·»åŠ è¯ä¹¦é€‰é¡¹ï¼Œéšç§ä¸å®‰å…¨ï¼Œè¯ä¹¦ï¼ŒæŸ¥çœ‹è¯ä¹¦ï¼Œå¯¼å…¥ï¼Œé€‰æ‹©rootCA.pemã€‚é‡å¯Firefoxï¼Œå†æ¬¡è®¿é—®å°±æ²¡æœ‰è­¦å‘Šäº†ã€‚
7ã€åˆ›å»ºé¡¹ç›®Create a Projectï¼ŒProject nameå¡«å…¥voidkingï¼Œé€‰æ‹©Publicï¼Œå‹¾é€‰Initialize repository with a READMEã€‚
8ã€cloneé¡¹ç›®
git config --global http.sslVerify falsegit clone https://gitlab.voidking.com/root/voidking.git

9ã€ä¸Šä¼ ä»£ç 
# æ·»åŠ test.txtæ–‡ä»¶git add .git commit -m &quot;add new file&quot;git push
æŸ¥çœ‹é¡¹ç›®ï¼Œä»£ç å·²ç»ä¸Šä¼ æˆåŠŸã€‚
é”™è¯¯æ’æŸ¥å…³é—­æœåŠ¡å™¨ä¹‹åé‡å¯ï¼Œå‘ç°æ— æ³•è®¿é—®gitlabæœåŠ¡ã€‚1ã€å…³é—­é˜²ç«å¢™
systemctl stop firewalldsystemctl disable firewalld
å…³é—­é˜²ç«å¢™ä¹‹åï¼Œä¾ç„¶æ— æ³•è®¿é—®ã€‚
2ã€æŸ¥çœ‹æœåŠ¡å’Œç«¯å£
ps aux | grep nginxnetstat -nlpt | grep 80
æ²¡æœ‰æ‰¾åˆ°nginxæœåŠ¡ï¼Œè¯´æ˜nginxå‡ºäº†é—®é¢˜ã€‚gitlab-ctl restart nginxï¼Œæ— æ•ˆï¼Œ80ç«¯å£ä¾ç„¶æ²¡æœ‰ç›‘å¬ã€‚
3ã€æŸ¥çœ‹gitlabæ—¥å¿—gitlab-ctl tailè¿™æ¬¡å®šä½åˆ°äº†é—®é¢˜ï¼Œç¼ºå°‘pemæ–‡ä»¶ã€‚
2019-08-06_09:26:08.31983 nginx: [emerg] BIO_new_file(&quot;/etc/gitlab/ssl/gitlab.voidking.com+2.pem&quot;) failed (SSL: error:02001002:system library:fopen:No such file or directory:fopen(&#x27;/etc/gitlab/ssl/gitlab.voidking.com+2.pem&#x27;,&#x27;r&#x27;) error:2006D080:BIO routines:BIO_new_file:no such file)

æŸ¥çœ‹/etc/gitlab/ssl/ç›®å½•ï¼Œå‘ç°gitlab.voidking.com+2.pemå˜æˆäº†gitlab.voidking.com+3.pemï¼è™½ç„¶ä¸çŸ¥é“ä¸ºä»€ä¹ˆ2å˜æˆäº†3ï¼Œä½†æ˜¯æ”¹å›æ¥åº”è¯¥å°±å¯ä»¥äº†ã€‚æ”¹å›åŸæ–‡ä»¶åï¼Œé—®é¢˜è§£å†³ã€‚
åè®°è‡³æ­¤ï¼Œå±€åŸŸç½‘çš„gitlabå®‰è£…é…ç½®å®Œæˆï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚åœ¨å…¬ç½‘ç¯å¢ƒä¸‹ï¼Œé…ç½®æ›´åŠ ç®€å•ï¼Œgitlab.rbä¸­é…ç½®è¯ä¹¦é¢å‘æœºæ„é¢å‘çš„SSLè¯ä¹¦å³å¯ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>centos</tag>
        <tag>gitlab</tag>
        <tag>https</tag>
        <tag>åŠ å¯†</tag>
      </tags>
  </entry>
  <entry>
    <title>ELKé…ç½®FileBeat</title>
    <url>/dev-elk-with-filebeat/</url>
    <content><![CDATA[å‰è¨€ã€ŠCentOS7å®‰è£…éƒ¨ç½²ELKã€‹ä¸€æ–‡ä¸­ï¼Œå·²ç»å®‰è£…éƒ¨ç½²äº†ELKçš„åŸºæœ¬æ¶æ„ï¼Œå®ç°äº†Logstashæ”¶é›†å®¢æˆ·èŠ‚ç‚¹æ•°æ®ï¼Œä¼ é€’ç»™Elasticsearchï¼Œç„¶åæ˜¾ç¤ºåœ¨Kibanaä¸­ã€‚æœ¬æ–‡ä¸­ï¼Œé…ç½®ä½¿ç”¨FileBeatæ¥æ”¶é›†å®¢æˆ·èŠ‚ç‚¹æ•°æ®ï¼Œç„¶ååˆ†åˆ«ä¼ é€’ç»™Logstashã€Elasticsearchï¼Œæœ€åé…ç½®ä½¿ç”¨Kibanaä»ªè¡¨ç›˜æ¥æ˜¾ç¤ºFileBeatçš„æ•°æ®ã€‚


Beatsç®€ä»‹Beats å¹³å°é›†åˆäº†å¤šç§å•ä¸€ç”¨é€”æ•°æ®é‡‡é›†å™¨ã€‚å®ƒä»¬ä»æˆç™¾ä¸Šåƒæˆ–æˆåƒä¸Šä¸‡å°æœºå™¨å’Œç³»ç»Ÿå‘ Logstash æˆ– Elasticsearch å‘é€æ•°æ®ã€‚Packetbeatæ˜¯æœ€å…ˆå‡ºç°çš„ï¼Œç”¨æ¥æ”¶é›†ç½‘ç»œæ•°æ®ã€‚é€æ­¥è¡ç”Ÿå‡ºäº†å…¶ä»–5ä¸ª Beatsï¼Œåˆ†åˆ«æ˜¯æ—¥å¿—æ–‡ä»¶ã€ç³»ç»Ÿä¿¡æ¯ã€å®¡è®¡æ•°æ®ã€Windows ç³»ç»Ÿæ—¥å¿—å’Œå¯ç”¨æ€§ç›‘æ§ï¼Œå¹¶ä¸”å¦å¤–è¿˜æœ‰40å¤šä¸ªç¤¾åŒºç»´æŠ¤çš„ Beats æ¥è®°å½•å„ç§è¿è¥æ•°æ®ã€‚
å¸¸è§çš„Beatsé‡‡é›†å™¨åŒ…æ‹¬ï¼š

Filebeatï¼šæ—¥å¿—æ–‡ä»¶ã€‚
Metricbeatï¼šæŒ‡æ ‡ã€‚
Packetbeatï¼šç½‘ç»œæ•°æ®ã€‚
Winlogbeatï¼šWindowsäº‹ä»¶æ—¥å¿—ã€‚
Auditbeatï¼šå®¡è®¡æ•°æ®ã€‚
Heartbeatï¼šè¿è¡Œæ—¶é—´ç›‘æ§ã€‚
Functionbeatï¼šæ— éœ€æœåŠ¡å™¨çš„é‡‡é›†å™¨ã€‚

æ›´å¤šå†…å®¹å‚è€ƒBeats: Elasticsearchçš„æ•°æ®é‡‡é›†å™¨ã€‚
é…ç½®Logstashé¦–å…ˆé…ç½®Logstashï¼Œä½¿ä¹‹èƒ½å¤Ÿæ¥æ”¶Beatså‘é€çš„æ•°æ®ã€‚
1ã€æ‹·è´æ¨¡æ¿åˆ°é…ç½®ç›®å½•
cp /etc/logstash/logstash-sample.conf /etc/logstash/conf.d/filebeat.conf

2ã€ç¼–è¾‘filebeat.conf
vim /etc/logstash/conf.d/filebeat.conf

filebeat.conf ä¿®æ”¹ä¸ºï¼ˆå®é™…ä¸Šå¹¶ä¸éœ€è¦ä¿®æ”¹ï¼‰ï¼š
input &#123;  beats &#123;    port =&gt; 5044  &#125;&#125;output &#123;  elasticsearch &#123;    hosts =&gt; [&quot;http://localhost:9200&quot;]    index =&gt; &quot;%&#123;[@metadata][beat]&#125;-%&#123;[@metadata][version]&#125;-%&#123;+YYYY.MM.dd&#125;&quot;    #user =&gt; &quot;elastic&quot;    #password =&gt; &quot;changeme&quot;  &#125;&#125;

3ã€æ£€æŸ¥é…ç½®
/usr/share/logstash/bin/logstash --path.settings /etc/logstash -t# or/usr/share/logstash/bin/logstash --path.settings /etc/logstash --config.test_and_exit

4ã€å¯åŠ¨logstashå¹¶è®¾ç½®å¼€æœºè‡ªå¯åŠ¨
systemctl start logstashsystemctl enable logstash

5ã€æŸ¥çœ‹5044ç«¯å£æœåŠ¡æƒ…å†µ
netstat -nlpt | grep 5044
æ‰¾ä¸åˆ°æœåŠ¡ï¼Œå“ªé‡Œå‡ºäº†é—®é¢˜ï¼Ÿæ²¡å‡ºå•¥é—®é¢˜ï¼Œè¯·ç­‰å¾…3åˆ†é’Ÿä»¥ä¸Šï¼Œç„¶åé‡æ–°æ‰§è¡Œå‘½ä»¤ã€‚
å®‰è£…FileBeatå‚è€ƒInstall Filebeatï¼Œå®‰è£…FileBeatã€‚
1ã€ä¸‹è½½rpmå®‰è£…åŒ…
curl -L -O https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-7.2.0-x86_64.rpm

2ã€ä½¿ç”¨å®‰è£…åŒ…å®‰è£…FileBeat
rpm -vi filebeat-7.2.0-x86_64.rpm

3ã€æŸ¥çœ‹FileBeatå®‰è£…ä¿¡æ¯
rpm -qi filebeat

é…ç½®FileBeatåˆ°Logstashå‚è€ƒConfigure Filebeatï¼Œé…ç½®FileBeatã€‚
1ã€ç¼–è¾‘filebeat.yml
vim /etc/filebeat/filebeat.yml

filebeat.ymlå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 24, change filebeat.inputfilebeat.inputs:- type: log  enabled: true  paths:    - /var/log/*.log# line 148 and 150, comment output.elasticsearch# line 158 and 160, uncomment output.logstashoutput.logstash:  # The Logstash hosts  hosts: [&quot;localhost:5044&quot;]

2ã€æµ‹è¯•å¯åŠ¨filebeat
filebeat -e -c /etc/filebeat/filebeat.yml -d &quot;publish&quot;
ä¸logstashå»ºç«‹äº†è¿æ¥ï¼Œå¯åŠ¨æˆåŠŸã€‚
3ã€æ­¤æ—¶å¯ä»¥åœ¨ESä¸­æŸ¥çœ‹åˆ°ç´¢å¼•æµè§ˆå™¨è®¿é—® http://192.168.56.101:9200/_cat/indices?v
4ã€æŸ¥çœ‹filebeatæ”¶é›†çš„æ•°æ®æµè§ˆå™¨è®¿é—® http://192.168.56.101:9200/filebeat-7.2.0-2019.07.30/_search?pretty
5ã€åœ¨kibanaä¸­æŸ¥çœ‹æ—¥å¿—æ•°æ®æ—¥å¿—æ•°æ®æ˜¯/var/log/*.logï¼Œå®é™…åŒ…æ‹¬boot.logã€yum.logå’Œtest.logã€‚
6ã€æŸ¥çœ‹å¹¶ä¸”å¯ç”¨filebeat modules
filebeat modules listfilebeat modules enable systemfilebeat modules list

7ã€å¯åŠ¨filebeatå¹¶è®¾ç½®å¼€æœºå¯åŠ¨
systemctl start filebeatsystemctl enable filebeat
å¯ç”¨system moduleåï¼ŒKibanaçš„event.datasetä¼šå¤šå‡ºsystem.syslogã€system.authã€‚
PSï¼šé‡å»ºç´¢å¼•çš„æ–¹æ³•ï¼ˆ1ï¼‰åˆ é™¤ç´¢å¼•
curl -XDELETE -u elastic:changeme http://localhost:9200/filebeat-7.2.0-2019.07.30
ï¼ˆ2ï¼‰é‡å»ºç´¢å¼•åˆ é™¤registry/filebeatï¼Œç„¶åé‡æ–°å¯åŠ¨filebeatã€‚
8ã€æ›´æ–°test.logåœ¨test.logä¸­æ·»åŠ ä¸€è¡Œï¼ŒFileBeaté»˜è®¤10ç§’reloadä¸€æ¬¡æ–‡ä»¶ï¼Œä½†æ˜¯åœ¨ESä¸­æŸ¥è¯¢ä¸åˆ°æ›´æ–°ã€‚ç¥å¥‡çš„æ˜¯ï¼Œåœ¨Kibanaä¸­å¯ä»¥æŸ¥è¯¢åˆ°æ›´æ–°ï¼Œä¸çŸ¥é“æ€ä¹ˆè‚¥å››ã€‚ç•™ä¸ªå‘ï¼Œæœ‰ç¼˜å†å¡«ã€‚
é…ç½®FileBeatåˆ°ES1ã€ç¼–è¾‘filebeat.yml
vim /etc/filebeat/filebeat.yml

filebeat.ymlå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 148 and 150, uncomment output.elasticsearchoutput.elasticsearch:  # Array of hosts to connect to.  hosts: [&quot;localhost:9200&quot;# line 158 and 160, comment output.logstash

2ã€æµ‹è¯•å¯åŠ¨filebeat
systemctl stop filebeatfilebeat -e -c /etc/filebeat/filebeat.yml -d &quot;publish&quot;`
ä¸ESå»ºç«‹äº†è¿æ¥ï¼Œå¯åŠ¨æˆåŠŸã€‚
3ã€æ­¤æ—¶å¯ä»¥åœ¨ESä¸­æŸ¥çœ‹åˆ°ç´¢å¼•æµè§ˆå™¨è®¿é—® http://192.168.56.101:9200/_cat/indices?v
ä¹‹ååœ¨ESå’ŒKibanaä¸­æŸ¥çœ‹æ•°æ®çš„æ–¹æ³•å’Œä¸Šé¢ç›¸åŒã€‚æ›´æ–°test.logï¼ŒåŒæ ·åœ¨ESä¸­çœ‹ä¸åˆ°ï¼Œåœ¨Kibanaä¸­å¯ä»¥çœ‹åˆ°ã€‚
é…ç½®FileBeatä»ªè¡¨ç›˜å¦‚æœæƒ³è¦ä½¿ç”¨Filebeatæä¾›çš„ç¤ºä¾‹Kibanaä»ªè¡¨ç›˜ï¼Œé‚£ä¹ˆéœ€è¦é…ç½®Kibanaç«¯ç‚¹ã€‚å¦‚æœKibanaä¸ESåœ¨åŒä¸€ä¸»æœºä¸Šè¿è¡Œï¼Œâ€‹â€‹åˆ™å¯ä»¥è·³è¿‡æ­¤æ­¥éª¤ã€‚
1ã€ç¼–è¾‘filebeat.yml
vim /etc/filebeat/filebeat.yml

filebeat.ymlå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 117 and 123, uncomment setup.kibanasetup.kibana:  # Kibana Host  host: &quot;localhost:5601&quot;

2ã€åˆ›å»ºä»ªè¡¨ç›˜
filebeat setup --dashboards

3ã€æµ‹è¯•å¯åŠ¨filebeatï¼ˆä¸å¯åŠ¨ä¹Ÿå¯ä»¥ï¼‰
filebeat -e -c /etc/filebeat/filebeat.yml -d &quot;publish&quot;

4ã€æŸ¥çœ‹Kibanaä»ªè¡¨ç›˜æ‰“å¼€dashboardä»ªè¡¨ç›˜ï¼Œå¯ä»¥é€‰æ‹©filebeatç›¸å…³çš„ä»ªè¡¨ç›˜ã€‚
åè®°è‡³æ­¤ï¼Œå®‰è£…é…ç½®å®Œæˆäº†FileBeatï¼Œå…¶æ”¶é›†çš„æ•°æ®å¯ä»¥ä¼ é€’ç»™Logstashï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¼ é€’ç»™ESã€‚åˆ›å»ºäº†FileBeatçš„ä»ªè¡¨ç›˜ï¼ŒæˆåŠŸæ˜¾ç¤ºæ•°æ®ã€‚
ä¹¦ç­¾
How To Install ELK on CentOS 7
Load the index template in Elasticsearch
Filebeatå‘½ä»¤å‚è€ƒ
filebeatæ”¶é›†æ—¥å¿—å¸¸è§é—®é¢˜

]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>elk</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7å®‰è£…éƒ¨ç½²ELK</title>
    <url>/dev-centos7-install-elk/</url>
    <content><![CDATA[ELKç®€ä»‹ELKæ˜¯ä¸€ä¸ªæ—¥å¿—åˆ†æå¹³å°ï¼Œå®ƒä¸»è¦ç”±Elasticsearchã€Logstashå’ŒKibanaä¸‰ä¸ªéƒ¨åˆ†ç»„æˆã€‚Elasticsearchæ˜¯ä¸€ä¸ªå¼€æºçš„å…¨æ–‡æœç´¢å’Œåˆ†æå¼•æ“ï¼Œå®ƒå¯ä»¥å®ç°æ•°æ®çš„å®æ—¶å…¨æ–‡æœç´¢ï¼Œå¯ä»¥å¤„ç†å¤§è§„æ¨¡æ—¥å¿—æ•°æ®ï¼Œæ¯”å¦‚Nginxã€Tomcatã€ç³»ç»Ÿæ—¥å¿—ç­‰åŠŸèƒ½ã€‚Logstashè´Ÿè´£æ—¥å¿—æ”¶é›†å’Œè½¬å‘ï¼Œæ”¯æŒæ—¥å¿—è¿‡æ»¤ï¼Œæ”¯æŒæ™®é€šlogã€è‡ªå®šä¹‰jsonæ ¼å¼çš„æ—¥å¿—è§£æã€‚Kibanaé€šè¿‡æ¥å£è°ƒç”¨Elasticsearchçš„æ•°æ®ï¼Œå¹¶è¿›è¡Œå‰ç«¯æ•°æ®å¯è§†åŒ–ã€‚


éƒ¨ç½²è§„åˆ’è®¡åˆ’åœ¨ä¸‰å°CentOS7æœºå™¨ä¸Šéƒ¨ç½²ELKï¼Œå…¶ä¸­ä¸€å°æœºå™¨ä½œä¸ºELKçš„æœåŠ¡èŠ‚ç‚¹ï¼ŒIPä¸º192.168.56.101ï¼›å¦å¤–ä¸¤å°ä½œä¸ºå®¢æˆ·èŠ‚ç‚¹ï¼ŒIPä¸º192.168.56.102/103ã€‚å…¶ä¸­æœåŠ¡èŠ‚ç‚¹éƒ¨ç½²Elasticsearchã€Logstashå’ŒKibanaä¸‰ä¸ªç»„ä»¶ï¼Œå®¢æˆ·èŠ‚ç‚¹éƒ¨ç½²Logstashã€‚
æœåŠ¡èŠ‚ç‚¹éƒ¨ç½²ç¯å¢ƒå‡†å¤‡é»˜è®¤rootç”¨æˆ·ä¸‹æ“ä½œï¼Œå…¶ä»–ç”¨æˆ·è¯·è‡ªè§‰æ·»åŠ sudoã€‚  
1ã€å®‰è£…JDKï¼Œå‚è€ƒã€Šå…¨å¹³å°å®‰è£…JDKã€‹ã€‚
2ã€å…³é—­é˜²ç«å¢™ã€‚
systemctl stop firewalldsystemctl disable firewalld

æˆ–è€…è®¾ç½®é˜²ç«å¢™è§„åˆ™ï¼š
firewall-cmd --add-port=9200/tcp --permanentfirewall-cmd --add-port=9300/tcp --permanentfirewall-cmd --add-port=5601/tcp --permanentfirewall-cmd --reload

3ã€æ·»åŠ ELKä»“åº“
cat &lt;&lt;EOF | tee /etc/yum.repos.d/elasticsearch.repo[elasticsearch-7.x]name=Elasticsearch repository for 7.x packagesbaseurl=https://artifacts.elastic.co/packages/7.x/yumgpgcheck=1gpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearchenabled=1autorefresh=1type=rpm-mdEOF

4ã€å¼•å…¥GPG key
rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch

5ã€æ›´æ–°yumåŒ…
yum clean allyum makecache

Elasticsearch1ã€å®‰è£…Elasticsearch
yum install -y elasticsearch
å®‰è£…è¿‡ç¨‹ä¸­ä¼šä¸‹è½½ https://artifacts.elastic.co/packages/7.x/yum/7.2.0/elasticsearch-7.2.0-x86_64.rpm ï¼Œä½†æ˜¯ï¼Œä¸‹è½½é€Ÿåº¦éå¸¸æ…¢ã€‚è¿™é‡Œå»ºè®®é€šè¿‡æµè§ˆå™¨ä¸‹è½½ï¼Œç„¶åä¸Šä¼ åˆ°æœåŠ¡èŠ‚ç‚¹ä¸Šã€‚ä¸Šä¼ å®Œæˆåï¼Œæ‰§è¡Œå®‰è£…ï¼š
rpm -ivh elasticsearch-7.2.0-x86_64.rpm
æç¤ºfuture versions of Elasticsearch will require Java 11; your Java version does not meet this requirement. ä¸è¿‡æ²¡å…³ç³»ï¼Œå½“å‰ç‰ˆæœ¬èƒ½ç”¨å°±è¡Œã€‚
2ã€ç¡®è®¤Elasticsearchçš„å®‰è£…ä¿¡æ¯
rpm -qi elasticsearch

3ã€å¯åŠ¨Elasticsearchå¹¶è®¾ç½®å¼€æœºå¯åŠ¨
systemctl daemon-reloadsystemctl start elasticsearchsystemctl enable elasticsearch

4ã€æŸ¥çœ‹Elasticsearchè¿è¡ŒçŠ¶æ€
systemctl status elasticsearchps -ef | grep elasticsearchnetstat -nlpt

5ã€å°è¯•è¯·æ±‚
curl localhost:9200

6ã€è®¾ç½®å…è®¸å…¶ä»–æœºå™¨è®¿é—®å½“å‰åªèƒ½å“åº”æœ¬æœºçš„è¯·æ±‚ï¼Œæƒ³è¦å…¶ä»–æœºå™¨ä¹Ÿèƒ½è®¿é—®çš„è¯ï¼Œé‚£ä¹ˆéœ€è¦ä¿®æ”¹elasticsearchçš„é…ç½®ã€‚
vim /etc/elasticsearch/elasticsearch.yml

elasticsearch.ymlå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 17, uncommentcluster.name: my-application# line 22, uncomment and changenode.name: master# line 55, uncomment and changenetwork.host: 0.0.0.0# line 59, uncommentttp.port: 9200# line 72, uncomment and changecluster.initial_master_nodes: [&quot;master&quot;, &quot;node-2&quot;]

7ã€é‡å¯Elasticsearch
systemctl stop elasticsearchsystemctl start elasticsearch# å¯åŠ¨åç¨ç­‰ä¸€ä¼šnetstat -nlpt

å¦‚æœå¯ä»¥çœ‹åˆ°:::9200ï¼Œå°±å¯ä»¥é€šè¿‡å¤–éƒ¨æµè§ˆå™¨è®¿é—®ElasticsearchæœåŠ¡äº†ï¼Œè‡³æ­¤Elasticsearchå®‰è£…é…ç½®å®Œæˆã€‚
Kibana1ã€å®‰è£…Kibana
yum install -y kibana
åŒæ ·çš„ï¼Œå¦‚æœä¸‹è½½é€Ÿåº¦ç¼“æ…¢ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡æµè§ˆå™¨ä¸‹è½½ https://artifacts.elastic.co/packages/7.x/yum/7.2.0/kibana-7.2.0-x86_64.rpm ï¼Œç„¶åä¸Šä¼ åˆ°æœåŠ¡èŠ‚ç‚¹ï¼Œä¸Šä¼ åæ‰§è¡Œå®‰è£…ï¼š
rpm -ivh kibana-7.2.0-x86_64.rpm

2ã€ç¡®è®¤Kibanaçš„å®‰è£…ä¿¡æ¯
rpm -qi kibana

3ã€å¯åŠ¨Kibanaå¹¶è®¾ç½®å¼€æœºå¯åŠ¨
systemctl start kibanasystemctl enable kibana

4ã€æŸ¥çœ‹Kibanaè¿è¡ŒçŠ¶æ€
systemctl status kibanaps -ef | grep kibananetstat -nlpt

5ã€æµ‹è¯•è®¿é—®
curl localhost:5601 -L

6ã€è®¾ç½®å…è®¸å…¶ä»–æœºå™¨è®¿é—®
vim /etc/kibana/kibana.yml

kibana.ymlå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 2, uncomment and changeserver.port: 5601# line 7, uncomment and changeserver.host: &quot;0.0.0.0&quot;# line 28, uncommentelasticsearch.hosts: [&quot;http://localhost:9200&quot;]

7ã€é‡å¯Kibana
systemctl stop kibanasystemctl start kibana# å¯åŠ¨åç¨ç­‰ä¸€ä¼šnetstat -nlpt
å¦‚æœå¯ä»¥çœ‹åˆ°0.0.0.0:5601ï¼Œå°±å¯ä»¥é€šè¿‡å¤–éƒ¨æµè§ˆå™¨è®¿é—®KibanaæœåŠ¡äº†ï¼Œè‡³æ­¤Kibanaå®‰è£…é…ç½®å®Œæˆã€‚
Logstash1ã€å®‰è£…Logstash
yum install -y logstash
ä¹Ÿå¯ä»¥é€šè¿‡æµè§ˆå™¨ä¸‹è½½ https://artifacts.elastic.co/packages/7.x/yum/7.2.0/logstash-7.2.0.rpm ï¼Œç„¶åä¸Šä¼ åˆ°æœåŠ¡èŠ‚ç‚¹ï¼Œä¸Šä¼ åæ‰§è¡Œå®‰è£…ï¼š
rpm -ivh logstash-7.2.0.rpm

2ã€ç¡®è®¤Logstashçš„å®‰è£…ä¿¡æ¯rpm -qi logstash
3ã€å¯åŠ¨Logstash
systemctl start logstash

4ã€æŸ¥çœ‹Logstashè¿è¡ŒçŠ¶æ€
systemctl status logstashps -ef | grep logstashnetstat -nlpt

å¯åŠ¨æˆåŠŸäº†ï¼Œç„¶åå‘¢ï¼Ÿæ€ä¹ˆä½¿ç”¨ï¼Ÿ
5ã€Logstash hello world
systemctl stop logstash/usr/share/logstash/bin/logstash -e &#x27;input &#123; stdin &#123; &#125; &#125; output &#123; stdout &#123;&#125; &#125;&#x27;
è¾“å…¥å¯åŠ¨å‘½ä»¤åï¼Œè€å¿ƒç­‰å¾…æœåŠ¡å¯åŠ¨ï¼Œç›´åˆ°å‡ºç°Successfully started Logstash API endpointã€‚è¾“å…¥â€œhello worldâ€å›è½¦ï¼Œå³å¯æ‰“å°å‡ºè¾“å‡ºã€‚logstashé€šè¿‡ç®¡é“æ¥å¤„ç†æ•°æ®ï¼Œæ ‡å‡†çš„ç®¡é“åŒ…å«inputã€filterå’Œoutputã€‚ä»¥ä¸Šå‘½ä»¤ï¼ŒæŒ‡å®šäº†ä¸€ä¸ªç®¡é“çš„å‚æ•°ï¼Œæ²¡æœ‰filterï¼Œinputæ˜¯æ§åˆ¶å°æ ‡å‡†è¾“å…¥ï¼Œoutputæ˜¯æ§åˆ¶å°æ ‡å‡†è¾“å‡ºã€‚
6ã€ç®¡é“é…ç½®å†™å…¥æ–‡ä»¶æ–°å»ºé…ç½®æ–‡ä»¶std.confï¼Œå†…å®¹ä¸ºï¼š
input &#123;     stdin &#123; &#125; &#125; output &#123;     stdout &#123;&#125; &#125;

7ã€æµ‹è¯•é…ç½®æ–‡ä»¶å¹¶å¯åŠ¨
/usr/share/logstash/bin/logstash -f ~/std.conf --config.test_and_exit/usr/share/logstash/bin/logstash -f ~/std.conf

8ã€ä»æ–‡ä»¶ä¸­è¯»å–ä¿¡æ¯ï¼ˆ1ï¼‰æ–°å»º/usr/local/test.logæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
hello logstash!

ï¼ˆ2ï¼‰æ–°å»ºtest.confï¼Œå†…å®¹ä¸ºï¼š
input &#123;    file &#123;        path =&gt; [&quot;/usr/local/test.log&quot;]        sincedb_path =&gt; &quot;/dev/null&quot;        start_position =&gt; &quot;beginning&quot;    &#125;&#125;filter &#123;&#125;output &#123;    stdout &#123;        codec =&gt; rubydebug    &#125;&#125;

ï¼ˆ3ï¼‰å¯åŠ¨Logstash
/usr/share/logstash/bin/logstash -f ~/test.conf

9ã€å†™å…¥ä¿¡æ¯åˆ°æ–‡ä»¶ï¼ˆ1ï¼‰ä¿®æ”¹test.confä¸ºï¼š
input &#123;    file &#123;        path =&gt; [&quot;/usr/local/test.log&quot;]        sincedb_path =&gt; &quot;/dev/null&quot;        start_position =&gt; &quot;beginning&quot;    &#125;&#125;filter &#123;&#125;output &#123;    file &#123;        path =&gt; [&quot;/usr/local/test.log.out&quot;]    &#125;&#125;

ï¼ˆ2ï¼‰å¯åŠ¨Logstash
/usr/share/logstash/bin/logstash -f ~/test.conf
å¯åŠ¨åï¼Œ/usr/local/ç›®å½•ä¸‹å¤šäº†test.log.outæ–‡ä»¶ã€‚
æ•°æ®ä¼ é€’Logstashæ”¶é›†åˆ°äº†æ•°æ®ï¼Œæ€æ ·ä¼ é€’ç»™Elasticsearchæ˜¾ç¤ºï¼Ÿæ€æ ·ä¼ é€’ç»™Kibanaæ˜¾ç¤ºï¼Ÿ1ã€ä¿®æ”¹test.confä¸ºï¼š
input &#123;    file &#123;        path =&gt; [&quot;/usr/local/test.log&quot;]        sincedb_path =&gt; &quot;/dev/null&quot;        start_position =&gt; &quot;beginning&quot;    &#125;&#125;filter &#123;&#125;output &#123;    elasticsearch &#123;        hosts =&gt; [&quot;http://localhost:9200&quot;]    &#125;&#125;

2ã€å¯åŠ¨Logstash
/usr/share/logstash/bin/logstash -f ~/test.conf

3ã€æŸ¥çœ‹ç´¢å¼•æµè§ˆå™¨è®¿é—® http://192.168.56.101:9200/_cat/indices?vå…¶ä¸­æœ‰ä¸ªç´¢å¼•æ˜¯logstashçš„ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æƒ³è¦æŸ¥çœ‹çš„æ•°æ®ç´¢å¼•ã€‚
4ã€æŸ¥çœ‹æ•°æ®æµè§ˆå™¨è®¿é—® http://192.168.56.101:9200/logstash-2019.07.24-000001/_searchçœ‹åˆ°äº†hello logstash!ï¼Œè¯´æ˜æ•°æ®å·²ç»æˆåŠŸä¼ é€’åˆ°äº†Elasticsearchã€‚é“¾æ¥åæ·»åŠ ?prettyå‚æ•°ï¼Œå¯ä»¥è¿›è¡Œæ ¼å¼åŒ–æ˜¾ç¤ºã€‚
5ã€Kibanaæ·»åŠ indicesæµè§ˆå™¨è®¿é—®Kibana http://192.168.56.101:5601ç‚¹å‡»é¡µé¢ä¸Šçš„Logsï¼Œç„¶åå¡«å†™indicesç›¸å…³ä¿¡æ¯ã€‚æœ€åç‚¹å‡»Update Sourceï¼Œå³å¯åœ¨é¡µé¢ä¸Šçœ‹åˆ°Logstashä¼ é€’çš„ä¿¡æ¯ã€‚
6ã€ä¿®æ”¹test.logä¿®æ”¹test.logä¸ºï¼š
hello logstash!the log has been updated.
å†æ¬¡æŸ¥çœ‹Kibanaçš„æ—¥å¿—æ˜¾ç¤ºï¼Œå¯ä»¥çœ‹åˆ°æ›´æ–°ã€‚
å®¢æˆ·èŠ‚ç‚¹éƒ¨ç½²ç¯å¢ƒå‡†å¤‡é»˜è®¤rootç”¨æˆ·ä¸‹æ“ä½œï¼Œå…¶ä»–ç”¨æˆ·è¯·è‡ªè§‰æ·»åŠ sudoã€‚
1ã€å®‰è£…JDKã€‚
2ã€å…³é—­é˜²ç«å¢™ã€‚
systemctl stop firewalldsystemctl disable firewalld

3ã€æ·»åŠ ELKä»“åº“
cat &lt;&lt;EOF | tee /etc/yum.repos.d/elasticsearch.repo[elasticsearch-7.x]name=Elasticsearch repository for 7.x packagesbaseurl=https://artifacts.elastic.co/packages/7.x/yumgpgcheck=1gpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearchenabled=1autorefresh=1type=rpm-mdEOF

4ã€å¼•å…¥GPG key
rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch

5ã€æ›´æ–°yumåŒ…
yum clean allyum makecache

Logstash1ã€å®‰è£…Logstash
yum install -y logstash
ä¹Ÿå¯ä»¥é€šè¿‡æµè§ˆå™¨ä¸‹è½½ https://artifacts.elastic.co/packages/7.x/yum/7.2.0/logstash-7.2.0.rpm ï¼Œç„¶åä¸Šä¼ åˆ°æœåŠ¡èŠ‚ç‚¹ï¼Œä¸Šä¼ åæ‰§è¡Œå®‰è£…ï¼š
rpm -ivh logstash-7.2.0.rpm

2ã€ç¡®è®¤Logstashçš„å®‰è£…ä¿¡æ¯
rpm -qi logstash

3ã€åˆ›å»ºæµ‹è¯•æ–‡ä»¶æ–°å»ºé…ç½®æ–‡ä»¶test.confï¼Œå†…å®¹ä¸ºï¼š
input &#123;    file &#123;        path =&gt; [&quot;/usr/local/test.log&quot;]        sincedb_path =&gt; &quot;/dev/null&quot;        start_position =&gt; &quot;beginning&quot;    &#125;&#125;filter &#123;&#125;output &#123;    elasticsearch &#123;        hosts =&gt; [&quot;http://192.168.56.101:9200&quot;]    &#125;&#125;

æ–°å»º/usr/local/test.logï¼Œå†…å®¹ä¸ºï¼š
this is a log recorded by 102

4ã€å¯åŠ¨logstash
/usr/share/logstash/bin/logstash -f ~/test.conf

5ã€åœ¨KibanaæŸ¥çœ‹æ—¥å¿—åˆ·æ–°Kibanaï¼Œå³å¯çœ‹åˆ°å®¢æˆ·èŠ‚ç‚¹çš„æ—¥å¿—ã€‚
åè®°ä»¥ä¸Šï¼Œå®Œæˆäº†ELKçš„åŸºæœ¬å®‰è£…é…ç½®ï¼Œå®ç°äº†ä¸€ä¸ªæœ€ç®€å•çš„æ¶æ„ã€‚Logstashæ”¶é›†æ•°æ®ï¼Œä¼ é€’ç»™Elasticsearchï¼Œç„¶åKibanaæ˜¾ç¤ºElasticsearchä¸­çš„æ•°æ®ã€‚æ›´å¤šå…³äºELKçš„å†…å®¹ï¼Œåç»­ä¼šç»§ç»­å­¦ä¹ ã€‚
ä¹¦ç­¾
How to Install ELK Stack on CentOS 7
Logstash å®ç”¨ä»‹ç»
Getting Started with Logstash
å¼€æºæ—¥å¿—å®æ—¶åˆ†æå¹³å°ELK
logstashçš„å„ä¸ªåœºæ™¯åº”ç”¨ï¼ˆé…ç½®æ–‡ä»¶å‡å·²å®è·µè¿‡ï¼‰
Logstashä»‹ç»
åœ¨ CentOS7 å®‰è£… ELK
ELK-7.0å®‰è£…éƒ¨ç½²æ”¶é›†å±•ç¤º
ELKéƒ¨ç½²å®‰è£…ä»¥åŠé…ç½®
Learn About the Elastic Stack
Elastic ä¸­æ–‡ç¤¾åŒº
Elasticä¸­æ–‡ç¤¾åŒºè¿ç»´ç›‘æ§å®æˆ˜ä¹‹æ¶æ„ç¯‡
ä»é›¶å¼€å§‹æ­å»ºELK+GPEç›‘æ§é¢„è­¦ç³»ç»Ÿ
ã€ŠELK Stack ä¸­æ–‡æŒ‡å—ã€‹
ELKä¸æƒå¨æŒ‡å—
é›¶ä»£ç å¦‚ä½•æ‰“é€ è‡ªå·±çš„å®æ—¶ç›‘æ§é¢„è­¦ç³»ç»Ÿ
Dockerä¸‹ELKä¸‰éƒ¨æ›²ä¹‹ä¸€ï¼šæé€Ÿä½“éªŒ

]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>centos</tag>
        <tag>elk</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7æ›´æ¢è½¯ä»¶å®‰è£…æº</title>
    <url>/dev-centos7-change-repo/</url>
    <content><![CDATA[å‰è¨€ä¹‹å‰æ•´ç†è¿‡ã€ŠUbuntu/Debianæ›¿æ¢è½¯ä»¶å®‰è£…æºã€‹ï¼Œæ›´æ¢äº†è½¯ä»¶å®‰è£…æºï¼Œå¯ä»¥åŠ å¿«è½¯ä»¶çš„å®‰è£…é€Ÿåº¦ã€‚åŒæ ·çš„ï¼Œåœ¨CentOSä¸‹ä¹Ÿéœ€è¦æ›´æ¢ä¸€ä¸‹è½¯ä»¶å®‰è£…æºã€‚ä¸»è¦å‚è€ƒCentOS7ç³»ç»Ÿæ›´æ¢è½¯ä»¶å®‰è£…æºã€‚


æ›´æ¢æ–¹æ³•1ã€å¤‡ä»½åŸå®‰è£…æºcp /etc/yum.repos.d/CentOS-Base.repo&#123;,.bak&#125;
2ã€ä¸‹è½½é˜¿é‡Œäº‘çš„å®‰è£…æº
wget http://mirrors.aliyun.com/repo/Centos-7.repomv Centos-7.repo /etc/yum.repos.d/Centos-Base.repo

å¸¸ç”¨çš„å®‰è£…æºè¿˜æœ‰ï¼š

ç½‘æ˜“é•œåƒ http://mirrors.163.com/
æœç‹é•œåƒ http://mirrors.sohu.com/

å…¶ä»–å®‰è£…æºå‚è€ƒã€Šå¼€æºé•œåƒç«™ã€‹ã€‚
3ã€æ›´æ–°å®‰è£…æº
yum clean allyum makecache

]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>centos</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7é‡ç½®rootå¯†ç </title>
    <url>/dev-centos7-reset-root-password/</url>
    <content><![CDATA[é—®é¢˜æè¿°å®‰è£…äº†CentOS7ç³»ç»Ÿçš„ä¸»æœºä¸¢å¤±äº†rootå¯†ç ã€‚å¦‚æœé…ç½®äº†rootç”¨æˆ·sshå…¬é’¥ç™»å½•ï¼Œå…¶å®å¹³æ—¶ä½¿ç”¨æ˜¯æ²¡æœ‰ä»€ä¹ˆå½±å“çš„ã€‚è€Œä¸”ï¼Œè¿˜å¯ä»¥é€šè¿‡passwdä¿®æ”¹rootå¯†ç ï¼Œè¿™æ ·å°±æ‰¾å›äº†rootå¯†ç ã€‚
ä½†æ˜¯ï¼Œå¦‚æœä¸¢å¤±rootå¯†ç åï¼Œä¸»æœºåˆšå¥½å¯åŠ¨å¤±è´¥ï¼Œè¿™æ—¶å€™å°±å¿…é¡»å¾—é€šè¿‡å¤–æ¥è®¾å¤‡ï¼ˆKVM/æ˜¾ç¤ºå™¨é”®ç›˜ï¼‰æˆ–è€…VNCè¿›è¡Œrootå¯†ç é‡ç½®äº†ã€‚å¦åˆ™æ— æ³•ç™»å½•æŸ¥çœ‹ç³»ç»Ÿå¯åŠ¨æ—¥å¿—ï¼Œè¿›è¡Œé”™è¯¯æ’æŸ¥å’Œä¿®å¤ã€‚
welcome to emergency mode! after logging in , type &quot;journalctl -xb: to view system logs , &quot;systemctl reboot&quot; to reboot , &quot;systemctl default&quot; to try again to boot into default mode .give root password for maintenance(or type Control-D to continue):



rootå¯†ç é‡ç½®æ–¹æ³•1ã€é‡å¯
2ã€é€‰æ‹©å¯åŠ¨é¡¹æŒ‰â†‘â†“é”®ï¼Œé€‰æ‹©å¼€æœºå¯åŠ¨é¡¹ï¼Œé»˜è®¤é€‰ä¸­ç¬¬ä¸€ä¸ªå³å¯
3ã€ç¼–è¾‘å¯åŠ¨é¡¹æŒ‰ä¸‹eï¼Œå›è½¦æ‰¾åˆ°roï¼Œä¿®æ”¹æˆrw  init=/sysroot/bin/sh
4ã€è¿›å…¥ç´§æ€¥æ¨¡å¼æŒ‰ä¸‹ctrl+xï¼Œè¿›å…¥ç´§æ€¥æ¨¡å¼
5ã€åœ¨ç´§æ€¥æ¨¡å¼ä¿®æ”¹å¯†ç 
chroot /sysrootpasswdtouch /.autorelabelexitreboot

ä»¥ä¸Šï¼Œrootå¯†ç é‡ç½®å®Œæˆã€‚
å‚è€ƒæ–‡æ¡£ï¼š

centos7 å‡ºç¾welcome to emergency modeçš„è§£æ±ºæ–¹æ³•

å¯åŠ¨å¤±è´¥ä¿®å¤journalctl -xb
æŸ¥çœ‹ç³»ç»Ÿå¯åŠ¨æ—¥å¿—ï¼Œæ‰¾åˆ°å…·ä½“çš„å¯åŠ¨å¤±è´¥çš„åŸå› ã€‚
æ–­ç”µåçš„å¯åŠ¨å¤±è´¥ï¼Œæå¤§æ¦‚ç‡æ˜¯å› ä¸ºæŒ‚è½½é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæç¤ºæ—¶å› ä¸º /data ç›®å½•çš„æŒ‚è½½é—®é¢˜ï¼Œé‚£ä¹ˆå°±åœ¨ /etc/fstab ä¸­æ³¨é‡Šæ‰ /data ç›®å½•çš„æŒ‚è½½ã€‚ç„¶åé‡å¯ä¸»æœºå³å¯ reboot
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>centos</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰¹é‡æ›¿æ¢æ–‡ä»¶è„šæœ¬</title>
    <url>/dev-scripts-for-batch-replace-files/</url>
    <content><![CDATA[ä»»åŠ¡è¦æ±‚æ­¥éª¤ä¸€ï¼šã€æ›¿æ¢æ–‡ä»¶ã€‘log4j.propertiesæ–‡ä»¶æ‹·è´è¦†ç›–åˆ°ï¼š/opt/flume/conf/log4j.propertiesæ­¥éª¤äºŒï¼šã€æ›¿æ¢æ–‡ä»¶ã€‘run.shæ–‡ä»¶æ‹·è´è¦†ç›–åˆ°ï¼š/opt/flume/bin/run.shæ­¥éª¤ä¸‰ï¼šã€åˆ é™¤æ–‡ä»¶ã€‘è¿›å…¥/opt/plugins.d/vipkid/libç›®å½•ï¼Œå¦‚æœå­˜åœ¨å°±åˆ é™¤flume-ext-1.0-SNAPSHOT.jaræ­¥éª¤å››ï¼šã€æ›¿æ¢æ–‡ä»¶ã€‘flume-ext-1.1-SNAPSHOT.jaræ–‡ä»¶æ‹·è´è¦†ç›–åˆ°ï¼š/opt/flume/plugins.d/vipkid/lib/flume-ext-1.1-SNAPSHOT.jarå…¶ä»–ï¼šæ›¿æ¢çš„æ–‡ä»¶æ‰€å±ç”¨æˆ·ä¸ºflumeç”¨æˆ·


ansibleå®ç°ansibleè„šæœ¬çš„æ€è·¯æ˜¯å…ˆå¤‡ä»½ï¼Œç„¶åæ‰§è¡Œæ›¿æ¢åˆ é™¤æ“ä½œã€‚
---- hosts: commonservers  tasks:  - name: get the time stamp    shell: date +%Y%m%d%H%M%S.%N    register: now_time  - name: backup log4j.properties    shell: cp /opt/flume/conf/log4j.properties&#123;,.&#123;&#123;now_time.stdout&#125;&#125;&#125;   - name: backup run.sh    shell: cp /opt/flume/bin/run.sh&#123;,.&#123;&#123;now_time.stdout&#125;&#125;&#125;  - name: backup flume-ext-1.0-SNAPSHOT.jar    shell: cp /opt/flume/plugins.d/vipkid/lib/flume-ext-1.0-SNAPSHOT.jar&#123;,.&#123;&#123;now_time.stdout&#125;&#125;&#125;  - name: backup flume-ext-1.1-SNAPSHOT.jar    shell: cp /opt/flume/plugins.d/vipkid/lib/flume-ext-1.1-SNAPSHOT.jar&#123;,.&#123;&#123;now_time.stdout&#125;&#125;&#125;  - name: replace log4j.properties    copy:      src: log4j.properties      dest: /opt/flume/conf/log4j.properties      owner: flume      force: yes  - name: replace run.sh    copy:      src: run.sh      dest: /opt/flume/bin/run.sh      owner: flume      force: yes  - name: remove flume-ext-1.0-SNAPSHOT.jar    shell: rm -f /opt/flume/plugins.d/vipkid/lib/flume-ext-1.0-SNAPSHOT.jar  - name: replace flume-ext-1.1-SNAPSHOT.jar    copy:      src: flume-ext-1.1-SNAPSHOT.jar      dest: /opt/flume/plugins.d/vipkid/lib/flume-ext-1.1-SNAPSHOT.jar      owner: flume      force: yes

shellè„šæœ¬å®ç°shellè„šæœ¬çš„æ€è·¯æ˜¯åœ¨Aæœºå™¨ä¸Šæ‰§è¡Œbatch-main.shæ‰¹é‡å¤„ç†è„šæœ¬ï¼Œè¯»å–ä¸»æœºåˆ—è¡¨ï¼ŒæŠŠæ–°æ–‡ä»¶å’Œreplace.shè„šæœ¬æ‹·è´åˆ°æ‰€æœ‰Bæœºå™¨ä¸Šã€‚ç„¶åbatch-main.shè°ƒç”¨æ‰§è¡Œæ‰€æœ‰Bæœºå™¨ä¸Šçš„replace.shè„šæœ¬ï¼Œreplace.shè„šæœ¬è´Ÿè´£å¤‡ä»½å’Œæ‰§è¡Œæ›¿æ¢åˆ é™¤æ“ä½œã€‚
batch-main.shå†…å®¹ä¸ºï¼š
#!/bin/bash# zipmkdir newfilecp /opt/flume/conf/log4j.properties newfile/cp /opt/flume/bin/run.sh newfile/cp /opt/flume/plugins.d/vipkid/lib/flume-ext-1.1-SNAPSHOT.jar newfile/tar -czvf newfile.tar newfile &amp;&amp;# scparray_str=`cat hosts`IPS=&#x27; &#x27;array=($array_str)user=`whoami`echo &#x27;scp start&#x27;for data in $&#123;array[@]&#125;do    echo &#x27;host: &#x27;$data    scp newfile.tar $user@$data:~/    scp replace.sh $user@$data:~/    ssh $user@$data &#x27;/bin/tar -xvf ~/newfile.tar&#x27;done &amp;&amp;echo &#x27;scp finished&#x27;# replaceecho &#x27;replace start&#x27;for data in $&#123;array[@]&#125;do    echo &#x27;host: &#x27;$data    ssh $user@$data &#x27;sudo /bin/chown flume -R ~/newfile&#x27;    ssh $user@$data &#x27;/bin/bash ~/replace.sh&#x27;doneecho &#x27;repalce finished&#x27;

replace.shå†…å®¹ä¸ºï¼š
#!/bin/bash# backupnow_time=`date +%Y%m%d%H%M%S.%N`sudo cp /opt/flume/conf/log4j.properties&#123;,.$now_time&#125;sudo cp /opt/flume/bin/run.sh&#123;,.$now_time&#125;if [ ! -f &quot;/opt/flume/plugins.d/vipkid/lib/flume-ext-1.0-SNAPSHOT.jar&quot; ];then  echo &quot;flume-ext-1.0-SNAPSHOT.jarä¸å­˜åœ¨&quot;else  sudo cp /opt/flume/plugins.d/vipkid/lib/flume-ext-1.0-SNAPSHOT.jar&#123;,.$now_time&#125;fisudo cp /opt/flume/plugins.d/vipkid/lib/flume-ext-1.1-SNAPSHOT.jar&#123;,.$now_time&#125;# operationsudo cp -f ~/newfile/log4j.properties /opt/flume/conf/log4j.propertiessudo cp -r ~/newfile/run.sh /opt/flume/bin/run.shsudo rm -f /opt/plugins.d/vipkid/lib/flume-ext-1.0-SNAPSHOT.jarsudo cp -f ~/newfile/flume-ext-1.1-SNAPSHOT.jar /opt/flume/plugins.d/vipkid/lib/flume-ext-1.1-SNAPSHOT.jar

hostså†…å®¹ä¸ºï¼š
l-newman-server1.ops.beta.ali.dml-newman-server2.ops.beta.ali.dml-newman-server3.ops.beta.ali.dml-newman-server4.ops.beta.ali.dm

]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>ansible</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨ansibleè¿›è¡ŒæœåŠ¡å™¨åˆå§‹åŒ–</title>
    <url>/dev-init-servers-by-ansible/</url>
    <content><![CDATA[å‰è¨€ä¸‰å°CentOS7æœºå™¨ï¼Œä¸€å°ä½œä¸ºansibleç®¡ç†æœºï¼Œä¸¤å°ä½œä¸ºansibleå®¢æˆ·æœºã€‚ä½¿ç”¨ansibleç®¡ç†æœºå®Œæˆä¸¤å°å®¢æˆ·æœºçš„åˆå§‹åŒ–ï¼Œä¸»è¦åŒ…æ‹¬javaå’Œtomcatçš„å®‰è£…é…ç½®ã€‚ansibleç®¡ç†æœºIPä¸ºï¼š192.168.56.101ã€‚ansibleå®¢æˆ·æœºIPä¸ºï¼š192.168.56.102/103ã€‚ 


ç®¡ç†æœºé…ç½®1ã€å®‰è£…ansibleyum install ansible
2ã€ç”Ÿæˆå¯†é’¥ssh-keygen
3ã€æŠŠå…¬é’¥æ‹·è´åˆ°å®¢æˆ·æœºssh-copy-id -i .ssh/id_rsa.pub -p 22 root@192.168.56.102
4ã€å®¢æˆ·æœºIPå†™å…¥åˆ°hostsvim /etc/ansible/hosts
[commonservers]192.168.56.102192.168.56.103

5ã€æµ‹è¯•è¿æ¥ansible all -m ping
å®¢æˆ·æœºé…ç½®å®¢æˆ·æœºä¸éœ€è¦é¢å¤–é…ç½®ã€‚
javaé…ç½®1ã€åœ¨oracleå®˜ç½‘ä¸‹è½½jdkã€‚
2ã€ä¸‹è½½åä¸Šä¼ æ–‡ä»¶åˆ°ansibleç®¡ç†æœºï¼Œå‡è®¾ä¸ºjdk-8u161-linux-x64.tar.gzã€‚
3ã€ç®¡ç†æœºä¸­åˆ›å»ºjdk.envï¼Œå†…å®¹ä¸ºï¼š
export JAVA_HOME=/usr/lib/jvm/jdk1.8.0_161export JRE_HOME=$JAVA_HOME/jreexport CLASSPATH=$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATHexport PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH

4ã€ç®¡ç†æœºä¸­åˆ›å»ºjava-install.ymlï¼Œå†…å®¹ä¸ºï¼š
---- hosts: commonservers  tasks:  - name: copy jdk.tar.gz    copy:      src: ./jdk-8u161-linux-x64.tar.gz      dest: ~/jdk.tar.gz  - name: create jvm directory    shell: mkdir -p /usr/lib/jvm  - name: unzip jdk.tar.gz    shell: tar -zxf jdk.tar.gz -C /usr/lib/jvm/  - name: copy env to clients    copy:      src: ./jdk.env      dest: ~/jdk.env  - name: write jdk env to profile    shell: cat jdk.env | tee &gt;&gt; /etc/profile  - name: write jdk env to .bashrc    shell: cat jdk.env | tee &gt;&gt; /root/.bashrc  - name: make the config active    shell: source /root/.bashrc  - name: test jdk    shell: java -version    register: java_out  - name: show java result    debug: var=java_out verbosity=0

5ã€æ£€æŸ¥å¹¶ä¸”æ‰§è¡Œè„šæœ¬  
ansible-playbook java-install.yml --syntax-checkansible-playbook java-install.yml

tomcaté…ç½®1ã€åœ¨apacheå®˜ç½‘ä¸‹è½½tomcatã€‚
2ã€ä¸‹è½½åä¸Šä¼ æ–‡ä»¶ä¸Šä¼ åˆ°ansibleç®¡ç†æœºï¼Œå‡è®¾ä¸ºapache-tomcat-8.0.50.tar.gzã€‚
2ã€ç®¡ç†æœºåˆ›å»ºtomcat-install.ymlï¼Œå†…å®¹ä¸ºï¼š
---- hosts: commonservers  tasks:  - name: copy tomcat    copy:      src: ./apache-tomcat-8.0.50.tar.gz      dest: ~/tomcat.tar.gz  - name: unzip tomcat.tar.gz    shell: tar -zxf tomcat.tar.gz -C /opt/  - name: start tomcat    shell: nohup /opt/apache-tomcat-8.0.50/bin/startup.sh &amp;  - name: test tomcat    shell: ps aux | grep tomcat    register: tomcat_out  - name: show tomcat result    debug: var=tomcat_out verbosity=0

3ã€æ£€æŸ¥å¹¶ä¸”æ‰§è¡Œè„šæœ¬  
ansible-playbook tomcat-install.yml --syntax-checkansible-playbook tomcat-install.yml]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ansible</tag>
        <tag>centos</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntuå®‰è£…é…ç½®zabbix</title>
    <url>/dev-ubuntu-install-zabbix/</url>
    <content><![CDATA[å‰è¨€å¯¹äºæœåŠ¡å™¨é›†ç¾¤çš„ç›‘æ§ï¼Œæœ‰å¾ˆå¤šå¯é€‰çš„å¼€æºæŠ€æœ¯æ–¹æ¡ˆï¼Œæ¯”å¦‚zabbixï¼Œnagiosï¼ŒCactiï¼ŒMuninï¼Œicingaï¼Œganglia ï¼Œcollectd + graphiteï¼Œinfluxed + grafanaï¼Œprometheusç­‰ã€‚ä»¥å‰ç®€å•ç ”ç©¶è¿‡gangliaï¼Œæœ¬æ–‡ä¸­ï¼Œæ¥ç ”ç©¶å­¦ä¹ ä¸€ä¸‹zabbixã€‚


zabbixç®€ä»‹å‚è€ƒzabbixç›‘æ§çš„åŸºç¡€æ¦‚å¿µã€å·¥ä½œåŸç†åŠæ¶æ„ï¼Œæˆ‘ä»¬äº†è§£åˆ°zabbixæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿç›‘æ§å’Œç½‘ç»œç›‘è§†å·¥å…·ã€‚zabbixæ”¯æŒä¸»æœºçš„æ€§èƒ½ç›‘æ§ã€ç½‘ç»œè®¾å¤‡æ€§èƒ½ç›‘æ§ã€æ•°æ®åº“æ€§èƒ½ç›‘æ§ã€å¤šç§å‘Šè­¦æ–¹å¼ã€è¯¦ç»†çš„æŠ¥è¡¨å›¾è¡¨ç»˜åˆ¶ã€‚zabbixçš„åŸºæœ¬å·¥ä½œåŸç†ä¸ºï¼šzabbix agentéœ€è¦å®‰è£…åˆ°è¢«ç›‘æ§çš„ä¸»æœºä¸Šï¼Œå®ƒè´Ÿè´£å®šæœŸæ”¶é›†å„é¡¹æ•°æ®ï¼Œå¹¶å‘é€åˆ°zabbix serverç«¯ï¼Œzabbix serverå°†æ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œzabbix webæ ¹æ®æ•°æ®åœ¨å‰ç«¯è¿›è¡Œå±•ç°å’Œç»˜å›¾ã€‚è¿™é‡Œagentæ”¶é›†æ•°æ®åˆ†ä¸ºä¸»åŠ¨å’Œè¢«åŠ¨ä¸¤ç§æ¨¡å¼ã€‚
ç¯å¢ƒå‡†å¤‡åœ¨VirtualBoxä¸­åˆ›å»ºä¸¤å°Ubuntu16è™šæ‹Ÿæœºï¼Œzabbix0å’Œzabbix1ã€‚ç¡¬ä»¶é…ç½®éƒ½æ˜¯1æ ¸2GBå†…å­˜ï¼ŒIPåˆ†åˆ«ä¸º192.168.56.200å’Œ192.168.56.201ã€‚
zabbix0ä¸Šå®‰è£…zabbix-serverå’Œzabbix-agentï¼Œzabbix1ä¸Šzabbix-agentã€‚
sudo -iåˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œæ–¹ä¾¿å®‰è£…é…ç½®ã€‚
zabbix0zabbixæœåŠ¡ç«¯çš„å®‰è£…é…ç½®ï¼Œä¸»è¦å‚è€ƒåœ¨Ubuntu16.04 Serverä¸Šå®‰è£…Zabbixã€‚
è½¯ä»¶å®‰è£…1ã€å®‰è£…zabbixéœ€è¦çš„PHPæ¨¡å—apt-get install php7.0-bcmath php7.0-xml php7.0-mbstring
2ã€ä¸‹è½½å¯¼å…¥zabbix-serverå®‰è£…æº
wget http://repo.zabbix.com/zabbix/3.2/ubuntu/pool/main/z/zabbix-release/zabbix-release_3.2-1+xenial_all.debdpkg -i zabbix-release_3.2-1+xenial_all.debapt-get update
Ubuntuä»“åº“ä¸­æä¾›çš„zabbixæ˜¯è¿‡æ—¶çš„ï¼Œå› æ­¤ä½¿ç”¨å®˜æ–¹çš„å®‰è£…åŒ…ã€‚
3ã€å®‰è£…zabbix-serverï¼ˆæ”¯æŒmysqlçš„ç‰ˆæœ¬ï¼‰å’Œzabbix-webapt-get install zabbix-server-mysql zabbix-frontend-php
4ã€å®‰è£…zabbix-clientï¼ˆå¯é€‰ï¼‰apt-get install zabbix-agent
mysqlé…ç½®1ã€ç™»å½•mysqlmysql -uroot -pé»˜è®¤å¯†ç ä¸ºç©ºã€‚
2ã€åˆ›å»ºzabbixæ•°æ®åº“å’Œzabbixç”¨æˆ·
create database zabbix character set utf8 collate utf8_bin;grant all privileges on zabbix.* to zabbix@localhost identified by &#x27;zabbix_password&#x27;;exit;

3ã€å¯¼å…¥åˆå§‹è¡¨å’Œæ•°æ®
zcat /usr/share/doc/zabbix-server-mysql/create.sql.gz | mysql -uzabbix -p zabbix

zabbix-serveré…ç½®1ã€vim /etc/zabbix/zabbix_server.confï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 81, uncommentDBHost=localhost# line 91, changeDBName=zabbix# line 107, changeDBUser=zabbix# line 115, uncomment and changeDBPassword=zabbix_password

2ã€vim /etc/zabbix/apache.confï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 19, uncomment and changephp_value date.timezone Asia/Shanghai# line 28, uncomment and changephp_value date.timezone Asia/Shanghai

3ã€é‡å¯apacheï¼Œå¯åŠ¨zabbix-serverå¹¶è®¾ç½®å¼€æœºå¯åŠ¨
systemctl restart apache2systemctl start zabbix-serversystemctl enable zabbix-serversystemctl status zabbix-server

zabbix-webé…ç½®1ã€æµè§ˆå™¨è®¿é—® http://192.168.56.200/zabbix
2ã€ç‚¹å‡»â€œNext stepâ€ï¼ŒæŒ‰ç…§æç¤ºè¿›è¡Œå®‰è£…é…ç½®ã€‚ä¸­é—´åªè¦å¡«å†™ä¸€æ¬¡æ•°æ®åº“å¯†ç ï¼Œå…¶ä»–çš„é»˜è®¤å³å¯ã€‚å®‰è£…å®Œæˆåçš„é…ç½®æ–‡ä»¶ä¸º/usr/share/zabbix/conf/zabbix.conf.phpã€‚
3ã€æµè§ˆå™¨è®¿é—® http://192.168.56.200/zabbix/index.phpä½¿ç”¨é»˜è®¤çš„ç”¨æˆ·Adminå’Œå¯†ç zabbixç™»å½•ï¼Œå³å¯è¿›å…¥ç®¡ç†ç•Œé¢ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬çœ‹åˆ°Number of hosts enabledä¸º0ã€‚
zabbix-agenté…ç½®1ã€vim /etc/zabbix/zabbix_agentd.confï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 95, changeServer=127.0.0.1# line 136, changeServerActive=127.0.0.1# line 147, changeHostname=zabbix0
å…¶ä¸­Serverå’ŒServerActiveæŒ‡çš„æ˜¯Zabbix Serverï¼ŒHostnameæŒ‡çš„æ˜¯client server nameã€‚
2ã€å¯ç”¨zabbix-agentå¹¶è®¾ç½®å¼€æœºå¯åŠ¨
systemctl start zabbix-agentsystemctl enable zabbix-agent
æ­¤æ—¶ï¼Œåœ¨zabbix webç®¡ç†é¡µé¢ä¾ç„¶çœ‹ä¸åˆ°ä¸»æœºçš„ä¿¡æ¯ã€‚
3ã€åœ¨zabbix webç®¡ç†é¡µé¢æ·»åŠ zabbix0ä¸»æœºï¼Œå‚è€ƒHow to Add Host in Zabbix Server to Monitorã€‚
ï¼ˆ1ï¼‰åœ¨zabbix webç®¡ç†é¡µé¢ï¼ŒConfigurationï¼ŒHostsï¼ŒCreate hostã€‚ï¼ˆ2ï¼‰åœ¨Hostæ ‡ç­¾é¡µï¼Œå¡«å…¥å¦‚ä¸‹ä¿¡æ¯ã€‚

Hostname: Enter hostname of Remote system
Visible name: Name to be display in zabbix
Group: Select the desired group for you host
Agent interface: Fill the info of Zabbix agent running on host
Enabled: Check for active

ï¼ˆ3ï¼‰åœ¨Templatesæ ‡ç­¾é¡µï¼Œç‚¹å‡»Selecté€‰æ‹©è¦ç›‘æ§çš„æŒ‡æ ‡ï¼Œç‚¹å‡»Addé“¾æ¥ç¡®è®¤ã€‚ï¼ˆ4ï¼‰ç‚¹å‡»AddæŒ‰é’®ç¡®è®¤æ·»åŠ hostã€‚
æ­¤æ—¶ï¼Œå°±å¯ä»¥åœ¨zabbix webç®¡ç†é¡µé¢çœ‹åˆ°hostçš„ä¿¡æ¯äº†ï¼Œé€‰æ‹©hostçš„Graphsï¼Œå³å¯æŸ¥çœ‹hostçŠ¶æ€ç›¸å…³çš„ç»˜å›¾ã€‚
zabbix11ã€ä¸‹è½½å¯¼å…¥zabbix-serverå®‰è£…æº
wget http://repo.zabbix.com/zabbix/3.2/ubuntu/pool/main/z/zabbix-release/zabbix-release_3.2-1+xenial_all.debdpkg -i zabbix-release_3.2-1+xenial_all.debapt-get update

2ã€å®‰è£…zabbix-clientapt-get install zabbix-agent
3ã€vim /etc/zabbix/zabbix_agentd.confï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 95, changeServer=192.168.56.200# line 136, changeServerActive=192.168.56.200# line 147, changeHostname=zabbix1

4ã€å¯ç”¨zabbix-agentå¹¶è®¾ç½®å¼€æœºå¯åŠ¨
systemctl start zabbix-agentsystemctl enable zabbix-agent

5ã€åœ¨zabbix webç®¡ç†é¡µé¢æ·»åŠ zabbix1ä¸»æœºï¼Œå†æ·»åŠ ä¸€å°ä¸å­˜åœ¨çš„zabbix2ä¸»æœºã€‚æ·»åŠ å®Œæˆåå³å¯çœ‹åˆ°ä¸‰å°ä¸»æœºéƒ½æ˜¯Enabledï¼Œç­‰å¾…ä¸¤åˆ†é’Ÿåç•Œé¢æ˜¾ç¤ºå…¶ä¸­ä¸€å°ä¸å¯ç”¨ã€‚
åè®°è‡³æ­¤ï¼Œzabbixå°±å®‰è£…é…ç½®å®Œæˆäº†ï¼Œæ›´é«˜çº§çš„ç”¨æ³•ï¼Œç”¨åˆ°äº†å†å»ç ”ç©¶å­¦ä¹ ã€‚
ä¹¦ç­¾Zabbix Documentation 3.2
How to Install Zabbix Server 3.4 on Ubuntu 18.04 &amp; 16.04 LTS
How To Install Zabbix Agent on Ubuntu 18.04 &amp; 16.04 LTS
ubuntu 16.04.1 LTS zabbix-agentå®‰è£…
Update-rc.d å‘½ä»¤ç”¨æ³•è¯¦è§£
zabbixå¸¸è§æŒ‡æ ‡é¡¹æ¢³ç†
]]></content>
      <categories>
        <category>engineering</category>
        <category>monitoring</category>
      </categories>
      <tags>
        <tag>ç›‘æ§</tag>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>zabbix</tag>
      </tags>
  </entry>
  <entry>
    <title>é€šè¿‡è¿œç¨‹æ§åˆ¶æ¥å£æ‰¹é‡å®‰è£…ç³»ç»Ÿ</title>
    <url>/dev-batch-install-sys-by-mgmt/</url>
    <content><![CDATA[å‰è¨€ã€Šé€šè¿‡è¿œç¨‹æ§åˆ¶æ¥å£ç»™æœåŠ¡å™¨å®‰è£…ç³»ç»Ÿã€‹ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬å‘ç°é€šè¿‡è¿œç¨‹æ§åˆ¶æ¥å£ç»™æœåŠ¡å™¨å®‰è£…ç³»ç»Ÿå¾ˆæ–¹ä¾¿ã€‚ã€ŠUbuntuç³»ç»Ÿæ‰¹é‡è‡ªåŠ¨å®‰è£…ã€‹ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¼šäº†ä½¿ç”¨PXEæŠ€æœ¯è¿›è¡Œç³»ç»Ÿçš„æ‰¹é‡å®‰è£…ã€‚
è¿™ä¸¤è€…ç»“åˆï¼Œèƒ½äº§ç”Ÿæ€æ ·çš„é­”åŠ›ï¼Ÿä¸‹é¢æ˜¯è§è¯å¥‡è¿¹çš„æ—¶åˆ»ã€‚
éœ€æ±‚ï¼šæœºæˆ¿é‡Œæœ‰40å°æ›™å…‰I620-G20æœºå™¨éœ€è¦å®‰è£…Ubuntu16 Serverç³»ç»Ÿï¼Œæ›™å…‰ä¾›åº”å•†è¯´éœ€è¦ä¸¤å¤©çš„å·¥ä½œé‡ï¼ŒæŠ¥ä»·äº”åƒå…ƒã€‚é‚£ä¹ˆè‡ªå·±å®‰è£…çš„è¯ï¼Œéœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿä¹Ÿéœ€è¦ä¸¤å¤©å—ï¼Ÿ


å®‰è£…æ­¥éª¤1ã€è¿›å…¥æœºæˆ¿ï¼Œç»™40å°æœºå™¨é…ç½®è¿œç¨‹æ§åˆ¶æ¥å£çš„IPã€‚å‚è€ƒã€Šé€šè¿‡è¿œç¨‹æ§åˆ¶æ¥å£ç»™æœåŠ¡å™¨å®‰è£…ç³»ç»Ÿã€‹çš„è¿œç¨‹æ§åˆ¶æ¥å£é…ç½®éƒ¨åˆ†ã€‚
2ã€æ­å»ºPXEæœåŠ¡å™¨ã€‚å‚è€ƒã€ŠUbuntuç³»ç»Ÿæ‰¹é‡è‡ªåŠ¨å®‰è£…ã€‹ï¼Œå¹¶ä¸”è¿›è¡Œæ”¹è¿›ã€‚
3ã€è¿œç¨‹æ§åˆ¶æ‰¹é‡å®‰è£…ç³»ç»Ÿã€‚
æ­å»ºPXEæœåŠ¡å™¨åŸºæœ¬å‡†å¤‡1ã€ä¸€å°æœåŠ¡å™¨ï¼Œå·²ç»å®‰è£…å¥½äº†Ubuntu16 Serverç‰ˆç³»ç»Ÿï¼ŒIPä¸º172.16.0.162ã€‚2ã€æ›´æ¢æºåˆ—è¡¨å¹¶æ›´æ–°ï¼Œå‚è€ƒã€ŠUbuntuæ›´æ¢æºåˆ—è¡¨ã€‹ã€‚3ã€åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œsudo -i4ã€å¼€å¯è·¯ç”±è½¬å‘ï¼Œecho 1 &gt; /proc/sys/net/ipv4/ip_forwardã€‚åŠ¡å¿…å¼€å¯ï¼Œå› ä¸ºPXEæœåŠ¡å™¨åŒæ—¶ä½œä¸ºç½‘å…³ï¼Œä¸å¼€å¯çš„è¯å®‰è£…ä¼šå¡ä½ã€‚5ã€åœ¨PXEæœåŠ¡å™¨ä¸Šå®‰è£…DNSæœåŠ¡ï¼ˆå¯é€‰æ“ä½œï¼Œæ²¡æœ‰ä»€ä¹ˆå½±å“ï¼‰ã€‚
DHCPå’ŒFTPæœ¬èŠ‚ä¸»è¦å‚è€ƒHow to Install Ubuntu via PXE Server Using Local DVD Sourcesã€‚
1ã€å®‰è£…DHCPå’ŒFTPæœåŠ¡apt-get install dnsmasq
2ã€æŒ‡å®šDHCPç½‘å¡ip addï¼Œçœ‹åˆ°æ­£åœ¨ä½¿ç”¨çš„ç½‘å¡ä¸ºens2f1ï¼ˆ172.16.0.162ï¼‰ã€‚
3ã€é…ç½®dnsmasqvim /etc/dnsmasq.confï¼Œåœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ï¼š
interface=ens2f1dhcp-range=172.16.0.163,172.16.0.254,24hdhcp-option=3,172.16.0.162dhcp-option=6,172.16.0.162dhcp-option=28,172.16.0.255dhcp-option=42,0.0.0.0dhcp-boot=pxelinux.0,172.16.0.162enable-tftptftp-root=/tftpboot# gateway to Internet#dhcp-option=3,172.16.0.135# real dns server#dhcp-option=6,172.20.1.4#server=8.8.4.4
dhcp-option=3è¡¨ç¤ºç½‘å…³ï¼Œ6è¡¨ç¤ºåŸŸåæœåŠ¡å™¨ï¼Œ28è¡¨ç¤ºbroadcastï¼Œ48è¡¨ç¤ºæ—¶é—´æœåŠ¡å™¨ã€‚serverè¡¨ç¤ºDNS forwarder IPs Addressã€‚
éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç½‘å…³ä¸€å®šè¦é…ç½®ï¼Œå¦åˆ™åœ¨ä½¿ç”¨å†…ç½‘é•œåƒå®‰è£…æ—¶ä¼šç‰¹åˆ«æ…¢ã€‚åœ¨è·å–é•œåƒæ—¶å¡ä½åŠå°æ—¶ï¼ŒæŸ¥çœ‹å®‰è£…æ—¥å¿—å¦‚ä¸‹å›¾æ‰€ç¤ºï¼›åœ¨â€œUpdating the list of available packagesâ€æ—¶ä¹Ÿä¼šå¡ä½åŠå°æ—¶ã€‚è€Œä¸”ï¼Œæœ€å¥½ä¸è¦è®©æœåŠ¡å™¨è¿æ¥åˆ°å¤–ç½‘ï¼Œå¦åˆ™å®‰è£…è¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨ä»ç½‘ç»œä¸­è·å–æ›´æ–°ï¼Œå®‰è£…å°±ä¼šå¾ˆæ…¢ã€‚å°±åƒæœ¬æ–‡ä¸­çš„é…ç½®ï¼Œç½‘å…³å’ŒåŸŸåæœåŠ¡å™¨éƒ½è®¾ç½®ä¸ºPXEæœåŠ¡å™¨çš„IPï¼Œè€Œä¸æ˜¯çœŸå®çš„å¯ä»¥è®¿é—®å¤–ç½‘çš„ç½‘å…³å’ŒåŸŸåæœåŠ¡å™¨ã€‚
4ã€æŸ¥çœ‹æœåŠ¡systemctl status dnsmasq
é…ç½®netboot1ã€ä¸‹è½½ç½‘ç»œå¯åŠ¨æ–‡ä»¶ï¼Œåªæœ‰43M
wget http://ftp.ubuntu.com/ubuntu/dists/xenial/main/installer-amd64/current/images/netboot/netboot.tar.gz
æˆ–è€…ä»ubuntu-16.04.4-server-amd64.isoé•œåƒä¸­æ‹·è´ï¼Œnetboot.tar.gzç›¸å½“äºinstall/netbootç›®å½•çš„å‹ç¼©æ–‡ä»¶ã€‚
2ã€è§£å‹æ–‡ä»¶
tar -xzvf netboot.tar.gz -C /tftpboot/
è§£å‹åçš„æ–‡ä»¶åŒ…æ‹¬ï¼š
ldlinux.c32 -&gt; ubuntu-installer/amd64/boot-screens/ldlinux.c32pxelinux.0  -&gt; ubuntu-installer/amd64/pxelinux.0pxelinux.cfg -&gt; ubuntu-installer/amd64/pxelinux.cfg/ubuntu-installer/version.info

å®‰è£…ç³»ç»Ÿ1ã€è¿œç¨‹è¿æ¥éœ€è¦å®‰è£…ç³»ç»Ÿçš„æœåŠ¡å™¨ï¼Œè®¾ç½®BIOSï¼Œé€‰æ‹©ä»ç½‘ç»œå¯åŠ¨ã€‚
2ã€é€‰æ‹©Installï¼Œæ­£å¸¸å®‰è£…ç³»ç»Ÿå³å¯ï¼Œä¸è¿‡ï¼Œç³»ç»Ÿé•œåƒéœ€è¦ä»å¤–ç½‘ä¸‹è½½ã€‚è¿™é‡Œæ²¡æœ‰è¿æ¥å¤–ç½‘ï¼Œå°±ä¸å†å¾€ä¸‹æ¼”ç¤ºã€‚
ä»¥ä¸Šï¼Œå®ç°äº†ä»ç½‘ç»œå®‰è£…æºå®‰è£…Ubuntuç³»ç»Ÿã€‚ä½†æ˜¯å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªé—®é¢˜æ˜¯ç³»ç»Ÿé•œåƒéœ€è¦ä»å¤–ç½‘ä¸‹è½½ï¼Œæµªè´¹å¸¦å®½ã€‚å¦ä¸€ä¸ªé—®é¢˜æ˜¯å®‰è£…è¿‡ç¨‹ä¸­éœ€è¦ä¸æ–­äº¤äº’ï¼Œæµªè´¹æ—¶é—´ã€‚
PXEæœåŠ¡å™¨å‡çº§é…ç½®å†…ç½‘é•œåƒ1ã€å®‰è£…apache2apt-get install apache2 -y
webæ ¹ç›®å½•æ˜¯ /var/www/html/
2ã€æµ‹è¯•apache2curl 127.0.0.1
3ã€é‡å¯apache2/etc/init.d/apache2 restart
4ã€ä¸Šä¼ ubuntu-16.04.4-server-amd64.isoåˆ°ç”¨æˆ·ç›®å½•ã€‚scp ubuntu-16.04.4-server-amd64.iso test@172.16.0.162:~
5ã€æŒ‚è½½ubuntu-16.04.4-server-amd64.isoåˆ°ubuntuç›®å½•ã€‚åœ¨ç”¨æˆ·ç›®å½•æ‰§è¡Œï¼š
mkdir /var/www/html/ubuntumount ubuntu-16.04.4-server-amd64.iso /var/www/html/ubuntu

6ã€æ›¿æ¢netbootä¸ºé•œåƒä¸­çš„netbootï¼Œå¦åˆ™å†…æ ¸ç‰ˆæœ¬çš„å·®å¼‚ä¼šå¯¼è‡´å®‰è£…å¤±è´¥ã€‚
rm -rf /tftpboot/*cp -r /var/www/html/ubuntu/install/netboot/* /tftpboot/

7ã€å†æ¬¡å®‰è£…ç³»ç»Ÿï¼Œæ­¤æ—¶å°±å¯ä»¥ä»PXEæœåŠ¡å™¨è·å–ç³»ç»Ÿé•œåƒäº†ã€‚åœ¨é€‰æ‹©é•œåƒç•Œé¢ï¼Œä¸Šæ‹‰åˆ°enter information manuallyï¼Œå›è½¦ã€‚archive hostnameè¾“å…¥172.16.0.162ã€‚directoryè¾“å…¥/ubuntuï¼Œæ³¨æ„ï¼Œubuntuåé¢ä¸è¦æœ‰æ–œæ ã€‚å¦‚æœç³»ç»Ÿå®‰è£…å¡ä½ï¼Œé‚£ä¹ˆAlt+F2è¿›å…¥æ§åˆ¶å°ï¼Œtail /var/log/syslogæŸ¥çœ‹ç³»ç»Ÿå®‰è£…æ—¥å¿—ï¼Œæ ¹æ®æ—¥å¿—è¿›è¡Œæ’é”™ã€‚æŸ¥çœ‹é”™è¯¯åAlt+F1è¿”å›å›¾å½¢å®‰è£…ç•Œé¢ã€‚
8ã€å®‰è£…å®Œæˆçš„ç³»ç»Ÿï¼Œå¯åŠ¨åå‘ç°å¡ä½ã€‚è¿™æ—¶Alt+F2åˆ‡æ¢åˆ°ç¬¬äºŒä¸ªç»ˆç«¯ï¼Œå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨ç³»ç»Ÿäº†ã€‚
æ·»åŠ ç¡¬ç›˜å¯åŠ¨ç³»ç»Ÿå®‰è£…å®Œæˆï¼Œå¦‚æœä¾ç„¶ä»ç½‘ç»œå¯åŠ¨çš„è¯ï¼Œé‚£ä¹ˆæ¯æ¬¡å¯åŠ¨ä¾ç„¶ä¼šè¿›å…¥åˆ°Installer boot menuç•Œé¢ï¼Œé™¤éå†æ¬¡ä¿®æ”¹BIOSé¦–é€‰å¯åŠ¨é¡¹ã€‚ä¸å¦¨åœ¨Installer boot menuç•Œé¢æ·»åŠ ä¸€ä¸ªå¯åŠ¨é¡¹ï¼Œè¯¥å¯åŠ¨é¡¹å…è®¸ä»æœ¬åœ°ç¡¬ç›˜å¯åŠ¨ã€‚ä¸»è¦å‚è€ƒInstall Ubuntu 16.04 via PXE and network bootã€‚
1ã€ç¼–è¾‘pxelinux.cfgæ–‡ä»¶vim /tftpboot/pxelinux.cfg/defaultï¼Œä¿®æ”¹ä¸ºï¼š
# D-I config version 2.0# search path for the c32 support libraries (libcom32, libutil etc.)path ubuntu-installer/amd64/boot-screens/include ubuntu-installer/amd64/boot-screens/menu.cfgdefault ubuntu-installer/amd64/boot-screens/vesamenu.c32prompt 0# add localboot herelabel localboot    menu label Boot from Disk    localboot 0timeout 0
æ­¤å¤–ï¼Œtimeouté»˜è®¤æ˜¯0ï¼Œè¿™é‡Œå¯ä»¥æ”¹ä¸º60ï¼Œé‚£ä¹ˆ6ç§’åä¼šè‡ªåŠ¨é€‰æ‹©installé€‰é¡¹ã€‚
2ã€å†æ¬¡é€šè¿‡ç½‘ç»œå¯åŠ¨ï¼Œå³å¯çœ‹åˆ°ç¡¬ç›˜å¯åŠ¨é€‰é¡¹ã€‚é€‰ä¸­å®ƒå›è½¦ï¼Œå³å¯å¯åŠ¨æœ¬åœ°ç¡¬ç›˜ä¸Šçš„ç³»ç»Ÿã€‚
è‡ªåŠ¨é€‰æ‹©å®‰è£…æºä»¥ä¸Šå®‰è£…ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨è¾“å…¥archive hostnameå’Œdirectoryï¼Œèƒ½ä¸èƒ½åœ¨å®‰è£…è¿‡ç¨‹ä¸­è‡ªåŠ¨é€‰æ‹©ï¼Ÿå½“ç„¶å¯ä»¥ã€‚æœ¬æ–¹æ³•ä¸»è¦å‚è€ƒPXEInstallServerã€‚
1ã€ç¼–è¾‘txt.cfgvim /tftpboot/ubuntu-installer/amd64/boot-screens/txt.cfgï¼ŒåŸå†…å®¹ä¸ºï¼š
default installlabel install    menu label ^Install    menu default    kernel ubuntu-installer/amd64/linux    append vga=788 initrd=ubuntu-installer/amd64/initrd.gz --- quiet label cli    menu label ^Command-line install    kernel ubuntu-installer/amd64/linux    append tasks=standard pkgsel/language-pack-patterns= pkgsel/install-language-support=false vga=788 initrd=ubuntu-installer/amd64/initrd.gz --- quiet 
ä¿®æ”¹ä¸ºï¼š
default installlabel install        menu label ^Install        menu default        kernel ubuntu-installer/amd64/linux        append ks=http://172.16.0.162/ks.cfg vga=788 initrd=ubuntu-installer/amd64/initrd.gz --- quiet  label cli        menu label ^Command-line install        kernel ubuntu-installer/amd64/linux        append tasks=standard pkgsel/language-pack-patterns= pkgsel/install-language-support=false vga=788 initrd=ubuntu-installer/amd64/initrd.gz --- quiet

2ã€åœ¨/var/www/htmlç›®å½•åˆ›å»ºks.cfgæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
installurl --url http://172.16.0.162/ubuntu/

3ã€é‡æ–°å®‰è£…ç³»ç»Ÿï¼Œå³å¯çœå»è®¾ç½®archive hostnameçš„æ­¥éª¤ã€‚
é…ç½®æ— äººå€¼å®ˆæ—¢ç„¶å¯ä»¥è‡ªåŠ¨é€‰æ‹©å®‰è£…æºï¼Œé‚£ä¹ˆå…¶ä»–äº¤äº’æ­¥éª¤å¯ä¸å¯ä»¥è‡ªåŠ¨é€‰æ‹©ï¼Ÿå½“ç„¶å¯ä»¥ã€‚æ§åˆ¶å®‰è£…è¿‡ç¨‹çš„è‡ªåŠ¨äº¤äº’ä¸»è¦æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼šks.cfgå’Œubuntu-server.seedã€‚
ks.cfg1ã€åœ¨å®‰è£…èœå•æ·»åŠ ks.cfgå’Œubuntu-server.seedvim /tftpboot/ubuntu-installer/amd64/boot-screens/txt.cfgï¼Œä¿®æ”¹ä¸ºï¼š
default installlabel install    menu label ^Install    menu default    kernel ubuntu-installer/amd64/linux    append ks=http://172.16.0.162/ks.cfg preseed/url=http://172.16.0.162/ubuntu-server.seed vga=788 initrd=ubuntu-installer/amd64/initrd.gz --- quietlabel cli    menu label ^Command-line install    kernel ubuntu-installer/amd64/linux    append tasks=standard pkgsel/language-pack-patterns= pkgsel/install-language-support=false vga=788 initrd=ubuntu-installer/amd64/initrd.gz --- quiet 

2ã€ç¼–è¾‘/var/www/html/ks.cfgæ–‡ä»¶å‚è€ƒã€ŠUbuntuç³»ç»Ÿæ‰¹é‡è‡ªåŠ¨å®‰è£…ã€‹ä¸€æ–‡ä¸­çš„ks.cfgã€‚ç¼–è¾‘åçš„ks.cfgæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
#Generated by Kickstart Configurator#platform=AMD64 or Intel EM64T#System languagelang en_US#Language modules to installlangsupport en_US#System keyboardkeyboard us#System mousemouse#System timezonetimezone Asia/Shanghai#Root passwordrootpw --disabled#Initial useruser test --fullname &quot;test&quot; --iscrypted --password $1$AKq0i3Yu$Tunuha7bYwq5uUV62F2nF0#Reboot after installationreboot#Use text mode installtext#Install OS instead of upgradeinstall#Use Web installationurl --url http://172.16.0.162/ubuntu/#System bootloader configurationbootloader --location=mbr #Clear the Master Boot Recordzerombr yes#Partition clearing informationclearpart --all --initlabel #System authorization infomationauth  --useshadow  --enablemd5 #Network informationnetwork --bootproto=dhcp --device=ens2f0#Firewall configuration#firewall --disabled --trust=ens2f0 --ssh #Do not configure the X Window Systemskipx
éœ€è¦æ³¨æ„çš„æ˜¯ç½‘å¡çš„é…ç½®ï¼Œè¿™é‡Œçš„ç½‘å¡åæŒ‡çš„æ˜¯éœ€è¦å®‰è£…ç³»ç»Ÿçš„ç½‘å¡åã€‚
3ã€åœ¨/var/www/htmlç›®å½•åˆ›å»ºubuntu-server.seedæ–‡ä»¶ï¼Œå†…å®¹ä¸ºç©ºï¼ˆæš‚æ—¶ä¸é…ç½®ï¼‰ã€‚
4ã€å†æ¬¡å®‰è£…ç³»ç»Ÿï¼Œç»å¤§éƒ¨åˆ†æ­¥éª¤éƒ½ä¼šè‡ªåŠ¨è¿›è¡Œé€‰æ‹©äº†ã€‚ä½†æ˜¯ï¼Œåœ¨åˆ†åŒºéƒ¨åˆ†å¡ä½ã€‚æ‰‹åŠ¨åˆ†åŒºåï¼Œåç»­ä¼šå…¨éƒ¨è‡ªåŠ¨å®‰è£…ã€‚å®‰è£…å®Œæˆåï¼Œç³»ç»Ÿæ²¡æœ‰å®‰è£…opensshæœåŠ¡ã€‚
ubuntu-server.seedæœ¬æ–‡ä¸­ï¼Œubuntu-server.seedä¸»è¦ç”¨æ¥è§£å†³åˆ†åŒºã€é€‰æ‹©è½¯ä»¶ç­‰ks.cfgæ²¡æœ‰è§£å†³çš„é—®é¢˜ã€‚
1ã€ç¼–è¾‘seedæ–‡ä»¶vim /var/www/html/ubuntu-server.seedï¼Œæ·»åŠ ï¼š
d-i pkgsel/include string openssh-serverd-i partman/confirm_write_new_label boolean trued-i partman/choose_partition select Finish partitioning and write changes to diskd-i partman/confirm boolean true
å…¶ä»–é…ç½®å¯ä»¥å‚è€ƒ/var/www/html/ubuntu/preseed/ç›®å½•ä¸­çš„æ–‡ä»¶ï¼Œä¸è¿‡æœ¬æ–‡ä¸­ç”¨ä¸åˆ°å…¶ä»–é…ç½®äº†ã€‚
2ã€å†æ¬¡å®‰è£…ç³»ç»Ÿï¼Œæ­¤æ—¶å°±ä¼šè‡ªåŠ¨åˆ†åŒºï¼Œå¹¶ä¸”å®‰è£…opensshæœåŠ¡äº†ã€‚å…¨ç¨‹ä¸éœ€è¦æ‰‹åŠ¨å¸®åŠ©è®¾ç½®ï¼Œå®Œç¾ã€‚
é…ç½®æ‰‹åŠ¨å®‰è£…ä¸ªåˆ«æƒ…å†µä¸‹ï¼Œè‡ªåŠ¨å®‰è£…ä¼šå¤±è´¥ï¼Œè¿™æ—¶å°±éœ€è¦æ‰‹åŠ¨å®‰è£…ï¼Œåœ¨Installer boot menuç•Œé¢æ·»åŠ ä¸€ä¸ªæ‰‹åŠ¨å®‰è£…å¯åŠ¨é¡¹å³å¯ã€‚
1ã€ç¼–è¾‘pxelinux.cfgæ–‡ä»¶vim /tftpboot/pxelinux.cfg/defaultï¼Œä¿®æ”¹ä¸ºï¼š
# D-I config version 2.0# search path for the c32 support libraries (libcom32, libutil etc.)path ubuntu-installer/amd64/boot-screens/include ubuntu-installer/amd64/boot-screens/menu.cfgdefault ubuntu-installer/amd64/boot-screens/vesamenu.c32prompt 0# add localboot herelabel localboot    menu label Boot from Disk    localboot 0label manual install    menu label Manual Install    kernel ubuntu-installer/amd64/linux    append ks=http://172.16.0.162/manual.cfg vga=788 initrd=ubuntu-installer/amd64/initrd.gz --- quiettimeout 0

2ã€åœ¨/var/www/htmlç›®å½•åˆ›å»ºmanual.cfgæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
installurl --url http://172.16.0.162/ubuntu/

3ã€é‡æ–°å®‰è£…ç³»ç»Ÿï¼ŒInstaller boot menuç•Œé¢å°±ä¼šå‡ºç°æ‰‹åŠ¨å®‰è£…é€‰é¡¹ã€‚
æ‰¹é‡å®‰è£…1ã€è¿œç¨‹è¿æ¥éœ€è¦å®‰è£…ç³»ç»Ÿçš„æœåŠ¡å™¨ï¼Œè®¾ç½®BIOSï¼Œé€‰æ‹©ä»ç½‘ç»œå¯åŠ¨ã€‚
2ã€å®‰è£…æ­£å¸¸ç³»ç»Ÿï¼Œæœ‰äº›æœºå™¨åœ¨ç½‘ç»œéƒ¨åˆ†å¡ä½ã€‚æ­¤æ—¶ï¼Œå¯ä»¥æ‰‹åŠ¨ç»™ç½‘å¡é…ç½®IPã€‚ä½†æ˜¯ï¼Œå¦‚æœç³»ç»Ÿåªæ£€æµ‹åˆ°ä¸€ä¸ªç½‘å¡ï¼Œè€Œè¿™ä¸ªç½‘å¡æ²¡æœ‰è¿æ¥ç½‘çº¿ï¼Œé‚£ä¹ˆæ— æ³•å®Œæˆæ¥ä¸‹æ¥çš„å®‰è£…ã€‚å› ä¸ºæ²¡æœ‰IPï¼Œæ‰€ä»¥æ— æ³•é€šè¿‡è·å–ks.cfgç­‰æ–‡ä»¶ã€‚Alt+F2è¿›å…¥æ§åˆ¶å°ï¼Œip addçœ‹åˆ°IPè®¾ç½®æˆåŠŸï¼Œä½†æ˜¯æ— æ³•pingé€šPXEæœåŠ¡å™¨ã€‚Alt+F1è¿”å›å›¾å½¢ç•Œé¢ã€‚æ­¤æ—¶ï¼Œæœ€å¥½çš„åšæ³•æ˜¯è¿›å…¥æœºæˆ¿ï¼ŒæŠŠç½‘çº¿æ¥åˆ°å¯ä»¥æ£€æµ‹åˆ°çš„é‚£ä¸ªç½‘å¡ã€‚ç„¶åCtrl+Alt+Delé‡å¯æœåŠ¡å™¨ã€‚
3ã€å†æ¬¡å®‰è£…ç³»ç»Ÿï¼Œå³å¯é¡ºåˆ©å®‰è£…ã€‚
é…ç½®é™æ€IPç³»ç»Ÿå®‰è£…å®Œæˆåï¼Œæ­¤æ—¶ä¸èƒ½ä¸Šç½‘ï¼Œéœ€è¦ç»™ç³»ç»Ÿé…ç½®é™æ€IPå’Œç½‘å…³ï¼Œè¿™æ—¶å‘ç°äº†ä¸€ä¸ªå°é—®é¢˜ï¼šç³»ç»Ÿä¸­æ²¡æœ‰å®‰è£…vimï¼Œè‡ªå¸¦çš„viä¹Ÿæœ‰æ¯›ç—…ã€‚æ€ä¹ˆåŠï¼Ÿä½¿ç”¨nanoã€‚
1ã€ç¼–è¾‘interfacessudo nano /etc/network/interfaces
2ã€ä¿å­˜æ–‡ä»¶ç¼–è¾‘å®Œæˆï¼ŒCtrl+Xé€€å‡ºï¼Œç³»ç»Ÿæç¤ºæ˜¯å¦ä¿å­˜ï¼Œè¾“å…¥Yå›è½¦ï¼Œç„¶åå†æ¬¡å›è½¦ä¿å­˜ã€‚
3ã€é‡å¯ç½‘ç»œæœåŠ¡
sudo /etc/init.d/networking restart# orsudo ifdown ens2f0sudo ifup ens2f0
é‡å¯ç½‘ç»œæœåŠ¡åå‘ç°ï¼Œæ­¤æ—¶ç½‘å¡ä¸Šæœ‰ä¸¤ä¸ªIPåœ°å€ï¼Œè€Œä¸”åªæœ‰DHCPåˆ†é…çš„æ—§çš„IPåœ°å€ç”Ÿæ•ˆï¼ˆç¬¬ä¸€ä¸ªï¼‰ã€‚
4ã€å–æ¶ˆIPåœ°å€å¹¶é‡å¯ç½‘ç»œæœåŠ¡
sudo ip addr flush dev ens2f0sudo /etc/init.d/networking restart
æ­¤æ—¶é™æ€IPå°±é…ç½®æˆåŠŸäº†ã€‚
åè®°ç»™40å°æœºå™¨é…ç½®è¿œç¨‹æ§åˆ¶æ¥å£çš„IPï¼Œæ­å»ºPXEæœåŠ¡å™¨ï¼Œå®‰è£…ç³»ç»Ÿï¼Œé…ç½®é™æ€IPï¼Œæ€»è®¡ç”¨æ—¶ä¸€å‘¨å·¦å³ã€‚ä»æ•ˆç‡ä¸Šè®²ä¸å¦‚å¤–åŒ…æ‰¾äººå®‰è£…ï¼Œä»ç ”ç©¶ä¸Šè®²è¿˜æ˜¯æœ‰å¾ˆå¤šæ”¶è·çš„ã€‚è¿˜å¥½æœ€è¿‘æ¸…é—²äº†ä¸€äº›ï¼Œä¸ç„¶è¿˜çœŸæ²¡æ—¶é—´æŠŠæ•´ä¸ªå®‰è£…æµç¨‹ææ¸…æ¥šã€‚ä¹‹æ‰€ä»¥ç”¨æ—¶å¾ˆä¹…ï¼Œä¸»è¦æ˜¯å› ä¸ºæœ‰ä¸€äº›æœºå™¨ä¹‹å‰ä½¿ç”¨è¿‡ï¼Œæ‰€ä»¥å®‰è£…çš„æ—¶å€™éœ€è¦æ‰‹åŠ¨ç¡®è®¤remove volume dataï¼Œæˆ–è€…disk detectæŠ¥é”™éœ€è¦æ‰‹åŠ¨å®‰è£…ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚
ä¹¦ç­¾Netboot Install
PXE-netboot-install
Ubuntu 16.04 LTS (Xenial Xerus) Netboot
How to install PXE Server on Ubuntu 16.04
ç¥å¥‡çš„fdiskå’Œddå‘½ä»¤
PXEç½‘ç»œå…‹éš†å›¾æ–‡æ•™ç¨‹
DHCP tftp PXEå®ç°Ghostç½‘ç»œå…‹éš†
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
        <tag>pxe</tag>
      </tags>
  </entry>
  <entry>
    <title>é€šè¿‡è¿œç¨‹æ§åˆ¶æ¥å£ç»™æœåŠ¡å™¨å®‰è£…ç³»ç»Ÿ</title>
    <url>/dev-install-sys-by-remote-controller-interface/</url>
    <content><![CDATA[å‰è¨€ã€Šåˆ¶ä½œUbuntuå®‰è£…ç›˜æ–¹æ³•å°ç»“ã€‹ä¸€æ–‡ä¸­ï¼Œæ€»ç»“äº†Uç›˜å’Œå…‰ç›˜ä¸¤ç§å®‰è£…æºçš„åˆ¶ä½œæ–¹æ³•ï¼Œä¹Ÿæåˆ°äº†ç¡¬ç›˜å®‰è£…å’Œç½‘ç»œå®‰è£…ã€‚æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œé€šè¿‡ç½‘ç»œå®‰è£…æºå¯ä»¥è¿›è¡Œæ‰¹é‡å®‰è£…ã€‚è€Œå¦‚æœä½¿ç”¨è¿œç¨‹æ§åˆ¶æ¥å£è¿›è¡Œå®‰è£…ï¼Œåˆ™å¯ä»¥å®ç°è¿œç¨‹å®‰è£…ï¼Œä¸ç”¨è¿›å…¥æœºæˆ¿ã€‚æœ¬æ–‡ä¸­ï¼Œå°±ç ”ç©¶ä¸€ä¸‹è¿œç¨‹æ§åˆ¶æ¥å£çš„é…ç½®æ–¹æ³•ï¼Œå¹¶ä¸”é€šè¿‡è¯¥æ¥å£è¿›è¡Œç³»ç»Ÿå®‰è£…ã€‚


è¿œç¨‹æ§åˆ¶æ¥å£é…ç½®ä¸åŒçš„æœåŠ¡å™¨ï¼Œæœ‰ç€ä¸åŒçš„è¿œç¨‹æ§åˆ¶æ¥å£ï¼Œå…·ä½“å¯ä»¥å‚è€ƒä¹¦ç­¾ä¸­çš„å†…å®¹ã€‚æœ¬æ–‡ä¸­ä½¿ç”¨çš„æœåŠ¡å™¨æ˜¯æ›™å…‰I620-G20ï¼Œç®¡ç†æ¥å£åä¸ºmgmtã€‚ä¸»è¦å‚è€ƒé…ç½®ç®¡ç†å£ç®¡ç†æ›™å…‰æœåŠ¡å™¨ã€‚
1ã€å¼€æœºç‚¹å‡»deleteè¿›å…¥BIOSè®¾ç½®ï¼Œåˆ‡æ¢åˆ°ServerManageã€‚
2ã€BMC Supportè®¾ç½®ä¸ºEnabledã€‚é€‰ä¸­BMC network configurationï¼Œè¿›è¡Œç½‘ç»œé…ç½®ã€‚
3ã€é€‰ä¸­Configuration Address sourceï¼Œé€‰æ‹©Staticã€‚
4ã€æ ¹æ®ç½‘ç»œæƒ…å†µè®¾ç½®é™æ€IPï¼Œè®¾ç½®å®ŒæˆåSave Configurationï¼Œç„¶åç‚¹å‡»F4ä¿å­˜é€€å‡ºã€‚
è¿œç¨‹ç®¡ç†åŸºæœ¬ç®¡ç†1ã€æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨çš„ç®¡ç†IPï¼Œå³å¯çœ‹åˆ°æ›™å…‰çš„ç™»å½•é¡µé¢ã€‚
2ã€å¡«å…¥ç”¨æˆ·åå¯†ç ï¼ˆé»˜è®¤éƒ½æ˜¯adminï¼‰ï¼Œè¿›å…¥ç®¡ç†é¡µé¢ã€‚æ­¤å¤–ï¼Œè¿™ç»„ç”¨æˆ·åå¯†ç ï¼Œä¹Ÿå¯ä»¥sshç™»å½•åˆ°æœåŠ¡å™¨ã€‚
3ã€åœ¨ç®¡ç†é¡µé¢æœ‰å¾ˆå¤šé€‰é¡¹å¡ï¼Œè¿™é‡Œæˆ‘ä»¬ç‚¹å‡»â€œè¿œç¨‹æ§åˆ¶â€ã€‚
4ã€ç‚¹å‡»æ§åˆ¶å°é‡å®šå‘ï¼ŒJavaç»ˆç«¯ï¼Œç½‘é¡µä¼šä¸‹è½½jviewer.jnlpæ–‡ä»¶ã€‚
5ã€åŒå‡»jviewer.jnlpï¼Œä¼šæç¤ºJavaæ›´æ–°ï¼ˆè¿™é‡Œæ›´æ–°æˆ–è€…ä¸æ›´æ–°éƒ½å¯ä»¥ï¼‰ï¼Œå¯åŠ¨æŠ¥é”™ã€‚ç‚¹å¼€è¯¦ç»†çœ‹åˆ°æŠ¥é”™ï¼š
JNLPException[category: å®‰å…¨é”™è¯¯ : Exception: null : LaunchDesc: &lt;jnlp spec=&quot;1.0+&quot; codebase=&quot;http://172.16.101.162:80/Java&quot;&gt;  ......&lt;/jnlp&gt; ]    at com.sun.javaws.security.JNLPSignedResourcesHelper.checkSignedResourcesHelper(Unknown Source)    at com.sun.javaws.security.JNLPSignedResourcesHelper.checkSignedResources(Unknown Source)    at com.sun.javaws.Launcher.prepareResources(Unknown Source)    at com.sun.javaws.Launcher.prepareAllResources(Unknown Source)    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)    at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)    at com.sun.javaws.Launcher.launch(Unknown Source)    at com.sun.javaws.Main.launchApp(Unknown Source)    at com.sun.javaws.Main.continueInSecureThread(Unknown Source)    at com.sun.javaws.Main.access$000(Unknown Source)    at com.sun.javaws.Main$1.run(Unknown Source)    at java.lang.Thread.run(Unknown Source)

6ã€æ‰“å¼€jviewer.jnlpæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;jnlp spec=&quot;1.0+&quot; codebase=&quot;http://172.16.101.162:80/Java&quot;&gt;     &lt;information&gt;        &lt;title&gt;JViewer&lt;/title&gt;        &lt;vendor&gt;American Megatrends, Inc.&lt;/vendor&gt;        &lt;description kind=&quot;one-line&quot;&gt;JViewer Console Redirection Application&lt;/description&gt;        &lt;description kind=&quot;tooltip&quot;&gt;JViewer Console Redirection Application&lt;/description&gt;        &lt;description kind=&quot;short&quot;&gt;            JViewer enables a user to view the video display of managed server via KVM.              It also enables the user to redirect his local keyboard, mouse for managing the server remotely.        &lt;/description&gt;    &lt;/information&gt;    &lt;security&gt;        &lt;all-permissions/&gt;    &lt;/security&gt;    &lt;resources&gt;        &lt;j2se version=&quot;1.5+&quot;/&gt;        &lt;jar href=&quot;release/JViewer.jar&quot;/&gt;    &lt;/resources&gt;    &lt;resources&gt;        &lt;j2se version=&quot;1.5+&quot;/&gt;        &lt;jar href=&quot;release/JViewer-SOC.jar&quot;/&gt;    &lt;/resources&gt;    &lt;resources os=&quot;Windows&quot; arch=&quot;x86&quot;&gt;        &lt;j2se version=&quot;1.5+&quot;/&gt;        &lt;nativelib href=&quot;release/Win32.jar&quot;/&gt;    &lt;/resources&gt;        &lt;resources os=&quot;Windows&quot; arch=&quot;amd64&quot;&gt;           &lt;j2se version=&quot;1.5+&quot;/&gt;           &lt;nativelib href=&quot;release/Win64.jar&quot;/&gt;    &lt;/resources&gt;    &lt;resources os=&quot;Linux&quot; arch=&quot;x86&quot;&gt;        &lt;j2se version=&quot;1.5+&quot;/&gt;        &lt;nativelib href=&quot;release/Linux_x86_32.jar&quot;/&gt;    &lt;/resources&gt;        &lt;resources os=&quot;Linux&quot; arch=&quot;i386&quot;&gt;        &lt;j2se version=&quot;1.5+&quot;/&gt;        &lt;nativelib href=&quot;release/Linux_x86_32.jar&quot;/&gt;    &lt;/resources&gt;        &lt;resources os=&quot;Linux&quot; arch=&quot;x86_64&quot;&gt;        &lt;j2se version=&quot;1.5+&quot;/&gt;        &lt;nativelib href=&quot;release/Linux_x86_64.jar&quot;/&gt;    &lt;/resources&gt;        &lt;resources os=&quot;Linux&quot; arch=&quot;amd64&quot;&gt;        &lt;j2se version=&quot;1.5+&quot;/&gt;        &lt;nativelib href=&quot;release/Linux_x86_64.jar&quot;/&gt;    &lt;/resources&gt;    &lt;resources os=&quot;Mac OS X&quot; arch=&quot;i386&quot;&gt;    &lt;j2se version=&quot;1.5+&quot;/&gt;    &lt;nativelib href=&quot;release/Mac32.jar&quot;/&gt;    &lt;/resources&gt;     &lt;resources os=&quot;Mac OS X&quot; arch=&quot;x86_64&quot;&gt;    &lt;j2se version=&quot;1.5+&quot;/&gt;    &lt;nativelib href=&quot;release/Mac64.jar&quot;/&gt;    &lt;/resources&gt;     &lt;application-desc&gt;        &lt;argument&gt;-apptype&lt;/argument&gt;&lt;argument&gt;JViewer&lt;/argument&gt;&lt;argument&gt;-hostname&lt;/argument&gt;&lt;argument&gt;172.16.101.162&lt;/argument&gt;&lt;argument&gt;-kvmtoken&lt;/argument&gt;&lt;argument&gt;nOLAdVHdp02q3dSQ&lt;/argument&gt;&lt;argument&gt;-kvmsecure&lt;/argument&gt;&lt;argument&gt;0&lt;/argument&gt;&lt;argument&gt;-kvmport&lt;/argument&gt;&lt;argument&gt;80&lt;/argument&gt;&lt;argument&gt;-vmsecure&lt;/argument&gt;&lt;argument&gt;0&lt;/argument&gt;&lt;argument&gt;-cdstate&lt;/argument&gt;&lt;argument&gt;1&lt;/argument&gt;&lt;argument&gt;-fdstate&lt;/argument&gt;&lt;argument&gt;1&lt;/argument&gt;&lt;argument&gt;-hdstate&lt;/argument&gt;&lt;argument&gt;1&lt;/argument&gt;&lt;argument&gt;-cdnum&lt;/argument&gt;&lt;argument&gt;1&lt;/argument&gt;&lt;argument&gt;-fdnum&lt;/argument&gt;&lt;argument&gt;1&lt;/argument&gt;&lt;argument&gt;-hdnum&lt;/argument&gt;&lt;argument&gt;1&lt;/argument&gt;&lt;argument&gt;-extendedpriv&lt;/argument&gt;&lt;argument&gt;259&lt;/argument&gt;&lt;argument&gt;-localization&lt;/argument&gt;&lt;argument&gt;EN&lt;/argument&gt;&lt;argument&gt;-keyboardlayout&lt;/argument&gt;&lt;argument&gt;AD&lt;/argument&gt;&lt;argument&gt;-websecureport&lt;/argument&gt;&lt;argument&gt;443&lt;/argument&gt;&lt;argument&gt;-singleportenabled&lt;/argument&gt;&lt;argument&gt;1&lt;/argument&gt;&lt;argument&gt;-webcookie&lt;/argument&gt;&lt;argument&gt;q7U2w5QbKeOD77EYPgTQMWyjJzAKblir000&lt;/argument&gt;&lt;argument&gt;-oemfeatures&lt;/argument&gt;&lt;argument&gt;9&lt;/argument&gt;    &lt;/application-desc&gt;&lt;/jnlp&gt;

æŠ¥é”™è§£å†³1ã€å‚è€ƒjava8u121 unable open topcoder arenaï¼Œæ·»åŠ ä¾‹å¤–ç«™ç‚¹ã€‚ï¼ˆ1ï¼‰Win+Sï¼Œæœç´¢â€œJava Control Panelâ€æˆ–è€…â€œé…ç½®Javaâ€ã€‚ï¼ˆ2ï¼‰ç‚¹å‡»â€œå®‰å…¨â€é€‰é¡¹å¡ï¼Œç¼–è¾‘ç«™ç‚¹åˆ—è¡¨ã€‚æ·»åŠ ï¼š
http://172.16.101.162:80

é‡æ–°å¯åŠ¨jviewer.jnlpï¼Œä¾ç„¶æŠ¥é”™ã€‚
2ã€å‚è€ƒJava Web startæœªç­¾åçš„åº”ç”¨ç¨‹åºè¯·æ±‚å¯¹ç³»ç»Ÿæ— é™åˆ¶è®¿é—®ï¼Œå¯¹JDKè¿›è¡Œé™çº§ã€‚ï¼ˆ1ï¼‰å¸è½½JDK8ï¼Œå¿…é¡»å¾—å¸è½½ï¼Œå¦åˆ™å¤šä¸ªç‰ˆæœ¬JDKä¼šæœ‰å†²çªã€‚ï¼ˆ2ï¼‰ä¸‹è½½JDK6ï¼Œå¹¶å®‰è£…ã€‚ï¼ˆ3ï¼‰å‚è€ƒã€ŠIDEAçš„å¸¸ç”¨é…ç½®ã€‹ä¸­çš„JDKé…ç½®ï¼Œä¿®æ”¹JAVA_HOMEä¸ºæ–°çš„JDKå®‰è£…ç›®å½•ã€‚
é‡æ–°å¯åŠ¨jviewer.jnlpï¼Œæœç„¶å¯åŠ¨æˆåŠŸã€‚ï¼ˆå¦‚æœæ‰¾ä¸åˆ°æ‰“å¼€çš„è½¯ä»¶ï¼Œå¯ä»¥æ‰‹åŠ¨é€‰æ‹©javaws.exeï¼‰éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¦å…ˆåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æ§åˆ¶å°é‡å®šå‘çš„é¡µé¢ï¼Œå†å¯åŠ¨jviewer.jnlpã€‚å¦åˆ™ä¼šæŠ¥é”™invalid web sessionï¼Œè€Œä¸”åªèƒ½çœ‹åˆ°ä¸€ä¸ªé»‘è‰²çš„æ§åˆ¶å°ï¼Œæ²¡æœ‰ä»»ä½•å†…å®¹ã€‚è€Œä¸”ï¼Œjviewer.jnlpæ–‡ä»¶æœ‰ä½¿ç”¨æœŸé™ï¼Œæ¯æ¬¡è¿œç¨‹æ§åˆ¶éƒ½éœ€è¦é‡æ–°ä¸‹è½½ï¼Œå› ä¸ºè¯¥æ–‡ä»¶ä¸­çš„kvmtokenæ˜¯ä¼šå‘ç”Ÿå˜åŒ–çš„ã€‚
å®‰è£…ç³»ç»Ÿ1ã€åœ¨Windowsç³»ç»Ÿä¸­åˆ›å»ºshareç›®å½•ï¼Œå¹¶ä¸”è®¾ç½®å…±äº«ã€‚ç„¶åæŠŠubuntu-16.04.4-server-amd64.isoé•œåƒæ‹·è´åˆ°shareç›®å½•ã€‚
2ã€åœ¨æ§åˆ¶å°çš„å·¥å…·æ ä¸Šï¼Œç‚¹å‡»CD/DVD Mediaï¼Œæ‰“å¼€é€‰æ‹©Virtual Mediaå¯¹è¯æ¡†ã€‚
3ã€é€‰æ‹©é•œåƒï¼Œç„¶åç‚¹å‡»â€œConnect CD/DVDâ€ï¼Œè¿æ¥æˆåŠŸåcloseå³å¯ã€‚
4ã€é‡å¯æœåŠ¡å™¨ï¼ŒæŒ‰Delè¿›å…¥BIOSè®¾ç½®ï¼Œé€‰æ‹©ä»è™šæ‹Ÿå…‰é©±å¼•å¯¼ã€‚ï¼ˆå¦‚æœä¹‹å‰æ²¡æœ‰å®‰è£…è¿‡ç³»ç»Ÿåˆ™ä¸éœ€è¦æ­¤æ­¥éª¤ï¼‰
5ã€ç„¶åï¼ŒæœåŠ¡å™¨å°±è¿›å…¥äº†æ­£å¸¸å®‰è£…æ­¥éª¤ã€‚
åè®°ç”±æœ¬æ–‡ä¸­çš„å®è·µå¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨è¿œç¨‹æ§åˆ¶æ¥å£å¯ä»¥å¸®åŠ©æœºæˆ¿ç®¡ç†å‘˜è¿›è¡Œä¸»æœºçš„ç®¡ç†ï¼ŒåŒ…æ‹¬ç³»ç»Ÿçš„å®‰è£…ï¼Œéå¸¸æ–¹ä¾¿ã€‚é‚£ä¹ˆï¼Œç½‘ç»œå®‰è£…æºç»“åˆè¿œç¨‹æ§åˆ¶æ¥å£ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥å®ç°æ‰¹é‡è¿œç¨‹å®‰è£…ç³»ç»Ÿï¼Ÿç†è®ºä¸Šæ˜¯å®Œå…¨å¯è¡Œçš„ã€‚
ä¹¦ç­¾åä¸ºæœåŠ¡å™¨è¿œç¨‹å®‰è£…ç³»ç»Ÿ
DELL iDRACæœåŠ¡å™¨è¿œç¨‹æ§åˆ¶è®¾ç½®
BMC ipmitool å¯¹linuxæœåŠ¡å™¨è¿›è¡ŒIPMIç®¡ç†
æ›™å…‰å¤©é˜”æœåŠ¡å™¨è¿œç¨‹æ§åˆ¶æ‰‹å†Œ
æ›™å…‰IPMIç³»ç»Ÿç®¡ç†å¹³å°ç”¨æˆ·ä½¿ç”¨æŒ‡å—
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ¶ä½œUbuntuå®‰è£…æºæ–¹æ³•å°ç»“</title>
    <url>/dev-create-ubuntu-installer/</url>
    <content><![CDATA[å‰è¨€ã€Šå®‰è£…ç³»ç»Ÿä¹‹ä¸åŒå¹³å°ã€‹å’Œã€ŠUbuntu 14.04.5 Serverç‰©ç†æœºå®‰è£…ã€‹ä¸¤ç¯‡æ–‡ç« ä¸­ï¼Œéƒ½æè¿‡Linuxå®‰è£…æºçš„åˆ¶ä½œæ–¹æ³•ï¼Œä½†æ˜¯æ²¡æœ‰è¯¦ç»†çš„è¯´æ˜ã€‚
Linuxç³»ç»Ÿå®‰è£…æºå¯ä»¥åˆ†ä¸ºUç›˜ã€å…‰ç›˜ã€ç¡¬ç›˜ã€ç½‘ç»œå››ä¸ªå¤§ç±»ï¼Œå…¶ä¸­æœ€å¸¸ç”¨çš„æ˜¯Uç›˜å’Œå…‰ç›˜ï¼Œæœ¬æ–‡ä¼šé’ˆå¯¹è¿™ä¸¤ç§å®‰è£…æºè¿›è¡Œæ€»ç»“ã€‚ç¡¬ç›˜å®‰è£…æºçš„åˆ¶ä½œæ–¹æ³•å‚è€ƒã€Šå®‰è£…ç³»ç»Ÿä¹‹ä¸‰ç§æ–¹å¼ã€‹å’Œã€Šå®‰è£…ç³»ç»Ÿä¹‹åŒç³»ç»Ÿã€‹ï¼Œç½‘ç»œå®‰è£…æºçš„åˆ¶ä½œæ–¹æ³•å‚è€ƒã€ŠUbuntuç³»ç»Ÿæ‰¹é‡è‡ªåŠ¨å®‰è£…ã€‹ã€‚


åˆ¶ä½œå·¥å…·å¯é€‰çš„åˆ¶ä½œå·¥å…·ä¸»è¦æœ‰ï¼š

Universal USB Installerï¼Œä¸€ä¸ªä¸“é—¨åˆ¶ä½œå„ç§Linuxçš„USBç³»ç»Ÿå¯åŠ¨ç›˜çš„å·¥å…·ã€‚
Win32DiskImagerï¼Œç”¨äºåˆ¶ä½œUbuntuçš„USBç³»ç»Ÿå¯åŠ¨ç›˜ï¼Œä½¿ç”¨æ•™ç¨‹å‚è€ƒWin32DiskImager makes an Ubuntu family USB boot drive in Windowsã€‚
UltraISOï¼Œä¸€æ¬¾å¼ºå¤§çš„å…‰ç›˜æ˜ åƒæ–‡ä»¶åˆ¶ä½œã€ç¼–è¾‘å’Œè½¬æ¢å·¥å…·ã€‚

Uç›˜åˆ¶ä½œUSB Installer1ã€ä¸‹è½½Universal USB Installerï¼Œä¸éœ€è¦å®‰è£…å°±å¯ä»¥å¯åŠ¨ã€‚
2ã€é€‰æ‹©é•œåƒç±»å‹ï¼Œé€‰æ‹©é•œåƒï¼Œé€‰æ‹©Uç›˜ï¼Œcreateå³å¯ã€‚ä¸è¿‡ï¼Œæ­£å¦‚ã€ŠUbuntu 14.04.5 Serverç‰©ç†æœºå®‰è£…ã€‹ä¸€æ–‡ä¸­æ‰€è¯´ï¼Œusb installeråˆ¶ä½œçš„å®‰è£…æºä¼šæœ‰äº›é—®é¢˜ï¼Œè¿˜å®¹æ˜“æŸåUç›˜ï¼Œè¿™é‡Œä¸æ¨èã€‚
Win32DiskImager1ã€ä¸‹è½½Win32DiskImagerï¼Œå®‰è£…åå¯åŠ¨ã€‚
2ã€é€‰æ‹©é•œåƒï¼Œé€‰æ‹©è®¾å¤‡ï¼Œå†™å…¥å³å¯ã€‚å†™å…¥å®Œæˆåï¼ŒUç›˜ç©ºé—´å˜å°äº†ï¼Œå˜æˆäº†2.18MBã€‚è€Œä¸”Uç›˜é‡Œåªæœ‰ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼šefiã€‚ä¸è¿‡ä¸ç”¨æ‹…å¿ƒï¼Œä½¿ç”¨è¿™ä¸ªUç›˜ç¡®å®å¯ä»¥å®‰è£…Ubuntuç³»ç»Ÿã€‚è¿™é‡Œä¹Ÿä¸æ¨èï¼Œå› ä¸ºUç›˜ç°åœ¨åªèƒ½ç”¨äºå®‰è£…ç³»ç»Ÿï¼Œæ— æ³•å†å­˜å‚¨å…¶ä»–æ–‡ä»¶ï¼Œé™¤éé‡æ–°æ ¼å¼åŒ–ã€‚
UltraISO1ã€å³é”®ubuntu-16.04.4-server-amd64.isoé•œåƒï¼Œè£…è½½ã€‚è¿™ä¸€æ­¥æ˜¯å¿…é¡»çš„ï¼Œå› ä¸ºå¦‚æœç›´æ¥ä½¿ç”¨UltraISOâ€œæ‰“å¼€â€é•œåƒï¼Œåªèƒ½çœ‹åˆ°EFIæ–‡ä»¶å¤¹ã€‚åªæœ‰è£…è½½åçš„é•œåƒï¼Œä½¿ç”¨UltraISOâ€œæ‰“å¼€å…‰ç›˜â€ï¼Œæ‰å¯ä»¥çœ‹åˆ°å…¨éƒ¨æ–‡ä»¶ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰win8ä¹‹åçš„ç³»ç»Ÿæ‰æ”¯æŒè£…è½½ï¼Œæ›´æ—©çš„ç³»ç»Ÿå¯ä»¥ä½¿ç”¨è™šæ‹Ÿå…‰é©±è¿›è¡Œé•œåƒæŒ‚è½½ã€‚
2ã€ä¸‹è½½UltraISOï¼Œå®‰è£…åå³é”®ä»¥ç®¡ç†å‘˜èº«ä»½å¯åŠ¨ã€‚
3ã€æ‰“å¼€å…‰ç›˜ï¼Œé€‰æ‹©è£…è½½çš„é•œåƒã€‚
4ã€èœå•æ ç‚¹å‡»å¯åŠ¨ï¼Œå†™å…¥ç¡¬ç›˜æ˜ åƒã€‚
5ã€åœ¨å†™å…¥ç¡¬ç›˜æ˜ åƒå¯¹è¯æ¡†ä¸­ï¼Œç¡¬ç›˜é©±åŠ¨å™¨é€‰æ‹©Uç›˜ï¼Œå†™å…¥æ–¹å¼é€‰æ‹©é»˜è®¤çš„USB-HDD+ã€‚
6ã€ï¼ˆå¯é€‰æ“ä½œï¼‰ä¾æ¬¡ç‚¹å‡»ä¾¿æ·å¯åŠ¨ï¼Œå†™å…¥æ–°çš„é©±åŠ¨å™¨å¼•å¯¼æ‰‡åŒºï¼ŒSyslinuxã€‚
7ã€ç‚¹å‡»â€œå†™å…¥â€ï¼Œå¼¹å‡ºè­¦å‘ŠUç›˜ä¸­çš„æ•°æ®ä¼šä¸¢å¤±ï¼Œç¡®è®¤åç­‰å¾…å‡ åˆ†é’Ÿå³å¯åˆ¶ä½œå®Œæˆã€‚
åˆ¶ä½œå®Œæˆåï¼ŒUç›˜è¿˜å¯ä»¥ç»§ç»­ä½œä¸ºç§»åŠ¨å­˜å‚¨è®¾å¤‡ä½¿ç”¨ï¼Œè¿™ç§æ–¹æ³•æ˜¯æœ€æ¨èçš„ä¸€ç§æ–¹æ³•ã€‚
å…‰ç›˜åˆ¶ä½œ1ã€ä¸‹è½½UltraISOï¼Œå®‰è£…åå³é”®ä»¥ç®¡ç†å‘˜èº«ä»½å¯åŠ¨ã€‚
2ã€å…‰é©±ä¸­æ”¾å…¥ç©ºç™½å…‰ç›˜ï¼Œå®¹é‡è¦å¤§äºé•œåƒå¤§å°ã€‚
3ã€èœå•æ ç‚¹å‡»å·¥å…·ï¼Œåˆ»å½•å…‰ç›˜æ˜ åƒã€‚
4ã€æ˜ åƒæ–‡ä»¶é€‰æ‹©ubuntu-16.04.4-server-amd64.isoï¼Œç„¶åç‚¹å‡»â€œåˆ»å½•â€ï¼Œç­‰å¾…å‡ åˆ†é’Ÿå³å¯åˆ¶ä½œå®Œæˆã€‚
åè®°ä»¥ä¸Šï¼Œå°±æ˜¯Uç›˜å®‰è£…æºå’Œå…‰ç›˜å®‰è£…æºçš„åˆ¶ä½œæ–¹æ³•ã€‚è¿™ä¸¤ç§å®‰è£…æºçš„ä½¿ç”¨æ–¹æ³•éƒ½å¾ˆå¸¸è§„ï¼Œå¯åŠ¨ä¸»æœºçš„æ—¶å€™è¿›å…¥BIOSé€‰æ‹©å¯åŠ¨é¡¹ï¼Œç„¶åæ­£å¸¸å®‰è£…å³å¯ã€‚å®‰è£…è¿‡ç¨‹ä¸­ä¼šæœ‰å¾ˆå¤šäº¤äº’è®¾ç½®ï¼Œä¸ªäººè§‰å¾—å¾ˆéº»çƒ¦ï¼Œæ²¡æœ‰GHOSTå®‰è£…æ–¹ä¾¿ã€‚
å› æ­¤ï¼ŒUç›˜å’Œå…‰ç›˜æ— äººå€¼å®ˆè‡ªåŠ¨å®‰è£…ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç ”ç©¶ç‚¹ï¼Œæœ‰æ—¶é—´äº†å¯ä»¥æä¸€ä¸‹ã€‚ä¸»è¦æ€è·¯æ˜¯ä¿®æ”¹isolinux/txt.cfgæ–‡ä»¶ï¼Œå‚è€ƒubuntu-server.seedçš„å¼•å…¥æ–¹å¼ï¼Œåˆ›å»ºå¹¶å¼•å…¥ks.cfgæ–‡ä»¶ã€‚ks.cfgæ–‡ä»¶çš„é…ç½®å‚è€ƒks.cfgå‚æ•°è¯¦è§£ï¼Œubuntu-server.seedçš„é…ç½®å‚è€ƒã€ŠUbuntuç³»ç»Ÿæ‰¹é‡è‡ªåŠ¨å®‰è£…ã€‹ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>è™šæ‹Ÿæœºåœ¨çº¿è¿ç§»å®éªŒV2â€”â€”ä¸‹</title>
    <url>/dev-openstack-vm-live-migration-experiment-v2-1/</url>
    <content><![CDATA[å‰è¨€æ¯•ä¸šè®ºæ–‡é€å®¡çš„æ—¥æœŸæ˜¯3æœˆ22æ—¥ï¼Œcloud2019çš„deadlineä¹Ÿæ˜¯3æœˆ22æ—¥ã€‚å¤§æ¦‚ä»2æœˆ27æ—¥å¼€å§‹å†™æ¯•ä¸šè®ºæ–‡ï¼Œæ—©å…«ç‚¹åŠæ™šåç‚¹ï¼Œå‘¨æœ«ä¸ä¼‘ï¼Œ3æœˆ22æ—¥ç»ˆäºå†™å®Œé€å®¡äº†ï¼Œç®—æ˜¯å®Œæˆäº†ä¸€ä»¶å¤§äº‹ã€‚ä¹‹åï¼Œè¿˜æœ‰ä¸¤ä»¶å¤§äº‹ï¼šä¸€ä¸ªæ˜¯å®ç°é˜…å·ç³»ç»Ÿï¼Œä¸€ä¸ªæ˜¯å‘è¡¨å°è®ºæ–‡ã€‚
æœ¬æ¥æ‰“ç®—3æœˆ20æ—¥æŠ½å‡ºä¸€å¤©æ—¶é—´åšå®éªŒå†™å°è®ºæ–‡ï¼Œæ²¡æƒ³åˆ°å®éªŒç¯å¢ƒå´©äº†ï¼æ— å¥ˆåªèƒ½æ”¾å¼ƒcloudã€‚è®ºæ–‡é€å®¡åä¸€ç›´åœ¨å¿™ç€ä¿®å¤å®éªŒç¯å¢ƒï¼Œ2æœˆ24æ—¥æ™šä¸Šåç‚¹å·¦å³ï¼Œç»ˆäºä¿®å¤æˆåŠŸï¼æ˜¯æ—¶å€™å®Œæˆå°è®ºæ–‡äº†ï¼


å‰æƒ…å›é¡¾ã€Šè™šæ‹Ÿæœºåœ¨çº¿è¿ç§»å®éªŒV2â€”â€”ä¸Šã€‹ä¸€æ–‡ä¸­ï¼Œå®éªŒé‡åˆ°ç“¶é¢ˆï¼Œæ‰€ä»¥ä¸å¾—ä¸é‡æ–°è®¾è®¡å®éªŒã€‚ç»è¿‡æ€è€ƒï¼Œæ‰“ç®—æŠŠwebæœåŠ¡æ¢æˆmysqlæœåŠ¡ï¼Œåœ¨å®ä¾‹ä¸­è¿›è¡Œæµ‹è¯•ã€‚ä½†æ˜¯ï¼Œå®éªŒè¡¨æ˜ï¼Œå¦‚æœåœ¨è¿ç§»è¿‡ç¨‹ä¸­å¯¹mysqlè¯•å‹ï¼Œé‚£ä¹ˆä¼šå‡ºç°å’ŒwebæœåŠ¡åŒæ ·çš„é—®é¢˜ï¼Œè¿ç§»æ— æ³•æˆåŠŸã€‚æ‰€ä»¥ï¼Œæœ¬æ–‡ä¸­å»æ‰äº†æœåŠ¡é™çº§è¿™ä¸ªæŒ‡æ ‡ï¼Œåªæµ‹é‡åœæœºæ—¶é—´ã€è¿ç§»æ—¶é—´å’Œè¿ç§»æ•°æ®é‡ã€‚
å®ä¾‹å‡†å¤‡1ã€åœ¨horizonæ§åˆ¶å°ï¼Œé¡¹ç›®ï¼Œè®¡ç®—ï¼Œé•œåƒã€‚ä½¿ç”¨xenial-server-cloudimg-amd64-disk1.imgé•œåƒåˆ›å»ºubuntu16çš„é•œåƒæ¨¡æ¿ã€‚
2ã€åˆ›å»ºå®ä¾‹ç±»å‹m1.tiny2ï¼ŒCPUä¸ªæ•°ä¸º1ï¼Œå†…å­˜ä¸º512Mï¼Œç£ç›˜ä¸º5GBã€‚
3ã€ä½¿ç”¨ubuntu16çš„é•œåƒæ¨¡æ¿åˆ›å»ºå®ä¾‹ubuntu0ã€ubuntu1ã€ubuntu2ã€ubuntu3ã€ubuntu4ï¼Œå®ä¾‹ç±»å‹åˆ†åˆ«é€‰æ‹©m1.tiny2ã€m1.smallã€m1.mediumã€m1.largeã€m1.xlargeã€‚ä¹‹æ‰€ä»¥ä¸ä½¿ç”¨é»˜è®¤çš„m1.tinyï¼Œæ˜¯å› ä¸ºm1.tinyçš„ç£ç›˜å¤ªå°ï¼Œåªæœ‰1Gï¼Œæ— æ³•å®‰è£…ubuntu16ã€‚

4ã€åˆ›å»ºæˆåŠŸåï¼Œåˆ†åˆ«åˆ†é…æµ®åŠ¨IPã€‚
PSï¼šåœ¨è¿›è¡Œè¿ç§»å®éªŒæ—¶ï¼Œå…³é—­å…¶ä»–å®ä¾‹ï¼Œé˜²æ­¢èµ„æºå ç”¨äº§ç”Ÿå¹²æ‰°ã€‚
è„šæœ¬å’Œè½¯ä»¶å‡†å¤‡æ€»è¿ç§»æ—¶é—´åœ¨æ§åˆ¶èŠ‚ç‚¹ï¼Œæ–°å»ºmtime.shè„šæœ¬ï¼š
#!/bin/bashtime1=`grep &#x27;live-migration&#x27; list.log | head -n 1 | awk &#x27;&#123;print $24&#125;&#x27;`time2=`grep &#x27;live-migration&#x27; list.log | head -n 1 | awk &#x27;&#123;print $26&#125;&#x27;`time=$(($(date +%s -d $time2) - $(date +%s -d $time1)));echo &quot;$time s&quot;;

æ–°å»ºallmtime.shè„šæœ¬ï¼Œå¯ä»¥è®¡ç®—æ‰€æœ‰è¿ç§»æ—¶é—´ï¼š
#!/bin/bashtime1=`grep &#x27;live-migration&#x27; list.log | awk &#x27;&#123;print $24&#125;&#x27;`time2=`grep &#x27;live-migration&#x27; list.log | awk &#x27;&#123;print $26&#125;&#x27;`IPS=&#x27; &#x27;array1=($time1)array2=($time2)length=$&#123;#array1[@]&#125;COUNTER=0while [ $COUNTER -lt $length ]do    COUNTER=`expr $COUNTER + 1`    t1=$&#123;array1[COUNTER]&#125;    t2=$&#123;array2[COUNTER]&#125;    time=$(($(date +%s -d $t2) - $(date +%s -d $t1)));    echo &quot;$time s&quot;;done

åœæœºæ—¶é—´åœ¨æ§åˆ¶èŠ‚ç‚¹ï¼Œæ–°å»ºdowntime.shè„šæœ¬ï¼š
#!/bin/bashtransmitted=`grep &#x27;packets transmitted&#x27; ping.log | tail -n 1 | awk &#x27;&#123;print $1&#125;&#x27;`received=`grep &#x27;packets transmitted&#x27; ping.log | tail -n 1 | awk &#x27;&#123;print $4&#125;&#x27;`lost=`expr $transmitted - $received`echo &quot;downtime is $lost ms&quot;

è¿ç§»æ•°æ®é‡åœ¨ä¸¤ä¸ªè®¡ç®—èŠ‚ç‚¹ï¼Œå®‰è£…iptraf-ngã€‚apt install iptraf-ng
xshellä½¿ç”¨xshellï¼Œæ‰“å¼€ä¸¤ä¸ªcontrollerèŠ‚ç‚¹çš„shellï¼Œä¸€ä¸ªç™»å½•å®ä¾‹Båç”¨æ¥pingå®ä¾‹Aï¼›ä¸€ä¸ªç”¨æ¥æ‰§è¡Œè¿ç§»å‘½ä»¤ï¼Œè¿ç§»ä¹‹åæ‰§è¡Œmtime.shè„šæœ¬ã€‚æ‰“å¼€ä¸€ä¸ªcompute1èŠ‚ç‚¹çš„shellï¼Œç”¨æ¥è¿è¡Œiptraf-ngã€‚æ‰“å¼€ä¸€ä¸ªcompute2èŠ‚ç‚¹çš„shellï¼Œç”¨æ¥è¿è¡Œiptraf-ngã€‚
å®éªŒæµç¨‹å‡è®¾å½“å‰åªå¯åŠ¨äº†ubuntu0å®ä¾‹ï¼Œnova show ubuntu0ä½äºcompute1èŠ‚ç‚¹ã€‚
1ã€åœ¨ä¸¤ä¸ªcomputeèŠ‚ç‚¹å¯åŠ¨iptraf-ngï¼Œé…ç½®å‚è€ƒã€Šè™šæ‹Ÿæœºåœ¨çº¿è¿ç§»çš„æ€§èƒ½ç»Ÿè®¡ã€‹ã€‚
2ã€åœ¨å®ä¾‹ä¸­å¯åŠ¨å‹åŠ›æµ‹è¯•è½¯ä»¶ï¼Œæˆ–è€…åœ¨ä¸¤ä¸ªcomputeèŠ‚ç‚¹ä¸­å¯åŠ¨ç½‘ç»œæ•…éšœæ¨¡æ‹Ÿè½¯ä»¶ã€‚ï¼ˆflavorå®éªŒä¸­ä¸éœ€è¦ï¼‰
3ã€åœ¨å®ä¾‹Bä¸­pingå®ä¾‹ubuntu0sudo ping ubuntu0_internal_ip -i 0.001 &gt;&gt; ping.log
4ã€åœ¨controllerä¸­æ‰§è¡Œè¿ç§»nova live-migration ubuntu0 compute2
5ã€è§‚å¯ŸcomputeèŠ‚ç‚¹çš„iptraf-ngï¼Œç­‰åˆ°æµé‡ä¸å†å¢åŠ ã€‚å…³é—­å‹åŠ›æµ‹è¯•è½¯ä»¶æˆ–è€…ç½‘ç»œæ•…éšœæ¨¡æ‹Ÿè½¯ä»¶ï¼Œç„¶ååœ¨å®ä¾‹Bä¸­Ctrl+Cç»“æŸpingå‘½ä»¤ã€‚
6ã€åœ¨controllerèŠ‚ç‚¹è®°å½•è¿ç§»åˆ—è¡¨nova migration-list &gt; list.log
7ã€controllerèŠ‚ç‚¹æ‰§è¡Œmtime.shå¾—åˆ°è¿ç§»æ—¶é—´ï¼Œåœ¨å®ä¾‹Bä¸­æ‰§è¡Œdowntime.shå¾—åˆ°åœæœºæ—¶é—´ï¼Œåœ¨ä¸¤ä¸ªè®¡ç®—èŠ‚ç‚¹è§‚å¯Ÿiptraf-ngå¾—åˆ°è¿ç§»æ•°æ®é‡ã€‚
ä»¥ä¸Šæµç¨‹ï¼Œé€‚ç”¨äºæ¥ä¸‹æ¥çš„æ‰€æœ‰å®éªŒã€‚
flavorå®éªŒæŒ‰ç…§å®éªŒæµç¨‹ï¼Œåˆ†åˆ«ä½¿ç”¨äº”ä¸ªflavorï¼Œè¿›è¡Œäº”æ¬¡è¿ç§»å®éªŒï¼Œè®°å½•å®éªŒç»“æœã€‚
#Flavor    è¿ç§»æ—¶é—´s    åœæœºæ—¶é—´ms    è¿å‡ºæ•°æ®é‡MB   è¿å…¥æ•°æ®é‡MBtiny    24  297   275  277small   26  14    329  332medium  27  69    373  375large   30  50    846  852xlarge  31  57    923  929  

ç”±å®éªŒç»“æœå¯ä»¥çœ‹å‡ºï¼Œéšç€CPUå’Œå†…å­˜çš„å¢åŠ ï¼Œè¿ç§»æ—¶é—´ä¹Ÿä¼šéšä¹‹å¢åŠ ã€‚tinyæ¨¡æ¿çš„åœæœºæ—¶é—´æœ€å¤§ï¼Œå…¶ä»–æ¨¡æ¿çš„åœæœºæ—¶é—´åœ¨10msåˆ°70msä¹‹é—´ã€‚æºä¸»æœºçš„è¿å‡ºæ•°æ®é‡å’Œç›®æ ‡ä¸»æœºçš„è¿å…¥æ•°æ®é‡ä¹Ÿä¼šéšä¹‹å¢åŠ ï¼Œè€Œä¸”è¿å…¥æ•°æ®é‡è¦æ¯”è¿å‡ºæ•°æ®é‡å¤š2åˆ°6MBã€‚
ç³»ç»Ÿå‹åŠ›å®éªŒCPUå®éªŒæ¥ä¸‹æ¥çš„å®éªŒï¼Œéƒ½ä½¿ç”¨smallç±»å‹çš„flavorã€‚1ã€å…ˆç»™å®ä¾‹å®‰è£…stress-ngsudo apt install stress-ng
2ã€åœ¨å®ä¾‹ä¸­åˆ›å»ºä¸€ä¸ªCPUè¿›ç¨‹ï¼ŒCPUå ç”¨ç‡10%stress-ng -c 1 -l 10
3ã€åˆ›å»ºCPUè¿›ç¨‹ï¼ŒCPUå ç”¨ç‡20%-100%ï¼Œè®°å½•å®éªŒç»“æœã€‚
# CPUå ç”¨ç‡%   è¿ç§»æ—¶é—´s    åœæœºæ—¶é—´ms    è¿å‡ºæ•°æ®é‡MB   è¿å…¥æ•°æ®é‡MBIdle    26  14    329  33210%     27  15    330  33320%     26  18    331  33330%     24  403   330  33340%     25  3332  330  33450%     25  3175  330  33260%     24  505   327  32970%     26  10372 328  33180%     25  292   329  33190%     26  124   330  333100%    26  573   328  330
ç”±å®éªŒç»“æœå¯ä»¥çœ‹å‡ºï¼Œéšç€CPUå ç”¨ç‡çš„æé«˜ï¼Œè¿ç§»æ—¶é—´æ²¡æœ‰å¤ªå¤§å˜åŒ–ã€‚åœæœºæ—¶é—´åœ¨CPUä½¿ç”¨ç‡å¤§äº30%ä¹‹åï¼Œåœæœºæ—¶é—´æ™®éå¤§äº100msï¼Œå¶å°”ä¼šå‡ºç°åœæœºæ—¶é—´å¤§äº3sï¼Œæ²¡æœ‰æ˜æ˜¾çš„è§„å¾‹ã€‚è¿ç§»æ•°æ®é‡å¹¶æ²¡æœ‰å¤ªå¤§å˜åŒ–ï¼Œè¿å…¥æ•°æ®ä¸€ç›´æ¯”è¿å‡ºæ•°æ®å¤š2åˆ°4MBã€‚
åœ¨è¿ç§»æ—¶ï¼Œå¶å°”ä¼šå‡ºç°OpenStackæ˜¾ç¤ºå®ä¾‹è¿ç§»æˆåŠŸï¼Œä½†æ˜¯å®ä¾‹åœæœºæ—¶é—´ç‰¹åˆ«é•¿ï¼ˆå¤§äº600sï¼‰çš„æƒ…å†µã€‚æœ¬æ–‡ä¸­è®¤ä¸ºè¿™ç§æƒ…å†µå±äºå¼‚å¸¸ï¼Œä¼šé‡åšå®éªŒï¼Œå»é™¤è¿™äº›å¼‚å¸¸å€¼ã€‚
å†…å­˜å®éªŒ1ã€åœ¨å®ä¾‹ä¸­åˆ›å»ºä¸€ä¸ª200Mçš„å†…å­˜è¿›ç¨‹stress-ng --vm 1 --vm-bytes 200M --vm-keep
2ã€åˆ›å»ºå†…å­˜è¿›ç¨‹ï¼Œå†…å­˜å ç”¨400M-1600Mï¼Œè®°å½•å®éªŒç»“æœã€‚
# å†…å­˜å ç”¨MB   è¿ç§»æ—¶é—´s    åœæœºæ—¶é—´ms    è¿å‡ºæ•°æ®é‡MB   è¿å…¥æ•°æ®é‡MBIdle    26      14      329     332200     79      3090    6543    6585400     199     144     21344   21481 600     308     440     33368   33585800     422     560     47712   480191000    541     23560   61417   61814    1200    649     250080  74617   751031400    925     27230   107004  1077021600    1049    3140    121600  122390
ä»å®éªŒç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼Œéšç€å†…å­˜ä½¿ç”¨é‡çš„å¢åŠ ï¼Œæ€»è¿ç§»æ—¶é—´æ€¥å‰§å¢åŠ ã€‚åœæœºæ—¶é—´ä¸€èˆ¬å¤§äº100msï¼Œæœ‰æ—¶ç”šè‡³è¶…è¿‡20sã€‚è¿ç§»æ•°æ®é‡ä¹Ÿæ€¥å‰§å¢åŠ ï¼Œæ•°é‡çº§å˜ä¸ºGBã€‚å½“å†…å­˜å ç”¨1600MBæ—¶ï¼Œæ€»è¿ç§»æ—¶é—´è¶…è¿‡1000sï¼Œè¿ç§»æ•°æ®å¤§äº120GBï¼Œä¼ è¾“åˆ°ç›®æ ‡æœºå™¨çš„æ•°æ®ä¸ä»æºæœºå™¨ä¼ è¾“çš„æ•°æ®ä¹‹é—´çš„å·®å¼‚ä¸º700MBã€‚
ç£ç›˜å®éªŒ1ã€åœ¨å®ä¾‹ä¸­åˆ›å»º2ä¸ªå†™å…¥è¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹å†™å…¥å¤§å°ä¸º1Mçš„æ–‡ä»¶ã€‚stress-ng -d 2 --hdd-bytes 1M
2ã€åœ¨å®ä¾‹ä¸­åˆ›å»º4-20ä¸ªå†™å…¥è¿›ç¨‹ï¼Œè®°å½•å®éªŒç»“æœã€‚
# å†™å…¥è¿›ç¨‹æ•°   è¿ç§»æ—¶é—´s    åœæœºæ—¶é—´ms    è¿å‡ºæ•°æ®é‡MB   è¿å…¥æ•°æ®é‡MB0       26      14      329     3322       42      510     2178    21924       50      100     2954    29746       127     3350    12456   125378       137     490     13519   1360810      172     4570    18179   18296 12      182     6340    18948   19072     14      172     6860    18034   1815016      189     410     19569   1969618      179     600     18790   1891020      246     3160    26687   26859           
ä»å®éªŒç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼Œéšç€å†™å…¥è¿›ç¨‹çš„å¢åŠ ï¼Œè¿ç§»æ—¶é—´ä¹Ÿåœ¨ä¸æ–­å¢åŠ ã€‚åœæœºæ—¶é—´æ™®éå¤§äº400msï¼Œé¢‘ç¹å‡ºç°å¤§äº3såœæœºæ—¶é—´ã€‚è¿ç§»æ•°æ®é‡å‘ˆç°é˜¶æ¢¯å¼å˜åŒ–ï¼Œæ•°é‡çº§å˜æˆGBã€‚å½“å†™å…¥è¿›ç¨‹æ•°ä¸º20æ—¶ï¼Œè¿ç§»æ—¶é—´çº¦ä¸º250sï¼Œè¿ç§»æ•°æ®çº¦ä¸º27GBã€‚
ç½‘ç»œæ•…éšœå®éªŒç½‘ç»œæ•…éšœå®éªŒä¹‹å‰ï¼Œéœ€è¦é‡å¯æµ‹è¯•å®ä¾‹ï¼Œå¦åˆ™æµ‹å‡ºçš„è¿ç§»æ•°æ®é‡ä¼šåå¤§ä¸€ä¸ªæ•°é‡çº§ã€‚
ç½‘ç»œå»¶è¿Ÿ1ã€åœ¨computeèŠ‚ç‚¹ï¼ˆè¿å‡ºèŠ‚ç‚¹ï¼‰æ·»åŠ ç½‘ç»œå»¶è¿Ÿ20mssudo tc qdisc add dev eth1 root netem delay 20msæ³¨ï¼šåŸæœ¬çš„å»¶è¿Ÿåœ¨0.2msä¸Šä¸‹ã€‚
2ã€å°†ç½‘ç»œå»¶è¿Ÿä¿®æ”¹ä¸º40ms-200msï¼Œè®°å½•å®éªŒç»“æœã€‚sudo tc qdisc replace dev eth1 root netem delay 40ms
# ç½‘ç»œå»¶è¿Ÿms   è¿ç§»æ—¶é—´s    åœæœºæ—¶é—´ms    è¿å‡ºæ•°æ®é‡MB   è¿å…¥æ•°æ®é‡MB0       26      14      329     33220      27      6720    354     35640      29      320     354     35660      32      3200    355     35780      39      160     356     358100     39      3370    360     362120     43      320     357     358140     45      310     358     360160     51      580     356     357180     51      5480    356     357  200     59      620     380     382

ç”±å®éªŒç»“æœå¯ä»¥çœ‹å‡ºï¼Œéšç€ç½‘ç»œå»¶è¿Ÿæ—¶é—´çš„å¢åŠ ï¼Œè¿ç§»æ—¶é—´ä¹Ÿä¼šéšä¹‹å¢åŠ ã€‚åœæœºæ—¶é—´æ™®éå¤§äº300msï¼Œç»å¸¸å‡ºç°3såˆ°7sçš„åœæœºæ—¶é—´ã€‚è¿å‡ºæ•°æ®é‡å’Œè¿å…¥æ•°æ®é‡æ²¡æœ‰æ˜æ˜¾çš„å˜åŒ–ï¼Œå·®å€¼ä¹Ÿä¿æŒåœ¨ç¨³å®šçš„èŒƒå›´ã€‚
æ­¤å¤–ï¼Œåœ¨ç½‘ç»œå»¶è¿Ÿå®éªŒä¸­ï¼Œå®ä¾‹æ­»æœºï¼ˆåœæœºæ—¶é—´å¤§äº600sï¼‰çš„é¢‘ç‡è¦é«˜äºCPUã€å†…å­˜å’Œç£ç›˜å®éªŒã€‚
3ã€å–æ¶ˆæ¨¡æ‹Ÿï¼šsudo tc qdisc del dev eth1 root
ä¸¢åŒ…1ã€ä¸¤ä¸ªè®¡ç®—èŠ‚ç‚¹ï¼Œéƒ½æ¨¡æ‹Ÿä¸¢åŒ…ç‡1%sudo tc qdisc add dev eth1 root netem loss 1%
2ã€å°†æ¨¡æ‹Ÿä¸¢åŒ…ç‡ä¿®æ”¹ä¸º1%-10%ï¼Œè®°å½•å®éªŒç»“æœã€‚sudo tc qdisc change dev eth1 root netem loss 2%
# ä¸¢åŒ…ç‡   è¿ç§»æ—¶é—´s    åœæœºæ—¶é—´ms    è¿å‡ºæ•°æ®é‡MB   è¿å…¥æ•°æ®é‡MB0%      26      14      329     3321%      24      1460    354     3562%      26      4190    355     3563%      30      3990    358     3594%      38      2640    357     3575%      43      7610    359     3606%      67      5960    361     3617%      131     43890   363     3638%      170     20850   368     3689%      283     11430   371     37110%     392     67520   365     365     

ä»å®éªŒç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼Œéšç€ä¸¢åŒ…ç‡çš„å¢å¤§ï¼Œè¿ç§»æ—¶é—´ä¹Ÿä¼šæ˜æ˜¾å¢åŠ ã€‚ä¸¢åŒ…ç‡å¤§äº7%ä¹‹åï¼Œåœæœºæ—¶é—´æ™®éå¤§äº10sï¼Œç”šè‡³å‡ºç°äº†68sçš„åœæœºæ—¶é—´ã€‚è¿ç§»æ•°æ®é‡å˜åŒ–ä¸å¤§ï¼Œè¿å…¥è¿å‡ºæ•°æ®é‡çš„å·®å€¼ç¨³å®šåœ¨1MBä»¥å†…ã€‚
3ã€å–æ¶ˆæ¨¡æ‹Ÿï¼šsudo tc qdisc del dev eth1 root
åŒ…é‡å¤1ã€ä¸¤ä¸ªè®¡ç®—èŠ‚ç‚¹ï¼Œéƒ½æ¨¡æ‹ŸåŒ…é‡å¤ç‡10%sudo tc qdisc add dev eth1 root netem duplicate 10%éšæœºäº§ç”Ÿ 10% é‡å¤çš„åŒ…ã€‚
2ã€å°†æ¨¡æ‹ŸåŒ…é‡å¤ç‡ä¿®æ”¹ä¸º20%-100%ï¼Œè®°å½•å®éªŒç»“æœsudo tc qdisc change dev eth1 root netem duplicate 20%
# åŒ…é‡å¤ç‡   è¿ç§»æ—¶é—´s    åœæœºæ—¶é—´ms    è¿å‡ºæ•°æ®é‡MB   è¿å…¥æ•°æ®é‡MB0%      26      14      329     33210%     32      180     652     65620%     28      180     712     71730%     27      120     769     77440%     28      300     840     84550%     29      3060    887     89360%     29      140     959     96570%     28      540     1016    102380%     32      440     1073    108090%     35      3490    1135    1142100%    32      90      1196    1204     
ä»å®éªŒç»“æœå¯ä»¥çœ‹å‡ºï¼Œéšç€åŒ…é‡å¤ç‡çš„å¢åŠ ï¼Œæ€»çš„è¿ç§»æ—¶é—´å˜åŒ–ä¸å¤§ã€‚åœæœºæ—¶é—´æ™®éå¤§äº100msï¼Œå¶å°”å‡ºç°å¤§äº3sçš„æƒ…å†µï¼Œæ²¡æœ‰æ˜æ˜¾çš„å˜åŒ–è¶‹åŠ¿ã€‚è¿ç§»æ•°æ®é‡éšç€åŒ…é‡å¤ç‡çš„å¢åŠ è€Œå¢å¤§ï¼Œè¿å…¥æ•°æ®é‡å’Œè¿å‡ºæ•°æ®é‡çš„å·®å€¼åœ¨4Måˆ°8Mã€‚
3ã€å–æ¶ˆæ¨¡æ‹Ÿï¼šsudo tc qdisc del dev eth1 root
åŒ…æŸå1ã€ä¸¤ä¸ªè®¡ç®—èŠ‚ç‚¹ï¼Œéƒ½æ¨¡æ‹ŸåŒ…æŸåç‡1%sudo tc qdisc add dev eth1 root netem corrupt 1%éšæœºäº§ç”Ÿ 1% æŸåçš„æŠ¥æ–‡ï¼ˆåœ¨æŠ¥æ–‡çš„éšæœºä½ç½®é€ æˆä¸€ä¸ªæ¯”ç‰¹çš„é”™è¯¯ï¼‰ã€‚
åœ¨pingçš„æ—¶å€™ä¼šæŠ¥é”™ï¼šWarning: time of day goes back , taking countermeasuresï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œä¸å½±å“æˆ‘ä»¬çš„åœæœºæ—¶é—´ç»Ÿè®¡ç»“æœã€‚
2ã€å°†æ¨¡æ‹ŸåŒ…æŸåç‡ä¿®æ”¹ä¸º2%-5%ï¼Œè®°å½•å®éªŒç»“æœã€‚sudo tc qdisc change dev eth1 root netem corrupt 2%
# åŒ…æŸåç‡   è¿ç§»æ—¶é—´s    åœæœºæ—¶é—´ms    è¿å‡ºæ•°æ®é‡MB   è¿å…¥æ•°æ®é‡MB0%      26      14      329     3321%      26      660     333     334 2%      27      1120    334     3353%      35      4160    337     3374%      149     2760    342     342 5%      254     15040   352     353 6%      1228    117760  356     356
ä»å®éªŒæ•°æ®ä¸­å¯ä»¥çœ‹å‡ºï¼ŒåŒ…æŸåç‡å¤§äº3%ä¹‹åï¼Œè¿ç§»æ—¶é—´ä¼šæ€¥å‰§å¢åŠ ã€‚åœæœºæ—¶é—´æ™®éå¤§äº1sï¼Œæ€»ä½“å‘ˆä¸Šå‡è¶‹åŠ¿ã€‚åœæœºæ—¶é—´åœ¨åŒ…æŸåç‡ç­‰äº5%å’Œ6%æ—¶å‘ç”Ÿçªå˜ã€‚è¿ç§»æ•°æ®é‡æ²¡æœ‰æ˜æ˜¾å˜åŒ–ã€‚å½“åŒ…æŸåç‡ç­‰äº6%æ—¶ï¼Œè¿ç§»æ—¶é—´è¶…è¿‡20minï¼Œåœæœºæ—¶é—´æ¥è¿‘120sã€‚
è€Œä¸”ï¼Œåœ¨æœ¬æ–‡ä¸­çš„å®éªŒç¯å¢ƒä¸­ï¼ŒåŒ…æŸåç‡å¤§äºç­‰äº7%æ—¶ï¼Œè¿ç§»ä¼šå¤±è´¥ã€‚è¿ç§»è¿›è¡Œäº†1600sè¿˜æ²¡æœ‰å®Œæˆï¼ŒOpenStackä¼šè‡ªåŠ¨æ’¤é”€è¿ç§»ã€‚è¿˜æœ‰ä¸€ä¸ªæœ‰è¶£çš„ç°è±¡æ˜¯ï¼Œæ­£å¸¸è¿ç§»ä¸­åªè¦ä½¿ç”¨49152ç«¯å£å°±å¯ä»¥äº†ï¼Œåœ¨å‡ºç°åŒ…æŸåçš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨49153-49216ç«¯å£æ¥è¾…åŠ©ä¼ è¾“æ•°æ®ã€‚
3ã€å–æ¶ˆæ¨¡æ‹Ÿï¼šsudo tc qdisc del dev eth1 root
PSï¼šå¦‚æœè¿ç§»æ— æ³•æˆåŠŸï¼Œé‚£ä¹ˆå°±å–æ¶ˆåŒ…æŸåçš„æ¨¡æ‹Ÿï¼Œæˆ–è€…æ’¤é”€è¿ç§»ã€‚
nova migration-listnova server-migration-show 29a58cf7-646a-43f2-b1d6-89ec421fc9d6 152nova live-migration-abort 29a58cf7-646a-43f2-b1d6-89ec421fc9d6 152

åè®°ä»ä»¥ä¸Šç»“æœå¯ä»¥çœ‹å‡ºï¼Œåœ¨OpenStackä¸­é€‰æ‹©VMè¿›è¡Œè¿ç§»çš„æ—¶å€™ï¼Œä¸ºäº†æé«˜è¿ç§»çš„æ•ˆç‡ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªç»“è®ºï¼šï¼ˆ1ï¼‰é€‰æ‹©æ›´å°çš„flavorï¼Œèƒ½å¤Ÿå‡å°‘è¿ç§»æ—¶é—´å’Œè¿ç§»æ•°æ®é‡ã€‚ï¼ˆ2ï¼‰åŸºæœ¬ä¸ç”¨è€ƒè™‘CPUä½¿ç”¨ç‡ï¼Œå› ä¸ºå®ƒå¯¹è¿ç§»å½±å“å¾ˆå°ã€‚ï¼ˆ3ï¼‰é€‰æ‹©å†…å­˜å ç”¨å°çš„VMï¼Œèƒ½å¤Ÿå‡å°‘è¿ç§»æ—¶é—´ã€åœæœºæ—¶é—´å’Œè¿ç§»æ•°æ®é‡ã€‚ï¼ˆ4ï¼‰é€‰æ‹©ç£ç›˜å†™å…¥è¿›ç¨‹è¾ƒå°‘çš„VMï¼Œèƒ½å¤Ÿå‡å°‘è¿ç§»æ—¶é—´ã€åœæœºæ—¶é—´å’Œè¿ç§»æ•°æ®é‡ã€‚ï¼ˆ5ï¼‰åŒ…å»¶è¿Ÿä¼šç¨å¾®å¢åŠ è¿ç§»æ—¶é—´ï¼Œå¯¹åœæœºæ—¶é—´å’Œè¿ç§»æ•°æ®é‡çš„å½±å“å¾ˆå°ã€‚ï¼ˆ6ï¼‰ä¸¢åŒ…ä¼šæ€¥å‰§å¢åŠ è¿ç§»æ—¶é—´ï¼Œå¯¹åœæœºæ—¶é—´å’Œè¿ç§»æ•°æ®é‡çš„å½±å“å¾ˆå°ã€‚ï¼ˆ7ï¼‰åŒ…é‡å¤ä¼šå¢åŠ ä¸€äº›è¿ç§»æ•°æ®é‡ï¼Œä½†æ˜¯å¯¹è¿ç§»æ—¶é—´å’Œè¿ç§»åœæœºæ—¶é—´çš„å½±å“å¾ˆå°ã€‚ï¼ˆ8ï¼‰åŒ…æŸåç‡å°äºç­‰äº3%æ—¶ï¼Œå¯¹è¿ç§»å½±å“è¾ƒå°‘ï¼Œå¯ä»¥å¿½ç•¥ã€‚åŒ…æŸåç‡å¤§äº4%ä¹‹åï¼Œè¿ç§»æ—¶é—´å’Œåœæœºæ—¶é—´ä¼šæ€¥å‰§ä¸Šå‡ã€‚åŒ…æŸåç‡å¤§äº7%æ—¶ï¼Œå·²ç»æ— æ³•è¿ç§»æˆåŠŸã€‚
è‡³æ­¤ï¼Œå®éªŒå®Œæˆï¼Œæ•°æ®æœ‰äº†ï¼Œå°±å·®è®ºæ–‡äº†ï¼åŠ æ²¹åŠ æ²¹ï¼
]]></content>
      <categories>
        <category>engineering</category>
        <category>testing</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
        <tag>æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenStackè®¡ç®—èŠ‚ç‚¹çš„å¥‡è‘©é—®é¢˜</title>
    <url>/dev-openstack-compute-node-broken/</url>
    <content><![CDATA[é—®é¢˜æè¿°å¿ƒæ€çˆ†ç‚¸äº†ï¼ç«æ€¥ç«ç‡ï¼ä¸€æ–¹é¢é©¬ä¸Šè¦äº¤æ¯•ä¸šè®ºæ–‡ï¼Œå¦ä¸€æ–¹é¢é©¬ä¸Šè¦æäº¤å°è®ºæ–‡ã€‚å°±å½“æˆ‘æ‰“ç®—æŠ½å‡ºä¸€å¤©å…ˆå®Œæˆå°è®ºæ–‡æ—¶ï¼Œå®éªŒç¯å¢ƒå´©äº†ï¼
ä¹‹å‰è¿›è¡Œè¿ç§»å®éªŒéƒ½å¥½å¥½çš„ï¼Œä½†æ˜¯ä»Šå¤©è¿›è¡Œè¿ç§»å®éªŒçš„æ—¶å€™ï¼Œå®ä¾‹ç»å¸¸æ­»æœºã€‚æœ¬ç€â€œé‡å¯æ²»ç™¾ç—…â€çš„æ€æƒ³ï¼Œé‡å¯äº†ä¸¤ä¸ªè®¡ç®—èŠ‚ç‚¹ï¼Œé‡æ–°æŒ‚è½½äº†nfsã€‚ç„¶åå†æ¬¡è¿ç§»æ—¶ï¼Œå®ä¾‹å¯ä»¥ä»compute2è¿ç§»åˆ°compute1ã€‚ä½†æ˜¯ï¼Œå®ä¾‹ä»compute1è¿ç§»åˆ°compute2æ—¶ï¼Œcompute2å°±æŠ¥é”™ï¼
ERROR oslo_messaging.rpc.server [req-922596a7-f122-45c8-9f91-1446bb855e05 2c04ede78270421da71953f8f07ef115 8de01ef30eed437193725fb759b9992d - default default] Exception during message handling: InvalidCPUInfo: Unacceptable CPU info: CPU doesn&#x27;t have compatibility.
é‡æ–°éƒ¨ç½²äº†compute2è®¡ç®—èŠ‚ç‚¹ï¼Œä¾ç„¶æ˜¯è¿™ä¸ªé”™è¯¯ã€‚é‡è£…äº†compute2è®¡ç®—èŠ‚ç‚¹çš„æ“ä½œç³»ç»Ÿï¼Œç„¶åé‡æ–°éƒ¨ç½²ï¼Œä¾ç„¶æ˜¯è¿™ä¸ªé”™è¯¯ï¼å¾ˆç»æœ›ï¼


é—®é¢˜åˆ†æé‡è£…ç³»ç»Ÿæ— æ•ˆï¼Œé‚£ä¹ˆå¤§æ¦‚ç‡æ˜¯æ§åˆ¶èŠ‚ç‚¹çš„é”…äº†ï¼é‚£ä¹ˆé—®é¢˜å…·ä½“å‡ºåœ¨å“ªé‡Œï¼Ÿå‡­ä»€ä¹ˆcompute1å°±å¥½å¥½çš„ï¼Œcompute2å°±åäº†ï¼Ÿæ˜¯å› ä¸ºæ§åˆ¶èŠ‚ç‚¹çš„ä¸€äº›æ®‹ç•™ä¿¡æ¯æ²¡æœ‰æ¸…ç©ºå—ï¼Ÿæ•°æ®åº“ä¸­è®°å½•è¯´compute2å·²ç»æ²¡æœ‰å¯ç”¨CPUäº†ï¼Ÿæ•°æ®åº“ä¸­è®°å½•è¯´ä¸å…¼å®¹ï¼Ÿè¿˜æ˜¯æœ‰ç¼“å­˜æˆ–è€…æ¶ˆæ¯ï¼Ÿé‚£ä¹ˆè¯¥æ€ä¹ˆæ¸…ç©ºå…³äºcompute2çš„ä¿¡æ¯ï¼Ÿã€‚ã€‚ã€‚è¿˜æœ‰ä¸€ä¸ªå…³é”®çš„é—®é¢˜æ˜¯ï¼Œä¸ºä»€ä¹ˆçªç„¶å°±æ— æ³•å…¼å®¹äº†ï¼Ÿä¹‹å‰ä¸æ˜¯å¥½å¥½çš„ä¹ˆï¼Ÿç„¶è€Œï¼Œæ²¡æœ‰äººå¯ä»¥å‘Šè¯‰æˆ‘ç­”æ¡ˆï¼Œæœç´¢å¼•æ“ä¸è¡Œï¼Œç¤¾åŒºç¾¤èŠä¸è¡Œï¼Œèº«è¾¹ä¹Ÿæ²¡æœ‰OpenStackçš„å¤§ç‰›ã€‚ç°åœ¨åªæƒ³èµ¶ç´§ä»OpenStackè¿™ä¸ªå¤§å‘ä¸­çˆ¬å‡ºæ¥ï¼Œé‡åˆ°é—®é¢˜æ ¹æœ¬æ‰¾ä¸åˆ°ç­”æ¡ˆï¼Œå°±é—®ä½ æœä¸æœï¼
å‚æ­»æŒ£æ‰æŸ¥çœ‹æ•°æ®åº“1ã€æŸ¥çœ‹æ•°æ®åº“å¯†ç less /etc/kolla/passwords.yml | grep passwordé‡Œé¢æœ‰å¾ˆå¤šå¯†ç ï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯nova_database_passwordã€‚
2ã€è¿›å…¥mariadbå®¹å™¨docker exec -it mariadb /bin/bash
3ã€ç™»å½•mariadbæ•°æ®åº“mysql -u nova -p
4ã€ä½¿ç”¨novaæ•°æ®åº“use nova;
5ã€æŸ¥çœ‹è®¡ç®—èŠ‚ç‚¹çš„ä¿¡æ¯select * from compute_nodes\G
é‡å‘½åè®¡ç®—èŠ‚ç‚¹å¦‚æœï¼Œç»™compute2èŠ‚ç‚¹æ›´æ¢hostnameå’ŒIPå‘¢ï¼Ÿæ¯”å¦‚hostnameæ¢æˆcompute3ï¼ŒIPä¹Ÿæ¢æˆå…¶ä»–çš„ã€‚è¿™æ ·çš„è¯ï¼Œè®¡ç®—èŠ‚ç‚¹å°±ä¸ä¼šå—æ§åˆ¶èŠ‚ç‚¹ä¸­æ®‹ç•™ä¿¡æ¯çš„å½±å“äº†ã€‚
1ã€ä¿®æ”¹compute2çš„hostnameå’ŒIPåœ°å€
2ã€ä¿®æ”¹multinodeæ–‡ä»¶æ§åˆ¶èŠ‚ç‚¹ä¸­ï¼ŒæŠŠmultinodeæ–‡ä»¶ä¸­çš„compute2èŠ‚ç‚¹æ¢æˆcompute3ï¼Œ/etc/hostsä¸­æ·»åŠ compute3å¯¹åº”çš„IPã€‚
3ã€é‡æ–°éƒ¨ç½²kolla-ansible -i ./multinode deploy
4ã€æŸ¥çœ‹è®¡ç®—æœåŠ¡
. admin-openrc.shopenstack compute service list

è®¾ç½®è¿ç§»å’ŒæŒ‚è½½å‚è€ƒã€ŠOpenStackä¸­è™šæ‹Ÿæœºçš„åœ¨çº¿è¿ç§»ã€‹ï¼Œåœ¨compute3èŠ‚ç‚¹è®¾ç½®OpenStackå…è®¸è¿ç§»ã€‚å‚è€ƒã€ŠOpenStackä¸­å…±äº«å­˜å‚¨çš„è™šæ‹Ÿæœºåœ¨çº¿è¿ç§»ã€‹ï¼Œåœ¨compute3èŠ‚ç‚¹æŒ‚è½½nfsã€‚
1ã€ä¿®æ”¹nova.confçš„é…ç½®vim /etc/kolla/nova-compute/nova.confï¼Œåœ¨defaultä¸­æ·»åŠ ï¼š
live_migration_flag=VIR_MIGRATE_UNDEFINE_SOURCE,VIR_MIGRATE_PEER2PEER,VIR_MIGRATE_LIVE

2ã€ä¿®æ”¹libvirtd.confvim /etc/kolla/nova-libvirt/libvirtd.confï¼Œä¿®æ”¹é…ç½®å¦‚ä¸‹ï¼š
listen_tcp = 1listen_tls = 0auth_tcp = &quot;none&quot;ca_file = &quot;&quot;log_level = 3log_outputs = &quot;3:file:/var/log/kolla/libvirt/libvirtd.log&quot;listen_addr = &quot;0.0.0.0&quot;

3ã€æŒ‚è½½nfs
apt-get install nfs-commonmount -t nfs 192.168.56.130:/nfs/share/instances /var/lib/docker/volumes/nova_compute/_data/instances/chmod -R 777 /var/lib/docker/volumes/nova_compute/_data/instances/

4ã€é‡å¯nova_computeå’Œnova_libvirt
docker stop nova_computedocker start nova_computedocker stop nova_libvirtdocker start nova_libvirt

å†æ¬¡å°è¯•è¿ç§»1ã€è¿ç§»å‘½ä»¤nova live-migration demo0 compute3
2ã€æŸ¥çœ‹çŠ¶æ€nova show demo0
3ã€compute3ä¸ŠæŸ¥çœ‹æ—¥å¿—tail -n 20 /var/lib/docker/volumes/kolla_logs/_data/nova/nova-compute.log
è™½ç„¶è¿ç§»å¤±è´¥ï¼Œä½†æ˜¯å¥½æ­¹æ˜¯ä¸ä¸€æ ·çš„é”™è¯¯äº†ã€‚ã€‚ã€‚è¿™ä¸ªé”™è¯¯ä»¥å‰é‡åˆ°è¿‡ï¼Œé‡å¯è®¡ç®—èŠ‚ç‚¹å°±å¥½äº†ã€‚äºæ˜¯é‡å¯compute3èŠ‚ç‚¹ï¼Œä½†æ˜¯é—®é¢˜æ²¡æœ‰è§£å†³ã€‚
4ã€æµ‹è¯•ä¸æ§åˆ¶èŠ‚ç‚¹çš„è¿æ¥curl http://192.168.56.120:35357ï¼Œç»“æœä¸ºï¼š
curl: (7) Failed to connect to 192.168.56.120 port 35357: Connection refused

5ã€åœ¨compute1èŠ‚ç‚¹ä¸Šæµ‹è¯•ä¸æ§åˆ¶èŠ‚ç‚¹çš„è¿æ¥curl http://192.168.56.120:35357ï¼Œç»“æœä¸ºï¼š
&#123;&quot;versions&quot;: &#123;&quot;values&quot;: [&#123;&quot;status&quot;: &quot;stable&quot;, &quot;updated&quot;: &quot;2018-02-28T00:00:00Z&quot;, &quot;media-types&quot;: [&#123;&quot;base&quot;: &quot;application/json&quot;, &quot;type&quot;: &quot;application/vnd.openstack.identity-v3+json&quot;&#125;], &quot;id&quot;: &quot;v3.10&quot;, &quot;links&quot;: [&#123;&quot;href&quot;: &quot;http://192.168.56.120:35357/v3/&quot;, &quot;rel&quot;: &quot;self&quot;&#125;]&#125;, &#123;&quot;status&quot;: &quot;deprecated&quot;, &quot;updated&quot;: &quot;2016-08-04T00:00:00Z&quot;, &quot;media-types&quot;: [&#123;&quot;base&quot;: &quot;application/json&quot;, &quot;type&quot;: &quot;application/vnd.openstack.identity-v2.0+json&quot;&#125;], &quot;id&quot;: &quot;v2.0&quot;, &quot;links&quot;: [&#123;&quot;href&quot;: &quot;http://192.168.56.120:35357/v2.0/&quot;, &quot;rel&quot;: &quot;self&quot;&#125;, &#123;&quot;href&quot;: &quot;https://docs.openstack.org/&quot;, &quot;type&quot;: &quot;text/html&quot;, &quot;rel&quot;: &quot;describedby&quot;&#125;]&#125;]&#125;&#125;
è¿™æ‰æ˜¯æ­£å¸¸çš„å•Šï¼
6ã€é‡å¯compute3å¹¶ä¸”é‡æ–°æŒ‚è½½nfs
mount -t nfs 192.168.56.130:/nfs/share/instances /var/lib/docker/volumes/nova_compute/_data/instances/docker stop nova_computedocker start nova_computedocker stop nova_libvirtdocker start nova_libvirt

7ã€å†æ¬¡æ‰§è¡Œè¿ç§»nova live-migration demo0 compute3ä¾ç„¶å¤±è´¥ï¼Œè¿˜æ˜¯åŒæ ·çš„é”™è¯¯ã€‚
IPçš„å‘ç™¾åº¦è°·æ­Œæƒ³è¦æ‰¾åˆ°ç­”æ¡ˆï¼Ÿä¸å­˜åœ¨çš„ã€‚æŠ˜è…¾äº†ä¸¤å¤©ï¼Œçªç„¶çµå…‰ä¸€ç°ï¼è¿˜è®°å¾—ã€ŠKollaå®‰è£…OpenStackå¤šèŠ‚ç‚¹ã€‹ä¸€æ–‡ä¸­ï¼Œæ§åˆ¶èŠ‚ç‚¹çš„IPä¸º192.168.56.110ã€‚è€Œé…ç½®globals.ymlæ—¶å€™ï¼Œkolla_internal_vip_addressçš„å€¼ä¸º192.168.56.120ã€‚
å› æ­¤ï¼Œcompute3èŠ‚ç‚¹ä¸­ï¼Œnova.confä¸­çš„IPæœ‰ä¸€éƒ¨åˆ†æ˜¯192.168.56.110ï¼Œå¦å¤–ä¸€éƒ¨åˆ†æ˜¯192.168.56.120ã€‚
æ˜æ˜æ‰€æœ‰æ§åˆ¶èŠ‚ç‚¹çš„æœåŠ¡éƒ½åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œå´æœ‰ä¸¤ä¸ªIPï¼Œçœ‹èµ·æ¥å°±å®¹æ˜“é—¹å¹ºè›¾å­ã€‚å®é™…ä¸Šï¼Œç¡®å®é—¹è¿‡å¹ºè›¾å­ï¼OpenStackåˆšåˆšå®‰è£…æˆåŠŸæ—¶ï¼Œä½¿ç”¨192.168.56.120è¿™ä¸ªIPå¯ä»¥è®¿é—®åˆ°horizonæœåŠ¡ï¼Œä½¿ç”¨192.168.56.110å°±ä¸å¯ä»¥ã€‚åæ¥çªç„¶æœ‰ä¸€å¤©ï¼Œ192.168.56.120è¿™ä¸ªIPå°±ä¸èƒ½è®¿é—®horizonäº†ï¼Œä½¿ç”¨192.168.56.110å´å¯ä»¥è®¿é—®ï¼å†åæ¥çªç„¶æœ‰ä¸€å¤©ï¼Œä¸¤ä¸ªIPéƒ½å¯ä»¥è®¿é—®horizonæœåŠ¡ï¼çœŸçš„æ˜¯é†‰äº†ã€‚ã€‚ã€‚
è¿™æ¬¡ï¼Œä¼šä¸ä¼šä¹Ÿæ˜¯IPçš„é—®é¢˜ï¼Ÿäºæ˜¯ï¼Œåœ¨compute3ä¸Šï¼Œæ¢ä¸€ä¸ªIPæµ‹è¯•è®¿é—®æ§åˆ¶èŠ‚ç‚¹ã€‚curl http://192.168.56.110:35357ï¼Œæœç„¶å¯ä»¥æ­£å¸¸è®¿é—®ï¼äºæ˜¯ï¼Œæ€è·¯å°±æ¸…æ™°äº†ã€‚
1ã€ä¿®æ”¹compute3èŠ‚ç‚¹ä¸­çš„nova.confé…ç½®æ–‡ä»¶vim /etc/kolla/nova-compute/nova.confï¼Œæ‰€æœ‰çš„192.168.56.120å…¨éƒ¨æ¢æˆ192.168.56.110ã€‚
2ã€é‡å¯nova_compute
docker stop nova_computedokcer start nova_compute

3ã€å†æ¬¡è¿ç§»ï¼Œå¤±è´¥ï¼Œä¸è¿‡æŠ¥é”™å˜äº†ã€‚
ä¾ç„¶æ˜¯IPé—®é¢˜ï¼Œçœ‹æ¥è¿˜æœ‰å…¶ä»–é…ç½®æ–‡ä»¶ä¸­å†™äº†192.168.56.120ã€‚
4ã€ä¿®æ”¹neutron.confå’Œchrony.confæ–‡ä»¶
vim /etc/kolla/neutron-openvswitch-agent/neutron.confvim /etc/kolla/chrony/chrony.conf
æ‰€æœ‰120æ›¿æ¢ä¸º110ã€‚
5ã€é‡å¯neutronå’Œchrony
docker stop neutron_openvswitch_agentdocker start neutron_openvswitch_agentdocker stop chronydocker start chrony

6ã€å†æ¬¡è¿ç§»ï¼Œä¾ç„¶å¤±è´¥ï¼ŒæŠ¥é”™ä¾ç„¶å¤±8780ç«¯å£ã€‚
7ã€é‡å¯æ‰€æœ‰æœåŠ¡ï¼Œå†æ¬¡è¿ç§»ï¼Œä¾ç„¶å¤±è´¥ã€‚è«éè¿˜æœ‰ä»€ä¹ˆæ–‡ä»¶æ²¡æœ‰æ³¨æ„åˆ°ï¼Ÿäºæ˜¯æ”¾äº†ä¸€ä¸ªå¤§æ‹›ï¼Œgrep -rn &quot;192.168.56.120:8780&quot; *ï¼Œç„¶è€Œï¼Œæ²¡æœ‰æ‰¾åˆ°åŒ…å«è¯¥é…ç½®çš„æ–‡ä»¶ã€‚
8ã€é‡å¯äº†compute3ï¼Œç„¶åï¼Œnova_computeæ— æ³•å¯åŠ¨äº†ï¼å¯åŠ¨æŠ¥é”™ï¼š
/var/lib/docker/volumes/kolla_logs/_data: no such file or directory/var/lib/docker/volumes/libvirtd/_data: no such file or directory/var/lib/docker/volumes/nova_compute/_data: no such file or directory
åˆ›å»ºäº†ä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼Œä¾ç„¶æ— æ³•å¯åŠ¨nova_computeã€‚
ç ´é‡œæ²‰èˆŸå®åœ¨æ˜¯æ²¡åŠæ³•äº†ï¼Œåªèƒ½ä½¿å‡ºæœ€åä¸€æ‹›ï¼šé‡è£…æ•´ä¸ªOpenStackç³»ç»Ÿï¼
é”€æ¯OpenStackç¯å¢ƒ1ã€æŸ¥çœ‹é•œåƒglance image-list
æˆ–è€…è¿›å…¥é•œåƒæ–‡ä»¶å¤¹æŸ¥çœ‹cd /var/lib/docker/volumes/glance/_data/images
2ã€å¯¼å‡ºé•œåƒ
glance image-download --file ./ubuntu16-env.img 003ae986-4dd9-45a6-9630-1b80fc8dcab3ll -h

3ã€åœ¨horizonä¸­åˆ é™¤æ‰€æœ‰é•œåƒ
4ã€åœ¨horizonä¸­å…³é—­å¹¶åˆ é™¤æ‰€æœ‰å®ä¾‹
5ã€ç¼–è¾‘multinodeæ–‡ä»¶ï¼Œå–æ¶ˆæ‰€æœ‰èŠ‚ç‚¹çš„æ³¨é‡Š
6ã€é”€æ¯æ•´ä¸ªOpenStackç¯å¢ƒkolla-ansible destroy -i ./multinode --yes-i-really-really-mean-it
å®‰è£…OpenStackå‚è€ƒã€ŠKollaå®‰è£…OpenStackå¤šèŠ‚ç‚¹ã€‹è¿›è¡ŒOpenStackçš„å®‰è£…ã€‚
è€ƒè™‘åˆ°ä¸¤ä¸ªIPçš„å‘ï¼Œè¿™æ¬¡å®‰è£…æˆ‘ä»”ç»†é˜…è¯»äº†ä¸€ä¸‹globals.ymlæ–‡ä»¶ä¸­å…³äºkolla_internal_vip_addressçš„æè¿°ï¼š

This should be a VIP, an unused IP on your network that will float betweenthe hosts running keepalived for high-availability. If you want to run anAll-In-One without haproxy and keepalived, you can set enable_haproxy to noin â€œOpenStack optionsâ€ section, and set this value to the IP of yourâ€˜network_interfaceâ€™ as set in the Networking section below.

è¿™åº”è¯¥æ˜¯VIPï¼Œç½‘ç»œä¸Šæœªä½¿ç”¨çš„IPå°†åœ¨è¿è¡Œkeepalivedä»¥è·å¾—é«˜å¯ç”¨æ€§çš„ä¸»æœºä¹‹é—´æµ®åŠ¨ã€‚å¦‚æœè¦åœ¨æ²¡æœ‰haproxyå’Œkeepalivedçš„æƒ…å†µä¸‹è¿è¡Œå¤šåŠŸèƒ½ä¸€ä½“æœºï¼Œå¯ä»¥åœ¨â€œOpenStacké€‰é¡¹â€éƒ¨åˆ†ä¸­å°†enable_haproxyè®¾ç½®ä¸ºnoï¼Œå¹¶å°†æ­¤å€¼è®¾ç½®ä¸ºâ€œnetwork_interfaceâ€çš„IPï¼Œå¦‚ä¸‹é¢çš„â€œç½‘ç»œâ€éƒ¨åˆ†æ‰€è¿°ã€‚
çœ‹æ¥ï¼Œkolla_internal_vip_addressä¸åº”è¯¥è®¾ç½®ä¸º192.168.56.120ï¼Œå› ä¸ºæˆ‘ä»¬çš„ç¯å¢ƒä¸­ä¸éœ€è¦haproxyã€‚æ‰€ä»¥ï¼Œåœ¨é…ç½®é…ç½®globals.ymlçš„æ—¶å€™ï¼Œkolla_internal_vip_addressåº”è¯¥è®¾ç½®ä¸ºå’Œæ§åˆ¶èŠ‚ç‚¹ç›¸åŒçš„IPï¼š192.168.56.110ï¼ŒåŒæ—¶enable_haproxyè®¾ç½®ä¸ºnoã€‚
å®‰è£…å®Œæˆåï¼Œå¯¼å…¥ä¹‹å‰å¤‡ä»½çš„é•œåƒï¼š
. admin-openrc.shglance image-create \--name &quot;ubuntu16-env&quot; \--file ./ubuntu16-env.img  \--disk-format qcow2 \--container-format bare \--visibility public \--progress

è®¾ç½®è¿ç§»å’ŒæŒ‚è½½å‚è€ƒæœ¬æ–‡ä¸­å‚æ­»æŒ£æ‰éƒ¨åˆ†è®¾ç½®è¿ç§»å’ŒæŒ‚è½½ã€‚ç„¶åï¼Œåˆ›å»ºå®ä¾‹ï¼Œåˆ†é…æµ®åŠ¨IPï¼Œæµ‹è¯•è¿ç§»ï¼ŒæˆåŠŸï¼niceï¼
ç½ªé­ç¥¸é¦–å†æ¬¡è¿›è¡Œè¿ç§»ï¼ŒåŒæ—¶å¯åŠ¨é—´éš”1msçš„pingå‘½ä»¤æµ‹è¯•åœæœºæ—¶é—´ï¼Œç„¶åå®ä¾‹è¿ç§»åæ­»æœºäº†ï¼Ctrl+Cå…³é—­pingå‘½ä»¤ï¼Œå®ä¾‹å¤æ´»ã€‚ç”±æ­¤çŒœæƒ³æ˜¯pingå‘½ä»¤çš„é”…ã€‚
ä½†æ˜¯ï¼Œè¿™æ˜¯ä¸€ä¸ªå•å‘é—®é¢˜ï¼åŒæ ·æ˜¯ä½¿ç”¨é—´éš”1msçš„pingå‘½ä»¤æµ‹è¯•åœæœºæ—¶é—´ï¼Œå®ä¾‹ä»compute1è¿ç§»åˆ°compute2æ—¶æ­£å¸¸ï¼Œå®ä¾‹ä»compute2è¿ç§»åˆ°compute1æ—¶æ‰ä¼šæ­»æœºã€‚å°±é—®ä½ ç¥å¥‡ä¸ç¥å¥‡ï¼Ÿï¼
çŒœæµ‹æ˜¯å› ä¸ºpingçš„é¢‘ç‡å¤ªé«˜ï¼Œç»™ç½‘ç»œæˆ–è€…å®ä¾‹å¸¦æ¥äº†å¤ªå¤§çš„è´Ÿè·ã€‚pingå‘½ä»¤é™ä½åˆ°10msä¸€æ¬¡ï¼ŒåŒå‘è¿ç§»éƒ½æ­£å¸¸ã€‚
ä½†æ˜¯ï¼Œå®ä¾‹ä»compute1åˆ°compute2æ—¶ï¼Œå°±ä¸ä¼šå—åˆ°pingå‘½ä»¤çš„å½±å“ï¼Œè¿™æ¬¡æ˜¯ä¸ºä»€ä¹ˆï¼Ÿä¸¤å°æœºå™¨çš„é…ç½®å®Œå…¨ç›¸åŒçš„å•Šï¼è¯¡å¼‚ï¼Œå®åœ¨æ˜¯è¯¡å¼‚ï¼
æ›´è¯¡å¼‚çš„æ˜¯ï¼Œæ¯æ¬¡è¿ç§»çš„æ•°æ®å±…ç„¶éƒ½é€šè¿‡ä¸åŒçš„ç½‘å¡ï¼Œä¹Ÿè®¸è¿™æ¬¡é€šè¿‡eth0ï¼ˆç®¡ç†ç½‘ç»œï¼‰ï¼Œä¸‹æ¬¡å°±é€šè¿‡eth2ï¼ˆå¤–ç½‘ç½‘ç»œï¼‰ï¼è¿˜èƒ½ä¸èƒ½æ„‰å¿«åœ°ç©è€äº†ï¼Ÿï¼
ç»†ç»†å›æƒ³æ•´ä¸ªå®‰è£…æµç¨‹ï¼Œçªç„¶æƒ³åˆ°ï¼Œåœ¨å®‰è£…å‰è®¾ç½®äº†ä¸‰ä¸ªèŠ‚ç‚¹çš„hostsæ–‡ä»¶ï¼Œä¸‰ä¸ªèŠ‚ç‚¹é€šè¿‡eth0é€šä¿¡ã€‚ä½†æ˜¯ansibleå®‰è£…OpenStackåï¼Œä¼šæ ¹æ®globals.ymlä¸­çš„network_interfaceï¼ˆeth1ï¼‰ä¿®æ”¹hostsæ–‡ä»¶ï¼Œäºæ˜¯hostsä¸­æœ‰äº†ä¸¤å¥—è§„åˆ™ã€‚é»˜è®¤ä½¿ç”¨hostsæ–‡ä»¶ä¸­é å‰çš„è§„åˆ™ï¼Œäºæ˜¯æˆ‘è‡ªå·±è®¾ç½®çš„è§„åˆ™å°±æŠŠansibleè®¾ç½®çš„è§„åˆ™è¦†ç›–äº†ã€‚eth0æ—¢ç”¨äºèŠ‚ç‚¹é—´é€šä¿¡ï¼Œåˆç”¨äºå®ä¾‹è¿ç§»ã€‚ç”±äºeth2å’Œeth0å±äºåŒä¸€ä¸ªç½‘æ®µï¼Œæ‰€ä»¥æœ‰æ—¶ä¼šé€šè¿‡eth2ç½‘å¡è¿›è¡Œè¿ç§»ï¼
ä¸ºäº†éªŒè¯è‡ªå·±çš„çŒœæƒ³ï¼Œä¿®æ”¹äº†ä¸‰ä¸ªèŠ‚ç‚¹çš„hostsæ–‡ä»¶ï¼Œä¿ç•™ansibleåˆ›å»ºçš„é‚£ä¸€ä»½ã€‚è¿™æ ·ï¼Œå°±æŒ‡å®šäº†è¿ç§»æ—¶ä½¿ç”¨çš„ç½‘å¡ã€‚ä¿®æ”¹ååœ¨æ§åˆ¶èŠ‚ç‚¹å’Œè®¡ç®—èŠ‚ç‚¹é‡å¯novaç›¸å…³æœåŠ¡ã€‚
# è®¡ç®—èŠ‚ç‚¹docker stop nova_computedocker start nova_computedocker stop nova_libvirtdocker start nova_libvirt# æ§åˆ¶èŠ‚ç‚¹docker stop nova_apidocker start nova_apidocker stop nova_schedulerdocker start nova_schedulerdocker stop placement_apidocker start placement_api

å†æ¬¡è¿ç§»å®éªŒï¼Œè¿ç§»æ•°æ®æœç„¶ä¼šé€šè¿‡eth1ï¼ˆOpenStackå†…ç½‘ç½‘ç»œï¼‰ï¼Œè€Œä¸æ˜¯eth0æˆ–è€…eth2ï¼è€Œä¸”ï¼ŒåŒå‘è¿ç§»åŠ 1msçš„pingå‘½ä»¤éƒ½å¯ä»¥æˆåŠŸè¿ç§»ï¼Œå®ä¾‹ä¸å†æ­»æœºï¼Œé—®é¢˜å®Œç¾è§£å†³ï¼çœŸç›¸å¤§ç™½ï¼Œç½ªé­ç¥¸é¦–å±…ç„¶æ˜¯hostsæ–‡ä»¶ï¼
æ­¤å¤–ï¼Œlive_migration_inbound_addrå‚æ•°ä¹Ÿå¯ä»¥æŒ‡å®šè¿ç§»ç½‘ç»œã€‚
é£æ³¢å†èµ·å°±å½“æˆ‘è‡ªä»¥ä¸ºæ‰¾åˆ°äº†çœŸç›¸ï¼Œç»§ç»­å®éªŒæ—¶ï¼Œå®ä¾‹å†æ¬¡å‡ºç°äº†å®ä¾‹æ­»æœºçš„æƒ…å†µã€‚åŒå‘è¿ç§»éƒ½ä¼šå¶å°”å‡ºç°æ­»æœºï¼Œè€Œä¸”ï¼Œä½¿ç”¨é—´éš”1msçš„pingå‘½ä»¤æ—¶æ­»æœºæ¦‚ç‡ä¼šæ›´å¤§ã€‚å¦‚æœä½¿ç”¨é—´éš”10msçš„pingå‘½ä»¤æ¥æµ‹è¯•åœæœºæ—¶é—´å‘¢ï¼Ÿæµ‹å‡ºæ¥çš„åœæœºæ—¶é—´æ˜¯ç§’çº§ï¼Are you kidding me ?æ¯”å¦‚åŒä¸€ä¸ªè¿ç§»ï¼Œä½¿ç”¨ä¸¤ä¸ªpingå‘½ä»¤è¿›è¡Œæµ‹è¯•ï¼š
sudo ping instance_float_ip -i 0.001 &gt;&gt; ping.logæ ¹æ®ä¸¢åŒ…æ•°è®¡ç®—å‡ºçš„downtimeä¸º434mssudo ping instance_float_ip -i 0.01 &gt;&gt; ping.logæ ¹æ®ä¸¢åŒ…æ•°è®¡ç®—å‡ºçš„downtimeä¸º3340ms

ç†è®ºä¸Šï¼Œåº”è¯¥æµ‹å‡ºåŒæ ·çš„ç»“æœæ‰å¯¹ï¼Œç„¶è€Œä»–ä»¬å·®äº†ä¸€ä¸ªæ•°é‡çº§ï¼è¯¡å¼‚ï¼Œå®åœ¨æ˜¯è¯¡å¼‚ï¼å“ªä¸ªæ‰æ˜¯çœŸæ­£çš„downtimeï¼Ÿæ— è®ºå“ªä¸ªæ˜¯çœŸæ­£çš„downtimeï¼Œpingå‘½ä»¤æœ¬èº«ç»å¯¹å­˜åœ¨é‡å¤§ç¼ºé™·ï¼
å¦‚æœdowntimeæ˜¯æ¯«ç§’çº§ï¼Œé‚£ä¹ˆå°±ç¬¦åˆç†è®ºä¸Šçš„å€¼ï¼Œå®éªŒå¯ä»¥æ­£å¸¸è¿›è¡Œã€‚ä½†æ˜¯ï¼Œä½¿ç”¨é—´éš”1msçš„pingå‘½ä»¤æµ‹è¯•åœæœºæ—¶é—´å®¹æ˜“å®ä¾‹æ­»æœºå•Šå¤§å“¥ï¼
å¦‚æœdowntimeæ˜¯ç§’çº§ï¼Œé‚£ä¹ˆé—®é¢˜è¦ä¹ˆæ˜¯å‡ºåœ¨OpenStacké…ç½®ä¸Šé¢ï¼Œè¦ä¹ˆæ˜¯å‡ºåœ¨ç½‘ç»œä¸Šé¢ã€‚å‡è®¾é—®é¢˜å‡ºåœ¨OpenStackçš„é…ç½®ä¸Šé¢ï¼Œäºæ˜¯å‚è€ƒConfigure live migrationsï¼Œå…ˆåè®¾ç½®äº†æœ€å¤§åœæœºæ—¶é—´ï¼Œè®¾ç½®äº†è‡ªåŠ¨æ”¶æ•›ï¼Œè®¾ç½®äº†åæ‹·è´ã€‚ä½†æ˜¯ï¼Œé—®é¢˜ä¾æ—§ï¼Œé‚£ä¹ˆåº”è¯¥ä¸æ˜¯OpenStackçš„é…ç½®é—®é¢˜ã€‚å‡è®¾é—®é¢˜å‡ºåœ¨ç½‘ç»œä¸Šé¢ï¼Œé‚£ä¹ˆæ€ä¹ˆè§£å†³å‘¢ï¼Ÿç»™å®ä¾‹çš„å¤–ç½‘ï¼ˆeth3ï¼‰è®¾ç½®ä¸€ä¸ªå•ç‹¬çš„ç½‘æ®µï¼Œä¸è¦å’Œç®¡ç†ç½‘ç»œï¼ˆeth0ï¼‰åœ¨åŒä¸€ä¸ªç½‘æ®µï¼Ÿå¤ªéº»çƒ¦ã€‚å¦‚æœï¼Œåœ¨å¦å¤–ä¸€ä¸ªå®ä¾‹ä¸­å¯¹è¿ç§»å®ä¾‹è¿›è¡Œpingæµ‹è¯•å‘¢ï¼Ÿè¿™æ ·è‡³å°‘ä¹Ÿå¯ä»¥é¿å…äº†æµ®åŠ¨IPçš„åˆ‡æ¢é—®é¢˜ï¼Œæ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚
äºæ˜¯åœ¨å®ä¾‹Bä¸­è¿è¡Œé—´éš”1msçš„pingå‘½ä»¤ï¼Œé€šè¿‡å®ä¾‹é—´çš„å†…ç½‘æµ‹è¯•å®ä¾‹Aï¼Œå®ä¾‹Aå¤šæ¬¡è¿ç§»ï¼Œæµ‹å‡ºçš„downtimeåœ¨å‡ åæ¯«ç§’åˆ°å‡ ç™¾æ¯«ç§’ä¸ç­‰ï¼Œè€Œä¸”ä¸ä¼šæ­»æœºã€‚åœ¨å®ä¾‹Bä¸­ä½¿ç”¨é—´éš”10msçš„pingå‘½ä»¤è¿›è¡Œæµ‹è¯•ï¼Œæµ‹å‡ºçš„downtimeåœ¨å‡ ç™¾æ¯«ç§’å·¦å³ï¼Œä¹Ÿå¾ˆåˆç†ã€‚æ‰€ä»¥ï¼Œä¸æ˜¯pingå‘½ä»¤çš„é”…ï¼Ÿ
ä¸ç®¡äº†ä¸ç®¡äº†ï¼Œæ€»ä¹‹æ‰¾åˆ°äº†è§£å†³åŠæ³•ï¼åœ¨å¦å¤–ä¸€ä¸ªå®ä¾‹ä¸­å¯¹è¿ç§»å®ä¾‹ä½¿ç”¨pingå‘½ä»¤é€šè¿‡å®ä¾‹é—´çš„å†…ç½‘æµ‹è¯•åœæœºæ—¶é—´ï¼Œè€Œä¸æ˜¯åœ¨å¤–éƒ¨æœºå™¨ä¸­ä½¿ç”¨pingå‘½ä»¤é€šè¿‡æµ®åŠ¨IPæµ‹è¯•åœæœºæ—¶é—´ã€‚å‘½ä»¤å¦‚ä¸‹ï¼š
sudo ping instance_internal_ip -i 0.001 &gt;&gt; ping.log

åè®°å› ä¸ºå®ä¾‹è¿ç§»ä¼šæ­»æœºï¼Œæ‰€ä»¥å¼€å§‹äº†æŠ˜è…¾ã€‚æŠ˜è…¾äº†ä¸€å¤§åœˆï¼Œé‡å¯æ‰€æœ‰èŠ‚ç‚¹ï¼Œé‡è£…è®¡ç®—èŠ‚ç‚¹ï¼Œé‡è£…ç³»ç»Ÿï¼Œé‡è£…OpenStackï¼Œæœ€åå‘ç°å®ä¾‹è¿ç§»ä¾ç„¶ä¼šæ­»æœºï¼è¿™å°±æ’é™¤äº†ç¡¬ä»¶é—®é¢˜ï¼Œä¹Ÿæ’é™¤äº†è½¯ä»¶é—®é¢˜ã€‚å¥½åœ¨æœ€åçµå…‰ä¸€ç°çŒœæµ‹æ˜¯hostsçš„é—®é¢˜ï¼Œä¸ç„¶è¿™ä¸ªå‘æ˜¯æ€ä¹ˆéƒ½çˆ¬ä¸å‡ºä¸æ¥äº†ã€‚ã€‚ã€‚åªæ˜¯æ²¡æƒ³åˆ°åˆšçˆ¬å‡ºä¸€ä¸ªå‘ï¼Œåˆè·Œè¿›äº†ä¸€ä¸ªå‘ï¼Œä¿®æ”¹äº†hostsä¸æ­»æœºï¼Œåªæ˜¯åˆšå¥½é‚£å‡ æ¬¡å®éªŒéƒ½æ²¡æ­»æœºï¼åœ¨ä½¿ç”¨äº†é—´éš”1msçš„pingå‘½ä»¤ä¹‹åï¼Œæ­»æœºä¾ç„¶é¢‘ç¹ã€‚å†æ¬¡æŠ˜è…¾OpenStacké…ç½®ï¼Œå¤±è´¥ã€‚å†æ¬¡ä»ç½‘ç»œæ–¹é¢è€ƒè™‘ï¼Œç»ˆäºæ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆï¼Œå¤ªä¸å®¹æ˜“äº†ï¼
ä»Šå¤©ï¼ˆ3æœˆ24æ—¥ï¼‰ç»ˆäºä¿®å¤äº†å®éªŒç¯å¢ƒï¼Œä½†æ˜¯ï¼Œå·²ç»é”™è¿‡äº†cloud2019çš„deadlineã€‚æœ‰äº›é—æ†¾ï¼Œä¸è¿‡å’Œæ¯•ä¸šè®ºæ–‡ç›¸æ¯”ï¼Œåªèƒ½å…ˆç‰ºç‰²å°è®ºæ–‡äº†ã€‚è¿‘æœŸè¿˜æœ‰ä¼šè®®ï¼ŒåŠ æŠŠåŠ²ï¼Œåšå®éªŒï¼Œå†™è®ºæ–‡ï¼ŒæŠ•ç¨¿ï¼
ä¹¦ç­¾openstackä¸­å½»åº•åˆ é™¤è®¡ç®—èŠ‚ç‚¹çš„æ“ä½œè®°å½•
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
        <tag>ansible</tag>
        <tag>kolla</tag>
      </tags>
  </entry>
  <entry>
    <title>sysbenchçš„åŸºæœ¬ç”¨æ³•å’Œç»“æœç»˜å›¾</title>
    <url>/dev-sysbench-usage-and-plot/</url>
    <content><![CDATA[sysbenchç®€ä»‹sysbenchæ˜¯ä¸€ä¸ªåŸºäºLuaJITçš„å¯ç¼–å†™è„šæœ¬çš„å¤šçº¿ç¨‹åŸºå‡†æµ‹è¯•å·¥å…·ã€‚å®ƒæœ€å¸¸ç”¨äºæ•°æ®åº“åŸºå‡†æµ‹è¯•ï¼Œä½†ä¹Ÿå¯ç”¨äºåˆ›å»ºä¸æ¶‰åŠæ•°æ®åº“æœåŠ¡å™¨çš„ä»»æ„å¤æ‚å·¥ä½œè´Ÿè½½ã€‚
æœ¬æ–‡æ¥ç ”ç©¶ä¸€ä¸‹sysbenchçš„å®‰è£…ä½¿ç”¨æ–¹æ³•ï¼Œä»¥åŠæµ‹è¯•ç»“æœçš„ç»˜å›¾æ–¹æ³•ã€‚


å®‰è£…éƒ¨ç½²å‚è€ƒSysbenchç¯å¢ƒæ­å»ºå’Œsysbenché¡¹ç›®ï¼Œè¿›è¡Œsysbenchçš„å®‰è£…éƒ¨ç½²ã€‚
å®‰è£…mysql1ã€å®‰è£…mysqlæ•°æ®åº“ã€‚sudo apt-get install mysql-server mysql-client
æ¥ä¸‹æ¥ä¸‰æ­¥æ˜¯å¯é€‰æ“ä½œã€‚
2ã€sudo vim /etc/mysql/mysql.conf.d/mysqld.cnfï¼Œä¿®æ”¹ç»‘å®šIP
bind-address            = 0.0.0.0

3ã€é‡å¯mysqlsudo service mysql restart
4ã€æµ‹è¯•ç™»å½•mysql -u root -h &lt;hostip&gt; -p
å®‰è£…sysbench1ã€å®‰è£…sysbench
curl -s https://packagecloud.io/install/repositories/akopytov/sysbench/script.deb.sh | sudo bashsudo apt -y install sysbench
åŠ¡å¿…å…ˆä¸‹è½½è„šæœ¬å¹¶æ‰§è¡Œï¼Œå¦åˆ™ç›´æ¥apt installå®‰è£…çš„sysbenchç‰ˆæœ¬å¤ªä½ï¼Œä¸æ”¯æŒreport-intervalå‚æ•°ã€‚
2ã€mysql -u root -pï¼Œåˆ›å»ºæ•°æ®åº“
create database sbtest;

3ã€éªŒè¯å®‰è£…sysbench --version
sysbenchæŒ‡ä»¤Usage:  sysbench [options]... [testname] [command]Commands implemented by most tests: prepare run cleanup helpGeneral options:  --threads=N                     number of threads to use [1]  --events=N                      limit for total number of events [0]  --time=N                        limit for total execution time in seconds [10]  --forced-shutdown=STRING        number of seconds to wait after the --time limit before forcing shutdown, or &#x27;off&#x27; to disable [off]  --thread-stack-size=SIZE        size of stack per thread [64K]  --rate=N                        average transactions rate. 0 for unlimited rate [0]  --report-interval=N             periodically report intermediate statistics with a specified interval in seconds. 0 disables intermediate reports [0]  --report-checkpoints=[LIST,...] dump full statistics and reset all counters at specified points in time. The argument is a list of comma-separated values representing the amount of time in seconds elapsed from start of test when report checkpoint(s) must be performed. Report checkpoints are off by default. []  --debug[=on|off]                print more debugging info [off]  --validate[=on|off]             perform validation checks where possible [off]  --help[=on|off]                 print help and exit [off]  --version[=on|off]              print version and exit [off]  --config-file=FILENAME          File containing command line options  --tx-rate=N                     deprecated alias for --rate [0]  --max-requests=N                deprecated alias for --events [0]  --max-time=N                    deprecated alias for --time [0]  --num-threads=N                 deprecated alias for --threads [1]Pseudo-Random Numbers Generator options:  --rand-type=STRING random numbers distribution &#123;uniform,gaussian,special,pareto&#125; [special]  --rand-spec-iter=N number of iterations used for numbers generation [12]  --rand-spec-pct=N  percentage of values to be treated as &#x27;special&#x27; (for special distribution) [1]  --rand-spec-res=N  percentage of &#x27;special&#x27; values to use (for special distribution) [75]  --rand-seed=N      seed for random number generator. When 0, the current time is used as a RNG seed. [0]  --rand-pareto-h=N  parameter h for pareto distribution [0.2]Log options:  --verbosity=N verbosity level &#123;5 - debug, 0 - only critical messages&#125; [3]  --percentile=N       percentile to calculate in latency statistics (1-100). Use the special value of 0 to disable percentile calculations [95]  --histogram[=on|off] print latency histogram in report [off]General database options:  --db-driver=STRING  specifies database driver to use (&#x27;help&#x27; to get list of available drivers) [mysql]  --db-ps-mode=STRING prepared statements usage mode &#123;auto, disable&#125; [auto]  --db-debug[=on|off] print database-specific debug information [off]Compiled-in database drivers:  mysql - MySQL driver  pgsql - PostgreSQL drivermysql options:  --mysql-host=[LIST,...]          MySQL server host [localhost]  --mysql-port=[LIST,...]          MySQL server port [3306]  --mysql-socket=[LIST,...]        MySQL socket  --mysql-user=STRING              MySQL user [sbtest]  --mysql-password=STRING          MySQL password []  --mysql-db=STRING                MySQL database name [sbtest]  --mysql-ssl[=on|off]             use SSL connections, if available in the client library [off]  --mysql-ssl-cipher=STRING        use specific cipher for SSL connections []  --mysql-compression[=on|off]     use compression, if available in the client library [off]  --mysql-debug[=on|off]           trace all client library calls [off]  --mysql-ignore-errors=[LIST,...] list of errors to ignore, or &quot;all&quot; [1213,1020,1205]  --mysql-dry-run[=on|off]         Dry run, pretend that all MySQL client API calls are successful without executing them [off]pgsql options:  --pgsql-host=STRING     PostgreSQL server host [localhost]  --pgsql-port=N          PostgreSQL server port [5432]  --pgsql-user=STRING     PostgreSQL user [sbtest]  --pgsql-password=STRING PostgreSQL password []  --pgsql-db=STRING       PostgreSQL database name [sbtest]Compiled-in tests:  fileio - File I/O test  cpu - CPU performance test  memory - Memory functions speed test  threads - Threads subsystem performance test  mutex - Mutex performance testSee &#x27;sysbench &lt;testname&gt; help&#x27; for a list of options for each test.

sysbenchå®è·µå‚è€ƒHow to Benchmark Your System (CPU, File IO, MySQL) with Sysbenchå’Œä½¿ç”¨sysbenchå¯¹MySQLè¿›è¡Œå‹åŠ›æµ‹è¯•è¿›è¡Œæ€§èƒ½æµ‹è¯•ã€‚
CPUä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æµ‹è¯•CPUæ€§èƒ½ï¼šsysbench cpu --cpu-max-prime=20000 runtotal timeè¶Šå°ï¼Œè¯´æ˜CPUæ€§èƒ½è¶Šå¥½ã€‚
Mysql1ã€åˆ›å»ºæµ‹è¯•æ•°æ®
sysbench /usr/share/sysbench/oltp_read_only.lua \--db-driver=mysql \--mysql-host=127.0.0.1 \--mysql-db=sbtest  \--mysql-user=root \--mysql-password=voidking \--mysql-socket=/var/run/mysqld/mysqld.sock \--tables=10 \--table-size=100000 \--threads=8 \--events=100000  \prepare

2ã€æµ‹è¯•
time sysbench /usr/share/sysbench/oltp_read_only.lua \--db-driver=mysql \--mysql-host=127.0.0.1 \--mysql-db=sbtest  \--mysql-user=root \--mysql-password=voidking \--mysql-socket=/var/run/mysqld/mysqld.sock \--tables=10 \--table-size=100000 \--threads=8 \--events=100000  \run
æ¯ç§’çš„transactionsè¶Šé«˜ï¼Œè¯´æ˜æ€§èƒ½è¶Šå¥½ã€‚
3ã€æµ‹è¯•å‘½ä»¤2
time sysbench /usr/share/sysbench/oltp_read_only.lua \--db-driver=mysql \--mysql-host=127.0.0.1 \--mysql-db=sbtest  \--mysql-user=root \--mysql-password=voidking \--mysql-socket=/var/run/mysqld/mysqld.sock \--tables=10 \--table-size=100000 \--threads=8 \--events=0 \--time=30 \run

4ã€æ¸…ç†æ•°æ®ï¼ˆå¯é€‰ï¼‰
time sysbench /usr/share/sysbench/oltp_read_only.lua \--db-driver=mysql \--mysql-host=127.0.0.1 \--mysql-db=sbtest  \--mysql-user=root \--mysql-password=voidking \--mysql-socket=/var/run/mysqld/mysqld.sock \--tables=10 \--table-size=100000 \--threads=8 \--events=0 \--time=30 \cleanup

ç»˜å›¾sysbenchç»Ÿè®¡æ•°æ®æµ‹è¯•æå®šäº†ï¼Œæ•°æ®å‘¢ï¼Ÿæ¯ç§’é’Ÿçš„transactionsæ•°æ®å‘¢ï¼Ÿå…³é”®åœ¨äºreport-intervalå‚æ•°ã€‚ä¿®æ”¹æµ‹è¯•å‘½ä»¤ä¸ºï¼š
sysbench /usr/share/sysbench/oltp_read_only.lua \--db-driver=mysql \--mysql-host=127.0.0.1 \--mysql-db=sbtest  \--mysql-user=root \--mysql-password=voidking \--mysql-socket=/var/run/mysqld/mysqld.sock \--tables=10 \--table-size=100000 \--threads=8 \--events=0 \--time=30 \--report-interval=5 \run &gt;&gt; sysbench.log

sysbench.logå†…å®¹å¦‚ä¸‹ï¼š
sysbench 1.0.16 (using bundled LuaJIT 2.1.0-beta2)Running the test with following options:Number of threads: 8Report intermediate results every 5 second(s)Initializing random number generator from current timeInitializing worker threads...Threads started![ 5s ] thds: 8 tps: 792.49 qps: 12698.90 (r/w/o: 11112.31/0.00/1586.59) lat (ms,95%): 11.24 err/s: 0.00 reconn/s: 0.00[ 10s ] thds: 8 tps: 782.20 qps: 12511.60 (r/w/o: 10947.20/0.00/1564.40) lat (ms,95%): 11.04 err/s: 0.00 reconn/s: 0.00[ 15s ] thds: 8 tps: 784.80 qps: 12561.53 (r/w/o: 10991.94/0.00/1569.59) lat (ms,95%): 11.04 err/s: 0.00 reconn/s: 0.00[ 20s ] thds: 8 tps: 808.85 qps: 12935.60 (r/w/o: 11317.90/0.00/1617.70) lat (ms,95%): 10.84 err/s: 0.00 reconn/s: 0.00[ 25s ] thds: 8 tps: 795.95 qps: 12737.76 (r/w/o: 11145.86/0.00/1591.89) lat (ms,95%): 10.84 err/s: 0.00 reconn/s: 0.00[ 30s ] thds: 8 tps: 816.80 qps: 13065.00 (r/w/o: 11431.60/0.00/1633.40) lat (ms,95%): 10.65 err/s: 0.00 reconn/s: 0.00SQL statistics:    queries performed:        read:                            334810        write:                           0        other:                           47830        total:                           382640    transactions:                        23915  (796.79 per sec.)    queries:                             382640 (12748.68 per sec.)    ignored errors:                      0      (0.00 per sec.)    reconnects:                          0      (0.00 per sec.)General statistics:    total time:                          30.0123s    total number of events:              23915Latency (ms):         min:                                    7.65         avg:                                   10.04         max:                                   32.13         95th percentile:                       10.84         sum:                               240031.54Threads fairness:    events (avg/stddev):           2989.3750/3.74    execution time (avg/stddev):   30.0039/0.00

ç„¶åæŠŠå¯ä»¥ç»˜å›¾çš„æ•°æ®å•ç‹¬æå–å‡ºæ¥ï¼šcat sysbench.log | grep tps &gt; sysbench.dat 
gnuplotç»˜å›¾# graph titleset title &quot;&quot;set key below box 1# x-axis labelset xlabel &quot;time(ms)&quot;# y-axis labelset ylabel &quot;queries per second&quot;set yrange[10000:15000]set ytics 500plot &quot;sysbench.dat&quot; using 2:9 with linespoints title &quot;sysbench0&quot;,\pause mouse

åè®°è‡³æ­¤ï¼Œsysbenchçš„ä½¿ç”¨æ–¹æ³•å’Œç»˜å›¾æ–¹æ³•å°±åŸºæœ¬æŒæ¡äº†ã€‚æ›´è¯¦ç»†å’Œé«˜é˜¶çš„ç”¨æ³•ï¼Œéœ€è¦çš„æ—¶å€™å†å»å­¦ä¹ ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>linux</tag>
        <tag>ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>MediaWikiå®‰è£…ä¸é…ç½®</title>
    <url>/dev-mediawiki-install-and-config/</url>
    <content><![CDATA[MediaWikiç®€ä»‹MediaWikiå…¨çƒæœ€è‘—åçš„å¼€æºwikiç¨‹åºï¼Œè¿è¡ŒäºPHP+MySQLç¯å¢ƒã€‚MediaWikiä»2002å¹´2æœˆ25æ—¥è¢«ä½œä¸ºç»´åŸºç™¾ç§‘å…¨ä¹¦çš„ç³»ç»Ÿè½¯ä»¶ï¼Œå¹¶æœ‰å¤§é‡å…¶ä»–åº”ç”¨å®ä¾‹ã€‚MediaWikiçš„å¼€å‘å¾—åˆ°ç»´åŸºåª’ä½“åŸºé‡‘ä¼šçš„æ”¯æŒã€‚
æœ¬æ–‡ï¼Œå°±æ¥ç ”ç©¶ä¸€ä¸‹MediaWikiçš„å®‰è£…å’Œé…ç½®ï¼Œæ•°æ®åº“å’ŒWebç¨‹åºä½äºä¸åŒçš„ä¸»æœºã€‚ä¸»è¦å‚è€ƒUbuntu 16.04 å®‰è£… MediaWikiå’ŒManual:Running MediaWiki on Debian or Ubuntuã€‚


ç¯å¢ƒå‡†å¤‡æ•°æ®åº“æ•°æ®åº“ä½¿ç”¨mysqlï¼Œä¸‹é¢åœ¨ä¸»æœºAï¼ˆIPä¸º10.0.0.19ï¼‰ä¸­è¿›è¡Œå®‰è£…é…ç½®ã€‚1ã€å®‰è£…sudo apt-get install mysql-server mysql-clientå®‰è£…è¿‡ç¨‹ä¸­è®¾ç½®æ•°æ®åº“rootå¯†ç ã€‚
2ã€sudo mysql -u root -pç™»å½•mysqlï¼Œå¦‚ä¸‹é…ç½®ï¼š
create database wikidb;create user &#x27;wiki&#x27;@&#x27;%&#x27; identified by &#x27;voidking&#x27;;grant all privileges on wikidb.* to &#x27;wiki&#x27;@&#x27;%&#x27;;flush privileges;quit;

3ã€sudo vim /etc/mysql/mysql.conf.d/mysqld.cnfï¼Œä¿®æ”¹ç»‘å®šIP
bind-address            = 0.0.0.0

4ã€é‡å¯mysqlsudo service mysql restart
5ã€æµ‹è¯•ç™»å½•mysql -u wiki -h 10.0.0.19 -p
Apacheå’ŒPHPåœ¨ä¸»æœºBä¸­å®‰è£…Apacheå’ŒPHP
sudo apt-get install -y apache2 php php-mysql libapache2-mod-php php-xml php-mbstring 

å®‰è£…éƒ¨ç½²åœ¨ä¸»æœºBï¼ˆIPä¸º10.0.0.20ï¼‰ä¸­å®‰è£…mediawikiï¼Œæ­¥éª¤å¦‚ä¸‹ã€‚
1ã€ä¸‹è½½mediawiki
cd /tmp/wget https://releases.wikimedia.org/mediawiki/1.32/mediawiki-1.32.1.tar.gz

2ã€è§£å‹é‡å‘½å
tar -xvzf /tmp/mediawiki-*.tar.gzsudo mkdir /var/lib/mediawikisudo mv mediawiki-*/* /var/lib/mediawiki

3ã€åˆ›å»ºé“¾æ¥
sudo ln -s /var/lib/mediawiki /var/www/html/mediawiki

4ã€é‡å¯apachesudo service apache2 restart
5ã€ç«¯å£æ˜ å°„æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ­¤æ—¶mediawikiçš„è®¿é—®åœ°å€ä¸ºï¼š
http://10.0.0.20/mediawiki/http://10.0.0.20/mediawiki/mw-config/index.php
ä½†æ˜¯ä¸»æœºBçš„IPæ— æ³•ç›´æ¥è®¿é—®ï¼Œæ‰€ä»¥å‚è€ƒã€Šiptableså®ç°ç«¯å£æ˜ å°„ã€‹è¿›è¡Œç«¯å£æ˜ å°„ï¼Œæ˜ å°„åmediawikiçš„è®¿é—®åœ°å€ä¸ºï¼š
http://172.16.101.144:2080/mediawiki/http://172.16.101.144:2080/mediawiki/mw-config/index.php

6ã€æµ‹è¯•è®¿é—®è®¿é—®æ˜ å°„åçš„åœ°å€ï¼Œæµè§ˆå™¨å±…ç„¶ä¸è§£æphpæ–‡ä»¶ï¼Œç›´æ¥å†™ä¸‹è½½phpæ–‡ä»¶ã€‚è¿™æ˜¯mediawikiçš„bugå—ï¼Ÿæµ‹è¯•ä¸€ä¸‹ï¼Œåœ¨/var/www/htmlä¸­åˆ›å»ºindex.phpï¼Œå†…å®¹ä¸ºï¼š
&lt;?php    phpinfo();?&gt;
æµè§ˆå™¨è®¿é—®http://172.16.101.144:2080/index.phpï¼Œæ­£å¸¸è§£æã€‚çŒœæµ‹æ˜¯mediawikiçš„é”…ï¼Œæ¢äº†äº”ä¸ªç‰ˆæœ¬çš„mediawikiï¼Œå±…ç„¶å­˜åœ¨åŒæ ·çš„é—®é¢˜ã€‚è«éï¼Œæ˜¯å› ä¸ºè®¾ç½®äº†ç«¯å£æ˜ å°„ï¼Ÿ
å‚è€ƒã€ŠLinuxä¸‹ä½¿ç”¨VirtualBoxã€‹ï¼Œè®¿é—®linuxå›¾å½¢ç•Œé¢ï¼Œç„¶åè¾“å…¥firefoxå¯åŠ¨ç«ç‹æµè§ˆå™¨ï¼Œè®¿é—®åœ°å€ï¼š
http://10.0.0.20/mediawiki/http://10.0.0.20/mediawiki/mw-config/index.php
æ­£å¸¸è§£æé¡µé¢ï¼Œçœ‹æ¥æ˜¯ç¡®å®æ˜¯å› ä¸ºç«¯å£æ˜ å°„ã€‚
7ã€åœ¨æµè§ˆå™¨ä¸­è¿›è¡Œmediawikiçš„åˆå§‹åŒ–ï¼Œä¸»è¦æ˜¯mysqlç›¸å…³é…ç½®ï¼ŒæŒ‰ç…§ä¸»æœºAä¸­çš„mysqlé…ç½®æ¥å¡«å†™ã€‚
8ã€å®Œæˆåä¸‹è½½LocalSettings.phpï¼Œæ‹·è´LocalSettings.phpåˆ°/var/lib/mediawiki/ç›®å½•ä¸­ã€‚
9ã€æµ‹è¯•è®¿é—®
http://172.16.101.144:2080/mediawiki/index.php/Main_Pagehttp://10.0.0.20/mediawiki/index.php/Main_Page
å¤–éƒ¨é€šè¿‡ç«¯å£æ˜ å°„è®¿é—®ï¼Œå†…éƒ¨é€šè¿‡çœŸå®IPè®¿é—®ï¼Œéƒ½æ­£å¸¸ã€‚è‡³æ­¤ï¼Œå¤§åŠŸå‘Šæˆï¼Œniceã€‚
ä¹¦ç­¾TPC-Wå®˜ç½‘
TPC-W-University of Wisconsin
TPC-Wå®‰è£…ä¸é…ç½®ï¼ˆå¨æ–¯åº·æ˜Ÿå¤§å­¦Javaç‰ˆï¼‰
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>apache</tag>
      </tags>
  </entry>
  <entry>
    <title>è™šæ‹Ÿæœºåœ¨çº¿è¿ç§»å®éªŒV2â€”â€”ä¸Š</title>
    <url>/dev-openstack-vm-live-migration-experiment-v2-0/</url>
    <content><![CDATA[å‰è¨€ã€Šè™šæ‹Ÿæœºåœ¨çº¿è¿ç§»å®éªŒã€‹ä¸€æ–‡ä¸­ï¼Œè¿›è¡Œäº†ä¸€äº›è™šæ‹Ÿæœºè¿ç§»å®éªŒï¼Œå¹¶ä¸”è®°å½•äº†è¿ç§»è¿‡ç¨‹ä¸­çš„æŒ‡æ ‡æ•°æ®ã€‚ä½†æ˜¯ï¼Œå®éªŒç¯å¢ƒæ˜¯æ­å»ºåœ¨VirtualBoxè™šæ‹Ÿæœºä¸­çš„ï¼Œæœ€ç»ˆçš„å®éªŒç»“æœä¸ç†æƒ³ï¼Œä¼šå‡ºç°åœæœºæ—¶é—´è¿‡é•¿ï¼Œè¿ç§»åå®ä¾‹å¡ä½ç­‰é—®é¢˜ã€‚è€Œä¸”å—é™äºè™šæ‹Ÿæœºçš„å¤§å°ï¼Œæ— æ³•åˆ›å»ºm1.xlargeè¿™æ ·çš„å¤§å‹å®ä¾‹ã€‚
æœ€è¿‘å‚ç…§ã€ŠUbuntu16ä½¿ç”¨Kollaå®‰è£…OpenStackã€‹å’Œã€ŠKollaå®‰è£…OpenStackå¤šèŠ‚ç‚¹ã€‹ï¼Œåœ¨ç‰©ç†æœºç¯å¢ƒä¸­é‡æ–°æ­å»ºäº†OpenStacké›†ç¾¤ï¼Œä¸‰ä¸ªèŠ‚ç‚¹åˆ†åˆ«ä¸ºcontrollerï¼ˆnetworkï¼‰ã€compute1ã€compute2ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ç‰©ç†æœºä¸­é‡æ–°è¿›è¡Œè¿ç§»å®éªŒï¼Œæœ¬æ–‡è®°å½•ä¸€ä¸‹å®éªŒçš„æ­¥éª¤å’Œç»“æœã€‚


å®ä¾‹å‡†å¤‡1ã€åœ¨horizonæ§åˆ¶å°ï¼Œé¡¹ç›®ï¼Œè®¡ç®—ï¼Œé•œåƒã€‚ä½¿ç”¨xenial-server-cloudimg-amd64-disk1.imgé•œåƒåˆ›å»ºubuntu16çš„é•œåƒæ¨¡æ¿ã€‚
2ã€åˆ›å»ºå®ä¾‹ç±»å‹m1.tiny2ï¼ŒCPUä¸ªæ•°ä¸º1ï¼Œå†…å­˜ä¸º512Mï¼Œç£ç›˜ä¸º5GBã€‚
3ã€ä½¿ç”¨ubuntu16çš„é•œåƒæ¨¡æ¿åˆ›å»ºå®ä¾‹ubuntu0ã€ubuntu1ã€ubuntu2ã€ubuntu3ã€ubuntu4ï¼Œå®ä¾‹ç±»å‹åˆ†åˆ«é€‰æ‹©m1.tiny2ã€m1.smallã€m1.mediumã€m1.largeã€m1.xlargeã€‚ä¹‹æ‰€ä»¥ä¸ä½¿ç”¨é»˜è®¤çš„m1.tinyï¼Œæ˜¯å› ä¸ºm1.tinyçš„ç£ç›˜å¤ªå°ï¼Œåªæœ‰1Gï¼Œæ— æ³•å®‰è£…ubuntu16ã€‚

4ã€åˆ›å»ºæˆåŠŸåï¼Œåˆ†åˆ«åˆ†é…æµ®åŠ¨IPã€‚
PSï¼šåœ¨è¿›è¡Œè¿ç§»å®éªŒæ—¶ï¼Œå…³é—­å…¶ä»–å®ä¾‹ï¼Œé˜²æ­¢èµ„æºå ç”¨äº§ç”Ÿå¹²æ‰°ã€‚
è„šæœ¬å’Œè½¯ä»¶å‡†å¤‡æ€»è¿ç§»æ—¶é—´åœ¨ä¸¤ä¸ªè®¡ç®—èŠ‚ç‚¹ï¼Œæ–°å»ºtotal-time.shè„šæœ¬ï¼š
#!/bin/bashtime1=`grep nova.virt.libvirt.migration /var/lib/docker/volumes/kolla_logs/_data/nova/nova-compute.log | tail -n 1 |awk &#x27;&#123;print $2&#125;&#x27;`;time2=`grep &#x27;VM Stopped&#x27; /var/lib/docker/volumes/kolla_logs/_data/nova/nova-compute.log | tail -n 1 | awk &#x27;&#123;print $2&#125;&#x27;`;# è®¡ç®—æ—¶é—´å·®time=$(($(date +%s -d $time2) - $(date +%s -d $time1)));echo &quot;$time s&quot;;

åœæœºæ—¶é—´åœ¨æ§åˆ¶èŠ‚ç‚¹ï¼Œæ–°å»ºdowntime.shè„šæœ¬ï¼š
#!/bin/bashtransmitted=`grep &#x27;packets transmitted&#x27; ping.log | tail -n 1 | awk &#x27;&#123;print $1&#125;&#x27;`received=`grep &#x27;packets transmitted&#x27; ping.log | tail -n 1 | awk &#x27;&#123;print $4&#125;&#x27;`lost=`expr $transmitted - $received`echo &quot;downtime is $lost ms&quot;

è¿ç§»æ•°æ®é‡åœ¨ä¸¤ä¸ªè®¡ç®—èŠ‚ç‚¹ï¼Œå®‰è£…iptraf-ngã€‚apt install iptraf-ng
apacheåœ¨ubuntu0ç­‰å®ä¾‹ä¸­å®‰è£…apacheï¼šapt install apache2å®‰è£…çš„é»˜è®¤ç‰ˆæœ¬ä¸ºApache/2.4.18 (Ubuntu)ã€‚
apachebenchåœ¨æ§åˆ¶èŠ‚ç‚¹ï¼Œå®‰è£…apachebenchï¼šapt install apache2-utils
åœ¨æ§åˆ¶èŠ‚ç‚¹ï¼Œæ–°å»ºformat.shè„šæœ¬ï¼š
#!/bin/bashfilename=$1start_time=`awk &#x27;&#123;print $6&#125;&#x27; $filename | grep -v &#x27;wait&#x27; | sort | uniq -c|head -1|awk &#x27;&#123;print $2&#125;&#x27;`awk &#x27;&#123;print $6&#125;&#x27; $filename | grep -v &#x27;wait&#x27; | sort | uniq -c|awk -v t=$start_time &#x27;&#123;print $2-t,$1&#125;&#x27; &gt; f-$filename# å¡«å……0array_str=`cat f-$filename | awk &#x27;&#123;print $1&#125;&#x27;`array_str2=`cat f-$filename | awk &#x27;&#123;print $2&#125;&#x27;`IPS=&#x27; &#x27;array=($array_str)array2=($array_str2)index=0count=0max=101echo &quot;#Throutput-$filename&quot; &gt; ff-$filenamewhile ( [ $index -lt $max ] &amp;&amp; [ $count -lt $max ] )do    if [[ $&#123;array[index]&#125; == $count ]]    then        echo &quot;$count $&#123;array2[index]&#125;&quot; &gt;&gt; ff-$filename        index=`expr $index + 1`        count=`expr $count + 1`    else        echo &quot;$count 0&quot;  &gt;&gt; ff-$filename        count=`expr $count + 1`    fidone

xshellä½¿ç”¨xshellï¼Œæ‰“å¼€3ä¸ªcontrollerèŠ‚ç‚¹çš„shellï¼Œä¸€ä¸ªç”¨æ¥pingå®ä¾‹ï¼Œä¸€ä¸ªç”¨æ¥è¿è¡Œapachebenchï¼Œä¸€ä¸ªç”¨æ¥æ‰§è¡Œè¿ç§»å‘½ä»¤ã€‚æ‰“å¼€2ä¸ªcompute1èŠ‚ç‚¹çš„shellï¼Œä¸€ä¸ªç”¨æ¥è¿è¡Œiptraf-ngï¼Œä¸€ä¸ªç”¨æ¥æ‰§è¡Œtotal-time.shè„šæœ¬ã€‚æ‰“å¼€2ä¸ªcompute2èŠ‚ç‚¹çš„shellï¼Œä¸€ä¸ªç”¨æ¥è¿è¡Œiptraf-ngï¼Œä¸€ä¸ªç”¨æ¥æ‰§è¡Œtotal-time.shè„šæœ¬ã€‚
å®éªŒæµç¨‹å‡è®¾å½“å‰åªå¯åŠ¨äº†ubuntu0å®ä¾‹ï¼Œnova show ubuntu0ä½äºcompute1èŠ‚ç‚¹ã€‚
1ã€åœ¨å®ä¾‹ä¸­å¯åŠ¨å‹åŠ›æµ‹è¯•è½¯ä»¶ï¼Œæˆ–è€…åœ¨ä¸¤ä¸ªcomputeèŠ‚ç‚¹ä¸­å¯åŠ¨ç½‘ç»œæ•…éšœæ¨¡æ‹Ÿè½¯ä»¶ã€‚ï¼ˆflavorå®éªŒä¸­ä¸éœ€è¦ï¼‰
2ã€åœ¨ä¸¤ä¸ªcomputeèŠ‚ç‚¹å¯åŠ¨iptraf-ngï¼Œé…ç½®å‚è€ƒã€Šè™šæ‹Ÿæœºåœ¨çº¿è¿ç§»çš„æ€§èƒ½ç»Ÿè®¡ã€‹ã€‚
3ã€åœ¨ä¸‰ä¸ªcontrollerçš„shellä¸­åˆ†åˆ«è¾“å…¥å¥½ä¸€æ¡å‘½ä»¤ï¼š
sudo ping 172.16.0.19 -i 0.001 &gt;&gt; ping.logab -g t0.dat -t 100 -n 1000000 http://172.16.0.19/nova live-migration ubuntu0 compute2
ç„¶åï¼Œä¾æ¬¡å›è½¦æ‰§è¡Œè¿™äº›å‘½ä»¤ã€‚
4ã€è§‚å¯ŸcomputeèŠ‚ç‚¹çš„iptraf-ngï¼Œç­‰åˆ°æµé‡ä¸å†å¢åŠ ï¼ŒCtrl+Cç»“æŸpingå‘½ä»¤ã€‚
5ã€åœ¨controllerèŠ‚ç‚¹æ‰§è¡Œdowntime.shå¾—åˆ°åœæœºæ—¶é—´ï¼Œåœ¨compute1èŠ‚ç‚¹æ‰§è¡Œtotal-time.shå¾—åˆ°è¿ç§»æ—¶é—´ï¼Œåœ¨ä¸¤ä¸ªè®¡ç®—èŠ‚ç‚¹è§‚å¯Ÿiptraf-ngå¾—åˆ°è¿ç§»æ•°æ®é‡ã€‚
6ã€ç­‰åˆ°abå‘½ä»¤ç»“æŸï¼Œæ‰§è¡Œ./format.sh t0.datï¼Œå¾—åˆ°ååé‡æ•°æ®ff-t0.datã€‚
ä»¥ä¸Šæµç¨‹ï¼Œé€‚ç”¨äºæ¥ä¸‹æ¥çš„æ‰€æœ‰å®éªŒã€‚
flavorå®éªŒ1ã€æŒ‰ç…§å®éªŒæµç¨‹ï¼Œåˆ†åˆ«ä½¿ç”¨äº”ä¸ªflavorï¼Œè¿›è¡Œäº”æ¬¡è¿ç§»å®éªŒï¼Œè®°å½•å®éªŒç»“æœã€‚
#Flavor    è¿ç§»æ—¶é—´s    åœæœºæ—¶é—´ms    è¿å‡ºæ•°æ®é‡MB   è¿å…¥æ•°æ®é‡MBtiny    19  483    456  459small   20  533    443  446medium  21  509    491  494large   22  455    592  596xlarge  24  531    829  834

2ã€åŒæ—¶å¾—åˆ°äº”ä¸ªååé‡æ•°æ®æ–‡ä»¶ï¼Œff-t0.datåˆ°ff-t4.datã€‚
ååé‡é—®é¢˜å®éªŒç»“æœç»˜å›¾ï¼Œå‘ç°äº”ç§flavorçš„ååé‡åŸºæœ¬æ²¡æœ‰å·®åˆ«ï¼éƒ½æ˜¯800ä¸Šä¸‹ã€‚ä¸ºäº†è§£å†³apacheååé‡é—®é¢˜ï¼Œå¿…é¡»å¾—ç ”ç©¶ä¸€ä¸‹ã€‚
ä¿®æ”¹apacheé…ç½®æ€è·¯ä¸€ï¼šæé«˜apacheçš„æœ€å¤§è¿æ¥æ•°ã€‚å‚è€ƒå¦‚ä½•è®¾ç½®Apacheä¸­çš„æœ€å¤§è¿æ¥æ•°ã€å¦‚ä½•è®¾ç½®Apacheä¸­çš„æœ€å¤§è¿æ¥æ•°ã€‚
1ã€æŸ¥çœ‹apache moduleapachectl -Vå¯ä»¥çœ‹åˆ°Server MPMä¸ºeventã€‚å¦‚æœè¦æ¢æˆå…¶ä»–MPMï¼Œå¯ä»¥å‚è€ƒUbuntué…ç½®apache2.4çš„é™é€ŸåŠŸèƒ½è¿›è¡Œè®¾ç½®ï¼Œæ¯”å¦‚æ¢æˆpreforkï¼Œè¿™é‡Œæˆ‘ä»¬ä¸è¿›è¡Œæ›´æ¢ã€‚
cd /etc/apache2/mods-enabledsudo ln -s ../mods-available/mpm_prefork.load .sudo ln -s ../mods-available/mpm_prefork.conf .sudo rm mods_event.loadsudo rm mods_event.confsudo service apache2 restart

2ã€å¤‡ä»½é…ç½®
cd /etc/apache2/mods-available/sudo cp mpm_event.conf&#123;,.bak&#125;sudo cp mpm_event.load&#123;,.bak&#125;

3ã€ä¿®æ”¹é…ç½®ç¼–è¾‘/etc/apache2/mods-available/mpm_event.confï¼ŒåŸæ–‡ä»¶ä¸ºï¼š
# event MPM# StartServers: initial number of server processes to start# MinSpareThreads: minimum number of worker threads which are kept spare# MaxSpareThreads: maximum number of worker threads which are kept spare# ThreadsPerChild: constant number of worker threads in each server process# MaxRequestWorkers: maximum number of worker threads# MaxConnectionsPerChild: maximum number of requests a server process serves&lt;IfModule mpm_event_module&gt;        StartServers             2        MinSpareThreads          25        MaxSpareThreads          75        ThreadLimit              64        ThreadsPerChild          25        MaxRequestWorkers        150        MaxConnectionsPerChild   0&lt;/IfModule&gt;# vim: syntax=apache ts=4 sw=4 sts=4 sr noet

å‚è€ƒå…³äºapacheçš„mpm-eventçš„å‚æ•°æ— æ³•è°ƒæ•´é—®é¢˜ï¼Œä¿®æ”¹ä¸ºï¼š
&lt;IfModule mpm_event_module&gt;    ServerLimit              100    StartServers             20    MinSpareThreads          25    MaxSpareThreads          1200#   ThreadLimit              64    ThreadsPerChild          50    MaxRequestWorkers        5000    MaxConnectionsPerChild   10000&lt;/IfModule&gt;
MaxSpareThreadsçš„å‚æ•°è®¾ç½®ï¼Œéœ€è¦æ ¹æ®StartServers*ThreadsPerChild=1000ï¼Œå› æ­¤MaxSpareThreadså¿…é¡»å¤§äº1000ï¼Œåœ¨æ­¤ä¸º1200ï¼Œå¦åˆ™ä¼šæœ‰StartServers-MaxSpareThreads/ThreadsPerChildä¸ªè¿›ç¨‹è¢«æ€æ‰ã€‚
MaxRequestWorkersçš„å‚æ•°è®¾ç½®ï¼Œéœ€è¦æ ¹æ®ServerLimit*ThreadsPerChild=5000ï¼Œå¦åˆ™å¯åŠ¨ä¼šæœ‰è­¦å‘Šã€‚
4ã€é‡å¯apache2sudo service apache2 restart
ç„¶è€Œï¼Œå¹¶æ²¡æœ‰ç”¨ï¼Œååé‡å¹¶æ²¡æœ‰å‘ç”Ÿä»€ä¹ˆå˜åŒ–ï¼Œä¾ç„¶æ˜¯800å·¦å³ï¼Œä¸è¿‡æ³¢åŠ¨å¹…åº¦å˜å¤§äº†ã€‚MPMæ›´æ¢ä¸ºpreforkï¼Œååé‡é™åˆ°äº†700å·¦å³ã€‚
ä¿®æ”¹abå‘½ä»¤æ€è·¯äºŒï¼šapachebenchçš„å‘½ä»¤æœ‰é—®é¢˜ã€‚ä¿®æ”¹abå‘½ä»¤ä¸ºï¼šab -g t0.dat -c 1000 -t 100 -n 10000000 http://172.16.0.19/
è¿™æ¬¡ï¼Œååé‡æœç„¶ä¸Šå»äº†ï¼Œå˜æˆ8000å·¦å³ã€‚ä½†æ˜¯ï¼Œæ‰€æœ‰å®ä¾‹çš„ååé‡éƒ½ä¸Šå»äº†ï¼
æ›´æ¢æµ‹è¯•å·¥å…·æ€è·¯ä¸‰ï¼šæµ‹è¯•å·¥å…·æ¢æˆwebbenchã€‚1ã€å®‰è£…webbench
wget http://soft.vpser.net/test/webbench/webbench-1.5.tar.gztar zxvf webbench-1.5.tar.gzcd webbench-1.5sudo make &amp;&amp; sudo make install

2ã€æµ‹è¯•webbench -c 10000 -t 10 http://172.16.0.19/10sæˆåŠŸäº†80000å·¦å³çš„è¯·æ±‚ï¼Œè¯´æ˜abæµ‹å‡ºçš„ååé‡æ˜¯çœŸå®çš„ã€‚è¿™æ ·çœ‹æ¥ï¼Œé—®é¢˜è¿˜æ˜¯å‡ºåœ¨apacheä¸Šï¼Œååé‡å›ºå®šåœ¨8000å·¦å³ã€‚
æ›´æ¢ä¸ºnginxæ€è·¯å››ï¼šapacheæ›´æ¢ä¸ºnginxã€‚1ã€ä¿®æ”¹apacheçš„ç«¯å£sudo vim /etc/apache2/ports.confï¼Œç«¯å£æ”¹ä¸º8080ã€‚
2ã€å®‰è£…nginx
sudo apt install -y nginxsudo apt update --fix-missingsudo apt install -y nginx

3ã€å†æ¬¡æµ‹è¯•ab -g t0.dat -c 1000 -t 100 -n 10000000 http://172.16.0.19/ååé‡æœ‰æ‰€ä¸Šå‡ï¼Œ9000å·¦å³ï¼Œä½†æ˜¯æœ€å‘çš„åœ°æ–¹åœ¨äºï¼Œæ‰€æœ‰å®ä¾‹éƒ½ä¸Šå‡äº†ï¼Œéƒ½æ˜¯9000å·¦å³ï¼
æé«˜ulimitæ€è·¯äº”ï¼šåœ¨å®ä¾‹ä¸­æé«˜ulimitã€‚
sudo -iulimit -aulimit -i 257178ulimit -u 257178
ç„¶è€Œï¼Œååé‡å¹¶æ²¡æœ‰å˜åŒ–ã€‚
ç½‘ç»œé—®é¢˜è«éï¼Œæ˜¯å› ä¸ºè®¡ç®—æœºç½‘ç»œé—®é¢˜ï¼Ÿäºæ˜¯ï¼Œåœ¨å®ä¾‹ubuntu0ã€ubuntu2ã€ubuntu4å†…éƒ¨ä¸­è¿›è¡Œabæµ‹è¯•ï¼Œååé‡ç»“æœä¸ºï¼š
app ubuntu0 ubuntu2 ubuntu4apache 5298 11290 17706nginx  9380 19745 23124
çœ‹åˆ°è¿™ä¸ªç»“æœï¼Œæ€»ç®—æ„Ÿè§‰åˆç†äº†ã€‚é—®é¢˜ä¹Ÿå¯ä»¥å®šä½äº†ï¼Œç½‘ç»œç“¶é¢ˆã€‚é‚£ä¹ˆæ–°çš„é—®é¢˜æ¥äº†ï¼Œä¸èƒ½åœ¨å®ä¾‹å†…éƒ¨è¿›è¡Œæµ‹è¯•çš„æƒ…å†µä¸‹ï¼Œæ€æ ·æµ‹è¯•å‡ºå‡†ç¡®çš„ååé‡ï¼Ÿ
å®‰è£…åº”ç”¨å¦‚æœèƒ½å¤ŸæŠŠçœŸå®ååé‡é™åˆ°8000ä»¥ä¸‹ï¼Œæ˜¯ä¸æ˜¯å°±å¯ä»¥é€šè¿‡å†…ç½‘æµ‹å‡ºçœŸå®ååé‡äº†ï¼Ÿå¾ˆæœ‰å¯èƒ½ã€‚é‚£ä¹ˆï¼Œå°±å®‰è£…ä¸€ä¸ªæ ‡å‡†æµ‹è¯•åº”ç”¨ï¼Œæ¥è¯•è¯•æ•ˆæœã€‚æ‰¾åˆ°äº†ä¸¤æ¬¾åº”ç”¨ï¼Œmediawikiå’Œtpcwï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©mediawikiï¼Œå‚è€ƒã€ŠMediaWikiå®‰è£…ä¸é…ç½®ã€‹ã€‚
å®‰è£…å¥½mediawikiåè¿›è¡Œabæµ‹è¯•ï¼š
ab -g t0.dat -c 10 -t 100 -n 1000000 http://172.16.0.19/mediawiki/index.php/Main_Page
ubuntu0ååé‡ä¸º30å·¦å³ï¼Œubuntu2çš„ååé‡ä¸º60å·¦å³ã€‚
å®éªŒæµç¨‹2å‡è®¾å½“å‰åªå¯åŠ¨äº†ubuntu0å®ä¾‹ï¼Œnova show ubuntu0ä½äºcompute1èŠ‚ç‚¹ã€‚
1ã€åœ¨å®ä¾‹ä¸­å¯åŠ¨å‹åŠ›æµ‹è¯•è½¯ä»¶ï¼Œæˆ–è€…åœ¨ä¸¤ä¸ªcomputeèŠ‚ç‚¹ä¸­å¯åŠ¨ç½‘ç»œæ•…éšœæ¨¡æ‹Ÿè½¯ä»¶ã€‚ï¼ˆflavorå®éªŒä¸­ä¸éœ€è¦ï¼‰
2ã€åœ¨ä¸¤ä¸ªcomputeèŠ‚ç‚¹å¯åŠ¨iptraf-ngï¼Œé…ç½®å‚è€ƒã€Šè™šæ‹Ÿæœºåœ¨çº¿è¿ç§»çš„æ€§èƒ½ç»Ÿè®¡ã€‹ã€‚
3ã€åœ¨ä¸‰ä¸ªcontrollerçš„shellä¸­åˆ†åˆ«è¾“å…¥å¥½ä¸€æ¡å‘½ä»¤ï¼š
sudo ping 172.16.0.19 -i 0.001 &gt;&gt; ping.logab -g t0.dat -c 10 -t 100 -n 1000000 http://172.16.0.19/mediawiki/index.php/Main_Pagenova live-migration ubuntu0 compute2
ç„¶åï¼Œä¾æ¬¡å›è½¦æ‰§è¡Œè¿™äº›å‘½ä»¤ã€‚
4ã€è§‚å¯ŸcomputeèŠ‚ç‚¹çš„iptraf-ngï¼Œç­‰åˆ°æµé‡ä¸å†å¢åŠ ï¼ŒCtrl+Cç»“æŸpingå‘½ä»¤ã€‚
5ã€åœ¨controllerèŠ‚ç‚¹æ‰§è¡Œdowntime.shå¾—åˆ°åœæœºæ—¶é—´ï¼Œåœ¨compute1èŠ‚ç‚¹æ‰§è¡Œtotal-time.shå¾—åˆ°è¿ç§»æ—¶é—´ï¼Œåœ¨ä¸¤ä¸ªè®¡ç®—èŠ‚ç‚¹è§‚å¯Ÿiptraf-ngå¾—åˆ°è¿ç§»æ•°æ®é‡ã€‚
6ã€ç­‰åˆ°abå‘½ä»¤ç»“æŸï¼Œæ‰§è¡Œ./format.sh t0.datï¼Œå¾—åˆ°ååé‡æ•°æ®ff-t0.datã€‚
ä»¥ä¸Šæµç¨‹ï¼Œé€‚ç”¨äºæ¥ä¸‹æ¥çš„æ‰€æœ‰å®éªŒã€‚
flavorå®éªŒ21ã€æŒ‰ç…§å®éªŒæµç¨‹ï¼Œåˆ†åˆ«ä½¿ç”¨å®‰è£…äº†mediawikiçš„äº”ä¸ªflavorï¼Œè¿›è¡Œäº”æ¬¡è¿ç§»å®éªŒï¼Œè®°å½•å®éªŒç»“æœã€‚ç„¶è€Œï¼Œæ–°çš„é—®é¢˜å‡ºç°äº†ï¼Œå®‰è£…äº†mediawikiçš„flavorï¼Œè¿ç§»æ—¶é—´ç‰¹åˆ«ä¹…ï¼Œè¿ç§»æ•°æ®é‡ç‰¹åˆ«å¤§ï¼Œç­‰åˆ°abå‘½ä»¤ç»“æŸï¼Œè¿ç§»æ‰ä¼šåœæ­¢ã€‚ä¿®æ”¹abå‘½ä»¤ä¸ºï¼š
ab -g t0.dat -t 100 -n 1000000 http://172.16.0.19/mediawiki/index.php/Main_Page
å¯ä»¥æˆåŠŸè¿ç§»ï¼Œä½†æ˜¯å¦ä¸€ä¸ªé—®é¢˜å‡ºç°äº†ï¼Œæ‰€æœ‰å®ä¾‹çš„ååé‡éƒ½ä¸‹é™ä¸º10å·¦å³ï¼Œè¿™æ—¥å­æ²¡å‘è¿‡äº†ï¼
æ˜¯mediawikiçš„é—®é¢˜å—ï¼Ÿåˆ›å»ºä¸€ä¸ªindex.phpæ–‡ä»¶æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œå†…å®¹ä¸ºï¼š
&lt;?php    phpinfo();?&gt;
ä½¿ç”¨abå‘½ä»¤æµ‹è¯•ï¼šab -g t0.dat -c 1000 -t 100 -n 1000000 http://172.16.0.19/index.phpubuntu0ååé‡åœ¨800å·¦å³ï¼Œubuntu2çš„ååé‡åœ¨1200å·¦å³ï¼ŒæŒºä¸é”™çš„ç»“æœã€‚ç„¶è€Œï¼Œå¦‚æœåœ¨abæµ‹è¯•æ—¶è¿›è¡Œè¿ç§»ï¼Œè¿ç§»æ—¶é—´ä¾ç„¶ä¼šç‰¹åˆ«ä¹…ï¼Œè¿ç§»æ•°æ®é‡ä¾ç„¶ä¼šç‰¹åˆ«å¤§ã€‚abå‘½ä»¤åœæ­¢ï¼Œè¿ç§»æˆåŠŸåœæ­¢ï¼›abå‘½ä»¤ä¸åœæ­¢ï¼Œè¿ç§»ç›´åˆ°å¤±è´¥ã€‚å’Œmediawikiå­˜åœ¨åŒæ ·çš„é—®é¢˜ã€‚
åè®°å®éªŒé‡åˆ°ç“¶é¢ˆï¼Œæ‰¾å¶è€å¸ˆå•†é‡åï¼Œå†³å®šä¸å†é€‚ç”¨Apacheè¿™ç§webæœåŠ¡ï¼Œè€Œæ˜¯æ¢æˆç³»ç»ŸæœåŠ¡ï¼Œæ¯”å¦‚è®¡ç®—ä»»åŠ¡ã€‚åœ¨å®ä¾‹å†…éƒ¨è¿è¡ŒæœåŠ¡è®°å½•ç»“æœï¼Œå°±ä¸å­˜åœ¨ç½‘ç»œçš„å½±å“äº†ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>testing</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>apache</tag>
        <tag>openstack</tag>
        <tag>æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>è™šæ‹Ÿæœºåœ¨çº¿è¿ç§»å®éªŒç»“æœç»˜å›¾</title>
    <url>/dev-vm-live-migration-gnuplot/</url>
    <content><![CDATA[å‰è¨€ã€Šè™šæ‹Ÿæœºåœ¨çº¿è¿ç§»å®éªŒã€‹ä¸€æ–‡ä¸­ï¼Œæ¨¡æ‹Ÿäº†CPUå‹åŠ›ã€å†…å­˜å‹åŠ›ã€ç£ç›˜å‹åŠ›è¿˜æœ‰å„ç§ç½‘ç»œæ•…éšœï¼Œå¾—åˆ°äº†è¿™äº›æ¡ä»¶ä¸‹è™šæ‹Ÿæœºåœ¨çº¿è¿ç§»çš„æ€§èƒ½æ•°æ®ã€‚ã€ŠApacheBenchmarkå’Œgnuplotã€‹ä¸€æ–‡ä¸­ï¼Œæ‰¾åˆ°äº†æµ‹è¯•Webåº”ç”¨æ€§èƒ½çš„æ–¹æ³•ï¼Œå­¦ä¹ äº†gnuplotçš„åŸºæœ¬ç”¨æ³•ã€‚
æœ¬æ–‡ï¼Œå°±åˆ©ç”¨gnuplotç»™è¿ç§»è¿‡ç¨‹ä¸­å¾—åˆ°çš„æ€§èƒ½æ•°æ®è¿›è¡Œç»˜å›¾ï¼Œç»˜å›¾ç»“æœç”¨äºå†™è®ºæ–‡ã€‚


æ•°æ®å¤„ç†gnuplotçš„æ•°æ®æ˜¯çº¯æ–‡æœ¬çš„ï¼Œä¸å¸¦å•ä½çš„ï¼ŒæŒ‰åˆ—åˆ†å¸ƒçš„ã€‚é‚£ä¹ˆé¦–å…ˆå°±è¦å¤„ç†ä¸‹æ•°æ®ï¼Œä½¿ä¹‹ç¬¦åˆgnuplotçš„è¦æ±‚ï¼Œä»¥CPUæ•°æ®ä¸ºä¾‹ï¼Œå¤„ç†åçš„æ•°æ®å¦‚ä¸‹ï¼š
#CPUå ç”¨ç‡  è¿ç§»æ—¶é—´    åœæœºæ—¶é—´    è¿å‡ºæ•°æ®é‡   è¿å…¥æ•°æ®é‡0%  18  6.28    283 24810% 20  6.53    353 34120% 19  4.52    323 30030% 20  4.58    354 33840% 21  4.62    336 34750% 20  5.41    355 32360% 19  4.54    303 30970% 21  5.24    356 35580% 19  4.41    351 33890% 17  7.31    328 36299% 19  5.77    351 348

ç»˜å›¾è®¾è®¡ç»˜å›¾ï¼Œæœ€åŸºæœ¬çš„ï¼Œè¦çŸ¥é“ç»˜å›¾çš„ç›®çš„ï¼Œæƒ³è¦æ˜¾ç¤ºå‡ºå“ªäº›ä¿¡æ¯ï¼Ÿç„¶åè€ƒè™‘ç»˜åˆ¶ä»€ä¹ˆå›¾ï¼ŸæŸ±çŠ¶å›¾è¿˜æ˜¯æŠ˜çº¿å›¾ï¼Ÿxè½´æ˜¯ä»€ä¹ˆï¼Ÿyè½´æ˜¯ä»€ä¹ˆï¼Ÿè¦ä¸è¦ç¬¬äºŒåæ ‡è½´ï¼Ÿå¦å¤–ï¼Œå°±è¦è€ƒè™‘åœ¨ä¸€å¼ å›¾é‡Œé¢æ”¾å…¥å“ªäº›ä¿¡æ¯ï¼Œä¸èƒ½å¤ªå°‘ï¼Œæ˜¾å¾—ç©ºæ—·ï¼›ä¸èƒ½å¤ªå¤šï¼Œæ˜¾å¾—æ‚ä¹±ã€‚å¯¹äºè¿ç§»è¿‡ç¨‹ä¸­çš„å››ä¸ªæŒ‡æ ‡ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ã€‚å¯¹äºè¿ç§»æ—¶é—´å’Œåœæœºæ—¶é—´ï¼Œå¯ä»¥æ”¾åˆ°ä¸€å¼ å›¾ï¼ˆå›¾1ï¼‰é‡Œé¢ï¼Œè¿™é‡Œçš„è¿ç§»æ—¶é—´å’Œåœæœºæ—¶é—´éƒ½æ˜¯ç§’çº§ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªåæ ‡è½´ã€‚å¯¹äºè¿ç§»æ•°æ®é‡ï¼Œä¹Ÿå¯ä»¥æ”¾è¿›å›¾1ï¼Œå»ºç«‹ç¬¬äºŒåæ ‡è½´å³å¯ã€‚è€Œå¯¹äºåº”ç”¨ç¨‹åºæ€§èƒ½ï¼Œè¿™ä¸ªå°±éº»çƒ¦äº†ï¼Œç­‰ä¼šå†è®¨è®ºã€‚
CPUä¸è¿ç§»æ€§èƒ½1ã€æŒ‰ç…§ä»¥ä¸Šè®¾è®¡ï¼Œæ–°å»ºcpu.pltï¼Œå†…å®¹å¦‚ä¸‹ï¼š
# graph titleset title &quot;CPU usage, downtime and migration time&quot;set key below box 1# x-axisset xlabel &quot;CPU usage&quot;set format x &quot;%g%%&quot;# y-axisset ylabel &quot;seconds&quot;set yrange[0:25]set ytics 5 nomirror# y2-axisset y2label &quot;MB&quot;set y2range[0:500]set y2tics 100set gridplot &quot;cpu.dat&quot; using 1:2 with linespoints title &quot;migration time&quot;,\    &quot;cpu.dat&quot; using 1:3 with linespoints title &quot;downtime&quot;,\    &quot;cpu.dat&quot; using 1:4 axis x1y2 with linespoints title &quot;transfered data&quot;#pause 5pause mouse

2ã€gnuplot cpu.pltï¼Œæ‰§è¡Œè„šæœ¬ç»˜åˆ¶å›¾ç‰‡çœ‹ä¸Šå»ï¼ŒæŒºä¸é”™çš„ã€‚ä½†æ˜¯ï¼Œå®é™…ä¸Šçš„downtimeåº”è¯¥æ˜¯æ¯«ç§’çº§ï¼Œä¸èƒ½å’Œmigration timeå…±ç”¨yè½´ï¼Œå¦åˆ™çœ‹ä¸å‡ºdowntimeçš„å˜åŒ–ã€‚æ‰€ä»¥ï¼Œæœ€å¥½æŠŠè¿ç§»æ•°æ®é‡æ‹¿å‡ºæ¥å•ç‹¬ç»˜å›¾ï¼Œdowntimeå’Œmigration timeç»˜åˆ¶åœ¨åŒä¸€ä¸ªå›¾ä¸­ï¼Œä½¿ç”¨ä¸åŒçš„åæ ‡ç³»ã€‚
3ã€æ–°å»ºcpu1.pltï¼Œç»˜åˆ¶è¿ç§»æ—¶é—´å’Œåœæœºæ—¶é—´
# graph titleset title &quot;CPU usage, downtime and migration time&quot;set key below box 1# x-axisset xlabel &quot;CPU usage (%)&quot;# y-axisset ylabel &quot;Time (s)&quot;set yrange[0:25]set ytics 5 nomirror# y2-axisset y2label &quot;Time (ms)&quot;set y2range[0:10]set y2tics 2set gridplot &quot;cpu.dat&quot; using 1:2 with linespoints title &quot;migration time (s)&quot;,\    &quot;cpu.dat&quot; using 1:3 axis x1y2 with linespoints title &quot;downtime (ms)&quot;,#pause 5pause mouse

4ã€æ–°å»ºcpu2.pltï¼Œç»˜åˆ¶è¿ç§»æ•°æ®é‡
# graph titleset title &quot;CPU usage and transfered data&quot;set key below box 1# x-axisset xlabel &quot;CPU usage (%)&quot;# y-axisset ylabel &quot;Transfered Data (MB)&quot;set yrange[0:500]set ytics 50plot &quot;cpu.dat&quot; using 1:4 with linespoints title &quot;Source Machine&quot;,\    &quot;cpu.dat&quot; using 1:5 with linespoints title &quot;Target Machine&quot;#pause 5pause mouse

CPUä¸ååé‡1ã€æ€§èƒ½æµ‹è¯•
ab -g cpu0.dat -t 120 -n 10000000 http://10.0.2.154/ab -g cpu80.dat -t 120 -n 10000000 http://10.0.2.154/
ç”Ÿæˆcpu0.datå’Œcpu80.datä¸¤ä¸ªæ–‡ä»¶ã€‚
2ã€å¤„ç†abæ•°æ®ï¼Œè®¡ç®—ååé‡
#!/bin/bashfor var in &#123;0,80&#125;do    start_time=`awk &#x27;&#123;print $6&#125;&#x27; cpu$&#123;var&#125;.dat | grep -v &#x27;wait&#x27; | sort | uniq -c|head -1|awk &#x27;&#123;print $2&#125;&#x27;`    awk &#x27;&#123;print $6&#125;&#x27; cpu$&#123;var&#125;.dat | grep -v &#x27;wait&#x27; | sort | uniq -c|awk -v t=$&#123;start_time&#125; &#x27;&#123;print $2-t,$1&#125;&#x27; &gt; cpu$&#123;var&#125;-t.datdone
ç”Ÿæˆcpu0-t.datå’Œcpu80-t.datä¸¤ä¸ªæ–‡ä»¶ã€‚
3ã€å¡«å……ç©ºç¼ºæ•°æ®ä¸º0
#!/bin/bashfor var in &#123;0,80&#125;do    array_str=`cat cpu$&#123;var&#125;-t.dat | awk &#x27;&#123;print $1&#125;&#x27;`    array_str2=`cat cpu$&#123;var&#125;-t.dat | awk &#x27;&#123;print $2&#125;&#x27;`    IPS=&#x27; &#x27;    array=($array_str)    array2=($array_str2)    index=0    count=0    max=121    echo &quot;#cpu$&#123;var&#125;&quot; &gt; cpu$&#123;var&#125;-tf.dat    while ( [ $index -lt $max ] &amp;&amp; [ $count -lt $max ] )    do        if [[ $&#123;array[index]&#125; == $count ]]        then            echo &quot;$count $&#123;array2[index]&#125;&quot; &gt;&gt; cpu$&#123;var&#125;-tf.dat            index=`expr $index + 1`            count=`expr $count + 1`        else            echo &quot;$count 0&quot;  &gt;&gt; cpu$&#123;var&#125;-tf.dat            count=`expr $count + 1`        fi    donedone

4ã€æ–°å»ºcpu3.pltï¼Œç»˜åˆ¶ååé‡
# output as png image#set terminal png  size 1000,560#set output &quot;cpu3.png&quot;# graph titleset title &quot;CPU usage and throughput&quot;set key below box 1# x-axis labelset xlabel &quot;Time (s)&quot;# y-axis labelset ylabel &quot;Responses per second&quot;plot &quot;cpu0_tf.dat&quot; using 1:2 with linespoints title &quot;CPU usage 0%&quot;,\    &quot;cpu80_tf.dat&quot; using 1:2 with linespoints title &quot;CPU usage 80%&quot;pause mouse

åè®°å†…å­˜å‹åŠ›ã€ç£ç›˜å‹åŠ›ã€ç½‘ç»œæ•…éšœç­‰æ¡ä»¶ä¸‹çš„å®éªŒç»“æœç»˜å›¾ï¼Œå’ŒCPUå‹åŠ›ç±»ä¼¼ï¼Œè¯¦æƒ…å‚è€ƒlive-migration-plotã€‚
å¯¹äºååé‡çš„ç»˜å›¾ï¼Œè¿˜æœ‰å¾ˆå¤šéœ€è¦å®Œå–„ã€‚æ¯”å¦‚è¯´å–æ ·ï¼Œç»˜åˆ¶æ‰€æœ‰CPUå ç”¨ç‡ä¸‹çš„ååé‡ä¼šå¤ªä¹±ï¼Œå–æ ·å°‘äº†åˆæ²¡æœ‰å¯¹æ¯”ï¼Œæ‰€ä»¥2-4æ¡æ˜¯æ¯”è¾ƒåˆé€‚çš„ã€‚å†æ¯”å¦‚è¯´æ—¶é—´é—´éš”é—®é¢˜ï¼Œè¾“å…¥abæµ‹è¯•å‘½ä»¤åï¼Œè¾“å…¥è¿ç§»å‘½ä»¤ï¼Œè¿™ä¸­é—´å­˜åœ¨æ—¶é—´é—´éš”ã€‚è€Œä¸”é€šè¿‡è§‚å¯Ÿååé‡æ›²çº¿ï¼Œä¹Ÿæ— æ³•çœ‹å‡ºä»ä½•æ—¶å¼€å§‹è¿›è¡Œè¿ç§»ï¼Œåªèƒ½çœ‹å‡ºåœæœºæ—¶é—´ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>ApacheBenchmarkå’Œgnuplot</title>
    <url>/dev-ab-and-gnuplot/</url>
    <content><![CDATA[å‰è¨€ã€Šè™šæ‹Ÿæœºåœ¨çº¿è¿ç§»çš„æ€§èƒ½ç»Ÿè®¡ã€‹ä¸€æ–‡ä¸­ï¼Œæåˆ°äº†è™šæ‹Ÿæœºè¿ç§»çš„å››ä¸ªæ€§èƒ½æŒ‡æ ‡ã€‚ä½†æ˜¯æ–‡ä¸­åªè®°å½•äº†è¿ç§»æ—¶é—´ã€åœæœºæ—¶é—´ã€è¿ç§»æ•°æ®é‡çš„æµ‹é‡æ–¹æ³•ï¼Œå¯¹äºåº”ç”¨ç¨‹åºçš„æ€§èƒ½ï¼Œç”±äºæ²¡æœ‰æƒ³åˆ°å¥½çš„æµ‹é‡æ–¹æ³•ï¼Œæœ€ç»ˆæç½®ã€‚
åˆå‚è€ƒäº†ä¸€äº›è®ºæ–‡ï¼Œå‘ç°ä»–ä»¬åœ¨è€ƒè™‘Webåº”ç”¨ç¨‹åºæ€§èƒ½æ—¶ï¼Œä¸»è¦è€ƒè™‘ååé‡ã€‚æœ¬æ–‡ï¼Œå°±æ¥ç ”ç©¶ä¸€ä¸‹ApacheBenchæµ‹é‡ååé‡çš„æ–¹æ³•ï¼Œå¹¶ä¸”ä½¿ç”¨gnuplotç»˜åˆ¶å‡ºååé‡ä¸æ—¶é—´çš„å…³ç³»ã€‚


ApacheBenchApacheBenchï¼ˆabï¼‰æ˜¯Apacheè‡ªå¸¦çš„ä¸€ä¸ªWebå‹åŠ›æµ‹è¯•å·¥å…·ï¼Œä¹Ÿå¯ä»¥å•ç‹¬ä¸‹è½½ä½¿ç”¨ã€‚abéå¸¸å®ç”¨ï¼Œå®ƒä¸ä»…å¯ä»¥å¯¹apacheæœåŠ¡å™¨è¿›è¡Œç½‘ç«™è®¿é—®å‹åŠ›æµ‹è¯•ï¼Œä¹Ÿå¯ä»¥å¯¹æˆ–å…¶å®ƒç±»å‹çš„æœåŠ¡å™¨è¿›è¡Œå‹åŠ›æµ‹è¯•ã€‚æ¯”å¦‚nginxã€tomcatã€IISç­‰ã€‚
å®‰è£…1ã€å®‰è£…apacheapt install apache2
2ã€æµ‹è¯•
curl localhostab -V

å•ç‹¬ä¸‹è½½abçš„è¯ï¼Œå¯ä»¥ä½¿ç”¨apt install apache2-utilsã€‚
ä½¿ç”¨abå‘½ä»¤ä½¿ç”¨è¯´æ˜ï¼šab [options] [http[s]://]hostname[:port]/path
å¯é€‰å‚æ•°å¦‚ä¸‹ï¼š
-n requests     Number of requests to perform-c concurrency  Number of multiple requests to make at a time-t timelimit    Seconds to max. to spend on benchmarking                This implies -n 50000-s timeout      Seconds to max. wait for each response                Default is 30 seconds-b windowsize   Size of TCP send/receive buffer, in bytes-B address      Address to bind to when making outgoing connections-p postfile     File containing data to POST. Remember also to set -T-u putfile      File containing data to PUT. Remember also to set -T-T content-type Content-type header to use for POST/PUT data, eg.                &#x27;application/x-www-form-urlencoded&#x27;                Default is &#x27;text/plain&#x27;-v verbosity    How much troubleshooting info to print-w              Print out results in HTML tables-i              Use HEAD instead of GET-x attributes   String to insert as table attributes-y attributes   String to insert as tr attributes-z attributes   String to insert as td or th attributes-C attribute    Add cookie, eg. &#x27;Apache=1234&#x27;. (repeatable)-H attribute    Add Arbitrary header line, eg. &#x27;Accept-Encoding: gzip&#x27;                Inserted after all normal header lines. (repeatable)-A attribute    Add Basic WWW Authentication, the attributes                are a colon separated username and password.-P attribute    Add Basic Proxy Authentication, the attributes                are a colon separated username and password.-X proxy:port   Proxyserver and port number to use-V              Print version number and exit-k              Use HTTP KeepAlive feature-d              Do not show percentiles served table.-S              Do not show confidence estimators and warnings.-q              Do not show progress when doing more than 150 requests-l              Accept variable document length (use this for dynamic pages)-g filename     Output collected data to gnuplot format file.-e filename     Output CSV file with percentages served-r              Don&#x27;t exit on socket receive errors.-m method       Method name-h              Display usage information (this message)-Z ciphersuite  Specify SSL/TLS cipher suite (See openssl ciphers)-f protocol     Specify SSL/TLS protocol                (TLS1, TLS1.1, TLS1.2 or ALL)

1ã€æ¨¡æ‹Ÿ10ä¸ªclientï¼Œæ€»å…±å‘é€100ä¸ªè¯·æ±‚ï¼ˆæ¯ä¸ªclientå‘é€10ä¸ªè¯·æ±‚ï¼‰ab -n 100 -c 10 http://localhost/æ³¨æ„ç½‘å€åé¢è¦åŠ â€/â€œæˆ–è€…æ˜ç¡®çš„pathã€‚è¿è¡Œç»“æœå¦‚ä¸‹ï¼š
This is ApacheBench, Version 2.3 &lt;$Revision: 1706008 $&gt;Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/Licensed to The Apache Software Foundation, http://www.apache.org/Benchmarking localhost (be patient).....doneServer Software:        Apache/2.4.18Server Hostname:        localhostServer Port:            80Document Path:          /Document Length:        11321 bytesConcurrency Level:      10Time taken for tests:   0.013 secondsComplete requests:      100Failed requests:        0Total transferred:      1159500 bytesHTML transferred:       1132100 bytes# ç›¸å½“äºLoadRunnerä¸­çš„æ¯ç§’äº‹åŠ¡æ•°Requests per second:    7841.29 [#/sec] (mean)# ç›¸å½“äºLoadRunnerä¸­çš„å¹³å‡äº‹åŠ¡å“åº”æ—¶é—´Time per request:       1.275 [ms] (mean)# æ¯ä¸ªè¿æ¥è¯·æ±‚å®é™…è¿è¡Œæ—¶é—´çš„å¹³å‡å€¼Time per request:       0.128 [ms] (mean, across all concurrent requests)Transfer rate:          88788.85 [Kbytes/sec] receivedConnection Times (ms)              min  mean[+/-sd] median   maxConnect:        0    0   0.1      0       1Processing:     0    1   0.3      1       1Waiting:        0    0   0.2      0       1Total:          1    1   0.3      1       2Percentage of the requests served within a certain time (ms)  50%      1  66%      1  75%      1  80%      1  90%      2  95%      2  98%      2  99%      2 100%      2 (longest request)

æ€§èƒ½æµ‹è¯•å¾—åˆ°çš„æœ€é‡è¦çš„æŒ‡æ ‡æ˜¯QPS(Requests per second)ï¼Œåæ˜ äº†æ¥å£çš„å¹¶å‘æ‰¿å—èƒ½åŠ›ï¼Œä¹Ÿå°±æ˜¯ç³»ç»Ÿçš„å³°å€¼æ€§èƒ½ã€‚å¦‚æœå¯¹æ¥å£çš„è°ƒç”¨è¶…è¿‡äº†è¿™ä¸€é™åˆ¶ï¼Œå°±è¦è€ƒè™‘æå‡ç¡¬ä»¶æˆ–è€…åšä¸€äº›ä¼˜åŒ–äº†ã€‚æ›´å¤šç»“æœè¯´æ˜å‚è€ƒWebæ€§èƒ½å‹åŠ›æµ‹è¯•å·¥å…·ä¹‹ApacheBenchè¯¦è§£ã€‚
2ã€æŒ‡å®šæµ‹è¯•çš„æœ€å¤§æ—¶é—´ä¸º10ç§’ab -t 10 -n 1000000 http://localhost/â€œ-tâ€å¯ä»¥æŒ‡å®šæµ‹è¯•çš„æœ€å¤§æ—¶é—´ï¼Œå¦‚æœè¿˜ä¸åˆ°æ­¤æ•°è¯·æ±‚å·²ç»å‘å®Œï¼Œé‚£ä¹ˆæµ‹è¯•ä¹Ÿä¼šç»“æŸã€‚å½“ä½¿ç”¨â€-tâ€å‚æ•°æ—¶ï¼Œabå†…éƒ¨é»˜è®¤æœ€å¤§çš„è¯·æ±‚æ•°ä¸º50000ï¼Œä¸ºäº†åŒæ—¶ä½¿ç”¨â€-nâ€æŒ‡å®šçš„å‚æ•°ï¼Œå¯ä»¥å°†â€-tâ€å‚æ•°æ”¾åœ¨â€-nâ€å‚æ•°ä¹‹å‰ã€‚æ›´å¤šå†…å®¹å‚è€ƒæŒ‰æ—¶é—´è¿›è¡Œå‹åŠ›æµ‹è¯•ã€‚
3ã€æµ‹è¯•ç»“æœå­˜å…¥gnuplotæ ¼å¼çš„æ–‡ä»¶ab -g t10.dat -t 10 -n 1000000 http://localhost/
gnuplotgnuplotæ˜¯ä¸€ä¸ªå°å·§å®ç”¨çš„æ•°æ®å¤„ç†å·¥å…·ï¼Œä¸»è¦ç”¨æ¥ç»˜åˆ¶2D/3Dçš„æ•°æ®æˆ–è€…å‡½æ•°å›¾åƒï¼Œä½†æ˜¯ä¹ŸåŒ…å«æ•°å­¦è®¡ç®—ã€æ‹Ÿåˆç­‰åŠŸèƒ½ã€‚è™½ç„¶å®ƒçš„åå­—é‡Œæœ‰ä¸ªâ€œgnuâ€ï¼Œä½†æ˜¯å®ƒå’Œå¤§åé¼é¼çš„GNUæ²¡ä»€ä¹ˆå…³ç³»ï¼Œä½¿ç”¨çš„æˆæƒåè®®ä¹Ÿä¸æ˜¯GNU GPLï¼Œæ‰€ä»¥è¿™é‡Œçš„â€œgnuâ€æ˜¯å°å†™ï¼Œå…¨ååº”è¯¥è¯»ä½œâ€œnew plotâ€ã€‚
å®‰è£…1ã€ç»ˆç«¯è¾“å…¥gnuplotï¼Œæç¤ºï¼š
The program &#x27;gnuplot&#x27; can be found in the following packages: * gnuplot-nox * gnuplot-qt * gnuplot-x11 * gnuplot5-nox * gnuplot5-qt * gnuplot5-x11Try: sudo apt install &lt;selected package&gt;
å¯è§gnuplotåœ¨å¤šä¸ªè½¯ä»¶åŒ…ä¸­éƒ½åŒ…å«ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©å®‰è£…gnuplot-noxæˆ–è€…gnuplot-qtã€‚
2ã€å®‰è£…gnuplot-noxapt install gnuplot-nox
3ã€æµ‹è¯•gnuplot -V
å…¶ä»–å¹³å°çš„å®‰è£…ï¼Œå‚è€ƒè°ˆè°ˆgnuplotï¼ˆä¸€ï¼‰ï¼šå®‰è£…ã€‚
ä½¿ç”¨1ã€å¯åŠ¨è¾“å…¥gnuplotï¼Œè¿›å…¥gnuplotshellã€‚è¿™é‡ŒåŒ…å«gnuplotçš„ç‰ˆæœ¬ã€ç³»ç»Ÿã€ç‰ˆæƒç­‰ä¿¡æ¯ã€‚æœ€å…³é”®çš„æ˜¯æœ€åä¸€æ¡ï¼šTerminal type set to â€˜unknownâ€™ä»€ä¹ˆæ˜¯terminalï¼Ÿåœ¨gnuplotä¸­ï¼Œterminalå°±æ˜¯è¯´ä½ æ‰“ç®—ç”¨ä»€ä¹ˆæ–¹å¼è¾“å‡ºå›¾ç‰‡ã€‚è¿™é‡Œé»˜è®¤çš„terminalæ˜¯unknownï¼Œå› ä¸ºæˆ‘ä»¬å®‰è£…äº†gnuplot-noxã€‚ä¸€èˆ¬éœ€è¦ä¿®æ”¹ä¸ºwxtï¼Œä¹Ÿå°±æ˜¯ç›´æ¥è¾“å‡ºåˆ°ç”µè„‘å±å¹•ä¸Šã€‚
2ã€è®¾ç½®terminal
set terminal dumbplot sin(x)
ä»¥ä¸Šï¼Œè®¾ç½®terminalä¸ºdumbï¼Œä¹Ÿå°±æ˜¯ç›´æ¥åœ¨shellä¸­æ˜¾ç¤ºç»˜å›¾ç»“æœã€‚
3ã€å›¾å½¢ç•Œé¢æ˜¾ç¤ºåœ¨shellä¸­ç»˜å›¾ï¼Œå¤ªç²—ç³™ï¼Œæˆ‘ä»¬æƒ³è¦åœ¨å›¾å½¢ç•Œé¢ä¸­æ˜¾ç¤ºã€‚ï¼ˆ1ï¼‰ä½¿ç”¨vncserverè¿æ¥æœåŠ¡å™¨ï¼Œå‚è€ƒLinuxä¸‹ä½¿ç”¨VirtualBoxï¼ˆ2ï¼‰å¯åŠ¨gnuplotï¼Œè®¾ç½®terminalset terminal wxtæˆ–è€…set terminal x11æ— æ³•æˆåŠŸï¼Œå› ä¸ºæ²¡æœ‰å®‰è£…å›¾å½¢ç•Œé¢æ”¯æŒã€‚ï¼ˆ3ï¼‰å®‰è£…å›¾å½¢ç•Œé¢æ”¯æŒapt install gnuplot-x11ä¹‹åå†å¯åŠ¨gnuplotï¼Œé»˜è®¤terminalä¸ºx11ã€‚ï¼ˆ4ï¼‰å°è¯•ç»˜å›¾æ›´å¤šç»˜åˆ¶æ–¹æ³•ï¼Œå‚è€ƒç¨‹åºå‘˜çš„ç»˜å›¾åˆ©å™¨ â€” Gnuplotã€‚
4ã€gnuplotè„šæœ¬ï¼ˆ1ï¼‰æ–°å»ºsin.pltè„šæœ¬ï¼Œå†…å®¹ä¸ºï¼š
# ç»˜åˆ¶sinset xlabel &#x27;x&#x27;set ylabel &#x27;y&#x27;plot sin(x)
ï¼ˆ2ï¼‰è¿è¡Œè„šæœ¬gnuplot sin.pltæˆ–è€…åœ¨gnushellä¸­æ‰§è¡Œload &#39;sin.plt&#39;ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œå‰ä¸€ç§æ–¹æ³•ç»˜åˆ¶çš„å›¾åƒä¼šä¸€é—ªè€Œè¿‡ã€‚ï¼ˆ3ï¼‰ä¿å­˜è„šæœ¬å¦‚æœåœ¨gnushellæ‰§è¡Œäº†ä¸€äº›setå‘½ä»¤ï¼Œç„¶åplotè¿›è¡Œç»˜å›¾ï¼Œæƒ³è¦ä¿å­˜è¿™äº›æ“ä½œï¼Œæ–¹ä¾¿ä¸‹æ¬¡ä½¿ç”¨ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨save &#39;filename.plt&#39;å‘½ä»¤ä¿å­˜è„šæœ¬ã€‚
ç»˜åˆ¶abæ•°æ®åœ¨abä½¿ç”¨ä¸€èŠ‚ï¼Œå·²ç»ä¿å­˜ä¸¤ä¸ªæ–‡ä»¶ï¼Œn10000.datå’Œt10.datï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æŠŠè¯¥æ–‡ä»¶ä¸­çš„æ•°æ®ç»˜åˆ¶ä¸€ä¸‹ã€‚ä¸»è¦å‚è€ƒä½¿ç”¨Apache Bench å’Œ Gnuplotäº§ç”Ÿæ€§èƒ½æµ‹è¯•å›¾ã€‚
å“åº”æ—¶é—´1ã€æŸ¥çœ‹t10.datæ–‡ä»¶tail t10.dat

starttimeï¼šäººç±»å¯è¯»çš„å¼€å§‹æ—¶é—´
secondsï¼šå¼€å§‹æ—¶é—´çš„unixæ—¶é—´æˆ³å€¼
ctimeï¼šå¯¹åº”çš„abè¾“å‡ºä¸­çš„Connection Times(ms)ä¸­çš„Connect
dtimeï¼šå¯¹åº”çš„abè¾“å‡ºä¸­çš„Connection Times(ms)ä¸­çš„Processing
ttimeï¼šå¯¹åº”çš„abè¾“å‡ºä¸­çš„Connection Times(ms)ä¸­çš„Total
waitï¼šå¯¹åº”çš„abè¾“å‡ºä¸­çš„Connection Times(ms)ä¸­çš„Waiting

2ã€æ–°å»ºt10.pltè„šæœ¬ï¼Œç»˜åˆ¶requestä¸response timeçš„å…³ç³»å›¾
# output as png imageset terminal png# save file to &quot;t10.png&quot;set output &quot;t10.png&quot;# graph titleset title &quot;ab -g t10.dat -t 10 -n 1000000 http://localhost/&quot;# nicer aspect ratio for image sizeset size 1,0.7# y-axis gridset grid y#x-axis labelset xlabel &quot;request&quot;#y-axis labelset ylabel &quot;response time (ms)&quot;#plot data from &quot;t10.dat&quot; using column 9 with smooth sbezier linesplot &quot;t10.dat&quot; using 9 smooth sbezier with lines title &quot;t10&quot;

3ã€æ‰§è¡Œt10.pltè„šæœ¬gnuplot t10.pltç”Ÿæˆçš„t10.pngå›¾åƒå¦‚ä¸‹ï¼šè¿™å¼ å›¾ï¼Œå’Œæ•™ç¨‹ä¸­ç»™çš„ç»“æœå·®åˆ«å¾ˆå¤§ï¼Œçœ‹ä¸å‡ºé€æ¸å¢é•¿çš„è¶‹åŠ¿ã€‚ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œ10så†…å‘é€äº†æ¥è¿‘6ä¸‡ä¸ªè¯·æ±‚ï¼Œresponse timeæœ€å¤§æ‰12msï¼Œåº”è¯¥æ˜¯å› ä¸ºæœ¬æœºæ€§èƒ½å¤ªå¥½å¯¼è‡´çš„ã€‚æ‰€ä»¥ï¼ŒéƒåŒå­¦å†³å®šæ¢ä¸€ä¸ªä¸»æœºæµ‹è¯•ã€‚
4ã€æµ‹è¯•ä¸ªäººåšå®¢ab -g t10.dat -t 10 -n 1000000 http://www.voidking.com/
5ã€å†æ¬¡æ‰§è¡Œt10.pltè„šæœ¬ç”Ÿæˆçš„å›¾åƒå¦‚ä¸‹ï¼šç”±ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œ10så†…å‘é€äº†æ¥è¿‘120ä¸ªè¯·æ±‚ï¼Œresponse timeé€æ¸å¢é•¿ï¼Œæœ€å¤§ä¸º99msã€‚
ååé‡ä¸Šé¢çš„æ•ˆæœå¹¶ä¸æ˜¯æˆ‘ä»¬æœ€ç»ˆæƒ³è¦çš„ï¼Œæˆ‘ä»¬éœ€è¦çš„ï¼Œæ˜¯response per secondä¸timeçš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯ååé‡ã€‚
1ã€æ–°å»ºpt10.shè„šæœ¬ï¼Œå¤„ç†t10.dat
#!/bin/bashstart_time=`awk &#x27;&#123;print $6&#125;&#x27; t10.dat | grep -v &#x27;wait&#x27; | sort | uniq -c|head -1|awk &#x27;&#123;print $2&#125;&#x27;`awk &#x27;&#123;print $6&#125;&#x27; t10.dat | grep -v &#x27;wait&#x27; | sort | uniq -c|awk -v t=$start_time &#x27;&#123;print $2-t,$1&#125;&#x27; &gt; epochtime.dat

2ã€æ‰§è¡Œpt10.sh
chmod a+x pt10.sh./pt10.sh

3ã€æ–°å»ºthroughput.pltè„šæœ¬
# output as png imageset terminal png  size 1000,560set output &quot;throughput.png&quot;#graph titleset title &quot;Throughput&quot;set key invert reverse Left outside# nicer aspect ratio for image size#set size 1,0.6# y-axis gridset grid y# x-axis labelset xlabel &quot;time&quot;# y-axis labelset ylabel &quot;responses per second&quot;plot &quot;epochtime.dat&quot; using 1:2 with lines title &quot;t10&quot;

ç”Ÿæˆçš„å›¾åƒå¦‚ä¸‹ï¼š
åè®°ä»¥ä¸Šï¼Œå®Œæˆäº†ApacheBenchmarkå’Œgnuplotçš„åŸºç¡€å­¦ä¹ ã€‚gnuplotç¡®å®æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„ç»˜å›¾å·¥å…·ï¼Œç»˜å‡ºçš„å›¾çœ‹èµ·æ¥å°±ä¸“ä¸šã€‚ä»¥åå°±ä¸ç”¨excelç»˜å›¾äº†ï¼Œå®‰è£…ä¸€ä¸ªwindowsç‰ˆgnuplotï¼Œå®Œç¾ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>apache</tag>
      </tags>
  </entry>
  <entry>
    <title>Win10å®‰è£…Ubuntu</title>
    <url>/hobby-ubuntu-on-windows/</url>
    <content><![CDATA[å‰è¨€æœ‰å‡ åä¸ªæ–‡ä»¶éœ€è¦æ‰¹é‡é‡å‘½åï¼ŒæŒ‰ç…§ä»¥å‰çš„åšæ³•ï¼ŒéƒåŒå­¦éƒ½æ˜¯æŠŠæ–‡ä»¶ä¸Šä¼ åˆ°linuxæœåŠ¡å™¨ï¼Œç„¶åä½¿ç”¨renameå‘½ä»¤è¿›è¡Œé‡å‘½åï¼Œç„¶åå†æ‹·è´å›æ¥ã€‚å…·ä½“å‚è€ƒã€Šæ‰¹é‡é‡å‘½åå’Œæ‰¹é‡æ›¿æ¢å­—ç¬¦ä¸²ã€‹ã€‚
ä½†æ˜¯ï¼Œè¿™æ¬¡éœ€è¦é‡å‘½åçš„æ–‡ä»¶å¤ªå¤§äº†ï¼Œä¸Šä¼ ä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥æƒ³åˆ°äº†å¦å¤–ä¸€ä¸ªæ€è·¯ï¼šåœ¨Win10ä¸­ä½¿ç”¨Linuxå‘½ä»¤ã€‚è¦ä½¿ç”¨Linuxå‘½ä»¤ï¼Œæœ€ç®€å•çš„æ˜¯ä½¿ç”¨git bashï¼Œä½†æ˜¯åªæœ‰lsã€vimç­‰ç®€å•å‘½ä»¤ã€‚cygwinä¹Ÿå¯ä»¥æ¨¡æ‹ŸLinuxç¯å¢ƒï¼Œä½†æ˜¯å‘½ä»¤ä¹Ÿæœ‰é™ã€‚è®°å¾—å¾®è½¯è¯´Win10é›†æˆäº†Linuxï¼Œæ‰€ä»¥å†³å®šè¯•è¯•ï¼Œä¸‹é¢è¿›è¡Œè®°å½•ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

å¼€å¯ Windows 10 çš„ Linux å­ç³»ç»Ÿ
ä½¿ç”¨xshellç™»å½•ubuntu on windows



å®‰è£…Ubuntu1ã€Win+Sï¼Œæ‰“å¼€æœç´¢ï¼Œè¾“å…¥â€œå¯ç”¨æˆ–å…³é—­WindowsåŠŸèƒ½â€ã€‚
2ã€å‹¾é€‰â€œé€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿâ€ï¼Œç‚¹å‡»ç¡®å®šï¼Œç„¶åé‡å¯ç”µè„‘ã€‚
3ã€Shift+å³é”®ï¼Œæ‰“å¼€Powershellï¼Œè¾“å…¥bashï¼Œä¼šæç¤ºè®¿é—®Microsoft Storeå®‰è£…Linuxã€‚
4ã€è®¿é—®Microsoft Storeï¼Œé€‰æ‹©Ubuntuï¼Œç‚¹å‡»è¿›è¡Œå®‰è£…ã€‚
5ã€å®‰è£…å®Œæˆåï¼Œåœ¨Powershellä¸­å†æ¬¡è¾“å…¥bashï¼Œå³å¯è¿›å…¥ubuntuçš„shellï¼Œç¬¬ä¸€æ¬¡è¿›å…¥ä¼šæç¤ºè®¾ç½®ç”¨æˆ·åå’Œå¯†ç ï¼Œè¿™é‡Œè®¾ç½®ç”¨æˆ·åä¸ºvoidkingã€‚
è‡³æ­¤ï¼Œubuntu on windowså°±å®‰è£…å®Œæˆäº†ã€‚ä½¿ç”¨æ–¹æ³•å’Œæ­£å¸¸çš„ubuntuä¸€æ¨¡ä¸€æ ·ï¼Œniceã€‚å½“ç„¶ä¹Ÿæœ‰ä¸åŒçš„åœ°æ–¹ï¼Œæ¯”å¦‚cç›˜å¯¹åº”çš„ç›®å½•ä¸º/mnt/c/ï¼Œdç›˜å¯¹åº”çš„ç›®å½•ä¸º/mnt/d/ã€‚
é…ç½®SSHä»Powershellè¿›å…¥bashï¼Œå¾ˆéš¾ç”¨ï¼Œæ¯”å¦‚æ— æ³•å¤åˆ¶ç²˜è´´ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®SSHï¼Œä»¥ä¾¿ä½¿ç”¨xshellè®¿é—®ã€‚
1ã€åˆ‡æ¢rootç”¨æˆ·å¹¶è®¾ç½®å¯†ç 
sudo -ipasswd

2ã€å®‰è£…sshæœåŠ¡apt-get install openssh-server
3ã€vim /etc/ssh/sshd_configï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 13, uncomment and changePort 3422# line 15, uncommentListenAddress 0.0.0.0# line 32, uncomment and changePermitRootLogin yes# line 56, changePasswordAuthentication yes

4ã€é‡å¯sshservice ssh restart
å¦‚æœæŠ¥é”™ï¼šCould not load host key: /etc/ssh/ssh_host_rsa_keyCould not load host key: /etc/ssh/ssh_host_ecdsa_keyCould not load host key: /etc/ssh/ssh_host_ed25519_key
å¤„ç†æ–¹æ³•ä¸ºï¼š
ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_keyssh-keygen -t rsa -f /etc/ssh/ssh_host_ecdsa_keyssh-keygen -t rsa -f /etc/ssh/ssh_host_ed25519_key

5ã€ubuntuä¸­æœ¬åœ°æµ‹è¯•ssh voidking@localhost -p 3422
6ã€windowsä¸­xshellè¿æ¥æ–°å»ºä¼šè¯ï¼Œä¸»æœºå¡«å†™127.0.0.1ï¼Œç«¯å£å¡«å†™3422ï¼Œç”¨æˆ·åå¯†ç æ˜¯ä¹‹å‰å®‰è£…ubuntuæ—¶è®¾ç½®çš„ã€‚
å¼€æœºè‡ªå¯åŠ¨SSHé‡å¯è®¡ç®—æœºåï¼Œå‘ç°æ— æ³•é€šè¿‡sshè¿æ¥ubuntuï¼ŒåŸæ¥æ˜¯å› ä¸ºubuntu on windowsé»˜è®¤ä¸ä¼šå¼€æœºè‡ªå¯åŠ¨sshæœåŠ¡ã€‚æ‰€ä»¥éœ€è¦æŠŠsshæœåŠ¡æ·»åŠ åˆ°å¼€å¯è‡ªå¯åŠ¨ã€‚ç›´æ¥ä½¿ç”¨systemctl enable sshå‘½ä»¤ï¼Œæ— æ•ˆï¼Œæ‰€ä»¥éœ€è¦æŠŠsshæœåŠ¡æ·»åŠ åˆ°å¼€æœºè‡ªå¯åŠ¨è„šæœ¬ï¼Œå‚è€ƒubuntu18.04é…ç½®rc.localã€‚
1ã€åˆ›å»ºrc-local.serviceé“¾æ¥ln -fs /lib/systemd/system/rc-local.service /etc/systemd/system/rc-local.service
2ã€vim /etc/systemd/system/rc-local.serviceï¼Œæ·»åŠ ï¼š
[Install]WantedBy=multi-user.targetAlias=rc-local.service

3ã€åˆ›å»ºrc.localvim /etc/rc.localï¼Œæ·»åŠ ï¼š
#!/bin/bash/etc/init.d/ssh startexit 0

4ã€æ·»åŠ æ‰§è¡Œæƒé™chmod 755 /etc/rc.local
5ã€é‡å¯ubuntuæ— æ³•ä½¿ç”¨rebootç­‰å‘½ä»¤é‡å¯ubuntu on windowsï¼Œæ‰€ä»¥éœ€è¦é‡å¯win10ã€‚
ç„¶è€Œï¼Œé‡å¯åä¾ç„¶æ— æ•ˆï¼çœ‹æ¥æ˜¯ubuntu on windowsä¸çº¯å‡€çš„ubuntuè¿˜æ˜¯æœ‰äº›å·®åˆ«ï¼Œå‚è€ƒåœ¨Windowså­ç³»ç»Ÿï¼ˆWSLï¼‰ä¸­é…ç½®å¼€æœºè‡ªå¯åŠ¨æœåŠ¡è¿›è¡Œå¤„ç†ã€‚
1ã€win10ä¸­è¿›å…¥å¯åŠ¨ç›®å½•Win+Rè¾“å…¥shell:startupï¼Œå›è½¦
2ã€åˆ›å»ºwls_rclocal.vbsï¼Œå†…å®¹ä¸ºï¼š
set ws=wscript.createobject(&quot;wscript.shell&quot;)ws.run &quot;C:\Windows\System32\bash.exe -c &#x27;sudo /etc/rc.local&#x27;&quot;,0

3ã€ç™»å½•ubuntuï¼Œåˆ›å»ºsudoersæ–‡ä»¶vim /etc/sudoers.d/rc-localï¼Œå†…å®¹å¦‚ä¸‹ï¼š
voidking * = (root) NOPASSWD: /etc/rc.local

4ã€é‡å¯win10ï¼Œä½¿ç”¨xshellç™»å½•ubuntuï¼ŒæˆåŠŸã€‚
åè®°æœ€ç»ˆçš„æ•ˆæœï¼Œæ¯”é¢„æƒ³çš„è¿˜è¦å¥½ã€‚ä¸¤ä¸ªç³»ç»Ÿå¯ä»¥åŒæ—¶ä½¿ç”¨ï¼Œè¿™æ ·å°±é›†æˆäº†windowså’Œlinuxä¸¤è€…çš„ä¼˜ç‚¹ï¼Œå®Œç¾ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>computer</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoæ·»åŠ ç™¾åº¦ç»Ÿè®¡</title>
    <url>/dev-hexo-baidustatistic/</url>
    <content><![CDATA[å‰è¨€ä¸€ç›´ä¸å…³å¿ƒç½‘ç«™çš„è®¿é—®é‡ï¼Œæ‰€ä»¥ä¹Ÿä¸€ç›´æ²¡æœ‰ç»Ÿè®¡è¿‡è®¿é—®é‡æ•°æ®ã€‚2019å¹´åˆšåˆšå¼€å§‹ï¼Œçªç„¶æƒ³åˆ°ï¼Œå¦‚æœåœ¨2019å¹´ç»ˆçš„æ—¶å€™ï¼Œç»Ÿè®¡ä¸€ä¸‹2019å¹´çš„è®¿é—®é‡ï¼Œåº”è¯¥ä¼šå¾ˆæœ‰æ„æ€ã€‚
è™½ç„¶åœ¨ã€Šhexoç”Ÿæˆsitemapã€‹ä¸€æ–‡ä¸­çš„æ–¹æ³•ä¹Ÿå¯ä»¥åœ¨ç™¾åº¦æœç´¢èµ„æºå¹³å°çœ‹åˆ°ä¸€äº›ç«™ç‚¹ç»Ÿè®¡ä¿¡æ¯ï¼Œä½†æ˜¯å¹¶ä¸è¯¦ç»†ã€‚æ‰€ä»¥ï¼Œæœ¬æ–‡å°±æ¥ç ”ç©¶ä¸€ä¸‹æ€æ ·åœ¨Hexoä¸­æ·»åŠ ç™¾åº¦ç»Ÿè®¡ã€‚


è´¦å·å‡†å¤‡1ã€è®¿é—®ç™¾åº¦ç»Ÿè®¡ï¼Œæ³¨å†Œè´¦å·ï¼ˆå¥½å¥½å­¦ä¹ çš„éƒï¼‰ã€‚
2ã€æ³¨å†Œå®Œæˆåç™»å½•ç™¾åº¦ç»Ÿè®¡ï¼Œç®¡ç†ï¼Œæ–°å¢ç«™ç‚¹ã€‚
3ã€ç‚¹å‡»è·å–ä»£ç ï¼Œå³å¯æ‹¿åˆ°ç«™ç‚¹çš„ç»Ÿè®¡ä»£ç ã€‚
&lt;script&gt;var _hmt = _hmt || [];(function() &#123;  var hm = document.createElement(&quot;script&quot;);  hm.src = &quot;https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0&quot;;  var s = document.getElementsByTagName(&quot;script&quot;)[0];   s.parentNode.insertBefore(hm, s);&#125;)();&lt;/script&gt;

ä½¿ç”¨é…ç½®1ã€åœ¨yilia/layout/_partial/postç›®å½•ä¸‹ï¼Œæ–°å»ºbaidustatistic.ejsï¼Œå†…å®¹ä¸ºï¼š
&lt;!--ç™¾åº¦ç»Ÿè®¡çš„ä»£ç --&gt;&lt;script&gt;var _hmt = _hmt || [];(function() &#123;  var hm = document.createElement(&quot;script&quot;);  hm.src = &quot;https://hm.baidu.com/hm.js?&lt;%=theme.baidustatistic.siteid%&gt;&quot;;  var s = document.getElementsByTagName(&quot;script&quot;)[0];   s.parentNode.insertBefore(hm, s);&#125;)();&lt;/script&gt;

2ã€ç¼–è¾‘yilia/layout/_partial/after-footer.ejsï¼Œæ·»åŠ ï¼š
&lt;% if (theme.baidustatistic.enable)&#123; %&gt;&lt;%- partial(&#x27;post/baidustatistic&#x27;) %&gt;&lt;% &#125; %&gt;

3ã€ç¼–è¾‘yilia/_config.ymlï¼Œæ·»åŠ ï¼š
# ç™¾åº¦ç»Ÿè®¡baidustatistic:  enable: true  siteid: b759ac2a7fa45129e3ef060bf68259f0

è‡³æ­¤ï¼Œç™¾åº¦ç»Ÿè®¡é…ç½®å®Œæˆã€‚
4ã€æŸ¥çœ‹ç»Ÿè®¡ç»“æœhexo sä¸Šä¼ æ–°çš„é¡µé¢ï¼Œ20åˆ†é’Ÿåï¼ŒæŸ¥çœ‹ç™¾åº¦ç»Ÿè®¡ï¼Œå³å¯çœ‹åˆ°ç»Ÿè®¡ä¿¡æ¯ã€‚

ç‚¹å‡»æŸ¥çœ‹æŠ¥å‘Šï¼Œå¯ä»¥çœ‹åˆ°æ›´åŠ è¯¦ç»†çš„ç»Ÿè®¡ä¿¡æ¯ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>å›¾åƒå€¾æ–œçŸ«æ­£</title>
    <url>/dev-gp-image-tilt-correction/</url>
    <content><![CDATA[ç†è®ºæ²¡æœ‰æ‰¾åˆ°å…³äºå›¾åƒå€¾æ–œçŸ«æ­£çš„ç»¼è¿°æ€§æ–‡çŒ®ï¼Œé‚£å°±è‡ªå·±æ•´ç†ä¸€ä¸‹å§ã€‚
å›¾åƒå€¾æ–œå¯ä»¥åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯å¹³é¢å€¾æ–œï¼Œè¿™ç§æƒ…å†µä¸‹æ‹ç…§è®¾å¤‡ä¸è¯•å·å¹³è¡Œï¼Œæ‹å‡ºæ¥çš„å›¾åƒåªéœ€è¦è¿›è¡Œæ—‹è½¬å³å¯å®ŒæˆçŸ«æ­£ï¼›å¦ä¸€ç§æ˜¯Zè½´å€¾æ–œï¼Œè¿™ç§æƒ…å†µä¸‹æ‹ç…§è®¾å¤‡ä¸è¯•å·å­˜åœ¨ä¸€å®šçš„è§’åº¦ï¼Œæ‹å‡ºæ¥çš„å›¾åƒè¦å…ˆè¿›è¡Œé€è§†å˜æ¢ï¼Œç„¶åå†è¿›è¡Œæ—‹è½¬ç­‰æ“ä½œæ‰å¯ä»¥å®ŒæˆçŸ«æ­£ã€‚
å›¾åƒå€¾æ–œçŸ«æ­£å…³é”®åœ¨äºæ ¹æ®å›¾åƒç‰¹å¾è‡ªåŠ¨æ£€æµ‹å‡ºå›¾åƒå€¾æ–œæ–¹å‘å’Œå€¾æ–œè§’åº¦ã€‚
å¯¹äºå¹³é¢å€¾æ–œï¼Œå…ˆåˆ©ç”¨è¾¹ç¼˜ï¼ˆè½®å»“ï¼‰æ£€æµ‹ç®—æ³•ç®—æ³•æ‰¾åˆ°å›¾åƒçš„è¾¹ç•Œï¼Œç„¶ååˆ©ç”¨Radonå˜æ¢æ³•ï¼ˆåŸºäºæŠ•å½±çš„æ–¹æ³•ï¼‰ã€Houghå˜æ¢æ³•ã€çº¿æ€§å›å½’æ³•ç­‰æ‰¾åˆ°å€¾æ–œè§’åº¦ï¼Œç„¶åå†åˆ©ç”¨ä»¿å°„å˜æ¢è¿›è¡Œæ—‹è½¬ã€‚
å¯¹äºZè½´å€¾æ–œï¼Œå…ˆåˆ©ç”¨è¾¹ç¼˜ï¼ˆè½®å»“ï¼‰æ£€æµ‹ç®—æ³•æ‰¾åˆ°å›¾åƒçš„è¾¹ç•Œï¼Œç„¶ååˆ©ç”¨é€è§†å˜æ¢æŠŠè§†å¹³é¢ä¸Šçš„ç‚¹æŠ•å½±åˆ°ç°å®å¹³é¢ï¼Œç„¶åå†åˆ©ç”¨ä»¿å°„å˜æ¢è¿›è¡Œæ—‹è½¬ã€‚


å®è·µè¾¹ç¼˜æ£€æµ‹# -*- coding: utf-8 -*-import numpy as npimport cv2img = cv2.imread(&#x27;../image/tilt.jpg&#x27;)GrayImage = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)CannyImage = cv2.Canny(GrayImage,50, 150, apertureSize=3)cv2.imshow(&#x27;gray&#x27;,GrayImage)cv2.imshow(&#x27;canny&#x27;,CannyImage)cv2.waitKey(0)

edges=cv.Canny(image, threshold1, threshold2[, edges[, apertureSize[, L2gradient]]])å‚æ•°è¯´æ˜ï¼š

imageï¼šè¾“å…¥å›¾åƒã€‚
threshold1ï¼šæœ€å°é˜ˆå€¼ã€‚
threshold2ï¼šæœ€å¤§é˜ˆå€¼ã€‚
apertureSizeï¼šSobelç®—å­çš„å­”å¾„å¤§å°ã€‚

æ›´å¤šå†…å®¹å‚è€ƒï¼š

OpenCV Canny
Cannyè¾¹ç¼˜æ£€æµ‹
åŸºäºSobelå’ŒCannyè¾¹ç¼˜æ£€æµ‹
Python-OpenCV å¤„ç†å›¾åƒï¼ˆäº”ï¼‰ï¼šå›¾åƒä¸­è¾¹ç•Œå’Œè½®å»“æ£€æµ‹

ä»¥ä¸Šä»£ç ï¼Œè°ƒç”¨äº†OpenCVä¸­çš„cannyæ–¹æ³•æ‰¾åˆ°äº†è¾¹ç¼˜ï¼Œä½†æ˜¯ï¼Œæ–‡å­—çš„è¾¹ç¼˜ä¹Ÿè¢«æ˜¾ç¤ºå‡ºæ¥äº†ã€‚é‚£ä¹ˆï¼Œæ€ä¹ˆå»æ‰æ–‡å­—è¾¹ç¼˜ï¼Œåªè¦é•¿æ–¹å½¢æ¡†çš„è¾¹ç¼˜å‘¢ï¼ŸOpenCVä¹Ÿæä¾›äº†æ–¹æ³•ï¼Œä½¿ç”¨findContoursæ¥æŸ¥æ‰¾è½®å»“ï¼Œä½¿ç”¨drawContoursæ¥ç»˜åˆ¶è½®å»“ã€‚
# -*- coding: utf-8 -*-import numpy as npimport cv2img = cv2.imread(&#x27;../image/tilt.jpg&#x27;)GrayImage = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)CannyImage = cv2.Canny(GrayImage,50, 150, apertureSize=3)ret,BinImage=cv2.threshold(CannyImage,127,255,cv2.THRESH_BINARY)_, contours, _= cv2.findContours(BinImage, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)cv2.imshow(&#x27;bin&#x27;,BinImage)cv2.drawContours(img, contours, -1, (0,255, 0), 1)cv2.imshow(&#x27;edge&#x27;,img)cv2.waitKey(0)


contours, hierarchy = cv.findContours(image, mode, method[, contours[, hierarchy[, offset]]])å‚æ•°è¯´æ˜ï¼š

imageï¼šè¾“å…¥å›¾åƒï¼ŒäºŒå€¼åŒ–å›¾åƒã€‚
modeï¼šè½®å»“æ£€ç´¢æ¨¡å¼ï¼Œè¯·å‚é˜…RetrievalModesã€‚
methodï¼šè½®å»“è¿‘ä¼¼æ–¹æ³•ï¼Œè¯·å‚è§ContourApproximationModesã€‚

å¦‚æœæŒ‰ç…§å®˜æ–¹æ–‡æ¡£è°ƒç”¨ï¼Œä¼šæŠ¥é”™ï¼Œå‚è€ƒValueError: too many values to unpackè§£å†³ã€‚å®é™…ä¸Šï¼Œè¿™æ˜¯å› ä¸ºopencv3ä¹‹åè¯¥å‡½æ•°çš„è¿”å›å€¼æœ‰ä¸‰ä¸ªï¼Œè€Œå®˜æ–¹æ–‡æ¡£æœ‰å¤šä¸ªç‰ˆæœ¬ï¼Œæ¯”å¦‚è¿™ä¸€ç‰ˆä¸­å°±è¯´æ˜äº†æœ‰ä¸‰ä¸ªå‚æ•°ã€‚
è®¡ç®—å€¾æ–œè§’ä»¥ä¸Šï¼Œå·²ç»æ‰¾åˆ°äº†å›¾ç‰‡çš„è¾¹ç¼˜ï¼Œæ¥ä¸‹æ¥è®¡ç®—å€¾æ–œè§’åº¦ã€‚
# -*- coding: utf-8 -*-import numpy as npimport cv2img = cv2.imread(&#x27;../image/tilt.jpg&#x27;)GrayImage = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)CannyImage = cv2.Canny(GrayImage,50, 150, apertureSize=3)ret,BinImage=cv2.threshold(CannyImage,127,255,cv2.THRESH_BINARY)lines = cv2.HoughLinesP(BinImage, 1, np.pi / 180, 160, minLineLength=200, maxLineGap=180)# å¯»æ‰¾é•¿åº¦æœ€é•¿çš„çº¿distance = []for line in lines:    x1, y1, x2, y2 = line[0]    dis = np.sqrt(pow((x2 - x1), 2) + pow((y2 - y1), 2))    distance.append(dis)max_dis_index = distance.index(max(distance))max_line = lines[max_dis_index]x1, y1, x2, y2 = max_line[0]# è·å–æ—‹è½¬è§’åº¦angle = cv2.fastAtan2((y2 - y1), (x2 - x1))print(angle)

ä»¥ä¸Šä»£ç ï¼Œå¾ˆå°´å°¬ï¼Œå¹¶ä¸æ˜¯åˆ©ç”¨findContoursçš„ç»“æœè¿›è¡Œè®¡ç®—çš„ï¼Œè€Œæ˜¯ä¸€ä¸ªæ–°çš„æ€è·¯ã€‚ä¸ºä»€ä¹ˆæ²¡æœ‰ä½¿ç”¨contoursï¼Ÿå› ä¸ºä¸ä¼šå†™ä»£ç ã€‚ã€‚ã€‚å¦‚æœè¦ç»§ç»­findContoursæ€è·¯ï¼Œé‚£ä¹ˆå¯ä»¥å‚è€ƒå›¾åƒçŸ«æ­£æŠ€æœ¯æ·±å…¥æ¢è®¨è¿›è¡Œæ”¹å†™ã€‚
ä»¿å°„å˜æ¢æ±‚å‡ºå€¾æ–œè§’åº¦ä¹‹åï¼Œåˆ©ç”¨ä»¿å°„å˜æ¢è¿›è¡Œæ—‹è½¬ã€‚
# è®¡ç®—å›¾ç‰‡ä¸­å¿ƒcenterpoint = (img.shape[1]/2,img.shape[0]/2)# è·å–æ—‹è½¬çŸ©é˜µrotate_mat = cv2.getRotationMatrix2D(centerpoint,angle,1.0)correct_image = cv2.warpAffine(img,rotate_mat,(img.shape[1],img.shape[0]),borderValue =(255,255,255) )cv2.imshow(&#x27;right&#x27;,correct_image)cv2.waitKey(0)


Zè½´å€¾æ–œimport cv2import numpy as npdef gray_and_bin(init_img):    gray_img = cv2.cvtColor(init_img, cv2.COLOR_BGR2GRAY)    blur_img = cv2.GaussianBlur(gray_img, (3, 3), 0)                     # é«˜æ–¯æ¨¡ç³Šå»å™ªï¼ˆè®¾å®šå·ç§¯æ ¸å¤§å°å½±å“æ•ˆæœï¼‰    canny_img = cv2.Canny(blur_img, 35, 189, apertureSize=3)    _, bin_img = cv2.threshold(canny_img, 127, 255, cv2.THRESH_BINARY)  # è®¾å®šé˜ˆå€¼165ï¼ˆé˜ˆå€¼å½±å“å¼€é—­è¿ç®—æ•ˆæœï¼‰    return gray_img, bin_imgdef points_and_box(init_img, bin_img):    image, contours, hierarchy = cv2.findContours(bin_img, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)    c = sorted(contours, key=cv2.contourArea, reverse=True)[0]   # è®¡ç®—æœ€å¤§è½®å»“çš„æ—‹è½¬åŒ…å›´ç›’    rect = cv2.minAreaRect(c)                                    # è·å–åŒ…å›´ç›’ï¼ˆä¸­å¿ƒç‚¹ï¼Œå®½é«˜ï¼Œæ—‹è½¬è§’åº¦ï¼‰    box = np.int0(cv2.boxPoints(rect))                           # box    # box_img = cv2.drawContours(init_img.copy(), [box], -1, (0, 0, 255), 2)    # cv2.imshow(&#x27;box&#x27;,box_img)    empty_img = np.zeros(init_img.shape, np.uint8) # åˆ›å»ºç©ºç™½å›¾åƒ    empty_img[...] = 255 # è®¾ç½®ç™½åº•    # cv2.imshow(&#x27;test&#x27;,empty_img)    cv2.drawContours(empty_img, contours, -1, (0, 0, 0), 1) # åœ¨ç©ºç™½å›¾åƒä¸Šç»˜åˆ¶è¯•å·è½®å»“    # cv2.imshow(&#x27;edge&#x27;, empty_img)    _, bin_img2 = gray_and_bin(empty_img)    # cv2.imshow(&#x27;bin&#x27;,bin_img2)    lines = cv2.HoughLinesP(bin_img2, 1, np.pi / 180, 100, minLineLength=200, maxLineGap=10)    for i in range(int(np.size(lines) / 4)):        for x1, y1, x2, y2 in lines[i]:            cv2.line(empty_img, (x1, y1), (x2, y2), (255, 255, 0), 1)    # cv2.imshow(&#x27;line&#x27;,empty_img)    points = None    if len(contours) &gt; 0:        contours = sorted(contours, key=cv2.contourArea, reverse=True)        for c in contours:            peri = cv2.arcLength(c, True)  # è½®å»“æŒ‰å¤§å°é™åºæ’åº            approx = cv2.approxPolyDP(c, 0.02 * peri, True)  # è·å–è¿‘ä¼¼çš„è½®å»“            if len(approx) == 4:  # è¿‘ä¼¼è½®å»“æœ‰å››ä¸ªé¡¶ç‚¹                points = approx                break    print(&#x27;piont[0]&#x27;, points[0]) # å·¦ä¸‹    print(&#x27;piont[1]&#x27;, points[1]) # å·¦ä¸Š    print(&#x27;piont[2]&#x27;, points[2]) # å³ä¸Š    print(&#x27;piont[3]&#x27;, points[3]) # å³ä¸‹    print(&#x27;box[0]:&#x27;, box[0]) # å³ä¸‹    print(&#x27;box[1]:&#x27;, box[1]) # å³ä¸Š    print(&#x27;box[2]:&#x27;, box[2]) # å·¦ä¸Š    print(&#x27;box[3]:&#x27;, box[3]) # å·¦ä¸‹    return points,boxdef perspective_transform(box,points,init_img):    # åŸå›¾ä¸­è¯•å·çš„å››ä¸ªé¡¶ç‚¹    pts1 = np.float32([points[0], points[1], points[2], points[3]])    # boxä¸­çš„å››ä¸ªé¡¶ç‚¹    pts2 = np.float32([box[3], box[2], box[1], box[0]])    # ç”Ÿæˆé€è§†å˜æ¢çŸ©é˜µï¼›è¿›è¡Œé€è§†å˜æ¢    M = cv2.getPerspectiveTransform(pts1,pts2)    result_img = cv2.warpPerspective(init_img, M, (1200, 1300))    return result_imgif __name__==&#x27;__main__&#x27;:    init_img = cv2.imread(&#x27;../image/init.jpg&#x27;)    gray_img, bin_img = gray_and_bin(init_img)    points, box = points_and_box(init_img,bin_img)    result_img = perspective_transform(box,points,init_img)    # cv2.imshow(&#x27;init&#x27;,init_img)    cv2.namedWindow(&#x27;result&#x27;, 0)    cv2.resizeWindow(&#x27;result&#x27;, 640, 1200)    cv2.imshow(&#x27;result&#x27;, result_img)    # cv2.imwrite(&#x27;result.jpg&#x27;,result_img)    cv2.waitKey(0)

ä»¥ä¸Šç»“æœï¼Œå¹¶ä¸æ˜¯å¾ˆç†æƒ³ã€‚é€è§†çŸ«æ­£å®Œæˆäº†ï¼Œä½†æ˜¯å­˜åœ¨é»‘è¾¹ç™½è¾¹ï¼Œè¯•å·é•¿å®½æ¯”ä¾‹ä¹Ÿæœ‰é—®é¢˜ï¼Œä¹Ÿæ²¡æœ‰è¿›è¡Œå¹³é¢å€¾æ–œçŸ«æ­£ã€‚å°±å…ˆè¿™æ ·å§ï¼Œä½œä¸ºä¸€ä¸ªå°ç™½ï¼Œåšæˆè¿™æ ·å·²ç»å¾ˆä¸å®¹æ˜“äº†ã€‚
æ›´å¤šå†…å®¹å‚è€ƒåˆ©ç”¨opencvåº“ï¼Œå®ç°æ ¡æ­£å›¾ç‰‡ä¸­çš„A4çº¸ã€ç”¨numpy+OpenCVå¿«é€Ÿå®ç°çŸ«æ­£å›¾åƒçš„åŠŸèƒ½ã€OpenCVâ€”pythonå›¾åƒçŸ«æ­£å’Œå¯¹å€¾æ–œçš„å›¾åƒè¿›è¡Œä¿®æ­£â€”â€”åŸºäºopencvé€è§†å˜æ¢ã€‚
åè®°å›¾åƒå€¾æ–œçŸ«æ­£è¿™éƒ¨åˆ†ï¼Œæ˜¯å›¾åƒé¢„å¤„ç†ä¸­çš„ä¸€ä¸ªéš¾ç‚¹ã€‚ä»¥ä¸Šï¼Œè™½ç„¶å®ç°äº†åŸºæœ¬çš„å›¾åƒå€¾æ–œçŸ«æ­£ç®—æ³•ï¼Œä½†æ˜¯ç®—æ³•åŸç†è¿˜éœ€è¦è¿›ä¸€æ­¥å­¦ä¹ ã€‚è€Œä¸”ï¼Œä¸Šé¢çš„ä»£ç ä¸­ä½¿ç”¨çš„å›¾ç‰‡éƒ½æ˜¯ç†æƒ³çš„ï¼Œå¹²æ‰°å¾ˆå°ï¼Œè€Œå®é™…æ‹æ‘„çš„å›¾ç‰‡ï¼Œé™¤äº†ç›®æ ‡ç‰©ä½“ï¼ˆè¯•å·ï¼‰ï¼Œè¿˜ä¼šå‡ºç°å…¶ä»–ç‰©ä½“ï¼Œæ¯”å¦‚ç­¾å­—ç¬”æ–‡å…·ç›’ç­‰ç­‰ã€‚æ‰€ä»¥ï¼Œåç»­è¿˜éœ€è¦è€ƒè™‘å…¶ä»–ç‰©ä½“çš„å¹²æ‰°ã€‚
å¦å¤–ï¼Œå‘ç°OpenCVæˆä¸ºäº†å¼€å‘è¿‡ç¨‹ä¸­çš„ç“¶é¢ˆï¼Œæƒ³è¦å®ç°ä¸€äº›åŠŸèƒ½ï¼Œæ¯æ¬¡éƒ½è¦æ±‚åŠ©äºç™¾åº¦è°·æ­Œã€‚å› æ­¤ï¼Œå¿…é¡»æ‰¾æ—¶é—´ç³»ç»Ÿå­¦ä¹ ä¸€ä¸‹OpenCVã€‚
ä¹¦ç­¾å›¾åƒçŸ«æ­£åŸç†è¯´æ˜
å›¾åƒçŸ«æ­£-åŸºäºopencvå®ç°
åˆ©ç”¨åŒ…å›´è½®å»“å’Œä»¿å°„å˜æ¢è¿›è¡Œå›¾åƒå€¾æ–œæ ¡æ­£
å¯¹Zè½´å€¾æ–œçš„å›¾åƒè¿›è¡Œæ ¡æ­£â€“åŸºäºOpenCVé€è§†å˜æ¢
OpenCVå®ç°åŸºäºå‚…é‡Œå¶å˜æ¢çš„æ—‹è½¬æ–‡æœ¬æ ¡æ­£
Python+OpenCVå®ç°æ—‹è½¬æ–‡æœ¬æ ¡æ­£
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>æ¯•è®¾</tag>
        <tag>opencv</tag>
      </tags>
  </entry>
  <entry>
    <title>å›¾åƒå»å™ª</title>
    <url>/dev-gp-image-denoise/</url>
    <content><![CDATA[ç†è®ºå™ªå£°å™ªå£°åœ¨å›¾åƒä¸Šå¸¸è¡¨ç°ä¸ºä¸€å¼•èµ·è¾ƒå¼ºè§†è§‰æ•ˆæœçš„å­¤ç«‹åƒç´ ç‚¹æˆ–åƒç´ å—ã€‚ä¸€èˆ¬ï¼Œå™ªå£°ä¿¡å·ä¸è¦ç ”ç©¶çš„å¯¹è±¡ä¸ç›¸å…³ï¼Œå®ƒä»¥æ— ç”¨çš„ä¿¡æ¯å½¢å¼å‡ºç°ï¼Œæ‰°ä¹±å›¾åƒçš„å¯è§‚æµ‹ä¿¡æ¯ã€‚é€šä¿—çš„è¯´å°±æ˜¯å™ªå£°è®©å›¾åƒä¸æ¸…æ¥šã€‚
å›¾åƒå¸¸è§å™ªå£°åŸºæœ¬ä¸Šæœ‰å››ç§ï¼šé«˜æ–¯å™ªå£°ï¼Œæ³Šæ¾å™ªå£°ï¼Œä¹˜æ€§å™ªå£°ï¼Œæ¤’ç›å™ªå£°ã€‚
ä»¤f(x,y)è¡¨ç¤ºåŸå§‹å›¾è±¡ï¼Œg(x,y)è¡¨ç¤ºå›¾è±¡ä¿¡å·ï¼Œn(x,y)è¡¨ç¤ºå™ªå£°ã€‚
æ ¹æ®å™ªå£°å’Œä¿¡å·çš„å…³ç³»å¯å°†å…¶åˆ†ä¸ºä¸‰ç§å½¢å¼ï¼š1ã€åŠ æ€§å™ªå£°ï¼Œæ­¤ç±»å™ªå£°ä¸è¾“å…¥å›¾è±¡ä¿¡å·æ— å…³ï¼Œå«å™ªå›¾è±¡å¯è¡¨ç¤ºä¸ºf(x,y)=g(x,y)+n(x,y)ï¼Œä¿¡é“å™ªå£°åŠå…‰å¯¼æ‘„åƒç®¡çš„æ‘„åƒæœºæ‰«æå›¾è±¡æ—¶äº§ç”Ÿçš„å™ªå£°å°±å±è¿™ç±»å™ªå£°ï¼›2ã€ä¹˜æ€§å™ªå£°ï¼Œæ­¤ç±»å™ªå£°ä¸å›¾è±¡ä¿¡å·æœ‰å…³ï¼Œå«å™ªå›¾è±¡å¯è¡¨ç¤ºä¸ºf(x,y)=g(x,y)+n(x,y)g(x,y)ï¼Œé£ç‚¹æ‰«æå™¨æ‰«æå›¾è±¡æ—¶çš„å™ªå£°ï¼Œç”µè§†å›¾è±¡ä¸­çš„ç›¸å…³å™ªå£°ï¼Œèƒ¶ç‰‡ä¸­çš„é¢—ç²’å™ªå£°å°±å±äºæ­¤ç±»å™ªå£°ï¼›3ã€é‡åŒ–å™ªå£°ï¼Œæ­¤ç±»å™ªå£°ä¸è¾“å…¥å›¾è±¡ä¿¡å·æ— å…³ï¼Œæ˜¯é‡åŒ–è¿‡ç¨‹å­˜åœ¨é‡åŒ–è¯¯å·®ï¼Œå†åæ˜ åˆ°æ¥æ”¶ç«¯è€Œäº§ç”Ÿã€‚
æ›´å¤šå†…å®¹å‚è€ƒå›¾åƒå™ªå£°ç®€ä»‹å’Œæµ…æâ€œé«˜æ–¯ç™½å™ªå£°â€ï¼Œâ€œæ³Šæ¾å™ªå£°â€ï¼Œâ€œæ¤’ç›å™ªå£°â€çš„åŒºåˆ«ã€‚


å»å™ªå›¾åƒçš„å»å™ªå¤„ç†æ–¹æ³•åŸºæœ¬ä¸Šå¯åˆ†ä¸ºç©ºé—´åŸŸæ³•å’Œå˜æ¢åŸŸæ³•ä¸¤å¤§ç±»ã€‚
ç©ºé—´åŸŸå»å™ªæ–¹æ³•çš„æ€æƒ³å°±æ˜¯åœ¨åŸå›¾åƒä¸Šå¯¹å›¾åƒç°åº¦å€¼è¿›è¡Œå¤„ç†ï¼Œé€šå¸¸é‡‡å–â€œå¹³å‡â€æˆ–â€œå¹³æ»‘â€çš„æ–¹æ³•ï¼Œå°†çªå˜çš„å™ªå£°åˆ†é‡åˆ†æ•£åˆ°å‘¨å›´åƒç´ ä¸­å»ï¼Œä½¿å›¾åƒå˜å¾—è¾ƒä¸ºå¹³æ»‘ï¼Œé™ä½å™ªå£°çš„å½±å“ã€‚å¸¸ç”¨çš„ç©ºé—´åŸŸå»å™ªæ–¹æ³•æœ‰ï¼šå‡å€¼å»å™ªæ³•ï¼Œä¸­å€¼å»å™ªæ³•ï¼Œé«˜æ–¯å»å™ªæ³•ã€ç»´çº³æ»¤æ³¢å»å™ªæ³•ç­‰ã€‚
å˜æ¢åŸŸå»å™ªæ–¹æ³•çš„æ€æƒ³æ˜¯å°†åŸå›¾åƒè¿›è¡Œç›¸å…³çš„å˜æ¢ï¼Œå°†å›¾åƒä¿¡æ¯å˜æ¢åˆ°å˜æ¢åŸŸä¸­,å†é€šè¿‡ä¸€å®šçš„æ–¹æ³•æ¥å¯¹å›¾åƒä¿¡æ¯è¿›è¡Œå¤„ç†ï¼Œä¹‹åå†é€šè¿‡åå˜æ¢æ¢å¤å›¾åƒä¿¡æ¯ï¼Œä»¥è¾¾åˆ°å›¾åƒå»å™ªçš„ç›®çš„ã€‚å¸¸ç”¨çš„å˜æ¢åŸŸå»å™ªæ–¹æ³•æœ‰ï¼šå‚…é‡Œå¶å˜æ¢å»å™ªæ–¹æ³•ï¼Œå°æ³¢å˜æ¢å»å™ªæ–¹æ³•ç­‰ã€‚
æ›´å¤šå†…å®¹å‚è€ƒå›¾åƒé™å™ªå’Œä¸€æ–‡é“å°½ä¼ ç»Ÿå›¾åƒé™å™ªæ–¹æ³•ã€‚
å»å™ªæ–¹æ³•åˆå¯ä»¥åˆ†ä¸ºçº¿æ€§æ»¤æ³¢å’Œéçº¿æ€§æ»¤æ³¢ï¼Œæ›´å¤šå†…å®¹å‚è€ƒä»€ä¹ˆæ˜¯çº¿æ€§æ»¤æ³¢ã€éçº¿æ€§æ»¤æ³¢ã€‚
å®è·µä¸»è¦å‚è€ƒImage Denoisingã€Smoothing Imageså’ŒOpenCVå›¾åƒå™ªå£°ä¸å»å™ªå‡½æ•°æ–¹æ³•å¯¹æ¯”ä½¿ç”¨ä»‹ç»ã€‚
OpenCVä¸­æœ‰å¤šä¸ªå¯ä»¥é™ä½å›¾åƒå™ªå£°ã€å¯¹å›¾åƒå®ç°å¹³æ»‘æ»¤æ³¢çš„å‡½æ•°ï¼Œæœ€å¸¸è§çš„å°±æ˜¯å‡å€¼æ¨¡ç³Šä¸é«˜æ–¯æ¨¡ç³Šï¼Œå®ƒä»¬éƒ½å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡ä½ä¸Šè¿°å‡ ç§å™ªå£°ï¼Œå¦å¤–è¿˜æœ‰ä¸­å€¼æ¨¡ç³Šã€åŒè¾¹æ¨¡ç³Šã€éå±€éƒ¨å»å™ªç­‰å‡½æ•°æ–¹æ³•å¯ä»¥ä½¿ç”¨ï¼Œé’ˆå¯¹ç‰¹å®šç§ç±»çš„å™ªå£°ï¼Œä½¿ç”¨æœ‰é’ˆå¯¹æ€§å‡½æ•°ä¸åˆç†çš„å‚æ•°å¯ä»¥å–å¾—è¾ƒå¥½çš„æ•ˆæœã€‚

blurï¼šå¯¹å„ç§å™ªå£°éƒ½æœ‰ä¸€å®šçš„æŠ‘åˆ¶ä½œç”¨ã€‚
GaussianBlurï¼šå¯¹éšæœºå™ªå£°æ¯”è¾ƒå¥½ï¼Œå¯¹æ¤’ç›å™ªå£°æ•ˆæœä¸å¥½ã€‚
medianBlurï¼šå¯¹æ¤’ç›å™ªå£°æ•ˆæœæ¯”è¾ƒå¥½ã€‚
fastNlMeansDenoisingï¼šåªæ”¯æŒç°åº¦å›¾åƒï¼Œéå±€éƒ¨å»å™ªï¼Œé€Ÿåº¦å¾ˆæ…¢ï¼Œå¯ä»¥è°ƒå‚ã€‚
fastNlMeansDenoisingColoredï¼šåŒä¸Šï¼Œå»å™ªé’ˆå¯¹å½©è‰²å›¾åƒã€‚

æ·»åŠ å™ªå£°å‚è€ƒPython+opencv3å¯¹å›¾åƒæ·»åŠ é«˜æ–¯å™ªå£°å’Œæ¤’ç›å™ªå£°ï¼Œç»™å›¾åƒæ·»åŠ æ¤’ç›å™ªå£°ã€‚
# -*- coding: utf-8 -*-import cv2import numpy as npimport matplotlib.pyplot as plt# å®šä¹‰æ·»åŠ æ¤’ç›å™ªå£°çš„å‡½æ•°def SaltAndPepper(src,percetage):    SP_NoiseImg=np.copy(src)    SP_NoiseNum=int(percetage*src.shape[0]*src.shape[1])    for i in range(SP_NoiseNum):        randX=np.random.random_integers(0,src.shape[0]-1)        randY=np.random.random_integers(0,src.shape[1]-1)        if np.random.random_integers(0,1)==0:            SP_NoiseImg[randX,randY]=0        else:            SP_NoiseImg[randX,randY]=255    return SP_NoiseImgimg = cv2.imread(&#x27;../image/test.jpg&#x27;)GrayImage = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)NoiseImage = SaltAndPepper(GrayImage,0.01)plt.subplot(121),plt.imshow(GrayImage,&#x27;gray&#x27;)plt.subplot(122),plt.imshow(NoiseImage,&#x27;gray&#x27;)plt.show()


ç®€å•å»å™ª# -*- coding: utf-8 -*-import numpy as npimport cv2import matplotlib.pyplot as plt# å®šä¹‰æ·»åŠ æ¤’ç›å™ªå£°çš„å‡½æ•°def SaltAndPepper(src,percetage):    SP_NoiseImg=np.copy(src)    SP_NoiseNum=int(percetage*src.shape[0]*src.shape[1])    for i in range(SP_NoiseNum):        randX=np.random.random_integers(0,src.shape[0]-1)        randY=np.random.random_integers(0,src.shape[1]-1)        if np.random.random_integers(0,1)==0:            SP_NoiseImg[randX,randY]=0        else:            SP_NoiseImg[randX,randY]=255    return SP_NoiseImg# åŠ è½½å›¾ç‰‡ï¼Œç°åº¦åŒ–ï¼Œæ·»åŠ å™ªå£°img = cv2.imread(&#x27;../image/test.jpg&#x27;)GrayImage = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)NoiseImage = SaltAndPepper(GrayImage,0.01)# ç›´æ¥è°ƒç”¨opencvå‡½æ•°dst = cv2.fastNlMeansDenoising(NoiseImage,10,7,21)plt.subplot(121),plt.imshow(NoiseImage,&#x27;gray&#x27;)plt.subplot(122),plt.imshow(dst,&#x27;gray&#x27;)plt.show()

dst=cv.fastNlMeansDenoising(src, h[, dst[, templateWindowSize[, searchWindowSize[, normType]]]])å‚æ•°è¯´æ˜ï¼š

srcï¼šè¾“å…¥8ä½1é€šé“ï¼Œ2é€šé“ï¼Œ3é€šé“æˆ–4é€šé“å›¾åƒã€‚
dstï¼šè¾“å‡ºä¸srcå…·æœ‰ç›¸åŒå¤§å°å’Œç±»å‹çš„å›¾åƒã€‚
hï¼šå‚æ•°è°ƒèŠ‚æ»¤æ³¢å™¨å¼ºåº¦ã€‚å¤§hå€¼å¯ä»¥å®Œç¾åœ°æ¶ˆé™¤å™ªç‚¹ï¼Œä½†ä¹Ÿå¯ä»¥æ¶ˆé™¤å›¾åƒç»†èŠ‚ï¼Œè¾ƒå°çš„hå€¼å¯ä»¥ä¿ç•™ç»†èŠ‚ï¼Œä½†ä¹Ÿä¼šä¿ç•™ä¸€äº›å™ªç‚¹ã€‚
templateWindowSizeï¼šç”¨äºè®¡ç®—æƒé‡çš„æ¨¡æ¿ä¿®è¡¥ç¨‹åºçš„çª—å£å¤§å°ï¼Œå¥‡æ•°ï¼Œæ¨èå€¼7åƒç´ ã€‚
searchWindowSizeï¼šçª—å£çš„åƒç´ å¤§å°ï¼Œç”¨äºè®¡ç®—ç»™å®šåƒç´ çš„åŠ æƒå¹³å‡å€¼ï¼Œå¥‡æ•°ï¼Œæ¨è21åƒç´ ã€‚

å‡å€¼æ»¤æ³¢å»å™ªæ³•# -*- coding: utf-8 -*-import numpy as npimport cv2import matplotlib.pyplot as plt# å®šä¹‰æ·»åŠ æ¤’ç›å™ªå£°çš„å‡½æ•°def SaltAndPepper(src,percetage):    SP_NoiseImg=np.copy(src)    SP_NoiseNum=int(percetage*src.shape[0]*src.shape[1])    for i in range(SP_NoiseNum):        randX=np.random.random_integers(0,src.shape[0]-1)        randY=np.random.random_integers(0,src.shape[1]-1)        if np.random.random_integers(0,1)==0:            SP_NoiseImg[randX,randY]=0        else:            SP_NoiseImg[randX,randY]=255    return SP_NoiseImgimg = cv2.imread(&#x27;../image/test.jpg&#x27;)GrayImage = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)NoiseImage = SaltAndPepper(GrayImage,0.01)dst = cv2.blur(NoiseImage, (3,3))plt.subplot(121),plt.imshow(NoiseImage,&#x27;gray&#x27;)plt.subplot(122),plt.imshow(dst,&#x27;gray&#x27;)plt.show()


dst=cv.blur(src, ksize[, dst[, anchor[, borderType]]])å‚æ•°è¯´æ˜ï¼š

srcï¼šè¾“å…¥çš„å›¾ç‰‡ã€‚
ksizeï¼šæ¨¡ç³Šå†…æ ¸å¤§å°ã€‚
anchorï¼šé”šç‚¹ï¼Œé»˜è®¤å€¼Point(-1ï¼Œ-1)è¡¨ç¤ºé”šç‚¹ä½äºå†…æ ¸ä¸­å¿ƒã€‚
borderTypeï¼šè¾¹ç•Œæ¨¡å¼ç”¨äºå¤–æ¨å›¾åƒå¤–çš„åƒç´ ã€‚

å‡å€¼æ»¤æ³¢æ˜¯ä¸€ç§å…¸å‹çš„çº¿æ€§æ»¤æ³¢ç®—æ³•ï¼Œä¸»è¦æ˜¯åˆ©ç”¨åƒç´ ç‚¹é‚»åŸŸçš„åƒç´ å€¼æ¥è®¡ç®—åƒç´ ç‚¹çš„å€¼ã€‚å…¶å…·ä½“æ–¹æ³•æ˜¯é¦–å…ˆç»™å‡ºä¸€ä¸ªæ»¤æ³¢æ¨¡æ¿kernelï¼Œè¯¥æ¨¡æ¿å°†è¦†ç›–åƒç´ ç‚¹å‘¨å›´çš„å…¶ä»–é‚»åŸŸåƒç´ ç‚¹ï¼Œå»æ‰åƒç´ æœ¬èº«ï¼Œå°†å…¶é‚»åŸŸåƒç´ ç‚¹ç›¸åŠ ç„¶åå–å¹³å‡å€¼å³ä¸ºè¯¥åƒç´ ç‚¹çš„æ–°çš„åƒç´ å€¼ï¼Œè¿™å°±æ˜¯å‡å€¼æ»¤æ³¢çš„æœ¬è´¨ã€‚å®˜æ–¹ç»™å‡ºçš„kernelæ¨¡æ¿å¦‚ä¸‹ï¼š
ä¸­å€¼æ»¤æ³¢å»å™ªæ³•# -*- coding: utf-8 -*-import numpy as npimport cv2import matplotlib.pyplot as plt# å®šä¹‰æ·»åŠ æ¤’ç›å™ªå£°çš„å‡½æ•°def SaltAndPepper(src,percetage):    SP_NoiseImg=np.copy(src)    SP_NoiseNum=int(percetage*src.shape[0]*src.shape[1])    for i in range(SP_NoiseNum):        randX=np.random.random_integers(0,src.shape[0]-1)        randY=np.random.random_integers(0,src.shape[1]-1)        if np.random.random_integers(0,1)==0:            SP_NoiseImg[randX,randY]=0        else:            SP_NoiseImg[randX,randY]=255    return SP_NoiseImgimg = cv2.imread(&#x27;../image/test.jpg&#x27;)GrayImage = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)NoiseImage = SaltAndPepper(GrayImage,0.01)dst = cv2.medianBlur(NoiseImage, 3)plt.subplot(121),plt.imshow(NoiseImage,&#x27;gray&#x27;)plt.subplot(122),plt.imshow(dst,&#x27;gray&#x27;)plt.show()

dst=cv.medianBlur(src, ksize[, dst])å‚æ•°è¯´æ˜ï¼š

srcï¼šè¾“å…¥çš„å›¾ç‰‡ã€‚
ksizeï¼šçª—å£çš„å°ºå¯¸ã€‚å®ƒå¿…é¡»æ˜¯å¥‡æ•°ä¸”å¤§äº1ï¼Œä¾‹å¦‚ï¼š3ã€5ã€7ã€‚

ä¸­å€¼æ»¤æ³¢æ³•å’Œå‡å€¼æ»¤æ³¢æ³•ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯ï¼Œå®ƒå°†æ¯ä¸€åƒç´ ç‚¹çš„ç°åº¦å€¼è®¾ç½®ä¸ºè¯¥ç‚¹æŸé‚»åŸŸçª—å£å†…çš„æ‰€æœ‰åƒç´ ç‚¹ç°åº¦å€¼çš„ä¸­å€¼ã€‚
é«˜æ–¯æ»¤æ³¢å»å™ªæ³•# -*- coding: utf-8 -*-import numpy as npimport cv2import matplotlib.pyplot as plt# å®šä¹‰æ·»åŠ æ¤’ç›å™ªå£°çš„å‡½æ•°def SaltAndPepper(src,percetage):    SP_NoiseImg=np.copy(src)    SP_NoiseNum=int(percetage*src.shape[0]*src.shape[1])    for i in range(SP_NoiseNum):        randX=np.random.random_integers(0,src.shape[0]-1)        randY=np.random.random_integers(0,src.shape[1]-1)        if np.random.random_integers(0,1)==0:            SP_NoiseImg[randX,randY]=0        else:            SP_NoiseImg[randX,randY]=255    return SP_NoiseImgimg = cv2.imread(&#x27;../image/test.jpg&#x27;)GrayImage = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)NoiseImage = SaltAndPepper(GrayImage,0.01)dst = cv2.GaussianBlur(NoiseImage, (3,3), 0.8, 0.8)plt.subplot(121),plt.imshow(NoiseImage,&#x27;gray&#x27;)plt.subplot(122),plt.imshow(dst,&#x27;gray&#x27;)plt.show()

dst=cv.GaussianBlur(src, ksize, sigmaX[, dst[, sigmaY[, borderType]]])å‚æ•°è¯´æ˜ï¼š

srcï¼šè¾“å…¥çš„å›¾ç‰‡ã€‚
ksizeï¼šé«˜æ–¯æ ¸å¤§å°ã€‚ksize.widthå’Œksize.heightå¯ä»¥ä¸åŒï¼Œä½†â€‹â€‹å®ƒä»¬éƒ½å¿…é¡»æ˜¯æ­£æ•°å’Œå¥‡æ•°ã€‚æˆ–è€…ï¼Œå®ƒä»¬å¯ä»¥ä¸ºé›¶ï¼Œç„¶åæ ¹æ®sigmaè®¡ç®—ã€‚
sigmaXï¼šXæ–¹å‘çš„é«˜æ–¯æ ¸æ ‡å‡†åå·®ã€‚
sigmaYï¼šYæ–¹å‘çš„é«˜æ–¯æ ¸æ ‡å‡†åå·®ã€‚å¦‚æœsigmaYä¸ºé›¶ï¼Œåˆ™å°†å…¶è®¾ç½®ä¸ºç­‰äºsigmaXï¼Œå¦‚æœä¸¤ä¸ªsigmaå‡ä¸ºé›¶ï¼Œåˆ™åˆ†åˆ«ä»ksize.widthå’Œksize.heightè®¡ç®—ã€‚

é«˜æ–¯æ»¤æ³¢çš„åŸç†å‚è€ƒé«˜æ–¯æ»¤æ³¢å™¨è¯¦è§£ã€‚
å‚…é‡Œå¶å˜æ¢å»å™ª# -*- coding: utf-8 -*-import numpy as npimport cv2import matplotlib.pyplot as plt# å®šä¹‰æ·»åŠ æ¤’ç›å™ªå£°çš„å‡½æ•°def SaltAndPepper(src,percetage):    SP_NoiseImg=np.copy(src)    SP_NoiseNum=int(percetage*src.shape[0]*src.shape[1])    for i in range(SP_NoiseNum):        randX=np.random.random_integers(0,src.shape[0]-1)        randY=np.random.random_integers(0,src.shape[1]-1)        if np.random.random_integers(0,1)==0:            SP_NoiseImg[randX,randY]=0        else:            SP_NoiseImg[randX,randY]=255    return SP_NoiseImg# åŠ è½½å›¾ç‰‡ï¼Œç°åº¦åŒ–ï¼Œæ·»åŠ å™ªå£°img = cv2.imread(&#x27;../image/test.jpg&#x27;)GrayImage = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)NoiseImage = SaltAndPepper(GrayImage,0.01)# dftdft = cv2.dft(np.float32(NoiseImage),flags = cv2.DFT_COMPLEX_OUTPUT)dft_shift = np.fft.fftshift(dft)rows, cols = NoiseImage.shapecrow, ccol = int(rows/2) , int(cols/2)# create a mask first, center square is 1, remaining all zerosmask = np.zeros((rows,cols,2),np.uint8)mask[crow-30:crow+30, ccol-30:ccol+30] = 1# apply mask and inverse DFTfshift = dft_shift*maskf_ishift = np.fft.ifftshift(fshift)img_back = cv2.idft(f_ishift)dst = cv2.magnitude(img_back[:,:,0],img_back[:,:,1])plt.subplot(121),plt.imshow(NoiseImage,&#x27;gray&#x27;)plt.subplot(122),plt.imshow(dst,&#x27;gray&#x27;)plt.show()

dst=cv.dft(src[, dst[, flags[, nonzeroRows]]])å‚æ•°è¯´æ˜ï¼š

srcï¼šè¾“å…¥æ•°ç»„å¯èƒ½æ˜¯å®æ•°æˆ–å¤æ•°ã€‚
flagï¼šè½¬æ¢æ ‡å¿—ï¼Œä»£è¡¨DftFlagsçš„ç»„åˆã€‚
nonezeroRowsï¼šå½“å‚æ•°ä¸ä¸ºé›¶æ—¶ï¼Œè¯¥å‡½æ•°å‡å®šåªæœ‰è¾“å…¥æ•°ç»„çš„ç¬¬ä¸€ä¸ªéé›¶è¡Œæˆ–ä»…è¾“å‡ºæ•°ç»„çš„ç¬¬ä¸€ä¸ªéé›¶è¡ŒåŒ…å«éé›¶ã€‚å› æ­¤ï¼Œå‡½æ•°å¯ä»¥æ›´æœ‰æ•ˆåœ°å¤„ç†å…¶ä½™è¡Œå¹¶èŠ‚çœä¸€äº›æ—¶é—´ï¼Œè¿™ç§æŠ€æœ¯å¯¹äºä½¿ç”¨DFTè®¡ç®—é˜µåˆ—äº’ç›¸å…³æˆ–å·ç§¯éå¸¸æœ‰ç”¨ã€‚

æ›´å¤šå†…å®¹å‚è€ƒï¼š

å‚…é‡Œå¶åˆ†æä¹‹ææ­»æ•™ç¨‹
opencv python å‚…é‡Œå¶å˜æ¢
OpenCV+Pythonç¦»æ•£å‚…é‡Œå¶å˜æ¢DFT
opencv dftå®˜æ–¹æ–‡æ¡£
å°æ³¢å’Œå‚…é‡Œå¶å˜æ¢ä¹‹é—´å…³ç³»è¯¦ç»†è®²è§£ã€‚

åè®°ä»¥ä¸Šï¼Œå®ç°äº†éƒ¨åˆ†æ»¤æ³¢å»å™ªæ³•ã€‚å¯¹äºç»´çº³æ»¤æ³¢å»å™ªæ³•å’Œå°æ³¢å˜æ¢å»å™ªæ³•ï¼Œæ•°å­¦åŸç†æ¯”è¾ƒå¤æ‚ï¼Œå°±å…ˆæ”¾ä¸€è¾¹ï¼Œç­‰æœ‰éœ€è¦äº†å†æ¥è¿›è¡Œå®ç°ã€‚å¯¹äºå‚…é‡Œå¶å˜æ¢å»å™ªæ³•ï¼Œä¸€çŸ¥åŠè§£ï¼Œè¿˜éœ€è¦ç»§ç»­å­¦ä¹ ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>æ¯•è®¾</tag>
        <tag>opencv</tag>
      </tags>
  </entry>
  <entry>
    <title>å›¾åƒäºŒå€¼åŒ–</title>
    <url>/dev-gp-image-binary/</url>
    <content><![CDATA[ç†è®ºå›¾åƒçš„äºŒå€¼åŒ–ï¼Œå°±æ˜¯å°†å›¾åƒä¸Šçš„åƒç´ ç‚¹çš„ç°åº¦å€¼è®¾ç½®ä¸º0æˆ–255ï¼Œä¹Ÿå°±æ˜¯å°†æ•´ä¸ªå›¾åƒå‘ˆç°å‡ºæ˜æ˜¾çš„åªæœ‰é»‘å’Œç™½çš„è§†è§‰æ•ˆæœã€‚
ä¸€å¹…å›¾åƒåŒ…æ‹¬ç›®æ ‡ç‰©ä½“ã€èƒŒæ™¯è¿˜æœ‰å™ªå£°ï¼Œè¦æƒ³ä»å¤šå€¼çš„æ•°å­—å›¾åƒä¸­ç›´æ¥æå–å‡ºç›®æ ‡ç‰©ä½“ï¼Œå¸¸ç”¨çš„æ–¹æ³•å°±æ˜¯è®¾å®šä¸€ä¸ªé˜ˆå€¼Tï¼Œç”¨Tå°†å›¾åƒçš„æ•°æ®åˆ†æˆä¸¤éƒ¨åˆ†ï¼šå¤§äºTçš„åƒç´ ç¾¤å’Œå°äºTçš„åƒç´ ç¾¤ã€‚è¿™æ˜¯ç ”ç©¶ç°åº¦å˜æ¢çš„æœ€ç‰¹æ®Šçš„æ–¹æ³•ï¼Œç§°ä¸ºå›¾åƒçš„äºŒå€¼åŒ–ï¼ˆBinarizationï¼‰ã€‚
å¸¸è§çš„äºŒå€¼åŒ–æ–¹æ³•æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯å›ºå®šé˜ˆå€¼æ³•ã€å¹³å‡å€¼æ³•ã€è‡ªé€‚åº”é˜ˆå€¼æ³•å’Œç›´æ–¹å›¾æ³•ã€‚
å›ºå®šé˜ˆå€¼æ³•å°±æ˜¯è®¾å®šä¸€ä¸ªå›ºå®šé˜ˆå€¼Kï¼Œå°äºç­‰äºKçš„åƒç´ å€¼è®¾ä¸º0(é»‘è‰²)ï¼Œå¤§äºKçš„åƒç´ å€¼è®¾ä¸º255(ç™½è‰²)ã€‚
å¹³å‡å€¼æ³•è®¡ç®—åƒç´ çš„å¹³å‡å€¼Kï¼Œç„¶åæ‰«æå›¾åƒçš„æ¯ä¸ªåƒç´ å€¼ï¼Œå°äºç­‰äºKåƒç´ å€¼è®¾ä¸º0(é»‘è‰²)ï¼Œå¤§äºKçš„åƒç´ å€¼è®¾ä¸º255(ç™½è‰²)ã€‚
è‡ªé€‚åº”é˜ˆå€¼æ³•å¯¹å¹³å‡å€¼æ³•è¿›è¡Œæ”¹è¿›ï¼Œè§„å®šä¸€ä¸ªåŒºåŸŸå¤§å°ï¼Œæ±‚åŒºåŸŸå¹³å‡å€¼ä½œä¸ºé˜ˆå€¼Kï¼Œç„¶ååŒºåŸŸä¸­çš„åƒç´ å€¼ä¸Kè¿›è¡Œæ¯”è¾ƒã€‚
ç›´æ–¹å›¾æ–¹æ³•ä¸»è¦æ˜¯å‘ç°å›¾åƒçš„ä¸¤ä¸ªæœ€é«˜çš„å³°ï¼Œç„¶åé˜ˆå€¼Kå–å€¼åœ¨ä¸¤ä¸ªå³°ä¹‹é—´çš„å³°è°·æœ€ä½å¤„ã€‚å›¾åƒçš„ç›´æ–¹å›¾ç”¨æ¥è¡¨å¾è¯¥å›¾åƒåƒç´ å€¼çš„åˆ†å¸ƒæƒ…å†µã€‚ç”¨ä¸€å®šæ•°ç›®çš„å°åŒºé—´(bin)æ¥æŒ‡å®šè¡¨å¾åƒç´ å€¼çš„èŒƒå›´ï¼Œæ¯ä¸ªå°åŒºé—´ä¼šå¾—åˆ°è½å…¥è¯¥å°åŒºé—´è¡¨ç¤ºèŒƒå›´çš„åƒç´ æ•°ç›®ã€‚
æ›´å¤šå†…å®¹å‚è€ƒå›¾åƒçš„äºŒå€¼åŒ–ä¹‹python+opencvå’Œopencv pythonå›¾åƒäºŒå€¼åŒ–ã€‚


å®è·µå›ºå®šé˜ˆå€¼æ³•import cv2from matplotlib import pyplot as pltimg=cv2.imread(&#x27;../image/test.jpg&#x27;)GrayImage=cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)ret,thresh1=cv2.threshold(GrayImage,127,255,cv2.THRESH_BINARY)ret,thresh2=cv2.threshold(GrayImage,127,255,cv2.THRESH_BINARY_INV)ret,thresh3=cv2.threshold(GrayImage,127,255,cv2.THRESH_TRUNC)ret,thresh4=cv2.threshold(GrayImage,127,255,cv2.THRESH_TOZERO)ret,thresh5=cv2.threshold(GrayImage,127,255,cv2.THRESH_TOZERO_INV)titles = [&#x27;Gray Image&#x27;,&#x27;BINARY&#x27;,&#x27;BINARY_INV&#x27;,&#x27;TRUNC&#x27;,&#x27;TOZERO&#x27;,&#x27;TOZERO_INV&#x27;]images = [GrayImage, thresh1, thresh2, thresh3, thresh4, thresh5]for i in range(6):   plt.subplot(2,3,i+1),plt.imshow(images[i],&#x27;gray&#x27;)   plt.title(titles[i])   plt.xticks([]),plt.yticks([])plt.show()


å¦‚æœæŠ¥é”™æ²¡æœ‰matplotlibï¼Œé‚£ä¹ˆå…ˆæ‰§è¡Œpip install matplotlibè¿›è¡Œå®‰è£…ã€‚
retval,dst = cv.threshold(src, thresh, maxval, type[, dst] )å‚æ•°è§£é‡Šï¼š

srcï¼šåŸå›¾åƒï¼ŒåŸå›¾åƒåº”è¯¥æ˜¯ç°åº¦å›¾ã€‚
threshï¼šç”¨æ¥å¯¹åƒç´ å€¼è¿›è¡Œåˆ†ç±»çš„é˜ˆå€¼ã€‚
maxvalï¼šå¤§äºé˜ˆå€¼ç½®ä¸ºmaxvalã€‚
typeï¼šä¸åŒçš„é˜ˆå€¼æ–¹æ³•ã€‚

å¹³å‡é˜ˆå€¼æ³•import cv2import numpy as npfrom matplotlib import pyplot as pltimg=cv2.imread(&#x27;../image/test.jpg&#x27;)GrayImage=cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)k=np.mean(GrayImage)ret,thresh1=cv2.threshold(GrayImage,k,255,cv2.THRESH_BINARY)ret,thresh2=cv2.threshold(GrayImage,k,255,cv2.THRESH_BINARY_INV)ret,thresh3=cv2.threshold(GrayImage,k,255,cv2.THRESH_TRUNC)ret,thresh4=cv2.threshold(GrayImage,k,255,cv2.THRESH_TOZERO)ret,thresh5=cv2.threshold(GrayImage,k,255,cv2.THRESH_TOZERO_INV)titles = [&#x27;Gray Image&#x27;,&#x27;BINARY&#x27;,&#x27;BINARY_INV&#x27;,&#x27;TRUNC&#x27;,&#x27;TOZERO&#x27;,&#x27;TOZERO_INV&#x27;]images = [GrayImage, thresh1, thresh2, thresh3, thresh4, thresh5]for i in range(6):   plt.subplot(2,3,i+1),plt.imshow(images[i],&#x27;gray&#x27;)   plt.title(titles[i])   plt.xticks([]),plt.yticks([])plt.show()

è‡ªé€‚åº”é˜ˆå€¼æ³•import cv2from matplotlib import pyplot as pltimg=cv2.imread(&#x27;../image/test.jpg&#x27;)GrayImage=cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)ret,th1 = cv2.threshold(GrayImage,127,255,cv2.THRESH_BINARY)th2 = cv2.adaptiveThreshold(GrayImage,255,cv2.ADAPTIVE_THRESH_MEAN_C,\                    cv2.THRESH_BINARY,3,4)th3 = cv2.adaptiveThreshold(GrayImage,255,cv2.ADAPTIVE_THRESH_GAUSSIAN_C,\                    cv2.THRESH_BINARY,3,4)titles = [&#x27;Gray Image&#x27;, &#x27;Global Thresholding (v = 127)&#x27;,&#x27;Adaptive Mean Thresholding&#x27;, &#x27;Adaptive Gaussian Thresholding&#x27;]images = [GrayImage, th1, th2, th3]for i in range(4):   plt.subplot(2,2,i+1),plt.imshow(images[i],&#x27;gray&#x27;)   plt.title(titles[i])   plt.xticks([]),plt.yticks([])plt.show()


dst = cv.adaptiveThreshold(src, maxValue, adaptiveMethod, thresholdType, blockSize, C[, dst] )å‚æ•°è§£é‡Šï¼š

srcï¼šæŒ‡åŸå›¾åƒï¼ŒåŸå›¾åƒåº”è¯¥æ˜¯ç°åº¦å›¾ã€‚
maxValueï¼šå¤§äºé˜ˆå€¼ç½®ä¸ºmaxValueã€‚
adaptiveMethodï¼šè¦ä½¿ç”¨çš„è‡ªé€‚åº”é˜ˆå€¼ç®—æ³•ã€‚
thresholdTypeï¼šé˜ˆå€¼ç±»å‹å¿…é¡»æ˜¯THRESH_BINARYæˆ–THRESH_BINARY_INVã€‚
blockSizeï¼šç”¨äºè®¡ç®—åƒç´ çš„é˜ˆå€¼çš„åƒç´ é‚»åŸŸçš„å¤§å°ï¼š3,5,7ç­‰ã€‚
Cï¼šä»å¹³å‡å€¼æˆ–åŠ æƒå¹³å‡å€¼ä¸­å‡å»å¸¸æ•°ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯æ­£æ•°ï¼Œä½†ä¹Ÿå¯èƒ½ä¸ºé›¶æˆ–è´Ÿæ•°ã€‚

ç›´æ–¹å›¾æ³•import cv2import numpy as npfrom matplotlib import pyplot as pltimg=cv2.imread(&#x27;../image/test.jpg&#x27;)img=cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)# global thresholdingret1,th1 = cv2.threshold(img,127,255,cv2.THRESH_BINARY)# Otsu&#x27;s thresholdingret2,th2 = cv2.threshold(img,0,255,cv2.THRESH_BINARY+cv2.THRESH_OTSU)# Otsu&#x27;s thresholding after Gaussian filteringblur = cv2.GaussianBlur(img,(5,5),0)ret3,th3 = cv2.threshold(blur,0,255,cv2.THRESH_BINARY+cv2.THRESH_OTSU)# plot all the images and their histogramsimages = [img, 0, th1,          img, 0, th2,          blur, 0, th3]titles = [&#x27;Original Noisy Image&#x27;,&#x27;Histogram&#x27;,&#x27;Global Thresholding (v=127)&#x27;,          &#x27;Original Noisy Image&#x27;,&#x27;Histogram&#x27;,&quot;Otsu&#x27;s Thresholding&quot;,          &#x27;Gaussian filtered Image&#x27;,&#x27;Histogram&#x27;,&quot;Otsu&#x27;s Thresholding&quot;]for i in range(3):    plt.subplot(3,3,i*3+1),plt.imshow(images[i*3],&#x27;gray&#x27;)    plt.title(titles[i*3]), plt.xticks([]), plt.yticks([])    plt.subplot(3,3,i*3+2),plt.hist(images[i*3].ravel(),256)    plt.title(titles[i*3+1]), plt.xticks([]), plt.yticks([])    plt.subplot(3,3,i*3+3),plt.imshow(images[i*3+2],&#x27;gray&#x27;)    plt.title(titles[i*3+2]), plt.xticks([]), plt.yticks([])plt.show()

åè®°è‡³æ­¤ï¼Œå®ç°äº†å¸¸ç”¨çš„å››ç§å›¾åƒäºŒå€¼åŒ–ç®—æ³•ã€‚æ ¹æ®ä¸åŒçš„éœ€è¦ï¼Œé€‰æ‹©ä¸åŒçš„ç®—æ³•ã€‚æ¯”å¦‚å¯¹äºè¿™å¹…å›¾ï¼Œå¦‚æœè¦æœ€ä½³çš„äºŒå€¼åŒ–æ˜¾ç¤ºæ•ˆæœï¼Œé‚£ä¹ˆå¹³å‡å€¼æ³•æœ€å¥½ï¼›å¦‚æœè¦æå–è½®å»“ï¼Œé‚£ä¹ˆè‡ªé€‚åº”é˜ˆå€¼æ³•æœ€å¥½ï¼›å¦‚æœè¦è·å–å…”æ–¯åŸºï¼Œé‚£ä¹ˆç›´æ–¹å›¾æ³•æœ€å¥½ã€‚
ä¹¦ç­¾OpenCV3.4å®˜æ–¹æ–‡æ¡£
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>æ¯•è®¾</tag>
        <tag>opencv</tag>
      </tags>
  </entry>
  <entry>
    <title>å›¾åƒç°åº¦åŒ–</title>
    <url>/dev-gp-image-graying/</url>
    <content><![CDATA[å‰è¨€ç¦»ç ”ç©¶ç”Ÿæ¯•ä¸šåªæœ‰å…­ä¸ªæœˆäº†ï¼Œæ¯•ä¸šè®¾è®¡ä¹Ÿè¯¥åŠ¨æ‰‹äº†ã€‚å»å¹´å¼€é¢˜ï¼Œé€‰æ‹©äº†ã€ŠåŸºäºå›¾åƒå¤„ç†çš„å®¢è§‚é¢˜è‡ªåŠ¨é˜…å·ç³»ç»Ÿçš„è®¾è®¡ä¸å®ç°ã€‹è¿™ä¸ªé¢˜ç›®ã€‚ä»Šå¹´ä¸­æœŸï¼Œè€ƒè™‘äº†å¾ˆä¹…ï¼Œæœ€ç»ˆè¿˜æ˜¯æ²¡æœ‰æ¢é¢˜ç›®ã€‚æƒ³è¦åšAIOpsï¼Œä½†æ˜¯è‡ªå·±åŸºç¡€è–„å¼±ï¼Œä¹Ÿæ²¡æœ‰ç‰¹å®šçš„æ–¹å‘ï¼Œåˆ°äº†å…­æœˆä»½ä¹Ÿä¸ä¸€å®šèƒ½å®Œæˆã€‚ä¿é™©èµ·è§ï¼Œè¿˜æ˜¯åšé˜…å·ç³»ç»Ÿå§ï¼
é˜…å·ç³»ç»Ÿä¸»è¦æœ‰äº”ä¸ªæ–¹é¢çš„ç ”ç©¶å†…å®¹ï¼Œåˆ†åˆ«æ˜¯å›¾åƒé¢„å¤„ç†ã€ç›®æ ‡æ£€æµ‹ã€å›¾åƒåˆ†å‰²ã€æ‰‹å†™è¯†åˆ«å’Œç§»åŠ¨Webã€‚å…¶ä¸­å›¾åƒé¢„å¤„ç†åŒ…æ‹¬è¯•å·å›¾åƒçš„ç°åº¦åŒ–ã€äºŒå€¼åŒ–ã€å»å™ªã€å€¾æ–œçŸ«æ­£ç­‰ï¼›ç›®æ ‡æ£€æµ‹æ˜¯ä¸ºäº†å®šä½å­¦å·å’Œç­”æ¡ˆçš„ä½ç½®ï¼Œå¹¶ä¸”æå–å‡ºè¿™äº›ä¿¡æ¯ï¼›å›¾åƒåˆ†å‰²æ˜¯ä¸ºäº†åˆ†å‰²å­¦å·å’Œå¤šé€‰é¢˜çš„å­—ç¬¦ï¼›æ‰‹å†™è¯†åˆ«æ˜¯ä¸ºäº†è¯†åˆ«æ‰‹å†™å­—ç¬¦ï¼ŒåŒ…æ‹¬æ•°å­—å’Œå­—æ¯ï¼›ç§»åŠ¨Webæ˜¯ä¸ºäº†æ–¹ä¾¿è€å¸ˆéšæ—¶éšåœ°ä½¿ç”¨ç³»ç»Ÿã€‚
æœ¬æ–‡ï¼Œå°±æ¥ç ”ç©¶ä¸€ä¸‹å›¾åƒçš„ç°åº¦åŒ–ã€‚


ç†è®ºåœ¨RGBæ¨¡å‹ä¸­ï¼Œå¦‚æœR=G=Bæ—¶ï¼Œåˆ™å½©è‰²è¡¨ç¤ºä¸€ç§ç°åº¦é¢œè‰²ï¼Œå…¶ä¸­R=G=Bçš„å€¼å«ç°åº¦å€¼ï¼Œå› æ­¤ï¼Œç°åº¦å›¾åƒæ¯ä¸ªåƒç´ åªéœ€ä¸€ä¸ªå­—èŠ‚å­˜æ”¾ç°åº¦å€¼ï¼ˆåˆç§°å¼ºåº¦å€¼ã€äº®åº¦å€¼ï¼‰ï¼Œç°åº¦èŒƒå›´ä¸º0-255ã€‚ä¸€èˆ¬æœ‰ä»¥ä¸‹å››ç§æ–¹æ³•å¯¹å½©è‰²å›¾åƒè¿›è¡Œç°åº¦åŒ–ï¼š
1ã€åˆ†é‡æ³•å°†å½©è‰²å›¾åƒä¸­çš„ä¸‰åˆ†é‡çš„äº®åº¦ä½œä¸ºä¸‰ä¸ªç°åº¦å›¾åƒçš„ç°åº¦å€¼ï¼Œå¯æ ¹æ®åº”ç”¨éœ€è¦é€‰å–ä¸€ç§ç°åº¦å›¾åƒã€‚f1(i,j)=R(i,j) f2(i,j)=G(i,j) f3(i,j)=B(i,j) å…¶ä¸­fk(i,j)(k=1,2,3)ä¸ºè½¬æ¢åçš„ç°åº¦å›¾åƒåœ¨(i,j)å¤„çš„ç°åº¦å€¼ã€‚
2ã€æœ€å¤§å€¼æ³• ã€€ã€€å°†å½©è‰²å›¾åƒä¸­çš„ä¸‰åˆ†é‡äº®åº¦çš„æœ€å¤§å€¼ä½œä¸ºç°åº¦å›¾çš„ç°åº¦å€¼ã€‚f(i,j)=max(R(i,j),G(i,j),B(i,j))
3ã€å¹³å‡å€¼æ³• ã€€ã€€å°†å½©è‰²å›¾åƒä¸­çš„ä¸‰åˆ†é‡äº®åº¦æ±‚å¹³å‡å¾—åˆ°ä¸€ä¸ªç°åº¦å›¾ã€‚f(i,j)=(R(i,j)+G(i,j)+B(i,j))/3
4ã€åŠ æƒå¹³å‡æ³• ã€€ã€€æ ¹æ®é‡è¦æ€§åŠå…¶å®ƒæŒ‡æ ‡ï¼Œå°†ä¸‰ä¸ªåˆ†é‡ä»¥ä¸åŒçš„æƒå€¼è¿›è¡ŒåŠ æƒå¹³å‡ã€‚ç”±äºäººçœ¼å¯¹ç»¿è‰²çš„æ•æ„Ÿæœ€é«˜ï¼Œå¯¹è“è‰²æ•æ„Ÿæœ€ä½ï¼Œå› æ­¤ï¼ŒæŒ‰ä¸‹å¼å¯¹RGBä¸‰åˆ†é‡è¿›è¡ŒåŠ æƒå¹³å‡èƒ½å¾—åˆ°è¾ƒåˆç†çš„ç°åº¦å›¾åƒã€‚f(i,j)=0.30R(i,j)+0.59G(i,j)+0.11B(i,j))
æ›´å¤šå†…å®¹å‚è€ƒå›¾åƒåˆ†æã€‚
å®è·µç®—æ³•çš„å®ç°ï¼Œä¸»è¦å‚è€ƒPythonä¸‹OpenCVçš„ä½¿ç”¨ â€“ å›¾åƒç°åº¦åŒ–ã€‚
å®‰è£…opencvè¿™ä¸ªæ¯•ä¸šè®¾è®¡ï¼Œæ‰“ç®—ä½¿ç”¨pythonæ¥å®ç°ï¼Œç¼–è¾‘å™¨ä½¿ç”¨pycharmã€‚å›¾åƒå¤„ç†æ–¹é¢ï¼Œä¸»è¦ä½¿ç”¨opencvã€‚é¦–å…ˆå®‰è£…opencvï¼Œå¾ˆç®€å•ï¼Œä¸€æ¡å‘½ä»¤å³å¯ï¼špip install opencv-python
å¦‚æœç¦»çº¿å®‰è£…çš„è¯ï¼Œä¸å¦¨å‚è€ƒä½¿ç”¨OpenCVå®ç°å®æ—¶è§†é¢‘ç›®æ ‡æ£€æµ‹ã€‚
å®‰è£…å®Œæˆåï¼Œå‘½ä»¤è¡Œä¸­è¾“å…¥pythonï¼Œè¿›å…¥python shellã€‚è¾“å…¥import cv2å›è½¦ï¼Œå¦‚æœæ²¡æœ‰æŠ¥é”™ï¼Œè¯´æ˜å®‰è£…æˆåŠŸã€‚
ç®€å•ç°åº¦åŒ–åœ¨åŠ è½½å›¾ç‰‡çš„æ—¶å€™ï¼Œç›´æ¥è°ƒç”¨opencvçš„ç°åº¦åŒ–æ–¹æ³•ã€‚
import cv2image = cv2.imread(&#x27;image/test.jpg&#x27;)grayimage = cv2.imread(&#x27;image/test.jpg&#x27;,cv2.IMREAD_GRAYSCALE)cv2.imshow(&#x27;image&#x27;,image)cv2.imshow(&#x27;grayimage&#x27;,grayimage)cv2.waitKey(0)

åˆ†é‡æ³•import cv2image = cv2.imread(&#x27;image/test.jpg&#x27;)b,g,r = cv2.split(image)   # the order is not r,g,bcv2.namedWindow(&quot;Image&quot;)cv2.imshow(&quot;Image&quot;,image)cv2.namedWindow(&quot;ImageR&quot;)cv2.imshow(&quot;ImageR&quot;,r)cv2.namedWindow(&quot;ImageG&quot;)cv2.imshow(&quot;ImageG&quot;,g)cv2.namedWindow(&quot;ImageB&quot;)cv2.imshow(&quot;ImageB&quot;,b)cv2.waitKey(0)cv2.destroyAllWindows()

æœ€å¤§å€¼æ³•import cv2import numpyimage = cv2.imread(&#x27;image/test.jpg&#x27;)shape = (image.shape[0],image.shape[1])newImage = numpy.ndarray(shape,image.dtype)for i in range(image.shape[0]):    for j in range(image.shape[1]):       newImage[i,j] = max(image[i,j][0],image[i,j][1],image[i,j][2])cv2.namedWindow(&quot;NewImageMax&quot;)cv2.imshow(&quot;NewImageMax&quot;,newImage)cv2.waitKey(0)cv2.destroyAllWindows()

å¹³å‡å€¼æ³•import cv2import numpyimage = cv2.imread(&#x27;image/test.jpg&#x27;)shape = (image.shape[0],image.shape[1])newImage = numpy.ndarray(shape,image.dtype)for i in range(image.shape[0]):    for j in range(image.shape[1]):       newImage[i,j] = (int(image[i,j][0]) + int(image[i,j][1]) + int(image[i,j][2])) / 3cv2.namedWindow(&quot;NewImageAver&quot;)cv2.imshow(&quot;NewImageAver&quot;,newImage)cv2.waitKey(0)cv2.destroyAllWindows()

åŠ æƒå¹³å‡æ³•import cv2import numpyimage = cv2.imread(&#x27;image/test.jpg&#x27;)shape = (image.shape[0],image.shape[1])newImage = numpy.ndarray(shape,image.dtype)for i in range(image.shape[0]):    for j in range(image.shape[1]):        newImage[i,j] = 0.11 * image[i,j][0] + 0.59 * image[i,j][1] + 0.30 * image[i,j][2]cv2.namedWindow(&quot;NewImageWeightAver&quot;)cv2.imshow(&quot;NewImageWeightAver&quot;,newImage)cv2.waitKey(0)cv2.destroyAllWindows()

åè®°å…³äºå›¾åƒç°åº¦åŒ–ï¼Œå°±æ•´ç†åˆ°è¿™é‡Œï¼Œä¹‹åä¼šç»§ç»­ç ”ç©¶å…¶ä»–çŸ¥è¯†ç‚¹ã€‚
ä¹¦ç­¾opencv-pythonå¿«é€Ÿå…¥é—¨ç¯‡
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>æ¯•è®¾</tag>
        <tag>opencv</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Libvirtè¿›è¡Œè™šæ‹Ÿæœºåœ¨çº¿è¿ç§»</title>
    <url>/dev-libvirt-vm-live-migration/</url>
    <content><![CDATA[å‰è¨€ã€Šè™šæ‹Ÿæœºåœ¨çº¿è¿ç§»å®éªŒã€‹ä¸€æ–‡ä¸­æåˆ°ï¼Œè¿ç§»è¿‡ç¨‹ä¸­çš„downtimeä¸åˆç†ï¼Œä½†æ˜¯æ²¡æœ‰æ‰¾åˆ°åŸå› ã€‚
æœ¬æ–‡ï¼Œæˆ‘ä»¬æ¥ä½¿ç”¨Libvirtè¿›è¡Œè™šæ‹Ÿæœºåœ¨çº¿è¿ç§»ï¼Œå¦‚æœdowntimeåœ¨æ¯«ç§’çº§ï¼Œé‚£ä¹ˆè¯´æ˜é—®é¢˜å‡ºåœ¨OpenStackä¸Šã€‚å‚è€ƒAn analysis of the performance of live migration in Openstackçš„è¯„è®ºéƒ¨åˆ†ï¼Œå¯ä»¥å‘ç°æœ‰äººé‡åˆ°çš„åŒæ ·çš„é—®é¢˜ï¼Œdowntimeè¿œå¤§äº1sã€‚ä½œè€…çš„çŒœæµ‹æ˜¯libvirtçš„è®¾ç½®å¼•èµ·çš„ï¼Œä¹Ÿå¯èƒ½æ˜¯ç”±äºè¿ç§»åç½‘ç»œé€‚åº”é€Ÿåº¦è¾ƒæ…¢é€ æˆçš„ã€‚
å‚è€ƒæ–‡æ¡£ï¼šKVM è™šæ‹Ÿæœºåœ¨ç‰©ç†ä¸»æœºä¹‹é—´è¿ç§»çš„å®ç°


å®éªŒç¯å¢ƒå‚è€ƒã€Šä½¿ç”¨Libvirtåˆ›å»ºè™šæ‹Ÿæœºã€‹ä¸€æ–‡ï¼Œåœ¨node0å’Œnode1ä¸¤ä¸ªèŠ‚ç‚¹ä¸Šå®‰è£…libvirtå’Œqemuï¼ŒIPåˆ†åˆ«ä¸º192.168.56.200å’Œ192.168.56.201ã€‚
NFSè¦æƒ³è¿›è¡Œè™šæ‹Ÿæœºçš„è¿ç§»ï¼Œé¦–å…ˆè¿å‡ºä¸»æœºï¼ˆnode0ï¼‰å’Œè¿å…¥ä¸»æœºï¼ˆnode1ï¼‰å­˜æ”¾è™šæ‹Ÿæœºç£ç›˜çš„ç›®å½•ç»“æ„è¦ç›¸åŒã€‚
å‚è€ƒæ–‡æ¡£ã€ŠLinuxä¸­å®‰è£…NFSã€‹ï¼Œåœ¨node0å®‰è£…nfs-serverï¼Œnode1å®‰è£…nfs-clientã€‚
é…ç½®node0çš„nfsæœåŠ¡è·¯å¾„ä¸ºï¼š
192.168.56.200:/opt/qemu

é…ç½®node1æŒ‚è½½nfsç›®å½•ï¼š
mkdir /opt/qemumount -t nfs 192.168.56.200:/opt/qemu /opt/qemuchmod -R 777 /opt/qemu

libvirtç«¯å£é…ç½®1ã€æµ‹è¯•è¿æ¥virsh -c qemu+tcp://node1/system
æç¤ºï¼š
error: failed to connect to the hypervisorerror: unable to connect to server at &#x27;node1:16509&#x27;: Connection refused

2ã€åœ¨node0å’Œnode1è°ƒæ•´libvirtçš„é…ç½®vim /etc/libvirt/libvirtd.confï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 22, uncommentlisten_tls = 0# line 33, uncommentlisten_tcp = 1# line 45, uncommenttcp_port = &quot;16509&quot;# line 55, uncomment and changelisten_addr = &quot;0.0.0.0&quot;# line 163, uncomment and changeauth_tcp = &quot;none&quot;

3ã€é‡å¯libvirtservice libvirtd restart
4ã€æŸ¥çœ‹libvirtæœåŠ¡netstat -anpt | grep libvirtç†è®ºä¸Šåº”è¯¥çœ‹åˆ°ç›‘å¬16509ï¼Œä½†æ˜¯æ²¡æœ‰ã€‚
5ã€ä¿®æ”¹libvirt-bin.confé…ç½®ï¼ˆå¯é€‰ï¼‰vim /etc/init/libvirt-bin.confï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 11, add -lenv libvirtd_opts=&quot;-d -l&quot;

6ã€é‡å¯libvirt-binï¼ˆå¯é€‰ï¼‰service libvirt-bin restartä¾ç„¶æ²¡æœ‰ç›‘å¬16509ç«¯å£ã€‚
vim /etc/init/libvirt-bin.confï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 58, add -lexec /usr/sbin/libvirtd $libvirtd_opts -l
é‡å¯libvirt-binä¾ç„¶æ— æ•ˆã€‚
7ã€è¿˜åŸlibvirt-bin.confï¼Œä¿®æ”¹libvirt-binvim /etc/default/libvirt-binï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 8, uncomment and changelibvirtd_opts=&quot;-d -l&quot;
é‡å¯libvirt-binï¼Œå‘ç°ç«¯å£ç›‘å¬æˆåŠŸã€‚
8ã€å†æ¬¡æµ‹è¯•è¿æ¥virsh -c qemu+tcp://node1/systemè¿æ¥æˆåŠŸï¼Œniceã€‚
å…å¯†ç™»å½•è™šæ‹Ÿæœºè¿ç§»ï¼Œå¯ä»¥ä½¿ç”¨æ™®é€šç”¨æˆ·ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨rootç”¨æˆ·ã€‚å¦‚æœæ˜¯æ™®é€šç”¨æˆ·è¿›è¡Œè¿ç§»ï¼Œé‚£ä¹ˆåœ¨è¾“å…¥è¿ç§»å‘½ä»¤åï¼Œéœ€è¦è¾“å…¥node1ä¸­æ™®é€šç”¨æˆ·çš„å¯†ç ã€‚å¦‚æœæ˜¯rootç”¨æˆ·è¿›è¡Œè¿ç§»ï¼Œé‚£ä¹ˆåœ¨è¾“å…¥è¿ç§»å‘½ä»¤åï¼ŒåŒæ ·éœ€è¦è¾“å…¥node1ä¸­rootç”¨æˆ·çš„å¯†ç ã€‚ä½†æ˜¯ï¼Œrootç”¨æˆ·å¹¶æ²¡æœ‰å¯ç”¨å¯†ç ç™»å½•ï¼Œæ‰€ä»¥ï¼Œéœ€è¦ç»™rootç”¨æˆ·è®¾ç½®å…å¯†ç™»å½•ã€‚
1ã€åœ¨node0ä¸Šåˆ›å»ºå¯†é’¥å¯¹ssh-keygenæ‰€æœ‰çš„æç¤ºæŒ‰enteré”®å³å¯ï¼Œå®Œæˆååœ¨homeç›®å½•æ‰§è¡Œll .sshï¼Œå³å¯çœ‹åˆ°åˆ›å»ºå¥½çš„id_rsaå’Œid_rsa.pubæ–‡ä»¶ã€‚
2ã€æŠŠå…¬é’¥æ‹·è´åˆ°æ‰€æœ‰å®¢æˆ·æœºä¸­ssh-copy-id -i .ssh/id_rsa.pub -p 22 voidking@node1
3ã€åœ¨node1ä¸­ä½¿ç”¨rootç”¨æˆ·æ‰§è¡Œcp -r /home/voidking/.ssh ~
åŒæ ·çš„ï¼Œä¹Ÿç»™node1æ·»åŠ å…å¯†ç™»å½•node0ã€‚
è™šæ‹Ÿæœºè¿ç§»å‚è€ƒkvmè™šæ‹Ÿæœºè¿ç§»ï¼Œè¿›è¡Œè™šæ‹ŸæœºåŠ¨æ€è¿ç§»ã€‚
1ã€åœ¨node0æŸ¥çœ‹è™šæ‹Ÿæœºvirsh list
2ã€è™šæ‹Ÿæœºè¿ç§»virsh migrate --live --verbose cirros qemu+ssh://node1/system tcp://node1 --unsafeå…¶ä¸­node1å¯ä»¥æ¢æˆroot@node1ã€‚
åè®°æœ¬æ¥æ‰“ç®—åœ¨ã€ŠLibvirtè™šæ‹Ÿæœºç½‘ç»œé…ç½®ã€‹ä¸€æ–‡ä¸­é…ç½®å¥½ç½‘ç»œï¼Œä½¿å¾—node0å¯ä»¥è®¿é—®åˆ°node1ä¸­çš„å®ä¾‹ï¼Œnode1å¯ä»¥è®¿é—®åˆ°node0ä¸­çš„å®ä¾‹ã€‚ä½†æ˜¯ï¼Œé…ç½®å¤±è´¥äº†ã€‚æ‰€ä»¥ï¼Œå°±æ— æ³•æµ‹è¯•è™šæ‹Ÿæœºè¿ç§»çš„åœæœºæ—¶é—´äº†ã€‚å¦‚æœä¹‹åè§£å†³äº†æ¡¥æ¥çš„é—®é¢˜ï¼Œå°±å†æ¥æ›´æ–°ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>network</category>
        <category>storage</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>å­˜å‚¨</tag>
        <tag>libvirt</tag>
        <tag>virsh</tag>
      </tags>
  </entry>
  <entry>
    <title>Libvirtè™šæ‹Ÿæœºç½‘ç»œé…ç½®</title>
    <url>/dev-libvirt-vm-network/</url>
    <content><![CDATA[å‰è¨€ã€Šä½¿ç”¨Libvirtåˆ›å»ºè™šæ‹Ÿæœºã€‹ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¼šäº†ä½¿ç”¨Libvirtåˆ›å»ºè™šæ‹Ÿæœºçš„æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œæ–‡ä¸­åˆ›å»ºçš„è™šæ‹Ÿæœºåªèƒ½åœ¨å®¿ä¸»æœºnode0ä¸Šè®¿é—®ï¼Œnode1å°±æ— æ³•è®¿é—®ï¼Œä¹Ÿå°±æ˜¯è¯´è™šæ‹Ÿæœºå’Œå®¿ä¸»æœºå¤–éƒ¨çš„ç½‘ç»œè¿˜æ²¡æœ‰æ‰“é€šã€‚
æœ¬æ–‡ï¼Œå°±æ¥ç ”ç©¶ä¸€ä¸‹è™šæ‹Ÿæœºç½‘ç»œé…ç½®çš„æ–¹æ³•ï¼Œä½¿å¾—node1ä¹Ÿå¯ä»¥è®¿é—®åˆ°node0ä¸­çš„è™šæ‹Ÿæœºã€‚


ç½‘ç»œé…ç½®1æœ€ç®€å•çš„å®ç°æ–¹æ³•ï¼Œå°±æ˜¯VMè¦æœ‰ä¸€ä¸ªå¯¹å¤–æä¾›æœåŠ¡çš„IPï¼Œè¿™ä¸ªIPä¸ä¾èµ–äºå®¿ä¸»æœºï¼Œè€Œæ˜¯å’Œå®¿ä¸»æœºçš„IPåŒçº§ã€‚
å‚è€ƒKVM ä»¥åŠæ¡¥æ¥ç½‘ç»œé…ç½®å’Œlibvirt kvm è™šæ‹Ÿæœºä¸Šç½‘ â€“ Bridgeæ¡¥æ¥è¿›è¡Œé…ç½®ã€‚
1ã€åœ¨node0çš„ç½‘ç»œé…ç½®ä¸­è¿›è¡Œä¿®æ”¹ï¼š
#auto eth0#iface eth0 inet static#address 192.168.56.200#netmask 255.255.255.0auto eth0iface eth0 inet manualup ifconfig $IFACE 0.0.0.0 upup ifconfig $IFACE promiscauto br0iface br0 inet staticaddress 192.168.56.200netmask 255.255.255.0gateway 192.168.56.1bridge_ports eth0bridge_stp offbridge_fd 0bridge_maxwait 0

ä½¿ç”¨br0æ›¿ä»£eth0ï¼Œeth0åšæµé‡è½¬å‘ã€‚
2ã€é‡å¯ç½‘ç»œ
/etc/init.d/networking restart

3ã€ä¿®æ”¹è·¯ç”±ï¼ˆå¯é€‰ï¼‰
route -nroute del -net 192.168.56.0/24 dev eth0route add -net 192.168.56.0/24 dev br0

åŒæ ·çš„ï¼Œåœ¨node1ä¸­ä¹Ÿé…ç½®br0ã€‚
ä¸‹é¢å‚è€ƒè™šæ‹Ÿæœºåœ¨çº¿æ·»åŠ ç½‘å¡ï¼Œæ·»åŠ ç½‘å¡ã€‚
4ã€æ·»åŠ ç½‘å¡
virsh domiflist cirrosvirsh attach-interface cirros --type bridge --source br0 --configvirsh domiflist cirros
å¦‚æœåœ¨å®ä¾‹å¼€æœºçŠ¶æ€ä¸‹æ·»åŠ ç½‘å¡ï¼Œéœ€è¦é‡å¯å®ä¾‹åæ‰èƒ½çœ‹åˆ°ã€‚
5ã€ç½‘å¡ä¿¡æ¯ä¿å­˜åˆ°é…ç½®æ–‡ä»¶
virsh dumpxml cirros &gt;/etc/libvirt/qemu/cirros.xml virsh define /etc/libvirt/qemu/cirros.xml 

PSï¼šåˆ é™¤ç½‘å¡
virsh detach-interface cirros --type bridge --mac 52:54:00:09:36:ad

6ã€ç™»å½•å®ä¾‹åï¼Œé…ç½®æ–°ç½‘å¡çš„IP
sudo vi /etc/network/interfaces

æ·»åŠ eth1çš„é…ç½®ï¼š
auto eth1iface eth1 inet staticaddress 192.168.56.202netmask 255.255.255.0

7ã€é‡å¯å®ä¾‹
sudo reboot
è‡³æ­¤ï¼Œå®ä¾‹æ¡¥æ¥ç½‘ç»œé…ç½®å®Œæˆã€‚
8ã€æµ‹è¯•ç½‘ç»œåœ¨node0ä¸Šping 192.168.56.202 -c2ï¼Œæ­£å¸¸ã€‚åœ¨node1ä¸Šping 192.168.56.202 -c2ï¼Œä¸é€šã€‚åœ¨virtualboxå®¿ä¸»æœºä¸Šping 192.168.56.202 -c2ï¼Œä¸é€šã€‚
ä»¥ä¸Šï¼Œæˆ‘ä»¬çš„é…ç½®å¤±è´¥äº†ï¼Œå› ä¸ºé™¤äº†node0ï¼Œå…¶ä»–æœºå™¨æ— æ³•è®¿é—®å®ä¾‹ã€‚ä¸‹é¢æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹å½“å‰ç½‘ç»œï¼Œå¦‚ä¸‹å›¾ï¼šç»è¿‡æµ‹è¯•ï¼Œnode0åˆ°switch0æ˜¯é€šçš„ï¼Œnode0åˆ°vm0æ˜¯é€šçš„ï¼Œä½†æ˜¯vm0åˆ°switch0ä¸é€šã€‚è¯¡å¼‚ï¼Œç†è®ºä¸Šåº”è¯¥æ˜¯é€šçš„å•Šï¼
ç½‘ç»œé…ç½®2é‚£ä¹ˆï¼Œæ€ä¹ˆæ‰“é€švm0åˆ°switch0å‘¢ï¼Ÿæœ€å®¹æ˜“æƒ³åˆ°çš„ï¼Œæ˜¯æŠŠvm0ç›´æ¥è¿æ¥åˆ°eth0ä¸Šï¼Œè€Œbr0å•çº¯ä½œä¸ºnode0çš„ç®¡ç†ç½‘ç»œã€‚ä¿®æ”¹åçš„æ–¹æ¡ˆå¦‚ä¸‹å›¾ï¼š
1ã€ä¿®æ”¹cirrosé…ç½®
virsh edit cirros

æ‰¾åˆ°ï¼š
&lt;interface type=&#x27;bridge&#x27;&gt;  &lt;mac address=&#x27;52:54:00:09:36:ad&#x27;/&gt;  &lt;source bridge=&#x27;br0&#x27;/&gt;  &lt;model type=&#x27;rtl8139&#x27;/&gt;  &lt;address type=&#x27;pci&#x27; domain=&#x27;0x0000&#x27; bus=&#x27;0x00&#x27; slot=&#x27;0x06&#x27; function=&#x27;0x0&#x27;/&gt;&lt;/interface&gt;
æŠŠsourceä¸­çš„br0æ”¹ä¸ºeth0ã€‚
2ã€é‡å¯å®ä¾‹
virsh shutdown cirrosvirsh start cirros

æŠ¥é”™ï¼š
error: Failed to start domain cirroserror: Unable to add bridge eth0 port vnet1: Operation not supported
æƒ³æ³•æ˜¯ç¾å¥½çš„ï¼Œä½†æ˜¯è¡Œä¸é€šå•Šï¼
å‚è€ƒAttaching a Virtual NIC Directly to a Physical Interfaceè¿›è¡Œä¿®æ”¹ï¼Œä½†æ˜¯åˆæŠ¥å‡ºäº†å…¶ä»–é”™è¯¯ï¼š
error: Failed to start domain cirroserror: error creating macvtap interface macvtap0@eth0 (52:54:00:c8:33:b3): Device or resource busy
å‚è€ƒUsing KVM with Libvirt and macvtap Interfacesä¹Ÿè®¸å¯ä»¥è§£å†³ï¼Œä½†æ˜¯æ„Ÿè§‰å¥½éº»çƒ¦ï¼Œæ‰€ä»¥å†³å®šæ”¾å¼ƒè¿™ä¸ªæ–¹æ¡ˆã€‚
ç½‘ç»œé…ç½®3å¦‚æœï¼Œå†åˆ›å»ºä¸€ä¸ªç½‘æ¡¥ï¼Œè¿™ä¸ªç½‘æ¡¥ä¸æŒ‡å®šIPå‘¢ï¼Ÿå¦‚ä¸‹å›¾ï¼š
1ã€åˆ›å»ºæ–°ç½‘æ¡¥br1
vim /etc/network/interfaces

æ·»åŠ ï¼š
auto br1iface br1 inet dhcpbridge_ports eth0bridge_stp offbridge_fd 0bridge_maxwait 0

2ã€å¯åŠ¨br1
ifup br1

æŠ¥é”™ï¼š
device eth0 is already a member of a bridge; can&#x27;t enslave it to bridge br1.Internet Systems Consortium DHCP Client 4.3.3......
ç”±ä¸Šå¯çŸ¥ï¼Œä¸€ä¸ªç‰©ç†ç½‘å¡ï¼Œåªèƒ½ç»‘å®šåˆ°ä¸€ä¸ªç½‘æ¡¥ä¸Šã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªæƒ³æ³•ä¹Ÿæ˜¯è¡Œä¸é€šçš„ã€‚
ç½‘ç»œé…ç½®4é‚£ä¹ˆï¼ŒæŠŠbr1ç»‘å®šåˆ°eth2ï¼ˆeth1æ˜¯ä¸Šç½‘ç½‘å¡ï¼‰ä¸Šé¢å‘¢ï¼Ÿå¦‚ä¸‹å›¾ï¼š
1ã€ä¿®æ”¹br1é…ç½®
vim /etc/network/interfaces

å¦‚ä¸‹ä¿®æ”¹ï¼š
auto eth2iface eth2 inet manualup ifconfig $IFACE 0.0.0.0 upup ifconfig $IFACE promiscauto br1iface br1 inet dhcpbridge_ports eth2bridge_stp offbridge_fd 0bridge_maxwait 0

2ã€å¯åŠ¨br1
ifup eth2ifup br1

3ã€ç¼–è¾‘cirrosé…ç½®ï¼Œä¿®æ”¹br0ä¸ºbr1ï¼Œé‡å¯cirrosã€‚ç»“æœï¼Œvm0åˆ°switch0ä¾ç„¶ä¸é€šã€‚è¯æ˜è¿™ä¸ªæ–¹æ¡ˆä¹Ÿä¸è¡Œã€‚
ç½‘ç»œé…ç½®5ç½‘ç»œé…ç½®2ã€3ã€4éƒ½ä¸è¡Œï¼Œçœ‹æ¥æ‹è„‘é—¨æƒ³å‡ºæ¥çš„æ–¹æ³•ä¸å¤ªé è°±ã€‚å®é™…ä¸Šç½‘ç»œé…ç½®1åº”è¯¥æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ï¼Œå´æ— æ³•è¿é€šï¼Œé—®é¢˜å‡ºåœ¨å“ªé‡Œå‘¢ï¼Ÿè«éï¼Œæ˜¯å› ä¸ºvirtualboxï¼Ÿvirtualboxæœ‰å¤šç§ç½‘ç»œæ¨¡å¼ï¼Œnode1å’Œnode2ä½¿ç”¨çš„æ˜¯Host-only Adapterï¼Œå¦‚æœæ¢æˆBridged Adapterå‘¢ï¼Ÿé‚£å°±è¯•è¯•å§ï¼ç»“æœï¼Œä¾ç„¶å¤±è´¥ã€‚
åè®°è¿˜èƒ½ä¸èƒ½æ„‰å¿«åœ°ç©è€äº†ï¼Ÿæ˜æ˜å¾ˆç®€å•çš„æ¡¥æ¥ï¼Œä¸ºå•¥å°±ä¸é€šå‘¢ï¼Ÿè¯¡å¼‚ï¼Œå®åœ¨è¯¡å¼‚ã€‚éƒåŒå­¦è¡¨ç¤ºå·²ç»æ— èƒ½ä¸ºåŠ›ï¼Œç•™ä¸ªå‘å§ï¼
ä¹¦ç­¾
KVM/Networking
Networking
VirtualNetworking
KVM and OVS on Ubuntu 16.04
ubuntu16.04 é…ç½®kvm openvswitch æ¡¥æ¥ç¯å¢ƒ
Open vSwitch + libvirt æ­å»ºvlanç½‘ç»œ
How to Put a KVM Guest Domain on a Bridged Network

]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>ç½‘ç»œ</tag>
        <tag>libvirt</tag>
        <tag>virsh</tag>
      </tags>
  </entry>
  <entry>
    <title>ç»„ç½‘æŠ€æœ¯æ¦‚è¿°</title>
    <url>/dev-network-building/</url>
    <content><![CDATA[ç»„ç½‘æŠ€æœ¯æ˜¯å•¥ï¼Ÿç»„ç½‘æŠ€æœ¯æ˜¯æŒ‡ç½‘ç»œç»„å»ºæŠ€æœ¯ï¼Œåˆ†ä¸ºä»¥å¤ªç½‘ç»„ç½‘æŠ€æœ¯å’Œå±€åŸŸç½‘ç»„ç½‘æŠ€æœ¯ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ç»„ç½‘æŠ€æœ¯ä¸é…ç½®



Meshç»„ç½‘Meshç»„ç½‘æ¦‚è¿°åœ¨å·¥ä½œå’Œç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬æœ€å¸¸ä½¿ç”¨åˆ°çš„æ˜¯å±€åŸŸç½‘ç»„ç½‘æŠ€æœ¯ä¸­çš„Meshç»„ç½‘ã€‚
Meshç»„ç½‘å¯ä»¥å®ç°WiFiä¿¡å·çš„å…¨å±‹è¦†ç›–ï¼Œå¹¶ä¸”åœ¨WiFiä¿¡å·çš„åˆ‡æ¢è¿‡ç¨‹ä¸­å®ç°æ— ç¼æ¼«æ¸¸ï¼Œæ‹¥æœ‰æ— æ„Ÿå¼åˆ‡æ¢çš„é«˜é€Ÿä¸Šç½‘ä½“éªŒã€‚
Meshç»„ç½‘æœ‰ä¸¤ç§æ–¹å¼ï¼šæ— çº¿ç»„ç½‘å’Œæœ‰çº¿ç»„ç½‘ã€‚æ— çº¿ç»„ç½‘æ˜¯ä¸»è·¯ç”±å’Œå­è·¯ç”±ä¹‹é—´é€šè¿‡WiFiè¿æ¥ï¼Œè·¯ç”±ä½ç½®çš„æ‘†æ”¾ä¸å—å¸ƒçº¿çš„é™åˆ¶ã€‚æœ‰çº¿ç»„ç½‘æ˜¯ä¸»è·¯ç”±å’Œå­è·¯ç”±ä¹‹é—´é€šè¿‡ç½‘çº¿è¿æ¥ï¼Œæœ‰çº¿Meshç›¸æ¯”å¯¹æ— çº¿Meshæ›´ç¨³å®šï¼Œä½†æ— çº¿Meshç›¸æ¯”å¯¹æœ‰çº¿Meshå¸ƒç½®æ›´è‡ªç”±å’Œç¾è§‚ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Meshç»„ç½‘æ•™ç¨‹ï¼ˆæœ‰çº¿+æ— çº¿ï¼‰

æœ‰çº¿Meshç»„ç½‘1ã€ä¸»è·¯ç”±é…ç½®èƒ½æ­£å¸¸ä¸Šç½‘
2ã€ä¸»è·¯ç”±å¼€å¯Meshç»„ç½‘åŠŸèƒ½
3ã€å­è·¯ç”±é€šç”µï¼Œæ¢å¤å‡ºå‚çŠ¶æ€
4ã€å­è·¯ç”±WANå£ï¼Œè¿æ¥ä¸»è·¯ç”±LANå£
5ã€å­è·¯ç”±ç­‰å¾…WANå£ç¯äº®å’Œç½‘ç»œç¯å¸¸äº®ï¼Œè¡¨ç¤ºç»„ç½‘æˆåŠŸ
æ— çº¿Meshç»„ç½‘1ã€ä¸»è·¯ç”±é…ç½®èƒ½æ­£å¸¸ä¸Šç½‘
2ã€ä¸»è·¯ç”±å¼€å¯Meshç»„ç½‘åŠŸèƒ½
3ã€å­è·¯ç”±é€šç”µï¼Œæ¢å¤å‡ºå‚çŠ¶æ€
4ã€åŒæ—¶æŒ‰ä¸‹ä¸»è·¯ç”±å’Œå­è·¯ç”±çš„WPSé”®ï¼Œç­‰å¾…ä¸»è·¯ç”±å’Œå­è·¯ç”±çš„ç½‘ç»œç¯å¼€å§‹é—ªçƒ
5ã€ç»§ç»­ç­‰å¾…ï¼Œå­è·¯ç”±ç½‘ç»œç¯å¸¸äº®ï¼Œè¡¨ç¤ºç»„ç½‘æˆåŠŸ
UniFiç»„ç½‘UniFiç»„ç½‘æ¦‚è¿°ï¼ˆæœ¬èŠ‚å†…å®¹æ¥è‡ªchatgptï¼‰
UniFi WiFiæ˜¯ä¸€ç§ç”±Ubiquiti Networksæä¾›çš„ä¼ä¸šçº§æ— çº¿å±€åŸŸç½‘ï¼ˆWLANï¼‰è§£å†³æ–¹æ¡ˆã€‚UniFi WiFié€šè¿‡é›†ä¸­ç®¡ç†å’Œæ§åˆ¶çš„æ–¹å¼ï¼Œæä¾›é«˜æ€§èƒ½ã€å¯æ‰©å±•å’Œæ˜“äºéƒ¨ç½²çš„æ— çº¿ç½‘ç»œã€‚
UniFi WiFiçš„ä¸»è¦ç‰¹ç‚¹å’ŒåŠŸèƒ½ï¼š

é›†ä¸­å¼ç®¡ç†ï¼šUniFi WiFié€šè¿‡UniFiæ§åˆ¶å™¨è½¯ä»¶å®ç°é›†ä¸­ç®¡ç†ã€‚ç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨æ§åˆ¶å™¨è½¯ä»¶æ¥é…ç½®å’Œç›‘æ§æ•´ä¸ªç½‘ç»œï¼ŒåŒ…æ‹¬æ— çº¿æ¥å…¥ç‚¹ï¼ˆAPï¼‰ã€è·¯ç”±å™¨å’Œäº¤æ¢æœºç­‰è®¾å¤‡ã€‚è¿™ç®€åŒ–äº†ç½‘ç»œç®¡ç†è¿‡ç¨‹ï¼ŒåŒæ—¶æä¾›äº†å…¨é¢çš„ç½‘ç»œå¯è§†åŒ–å’Œç»Ÿè®¡ä¿¡æ¯ã€‚
é«˜æ€§èƒ½æ— çº¿æ¥å…¥ç‚¹ï¼šUniFi WiFiæä¾›äº†ä¸€ç³»åˆ—é«˜æ€§èƒ½çš„æ— çº¿æ¥å…¥ç‚¹ï¼Œé€‚ç”¨äºä¸åŒè§„æ¨¡å’Œéœ€æ±‚çš„ç½‘ç»œç¯å¢ƒã€‚è¿™äº›æ¥å…¥ç‚¹æ”¯æŒæœ€æ–°çš„æ— çº¿æ ‡å‡†ï¼Œå¦‚802.11acå’Œ802.11axï¼ˆWi-Fi 6ï¼‰ï¼Œæä¾›æ›´å¿«çš„æ•°æ®ä¼ è¾“é€Ÿç‡å’Œæ›´å¤§çš„ç½‘ç»œå®¹é‡ã€‚
çµæ´»çš„ç½‘ç»œæ‹“æ‰‘ï¼šUniFi WiFiæ”¯æŒçµæ´»çš„ç½‘ç»œæ‹“æ‰‘ç»“æ„ã€‚ç®¡ç†å‘˜å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œæ— çº¿æ¥å…¥ç‚¹çš„éƒ¨ç½²ï¼ŒåŒ…æ‹¬å•ä¸€APã€å¤šä¸ªAPçš„æ— çº¿è¦†ç›–èŒƒå›´æ‰©å±•ï¼Œä»¥åŠç½‘æ¡¥æ¨¡å¼å’Œæ— çº¿åˆ†ç¦»æ¨¡å¼ç­‰ã€‚è¿™æ ·å¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚å®ç°æœ€ä½³çš„æ— çº¿è¦†ç›–å’Œç½‘ç»œæ€§èƒ½ã€‚
å®¢æˆ·ç«¯ç®¡ç†å’Œèº«ä»½éªŒè¯ï¼šUniFi WiFiæä¾›äº†å®¢æˆ·ç«¯ç®¡ç†åŠŸèƒ½ï¼Œå…è®¸ç®¡ç†å‘˜å¯¹è¿æ¥åˆ°ç½‘ç»œçš„è®¾å¤‡è¿›è¡Œç›‘æ§å’Œæ§åˆ¶ã€‚æ­¤å¤–ï¼ŒUniFi WiFiè¿˜æ”¯æŒå¤šç§èº«ä»½éªŒè¯æ–¹æ³•ï¼ŒåŒ…æ‹¬é¢„å…±äº«å¯†é’¥ï¼ˆPSKï¼‰ã€WPA Enterpriseå’ŒRADIUSè®¤è¯ç­‰ï¼Œä»¥ç¡®ä¿ç½‘ç»œçš„å®‰å…¨æ€§å’Œå¯æ§æ€§ã€‚
å¼ºå¤§çš„ç½‘ç»œåˆ†æå’ŒæŠ¥å‘Šï¼šUniFiæ§åˆ¶å™¨è½¯ä»¶æä¾›äº†ä¸°å¯Œçš„ç½‘ç»œåˆ†æå’ŒæŠ¥å‘ŠåŠŸèƒ½ã€‚ç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹å®æ—¶çš„ç½‘ç»œçŠ¶æ€ã€æµé‡åˆ†å¸ƒå’Œç”¨æˆ·è¿æ¥æƒ…å†µï¼Œä»¥åŠå†å²æ•°æ®å’Œæ€§èƒ½è¶‹åŠ¿ã€‚è¿™äº›æ•°æ®å’ŒæŠ¥å‘Šæœ‰åŠ©äºç½‘ç»œä¼˜åŒ–å’Œæ•…éšœæ’é™¤ã€‚

å‚è€ƒæ–‡æ¡£ï¼š

UniFi AP ä»‹ç»
UniFi - è®¾å¤‡é‡‡ç”¨

ä¿®æ”¹ Wi-Fi ä¿¡é“
ä¿¡é“ã€é¢‘é“æˆ–æ³¢é“ï¼Œæ˜¯ä¿¡å·åœ¨é€šä¿¡ç³»ç»Ÿä¸­ä¼ è¾“çš„é€šé“ï¼Œç”±ä¿¡å·ä»å‘å°„ç«¯ä¼ è¾“åˆ°æ¥æ”¶ç«¯æ‰€ç»è¿‡çš„ä¼ è¾“åª’è´¨æ‰€æ„æˆã€‚å¹¿ä¹‰çš„ä¿¡é“å®šä¹‰é™¤äº†åŒ…æ‹¬ä¼ è¾“åª’è´¨ï¼Œè¿˜åŒ…æ‹¬ä¼ è¾“ä¿¡å·çš„ç›¸å…³è®¾å¤‡ã€‚

æ ¹æ®å›½é™…ç”µä¿¡è”ç›Ÿï¼ˆITUï¼‰åˆ’åˆ†çš„é¢‘æ®µï¼Œè“ç‰™ã€Wi-Fiã€WAPIç­‰æ— çº¿æŠ€æœ¯éƒ½åœ¨2.4Gé¢‘æ®µå·¥ä½œã€‚è“ç‰™ä¼ è¾“æŠ€æœ¯ä¸­ï¼Œå·¥ä½œé¢‘ç‡æ˜¯2.402ï½2.480GHzï¼Œåœ¨è“ç‰™3.0æŠ€æœ¯æœ‰79ä¸ªä¿¡é“ï¼Œè€Œ4.0åˆ™é™ä½åˆ°40ä¸ªï¼ˆç”±äºå¸¦å®½å˜å¤§å¯¼è‡´ï¼Œå¹¶éåäº‹ï¼‰ã€‚Wi-Fi 2.4GæŠ€æœ¯ä¸­ï¼Œå·¥ä½œé¢‘ç‡ä¸º2.400ï½2.483GHzï¼Œä¸­å›½é‡‡ç”¨æ¬§æ´²/ETSIï¼Œæœ‰13ä¸ªä¿¡é“ã€‚åœ¨è¿™83.5MHzé¢‘å¸¦ä¸­ï¼Œæ¯ä¸ªä¿¡é“çš„ä¸­å¿ƒé¢‘ç‡ç›¸å·®5MHzï¼Œå‘ä¸Šå‘ä¸‹åˆ†åˆ«æ‹“å±•11MHzï¼Œå¸¦å®½22MHzã€‚
Wi-Fiä¸­ï¼Œæ¯ä¸ªä¿¡é“çš„å¸¦å®½æ˜¯22MHzã€‚ä½†æ˜¯ï¼Œå®é™…ä½¿ç”¨ä¸­ï¼Œæœ‰æ•ˆçš„å¸¦å®½æ˜¯20MHzï¼Œå…¶ä¸­æœ‰2MHzæ˜¯éš”ç¦»é¢‘å¸¦ï¼Œèµ·ä¿æŠ¤ä½œç”¨ã€‚
20MHzä¿¡é“å¸¦å®½å¯¹åº”çš„æ˜¯65Må¸¦å®½ ï¼Œå®ƒçš„ç‰¹æ€§æ˜¯ç©¿é€æ€§å¥½ ä¼ è¾“çš„è·ç¦»è¿œï¼ˆ100ç±³å·¦å³ï¼‰ã€‚
40MHzä¿¡é“å¸¦å®½å¯¹åº”çš„æ˜¯150Må¸¦å®½ ï¼Œå®ƒçš„ç©¿é€æ€§å·® ä¼ è¾“çš„è·ç¦»è¾ƒè¿‘ ï¼ˆ50ç±³å·¦å³)ã€‚
å› ä¸ºä¸€ä¸ªä¿¡é“çš„å¸¦å®½æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥å¦‚æœä¸€ä¸ªä¿¡é“è¢«é™„è¿‘çš„å¾ˆå¤šWi-Fiä½¿ç”¨ï¼Œé‚£ä¹ˆè¿™äº›å¯èƒ½ä¼šç›¸äº’å¹²æ‰°ï¼Œå¯¼è‡´ç½‘ç»œè´¨é‡å˜å·®ã€‚
ä¿®æ”¹ä¿¡é“ï¼Œå¯ä»¥å°½é‡é¿å…Wi-Fiäº’ç›¸å¹²æ‰°å¯¼è‡´çš„ç½‘ç»œè´¨é‡å˜å·®ã€‚
1ã€æ£€æµ‹ä¿¡é“çŠ¶æ€å¯¹äºmacosç”¨æˆ·ï¼Œæ‰“å¼€wireless Diagnosticsï¼ˆæ— çº¿è¯Šæ–­ï¼‰ï¼Œå¿½ç•¥æ‰“å¼€çš„çª—å£ã€‚èœå•æ ç‚¹å‡»çª—å£ï¼Œæ‰«æï¼Œçœ‹åˆ°ç½‘ç»œä¿¡æ¯ä¸­ï¼Œé¢‘æ®µå°±æ˜¯ä¿¡é“ã€‚å½“å‰ä½¿ç”¨çš„wifiä¿¡æ¯ä¼šè¢«åŠ ç²—ã€‚æŒ‰é¢‘æ®µæ’åºï¼Œå¯ä»¥çœ‹åˆ°å“ªäº›é¢‘æ®µç¹å¿™ï¼Œå“ªäº›é¢‘æ®µç©ºé—²ã€‚
PSï¼šæŒ‰ä½optionï¼Œå•å‡»æ¡Œé¢wifiå›¾æ ‡ï¼Œå¯ä»¥ç›´æ¥æ˜¾ç¤ºå½“å‰ä½¿ç”¨wifiä¿¡æ¯ï¼ˆåŒ…æ‹¬ä¿¡é“ï¼‰ã€‚
2ã€ä¿®æ”¹ä¿¡é“ç™»å½•è·¯ç”±å™¨è®¾ç½®é¡µé¢ï¼Œä¿®æ”¹ä¿¡é“åˆ°ç©ºé—²çš„ä¿¡é“ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ä¿¡é“
ä¿¡é“æ˜¯ä»€ä¹ˆ
æ— çº¿å±€åŸŸç½‘ä¿¡é“åˆ—è¡¨
WIFIä¸­é¢‘æ®µã€ä¿¡é“ã€ä¿¡é“å¸¦å®½ã€ä¼ è¾“é€Ÿç‡æ— çº¿2.4GHzå’Œ5GHzçš„åŒºåˆ«ï¼Ÿ
Wi-Fi è·¯ç”±å™¨å’Œæ¥å…¥ç‚¹çš„æ¨èè®¾ç½®
å¦‚ä½•ä¿®æ”¹ä¿¡é“ï¼Ÿ
æ— çº¿è·¯ç”±å™¨æ€ä¹ˆä¿®æ”¹WiFiä¿¡é“

]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>chatgpt</tag>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Libvirtåˆ›å»ºè™šæ‹Ÿæœº</title>
    <url>/dev-libvirt-create-vm/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ ä¸€ä¸‹qemuå’Œlibvirtï¼Œåˆ†åˆ«ä½¿ç”¨å®ƒä»¬åˆ›å»ºä¸€ä¸ªcirrosè™šæ‹Ÿæœºï¼Œå¹¶é…ç½®å¥½ç½‘ç»œã€‚
å®¿ä¸»æœºnode0çš„ç³»ç»Ÿä¸ºubuntu16ï¼ŒIPä¸º192.168.56.200ã€‚


qemuå’Œlibvirtç®€ä»‹QEMUæ˜¯ä¸€å¥—ç”±Fabrice Bellardç¼–å†™çš„æ¨¡æ‹Ÿå¤„ç†å™¨çš„è‡ªç”±è½¯ä»¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„å¯ä»¥å•ç‹¬è¿è¡Œçš„è½¯ä»¶ï¼Œå¯ä»¥ç‹¬ç«‹æ¨¡æ‹Ÿå‡ºæ•´å°è®¡ç®—æœºï¼ŒåŒ…æ‹¬CPUï¼Œå†…å­˜ï¼ŒIOè®¾å¤‡ï¼Œé€šè¿‡ä¸€ä¸ªç‰¹æ®Šçš„â€œé‡ç¼–è¯‘å™¨â€å¯¹ç‰¹å®šçš„å¤„ç†å™¨çš„äºŒè¿›åˆ¶ä»£ç è¿›è¡Œç¿»è¯‘ï¼Œä»è€Œå…·æœ‰äº†è·¨å¹³å°çš„é€šç”¨æ€§ã€‚
æ€»çš„æ¥è¯´ï¼ŒQEMUæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹ŸåŒ–è§£å†³æ–¹æ¡ˆï¼Œå¹¶ä¸ä¾èµ–KVMï¼Œå®ƒæœ¬èº«è‡ªå·±å¯ä»¥åšCPUå’Œå†…å­˜çš„æ¨¡æ‹Ÿï¼Œåªä¸è¿‡æ•ˆç‡è¾ƒä½ã€‚
KVMï¼ˆKernel-based Virtual Machineï¼‰æ˜¯å¦ä¸€å¥—è™šæ‹ŸåŒ–è§£å†³æ–¹æ¡ˆï¼Œå®ç°å¯¹CPUçš„åº•å±‚è™šæ‹ŸåŒ–å’Œå†…å­˜çš„è™šæ‹ŸåŒ–ï¼Œä½¿Linuxå†…æ ¸æˆä¸ºè™šæ‹ŸåŒ–å±‚ï¼Œéœ€è¦x86æ¶æ„çš„ã€æ”¯æŒè™šæ‹ŸåŒ–åŠŸèƒ½çš„ç¡¬ä»¶æ”¯æŒï¼ˆæ¯”å¦‚Intel VTï¼ŒAMD-Vï¼‰ï¼Œæ‰€ä»¥è™šæ‹Ÿæ•ˆç‡è¾ƒé«˜ï¼Œæ˜¯ä¸€ç§å…¨è™šæ‹ŸåŒ–æ¶æ„ã€‚
ä½†æ˜¯KVMæœ¬èº«ä¸æä¾›å…¶ä»–è®¾å¤‡çš„è™šæ‹ŸåŒ–ï¼Œå€Ÿç”¨äº†QEMUçš„ä»£ç è¿›è¡Œäº†å®šåˆ¶ï¼Œæ‰€ä»¥KVMæ–¹æ¡ˆä¸€å®šè¦ä¾èµ–QEMUã€‚
è€ŒLibvirtæ˜¯ç”¨äºç®¡ç†è™šæ‹ŸåŒ–å¹³å°çš„å¼€æºçš„APIï¼Œåå°ç¨‹åºå’Œç®¡ç†å·¥å…·ã€‚å®ƒå¯ä»¥ç”¨äºç®¡ç†KVMã€Xenã€VMware ESXã€QEMUå’Œå…¶ä»–è™šæ‹ŸåŒ–æŠ€æœ¯ã€‚
Libvirtä¸»è¦ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼šAPIåº“ï¼Œä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹libvirtdå’Œä¸€ä¸ªé»˜è®¤å‘½ä»¤è¡Œç®¡ç†å·¥å…· virshã€‚
å‚è€ƒæ–‡æ¡£ï¼š

QEMUå’ŒQEMU-KVMçš„å…³ç³»
libvirt ä»‹ç»

å®‰è£…qemuå’Œlibvirtå‚è€ƒUbuntu16.04å®‰è£…QEMUä¸libvirtï¼Œå®‰è£…QEMUå’Œlibvirtã€‚
1ã€åˆ‡æ¢åˆ°rootç”¨æˆ·
sudo -i#orsudo su

2ã€æŸ¥çœ‹ä¸»æœºæ˜¯å¦æ”¯æŒç¡¬ä»¶è™šæ‹ŸåŒ–
egrep -c &#x27;(vmx|svm)&#x27; /proc/cpuinfo

å› ä¸ºæˆ‘ä»¬çš„å®éªŒæœ¬èº«æ˜¯åœ¨è™šæ‹Ÿæœºä¸­è¿›è¡Œçš„ï¼Œæ‰€ä»¥è¾“å‡º0ï¼Œè¡¨ç¤ºä¸æ”¯æŒç¡¬ä»¶è™šæ‹ŸåŒ–ã€‚
3ã€å®‰è£…QEMUå’Œlibvirt
apt install -y qemu libvirt-bin bridge-utils virt-manager virt-viewer# å¦‚æœæ˜¯æ”¯æŒç¡¬ä»¶è™šæ‹ŸåŒ–ï¼Œé‚£ä¹ˆæ‰§è¡Œå®‰è£…apt install -y kvm qemu-kvm libvirt-bin bridge-utils virt-manager virt-viewer


bridge-utilsæ˜¯ç½‘æ¡¥ç®¡ç†å·¥å…·ã€‚
virt-manageræ˜¯ä¸€ä¸ªé€šç”¨çš„æ¡Œé¢ç®¡ç†å·¥å…·ã€‚
virt-vieweræ˜¯ä¸€ä¸ªç”¨äºæ˜¾ç¤ºè™šæ‹Ÿæœºçš„å›¾å½¢æ§åˆ¶å°çš„æœ€å°å·¥å…·ã€‚

4ã€æ£€æŸ¥å®‰è£…
virsh --versionvirt-manager --versionvirt-viewer --version

5ã€æŸ¥çœ‹ç½‘ç»œ
ip abrctl showvirsh net-list
å®‰è£…å®Œæˆä»¥åï¼Œé»˜è®¤æ˜¯å¯ç”¨äº†æ¡¥æ¥ç½‘ç»œvirbr0ï¼ŒIPä¸º192.168.122.1/24ã€‚å¦‚æœæ²¡æœ‰å¯ç”¨ï¼Œé‚£ä¹ˆå‚è€ƒubuntu16.04ç¯å¢ƒå®‰è£…KVMè¿›è¡Œå¯ç”¨ã€‚
å®‰è£…vncserverå®‰è£…vncserverï¼Œæ–¹ä¾¿è¿œç¨‹æŸ¥çœ‹è™šæ‹Ÿæœºçš„å®‰è£…è¿‡ç¨‹
apt-get install vnc4server

qemuåˆ›å»ºè™šæ‹Ÿæœºå‚è€ƒæ–‡æ¡£ï¼š

åµŒå¥—è™šæ‹ŸåŒ–â€”VMware+QEMU/KVM
ubuntuä¸‹ä½¿ç”¨qemuå®‰è£…è™šæ‹Ÿæœºå¹¶é…ç½®æ¡¥æ¥ç½‘ç»œ
ä½¿ç”¨qemuå®‰è£…è™šæ‹Ÿæœº

ä¸‹è½½ç³»ç»Ÿé•œåƒä¸‹è½½cirrosç³»ç»Ÿé•œåƒ
wget http://download.cirros-cloud.net/0.4.0/cirros-0.4.0-x86_64-disk.img

åˆ›å»ºç£ç›˜mkdir /opt/qemucd /opt/qemuqemu-img create -f qcow2 cirros0.img 5g

å‚æ•°è¯´æ˜ï¼š

qcow2æ˜¯qemuæœ€å¸¸ä½¿ç”¨çš„ç£ç›˜æ ¼å¼ï¼Œè¯¥æ ¼å¼ä¸‹å¯ä»¥é‡‡ç”¨å†™æ—¶å¤åˆ¶æŠ€æœ¯æ¥ä¼˜åŒ–æ€§èƒ½
cirros0.imgæ˜¯ç£ç›˜åç§°
5gæ˜¯æŒ‡ç£ç›˜æ–‡ä»¶å¤§å°

å®‰è£…ç³»ç»Ÿåˆ°ç£ç›˜qemu-system-x86_64 -hda cirros0.img -boot d -cdrom ./cirros-0.4.0-x86_64-disk.img -m 512 -vnc :1# å¦‚æœæ˜¯æ”¯æŒç¡¬ä»¶è™šæ‹ŸåŒ–ï¼Œé‚£ä¹ˆæ‰§è¡Œå®‰è£…qemu-system-x86_64 -enable-kvm -hda cirros0.img -boot d -cdrom ./cirros-0.4.0-x86_64-disk.img -m 512 -vnc :1

å‚æ•°è¯´æ˜ï¼š

enable-kvmä½¿ç”¨KVMè¿›è¡ŒåŠ é€Ÿï¼›
hdaæŒ‡å®šè¦ä½¿ç”¨çš„è™šæ‹Ÿç£ç›˜ï¼›
boot dæŒ‡å®šå¯åŠ¨ä½ç½®ï¼Œdè¡¨ç¤ºä»å…‰ç›˜å¯åŠ¨ï¼›
cdromæŒ‡å®šé•œåƒæ–‡ä»¶ï¼›
mæŒ‡å®šè™šæ‹Ÿæœºå†…å­˜å¤§å°ï¼Œé»˜è®¤å•ä½æ˜¯MBï¼›
vnc:1é€šè¿‡vncåˆ›å»ºè™šæ‹Ÿæ¡Œé¢ã€‚

å‡ºç°è­¦å‘Šï¼šwarning: TCG doesnâ€™t support requested feature: CPUID.01H:ECX.vmx [bit 5]æ²¡å•¥å½±å“ï¼Œä¸å»ç®¡å®ƒã€‚
æŸ¥çœ‹å®‰è£…è¿‡ç¨‹æ€æ ·æŸ¥çœ‹å®‰è£…è¿‡ç¨‹ï¼Ÿæ€æ ·åœ¨å®‰è£…æ—¶è¿›è¡Œé…ç½®ï¼Ÿç­”ï¼šä½¿ç”¨VNCã€‚æœ¬åœ°æ‰“å¼€vncviewer clientï¼Œè¾“å…¥ip:5901è¿›è¡Œè¿æ¥ï¼Œå³å¯çœ‹åˆ°å®‰è£…è¿‡ç¨‹ã€‚
å®‰è£…å¡åœ¨äº†å®‰è£…ç•Œé¢ï¼š
Boot failed: could not read the boot diskNo more network devicesNo bootable device

å‚è€ƒPlay with Libvirt/KVMå‘ç°ï¼Œcirros-0.4.0-x86_64-disk.imgæœ¬èº«å°±æ˜¯ä¸€ä¸ªç£ç›˜ï¼Œå°´å°¬ã€‚ã€‚ã€‚
å¯åŠ¨è™šæ‹Ÿæœºqemu-system-x86_64 -m 512 -smp 4 \-drive file=cirros-0.4.0-x86_64-disk.img \-vnc :1
æœ¬åœ°æ‰“å¼€vncviewer clientï¼Œè¾“å…¥ip:5901è¿›è¡Œè¿æ¥ï¼Œå³å¯çœ‹åˆ°å¯åŠ¨è¿‡ç¨‹ã€‚å› ä¸ºæ²¡æœ‰enable-kvmï¼Œæ‰€ä»¥å¯åŠ¨å¾ˆæ…¢ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚
IPé…ç½®1ã€æŸ¥çœ‹è™šæ‹ŸæœºIPç™»å½•cirrosï¼ˆé»˜è®¤ç”¨æˆ·åcirrosï¼Œå¯†ç gocubsgoï¼‰ï¼Œç„¶åæŸ¥çœ‹IPã€å†…å­˜å’Œç¡¬ç›˜
ip addfree -mdf -h
IPé»˜è®¤ä¸º10.0.2.15ï¼›å†…å­˜512Mï¼Œæ˜¯æŒ‡å®šçš„ï¼›ç¡¬ç›˜é»˜è®¤256Mã€‚
å½“ctrl+cç»“æŸqemu-system-x86_64å‘½ä»¤åï¼Œè™šæ‹Ÿæœºå°±è¢«å…³é—­äº†ã€‚å†æ¬¡ä½¿ç”¨qemu-system-x86_64å‘½ä»¤å¯åŠ¨è™šæ‹Ÿæœºï¼Œç™»å½•è™šæ‹Ÿæœºåä½¿ç”¨historyå‘½ä»¤ï¼Œå‘ç°ä¹‹å‰çš„å‘½ä»¤è®°å½•éƒ½è¿˜åœ¨ï¼Œè¯´æ˜ä¸¤æ¬¡ä½¿ç”¨çš„éƒ½æ˜¯åŒä¸€å—ç£ç›˜ï¼Œä¹Ÿå°±æ˜¯cirros-0.4.0-x86_64-disk.imgã€‚
2ã€è®¾ç½®IP
vim /etc/network/interfaces

eth0çš„é…ç½®ä¿®æ”¹ä¸ºï¼š
auto eth0iface eth0 inet staticaddress 192.168.122.100netmask 255.255.255.0

3ã€é‡å¯ç½‘å¡
ifdown eth0ifup eth0

ä½†æ˜¯ï¼Œæ— æ³•pingé€š192.168.122.1ï¼Œè¯´æ˜è™šæ‹Ÿæœºçš„ç½‘å¡å¹¶æ²¡æœ‰å’Œvirbr0è¿›è¡Œè¿æ¥ã€‚
åˆ›å»ºç½‘ç»œè™šæ‹Ÿæœºæœ‰äº†ï¼Œä½†æ˜¯è¿˜ä¸èƒ½è¿æ¥å¤–éƒ¨ç½‘ç»œã€‚æˆ‘ä»¬éœ€è¦åˆ›å»ºç½‘ç»œï¼Œé‡æ–°å¯åŠ¨è™šæ‹Ÿæœºï¼Œè¯¦æƒ…å‚è€ƒè®¿é—®qemuè™šæ‹Ÿæœºçš„äº”ç§å§¿åŠ¿ã€‚
1ã€åˆ›å»ºç½‘æ¡¥
brctl add virbr0ifconfig virbr0 192.168.122.1 net mask 255.255.255.0 up
ç½‘æ¡¥å·²ç»å­˜åœ¨ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥ä¸éœ€è¦äº†ã€‚
2ã€åˆ›å»ºtapæ¥å£ï¼Œå¹¶æ·»åŠ åˆ°ç½‘æ¡¥
apt install uml-utilitiestunctl -t tap0ifconfig tap0 0.0.0.0 upbrctl addif virbr0 tap0

3ã€è®©è™šæ‹Ÿæœºä½¿ç”¨tap0ä½œä¸ºç½‘ç»œè®¾å¤‡å¯åŠ¨
qemu-system-x86_64 -m 512 -smp 4 \-drive file=cirros-0.4.0-x86_64-disk.img \-netdev tap,id=tapnet,ifname=tap0,script=no \-device rtl8139,netdev=tapnet \-vnc :1

4ã€ç™»å½•è™šæ‹Ÿæœºï¼Œæµ‹è¯•ç½‘ç»œ
ping 192.168.122.1
æ­¤æ—¶ç½‘ç»œå·²ç»é€šäº†ã€‚
libvirtåˆ›å»ºè™šæ‹Ÿæœºä»¥ä¸Šåˆ›å»ºè™šæ‹Ÿæœºçš„è¿‡ç¨‹ï¼Œå…¶å®å¹¶æ²¡æœ‰ç”¨åˆ°libvirtï¼Œä¸‹é¢ä½¿ç”¨ä¸‹é¢ä½¿ç”¨libvirtè¿›è¡Œè™šæ‹Ÿæœºçš„åˆ›å»ºã€‚å‚è€ƒæ–‡æ¡£Play with Libvirt/KVM
1ã€åˆ›å»ºè™šæ‹Ÿæœº
virt-install --connect=qemu:///system --name=cirros --ram=512 --vcpus=1 --disk path=cirros-0.4.0-x86_64-disk.img,format=qcow2 --import --network network:default --vnc

æ— æ³•ä½¿ç”¨vncviwerè¿›è¡Œè¿æ¥ï¼Œç„¶åå¡åœ¨ä¸Šå›¾çš„ç•Œé¢ï¼Œæœ€åctrl+cå¼ºåˆ¶ç»“æŸã€‚é…ç½®æ–‡ä»¶ä½äº/etc/libvirt/qemu/cirros.xmlï¼Œå¦‚æœè¦ç¼–è¾‘å®ƒï¼Œä½¿ç”¨virsh edit cirroså‘½ä»¤ã€‚
2ã€æ˜¾ç¤ºvnc port
virsh vncdisplay cirros

3ã€æ˜¾ç¤ºè™šæ‹Ÿæœºåˆ—è¡¨
virsh list

4ã€æŸ¥çœ‹è™šæ‹Ÿæœºè¯¦æƒ… 
virsh dominfo cirrosvirsh domstate cirros

é—®é¢˜æ¥äº†ï¼Œæ€ä¹ˆè®¿é—®è¿™ä¸ªè™šæ‹Ÿæœºå‘¢ï¼Ÿæœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨virsh console cirroså‘½ä»¤æ‰“å¼€æ§åˆ¶å°ï¼Œä½¿ç”¨ctrl+]å…³é—­æ§åˆ¶å°ï¼Œå¦å¤–å°±æ˜¯é€šè¿‡sshæˆ–è€…vncã€‚
5ã€æŸ¥çœ‹è™šæ‹Ÿæœºç½‘ç»œï¼ˆmacåœ°å€å’Œipåœ°å€ï¼‰ 
virsh dumpxml frontend1 | grep macarp -an
æœ¬æ¬¡æ‰¾åˆ°çš„IPä¸º192.168.122.49
6ã€è®¿é—®è™šæ‹Ÿæœº
ssh cirros@192.168.122.49
è¾“å…¥é»˜è®¤å¯†ç gocubsgoï¼Œå³å¯ç™»å½•è™šæ‹Ÿæœºã€‚
7ã€æµ‹è¯•ç½‘ç»œ
ping 8.8.8.8 -c3
è‡³æ­¤ï¼Œå¤§åŠŸå‘Šæˆï¼Œåˆ›å»ºè™šæ‹ŸæœºæˆåŠŸã€‚
libvirté…ç½®ç½‘ç»œä»¥ä¸Šæˆ‘ä»¬çŸ¥é“ï¼Œå¯ä»¥ä½¿ç”¨arp -anå‘½ä»¤æŸ¥çœ‹è™šæ‹ŸæœºIPï¼Œå¦‚æœæŸ¥çœ‹åˆ°çš„IPéƒ½ä¸èƒ½è®¿é—®å‘¢ï¼Ÿè¿™æ—¶å°±éœ€è¦æˆ‘ä»¬æ¥æ‰‹åŠ¨é…ç½®ã€‚å‚è€ƒæ–‡æ¡£ï¼š

ç»™libvirtåˆ›å»ºçš„è™šæ‹ŸæœºæŒ‡å®šå›ºå®šIP
linuxåˆå­¦è€…-ç½‘ç»œæ¡¥æ¥ç¯‡
Documentation/Networking

1ã€æŸ¥çœ‹libvirtç½‘ç»œ
virsh net-list --all

2ã€æŸ¥çœ‹è™šæ‹Ÿæœºçš„ç½‘ç»œ
virsh domiflist cirros
æŸ¥çœ‹åˆ°macåœ°å€ä¸º52:54:00:7f:0e:77ã€‚
3ã€ä¿®æ”¹libvirtç½‘ç»œé…ç½®
virsh net-edit default

å¦‚ä¸‹ä¿®æ”¹ï¼š
&lt;network&gt;  &lt;name&gt;default&lt;/name&gt;  &lt;uuid&gt;cc522162-7487-41dc-82ee-63df0df4003e&lt;/uuid&gt;  &lt;forward mode=&#x27;nat&#x27;/&gt;  &lt;bridge name=&#x27;virbr0&#x27; stp=&#x27;on&#x27; delay=&#x27;0&#x27;/&gt;  &lt;mac address=&#x27;52:54:00:d6:65:fb&#x27;/&gt;  &lt;ip address=&#x27;192.168.122.1&#x27; netmask=&#x27;255.255.255.0&#x27;&gt;    &lt;dhcp&gt;      &lt;range start=&#x27;192.168.122.2&#x27; end=&#x27;192.168.122.254&#x27;/&gt;      &lt;!--line 10, add--&gt;      &lt;host mac=&#x27;52:54:00:7f:0e:77&#x27; name=&#x27;cirros&#x27; ip=&#x27;192.168.122.100&#x27;/&gt;    &lt;/dhcp&gt;  &lt;/ip&gt;&lt;/network&gt;

ä»¥ä¸Šï¼Œç»™cirrosè™šæ‹Ÿæœºé…ç½®äº†é™æ€IPä¸º192.168.122.100ã€‚
4ã€é‡å¯ç½‘ç»œ
virsh net-destroy defaultvirsh net-start default#virsh --connect qemu:///system net-destroy default#virsh --connect qemu:///system net-start default 

5ã€é‡å¯è™šæ‹Ÿæœº
virsh shutdown cirrosvirsh start cirros

libvirté…ç½®VNCæŸäº›æƒ…å†µä¸‹ï¼Œæ— æ³•é€šè¿‡IPè®¿é—®è™šæ‹Ÿæœºï¼Œè¿™æ—¶å°±éœ€è¦é…ç½®vncï¼Œè¯¦æƒ…å‚è€ƒkvmè™šæ‹ŸæœºVNCçš„é…ç½®ã€‚
1ã€é…ç½®vnc
virsh edit cirros

æ‰¾åˆ°
&lt;graphics type=&#x27;vnc&#x27; port=&#x27;-1&#x27; autoport=&#x27;yes&#x27;/&gt;

ä¿®æ”¹ä¸ºï¼š
&lt;graphics type=&#x27;vnc&#x27; port=&#x27;5901&#x27; autoport=&#x27;no&#x27; listen=&#x27;0.0.0.0&#x27;&gt;         &lt;listen type=&#x27;address&#x27; address=&#x27;0.0.0.0&#x27;/&gt;        &lt;/graphics&gt;

2ã€é‡å¯è™šæ‹Ÿæœº
virsh shutdown cirrosvirsh start cirros

3ã€vncè®¿é—®æœ¬åœ°æ‰“å¼€vncviewer clientï¼Œè¾“å…¥ip:5901è¿›è¡Œè¿æ¥ã€‚ç™»å½•è™šæ‹Ÿæœºåï¼Œä¹Ÿå¯ä»¥è®¾ç½®é™æ€IPï¼Œè¿™æ ·å°±ä¸ç”¨é€šè¿‡virsh net-edit defaultä¿®æ”¹äº†ã€‚
åè®°å…¶å®ï¼Œè™šæ‹Ÿæœºä¸­å®‰è£…çš„è™šæ‹Ÿæœºï¼Œä¹Ÿå¯ä»¥æ”¯æŒKVMäº†ï¼Œå¼€å¯åµŒå¥—è™šæ‹ŸåŒ–å³å¯ã€‚è¯¦æƒ…å‚è€ƒï¼š

KVMåµŒå¥—è™šæ‹ŸåŒ– â€“ åœ¨è™šæ‹Ÿæœºä¸­åˆ›å»ºè™šæ‹Ÿæœº
Nested KVM

1ã€æŸ¥çœ‹å®¿ä¸»æœºæ˜¯å¦å¼€å¯åµŒå¥—è™šæ‹ŸåŒ–
cat /sys/module/kvm_intel/parameters/nested
Nä»£è¡¨æ²¡æœ‰å¼€å¯ã€‚
2ã€å¼€å¯åµŒå¥—è™šæ‹ŸåŒ–
echo &#x27;options kvm_intel nested=1&#x27; &gt;&gt; /etc/modprobe.d/qemu-system-x86.conf
ç„¶åé‡å¯ç³»ç»Ÿã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>libvirt</tag>
        <tag>virsh</tag>
      </tags>
  </entry>
  <entry>
    <title>virshå¸¸ç”¨å‘½ä»¤</title>
    <url>/dev-virsh-command/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡ä¸­ä¼šæ•´ç†ä¸€äº›å·¥ä½œå­¦ä¹ ä¸­å¸¸ç”¨çš„virshå‘½ä»¤ï¼Œå¤‡å¿˜ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

libvirt
Domain XML format
libguestfs
virt-builder
virshå¸¸ç”¨å‘½ä»¤ç¯‡
KVM è™šæ‹Ÿæœº XML é…ç½®æ–‡ä»¶è¯¦è§£



åˆ›å»ºè™šæ‹Ÿæœºæœ¬èŠ‚ä»¥åˆ›å»ºubuntu18.04.6çš„è™šæ‹Ÿæœºä¸ºä¾‹ï¼Œubuntué•œåƒä¸‹è½½åœ°å€ä¸ºUbuntu Release
å¸¸è§„åˆ›å»º1ã€ä¸‹è½½é•œåƒ
cd /opt/iso/wget https://releases.ubuntu.com/18.04.6/ubuntu-18.04.6-live-server-amd64.iso

2ã€åˆ›å»ºè™šæ‹Ÿæœº
virt-install \    --virt-type=kvm \    --name=ubuntu18.04 \    --vcpus=2 \    --ram=4096 \    --cdrom=/opt/iso/ubuntu-18.04.6-live-server-amd64.iso \    --disk path=/opt/kvm/ubuntu18.04.qcow2,device=disk,format=qcow2,bus=virtio,cache=writeback,size=100 \    --network default,model=virtio \    --os-type=linux \    --os-variant=ubuntu18.04 \    --graphics vnc,listen=0.0.0.0 \    --noautoconsole \    --accelerate

model=virtio å¯ä»¥æ¢æˆ model=e1000æˆ–è€…model=rtl8139ã€‚ä½†æ˜¯è¿™é‡Œå»ºè®®ä½¿ç”¨virtioï¼Œå› ä¸ºä½¿ç”¨virtioè¦æ¯”ä½¿ç”¨e1000æˆ–è€…rtl8139ç½‘ç»œååæ€§èƒ½è¦é«˜å‡º2å€å·¦å³ã€‚
è¯¦æƒ…å‚è€ƒï¼š

QEMUæ–°çš„-nicé€‰é¡¹
KVMæ€»ç»“-KVMæ€§èƒ½ä¼˜åŒ–ä¹‹ç½‘ç»œæ€§èƒ½ä¼˜åŒ–

3ã€æŸ¥çœ‹è™šæ‹Ÿæœº
virsh listvirsh list --all

4ã€æŸ¥çœ‹vncç«¯å£
virsh vncdisplay ubuntu18.04

ä½¿ç”¨vnc clientè¿æ¥è™šæ‹Ÿæœºå®Œæˆå®‰è£…ã€‚
å•ç‹¬åˆ›å»ºç£ç›˜qemu-img create -f qcow2 /opt/kvm/ubuntu18.04.qcow2  100Gvirt-install --disk path=/opt/kvm/ubuntu18.04.qcow2 ...

ä½¿ç”¨æ¡¥æ¥ifconfigip avirt-install --network bridge=br0,model=virtio ...

æŸ¥çœ‹è™šæ‹ŸæœºIPæ–¹æ³•ä¸€ï¼šé€šè¿‡VNCç™»å½•è™šæ‹ŸæœºåæŸ¥çœ‹
æ–¹æ³•äºŒï¼šé€šè¿‡macåœ°å€æŸ¥çœ‹
nmap -sP 192.168.56.0/24virsh dumpxml ubuntu18.04 | grep &quot;mac a&quot;arp -a | grep grep &quot;52:54:00:46:98:a7&quot;cat /proc/net/arp | grep &quot;52:54:00:46:98:a7&quot;

ç½‘ç»œä¼˜åŒ–vhost-netæ˜¯å¯¹virtioçš„ä¼˜åŒ–ï¼Œåœ¨å†…æ ¸ä¸­åŠ å…¥äº†vhost-net.koæ¨¡å—ï¼Œä½¿å¾—å¯¹ç½‘ç»œæ•°æ®å¯ä»¥åœ¨å†…æ ¸æ€å¾—åˆ°å¤„ç†ã€‚æ•°æ®åŒ…ä»è™šæ‹Ÿç½‘å¡å‡ºæ¥åï¼Œç›´æ¥è·³åˆ°å†…æ ¸é‚£ä¸€å±‚ä¸­ã€‚è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè¦ä½¿ç”¨vhost-neté‚£ä¹ˆï¼Œè™šæ‹Ÿæœºçš„ç½‘å¡ç±»å‹å¿…é¡»æ˜¯virtioã€‚
virsh destroy ubuntu18.04virsh edit ubuntu18.04

æ·»åŠ dirveré…ç½®ï¼š
&lt;interface type=&#x27;bridge&#x27;&gt;  &lt;mac address=&#x27;52:54:00:46:98:a7&#x27;/&gt;  &lt;source bridge=&#x27;br0&#x27;/&gt;  &lt;model type=&#x27;virtio&#x27;/&gt;  &lt;driver name=&#x27;vhost&#x27;/&gt;  &lt;address type=&#x27;pci&#x27; domain=&#x27;0x0000&#x27; bus=&#x27;0x00&#x27; slot=&#x27;0x03&#x27; function=&#x27;0x0&#x27;/&gt;&lt;/interface&gt;

ä¿®æ”¹è™šæ‹Ÿæœºé…ç½®å®‰è£…virt-customizeyum -y install libguestfs-tools

å…³é—­è™šæ‹Ÿæœºvirsh shutdown ubuntu18.04

åœ¨ä½¿ç”¨virt-customizeä¿®æ”¹è™šæ‹Ÿæœºé…ç½®ä¹‹å‰ï¼Œéœ€è¦å…ˆå…³é—­è™šæ‹Ÿæœºï¼Œå¦åˆ™ä¿®æ”¹ä¸ä¼šç”Ÿæ•ˆï¼Œè¿˜å¯èƒ½å‘ç”Ÿéé¢„æœŸé—®é¢˜ã€‚
ä¿®æ”¹ä¸»æœºåvirt-customize -a /opt/kvm/ubuntu18.04.qcow2 --hostname node01

å¯ç”¨root sshç™»å½•virt-customize -a /opt/kvm/ubuntu18.04.qcow2 --run-command &#x27;echo &quot;PermitRootLogin yes&quot; &gt;&gt; /etc/ssh/sshd_config&#x27;

ä¿®æ”¹rootå¯†ç virt-customize -a /opt/kvm/ubuntu18.04.qcow2 --root-password password:voidking# orvirt-customize -a /opt/kvm/ubuntu18.04.qcow2 --password root:voidking

æ·»åŠ authorized_keysvirt-customize -a /opt/kvm/ubuntu18.04.qcow2 --ssh-inject root:string:&quot;ssh-rsa xxx vk@macpro.lan&quot;

å®‰è£…è½¯ä»¶åŒ…virt-customize -a /opt/kvm/ubuntu18.04.qcow2 --install vim,wget,curl,unzipvirt-customize -v -x -a /opt/kvm/ubuntu18.04.qcow2 --install vim,wget,curl,unzip

æ‰‹åŠ¨é…ç½®é™æ€IPubuntu18ä¹‹å‰åœ¨/etc/network/interfacesè¿›è¡Œé…ç½®ï¼Œubuntu18åŠä¹‹åç‰ˆæœ¬åœ¨/etc/netplan/*.yamlä¸­è¿›è¡Œé…ç½®ã€‚
æå‰æ‰‹åŠ¨é…ç½®å¥½ä¸€å°è™šæ‹Ÿæœºçš„é™æ€IPï¼Œç„¶åï¼Œå…¶ä»–çš„å…‹éš†å‡ºæ¥çš„ä¸»æœºå¯ä»¥ä½¿ç”¨virt-customizeè°ƒç”¨sedå‘½ä»¤ä¿®æ”¹IPã€‚
1ã€æŸ¥çœ‹å½“å‰ç½‘å…³
route -nip routenetstat -rn

2ã€é…ç½®é™æ€IPé…ç½® /etc/netplan/00-installer-config.yaml å†…å®¹ä¸ºï¼š
# This is the network config written by &#x27;subiquity&#x27;network:  version: 2  ethernets:    ens3:      dhcp4: false                         # ç¦æ­¢åŠ¨æ€IP      addresses: [192.168.56.200/24]       # IPåœ°å€å’Œæ©ç       gateway4: 192.168.56.1               # ç½‘å…³      nameservers:        addresses: [192.168.56.1,114.114.114.114]   #DNSæœåŠ¡å™¨

3ã€ä½¿é…ç½®ç”Ÿæ•ˆ
netplan applyip a

æ‰‹åŠ¨é…ç½®é™æ€IP2.01ã€æå‰å‡†å¤‡ 00-installer-config.yaml å†…å®¹ä¸ºï¼š
# This is the network config written by &#x27;subiquity&#x27;network:  version: 2  ethernets:    ens3:      dhcp4: false                         # ç¦æ­¢åŠ¨æ€IP      addresses: [192.168.56.200/24]       # IPåœ°å€å’Œæ©ç       gateway4: 192.168.56.1               # ç½‘å…³      nameservers:        addresses: [192.168.56.1,114.114.114.114]   #DNSæœåŠ¡å™¨

2ã€æ‹·è´åˆ°å®¿ä¸»æœº
virt-customize -a /opt/kvm/ubuntu18.04.qcow2 --copy-in 00-installer-config.yaml:/etc/netplan/00-installer-config.yaml

è‡ªåŠ¨é…ç½®é™æ€IPvirt-customize -a /opt/kvm/ubuntu18.04.qcow2 --run-command &quot;sed -i \&quot;s#addresses: \[.*/24\]#addresses: \[192.168.56.201/24\]#\&quot; /etc/netplan/00-installer-config.yaml&quot;

å¯åœè™šæ‹Ÿæœº1ã€åœæ­¢è™šæ‹Ÿæœº
# smooth shutdownvirsh shutdown ubuntu18.04# forced shutdownvirsh destroy ubuntu18.04

2ã€å¼€å¯è™šæ‹Ÿæœº
virsh start ubuntu18.04

é”€æ¯è™šæ‹Ÿæœºvirsh list --allvirsh destroy ubuntu18.04virsh snapshot-list ubuntu18.04virsh snapshot-delete ubuntu18.04 1627446728virsh undefine ubuntu18.04#rm /etc/libvirt/qemu/ubuntu18.04.xmlrm /opt/kvm/ubuntu18.04.qcow2

å¼€æœºè‡ªåŠ¨å¯åŠ¨virsh autostart ubuntu18.04virsh autostart --disable ubuntu18.04

è°ƒæ•´è™šæ‹ŸæœºCPUå’Œå†…å­˜virsh destroy ubuntu18.04virsh edit ubuntu18.04

è°ƒæ•´ç›¸å…³é…ç½®ï¼š
&lt;memory unit=&#x27;KiB&#x27;&gt;4194304&lt;/memory&gt;&lt;currentMemory unit=&#x27;KiB&#x27;&gt;4194304&lt;/currentMemory&gt;&lt;vcpu placement=&#x27;static&#x27;&gt;2&lt;/vcpu&gt;

è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œvcpuçš„æœ€å°å€¼æ˜¯1ï¼Œè¯¦æƒ…å‚è€ƒCPU Allocation
æ ¹æ®xmlå¯¼å‡ºåˆ›å»ºè™šæ‹Ÿæœºçš„å‘½ä»¤virsh list --allvirsh dumpxml ubuntu18.04 &gt; ubuntu18.04.xml

å…‹éš†è™šæ‹Ÿæœºvirt-clone -o ubuntu18.04 -n ubuntu18.04-tmp -f /opt/kvm/ubuntu18.04-tmp.qcow2virsh dominfo ubuntu18.04-tmpvirsh domstate ubuntu18.04-tmp

æ‹·è´è™šæ‹Ÿæœºåˆ°å…¶ä»–å®¿ä¸»æœº1ã€æ‹·è´è™šæ‹Ÿæœºç£ç›˜æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶
scp /opt/kvm/ubuntu18.04.qcow2 192.168.56.102:/opt/kvm/ubuntu18.04.qcow2scp /etc/libvirt/qemu/ubuntu18.04.xml 192.168.56.102:/etc/libvirt/qemu/ubuntu18.04.xml

2ã€æ‹‰èµ·è™šæ‹Ÿæœº
ssh 192.168.56.102virsh define /etc/libvirt/qemu/ubuntu18.04.xmlvirsh list --allvirsh start ubuntu18.04

PSï¼šä¸´æ—¶æ‹‰èµ·è™šæ‹Ÿæœº
virsh create /etc/libvirt/qemu/ubuntu18.04.xml

è™šæ‹Ÿæœºè¿ç§»å‚è€ƒæ–‡æ¡£ã€Šä½¿ç”¨Libvirtè¿›è¡Œè™šæ‹Ÿæœºåœ¨çº¿è¿ç§»ã€‹
è™šæ‹Ÿæœºæ‰©å®¹ç£ç›˜å‚è€ƒæ–‡æ¡£ï¼š

è£¸æ•°æ®ç›˜æ‰©å±•æ–‡ä»¶ç³»ç»Ÿ
åœ¨çº¿æ‰©å±•æ•°æ®ç›˜åˆ†åŒºåŠæ–‡ä»¶ç³»ç»Ÿ

ç»™è™šæ‹Ÿæœºå¢åŠ ç£ç›˜virsh shutdown ubuntu18.04-tmpvirsh domblklist ubuntu18.04-tmpqemu-img info /opt/kvm/ubuntu18.04-tmp.qcow2qemu-img resize /opt/kvm/ubuntu18.04-tmp.qcow2 +20G

PSï¼šqcow2é•œåƒä¸æ”¯æŒç¼©å®¹ã€‚
å¦‚æœç»™è™šæ‹Ÿæœºå¢åŠ ç£ç›˜åï¼Œè™šæ‹Ÿæœºå¯åŠ¨æ—¶æŠ¥é”™ï¼šqcow2: Image is corrupt; cannot be opened read/write
é‚£ä¹ˆè¯´æ˜ç£ç›˜å‡ºç°é—®é¢˜ï¼Œä¿®å¤æ–¹æ³•å¦‚ä¸‹
qemu-img check /opt/kvm/ubuntu18.04-tmp.qcow2qemu-img check -r all /opt/kvm/ubuntu18.04-tmp.qcow2

æ‰©å®¹åˆ†åŒºå’Œæ–‡ä»¶ç³»ç»Ÿæ‰©å®¹åˆ†åŒº1ã€å®‰è£…æ‰©å®¹åˆ†åŒºå·¥å…·
# centosyum install -y cloud-utils-growpart# ubuntuapt-get install -y cloud-guest-utils

2ã€è™šæ‹Ÿæœºå†…éƒ¨æ‰§è¡Œæ‰©å®¹åˆ†åŒº
fdisk -lLANG=en_US.UTF-8growpart /dev/vda 2fdisk -l

æ‰©å®¹æ–‡ä»¶ç³»ç»Ÿdf -hdf -ihT# ext2/ext3/ext4resize2fs /dev/vda2# xfsxfs_growfs /dev/vda2df -h

è£¸æ•°æ®ç›˜æ‰©å®¹æ–‡ä»¶ç³»ç»Ÿæ‰€è°“è£¸æ•°æ®ç›˜ï¼Œå°±æ˜¯æ²¡æœ‰åˆ†åŒºçš„æ•°æ®ç›˜ã€‚
df -hdf -ihT# ext2/ext3/ext4resize2fs /dev/vdb# xfsxfs_growfs /dev/vdcdf -h

è™šæ‹Ÿæœºå¢åŠ ç£ç›˜virsh destroy ubuntu18.04-tmpqemu-img create -f qcow2 /opt/kvm/ubuntu18.04-tmp_ext.qcow2 100Gvirsh edit ubuntu18.04-tmp

diskéƒ¨åˆ†æ·»åŠ ï¼š
&lt;disk type=&#x27;file&#x27; device=&#x27;disk&#x27;&gt;  &lt;driver name=&#x27;qemu&#x27; type=&#x27;qcow2&#x27;/&gt;  &lt;source file=&#x27;/opt/kvm/ubuntu18.04-tmp_ext.qcow2&#x27;/&gt;  &lt;target dev=&#x27;vdb&#x27; bus=&#x27;virtio&#x27;/&gt;&lt;/disk&gt;

ç£ç›˜æ ¼å¼åŒ–å’ŒæŒ‚è½½å‚è€ƒã€ŠVirtualBoxä¸­Ubuntuæ‰©å®¹ã€‹
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>libvirt</tag>
        <tag>virsh</tag>
      </tags>
  </entry>
  <entry>
    <title>Vimè¿›é˜¶</title>
    <url>/dev-vim-advance/</url>
    <content><![CDATA[å‰è¨€Vimæ˜¯Linuxå’ŒUnixä¸Šçš„ç¼–è¾‘å™¨ï¼Œç”±Viå‡çº§è€Œæ¥ã€‚
å·²ç»ä½¿ç”¨äº†Vimå¥½å¤šå¹´ï¼Œä½†æ˜¯ï¼Œæ°´å¹³ä»…ä»…åœç•™åœ¨ä¿®æ”¹é…ç½®æ–‡ä»¶çš„æ°´å¹³ã€‚ä¸ä¼šæŠŠå®ƒå½“åšä¸»è¦çš„ç¼–è¾‘å™¨ï¼Œæ›´ä¸ä¼šç”¨å®ƒè¿›è¡Œç¼–ç å¼€å‘ã€‚æœ€è¿‘ï¼Œç«¥é’¢è€å¸ˆæé†’äº†æˆ‘ï¼Œä½œä¸ºè¿ç»´äººå‘˜ï¼ŒViméœ€è¦ç”¨å¾—æ›´åŠ ç†Ÿç»ƒä¸€äº›ï¼Œæœ€å¥½èƒ½æŠŠVimä½œä¸ºé»˜è®¤ç¼–è¾‘å™¨ä½¿ç”¨ã€‚
æ‰€ä»¥ï¼Œæœ¬æ–‡å†³å®šç ”ç©¶ä¸€ä¸‹æ›´é«˜é˜¶çš„Vimä½¿ç”¨æŠ€å·§ï¼Œä¸»è¦å‚è€ƒä¼˜é›…ç©è½¬Vimã€‚


VimrcVimrcæŒ‡çš„æ˜¯Vimçš„é…ç½®æ–‡ä»¶ï¼Œrc=run commandï¼ŒVim çš„å…¨å±€é…ç½®ä¸€èˆ¬åœ¨/etc/vim/vimrcæˆ–è€…/etc/vimrcï¼Œå¯¹æ‰€æœ‰ç”¨æˆ·ç”Ÿæ•ˆã€‚ç”¨æˆ·ä¸ªäººçš„é…ç½®åœ¨~/.vimrcã€‚
å¦‚æœåªå¯¹å•æ¬¡ç¼–è¾‘å¯ç”¨æŸä¸ªé…ç½®é¡¹ï¼Œå¯ä»¥åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œå…ˆè¾“å…¥ä¸€ä¸ªå†’å·ï¼Œå†è¾“å…¥é…ç½®ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œset numberè¿™ä¸ªé…ç½®å¯ä»¥å†™åœ¨.vimrcé‡Œé¢ï¼Œä¹Ÿå¯ä»¥åœ¨å‘½ä»¤æ¨¡å¼è¾“å…¥ã€‚
é…ç½®é¡¹ä¸€èˆ¬éƒ½æœ‰â€æ‰“å¼€â€å’Œâ€å…³é—­â€ä¸¤ä¸ªè®¾ç½®ã€‚â€å…³é—­â€å°±æ˜¯åœ¨â€æ‰“å¼€â€å‰é¢åŠ ä¸Šå‰ç¼€â€noâ€ã€‚
&quot; æ‰“å¼€set number&quot; å…³é—­set nonumber
ä¸Šé¢ä»£ç ä¸­ï¼ŒåŒå¼•å·å¼€å§‹çš„è¡Œè¡¨ç¤ºæ³¨é‡Šã€‚
æŸ¥è¯¢æŸä¸ªé…ç½®é¡¹æ˜¯æ‰“å¼€è¿˜æ˜¯å…³é—­ï¼Œå¯ä»¥åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œè¾“å…¥è¯¥é…ç½®ï¼Œå¹¶åœ¨åé¢åŠ ä¸Šé—®å·ã€‚
:set number?
ä¸Šé¢çš„å‘½ä»¤ä¼šè¿”å›numberæˆ–è€…nonumberã€‚
å¦‚æœæƒ³æŸ¥çœ‹å¸®åŠ©ï¼Œå¯ä»¥ä½¿ç”¨helpå‘½ä»¤ã€‚
:help number

æ›´å¤šå†…å®¹å‚è€ƒVim é…ç½®å…¥é—¨ã€‚
æœ‰ä¸€äº›å¤§ç¥æŠŠVimé…ç½®å¾—éå¸¸ç‚«é…·ï¼Œæ¯”å¦‚amixå’Œhumiaozuzuã€‚
é™„ä¸Šä¸€ä»½å¸¸ç”¨çš„vimé…ç½®ï¼š
&quot; è¯­æ³•é«˜äº®syntax on&quot; æ˜¾ç¤ºè¡Œå·set number&quot; å›è½¦è‡ªåŠ¨ç¼©è¿›set autoindent&quot; è®¾ç½®tabå®½åº¦set tabstop=4&quot; shiftç¼©è¿›å®½åº¦set shiftwidth=4&quot; tabè‡ªåŠ¨è½¬ç©ºæ ¼set expandtab&quot; tabè½¬ç©ºæ ¼å®½åº¦set softtabstop=4&quot; ç²˜è´´æ ¼å¼åŒ–set paste

å¦‚æœcatæŸ¥çœ‹æ–‡ä»¶å¯ä»¥æ­£å¸¸çœ‹åˆ°ä¸­æ–‡ï¼Œvimç¼–è¾‘æ–‡ä»¶å‡ºç°ä¹±ç ï¼Œé‚£ä¹ˆå¯ä»¥æŒ‡å®šç¼–ç æ–¹å¼ä¸º utf8 æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚
&quot; è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜set termencoding=utf-8set encoding=utf8set fileencodings=utf8,ucs-bom,gbk,cp936,gb2312,gb18030

å››ç§æ¨¡å¼æ™®é€šæ¨¡å¼è¿›å…¥vimåé»˜è®¤æ™®é€šæ¨¡å¼ï¼Œå¯ä»¥è¿›è¡Œç§»åŠ¨ã€å¤åˆ¶ã€ç²˜è´´ã€åˆ é™¤ã€ä¿®æ”¹ç­‰ã€‚å…¶ä»–æ¨¡å¼ç‚¹å‡»Escè¿”å›æ™®é€šæ¨¡å¼ã€‚
å¯è§†æ¨¡å¼å¯¹ä¸€å—åŒºåŸŸè¿›è¡Œæ“ä½œï¼Œå°±åƒWindowsä¸­çš„é¼ æ ‡é€‰ä¸­ã€‚æ™®é€šæ¨¡å¼ä¸‹ç‚¹å‡»vè¿›å…¥å¯è§†æ¨¡å¼ã€‚
æ’å…¥æ¨¡å¼æ’å…¥æ¨¡å¼å’Œæ™®é€šæ–‡æœ¬ç¼–è¾‘å™¨ç›¸åŒï¼Œå¯ä»¥è¿›è¡Œè¾“å…¥å’Œåˆ é™¤ã€‚æ™®é€šæ¨¡å¼ä¸‹ç‚¹å‡»iè¿›å…¥æ’å…¥æ¨¡å¼ã€‚
å‘½ä»¤æ¨¡å¼åœ¨å‘½ä»¤æ¨¡å¼ä¸­å¯ä»¥æ‰§è¡Œä¸€äº›æŒ‡ä»¤ï¼Œå°±åƒåœ¨shellé‡Œä¸€æ ·ã€‚æ™®é€šæ¨¡å¼ä¸‹ç‚¹å‡»Shift + :è¿›å…¥å‘½ä»¤æ¨¡å¼ã€‚
å¿«æ·é”®ä¿å­˜é€€å‡ºShift + zzï¼Œé€€å‡ºæˆ–è€…ä¿å­˜é€€å‡ºã€‚
ç§»åŠ¨è·³è½¬ä¸ºäº†å‡å°‘å³æ‰‹ç§»åŠ¨è·ç¦»ï¼Œhå¯ä»£æ›¿å·¦ï¼Œjå¯ä»£æ›¿ä¸‹ï¼Œkå¯ä»£æ›¿ä¸Šï¼Œlå¯ä»£æ›¿å³ã€‚
0ç§»åŠ¨åˆ°è¡Œé¦–ï¼ŒShift + 6ä¹Ÿæ˜¯ç§»åŠ¨åˆ°è¡Œé¦–ï¼ˆä¸åŒ…å«ç©ºæ ¼ï¼‰ã€‚Shift + 4ç§»åŠ¨åˆ°è¡Œå°¾ã€‚
wå…‰æ ‡æ­£å‘ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯ï¼Œ3wæ­£å‘ç§»åŠ¨3ä¸ªå•è¯ï¼Œbåå‘ç§»åŠ¨ã€‚eæ­£å‘ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯è¯å°¾ï¼Œgeåå‘ç§»åŠ¨ã€‚Wï¼ˆShift+wï¼‰è¡¨ç¤ºå¿½ç•¥ç‰¹æ®Šå­—ç¬¦ï¼Œæ¯”å¦‚é€—å·å¥å·ç­‰ã€‚
ggè·³å›ç¬¬ä¸€è¡Œï¼Œ10ggè·³åˆ°ç¬¬10è¡Œï¼ŒShift+gè·³åˆ°æœ€åä¸€è¡Œã€‚gã€Ctrl+gæ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯ã€‚
fã€ç©ºæ ¼ï¼Œè·³åˆ°ä¸‹ä¸€ä¸ªç©ºæ ¼ã€‚
Shift+&gt;&gt;å³ç¼©è¿›ï¼ŒShift+&lt;&lt;å·¦ç¼©è¿›ã€‚
å¤šè¡Œç¼©è¿›ï¼Œè¿›å…¥å‘½ä»¤æ¨¡å¼ï¼Œè¾“å…¥ï¼š
75,80&gt;75&gt;6

åˆ é™¤å¤åˆ¶yyå¤åˆ¶ä¸€è¡Œï¼Œå†…å®¹å­˜å…¥æ— åå¯„å­˜å™¨å’Œ0å·å¯„å­˜å™¨ã€‚
å‡†ç¡®åœ°æ¥è¯´ï¼ŒVimä¸­æ²¡æœ‰åˆ é™¤ï¼Œåªæœ‰å‰ªåˆ‡ã€‚ddå‰ªåˆ‡ä¸€è¡Œï¼Œå†…å®¹å­˜å…¥æ— åå¯„å­˜å™¨å’Œ1å·å¯„å­˜å™¨ã€‚
pç²˜è´´åˆ°å…‰æ ‡ä¸‹ä¸€è¡Œï¼ŒPç²˜è´´åˆ°å…‰æ ‡å‰ä¸€è¡Œã€‚uæ’¤é”€ä¸Šä¸€æ­¥çš„æ“ä½œã€‚ctrl+ré‡åšã€‚
å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥regå¯ä»¥æŸ¥çœ‹å¯„å­˜å™¨ã€‚
ywå¤åˆ¶å½“å‰å•è¯ï¼Œy2wå¤åˆ¶æ­£å‘ä¸¤ä¸ªå•è¯ã€‚yxå¤åˆ¶å½“å‰å­—ç¬¦ã€‚
dwåˆ é™¤å½“å‰å•è¯ï¼Œdjåˆ é™¤ä¸‹ä¸€è¡Œï¼Œdkåˆ é™¤ä¸Šä¸€è¡Œï¼Œdhåˆ é™¤å·¦è¾¹ä¸€ä¸ªå­—ç¬¦ï¼Œdlåˆ é™¤å½“å‰å­—ç¬¦ã€‚
dã€Shift+6åˆ é™¤åˆ°è¡Œé¦–ï¼Œdã€Shift+4åˆ é™¤åˆ°è¡Œå°¾ã€‚
3ddå‘ä¸‹åˆ é™¤3è¡Œï¼Œ5dwæ­£å‘åˆ é™¤5ä¸ªå•è¯ã€‚
ä¿®æ”¹æŸ¥æ‰¾shift+iï¼Œè·³åˆ°è¡Œé¦–å¹¶è¿›å…¥æ’å…¥æ¨¡å¼ï¼›shift+aï¼Œè·³åˆ°è¡Œå°¾å¹¶è¿›å…¥æ’å…¥æ¨¡å¼ã€‚
oè¿›å…¥ä¸‹ä¸€è¡Œæ’å…¥æ¨¡å¼ï¼ŒOè¿›å…¥ä¸Šä¸€è¡Œæ’å…¥æ¨¡å¼ã€‚
3iè¿›å…¥æ’å…¥æ¨¡å¼ï¼Œè¾“å…¥å†…å®¹ï¼ŒEscï¼Œè¾“å…¥çš„å†…å®¹ä¼šè¢«å¤åˆ¶3æ¬¡ã€‚
5oè¿›å…¥ä¸‹ä¸€è¡Œæ’å…¥æ¨¡å¼ï¼Œè¾“å…¥å†…å®¹ï¼ŒEscï¼Œè¾“å…¥çš„å†…å®¹ä¼šæ’å…¥5è¡Œã€‚
~å•ä¸ªå­—ç¬¦å¤§å°å†™è½¬æ¢ï¼Œg~wæ•´ä¸ªå•è¯å¤§å°å†™è½¬æ¢ï¼Œg~$æ•´è¡Œå¤§å°å†™è½¬æ¢ï¼Œ.å¯¹ä¸Šä¸€ä¸ªæ“ä½œé‡å¤ã€‚
faåœ¨è¡Œå†…æŸ¥æ‰¾aï¼ŒFaåœ¨è¡Œå†…åå‘æŸ¥æ‰¾aã€‚
/wordæŸ¥æ‰¾wordï¼ŒnæŸ¥æ‰¾ä¸‹ä¸€ä¸ªï¼ŒNæŸ¥æ‰¾ä¸Šä¸€ä¸ªã€‚åœ¨å‘½ä»¤æ¨¡å¼ä¸‹è®¾ç½®set hlsearchå¯ä»¥é«˜äº®æ˜¾ç¤ºã€‚
è¿›å…¥å‘½ä»¤æ¨¡å¼ï¼Œè¿›è¡Œæ›¿æ¢ï¼š
# æ›¿æ¢å½“å‰è¡Œæ‰€æœ‰çš„oldword:s/oldword/newword/g# æ›¿æ¢æ–‡ä¸­æ‰€æœ‰çš„oldword:%s/oldword/newword/g

ræ›¿æ¢å•ä¸ªå­—ç¬¦ï¼Œshift+ræ›¿æ¢å½“å‰è¡Œï¼Œcwæ›¿æ¢å½“å‰å•è¯ï¼Œc$ä¿®æ”¹å…‰æ ‡åçš„å†…å®¹ã€‚
å¤šæ–‡ä»¶ç¼–è¾‘å‡è®¾æœ‰buffer1.txtã€buffer2.txtã€buffer3.txtä¸‰ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨vim buffer*æ‰“å¼€ä¸‰ä¸ªæ–‡ä»¶ã€‚å½“å‰æ˜¾ç¤ºbuffer1.txtï¼Œè¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ï¼ŒæŸ¥çœ‹ç¼“å†²åŒºåˆ—è¡¨ï¼š
:files:buffers:ls

badd buffer4.txtæ‰“å¼€ä¸€ä¸ªç¼“å†²åŒºï¼Œbnåˆ‡æ¢ä¸‹ä¸€ä¸ªç¼“å†²åŒºï¼Œbpåˆ‡æ¢ä¸Šä¸€ä¸ªç¼“å†²åŒºï¼Œbfåˆ‡æ¢åˆ°ç¬¬ä¸€ä¸ªç¼“å†²åŒºï¼Œblåˆ‡æ¢åˆ°æœ€åä¸€ä¸ªç¼“å†²åŒºï¼Œb3åˆ‡æ¢åˆ°ç¬¬ä¸‰ä¸ªç¼“å†²åŒºï¼Œb buffer1.txtåˆ‡æ¢åˆ°buffer1.txtï¼Œballç¼–è¾‘æ‰€æœ‰ç¼“å†²åŒºï¼Œ1,3bdåˆ é™¤1-3ç¼“å†²åŒºåˆ—è¡¨ï¼Œ%bdåˆ é™¤æ‰€æœ‰ç¼“å†²åŒºåˆ—è¡¨ï¼Œqallé€€å‡ºæ‰€æœ‰ã€‚
bufdo set numberæ‰€æœ‰ç¼“å†²åŒºè®¾ç½®numberã€‚
å¤šçª—å£ä¸æ ‡ç­¾åˆ†ç»„vim -o buffer*ï¼Œåˆ†å±æ‰“å¼€å¤šä¸ªæ–‡ä»¶ï¼Œå‚ç›´æ–¹å‘åˆ†å±ã€‚vim -O buffer*ï¼Œåˆ†å±æ‰“å¼€å¤šä¸ªæ–‡ä»¶ï¼Œç«–ç›´æ–¹å‘åˆ†å±ã€‚
ctrl+wã€så‚ç›´å¤åˆ¶åˆ†å±ï¼Œctrl+wã€væ°´å¹³å¤åˆ¶åˆ†å±ï¼Œctrl+wã€qåˆ é™¤åˆ†å±ã€‚
sp buffer4.txtæ‰“å¼€buffer4.txtå¹¶ä¸”ä¸Šä¸‹åˆ†å±ï¼Œvsp buffer4.txtæ‰“å¼€buffer4.txtå¹¶ä¸”å·¦å³åˆ†å±ã€‚
ctrl+wã€hå‘å·¦ç§»åŠ¨ï¼Œctrl+wã€jå‘ä¸‹ç§»åŠ¨ï¼Œctrl+wã€kå‘ä¸Šç§»åŠ¨ï¼Œctrl+wã€lå‘å³ç§»åŠ¨ã€‚ctrl+wã€+å¢åŠ é«˜åº¦ï¼Œctrl+wã€-å‡å°‘é«˜åº¦ï¼Œctrl+wã€=è®¾ç½®é«˜åº¦ç›¸ç­‰ã€‚
æ ‡ç­¾é‡Œé¢å¯ä»¥åŒ…å«å¤šä¸ªçª—å£ï¼Œä½¿ç”¨ç±»ä¼¼äºbuffersã€‚å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œtabnewåˆ›å»ºæ ‡ç­¾ï¼ŒtabfindæŸ¥æ‰¾å¹¶åœ¨æ–°æ ‡ç­¾ä¸­æ‰“å¼€æ–‡ä»¶ï¼ŒtabsæŸ¥çœ‹æ‰“å¼€çš„æ ‡ç­¾åˆ—è¡¨ï¼Œtabcloseå…³é—­å½“å‰æ ‡ç­¾é¡µï¼Œtabonlyåªä¿ç•™å½“å‰æ ‡ç­¾é¡µï¼Œtabn/p/first/laståˆ‡æ¢æ ‡ç­¾é¡µï¼Œtabm 0å°†æ ‡ç­¾é¡µæ”¾åˆ°ç¬¬ä¸€ä¸ªä½ç½®ã€‚æ™®é€šæ¨¡å¼ä¸‹ï¼Œgt/gTåˆ‡æ¢æ ‡ç­¾é¡µã€‚
æ–‡æœ¬å¯¹è±¡å’Œå®æ–‡æœ¬å¯¹è±¡ï¼šwä»£è¡¨wordï¼Œsä»£è¡¨sentenceï¼Œpä»£è¡¨paragraphï¼Œæ­¤å¤–è¿˜æœ‰textblockå—å¯¹è±¡ã€‚
æ“ä½œï¼š
&#123;operator&#125;&#123;i&#125;&#123;object&#125;&#123;operator&#125;&#123;a&#125;&#123;object&#125;daw = delete a word      ==a==n object: include the tail spaceciw = change inner word      ==i==nner object: not include the tail space

viwé€‰ä¸­å•è¯ï¼Œv3iwé€‰ä¸­ä¸‰ä¸ªå•è¯ï¼Œvisé€‰ä¸­å¥å­ï¼Œvipé€‰ä¸­æ®µè½ï¼Œvi(é€‰ä¸­åœ†æ‹¬å·ä¸­çš„å†…å®¹ï¼Œvi[é€‰ä¸­ä¸­æ‹¬å·ä¸­çš„å†…å®¹ï¼Œvité€‰ä¸­æ ‡ç­¾ä¸­çš„å†…å®¹ã€‚
ä½¿ç”¨å®è¾“å…¥1åˆ°99ï¼šæ™®é€šæ¨¡å¼ä¸‹ï¼Œoè¿›å…¥ä¸‹ä¸€è¡Œæ’å…¥ï¼Œè¾“å…¥1ï¼ŒEscè¿”å›æ™®é€šæ¨¡å¼ï¼Œqaå¼€å§‹å½•åˆ¶ï¼Œyypå¤åˆ¶ç²˜è´´ä¸€è¡Œï¼Œctrl+aå½“å‰æ•°å­—åŠ ä¸€ï¼Œqå®Œæˆå½•åˆ¶ï¼Œ97@aæ‰§è¡Œ97æ¬¡ã€‚
Visualæ¨¡å¼åœ¨å¯è§†æ¨¡å¼ä¸‹ï¼Œå¯ä»¥å¯¹ä¸€ä¸ªæ–‡æœ¬å—çš„æ•´ä½“è¿›è¡Œæ“ä½œã€‚å¯è§†æ¨¡å¼æœ‰ä¸‰ç§å­æ¨¡å¼ï¼Œvæ¿€æ´»é¢å‘å­—ç¬¦çš„å¯è§†æ¨¡å¼ï¼ŒVæ¿€æ´»é¢å‘è¡Œçš„å¯è§†æ¨¡å¼ï¼Œctrl+væ¿€æ´»é¢å‘åˆ—å—çš„å¯è§†æ¨¡å¼ã€‚
gvé‡é€‰åˆšæ‰é€‰æ‹©çš„é€‰åŒºï¼Œoåœ¨é€‰æ‹©åŒºä¸¤ç«¯è·³åŠ¨ã€‚ctrl+vã€3jå‚ç›´ä¸‹æ‹‰ä¸‰åˆ—ï¼Œrè¿›è¡Œæ›¿æ¢ã€‚ctrl+vã€3jå‚ç›´ä¸‹æ‹‰ä¸‰åˆ—ï¼Œeé€‰æ‹©å•è¯ç›´åˆ°è¯å°¾ï¼Œcè¿›è¡Œå•è¯æ›¿æ¢ï¼Œè¾“å…¥å®Œæˆï¼ŒEscã€‚ctrl+vã€3jå‚ç›´ä¸‹æ‹‰ä¸‰åˆ—ï¼ŒShift+$é€‰æ‹©åˆ°è¡Œå°¾ï¼ŒAè¿›è¡Œæ’å…¥ï¼Œè¾“å…¥å®Œæˆï¼ŒEscã€‚
åè®°è‡³æ­¤ï¼Œå·²ç»ç³»ç»Ÿå­¦ä¹ äº†Vimçš„é«˜é˜¶çŸ¥è¯†ç‚¹ï¼ŒåŒ…æ‹¬Vimé…ç½®ã€å››ç§æ¨¡å¼ã€å¿«æ·é”®ã€å¤šæ–‡æœ¬ç¼–è¾‘ã€å¤šçª—å£æ ‡ç­¾ã€æ–‡æœ¬å¯¹è±¡å’Œå®ã€å¯è§†æ¨¡å¼ç­‰ã€‚æ¥ä¸‹æ¥ï¼Œå°±æ˜¯åœ¨å­¦ä¹ å·¥ä½œä¸­å¤šå¤šä½¿ç”¨Vimï¼Œæœ€ç»ˆç†Ÿèƒ½ç”Ÿå·§ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>ç¼–è¾‘å™¨</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>é˜¿é‡Œäº‘æŠ€æœ¯ä½“ç³»æ¦‚è§ˆ</title>
    <url>/dev-ali-tech-system-summary/</url>
    <content><![CDATA[é˜¿é‡Œäº‘æ®Gartnerå‘å¸ƒçš„2017å¹´åº¦å…¨çƒå…¬æœ‰äº‘å¸‚åœºä»½é¢åˆ†ææŠ¥å‘Šï¼Œå…¨çƒèŒƒå›´å†…çš„å…¬æœ‰äº‘å¸‚åœºå·²ç»å½¢æˆäº†3Aæ ¼å±€ï¼šäºšé©¬é€ŠAWSã€å¾®è½¯Azureã€é˜¿é‡Œäº‘AliYunã€‚
ä»Šå¹´ï¼Œå¤©çŒ«åŒ11ä»¥2135äº¿çš„æˆäº¤é¢å†ç ´è®°å½•ã€‚è¿™èƒŒåï¼Œæ˜¯é˜¿é‡Œäº‘çš„æŠ€æœ¯åœ¨æ”¯æ’‘ï¼Œé˜¿é‡Œäº‘çš„å¤§æ•°æ®è®¡ç®—å¹³å°å·²ç»æ‹¥æœ‰å…¨ä¸–ç•Œæœ€ç‰›çš„å¤§æ•°æ®å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚
æœ¬æ–‡ï¼Œå°±æ¥ç ”ç©¶æ•´ç†ä¸€ä¸‹é˜¿é‡Œäº‘çš„æŠ€æœ¯æ ˆã€‚


å†å²2009å¹´ä¹‹å‰IOEï¼ˆIBMå°å‹æœºï¼ŒOracleæ•°æ®åº“ï¼ŒEMCå­˜å‚¨è®¾å¤‡ï¼‰ï¼ŒOracleä¹‹å·…ã€‚
2009å¹´9æœˆé˜¿é‡Œäº‘æˆç«‹ï¼Œæ„¿æ™¯æ˜¯è¦åšä¸€å¥—å¤§æ•°æ®åˆ†å¸ƒå¼è®¡ç®—/å­˜å‚¨çš„äº‘å¹³å°ï¼Œè‡ªä¸»ç ”å‘é£å¤©ä½“ç³»ï¼ŒåŒ…æ‹¬ä¸‰å¤§éƒ¨åˆ†ï¼šåº•å±‚çš„åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿâ€”â€”ç›˜å¤ã€åˆ†å¸ƒå¼è°ƒåº¦ç³»ç»Ÿâ€”â€”ä¼ç¾²ã€å¼€æ”¾æ•°æ®å¤„ç†æœåŠ¡â€”â€”ODPSï¼ˆOpen Data Processing Serviceï¼‰ã€‚åæ¥åˆæ·»åŠ äº†é›†ç¾¤è¯Šæ–­ç³»ç»Ÿâ€”â€”åä½—ã€ç½‘ç»œè¿æ¥æ¨¡å—â€”â€”å¤¸çˆ¶ã€ç›‘æ§ç³»ç»Ÿâ€”â€”ç¥å†œã€é›†ç¾¤éƒ¨ç½²â€”â€”å¤§ç¦¹ã€‚
2009-2011å¹´æœŸé—´äº‘æ¢¯1ï¼ˆHadoopï¼‰ã€äº‘æ¢¯2ï¼ˆé£å¤©ï¼‰ï¼Œä¸¤å¥—ç³»ç»Ÿï¼Œäº‘æ¢¯1æ‰¿è½½åˆæœŸé›†å›¢æ·˜å®çš„æ•°æ®ä¸šåŠ¡ï¼Œäº‘æ¢¯2åŠ©åŠ›é˜¿é‡Œé‡‘èçš„ç¬¬ä¸€ä¸ªäº§å“â€œç‰§ç¾ŠçŠ¬â€åº”ç”¨ä¸Šçº¿ã€‚
2011å¹´ï¼Œé›†å›¢ä¸»è¦ä¸šåŠ¡å…¨éƒ¨ç™»ä¸Šäº‘æ¢¯1ï¼Œé˜¿é‡Œæ„å»ºäº†å›½å†…é¢†å…ˆçš„hadoopé›†ç¾¤ã€‚ä¸¤åº§äº‘æ¢¯åŒæ—¶å‘å±•ï¼Œå¼€å§‹è¿›è¡Œåšå¼ˆï¼Œè§„åˆ™å¾ˆæ˜ç¡®ï¼šè¦æƒ³æˆåŠŸè‚©è´Ÿèµ·é˜¿é‡Œå·´å·´çš„åº•å±‚è®¡ç®—ç³»ç»Ÿï¼Œå°±å¿…é¡»æœ‰èƒ½åŠ›ç‹¬è‡ªè°ƒåº¦5000å°æœåŠ¡å™¨ï¼Œâ€œèµ¢è€…é€šåƒâ€ï¼Œç»§æ‰¿å®¶ä¸šã€‚
2011å¹´ï¼Œå¤§æ•°æ®å®æ—¶è®¡ç®—å‘å±•ä¹Ÿéšä¸šåŠ¡è€Œç”Ÿã€‚æ•°æ®é­”æ–¹ç ”å‘äº†ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„galaxyï¼Œb2bæœç´¢å›¢é˜Ÿä¹Ÿç ”å‘äº†ä¸€ä¸ªå«iprocessçš„æµè®¡ç®—ç³»ç»Ÿã€‚åœ¨12å¹´7æœˆä»½ï¼Œæ•°æ®å¹³å°äº‹ä¸šéƒ¨ï¼ˆCDOï¼‰æˆç«‹ï¼Œä¸¤ä¸ªå›¢é˜Ÿèµ°åˆ°äº†ä¸€èµ·ç»„å»ºäº†å®æ—¶è®¡ç®—å›¢é˜Ÿã€‚
2012å¹´å†°ç«é¸Ÿï¼šæ•°æ®ä¸šåŠ¡å±‚ç»Ÿä¸€ã€‚äº‘æ¢¯1ã€äº‘æ¢¯2è¿ç»´å›¢é˜Ÿåˆå¹¶ã€‚
2013å¹´5Kä¹‹æˆ˜ï¼šçªç ´é›†ç¾¤å­˜å‚¨çš„ç“¶é¢ˆã€‚äº‘æ¢¯2çªç ´5Kã€‚
2014å¹´-2015å¹´ç™»æœˆè®¡åˆ’ï¼šæ‰“é€ é›†å›¢ç»Ÿä¸€å¤§æ•°æ®å¹³å°ã€‚äº‘æ¢¯1åœæ­¢ï¼Œäº‘æ¢¯2æˆä¸ºé›†å›¢ç»Ÿä¸€çš„å¤§æ•°æ®å¹³å°ã€‚ODPSæ›´åä¸ºâ€œMaxComputeâ€ã€‚
2015å¹´ï¼Œæ”¯æŒå…¬æœ‰äº‘ï¼Œé˜¿é‡Œå¤§æ•°æ®è®¡ç®—èƒ½åŠ›ï¼Œèµ°å‡ºé›†å›¢æœåŠ¡å…¨çƒã€‚
2016å¹´ï¼Œå»ºè®¾ä¸»å¤‡åŒé“¾è·¯å®¹ç¾ã€å®æ—¶å…¨é“¾è·¯ç›‘æ§ã€Teslaè¿ç»´è¯Šæ–­å·¥å…·å®æ—¶å…¨é“¾è·¯ä¿éšœæ–¹æ¡ˆã€‚å¤§åŠ›å‘å±•å®æ—¶è®¡ç®—ï¼ŒGalaxyã€JStormå’ŒSearch dumpä¸‰æ”¯å®æ—¶è®¡ç®—å›¢é˜Ÿèµ„æºæ•´åˆã€‚
2017å¹´ï¼ŒMaxComputeæ¶æ„å‡çº§ï¼Œåœ¨NewSQLã€å¯Œç»“æ„åŒ–ã€è”åˆè®¡ç®—å¹³å°ã€AliORCå¤šä¸ªæ–¹å‘ä¸Šå‘åŠ›ï¼Œç»§ç»­æ„å»ºé«˜å¯ç”¨ã€é«˜æ€§èƒ½ã€é«˜è‡ªé€‚æ€§çš„ä¸€ç«™å¼çš„å¤§æ•°æ®è§£å†³æ–¹æ¡ˆå¼€æ”¾å¹³å°ã€‚
æ›´è¯¦ç»†å†å²ï¼Œå‚è€ƒé¦–æ¬¡æ¢ç§˜ï¼åŒ11å¥‡è¿¹èƒŒåçš„å¤§æ•°æ®åŠ›é‡ï¼Œåå¹´å‘å±•äº”éƒ¨æ›²ã€‚
é˜¿é‡Œå¤§æ•°æ®æŠ€æœ¯å¦‚ä½•è¿›åŒ–ï¼Ÿèµ„æ·±æŠ€æœ¯ä¸“å®¶å¸¦ä½ å›é¡¾ä¸€æ–‡ä¸­ä½œè€…è§‚æ»”æåˆ°ï¼š

å¦‚æœæŠŠé˜¿é‡Œå·´å·´æ•´ä½“æ•°æ®ä½“ç³»æ¯”ä½œè¿™ä¸ªæˆ˜é˜Ÿï¼Œé‚£ä¹ˆMaxComputeå°±æ˜¯ä¸­é—´çš„é‚£è‰˜èˆªç©ºæ¯èˆ°ï¼Œå‡ ä¹é˜¿é‡Œå·´å·´99%çš„æ•°æ®å­˜å‚¨ä»¥åŠ95%çš„è®¡ç®—èƒ½åŠ›éƒ½åœ¨è¿™ä¸ªå¹³å°ä¸Šäº§ç”Ÿã€‚

è®¡ç®—å¹³å°é˜¿é‡Œçš„è®¡ç®—å¹³å°æœåŠ¡ä¸»è¦æœ‰MaxComputeã€æµè®¡ç®—Blinkã€å›¾è®¡ç®—FLASHã€æœºå™¨å­¦ä¹ PAIã€‚
MaxComputeç”±å†å²å¯ä»¥çœ‹å‡ºï¼Œç°åœ¨çš„é˜¿é‡ŒæŠ€æœ¯æ ¸å¿ƒå›´ç»•MaxComputeã€‚ä¸Šå›¾æ˜¯MaxComputeçš„æŠ€æœ¯æ¶æ„ã€‚æœ€ä¸‹é¢ä¸€å±‚æ˜¯ç‰©ç†æœºå™¨ï¼ŒMaxComputeæœ‰è‡ªå·±çš„ç‰©ç†é›†ç¾¤ï¼Œåœ¨é›†ç¾¤ä¹‹ä¸Šæœ‰éå¸¸é‡è¦çš„èƒ½åŠ›ï¼šå®ƒæŠŠä¸€ä¸ªé›†ç¾¤ç»„ç»‡æˆäº†1ä¸‡å°è®¡ç®—æœºï¼ŒMaxCompute 2.0å¾ˆå¤§çš„ç‰¹æ€§æ˜¯é›†ç¾¤èƒ½åŠ›å¾—åˆ°äº†æ‰©å±•ï¼Œä»5åƒå˜æˆäº†1ä¸‡ã€‚é»‘è‰²éƒ¨åˆ†æ˜¯é£å¤©æ“ä½œç³»ç»Ÿï¼Œæä¾›æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä»»åŠ¡ååŒã€èµ„æºç®¡ç†ã€é›†ç¾¤è°ƒåº¦ç­‰åŠŸèƒ½ï¼Œä¸ºä¸Šå±‚äº‘äº§å“æä¾›ç»Ÿä¸€çš„æ“ä½œç³»ç»ŸæœåŠ¡ã€‚å…¶ä¸Šæ˜¯MaxComputeç»Ÿä¸€çš„è®¡ç®—å¼•æ“ï¼Œæ”¯æŒSQLã€MRã€è¿­ä»£è®¡ç®—ã€å›¾è®¡ç®—ã€æµè®¡ç®—ã€‚
è¯¦æƒ…å‚è€ƒé˜¿é‡Œå·´å·´å¤§æ•°æ®è®¡ç®—å¹³å°MaxComputeï¼ˆåŸåODPSï¼‰å…¨å¥—æ”»ç•¥å’Œæ€§èƒ½è¿½æ±‚ä¹‹è·¯â€”â€”MaxCompute2.0ï¼ˆåŸODPSï¼‰çš„å‰ä¸–ä»Šç”Ÿã€‚
BlinkApache Flinkæ˜¯é¢å‘æ•°æ®æµå¤„ç†å’Œæ‰¹å¤„ç†çš„åˆ†å¸ƒå¼å¼€æºè®¡ç®—æ¡†æ¶ï¼Œ2016å¹´é˜¿é‡Œå·´å·´å¼•å…¥Flinkæ¡†æ¶ï¼Œæ”¹é€ ä¸ºBlinkã€‚2017å¹´ï¼Œé˜¿é‡Œæ•´åˆäº†æ‰€æœ‰æµè®¡ç®—äº§å“ï¼Œå†³å®šä»¥Blinkå¼•æ“ä¸ºåŸºç¡€ï¼Œæ‰“é€ ä¸€æ¬¾å…¨çƒé¢†å…ˆçš„å®æ—¶è®¡ç®—å¼•æ“ã€‚å½“å¹´åŒ11ï¼ŒBlinkæ”¯æŒäº†äºŒåå¤šä¸ªäº‹ä¸šéƒ¨ï¼ç¾¤ï¼ŒåŒæ—¶è¿è¡Œäº†ä¸Šåƒä¸ªå®æ—¶è®¡ç®—jobï¼Œæ¯ç§’å¤„ç†çš„æ—¥å¿—æ•°å³°å€¼è¾¾åˆ°æƒŠäººçš„4.7äº¿ã€‚
è¯¦æƒ…å‚è€ƒé˜¿é‡Œæ–°ä¸€ä»£å®æ—¶è®¡ç®—å¼•æ“ Blinkï¼Œæ¯ç§’æ”¯æŒæ•°åäº¿æ¬¡è®¡ç®—ã€‚
FLASHFLASHæ˜¯é˜¿é‡Œçš„å›¾è®¡ç®—å¹³å°ã€‚ç®€å•çš„è¯´å›¾è®¡ç®—å°±æ˜¯ç ”ç©¶åœ¨å¤§è§„æ¨¡å›¾æ•°æ®ä¸‹ï¼Œå¦‚ä½•é«˜æ•ˆè®¡ç®—ï¼Œå­˜å‚¨å’Œç®¡ç†å›¾æ•°æ®ç­‰ç›¸å…³é—®é¢˜çš„é¢†åŸŸã€‚
åº”ç”¨ï¼šæœç´¢æ¨èã€å…³è”åˆ†æã€å®æ—¶é¢„æµ‹ç­‰ã€‚
è¯¦æƒ…å‚è€ƒFLASH:å¤§è§„æ¨¡åˆ†å¸ƒå¼å›¾è®¡ç®—å¼•æ“åŠå…¶åº”ç”¨å’Œå¤§è§„æ¨¡å›¾è®¡ç®—ç³»ç»Ÿç»¼è¿°ã€‚
PAIPAIæ˜¯é˜¿é‡Œè‡ªå·±çš„æ™ºèƒ½å¹³å°ï¼Œè¯¥å¹³å°åŸºäºé˜¿é‡Œäº‘çš„äº‘è®¡ç®—å¹³å°ï¼Œå…·æœ‰å¤„ç†è¶…å¤§è§„æ¨¡æ•°æ®çš„èƒ½åŠ›å’Œåˆ†å¸ƒå¼çš„å­˜å‚¨èƒ½åŠ›ï¼ŒåŒæ—¶æ•´ä¸ªæ¨¡å‹æ”¯æŒè¶…å¤§è§„æ¨¡çš„å»ºæ¨¡ä»¥åŠGPUè®¡ç®—ã€‚æ­¤å¤–ï¼Œè¯¥å¹³å°è¿˜å…·æœ‰ç¤¾åŒºçš„ç‰¹ç‚¹ï¼šå®éªŒç»“æœå¯å…±äº«ã€ç¤¾åŒºå›¢é˜Ÿç›¸äº’åä½œã€‚è¯¥æ™ºèƒ½å¹³å°ä¸»è¦åˆ†ä¸ºä¸‰å±‚ï¼Œç¬¬ä¸€å±‚æ˜¯Web UIç•Œé¢ï¼Œç¬¬äºŒå±‚æ˜¯IDSTç®—æ³•å±‚ï¼Œæœ€åä¸€å±‚æ˜¯ODPSå¹³å°å±‚ã€‚
è¯¦æƒ…å‚è€ƒé˜¿é‡Œäº‘æœºå™¨å­¦ä¹ å¹³å°â€”â€”PAIå¹³å°ã€‚
æŠ€æœ¯æ¶æ„é™¤äº†MaxComputeï¼Œé˜¿é‡Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„æŠ€æœ¯ï¼Œå¦‚ä¸‹å›¾ï¼š1ã€åŸºç¡€è®¾æ–½æ–°æŠ€æœ¯å¤§è§„æ¨¡æ–‡ä»¶åˆ†å‘ç³»ç»Ÿã€X-Clusterã€æ—¶é—´åºåˆ—å¼‚å¸¸æ£€æµ‹ç®—æ³•ã€Changefreç³»ç»Ÿã€é˜¿é‡Œæ™ºèƒ½æµé‡è°ƒåº¦ç³»ç»Ÿã€StarAgentã€è°ƒåº¦æ··éƒ¨æŠ€æœ¯ã€ç½‘ç»œè‡ªæ„ˆæŠ€æœ¯ã€â€œæ— äººå€¼å®ˆâ€çš„å…¨é“¾è·¯å‹æµ‹
2ã€æ–°é›¶å”®æŠ€æœ¯åˆ›æ–°æ—¶å°šå¤§è„‘ã€é—¨åº—å‘è´§/è‡ªæã€æ™ºæ…§é—¨åº—å¤©æ¢­ã€éšèº«è´­ç‰©è¢‹ã€æ•°æ®é“¶è¡Œ
3ã€èœé¸Ÿèœé¸Ÿæ–¹èˆŸ
4ã€æ”¯ä»˜OceanBaseã€ç¦»åœ¨çº¿æ··éƒ¨ã€GeaBaseã€æ”¯ä»˜å·¥å…·ç²¾å‡†æ¨èã€æµ·æ·˜æ­£å“æº¯æº
5ã€æœºå™¨æ™ºèƒ½â€œæ–°ç‰©ç§â€æˆ˜é˜Ÿäº‘å°èœœã€èš‚èšå®‰å®‰ã€é¦–å¸­æ‹£è´§å®˜ã€å°GäºŒä»£ï¼šæ™ºèƒ½é…é€å‘˜ã€å¤©å·¡ã€å°–å…µã€è¾¾çµã€é²ç­ã€èš‚èšä½ç½—ã€æ— äººæ±½è½¦å”®å–æœº
6ã€äº‘è®¡ç®—é˜¿é‡Œäº‘å¼¹æ€§è®¡ç®—ECSã€ApsaraCacheã€é˜¿é‡Œäº‘æ•°æ®é›†RDSã€é˜¿é‡Œäº‘å†…å®¹åˆ†å‘ç½‘ç»œCDNã€æ—¥å¿—æœåŠ¡ã€ç§»åŠ¨äº‘ã€é˜¿é‡Œäº‘OSSã€é˜¿é‡Œäº‘DDoSé˜²å¾¡æŠ€æœ¯ã€æ··åˆäº‘æ¶æ„ã€ä¸“æœ‰ç½‘ç»œVPCã€è´Ÿè½½å‡è¡¡SLBã€é«˜é€Ÿé€šé“ã€NATç½‘å…³ã€è§†é¢‘ç›´æ’­ã€äº‘å¯¼æ’­
7ã€å®‰å…¨éœ¸ä¸‹â€”â€”ä¸ƒå±‚æµé‡æ¸…æ´—ã€é’±ç›¾ã€MTEE3ã€å¾¡åŸæ²³ã€CTU
æŠ€æœ¯ç‚¹è°ƒåº¦æ··éƒ¨æŠ€æœ¯Sigmaé€šè¿‡å’Œç¦»çº¿ä»»åŠ¡çš„ä¼ç¾²è°ƒåº¦ç³»ç»Ÿæ·±åº¦é›†æˆï¼Œçªç ´äº†è‹¥å¹²CPUã€å†…å­˜å’Œç½‘ç»œèµ„æºéš”ç¦»çš„å…³é”®æŠ€æœ¯ï¼Œå®ç°äº†åœ¨çº¿å’Œç¦»çº¿ä»»åŠ¡çš„æ··åˆéƒ¨ç½²ã€‚
Sigmaè°ƒåº¦å¯ä»¥è·¨å¤šä¸ªä¸åŒå¹³å°æ¥åˆ†é…åŒ11æ‰€éœ€çš„èµ„æºï¼Œä½¿åŒ11 ITæˆæœ¬ä¸‹é™50%ï¼›æ··éƒ¨æŠ€æœ¯æŠŠæœåŠ¡å™¨èµ„æºåˆ©ç”¨ç‡æå‡30%ï¼Œå¤ç”¨è®¡ç®—ä»»åŠ¡é›†ç¾¤ä¸ºåŒ11èŠ‚çº¦å¤§é‡æœåŠ¡å™¨ã€‚
åœ¨çº¿æœåŠ¡çš„å®¹å™¨å°±åƒç –å—ï¼Œè€Œè®¡ç®—ä»»åŠ¡å°±åƒæ²™å­å’Œæ°´ã€‚å½“åœ¨çº¿æœåŠ¡å‹åŠ›å°çš„æ—¶å€™ï¼Œè®¡ç®—ä»»åŠ¡å°±å ä½é‚£äº›ç©ºéš™ï¼ŒæŠŠç©ºé—²çš„èµ„æºéƒ½ä½¿ç”¨èµ·æ¥ï¼Œè€Œå½“åœ¨çº¿æœåŠ¡å¿™çš„æ—¶å€™ï¼Œè®¡ç®—ä»»åŠ¡ä¾¿ç«‹å³é€€å‡ºç©ºéš™ï¼ŒæŠŠèµ„æºè¿˜ç»™åœ¨çº¿æœåŠ¡ã€‚
è¯¦æƒ…å‚è€ƒæƒ³äº†è§£é˜¿é‡Œå·´å·´çš„äº‘åŒ–æ¶æ„ çœ‹è¿™ç¯‡å°±å¤Ÿäº†ã€‚
Pouchå®¹å™¨é˜¿é‡Œçš„å®¹å™¨æŠ€æœ¯ç»å†äº†ä¸€ä¸ªä»é›†ä¸­å¼åˆ°åˆ†å¸ƒå¼æ¶æ„ä¸Šçš„æ¼”åŒ–ï¼Œæœ€å¼€å§‹æ˜¯ç›´æ¥è·‘åœ¨ç‰©ç†æœºä¸Šï¼Œä¹‹åå¼•å…¥äº†è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œä½†æ•´ä½“çš„èµ„æºä½¿ç”¨ç‡ä¸é«˜ï¼Œå› è€Œè¿‡æ¸¡åˆ°äº†å®¹å™¨æŠ€æœ¯ã€‚2015 å¹´ä»¥åï¼Œé˜¿é‡Œå·´å·´å¼•å…¥Dockeræ ‡å‡†ï¼Œå½¢æˆä¸€å¥—æ–°çš„å®¹å™¨æŠ€æœ¯â€”â€”Pouchï¼Œå¹¶é›†æˆåˆ°æ•´ä¸ªè¿ç»´ä½“ç³»ã€‚
å…¨ç½‘PouchåŒ–å®ç°é˜¿é‡Œåœ¨çº¿æœåŠ¡å…¨éƒ¨å®¹å™¨åŒ–ï¼Œå†…éƒ¨è¾¾åˆ°ç™¾ä¸‡çº§å®¹å™¨éƒ¨ç½²è§„æ¨¡ï¼ŒPouchå®¹å™¨å·²å¯¹å¤–å¼€æºã€‚
å…¨é“¾è·¯å‹æµ‹é˜¿é‡Œå·´å·´åŒ11å¤‡æˆ˜æœŸé—´ï¼Œä¿éšœç³»ç»Ÿç¨³å®šæ€§æœ€å¤§çš„éš¾é¢˜åœ¨äºå®¹é‡è§„åˆ’ï¼Œè€Œå®¹é‡è§„åˆ’æœ€å¤§çš„éš¾é¢˜åœ¨äºå‡†ç¡®è¯„ä¼°ä»ç”¨æˆ·ç™»å½•åˆ°å®Œæˆè´­ä¹°çš„æ•´ä¸ªé“¾æ¡ä¸­ï¼Œæ ¸å¿ƒé¡µé¢å’Œäº¤æ˜“æ”¯ä»˜çš„å®é™…æ‰¿è½½èƒ½åŠ›ã€‚
æœ€åˆé‡‡ç”¨çš„æ–¹å¼æ˜¯åœ¨çº¿ä¸Šå•æœºçš„ç”Ÿäº§ç¯å¢ƒçš„å‹åŠ›æµ‹è¯•å’Œå®¹é‡è§„åˆ’ï¼ŒåŸºäºå•å°æœåŠ¡èƒ½åŠ›å’Œé¢„ä¼°å³å°†åˆ°æ¥çš„ä¸šåŠ¡æµé‡è¿›è¡Œå®¹é‡è§„åˆ’ï¼Œç¡®å®šæ‰€éœ€æœåŠ¡å™¨çš„æ•°ç›®ã€‚
2010-2012å¹´åŒ11æš´éœ²äº†ä¸å°‘é—®é¢˜ï¼Œå•ä¸ªç³»ç»Ÿreadyä¸ä»£è¡¨å…¨å±€readyï¼Œç©¶å…¶æ ¹æœ¬åŸå› åœ¨äºç³»ç»Ÿä¹‹é—´ç›¸äº’å…³è”å’Œä¾èµ–è°ƒç”¨ä¹‹é—´ç›¸äº’å½±å“ã€‚åœ¨åšå•ä¸ªç³»ç»Ÿçš„å®¹é‡è§„åˆ’æ—¶ï¼Œæ‰€æœ‰çš„ä¾èµ–ç¯èŠ‚èƒ½åŠ›æ˜¯æ— é™çš„ï¼Œè¿›è€Œä½¿å¾—è·å–çš„å•æœºèƒ½åŠ›å€¼æ˜¯åä¹è§‚çš„ï¼›åŒæ—¶ï¼Œé‡‡ç”¨å•ç³»ç»Ÿè§„åˆ’æ—¶ï¼Œæ— æ³•ä¿è¯æ‰€æœ‰ç³»ç»Ÿå‡ä¸€æ­¥åˆ°ä½ï¼Œå¤§å¤šæ•°ç²¾åŠ›éƒ½é›†ä¸­æ ¸å¿ƒå°‘æ•°æ ¸å¿ƒç³»ç»Ÿï¼›æ­¤å¤–ï¼Œéƒ¨åˆ†é—®é¢˜åªæœ‰åœ¨çœŸæ­£å¤§æµé‡ä¸‹æ‰ä¼šæš´éœ²ï¼Œæ¯”å¦‚ç½‘ç»œå¸¦å®½ç­‰ç­‰ã€‚
é˜¿é‡Œä»13å¹´èµ·ç€æ‰‹è¿›è¡Œå…¨é“¾è·¯å‹æµ‹ã€‚å…¨é“¾è·¯å‹æµ‹çš„æœ¬è´¨æ˜¯è®©åŒ11é›¶ç‚¹è¿™ä¸€åˆ»æå‰åœ¨ç³»ç»Ÿé¢„æ¼”ï¼ˆç”¨æˆ·æ— æ„ŸçŸ¥ï¼‰ï¼Œæ¨¡æ‹Ÿâ€œåŒ11â€åŒæ ·çš„çº¿ä¸Šç¯å¢ƒã€ç”¨æˆ·è§„æ¨¡ã€ä¸šåŠ¡åœºæ™¯ã€ä¸šåŠ¡é‡çº§ï¼Œä¹‹åå†é’ˆå¯¹æ€§åœ°è¿›è¡Œç³»ç»Ÿè°ƒä¼˜ï¼Œæ˜¯ç«™ç‚¹çš„ä¸€æ¬¡é«˜ä»¿çœŸæ¨¡æ‹Ÿè€ƒè¯•ã€‚
å…¨é“¾è·¯å‹æµ‹æ ¸å¿ƒè¦ç´ ä¸»è¦åŒ…æ‹¬å››ç‚¹ï¼š

å‹æµ‹ç¯å¢ƒï¼Œå®ƒæ˜¯æŒ‡å…·å¤‡æ•°æ®ä¸æµé‡éš”ç¦»èƒ½åŠ›çš„ç”Ÿäº§ç¯å¢ƒï¼Œä¸èƒ½å½±å“åˆ°åŸæœ‰çš„ç”¨æˆ·ä½“éªŒå’Œç”¨æˆ·æµç¨‹ã€BIæŠ¥è¡¨ä»¥åŠæ¨èç®—æ³•ç­‰ï¼›
å‹æµ‹åŸºç¡€æ•°æ®ï¼Œå®ƒä¸»è¦åŒ…æ‹¬å‹æµ‹ç”¨æˆ·ã€åº—é“ºã€å•†å“ç­‰åŸºç¡€æ•°æ®ï¼›
å‹æµ‹åœºæ™¯æ¨¡å‹ï¼Œå®ƒä¸»è¦æ˜¯æŒ‡å‹æµ‹å“ªäº›ä¸šåŠ¡åœºæ™¯ï¼Œæ¯ä¸ªåœºæ™¯ä¸‹å‹æµ‹å¤šå¤§é‡ç­‰ï¼›
å‹æµ‹æµé‡ï¼Œå®ƒä¸»è¦ç”±å‹æµ‹è¯·æ±‚çš„åè®®æ¥å†³å®šå‹æµ‹æµé‡çš„è¾“å‡º

è¯¦æƒ…å‚è€ƒç³»ç»Ÿç¨³å®šæ€§ä¿éšœæ ¸æ­¦å™¨â€”â€”å…¨é“¾è·¯å‹æµ‹ã€‚
OceanBaseOceanBaseæ˜¯é˜¿é‡Œå®Œå…¨è‡ªä¸»ç ”å‘çš„é‡‘èçº§åˆ†å¸ƒå¼å…³ç³»æ•°æ®åº“ï¼Œä»æ¶æ„ä¸Šå¯ä»¥é€šè¿‡æ‰©å±•æœºå™¨æ¥è§£å†³é›†ç¾¤æœåŠ¡èƒ½åŠ›çš„æ‰©å±•éœ€æ±‚ã€‚OceanBaseé‡‡ç”¨å¤šå‰¯æœ¬å¤åˆ¶çš„æ–¹æ¡ˆè§£å†³äº†å¯é æ€§å’Œå¯ç”¨æ€§çš„éœ€æ±‚ï¼Œè€Œä¸”æ„å»ºåœ¨æ™®é€šPCæœåŠ¡å™¨ä¸Šï¼Œä¸ä¾èµ–äºé«˜ç«¯å¼•æ“ã€‚
OceanBaseä»è¯ç”Ÿã€åˆ°ç”µå•†æ•°æ®åº“ã€å†åˆ°é‡‘èæ•°æ®åº“åŠæœ€ç»ˆçš„äº‘æ•°æ®åº“ï¼Œç»å†äº†å››ä¸ªé˜¶æ®µã€‚
è¯¦æƒ…å‚è€ƒé˜¿é‡Œèš‚èšé‡‘æœçš„å…³ç³»å‹æ•°æ®åº“ï¼šOceanBaseæ¶æ„è¯¦è§£å’ŒOceanBase 2.0 åˆ°åº•å¦‚ä½•åšåˆ° 50% çš„æ€§èƒ½æå‡ï¼Ÿã€‚
DubboDubboæ˜¯é˜¿é‡Œå·´å·´äº 2012 å¹´å¼€æºçš„åˆ†å¸ƒå¼æœåŠ¡æ²»ç†æ¡†æ¶ï¼Œç›®å‰å·²æ˜¯å›½å†…å½±å“åŠ›æœ€å¤§ã€ä½¿ç”¨æœ€å¹¿æ³›çš„å¼€æºæœåŠ¡æ¡†æ¶ä¹‹ä¸€ï¼Œåœ¨Githubä¸Šçš„ forkã€staræ•°å‡å·²ç ´ä¸‡ã€‚
Dubbo è‡´åŠ›äºæä¾›é«˜æ€§èƒ½å’Œé€æ˜åŒ–çš„RPCè¿œç¨‹æœåŠ¡è°ƒç”¨æ–¹æ¡ˆï¼Œä»¥åŠSOAæœåŠ¡æ²»ç†æ–¹æ¡ˆï¼Œä½¿å¾—åº”ç”¨å¯é€šè¿‡é«˜æ€§èƒ½RPC å®ç°æœåŠ¡çš„è¾“å‡ºå’Œè¾“å…¥åŠŸèƒ½ï¼Œ å’Œ Spring æ¡†æ¶æ— ç¼é›†æˆã€‚DubboåŒ…å«è¿œç¨‹é€šè®¯ã€é›†ç¾¤å®¹é”™å’Œè‡ªåŠ¨å‘ç°ä¸‰ä¸ªæ ¸å¿ƒéƒ¨åˆ†ã€‚æä¾›é€æ˜åŒ–çš„è¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼Œå®ç°åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·è°ƒç”¨è¿œç¨‹æ–¹æ³•ï¼Œåªéœ€ç®€å•é…ç½®ï¼Œæ²¡æœ‰ä»»ä½•APIä¾µå…¥ã€‚ 
åŒæ—¶å…·å¤‡è½¯è´Ÿè½½å‡è¡¡åŠå®¹é”™æœºåˆ¶ï¼Œå¯åœ¨å†…ç½‘æ›¿ä»£F5ç­‰ç¡¬ä»¶è´Ÿè½½å‡è¡¡å™¨ï¼Œé™ä½æˆæœ¬ï¼Œå‡å°‘å•ç‚¹ã€‚å¯ä»¥å®ç°æœåŠ¡è‡ªåŠ¨æ³¨å†Œä¸å‘ç°ï¼Œä¸å†éœ€è¦å†™æ­»æœåŠ¡æä¾›æ–¹åœ°å€ï¼Œæ³¨å†Œä¸­å¿ƒåŸºäºæ¥å£åæŸ¥è¯¢æœåŠ¡æä¾›è€…çš„ IP åœ°å€ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¹³æ»‘æ·»åŠ æˆ–åˆ é™¤æœåŠ¡æä¾›è€…ã€‚
è¯¦æƒ…å‚è€ƒåˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶Dubboç–¯ç‹‚æ›´æ–°ï¼é˜¿é‡Œå¼€æºè¦æå¤§äº‹æƒ…ï¼Ÿã€‚
StarAgentStarAgent æ˜¯ä¸€ä¸ªç”Ÿæ€å¹³å°ã€‚é˜¿é‡Œæ‰€æœ‰çš„ç‰©ç†æœºã€è™šæ‹Ÿæœºä»¥åŠå®¹å™¨éƒ½ä¼šè£…StarAgentï¼ŒåŸºæœ¬ä¸Šè¦å’Œæœºå™¨äº¤äº’éƒ½éœ€è¦é€šè¿‡è¿™ä¸ªå¹³å°ã€‚å®ƒå®é™…ä¸Šä¸ä¼šåšå…·ä½“çš„ä¸šåŠ¡ï¼Œå…·ä½“çš„ä¸šåŠ¡è¿˜æ˜¯é€šè¿‡å„ä¸ªä¸šåŠ¡å¹³å°å»å®ç°çš„ã€‚
StarAgent æ ¸å¿ƒåŠŸèƒ½å°±æ˜¯ä¸€ä¸ªå‘½ä»¤çš„é€šé“ï¼Œå®ƒæ—¢å¯ä»¥åŒæ­¥æ‰§è¡Œä»»åŠ¡åˆå¯ä»¥å¼‚æ­¥æ‰§è¡Œä»»åŠ¡ï¼Œè¿˜å¯ä»¥æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€å’Œæ’ä»¶ç®¡ç†ã€‚æ’ä»¶åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯é™æ€çš„ï¼Œé™æ€çš„å®é™…ä¸Šå°±æ˜¯è„šæœ¬ã€å‘½ä»¤ä¹‹ç±»çš„ã€‚å¦ä¸€ç§åŠ¨æ€çš„æ˜¯ä¸€ä¸ªå¸¸é©»è¿›ç¨‹ï¼Œå¿…é¡»å¸¸é©»åœ¨ç³»ç»Ÿé‡Œé¢ã€‚æˆ‘ä»¬ä¼šå®ˆæŠ¤è¿™ä¸ªè¿›ç¨‹ï¼Œå¦‚æœå®ƒæŒ‚äº†ä¼šé‡æ–°æ‹‰èµ·æ¥ï¼Œå¦‚æœå…¶å ç”¨å†…å­˜ã€CPUè¶…è¿‡è®¾å®šçš„èŒƒå›´ä¼šåˆ æ‰å®ƒã€‚æ•´ä¸ªåè®®æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä½¿ç”¨èµ·æ¥è€¦åˆåº¦ä¹Ÿæ˜¯æ¯”è¾ƒä½çš„ã€‚

è¯¦æƒ…å‚è€ƒåŒ11é»‘ç§‘æŠ€ï¼Œé˜¿é‡Œç™¾ä¸‡çº§æœåŠ¡å™¨è‡ªåŠ¨åŒ–è¿ç»´ç³»ç»ŸStarAgentæ­ç§˜ã€é˜¿é‡Œå·´å·´è¿ç»´ä¸­å°çš„æ¼”è¿›ä¸å»ºè®¾ã€é˜¿é‡Œå·´å·´è¿ç»´ä¸­å°çš„æ¼”è¿›ä¸å»ºè®¾pptã€‚
èœ»èœ“èœ»èœ“ç³»ç»Ÿæ˜¯çº¯ç¢çš„ P2P çš„æ–‡ä»¶åˆ†å‘ç³»ç»Ÿã€‚
è¯¦æƒ…å‚è€ƒé˜¿é‡Œå·´å·´è¿ç»´ä¸­å°çš„æ¼”è¿›ä¸å»ºè®¾ã€‚
NormandyNormandy æ˜¯è¿ç»´æ•´ä¸ªé˜¿é‡Œå·´å·´ä¸šåŠ¡çš„PaaSå¹³å°ã€‚è¿™ä¸ªå¹³å°å®é™…ä¸Šæä¾›ä¸‰å¤§åŠŸèƒ½ï¼Œåˆ†åˆ«æ˜¯åŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆInfrastructure as Codeï¼‰ã€éƒ¨ç½²å’Œåº”ç”¨è¿ç»´æ”¯æ’‘ã€‚
è¯¦æƒ…å‚è€ƒé˜¿é‡Œå·´å·´è¿ç»´ä¸­å°çš„æ¼”è¿›ä¸å»ºè®¾ã€‚
ä¹¦ç­¾
é˜¿é‡Œäº‘çš„è¿™ç¾¤ç–¯å­
ã€Šé˜¿é‡ŒæŠ€æœ¯å‚è€ƒå›¾å†Œã€‹
2017æ­å·äº‘æ –å¤§ä¼š100ä½å¤§å’–è§†é¢‘+è®²ä¹‰å…¨åˆ†äº«
é˜¿é‡Œç ”ç©¶å‘˜æ¯•ç„è°ˆåº”ç”¨è¿ç»´ä½“ç³»çš„å˜è¿ï¼ŒDevOPSæ˜¯å¤§åŠ¿æ‰€è¶‹
é˜¿é‡Œå·´å·´æ¯•ç„è§£å¯†AIOpsï¼šä¸€æ–‡è¯»æ‡‚é˜¿é‡Œå·´å·´è¿ç»´ä½“ç³»çš„å‰ä¸–ä»Šç”Ÿ

]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>aiops</tag>
      </tags>
  </entry>
  <entry>
    <title>è™šæ‹Ÿæœºåœ¨çº¿è¿ç§»å®éªŒ</title>
    <url>/dev-openstack-vm-live-migration-experiment/</url>
    <content><![CDATA[å‰è¨€ã€Šè™šæ‹Ÿæœºåœ¨çº¿è¿ç§»çš„æ€§èƒ½ç»Ÿè®¡ã€‹è§£å†³äº†æ€§èƒ½ç»Ÿè®¡çš„é—®é¢˜ï¼Œã€Šè™šæ‹Ÿæœºåœ¨çº¿è¿ç§»è¿‡ç¨‹ä¸­çš„æ•…éšœæ³¨å…¥ã€‹è§£å†³äº†ç¯å¢ƒæ¨¡æ‹Ÿçš„é—®é¢˜ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¿›è¡Œä¸€äº›è™šæ‹Ÿæœºè¿ç§»å®éªŒï¼Œæ”¶é›†ä¸åŒç¯å¢ƒä¸‹è¿ç§»è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ€§èƒ½ç»Ÿè®¡æ•°æ®ã€‚
å…±äº«å­˜å‚¨å’Œéå…±äº«å­˜å‚¨çš„è™šæ‹Ÿæœºè¿ç§»ï¼Œæ€§èƒ½å·®åˆ«å¾ˆå¤§ã€‚æœ¬æ¬¡å®éªŒï¼Œåœ¨å…±äº«å­˜å‚¨çš„æ¡ä»¶ä¸‹è¿›è¡Œã€‚å¯¹äºéå…±äº«å­˜å‚¨çš„è™šæ‹Ÿæœºè¿ç§»å®éªŒï¼Œæ”¾åœ¨å…¶ä»–æ–‡ç« ä¸­è®°å½•ã€‚


å®ä¾‹å‡†å¤‡ã€ŠOpenStackä¸­è™šæ‹Ÿæœºçš„åœ¨çº¿è¿ç§»ã€‹å’Œã€ŠOpenStackä¸­å…±äº«å­˜å‚¨çš„è™šæ‹Ÿæœºåœ¨çº¿è¿ç§»ã€‹ä¸¤ç¯‡æ–‡ç« ä¸­ï¼Œä½¿ç”¨cirrosä½œä¸ºè¿ç§»å¯¹è±¡ï¼›æœ¬æ¬¡å®éªŒä¸­ï¼Œä½¿ç”¨ubuntu16ä½œä¸ºè¿ç§»å¯¹è±¡ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥æ›´æ–¹ä¾¿åœ°æ³¨å…¥æ•…éšœï¼Œå®ä¾‹åˆ›å»ºå‚è€ƒã€ŠOpenStackæ·»åŠ é•œåƒã€‹å’Œã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”åˆ›å»ºå®ä¾‹ã€‹ã€‚
1ã€åœ¨horizonæ§åˆ¶å°ï¼Œé¡¹ç›®ï¼Œè®¡ç®—ï¼Œé•œåƒã€‚ä½¿ç”¨xenial-server-cloudimg-amd64-disk1.imgé•œåƒåˆ›å»ºubuntu16çš„é•œåƒæ¨¡æ¿ã€‚
2ã€ä½¿ç”¨ubuntu16çš„é•œåƒæ¨¡æ¿åˆ›å»ºå®ä¾‹ubuntu0ï¼Œå®ä¾‹ç±»å‹é€‰æ‹©m1.smallï¼Œé…ç½®ä¸º1æ ¸2Gå†…å­˜20Gå­˜å‚¨ã€‚
3ã€åˆ›å»ºæˆåŠŸåï¼Œåˆ†é…æµ®åŠ¨IPã€‚æœ¬æ¬¡åˆ†é…çš„æµ®åŠ¨IPä¸º10.0.2.154ã€‚
4ã€ç™»å½•ubuntu0å®ä¾‹ï¼Œå®‰è£…stress-ngï¼Œæ–¹ä¾¿æ¥ä¸‹æ¥çš„å®éªŒã€‚
æ­£å¸¸è™šæ‹Ÿæœºè¿ç§»1ã€controllerèŠ‚ç‚¹pingå®ä¾‹å¹¶è®°å½•sudo ping 10.0.2.154 -i 0.01 &gt;&gt; ping.log
2ã€åœ¨computeå’Œcompute2èŠ‚ç‚¹ï¼Œéƒ½å¯åŠ¨iptrafï¼Œç›‘å¬49152 to 49261ã€‚
3ã€åœ¨æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œè¿ç§»å‘½ä»¤nova live-migration ubuntu0 compute2
4ã€æŸ¥çœ‹æ˜¯å¦è¿ç§»å®Œæˆnova show ubuntu0
5ã€è¿ç§»å®Œæˆåè¿›è¡Œç»Ÿè®¡ã€‚ï¼ˆ1ï¼‰åœ¨computeèŠ‚ç‚¹æ‰§è¡Œtime.shï¼Œå¾—åˆ°æ€»çš„è¿ç§»æ—¶é—´ï¼Œ22sã€‚ï¼ˆ2ï¼‰åœ¨controlleræ‰§è¡Œdowntime.shï¼Œè®¡ç®—downtimeï¼Œ6.28sã€‚ï¼ˆ3ï¼‰æ ¹æ®iptrafçš„ç›‘å¬ç»“æœï¼Œå¾—åˆ°è¿å‡ºå’Œè¿å…¥çš„æ•°æ®é‡ï¼Œ283Mï¼Œ248Mã€‚
downtimeä¸åˆç†ï¼ä¸ºä»€ä¹ˆè¿™ä¹ˆä¹…ï¼Ÿç†è®ºä¸Šæ˜¯æ¯«ç§’çº§çš„å“‡ï¼å‚è€ƒã€Šè¯¦è§£openstackä¸‹çƒ­è¿ç§»æœºåˆ¶ã€‹ï¼Œå‘ç°OpenStackå¯ä»¥è¿›è¡Œè¿ç§»çš„å‚æ•°è®¾ç½®ï¼Œdowntimeå¯ä»¥è¿›è¡Œè°ƒèŠ‚ã€‚æŸ¥çœ‹è¿ç§»æ—¥å¿—ï¼šgrep downtime /var/lib/docker/volumes/kolla_logs/_data/nova/nova-compute.logå‘ç°æ—¥å¿—ä¸­æ˜¾ç¤ºçš„downtimeéƒ½æ˜¯å›ºå®šçš„50msï¼Œæ¯æ¬¡è¿ç§»åªæœ‰ä¸€æ¬¡åœæœºã€‚æ„Ÿè§‰æŒºå¤æ‚çš„æ ·å­ï¼Œå…ˆä¸ç®¡å®ƒï¼ŒæŒ‰ç…§é»˜è®¤è®¾ç½®æ¥å®éªŒå§ã€‚
å–æ¶ˆè¿ç§»å¦‚æœè™šæ‹Ÿæœºè¿ç§»å¤±è´¥ï¼Œå¯ä»¥å–æ¶ˆè¿ç§»ã€‚
1ã€æŸ¥çœ‹è¿ç§»ä»»åŠ¡nova server-migration-list ubuntu0è¯¥å‘½ä»¤æŸ¥çœ‹åˆ°è¿ç§»ä»»åŠ¡çš„IDä¸º12ã€‚
2ã€æŸ¥çœ‹è¿ç§»è¿‡ç¨‹nova server-migration-show ubuntu0 12
3ã€å–æ¶ˆè¿ç§»nova live-migration-abort ubuntu0 12
CPUæ•…éšœ1ã€åœ¨ubuntu0å®ä¾‹ä¸­åˆ›å»ºä¸€ä¸ªCPUè¿›ç¨‹ï¼ŒCPUå ç”¨ç‡10%stress-ng -c 1 -l 10ä½¿ç”¨topå¯ä»¥çœ‹åˆ°ï¼ŒCPUå ç”¨ç‡ä¸ç¨³å®šï¼Œstress-ngè¿›ç¨‹å¶å°”è·³åˆ°æœ€é«˜ï¼Œå ç”¨ç‡10%åˆ°90%ä¸ç­‰ã€‚
2ã€å®ä¾‹è¿ç§»ï¼Œå¾—åˆ°æ€»çš„è¿ç§»æ—¶é—´ï¼Œ34sã€‚
3ã€è®¾ç½®CPUå ç”¨ç‡åˆ†åˆ«ä¸º20%ã€30%åˆ°100%ï¼Œç»Ÿè®¡ç»“æœå¦‚ä¸‹ï¼š
| CPUå ç”¨ç‡ | è¿ç§»æ—¶é—´ | åœæœºæ—¶é—´ | è¿å‡ºæ•°æ®é‡ | è¿å…¥æ•°æ®é‡ || â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ || 0%  | 18s | 6.28s | 283M | 248M || 10% | 20s | 6.53s | 353M | 341M || 20% | 19s | 4.52s | 323M | 300M || 30% | 20s | 4.58s | 354M | 338M || 40% | 21s | 4.62s | 336M | 347M || 50% | 20s | 5.41s | 355M | 323M || 60% | 19s | 4.54s | 303M | 309M || 70% | 21s | 5.24s | 356M | 355M || 80% | 19s | 4.41s | 351M | 338M || 90% | 17s | 7.31s | 328M | 362M || 99% | 19s | 5.77s | 351M | 348M |
å†…å­˜æ•…éšœ1ã€åœ¨å®ä¾‹ä¸­åˆ›å»ºä¸€ä¸ª100Mçš„å†…å­˜è¿›ç¨‹stress-ng --vm 1 --vm-bytes 100M --vm-keepä½¿ç”¨free -hï¼Œå¯ä»¥çœ‹åˆ°å†…å­˜è¢«ä½¿ç”¨æ‰äº†100Mã€‚
2ã€è™šæ‹Ÿæœºè¿ç§»ï¼Œå¾—åˆ°æ€»çš„è¿ç§»æ—¶é—´ï¼Œ22sã€‚
3ã€è®¾ç½®å†…å­˜è¿›ç¨‹åˆ†åˆ«å ç”¨300Mã€600Måˆ°1.5Gï¼Œç»Ÿè®¡ç»“æœå¦‚ä¸‹ï¼š
| å†…å­˜å ç”¨ | è¿ç§»æ—¶é—´ | åœæœºæ—¶é—´ | è¿å‡ºæ•°æ®é‡ | è¿å…¥æ•°æ®é‡ || â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ || 100M | 22s | 7.63s | 501M | 653M || 300M | 29s | 7.88s | 1238M | 1159M || 600M | 26s | 7.72s | 1341M | 1279M || 900M | 78s | 8.31s | 5572M | 6155M || 1200M | 92s | 8.14s | 8208M | 8070M || 1500M | 102s | 8.47s | 8396M | 9088M |
IOæ•…éšœ1ã€åœ¨å®ä¾‹ä¸­åˆ›å»ºä¸€ä¸ªIOè¿›ç¨‹stress-ng --io 1ä½¿ç”¨iostat -d -k 2æŸ¥çœ‹IOçŠ¶æ€ï¼Œå‘ç°tpsç¨³å®šåœ¨200ä»¥ä¸Šï¼Œè€Œç£ç›˜è¯»å†™éƒ½ä¸º0ã€‚ä½¿ç”¨topå‘½ä»¤å¯ä»¥çœ‹åˆ°ï¼ŒCPUå ç”¨ç‡å¾ˆé«˜ï¼Œåœ¨90%ä¸Šä¸‹ã€‚
2ã€åœ¨å®ä¾‹ä¸­åˆ›å»º1-10ä¸ªIOè¿›ç¨‹ï¼Œç»Ÿè®¡ç»“æœå¦‚ä¸‹ï¼š
| IOè¿›ç¨‹æ•° | è¿ç§»æ—¶é—´ | åœæœºæ—¶é—´ | è¿å‡ºæ•°æ®é‡ | è¿å…¥æ•°æ®é‡ || â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ || 1 | 37s | 7.59s | 2067M | 1954M || 2 | 40s | 6.83s | 2032M | 2007M || 3 | 36s | 7.04s | 2071M | 1788M || 4 | 36s | 8.08s | 1846M | 1969M || 5 | 36s | 6.02s | 2074M | 2012M || 6 | 35s | 7.44s | 1805M | 2032M || 7 | 36s | 5.64s | 2066M | 2010M || 8 | 36s | 8.60s | 1972M | 1987M || 9 | 34s | 10.95s | 2064M | 1880M || 10 | 36s | 7.02s | 1865M | 1981M |
ç£ç›˜æ•…éšœ1ã€åœ¨è™šæ‹Ÿæœºä¸­åˆ›å»ºä¸€ä¸ªå†™å…¥è¿›ç¨‹stress-ng -d 1ä½¿ç”¨iostat -d -k 2æŸ¥çœ‹IOçŠ¶æ€ï¼Œå‘ç°tpsåœ¨30ä¸Šä¸‹ï¼ŒkB_wrtn/såœ¨30000ä¸Šä¸‹ã€‚ä½¿ç”¨topå‘½ä»¤å¯ä»¥çœ‹åˆ°ï¼ŒCPUå ç”¨ç‡åœ¨25%åˆ°99%æµ®åŠ¨ã€‚
2ã€åœ¨å®ä¾‹ä¸­åˆ›å»º1-10ä¸ªå†™å…¥è¿›ç¨‹ï¼Œç»Ÿè®¡ç»“æœå¦‚ä¸‹ï¼š
| å†™å…¥è¿›ç¨‹æ•° | è¿ç§»æ—¶é—´ | åœæœºæ—¶é—´ | è¿å‡ºæ•°æ®é‡ | è¿å…¥æ•°æ®é‡ || â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ || 1 | 35s | 4.83s | 2059M | 2023M || 2 | 37s | 8.70s | 1874M | 1957M || 3 | 34s | 8.92s | 2055M | 1980M || 4 | 36s | 4.97s | 2024M | 1959M || 5 | 36s | 5.50s | 2055M | 1960M || 6 | 35s | 4.64s | 2025M | 1957M || 7 | 34s | 6.02s | 2055M | 2041M || 8 | 43s | 9.11s | 2009M | 1978M || 9 | 35s | 6.60s | 2069M | 1997M || 10 | 34s | 8.89s | 1931M | 1942M | 
ç½‘ç»œå»¶è¿Ÿ1ã€åœ¨computeèŠ‚ç‚¹ï¼ˆè¿å‡ºèŠ‚ç‚¹ï¼‰æ·»åŠ ç½‘ç»œå»¶è¿Ÿ10mstc qdisc add dev eth0 root netem delay 10msæ³¨ï¼šåŸæœ¬çš„å»¶è¿Ÿåœ¨0.5msä¸Šä¸‹ã€‚
2ã€å°†ç½‘ç»œå»¶è¿Ÿä¿®æ”¹ä¸º20ms-100mstc qdisc replace dev eth0 root netem delay 20ms
ç»Ÿè®¡ç»“æœå¦‚ä¸‹ï¼š
| å»¶è¿Ÿæ—¶é—´ | è¿ç§»æ—¶é—´ | åœæœºæ—¶é—´ | è¿å‡ºæ•°æ®é‡ | è¿å…¥æ•°æ®é‡ || â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ || 10ms | 28s | 10.43s | 325M | 307M || 20ms | 36s | 8.80s | 305M | 287M || 30ms | 38s | 5.73s | 344M | 305M || 40ms | 43s | 11.28s | 305M | 290M || 50ms | 44s | 6.81s | 240M | 292M || 60ms | 47s | 7.09s | 256M | 295M || 70ms | 52s | 14.48s | 303M | 292M || 80ms | 50s | 12.17s | 242M | 297M || 90ms | 51s | 11.37s | 249M | 297M || 100ms | 63s | 18.22s | 298M | 344M |
åœ¨å»¶è¿Ÿæ—¶é—´å¤§äº100msåï¼Œè¿ç§»æ˜¾ç¤ºæˆåŠŸï¼Œå®ä¾‹çŠ¶æ€activeï¼Œä½†æ˜¯æ— æ³•pingé€šå®ä¾‹ã€‚
å–æ¶ˆæ¨¡æ‹Ÿï¼štc qdisc del dev eth0 root
ä¸¢åŒ…1ã€ä¸¤ä¸ªè®¡ç®—èŠ‚ç‚¹ï¼Œéƒ½æ¨¡æ‹Ÿä¸¢åŒ…ç‡1%tc qdisc add dev eth0 root netem loss 1%
2ã€å°†æ¨¡æ‹Ÿä¸¢åŒ…ç‡ä¿®æ”¹ä¸º2%-10%tc qdisc change dev eth0 root netem loss 2%
ç»Ÿè®¡ç»“æœå¦‚ä¸‹ï¼š
| ä¸¢åŒ…ç‡ | è¿ç§»æ—¶é—´ | åœæœºæ—¶é—´ | è¿å‡ºæ•°æ®é‡ | è¿å…¥æ•°æ®é‡ || â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ || 0.5% | 20s | 8.55s | 295M | 330M || 1% | 31s | 11.24s | 301M | 249M || 1.5% | 29s | 7.44s | 335M | 313M || 2% | 28s | 11.62s | 261M | 299M || 2.5% | 40s | 10.34s | 300M | 325M || 3% | 43s | 15.19s | 306M | 268M |
åœ¨ä¸¢åŒ…ç‡å¤§äº3%åï¼Œè¿ç§»æ˜¾ç¤ºæˆåŠŸï¼Œå®ä¾‹çŠ¶æ€activeï¼Œä½†æ˜¯æ— æ³•pingé€šå®ä¾‹ã€‚
å–æ¶ˆæ¨¡æ‹Ÿï¼štc qdisc del dev eth0 root
åŒ…é‡å¤1ã€ä¸¤ä¸ªè®¡ç®—èŠ‚ç‚¹ï¼Œéƒ½æ¨¡æ‹ŸåŒ…é‡å¤ç‡1%tc qdisc add dev eth0 root netem duplicate 1%éšæœºäº§ç”Ÿ 1% é‡å¤çš„åŒ…ã€‚
2ã€å°†æ¨¡æ‹ŸåŒ…é‡å¤ç‡ä¿®æ”¹ä¸º2%-10%-100%tc qdisc change dev eth0 root netem duplicate 2%
ç»Ÿè®¡ç»“æœå¦‚ä¸‹ï¼š
| åŒ…é‡å¤ç‡ | è¿ç§»æ—¶é—´ | åœæœºæ—¶é—´ | è¿å‡ºæ•°æ®é‡ | è¿å…¥æ•°æ®é‡ || â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ || 1% | 18s | 4.82s | 288M | 283M || 2% | 21s | 4.06s | 308M | 288M || 3% | 18s | 8.02s | 249M | 309M || 4% | 21s | 6.37s | 316M | 300M || 5% | 19s | 4.70s | 314M | 307M || 6% | 18s | 4.18s | 285M | 316M || 7% | 21s | 3.81s | 324M | 315M || 8% | 18s | 7.60s | 305M | 234M || 9% | 21s | 6.87s | 328M | 316M || 10% | 18s | 7.71s | 310M | 317M || 20% | 21s | 11.24s | 360M | 347M || 30% | 19s | 9.90s | 381M | 388M || 40% | 22s | 6.67s | 429M | 376M || 50% | 18s | 4.43s | 445M | 434M || 60% | 24s | 8.04s | 499M | 438M || 70% | 19s | 11.30s | 488M | 518M || 80% | 25s | 5.61s | 581M | 485M || 90% | 29s | 5.08s | 745M | 646M || 100% | 21s | 7.89s | 706M | 727M |
å–æ¶ˆæ¨¡æ‹Ÿï¼štc qdisc del dev eth0 root
åŒ…æŸå1ã€ä¸¤ä¸ªè®¡ç®—èŠ‚ç‚¹ï¼Œéƒ½æ¨¡æ‹ŸåŒ…æŸåç‡1%tc qdisc add dev eth0 root netem corrupt 1%éšæœºäº§ç”Ÿ 1% æŸåçš„æŠ¥æ–‡ï¼ˆåœ¨æŠ¥æ–‡çš„éšæœºä½ç½®é€ æˆä¸€ä¸ªæ¯”ç‰¹çš„é”™è¯¯ï¼‰ã€‚
åœ¨pingçš„æ—¶å€™ä¼šæŠ¥é”™ï¼šWarning: time of day goes back , taking countermeasuresï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œä¸å½±å“æˆ‘ä»¬çš„åœæœºæ—¶é—´ç»Ÿè®¡ç»“æœã€‚
2ã€å°†æ¨¡æ‹Ÿä¸¢åŒ…ç‡ä¿®æ”¹ä¸º2%-10%tc qdisc change dev eth0 root netem corrupt 2%
| åŒ…æŸåç‡ | è¿ç§»æ—¶é—´ | åœæœºæ—¶é—´ | è¿å‡ºæ•°æ®é‡ | è¿å…¥æ•°æ®é‡ || â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ | â€”â€“ || 0.5% | 20s | 4.43s | 359M | 369M || 1% | 24s | 5.90s | 371M | 351M || 1.5% | 30s | 12.13s | 374M | 357M || 2% | 32s | 9.09s | 331M | 362M || 2.5% | 42s | 7.49s | 345M | 337M || 3% | 48s | 13.46s | 378M | 374M |
è¿ç§»æˆåŠŸç‡éšç€åŒ…æŸåç‡çš„å¢åŠ è€Œé™ä½ï¼ŒåŒ…æŸåç‡å¤§äº3%ä¹‹åï¼ŒåŸºæœ¬ä¸ä¼šæˆåŠŸã€‚ä¼šåœç•™åœ¨è¿ç§»çŠ¶æ€ï¼Œæ¯ç§’å‡ Kä¼ è¾“ã€‚
å–æ¶ˆæ¨¡æ‹Ÿï¼štc qdisc del dev eth0 root
åè®°è‡³æ­¤ï¼Œå®Œæˆäº†ç³»ç»Ÿæ•…éšœå¯¹äºOpenStackè™šæ‹Ÿæœºåœ¨çº¿è¿ç§»è¿‡ç¨‹ä¸­çš„æ€§èƒ½å½±å“çš„å®éªŒã€‚å®éªŒæ•°æ®å’Œé¢„æœŸå·®åˆ«å¾ˆå¤§ï¼Œæ¯”å¦‚åœæœºæ—¶é—´é‡çº§ä¸åˆç†ï¼Œæ¯”å¦‚åœæœºæ—¶é—´åŸºæœ¬ä¸Šä¸å—ç³»ç»Ÿæ•…éšœå½±å“ï¼Œæ¯”å¦‚è¿ç§»æˆåŠŸåå´å‡ºç°æ— æ³•pingé€šçš„ç°è±¡ç­‰ç­‰ã€‚
åç»­ä»»åŠ¡æœ‰ä¸¤ä¸ªï¼Œä¸€æ˜¯éœ€è¦è¿›è¡Œå…±äº«å­˜å‚¨çš„è™šæ‹Ÿæœºåœ¨çº¿è¿ç§»å®éªŒï¼Œç”¨äºå¯¹æ¯”ã€‚äºŒæ˜¯å°è¯•è¿›è¡Œè°ƒå‚ï¼ŒæŠŠåœæœºæ—¶é—´è°ƒæ•´åˆ°æ¯«ç§’çº§ã€‚
å†è¿›ä¸€æ­¥çš„è¯ï¼Œå¯ä»¥ç ”ç©¶ä¸‹è™šæ‹Ÿæœºè¿ç§»æˆåŠŸåæ— æ³•pingé€šçš„åŸå› ï¼Œè¿˜å¯ä»¥ç ”ç©¶ä¸‹åŒæ ·æ•…éšœä¸‹è™šæ‹Ÿæœºè¿ç§»æ—¶è€ŒæˆåŠŸæ—¶è€Œå¤±è´¥çš„åŸå› ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>testing</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
        <tag>æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>è™šæ‹Ÿæœºåœ¨çº¿è¿ç§»è¿‡ç¨‹ä¸­çš„æ•…éšœæ³¨å…¥</title>
    <url>/dev-openstack-vm-live-migration-fault-injection/</url>
    <content><![CDATA[å‰è¨€ã€Šè™šæ‹Ÿæœºåœ¨çº¿è¿ç§»çš„æ€§èƒ½ç»Ÿè®¡ã€‹ä¸€æ–‡ä¸­ï¼Œå·²ç»æ‰¾åˆ°äº†è™šæ‹Ÿæœºè¿ç§»è¿‡ç¨‹ä¸­æ€§èƒ½ç»Ÿè®¡çš„æ–¹æ³•ï¼Œå¯ä»¥ç»Ÿè®¡å‡ºè¿ç§»æ—¶é—´ã€åœæœºæ—¶é—´ã€è¿ç§»æ•°æ®é‡ç­‰æŒ‡æ ‡ã€‚
è€Œå®é™…ç”Ÿäº§ç¯å¢ƒæ˜¯å¤æ‚çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æƒ³æ¨¡æ‹Ÿä¸€äº›ç¯å¢ƒï¼Œçœ‹çœ‹è¿™äº›ç¯å¢ƒï¼ˆæ•…éšœï¼‰å¯¹äºè™šæ‹Ÿæœºè¿ç§»æ€§èƒ½çš„å½±å“ã€‚æœ¬æ–‡å°±æ¥ç ”ç©¶ä¸€ä¸‹CPUæ•…éšœã€å†…å­˜æ•…éšœã€ç£ç›˜æ•…éšœã€ç½‘ç»œæ•…éšœç­‰çš„æ¨¡æ‹Ÿæ–¹æ³•ã€‚


æ•…éšœæ³¨å…¥æœ¬æ¬¡æ•…éšœæ³¨å…¥ä¸»è¦æœ‰CPUæ•…éšœã€å†…å­˜æ•…éšœã€ç£ç›˜æ•…éšœã€ç½‘ç»œæ•…éšœã€‚è¯·æ•™äº†å¢æ¾„å¿—åŒå­¦ï¼Œå¯¹äºCPUæ•…éšœã€å†…å­˜æ•…éšœã€ç£ç›˜æ•…éšœçš„æ¨¡æ‹Ÿï¼Œä½¿ç”¨stressæˆ–è€…stress-ngï¼Œå‚è€ƒLinux å‹åŠ›æµ‹è¯•è½¯ä»¶ Stress ä½¿ç”¨æŒ‡å—å’Œstress-ngï¼šæ¨¡æ‹Ÿç‰¹å®šçš„cpuç™¾åˆ†æ¯”ï¼›å¯¹äºç½‘ç»œæ•…éšœçš„æ¨¡æ‹Ÿï¼Œä½¿ç”¨netemï¼Œå‚è€ƒä½¿ç”¨ tc netem æ¨¡æ‹Ÿç½‘ç»œå¼‚å¸¸å’Œnetem wikiã€‚
æ•…éšœæ³¨å…¥æœ‰ä¸¤ä¸ªå¤§çš„æ€è·¯ï¼šä¸€ä¸ªæ˜¯æ³¨å…¥åˆ°è¢«è¿ç§»çš„è™šæ‹Ÿæœºï¼Œå¦ä¸€ä¸ªæ˜¯æ³¨å…¥åˆ°å®¿ä¸»æœºã€‚
stress1ã€å®‰è£…stress-ngapt-get install stress-ng
2ã€äº§ç”Ÿ3ä¸ªCPUè¿›ç¨‹1åˆ†é’Ÿåå…³é—­stress-ng --cpu 3 --verbose --timeout 1m
3ã€äº§ç”Ÿ2ä¸ª10MBçš„å†…å­˜è¿›ç¨‹1åˆ†é’Ÿåå…³é—­stress-ng --vm 2 --vm-bytes 10M --vm-keep --timeout 1m
4ã€äº§ç”Ÿ3ä¸ªIOè¿›ç¨‹1åˆ†é’Ÿåå…³é—­stress-ng --io 3 --timeout 1m
netemåœ¨Ubuntu16ä¸­ï¼Œtc netemä¸éœ€è¦å®‰è£…ï¼Œç³»ç»Ÿè‡ªå¸¦ã€‚
1ã€æ¨¡æ‹Ÿå»¶è¿Ÿä¼ è¾“tc qdisc add dev eth0 root netem delay 100msæŠ¥æ–‡å»¶è¿Ÿ 100ms å‘é€ã€‚
tc qdisc replace dev eth0 root netem delay 100ms 20msæŠ¥æ–‡å»¶è¿Ÿçš„æ—¶é—´åœ¨ 100ms Â± 20ms ä¹‹é—´ï¼Œå…·ä½“å€¼éšæœºé€‰æ‹©ã€‚
2ã€æ¨¡æ‹Ÿä¸¢åŒ…ç‡tc qdisc change dev eth0 root netem loss 0.3% 25%ä¸¢åŒ…ç‡æ˜¯ 0.3%ï¼Œå¹¶ä¸”å½“å‰æŠ¥æ–‡ä¸¢å¼ƒçš„å¯èƒ½æ€§å’Œå‰ä¸€ä¸ªæŠ¥æ–‡ 25% ç›¸å…³ã€‚
3ã€æ¨¡æ‹ŸåŒ…é‡å¤tc qdisc change dev eth0 root netem duplicate 50%éšæœºäº§ç”Ÿ 50% é‡å¤çš„åŒ…ã€‚
4ã€æ¨¡æ‹ŸåŒ…æŸåtc qdisc add dev eth0 root netem corrupt 2%éšæœºäº§ç”Ÿ 2% æŸåçš„æŠ¥æ–‡ï¼ˆåœ¨æŠ¥æ–‡çš„éšæœºä½ç½®é€ æˆä¸€ä¸ªæ¯”ç‰¹çš„é”™è¯¯ï¼‰ã€‚
5ã€æ¨¡æ‹ŸåŒ…ä¹±åºtc qdisc change dev eth0 root netem reorder 50% gap 3 delay 100mså›ºå®šçš„æ¯éš”ä¸€å®šæ•°é‡çš„æŠ¥æ–‡å°±ä¹±åºä¸€æ¬¡ï¼šæ¯5ä¸ªæŠ¥æ–‡ä¼šæ­£å¸¸å‘é€ï¼Œå…¶ä»–çš„æŠ¥æ–‡å»¶è¿Ÿ 100msã€‚
è¦æƒ³çœ‹åˆ° ping æŠ¥æ–‡çš„ä¹±åºï¼Œæˆ‘ä»¬è¦ä¿è¯å‘é€æŠ¥æ–‡çš„é—´éš”å°äºæŠ¥æ–‡çš„å»¶è¿Ÿæ—¶é—´ 100msï¼Œè¿™é‡Œç”¨ -i 0.05 æŠŠå‘é€é—´éš”è®¾ç½®ä¸º 50msã€‚
tc qdisc change dev eth0 root netem reorder 50% 15% delay 300msä½¿ç”¨æ¦‚ç‡æ¥é€‰æ‹©ä¹±åºçš„æŠ¥æ–‡ï¼š50% çš„æŠ¥æ–‡ä¼šæ­£å¸¸å‘é€ï¼Œå…¶ä»–æŠ¥æ–‡ï¼ˆ1-50%ï¼‰å»¶è¿Ÿ 300ms å‘é€ã€‚
6ã€å–æ¶ˆæ¨¡æ‹Ÿtc qdisc del dev eth0 root
]]></content>
      <categories>
        <category>engineering</category>
        <category>testing</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
        <tag>æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>è™šæ‹Ÿæœºåœ¨çº¿è¿ç§»çš„æ€§èƒ½ç»Ÿè®¡</title>
    <url>/dev-openstack-vm-live-migration-performance/</url>
    <content><![CDATA[å‰è¨€OpenStackä¸­å…±äº«å­˜å‚¨å’Œéå…±äº«å­˜å‚¨çš„è™šæ‹Ÿæœºè¿ç§»ç¯å¢ƒéƒ½å·²ç»æ­å»ºå®Œæˆï¼Œæ¥ä¸‹æ¥å¯ä»¥è¿›è¡Œå®éªŒäº†ã€‚å¯¹äºä¸åŒçš„å®¿ä¸»æœºã€ä¸åŒçš„å®ä¾‹ã€ä¸åŒçš„è´Ÿè½½ï¼Œè™šæ‹Ÿæœºè¿ç§»çš„æ€§èƒ½ä¹Ÿä¼šæœ‰æ‰€ä¸åŒã€‚é‚£ä¹ˆï¼Œè™šæ‹Ÿæœºè¿ç§»çš„æ€§èƒ½æŒ‡æ ‡æœ‰å“ªäº›ï¼Ÿåˆè¯¥æ€æ ·ç»Ÿè®¡å‘¢ï¼Ÿæœ¬æ–‡å°±æ¥ç ”ç©¶ä¸€ä¸‹ã€‚


æ€§èƒ½æŒ‡æ ‡å‚è€ƒè®ºæ–‡ã€ŠVirt-LM: a benchmark for live migration of virtual machineã€‹ï¼Œå¯ä»¥å¾—çŸ¥ï¼Œè™šæ‹Ÿæœºè¿ç§»è¿‡ç¨‹ä¸­çš„ä¸»è¦æ€§èƒ½æŒ‡æ ‡æœ‰å››ä¸ªï¼š

æ•´ä½“è¿ç§»æ—¶é—´ï¼šä»è¿ç§»å¼€å§‹åˆ°è¿ç§»ç»“æŸçš„æ—¶é—´ã€‚
è™šæ‹Ÿæœºåœæœºæ—¶é—´ï¼šè¿ç§»è¿‡ç¨‹ä¸­è™šæ‹Ÿæœºåœæœºï¼ˆåœæ­¢æœåŠ¡ï¼‰çš„æ—¶é—´ã€‚
è¿ç§»æ•°æ®é‡ï¼šåœ¨è™šæ‹Ÿæœºè¿ç§»æœŸé—´ä¼ è¾“çš„æ•°æ®æ€»é‡ã€‚
åº”ç”¨ç¨‹åºçš„æ€§èƒ½ï¼šè¿ç§»è¿‡ç¨‹ä¸­å¯¹è™šæ‹Ÿæœºä¸­åº”ç”¨ç¨‹åºäº§ç”Ÿçš„å½±å“ã€‚

æµ‹é‡æ–¹æ³•ç›‘æ§æ—¢ç„¶æ˜¯å®éªŒï¼Œé‚£ä¹ˆè‚¯å®šè¦æ”¶é›†å®éªŒè¿‡ç¨‹ä¸­çš„æ•°æ®ã€‚éƒåŒå­¦ç»™è¿™ä¸ªå››ä¸ªèŠ‚ç‚¹çš„OpenStacké›†ç¾¤å®‰è£…äº†gangliaï¼Œç”¨æ¥ç›‘æ§å„ç§æŒ‡æ ‡ã€‚ä½†æ˜¯ï¼Œgangliaæ›´é€‚åˆç›‘æ§å®æ—¶æ•°æ®å’Œè§‚å¯Ÿå˜åŒ–ï¼Œä¸é€‚åˆè¿›è¡Œç»Ÿè®¡ã€‚
è¿ç§»æ—¶é—´æ•´ä½“è¿ç§»æ—¶é—´æ€ä¹ˆæµ‹å‡ºæ¥ï¼Ÿé€šè¿‡è§‚å¯Ÿå›¾è¡¨ï¼Ÿä¸é è°±ã€‚å¶å¯æ±Ÿè€å¸ˆæä¾›äº†æ€è·¯ï¼Œæ•´ä½“è¿ç§»æ—¶é—´çš„è¯ï¼Œå¯ä»¥é€šè¿‡æ—¥å¿—æ¥è·å–ï¼štail -n 40 /var/lib/docker/volumes/kolla_logs/_data/nova/nova-compute.log
é€šè¿‡æŸ¥çœ‹è¿å‡ºå®¿ä¸»æœºçš„æ—¥å¿—ï¼Œç„¶åå¯¹æ¯”gangliaå›¾è¡¨ï¼Œå¯ä»¥æ‰¾åˆ°ä¸¤ä¸ªå…³é”®èŠ‚ç‚¹ï¼š
2018-11-22 09:59:42.442 5 INFO nova.virt.libvirt.migration [req-d9849256-eaa8-4446-9cec-9545b74df126 202e7852a6074540a70638eed185538e eb83bf3b057f45e1b386cbc8c0702ae1 - default default] [instance: eebe068a-ba85-4905-a39b-f003a7480b14] Increasing downtime to 50 ms after 0 sec elapsed time......2018-11-22 10:00:02.984 5 INFO nova.compute.manager [req-4b409237-6c82-4b56-ae4c-9f905a4f932e b2edc935f89d4d2684ec4039c02a21cc ab7e3eb8c00d4299afd8572e1ec437bf - default default] [instance: eebe068a-ba85-4905-a39b-f003a7480b14] VM Stopped (Lifecycle Event)
ä½†æ˜¯ï¼Œä¾ç„¶éœ€è¦æ‰‹åŠ¨æ¥è®¡ç®—è¿ç§»æ—¶é—´ï¼Œå¾ˆéº»çƒ¦ï¼Œé‚£å°±å†™ä¸€ä¸ªè„šæœ¬æ¥æå®šå§ï¼å‚è€ƒlinux shell æ—¶é—´è¿ç®—ä»¥åŠæ—¶é—´å·®è®¡ç®—æ–¹æ³•ã€‚
#!/bin/bashtime1=`grep nova.virt.libvirt.migration /var/lib/docker/volumes/kolla_logs/_data/nova/nova-compute.log | tail -n 1 |awk &#x27;&#123;print $2&#125;&#x27;`;time2=`grep &#x27;VM Stopped&#x27; /var/lib/docker/volumes/kolla_logs/_data/nova/nova-compute.log | tail -n 1 | awk &#x27;&#123;print $2&#125;&#x27;`;# è®¡ç®—æ—¶é—´å·®time=$(($(date +%s -d $time2) - $(date +%s -d $time1)));echo &quot;$time s&quot;;
ä»¥ä¸Šè„šæœ¬ï¼Œä¿å­˜ä¸ºtime.shï¼Œå¹¶æ·»åŠ æ‰§è¡Œæƒé™ã€‚
å¦å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡nova migration-list &gt; list.logæŸ¥çœ‹åˆ°è¿ç§»çš„å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´ã€‚ç„¶åé€šè¿‡è„šæœ¬è®¡ç®—è¿ç§»æ—¶é—´ï¼š
#!/bin/bashtime1=`grep &#x27;live-migration&#x27; list.log | head -n 1 | awk &#x27;&#123;print $24&#125;&#x27;`time2=`grep &#x27;live-migration&#x27; list.log | head -n 1 | awk &#x27;&#123;print $26&#125;&#x27;`time=$(($(date +%s -d $time2) - $(date +%s -d $time1)));echo &quot;$time s&quot;;
ä¸è¿‡ï¼Œè¿™ç§æ–¹æ³•æµ‹å‡ºçš„è¿ç§»æ—¶é—´ï¼Œæ¯”æˆ‘ä»¬ä»nova-compute.logæ—¥å¿—ä¸­æµ‹å‡ºçš„è¿ç§»æ—¶é—´ï¼Œè¦å¤šå‡º7ç§’å·¦å³ã€‚è¿™ç§æ–¹æ³•åº”è¯¥æ›´å‡†ç¡®ä¸€äº›ï¼Œæ¯•ç«Ÿæ˜¯OpenStackè‡ªå·±è®°å½•çš„ã€‚
åœæœºæ—¶é—´å‚è€ƒHow to measure Migration time and Down timeï¼Œä½¿ç”¨pingå‘½ä»¤æ¥æµ‹é‡åœæœºæ—¶é—´ã€‚
æˆ‘ä»¬çš„è™šæ‹Ÿæœºæœ‰ä¸¤ä¸ªIPï¼Œä¸€ä¸ªæ˜¯å†…ç½‘IPï¼Œä¸€ä¸ªæ˜¯æµ®åŠ¨IPã€‚å¤–éƒ¨æœºå™¨å¯ä»¥ç›´è¿çš„ï¼Œä¸€èˆ¬æ˜¯æµ®åŠ¨IPï¼Œæ‰€ä»¥åœ¨è¿ç§»è¿‡ç¨‹ä¸­ï¼Œå»ºè®®pingæµ®åŠ¨IPï¼Œæ¯”å¦‚sudo ping 10.0.2.159 -i 0.01 &gt;&gt; ping.logã€‚ping.logä¸­çš„ä¿¡æ¯ä¸ºï¼š
PING 10.0.2.159 (10.0.2.159) 56(84) bytes of data.64 bytes from 10.0.2.159: icmp_seq=1 ttl=63 time=3.40 ms64 bytes from 10.0.2.159: icmp_seq=2 ttl=63 time=1.15 ms64 bytes from 10.0.2.159: icmp_seq=3 ttl=63 time=1.17 ms64 bytes from 10.0.2.159: icmp_seq=4 ttl=63 time=1.33 ms......64 bytes from 10.0.2.159: icmp_seq=4139 ttl=63 time=1.17 ms64 bytes from 10.0.2.159: icmp_seq=4140 ttl=63 time=1.05 ms64 bytes from 10.0.2.159: icmp_seq=4141 ttl=63 time=1.12 ms64 bytes from 10.0.2.159: icmp_seq=4142 ttl=63 time=1.06 ms--- 10.0.2.159 ping statistics ---4142 packets transmitted, 3668 received, 11% packet loss, time 44127msrtt min/avg/max/mdev = 0.580/1.412/36.648/1.407 ms, pipe 3

ç”±ç»Ÿè®¡ä¿¡æ¯å¯ä»¥æ±‚å‡ºåœæœºæ—¶é—´ï¼š
# æ–¹æ³•ä¸€ï¼š(ç¼ºå¤±çš„icmp_seqæ€»æ•°)*(æ—¶é—´é—´éš”)(4142-3668)*0.01=4.74s# æ–¹æ³•äºŒï¼š(æ€»æ—¶é—´)*(icmp_seqç¼ºå¤±ç™¾åˆ†æ¯”)(44127/1000)*0.11 = 4.85s

ä¸¤ç§æ–¹æ³•ç›¸å·®0.1sï¼Œæ–¹æ³•ä¸€æ›´ç²¾ç¡®ä¸€äº›ã€‚å¦‚æœæƒ³è¦æ›´åŠ ç²¾ç¡®ï¼Œè¿˜å¯ä»¥æŠŠpingå‘½ä»¤çš„æ—¶é—´é—´éš”è°ƒæ•´ä¸º1msã€‚
æ–¹æ³•ä¸€å†™æˆè„šæœ¬ä¸ºï¼š
#!/bin/bashtransmitted=`grep &#x27;packets transmitted&#x27; ping.log | tail -n 1 | awk &#x27;&#123;print $1&#125;&#x27;`received=`grep &#x27;packets transmitted&#x27; ping.log | tail -n 1 | awk &#x27;&#123;print $4&#125;&#x27;`lost=`expr $transmitted - $received`# echo &quot;downtime is $lost ms&quot;downtime=$(echo &quot;scale=3; $lost / 1000&quot; | bc)echo &quot;downtime is $downtime s&quot;

æ–¹æ³•äºŒå†™æˆè„šæœ¬ä¸ºï¼š
#!/bin/bashtime_str=`grep &#x27;packets transmitted&#x27; ping.log | tail -n 1 | awk &#x27;&#123;print $10&#125;&#x27;`loss_str=`grep &#x27;packets transmitted&#x27; ping.log | tail -n 1 | awk &#x27;&#123;print $6&#125;&#x27;`time_num=`echo $&#123;time_str%ms&#125;`loss_percent=`echo $&#123;loss_str%\%&#125;`# downtime = (time_num)*(loss_percent/100)/1000num=`expr $time_num \* $loss_percent`downtime=$(echo &quot;scale=3; $num / 100000&quot; | bc)echo &quot;downtime is $downtime s&quot;

ä»¥ä¸Šæ–¹æ³•æ±‚å‡ºçš„åœæœºæ—¶é—´ï¼Œæ˜¯æ€»çš„åœæœºæ—¶é—´ï¼Œæ— è®ºè¿ç§»è¿‡ç¨‹ä¸­æœ‰å‡ æ¬¡åœæœºï¼Œè¯¥æ–¹æ³•éƒ½æ˜¯é€‚ç”¨çš„ã€‚æˆ‘ä»¬ä¼šå¥½å¥‡ï¼Œå®é™…è¿ç§»è¿‡ç¨‹ä¸­ï¼Œåœæœºæ˜¯å¦åªæœ‰ä¸€æ¬¡ï¼Ÿæˆ‘ä»¬å†™ä¸€ä¸ªè„šæœ¬æ¥å¯»æ±‚ç­”æ¡ˆï¼š
#!/bin/bash# å»æ‰å¤´éƒ¨å’Œå°¾éƒ¨ï¼Œä¿ç•™ç¬¬äº”åˆ—cat ping.log | sed &#x27;1d&#x27; | tac | sed &#x27;1,4d&#x27; | tac | awk &#x27;&#123;print $5&#125;&#x27; &gt; seq.log &amp;&amp;# å¾—åˆ°æœ€åä¸€è¡Œçš„åºåˆ—å·max=`tail -n 1 seq.log | awk -F &#x27;=&#x27; &#x27;&#123;print $2&#125;&#x27;`# æ‰€æœ‰åºåˆ—å·èµ‹å€¼ç»™æ•°ç»„array_str=`cat seq.log | awk -F &#x27;=&#x27; &#x27;&#123;print $2&#125;&#x27;`IPS=&#x27; &#x27;array=($array_str)# æ‰“å°æ²¡æœ‰å“åº”çš„åºåˆ—å·COUNTER=0while [ $COUNTER -lt $max ]do    COUNTER=`expr $COUNTER + 1`    if [[ &quot;$&#123;array[@]&#125;&quot; =~ $COUNTER ]]    then        continue    else        echo $COUNTER  &gt;&gt; result.log    fidone &amp;&amp;# å¯¹æ¯”seqæ•°é‡start=`head -n 1 result.log`end=`tail -n 1 result.log`num=`expr $end - $start + 1`echo &quot;if continuous, num should be $num&quot;result_str=`cat result.log`IPS=&#x27;\n&#x27;result=($result_str)echo &quot;real num is $&#123;#result[@]&#125;&quot;

è„šæœ¬è¾“å‡ºä¸¤ä¸ª474ï¼Œè¯´æ˜å®ä¾‹æ²¡æœ‰å“åº”çš„åºåˆ—å·æ˜¯è¿ç»­çš„ï¼Œè¯æ˜äº†åœæœºåªæœ‰ä¸€æ¬¡ã€‚æ¯”å¦‚result.logä¸­ä¸º{3,4,5,6,7}ï¼Œé‚£ä¹ˆ7-3+1=5ï¼Œé›†åˆä¸­å…ƒç´ ä¸ªæ•°ä¹Ÿä¸º5ï¼Œè¯æ˜è¿ç»­ã€‚æ¯”å¦‚result.logä¸­ä¸º{3,4,5,10,11}ï¼Œé‚£ä¹ˆ11-3+1=9ï¼Œé›†åˆä¸­å…ƒç´ ä¸ªæ•°ä¸º5ï¼Œè¯æ˜ä¸è¿ç»­ã€‚
å¸¦å®½æµ‹é‡å‡ºçš„downtimeä¸º4.74sï¼Œå¾ˆä¸åˆç†ï¼Œå› ä¸ºè™šæ‹Ÿæœºè¿ç§»ç†è®ºä¸Šçš„åœæœºæ—¶é—´æ˜¯æ¯«ç§’çº§çš„ï¼æ˜¯å› ä¸ºå¸¦å®½å¤ªä½å¯¼è‡´åœæœºæ—¶é—´è¿‡é•¿å—ï¼Ÿå¯ä»¥ç”¨å¦‚ä¸‹æ–¹æ³•è¿›è¡Œæµ‹è¯•ï¼š1ã€compute1å’Œcompute2ä¸Šéƒ½å®‰è£…iperfsudo apt install iperf
2ã€compute1ä¸Šå¯åŠ¨iperfæœåŠ¡iperf -s
3ã€compute2ä¸Šå¯åŠ¨iperfå®¢æˆ·ç«¯iperf -c 192.168.56.112 -i 1
è¿ç§»æ•°æ®é‡å¯¹äºè¿ç§»æ•°æ®é‡ï¼Œå¯ä»¥ä½¿ç”¨iptableså¯¹ç«¯å£è¿›è¡Œç›‘æ§ï¼Œå‚è€ƒLinuxä¸‹å¯¹ç«¯å£æµé‡è¿›è¡Œç»Ÿè®¡å’ŒLinux ä½¿ç”¨iptablesè¿›è¡Œshadowsocksæµé‡ç»Ÿè®¡ã€‚ä½†æ˜¯ï¼Œè®¡ç®—èŠ‚ç‚¹ç½‘ç»œéå¸¸å¤æ‚ï¼ŒéƒåŒå­¦ä¸æƒ³å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œæ‰€ä»¥é‡‡ç”¨å¦å¤–ä¸€ç§æ–¹æ¡ˆï¼Œiptrafï¼Œå‚è€ƒä½¿ç”¨iptrafæŸ¥çœ‹TCP/UDPæŸä¸ªç‰¹å®šç«¯å£çš„å¸¦å®½ä¸æµé‡ã€‚
1ã€ä¸¤ä¸ªè®¡ç®—èŠ‚ç‚¹å®‰è£…iptrafsudo apt install iptraf
éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œiptrafåªæ”¯æŒåä¸ºethXçš„ç½‘å¡ã€‚æƒ³è¦æ˜¾ç¤ºenoXã€enp0sXç½‘å¡ï¼Œè¦ä¹ˆç½‘å¡é‡å‘½åï¼Œè¦ä¹ˆå®‰è£…ä½¿ç”¨iptraf-ngã€‚sudo apt install iptraf-ng
2ã€å¯åŠ¨iptrafsudo iptrafå¯åŠ¨åï¼Œè¿›å…¥åˆ°ä¸€ä¸ªå­—ç¬¦ç•Œé¢ã€‚
3ã€è®¾ç½®Configureâ€¦ -&gt; Additional portsâ€¦-&gt; 22 -&gt; Exit Configuration -&gt; Statistical breakdownsâ€¦ -&gt; By TCP/UDP port -&gt; eth0 -&gt; statistic view
å‚è€ƒConfigure live migrationsï¼Œå¯ä»¥å¾—çŸ¥ï¼š

By default, libvirt uses the TCP port range from 49152 to 49261 for copying memory and disk contents. Compute hosts must accept connections in this range.

æ‰€ä»¥åœ¨å®é™…ä½¿ç”¨çš„æ—¶å€™ï¼Œç«¯å£è®¾ç½®ä¸º49152 to 49261ã€‚é‡æ–°è¿›å…¥ç»Ÿè®¡é¡µé¢ï¼Œä¹‹å‰çš„ç»Ÿè®¡æ•°æ®ä¼šæ¸…é›¶ã€‚
åº”ç”¨æ€§èƒ½Webåº”ç”¨çš„æ€§èƒ½ï¼Œä¸»è¦åŒ…æ‹¬æ‰§è¡Œæ—¶é—´ã€ä¼ è¾“é€Ÿåº¦ã€ååé‡ã€èµ„æºå ç”¨ç‡ã€‚
åŸºå‡†æµ‹è¯•ï¼ˆbenchmarkingï¼‰æ˜¯ä¸€ç§æµ‹é‡å’Œè¯„ä¼°è½¯ä»¶æ€§èƒ½æŒ‡æ ‡çš„æ´»åŠ¨ã€‚ä½ å¯ä»¥åœ¨æŸä¸ªæ—¶å€™é€šè¿‡åŸºå‡†æµ‹è¯•å»ºç«‹ä¸€ä¸ªå·²çŸ¥çš„æ€§èƒ½æ°´å¹³ï¼ˆç§°ä¸ºåŸºå‡†çº¿ï¼‰ï¼Œå½“ç³»ç»Ÿçš„è½¯ç¡¬ä»¶ç¯å¢ƒå‘ç”Ÿå˜åŒ–ä¹‹åå†è¿›è¡Œä¸€æ¬¡åŸºå‡†æµ‹è¯•ä»¥ç¡®å®šé‚£äº›å˜åŒ–å¯¹æ€§èƒ½çš„å½±å“ã€‚è¿™æ˜¯åŸºå‡†æµ‹è¯•æœ€å¸¸è§çš„ç”¨é€”ã€‚å…¶ä»–ç”¨é€”åŒ…æ‹¬æµ‹å®šæŸç§è´Ÿè½½æ°´å¹³ä¸‹çš„æ€§èƒ½æé™ã€ç®¡ç†ç³»ç»Ÿæˆ–ç¯å¢ƒçš„å˜åŒ–ã€å‘ç°å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜çš„æ¡ä»¶ï¼Œç­‰ç­‰ã€‚è¯¦æƒ…å‚è€ƒä»€ä¹ˆæ˜¯åŸºå‡†æµ‹è¯•ï¼Ÿã€‚
å¯¹äºæ€§èƒ½çš„ç›‘æ§ï¼Œæœ€ç®€å•çš„æ€è·¯æ˜¯Apache Benchmarkã€‚ä½¿ç”¨abæ¥ç›‘æ§WebæœåŠ¡çš„æ€§èƒ½ï¼Œæ£€æŸ¥è¿ç§»è¿‡ç¨‹ä¸­ä¼šå‘ç”Ÿå“ªäº›å˜åŒ–ã€‚ä½†æ˜¯ï¼Œabä»€ä¹ˆæ—¶å€™è¿è¡Œï¼Ÿä»€ä¹ˆæ—¶å€™åœæ­¢ï¼Ÿè¯·æ±‚å¤šå°‘æ¬¡ï¼Ÿæ€ä¹ˆè®¡ç®—è¿ç§»è¿‡ç¨‹ä¸­çš„å¹³å‡æ€§èƒ½ï¼Ÿè¿™äº›éƒ½ä¸èƒ½ç¡®å®šã€‚å¦‚æœä½¿ç”¨cAdvisor+prometheuså‘¢ï¼Ÿå‚è€ƒlinuxå·¥åŒ ä¹‹dockerå’Œkubernetesçš„ç›‘æ§(cadvisor+prometheus)ã€‚ä¸è¡Œï¼Œå› ä¸ºè¿™ç§æ–¹æ³•ç›‘æ§çš„æ˜¯dockerå®¹å™¨ï¼Œæ”¶é›†çš„æ˜¯CPUã€å†…å­˜ç­‰æ•°æ®ï¼Œè€Œä¸æ˜¯Webæ€§èƒ½æ•°æ®ã€‚ä½¿ç”¨SPECï¼Ÿä¹Ÿä¸å¥½ï¼Œæ”¶è´¹ï¼Œå®‰è£…ä½¿ç”¨å¤æ‚ã€‚
å¾ˆç»æœ›ï¼Œå‰è¾ˆä»¬éƒ½æ˜¯æ€ä¹ˆè¿›è¡Œæµ‹è¯•çš„ï¼Ÿä¸ç®¡äº†ï¼Œå…ˆä¸è€ƒè™‘åº”ç”¨æ€§èƒ½æŒ‡æ ‡ã€‚
ä¹¦ç­¾
An analysis of the performance of live migration in Openstack
An analysis of the performance of block live migration in Openstack
Performance analysis of â€œpost-copyâ€ live migration in Openstack

]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>testing</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
        <tag>æµ‹è¯•</tag>
        <tag>iperf</tag>
      </tags>
  </entry>
  <entry>
    <title>VirtualBoxä¸­Ubuntuæ‰©å®¹</title>
    <url>/dev-virtualbox-ubuntu-extend-storage/</url>
    <content><![CDATA[å‰è¨€VirtualBoxä¸­ï¼Œå®‰è£…äº†Ubuntu16ï¼Œç£ç›˜40Gã€‚ç°åœ¨ï¼Œå› ä¸ºæŸäº›åŸå› ï¼Œè¦å¯¹ç£ç›˜è¿›è¡Œæ‰©å®¹ã€‚æœ‰ä¸¤ä¸ªæ€è·¯ï¼Œä¸€ä¸ªæ˜¯æ·»åŠ ç£ç›˜ï¼Œå¦ä¸€ä¸ªæ˜¯å¯¹åŸç£ç›˜è¿›è¡Œæ‰©å®¹ã€‚
æœ¬æ–‡å°±æ¥ç ”ç©¶ä¸€ä¸‹è¿™ä¸¤ç§æ€è·¯çš„å…·ä½“åšæ³•ã€‚


æ·»åŠ ç£ç›˜VirtualBoxé…ç½®1ã€Settingsï¼ŒStorageï¼ŒController: SATAï¼ŒAdds hard diskã€‚
2ã€Create new diskï¼ŒVDIï¼ŒDynamically allocatedï¼Œå‘½åä¸ºsdbï¼Œå¤§å°é€‰æ‹©512GBï¼ŒCreateã€‚
åˆ†åŒºæŒ‚è½½å‚è€ƒã€ŠLinuxæŒ‚è½½æ–‡ä»¶ç³»ç»Ÿã€‹ä¸€æ–‡ã€‚
æ‰©å±•å·ç»„åœ¨ç¡¬ç›˜åˆ†åŒºã€æ ¼å¼åŒ–ä¹‹åï¼Œä¸è¦è¿›è¡ŒæŒ‚è½½ã€‚å‚è€ƒVirtualBoxä¸‹Linuxè™šæœºæ‰©å®¹ï¼Œè¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š
1ã€åˆ›å»ºç‰©ç†å·pvcreate /dev/sdb1
2ã€æŸ¥çœ‹ç‰©ç†å·pvdisplay
3ã€æŸ¥çœ‹å·ç»„vgdisplayå¯ä»¥çœ‹åˆ°ä¸€ä¸ªå·ç»„ubuntu-vgã€‚
4ã€æ‰©å±•å·ç»„vgextend ubuntu-vg /dev/sdb1
5ã€æŸ¥çœ‹é€»è¾‘å·lvdisplayå¯ä»¥çœ‹åˆ°rootå·çš„LV Pathä¸º/dev/ubuntu-vg/rootã€‚
6ã€æ‰©å±•é€»è¾‘å·
lvextend -L +512G -n /dev/ubuntu-vg/rootlvdisplay

7ã€è°ƒæ•´rooté€»è¾‘å·å¤§å°
resize2fs /dev/ubuntu-vg/rootdf -h

åŸç£ç›˜æ‰©å®¹VirtualBoxé…ç½®1ã€åˆ‡æ¢åˆ°rootç”¨æˆ·sudo -i
2ã€æŸ¥çœ‹ç£ç›˜åˆ—è¡¨vboxmanage list hdds
3ã€æ‰¾åˆ°éœ€è¦æ‰©å®¹çš„ç£ç›˜ï¼Œè®°ä¸‹UUID
4ã€æ‰©å®¹åˆ°512Gvboxmanage modifyhd --resize 512000 ba3e897a-742e-45dc-a99a-3302c07be984
åˆ†åŒºæŒ‚è½½1ã€æŸ¥çœ‹ç£ç›˜
df -hfdisk -l

2ã€å¢åŠ åˆ†åŒºfdisk /dev/sdaè¾“å…¥nï¼ŒæŠ¥é”™ï¼šNo free sectors available.æ²¡æœ‰æ‰¾åˆ°å¥½çš„è§£å†³åŠæ³•ï¼Œåªèƒ½æç½®ã€‚
æ‰©å±•å·ç»„æ— æ³•åˆ†åŒºï¼ŒåŒæ ·æ— æ³•æ‰©å±•å·ç»„ã€‚
åè®°ä»¥ä¸Šä¸¤ç§æ–¹æ¡ˆï¼Œæ®Šé€”åŒå½’ã€‚å¢åŠ å®¹é‡åï¼Œéƒ½è¦ç»è¿‡åˆ†åŒºï¼Œæ ¼å¼åŒ–ï¼Œç„¶ååˆ†åŒºæŒ‚è½½æˆ–è€…æ‰©å±•å·ç»„ã€‚é‰´äºç¬¬äºŒç§æ–¹æ¡ˆä¸­åˆ†åŒºä¼šå‡ºé”™ï¼Œæ‰€ä»¥ä½¿ç”¨ç¬¬ä¸€ä¸ªæ–¹æ¡ˆæ›´å¥½äº›ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>virtualbox</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxä¸­å®‰è£…NFS</title>
    <url>/dev-install-nfs-on-linux/</url>
    <content><![CDATA[NFSç®€ä»‹
Network File System (NFS) is a distributed file system protocol originally developed by Sun Microsystems (Sun) in 1984, allowing a user on a client computer to access files over a computer network much like local storage is accessed. NFS, like many other protocols, builds on the Open Network Computing Remote Procedure Call (ONC RPC) system. NFS is an open IETF standard defined in a Request for Comments (RFC), allowing anyone to implement the protocol.

å‚è€ƒæ–‡æ¡£ï¼š

Wikipedia - Network File System



CentOSä¸­å®‰è£…NFSå®‰è£…nfs-serverä½œä¸ºå­˜å‚¨èŠ‚ç‚¹çš„ä¸»æœºå®‰è£…nfs-serverï¼Œæœ¬èŠ‚ä¸­çš„å­˜å‚¨èŠ‚ç‚¹ä¸»æœºIPä¸º192.168.56.101ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

æ­å»ºNFS Server

1ã€å…³é—­é˜²ç«å¢™
systemctl stop firewalld.servicesystemctl disable firewalld.service

2ã€å®‰è£…nfsï¼ˆåŒ…æ‹¬nfs-serverå’Œnfs-clientï¼‰
yum install -y nfs-utils rpcbind

3ã€åˆ›å»ºå…±äº«ç›®å½•ï¼Œè®¾ç½®å…±äº«ç›®å½•æƒé™
mkdir -p /data/nfschmod -R 777 /data/nfs

4ã€é…ç½®å…±äº«ç›®å½•
echo &#x27;/data/nfs *(insecure,rw,sync,no_root_squash)&#x27; &gt;&gt; /etc/exports

5ã€å¯åŠ¨nfs-server
systemctl enable rpcbindsystemctl enable nfs-serversystemctl start rpcbindsystemctl start nfs-serversystemctl status rpcbindsystemctl status nfs-serverexportfs -r # é‡æ–°æŒ‚è½½

6ã€æ£€æŸ¥nfsçŠ¶æ€
exportfsrpcinfo -p | grep nfs

7ã€æŸ¥çœ‹ç›®å½•æŒ‚è½½æƒé™
cat /var/lib/nfs/etab

å®‰è£…nfs-clientåœ¨éœ€è¦æŒ‚è½½nfsçš„ä¸»æœºä¸Šå®‰è£…nfs-clientï¼Œæœ¬èŠ‚ä¸­ä¸»æœºIPä¸º192.168.56.102ã€‚
1ã€å…³é—­é˜²ç«å¢™
systemctl stop firewalld.servicesystemctl disable firewalld.service

2ã€å®‰è£…nfsï¼ˆåŒ…æ‹¬nfs-serverå’Œnfs-clientï¼‰
yum install -y nfs-utils rpcbind

3ã€å¯åŠ¨nfs-client
systemctl enable rpcbindsystemctl enable nfssystemctl start rpcbindsystemctl start nfssystemctl status rpcbindsystemctl status nfs

æµ‹è¯•nfsæŒ‚è½½192.168.56.102æœºå™¨ä¸Šï¼Œæµ‹è¯•nfsæŒ‚è½½ã€‚
1ã€æ£€æŸ¥101æ˜¯å¦æœ‰nfså…±äº«ç›®å½•
showmount -e 192.168.56.101

2ã€æŒ‚è½½nfså…±äº«ç›®å½•åˆ°æœ¬æœº
mkdir /data/mntnfsmount -t nfs 192.168.56.101:/data/nfs /data/mntnfs

3ã€æµ‹è¯•è¯»å†™æ–‡ä»¶102æœºå™¨è¯»å†™æ–‡ä»¶
echo &quot;test&quot; &gt; /data/mntnfs/test.txtcat /data/mntnfs/test.txt

101æœºå™¨è¯»æ–‡ä»¶
cat /data/nfs/test.txt

4ã€é…ç½®è‡ªåŠ¨æŒ‚è½½
cat &lt;&lt;EOF | tee -a /etc/fstab192.168.56.101:/data/nfs /data/mntnfs nfs default 0 0EOFmount -a

Ubuntuä¸­å®‰è£…NFSå®‰è£…nfs-serverä½œä¸ºå­˜å‚¨èŠ‚ç‚¹çš„ä¸»æœºå®‰è£…nfs-serverï¼Œæœ¬èŠ‚ä¸­çš„å­˜å‚¨èŠ‚ç‚¹ä¸»æœºIPä¸º192.168.56.103ã€‚
1ã€å®‰è£…nfs-server
apt-get -y install nfs-kernel-server

2ã€åˆ›å»ºå…±äº«ç›®å½•ï¼Œè®¾ç½®å…±äº«ç›®å½•æƒé™
mkdir -p /data/nfschmod -R 777 /data/nfs

3ã€é…ç½®å…±äº«ç›®å½•
# echo &#x27;/data/nfs *(rw,sync,no_root_squash)&#x27; &gt;&gt; /etc/exportsecho &#x27;/data/nfs *(insecure,rw,sync,no_root_squash)&#x27; &gt;&gt; /etc/exports

4ã€å¯åŠ¨nfs-serverï¼Œé…ç½®å¼€æœºè‡ªå¯åŠ¨
# service nfs-kernel-server restartsystemctl start nfs-kernel-serversystemctl status nfs-kernel-serversystemctl enable nfs-kernel-server

5ã€æ£€æŸ¥nfsçŠ¶æ€
exportfsrpcinfo -p | grep nfs

å®‰è£…nfs-clientåœ¨éœ€è¦æŒ‚è½½nfsçš„ä¸»æœºä¸Šå®‰è£…nfs-clientï¼Œæœ¬èŠ‚ä¸­ä¸»æœºIPä¸º192.168.56.104ã€‚
å®‰è£…nfs-client
apt-get install nfs-common

æµ‹è¯•nfsæŒ‚è½½192.168.56.104æœºå™¨ä¸Šï¼Œæµ‹è¯•nfsæŒ‚è½½ã€‚
1ã€æ£€æŸ¥103æ˜¯å¦æœ‰nfså…±äº«ç›®å½•
showmount -e 192.168.56.103

2ã€æŒ‚è½½nfså…±äº«ç›®å½•åˆ°æœ¬æœº
mkdir /data/mntnfsmount -t nfs 192.168.56.103:/data/nfs /data/mntnfs

3ã€æµ‹è¯•è¯»å†™æ–‡ä»¶104æœºå™¨è¯»å†™æ–‡ä»¶
echo &quot;test&quot; &gt; /data/mntnfs/test.txtcat /data/mntnfs/test.txt

103æœºå™¨è¯»æ–‡ä»¶
cat /data/nfs/test.txt

4ã€é…ç½®è‡ªåŠ¨æŒ‚è½½
cat &lt;&lt;EOF | tee -a /etc/fstab192.168.56.103:/data/nfs /data/mntnfs nfs default 0 0EOFmount -a

NFSé«˜å¯ç”¨ä¸Šæ–‡ä¸­ï¼Œæˆ‘ä»¬æ­å»ºçš„nfs-serveréƒ½æ˜¯å•èŠ‚ç‚¹çš„ï¼Œå¦‚æœèŠ‚ç‚¹æŒ‚æ‰ï¼Œä¼šé€ æˆå¾ˆå¤šä¾èµ–å®ƒçš„è½¯ä»¶ä¸å¯ç”¨ã€‚å¦‚æœèŠ‚ç‚¹æ•°æ®ä¸¢å¤±ï¼Œæ›´æ˜¯ä¸€åœºç¾éš¾ã€‚å› æ­¤ï¼Œç”Ÿäº§ç¯å¢ƒæœ€å¥½æ­å»ºnfsé«˜å¯ç”¨ç¯å¢ƒã€‚
å‚è€ƒæ–‡æ¡£ï¼š

NFSåŒæœºçƒ­å¤‡é«˜å¯ç”¨ç¯å¢ƒ - è¿ç»´ç¬”è®°
NFSé«˜å¯ç”¨(NFS+keepalive+Sersync)

]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>storage</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>å­˜å‚¨</tag>
        <tag>nfs</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenStackä¸­å…±äº«å­˜å‚¨çš„è™šæ‹Ÿæœºåœ¨çº¿è¿ç§»</title>
    <url>/dev-openstack-vm-live-migration/</url>
    <content><![CDATA[å‰è¨€ã€ŠOpenStackä¸­è™šæ‹Ÿæœºçš„åœ¨çº¿è¿ç§»ã€‹ä¸€æ–‡ä¸­ï¼Œè™šæ‹Ÿæœºè¿ç§»æ—¶ï¼ŒæŠŠblockä¸€èµ·è¿›è¡Œäº†è¿ç§»ã€‚ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¿™äº›è™šæ‹Ÿæœºå¾€å¾€æ˜¯å…±äº«å­˜å‚¨è®¾å¤‡ï¼Œä¸éœ€è¦å¯¹blockè¿›è¡Œè¿ç§»ã€‚æ‰€ä»¥ï¼Œæœ¬æ–‡å°±æ¥é‡æ–°é…ç½®ä¸€ä¸‹ç¯å¢ƒï¼Œå®ç°å…±äº«å­˜å‚¨çš„è™šæ‹Ÿæœºåœ¨çº¿è¿ç§»ã€‚


åŸç†å¸¸è§„å®‰è£…çš„OpenStackä¸­ï¼Œå®ä¾‹å­˜æ”¾åœ¨ /var/lib/nova/instances/ ç›®å½•ï¼›ä½¿ç”¨kollaå®‰è£…çš„OpenStackä¸­ï¼Œå®ä¾‹å­˜æ”¾åœ¨ /var/lib/docker/volumes/nova_compute/_data/instances/ ç›®å½•ã€‚
å…±äº«å­˜å‚¨ï¼Œéœ€è¦ä¸¤ä¸ªæ­¥éª¤ï¼š1ã€æœ‰ä¸€å°NFSï¼ˆNetwork File Systemï¼‰æœåŠ¡å™¨ï¼Œå…±äº«æŸä¸ªç›®å½•ï¼Œæ¯”å¦‚/nfs/share/instancesã€‚2ã€æ‰€æœ‰è®¡ç®—èŠ‚ç‚¹çš„instancesç›®å½•ï¼Œéƒ½æŒ‚è½½ä¸ŠNFSæœåŠ¡å™¨çš„/nfs/share/instancesç›®å½•ã€‚
ä¸»æœºå‡†å¤‡ä½¿ç”¨virtualboxåˆ›å»ºä¸€ä¸ªæ–°çš„ubuntu16è™šæ‹Ÿæœºï¼Œæˆ–è€…cloneå…¶ä»–èŠ‚ç‚¹å¹¶ä¸”é€šè¿‡å¿«ç…§æ¢å¤åˆå§‹çŠ¶æ€ï¼Œä½œä¸ºnfså­˜å‚¨èŠ‚ç‚¹ã€‚è¿™é‡Œé€šè¿‡cloneçš„æ–¹æ³•å¾—åˆ°ä¸€ä¸ªæ–°çš„ä¸»æœºï¼Œè®¾ç½®IPä¸º192.168.56.130ã€‚å‚è€ƒã€ŠVirtualBoxä¸­Ubuntuæ‰©å®¹ã€‹ï¼Œå¯¹è™šæ‹Ÿæœºè¿›è¡Œæ‰©å®¹ã€‚
NFSå‡†å¤‡å‚è€ƒæ–‡æ¡£ã€ŠLinuxä¸­å®‰è£…NFSã€‹ï¼Œåœ¨å­˜å‚¨èŠ‚ç‚¹å®‰è£…nfs-serverï¼Œè®¡ç®—èŠ‚ç‚¹å®‰è£…nfs-clientã€‚
å­˜å‚¨èŠ‚ç‚¹nfsé…ç½®1ã€åˆ›å»ºå…±äº«ç›®å½•å¹¶ä¿®æ”¹æƒé™
mkdir -p /nfs/share/instanceschmod o+x /nfs/share/instances

2ã€å†™å…¥nfsé…ç½®
echo &#x27;/nfs/share/instances *(rw,sync,no_root_squash)&#x27; &gt;&gt; /etc/exports

è®¡ç®—èŠ‚ç‚¹nfsé…ç½®1ã€æŒ‚è½½nfsç›®å½•
mount -t nfs 192.168.56.130:/nfs/share/instances /var/lib/docker/volumes/nova_compute/_data/instances/

instancesç›®å½•ä¸­è¿˜æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œç›´æ¥æŒ‚è½½è¦†ç›–ç¡®å®šæ²¡æœ‰å½±å“å—ï¼Ÿæ²¡æœ‰ã€‚
ä¸¤ä¸ªè®¡ç®—èŠ‚ç‚¹éƒ½æ‰§è¡ŒåŒæ ·çš„æ“ä½œï¼Œæ­¤æ—¶å®ƒä»¬çš„instancesç›®å½•æ˜¯åŒä¸€ä¸ªç›®å½•ã€‚
2ã€ä¿®æ”¹instancesç›®å½•æƒé™
chmod -R 777 /var/lib/docker/volumes/nova_compute/_data/instances/
ä¸€å®šè¦ä¿®æ”¹ï¼Œå¦åˆ™åˆ›å»ºå®ä¾‹æ—¶ä¼šæŠ¥é”™ã€‚
3ã€é‡å¯computeæœåŠ¡å’ŒlibvirtæœåŠ¡
docker stop nova_computedocker start nova_computedocker stop nova_libvirtdocker start nova_libvirt

å¦‚æœä¸é‡å¯ï¼Œé‚£ä¹ˆåˆ›å»ºçš„å®ä¾‹ä¼šå­˜æ”¾åœ¨è®¡ç®—èŠ‚ç‚¹æœ¬åœ°ç£ç›˜ä¸Šï¼Œå¸è½½instancesç›®å½•åå¯ä»¥çœ‹åˆ°ã€‚
è¿ç§»åˆ›å»ºå®ä¾‹å‚è€ƒã€ŠKollaå®‰è£…OpenStackå¤šèŠ‚ç‚¹ã€‹çš„åˆå§‹åŒ–é…ç½®éƒ¨åˆ†ï¼Œä½¿ç”¨cirrosé•œåƒåˆ›å»ºdemo2å®ä¾‹ã€‚
1ã€ä½¿ç®¡ç†å‘˜ç¯å¢ƒç”Ÿæ•ˆ
source /etc/kolla/admin-openrc.sh

2ã€åˆ›å»ºå®ä¾‹
openstack server create \    --image cirros \    --flavor m1.tiny \    --key-name mykey \    --nic net-id=25e6c0ef-6a0a-481c-a08a-46f7ef67ad3e \    demo2

3ã€åˆ†é…æµ®åŠ¨IP
openstack network listopenstack floating listopenstack floating ip create public1openstack server add floating ip demo2 10.0.2.156

3ã€æŸ¥çœ‹å®ä¾‹è®¡ç®—èŠ‚ç‚¹ä¸Šï¼Œåœ¨/var/lib/docker/volumes/nova_compute/_data/instancesç›®å½•ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æ–°åˆ›å»ºçš„å®ä¾‹ã€‚
è¿ç§»å®éªŒ1ã€æŸ¥çœ‹å®ä¾‹åˆ—è¡¨
nova list

2ã€æŸ¥çœ‹å®ä¾‹ä¿¡æ¯
nova show demo2
å¯ä»¥çœ‹åˆ°demo2ä½äºcomputeèŠ‚ç‚¹ã€‚
3ã€å®ä¾‹è¿ç§»
nova live-migration demo2 compute2

4ã€å†æ¬¡æŸ¥çœ‹å®ä¾‹ä¿¡æ¯
nova show demo2
å¯ä»¥çœ‹åˆ°demo2è¿ç§»åˆ°äº†compute2èŠ‚ç‚¹ï¼Œè¿ç§»æˆåŠŸï¼Œniceã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>storage</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
        <tag>å­˜å‚¨</tag>
        <tag>nfs</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenStackä¸­è™šæ‹Ÿæœºçš„åœ¨çº¿è¿ç§»</title>
    <url>/dev-openstack-vm-block-live-migration/</url>
    <content><![CDATA[å‰è¨€è™šæ‹Ÿæœºè¿ç§»ä¸»è¦æœ‰ä¸‰ç§æ–¹å¼ï¼šP2Vã€V2Vå’ŒV2Pã€‚P2VæŒ‡è¿ç§»ç‰©ç†æœåŠ¡å™¨ä¸Šçš„æ“ä½œç³»ç»ŸåŠå…¶ä¸Šçš„åº”ç”¨è½¯ä»¶å’Œæ•°æ®åˆ°VMMï¼ˆVirtual Machine Monitorï¼‰ç®¡ç†çš„è™šæ‹ŸæœåŠ¡å™¨ä¸­ã€‚V2Vè¿ç§»æ˜¯åœ¨è™šæ‹Ÿæœºä¹‹é—´ç§»åŠ¨æ“ä½œç³»ç»Ÿå’Œæ•°æ®ã€‚V2P æŒ‡æŠŠä¸€ä¸ªæ“ä½œç³»ç»Ÿã€åº”ç”¨ç¨‹åºå’Œæ•°æ®ä»ä¸€ä¸ªè™šæ‹Ÿæœºä¸­è¿ç§»åˆ°ç‰©ç†æœºçš„ä¸»ç¡¬ç›˜ä¸Šï¼Œæ˜¯ P2V çš„é€†æ“ä½œã€‚
V2Vè¿ç§»åˆåˆ†ä¸ºç¦»çº¿è¿ç§»å’Œåœ¨çº¿è¿ç§»ã€‚ç¦»çº¿è¿ç§»ä¹Ÿå«åšå¸¸è§„è¿ç§»ã€é™æ€è¿ç§»ï¼Œåœ¨è¿ç§»ä¹‹å‰éœ€è¦å°†è™šæ‹Ÿæœºå…³é—­ã€‚åœ¨çº¿è¿ç§»åˆç§°ä¸ºå®æ—¶è¿ç§»ï¼Œæ˜¯æŒ‡ä¿æŒè™šæ‹Ÿæœºæ­£å¸¸è¿è¡Œçš„åŒæ—¶è¿›è¡Œè¿ç§»ã€‚æœ¬æ–‡è¦ç ”ç©¶çš„ï¼Œå°±æ˜¯è™šæ‹Ÿæœºçš„åœ¨çº¿è¿ç§»ã€‚æ›´å¤šè¯¦ç»†å†…å®¹ï¼Œè¯·å‚è€ƒè™šæ‹Ÿæœºè¿ç§»æŠ€æœ¯æ¼«è°ˆï¼Œç¬¬ 1 éƒ¨åˆ†ã€‚


è¿ç§»ç›¸å…³å‘½ä»¤æœ¬æ–‡ç ”ç©¶çš„æ˜¯OpenStacké›†ç¾¤ä¸­çš„è™šæ‹Ÿæœºè¿ç§»ï¼Œé‚£ä¹ˆå…ˆç ”ç©¶ä¸€ä¸‹OpenStackçš„è™šæ‹Ÿæœºè¿ç§»å‘½ä»¤ã€‚ä¸»è¦å‚è€ƒLive-migrate instancesã€Block Live Migration in OpenStack environmentã€‚
1ã€æŸ¥çœ‹å®ä¾‹IDopenstack server list
PSï¼šopenstack serverå¯ä»¥æ¢æˆnovaã€‚
2ã€æŸ¥çœ‹å®ä¾‹è¯¦æƒ…openstack server show 180617ec-1348-4144-a496-8751d12e84bf
PSï¼šå®ä¾‹IDå¯ä»¥æ¢æˆdemo1ã€‚
3ã€æŸ¥çœ‹å¯ä»¥è¿ç§»çš„èŠ‚ç‚¹openstack compute service list
4ã€æŸ¥çœ‹å…¶å®ƒèŠ‚ç‚¹èµ„æºä½¿ç”¨æƒ…å†µopenstack host list
openstack host show compute2
5ã€è¿ç§»nova live-migration 180617ec-1348-4144-a496-8751d12e84bf compute2å•Šå˜ï¼Œæ²¡æœ‰ååº”æ˜¯é—¹å“ªæ ·ï¼ŸæŸ¥çœ‹å®ä¾‹è¯¦æƒ…ï¼Œä¾ç„¶ä½äºcomputeèŠ‚ç‚¹ã€‚
6ã€è°ƒè¯•è¿ç§»nova live-migration 180617ec-1348-4144-a496-8751d12e84bf compute2 --debugä¿¡æ¯å¾ˆå¤šï¼Œæ‰¾ä¸åˆ°é‡ç‚¹ã€‚åœ¨openstackçƒ­è¿ç§»å’Œå†·è¿ç§»ä¸€æ–‡ä¸­å‘ç°ï¼Œåœ¨çº¿è¿ç§»åˆå¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼šlive migrationå’Œblock migrationã€‚live migrationéœ€è¦å®ä¾‹ä¿å­˜åœ¨NFSå…±äº«å­˜å‚¨ä¸­ï¼Œè¿™ç§è¿ç§»ä¸»è¦æ˜¯å®ä¾‹çš„å†…å­˜çŠ¶æ€çš„è¿ç§»ï¼Œé€Ÿåº¦åº”è¯¥ä¼šå¾ˆå¿«ã€‚block migrationé™¤äº†å®ä¾‹å†…å­˜çŠ¶æ€è¦è¿ç§»å¤–ï¼Œè¿˜å¾—è¿ç§»ç£ç›˜æ–‡ä»¶ï¼Œé€Ÿåº¦ä¼šæ…¢äº›ï¼Œä½†æ˜¯å®ƒä¸è¦æ±‚å®ä¾‹å­˜å‚¨åœ¨å…±äº«æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚
è€Œæˆ‘ä»¬çš„è¿™ä¸ªé›†ç¾¤ï¼Œæ²¡æœ‰å…±äº«å­˜å‚¨ï¼Œæ‰€ä»¥åº”è¯¥ç”¨block migrationï¼Ÿ
7ã€å†æ¬¡è¿ç§»nova live-migration --block-migrate 180617ec-1348-4144-a496-8751d12e84bf compute2ä¿®æ”¹åçš„å‘½ä»¤ï¼Œåœ¨shellä¸­åŒæ ·æ²¡æœ‰æ›´å¤šæç¤ºï¼Œä½†æ˜¯æŸ¥çœ‹horizonï¼Œå‘ç°äº†æƒŠå–œï¼Œæ­£åœ¨è¿ç§»ã€‚ç­‰åˆ°è¿ç§»å®Œæˆï¼ŒæŸ¥çœ‹å®ä¾‹è¯¦æƒ…ï¼Œå´å‘ç°ï¼Œå®ä¾‹æ‰€åœ¨ä¸»æœºä¾ç„¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼æ˜¯å› ä¸ºnovaæ²¡æœ‰é…ç½®å¥½å—ï¼Ÿå¾ˆæœ‰å¯èƒ½ï¼Œé‚£ä¹ˆä¿®æ”¹ä¸€ä¸‹novaçš„é…ç½®è¯•è¯•ã€‚
novaé…ç½®å› ä¸ºæ˜¯ä½¿ç”¨kollaéƒ¨ç½²çš„OpenStackï¼Œæ‰€ä»¥ä¿®æ”¹é…ç½®é‡å¯æœåŠ¡çš„æ–¹æ³•ï¼Œå’Œä¼ ç»Ÿæ–¹æ³•æœ‰æ‰€ä¸åŒã€‚å‚è€ƒkolla(Ocata)éƒ¨ç½²novaç»„ä»¶å…³é”®é…ç½®å’Œvolumeæ˜ å°„å’ŒOpenstack ä¹‹ è°ƒæ•´novaç›¸å…³å‚æ•°ã€‚å¯ä»¥çŸ¥é“ï¼Œä¸»æœºä¸­çš„/etc/kolla/nova-compute/nova.confï¼Œå¯¹åº”å®¹å™¨ä¸­çš„/etc/nova/nova.confã€‚ä¿®æ”¹åé‡å¯å®¹å™¨ï¼Œnova-computeæœåŠ¡é…ç½®å°±ä¼šå‘ç”Ÿæ”¹å˜ã€‚
1ã€åœ¨ä¸¤ä¸ªè®¡ç®—èŠ‚ç‚¹ï¼Œä¿®æ”¹nova.confvim /etc/kolla/nova-compute/nova.confï¼Œæ·»åŠ :
live_migration_flag=VIR_MIGRATE_UNDEFINE_SOURCE,VIR_MIGRATE_PEER2PEER,VIR_MIGRATE_LIVE

2ã€é‡å¯nova-compute
docker stop nova_computedocker start nova_compute

3ã€è¿›å…¥å®¹å™¨docker exec -it nova_compute /bin/bash
4ã€æŸ¥çœ‹é…ç½®æ˜¯å¦ç”Ÿæ•ˆvi /etc/nova/nova.conf
å†æ¬¡è¿ç§»1ã€åœ¨æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œè¿ç§»å‘½ä»¤nova live-migration --block-migrate 180617ec-1348-4144-a496-8751d12e84bf compute2æ»¡æ€€æœŸæœ›ï¼Œä½†æ˜¯ä¾ç„¶å¤±è´¥ã€‚
2ã€åœ¨è®¡ç®—èŠ‚ç‚¹æŸ¥çœ‹æ—¥å¿—tail -n 20 /var/lib/docker/volumes/kolla_logs/_data/nova/nova-compute.logæ—¥å¿—æŠ¥é”™éƒ¨åˆ†å¦‚ä¸‹ï¼š
2018-11-13 19:12:04.614 6 ERROR nova.virt.libvirt.driver [req-e6654355-fcec-4b93-a662-c758a03766fa b2edc935f89d4d2684ec4039c02a21cc ab7e3eb8c00d4299afd8572e1ec437bf - default default] [instance: 180617ec-1348-4144-a496-8751d12e84bf] Live Migration failure: operation failed: Failed to connect to remote libvirt URI qemu+tcp://compute2/system: Unable to resolve address &#x27;compute2&#x27; service &#x27;16509&#x27;: Name or service not known: libvirtError: operation failed: Failed to connect to remote libvirt URI qemu+tcp://compute2/system: Unable to resolve address &#x27;compute2&#x27; service &#x27;16509&#x27;: Name or service not known
ç”±æ—¥å¿—å¯ä»¥çœ‹å‡ºï¼Œé—®é¢˜å‡ºç°åœ¨libvirtä¸Šï¼Œé‚£ä¹ˆä¿®æ”¹ä¸€ä¸‹libvirtçš„é…ç½®ã€‚
libvirté…ç½®å‚è€ƒOpenStackè™šæ‹Ÿæœºå†·è¿ç§»ä¸çƒ­è¿ç§»ã€è™šæ‹Ÿæœºåœ¨ OpenStack é‡Œæ²¡æœ‰å…±äº«å­˜å‚¨æ¡ä»¶ä¸‹çš„åœ¨çº¿è¿ç§»ã€è™šæ‹ŸåŒ–ä¹‹KVM virshå¸¸ç”¨å‘½ä»¤ç¯‡ï¼Œå¯¹libvirtçš„é…ç½®è¿›è¡Œä¿®æ”¹ã€‚
1ã€æŸ¥çœ‹libvirtd.confvim /etc/kolla/nova-libvirt/libvirtd.confä¿®æ”¹é…ç½®å¦‚ä¸‹ï¼š
listen_tcp = 1listen_tls = 0auth_tcp = &quot;none&quot;ca_file = &quot;&quot;log_level = 3log_outputs = &quot;3:file:/var/log/kolla/libvirt/libvirtd.log&quot;listen_addr = &quot;0.0.0.0&quot;

2ã€é‡å¯libvirtæœåŠ¡
docker stop nova_libvirtdocker start nova_libvirt

3ã€æŸ¥çœ‹libvirtæœåŠ¡netstat -anpt | grep libvirtçœ‹åˆ°libvirtdç›‘å¬åœ¨0.0.0.0:16509ç«¯å£å³ä¸ºæ­£å¸¸ã€‚
PSï¼šå¯ä»¥åœ¨å…¶ä»–èŠ‚ç‚¹ä½¿ç”¨virshå‘½ä»¤æµ‹è¯•è¿é€šæ€§virsh -c qemu+tcp://compute2/system
ç¬¬ä¸‰æ¬¡è¿ç§»1ã€åœ¨æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œè¿ç§»å‘½ä»¤nova live-migration --block-migrate 180617ec-1348-4144-a496-8751d12e84bf compute2
2ã€æŸ¥çœ‹å®ä¾‹è¯¦æƒ…openstack server show demo1è¿ç§»æˆåŠŸäº†ï¼Œniceã€‚
å…¶ä»–å‘½ä»¤1ã€æŸ¥çœ‹è¿ç§»ä»»åŠ¡nova server-migration-list 180617ec-1348-4144-a496-8751d12e84bfè¯¥å‘½ä»¤æŸ¥çœ‹åˆ°è¿ç§»ä»»åŠ¡çš„IDï¼Œç„¶åæ ¹æ®è¿™ä¸ªIDå°±å¯ä»¥çœ‹åˆ°æ›´è¯¦ç»†çš„è¿ç§»è¿‡ç¨‹ã€‚
2ã€æŸ¥çœ‹è¿ç§»è¿‡ç¨‹nova server-migration-show 180617ec-1348-4144-a496-8751d12e84bf 2
3ã€æŸ¥çœ‹è­¦å‘Šæˆ–è€…å‡ºé”™æ—¥å¿—grep WARNING.*180617ec-1348-4144-a496-8751d12e84bf /var/lib/docker/volumes/kolla_logs/_data/nova/nova-compute.log
4ã€å–æ¶ˆè¿ç§»nova live-migration-abort 180617ec-1348-4144-a496-8751d12e84bf 2
åè®°ä»¥ä¸Šï¼Œå®ç°äº†OpenStackè™šæ‹Ÿæœºçš„block live migrationã€‚åç»­å®éªŒï¼Œä¸å¦¨å†ç ”ç©¶ä¸‹å…±äº«å­˜å‚¨çš„live migrationã€‚
ä¹¦ç­¾OpenStackå‘½ä»¤è¡Œæ“ä½œä¹‹è™šæœºç®¡ç†å®ç°
è™šæ‹Ÿæœºè¿ç§»ä¹‹çƒ­è¿ç§»(live_migrate)æºç è§£è¯»
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title>Kollaå®‰è£…OpenStackæ·»åŠ æ–°èŠ‚ç‚¹</title>
    <url>/dev-kolla-openstack-add-new-node/</url>
    <content><![CDATA[å‰è¨€ã€ŠKollaå®‰è£…OpenStackå¤šèŠ‚ç‚¹ã€‹ä¸€æ–‡ä¸­ï¼Œä½¿ç”¨kollaå®‰è£…äº†ä¸‰ä¸ªèŠ‚ç‚¹çš„openstackã€‚
å› ä¸ºå®éªŒéœ€è¦ï¼Œç°åœ¨éœ€è¦å†æ·»åŠ ä¸€ä¸ªè®¡ç®—èŠ‚ç‚¹ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæ€æ ·åœ¨ä¸ç ´åç°æœ‰ç¯å¢ƒçš„åŸºç¡€ä¸Šï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„è®¡ç®—èŠ‚ç‚¹å‘¢ï¼Ÿæœ¬æ–‡å°±æ¥ç ”ç©¶ä¸€ä¸‹ã€‚



æ–°èŠ‚ç‚¹é…ç½®ç½‘ç»œè®¾ç½®åœ¨æ–°æ·»åŠ çš„è®¡ç®—èŠ‚ç‚¹ä¸Šï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
1ã€åˆ‡æ¢åˆ°rootç”¨æˆ·sudo -i
2ã€vim /etc/network/interfacesï¼Œè®¾ç½®ç½‘å¡ä¸ºï¼š
# This file describes the network interfaces available on your system# and how to activate them. For more information, see interfaces(5).source /etc/network/interfaces.d/*# The loopback network interfaceauto loiface lo inet loopback# The primary network interfaceauto eth0iface eth0 inet staticaddress 192.168.56.113netmask 255.255.255.0auto eth1iface eth1 inet dhcpauto eth2iface eth2 inet manualup ifconfig $IFACE 0.0.0.0 upup ifconfig $IFACE promisc

3ã€å¯ç”¨ç½‘å¡ifup eth2
4ã€ä¿®æ”¹/etc/hostsï¼Œæ·»åŠ ï¼š
192.168.56.110  controller192.168.56.111  network192.168.56.112  compute192.168.56.113  compute2

pythonå®‰è£…pythonapt -y install python-simplejsonä¸å®‰è£…çš„è¯ï¼Œåœ¨ä½¿ç”¨ansibleçš„æ—¶å€™ä¼šæŠ¥é”™/bin/sh: 1: /usr/bin/python: not foundã€‚
å®‰è£…docker1ã€å®‰è£…dockerapt -y install docker.io
2ã€ä¸ºdockerå’Œkollaåˆ›å»ºé…ç½®æ–‡ä»¶
mkdir -p /etc/systemd/system/docker.service.dvim /etc/systemd/system/docker.service.d/kolla.conf

ä¿®æ”¹ä¸ºï¼š
[Service]MountFlags=shared

3ã€é‡å¯docker
systemctl daemon-reloadsystemctl restart docker

4ã€æŸ¥çœ‹dockerä¿¡æ¯docker info
å¯†é’¥ç™»å½•1ã€åœ¨æ§åˆ¶èŠ‚ç‚¹å°†å…¬é’¥å†™å…¥æ–°çš„è®¡ç®—èŠ‚ç‚¹
ssh-copy-id -i .ssh/id_rsa.pub -p 22 voidking@192.168.56.11

2ã€åœ¨æ–°çš„è®¡ç®—èŠ‚ç‚¹æŠŠvoidkingç”¨æˆ·æ·»åŠ è¿›sudoå…å¯†ï¼Œæ–¹ä¾¿ä»¥åçš„æ“ä½œsudo vim /etc/sudoersï¼Œæ·»åŠ 
voidking ALL = NOPASSWD: ALL

æ§åˆ¶èŠ‚ç‚¹é…ç½®1ã€é…ç½®multinodeæ–‡ä»¶vim multinodeï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 3, change[control]#192.168.56.110 ansible_ssh_user=voidking ansible_ssh_pass=voidking ansible_sudo=voidking ansible_sudo_pass=voidking ansible_become_user=root ansible_become_pass=voidking ansible_become=true# line 12, change[network]#192.168.56.111 ansible_ssh_user=voidking ansible_ssh_pass=voidking ansible_sudo=voidking ansible_sudo_pass=voidking ansible_become_user=root ansible_become_pass=voidking ansible_become=true# line 17, change[inner-compute]#192.168.56.112 ansible_ssh_user=voidking ansible_ssh_pass=voidking ansible_sudo=voidking ansible_sudo_pass=voidking ansible_become_user=root ansible_become_pass=voidking ansible_become=true192.168.56.113 ansible_ssh_user=voidking ansible_ssh_pass=voidking ansible_sudo=voidking ansible_sudo_pass=voidking ansible_become_user=root ansible_become_pass=voidking ansible_become=true# line 21, change[external-compute]#192.168.56.112 ansible_ssh_user=voidking ansible_ssh_pass=voidking ansible_sudo=voidking ansible_sudo_pass=voidking ansible_become_user=root ansible_become_pass=voidking ansible_become=true192.168.56.113 ansible_ssh_user=voidking ansible_ssh_pass=voidking ansible_sudo=voidking ansible_sudo_pass=voidking ansible_become_user=root ansible_become_pass=voidking ansible_become=true# line 28, comment[monitoring]#monitoring01# line 36, comment[storage]#storage01

2ã€æµ‹è¯•è¿é€šansible -i multinode -m ping all
3ã€æ‹·è´kolla.taråˆ°æ–°è®¡ç®—èŠ‚ç‚¹scp kolla.tar voidking@192.168.56.113:~
4ã€åœ¨æ–°è®¡ç®—èŠ‚ç‚¹å¯¼å…¥æ‰€æœ‰imagesdocker load -i kolla.tar
5ã€åœ¨æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œåˆå§‹åŒ–kolla-ansible -i ./multinode bootstrap-serversæŠ¥é”™å¦‚å›¾ï¼šå‚è€ƒã€ŠUbuntu16ä½¿ç”¨Kollaå®‰è£…OpenStackã€‹è§£å†³ã€‚
6ã€é¢„æ£€æŸ¥kolla-ansible -i ./multinode prechecks
7ã€éƒ¨ç½²kolla-ansible -i ./multinode deployæŠ¥é”™ï¼Œåˆ›å»ºæ•°æ®åº“å¤±è´¥ã€‚è§£å†³åŠæ³•ï¼šå–æ¶ˆmultinodeæ–‡ä»¶ä¸­controlèŠ‚ç‚¹çš„æ³¨é‡Šï¼Œç„¶åé‡æ–°æ‰§è¡Œéƒ¨ç½²ã€‚kolla-ansible -i ./multinode deploy --limit @/usr/local/share/kolla-ansible/ansible/site.retryå®é™…ä¸Šï¼Œsite.retryæ–‡ä»¶é‡Œé¢æ”¾çš„æ˜¯ä¸€ä¸ªå•çº¯çš„IPåœ°å€192.168.56.113ã€‚å¦‚ä¸Šå›¾ï¼Œç­‰å¾…å‡ åˆ†é’Ÿåï¼Œå‡ºç°éƒ¨ç½²æˆåŠŸçš„æç¤ºã€‚
æµ‹è¯•ä½¿ç”¨æ–°çš„é—®é¢˜æ¥äº†ï¼Œä¸Šé¢çš„æ“ä½œæ˜¾ç¤ºæ–°çš„è®¡ç®—èŠ‚ç‚¹éƒ¨ç½²æˆåŠŸï¼Œé‚£ä¹ˆï¼Œå®‰è£…è¿‡ç¨‹ä¸­æœ‰æ²¡æœ‰å¯¹åŸç³»ç»Ÿäº§ç”Ÿå½±å“ï¼Ÿæˆ‘ä»¬æ¥æµ‹è¯•æŸ¥çœ‹ä¸€ä¸‹ã€‚1ã€ä½¿adminç¯å¢ƒç”Ÿæ•ˆsource /etc/kolla/admin-openrc.sh
2ã€æŸ¥çœ‹è®¡ç®—æœåŠ¡openstack compute service listå¦‚ä¸Šå›¾ï¼Œæ­¤æ—¶å·²ç»æœ‰äº†ä¸¤ä¸ªè®¡ç®—èŠ‚ç‚¹ã€‚
3ã€æŸ¥çœ‹ä»¥å‰çš„å®ä¾‹openstack server listä¹‹å‰çš„å®ä¾‹è¿˜åœ¨ï¼Œæ²¡æœ‰å—åˆ°å½±å“ï¼Œniceã€‚
åè®°ä¸Šé¢çš„æ­¥éª¤ï¼Œå®Œç¾æ·»åŠ äº†ä¸€ä¸ªæ–°çš„è®¡ç®—èŠ‚ç‚¹ï¼Œå‰ææ˜¯ã€ŠKollaå®‰è£…OpenStackå¤šèŠ‚ç‚¹ã€‹ä¸€æ–‡ä¸­çš„globals.ymlç­‰é…ç½®æ–‡ä»¶ä¿æŒä¸å˜ã€‚
æˆ‘å¾ˆå¥½å¥‡ï¼Œå¦‚æœä¸»æœºæ¸…å•multinodeä¸­çš„110ã€111ã€112ä¸‰ä¸ªèŠ‚ç‚¹æ²¡æœ‰æ·»åŠ æ³¨é‡Šï¼Œä¼šä¸ä¼šå¯¹å®ƒä»¬è¿›è¡Œé‡æ–°å®‰è£…ã€‚äºæ˜¯ï¼Œæˆ‘æŠŠæ³¨é‡Šå–æ¶ˆï¼Œæ‰§è¡Œäº†ä¸€æ¬¡kolla-ansible -i ./multinode deployã€‚å®è·µè¯æ˜ï¼Œæ²¡å•¥å½±å“ã€‚é‚£ä¹ˆï¼Œå¦‚æœä»bootstrap-serverså¼€å§‹æ‰§è¡Œå‘¢ï¼Ÿä¾æ¬¡æ‰§è¡Œbootstrap-serversã€prechecksã€deployä¸‰æ¡å‘½ä»¤ä¼šä¸ä¼šé‡è£…ï¼Ÿäºæ˜¯ï¼Œå…ˆæ‰§è¡Œbootstrap-serversã€‚ç„¶åï¼Œå¡åœ¨äº†æ—¶é—´åŒæ­¥ï¼Œå¡äº†ä¸€ä¸ªé’Ÿå¤´ï¼Œé‚Ctrl+Cæ”¾å¼ƒã€‚ç®—äº†ç®—äº†ï¼Œä¸æ¢ç©¶äº†ï¼Œå¦‚æ— å¿…è¦å‹¿å¢å®ä½“ï¼Œè¿˜æ˜¯æŠŠç²¾åŠ›æ”¾åœ¨æ›´é‡è¦çš„äº‹æƒ…ä¸Šã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
        <tag>ansible</tag>
        <tag>kolla</tag>
      </tags>
  </entry>
  <entry>
    <title>AIOpsæ¦‚è§ˆ</title>
    <url>/dev-aiops-summary/</url>
    <content><![CDATA[AIOpsæ˜¯ä»€ä¹ˆï¼Ÿè¿ç»´çš„å‘å±•ï¼Œç»å†äº†æ‰‹å·¥è¿ç»´ã€è‡ªåŠ¨åŒ–è¿ç»´ã€DevOpsã€AIOpsã€‚
Gartnerå…¬å¸2013æå‡ºITOAï¼ˆIT Operations Analyticsï¼‰ï¼Œ2016å¹´å°†ITOAæ¦‚å¿µå‡çº§ä¸ºAIOpsï¼ˆAlgorithmic IT Operationsï¼‰ï¼Œ2017å¹´å‘ç°AIè¶Šæ¥è¶Šç«ï¼Œäºæ˜¯æŠŠAIOpsé‡æ–°å®šä¹‰ä¸ºArtificial Intelligence for IT Operationsï¼Œä¹Ÿå°±æ˜¯æ™ºèƒ½è¿ç»´ã€‚AIOpså°†äººå·¥æ™ºèƒ½åº”ç”¨äºè¿ç»´é¢†åŸŸï¼ŒåŸºäºå·²æœ‰çš„è¿ç»´æ•°æ®ï¼ˆæ—¥å¿—ã€ç›‘æ§ä¿¡æ¯ã€åº”ç”¨ä¿¡æ¯ç­‰ï¼‰ï¼Œé€šè¿‡æœºå™¨å­¦ä¹ çš„æ–¹å¼æ¥è¿›ä¸€æ­¥è§£å†³è‡ªåŠ¨åŒ–è¿ç»´æ²¡åŠæ³•è§£å†³çš„é—®é¢˜ã€‚
AIOpsçš„ç›®æ ‡æ˜¯ï¼Œåˆ©ç”¨å¤§æ•°æ®ã€æœºå™¨å­¦ä¹ å’Œå…¶ä»–åˆ†ææŠ€æœ¯ï¼Œé€šè¿‡é¢„é˜²é¢„æµ‹ã€ä¸ªæ€§åŒ–å’ŒåŠ¨æ€åˆ†æï¼Œç›´æ¥å’Œé—´æ¥å¢å¼ºITä¸šåŠ¡çš„ç›¸å…³æŠ€æœ¯èƒ½åŠ›ï¼Œå®ç°æ‰€ç»´æŠ¤äº§å“æˆ–æœåŠ¡çš„æ›´é«˜è´¨é‡ã€åˆç†æˆæœ¬åŠé«˜æ•ˆæ”¯æ’‘ã€‚


AIOpsåšä»€ä¹ˆï¼ŸçŸ¥è¯†é¢†åŸŸAIOpsæ¶‰åŠåˆ°è¡Œä¸šé¢†åŸŸçŸ¥è¯†ã€è¿ç»´åœºæ™¯é¢†åŸŸçŸ¥è¯†å’Œæœºå™¨å­¦ä¹ é¢†åŸŸçŸ¥è¯†ï¼Œå¦‚ä¸‹å›¾ï¼š
å›¢é˜Ÿæ„æˆä¸€ä¸ªAIOpså›¢é˜Ÿï¼Œè¦æœ‰è¿ç»´å·¥ç¨‹å¸ˆã€è¿ç»´å¼€å‘å·¥ç¨‹å¸ˆã€è¿ç»´AIå·¥ç¨‹å¸ˆï¼Œå¦‚ä¸‹å›¾ï¼š
ç ”ç©¶æ–¹å‘ç ”ç©¶æ–¹å‘æŒ‰ç…§æ—¶é—´æ¥åˆ†ï¼Œå¯ä»¥åˆ†ä¸ºé’ˆå¯¹å†å²äº‹ä»¶ã€é’ˆå¯¹å½“å‰äº‹ä»¶ã€é’ˆå¯¹æœªæ¥äº‹ä»¶ï¼Œå¦‚ä¸‹å›¾ï¼š
ç ”ç©¶æ–¹å‘æŒ‰ç…§åº”ç”¨åœºæ™¯æ¥åˆ†ï¼Œå¯ä»¥åˆ†ä¸ºæ•ˆç‡æå‡ã€è´¨é‡ä¿éšœã€æˆæœ¬ç®¡ç†ï¼Œå¦‚ä¸‹å›¾ï¼š
AIOpså¹³å°èƒ½åŠ›åˆ†çº§AIOps çš„å»ºè®¾å¯ä»¥å…ˆç”±æ— åˆ°å±€éƒ¨å•ç‚¹æ¢ç´¢ã€å†åˆ°å•ç‚¹èƒ½åŠ›å®Œå–„ï¼Œå½¢æˆè§£å†³æŸä¸ªå±€éƒ¨é—®é¢˜çš„è¿ç»´AIâ€œå­¦ä»¶â€ ï¼Œå†ç”±å¤šä¸ªå…·æœ‰ AI èƒ½åŠ›çš„å•è¿ç»´èƒ½åŠ›ç‚¹ç»„åˆæˆä¸€ä¸ªæ™ºèƒ½è¿ç»´æµç¨‹ã€‚AIOps èƒ½åŠ›åˆ†çº§å¯å…·ä½“å¯á§¿è¿°ä¸º5çº§ï¼Œå¦‚ä¸‹å›¾ï¼š

å¼€å§‹å°è¯•åº”ç”¨AIèƒ½åŠ›ï¼Œè¿˜æ— è¾ƒæˆç†Ÿå•ç‚¹åº”ç”¨
å…·å¤‡å•åœºæ™¯çš„AIè¿ç»´èƒ½åŠ›ï¼Œå¯ä»¥åˆæ­¥å½¢æˆä¾›å†…éƒ¨ä½¿ç”¨çš„å­¦ä»¶
æœ‰ç”±å¤šä¸ªå•åœºæ™¯AIè¿ç»´æ¨¡å—ä¸²è”èµ·æ¥çš„æµç¨‹åŒ–AIè¿ç»´èƒ½åŠ›ï¼Œå¯ä»¥å¯¹å¤–æä¾›å¯é çš„è¿ç»´AIå­¦ä»¶
ä¸»è¦è¿ç»´åœºæ™¯å‡å·²å®ç°æµç¨‹åŒ–å…å¹²é¢„AIè¿ç»´èƒ½åŠ›ï¼Œå¯ä»¥å¯¹å¤–æä¾›å¯é çš„AIOpsæœåŠ¡ã€‚
æœ‰æ ¸å¿ƒä¸­æ¢AIï¼Œå¯ä»¥åœ¨æˆæœ¬ã€è´¨é‡ã€æ•ˆç‡é—´ä»å®¹è°ƒæ•´ï¼Œè¾¾åˆ°ä¸šåŠ¡ä¸åŒç”Ÿå‘½å‘¨æœŸå¯¹ä¸‰ä¸ªæ–¹é¢ä¸åŒçš„æŒ‡æ ‡è¦æ±‚ï¼Œå¯å®ç°å¤šç›®æ ‡ä¸‹çš„æœ€ä¼˜æˆ–æŒ‰éœ€æœ€ä¼˜ã€‚

â€œå­¦ä»¶â€ï¼ˆLearnwareï¼‰ä¸€è¯ç”±å—äº¬å¤§å­¦å‘¨å¿—åè€å¸ˆåŸåˆ›ï¼Œå­¦ä»¶=æ¨¡å‹+è§„çº¦ã€‚
å­¦ä»¶ï¼Œäº¦ç§°AIè¿ç»´ç»„ä»¶ï¼Œç±»ä¼¼ç¨‹åºä¸­çš„APIæˆ–å…¬å…±åº“ï¼Œä½†APIåŠå…¬å…±åº“ä¸å«å…·ä½“ä¸šåŠ¡æ•°æ®ï¼Œåªæ˜¯æŸç§ç®—æ³•ï¼Œè€Œ AI è¿ç»´ç»„ä»¶ï¼ˆæˆ–ç§°å­¦ä»¶ï¼‰ï¼Œåˆ™æ˜¯åœ¨ç±»ä¼¼APIçš„åŸºç¡€ä¸Šï¼Œå…¼å…·å¯¹æŸä¸ªè¿ç»´åœºæ™¯æ™ºèƒ½åŒ–è§£å†³çš„â€œè®°å¿†â€èƒ½åŠ›ï¼Œå°†å¤„ç†è¿™ä¸ªåœºæ™¯çš„æ™ºèƒ½è§„åˆ™ä¿å­˜åœ¨äº†è¿™ä¸ªç»„ä»¶ä¸­ã€‚
è¿™ä¸ªæ™ºèƒ½è§„åˆ™æ˜¯åœ¨ä¸€å®šé‡çš„æ•°æ®ä¸‹å­¦ä¹ è€Œæ¥çš„ï¼Œä¸”å…·æœ‰â€œå¯é‡ç”¨â€ ã€â€œå¯æ¼”è¿›â€ã€â€œå¯äº†è§£â€çš„ç‰¹æ€§ï¼Œæ—¢å¯å…±äº«ç”±ä¸“å®¶åˆ©ç”¨æ•°æ®è®­ç»ƒçš„ç®—æ³•ï¼Œåˆå¯ä¿æŠ¤æ•°æ®å’Œéšç§ã€‚
èƒ½åŠ›æ¡†æ¶åŸºäºä¸Šè¿° AIOps èƒ½åŠ›åˆ†çº§ï¼Œ å¯¹åº”çš„ AIOps èƒ½åŠ›æ¡†æ¶å¦‚ä¸‹ã€‚
èƒ½åŠ›ä½“ç³»AIOpså·¥ä½œå¹³å°èƒ½åŠ›ä½“ç³»ä¸»è¦åŠŸèƒ½æ˜¯ä¸ºAIOpsçš„å®é™…åœºæ™¯å»ºè®¾è½åœ°è€Œæä¾›åŠŸèƒ½çš„å·¥å…·æˆ–è€…äº§å“å¹³å°ï¼Œå…¶ä¸»è¦ç›®çš„æ˜¯é™ä½AIOpsçš„å¼€å‘äººå‘˜æˆæœ¬ï¼Œæå‡å¼€å‘æ•ˆç‡ï¼Œè§„èŒƒå·¥ä½œäº¤ä»˜è´¨é‡ã€‚ AIOpså¹³å°åŠŸèƒ½ä¸ä¸€èˆ¬çš„æœºå™¨å­¦ä¹ (æˆ–è€…æ•°æ®æŒ–æ˜)å¹³å°æä¸ºç±»ä¼¼ï¼Œæ­¤ç±»äº§å“å›½å¤–çš„æ¯”å¦‚Googleçš„AutoMLã€‚
å¹³å°è¦ç´ AIOpså¹³å°ä»åº•å±‚åˆ°ä¸Šå±‚åº”è¯¥åŒ…å«å¦‚ä¸‹è¦ç´ ï¼š

æ•°æ®æºï¼šå¤§é‡å¹¶ä¸”ç§ç±»ç¹å¤šçš„ IT åŸºç¡€è®¾æ–½
å¤§æ•°æ®å¹³å°ï¼šç”¨äºå¤„ç†å†å²å’Œå®æ—¶çš„æ•°æ®
è®¡ç®—ä¸åˆ†æï¼šé€šè¿‡å·²æœ‰çš„ IT æ•°æ®äº§ç”Ÿæ–°çš„æ•°æ®ï¼Œä¾‹å¦‚æ•°æ®æ¸…æ´—ã€å»é™¤å™ªå£°ç­‰
ç®—æ³•ï¼šç”¨äºè®¡ç®—å’Œåˆ†æï¼Œä»¥äº§ç”Ÿ IT è¿ç»´åœºæ™¯æ‰€éœ€è¦çš„ç»“æœ
æœºå™¨å­¦ä¹ ï¼šè¿™é‡Œä¸€èˆ¬æŒ‡æ— ç›‘ç£å­¦ä¹ ï¼Œå¯æ ¹æ®åŸºäºç®—æ³•çš„åˆ†æç»“æœæ¥äº§ç”Ÿæ–°çš„ç®—æ³•

AIOpså…³é”®æŠ€æœ¯æ•°æ®é‡‡é›†æ•°æ®é‡‡é›†è´Ÿè´£å°†æ™ºèƒ½è¿ç»´æ‰€éœ€è¦çš„æ•°æ®æ¥å…¥è‡³AIOpså¹³å°ï¼Œæ‰€æ¥å…¥çš„è¿ç»´æ•°æ®ç±»å‹ä¸€èˆ¬åŒ…æ‹¬ï¼ˆä½†ä¸é™äºï¼‰æ—¥å¿—æ•°æ®ï¼Œæ€§èƒ½æŒ‡æ ‡æ•°æ®ï¼Œç½‘ç»œæŠ“åŒ…æ•°æ®ï¼Œç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œå‘Šè­¦æ•°æ®ï¼Œé…ç½®ç®¡ç†æ•°æ®ï¼Œè¿ç»´æµç¨‹ç±»æ•°æ®ç­‰ã€‚
æ•°æ®é‡‡é›†æ–¹å¼å¯åˆ†ä¸ºæ— ä»£ç†é‡‡é›†ä»¥åŠæœ‰ä»£ç†é‡‡é›†ä¸¤ç§ã€‚å…¶ä¸­æ— ä»£ç†é‡‡é›†ä¸ºæœåŠ¡ç«¯é‡‡é›†ï¼Œæ”¯æŒSNMPã€æ•°æ®åº“JDBCã€TCP/UDPç›‘å¬ã€SYSLOGã€Web Serviceï¼Œæ¶ˆæ¯é˜Ÿåˆ—é‡‡é›†ç­‰ä¸»æµé‡‡é›†æ–¹å¼ã€‚æœ‰ä»£ç†é‡‡é›†åˆ™ç”¨äºæœ¬åœ°æ–‡ä»¶æˆ–ç›®å½•é‡‡é›†ï¼Œå®¹å™¨ç¼–æ’ç¯å¢ƒé‡‡é›†ï¼Œä»¥åŠè„šæœ¬é‡‡é›†ç­‰ã€‚
æ•°æ®å¤„ç†
æ•°æ®å­—æ®µæå–ï¼šé€šè¿‡æ­£åˆ™è§£æï¼ŒKVè§£æï¼Œåˆ†éš”ç¬¦è§£æç­‰è§£ææ–¹å¼æå–å­—æ®µ
è§„èŒƒåŒ–æ•°æ®æ ¼å¼ï¼šå¯¹å­—æ®µå€¼ç±»å‹é‡å®šä¹‰å’Œæ ¼å¼è½¬æ¢
æ•°æ®å­—æ®µå†…å®¹æ›¿æ¢ï¼šåŸºäºä¸šåŠ¡è§„åˆ™æ›¿æ¢æ•°æ®å­—æ®µå†…å®¹ï¼Œæ¯”å¦‚å¿…è¦çš„æ•°æ®è„±æ•è¿‡ç¨‹ï¼ŒåŒæ—¶å¯å®ç°æ— æ•ˆæ•°æ®ã€ç¼ºå¤±æ•°æ®çš„æ›¿æ¢å¤„ç†
æ—¶é—´è§„èŒƒåŒ–ï¼šå¯¹å„ç±»è¿ç»´æ•°æ®ä¸­çš„æ—¶é—´å­—æ®µè¿›è¡Œæ ¼å¼ç»Ÿä¸€è½¬æ¢
é¢„èšåˆè®¡ç®—ï¼šå¯¹æ•°å€¼å‹å­—æ®µæˆ–æŒ‡æ ‡ç±»æ•°æ®åŸºäºæ»‘åŠ¨æ—¶é—´çª—å£è¿›è¡Œèšåˆç»Ÿè®¡è®¡ç®—ï¼Œå¦‚å–1åˆ†é’ŸCPUå¹³å‡å€¼

æ•°æ®å­˜å‚¨
æ•°æ®éœ€è¦è¿›è¡Œå®æ—¶å…¨æ–‡æ£€ç´¢ï¼Œåˆ†è¯æœç´¢ã€‚å¯é€‰ç”¨ä¸»æµçš„ ElasticSearch å¼•æ“
æ—¶é—´åºåˆ—æ•°æ®ï¼ˆæ€§èƒ½æŒ‡æ ‡ï¼‰ï¼Œä¸»è¦ä»¥æ—¶é—´ç»´åº¦è¿›è¡ŒæŸ¥è¯¢åˆ†æçš„æ•°æ®ï¼Œå¯é€‰ç”¨ä¸»æµçš„rrdtoolã€graphiteã€influxdbç­‰æ—¶åºæ•°æ®åº“
å…³ç³»ç±»æ•°æ®ï¼Œä»¥åŠä¼šèšé›†åœ¨åŸºäºå…³ç³»è¿›è¡Œé€’å½’æŸ¥è¯¢çš„æ•°æ®å¯é€‰æ‹©å›¾æ•°æ®åº“
æ•°æ®çš„é•¿æœŸå­˜å‚¨å’Œç¦»çº¿æŒ–æ˜ä»¥åŠæ•°æ®ä»“åº“æ„å»ºï¼Œå¯é€‰ç”¨ä¸»æµçš„ Hadoopã€Spark ç­‰å¤§æ•°æ®å¹³å°

ç¦»çº¿å’Œåœ¨çº¿è®¡ç®—ç¦»çº¿è®¡ç®—ï¼šé’ˆå¯¹å­˜å‚¨çš„å†å²æ•°æ®è¿›è¡ŒæŒ–æ˜å’Œæ‰¹é‡è®¡ç®—çš„åˆ†æåœºæ™¯ï¼Œç”¨äºå¤§æ•°æ®é‡çš„ç¦»çº¿æ¨¡å‹è®­ç»ƒå’Œè®¡ç®—ï¼Œå¦‚æŒ–æ˜å‘Šè­¦å…³è”å…³ç³»ï¼Œè¶‹åŠ¿é¢„æµ‹/å®¹é‡é¢„æµ‹æ¨¡å‹è®¡ç®—ï¼Œé”™è¯¯è¯é¢‘åˆ†æç­‰åœºæ™¯ã€‚
åœ¨çº¿è®¡ç®—ï¼šå¯¹æµå¤„ç†ä¸­çš„å®æ—¶æ•°æ®è¿›è¡Œåœ¨çº¿è®¡ç®—ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæ•°æ®çš„æŸ¥è¯¢ã€é¢„å¤„ç†å’Œç»Ÿè®¡åˆ†æï¼Œæ•°æ®çš„å®æ—¶å¼‚å¸¸æ£€æµ‹ï¼Œä»¥åŠéƒ¨åˆ†æ”¯æŒå®æ—¶æ›´æ–°æ¨¡å‹çš„æœºå™¨å­¦ä¹ ç®—æ³•è¿ç”¨ç­‰ã€‚ä¸»æµçš„æµå¤„ç†æ¡†æ¶åŒ…æ‹¬ï¼šSpark Streamingã€Kafka Streamingã€Flinkã€Stormç­‰ã€‚
ç®—æ³•æŠ€æœ¯è¿ç»´åœºæ™¯é€šå¸¸æ— æ³•ç›´æ¥åŸºäºé€šç”¨çš„æœºå™¨å­¦ä¹ ç®—æ³•ä»¥é»‘ç›’çš„æ–¹å¼è§£å†³ï¼Œå› æ­¤éœ€è¦ä¸€äº›é¢å‘AIOps çš„ç®—æ³•æŠ€æœ¯ï¼Œä½œä¸ºè§£å†³å…·ä½“è¿ç»´åœºæ™¯çš„åŸºç¡€ã€‚

æŒ‡æ ‡è¶‹åŠ¿é¢„æµ‹ï¼šé€šè¿‡åˆ†ææŒ‡æ ‡å†å²æ•°æ®ï¼Œåˆ¤æ–­æœªæ¥ä¸€æ®µæ—¶é—´æŒ‡æ ‡è¶‹åŠ¿åŠé¢„æµ‹å€¼ï¼Œå¸¸è§æœ‰Holt-Wintersã€æ—¶åºæ•°æ®åˆ†è§£ã€ARIMAç­‰ç®—æ³•ã€‚è¯¥ç®—æ³•æŠ€æœ¯å¯ç”¨äºå¼‚å¸¸æ£€æµ‹ã€å®¹é‡é¢„æµ‹ã€å®¹é‡è§„åˆ’ç­‰åœºæ™¯ã€‚
æŒ‡æ ‡èšç±»: æ ¹æ®æ›²çº¿çš„ç›¸ä¼¼åº¦æŠŠå¤šä¸ª KPI èšæˆå¤šä¸ªç±»åˆ«ã€‚è¯¥ç®—æ³•æŠ€æœ¯å¯ä»¥åº”ç”¨äºå¤§è§„æ¨¡çš„æŒ‡æ ‡å¼‚å¸¸æ£€æµ‹ï¼šåœ¨åŒä¸€æŒ‡æ ‡ç±»åˆ«é‡Œé‡‡ç”¨åŒæ ·çš„å¼‚å¸¸æ£€æµ‹ç®—æ³•åŠå‚æ•°ï¼Œå¤§å¹…é™ä½è®­ç»ƒå’Œæ£€æµ‹å¼€é”€ã€‚å¸¸è§çš„ç®—æ³•æœ‰DBSCANã€K-medoidsã€CLARANSç­‰ï¼Œåº”ç”¨çš„æŒ‘æˆ˜æ˜¯æ•°æ®é‡å¤§ï¼Œæ›²çº¿æ¨¡å¼å¤æ‚ã€‚
å¤šæŒ‡æ ‡è”åŠ¨å…³è”æŒ–æ˜: å¤šæŒ‡æ ‡è”åŠ¨åˆ†æåˆ¤æ–­å¤šä¸ªæŒ‡æ ‡æ˜¯å¦ç»å¸¸ä¸€èµ·æ³¢åŠ¨æˆ–å¢é•¿ã€‚è¯¥ç®—æ³•æŠ€æœ¯å¯ç”¨äºæ„å»ºæ•…éšœä¼ æ’­å…³ç³»ï¼Œä»è€Œåº”ç”¨äºæ•…éšœè¯Šæ–­ã€‚å¸¸è§çš„ç®—æ³•æœ‰Pearson correlationã€Spearman correlationã€Kendall correlationç­‰ï¼Œåº”ç”¨çš„æŒ‘æˆ˜ä¸ºKPIç§ç±»ç¹å¤šï¼Œå…³è”å…³ç³»å¤æ‚ã€‚
æŒ‡æ ‡ä¸äº‹ä»¶å…³è”æŒ–æ˜: è‡ªåŠ¨æŒ–æ˜æ–‡æœ¬æ•°æ®ä¸­çš„äº‹ä»¶ä¸æŒ‡æ ‡ä¹‹é—´çš„å…³è”å…³ç³»ï¼ˆ æ¯”å¦‚åœ¨ç¨‹åº A æ¯æ¬¡å¯åŠ¨çš„æ—¶å€™ CPU åˆ©ç”¨ç‡å°±ä¸Šä¸€ä¸ªå°é˜¶ï¼‰ã€‚è¯¥ç®—æ³•æŠ€æœ¯å¯ç”¨äºæ„å»ºæ•…éšœä¼ æ’­å…³ç³»ï¼Œä»è€Œåº”ç”¨äºæ•…éšœè¯Šæ–­ã€‚å¸¸è§çš„ç®—æ³•æœ‰ Pearson correlationã€J-measureã€Two-sample testç­‰ï¼Œåº”ç”¨çš„æŒ‘æˆ˜ä¸ºäº‹ä»¶å’ŒKPIç§ç±»ç¹å¤šï¼ŒKPIæµ‹é‡æ—¶é—´ç²’åº¦è¿‡ç²—ä¼šå¯¼è‡´åˆ¤æ–­ç›¸å…³ã€å…ˆåã€å•è°ƒå…³ç³»å›°éš¾ã€‚
äº‹ä»¶ä¸äº‹ä»¶å…³è”æŒ–æ˜: åˆ†æå¼‚å¸¸äº‹ä»¶ä¹‹é—´çš„å…³è”å…³ç³»ï¼ŒæŠŠå†å²ä¸Šç»å¸¸ä¸€èµ·å‘ç”Ÿçš„äº‹ä»¶å…³è”åœ¨ä¸€èµ·ã€‚è¯¥ç®—æ³•æŠ€æœ¯å¯ç”¨äºæ„å»ºæ•…éšœä¼ æ’­å…³ç³»ï¼Œä»è€Œåº”ç”¨äºæ•…éšœè¯Šæ–­ã€‚å¸¸è§çš„ç®—æ³•æœ‰ FP-Growthã€Aprioriã€éšæœºæ£®æ—ç­‰ï¼Œä½†å‰ææ˜¯å¼‚å¸¸æ£€æµ‹éœ€è¦å‡†ç¡®å¯é ã€‚
æ•…éšœä¼ æ’­å…³ç³»æŒ–æ˜ï¼šèåˆæ–‡æœ¬æ•°æ®ä¸æŒ‡æ ‡æ•°æ®ï¼ŒåŸºäºä¸Šè¿°å¤šæŒ‡æ ‡è”åŠ¨å…³è”æŒ–æ˜ã€æŒ‡æ ‡ä¸äº‹ä»¶å…³è”æŒ–æ˜ã€äº‹ä»¶ä¸äº‹ä»¶å…³è”æŒ–æ˜ç­‰æŠ€æœ¯ã€ç”± tracing æ¨å¯¼å‡ºçš„æ¨¡å—è°ƒç”¨å…³ç³»å›¾ã€è¾…ä»¥æœåŠ¡å™¨ä¸ç½‘ç»œæ‹“æ‰‘ï¼Œæ„å»ºç»„ä»¶ä¹‹é—´çš„æ•…éšœä¼ æ’­å…³ç³»ã€‚è¯¥ç®—æ³•æŠ€æœ¯å¯ä»¥åº”ç”¨äºæ•…éšœè¯Šæ–­ï¼Œå…¶æœ‰æ•ˆæ€§ä¸»è¦å–å†³äºå…¶åŸºäºçš„å…¶å®ƒæŠ€æœ¯ã€‚

é¡¶ä¼šæ¨èACM SIGCOMMACM IMCACM/USENIX NSDIACM MobiSysACM CoNEXTACM MobiComACM SIGMETRICSIEEE INFOCOMACM KDDUSENIX SecurityIEEE Security &amp; PrivacyACM CCSNDSS
åè®°æ€»è€Œè¨€ä¹‹ï¼ŒAIOpså°±æ˜¯åˆ©ç”¨æœºå™¨å­¦ä¹ æ¥åšä¸€äº›è¿ç»´å·¥ä½œã€‚æ¶‰åŠåˆ°è¡Œä¸šçŸ¥è¯†ã€è¿ç»´çŸ¥è¯†ã€æœºå™¨å­¦ä¹ çŸ¥è¯†ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ç ”ç©¶æ–¹å‘ï¼Œå¯ä»¥ç»†åˆ†ä¸ºå¾ˆå¤šå°çš„ç ”ç©¶æ–¹å‘ã€‚
AIOpså›´ç»•è´¨é‡ä¿éšœã€æˆæœ¬ç®¡ç†å’Œæ•ˆç‡æå‡çš„åŸºæœ¬è¿ç»´åœºæ™¯ï¼Œé€æ­¥æ„å»ºæ™ºèƒ½åŒ–è¿ç»´åœºæ™¯ã€‚åœ¨è´¨é‡ä¿éšœæ–¹é¢ï¼Œä¿éšœç°ç½‘ç¨³å®šè¿è¡Œç»†åˆ†ä¸ºå¼‚å¸¸æ£€æµ‹ã€æ•…éšœè¯Šæ–­ã€æ•…éšœé¢„æµ‹ã€æ•…éšœè‡ªæ„ˆç­‰åŸºæœ¬åœºæ™¯ï¼›åœ¨æˆæœ¬ç®¡ç†æ–¹é¢ï¼Œç»†åˆ†ä¸ºæŒ‡æ ‡ç›‘æ§ï¼Œå¼‚å¸¸æ£€æµ‹ï¼Œèµ„æºä¼˜åŒ–ï¼Œå®¹é‡è§„åˆ’ï¼Œæ€§èƒ½ä¼˜åŒ–ç­‰åŸºæœ¬åœºæ™¯ï¼›åœ¨æ•ˆç‡æ–¹é¢ï¼Œåˆ†ä¸ºæ™ºèƒ½é¢„æµ‹ï¼Œæ™ºèƒ½å˜æ›´ã€æ™ºèƒ½é—®ç­”ï¼Œæ™ºèƒ½å†³ç­–ç­‰åŸºæœ¬åœºæ™¯ï¼ˆæ³¨ï¼šä¸‰è€…ä¹‹é—´ä¸æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œæ˜¯ç›¸äº’å½±å“çš„ï¼Œåœºæ™¯çš„åˆ’åˆ†ä¾§é‡äºä¸»å½±å“ç»´åº¦ï¼‰ã€‚
æ¯ä¸€ä¸ªå°æ–¹å‘ï¼Œéƒ½æ˜¯ä¸€ä¸ªç ”ç©¶ç‚¹ï¼Œæœ€ç»ˆæˆæœæ˜¯ä¸€ä¸ªå­¦ä»¶ã€‚é€šè¿‡å­¦ä»¶çš„ç»„åˆï¼Œå°±æ„æˆäº†AIOpså¹³å°ã€‚
æ›´å¤šå†…å®¹è¯·å‚è€ƒä¹¦ç­¾ä¸­ç»™å‡ºçš„é“¾æ¥ã€‚
ä¹¦ç­¾åŸºäºæœºå™¨å­¦ä¹ çš„æ™ºèƒ½è¿ç»´åŸºäºæœºå™¨å­¦ä¹ çš„æ™ºèƒ½è¿ç»´-pptã€Šä¼ä¸šçº§ AIOps å®æ–½å»ºè®®ã€‹ç™½çš®ä¹¦-V0.6 ç‰ˆæœ¬
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>aiops</tag>
      </tags>
  </entry>
  <entry>
    <title>Win10å¼€çƒ­ç‚¹</title>
    <url>/hobby-win10-wifi/</url>
    <content><![CDATA[é—®é¢˜æè¿°magicbookï¼Œä½¿ç”¨wifiå…±äº«å¤§å¸ˆã€çŒè±¹å…è´¹wifiå¼€çƒ­ç‚¹ï¼Œå‡ºç°äº†ä¸€ä¸ªååˆ†è¯¡å¼‚çš„é—®é¢˜ï¼šå¯åŠ¨çƒ­ç‚¹åï¼Œä½¿ç”¨æ‰‹æœºè¿æ¥çƒ­ç‚¹ï¼Œå¯ä»¥æ­£å¸¸ä¸Šç½‘ï¼Œå¯ä»¥è®¿é—®ç”µè„‘ä¸Šçš„ftpç­‰æœåŠ¡ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‰‹æœºæ¯å±äº†ï¼Œå¤§æ¦‚30ç§’åï¼Œæ‰“å¼€æ‰‹æœºä¾ç„¶æ˜¾ç¤ºwifiè¿æ¥æ­£å¸¸ï¼Œä½†æ˜¯æ— æ³•å†ä¸Šç½‘ï¼Œæ— æ³•å†è®¿é—®ç”µè„‘çš„æœåŠ¡ã€‚å¿…é¡»å…ˆæ–­å¼€è¿æ¥ï¼Œç„¶åé‡æ–°è¿æ¥wifiï¼Œæ‰èƒ½æ¢å¤æ­£å¸¸ï¼Œéå¸¸éº»çƒ¦ã€‚


å°è¯•ä¿®æ”¹ç½‘å¡ç”µæºç®¡ç†ï¼Œå»æ‰â€œå…è®¸è®¡ç®—æœºå…³é—­æ­¤è®¾å¤‡ä»¥èŠ‚çº¦ç”µæºâ€å‰çš„å‹¾ï¼Œä¸è¡Œã€‚å›é€€ç½‘å¡é©±åŠ¨ç‰ˆæœ¬ï¼Œä¸è¡Œã€‚æ¢æˆ360wifiã€wifiå…±äº«ç²¾çµï¼Œä¸è¡Œã€‚å°è¯•äº†å›½å¤–çš„connectfyã€mhotspotï¼Œè´¨é‡è¿˜ä¸å¦‚å›½å†…çš„è½¯ä»¶ã€‚æ¢äº†å‡ ä¸ªç‰ˆæœ¬ï¼Œæ”¶è´¹å°±ç®—äº†ï¼Œå¯ä»¥ç ´è§£ï¼Œä½†æ˜¯æœ‰çš„çª—å£æ— æ³•æ‹–åŠ¨ï¼Œæœ‰çš„å¹¿å‘Šå¾ˆå¤šï¼Œæœ‰çš„è¯»ä¸å‡ºç½‘å¡ï¼Œæœ‰çš„å¹²è„†å¯åŠ¨åæ²¡ååº”ã€‚ã€‚ã€‚æœï¼ï¼ï¼
è§£å†³åŠæ³•åœ¨å°è¯•å„ç§è§£å†³åŠæ³•çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°win10å…¶å®è‡ªå¸¦ç§»åŠ¨çƒ­ç‚¹çš„åŠŸèƒ½ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨è‡ªå¸¦çš„ç§»åŠ¨çƒ­ç‚¹ï¼Œæœ‰æ—¶è¿æ¥ä¸ä¸Šï¼Œæœ‰æ—¶è¿ä¸Šæ²¡å¤šä¹…å°±æ‰çº¿ï¼Œè¿˜ä¸å¦‚ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶ã€‚
ä¸è¿‡ï¼Œå³°å›è·¯è½¬ï¼Œåœ¨æŸæ¬¡å°è¯•çš„è¿‡ç¨‹ä¸­ï¼ŒæŠŠç½‘ç»œé¢‘å¸¦å›ºå®šä¸º2.4GHzï¼Œå±…ç„¶ï¼Œå¥½äº†ï¼å†æ²¡æœ‰ä»»ä½•æ¯›ç—…ï¼ä¸ä¼šè¿æ¥ä¸ä¸Šï¼Œä¹Ÿä¸ä¼šè‡ªåŠ¨æ–­å¼€ï¼
æ•´ä¸ªè®¾ç½®è¿‡ç¨‹å¦‚ä¸‹ï¼š
1ã€å³é”®å³ä¸‹è§’ç½‘ç»œå›¾æ ‡ï¼Œé€‰æ‹©æ‰“å¼€â€œç½‘ç»œå’ŒInternetâ€è®¾ç½®ã€‚2ã€ç‚¹å‡»â€œç§»åŠ¨çƒ­ç‚¹â€ï¼Œâ€œç¼–è¾‘â€ã€‚3ã€è®¾ç½®ç½‘ç»œåç§°å’Œå¯†ç ï¼Œé‡ç‚¹æ˜¯ç½‘ç»œé¢‘å¸¦é€‰æ‹©2.4GHzï¼Œåˆ‡è®°ï¼4ã€ç„¶åï¼Œå°±èƒ½å¼€å¼€å¿ƒå¿ƒä¸Šç½‘äº†ï¼Œå†ä¹Ÿæ²¡æœ‰å‡ºç°è¿‡è‡ªåŠ¨æ–­å¼€çš„æƒ…å†µï¼Œæ¯”æ‰€æœ‰çš„wifiå…±äº«è½¯ä»¶éƒ½å¥½ç”¨ï¼
å¦‚æœå‡ºç°å…¶ä»–é—®é¢˜ï¼Œå‚è€ƒçŸ¥ä¹ï¼šwin10ç³»ç»Ÿå¼€å¯ç§»åŠ¨çƒ­ç‚¹ä¸€æ®µæ—¶é—´åå°±è‡ªåŠ¨å…³é—­äº†æ€ä¹ˆåŠï¼Ÿ
æ³¨æ„å‡è®¾ç”µè„‘IPä¸º172.20.110.235ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼š1ã€åœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶ï¼ˆæ¯”å¦‚wifiå…±äº«å¤§å¸ˆï¼‰å¼€çƒ­ç‚¹æ—¶ï¼Œå¦‚æœç”µè„‘è¦å¯åŠ¨ftpæœåŠ¡ç»™æ‰‹æœºè®¿é—®ï¼Œé‚£ä¹ˆéœ€è¦ç»‘å®šftpæœåŠ¡çš„åœ°å€ä¸º172.20.110.235ã€‚ftpä¸‹è½½é€Ÿåº¦å¾ˆå¿«ï¼Œå¤§æ¦‚20MB/sã€‚2ã€åœ¨ä½¿ç”¨win10è‡ªå¸¦çš„â€œç§»åŠ¨çƒ­ç‚¹â€å¼€çƒ­ç‚¹æ—¶ï¼Œå¦‚æœç”µè„‘è¦å¯åŠ¨ftpæœåŠ¡ç»™æ‰‹æœºè®¿é—®ï¼Œé‚£ä¹ˆéœ€è¦ç»‘å®šftpæœåŠ¡çš„åœ°å€ä¸º192.168.137.1ã€‚ftpä¸‹è½½é€Ÿåº¦å¾ˆæ…¢ï¼Œå¤§æ¦‚2MB/sã€‚å¦‚æœæƒ³è¦åŠ é€Ÿåˆ°20MB/sï¼Œé‚£ä¹ˆç½‘ç»œé¢‘å¸¦é€‰æ‹©5GHzï¼Œè¿™æ—¶æœ‰äº›è®¾å¤‡æ— æ³•è¿æ¥ã€‚
å¾ˆç¥å¥‡ï¼Œå¦‚æœä¸è¿™ä¹ˆè®¾ç½®ï¼Œå°±è®¿é—®ä¸åˆ°ftpæœåŠ¡ã€‚ç”±ä¸Šé¢çš„ç»éªŒå¯ä»¥æ€»ç»“å¦‚ä¸‹ï¼šå¦‚æœä½¿ç”¨win10è‡ªå¸¦çš„ç§»åŠ¨çƒ­ç‚¹ï¼Œé‚£ä¹ˆæ­¤æ—¶çš„è™šæ‹Ÿç½‘å¡ç›¸å½“äºæ’åœ¨ç”µè„‘ä¸Šçš„ä¸€å—ç½‘å¡ï¼Œå¯ä»¥é€šè¿‡è®¿é—®å®ƒçš„IPè€Œè®¿é—®åˆ°ç”µè„‘é‡Œçš„æœåŠ¡ã€‚å¦‚æœä½¿ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶ï¼Œé‚£ä¹ˆæ­¤æ—¶çš„è™šæ‹Ÿç½‘å¡ç›¸å½“äºè·¯ç”±å™¨ï¼Œæ‰€ä»¥è®¿é—®å®ƒçš„IPåªæ˜¯è®¿é—®åˆ°äº†è·¯ç”±å™¨ï¼Œéœ€è¦è®¿é—®ç”µè„‘çš„IPæ‰èƒ½è®¿é—®åˆ°ç”µè„‘çš„æœåŠ¡ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>windows</tag>
        <tag>wifi</tag>
      </tags>
  </entry>
  <entry>
    <title>å·¦ç¥æ’åºç®—æ³•æ–‡å­—æ€»ç»“</title>
    <url>/dev-zuo-sort/</url>
    <content><![CDATA[å‰è¨€ç›¸è§æ¨æ™šï¼çœ‹äº†å·¦ç¥çš„ç®—æ³•è§†é¢‘ï¼Œæ‰çŸ¥é“è‡ªå·±åˆ°åº•æµªè´¹äº†å¤šå°‘æ—¶é—´ã€‚ç®—æ³•ï¼Œå±…ç„¶èƒ½è®²çš„è¿™ä¹ˆæœ‰æ„æ€ï¼Œå±…ç„¶èƒ½è®²çš„è¿™ä¹ˆé€šä¿—æ˜“æ‡‚ï¼å·¦ç¥ï¼Œä¸æ„§æ˜¯å·¦â€œç¥â€ï¼
ã€Šleetcodeåˆ·é¢˜è®°å½•-æ’åºç®—æ³•æ€»ç»“ã€‹ä¸€æ–‡ä¸­ï¼Œä¹Ÿæ€»ç»“è¿‡æ’åºç®—æ³•ï¼Œä½†æ˜¯å’Œå·¦ç¥çš„è®²è§£ä¸€æ¯”ï¼Œå°±æ˜¯æ¸£æ¸£ã€‚æ‰€ä»¥ï¼Œæœ¬æ–‡æŒ‰ç…§å·¦ç¥çš„è®²è§£ï¼Œå†æ¬¡æ€»ç»“ä¸€ä¸‹æ’åºç®—æ³•ã€‚


æ’åºç®—æ³•å¸¸è§çš„æ’åºç®—æ³•æœ‰9ä¸ªï¼Œåˆ†åˆ«æ˜¯å†’æ³¡æ’åºã€é€‰æ‹©æ’åºã€æ’å…¥æ’åºã€å½’å¹¶æ’åºã€å¿«é€Ÿæ’åºã€å †æ’åºã€å¸Œå°”æ’åºã€è®¡æ•°æ’åºå’ŒåŸºæ•°æ’åºã€‚å®ƒä»¬çš„æ—¶é—´ç©ºé—´å¤æ‚åº¦å¦‚ä¸‹ï¼š



ç®—æ³•
æ—¶é—´å¤æ‚åº¦
ç©ºé—´å¤æ‚åº¦
ç¨³å®šæ€§



å†’æ³¡æ’åº
$O(N^2)$
$O(1)$
ç¨³å®š


é€‰æ‹©æ’åº
$O(N^2)$
$O(1)$
ä¸ç¨³å®š


æ’å…¥æ’åº
$O(N^2)$
$O(1)$
ç¨³å®š


å½’å¹¶æ’åº
$O(N*logN)$
$O(N)$
ç¨³å®š


å¿«é€Ÿæ’åº
$O(N*logN)$
$O(logN)åˆ°O(N)$
ä¸ç¨³å®š


å †æ’åº
$O(N*logN)$
$O(1)$
ä¸ç¨³å®š


å¸Œå°”æ’åº
$O(N*logN)$
$O(1)$
ä¸ç¨³å®š


è®¡æ•°æ’åº
$O(N)$
$O(M)$
ç¨³å®š


åŸºæ•°æ’åº
$O(N)$
$O(M)$
ç¨³å®š


æ³¨ï¼šMä»£è¡¨æ¡¶æ•°é‡ã€‚
å¦‚ä¸Šå›¾ï¼ŒæŒ‰ç…§æ—¶é—´å¤æ‚åº¦çš„ä¸åŒï¼Œåˆ†ä¸ºä¸‰å¤§ç±»ã€‚ä»¥ä¸‹ç®—æ³•æè¿°ï¼Œå®ç°çš„éƒ½æ˜¯å‡åºæ’åºï¼ŒNä»£è¡¨å…ƒç´ ä¸ªæ•°ï¼Œa[i]ä»£è¡¨iä½ç½®çš„å…ƒç´ ã€‚
ç¬¨è›‹ç®—æ³•å†’æ³¡æ’åº1ã€ä¾æ¬¡æ¯”è¾ƒï¼Œa[i] &gt; a[i+1] åˆ™äº¤æ¢å…ƒç´ ï¼Œç»“æœæœ€å¤§å…ƒç´ ä½äºN-1ä½ç½®2ã€èŒƒå›´ç¼©å°1
é€‰æ‹©æ’åº1ã€0åˆ°N-1é€‰å‡ºæœ€å°å…ƒç´ æ”¾åœ¨0ä½ç½®ï¼ˆäº¤æ¢å…ƒç´ å³å¯ï¼‰2ã€1åˆ°N-1é€‰å‡ºæœ€å°å…ƒç´ æ”¾åœ¨1ä½ç½®
æ’å…¥æ’åº1ã€1ä½ç½®å’Œ0ä½ç½®å…ƒç´ æ¯”è¾ƒï¼Œå°åˆ™äº¤æ¢2ã€2ä½ç½®å’Œ1ä½ç½®å…ƒç´ æ¯”è¾ƒï¼Œå°åˆ™äº¤æ¢ï¼›1ä½ç½®å’Œ0ä½ç½®å…ƒç´ æ¯”è¾ƒï¼Œå°åˆ™äº¤æ¢
èªæ˜ç®—æ³•å½’å¹¶æ’åº1ã€æ•°ç»„åˆ†å‰²æˆé•¿åº¦ä¸º1çš„æœ‰åºåŒºé—´2ã€æœ‰åºåŒºé—´ä¸¤ä¸¤åˆå¹¶ï¼Œå¾—åˆ°é•¿åº¦ä¸º2çš„æœ‰åºåŒºé—´
å¿«é€Ÿæ’åº1ã€æ•°ç»„ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªæ•°ï¼Œå°äºç­‰äºè¿™ä¸ªæ•°çš„å…ƒç´ æ”¾å·¦ï¼Œå¤§äºè¿™ä¸ªæ•°çš„å…ƒç´ æ”¾å³2ã€å·¦å³ä¸¤è¾¹é€’å½’
å¿«é€Ÿåˆ’åˆ†è¿‡ç¨‹ï¼šï¼ˆ1ï¼‰å·¦åŒºé—´åˆå§‹å€¼ä¸º0ï¼Œåˆ’åˆ†å€¼æ”¾åœ¨N-1ä½ç½®ï¼ˆ2ï¼‰éå†æ•°ç»„ï¼Œå…ƒç´ å¤§äºåˆ’åˆ†å€¼åˆ™è·³è¿‡ï¼Œå°äºç­‰äºåˆ’åˆ†å€¼åˆ™äº¤æ¢è¯¥å…ƒç´ ä¸å·¦åŒºé—´åŠ ä¸€çš„å…ƒç´ ï¼Œåˆ°N-1ä½ç½®åˆ™äº¤æ¢åˆ’åˆ†å€¼ä¸å·¦åŒºé—´åŠ ä¸€çš„å…ƒç´ ã€‚
å †æ’åº1ã€å»ºç«‹å¤§æ ¹å †ï¼ˆæ•°ç»„è¡¨ç¤ºï¼‰ï¼ŒæŠŠå †é¡¶å…ƒç´ ä¸æœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ï¼Œäº¤æ¢åæœ€åä¸€ä¸ªå…ƒç´ æœ‰åº2ã€è°ƒæ•´åï¼ŒæŠŠå †é¡¶å…ƒç´ ä¸å€’ç¬¬äºŒä¸ªå…ƒç´ äº¤æ¢ï¼Œäº¤æ¢åæœ€åä¸¤ä¸ªå…ƒç´ æœ‰åº
å®Œå…¨äºŒå‰æ ‘å½“å‰èŠ‚ç‚¹ç´¢å¼•ä¸ºiï¼Œé‚£ä¹ˆçˆ¶èŠ‚ç‚¹ä¸º(i-1)/2ï¼Œå­èŠ‚ç‚¹ä¸º2i+1å’Œ2i+2è°ƒæ•´å¤§æ ¹å †ï¼šè°ƒæ•´å½“å‰èŠ‚ç‚¹å¤§äºå·¦å³å­èŠ‚ç‚¹ï¼Œè‹¥å‘ç”Ÿè°ƒæ•´åˆ™é€’å½’å»ºç«‹å¤§æ ¹å †ï¼šä»ä¸‹å¾€ä¸Šï¼Œä»ç¬¬ä¸€ä¸ªçˆ¶èŠ‚ç‚¹å¼€å§‹è§†é¢‘è®²è§£ï¼šå †æ’åº
å¸Œå°”æ’åº1ã€è®¾å®šåˆå§‹æ­¥é•¿ï¼ŒæŒ‰ç…§æ­¥é•¿æ¯”è¾ƒå…ƒç´ å¤§å°å¹¶äº¤æ¢2ã€æ­¥é•¿å‡ä¸€ï¼Œæ¯”è¾ƒå…ƒç´ å¤§å°å¹¶äº¤æ¢
æ³¨ï¼šå¸Œå°”æ’åºæ˜¯æ”¹è‰¯ç‰ˆçš„æ’å…¥æ’åº
å˜æ€ç®—æ³•è®¡æ•°æ’åº1ã€å»ºç«‹0-Må·æ¡¶2ã€æŠŠå…ƒç´ æŒ‰å¤§å°æ”¾å…¥å¯¹åº”æ¡¶3ã€ä¾æ¬¡æŠŠ0-Må·æ¡¶ä¸­çš„å…ƒç´ å€’å‡º
åŸºæ•°æ’åº1ã€å‡†å¤‡0-9å·æ¡¶2ã€å…ƒç´ æŒ‰ä¸ªä½æ•°æ”¾å…¥å¯¹åº”æ¡¶3ã€ä¾æ¬¡æŠŠ0-9å·æ¡¶ä¸­çš„å…ƒç´ å€’å‡ºï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ï¼Œæˆä¸ºåºåˆ—4ã€æŒ‰åºåˆ—æŠŠå…ƒç´ æŒ‰åä½æ•°æ”¾å…¥å¯¹åº”æ¡¶
æ³¨ï¼šè®¡æ•°æ’åºå’ŒåŸºæ•°æ’åºéƒ½å±äºæ¡¶æ’åºçš„å®ç°ï¼Œæ¡¶æ’åºæ˜¯ä¸€ç§æ’åºæ€æƒ³ã€‚
åè®°ä»£ç å®ç°ï¼šæ’åºç®—æ³•  
å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œè®°ä¸‹æ¥ï¼Œå¤šçœ‹å‡ éï¼Œå¤šæƒ³å‡ éï¼Œå¤šå†™å‡ éï¼Œç†Ÿèƒ½ç”Ÿå·§ã€‚
ä¹¦ç­¾ç›´é€šBAT â€” æ±‚èŒç®—æ³•ç²¾å“è¯¾
ç‰›å®¢ç®—æ³•åŸºç¡€ç­
ç‰›å®¢ç®—æ³•è¿›é˜¶ç­
]]></content>
      <categories>
        <category>engineering</category>
        <category>algorithm</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨frpè¿›è¡Œå†…ç½‘ç©¿é€</title>
    <url>/dev-frp/</url>
    <content><![CDATA[å‰è¨€ã€Šä½¿ç”¨lanproxyè¿›è¡Œå†…ç½‘ç©¿é€ã€‹ä¸€æ–‡ä¸­ï¼ŒéƒåŒå­¦ä½¿ç”¨lanproxyæ­å»ºäº†ä¸€ä¸ªå†…ç½‘ç©¿é€æœåŠ¡ï¼Œå¹¶ä¸”ä»‹ç»äº†ä½¿ç”¨æ–¹æ³•ã€‚
ä½†æ˜¯ï¼Œä¸çŸ¥é“æœ€è¿‘å‡ºäº†ä»€ä¹ˆå¹ºè›¾å­ï¼Œå±…ç„¶æ— æ³•å†æä¾›å†…ç½‘ç©¿é€æœåŠ¡ã€‚æœ¬æ–‡ï¼Œå°±ç ”ç©¶ä¸€ä¸‹å¦å¤–ä¸€ä¸ªå†…ç½‘ç©¿é€å·¥å…·frpã€‚ä¸»è¦å‚è€ƒfrpå†…ç½‘ç©¿é€æ­å»ºï¼Œè¶…çº§ç®€å•å®ç”¨ã€‚


å‡†å¤‡1ã€ä¸€å°å…¬ç½‘æœåŠ¡å™¨ï¼ˆcentos7ï¼Œè¿è¡Œfrp-serverï¼‰ã€‚2ã€ä¸€å°å†…ç½‘pcæˆ–æœåŠ¡å™¨ï¼ˆè¿è¡Œfrp-clientï¼‰ã€‚
æœåŠ¡ç«¯é…ç½®å®‰è£…frp1ã€è¿›å…¥/optç›®å½•cd /opt
2ã€è®¿é—®frpé¡¹ç›®ï¼Œä¸‹è½½æœ€æ–°ç‰ˆçš„frpï¼Œè¿™é‡Œä¸‹è½½frp_0.21.0_linux_amd64.tar.gzï¼ˆåŒ…å«æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ï¼‰ã€‚
wget https://github.com/fatedier/frp/releases/download/v0.21.0/frp_0.21.0_linux_amd64.tar.gz# orcurl -C - -O -L https://github.com/fatedier/frp/releases/download/v0.21.0/frp_0.21.0_linux_amd64.tar.gz

3ã€è§£å‹å¹¶é‡å‘½åtar -xzvf frp_0.21.0_linux_amd64.tar.gz
mv frp_0.21.0_linux_amd64 frp
4ã€ç¼–è¾‘frps.inicd frp &amp;&amp; vim frps.iniï¼Œå‚è€ƒfrps_full.iniï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š
[common]bind_addr = 0.0.0.0bind_port = 7000dashboard_addr = 0.0.0.0dashboard_port = 7500dashboard_user = voidkingdashboard_pwd = voidkingtoken = 12345678

5ã€å¯åŠ¨frps./frps -c ./frps.ini
åå°å¯åŠ¨ï¼šscreen ./frps -c ./frps.iniï¼Œç„¶åctrl+A+Dã€‚
6ã€æµ‹è¯•è®¿é—®åœ¨æµè§ˆå™¨è®¿é—® http://120.77.36.182:7500 ï¼Œè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œå³å¯çœ‹åˆ°frp dashboardã€‚
7ã€è®¾ç½®å¼€æœºè‡ªå¯åŠ¨vim /etc/rc.localï¼Œåœ¨exit 0ä¹‹å‰æ·»åŠ ï¼š
nohup /opt/frp/frps -c /opt/frp/frps.ini &amp;
å…¶ä¸­nohupå¯ä»¥çœç•¥ã€‚
nginxåå‘ä»£ç†1ã€æ·»åŠ åŸŸåè§£æfrpåˆ°å…¬ç½‘ipã€‚
2ã€åœ¨/etc/nginx/conf.d/ç›®å½•ä¸­ï¼Œæ·»åŠ frp.voidking.com.confï¼Œå†…å®¹å¦‚ä¸‹ï¼š
server &#123;    listen 80;    server_name frp.voidking.com;    charset utf-8;    location /&#123;        proxy_set_header Host $host;        proxy_set_header X-Forward-For $remote_addr;        proxy_set_header X-Real-IP $remote_addr;        proxy_pass http://127.0.0.1:7500;    &#125;&#125;

3ã€é‡å¯nginx/usr/sbin/nginx -tï¼Œå¦‚æœæç¤ºç¼ºå°‘ç›®å½•ï¼Œé‚£ä¹ˆmkdir -påˆ›å»ºã€‚
/usr/sbin/nginx -s reload
4ã€æµ‹è¯•è®¿é—®è®¿é—® http://frp.voidking.com/ ï¼ŒåŒæ ·å¯ä»¥çœ‹åˆ°dashboardç•Œé¢ã€‚
è‡³æ­¤ï¼ŒæœåŠ¡ç«¯é…ç½®å®Œæˆã€‚
å®¢æˆ·ç«¯é…ç½®windows1ã€è®¿é—®frpé¡¹ç›®ï¼Œä¸‹è½½æœ€æ–°ç‰ˆçš„frpï¼Œè¿™é‡Œä¸‹è½½frp_0.21.0_windows_amd64.zipï¼ˆåŒ…å«æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ï¼‰ã€‚
2ã€è§£å‹frp_0.21.0_windows_amd64.zipï¼Œå¹¶é‡å‘½åä¸ºfrpã€‚
3ã€ç¼–è¾‘frp/frpc.iniæ–‡ä»¶ï¼Œä¿®æ”¹ä¸ºï¼š
[common]server_addr = 120.77.36.182server_port = 7000token = 12345678[web_3480]type = tcplocal_ip = 127.0.0.1local_port = 80remote_port = 3480

server_addræ˜¯æœåŠ¡å™¨ç«¯çš„å…¬ç½‘IPåœ°å€ï¼Œserver_portæ˜¯frpæœåŠ¡ç«¯å£å·ï¼Œauto_tokenæ˜¯è¿æ¥æœåŠ¡å™¨çš„å£ä»¤ï¼Œå¿…é¡»å’ŒæœåŠ¡å™¨ä¿æŒä¸€è‡´ã€‚
web_3480æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´çš„é€šé“åï¼Œæ¯ä¸ªå®¢æˆ·ç«¯å¿…é¡»ä¸ä¸€æ ·ï¼Œremote_portæ˜¯æœåŠ¡å™¨ç«¯å¯¹å¤–æä¾›æœ¬æœºæœåŠ¡çš„ç«¯å£å·ã€‚
4ã€å¯åŠ¨å®¢æˆ·ç«¯shift+å³é”®ï¼Œåœ¨æ­¤å¤„æ‰“å¼€powershellçª—å£ï¼Œç„¶åæ‰§è¡Œï¼š.\frpc.exe -c .\frpc.ini
5ã€æœ¬åœ°å¯åŠ¨webæœåŠ¡ï¼Œåœ¨80ç«¯å£æä¾›æœåŠ¡ã€‚
6ã€æµ‹è¯•è®¿é—®åœ¨æµè§ˆå™¨è®¿é—® http://120.77.36.182:3480 ï¼Œå³å¯çœ‹åˆ°æœ¬åœ°80æœåŠ¡ã€‚
linux1ã€è¿›å…¥/optç›®å½•cd /opt
2ã€è®¿é—®frpé¡¹ç›®ï¼Œä¸‹è½½æœ€æ–°ç‰ˆçš„frpï¼Œè¿™é‡Œä¸‹è½½frp_0.21.0_linux_amd64.tar.gzï¼ˆåŒ…å«æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ï¼‰ã€‚
curl -C - -O -L https://github.com/fatedier/frp/releases/download/v0.21.0/frp_0.21.0_linux_amd64.tar.gz

3ã€è§£å‹å¹¶é‡å‘½åtar -xzvf frp_0.21.0_linux_amd64.tar.gz
mv frp_0.21.0_linux_amd64 frp
4ã€ç¼–è¾‘frps.inicd frp &amp;&amp; vim frpc.iniï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š
[common]server_addr = 120.77.36.182server_port = 7000token = 12345678[ssh_3422]type = tcplocal_ip = 127.0.0.1local_port = 22remote_port = 3422

5ã€å¯åŠ¨å®¢æˆ·ç«¯./frpc -c ./frpc.ini
6ã€æµ‹è¯•ç™»å½•ä½¿ç”¨xshellè¿æ¥æœ¬åœ°æœåŠ¡å™¨ï¼ŒIPå¡«å…¥120.77.36.182ï¼Œç«¯å£å¡«å…¥3422ï¼Œé¡ºåˆ©è¿æ¥ã€‚
7ã€è®¾ç½®å¼€æœºè‡ªå¯åŠ¨vim /etc/rc.localï¼Œåœ¨exit 0ä¹‹å‰æ·»åŠ ï¼š
nohup /opt/frp/frpc -c /opt/frp/frpc.ini &amp;
å…¶ä¸­nohupå¯ä»¥çœç•¥ã€‚
ç»“è¯­è‡³æ­¤ï¼Œå¤§åŠŸå‘Šæˆï¼Œniceã€‚frpå’Œlanproxyç›¸æ¯”ï¼Œå®‰è£…æ›´åŠ ç®€ä¾¿ï¼ˆä¸éœ€è¦javaç¯å¢ƒï¼‰ï¼Œé…ç½®æ›´åŠ æ–¹ä¾¿ï¼ˆå®¢æˆ·ç«¯è‡ªå·±æ§åˆ¶å¤–ç½‘ç«¯å£ï¼‰ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨centos7ä½œä¸ºfrpå¤–ç½‘æœåŠ¡å™¨çš„æ—¶å€™ï¼Œä¸ä¼šå‡ºç°æ— æ³•ä»£ç†22çš„é—®é¢˜ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>nginx</tag>
        <tag>ç½‘ç»œ</tag>
        <tag>å†…ç½‘ç©¿é€</tag>
        <tag>ä»£ç†</tag>
      </tags>
  </entry>
  <entry>
    <title>Kollaå®‰è£…OpenStackå¤šèŠ‚ç‚¹</title>
    <url>/dev-ubuntu16-kolla-openstack-multinode/</url>
    <content><![CDATA[å‰è¨€ã€ŠUbuntu16ä½¿ç”¨Kollaå®‰è£…OpenStackã€‹ä¸€æ–‡ä¸­ï¼Œä½¿ç”¨kollaå®‰è£…äº†å•èŠ‚ç‚¹çš„openstackã€‚
åœ¨å®é™…çš„éƒ¨ç½²ä¸­ï¼Œå½“ç„¶è¦å®‰è£…å¤šèŠ‚ç‚¹çš„openstackï¼Œæœ¬æ–‡å°±æ¥ç ”ç©¶ä¸€ä¸‹åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šä½¿ç”¨kollaå®‰è£…éƒ¨ç½²openstackçš„æ–¹æ³•ã€‚


ç¯å¢ƒVirtualBoxè™šæ‹Ÿæœºä¸‰å°ï¼Œç³»ç»Ÿä¸ºubuntu-16.04.4-server-amd64ï¼Œåˆ†åˆ«ä½œä¸ºæ§åˆ¶èŠ‚ç‚¹ã€ç½‘ç»œèŠ‚ç‚¹å’Œè®¡ç®—èŠ‚ç‚¹ï¼Œç”¨æˆ·åä¸ºvoidking/rootï¼Œå¯†ç ä¸ºvoidkingã€‚æ§åˆ¶èŠ‚ç‚¹4æ ¸8Gå†…å­˜40Gå­˜å‚¨ï¼Œä¸»æœºåä¸ºcontrollerï¼Œeth0çš„IPä¸º192.168.56.110ï¼Œeth1ä¸ºnatä¸Šç½‘ç½‘å¡ï¼Œeth2ä¸ºneutronæœåŠ¡ç½‘ç»œã€‚ç½‘ç»œèŠ‚ç‚¹2æ ¸4Gå†…å­˜40Gå­˜å‚¨ï¼Œä¸»æœºåä¸ºnetworkï¼Œeth0çš„IPä¸º192.168.56.111ï¼Œeth1ä¸ºnatä¸Šç½‘ç½‘å¡ï¼Œeth2ä¸ºneutronæœåŠ¡ç½‘ç»œã€‚è®¡ç®—èŠ‚ç‚¹2æ ¸4Gå†…å­˜40Gå­˜å‚¨ï¼Œä¸»æœºåä¸ºcomputeï¼Œeth0çš„IPä¸º192.168.56.112ï¼Œeth1ä¸ºnatä¸Šç½‘ç½‘å¡ï¼Œeth2ä¸ºneutronæœåŠ¡ç½‘ç»œã€‚
å‡†å¤‡ç½‘ç»œè®¾ç½®åœ¨æ§åˆ¶èŠ‚ç‚¹ä¸Šï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
1ã€åˆ‡æ¢åˆ°rootç”¨æˆ·sudo -i
2ã€vim /etc/network/interfacesï¼Œè®¾ç½®ç½‘å¡ä¸ºï¼š
# This file describes the network interfaces available on your system# and how to activate them. For more information, see interfaces(5).source /etc/network/interfaces.d/*# The loopback network interfaceauto loiface lo inet loopback# The primary network interfaceauto eth0iface eth0 inet staticaddress 192.168.56.110netmask 255.255.255.0auto eth1iface eth1 inet dhcpauto eth2iface eth2 inet manualup ifconfig $IFACE 0.0.0.0 upup ifconfig $IFACE promisc

3ã€å¯ç”¨ç½‘å¡ifup eth2
4ã€ä¿®æ”¹/etc/hostsï¼Œæ·»åŠ ï¼š
192.168.56.110  controller192.168.56.111  network192.168.56.112  compute

ç½‘ç»œèŠ‚ç‚¹å’Œè®¡ç®—èŠ‚ç‚¹å‚è€ƒæ§åˆ¶èŠ‚ç‚¹é…ç½®å³å¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œhostsæ–‡ä»¶åœ¨OpenStackå®‰è£…å®Œæˆåä¼šè¢«ansibleä¿®æ”¹ï¼Œå»ºè®®ä¿ç•™ansibleåˆ›å»ºçš„é‚£ä¸€ä»½ï¼ŒåŸå› å‚è€ƒã€ŠOpenStackè®¡ç®—èŠ‚ç‚¹çš„å¥‡è‘©é—®é¢˜ã€‹ã€‚
pythonåœ¨ä¸‰å°æœºå™¨ä¸Šå®‰è£…pythonsudo apt -y install python-simplejsonä¸å®‰è£…çš„è¯ï¼Œåœ¨ä½¿ç”¨ansibleçš„æ—¶å€™ä¼šæŠ¥é”™/bin/sh: 1: /usr/bin/python: not foundã€‚
å®‰è£…docker1ã€åœ¨ä¸‰å°æœºå™¨ä¸Šå®‰è£…dockercurl -SSL https://get.docker.io | bash
æˆ–è€…ï¼šapt install docker.io
2ã€ä¸ºdockerå’Œkollaåˆ›å»ºé…ç½®æ–‡ä»¶
mkdir -p /etc/systemd/system/docker.service.dvim /etc/systemd/system/docker.service.d/kolla.conf

ä¿®æ”¹ä¸ºï¼š
[Service]MountFlags=shared

3ã€é‡å¯docker
systemctl daemon-reloadsystemctl restart docker

4ã€æŸ¥çœ‹dockerä¿¡æ¯docker info
å¦‚æœæŠ¥é”™çš„è¯ï¼Œå‚è€ƒã€ŠUbuntu16ä½¿ç”¨Kollaå®‰è£…OpenStackã€‹è§£å†³ã€‚
åŠ é€Ÿé•œåƒæ‹‰å–ä½¿ç”¨ Docker çš„æ—¶å€™ï¼Œéœ€è¦ç»å¸¸ä»å®˜æ–¹è·å–é•œåƒï¼Œä½†æ˜¯ç”±äºæ˜¾è€Œæ˜“è§çš„ç½‘ç»œåŸå› ï¼Œæ‹‰å–é•œåƒçš„è¿‡ç¨‹éå¸¸è€—æ—¶ï¼Œä¸¥é‡å½±å“ä½¿ç”¨ Docker çš„ä½“éªŒã€‚å› æ­¤DaoCloudæ¨å‡ºäº†åŠ é€Ÿå™¨å·¥å…·è§£å†³è¿™ä¸ªéš¾é¢˜ï¼Œé€šè¿‡æ™ºèƒ½è·¯ç”±å’Œç¼“å­˜æœºåˆ¶ï¼Œæå¤§æå‡äº†å›½å†…ç½‘ç»œè®¿é—® Docker Hub çš„é€Ÿåº¦ï¼Œç›®å‰å·²ç»æ‹¥æœ‰äº†å¹¿æ³›çš„ç”¨æˆ·ç¾¤ä½“ï¼Œå¹¶å¾—åˆ°äº† Docker å®˜æ–¹çš„å¤§åŠ›æ¨èã€‚
1ã€è®¿é—®DaoCloudå®˜ç½‘ï¼Œæ³¨å†Œä¸€ä¸ªè´¦å·ã€‚
2ã€è®¿é—®é…ç½® Docker åŠ é€Ÿå™¨ï¼Œå¯ä»¥è·å¾—ä¸€ä¸ªä¸“å±åŠ é€Ÿåœ°å€ï¼ˆæ¯æ¬¡è®¿é—®éƒ½ä¼šè·å¾—ä¸åŒçš„åœ°å€ï¼‰ã€‚
3ã€å‚è€ƒDocker åŠ é€Ÿå™¨ï¼Œåˆ›å»ºæˆ–ä¿®æ”¹ /etc/docker/daemon.jsonï¼Œå†…å®¹ä¸ºï¼š
&#123;    &quot;registry-mirrors&quot;: [        &quot;http://2fd0f33c.m.daocloud.io&quot;    ],    &quot;insecure-registries&quot;: []&#125;

4ã€é‡å¯docker
systemctl daemon-reloadsystemctl restart docker

PSï¼šä¹Ÿå¯ä»¥ä½¿ç”¨é˜¿é‡Œäº‘çš„é•œåƒåŠ é€Ÿå™¨ã€‚
å¯†é’¥ç™»å½•1ã€åœ¨æ§åˆ¶èŠ‚ç‚¹ç”Ÿæˆå¯†é’¥ssh-keygenï¼Œè¿ç»­å›è½¦å³å¯ã€‚
2ã€å°†å…¬é’¥å†™å…¥ä¸‰å°æœºå™¨
ssh-copy-id -i .ssh/id_rsa.pub -p 22 voidking@192.168.56.110ssh-copy-id -i .ssh/id_rsa.pub -p 22 voidking@192.168.56.111ssh-copy-id -i .ssh/id_rsa.pub -p 22 voidking@192.168.56.112

3ã€åœ¨ä¸‰å°æœºå™¨æŠŠvoidkingç”¨æˆ·æ·»åŠ è¿›sudoå…å¯†ï¼Œæ–¹ä¾¿ä»¥åçš„æ“ä½œsudo vim /etc/sudoersï¼Œæ·»åŠ 
voidking ALL = NOPASSWD: ALL


æ§åˆ¶èŠ‚ç‚¹ä¸»è¦å‚è€ƒOpenStack, Ansible, and Kolla on Ubuntu 16.04ã€kolla queens on centos7.4å’ŒKolla-Ansibleâ€™s documentation!ã€‚
å®‰è£…ä¾èµ–1ã€å®‰è£…å¹¶å‡çº§pip
apt-get updateapt-get install python-pippip install --upgrade pip

2ã€å®‰è£…ä¾èµ–apt-get -y install python-dev libffi-dev gcc libssl-dev python-selinux
3ã€å®‰è£…ansible
apt-get install software-properties-commonapt-add-repository ppa:ansible/ansibleapt-get updateapt-get install ansible

4ã€vim /etc/ansible/ansible.cfgï¼Œæ·»åŠ å¦‚ä¸‹ï¼š
line 10, add[defaults]host_key_checking=Falsepipelining=Trueforks=100

å®‰è£…Kolla-ansible1ã€å®‰è£…kolla-ansiblepip install kolla-ansible
æŠ¥é”™ï¼šImportError: cannot import name mainï¼Œå‚è€ƒå‡çº§pipåå‡ºç°ImportError: cannot import name mainï¼Œç¼–è¾‘/usr/bin/pipæ–‡ä»¶ï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 9, changefrom pip import __main__if __name__ == &#x27;__main__&#x27;:    sys.exit(__main__._main())

æŠ¥çº¢ï¼šoslo-config 6.4.0 has requirement PyYAML&gt;=3.12, but youâ€™ll have pyyaml 3.11 which is incompatible.å¿½ç•¥ã€‚
2ã€æ‹·è´globals.ymlå’Œpasswords.ymlåˆ°/etc/kollaç›®å½•cp -r /usr/local/share/kolla-ansible/etc_examples/kolla /etc/
3ã€æ‹·è´all-in-oneå’Œmultinodeæ¸…å•æ–‡ä»¶åˆ°å½“å‰ç›®å½•cp /usr/local/share/kolla-ansible/ansible/inventory/* .
4ã€ç”Ÿæˆkollaå¯†ç kolla-genpwdæˆ‘ä»¬éƒ¨ç½²ä¸­ä½¿ç”¨çš„å¯†ç å­˜å‚¨åœ¨/etc/kolla/passwords.ymlæ–‡ä»¶ä¸­ã€‚æ­¤æ–‡ä»¶ä¸­çš„æ‰€æœ‰å¯†ç éƒ½æ˜¯ç©ºç™½çš„ï¼Œå¿…é¡»æ‰‹åŠ¨å¡«å†™æˆ–è¿è¡Œéšæœºå¯†ç ç”Ÿæˆå™¨ã€‚
5ã€é…ç½®multinodeæ–‡ä»¶vim multinodeï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 3, change[control]192.168.56.110 ansible_ssh_user=voidking ansible_ssh_pass=voidking ansible_sudo=voidking ansible_sudo_pass=voidking ansible_become_user=root ansible_become_pass=voidking ansible_become=true# line 12, change[network]192.168.56.111 ansible_ssh_user=voidking ansible_ssh_pass=voidking ansible_sudo=voidking ansible_sudo_pass=voidking ansible_become_user=root ansible_become_pass=voidking ansible_become=true# line 17, change[inner-compute]192.168.56.112 ansible_ssh_user=voidking ansible_ssh_pass=voidking ansible_sudo=voidking ansible_sudo_pass=voidking ansible_become_user=root ansible_become_pass=voidking ansible_become=true# line 21, change[external-compute]192.168.56.112 ansible_ssh_user=voidking ansible_ssh_pass=voidking ansible_sudo=voidking ansible_sudo_pass=voidking ansible_become_user=root ansible_become_pass=voidking ansible_become=true# line 28, comment[monitoring]#monitoring01# line 36, comment[storage]#storage01

6ã€æµ‹è¯•è¿é€šansible -i multinode -m ping allæŠ¥é”™ï¼šERROR! to use the â€˜sshâ€™ connection type with passwords, you must install the sshpass programå®‰è£…sshpassï¼šapt install sshpassç„¶åé‡æ–°æµ‹è¯•è¿é€šã€‚
é…ç½®globals.yml1ã€æŸ¥çœ‹globals.ymlé…ç½®grep -vE &#39;^$|^#&#39; /etc/kolla/globals.yml
2ã€vim /etc/kolla/globals.ymlï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 15,uncommentkolla_base_distro: &quot;centos&quot;# line 18,uncommentkolla_install_type: &quot;binary&quot;# line 21,uncomment and changeopenstack_release: &quot;queens&quot;# line 31,changekolla_internal_vip_address: &quot;192.168.56.120&quot;# line 85,uncomment and changenetwork_interface: &quot;eth0&quot;# line 100,uncomment and changeneutron_external_interface: &quot;eth2&quot;# line 331,uncommentdesignate_backend: &quot;bind9&quot;designate_ns_record: &quot;sample.openstack.org&quot;# line 340,uncomment and changenova_compute_virt_type: &quot;qemu&quot;# othertempest_image_id:tempest_flavor_ref_id:tempest_public_network_id:tempest_floating_network_name:

kolla_internal_vip_addressä¸º192.168.56.120ï¼Œå®ƒæ˜¯ä¸€ä¸ªå’ŒOpenStackå®¿ä¸»æœºå†…ç½‘è¿æ¥ç½‘ç»œï¼ˆeth0 192.168.56.110ï¼‰åŒä¸€ä¸ªç½‘æ®µçš„æœªä½¿ç”¨IPã€‚network_interfaceä¸ºeth0ï¼Œæ„æ€æ˜¯openstackå†…éƒ¨ç½‘ç»œä½¿ç”¨eth0ç½‘å¡ã€‚neutron_external_interfaceä¸ºeth2ï¼Œæ„æ€æ˜¯openstackçš„è™šæ‹Ÿæœºå¤–éƒ¨ç½‘ç»œä½¿ç”¨eth2ç½‘å¡ã€‚å› ä¸ºæ˜¯åœ¨è™šæ‹Ÿæœºä¸­å®‰è£…openstackï¼Œæ‰€ä»¥nova_compute_virt_typeè®¾ç½®ä¸ºqemuã€‚
PSï¼šå®é™…ä¸Šï¼Œkolla_internal_vip_addressæœ€å¥½è®¾ç½®ä¸º192.168.56.110ï¼ŒåŸå› å‚è€ƒã€ŠOpenStackè®¡ç®—èŠ‚ç‚¹çš„å¥‡è‘©é—®é¢˜ã€‹ã€‚
éƒ¨ç½²1ã€åˆå§‹åŒ–kolla-ansible -i ./multinode bootstrap-serversæ—¶é—´å¾ˆä¹…ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚
2ã€é¢„æ£€æŸ¥kolla-ansible -i ./multinode prechecks

3ã€æ‹‰å–é•œåƒkolla-ansible -i ./multinode pullè¿™ä¸€æ­¥çš„æ—¶é—´ç‰¹åˆ«ä¹…ï¼ŒæŒºè€å¿ƒç­‰å¾…ã€‚å¦‚æœæ‹‰å–å¤±è´¥ï¼Œå°±å¤šå°è¯•å‡ æ¬¡ã€‚è¿™é‡ŒéƒåŒå­¦å–å·§ä¸€ä¸‹ï¼Œç›´æ¥æŠŠã€ŠUbuntu16ä½¿ç”¨Kollaå®‰è£…OpenStackã€‹ä¸€æ–‡ä¸­çš„imagesæ‹·è´åˆ°æ§åˆ¶èŠ‚ç‚¹ã€ç½‘ç»œèŠ‚ç‚¹å’Œè®¡ç®—èŠ‚ç‚¹ã€‚
ï¼ˆ1ï¼‰æ‰“åŒ…æ‰€æœ‰imagesdocker save $(docker images | grep -v REPOSITORY | awk &#39;BEGIN&#123;OFS=&quot;:&quot;;ORS=&quot; &quot;&#125;&#123;print $1,$2&#125;&#39;) -o kolla.tar
ï¼ˆ2ï¼‰å¯¼å…¥æ‰€æœ‰imagesdocker load -i kolla.tar
4ã€æŸ¥çœ‹é•œåƒdocker images
5ã€éƒ¨ç½²kolla-ansible -i ./multinode deploy
æµ‹è¯•ä½¿ç”¨openstack1ã€åœ¨æ§åˆ¶èŠ‚ç‚¹å®‰è£…openstackå®¢æˆ·ç«¯pip install python-openstackclient python-glanceclient python-neutronclient --ignore-installed
2ã€ç”Ÿæˆadmin-openrc.shç­‰kolla-ansible post-deploy
3ã€ä½¿adminç¯å¢ƒç”Ÿæ•ˆsource /etc/kolla/admin-openrc.sh
4ã€æŸ¥çœ‹è®¡ç®—æœåŠ¡openstack compute service list
5ã€æŸ¥çœ‹ç½‘ç»œæœåŠ¡openstack network agent list
åˆå§‹åŒ–é…ç½®1ã€æ‰§è¡Œinit-runonceè„šæœ¬. /usr/local/share/kolla-ansible/init-runonce
æ‰§è¡Œåˆå§‹åŒ–ä¹‹å‰ï¼Œå¯ä»¥å‚è€ƒopenstack ä¹‹ Kollaéƒ¨ç½²æŒ‡å—ï¼Œè®¾ç½®ä¸€ä¸‹å¤–éƒ¨ç½‘ç»œã€‚è¿™æ ·ï¼Œå°±å¯ä»¥ä»è·¯ç”±å™¨ç»™è™šæ‹Ÿæœºåˆ†é…IPï¼Œå®‰è£…å®Œè™šæ‹Ÿæœºå°±å¯ä»¥å®¿ä¸»æœºäº’ç›¸pingé€šã€‚æ¯”å¦‚ï¼š
EXT_NET_CIDR=&#x27;192.168.56.0/24&#x27;EXT_NET_RANGE=&#x27;start=192.168.56.200,end=192.168.56.240&#x27;EXT_NET_GATEWAY=&#x27;192.168.56.1&#x27;
è¿™é‡Œé…ç½®çš„ç½‘ç»œèŒƒå›´ï¼Œå¯¹åº”globals.ymlä¸­é…ç½®çš„neutron_external_interfaceï¼Œä¹Ÿå°±æ˜¯eth2ç½‘å¡ã€‚
2ã€æ ¹æ®æç¤ºï¼Œåˆ›å»ºå®ä¾‹
openstack server create \    --image cirros \    --flavor m1.tiny \    --key-name mykey \    --nic net-id=25e6c0ef-6a0a-481c-a08a-46f7ef67ad3e \    demo1

3ã€ç»™demo1å®ä¾‹åˆ†é…æµ®åŠ¨IP
source /etc/kolla/admin-openrc.shopenstack network listopenstack floating ip create public1openstack server add floating ip demo1 10.0.2.157

4ã€æŸ¥çœ‹demo1openstack server list
5ã€è®¿é—®horizonæœåŠ¡curl 192.168.56.120 -L
åœ¨æµè§ˆå™¨è®¿é—® http://192.168.56.120 ï¼Œä½¿ç”¨adminè´¦å·ç™»å½•ï¼Œå¯†ç åœ¨passwords.ymlæ–‡ä»¶ä¸­æŸ¥çœ‹ã€‚less /etc/kolla/passwords.yml | grep keystone_admin_password
è‡³æ­¤ï¼Œä½¿ç”¨kollaå®‰è£…éƒ¨ç½²å¤šèŠ‚ç‚¹openstackæˆåŠŸã€‚
ç½‘ç»œé…ç½®ç½‘ç»œèŠ‚ç‚¹å…³äºç½‘ç»œçš„é…ç½®ï¼Œä¸»è¦å‚è€ƒKollaé…ç½®å®ä¾‹ç½‘ç»œã€‚
1ã€åœ¨ç½‘ç»œèŠ‚ç‚¹ç¼–è¾‘/etc/network/interfacesï¼Œæ·»åŠ ï¼š
auto br-exiface br-ex inet staticaddress 10.0.2.1netmask 255.255.255.0

2ã€å¯ç”¨br-exifup br-ex
3ã€æ·»åŠ è·¯ç”±
ip netnsip netns exec qrouter-9dbabbdd-cc45-42c3-b9e0-9dbbc03e66f1 ip addroute add -net 10.0.0.0/24 gw 10.0.2.153 dev br-ex

é‡å¯åè·¯ç”±å¤±æ•ˆï¼Œå¦‚æœæƒ³è¦æ°¸ä¹…ç”Ÿæ•ˆï¼Œé‚£å°±åœ¨/etc/network/interfacesæ–‡ä»¶çš„å°¾éƒ¨æ·»åŠ ï¼š
up route add -net 10.0.0.0/24 gw 10.0.2.153 dev br-ex

4ã€åœ¨ç½‘ç»œèŠ‚ç‚¹è¿é€šdemo1
ping 10.0.2.157 -c3ping 10.0.0.3 -c3

5ã€è®¾ç½®demo1ä¸Šç½‘
iptables -I INPUT -i eth2 -j ACCEPTiptables -I INPUT -i br-ex -j ACCEPTiptables -t nat -A POSTROUTING -s 10.0.2.0/24 -o eth1 -j MASQUERADEiptables -t nat -A POSTROUTING -s 10.0.0.0/24 -o eth1 -j MASQUERADE

è®¾ç½®æ°¸ä¹…ç”Ÿæ•ˆå‚è€ƒã€ŠLinuxé…ç½®SNATä¸Šç½‘ã€‹ã€‚
æ§åˆ¶èŠ‚ç‚¹1ã€æ·»åŠ è·¯ç”±route add -net 10.0.2.0/24 gw 192.168.56.110 dev eth0åŒæ ·çš„ï¼Œæƒ³è¦è·¯ç”±æ°¸ä¹…ç”Ÿæ•ˆï¼Œä¹Ÿè¦æ·»åŠ åˆ°interfacesæ–‡ä»¶çš„å°¾éƒ¨ã€‚
2ã€åœ¨æ§åˆ¶èŠ‚ç‚¹è¿é€šdemo1ping 10.0.2.157 -c3
3ã€è¿æ¥demo1ssh cirros@10.0.2.157
4ã€æµ‹è¯•å¤–ç½‘è¿é€šping 8.8.8.8 -c3
æ¸…é™¤OpenStackå®‰è£…OpenStackï¼Œä¼šå¯¹å®¿ä¸»æœºçš„ç½‘ç»œæœ‰å¾ˆå¤§çš„å½±å“ã€‚å®‰è£…å®Œæˆåï¼Œå¦‚æœç½‘ç»œç˜«ç—ªï¼Œä¸è¦æ€•ï¼Œè¿˜æœ‰è¡¥æ•‘æªæ–½ï¼šæ¸…é™¤å·²ç»å®‰è£…éƒ¨ç½²çš„OpenStackç¯å¢ƒï¼Œç„¶åé‡æ–°é…ç½®ï¼Œé‡æ–°éƒ¨ç½²ã€‚æ¸…é™¤OpenStackçš„å‘½ä»¤å¦‚ä¸‹ï¼školla-ansible destroy -i ./multinodeÂ  --yes-i-really-really-mean-it
åè®°æœ¬æ–‡çš„ç½‘ç»œè®¾ç½®ä¸åˆç†ï¼Œä½†æ˜¯ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨ã€‚å› ä¸ºå·²ç»å®‰è£…éƒ¨ç½²å®Œæˆï¼Œæ‰€ä»¥å°±ä¸å†æ›´æ”¹äº†ï¼Œåœ¨æ­¤åšä¸€ä¸‹è¡¥å……è¯´æ˜ã€‚æœ¬æ–‡ä¸­eth0ä½œä¸ºç®¡ç†ç½‘å¡ï¼Œeth1ä½œä¸ºä¸Šç½‘ç½‘å¡ï¼Œeth0ä½œä¸ºOpenStackå®¿ä¸»æœºé—´çš„å†…ç½‘ç½‘å¡ï¼Œeth2ä½œä¸ºOpenStackçš„è™šæ‹Ÿæœºå¤–ç½‘ç½‘å¡ã€‚è¿™é‡Œeth0å¤ç”¨äº†ï¼Œæ—¢ä½œä¸ºç®¡ç†ç½‘å¡ï¼Œåˆä½œä¸ºOpenStackå†…ç½‘ç½‘å¡ã€‚æ›´å¥½çš„åšæ³•æ˜¯ï¼Œå†æ·»åŠ ä¸€å—ç½‘å¡ä½œä¸ºOpenStackçš„å†…ç½‘ç½‘å¡ï¼Œä½¿æ¯ä¸ªç½‘å¡åªæœ‰ä¸€ä¸ªèŒè´£ã€‚
åœ¨ç‰©ç†æœºä¸­å®‰è£…OpenStackçš„è¯ï¼Œå¯ä»¥å‚è€ƒã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”neutronç¯‡ã€‹ã€‚æ§åˆ¶èŠ‚ç‚¹ä¸€ä¸ªç½‘å¡ï¼Œç”¨æ¥ä¸Šç½‘å’Œç®¡ç†ï¼›ç½‘ç»œèŠ‚ç‚¹ä¸‰ä¸ªç½‘å¡ï¼Œä¸€å¼ ç”¨æ¥ä¸Šç½‘å’Œç®¡ç†ï¼Œä¸€å¼ ç”¨æ¥OpenStackå®¿ä¸»æœºå†…ç½‘è¿æ¥ï¼Œä¸€å¼ ç”¨æ¥OpenStackè™šæ‹Ÿæœºå¤–ç½‘è¿æ¥ï¼›è®¡ç®—èŠ‚ç‚¹ä¸¤ä¸ªç½‘å¡ï¼Œä¸€å¼ ç”¨æ¥ä¸Šç½‘å’Œç®¡ç†ï¼Œä¸€å¼ ç”¨æ¥OpenStackå®¿ä¸»æœºå†…ç½‘è¿æ¥ã€‚
è¿˜æœ‰ï¼Œåœ¨ç‰©ç†æœºå®‰è£…OpenStackæ—¶ï¼Œè¦å…³é—­å…¶ä»–è™šæ‹ŸåŒ–å·¥å…·ï¼Œæ¯”å¦‚VirtualBoxæˆ–è€…VMwareï¼Œå¦åˆ™ä¼šæ— æ³•åˆ›å»ºå®ä¾‹ï¼ŒæŸ¥çœ‹æ—¥å¿—tail -n 20 /var/lib/docker/volumes/kolla_logs/_data/nova/nova-compute.logï¼Œå‡ºç°KVM Error â€“ ioctl(KVM_CREATE_VM) failed: 16 Device or Resource busyé—®é¢˜ã€‚
ä¹¦ç­¾Kollaâ€™s documentation!
Kollaè®©OpenStackéƒ¨ç½²æ›´è´´å¿ƒ
Kollaå®‰è£…Ocataå•èŠ‚ç‚¹
kollaéƒ¨ç½²openstack ocataç‰ˆ
Install and configure OpenStack Ocata with Kolla as a standalone
Kolla OpenStackç³»ç»Ÿè§†é¢‘è¯¾ç¨‹
åˆ©ç”¨kollaå¿«é€Ÿæ­å»ºopenstack-pikeå¤šèŠ‚ç‚¹
]]></content>
      <categories>
        <category>engineering</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
        <tag>ansible</tag>
        <tag>sshpass</tag>
        <tag>kolla</tag>
      </tags>
  </entry>
  <entry>
    <title>Ansibleå®æˆ˜</title>
    <url>/dev-ansible-in-action/</url>
    <content><![CDATA[ç›®æ ‡æœ¬æ–‡ï¼Œç›®æ ‡æ˜¯ä½¿ç”¨ansibleå®‰è£…lnmp+haproxyã€‚å…±å››å°ä¸»æœºï¼Œéƒ½æ˜¯ubuntu14 serverç‰ˆï¼Œä¸€å°ä½œä¸ºansibleç®¡ç†æœºï¼Œå¦å¤–ä¸‰å°ä½œä¸ºansibleå®¢æˆ·æœºç”¨æ¥éƒ¨ç½²æœåŠ¡ã€‚å®¢æˆ·æœºAå®‰è£…nginx+php+mysqlï¼Œå®¢æˆ·æœºBå®‰è£…nginx+phpï¼Œå®¢æˆ·æœºCå®‰è£…haproxyç”¨æ¥è´Ÿè½½å‡è¡¡ã€‚å¦‚ä¸‹å›¾ï¼š


è®¾è®¡é¡¹ç›®ç»“æ„å‚è€ƒæœ€ä½³å®è·µ-Content Organizationï¼Œå¦‚ä¸‹å›¾ï¼š
æ³¨æ„ç‚¹ï¼š

è§’è‰²åˆ†é…ç®€å•æ˜ç¡®ã€‚
åœ¨hostsä¸­åˆ†ç»„æ·»åŠ å˜é‡ï¼ŒæŒ‡å®šå®‰è£…è½¯ä»¶ã€‚
äºŒæ¬¡æ‰§è¡Œè„šæœ¬æ—¶ä¸èƒ½å½±å“å·²ç»å®‰è£…çš„æœåŠ¡ã€‚

å®‰è£…æµç¨‹1ã€æ·»åŠ å¯†é’¥2ã€è®¾ç½®sudoå…å¯†3ã€æ›´æ–°å®‰è£…æº4ã€æ—¶é—´åŒæ­¥5ã€å®‰è£…nginx+php+mysql+haproxy6ã€æ£€æŸ¥å®‰è£…
å®è·µæ–‡ä»¶å‡†å¤‡1ã€åˆ›å»ºé¡¹ç›®lnmpmkdir lnmp &amp;&amp; cd lnmp
2ã€åˆ›å»ºè§’è‰²ç›®å½•mkdir rolesmkdir -p roles/&#123;1_key,2_sudo,3_sources,4_chrony,5_software,6_check&#125;/&#123;tasks,handlers,vars,files,templates&#125;
3ã€åˆ›å»ºå˜é‡ç›®å½•mkdir group_vars host_vars
4ã€åˆ›å»ºhostsæ–‡ä»¶ï¼Œåˆ†é…å®‰è£…ç»„ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
[base]192.168.56.102192.168.56.103192.168.56.104[nginx_php_mysql]192.168.56.102[nginx_php]192.168.56.103[haproxy]192.168.56.104[base:vars]install_nginx=falseinstall_php=falseinstall_mysql=falseinstall_haproxy=false[nginx_php_mysql:vars]install_nginx=trueinstall_php=trueinstall_mysql=trueinstall_haproxy=false[nginx_php:vars]install_nginx=trueinstall_php=trueinstall_mysql=falseinstall_haproxy=false[haproxy:vars]install_nginx=falseinstall_php=falseinstall_mysql=falseinstall_haproxy=true

5ã€åˆ›å»ºsite.ymlæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
---- hosts: all  gather_facts: false  roles:    - 1_key    - 2_sudo    - 3_sources    - 4_chrony    - 5_software    - 6_check

6ã€å…³é—­ç¬¬ä¸€æ¬¡ä½¿ç”¨ansibleè¿æ¥å®¢æˆ·ç«¯æ—¶å‘½ä»¤æç¤ºsudo vim /etc/ansible/ansible.cfgï¼Œå¦‚ä¸‹ä¿®æ”¹
# line 62, uncommenthost_key_checking = False

æ·»åŠ å¯†é’¥1ã€è®¾ç½®ç”¨æˆ·å’Œå¯†ç vim group_vars/base.ymlï¼Œå†…å®¹ä¸ºï¼š
---ansible_ssh_user: voidkingansible_ssh_pass: voidkingansible_sudo: voidkingansible_sudo_pass: voidking

2ã€vim test.ymlï¼Œå†…å®¹ä¸ºï¼š
---- hosts: all  vars_files:    - group_vars/base.yml  roles:    - 1_key

3ã€vim roles/1_key/tasks/main.ymlï¼Œå†…å®¹ä¸ºï¼š
---- name: copy public key  copy:    src: /home/voidking/.ssh/id_rsa.pub    dest: /home/voidking/.ssh/id_rsa.pub.tmp    owner: voidking    group: voidking    mode: 0600    force: yes- name: add public key  shell: cd /home/voidking/.ssh &amp;&amp; cat id_rsa.pub.tmp | tee &gt;&gt; authorized_keys

4ã€vim test_hostsï¼Œå†…å®¹ä¸ºï¼š
[test]192.168.56.102

5ã€æ‰§è¡Œè„šæœ¬
ansible-playbook test.yml -i test_hosts --syntax-checkansible-playbook test.yml -i test_hosts

5ã€åœ¨å®¢æˆ·ç«¯æŸ¥çœ‹ç»“æœll .ssh
6ã€æµ‹è¯•ç™»å½•ssh voidking@192.168.56.102
sudoå…å¯†1ã€vim test.ymlï¼Œå†…å®¹ä¸ºï¼š
---- hosts: all  vars_files:    - group_vars/base.yml  roles:    #- 1_key    - 2_sudo

2ã€vim roles/2_sudo/tasks/main.ymlï¼Œå†…å®¹ä¸ºï¼š
---- name: add sudo user  shell: &#x27;sudo sh -c &quot;echo voidking ALL = NOPASSWD: ALL &gt;&gt; /etc/sudoers&quot;&#x27;  #shell: &#x27;echo &quot;voidking ALL = NOPASSWD: ALL&quot; | sudo tee &gt;&gt; /etc/sudoers&#x27;

3ã€æ‰§è¡Œè„šæœ¬
ansible-playbook test.yml -i test_hosts --syntax-checkansible-playbook test.yml -i test_hosts -s


4ã€åœ¨å®¢æˆ·ç«¯æŸ¥çœ‹ç»“æœsudo ls
sudoå…å¯†2ä¸Šé¢çš„æ–¹æ³•ï¼Œè™½ç„¶æˆåŠŸæ·»åŠ äº†sudoï¼Œä½†æ˜¯ä»æç¤ºæˆ‘ä»¬çœ‹å‡ºï¼Œåœ¨shellæ¨¡å—ä¸­sudoé©¬ä¸Šå°±ä¸èƒ½ä½¿ç”¨äº†ã€‚
1ã€vim roles/2_sudo/tasks/main.ymlï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š
---- name: add sudo user  become_user: root  become: true  shell: &quot;echo voidking ALL = NOPASSWD: ALL &gt;&gt; /etc/sudoers&quot;

2ã€æ‰§è¡Œè„šæœ¬
ansible-playbook test.yml -i test_hosts --syntax-checkansible-playbook test.yml -i test_hosts


æ›´æ–°å®‰è£…æº1ã€vim test.ymlï¼Œå†…å®¹ä¸ºï¼š
---- hosts: all  vars_files:    - group_vars/base.yml  roles:    #- 1_key    #- 2_sudo    - 3_sources

2ã€vim roles/3_sources/files/sources.listï¼Œå†…å®¹ä¸ºï¼š
deb http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiversedeb http://cn.archive.ubuntu.com/ubuntu/ trusty-security main restricted universe multiversedeb http://cn.archive.ubuntu.com/ubuntu/ trusty-updates main restricted universe multiversedeb http://cn.archive.ubuntu.com/ubuntu/ trusty-backports main restricted universe multiverse##æ¸¬è©¦ç‰ˆæºdeb http://cn.archive.ubuntu.com/ubuntu/ trusty-proposed main restricted universe multiverse# æºç¢¼deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiversedeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-security main restricted universe multiversedeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-updates main restricted universe multiversedeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-backports main restricted universe multiverse##æ¸¬è©¦ç‰ˆæºdeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-proposed main restricted universe multiverse# Canonical åˆä½œå¤¥ä¼´å’Œé™„åŠ # deb http://archive.canonical.com/ubuntu/ trusty partner# deb http://extras.ubuntu.com/ubuntu/ trusty main

3ã€vim roles/3_sources/tasks/main.ymlï¼Œå†…å®¹ä¸ºï¼š
---- name: replace sources.list  copy:    src: ../files/sources.list    dest: /etc/apt/sources.list    force: yes- name: update  become_user: root  become: true  shell: apt update- name: upgrade  become_user: root  become: true  apt:    upgrade: yes

4ã€æ‰§è¡Œè„šæœ¬
ansible-playbook test.yml -i test_hosts --syntax-checkansible-playbook test.yml -i test_hosts

æ—¶é—´åŒæ­¥ç®¡ç†æœºå‡†å¤‡1ã€ç®¡ç†æœºå®‰è£…chronyapt -y install chrony
2ã€é‡å¯chronyservice chrony restart
3ã€æ‹·è´chrony.confcp /etc/chrony/chrony.conf roles/4_chrony/files/
4ã€vim roles/4_chrony/files/chrony.confï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 20,comment#server 0.debian.pool.ntp.org offline minpoll 8#server 1.debian.pool.ntp.org offline minpoll 8#server 2.debian.pool.ntp.org offline minpoll 8#server 3.debian.pool.ntp.org offline minpoll 8# line 24,addserver 192.168.56.101 iburst

playbooké…ç½®1ã€vim test.ymlï¼Œå†…å®¹ä¸ºï¼š
---- hosts: all  vars_files:    - group_vars/base.yml  roles:    #- 1_key    #- 2_sudo    #- 3_sources    - 4_chrony

2ã€vim group_vars/base.ymlï¼Œå†…å®¹ä¸ºï¼š
---ansible_ssh_user: voidkingansible_ssh_pass: voidkingansible_sudo: voidkingansible_sudo_pass: voidkingansible_become_user: rootansible_become_pass: voidkingansible_become: true

3ã€vim roles/4_chrony/tasks/main.ymlï¼Œå†…å®¹ä¸ºï¼š
---- name: install chrony  apt:    name: chrony    state: latest- name: change config  copy:     src: ../files/chrony.conf     dest: /etc/chrony/chrony.conf    owner: root    group: root    mode: 0644    force: yes- name: restart chrony  service:    name: chrony    state: restarted

4ã€æ‰§è¡Œè„šæœ¬
ansible-playbook test.yml -i test_hosts --syntax-checkansible-playbook test.yml -i test_hosts

5ã€åœ¨å®¢æˆ·æœºéªŒè¯chronychronyc sources
å®‰è£…æ ¸å¿ƒè½¯ä»¶1ã€vim test_hostsï¼Œå†…å®¹ä¸ºï¼š
[test]192.168.56.102[test:vars]install_nginx=trueinstall_php=trueinstall_mysql=trueinstall_haproxy=true

2ã€vim test.ymlï¼Œå†…å®¹ä¸ºï¼š
---- hosts: all  vars_files:    - group_vars/base.yml  roles:    #- 1_key    #- 2_sudo    #- 3_sources    #- 4_chrony    - 5_software

3ã€vim roles/5_software/tasks/main.ymlï¼Œå†…å®¹ä¸ºï¼š
---- name: install nginx  apt:    name: nginx    state: latest  when: install_nginx- name: install php  apt:    name: &quot;&#123;&#123;item&#125;&#125;&quot;    state: latest    update_cache: yes  with_items:    - php5    - libapache2-mod-php5    - php5-mcrypt    - php5-curl    - php5-imagick    - php5-cli    - php5-json    - php5-fpm    - php5-mysql  when: install_php- name: install mysql  apt:    name: &quot;&#123;&#123;item&#125;&#125;&quot;    state: latest  with_items:    - mysql-common    - mysql-server    - mysql-client    - python-mysqldb  when: install_mysql- name: config mysql passwd  mysql_user:    login_user: root    login_password: &quot;\n&quot;    name: root    password: &quot;voidking&quot;    host: &quot;&#123;&#123;item&#125;&#125;&quot;    priv: &#x27;*.*:ALL,GRANT&#x27;    state: present    check_implicit_admin: yes  with_items:    - &quot;localhost&quot;    - &quot;%&quot;  when: install_mysql- name: comment bind-address  shell: sed -i &#x27;s/^bind-address/#bind-address/g&#x27; /etc/mysql/my.cnf  when: install_mysql- name: restart mysql service  service:     name: mysql     state: restarted    enabled: true  when: install_mysql- name: install haproxy  apt:    name: haproxy    state: latest  environment:    RUNLEVEL: 1  when: install_haproxy- name: config haproxy  shell: sed -i &#x27;s/ENABLED=0/ENABLED=1/g&#x27; /etc/default/haproxy  when: install_haproxy- name: config haproxy port  copy:     src: ../files/haproxy.cfg    dest: /etc/haproxy/haproxy.cfg    force: yes  when: install_haproxy- name: restart haproxy  service:    name: haproxy    state: restarted  when: install_haproxy

4ã€vim roles/5_software/files/haproxy.cfgï¼Œå†…å®¹ä¸º
global  log /dev/log    local0  log /dev/log    local1 notice  chroot /var/lib/haproxy  user haproxy  group haproxy  daemondefaults  log     global  mode    http  option  httplog  option  dontlognull  contimeout 5000  clitimeout 50000  srvtimeout 50000  errorfile 400 /etc/haproxy/errors/400.http  errorfile 403 /etc/haproxy/errors/403.http  errorfile 408 /etc/haproxy/errors/408.http  errorfile 500 /etc/haproxy/errors/500.http  errorfile 502 /etc/haproxy/errors/502.http  errorfile 503 /etc/haproxy/errors/503.http  errorfile 504 /etc/haproxy/errors/504.httpfrontend http_front  bind *:8080  stats uri /haproxy?stats  default_backend http_backbackend http_back  balance roundrobin  option httpchk GET /index.html  option forwardfor header X-Forwarded-For  server node1 192.168.56.102:80 check inter 2000 rise 3 fall 3 weight 30  server node2 192.168.56.103:80 check inter 2000 rise 3 fall 3 weight 30

5ã€æ‰§è¡Œè„šæœ¬
ansible-playbook test.yml -i test_hosts --syntax-checkansible-playbook test.yml -i test_hosts

6ã€åœ¨å®¢æˆ·æœºæµ‹è¯•mysql -uroot -p -h 192.168.56.102
curl localhost
curl localhost:8080
æ•´åˆæ‰€æœ‰æ­¥éª¤1ã€æ‰§è¡Œè„šæœ¬
ansible-playbook site.yml -i hosts --syntax-checkansible-playbook site.yml -i hosts

2ã€æŸ¥çœ‹å®‰è£…
curl 192.168.56.102curl 192.168.56.103curl 192.168.56.104:8080

æ£€æŸ¥å®‰è£…1ã€vim site.ymlï¼Œä¿®æ”¹ä¸ºï¼š
---- hosts: all  gather_facts: false  roles:    #- 1_key    #- 2_sudo    #- 3_sources    #- 4_chrony    #- 5_software    - 6_check

2ã€vim roles/6_check/tasks/main.ymlï¼Œå†…å®¹ä¸ºï¼š
---- name: copy index.html  template:    src: ../templates/index.j2    dest: /usr/share/nginx/html/index.html    force: yes  when: install_nginx


3ã€vim roles/6_check/templates/index.j2ï¼Œå†…å®¹ä¸ºï¼š
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;Home Page&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &#123;&#123; ansible_eth0.ipv4.address &#125;&#125;&lt;/body&gt;&lt;/html&gt;

PSï¼šæŸ¥çœ‹å˜é‡ansible 192.168.56.102 -m setup &gt; var.txt
4ã€æ‰§è¡Œè„šæœ¬
ansible-playbook site.yml -i hosts --syntax-checkansible-playbook site.yml -i hosts

5ã€æµ‹è¯•è®¿é—®curl 192.168.56.104:8080å¤šæ¬¡æ‰§è¡Œï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªä¸åŒçš„IPä¼šæ¥å›åˆ‡æ¢ã€‚
æºç åˆ†äº«é¡¹ç›®åœ°å€ï¼šhttps://github.com/voidking/lnmp.git
ä¹¦ç­¾Ansible Documentation
Ansibleä¸­æ–‡æƒå¨æŒ‡å—
Ansibleç²¾è®²
çƒ‚æ³¥ï¼šé«˜è´Ÿè½½å‡è¡¡å­¦ä¹ haproxyä¹‹å®‰è£…ä¸é…ç½®
HAproxy é…ç½®å‚æ•°è¯¦è§£
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
        <tag>ansible</tag>
      </tags>
  </entry>
  <entry>
    <title>Ansible Playbooks</title>
    <url>/dev-ansible-playbooks/</url>
    <content><![CDATA[Playbooksç®€ä»‹ä¸ad-hocä»»åŠ¡æ‰§è¡Œæ¨¡å¼ç›¸æ¯”ï¼ŒPlaybooksä½¿ç”¨ansibleæ˜¯ä¸€ç§å®Œå…¨ä¸åŒçš„æ–¹å¼ï¼Œå¹¶ä¸”åŠŸèƒ½ç‰¹åˆ«å¼ºå¤§ã€‚
ç®€è€Œè¨€ä¹‹ï¼Œplaybooksæ˜¯çœŸæ­£ç®€å•çš„é…ç½®ç®¡ç†å’Œå¤šæœºå™¨éƒ¨ç½²ç³»ç»Ÿçš„åŸºç¡€ï¼Œä¸å·²æœ‰çš„ç³»ç»Ÿä¸åŒï¼Œå¹¶ä¸”éå¸¸é€‚åˆéƒ¨ç½²å¤æ‚çš„åº”ç”¨ç¨‹åºã€‚
Playbookså¯ä»¥å£°æ˜é…ç½®ï¼Œä½†å®ƒä»¬ä¹Ÿå¯ä»¥åè°ƒä»»ä½•æ‰‹åŠ¨æœ‰åºæµç¨‹çš„æ­¥éª¤ï¼Œå³ä½¿ä¸åŒçš„æ­¥éª¤å¿…é¡»æŒ‰ç…§ç‰¹å®šé¡ºåºåœ¨æœºå™¨ç»„ä¹‹é—´æ¥å›è·³è½¬ã€‚å®ƒä»¬å¯ä»¥åŒæ­¥æˆ–å¼‚æ­¥å¯åŠ¨ä»»åŠ¡ã€‚æ›´å¤šplaybooksçš„ä»‹ç»å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚


Playbooksä»¥YAMLæ ¼å¼è¡¨ç¤ºï¼ˆè¯·å‚é˜…YAMLè¯­æ³•ï¼‰ï¼Œå…·æœ‰æœ€å°‘çš„è¯­æ³•ï¼Œå®ƒä¸æ˜¯ç¼–ç¨‹è¯­è¨€æˆ–è„šæœ¬ï¼Œè€Œæ˜¯é…ç½®æˆ–è¿›ç¨‹çš„æ¨¡å‹ã€‚
æ¯ä¸ªå‰§æœ¬ç”±åˆ—è¡¨ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªâ€œæˆå‰§â€ç»„æˆã€‚æˆå‰§çš„ç›®æ ‡æ˜¯å°†ä¸€ç»„ä¸»æœºæ˜ å°„åˆ°ä¸€äº›å®šä¹‰æ˜ç¡®çš„è§’è‰²ï¼Œç”±ansibleè°ƒç”¨ä»»åŠ¡è¡¨ç¤ºã€‚åœ¨åŸºæœ¬çº§åˆ«ï¼Œä»»åŠ¡åªä¸è¿‡æ˜¯å¯¹ansibleæ¨¡å—çš„è°ƒç”¨ï¼ˆè¯·å‚é˜…ä½¿ç”¨æ¨¡å—ï¼‰ã€‚
é€šè¿‡ç¼–å†™å¤šä¸ªâ€œæˆå‰§â€çš„å‰§æœ¬ï¼Œå¯ä»¥ç¼–æ’å¤šæœºéƒ¨ç½²ï¼Œåœ¨WebæœåŠ¡å™¨ç»„ä¸­çš„æ‰€æœ‰è®¡ç®—æœºä¸Šè¿è¡ŒæŸäº›æ­¥éª¤ï¼Œç„¶ååœ¨æ•°æ®åº“æœåŠ¡å™¨ç»„ä¸Šæ‰§è¡ŒæŸäº›æ­¥éª¤ï¼Œç„¶ååœ¨WebæœåŠ¡å™¨ç»„ä¸Šæ‰§è¡Œæ›´å¤šå‘½ä»¤ï¼Œç­‰ç­‰ã€‚ã€‚
ä½ å¯ä»¥æœ‰å¾ˆå¤šæˆå‰§å½±å“ä½ çš„ç³»ç»Ÿåšä¸åŒçš„äº‹æƒ…ã€‚è¿™å¹¶ä¸æ˜¯è¯´ä½ åªæ˜¯å®šä¹‰äº†ä¸€ä¸ªç‰¹å®šçš„çŠ¶æ€æˆ–æ¨¡å‹ï¼Œè€Œæ˜¯å¯ä»¥åœ¨ä¸åŒçš„æ—¶é—´è¿è¡Œä¸åŒçš„æˆå‰§ã€‚
Playbooks Demoä»¥ä¸‹æ˜¯åªåŒ…å«ä¸€ä¸ªæˆå‰§çš„å‰§æœ¬ï¼š
---- hosts: webservers  vars:    http_port: 80    max_clients: 200  remote_user: root  tasks:  - name: ensure apache is at the latest version    yum:      name: httpd      state: latest  - name: write the apache config file    template:      src: /srv/httpd.j2      dest: /etc/httpd.conf    notify:    - restart apache  - name: ensure apache is running    service:      name: httpd      state: started  handlers:    - name: restart apache      service:        name: httpd        state: restarted


æ–‡ä»¶å¼€å¤´ä¸‰ä¸ªæ¨ªæ ä»£è¡¨yamlæ–‡ä»¶ã€‚
hostsè¡¨ç¤ºä¸€ä¸ªä¸»æœºç»„ã€‚
tasksè¡¨ç¤ºåŠ¨ä½œé›†åˆã€‚
nameæ˜¯ä¸€ä¸ªæ³¨é‡Šè¯´æ˜ã€‚
yumå’Œä¸‹é¢ä¸¤è¡Œï¼Œè¡¨ç¤ºä½¿ç”¨yumå®‰è£…æœ€æ–°ç‰ˆçš„httpdã€‚
templateå’Œä¸‹é¢ä¸¤è¡Œï¼Œè¡¨ç¤ºä½¿ç”¨ansibleçš„templateæ¨¡å—ä¼ è¾“/srv/httpd.j2ä½œä¸ºå®¢æˆ·æœºçš„/etc/httpd.confã€‚å’Œcopyç›¸æ¯”ï¼Œtemplateæ”¯æŒjinjaè¯­æ³•ã€‚
notifyå’Œä¸‹é¢ä¸€è¡Œï¼Œè¡¨ç¤ºä¼ è¾“æˆåŠŸåè§¦å‘é‡å¯apacheå‘½ä»¤ã€‚å®ƒéœ€è¦å’Œhandlersç»„åˆä½¿ç”¨ã€‚
handlersä¸­çš„nameå’Œnotifyä¸­çš„ä¿¡æ¯è¦å®Œå…¨ç›¸åŒã€‚serviceå’Œä¸‹é¢ä¸¤è¡Œï¼Œè¡¨ç¤ºé‡å¯httpdã€‚

Playbookså¯ä»¥åŒ…å«å¤šä¸ªæˆå‰§ã€‚æ‚¨å¯èƒ½æœ‰ä¸€ä¸ªé¦–å…ˆé’ˆå¯¹WebæœåŠ¡å™¨ï¼Œç„¶åæ˜¯æ•°æ®åº“æœåŠ¡å™¨çš„playbookã€‚ä¾‹å¦‚ï¼š
---- hosts: webservers  remote_user: root  tasks:  - name: ensure apache is at the latest version    yum:      name: httpd      state: latest  - name: write the apache config file    template:      src: /srv/httpd.j2      dest: /etc/httpd.conf- hosts: databases  remote_user: root  tasks:  - name: ensure postgresql is at the latest version    yum:      name: postgresql      state: latest  - name: ensure that postgresql is started    service:      name: postgresql      state: started

å…¥é—¨å®ä¾‹ç›®æ ‡ï¼šç¼–å†™ä¸€ä¸ªplaybookï¼Œåœ¨å®¢æˆ·æœºä¸Šå®‰è£…chronyï¼Œç„¶åæ£€æŸ¥å¯åŠ¨æƒ…å†µã€‚
1ã€æ–°å»ºchrony.ymlï¼Œå†…å®¹ä¸ºï¼š
---- hosts: commonservers  tasks:  - name: install chrony    apt:      name: chrony      state: latest    notify:    - restart chrony  - name: ensure chrony is running    service:      name: chrony      state: started  handlers:    - name: restart chrony      service:        name: chrony        state: restarted

ä¸Šé¢çš„playbookä¸­ç”¨åˆ°äº†aptæ¨¡å—ï¼Œå¦‚æœæœ‰ç–‘é—®å¯ä»¥æŸ¥çœ‹å¸®åŠ©ï¼Œansible-doc aptã€‚å®é™…ä¸Šï¼Œæœ‰ä¸€ç§æ›´åŠ ç®€å•çš„å†™æ³•ï¼Œå°±æ˜¯æŠŠaptæ¨¡å—æ¢æˆcommandæ¨¡å—ï¼Œç„¶åç›´æ¥å†™å‘½ä»¤ã€‚
2ã€æ£€æŸ¥playbookansible-playbook chrony.yml --syntax-check
3ã€ä»¥sudoæƒé™æ‰§è¡Œplaybookansible-playbook chrony.yml --user=voidking --private-key=/home/voidking/.ssh/id_rsa -s
4ã€åœ¨å®¢æˆ·æœºæµ‹è¯•chronyc sources
è§’è‰²å¦‚æœéœ€è¦å°†ä¸€ä¸ªå¤§æ–‡ä»¶æ‹†åˆ†ä¸ºå„ä¸ªå°æ–‡ä»¶ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„å°±æ˜¯includeï¼Œè¿™ä¹Ÿæ˜¯åŸå…ˆansibleæ‹†åˆ†æ–‡ä»¶çš„åšæ³•ã€‚å¦‚ä»Šansibleä½¿ç”¨rolesæ¥æ‹†åˆ†æ–‡ä»¶ï¼Œå°†nginxã€mysqlç­‰åˆ†ä¸ºå„ä¸ªè§’è‰²ï¼Œåœ¨å„ä¸ªè§’è‰²å†…å®šä¹‰å…·ä½“çš„å°ä»»åŠ¡ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚å¦ä¸€æ–¹é¢ï¼Œç±»ä¼¼äºphpç±»çš„è‡ªåŠ¨åŠ è½½ï¼ŒrolesåŸºäºä¸€ä¸ªå·²çŸ¥çš„æ–‡ä»¶ç»“æ„ï¼Œå¯ä»¥è‡ªåŠ¨å»åŠ è½½æŸäº›vars_filesã€tasksã€handlersç­‰ã€‚
ç›®æ ‡ï¼šä½¿ç”¨è§’è‰²çš„æ–¹å¼ï¼Œç¼–å†™é…ç½®playbookï¼Œåœ¨å®¢æˆ·æœºä¸Šå®‰è£…chronyï¼Œç„¶åæ£€æŸ¥å¯åŠ¨æƒ…å†µã€‚
1ã€åˆ›å»ºchronyè§’è‰²ç›®å½•
mkdir -p roles/chrony/tasksmkdir -p roles/chrony/handlers

2ã€åˆ›å»ºæ€»çš„å…¥å£æ–‡ä»¶site.ymlï¼Œå†…å®¹ä¸ºï¼š
---- hosts: commonservers  roles:    - chrony

3ã€åˆ›å»ºå®‰è£…å‰§æœ¬vim roles/chrony/tasks/main.ymlï¼Œå†…å®¹ä¸ºï¼š
---- name: install chrony  apt:    name: chrony    state: latest  notify:  - restart chrony- name: ensure chrony is running  service:    name: chrony    state: started


vim roles/chrony/handlers/main.ymlï¼Œå†…å®¹ä¸ºï¼š
---- name: restart chrony  service:    name: chrony    state: restarted

4ã€ä»¥sudoæƒé™æ‰§è¡Œplaybookansible-playbook site.yml --user=voidking --private-key=/home/voidking/.ssh/id_rsa -s

5ã€åœ¨å®¢æˆ·æœºæµ‹è¯•chronyc sources
ç®€å•ç¼–ç¨‹å˜é‡---- hosts: commonservers  vars:    pre1: all info is     pre2: hostname is  tasks:  - name: register vars    shell: hostname    register: info  - name: display info    debug: msg=&quot;&#123;&#123;pre1&#125;&#125; &#123;&#123;info&#125;&#125;&quot;  - name: display hostname    debug: msg=&quot;&#123;&#123;pre2&#125;&#125; &#123;&#123;info.stdout&#125;&#125;&quot;

è¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼šä½¿ç”¨ansible-playbookæ‰§è¡Œå‘½ä»¤ï¼ˆä½¿ç”¨shell/commandæ¨¡å—ï¼‰ï¼Œé»˜è®¤ä¸æ˜¾ç¤ºæ ‡å‡†è¾“å‡º/æ ‡å‡†å¤±è´¥ï¼Œåªèƒ½çœ‹åˆ°æ‰§è¡ŒæˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚å¦‚æœæƒ³è¦æ˜¾ç¤ºæ ‡å‡†è¾“å‡º/æ ‡å‡†å¤±è´¥ï¼Œå¿…é¡»è¦ä½¿ç”¨å˜é‡ï¼Œå°±åƒä¸Šé¢çš„è¿™ä¸ªä¾‹å­ä¸€æ ·ã€‚
åŸºæœ¬å¾ªç¯---- hosts: commonservers  tasks:  - name: loops demo    debug: msg=&quot;&#123;&#123;item&#125;&#125;&quot;    with_items:      - one      - two      - three


å¾ªç¯å­—å…¸---- hosts: commonservers  tasks:  - name: loops dict    debug: msg=&quot;key -&gt; &#123;&#123;item.key&#125;&#125;,value -&gt; &#123;&#123;item.value&#125;&#125;&quot;    with_items:      - &#123;key: 1, value: &quot;one&quot;&#125;      - &#123;key: 2, value: &quot;two&quot;&#125;      - &#123;key: 3, value: &quot;three&quot;&#125;


åµŒå¥—å¾ªç¯---- hosts: commonservers  tasks:  - name: loops2     debug: msg=&quot;item0 -&gt; &#123;&#123;item[0]&#125;&#125;,item1 -&gt; &#123;&#123;item[1]&#125;&#125;&quot;    with_nested:      - [&#x27;1&#x27;,&#x27;2&#x27;]      - [&#x27;one&#x27;,&#x27;two&#x27;,&#x27;three&#x27;]


æ•£åˆ—å¾ªç¯---- hosts: commonservers  vars:    user:       voidking:        name: voidking        tel: 17600000000      haojin:        name: haojin        tel: 15100000000  tasks:  - name: loops3     debug: msg=&quot;key -&gt; &#123;&#123;item.key&#125;&#125;,value -&gt; &#123;&#123;item.value&#125;&#125;&quot;    with_dict:      - &quot;&#123;&#123;user&#125;&#125;&quot;


æ–‡ä»¶å¾ªç¯---- hosts: commonservers  tasks:  - name: loop file    debug: msg=&quot;&#123;&#123;item&#125;&#125;&quot;    with_fileglob:      - /home/voidking/*.yml

å‘½ä»¤å¾ªç¯---- hosts: commonservers  tasks:    - name: exec command      shell: &quot;&#123;&#123;item&#125;&#125;&quot;      with_items:        - hostname        - uname      register: ret    - name: display result      debug: msg=&quot;&#123;% for i in ret.results %&#125; &#123;&#123;i.stdout&#125;&#125; &#123;% endfor %&#125;&quot; 


æ¡ä»¶åˆ¤æ–­ansibleçš„æ¡ä»¶åˆ¤æ–­ä½¿ç”¨å…³é”®å­—whenï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š

pythonè¯­æ³•æ”¯æŒçš„åŸç”Ÿæ€æ ¼å¼ conditions &gt; 1 or conditions == â€œssâ€ï¼Œinï¼Œnotç­‰ç­‰
ansible Jinja2 filters

---- hosts: commonservers  vars:    pre: hostname is  tasks:  - name: register vars    shell: hostname    register: info  - name: display hostname    debug: msg=&quot;&#123;&#123;pre&#125;&#125; &#123;&#123;info.stdout&#125;&#125;&quot;  - name: print true    debug: msg=&quot;result is ubuntu14&quot;    when: info.stdout == &quot;ubuntu14&quot;  - name: print false    debug: msg=&quot;result is not ubuntu14&quot;    when: info.stdout != &quot;ubuntu14&quot;  - name: print warning    debug: msg=&quot;client OS is ubuntu&quot;    when: info[&#x27;stdout&#x27;].startswith(&#x27;u&#x27;)


åè®°è‡³æ­¤ï¼Œplaybooksæœ€åŸºç¡€çš„ä¸œè¥¿å­¦ä¹ å®Œæ¯•ã€‚æ›´é«˜çº§çš„ç”¨æ³•ï¼Œåœ¨ä½¿ç”¨ä¸­å†æ…¢æ…¢å­¦ä¹ ã€‚
ä¹¦ç­¾
Ansible Documentation
Ansibleä¸­æ–‡æƒå¨æŒ‡å—
Ansibleç²¾è®²
Ansible Tutorial for Beginners: Ultimate Playbook &amp; Examples
Working with Ansible Playbooks â€“ Tips &amp; Tricks with Examples

]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
        <tag>ansible</tag>
      </tags>
  </entry>
  <entry>
    <title>YAMLè¯­è¨€</title>
    <url>/dev-yaml/</url>
    <content><![CDATA[YAMLè¯­è¨€ç®€ä»‹
YAML (/ËˆjÃ¦mÉ™l/ and YAH-ml) is a human-readable data-serialization language. It is commonly used for configuration files and in applications where data is being stored or transmitted. YAML targets many of the same communications applications as Extensible Markup Language (XML) but has a minimal syntax which intentionally differs from SGML. It uses both Python-style indentation to indicate nesting, and a more compact format that uses [â€¦] for lists and {â€¦} for maps thus JSON files are valid YAML.

å‚è€ƒæ–‡æ¡£ï¼š

Wikipedia - YAML
YAML è¯­è¨€æ•™ç¨‹
Helm - YAMLæŠ€æœ¯
YAML | ç«–çº¿ &gt; å¤§äºå·ç­‰ç‰¹æ®Šç¬¦å·çš„ä½œç”¨
YAML Multiline
JSONPath

ä¸‹æ–‡ä¸»è¦è½¬è½½è‡ªé˜®ä¸€å³°å¤§ä½¬çš„YAML è¯­è¨€æ•™ç¨‹ã€‚


YAMLåŸºæœ¬è¯­æ³•YAMLåŸºæœ¬è¯­æ³•è§„åˆ™ï¼š

å¤§å°å†™æ•æ„Ÿ
ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»
ç¼©è¿›æ—¶ä¸å…è®¸ä½¿ç”¨Tabé”®ï¼Œåªå…è®¸ä½¿ç”¨ç©ºæ ¼ã€‚
ç¼©è¿›çš„ç©ºæ ¼æ•°ç›®ä¸é‡è¦ï¼Œåªè¦ç›¸åŒå±‚çº§çš„å…ƒç´ å·¦ä¾§å¯¹é½å³å¯
# è¡¨ç¤ºæ³¨é‡Šï¼Œä»è¿™ä¸ªå­—ç¬¦ä¸€ç›´åˆ°è¡Œå°¾ï¼Œéƒ½ä¼šè¢«è§£æå™¨å¿½ç•¥ã€‚

YAMLæ•°æ®ç»“æ„ï¼š

å¯¹è±¡ï¼šé”®å€¼å¯¹çš„é›†åˆï¼Œåˆç§°ä¸ºæ˜ å°„ï¼ˆmappingï¼‰/ å“ˆå¸Œï¼ˆhashesï¼‰ / å­—å…¸ï¼ˆdictionaryï¼‰
æ•°ç»„ï¼šä¸€ç»„æŒ‰æ¬¡åºæ’åˆ—çš„å€¼ï¼Œåˆç§°ä¸ºåºåˆ—ï¼ˆsequenceï¼‰ / åˆ—è¡¨ï¼ˆlistï¼‰
çº¯é‡ï¼ˆscalarsï¼‰ï¼šå•ä¸ªçš„ã€ä¸å¯å†åˆ†çš„å€¼

YAMLå’ŒJSONYAMLå’ŒJSONå¯ä»¥äº’ç›¸è½¬æ¢ã€‚ç½‘ä¸Šæœ‰å¾ˆå¤šå·¥å…·ï¼š

JSON to YAML
YAML JavaScript parser
jsonå·¥å…·
yamlå·¥å…·
YAML è½¬ JSON
JSON-YAMLäº’è½¬

å¦‚æœæœ‰python3ç¯å¢ƒï¼Œè¿˜å¯ä»¥ä½¿ç”¨python-json2yamlå·¥å…·ã€‚
pip install PyYAML==5.1pip install python-json2yamlcat a.json | json2yaml &gt; a.yamlcat a.yaml | yaml2json

å¯¹è±¡å¯¹è±¡çš„ä¸€ç»„é”®å€¼å¯¹ï¼Œä½¿ç”¨å†’å·ç»“æ„è¡¨ç¤ºã€‚
animal: pets

YAML ä¹Ÿå…è®¸å¦ä¸€ç§å†™æ³•ï¼Œå°†æ‰€æœ‰é”®å€¼å¯¹å†™æˆä¸€ä¸ªè¡Œå†…å¯¹è±¡ã€‚
hash: &#123; name: Steve, foo: bar &#125; 

æ•°ç»„ä¸€ç»„è¿è¯çº¿å¼€å¤´çš„è¡Œï¼Œæ„æˆä¸€ä¸ªæ•°ç»„ã€‚
animals:- Cat- Dog- Goldfish

æ•°ç»„ä¹Ÿå¯ä»¥é‡‡ç”¨è¡Œå†…è¡¨ç¤ºæ³•ã€‚
animals: [Cat, Dog, Goldfish]

æ•°æ®ç»“æ„çš„å­æˆå‘˜æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåˆ™å¯ä»¥åœ¨è¯¥é¡¹ä¸‹é¢ç¼©è¿›ä¸€ä¸ªç©ºæ ¼ã€‚
animals:- - Cat - Dog - Goldfish

å¤åˆç»“æ„å¯¹è±¡å’Œæ•°ç»„å¯ä»¥ç»“åˆä½¿ç”¨ï¼Œå½¢æˆå¤åˆç»“æ„ã€‚
languages: - Ruby - Perl - Python websites: YAML: yaml.org  Ruby: ruby-lang.org  Python: python.org  Perl: use.perl.org 

çº¯é‡çº¯é‡æ˜¯æœ€åŸºæœ¬çš„ã€ä¸å¯å†åˆ†çš„å€¼ã€‚ä»¥ä¸‹æ•°æ®ç±»å‹éƒ½å±äº JavaScript çš„çº¯é‡ã€‚

å­—ç¬¦ä¸²
å¸ƒå°”å€¼
æ•´æ•°
æµ®ç‚¹æ•°
Null
æ—¶é—´
æ—¥æœŸ

æ•°å€¼ç›´æ¥ä»¥å­—é¢é‡çš„å½¢å¼è¡¨ç¤ºã€‚
number: 12.30

å¸ƒå°”å€¼ç”¨trueå’Œfalseè¡¨ç¤ºã€‚
isSet: true

nullç”¨~è¡¨ç¤ºã€‚
parent: ~ 

æ—¶é—´é‡‡ç”¨ ISO8601 æ ¼å¼ã€‚
iso8601: 2001-12-14t21:59:43.10-05:00

æ—¥æœŸé‡‡ç”¨å¤åˆ iso8601 æ ¼å¼çš„å¹´ã€æœˆã€æ—¥è¡¨ç¤ºã€‚
date: 1976-07-31

YAML å…è®¸ä½¿ç”¨ä¸¤ä¸ªæ„Ÿå¹å·ï¼Œå¼ºåˆ¶è½¬æ¢æ•°æ®ç±»å‹ã€‚
e: !!str 123f: !!str true

å­—ç¬¦ä¸²å­—ç¬¦ä¸²æ˜¯æœ€å¸¸è§ï¼Œä¹Ÿæ˜¯æœ€å¤æ‚çš„ä¸€ç§æ•°æ®ç±»å‹ã€‚
å­—ç¬¦ä¸²é»˜è®¤ä¸ä½¿ç”¨å¼•å·è¡¨ç¤ºã€‚
str: è¿™æ˜¯ä¸€è¡Œå­—ç¬¦ä¸²

å¦‚æœå­—ç¬¦ä¸²ä¹‹ä¸­åŒ…å«ç©ºæ ¼æˆ–ç‰¹æ®Šå­—ç¬¦ï¼Œéœ€è¦æ”¾åœ¨å¼•å·ä¹‹ä¸­ã€‚
str: &#x27;å†…å®¹ï¼š å­—ç¬¦ä¸²&#x27;

å•å¼•å·å’ŒåŒå¼•å·éƒ½å¯ä»¥ä½¿ç”¨ï¼ŒåŒå¼•å·ä¸ä¼šå¯¹ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰ã€‚
s1: &#x27;å†…å®¹\nå­—ç¬¦ä¸²&#x27;s2: &quot;å†…å®¹\nå­—ç¬¦ä¸²&quot;

å•å¼•å·ä¹‹ä¸­å¦‚æœè¿˜æœ‰å•å¼•å·ï¼Œå¿…é¡»è¿ç»­ä½¿ç”¨ä¸¤ä¸ªå•å¼•å·è½¬ä¹‰ã€‚
str: &#x27;labor&#x27;&#x27;s day&#x27; 

å­—ç¬¦ä¸²å¯ä»¥å†™æˆå¤šè¡Œï¼Œä»ç¬¬äºŒè¡Œå¼€å§‹ï¼Œå¿…é¡»æœ‰ä¸€ä¸ªå•ç©ºæ ¼ç¼©è¿›ã€‚æ¢è¡Œç¬¦ä¼šè¢«è½¬ä¸ºç©ºæ ¼ã€‚
str: è¿™æ˜¯ä¸€æ®µ  å¤šè¡Œ  å­—ç¬¦ä¸²

å¤šè¡Œå­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨|ä¿ç•™æ¢è¡Œç¬¦ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨&gt;æŠ˜å æ¢è¡Œã€‚
this: |  Foo  Barthat: &gt;  Foo  Bar

+è¡¨ç¤ºä¿ç•™æ–‡å­—å—æœ«å°¾çš„æ¢è¡Œï¼Œ-è¡¨ç¤ºåˆ é™¤å­—ç¬¦ä¸²æœ«å°¾çš„æ¢è¡Œã€‚
s1: |  Foos2: |+  Foos3: |-  Foo

å­—ç¬¦ä¸²ä¹‹ä¸­å¯ä»¥æ’å…¥ HTML æ ‡è®°ã€‚
message: |  &lt;p style=&quot;color: red&quot;&gt;    æ®µè½  &lt;/p&gt;

å¼•ç”¨é”šç‚¹&amp;å’Œåˆ«å*ï¼Œå¯ä»¥ç”¨æ¥å¼•ç”¨ã€‚
defaults: &amp;defaults  adapter:  postgres  host:     localhostdevelopment:  database: myapp_development  &lt;&lt;: *defaultstest:  database: myapp_test  &lt;&lt;: *defaults

&amp;ç”¨æ¥å»ºç«‹é”šç‚¹ï¼ˆdefaultsï¼‰ï¼Œ&lt;&lt;è¡¨ç¤ºåˆå¹¶åˆ°å½“å‰æ•°æ®ï¼Œ*ç”¨æ¥å¼•ç”¨é”šç‚¹ã€‚ç­‰åŒäºä¸‹é¢çš„ä»£ç ã€‚
defaults:  adapter:  postgres  host:     localhostdevelopment:  database: myapp_development  adapter:  postgres  host:     localhosttest:  database: myapp_test  adapter:  postgres  host:     localhost

ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚
- &amp;showell Steve - Clark - Brian - Oren - *showell 

YAMLç‰¹æ®Šç¬¦å·è¯´æ˜
| ï¼šç®¡é“ç¬¦/ç«–çº¿ï¼Œä¿ç•™æ–‡æœ¬å—ä¸­çš„æ¢è¡Œç¬¦ã€‚
|+ ï¼šä¿ç•™æ–‡æœ¬å—ä¸­çš„æ¢è¡Œç¬¦ã€‚ç­‰ä»·äº|ã€‚
|- ï¼šä¿ç•™æ–‡æœ¬å—ä¸­çš„æ¢è¡Œç¬¦ã€‚åˆ é™¤æœ€åä¸€è¡Œçš„æ¢è¡Œç¬¦ã€‚
&gt; ï¼šå¤§äºå·ï¼Œæ–‡æœ¬å—ä¸­çš„æ¢è¡Œæ›¿æ¢ä¸ºç©ºæ ¼ã€‚ä¿ç•™æœ€åä¸€è¡Œçš„æ¢è¡Œç¬¦ã€‚
&gt;+ ï¼šæ–‡æœ¬å—ä¸­çš„æ¢è¡Œæ›¿æ¢ä¸ºç©ºæ ¼ã€‚ç­‰ä»·äº&gt;ã€‚
&gt;- ï¼šæ–‡æœ¬å—ä¸­çš„æ¢è¡Œæ›¿æ¢ä¸ºç©ºæ ¼ã€‚åˆ é™¤æœ€åä¸€è¡Œçš„æ¢è¡Œç¬¦ã€‚
|2 ï¼šç¼©è¿›æŒ‡ç¤ºç¬¦ã€‚é€šå¸¸ï¼Œç”¨äºç¼©è¿›å—çš„ç©ºæ ¼æ•°å°†ä»ç¬¬ä¸€è¡Œè‡ªåŠ¨çŒœæµ‹ã€‚å¦‚æœå—çš„ç¬¬ä¸€è¡Œä»¥ç©ºæ ¼å¼€å¤´ï¼Œå¯èƒ½éœ€è¦å—ç¼©è¿›æŒ‡ç¤ºå™¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦æŒ‡å®šç”¨äºç¼©è¿›çš„ç©ºæ ¼æ•°ï¼ˆ1 åˆ° 9 ä¹‹é—´ï¼‰ã€‚

]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>python</category>
        <category>k8s</category>
        <category>cloudnative</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>k8s</tag>
        <tag>ansible</tag>
        <tag>helm</tag>
      </tags>
  </entry>
  <entry>
    <title>Ansibleå…¥é—¨ç¯‡</title>
    <url>/dev-ansible-start/</url>
    <content><![CDATA[Ansibleç®€ä»‹ansibleæ˜¯ä¸€ä¸ªç”¨äºè‡ªåŠ¨åŒ–è¿ç»´çš„é…ç½®ç®¡ç†å’Œåº”ç”¨éƒ¨ç½²å·¥å…·ã€‚åŸºäºPythonå¼€å‘ï¼Œé›†åˆäº†ä¼—å¤šè¿ç»´å·¥å…·ï¼ˆpuppetã€cfengineã€chefã€funcã€fabric.SaltStack ï¼‰çš„ä¼˜ç‚¹ï¼Œå®ç°äº†æ‰¹é‡ç³»ç»Ÿé…ç½®ã€æ‰¹é‡ç¨‹åºéƒ¨ç½²ã€æ‰¹é‡è¿è¡Œå‘½ä»¤ç­‰åŠŸèƒ½ã€‚ansibleæ˜¯åŸºäºæ¨¡å—å·¥ä½œçš„ï¼Œæœ¬èº«æ²¡æœ‰æ‰¹é‡éƒ¨ç½²çš„èƒ½åŠ›ï¼ŒçœŸæ­£å…·æœ‰æ‰¹é‡éƒ¨ç½²èƒ½åŠ›çš„æ˜¯ansibleæ‰€è¿è¡Œçš„æ¨¡å—ã€‚
ansibleçš„åŸºæœ¬æ¶æ„ï¼š

è¿æ¥æ’ä»¶ï¼ˆconnectior pluginsï¼‰ç”¨äºè¿æ¥ç®¡ç†ç«¯å’Œè¢«ç®¡ç†ç«¯ã€‚
æ ¸å¿ƒæ¨¡å—ï¼ˆcore modulesï¼‰è¿æ¥ä¸»æœºå®ç°æ“ä½œï¼Œå®ƒä¾èµ–äºå…·ä½“çš„æ¨¡å—æ¥åšå…·ä½“çš„äº‹æƒ…ã€‚
è‡ªå®šä¹‰æ¨¡å—ï¼ˆcustom modulesï¼‰æ ¹æ®è‡ªå·±çš„éœ€æ±‚ç¼–å†™å…·ä½“çš„æ¨¡å—ã€‚
æ’ä»¶ï¼ˆpluginsï¼‰å®Œæˆæ¨¡å—åŠŸèƒ½çš„è¡¥å……ã€‚
å‰§æœ¬ï¼ˆplaybooksï¼‰ansibleçš„é…ç½®æ–‡ä»¶ï¼Œå°†å¤šä¸ªä»»åŠ¡å®šä¹‰åœ¨å‰§æœ¬ä¸­ï¼Œç”±ansibleè‡ªåŠ¨æ‰§è¡Œã€‚
ä¸»æœºæ¸…å•ï¼ˆhost inventoryï¼‰å®šä¹‰ansibleéœ€è¦æ“ä½œä¸»æœºçš„èŒƒå›´ã€‚

ä¸Šè¿°ç®€ä»‹æ‘˜è‡ªansibleåŸºç¡€ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Ansible Documentation
Ansibleä¸­æ–‡æƒå¨æŒ‡å—
Ansibleç²¾è®²
è¿ç»´è‡ªåŠ¨åŒ–-Ansible ( ä¸€ )
Ansible è¿ç»´è‡ªåŠ¨åŒ– ( é…ç½®ç®¡ç†å·¥å…· )



å®éªŒç¯å¢ƒå‡†å¤‡ä¸¤å°ä¸»æœºï¼Œéƒ½æ˜¯ubuntu14.04.4 serverç‰ˆï¼Œç”¨æˆ·éƒ½æ˜¯voidkingã€‚ä¸€å°ä½œä¸ºç®¡ç†æœºï¼ŒIPä¸º192.168.56.101ï¼Œä¸€å°ä½œä¸ºè¢«ç®¡ç†æœºï¼ˆä»¥ä¸‹ç§°ä¸ºå®¢æˆ·æœºï¼‰ï¼ŒIPä¸º192.168.56.102ã€‚
åœ¨ç®¡ç†æœºä¸Šå®‰è£…ansibleï¼Œä¸€æ¡å‘½ä»¤æå®šï¼šsudo apt install ansibleã€‚ä¸è¿‡ï¼Œå®‰è£…çš„ansibleç‰ˆæœ¬å¾ˆä½ï¼Œé»˜è®¤1.5.4ã€‚è¿™é‡Œæˆ‘ä»¬é€šè¿‡æ·»åŠ æºæ¥å®‰è£…æœ€æ–°ç‰ˆansibleï¼š
sudo apt remove ansiblesudo apt-get install software-properties-commonsudo apt-add-repository ppa:ansible/ansiblesudo apt-get updatesudo apt-get install ansible

æˆ–è€…ï¼Œä½¿ç”¨pipå®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ansibleï¼Œæœ¬æ–‡é€‰æ‹©å®‰è£… 2.6.11
sudo pip install ansible==2.6.11 -i https://pypi.tuna.tsinghua.edu.cn/simple
æƒ³è¦çŸ¥é“éƒ½æœ‰å“ªäº›ç‰ˆæœ¬ï¼Œå¯ä»¥æŸ¥çœ‹ansibleç‰ˆæœ¬åˆ—è¡¨
PSï¼šå¦‚æœæ˜¯centosç³»ç»Ÿï¼Œè¿˜å¯ä»¥ä¸‹è½½ansible rpmåŒ…ï¼Œé€šè¿‡rmpå‘½ä»¤å®‰è£… rpm -ivh ansible-2.6.11-1.el7.ans.noarch.rpm
è¿æ¥å‡†å¤‡1ã€åœ¨ç®¡ç†æœºç”Ÿæˆå¯†é’¥
ssh-keygen
è¿ç»­å›è½¦å³å¯ã€‚
2ã€å°†å…¬é’¥å†™å…¥å®¢æˆ·æœº
ssh-copy-id -i .ssh/id_rsa.pub -p 22 voidking@192.168.56.102

3ã€åœ¨ç®¡ç†æœºæ·»åŠ å®¢æˆ·æœºåˆ°hosts
sudo vim /etc/ansible/hosts

åœ¨æ–‡æ¡£æœ€åæ·»åŠ ï¼š
[commonservers]192.168.56.102

4ã€åœ¨ç®¡ç†æœºæ‰§è¡Œç¬¬ä¸€æ¡å‘½ä»¤
ansible all -m ping

5ã€åœ¨å®¢æˆ·æœºæŠŠvoidkingç”¨æˆ·æ·»åŠ è¿›sudoå…å¯†ï¼Œæ–¹ä¾¿ä»¥åçš„æ“ä½œ
sudo vim /etc/sudoers

æ·»åŠ 
voidking ALL = NOPASSWD: ALL

Ansibleç¨‹åºè¯´æ˜ç¨‹åº/å‘½ä»¤åˆ—è¡¨
ansibleï¼šä¸»ç¨‹åºï¼Œä¸´æ—¶å‘½ä»¤æ‰§è¡Œå·¥å…·
ansible-docï¼šæŸ¥çœ‹é…ç½®æ–‡æ¡£ï¼Œæ¨¡å—åŠŸèƒ½æŸ¥çœ‹å·¥å…·
ansible-galaxyï¼šä¸‹è½½/ä¸Šä¼ ä¼˜ç§€ä»£ç æˆ–Rolesæ¨¡å—çš„å®˜ç½‘å¹³å°
ansible-lintï¼šå¯¹playbookçš„è¯­æ³•è¿›è¡Œæ£€æŸ¥çš„ä¸€ä¸ªå·¥å…·
ansible-playbookï¼šå®šåˆ¶è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œç¼–æ’å‰§æœ¬å·¥å…·
ansible-pullï¼šè¿œç¨‹æ‰§è¡Œå‘½ä»¤çš„å·¥å…·
ansible-vaultï¼šæ–‡ä»¶åŠ å¯†å·¥å…·
ansible-consoleï¼šåŸºäºconsoleç•Œé¢ä¸ç”¨æˆ·äº¤äº’çš„æ‰§è¡Œå·¥å…·

å…¶ä¸­ï¼Œæœ€é‡è¦å’Œæœ€å¸¸ç”¨çš„æ˜¯ansibleã€‚
ansibleå‘½ä»¤è¯¦è§£ansibleå‘½ä»¤æ˜¯ansibleå¥—è£…çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå…¶ä¸»è¦ç”¨äºæ‰§è¡Œad-hocå‘½ä»¤ï¼Œå³å•æ¡å‘½ä»¤ã€‚é»˜è®¤åé¢éœ€è¦è·Ÿä¸»æœºå’Œé€‰é¡¹éƒ¨åˆ†ï¼Œé»˜è®¤ä¸æŒ‡å®šæ¨¡å—æ—¶ï¼Œä½¿ç”¨çš„æ˜¯commandæ¨¡å—ã€‚commandæ¨¡å—ä¸æ˜¯è°ƒç”¨çš„shellçš„æŒ‡ä»¤ï¼Œæ‰€ä»¥æ²¡æœ‰bashçš„ç¯å¢ƒå˜é‡ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨shellçš„ä¸€äº›æ“ä½œæ–¹å¼ï¼Œå…¶ä»–å’Œshellæ¨¡å—æ²¡æœ‰åŒºåˆ«ã€‚
æ ¼å¼ï¼šansible &lt;host-pattern&gt; [-m module_name] [options]
å‚æ•°åˆ—è¡¨ï¼š
ansible [-h] [--version] [-v] [-b] [--become-method BECOME_METHOD]        [--become-user BECOME_USER]        [-K | --become-password-file BECOME_PASSWORD_FILE]        [-i INVENTORY] [--list-hosts] [-l SUBSET] [-P POLL_INTERVAL]        [-B SECONDS] [-o] [-t TREE] [--private-key PRIVATE_KEY_FILE]        [-u REMOTE_USER] [-c CONNECTION] [-T TIMEOUT]        [--ssh-common-args SSH_COMMON_ARGS]        [--sftp-extra-args SFTP_EXTRA_ARGS]        [--scp-extra-args SCP_EXTRA_ARGS]        [--ssh-extra-args SSH_EXTRA_ARGS]        [-k | --connection-password-file CONNECTION_PASSWORD_FILE] [-C]        [--syntax-check] [-D] [-e EXTRA_VARS] [--vault-id VAULT_IDS]        [--ask-vault-password | --vault-password-file VAULT_PASSWORD_FILES]        [-f FORKS] [-M MODULE_PATH] [--playbook-dir BASEDIR]        [--task-timeout TASK_TIMEOUT] [-a MODULE_ARGS] [-m MODULE_NAME]        pattern

å¸¸ç”¨å‚æ•°ï¼š

-mï¼šæŒ‡å®šæ¨¡å—
-aï¼šæŒ‡å®šå‚æ•°
-iï¼šæŒ‡å®šä¸»æœºåˆ—è¡¨

ä¾‹å­ï¼š
# æŸ¥çœ‹ä¸»æœºæ¸…å•ä¸­çš„æ‰€æœ‰ä¸»æœºansible all --list-hosts# æŒ‡å®šä¸»æœºæ¸…å•ï¼ŒæŸ¥çœ‹ä¸»æœºæ¸…å•ä¸­çš„æ‰€æœ‰ä¸»æœºansible all -i ./hosts --list-hosts# æŸ¥çœ‹commonserversç»„çš„ä¸»æœºansible commonservers --list-hosts# æµ‹è¯•è¿é€šansible all -m ping# å•å°ä¸»æœºæ‰§è¡Œå‘½ä»¤ansible all -i &quot;192.168.56.102,&quot; -m ping# æŸ¥çœ‹å®¢æˆ·æœºçš„å†…å­˜ansible all -m command -a &quot;free -h&quot;# åœ¨å®¢æˆ·æœºæ‰§è¡Œç®¡ç†æœºè„šæœ¬cp /bin/echo ~/echo.shansible all -m script -a &quot;~/echo.sh hello&quot; -vvv# åœ¨å®¢æˆ·æœºæ‰§è¡Œå®¢æˆ·æœºè„šæœ¬ansible all -m command -a &quot;cp /bin/echo /home/voidking/echo.sh&quot;ansible all -m shell -a &quot;/home/voidking/echo.sh hello&quot;# å‘å®¢æˆ·æœºæ‹·è´æ–‡ä»¶ansible all -m copy -a &quot;src=/home/voidking/echo.sh dest=/tmp/ owner=voidking group=voidking mode=0755&quot;# åå°æ‰§è¡Œå‘½ä»¤ansible all -m ping -B 3600 -P 0ansible all -m async_status -a &quot;jid=&#x27;182829279182.2094&#x27;&quot;# æ‰¹é‡æ·»åŠ sudoæƒé™ansible all -i hosts -s -m shell -a &quot;echo &#x27;haojin ALL=(ALL) NOPASSWD: ALL&#x27; &gt;&gt; /etc/sudoers&quot;# æ‰¹é‡ç§»é™¤sudoæƒé™ansible all -i hosts -s -m shell -a &quot;sed -i &#x27;/haojin ALL=(ALL) NOPASSWD: ALL/d&#x27; /etc/sudoers&quot;# ä½¿ç”¨rootç”¨æˆ·å¤‡ä»½å’Œæ‹·è´æ–‡ä»¶ansible all -i hosts -s -m shell -a &quot;mv /tmp/run.sh /tmp/run.sh.bak&quot;ansible all -i hosts -b --become-user=root -m shell -a &quot;mv /tmp/run.sh /tmp/run.sh.bak&quot;ansible all -i hosts -s -m copy -a &quot;src=/root/run.sh dest=/tmp/run.sh owner=voidking group=root mode=0755&quot;# é‡å¯æœåŠ¡ansible all -i hosts -s -m shell -a &quot;/tmp/stop.sh&quot;ansible all -i hosts -s -m shell -a &quot;/tmp/run.sh&quot; -u voidking

é…ç½®æ–‡ä»¶
/etc/ansible/ansible.cfgï¼Œä¸»é…ç½®æ–‡ä»¶ï¼Œé…ç½®ansibleå·¥ä½œç‰¹æ€§
/etc/ansible/hostsï¼Œä¸»æœºæ¸…å•
/etc/ansible/roles/ï¼Œå­˜æ”¾è§’è‰²çš„ç›®å½•

1ã€ansible.cfgçš„é…ç½®å‚è€ƒConfiguring Ansibleï¼Œä¸»è¦å…³æ³¨inventoryã€forksã€poll_intervalã€remote_portã€log_pathç­‰å‚æ•°ã€‚
2ã€hostsæ–‡ä»¶æœ‰ä¸€ä¸ªç‰¹æ€§å¾ˆæ£’ï¼Œå¯ä»¥æŒ‡å®šå˜é‡ï¼Œä¾‹å¦‚ï¼š
[commonservers]192.168.56.102[commonservers:vars]ansible_ssh_pass=&#x27;123456&#x27;ansible_ssh_port=22[commonservers1]192.168.56.103[commonservers:children]commonservers1

å¦‚æœåœ¨hostsæ–‡ä»¶ä¸­æŒ‡å®šäº†ç”¨æˆ·åå’Œå¯†ç ï¼Œä½¿ç”¨æ—¶æŠ¥é”™ to use the â€˜sshâ€™ connection type with passwords, you must install the sshpass programé‚£ä¹ˆéœ€è¦å…ˆå®‰è£…sshpassï¼Œå®‰è£…å‘½ä»¤ä¸ºï¼š
# ubuntuapt-get install sshpass# centosyum install epel-release -yyum install sshpass -y

sshpasså¯ä»¥å®ç°å…äº¤äº’æŒ‡å®šå¯†ç ç™»å½•æœºå™¨ï¼Œä½¿ç”¨æ–¹æ³•ä¸ºï¼š
sshpass -p xxx ssh ubuntu@192.168.56.102

ansibleå†…ç½®å˜é‡å°ç»“# ä¸»æœºåansible_ssh_host # ç«¯å£å·ansible_ssh_port# ç”¨æˆ·å ansible_ssh_user # å¯†ç ansible_ssh_pass # ä½¿ç”¨sudoè¿æ¥ç”¨æˆ·æ—¶çš„å¯†ç ansible_sudo_pass # ç§˜é’¥æ–‡ä»¶å¦‚æœä¸æƒ³ä½¿ç”¨ssh-agentç®¡ç†æ—¶å¯ä»¥ä½¿ç”¨æ­¤é€‰é¡¹ansible_ssh_private_key_file # shellçš„ç±»å‹é»˜è®¤shansible_shell_type # SSH è¿æ¥çš„ç±»å‹ansible_connection # æŒ‡å®špythonè§£é‡Šå™¨çš„è·¯å¾„ansible_python_interpreter 

ansible-docæ ¼å¼ï¼šansible-doc [options] [module...]
ä¾‹å­ï¼š
ansible-doc pingansible-doc -s pingansible-doc -lansible-doc -a

ä¸»æœºé€šé…ç¬¦# åŒ¹é…æ‰€æœ‰ä¸»æœºï¼Œç›¸å½“äºallansible &#x27;*&#x27; -m ping# åŒ¹é…å«æœ‰commonçš„ä¸»æœºç»„ansible &#x27;*common*&#x27; -m ping# åŒ¹é…IPä¸º100-109çš„ä¸»æœºansible &#x27;192.168.56.10?&#x27; -m ping# åŒ¹é…IPæ®µansible &#x27;192.168.56.101:192.168.56.200&#x27; -m ping# é€»è¾‘ä¸ansible &#x27;commonservers:&amp;dbservers&#x27; --list# é€»è¾‘éansible &#x27;commonservers:!dbservers&#x27; --list# æ­£åˆ™è¡¨è¾¾å¼ansible &#x27;~192\.168\.56\.[1-254]&#x27; --list

å¸¸ç”¨æ¨¡å—
commandï¼šåœ¨å®¢æˆ·æœºè¿è¡Œå‘½ä»¤
shellï¼šåœ¨å®¢æˆ·æœºshellè¿›ç¨‹ä¸‹è¿è¡Œå‘½ä»¤ï¼Œæ”¯æŒshellç‰¹æ€§ï¼Œå¦‚ç®¡é“ç­‰
copyï¼šä»ç®¡ç†æœºæ‹·è´æ–‡ä»¶åˆ°å®¢æˆ·æœº
fetchï¼šä»å®¢æˆ·æœºè·å–æ–‡ä»¶
fileï¼šè®¾ç½®æ–‡ä»¶å±æ€§
yumï¼šcentosè½¯ä»¶åŒ…ç®¡ç†
serviceï¼šæœåŠ¡ç®¡ç†
scriptï¼šæ‰§è¡Œè„šæœ¬
userï¼šç”¨æˆ·ç®¡ç†
cronï¼šcrontabç®¡ç†

shellæ¯”commandæ›´å¼ºå¤§ï¼Œcommandæ¯”shellæ›´å®‰å…¨ã€‚å› ä¸ºcommandä¸æ”¯æŒé‡å®šå‘ã€ç®¡é“ç­‰ï¼Œé¿å…äº†shellæ³¨å…¥çš„é£é™©ã€‚
æŒ‡å®šansible.cfgå¦‚æœansibleæ²¡æœ‰æŒ‡å®šansible.cfgï¼Œæˆ–è€…æƒ³è¦ä¸´æ—¶ä½¿ç”¨è‡ªå·±å®šä¹‰çš„ansible.cfgï¼Œè¯¥æ€ä¹ˆå¤„ç†ï¼Ÿ
1ã€å‚è€ƒansible.cfgï¼Œåˆ›å»ºansible.cfgæ–‡ä»¶ï¼Œå‡è®¾è·¯å¾„ä¸º /home/voidking/ansible.cfg
2ã€è®¾ç½®ç¯å¢ƒå˜é‡
export ANSIBLE_CONFIG=/home/voidking/ansible.cfg

3ã€æŸ¥çœ‹é…ç½®
ansible --version

æ‰¹é‡æ¨é€å…¬é’¥åœ¨æœ¬æ–‡çš„ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬é€šè¿‡ssh-copy-idå‘½ä»¤æŠŠç®¡ç†æœºçš„å…¬é’¥æ¨é€ç»™äº†å®¢æˆ·æœºã€‚å¦‚æœå®¢æˆ·æœºæœ‰å‡ ç™¾ä¸ªï¼Œè‚¯å®šä¸èƒ½å†æ‰‹åŠ¨æäº†ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨ansibleçš„authorized_keyæ¨¡å—æ¥å®ç°æ¨é€ã€‚
1ã€åˆ›å»ºhostsæ–‡ä»¶ï¼ŒæŠŠæ‰€æœ‰å®¢æˆ·æœºéƒ½æ·»åŠ è¿›å»
[common]192.168.56.102192.168.56.103192.168.56.104[common:vars]ansible_ssh_user=&quot;voidking&quot;ansible_ssh_pass=&quot;123456&quot;

2ã€é…ç½®å¿½ç•¥host_key_checking
vim /etc/ansible/ansible.cfg

å»æ‰ host_key_checking = False çš„æ³¨é‡Š
3ã€æµ‹è¯•è¿é€šæ€§
ansible all -i hosts -m ping

4ã€ç¼–å†™å‰§æœ¬ ssh-copy.yaml
---- hosts: common      remote_user: voidking  tasks:  - authorized_key:     user: voidking     key: &quot;&#123;&#123; lookup(&#x27;file&#x27;, &#x27;/home/voidking/.ssh/id_rsa.pub&#x27;) &#125;&#125;&quot;

5ã€æ¨é€å…¬é’¥
ansible-playbook -i hosts ssh-copy.yaml

6ã€éªŒè¯
ssh voidking@192.168.56.102


ssh-agentansibleå¯èƒ½ä½¿ç”¨åˆ°ssh-agentï¼Œé‚£å°±é¡ºä¾¿å­¦ä¹ ä¸€ä¸‹ï¼Œå‚è€ƒäº†è§£sshä»£ç†ï¼šssh-agentã€‚
ssh-agentæ˜¯sshä»£ç†ç¨‹åºï¼Œssh-agentå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®¡ç†ç§é’¥ã€‚
é‚£ä¹ˆä»€ä¹ˆæ—¶å€™éœ€è¦sshä»£ç†å¸®åŠ©æˆ‘ä»¬ç®¡ç†ç§é’¥å‘¢ï¼Ÿå½“é‡åˆ°å¦‚ä¸‹æƒ…å†µæ—¶ï¼Œæˆ‘ä»¬ä¼šéœ€è¦sshä»£ç†ã€‚

ä½¿ç”¨ä¸åŒçš„å¯†é’¥è¿æ¥åˆ°ä¸åŒçš„ä¸»æœºæ—¶ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šå¯¹åº”çš„å¯†é’¥ï¼Œsshä»£ç†å¯ä»¥å¸®åŠ©æˆ‘ä»¬é€‰æ‹©å¯¹åº”çš„å¯†é’¥è¿›è¡Œè®¤è¯ï¼Œä¸ç”¨æ‰‹åŠ¨æŒ‡å®šå¯†é’¥å³å¯è¿›è¡Œè¿æ¥ã€‚
å½“ç§é’¥è®¾ç½®äº†å¯†ç ï¼Œæˆ‘ä»¬åˆéœ€è¦é¢‘ç¹çš„ä½¿ç”¨ç§é’¥è¿›è¡Œè®¤è¯æ—¶ï¼Œsshä»£ç†å¯ä»¥å¸®åŠ©æˆ‘ä»¬å…å»é‡å¤çš„è¾“å…¥å¯†ç çš„æ“ä½œã€‚
ç®¡ç†æœºå¯ä»¥é€šè¿‡å¯†é’¥è¿æ¥åˆ°å®¢æˆ·æœºAå’Œå®¢æˆ·æœºBï¼Œä½†æ˜¯å®¢æˆ·æœºAæ— æ³•é€šè¿‡å¯†é’¥è¿æ¥åˆ°å®¢æˆ·æœºBï¼Œsshä»£ç†å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨å®¢æˆ·æœºAä¹Ÿèƒ½é€šè¿‡å¯†é’¥è¿æ¥åˆ°å®¢æˆ·æœºBã€‚

æˆ‘ä»¬ä»¥æ·»åŠ .ssh/id_rsaç§é’¥ç»™sshä»£ç†ä¸ºä¾‹ï¼ŒæŸ¥çœ‹ä¸€ä¸‹ä½¿ç”¨æµç¨‹ã€‚
1ã€å¯ç”¨ssh-agentssh-agent bash
2ã€æŠŠ.ssh/id_rsaæ·»åŠ åˆ°sshä»£ç†ssh-add ~/.ssh/id_rsa
3ã€æµ‹è¯•ç™»å½•ssh voidking@192.168.56.102ç™»å½•æˆåŠŸã€‚åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œssh-agentå¤±æ•ˆã€‚é‡æ–°ä½¿ç”¨voidkingç™»å½•ï¼Œssh-agentå¤±æ•ˆã€‚æƒ³è¦é‡æ–°ç™»å½•ä¾ç„¶ç”Ÿæ•ˆï¼Œé‚£å°±åˆ›å»ºä¸ªè„šæœ¬ç™»å½•æ—¶è‡ªåŠ¨æ‰§è¡Œã€‚
å¸¸ç”¨å‘½ä»¤ï¼š 

ssh-agent $SHELLï¼Œå¯åŠ¨
ssh-agent -kï¼Œå…³é—­
ssh-add ~/.ssh/key_nameï¼Œæ·»åŠ æŒ‡å®šç§é’¥
ssh-add -lï¼ŒæŸ¥çœ‹ç§é’¥
ssh-add -Lï¼ŒæŸ¥çœ‹å…¬é’¥
ssh-add -d /path/of/key/key_nameï¼Œåˆ é™¤æŒ‡å®šç§é’¥
ssh-add -Dï¼Œåˆ é™¤æ‰€æœ‰ç§é’¥
ssh-add -xï¼Œè®¾ç½®å¯†ç ï¼Œé”å®šsshä»£ç†
ssh-add -Xï¼Œè¾“å…¥å¯†ç ï¼Œè§£é”sshä»£ç†

]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>ansible</tag>
        <tag>ssh</tag>
        <tag>sshpass</tag>
      </tags>
  </entry>
  <entry>
    <title>Kollaé…ç½®å®ä¾‹ç½‘ç»œ</title>
    <url>/dev-kolla-instance-network/</url>
    <content><![CDATA[å‰è¨€ç´§æ¥ç€ã€ŠUbuntu16ä½¿ç”¨Kollaå®‰è£…OpenStackã€‹ï¼Œå‡è®¾å·²ç»ä½¿ç”¨kollaå®‰è£…å¥½äº†openstackï¼Œæœ¬æ–‡æˆ‘ä»¬æ¥ç ”ç©¶ä¸€ä¸‹æ€æ ·è®¿é—®å®ä¾‹å’Œæ€æ ·é…ç½®ç½‘ç»œã€‚


è®¿é—®å®ä¾‹1ã€åœ¨dashboardæŸ¥çœ‹ç½‘ç»œæ‹“æ‰‘å¦‚ä¸‹ï¼šä¸Šå›¾ä¸­ç½‘å…³çš„ipä¸º10.0.2.158ï¼Œpingä¸é€šã€‚ä¸Šå›¾ä¸­å®ä¾‹demo1çš„ipä¸º10.0.0.3ï¼Œpingä¸é€šã€‚è¿™æ˜¯å› ä¸ºï¼Œå½“å‰ç½‘ç»œå’Œå®ä¾‹çš„ç½‘ç»œå±äºä¸åŒçš„å‘½åç©ºé—´ã€‚
2ã€æŸ¥çœ‹å‘½åç©ºé—´ip netns
3ã€æŸ¥çœ‹qrouterçš„ç½‘ç»œip netns exec qrouter-6e5d8c97-3f9c-4ce9-a9b4-580f2f38e0f3 ip add
4ã€ç™»å½•å®ä¾‹demo1ip netns exec qrouter-6e5d8c97-3f9c-4ce9-a9b4-580f2f38e0f3 ssh cirros@10.0.0.3
ç›´æ¥è®¿é—®å®ä¾‹ä¸Šé¢çš„ç™»å½•æ–¹å¼ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œå› ä¸ºè¦æŒ‡å®šå‘½åç©ºé—´ã€‚ä¸‹é¢æˆ‘ä»¬æ¥é…ç½®ä¸€ä¸‹ï¼Œä½¿å¾—ä¸æŒ‡å®šå‘½åç©ºé—´ä¹Ÿå¯ä»¥è®¿é—®å®ä¾‹ã€‚
1ã€åœ¨/etc/network/interfacesä¸­æ·»åŠ é…ç½®ï¼š
auto br-exiface br-ex inet staticaddress 10.0.2.1netmask 255.255.255.0

2ã€å¯ç”¨br-exifup br-ex
3ã€æµ‹è¯•è¿æ¥æ­¤æ—¶ï¼Œå¯ä»¥pingé€šç½‘å…³10.0.2.158ï¼Œpingä¸é€šå®ä¾‹10.0.0.3ã€‚
4ã€è§£å†³æ–¹æ³•ä¸€ï¼Œæ·»åŠ è·¯ç”±
route add -net 10.0.0.0/24 gw 10.0.2.158 dev br-exping 10.0.0.3 -c3

5ã€è§£å†³æ–¹æ³•äºŒï¼Œç»™demo1å®ä¾‹åˆ†é…æµ®åŠ¨IP
source /etc/kolla/admin-openrc.shopenstack network listopenstack floating ip create public1openstack server add floating ip demo1 10.0.2.153ping 10.0.2.153 -c3

å¤–ç½‘é…ç½®åœ¨å®ä¾‹ä¸­ï¼Œpingä¸é€š8.8.8.8ã€‚å‚è€ƒOpenstackå®è·µï¼ˆ1ï¼‰éƒ¨ç½²ä½¿ç”¨å®ä¾‹åŠneutronç½‘ç»œï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹init-runonceè„šæœ¬è§£å†³ï¼ŒEXT_NET_CIDRã€EXT_NET_RANGEå’ŒEXT_NET_GATEWAYéœ€è¦æ ¹æ®ç‰©ç†ç½‘ç»œé…ç½®ã€‚
è¿™é‡Œï¼ŒéƒåŒå­¦ä½¿ç”¨snatæ¥è§£å†³ã€‚
1ã€å‚è€ƒLinuxé…ç½®SNATä¸Šç½‘ï¼Œè®¾ç½®snat
iptables -I INPUT -i eth2 -j ACCEPTiptables -I INPUT -i br-ex -j ACCEPTiptables -t nat -A POSTROUTING -s 10.0.2.0/24 -o eth1 -j MASQUERADEiptables -t nat -A POSTROUTING -s 10.0.0.0/24 -o eth1 -j MASQUERADE
è¿™é‡Œçš„è®¾ç½®ï¼Œä½¿10.0.2.0/24ç½‘æ®µå’Œ10.0.0.0/24ç½‘æ®µéƒ½å¯ä»¥ä¸Šç½‘äº†ã€‚å®é™…ä¸Šï¼Œåªè¦é…ç½®10.0.2.0/24ç½‘æ®µå¯ä»¥ä¸Šç½‘å°±å¯ä»¥äº†ï¼Œå› ä¸ºè¿™ä¸ªç½‘æ®µç”¨äºé…ç½®æµ®åŠ¨IPã€‚
2ã€æµ‹è¯•ç½‘ç»œssh cirros@10.0.0.3
ping 8.8.8.8 -c3å¦‚ä¸Šå›¾ï¼Œå®ä¾‹å·²ç»å¯ä»¥pingé€šå¤–ç½‘ã€‚
ä¹¦ç­¾Openstack ä¹‹ kollaéƒ¨ç½²å¤–éƒ¨ç½‘ç»œé…ç½®
Openstack ä¹‹ kollaéƒ¨ç½²å¤–éƒ¨ç½‘ç»œé…ç½®
kolla queens on centos7.4
]]></content>
      <categories>
        <category>engineering</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
        <tag>kolla</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu16ä½¿ç”¨Kollaå®‰è£…OpenStack</title>
    <url>/dev-ubuntu16-kolla-openstack-all-in-one/</url>
    <content><![CDATA[å‰è¨€å®Œæˆäº†ã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”XXXã€‹ç³»åˆ—ï¼Œçœ‹ä¸Šå»ï¼Œæˆ‘ä»¬å·²ç»æ€»ç»“å‡ºäº†ä¸€å¥—ä¸é”™çš„æ–‡æ¡£ã€‚éµç…§æ–‡æ¡£ï¼Œç†è®ºä¸Šå°±èƒ½æˆåŠŸå®‰è£…æ›´å¤šçš„æœºå™¨ã€‚ä½†æ˜¯ï¼Œè®¾æƒ³æ˜¯ç¾å¥½çš„ï¼Œè€Œåœ¨å®é™…å®‰è£…è¿‡ç¨‹ä¸­ï¼Œåˆå‡ºç°å¾ˆå¤šè«åå…¶å¦™çš„æŠ¥é”™ã€‚æœ‰äº›é”™è¯¯å¯ä»¥è§£å†³ï¼Œå¾ˆå¥½ï¼›æœ‰äº›é”™è¯¯è§£å†³ä¸äº†ï¼Œé‚£ä¹ˆæ•´ä¸ªç¯å¢ƒå°±åºŸäº†ï¼Œéœ€è¦é‡è£…ç³»ç»Ÿã€‚è€Œä¸”ï¼Œæ•´ä¸ªå®‰è£…æµç¨‹éå¸¸å¤æ‚ï¼Œéš¾ä»¥ä¿è¯æ¯ä¸€æ­¥éƒ½ä¸å‡ºé”™ã€‚
äºæ˜¯ï¼ŒéƒåŒå­¦å†³å®šå¯»æ‰¾æ›´åŠ é€šç”¨ã€æ›´åŠ æ–¹ä¾¿çš„æ–¹æ³•ã€‚æ ‘æ·»åŒå­¦ç»™å‡ºå»ºè®®ï¼šèƒ½ä¸èƒ½ä½¿ç”¨dockeræ¥è¿›è¡Œéƒ¨ç½²ï¼Ÿç»è¿‡è®¨è®ºå’Œæœç´¢èµ„æ–™ï¼Œå‘ç°è¿™æ¡é“è·¯ç¡®å®å¯è¡Œï¼Œè€Œä¸”æœ‰OpenStackå®˜æ–¹æ–‡æ¡£ã€‚
æœ¬æ–‡ï¼Œå°±æ¥ç ”ç©¶ä¸€ä¸‹ä½¿ç”¨Kollaå®‰è£…OpenStack Queensç‰ˆæœ¬çš„æ–¹æ³•ï¼Œæ¶æ„é‡‡ç”¨æœ€ç®€å•çš„all-in-oneã€‚


Kollaç®€ä»‹Kollaæ˜¯OpenStackç¤¾åŒºâ€œBig Tentâ€å¼€å‘æ¨¡å¼ä¸‹çš„é¡¹ç›®ï¼Œè¯¥é¡¹ç›®ç”±æ€ç§‘äº2014å¹´9æœˆæå‡ºã€‚Kollaçš„ä¼˜åŠ¿å’Œä½¿ç”¨åœºæ™¯ä½“ç°åœ¨å¦‚ä¸‹å‡ ä¸ªæ–¹é¢ï¼š

åŸå­æ€§å‡çº§æˆ–è€…å›é€€OpenStackéƒ¨ç½²ã€‚
åŸºäºç»„ä»¶å‡çº§OpenStackã€‚
åŸºäºç»„ä»¶å›é€€OpenStackã€‚

Kollaä¸ºOpenStackçš„éƒ¨ç½²æä¾›äº†æœ‰æ•ˆã€å¿«æ·ã€æ–¹ä¾¿ã€æ˜“äºç»´æŠ¤ã€æ–¹ä¾¿ç‰ˆæœ¬æ›´æ–°ä¸å›é€€çš„æ–¹æ¡ˆã€‚
å…·ä½“è€Œè¨€ï¼ŒKollaçš„æœ€ç»ˆç›®æ ‡æ˜¯ä¸ºOpenStackçš„æ¯ä¸€ä¸ªæœåŠ¡éƒ½åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„Dockeré•œåƒï¼Œé€šè¿‡Dockeré•œåƒå°†å‡çº§çš„ç²’åº¦å‡å°åˆ°æœåŠ¡çº§åˆ«ï¼Œä»è€Œåœ¨å‡çº§æ—¶å¯¹OpenStackçš„å½±å“é™åˆ°æœ€å°ï¼Œå¹¶ä¸”ä¸€æ—¦å‡çº§å¤±è´¥ï¼Œä¹Ÿå¾ˆå®¹æ˜“å›æ»šã€‚å‡çº§åªéœ€è¦ä¸‰æ­¥ï¼šæ‹‰å–æ–°ç‰ˆæœ¬çš„å®¹å™¨é•œåƒï¼Œåœæ­¢è€ç‰ˆæœ¬çš„å®¹å™¨æœåŠ¡ï¼Œå¯åŠ¨æ–°ç‰ˆæœ¬çš„å®¹å™¨ã€‚å›æ»šä¹Ÿä¸éœ€è¦é‡æ–°å®‰è£…åŒ…ï¼Œç›´æ¥å¯åŠ¨è€ç‰ˆæœ¬çš„å®¹å™¨æœåŠ¡å°±è¡Œï¼Œéå¸¸æ–¹ä¾¿ã€‚
Kollaå¯ä»¥ä½¿ç”¨Ansibleã€Kubernetesæˆ–è€…Mesosæ¥éƒ¨ç½²OpenStackç¯å¢ƒï¼ŒKollaè´Ÿè´£å®¹å™¨åŒ–OpenStackå„ä¸ªæœåŠ¡ï¼›åè€…åˆ™è´Ÿè´£éƒ¨ç½²è¿™äº›å®¹å™¨ï¼Œæ­å»ºå‡ºä¸€ä¸ªå¯ç”¨çš„OpenStackç¯å¢ƒã€‚æ¥å®ç°åŸºäºDockerå®¹å™¨çš„OpenStackæœåŠ¡å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œå¦‚å®‰è£…ã€å‡çº§ã€å›æ»šã€è¿ç§»ç­‰ã€‚åœ¨éƒ¨ç½²Dockerå®¹å™¨æ—¶ï¼Œé»˜è®¤çš„ç½‘ç»œé…ç½®éƒ½æ˜¯Hostæ¨¡å¼ã€‚å› ä¸ºKollaçš„Dockeré•œåƒç²’åº¦å¾ˆå°ï¼Œå®ƒé’ˆå¯¹æ¯ä¸ªOpenStackæœåŠ¡éƒ½æœ‰ç‰¹å®šçš„é•œåƒï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡Dockerå‘½ä»¤æ¥æ“ä½œæŸä¸ªå…·ä½“çš„OpenStackæœåŠ¡ã€‚
Kollaé¡¹ç›®åŠå…¶ç›¸å…³çš„å…¶ä»–é¡¹ç›®å¦‚ä¸‹ï¼š

Kollaé¡¹ç›®ï¼Œè´Ÿè´£docker build OpenStackæ¯ä¸ªæœåŠ¡ï¼Œå¦‚nova-computeå®¹å™¨ç­‰ï¼›
Kolla-Ansibleé¡¹ç›®ï¼Œä½¿ç”¨Ansibleéƒ¨ç½²è¿™äº›å®¹å™¨ï¼Œæ­å»ºOpenStackç¯å¢ƒï¼›
Kolla-Kubernetesé¡¹ç›®ï¼Œä½¿ç”¨Kuberneteséƒ¨ç½²è¿™äº›å®¹å™¨ï¼Œæ­å»ºOpenStackç¯å¢ƒï¼›
Kolla-Mesosé¡¹ç›®ï¼Œä½¿ç”¨Mesoséƒ¨ç½²è¿™äº›å®¹å™¨ï¼Œæ­å»ºOpenStackç¯å¢ƒã€‚

ä¸Šè¿°Kollaç®€ä»‹æ‘˜è‡ªå¾®ä¿¡åˆ†äº«DockOneå¾®ä¿¡åˆ†äº«ï¼ˆä¸€äºŒå…«ï¼‰ï¼šå®¹å™¨åŒ–éƒ¨ç½²OpenStackçš„æ­£ç¡®å§¿åŠ¿ã€‚
ç¯å¢ƒVirtualBoxè™šæ‹Ÿæœºä¸€å°ï¼Œç³»ç»Ÿä¸ºubuntu-16.04.4-server-amd64ï¼Œ4æ ¸8Gå†…å­˜40Gå­˜å‚¨ï¼Œä¸»æœºåä¸ºcontrollerï¼Œeth0çš„IPä¸º192.168.56.110ï¼Œeth1ä¸ºnatä¸Šç½‘ç½‘å¡ï¼Œeth2ä¸ºneutronæœåŠ¡æä¾›ç½‘ç»œã€‚
ç½‘ç»œè®¾ç½®1ã€åˆ‡æ¢åˆ°rootç”¨æˆ·sudo -i
2ã€vim /etc/network/interfacesï¼Œè®¾ç½®ç½‘å¡ä¸ºï¼š
# This file describes the network interfaces available on your system# and how to activate them. For more information, see interfaces(5).source /etc/network/interfaces.d/*# The loopback network interfaceauto loiface lo inet loopback# The primary network interfaceauto eth0iface eth0 inet staticaddress 192.168.56.110netmask 255.255.255.0auto eth1iface eth1 inet dhcpauto eth2iface eth2 inet manualup ifconfig $IFACE 0.0.0.0 upup ifconfig $IFACE promisc

3ã€å¯ç”¨ç½‘å¡ifup eth2
å®‰è£…é…ç½®ä¸»è¦å‚è€ƒOpenStack, Ansible, and Kolla on Ubuntu 16.04ã€kolla queens on centos7.4å’ŒKolla-Ansibleâ€™s documentation!ã€‚
å®‰è£…ä¾èµ–1ã€å®‰è£…å¹¶å‡çº§pip
apt-get updateapt-get install python-pippip install --upgrade pip

2ã€å®‰è£…ä¾èµ–apt-get -y install python-dev libffi-dev gcc libssl-dev python-selinux
3ã€å®‰è£…ansibleapt-get -y install ansible
4ã€vim /etc/ansible/ansible.cfgï¼Œæ·»åŠ å¦‚ä¸‹ï¼š
line 10, add[defaults]host_key_checking=Falsepipelining=Trueforks=100

å®‰è£…docker1ã€å®‰è£…dockercurl -SSL https://get.docker.io | bash
2ã€ä¸ºdockerå’Œkollaåˆ›å»ºé…ç½®æ–‡ä»¶
mkdir -p /etc/systemd/system/docker.service.dvim /etc/systemd/system/docker.service.d/kolla.conf

ä¿®æ”¹ä¸ºï¼š
[Service]MountFlags=shared

3ã€é‡å¯docker
systemctl daemon-reloadsystemctl restart docker

4ã€æŸ¥çœ‹dockerä¿¡æ¯docker infoæŠ¥é”™ï¼š
docker: Cannot connect to the Docker daemon. Is the docker daemon running on this host?.

5ã€é‡å¯dockersystemctl restart dockeræŠ¥é”™ï¼š
Failed to restart docker.service: Unit docker.service is not loaded properly: Invalid argument.See system logs and &#x27;systemctl status docker.service&#x27; for details.

6ã€æ‰‹åŠ¨å¯åŠ¨docker/usr/bin/dockerdæŠ¥é”™ï¼š
INFO[0000] libcontainerd: new containerd process, pid: 7629 WARN[0000] containerd: low RLIMIT_NOFILE changing to max  current=1024 max=1048576FATA[0001] Error starting daemon: error initializing graphdriver: &quot;/var/lib/docker&quot; contains several valid graphdrivers: aufs, overlay2; Please cleanup or explicitly choose storage driver (-s &lt;DRIVER&gt;)

7ã€æŸ¥çœ‹dockerçš„aufsæŒ‚è½½æƒ…å†µå¹¶å–æ¶ˆæŒ‚è½½
cat /proc/mounts | grep &quot;docker&quot;umount /var/lib/docker/aufs

8ã€åˆ é™¤/var/lib/docker/ç›®å½•ä¸‹çš„æ–‡ä»¶å¹¶é‡å¯docker
rm -rf /var/lib/docker/*systemctl start docker

9ã€å†æ¬¡æŸ¥çœ‹dockerä¿¡æ¯docker info
åŠ é€Ÿé•œåƒæ‹‰å–å‚è€ƒDockerå…¥é—¨ä¸­çš„é•œåƒåŠ é€Ÿå™¨ä¸€èŠ‚ã€‚
å®‰è£…Kolla-ansible1ã€å®‰è£…kolla-ansiblepip install kolla-ansible
æŠ¥é”™ï¼šImportError: cannot import name mainï¼Œå‚è€ƒå‡çº§pipåå‡ºç°ImportError: cannot import name mainï¼Œç¼–è¾‘/usr/bin/pipæ–‡ä»¶ï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 9, changefrom pip import __main__if __name__ == &#x27;__main__&#x27;:    sys.exit(__main__._main())

æŠ¥çº¢ï¼šoslo-config 6.4.0 has requirement PyYAML&gt;=3.12, but youâ€™ll have pyyaml 3.11 which is incompatible.å¿½ç•¥ã€‚
2ã€æ‹·è´globals.ymlå’Œpasswords.ymlåˆ°/etc/kollaç›®å½•cp -r /usr/local/share/kolla-ansible/etc_examples/kolla /etc/
3ã€æ‹·è´all-in-oneå’Œmultinodeæ¸…å•æ–‡ä»¶åˆ°å½“å‰ç›®å½•cp /usr/local/share/kolla-ansible/ansible/inventory/* .
4ã€ç”Ÿæˆkollaå¯†ç kolla-genpwdæˆ‘ä»¬éƒ¨ç½²ä¸­ä½¿ç”¨çš„å¯†ç å­˜å‚¨åœ¨/etc/kolla/passwords.ymlæ–‡ä»¶ä¸­ã€‚æ­¤æ–‡ä»¶ä¸­çš„æ‰€æœ‰å¯†ç éƒ½æ˜¯ç©ºç™½çš„ï¼Œå¿…é¡»æ‰‹åŠ¨å¡«å†™æˆ–è¿è¡Œéšæœºå¯†ç ç”Ÿæˆå™¨ã€‚
é…ç½®globals.yml1ã€æŸ¥çœ‹globals.ymlé…ç½®grep -vE &#39;^$|^#&#39; /etc/kolla/globals.yml
2ã€vim /etc/kolla/globals.ymlï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 15,uncommentkolla_base_distro: &quot;centos&quot;# line 18,uncommentkolla_install_type: &quot;binary&quot;# line 21,uncomment and changeopenstack_release: &quot;queens&quot;# line 31,changekolla_internal_vip_address: &quot;192.168.56.120&quot;# line 85,uncomment and changenetwork_interface: &quot;eth0&quot;# line 100,uncomment and changeneutron_external_interface: &quot;eth2&quot;# line 331,uncommentdesignate_backend: &quot;bind9&quot;designate_ns_record: &quot;sample.openstack.org&quot;# line 340,uncomment and changenova_compute_virt_type: &quot;qemu&quot;# othertempest_image_id:tempest_flavor_ref_id:tempest_public_network_id:tempest_floating_network_name:

kolla_internal_vip_addressä¸º192.168.56.120ï¼Œå®ƒæ˜¯ä¸€ä¸ªå’ŒOpenStackå®¿ä¸»æœºå†…ç½‘è¿æ¥ç½‘ç»œï¼ˆeth0 192.168.56.110ï¼‰åŒä¸€ä¸ªç½‘æ®µçš„æœªä½¿ç”¨IPã€‚network_interfaceä¸ºeth0ï¼Œæ„æ€æ˜¯openstackå†…éƒ¨ç½‘ç»œä½¿ç”¨eth0ç½‘å¡ã€‚neutron_external_interfaceä¸ºeth2ï¼Œæ„æ€æ˜¯openstackçš„è™šæ‹Ÿæœºå¤–éƒ¨ç½‘ç»œä½¿ç”¨eth2ç½‘å¡ã€‚å› ä¸ºæ˜¯åœ¨è™šæ‹Ÿæœºä¸­å®‰è£…openstackï¼Œæ‰€ä»¥nova_compute_virt_typeè®¾ç½®ä¸ºqemuã€‚
éƒ¨ç½²1ã€åˆå§‹åŒ–kolla-ansible -i ./all-in-one bootstrap-serversæŠ¥é”™ï¼šæŸ¥æ‰¾èµ„æ–™ï¼ŒçŒœæµ‹æ˜¯ansibleç‰ˆæœ¬é—®é¢˜ã€‚ï¼ˆ1ï¼‰ansible --versionï¼ŒæŸ¥çœ‹ansibleç‰ˆæœ¬ä¸º2.0.0.2ï¼Œç¡®å®éå¸¸ä½ã€‚ï¼ˆ2ï¼‰apt install ansibleï¼Œæç¤ºå·²ç»æ˜¯æœ€æ–°ç‰ˆæœ¬ã€‚ï¼ˆ3ï¼‰æ›´æ–°aptåº“ï¼Œç„¶åé‡è£…ansible
apt-get install software-properties-commonapt-add-repository ppa:ansible/ansibleapt-get updateapt-get install ansible
ç„¶åï¼Œé‡æ–°ç¼–è¾‘/etc/ansible/ansible.cfgï¼Œå†æ¬¡æ‰§è¡Œåˆå§‹åŒ–å‘½ä»¤ï¼Œé—®é¢˜è§£å†³ã€‚æ—¶é—´æ¯”è¾ƒä¹…ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚
2ã€é¢„æ£€æŸ¥kolla-ansible -i ./all-in-one prechecks
3ã€æ‹‰å–é•œåƒkolla-ansible -i ./all-in-one pullè¿™ä¸€æ­¥çš„æ—¶é—´ç‰¹åˆ«ä¹…ï¼ŒæŒºè€å¿ƒç­‰å¾…ã€‚å¦‚æœæ‹‰å–å¤±è´¥ï¼Œå°±å¤šå°è¯•å‡ æ¬¡ã€‚
4ã€æŸ¥çœ‹é•œåƒdocker images
5ã€éƒ¨ç½²kolla-ansible -i ./all-in-one deploy
æµ‹è¯•ä½¿ç”¨openstack1ã€å®‰è£…openstackå®¢æˆ·ç«¯pip install python-openstackclient python-glanceclient python-neutronclient --ignore-installed
2ã€ç”Ÿæˆadmin-openrc.shç­‰kolla-ansible post-deploy
3ã€ä½¿adminç¯å¢ƒç”Ÿæ•ˆsource /etc/kolla/admin-openrc.sh
4ã€æŸ¥çœ‹è®¡ç®—æœåŠ¡openstack compute service list
åˆå§‹åŒ–é…ç½®1ã€æ‰§è¡Œinit-runonceè„šæœ¬. /usr/local/share/kolla-ansible/init-runonceæ‰§è¡Œåˆå§‹åŒ–ä¹‹å‰ï¼Œå¯ä»¥å‚è€ƒopenstack ä¹‹ Kollaéƒ¨ç½²æŒ‡å—ï¼Œè®¾ç½®ä¸€ä¸‹å¤–éƒ¨ç½‘ç»œã€‚è¿™æ ·ï¼Œå°±å¯ä»¥ä»è·¯ç”±å™¨ç»™è™šæ‹Ÿæœºåˆ†é…IPï¼Œå®‰è£…å®Œè™šæ‹Ÿæœºå°±å¯ä»¥å®¿ä¸»æœºäº’ç›¸pingé€šã€‚æ¯”å¦‚ï¼š
EXT_NET_CIDR=&#x27;192.168.56.0/24&#x27;EXT_NET_RANGE=&#x27;start=192.168.56.200,end=192.168.56.240&#x27;EXT_NET_GATEWAY=&#x27;192.168.56.1&#x27;
è¿™é‡Œé…ç½®çš„ç½‘ç»œèŒƒå›´ï¼Œå¯¹åº”globals.ymlä¸­é…ç½®çš„neutron_external_interfaceï¼Œä¹Ÿå°±æ˜¯eth2ç½‘å¡ã€‚
2ã€æ ¹æ®æç¤ºï¼Œåˆ›å»ºå®ä¾‹
openstack server create \--image cirros \--flavor m1.tiny \--key-name mykey \--nic net-id=e52fe099-c798-4ffd-8c3c-06de424a9de7 \demo1

3ã€è®¿é—®horizonæœåŠ¡curl 192.168.56.120 -L
åœ¨æµè§ˆå™¨è®¿é—® http://192.168.56.120 ï¼Œä½¿ç”¨adminè´¦å·ç™»å½•ï¼Œå¯†ç åœ¨passwords.ymlæ–‡ä»¶ä¸­æŸ¥çœ‹ã€‚less /etc/kolla/passwords.yml | grep keystone_admin_password
åè®°è‡³æ­¤ï¼Œä½¿ç”¨kollaå®‰è£…openstackæˆåŠŸã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬è¿˜ä¸çŸ¥é“å®ä¾‹èƒ½å¦æ­£å¸¸ä½¿ç”¨ã€‚å…³äºå®ä¾‹çš„è®¿é—®å’Œç½‘ç»œé…ç½®ï¼Œæ”¾åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ç ”ç©¶ã€‚
ä¹¦ç­¾Kollaâ€™s documentation!
Kollaè®©OpenStackéƒ¨ç½²æ›´è´´å¿ƒ
Kollaå®‰è£…Ocataå•èŠ‚ç‚¹
kollaéƒ¨ç½²openstack ocataç‰ˆ
Install and configure OpenStack Ocata with Kolla as a standalone
Kolla OpenStackç³»ç»Ÿè§†é¢‘è¯¾ç¨‹
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
        <tag>ansible</tag>
        <tag>kolla</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoä½¿ç”¨livereä½œä¸ºè¯„è®ºæ’ä»¶</title>
    <url>/dev-hexo-livere-comment-plugin/</url>
    <content><![CDATA[livereç®€ä»‹livereï¼ˆæ¥å¿…åŠ›ï¼‰æ˜¯ä¸€ä¸ªç¤¾ä¼šåŒ–è¯„è®ºæ’ä»¶ï¼Œä¼˜ç‚¹æœ‰ï¼š

ä½¿ç”¨ç¤¾äº¤ç½‘ç«™è´¦æˆ·ç™»å½•ï¼Œå…å»æ³¨å†Œè¿‡ç¨‹ã€‚
æé«˜ç”¨æˆ·çš„å‚ä¸å’Œæ²Ÿé€šæ„æ„¿ã€‚
ç®¡ç†/åˆ é™¤æˆ‘çš„è¯„è®ºå†…å®¹ã€‚
æä¾›ç®¡ç†é¡µé¢ï¼Œç®¡ç†ç½‘ç«™æ–‡ç« åŠè¯„è®ºå†…å®¹ã€‚



æ³¨å†Œlivere1ã€è®¿é—®æ¥å¿…åŠ›å®˜ç½‘ï¼Œæ³¨å†Œè´¦å·ã€‚
2ã€ç™»å½•åç‚¹å‡»å¯¼èˆªæ â€œå®‰è£…â€ï¼Œé€‰æ‹©cityç‰ˆã€‚
3ã€æ ¹æ®æç¤ºï¼Œç”³è¯·è·å–ä»£ç ã€‚
4ã€éƒåŒå­¦è·å–åˆ°çš„ä¸€èˆ¬ç½‘ç«™çš„ä»£ç ä¸ºï¼š
&lt;!-- æ¥å¿…åŠ›Cityç‰ˆå®‰è£…ä»£ç  --&gt;&lt;div id=&quot;lv-container&quot; data-id=&quot;city&quot; data-uid=&quot;MTAyMC8zODU3Mi8xNTEwMA==&quot;&gt;    &lt;script type=&quot;text/javascript&quot;&gt;   (function(d, s) &#123;       var j, e = d.getElementsByTagName(s)[0];       if (typeof LivereTower === &#x27;function&#x27;) &#123; return; &#125;       j = d.createElement(s);       j.src = &#x27;https://cdn-city.livere.com/js/embed.dist.js&#x27;;       j.async = true;       e.parentNode.insertBefore(j, e);   &#125;)(document, &#x27;script&#x27;);    &lt;/script&gt;&lt;noscript&gt; ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScript&lt;/noscript&gt;&lt;/div&gt;&lt;!-- Cityç‰ˆå®‰è£…ä»£ç å·²å®Œæˆ --&gt;

é…ç½®ä½¿ç”¨livere1ã€åœ¨ yilia/layout/_partial/post ç›®å½•ä¸‹ï¼Œæ–°å»ºlivere.ejsï¼Œå†…å®¹ä¸ºï¼š
&lt;div class=&quot;livere&quot;&gt;    &lt;!-- æ¥å¿…åŠ›Cityç‰ˆå®‰è£…ä»£ç  --&gt;    &lt;div id=&quot;lv-container&quot; data-id=&quot;city&quot; data-uid=&quot;&lt;%=theme.livere.uid%&gt;&quot;&gt;        &lt;script type=&quot;text/javascript&quot;&gt;       (function(d, s) &#123;           var j, e = d.getElementsByTagName(s)[0];           if (typeof LivereTower === &#x27;function&#x27;) &#123; return; &#125;           j = d.createElement(s);           j.src = &#x27;https://cdn-city.livere.com/js/embed.dist.js&#x27;;           j.async = true;           e.parentNode.insertBefore(j, e);       &#125;)(document, &#x27;script&#x27;);        &lt;/script&gt;    &lt;noscript&gt; ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScript&lt;/noscript&gt;    &lt;/div&gt;    &lt;!-- Cityç‰ˆå®‰è£…ä»£ç å·²å®Œæˆ --&gt;&lt;/div&gt;

2ã€ç¼–è¾‘ yilia/layout/_partial/article.ejsï¼Œæ·»åŠ ï¼š
&lt;% if (!index &amp;&amp; theme.livere.enable &amp;&amp; post.comments)&#123; %&gt;&lt;%- partial(&#x27;post/livere&#x27;, &#123;    key: post.slug,    title: post.title,    url: config.url+url_for(post.path)  &#125;) %&gt;&lt;% &#125; %&gt;

3ã€ç¼–è¾‘ yilia/_config.ymlï¼Œæ·»åŠ ï¼š
# æ³¨é‡Šæ‰€æœ‰ç•…è¨€é…ç½®# æ³¨é‡Šæ‰€æœ‰gitalké…ç½®# livereé…ç½®livere:   enable: true  uid: MTAyMC8zODU3Mi8xNTEwMA==

4ã€åœ¨ yilia/source/css/_partial/main.stly ä¸­æ·»åŠ ï¼š
.livere&#123;  padding: 0 40px;&#125;

è‡³æ­¤ï¼Œé…ç½®livereè¯„è®ºæ’ä»¶å®Œæˆï¼Œæ•ˆæœå¦‚ä¸‹ï¼š
niceï¼Œæ¯”gitalkè¦ç¾è§‚ï¼Œæ”¯æŒå¹³å°ä¹Ÿæ›´å¤šã€‚
é…ç½®è¯„è®ºæé†’è®¿é—®livereç®¡ç†é¡µé¢ - è¯„è®ºæé†’ï¼Œè®¾ç½®æ¥å—æé†’çš„é‚®ç®±å’Œæé†’å‘¨æœŸï¼ˆå»ºè®®3å°æ—¶ï¼‰ã€‚
é…ç½®è¯„è®ºæé†’åï¼Œæœ‰æ–°çš„è¯„è®ºæˆ‘ä»¬å°±èƒ½åŠæ—¶çœ‹åˆ°å¹¶è¿›è¡Œå›å¤ï¼Œç»™ç”¨æˆ·æ›´å¥½çš„ä½“éªŒã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoä½¿ç”¨gitalkä½œä¸ºè¯„è®ºæ’ä»¶</title>
    <url>/dev-hexo-gitalk-comment-plugin/</url>
    <content><![CDATA[gitalkç®€ä»‹
Gitalk æ˜¯ä¸€ä¸ªåŸºäº GitHub Issue å’Œ Preact å¼€å‘çš„è¯„è®ºæ’ä»¶ã€‚

ç‰¹ç‚¹ï¼š

ä½¿ç”¨ GitHub ç™»å½•
æ”¯æŒå¤šè¯­è¨€ï¼ˆen, zh-CN, zh-TW, es-ES, fr, ruï¼‰
æ”¯æŒä¸ªäººæˆ–ç»„ç»‡
æ— å¹²æ‰°æ¨¡å¼ï¼ˆè®¾ç½® distractionFreeMode ä¸º true å¼€å¯ï¼‰
å¿«æ·é”®æäº¤è¯„è®º ï¼ˆcmd|ctrl + enterï¼‰

æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ ä½¿ç”¨gitalkä½œä¸ºHexoè¯„è®ºæ’ä»¶ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

å¦‚ä½•åœ¨ hexo åšå®¢ä¸­ï¼Œé›†æˆ gitalk è¯„è®ºæ’ä»¶
åœ¨Hexoã€Hugoåšå®¢æ¡†æ¶ä¸­ä½¿ç”¨Gitalk
Gitalkè¯„è®ºè‡ªåŠ¨åˆå§‹åŒ–
hexo next ä¸»é¢˜é…ç½® gitalk è¯„è®ºåæ— æ³•åˆå§‹åŒ–åˆ›å»º issue



å‡†å¤‡å·¥ä½œæƒ³è¦ä½¿ç”¨gitalkï¼Œéœ€è¦ç”³è¯·GitHub Applicationã€‚
å¦‚ä¸Šå›¾ï¼Œä»¥éƒåŒå­¦çš„ç”³è¯·ä¸ºä¾‹ï¼š

Application nameå¡«å…¥å–œæ¬¢çš„åº”ç”¨åç§°ã€‚
Homepage URLå¡«å…¥åŸŸåã€‚
Application descriptionå¡«å…¥åº”ç”¨çš„æè¿°ã€‚
Authorization callback URL å¡«å…¥åŸŸåã€‚

ç„¶åï¼ŒRegister applicationï¼Œè½¬åˆ°åº”ç”¨é¡µé¢ã€‚åœ¨è¯¥é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°Client IDå’ŒClient Secretã€‚
é…ç½®ä½¿ç”¨gitalkyiliaä¸»é¢˜é…ç½®æœ¬èŠ‚ç»™yiliaä¸»é¢˜é…ç½®gitalkã€‚
1ã€ä¸‹è½½gitalké¡¹ç›®
git clone https://github.com/gitalk/gitalk.git

2ã€å‡†å¤‡å‰ç«¯æ ·å¼å’Œè„šæœ¬
mkdir yilia/source/lib/gitalkcp gitalk/dist/gitalk.css yilia/source/lib/gitalkcp gitalk/dist/gitalk.min.js yilia/source/lib/gitalk

PSï¼šyiliaçš„å…¨è·¯å¾„ä¸º/path/to/hexo/themes/yilia
3ã€åˆ›å»ºejsæ¨¡æ¿æ–‡ä»¶ gitalk.ejsåˆ›å»º yilia/layout/_partial/post/gitalk.ejsï¼Œå†…å®¹ä¸ºï¼š
&lt;div class=&quot;gitalk&quot;&gt;    &lt;div id=&quot;gitalk-container&quot;&gt;&lt;/div&gt;    &lt;script type=&quot;text/javascript&quot;&gt;        const gitalk = new Gitalk(&#123;            clientID: &#x27;&lt;%=theme.gitalk.client_id%&gt;&#x27;,            clientSecret: &#x27;&lt;%=theme.gitalk.client_secret%&gt;&#x27;,            repo: &#x27;&lt;%=theme.gitalk.repo%&gt;&#x27;,            owner: &#x27;&lt;%=theme.gitalk.owner%&gt;&#x27;,            admin: [&#x27;&lt;%=theme.gitalk.admin%&gt;&#x27;],            id: location.pathname,      // Ensure uniqueness and length less than 50            distractionFreeMode: false  // Facebook-like distraction free mode        &#125;)        gitalk.render(&#x27;gitalk-container&#x27;)    &lt;/script&gt;&lt;/div&gt;


4ã€ç¼–è¾‘ article.ejsï¼Œæ·»åŠ  gitalk å¼•ç”¨yilia/layout/_partial/article.ejsæ–‡ä»¶ä¸­ï¼Œæ·»åŠ ï¼š
&lt;% if (!index &amp;&amp; theme.gitalk.enable &amp;&amp; post.comments)&#123; %&gt;&lt;%- partial(&#x27;post/gitalk&#x27;, &#123;    key: post.slug,    title: post.title,    url: config.url+url_for(post.path)  &#125;) %&gt;&lt;% &#125; %&gt;

5ã€ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ  gitalk é…ç½®ç¼–è¾‘yilia/_config.ymlï¼Œæ·»åŠ ï¼š
# æ³¨é‡Šæ‰€æœ‰ç•…è¨€é…ç½®# é…ç½®gitalkgitalk:   enable: true  client_id: 5a238b8c32b1e4dd2156  client_secret: bfb5d518626f6fdc7da0351d1e0cd37ab75c6361  repo: voidking.github.io  owner: voidking  admin: voidking

6ã€ç¼–è¾‘ head.ejs ï¼ŒæŒ‰é…ç½®å†³å®šæ˜¯å¦å¯ç”¨ gitalkç¼–è¾‘yilia/layout/_partial/head.ejsï¼Œæ·»åŠ ï¼š
&lt;% if (theme.gitalk.enable)&#123; %&gt;  &lt;link rel=&quot;stylesheet&quot; href=&quot;/lib/gitalk/gitalk.css&quot;&gt;  &lt;script src=&quot;/lib/gitalk/gitalk.min.js&quot;&gt;&lt;/script&gt;&lt;% &#125; %&gt;

è‡³æ­¤ï¼Œé…ç½®gitalkè¯„è®ºæ’ä»¶å®Œæˆã€‚
æœ€ç»ˆæ•ˆæœå¦‚ä¸‹å›¾ï¼šå±…ç„¶ï¼Œæ¯ç¯‡æ–‡ç« éƒ½éœ€è¦åˆå§‹åŒ–ï¼ï¼ï¼å°´å°¬ã€‚ã€‚ã€‚å‹‰å¼ºå¯ä»¥æ¥å—ã€‚
æ‰¹é‡åˆå§‹åŒ–æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚
Validation Failedæ‰“å¼€ä¸€äº›é¡µé¢çš„æ—¶å€™ï¼ŒæŠ¥é”™ï¼šError: Validation Failed.åœ¨gitalkçš„issueä¸­å‘ç°ï¼Œå¦‚æœlocation.pathnameå¤§äº50ï¼Œå°±ä¼šæŠ¥è¿™ä¸ªé”™è¯¯ã€‚
æœ‰åŒå­¦é‡‡ç”¨md5ç¼–ç urlçš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¥½æƒ³æ³•ã€‚å‚è€ƒæ–‡æ¡£ï¼š

å¤„ç†Gitalkä¸­ç”±äºæ–‡ç« URLè¿‡é•¿å¯¼è‡´çš„Validation Failed(422)
æŠ¥é”™å‡ºç° Error: Validation Failed.

1ã€ä¸‹è½½md5 jsè®¿é—®blueimp-md5 CDNï¼Œä¸‹è½½md5.min.jsï¼Œæ”¾å…¥yilia/source/lib/gitalkç›®å½•ã€‚
2ã€ç¼–è¾‘ head.ejsï¼Œæ·»åŠ md5 jså¼•ç”¨
&lt;% if (theme.gitalk.enable)&#123; %&gt;  &lt;link rel=&quot;stylesheet&quot; href=&quot;/lib/gitalk/gitalk.css&quot;&gt;  &lt;script src=&quot;/lib/gitalk/gitalk.min.js&quot;&gt;&lt;/script&gt;  &lt;script src=&quot;/lib/gitalk/md5.min.js&quot;&gt;&lt;/script&gt;&lt;% &#125; %&gt;

3ã€ç¼–è¾‘ gitalk.ejsï¼Œä¿®æ”¹id
id: md5(location.pathname), 

è‡³æ­¤ï¼Œé—®é¢˜è§£å†³ã€‚
ä¸ºäº†æ›´åŠ ç¾è§‚ï¼Œå¯ä»¥é€‚å½“ä¿®æ”¹cssï¼Œæ¯”å¦‚åœ¨ yilia/source/css/_partial/main.stly ä¸­æ·»åŠ ï¼š
.gitalk&#123;  padding: 0 40px;&#125;

åè®°Hexoè¯„è®ºæ’ä»¶å¯¹æ¯”

å¤šè¯´ï¼ŒæŒºå¥½ç”¨ï¼Œä¸‹çº¿äº†
ç•…è¨€ï¼Œå¹¿å‘Šå¤ªå¤šï¼Œå¼ƒç”¨
disqusï¼Œé è°±ï¼Œä½†æ˜¯è¢«å¢™
gitalkï¼Œåˆå§‹åŒ–éº»çƒ¦ï¼ŒåŠ è½½æ…¢
livereï¼ŒåŠ è½½æ…¢ï¼Œå¹¿å‘Šéœ€è‡ªè¡Œå±è”½

]]></content>
      <categories>
        <category>engineering</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Open vSwitchè¿›è¡ŒVxLANéš§é“å®éªŒ</title>
    <url>/dev-openvswitch-vxlan/</url>
    <content><![CDATA[å‰è¨€ä¸ºäº†åŠ æ·±å¯¹VxLANç½‘ç»œæ¨¡å¼çš„ç†è§£ï¼ŒéƒåŒå­¦æ‰“ç®—ä½¿ç”¨Open vSwitchè¿›è¡ŒVxLANéš§é“å®éªŒã€‚ä¸»è¦å‚è€ƒæ­å»ºåŸºäºOpen vSwitchçš„VxLANéš§é“å®éªŒå’ŒåŸºäºOpen vSwitchçš„VxLANéš§é“å®éªŒç½‘ç»œã€‚


è™šæ‹Ÿæœºå‡†å¤‡ä½¿ç”¨VirtualBoxåˆ›å»ºä¸¤ä¸ªè™šæ‹Ÿæœºï¼Œä¸»æœºååˆ†åˆ«ä¸ºcontrollerå’Œcomputeï¼Œç³»ç»Ÿå‡ä¸ºubuntu-16.04.4-server-amd64ã€‚
è¿™ä¸¤å°è™šæ‹Ÿæœºï¼Œéƒ½æœ‰ä¸¤å—ç½‘å¡ã€‚eth0è´Ÿè´£ä¸»æœºé—´ç›¸äº’é€šä¿¡ï¼Œeth1è´Ÿè´£ä¸Šç½‘ã€‚controllerçš„eth0çš„IPä¸º192.168.56.110ï¼Œcomputeçš„eth0çš„IPä¸º192.168.56.111ã€‚controllerå’Œcomputeå¯ä»¥äº’ç›¸pingé€šã€‚
å®‰è£…openvswitché€šè¿‡æºç å®‰è£…å‚è€ƒOpen vSwitch on Linux, FreeBSD and NetBSDï¼Œè¿™é‡Œæˆ‘ä»¬ä¸ä½¿ç”¨æºç å®‰è£…ï¼Œè€Œæ˜¯ä½¿ç”¨aptåŒ…ç®¡ç†å·¥å…·ç›´æ¥å®‰è£…ï¼Œå‚è€ƒDebianå®‰è£…openvswitchã€‚
ä¸€æ¡å‘½ä»¤æå®šï¼š
apt -y install  openvswitch-switch openvswitch-common openvswitch-switch-dpdk

å®éªŒä¸€ç›®æ ‡å¦‚ä¸Šå›¾ï¼Œåˆ†åˆ«ç»™ä¸¤å°è™šæ‹Ÿæœºçš„br1æŒ‡å®šä¸¤ä¸ª ç›¸åŒç½‘æ®µ çš„ipï¼Œç„¶åé€šè¿‡æ­å»ºVXLANéš§é“è®©è¿™ä¸¤ä¸ªä¸åŒæœºå™¨çš„ç½‘æ¡¥èƒ½å¤Ÿå®ç°é€šä¿¡ã€‚
controller1ã€åœ¨controllerä¸Šæ·»åŠ br0å’Œbr1ä¸¤ä¸ªç½‘æ¡¥
ovs-vsctl add-br br0ovs-vsctl add-br br1

2ã€æŸ¥çœ‹ç½‘æ¡¥ovs-vsctl show
3ã€åœ¨br0ä¸Šæ·»åŠ ä¸€ä¸ªç«¯å£ï¼Œå°†eth0æŒ‚è½½åˆ°br0ä¸Šã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯æ–¹ä¾¿æˆ‘ä»¬åœ¨è™šæ‹Ÿç½‘æ¡¥ä¸Šæ·»åŠ å¤šä¸ªç«¯å£ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œè¿™æ ·ä¸å¿…å—é™äºeth0çš„æœ‰é™ç«¯å£ã€‚ovs-vsctl add-port br0 eth0
4ã€æ­¤æ—¶æˆ‘ä»¬å°†åŸå…ˆeth0åˆ†é…çš„ipæ¸…é™¤å¹¶æŒ‡å®šç»™br0ï¼Œè®©è™šæ‹Ÿæœºç½‘ç»œèƒ½é€šè¿‡br0ç»§ç»­å·¥ä½œã€‚
ifconfig eth0 0 upifconfig br0 192.168.56.110/24 up

5ã€æ ¹æ®å®é™…æƒ…å†µé…ç½®ä¸€ä¸‹br0çš„ç½‘å…³ï¼ˆå¯é€‰ï¼‰ã€‚route add default gw 192.168.56.1 br0
6ã€ç»™ç½‘æ¡¥br1åˆ†é…ä¸€ä¸ªipã€‚ifconfig br1 172.16.0.1/24 up
7ã€æŸ¥çœ‹ipifconfig
ipæ°¸ä¹…ç”Ÿæ•ˆä»¥ä¸Šipé…ç½®ï¼Œåœ¨é‡å¯åä¼šå¤±æ•ˆï¼Œè¦æƒ³æ°¸ä¹…æœ‰æ•ˆï¼Œéœ€è¦ä¿®æ”¹interfacesé…ç½®ã€‚vim /etc/network/interfacesï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
auto eth0iface eth0 inet manualup ifconfig $IFACE 0.0.0.0 upup ifconfig $IFACE promiscauto eth1iface eth1 inet dhcpauto br0iface br0 inet staticaddress 192.168.56.110netmask 255.255.255.0auto br1iface br1 inet staticaddress 172.16.0.1netmask 255.255.255.0

compute1ã€åœ¨computeä¸Šæ·»åŠ br0å’Œbr1ä¸¤ä¸ªç½‘æ¡¥
ovs-vsctl add-br br0ovs-vsctl add-br br1

2ã€åœ¨br0ä¸Šæ·»åŠ ä¸€ä¸ªç«¯å£ï¼Œå°†eth0æŒ‚è½½åˆ°br0ä¸Šã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯æ–¹ä¾¿æˆ‘ä»¬åœ¨è™šæ‹Ÿç½‘æ¡¥ä¸Šæ·»åŠ å¤šä¸ªç«¯å£ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œè¿™æ ·ä¸å¿…å—é™äºeth0çš„æœ‰é™ç«¯å£ã€‚ovs-vsctl add-port br0 eth0
3ã€æ­¤æ—¶æˆ‘ä»¬å°†åŸå…ˆeth0åˆ†é…çš„ipæ¸…é™¤å¹¶æŒ‡å®šç»™br0ï¼Œè®©è™šæ‹Ÿæœºç½‘ç»œèƒ½é€šè¿‡br0ç»§ç»­å·¥ä½œã€‚
ifconfig eth0 0 upifconfig br0 192.168.56.111/24 up

4ã€æ ¹æ®å®é™…æƒ…å†µé…ç½®ä¸€ä¸‹br0çš„ç½‘å…³ï¼ˆå¯é€‰ï¼‰ã€‚route add default gw 192.168.56.1 br0
5ã€ç»™ç½‘æ¡¥br1åˆ†é…ä¸€ä¸ªipã€‚ifconfig br1 172.16.0.2/24 up
æ­å»ºVxLANéš§é“1ã€åœ¨controlleræŸ¥çœ‹è¿é€šæ€§
ping 192.168.56.111 -c3ping 172.16.0.2 -c3
ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œcontrollerå¯ä»¥pingé€šè¿‡192.168.56.111ï¼Œå´pingä¸é€š172.16.0.2ã€‚
2ã€åœ¨controllerä¸Šè®¾ç½®VxLANï¼Œè¿œç«¯ipè®¾ç½®ä¸ºcomputeèƒ½å¯¹å¤–é€šä¿¡çš„br0çš„ipã€‚
ovs-vsctl add-port br1 vx1 -- set interface vx1 type=vxlan options:remote_ip=192.168.56.111

æ­¤æ—¶ï¼Œä¾ç„¶pingä¸é€š172.16.0.2ã€‚
3ã€åœ¨computeä¸Šè®¾ç½®VxLANï¼Œè¿œç«¯ipè®¾ç½®ä¸ºcontrollerèƒ½å¯¹å¤–é€šä¿¡çš„br0çš„ipã€‚
ovs-vsctl add-port br1 vx1 -- set interface vx1 type=vxlan options:remote_ip=192.168.56.110

4ã€åœ¨controllerä¸ŠéªŒè¯VxLANéš§é“ping 172.16.0.2 -c3å¦‚ä¸Šå›¾ï¼Œcontrollerçš„br1å’Œcomputeçš„br1å·²ç»è¿é€šï¼Œå®éªŒæˆåŠŸã€‚
å®éªŒäºŒç›®æ ‡å¦‚ä¸Šå›¾ï¼Œåˆ†åˆ«ç»™ä¸¤å°è™šæ‹Ÿæœºçš„br1æŒ‡å®šä¸¤ä¸ª ä¸åŒç½‘æ®µ çš„ipï¼Œç„¶åé€šè¿‡æ­å»ºVXLANéš§é“è®©è¿™ä¸¤ä¸ªä¸åŒç½‘æ®µçš„ç½‘æ¡¥èƒ½å¤Ÿå®ç°é€šä¿¡ã€‚
æ­å»ºVxLANéš§é“ç´§æ¥ç€å®éªŒä¸€ï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºäº†VxLANéš§é“ï¼Œcontrollerå’Œcomputeåœ¨172.16.0.0/24ç½‘æ®µå¯ä»¥ç›¸äº’pingé€šã€‚
1ã€åœ¨computeä¸Šä¿®æ”¹ipä¸ºå…¶ä»–ç½‘æ®µifconfig br1 172.16.1.1/24 up
2ã€åœ¨controllerä¸ŠéªŒè¯VxLANéš§é“ping 172.16.1.1 -c3å¦‚ä¸Šå›¾ï¼Œcontrolleræ— æ³•è¿é€šcomputeï¼Œè¿™æ˜¯å› ä¸ºï¼Œä¸é€šç½‘æ®µé—´çš„é€šä¿¡éœ€è¦è·¯ç”±ã€‚
3ã€åœ¨controllerä¸Šè®¾ç½®è·¯ç”±route add -net 172.16.1.0/24 gw 172.16.0.1 dev br1
4ã€åœ¨computeä¸Šè®¾ç½®è·¯ç”±route add -net 172.16.0.0/24 gw 172.16.1.1 dev br1
5ã€å†æ¬¡åœ¨controllerä¸ŠéªŒè¯VxLANéš§é“ping 172.16.1.1 -c3å¦‚ä¸Šå›¾ï¼Œcontrollerçš„br1å’Œcomputeçš„br1å·²ç»è¿é€šï¼Œå®éªŒæˆåŠŸã€‚
è·¯ç”±æ°¸ä¹…ç”Ÿæ•ˆä»¥ä¸Šè·¯ç”±é…ç½®ï¼Œåœ¨é‡å¯åä¼šå¤±æ•ˆï¼Œè¦æƒ³æ°¸ä¹…æœ‰æ•ˆï¼Œéœ€è¦ä¿®æ”¹interfacesé…ç½®ã€‚controllerä¸Šï¼Œvim /etc/network/interfacesï¼Œæ·»åŠ ï¼š
up route add -net 172.16.1.0/24 gw 172.16.0.1 dev br1

computeä¸Šï¼Œvim /etc/network/interfacesï¼Œæ·»åŠ ï¼š
up route add -net 172.16.0.0/24 gw 172.16.1.1 dev br1

å®éªŒä¸‰ç›®æ ‡ç´§æ¥ç€å®éªŒäºŒï¼Œé—®é¢˜æ¥äº†ï¼Œä¸¤ä¸ªè™šæ‹Ÿæœºä¹‹é—´å¯ä»¥åˆ›å»ºVxLANéš§é“ï¼Œé‚£ä¹ˆä¸‰ä¸ªè™šæ‹Ÿæœºä¹‹é—´è¯¥æ€ä¹ˆå¤„ç†ï¼Ÿæœ¬å®éªŒï¼Œå°±è¦åœ¨ä¸‰ä¸ªè™šæ‹Ÿæœºä¹‹é—´å»ºç«‹XxLANéš§é“ï¼Œå®ç°é€šä¿¡ã€‚
ipé…ç½®å‚ç…§å®éªŒä¸€ï¼šcontrollerçš„br0é…ç½®ipä¸º192.168.56.110/24ï¼Œbr1é…ç½®ipä¸º172.16.0.1/24ã€‚compute1çš„br0é…ç½®ipä¸º192.168.56.111/24ï¼Œbr1é…ç½®ipä¸º172.16.1.1/24ã€‚compute2çš„br0é…ç½®ipä¸º192.168.56.112/24ï¼Œbr1é…ç½®ipä¸º172.16.2.1/24ã€‚
æ­å»ºVxLANéš§é“1ã€åœ¨controllerä¸Šè®¾ç½®VxLANï¼Œè¿œç«¯ipè®¾ç½®ä¸ºcompute1å’Œcompute2èƒ½å¯¹å¤–é€šä¿¡çš„br0çš„ipã€‚
ovs-vsctl add-port br1 vx1 -- set interface vx1 type=vxlan options:remote_ip=192.168.56.111ovs-vsctl add-port br1 vx2 -- set interface vx2 type=vxlan options:remote_ip=192.168.56.112

2ã€åœ¨compute1ä¸Šè®¾ç½®VxLANï¼Œè¿œç«¯ipè®¾ç½®ä¸ºcontrollerèƒ½å¯¹å¤–é€šä¿¡çš„br0çš„ipã€‚
ovs-vsctl add-port br1 vx1 -- set interface vx1 type=vxlan options:remote_ip=192.168.56.110

3ã€åœ¨compute2ä¸Šè®¾ç½®VxLANï¼Œè¿œç«¯ipè®¾ç½®ä¸ºcontrollerèƒ½å¯¹å¤–é€šä¿¡çš„br0çš„ipã€‚
ovs-vsctl add-port br1 vx1 -- set interface vx1 type=vxlan options:remote_ip=192.168.56.110

5ã€åœ¨controllerä¸Šæ·»åŠ è·¯ç”±
route add -net 172.16.0.0/16 gw 172.16.0.1 dev br1

6ã€åœ¨compute1ä¸Šæ·»åŠ è·¯ç”±route add -net 172.16.0.0/16 gw 172.16.1.1 dev br1
7ã€åœ¨compute2ä¸Šæ·»åŠ è·¯ç”±route add -net 172.16.0.0/16 gw 172.16.2.1 dev br1
8ã€åœ¨controlleræµ‹è¯•è¿é€šcompute1å’Œcompute2
ping 172.16.1.1 -c3ping 172.16.2.1 -c3
ç¥å¥‡çš„äº‹æƒ…å‘ç”Ÿäº†ï¼Œå¯ä»¥pingé€š172.16.1.1çš„æ—¶å€™ï¼Œ172.16.2.1ä¸é€šï¼›å¯ä»¥pingé€š172.16.2.1çš„æ—¶å€™ï¼Œ172.16.1.1ä¸é€šã€‚è¿™æ˜¯å› ä¸ºï¼Œåœ¨å®Œæˆå®éªŒäºŒåï¼ŒéƒåŒå­¦ç›´æ¥å¤åˆ¶äº†computeè™šæ‹Ÿæœºä½œä¸ºcompute2ï¼Œç»“æœå¯¼è‡´ä¸¤å°è™šæ‹Ÿæœºçš„br1çš„macåœ°å€ç›¸åŒã€‚compute2åˆ é™¤br1é‡å»ºï¼Œé—®é¢˜è§£å†³ã€‚
9ã€åœ¨compute1æµ‹è¯•è¿é€šcompute2ping 172.16.2.1 -c3æ­¤æ—¶ï¼Œcompute1å’Œcompute2çš„br1å·²ç»è¿é€šã€‚ç”±ä¸Šé¢çš„é…ç½®æˆ‘ä»¬çŸ¥é“ï¼Œå®ƒä»¬ä¹‹é—´å¹¶æ²¡æœ‰å»ºç«‹ç›´æ¥éš§é“ï¼Œè€Œæ˜¯é€šè¿‡controllerè¿›è¡Œè½¬å‘ã€‚
æœ‰æ„æ€çš„æ˜¯ï¼Œä½¿ç”¨tracerouteæŸ¥çœ‹è·¯ç”±ï¼Œå‘ç°å®ƒä»¬è¿æ¥æ—¶å¹¶æ²¡æœ‰ç»è¿‡ç½‘å…³ï¼ˆcompute1çš„172.16.1.1å’Œcontrollerçš„172.16.0.1ï¼‰ï¼Œè€Œæ˜¯ç›´è¿ã€‚
traceroute 172.16.2.1traceroute 172.16.2.1 -I

åè®°è‡³æ­¤ï¼Œä½¿ç”¨Open vSwitchè¿›è¡ŒVxLANéš§é“å®éªŒå®Œæˆã€‚ä¸‰ä¸ªå®éªŒéƒ½æ¯”è¾ƒåŸºç¡€ï¼Œè‡³äºæ›´é«˜çº§çš„å®éªŒï¼Œä»¥åå†ç ”ç©¶ï¼Œæ¯”å¦‚åœ¨br1ç½‘æ¡¥ä¸Šè¿æ¥cirrosè™šæ‹Ÿæœºã€æ·»åŠ tun/tapè®¾å¤‡ã€æ·»åŠ vethè®¾å¤‡ç­‰ã€‚
ä¹¦ç­¾Vxlanå­¦ä¹ ç¬”è®°â€”â€”åŸç†
æœ€è¯¦ç»†çš„VlanåŸç†ä»‹ç»
SDNä¸OpenFlowæŠ€æœ¯ç®€ä»‹
OpenStackç½‘ç»œå®æˆ˜ç³»åˆ—ä¸€ï¼šé€šè¿‡Openvswitchå®è·µäº†è§£äº¤æ¢æœºçš„åŸºæœ¬æ¦‚å¿µå’Œæ“ä½œ
Open vSwitchä½¿ç”¨æ¡ˆä¾‹æ‰©å±•å®éªŒ
TAP è®¾å¤‡ä¸ VETH è®¾å¤‡
Linuxè™šæ‹Ÿç½‘ç»œè®¾å¤‡ä¹‹tun/tap
Linuxè™šæ‹Ÿç½‘ç»œè®¾å¤‡ä¹‹veth
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”vxlanç½‘ç»œè¿›é˜¶</title>
    <url>/dev-ubuntu16-manual-openstack-vxlan-advance/</url>
    <content><![CDATA[ç›®æ ‡ã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”openvswitchã€‹ä¸€æ–‡ä¸­ï¼Œé…ç½®å¥½äº†openvswitchä½œä¸ºè™šæ‹Ÿäº¤æ¢æœºã€‚
ã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”vxlanç½‘ç»œã€‹ä¸€æ–‡ä¸­ï¼Œä½¿ç”¨linuxbridgeè™šæ‹Ÿäº¤æ¢æœºé…ç½®è¿‡vxlanç½‘ç»œæ¨¡å¼ã€‚
å› ä¸ºlinuxbridgeæ¢æˆäº†openvswitchï¼Œæ‰€ä»¥ï¼Œæœ¬æ–‡å°±å†æ¥ç ”ç©¶ä¸€ä¸‹vxlanç½‘ç»œæ¨¡å¼çš„é…ç½®ã€‚ä¸»è¦å‚è€ƒOpenStack Pike : Neutron Network (VXLAN)å’Œopenstackä½¿ç”¨openvswitchå®ç°vxlançš„æ–¹æ³•ã€‚å¦‚æœè¦é…ç½®flatç½‘ç»œæ¨¡å¼ï¼Œå‚è€ƒOpenStack Pike : Neutron Network (FLAT)ã€‚


å®‰è£…é…ç½®rootç”¨æˆ·ä¸ºäº†é¿å…æƒé™é—®é¢˜ï¼Œå»ºè®®åˆ‡æ¢åˆ°rootç”¨æˆ·è¿›è¡Œæ“ä½œï¼ˆå¦åˆ™è¦åŠ å¾ˆå¤šsudoï¼‰ã€‚sudo -i
æ§åˆ¶èŠ‚ç‚¹0ã€å¤‡ä»½é…ç½®ï¼ˆå¯é€‰æ“ä½œï¼‰ï¼šcp /etc/neutron/plugins/ml2/ml2_conf.ini&#123;,.bak&#125;
1ã€vi /etc/neutron/plugins/ml2/ml2_conf.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 130: add a value to tenant_network_typestenant_network_types = vxlan# line 181: add[ml2_type_flat]flat_networks = physnet1# line 235: add[ml2_type_vxlan]vni_ranges = 1:1000

2ã€é‡å¯neutron-serversystemctl restart neutron-server
ç½‘ç»œèŠ‚ç‚¹è¿™é‡Œæˆ‘ä»¬çš„ç½‘ç»œèŠ‚ç‚¹å’Œæ§åˆ¶èŠ‚ç‚¹æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ã€‚
1ã€åˆ›å»ºç½‘æ¡¥br-eth2ovs-vsctl add-br br-eth2
2ã€æŠŠbr-eth2è¿æ¥åˆ°eth2ovs-vsctl add-port br-eth2 eth2
3ã€vi /etc/neutron/plugins/ml2/ml2_conf.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 130: add a value to tenant_network_typestenant_network_types = vxlan# line 181: add[ml2_type_flat]flat_networks = physnet1# line 235: add[ml2_type_vxlan]vni_ranges = 1:1000

4ã€vi /etc/neutron/plugins/ml2/openvswitch_agent.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 117: add[agent]tunnel_types = vxlanl2_population = Trueprevent_arp_spoofing = True# line 195: add (specify IP address of this host for local_ip)[ovs]local_ip = 172.16.0.105bridge_mappings = physnet1:br-eth2

5ã€é‡å¯ç›¸å…³æœåŠ¡
for service in dhcp-agent l3-agent metadata-agent openvswitch-agent; dosystemctl restart neutron-$servicedone

è®¡ç®—èŠ‚ç‚¹1ã€vi /etc/neutron/plugins/ml2/ml2_conf.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 130: add a value to tenant_network_typestenant_network_types = vxlan# line 181: add[ml2_type_flat]flat_networks = physnet1# line 235: add[ml2_type_vxlan]vni_ranges = 1:1000

2ã€vi /etc/neutron/plugins/ml2/openvswitch_agent.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 117: add[agent]tunnel_types = vxlanl2_population = Trueprevent_arp_spoofing = True# line 195: add (specify IP address of this host for local_ip)[ovs]local_ip = 172.16.0.106

3ã€é‡å¯openvswitch-agentsystemctl restart neutron-openvswitch-agent
ä½¿ç”¨åœ¨æ§åˆ¶èŠ‚ç‚¹æµ‹è¯•ä½¿ç”¨vxlanï¼Œå®é™…ä¸Šå¯ä»¥åœ¨ä»»æ„èŠ‚ç‚¹ä½¿ç”¨ã€‚
å†…æ ¸é…ç½®1ã€vim /etc/sysctl.confï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 19, uncomment and changenet.ipv4.conf.default.rp_filter=0net.ipv4.conf.all.rp_filter=0# line 28, uncommentnet.ipv4.ip_forward=1# end line, addnet.bridge.bridge-nf-call-iptables = 1net.bridge.bridge-nf-call-ip6tables = 1

2ã€ä½¿å†…æ ¸é…ç½®ç”Ÿæ•ˆsysctl -p
åˆ›å»ºvxlanç½‘ç»œ1ã€ä½¿adminç¯å¢ƒç”Ÿæ•ˆ. admin-openrc
2ã€åˆ›å»ºè·¯ç”±router01openstack router create router01
3ã€åˆ›å»ºå†…éƒ¨ç½‘ç»œint_netopenstack network create int_net --provider-network-type vxlan
4ã€åœ¨å†…éƒ¨ç½‘ç»œä¸­åˆ›å»ºå­ç½‘
openstack subnet create subnet1 --network int_net \--subnet-range 192.168.100.0/24 --gateway 192.168.100.1 \--dns-nameserver 10.0.0.10

5ã€æŠŠå†…éƒ¨ç½‘ç»œint_netè¿æ¥åˆ°è·¯ç”±router01ä¸Šopenstack router add subnet router01 subnet1
6ã€åˆ›å»ºå¤–éƒ¨ç½‘ç»œext_net
openstack network create \--provider-physical-network physnet1 \--provider-network-type flat --external ext_net

7ã€åœ¨å¤–éƒ¨ç½‘ç»œä¸­åˆ›å»ºå­ç½‘subnet2
openstack subnet create subnet2 \--network ext_net --subnet-range 10.0.0.0/24 \--allocation-pool start=10.0.0.200,end=10.0.0.254 \--gateway 10.0.0.1 --dns-nameserver 10.0.0.10 --no-dhcp

8ã€æŠŠext_netçš„ç½‘å…³è®¾ç½®ä¸ºrouter01openstack router set router01 --external-gateway ext_net
æ­¤æ—¶ï¼Œåœ¨horizonæ§åˆ¶å°çœ‹åˆ°çš„ç½‘ç»œæ‹“æ‰‘å¦‚ä¸‹ï¼š
æˆæƒç½‘ç»œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰é¡¹ç›®éƒ½å¯ä»¥è®¿é—®åˆ°å¤–éƒ¨ç½‘ç»œï¼Œä½†å¯¹äºå†…éƒ¨ç½‘ç»œï¼Œåªæœ‰ç®¡ç†é¡¹ç›®å¯ä»¥è®¿é—®å®ƒã€‚å› æ­¤éœ€è¦å¯¹å…¶ä»–é¡¹ç›®è¿›è¡Œæˆæƒï¼Œä½¿é¡¹ç›®ä¸­çš„ç”¨æˆ·å¯ä»¥ä½¿ç”¨å†…éƒ¨ç½‘ç»œã€‚
1ã€æŸ¥çœ‹rbacç½‘ç»œopenstack network rbac list
2ã€æŸ¥çœ‹rbacç½‘ç»œç»†èŠ‚openstack network rbac show [rbac-id]
3ã€æŸ¥çœ‹ç½‘ç»œopenstack network list
4ã€æŸ¥çœ‹é¡¹ç›®openstack project list
5ã€æˆæƒint_netç»™siaté¡¹ç›®ï¼Œæƒé™ä¸ºaccess_as_shared
netID=$(openstack network list | grep int_net | awk &#x27;&#123; print $2 &#125;&#x27;) prjID=$(openstack project list | grep siat | awk &#x27;&#123; print $2 &#125;&#x27;) openstack network rbac create --target-project $prjID --type network --action access_as_shared $netID 

ä½¿ç”¨vxlanç½‘ç»œ1ã€åˆ‡æ¢åˆ°siaté¡¹ç›®çš„voidkingç”¨æˆ·ç¯å¢ƒ. voidkingrc
2ã€æŸ¥çœ‹å®ä¾‹æ¨¡æ¿ã€é•œåƒã€ç½‘ç»œ
openstack flavor listopenstack image list openstack network list


3ã€å®‰å…¨ç»„å’Œå¯†é’¥ä½¿ç”¨ã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”åˆ›å»ºå®ä¾‹ã€‹ä¸€æ–‡ä¸­åˆ›å»ºçš„secgroup01å’Œvkkeyã€‚
4ã€åˆ›å»ºå®ä¾‹
netID=$(openstack network list | grep int_net | awk &#x27;&#123; print $2 &#125;&#x27;) openstack server create --flavor m1.tiny --image cirros --security-group secgroup01 --nic net-id=$netID --key-name vkkey cirros1

5ã€æŸ¥çœ‹å®ä¾‹openstack server list
6ã€ç»™å®ä¾‹æ·»åŠ æµ®åŠ¨IP
openstack floating ip create ext_netopenstack server add floating ip cirros1 10.0.0.206

7ã€æŸ¥çœ‹æµ®åŠ¨IPopenstack floating ip show 10.0.0.206
8ã€å†æ¬¡æŸ¥çœ‹å®ä¾‹openstack server listå¯ä»¥å‘ç°ï¼Œcirros1å·²ç»æœ‰äº†ä¸¤ä¸ªIPåœ°å€ã€‚
9ã€æµ‹è¯•è¿é€šping 10.0.0.206ï¼Œä¸é€šã€‚
ç½‘ç»œè°ƒè¯•è¿æ¥å®ä¾‹1ã€æµ‹è¯•ç½‘å…³ping 10.0.0.1ï¼Œä¸é€šã€‚
2ã€å°†br-eth2çš„ipè®¾ç½®ä¸º10.0.0.1
ifconfig eth2 0.0.0.0 ifconfig br-eth2 10.0.0.1/24

3ã€æµ‹è¯•è¿é€šping 10.0.0.206ï¼Œå·²ç»è¿é€šï¼Œniceã€‚
4ã€sshç™»å½•å®ä¾‹ssh cirros@10.0.0.206ï¼Œé»˜è®¤å¯†ç ä¸ºgocubsgoã€‚
æˆ–è€…vncç™»å½•å®ä¾‹openstack console url show cirros1æŸ¥çœ‹åˆ°urlåï¼Œåœ¨æµè§ˆå™¨ç™»å½•cirros1ã€‚
è¿æ¥å¤–ç½‘å‚è€ƒUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”å®ä¾‹è®¿é—®å¤–ç½‘ï¼Œé…ç½®å®ä¾‹è¿æ¥å¤–ç½‘ã€‚
1ã€åœ¨æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œ
iptables -I INPUT -i br-eth2 -j ACCEPTiptables -I INPUT -i eth2 -j ACCEPTiptables -t nat -A POSTROUTING -s 10.0.0.0/24 -o eth1 -j SNAT --to 172.16.0.105

2ã€ç™»å½•cirros1ssh cirros@10.0.0.206
2ã€æµ‹è¯•è®¿é—®ping 8.8.8.8 -c3
3ã€ä¿®æ”¹resolv.confsudo vi /etc/resolv.confæ·»åŠ ï¼š
nameserver 180.76.76.76

4ã€æµ‹è¯•è®¿é—®ping www.baidu.com -c3
]]></content>
      <categories>
        <category>engineering</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”openvswitch</title>
    <url>/dev-ubuntu16-manual-openstack-openvswitch/</url>
    <content><![CDATA[ç›®æ ‡ã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”å®ä¾‹è®¿é—®å¤–ç½‘ã€‹ä¸€æ–‡ä¸­ï¼Œå·²ç»é…ç½®å¥½äº†å®ä¾‹è®¿é—®å¤–ç½‘ã€‚ä½†æ˜¯ä»æœ‰ä¸è¶³ï¼Œå› ä¸ºæˆ‘ä»¬çœ‹ä¸åˆ°æ›´è¯¦ç»†ç½‘ç»œä¿¡æ¯ï¼Œæ’æŸ¥é—®é¢˜ä¸æ–¹ä¾¿ã€‚
æœ¬æ–‡ï¼Œæˆ‘ä»¬æŠŠlinuxbridge-agentæ›´æ¢ä¸ºopenvswitch-agentï¼Œä¸»è¦å‚è€ƒOpenStack Pike : Configure Neutronã€Neutron Configuration Optionså’ŒOpen vSwitch: Self-service networksã€‚


openvswitchç®€ä»‹ä»¥ä¸‹ç®€ä»‹æ‘˜è‡ªopenstackåº•å±‚æŠ€æœ¯-ä½¿ç”¨openvswitchã€‚
åœ¨è¿‡å»ï¼Œæ•°æ®ä¸­å¿ƒçš„æœåŠ¡å™¨æ˜¯ç›´æ¥è¿åœ¨ç¡¬ä»¶äº¤æ¢æœºä¸Šï¼Œåæ¥VMwareå®ç°äº†æœåŠ¡å™¨è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œä½¿è™šæ‹ŸæœåŠ¡å™¨(VMs)èƒ½å¤Ÿè¿æ¥åœ¨è™šæ‹Ÿäº¤æ¢æœºä¸Šã€‚å€ŸåŠ©è¿™ä¸ªè™šæ‹Ÿäº¤æ¢æœºï¼Œå¯ä»¥ä¸ºæœåŠ¡å™¨ä¸Šè¿è¡Œçš„VMsæˆ–å®¹å™¨æä¾›é€»è¾‘çš„è™šæ‹Ÿçš„ä»¥å¤ªç½‘æ¥å£ï¼Œè¿™äº›é€»è¾‘æ¥å£éƒ½è¿æ¥åˆ°è™šæ‹Ÿäº¤æ¢æœºä¸Šã€‚æœ‰ä¸‰ç§æ¯”è¾ƒæµè¡Œçš„è™šæ‹Ÿäº¤æ¢æœºï¼šVMware virtual switchï¼ŒCisco Nexus 1000Vå’ŒOpen vSwitchã€‚
Open vSwitch(OVS)æ˜¯è¿è¡Œåœ¨è™šæ‹ŸåŒ–å¹³å°ä¸Šçš„è™šæ‹Ÿäº¤æ¢æœºï¼Œå…¶æ”¯æŒOpenFlowåè®®ï¼Œä¹Ÿæ”¯æŒgre/vxlan/IPsecç­‰éš§é“æŠ€æœ¯ã€‚åœ¨OVSä¹‹å‰ï¼ŒåŸºäºLinuxçš„è™šæ‹ŸåŒ–å¹³å°æ¯”å¦‚KVMæˆ–Xenä¸Šï¼Œç¼ºå°‘ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„è™šæ‹Ÿäº¤æ¢æœºï¼Œå› æ­¤OVSè¿…é€Ÿå´›èµ·å¹¶å¼€å§‹åœ¨Xen/KVMä¸­æµè¡Œèµ·æ¥ï¼Œå¹¶ä¸”åº”ç”¨äºè¶Šæ¥è¶Šå¤šçš„å¼€æºé¡¹ç›®ï¼Œæ¯”å¦‚openstack neutronä¸­çš„ç½‘ç»œè§£å†³æ–¹æ¡ˆã€‚
åœ¨è™šæ‹Ÿäº¤æ¢æœºçš„Flowæ§åˆ¶å™¨æˆ–ç®¡ç†å·¥å…·æ–¹é¢ï¼Œä¸€äº›å•†ä¸šäº§å“éƒ½é›†æˆæœ‰æ§åˆ¶å™¨æˆ–ç®¡ç†å·¥å…·ï¼Œæ¯”å¦‚Cisco 1000Vçš„Virtual Supervisor Manager(VSM)ï¼ŒVMwareçš„åˆ†å¸ƒå¼äº¤æ¢æœºä¸­çš„vCenterã€‚è€ŒOVSåˆ™éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹æ§åˆ¶å™¨æˆ–ç®¡ç†å·¥å…·å®ç°å¤æ‚çš„è½¬å‘ç­–ç•¥ã€‚ä¾‹å¦‚OVSæ”¯æŒOpenFlowåè®®ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä»»ä½•æ”¯æŒOpenFlowåè®®çš„æ§åˆ¶å™¨æ¥å¯¹OVSè¿›è¡Œè¿œç¨‹ç®¡ç†ã€‚OpenStack Neutronä¸­çš„ML2æ’ä»¶ä¹Ÿèƒ½å¤Ÿå®ç°å¯¹OVSçš„ç®¡ç†ã€‚ä½†è¿™å¹¶ä¸æ„å‘³ç€OVSå¿…é¡»è¦æœ‰ä¸€ä¸ªæ§åˆ¶å™¨æ‰èƒ½å·¥ä½œã€‚åœ¨ä¸è¿æ¥å¤–éƒ¨æ§åˆ¶å™¨æƒ…å†µä¸‹ï¼ŒOVSè‡ªèº«å¯ä»¥ä¾é MACåœ°å€å­¦ä¹ å®ç°äºŒå±‚æ•°æ®åŒ…è½¬å‘åŠŸèƒ½ï¼Œå°±åƒLinux Bridgeã€‚
åœ¨åŸºäºLinuxå†…æ ¸çš„ç³»ç»Ÿä¸Šï¼Œåº”ç”¨æœ€å¹¿æ³›çš„è¿˜æ˜¯ç³»ç»Ÿè‡ªå¸¦çš„è™šæ‹Ÿäº¤æ¢æœºLinux Bridgeï¼Œå®ƒæ˜¯ä¸€ä¸ªå•çº¯çš„åŸºäºMACåœ°å€å­¦ä¹ çš„äºŒå±‚äº¤æ¢æœºï¼Œç®€å•é«˜æ•ˆï¼Œä½†åŒæ—¶ç¼ºä¹ä¸€äº›é«˜çº§ç‰¹æ€§ï¼Œæ¯”å¦‚OpenFlowã€VLAN tagã€QOSã€ACLã€Flowç­‰ï¼Œè€Œä¸”åœ¨éš§é“åè®®æ”¯æŒä¸Šï¼ŒLinux Bridgeåªæ”¯æŒvxlanï¼ŒOVSæ”¯æŒgre/vxlan/IPsecç­‰ï¼Œè¿™ä¹Ÿå†³å®šäº†OVSæ›´é€‚ç”¨äºå®ç°SDNæŠ€æœ¯ã€‚
æ§åˆ¶èŠ‚ç‚¹rootç”¨æˆ·ä¸ºäº†é¿å…æƒé™é—®é¢˜ï¼Œå»ºè®®åˆ‡æ¢åˆ°rootç”¨æˆ·è¿›è¡Œæ“ä½œï¼ˆå¦åˆ™è¦åŠ å¾ˆå¤šsudoï¼‰ã€‚sudo -i
å¸è½½linuxbridgeåœ¨å®‰è£…OVSä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆåˆ é™¤å®ä¾‹å’Œç½‘ç»œï¼Œå¸è½½æ‰linuxbridgeã€‚
1ã€ä½¿adminç¯å¢ƒç”Ÿæ•ˆ. admin-openrc
2ã€æŸ¥çœ‹å½“å‰ç½‘ç»œç»„ä»¶openstack network agent list
3ã€åœ¨dashboardä½¿ç”¨adminè´¦æˆ·ç™»å½•ï¼Œä¾æ¬¡åˆ é™¤å®ä¾‹ã€è·¯ç”±å’Œç½‘ç»œã€‚
4ã€å¸è½½linuxbridge
systemctl disable neutron-linuxbridge-agentsystemctl stop    neutron-linuxbridge-agentapt remove -y neutron-plugin-linuxbridge-agent

5ã€æŸ¥çœ‹å½“å‰ç½‘ç»œç»„ä»¶openstack network agent listæ­¤æ—¶ï¼ŒcontrollerèŠ‚ç‚¹ä¸Šçš„Linux bridge agentå·²ç»ä»ç¬‘è„¸å˜æˆäº†XXXã€‚
6ã€ä»æ•°æ®åº“åˆ é™¤Linux bridge agent
Bridge=`openstack network agent list | grep &#x27;Linux bridge agent&#x27;|awk &#x27;&#123;print $2&#125;&#x27;`echo $Bridgeneutron agent-delete $Bridgeopenstack network agent list

7ã€é‡æ–°åˆ›å»ºneutronæ•°æ®åº“mysql -uroot -pï¼Œå¯†ç ä¸ºopenstackã€‚
drop database neutron;create database neutron;

8ã€å‚è€ƒUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”neutronç¯‡ï¼Œåˆ›å»ºå¥½è¯ä¹¦å’ŒæœåŠ¡ç«¯ç‚¹ã€‚
å®‰è£…é…ç½®1ã€å®‰è£…ç›¸å…³ç»„ä»¶
apt-get -y install neutron-server neutron-metadata-agent neutron-plugin-ml2 python-neutronclient

2ã€å¤‡ä»½neutron.confmv /etc/neutron/neutron.conf /etc/neutron/neutron.conf.bak
3ã€vim /etc/neutron/neutron.confï¼Œæ–°å»ºneutron.confå†…å®¹ä¸ºï¼š
[DEFAULT]core_plugin = ml2service_plugins = routerauth_strategy = keystonestate_path = /var/lib/neutrondhcp_agent_notification = Trueallow_overlapping_ips = Truenotify_nova_on_port_status_changes = Truenotify_nova_on_port_data_changes = True# RabbitMQ connection infotransport_url = rabbit://openstack:openstack@controller[agent]root_helper = sudo /usr/bin/neutron-rootwrap /etc/neutron/rootwrap.conf# Keystone auth info[keystone_authtoken]www_authenticate_uri = http://controller:5000auth_url = http://controller:5000memcached_servers = controller:11211auth_type = passwordproject_domain_name = defaultuser_domain_name = defaultproject_name = serviceusername = neutronpassword = openstack# MariaDB connection info[database]connection = mysql+pymysql://neutron:openstack@controller/neutron# Nova connection info[nova]auth_url = http://controller:5000auth_type = passwordproject_domain_name = defaultuser_domain_name = defaultregion_name = RegionOneproject_name = serviceusername = novapassword = openstack[oslo_concurrency]lock_path = $state_path/tmp

4ã€æ›´æ”¹æƒé™chmod 640 /etc/neutron/neutron.conf
chgrp neutron /etc/neutron/neutron.conf
5ã€vi /etc/neutron/metadata_agent.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 22: uncomment and specify Nova API servernova_metadata_host = controller# line 34: uncomment and specify any secret key you likemetadata_proxy_shared_secret = openstack# line 260: uncomment and specify Memcache Servermemcache_servers = controller:11211

6ã€vi /etc/neutron/plugins/ml2/ml2_conf.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 129: add ( it&#x27;s OK with no value for &quot;tenant_network_types&quot; (set later if need) )[ml2]type_drivers = flat,vlan,gre,vxlantenant_network_types =mechanism_drivers = openvswitch,l2populationextension_drivers = port_security# line 262: uncomment and addenable_security_group = Truefirewall_driver = neutron.agent.linux.iptables_firewall.OVSHybridIptablesFirewallDriver# end line: uncommentenable_ipset = True

7ã€vi /etc/nova/nova.confï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# add follows into [DEFAULT] sectionuse_neutron = Truelinuxnet_interface_driver = nova.network.linux_net.LinuxOVSInterfaceDriverfirewall_driver = nova.virt.firewall.NoopFirewallDrivervif_plugging_is_fatal = Truevif_plugging_timeout = 300# add follows to the end : Neutron auth info# the value of metadata_proxy_shared_secret is the same with the one in metadata_agent.ini[neutron]auth_url = http://controller:5000auth_type = passwordproject_domain_name = defaultuser_domain_name = defaultregion_name = RegionOneproject_name = serviceusername = neutronpassword = openstackservice_metadata_proxy = Truemetadata_proxy_shared_secret = openstack

8ã€åˆ›å»ºé“¾æ¥ln -s /etc/neutron/plugins/ml2/ml2_conf.ini /etc/neutron/plugin.ini
9ã€ç”Ÿæˆæ•°æ®åº“æ•°æ®
su -s /bin/bash neutron -c &quot;neutron-db-manage --config-file /etc/neutron/neutron.conf --config-file /etc/neutron/plugin.ini upgrade head&quot;

10ã€é‡å¯neutronæœåŠ¡å¹¶è®¾ç½®å¼€æœºå¯åŠ¨
systemctl start neutron-server neutron-metadata-agent systemctl enable neutron-server neutron-metadata-agent 

11ã€é‡å¯nova-apisystemctl restart nova-api
ç½‘ç»œèŠ‚ç‚¹æœ¬æ–‡ä¸­ï¼Œæ§åˆ¶èŠ‚ç‚¹å’Œç½‘ç»œèŠ‚ç‚¹æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ã€‚
1ã€å®‰è£…ç›¸å…³ç»„ä»¶
apt-get -y install neutron-plugin-ml2 neutron-plugin-openvswitch-agent neutron-l3-agent neutron-dhcp-agent neutron-metadata-agent python-neutronclient

2ã€å¤‡ä»½neutron.confmv /etc/neutron/neutron.conf /etc/neutron/neutron.conf.bak
3ã€vim /etc/neutron/neutron.confï¼Œæ–°å»ºneutron.confå¦‚ä¸‹ï¼š
[DEFAULT]core_plugin = ml2service_plugins = routerauth_strategy = keystonestate_path = /var/lib/neutronallow_overlapping_ips = True# RabbitMQ connection infotransport_url = rabbit://openstack:openstack@controller[agent]root_helper = sudo /usr/bin/neutron-rootwrap /etc/neutron/rootwrap.conf# Keystone auth info[keystone_authtoken]www_authenticate_uri = http://controller:5000auth_url = http://controller:5000memcached_servers = controller:11211auth_type = passwordproject_domain_name = defaultuser_domain_name = defaultproject_name = serviceusername = neutronpassword = openstack[oslo_concurrency]lock_path = $state_path/lock

4ã€ä¿®æ”¹æƒé™chmod 640 /etc/neutron/neutron.conf
chgrp neutron /etc/neutron/neutron.conf
5ã€vi /etc/neutron/l3_agent.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 17: addinterface_driver = neutron.agent.linux.interface.OVSInterfaceDriver# line 100: uncomment and changeexternal_network_bridge = br-eth2

6ã€vi /etc/neutron/dhcp_agent.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 17: addinterface_driver = neutron.agent.linux.interface.OVSInterfaceDriver# line 28: uncommentdhcp_driver = neutron.agent.linux.dhcp.Dnsmasq# line 37: uncomment and changeenable_isolated_metadata = true

7ã€vi /etc/neutron/metadata_agent.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 22: uncomment and specify Nova API servernova_metadata_host = controller# line 34: uncomment and specify any secret key you likemetadata_proxy_shared_secret = openstack# line 260: uncomment and specify Memcache Servermemcache_servers = controller:11211

8ã€vi /etc/neutron/plugins/ml2/ml2_conf.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 129: add ( it&#x27;s OK with no value for &quot;tenant_network_types&quot; (set later if need) )[ml2]type_drivers = flat,vlan,gre,vxlantenant_network_types =mechanism_drivers = openvswitch,l2populationextension_drivers = port_security# line 262: uncomment and addenable_security_group = Truefirewall_driver = neutron.agent.linux.iptables_firewall.OVSHybridIptablesFirewallDriver# end line: uncommentenable_ipset = True

9ã€åˆ›å»ºé“¾æ¥ln -s /etc/neutron/plugins/ml2/ml2_conf.ini /etc/neutron/plugin.ini
10ã€é‡å¯openvswitchå¹¶è®¾ç½®å¼€æœºå¯åŠ¨
systemctl restart openvswitch-switch systemctl enable openvswitch-switch 

11ã€åˆ›å»ºç½‘æ¡¥br-intovs-vsctl add-br br-int
12ã€é‡å¯ç›¸å…³æœåŠ¡å¹¶è®¾ç½®å¼€æœºå¯åŠ¨
for service in dhcp-agent l3-agent metadata-agent openvswitch-agent; dosystemctl start neutron-$servicesystemctl enable neutron-$servicedone 

13ã€åœ¨æ§åˆ¶èŠ‚ç‚¹æŸ¥çœ‹neutronæœåŠ¡
. admin-openrcopenstack network agent list

è®¡ç®—èŠ‚ç‚¹rootç”¨æˆ·ä¸ºäº†é¿å…æƒé™é—®é¢˜ï¼Œå»ºè®®åˆ‡æ¢åˆ°rootç”¨æˆ·è¿›è¡Œæ“ä½œï¼ˆå¦åˆ™è¦åŠ å¾ˆå¤šsudoï¼‰ã€‚sudo -i
å¸è½½linuxbridge1ã€å¸è½½linuxbridge
systemctl disable neutron-linuxbridge-agentsystemctl stop    neutron-linuxbridge-agentapt remove -y neutron-plugin-linuxbridge-agent

2ã€æ§åˆ¶èŠ‚ç‚¹æŸ¥çœ‹å½“å‰ç½‘ç»œç»„ä»¶openstack network agent list
3ã€ä»æ•°æ®åº“åˆ é™¤Linux bridge agent
Bridge=`openstack network agent list | grep &#x27;Linux bridge agent&#x27;|awk &#x27;&#123;print $2&#125;&#x27;`echo $Bridgeneutron agent-delete $Bridgeopenstack network agent list

å®‰è£…é…ç½®1ã€å®‰è£…ç›¸å…³ç»„ä»¶
apt-get -y install neutron-common neutron-plugin-ml2 neutron-plugin-openvswitch-agent

2ã€å¤‡ä»½neutron.confmv /etc/neutron/neutron.conf /etc/neutron/neutron.conf.bak
3ã€vim /etc/neutron/neutron.confï¼Œæ–°å»ºneutron.confå¦‚ä¸‹ï¼š
[DEFAULT]core_plugin = ml2service_plugins = routerauth_strategy = keystonestate_path = /var/lib/neutronallow_overlapping_ips = True# RabbitMQ connection infotransport_url = rabbit://openstack:openstack@controller[agent]root_helper = sudo /usr/bin/neutron-rootwrap /etc/neutron/rootwrap.conf# Keystone auth info[keystone_authtoken]www_authenticate_uri = http://controller:5000auth_url = http://controller:5000memcached_servers = controller:11211auth_type = passwordproject_domain_name = defaultuser_domain_name = defaultproject_name = serviceusername = neutronpassword = openstack[oslo_concurrency]lock_path = $state_path/lock

4ã€ä¿®æ”¹æƒé™chmod 640 /etc/neutron/neutron.conf
chgrp neutron /etc/neutron/neutron.conf
5ã€vi /etc/neutron/plugins/ml2/ml2_conf.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 129: add ( it&#x27;s OK with no value for &quot;tenant_network_types&quot; (set later if need) )[ml2]type_drivers = flat,vlan,gre,vxlantenant_network_types =mechanism_drivers = openvswitch,l2populationextension_drivers = port_security# line 262: uncomment and addenable_security_group = Truefirewall_driver = neutron.agent.linux.iptables_firewall.OVSHybridIptablesFirewallDriver# end line: uncommentenable_ipset = True

6ã€vi /etc/nova/nova.confï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# add follows into [DEFAULT] sectionuse_neutron = Truelinuxnet_interface_driver = nova.network.linux_net.LinuxOVSInterfaceDriverfirewall_driver = nova.virt.firewall.NoopFirewallDrivervif_plugging_is_fatal = Truevif_plugging_timeout = 300# add follows to the end : Neutron auth info# the value of metadata_proxy_shared_secret is the same with the one in metadata_agent.ini[neutron]auth_url = http://controller:5000auth_type = passwordproject_domain_name = defaultuser_domain_name = defaultregion_name = RegionOneproject_name = serviceusername = neutronpassword = openstackservice_metadata_proxy = Truemetadata_proxy_shared_secret = openstack

7ã€åˆ›å»ºé“¾æ¥ln -s /etc/neutron/plugins/ml2/ml2_conf.ini /etc/neutron/plugin.ini
8ã€é‡å¯openvswitchå¹¶è®¾ç½®å¼€æœºå¯åŠ¨
systemctl restart openvswitch-switch systemctl enable openvswitch-switch 

9ã€åˆ›å»ºç½‘æ¡¥br-intovs-vsctl add-br br-int
10ã€é‡å¯nova-computeæœåŠ¡systemctl restart nova-compute
11ã€é‡å¯neutron-openvswitch-agentå¹¶è®¾ç½®å¼€æœºå¯åŠ¨
systemctl restart neutron-openvswitch-agent systemctl enable neutron-openvswitch-agent 

13ã€åœ¨æ§åˆ¶èŠ‚ç‚¹æŸ¥çœ‹neutronæœåŠ¡
. admin-openrcopenstack network agent list
å¯ä»¥çœ‹åˆ°ï¼Œæ–°æ·»åŠ äº†computeèŠ‚ç‚¹çš„Open vSwitch agentã€‚
è‡³æ­¤ï¼Œopenvswitchå®‰è£…é…ç½®å®Œæˆã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”å®ä¾‹è®¿é—®å¤–ç½‘</title>
    <url>/dev-ubuntu16-manual-openstack-internet/</url>
    <content><![CDATA[é—®é¢˜ã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”vxlanç½‘ç»œã€‹ä¸€æ–‡ä¸­ï¼Œå·²ç»é…ç½®å¥½äº†vxlanç½‘ç»œï¼Œå¹¶ä¸”æˆåŠŸåˆ›å»ºäº†cirros1å®ä¾‹ã€‚
ä½†æ˜¯ï¼Œè¿›å…¥å®ä¾‹åï¼Œå‘ç°ä¸€ä¸ªé—®é¢˜ï¼šå®ä¾‹æ— æ³•è¿é€šå¤–ç½‘ã€‚è¿™ä¸ªé—®é¢˜æˆ‘ä»¬åœ¨ã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”horizonç¯‡ã€‹ä¸€æ–‡ä¸­å°±é‡åˆ°è¿‡ï¼Œä¹Ÿæ‰¾åˆ°äº†è§£å†³åŠæ³•ã€‚å¦‚ä»Šæ›´æ¢äº†ç½‘ç»œæ¨¡å¼ï¼Œæˆ‘ä»¬å†æ¥ç ”ç©¶ä¸€ä¸‹å®ä¾‹è®¿é—®å¤–ç½‘çš„é—®é¢˜ã€‚


è§£å†³åŠæ³•traceroute1ã€ç™»å½•cirros1ssh cirros@10.0.0.201
2ã€è·¯ç”±è·Ÿè¸ªtraceroute 8.8.8.8ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œä»è™šæ‹Ÿæœºå‘å‡ºçš„åŒ…ï¼Œä¾æ¬¡ç»è¿‡äº†192.168.100.1å’Œ10.0.0.1ï¼Œç„¶åå°±å‡ºä¸å»äº†ã€‚è¿™è¯´æ˜ï¼Œé—®é¢˜å‡ºåœ¨ç½‘æ¡¥ï¼ˆ10.0.0.1ï¼‰å’Œå¤–ç½‘çš„è¿æ¥ã€‚
snatå‚ç…§ã€ŠLinuxé…ç½®SNATä¸Šç½‘ã€‹å’Œã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”horizonç¯‡ã€‹ï¼Œå¯¹æ§åˆ¶èŠ‚ç‚¹ç½‘ç»œè¿›è¡Œè®¾ç½®ã€‚
1ã€æ¥å—è™šæ‹Ÿæœºæ•°æ®åŒ…iptables -I INPUT -i eth2 -j ACCEPT
2ã€å¼€å¯è·¯ç”±åŠŸèƒ½echo 1 &gt; /proc/sys/net/ipv4/ip_forward
3ã€ä¼ªè£…æ•°æ®åŒ…iptables -t nat -A POSTROUTING -s 10.0.0.0/24 -o eth1 -j SNAT --to 172.16.0.105
æµ‹è¯•1ã€ç™»å½•cirros1ssh cirros@10.0.0.201
2ã€æµ‹è¯•è®¿é—®ping 8.8.8.8 -c3
3ã€ä¿®æ”¹resolv.confsudo vi /etc/resolv.confæ·»åŠ ï¼š
nameserver 180.76.76.76

4ã€æµ‹è¯•è®¿é—®ping www.baidu.com -c3
]]></content>
      <categories>
        <category>engineering</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”vxlanç½‘ç»œ</title>
    <url>/dev-ubuntu16-manual-openstack-vxlan/</url>
    <content><![CDATA[ç›®æ ‡å®Œæˆäº†ã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”swiftç¯‡ã€‹ï¼Œopenstackçš„æ ¸å¿ƒç»„ä»¶å°±å…¨éƒ¨å®‰è£…å¥½äº†ã€‚ 
ä¹‹å‰çš„é…ç½®ä¸­ï¼Œä½¿ç”¨äº†ç®€å•çš„flatdhcpç½‘ç»œæ¨¡å¼é…ç½®ã€‚æœ¬æ–‡ï¼Œæˆ‘ä»¬æ¥æŠŠç½‘ç»œæ¨¡å¼ä¿®æ”¹ä¸ºvxlanï¼Œä¸»è¦å‚è€ƒOpenStack Queens : Neutron Network (VXLAN)ã€‚


ç½‘ç»œæ¨¡å¼å‚è€ƒOpenStack ç½‘ç»œï¼šNeutron åˆæ¢å’Œæ·±å…¥ç†è§£ Neutron â€“ OpenStack ç½‘ç»œå®ç°ï¼Œopenstackçš„ç½‘ç»œæ¨¡å¼å¯ä»¥åˆ†ä¸ºäº”ç§ï¼Œåˆ†åˆ«æ˜¯Flatã€FlatDHCPã€VLANã€GREå’ŒVxLANã€‚
FlatFlatæ¨¡å¼ä½¿ç”¨ä¸€ä¸ªç½‘æ¡¥å®ç°OpenStackçš„ç½‘ç»œï¼Œç”±äºæ‰€æœ‰è™šæ‹Ÿæœºéƒ½å±äºåŒä¸€ä¸ªç½‘æ®µï¼Œæ‰€ä»¥ç§°ä¹‹ä¸ºæ‰å¹³åŒ–flatã€‚ç¼ºç‚¹æ˜¯è™šæ‹Ÿæœºçš„IPéœ€è¦æ‰‹åŠ¨æ³¨å…¥ï¼Œè€Œä¸”åªæ”¯æŒlinuxæ“ä½œç³»ç»Ÿã€‚
åœ¨ Flat æ¨¡å¼ä¸‹å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š
ï¼ˆ1ï¼‰ä¸ºæ‰€æœ‰ç§Ÿæˆ·åˆ›å»ºä¸€ä¸ª IP æ± ï¼ˆ2ï¼‰åˆ›å»ºç§Ÿæˆ·ï¼ˆ3ï¼‰ç§Ÿæˆ·åˆ›å»ºè™šæ‹Ÿæœºï¼Œä¸ºè™šæ‹Ÿæœºåˆ†é… IP æ± ä¸­çš„å¯ç”¨ IP
FlatDHCPFlatDHCP ä¸ Flat çš„ä¸åŒåœ¨äºæœ‰ä¸€ä¸ª DHCP è¿›ç¨‹ï¼Œè™šæ‹Ÿæœºå¯åŠ¨æ—¶ä¼šå‘é€ dhcpdiscover ä»¥è·å– IP åœ°å€ã€‚
VLANVLANï¼ˆVirtual Local Area Networkï¼‰çš„ä¸­æ–‡åä¸ºâ€è™šæ‹Ÿå±€åŸŸç½‘â€ã€‚VLAN æ˜¯ä¸€ç§å°†å±€åŸŸç½‘è®¾å¤‡ä»é€»è¾‘ä¸Šåˆ’åˆ†æˆä¸€ä¸ªä¸ªç½‘æ®µï¼Œä»è€Œå®ç°è™šæ‹Ÿå·¥ä½œç»„çš„æ–°å…´æ•°æ®äº¤æ¢æŠ€æœ¯ã€‚
åœ¨ VLAN æ¨¡å¼ä¸‹å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š
ï¼ˆ1ï¼‰åˆ›å»ºæ–°çš„ç§Ÿæˆ·ï¼Œå¹¶è®°ä¸‹ç§Ÿæˆ·çš„æ ‡è¯†ï¼ˆ2ï¼‰ä¸ºè¯¥ç§Ÿæˆ·åˆ›å»ºç‹¬å çš„ç§æœ‰IPæ®µï¼ˆ3ï¼‰ç§Ÿæˆ·åˆ›å»ºè™šæ‹Ÿæœºï¼Œä»ç§Ÿæˆ·çš„ç§æœ‰IPæ®µå†…åˆ†é…IPç»™è™šæ‹Ÿæœº
ä¸ Flat æ¨¡å¼ç›¸æ¯”ï¼ŒVLAN æ¨¡å¼ä¸ºç½‘ç»œå¢åŠ äº†ï¼šå°†ç½‘ç»œä¸ç§Ÿæˆ·å…³è”å’Œä¸ºç½‘ç»œåˆ†é…ä¸€ä¸ª VLAN å·ã€‚
æ›´å¤šå†…å®¹å‚è€ƒNeutron Vlan Network åŸç†- æ¯å¤©5åˆ†é’Ÿç©è½¬ OpenStackï¼ˆ92ï¼‰ã€‚
GREGREï¼ˆGeneral Routing Encapsulationï¼‰æ˜¯ç‚¹å¯¹ç‚¹çš„IPéš§é“æŠ€æœ¯ï¼Œå¯ä»¥ç”¨äºè™šæ‹Ÿç½‘ç»œäº’è¿ã€‚GREå’ŒVLANç›¸æ¯”ï¼Œæœ€å¤§çš„ä¸åŒåœ¨äºVLANçš„tagè½¬æ¢æ–¹å¼ã€‚
åœ¨VLANæ¨¡å¼ä¸‹ï¼Œè™šæ‹Ÿæœºé›†ç¾¤å†…éƒ¨ç½‘ç»œä¸å¤–éƒ¨ç½‘ç»œé€šä¿¡æ—¶ï¼Œå†…éƒ¨ç½‘ç»œçš„int-VLAN:tagä¼šè½¬æ¢ä¸ºå¤–éƒ¨ç½‘ç»œçš„ex-VLAN:tagï¼›å¤–éƒ¨ç½‘ç»œä¸è™šæ‹Ÿæœºå†…éƒ¨ç½‘ç»œé€šä¿¡æ—¶ï¼Œå¤–éƒ¨ç½‘ç»œçš„ex-VLAN:tagä¼šè½¬æ¢ä¸ºå†…éƒ¨ç½‘ç»œçš„int-VLAN:tagã€‚
è€ŒGREæ¨¡å¼ä¸‹ï¼Œè™šæ‹Ÿæœºé›†ç¾¤å†…éƒ¨ç½‘ç»œä¸å¤–éƒ¨ç½‘ç»œé€šä¿¡æ—¶ï¼Œå†…éƒ¨ç½‘ç»œçš„int-VLAN:tagä¼šè½¬æ¢ä¸ºå¤–éƒ¨ç½‘ç»œçš„tunnul:tagï¼›å¤–éƒ¨ç½‘ç»œä¸è™šæ‹Ÿæœºå†…éƒ¨ç½‘ç»œé€šä¿¡æ—¶ï¼Œå¤–éƒ¨ç½‘ç»œçš„tunnel:tagä¼šè½¬æ¢ä¸ºå†…éƒ¨ç½‘ç»œçš„int-VLAN:tagã€‚

VxLANVxLANï¼ˆVirtual Extensible LANï¼‰ä¸€èˆ¬è®¤ä¸ºæ˜¯ VLAN æŠ€æœ¯çš„å»¶ä¼¸æˆ–æ›¿ä»£è€…ã€‚ç›¸è¾ƒäºé‡‡ç”¨ç‰©ç†VLANå®ç°çš„ç½‘ç»œè™šæ‹ŸåŒ–ï¼ŒVxLANæ˜¯UDPéš§é“ï¼Œå¯ä»¥ç©¿è¶ŠIPç½‘ç»œï¼Œä½¿å¾—ä¸¤ä¸ªVLANå¯ä»¥å®ç°äºŒå±‚è”é€šï¼Œå¹¶ä¸”çªç ´4095çš„VLAN IDé™åˆ¶ï¼Œæä¾›å¤šè¾¾1600ä¸‡çš„è™šæ‹Ÿç½‘ç»œå®¹é‡ã€‚
VxLAN æ¨¡å¼ä¸‹ï¼Œç½‘ç»œçš„æ¶æ„è·Ÿ GRE æ¨¡å¼ç±»ä¼¼ï¼Œæ‰€ä¸åŒçš„æ˜¯ï¼Œä¸åŒèŠ‚ç‚¹ä¹‹é—´é€šè¿‡ VxLAN éš§é“äº’é€šï¼Œå³è™šæ‹ŸåŒ–å±‚æ˜¯é‡‡ç”¨çš„ VxLAN åè®®ã€‚
VxLANé…ç½®rootç”¨æˆ·ä¸ºäº†é¿å…æƒé™é—®é¢˜ï¼Œå»ºè®®åˆ‡æ¢åˆ°rootç”¨æˆ·è¿›è¡Œæ“ä½œï¼ˆå¦åˆ™è¦åŠ å¾ˆå¤šsudoï¼‰ã€‚sudo -i
æ§åˆ¶èŠ‚ç‚¹1ã€vi /etc/neutron/plugins/ml2/ml2_conf.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 130: add a value to tenant_network_typestenant_network_types = vxlan# line 181: add[ml2_type_flat]flat_networks = physnet1# line 235: add[ml2_type_vxlan]vni_ranges = 1:1000

2ã€é‡å¯neutron-serversystemctl restart neutron-server
ç½‘ç»œèŠ‚ç‚¹è¿™é‡Œæˆ‘ä»¬çš„ç½‘ç»œèŠ‚ç‚¹å’Œæ§åˆ¶èŠ‚ç‚¹æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ã€‚
1ã€vi /etc/neutron/plugins/ml2/ml2_conf.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 130: add a value to tenant_network_typestenant_network_types = vxlan# line 181: add[ml2_type_flat]flat_networks = physnet1# line 235: add[ml2_type_vxlan]vni_ranges = 1:1000

2ã€vi /etc/neutron/plugins/ml2/linuxbridge_agent.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 118: add[agent]prevent_arp_spoofing = True# line 147: add[linux_bridge]physical_interface_mappings = physnet1:eth2# line 201: add[vxlan]enable_vxlan = Truel2_population = True

3ã€vi /etc/neutron/dhcp_agent.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 63: adddnsmasq_config_file = /etc/neutron/dnsmasq-neutron.conf

4ã€vi /etc/neutron/dnsmasq-neutron.confï¼Œæ–°å»ºdnsmasq-neutron.confå†…å®¹å¦‚ä¸‹ï¼š
# create newdhcp-option-force=26,1450

5ã€é‡å¯æœåŠ¡
for service in l3-agent dhcp-agent metadata-agent linuxbridge-agent; dosystemctl restart neutron-$servicedone 

è®¡ç®—èŠ‚ç‚¹1ã€vi /etc/neutron/plugins/ml2/ml2_conf.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 130: add a value to tenant_network_typestenant_network_types = vxlan# line 181: add[ml2_type_flat]flat_networks = physnet1# line 235: add[ml2_type_vxlan]vni_ranges = 1:1000

2ã€vi /etc/neutron/plugins/ml2/linuxbridge_agent.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 118: add[agent]prevent_arp_spoofing = True# line 201: add[vxlan]enable_vxlan = Truel2_population = True

3ã€é‡å¯neutron-linuxbridge-agentsystemctl restart neutron-linuxbridge-agent
ä½¿ç”¨æ¸…é™¤flatç½‘ç»œã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”åˆ›å»ºå®ä¾‹ã€‹ä¸€æ–‡ä¸­ï¼Œå·²ç»ä½¿ç”¨flatç½‘ç»œåˆ›å»ºäº†sharednet1ï¼Œå¹¶åœ¨ç½‘ç»œä¸­åˆ›å»ºäº†ä¸€ä¸ªå®ä¾‹cirros0ã€‚åœ¨ä½¿ç”¨æ–°çš„ç½‘ç»œä¹‹å‰ï¼Œåˆ é™¤å®ƒä»¬ã€‚1ã€ä½¿adminç¯å¢ƒç”Ÿæ•ˆ. admin-openrc
2ã€æŸ¥çœ‹å®ä¾‹openstack server list
3ã€åˆ é™¤å®ä¾‹openstack server delete cirros0
4ã€æŸ¥çœ‹ç½‘ç»œopenstack network list
5ã€åˆ é™¤sharednet1openstack network delete sharednet1
åˆ›å»ºvxlanç½‘ç»œåœ¨æ§åˆ¶èŠ‚ç‚¹æµ‹è¯•ä½¿ç”¨vxlanï¼Œå®é™…ä¸Šå¯ä»¥åœ¨ä»»æ„èŠ‚ç‚¹ä½¿ç”¨ã€‚
1ã€ä½¿adminç¯å¢ƒç”Ÿæ•ˆ. admin-openrc
2ã€åˆ›å»ºè·¯ç”±router01openstack router create router01
3ã€åˆ›å»ºå†…éƒ¨ç½‘ç»œint_netopenstack network create int_net --provider-network-type vxlan
4ã€åœ¨å†…éƒ¨ç½‘ç»œä¸­åˆ›å»ºå­ç½‘
openstack subnet create subnet1 --network int_net \--subnet-range 192.168.100.0/24 --gateway 192.168.100.1 \--dns-nameserver 10.0.0.10

5ã€æŠŠå†…éƒ¨ç½‘ç»œint_netè¿æ¥åˆ°è·¯ç”±router01ä¸Šopenstack router add subnet router01 subnet1
6ã€åˆ›å»ºå¤–éƒ¨ç½‘ç»œext_net
openstack network create \--provider-physical-network physnet1 \--provider-network-type flat --external ext_net

7ã€åœ¨å¤–éƒ¨ç½‘ç»œä¸­åˆ›å»ºå­ç½‘subnet2
openstack subnet create subnet2 \--network ext_net --subnet-range 10.0.0.0/24 \--allocation-pool start=10.0.0.200,end=10.0.0.254 \--gateway 10.0.0.1 --dns-nameserver 10.0.0.10 --no-dhcp

8ã€æŠŠext_netçš„ç½‘å…³è®¾ç½®ä¸ºrouter01openstack router set router01 --external-gateway ext_net
æ­¤æ—¶ï¼Œåœ¨horizonæ§åˆ¶å°çœ‹åˆ°çš„ç½‘ç»œæ‹“æ‰‘å¦‚ä¸‹ï¼š
æˆæƒç½‘ç»œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰é¡¹ç›®éƒ½å¯ä»¥è®¿é—®åˆ°å¤–éƒ¨ç½‘ç»œï¼Œä½†å¯¹äºå†…éƒ¨ç½‘ç»œï¼Œåªæœ‰ç®¡ç†é¡¹ç›®å¯ä»¥è®¿é—®å®ƒã€‚å› æ­¤éœ€è¦å¯¹å…¶ä»–é¡¹ç›®è¿›è¡Œæˆæƒï¼Œä½¿é¡¹ç›®ä¸­çš„ç”¨æˆ·å¯ä»¥ä½¿ç”¨å†…éƒ¨ç½‘ç»œã€‚
1ã€æŸ¥çœ‹rbacç½‘ç»œopenstack network rbac list
2ã€æŸ¥çœ‹rbacç½‘ç»œç»†èŠ‚openstack network rbac show a5c4db79-f467-4b58-892b-b9cc56c3e317
3ã€æŸ¥çœ‹ç½‘ç»œopenstack network list
4ã€æŸ¥çœ‹é¡¹ç›®openstack project list
5ã€æˆæƒint_netç»™siaté¡¹ç›®ï¼Œæƒé™ä¸ºaccess_as_shared
netID=$(openstack network list | grep int_net | awk &#x27;&#123; print $2 &#125;&#x27;) prjID=$(openstack project list | grep siat | awk &#x27;&#123; print $2 &#125;&#x27;) openstack network rbac create --target-project $prjID --type network --action access_as_shared $netID 

ä½¿ç”¨vxlanç½‘ç»œ1ã€åˆ‡æ¢åˆ°siaté¡¹ç›®çš„voidkingç”¨æˆ·ç¯å¢ƒ. voidkingrc
2ã€æŸ¥çœ‹å®ä¾‹æ¨¡æ¿ã€é•œåƒã€ç½‘ç»œ
openstack flavor listopenstack image list openstack network list


3ã€å®‰å…¨ç»„å’Œå¯†é’¥ä½¿ç”¨ã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”åˆ›å»ºå®ä¾‹ã€‹ä¸€æ–‡ä¸­åˆ›å»ºçš„secgroup01å’Œvkkeyã€‚
4ã€åˆ›å»ºå®ä¾‹
netID=$(openstack network list | grep int_net | awk &#x27;&#123; print $2 &#125;&#x27;) openstack server create --flavor m1.tiny --image cirros --security-group secgroup01 --nic net-id=$netID --key-name vkkey cirros1

5ã€æŸ¥çœ‹å®ä¾‹openstack server list
6ã€ç»™å®ä¾‹æ·»åŠ æµ®åŠ¨IP
openstack floating ip create ext_netopenstack server add floating ip cirros1 10.0.0.201

7ã€æŸ¥çœ‹æµ®åŠ¨IPopenstack floating ip show 10.0.0.201
8ã€å†æ¬¡æŸ¥çœ‹å®ä¾‹openstack server listå¯ä»¥å‘ç°ï¼Œcirros1å·²ç»æœ‰äº†ä¸¤ä¸ªIPåœ°å€ã€‚
9ã€æµ‹è¯•è¿é€š
ping 10.0.0.201ssh cirros@10.0.0.201

é¡ºåˆ©ç™»å½•ï¼Œniceã€‚
PSï¼šping 192.168.100.6æ˜¯ä¸é€šçš„ï¼Œå› ä¸ºé‚£æ˜¯openstackå†…éƒ¨ç½‘ç»œã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”swiftç¯‡</title>
    <url>/dev-ubuntu16-manual-openstack-swift/</url>
    <content><![CDATA[ç›®æ ‡ç´§æ¥ç€ã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”cinderç¯‡ã€‹ï¼Œæœ¬æ–‡ï¼Œæˆ‘ä»¬æ¥ç ”ç©¶ä¸€ä¸‹swiftçš„å®‰è£…é…ç½®ã€‚ä¸»è¦å‚è€ƒOpenStack Queens : Configure Swift å’Œ Object Storage Install Guideã€‚
cinderå’Œswiftéƒ½æ˜¯å…³äºå­˜å‚¨çš„ç»„ä»¶ï¼Œé‚£ä¹ˆå®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿcinderçš„å­˜å‚¨ï¼Œå°±åƒæ˜¯æ™®é€šç¡¬ç›˜ã€‚å¯ä»¥æ–¹ä¾¿å¿«æ·åœ°æœ¬åœ°å­˜å–ä¿®æ”¹æ•°æ®ï¼Œè¿˜å¯ä»¥æŒ‰éœ€æ·»åŠ å‡å°‘ç¡¬ç›˜ã€‚swiftçš„å­˜å‚¨ï¼Œå°±åƒæ˜¯ç™¾åº¦äº‘ç›˜ã€‚åªèƒ½å­˜å–æ•°æ®ï¼Œä¸èƒ½åœ¨äº‘ç«¯è¿›è¡Œä¿®æ”¹ï¼Œé€‚ç”¨äºå¤‡ä»½ã€‚å¦‚æœéè¦ä¿®æ”¹ï¼Œé‚£ä¹ˆéœ€è¦ä¸‹è½½åˆ°æœ¬åœ°ä¿®æ”¹ï¼Œä¿®æ”¹å®Œå†ä¸Šä¼ ã€‚åœ¨openstackå®é™…åº”ç”¨ä¸­ï¼Œswiftå¸¸ç”¨æ¥å­˜å‚¨é•œåƒè¿™ç§ä¸éœ€è¦ç»å¸¸ä¿®æ”¹çš„æ–‡ä»¶ã€‚


swiftç®€ä»‹OpenStack Object Storage æ˜¯ä¸€ä¸ªå¤šç§Ÿæˆ·å¯¹è±¡å­˜å‚¨ç³»ç»Ÿã€‚å®ƒå…·æœ‰é«˜åº¦å¯æ‰©å±•æ€§ï¼Œå¯ä»¥é€šè¿‡RESTful HTTP APIä»¥ä½æˆæœ¬ç®¡ç†å¤§é‡éç»“æ„åŒ–æ•°æ®ã€‚
ä»£ç†æœåŠ¡å™¨ï¼ˆswift-proxy-serverï¼‰æ¥å—OpenStack Object Storage APIå’ŒåŸå§‹HTTPè¯·æ±‚ï¼Œä¸Šä¼ æ–‡ä»¶ï¼Œä¿®æ”¹å…ƒæ•°æ®å’Œåˆ›å»ºå®¹å™¨ã€‚å®ƒè¿˜ä¸ºWebæµè§ˆå™¨æä¾›æ–‡ä»¶æˆ–å®¹å™¨åˆ—è¡¨ã€‚ä¸ºäº†æé«˜æ€§èƒ½ï¼Œä»£ç†æœåŠ¡å™¨å¯ä»¥ä½¿ç”¨é€šå¸¸ä½¿ç”¨memcacheéƒ¨ç½²çš„å¯é€‰ç¼“å­˜ã€‚
å¸æˆ·æœåŠ¡å™¨ï¼ˆswift-account-serverï¼‰ç®¡ç†ä½¿ç”¨å¯¹è±¡å­˜å‚¨å®šä¹‰çš„å¸æˆ·ã€‚
å®¹å™¨æœåŠ¡å™¨ï¼ˆswift-container-serverï¼‰åœ¨å¯¹è±¡å­˜å‚¨ä¸­ç®¡ç†å®¹å™¨æˆ–æ–‡ä»¶å¤¹çš„æ˜ å°„ã€‚
å¯¹è±¡æœåŠ¡å™¨ï¼ˆswift-object-serverï¼‰ç®¡ç†å­˜å‚¨èŠ‚ç‚¹ä¸Šçš„å®é™…å¯¹è±¡ï¼Œä¾‹å¦‚æ–‡ä»¶ã€‚
Various periodic processesåœ¨å¤§å‹æ•°æ®å­˜å‚¨ä¸Šæ‰§è¡Œå†…åŠ¡å¤„ç†ä»»åŠ¡ã€‚å¤åˆ¶æœåŠ¡å¯ç¡®ä¿ç¾¤é›†çš„ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ã€‚å…¶ä»–å®šæœŸæµç¨‹åŒ…æ‹¬å®¡è®¡å‘˜ï¼Œæ›´æ–°è€…å’Œæ”¶å‰²è€…ã€‚
WSGIä¸­é—´ä»¶å¤„ç†èº«ä»½éªŒè¯ï¼Œé€šå¸¸æ˜¯OpenStack Identityã€‚
swift clientå…è®¸ç”¨æˆ·é€šè¿‡å‘½ä»¤è¡Œå®¢æˆ·ç«¯è¿›è¡Œæˆæƒï¼Œç„¶åä¸ºadminç”¨æˆ·ã€ç»é”€å•†ç”¨æˆ·æˆ–swiftç”¨æˆ·å‘REST APIæäº¤å‘½ä»¤ã€‚
swift-initåˆå§‹åŒ–ç¯æ–‡ä»¶æ„å»ºçš„è„šæœ¬ï¼Œå°†å®ˆæŠ¤ç¨‹åºåç§°ä½œä¸ºå‚æ•°å¹¶æä¾›å‘½ä»¤ã€‚è¯¦ç»†æ–‡æ¡£åœ¨è¿™é‡Œã€‚
swift-reconä¸€ç§å®¢æˆ·ç«¯å·¥å…·ï¼Œç”¨äºæ£€ç´¢ç”±swift-reconä¸­é—´ä»¶æ”¶é›†çš„æœ‰å…³ç¾¤é›†çš„å„ç§æŒ‡æ ‡å’Œé¥æµ‹ä¿¡æ¯ã€‚
swift-ring-builderå­˜å‚¨ç¯æ„å»ºå’Œé‡æ–°å¹³è¡¡å®ç”¨ç¨‹åºã€‚è¯¦ç»†æ–‡æ¡£åœ¨è¿™é‡Œã€‚
æ¶æ„ä¸€èˆ¬æ¥è¯´ï¼Œswiftè‡³å°‘éœ€è¦ä¸‰ä¸ªå­˜å‚¨èŠ‚ç‚¹ï¼Œå¦‚ä¸‹ç»“æ„ã€‚
ä¹‹å‰çš„å®‰è£…ä¸­ï¼Œæˆ‘ä»¬åªä½¿ç”¨äº†ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œä¸€ä¸ªæ§åˆ¶èŠ‚ç‚¹ï¼Œä¸€ä¸ªè®¡ç®—èŠ‚ç‚¹ã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æŠŠswiftå®‰è£…åœ¨æ§åˆ¶èŠ‚ç‚¹å’Œè®¡ç®—èŠ‚ç‚¹ï¼Œé¢†ä¼šç²¾ç¥ã€‚å¦‚æœè¦å¢åŠ å­˜å‚¨èŠ‚ç‚¹ï¼Œä¿®æ”¹Ring filesï¼Œç„¶åå‚ç…§è®¡ç®—èŠ‚ç‚¹é…ç½®å³å¯ã€‚
æ§åˆ¶èŠ‚ç‚¹å®‰è£…ï¼š
Swift ProxySwift-AccountSwift-ContainerSwift-Object

è®¡ç®—èŠ‚ç‚¹å®‰è£…ï¼š
Swift ProxySwift-AccountSwift-ContainerSwift-Object

æ§åˆ¶èŠ‚ç‚¹rootç”¨æˆ·ä¸ºäº†é¿å…æƒé™é—®é¢˜ï¼Œå»ºè®®åˆ‡æ¢åˆ°rootç”¨æˆ·è¿›è¡Œæ“ä½œï¼ˆå¦åˆ™è¦åŠ å¾ˆå¤šsudoï¼‰ã€‚sudo -i
æœåŠ¡è¯ä¹¦å’Œç«¯ç‚¹1ã€ä½¿adminç¯å¢ƒç”Ÿæ•ˆ. admin-openrc
2ã€æ·»åŠ swiftç”¨æˆ·openstack user create --domain default --project service --password openstack swift
3ã€æŠŠadminè§’è‰²æ·»åŠ ç»™swiftç”¨æˆ·openstack role add --project service --user swift admin
4ã€åˆ›å»ºswiftæœåŠ¡openstack service create --name swift --description &quot;OpenStack Object Storage&quot; object-store
5ã€åˆ›å»ºæœåŠ¡ç«¯ç‚¹
openstack endpoint create --region RegionOne object-store public http://controller:8080/v1/AUTH_%\(tenant_id\)sopenstack endpoint create --region RegionOne object-store internal http://controller:8080/v1/AUTH_%\(tenant_id\)s openstack endpoint create --region RegionOne object-store admin http://controller:8080/v1 

å®‰è£…é…ç½®Swift Proxy1ã€å®‰è£…swift-proxyapt-get -y install swift swift-proxy python-swiftclient python-keystonemiddleware python-memcache
2ã€åˆ›å»ºswifté…ç½®ç›®å½•mkdir /etc/swift
3ã€vi /etc/swift/proxy-server.confï¼Œæ–°å»ºproxy-server.confå†…å®¹å¦‚ä¸‹ï¼š
# create new[DEFAULT]bind_ip = 0.0.0.0bind_port = 8080user = swift[pipeline:main]pipeline = catch_errors gatekeeper healthcheck proxy-logging cache container_sync bulk ratelimit authtoken keystoneauth container-quotas account-quotas slo dlo versioned_writes proxy-logging proxy-server[app:proxy-server]use = egg:swift#proxyallow_account_management = trueaccount_autocreate = true# Keystone auth info[filter:authtoken]paste.filter_factory = keystonemiddleware.auth_token:filter_factorywww_authenticate_uri = http://controller:5000auth_url = http://controller:5000memcached_servers = controller:11211auth_type = passwordproject_domain_name = defaultuser_domain_name = defaultproject_name = serviceusername = swiftpassword = openstackdelay_auth_decision = true[filter:keystoneauth]use = egg:swift#keystoneauthoperator_roles = admin,SwiftOperator[filter:healthcheck]use = egg:swift#healthcheck[filter:cache]use = egg:swift#memcachememcache_servers = controller:11211[filter:ratelimit]use = egg:swift#ratelimit[filter:domain_remap]use = egg:swift#domain_remap[filter:catch_errors]use = egg:swift#catch_errors[filter:cname_lookup]use = egg:swift#cname_lookup[filter:staticweb]use = egg:swift#staticweb[filter:tempurl]use = egg:swift#tempurl[filter:formpost]use = egg:swift#formpost[filter:name_check]use = egg:swift#name_check[filter:list-endpoints]use = egg:swift#list_endpoints[filter:proxy-logging]use = egg:swift#proxy_logging[filter:bulk]use = egg:swift#bulk[filter:slo]use = egg:swift#slo[filter:dlo]use = egg:swift#dlo[filter:container-quotas]use = egg:swift#container_quotas[filter:account-quotas]use = egg:swift#account_quotas[filter:gatekeeper]use = egg:swift#gatekeeper[filter:container_sync]use = egg:swift#container_sync[filter:xprofile]use = egg:swift#xprofile[filter:versioned_writes]use = egg:swift#versioned_writes

4ã€vi /etc/swift/swift.confï¼Œæ–°å»ºswift.confå†…å®¹ä¸ºï¼š
# create new (it is shared among Swift Nodes - any words you like)[swift-hash]swift_hash_path_suffix = swift_shared_pathswift_hash_path_prefix = swift_shared_path

5ã€ä¿®æ”¹æƒé™chown -R swift. /etc/swift
é…ç½®Ring files1ã€åˆ›å»ºrings
swift-ring-builder /etc/swift/account.builder create 12 2 1 swift-ring-builder /etc/swift/container.builder create 12 2 1 swift-ring-builder /etc/swift/object.builder create 12 2 1

12ã€2ã€1è¿™ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä»£è¡¨part_powerã€replicasã€min_part_hoursã€‚part_poweræ˜¯ä»¥2ä¸ºåº•æ•°çš„æŒ‡æ•°çš„å¹‚ï¼Œå³2^ part_powerï¼Œæ‰€å¾—çš„å€¼è¡¨ç¤ºæ€»å…±çš„partitionçš„æ•°ç›®ã€‚å¦‚æœè®¾ç½®ä¸º2ï¼Œåˆ™2^2=4ï¼Œè¡¨ç¤ºæ€»å…±æœ‰4ä¸ªpartitionã€‚
replicasè¡¨ç¤ºæ¯ä¸ªobjectåœ¨swiftä¸­å‚¨å­˜çš„æ•°ç›®ã€‚
min_part_hoursè¡¨ç¤ºä¸€ä¸ªpartitonèƒ½å¤Ÿå†æ¬¡æ›´æ”¹çš„æœ€å°æ—¶é—´ã€‚é˜²æ­¢æ²¡æœ‰è¿›è¡ŒåŒæ­¥ä¾¿è¿›è¡Œä¸‹æ¬¡æ›´æ”¹ã€‚
2ã€æ·»åŠ å­˜å‚¨èŠ‚ç‚¹
swift-ring-builder /etc/swift/account.builder add r0z0-172.16.0.105:6002/device0 100swift-ring-builder /etc/swift/container.builder add r0z0-172.16.0.105:6001/device0 100 swift-ring-builder /etc/swift/object.builder add r0z0-172.16.0.105:6000/device0 100swift-ring-builder /etc/swift/account.builder add r1z1-172.16.0.106:6002/device1 100 swift-ring-builder /etc/swift/container.builder add r1z1-172.16.0.106:6001/device1 100 swift-ring-builder /etc/swift/object.builder add r1z1-172.16.0.106:6000/device1 100 

3ã€å¹³è¡¡å­˜å‚¨
swift-ring-builder /etc/swift/account.builder rebalanceswift-ring-builder /etc/swift/container.builder rebalance swift-ring-builder /etc/swift/object.builder rebalance

4ã€æ›´æ”¹æƒé™chown swift. /etc/swift/*.gz
5ã€é‡å¯swift-proxysystemctl restart swift-proxy
è®¡ç®—èŠ‚ç‚¹rootç”¨æˆ·ä¸ºäº†é¿å…æƒé™é—®é¢˜ï¼Œå»ºè®®åˆ‡æ¢åˆ°rootç”¨æˆ·è¿›è¡Œæ“ä½œï¼ˆå¦åˆ™è¦åŠ å¾ˆå¤šsudoï¼‰ã€‚sudo -i
ç£ç›˜åˆ†åŒº1ã€ã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”cinderç¯‡ã€‹ä¸€æ–‡ä¸­ï¼Œå› ä¸ºè®¡ç®—èŠ‚ç‚¹ï¼ˆå­˜å‚¨èŠ‚ç‚¹ï¼‰çš„sdbç”¨äºcinderæœåŠ¡äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨è®¡ç®—èŠ‚ç‚¹å†æ·»åŠ ä¸€å—ç¡¬ç›˜sdcï¼Œç”¨äºswiftæœåŠ¡ã€‚
2ã€æŸ¥çœ‹ç¡¬ç›˜fdisk -l
3ã€å¯¹sdcè¿›è¡Œåˆ†åŒºfdisk /dev/sdc

è¾“å…¥ m æ˜¾ç¤ºæ‰€æœ‰å‘½ä»¤æç¤ºã€‚
è¾“å…¥ p æ˜¾ç¤ºç¡¬ç›˜åˆ†å‰²æƒ…å½¢ã€‚
è¾“å…¥ a è®¾å®šç¡¬ç›˜å¯åŠ¨åŒºã€‚
è¾“å…¥ n è®¾å®šæ–°çš„ç¡¬ç›˜åˆ†å‰²åŒºã€‚è¾“å…¥ e ç¡¬ç›˜ä¸º[å»¶ä¼¸]åˆ†å‰²åŒº(extend)ï¼Œè¾“å…¥ p ç¡¬ç›˜ä¸º[ä¸»è¦]åˆ†å‰²åŒº(primary)ã€‚
è¾“å…¥ t æ”¹å˜ç¡¬ç›˜åˆ†å‰²åŒºå±æ€§ã€‚
è¾“å…¥ d åˆ é™¤ç¡¬ç›˜åˆ†å‰²åŒºå±æ€§ã€‚
è¾“å…¥ q ç»“æŸä¸å­˜å…¥ç¡¬ç›˜åˆ†å‰²åŒºå±æ€§ã€‚
è¾“å…¥ w ç»“æŸå¹¶å†™å…¥ç¡¬ç›˜åˆ†å‰²åŒºå±æ€§ã€‚

4ã€å‘½ä»¤è¡Œè¾“å…¥nï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„åˆ†åŒºï¼›æ¥ä¸‹æ¥é€‰æ‹©pï¼Œè®¾ç½®ä¸€ä¸ªä¸»åˆ†åŒºï¼ˆeä¸ºæ‰©å±•åˆ†åŒºï¼‰ï¼›æ¥ä¸‹æ¥åˆ†åŒºå·é€‰æ‹©1ï¼›å†æ¥ä¸‹æ¥è®¾ç½®èµ·æ­¢æ‰‡åŒºå·ï¼Œé€‰æ‹©é»˜è®¤å€¼å³å¯ï¼ˆ2048åˆ°maxï¼‰ï¼›æœ€åè¾“å…¥wï¼Œç¡®è®¤å†™å…¥ç¡¬ç›˜åˆ†åŒºã€‚
å®‰è£…é…ç½®1ã€ä¸‹è½½å®‰è£…ç›¸å…³ç»„ä»¶apt-get -y install swift swift-account swift-container swift-object xfsprogs
2ã€ä½¿ç”¨xfsæ ¼å¼åŒ–ç©ºé—²ç£ç›˜mkfs.xfs -i size=1024 -s size=4096 /dev/sdc1
3ã€åˆ›å»ºdevice1æ–‡ä»¶å¤¹mkdir -p /srv/node/device1
4ã€æŒ‚è½½/dev/sdc1åˆ°device1mount -o noatime,nodiratime,nobarrier /dev/sdc1 /srv/node/device1
5ã€ä¿®æ”¹æƒé™chown -R swift. /srv/node
6ã€vi /etc/fstabï¼Œè®¾ç½®å¼€æœºæŒ‚è½½
# add to the end/dev/sdc1  /srv/node/device1  xfs  noatime,nodiratime,nobarrier 0 0

7ã€ä»æ§åˆ¶èŠ‚ç‚¹ï¼ˆswift-proxyï¼‰æ‹·è´æ–‡ä»¶åˆ°è®¡ç®—èŠ‚ç‚¹scp voidking@172.16.0.105:/etc/swift/*.gz /etc/swift/
8ã€ä¿®æ”¹æƒé™chown swift. /etc/swift/*.gz
9ã€vi /etc/swift/swift.confï¼Œæ–°å»ºswift.confå†…å®¹å¦‚ä¸‹ï¼š
# set the value which is set on Proxy Node[swift-hash]swift_hash_path_suffix = swift_shared_pathswift_hash_path_prefix = swift_shared_path

10ã€vi /etc/swift/account-server.confï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 2: make sure the value is followsbind_ip = 0.0.0.0bind_port = 6002

11ã€vi /etc/swift/container-server.confï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 2: make sure the value is followsbind_ip = 0.0.0.0bind_port = 6001

12ã€vi /etc/swift/object-server.confï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 2: make sure the value is followsbind_ip = 0.0.0.0bind_port = 6000

13ã€vi /etc/rsyncd.confï¼Œæ–°å»ºrsyncd.confå†…å®¹å¦‚ä¸‹ï¼š
# create newpid file = /var/run/rsyncd.pidlog file = /var/log/rsyncd.loguid = swiftgid = swift# IP address of this Nodeaddress = 172.16.0.106[account]path            = /srv/noderead only       = falsewrite only      = nolist            = yesincoming chmod  = 0644outgoing chmod  = 0644max connections = 25lock file =     /var/lock/account.lock[container]path            = /srv/noderead only       = falsewrite only      = nolist            = yesincoming chmod  = 0644outgoing chmod  = 0644max connections = 25lock file =     /var/lock/container.lock[object]path            = /srv/noderead only       = falsewrite only      = nolist            = yesincoming chmod  = 0644outgoing chmod  = 0644max connections = 25lock file =     /var/lock/object.lock[swift_server]path            = /etc/swiftread only       = truewrite only      = nolist            = yesincoming chmod  = 0644outgoing chmod  = 0644max connections = 5lock file =     /var/lock/swift_server.lock

14ã€vi /etc/default/rsyncï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 8: changeRSYNC_ENABLE=true

15ã€é‡å¯rsyncå¹¶è®¾ç½®å¼€æœºå¯åŠ¨systemctl restart rsync
systemctl enable rsync
16ã€é‡å¯å…¶ä»–swiftæœåŠ¡å¹¶è®¾ç½®å¼€æœºå¯åŠ¨
for ringtype in account container object; do     systemctl restart swift-$ringtype    systemctl enable swift-$ringtype    for service in replicator updater auditor; do        if [ $ringtype != &#x27;account&#x27; ] || [ $service != &#x27;updater&#x27; ]; then            systemctl start swift-$ringtype-$service            systemctl enable swift-$ringtype-$service        fi    donedone

è‡³æ­¤ï¼Œä¸€ä¸ªå­˜å‚¨èŠ‚ç‚¹é…ç½®æˆåŠŸï¼Œä¸‹é¢å†é…ç½®ä¸€ä¸ªswiftå­˜å‚¨èŠ‚ç‚¹åœ¨æ§åˆ¶èŠ‚ç‚¹ä¸Šã€‚
æ§åˆ¶èŠ‚ç‚¹rootç”¨æˆ·ä¸ºäº†é¿å…æƒé™é—®é¢˜ï¼Œå»ºè®®åˆ‡æ¢åˆ°rootç”¨æˆ·è¿›è¡Œæ“ä½œï¼ˆå¦åˆ™è¦åŠ å¾ˆå¤šsudoï¼‰ã€‚sudo -i
ç£ç›˜åˆ†åŒº1ã€åœ¨æ§åˆ¶èŠ‚ç‚¹å†æ·»åŠ ä¸€å—ç¡¬ç›˜sdbï¼Œç”¨äºswiftæœåŠ¡ã€‚
2ã€å‚è€ƒè®¡ç®—èŠ‚ç‚¹çš„åˆ†åŒºæ–¹æ³•ï¼Œç»™sdbåˆ†åŒºã€‚
å®‰è£…é…ç½®1ã€ä¸‹è½½å®‰è£…ç›¸å…³ç»„ä»¶apt-get -y install swift swift-account swift-container swift-object xfsprogs
2ã€ä½¿ç”¨xfsæ ¼å¼åŒ–ç©ºé—²ç£ç›˜mkfs.xfs -i size=1024 -s size=4096 /dev/sdb1
3ã€åˆ›å»ºdevice0æ–‡ä»¶å¤¹mkdir -p /srv/node/device0
4ã€æŒ‚è½½/dev/sdc1åˆ°device1mount -o noatime,nodiratime,nobarrier /dev/sdb1 /srv/node/device0
5ã€ä¿®æ”¹æƒé™chown -R swift. /srv/node
6ã€vi /etc/fstabï¼Œè®¾ç½®å¼€æœºæŒ‚è½½
# add to the end/dev/sdb1  /srv/node/device0  xfs  noatime,nodiratime,nobarrier 0 0

7ã€ä¿®æ”¹æƒé™chown swift. /etc/swift/*.gz
8ã€vi /etc/swift/account-server.confï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 2: make sure the value is followsbind_ip = 0.0.0.0bind_port = 6002

9ã€vi /etc/swift/container-server.confï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 2: make sure the value is followsbind_ip = 0.0.0.0bind_port = 6001

10ã€vi /etc/swift/object-server.confï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 2: make sure the value is followsbind_ip = 0.0.0.0bind_port = 6000

11ã€vi /etc/rsyncd.confï¼Œæ–°å»ºrsyncd.confå†…å®¹å¦‚ä¸‹ï¼š
# create newpid file = /var/run/rsyncd.pidlog file = /var/log/rsyncd.loguid = swiftgid = swift# IP address of this Nodeaddress = 172.16.0.105[account]path            = /srv/noderead only       = falsewrite only      = nolist            = yesincoming chmod  = 0644outgoing chmod  = 0644max connections = 25lock file =     /var/lock/account.lock[container]path            = /srv/noderead only       = falsewrite only      = nolist            = yesincoming chmod  = 0644outgoing chmod  = 0644max connections = 25lock file =     /var/lock/container.lock[object]path            = /srv/noderead only       = falsewrite only      = nolist            = yesincoming chmod  = 0644outgoing chmod  = 0644max connections = 25lock file =     /var/lock/object.lock[swift_server]path            = /etc/swiftread only       = truewrite only      = nolist            = yesincoming chmod  = 0644outgoing chmod  = 0644max connections = 5lock file =     /var/lock/swift_server.lock

12ã€vi /etc/default/rsyncï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 8: changeRSYNC_ENABLE=true

13ã€é‡å¯rsyncå¹¶è®¾ç½®å¼€æœºå¯åŠ¨systemctl restart rsync
systemctl enable rsync
14ã€é‡å¯å…¶ä»–swiftæœåŠ¡å¹¶è®¾ç½®å¼€æœºå¯åŠ¨
for ringtype in account container object; do     systemctl restart swift-$ringtype    systemctl enable swift-$ringtype    for service in replicator updater auditor; do        if [ $ringtype != &#x27;account&#x27; ] || [ $service != &#x27;updater&#x27; ]; then            systemctl start swift-$ringtype-$service            systemctl enable swift-$ringtype-$service        fi    donedone

è‡³æ­¤ï¼Œæ§åˆ¶èŠ‚ç‚¹çš„swiftå­˜å‚¨ä¹Ÿé…ç½®å®Œæˆã€‚
ä½¿ç”¨ä»¥ä¸‹æ“ä½œåœ¨æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œã€‚
æœåŠ¡è§’è‰²å’Œç”¨æˆ·1ã€ä½¿adminç¯å¢ƒç”Ÿæ•ˆ. admin-openrc
2ã€åˆ›å»ºä¸€ä¸ªswiftserviceæœåŠ¡openstack project create --domain default --description &quot;Swift Service Project&quot; swiftservice
3ã€åˆ›å»ºSwiftOperatorè§’è‰²openstack role create SwiftOperator
4ã€åˆ›å»ºuser01ç”¨æˆ·ï¼Œå¯†ç ä¸ºopenstackopenstack user create --domain default --project swiftservice --password openstack user01
5ã€ç»™user01æ·»åŠ SwiftOperatorè§’è‰²openstack role add --project swiftservice --user user01 SwiftOperator
å®¢æˆ·ç«¯1ã€å®‰è£…swift-clientapt-get -y install python-openstackclient python-keystoneclient python-swiftclient
2ã€vi ~/swift-openrcï¼Œåˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶swift-openrcï¼Œå†…å®¹ä¸ºï¼š
export OS_PROJECT_DOMAIN_NAME=defaultexport OS_USER_DOMAIN_NAME=defaultexport OS_PROJECT_NAME=swiftserviceexport OS_USERNAME=user01export OS_PASSWORD=openstackexport OS_AUTH_URL=http://controller:5000/v3export OS_IDENTITY_API_VERSION=3export PS1=&#x27;[\u@\h \W(swift)]\$ &#x27;

3ã€ä½¿ç¯å¢ƒç”Ÿæ•ˆ. swift-openrc
4ã€æŸ¥çœ‹swiftçŠ¶æ€swift stat
5ã€åˆ›å»ºä¸€ä¸ªcontaineropenstack container create test_container
openstack container list
6ã€vim test.txtï¼Œæ–°å»ºtest.txtï¼Œå†…å®¹ä¸ºâ€œhello openstackâ€ã€‚
7ã€ä¸Šä¼ test.txtæ–‡ä»¶åˆ°test_containeropenstack object create test_container test.txt
8ã€æŸ¥çœ‹test_containerä¸­çš„æ–‡ä»¶openstack object list test_container
9ã€ä¸‹è½½test.txtæ–‡ä»¶
rm test.txtllopenstack object save test_container test.txt ll

10ã€åˆ é™¤test_containerä¸­çš„test.txtæ–‡ä»¶
openstack object list test_containeropenstack object delete test_container test.txtopenstack object list test_container

11ã€åˆ é™¤test_container
openstack container list openstack container delete test_container openstack container list 

]]></content>
      <categories>
        <category>engineering</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”cinderç¯‡</title>
    <url>/dev-ubuntu16-manual-openstack-cinder/</url>
    <content><![CDATA[ç›®æ ‡åœ¨ã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”ä¿®æ”¹é•œåƒã€‹ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ä¿®æ”¹é•œåƒï¼Œå®ç°äº†sshå¯†ç è®¿é—®å®ä¾‹ã€‚çœ‹ä¸Šå»ï¼Œè¿™ä¸ªopenstackç³»ç»Ÿå·²ç»å¯ä»¥æŠ•å…¥ä½¿ç”¨äº†ï¼Œå®é™…ä¸Šï¼Œä¹Ÿç¡®å®å¯ä»¥æŠ•å…¥ä½¿ç”¨äº†ã€‚
ä½†æ˜¯ï¼Œæˆ‘ä»¬æ€»æ˜¯è¿½æ±‚æ›´å¥½æ›´å¤šçš„æœåŠ¡ã€‚æ‰€ä»¥æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç»§ç»­å®‰è£…openstackçš„æœåŠ¡ç»„ä»¶ã€‚æœ¬æ–‡ä¸­è¦å®‰è£…é…ç½®çš„æ˜¯cinderï¼Œä¸»è¦å‚è€ƒOpenStack Queens : Configure Cinderå’ŒCinder Installation Guideã€‚


cinderç®€ä»‹å—å­˜å‚¨æœåŠ¡ï¼ˆcinderï¼‰ä¸ºç”¨æˆ·å®ä¾‹æä¾›å—å­˜å‚¨è®¾å¤‡ã€‚é…ç½®å’Œä½¿ç”¨å­˜å‚¨çš„æ–¹æ³•ç”±å—å­˜å‚¨é©±åŠ¨ç¨‹åºç¡®å®šï¼Œæˆ–è€…åœ¨å¤šåç«¯é…ç½®çš„æƒ…å†µä¸‹ç”±é©±åŠ¨ç¨‹åºç¡®å®šã€‚æœ‰å¤šç§é©±åŠ¨ç¨‹åºå¯ç”¨ï¼šNAS / SANï¼ŒNFSï¼ŒiSCSIï¼ŒCephç­‰ã€‚Block Storage APIå’Œè°ƒåº¦ç¨‹åºæœåŠ¡é€šå¸¸åœ¨æ§åˆ¶å™¨èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚æ ¹æ®æ‰€ä½¿ç”¨çš„é©±åŠ¨ç¨‹åºï¼Œå·æœåŠ¡å¯ä»¥åœ¨æ§åˆ¶å™¨èŠ‚ç‚¹ï¼Œè®¡ç®—èŠ‚ç‚¹æˆ–ç‹¬ç«‹å­˜å‚¨èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚
æ§åˆ¶èŠ‚ç‚¹rootç”¨æˆ·ä¸ºäº†é¿å…æƒé™é—®é¢˜ï¼Œå»ºè®®åˆ‡æ¢åˆ°rootç”¨æˆ·è¿›è¡Œæ“ä½œï¼ˆå¦åˆ™è¦åŠ å¾ˆå¤šsudoï¼‰ã€‚sudo -i
æ•°æ®åº“1ã€ç™»å½•æ•°æ®åº“mysql -uroot -pï¼Œå¯†ç ä¸ºopenstackã€‚
2ã€åˆ›å»ºcinderæ•°æ®åº“create database cinder;
3ã€æˆæƒ
grant all privileges on cinder.* to cinder@&#x27;localhost&#x27; identified by &#x27;openstack&#x27;;grant all privileges on cinder.* to cinder@&#x27;%&#x27; identified by &#x27;openstack&#x27;; 

4ã€é€€å‡ºæ•°æ®åº“flush privileges;
exit;
è¯ä¹¦å’Œç«¯ç‚¹1ã€ä½¿adminç¯å¢ƒç”Ÿæ•ˆ. admin-openrc
2ã€åˆ›å»ºcinderç”¨æˆ·ï¼Œå¯†ç ä¸ºopenstackopenstack user create --domain default --project service --password openstack cinder
3ã€ç»™cinderç”¨æˆ·æ·»åŠ adminè§’è‰²openstack role add --project service --user cinder admin
4ã€åˆ›å»ºcinderæœåŠ¡
openstack service create --name cinderv2 --description &quot;OpenStack Block Storage&quot; volumev2openstack service create --name cinderv3 --description &quot;OpenStack Block Storage&quot; volumev3 

5ã€åˆ›å»ºcinderæœåŠ¡ç«¯ç‚¹
openstack endpoint create --region RegionOne volumev2 public http://controller:8776/v2/%\(project_id\)sopenstack endpoint create --region RegionOne volumev2 internal http://controller:8776/v2/%\(project_id\)sopenstack endpoint create --region RegionOne volumev2 admin http://controller:8776/v2/%\(project_id\)sopenstack endpoint create --region RegionOne volumev3 public http://controller:8776/v3/%\(project_id\)s openstack endpoint create --region RegionOne volumev3 internal http://controller:8776/v3/%\(project_id\)s openstack endpoint create --region RegionOne volumev3 admin http://controller:8776/v3/%\(project_id\)s 

å®‰è£…é…ç½®1ã€ä¸‹è½½å®‰è£…ç»„ä»¶apt-get -y install cinder-api cinder-scheduler python-cinderclient
2ã€å¤‡ä»½cinder.confmv /etc/cinder/cinder.conf /etc/cinder/cinder.conf.bak
3ã€vi /etc/cinder/cinder.confï¼Œæ–°å»ºcinder.confå†…å®¹ä¸ºï¼š
# create new[DEFAULT]# define own IP addressmy_ip = 172.16.0.105rootwrap_config = /etc/cinder/rootwrap.confapi_paste_confg = /etc/cinder/api-paste.inistate_path = /var/lib/cinderauth_strategy = keystone# RabbitMQ connection infotransport_url = rabbit://openstack:openstack@controller# MariaDB connection info[database]connection = mysql+pymysql://cinder:openstack@controller/cinder# Keystone auth info[keystone_authtoken]www_authenticate_uri = http://controller:5000auth_url = http://controller:5000memcached_servers = controller:11211auth_type = passwordproject_domain_name = defaultuser_domain_name = defaultproject_name = serviceusername = cinderpassword = openstack[oslo_concurrency]lock_path = $state_path/tmp

4ã€æ›´æ”¹æƒé™chmod 644 /etc/cinder/cinder.conf
chown root:cinder /etc/cinder/cinder.conf
5ã€ç”Ÿæˆæ•°æ®åº“æ•°æ®su -s /bin/bash cinder -c &quot;cinder-manage db sync&quot;
6ã€é‡å¯cinder-schedulersystemctl restart cinder-scheduler
7ã€æŸ¥çœ‹volumeopenstack volume service list
å­˜å‚¨èŠ‚ç‚¹æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬çš„å­˜å‚¨èŠ‚ç‚¹å’Œè®¡ç®—èŠ‚ç‚¹åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹çš„IPä¸º172.16.0.106ã€‚å·²ç»å®‰è£…çš„æœåŠ¡å’Œvirtualboxè®¡ç®—èŠ‚ç‚¹ï¼ˆ192.168.56.111ï¼‰ç›¸åŒï¼ŒåŒ…æ‹¬nova-computeå’Œneutronã€‚
rootç”¨æˆ·ä¸ºäº†é¿å…æƒé™é—®é¢˜ï¼Œå»ºè®®åˆ‡æ¢åˆ°rootç”¨æˆ·è¿›è¡Œæ“ä½œï¼ˆå¦åˆ™è¦åŠ å¾ˆå¤šsudoï¼‰ã€‚sudo -i
å®‰è£…é…ç½®1ã€å®‰è£…cinder-volumeapt-get -y install cinder-volume python-mysqldb
2ã€å¤‡ä»½cinder.confmv /etc/cinder/cinder.conf /etc/cinder/cinder.conf.bak
3ã€vi /etc/cinder/cinder.confï¼Œæ–°å»ºcinder.confå†…å®¹ä¸ºï¼š
# create new[DEFAULT]# define own IP addressmy_ip = 172.16.0.106rootwrap_config = /etc/cinder/rootwrap.confapi_paste_confg = /etc/cinder/api-paste.inistate_path = /var/lib/cinderauth_strategy = keystone# RabbitMQ connection infotransport_url = rabbit://openstack:openstack@controller# Glance connection infoglance_api_servers = http://controller:9292# OK with empty value nowenabled_backends =# MariaDB connection info[database]connection = mysql+pymysql://cinder:openstack@controller/cinder# Keystone auth info[keystone_authtoken]www_authenticate_uri = http://controller:5000auth_url = http://controller:5000memcached_servers = controller:11211auth_type = passwordproject_domain_name = defaultuser_domain_name = defaultproject_name = serviceusername = cinderpassword = openstack[oslo_concurrency]lock_path = $state_path/tmp

4ã€æ›´æ”¹æƒé™chmod 644 /etc/cinder/cinder.conf
chown root:cinder /etc/cinder/cinder.conf
5ã€é‡å¯cinder-volumesystemctl restart cinder-volume
ä½¿ç”¨lvmå·å­˜å‚¨èŠ‚ç‚¹1ã€åœ¨å­˜å‚¨èŠ‚ç‚¹æ·»åŠ ç¡¬ç›˜ï¼Œä¿è¯è‡³å°‘æœ‰ä¸¤å—ç¡¬ç›˜ã€‚
2ã€åˆ›å»ºç‰©ç†å·ll /dev/sd*
pvcreate /dev/sdb
3ã€åˆ›å»ºvolume groupvgcreate -s 32M vg_volume01 /dev/sdb
4ã€å®‰è£…lvmç›¸å…³ç»„ä»¶apt-get -y install tgt thin-provisioning-tools
5ã€vi /etc/cinder/cinder.confï¼Œå¦‚ä¸‹ä¿®æ”¹cinder.confï¼š
# add a value for enabled_backendsenabled_backends = lvm# add follows to the end[lvm]iscsi_helper = tgtadm# volume group name just createdvolume_group = vg_volume01# IP address of Storage Nodeiscsi_ip_address = 172.16.0.106volume_driver = cinder.volume.drivers.lvm.LVMVolumeDrivervolumes_dir = $state_path/volumesiscsi_protocol = iscsi

6ã€é‡å¯æœåŠ¡systemctl restart cinder-volume tgt
è®¡ç®—èŠ‚ç‚¹1ã€vi /etc/nova/nova.confï¼Œç¼–è¾‘nova.confæ–‡ä»¶ï¼š
# add to the end[cinder]os_region_name = RegionOne

2ã€é‡å¯computeæœåŠ¡systemctl restart nova-compute
æ§åˆ¶èŠ‚ç‚¹ä»¥ä¸Šï¼Œå·²ç»å‡†å¤‡å¥½äº†cinderæœåŠ¡ï¼Œæˆ‘ä»¬åœ¨æ§åˆ¶èŠ‚ç‚¹ä½¿ç”¨cinderæœåŠ¡ï¼ˆä¹Ÿå¯ä»¥åœ¨å…¶ä»–æœºå™¨ä½¿ç”¨ï¼‰ã€‚
1ã€å‡è®¾æˆ‘ä»¬å·²ç»æŒ‰ç…§ã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”åˆ›å»ºå®ä¾‹ã€‹ä¸€æ–‡ï¼Œåˆ›å»ºäº†ä¸€ä¸ªcirros0å®ä¾‹ï¼Œipä¸º10.0.0.206ã€‚
2ã€ç™»å½•cirros0ssh cirros@10.0.0.206ï¼Œå¯†ç é»˜è®¤ä¸ºgocubsgoã€‚
3ã€åœ¨cirros0ä¸­æŸ¥çœ‹ç¡¬ç›˜df -h
ls -l /dev/vd*
sudo fdisk -l
å¯ä»¥çœ‹åˆ°ï¼Œå½“å‰è™šæ‹Ÿæœºåªæœ‰ä¸€å—vdaç¡¬ç›˜ã€‚
4ã€æ§åˆ¶èŠ‚ç‚¹ä¸­ä¿®æ”¹voidkingç”¨æˆ·ç¯å¢ƒï¼Œå¹¶ä½¿ç¯å¢ƒç”Ÿæ•ˆecho &quot;export OS_VOLUME_API_VERSION=2&quot; &gt;&gt; ~/voidkingrc
. voidkingrc
5ã€åˆ›å»ºå·disk01ï¼Œå¤§å°ä¸º1Gopenstack volume create --size 1 disk01
6ã€æŸ¥çœ‹å·openstack volume list
7ã€æŠŠå·disk01æ·»åŠ ç»™cirros0å®ä¾‹openstack server list
openstack server add volume cirros0 disk01
8ã€åœ¨cirros0ä¸­æŸ¥çœ‹ç¡¬ç›˜ls -l /dev/vd*
å‘ç°cirros0ä¸­å¤šå‡ºäº†ä¸€å—ç¡¬ç›˜vdbã€‚
9ã€åœ¨æ§åˆ¶èŠ‚ç‚¹æŸ¥çœ‹å·openstack volume listæ˜¾ç¤ºdisk01å·²ç»attachåˆ°äº†cirros0çš„/dev/vdbï¼Œå’Œæˆ‘ä»¬åœ¨cirros0ä¸­çœ‹åˆ°çš„ç»“æœä¸€è‡´ã€‚
10ã€ç§»é™¤å·openstack server remove volume cirros0 disk01
åè®°å…³äºNFSï¼ˆç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼‰çš„ä½¿ç”¨ï¼Œå‚è€ƒOpenStack Queens : Use Cinder Storage (NFS)ã€‚
å…³äºLVMå’ŒNFSæ ¼å¼å·çš„æ··åˆä½¿ç”¨ï¼Œå‚è€ƒOpenStack Queens : Use Cinder Storage (Multi-BackEnds)ã€‚
å…³äºä½¿ç”¨cinderå¤‡ä»½å·ï¼Œå‚è€ƒOpenStack Queens : Configure Cinder Backupã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”ä¿®æ”¹é•œåƒ</title>
    <url>/dev-ubuntu16-manual-openstack-modify-mirror/</url>
    <content><![CDATA[é—®é¢˜æè¿°ã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”horizonç¯‡ã€‹ä¸€æ–‡ä¸­ï¼Œå·²ç»å®‰è£…äº†horizonï¼Œå¹¶ä¸”åœ¨dashboardä¸­ä½¿ç”¨å®˜æ–¹é•œåƒåˆ›å»ºäº†ubuntu16å®ä¾‹ã€‚çœ‹ä¸Šå»ï¼Œå¾ˆæˆåŠŸã€‚
ä½†æ˜¯ï¼Œå†æ¬¡ä½¿ç”¨å®˜æ–¹é•œåƒåˆ›å»ºå®ä¾‹ï¼Œè¿™æ¬¡å±…ç„¶æ— æ³•é€šè¿‡sshå¯†é’¥è®¿é—®ï¼ï¼ï¼Permission denied (publickey). ç¥å¥‡äº†ã€‚ã€‚ã€‚
é‡å»ºå®ä¾‹ï¼Œä¾ç„¶æ— æ³•é€šè¿‡å¯†é’¥è®¿é—®ã€‚æœ¬æ–‡ï¼Œå°±æ¥ç ”ç©¶ä¸€ä¸‹è§£å†³åŠæ³•ã€‚


å°è¯•è§£å†³1ã€æŸ¥çœ‹å¯åŠ¨æ—¥å¿—ï¼Œå‘ç°ï¼š
ci-info: no authorized ssh keys fingerprints found for user ubuntu.
çœ‹è¿™ä¸ªæç¤ºï¼Œåº”è¯¥æ˜¯å¯†é’¥æ²¡æœ‰æ³¨å…¥åˆ°å®ä¾‹ä¸­ã€‚
2ã€å†å¾€ä¸Šçœ‹ï¼Œå‘ç°ï¼š
DataSourceEc2.py[CRITICAL]: Giving up on md from [&#x27;http://169.254.169.254/2009-04-04/meta-data/instance-id&#x27;] after 120 secondsurl_helper.py[WARNING]: Calling &#x27;http://10.0.0.200/latest/meta-data/instance-id&#x27; failed [0/120s]: bad status code [404]......DataSourceCloudStack.py[CRITICAL]: Giving up on waiting for the metadata from [&#x27;http://10.0.0.200/latest/meta-data/instance-id&#x27;] after 120 seconds

å®Œæ•´æ—¥å¿—æŸ¥çœ‹ï¼šstart.log
3ã€å‚è€ƒOpenStack METADATAä¸å·¥ä½œçš„åˆ†ææ–¹æ³•ï¼Œé‡å¯metadataæœåŠ¡ï¼šsystemctl restart neutron-metadata-agent.service
ç„¶åé‡æ–°åˆ›å»ºå®ä¾‹ï¼Œæ²¡æœ‰ç”¨ã€‚
4ã€æŸ¥çœ‹metadataæ—¥å¿—tail /var/log/neutron/neutron-metadata-agent.log
2018-07-10 11:40:45.079 22459 INFO eventlet.wsgi.server [-] 10.0.0.1,&lt;local&gt; &quot;GET /latest/meta-data/instance-id HTTP/1.1&quot; status: 404  len: 297 time: 0.0431259

ä½¿ç”¨æ—¥å¿—å…³é”®è¯æœç´¢ï¼Œå¹¶æ²¡æœ‰æ‰¾åˆ°ç›¸å…³è§£å†³åŠæ³•ã€‚
5ã€å‚è€ƒOpenstack é€šè¿‡ Metadata æœåŠ¡è¯·æ±‚æµç¨‹ å’Œ åœ¨OpenStacké‡Œå¦‚ä½•ç¡®ä¿è™šæœºæ­£å¸¸è®¿é—®MetaData IP 169.254.169.254ï¼Œä¹Ÿæ²¡æœ‰è§£å†³é—®é¢˜ã€‚
6ã€é‡å»ºå®ä¾‹ï¼Œé…ç½®è„šæœ¬è®¾ç½®sshå…è®¸å¯†ç ç™»å½•ã€‚ä½†æ˜¯ï¼Œæ— è®ºæ˜¯å¯†é’¥è¿˜æ˜¯å¯†ç ï¼Œéƒ½æ— æ³•ç™»å½•ï¼Œå’Œã€ŠOpenStackæ·»åŠ é•œåƒã€‹ä¸€æ–‡ä¸­é‡åˆ°çš„é—®é¢˜ç®€ç›´ä¸€æ¨¡ä¸€æ ·ã€‚
ä¿®æ”¹é•œåƒé…ç½®å¤±è´¥ï¼Œå†³å®šä»é•œåƒå…¥æ‰‹ï¼Œä¿®æ”¹é•œåƒï¼Œä½¿ä¹‹æ”¯æŒsshå¯†ç ç™»å½•ã€‚ä¸»è¦å‚è€ƒopenstackä¸­é•œåƒçš„å¯†ç ä¿®æ”¹å’Œä½¿ç”¨ guestfish å·¥å…·ä¿®æ”¹OpenStackå®˜æ–¹Ubuntu é•œåƒ
ä»¥ä¸‹æ“ä½œåœ¨æ§åˆ¶èŠ‚ç‚¹åˆ‡æ¢åˆ°rootæ‰§è¡Œã€‚
1ã€ä¸‹è½½é•œåƒwget http://cloud-images.ubuntu.com/xenial/current/xenial-server-cloudimg-amd64-disk1.img
2ã€å®‰è£…guestfishå·¥å…·apt-get install libguestfs-tools -y
3ã€æ‰“å¼€é•œåƒguestfish --rw -a xenial-server-cloudimg-amd64-disk1.img
4ã€æ‰§è¡Œä¿®æ”¹
&gt;&lt;fs&gt; run&gt;&lt;fs&gt; list-filesystems&gt;&lt;fs&gt; mount /dev/sda1 /&gt;&lt;fs&gt; vi /etc/cloud/cloud.cfg&gt;&lt;fs&gt; quit 

åœ¨ç¼–è¾‘cloud.cfgçš„æ—¶å€™ï¼Œåšå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 12, change and adddisable_root: falsessh_pwauth: true# line 93, change and addlock_passwd: falseplain_text_passwd: &quot;ubuntu&quot;

ä»¥ä¸Šï¼Œå…è®¸äº†rootç™»å½•ï¼Œå¢åŠ äº†sshå¯†ç ç™»å½•ï¼Œè®¾ç½®ubuntuç”¨æˆ·çš„é»˜è®¤å¯†ç ä¸ºubuntuã€‚
5ã€ä½¿adminç¯å¢ƒç”Ÿæ•ˆ. admin-openrc
6ã€æ·»åŠ é•œåƒ
openstack image create &quot;ubuntu16-server-modified&quot; \  --file xenial-server-cloudimg-amd64-disk1.img \  --disk-format qcow2 --container-format bare \  --public

7ã€ä¹‹åï¼Œåˆ›å»ºå®ä¾‹ubuntu1ï¼Œå°±å¯ä»¥åœ¨vncä½¿ç”¨å¯†ç ç™»å½•äº†ã€‚å¯ä»¥ä½¿ç”¨sudo -iåˆ‡æ¢åˆ°rootï¼Œç­‰å¾…æ—¶é—´å¾ˆé•¿ï¼Œå¤§æ¦‚åŠåˆ†é’Ÿæ‰èƒ½åˆ‡æ¢æˆåŠŸã€‚
ä½†æ˜¯æ­¤æ—¶ï¼Œä¾ç„¶ä¸èƒ½ä½¿ç”¨sshç™»å½•ï¼Œæ— è®ºæ˜¯ä½¿ç”¨å¯†é’¥ï¼Œè¿˜æ˜¯ä¸ä½¿ç”¨å¯†é’¥ï¼Œéƒ½ä¼šæç¤ºï¼šPermission denied (publickey).ã€‚
æ‰“ç®—åœ¨vncç»™å®ä¾‹æ·»åŠ å…¬é’¥ï¼Œç„¶åæŠŠç§é’¥scpç»™æ§åˆ¶èŠ‚ç‚¹ï¼Œä½†æ˜¯ï¼Œæ— æ³•å‘authorized_keyså†™å…¥å…¬é’¥ã€‚ç¥å¥‡äº†ï¼
è€Œä¸”ï¼Œåœ¨vncä¹Ÿæ— æ³•sshç™»å½•æœ¬æœºï¼åŒæ ·æç¤ºPermission denied (publickey).
8ã€è§£å†³åŠæ³•
sudo -iapt remove openssh-serverrm /etc/ssh/*apt install openssh-server

ç»§ç»­ä¿®æ”¹é•œåƒå®šä½é—®é¢˜ä»¥ä¸Šï¼Œå·²ç»å®ç°äº†å®ä¾‹é€šè¿‡sshå¯†ç ç™»å½•ï¼Œä½†æ˜¯è¿™ä¸ªè¿‡ç¨‹æ¯”è¾ƒéº»çƒ¦ã€‚ç†è®ºä¸Šï¼Œç»§ç»­ä¿®æ”¹é•œåƒï¼Œåº”è¯¥å°±èƒ½å¤Ÿå®ç°è¿™ä¸ªç›®æ ‡ã€‚
1ã€åˆ›å»ºä¸€ä¸ªå®ä¾‹ubuntu2ï¼Œç„¶åå¯¹æ¯”ubuntu1å’Œubuntu2ä¸­çš„/etc/ssh/sshd_configã€‚å‘ç°å®ƒä»¬æœ€å¤§çš„ä¸åŒåœ¨äºPasswordAuthenticationã€‚
ubuntu1ä¸­ï¼š
# Change to no to disable tunnelled clear text passwords#PasswordAuthentication yes

ubuntu2ä¸­ï¼š
# Change to no to disable tunnelled clear text passwordsPasswordAuthentication no

å•Šå“ˆï¼Œè¿™å°±æ˜¯æ— æ³•ä½¿ç”¨sshç™»å½•çš„ç½ªé­ç¥¸é¦–äº†ã€‚
2ã€åœ¨ubuntu2ä¸­ï¼Œä¿®æ”¹PasswordAuthenticationï¼š
# Change to no to disable tunnelled clear text passwords#PasswordAuthentication no

3ã€é‡å¯sshdservice sshd restart
ç„¶åï¼Œå°±å¯ä»¥ä½¿ç”¨sshå¯†ç ç™»å½•äº†ã€‚
ä¿®æ”¹é•œåƒé‚£ä¹ˆï¼Œè¯¥æ€ä¹ˆåœ¨é•œåƒä¸­ä¿®æ”¹PasswordAuthenticationå‘¢ï¼Ÿå¾ˆç®€å•ã€‚
1ã€æ‰“å¼€é•œåƒguestfish --rw -a xenial-server-cloudimg-amd64-disk1.img
2ã€ä¿®æ”¹sshd_config
&gt;&lt;fs&gt; run&gt;&lt;fs&gt; list-filesystems&gt;&lt;fs&gt; mount /dev/sda1 /&gt;&lt;fs&gt; vi /etc/ssh/sshd_config&gt;&lt;fs&gt; quit 

åœ¨ç¼–è¾‘sshd_configçš„æ—¶å€™ï¼Œåšå¦‚ä¸‹ä¿®æ”¹ï¼š
# Change to no to disable tunnelled clear text passwords#PasswordAuthentication no

3ã€ï¼ˆå¯é€‰ï¼‰ä¸ºäº†æ–¹ä¾¿è”ç½‘ï¼Œä¸å¦¨ç¼–è¾‘resolv.conf.d/base
&gt;&lt;fs&gt; vi /etc/resolvconf/resolv.conf.d/base

åœ¨baseä¸­æ·»åŠ ï¼š
nameserver 180.76.76.76nameserver 223.6.6.6

4ã€ä½¿adminç¯å¢ƒç”Ÿæ•ˆ. admin-openrc
5ã€åˆ é™¤é•œåƒï¼Œé‡æ–°æ·»åŠ 
openstack image delete &quot;ubuntu16-server-modified&quot;openstack image create &quot;ubuntu16-server-modified&quot; \  --file xenial-server-cloudimg-amd64-disk1.img \  --disk-format qcow2 --container-format bare \  --public

è‡³æ­¤ï¼Œå¤§åŠŸå‘Šæˆã€‚
åè®°åœ¨åˆ›å»ºå®ä¾‹æ—¶æ— æ³•æ³¨å…¥å…¬é’¥å’Œè„šæœ¬çš„é—®é¢˜ï¼Œæœ€ç»ˆæ²¡æœ‰è§£å†³ï¼Œå¥½åœ¨æ‰¾åˆ°äº†å…¶ä»–è§£å†³æ–¹æ¡ˆã€‚è‡³äºè¿™ä¸ªæ³¨å…¥é—®é¢˜ï¼Œä¼šåœ¨åç»­çš„å­¦ä¹ ä¸­ç»§ç»­å°è¯•è§£å†³ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”horizonç¯‡</title>
    <url>/dev-ubuntu16-manual-openstack-horizon/</url>
    <content><![CDATA[ç›®æ ‡å®Œæˆäº†ã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”åˆ›å»ºå®ä¾‹ã€‹ï¼ŒéªŒè¯äº†ä¹‹å‰çš„å®‰è£…æ²¡æœ‰å¤§çš„é—®é¢˜ã€‚
æœ¬æ–‡ï¼Œæˆ‘ä»¬æ¥ç ”ç©¶ä¸€ä¸‹horizonçš„å®‰è£…é…ç½®ï¼Œä¸»è¦å‚è€ƒHorizon: Install and configure for Ubuntu å’Œ OpenStack Queens : Configure Horizonã€‚


è¯´æ˜ç”±äºç”µè„‘é…ç½®æœ‰é™ï¼Œå·²ç»æ²¡æœ‰å¤šä½™çš„èµ„æºåˆ†é…ç»™è™šæ‹Ÿæœºï¼Œæ‰€ä»¥æ¥ä¸‹æ¥çš„å®‰è£…é…ç½®è½¬ç§»åˆ°å®ä½“ä¸Šã€‚å®ä½“æœºç³»ç»Ÿä¸ºubuntu-16.04.4-server-amd64ï¼Œé…ç½®ä¸º32æ ¸64GBå†…å­˜8TBå­˜å‚¨ã€‚æœ‰å››å¼ ç½‘å¡åˆ†åˆ«ä¸ºeno1ã€eno2ã€eno3å’Œeno4ï¼Œå…¶ä¸­eno1çš„IPä¸º172.16.0.105ï¼Œeno2çš„ipä¸º172.16.101.105ï¼Œeno3é…ç½®ä¸ºneutronä½¿ç”¨çš„ç½‘å¡ã€‚
172.16.0.105éœ€è¦é€šè¿‡è·³æ¿æœºè®¿é—®ï¼Œ172.16.101.105å¯ä»¥æœ¬åœ°ç›´è¿ã€‚
å®ä½“æœºåŒæ ·å®‰è£…å¥½äº†keystoneã€glanceã€novaå’ŒneutronæœåŠ¡ï¼Œä¹Ÿæµ‹è¯•åˆ›å»ºäº†å®ä¾‹ã€‚é™¤äº†é…ç½®æ›´é«˜ï¼Œå…¶ä»–ç­‰åŒäºä¹‹å‰çš„æ§åˆ¶èŠ‚ç‚¹ã€‚
horizonç®€ä»‹horizonï¼ˆdashboardï¼‰ä¸€èˆ¬å®‰è£…åœ¨æ§åˆ¶å™¨èŠ‚ç‚¹ä¸Šï¼Œæ‰€éœ€çš„å”¯ä¸€æ ¸å¿ƒæœåŠ¡æ˜¯èº«ä»½è®¤è¯æœåŠ¡ã€‚æˆ‘ä»¬å¯ä»¥å°†horizonä¸å…¶ä»–æœåŠ¡ç»“åˆä½¿ç”¨ï¼Œä¾‹å¦‚é•œåƒæœåŠ¡ï¼Œè®¡ç®—å’Œç½‘ç»œã€‚ä¹Ÿå¯ä»¥åœ¨å…·æœ‰ç‹¬ç«‹æœåŠ¡ï¼ˆå¦‚å¯¹è±¡å­˜å‚¨ï¼‰çš„ç¯å¢ƒä¸­ä½¿ç”¨horizonã€‚
queensç‰ˆæœ¬çš„horizonéœ€è¦ä»¥ä¸‹ä¾èµ–ï¼š
ï¼ˆ1ï¼‰Python 2.7ï¼ˆ2ï¼‰Django 1.11ã€‚Django 1.8åˆ°1.10ä¹Ÿå—æ”¯æŒï¼Œä¸è¿‡ä»–ä»¬çš„æ”¯æŒå°†åœ¨Rockyç‰ˆæœ¬ä¸­è¢«åˆ é™¤ã€‚ï¼ˆ3ï¼‰å¯è®¿é—®çš„keystoneç«¯ç‚¹ã€‚ï¼ˆ4ï¼‰æ‰€æœ‰å…¶ä»–æœåŠ¡éƒ½æ˜¯å¯é€‰çš„ã€‚å¦‚æœé…ç½®äº†æœåŠ¡çš„keystoneç«¯ç‚¹ï¼Œåˆ™horizoâ€‹â€‹nä¼šæ£€æµ‹å®ƒå¹¶è‡ªåŠ¨å¯ç”¨å…¶æ”¯æŒã€‚queenså‘å¸ƒæ—¶ï¼ŒHorizoâ€‹â€‹næ”¯æŒä»¥ä¸‹æœåŠ¡ï¼š

cinder: Block Storage
glance: Image Management
neutron: Networking
nova: Compute
swift: Object Storage
Horizon also supports many other OpenStack services via plugins. 

å®‰è£…é…ç½®1ã€å®‰è£…horizonapt-get -y install openstack-dashboard
2ã€ç¼–è¾‘horizoné…ç½®æ–‡ä»¶vi /etc/openstack-dashboard/local_settings.py
å¦‚ä¸‹ä¿®æ”¹ï¼š
# line 39 uncomment and add own hostnameALLOWED_HOSTS = [&#x27;controller&#x27;, &#x27;localhost&#x27;]# line 65: uncomment like followsOPENSTACK_API_VERSIONS = &#123;#    &quot;data-processing&quot;: 1.1,    &quot;identity&quot;: 3,    &quot;image&quot;: 2,    &quot;volume&quot;: 2,    &quot;compute&quot;: 2,&#125;# line 76: uncomment and changeOPENSTACK_KEYSTONE_MULTIDOMAIN_SUPPORT = True# line 98: uncommentOPENSTACK_KEYSTONE_DEFAULT_DOMAIN = &#x27;Default&#x27;# line 163: change to your own Memcache serverCACHES = &#123;    &#x27;default&#x27;: &#123;        &#x27;BACKEND&#x27;: &#x27;django.core.cache.backends.memcached.MemcachedCache&#x27;,        &#x27;LOCATION&#x27;: &#x27;172.16.0.105:11211&#x27;,    &#125;,&#125;# line 190: change to your own HostOPENSTACK_HOST = &quot;172.16.0.105&quot;OPENSTACK_KEYSTONE_URL = &quot;http://%s:5000/v3&quot; % OPENSTACK_HOSTOPENSTACK_KEYSTONE_DEFAULT_ROLE = &quot;_member_&quot;

3ã€é‡å¯apache2å’Œmemcachedsystemctl restart apache2 memcached
ç®€å•ä½¿ç”¨1ã€æµ‹è¯•è®¿é—®è®¿é—®åœ°å€ï¼šhttp://172.16.101.105/horizon/auth/login/
2ã€Domainè¾“å…¥defaultï¼Œç”¨æˆ·åè¾“å…¥adminï¼Œå¯†ç è¾“å…¥openstackã€‚ç™»å½•horizonã€‚
3ã€æŸ¥çœ‹é¡¹ç›®å’Œç”¨æˆ·ã€‚ç‚¹å‡»å·¦ä¾§å¯¼èˆªæ èº«ä»½è®¤è¯ï¼Œé¡¹ç›®æˆ–è€…ç”¨æˆ·ã€‚
4ã€æŸ¥çœ‹cirros0å®ä¾‹ã€‚èº«ä»½è®¤è¯ï¼Œé¡¹ç›®ï¼Œsiatï¼ŒæŸ¥çœ‹ä½¿ç”¨é‡ã€‚
5ã€é€€å‡ºç™»å½•
ç®€å•ä½¿ç”¨21ã€æµ‹è¯•è®¿é—®è®¿é—®åœ°å€ï¼šhttp://172.16.101.105/horizon/auth/login/
2ã€Domainè¾“å…¥defaultï¼Œç”¨æˆ·åè¾“å…¥voidkingï¼Œå¯†ç è¾“å…¥openstackã€‚ç™»å½•horizonã€‚
3ã€åŒæ ·å¯ä»¥çœ‹åˆ°cirros0å®ä¾‹ï¼Œå¹¶ä¸”è¿›è¡Œç®¡ç†ã€‚
è®¿é—®å®ä¾‹å‚è€ƒOpenStackæ·»åŠ é•œåƒï¼Œæ·»åŠ ubuntu16çš„å®˜æ–¹é•œåƒï¼Œåˆ›å»ºå®ä¾‹ï¼Œåˆ†é…çš„IPä¸º10.0.0.208ã€‚
1ã€åœ¨æ§åˆ¶èŠ‚ç‚¹é€šè¿‡å¯†é’¥è®¿é—®ssh ubuntu@10.0.0.208 -i id_rsa
2ã€åœ¨æœ¬åœ°é€šè¿‡ç½‘é¡µè®¿é—®ç‚¹å‡»å®ä¾‹åç§°ï¼Œæ§åˆ¶å°ï¼Œå³å¯æ‹¿åˆ°vncåœ°å€ï¼Œæ¯”å¦‚ http://controller:6080/vnc_auto.html?token=a92733f2-e6c5-45e8-8521-5ace9b747957&amp;title=k8s01
æŠŠcontrolleræ›¿æ¢ä¸º172.16.101.105ï¼Œå¾—åˆ° http://172.16.101.105:6080/vnc_auto.html?token=a92733f2-e6c5-45e8-8521-5ace9b747957&amp;title=k8s01
è®¿é—®è¯¥åœ°å€ï¼Œå³å¯çœ‹åˆ°ç½‘é¡µæ§åˆ¶å°ã€‚
3ã€åœ¨æœ¬åœ°é€šè¿‡å¯†é’¥è®¿é—®ï¼ˆ1ï¼‰åœ¨æ§åˆ¶èŠ‚ç‚¹æ–°å»ºportmap.shè„šæœ¬ï¼Œå†…å®¹ä¸ºï¼š
#!/bin/bashpro=&#x27;tcp&#x27;NAT_Host=&#x27;172.16.0.105&#x27;NAT_Port=20822Dst_Host=&#x27;10.0.0.208&#x27;Dst_Port=22iptables -t nat -A PREROUTING -m $pro -p $pro --dport $NAT_Port -j DNAT --to-destination $Dst_Host:$Dst_Portiptables -t nat -A POSTROUTING -m $pro -p $pro --dport $Dst_Port -d $Dst_Host -j SNAT --to-source $NAT_Host

ï¼ˆ2ï¼‰æ‰§è¡Œè„šæœ¬chmod a+x portmap.sh
sudo ./portmap.sh
ï¼ˆ3ï¼‰æ–°å»ºxshellè¿æ¥åç§°å¡«å…¥10.0.0.208ï¼Œä¸»æœºå¡«å…¥172.16.101.105ï¼Œç«¯å£å·å¡«å…¥20822ã€‚
ç”¨æˆ·èº«ä»½éªŒè¯ï¼Œæ–¹æ³•é€‰æ‹©Public Keyï¼Œæµè§ˆï¼Œå¯¼å…¥å®ä¾‹å¯¹åº”çš„id_rsaç§é’¥ã€‚
ï¼ˆ4ï¼‰é…ç½®å®Œæˆï¼Œè¿æ¥å³å¯ã€‚
å®ä¾‹è®¿é—®å¤–ç½‘åœ¨å®ä¾‹ä¸­pingç™¾åº¦ï¼Œæ˜¯ä¸é€šçš„ï¼Œä¸‹é¢æˆ‘ä»¬è¿›è¡Œé…ç½®ï¼Œä½¿å®ä¾‹èƒ½å¤Ÿè®¿é—®å¤–ç½‘ã€‚å‚è€ƒLinuxé…ç½®SNATä¸Šç½‘ã€‚
æ§åˆ¶èŠ‚ç‚¹åœ¨æ§åˆ¶èŠ‚ç‚¹åˆ‡æ¢åˆ°rootè¿›è¡Œæ“ä½œã€‚
1ã€æ¥æ”¶æ•°æ®åŒ…iptables -P INPUT ACCEPT
2ã€å¼€å¯è·¯ç”±åŠŸèƒ½echo 1 &gt; /proc/sys/net/ipv4/ip_forward
3ã€ä¼ªè£…æ•°æ®åŒ…iptables -t nat -A POSTROUTING -j MASQUERADE
å®ä¾‹1ã€åœ¨å®ä¾‹ä¸­æµ‹è¯•è®¿é—®ping 120.77.36.182ï¼Œæ˜¯å¯ä»¥pingé€šçš„ã€‚ping www.baidu.comï¼Œpingä¸é€šã€‚
2ã€åœ¨å®ä¾‹ä¸­é…ç½®resolv.confsudo vim /etc/resolv.confï¼Œæ·»åŠ nameserverçš„é…ç½®
nameserver 180.76.76.76nameserver 223.6.6.6

sudo vim /etc/resolvconf/resolv.conf.d/baseï¼Œæ·»åŠ ï¼š
nameserver 180.76.76.76nameserver 223.6.6.6

æ³¨æ„ï¼šæ‰§è¡Œsudoçš„æ—¶å€™ï¼Œååº”éå¸¸æ…¢ï¼Œè¯·è€å¿ƒç­‰å¾…ï¼Œå¤§æ¦‚åŠåˆ†é’Ÿæ‰èƒ½æ‰“å¼€æ–‡ä»¶ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦ä¿®æ”¹hostsæ–‡ä»¶ï¼ŒåŠ å…¥ä¸»æœºåçš„è§£æï¼š
127.0.0.1  k8s01

3ã€æµ‹è¯•ping www.baidu.com
]]></content>
      <categories>
        <category>engineering</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”åˆ›å»ºå®ä¾‹</title>
    <url>/dev-ubuntu16-manual-openstack-instance/</url>
    <content><![CDATA[ç›®æ ‡å®Œæˆäº†ã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”neutronç¯‡ã€‹ï¼Œæ„å‘³ç€keystoneã€glanceã€novaå’Œneutronéƒ½å·²ç»å®‰è£…å®Œæˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œopenstackæœ€å°å®‰è£…å·²ç»å®Œæˆã€‚åœ¨å®‰è£…horizonã€cinderå’Œswiftä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥é€šè¿‡å‘½ä»¤è¡Œåˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼ŒéªŒè¯ä¸€ä¸‹ä¹‹å‰çš„å®‰è£…ã€‚
ä¸»è¦å‚è€ƒOpenStack Queens : Add Usersã€OpenStack Queens : Add Users å’Œ OpenStack Queens : Boot Instancesã€‚


è¯´æ˜æœ¬æ–‡æ“ä½œå…¨éƒ¨éƒ½æ˜¯åœ¨æ§åˆ¶èŠ‚ç‚¹ã€‚ä¸ºäº†é¿å…æƒé™é—®é¢˜ï¼Œå»ºè®®åˆ‡æ¢åˆ°rootç”¨æˆ·è¿›è¡Œæ“ä½œï¼ˆå¦åˆ™è¦åŠ å¾ˆå¤šsudoï¼‰ã€‚sudo -i
ç½‘å¡é…ç½®å‚è€ƒOpenstackçš„ç½‘å¡è®¾ç½®å’Œå’ŒOpenStack Networking Tutorial: Single-host FlatDHCPManagerï¼Œé…ç½®eth2ç½‘å¡ã€‚
1ã€æŸ¥çœ‹å½“å‰ç½‘ç»œï¼Œip add
route -nï¼Œbrctl show
2ã€vim /etc/network/interfacesï¼Œæ·»åŠ ï¼š
auto eth2iface eth2 inet manual  up ifconfig $IFACE 0.0.0.0 up  up ifconfig $IFACE promisc#iface eth2 inet manual#up ifconfig eth2 up

3ã€å¯ç”¨ç½‘å¡ï¼Œifup eth2
åˆ›å»ºå­ç½‘1ã€vi /etc/neutron/plugins/ml2/ml2_conf.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 181: add[ml2_type_flat]flat_networks = physnet1

2ã€vi /etc/neutron/plugins/ml2/linuxbridge_agent.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 147: add[linux_bridge]physical_interface_mappings = physnet1:eth2# line 208: uncomment and changeenable_vxlan = false

3ã€é‡å¯neutron-linuxbridge-agentsystemctl restart neutron-linuxbridge-agent
4ã€è·å–projectID. admin-openrc
projectID=$(openstack project list | grep service | awk &#39;&#123;print $2&#125;&#39;)
5ã€åˆ›å»ºåä¸ºsharednet1çš„ç½‘ç»œ
openstack network create --project $projectID \--share --provider-network-type flat --provider-physical-network physnet1 sharednet1

6ã€åœ¨sharednet1ä¸­åˆ›å»ºå­ç½‘10.0.0.0/24
openstack subnet create subnet1 --network sharednet1 \--project $projectID --subnet-range 10.0.0.0/24 \--allocation-pool start=10.0.0.200,end=10.0.0.254 \--gateway 10.0.0.1 --dns-nameserver 10.0.0.10

7ã€æŸ¥çœ‹ç½‘ç»œopenstack network list
openstack subnet list

æ·»åŠ ç”¨æˆ·é¦–å…ˆä½¿adminç¯å¢ƒç”Ÿæ•ˆï¼Œ. admin-openrcã€‚
1ã€æ·»åŠ siaté¡¹ç›®openstack project create --domain default --description &quot;SIAT Project&quot; siat
2ã€æ·»åŠ voidkingç”¨æˆ·ï¼Œå¯†ç ä¸ºopenstackopenstack user create --domain default --project siat --password openstack voidking
3ã€æ·»åŠ clouduserè§’è‰²openstack role create clouduser
4ã€ç»™voidkingç”¨æˆ·æ·»åŠ clouduserè§’è‰²openstack role add --project siat --user voidking clouduser
5ã€å› ä¸ºcirroséœ€è¦çš„èµ„æºå¾ˆå°‘ï¼Œæ‰€ä»¥åˆ›å»ºä¸€ä¸ªç±»å‹æ¨¡æ¿m1.tinyopenstack flavor create --id 0 --vcpus 1 --ram 256 --disk 5 m1.tiny
åˆ›å»ºå®ä¾‹ç¯å¢ƒå‡†å¤‡1ã€vi ~/voidkingrcï¼Œåˆ›å»ºvoidkingç¯å¢ƒè„šæœ¬ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
export OS_PROJECT_DOMAIN_NAME=defaultexport OS_USER_DOMAIN_NAME=defaultexport OS_PROJECT_NAME=siatexport OS_USERNAME=voidkingexport OS_PASSWORD=openstackexport OS_AUTH_URL=http://controller:5000/v3export OS_IDENTITY_API_VERSION=3export OS_IMAGE_API_VERSION=2export PS1=&#x27;\u@\h \W(keystone)\$ &#x27;

2ã€ä½¿ç¯å¢ƒç”Ÿæ•ˆ. voidkingrc
3ã€æŸ¥çœ‹ç±»å‹æ¨¡æ¿openstack flavor list
4ã€æŸ¥çœ‹å¯ç”¨é•œåƒopenstack image list
5ã€æŸ¥çœ‹å¯ç”¨ç½‘ç»œopenstack network list
6ã€åˆ›å»ºå®‰å…¨ç»„openstack security group create secgroup01

7ã€æŸ¥çœ‹å®‰å…¨ç»„openstack security group list
8ã€åˆ›å»ºsshå¯†é’¥ssh-keygen -q -N &quot;&quot;
å¯†é’¥æ–‡ä»¶ä¿å­˜åœ¨/home/root/.ssh/ç›®å½•ä¸‹ã€‚
9ã€æ·»åŠ å…¬é’¥openstack keypair create --public-key ~/.ssh/id_rsa.pub vkkey
10ã€æŸ¥çœ‹å…¬é’¥openstack keypair list
åˆ›å»ºå®ä¾‹1ã€ç»™netIDèµ‹å€¼netID=$(openstack network list | grep sharednet1 | awk &#39;&#123; print $2 &#125;&#39;)
2ã€åˆ›å»ºå®ä¾‹
openstack server create --flavor m1.tiny \--image cirros --security-group secgroup01 \--nic net-id=$netID --key-name vkkey cirros0

3ã€æŸ¥çœ‹å®ä¾‹openstack server list
å¦‚ä¸Šå›¾ï¼Œå·²ç»æˆåŠŸå¯åŠ¨å®ä¾‹ï¼Œipä¸º10.0.0.206ï¼Œniceã€‚
PSï¼šåˆ é™¤å®ä¾‹å‘½ä»¤ï¼Œopenstack server delete cirros0
è®¿é—®å®ä¾‹é…ç½®å®‰å…¨ç»„çš„å®‰å…¨è®¾ç½®ï¼Œä»¥ä¾¿ä½¿ç”¨SSHå’ŒICMPè¿›è¡Œè®¿é—®ã€‚
1ã€è®¾ç½®å…è®¸ICMPopenstack security group rule create --protocol icmp --ingress secgroup01
2ã€è®¾ç½®å…è®¸sshopenstack security group rule create --protocol tcp --dst-port 22:22 secgroup01
3ã€æŸ¥çœ‹å®‰å…¨ç»„è§„åˆ™openstack security group rule list
4ã€è®¿é—®æµ‹è¯•ping 10.0.0.206 -c3
pingä¸é€šï¼Œçœ‹æ¥ç½‘ç»œå‡ºäº†é—®é¢˜ï¼Œç­‰ä¼šå†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚
5ã€æŸ¥çœ‹vncçš„urlï¼Œå¹¶å¤åˆ¶è¯¥urlopenstack console url show cirros0
6ã€urlä¸­çš„controlleræ›¿æ¢ä¸º192.168.56.110ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€
é¡ºåˆ©è®¿é—®ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œcirros0çš„ipä¸º192.168.56.102ï¼Œéš¾æ€ª10.0.0.206æ— æ³•pingé€šã€‚
æ§åˆ¶èŠ‚ç‚¹ä¸Šï¼Œping 192.168.56.102ï¼Œä¾ç„¶ä¸é€šã€‚vncä¸­ï¼Œping 192.168.56.110ï¼Œä¹Ÿä¸é€šã€‚
ç½‘ç»œé—®é¢˜ç½‘æ¡¥æ”¯æŒConfigure the Linux bridge agentä¸€èŠ‚ä¸­ï¼Œæåˆ°è¿‡è¦å¯ç”¨ç½‘æ¡¥æ”¯æŒï¼Œé‚£å°±å¯ç”¨ç½‘æ¡¥è¯•è¯•ã€‚
1ã€æŸ¥çœ‹ipè½¬å‘cat /proc/sys/net/ipv4/ip_forwardå¦‚æœå€¼ä¸º0ï¼Œé‚£ä¹ˆæ”¹ä¸º1ã€‚
2ã€å¯ç”¨ç½‘æ¡¥æ”¯æŒvim /etc/sysctl.confï¼Œæ·»åŠ 
net.bridge.bridge-nf-call-iptables = 1net.bridge.bridge-nf-call-ip6tables = 1

3ã€ä½¿é…ç½®ç”Ÿæ•ˆsysctl -p
ä¿®æ”¹åï¼Œä¾ç„¶æ— æ³•pingé€š10.0.0.206ã€‚
ç½‘å¡é…ç½®1ã€æŸ¥çœ‹ipip addå¦‚ä¸Šå›¾ï¼Œå’Œæœ¬æ–‡å¼€å§‹æ—¶ç›¸æ¯”ï¼Œå¤šäº†ä¸‰ä¸ªæ¥å£ã€‚
2ã€æŸ¥çœ‹ç½‘æ¡¥brctl show
3ã€vim /etc/network/interfacesï¼Œæ·»åŠ 
auto brqedda68f7-72iface brqedda68f7-72 inet staticaddress 10.0.0.1netmask 255.255.255.0bridge_stp offbridge_fd 0

ç„¶åå¯ç”¨brqedda68f7-72ç«¯å£ï¼Œifup brqedda68f7-72
æˆ–è€…ä¸é…ç½®interfacesï¼Œç›´æ¥æ‰§è¡Œifconfig brqedda68f7-72 10.0.0.1/24 up
5ã€æŸ¥çœ‹ç½‘ç»œip add
route -n

ä¸è¿‡ï¼Œä¾ç„¶æ— æ³•pingé€š10.0.0.206ã€‚æ¯•ç«Ÿï¼Œcirros0çš„ipä¸æ˜¯10.0.0.206ï¼Œè€Œæ˜¯192.168.56.102ã€‚è¿™ä¸ªipï¼Œæ˜æ˜¾æ˜¯é€šè¿‡VirtualBoxåˆ†é…çš„ï¼Œå’Œè™šæ‹Ÿæœºåœ¨åŒä¸€ä¸ªç½‘æ®µã€‚
ä¿®æ”¹ipæ—¢ç„¶cirros0çš„ipä¸å¯¹ï¼Œé‚£å°±ç»™å®ƒæ‰‹åŠ¨ä¿®æ”¹ä¸€ä¸‹ï¼Œå¥½ä¸»æ„ã€‚1ã€é€šè¿‡vncç™»å½•cirros0
2ã€sudo vi /etc/network/interfacesï¼Œä¿®æ”¹eth0çš„é…ç½®ä¸ºï¼š
auto eth0iface eth0 inet staticaddress 10.0.0.206netmask 255.255.255.0

3ã€é‡å¯eth0sudo ifdown eth0
sudo ifup eth0
4ã€åœ¨æ§åˆ¶èŠ‚ç‚¹æµ‹è¯•è¿æ¥ping 10.0.0.206 -c3
è‡³æ­¤ï¼Œé—®é¢˜è§£å†³ã€‚
è®¿é—®å®ä¾‹1ã€cirroså½“å‰åªæ”¯æŒå¯†ç è®¿é—®ï¼šssh cirros@10.0.0.206ï¼Œè¾“å…¥å¯†ç gocubsgoã€‚
ç™»å½•åæ‰§è¡Œls .sshï¼Œå¹¶æ²¡æœ‰authorized_keysæ–‡ä»¶ï¼Œçœ‹æ¥åˆ›å»ºå®ä¾‹æ—¶å¹¶æ²¡æœ‰æ³¨å…¥å¯†é’¥ï¼Œä¸çŸ¥é“ä»€ä¹ˆåŸå› ã€‚
2ã€åœ¨æ§åˆ¶èŠ‚ç‚¹ï¼Œæ·»åŠ å¯†é’¥åˆ°cirros0ssh-copy-id -i .ssh/id_rsa.pub -p 22 cirros@10.0.0.206
3ã€ç”¨å¯†é’¥æµ‹è¯•ç™»å½•ssh cirros@10.0.0.206 -i .ssh/id_rsa
ç™»å½•æˆåŠŸã€‚
4ã€å¦‚æœé‡å¯äº†æ§åˆ¶èŠ‚ç‚¹ï¼Œé‚£ä¹ˆéœ€è¦æ‰‹åŠ¨å¯åŠ¨cirros0openstack server start cirros0
5ã€vncçš„tokenä¹Ÿä¼šæ”¹å˜ï¼Œæ‰€ä»¥è¦é‡æ–°è·å–openstack console url show cirros0
åè®°è‡³æ­¤ï¼Œå·²ç»å®Œæˆäº†å—ï¼Ÿæƒ³åˆ°ä¸€äº›é—®é¢˜ï¼š

cirros0ç†è®ºä¸Šåº”è¯¥é€šè¿‡æµ®åŠ¨ipè¿›è¡Œè®¿é—®ï¼Œæˆ‘ä»¬è¿™ç§ç›´æ¥è®¿é—®æ˜¯é—¹å“ªæ ·ï¼Ÿ
ä»¥åæ¯æ¬¡åˆ›å»ºå®ä¾‹ï¼Œéƒ½è¦é€šè¿‡vncé‡æ–°é…ç½®ipï¼Ÿ
ä»¥åæ¯æ¬¡åˆ›å»ºå®ä¾‹ï¼Œéƒ½è¦æ‰‹åŠ¨æ·»åŠ å¯†é’¥ï¼Ÿ

ä¹Ÿè®¸æ˜¯å› ä¸ºVirtualBoxç½‘å¡åˆ†é…ä¸å¯¹ï¼Œä¹Ÿè®¸æ˜¯å› ä¸ºåœ¨è™šæ‹Ÿæœºä¸­å®‰è£…ï¼Œä¹Ÿè®¸æ˜¯å› ä¸ºæ§åˆ¶èŠ‚ç‚¹ç½‘ç»œé…ç½®ä¸å¯¹ã€‚ã€‚ã€‚ä¸ç®¡äº†ï¼Œåæ­£åˆ›å»ºå®ä¾‹å®Œæˆï¼Œå…¶ä»–é—®é¢˜æ”¾åœ¨ä»¥åçš„æ–‡ç« ä¸­è§£å†³ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”neutronç¯‡</title>
    <url>/dev-ubuntu16-manual-openstack-neutron/</url>
    <content><![CDATA[ç›®æ ‡ç´§æ¥ç€ã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”novaç¯‡ã€‹ï¼Œæœ¬æ–‡æˆ‘ä»¬æ¥å®‰è£…neutronï¼Œä¸»è¦å‚è€ƒNetworking serviceã€Install and configure for Ubuntuå’ŒOpenStack Queens : Configure Neutronã€‚


neutronç®€ä»‹OpenStack Networkingï¼ˆneutronï¼‰å…è®¸ç”¨æˆ·åˆ›å»ºå’Œè¿æ¥æ¥å£è®¾å¤‡ï¼Œè¿™äº›è®¾å¤‡ç”±å…¶ä»–OpenStackæœåŠ¡ç®¡ç†å¹¶è¿å…¥ç½‘ç»œã€‚å¯ä»¥å®ç°æ’ä»¶ä»¥é€‚åº”ä¸åŒçš„ç½‘ç»œè®¾å¤‡å’Œè½¯ä»¶ï¼Œä¸ºOpenStackæ¶æ„å’Œéƒ¨ç½²æä¾›çµæ´»æ€§ã€‚
å®ƒåŒ…æ‹¬ä»¥ä¸‹ç»„ä»¶ï¼šneutron-serveræ¥å—APIè¯·æ±‚ï¼Œå¹¶å°†è¯·æ±‚é€šè¿‡è·¯ç”±æ‰¾åˆ°é€‚å½“çš„OpenStack Networkingæ’ä»¶ä»¥è¿›è¡Œæ“ä½œã€‚
OpenStack Networking plug-ins and agentsæ’æ‹”ç«¯å£ï¼Œåˆ›å»ºç½‘ç»œæˆ–å­ç½‘ï¼Œå¹¶æä¾›IPå¯»å€ã€‚è¿™äº›æ’ä»¶å’Œä»£ç†ç¨‹åºå› ç‰¹å®šäº‘ä¸­ä½¿ç”¨çš„ä¾›åº”å•†å’ŒæŠ€æœ¯è€Œå¼‚ã€‚OpenStack Networkingé™„å¸¦äº†å¾ˆå¤šæ’ä»¶å’Œä»£ç†ï¼Œå¯ä»¥ç”¨äºæ€ç§‘è™šæ‹Ÿå’Œç‰©ç†äº¤æ¢æœºï¼ŒNEC OpenFlowäº§å“ï¼ŒOpen vSwitchï¼ŒLinuxæ¡¥æ¥å’ŒVMware NSXäº§å“ã€‚
å…¬å…±ä»£ç†æ˜¯L3ï¼ˆç¬¬3å±‚ï¼‰ï¼ŒDHCPï¼ˆåŠ¨æ€ä¸»æœºIPå¯»å€ï¼‰å’Œæ’ä»¶ä»£ç†ã€‚
Messaging queueå¤§å¤šæ•°OpenStack Networkingå®‰è£…ä½¿ç”¨messaging queueï¼Œåœ¨neutron-serverå’Œå„ç§ä»£ç†ä¹‹é—´ä¼ é€’ä¿¡æ¯ã€‚è¿˜ç”¨äºå­˜å‚¨ç‰¹å®šæ’ä»¶çš„ç½‘ç»œçŠ¶æ€ï¼Œç®—æ˜¯ä¸€ä¸ªæ•°æ®åº“ã€‚
OpenStack Networkingä¸»è¦ä¸OpenStack Computeäº¤äº’ï¼Œä¸ºå…¶å®ä¾‹æä¾›ç½‘ç»œå’Œè¿æ¥ã€‚
æ›´å¤šä¿¡æ¯è¯·å‚è€ƒNetworking (neutron) conceptsã€‚
ä¸»æœºç½‘ç»œåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šå®‰è£…æ“ä½œç³»ç»Ÿåï¼Œå¿…é¡»é…ç½®ç½‘ç»œæ¥å£ã€‚å®˜æ–¹å»ºè®®ç¦ç”¨ä»»ä½•è‡ªåŠ¨ç½‘ç»œç®¡ç†å·¥å…·ï¼Œå¹¶æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶ã€‚æœ‰å…³å¦‚ä½•é…ç½®ç½‘ç»œçš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æ–‡æ¡£ã€‚
å‡ºäºç®¡ç†ç›®çš„ï¼Œæ‰€æœ‰èŠ‚ç‚¹éƒ½éœ€è¦Internetè®¿é—®ï¼Œä¾‹å¦‚ç¨‹åºåŒ…å®‰è£…ï¼Œå®‰å…¨æ›´æ–°ï¼ŒåŸŸåç³»ç»Ÿï¼ˆDNSï¼‰å’Œç½‘ç»œæ—¶é—´åè®®ï¼ˆNTPï¼‰ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒèŠ‚ç‚¹åº”é€šè¿‡ç®¡ç†ç½‘ç»œæ¥å£è·å¾—Internetè®¿é—®ã€‚ä¸ºäº†çªå‡ºç½‘ç»œåˆ†ç¦»çš„é‡è¦æ€§ï¼Œç¤ºä¾‹ä½“ç³»ç»“æ„ä½¿ç”¨ä¸“ç”¨åœ°å€ç©ºé—´ç”¨äºç®¡ç†ç½‘ç»œï¼Œå¹¶å‡è®¾ç‰©ç†ç½‘ç»œåŸºç¡€ç»“æ„é€šè¿‡ç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰æˆ–å…¶ä»–æ–¹æ³•æä¾›Internetè®¿é—®ã€‚
åœ¨providerç½‘ç»œæ¶æ„ä¸­ï¼Œæ‰€æœ‰å®ä¾‹éƒ½ç›´æ¥è¿æ¥åˆ°providerç½‘ç»œã€‚åœ¨ç§ç½‘ä½“ç³»ç»“æ„ä¸­ï¼Œå®ä¾‹å¯ä»¥è¿æ¥åˆ°ä¸€ä¸ªç§ç½‘æˆ–å¤šä¸ªç§ç½‘ã€‚ç§ç½‘å¯ä»¥å®Œå…¨å±äºOpenStackï¼Œä¸æ¥å…¥å¤–ç½‘ï¼›ä¹Ÿå¯ä»¥é€šè¿‡providerç½‘ç»œæ¥å…¥å¤–éƒ¨ç½‘ç»œã€‚


æ§åˆ¶èŠ‚ç‚¹rootç”¨æˆ·ä¸ºäº†é¿å…æƒé™é—®é¢˜ï¼Œå»ºè®®åˆ‡æ¢åˆ°rootç”¨æˆ·è¿›è¡Œæ“ä½œï¼ˆå¦åˆ™è¦åŠ å¾ˆå¤šsudoï¼‰ã€‚sudo -i
æ•°æ®åº“1ã€ç™»å½•æ•°æ®åº“mysql -uroot -pï¼Œå¯†ç ä¸ºopenstackã€‚
2ã€åˆ›å»ºneutronæ•°æ®åº“CREATE DATABASE neutron;
3ã€æˆæƒ
GRANT ALL PRIVILEGES ON neutron.* TO &#x27;neutron&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;openstack&#x27;;GRANT ALL PRIVILEGES ON neutron.* TO &#x27;neutron&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;openstack&#x27;;

4ã€é€€å‡ºæ•°æ®åº“exit;
è¯ä¹¦å’Œç«¯ç‚¹1ã€ä½¿adminç¯å¢ƒç”Ÿæ•ˆ. admin-openrc
2ã€åˆ›å»ºneutronç”¨æˆ·openstack user create --domain default --password-prompt neutron
æ ¹æ®æç¤ºè®¾ç½®å¯†ç ä¸ºopenstackã€‚
3ã€æ·»åŠ adminè§’è‰²ç»™neutronç”¨æˆ·openstack role add --project service --user neutron admin
4ã€åˆ›å»ºneutronæœåŠ¡å®ä½“openstack service create --name neutron --description &quot;OpenStack Networking&quot; network
5ã€åˆ›å»ºç½‘ç»œæœåŠ¡ç«¯ç‚¹
openstack endpoint create --region RegionOne network public http://controller:9696openstack endpoint create --region RegionOne network internal http://controller:9696openstack endpoint create --region RegionOne network admin http://controller:9696

å®‰è£…é…ç½®1ã€å®‰è£…ç›¸å…³ç»„ä»¶
apt-get -y install neutron-server neutron-plugin-ml2 neutron-plugin-linuxbridge-agent neutron-l3-agent neutron-dhcp-agent neutron-metadata-agent python-neutronclient

2ã€å¤‡ä»½neutron.confmv /etc/neutron/neutron.conf /etc/neutron/neutron.conf.bak
3ã€vim /etc/neutron/neutron.confï¼Œæ–°å»ºneutron.confå†…å®¹ä¸ºï¼š
[DEFAULT]core_plugin = ml2service_plugins = routerauth_strategy = keystonestate_path = /var/lib/neutrondhcp_agent_notification = Trueallow_overlapping_ips = Truenotify_nova_on_port_status_changes = Truenotify_nova_on_port_data_changes = True# RabbitMQ connection infotransport_url = rabbit://openstack:openstack@controller[agent]root_helper = sudo /usr/bin/neutron-rootwrap /etc/neutron/rootwrap.conf# Keystone auth info[keystone_authtoken]www_authenticate_uri = http://controller:5000auth_url = http://controller:5000memcached_servers = controller:11211auth_type = passwordproject_domain_name = defaultuser_domain_name = defaultproject_name = serviceusername = neutronpassword = openstack# MariaDB connection info[database]connection = mysql+pymysql://neutron:openstack@controller/neutron# Nova connection info[nova]auth_url = http://controller:5000auth_type = passwordproject_domain_name = defaultuser_domain_name = defaultregion_name = RegionOneproject_name = serviceusername = novapassword = openstack[oslo_concurrency]lock_path = $state_path/tmp

4ã€æ›´æ”¹æƒé™chmod 640 /etc/neutron/neutron.conf
chgrp neutron /etc/neutron/neutron.conf
5ã€vi /etc/neutron/l3_agent.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 17: addinterface_driver = neutron.agent.linux.interface.BridgeInterfaceDriver

6ã€vi /etc/neutron/dhcp_agent.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 17: addinterface_driver = neutron.agent.linux.interface.BridgeInterfaceDriver# line 28: uncommentdhcp_driver = neutron.agent.linux.dhcp.Dnsmasq# line 37: uncomment and changeenable_isolated_metadata = true

7ã€vi /etc/neutron/metadata_agent.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 22: uncomment and specify Nova API servernova_metadata_host = controller# line 34: uncomment and specify any secret key you likemetadata_proxy_shared_secret = openstack# line 260: uncomment and specify Memcache Servermemcache_servers = controller:11211

8ã€vi /etc/neutron/plugins/ml2/ml2_conf.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 129: add ( it&#x27;s OK with no value for &quot;tenant_network_types&quot; (set later if need) )[ml2]type_drivers = flat,vlan,vxlantenant_network_types =mechanism_drivers = linuxbridge,l2populationextension_drivers = port_security# line 262: uncomment and addenable_security_group = Truefirewall_driver = neutron.agent.linux.iptables_firewall.IptablesFirewallDriver# end line: uncommentenable_ipset = True

9ã€vi /etc/neutron/plugins/ml2/linuxbridge_agent.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 235: add own IP addresslocal_ip = 192.168.56.110

10ã€vi /etc/nova/nova.confï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# add follows into [DEFAULT] sectionuse_neutron = Truelinuxnet_interface_driver = nova.network.linux_net.LinuxBridgeInterfaceDriverfirewall_driver = nova.virt.firewall.NoopFirewallDrivervif_plugging_is_fatal = Truevif_plugging_timeout = 300# add follows to the end : Neutron auth info# the value of metadata_proxy_shared_secret is the same with the one in metadata_agent.ini[neutron]auth_url = http://controller:5000auth_type = passwordproject_domain_name = defaultuser_domain_name = defaultregion_name = RegionOneproject_name = serviceusername = neutronpassword = openstackservice_metadata_proxy = Truemetadata_proxy_shared_secret = openstack

å®Œæˆå®‰è£…1ã€åˆ›å»ºé“¾æ¥ln -s /etc/neutron/plugins/ml2/ml2_conf.ini /etc/neutron/plugin.ini
2ã€ç”Ÿæˆæ•°æ®åº“è¡¨ç»“æ„su -s /bin/bash neutron -c &quot;neutron-db-manage --config-file /etc/neutron/neutron.conf --config-file /etc/neutron/plugin.ini upgrade head&quot;
3ã€é‡å¯ç½‘ç»œæœåŠ¡å¹¶è®¾ç½®å¼€æœºå¯åŠ¨
for service in server l3-agent dhcp-agent metadata-agent linuxbridge-agent; dosystemctl restart neutron-$servicesystemctl enable neutron-$servicedone

4ã€é‡å¯novasystemctl restart nova-api nova-compute
5ã€æŸ¥çœ‹ç½‘ç»œagentopenstack network agent list
å¦‚ä¸Šå›¾ï¼Œçœ‹åˆ°4ä¸ªagentï¼Œéƒ½åœ¨controllerèŠ‚ç‚¹ä¸Šã€‚
è®¡ç®—èŠ‚ç‚¹ä¸»è¦å‚è€ƒOpenStack Queens : Configure Neutronã€‚
rootç”¨æˆ·ä¸ºäº†é¿å…æƒé™é—®é¢˜ï¼Œå»ºè®®åˆ‡æ¢åˆ°rootç”¨æˆ·è¿›è¡Œæ“ä½œï¼ˆå¦åˆ™è¦åŠ å¾ˆå¤šsudoï¼‰ã€‚sudo -i
å®‰è£…é…ç½®1ã€å®‰è£…ç»„ä»¶apt-get -y install neutron-common neutron-plugin-ml2 neutron-plugin-linuxbridge-agent
2ã€å¤‡ä»½neutron.confmv /etc/neutron/neutron.conf /etc/neutron/neutron.conf.bak
3ã€vim /etc/neutron/neutron.confï¼Œæ–°å»ºneutron.confå¦‚ä¸‹ï¼š
[DEFAULT]core_plugin = ml2service_plugins = routerauth_strategy = keystonestate_path = /var/lib/neutronallow_overlapping_ips = True# RabbitMQ connection infotransport_url = rabbit://openstack:openstack@controller[agent]root_helper = sudo /usr/bin/neutron-rootwrap /etc/neutron/rootwrap.conf# Keystone auth info[keystone_authtoken]www_authenticate_uri = http://controller:5000auth_url = http://controller:5000memcached_servers = controller:11211auth_type = passwordproject_domain_name = defaultuser_domain_name = defaultproject_name = serviceusername = neutronpassword = openstack[oslo_concurrency]lock_path = $state_path/lock

4ã€ä¿®æ”¹æƒé™chmod 640 /etc/neutron/neutron.conf
chgrp neutron /etc/neutron/neutron.conf
5ã€vi /etc/neutron/plugins/ml2/ml2_conf.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 129: add ( it&#x27;s OK with no value for &quot;tenant_network_types&quot; (set later if need) )[ml2]type_drivers = flat,vlan,vxlantenant_network_types =mechanism_drivers = linuxbridge,l2populationextension_drivers = port_security# line 262: uncomment and addenable_security_group = Truefirewall_driver = neutron.agent.linux.iptables_firewall.IptablesFirewallDriver# end line: uncommentenable_ipset = True

6ã€vi /etc/neutron/plugins/ml2/linuxbridge_agent.iniï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 235: add own Ip addresslocal_ip = 192.168.56.111

7ã€vi /etc/nova/nova.confï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# add follows into [DEFAULT] sectionuse_neutron = Truelinuxnet_interface_driver = nova.network.linux_net.LinuxBridgeInterfaceDriverfirewall_driver = nova.virt.firewall.NoopFirewallDrivervif_plugging_is_fatal = Truevif_plugging_timeout = 300# add follows to the end: Neutron auth info# the value of metadata_proxy_shared_secret is the same with the one in metadata_agent.ini[neutron]auth_url = http://controller:5000auth_type = passwordproject_domain_name = defaultuser_domain_name = defaultregion_name = RegionOneproject_name = serviceusername = neutronpassword = openstackservice_metadata_proxy = Truemetadata_proxy_shared_secret = openstack

8ã€åˆ›å»ºé“¾æ¥ln -s /etc/neutron/plugins/ml2/ml2_conf.ini /etc/neutron/plugin.ini
9ã€é‡å¯ç½‘ç»œæœåŠ¡systemctl restart nova-compute neutron-linuxbridge-agent
10ã€è®¾ç½®å¼€å¯è‡ªå¯åŠ¨systemctl enable neutron-linuxbridge-agent
éªŒè¯æ“ä½œåœ¨æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚
1ã€ä½¿adminç¯å¢ƒç”Ÿæ•ˆ. admin-openrc
2ã€æŸ¥çœ‹agentsopenstack network agent listå¦‚ä¸Šå›¾ï¼Œæ­¤æ—¶å°±èƒ½çœ‹åˆ°5ä¸ªagentï¼Œå…¶ä¸­4ä¸ªåœ¨controllerèŠ‚ç‚¹ï¼Œ1ä¸ªåœ¨computeèŠ‚ç‚¹ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”novaç¯‡</title>
    <url>/dev-ubuntu16-manual-openstack-nova/</url>
    <content><![CDATA[ç›®æ ‡ç´§æ¥ç€ã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”glanceç¯‡ã€‹ï¼Œæœ¬æ–‡æˆ‘ä»¬æ¥å®‰è£…novaï¼Œä¸»è¦å‚è€ƒCompute serviceã€Install and configure controller node for Ubuntuã€Install and configure a compute node for Ubuntuã€‚


novaç®€ä»‹ä½¿ç”¨OpenStack Computeæ¥æ‰˜ç®¡å’Œç®¡ç†äº‘è®¡ç®—ç³»ç»Ÿã€‚OpenStack Computeæ˜¯åŸºç¡€æ¶æ„å³æœåŠ¡ï¼ˆIaaSï¼‰ç³»ç»Ÿçš„ä¸»è¦éƒ¨åˆ†ã€‚ä¸»è¦æ¨¡å—ç”¨Pythonå®ç°ã€‚
OpenStack Computeä¸OpenStack Identityäº¤äº’ä»¥è¿›è¡Œèº«ä»½â€‹â€‹éªŒè¯ï¼›OpenStack é•œåƒæœåŠ¡ç”¨äºç£ç›˜å’Œé•œåƒç®¡ç†ï¼›OpenStack Dashboardç”¨äºç”¨æˆ·ç•Œé¢å’Œç®¡ç†ç•Œé¢ã€‚é•œåƒè®¿é—®å—é¡¹ç›®å’Œç”¨æˆ·çš„é™åˆ¶ï¼›é…é¢å—æ¯ä¸ªé¡¹ç›®é™åˆ¶ï¼ˆä¾‹å¦‚ï¼Œå®ä¾‹æ•°ï¼‰ã€‚OpenStack Computeå¯ä»¥åœ¨æ ‡å‡†ç¡¬ä»¶ä¸Šæ°´å¹³æ‰©å±•ï¼Œä¸‹è½½é•œåƒï¼Œç„¶åå¯åŠ¨å®ä¾‹ã€‚
OpenStack ComputeåŒ…å«ä»¥ä¸‹ç»„ä»¶ï¼š
nova-api serviceæ¥å—å¹¶å“åº”ç»ˆç«¯ç”¨æˆ·compute APIè°ƒç”¨ã€‚è¯¥æœåŠ¡æ”¯æŒOpenStack Compute APIã€‚å®ƒå¼ºåˆ¶æ‰§è¡ŒæŸäº›ç­–ç•¥å¹¶å¯åŠ¨å¤§å¤šæ•°æ´»åŠ¨ï¼Œä¾‹å¦‚è¿è¡Œå®ä¾‹ã€‚
nova-api-metadata serviceæ¥å—æ¥è‡ªå®ä¾‹çš„å…ƒæ•°æ®è¯·æ±‚ã€‚åœ¨nova-networkçš„å¤šä¸»æœºæ¨¡å¼ä¸‹è¿è¡Œæ—¶ï¼Œé€šå¸¸ä¼šä½¿ç”¨nova-api-metadataæœåŠ¡ã€‚
nova-compute serviceé€šè¿‡è™šæ‹Ÿæœºç®¡ç†ç¨‹åºAPIï¼Œåˆ›å»ºå’Œç»ˆæ­¢è™šæ‹Ÿæœºå®ä¾‹ã€‚ä¾‹å¦‚ï¼š

XenAPI for XenServer/XCP
libvirt for KVM or QEMU
VMwareAPI for VMware

å¤„ç†ç›¸å½“å¤æ‚ã€‚åŸºæœ¬ä¸Šï¼Œnova-computeå®ˆæŠ¤ç¨‹åºæ¥å—æ¥è‡ªé˜Ÿåˆ—çš„æ“ä½œï¼Œå¹¶æ‰§è¡Œä¸€ç³»åˆ—ç³»ç»Ÿå‘½ä»¤ï¼Œä¾‹å¦‚å¯åŠ¨KVMå®ä¾‹å¹¶æ›´æ–°å…¶åœ¨æ•°æ®åº“ä¸­çš„çŠ¶æ€ã€‚
nova-placement-api serviceè·Ÿè¸ªæ¯ä¸ªproviderçš„åº“å­˜å’Œä½¿ç”¨æƒ…å†µã€‚
nova-scheduler serviceä»é˜Ÿåˆ—ä¸­è·å–è™šæ‹Ÿæœºå®ä¾‹è¯·æ±‚ï¼Œå¹¶ç¡®å®šå®ƒè¿è¡Œçš„è®¡ç®—æœåŠ¡å™¨ä¸»æœºã€‚
nova-conductor moduleè´Ÿè´£nova-computeæœåŠ¡å’Œæ•°æ®åº“ä¹‹é—´çš„äº¤äº’ã€‚å®ƒæ¶ˆé™¤äº†nova-computeæœåŠ¡å¯¹äº‘æ•°æ®åº“çš„ç›´æ¥è®¿é—®ã€‚nova-conductor moduleå¯ä»¥æ°´å¹³ä¼¸ç¼©ã€‚ä¸è¦å°†å…¶éƒ¨ç½²åœ¨è¿è¡Œnova-computeæœåŠ¡çš„èŠ‚ç‚¹ä¸Šã€‚
nova-consoleauth daemonåœ¨æ§åˆ¶å°ä»£ç†ä¸ºç”¨æˆ·æˆæƒtokensï¼Œå‚è§nova-novncproxyå’Œnova-xvpvncproxyã€‚å¿…é¡»è¿è¡Œæ­¤æœåŠ¡æ‰èƒ½ä½¿æ§åˆ¶å°ä»£ç†ç”Ÿæ•ˆã€‚å¯ä»¥é’ˆå¯¹ç¾¤é›†é…ç½®ä¸­çš„å•ä¸ªnova-consoleauthæœåŠ¡è¿è¡Œä»»ä¸€ç±»å‹çš„ä»£ç†ã€‚
nova-novncproxy daemonæä¾›æ­£åœ¨è¿è¡Œçš„å®ä¾‹çš„ä»£ç†ï¼Œè¯¥ä»£ç†é€šè¿‡VNCè¿æ¥è®¿é—®ã€‚æ”¯æŒåŸºäºæµè§ˆå™¨çš„novncå®¢æˆ·ç«¯ã€‚
nova-spicehtml5proxy daemonæä¾›æ­£åœ¨è¿è¡Œçš„å®ä¾‹çš„ä»£ç†ï¼Œè¯¥ä»£ç†é€šè¿‡SPICEè¿æ¥è®¿é—®ã€‚æ”¯æŒåŸºäºæµè§ˆå™¨çš„HTML5å®¢æˆ·ç«¯ã€‚
nova-xvpvncproxy daemonæä¾›æ­£åœ¨è¿è¡Œçš„å®ä¾‹çš„ä»£ç†ï¼Œè¯¥ä»£ç†é€šè¿‡VNCè¿æ¥è®¿é—®ã€‚æ”¯æŒOpenStackç‰¹å®šçš„Javaå®¢æˆ·ç«¯ã€‚
The queueç”¨äºåœ¨å®ˆæŠ¤è¿›ç¨‹ä¹‹é—´ä¼ é€’æ¶ˆæ¯çš„ä¸­å¤®é›†çº¿å™¨ã€‚é€šå¸¸ç”¨RabbitMQå®ç°ï¼Œä¹Ÿå¯ä»¥ç”¨å¦ä¸€ä¸ªAMQPæ¶ˆæ¯é˜Ÿåˆ—å®ç°ï¼Œæ¯”å¦‚ZeroMQã€‚
SQL databaseå­˜å‚¨äº‘åŸºç¡€æ¶æ„çš„å¤§å¤šæ•°æ„å»ºæ—¶å’Œè¿è¡Œæ—¶çŠ¶æ€ï¼ŒåŒ…æ‹¬ï¼š

Available instance types
Instances in use
Available networks
Projects

ä»ç†è®ºä¸Šè®²ï¼ŒOpenStack Computeå¯ä»¥æ”¯æŒSQLAlchemyæ”¯æŒçš„ä»»ä½•æ•°æ®åº“ã€‚å¸¸è§çš„æ•°æ®åº“æ˜¯ç”¨äºæµ‹è¯•å’Œå¼€å‘å·¥ä½œçš„SQLite3ï¼ŒMySQLï¼ŒMariaDBå’ŒPostgreSQLã€‚
æ§åˆ¶èŠ‚ç‚¹rootç”¨æˆ·ä¸ºäº†é¿å…æƒé™é—®é¢˜ï¼Œå»ºè®®åˆ‡æ¢åˆ°rootç”¨æˆ·è¿›è¡Œæ“ä½œï¼ˆå¦åˆ™è¦åŠ å¾ˆå¤šsudoï¼‰ã€‚sudo -i
æ•°æ®åº“1ã€ç™»å½•æ•°æ®åº“mysql -uroot -pï¼Œå¯†ç ä¸ºopenstackã€‚
2ã€åˆ›å»ºnova_apiï¼Œnovaï¼Œnova_placementå’Œnova_cell0æ•°æ®åº“
CREATE DATABASE nova_api;CREATE DATABASE nova;CREATE DATABASE nova_placement; CREATE DATABASE nova_cell0;

3ã€æˆæƒ
GRANT ALL PRIVILEGES ON nova_api.* TO &#x27;nova&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;openstack&#x27;;GRANT ALL PRIVILEGES ON nova_api.* TO &#x27;nova&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;openstack&#x27;;GRANT ALL PRIVILEGES ON nova.* TO &#x27;nova&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;openstack&#x27;;GRANT ALL PRIVILEGES ON nova.* TO &#x27;nova&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;openstack&#x27;;GRANT ALL PRIVILEGES ON nova_placement.* TO &#x27;nova&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;openstack&#x27;;GRANT ALL PRIVILEGES ON nova_placement.* TO &#x27;nova&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;openstack&#x27;;GRANT ALL PRIVILEGES ON nova_cell0.* TO &#x27;nova&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;openstack&#x27;;GRANT ALL PRIVILEGES ON nova_cell0.* TO &#x27;nova&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;openstack&#x27;;

4ã€é€€å‡ºæ•°æ®åº“exit;
æœåŠ¡è¯ä¹¦å’Œç«¯ç‚¹1ã€ä½¿adminç¯å¢ƒç”Ÿæ•ˆ. admin-openrc
2ã€åˆ›å»ºnovaç”¨æˆ·openstack user create --domain default --password-prompt nova
æ ¹æ®æç¤ºè®¾ç½®å¯†ç ä¸ºopenstackã€‚
3ã€æ·»åŠ adminè§’è‰²ç»™novaç”¨æˆ·openstack role add --project service --user nova admin
4ã€åˆ›å»ºnovaæœåŠ¡å®ä½“openstack service create --name nova --description &quot;OpenStack Compute&quot; compute
5ã€åˆ›å»ºè®¡ç®—æœåŠ¡API endpoints
openstack endpoint create --region RegionOne compute public http://controller:8774/v2.1openstack endpoint create --region RegionOne compute internal http://controller:8774/v2.1openstack endpoint create --region RegionOne compute admin http://controller:8774/v2.1

æœåŠ¡è¯ä¹¦å’Œç«¯ç‚¹21ã€åˆ›å»ºPlacement service useropenstack user create --domain default --password-prompt placement
æŒ‰ç…§æç¤ºè®¾ç½®å¯†ç ä¸ºopenstackã€‚
2ã€æ·»åŠ Placement useråˆ°service projectï¼Œå¹¶ä¸”èµ‹äºˆadminè§’è‰²openstack role add --project service --user placement admin
3ã€åˆ›å»ºplacementæœåŠ¡å®ä½“openstack service create --name placement --description &quot;Placement API&quot; placement
4ã€åˆ›å»ºPlacement APIæœåŠ¡ç«¯ç‚¹
openstack endpoint create --region RegionOne placement public http://controller:8778openstack endpoint create --region RegionOne placement internal http://controller:8778openstack endpoint create --region RegionOne placement admin http://controller:8778

å®‰è£…é…ç½®ç»„ä»¶1ã€å®‰è£…ç»„ä»¶apt-get -y install nova-api nova-placement-api nova-conductor nova-consoleauth nova-scheduler nova-novncproxy python-novaclient
2ã€å¤‡ä»½nova.confmv /etc/nova/nova.conf /etc/nova/nova.conf.bak
3ã€vim /etc/nova/nova.confï¼Œæ–°å»ºnova.confå†…å®¹ä¸ºï¼š
[DEFAULT]# define own IPmy_ip = 192.168.56.110state_path = /var/lib/novaenabled_apis = osapi_compute,metadatalog_dir = /var/log/nova# RabbitMQ connection infotransport_url = rabbit://openstack:openstack@controller[api]auth_strategy = keystone# Glance connection info[glance]api_servers = http://controller:9292[oslo_concurrency]lock_path = $state_path/tmp# MariaDB connection info[api_database]connection = mysql+pymysql://nova:openstack@controller/nova_api[database]connection = mysql+pymysql://nova:openstack@controller/nova# Keystone auth info[keystone_authtoken]www_authenticate_uri = http://controller:5000auth_url = http://controller:5000memcached_servers = controller:11211auth_type = passwordproject_domain_name = defaultuser_domain_name = defaultproject_name = serviceusername = novapassword = openstack[placement]auth_url = http://controller:5000os_region_name = RegionOneauth_type = passwordproject_domain_name = defaultuser_domain_name = defaultproject_name = serviceusername = placementpassword = openstack[placement_database]connection = mysql+pymysql://nova:openstack@controller/nova_placement[wsgi]api_paste_config = /etc/nova/api-paste.ini


4ã€æ›´æ”¹æƒé™chmod 640 /etc/nova/nova.conf
chgrp nova /etc/nova/nova.conf
5ã€ç”Ÿæˆæ•°æ®åº“è¡¨ç»“æ„
su -s /bin/bash nova -c &quot;nova-manage api_db sync&quot;su -s /bin/bash nova -c &quot;nova-manage cell_v2 map_cell0&quot;su -s /bin/bash nova -c &quot;nova-manage db sync&quot;su -s /bin/bash nova -c &quot;nova-manage cell_v2 create_cell --name cell1&quot;

å®ŒæˆåæŸ¥çœ‹æ—¥å¿—ï¼štail /var/log/nova/nova-manage.logä¸æ”¾å¿ƒçš„è¯ï¼Œå°±ç™»å½•æ•°æ®åº“æŸ¥çœ‹æ•°æ®ã€‚
6ã€éªŒè¯ä¸€ä¸‹cell0å’Œcell1æ˜¯å¦è¢«æ­£ç¡®æ³¨å†Œnova-manage cell_v2 list_cells
7ã€é‡å¯æœåŠ¡ï¼Œå®Œæˆå®‰è£…
for service in api conductor scheduler consoleauth novncproxy; dosystemctl restart nova-$servicedone

8ã€æŸ¥çœ‹è®¡ç®—æœåŠ¡åˆ—è¡¨openstack compute service list
è®¡ç®—èŠ‚ç‚¹æœ¬èŠ‚ä»‹ç»å¦‚ä½•åœ¨è®¡ç®—èŠ‚ç‚¹ä¸Šå®‰è£…å’Œé…ç½®ComputeæœåŠ¡ï¼Œè¯¥æœåŠ¡æ”¯æŒå¤šä¸ªè™šæ‹Ÿæœºç®¡ç†ç¨‹åºæ¥éƒ¨ç½²å®ä¾‹æˆ–è™šæ‹Ÿæœºï¼ˆVMï¼‰ã€‚ä¸ºç®€å•èµ·è§ï¼Œæ­¤é…ç½®ä½¿ç”¨Quick EMUlatorï¼ˆQEMUï¼‰è™šæ‹Ÿæœºç®¡ç†ç¨‹åºï¼Œå’Œæ”¯æŒè™šæ‹Ÿæœºç¡¬ä»¶åŠ é€Ÿçš„KVMæ‰©å±•ã€‚å¯ä»¥æŒ‰ç…§æ•™ç¨‹è¿›è¡Œå°æ”¹ï¼Œä»¥ä¾¿æ°´å¹³æ‰©å±•è®¡ç®—èŠ‚ç‚¹ã€‚
å®‰è£…æ–¹æ³•ä¸»è¦å‚è€ƒOpenStack Queens : Add Compute Nodesã€‚
rootç”¨æˆ·ä¸ºäº†é¿å…æƒé™é—®é¢˜ï¼Œå»ºè®®åˆ‡æ¢åˆ°rootç”¨æˆ·è¿›è¡Œæ“ä½œï¼ˆå¦åˆ™è¦åŠ å¾ˆå¤šsudoï¼‰ã€‚sudo -i
å®‰è£…é…ç½®1ã€å®‰è£…ç»„ä»¶apt-get -y install nova-compute-kvm
2ã€å¤‡ä»½nova.confmv /etc/nova/nova.conf /etc/nova/nova.conf.bak
3ã€vim /etc/nova/nova.confï¼Œæ–°å»ºnova.confå†…å®¹ä¸ºï¼š
[DEFAULT]# define own IP addressmy_ip = 192.168.56.111state_path = /var/lib/novaenabled_apis = osapi_compute,metadatalog_dir = /var/log/nova# RabbitMQ connection infotransport_url = rabbit://openstack:openstack@controller[api]auth_strategy = keystone# enable VNC[vnc]enabled = Trueserver_listen = 0.0.0.0server_proxyclient_address = $my_ipnovncproxy_base_url = http://controller:6080/vnc_auto.html# Glance connection info[glance]api_servers = http://controller:9292[oslo_concurrency]lock_path = $state_path/tmp# Keystone auth info[keystone_authtoken]www_authenticate_uri = http://controller:5000auth_url = http://controller:5000memcached_servers = controller:11211auth_type = passwordproject_domain_name = defaultuser_domain_name = defaultproject_name = serviceusername = novapassword = openstack[placement]auth_url = http://controller:5000os_region_name = RegionOneauth_type = passwordproject_domain_name = defaultuser_domain_name = defaultproject_name = serviceusername = placementpassword = openstack[wsgi]api_paste_config = /etc/nova/api-paste.ini

4ã€è®¾ç½®æƒé™chmod 640 /etc/nova/nova.conf
chgrp nova /etc/nova/nova.conf
5ã€ç¡¬ä»¶åŠ é€Ÿï¼ˆå¯é€‰ï¼‰egrep -c &#39;(vmx|svm)&#39; /proc/cpuinfo
å¦‚æœçœ‹åˆ°å¤§äºç­‰äº1çš„æ•°å­—ï¼Œè¯´æ˜ä¸»æœºæ”¯æŒç¡¬ä»¶åŠ é€Ÿï¼Œä¸éœ€è¦é¢å¤–çš„é…ç½®ã€‚
å¦‚æœæ­¤å‘½ä»¤è¿”å›é›¶å€¼ï¼Œåˆ™è®¡ç®—èŠ‚ç‚¹ä¸æ”¯æŒç¡¬ä»¶åŠ é€Ÿï¼Œæ‚¨å¿…é¡»å°†libvirté…ç½®ä¸ºä½¿ç”¨QEMUè€Œä¸æ˜¯KVMã€‚
ç¼–è¾‘/etc/nova/nova-compute.confæ–‡ä»¶ï¼Œlibvirtéƒ¨åˆ†ä¿®æ”¹ä¸ºï¼š
[libvirt]# ...virt_type = qemu

6ã€é‡å¯nova-computeæœåŠ¡systemctl restart nova-compute
æ·»åŠ è®¡ç®—èŠ‚ç‚¹åˆ°æ•°æ®åº“ä»¥ä¸‹æ“ä½œåœ¨controllerèŠ‚ç‚¹æ“ä½œã€‚
1ã€ä½¿adminç¯å¢ƒç”Ÿæ•ˆ. admin-openrc
2ã€æŸ¥çœ‹è®¡ç®—æœåŠ¡åˆ—è¡¨openstack compute service list
å‘ç°ï¼Œæ­¤æ—¶å·²ç»å¤šäº†nova-computeæœåŠ¡ã€‚
3ã€æŸ¥çœ‹è®¡ç®—èŠ‚ç‚¹openstack compute service list --service nova-compute
4ã€å¦‚æœæ²¡æœ‰çœ‹åˆ°è®¡ç®—èŠ‚ç‚¹ï¼Œé‚£ä¹ˆéœ€è¦æŸ¥æ‰¾è®¡ç®—èŠ‚ç‚¹ï¼Œå¹¶ä¸”è¿›è¡Œæ³¨å†Œsu -s /bin/bash nova -c &quot;nova-manage cell_v2 discover_hosts&quot;
æ·»åŠ æ–°çš„computeèŠ‚ç‚¹æ—¶ï¼Œå¿…é¡»åœ¨æ§åˆ¶å™¨èŠ‚ç‚¹ä¸Šè¿è¡Œnova-manage cell_v2 discover_hostsä»¥æ³¨å†Œè¿™äº›æ–°è®¡ç®—èŠ‚ç‚¹ã€‚æˆ–è€…ï¼Œå¯ä»¥åœ¨/etc/nova/nova.confä¸­è®¾ç½®é€‚å½“çš„é—´éš”æ¥è‡ªåŠ¨å‘ç°å’Œæ³¨å†ŒèŠ‚ç‚¹ï¼š
[scheduler]discover_hosts_in_cells_interval = 300

éªŒè¯æ“ä½œä»¥ä¸‹æ“ä½œåœ¨controllerèŠ‚ç‚¹æ“ä½œã€‚
1ã€ä½¿adminç¯å¢ƒç”Ÿæ•ˆ. admin-openrc
2ã€åˆ—å‡ºæœåŠ¡ç»„ä»¶ï¼Œä»¥éªŒè¯æ¯ä¸ªè¿›ç¨‹çš„æˆåŠŸå¯åŠ¨å’Œæ³¨å†Œopenstack compute service list
æˆåŠŸçš„è¯å¯ä»¥çœ‹åˆ°å››ä¸ªæœåŠ¡ï¼šnova-schedulerã€nova-consoleauthã€nova-conductorå’Œnova-computeã€‚
3ã€åˆ—å‡ºIdentityæœåŠ¡ä¸­çš„APIç«¯ç‚¹ï¼Œä»¥éªŒè¯ä¸IdentityæœåŠ¡çš„è¿æ¥openstack catalog list

4ã€åˆ—å‡ºé•œåƒæœåŠ¡ä¸­çš„é•œåƒï¼Œä»¥éªŒè¯ä¸é•œåƒæœåŠ¡çš„è¿æ¥openstack image list

5ã€æ£€æŸ¥cells and placement APIæ˜¯å¦å·¥ä½œæ­£å¸¸nova-status upgrade check
æ§åˆ¶èŠ‚ç‚¹å®‰è£…è®¡ç®—æœåŠ¡1ã€å®‰è£…ç»„ä»¶apt -y install nova-compute-kvm
2ã€vim /etc/nova/nova.confï¼Œæ·»åŠ vncé…ç½®ï¼š
# enable VNC[vnc]enabled = Trueserver_listen = 0.0.0.0server_proxyclient_address = $my_ipnovncproxy_base_url = http://controller:6080/vnc_auto.html

3ã€ç¡¬ä»¶åŠ é€Ÿï¼ˆå¯é€‰ï¼‰egrep -c &#39;(vmx|svm)&#39; /proc/cpuinfo
å¦‚æœçœ‹åˆ°å¤§äºç­‰äº1çš„æ•°å­—ï¼Œè¯´æ˜ä¸»æœºæ”¯æŒç¡¬ä»¶åŠ é€Ÿï¼Œä¸éœ€è¦é¢å¤–çš„é…ç½®ã€‚
å¦‚æœæ­¤å‘½ä»¤è¿”å›é›¶å€¼ï¼Œåˆ™è®¡ç®—èŠ‚ç‚¹ä¸æ”¯æŒç¡¬ä»¶åŠ é€Ÿï¼Œæ‚¨å¿…é¡»å°†libvirté…ç½®ä¸ºä½¿ç”¨QEMUè€Œä¸æ˜¯KVMã€‚
ç¼–è¾‘/etc/nova/nova-compute.confæ–‡ä»¶ï¼Œlibvirtéƒ¨åˆ†ä¿®æ”¹ä¸ºï¼š
[libvirt]# ...virt_type = qemu

4ã€é‡å¯nova-computeæœåŠ¡systemctl restart nova-compute
5ã€æ·»åŠ åˆ°æ•°æ®åº“su -s /bin/bash nova -c &quot;nova-manage cell_v2 discover_hosts&quot;
6ã€æŸ¥çœ‹è®¡ç®—èŠ‚ç‚¹openstack compute service list --service nova-compute
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”glanceç¯‡</title>
    <url>/dev-ubuntu16-manual-openstack-glance/</url>
    <content><![CDATA[ç›®æ ‡ç´§æ¥ç€ã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”keystoneç¯‡ã€‹ï¼Œæœ¬æ–‡æˆ‘ä»¬æ¥å®‰è£…glanceï¼Œä¸»è¦å‚è€ƒGlance Installation Tutorial for Ubuntuã€‚


glanceç®€ä»‹ImageæœåŠ¡ï¼ˆglanceï¼‰ä½¿ç”¨æˆ·èƒ½å¤Ÿå‘ç°ã€æ³¨å†Œå’Œæ£€ç´¢è™šæ‹Ÿæœºæ˜ åƒã€‚å®ƒæä¾›äº†ä¸€ä¸ªREST APIï¼Œä½¿ç”¨æˆ·å¯ä»¥æŸ¥è¯¢è™šæ‹Ÿæœºé•œåƒå…ƒæ•°æ®å¹¶æ£€ç´¢å®é™…é•œåƒã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡ImageæœåŠ¡ï¼ŒæŠŠè™šæ‹Ÿæœºæ˜ åƒå­˜å‚¨åœ¨å„ç§ä½ç½®ï¼Œä»ç®€å•çš„æ–‡ä»¶ç³»ç»Ÿåˆ°OpenStack Object Storageç­‰å¯¹è±¡å­˜å‚¨ç³»ç»Ÿã€‚
ä¸ºç®€å•èµ·è§ï¼Œå®˜æ–¹æ•™ç¨‹ä¸­ä»‹ç»å¦‚ä½•é…ç½®ImageæœåŠ¡ä»¥ä½¿ç”¨æ–‡ä»¶åç«¯ï¼Œè¯¥æ–‡ä»¶åç«¯ä¸Šè½½å¹¶å­˜å‚¨åœ¨æ‰˜ç®¡ImageæœåŠ¡çš„æ§åˆ¶å™¨èŠ‚ç‚¹ä¸Šçš„ç›®å½•ä¸­ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤ç›®å½•ä¸º/var/lib/glance/ images/ã€‚åœ¨ç»§ç»­ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ§åˆ¶å™¨èŠ‚ç‚¹åœ¨æ­¤ç›®å½•ä¸­è‡³å°‘æœ‰å‡ åƒå…†å­—èŠ‚çš„å¯ç”¨ç©ºé—´ã€‚è¯·è®°ä½ï¼Œç”±äºæ–‡ä»¶åç«¯é€šå¸¸æ˜¯æ§åˆ¶å™¨èŠ‚ç‚¹çš„æœ¬åœ°ï¼Œå› æ­¤é€šå¸¸ä¸é€‚åˆå¤šèŠ‚ç‚¹glanceéƒ¨ç½²ã€‚
OpenStack ImageæœåŠ¡æ˜¯Infrastructure-as-a-Serviceï¼ˆIaaSï¼‰çš„æ ¸å¿ƒã€‚å®ƒæ¥å—æ¥è‡ªç£ç›˜æˆ–æœåŠ¡å™¨æ˜ åƒçš„APIè¯·æ±‚ï¼Œä»¥åŠæ¥è‡ªç»ˆç«¯ç”¨æˆ·æˆ–OpenStack Computeç»„ä»¶çš„å…ƒæ•°æ®å®šä¹‰ã€‚å®ƒè¿˜æ”¯æŒåœ¨å„ç§å­˜å‚¨åº“ç±»å‹ï¼ˆåŒ…æ‹¬OpenStack Object Storageï¼‰ä¸Šå­˜å‚¨ç£ç›˜æˆ–æœåŠ¡å™¨æ˜ åƒã€‚è®¸å¤šå®šæœŸè¿›ç¨‹åœ¨OpenStack ImageæœåŠ¡ä¸Šè¿è¡Œä»¥æ”¯æŒç¼“å­˜ã€‚ReplicationæœåŠ¡å¯ç¡®ä¿ç¾¤é›†çš„ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ï¼Œå…¶ä»–å®šæœŸè¿›ç¨‹åŒ…æ‹¬auditorsï¼Œupdaterså’Œreapersã€‚
OpenStack ImageæœåŠ¡åŒ…æ‹¬ä»¥ä¸‹ç»„ä»¶ï¼š
glance-apiæ¥å—Image APIè°ƒç”¨ä»¥è¿›è¡Œé•œåƒå‘ç°ï¼Œæ£€ç´¢å’Œå­˜å‚¨ã€‚
å®˜æ–¹å»ºè®®å°†Glanceä½œä¸ºç‹¬ç«‹æœåŠ¡å™¨ä»¥ä¼ ç»Ÿæ–¹å¼è¿è¡Œã€‚
glance-registryå­˜å‚¨ï¼Œå¤„ç†å’Œæ£€ç´¢æœ‰å…³é•œåƒçš„å…ƒæ•°æ®ã€‚å…ƒæ•°æ®åŒ…æ‹¬å¤§å°å’Œç±»å‹ç­‰é€‰é¡¹ã€‚
æ³¨å†Œè¡¨æ˜¯ä¸€ä¸ªç§æœ‰çš„å†…éƒ¨æœåŠ¡ï¼Œä¾›OpenStack ImageæœåŠ¡ä½¿ç”¨ï¼Œä¸è¦å°†æ­¤æœåŠ¡å…¬å¼€ç»™ç”¨æˆ·ã€‚
Glanceæ³¨å†ŒæœåŠ¡åŠå…¶APIå·²åœ¨queensç‰ˆæœ¬ä¸­å¼ƒç”¨ï¼Œå¹¶ä¸”åœ¨â€œSâ€å¼€å‘å‘¨æœŸå¼€å§‹åï¼Œå¯æ ¹æ®OpenStackæ ‡å‡†å¼ƒç”¨æ”¿ç­–è¿›è¡Œåˆ é™¤ã€‚
Databaseå­˜å‚¨é•œåƒå…ƒæ•°æ®ï¼Œæ‚¨å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½é€‰æ‹©æ•°æ®åº“ï¼Œå¤§å¤šæ•°éƒ¨ç½²ä½¿ç”¨MySQLæˆ–SQLiteã€‚
Storage repository for image filesæ”¯æŒå„ç§å­˜å‚¨åº“ç±»å‹ï¼ŒåŒ…æ‹¬å¸¸è§„æ–‡ä»¶ç³»ç»Ÿï¼ˆæˆ–å®‰è£…åœ¨glance-apiæ§åˆ¶å™¨èŠ‚ç‚¹ä¸Šçš„ä»»ä½•æ–‡ä»¶ç³»ç»Ÿï¼‰ï¼ŒObject Storageï¼ŒRADOSå—è®¾å¤‡ï¼ŒVMwareæ•°æ®å­˜å‚¨å’ŒHTTPã€‚
è¯·æ³¨æ„ï¼ŒæŸäº›å­˜å‚¨åº“ä»…æ”¯æŒåªè¯»ç”¨æ³•ã€‚
Metadata definition serviceä¾›åº”å•†ã€ç®¡ç†å‘˜ã€æœåŠ¡å’Œç”¨æˆ·çš„é€šç”¨APIï¼Œç”¨äºå®šä¹‰è‡ªå·±çš„å…ƒæ•°æ®ã€‚æ­¤å…ƒæ•°æ®å¯ç”¨äºä¸åŒç±»å‹çš„èµ„æºï¼Œå¦‚ imagesã€artifactsã€volumesã€flavorså’Œaggregatesã€‚å®šä¹‰åŒ…æ‹¬æ–°å±æ€§çš„å…³é”®å­—ã€æè¿°ã€çº¦æŸå’Œå®ƒå¯ä»¥å…³è”çš„èµ„æºç±»å‹ã€‚
å®‰è£…å’Œé…ç½®æœ¬èŠ‚ä»‹ç»å¦‚ä½•åœ¨æ§åˆ¶å™¨èŠ‚ç‚¹ä¸Šå®‰è£…å’Œé…ç½®é•œåƒæœåŠ¡ï¼ˆglanceï¼‰ã€‚ä¸ºç®€å•èµ·è§ï¼Œæ­¤é…ç½®å°†é•œåƒå­˜å‚¨åœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸Šã€‚
rootç”¨æˆ·ä¸ºäº†é¿å…æƒé™é—®é¢˜ï¼Œå»ºè®®åˆ‡æ¢åˆ°rootç”¨æˆ·è¿›è¡Œæ“ä½œï¼ˆå¦åˆ™è¦åŠ å¾ˆå¤šsudoï¼‰ã€‚sudo -i
æ•°æ®åº“1ã€ç™»å½•æ•°æ®åº“mysql -uroot -pï¼Œå¯†ç ä¸ºopenstackã€‚
2ã€åˆ›å»ºglanceæ•°æ®åº“CREATE DATABASE glance;
3ã€æˆæƒGRANT ALL PRIVILEGES ON glance.* TO &#39;glance&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;openstack&#39;;
GRANT ALL PRIVILEGES ON glance.* TO &#39;glance&#39;@&#39;%&#39; IDENTIFIED BY &#39;openstack&#39;;
4ã€é€€å‡ºæ•°æ®åº“exit;
æœåŠ¡è¯ä¹¦å’Œç«¯ç‚¹1ã€ä½¿adminç¯å¢ƒç”Ÿæ•ˆ. admin-openrc
2ã€åˆ›å»ºglanceç”¨æˆ·openstack user create --domain default --password-prompt glance
æ ¹æ®æç¤ºè®¾ç½®å¯†ç ä¸ºopenstackã€‚
3ã€å°†adminè§’è‰²æ·»åŠ åˆ°glanceç”¨æˆ·å’Œserviceé¡¹ç›®ä¸Šopenstack role add --project service --user glance admin
4ã€åˆ›å»ºglanceæœåŠ¡å®ä½“openstack service create --name glance --description &quot;OpenStack Image&quot; image
5ã€åˆ›å»ºé•œåƒæœåŠ¡API endpoints
openstack endpoint create --region RegionOne image public http://controller:9292openstack endpoint create --region RegionOne image internal http://controller:9292openstack endpoint create --region RegionOne image admin http://controller:9292

å®‰è£…å’Œé…ç½®ç»„ä»¶1ã€å®‰è£…glanceapt -y install glance
2ã€å¤‡ä»½glance-api.confmv /etc/glance/glance-api.conf /etc/glance/glance-api.conf.bak
3ã€vim /etc/glance/glance-api.confï¼Œæ–°å»ºglance-api.confæ–‡ä»¶å†…å®¹ä¸ºï¼š
[DEFAULT]bind_host = 0.0.0.0[glance_store]default_store = filefilesystem_store_datadir = /var/lib/glance/images/[database]# MariaDB connection infoconnection = mysql+pymysql://glance:openstack@controller/glance# Keystone auth info[keystone_authtoken]www_authenticate_uri = http://controller:5000auth_url = http://controller:5000memcached_servers = controller:11211auth_type = passwordproject_domain_name = defaultuser_domain_name = defaultproject_name = serviceusername = glancepassword = openstack[paste_deploy]flavor = keystone

4ã€å¤‡ä»½glance-registry.confmv /etc/glance/glance-registry.conf /etc/glance/glance-registry.conf.bak
5ã€vim /etc/glance/glance-registry.confï¼Œæ–°å»ºglance-registry.confå†…å®¹ä¸ºï¼š
[DEFAULT]bind_host = 0.0.0.0[database]# MariaDB connection infoconnection = mysql+pymysql://glance:openstack@controller/glance# Keystone auth info[keystone_authtoken]www_authenticate_uri = http://controller:5000auth_url = http://controller:5000memcached_servers = controller:11211auth_type = passwordproject_domain_name = defaultuser_domain_name = defaultproject_name = serviceusername = glancepassword = openstack[paste_deploy]flavor = keystone

6ã€æ›´æ”¹æƒé™
chmod 644 /etc/glance/glance-api.conf /etc/glance/glance-registry.confchown glance. /etc/glance/glance-api.conf /etc/glance/glance-registry.conf

7ã€ç”Ÿæˆglanceæ•°æ®åº“ç»“æ„su -s /bin/bash glance -c &quot;glance-manage db_sync&quot;
å®Œæˆåç™»å½•mysqlæŸ¥çœ‹æ•°æ®ã€‚
æŸ¥çœ‹æ—¥å¿—å‘½ä»¤ï¼štail /var/log/glance/glance-api.log
tail /var/log/glance/glance-registry.log
8ã€é‡å¯é•œåƒæœåŠ¡systemctl restart glance-api glance-registry
éªŒè¯æ“ä½œ1ã€ä½¿adminç¯å¢ƒç”Ÿæ•ˆ. admin-openrc
2ã€ä¸‹è½½corrisé•œåƒwget http://download.cirros-cloud.net/0.4.0/cirros-0.4.0-x86_64-disk.img
3ã€ä¸Šä¼ corrisé•œåƒåˆ°glanceï¼Œå­˜å‚¨ä¸ºQCOW2æ ¼å¼ï¼Œå¹¶ä¸”è®¾ç½®ä¸ºæ‰€æœ‰äººå¯è§
openstack image create &quot;cirros&quot; \  --file cirros-0.4.0-x86_64-disk.img \  --disk-format qcow2 --container-format bare \  --public


æœ‰å…³OpenStackæ˜ åƒåˆ›å»ºå‚æ•°çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…OpenStackç”¨æˆ·æŒ‡å—ä¸­çš„åˆ›å»ºæˆ–æ›´æ–°æ˜ åƒï¼ˆglanceï¼‰ã€‚
æœ‰å…³æ˜ åƒçš„ç£ç›˜å’Œå®¹å™¨æ ¼å¼çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…OpenStackè™šæ‹Ÿæœºæ˜ åƒæŒ‡å—ä¸­çš„æ˜ åƒçš„ç£ç›˜å’Œå®¹å™¨æ ¼å¼ã€‚
4ã€æŸ¥çœ‹é•œåƒopenstack image list
çœ‹åˆ°é•œåƒIDã€Nameå’ŒStatusã€‚
cd /var/lib/glance/imagesï¼Œå¯ä»¥çœ‹åˆ°åä¸ºé•œåƒIDçš„æ–‡ä»¶ã€‚

]]></content>
      <categories>
        <category>engineering</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”keystoneç¯‡</title>
    <url>/dev-ubuntu16-manual-openstack-keystone/</url>
    <content><![CDATA[ç›®æ ‡ç´§æ¥ç€ã€ŠUbuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”ç¯å¢ƒç¯‡ã€‹ï¼Œæœ¬æ–‡æˆ‘ä»¬æ¥å®‰è£…keystoneï¼Œä¸»è¦å‚è€ƒKeystone Installation Tutorial for Ubuntuã€‚


keystoneç®€ä»‹OpenStackèº«ä»½è¯†åˆ«æœåŠ¡é›†æˆäº†èº«ä»½éªŒè¯ï¼Œæˆæƒå’ŒæœåŠ¡ç›®å½•ã€‚
èº«ä»½æœåŠ¡é€šå¸¸æ˜¯ç”¨æˆ·ä¸ä¹‹äº¤äº’çš„ç¬¬ä¸€ä¸ªæœåŠ¡ã€‚ä¸€æ—¦é€šè¿‡èº«ä»½éªŒè¯ï¼Œç»ˆç«¯ç”¨æˆ·å°±å¯ä»¥ä½¿ç”¨ä»–ä»¬çš„èº«ä»½è®¿é—®å…¶ä»–OpenStackæœåŠ¡ã€‚åŒæ ·ï¼Œå…¶ä»–OpenStackæœåŠ¡åˆ©ç”¨èº«ä»½æœåŠ¡æ¥ç¡®ä¿ç”¨æˆ·æ˜¯ä»–ä»¬æ‰€è¯´çš„äººï¼Œå¹¶å‘ç°å…¶ä»–æœåŠ¡çš„ä½ç½®ã€‚èº«ä»½è¯†åˆ«æœåŠ¡è¿˜å¯ä»¥ä¸ä¸€äº›å¤–éƒ¨ç”¨æˆ·ç®¡ç†ç³»ç»Ÿï¼ˆå¦‚LDAPï¼‰é›†æˆã€‚
ç”¨æˆ·å’ŒæœåŠ¡å¯ä»¥é€šè¿‡ä½¿ç”¨ç”±èº«ä»½æœåŠ¡ç®¡ç†çš„æœåŠ¡ç›®å½•æ¥å®šä½å…¶ä»–æœåŠ¡ã€‚é¡¾åæ€ä¹‰ï¼ŒæœåŠ¡ç›®å½•æ˜¯OpenStackéƒ¨ç½²ä¸­å¯ç”¨æœåŠ¡çš„é›†åˆã€‚æ¯ä¸ªæœåŠ¡å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªç«¯ç‚¹ï¼Œæ¯ä¸ªç«¯ç‚¹å¯ä»¥æ˜¯ä»¥ä¸‹ä¸‰ç§ç±»å‹ä¹‹ä¸€ï¼šadminï¼Œinternalæˆ–publicã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå‡ºäºå®‰å…¨åŸå› ï¼Œä¸åŒç±»å‹çš„ç»ˆç«¯ç±»å‹å¯èƒ½ä¼šé©»ç•™åœ¨æš´éœ²ç»™ä¸åŒç±»å‹ç”¨æˆ·çš„å•ç‹¬ç½‘ç»œä¸­ã€‚ä¾‹å¦‚ï¼Œå…¬å…±APIç½‘ç»œå¯èƒ½ä»äº’è”ç½‘ä¸Šå¯è§ï¼Œå› æ­¤å®¢æˆ·å¯ä»¥ç®¡ç†ä»–ä»¬çš„äº‘ã€‚ç®¡ç†APIç½‘ç»œå¯èƒ½ä»…é™äºç®¡ç†äº‘åŸºç¡€æ¶æ„çš„ç»„ç»‡ä¸­çš„è¿è¥å•†ã€‚å†…éƒ¨APIç½‘ç»œå¯èƒ½ä»…é™äºåŒ…å«OpenStackæœåŠ¡çš„ä¸»æœºã€‚å¦å¤–ï¼ŒOpenStackæ”¯æŒå¤šä¸ªåŒºåŸŸçš„å¯ä¼¸ç¼©æ€§ã€‚ä¸ºç®€å•èµ·è§ï¼Œæœ¬æŒ‡å—é’ˆå¯¹æ‰€æœ‰ç«¯ç‚¹ç±»å‹å’Œé»˜è®¤çš„RegionOneåŒºåŸŸä½¿ç”¨ç®¡ç†ç½‘ç»œã€‚åœ¨èº«ä»½æœåŠ¡ä¸­åˆ›å»ºçš„åŒºåŸŸï¼ŒæœåŠ¡å’Œç«¯ç‚¹ä¸€èµ·æ„æˆéƒ¨ç½²çš„æœåŠ¡ç›®å½•ã€‚éƒ¨ç½²ä¸­çš„æ¯ä¸ªOpenStackæœåŠ¡éƒ½éœ€è¦ä¸€ä¸ªæœåŠ¡æ¡ç›®ï¼Œå¹¶åœ¨IdentityæœåŠ¡ä¸­å­˜å‚¨ç›¸åº”çš„ç«¯ç‚¹ã€‚è¿™å¯ä»¥åœ¨Identity Serviceå®‰è£…å’Œé…ç½®å®Œæˆåå®Œæˆã€‚
èº«ä»½æœåŠ¡åŒ…å«ä»¥ä¸‹ç»„ä»¶ï¼šæœåŠ¡å™¨é›†ä¸­å¼æœåŠ¡å™¨ä½¿ç”¨RESTfulæ¥å£æä¾›è®¤è¯å’ŒæˆæƒæœåŠ¡ã€‚
é©±åŠ¨ç¨‹åºé©±åŠ¨ç¨‹åºæˆ–æœåŠ¡åç«¯é›†æˆåˆ°ä¸­å¤®æœåŠ¡å™¨ã€‚å®ƒä»¬ç”¨äºè®¿é—®OpenStackå¤–éƒ¨å­˜å‚¨åº“ä¸­çš„èº«ä»½ä¿¡æ¯ï¼Œå¹¶ä¸”å¯èƒ½å·²å­˜åœ¨äºéƒ¨ç½²OpenStackçš„åŸºç¡€æ¶æ„ä¸­ï¼ˆä¾‹å¦‚ï¼ŒSQLæ•°æ®åº“æˆ–LDAPæœåŠ¡å™¨ï¼‰ã€‚
æ¨¡å—ä¸­é—´ä»¶æ¨¡å—è¿è¡Œåœ¨ä½¿ç”¨IdentityæœåŠ¡çš„OpenStackç»„ä»¶çš„åœ°å€ç©ºé—´ä¸­ã€‚è¿™äº›æ¨¡å—æ‹¦æˆªæœåŠ¡è¯·æ±‚ï¼Œæå–ç”¨æˆ·å‡­æ®å¹¶å°†å…¶å‘é€åˆ°ä¸­å¤®æœåŠ¡å™¨è¿›è¡Œæˆæƒã€‚ä¸­é—´ä»¶æ¨¡å—å’ŒOpenStackç»„ä»¶ä¹‹é—´çš„é›†æˆä½¿ç”¨Python WebæœåŠ¡å™¨ç½‘å…³æ¥å£ã€‚
å®‰è£…è®°å½•æœ¬èŠ‚è®°å½•å¦‚ä½•åœ¨æ§åˆ¶èŠ‚ç‚¹ä¸Šå®‰è£…å’Œé…ç½®ä»£å·ä¸ºkeystoneçš„OpenStack IdentityæœåŠ¡ã€‚å‡ºäºå¯ä¼¸ç¼©æ€§çš„ç›®çš„ï¼Œæ­¤é…ç½®ä¼šéƒ¨ç½²Fernetä»¤ç‰Œå’ŒApache HTTPæœåŠ¡å™¨æ¥å¤„ç†è¯·æ±‚ã€‚
rootç”¨æˆ·ä¸ºäº†é¿å…æƒé™é—®é¢˜ï¼Œå»ºè®®åˆ‡æ¢åˆ°rootç”¨æˆ·è¿›è¡Œæ“ä½œï¼ˆå¦åˆ™è¦åŠ å¾ˆå¤šsudoï¼‰ã€‚sudo -i
æ•°æ®åº“é…ç½®1ã€ç™»å½•mariadbmysql -uroot -pï¼Œå¯†ç ä¸ºopenstackã€‚
2ã€åˆ›å»ºkeystoneæ•°æ®åº“CREATE DATABASE keystone;
3ã€åˆ›å»ºkeystoneç”¨æˆ·ï¼Œå¯†ç ä¸ºopenstackï¼Œå¹¶æˆæƒè®¿é—®keystoneæ•°æ®åº“GRANT ALL PRIVILEGES ON keystone.* TO &#39;keystone&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;openstack&#39;;
GRANT ALL PRIVILEGES ON keystone.* TO &#39;keystone&#39;@&#39;%&#39; IDENTIFIED BY &#39;openstack&#39;;
4ã€é€€å‡ºexit;
5ã€æµ‹è¯•ç™»å½•
mysql -h localhost -ukeystone -p
mysql -h controller -ukeystone -p
å®‰è£…ç»„ä»¶1ã€å®‰è£…keystoneã€apache2å’Œlibapache2-mod-wsgiapt -y install keystone  apache2 libapache2-mod-wsgi
2ã€vim /etc/keystone/keystone.confç¼–è¾‘é…ç½®ï¼š
# line 606: uncomment and specify Memcache Servermemcache_servers = controller:11211# line 740: change ( MariaDB connection info )connection = mysql+pymysql://keystone:openstack@controller/keystone# line 2891: add[token]provider = fernet

3ã€ç”Ÿæˆkeystoneæ•°æ®åº“çš„æ•°æ®
su -s /bin/bash keystone -c &quot;keystone-manage db_sync&quot;
ï¼ˆérootç”¨æˆ·æ‰§è¡Œsudo keystone-manage db_syncï¼‰
æŸ¥çœ‹æ—¥å¿—ï¼štail /var/log/keystone/keystone-manage.logï¼Œçœ‹åˆ°doneè¯´æ˜æ‰§è¡ŒæˆåŠŸã€‚
ä¸æ”¾å¿ƒçš„è¯ï¼Œå¯ä»¥ç™»å½•mariadbæŸ¥çœ‹keystoneæ•°æ®åº“çš„æ•°æ®ï¼Œæœ‰æ•°æ®çš„è¯è¯´æ˜æ‰§è¡ŒæˆåŠŸã€‚
å¦‚æœåœ¨æ—¥å¿—ä¸­çœ‹åˆ°æŠ¥é”™ï¼š
2018-06-30 18:37:40.845 4964 WARNING oslo_db.sqlalchemy.engines [-] SQL connection failed. 6 attempts left.: DBConnectionError: (pymysql.err.OperationalError) (2003, &quot;Can&#x27;t connect to MySQL server on &#x27;controller&#x27; ([Errno 111] Connection refused)&quot;) (Background on this error at: http://sqlalche.me/e/e3q8)

è¿™æ˜¯å› ä¸ºï¼Œmysqlå¯èƒ½ç»‘å®šäº†IPã€‚æ‰§è¡Œnetstat -an | grep 3306æŸ¥çœ‹ï¼Œå¦‚æœåªçœ‹åˆ°127.0.0.1ï¼Œé‚£ä¹ˆè¯´æ˜ç¡®å®ç»‘å®šäº†IPã€‚
è§£å†³åŠæ³•æ˜¯ç¼–è¾‘50-server.cnfï¼ŒæŠŠbind-address = 127.0.0.1æ³¨é‡Šæ‰ï¼Œç„¶åé‡å¯mariadbï¼Œé‡æ–°æ‰§è¡Œå‘½ä»¤ã€‚
4ã€åˆå§‹åŒ–Fernetå¯†é’¥å­˜å‚¨åº“keystone-manage fernet_setup --keystone-user keystone --keystone-group keystone
keystone-manage credential_setup --keystone-user keystone --keystone-group keystone
5ã€å¼•å¯¼èº«ä»½æœåŠ¡ï¼Œç®¡ç†å¯†ç ä¸ºopenstack
keystone-manage bootstrap --bootstrap-password openstack \  --bootstrap-admin-url http://controller:5000/v3/ \  --bootstrap-internal-url http://controller:5000/v3/ \  --bootstrap-public-url http://controller:5000/v3/ \  --bootstrap-region-id RegionOne


é…ç½®apache1ã€vim /etc/apache2/apache2.confï¼Œæ·»åŠ ï¼š
# line 70: specify server nameServerName controller

2ã€é‡å¯apacheservice apache2 restart
3ã€æ–°å»ºç¯å¢ƒå˜é‡é…ç½®keystonerc
export OS_USERNAME=adminexport OS_PASSWORD=openstackexport OS_PROJECT_NAME=adminexport OS_USER_DOMAIN_NAME=Defaultexport OS_PROJECT_DOMAIN_NAME=Defaultexport OS_AUTH_URL=http://controller:5000/v3export OS_IDENTITY_API_VERSION=3

4ã€ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆsource keystonerc
5ã€æµ‹è¯•echo $OS_USERNAME
ä½¿ç”¨è®°å½•åˆ›å»ºåŸŸIdentityæœåŠ¡ä¸ºæ¯ä¸ªOpenStackæœåŠ¡æä¾›èº«ä»½éªŒè¯æœåŠ¡ã€‚èº«ä»½éªŒè¯æœåŠ¡ä½¿ç”¨åŸŸï¼Œé¡¹ç›®ï¼Œç”¨æˆ·å’Œè§’è‰²çš„ç»„åˆã€‚
1ã€å¼•å¯¼èº«ä»½æœåŠ¡æ­¥éª¤ä¸­å·²å­˜åœ¨â€œé»˜è®¤â€åŸŸï¼Œä½†åˆ›å»ºæ–°åŸŸçš„æ­£å¼æ–¹æ³•æ˜¯ï¼šopenstack domain create --description &quot;An Example Domain&quot; example
è™šæ‹Ÿæœºä¸­æ‰§è¡ŒæˆåŠŸï¼Œä½†æ˜¯å®ä½“æœºæŠ¥é”™ï¼š
Failed to discover available identity versions when contacting http://controller:5000/v3. Attempting to parse version from URL.Internal Server Error (HTTP 500)

netstat -an | grep 5000ï¼Œå‘ç°5000ç«¯å£æœåŠ¡å·²ç»å¯åŠ¨ã€‚
æŸ¥çœ‹keystoneæ—¥å¿—ï¼Œæ²¡æœ‰æ–°çš„å†…å®¹ï¼Œè¯´æ˜æ ¹æœ¬æ²¡æœ‰è¿æ¥æˆåŠŸã€‚
å°è¯•äº†é‡æ–°å¯¼å…¥æ•°æ®ï¼Œé‡æ–°å®‰è£…æ•°æ®åº“ï¼Œéƒ½å¤±è´¥äº†ã€‚
å¦‚æœçœ‹åˆ°åŒæ ·çš„é”™è¯¯ï¼Œé‚£ä¹ˆææœ‰å¯èƒ½ä¹‹å‰å®‰è£…devstacké—ç•™çš„é—®é¢˜ï¼Œæœ€ç»ˆé‡è£…ç³»ç»Ÿåå†æ¬¡å®‰è£…ï¼Œæ‰§è¡ŒæˆåŠŸã€‚
2ã€åœ¨defaultåŸŸä¸‹åˆ›å»ºserviceé¡¹ç›®ï¼šopenstack project create --domain default --description &quot;Service Project&quot; service
3ã€å¸¸è§„ï¼ˆéç®¡ç†å‘˜ï¼‰ä»»åŠ¡åº”ä½¿ç”¨éç‰¹æƒé¡¹ç›®å’Œç”¨æˆ·ã€‚åˆ›å»ºdemoé¡¹ç›®ï¼šopenstack project create --domain default --description &quot;Demo Project&quot; demo
4ã€åˆ›å»ºdemoç”¨æˆ·ï¼šopenstack user create --domain default --password-prompt demo
æŒ‰ç…§æç¤ºè®¾ç½®å¯†ç ä¸ºopenstackã€‚
5ã€åˆ›å»ºuserè§’è‰²ï¼šopenstack role create user
6ã€å°†userè§’è‰²æ·»åŠ åˆ°demoé¡¹ç›®å’Œdemoç”¨æˆ·openstack role add --project demo --user demo user
7ã€æŸ¥çœ‹åŸŸã€é¡¹ç›®ã€è§’è‰²ã€ç”¨æˆ·
openstack domain listopenstack project listopenstack role listopenstack user list

éªŒè¯æ“ä½œåœ¨å®‰è£…å…¶ä»–æœåŠ¡ä¹‹å‰éªŒè¯IdentityæœåŠ¡çš„æ“ä½œã€‚
1ã€å–æ¶ˆè®¾ç½®ä¸´æ—¶OS_AUTH_URLå’ŒOS_PASSWORDç¯å¢ƒå˜é‡ï¼šunset OS_AUTH_URL OS_PASSWORD
2ã€ä½œä¸ºadminç”¨æˆ·ï¼Œè¯·æ±‚èº«ä»½éªŒè¯ä»¤ç‰Œï¼š
openstack --os-auth-url http://controller:5000/v3 \  --os-project-domain-name Default --os-user-domain-name Default \  --os-project-name admin --os-username admin token issue

æŒ‰ç…§æç¤ºè¾“å…¥å¯†ç openstackã€‚
3ã€ä½œä¸ºdemoç”¨æˆ·ï¼Œè¯·æ±‚èº«ä»½éªŒè¯ä»¤ç‰Œï¼š
openstack --os-auth-url http://controller:5000/v3 \  --os-project-domain-name Default --os-user-domain-name Default \  --os-project-name demo --os-username demo token issue

æŒ‰ç…§æç¤ºè¾“å…¥å¯†ç openstackã€‚
åˆ›å»ºOpenStackå®¢æˆ·ç«¯ç¯å¢ƒè„šæœ¬å‰é¢å‡ èŠ‚ä½¿ç”¨äº†ç¯å¢ƒå˜é‡å’Œå‘½ä»¤é€‰é¡¹çš„ç»„åˆï¼Œé€šè¿‡openstackå®¢æˆ·ç«¯ä¸IdentityæœåŠ¡è¿›è¡Œäº¤äº’ã€‚ä¸ºäº†æé«˜å®¢æˆ·ç«¯æ“ä½œçš„æ•ˆç‡ï¼ŒOpenStackæ”¯æŒç®€å•çš„å®¢æˆ·ç«¯ç¯å¢ƒè„šæœ¬ï¼Œä¹Ÿç§°ä¸ºOpenRCæ–‡ä»¶ã€‚è¿™äº›è„šæœ¬é€šå¸¸åŒ…å«æ‰€æœ‰å®¢æˆ·ç«¯çš„å¸¸ç”¨é€‰é¡¹ï¼Œä½†ä¹Ÿæ”¯æŒç‹¬ç‰¹çš„é€‰é¡¹ã€‚
åˆ›å»ºè„šæœ¬ä¸ºadminå’Œdemoé¡¹ç›®å’Œç”¨æˆ·åˆ›å»ºå®¢æˆ·ç«¯ç¯å¢ƒè„šæœ¬ã€‚æ¥ä¸‹æ¥å¼•ç”¨è¿™äº›è„šæœ¬æ¥åŠ è½½å®¢æˆ·ç«¯æ“ä½œçš„é€‚å½“å‡­æ®ã€‚è¿™äº›è„šæœ¬åœ¨æ§åˆ¶èŠ‚ç‚¹å’Œè®¡ç®—èŠ‚ç‚¹éƒ½é€‚ç”¨ã€‚
1ã€åˆ›å»ºå¹¶ç¼–è¾‘admin-openrcæ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š
export OS_PROJECT_DOMAIN_NAME=Defaultexport OS_USER_DOMAIN_NAME=Defaultexport OS_PROJECT_NAME=adminexport OS_USERNAME=adminexport OS_PASSWORD=openstackexport OS_AUTH_URL=http://controller:5000/v3export OS_IDENTITY_API_VERSION=3export OS_IMAGE_API_VERSION=2

2ã€åˆ›å»ºå¹¶ç¼–è¾‘demo-openrcæ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š
export OS_PROJECT_DOMAIN_NAME=Defaultexport OS_USER_DOMAIN_NAME=Defaultexport OS_PROJECT_NAME=demoexport OS_USERNAME=demoexport OS_PASSWORD=openstackexport OS_AUTH_URL=http://controller:5000/v3export OS_IDENTITY_API_VERSION=3export OS_IMAGE_API_VERSION=2

ä½¿ç”¨è„šæœ¬è¦å°†å®¢æˆ·ç«¯ä½œä¸ºç‰¹å®šé¡¹ç›®å’Œç”¨æˆ·è¿è¡Œï¼Œåªéœ€åœ¨è¿è¡Œå®ƒä»¬ä¹‹å‰åŠ è½½å…³è”çš„å®¢æˆ·ç«¯ç¯å¢ƒè„šæœ¬å³å¯ã€‚ä¾‹å¦‚ï¼š
1ã€åŠ è½½admin-openrcæ–‡ä»¶ä»¥ä½¿ç”¨IdentityæœåŠ¡çš„ä½ç½®ä»¥åŠç®¡ç†é¡¹ç›®å’Œç”¨æˆ·å‡­æ®å¡«å……ç¯å¢ƒå˜é‡ï¼š. admin-openrcæˆ–è€…source admin-openrc
2ã€è¯·æ±‚èº«ä»½éªŒè¯ä»¤ç‰Œï¼šopenstack token issue


]]></content>
      <categories>
        <category>engineering</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu16æ‰‹åŠ¨å®‰è£…OpenStackâ€”â€”ç¯å¢ƒç¯‡</title>
    <url>/dev-ubuntu16-manual-openstack-env/</url>
    <content><![CDATA[å‰è¨€ã€ŠUbuntu16å®‰è£…OpenStackã€‹ä¸€æ–‡ä¸­ï¼Œä½¿ç”¨devstackåœ¨ç‰©ç†æœºä¸Šå®‰è£…äº†OpenStackçš„Queensç‰ˆæœ¬ã€‚ä½†æ˜¯ï¼Œåœ¨åæ¥çš„ã€ŠOpenStackæ·»åŠ é•œåƒã€‹å®éªŒä¸­ï¼Œé‡åˆ°äº†å¾ˆå¤šå¥‡æ€ªçš„é—®é¢˜ï¼Œé‚å†³å®šé‡è£…OpenStackã€‚
æœ¬æ¬¡å®‰è£…ï¼Œè®¡åˆ’é‡‡ç”¨ä¸€æ­¥æ­¥æ‰‹åŠ¨å®‰è£…çš„æ–¹å¼ï¼Œåœ¨ä¸¤ä¸ªèŠ‚ç‚¹ä¸Šï¼Œæœ€å°å®‰è£…OpenStackçš„Queensç‰ˆæœ¬ã€‚ä¸»è¦å‚è€ƒOpenStack Queens Installation Guidesï¼Œé¦–å…ˆé…ç½®ç¯å¢ƒï¼Œç„¶åå®‰è£…å¿…è¦çš„ç»„ä»¶ï¼ŒåŒ…æ‹¬keystoneã€glanceã€novaã€neutronã€‚å†ä¹‹åï¼Œé€‰æ‹©å®‰è£…horizonã€cinderå’Œswiftã€‚
æœ¬æ–‡ï¼Œå°±è®°å½•ä¸€ä¸‹é…ç½®ç¯å¢ƒçš„è¿‡ç¨‹ã€‚


å‡†å¤‡æœ¬æ¬¡å®‰è£…ä½¿ç”¨ä¸¤å°VirtualBoxè™šæ‹Ÿæœºï¼Œä¸€ä¸ªæ§åˆ¶èŠ‚ç‚¹å’Œä¸€ä¸ªè®¡ç®—èŠ‚ç‚¹ï¼Œç³»ç»Ÿå‡ä¸ºubuntu-16.04.4-server-amd64ã€‚æ§åˆ¶èŠ‚ç‚¹1æ ¸4Gå†…å­˜40Gå­˜å‚¨ï¼Œè®¡ç®—èŠ‚ç‚¹1æ ¸2Gå†…å­˜40Gå­˜å‚¨ã€‚
è¿™ä¸¤å°è™šæ‹Ÿæœºï¼Œéƒ½æœ‰ä¸‰å—ç½‘å¡ã€‚eth0è´Ÿè´£ä¸»æœºé—´ç›¸äº’é€šä¿¡ï¼Œeth1è´Ÿè´£ä¸Šç½‘ï¼Œeth2è´Ÿè´£neutronç½‘ç»œæœåŠ¡ã€‚ä¸¤å¼ eth0ç½‘å¡åœ¨åŒä¸€ç½‘ç»œï¼Œä¸¤å¼ eth2ç½‘å¡åœ¨åŒä¸€ç½‘ç»œã€‚
IPé…ç½®å‚è€ƒVirtualBoxä¸‹CentOS7å’ŒUbuntu16.04ç½‘ç»œé…ç½®ï¼Œä¿®æ”¹ç½‘å¡åï¼Œç„¶åé…ç½®é™æ€IPã€‚æ§åˆ¶èŠ‚ç‚¹eth0é…ç½®ä¸º192.168.56.110ï¼Œè®¡ç®—èŠ‚ç‚¹eth0é…ç½®ä¸º192.168.56.111ã€‚
ä¸»æœºåé…ç½®å‚è€ƒVirtualBoxä¸‹CentOS7å’ŒUbuntu16.04ç½‘ç»œé…ç½®ï¼Œé…ç½®æ§åˆ¶èŠ‚ç‚¹ä¸»æœºåä¸ºcontrollerï¼Œè®¡ç®—èŠ‚ç‚¹ä¸»æœºåä¸ºcomputeã€‚
ç„¶åç¼–è¾‘/etc/hostsï¼Œæ·»åŠ ï¼š
192.168.56.110  controller192.168.56.111  compute

è®¾ç½®sudoå…å¯†ç¼–è¾‘sudoersï¼Œvim /etc/sudoersåœ¨æœ€åæ·»åŠ ä¸€è¡Œï¼š
test ALL = NOPASSWD: ALL

æ›´æ¢æºåˆ—è¡¨ä¿®æ”¹/etc/apt/sources.listï¼Œå‚è€ƒUbuntuæ›´æ¢æºåˆ—è¡¨ï¼Œæ›´æ¢ä¸ºUbuntuå®˜æ–¹ä¸­å›½çš„æºåˆ—è¡¨ã€‚
æœ€åé‡å¯ä¸»æœºï¼Œsudo rebootã€‚
rootç”¨æˆ·ä¸ºäº†é¿å…æƒé™é—®é¢˜ï¼Œå»ºè®®åˆ‡æ¢åˆ°rootç”¨æˆ·è¿›è¡Œæ“ä½œï¼ˆå¦åˆ™è¦åŠ å¾ˆå¤šsudoï¼‰ã€‚sudo -i
ç¯å¢ƒåœ¨å®‰è£…openstackä¹‹å‰ï¼Œéœ€è¦å…ˆå®‰è£…å¥½å¿…é¡»çš„ç¯å¢ƒï¼ŒåŒ…æ‹¬ï¼š

Security
Host networking
Network Time Protocol (NTP)
OpenStack packages
SQL database
Message queue
Memcached
Etcd

å®‰è£…æ–¹æ³•å‚è€ƒEnvironmentã€‚
SecurityOpenStackæœåŠ¡æ”¯æŒå„ç§å®‰å…¨æ–¹æ³•ï¼ŒåŒ…æ‹¬å¯†ç ï¼Œç­–ç•¥å’ŒåŠ å¯†ã€‚
æœ¬èŠ‚æ²¡æœ‰ä»€ä¹ˆå®‰è£…æ“ä½œï¼Œè¿‡ã€‚
Host networkingåœ¨é€‰æ‹©éƒ¨ç½²çš„ä½“ç³»ç»“æ„çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šå®‰è£…æ“ä½œç³»ç»Ÿåï¼Œå¿…é¡»é…ç½®ç½‘ç»œæ¥å£ã€‚openstackå®˜æ–¹å»ºè®®ç¦ç”¨ä»»ä½•è‡ªåŠ¨ç½‘ç»œç®¡ç†å·¥å…·ï¼Œå¹¶æ‰‹åŠ¨ç¼–è¾‘ç½‘ç»œé…ç½®æ–‡ä»¶ã€‚
æœ¬æ–‡å‡†å¤‡å·¥ä½œä¸­å·²ç»é…ç½®å¥½äº†IPï¼Œè¿‡ã€‚
NTPNTPæœåŠ¡ä¸»è¦ç”¨æ¥å„èŠ‚ç‚¹ä¹‹é—´åŒæ­¥æ—¶é—´ã€‚
æ§åˆ¶èŠ‚ç‚¹1ã€å®‰è£…chronyapt -y install chrony
2ã€é…ç½®chronyvim /etc/chrony/chrony.conf
å–æ¶ˆä¸¤å¤„æ³¨é‡Šï¼š
allow 0/0allow ::/0

3ã€é‡å¯chronyservice chrony restart
è®¡ç®—èŠ‚ç‚¹1ã€å®‰è£…chronyapt -y install chrony
2ã€é…ç½®chronyvim /etc/chrony/chrony.confæ³¨é‡Šä¿®æ”¹å¦‚ä¸‹ï¼š
#pool 2.debian.pool.ntp.org offline iburstserver controller iburst

3ã€é‡å¯chronyservice chrony restart
éªŒè¯å®‰è£…å®˜æ–¹å»ºè®®åœ¨ç»§ç»­æ“ä½œä¹‹å‰éªŒè¯NTPåŒæ­¥ã€‚æŸäº›èŠ‚ç‚¹ï¼Œå°¤å…¶æ˜¯é‚£äº›å¼•ç”¨æ§åˆ¶å™¨èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼Œå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ‰èƒ½åŒæ­¥ã€‚1ã€åœ¨æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œchronyc sources
â€œName/IPâ€åˆ—ä¸­çš„å†…å®¹è¡¨ç¤ºNTPæœåŠ¡å™¨çš„ä¸»æœºåæˆ–IPåœ°å€ã€‚MSåˆ—ä¸­çš„å†…å®¹ï¼Œ*ä»£è¡¨å½“å‰NTPæœåŠ¡å™¨åŒæ­¥æˆåŠŸã€‚
2ã€åœ¨è®¡ç®—èŠ‚ç‚¹æ‰§è¡Œchronyc sourcesâ€œName/IPâ€åˆ—ä¸­çš„å†…å®¹åº”è¯¥è¡¨ç¤ºæ§åˆ¶å™¨èŠ‚ç‚¹çš„ä¸»æœºåã€‚
OpenStack packagesç”±äºå‘å¸ƒè®¡åˆ’ä¸åŒï¼Œå‘è¡Œç‰ˆå°†OpenStackè½¯ä»¶åŒ…ä½œä¸ºå‘è¡Œç‰ˆçš„ä¸€éƒ¨åˆ†æˆ–ä½¿ç”¨å…¶ä»–æ–¹æ³•å‘å¸ƒã€‚åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šæ‰§è¡Œè¿™äº›æ“ä½œã€‚
1ã€å®‰è£…openstack queensä»“åº“apt install software-properties-common
add-apt-repository cloud-archive:queens
2ã€æ›´æ–°è½¯ä»¶åŒ…apt update &amp;&amp; apt dist-upgrade
3ã€å®‰è£…openstack-clientapt -y install python-openstackclient
SQL databaseå¤§å¤šæ•°OpenStackæœåŠ¡ä½¿ç”¨SQLæ•°æ®åº“æ¥å­˜å‚¨ä¿¡æ¯ï¼Œæ•°æ®åº“é€šå¸¸åœ¨æ§åˆ¶å™¨èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚æœ¬æ–‡ä½¿ç”¨MariaDBï¼ˆMySQLï¼‰ï¼ŒOpenStackæœåŠ¡è¿˜æ”¯æŒå…¶ä»–SQLæ•°æ®åº“ï¼ŒåŒ…æ‹¬PostgreSQLã€‚
1ã€å®‰è£…mariadbå’Œè¿æ¥å·¥å…·apt -y install mariadb-server python-pymysql
2ã€ç¼–è¾‘50-server.cnfvim /etc/mysql/mariadb.conf.d/50-server.cnf
å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥:set nuæ˜¾ç¤ºè¡Œå·ï¼š
# line 29: changebind-address = 0.0.0.0# line 105: changecharacter-set-server = utf8 #collation-server = utf8mb4_general_ci

3ã€é‡å¯mariadbå…³é—­mariadbï¼Œservice mysql stopã€‚ç„¶åæŸ¥çœ‹netstat -an | grep 3306ï¼Œç¡®è®¤3306å·²ç»å…³é—­ã€‚
å¯åŠ¨mariadbï¼Œservice mysql startã€‚
4ã€è®¾ç½®mariadbå¯†ç mysql_secure_installation
æŒ‰ç…§æç¤ºè®¾ç½®å¯†ç ä¸ºopenstackã€‚å¦‚æœè®¾ç½®åæ— æ³•ç™»å½•ï¼Œé‚£ä¹ˆå‚è€ƒMySQLé‡ç½®å¯†ç ã€‚
Message queueOpenStackä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¥åè°ƒæœåŠ¡ä¹‹é—´çš„æ“ä½œå’ŒçŠ¶æ€ä¿¡æ¯ã€‚æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡é€šå¸¸åœ¨æ§åˆ¶å™¨èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚OpenStackæ”¯æŒå¤šç§æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ï¼ŒåŒ…æ‹¬RabbitMQï¼ŒQpidå’ŒZeroMQã€‚è¿™é‡Œæˆ‘ä»¬å®‰è£…RabbitMQï¼Œå› ä¸ºå¤§å¤šæ•°å‘è¡Œç‰ˆéƒ½æ”¯æŒå®ƒã€‚
1ã€å®‰è£…rabbitmsqapt -y install rabbitmq-server
2ã€åˆ›å»ºopenstackç”¨æˆ·ï¼Œå¯†ç ä¸ºopenstackrabbitmqctl add_user openstack openstack
3ã€å…è®¸openstackç”¨æˆ·é…ç½®å’Œè¯»å†™rabbitmqctl set_permissions openstack &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;
MemcachedOpenStackçš„å„ä¸ªæœåŠ¡çš„èº«ä»½è®¤è¯æœåŠ¡ä½¿ç”¨Memcachedç¼“å­˜ä»¤ç‰Œã€‚memcachedæœåŠ¡é€šå¸¸åœ¨æ§åˆ¶å™¨èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚å¯¹äºç”Ÿäº§éƒ¨ç½²ï¼Œæˆ‘ä»¬å»ºè®®å¯ç”¨é˜²ç«å¢™ï¼Œèº«ä»½éªŒè¯å’ŒåŠ å¯†çš„ç»„åˆæ¥ä¿æŠ¤å®ƒã€‚
1ã€å®‰è£…memcachedapt -y install memcached python-memcache
2ã€ç¼–è¾‘/etc/memcached.confæ–‡ä»¶-l 127.0.0.1ä¿®æ”¹ä¸º-l 0.0.0.0
3ã€é‡å¯memcachedservice memcached restart
4ã€æµ‹è¯•
telnet controller 11211statsquit

EtcdOpenStackæœåŠ¡å¯èƒ½ä½¿ç”¨Etcdï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯é çš„åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨å·¥å…·ã€‚ç”¨äºåˆ†å¸ƒå¼å¯†é’¥é”å®šï¼Œå­˜å‚¨é…ç½®ï¼Œè·Ÿè¸ªæœåŠ¡çš„å®æ—¶æ€§ç­‰ã€‚åŒæ ·å®‰è£…åœ¨æ§åˆ¶èŠ‚ç‚¹å³å¯ã€‚
1ã€å®‰è£…etcdapt -y install etcd
2ã€æŸ¥çœ‹ç‰ˆæœ¬etcd -versionï¼Œè¿™é‡Œçœ‹åˆ°æ˜¯2.2.5ã€‚æŒ‰ç…§Etcd for Ubuntuæ–‡æ¡£é…ç½®çš„è¯ï¼Œæœ€ç»ˆä¼šå¤±è´¥ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æ¢ä¸€ç§é…ç½®æ–¹æ³•ã€‚
3ã€æŸ¥çœ‹æœåŠ¡çŠ¶æ€etcdctl member list
åº”è¯¥ä¼šçœ‹åˆ°ï¼š
ce2a822cea30bfca: name=controller peerURLs=http://localhost:2380,http://localhost:7001 clientURLs=http://localhost:2379,http://localhost:4001

4ã€å®˜æ–¹æ–‡æ¡£ç»™å‡ºçš„/etc/etcd/etcd.conf.ymlæ–‡ä»¶å†…å®¹ä¸ºï¼š
name: controllerdata-dir: /var/lib/etcdinitial-cluster-state: &#x27;new&#x27;initial-cluster-token: &#x27;etcd-cluster-01&#x27;initial-cluster: controller=http://controller:2380initial-advertise-peer-urls: http://controller:2380advertise-client-urls: http://controller:2379listen-peer-urls: http://0.0.0.0:2380listen-client-urls: http://controller:2379

å‚è€ƒetcd.conf.ymlï¼Œæˆ‘ä»¬åœ¨/etc/default/etcdçš„æœ€åæ·»åŠ ï¼š
ETCD_NAME=&quot;controller&quot;ETCD_DATA_DIR=&quot;/var/lib/etcd/default&quot;ETCD_INITIAL_CLUSTER_STATE=&quot;new&quot;ETCD_INITIAL_CLUSTER_TOKEN=&quot;etcd-cluster-01&quot;ETCD_INITIAL_CLUSTER=&quot;controller=http://controller:2380&quot;ETCD_INITIAL_ADVERTISE_PEER_URLS=&quot;http://controller:2380&quot;ETCD_ADVERTISE_CLIENT_URLS=&quot;http://controller:2379,http://127.0.0.1:2379&quot;ETCD_LISTEN_PEER_URLS=&quot;http://0.0.0.0:2380&quot;ETCD_LISTEN_CLIENT_URLS=&quot;http://controller:2379,http://127.0.0.1:2379&quot;

5ã€è®¾ç½®å¼€æœºå¯åŠ¨systemctl enable etcd
6ã€é‡å¯etcdsystemctl restart etcd
7ã€æŸ¥çœ‹æœåŠ¡çŠ¶æ€etcdctl member list
ä¼šçœ‹åˆ°å‘ç”Ÿäº†å˜åŒ–ï¼š
ce2a822cea30bfca: name=controller peerURLs=http://localhost:2380,http://localhost:7001 clientURLs=http://127.0.0.1:2379,http://controller:2379

8ã€åœ¨æ§åˆ¶èŠ‚ç‚¹å’Œè®¡ç®—èŠ‚ç‚¹æµ‹è¯•curl http://controller:2379/v2/stats/leader
å¯ä»¥çœ‹åˆ°ï¼š
&#123;&quot;leader&quot;:&quot;ce2a822cea30bfca&quot;,&quot;followers&quot;:&#123;&#125;&#125;

åè®°å¦‚æœä¿®æ”¹äº†/etc/hostsä¸­çš„controllerå¯¹åº”çš„IPï¼Œé‚£ä¹ˆéœ€è¦é‡å¯memcachedå’Œetcdï¼Œå› ä¸ºå®ƒä»¬çš„é…ç½®ä¸­ä½¿ç”¨äº†ä¸»æœºåè€Œä¸æ˜¯IPã€‚
è‡³æ­¤ï¼Œä¸¤å°è™šæ‹Ÿæœºä¸Šï¼Œopenstackéœ€è¦çš„ç¯å¢ƒå·²ç»å®‰è£…å®Œæˆã€‚æ¥ä¸‹æ¥ï¼Œå‡†å¤‡å®‰è£…keystoneã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenStackæ·»åŠ é•œåƒ</title>
    <url>/dev-openstack-add-mirror/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡å®éªŒæœ€ç»ˆå¤±è´¥ï¼Œå¤±è´¥ï¼Œå¤±è´¥ï¼é‡è¦çš„äº‹æƒ…è¯´ä¸‰éã€‚
æƒ³è¦ç”¨openstackåˆ›å»ºä¸¤å°ubuntu16çš„è™šæ‹Ÿæœºï¼Œäºæ˜¯ä¸Šä¼ äº†ubuntu-16.04.4-server-amd64.isoé•œåƒï¼Œç„¶åç”¨å®ƒåˆ›å»ºäº†å®ä¾‹ï¼Œåˆ†é…äº†æµ®åŠ¨IPã€‚ç†è®ºä¸Šï¼Œåº”è¯¥å¯ä»¥è®¿é—®äº†ã€‚ä½†æ˜¯ï¼Œpingè¯¥IPä¼šæç¤ºDestination Host Unreachableã€‚
æ‰¾åˆ°äº†åˆ¶ä½œ OpenStack Linux é•œåƒ - æ¯å¤©5åˆ†é’Ÿç©è½¬ OpenStackï¼ˆ151ï¼‰ä¸€æ–‡ï¼Œå‘ç°ä½œè€…ä½¿ç”¨çš„æ˜¯cloudé•œåƒã€‚åæœ‰å…«ä¹æ˜¯é•œåƒçš„åŸå› äº†ï¼Œé‚£å°±å°è¯•ä¸€ä¸‹ã€‚


ä¸‹è½½cloudé•œåƒæœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨æ ‡å‡†é•œåƒã€‚ä¸»æµçš„Linuxå‘è¡Œç‰ˆéƒ½æä¾›å¯ä»¥åœ¨OpenStackä¸­ç›´æ¥ä½¿ç”¨çš„cloudé•œåƒï¼Œä¸‹é¢æœ‰å‡ ä¸ªä¸‹è½½åœ°å€ï¼š

CentOS6ï¼šhttp://cloud.centos.org/centos/6/images/
CentOS7ï¼šhttp://cloud.centos.org/centos/7/images/
Ubuntu14.04ï¼šhttp://cloud-images.ubuntu.com/trusty/current/
Ubuntu16.04ï¼šhttp://cloud-images.ubuntu.com/xenial/current/

è¿™é‡Œæˆ‘ä»¬è®¿é—® http://cloud-images.ubuntu.com/xenial/current/ ï¼Œç„¶åä¸‹è½½xenial-server-cloudimg-amd64-disk1.imgã€‚
å¯¼å…¥é•œåƒ1ã€åœ¨horizonæ§åˆ¶å°ï¼Œé¡¹ç›®ï¼Œè®¡ç®—ï¼Œé•œåƒï¼Œåˆ›å»ºé•œåƒã€‚
2ã€é•œåƒä¸Šä¼ å®Œæˆï¼Œå³å¯çœ‹åˆ°æ–°æ·»åŠ çš„é•œåƒã€‚
3ã€ä½¿ç”¨ubuntu16çš„é•œåƒåˆ›å»ºå®ä¾‹u16-n0ã€‚
4ã€æµ‹è¯•ç™»å½•ã€‚ç»™å®ä¾‹åˆ†é…æµ®åŠ¨IPä¸º172.24.4.10ï¼Œåœ¨ccrfox105ä¸Šå¯ä»¥pingé€šã€‚ç„¶åï¼ŒæŸ¥çœ‹æ—¥å¿—ï¼Œæƒ³è¦æ‰¾åˆ°ç”¨æˆ·åå’Œå¯†ç ã€‚ä½†æ˜¯ï¼Œä¸åŒäºcirrosï¼Œåœ¨ubuntu16æ—¥å¿—ä¸­å¹¶æ²¡æœ‰æ‰¾åˆ°ã€‚
å‚è€ƒopenstackå…¥é—¨äºŒåå…­ï¼šåˆ›å»ºå®ä¾‹ï¼Œå‘ç°å¤§å¤šæ•° cloud imagesæ”¯æŒå…¬é’¥æˆæƒè€Œä¸æ˜¯ä¼ ç»Ÿçš„ç”¨æˆ·åå¯†ç æˆæƒã€‚
ä½¿ç”¨å¯†é’¥dashboardæ–¹æ³•1ã€é¡¹ç›®ï¼Œè®¡ç®—ï¼Œå¯†é’¥å¯¹ï¼Œåˆ›å»ºå¯†é’¥å¯¹ã€‚
2ã€è¾“å…¥å¯†é’¥åccrfox105-keyï¼Œåˆ›å»ºå¯†é’¥å¯¹ï¼Œç„¶åå…¬é’¥å°±ä¼šä¸Šä¼ åˆ°openstackï¼Œæ˜¾ç¤ºåœ¨æ§åˆ¶å°ã€‚åŒæ—¶ä¼šè‡ªåŠ¨ä¸‹è½½ç§é’¥åˆ°æœ¬åœ°ï¼Œåä¸ºccrfox105-key.pemã€‚
3ã€é‡æ–°åˆ›å»ºå®ä¾‹u16-n0ï¼ˆè¿™æ¬¡ä¸è¦å¿˜è®°é€‰æ‹©å¯†é’¥å¯¹ï¼‰ï¼Œç„¶ååˆ†é…æµ®åŠ¨IPä¸º172.24.4.10ã€‚
4ã€é€šè¿‡scpæŠŠccrfox105-key.pemä¸Šä¼ åˆ°ccrfox105scp ccrfox105-key.pem test@ccrfox105:~
5ã€ç­‰å¾…å®ä¾‹å¯åŠ¨å®Œå…¨ï¼ˆ5åˆ†é’Ÿå·¦å³ï¼‰ï¼Œåœ¨ccrfox105æµ‹è¯•ç™»å½•ssh ubuntu@172.24.4.10 -i ccrfox105-key.pem
æŠ¥é”™ï¼šä¿®æ”¹äº†å¯†é’¥æƒé™ä¸º600ï¼Œä¾ç„¶æ— æ³•ç™»å½•ã€‚
æ¢æˆrootç”¨æˆ·ï¼Œssh root@172.24.4.10 -i ccrfox105-key.pemï¼Œä¾ç„¶æ— æ³•ç™»å½•ã€‚
å°´å°¬ï¼Œè¿™æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ
å‘½ä»¤è¡Œæ–¹æ³•1ã€åˆ‡æ¢åˆ°stackç”¨æˆ·sudo su - stack
2ã€ç”Ÿæˆå¯†é’¥å¯¹ssh-keygenï¼Œä¸‰æ¬¡å›è½¦ã€‚
3ã€æ·»åŠ å…¬é’¥åˆ°openstackç¯å¢ƒnova keypair-add --pub-key ~/.ssh/id_rsa.pub ccrfox105-stack-key
æŠ¥é”™ï¼š
ERROR (CommandError): You must provide a username or user ID via --os-username, --os-user-id, env[OS_USERNAME] or env[OS_USER_ID]

å‚è€ƒ[å®Œæ•´éƒ¨ç½²CentOS7.2+OpenStack+kvm äº‘å¹³å°ç¯å¢ƒï¼ˆ5ï¼‰â€“é—®é¢˜è§£å†³]ï¼Œéœ€è¦source admin-openrc.shï¼Œç„¶è€Œæˆ‘çš„ç³»ç»Ÿä¸­å¹¶æ²¡æœ‰admin-openrc.shè¿™ä¸ªæ–‡ä»¶ã€‚
ï¼ˆ1ï¼‰æ–°å»ºadmin-openrc.shï¼Œå†…å®¹å¦‚ä¸‹ï¼š
export OS_TENANT_NAME=adminexport OS_USERNAME=adminexport OS_PASSWORD=secretexport OS_AUTH_URL=http://172.16.0.105:35357/v2.

ï¼ˆ2ï¼‰æ‰§è¡Œsource admin-openrc.sh
ï¼ˆ3ï¼‰å†æ¬¡æ‰§è¡Œnova keypair-add --pub-key ~/.ssh/id_rsa.pub ccrfox105-stack-keyè¿›è¡Œæµ‹è¯•ï¼Œé”™è¯¯å˜äº†
No handlers could be found for logger &quot;keystoneauth.identity.generic.base&quot;ERROR (DiscoveryFailure): Could not determine a suitable URL for the plugin

ï¼ˆ4ï¼‰sudo netstat -antupo | egrep &#39;(5000|35357)&#39;ï¼Œå‘ç°35357ç«¯å£æœåŠ¡æ²¡æœ‰å¯åŠ¨ã€‚
ï¼ˆ5ï¼‰ps -ef | grep keystoneï¼ŒæŸ¥çœ‹keystoneæœåŠ¡ï¼Œå·²ç»å¯åŠ¨ã€‚
ï¼ˆ6ï¼‰vim /etc/keystone/keystone.confï¼Œæ‰“å¼€å‡ å¤„æ³¨é‡Šï¼š
admin_bind_host = 0.0.0.0admin_port = 35357public_bind_host = 0.0.0.0public_port = 5000

ï¼ˆ6ï¼‰é‡å¯keystoneï¼Œsudo /etc/init.d/apache2 restart
ç„¶åï¼Œæ²¡æœ‰ç”¨ã€‚
dashboardä¸å‘½ä»¤è¡Œç»“åˆ1ã€åˆ‡æ¢åˆ°stackç”¨æˆ·sudo su - stack
2ã€ç”Ÿæˆå¯†é’¥å¯¹ssh-keygenï¼Œä¸‰æ¬¡å›è½¦ã€‚
3ã€æ‹·è´å…¬é’¥åˆ°æœ¬åœ°
4ã€åœ¨openstackçš„dashboardå¯¼å…¥å…¬é’¥ã€‚
5ã€åˆ›å»ºå®ä¾‹ï¼Œé€‰æ‹©æ–°å¯¼å…¥çš„å…¬é’¥ã€‚
6ã€å†æ¬¡æµ‹è¯•ç™»å½•ã€‚ssh ubuntu@172.24.4.10 -i ~./ssh/id_rsassh root@172.24.4.10 -i ~./ssh/id_rsa
å’Œdashboadæ–¹æ³•æŠ¥åŒæ ·çš„é”™è¯¯ï¼šPermission denied (publickey).
è‡³æ­¤ï¼Œä¸‰ç§æ–¹æ³•å…¨éƒ¨å¤±è´¥ï¼ŒçŒœæµ‹openstackçš„keystoneæœåŠ¡æ²¡æœ‰å®‰è£…å¥½ï¼Œç•™ä¸ªå‘å§ã€‚
ä¸ä½¿ç”¨å¯†é’¥å‚è€ƒå¦‚ä½•åœ¨OpenStackä¸Šå®‰è£…Ubuntuç³»ç»Ÿã€Openstackä½¿ç”¨å®˜æ–¹ubuntuå’ŒCentosé•œåƒå’Œopenstackä¸­é•œåƒçš„å¯†ç ä¿®æ”¹ï¼Œé…ç½®è¿‡ç¨‹å¦‚ä¸‹ï¼š
åˆ›å»ºå®ä¾‹ï¼Œåˆ›å»ºè¿‡ç¨‹ä¸­ä¸æ·»åŠ å¯†é’¥å¯¹ï¼Œè€Œæ˜¯é…ç½®è„šæœ¬ï¼š
#!/bin/sh  sed -i &#x27;s/PermitRootLogin without-password/PermitRootLogin yes/g&#x27; /etc/ssh/sshd_config  sed -i &#x27;s/PasswordAuthentication no/PasswordAuthentication yes/g&#x27; /etc/ssh/sshd_config  cp -f /home/ubuntu/.ssh/authorized_keys /root/.ssh/  service ssh restart  passwd ubuntu&lt;&lt;EOF  123456123456EOF 

å¦‚ä¸‹å›¾ï¼š
ç„¶åï¼Œssh ubuntu@172.24.4.10ï¼ŒPermission denied (publickey).
å¦‚æœæ˜¯CentOSï¼Œé‚£ä¹ˆè¾“å…¥ï¼š
#!/bin/sh  sed -i &#x27;s/PermitRootLogin without-password/PermitRootLogin yes/g&#x27; /etc/ssh/sshd_config  sed -i &#x27;s/PasswordAuthentication no/PasswordAuthentication yes/g&#x27; /etc/ssh/sshd_config  cp -f /home/centos/.ssh/authorized_keys /root/.ssh/  service sshd restart  passwd centos&lt;&lt;EOF  123456123456EOF


åè®°æœ¬æ¬¡å®éªŒè¿‡ç¨‹ä¸­ï¼Œå„ç§æŠ¥é”™ä¸æ–­ï¼Œå¤§éƒ¨åˆ†éƒ½æ²¡æœ‰æ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚
æœ€å‘çš„æ˜¯ï¼Œé™¤äº†cirrosï¼Œå…¶ä»–é•œåƒåœ¨å®ä¾‹åˆ›å»ºæˆåŠŸåéƒ½æ— æ³•ç™»å½•ï¼Œå°è¯•äº†å„ç§åŠæ³•ä¹Ÿæ²¡æœ‰è§£å†³ï¼Œåªèƒ½æ— å¥ˆæ”¾å¼ƒã€‚
æ§åˆ¶å°ä¹Ÿæ— æ³•è®¿é—®ï¼Œå‚è€ƒOpenStack æ§åˆ¶å°ä¸èƒ½è®¿é—®çš„é—®é¢˜è¿›è¡Œé…ç½®ï¼Œä¾ç„¶æ— æ³•è®¿é—®ã€‚
æ€€ç–‘æ˜¯å› ä¸ºopenstackæ²¡æœ‰å®‰è£…å®Œæ•´ï¼Œæ¯•ç«Ÿå®‰è£…å®Œæ˜¯æœ‰æŠ¥é”™çš„ï¼Œçœ‹æ¥æœ‰å¿…è¦é‡æ–°å®‰è£…ä¸€ä¸‹openstackäº†ã€‚ç„¶åå†å†™ä¸€ç¯‡ã€ŠOpenStackæ·»åŠ é•œåƒ2.0ã€‹ç‰ˆæœ¬ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu16å®‰è£…OpenStack</title>
    <url>/dev-ubuntu16-openstack/</url>
    <content><![CDATA[å‰è¨€åœ¨ã€ŠVirtualBoxä¸­å®‰è£…OpenStackã€‹ä¸€æ–‡ä¸­ï¼Œå·²ç»æˆåŠŸå®‰è£…è¿‡openstackã€‚å¦‚ä»Šï¼Œç¡®å®šäº†ç ”ç©¶æ–¹å‘å°±æ˜¯OpenStackã€‚ç¬¬ä¸€æ­¥è¦åšçš„ï¼Œå°±æ˜¯åœ¨å®ä½“æœºå®‰è£…é…ç½®OpenStackã€‚
ç”±äºç‰ˆæœ¬æ›´æ–°ï¼Œdevstackç›®å‰åªæ”¯æŒubuntu16ï¼Œè€Œæœºæˆ¿æœåŠ¡å™¨ä½¿ç”¨çš„éƒ½æ˜¯ubuntu14.04ï¼Œå¾ˆå°´å°¬ã€‚å°è¯•äº†æ—§çš„newtonã€mitakaã€libertyï¼Œä½†æ˜¯devstackä¾èµ–çš„keystoneé¡¹ç›®ä¸­æ²¡æœ‰äº†è¿™ä¸‰ä¸ªåˆ†æ”¯ï¼Œå¤±è´¥ï¼›å°è¯•äº†æ–°çš„pikeã€queensï¼Œä½†æ˜¯ubuntu14ä¸­ç¼ºå°‘ç›¸åº”çš„åŒ…ï¼Œå¤±è´¥ã€‚
æ‰¾åˆ°äº†DevStack å®‰è£… grizzly-eol ç‰ˆæœ¬ OpenStackä¸€æ–‡ï¼Œä»¥ä¸ºåœ¨local.confä¸­æŠŠåˆ†æ”¯æ”¹ä¸ºtagå°±å¯ä»¥äº†ã€‚ç„¶è€Œï¼ŒæŠ¥é”™æ¥è¿ä¸æ–­ï¼Œè§£å†³äº†Nä¸ªå°æ€ªï¼Œéšä¾¿å‡ºæ¥ä¸ªå¤§BOSSå°±æˆ‘æ‹¦ä½äº†ã€‚
æœ€ç»ˆï¼ŒæŠŠç³»ç»Ÿæ¢æˆäº†Ubuntu16ï¼Œè®¡åˆ’ä½¿ç”¨devstackå®‰è£…æœ€æ–°ç‰ˆQueensï¼Œä¸»è¦å‚è€ƒDevStackå®˜æ–¹æ–‡æ¡£ã€ã€Šä¼˜é›…å®‰è£…OpenStackã€‹å’Œä½¿ç”¨devstackå®‰è£…OpenStack åŒèŠ‚ç‚¹éƒ¨ç½²ã€‚


ç›®æ ‡æœ¬æ–‡çš„ç›®æ ‡æ˜¯æ­å»ºä¸€ä¸ª all-in-one OpenStackï¼Œæ‰€æœ‰æ ¸å¿ƒæœåŠ¡éƒ½å®‰è£…åœ¨ccrfox105èŠ‚ç‚¹ä¸Šï¼ŒèŠ‚ç‚¹IPä¸º172.16.0.105ã€‚
æ ¸å¿ƒæœåŠ¡åŒ…æ‹¬ï¼šèº«ä»½è®¤è¯æœåŠ¡keystoneï¼Œé•œåƒæœåŠ¡glanceï¼Œè®¡ç®—æœåŠ¡novaï¼ˆé»˜è®¤ä½¿ç”¨KVMè™šæ‹ŸåŒ–ï¼‰ï¼Œç½‘ç»œæœåŠ¡neutronï¼Œä»ªè¡¨æ¿horizonã€‚ä¹Ÿéœ€è¦åŒ…å«ä¸€äº›æ”¯æŒæœåŠ¡ï¼Œä¾‹å¦‚ï¼šSQLæ•°æ®åº“ï¼Œæ¶ˆæ¯é˜Ÿåˆ—å’ŒNTPã€‚
ç¯å¢ƒå‡†å¤‡æ›´æ¢sources.listï¼ˆå¯é€‰ï¼‰å‚è€ƒã€ŠUbuntuæ›´æ¢æºåˆ—è¡¨ã€‹ã€‚
1ã€å¤‡ä»½æºåˆ—è¡¨æ–‡ä»¶sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak
2ã€ç¼–è¾‘æºåˆ—è¡¨æ–‡ä»¶sudo vim /etc/apt/sources.list
ä¿®æ”¹ä¸ºï¼š
deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiverse  deb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiverse  deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiverse  deb http://mirrors.aliyun.com/ubuntu/ xenial-proposed main restricted universe multiverse  deb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse  deb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiverse  deb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiverse  deb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiverse  deb-src http://mirrors.aliyun.com/ubuntu/ xenial-proposed main restricted universe multiverse  deb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse

3ã€æ›´æ–°èµ„æºåŒ…sudo apt-get update
æ—¶é—´åŒæ­¥1ã€åŒæ­¥æ—¶åŒºæ‰§è¡Œå‘½ä»¤sudo dpkg-reconfigure tzdataï¼Œç„¶åé€‰æ‹©Asiaï¼ŒShanghaiã€‚
2ã€å®‰è£…æ—¶é—´åŒæ­¥å·¥å…·
sudo apt-get install ntpdatesudo ntpdate cn.pool.ntp.orgdate

devstackä¸‹è½½1ã€å®‰è£…gitsudo apt-get install git
2ã€ä¸‹è½½devstackå¹¶åˆ‡æ¢åˆ°queensåˆ†æ”¯git clone https://git.openstack.org/openstack-dev/devstack -b stable/queens
åˆ›å»ºstackç”¨æˆ·æ–¹æ³•ä¸€ï¼š1ã€æ‰§è¡Œåˆ›å»ºç”¨æˆ·è„šæœ¬sudo devstack/tools/create-stack-user.sh
2ã€å°†devstackç›®å½•æ”¾åˆ°/opt/stackä¸­å¹¶è®¾ç½®æƒé™sudo mv devstack /opt/stack
sudo chown -R stack:stack /opt/stack
3ã€åˆ‡æ¢åˆ°stackç”¨æˆ·sudo su - stack
æ–¹æ³•äºŒï¼š1ã€æ·»åŠ stackç”¨æˆ·sudo useradd -s /bin/bash -d /opt/stack -m stack
2ã€ç»™stackç”¨æˆ·æ·»åŠ sudoæƒé™echo &quot;stack ALL=(ALL) NOPASSWD: ALL&quot; | sudo tee /etc/sudoers.d/stack
3ã€å°†devstackç›®å½•æ”¾åˆ°/opt/stackä¸­å¹¶è®¾ç½®æƒé™sudo mv devstack /opt/stack
sudo chown -R stack:stack /opt/stack
4ã€åˆ‡æ¢åˆ°stackç”¨æˆ·sudo su - stack
æ›´æ¢pipæºï¼ˆå¯é€‰ï¼‰å‚è€ƒã€Špython pipæ›´æ¢å›½å†…æºã€‹ã€‚
1ã€å®‰è£…pythonsudo apt-get install python
2ã€åˆ›å»ºpip.confmkdir ~/.pip &amp;&amp; vim ~/.pip/pip.conf
å†™å…¥å†…å®¹å¦‚ä¸‹ï¼š
[global]index-url = http://mirrors.aliyun.com/pypi/simple/[install]trusted-host = http://mirrors.aliyun.com/pypi/simple/

ç¼–è¯‘å®‰è£…1ã€æ‹·è´local.confcd devstack &amp;&amp; cp samples/local.conf ./
2ã€ä¿®æ”¹local.confå¯†ç é…ç½®ä¸ºï¼š
ADMIN_PASSWORD=secretDATABASE_PASSWORD=$ADMIN_PASSWORDRABBIT_PASSWORD=$ADMIN_PASSWORDSERVICE_PASSWORD=$ADMIN_PASSWORD

åŒæ—¶åœ¨æœ€åæ·»åŠ ï¼š
GIT_BASE=http://git.trystack.cnNOVNC_REPO=http://git.trystack.cn/kanaka/noVNC.gitSPICE_REPO=http://git.trystack.cn/git/spice/spice-html5.git

3ã€æ‹·è´local.shcp samples/local.sh ./
4ã€æ‰§è¡Œå®‰è£…./stack.sh
å®‰è£…æŠ¥é”™ï¼šE: Unable to locate package libsystemd-devã€‚ï¼ˆ1ï¼‰å®‰è£…libsystemd-devï¼Œsudo apt install libsystemd-devï¼Œæ²¡æœ‰æ‰¾åˆ°libsystemd-devè¿™ä¸ªåŒ…ã€‚
ï¼ˆ2ï¼‰æŸ¥æ‰¾libsystemd-devï¼Œsudo apt search libsystemd-devï¼Œæœç„¶æ²¡æœ‰æ‰¾åˆ°libsystemd-devã€‚
ï¼ˆ3ï¼‰çŒœæµ‹æ˜¯sources.listçš„é”…ï¼Œæ”¹æˆåŸsources.listï¼Œé—®é¢˜è§£å†³ã€‚
ç„¶åæŠ¥é”™pipç‰ˆæœ¬å¤ªä½ï¼Œå‡çº§å´å¤±è´¥ï¼Œåˆ é™¤.pipç›®å½•ï¼Œé—®é¢˜è§£å†³ã€‚ã€‚ã€‚
æ¥ä¸‹æ¥ï¼Œé¡ºåˆ©å®‰è£…ï¼Œæœ€åæŠ¥é”™ï¼š
2018-06-27 00:47:54.156 | More than one SecurityGroup exists with the name &#x27;default&#x27;.2018-06-27 00:47:55.193 | More than one SecurityGroup exists with the name &#x27;default&#x27;.2018-06-27 00:47:55.246 | ++./stack.sh:main:1390                   err_trap2018-06-27 00:47:55.254 | ++./stack.sh:err_trap:551                   local r=12018-06-27 00:47:55.261 | stack.sh failed: full log in /opt/stack/logs/stack.sh.log.2018-06-27-0828302018-06-27 00:47:55.264 | Error on exit

å‚è€ƒå¦‚ä½•ä¿®æ”¹é»˜è®¤OpenStackå®‰å…¨ç»„ä¸­çš„è§„åˆ™ï¼ŒæŸ¥çœ‹securitygroupè§„åˆ™ï¼Œopenstack security group list
åœ¨å¤šç§Ÿæˆ·OpenStackç¯å¢ƒä¸­ï¼Œå­˜åœ¨å¤šä¸ªåä¸ºâ€œdefaultâ€çš„å®‰å…¨ç»„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯·ä½¿ç”¨å®‰å…¨ç»„IDè€Œä¸æ˜¯å®‰å…¨ç»„åç§°ã€‚äº‘ç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨OpenStackå®‰å…¨ç»„åˆ—è¡¨æ¥æ˜¾ç¤ºæ‰€æœ‰å®‰å…¨ç»„åŠå…¶å½“å‰åˆ†é…çš„åç§°ã€‚
å†æ¬¡å®‰è£…æˆ‘è§‰å¾—ä¸Šé¢çš„å®‰è£…å¥½åƒå¤±è´¥äº†ï¼Œæ‰“ç®—é‡è£…ã€‚1ã€å…ˆåœ¨devstackç›®å½•ä¸­ï¼Œæ‰§è¡Œå¸è½½
./unstack.sh./clean.sh

2ã€å†æ¬¡å®‰è£…./stack.sh
æœ€åè¿˜æ˜¯æŠ¥åŒæ ·çš„é”™è¯¯ã€‚ä¸ç®¡äº†ï¼Œæµ‹è¯•ä¸‹çœ‹çœ‹ã€‚
æµ‹è¯•ä½¿ç”¨1ã€è®¿é—® http://172.16.0.105/dashboard ï¼Œç”¨æˆ·åè¾“å…¥adminï¼Œå¯†ç è¾“å…¥secretï¼Œç™»å½•æ§åˆ¶å°ã€‚
2ã€é¡¹ç›®ï¼Œç½‘ç»œï¼Œåˆ›å»ºç½‘ç»œå’Œè·¯ç”±
3ã€é¡¹ç›®ï¼Œè®¡ç®—ï¼Œåˆ›å»ºå®ä¾‹
æŠ¥é”™ï¼š
Error: Failed to perform requested operation on instance &quot;vm1&quot;, the instance has an error status: Please try again later [Error: Host &#x27;ccrfox105&#x27; is not mapped to any cell].

æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹openstackçš„æœåŠ¡æ˜¯å¦æ­£å¸¸ï¼š
openstack service listopenstack endpoint listopenstack compute service list

æç¤ºï¼šMissing value auth-url required for auth plugin passwordè§£å†³åŠæ³•ï¼šè¿›å…¥devstackç›®å½•ï¼Œæ‰§è¡Œ
source openrc voidking projectsource openrc admin admin

è™½ç„¶Missing value auth-url required for auth plugin passwordçš„é—®é¢˜è§£å†³äº†ï¼Œä½†æ˜¯è¿˜æ˜¯æ— æ³•åˆ›å»ºå®ä¾‹ã€‚
å‚è€ƒOpenStackåº”ç”¨ã€æŠ¥é”™ï¼Œæ‰§è¡Œnova-manage cell_v2 discover_hostsï¼Œé—®é¢˜è§£å†³ã€‚
ç½‘ç»œé—®é¢˜å®ä¾‹åˆ›å»ºæˆåŠŸäº†ï¼Œä¹Ÿåˆ†é…äº†æµ®åŠ¨IPä¸º172.24.4.7ï¼Œä½†æ˜¯ä»ccrfox105ä¸Šå´pingä¸é€šå®ä¾‹ã€‚å‚è€ƒOpenstackåˆ›å»ºå®ä¾‹â€“horizonç¯‡ï¼Œè¿›è¡Œå¦‚ä¸‹è®¾ç½®ï¼š
1ã€é¡¹ç›®ï¼Œç½‘ç»œï¼Œå®‰å…¨ç»„ï¼Œåˆ›å»ºå®‰å…¨ç»„ã€‚
2ã€ç®¡ç†è§„åˆ™ï¼Œæ·»åŠ å‡ºå£å…¥å£icmpè§„åˆ™å’Œtcpè§„åˆ™ã€‚
3ã€å®ä¾‹çš„å®‰å…¨ç»„é€‰æ‹©æ–°å»ºçš„è§„åˆ™ã€‚
ç„¶åï¼Œå†æ¬¡ping 172.24.4.7ï¼Œç½‘ç»œå°±é€šäº†ã€‚
æµ‹è¯•è®¿é—®1ã€é¡¹ç›®ï¼Œè®¡ç®—ï¼Œå®ä¾‹ï¼Œå®ä¾‹åç§°ï¼Œæ—¥å¿—ã€‚å³å¯çœ‹åˆ°cirrosç³»ç»Ÿçš„ç”¨æˆ·åå’Œå¯†ç ã€‚
2ã€ç„¶ååœ¨ccrfox105ä¸Šï¼Œsshç™»å½•cirrosç³»ç»Ÿã€‚
å¸è½½devstackå¦‚æœdevstackå®‰è£…å¤±è´¥æˆ–è€…ä¸å†éœ€è¦ï¼Œé‚£ä¹ˆå¯ä»¥å¯¹å®ƒè¿›è¡Œå¸è½½ã€‚
æ‰§è¡Œ./unstack.shå’Œ./clean.shï¼Œå¸è½½openstackã€‚ç„¶ååˆ é™¤stackç”¨æˆ·ï¼Œåˆ é™¤/opt/stackç›®å½•ã€‚
æˆ–è€…ï¼Œå¹²è„†é‡è£…ç³»ç»Ÿï¼Œå› ä¸ºå¸è½½åä¼šæœ‰å¾ˆå¤šé—ç•™é—®é¢˜ã€‚
åè®°è‡³æ­¤ï¼Œå®Œæˆäº†å•èŠ‚ç‚¹OpenStackçš„å®‰è£…ï¼Œä¹Ÿè¿›è¡Œäº†ç®€å•åœ°åˆ›å»ºå®ä¾‹å’Œæµ‹è¯•ï¼Œniceã€‚
æ¥ä¸‹æ¥æœ‰ä¸¤ä¸ªè®¡åˆ’ï¼Œä¸€ä¸ªæ˜¯å°è¯•OpenStackæ›´å¤šçš„æ“ä½œå’Œè®¾ç½®ï¼Œä»¥ä¾¿ç†Ÿæ‚‰è¿™ä¸ªå¹³å°ã€‚å¦ä¸€ä¸ªæ˜¯ä½¿ç”¨devstackå®‰è£…å¤šèŠ‚ç‚¹OpenStackï¼Œæˆ–è€…æ‰‹åŠ¨å®‰è£…å¤šèŠ‚ç‚¹Openstackã€‚è®¡åˆ’æ­å»ºä¸€ä¸ªControllerèŠ‚ç‚¹å’Œä¸¤ä¸ªComputeèŠ‚ç‚¹ã€‚
åœ¨å®‰è£…æ—¶ï¼Œè‡ªä½œèªæ˜åœ°æ›´æ¢äº†sources.listå’Œpip.confï¼Œä»¥ä¸ºå¯ä»¥åŠ é€Ÿå®‰è£…ï¼Œæ²¡æƒ³åˆ°å´ç»™è‡ªå·±æŒ–äº†å‘ï¼ŒåŒå­¦ä»¬å¼•ä»¥ä¸ºé‰´å•Šã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
        <tag>devstack</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxä¸‹ä½¿ç”¨VirtualBox</title>
    <url>/dev-linux-virtualbox/</url>
    <content><![CDATA[å‰è¨€åœ¨windowså›¾å½¢ç•Œé¢ä¸Šä½¿ç”¨virtualboxå¾ˆç®€å•ï¼Œè€Œåœ¨æ²¡æœ‰å›¾å½¢çš„ç•Œé¢çš„linuxç³»ç»Ÿä¸Šï¼ŒåŒæ ·å¯ä»¥ä½¿ç”¨virtualboxï¼Œåªä¸è¿‡æ“ä½œæ–¹å¼å˜æˆäº†å‘½ä»¤è¡Œã€‚
æœ¬æ–‡æˆ‘ä»¬å­¦ä¹ ä¸€ä¸‹åœ¨ubuntu16ç³»ç»Ÿä¸‹ä½¿ç”¨virtualboxçš„æ–¹æ³•ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

How to Install Oracle VirtualBox 5.2 on Ubuntu 17.10/16.04, Debian 9/8
VirtualBoxå®˜ç½‘ä¸‹è½½é¡µé¢
Manage Virtualbox virtual machines under command line
How to run VirtualBox virtual machines from the command line



virtualboxå®‰è£…1ã€æ·»åŠ å®‰è£…æº
sudo add-apt-repository &quot;deb http://download.virtualbox.org/virtualbox/debian `lsb_release -cs` contrib&quot;

2ã€å®‰è£…åŒ…ç­¾åå¯†é’¥
wget -q https://www.virtualbox.org/download/oracle_vbox_2016.asc -O- | sudo apt-key add -wget -q https://www.virtualbox.org/download/oracle_vbox.asc -O- | sudo apt-key add -

3ã€æ‰§è¡Œå®‰è£…
sudo apt-get updatesudo apt-get install virtualbox-5.2

æŠ¥é”™ï¼š
virtualbox-5.2 is already the newest version (5.2.12-122591~Ubuntu~xenial).You might want to run &#x27;apt-get -f install&#x27; to correct these:The following packages have unmet dependencies: virtualbox-5.2 : Depends: libcurl3 (&gt;= 7.16.2) but it is not going to be installed                  Depends: libgl1-mesa-glx but it is not going to be installed or                           libgl1                  Depends: libx11-xcb1 but it is not going to be installed                  Depends: libxcursor1 (&gt; 1.1.2) but it is not going to be installed                  Depends: libxinerama1 but it is not going to be installed                  Recommends: libsdl-ttf2.0-0 but it is not going to be installed                  Recommends: pdf-viewer                  Recommends: libgl1E: Unmet dependencies. Try &#x27;apt-get -f install&#x27; with no packages (or specify a solution).

æ‰§è¡Œsudo apt-get -f installï¼Œä¿®å¤åŒ…ä¾èµ–é—®é¢˜ã€‚
virtualboxä½¿ç”¨å¸¸ç”¨å‘½ä»¤å‚è€ƒvirtualboxå‘½ä»¤è¡Œã€‚

vboxmanage -vï¼ŒæŸ¥çœ‹ç‰ˆæœ¬ã€‚
vboxmanage showvminfo &quot;Windows XP&quot;ï¼ŒæŸ¥çœ‹æŸä¸€è™šæ‹Ÿæœºçš„ä¿¡æ¯ã€‚
vboxmanage startvm &quot;Windows XP&quot;ï¼Œå¼€å¯è™šæ‹Ÿæœºï¼ˆæŒ‡å®šnameï¼‰ã€‚
vboxmanage startvm 670e746d-abea-4ba6-ad02-2a3b043810a5ï¼Œå¼€å¯è™šæ‹Ÿæœºï¼ˆæŒ‡å®šUUIDï¼‰ã€‚
vboxmanage startvm ubuntu guiï¼Œå›¾å½¢åŒ–ç•Œé¢å¯åŠ¨ï¼ˆè¿™æ˜¯é»˜è®¤å€¼ï¼‰ã€‚
vboxmanage startvm ubuntu headlessï¼Œå‘½ä»¤è¡Œç•Œé¢å¯åŠ¨ã€‚
vboxmanage list vmsï¼Œåˆ—å‡ºæ‰€æœ‰çš„è™šæ‹Ÿæœºã€‚
vboxmanage list runningvmsï¼Œåˆ—å‡ºç°åœ¨æ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœºã€‚
vboxmanage list hostinfoï¼Œåˆ—å‡ºå®¿ä¸»æœºçš„è¯¦ç»†ä¿¡æ¯ï¼ˆCPU å†…å­˜ æ“ä½œç³»ç»Ÿç‰ˆæœ¬ç­‰ï¼‰ã€‚
vboxmanage list hostonlyifsï¼Œåˆ—å‡ºç³»ç»Ÿçš„hostonlyç½‘ç»œçš„ä¿¡æ¯ã€‚
vboxmanage list dhcpserversï¼ŒDBCPæœåŠ¡å™¨çš„ä¿¡æ¯ã€‚

åˆ›å»ºè™šæ‹Ÿæœºå¾ˆéº»çƒ¦ï¼Œå°±ä¸å®è·µäº†ã€‚å…·ä½“ç”¨æ³•å‚è€ƒVirtualBoxå‘½ä»¤è¡ŒVBoxManageåˆ›å»ºä¸ç®¡ç†è™šæ‹Ÿæœºæ•™ç¨‹ã€‚
è¿œç¨‹ä½¿ç”¨å›¾å½¢ç•Œé¢ä½¿ç”¨å‘½ä»¤è¡Œæ“ä½œvirtualboxæœ‰å¾ˆå¤šä¸æ–¹ä¾¿çš„åœ°æ–¹ï¼Œæ¯”å¦‚åˆ›å»ºè™šæ‹Ÿæœºå°±å¾ˆéº»çƒ¦ã€‚èƒ½ä¸èƒ½åœ¨è¿œç¨‹linuxä½¿ç”¨VirtualBoxçš„æ—¶å€™ï¼Œé€šè¿‡å›¾å½¢ç•Œé¢ä½¿ç”¨å‘¢ï¼Ÿå¯ä»¥çš„ã€‚è¦è¿œç¨‹ä½¿ç”¨å›¾å½¢ç•Œé¢ï¼ŒæœåŠ¡ç«¯éœ€è¦å®‰è£…vncserverï¼Œå®¢æˆ·ç«¯éœ€è¦å®‰è£…vncclientã€‚
å‚è€ƒæ–‡æ¡£ï¼š

XShell+Xmanagerå®ç°åœ¨XShellä¸­æ˜¾ç¤ºè¿œç¨‹æœåŠ¡å™¨çš„å›¾å½¢ç•Œé¢
Ubuntu14.04æœåŠ¡å™¨:è¿œç¨‹æ¡Œé¢è¿æ¥
Linuxä¸‹VNCé…ç½®ä½¿ç”¨æ€»ç»“ï¼šå¼€å¯+æ¡Œé¢é…ç½®+å®‰å…¨è®¿é—®

xfce4æ¡Œé¢å‚è€ƒæ–‡æ¡£Ubuntuå¦‚ä½•å®‰è£…vncserverã€‚
1ã€å®‰è£…xfce4æ¡Œé¢ç³»ç»Ÿï¼ˆtwmæ¡Œé¢ï¼‰apt-get install xfce4 ã€€ã€€xfce4æ¡Œé¢ç³»ç»Ÿéå¸¸ç®€å•ï¼Œç•Œé¢åªæœ‰ä¸€ä¸ªç°è‰²èƒŒæ™¯åŠ ä¸Šä¸€ä¸ªshellçª—å£ã€‚
2ã€å®‰è£…vnc4serverå’Œxrdp
apt-get install -y vnc4server xrdp

VNC4Server æ˜¯ä¸€ä¸ªåŸºäº VNCï¼ˆVirtual Network Computingï¼‰åè®®çš„è¿œç¨‹æ¡Œé¢æœåŠ¡å™¨è½¯ä»¶ï¼Œå®ƒå…è®¸ç”¨æˆ·é€šè¿‡ VNC å®¢æˆ·ç«¯åœ¨è¿œç¨‹è®¡ç®—æœºä¸ŠæŸ¥çœ‹å’Œæ“ä½œå›¾å½¢ç•Œé¢ã€‚VNC4Server é€šè¿‡åœ¨è¿œç¨‹è®¡ç®—æœºä¸Šåˆ›å»ºè™šæ‹Ÿæ˜¾ç¤ºè®¾å¤‡å¹¶å°†å›¾å½¢æ¸²æŸ“ä¼ è¾“åˆ°å®¢æˆ·ç«¯æ¥å®ç°è¿œç¨‹æ¡Œé¢åŠŸèƒ½ã€‚
XRDP æ˜¯ä¸€ç§è¿œç¨‹æ¡Œé¢åè®®ï¼Œå®ƒå…è®¸ç”¨æˆ·é€šè¿‡ Microsoft çš„ RDPï¼ˆRemote Desktop Protocolï¼‰åè®®è®¿é—®è¿œç¨‹è®¡ç®—æœºçš„æ¡Œé¢ã€‚XRDP æä¾›äº†åœ¨ Linux ç³»ç»Ÿä¸Šå®ç° RDP åŠŸèƒ½çš„æ–¹å¼ã€‚
XRDP ä¸ VNC4Server ç»“åˆä½¿ç”¨ï¼Œä»¥åœ¨ Linux ç³»ç»Ÿä¸Šæä¾›è¿œç¨‹æ¡Œé¢è®¿é—®ã€‚é€šå¸¸çš„é…ç½®æ˜¯ï¼ŒXRDP å……å½“ RDP æœåŠ¡å™¨ï¼Œæ¥å—æ¥è‡ª Windows æˆ–å…¶ä»– RDP å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ï¼Œå¹¶å°†è¿™äº›è¿æ¥è¯·æ±‚è½¬å‘åˆ° VNC4Serverã€‚VNC4Server åœ¨è¿œç¨‹ Linux è®¡ç®—æœºä¸Šè¿è¡Œï¼Œè´Ÿè´£å¤„ç†å›¾å½¢ç•Œé¢æ¸²æŸ“ï¼Œå¹¶å°†æ¸²æŸ“çš„ç»“æœä¼ è¾“å› RDP å®¢æˆ·ç«¯ã€‚è¿™æ ·ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ RDP å®¢æˆ·ç«¯è¿æ¥åˆ°è¿œç¨‹ Linux è®¡ç®—æœºå¹¶åœ¨å…¶ä¸­è¿è¡Œå›¾å½¢åº”ç”¨ç¨‹åºã€‚
3ã€é…ç½®é»˜è®¤ä½¿ç”¨xfce4ä½œä¸ºç™»å½•ç•Œé¢
echo &quot;xfce4-session&quot; &gt;~/.xsession

4ã€é‡å¯xrdp
service xrdp restart

5ã€å¯åŠ¨vncserver
vncserver
æ ¹æ®æç¤ºè®¾ç½®è¿œç¨‹å¯†ç ï¼Œé»˜è®¤æ”¾åœ¨/root/.vnc/passwdä¸­ï¼ŒåŒæ—¶ç”Ÿæˆ/root/.vnc/xstartupã€‚å…¶ä¸­:1è¡¨ç¤ºåœ¨5900çš„åŸºç¡€ä¸ŠåŠ 1ï¼Œå°±æ˜¯vncç«¯å£ã€‚
xstartupå†…å®¹ä¸ºï¼š
#!/bin/sh# Uncomment the following two lines for normal desktop:# unset SESSION_MANAGER# exec /etc/X11/xinit/xinitrc[ -x /etc/vnc/xstartup ] &amp;&amp; exec /etc/vnc/xstartup[ -r $HOME/.Xresources ] &amp;&amp; xrdb $HOME/.Xresourcesxsetroot -solid greyvncconfig -iconic &amp;x-terminal-emulator -geometry 80x24+10+10 -ls -title &quot;$VNCDESKTOP Desktop&quot; &amp;x-window-manager &amp;

6ã€æœ¬åœ°æ‰“å¼€vncviewer clientï¼Œè¾“å…¥ip:5901è¿›è¡Œè¿æ¥ã€‚è¿æ¥æˆåŠŸåå‘ç°ï¼Œæ¡Œé¢æ˜¯ç°è‰²èƒŒæ™¯ï¼Œæ¡Œé¢ä¸Šåªæœ‰ä¸€ä¸ªshellã€‚è¿™å°±æ˜¯ä¼ è¯´ä¸­çš„twmç•Œé¢ã€‚
7ã€å¯åŠ¨virtualboxåœ¨shellä¸­ï¼Œè¾“å…¥virtualbox
è‡³æ­¤ï¼Œå°±èƒ½æ„‰å¿«åœ°ä½¿ç”¨virtualboxå›¾å½¢ç•Œé¢äº†ã€‚
gnomeæ¡Œé¢ä¸Šé¢çš„xfce4æ¡Œé¢ï¼Œå¯ä»¥æ»¡è¶³æˆ‘ä»¬ä½¿ç”¨virtualboxçš„éœ€æ±‚ã€‚ä½†æ˜¯ï¼Œè¿™æ¬¾æ¡Œé¢å®åœ¨å¤ªç®€å•äº†ï¼Œå¿«æ·é”®åªèƒ½åˆ‡æ¢çª—å£ï¼ˆAlt+Tabï¼‰ï¼Œæ— æ³•å¿«æ·æ‰“å¼€terminalï¼Œå³é”®é¼ æ ‡å•¥ä¹Ÿæ²¡æœ‰ã€‚æ‰€ä»¥ï¼Œè¿˜å¾—æŠ˜è…¾ä¸‹ï¼Œæä¸ªæ›´å¥½ç”¨çš„æ¡Œé¢ï¼Œå‚è€ƒæ–‡æ¡£Ubuntuå¦‚ä½•å®‰è£…vncserverã€‚
1ã€å…³é—­vncserver
vncserver --listvncserver -kill :1

2ã€å®‰è£…gnomeæ¡Œé¢
apt-get install -y gnome-panel gnome-settings-daemon metacity nautilus gnome-terminal

3ã€ä¿®æ”¹xstartup
cp /root/.vnc/xstartup&#123;,.xfce4&#125;vim /root/.vnc/xstartup

ä¿®æ”¹åå†…å®¹å¦‚ä¸‹ï¼š
#!/bin/shexport XKL_XMODMAP_DISABLE=1  unset SESSION_MANAGER  unset DBUS_SESSION_BUS_ADDRESS  gnome-panel &amp;  gnome-settings-daemon &amp;  metacity &amp;  nautilus &amp;  gnome-terminal &amp;

4ã€å¯åŠ¨vncserver
vncserver

5ã€è¿æ¥vncservergonmeæ¡Œé¢ï¼Œå·²ç»æ¯”xfce4å¥½äº†å¾ˆå¤šï¼Œä½†æ˜¯è¿˜æ˜¯æ¯”è¾ƒç®€é™‹ã€‚
ubuntu-desktopæ¡Œé¢å‚è€ƒæ–‡æ¡£ï¼šubuntu20.04 vncservré…ç½®
1ã€å…³é—­vncserver
vncserver --listvncserver -kill :1

2ã€å®‰è£…ubuntu-desktopæ¡Œé¢
apt-get install ubuntu-desktopls -l /usr/share/xsessions/

3ã€ä¿®æ”¹xstartup
cp /root/.vnc/xstartup&#123;,.gnome&#125;ls /usr/share/xsessions/cat /usr/share/xsessions/ubuntu.desktopvim /root/.vnc/xstartup

ä¿®æ”¹åå†…å®¹å¦‚ä¸‹ï¼š
#!/bin/shexport XKL_XMODMAP_DISABLE=1  unset SESSION_MANAGER  unset DBUS_SESSION_BUS_ADDRESS  # Set the default window managerexport XDG_SESSION_DESKTOP=ubuntuexport XDG_DATA_DIRS=/usr/share/ubuntu:/usr/local/share:/usr/share:/var/lib/snapd/desktopexport XDG_CONFIG_DIRS=/etc/xdg/xdg-ubuntu:/etc/xdg# Start the window managerexec /usr/bin/gnome-session

å…¶ä¸­æœ€å…³é”®çš„æ˜¯exec /usr/bin/gnome-sessionï¼Œè¿™ä¸ªå€¼æ˜¯åœ¨/usr/share/xsessions/ubuntu.desktopä¸­è·å–åˆ°çš„ã€‚
4ã€å¯åŠ¨vncserver
vncserver# orvncserver :1 -localhost no# orvncserver :1 -xstartup /root/.vnc/xstartup -localhost no

å†æ¬¡è¿æ¥åï¼Œçœ‹åˆ°çš„å°±æ˜¯æ­£å¸¸çš„æ¡Œé¢äº†ï¼Œniceã€‚
5ã€ä¿®æ”¹çª—å£å¤§å°vncserveré»˜è®¤çš„çª—å£å¤§å°ä¸º1024x768ï¼Œä½¿ç”¨æ—¶å¦‚æœæ„Ÿè§‰çª—å£æ¯”è¾ƒå°ï¼Œå¯ä»¥è¿›è¡Œä¿®æ”¹ã€‚vim /usr/bin/vncserverï¼Œå¦‚ä¸‹ä¿®æ”¹ï¼š
# line 44, change$geometry = &quot;1280x1024&quot;;
ç„¶åkillæ‰å·²ç»å¯åŠ¨çš„vncserverï¼Œå¯åŠ¨æ–°çš„å³å¯ã€‚
é”™è¯¯è§£å†³åœ¨æŸæ¬¡è¿œç¨‹æ¡Œé¢è¿æ¥æ—¶ï¼Œæç¤ºtoo many security failuresï¼Œè§£å†³åŠæ³•å‚è€ƒvncserver too many security failuresã€‚
1ã€é‡ç½®é»‘åå•
vncconfig -display :1 -set BlacklistTimeout=0 -set BlacklistThreshold=1000000

2ã€è¿æ¥æˆåŠŸåè¿˜åŸé»‘åå•
vncconfig -display :1 -set BlacklistTimeout=600000000000 -set BlacklistThreshold=10




]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>virtualbox</tag>
      </tags>
  </entry>
  <entry>
    <title>Gangliaé…ç½®Gridæ¶æ„</title>
    <url>/dev-ganglia-grid/</url>
    <content><![CDATA[Gangliaç®€ä»‹ã€ŠUbuntu14.04å®‰è£…é…ç½®Gangliaã€‹ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¼šäº†å®‰è£…é…ç½®gangliaçš„æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬çš„é…ç½®æ–¹æ³•ï¼Œåªé€‚ç”¨äºä¸€ä¸ªé›†ç¾¤ï¼Œå¦‚æœæˆ‘ä»¬æœ‰å¤šä¸ªé›†ç¾¤æ€ä¹ˆåŠï¼Ÿæœ¬æ–‡å°±æ¥æ¢è®¨ä¸€ä¸‹ã€‚


Gangliaå±‚çº§å‚è€ƒYOUYOUæ·±å…¥å­¦ä¹ Gangliaä¹‹ä¸€ï¼ˆå»ºç«‹Gridï¼‰ï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹ç»“è®ºï¼š
Gangliaä»æ•°æ®ä¸­å¿ƒçš„ç»“æ„ä¸Šåˆ’åˆ†äº†ä¸‰ä¸ªå±‚æ¬¡ï¼šNodeï¼ŒClusterï¼ŒGridã€‚ä¸€å¥è¯æ¦‚æ‹¬ï¼šå¤šä¸ªNodeç»„æˆä¸€ä¸ªClusterï¼Œå¤šä¸ªClusterç»„æˆä¸€ä¸ªGridã€‚
é…ç½®Gridå¦‚æœåªæœ‰ä¸€ä¸ªClusterï¼Œæ²¡æœ‰æ·»åŠ Gridé…ç½®ï¼Œé‚£ä¹ˆè¿™ä¸ªClusteré»˜è®¤åœ¨åä¸ºâ€œGridâ€çš„Gridä¸‹ã€‚
å¦‚ä¸Šå›¾ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªClusterï¼Œåä¸ºCloud Computingå’Œk8sï¼Œå®ƒä»¬çš„ç®¡ç†æœºåˆ†åˆ«æ˜¯cluster1-masterå’Œcluster2-masterã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€å°Gridç®¡ç†æœºä¸ºgrid-masterã€‚
cluster1-masterçš„IPä¸º192.168.56.101ï¼Œcluster2-masterçš„IPä¸º192.168.56.201ï¼Œgrid-masterçš„IPä¸º192.168.56.56ã€‚
ç°åœ¨ï¼Œæˆ‘ä»¬æƒ³è¦æŠŠCloud Computingå’Œk8sè¿™ä¸¤ä¸ªClusteråˆå¹¶æˆä¸€ä¸ªGridã€‚
1ã€cluster1-masterå’Œcluster2-masteré…ç½®å…è®¸å…±äº«gmatedçš„XMLæ–‡ä»¶ï¼ŒåŒæ—¶æŠŠgrid-masteråœ°å€è®¾ç½®ä¸ºä¿¡ä»»çš„ä¸»æœºIPã€‚sudo vi /etc/ganglia/gmetad.conf
æ‰¾åˆ°ï¼š
# List of machines this gmetad will share XML with. Localhost# is always trusted. # default: There is no default value# trusted_hosts 127.0.0.1 169.229.50.165 my.gmetad.org# If you want any host which connects to the gmetad XML to receive# data, then set this value to &quot;on&quot;# default: off# all_trusted on
ä¿®æ”¹ä¸ºï¼š
# List of machines this gmetad will share XML with. Localhost# is always trusted. # default: There is no default valuetrusted_hosts 192.168.56.56# If you want any host which connects to the gmetad XML to receive# data, then set this value to &quot;on&quot;# default: offall_trusted on

2ã€cluster1-masterå’Œcluster2-masteré‡å¯gmetadsudo /etc/init.d/gmetad restart
3ã€grid-masterçš„gmetadï¼Œè¦æ·»åŠ æ•°æ®æºã€‚sudo vi /etc/ganglia/gmetad.conf
æ‰¾åˆ°data_sourceï¼Œæ·»åŠ ï¼š
data_source &quot;Cloud Computing&quot; 10 192.168.56.101:8649 192.168.56.102:8649data_source &quot;k8s&quot; 10 192.168.56.201:8649 192.168.56.202:8649

4ã€grid-masteré‡å¯gmetadsudo /etc/init.d/gmetad restart
ç„¶åï¼Œå°±èƒ½åœ¨grid-masterçš„gwebä¸Šçœ‹åˆ°ä¸€ä¸ªGridï¼ŒåŒ…å«ä¸¤ä¸ªClusterã€‚
å¯¹æ¯”æœ€å¼€å§‹æ—¶çš„å›¾å¯ä»¥å‘ç°ï¼Œcluster1-masterçš„gwebæ ‡é¢˜ä¸ºâ€œCloud Computing Cluster Report atâ€¦â€ï¼Œè€Œgrid-masterçš„gwebæ ‡é¢˜ä¸ºâ€œunspecified Grid Report atâ€¦â€ã€‚ä¹‹æ‰€ä»¥unspecifiedï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬åœ¨cluster1-masterå’Œcluster2-masterçš„gmetadä¸­æ²¡æœ‰æŒ‡å®šGridçš„åå­—ã€‚
5ã€åœ¨cluster1-masterå’Œcluster2-masterä¸Šä¿®æ”¹gmetadï¼Œè®¾ç½®Gridåç§°ä¸ºâ€Center of Cloud Computingâ€ã€‚sudo vi /etc/ganglia/gmetad.conf
æ‰¾åˆ°gridnameï¼Œæ‰“å¼€æ³¨é‡Šï¼Œä¿®æ”¹ä¸ºï¼š
gridname &quot;Center of Cloud Computing&quot;

6ã€cluster1-masterã€cluster2-masterã€grid-masteré‡å¯gmetadsudo /etc/init.d/gmetad restart
ç„¶åï¼Œè®¿é—®grid-masterçš„gwebï¼Œçœ‹åˆ°Gridæœ‰äº†åå­—ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>monitoring</category>
      </categories>
      <tags>
        <tag>ç›‘æ§</tag>
        <tag>ubuntu</tag>
        <tag>ganglia</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰¹é‡é‡å‘½åå’Œæ‰¹é‡æ›¿æ¢å­—ç¬¦ä¸²</title>
    <url>/dev-batch-rename-and-replace/</url>
    <content><![CDATA[å‰è¨€å®Œæˆäº†ã€ŠHexoæ·»åŠ categoriesé¡µé¢ã€‹ï¼Œæ¥ä¸‹é‡Œçš„å·¥ä½œï¼Œå°±æ˜¯ç»™ä»¥å‰å†™çš„æ–‡ç« è¿›è¡Œé‡æ–°åˆ†ç±»ã€‚ä»¥å‰åˆ†ä¸ºäº”å¤§ç±»ï¼šè®¾è®¡å¼€å‘ã€ç‚¹æ»´å‘ç°ã€ç”Ÿæ´»æœ­è®°ã€ç²¾åè½¬è½½å’Œè¯»è€…é›†èƒã€‚ç°åœ¨æ‰“ç®—åˆ†æˆå››å¤§ç±»ï¼šéšç¬”ï¼ˆessayï¼‰ã€ä¸“ä¸šï¼ˆdevï¼‰ã€è‹±è¯­ï¼ˆenï¼‰å’Œçˆ±å¥½ï¼ˆhobbyï¼‰ï¼Œç„¶ååœ¨æ¯ä¸ªå¤§ç±»ä¸‹å†æŒ‰éœ€è¦ç»†åˆ†ä¸ºå°ç±»ã€‚
åˆ†ç±»éœ€è¦ä¿®æ”¹mdæ–‡ä»¶çš„æ–‡ä»¶åå’Œæ–‡ä»¶å†…å®¹ï¼Œé¢å¯¹è¿‘äº”ç™¾ç¯‡æ–‡ç« ï¼Œå¿…é¡»è¦æ‰¹é‡å¤„ç†ã€‚


æ‰¹é‡ä¿®æ”¹æ–‡ä»¶åå‡è®¾è¦æŠŠæ‰€æœ‰ä»¥â€œdisc-â€å¼€å¤´çš„æ–‡ä»¶æ”¹ä¸ºâ€œdev-â€å¼€å¤´ï¼Œé‚£ä¹ˆåœ¨linuxä¸‹æ‰§è¡Œå‘½ä»¤ï¼š
# macosbrew install renamerename &#x27;s/disc-/dev-/&#x27; *# ubunturename &#x27;s/disc-/dev-/&#x27; *# centosrename disc- dev- *

æ‰¹é‡ä¿®æ”¹æ–‡ä»¶å†…å®¹1ã€å‡è®¾æˆ‘ä»¬è¦æŠŠæ–‡ä»¶ä¸­çš„â€œè®¾è®¡å¼€å‘â€æ”¹ä¸ºâ€œä¸“ä¸šâ€ï¼Œé‚£ä¹ˆæ‰§è¡Œå‘½ä»¤ï¼š
sed -i &quot;s/è®¾è®¡å¼€å‘/ä¸“ä¸š/g&quot; `grep è®¾è®¡å¼€å‘ -rl .`

2ã€å‡è®¾æˆ‘ä»¬è¦æŠŠæ–‡ä»¶ä¸­çš„http://7oxjrx.com1.z0.glb.clouddn.comæ”¹ä¸ºhttp://cdn.voidking.comï¼Œé‚£ä¹ˆæ‰§è¡Œå‘½ä»¤ï¼š
sed -i &quot;s/http:\/\/7oxjrx.com1.z0.glb.clouddn.com/http:\/\/cdn.voidking.com/g&quot; `grep http:\/\/7oxjrx.com1.z0.glb.clouddn.com -rl .`# æˆ–è€…sed -i &#x27;s!http://7oxjrx.com1.z0.glb.clouddn.com!http://cdn.voidking.com!g&#x27; `grep http:\/\/7oxjrx.com1.z0.glb.clouddn.com -rl .`

3ã€å‡è®¾æˆ‘ä»¬è¦æŠŠæ–‡ä»¶ä¸­çš„https://www.voidking.com/2018/06/11/dev-hexo-categories/æ”¹ä¸ºhttps://www.voidking.com/dev-hexo-categories/ï¼Œè¿™ä¸ªå°±æ¯”è¾ƒéš¾äº†ï¼Œå¯ä»¥å…ˆè¿›è¡Œè°ƒè¯•ï¼š
grep -P &#x27;\d&#123;4&#125;\/\d&#123;2&#125;\/\d&#123;2&#125;\/&#x27; -rl .echo &quot;https://www.voidking.com/2018/06/11/dev-hexo-categories/&quot; | sed &quot;s/\d&#123;4&#125;\/\d&#123;2&#125;\/\d&#123;2&#125;\///g&quot;echo &quot;https://www.voidking.com/2018/06/11/dev-hexo-categories/&quot; | sed &quot;s/\([0-9][0-9][0-9][0-9]\)\/\([0-9][0-9]\)\/\([0-9][0-9]\)\///g&quot; 

å› ä¸ºgrepå’Œsedéƒ½ä¸æ”¯æŒå®Œå…¨çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ‰€ä»¥grepè¦åŠ På‚æ•°ï¼Œsedè¦æ”¹å†™æ­£åˆ™è¡¨è¾¾å¼ã€‚æœ€åå¾—åˆ°çš„å‘½ä»¤ä¸ºï¼š
sed -i &quot;s/\([0-9][0-9][0-9][0-9]\)\/\([0-9][0-9]\)\/\([0-9][0-9]\)\///g&quot; `grep -P &#x27;\d&#123;4&#125;\/\d&#123;2&#125;\/\d&#123;2&#125;\/&#x27; -rl .`

4ã€å‡è®¾æˆ‘ä»¬æƒ³è¦æŠŠ [engineering,devops] æ›¿æ¢æˆ [ä¸“ä¸š,å¼€å‘,nginx]ï¼Œé‚£ä¹ˆæ‰§è¡Œå‘½ä»¤ï¼ˆè¯·ä½¿ç”¨linuxè€Œä¸æ˜¯macï¼‰ï¼š
sed -i &quot;s/ä¸“ä¸š,å¼€å‘,nginx/engineering,devops/g&quot; `grep &#x27;ä¸“ä¸š,å¼€å‘,nginx&#x27; -rl .`




]]></content>
      <categories>
        <category>engineering</category>
        <category>hexo</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>macos</tag>
        <tag>linux</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoæ·»åŠ categoriesé¡µé¢</title>
    <url>/dev-hexo-categories/</url>
    <content><![CDATA[å‰è¨€éšç€æ–‡ç« è¶Šæ¥è¶Šå¤šï¼Œåœ¨ç½‘ç«™ä¸­å¯»æ‰¾æ–‡ç« è¶Šæ¥è¶Šéº»çƒ¦ã€‚ç°åœ¨æœ‰ä¸¤ä¸ªæ–¹æ¡ˆå¯ä¾›é€‰æ‹©ï¼šä¸€ä¸ªæ˜¯å»ºç«‹æœç´¢ç³»ç»Ÿï¼›å¦ä¸€ä¸ªæ˜¯å»ºç«‹åˆ†ç±»æ£€ç´¢é¡µé¢ã€‚äºæ˜¯ï¼ŒéƒåŒå­¦é€‰æ‹©äº†æ›´ç®€å•çš„åè€…ï¼Œæœ¬æ–‡å°±è®°å½•ä¸€ä¸‹åˆ›å»ºcategoriesæ£€ç´¢é¡µé¢çš„è¿‡ç¨‹ã€‚


ç›®æ ‡ä»¥éƒåŒå­¦çš„ç½‘ç«™ä¸ºä¾‹ï¼Œå·¦ä¾§å¯¼èˆªæ å¾ˆå°ã€‚è¿™å°±æ„å‘³ç€ï¼Œæˆ‘ä»¬ä¸èƒ½åƒå…¶ä»–å…¶ä»–ä¸»é¢˜ä¸€æ ·ï¼Œç›´æ¥æŠŠåˆ†ç±»æ˜¾ç¤ºåœ¨å¯¼èˆªæ ï¼Œä¸ç„¶ä¼šå¾ˆä¸‘ã€‚
æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªcategoriesé¡µé¢ï¼Œåœ¨è¿™ä¸ªé¡µé¢é‡Œè¿›è¡Œåˆ†ç±»æ˜¾ç¤ºã€‚
å®è·µæ·»åŠ categoriesé“¾æ¥å‡è®¾ä¸»é¢˜æ˜¯yiliaï¼Œé‚£ä¹ˆæ‰“å¼€yilia/_config.ymlæ–‡ä»¶ï¼Œæ‰¾åˆ°ï¼š
# Headermenu:  ä¸»é¡µ: /  å½’æ¡£: /archives  å…³äº: /about  # éšç¬”: /tags/éšç¬”

ä¿®æ”¹ä¸ºï¼š
# Headermenu:  ä¸»é¡µ: /  åˆ†ç±»: /categories  å½’æ¡£: /archives  å…³äº: /about  # éšç¬”: /tags/éšç¬”

categoriesé¡µé¢1ã€æ–°å»ºcategoriesé¡µé¢hexo new page categoriesè¯¥å‘½ä»¤åœ¨sourceç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªcategoriesç›®å½•ï¼Œcategoriesç›®å½•ä¸‹æœ‰ä¸€ä¸ªindex.mdæ–‡ä»¶ã€‚
2ã€ä¿®æ”¹categories/index.mdä¸ºï¼š
---title: æ–‡ç« åˆ†ç±»date: 2018-06-11 10:13:21type: &quot;categories&quot;comments: false---

3ã€ç”Ÿæˆhtmlhexo gï¼Œhexo s
4ã€æµ‹è¯•è®¿é—®è®¿é—® http://localhost:4000/categories/ ï¼Œå³å¯çœ‹åˆ°categoriesé¡µé¢ï¼Œåªä¸è¿‡ç°åœ¨çš„é¡µé¢åªæœ‰æ ‡é¢˜ã€‚
å‚è€ƒåˆ›å»ºåˆ†ç±»é¡µé¢ å’Œ hexo next ä¸ºæ–‡ç« æ·»åŠ åˆ†ç±»ï¼Œå‘ç°nextä¸»é¢˜åœ¨ç”Ÿæˆcategoriesåç›´æ¥å°±å®Œæˆäº†åˆ†ç±»æ˜¾ç¤ºã€‚è€Œæˆ‘ä»¬çš„yiliaï¼Œæ˜æ˜¾ä¸è¡Œï¼Œé‚£å°±è‡ªå·±åŠ¨æ‰‹ï¼Œé£è¡£è¶³é£Ÿã€‚
ä¿®æ”¹yiliaä¸»é¢˜1ã€ä¿®æ”¹categories/index.mdä¸ºï¼š
---title: æ–‡ç« åˆ†ç±»date: 2018-06-11 10:13:21type: &quot;categories&quot;layout: &quot;categories&quot;comments: false---

æŒ‡å®šlayoutä¸ºcategoriesï¼Œæ¸²æŸ“æ—¶å°±ä¼šä½¿ç”¨categories.ejsè¿›è¡Œæ¸²æŸ“ã€‚
2ã€æ–°å»ºyilia/layout/categories.ejsï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;article class=&quot;article article-type-post show&quot;&gt;  &lt;header class=&quot;article-header&quot;&gt;  &lt;h1 class=&quot;article-title&quot; itemprop=&quot;name&quot;&gt;    &lt;%= page.title %&gt;  &lt;/h1&gt;  &lt;/header&gt;  &lt;% if (site.categories.length)&#123; %&gt;  &lt;div class=&quot;category-all-page article-type-post show&quot;&gt;    &lt;h3&gt;å…±è®¡&amp;nbsp;&lt;%= site.categories.length %&gt;&amp;nbsp;ä¸ªåˆ†ç±»&lt;/h3&gt;    &lt;ul class=&quot;category-list&quot;&gt;    &lt;% site.categories.sort(&#x27;name&#x27;).each(function(item)&#123; %&gt;      &lt;% if(item.posts.length)&#123; %&gt;        &lt;li class=&quot;category-list-item&quot;&gt;          &lt;a href=&quot;&lt;%- config.root %&gt;&lt;%- item.path %&gt;&quot; title=&quot;&lt;%= item.name %&gt;&quot;&gt;&lt;%= item.name %&gt;&lt;sup&gt;[&lt;%= item.posts.length %&gt;]&lt;/sup&gt;&lt;/a&gt;        &lt;/li&gt;      &lt;% &#125; %&gt;    &lt;% &#125;); %&gt;    &lt;/ul&gt;  &lt;/div&gt;  &lt;% &#125; %&gt;&lt;/article&gt;

3ã€æ–°å»ºyilia/source/css/_partial/categories.stylï¼Œå†…å®¹å¦‚ä¸‹ï¼š
.category-all-page &#123;  margin: 30px 40px 30px 40px;  position: relative;  min-height: 70vh;  h3&#123;    margin: 20px 0;  &#125;  .category-all-title &#123; text-align: center; &#125;  .category-all &#123; margin-top: 20px; &#125;  .category-list &#123;    margin: 0;    padding: 0;    list-style: none;  &#125;  .category-list-item &#123; margin: 10px 10px; &#125;  .category-list-count &#123;    color: $grey;    &amp;:before &#123;      display: inline;      content: &quot; (&quot;    &#125;    &amp;:after &#123;      display: inline;      content: &quot;) &quot;    &#125;  &#125;  .category-list-child &#123; padding-left: 10px; &#125;&#125;

4ã€åœ¨yilia/source/css/style.stylå¼•å…¥categories.stylï¼š
@import &quot;_extend&quot;@import &quot;_partial/main&quot;@import &quot;_partial/archive&quot;@import &quot;_partial/article&quot;@import &quot;_partial/archive&quot;@import &quot;_partial/highlight&quot;@import &quot;_partial/footer&quot;@import &quot;_partial/share&quot;@import &quot;_partial/page&quot;@import &quot;_partial/instagram&quot;@import &quot;_partial/tagcloud&quot;@import &quot;_partial/scroll&quot;@import &quot;_partial/mobile-slider&quot;@import &quot;_partial/categories&quot;

5ã€æµ‹è¯•è®¿é—®å†æ¬¡è®¿é—® http://localhost:4000/categories/ ï¼Œå‘ç°å·²ç»æˆåŠŸæ˜¾ç¤ºåˆ†ç±»ã€‚
å¤šå±‚åˆ†ç±»ä»¥ä¸Šï¼Œå·²ç»å®Œæˆäº†categoriesåˆ†ç±»é¡µé¢ï¼Œä½†æ˜¯åªæœ‰ä¸€å±‚åˆ†ç±»ã€‚å‡è®¾ï¼Œç°åœ¨æœ‰ä¸€ç¯‡æ–‡ç« çš„åˆ†ç±»ä¸ºå¤šå±‚åˆ†ç±»ï¼Œä¾‹å¦‚ï¼š
---title: Linuxè®¾ç½®é‚®ä»¶æé†’toc: truedate: 2018-05-24 11:00:00tags:- linux- ubuntu- centos- mailcategories: - [ä¸“ä¸š,æµ‹è¯•]---

æ˜¾ç¤ºçš„æ•ˆæœä¸ºæ‰€æœ‰ç±»åˆ«å¹³çº§æ˜¾ç¤ºï¼Œä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œå¦‚ä¸‹å›¾ï¼š
æœ¬èŠ‚å°±å®ç°å¤šå±‚åˆ†ç±»çš„æ˜¾ç¤ºæ•ˆæœï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š
1ã€ä¿®æ”¹yilia/layout/categories.ejsä¸ºï¼š
&lt;article class=&quot;article article-type-post show&quot;&gt;  &lt;header class=&quot;article-header&quot; style=&quot;border-bottom: 1px solid #ccc&quot;&gt;  &lt;h1 class=&quot;article-title&quot; itemprop=&quot;name&quot;&gt;    &lt;%= page.title %&gt;  &lt;/h1&gt;  &lt;/header&gt;  &lt;% if (site.categories.length)&#123; %&gt;  &lt;div class=&quot;category-all-page&quot;&gt;    &lt;h2&gt;å…±è®¡&amp;nbsp;&lt;%= site.categories.length %&gt;&amp;nbsp;ä¸ªåˆ†ç±»&lt;/h2&gt;    &lt;%- list_categories(site.categories, &#123;      show_count: true,      class: &#x27;category-list-item&#x27;,      style: &#x27;list&#x27;,      depth: 2,      separator: &#x27;&#x27;    &#125;) %&gt;  &lt;/div&gt;  &lt;% &#125; %&gt;&lt;/article&gt;

2ã€yilia/source/css/_partial/categories.stylä¿®æ”¹ä¸ºï¼š
.category-all-page &#123;  margin: 30px 40px 30px 40px;  position: relative;  min-height: 70vh;  h2&#123;    margin: 20px 0;  &#125;  .category-all-title &#123; text-align: center; &#125;  .category-all &#123; margin-top: 20px; &#125;  .category-list &#123;    margin: 0;    padding: 0;    list-style: none;  &#125;  .category-list-item-list-item&#123;    margin: 10px 15px;  &#125;  .category-list-item-list-count&#123;    color: $grey;    &amp;:before &#123;      display: inline;      content: &quot; (&quot;    &#125;    &amp;:after &#123;      display: inline;      content: &quot;) &quot;    &#125;  &#125;  .category-list-item &#123; margin: 10px 10px; &#125;  .category-list-count &#123;    color: $grey;    &amp;:before &#123;      display: inline;      content: &quot; (&quot;    &#125;    &amp;:after &#123;      display: inline;      content: &quot;) &quot;    &#125;  &#125;  .category-list-child &#123; padding-left: 10px; &#125;&#125;

3ã€å†æ¬¡è®¿é—®categoriesï¼Œè¾¾åˆ°äº†é¢„æœŸæ•ˆæœï¼Œå¦‚ä¸‹å›¾ï¼š
åè®°å¤šçœ‹äº†å‡ çœ¼nextä¸»é¢˜ï¼Œæ¯”å‡ å¹´å‰æ£’å¤šäº†ï¼Œç°åœ¨ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œé€‚åˆå°ç™½ã€‚ä¸è¿‡ï¼Œå®ƒçš„é¡¹ç›®ç»“æ„ä¹Ÿå˜å¾—æ›´åŠ å¤æ‚ï¼Œä¸æ–¹ä¾¿ä¸ªæ€§åŒ–ä¿®æ”¹ã€‚
ä¹¦ç­¾Hexoæ–‡æ¡£
Hexoå˜é‡
Hexoä¹‹list-categories
hexo-auto-category
Hexoä¸»é¢˜å®ç°å¤šçº§åˆ†ç±»æ˜¾ç¤º
Hexoä½¿ç”¨æ”»ç•¥ï¼šï¼ˆå››ï¼‰Hexoçš„åˆ†ç±»å’Œæ ‡ç­¾è®¾ç½®
]]></content>
      <categories>
        <category>engineering</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Windowså®‰è£…é…ç½®Gym</title>
    <url>/dev-windows-gym/</url>
    <content><![CDATA[å‰è¨€æœ€è¿‘åœ¨ç ”ç©¶å¼ºåŒ–å­¦ä¹ ï¼Œå„ç§æ¦‚å¿µå…¬å¼ï¼Œè®©äººå¿ƒçƒ¦æ„ä¹±ã€‚æ‰“ç®—æç‚¹æœ‰æ„æ€çš„ä¸œè¥¿ï¼Œæé«˜ä¸‹å­¦ä¹ çš„çƒ­æƒ…ã€‚
å¬è¯´ç”¨å¼ºåŒ–å­¦ä¹ ç©æ¸¸æˆå¾ˆæœ‰æ„æ€ï¼Œä¸å¦¨æä¸€ä¸‹ã€‚ç¬¬ä¸€æ­¥ï¼Œå®‰è£…OpenAI Gymï¼Œæœ¬æ–‡åšä¸‹è®°å½•ã€‚


å®‰è£…ç¯‡ç¯å¢ƒå‡†å¤‡win10ç³»ç»Ÿï¼Œpython3.6.3ã€‚
æ›´æ¢pipæºå‚è€ƒpython pipæ›´æ¢å›½å†…æºï¼Œæ‰“å¼€%appdata%ç›®å½•ï¼Œæ–°å»ºpipç›®å½•ï¼Œpipç›®å½•ä¸‹æ–°å»ºpip.iniæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
[global]index-url = https://mirrors.aliyun.com/pypi/simple/[install]trusted-host = https://mirrors.aliyun.com/pypi/simple/

ä¸‹è½½å®‰è£…å‚è€ƒgymå®˜æ–¹æ–‡æ¡£ï¼Œä½¿ç”¨ä¸€æ¡å‘½ä»¤å®‰è£…å³å¯ï¼špip install gym
æµ‹è¯•ç¯‡1ã€æ–°å»ºpythonè„šæœ¬demo.pyï¼š
import gymenv = gym.make(&#x27;CartPole-v0&#x27;)env.reset()for _ in range(1000):    env.render()    env.step(env.action_space.sample()) # take a random action

2ã€è¿è¡Œè„šæœ¬python demo.py

åè®°gymå®‰è£…é…ç½®å¾ˆç®€å•ï¼Œæ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥æ„‰å¿«åœ°è¿›è¡Œæ¸¸æˆè®­ç»ƒäº†ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>gym</tag>
        <tag>rflearning</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨PSSHæ‰¹é‡ç®¡ç†Linuxè¿›é˜¶ç¯‡</title>
    <url>/dev-pssh-manage-linux-advance/</url>
    <content><![CDATA[å‰è¨€ã€Šä½¿ç”¨PSSHæ‰¹é‡ç®¡ç†Linuxã€‹ä¸€æ–‡ä¸­ï¼Œå­¦ä¹ äº†psshçš„åŸºæœ¬ç”¨æ³•ï¼Œå®é™…ä¸Šå·²ç»æ¶µç›–äº†psshçš„å¤§éƒ¨åˆ†å†…å®¹ã€‚
æœ¬æ–‡ä¸»è¦è®°å½•åˆ©ç”¨psshå’Œexpectè„šæœ¬æ¥è§£å†³ä¸€äº›å®é™…é—®é¢˜ï¼Œå°±ç®—æ˜¯è¿›é˜¶ç¯‡äº†ã€‚


æ‰¹é‡æ·»åŠ å¯†é’¥ã€Šæ·»åŠ å¯†é’¥è®¤è¯è®¿é—®ã€‹ä¸€èŠ‚ä¸­ï¼Œå·²ç»å†™æ¸…æ¥šäº†æŒ¨ä¸ªç»™å®¢æˆ·æœºæ·»åŠ å¯†é’¥çš„æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œåœ¨å®¢æˆ·æœºæ•°é‡éå¸¸å¤šçš„æ—¶å€™ï¼ŒæŒ¨ä¸ªæ·»åŠ ä¹Ÿå¾ˆéº»çƒ¦ï¼Œå†™ä¸ªè„šæœ¬å§ï¼ï¼ˆå‡è®¾æ‰€æœ‰å®¢æˆ·æœºç”¨æˆ·éƒ½æ˜¯testï¼Œå¯†ç éƒ½æ˜¯123456ï¼‰
å‚è€ƒæ— å¯†é’¥ç™»å½•çš„è‡ªåŠ¨è„šæœ¬å®ç° å’Œ expect - è‡ªåŠ¨äº¤äº’è„šæœ¬
åŸºçº¿ç‰ˆæœ¬1ã€æ–°å»ºè„šæœ¬addkey.shï¼Œå†…å®¹ä¸ºï¼š
#!/usr/bin/expect set timeout 60set password 123456spawn ssh-copy-id -i /home/test/.ssh/id_rsa.pub -p 22 test@192.168.56.101expect &quot;install the new keys&quot;send &quot;\r&quot;expect &quot;password:&quot;send &quot;$password\r&quot;expect eof

2ã€æ‰§è¡Œè„šæœ¬chmod a+x addkey.sh
./addkey.sh
æ³¨æ„ï¼š

å¦‚æœå¯†ç æ˜¯å…­ä¸ªç©ºæ ¼ï¼Œé‚£ä¹ˆset password &quot;      &quot;å³å¯ã€‚
expect &quot;install the new keys&quot;è¿™é‡Œå…¶å®æ˜¯ä¸éœ€è¦äº¤äº’çš„ï¼Œä½†æ˜¯å¯†ç ä¼šç›´æ¥å‡ºç°åœ¨è¿™é‡Œï¼Œæ‰€ä»¥åŠ ä¸€ä¸ªå›è½¦ã€‚

å‡çº§ç‰ˆæœ¬åœ¨ä½¿ç”¨ssh-copy-idå‘½ä»¤çš„æ—¶å€™ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯ç›´æ¥è¾“å…¥å¯†ç ï¼Œå°±åƒåŸºçº¿ç‰ˆæœ¬ï¼›å¦ä¸€ç§æƒ…å†µæ˜¯ä¼šå…ˆæç¤ºæ·»åŠ ä¸»æœºåˆ°known_hostsã€‚
1ã€æ–°å»ºè„šæœ¬addkey.shï¼Œä¸»è¦ç›®çš„æ˜¯æµ‹è¯•ï¼Œå†…å®¹ä¸ºï¼š
#!/usr/bin/expect set timeout 60set password 123456spawn ssh-copy-id -i /home/test/.ssh/id_rsa.pub -p 22 test@192.168.56.101expect &#123;    #first connect, no public key in ~/.ssh/known_hosts    &quot;Are you sure you want to continue connecting (yes/no)?&quot; &#123;        send &quot;yes\r&quot;; exp_continue    &#125;    #already has public key in ~/.ssh/known_hosts    &quot;install the new keys&quot; &#123;        send &quot;\r&quot;; exp_continue    &#125;    &quot;password:&quot; &#123;        send &quot;$password\r&quot;; exp_continue    &#125;    &quot;Now try logging into the machine&quot; &#123;        #it has authorized, do nothing!        ; exp_continue    &#125;&#125;

2ã€æ‰§è¡Œè„šæœ¬chmod a+x addkey.sh
./addkey.sh
æ‰¹é‡ç‰ˆæœ¬1ã€å‡çº§è„šæœ¬ï¼Œæ–°å»ºaddkeys.shï¼Œå†…å®¹ä¸ºï¼š
#!/usr/bin/expect set timeout 60set password 123456for &#123;set i 101&#125; &#123;$i &lt; 201&#125; &#123;incr i&#125; &#123;    spawn ssh-copy-id -i /home/test/.ssh/id_rsa.pub -p 22 test@192.168.56.$i    expect &#123;        #first connect, no public key in ~/.ssh/known_hosts        &quot;Are you sure you want to continue connecting (yes/no)?&quot; &#123;            send &quot;yes\r&quot;; exp_continue        &#125;        #already has public key in ~/.ssh/known_hosts        &quot;install the new keys&quot; &#123;            send &quot;\r&quot;; exp_continue        &#125;        &quot;password:&quot; &#123;            send &quot;$password\r&quot;; exp_continue        &#125;        &quot;Now try logging into the machine&quot; &#123;            #it has authorized, do nothing!            ; exp_continue        &#125;    &#125;&#125;

2ã€æ‰§è¡Œè„šæœ¬chmod a+x addkeys.sh
./addkeys.sh
æ‰¹é‡åˆ é™¤æ·»åŠ å®Œå¯†é’¥ä¹‹åï¼Œå‘ç°éƒ¨åˆ†æœºå™¨ä¸èƒ½å…å¯†ç™»å½•ã€‚æ£€æŸ¥å®¢æˆ·æœºä¸­çš„authorized_keysæ–‡ä»¶ï¼Œå‘ç°æ·»åŠ äº†ä¸¤æ¬¡å¯†é’¥ã€‚äºæ˜¯å†³å®šåˆ é™¤é‡æ–°æ·»åŠ ã€‚
1ã€ç®¡ç†æœºæ–°å»ºè„šæœ¬delkeys.sh
#!/usr/bin/expect set timeout 30set password 123456for &#123;set i 101&#125; &#123;$i &lt; 201&#125; &#123;incr i&#125; &#123;    spawn ssh test@192.168.56.$i &quot;rm /home/test/.ssh/authorized_keys&quot;    expect &#123;        &quot;password:&quot; &#123; send &quot;$password\r&quot;&#125;        &quot;No route to host&quot; &#123; send &quot;\r&quot; &#125;    &#125; &#125;

2ã€æ‰§è¡Œè„šæœ¬chmod a+x delkeys.sh
./delkeys.sh
æ³¨æ„ï¼Œæ‰§è¡Œå®Œä¹‹åæ£€æŸ¥ä¸€ä¸‹æœ€åä¸€å°å®¢æˆ·æœºï¼Œä¹Ÿè®¸ä¼šåˆ é™¤å¤±è´¥ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆã€‚
æ‰¹é‡ä¿®æ”¹æƒé™åˆ é™¤åé‡æ–°æ·»åŠ ï¼Œä¾ç„¶æ— æ³•ç™»å½•ï¼Œåæ¥å‘ç°ï¼Œæ˜¯ç›®å½•æƒé™çš„é—®é¢˜ã€‚ç”¨æˆ·ç›®å½•æƒé™æ˜¯750ï¼Œ~/.sshæƒé™æ˜¯700ï¼Œ ~/.ssh/authorized_keysæƒé™æ˜¯600ã€‚
1ã€æƒé™ä¿®æ”¹è„šæœ¬chmods.sh
#!/usr/bin/expect set timeout 30set password 123456for &#123;set i 101&#125; &#123;$i &lt; 201&#125; &#123;incr i&#125; &#123;    spawn ssh test@192.168.56.$i -t &quot;sudo chmod 750 /home/test/ &amp;&amp; sudo chmod 700 /home/test/.ssh &amp;&amp; sudo chmod 600 /home/test/.ssh/authorized_keys&quot;    expect &#123;        &quot;password:&quot; &#123; send &quot;$password\r&quot;; exp_continue &#125;        &quot;password for test&quot; &#123; send &quot;$password\r&quot;; exp_continue &#125;        &quot;No route to host&quot; &#123; send &quot;\r&quot; &#125;    &#125;&#125;

2ã€æ‰§è¡Œè„šæœ¬chmod a+x chmods.sh
./chmods.sh
ä¿®æ”¹StrictModesè®¾ç½®å®Œæƒé™ï¼Œä¾ç„¶æ— æ³•å…å¯†ç™»å½•ï¼ŒçŒœæµ‹æ˜¯StrictModesçš„é—®é¢˜ã€‚
1ã€ç¼–è¾‘sshd_configsudo vi /etc/ssh/sshd_config
2ã€æ‰¾åˆ°StrictModes yesï¼Œæ”¹æˆStrictModes noã€‚
3ã€é‡å¯sshdï¼Œsudo service ssh restart
ç„¶åï¼Œä¾ç„¶å¤±è´¥ã€‚
è°ƒè¯•1ã€ä¸æœï¼Œè¿›è¡Œsshç™»å½•è°ƒè¯•ï¼Œssh -v test@192.168.56.102æˆ–è€…ssh -vvv test@192.168.56.102ã€‚
debug1: Authentications that can continue: publickey,passworddebug1: Next authentication method: publickeydebug1: Offering RSA public key: /home/test/.ssh/id_rsadebug1: Authentications that can continue: publickey,passworddebug1: Trying private key: /home/test/.ssh/id_dsadebug1: Trying private key: /home/test/.ssh/id_ecdsadebug1: Trying private key: /home/test/.ssh/id_ed25519debug1: Next authentication method: password

ä¸€ç•ªæŠ˜è…¾ï¼Œå¤±è´¥ï¼Œå¤±è´¥ï¼Œå¤±è´¥ã€‚ã€‚ã€‚
2ã€å‚è€ƒsshå…å¯†ç™»å½•å¤±è´¥é—®é¢˜æ’æŸ¥æ€è·¯ï¼Œåœ¨å®¢æˆ·æœºæŸ¥çœ‹æ—¥å¿—ï¼Œcat /var/log/auth.logã€‚
è°ƒè¯•æ–¹æ³•ï¼šï¼ˆ1ï¼‰å®¢æˆ·æœºæ‰§è¡Œtail -f /var/log/auth.logï¼ˆ2ï¼‰ç®¡ç†æœºæ‰§è¡Œssh -v test@192.168.56.102
ç„¶è€Œï¼Œå„ç§å°è¯•ä¾ç„¶å¤±è´¥ï¼Œå¤±è´¥ï¼Œå¤±è´¥ã€‚ã€‚ã€‚
3ã€ç„¶åæ‰¾åˆ°ä¸€ç¯‡é‡å»ºhomeåˆ†åŒºåå‡ºç°çš„sshå…¬é’¥è®¤è¯å¤±è´¥é—®é¢˜ï¼ŒçŒœæµ‹æ˜¯SElinuxçš„é—®é¢˜ï¼Œäºæ˜¯åœ¨å®¢æˆ·æœºæ‰§è¡Œï¼š
sudo apt-get install policycoreutils
restorecon -r -vv /home/
ç„¶è€Œï¼Œä¾ç„¶æ²¡æœ‰ç”¨ã€‚
ä½¿ç”¨dsaå¯†é’¥1ã€ç”Ÿæˆdsaå¯†é’¥ssh-keygen -t dsa -P &#39;&#39; -f ~/.ssh/id_dsa
2ã€æ·»åŠ å…¬é’¥åˆ°å®¢æˆ·æœºssh-copy-id -i /home/test/.ssh/id_dsa.pub -p 22 test@192.168.56.102
3ã€ç®¡ç†æœºæµ‹è¯•ç™»å½•ssh test@192.168.56.102
ä¾ç„¶å¤±è´¥ã€‚æ¢ä¸€ä¸ªç®¡ç†æœºé‡æ–°æ·»åŠ å¯†é’¥ï¼Œä¾ç„¶å¤±è´¥ï¼Œçœ‹æ¥ç¡®å®æ˜¯å®¢æˆ·æœºçš„é”…ã€‚å¥½å§ï¼Œæ”¾å¼ƒäº†ï¼Œä¸ç©äº†ï¼
è®¾ç½®sudoå…å¯†ä»¥ä¸Šï¼Œå‡è®¾å·²ç»å®ç°äº†æ‰¹é‡æ·»åŠ å¯†é’¥ï¼Œä¹Ÿå°±æ˜¯å®ç°äº†æ‰€æœ‰å®¢æˆ·æœºçš„å…å¯†ç™»å½•ã€‚ä½†æ˜¯ï¼Œåœ¨å®¢æˆ·æœºæ‰§è¡Œsudoå‘½ä»¤çš„æ—¶å€™ï¼Œä¼šæç¤ºè¾“å…¥å¯†ç ï¼Œä¹Ÿæ˜¯å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥è®¾ç½®sudoå…å¯†æ‰§è¡Œã€‚
1ã€ç®¡ç†æœºæ–°å»ºè„šæœ¬addsudo.shï¼Œå†…å®¹ä¸ºï¼š
#!/usr/bin/expect set timeout 10set password 123456for &#123;set i 101&#125; &#123;$i &lt;= 200&#125; &#123;incr i&#125; &#123;    spawn ssh test@192.168.56.$i -t &quot;sudo -i&quot;    expect &quot;password for test:&quot;    send &quot;$password\r&quot;    expect &quot;*#&quot;    send &quot;echo test ALL = NOPASSWD: ALL &gt;&gt; /etc/sudoers \r&quot;    expect &quot;*#&quot;    send &quot;exit\r&quot;&#125;

2ã€æ‰§è¡Œè„šæœ¬chmod a+x addsudo.sh
./addsudo.sh
æ‰¹é‡ä¿®æ”¹å¯†ç ã€Šæ‰¹é‡ä¿®æ”¹å¯†ç ã€‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨çš„ä¿®æ”¹å¯†ç çš„æ–¹å¼æ˜¯ç»™æ‰€æœ‰çš„å®¢æˆ·æœºéƒ½å®‰è£…expectï¼Œç„¶åå‘é€è„šæœ¬åˆ°å®¢æˆ·æœºå¹¶æ‰§è¡Œè„šæœ¬ã€‚ç»™æ¯å°æœºå™¨å®‰è£…expectï¼Œä¸æ˜¯ä¸€ä¸ªå¥½çš„åšæ³•ã€‚ä¸å¦¨å‚ç…§è®¾ç½®sudoå…å¯†ï¼Œåœ¨ç®¡ç†æœºæ‰§è¡Œè„šæœ¬ï¼Œè™½ç„¶æ— æ³•å¹¶è¡Œï¼Œä½†æ˜¯èƒœåœ¨ä¸éœ€è¦ç»™å®¢æˆ·æœºå®‰è£…expectã€‚
ä¸è¿‡ï¼Œè¿™æ¬¡æˆ‘ä»¬æ¢ä¸€ç§è„šæœ¬å†™æ³•ï¼Œä½¿ç”¨bashè„šæœ¬å¾ªç¯è°ƒç”¨expectè„šæœ¬ã€‚è¿™ç§å†™æ³•æ›´å¥½ï¼Œæ›´åŠ ç¨³å®šã€‚å› ä¸ºåœ¨expectè„šæœ¬ä¸­å†™å¾ªç¯è¯­å¥ï¼Œæœ‰äº›å­—ç¬¦ä¸²ä¼šä¸æ˜¾ç¤ºï¼Œå½±å“æ‰§è¡Œæ•ˆæœã€‚
1ã€æ–°å»ºexpectè„šæœ¬m-chpasswd.sh
#!/usr/bin/expect set timeout 10set newpassword 12345678set i [lindex $argv 0]spawn ssh test@192.168.56.$i -t &quot;sudo passwd test&quot;expect &quot;Enter new UNIX password:&quot;send &quot;$newpassword\r&quot;expect &quot;Retype new UNIX password:&quot;send &quot;$newpassword\r&quot;expect &quot;closed&quot; send &quot;\r&quot;expect eof

2ã€æ–°å»ºbashè„šæœ¬loop-passwd.sh
#!/bin/bashfor ((i=101;i&lt;=200;i++))do    echo &quot;begin...&quot;    echo $i    ./m-chpasswd.sh $i    echo &quot;end...&quot;done

3ã€æ‰§è¡Œè„šæœ¬chmod a+x m-chpasswd.sh
chmod a+x loop-passwd.sh
./loop-passwd.sh
æ‰¹é‡ä¿®æ”¹hostsã€Šæ‰¹é‡ä¿®æ”¹hostnameã€‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬ç»™ä¸‰å°æœºå™¨è®¾ç½®äº†ä¸»æœºåï¼Œæ¯”è¾ƒç®€å•ã€‚ç°åœ¨å‡è®¾æˆ‘ä»¬æœ‰100å°æœºå™¨éœ€è¦ç®¡ç†ï¼ŒIPä¸º192.168.56.101-200ï¼Œç°åœ¨è¦ç»™å®ƒä»¬è®¾ç½®ä¸»æœºåï¼ŒåŒæ—¶ä¿®æ”¹å®ƒä»¬çš„/etc/hostsæ–‡ä»¶ï¼Œæ–¹ä¾¿ä½¿ç”¨ä¸»æœºåç›¸äº’å¯»æ‰¾ã€‚
è‡ªåŠ¨ç”Ÿæˆhosts1ã€åœ¨ç®¡ç†æœºæ–°å»ºè„šæœ¬makehosts.shï¼Œå†…å®¹ä¸ºï¼š
#!/bin/bashecho &quot;127.0.0.1    localhost&quot; &gt; /home/test/hostsNUM=101while [ $NUM -lt 201 ]do    echo &quot;192.168.56.$NUM    vk$NUM&quot; &gt;&gt; /home/test/hosts    NUM=`expr $NUM + 1`done

2ã€æ‰§è¡Œè„šæœ¬sudo chmod a+x makehosts.sh
./makehosts.sh
3ã€æ›¿æ¢hostssudo cp hosts /etc/hosts
PSï¼šæ·»åŠ ä¸€æ¡æ–°çš„è®°å½•åˆ° /etc/hosts ï¼Œsudo bash -c &quot;echo 192.168.56.201 vk201 &gt;&gt; /etc/hosts&quot;
ä¿®æ”¹å®¢æˆ·æœºhosts1ã€æ‹·è´hostsæ–‡ä»¶åˆ°å®¢æˆ·æœºpscp -h hosts.txt ./hosts /home/test
2ã€æ›¿æ¢hostsæ–‡ä»¶pssh -h hosts.txt -i &quot;sudo cp /home/test/hosts /etc/hosts&quot;
åè®°æœ¬æ–‡åœ¨å†™ä½œä¹‹å‰ï¼Œæ€è·¯å¾ˆæ˜ç¡®ï¼Œä»¥ä¸ºå¯ä»¥åŠå¤©æå®šï¼Œæ²¡æƒ³åˆ°é‡åˆ°äº†ä¸€ä¸ªå¤§å‘ï¼šéƒ¨åˆ†æœºå™¨æ— æ³•å…å¯†ç™»å½•ã€‚å¤§å¤§å°å°è¯•äº†åå‡ ç§è§£å†³åŠæ³•ï¼Œæœªæœï¼ŒæŠ˜è…¾äº†ä¸€æ•´å¤©ï¼Œè¿˜æ˜¯æ— å¥ˆæ”¾å¼ƒã€‚
è®¾ç½®sudoå…å¯†æ—¶è¿˜æœ‰ä¸€ä¸ªæ–¹æ¡ˆï¼Œå°±æ˜¯å†™ä¸€ä¸ªè„šæœ¬å‘é€åˆ°å®¢æˆ·æœºï¼Œåœ¨å®¢æˆ·æœºæ‰§è¡Œä¿®æ”¹/etc/sudoersæ–‡ä»¶ã€‚ä½†æ˜¯è¦æ±‚æ‰€æœ‰å®¢æˆ·æœºéƒ½å®‰è£…äº†expectï¼Œè¿™ä¸ªå¾ˆéº»çƒ¦ï¼Œä¸å¦‚åœ¨ç®¡ç†æœºæ“ä½œã€‚
20180614æ›´æ–°ä»Šå¤©ï¼Œçªç„¶å†’å‡ºä¸€ä¸ªæƒ³æ³•ï¼Œå¦‚æœæ¢ä¸€ä¸ªç”¨æˆ·å‘¢ï¼Ÿä¸å†ç”¨testï¼Œè€Œæ˜¯ä½¿ç”¨test2ç”¨æˆ·ã€‚äºæ˜¯ï¼Œè¿›è¡Œäº†æµ‹è¯•ã€‚
1ã€å®¢æˆ·æœºæ–°å»ºtest2ç”¨æˆ·sudo useradd -m test2 -s /bin/bash
sudo passwd test2
æ ¹æ®éœ€è¦ç»™äºˆsudoæƒé™ï¼Œsudo adduser test2 sudo
2ã€ç®¡ç†æœºæ·»åŠ å…å¯†ç™»å½•ssh-copy-id -i .ssh/id_rsa.pub -p 22 test2@192.168.56.102
3ã€æµ‹è¯•ç™»å½•ssh test2@192.168.56.102
ç™»å½•æˆåŠŸï¼ï¼ï¼
é‚£ä¹ˆï¼Œå¦‚æœæˆ‘åˆ é™¤testç”¨æˆ·ï¼Œå†æ·»åŠ æ–°çš„testç”¨æˆ·ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥å‘¢ï¼Ÿ
1ã€å®¢æˆ·æœºåˆ é™¤testç”¨æˆ·sudo userdel -r testæç¤ºuserdel: user test is currently used by process 62901
2ã€æŸ¥çœ‹æœ€è¿‘ç™»å½•æƒ…å†µwï¼Œlast
å¹¶æ²¡æœ‰äººåœ¨ä½¿ç”¨è¿™ä¸ªè´¦å·ï¼Œé‚£å°±ç»§ç»­æƒ³åŠæ³•åˆ é™¤ã€‚
3ã€ä½¿ç”¨vipwsudo vipwï¼Œæ‰¾åˆ°testç”¨æˆ·é‚£è¡Œï¼Œåˆ é™¤ã€‚
sudo vipw -sï¼Œæ‰¾åˆ°testç”¨æˆ·é‚£è¡Œï¼Œåˆ é™¤ã€‚
4ã€åˆ é™¤testç›®å½•cd /home &amp;&amp; sudo rm -rf test
5ã€æ–°å»ºtestç”¨æˆ·sudo useradd -m test -g test -s /bin/bash
sudo passwd test
sudo adduser test sudo
7ã€ç®¡ç†æœºæ·»åŠ å…å¯†ç™»å½•ssh-copy-id -i .ssh/id_rsa.pub -p 22 test@192.168.56.102
8ã€æµ‹è¯•ç™»å½•ssh test@192.168.56.102
ç™»å½•æˆåŠŸï¼ï¼ï¼é—®é¢˜å®Œç¾ç»“å±€ï¼Œä¸è¿‡ç¡®å®å¾ˆéº»çƒ¦ã€‚
å¦‚æœï¼Œå•çº¯åœ°æ‹·è´å…¶ä»–å®¢æˆ·æœºçš„æ•´ä¸ªtestç”¨æˆ·ç›®å½•å‘¢ï¼Ÿå‡è®¾å®¢æˆ·æœºAçš„IPä¸º192.168.56.102ï¼Œå·²ç»é…ç½®å®Œæˆï¼Œå¯ä»¥å…å¯†ç™»å½•ï¼›å®¢æˆ·æœºBçš„IPä¸º192.168.56.103ï¼Œä¸å¯ä»¥å…å¯†ç™»å½•ã€‚
1ã€åˆ é™¤å®¢æˆ·æœºBçš„testç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶rf -rf ./*
rf -rf ./.*
2ã€æ‹·è´é…ç½®å¥½çš„å®¢æˆ·æœºAçš„testç›®å½•åˆ°å®¢æˆ·æœºBscp test@192.168.56.102:~/.* .
scp test@192.168.56.102:~/.ssh/* .ssh/
3ã€åœ¨ç®¡ç†æœºæµ‹è¯•ç™»å½•ssh test@192.168.56.103
ç™»å½•æˆåŠŸï¼ï¼ï¼è¿™ä¸ªæ–¹æ³•æ˜æ˜¾æ›´å¥½ï¼Œniceã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>pssh</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxè®¾ç½®é‚®ä»¶æé†’</title>
    <url>/dev-linux-mail/</url>
    <content><![CDATA[å‰è¨€ã€ŠLinuxè®¾ç½®å®šæ—¶ä»»åŠ¡ã€‹ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†ä½¿ç”¨crontabè®¾ç½®å®šæ—¶ä»»åŠ¡çš„æ–¹æ³•ï¼Œå¹¶ç”¨å®ƒæ¥è·å–gangliaçš„è¿è¡ŒçŠ¶æ€ã€‚è¿™æ ·è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬æƒ³è¦åœ¨gangliaçš„è¿è¡ŒçŠ¶æ€å‡ºç°é—®é¢˜æ—¶é€šçŸ¥æˆ‘ä»¬ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±ä¸ç”¨æ¯å¤©è‡ªå·±æŸ¥çœ‹æ—¥å¿—äº†ã€‚
æœ¬æ–‡ä¸»è¦å‚è€ƒUbuntu mailå‘½ä»¤å‘é€é‚®ä»¶ å’Œ å¦‚ä½•é€šè¿‡Shellè„šæœ¬å®ç°å‘é€é‚®ä»¶é€šçŸ¥åŠŸèƒ½ï¼Ÿã€‚


å®‰è£…é…ç½®mailubuntu1ã€å®‰è£…mailutilssudo apt-get install mailutils
2ã€General type of mail configuration é€‰æ‹© Internet Site
3ã€System mail name è¾“å…¥ mail.voidking.com
centos7å®‰è£…é…ç½®è¿‡ç¨‹å‚è€ƒ Centos 7 å®‰è£… Mailå‘é€é‚®ä»¶
1ã€è·å–å‘é€è€…é‚®ç®±æˆæƒå¯†ç ç™»å½• https://mail.163.comè®¾ç½®ï¼ŒPOP3/SMTP/IMAPï¼Œæˆæƒå¯†ç ç®¡ç†
æˆæƒç æ˜¯ç”¨äºç™»å½•ç¬¬ä¸‰æ–¹é‚®ä»¶å®¢æˆ·ç«¯çš„ä¸“ç”¨å¯†ç ã€‚é€‚ç”¨äºç™»å½•ä»¥ä¸‹æœåŠ¡: æ‚¨å¼€å¯çš„æœåŠ¡ï¼ˆä¾‹å¦‚POP3/IMAP/SMTPï¼‰ã€Exchange/CardDAV/CalDAVæœåŠ¡ã€‚
2ã€å®‰è£…é‚®ä»¶MUAyum install -y mailx
3ã€é…ç½® /etc/mail.rcï¼Œåœ¨å°¾éƒ¨æ·»åŠ ï¼š
set from=quizthink@163.comset smtp=smtps://smtp.163.com:465set smtp-auth=loginset smtp-auth-user=quizthink@163.comset smtp-auth-password=xxxset ssl-verify=ignoreset nss-config-dir=/root/.certs

ä¸è¦ä½¿ç”¨25ç«¯å£ï¼Œé˜¿é‡Œäº‘æœåŠ¡å™¨å’Œ163é‚®ä»¶æœåŠ¡å™¨25ç«¯å£ä¸é€šã€‚
4ã€é…ç½®æ•°å­—è¯ä¹¦
mkdir -p /root/.certs/echo -n | openssl s_client -connect smtp.163.com:465 | sed -ne &#x27;/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p&#x27; &gt; ~/.certs/163.crtcertutil -A -n &quot;GeoTrust SSL CA&quot; -t &quot;C,,&quot; -d ~/.certs -i ~/.certs/163.crtcertutil -A -n &quot;GeoTrust Global CA&quot; -t &quot;C,,&quot; -d ~/.certs -i ~/.certs/163.crtcertutil -L -d /root/.certscd /root/.certs/certutil -A -n &quot;GeoTrust SSL CA - G3&quot; -t &quot;Pu,Pu,Pu&quot; -d ./ -i 163.crt

5ã€æµ‹è¯•å‘é€é‚®ä»¶echo &#39;Welcome to mail worldï¼&#39; | mail -s &quot;Hello VoidKing&quot; voidking@qq.comæŸ¥çœ‹é‚®ç®±ï¼Œæ­£å¸¸çš„è¯åº”è¯¥å·²ç»æ”¶åˆ°é‚®ä»¶äº†ã€‚å¦‚æœæ²¡æœ‰æ”¶åˆ°é‚®ä»¶ï¼Œå¯ä»¥æŸ¥çœ‹æ—¥å¿—è¿›è¡Œæ’æŸ¥ï¼štail /var/log/maillog
macoså‚è€ƒæ–‡æ¡£ï¼šã€ŠMacOSé…ç½®å‘é€é‚®ä»¶ã€‹
mailå‘½ä»¤å‘½ä»¤æ ¼å¼mail [OPTION...] [address...]å¸¸ç”¨åˆ°çš„é€‰é¡¹ï¼Œä¸€ä¸ªæ˜¯sï¼Œä»£è¡¨ä¸»é¢˜ï¼›ä¸€ä¸ªæ˜¯Aï¼Œä»£è¡¨é™„ä»¶ã€‚å…¶ä»–çš„éœ€è¦æ—¶æŸ¥çœ‹helpã€‚
å‘é€æ™®é€šé‚®ä»¶ç›®æ ‡ï¼šç»™é‚®ç®± &#x76;&#111;&#105;&#100;&#107;&#x69;&#110;&#x67;&#x40;&#x71;&#x71;&#x2e;&#99;&#111;&#109; å‘é€é‚®ä»¶ï¼Œä¸»é¢˜ä¸ºâ€œHello VoidKingâ€ï¼Œå†…å®¹ä¸ºâ€œWelcome to mail worldï¼â€
echo &#39;Welcome to mail worldï¼&#39; | mail -s &quot;Hello VoidKing&quot; voidking@qq.com
ä½†æ˜¯ï¼Œç­‰å¾…äº†å‡ åˆ†é’Ÿï¼Œå¹¶æ²¡æœ‰æ”¶åˆ°é‚®ä»¶ï¼Œåƒåœ¾ç®±ä¹Ÿæ²¡æœ‰ã€‚mailï¼ŒæŸ¥çœ‹emailçš„å‘é€çŠ¶æ€ä¸ºUndelivered Mail Returnedï¼ŒåŸæ¥æ²¡æœ‰æŠ•é€’å‡ºå»ã€‚
æŸ¥çœ‹é‚®ä»¶ç³»ç»Ÿæ—¥å¿—ï¼štail -n 50 /var/spool/mail/testæç¤ºhost mx3.qq.com[183.57.48.35] said: 550 Mail content deniedã€‚çœ‹æ¥qqé‚®ç®±çš„åƒåœ¾é‚®ä»¶é˜²å¾¡æœºåˆ¶åšçš„ä¸é”™ï¼Œé‚£å°±æ¢ä¸ª163é‚®ç®±ï¼Œæ²¡æƒ³åˆ°ä¾ç„¶å¤±è´¥ã€‚
æ¢ä¸€å°æœåŠ¡å™¨ï¼Ÿå‘é€ç»™ &#x76;&#111;&#x69;&#x64;&#x6b;&#105;&#x6e;&#103;&#x40;&#113;&#x71;&#x2e;&#x63;&#x6f;&#x6d; ï¼ŒæˆåŠŸï¼å¾ˆå°´å°¬ã€‚ã€‚ã€‚å°±è¿™ä¹ˆç€å§
å‘é€é«˜çº§é‚®ä»¶1ã€ä»æ–‡æœ¬è¯»å…¥å†…å®¹å‘é€é‚®ä»¶mail -s &#39;Error report&#39; voidking@qq.com &lt; /tmp/log/ganglia/error-20180524.log
2ã€å‘é€é™„ä»¶mail -s &#39;Error report&#39; voidking@qq.com -A /tmp/log/ganglia/ganglia-20180524.log &lt; /tmp/log/ganglia/error-20180524.log
3ã€æŒ‡å®šå‘ä»¶äººecho &#39;Welcome to mail worldï¼&#39; | mail -s &quot;Hello VoidKing&quot; voidking@qq.com -aFrom:haojin@qq.com
å¤±è´¥äº†ï¼Œæ”¶ä¸åˆ°é‚®ä»¶ï¼Œä¸çŸ¥é“ä»€ä¹ˆåŸå› ï¼Œç•™ä¸ªå‘å§ã€‚
è®¾ç½®é‚®ä»¶æé†’ç›®æ ‡ï¼šæ¯å¤©è·å–ä¸€æ¬¡gangliaçš„çŠ¶æ€æ—¥å¿—ï¼Œç„¶åé€šè¿‡checkganglia.shè„šæœ¬è¿›è¡Œå®¡é˜…ã€‚å®¡é˜…å®Œæ¯•ï¼Œå‘é€å®¡é˜…ç»“æœåˆ°ç®¡ç†å‘˜çš„é‚®ç®±ã€‚
ä¿®æ”¹checkganglia.shè„šæœ¬ä¸ºï¼š
#!/bin/bashDATE=`date +%Y%m%d`filename=&quot;ganglia-$&#123;DATE&#125;.log&quot;prefix=&quot;ganglia-$&#123;DATE&#125;&quot;hosts=`grep test@ /tmp/log/ganglia/$&#123;filename&#125; | wc -l`pids=`grep gmond.pid /tmp/log/ganglia/$&#123;filename&#125; | wc -l`if [ $&#123;hosts&#125; != 10 ]then    echo &quot;Some hosts are offline!&quot; &gt;&gt; /tmp/log/ganglia/error-$&#123;DATE&#125;.logfiif [ $&#123;hosts&#125; != $&#123;pids&#125; ]then    echo &quot;Some ganglia services have stopped!&quot; &gt;&gt; /tmp/log/ganglia/error-$&#123;DATE&#125;.log    cd /tmp/log/ganglia/    csplit /tmp/log/ganglia/$&#123;filename&#125; /test@/ -n2 -s &#123;*&#125; -f $&#123;prefix&#125; -b &quot;.log.%02d&quot;    rm $&#123;prefix&#125;.log.00    for file in /tmp/log/ganglia/$&#123;prefix&#125;.log.*    do     if [ -f &quot;$&#123;file&#125;&quot; ]    then        #echo &quot;$&#123;file&#125; is file&quot;        if [ `grep gmond.pid $&#123;file&#125; | wc -l` == 0 ]        then            echo `grep test@ $&#123;file&#125;` &gt;&gt; /tmp/log/ganglia/error-$&#123;DATE&#125;.log        fi    fi    donefi# mail infoif [ ! -f &quot;/tmp/log/ganglia/error-$&#123;DATE&#125;.log&quot; ]then    mail -s &quot;HappyDay$&#123;DATE&#125;&quot; voidking@qq.com &lt;&lt;&lt; &quot;All services are running!&quot;else    mail -s &quot;SadDay$&#123;DATE&#125;&quot; voidking@qq.com -A /tmp/log/ganglia/ganglia-$&#123;DATE&#125;.log &lt; /tmp/log/ganglia/error-$&#123;DATE&#125;.logfi

åè®°è‡³æ­¤ï¼Œå¤§åŠŸå‘Šæˆï¼ã€ŠLinuxè®¾ç½®å®šæ—¶ä»»åŠ¡ã€‹é…åˆã€ŠLinuxè®¾ç½®é‚®ä»¶æé†’ã€‹ï¼Œç®€ç›´å®Œç¾ï¼ä¸¤ç¯‡æ–‡ç« å®Œæˆäº†ä¸€ä¸ªå°ç³»ç»Ÿï¼šå®šæ—¶ç”Ÿæˆgangliaæ—¥å¿—ï¼Œå®šæ—¶å®¡é˜…gangliaæ—¥å¿—ï¼Œå¹¶ä¸”æŠŠå®¡é˜…ç»“æœé€šè¿‡é‚®ä»¶å‘é€ç»™ç®¡ç†å‘˜ã€‚
ä¹¦ç­¾Linuxå‘½ä»¤å¤§å…¨â€”â€”LMNOPQ
å¦‚ä½•åœ¨Ubuntuç¯å¢ƒä¸‹æ­å»ºé‚®ä»¶æœåŠ¡å™¨ï¼ˆä¸€ï¼‰
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxè®¾ç½®å®šæ—¶ä»»åŠ¡</title>
    <url>/dev-linux-crontab/</url>
    <content><![CDATA[å‰è¨€å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å®šæ—¶æ‰§è¡Œä¸€äº›ä»»åŠ¡ï¼Œæˆ–è€…éœ€è¦å®šæ—¶æ‰§è¡Œä¸€äº›æ‰¹é‡ä»»åŠ¡ã€‚æœ¬æ–‡æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹linuxè®¾ç½®å®šæ—¶ä»»åŠ¡çš„æ–¹æ³•ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Linux Crontab å®šæ—¶ä»»åŠ¡
Linuxå®šæ—¶ä»»åŠ¡Crontabå‘½ä»¤è¯¦è§£
Linux å®šæ—¶ä»»åŠ¡è¯¦è§£
Linux å®šæ—¶ä»»åŠ¡è°ƒåº¦(crontab)ï¼Œå¤ªå®ç”¨äº†ï¼



ç†è®ºç¯‡crondç®€ä»‹cronï¼ˆcrondï¼‰æ˜¯linuxä¸‹ç”¨æ¥å‘¨æœŸæ€§çš„æ‰§è¡ŒæŸç§ä»»åŠ¡æˆ–ç­‰å¾…å¤„ç†æŸäº›äº‹ä»¶çš„ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ã€‚linuxç³»ç»Ÿä¸Šé¢åŸæœ¬å°±æœ‰éå¸¸å¤šçš„è®¡åˆ’æ€§å·¥ä½œï¼Œå› æ­¤è¿™ä¸ªç³»ç»ŸæœåŠ¡æ˜¯é»˜è®¤å¯åŠ¨çš„ã€‚crondè¿›ç¨‹æ¯åˆ†é’Ÿä¼šå®šæœŸæ£€æŸ¥æ˜¯å¦æœ‰è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¦‚æœæœ‰è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œåˆ™è‡ªåŠ¨æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚å¦å¤–ï¼Œç”±äºä½¿ç”¨è€…è‡ªå·±ä¹Ÿå¯ä»¥è®¾ç½®è®¡åˆ’ä»»åŠ¡ï¼Œæ‰€ä»¥ï¼Œlinuxç³»ç»Ÿä¹Ÿæä¾›äº†ä½¿ç”¨è€…æ§åˆ¶è®¡åˆ’ä»»åŠ¡çš„å‘½ä»¤ï¼šcrontabå‘½ä»¤ã€‚
crontabå‘½ä»¤æ˜¯cron tableçš„ç®€å†™ï¼Œå®ƒæ˜¯cronçš„é…ç½®æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥å«å®ƒä½œä¸šåˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»¥ä¸‹æ–‡ä»¶å¤¹å†…æ‰¾åˆ°ç›¸å…³é…ç½®æ–‡ä»¶ã€‚

/var/spool/cron/crontabs/ ç›®å½•ä¸‹å­˜æ”¾çš„æ˜¯æ¯ä¸ªç”¨æˆ·åŒ…æ‹¬rootçš„crontabä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡ä»¥åˆ›å»ºè€…çš„åå­—å‘½åã€‚
/etc/crontab è¿™ä¸ªæ–‡ä»¶è´Ÿè´£è°ƒåº¦å„ç§ç®¡ç†å’Œç»´æŠ¤ä»»åŠ¡ã€‚
/etc/cron.d/ è¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾ä»»ä½•è¦æ‰§è¡Œçš„crontabæ–‡ä»¶æˆ–è„šæœ¬ã€‚
æˆ‘ä»¬è¿˜å¯ä»¥æŠŠè„šæœ¬æ”¾åœ¨/etc/cron.hourlyã€/etc/cron.dailyã€/etc/cron.weeklyã€/etc/cron.monthlyç›®å½•ä¸­ï¼Œè®©å®ƒæ¯å°æ—¶/å¤©/æ˜ŸæœŸ/æœˆæ‰§è¡Œä¸€æ¬¡ã€‚

linuxä¸‹çš„ä»»åŠ¡è°ƒåº¦åˆ†ä¸ºä¸¤ç±»ï¼Œç³»ç»Ÿä»»åŠ¡è°ƒåº¦å’Œç”¨æˆ·ä»»åŠ¡è°ƒåº¦ã€‚
ç³»ç»Ÿä»»åŠ¡è°ƒåº¦ï¼šç³»ç»Ÿå‘¨æœŸæ€§æ‰€è¦æ‰§è¡Œçš„å·¥ä½œï¼Œæ¯”å¦‚å†™ç¼“å­˜æ•°æ®åˆ°ç¡¬ç›˜ã€æ—¥å¿—æ¸…ç†ç­‰ã€‚/etc/crontabæ–‡ä»¶å°±æ˜¯ç³»ç»Ÿä»»åŠ¡è°ƒåº¦çš„é…ç½®æ–‡ä»¶ã€‚
ç”¨æˆ·ä»»åŠ¡è°ƒåº¦ï¼šç”¨æˆ·å®šæœŸè¦æ‰§è¡Œçš„å·¥ä½œï¼Œæ¯”å¦‚ç”¨æˆ·æ•°æ®å¤‡ä»½ã€å®šæ—¶é‚®ä»¶æé†’ç­‰ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨ crontab å·¥å…·æ¥å®šåˆ¶è‡ªå·±çš„è®¡åˆ’ä»»åŠ¡ã€‚æ‰€æœ‰ç”¨æˆ·å®šä¹‰çš„crontabæ–‡ä»¶éƒ½è¢«ä¿å­˜åœ¨ /var/spool/cron/crontabs/ç›®å½•ä¸­ï¼Œå…¶æ–‡ä»¶åä¸ç”¨æˆ·åä¸€è‡´ã€‚
crontabæ–‡ä»¶å‡è®¾æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯Ubuntu14.04.5 Serverç‰ˆï¼ŒæŸ¥çœ‹/etc/crontabï¼Œå†…å®¹ä¸ºï¼š
# /etc/crontab: system-wide crontab# Unlike any other crontab you don&#x27;t have to run the `crontab&#x27;# command to install the new version when you edit this file# and files in /etc/cron.d. These files also have username fields,# that none of the other crontabs do.SHELL=/bin/shPATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin# m h dom mon dow user  command17 *    * * *   root    cd / &amp;&amp; run-parts --report /etc/cron.hourly25 6    * * *   root    test -x /usr/sbin/anacron || ( cd / &amp;&amp; run-parts --report /etc/cron.daily )47 6    * * 7   root    test -x /usr/sbin/anacron || ( cd / &amp;&amp; run-parts --report /etc/cron.weekly )52 6    1 * *   root    test -x /usr/sbin/anacron || ( cd / &amp;&amp; run-parts --report /etc/cron.monthly )

ç¬¬ä¸€è¡ŒSHELLå˜é‡æŒ‡å®šäº†ç³»ç»Ÿè¦ä½¿ç”¨å“ªä¸ªshellï¼›ç¬¬äºŒè¡ŒPATHå˜é‡æŒ‡å®šäº†ç³»ç»Ÿæ‰§è¡Œ å‘½ä»¤çš„è·¯å¾„ã€‚æ¥ä¸‹æ¥çš„å‘½ä»¤æ ¼å¼ä¸ºï¼šm h dom mon dow user  commandè‹±æ–‡å…¨æ‹¼ä¸ºï¼šminute hour day month week user commond

minuteï¼šè¡¨ç¤ºåˆ†é’Ÿï¼Œå¯ä»¥æ˜¯ä»0åˆ°59ä¹‹é—´çš„ä»»ä½•æ•´æ•°ã€‚
hourï¼šè¡¨ç¤ºå°æ—¶ï¼Œå¯ä»¥æ˜¯ä»0åˆ°23ä¹‹é—´çš„ä»»ä½•æ•´æ•°ã€‚
dayï¼šè¡¨ç¤ºæ—¥æœŸï¼Œå¯ä»¥æ˜¯ä»1åˆ°31ä¹‹é—´çš„ä»»ä½•æ•´æ•°ã€‚
monthï¼šè¡¨ç¤ºæœˆä»½ï¼Œå¯ä»¥æ˜¯ä»1åˆ°12ä¹‹é—´çš„ä»»ä½•æ•´æ•°ã€‚
weekï¼šè¡¨ç¤ºæ˜ŸæœŸå‡ ï¼Œå¯ä»¥æ˜¯ä»0åˆ°7ä¹‹é—´çš„ä»»ä½•æ•´æ•°ï¼Œè¿™é‡Œçš„0æˆ–7ä»£è¡¨æ˜ŸæœŸæ—¥ã€‚
userï¼šè¡¨ç¤ºç”¨æˆ·ã€‚
commandï¼šè¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥æ˜¯ç³»ç»Ÿå‘½ä»¤ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå·±ç¼–å†™çš„è„šæœ¬æ–‡ä»¶ã€‚

æ³¨æ„ï¼Œ/var/spool/cronç›®å½•ä¸­çš„ç”¨æˆ·è°ƒåº¦ä»»åŠ¡ï¼Œæ²¡æœ‰userä¸€é¡¹ï¼Œå› ä¸ºæ–‡ä»¶åå·²ç»ä»£è¡¨äº†userã€‚
åœ¨ä»¥ä¸Šå„ä¸ªå­—æ®µä¸­ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç‰¹æ®Šå­—ç¬¦ï¼š

æ˜Ÿå·ï¼ˆ*ï¼‰ï¼šä»£è¡¨æ‰€æœ‰å¯èƒ½çš„å€¼ï¼Œä¾‹å¦‚monthå­—æ®µå¦‚æœæ˜¯æ˜Ÿå·ï¼Œåˆ™è¡¨ç¤ºåœ¨æ»¡è¶³å…¶å®ƒå­—æ®µçš„åˆ¶çº¦æ¡ä»¶åæ¯æœˆéƒ½æ‰§è¡Œè¯¥å‘½ä»¤æ“ä½œã€‚
é€—å·ï¼ˆ,ï¼‰ï¼šå¯ä»¥ç”¨é€—å·éš”å¼€çš„å€¼æŒ‡å®šä¸€ä¸ªåˆ—è¡¨èŒƒå›´ï¼Œä¾‹å¦‚ï¼Œâ€œ1,2,5,7,8,9â€
ä¸­æ ï¼ˆ-ï¼‰ï¼šå¯ä»¥ç”¨æ•´æ•°ä¹‹é—´çš„ä¸­æ è¡¨ç¤ºä¸€ä¸ªæ•´æ•°èŒƒå›´ï¼Œä¾‹å¦‚â€œ2-6â€è¡¨ç¤ºâ€œ2,3,4,5,6â€
æ­£æ–œçº¿ï¼ˆ/ï¼‰ï¼šå¯ä»¥ç”¨æ­£æ–œçº¿æŒ‡å®šæ—¶é—´çš„é—´éš”é¢‘ç‡ï¼Œä¾‹å¦‚â€œ0-23/2â€è¡¨ç¤ºæ¯ä¸¤å°æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚
åŒæ—¶æ­£æ–œçº¿å¯ä»¥å’Œæ˜Ÿå·ä¸€èµ·ä½¿ç”¨ï¼Œä¾‹å¦‚*/10ï¼Œå¦‚æœç”¨åœ¨minuteå­—æ®µï¼Œè¡¨ç¤ºæ¯ååˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ã€‚

crontabå‘½ä»¤crontabå‘½ä»¤æ ¼å¼ä¸ºï¼šcrontab [-u username] [file] [ -e | -l | -r ]

-u usernameï¼ŒæŒ‡å®šè®¾ç½®æŸä¸ªç”¨æˆ·çš„crontabï¼Œçœç•¥åˆ™è¡¨ç¤ºæ“ä½œå½“å‰ç”¨æˆ·çš„crontabã€‚
fileï¼Œå°†fileåšä¸ºcrontabçš„ä»»åŠ¡åˆ—è¡¨æ–‡ä»¶å¹¶è½½å…¥crontabã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šè¿™ä¸ªæ–‡ä»¶ï¼Œcrontabå‘½ä»¤å°†æ¥å—æ ‡å‡†è¾“å…¥ï¼ˆé”®ç›˜ï¼‰ä¸Šé”®å…¥çš„å‘½ä»¤ï¼Œå¹¶å°†å®ƒä»¬è½½å…¥crontabã€‚
-eï¼Œç¼–è¾‘æŸä¸ªç”¨æˆ·çš„crontabæ–‡ä»¶å†…å®¹ã€‚å¦‚æœä¸æŒ‡å®šç”¨æˆ·ï¼Œåˆ™è¡¨ç¤ºç¼–è¾‘å½“å‰ç”¨æˆ·çš„crontabæ–‡ä»¶ã€‚
-lï¼Œæ˜¾ç¤ºæŸä¸ªç”¨æˆ·çš„crontabæ–‡ä»¶å†…å®¹ï¼Œå¦‚æœä¸æŒ‡å®šç”¨æˆ·ï¼Œåˆ™è¡¨ç¤ºæ˜¾ç¤ºå½“å‰ç”¨æˆ·çš„crontabæ–‡ä»¶å†…å®¹ã€‚
-rï¼Œåˆ é™¤æŸä¸ªç”¨æˆ·çš„crontabæ–‡ä»¶ï¼Œå¦‚æœä¸æŒ‡å®šç”¨æˆ·ï¼Œåˆ™é»˜è®¤åˆ é™¤å½“å‰ç”¨æˆ·çš„crontabæ–‡ä»¶ã€‚

crontabè„šæœ¬å¯¹äºæ¯”è¾ƒé•¿çš„å‘½ä»¤ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸å†™åœ¨crontabæ–‡ä»¶é‡Œï¼Œè€Œæ˜¯å•ç‹¬æä¸€ä¸ªè„šæœ¬ï¼Œå®šæ—¶ä»»åŠ¡è°ƒç”¨è¿™ä¸ªè„šæœ¬ã€‚ä¾‹å¦‚ï¼š
5 0 * * * /home/voidking/restart.sh
æ€æ ·æµ‹è¯•å®šæ—¶ä»»åŠ¡æ˜¯å¦å¥½ç”¨ï¼Ÿæœ€ç®€å•çš„åŠæ³•å°±æ˜¯æ”¹ä¸€ä¸‹å®šæ—¶ä»»åŠ¡è°ƒç”¨æ—¶é—´ä¸º * * * * * ï¼Œæµ‹è¯•å®Œæˆå†æ”¹å›å»ã€‚å¦‚æœå‘ç°æ‰‹åŠ¨æ‰§è¡Œ restart.sh è„šæœ¬å¯ä»¥æˆåŠŸï¼Œä½†æ˜¯é€šè¿‡å®šæ—¶ä»»åŠ¡è°ƒç”¨æ— æ³•æˆåŠŸï¼Œé‚£ä¹ˆå¤§æ¦‚ç‡æ˜¯å› ä¸ºç¯å¢ƒå˜é‡é—®é¢˜ã€‚å¯ä»¥åœ¨ restart.sh è„šæœ¬é‡Œå…ˆè°ƒç”¨ä¸€æ¬¡ source ~/.bash_profileï¼Œæˆ–è€…æ‰§è¡Œenvï¼Œç„¶åæŠŠæ‰€æœ‰å˜é‡éƒ½å†™åˆ° restart.sh è„šæœ¬ä¸­ã€‚è¯¦æƒ…å‚è€ƒã€Šbash_profileå’Œbashrcçš„åŒºåˆ«ã€‹
éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæƒ³è¦åå°æ‰§è¡Œè„šæœ¬ï¼Œå…¶ä¸­nohupå¯ä»¥çœç•¥ã€‚ä¾‹å¦‚ï¼š
#0 12 * * * nohup /home/voidking/restart.sh &gt; /home/voidking/log/daily-`date +\%Y\%m\%d\%H\%M\%S`.log 2&gt;&amp;1 &amp;0 12 * * * /home/voidking/restart.sh &gt; /home/voidking/log/daily-`date +\%Y\%m\%d\%H\%M\%S`.log 2&gt;&amp;1 &amp;

å®è·µç¯‡è®¾ç½®ç³»ç»Ÿæ—¶é—´è®¾ç½®å®šæ—¶ä»»åŠ¡å’Œæ—¶é—´ç´§å¯†ç›¸å…³ï¼Œå¦‚æœæœåŠ¡å™¨çš„æ—¶åŒºæ—¶é—´è®¾ç½®å’Œæœ¬åœ°ä¸åŒï¼Œå°±ä¸èƒ½ä¿è¯è®¡åˆ’ä»»åŠ¡çš„æ­£ç¡®æ‰§è¡Œã€‚æ‰€ä»¥ä½¿ç”¨crontabçš„ç¬¬ä¸€æ­¥ï¼Œæ˜¯è°ƒèŠ‚å¥½æœåŠ¡å™¨çš„æ—¶é—´ã€‚
ä¸‹é¢å‚è€ƒUbuntu 16.04å°†ç³»ç»Ÿæ—¶é—´å†™å…¥åˆ°ç¡¬ä»¶æ—¶é—´BIOSï¼Œå¯¹æœåŠ¡å™¨æ—¶é—´è¿›è¡Œè°ƒèŠ‚ã€‚
æ—¶é—´æ˜¯æœ‰æ—¶åŒºçš„ï¼Œæ— è®ºç¡¬ä»¶æ—¶é—´è¿˜æ˜¯æ“ä½œç³»ç»Ÿæ—¶é—´ã€‚hwclockçš„æ—¶åŒºåœ¨/etc/default/rcSæ–‡ä»¶ä¸­è®¾ç½®ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªå‚æ•°UTCï¼Œé»˜è®¤å€¼ä¸ºyesï¼Œè¡¨ç¤ºä½¿ç”¨UTCæ—¶åŒºï¼Œå¦‚æœè®¾ç½®ä¸ºnoï¼Œé‚£è¡¨ç¤ºä½¿ç”¨osclockçš„æ—¶åŒºã€‚å»ºè®®hwclockä¸osclockè®¾ç½®ç›¸åŒçš„æ—¶åŒºï¼Œä¹Ÿå°±æ˜¯noã€‚
1ã€æŸ¥çœ‹æœåŠ¡å™¨ç¡¬ä»¶æ—¶é—´sudo hwclock -rï¼Œçœ‹åˆ°çš„æ—¶é—´æ ¼å¼ä¸ºï¼šWed 23 May 2018 11:02:17 AM HKT  -0.031663 seconds
2ã€æŸ¥çœ‹æœåŠ¡å™¨ç³»ç»Ÿæ—¶é—´dateï¼Œçœ‹åˆ°çš„æ—¶é—´æ ¼å¼ä¸ºï¼šWed May 23 11:02:41 HKT 2018
3ã€è®¾ç½®hwclockå’Œosclockæ—¶åŒºç›¸åŒsudo vim /etc/default/rcS
æ‰¾åˆ°UTC=yesï¼Œä¿®æ”¹ä¸ºUTC=no
4ã€å°†ç³»ç»Ÿæ—¶é—´å†™å…¥ç¡¬ä»¶æ—¶é—´sudo hwclock -w
5ã€ä¿®æ”¹ç³»ç»Ÿæ—¶åŒºosclockçš„æ—¶åŒºé…ç½®æ–‡ä»¶ä¸º/etc/timezoneï¼Œä¸å»ºè®®ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚
å¦‚æœä½ æƒ³ä¿®æ”¹ä¸ºCSTæ—¶é—´ï¼Œé‚£ä¹ˆæ‰§è¡Œsudo tzselectå‘½ä»¤æ—¶ï¼Œé€‰æ‹©Asia-&gt;China-&gt;Beijing Timeå³å¯ï¼Œè¿™æ—¶ä¼šæç¤ºä½¿ç”¨Asia/Shanghaiæ—¶åŒºã€‚ï¼ˆubuntuå’Œcentosé€šç”¨ï¼‰
6ã€è®¾ç½®å³åˆ»ç”Ÿæ•ˆæ‰§è¡Œdateï¼Œå‘ç°æ—¶åŒºæ²¡æœ‰å˜åŒ–ï¼Œä¾ç„¶æ˜¯HKTã€‚
sudo cp /usr/share/zoneinfo/Asia/Shanghai  /etc/localtimesudo ntpdate time.windows.com

å¦‚æœæ‰§è¡ŒntpdateæŠ¥é”™ï¼šntpdate[18409]: no server suitable for synchronization found ï¼Œé‚£ä¹ˆå°±æ¢ä¸€ä¸ªæ—¶é—´åŒæ­¥å·¥å…·ã€‚
sudo apt-get install rdatesudo rdate -s time-b.nist.gov

å†æ¬¡æ‰§è¡Œdateï¼Œå‘ç°æ—¶åŒºå·²ç»å˜æˆäº†CSTã€‚
7ã€ç¡¬ä»¶æ—¶é—´åŒæ­¥sudo hwclock -rï¼Œå‘ç°ç¡¬ä»¶æ—¶é—´è½åã€‚sudo hwclock -wï¼Œå†æ¬¡æŠŠç³»ç»Ÿæ—¶é—´å†™å…¥ç¡¬ä»¶æ—¶é—´ï¼ŒåŒæ­¥å®Œæˆã€‚
å®ä¾‹å®ä¾‹1ï¼šæ¯åˆ†é’Ÿã€æ¯å°æ—¶ã€æ¯å¤©ã€æ¯å‘¨ã€æ¯æœˆã€æ¯å¹´æ‰§è¡Œ
* * * * * myCommand0 * * * * myCommand0 0 * * * myCommand0 0 * * 0 myCommand0 0 1 * * myCommand0 0 1 1 * myCommand

å®ä¾‹2ï¼šæ¯å°æ—¶çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ3,15 * * * * myCommand
å®ä¾‹3ï¼šåœ¨ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ3,15 8-11 * * * myCommand
å®ä¾‹4ï¼šæ¯éš”ä¸¤å¤©çš„ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ3,15 8-11 */2  *  * myCommand
å®ä¾‹5ï¼šæ¯å‘¨ä¸€ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ3,15 8-11 * * 1 myCommand
å®ä¾‹6ï¼šæ¯æ™šçš„21:30é‡å¯smb30 21 * * * /etc/init.d/smb restart
å®ä¾‹7ï¼šæ¯æœˆ1ã€10ã€22æ—¥çš„4 : 45é‡å¯smb45 4 1,10,22 * * /etc/init.d/smb restart
å®ä¾‹8ï¼šæ¯å‘¨å…­ã€å‘¨æ—¥çš„1 : 10é‡å¯smb10 1 * * 6,0 /etc/init.d/smb restart
å®ä¾‹9ï¼šæ¯å¤©18 : 00è‡³23 : 00ä¹‹é—´æ¯éš”30åˆ†é’Ÿé‡å¯smb0,30 18-23 * * * /etc/init.d/smb restart
å®ä¾‹10ï¼šæ¯æ˜ŸæœŸå…­çš„æ™šä¸Š11 : 00 pmé‡å¯smb0 23 * * 6 /etc/init.d/smb restart
å®ä¾‹11ï¼šæ¯ä¸€å°æ—¶é‡å¯smb0 * * * * /etc/init.d/smb restart
å®ä¾‹12ï¼šæ™šä¸Š11ç‚¹åˆ°æ—©ä¸Š7ç‚¹ä¹‹é—´ï¼Œæ¯éš”ä¸€å°æ—¶é‡å¯smb0 23-7/1 * * * /etc/init.d/smb restart
å®ä¾‹13ï¼šæ¯æœˆçš„4å·ä¸æ¯å‘¨ä¸€åˆ°å‘¨ä¸‰çš„11ç‚¹é‡å¯smb0 11 4 * mon-wed /etc/init.d/smb restart
å®ä¾‹14ï¼šä¸€æœˆä¸€å·çš„4ç‚¹é‡å¯smb0 4 1 jan * /etc/init.d/smb restart
å®ä¾‹15ï¼šæ¯å°æ—¶æ‰§è¡Œ/etc/cron.hourlyç›®å½•å†…çš„è„šæœ¬01 * * * * root run-parts /etc/cron.hourlyrun-partsè¿™ä¸ªå‚æ•°äº†ï¼Œå¦‚æœå»æ‰è¿™ä¸ªå‚æ•°çš„è¯ï¼Œåé¢å°±å¯ä»¥å†™è¦è¿è¡Œçš„æŸä¸ªè„šæœ¬åï¼Œè€Œä¸æ˜¯ç›®å½•åäº†ã€‚
æŸ¥çœ‹gangliaçš„çŠ¶æ€ç›®æ ‡ï¼šæ¯åˆ†é’ŸæŸ¥çœ‹ä¸€ä¸‹gangliaçš„çŠ¶æ€ï¼Œå¹¶ä¿å­˜åˆ°/tmp/log/gangliaç›®å½•ã€‚
1ã€åˆ›å»º/tmp/log/gangliaç›®å½•
sudo mkdir -p /tmp/log/gangliasudo chmod a+w /tmp/log/ganglia

2ã€ç¼–è¾‘crontabcrontab -eï¼Œé€‰æ‹©ç¼–è¾‘å™¨ä¸ºvim
3ã€åœ¨crontabæ–‡ä»¶ä¸­æ·»åŠ ä¸€è¡Œï¼ˆæ³¨æ„è¯¥å‘½ä»¤æ˜¯é”™è¯¯çš„ï¼Œä¸è¦ç›´æ¥ä½¿ç”¨ï¼‰
* * * * * pssh -h /home/test/hosts.txt -t 30 -i &#x27;ps aux | grep gmond&#x27; &gt; /tmp/log/ganglia/ganglia-`date +%Y%m%d-%H%M%S`.log

4ã€æŸ¥çœ‹crontabä»»åŠ¡crontab -lï¼Œçœ‹åˆ°ä»»åŠ¡å·²ç»æ·»åŠ æˆåŠŸã€‚
5ã€ç­‰å¾…äº†äº”åˆ†é’Ÿï¼Œå‘ç°/tmp/log/gangliaç›®å½•ä¸‹å•¥ä¹Ÿæ²¡æœ‰ã€‚sudo service cron statusï¼ŒçŠ¶æ€æ­£å¸¸ã€‚sudo /etc/init.d/cron restartï¼Œé‡å¯cronè¯•è¯•ã€‚åˆç­‰å¾…äº†äº”åˆ†é’Ÿï¼Œå‘ç°/tmp/log/gangliaç›®å½•ä¸‹ä¾ç„¶ç©ºç©ºã€‚
è«éæ˜¯å› ä¸ºpsshæ²¡æœ‰ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Ÿwhereis psshï¼Œæ‰¾åˆ°psshè·¯å¾„ä¸º/usr/lib/psshï¼Œä¿®æ”¹crontabä¸ºï¼š
* * * * * /usr/lib/pssh -h /home/test/hosts.txt -t 30 -i &#x27;ps aux | grep gmond&#x27; &gt; /tmp/log/ganglia/ganglia-`date +%Y%m%d-%H%M%S`.log
ç„¶è€Œï¼Œå¹¶æ²¡æœ‰ç”¨ã€‚è¿˜æ˜¯æŸ¥çœ‹ä¸‹crontabæ—¥å¿—å§ï¼
å¼€å¯crontabæ—¥å¿—ä»¥ä¸‹ä¸»è¦å‚è€ƒUbuntuä¸‹ç”¨crontab éƒ¨ç½²å®šæ—¶ä»»åŠ¡ã€‚
1ã€ç¼–è¾‘50-default.confsudo vim /etc/rsyslog.d/50-default.conf
2ã€æŠŠcronå‰çš„äº•å·å»æ‰ï¼Œä¹Ÿå°±æ˜¯ä¿®æ”¹ä¸ºï¼š
cron.*                         /var/log/cron.log

3ã€é‡å¯rsyslogæœåŠ¡sudo service rsyslog restart
4ã€é‡å¯crontabæœåŠ¡sudo service cron restart
5ã€æŸ¥çœ‹crontabæ—¥å¿—less /var/log/cron.log
æœç„¶å‘ç°äº†é—®é¢˜ï¼š
(test) CMD (/usr/lib/pssh -h /home/test/hosts.txt -t 30 -i &#x27;ps aux | grep gmond&#x27; &gt; /tmp/log/ganglia/ganglia-`date +)
ä¹Ÿå°±æ˜¯è¯´ï¼Œå‘½ä»¤ç¡®å®æŒ‰æ—¶æ‰§è¡Œäº†ï¼Œåªä¸è¿‡æ²¡æœ‰æ‰§è¡Œå®Œï¼Œè¢«ç™¾åˆ†å·æˆªæ–­äº†ï¼Œå¯¼è‡´logæ–‡ä»¶æ²¡æœ‰æ­£å¸¸ç”Ÿæˆï¼
ä¿®æ”¹crontabä¸ºï¼š
* * * * * /usr/lib/pssh -h /home/test/hosts.txt -t 30 -i &#x27;ps aux | grep gmond&#x27; &gt; /tmp/log/ganglia/ganglia-`date +\%Y\%m\%d-\%H\%M\%S`.log

ç»ˆäºï¼Œlogæ–‡ä»¶æˆåŠŸç”Ÿæˆï¼Œniceï¼ä½†æ˜¯ï¼Œæ–‡ä»¶å†…å®¹æ˜¯ç©ºçš„ï¼å› ä¸ºï¼Œ/usr/lib/psshæ˜¯ä¸€ä¸ªç›®å½•ï¼Œä¸æ˜¯psshå‘½ä»¤ï¼çœŸæ­£çš„psshå‘½ä»¤æ˜¯parallel-sshï¼Œæ‰¾åˆ°å®ƒçš„ä½ç½®ä¸º/usr/bin/parallel-sshï¼Œä¿®æ”¹crontabï¼š
* * * * * /usr/bin/parallel-ssh -h /home/test/hosts.txt -t 30 -i &#x27;ps aux | grep gmond&#x27; &gt; /tmp/log/ganglia/ganglia-`date +\%Y\%m\%d-\%H\%M\%S`.log

è‡³æ­¤ï¼Œé—®é¢˜åœ†æ»¡è§£å†³ã€‚å®é™…ä½¿ç”¨çš„æ—¶å€™ï¼Œä¸€å¤©è·å–ä¸€æ¬¡gangliaçš„çŠ¶æ€å°±å¤Ÿäº†ï¼Œæ‰€ä»¥crontabæ”¹æˆï¼š
0 0 * * * /usr/bin/parallel-ssh -h /home/test/hosts.txt -t 30 -i &#x27;ps aux | grep gmond&#x27; &gt; /tmp/log/ganglia/ganglia-`date +\%Y\%m\%d`.log

å®šæ—¶æ‰§è¡Œè„šæœ¬ä»¥ä¸Šï¼Œæ¯å¤©æ‰§è¡Œä¸€æ¬¡å®šæ—¶ä»»åŠ¡ï¼ŒæŠ“å–gangliaçš„è¿è¡ŒçŠ¶æ€ä¿å­˜åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ã€‚ç´§æ¥ç€ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä½¿ç”¨è„šæœ¬æ£€æŸ¥å½“å¤©çš„æ—¥å¿—æ–‡ä»¶ï¼Œå¦‚æœå‘ç°gangliaè¿è¡Œå¼‚å¸¸ï¼Œåˆ™äº§ç”Ÿä¸€ä¸ªé”™è¯¯æ—¥å¿—ã€‚
1ã€å‡è®¾æ—¥å¿—æ–‡ä»¶ganglia-20180524.logçš„å†…å®¹ä¸ºï¼š
[1] 00:00:01 [SUCCESS] test@192.168.56.102ganglia  24810  0.0  0.0  57536  3396 ?        Ssl  May23   0:20 /usr/sbin/gmond --pid-file /var/run/gmond.pidtest     27619  0.0  0.0  11376  2800 ?        Ss   09:05   0:00 bash -c ps aux | grep gmondtest     27621  0.0  0.0  10720  2276 ?        S    09:05   0:00 grep gmond[2] 00:00:01 [SUCCESS] test@192.168.56.103ganglia  25710  0.0  0.0  57536  3396 ?        Ssl  May23   0:20 /usr/sbin/gmond --pid-file /var/run/gmond.pidtest     27622  0.0  0.0  11376  2800 ?        Ss   09:05   0:00 bash -c ps aux | grep gmondtest     27645  0.0  0.0  10720  2276 ?        S    09:05   0:00 grep gmond

2ã€å‚è€ƒgrepå‘½ä»¤æœ€ç»å¸¸ä½¿ç”¨çš„åŠŸèƒ½æ€»ç»“ï¼Œç¼–å†™è„šæœ¬checkganglia.sh
#!/bin/bashDATE=`date +%Y%m%d`filename=&quot;ganglia-$&#123;DATE&#125;.log&quot;hosts=`grep test@ /tmp/log/ganglia/$&#123;filename&#125; | wc -l`pids=`grep gmond.pid /tmp/log/ganglia/$&#123;filename&#125; | wc -l`if [ $&#123;hosts&#125; == $&#123;pids&#125; ]then    echo &quot;All services are runing!&quot;else    echo &quot;Error occurred!&quot; &gt; /tmp/log/ganglia/error-$&#123;DATE&#125;.logfi

3ã€æ‰§è¡Œ
chmod a+x checkganglia.sh./checkganglia.sh

å¦‚æœæ‰€æœ‰å®¢æˆ·æœºçš„gangliaè¿è¡Œæ­£å¸¸ï¼Œå°±ä¼šè¾“å‡ºAll services are runing!ã€‚å¦‚æœæœ‰çš„å®¢æˆ·æœºgangliaè¿›ç¨‹ä¸å­˜åœ¨ï¼Œåˆ™ä¼šåœ¨/tmp/log/ganglia/ç›®å½•ä¸‹ç”Ÿæˆå½“å¤©çš„é”™è¯¯æ—¥å¿—ã€‚
4ã€è®¾ç½®å®šæ—¶è¿è¡Œå› ä¸ºæ—¥å¿—çš„æ£€æŸ¥å·¥ä½œè¦åœ¨æ—¥å¿—ç”Ÿæˆä¹‹åï¼Œæ‰€ä»¥æ—¶é—´ä¸Šå»¶åååˆ†é’Ÿã€‚
10 0 * * * /bin/bash /home/test/checkganglia.sh

è„šæœ¬è¿›é˜¶ä¸Šé¢çš„è„šæœ¬ï¼Œè¿˜æœ‰å¾ˆå¤šè¦æ”¹è¿›çš„åœ°æ–¹ã€‚æ¯”å¦‚æœ‰çš„å®¢æˆ·æœºå®•æœºäº†ï¼Œä¸Šé¢çš„è„šæœ¬æ£€æŸ¥ä¸å‡ºæ¥ã€‚æ¯”å¦‚æœ‰çš„å®¢æˆ·æœºgangliaæœåŠ¡æ²¡æœ‰å¯åŠ¨ï¼Œé‚£ä¹ˆå…·ä½“æ˜¯å“ªå‡ å°ï¼Ÿé’ˆå¯¹è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œä¸‹é¢è¿›è¡Œæ”¹è¿›ã€‚å‡è®¾å·²ç»çŸ¥é“å®¢æˆ·æœºçš„æ•°é‡ä¸º10ã€‚
å‚è€ƒcsplitå‘½ä»¤ï¼Œcheckganglia.shè„šæœ¬ä¿®æ”¹ä¸ºï¼š
#!/bin/bashDATE=`date +%Y%m%d`filename=&quot;ganglia-$&#123;DATE&#125;.log&quot;prefix=&quot;ganglia-$&#123;DATE&#125;&quot;hosts=`grep test@ /tmp/log/ganglia/$&#123;filename&#125; | wc -l`pids=`grep gmond.pid /tmp/log/ganglia/$&#123;filename&#125; | wc -l`if [ $&#123;hosts&#125; != 10 ]then    echo &quot;Some hosts are offline!&quot; &gt;&gt; /tmp/log/ganglia/error-$&#123;DATE&#125;.logfiif [ $&#123;hosts&#125; != $&#123;pids&#125; ]then    echo &quot;Some ganglia services have stopped!&quot; &gt;&gt; /tmp/log/ganglia/error-$&#123;DATE&#125;.log    cd /tmp/log/ganglia/    csplit /tmp/log/ganglia/$&#123;filename&#125; /test@/ -n2 -s &#123;*&#125; -f $&#123;prefix&#125; -b &quot;.log.%02d&quot;    rm $&#123;prefix&#125;.log.00    for file in /tmp/log/ganglia/$&#123;prefix&#125;.log.*    do     if [ -f &quot;$&#123;file&#125;&quot; ]    then        #echo &quot;$&#123;file&#125; is file&quot;        if [ `grep gmond.pid $&#123;file&#125; | wc -l` == 0 ]        then            echo `grep test@ $&#123;file&#125;` &gt;&gt; /tmp/log/ganglia/error-$&#123;DATE&#125;.log        fi    fi    donefi

ä»¥ä¸Šè„šæœ¬ï¼Œå®ç°äº†å½“å®¢æˆ·æœºæ•°é‡ä¸ä¸º10çš„æ—¶å€™ï¼Œè¿›è¡ŒæŠ¥é”™ï¼›å½“å®¢æˆ·æœºgangliaæœåŠ¡æ²¡æœ‰å¯åŠ¨æ—¶ï¼Œè¿›è¡ŒæŠ¥é”™ï¼Œå¹¶ä¸”ç­›é€‰å‡ºæ‰€æœ‰æ²¡æœ‰å¯åŠ¨gangliaçš„å®¢æˆ·æœºã€‚
å°æŠ€å·§ä½¿ç”¨è„šæœ¬ä»»åŠ¡æ‰§è¡Œé€»è¾‘ï¼Œæœ€å¥½å†™åœ¨è„šæœ¬ä¸­ï¼Œç„¶åé…ç½®å®šæ—¶ä»»åŠ¡æ‰§è¡Œè„šæœ¬ã€‚
å¯¼å…¥ç¯å¢ƒå˜é‡è„šæœ¬ä¸­å¯¼å…¥ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥é¿å…å¾ˆå¤šé”™è¯¯ã€‚
#!/bin/bashsource /etc/profilesource /home/voidking/.bash_profile# business code

ä½¿ç”¨ç»å¯¹è·¯å¾„é…ç½®å®šæ—¶ä»»åŠ¡æ—¶ï¼Œç”¨åˆ°çš„å‘½ä»¤ï¼Œä½¿ç”¨å‘½ä»¤çš„ç»å¯¹è·¯å¾„ã€‚ä½¿ç”¨whichæŸ¥çœ‹ç»å¯¹è·¯å¾„ï¼Œä¾‹å¦‚which bash
åè®°æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å…ˆå­¦ä¹ äº†crontabçš„åŸºç¡€çŸ¥è¯†å’ŒåŸºæœ¬ç”¨æ³•ã€‚ç„¶åé€šè¿‡ç›‘æ§gangliaè¿™ä¸€ä¸ªåº”ç”¨åœºæ™¯æ¥å…·ä½“å­¦ä¹ crontabçš„è¯¦ç»†ä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬æŸ¥çœ‹cronæ—¥å¿—çš„æ–¹æ³•ï¼Œcrontabä¸­å‘½ä»¤è½¬ä¹‰çš„æ–¹æ³•ï¼Œå®šæ—¶æ‰§è¡Œè„šæœ¬çš„æ–¹æ³•ï¼Œä»¥åŠå®¡é˜…æ—¥å¿—è„šæœ¬çš„ç¼–å†™å’Œè¿›é˜¶ã€‚
è‡³æ­¤ï¼Œè¿˜ä¸å¤Ÿå®Œç¾ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦æ¯å¤©ç™»å½•ç®¡ç†æœºæŸ¥çœ‹æœ‰æ²¡æœ‰é”™è¯¯æ—¥å¿—ã€‚ä¸‹ä¸€ç¯‡Linuxè®¾ç½®é‚®ä»¶æé†’ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šç ”ç©¶linuxè®¾ç½®é‚®ä»¶æé†’çš„æ–¹æ³•ã€‚å®¡é˜…å®Œæ—¥å¿—åï¼Œå¦‚æœè„šæœ¬èƒ½å¤Ÿç»™æˆ‘ä»¬å‘é€ä¸€å°é‚®ä»¶ï¼Œå‘ŠçŸ¥æˆ‘ä»¬å®¡é˜…çš„ç»“æœï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸å¿…å†æ¯å¤©æŸ¥çœ‹é”™è¯¯æ—¥å¿—ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>crontab</tag>
        <tag>pssh</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu/Debianæ›¿æ¢è½¯ä»¶å®‰è£…æº</title>
    <url>/dev-ubuntu-change-sources/</url>
    <content><![CDATA[ä¸ºä»€ä¹ˆè¦æ›¿æ¢è½¯ä»¶å®‰è£…æºï¼ŸUbuntué»˜è®¤çš„è½¯ä»¶å®‰è£…æºæ˜¯ http://archive.ubuntu.com ï¼Œåœ¨å›½å†…è®¿é—®é€Ÿåº¦å¾ˆæ…¢ã€‚Debianï¼ˆUbuntuæ˜¯Debiançš„è¡ç”Ÿå“ï¼‰çš„é»˜è®¤è½¯ä»¶å®‰è£…æºæ˜¯ http://deb.debian.orgï¼Œåœ¨å›½å†…è®¿é—®ä¹Ÿå¾ˆæ…¢ã€‚
å¦‚æœæ¢æˆå›½å†…çš„è½¯ä»¶å®‰è£…æºï¼Œèƒ½å¤ŸèŠ‚çœå¾ˆå¤šæ—¶é—´ï¼Œå› æ­¤å®‰è£…Ubuntu/Debianç³»ç»Ÿåå»ºè®®å…ˆè¿›è¡Œè½¯ä»¶å®‰è£…æºçš„æ›¿æ¢ã€‚
æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿä¸ºUbuntu14.04.5ï¼ˆå¤§ç‰ˆæœ¬åˆ«åtrustyï¼‰ï¼Œè®¡åˆ’æ¢æˆUbuntuå®˜æ–¹ä¸­å›½çš„å®‰è£…æºã€‚é™¤äº†Ubuntuå®˜æ–¹ä¸­å›½çš„å®‰è£…æºï¼Œå¯é€‰çš„å›½å†…å®‰è£…æºè¿˜æœ‰ä¸­ç§‘å¤§ã€æ¸…åã€é˜¿é‡Œã€è…¾è®¯ã€ç½‘æ˜“ç­‰ç­‰ã€‚
http://cn.archive.ubuntu.comhttps://mirrors.ustc.edu.cnhttps://mirrors.tuna.tsinghua.edu.cnhttps://mirrors.aliyun.comhttps://mirrors.cloud.tencent.comhttps://mirrors.163.com
æ›´å¤šå®‰è£…æºå¯ä»¥å‚è€ƒubuntu 14.04source
å…¶ä»–ç‰ˆæœ¬çš„Ubuntuä¿®æ”¹æ–¹æ³•ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„å¯ä»¥å‚è€ƒæºåˆ—è¡¨ã€‚
Debianå’ŒUbuntuçš„å›½å†…å®‰è£…æºåŸŸåç›¸åŒï¼Œåªä¸è¿‡æ˜¯åŸŸååé¢çš„è·¯å¾„ä¸åŒã€‚


Ubuntu14æ“ä½œæ›´æ¢å®‰è£…æºå‚è€ƒå¦‚ä½•ä¿®æ”¹Ubuntuçš„æºåˆ—è¡¨(source list)
1ã€å¤‡ä»½æºåˆ—è¡¨æ–‡ä»¶
sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak

2ã€ç¼–è¾‘æºåˆ—è¡¨æ–‡ä»¶
sudo sed -i &#x27;s#http://archive.ubuntu.com#http://cn.archive.ubuntu.com#g&#x27; /etc/apt/sources.list

ä¿®æ”¹åçš„ sources.list çš„å†…å®¹ä¸ºï¼š
deb http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiversedeb http://cn.archive.ubuntu.com/ubuntu/ trusty-security main restricted universe multiversedeb http://cn.archive.ubuntu.com/ubuntu/ trusty-updates main restricted universe multiversedeb http://cn.archive.ubuntu.com/ubuntu/ trusty-backports main restricted universe multiverse##æ¸¬è©¦ç‰ˆæºdeb http://cn.archive.ubuntu.com/ubuntu/ trusty-proposed main restricted universe multiverse# æºç¢¼deb-src http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiversedeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-security main restricted universe multiversedeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-updates main restricted universe multiversedeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-backports main restricted universe multiverse##æ¸¬è©¦ç‰ˆæºdeb-src http://cn.archive.ubuntu.com/ubuntu/ trusty-proposed main restricted universe multiverse# Canonical åˆä½œå¤¥ä¼´å’Œé™„åŠ # deb http://archive.canonical.com/ubuntu/ trusty partner# deb http://extras.ubuntu.com/ubuntu/ trusty main

ubuntu14çš„åˆ«åæ˜¯trustyï¼Œæ‰€ä»¥souces.listä¸­å‡ºç°äº†å¾ˆå¤štrustyï¼Œå…¶ä»–ç‰ˆæœ¬çš„ubuntuå°±ä¸æ˜¯trustyäº†ã€‚
3ã€æ›´æ–°èµ„æºåŒ…
sudo apt-get update

å¦‚æœæŠ¥é”™Error connecting: Could not connect: Connection refusedè§£å†³æ–¹æ³•å‚è€ƒï¼š

â€œUnable to connectâ€ error with apt-get?
apt-get update Error connecting Could not connect Connection refused

4ã€æ›´æ–°è½¯ä»¶
sudo apt-get upgrade

Debianæ“ä½œæ›´æ¢å®‰è£…æºå‚è€ƒæ–‡æ¡£ï¼š

Debian æºä½¿ç”¨å¸®åŠ©
Debian Security æºä½¿ç”¨å¸®åŠ©

Debianæ“ä½œæ›´æ¢å®‰è£…æºï¼Œå’ŒUbuntuæ“ä½œæ›´æ¢å®‰è£…æºæ–¹æ³•åŸºæœ¬ç›¸åŒã€‚
1ã€æ—¶é—´åŒæ­¥
sudo ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtimesudo echo &quot;Asia/Shanghai&quot; &gt; /etc/timezonedatesudo apt install ntpdatesudo ntpdate time.windows.comdate

å¦‚æœæ˜¯åœ¨å®¹å™¨ä¸­æ“ä½œntpdate time.windows.comï¼Œå¯èƒ½ä¼šæŠ¥é”™ntpdate[542]: step-systime: Operation not permittedè§£å†³åŠæ³•ï¼šå¯åŠ¨å®¹å™¨æ—¶ç›´æ¥æŒ‚è½½å®¿ä¸»æœºçš„/etc/localtime
docker run --name test -d \-v /etc/localtime:/etc/localtime \python:3.7.10-slim-buster sleep 7200

2ã€æ›¿æ¢è½¯ä»¶å®‰è£…æº
sudo cp /etc/apt/sources.list /etc/apt/sources.list.baksudo sed -i &#x27;s#http://deb.debian.org#http://mirrors.tuna.tsinghua.edu.cn#g&#x27; /etc/apt/sources.listsudo sed -i &#x27;s#http://security.debian.org/debian-security#http://mirrors.tuna.tsinghua.edu.cn/debian-security#g&#x27; /etc/apt/sources.listsudo apt-get update





]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>ubuntu</tag>
        <tag>debian</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨PSSHæ‰¹é‡ç®¡ç†Linux</title>
    <url>/dev-pssh-manage-linux/</url>
    <content><![CDATA[å‰è¨€ã€ŠUbuntuç³»ç»Ÿæ‰¹é‡è‡ªåŠ¨å®‰è£…ã€‹ä¸€æ–‡ä¸­ï¼Œé…ç½®å¥½äº†PXEæœåŠ¡å™¨ï¼Œä¹Ÿé€šè¿‡å®ƒå®‰è£…äº†å‡ å°æœºå™¨ã€‚æ¯ä¸ªæœºå™¨éƒ½é‡æ–°é…ç½®å¥½äº†IPï¼Œå·²ç»å¯ä»¥è¿œç¨‹è®¿é—®äº†ã€‚ç°åœ¨æ–°çš„é—®é¢˜æ¥äº†ï¼Œæ¯ä¸ªæœºå™¨çš„ä¸»æœºåéƒ½ç›¸åŒï¼Œéœ€è¦ä¿®æ”¹ï¼›æ¯ä¸ªæœºå™¨çš„sources.listéƒ½æœ‰é—®é¢˜ï¼Œéœ€è¦æ›¿æ¢ã€‚ä»¥åï¼Œè‚¯å®šä¹Ÿæœ‰å¾ˆå¤šå…¶ä»–éœ€è¦æ‰¹é‡æ“ä½œçš„é—®é¢˜ï¼Œæ¯”å¦‚æ‰¹é‡å®‰è£…gangliaï¼Œæ€»ä¸èƒ½ä¸Šç™¾å°æœºå™¨ä¸€ä¸ªä¸ªæ‰‹åŠ¨æ“ä½œå§ï¼
æœ¬æ–‡ï¼Œå°±ç ”ç©¶ä¸‹linuxæ‰¹é‡æ“ä½œçš„ç›¸å…³æ–¹æ³•å’Œå·¥å…·ï¼Œé‡ç‚¹ç ”ç©¶ä¸‹psshã€‚


æ‰¹é‡æ“ä½œæ€è·¯é¦–å…ˆå®šä¹‰ä¸¤ä¸ªæ¦‚å¿µï¼šç®¡ç†æœºå’Œå®¢æˆ·æœºï¼Œæœ¬æ–‡ä¸­çš„ç®¡ç†æœºæ˜¯æŒ‡ç®¡ç†å…¶ä»–æœåŠ¡å™¨çš„æœåŠ¡å™¨ï¼Œå®¢æˆ·æœºæ˜¯æŒ‡æ™®é€šæœåŠ¡å™¨ã€‚ç®¡ç†æœºIPä¸º192.168.56.101ï¼Œå®¢æˆ·æœºIPä¸º192.168.56.102-104ï¼Œç”¨æˆ·åéƒ½æ˜¯testã€‚
æ€è·¯ä¸€è¯´åˆ°æ‰¹é‡æ“ä½œï¼Œæœ€å®¹æ˜“æƒ³åˆ°çš„ï¼Œè‚¯å®šæ˜¯åœ¨ç®¡ç†æœºå†™ä¸€ä¸ªè„šæœ¬ï¼Œé‡Œé¢æœ‰ä¸ªå¾ªç¯è¯­å¥ï¼ŒæŒ¨ä¸ªè¿æ¥å®¢æˆ·æœºè¿›è¡Œæ“ä½œã€‚è€Œå¾ªç¯è¯­å¥é‡Œé¢ï¼Œä¸»è¦æ˜¯sshï¼Œç„¶åæ‰§è¡Œäº¤äº’å‘½ä»¤ã€‚å‚è€ƒ shellå®ç°SSHè‡ªåŠ¨ç™»é™† ã€ å…³äºSSH è¿œç¨‹æ‰§è¡Œå‘½ä»¤ä½ è¦çŸ¥é“çš„äºŒä¸‰äº‹ å’Œ shellè„šæœ¬å®ç°åŒæ—¶å¤šå°è¿œç¨‹ä¸»æœºæ‰§è¡Œå‘½ä»¤çš„ä»£ç åˆ†äº«ã€‚
ä½†æ˜¯ï¼Œè¿™ç§æ–¹å¼å¾ˆéš¾å¹¶è¡Œå¤„ç†ï¼Œæ¯”è¾ƒæµªè´¹æ—¶é—´ã€‚
æ€è·¯äºŒå¦ä¸€ä¸ªç®€å•çš„æ€è·¯ï¼Œæ˜¯åœ¨ç®¡ç†æœºå†™ä¸€ä¸ªåœ¨å®¢æˆ·æœºæ‰§è¡Œçš„è„šæœ¬ï¼Œç„¶åæ¨é€ç»™å®¢æˆ·æœºï¼Œå†åœ¨å®¢æˆ·æœºé‡Œæ‰§è¡Œè„šæœ¬ã€‚ä¸»è¦å‚è€ƒSSH è¿œç¨‹æ‰§è¡Œä»»åŠ¡ã€‚
è¿™ç§æ–¹å¼åŒæ ·å¾ˆéš¾å¹¶è¡Œå¤„ç†ï¼Œæ¯”è¾ƒæµªè´¹æ—¶é—´ã€‚å¦‚æœéè¦å¹¶è¡Œå¤„ç†ï¼Œé‚£ä¹ˆå°±åªèƒ½ç‰ºç‰²åé¦ˆä¿¡æ¯ã€‚
æ€è·¯ä¸‰æœ€åä¸€ç§æ€è·¯å°±æ˜¯å€ŸåŠ©å·¥å…·ï¼Œæ¯”å¦‚musshã€pdshã€psshç­‰ç­‰ã€‚
psshpsshç®€ä»‹psshæ˜¯ä¸€ä¸ªpythonç¼–å†™å¯ä»¥åœ¨å¤šå°æœåŠ¡å™¨ä¸Šæ‰§è¡Œå‘½ä»¤çš„å·¥å…·ï¼ŒåŒæ—¶æ”¯æŒæ‹·è´æ–‡ä»¶ï¼Œæ˜¯åŒç±»å·¥å…·ä¸­å¾ˆå‡ºè‰²çš„ã€‚ç±»ä¼¼pdshï¼Œä½†æ˜¯ç›¸å¯¹pdshæ›´ä¸ºç®€ä¾¿ï¼Œä½¿ç”¨å‰å¿…é¡»åœ¨å„ä¸ªæœåŠ¡å™¨ä¸Šé…ç½®å¥½å¯†é’¥è®¤è¯è®¿é—®ã€‚å‚è€ƒpsshå‘½ä»¤å’Œpssh HOWTOã€‚
å®‰è£…1ã€ubuntuå®‰è£…psshï¼Œsudo apt-get install pssh
2ã€ubuntuå®‰è£…å®Œpsshåï¼Œè¾“å…¥psshï¼Œä¹Ÿè®¸ä¼šæç¤ºï¼šNo command â€˜psshâ€™ found, did you mean:â€¦
è§£å†³åŠæ³•å‚è€ƒWhy pssh command is not working?ï¼Œä¸€æ¡å‘½ä»¤è§£å†³ï¼šecho &quot;alias pssh=parallel-ssh&quot; &gt;&gt; ~/.bashrc &amp;&amp; . ~/.bashrcï¼Œå…¶ä¸­&amp;&amp; . ~/.bashrcä»£è¡¨ç«‹å³ç”Ÿæ•ˆã€‚
3ã€è®¾ç½®ç›¸å…³å‘½ä»¤å®‰è£…å®Œpsshåï¼Œå®é™…ä¸Šè¿˜å®‰è£…äº†pscpã€prsyncã€pnukeå’Œpslurpã€‚å’Œpsshå‘½ä»¤æ— æ•ˆçš„é—®é¢˜ç›¸åŒï¼Œå®ƒä»¬é»˜è®¤ä¹Ÿåªèƒ½ä½¿ç”¨å…¨åï¼Œä¸èƒ½åªç”¨ç®€ç§°ã€‚éœ€è¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š
echo &quot;alias pscp=parallel-scp&quot; &gt;&gt; ~/.bashrc &amp;&amp; . ~/.bashrcecho &quot;alias prsync=parallel-rsync&quot; &gt;&gt; ~/.bashrc &amp;&amp; . ~/.bashrcecho &quot;alias pnuke=parallel-nuke&quot; &gt;&gt; ~/.bashrc &amp;&amp; . ~/.bashrcecho &quot;alias pslurp=parallel-slurp&quot; &gt;&gt; ~/.bashrc &amp;&amp; . ~/.bashrc

å…¶ä¸­ï¼ŒpscpæŠŠæ–‡ä»¶å¹¶è¡Œåœ°å¤åˆ¶åˆ°å¤šä¸ªå®¢æˆ·æœºï¼›prsyncä½¿ç”¨rsyncåè®®ä»ç®¡ç†æœºåŒæ­¥åˆ°å®¢æˆ·æœºï¼›pslurpå°†æ–‡ä»¶ä»å®¢æˆ·æœºå¤åˆ¶åˆ°ç®¡ç†æœºï¼›pnukeå¹¶è¡Œåœ°åœ¨å®¢æˆ·æœºæ€è¿›ç¨‹ã€‚
å‘½ä»¤æ ¼å¼å‘½ä»¤æ ¼å¼ï¼špssh [OPTIONS] command [...]
é€‰é¡¹ï¼š
--versionï¼šæŸ¥çœ‹ç‰ˆæœ¬--helpï¼šæŸ¥çœ‹å¸®åŠ©ï¼Œå³æ­¤ä¿¡æ¯-hï¼šä¸»æœºæ–‡ä»¶åˆ—è¡¨ï¼Œå†…å®¹æ ¼å¼&quot;[user@]host[:port]&quot;-Hï¼šä¸»æœºå­—ç¬¦ä¸²ï¼Œå†…å®¹æ ¼å¼&quot;[user@]host[:port]&quot;-lï¼šç™»å½•ä½¿ç”¨çš„ç”¨æˆ·å-pï¼šå¹¶å‘çš„çº¿ç¨‹æ•°ã€å¯é€‰ã€‘-oï¼šè¾“å‡ºçš„æ–‡ä»¶ç›®å½•ã€å¯é€‰ã€‘-eï¼šé”™è¯¯è¾“å…¥æ–‡ä»¶ã€å¯é€‰ã€‘-tï¼šTIMEOUT è¶…æ—¶æ—¶é—´è®¾ç½®ï¼Œ0æ— é™åˆ¶ã€å¯é€‰ã€‘-Oï¼šSSHçš„é€‰é¡¹-vï¼šè¯¦ç»†æ¨¡å¼-Aï¼šæ‰‹åŠ¨è¾“å…¥å¯†ç æ¨¡å¼-xï¼šé¢å¤–çš„å‘½ä»¤è¡Œå‚æ•°ä½¿ç”¨ç©ºç™½ç¬¦å·ï¼Œå¼•å·ï¼Œåæ–œçº¿å¤„ç†-Xï¼šé¢å¤–çš„å‘½ä»¤è¡Œå‚æ•°ï¼Œå•ä¸ªå‚æ•°æ¨¡å¼ï¼ŒåŒ-x-iï¼šæ¯ä¸ªæœåŠ¡å™¨å†…éƒ¨å¤„ç†ä¿¡æ¯è¾“å‡º-Pï¼šæ‰“å°å‡ºæœåŠ¡å™¨è¿”å›ä¿¡æ¯

å®è·µç¯‡æ·»åŠ å¯†é’¥è®¤è¯è®¿é—®å‚è€ƒLinuxä¹‹SSHå¯†é’¥è®¤è¯å’Œsshä½¿ç”¨å¯†é’¥è¿›è¡Œè®¤è¯ï¼Œåœ¨ç®¡ç†æœºä¸Šåˆ¶ä½œå¯†é’¥å¯¹ï¼Œå°†å…¬é’¥æ·»åŠ ç»™å®¢æˆ·æœºï¼Œç„¶åé€šè¿‡sshå…å¯†ç™»å½•ã€‚
1ã€ç¡®è®¤ç®¡ç†æœºå’Œå®¢æˆ·æœºéƒ½å®‰è£…äº†sshã€‚ps aux | grep ssh
2ã€åœ¨ç®¡ç†æœºä¸Šåˆ›å»ºå¯†é’¥å¯¹ssh-keygenæ‰€æœ‰çš„æç¤ºæŒ‰enteré”®å³å¯ï¼Œå®Œæˆååœ¨homeç›®å½•æ‰§è¡Œll .sshï¼Œå³å¯çœ‹åˆ°åˆ›å»ºå¥½çš„id_rsaå’Œid_rsa.pubæ–‡ä»¶ã€‚
3ã€æŠŠå…¬é’¥æ‹·è´åˆ°æ‰€æœ‰å®¢æˆ·æœºä¸­ssh-copy-id -i .ssh/id_rsa.pub -p 22 test@192.168.56.102
4ã€æµ‹è¯•ç™»å½•ä¸Šä¸€æ­¥æ‹·è´å®Œæˆåï¼Œä¼šæç¤ºä½¿ç”¨ssh -p &#39;22&#39; &#39;test@192.168.56.102&#39;æµ‹è¯•ç™»å½•ã€‚
åœ¨ç®¡ç†æœºä¸­ï¼Œä½¿ç”¨ssh test@192.168.56.102æµ‹è¯•ç™»å½•ï¼Œæˆ‘ä»¬å‘ç°å·²ç»ä¸éœ€è¦è¾“å…¥å¯†ç äº†ã€‚
5ã€æŸ¥çœ‹å…¬é’¥ç™»å½•102å®¢æˆ·æœºï¼Œll .sshï¼Œæˆ‘ä»¬å‘ç°æœ‰ä¸€ä¸ªauthorized_keysæ–‡ä»¶ï¼Œæ–‡ä»¶çš„å†…å®¹å’Œç®¡ç†æœºçš„id_rsa.pubç›¸åŒã€‚
5ã€æµ‹è¯•å‘½ä»¤ssh test@192.168.56.102 &#39;/sbin/ifconfig&#39;
è¿”å›äº†102å®¢æˆ·æœºçš„ifconfigæ‰§è¡Œç»“æœï¼Œæµ‹è¯•æˆåŠŸã€‚
6ã€è®¾ç½®sudoå‘½ä»¤å…å¯†ç ssh test@192.168.56.102 &#39;sudo iptables --list&#39;æŠ¥é”™ï¼šsudo: no tty present and no askpass program specified
è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦åœ¨æ¯ä¸ªå®¢æˆ·æœºä¸‹è¿›è¡Œsudoå…å¯†è®¾ç½®ã€‚è¿›å…¥å®¢æˆ·æœºä¹‹åï¼Œsudo vim /etc/sudoersï¼Œæ·»åŠ ï¼š
test ALL = NOPASSWD: ALL

å†æ¬¡æ‰§è¡Œssh test@192.168.56.102 &#39;sudo iptables --list&#39;ï¼ŒæˆåŠŸã€‚
è·å–æ¯å°æœºå™¨çš„uptime1ã€åœ¨ç®¡ç†æœºä¸Šæ–°å»ºhosts.txtï¼Œå†…å®¹ä¸ºï¼š
test@192.168.56.102test@192.168.56.103test@192.168.56.104

2ã€æ‰§è¡Œuptimepssh -h hosts.txt -i uptime
3ã€ä¿å­˜æ‰§è¡Œç»“æœpssh -h hosts.txt -i -o /tmp/pssh/ uptime
ll /tmp/pssh
cat /tmp/pssh
æ‰¹é‡ä¿®æ”¹hostnameå‚è€ƒLinuxæ‰¹é‡ä¿®æ”¹å¤šå°æœåŠ¡å™¨çš„ä¸»æœºåï¼ˆhostnameï¼‰ï¼Œæˆ‘ä»¬æŠŠå®¢æˆ·æœºçš„ä¸»æœºåæ”¹ä¸ºvk102ã€vk103å’Œvk104ã€‚
1ã€æ–°å»ºhostsæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
192.168.56.102    vk102192.168.56.103    vk103192.168.56.104    vk104

2ã€æ–°å»ºhostname.shæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
#!/bin/baship=`ifconfig eth0 | grep &#x27;inet&#x27; | awk &#x27;&#123;print $2&#125;&#x27; | tr -d &#x27;addr:&#x27;`hostname=`cat /home/test/hosts | grep $ip | awk &#x27;&#123;print $2&#125;&#x27;`echo $ipecho $hostnamehostnamectl set-hostname --static $hostnamehostname $hostname

3ã€å‘é€åˆ°hostså’Œhostname.shåˆ°å®¢æˆ·æœº/home/testç›®å½•ä¸‹pscp -h hosts.txt ./hosts /home/testpscp -h hosts.txt ./hostname.sh /home/test
4ã€æ‰¹é‡æˆäºˆhostname.shå¯æ‰§è¡Œæƒé™pssh -h hosts.txt -i  &#39;chmod +x /home/test/hostname.sh&#39;
5ã€æ‰¹é‡æ‰§è¡Œhostname.shpssh -h hosts.txt -i  &#39;sudo sh /home/test/hostname.sh&#39;æŠ¥é”™ï¼šStderr: hostname: you must be root to change the host nameå‘½ä»¤ä¿®æ”¹ä¸ºï¼špssh -h hosts.txt -i  &#39;sudo sh /home/test/hostname.sh&#39;æ‰§è¡ŒæˆåŠŸã€‚
æ‰¹é‡æ›¿æ¢sources.list1ã€æ–°å»ºsources.listï¼Œå†…å®¹ä¸ºï¼š
deb http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse  deb http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse  deb http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse  deb http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse  deb http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse  deb-src http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse  deb-src http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse  deb-src http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse  deb-src http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse  deb-src http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse  

2ã€å®¢æˆ·æœºå¤‡ä»½åŸsources.listpssh -h hosts.txt -i  &#39;sudo mv /etc/apt/sources.list /etc/apt/sources.list.bak&#39;
3ã€å¤åˆ¶æ–°çš„sources.liståˆ°å®¢æˆ·æœºpscp -h hosts.txt sources.list /home/test/pssh -h hosts.txt &#39;sudo mv /home/test/sources.list /etc/apt/&#39;
4ã€æ›´æ–°å®‰è£…æºpssh -h hosts.txt -i &#39;sudo apt-get update&#39;
æ‰¹é‡å®‰è£…gangliaå‚è€ƒUbuntu14.04å®‰è£…é…ç½®Gangliaï¼Œå‡è®¾æˆ‘ä»¬å·²ç»é…ç½®å¥½äº†gangliaä¸»èŠ‚ç‚¹ã€‚
1ã€æŠŠgangliaä¸»èŠ‚ç‚¹çš„/etc/ganglia/gmond.confæ–‡ä»¶æ‹·è´åˆ°ç®¡ç†æœºå½“å‰ç›®å½•ã€‚
2ã€ç¼–å†™gangliaå®‰è£…è„šæœ¬install-gmond.shï¼ˆä¸è¦ç…§æŠ„ï¼Œä¸‹é¢æœ‰ä¿®æ”¹ç‰ˆï¼‰
#!/bin/bashsudo apt-get -y install ganglia-monitor rrdtool &amp;&amp; \sudo mv /etc/ganglia/gmond.conf /etc/ganglia/gmond.conf.bak &amp;&amp; \sudo mv /home/test/gmond.conf /etc/ganglia/ &amp;&amp; \sudo /etc/init.d/ganglia-monitor restart &amp;&amp; \sudo rm -rf /home/test/install-gmond.sh

3ã€æ‹·è´gmond.confå’Œinstall-gmond.shåˆ°å®¢æˆ·æœºpscp -h hosts.txt gmond.conf /home/test/pscp -h hosts.txt install-gmond.sh /home/test/
4ã€æ·»åŠ æ‰§è¡Œæƒé™pssh -h hosts.txt -i  &#39;chmod +x /home/test/install-gmond.sh&#39;
5ã€æ‰§è¡Œå®‰è£…pssh -h hosts.txt -i &#39;sudo apt-get update&#39;
pssh -h hosts.txt -i &#39;sudo sh /home/test/install-gmond.sh&#39;
è„šæœ¬è™½ç„¶é¡ºåˆ©æ‰§è¡Œäº†ï¼Œä½†æ˜¯æŠ¥é”™ï¼šStderr: debconf: unable to initialize frontend: Dialogè§£å†³åŠæ³•æ˜¯ä¿®æ”¹è„šæœ¬ä¸ºï¼š
#!/bin/bashexport DEBIAN_FRONTEND=noninteractive DEBCONF_NONINTERACTIVE_SEEN=true &amp;&amp; \sudo apt-get -y -q install ganglia-monitor rrdtool &amp;&amp; \sudo mv /etc/ganglia/gmond.conf /etc/ganglia/gmond.conf.bak &amp;&amp; \sudo mv /home/test/gmond.conf /etc/ganglia/ &amp;&amp; \sudo /etc/init.d/ganglia-monitor restart &amp;&amp; \sudo rm -rf /home/test/install-gmond.sh

6ã€æŸ¥çœ‹è¿è¡ŒçŠ¶æ€pssh -h hosts.txt -i -o /tmp/pssh/ &#39;ps aux | grep ganglia&#39;
æ‰¹é‡ä¿®æ”¹å¯†ç å‚è€ƒshellå®ç°SSHè‡ªåŠ¨ç™»é™† å’Œ 6ä¸ªExpectè„šæœ¬ç¤ºä¾‹ï¼Œä½¿ç”¨expectå‘½ä»¤ã€‚
1ã€ç®¡ç†æœºä¸Šæ–°å»ºchpasswd.shè„šæœ¬ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
#!/usr/bin/expect set timeout 3set user testset password 123456spawn sudo passwd $user  expect &quot;Enter new UNIX password:&quot;  send &quot;$&#123;password&#125;\r&quot;  expect &quot;Retype new UNIX password:&quot;  send &quot;$&#123;password&#125;\r&quot;  expect eof

2ã€åœ¨å®¢æˆ·æœºä¸Šå®‰è£…expectï¼ˆå¯ä»¥ç”¨whereis expectæŸ¥çœ‹æ˜¯å¦å®‰è£…ï¼‰pssh -h hosts.txt -i &#39;sudo apt-get install expect -y&#39;
3ã€æ‹·è´chpasswd.shè„šæœ¬åˆ°å®¢æˆ·æœºpscp -h hosts.txt chpasswd.sh /home/test
5ã€æ·»åŠ æ‰§è¡Œæƒé™pssh -h hosts.txt -i &#39;sudo chmod a+x /home/test/chpasswd.sh&#39;
5ã€æ‰§è¡Œä¿®æ”¹å¯†ç pssh -h hosts.txt -i &#39;sudo /home/test/chpasswd.sh&#39;
6ã€åˆ é™¤chpasswd.shè„šæœ¬pssh -h hosts.txt -i &#39;sudo rm -rf /home/test/chpasswd.sh&#39;
æ‰¹é‡æ€è¿›ç¨‹å‡è®¾éœ€è¦æ€æ­»çš„è¿›ç¨‹ä¸ºgmondã€‚æ–¹æ³•ä¸€ï¼špnuke -h hosts.txt gmondpssh -h hosts.txt -i &#39;ps -ef | grep gmond&#39;è¿™ç§æ–¹æ³•è™½ç„¶æ˜¾ç¤ºsuccessï¼Œä½†æ˜¯æŸ¥çœ‹è¿›ç¨‹ä¾ç„¶å­˜åœ¨ï¼Œçœ‹æ¥å­˜åœ¨ä¸ç¡®å®šæ€§ã€‚çŒœæµ‹å¯¹äºsudoå¯åŠ¨çš„è¿›ç¨‹éš¾ä»¥æ€æ­»ã€‚
æ–¹æ³•äºŒï¼špssh -h hosts.txt -i &#39;sudo pkill -9 gmond&#39;è¿™ç§æ–¹æ³•æ€çš„å¾ˆå½»åº•ï¼Œæ˜¯ä¸ªå¥½æ–¹æ³•ã€‚
æ–¹æ³•ä¸‰ï¼špssh -h hosts.txt &#39;sudo ps -ef | grep gmond | awk &#39;&#123;print $2&#125;&#39; | xargs kill -9&#39;è¿™ç§æ–¹æ³•ä¹Ÿæ˜¾ç¤ºsuccessï¼Œä½†æ˜¯æŸ¥çœ‹è¿›ç¨‹ä¾ç„¶å­˜åœ¨ï¼Œè¿˜æ˜¯æœ‰é—®é¢˜ã€‚çŒœæµ‹å› ä¸ºsudoä½œç”¨åœ¨äº†psä¸Šï¼Œæ‰€ä»¥å¯¹äºsudoå¯åŠ¨çš„è¿›ç¨‹éš¾ä»¥æ€æ­»ã€‚
æ–¹æ³•å››ï¼š
pssh -h hosts.txt -i &#x27;sudo kill -s 9 `pgrep gmond`&#x27;
è¿™ç§æ–¹æ³•æ€çš„å¾ˆå½»åº•ï¼Œæ˜¯ä¸ªå¥½æ–¹æ³•ã€‚
PSï¼šå¯åŠ¨gmondå‘½ä»¤pssh -h hosts.txt -i &#39;sudo /etc/init.d/ganglia-monitor start
åè®°ä»¥ä¸Šå®è·µï¼Œå·²ç»åŒ…å«äº†psshçš„æœ€å¸¸è§ç”¨æ³•ã€‚æ›´é«˜çº§çš„ç”¨æ³•ï¼Œå°±åœ¨éœ€è¦æ—¶å†å»å­¦ä¹ å§ï¼
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>pssh</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu14.04é…ç½®DNS Server</title>
    <url>/dev-ubuntu-dns-server/</url>
    <content><![CDATA[å‰è¨€ã€ŠUbuntuç³»ç»Ÿæ‰¹é‡è‡ªåŠ¨å®‰è£…ã€‹ä¸€æ–‡ä¸­ï¼Œä¹Ÿè®¸ä¼šç”¨åˆ°DNS Serverï¼Œé‚£ä¹ˆå°±æ¥ç ”ç©¶é…ç½®ä¸€ä¸‹ã€‚
é…ç½®ç›®æ ‡ï¼šåœ¨Ubuntu14.04ä¸Šï¼Œæ­å»ºä¸€ä¸ªDNSæœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨åœ°å€ä¸º10.0.0.100ã€‚ä½¿ç”¨è¿™ä¸ªDNSï¼Œå¯ä»¥æŠŠdns.voidking.comåŸŸåè§£æåˆ°10.0.0.100è¿™ä¸ªåœ°å€ã€‚


å®è·µå®‰è£…å®‰è£…å‘½ä»¤ï¼šsudo apt-get update
sudo apt-get install bind9
å®‰è£…å®Œæˆåï¼Œä¼šåˆ›å»º/etc/bindç›®å½•ï¼Œé‡Œé¢æœ‰å¾ˆå¤šé…ç½®æ–‡ä»¶ã€‚
DNSæ­£åè§£åŒºåŸŸ1ã€æ·»åŠ DNSæ­£åè§£åŒºåŸŸï¼Œéœ€è¦ä¿®æ”¹named.conf.default-zones
sudo vim /etc/bind/named.conf.default-zonesï¼Œåœ¨æœ€åæ·»åŠ ï¼š
zone &quot;voidking.com&quot; &#123;        type master;        file &quot;/etc/bind/db.voidking.com&quot;;&#125;;zone &quot;0.0.10.in-addr.arpa&quot; &#123;        type master;        file &quot;/etc/bind/db.10.0.0&quot;;&#125;;
æ·»åŠ æ­£è§£åŒºåŸŸâ€œvoidking.comâ€ï¼Œä»¥åŠåè§£åŒºåŸŸâ€œ10.0.0.0â€
2ã€åˆ›å»ºdb.voidking.comå¹¶ç¼–è¾‘cd /etc/bindsudo cp db.local db.voidking.comsudo vim db.voidking.com
æ·»åŠ ä¸€ä¸ªAè®°å½•åˆ°10.0.0.100ï¼š
;; BIND data file for local loopback interface;$TTL    604800@       IN      SOA     localhost. root.localhost. (                              2         ; Serial                         604800         ; Refresh                          86400         ; Retry                        2419200         ; Expire                         604800 )       ; Negative Cache TTL;@       IN      NS      localhost.@       IN      A       127.0.0.1@       IN      AAAA    ::1dns     IN      A       10.0.0.100

3ã€åˆ›å»ºdb.10.0.0å¹¶ç¼–è¾‘sudo cp db.127 db.10.0.0sudo vim db.10.0.0
æ·»åŠ 100çš„åå‘è§£æåˆ°dns.voidking.comï¼š
;; BIND reverse data file for local loopback interface;$TTL    604800@       IN      SOA     localhost. root.localhost. (                              1         ; Serial                         604800         ; Refresh                          86400         ; Retry                        2419200         ; Expire                         604800 )       ; Negative Cache TTL;@       IN      NS      voidking.com.100     IN      PTR     dns.voidking.com.

æµ‹è¯•1ã€æµ‹è¯•è®¿é—®ping dns.voidking.comè¿™æ¬¡è®¿é—®ä¼šæç¤º connection timed out: no servers could be reachedï¼Œæˆ–è€…æç¤º ping: unknown host dns.voidking.com
2ã€é‡å¯dnsæœåŠ¡sudo /etc/init.d/bind9 restart
3ã€æµ‹è¯•è®¿é—®ping dns.voidking.comè¿™æ¬¡è®¿é—®ï¼Œå°±å¯ä»¥æ­£å¸¸pingåˆ°æœåŠ¡å™¨100çš„ipåœ°å€ã€‚
host 10.0.0.100ï¼Œå¯ä»¥çœ‹åˆ°10.0.0.100ç»‘å®šåˆ°äº†dns.voidking.comã€‚
è‡³æ­¤ï¼ŒDNSæœåŠ¡å™¨å·²ç»é…ç½®æˆåŠŸã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬æœ¬åœ°çš„è¿™ä¸ªDNSæœåŠ¡å™¨ä¸Šå­˜çš„åŸŸåå¤ªå°‘äº†ï¼Œæ¯”å¦‚ping www.baidu.comï¼Œå°±ä¼špingä¸é€šã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®è½¬å‘æœåŠ¡å™¨ã€‚
é…ç½®è½¬å‘æœåŠ¡å™¨1ã€ç¼–è¾‘named.conf.optionssudo vim named.conf.options
forwardersè®¾ç½®è½¬å‘DNSä¸º180.76.76.76ï¼Œallow-queryè®¾ç½®ä¸º0.0.0.0/0ï¼š
options &#123;        directory &quot;/var/cache/bind&quot;;        // If there is a firewall between you and nameservers you want        // to talk to, you may need to fix the firewall to allow multiple        // ports to talk.  See http://www.kb.cert.org/vuls/id/800113        // If your ISP provided one or more IP addresses for stable        // nameservers, you probably want to use them as forwarders.        // Uncomment the following block, and insert the addresses replacing        // the all-0&#x27;s placeholder.        forwarders &#123;                180.76.76.76;        &#125;;        allow-query &#123;                0.0.0.0/0;        &#125;;        //========================================================================        // If BIND logs error messages about the root key being expired,        // you will need to update your keys.  See https://www.isc.org/bind-keys        //========================================================================        dnssec-validation auto;        auth-nxdomain no;    # conform to RFC1035        listen-on-v6 &#123; any; &#125;;&#125;;

2ã€é‡å¯DNSæœåŠ¡sudo /etc/init.d/bind9 restart
3ã€æµ‹è¯•è®¿é—®ping www.baidu.com
4ã€å…¶ä»–æœºå™¨æµ‹è¯•è®¿é—®åŒå±€åŸŸç½‘ä¸»æœºåœ¨/etc/resolv.confä¸­æ·»åŠ ï¼š
nameserver 10.0.0.100

ç„¶åping dns.voidking.comï¼Œping www.baidu.com
åè®°è‡³æ­¤ï¼ŒDNS Serverå®‰è£…é…ç½®æˆåŠŸï¼Œæ›´é«˜çº§çš„ç”¨æ³•éœ€è¦æ—¶å†å»å­¦ä¹ ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>dns</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntuç³»ç»Ÿæ‰¹é‡è‡ªåŠ¨å®‰è£…</title>
    <url>/dev-ubuntu-auto-install/</url>
    <content><![CDATA[å‰è¨€ã€ŠUbuntu 14.04.5 Serverç‰©ç†æœºå®‰è£…ã€‹ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬å®‰è£…äº†ä¸€å°Ubuntu ServeræœåŠ¡å™¨ï¼Œæ•´ä¸ªè¿‡ç¨‹èŠ±è´¹äº†å¾ˆå¤šæ—¶é—´ã€‚ä»¤äººéš¾è¿‡çš„æ˜¯ï¼Œè¿˜æœ‰15å°æœºå™¨éœ€è¦å®‰è£…ï¼æœ¬æ¥æ‰“ç®—æ¯å¤©å®‰è£…ä¸ªä¸€ä¸¤å°ï¼Œæ…¢æ…¢æ¥ï¼Œä»Šå¤©è€å¸ˆæé†’è¯´ä¸ºä»€ä¹ˆä¸ä½¿ç”¨è„šæœ¬å‘¢ï¼Ÿå¯¹å•Šï¼Œä¸ºä»€ä¹ˆä¸è¯•è¯•è„šæœ¬å‘¢ï¼è¿™æ˜¯ä¸€ä¸ªæ€è·¯ã€‚çªç„¶æƒ³èµ·å¸ˆå…„æ›¾è¯´ï¼Œæœºæˆ¿çš„æœºå™¨ç³»ç»Ÿå®‰è£…éƒ½æ˜¯é€šè¿‡ç½‘ç»œï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ€è·¯å•Šï¼
æŒ‰ç…§ä¸Šé¢ä¸¤ä¸ªæ€è·¯ï¼Œé‚£å°±ç ”ç©¶ä¸‹æ‰¹é‡å®‰è£…Ubuntuç³»ç»Ÿçš„æ–¹æ³•ï¼


åŸç†ç¯‡å†å²å‚è€ƒPXEã€kickstartä¸preseedç®€ä»‹ã€Linuxè£…æœºåˆ©å™¨Cobblerç®€è¿°å’Œubuntu 14.04 æ— äººèŒå®ˆå…¨è‡ªåŠ¨å®‰è£…-åŸºç¡€çŸ¥è¯†ä¸­ï¼ŒéƒåŒå­¦ç®€å•å½’çº³äº†æ‰¹é‡è£…æœºçš„å‘å±•ã€‚
å†å²ä¸Šï¼Œå¾ˆå¤šåŒå­¦éƒ½é‡åˆ°è¿‡å’Œæˆ‘åŒæ ·çš„é—®é¢˜ï¼Œæœºå™¨å¤ªå¤šï¼Œéœ€è¦æŒ¨ä¸ªè£…æœºï¼Œç®€ç›´å°±æ˜¯æŠ˜ç£¨ï¼
äºæ˜¯ï¼Œä¸ºäº†é™ä½æ‰¹é‡è£…æœºçš„éš¾åº¦ï¼Œå‡ºç°äº†PXEæŠ€æœ¯ï¼Œå®ƒå°†æ“ä½œç³»ç»Ÿè¿œç¨‹ä¸‹è½½åˆ°æœ¬åœ°è¿è¡Œï¼Œæœ‰äº†è¿™ä¸ªæŠ€æœ¯ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†æŒ¨ä¸ªæœºå™¨æ’Uç›˜å®‰è£…ç³»ç»Ÿã€‚
æœ‰äº†PXEæŠ€æœ¯ï¼Œä¾ç„¶éœ€è¦åœ¨å®‰è£…çš„è¿‡ç¨‹ä¸­ä¸åœåœ°ä¸æœºå™¨è¿›è¡Œäº¤äº’ï¼Œè®¾ç½®é€‰é¡¹ï¼Œè´¹æ—¶è´¹åŠ›ã€‚ä¸ºäº†å‡è½»åŒå­¦ä»¬çš„å·¥ä½œé‡ï¼ŒRedHatæ¨å‡ºäº†kickstartï¼Œåœ¨å®‰è£…æ“ä½œç³»ç»Ÿå‰å°†å…¶ä¸­å‡ºç°çš„å„ç§é—®é¢˜çš„åº”ç­”å†…å®¹æå‰å†™å¥½ï¼Œä½¿æ•´ä¸ªæ“ä½œç³»ç»Ÿçš„å®‰è£…å¯ä»¥è‡ªåŠ¨å®Œæˆã€‚Debianç³»çš„Ubuntuç­‰æ„Ÿè§‰kickstartå¯¹è‡ªå·±ä¸å¤Ÿå‹å–„ï¼Œä¸èƒ½å®Œå…¨æ»¡è¶³è‡ªå·±çš„è¦æ±‚ï¼Œäºæ˜¯æ¨å‡ºäº†preseedã€‚
å†åæ¥ï¼Œå› ä¸ºkickstartéš¾åº¦ç³»æ•°å¤ªé«˜ï¼ŒRedHadåˆæ¨å‡ºäº†cobblerï¼ŒæŠŠæ‰¹é‡è£…æœºçš„éš¾åº¦é™ä½åˆ°äº†å°å­¦æ°´å¹³ã€‚
PXEPXEæ˜¯Intelå…¬å¸å¼€å‘çš„å°†æ“ä½œç³»ç»Ÿè¿œç¨‹ä¸‹è½½åˆ°æœ¬åœ°è¿è¡Œçš„ä¸€ç§æŠ€æœ¯ã€‚
æœ¬åœ°ç½‘å¡ROMä¸­åŒ…å«æœ‰PXEå®¢æˆ·ç«¯è½¯ä»¶ã€‚ç½‘å¡å¯åŠ¨æ—¶ä¼šå‘å‡ºDHCPè¯·æ±‚ï¼Œä»PXEæœåŠ¡å™¨ç«¯è·å¾—åŠ¨æ€IPåœ°å€ã€ç½‘å…³åŠTFTPæœåŠ¡å™¨ä¿¡æ¯åï¼Œå®ƒä¼šè‡ªåŠ¨ä¸‹è½½ä¸€ä¸ªç”¨äºå¼•å¯¼æ“ä½œç³»ç»Ÿçš„å¯åŠ¨è½¯ä»¶åŒ…åˆ°æœ¬åœ°å†…å­˜ï¼ˆä¸åŒçš„æ“ä½œç³»ç»Ÿä½¿ç”¨ä¸åŒçš„PXEå¼•å¯¼æ–‡ä»¶ï¼‰ä¸­ï¼Œå†é€šè¿‡æ­¤è½¯ä»¶åŠ è½½æ“ä½œç³»ç»Ÿå¯åŠ¨æ–‡ä»¶ï¼Œä»è€Œå¼€å§‹æ“ä½œç³»ç»Ÿçš„å®‰è£…å·¥ä½œã€‚
PXEçš„è¯¦ç»†ä»‹ç»è¯·å‚è€ƒè‡ªåŠ¨åŒ–è¿ç»´ä¹‹-PXEå®ç°ç³»ç»Ÿæ‰¹é‡è‡ªåŠ¨å®‰è£…å’ŒPXEç½‘ç»œè£…æœºæ”»ç•¥ã€‚
kickstartä¸preseedåœ¨æˆ‘ä»¬æ‰‹åŠ¨å®‰è£…æ“ä½œç³»ç»Ÿæ—¶ï¼Œéœ€è¦å›ç­”å„ç§æç¤ºé—®é¢˜ï¼Œè€Œé’ˆå¯¹æŸç§ç‰¹å®šåº”ç”¨æ—¶ï¼Œè¿™ç§å›ç­”å®Œå…¨æœ‰ç« å¯å¾ªï¼Œå¦‚æœæˆ‘ä»¬èƒ½åœ¨å®‰è£…æ“ä½œç³»ç»Ÿæ—¶å°†å…¶ä¸­å‡ºç°çš„å„ç§é—®é¢˜çš„åº”ç­”å†…å®¹æå‰å†™å¥½ï¼Œé‚£ä¹ˆæ•´ä¸ªæ“ä½œç³»ç»Ÿçš„å®‰è£…å°±å¯ä»¥è‡ªåŠ¨å®Œæˆã€‚
kickstartæ˜¯RedHatå…¬å¸é’ˆå¯¹è‡ªåŠ¨å®‰è£…RedHatã€Fedoraä¸CentOSè¿™3ç§åŒä¸€ä½“ç³»çš„æ“ä½œç³»ç»Ÿè€Œåˆ¶å®šçš„é—®ç­”è§„èŒƒã€‚å®ƒä¸€èˆ¬ä¼šä»¥.cfgä½œä¸ºæ–‡ä»¶åç¼€åï¼Œä¸ä»…å¯ä»¥è‡ªåŠ¨åº”ç­”ä¸€äº›ç®€å•é—®é¢˜ï¼Œè¿˜å¯ä»¥æŒ‡å®šæ“ä½œç³»ç»Ÿéœ€è¦å®‰è£…çš„å„ç§è½¯ä»¶åŒ…ï¼Œæ›´å¯ä»¥åœ¨æ“ä½œç³»ç»Ÿå®Œè£…å®Œæˆåè‡ªåŠ¨æ‰§è¡Œä¸€äº›è„šæœ¬ï¼Œè¿™äº›è„šæœ¬å¯ä»¥è®©æˆ‘ä»¬ç›´æ¥é…ç½®ç³»ç»Ÿã€‚
é€šå¸¸ï¼Œkickstarté…ç½®æ–‡ä»¶é€šè¿‡å‘½ä»¤è¡Œå·¥å…·system-config-kickstartç”Ÿæˆã€‚å½“ç„¶ï¼Œæˆ‘ä»¬æ›´å–œæ¬¢åœ¨CentOSå›¾å½¢ç•Œé¢ç¯å¢ƒä¸‹ç”Ÿæˆç”¨äºå®šåˆ¶æ“ä½œç³»ç»Ÿå®‰è£…çš„é…ç½®æ–‡ä»¶ã€‚
preseedåˆ™æ˜¯Debian/Ubuntuæ“ä½œç³»ç»Ÿè‡ªåŠ¨å®‰è£…çš„é—®ç­”è§„èŒƒï¼ŒåŒæ ·å¯ä»¥é¢„å®šä¹‰Ubuntuå¦‚ä½•å®‰è£…ï¼Œå…¶é…ç½®æ›´å¤šé€šè¿‡æ‰‹åŠ¨å¤„ç†ã€‚
cobblerRedHatåœ¨2008å¹´å‘å¸ƒäº†ç½‘ç»œå®‰è£…æœåŠ¡å™¨å¥—ä»¶ cobblerï¼ˆè¡¥é‹åŒ ï¼‰ï¼Œå®ƒé›†æˆäº†PXEã€DHCPã€HTTPã€TFTPã€kickstartç­‰æœåŠ¡ï¼Œç›¸å¯¹ä¹‹å‰çš„ kickstart ï¼Œèƒ½å¤Ÿæ›´åŠ å¿«æ·ã€æ–¹ä¾¿çš„æ‰¹é‡å¸ƒç½²redhatã€centosç±»ç³»ç»Ÿã€‚
é€‰æ‹©ç”±ä¸Šé¢çš„åŸºç¡€æ¦‚å¿µæˆ‘ä»¬äº†è§£åˆ°ï¼Œå¯é€‰æ‹©çš„æŠ€æœ¯ç»„åˆæœ‰ï¼š

PXE+DHCP+HTTP+TFTP+kickstart
PXE+DHCP+HTTP+TFTP+preseed
PXE+DHCP+HTTP+TFTP+kickstart+preseed
PXE+cobbler
PXE+cobbler+preseed

æœ¬æ–‡ï¼Œæˆ‘ä»¬é€‰æ‹©PXE+DHCP+HTTP+TFTP+kickstart+preseedï¼Œä¸»è¦å‚è€ƒPXEæ— äººå€¼å®ˆç½‘ç»œå®‰è£…Ubuntu14.04 ã€ PXE+kickstartè‡ªåŠ¨å®‰è£…ubuntu14.04 å’Œ åœ¨ Ubuntu 14.04 ä¸­é…ç½® PXE æœåŠ¡å™¨ã€‚
å®è·µç¯‡PXEæœåŠ¡å™¨PXEæœåŠ¡å™¨é€‰æ‹©æˆ‘ä»¬æ‰‹åŠ¨å®‰è£…å¥½çš„é‚£ä¸€å°ï¼Œç³»ç»Ÿæ˜¯Ubuntu 14.04.5 Server (64-bit)ç‰ˆï¼Œå½“å‰IPä¸º172.16.0.213ã€‚
é…ç½®ä¸ºPXEæœåŠ¡å™¨åç½‘æ®µä¸º10.0.0.0/8ï¼ŒIPä¸º10.0.0.100ã€‚
DHCP1ã€å®‰è£…isc-dhcp-serversudo apt-get update
sudo apt-get install isc-dhcp-server -y
2ã€æŸ¥çœ‹ç½‘å¡å’Œipip addæˆ–è€…ifconfigï¼ŒæŸ¥çœ‹æ­£åœ¨ä½¿ç”¨çš„å±€åŸŸç½‘ç½‘å¡ï¼Œå‡è®¾ä¸ºeth0ã€‚
3ã€æŒ‡å®šdhcpç½‘å¡sudo vim /etc/default/isc-dhcp-serveræ‹‰åˆ°æœ€åº•éƒ¨ï¼Œä¿®æ”¹ä¸ºï¼š
INTERFACES=&quot;eth0&quot;

4ã€é…ç½®dhcpæœåŠ¡sudo vim /etc/dhcp/dhcpd.confåœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ï¼š
subnet 10.0.0.0 netmask 255.0.0.0 &#123;    range 10.0.0.101 10.0.0.200;    option subnet-mask 255.0.0.0;    option routers 10.0.0.100;    option broadcast-address 10.255.255.255;    filename &quot;pxelinux.0&quot;;    next-server 10.0.0.100;&#125;

å­ç½‘å’Œæ©ç å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦è®¾ç½®ã€‚
filename &quot;pxelinux.0&quot;;ï¼ŒæŒ‡å®šPXEå¯åŠ¨æ–‡ä»¶åã€‚next-server 10.0.0.100;ï¼ŒæŒ‡å®šPXEæœåŠ¡å™¨IPåœ°å€ï¼ŒTFTPæœåŠ¡å™¨IPåœ°å€ã€‚
5ã€é‡å¯æœåŠ¡service isc-dhcp-server restart
å¤‡æ³¨ï¼šä¹Ÿå¯ä»¥å®‰è£…DNSmasqï¼ŒDNSmasqå®é™…ä¸Šæ˜¯ä¸€ä¸ªé›†æˆå·¥å…·ï¼ŒåŒ…å«äº†DNSã€DHCPã€TFTPæœåŠ¡å™¨ã€‚
TFTPä¸»è¦å‚è€ƒTftpd-hpa
1ã€å®‰è£…tftpd-hpaapt-get install tftpd-hpa -y
2ã€ç»™æ ¹ç›®å½•æ·»åŠ è¯»å†™æƒé™sudo chmod 777 /var/lib/tftpboot/
3ã€æµ‹è¯•tftp
apt-get install tftp -ycd ~tftp 127.0.0.1get version.info

4ã€tftpdå¼€å¯å…³é—­å‘½ä»¤sudo /etc/init.d/tftpd-hpa start
sudo /etc/init.d/tftpd-hpa stop
apache21ã€å®‰è£…apache2sudo apt-get install apache2 -y
webæ ¹ç›®å½•æ˜¯ /var/www/html/
2ã€æµ‹è¯•apache2curl 127.0.0.1
3ã€é‡å¯å‘½ä»¤sudo /etc/init.d/apache2 restart
æ–‡ä»¶å‡†å¤‡1ã€ä¸Šä¼ ubuntu-14.04.5-server-amd64.isoåˆ°ç”¨æˆ·ç›®å½•ã€‚ä½¿ç”¨xftpä¸Šä¼ ï¼Œæˆ–è€…ä½¿ç”¨scpå‘½ä»¤ï¼Œè¿™é‡Œä½¿ç”¨scpå‘½ä»¤ã€‚æ‰“å¼€git bashï¼Œæ‰§è¡Œï¼šscp ubuntu-14.04.5-server-amd64.iso test@172.16.0.213:~
2ã€æŒ‚è½½ubuntu-14.04.5-server-amd64.isoåˆ°ubuntuç›®å½•ã€‚åœ¨ç”¨æˆ·ç›®å½•æ‰§è¡Œï¼šsudo mkdir /var/www/html/ubuntu
sudo mount ubuntu-14.04.5-server-amd64.iso /var/www/html/ubuntu
3ã€æ‹·è´éƒ¨åˆ†æ–‡ä»¶åˆ°tftpsudo cp -r /var/www/html/ubuntu/install/netboot/* /var/lib/tftpboot/
4ã€æ‹·è´seedæ–‡ä»¶åˆ°webæ ¹ç›®å½•sudo cp /var/www/html/ubuntu/preseed/ubuntu-server.seed /var/www/html/
5ã€ç¼–è¾‘seedæ–‡ä»¶sudo vim /var/www/html/ubuntu-server.seed
åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ï¼š
d-i live-installer/net-image string http://10.0.0.100/ubuntu/install/filesystem.squashfsd-i pkgsel/include string openssh-server

ï¼ˆ1ï¼‰å› ä¸ºåœ¨ubuntu12.10ç‰ˆæœ¬ä»¥åï¼Œå®‰è£…ä¸€äº›åŒ…ä¼šä¾èµ–äºé¢„é…ç½®çš„æ–‡ä»¶ç³»ç»Ÿï¼Œè¿™å°±æ˜¯å¯¼è‡´ä½¿ç”¨kickstartæ–¹å¼æ— æ³•æˆåŠŸå®‰è£…çš„åŸå› ã€‚ï¼ˆ2ï¼‰è‡ªåŠ¨å®‰è£…sshæœåŠ¡ã€‚
kickstartks.cfgä¸­ä¿å­˜çš„æ˜¯å®‰è£…ç³»ç»Ÿè¿‡ç¨‹ä¸­é»˜è®¤çš„ç³»ç»Ÿé…ç½®ï¼Œæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶å°±éœ€è¦å®‰è£…ä¸­å¯¹ç³»ç»Ÿæ‰‹åŠ¨äº¤äº’è®¾ç½®ã€‚kickstartåˆ™æ˜¯æ–¹ä¾¿ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶çš„ï¼Œä¸ç”¨å®ƒçš„è¯ä¹Ÿå¯ä»¥æ‰‹å·¥ç¼–è¾‘ã€‚
kickstartéœ€è¦GUIç•Œé¢ï¼Œæˆ‘å› ä¸ºæ˜¯å®‰è£…çš„serverï¼Œæ‰€ä»¥éœ€è¦å®‰è£…æ¡Œé¢ï¼ˆå¦‚æœæ˜¯desktopç‰ˆæœ¬å°±ä¸éœ€è¦ï¼‰ã€‚
1ã€å®‰è£…å›¾å½¢ç•Œé¢sudo apt-get install ubuntu-desktop -y
è¿‡ç¨‹éå¸¸ä¹…ï¼Œè¯·å…ˆå»ç»§ç»­è¯»è®ºæ–‡ã€‚
2ã€å®‰è£…kickstartsudo apt-get install system-config-kickstart -y
3ã€ä½¿ç”¨å±å¹•é”®ç›˜è¿æ¥ä¸»æœºï¼Œè¿›å…¥å›¾å½¢ç•Œé¢sudo startxï¼Œæˆ–è€…ç›´æ¥é‡å¯sudo reboot
4ã€ç‚¹å‡»å³ä¸Šè§’â€œSearch your computer and online resourcesâ€ï¼Œæœç´¢kickstartï¼Œå¯åŠ¨kickstartã€‚
5ã€ç„¶åï¼ŒæŒ‰ç…§å›¾ç¤ºé€‰æ‹©kickstartçš„é…ç½®ã€‚
é™„ï¼šä¸Šå›¾çš„é•¿å›¾åˆæˆå·¥å…·ä¸º ç¾å›¾ç§€ç§€ç½‘é¡µç‰ˆ
6ã€ä¿å­˜ks.cfgåï¼ŒæŸ¥çœ‹ks.cfgå†…å®¹ä¸ºï¼š
#Generated by Kickstart Configurator#platform=AMD64 or Intel EM64T#System languagelang en_US#Language modules to installlangsupport en_US#System keyboardkeyboard us#System mousemouse#System timezonetimezone Asia/Shanghai#Root passwordrootpw --disabled#Initial useruser test --fullname &quot;test&quot; --iscrypted --password $1$AKq0i3Yu$Tunuha7bYwq5uUV62F2nF0#Reboot after installationreboot#Use text mode installtext#Install OS instead of upgradeinstall#Use Web installationurl --url http://10.0.0.100/ubuntu#System bootloader configurationbootloader --location=mbr #Clear the Master Boot Recordzerombr yes#Partition clearing informationclearpart --all --initlabel #System authorization infomationauth  --useshadow  --enablemd5 #Network informationnetwork --bootproto=dhcp --device=eth0#Firewall configurationfirewall --disabled --trust=eth0 --ssh #Do not configure the X Window Systemskipx

7ã€ç§»åŠ¨ks.cfgåˆ°webæ ¹ç›®å½•sudo mv ks.cfg /var/www/html/
8ã€ä¿®æ”¹txt.cfgsudo vim /var/lib/tftpboot/ubuntu-installer/amd64/boot-screens/txt.cfgï¼ŒåŸtxt.cfgä¸ºï¼š
default installlabel install        menu label ^Install        menu default        kernel ubuntu-installer/amd64/linux        append vga=788 initrd=ubuntu-installer/amd64/initrd.gz --- quiet label cli        menu label ^Command-line install        kernel ubuntu-installer/amd64/linux        append tasks=standard pkgsel/language-pack-patterns= pkgsel/install-language-support=false vga=788 initrd=ubuntu-installer/amd64/initrd.gz --- quiet 

ä¿®æ”¹ä¸ºï¼š
default installlabel install        menu label ^Install        menu default        kernel ubuntu-installer/amd64/linux        append ks=http://10.0.0.100/ks.cfg preseed/url=http://10.0.0.100/ubuntu-server.seed netcfg/get_nameservers=10.0.0.100 vga=788 initrd=ubuntu-installer/amd64/initrd.gz --- quiet label cli        menu label ^Command-line install        kernel ubuntu-installer/amd64/linux        append tasks=standard pkgsel/language-pack-patterns= pkgsel/install-language-support=false vga=788 initrd=ubuntu-installer/amd64/initrd.gz --- quiet

pxelinux.cfgç¼–è¾‘pxelinux.cfgé…ç½®æ–‡ä»¶sudo vim /var/lib/tftpboot/pxelinux.cfg/default
# D-I config version 2.0include ubuntu-installer/amd64/boot-screens/menu.cfgdefault ubuntu-installer/amd64/boot-screens/vesamenu.c32prompt 0timeout 60
timeouté»˜è®¤æ˜¯0ï¼Œæ”¹ä¸º60ï¼ˆ6ç§’åè‡ªåŠ¨é€‰æ‹©installé€‰é¡¹ï¼‰ã€‚
æ”¶å°¾1ã€é‡æ–°é…ç½®IPsudo vim /etc/network/interfacesï¼Œä¿®æ”¹eth0çš„IPä¸º10.0.0.100ï¼š
# This file describes the network interfaces available on your system# and how to activate them. For more information, see interfaces(5).# The loopback network interfaceauto loiface lo inet loopback# The primary network interfaceauto eth0iface eth0 inet staticaddress 10.0.0.100gateway 10.0.0.100netmask 255.0.0.0

2ã€é‡å¯eth0sudo ifdown eth0ï¼Œsudo ifup eth0
3ã€é‡å¯dhcpsudo service isc-dhcp-server restart
4ã€é‡æ–°æŒ‚è½½é•œåƒsudo mount ubuntu-14.04.5-server-amd64.iso /var/www/html/ubuntu
5ã€æ£€æŸ¥å„ä¸ªæœåŠ¡ps aux | grep dhcp
ps aux | grep apache
ps aux | grep tftp
6ã€æŠŠPCå’ŒPXEæœåŠ¡å™¨è¿æ¥åˆ°åŒä¸€ä¸ªäº¤æ¢æœºï¼Œæµ‹è¯•ä¸€ä¸‹PCèƒ½å¦è·å–åˆ°IPã€‚
7ã€PCæµè§ˆå™¨è®¿é—® http://10.0.0.100/ubuntu/ ï¼Œæµ‹è¯•èƒ½å¦æ­£å¸¸è®¿é—®WebæœåŠ¡ã€‚
å®‰è£…ç¯‡å®‰è£…æ­¥éª¤1ã€æŠŠPXEæœåŠ¡å™¨å’Œéœ€è¦å®‰è£…ç³»ç»Ÿçš„ä¸»æœºï¼ˆä¸‹æ–‡ç»Ÿä¸€ç§°ä¸ºç›®æ ‡ä¸»æœºï¼‰è¿æ¥åˆ°åŒä¸€ä¸ªäº¤æ¢æœºã€‚
2ã€ç›®æ ‡ä¸»æœºå¼€æœºå¯åŠ¨è¿›å…¥BIOSï¼Œé¦–é€‰å¯åŠ¨é¡¹é€‰æ‹©PXEï¼Œä¿å­˜é€€å‡ºã€‚
3ã€ç„¶åï¼Œç›®æ ‡ä¸»æœºå°±ä¼šè‡ªåŠ¨è·å–IPåœ°å€ï¼Œè¿æ¥PXEæœåŠ¡å™¨ï¼Œè¿›å…¥åˆ°å®‰è£…ç•Œé¢ã€‚
4ã€åœ¨è‡ªåŠ¨ç½‘ç»œé…ç½®çš„æ—¶å€™å¤±è´¥ï¼ŒæŠ¥é”™â€œNetwork autoconfiguration failedâ€ï¼Œå¤šæ¬¡å°è¯•ä¾ç„¶å¤±è´¥ã€‚Alt+F2ï¼Œè¿›å…¥å‘½ä»¤è¡Œç•Œé¢ï¼Œip addï¼ŒæŸ¥çœ‹åˆ°å·²ç»è·å–åˆ°IPåœ°å€ã€‚
Alt+F1ï¼Œåˆ‡æ¢å›å®‰è£…ç•Œé¢ï¼Œè¿™æ—¶éœ€è¦æ‰‹åŠ¨é…ç½®ï¼Œä¸€æ¬¡ä¸è¡Œå°±å†æ¥ä¸€æ¬¡ã€‚

5ã€å®‰è£…è¿‡ç¨‹ä¸­ï¼Œåˆ†åŒºåå¡ä½ï¼Œéœ€è¦æ‰‹åŠ¨é€‰æ‹©ç¡®è®¤åˆ†åŒºã€‚
6ã€ä¹‹åï¼Œæ— éœ€ä»»ä½•æ“ä½œï¼Œç›´åˆ°å®‰è£…æˆåŠŸã€‚
7ã€æµ‹è¯•sshæœåŠ¡ssh test@localhostï¼Œé¡ºåˆ©ç™»å½•ã€‚
ä»¥ä¸Šå®‰è£…è¿‡ç¨‹ï¼Œå·²ç»çœå»äº†å¾ˆå¤šäº¤äº’æ­¥éª¤ï¼Œä½†æ˜¯ä¾ç„¶æ¯”è¾ƒéº»çƒ¦ï¼Œä¸»è¦å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼šä¸€ä¸ªæ˜¯è‡ªåŠ¨é…ç½®ç½‘ç»œçš„é—®é¢˜ï¼Œä¸€ä¸ªæ˜¯éœ€è¦åˆ†åŒºç¡®è®¤çš„é—®é¢˜ã€‚ä¸‹é¢å°è¯•è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ã€‚
ç½‘ç»œé—®é¢˜1ã€å¯¹äºç½‘ç»œé…ç½®é—®é¢˜ï¼Œåœ¨14.04 server PXE installation fails at â€œConfigure the networkâ€ page æ‰¾åˆ°äº†å¯èƒ½çš„ç­”æ¡ˆï¼Œä¹Ÿè®¸æ˜¯/var/lib/tftpboot/pxelinux.cfg/default æ–‡ä»¶çš„é—®é¢˜ï¼Œä¿®æ”¹ä¸ºï¼š
# D-I config version 2.0include ubuntu-installer/amd64/boot-screens/menu.cfgdefault linuxlabel linux  menu default  menu label Linux  kernel ubuntu-installer/amd64/linux  append ks=http://10.0.0.100/ks.cfg preseed/url=http://10.0.0.100/ubuntu-server.seed vga=normal initrd=ubuntu-installer/amd64/initrd.gz --prompt 0timeout 60
é—®é¢˜ä¾æ—§ã€‚æœ€å¥½å†æ”¹å›åŸæ¥çš„/var/lib/tftpboot/pxelinux.cfg/defaultæ–‡ä»¶é…ç½®ï¼Œå› ä¸ºè¿™æ ·å¯åŠ¨æ—¶é€šè¿‡DHCPè·å–IPçš„æ—¶é—´æ˜æ˜¾å˜é•¿äº†ï¼Œæœ‰æ—¶è¿˜ä¼šå‡ºç°æ— æ³•è·å–IPä»¥è‡³äºæ— æ³•å¯åŠ¨å®‰è£…çš„æƒ…å†µã€‚å¦‚æœæ²¡æœ‰è·å–åˆ°IPï¼Œè®°å¾—åŠæ—¶æŒ‰ä¸‹ctrl+alt+delï¼Œè¿›è¡Œé‡å¯ï¼Œä¸ç„¶è¦ç­‰å¾ˆä¹…æ‰èƒ½å¼€å§‹ç¬¬äºŒæ¬¡å°è¯•ã€‚
2ã€è«éæ˜¯dhcpé…ç½®çš„é—®é¢˜ï¼Ÿå‚è€ƒ14.04 server PXE installation fails at â€œConfigure the networkâ€ pageä¿®æ”¹ç½‘å¡é…ç½®ä¸ºï¼š
# This file describes the network interfaces available on your system# and how to activate them. For more information, see interfaces(5).# The loopback network interfaceauto loiface lo inet loopback# The primary network interfaceauto eth0iface eth0 inet staticaddress 10.0.0.100netmask 255.0.0.0gateway 10.0.0.100broadcast 10.255.255.255dns-nameservers 10.0.0.100

é‡å¯ç½‘ç»œï¼Œsudo ifdown eth0ï¼Œsudo ifup eth0ã€‚é‡å¯dhcpï¼Œsudo service isc-dhcp-server restartã€‚é—®é¢˜ä¾æ—§ã€‚
3ã€å‚è€ƒInstall And Configure PXE Server On Ubuntu 14.04 LTSï¼Œsudo vim /etc/dhcp/dhcpd.confï¼Œåœ¨æœ€åæ·»åŠ ï¼š 
allow booting;allow bootp;option option-128 code 128 = string;option option-129 code 129 = text;next-server 10.0.0.100;filename &quot;pxelinux.0&quot;;

é‡å¯dhcpï¼Œsudo service isc-dhcp-server restartã€‚é—®é¢˜ä¾æ—§ã€‚
4ã€è«éæ˜¯å› ä¸ºæ²¡æœ‰å®‰è£…DNSï¼Ÿå‚è€ƒã€ŠUbuntu14.04é…ç½®DNS Serverã€‹ï¼Œå®‰è£…å¥½DNSã€‚é—®é¢˜ä¾æ—§ã€‚
5ã€å‚è€ƒpreseedsï¼Œsudo vim /var/www/html/ubuntu-server.seedï¼Œåœ¨å°¾éƒ¨æ·»åŠ ï¼š
d-i netcfg/choose_interface select autod-i netcfg/get_hostname string $hostname
é—®é¢˜ä¾æ—§ã€‚
6ã€åˆ é™¤æ­¥éª¤ç¬¬5æ¬¡å°è¯•çš„å†…å®¹ï¼Œå‚è€ƒï¼Œsudo vim /var/www/html/ubuntu-server.seedï¼Œåœ¨å°¾éƒ¨æ·»åŠ ï¼š
d-i netcfg/choose_interface select eth0d-i netcfg/dhcp_timeout string 60d-i netcfg/get_hostname string ubuntud-i netcfg/get_domain string ubuntu-domain
é—®é¢˜ä¾æ—§ã€‚
7ã€åˆ é™¤æ­¥éª¤ç¬¬6æ¬¡å°è¯•çš„å†…å®¹ï¼Œå‚è€ƒåŸºäºPXEå’Œpreseedå®‰è£…Ubuntu-14.04 Server 64ä½æ“ä½œç³»ç»Ÿï¼Œsudo vim /var/www/html/ubuntu-server.seedï¼Œåœ¨å°¾éƒ¨æ·»åŠ ï¼š
d-i netcfg/choose_interface select eth0d-i netcfg/dhcp_failed noted-i netcfg/dhcp_options select Do not configure the network at this timed-i netcfg/get_hostname string ubuntud-i netcfg/get_domain string ubuntu-domain
é—®é¢˜ä¾æ—§ã€‚
8ã€å‚è€ƒé™„å½• B. ä½¿ç”¨é¢„ç½®è‡ªåŠ¨è¿›è¡Œå®‰è£…ï¼Œsudo vim /var/www/html/ubuntu-server.seedï¼Œåœ¨å°¾éƒ¨æ·»åŠ ï¼š
# If you prefer to configure the network manually, uncomment this line and# the static network configuration below.d-i netcfg/disable_dhcp boolean trued-i netcfg/disable_autoconfig boolean trued-i netcfg/use_autoconfig boolean false# If you want the preconfiguration file to work on systems both with and# without a dhcp server, uncomment these lines and the static network# configuration below.d-i netcfg/dhcp_failed noted-i netcfg/dhcp_options select Configure network manually# Static network configuration.## IPv4 exampled-i netcfg/get_ipaddress string 10.0.0.134d-i netcfg/get_netmask string 255.0.0.0d-i netcfg/get_gateway string 10.0.0.100d-i netcfg/get_nameservers string 10.0.0.100d-i netcfg/confirm_static boolean true
é—®é¢˜ä¾æ—§ã€‚æ„Ÿè§‰netcfgè¿™ä¸ªç³»åˆ—çš„å‘½ä»¤æ ¹æœ¬æ²¡æœ‰ç”Ÿæ•ˆï¼
é™„å½• B. ä½¿ç”¨é¢„ç½®è‡ªåŠ¨è¿›è¡Œå®‰è£…ä¸€æ–‡ä¸­è¯´ï¼Œä¾‹å¦‚ï¼Œä¸ºç½‘å¡è®¾ç½®é™æ€åœ°å€ã€‚å®ƒä½¿åŠ è½½äº†é¢„ç½®æ–‡ä»¶ä»¥åç½‘ç»œé¢„ç½®å†è¿è¡Œä¸€æ¬¡ï¼Œè¿™éœ€è¦å°†ä¸‹é¢çš„å‘½ä»¤åŒ…å«åœ¨ â€œpreseed/runâ€ è„šæœ¬é‡Œé¢ï¼škill-all-dhcp; netcfg
äºæ˜¯åœ¨Is it possible to download a bash script and execute it from a preseed file?å’Œkill-all-dhcpä¸­æ‰¾åˆ°äº†ä½¿ç”¨è„šæœ¬çš„æ–¹æ³•ã€‚ï¼ˆ1ï¼‰åˆ›å»ºè„šæœ¬sudo vim /var/www/html/run.shå†™å…¥å†…å®¹ä¸ºï¼š
#!/bin/sh# Killall for dhcp clients.kill-all-dhcp;netcfg;for client in dhclient udhcpc pump dhcp6c; do        pid=$(pidof $client) || true        [ &quot;$pid&quot; ] || continue        if kill -0 $pid 2&gt;/dev/null; then                kill -TERM $pid                sleep 1                # Still alive? Die!                if kill -0 $pid 2&gt;/dev/null; then                        kill -KILL $pid                fi        fidone

ï¼ˆ2ï¼‰å˜æ›´æƒé™sudo chmod a+x /var/www/html/run.sh
ï¼ˆ3ï¼‰åœ¨ubuntu-server.seedæ–‡ä»¶ä¸­æ·»åŠ ä¸€è¡Œï¼š
d-i preseed/run string run.sh
é—®é¢˜ä¾æ—§ï¼Œä½†æ˜¯Alt+F2è¿›å…¥å‘½ä»¤è¡Œï¼Œå‘ç°è·å–çš„IPç¡®å®æ²¡æœ‰äº†ã€‚
9ã€è«éï¼Œæ˜¯å› ä¸ºDHCPçš„ç½‘æ®µé—®é¢˜ï¼ŸæŠ˜è…¾äº†ä¸€ä¸ªå¤šå°æ—¶ï¼ŒPXEæœåŠ¡å™¨åœ°å€æ¢æˆ192.168.34.1ï¼ŒDHCPæ¢æˆäº†192.168.34.0ç½‘æ®µï¼Œç„¶è€Œå¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ã€‚
æœ€ç»ˆï¼Œæˆ‘çŒœæµ‹è¿™ä¸ªé”…æ˜¯ubuntu14çš„ï¼Œæˆ–è€…æ˜¯ç”µè„‘ç¡¬ä»¶çš„ã€‚åœ¨askubuntuä¸Šè¿›è¡Œäº†æé—®ï¼Œä½†æ˜¯æ²¡æœ‰å¾—åˆ°æ»¡æ„çš„å›å¤ã€‚
åˆ†åŒºé—®é¢˜1ã€å‚è€ƒUbuntu Kickstart installation using LVM waits for inputï¼Œä¿®æ”¹ks.cfgæ–‡ä»¶ã€‚
sudo vim /var/www/html/ks.cfgï¼Œæ·»åŠ ï¼š
preseed partman-lvm/confirm_nooverwrite boolean true
é—®é¢˜ä¾æ—§ã€‚
2ã€sudo vim /var/www/html/ks.cfgï¼Œæ·»åŠ ï¼š
preseed partman-lvm/confirm_nooverwrite boolean truepreseed partman-lvm/device_remove_lvm boolean truepreseed partman/confirm_write_new_label boolean truepreseed partman/confirm boolean truepreseed partman/confirm_nooverwrite boolean true

é—®é¢˜ä¾æ—§ã€‚
3ã€åˆ é™¤ks.cfgä¸­æ·»åŠ çš„å†…å®¹ï¼Œå‚è€ƒAutomated Kickstart Partitioningï¼Œsudo vim /var/www/html/ubuntu-server.seedï¼Œåœ¨æœ«å°¾åŠ ä¸Šï¼š
d-i partman/confirm_write_new_label boolean trued-i partman/choose_partition select Finish partitioning and write changes to diskd-i partman/confirm boolean true

åˆ†åŒºæˆåŠŸï¼Œå¼å¼å¼ï¼æŠ˜è…¾äº†ä¸€æ•´å¤©ï¼Œæ€»ç®—æœ‰ç‚¹æˆå°±ï¼Œæ³ªæµæ»¡é¢ã€‚ã€‚ã€‚è®©æˆ‘å®‰é™çš„å“­ä¸€ä¼šã€‚ã€‚ã€‚
åè®°é…ç½®Ubuntuæ‰¹é‡è‡ªåŠ¨å®‰è£…çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°æœ€é‡è¦çš„ä¸¤ä¸ªæ–‡ä»¶æ˜¯/var/www/html/ks.cfg å’Œ /var/www/html/ubuntu-server.seedï¼Œå› ä¸ºä»–ä»¬ä¸¤ä¸ªæ˜¯æ§åˆ¶äº¤äº’çš„ã€‚
æŠ˜è…¾çš„è¿‡ç¨‹ä¸­å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ï¼Œè€Œæœ€ç»ˆçš„æˆæœï¼Œé™¤äº†ç½‘ç»œéœ€è¦æ‰‹åŠ¨é…ç½®ä¹‹å¤–ï¼Œå…¶ä»–éƒ½å¾ˆæ»¡æ„ã€‚æˆ‘ä¼šç»§ç»­å°è¯•è§£å†³ç½‘ç»œé…ç½®çš„é—®é¢˜ï¼Œæœ‰äº†è¿›å±•ï¼Œå†æ›´æ–°æœ¬æ–‡ã€‚
ä¹¦ç­¾PXEæ— äººå€¼å®ˆç½‘ç»œå®‰è£…Ubuntu14.04
KICKSTARTæ— äººå€¼å®ˆå®‰è£…
COBBLERæ— äººå€¼å®ˆå®‰è£…
Cobbler+preseedè‡ªåŠ¨åŒ–å®‰è£…Ubuntuç³»ç»Ÿ
Ubuntu 16.04.2 LTS PXEå…¨è‡ªåŠ¨å®‰è£…
uç›˜å…¨è‡ªåŠ¨å®‰è£… ubuntu server 12.04
CentOS/Ubuntuåˆ¶ä½œè‡ªåŠ¨å®‰è£…isoå®æ“
Installation/UnattendedCD
PXELINUX
ç¬¬äºŒç« ã€å®‰è£ä¼ºæœå™¨èˆ‡ kickstart å¤§é‡éƒ¨ç½²ç”¨æˆ¶ç«¯é›»è…¦
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
        <tag>pxe</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu 14.04.5 Serverç‰©ç†æœºå®‰è£…</title>
    <url>/dev-ubuntu-14.04.5-server-install/</url>
    <content><![CDATA[å‰è¨€æœºæˆ¿é‡Œæœ‰åå‡ å°æœåŠ¡å™¨éœ€è¦å®‰è£…ç³»ç»Ÿï¼Œè¿™é‡Œé€‰æ‹©Ubuntu 14.04.5 Serverç‰ˆã€‚æœ¬æ–‡ï¼Œå°±å›¾æ–‡è®°å½•ä¸€ä¸‹Ubuntu 14.04.5 Server (64-bit)çš„ç‰©ç†æœºçš„å®‰è£…è¿‡ç¨‹ã€‚


æ€è·¯æˆ‘ä»¬çŸ¥é“ï¼Œä½¿ç”¨è™šæ‹Ÿæœºå®‰è£…ubuntuå¾ˆç®€å•ï¼Œé€‰å¥½é…ç½®ï¼Œè®¾ç½®å¥½é•œåƒï¼Œå¯åŠ¨è™šæ‹Ÿæœºä¸€æ­¥æ­¥å®‰è£…å°±å¯ä»¥äº†ã€‚ä½†æ˜¯ï¼Œåœ¨ç‰©ç†æœºä¸Šå®‰è£…å´æ²¡æœ‰é‚£ä¹ˆç®€å•ï¼Œå°¤å…¶æ˜¯serverç‰ˆï¼Œè¿‡ç¨‹ä¸­æœ‰å¾ˆå¤šå‘ã€‚å‡è®¾ä½¿ç”¨Uç›˜å®‰è£…ï¼Œä¸€èˆ¬å®‰è£…æ€è·¯å¦‚ä¸‹ï¼š
1ã€ä¸‹è½½Ubuntu 14.04.5 Server (64-bit)çš„é•œåƒã€‚2ã€ä½¿ç”¨usb-installerã€Win32DiskImagerã€UltraISOç­‰æŠŠé•œåƒå†™å…¥Uç›˜ã€‚3ã€æ’å…¥Uç›˜åˆ°æœåŠ¡å™¨ï¼Œè®¾ç½®BIOSæŠŠUç›˜ä½œä¸ºç¬¬ä¸€å¯åŠ¨é¡¹ã€‚4ã€ä¸€æ­¥æ­¥å®‰è£…é…ç½®ï¼Œè§£å†³å„ç§å‘ã€‚
ç¬¬ä¸€æ¬¡å°è¯•ä¸‹è½½é•œåƒè®¿é—®Ubuntuå®˜ç½‘ï¼Œä¸‹è½½Ubuntu 14.04.5 Server (64-bit)ã€‚
é•œåƒå†™å…¥1ã€è®¿é—®Universal USB Installer â€“ Easy as 1 2 3ï¼Œä¸‹è½½usb-installerã€‚
2ã€åŒå‡»å¯åŠ¨usb-installerï¼ŒæŒ‰ç…§ä¸‹å›¾é€‰æ‹©ï¼Œç„¶åCreateã€‚
3ã€æŠŠé•œåƒæ‹·è´è¿›Uç›˜ã€‚
BIOSè®¾ç½®å¼€æœºæ—¶ï¼Œæç¤ºå¯èƒ½æœ‰ï¼š

Press Esc to enter SETUP
Press F2 go to Setup Utility
Press DEL to enter EFI BIOS SETUP
Press Del run Setup
Press F1 run Setup
Press F2 to Setup

ç­‰ç­‰ï¼ŒæŒ‰ç…§æç¤ºç‹‚ç‚¹å‡ ä¸‹æç¤ºçš„æŒ‰é”®å°±å¯ä»¥è¿›å…¥BIOSç•Œé¢ã€‚é€‰æ‹©é€‰æ‹©Uç›˜ä½œä¸ºç¬¬ä¸€å¯åŠ¨é¡¹ï¼Œä¿å­˜é€€å‡ºã€‚
å®‰è£…é…ç½®å®‰è£…è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š
ä¸çŸ¥é“å¤§å®¶æ³¨æ„åˆ°äº†æ²¡æœ‰ï¼Œåˆ°äº†æœ€åä¸€å¼ å›¾ï¼Œå®é™…ä¸Šå’Œå€’ç¬¬å››å¼ å›¾ç›¸åŒï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¼€å§‹å¾ªç¯äº†ã€‚è€Œæ­¤æ—¶çš„ä¸»æœºè¿˜æ²¡æœ‰ç½‘ç»œï¼Œæ— æ³•ä»ç½‘ç»œä¸‹è½½é•œåƒã€‚
Uç›˜å®‰è£…Ubuntu-14.04.2-serverä¸€æ–‡ç»™å‡ºäº†è§£å†³åŠæ³•ï¼šæŒ‚è½½isoæ–‡ä»¶åˆ°/cdromç›®å½•ã€‚ç„¶è€Œï¼Œæˆ‘çš„æ“ä½œå´å¤±è´¥äº†ã€‚
ç»§ç»­æŸ¥æ‰¾å®‰è£…å¤±è´¥çš„åŸå› ï¼Œæ‰¾åˆ°äº†14.04server LTSå®‰è£…ä¸ºå•¥è·³ä¸è¿‡choose mirror è¿™ä¸€æ­¥éª¤å’Œ14.04.1 server install without internet accessï¼Œå’Œæˆ‘çš„é—®é¢˜ä¸€æ¯›ä¸€æ ·ã€‚æ€€ç–‘æ˜¯usb-installerçš„é—®é¢˜ï¼Œå†³å®šæ¢æˆWin32DiskImagerã€‚
å¤‡æ³¨ï¼šä¹‹å‰åœ¨åŒä¸€å°æœºå™¨ä¸Šï¼Œç”¨usb-installerå®‰è£…ubuntu desktopç‰ˆï¼Œä¸€è·¯ç•…é€šæ— é˜»å®‰è£…æˆåŠŸã€‚ã€‚ã€‚
ç¬¬äºŒæ¬¡å°è¯•ç¬¬äºŒæ¬¡å°è¯•ï¼Œä¸»è¦æ˜¯é‡æ–°åˆ¶ä½œé•œåƒã€‚
é•œåƒå†™å…¥1ã€è®¿é—®Win32DiskImagerå’ŒWin32DiskImager makes an Ubuntu family USB boot drive in Windowsï¼Œä¸‹è½½Win32DiskImagerã€‚
2ã€åŒå‡»å¯åŠ¨Win32DiskImagerï¼ŒæŒ‰ç…§ä¸‹å›¾é€‰æ‹©ï¼Œç„¶åç‚¹å‡»â€œå†™å…¥â€ã€‚
æ­¤æ—¶ï¼Œå‡ºç°ä¸€ä¸ªå‘ï¼ŒUç›˜ç©ºé—´å˜å°äº†ï¼Œå˜æˆäº†2.18MBã€‚è€Œä¸”Uç›˜é‡Œåªæœ‰ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼šefiã€‚ç©ºé—´å¤ªå°ï¼Œä¹Ÿå°±æ— æ³•æŠŠé•œåƒå†æ‹·è´è¿›Uç›˜é‡Œã€‚
ä½¿ç”¨è¿™æ ·ä¸€ä¸ª2.18MBçš„Uç›˜ï¼Œèƒ½å®‰è£…æˆåŠŸï¼Ÿæˆ‘ä¿æŒæ€€ç–‘ã€‚
å®‰è£…é…ç½®ä¸€ç›´åˆ°ä¸Šå›¾ï¼Œéƒ½å’Œç¬¬ä¸€æ¬¡å°è¯•ç›¸åŒã€‚æ¥ä¸‹æ¥å´å‘ç”Ÿäº†å˜åŒ–ï¼šæ³¨æ„ï¼Œåˆ°ä¸Šå›¾çš„æ­¥éª¤æ—¶ï¼Œç‚¹å‡»ç©ºæ ¼é€‰æ‹©å®‰è£…OpenSSH serverã€‚
ç„¶åï¼Œå°±å®‰è£…æˆåŠŸäº†å—ï¼Ÿå¹¶æ²¡æœ‰ï¼å¡åœ¨äº†æœ€åä¸€æ­¥Installing GRUB boot loaderï¼ç­‰äº†20åˆ†é’Ÿï¼Œæ²¡æœ‰ä¸æ¯«åŠ¨é™ã€‚é‡å¯çœ‹çœ‹ï¼Œæœç„¶æ— æ³•å¯åŠ¨ç³»ç»Ÿï¼
ç¦»æˆåŠŸå¦‚æ­¤æ¥è¿‘ï¼Œæœ€åå´å¤±è´¥äº†ï¼Œè“ç˜¦ï¼è«éï¼Œæ˜¯å› ä¸ºæŸä¸ªæ­¥éª¤æ²¡æœ‰é…ç½®å¥½ï¼Ÿäºæ˜¯ï¼Œé‡è£…ï¼Œåœ¨Partition disksä¸€æ­¥ï¼Œé€‰æ‹©yesåç»§ç»­ï¼Œä¾ç„¶å¡åœ¨æœ€åä¸€æ­¥ã€‚
å†æ¥ä¸€æ¬¡ï¼Œåœ¨Partition disksä¸€æ­¥ï¼Œé€‰æ‹©Guided-reuse partitionâ€¦ï¼Œç„¶åï¼Œå±…ç„¶å®‰è£…æˆåŠŸï¼
ä½†æ˜¯ï¼Œé«˜å…´çš„å¤ªæ—©äº†ï¼Œé€‰æ‹©Ubuntuï¼Œå¹¶æ²¡æœ‰è¿›å…¥åˆ°ç™»å½•é¡µé¢ï¼Œè€Œä¸”é”®ç›˜å¤±æ•ˆäº†ï¼Œæ’å“ªä¸ªUSBæ¥å£éƒ½æ²¡æœ‰ä»»ä½•ååº”ã€‚æŠ˜è…¾ç»§ç»­ã€‚ã€‚ã€‚
å†æ¬¡é‡è£…ï¼Œé…ç½®é€‰æ‹©å’Œä¹‹å‰æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Œæ²¡æƒ³åˆ°ä¸€è·¯é¡ºåˆ©ï¼Œå®‰è£…æˆåŠŸï¼å¯¹äºè¿™ç§è«åå…¶å¦™çš„æˆåŠŸï¼Œæˆ‘ä¹Ÿæ˜¯å¾ˆæ— å¥ˆå•Šã€‚ã€‚ã€‚
åè®°ä»¥å‰åœ¨ç‰©ç†æœºä¸Šå®‰è£…è¿‡å¾ˆå¤šæ¬¡Linuxï¼Œåªä¸è¿‡æ²¡æœ‰è®°å½•ã€‚å› ä¸ºå®‰è£…ç³»ç»Ÿçš„è¿‡ç¨‹æ— æ³•æˆªå›¾ï¼Œåªèƒ½æŒ¨ä¸ªæ‹ç…§ï¼Œå¾ˆéº»çƒ¦ã€‚è¿™æ¬¡ä¸‹äº†å¾ˆå¤§çš„å†³å¿ƒï¼Œå®Œæˆäº†æœ¬æ–‡ï¼Œç»™è‡ªå·±ç‚¹ä¸ªèµï¼ŒçœŸæ˜¯ä¸ªå‹¤åŠ³çš„éƒåŒå­¦å•Šï¼
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>iptableså®ç°ç«¯å£æ˜ å°„</title>
    <url>/dev-iptables-port-map/</url>
    <content><![CDATA[æƒ…æ™¯æ¨¡æ‹Ÿæœ‰ä¸»æœºAï¼Œeth0çš„IPä¸ºå†…ç½‘IPï¼š192.168.56.101ï¼Œeth1ä¸ºå…¬ç½‘IPï¼š120.77.36.222ã€‚æœ‰ä¸»æœºBï¼Œeth0çš„IPä¸ºå†…ç½‘IPï¼š192.168.56.102ã€‚
å¯ä»¥é€šè¿‡å¤–ç½‘è®¿é—®ä¸»æœºAï¼Œä¸»æœºBå’Œä¸»æœºAåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ã€‚
æƒ³è¦è®¿é—®å¤–ç½‘è®¿é—®ä¸»æœºBçš„WebæœåŠ¡ï¼Œæ€ä¹ˆåŠï¼Ÿç­”ï¼šä½¿ç”¨ç«¯å£æ˜ å°„ã€‚


å…·ä½“é…ç½®å¼€å¯è·¯ç”±åŠŸèƒ½sudo echo 1 &gt; /proc/sys/net/ipv4/ip_forwardå¦‚æœæŠ¥é”™ï¼š-bash: /proc/sys/net/ipv4/ip_forward: Permission deniedé‚£å°±åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼šsudo -iecho 1 &gt; /proc/sys/net/ipv4/ip_forward
è¦æƒ³æ°¸ä¹…æœ‰æ•ˆï¼Œè¿˜è¦æŠŠ/etc/sysctl.confæ–‡ä»¶é‡Œè¾¹çš„net.ipv4.ip_forwardçš„å€¼æ”¹ä¸º1ã€‚
ç«¯å£æ˜ å°„å‚è€ƒlinuxä¸‹ç”¨ç”¨iptablesåšç«¯å£æ˜ å°„çš„shellå’ŒUbuntu 14.04 ç«¯å£æ˜ å°„ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹ï¼š
1ã€æ–°å»ºportmap.shï¼Œå†…å®¹å¦‚ä¸‹ï¼š
#!/bin/bashpro=&#x27;tcp&#x27;NAT_Host=&#x27;192.168.56.101&#x27;NAT_Port=3480Dst_Host=&#x27;192.168.56.102&#x27;Dst_Port=80iptables -t nat -A PREROUTING -m $pro -p $pro --dport $NAT_Port -j DNAT --to-destination $Dst_Host:$Dst_Portiptables -t nat -A POSTROUTING -m $pro -p $pro --dport $Dst_Port -d $Dst_Host -j SNAT --to-source $NAT_Host

2ã€æ·»åŠ æ‰§è¡Œæƒé™sudo chmod a+x portmap.sh
3ã€æ‰§è¡Œè„šæœ¬sudo ./portmap.sh
4ã€æµ‹è¯•è®¿é—®curl 192.168.56.102ï¼Œæ­£å¸¸ã€‚curl 192.168.56.101:3480ï¼ŒæŠ¥é”™curl: (7) Failed to connect to 192.168.56.103 port 3480: Connection refusedã€‚å•Šå˜ï¼Œæ²¡æœ‰é…ç½®æˆåŠŸå—ï¼Ÿè«éæ—¶å› ä¸ºç«¯å£æ²¡æœ‰æ‰“å¼€ï¼Ÿæµ‹è¯•ä¸‹3480ç«¯å£ï¼štelnet 192.168.56.101 3480ï¼ŒæŠ¥é”™telnet: Unable to connect to remote host: Connection refusedã€‚æ‰“å¼€ç«¯å£è¯•è¯•ï¼Ÿsudo iptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 3480 -j ACCEPTç„¶è€Œï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ï¼
ç›´æ¥ç”¨æµè§ˆå™¨è®¿é—® http://192.168.56.101:3480 ï¼Œè®¿é—®æ­£å¸¸ã€‚ã€‚ã€‚å¿ƒä¸­ä¸‡é©¬å¥”è…¾ã€‚ã€‚ã€‚curlæœ‰å‘å•Šï¼
ç›´æ¥ç”¨æµè§ˆå™¨è®¿é—® http://120.77.36.222:3480 ï¼Œè®¿é—®æ­£å¸¸ã€‚
5ã€å¦‚æœä¸éœ€è¦ç«¯å£æ˜ å°„äº†ï¼Œå¯ä»¥åˆ é™¤æ·»åŠ çš„è§„åˆ™sudo iptables -t nat -vnL PREROUTING --line-number
sudo iptables -t nat -nL --line-number
sudo iptables -t nat -D PREROUTING 1
sudo iptables -t nat -D POSTROUTING 1
6ã€è®¾ç½®é‡å¯åä¾ç„¶æœ‰æ•ˆå‚è€ƒã€ŠLinuxé…ç½®SNATä¸Šç½‘ã€‹ã€‚
æœ¬æœºç«¯å£æ˜ å°„æœ‰ä¸»æœºAï¼Œeth0çš„IPä¸ºå†…ç½‘IPï¼š192.168.56.101ï¼Œeth1ä¸ºå…¬ç½‘IPï¼š120.77.36.222ã€‚
è®¿é—® http://192.168.56.101 æ­£å¸¸ï¼Œè®¿é—® http://120.77.36.222 å¤±è´¥ã€‚è¿™æ˜¯å› ä¸ºï¼Œç”µä¿¡ä¼šå°é”80ç«¯å£å’Œ8080ç«¯å£ã€‚ä¸ºäº†ä½¿å¤–ç½‘ä¹Ÿå¯ä»¥è®¿é—®80ç«¯å£çš„æœåŠ¡ï¼Œå¯ä»¥æŠŠ10180ç«¯å£æ˜ å°„ä¸º80ç«¯å£ã€‚
sudo iptables -t nat -A PREROUTING -p tcp --dport 10180 -j REDIRECT --to-ports 80
ç„¶åï¼Œå°±å¯ä»¥é€šè¿‡ http://120.77.36.222:10180 æ¥è®¿é—®80ç«¯å£çš„æœåŠ¡ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>network</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>ç½‘ç»œ</tag>
        <tag>iptables</tag>
      </tags>
  </entry>
  <entry>
    <title>HexoåŠ é€Ÿè®¿é—®</title>
    <url>/dev-hexo-accelerate/</url>
    <content><![CDATA[å‰è¨€ã€ŠHexoç¯å¢ƒæ­å»º2018å¹´5æœˆç‰ˆã€‹ä¸€æ–‡ä¸­ï¼Œé‡æ–°è®°å½•äº†hexoçš„å®‰è£…éƒ¨ç½²æ–¹æ³•ï¼Œæ¯”è¾ƒè¯¦ç»†å®Œæ•´ã€‚ä½†æ˜¯ï¼Œåœ¨è®¿é—®çš„æ—¶å€™ï¼Œæ€»æ„Ÿè§‰è®¿é—®é€Ÿåº¦å¤ªæ…¢ï¼Œæœ¬æ–‡å°±è®°å½•ä¸‹hexoåŠ é€Ÿè®¿é—®çš„æ–¹æ³•ã€‚


æ€è·¯è®¿é—®é€Ÿåº¦æ…¢ï¼Œå…¶å®å¾ˆå¥½ç†è§£ï¼Œæ¯•ç«Ÿcodingæä¾›äº†åƒåƒä¸‡ä¸‡ä¸ªpagesæœåŠ¡ï¼Œåˆ†ç»™ä½ çš„æµé‡å’Œå¸¦å®½ä¸ä¼šå¾ˆå¤šã€‚æƒ³è¦åŠ é€Ÿï¼Œæœ€ç®€å•çš„æ€è·¯ï¼Œå°±æ˜¯æ›´æ¢æœåŠ¡å™¨ï¼Œæ¢æˆè‡ªå·±çš„æœåŠ¡å™¨ã€‚æ²¡é”™ï¼Œæœ‰é’±å°±æ˜¯ä»»æ€§ã€‚
è€Œä¸”æ“ä½œæå…¶ç®€å•ï¼Œgit cloneä¸€ä¸‹å³å¯ã€‚
æ“ä½œæ­¥éª¤1ã€æœåŠ¡å™¨å®‰è£…nginxå’Œgitã€‚
2ã€åˆ›å»ºwwwç›®å½•mkdir /opt/www
3ã€cloneé¡¹ç›®cd /opt/www
git clone https://git.coding.net/voidking/voidking.git
4ã€nginxé…ç½®å‚è€ƒã€ŠHexoå¯ç”¨httpsåŠ å¯†è¿æ¥ã€‹ï¼Œä¿®æ”¹www.voidking.com.confã€‚
cd /etc/nginx/conf.d/cp www.voidking.com.conf www.voidking.com.conf.bakvim www.voidking.com.conf

www.voidking.com.conf å†…å®¹ä¸ºï¼š
server &#123;    listen 80;    listen 443 ssl;    server_name www.voidking.com;    charset utf-8;    ssl_certificate /etc/nginx/ssl/1_www.voidking.com_bundle.crt;    ssl_certificate_key  /etc/nginx/ssl/2_www.voidking.com.key;    ssl_session_timeout  5m;    ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;    ssl_ciphers  HIGH:!ADH:!EXPORT56:RC4+RSA:+MEDIUM;    ssl_prefer_server_ciphers on;    if ($ssl_protocol = &quot;&quot;) &#123;        return 301 https://$host$request_uri;    &#125;    location / &#123;        proxy_set_header   Host             $host;        proxy_set_header   X-Real-IP        $remote_addr;        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;        root /opt/www/voidking/;        index index.html;    &#125;    error_page 404 /404.html;    location = /404.html &#123;        root /opt/www/voidking/;        index 404.html;    &#125;    location ~ /\.git &#123;        return 404;    &#125;&#125;

é‡å¯nginxï¼Œsystemctl restart nginx
æ›´æ–°æ¯æ¬¡æ–‡ç« æœ‰æ›´æ–°æ—¶ï¼Œhexo gï¼Œhexo dæ“ä½œå’Œä»¥å‰ç›¸åŒã€‚
ç„¶åï¼Œç™»å½•æœåŠ¡å™¨ï¼Œcd /opt/www/voidkingï¼Œgit pullï¼Œå³å¯å®Œæˆæ›´æ–°ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoç¯å¢ƒæ­å»º2018å¹´5æœˆç‰ˆ</title>
    <url>/dev-hexo-build-environment-2018-05/</url>
    <content><![CDATA[å‰è¨€15å¹´çš„æ—¶å€™ï¼Œå†™äº†ä¸€ç¯‡ã€ŠHexoç¯å¢ƒæ­å»ºã€‹ï¼Œè®°å½•äº†hexoçš„è¯¦ç»†å®‰è£…éƒ¨ç½²æ­¥éª¤ã€‚ä¸‰å¹´äº†ï¼Œnodeå’Œhexoéƒ½æœ‰äº†å¾ˆå¤§çš„å˜åŒ–ã€‚è€ŒéƒåŒå­¦åˆšåˆšæ¢äº†magicbookï¼Œåˆè¦å†æ¬¡æ­å»ºhexoï¼Œé‚£å°±æ¨å‡ºæ–°ç‰ˆçš„å®‰è£…è®°å½•ã€‚


ç¯å¢ƒå‡†å¤‡git1ã€è®¿é—®gitå®˜ç½‘ï¼Œä¸‹è½½gitã€‚
2ã€åŒå‡»exeæ–‡ä»¶å®‰è£…ï¼Œä¸€è·¯nextå³å¯ã€‚
3ã€å®‰è£…å¥½gitä¹‹åï¼Œé…ç½®ç”¨æˆ·åå’Œé‚®ç®±git config --global user.name &quot;voidking&quot;
git config --global user.email &quot;voidking@qq.com&quot;
nvm1ã€è®¿é—®nvm-windowsé¡¹ç›®ï¼Œä¸‹è½½nvm-noinstall.zipã€‚
2ã€è§£å‹nvm-noinstall.zipåˆ°D:\develop\nvmç›®å½•ã€‚
3ã€åŒå‡»install.cmdï¼Œç”Ÿæˆsettings.txtæ–‡ä»¶ã€‚æ‰“å¼€settings.txtæ–‡ä»¶ï¼Œæ·»åŠ ï¼š
node_mirror: https://npm.taobao.org/mirrors/node/npm_mirror: https://npm.taobao.org/mirrors/npm/

4ã€å³é”®æ­¤ç”µè„‘ï¼Œå±æ€§ï¼Œé«˜çº§ç³»ç»Ÿè®¾ç½®ï¼Œç¯å¢ƒå˜é‡ã€‚
5ã€ç³»ç»Ÿå˜é‡ä¸­ï¼Œæ·»åŠ JVM_HOMEä¸ºD:\develop\nvmï¼›æ·»åŠ JVM_SYMLINKä¸ºD:\develop\nvm\nodejsï¼›Pathä¸­æ·»åŠ ;%NVM_HOME%;%NVM_SYMLINK%;ã€‚
6ã€ç”¨æˆ·å˜é‡ä¸­ï¼Œæ·»åŠ JVM_HOMEä¸ºD:\develop\nvmï¼›æ·»åŠ JVM_SYMLINKä¸ºD:\develop\nvm\nodejsï¼›Pathä¸­æ·»åŠ ;%NVM_HOME%;%NVM_SYMLINK%;ã€‚
node1ã€æŸ¥çœ‹å¯è·å¾—çš„nodeç‰ˆæœ¬nvm list available
2ã€å®‰è£…node8.11.1nvm install 8.11.1
2ã€ä½¿ç”¨node8.11.1nvm listnvm install 8.11.1
3ã€æµ‹è¯•ä½¿ç”¨node -v
å®‰è£…hexo1ã€åˆ‡æ¢å›½å†…æºnpm config set registry=&quot;http://registry.cnpmjs.org&quot;
2ã€å®‰è£…hexonpm install -g hexo
3ã€åˆå§‹åŒ–æ–°å»ºhexoç›®å½•ï¼Œå¹¶å®‰è£…ä¾èµ–åŒ…ã€‚
hexo init hexocd hexonpm install

4ã€æµ‹è¯•hexo gï¼Œhexo sï¼Œç„¶åæŸ¥çœ‹ http://localhost:4000
ä¸ªæ€§åŒ–æ·»åŠ RSSnpm install hexo-generator-feed --saveï¼Œ
æ³¨æ„ï¼Œåé¢çš„å‚æ•°--saveç»å¯¹ä¸èƒ½çœï¼Œå¦åˆ™è¯¥æ’ä»¶ä¿¡æ¯ä¸ä¼šå†™å…¥package.jsonã€‚hexo cleanï¼Œhexo gï¼ŒæŸ¥çœ‹publicæ–‡ä»¶å¤¹ï¼Œå¯ä»¥çœ‹åˆ°atom.xmlæ–‡ä»¶ã€‚
æ·»åŠ sitemapnpm install hexo-generator-sitemap --save
npm install hexo-generator-baidu-sitemap --save
hexo cleanï¼Œhexo gï¼ŒæŸ¥çœ‹publicæ–‡ä»¶å¤¹ï¼Œå¯ä»¥çœ‹åˆ°sitemap.xmlå’Œbaidusitemap.xmlæ–‡ä»¶ã€‚sitemapçš„åˆè¡·æ˜¯ç»™æœç´¢å¼•æ“çœ‹çš„ï¼Œä¸ºäº†æé«˜æœç´¢å¼•æ“å¯¹è‡ªå·±ç«™ç‚¹çš„æ”¶å½•æ•ˆæœï¼Œæˆ‘ä»¬æœ€å¥½æ‰‹åŠ¨åˆ°googleå’Œç™¾åº¦ç­‰æœç´¢å¼•æ“æäº¤sitemap.xmlã€‚å…·ä½“å‚è€ƒã€Šhexoç”Ÿæˆsitemapã€‹ã€‚
ä¸»é¢˜è¿›å…¥hexo/themesç›®å½•ï¼Œä¸‹è½½è‡ªå·±ç»´æŠ¤çš„yiliaä¸»é¢˜git clone https://github.com/voidking/hexo-theme-yilia.git yilia
è¯¥ä¸»é¢˜çš„ä¿®æ”¹ï¼Œå¯ä»¥å‚è€ƒã€Šhexoä¸»é¢˜ä¼˜åŒ–ã€‹ã€‚
config.ymlhexoç›®å½•ä¸­çš„_config.ymlä¿®æ”¹ä¸ºï¼š
# Hexo Configuration## Docs: http://hexo.io/docs/configuration.html## Source: https://github.com/hexojs/hexo/# Sitetitle: VoidKingsubtitle: å­¦è€Œä¸æ€åˆ™ç½”ï¼Œæ€è€Œä¸å­¦åˆ™æ®†ï¼description: VoidKingauthor: VoidKinglanguage: zh-CNtimezone:# URL## If your site is put in a subdirectory, set url as &#x27;http://yoursite.com/child&#x27; and root as &#x27;/child/&#x27;url: http://voidking.comroot: /permalink: :year/:month/:day/:title/permalink_defaults:# Directorysource_dir: sourcepublic_dir: publictag_dir: tagsarchive_dir: archivescategory_dir: categoriescode_dir: downloads/codei18n_dir: :langskip_render:# Writingnew_post_name: :title.md # File name of new postsdefault_layout: posttitlecase: false # Transform title into titlecaseexternal_link: true # Open external links in new tabfilename_case: 0render_drafts: falsepost_asset_folder: falserelative_link: falsefuture: truehighlight:  enable: true  line_number: true  auto_detect: true  tab_replace:# Category &amp; Tagdefault_category: uncategorizedcategory_map:tag_map:# Date / Time format## Hexo uses Moment.js to parse and display date## You can customize the date format as defined in## http://momentjs.com/docs/#/displaying/format/date_format: YYYY-MM-DDtime_format: HH:mm:ss# Pagination## Set per_page to 0 to disable paginationper_page: 5pagination_dir: pageindex_generator:  per_page: 5archive_generator:  per_page: 500  yearly: true    monthly: true tag_generator:  per_page: 100 category_generator:   per_page: 100 # Extensions## Plugins: http://hexo.io/plugins/## Themes: http://hexo.io/themes/theme: yilia# Deployment## Docs: http://hexo.io/docs/deployment.htmldeploy:  type: git  repository: https://git.coding.net/voidking/voidking.git  branch: coding-pages## gitcafe### deploy:###   type: git###   repository: git@gitcafe.com:voidking/voidking.git###   branch: gitcafe-pages## github### deploy:###   type: git###   repository: https://git.coding.net/voidking/voidking.git###   branch: coding-pages

mathjaxæœ¬æ¥æ‰“ç®—å‚è€ƒã€ŠHexoä¸­ä½¿ç”¨Mathjaxçš„å†²çªé—®é¢˜ã€‹ï¼Œä¿®æ”¹ä¸€ä¸‹ä¿®æ”¹hexoçš„æ¸²æŸ“ä»£ç ã€‚ä½†æ˜¯ï¼ŒéƒåŒå­¦æƒŠå¥‡åœ°å‘ç°ï¼Œåœ¨æ–°ç‰ˆçš„hexoä¸­ï¼Œå¹¶ä¸éœ€è¦ä¿®æ”¹ä»»ä½•ä»£ç ï¼Œmathjaxå°±æ¸²æŸ“æ­£å¸¸ï¼Œniceã€‚
å‘å¸ƒcoding1ã€åœ¨codingä¸Šæ³¨å†Œä¸€ä¸ªå¸å·ã€‚
2ã€æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå’Œå¸å·åç›¸åŒã€‚
3ã€é¡¹ç›®å¯åŠ¨PagesæœåŠ¡ã€‚
æœ¬åœ°æ“ä½œ1ã€ç”Ÿæˆæœ¬åœ°ä»£ç hexo g
2ã€æœ¬åœ°æµ‹è¯•hexo sï¼Œç„¶åè®¿é—® http://localhost:4000
3ã€å‘å¸ƒåˆ°codinghexo d
æç¤ºERROR Deployer not found: gitï¼Œéœ€è¦å…ˆæ‰§è¡Œï¼šnpm install hexo-deployer-git --save
4ã€çº¿ä¸Šæµ‹è¯•http://voidking.coding.me
åŸŸå1ã€ç”³è¯·åŸŸåã€‚
2ã€åŸŸåè§£ææ·»åŠ CNAMEè®°å½•æŒ‡å‘voidking.coding.meã€‚
3ã€åœ¨codingä¸Šç»‘å®šåŸŸåã€‚
4ã€æµ‹è¯•è®¿é—®ã€‚
åè®°è‡³æ­¤ï¼Œhexoå®‰è£…éƒ¨ç½²å®Œæˆã€‚æœ‰äº›æ­¥éª¤å†™çš„æ¯”è¾ƒç®€å•ï¼Œä¸ç†è§£çš„å¯ä»¥è‡ªè¡Œè°·æ­Œç™¾åº¦ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>node</tag>
        <tag>mathjax</tag>
        <tag>nvm</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxé…ç½®SNATä¸Šç½‘</title>
    <url>/dev-linux-snat/</url>
    <content><![CDATA[éœ€æ±‚æè¿°æœ‰ä¸»æœºAï¼Œeth0çš„IPä¸ºå†…ç½‘IPï¼š192.168.56.101ï¼Œeth1ä¸ºå…¬ç½‘IPï¼š120.77.36.222ã€‚æœ‰ä¸»æœºBï¼Œeth0çš„IPä¸ºå†…ç½‘IPï¼š192.168.56.102ã€‚ä¸»æœºAå¯ä»¥è®¿é—®å¤–ç½‘ï¼Œä¸»æœºBå’Œä¸»æœºAåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ã€‚ç°åœ¨æˆ‘ä»¬æƒ³è®©ä¸»æœºBä¹Ÿå¯ä»¥ä¸Šç½‘ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿæœ€ç®€å•çš„æ–¹æ³•æœ‰ä¸¤ä¸ªï¼š1ï¼‰SNATï¼›2ï¼‰ä»£ç†
æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ ä½¿ç”¨é…ç½®SNATçš„æ–¹å¼ï¼Œå®ç°å±€åŸŸç½‘ä¸­çš„æ‰€æœ‰ä¸»æœºå¯ä»¥ä¸Šç½‘ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ã€Šiptableså…¥é—¨ç¯‡ã€‹
Linuxä¸‹é…ç½®SNATä¸Šç½‘
åˆ©ç”¨iptablesçš„SNATåŠŸèƒ½å®ç°å±€åŸŸç½‘å…±äº«ä¸Šç½‘
ubuntué…ç½®é™æ€è·¯ç”±åŠé‡å¯ç”Ÿæ•ˆ



SNATæ•°æ®åŒ…æµå‘å‘é€æ•°æ®åŒ…Bå‘é€æ•°æ®åŒ…æ—¶ï¼ŒAä¹Ÿå°±æ˜¯NATä¸»æœºï¼Œåˆ†ææ•°æ®åŒ…è¡¨å¤´ï¼Œå°†æ­¤æ•°æ®åŒ…è½¬åˆ°å¯ä»¥è¿æ¥å…¬ç½‘çš„IPä¸Šå»ã€‚ç”±äºç§æœ‰IPä¸å…¬æœ‰IPä¸èƒ½äº’é€šï¼ŒAä¼šé€šè¿‡iptablesçš„NAT tableå†…çš„Postrountingé“¾å°†æ•°æ®åŒ…è¡¨å¤´ä¼ªè£…æˆAçš„å…¬ç½‘IPï¼Œå¹¶ä¸”å°†è¿™ä¸¤ä¸ªä¸åŒæ¥æºçš„æ•°æ®åŒ…å¯¹åº”å…³ç³»å†™å…¥æš‚å­˜å†…å­˜ä¸­ï¼Œç„¶åå°†æ•°æ®åŒ…ä¼ é€å‡ºå»ã€‚æ­¤æ—¶ä¼ åˆ°äº’è”ç½‘çš„è¿™ä¸ªæ•°æ®åŒ…ï¼Œå·²ç»è¡¨ç°ä¸ºæ¥è‡ªå…¬ç½‘IPï¼Œè€Œéæ¥è‡ªå±€åŸŸç½‘ã€‚
æ¥æ”¶å“åº”åŒ…å½“äº’è”ç½‘æŠŠæ•°æ®å“åº”ç»™Bæ—¶ï¼Œä¼šé¦–å…ˆè¿›å…¥NATä¸»æœºAï¼ŒAåˆ†ææ•°æ®åŒ…çš„åºå·ï¼Œå¯¹æ¯”åˆšåˆšè®°å½•åˆ°å†…å­˜ä¸­çš„æ•°æ®ï¼Œç”±äºå‘ç°è¯¥æ•°æ®åŒ…ä¸ºåç«¯ä¸»æœºä¹‹å‰ä¼ é€å‡ºå»çš„ï¼Œå› æ­¤åœ¨NAT Preroutingé“¾ä¸­ï¼Œä¼šå°†ç›®æ ‡IPä¿®æ”¹æˆä¸ºåç«¯ä¸»æœºï¼Œå³Bçš„IPï¼Œç„¶åå‘ç°ç›®æ ‡å·²ç»ä¸æ˜¯Açš„å…¬ç½‘IPï¼Œå¼€å§‹é€šè¿‡è·¯ç”±åˆ†æï¼Œå°†æ•°æ®åŒ…ä¼ é€åˆ°Açš„å±€åŸŸç½‘æ¥å£ï¼Œå†ä¼ é€åˆ°æœ€ç»ˆç›®æ ‡192.168.56.102ä¸Šå»ã€‚
snatå…·ä½“é…ç½®ä¸»æœºAæ¥æ”¶æ•°æ®åŒ…å…è®¸æ¥æ”¶å±€åŸŸç½‘ç½‘å¡çš„æ•°æ®åŒ…sudo iptables -I INPUT -i eth0 -j ACCEPT
æˆ–è€…sudo iptables -P INPUT ACCEPT
å¼€å¯è·¯ç”±åŠŸèƒ½sudo echo 1 &gt; /proc/sys/net/ipv4/ip_forwardå¦‚æœæŠ¥é”™ï¼š-bash: /proc/sys/net/ipv4/ip_forward: Permission deniedé‚£å°±åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼šsudo -iecho 1 &gt; /proc/sys/net/ipv4/ip_forward
è¦æƒ³æ°¸ä¹…æœ‰æ•ˆï¼Œè¿˜è¦æŠŠ/etc/sysctl.confæ–‡ä»¶é‡Œè¾¹çš„net.ipv4.ip_forwardçš„å€¼æ”¹ä¸º1ã€‚
ä¼ªè£…æ•°æ®åŒ…sudo iptables -t nat -A POSTROUTING -s 192.168.56.102 -o eth1 -j MASQUERADE
æˆ–è€…ç”¨SNATç›´æ¥ä¿®æ”¹IPæ•°æ®åŒ…çš„è¡¨å¤´æ¥æºIPsudo iptables -t nat -A POSTROUTING -s 192.168.56.102 -o eth1 -j SNAT --to 192.168.56.101
å¦‚æœéœ€è¦æ”¯æŒæ•´ä¸ªç½‘æ®µï¼šsudo iptables -t nat -A POSTROUTING -s 192.168.56.0/24 -o eth1 -j SNAT --to 192.168.56.101
å¦‚æœéœ€è¦æ”¯æŒè¿ç»­IPï¼šsudo iptables -t nat -A POSTROUTING -m iprange --src-range 192.168.56.102-192.168.56.104 -o eth1 -j SNAT --to 192.168.56.101
æ³¨æ„ï¼š

äº²æµ‹ä»¥ä¸Šæ‰€æœ‰å‘½ä»¤ä¸­çš„-o eth1å¯ä»¥çœç•¥ï¼Œæ‰€ä»¥ï¼Œåœ¨åˆ†ä¸æ¸…å“ªä¸ªç½‘å¡æ˜¯å†…ç½‘å“ªä¸ªç½‘å¡æ˜¯å¤–ç½‘çš„æƒ…å†µä¸‹ï¼Œç›´æ¥çœç•¥å³å¯ã€‚
å¦‚æœæƒ³è¦å…è®¸æ‰€æœ‰IPï¼Œ-s 192.168.56.0/24ä¹Ÿå¯ä»¥çœç•¥ã€‚
-j SNAT --to 192.168.56.101å¯ä»¥æ¢æˆ-j SNAT --to 120.77.36.222ã€‚
-j SNAT --to 120.77.36.222å»ºè®®æ¢æˆ-j MASQUERADEï¼Œå°¤å…¶åœ¨å¤–ç½‘IPéå›ºå®šçš„æƒ…å†µä¸‹ã€‚
ç»¼ä¸Šï¼Œæœ€ç®€å•çš„ä¸‡èƒ½SNATå‘½ä»¤ä¸ºsudo iptables -t nat -A POSTROUTING -j MASQUERADE

æŸ¥çœ‹ä¸åˆ é™¤æŸ¥çœ‹NATè¡¨é“¾è§„åˆ™sudo iptables -t nat -nL --line-number
åˆ é™¤POSTROUTINGç¬¬ä¸€æ¡è§„åˆ™sudo iptables -t nat -D POSTROUTING 1
é‡å¯åä¾æ—§ç”Ÿæ•ˆ1ã€ä¿å­˜è§„åˆ™sudo chmod a+w -R /optsudo iptables-save &gt; /opt/iptables.rules
2ã€æ‰‹åŠ¨å¯¼å…¥è§„åˆ™sudo iptables-restore &lt; /opt/iptables.rules
3ã€å¼€æœºè‡ªåŠ¨å¯¼å…¥è§„åˆ™åœ¨ubuntuä¸‹è¦æŠŠä¸€ä¸ªç¨‹åºåŠ å…¥å¼€æœºå¯åŠ¨ï¼Œä¸€èˆ¬å¯ä»¥é€šè¿‡ä¿®æ”¹rc.localæ¥å®Œæˆï¼Œä½†ubuntuä¸‹æœ‰ä¸¤ä¸ªrc.localæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯/etc/rc.localå’Œ/etc/init.d/rc.localã€‚å› ä¸º/etc/init.d/rc.localè°ƒç”¨äº†/etc/rc.localï¼Œæ‰€ä»¥æˆ‘ä»¬çš„å¼€æœºè„šæœ¬æœ€å¥½ç›´æ¥å†™å…¥/etc/rc.localï¼Œå†™åœ¨exit 0ä¹‹å‰å³å¯ã€‚
sudo vim /etc/rc.localåœ¨exit 0ä¹‹å‰æ·»åŠ ï¼š
/sbin/iptables-restore &lt; /opt/iptables.rules

ä¸»æœºBcentoså¦‚æœæ˜¯centosï¼Œé‚£ä¹ˆé…ç½®ifcfgæ–‡ä»¶sudo vim /etc/sysconfig/network-scripts/ifcfg-eth0
DEVICE=eth0BOOTPROTO=staticONBOOT=yesIPADDR=192.168.56.102NETMASK=255.255.255.0GATEWAY=192.168.56.101

ç„¶åservice network restart
ubuntuå¦‚æœæ˜¯ubuntuï¼Œé‚£ä¹ˆé…ç½®interfacesæ–‡ä»¶sudo vim /etc/network/interfaces
auto loiface lo inet loopbackauto em1iface em1 inet staticaddress 192.168.56.102netmask 255.255.255.0gateway 192.168.56.101

ç„¶åsudo /etc/init.d/networking restart
æ€»ä¹‹ï¼ŒBä¸»æœºé…ç½®çš„å…³é”®åœ¨äºç½‘å…³ï¼Œç½‘å…³è¦è®¾ç½®æˆä¸»æœºAçš„å†…ç½‘IPã€‚
è¯·é—®ï¼Œç½‘å…³ä¸è®¾ç½®æˆä¸»æœºAçš„å†…ç½‘IPå¯ä»¥å—ï¼Ÿå¯ä»¥ï¼Œé‚£å°±æ˜¯å¦å¤–ä¸€ç§ç¨å¾®å¤æ‚çš„è®¾ç½®æ–¹æ³•äº†ã€‚
æ­¤æ—¶ï¼Œä½¿ç”¨ä¸»æœºBï¼Œå·²ç»å¯ä»¥pingé€šå¤–ç½‘çš„IPäº†ã€‚ä½†æ˜¯pingåŸŸåä¼šæç¤ºâ€œping: unknown hostâ€ã€‚
DNSé…ç½®æ–¹æ³•ä¸€1ã€ç¼–è¾‘resolv.confsudo vim /etc/resolv.confï¼Œæ·»åŠ nameserverçš„é…ç½®
nameserver 180.76.76.76nameserver 223.6.6.6
ä¸Šé¢çš„ä¸¤ä¸ªIPåœ°å€ï¼Œåˆ†åˆ«æ˜¯ç™¾åº¦å’Œé˜¿é‡Œçš„å…¬å…±DNSã€‚
2ã€æµ‹è¯•ping www.baidu.com
3ã€ä¸è¿‡ï¼Œè¿™ç§æ–¹æ³•åœ¨é‡å¯ä¹‹åä¼šå¤±æ•ˆã€‚æƒ³è¦æ°¸ä¹…ç”Ÿæ•ˆï¼Œè¿˜éœ€è¦ç¼–è¾‘baseæ–‡ä»¶ã€‚sudo vim /etc/resolvconf/resolv.conf.d/baseï¼Œæ·»åŠ ï¼š
nameserver 180.76.76.76nameserver 223.6.6.6

æ–¹æ³•äºŒ1ã€ç¼–è¾‘interfacessudo vim /etc/network/interfaces
2ã€æ·»åŠ nameserverçš„é…ç½®
dns-nameserver 180.76.76.76 223.5.5.5

3ã€é‡å¯æœåŠ¡å™¨sudo rebootå®é™…ä¸Šï¼Œé‡å¯åçš„dnsé…ç½®ä¼šå†™å…¥åˆ°resolv.confä¸­ã€‚
4ã€æµ‹è¯•ping www.baidu.com
ç»“è¯­è‡³æ­¤ï¼Œsnatå®Œç¾é…ç½®æˆåŠŸï¼åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œé¡ºå¸¦å¤ä¹ äº†ä¸€ä¸‹iptablesï¼Œæ”¶è·æ»¡æ»¡ã€‚æ„Ÿè§‰iptableså’Œrouteæœ‰å¾ˆå¤§å…³ç³»ï¼Œä½†æ˜¯åœ¨é…ç½®è¿‡ç¨‹ä¸­æ²¡æœ‰ç”¨åˆ°routeã€‚ä¹¦ç­¾ä¸­æœ‰å…³äºrouteçš„æ–‡æ¡£ï¼Œç”¨åˆ°çš„æ—¶å€™å†æ·±å…¥å­¦ä¹ ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>network</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ç½‘ç»œ</tag>
        <tag>iptables</tag>
      </tags>
  </entry>
  <entry>
    <title>Gangliaè®¤è¯æˆæƒ</title>
    <url>/dev-ganglia-auth/</url>
    <content><![CDATA[å‰è¨€ã€ŠUbuntu14.04å®‰è£…é…ç½®Gangliaã€‹ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†Gangliaçš„å®‰è£…é…ç½®ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¹¶ä¸æƒ³å…è®¸æ‰€æœ‰äººéƒ½çœ‹åˆ°é›†ç¾¤çš„ä½¿ç”¨æƒ…å†µï¼Œæ‰€ä»¥ï¼Œæœ¬æ–‡å°±ç ”ç©¶ä¸€ä¸‹æ€æ ·ç»™gangliaæ·»åŠ è®¤è¯æˆæƒï¼ˆåŠ å¯†è®¾ç½®ï¼‰ï¼Œä¸»è¦å‚ç…§ã€Šä½¿ç”¨ Ganglia å¯¹ Linux ç½‘æ ¼å’Œé›†ç¾¤æœåŠ¡å™¨è¿›è¡Œå®æ—¶ç›‘æ§ã€‹ã€‚


åŸç†åœ¨gangliaçš„wikiä¸­åŒ…å«å¯¹Authorization Systemçš„æè¿°ï¼š

Ganglia contains a simple authorization system to selectively allow or deny users access to certain parts of the gweb application. We rely on the web server to provide authentication, so any Apache authentication system (htpasswd, LDAP, etc) is supported.

ç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼Œç›´æ¥åˆ©ç”¨apacheçš„è®¤è¯æœºåˆ¶å³å¯å®Œæˆå¯¹gangliaçš„åŠ å¯†è®¾ç½®ã€‚
è¯¦ç»†æ­¥éª¤1ã€å®‰è£…apacheå·¥å…·sudo apt-get install apache2-utils
2ã€åˆ›å»ºå¯†ç æ–‡ä»¶sudo touch /usr/share/ganglia-webfrontend/auth.basic
sudo chmod a+rw /usr/share/ganglia-webfrontend/auth.basic
3ã€ä¸ºgangliaåˆ›å»ºç”¨æˆ·å¹¶è®¾å®šå¯†ç htpasswd -c /usr/share/ganglia-webfrontend/auth.basic adminganglia
ä¼šæç¤ºä¸¤æ¬¡è¾“å…¥å¯†ç ï¼Œä»¥ä¸Šå‘½ä»¤åˆ›å»ºäº†ä¸€ä¸ªadmingangliaçš„ç”¨æˆ·ï¼Œå¯†ç å­˜æ”¾åœ¨/usr/share/ganglia-webfrontend/auth.basicï¼ˆå¯ä»¥ä»»æ„ç›®å½•æˆ–æ–‡ä»¶åï¼Œåªè¦ Apache å¯¹æ­¤æœ‰è¯»å–æƒé™å°±å¯ä»¥ã€‚ï¼‰ 
4ã€ä¿®æ”¹é…ç½®æ–‡ä»¶ganglia.confsudo vim /etc/apache2/sites-enabled/ganglia.confåŸé…ç½®æ–‡ä»¶ä¸ºï¼š
Alias /ganglia /usr/share/ganglia-webfrontend&lt;Directory &quot;/usr/share/ganglia-webfrontend&quot;&gt;        AllowOverride All        Order allow,deny        Allow from all        Deny from none&lt;/Directory&gt;

ä¿®æ”¹ä¸ºï¼š
Alias /ganglia /usr/share/ganglia-webfrontend&lt;Directory &quot;/usr/share/ganglia-webfrontend&quot;&gt;    AuthType basic    AuthName &quot;Ganglia web UI&quot;    AuthBasicProvider file    AuthUserFile &quot;/usr/share/ganglia-webfrontend/auth.basic&quot;    Require user adminganglia&lt;/Directory&gt;

5ã€é‡å¯apachesudo /etc/init.d/apache2 restart
6ã€æµ‹è¯•è®¿é—®è®¿é—® http://192.168.56.103/ganglia/ ï¼Œè¿™æ¬¡éœ€è¦å¯†ç æ‰èƒ½è®¿é—®ã€‚
è‡³æ­¤ï¼Œç»™gangliaæ·»åŠ è®¤è¯æˆæƒå®Œæˆã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>monitoring</category>
      </categories>
      <tags>
        <tag>ç›‘æ§</tag>
        <tag>ubuntu</tag>
        <tag>apache</tag>
        <tag>ganglia</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Certbotç”³è¯·æ³›åŸŸåè¯ä¹¦</title>
    <url>/dev-certbot-domain-certificate/</url>
    <content><![CDATA[éœ€æ±‚æè¿°ã€ŠHexoå¯ç”¨httpsåŠ å¯†è¿æ¥ã€‹ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬åœ¨è…¾è®¯äº‘ç”³è¯·äº†ä¸€ä¸ªä¸‰çº§åŸŸåè¯ä¹¦ï¼Œç„¶åç»™ç½‘ç«™é…ç½®ä¸Šäº†åŸŸåè¯ä¹¦ã€‚
é‚£å¦‚æœæˆ‘ä»¬æœ‰ä¸€ç™¾ä¸ªåŸŸåï¼Œä¸€ä¸ªä¸ªç”³è¯·åŸŸåè¯ä¹¦å°±å¤ªéº»çƒ¦äº†ï¼Œè¿™æ˜¯æˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªæ³›åŸŸåè¯ä¹¦ã€‚æ€ä¹ˆç”³è¯·æ³›åŸŸåè¯ä¹¦å‘¢ï¼Ÿæ–¹æ¡ˆä¸€ï¼šé€šè¿‡é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰äº‘å¹³å°ç”³è¯·ï¼Œä½†æ˜¯éœ€è¦ä»˜è´¹ï¼Œä¾¿å®œçš„ä¹Ÿè¦å¹´è´¹ä¸¤åƒå·¦å³ã€‚æ–¹æ¡ˆäºŒï¼šä½¿ç”¨certbotç”³è¯·æ³›åŸŸåè¯ä¹¦ï¼Œç„¶åé…ç½®å¥½è‡ªåŠ¨ç»­æœŸã€‚
å› ä¸ºæƒ³è¦çœç‚¹é’±ï¼Œæ‰€ä»¥æœ¬æ–‡ä¸­æˆ‘ä»¬å°±æ¥ç ”ç©¶å­¦ä¹ ä¸€ä¸‹æ–¹æ¡ˆäºŒï¼Œç»™dnspodä¸Šçš„åŸŸåç”³è¯·ä¸€ä¸ªæ³›åŸŸåè¯ä¹¦ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ä½¿ç”¨ Certbot è‡ªåŠ¨ç”³è¯·å’Œç»­æœŸæ³›åŸŸåè¯ä¹¦
ä½¿ç”¨ certbot ç”³è¯·æ³›åŸŸåè¯ä¹¦å’Œè‡ªåŠ¨ç»­ç­¾
ä½¿ç”¨Certbotç”³è¯·æ³›åŸŸåSSLè¯ä¹¦ï¼ˆLetâ€™s Encryptï¼‰
certbot instructions - Nginx on CentOS7
Certbot Document



Certbotç®€ä»‹
ä¸ºäº†åœ¨æ‚¨çš„ç½‘ç«™ä¸Šå¯ç”¨ HTTPSï¼Œæ‚¨éœ€è¦ä»è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰è·å–è¯ä¹¦ï¼ˆä¸€ç§æ–‡ä»¶ï¼‰ã€‚ Letâ€™s Encrypt æ˜¯ä¸€ä¸ªè¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰ã€‚ è¦ä» Letâ€™s Encrypt è·å–æ‚¨ç½‘ç«™åŸŸåçš„è¯ä¹¦ï¼Œæ‚¨å¿…é¡»è¯æ˜æ‚¨å¯¹åŸŸåçš„å®é™…æ§åˆ¶æƒã€‚ æ‚¨å¯ä»¥åœ¨æ‚¨çš„ Web ä¸»æœºä¸Šè¿è¡Œä½¿ç”¨ ACME åè®®çš„è½¯ä»¶æ¥è·å– Letâ€™s Encrypt è¯ä¹¦ã€‚

è€Œ Certbotï¼Œå°±æ˜¯Letâ€™s Encryptæ¨èçš„ ACME å®¢æˆ·ç«¯ï¼Œå¯ä»¥ç”¨æ¥ç”³è¯·Letâ€™s Encrypté¢å‘çš„åŸŸåè¯ä¹¦ã€‚
Letâ€™s Encrypt çš„è¯ä¹¦æœ‰æ•ˆæœŸä¸º 90 å¤©ï¼Œ å»ºè®®æ¯ 60 å¤©è‡ªåŠ¨ç»­æœŸä¸€æ¬¡è¯ä¹¦ã€‚
Letâ€™s Encrypt å¯¹è¯ä¹¦ç”³è¯·è¿›è¡Œäº†é™åˆ¶ï¼Œæ¯ä¸ªæ³¨å†ŒåŸŸåï¼ˆé¡¶çº§åŸŸåï¼‰å¯ç­¾å‘è¯ä¹¦æ•°é‡ä¸ºæ¯å‘¨50å¼ ã€‚è¯ä¹¦ç»­æœŸéµå®ˆç‰¹æ®Šè§„åˆ™ï¼šå®ƒä»¬ä¸è®¡å…¥æ¯ä¸ªæ³¨å†ŒåŸŸåçš„è¯ä¹¦æ•°é‡çš„é™åˆ¶ï¼Œä½†å®ƒä»¬å—åˆ°æ¯å‘¨æœ€å¤š 5 å¼ é‡å¤è¯ä¹¦çš„é™åˆ¶ã€‚
PSï¼šä¸ Letâ€™s Encrypt ç±»ä¼¼çš„ï¼Œè¿˜æœ‰ä¸€ä¸ª ZeroSSLã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Letâ€™s Encrypt - å…¥é—¨æŒ‡å—
Letâ€™s Encrypt - å¸¸è§é—®é¢˜
Letâ€™s Encrypt - é€Ÿç‡é™åˆ¶
Letâ€™s Encrypt
Certbot
ZeroSSL

å®‰è£…é…ç½®æ€è·¯1ã€å®‰è£…certbotï¼ˆdockeræ–¹å¼ï¼‰2ã€é…ç½®dnsè‡ªåŠ¨éªŒè¯3ã€ç”³è¯·æ³›åŸŸå4ã€é…ç½®ä½¿ç”¨è¯ä¹¦5ã€é…ç½®è¯ä¹¦è‡ªåŠ¨ç»­æœŸ
å®‰è£…Certbot1ã€ä¸‹è½½certboté•œåƒ
docker pull certbot/certbot:v1.32.0
è¯¥é•œåƒé‡ŒåŒ…å«python3.10.8ï¼Œèƒ½å¤Ÿæ–¹ä¾¿æˆ‘ä»¬åç»­ä½¿ç”¨DNSè‡ªåŠ¨éªŒè¯è„šæœ¬ã€‚
2ã€åˆ›å»ºæŒ‚è½½ç›®å½•
mkdir -p /etc/letsencrypt

3ã€æµ‹è¯•è¿è¡Œ
docker run -it --rm --name certbot \    -v &quot;/etc/letsencrypt:/etc/letsencrypt&quot; \    -v &quot;/var/log/letsencryt:/var/log/letsencryt&quot; \    certbot/certbot:v1.32.0 certonly
å½“æˆ‘ä»¬è¿è¡Œcertbotå®¹å™¨æ—¶ï¼Œé»˜è®¤ä¼šæ‰§è¡Œcertbotå‘½ä»¤ã€‚certonlyæ˜¯ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºåªç”³è¯·è¯ä¹¦ï¼Œä¸ä¼šå¯¹nginxç­‰webæœåŠ¡å™¨è¿›è¡Œè‡ªåŠ¨é…ç½®ã€‚
é…ç½®DNSè‡ªåŠ¨éªŒè¯ç”³è¯·åŸŸåè¯ä¹¦æ—¶ï¼Œéœ€è¦éªŒè¯å¯¹åŸŸåçš„æ‰€æœ‰æƒï¼Œè¿™ä¸ªéªŒè¯æ“ä½œå¯ä»¥é€šè¿‡æ‰‹åŠ¨ä¿®æ”¹åŸŸåè§£æå®Œæˆï¼Œä¹Ÿå¯ä»¥é€šè¿‡åŸŸåä¾›åº”å•†æä¾›çš„APIè‡ªåŠ¨å®Œæˆã€‚
æœ¬æ–‡ä¸­ï¼Œå¯¹åŸŸåä¾›åº”å•†APIçš„è‡ªåŠ¨æ“ä½œï¼Œä½¿ç”¨ certbot-letencrypt-wildcardcertificates-alydns-au
ç”³è¯·DNS APIå¯†é’¥è¦ä½¿ç”¨DNS APIï¼Œéœ€è¦å…ˆç”³è¯·å¯†é’¥ã€‚å¸¸è§åŸŸåä¾›åº”å•†è·å– DNS API å¯†é’¥çš„å…¥å£ï¼š

ALY_KEY å’Œ ALY_TOKENï¼šé˜¿é‡Œäº‘ API key å’Œ Secrec å®˜æ–¹ç”³è¯·æ–‡æ¡£ã€‚
TXY_KEY å’Œ TXY_TOKENï¼šè…¾è®¯äº‘ API å¯†é’¥å®˜æ–¹ç”³è¯·æ–‡æ¡£ã€‚
HWY_KEY å’Œ HWY_TOKENï¼šåä¸ºäº‘ API å¯†é’¥å®˜æ–¹ç”³è¯·æ–‡æ¡£
GODADDY_KEY å’Œ GODADDY_TOKENï¼šGoDaddy API å¯†é’¥å®˜æ–¹ç”³è¯·æ–‡æ¡£ã€‚

è„šæœ¬é…ç½®æœ¬èŠ‚ä¼šå¯¹DNSè‡ªåŠ¨éªŒè¯è„šæœ¬ç®€å•ä¿®æ”¹ï¼Œé€‚é…certbot/certbot:v1.32.0é•œåƒï¼Œè§‰å¾—éº»çƒ¦çš„åŒå­¦å¯ä»¥ç›´æ¥è·³åˆ°ã€è„šæœ¬é…ç½®2.0ã€‘ä¸€èŠ‚ï¼Œä½¿ç”¨ä¿®æ”¹å¥½çš„è„šæœ¬ã€‚
1ã€ä¸‹è½½DNSè‡ªåŠ¨éªŒè¯è„šæœ¬
mkdir -p /etc/letsencrypt/auth-hookcd /etc/letsencrypt/auth-hookgit clone https://github.com/ywdblog/certbot-letencrypt-wildcardcertificates-alydns-au auchmod 0777 au/au.sh

2ã€ä¿®æ”¹DNS APIå¯†é’¥au.shä¸­ï¼Œå¡«å…¥æˆ‘ä»¬ç”³è¯·çš„DNS APIå¯†é’¥
3ã€æŒ‡å®šä½¿ç”¨shè¿è¡Œè„šæœ¬å®¹å™¨ä¸­ä¸å­˜åœ¨bashï¼Œåªæœ‰shæ‰€ä»¥au.shå¤´éƒ¨ï¼Œ!#/bin/bashæ”¹ä¸º#/bin/sh
å¦åˆ™ç”³è¯·è¯ä¹¦æ—¶ä¼šæŠ¥é”™ï¼šHook â€˜â€“manual-auth-hookâ€™ for voidking.com reported error code 127Hook â€˜â€“manual-auth-hookâ€™ for voidking.com ran with error output: /bin/sh: /etc/letsencrypt/auth-hook/au/au.sh: not found
è¯¦æƒ…å‚è€ƒCertbot æ— æ³•è¿è¡ŒæŒ‚é’©è„šæœ¬
4ã€ä¿®æ”¹pythonè·¯å¾„å®¹å™¨ä¸­çš„pythonè·¯å¾„æ˜¯/usr/local/bin/pythonæ‰€ä»¥au.shä¸­ï¼Œ/usr/bin/python æ”¹ä¸º /usr/local/bin/python
å¦åˆ™ç”³è¯·è¯ä¹¦æ—¶ä¼šæŠ¥é”™ï¼šHook â€˜â€“manual-auth-hookâ€™ for voidking.com ran with error output: /etc/letsencrypt/auth-hook/au/au.sh: line 112: /usr/bin/python: not found
5ã€æ·»åŠ æ ¹åŸŸåï¼ˆå¯é€‰ï¼‰domain.iniä¸­ï¼Œå¦‚æœæ²¡æœ‰éœ€è¦çš„æ ¹åŸŸåï¼Œéœ€è¦è‡ªè¡Œæ·»åŠ 
è„šæœ¬é…ç½®2.01ã€ä¸‹è½½DNSè‡ªåŠ¨éªŒè¯è„šæœ¬
mkdir -p /etc/letsencrypt/auth-hookcd /etc/letsencrypt/auth-hookgit clone https://github.com/voidking/certbot-dns-au auchmod 0777 au/au.sh

2ã€ä¿®æ”¹DNS APIå¯†é’¥au.shä¸­ï¼Œå¡«å…¥æˆ‘ä»¬ç”³è¯·çš„DNS APIå¯†é’¥
3ã€æ·»åŠ æ ¹åŸŸåï¼ˆå¯é€‰ï¼‰domain.iniä¸­ï¼Œå¦‚æœæ²¡æœ‰éœ€è¦çš„æ ¹åŸŸåï¼Œéœ€è¦è‡ªè¡Œæ·»åŠ 
ç”³è¯·æ³›åŸŸåè¯ä¹¦1ã€æµ‹è¯•ç”³è¯·æ³›åŸŸåè¯ä¹¦
docker run -it --rm --name certbot \    -v &quot;/etc/letsencrypt:/etc/letsencrypt&quot; \    -v &quot;/var/log/letsencryt:/var/log/letsencryt&quot; \    certbot/certbot:v1.32.0 certonly \    -d *.voidking.com \    -d voidking.com \    --manual \    --preferred-challenges dns \    --manual-auth-hook &quot;/etc/letsencrypt/auth-hook/au/au.sh python txy add&quot; \    --manual-cleanup-hook &quot;/etc/letsencrypt/auth-hook/au/au.sh python txy clean&quot; \    --dry-run
è¾“å‡ºï¼š
Saving debug log to /var/log/letsencrypt/letsencrypt.logSimulating a certificate request for *.voidking.comThe dry run was successful.

å‚æ•°è¯´æ˜ï¼š

-dï¼šè¦ç”³è¯·è¯ä¹¦çš„åŸŸåã€‚è¿™é‡Œä½¿ç”¨ä¸¤ä¸ª-då‚æ•°ï¼Œä½¿è¯ä¹¦åŒæ—¶æ”¯æŒæ³›åŸŸå *.voidking.com å’Œä¸»åŸŸå voidking.com
â€“manual-auth-hookï¼šæŒ‡å®šè¦æ·»åŠ dnsè®°å½•çš„è„šæœ¬ï¼Œè°ƒç”¨åŸŸåä¾›åº”å•†æä¾›çš„APIæ·»åŠ è¦éªŒè¯çš„dnsè®°å½•
â€“manual-cleaup-hookï¼šæŒ‡å®šè¦åˆ é™¤dnsè®°å½•çš„è„šæ­¥ï¼Œè°ƒç”¨åŸŸåä¾›åº”å•†æä¾›çš„APIåˆ é™¤è¦éªŒè¯çš„dnsè®°å½•
â€“dry-runï¼šæµ‹è¯•è¿è¡Œï¼Œå¹¶ä¸çœŸå®ç”³è¯·è¯ä¹¦

2ã€ç”³è¯·æ³›åŸŸåè¯ä¹¦ï¼ˆå»æ‰â€“dry-runï¼‰
docker run -it --rm --name certbot \    -v &quot;/etc/letsencrypt:/etc/letsencrypt&quot; \    -v &quot;/var/log/letsencryt:/var/log/letsencryt&quot; \    certbot/certbot:v1.32.0 certonly \    -d *.voidking.com \    -d voidking.com \    --manual \    --preferred-challenges dns \    --manual-auth-hook &quot;/etc/letsencrypt/auth-hook/au/au.sh python txy add&quot; \    --manual-cleanup-hook &quot;/etc/letsencrypt/auth-hook/au/au.sh python txy clean&quot;
æ ¹æ®æç¤ºï¼Œå¡«å†™é‚®ç®±ï¼ŒåŒæ„åè®®ç­‰ã€‚
ç”³è¯·çš„è¯ä¹¦æ–‡ä»¶ï¼Œä¼šè¢«æ”¾åˆ° /etc/letsencrypt/archive è·¯å¾„ä¸­ï¼ŒåŒæ—¶ /etc/letsencrypt/live è·¯å¾„ä¸­ä¼šåˆ›å»ºè½¯é“¾ï¼Œç»­æœŸæ—¶ä¼šè‡ªåŠ¨ä¿®æ”¹è½¯é“¾ã€‚ç”³è¯·è¯ä¹¦çš„ç›¸å…³å‚æ•°ï¼Œä¼šè¢«æ”¾åˆ° /etc/letsencrypt/renewal è·¯å¾„ä¸­
è¯ä¹¦æ–‡ä»¶æœ‰å››ä¸ªï¼Œå®˜æ–¹è¯´æ˜å¦‚ä¸‹ï¼š
This directory contains your keys and certificates.`privkey.pem`  : the private key for your certificate.`fullchain.pem`: the certificate file used in most server software.`chain.pem`    : used for OCSP stapling in Nginx &gt;=1.3.7.`cert.pem`     : will break many server configurations, and should not be used                 without reading further documentation (see link below).WARNING: DO NOT MOVE OR RENAME THESE FILES!         Certbot expects these files to remain in this location in order         to function properly!We recommend not moving these files. For more information, see the CertbotUser Guide at https://certbot.eff.org/docs/using.html#where-are-my-certificates.

ä¸€èˆ¬ä½¿ç”¨fullchain.pemå’Œprivkey.pemå°±å¯ä»¥äº†ã€‚å¦‚æœå¼€å¯äº†OCSP staplingï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨chain.pemã€‚
æŸ¥çœ‹è¯ä¹¦docker run -it --rm --name certbot \    -v &quot;/etc/letsencrypt:/etc/letsencrypt&quot; \    -v &quot;/var/log/letsencryt:/var/log/letsencryt&quot; \    certbot/certbot:v1.32.0 certificates

é…ç½®è¯ä¹¦è‡ªåŠ¨ç»­æœŸå› ä¸ºç”³è¯·è¯ä¹¦çš„ç›¸å…³å‚æ•°æ”¾åˆ°äº† /etc/letsencrypt/renewal è·¯å¾„ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€æ¡å‘½ä»¤å®ç°ç»­æœŸã€‚
ç»­æœŸæ‰€æœ‰è¯ä¹¦docker run -it --rm --name certbot \    -v &quot;/etc/letsencrypt:/etc/letsencrypt&quot; \    -v &quot;/var/log/letsencryt:/var/log/letsencryt&quot; \    certbot/certbot:v1.32.0 renew \    --manual \    --preferred-challenges dns \    --manual-auth-hook &quot;/etc/letsencrypt/auth-hook/au/au.sh python txy add&quot; \    --manual-cleanup-hook &quot;/etc/letsencrypt/auth-hook/au/au.sh python txy clean&quot;
è¯ä¹¦æœ‰æ•ˆæœŸå°äº 30 å¤©çš„æƒ…å†µæ‰ä¼šè¢« renewã€‚
ç»­æœŸæŒ‡å®šè¯ä¹¦docker run -it --rm --name certbot \    -v &quot;/etc/letsencrypt:/etc/letsencrypt&quot; \    -v &quot;/var/log/letsencryt:/var/log/letsencryt&quot; \    certbot/certbot:v1.32.0 renew \    --cert-name voidking.com \    --manual \    --preferred-challenges dns \    --manual-auth-hook &quot;/etc/letsencrypt/auth-hook/au/au.sh python txy add&quot; \    --manual-cleanup-hook &quot;/etc/letsencrypt/auth-hook/au/au.sh python txy clean&quot;

é…ç½®å®šæ—¶è‡ªåŠ¨ç»­æœŸ1ã€è¯ä¹¦ç»­æœŸè„šæœ¬å†™å…¥ cert-renew.sh
cat &lt;&lt;EOF &gt; /etc/letsencrypt/auth-hook/cert-renew.shdocker run -it --rm --name certbot \    -v &quot;/etc/letsencrypt:/etc/letsencrypt&quot; \    -v &quot;/var/log/letsencryt:/var/log/letsencryt&quot; \    certbot/certbot:v1.32.0 renew \    --cert-name voidking.com \    --manual \    --preferred-challenges dns \    --manual-auth-hook &quot;/etc/letsencrypt/auth-hook/au/au.sh python txy add&quot; \    --manual-cleanup-hook &quot;/etc/letsencrypt/auth-hook/au/au.sh python txy clean&quot; \    &gt;&gt; /etc/letsencrypt/auth-hook/cert-renew.logEOFchmod a+x /etc/letsencrypt/auth-hook/cert-renew.sh

2ã€æ·»åŠ å®šæ—¶ä»»åŠ¡
crontab -e

æ·»åŠ æ¯å‘¨å®šæ—¶æ‰§è¡Œï¼š
0 0 * * 0 /bin/bash /etc/letsencrypt/auth-hook/cert-renew.sh
å› ä¸ºè¯ä¹¦æœ‰æ•ˆæœŸå°äº 30 å¤©çš„æƒ…å†µæ‰ä¼šè¢« renewï¼Œæ‰€ä»¥ crontab çš„å‘¨æœŸå¯ä»¥é…ç½®ä¸º 1 å¤©æˆ– 1 å‘¨ã€‚
æ’¤é”€è¯ä¹¦docker run -it --rm --name certbot \    -v &quot;/etc/letsencrypt:/etc/letsencrypt&quot; \    -v &quot;/var/log/letsencryt:/var/log/letsencryt&quot; \    certbot/certbot:v1.32.0 revoke \    --cert-name voidking.com# ordocker run -it --rm --name certbot \    -v &quot;/etc/letsencrypt:/etc/letsencrypt&quot; \    -v &quot;/var/log/letsencryt:/var/log/letsencryt&quot; \    certbot/certbot:v1.32.0 revoke \    --cert-path /etc/letsencrypt/live/voidking.com/cert.pem

ä½¿ç”¨è¯ä¹¦server &#123;    listen 80;    listen 443 ssl;    server_name www.voidking.com;    charset utf-8;    ssl_certificate /etc/letsencrypt/live/voidking.com/fullchain.pem;    ssl_certificate_key  /etc/letsencrypt/live/voidking.com/privkey.pem;    ssl_stapling on;    ssl_stapling_verify on;    ssl_trusted_certificate /etc/letsencrypt/live/voidking.com/chain.pem;    ssl_session_timeout  5m;    ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;    ssl_ciphers  HIGH:!ADH:!EXPORT56:RC4+RSA:+MEDIUM;    ssl_prefer_server_ciphers on;    ...&#125;

è¯¦æƒ…å‚è€ƒæ–‡æ¡£ã€ŠNginxå…¥é—¨ç¯‡ã€‹
åè®°å¯¹äºæ³›åŸŸåè¯ä¹¦çš„é…ç½®ï¼Œå»ºè®®é…ç½®åœ¨å†…ç½‘æœ€å¤–å±‚çš„ç½‘å…³å…¥å£å¤„ï¼Œè¿™æ ·æ–¹ä¾¿ç»Ÿä¸€é…ç½®ã€‚ä¾‹å¦‚ï¼š
Request -&gt; Nginx(certificate)  -&gt; Ingress                               -&gt; Nginx                               -&gt; Real Server

é™¤äº†certbotï¼Œè¿˜æœ‰ä¸€æ¬¾acme.shä¹Ÿå¾ˆå¥½ç”¨ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡Œç ”ç©¶ä¸‹ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>https</tag>
        <tag>tls</tag>
        <tag>ssl</tag>
      </tags>
  </entry>
  <entry>
    <title>æµ…è°ˆæ•°æ®åŠ å¯†</title>
    <url>/dev-encryption-algorithm/</url>
    <content><![CDATA[ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®åŠ å¯†ï¼Ÿæ•°æ®åŠ å¯†ï¼Œå°±æ˜¯åŠ å¯†ç®—æ³•å’ŒåŠ å¯†å¯†é’¥å°†æ˜æ–‡è½¬å˜ä¸ºå¯†æ–‡ï¼Œè€Œè§£å¯†åˆ™æ˜¯é€šè¿‡è§£å¯†ç®—æ³•å’Œè§£å¯†å¯†é’¥å°†å¯†æ–‡æ¢å¤ä¸ºæ˜æ–‡ã€‚å®ƒçš„æ ¸å¿ƒæ˜¯å¯†ç å­¦ã€‚
æ•°æ®åŠ å¯†æ˜¯è®¡ç®—æœºç³»ç»Ÿå¯¹ä¿¡æ¯è¿›è¡Œä¿æŠ¤çš„ä¸€ç§æœ€å¯é çš„åŠæ³•ã€‚å®ƒåˆ©ç”¨å¯†ç æŠ€æœ¯å¯¹ä¿¡æ¯è¿›è¡ŒåŠ å¯†ï¼Œå®ç°ä¿¡æ¯éšè”½ï¼Œä»è€Œèµ·åˆ°ä¿æŠ¤ä¿¡æ¯å®‰å…¨çš„ä½œç”¨ã€‚
æœ€å…¸å‹çš„åº”ç”¨åœºæ™¯å°±æ˜¯æ•°æ®ç½‘ç»œä¼ è¾“å’Œæ•°æ®å­˜å‚¨ï¼Œä¸ºäº†é¿å…æ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼Œæˆ‘ä»¬å°±ä¼šç”¨åˆ°åŠ å¯†ç®—æ³•ã€‚


åŠ å¯†ç®—æ³•åˆ†ç±»åŠ å¯†ç®—æ³•å¯ä»¥åˆ†ä¸‰ç±»ï¼šå¯¹ç§°åŠ å¯†ç®—æ³•ã€éå¯¹ç§°åŠ å¯†ç®—æ³•ã€å“ˆå¸Œç®—æ³•ï¼ˆæ•£åˆ—ç®—æ³•ï¼‰ã€‚

å¯¹ç§°åŠ å¯†ç®—æ³•çš„ä½œç”¨æ˜¯åŠ å¯†å’Œè§£å¯†ï¼Œé€šä¿¡åŒæ–¹äº‹å…ˆçº¦å®šå¥½å¯†é’¥ï¼Œä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥è¿›è¡Œæ˜æ–‡åŠ å¯†å’Œå¯†æ–‡è§£å¯†ã€‚ä¼˜ç‚¹æ˜¯é€Ÿåº¦å¿«ï¼Œç¼ºç‚¹æ˜¯ä¸å¤Ÿå®‰å…¨ã€‚
éå¯¹ç§°åŠ å¯†ç®—æ³•çš„ä½œç”¨æ˜¯å®‰å…¨çº¦å®šå¯†é’¥ï¼ˆå¯¹ç§°åŠ å¯†å¯†é’¥ï¼‰ï¼ŒæœåŠ¡ç«¯ä¿ç•™ç§é’¥å…¬å¼€å…¬é’¥ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨å…¬é’¥åŠ å¯†å¯†é’¥æ˜æ–‡å‘é€ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ç”¨ç§é’¥è§£å¯†è·å¾—å¯†é’¥æ˜æ–‡ã€‚ä¼˜ç‚¹æ˜¯å®‰å…¨ï¼Œç¼ºç‚¹æ˜¯é€Ÿåº¦æ…¢ã€‚
å“ˆå¸Œç®—æ³•åœ¨åŠ å¯†é¢†åŸŸçš„ä½œç”¨æ˜¯ç”Ÿæˆä¿¡æ¯æ‘˜è¦ï¼Œç”¨æ¥éªŒè¯ä¿¡æ¯çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§ã€‚

å¯¹ç§°åŠ å¯†ç®—æ³•é€Ÿåº¦å¿«ï¼Œä½†æ˜¯çº¦å®šå¯†é’¥æ—¶ä¸å¤Ÿå®‰å…¨ï¼Œå®¹æ˜“è¢«æ‹¦æˆªï¼Œæ‰€ä»¥å‡ºç°äº†éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œå¯ä»¥å®‰å…¨åœ°çº¦å®šå¯†é’¥ã€‚
è¯¦æƒ…å‚è€ƒæ¼«ç”»ï¼šä»€ä¹ˆæ˜¯åŠ å¯†ç®—æ³•ï¼Ÿ
HTTPS(SSL/TLS)åŠ å¯†åŸç†åŸºç¡€æ¦‚å¿µHTTPS
è¶…æ–‡æœ¬ä¼ è¾“å®‰å…¨åè®®ï¼ˆè‹±è¯­ï¼šHyperText Transfer Protocol Secureï¼Œç¼©å†™ï¼šHTTPSï¼›å¸¸ç§°ä¸ºHTTP over TLSã€HTTP over SSLæˆ–HTTP Secureï¼‰æ˜¯ä¸€ç§é€šè¿‡è®¡ç®—æœºç½‘ç»œè¿›è¡Œå®‰å…¨é€šä¿¡çš„ä¼ è¾“åè®®ã€‚HTTPSç»ç”±HTTPè¿›è¡Œé€šä¿¡ï¼Œä½†åˆ©ç”¨SSL/TLSæ¥åŠ å¯†æ•°æ®åŒ…ã€‚HTTPSå¼€å‘çš„ä¸»è¦ç›®çš„ï¼Œæ˜¯æä¾›å¯¹ç½‘ç«™æœåŠ¡å™¨çš„èº«ä»½è®¤è¯ï¼Œä¿æŠ¤äº¤æ¢èµ„æ–™çš„éšç§ä¸å®Œæ•´æ€§ã€‚è¿™ä¸ªåè®®ç”±ç½‘æ™¯å…¬å¸ï¼ˆNetscapeï¼‰åœ¨1994å¹´é¦–æ¬¡æå‡ºï¼Œéšåæ‰©å±•åˆ°äº’è”ç½‘ä¸Šã€‚

å‚è€ƒæ–‡æ¡£ï¼šç»´åŸºç™¾ç§‘ - è¶…æ–‡æœ¬ä¼ è¾“å®‰å…¨åè®®
TLS
ä¼ è¾“å±‚å®‰å…¨æ€§åè®®ï¼ˆè‹±è¯­ï¼šTransport Layer Securityï¼Œç¼©å†™ï¼šTLSï¼‰åŠå…¶å‰èº«å®‰å…¨å¥—æ¥å±‚ï¼ˆè‹±è¯­ï¼šSecure Sockets Layerï¼Œç¼©å†™ï¼šSSLï¼‰æ˜¯ä¸€ç§å®‰å…¨åè®®ï¼Œç›®çš„æ˜¯ä¸ºäº’è”ç½‘é€šä¿¡æä¾›å®‰å…¨åŠæ•°æ®å®Œæ•´æ€§ä¿éšœã€‚SSLåŒ…å«è®°å½•å±‚ï¼ˆRecord Layerï¼‰å’Œä¼ è¾“å±‚ï¼Œè®°å½•å±‚åè®®ç¡®å®šä¼ è¾“å±‚æ•°æ®çš„å°è£…æ ¼å¼ã€‚ä¼ è¾“å±‚å®‰å…¨åè®®ä½¿ç”¨X.509è®¤è¯ï¼Œä¹‹ååˆ©ç”¨éå¯¹ç§°åŠ å¯†æ¼”ç®—æ¥å¯¹é€šä¿¡æ–¹åšèº«ä»½è®¤è¯ï¼Œä¹‹åäº¤æ¢å¯¹ç§°å¯†é’¥ä½œä¸ºä¼šè°ˆå¯†é’¥ï¼ˆSession keyï¼‰ã€‚è¿™ä¸ªä¼šè°ˆå¯†é’¥æ˜¯ç”¨æ¥å°†é€šä¿¡ä¸¤æ–¹äº¤æ¢çš„æ•°æ®åšåŠ å¯†ï¼Œä¿è¯ä¸¤ä¸ªåº”ç”¨é—´é€šä¿¡çš„ä¿å¯†æ€§å’Œå¯é æ€§ï¼Œä½¿å®¢æˆ·ä¸æœåŠ¡å™¨åº”ç”¨ä¹‹é—´çš„é€šä¿¡ä¸è¢«æ”»å‡»è€…çªƒå¬ã€‚

å‚è€ƒæ–‡æ¡£ï¼šç»´åŸºç™¾ç§‘ - ä¼ è¾“å±‚å®‰å…¨æ€§åè®®
PKI
å…¬å¼€å¯†é’¥åŸºç¡€å»ºè®¾ï¼ˆè‹±è¯­ï¼šPublic Key Infrastructureï¼Œç¼©å†™ï¼šPKIï¼‰ï¼Œåˆç§°å…¬å¼€å¯†é’¥åŸºç¡€æ¶æ„ã€å…¬é’¥åŸºç¡€å»ºè®¾ã€å…¬é’¥åŸºç¡€è®¾æ–½ã€å…¬å¼€å¯†ç åŒ™åŸºç¡€å»ºè®¾æˆ–å…¬é’¥åŸºç¡€æ¶æ„ï¼Œæ˜¯ä¸€ç»„ç”±ç¡¬ä»¶ã€è½¯ä»¶ã€å‚ä¸è€…ã€ç®¡ç†æ”¿ç­–ä¸æµç¨‹ç»„æˆçš„åŸºç¡€æ¶æ„ï¼Œå…¶ç›®çš„åœ¨äºåˆ›é€ ã€ç®¡ç†ã€åˆ†é…ã€ä½¿ç”¨ã€å­˜å‚¨ä»¥åŠæ’¤é”€æ•°å­—è¯ä¹¦ã€‚å¯†ç å­¦ä¸Šï¼Œå…¬å¼€å¯†é’¥åŸºç¡€å»ºè®¾å€Ÿç€æ•°å­—è¯ä¹¦è®¤è¯æœºæ„ï¼ˆCAï¼‰å°†ç”¨æˆ·çš„ä¸ªäººèº«ä»½è·Ÿå…¬å¼€å¯†é’¥é“¾æ¥åœ¨ä¸€èµ·ã€‚å¯¹æ¯ä¸ªè¯ä¹¦ä¸­å¿ƒç”¨æˆ·çš„èº«ä»½å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚é“¾æ¥å…³ç³»é€šè¿‡æ³¨å†Œå’Œå‘å¸ƒè¿‡ç¨‹åˆ›å»ºï¼Œå–å†³äºæ‹…ä¿çº§åˆ«ï¼Œé“¾æ¥å…³ç³»å¯èƒ½ç”±CAçš„å„ç§è½¯ä»¶æˆ–åœ¨äººä¸ºç›‘ç£ä¸‹å®Œæˆã€‚PKIçš„ç¡®å®šé“¾æ¥å…³ç³»çš„è¿™ä¸€è§’è‰²ç§°ä¸ºæ³¨å†Œç®¡ç†ä¸­å¿ƒï¼ˆRegistration Authorityï¼ŒRAï¼‰ã€‚RAç¡®ä¿å…¬å¼€å¯†é’¥å’Œä¸ªäººèº«ä»½é“¾æ¥ï¼Œå¯ä»¥é˜²æ¬ºè¯ˆã€‚åœ¨å¾®è½¯çš„å…¬å¼€å¯†é’¥åŸºç¡€å»ºè®¾ä¹‹ä¸‹ï¼Œæ³¨å†Œç®¡ç†ä¸­å¿ƒï¼ˆRAï¼‰åˆè¢«å«åšä»å±æ•°å­—è¯ä¹¦è®¤è¯æœºæ„ï¼ˆSubordinate CAï¼‰ã€‚

å‚è€ƒæ–‡æ¡£ï¼šç»´åŸºç™¾ç§‘-å…¬å¼€å¯†é’¥åŸºç¡€æ¶æ„
CA
æ•°å­—è¯ä¹¦è®¤è¯æœºæ„ï¼ˆè‹±è¯­ï¼šCertificate Authorityï¼Œç¼©å†™ä¸ºCAï¼‰ï¼Œä¹Ÿç§°ä¸ºç”µå­å•†åŠ¡è®¤è¯ä¸­å¿ƒã€ç”µå­å•†åŠ¡è®¤è¯æˆæƒæœºæ„ï¼Œæ˜¯è´Ÿè´£å‘æ”¾å’Œç®¡ç†æ•°å­—è¯ä¹¦çš„æƒå¨æœºæ„ï¼Œå¹¶ä½œä¸ºç”µå­å•†åŠ¡äº¤æ˜“ä¸­å—ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹ï¼Œæ‰¿æ‹…å…¬é’¥ä½“ç³»ä¸­å…¬é’¥çš„åˆæ³•æ€§æ£€éªŒçš„è´£ä»»ã€‚

å‚è€ƒæ–‡æ¡£ï¼šç»´åŸºç™¾ç§‘-è¯ä¹¦é¢å‘æœºæ„
æ•°å­—è¯ä¹¦
å…¬é’¥è¯ä¹¦ï¼ˆè‹±è¯­ï¼šPublic key certificateï¼‰ï¼Œåˆç§°æ•°å­—è¯ä¹¦ï¼ˆdigital certificateï¼‰æˆ–èº«ä»½è¯ä¹¦ï¼ˆidentity certificateï¼‰ã€‚æ˜¯ç”¨äºå…¬å¼€å¯†é’¥åŸºç¡€å»ºè®¾çš„ç”µå­æ–‡ä»¶ï¼Œç”¨æ¥è¯æ˜å…¬å¼€å¯†é’¥æ‹¥æœ‰è€…çš„èº«ä»½ã€‚æ­¤æ–‡ä»¶åŒ…å«äº†å…¬é’¥ä¿¡æ¯ã€æ‹¥æœ‰è€…èº«ä»½ä¿¡æ¯ï¼ˆä¸»ä½“ï¼‰ã€ä»¥åŠæ•°å­—è¯ä¹¦è®¤è¯æœºæ„ï¼ˆå‘è¡Œè€…ï¼‰å¯¹è¿™ä»½æ–‡ä»¶çš„æ•°å­—ç­¾åï¼Œä»¥ä¿è¯è¿™ä¸ªæ–‡ä»¶çš„æ•´ä½“å†…å®¹æ­£ç¡®æ— è¯¯ã€‚æ‹¥æœ‰è€…å‡­ç€æ­¤æ–‡ä»¶ï¼Œå¯å‘ç”µè„‘ç³»ç»Ÿæˆ–å…¶ä»–ç”¨æˆ·è¡¨æ˜èº«ä»½ï¼Œä»è€Œå¯¹æ–¹è·å¾—ä¿¡ä»»å¹¶æˆæƒè®¿é—®æˆ–ä½¿ç”¨æŸäº›æ•æ„Ÿçš„ç”µè„‘æœåŠ¡ã€‚ç”µè„‘ç³»ç»Ÿæˆ–å…¶ä»–ç”¨æˆ·å¯ä»¥é€è¿‡ä¸€å®šçš„ç¨‹åºæ ¸å®è¯ä¹¦ä¸Šçš„å†…å®¹ï¼ŒåŒ…æ‹¬è¯ä¹¦æœ‰å¦è¿‡æœŸã€æ•°å­—ç­¾åæ˜¯å¦æœ‰æ•ˆï¼Œå¦‚æœä½ ä¿¡ä»»ç­¾å‘çš„æœºæ„ï¼Œå°±å¯ä»¥ä¿¡ä»»è¯ä¹¦ä¸Šçš„å¯†é’¥ï¼Œå‡­å…¬é’¥åŠ å¯†ä¸æ‹¥æœ‰è€…è¿›è¡Œå¯é çš„é€šä¿¡ã€‚


å…¬é’¥è¯ä¹¦åŒ…æ‹¬è‡ªç­¾è¯ä¹¦ã€æ ¹è¯ä¹¦ã€ä¸­ä»‹è¯ä¹¦ã€æˆæƒè¯ä¹¦ã€ç»ˆç«¯å®ä½“è¯ä¹¦ï¼ˆTLSæœåŠ¡å™¨è¯ä¹¦å’ŒTLSå®¢æˆ·ç«¯è¯ä¹¦ï¼‰ã€‚

å‚è€ƒæ–‡æ¡£ï¼šç»´åŸºç™¾ç§‘-å…¬é’¥è¯ä¹¦
HTTPS(SSL/TLS)åŠ å¯†åŸç†TLS/SSL çš„åŠŸèƒ½å®ç°ä¸»è¦ä¾èµ–äºä¸‰ç±»åŸºæœ¬ç®—æ³•ï¼šæ•£åˆ—å‡½æ•° Hashã€å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†ã€‚å…¶åˆ©ç”¨éå¯¹ç§°åŠ å¯†å®ç°èº«ä»½è®¤è¯å’Œå¯†é’¥åå•†ï¼Œå¯¹ç§°åŠ å¯†ç®—æ³•é‡‡ç”¨åå•†çš„å¯†é’¥å¯¹æ•°æ®åŠ å¯†ï¼ŒåŸºäºæ•£åˆ—å‡½æ•°éªŒè¯ä¿¡æ¯çš„å®Œæ•´æ€§ã€‚
TLS çš„åŸºæœ¬å·¥ä½œæ–¹å¼æ˜¯ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨éå¯¹ç§°åŠ å¯†ä¸æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ï¼Œå®ç°èº«ä»½éªŒè¯å¹¶åå•†å¯¹ç§°åŠ å¯†ä½¿ç”¨çš„å¯†é’¥ï¼Œç„¶åå¯¹ç§°åŠ å¯†ç®—æ³•é‡‡ç”¨åå•†å¯†é’¥å¯¹ä¿¡æ¯ä»¥åŠä¿¡æ¯æ‘˜è¦è¿›è¡ŒåŠ å¯†é€šä¿¡ï¼Œä¸åŒçš„èŠ‚ç‚¹ä¹‹é—´é‡‡ç”¨çš„å¯¹ç§°å¯†é’¥ä¸åŒï¼Œä»è€Œå¯ä»¥ä¿è¯ä¿¡æ¯åªèƒ½é€šä¿¡åŒæ–¹è·å–ã€‚ä¾‹å¦‚ï¼Œåœ¨ HTTPS åè®®ä¸­ï¼Œå®¢æˆ·ç«¯å‘å‡ºè¯·æ±‚ï¼ŒæœåŠ¡ç«¯ä¼šå°†å…¬é’¥å‘ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯éªŒè¯è¿‡åç”Ÿæˆä¸€ä¸ªå¯†é’¥å†ç”¨å…¬é’¥åŠ å¯†åå‘é€ç»™æœåŠ¡ç«¯ï¼ˆéå¯¹ç§°åŠ å¯†ï¼‰ï¼ŒåŒæ–¹ä¼šåœ¨ TLS æ¡æ‰‹è¿‡ç¨‹ä¸­ç”Ÿæˆä¸€ä¸ªåå•†å¯†é’¥ï¼ˆå¯¹ç§°å¯†é’¥ï¼‰ï¼ŒæˆåŠŸåå»ºç«‹åŠ å¯†è¿æ¥ã€‚é€šä¿¡è¿‡ç¨‹ä¸­å®¢æˆ·ç«¯å°†è¯·æ±‚æ•°æ®ç”¨åå•†å¯†é’¥åŠ å¯†åå‘é€ï¼ŒæœåŠ¡ç«¯ä¹Ÿç”¨åå•†å¯†é’¥è§£å¯†ï¼Œå“åº”ä¹Ÿç”¨ç›¸åŒçš„åå•†å¯†é’¥ã€‚åç»­çš„é€šä¿¡ä½¿ç”¨å¯¹ç§°åŠ å¯†æ˜¯å› ä¸ºå¯¹ç§°åŠ è§£å¯†å¿«ï¼Œè€Œæ¡æ‰‹è¿‡ç¨‹ä¸­éå¯¹ç§°åŠ å¯†å¯ä»¥ä¿è¯åŠ å¯†çš„æœ‰æ•ˆæ€§ï¼Œä½†æ˜¯è¿‡ç¨‹å¤æ‚ï¼Œè®¡ç®—é‡ç›¸å¯¹æ¥è¯´ä¹Ÿå¤§ã€‚
HTTPSé€šä¿¡åŸç†ï¼šå¯¹ç§°åŠ å¯†ï¼šHTTPS çš„æœ€ç»ˆåŠ å¯†å½¢å¼ã€‚éå¯¹ç§°åŠ å¯†ï¼šè§£å†³å•å‘å¯¹ç§°å¯†é’¥çš„ä¼ è¾“é—®é¢˜ã€‚æ•°å­—è¯ä¹¦ï¼šè§£å†³å…¬é’¥ä¼ è¾“ä¿¡ä»»é—®é¢˜ã€‚
HTTPSçš„æœ€ç»ˆåŠ å¯†å½¢å¼æ˜¯å¯¹ç§°åŠ å¯†ï¼Œå› ä¸ºå¯¹ç§°åŠ å¯†é€Ÿåº¦å¿«ã€‚ä½†æ˜¯å¯¹ç§°åŠ å¯†éœ€è¦åŒæ–¹çº¦å®šå¥½ä¸€ä¸ªå¯†é’¥ï¼Œè¿™é‡Œå°±å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯è¿™ä¸ªå¯†é’¥åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æœ‰å¯èƒ½ä¼šè¢«åˆ«äººçªƒå–ã€‚å¯¹äºè¿™ä¸ªé—®é¢˜ï¼ŒHTTPSä¸­çš„è§£å†³åŠæ³•æ˜¯ä½¿ç”¨éå¯¹ç§°åŠ å¯†ï¼Œå°±æ˜¯ä½¿ç”¨ä¸€ä¸ªå¯†é’¥å¯¹ï¼Œå…¬é’¥å…¬å¼€ï¼Œç§é’¥ä¿å¯†ã€‚å…¬é’¥åŠ å¯†çš„å†…å®¹åªæœ‰ç§é’¥æ‰èƒ½è§£å¯†ï¼Œç§é’¥ç­¾åçš„å†…å®¹åªæœ‰å…¬é’¥æ‰èƒ½éªŒç­¾ã€‚serveræŠŠå…¬é’¥å‘é€ç»™clientï¼Œclientä½¿ç”¨å…¬é’¥åŠ å¯†å¯¹ç§°åŠ å¯†çš„å¯†é’¥ï¼Œç„¶åå‘é€ç»™serverï¼Œserverä½¿ç”¨ç§é’¥è¿›è¡Œè§£å¯†è·å–åˆ°å¯¹ç§°å¯†é’¥ã€‚å› ä¸ºç§é’¥åªæœ‰serveræœ‰ï¼Œæ‰€ä»¥clientå‘serverçš„ä¼ è¾“æ˜¯å®‰å…¨çš„ã€‚ä½†æ˜¯è¿™é‡Œåˆæœ‰ä¸€ä¸ªé—®é¢˜ï¼ŒserveræŠŠå…¬é’¥ä¼ é€ç»™clientçš„è¿‡ç¨‹æ€ä¹ˆä¿è¯å®‰å…¨ï¼Ÿæ€ä¹ˆä¿è¯è¿”å›è¯·æ±‚çš„serveræ˜¯çœŸæ­£çš„serverï¼Ÿå¯¹äºè¿™ä¸ªé—®é¢˜ï¼ŒHTTPSä¸­çš„è§£å†³åŠæ³•æ˜¯ä½¿ç”¨æ•°å­—è¯ä¹¦ã€‚æ•°å­—è¯ä¹¦å°±æ˜¯æƒå¨ç¬¬ä¸‰æ–¹æœºæ„ï¼ˆCAï¼‰å‡ºå…·çš„è¯æ˜ï¼Œç»è¿‡è¿™ä¸ªæœºæ„è®¤è¯çš„è¯ä¹¦æ˜¯å¯é çš„è¯ä¹¦ã€‚é‚£è¿™ä¸ªæ•°å­—è¯ä¹¦æ€æ ·ç”³è¯·å’Œä½¿ç”¨å‘¢ï¼Ÿ1ã€é¦–å…ˆserverä¹Ÿå°±æ˜¯åŸŸåæ‰€æœ‰è€…ä¼šå‘CAç”³è¯·SSLè¯ä¹¦ï¼Œç”³è¯·çš„æ—¶å€™ä¼šä½¿ç”¨dnsè§£æç­‰æ–¹æ³•éªŒè¯ï¼Œä¿è¯åªæœ‰åŸŸåæ‰€æœ‰è€…æ‰èƒ½ç”³è¯·åˆ°è¯ä¹¦æ˜æ–‡å’ŒCAç§é’¥ç­¾åï¼ˆè¯ä¹¦ç­¾åï¼‰ï¼Œè¯ä¹¦ä¸­åŒ…å«å…¬é’¥ã€‚2ã€clientå’Œserveråœ¨è¿›è¡Œé€šä¿¡æ—¶ï¼Œclientä»serverè·å–åˆ°äº†åŸŸåçš„è¯ä¹¦æ˜æ–‡å’ŒCAç§é’¥ç­¾åã€‚3ã€clientæ ¹æ®æ‘˜è¦ç®—æ³•å¯¹è¯ä¹¦æ˜æ–‡ç”Ÿæˆè¯ä¹¦æ‘˜è¦ï¼›åŒæ—¶ä½¿ç”¨å†…ç½®åœ¨æ“ä½œç³»ç»Ÿä¸­çš„CAå…¬é’¥å¯¹CAç§é’¥ç­¾åè¿›è¡ŒéªŒç­¾è·å–è¯ä¹¦æ‘˜è¦ã€‚å¦‚æœä¸¤ä»½è¯ä¹¦æ‘˜è¦æ˜¯ä¸€è‡´çš„ï¼ŒåŸŸåä¹Ÿå’Œè¯ä¹¦ä¸Šå¯¹çš„ä¸Šï¼Œè¯´æ˜serveræ˜¯å¯ä¿¡çš„ï¼Œé‚£æˆ‘ä»¬ä»è¯ä¹¦ä¸­è·å–åˆ°çš„å…¬é’¥ä¹Ÿå°±æ˜¯å¯ä¿¡çš„ã€‚4ã€clientä½¿ç”¨å…¬é’¥åŠ å¯†å¯¹ç§°åŠ å¯†çš„å¯†é’¥ï¼Œå‘é€ç»™serverï¼Œserverä½¿ç”¨ç§é’¥è¿›è¡Œè§£å¯†è·å–åˆ°å¯¹ç§°å¯†é’¥ï¼Œç„¶ååŒæ–¹å°±å¯ä»¥è¿›è¡Œå®‰å…¨é€šä¿¡äº†ã€‚
å¦‚æœé»‘å®¢æ‹¿åˆ°äº†serverçš„è¯ä¹¦å’Œè¯ä¹¦ç­¾åï¼Œæ˜¯ä¸æ˜¯å¯ä»¥å†’å……serverï¼Ÿä¸å¯ä»¥ï¼Œå› ä¸ºæ²¡æœ‰ç§é’¥ï¼Œæ— æ³•è§£å¯†clienté€šè¿‡å…¬é’¥åŠ å¯†çš„å†…å®¹ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

HTTPSç™¾åº¦ç™¾ç§‘
18 å¼ å›¾å½»åº•å¼„æ‡‚ HTTPS çš„åŸç†
SSL/TLS è¯¦è§£
SSL/TLS åŸç†è¯¦è§£
OpenSSL ä¸ SSL æ•°å­—è¯ä¹¦æ¦‚å¿µè´´

HTTPSé…ç½®å®è·µ
ç½‘ç«™é…ç½®HTTPSåŠ å¯†è®¿é—®ï¼šã€ŠHexoå¯ç”¨HTTPSåŠ å¯†è¿æ¥ã€‹
è‡ªå»ºCAå¹¶é¢å‘è¯ä¹¦ï¼šã€ŠCentOS7å®‰è£…é…ç½®GitLabã€‹
K8Sä¸­çš„æ•°å­—è¯ä¹¦ï¼šã€ŠK8Sä¸­åˆ›å»ºç”¨æˆ·è´¦æˆ·å’ŒæœåŠ¡è´¦æˆ·ã€‹

ä¿¡å°åŠ å¯†åŸç†
ä¿¡å°åŠ å¯†å°±æ˜¯ç”¨ä¸€ä¸ªå¯†é’¥åŠ å¯†æ˜æ–‡æ•°æ®ï¼Œç„¶åç”¨å¦ä¸€ä¸ªå¯†é’¥åŠ å¯†è¿™ä¸ªå¯†é’¥ã€‚

æ¯”å¦‚æˆ˜äº‰æ—¶æœŸï¼ŒAliceå’ŒBobè¦å°±å†›äº‹è¡ŒåŠ¨è¿›è¡Œæ²Ÿé€šã€‚ä»–ä»¬å·²ç»æå‰åœ¨çº¿ä¸‹ç¢°è¿‡å¤´ï¼Œçº¦å®šäº†ä¸€ä¸ªå…±äº«çš„å¯¹ç§°å¯†é’¥Sã€‚æŸå¤©ï¼ŒAliceæƒ³å‘ç”µæŠ¥ç»™Bobï¼Œé€šçŸ¥å†…å®¹Cå…·ä½“ä¸ºè€å¤§å†³å®šä»Šæ™š11ç‚¹åŠ¨æ‰‹ã€‚
æ­£å¸¸çš„åŠ å¯†æ€è·¯æ˜¯ï¼šAliceç”¨å¯¹ç§°å¯†é’¥SåŠ å¯†é€šçŸ¥å†…å®¹Cï¼Œç„¶åå°†å¯†æ–‡å‘é€ç»™Bobã€‚Bobåœ¨æ”¶åˆ°å¯†æ–‡æ¶ˆæ¯ä¹‹åï¼Œç”¨å¯¹åº”å¯†é’¥Sè§£å¯†å¾—åˆ°é€šçŸ¥å†…å®¹Cã€‚ è¿™æ ·å°±çŸ¥é“è¡ŒåŠ¨å†…å®¹äº†ã€‚ä½†æ˜¯ï¼Œè¿™æ ·åšä¼šæœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ
å½“ç„¶æœ‰ã€‚å‡è®¾Aliceå®ƒä»¬æŒ‰ç…§è®¡åˆ’è¡ŒåŠ¨äº†ï¼Œé‚£ä»¥åä½†å‡¡Aliceå’ŒBobä¹‹é—´çš„é€šçŸ¥å†…å®¹æ˜¯è€å¤§å†³å®šä»Šæ™š11ç‚¹åŠ¨æ‰‹ï¼Œæ•Œæ–¹å°±å¾—ä¼šçŸ¥æ™“ï¼Œå› ä¸ºå¯†æ–‡æ˜¯ä¿æŒä¸å˜çš„ã€‚é‚£æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ
Aliceé¦–å…ˆä¸´æ—¶ç”Ÿæˆä¸€ä¸ªå¯¹ç§°å¯†é’¥Rï¼Œå¹¶ç”¨è¯¥å¯¹ç§°å¯†é’¥RåŠ å¯†é€šçŸ¥å†…å®¹Cï¼Œç„¶åå°†å¯†æ–‡å‘é€ç»™Bobã€‚ä½†é—®é¢˜æ˜¯ï¼ŒBobåœ¨æ”¶åˆ°å¯†æ–‡æ¶ˆæ¯ä¹‹åï¼Œå®ƒè¯¥å¦‚ä½•è§£å¯†å‘¢ï¼ŸBobçš„æ‰‹ä¸Šåªæœ‰ä¹‹å‰çº¦å®šçš„å¯¹ç§°å¯†é’¥Sï¼Œå¹¶æ²¡æœ‰Aliceä¸´æ—¶ç”Ÿæˆçš„å¯¹ç§°å¯†é’¥Rï¼Œå› æ­¤Bobæ— æ³•è§£å¯†ã€‚
èªæ˜çš„Aliceä¹Ÿæƒ³åˆ°äº†è¿™ä¸ªé—®é¢˜ã€‚å› æ­¤ï¼ŒAliceä½¿ç”¨å¯¹ç§°å¯†é’¥Så¯¹å¯†é’¥Råšäº†ä¸ªåŠ å¯†ï¼Œå¹¶å°†åŠ å¯†çš„ç»“æœåŒæ—¶å‘ç»™äº†Bobã€‚è¿™æ ·ï¼ŒBobåœ¨æ”¶åˆ°æ¶ˆæ¯ä¹‹åï¼Œé¦–å…ˆç”¨å¯¹ç§°å¯†é’¥Sè§£å¯†å‡ºä¸´æ—¶çš„å¯¹ç§°å¯†é’¥Rï¼Œç„¶åç”¨Rè§£å¯†å‡ºé€šçŸ¥å†…å®¹Cã€‚
å¦‚æœAliceå’ŒBobå†æ¬¡ä¼ è¾“ç›¸åŒçš„å†…å®¹Cï¼Œå› ä¸ºä½¿ç”¨çš„ä¸´æ—¶å¯¹ç§°å¯†é’¥Ræ˜¯ä¸åŒçš„ï¼Œå› æ­¤åŠ å¯†åçš„Cä¹Ÿæ˜¯ä¸åŒçš„ï¼Œå³ä¾¿åŠ å¯†å‰çš„æ˜æ–‡Cè¿˜æ˜¯åŒä¸€ä¸ªã€‚
åœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œå¯¹ç§°å¯†é’¥Rå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªä¼šè¯å¯†é’¥ï¼Œå¯¹ç§°å¯†é’¥Så°±æ˜¯ä¸€ä¸ªä¸»å¯†é’¥ã€‚å› ä¸ºå¯¹ç§°å¯†é’¥Ræ¯æ¬¡éƒ½ä¸ä¸€æ ·ï¼Œä½†æ˜¯å¯¹ç§°å¯†é’¥Sæ˜¯ä¸€ç›´è¢«é‡å¤ä½¿ç”¨çš„ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ä¿¡å°åŠ å¯†

]]></content>
      <categories>
        <category>engineering</category>
        <category>k8s</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>ssh</tag>
        <tag>https</tag>
        <tag>åŠ å¯†</tag>
        <tag>tls</tag>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoå¯ç”¨HTTPSåŠ å¯†è¿æ¥</title>
    <url>/dev-hexo-https/</url>
    <content><![CDATA[å‰è¨€è®¿é—®ä¸ªäººç½‘ç«™ï¼Œå¶å°”ä¼šè·³å‡ºå¹¿å‘Šï¼Œçœ‹æ¥ç½‘ç«™è¢«è¿è¥å•†åŠ«æŒäº†ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼ŒéƒåŒå­¦å†³å®šå¯¹ç½‘ç«™è¿›è¡ŒhttpsåŠ å¯†ã€‚æ—©åœ¨2015å¹´ï¼Œç¾å›½æ”¿åºœå°±è¦æ±‚æ‰€æœ‰è”é‚¦æ”¿åºœç½‘ç«™ä½¿ç”¨httpsåŠ å¯†è¿æ¥ï¼Œè¿™æ¬¡éƒåŒå­¦ä¹Ÿç®—æ˜¯èµ¶ä¸Šäº†å›½é™…æ½®æµçš„å°¾å·´ã€‚
HTTPS(SSL/TLS)åŠ å¯†åŸç†ï¼Œå‚è€ƒæ–‡æ¡£ã€Šæµ…è°ˆæ•°æ®åŠ å¯†ã€‹ã€‚


HTTPSé…ç½®æ–¹æ³•httpsæ˜¯åœ¨httpä¸‹åŠ å…¥sslå±‚ï¼Œé‚£ä¹ˆï¼Œæ€ä¹ˆåŠ å…¥å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œåœ¨nginxã€apacheç­‰webæœåŠ¡å™¨ä¸­åŠ å…¥sslå®‰å…¨è¯ä¹¦çš„é…ç½®å³å¯ã€‚
SSLè¯ä¹¦ç”³è¯·å¾ˆå¤šç½‘ç«™éƒ½æä¾›å…è´¹çš„sslè¯ä¹¦ï¼š

é˜¿é‡Œäº‘å…è´¹SSLè¯ä¹¦ï¼Œä¿æŠ¤ç±»å‹é€‰æ‹©1ä¸ªåŸŸåï¼Œé€‰æ‹©å“ç‰Œé€‰æ‹©Symantecï¼Œå³å¯çœ‹åˆ°å…è´¹å‹DV SSLã€‚
è…¾è®¯äº‘å…è´¹SSLè¯ä¹¦
ä¸ƒç‰›å…è´¹SSLè¯ä¹¦

æ¨èä½¿ç”¨è…¾è®¯äº‘ï¼Œæ³¨å†Œç™»å½•ï¼Œæ ¹æ®æç¤ºå¡«å†™ä¿¡æ¯ï¼Œä¸ä¹…å°±å¯ä»¥æ‹¿åˆ°è¯ä¹¦ã€‚
è§£å‹www.voidking.com.zipï¼Œå¯ä»¥å¾—åˆ°ä¸‹åˆ—æ–‡ä»¶ï¼š
www.voidking.comâ”‚  www.voidking.com.csrâ”‚â”œâ”€Apacheâ”‚      1_root_bundle.crtâ”‚      2_www.voidking.com.crtâ”‚      3_www.voidking.com.keyâ”‚â”œâ”€IISâ”‚      keystorePass.txtâ”‚      www.voidking.com.pfxâ”‚â”œâ”€Nginxâ”‚      1_www.voidking.com_bundle.crtâ”‚      2_www.voidking.com.keyâ”‚â””â”€Tomcat        keystorePass.txt        www.voidking.com.jks

æ€è·¯GitLabgithubå’Œcodingï¼Œéƒ½ä¸æ”¯æŒä¸Šä¼ sslè¯ä¹¦ã€‚ä½†æ˜¯ï¼Œgitlabæ”¯æŒå•Šï¼æœ€ç®€å•çš„æ€è·¯å°±æ˜¯ï¼ŒæŠŠç½‘ç«™è¿åˆ°gitlabä¸Šã€‚
æŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œå‚è€ƒã€Šåˆ©ç”¨gitlab pageså’Œhexoæ­å»ºä¸€ä¸ªä¸ªäººåšå®¢ã€‹å’Œã€Šé›¶æˆæœ¬æ‰“é€ å®‰å…¨åšå®¢çš„ç®€å•åŠæ³•ã€‹ã€‚
1ã€æ‰“å¼€gitlabçš„é¡¹ç›®ï¼ŒSettingsï¼ŒPagesï¼ŒNew Domainï¼Œå³å¯è¿›å…¥åŸŸåé…ç½®é¡µé¢ã€‚
2ã€Domainå¡«å…¥www.voidking.comï¼ŒCertificate (PEM)å¡«å…¥1_www.voidking.com_bundle.crtä¸­çš„å†…å®¹ï¼ŒKey (PEM)å¡«å…¥2_www.voidking.com.keyä¸­çš„å†…å®¹ã€‚
CloudflareCloudflareæ˜¯ä¸€å®¶CDNæä¾›å•†ï¼Œå®ƒæä¾›äº†å…è´¹çš„httpsæœåŠ¡ï¼ˆä½†ä¸æ˜¯åº”ç”¨SSLè¯ä¹¦ï¼‰ã€‚å®ç°æ¨¡å¼å°±æ˜¯ï¼Œç”¨æˆ·åˆ°CDNæœåŠ¡å™¨çš„è¿æ¥ä¸ºhttpsï¼Œè€ŒCDNæœåŠ¡å™¨åˆ°çœŸå®æœåŠ¡å™¨çš„è¿æ¥ä¸ºhttpã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨CDNæœåŠ¡å™¨é‚£é‡ŒåŠ ä¸Šåå‘ä»£ç†ã€‚æ²¡é”™ï¼Œåˆæ˜¯åå‘ä»£ç†ï¼Œåªä¸è¿‡è¿™æ¬¡çš„ä»£ç†æœåŠ¡å™¨å½’å±äºCloudflareï¼Œä¸æ˜¯æˆ‘ä»¬è‡ªå·±çš„ã€‚
è¿™ç§æ–¹å¼ï¼Œå¥½å¤„æ˜¯ä½ ä¸éœ€è¦æ‹¥æœ‰è‡ªå·±çš„å…¬ç½‘æœåŠ¡å™¨ï¼Œåå¤„æ˜¯ä½ å¿…é¡»æŠŠåŸŸåçš„dnsæœåŠ¡å™¨æ¢æˆcloudflareã€‚
å…·ä½“è®¾ç½®æ­¥éª¤å‚è€ƒã€Šè®©ä¸ªäººåŸŸåä¸‹GithubPageå®Œç¾æ”¯æŒhttpsã€‹ã€‚
Nginxåå‘ä»£ç†åå‘ä»£ç†æ˜¯æ™®éæ€è·¯ï¼Œæ— è®ºæˆ‘ä»¬çš„çœŸå®æœåŠ¡å™¨åœ¨githubã€codingè¿˜æ˜¯gitlabï¼Œéƒ½å¯ä»¥ä½¿ç”¨åå‘ä»£ç†çš„æ–¹å¼å®ŒæˆhttpsåŠ å¯†è¿æ¥ã€‚å‰ææ˜¯ä½ æœ‰ä¸€ä¸ªå…¬ç½‘æœåŠ¡å™¨ï¼Œä¸Šé¢å®‰è£…äº†nginxã€‚
ç”¨æˆ·è®¿é—®åŸŸåï¼›åŸŸåè§£æåˆ°å…¬ç½‘IPï¼Œè®¿é—®åˆ°nginxï¼›nginxåå‘ä»£ç†åˆ°codingç­‰çœŸå®æœåŠ¡å™¨ï¼Œé€šè¿‡httpæ–¹å¼æ‹¿åˆ°é¡µé¢ï¼›nginxæ‹¿åˆ°é¡µé¢åè¿›è¡ŒsslåŠ å¯†ï¼Œç„¶åè¿”å›ç»™ç”¨æˆ·åŠ å¯†åçš„é¡µé¢ã€‚
è¯¦ç»†æ­¥éª¤éƒåŒå­¦å†³å®šé€‰ç”¨æœ€é€šç”¨çš„æ–¹å¼ï¼Œé€šè¿‡nginxåå‘ä»£ç†æ¥å®ç°httpsè®¿é—®ï¼ˆå‡è®¾å·²ç»ç”³è¯·å¥½äº†sslè¯ä¹¦ï¼‰ã€‚
ä¿®æ”¹åŸŸåè§£æåŸæ¥çš„åŸŸåè§£æä½CNAMEè®°å½•ï¼ŒæŒ‡å‘pages.coding.meï¼Œç°åœ¨ä¿®æ”¹ä¸ºAè®°å½•ï¼ŒæŒ‡å‘å…¬ç½‘IPã€‚
ä¸Šä¼ è¯ä¹¦1ã€æœåŠ¡å™¨ä¸Šï¼Œåˆ›å»ºç›®å½•sslmkdir /etc/nginx/ssl
2ã€ä½¿ç”¨xftpä¸Šä¼  www.voidking.com/Nginx æ–‡ä»¶å¤¹ä¸­çš„ 1_www.voidking.com_bundle.crt å’Œ 2_www.voidking.com.key åˆ°sslç›®å½•ã€‚
é…ç½®Nginxé…ç½®nginxï¼Œå‚è€ƒã€ŠNginxå¼€å¯SSLä¸é‡å®šå‘ä¼˜åŒ–ã€‹
1ã€coding pagesé…ç½®ä¸å˜ï¼Œä¾ç„¶ç»‘å®š www.voidking.com åŸŸåã€‚
2ã€/etc/nginx/conf.dä¸­æ–°å»ºé…ç½®æ–‡ä»¶ www.voidking.com.conf ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
server &#123;    listen 80;    server_name www.voidking.com;    charset utf-8;    location / &#123;        proxy_set_header   Host             $host;        proxy_set_header   X-Real-IP        $remote_addr;        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;        proxy_pass http://voidking.coding.me;    &#125;&#125;server &#123;    # SSL configuration    listen 443 ssl;    server_name www.voidking.com;    charset utf-8;    ssl_certificate /etc/nginx/ssl/1_www.voidking.com_bundle.crt;     ssl_certificate_key  /etc/nginx/ssl/2_www.voidking.com.key;     ssl_session_timeout  5m;      ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;    ssl_ciphers  HIGH:!ADH:!EXPORT56:RC4+RSA:+MEDIUM;    location / &#123;        proxy_set_header   Host             $host;        proxy_set_header   X-Real-IP        $remote_addr;        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;        proxy_pass http://voidking.coding.me;    &#125;&#125;

3ã€é‡å¯nginxsystemctl restart nginx
4ã€æµ‹è¯•è®¿é—®è®¿é—® https://www.voidking.com ï¼Œå·²ç»å¯ä»¥æ­£å¸¸è®¿é—®ç½‘å€ï¼Œåªä¸è¿‡æœ‰äº›è„šæœ¬æ˜¯é€šè¿‡httpæ–¹å¼å¼•ç”¨çš„ï¼Œä¼šæç¤ºä¸å®‰å…¨ï¼Œç­‰ä¸‹æˆ‘ä»¬ä¿®æ”¹äº†hexoä¸»é¢˜å°±å¥½äº†ã€‚
ä¿®æ”¹Hexoä¸»é¢˜1ã€è®¿é—® https://www.voidking.com ï¼ŒF12ï¼Œå¯ç”¨è°ƒè¯•æ¨¡å¼ï¼ŒæŸ¥çœ‹å“ªäº›æ–‡ä»¶æ˜¯ä¸å®‰å…¨çš„ã€‚
2ã€ä¿®æ”¹hexoä¸»é¢˜ï¼ŒæŠŠé‚£äº›ä¸å®‰å…¨çš„æ–‡ä»¶å…¨éƒ¨ä¿®æ”¹ä¸ºhttpså¼•ç”¨ã€‚
jquery1.9.0åœ¨hexo/themes/yilia/layout/_partialä¸­æ‰¾åˆ°head.ejsï¼Œä¿®æ”¹jqueryå¼•ç”¨åœ°å€ä¸ºï¼š
&lt;script src=&quot;https://libs.baidu.com/jquery/1.9.0/jquery.js&quot;&gt;&lt;/script&gt;

Mathjaxã€ŠHexoä¸­ä½¿ç”¨Mathjaxçš„å†²çªé—®é¢˜ã€‹ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬å¼•ç”¨mathjaxçš„æ–¹å¼ä¹Ÿæ˜¯httpï¼Œå¼•ç”¨å•ä½æ˜¯æ•´ä¸ªä¸»é¢˜ï¼ˆæ‰€æœ‰çš„é¡µé¢ï¼‰ã€‚ä¸‹é¢æˆ‘ä»¬æŠŠå¼•ç”¨æ–¹å¼ä¿®æ”¹ä¸ºhttpsï¼Œå¼•ç”¨å•ä½æ”¹ä¸ºå•ä¸ªé¡µé¢ã€‚
1ã€æŠŠhexo/themes/yilia/layout/_partialä¸­çš„mathjax.ejsç§»åŠ¨åˆ°hexo/themes/yilia/layout/_partial/postã€‚
2ã€ä¿®æ”¹mathjax.ejsä¸­çš„jså¼•ç”¨ï¼š
&lt;script type=&quot;text/javascript&quot; src=&quot;https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot;&gt;

3ã€åˆ é™¤after-footer.ejsä¸­å…³äºmathjaxçš„å¼•ç”¨ã€‚
4ã€ä¿®æ”¹hexo/themes/yilia/layout/_partial/article.ejsï¼Œåœ¨æœ€åæ·»åŠ ï¼š
&lt;% if (!index &amp;&amp; post.mathjax)&#123; %&gt;&lt;%- partial(&#x27;post/mathjax&#x27;) %&gt;&lt;% &#125; %&gt;

5ã€ä¿®æ”¹markdownæ–‡æ¡£ã€‚ä½¿ç”¨mathjaxçš„æ–‡æ¡£ï¼Œåœ¨å¤´éƒ¨åŠ ä¸Šï¼š
mathjax: true

ç•…è¨€åœ¨hexo/themes/yilia/layout/_partial/postä¸­æ‰¾åˆ°changyan.ejsï¼Œå…¶ä¸­çš„ä¸¤ä¸ªjså¼•ç”¨ï¼Œæ”¹æˆhttpsã€‚
jiathisjiathiså’Œbaidushareéƒ½ä¸æä¾›httpsæ–¹å¼çš„å¼•ç”¨ï¼Œæ‰€ä»¥åªèƒ½å°†å…¶æœ¬åœ°åŒ–ï¼ˆä¸‹è½½æ‰€æœ‰æºç å¹¶ä¿®æ”¹æºç ï¼‰ï¼Œæˆ–è€…åˆ©ç”¨åå‘ä»£ç†ã€‚å®åœ¨è´¹åŠ²ï¼ŒéƒåŒå­¦å†³å®šæ¢æˆovertrueåŒå­¦çš„share.jsã€‚
åŸpost/share.ejsä¸ºï¼š
&lt;div class=&quot;share&quot;&gt;    &lt;!-- JiaThis Button BEGIN --&gt;    &lt;div class=&quot;jiathis_style&quot;&gt;        &lt;span class=&quot;jiathis_txt&quot;&gt;åˆ†äº«åˆ°ï¼š&lt;/span&gt;        &lt;a class=&quot;jiathis_button_tsina&quot;&gt;&lt;/a&gt;        &lt;a class=&quot;jiathis_button_cqq&quot;&gt;&lt;/a&gt;        &lt;a class=&quot;jiathis_button_douban&quot;&gt;&lt;/a&gt;        &lt;a class=&quot;jiathis_button_weixin&quot;&gt;&lt;/a&gt;        &lt;a class=&quot;jiathis_button_tumblr&quot;&gt;&lt;/a&gt;        &lt;a href=&quot;http://www.jiathis.com/share&quot; class=&quot;jiathis jiathis_txt jtico jtico_jiathis&quot; target=&quot;_blank&quot;&gt;&lt;/a&gt;    &lt;/div&gt;    &lt;script type=&quot;text/javascript&quot; src=&quot;https://v3.jiathis.com/code/jia.js?uid=1405949716054953&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;    &lt;!-- JiaThis Button END --&gt;&lt;/div&gt;

ä¿®æ”¹ä¸ºï¼š
&lt;div class=&quot;share&quot;&gt;    &lt;div class=&quot;social-share&quot;&gt;&lt;/div&gt;    &lt;!--  css &amp; js --&gt;    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css&quot;&gt;    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js&quot;&gt;&lt;/script&gt;&lt;/div&gt;


æºç åˆ†äº«ä¸ªäººyiliaåœ°å€ï¼šhttps://github.com/voidking/hexo-theme-yilia
é…ç½®Nginxè¿›é˜¶è‡³æ­¤ï¼Œå·²ç»å¯ä»¥é€šè¿‡httpå’Œhttpsä¸¤ç§æ–¹å¼è®¿é—® www.voidking.com äº†ã€‚æ—¢ç„¶å·²ç»æœ‰äº†httpsï¼Œhttpä¸å¦¨é‡å®šå‘åˆ°httpsã€‚
ä¿®æ”¹ www.voidking.com.conf ä¸ºï¼š
server &#123;    listen 80;    listen 443 ssl;    server_name www.voidking.com;    charset utf-8;    ssl_certificate /etc/nginx/ssl/1_www.voidking.com_bundle.crt;    ssl_certificate_key  /etc/nginx/ssl/2_www.voidking.com.key;    ssl_session_timeout  5m;    ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;    ssl_ciphers  HIGH:!ADH:!EXPORT56:RC4+RSA:+MEDIUM;    ssl_prefer_server_ciphers on;    if ($ssl_protocol = &quot;&quot;) &#123;        return 301 https://$host$request_uri;    &#125;    location / &#123;        proxy_set_header   Host             $host;        proxy_set_header   X-Real-IP        $remote_addr;        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;        proxy_pass http://voidking.coding.me;    &#125;&#125;

SSLçš„é…ç½®ä¸è¦åŠ  ssl on ï¼Œå¦åˆ™å¯åŠ¨æ—¶ä¼šå­˜åœ¨ä¸€ä¸ªè­¦å‘Šï¼š
[warn] 1#1: the &quot;ssl&quot; directive is deprecated, use the &quot;listen ... ssl&quot; directive instead in /etc/nginx/conf.d/www.voidking.com.conf:11

é‡å¯nginxï¼Œè®¿é—® http://www.voidking.com ï¼Œä¼šè‡ªåŠ¨è·³è½¬åˆ° https://www.voidking.com ï¼Œè¯´æ˜é…ç½®æˆåŠŸã€‚
åè®°è¿™é‡Œï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰é…ç½® voidking.com å’Œ blog.voidking.com ï¼Œå¯ä»¥å‚ç…§ä¸Šé¢çš„æ­¥éª¤è¿›è¡Œé…ç½®ã€‚æ›´åŠ ç®€å•çš„é…ç½®æ–¹å¼ï¼Œæ˜¯åœ¨dnspodä¸Šé…ç½®æ˜¾æ€§urlï¼Œç›´æ¥è·³è½¬åˆ° http://www.voidking.com ã€‚
æœ¬æ–‡ä¸»è¦ç ”ç©¶Hexoå¯ç”¨httpsåŠ å¯†è¿æ¥ã€‚å…¶å®å¹³æ—¶å»ºç«™çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥ç»™ç½‘ç«™å¯ç”¨httpsåŠ å¯†è¿æ¥ï¼ŒåŸç†ç±»ä¼¼ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>nginx</tag>
        <tag>https</tag>
        <tag>åŠ å¯†</tag>
        <tag>tls</tag>
        <tag>ssl</tag>
        <tag>mathjax</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOSå®‰è£…é…ç½®Jupyter</title>
    <url>/dev-centos-jupyter/</url>
    <content><![CDATA[å‰è¨€å¦‚æœåœ¨æœåŠ¡å™¨ä¸Šå®‰è£…ä¸€ä¸ªjupyterï¼Œé‚£ä¹ˆå°±å¯ä»¥éšæ—¶éšåœ°ä½¿ç”¨jupyterï¼Œå¾ˆæ–¹ä¾¿ã€‚
æœ¬æ–‡ä¸»è¦è®°å½•centos7ä¸Šjupyterçš„å®‰è£…æ–¹æ³•ï¼Œè®¾ç½®å¯†ç çš„æ–¹æ³•ï¼Œæ·»åŠ å®ˆæŠ¤è¿›ç¨‹çš„æ–¹æ³•ï¼Œé¡ºä¾¿ç»™å®ƒè®¾ç½®ä¸ªåŸŸåã€‚


å®‰è£…jupyterå‚è€ƒã€ŠJupyter notebookã€‹æˆ–è€…å®˜ç½‘æ–‡æ¡£ï¼Œå®Œæˆjupyterçš„å®‰è£…ã€‚
1ã€å‡çº§pippip install --upgrade pip
2ã€å®‰è£…jupyterpip install jupyter
å¦‚æœå®‰è£…æŠ¥é”™ï¼š
_scandir.c:14:20: fatal error: Python.h: No such file or directory #include &lt;Python.h&gt;                    ^compilation terminated.error: command &#x27;gcc&#x27; failed with exit status 1

é‚£ä¹ˆéœ€è¦å…ˆå®‰è£…python-develyum install python-devel
3ã€å¯åŠ¨jupyter notebook
å¦‚æœæŠ¥é”™ï¼šsocket.error: [Errno 99] Cannot assign requested address
é‚£ä¹ˆåœ¨å¯åŠ¨æ—¶åŠ ä¸Šå‚æ•°ï¼šjupyter notebook --ip 0.0.0.0 --allow-root
4ã€å¼€æ”¾ç«¯å£firewall-cmd --zone=public --add-port=8888/tcp --permanentfirewall-cmd --reload
5ã€æµ‹è¯•è®¿é—®è®¿é—®åœ°å€ï¼šhttp://ip:8888è¿›å…¥åˆ°jupyterç™»å½•é¡µé¢ï¼Œå¦‚ä¸‹å›¾ï¼š
è®¾ç½®å¯†ç åœ¨å®‰è£…å®Œæˆjupyteråï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œç™»å½•é¡µé¢ç»™å‡ºäº†ä¸‰ç§ç™»å½•æ–¹å¼ã€‚æ–¹å¼ä¸€ï¼šå¤åˆ¶å¯åŠ¨æ—¶çš„tokenï¼Œç²˜è´´åˆ°é¡µé¢ä¸­ï¼Œç›´æ¥ç™»å½•ã€‚æ–¹å¼äºŒï¼šå‚ç…§the documentation on how to enable a passwordè¿›è¡Œé…ç½®ã€‚æ–¹å¼ä¸‰ï¼šå¤åˆ¶å¯åŠ¨æ—¶çš„tokenï¼Œç²˜è´´åˆ°é¡µé¢ä¸­ï¼ŒåŒæ—¶è¾“å…¥æ–°å¯†ç ï¼Œä¿®æ”¹å¯†ç å¹¶ç™»å½•ã€‚
è¿™é‡Œï¼Œæˆ‘ä»¬é€‰æ‹©æ–¹å¼äºŒï¼Œé¦–å…ˆå…³é—­jupyterï¼Œç„¶åå…·ä½“é…ç½®æ­¥éª¤å¦‚ä¸‹ï¼š
1ã€ç”Ÿæˆjupyteré…ç½®æ–‡ä»¶jupyter notebook --generate-configè¯¥å‘½ä»¤ä¼šç”Ÿæˆæ–‡ä»¶/root/.jupyter/jupyter_notebook_config.py
2ã€è®¾ç½®å¯†ç jupyter notebook passwordæç¤ºä¸¤æ¬¡è¾“å…¥å¯†ç ï¼Œç„¶åå¯†ç è¢«hashåŒ–ä¹‹åä¿å­˜åˆ°jupyter_notebook_config.jsonä¸­ã€‚
3ã€æµ‹è¯•è®¿é—®å†æ¬¡å¯åŠ¨jupyterï¼Œä½¿ç”¨å¯†ç è®¿é—®æˆåŠŸã€‚
4ã€ç¦æ­¢å¯åŠ¨æµè§ˆå™¨æ­¤æ—¶ï¼Œå¯åŠ¨jupyteræ—¶ä¼šé»˜è®¤å¯åŠ¨æœ¬åœ°æµè§ˆå™¨ï¼Œè¿™ä¸ªéœ€è¦å…³é—­ã€‚vim /root/.jupyter/jupyter_notebook_config.pyï¼Œä¿®æ”¹ä¸€è¡Œï¼š
c.NotebookApp.open_browser = False

5ã€æŒ‡å®šæ ¹ç›®å½•åœ¨å“ªé‡Œæ‰§è¡Œjupyter notebookï¼Œå“ªé‡Œå°±æ˜¯æ ¹ç›®å½•ï¼Œè¿™é‡Œï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‡å®šæ ¹ç›®å½•ã€‚ï¼ˆ1ï¼‰åˆ›å»ºæ ¹ç›®å½•mkdir /opt/notebook
ï¼ˆ2ï¼‰vim /root/.jupyter/jupyter_notebook_config.pyï¼Œä¿®æ”¹ä¸€è¡Œï¼š
c.NotebookApp.notebook_dir = u&#x27;/opt/notebook&#x27;

é…ç½®ä¿æ´»å‚è€ƒã€ŠCentOSå®‰è£…é…ç½®Supervisorã€‹ï¼Œå®‰è£…é…ç½®å¥½supervisorã€‚
1ã€æ–°å»ºé…ç½®æ–‡ä»¶jupyter.confvim /etc/supervisor/jupyter.confå†™å…¥å†…å®¹å¦‚ä¸‹ï¼š
[program:jupyter]command=/usr/bin/jupyter notebook --ip 0.0.0.0 --allow-rootuser=rootautostart=trueautorestart=truestdout_logfile=/var/log/supervisor/%(program_name)s.logstderr_logfile=/var/log/supervisor/%(program_name)s.log

2ã€é‡å¯supervisorsystemctl restart supervisord
è®¾ç½®åŸŸåå‡è®¾nginxçš„å®‰è£…ç›®å½•ä¸º/usr/local/nginx/ã€‚1ã€åˆ›å»ºvhostç›®å½•mkdir /usr/local/nginx/conf/vhost
2ã€ä¿®æ”¹nginx.confï¼Œæ·»åŠ å­é…ç½®ç›®å½•
include /usr/local/nginx/conf/vhost/*.conf;

3ã€åœ¨vhostç›®å½•ä¸­æ–°å»ºjupyter.voidking.com.confæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š
server &#123;    listen 80;    server_name jupyter.voidking.com;    charset utf-8;    location ~* /(api/kernels/[^/]+/(channels|iopub|shell|stdin)|terminals/websocket)/? &#123;        proxy_pass http://127.0.0.1:8888;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header Host $host;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;        # WebSocket support        proxy_http_version 1.1;        proxy_set_header Upgrade $http_upgrade;        proxy_set_header Connection &quot;upgrade&quot;;    &#125;&#125;

4ã€é‡å¯nginx/usr/local/nginx/sbin/nginx -s reload
5ã€æœ¬æœºæµ‹è¯•ï¼ˆ1ï¼‰ä¿®æ”¹hostsæ–‡ä»¶ï¼Œæ·»åŠ 
127.0.0.1 jupyter.notebook.com
ç„¶åç”¨curlå‘½ä»¤æµ‹è¯•ï¼šcurl -L jupyter.notebook.com
6ã€è®¾ç½®åŸŸåè§£æåœ¨dnspodä¸Šï¼Œè®¾ç½®Aè®°å½•ï¼Œä¸»æœºè®°å½•å¡«å…¥jupyterï¼Œè®°å½•å€¼å¡«å…¥æœåŠ¡å™¨IPï¼Œç¨ç­‰å‡ åˆ†é’Ÿã€‚ç†è®ºä¸Šï¼Œæ­¤æ—¶å³å¯ä½¿ç”¨åŸŸåè®¿é—®è‡ªå·±çš„jupyterã€‚
ç„¶è€Œï¼Œé‡åˆ°äº†å‘ï¼Œç¥å‘ã€‚ã€‚ã€‚æµè§ˆå™¨è®¿é—® http://jupyter.voidking.com ï¼Œçœ‹åˆ°çš„æ˜¯nginxçš„æ¬¢è¿é¡µé¢ã€‚excuse me? å†æ¬¡ä½¿ç”¨curlå‘½ä»¤æµ‹è¯•ï¼ŒåŸæ¥ï¼Œæ‹¿åˆ°çš„ç¡®å®æ˜¯nginxçš„é¡µé¢ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Ÿè¿™æ¬¡è§£æä¸ºä»€ä¹ˆæ²¡æœ‰ç”Ÿæ•ˆï¼Ÿ
ä½¿ç”¨systemctlé‡å¯nginxï¼Œæ¬¢è¿é¡µé¢ï¼›æŒ‡å®šnginxé…ç½®æ–‡ä»¶é‡å¯nginxï¼Œæ¬¢è¿é¡µé¢ï¼›ä¿®æ”¹jupyter.voidking.com.confï¼Œåå‘ä»£ç†åˆ°8080çš„tomcatï¼Œæ¬¢è¿é¡µé¢ï¼›åˆ é™¤jupyter.voidking.com.confæ–‡ä»¶ï¼ŒæŠŠå†…å®¹å†™å…¥nginx.confï¼Œæ¬¢è¿é¡µé¢ï¼›æŠŠæ–°æ·»åŠ å†…å®¹æ”¾åœ¨nginx.confçš„ä¸Šéƒ¨ï¼Œä½œä¸ºç¬¬ä¸€ä¸ªserveré…ç½®ï¼Œæ¬¢è¿é¡µé¢ï¼›æ¢å¦å¤–ä¸€ä¸ªåŸŸåï¼ˆjupyter.imsnail.comï¼‰è®¾ç½®è§£æï¼Œæ¬¢è¿é¡µé¢ã€‚ã€‚ã€‚
è‡³æ­¤æˆ‘ä¸¥é‡æ€€ç–‘ï¼Œnginxæœ‰æ¯›ç—…ï¼
å¸è½½nginxä¸Šæ¬¡å®‰è£…nginxæ˜¯ç¼–è¯‘å®‰è£…ï¼ŒæŒ‰ç…§ä¸‹åˆ—æ­¥éª¤å¸è½½ã€‚
1ã€åˆ é™¤å®‰è£…ç›®å½•
rm -rf /usr/local/nginxrm -rf /var/log/nginxrm -rf /var/temp/nginxrm -rf /var/temp/run/nginx

2ã€åˆ é™¤å¼€æœºè‡ªå¯åŠ¨æ–‡ä»¶find / -name &quot;nginx*&quot;
rm -rf /usr/lib/systemd/system/nginx.service
systemctl daemon-reload
é‡æ–°å®‰è£…nginxæ¥ä¸‹æ¥ï¼Œå‚è€ƒnginxå®˜æ–¹æ–‡æ¡£ï¼Œå®‰è£…nginxã€‚
1ã€åˆ›å»º/etc/yum.repos.d/nginx.repoï¼Œå†…å®¹å¦‚ä¸‹ï¼š
[nginx]name=nginx repobaseurl=http://nginx.org/packages/centos/7/$basearch/gpgcheck=0enabled=1

2ã€å®‰è£…nginxyum install nginx
3ã€è®¾ç½®å¼€æœºå¯åŠ¨systemctl enable nginx
4ã€æ€æ­»nginxè¿›ç¨‹ï¼Œé‡æ–°å¯åŠ¨ps aux | grep nginx
kill -9 [nginx_id]
systemctl start nginx
5ã€æŸ¥çœ‹è¿è¡ŒçŠ¶æ€systemctl status nginx -lå‘ç°é…ç½®æ–‡ä»¶ä½ç½®ä¸ºï¼š/etc/nginx/nginx.conf
6ã€åœ¨/etc/nginx/conf.d/ä¸­åˆ›å»ºjupyter.voidking.com.confï¼Œå†…å®¹åŒä¸Šã€‚
7ã€é‡å¯nginxsystemctl restart nginx
æ¥ä¸‹æ¥ï¼Œè§è¯å¥‡è¿¹çš„æ—¶åˆ»ï¼å†æ¬¡è®¿é—® http://jupyter.voidking.com ï¼Œä¾ç„¶æ˜¯æ¬¢è¿é¡µé¢ã€‚ã€‚ã€‚
æŒ£æ‰å¤§å“¥ï¼Œå¥½æ­¹ç»™ä¸ªæŠ¥é”™ä¹Ÿè¡Œå•Šï¼æ²¡æœ‰æŠ¥é”™ï¼Œè®¿é—®å°±æ¬¢è¿ï¼Œè¿™æ˜¯è¦é—¹å“ªæ ·ï¼å†³å®šå†æ¬¡æ¢æˆåå‘ä»£ç†8080ç«¯å£çš„tomcatï¼Œæµ‹è¯•ä¸€ä¸‹æ˜¯ä¸æ˜¯ä»ç„¶å‡ºç°æ¬¢è¿é¡µé¢ã€‚
1ã€å…ˆåˆ›å»º/var/data/client_body_tempå’Œ/var/data/proxy_tempä¸¤ä¸ªç›®å½•mkdir -p /var/data/client_body_tempmkdir -p /var/data/proxy_temp
2ã€ç„¶åä¿®æ”¹jupyter.voidking.com.confæ–‡ä»¶ä¸ºï¼š
server &#123;    listen 80;    server_name jupyter.voidking.com;    charset utf-8;    location /&#123;        proxy_set_header   Host             $host;        proxy_set_header   X-Real-IP        $remote_addr;        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;        client_max_body_size       1024m;        client_body_buffer_size    128k;        client_body_temp_path      /var/data/client_body_temp;        proxy_connect_timeout      90;        proxy_send_timeout         90;        proxy_read_timeout         90;        proxy_buffer_size          4k;        proxy_buffers              4 32k;        proxy_busy_buffers_size    64k;        proxy_temp_file_write_size 64k;        proxy_temp_path            /var/data/proxy_temp;        proxy_pass http://127.0.0.1:8080;    &#125;&#125;

3ã€é‡å¯nginxsystemctl restart nginx
4ã€æµ‹è¯•è®¿é—®è®¿é—® http://jupyter.voidking.com/ ï¼ŒæˆåŠŸè®¿é—®åˆ°tomcatï¼çœ‹æ¥ä¸Šä¸€ä¸ªnginxç¡®å®æœ‰é—®é¢˜ï¼Œå› ä¸ºé‡è£…nginxå‰ï¼ŒåŒæ ·çš„é…ç½®ï¼Œä¸Šä¸€ä¸ªnginxç»™æˆ‘è¿”å›çš„æ˜¯æ¬¢è¿ç•Œé¢ï¼
5ã€jupyter.voidking.com.confä¿®æ”¹æˆï¼š
server &#123;    listen 80;    server_name jupyter.voidking.com;    charset utf-8;    location /&#123;        proxy_set_header   Host             $host;        proxy_set_header   X-Real-IP        $remote_addr;        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;        client_max_body_size       1024m;        client_body_buffer_size    128k;        client_body_temp_path      /var/data/client_body_temp;        proxy_connect_timeout      90;        proxy_send_timeout         90;        proxy_read_timeout         90;        proxy_buffer_size          4k;        proxy_buffers              4 32k;        proxy_busy_buffers_size    64k;        proxy_temp_file_write_size 64k;        proxy_temp_path            /var/data/proxy_temp;        proxy_pass http://127.0.0.1:8888;    &#125;&#125;
é‡å¯nginxï¼Œæµ‹è¯•è®¿é—®ï¼ŒæˆåŠŸï¼ä½†æ˜¯ï¼Œä¸Šé¢çš„é…ç½®å¯ä»¥è®¿é—®jupyteré¡µé¢ï¼Œå´æ— æ³•è¿æ¥kernelï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•æ‰§è¡Œpythonä»£ç ã€‚
6ã€jupyter.voidking.com.confä¿®æ”¹ä¸ºï¼š
server &#123;    server_name jupyter.voidking.com;     listen 80;    location / &#123;        proxy_pass http://127.0.0.1:8888/;         proxy_set_header X-Real-IP $remote_addr;        proxy_set_header Host $host;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;        proxy_http_version 1.1;        proxy_set_header Upgrade $http_upgrade;        proxy_set_header Connection &quot;upgrade&quot;;        proxy_redirect off;    &#125;&#125;

é‡å¯nginxï¼Œæµ‹è¯•è®¿é—®ï¼ŒæˆåŠŸï¼›æ‰§è¡Œä»£ç ï¼ŒæˆåŠŸã€‚
åè®°ç»•äº†å¥½å¤§ä¸€ä¸ªåœˆã€‚
é¦–å…ˆæ˜¯jupyter.voidking.com.confçš„é…ç½®æ–‡ä»¶å†™é”™äº†ï¼Œæˆ‘ä¹Ÿè®¤ä¸ºæ˜¯é…ç½®æ–‡ä»¶å†™é”™äº†ï¼Œäºæ˜¯å„ç§ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå¯æ— è®ºæˆ‘æ€æ ·ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œnginxåªè¿”å›ä¸€ä¸ªæ¬¢è¿é¡µé¢ã€‚
è¿™å°±è¯¯å¯¼æˆ‘è®¤ä¸ºnginxå‡ºäº†é—®é¢˜ï¼Œäºæ˜¯å¼€å§‹äº†é’ˆå¯¹nginxçš„å„ç§æµ‹è¯•ã€‚ä¿®æ”¹é…ç½®ä¹Ÿå¥½ï¼Œé‡å¯nginxä¹Ÿå¥½ï¼Œnginxåªè¿”å›ä¸€ä¸ªæ¬¢è¿é¡µé¢ï¼Œäºæ˜¯æˆ‘è®¤å®šnginxé™¤äº†é—®é¢˜ã€‚
é‡è£…nginxåï¼Œä¿æŒæœ€å¼€å§‹çš„jupyter.voidking.com.confé…ç½®ï¼Œä¾ç„¶è¿”å›æ¬¢è¿é¡µé¢ï¼Œä½†æ˜¯ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ­£å¸¸è®¿é—®åˆ°tomcatï¼Œè¿™å°±è¯´æ˜é…ç½®æ–‡ä»¶å†™é”™äº†ã€‚
ç»¼ä¸Šï¼Œæˆ‘è®¤ä¸ºè¿™ä¸ªé”…æ˜¯é…ç½®æ–‡ä»¶çš„ã€‚ä¹‹æ‰€ä»¥æœ€å¼€å§‹ä¿®æ”¹é…ç½®æ–‡ä»¶nginxæ¯«æ— ååº”ï¼Œå­œå­œä¸å€¦åœ°è¿”å›æ¬¢è¿é¡µé¢ï¼Œè¦ä¹ˆæ˜¯å­˜åœ¨åƒµå°¸è¿›ç¨‹ï¼Œè¦ä¹ˆæ˜¯æµè§ˆå™¨å­˜åœ¨ç¼“å­˜ï¼Œå¹²æ‰°äº†æµ‹è¯•ï¼Œå› ä¸ºnginxåçš„å¯èƒ½æ€§å¤ªä½ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>nginx</tag>
        <tag>centos</tag>
        <tag>jupyter</tag>
      </tags>
  </entry>
  <entry>
    <title>Jupyterè°ƒè¯•</title>
    <url>/dev-jupyter-debug/</url>
    <content><![CDATA[å‰è¨€é™¤äº†PyCharmï¼Œå¦ä¸€ä¸ªå¸¸ç”¨çš„ç¼–è¾‘å™¨å°±æ˜¯Jupyteräº†ã€‚æœ¬æ–‡ç ”ç©¶è®°å½•ä¸€ä¸‹Jupyterçš„è°ƒè¯•æ–¹æ³•ã€‚


ä½¿ç”¨1ã€åœ¨jupyterä¸­æ–°å»ºæ–‡ä»¶ï¼Œè¿è¡Œå¦‚ä¸‹ä»£ç ï¼š
def func1(a,b):    return a/bdef func2(x):    a=x    b=x-1    return func1(a,b)func2(1)
å‡ºç°æŠ¥é”™ï¼š
2ã€å‡ºé”™åï¼Œè¾“å…¥%debugï¼Œè¿›å…¥è°ƒè¯•æ¨¡å¼ã€‚è°ƒè¯•æ¨¡å¼ä¼šè¿›å…¥ç›´æ¥å‡ºé”™å‡½æ•°func1ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è°ƒè¯•æ¨¡å¼è‡ªå¸¦çš„å¯¹è¯æ¡†ä¸­è¾“å…¥å˜é‡åæ¥æŸ¥çœ‹å‡½æ•°ä¸­çš„å˜é‡æƒ…å†µï¼Œè¾“å…¥â€œquitâ€åˆ™é€€å‡ºè¯¥æ¨¡å¼ã€‚
åŒæ—¶ï¼Œåœ¨è°ƒè¯•æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è¾“å…¥â€œupâ€æ¥å¯¹å¤–å±‚å‡½æ•°è¿›è¡Œè°ƒè¯•ï¼ŒæŸ¥çœ‹å…¶ä¸­çš„å˜é‡æƒ…å†µã€‚åŒæ ·çš„ï¼Œä¹Ÿå¯ä»¥é€šè¿‡â€œdownâ€è¿›å…¥å†…å±‚å‡½æ•°ã€‚
3ã€åœ¨notebookeä¸­æ‰§è¡Œ %pdb on å¯ä»¥è®¾ç½®ä¸ºå½“å¼‚å¸¸å‘ç”Ÿæ—¶è‡ªåŠ¨è¿›å…¥è°ƒè¯•æ¨¡å¼ï¼Œåœ¨æŸäº›ç‰¹æ®Šçš„æƒ…å†µä¸‹ï¼Œè¿™ä¹ˆåšå¯èƒ½ä¼šæ›´ä¸ºæ–¹ä¾¿ï¼š
def func1(a,b):    return a/bdef func2(x):    a=x    b=x-1    return func1(a,b)%pdb onfunc2(1)


ä¹¦ç­¾Python Jupyter Notebook ä¸­çš„é”™è¯¯å¼‚å¸¸ä¸ä»£ç è°ƒè¯•
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>debug</tag>
        <tag>jupyter</tag>
        <tag>è°ƒè¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>PyCharmè°ƒè¯•</title>
    <url>/dev-pycharm-debug/</url>
    <content><![CDATA[PyCharmPyCharmæ˜¯ä¸€ç§Python IDEï¼Œå¸¦æœ‰ä¸€æ•´å¥—å¯ä»¥å¸®åŠ©ç”¨æˆ·åœ¨ä½¿ç”¨Pythonè¯­è¨€å¼€å‘æ—¶æé«˜å…¶æ•ˆç‡çš„å·¥å…·ï¼Œæ¯”å¦‚è°ƒè¯•ã€è¯­æ³•é«˜äº®ã€Projectç®¡ç†ã€ä»£ç è·³è½¬ã€æ™ºèƒ½æç¤ºã€è‡ªåŠ¨å®Œæˆã€å•å…ƒæµ‹è¯•ã€ç‰ˆæœ¬æ§åˆ¶ã€‚æ­¤å¤–ï¼Œè¯¥IDEæä¾›äº†ä¸€äº›é«˜çº§åŠŸèƒ½ï¼Œä»¥ç”¨äºæ”¯æŒDjangoæ¡†æ¶ä¸‹çš„ä¸“ä¸šWebå¼€å‘ã€‚
æœ¬æ–‡è¦è®°å½•çš„ï¼Œæ˜¯PyCharmçš„è°ƒè¯•åŠŸèƒ½ã€‚


ä½¿ç”¨ä¸€èˆ¬è°ƒè¯•ä¸€èˆ¬è°ƒè¯•ï¼Œä¸éœ€è¦å¯¹PyCharmåšä»€ä¹ˆè®¾ç½®ï¼Œç›´æ¥ä½¿ç”¨å°±å¯ä»¥äº†ã€‚
1ã€æ‰“å¼€PyCharmï¼Œæ–°å»ºæ–‡ä»¶test.py
def my_abs(x):    if x &gt;= 0:        return x    else:        return -xprint(my_abs(-100))

2ã€åŒå‡»ä»£ç å·¦ä¾§è¡Œå·æ—çš„ç©ºç™½å¤„ï¼Œæ·»åŠ æ–­ç‚¹ã€‚
3ã€åœ¨èœå•æ ç‚¹å‡»Runï¼ŒDebugâ€¦ï¼Œé€‰æ‹©testã€‚å†æ¬¡è°ƒè¯•çš„æ—¶å€™ï¼Œåªéœ€è¦åœ¨èœå•æ ç‚¹å‡»Runï¼ŒDebug â€˜testâ€™å³å¯ã€‚
4ã€åœ¨PyCharmåº•éƒ¨çš„Debuggerçª—å£ä¸­ï¼Œå°±å¯ä»¥çœ‹åˆ°Step Overã€Step Intoã€Step Into My Codeã€Step Outã€Run to Cursorç­‰æŒ‰é’®ã€‚åŒæ—¶åœ¨Variablesçª—å£é‡Œï¼Œä¼šå‡ºç°å˜é‡çš„ä¿¡æ¯ã€‚
djangoè°ƒè¯•djangoçš„è°ƒè¯•ï¼Œéœ€è¦å¯¹PyCharmè¿›è¡Œè®¾ç½®ï¼Œè¿™é‡Œä»¥è°ƒè¯•djsiteé¡¹ç›®ä¸ºä¾‹ã€‚
1ã€åœ¨PyCharmä¸­æ‰“å¼€djsiteé¡¹ç›®ï¼Œç‚¹å‡»djsiteçš„ç›®å½•ï¼Œç„¶åç‚¹å‡»èœå•æ çš„Runï¼ŒEdit Configurationsâ€¦ã€‚å¼¹å‡ºä¸€ä¸ªRun/Debug Configurationsçª—å£ã€‚
2ã€ç‚¹å‡»é…ç½®çª—å£å·¦ä¸Šè§’çš„åŠ å·ï¼Œå†ç‚¹å‡»Pythonï¼Œå‡ºç°é…ç½®é¡¹ç›®çš„é¡µé¢ã€‚ä¸»è¦ä¿®æ”¹Nameä¸ºdjsiteï¼ŒScriptä¸ºD:\github\djsite\manage.pyï¼ŒScript parametersä¸ºrunserverã€‚ç„¶åç‚¹å‡»OKå³å¯ã€‚
3ã€åœ¨èœå•æ ç‚¹å‡»Runï¼ŒDebugâ€¦ï¼Œé€‰æ‹©djsiteã€‚åœ¨Consoleä¸­ï¼Œå°±ä¼šæ˜¾ç¤ºå‡ºè¿è¡Œæƒ…å†µã€‚ï¼ˆæ³¨æ„ï¼ŒConsoleå¯ä»¥ç¼©å°åˆ°æœ€å³è¾¹ï¼Œè®°å¾—æŠŠå®ƒå±•å¼€ï¼‰
4ã€åŒå‡»ä»£ç å·¦ä¾§è¡Œå·æ—çš„ç©ºç™½å¤„ï¼Œæ·»åŠ æ–­ç‚¹ã€‚åœ¨æµè§ˆå™¨è®¿é—®è¯¥æ–¹æ³•ï¼Œå°±ä¼šè·³è½¬åˆ°æ–­ç‚¹å¤„ã€‚
ä¹¦ç­¾PyCharmä¸‹è½½åœ°å€
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>debug</tag>
        <tag>pycharm</tag>
        <tag>è°ƒè¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7ä¸­firewallçš„ä½¿ç”¨</title>
    <url>/dev-firewall/</url>
    <content><![CDATA[firewallç®€ä»‹æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œfirewallç®€ä»‹å¦‚ä¸‹ï¼š

firewalld daemon provides a dynamically managed firewall with support for network â€œzonesâ€ to assign a level of trust to a network and its associated connections and interfaces. It has support for IPv4 and IPv6 firewall settings. It supports Ethernet bridges and IP set and has a separation of runtime and permanent configuration options. It also has an interface for services or applications to add firewall rules directly. The complete communication with firewalld is done using D-Bus.

firewalldå®ˆæŠ¤è¿›ç¨‹æä¾›äº†ä¸€ä¸ªåŠ¨æ€ç®¡ç†çš„é˜²ç«å¢™ï¼Œæ”¯æŒç½‘ç»œâ€œåŒºåŸŸâ€ä¸ºç½‘ç»œåŠå…¶å…³è”çš„è¿æ¥å’Œæ¥å£åˆ†é…ä¿¡ä»»çº§åˆ«ã€‚å®ƒæ”¯æŒipv4å’Œipv6é˜²ç«å¢™è®¾ç½®ã€‚å®ƒæ”¯æŒä»¥å¤ªç½‘æ¡¥å’Œipé›†ï¼Œå¹¶ä¸”æœ‰è¿è¡Œæ—¶å’Œæ°¸ä¹…é…ç½®é€‰é¡¹çš„åˆ†ç¦»ã€‚å®ƒè¿˜å…·æœ‰ç”¨äºç›´æ¥æ·»åŠ é˜²ç«å¢™è§„åˆ™çš„æœåŠ¡æˆ–åº”ç”¨ç¨‹åºçš„ç•Œé¢ã€‚ä¸firewalldçš„å®Œæ•´é€šä¿¡æ˜¯ä½¿ç”¨d-buså®Œæˆçš„ã€‚
ç®€å•æ¥è¯´ï¼ŒCentOS6ä¸­ä½¿ç”¨iptablesä½œä¸ºé˜²ç«å¢™ï¼›è€Œåœ¨CentOS7ä¸­ï¼Œfirewallä½œä¸ºé˜²ç«å¢™ï¼Œæ˜¯iptablesçš„å‡çº§ã€‚æœ¬æ–‡åªè®¨è®ºè‡ªå·±å¸¸ç”¨çš„firewallå‘½ä»¤å’Œé…ç½®ï¼Œä¸æ¶‰åŠé«˜çº§ç”¨æ³•ã€‚


firewallå¸¸ç”¨å‘½ä»¤
systemctl start firewalldï¼Œå¯åŠ¨ã€‚
systemctl stop firewalldï¼Œå…³é—­ã€‚
systemctl status firewalldï¼ŒæŸ¥çœ‹çŠ¶æ€ã€‚
systemctl enable firewalldï¼Œè®¾ç½®å¼€æœºå¯åŠ¨ã€‚
systemctl disable firewalldï¼Œå…³é—­å¼€æœºå¯åŠ¨ã€‚


firewall-cmd --versionï¼ŒæŸ¥çœ‹ç‰ˆæœ¬ã€‚ 
firewall-cmd --helpï¼ŒæŸ¥çœ‹å¸®åŠ©ã€‚
firewall-cmd --stateï¼Œæ˜¾ç¤ºçŠ¶æ€ã€‚
firewall-cmd --list-allï¼ŒæŸ¥çœ‹æ‰€æœ‰è§„åˆ™ã€‚
firewall-cmd --zone=public --list-portsï¼ŒæŸ¥çœ‹æ‰€æœ‰æ‰“å¼€çš„ç«¯å£ã€‚ 
firewall-cmd --zone=public --add-port=8080/tcp --permanentï¼Œæ‰“å¼€ç«¯å£ã€‚
firewall-cmd --zone=public --remove-port=8080/tcp --permanentï¼Œå…³é—­ç«¯å£ã€‚
firewall-cmd --reloadï¼Œæ›´æ–°é˜²ç«å¢™è§„åˆ™ã€‚

firewallé…ç½®æ–‡ä»¶firewallçš„é…ç½®æ–‡ä»¶æ˜¯xmlæ ¼å¼çš„ï¼Œå­˜å‚¨åœ¨/usr/lib/firewalld/ å’Œ /etc/firewalld/ ä¸¤ä¸ªç›®å½•ä¸‹ã€‚
è¿™æ ·å°±æœ‰å¾ˆå¤§çš„çµæ´»æ€§ï¼Œå› ä¸ºæ–‡ä»¶å¯ä»¥è¢«ç¼–è¾‘ï¼Œå†™å…¥ï¼Œå¤‡ä»½ï¼Œç”¨ä½œå…¶ä»–å®‰è£…çš„æ¨¡æ¿ç­‰ç­‰ã€‚
1ã€ç³»ç»Ÿé…ç½®ç›®å½•ll /usr/lib/firewalld/services
ç›®å½•ä¸­å­˜æ”¾å®šä¹‰å¥½çš„ç½‘ç»œæœåŠ¡å’Œç«¯å£å‚æ•°ï¼Œç³»ç»Ÿå‚æ•°ï¼Œä¸èƒ½ä¿®æ”¹ã€‚
2ã€ç”¨æˆ·é…ç½®ç›®å½•ll /etc/firewalld/
3ã€è‡ªå®šä¹‰æ·»åŠ ç«¯å£å¸¸ç”¨å‘½ä»¤ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ç”¨æˆ·å¯ä»¥é€šè¿‡å‘½ä»¤çš„æ–¹å¼æ·»åŠ ç«¯å£ï¼Œæ·»åŠ çš„ç«¯å£ä¼šå†™å…¥/etc/firewalld ç›®å½•ä¸‹çš„ç›¸åº”é…ç½®æ–‡ä»¶ä¸­ã€‚ç”¨æˆ·ä¹Ÿå¯ä»¥é€šè¿‡ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶çš„æ–¹å¼æ·»åŠ ç«¯å£ï¼Œæ¯”å¦‚æ·»åŠ 8080ç«¯å£ã€‚
vim /etc/firewalld/zones/public.xmlï¼Œæ·»åŠ å†…å®¹ï¼š
&lt;port protocol=&quot;tcp&quot; port=&quot;8080&quot;/&gt;
é‡å¯firewalldï¼Œå³å¯ç”Ÿæ•ˆã€‚
4ã€public.xmlæ–‡ä»¶ä¸­è¿˜å¯ä»¥é…ç½®æ”¾è¡Œçš„ipèŒƒå›´ã€ç«¯å£èŒƒå›´ç­‰ç­‰ï¼Œåœ¨æ­¤ä¸ä½œè®°å½•ï¼Œéœ€è¦çš„æ—¶å€™å†è¯´ã€‚
ä½¿ç”¨iptableså¾ˆå¤šåŒå­¦åœ¨ä½¿ç”¨æ—¶ï¼Œå–œæ¬¢ä½¿ç”¨iptablesä»£æ›¿firewallï¼Œæ¯•ç«Ÿiptablesç”¨ä¹ æƒ¯äº†ã€‚1ã€å…³é—­firewallï¼Œç¦æ­¢å¼€æœºå¯åŠ¨systemctl stop firewalldsystemctl disable firewalld
2ã€å®‰è£…iptablesé˜²ç«å¢™yum install iptables-services
3ã€ç¼–è¾‘iptablesé˜²ç«å¢™é…ç½®æ–‡ä»¶vi /etc/sysconfig/iptablesæ·»åŠ å¼€æ”¾22ã€80ã€3306ç«¯å£ï¼š
iptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPTiptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPTiptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 3306 -j ACCEPT

4ã€å¯åŠ¨iptablesï¼Œè®¾ç½®å¼€æœºå¯åŠ¨systemctl start iptablessystemctl enable iptables
5ã€iptableså¸¸ç”¨å‘½ä»¤

iptables --listï¼ŒæŸ¥çœ‹é˜²ç«å¢™è¯¦æƒ…ã€‚
iptables-saveï¼ŒæŸ¥çœ‹é˜²ç«å¢™è¯¦æƒ…ã€‚
iptables -A INPUT -p tcp --dport 8080 -j ACCEPTï¼Œå¼€æ”¾ç«¯å£ã€‚
iptables -L -n --line-numbersï¼Œå°†æ‰€æœ‰è§„åˆ™ä»¥åºå·æ ‡è®°æ˜¾ç¤ºã€‚
iptables -D INPUT 1ï¼Œåˆ é™¤INPUTé‡Œåºå·ä¸º1çš„è§„åˆ™ã€‚
service iptables saveï¼Œä¿å­˜iptablesè®¾ç½®ï¼ˆä»…é™RedHatç³»åˆ—ï¼‰ã€‚

ä¹¦ç­¾CentOS 7ä¸­firewallé˜²ç«å¢™è¯¦è§£å’Œé…ç½®ä»¥åŠåˆ‡æ¢ä¸ºiptablesé˜²ç«å¢™
CentOS7ä½¿ç”¨firewalldæ‰“å¼€å…³é—­é˜²ç«å¢™ä¸ç«¯å£
CentOS 7 å¼€æ”¾3306ç«¯å£è®¿é—®
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>centos</tag>
        <tag>firewall</tag>
        <tag>iptables</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7è®¾ç½®mysqlå¼€æœºè‡ªå¯åŠ¨</title>
    <url>/dev-centos-mysql-autostart/</url>
    <content><![CDATA[yumå®‰è£…mysqlå‚è€ƒã€ŠCentOS 7.0ä¸‹ä½¿ç”¨yumå®‰è£…MySQLã€‹ï¼Œå®‰è£…æ­¥éª¤å¦‚ä¸‹ï¼š
1ã€ä¸‹è½½mysqlçš„repoæºwget http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm
2ã€å®‰è£…mysql-community-release-el7-5.noarch.rpmåŒ…rpm -ivh mysql-community-release-el7-5.noarch.rpm
å®‰è£…è¿™ä¸ªåŒ…åï¼Œä¼šè·å¾—ä¸¤ä¸ªmysqlçš„yum repoæºï¼š/etc/yum.repos.d/mysql-community.repoï¼Œ/etc/yum.repos.d/mysql-community-source.repoã€‚


3ã€å®‰è£…mysqlyum install mysql-server
4ã€ç™»å½•mysqlmysql -u root
ç™»å½•æ—¶æŠ¥é”™ï¼šERROR 2002 (HY000): Canâ€™t connect to local MySQL server through socket â€˜/var/lib/mysql/mysql.sockâ€™ (2)åŸå› æ˜¯/var/lib/mysqlçš„è®¿é—®æƒé™é—®é¢˜ï¼Œè§£å†³åŠæ³•æ˜¯æŠŠ/var/lib/mysqlçš„æ‹¥æœ‰è€…æ”¹ä¸ºå½“å‰ç”¨æˆ·ï¼Œå¹¶é‡å¯æœåŠ¡ï¼š
chown -R root:root /var/lib/mysqlservice mysqld restart
5ã€é‡ç½®å¯†ç ï¼Œè®¾ç½®è¿œç¨‹è®¿é—®ï¼Œå‚è€ƒã€ŠMySQLé‡ç½®å¯†ç ã€‹
PSï¼šæŸ¥çœ‹mysqlç‰ˆæœ¬mysql -V
è¿™ç§æ–¹æ³•å®‰è£…çš„mysqlï¼Œé»˜è®¤è‡ªå¯åŠ¨ã€‚
æ‰‹åŠ¨å®‰è£…mysqlæ‰‹åŠ¨å®‰è£…mysqlçš„æ–¹æ³•ï¼Œå‚è€ƒã€ŠCentOSå®‰è£…å¤šç‰ˆæœ¬MySQLã€‹ã€‚è®¾ç½®è‡ªå¯åŠ¨çš„æ–¹æ³•ï¼ˆä¹Ÿé€‚ç”¨äºCentOS6ï¼‰ï¼Œå‚è€ƒã€ŠMySQLâ€”-ã€å¼€æœºè‡ªå¯ã€‘Linuxä¸‹è®¾ç½®MySqlè‡ªåŠ¨å¯åŠ¨ã€‹ã€‚
1ã€å°†æœåŠ¡æ–‡ä»¶æ‹·è´åˆ°init.dä¸‹ï¼Œå¹¶é‡å‘½åä¸ºmysqlcp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld
2ã€èµ‹äºˆå¯æ‰§è¡Œæƒé™chmod +x /etc/init.d/mysqld
3ã€æ·»åŠ æœåŠ¡chkconfig --add mysqld
4ã€æ˜¾ç¤ºæœåŠ¡åˆ—è¡¨chkconfig --list
å¦‚æœçœ‹åˆ°mysqlçš„æœåŠ¡ï¼Œå¹¶ä¸”3ã€4ã€5éƒ½æ˜¯onçš„è¯åˆ™æˆåŠŸã€‚å¦‚æœæ˜¯offï¼Œåˆ™æ‰§è¡Œchkconfig --level 345 mysql on
5ã€é‡å¯ç”µè„‘reboot
6ã€éªŒè¯netstat -na | grep 3306
å¦‚æœçœ‹åˆ°æœ‰ç›‘å¬è¯´æ˜æœåŠ¡å¯åŠ¨äº†ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>centos</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7è®¾ç½®tomcatå¼€æœºè‡ªå¯åŠ¨</title>
    <url>/dev-centos-tomcat-autostart/</url>
    <content><![CDATA[å®‰è£…tomcaté¦–å…ˆå‚è€ƒã€Šå…¨å¹³å°å®‰è£…JDKã€‹ï¼Œå®‰è£…é…ç½®å¥½JDKï¼Œç„¶åæŒ‰ç…§ä¸‹é¢çš„æµç¨‹å®‰è£…tomcatã€‚
1ã€ä¸‹è½½tomcat8.0.50wget http://www-eu.apache.org/dist/tomcat/tomcat-8/v8.0.50/bin/apache-tomcat-8.0.50.tar.gz
2ã€è§£å‹tomcatåˆ°/optç›®å½•tar -xzvf apache-tomcat-8.0.50.tar.gz -C /opt
3ã€å¯åŠ¨tomcatcd /opt/apache-tomcat-8.0.50/bin/
./startup.sh


4ã€æµ‹è¯•è®¿é—®curl localhost:8080è‡³æ­¤ï¼Œé‡åˆ°ä¸€ä¸ªå¤§å‘ã€‚curlå‘½ä»¤å¡åœ¨é‚£é‡Œä¸åŠ¨äº†ï¼Œæµè§ˆå™¨è®¿é—®ä¹Ÿæ˜¯ä¸€ç›´è½¬åœˆï¼Œè½¬å•Šè½¬ï¼Œåå‡ åˆ†é’Ÿäº†è¿˜åœ¨è½¬ã€‚ã€‚ã€‚è«éï¼Œtomcatç‰ˆæœ¬æœ‰é—®é¢˜ï¼Ÿæ¢äº†8.5.29ï¼Œä¸è¡Œï¼›æ¢äº†7.0.85ï¼Œä¸è¡Œã€‚è«éæ˜¯jdkç‰ˆæœ¬æœ‰é—®é¢˜ï¼Ÿæ¯•ç«Ÿç¬¬ä¸€æ¬¡æ˜¯ä½¿ç”¨yumå‘½ä»¤å®‰è£…çš„ã€‚æ¢äº†1.8.0_161ï¼Œä¾ç„¶ä¸è¡Œã€‚
å¥½åœ¨ï¼Œæœ€ç»ˆæ‰¾åˆ°äº†ç­”æ¡ˆï¼šCentos7+Tomcat8é…ç½®javawebç¯å¢ƒï¼Œtomcatå¯åŠ¨å·¨æ…¢çš„é—®é¢˜ï¼Œå®‰è£…rngæœåŠ¡ã€‚
ï¼ˆ1ï¼‰å®‰è£…ç†µæœåŠ¡yum install rng-toolsï¼ˆ2ï¼‰å¯åŠ¨æœåŠ¡systemctl start rngdç„¶åï¼Œtomcatå°±å¯åŠ¨æˆåŠŸäº†ã€‚ï¼ˆ3ï¼‰èµ¶ç´§æŠŠrngæœåŠ¡æ”¾è¿›å¼€æœºè‡ªå¯åŠ¨systemctl enable rngd
5ã€å…³é—­tomcatã€‚./shutdown.sh
è®¾ç½®å¼€æœºè‡ªå¯åŠ¨å‚è€ƒã€Šåœ¨CentOS7ä¸­è®¾ç½®Tomcatå¼€æœºè‡ªå¯åŠ¨ã€‹ï¼Œè®¾ç½®æ­¥éª¤å¦‚ä¸‹ï¼š
å‡è®¾tomcatç›®å½•ä¸º/opt/apache-tomcat-8.0.50
1ã€ä¸ºTomcatæ·»åŠ å¯åŠ¨å‚æ•°
catalina.shåœ¨æ‰§è¡Œçš„æ—¶å€™ä¼šè°ƒç”¨åŒçº§è·¯å¾„ä¸‹çš„setenv.shæ¥è®¾ç½®é¢å¤–çš„ç¯å¢ƒå˜é‡ï¼Œå› æ­¤åœ¨/opt/tomcat/binè·¯å¾„ä¸‹åˆ›å»ºsetenv.shæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
# è®¾ç½®JAVA_HOMEexport JAVA_HOME=/usr/lib/jvm/jdk1.8.0_161export JRE_HOME=$JAVA_HOME/jreexport CLASSPATH=$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATHexport PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATHexport CATALINA_HOME=/opt/apache-tomcat-8.0.50export CATALINA_BASE=/opt/apache-tomcat-8.0.50# è®¾ç½®Tomcatçš„PIDæ–‡ä»¶CATALINA_PID=&quot;$CATALINA_BASE/tomcat.pid&quot;# æ·»åŠ JVMé€‰é¡¹JAVA_OPTS=&quot;-server -XX:PermSize=256M -XX:MaxPermSize=1024m -Xms512M -Xmx1024M -XX:MaxNewSize=256m&quot;

2ã€åœ¨/usr/lib/systemd/systemè·¯å¾„ä¸‹æ·»åŠ tomcat.serviceæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
[Unit]Description=tomcatAfter=syslog.target network.target remote-fs.target nss-lookup.target[Service]Type=forkingPIDFile=/opt/apache-tomcat-8.0.50/tomcat.pidExecStart=/opt/apache-tomcat-8.0.50/bin/startup.shExecReload=/bin/kill -s HUP $MAINPIDExecStop=/bin/kill -s QUIT $MAINPIDPrivateTmp=true[Install]WantedBy=multi-user.target

3ã€æŠŠtomcatåŠ å…¥å¼€æœºè‡ªå¯åŠ¨systemctl enable tomcat.service
4ã€é‡å¯æœåŠ¡å™¨reboot
5ã€å†æ¬¡è¿æ¥åï¼ŒæŸ¥çœ‹æœåŠ¡çŠ¶æ€systemctl status tomcat.service
çœ‹åˆ°tomcatå·²ç»å¯åŠ¨ï¼Œæ­£æƒ³ç€å¤§åŠŸå‘Šæˆï¼Œå´å‘ç°æµè§ˆå™¨è®¿é—®åˆå¼€å§‹è½¬åœˆäº†ã€‚æ£€æŸ¥rngæœåŠ¡ï¼Œå¯åŠ¨æ­£å¸¸ã€‚ç›´æ¥ä½¿ç”¨./startup.shå¯åŠ¨æ­£å¸¸ï¼Œè€Œä½¿ç”¨systemctl start tomcatå°±è½¬åœˆï¼Œè¿˜èƒ½æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿå‚ç…§ã€ŠCentOS7ä¸‹Tomcatå¯åŠ¨æ…¢çš„åŸå› åŠè§£å†³æ–¹æ¡ˆã€‹ä¸€æ–‡ï¼Œä¿®æ”¹java.securityï¼Œæ— æ•ˆï¼›ä¿®æ”¹catalina.shï¼Œæ— æ•ˆã€‚æ˜¯ä¸æ˜¯tomcat.serviceå†™çš„æœ‰é—®é¢˜ï¼Œå‚ç…§å…¶ä»–é…ç½®æ–¹æ¡ˆä¿®æ”¹ï¼Œä¾ç„¶æ— æ•ˆã€‚æƒ³åˆ°ã€ŠDockerfileä½¿ç”¨Supervisorç®¡ç†Tomcatã€‹ä¸€æ–‡ä¸­ï¼Œsupervisorå¯åŠ¨tomcatä¹Ÿä¼šæœ‰äº›é—®é¢˜ã€‚é‚£ä¹ˆï¼Œä¿®æ”¹startup.shå‘¢ï¼Ÿä¾ç„¶æ— æ•ˆã€‚
ä¸‡ä¸‡æ²¡æƒ³åˆ°ï¼Œæœ€åä¸€æ­¥è¿˜æœ‰è¿™ä¹ˆä¸ªæ·±å‘ï¼Œæ²‰æ€è‰¯ä¹…ï¼Œè«éï¼Œè¦æ¢init.dæ–¹æ³•æ¥è®¾ç½®å¯åŠ¨ï¼Ÿç›®å‰çœ‹æ¥ï¼Œåªèƒ½è¿™æ ·äº†ã€‚
åˆ é™¤å¼€æœºè‡ªå¯åŠ¨1ã€åˆ é™¤tomcat.servicefind / -name &quot;tomcat*&quot;rm /usr/lib/systemd/system/tomcat.servicerm /etc/systemd/system/multi-user.target.wants/tomcat.servicerm /etc/selinux/targeted/active/modules/100/tomcat
2ã€æµ‹è¯•å¯åŠ¨systemctl daemon-reloadsystemctl start tomcat.serviceå‡ºç°æç¤ºFailed to start tomcat.service: Unit not found.è¯´æ˜åˆ é™¤æˆåŠŸã€‚
è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ä¹‹init.d1ã€åœ¨/etc/init.dä¸‹åˆ›å»ºæœåŠ¡è„šæœ¬vim /etc/init.d/tomcatå†™å…¥å†…å®¹å¦‚ä¸‹ï¼š
#!/bin/bash## tomcat startup script for the Tomcat server### chkconfig: 345 80 20# description: start the tomcat deamon## Source function library. /etc/rc.d/init.d/functionsprog=tomcat# æ ¹æ®è‡ªå·±çš„è·¯å¾„æ”¹å†™JAVA_HOMEJAVA_HOME=/usr/lib/jvm/jdk1.8.0_161/  export JAVA_HOME# æ ¹æ®è‡ªå·±çš„è·¯å¾„æ”¹å†™CATALANA_HOMECATALANA_HOME=/opt/apache-tomcat-8.0.50/   export CATALINA_HOMEcase &quot;$1&quot; instart)    echo &quot;Starting Tomcat...&quot;    $CATALANA_HOME/bin/startup.sh    ;;stop)    echo &quot;Stopping Tomcat...&quot;    $CATALANA_HOME/bin/shutdown.sh    ;;restart)    echo &quot;Stopping Tomcat...&quot;    $CATALANA_HOME/bin/shutdown.sh    sleep 2    echo    echo &quot;Starting Tomcat...&quot;    $CATALANA_HOME/bin/startup.sh    ;;*)    echo &quot;Usage: $prog &#123;start|stop|restart&#125;&quot;    ;;esacexit 0

2ã€æ›´æ”¹æƒé™chmod a+x /etc/init.d/tomcat
3ã€æµ‹è¯•å¯åŠ¨service tomcat startå¯åŠ¨æˆåŠŸï¼Œç„¶è€Œï¼Œè¿˜æ˜¯è½¬åœˆã€‚ã€‚ã€‚
å®é™…ä¸Šï¼Œinit.dæ–¹æ³•æ·»åŠ çš„è‡ªå¯åŠ¨æœåŠ¡ï¼Œä¹Ÿä¼šåŠ å…¥åˆ°systemctlçš„ç®¡ç†ã€‚å› ä¸ºï¼Œè¿™æ—¶ä¹Ÿå¯ä»¥ç”¨systemctl start tomcatæ¥å¯åŠ¨æœåŠ¡ã€‚
æ— å¥ˆï¼Œå†³å®šæ¢æˆsupervisoræ¥è®¾ç½®è‡ªå¯åŠ¨ã€‚
è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ä¹‹supervisorå¼€å§‹è®¾ç½®å‰æœ€å¥½å…ˆåˆ é™¤init.dæ–¹æ³•è®¾ç½®çš„è‡ªå¯åŠ¨æ–‡ä»¶ï¼Œè™½ç„¶ä¸å½±å“ä½¿ç”¨ï¼Œä½†æ˜¯çœ‹ç€é—¹å¿ƒã€‚å‚è€ƒã€ŠCentOSå®‰è£…é…ç½®Supervisorã€‹ï¼Œå®‰è£…é…ç½®å¥½supervisorã€‚
1ã€åœ¨/etc/supervisorä¸­æ–°å»ºtomcat.confæ–‡ä»¶
[program:tomcat]directory=/opt/apache-tomcat-8.0.50command=/opt/apache-tomcat-8.0.50/bin/catalina.sh runenvironment=JAVA_HOME=&quot;/usr/lib/jvm/jdk1.8.0_161&quot;,JAVA_BIN=&quot;/usr/lib/jvm/jdk1.8.0_161/bin&quot;user=rootautostart=trueautorestart=truestdout_logfile=/var/log/supervisor/%(program_name)s.logstderr_logfile=/var/log/supervisor/%(program_name)s.log

2ã€é‡å¯supervisorsystemctl retart supervisord
3ã€é‡å¯tomcatsupervisorctl -c /etc/supervisord.conf restart tomcat
4ã€æµ‹è¯•è®¿é—®curl localhost:8080ï¼ŒæˆåŠŸã€‚æµè§ˆå™¨è®¿é—®ï¼ŒæˆåŠŸã€‚æ¢äº†ä¸‰ç§è‡ªå¯åŠ¨æ–¹å¼ï¼Œæ€»ç®—æˆåŠŸäº†ï¼Œä¸å®¹æ˜“ã€‚ã€‚ã€‚
5ã€é‡å¯reboot
6ã€äºŒæ¬¡æµ‹è¯•é‡å¯åæ‰§è¡Œsupervisorctl statusï¼Œtomcatæ­£å¸¸è¿è¡Œã€‚curlå‘½ä»¤å’Œæµè§ˆå™¨æµ‹è¯•ï¼Œæ­£å¸¸ã€‚è‡³æ­¤ï¼Œtomcatè‡ªå¯åŠ¨é…ç½®æˆåŠŸã€‚å…¶å®ï¼Œsystemdå’Œinit.dä¸¤ç§æ–¹æ³•ï¼Œç†è®ºä¸Šä¹Ÿæ˜¯å¯ä»¥æˆåŠŸçš„ï¼Œè®¿é—®è½¬åœˆçš„é”…è‚¯å®šæ˜¯æœºå™¨å’Œç³»ç»Ÿçš„ã€‚å—¯ï¼Œå°±æ˜¯è¿™æ ·ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>tomcat</tag>
        <tag>centos</tag>
        <tag>supervisor</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7è®¾ç½®Nginxå¼€æœºè‡ªå¯åŠ¨</title>
    <url>/dev-centos-nginx-autostart/</url>
    <content><![CDATA[å‰è¨€æœåŠ¡å™¨æ¯æ¬¡é‡å¯ï¼Œéƒ½éœ€è¦æ‰‹åŠ¨å¯åŠ¨ä¸€äº›æœåŠ¡ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªç¨‹åºå‘˜å¯ä»¥å¿å—çš„ï¼Œéš¾æ€ªå¤§å®¶éƒ½å–œæ¬¢å†™è„šæœ¬ã€‚æ¥ä¸‹æ¥ä¸‰ç¯‡æ–‡ç« ï¼Œåˆ†åˆ«è®°å½•ä¸€ä¸‹nginxã€tomcatå’Œmysqlçš„å¼€æœºè‡ªå¯åŠ¨é…ç½®ã€‚


systemdsystemdç®€ä»‹CentOS7å·²ä¸å†ä½¿ç”¨chkconfigç®¡ç†å¯åŠ¨é¡¹ï¼Œè€Œæ˜¯ä½¿ç”¨systemdã€‚å…³äºsystemdçš„è¡ç”Ÿå’Œå‘å±•ï¼Œå¯ä»¥å‚è§ã€ŠCentOS7/RHEL7 systemdè¯¦è§£ã€‹å’Œã€ŠCentOS7è¿›ç¨‹ç®¡ç†systemdè¯¦è§£ã€‹ã€‚ç®€å•ä»‹ç»å¦‚ä¸‹ï¼š
Linuxç³»ç»Ÿä»å¯åŠ¨åˆ°æä¾›æœåŠ¡çš„è¿‡ç¨‹æ˜¯è¿™æ ·ï¼Œå…ˆæ˜¯æœºå™¨åŠ ç”µï¼Œç„¶åé€šè¿‡MBRæˆ–è€…UEFIåŠ è½½GRUBï¼Œå†å¯åŠ¨å†…æ ¸ï¼Œå†…æ ¸å¯åŠ¨æœåŠ¡ï¼Œç„¶åå¼€å§‹å¯¹å¤–æœåŠ¡ã€‚
SysV initã€UpStartã€systemdä¸»è¦æ˜¯è§£å†³æœåŠ¡å¼•å¯¼ç®¡ç†çš„é—®é¢˜ã€‚
SysV initæ˜¯æœ€æ—©çš„è§£å†³æ–¹æ¡ˆï¼Œä¾é åˆ’åˆ†ä¸åŒçš„è¿è¡Œçº§åˆ«ï¼Œå¯åŠ¨ä¸åŒçš„æœåŠ¡é›†ï¼ŒæœåŠ¡ä¾é è„šæœ¬æ§åˆ¶ï¼Œå¹¶ä¸”æ˜¯é¡ºåºæ‰§è¡Œçš„ã€‚åœ¨CentOS5ä¸­ä½¿ç”¨ï¼Œé…ç½®æ–‡ä»¶ä¸º/etc/inittabã€‚SysV initæ–¹æ¡ˆçš„ä¼˜ç‚¹æ˜¯ï¼šåŸç†ç®€å•ï¼Œæ˜“äºç†è§£ï¼›ä¾é shellè„šæœ¬æ§åˆ¶ï¼Œç¼–å†™æœåŠ¡è„šæœ¬é—¨æ§›æ¯”è¾ƒä½ã€‚ç¼ºç‚¹æ˜¯ï¼šæœåŠ¡é¡ºåºå¯åŠ¨ï¼Œå¯åŠ¨è¿‡ç¨‹æ¯”è¾ƒæ…¢ï¼›ä¸èƒ½åšåˆ°æ ¹æ®éœ€è¦æ¥å¯åŠ¨æœåŠ¡ï¼Œæ¯”å¦‚é€šå¸¸å¸Œæœ›æ’å…¥Uç›˜çš„æ—¶å€™ï¼Œå†å¯åŠ¨USBæ§åˆ¶çš„æœåŠ¡ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½çš„èŠ‚çœç³»ç»Ÿèµ„æºã€‚
ä¸ºäº†è§£å†³ç³»ç»ŸæœåŠ¡çš„å³æ’å³ç”¨ï¼ŒUpStartåº”è¿è€Œç”Ÿï¼Œåœ¨CentOS6ç³»ç»Ÿä¸­ï¼ŒSysV initå’ŒUpStartæ˜¯å¹¶å­˜çš„ï¼ŒUpStartä¸»è¦è§£å†³äº†æœåŠ¡çš„å³æ’å³ç”¨ã€‚æœåŠ¡é¡ºåºå¯åŠ¨æ…¢çš„é—®é¢˜ï¼ŒUpStartçš„è§£å†³åŠæ³•æ˜¯æŠŠç›¸å…³çš„æœåŠ¡åˆ†ç»„ï¼Œç»„å†…çš„æœåŠ¡æ˜¯é¡ºåºå¯åŠ¨ï¼Œç»„ä¹‹é—´æ˜¯å¹¶è¡Œå¯åŠ¨ã€‚åœ¨CentOS6ç³»ç»Ÿä¸­ï¼Œé…ç½®æ–‡ä»¶ä¸º/etc/inittabå’Œ/etc/init/*.confã€‚
ä½†æ˜¯éšç€ç§»åŠ¨äº’è”ç½‘çš„åˆ°æ¥ï¼ŒSysV initæœåŠ¡å¯åŠ¨æ…¢çš„é—®é¢˜æ˜¾å¾—è¶Šæ¥è¶Šçªå‡ºï¼Œè®¸å¤šç§»åŠ¨è®¾å¤‡éƒ½æ˜¯åŸºäºLinuxå†…æ ¸ï¼Œæ¯”å¦‚å®‰å“ã€‚ç§»åŠ¨è®¾å¤‡å¯åŠ¨æ¯”è¾ƒé¢‘ç¹ï¼Œæ¯æ¬¡å¯åŠ¨éƒ½è¦ç­‰å¾…æœåŠ¡é¡ºåºå¯åŠ¨ï¼Œæ˜¾ç„¶éš¾ä»¥æ¥å—ï¼Œsystemdå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è¯ç”Ÿçš„ã€‚åœ¨CentOS7ä¸­ä½¿ç”¨ï¼Œå…¶é…ç½®æ–‡ä»¶ä¸º/usr/lib/systemd/system/ å’Œ /etc/systemd/system/ ä¸­çš„æ–‡ä»¶ã€‚systemdçš„è®¾è®¡æ€è·¯æ˜¯ï¼šå°½å¯èƒ½çš„å¿«é€Ÿå¯åŠ¨æœåŠ¡ï¼›å°½å¯èƒ½çš„å‡å°‘ç³»ç»Ÿèµ„æºå ç”¨ã€‚
systemdä½¿ç”¨åœ¨CentOS7ä¸­ï¼Œsystemctlå‘½ä»¤ä¸»è¦è´Ÿè´£æ§åˆ¶systemdç³»ç»Ÿå’ŒæœåŠ¡ç®¡ç†å™¨ã€‚åŸºæœ¬å–ä»£äº†serviceå’Œchkconfigå‘½ä»¤ï¼Œè™½ç„¶serviceå’Œchkconfigå‘½ä»¤ä¾ç„¶ä¿ç•™ï¼Œä½†æ˜¯æ®è¯´å·²ç»è¢«é˜‰å‰²è¿‡ã€‚
å‚è€ƒã€ŠCentos7ä¸‹çš„systemctlå‘½ä»¤ä¸serviceå’Œchkconfigã€‹ï¼Œæ•´ç†å¸¸ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š

systemctl --versionï¼ŒæŸ¥çœ‹ç‰ˆæœ¬ã€‚
whereis systemctlï¼ŒæŸ¥çœ‹ä½ç½®ã€‚
systemctl list-unit-filesï¼Œåˆ—å‡ºæ‰€æœ‰å¯ç”¨å•å…ƒï¼ˆæœåŠ¡ï¼‰ã€‚
systemctl list-unitsï¼Œåˆ—å‡ºæ‰€æœ‰è¿è¡Œä¸­çš„å•å…ƒã€‚
systemctl --failedï¼Œåˆ—å‡ºæ‰€æœ‰å¤±è´¥çš„å•å…ƒã€‚
systemctl list-unit-files | grep enableï¼ŒæŸ¥çœ‹è‡ªå¯åŠ¨çš„è½¯ä»¶ã€‚
systemctl is-enabled mysqld.serviceï¼ŒæŸ¥çœ‹æŸä¸ªå•å…ƒæ˜¯å¦å¼€æœºå¯åŠ¨ã€‚
systemctl status mysqld.serviceï¼ŒæŸ¥çœ‹æŸä¸ªå•å…ƒçš„çŠ¶æ€ã€‚
systemctl start mysqld.serviceï¼Œå¯åŠ¨æŸä¸ªå•å…ƒã€‚
systemctl restart mysqld.serviceï¼Œé‡å¯æŸä¸ªå•å…ƒã€‚
systemctl stop mysqld.serviceï¼Œåœæ­¢æŸä¸ªå•å…ƒã€‚
systemctl daemon-reloadï¼Œä¿®æ”¹äº†æŸä¸ªå•å…ƒçš„é…ç½®æ–‡ä»¶åï¼Œé‡è½½é…ç½®æ–‡ä»¶ã€‚
systemctl reload mysqld.serviceï¼Œé‡è½½æŸä¸ªå•å…ƒã€‚
systemctl enable mysqld.serviceï¼Œè®¾ç½®å¼€æœºè‡ªå¯åŠ¨ã€‚
systemctl disable mysqld.serviceï¼Œå…³é—­å¼€æœºè‡ªå¯åŠ¨ã€‚
systemctl kill mysqldï¼Œæ€æ­»å•å…ƒã€‚

nginxyumå®‰è£…nginxå‚è€ƒã€Šå¦‚ä½•åœ¨CentOS 7ä¸Šå®‰è£…Nginxã€‹ï¼Œå®‰è£…nginxï¼Œå®‰è£…æˆåŠŸåä½¿ç”¨systemctlå‘½ä»¤è®¾ç½®è‡ªå¯åŠ¨ã€‚
1ã€æ·»åŠ epelåº“yum install epel-release
2ã€å®‰è£…nginxyum install nginxå®‰è£…å®Œæˆåï¼Œnginxçš„é»˜è®¤é…ç½®è·¯å¾„ä¸º/etc/nginx/ã€‚
3ã€å¯åŠ¨nginxsystemctl start nginx
4ã€æµ‹è¯•è®¿é—®curl localhost
æµè§ˆå™¨å¦‚æœä¸èƒ½è®¿é—®ï¼Œå°±æ‰“å¼€é˜²ç«å¢™æˆ–è€…å¼€ç«¯å£ã€‚
# å…³é—­é˜²ç«å¢™systemctl stop firewalld.service# å¼€æ”¾ç«¯å£firewall-cmd --zone=public --add-port=80/tcp --permanentfirewall-cmd --reload

5ã€è®¾ç½®å¼€æœºå¯åŠ¨systemctl enable nginx
æ‰‹åŠ¨å®‰è£…nginxå‚è€ƒã€ŠCentos7å®‰è£…Nginxå®æˆ˜ã€‹ï¼Œå®‰è£…æ­¥éª¤å¦‚ä¸‹ï¼š
1ã€å®‰è£…ä¾èµ–
yum install -y gcc-c++yum install -y pcre pcre-develyum install -y zlib zlib-develyum install -y openssl openssl-devel

2ã€ä¸‹è½½nginx1.12.0å¹¶è§£å‹wget http://nginx.org/download/nginx-1.12.0.tar.gz
tar -xzvf nginx-1.12.0.tar.gz
cd nginx-1.12.0
3ã€åˆ›å»ºç›®å½•
mkdir -p /var/temp/nginxmkdir -p /var/temp/run/nginxchmod a+wrx -R /var/temp

4ã€é…ç½®ç¼–è¯‘é€‰é¡¹
./configure \--prefix=/usr/local/nginx \--pid-path=/var/temp/run/nginx/nginx.pid \--lock-path=/var/lock/nginx.lock \--error-log-path=/var/log/nginx/error.log \--http-log-path=/var/log/nginx/access.log \--http-client-body-temp-path=/var/temp/nginx/client \--http-proxy-temp-path=/var/temp/nginx/proxy \--http-fastcgi-temp-path=/var/temp/nginx/fastcgi \--http-uwsgi-temp-path=/var/temp/nginx/uwsgi \--http-scgi-temp-path=/var/temp/nginx/scgi \--with-http_gzip_static_module

åˆ‡è®°ï¼Œpid-pathä¸èƒ½è®¾ç½®ä¸º/var/run/nginx/nginx.pidã€‚å› ä¸ºCentOSæ¯æ¬¡é‡å¯åï¼Œéƒ½ä¼šåˆ é™¤/var/runç›®å½•ä¸­çš„è‡ªå»ºç›®å½•å’Œæ–‡ä»¶ï¼Œä»è€Œå¯¼è‡´nginxè‡ªå¯åŠ¨å¤±è´¥ã€‚
5ã€ç¼–è¯‘å®‰è£…make &amp;&amp; make install
è¿›å…¥/usr/local/nginxæŸ¥çœ‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨confã€sbinã€htmlæ–‡ä»¶å¤¹ï¼Œè‹¥å­˜åœ¨åˆ™å®‰è£…æˆåŠŸ
6ã€æµ‹è¯•å¯åŠ¨/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.confå¦‚æœä¸æŒ‡å®š-cï¼Œnginxåœ¨å¯åŠ¨æ—¶é»˜è®¤åŠ è½½conf/nginx.confæ–‡ä»¶ã€‚
7ã€æµ‹è¯•è®¿é—®curl localhost
æµè§ˆå™¨å¦‚æœä¸èƒ½è®¿é—®ï¼Œå°±æ‰“å¼€é˜²ç«å¢™æˆ–è€…å¼€ç«¯å£ã€‚
# å…³é—­é˜²ç«å¢™systemctl stop firewalld.service# å¼€æ”¾ç«¯å£firewall-cmd --zone=public --add-port=80/tcp --permanentfirewall-cmd --reload

æ‰‹åŠ¨å®‰è£…å…¨éƒ¨ç»„ä»¶ç‰ˆnginx1ã€å®‰è£…ä¾èµ–
yum install -y gcc-c++yum install -y pcre pcre-develyum install -y zlib zlib-develyum install -y openssl openssl-develyum install -y libxml2 libxml2-develyum install -y libxslt libxslt-develyum install -y gd-develyum install -y perl-ExtUtils-Embedyum install -y GeoIP GeoIP-devel GeoIP-datayum install -y gperftoolsyum install -y libatomic_ops-devel

2ã€ä¸‹è½½nginx1.12.0å¹¶è§£å‹wget http://nginx.org/download/nginx-1.12.0.tar.gz
tar -xzvf nginx-1.12.0.tar.gz
cd nginx-1.12.0
3ã€åˆ›å»ºç›®å½•
mkdir -p /var/temp/nginxmkdir -p /var/temp/run/nginxchmod a+wrx -R /var/temp

4ã€ä¸‹è½½ngx_http_upstream_check_moduleæ¨¡å—git clone https://github.com/yaoweibin/nginx_upstream_check_module
5ã€é…ç½®ç¼–è¯‘é€‰é¡¹
./configure \--prefix=/usr/local/nginx \--pid-path=/var/temp/run/nginx/nginx.pid \--lock-path=/var/lock/nginx.lock \--error-log-path=/var/log/nginx/error.log \--http-log-path=/var/log/nginx/access.log \--http-client-body-temp-path=/var/temp/nginx/client \--http-proxy-temp-path=/var/temp/nginx/proxy \--http-fastcgi-temp-path=/var/temp/nginx/fastcgi \--http-uwsgi-temp-path=/var/temp/nginx/uwsgi \--http-scgi-temp-path=/var/temp/nginx/scgi \--with-http_gzip_static_module \--with-select_module \--with-poll_module \--with-threads \--with-file-aio \--with-ipv6 \--with-http_ssl_module \--with-http_v2_module \--with-http_realip_module \--with-http_addition_module \--with-http_xslt_module \--with-http_xslt_module \--with-http_image_filter_module \--with-http_image_filter_module \--with-http_geoip_module \--with-http_geoip_module \--with-http_sub_module \--with-http_dav_module \--with-http_flv_module \--with-http_mp4_module \--with-http_gunzip_module \--with-http_auth_request_module \--with-http_random_index_module \--with-http_secure_link_module \--with-http_degradation_module \--with-http_slice_module \--with-http_stub_status_module \--with-http_perl_module \--with-mail \--with-mail_ssl_module \--with-stream \--with-stream \--with-stream_ssl_module \--with-google_perftools_module \--with-cpp_test_module \--with-pcre \--with-libatomic \--add-module=./nginx_upstream_check_module

6ã€ç¼–è¯‘å®‰è£…make &amp;&amp; make install
è®¾ç½®å¼€æœºå¯åŠ¨æ‰‹åŠ¨å®‰è£…çš„nginxï¼Œè¯¥æ€æ ·è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ï¼Ÿå‚ç…§ã€ŠNginx+Center OS 7.2 å¼€æœºå¯åŠ¨è®¾ç½®(è½¬è½½)ã€‹ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š
1ã€åœ¨ç³»ç»ŸæœåŠ¡ç›®å½•é‡Œåˆ›å»ºnginx.serviceæ–‡ä»¶vi /usr/lib/systemd/system/nginx.service
2ã€å†™å…¥å†…å®¹å¦‚ä¸‹ï¼š
[Unit]Description=nginxAfter=network.target  [Service]Type=forkingExecStart=/usr/local/nginx/sbin/nginxExecReload=/usr/local/nginx/sbin/nginx -s reloadExecStop=/usr/local/nginx/sbin/nginx -s quitPrivateTmp=true  [Install]WantedBy=multi-user.target

[Unit]:æœåŠ¡çš„è¯´æ˜Description:æè¿°æœåŠ¡After:æè¿°æœåŠ¡ç±»åˆ«[Service]æœåŠ¡è¿è¡Œå‚æ•°çš„è®¾ç½®Type=forkingæ˜¯åå°è¿è¡Œçš„å½¢å¼ExecStartä¸ºæœåŠ¡çš„å…·ä½“è¿è¡Œå‘½ä»¤ExecReloadä¸ºé‡å¯å‘½ä»¤ExecStopä¸ºåœæ­¢å‘½ä»¤PrivateTmp=Trueè¡¨ç¤ºç»™æœåŠ¡åˆ†é…ç‹¬ç«‹çš„ä¸´æ—¶ç©ºé—´æ³¨æ„ï¼š[Service]çš„å¯åŠ¨ã€é‡å¯ã€åœæ­¢å‘½ä»¤å…¨éƒ¨è¦æ±‚ä½¿ç”¨ç»å¯¹è·¯å¾„[Install]è¿è¡Œçº§åˆ«ä¸‹æœåŠ¡å®‰è£…çš„ç›¸å…³è®¾ç½®ï¼Œå¯è®¾ç½®ä¸ºå¤šç”¨æˆ·ï¼Œå³ç³»ç»Ÿè¿è¡Œçº§åˆ«ä¸º3
3ã€è®¾ç½®å¼€æœºè‡ªå¯åŠ¨systemctl enable nginx.service
4ã€æŸ¥çœ‹nginxçŠ¶æ€systemctl status nginx.serviceå¾ˆå¥‡æ€ªï¼Œæ˜æ˜å¯åŠ¨æˆåŠŸäº†ï¼Œä¸ºä»€ä¹ˆæ˜¾ç¤ºActive: inactive (dead)ï¼Ÿ
5ã€æ€æ­»nginxé‡å¯nginxpkill -9 nginx
ps aux | grep nginx
systemctl start nginx
å†æ¬¡æŸ¥çœ‹çŠ¶æ€ï¼Œå˜æˆäº†activeï¼Œæå®šã€‚
6ã€é‡å¯æœåŠ¡å™¨reboot
7ã€å†æ¬¡è¿æ¥åï¼ŒæŸ¥çœ‹æœåŠ¡çŠ¶æ€systemctl status nginx.service
çœ‹åˆ°nginxå·²ç»å¯åŠ¨ï¼Œè‡³æ­¤ï¼Œnginxè‡ªå¯åŠ¨é…ç½®æˆåŠŸã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>nginx</tag>
        <tag>centos</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu14.04å®‰è£…é…ç½®Ganglia</title>
    <url>/dev-ubuntu-ganglia/</url>
    <content><![CDATA[Gangliaç®€ä»‹Gangliaæ˜¯UC Berkeleyå‘èµ·çš„ä¸€ä¸ªå¼€æºé›†ç¾¤ç›‘è§†é¡¹ç›®ï¼Œè®¾è®¡ç”¨äºæµ‹é‡æ•°ä»¥åƒè®¡çš„èŠ‚ç‚¹ã€‚Gangliaçš„æ ¸å¿ƒåŒ…å«gmondã€gmetadä»¥åŠä¸€ä¸ªWebå‰ç«¯ã€‚ä¸»è¦æ˜¯ç”¨æ¥ç›‘æ§ç³»ç»Ÿæ€§èƒ½ï¼Œå¦‚ï¼šcpu ã€memã€ç¡¬ç›˜åˆ©ç”¨ç‡ï¼Œ I/Oè´Ÿè½½ã€ç½‘ç»œæµé‡æƒ…å†µç­‰ï¼Œé€šè¿‡æ›²çº¿å¾ˆå®¹æ˜“è§åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„å·¥ä½œçŠ¶æ€ï¼Œå¯¹åˆç†è°ƒæ•´ã€åˆ†é…ç³»ç»Ÿèµ„æºï¼Œæé«˜ç³»ç»Ÿæ•´ä½“æ€§èƒ½èµ·åˆ°é‡è¦ä½œç”¨ã€‚


Ganliaç»“æ„Gangliaåœ¨ç»“æ„ä¸Šç”±ä¸‰ç§å®ˆæŠ¤è¿›ç¨‹ç»„æˆgmond ã€gmetadå’Œgwebã€‚åœ¨æ“ä½œä¸Šï¼Œæ¯ç§å®ˆæŠ¤è¿›ç¨‹éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œè¿è¡Œæ—¶åªéœ€è¦è‡ªå·±çš„é…ç½®æ–‡ä»¶æ¥æ“ä½œå³å¯ï¼Œä»»æ„å®ˆæŠ¤è¿›ç¨‹åœ¨ç¼ºå°‘å…¶ä»–ä¸¤ç§å®ˆæŠ¤è¿›ç¨‹çš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥æ­£å¸¸å¯åŠ¨å’Œè¿è¡Œã€‚ç„¶è€Œï¼Œä¸‰è€…åœ¨ç»“æ„ä¸Šåˆæ˜¯ç›¸äº’åä½œçš„ï¼Œéœ€è¦åŒæ—¶ä½¿ç”¨æ‰èƒ½å‘æŒ¥åŠŸæ•ˆã€‚
gmondgmondå’Œæ™®é€šä»£ç†ä¸€æ ·ï¼Œå®‰è£…åœ¨æ¯ä¸€å°éœ€è¦ç›‘æ§çš„ä¸»æœºä¸Šï¼Œè´Ÿè´£ä¸æ“ä½œç³»ç»Ÿäº¤äº’ä»¥è·å¾—éœ€è¦å…³æ³¨çš„æŒ‡æ ‡æ•°æ®ï¼Œä¾‹å¦‚CPUè´Ÿè½½å’Œç¡¬ç›˜å®¹é‡ã€‚ 
gmondåœ¨å†…éƒ¨é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œé‡‡ç”¨åŸºäºCè¯­è¨€ç¼–å†™çš„ã€æ ¹æ®æ“ä½œç³»ç»Ÿå®šåˆ¶çš„æ’ä»¶è¿›è¡Œç›‘æ§ã€‚å’Œå…¶ä»–ç›‘æ§ç³»ç»Ÿé‡‡ç”¨çš„å®¢æˆ·ç«¯ä»£ç†è½¯ä»¶ä¸åŒï¼Œgmondä¸éœ€è¦ç­‰å¾…å¤–éƒ¨è½®è¯¢å¼•æ“çš„æ•°æ®ç›‘æµ‹è¯·æ±‚ï¼Œä¹Ÿä¸å°†ç›‘æ§æ•°æ®ç›´æ¥ä¸Šä¼ è‡³é›†ä¸­å¼è½®è¯¢å™¨ï¼Œè€Œæ˜¯æ ¹æ®è‡ªå·±æœ¬åœ°é…ç½®æ–‡ä»¶å®šä¹‰çš„è°ƒåº¦æ–¹æ¡ˆè¿›è¡Œè½®è¯¢ã€‚ç›‘æµ‹æ•°æ®æ—¶ä½¿ç”¨ç®€å•çš„ç›‘å¬ï¼é€šå‘Šåè®®ï¼Œé€šè¿‡ XDR (External Data Representation)åœ¨é›†ç¾¤å†…çš„ä¸»æœºä¹‹é—´å…±äº«ã€‚å› æ­¤ï¼ŒGangliaé›†ç¾¤å†…çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½çŸ¥é“åŒä¸€é›†ç¾¤å†…æ‰€æœ‰ä¸»æœºçš„å½“å‰æŒ‡æ ‡æ•°æ®ã€‚è¿œç¨‹è½®è¯¢å™¨å¯ä»¥é€šè¿‡ç«¯å£8649å‘é›†ç¾¤å†…ä»»æ„èŠ‚ç‚¹è¯·æ±‚è·å¾—è¯¥é›†ç¾¤XMLæ ¼å¼çš„æ‰€æœ‰æ•°æ®ã€‚ 
gmondå¹¶ä¸æ˜¯æ¶ˆæç­‰å¾…è¢«ç›‘æ§ç³»ç»ŸæœåŠ¡å™¨å”¤é†’ï¼Œè€Œæ€»æ˜¯å¤„äºæ¿€æ´»æ€ï¼Œä»¥ä¾¿è¿›è¡Œæµ‹é‡ã€ä¼ è¾“å’Œå…±äº«ã€‚è½®è¯¢å™¨ä¸å†éœ€è¦çŸ¥é“ä»å“ªäº›ä¸»æœºè·å–å“ªäº›æœåŠ¡ï¼Œè€Œåªéœ€è¦ä¸€ä¸ªåŒ…å«æ¯ä¸ªé›†ç¾¤å†…è‡³å°‘ä¸€å°ä¸»æœºåç§°çš„åˆ—è¡¨å³å¯ã€‚
gmetadgmetadçš„ä½œç”¨æ˜¯æ•´åˆæ‰€æœ‰ä¿¡æ¯ã€‚
gmetedæ˜¯ä¸€ä¸ªç®€å•çš„è½®è¯¢å™¨ï¼Œå¯¹ç½‘ç»œä¸­æ¯ä¸ªé›†ç¾¤è¿›è¡Œè½®è¯¢ï¼Œå¹¶å°†æ¯å°ä¸»æœºä¸Šè¿”å›çš„æ‰€æœ‰æŒ‡æ ‡æ•°æ®å†™å…¥å„ä¸ªé›†ç¾¤å¯¹åº”çš„è½®è¯¢æ•°æ®åº“RRDã€‚ä½œä¸ºæ•°æ®å­˜å‚¨çš„ä¸€ç§æµè¡Œçš„è§£å†³æ–¹æ¡ˆï¼ŒRRDtoolæ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚æŒ‡æ ‡æ•°æ®å­˜å‚¨äºè½®è¯¢æ•°æ®åº“ï¼ˆRound Robin Databaseï¼‰ï¼Œè¿™ç§æ•°æ®åº“åŒ…å«äº†å¤šä¸ªæ—¶é—´å—å†…é™æ€åˆ†é…çš„æ•°å€¼ã€‚å¦‚æœæ¯10ç§’è¿›è¡Œä¸€æ¬¡è½®è¯¢ï¼Œæ¯æ¬¡æ•°æ®éƒ½è¿›è¡Œå­˜å‚¨ï¼Œä¸€å¤©å°†éœ€è¦8640æ¬¡å­˜å‚¨ã€‚è€ƒè™‘åˆ°æ•°æ®ä¿ç•™éœ€æ±‚ï¼Œ RRDtoolå†…éƒ¨ä»¥â€œå¾ªç¯è¦†ç›–â€çš„æ–¹å¼ç®¡ç†æ•°æ®ï¼Œå°†æ–°æ•°æ®çš„å€¼å åŠ åˆ°åŸæ¥çš„æ•°å€¼ä¸Šæ¥è¦†ç›–åŸæœ‰æ•°æ®ã€‚
gwebGangliaå¯è§†åŒ–å·¥å…·â€”â€”gwebæ— éœ€ç”¨æˆ·è¿›è¡Œä»»ä½•è‡ªå®šä¹‰è®¾ç½®å³å¯ä¾¿æ·ã€åŠæ—¶åœ°è®¿é—®ç½‘ç»œä¸­ä»»æ„ä¸€å°ä¸»æœºçš„ä»»æ„ä¸€ç§æŒ‡æ ‡æ•°æ®ã€‚
ä¸»èŠ‚ç‚¹å®‰è£…é…ç½®gangliaæ˜¯ä¸€ä¸ªé›†ç¾¤ç›‘æ§é¡¹ç›®ï¼Œè¦åˆ†ä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ¥å®Œæˆä¸»èŠ‚ç‚¹çš„å®‰è£…é…ç½®ã€‚
1ã€æ›´æ–°è½¯ä»¶æºä¸­çš„è½¯ä»¶åˆ—è¡¨sudo apt-get update
2ã€å®‰è£…gmondã€gmetadå’Œgwebsudo apt-get install ganglia-monitor rrdtool gmetad ganglia-webfrontend
3ã€é…ç½®gmondsudo vi /etc/ganglia/gmond.confåˆ†åˆ«æ‰¾åˆ°ï¼š
cluster &#123;  name = &quot;unspecified&quot;  owner = &quot;unspecified&quot;  latlong = &quot;unspecified&quot;  url = &quot;unspecified&quot;&#125;udp_send_channel &#123;  mcast_join = 239.2.11.71  port = 8649  ttl = 1&#125;udp_recv_channel &#123;  mcast_join = 239.2.11.71  port = 8649  bind = 239.2.11.71&#125;

ä¿®æ”¹ä¸ºï¼š
cluster &#123;  name = &quot;my cluster&quot;   owner = &quot;unspecified&quot;  latlong = &quot;unspecified&quot;  url = &quot;unspecified&quot;&#125;udp_send_channel &#123;  # mcast_join = 239.2.11.71  host = 192.168.56.103  port = 8649  ttl = 1&#125;udp_recv_channel &#123;  # mcast_join = 239.2.11.71  port = 8649  # bind = 239.2.11.71&#125;

4ã€é…ç½®gmetadsudo vi /etc/ganglia/gmetad.conf
æŸ¥æ‰¾clusterï¼Œæ³¨é‡Šæ‰è¯¥è¡Œï¼Œä¿®æ”¹ä¸ºï¼š
# data_source &quot;my cluster&quot; localhostdata_source &quot;my cluster&quot; 10 192.168.56.103:8649

data_sourceåé¢æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°â€my clusterâ€æ˜¯é›†ç¾¤åç§°ï¼›ç¬¬äºŒä¸ªå‚æ•°10æ˜¯è½®è¯¢æ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰ï¼›ç¬¬ä¸‰ä¸ªå‚æ•°192.168.56.103:8649æ˜¯è¦ç›‘å¬çš„æœºå™¨çš„IPå’Œç«¯å£ï¼ˆå¯å†™å¤šä¸ªï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼‰ã€‚
5ã€é…ç½®gwebsudo cp /etc/ganglia-webfrontend/apache.conf /etc/apache2/sites-enabled/ganglia.conf
6ã€é‡å¯æœåŠ¡
sudo /etc/init.d/ganglia-monitor restartsudo /etc/init.d/gmetad restartsudo /etc/init.d/apache2 restart

7ã€æµ‹è¯•è®¿é—®ubuntuæµ‹è¯•ï¼šcurl http://192.168.56.103/ganglia/æµè§ˆå™¨è®¿é—®æµ‹è¯•ï¼šhttp://192.168.56.103/ganglia/ 
ä»èŠ‚ç‚¹å®‰è£…é…ç½®ä»¥ä¸Šï¼Œå·²ç»å®Œæˆäº†gangliaä¸»èŠ‚ç‚¹çš„å®‰è£…é…ç½®ï¼Œä½†æ˜¯å¾€å¾€æˆ‘ä»¬è¦ç›‘æ§çš„æ˜¯ä¸€ä¸ªé›†ç¾¤ã€‚æ¥ä¸‹é‡Œï¼Œæˆ‘ä»¬å°±æ¥ç ”ç©¶ä¸€ä¸‹ä»èŠ‚ç‚¹çš„é…ç½®ã€‚
Gangliaç»“æ„ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬äº†è§£åˆ°ï¼Œgmondè¦å®‰è£…åœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè´Ÿè´£ç›‘æ§ä¸»æœºæƒ…å†µï¼›gmetadï¼ˆåŒ…æ‹¬rrdtoolï¼‰åªè¦å®‰è£…åœ¨ä¸»èŠ‚ç‚¹å°±å¯ä»¥ï¼Œè´Ÿè´£æ”¶é›†å„ä¸ªèŠ‚ç‚¹çš„æ•°æ®ï¼›gwebåªè¦å®‰è£…åœ¨ä¸»èŠ‚ç‚¹ï¼Œè´Ÿè´£æ˜¾ç¤ºgmetadæ”¶é›†çš„æ•°æ®ã€‚
ç»¼ä¸Šï¼Œä»èŠ‚ç‚¹åªè¦å®‰è£…gmondå°±å¯ä»¥äº†ã€‚
ä»èŠ‚ç‚¹å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªä»èŠ‚ç‚¹ï¼ŒIPä¸º192.168.56.104ï¼Œé‚£ä¹ˆå®ƒçš„å®‰è£…é…ç½®æ­¥éª¤å¦‚ä¸‹ï¼š
1ã€æ›´æ–°è½¯ä»¶æºä¸­çš„è½¯ä»¶åˆ—è¡¨sudo apt-get update
2ã€å®‰è£…gmondsudo apt-get install ganglia-monitor
3ã€é…ç½®gmondsudo vi /etc/ganglia/gmond.confåˆ†åˆ«æ‰¾åˆ°ï¼š
cluster &#123;  name = &quot;unspecified&quot;  owner = &quot;unspecified&quot;  latlong = &quot;unspecified&quot;  url = &quot;unspecified&quot;&#125;udp_send_channel &#123;  mcast_join = 239.2.11.71  port = 8649  ttl = 1&#125;udp_recv_channel &#123;  mcast_join = 239.2.11.71  port = 8649  bind = 239.2.11.71&#125;

ä¿®æ”¹ä¸ºï¼š
cluster &#123;  name = &quot;my cluster&quot;   owner = &quot;unspecified&quot;  latlong = &quot;unspecified&quot;  url = &quot;unspecified&quot;&#125;udp_send_channel &#123;  # mcast_join = 239.2.11.71  host = 192.168.56.103  port = 8649  ttl = 1&#125;udp_recv_channel &#123;  # mcast_join = 239.2.11.71  port = 8649  # bind = 239.2.11.71&#125;

æ²¡é”™ï¼Œä»èŠ‚ç‚¹çš„gmondé…ç½®å’Œä¸»èŠ‚ç‚¹å®Œå…¨ç›¸åŒã€‚
4ã€é‡å¯æœåŠ¡sudo /etc/init.d/ganglia-monitor restart
ä¸»èŠ‚ç‚¹é…ç½®å®Œä»èŠ‚ç‚¹å°±å¥½äº†å—ï¼Ÿå¹¶æ²¡æœ‰ï¼Œä¸»èŠ‚ç‚¹ä¹Ÿè¦åšç›¸åº”ä¿®æ”¹ï¼Œä¸»è¦æ˜¯ä¿®æ”¹ä¸‹gmetadé…ç½®ã€‚
1ã€sudo vi /etc/ganglia/gmetad.conf
æŸ¥æ‰¾clusterï¼Œä¿®æ”¹ä¸ºï¼š
# data_source &quot;my cluster&quot; localhostdata_source &quot;my cluster&quot; 10 192.168.56.103:8649 192.168.56.104:8649

è¿™æ ·ï¼Œå°±æ·»åŠ å¥½äº†192.168.56.104è¿™ä¸ªä»èŠ‚ç‚¹ã€‚
æ³¨æ„ï¼šgmetadä¼šä¾æ¬¡æ£€æµ‹æŒ‡å®šä¸»æœºï¼Œå¹¶ä»ç¬¬ä¸€å°å“åº”ä¸»æœºå¼€å§‹æ”¶é›†çŠ¶æ€æ•°æ®ï¼Œè€Œæ¯ä¸€å°ä¸»æœºä¸Šçš„gmondéƒ½çŸ¥é“æ‰€åœ¨é›†ç¾¤çš„æ‰€æœ‰çŠ¶æ€æ•°æ®ï¼Œæ‰€ä»¥æ— éœ€åœ¨data_sourceå®šä¹‰é‡ŒæŒ‡å®šé›†ç¾¤å†…çš„æ‰€æœ‰ä¸»æœºã€‚å‡è‹¥æœ‰èŠ‚ç‚¹å¤±æ•ˆï¼Œé€šå¸¸æŒ‡å®šä¸¤ä¸‰ä¸ªä¸»æœºä¹Ÿå°±è¶³å¤Ÿä¿è¯æ•°æ®çš„æ”¶é›†ã€‚
2ã€é‡å¯gmetadsudo /etc/init.d/gmetad restart
3ã€æµ‹è¯•è®¿é—®ç­‰å¾…10ç§’ï¼Œå†æ¬¡è®¿é—® http://192.168.56.103/ganglia/ ï¼Œå°±èƒ½çœ‹åˆ°æ–°åŠ å…¥çš„ä»èŠ‚ç‚¹ã€‚
åˆ é™¤æ•°æ®ç”±äºé‡è®¾äº†ç®¡ç†æœºçš„ç³»ç»Ÿæ—¶é—´ï¼Œå‘ç°æ‰€æœ‰çš„æœºå™¨çŠ¶æ€éƒ½å˜æˆäº†Hosts downï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦åˆ é™¤æ•°æ®é‡æ–°å¼€å§‹ç»Ÿè®¡ã€‚
1ã€ç®¡ç†æœºåˆ é™¤rrdsç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶cd /var/lib/ganglia/rrds &amp;&amp; sudo rm -rf ./*
2ã€ç®¡ç†æœºé‡å¯gmondå’Œgmetadsudo /etc/init.d/ganglia-monitor restartsudo /etc/init.d/gmetad restart
3ã€å®¢æˆ·æœºé‡å¯gmondsudo /etc/init.d/ganglia-monitor restart
åˆ é™¤æœºå™¨gangliaé»˜è®¤æœåŠ¡å™¨downæœºä¹Ÿä¸ä¼šåœ¨webå‰ç«¯æ¸…é™¤è¯¥è®¾å¤‡ï¼Œå®˜æ–¹æ–‡æ¡£ä»‹ç»çš„åŠæ³•å¦‚ä¸‹ï¼š
1ã€ç™»å½•ç®¡ç†æœº
2ã€ç¼–è¾‘gmond.confï¼Œsudo vim /etc/ganglia/gmond.confåœ¨globalsä¸­æ‰¾åˆ°host_dmaxï¼Œå®ƒçš„é»˜è®¤å€¼ä¸º0ï¼Œæ„æ€æ˜¯ä¸æ¸…é™¤èŠ‚ç‚¹ã€‚host_dmaxçš„å•ä½ä¸ºç§’ï¼Œæˆ‘ä»¬æŠŠhost_dmaxçš„å€¼ä¿®æ”¹ä¸º7å¤©ï¼Œå°±æ˜¯60x60x24x7=604800ï¼Œå³è¶…è¿‡7å¤©æœªæ±‡æŠ¥æ•°æ®çš„èŠ‚ç‚¹ä¼šä»å‰ç«¯æ¸…é™¤ã€‚
ä¹¦ç­¾Ganglia_ç®€è¿°
ubuntu14.04ç³»ç»Ÿä¸­å®‰è£…Ganglia
Ganglia ç›‘æ§å®æˆ˜ï¼
gmetad.confï¼šgmetadé…ç½®æ–‡ä»¶ï¼ˆ1ï¼‰
]]></content>
      <categories>
        <category>engineering</category>
        <category>monitoring</category>
      </categories>
      <tags>
        <tag>ç›‘æ§</tag>
        <tag>ubuntu</tag>
        <tag>ganglia</tag>
      </tags>
  </entry>
  <entry>
    <title>åŸŸåè¢«clientholdè§£å°æ–¹æ³•</title>
    <url>/essay-clienthold/</url>
    <content><![CDATA[å‰è¨€2017å¹´10æœˆ13æ—¥ï¼Œçªç„¶æ”¶åˆ°æ¥è‡ªé˜¿é‡Œäº‘çš„çŸ­ä¿¡å’Œé‚®ä»¶ï¼š

å°Šæ•¬çš„ç”¨æˆ·ï¼šæ‚¨çš„ç½‘ç«™voidking.comæ¶‰åŠè¿æ³•ä¸è‰¯ä¿¡æ¯ï¼Œè¿åäº†ã€Šäº’è”ç½‘ä¿¡æ¯æœåŠ¡ç®¡ç†åŠæ³•ã€‹ç¬¬åäº”æ¡è§„å®šï¼Œç›®å‰é˜¿é‡Œäº‘å·²ç»å¯¹æ‚¨åŸŸåholdå¤„ç†ã€‚å¦‚æœæ‚¨å¯¹æœ¬é€šçŸ¥çš„å†…å®¹å­˜æœ‰ç–‘é—®ï¼Œè¯·åŠæ—¶å·¥å•æˆ–è€…ç”µè¯è”ç³»æˆ‘ä»¬ã€‚ è°¢è°¢æ‚¨å¯¹é˜¿é‡Œäº‘çš„æ”¯æŒã€‚é˜¿é‡Œäº‘è®¡ç®—æœ‰é™å…¬å¸

æ”¶åˆ°è¿™æ¡ä¿¡æ¯æ—¶ï¼ŒéƒåŒå­¦ä¸€è„¸æ‡µé€¼ï¼Œé©¬ä¸Šå°±è‡´ç”µäº†é˜¿é‡Œäº‘å®¢æœï¼Œè¡¨ç¤ºä¸æœã€‚å®¢æœå‘Šè¯‰æˆ‘éœ€è¦å®åè®¤è¯ï¼Œæˆ‘è¯´è®¤è¯è¿‡äº†ã€‚æœ€ç»ˆå®¢æœè§£å†³ä¸äº†ï¼Œè®©æˆ‘æäº¤å·¥å•ã€‚


å·¥å•ç¬¬äºŒå¤©ï¼Œæœæ–­æäº¤äº†å·¥å•ã€‚ä»¥ä¸‹æ˜¯å·¥å•æˆªå›¾ã€‚
ä»æŠ˜è…¾åˆ°æ”¾å¼ƒå·¥å•è¯´ï¼Œå¿…é¡»åˆ°å…¬å®‰å±€ç½‘è­¦åŠå…¬å®¤åšç”³æŠ¥ï¼Œå¬èµ·æ¥å°±å¥½éº»çƒ¦ã€‚ä½†æ˜¯ï¼Œä¸ºäº†æˆ‘çš„åŸŸåï¼Œå†³å¿ƒéº»çƒ¦ä¸€æŠŠã€‚å› ä¸º voidking.com è¿™ä¸ªåŸŸåç”¨äº†å¾ˆå¤šå¹´ï¼Œå’ŒéƒåŒå­¦æ„Ÿæƒ…æ·±åšã€‚
å½“æ—¶èº«åœ¨é•¿æ˜¥ï¼Œæ‰“ç”µè¯ç»™110ï¼Œé—®åˆ°äº†ç½‘è­¦ä¸­å¿ƒçš„ç”µè¯ï¼Œæƒ³å’¨è¯¢ä¸‹å…·ä½“æ€ä¹ˆå¤„ç†ï¼Œéœ€è¦å‡†å¤‡ä»€ä¹ˆææ–™ï¼Œç„¶è€Œï¼Œæ‰“ç”µè¯æ— äººæ¥å¬ã€‚è¿ç»­å‡ å¤©ï¼Œæ‰“äº†å‡ åä¸ªç”µè¯ï¼Œä¾æ—§æ— äººæ¥å¬ã€‚
ä¸ç”˜å¿ƒçš„æˆ‘ï¼Œæƒ³è¦åœ¨ç½‘ä¸Šæ‰¾åˆ°ç½‘è­¦ä¸­å¿ƒçš„å…¶ä»–è”ç³»æ–¹å¼ã€‚æ„å¤–å‘ç°äº†å…¨å›½å…¬å®‰æœºå…³äº’è”ç½‘ç«™å®‰å…¨æœåŠ¡å¹³å°ï¼Œè«éï¼Œæ‰€è°“çš„ç”³æŠ¥å°±æ˜¯å…¬å®‰å¤‡æ¡ˆï¼Ÿäºæ˜¯ï¼ŒèŠ±äº†ä¸€å‘¨å·¦å³å®Œæˆäº†å…¬å®‰å¤‡æ¡ˆã€‚ä½†æ˜¯ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œç”³æŠ¥å’Œå…¬å®‰å¤‡æ¡ˆå¹¶æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚æƒŠå–œçš„æ˜¯ï¼Œå…¬å®‰å¤‡æ¡ˆæˆåŠŸåï¼Œç»™æˆ‘çš„é€šçŸ¥ä¸­é™„å¸¦äº†é•¿æ˜¥çš„ç½‘è­¦ä¸­å¿ƒè”ç³»æ–¹å¼ã€‚æœæ–­æ‰“ç”µè¯è¿‡å»ï¼Œæ¥å¬äº†ï¼Œæœ‰æˆï¼ä½†æ˜¯ï¼Œæ¥å¬ç”µè¯çš„äººå‘˜å‘Šè¯‰æˆ‘ï¼Œç½‘è­¦ä¸­å¿ƒæ¬åˆ°å¦å¤–ä¸€ä¸ªåŠå…¬å®¤äº†ï¼Œç»™äº†æˆ‘å¦å¤–ä¸€ä¸ªå·ç ã€‚ç„¶åï¼Œå†ä¹Ÿæ²¡æœ‰æ‰“é€šè¿‡ã€‚ã€‚ã€‚åœ¨å¾®åšä¸Šå’¨è¯¢é•¿æ˜¥ç½‘è­¦ï¼Œä¹Ÿæ²¡æœ‰å¾—åˆ°å›å¤ï¼Œé‚æ”¾å¼ƒã€‚
PSï¼šå…¬å®‰å¤‡æ¡ˆæˆåŠŸåæ‹¿åˆ°äº†å¤‡æ¡ˆå·ï¼Œä½†æ˜¯ç°åœ¨æŸ¥è¯¢ï¼Œå±…ç„¶æ²¡æœ‰å¤‡æ¡ˆä¿¡æ¯ï¼Œä¹Ÿæ˜¯ä¸€å¤´é›¾æ°´ï¼Œä¸æ˜æ‰€ä»¥ã€‚
ä»æŠ˜è…¾åˆ°æ”¾å¼ƒ2.0ä¸€ç›´æƒ³ç€ï¼Œå¾ˆå¿«å°±è¦å»åŒ—äº¬å®ä¹ äº†ï¼Œåˆ°æ—¶å€™å»åŒ—äº¬ç½‘è­¦ä¸­å¿ƒå¤„ç†ã€‚è¿™ä¸€ç­‰ï¼Œå°±æ˜¯è¿‘äº”ä¸ªæœˆã€‚æ²¡æœ‰å»åŒ—äº¬ï¼Œè€Œæ˜¯æ¥åˆ°äº†æ·±åœ³ã€‚æ·±åœ³ä¹Ÿæ˜¯å¤§åŸå¸‚ï¼Œç½‘è­¦ä¸­å¿ƒçš„æœåŠ¡åº”è¯¥å¾ˆå‘¨åˆ°ï¼Œæˆ‘è¿™ä¹ˆæƒ³ç€ã€‚
ç»™110æ‰“ç”µè¯ï¼Œè¯¢é—®ç½‘è­¦ä¸­å¿ƒçš„ç”µè¯ï¼Œè­¦å¯Ÿè¯´è®©æˆ‘æ‰“114æŸ¥è¯¢ã€‚114æŸ¥è¯¢åˆ°ç½‘è­¦ä¸­å¿ƒç”µè¯åï¼Œè‡´ç”µç½‘è­¦ä¸­å¿ƒï¼Œç½‘è­¦ä¸­å¿ƒè¯´ä»–ä»¬åªå¤„ç†ç½‘ç»œè¯ˆéª—ç±»æ¡ˆä»¶ï¼Œæˆ‘è¿™ç§ç½‘ç«™æ–¹é¢çš„è¦æ‰¾é€šä¿¡ç®¡ç†å±€ã€‚ç„¶åï¼Œä»114é‚£é‡Œæ‹¿åˆ°äº†æ·±åœ³é€šä¿¡ç®¡ç†å±€çš„ç”µè¯ï¼Œè‡´ç”µé€šä¿¡ç®¡ç†å±€ï¼Œç©ºå·ã€‚ç„¶åï¼Œä»114é‚£é‡Œæ‹¿åˆ°äº†å¹¿ä¸œçœé€šä¿¡ç®¡ç†å±€çš„ç”µè¯ï¼Œä¸€ç›´å¿™çº¿ä¸­ï¼Œåå‡ ä¸ªç”µè¯æ²¡æœ‰æ‰“é€šã€‚
å†³å®šè¿˜æ˜¯å†å’¨è¯¢ä¸€ä¸‹ç½‘è­¦ï¼Œæ¯•ç«Ÿæ˜¯å…¬å®‰éƒ¨ä¸‹å‘çš„holdè¦æ±‚ã€‚å¾®åšå…³æ³¨äº†æ·±åœ³ç½‘è­¦ï¼Œå’¨è¯¢åŸŸåè¢«holdæ€ä¹ˆå¤„ç†ï¼Œæ²¡æ”¶åˆ°å›å¤ã€‚äº†è§£åˆ°ä»–ä»¬å‘¨æœ«ä¸ä¸Šç­ï¼Œå†³å®šå“ªå¤©è¯·å‡å»ä¸€è¶Ÿç½‘è­¦ä¸­å¿ƒã€‚
ä¸çŸ¥é“å‡†å¤‡ä»€ä¹ˆææ–™ï¼Œå› ä¸ºç½‘ä¸Šçš„æ¡ˆä¾‹æå°‘ã€‚æ¯”è¾ƒé è°±çš„ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç¯‡æ–‡ç« ã€‚åŸŸåè¢«clientHoldçš„è§£å°åŠæ³• å’Œ åŸŸåè¢«åœæ­¢è§£æè¯¥å¦‚ä½•æ¢å¤æ­£å¸¸ ä¸­éƒ½æåˆ°äº†æ ‡å‡†è§£å°æµç¨‹ï¼š
1ã€å†™å¥½æ•´é¡¿æŠ¥å‘Šæäº¤æœ¬åœ°å…¬å®‰å±€
2ã€å…¬å®‰å±€æäº¤æ•´é¡¿æŠ¥å‘Šåˆ°è´Ÿè´£ç½‘ç»œä¿¡æ¯çš„å…¬å®‰éƒ¨ç›¸å…³éƒ¨é—¨
3ã€å…¬å®‰éƒ¨ç›¸å…³éƒ¨é—¨ç»è¿‡å¯¹æ•´é¡¿æŠ¥å‘Šçš„æ‰¹å¤æŠŠè§£é™¤åŸŸåé”å®šçš„é€šçŸ¥ä¸‹è¾¾ç»™å·¥ä¿¡éƒ¨ã€‚
4ã€å·¥ä¿¡éƒ¨æ¥åˆ°å…¬å®‰éƒ¨ç›¸å…³éƒ¨é—¨çš„é€šçŸ¥æŠŠè§£é™¤åŸŸåé”å®šçš„é€šçŸ¥ä¸‹è¾¾ç»™é€šä¿¡ç®¡ç†å±€ã€‚
5ã€é€šä¿¡ç®¡ç†å±€åœ¨æŠŠé€šçŸ¥ä¸‹è¾¾ç»™æ–°ç½‘ï¼Œæ­¤æ—¶åŸŸåæ‰å¯ä»¥æ­£å¸¸ã€‚
å¤æ‚ï¼Œå¥½å¤æ‚ï¼Œä½†æ˜¯éƒåŒå­¦è¿˜æ˜¯å†³å®šæä¸€ä¸‹ã€‚äºæ˜¯ä»ç½‘ä¸Šæ‰¾äº†ç½‘ç«™æ•´é¡¿æŠ¥å‘Šçš„æ¨¡æ¿ï¼Œå†™äº†ä¸€ä»½æ•´é¡¿æŠ¥å‘Šã€‚ä½†æ˜¯ï¼Œè¯¥æäº¤åˆ°å“ªé‡Œå‘¢ï¼Ÿè¿™ä»½æŠ¥å‘Šæ¨¡æ¿æ˜¯å¦æ ‡å‡†ï¼Œéœ€ä¸éœ€è¦é‡æ–°å†™ï¼Ÿ
å·¥å•2.0å¸¦ç€è¿™äº›ç–‘é—®ï¼ŒéƒåŒå­¦æäº¤äº†ç¬¬äºŒä»½å·¥å•ï¼Œå¸Œæœ›é˜¿é‡Œäº‘èƒ½å¤Ÿæä¾›ä¸€äº›å¸®åŠ©ï¼Œå®åœ¨æ˜¯ä¸çŸ¥é“è¯¥æ‰¾è°äº†ã€‚
è§£å†³åŠæ³•é˜¿é‡Œäº‘å¹¶æ²¡æœ‰æä¾›ä»€ä¹ˆæœ‰ç”¨çš„ä¿¡æ¯ï¼Œå‡ ä¹èµ°æŠ•æ— è·¯çš„éƒåŒå­¦ï¼Œç»§ç»­å¯»æ‰¾å¸Œæœ›ã€‚åœ¨é‡è¯»åŸŸåè¢«åœæ­¢è§£æè¯¥å¦‚ä½•æ¢å¤æ­£å¸¸ è¿™ç¯‡æ–‡ç« æ—¶ï¼Œâ€œåŸŸåè½¬ç§»â€è®©æˆ‘çœ¼å‰ä¸€äº®ï¼clientholdæ˜¯å› ä¸ºæ³¨å†Œå•†holdäº†åŸŸåï¼Œä½†æ˜¯åœ¨å›½å¤–ï¼Œæ³¨å†Œå•†æ˜¯æ²¡æœ‰æƒåŠ›holdåŸŸåçš„ï¼é‚£æˆ‘èƒ½ä¸èƒ½æŠŠåŸŸåè½¬ç§»åˆ°å›½å¤–å‘¢ï¼ŸæŸ¥çœ‹äº†ä¸€ä¸‹åŸŸåè½¬å‡ºé˜¿é‡Œäº‘çš„æ¡ä»¶ï¼š

å¿…é¡»æ˜¯åœ¨é˜¿é‡Œäº‘ç”³è¯·çš„åŸŸåã€‚
åŸŸåè½¬å‡ºæ—¶è·ç¦»åŸŸåç”³è¯·æ—¥ï¼ˆåŸŸåæ³¨å†Œæ—¥æœŸï¼‰ 60 å¤©ä»¥ä¸Šã€‚
åŸŸåè½¬å‡ºæ—¶è·ç¦»åŸŸåæœ€åä¸€æ¬¡æˆåŠŸè½¬ç§»æ—¥å¤§äº 60 å¤©ã€‚
åŸŸåè½¬å‡ºæ—¶è·è¯¥åŸŸååˆ°æœŸæ—¥å¤§äº 15 å¤©ã€‚
åŸŸåè½¬å‡ºæ—¶çŠ¶æ€æ­£å¸¸ï¼ˆä¸èƒ½æ˜¯ç¦æ­¢è½¬å‡ºçŠ¶æ€ï¼‰ï¼Œä¸æ¬ è´¹ã€ä¸å¤„äºä»»ä½•ä»²è£åŠæ³•å¾‹ç¨‹åºä¸­ã€ä¸å­˜åœ¨è¯¥åŸŸåæŒæœ‰è€…çš„èº«ä»½ä¸æ¸…æ¥šæˆ–è€…å­˜åœ¨äº‰è®®ã€‚
åŸŸåè¿‡æœŸåå®Œæˆç»­è´¹/åŸŸåèµå›å·²è¶…è¿‡ 45 å¤©ã€‚

å¯¹æ¯”äº†è¿™äº›ï¼Œå‘ç°è‡ªå·±ç¬¦åˆæ¡ä»¶ï¼Œæ¿€åŠ¨ï¼äºæ˜¯ï¼Œå¼€å§‹äº†åŸŸåè½¬ç§»ï¼Œä»é˜¿é‡Œäº‘åˆ°godaddyã€‚
å…·ä½“æµç¨‹ç™¾åº¦å³å¯ï¼Œå¾ˆç®€å•ï¼Œæ¯”è¾ƒå‘çš„æ˜¯ï¼Œåœ¨å¼€å§‹è½¬ç§»å‰ï¼Œè¦å…ˆç­‰äº”å¤©ï¼

å°Šæ•¬çš„ç”¨æˆ·ï¼šæˆ‘æ–¹æ³¨å†Œå•†ï¼ˆè§ä¸‹è¡¨â€œè½¬å‡ºæ³¨å†Œå•†â€åˆ—ï¼‰äºåŒ—äº¬æ—¶é—´2018-03-05 16:27:22æ”¶åˆ°æœ‰å…³æ‚¨å¸Œæœ›å°†åŸŸåè½¬åˆ°å…¶ä»–æ³¨å†Œå•†çš„é€šçŸ¥ã€‚é€šçŸ¥è½¬å‡ºçš„åŸŸååˆ—è¡¨å¦‚ä¸‹ï¼šï¼ˆè¡¨ç•¥ï¼‰é‡è¦æç¤ºï¼š1ã€å¦‚æœæ‚¨å¸Œæœ›ç»§ç»­è¯¥è½¬å‡ºï¼Œæ‚¨ä¸éœ€è¦åšä»»ä½•æ“ä½œï¼Œæ ¹æ®ä¸Šè¿°åŸŸåç›¸å…³æ³¨å†Œå±€çš„è§„å®šï¼ŒåŸŸåå°†åœ¨5-7å¤©åè‡ªåŠ¨è½¬å‡ºã€‚2ã€å¦‚æœæ‚¨å¸Œæœ›å–æ¶ˆæ­¤æ¬¡è½¬å‡ºï¼Œè¯·æ‚¨åŠ¡å¿…åœ¨åŒ—äº¬æ—¶é—´2018-03-10 15:27:22å‰æŒ‰å¦‚ä¸‹æ–¹æ³•æ“ä½œå–æ¶ˆï¼šç™»å½•â€œé˜¿é‡Œäº‘ç®¡ç†æ§åˆ¶å°â€ â€”â€œåŸŸåä¸ç½‘ç«™â€”åŸŸåâ€”åŸŸååˆ—è¡¨â€ï¼Œé€‰æ‹©åŸŸåè¿›è¡Œâ€œç®¡ç†â€ï¼Œè¿›å…¥â€œåŸŸåè½¬å‡ºä¸‡ç½‘â€ â€”â€œå–æ¶ˆè½¬å‡ºâ€æŒ‰é’®ã€‚å¦‚æœç™»å½•åæ²¡æœ‰â€œå–æ¶ˆè½¬å‡ºâ€æŒ‰é’®ï¼Œåˆ™æ„å‘³ç€æ­¤åŸŸåå·²ç»è½¬å‡ºæˆåŠŸï¼Œå°†æ— æ³•å–æ¶ˆè½¬å‡ºã€‚3ã€å¦‚æœæˆ‘æ–¹æ³¨å†Œå•†åœ¨åŒ—äº¬æ—¶é—´2018-03-10 15:27:22å‰æœªæ”¶åˆ°æ‚¨çš„å–æ¶ˆè½¬å‡ºè¯·æ±‚ï¼Œè¯¥è½¬ç§»å°†ç»§ç»­ã€‚

äº”å¤©ä¸­ï¼Œæˆ‘å¾ˆç„¦èºå¿å¿‘ï¼Œåœ¨æƒ³ä¼šä¸ä¼šç­‰äº†äº”å¤©æœ€åæç¤ºæˆ‘è½¬ç§»å¤±è´¥ã€‚çœ‹äº†å¾ˆå¤šç›¸å…³æ–‡ç« å¸–å­ï¼Œåæ¥åŸŸåè¢«æ³¨å†Œå•†å¼ºåˆ¶åœæ­¢è§£æï¼ŒåŸŸåçŠ¶æ€ clientHold ~~æ€ä¹ˆåŠï¼Ÿè¿™ç¯‡å¸–å­ä¸­æ‰¾åˆ°äº†ä¿¡å¿ƒã€‚é¦–å…ˆï¼Œåªè¦ä¸æ˜¯cnçš„åŸŸåï¼Œéƒ½å¯ä»¥å‘APNICç”³è¯·å¼ºåˆ¶è½¬å‡ºï¼Œè¿™æ ·è½¬å‡ºå°±æ²¡é—®é¢˜äº†ã€‚å…¶æ¬¡ï¼Œè½¬ç§»åˆ°å›½å¤–ï¼Œå› ä¸ºæ²¡æœ‰clientholdä¸€è¯´ï¼Œä¹Ÿå°±ç›¸å½“äºè‡ªåŠ¨è§£å°ã€‚
å°±è¿™æ ·ï¼Œç­‰åˆ°äº†3æœˆ10æ—¥çš„15:27ï¼Œæ²¡æœ‰æ¶ˆæ¯ã€‚ç»§ç»­ç­‰å¾…ï¼Œç›´åˆ°3æœˆ11æ—¥13:23ï¼Œç»ˆäºæ”¶åˆ°äº†godaddyçš„åŸŸåè½¬å…¥ç¡®è®¤é‚®ä»¶ï¼Œæ„ŸåŠ¨åˆ°å“­ã€‚
èµ¶ç´§è®¾ç½®äº†è§£æï¼Œæµ‹è¯•èƒ½ä¸èƒ½ä½¿ç”¨ã€‚å‡ åˆ†é’Ÿåï¼Œwww.voidking.comç»ˆäºå¯ä»¥æ­£å¸¸è®¿é—®äº†ï¼æœ¬æ¬¡å†æ—¶è¿‘äº”ä¸ªæœˆçš„clientholdäº‹ä»¶ï¼Œç»ˆäºåœ†æ»¡è§£å†³ã€‚
æ™šä¸Šï¼Œæ›´æ¢äº†dnspodä½œä¸ºdnsæœåŠ¡å™¨ã€‚è§£ææ­£å¸¸ï¼Œè”é€š4gå¯ä»¥æ­£å¸¸è®¿é—®ï¼Œä½†æ˜¯ä¸­ç§‘é™¢çš„ç½‘ç»œå´ä¸å¯ä»¥è®¿é—®ã€‚å¾ˆå¥‡æ€ªï¼Œåæ¥åœ¨ç½‘ç«™åŸŸåè§£æä¹‹åä¸ºä»€ä¹ˆæœ‰äº›åœ°æ–¹è¿˜æ˜¯ä¸èƒ½è®¿é—®ï¼Ÿè¿™ç¯‡çŸ­æ–‡ä¸­æ‰¾åˆ°äº†ç­”æ¡ˆï¼šæœ‰äº›ç«™é•¿åœ¨åšç½‘ç«™åŸŸåè§£æçš„æ—¶å€™ï¼Œä¼šé‡è§è¿™æ ·çš„é—®é¢˜ï¼Œç½‘ç«™åŸŸåè§£æä¹‹åä¸ºä»€ä¹ˆæœ‰äº›åœ°æ–¹è¿˜æ˜¯ä¸èƒ½è®¿é—®ï¼Ÿè¿™ä¸ªæ˜¯ç”±äºå„åœ°ç”µä¿¡æˆ–ç½‘ç»œæä¾›éƒ¨é—¨çš„DNSåˆ·æ–°é¢‘ç‡ä¸ä¸€æ ·ï¼Œå› æ­¤ï¼Œå…¨çƒåŸŸååˆ·æ–°æœ‰8-72å°æ—¶çš„è¯¯å·®ï¼Œå¦‚æœæ‚¨åˆšåšå®Œè§£æï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½å‡ºç°æŸäº›åœ°æ–¹æš‚æ—¶è¿˜ä¸èƒ½è®¿é—®çš„æƒ…å†µï¼Œè¿™æ˜¯æ­£å¸¸çš„ã€‚
åè®°åŸæœ¬ï¼Œåœ¨ç™¾åº¦æœç´¢â€œvoidkingâ€ï¼ŒåŸºæœ¬éƒ½æ˜¯éƒåŒå­¦ç½‘ç«™ä¸Šçš„æ–‡ç« ã€‚è€Œç°åœ¨ï¼Œéƒ½æ˜¯éƒåŒå­¦åœ¨å„å¤§åšå®¢ç½‘ç«™ä¸Šçš„æ–‡ç« ï¼Œæ’åä¸‹é™äº†å¤ªå¤šï¼Œä»å¤´å†æ¥å§ã€‚æ—©çŸ¥é“åŸŸåè½¬ç§»å¯ä»¥è§£å†³clientholdï¼Œå°±ä¸ç”¨è¿™ä¹ˆå¤šæŠ˜è…¾äº†ã€‚æ—©çŸ¥é“ï¼Œå¤šå¥½ã€‚å†™ä¸‹æœ¬ç¯‡åšå®¢ï¼Œå¸Œæœ›èƒ½ç»™é‡åˆ°åŒæ ·é—®é¢˜çš„åŒå­¦æä¾›ä¸€äº›å¸®åŠ©ï¼Œå°‘èµ°ä¸€äº›å¼¯è·¯ã€‚
ä¹¦ç­¾åŸŸåè¢«é”å®šå†»ç»“ï¼ˆåŸŸåè¢« holdï¼‰çš„åŸå› åŠè§£é”
è¿æ³•è¿è§„ä¿¡æ¯å¤„ç†æ–¹æ¡ˆ
è¿æ³•ä¿¡æ¯å¤„ç½®FAQ
]]></content>
      <categories>
        <category>essay</category>
      </categories>
      <tags>
        <tag>åŸŸå</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ ç›¸å…³åŸåˆ™ä¸æ–¹æ³•</title>
    <url>/dev-ml-principle-and-method/</url>
    <content><![CDATA[å‰è¨€è¶Šå­¦ä¹ ï¼Œè¶Šå‘ç°è‡ªå·±çš„æ— çŸ¥ã€‚â€”â€”ç¬›å¡å°”ç¬›å¡å°”çš„è¿™å¥è¯ï¼Œç”¨åœ¨éƒåŒå­¦å­¦ä¹ æœºå™¨å­¦ä¹ çš„è¿›å±•ï¼Œåˆšå¥½åˆé€‚ã€‚ä»å¼€å§‹ææœºå™¨å­¦ä¹ åˆ°ç°åœ¨ï¼Œä¸€å¹´å¤šäº†ï¼Œå­¦ä¹ äº†å¾ˆå¤šè¯¾ç¨‹ï¼ŒæŸ¥é˜…äº†å¾ˆå¤šæ–‡æ¡£ï¼Œé˜…è¯»äº†å¾ˆå¤šä¹¦ç±ï¼Œç¼–å†™äº†å¾ˆå¤šä»£ç ï¼Œç„¶è€Œï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå®è´¨æ€§çš„è¿›å±•ã€‚æ²¡æœ‰ä»»ä½•å¯ä»¥æ‹¿å¾—å‡ºæ‰‹çš„æˆç»©ï¼Œå¯ä»¥è®©é¢è¯•å®˜çœ¼å‰ä¸€äº®ã€‚å¯’å‡äº†ï¼Œç»§ç»­â€œææœºâ€ï¼Œå‚åŠ kaggleå’Œå¤©æ± ï¼Œè¾¹æ¯”èµ›è¾¹å­¦ä¹ ï¼Œå­¦ä»¥è‡´ç”¨ï¼Œä¸ºè‡ªå·±ä¹¦å†™ä¸€ä»½ä¼˜ç§€çš„ç®€å†ã€‚
æ¥ä¸‹æ¥ä¸€æ®µæ—¶é—´ï¼ŒéƒåŒå­¦ä¼šå‚è€ƒä¸ƒæœˆåœ¨çº¿çš„ã€ŠKaggleæ¡ˆä¾‹å®æˆ˜ç­ã€‹æ•™ç¨‹ï¼Œé€‰æ‹©ä¸€äº›é¡¹ç›®è¿›è¡Œå®æˆ˜ã€‚


é—®é¢˜è§£å†³æµç¨‹1ã€äº†è§£åœºæ™¯å’Œç›®æ ‡2ã€äº†è§£è¯„ä¼°å‡†åˆ™3ã€è®¤è¯†æ•°æ®4ã€æ•°æ®é¢„å¤„ç†ï¼ˆæ¸…æ´—ï¼Œè°ƒæƒï¼‰5ã€ç‰¹å¾å·¥ç¨‹6ã€æ¨¡å‹é€‰æ‹©7ã€æ¨¡å‹è°ƒå‚ï¼ˆé€‰æ‹©æœ€ä½³è¶…å‚æ•°ï¼šäº¤å‰éªŒè¯ï¼‰8ã€æ¨¡å‹çŠ¶æ€åˆ†æ9ã€æ¨¡å‹èåˆ
äº†è§£åœºæ™¯å’Œç›®æ ‡1ã€è¿™æ˜¯ä¸€ä¸ªä»€ä¹ˆæ ·çš„é—®é¢˜ï¼Ÿ2ã€å¯ä»¥é‡‡é›†åˆ°å“ªäº›æ•°æ®ï¼Ÿ3ã€éœ€è¦å®Œæˆä»€ä¹ˆæ ·çš„ç›®æ ‡ï¼Ÿ
äº†è§£è¯„ä¼°æ ‡å‡†https://www.kaggle.com/wiki/Metrics
è®¤è¯†æ•°æ®ç¼–ç¨‹æ˜¾ç¤ºå‡ºå‰å‡ è¡Œã€å‰å‡ åˆ—ï¼Œè§‚å¯Ÿç‰¹ç‚¹ã€‚
1ã€æ•°æ®æœ‰å“ªäº›ç»´åº¦ï¼Ÿ2ã€æ•°æ®æ˜¯ä¸æ˜¯åˆ†å¸ƒå¹³è¡¡ï¼Ÿ3ã€æ•°æ®æ˜¯ä¸æ˜¯æœ‰ç¼ºçœå€¼ï¼Ÿ
æ•°æ®é¢„å¤„ç†1ã€æ•°æ®æ¸…æ´—

ä¸å¯ä¿¡çš„æ ·æœ¬ä¸¢æ‰
ç¼ºçœå€¼æå¤šçš„å­—æ®µè€ƒè™‘ä¸ç”¨

2ã€æ•°æ®é‡‡æ ·

ä¸Š/ä¸‹é‡‡æ ·
ä¿è¯æ ·æœ¬å‡è¡¡ï¼ˆåŠ æƒï¼‰
baggingï¼Œvote

3ã€å·¥å…·

hive sql/spark sql
pandas

ç‰¹å¾å·¥ç¨‹
1ã€ç‰¹å¾å¤„ç†

æ•°å€¼å‹
ç±»åˆ«å‹
æ—¶é—´ç±»ï¼ˆç¦»æ•£å‹ï¼Œé—´éš”å‹ï¼Œç»„åˆå‹ï¼‰
æ–‡æœ¬ç±»ï¼ˆn-gramï¼Œbag of wordsï¼Œtf-idfï¼Œword2vecï¼‰
ç»Ÿè®¡å‹
ç»„åˆç‰¹å¾

2ã€ç‰¹å¾æŠ½å–
http://scikit-learn.org/stable/modules/preprocessing.html
http://scikit-learn.org/stable/modules/classes.html#module-sklearn.feature_extraction
3ã€ç‰¹å¾é€‰æ‹©http://scikit-learn.org/stable/modules/feature_selection.html
è¿‡æ»¤å‹ï¼šsklearn.feature_selection.SelectKBestÂåŒ…è£¹å‹ï¼šsklearn.feature_selection.RFEÂåµŒå…¥å‹ï¼šfeature_selection.SelectFromModelï¼ŒLinear modelï¼ŒL1æ­£åˆ™åŒ– 
æ¨¡å‹é€‰æ‹©

sklearn cheat-sheetæä¾›çš„å€™é€‰ 
è¯¾ç¨‹æ¡ˆä¾‹ç»éªŒ 
äº¤å‰éªŒè¯ï¼ˆcross validationï¼‰ï¼šKæŠ˜äº¤å‰éªŒè¯ï¼ˆK-fold cross validationï¼‰ã€Cross-validation: evaluating estimator performance

æ¨¡å‹å‚æ•°é€‰æ‹©äº¤å‰éªŒè¯ï¼š

Tuning the hyper-parameters of an estimator
sklearn.model_selection.GridSearchCV

æ¨¡å‹çŠ¶æ€è¯„ä¼°1ã€æ¨¡å‹çŠ¶æ€è¿‡æ‹Ÿåˆè¿˜æ˜¯æ¬ æ‹Ÿåˆ
2ã€å­¦ä¹ æ›²çº¿ï¼ˆlearning curveï¼‰
3ã€ç»˜åˆ¶å­¦ä¹ æ›²çº¿ï¼ˆplot learning curveï¼‰
æ¨¡å‹èåˆ1ã€ç¾¤ä¼—çš„åŠ›é‡æ˜¯ä¼Ÿå¤§çš„ï¼Œé›†ä½“æ™ºæ…§æ˜¯æƒŠäººçš„ï¼ˆ1ï¼‰Baggingï¼ˆ2ï¼‰éšæœºæ£®æ—/Random forest 
2ã€ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œèƒ½çœ‹å¾—æ›´è¿œï¼ˆ1ï¼‰æ¨¡å‹stacking 
3ã€ä¸€ä¸‡å°æ—¶å®šå¾‹ï¼ˆ1ï¼‰Adaboostï¼ˆ2ï¼‰é€æ­¥å¢å¼ºæ ‘/Gradient Boosting Tree
Bagging1ã€æ¨¡å‹å¾ˆå¤šæ—¶å€™æ•ˆæœä¸å¥½çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆ1ï¼‰è¿‡æ‹Ÿåˆå•¦ï¼ï¼ï¼
2ã€å¦‚ä½•ç¼“è§£ï¼Ÿï¼ˆ1ï¼‰å°‘ç»™ç‚¹é¢˜ï¼Œåˆ«è®©å®ƒæ­»è®°ç¡¬èƒŒè¿™ä¹ˆå¤šä¸œè¥¿ï¼ˆ2ï¼‰å¤šæ‰¾å‡ ä¸ªåŒå­¦æ¥åšé¢˜ï¼Œç»¼åˆä¸€ä¸‹ä»–ä»¬çš„ç­”æ¡ˆ
3ã€sklearn.ensemble.BaggingClassifier
ï¼ˆ1ï¼‰ç”¨ä¸€ä¸ªç®—æ³•ä¸ç”¨å…¨éƒ¨çš„æ•°æ®é›†ï¼Œæ¯æ¬¡å–ä¸€ä¸ªå­é›†è®­ç»ƒä¸€ä¸ªæ¨¡å‹åˆ†ç±»ï¼šç”¨è¿™äº›æ¨¡å‹çš„ç»“æœåšvoteå›å½’ï¼šå¯¹è¿™äº›æ¨¡å‹çš„ç»“æœå–å¹³å‡
ï¼ˆ2ï¼‰ç”¨ä¸åŒçš„ç®—æ³•ç”¨è¿™äº›æ¨¡å‹çš„ç»“æœåšvote æˆ– æ±‚å¹³å‡
Stackingç”¨å¤šç§predictorç»“æœä½œä¸ºç‰¹å¾è®­ç»ƒ
Boostingè€ƒå¾—ä¸å¥½çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆ1ï¼‰è¿˜ä¸å¤ŸåŠªåŠ›ï¼Œç»ƒä¹ é¢˜è¦å¤šæ¬¡å­¦ä¹ è§£å†³åŠæ³•ï¼šé‡å¤è¿­ä»£å’Œè®­ç»ƒï¼ˆ2ï¼‰æ—¶é—´åˆ†é…è¦åˆç†ï¼Œè¦å¤šç»ƒä¹ ä¹‹å‰åšé”™çš„é¢˜è§£å†³åŠæ³•ï¼šæ¯æ¬¡åˆ†é…ç»™åˆ†é”™çš„æ ·æœ¬æ›´é«˜çš„æƒé‡ï¼ˆ3ï¼‰æˆ‘ä¸èªæ˜ï¼Œä½†æ˜¯è„šè¸å®åœ°ï¼Œç”¨æœ€ç®€å•çš„çŸ¥è¯†ä¸æ–­ç§¯ç´¯ï¼Œæˆä¸ºä¸“å®¶è§£å†³åŠæ³•ï¼šæœ€ç®€å•çš„åˆ†ç±»å™¨çš„å åŠ 
Ensemble Methods
åŸåˆ™å’ŒæŠ€å·§1ã€ç”»å‡ºæ•°æ®2ã€ç®€å•å®ç°3ã€ç”»å‡ºå›¾è¡¨4ã€æ ¹æ®å›¾è¡¨ä¼˜åŒ–

æ•°æ®çš„é‡è¦æ€§è¶…è¿‡æ¨¡å‹ã€‚

æ³¨æ„ç‚¹ä¸æ ¸å¿ƒæ€è·¯1ã€æ‹¿åˆ°æ•°æ®åæ€ä¹ˆäº†è§£æ•°æ®ï¼ˆå¯è§†åŒ–ï¼‰2ã€é€‰æ‹©æœ€è´´åˆ‡çš„æœºå™¨å­¦ä¹ ç®—æ³•3ã€å®šä½æ¨¡å‹çŠ¶æ€ï¼ˆè¿‡/æ¬ æ‹Ÿåˆï¼‰ä»¥åŠè§£å†³æ–¹æ³•4ã€å¤§é‡çº§çš„æ•°æ®çš„ç‰¹å¾åˆ†æä¸å¯è§†åŒ–5ã€å„ç§æŸå¤±å‡½æ•°ï¼ˆloss functionï¼‰çš„ä¼˜ç¼ºç‚¹åŠå¦‚ä½•é€‰æ‹©
ä¹¦ç­¾æœºå™¨å­¦ä¹ ç³»åˆ—(4)_æœºå™¨å­¦ä¹ ç®—æ³•ä¸€è§ˆï¼Œåº”ç”¨å»ºè®®ä¸è§£å†³æ€è·¯
æœºå™¨å­¦ä¹ ç³»åˆ—(19)_é€šç”¨æœºå™¨å­¦ä¹ æµç¨‹ä¸é—®é¢˜è§£å†³æ¶æ„æ¨¡æ¿
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>kaggle</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»£ç†æœåŠ¡æ¦‚è¿°</title>
    <url>/dev-proxy-server/</url>
    <content><![CDATA[ä»£ç†æœåŠ¡ç®€ä»‹
ä»£ç†ï¼ˆProxyï¼‰ä¹Ÿç§°ç½‘ç»œä»£ç†ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„ç½‘ç»œæœåŠ¡ï¼Œå…è®¸ä¸€ä¸ªç»ˆç«¯ï¼ˆä¸€èˆ¬ä¸ºå®¢æˆ·ç«¯ï¼‰é€šè¿‡è¿™ä¸ªæœåŠ¡ä¸å¦ä¸€ä¸ªç»ˆç«¯ï¼ˆä¸€èˆ¬ä¸ºæœåŠ¡å™¨ï¼‰è¿›è¡Œéç›´æ¥çš„è¿æ¥ã€‚

é€šä¿¡åŒæ–¹åŸæœ¬å¯ä»¥ç›´æ¥é€šä¿¡ï¼Œä¸ºä»€ä¹ˆéœ€è¦åŠ ä¸€å±‚ä»£ç†ï¼Ÿå› ä¸ºä»£ç†å¯ä»¥ä¸ºæ•´ä¸ªé€šä¿¡å¸¦æ¥æ›´å¤šçš„åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼š

æ‹¦æˆªï¼šä»£ç†å¯ä»¥é€‰æ‹©æ€§æ‹¦æˆªä¼ è¾“çš„ç½‘ç»œæµé‡ï¼Œæ¯”å¦‚ä¸€äº›å…¬å¸é™åˆ¶å‘˜å·¥åœ¨ä¸Šç­çš„æ—¶å€™ä¸èƒ½è®¿é—®æŸäº›æ¸¸æˆæˆ–è€…ç”µå•†ç½‘ç«™ï¼Œå†æ¯”å¦‚æŠŠæˆ‘ä»¬å’Œä¸–ç•Œéš”ç¦»å¼€æ¥çš„ GFWï¼Œè¿˜æœ‰åœ¨æ•°æ®ä¸­å¿ƒä¸­æ‹’ç»æ¶æ„è®¿é—®çš„ç½‘å…³
ç»Ÿè®¡ï¼šæ—¢ç„¶æ‰€æœ‰çš„æµé‡éƒ½ç»è¿‡ä»£ç†ï¼Œé‚£ä¹ˆä»£ç†ä¹Ÿå¯ä»¥ç”¨æ¥ç»Ÿè®¡ç½‘ç»œä¸­çš„æ•°æ®ä¿¡æ¯ï¼Œæ¯”å¦‚äº†è§£å“ªäº›äººåœ¨è®¿é—®å“ªäº›ç½‘ç«™ï¼Œé€šä¿¡çš„åº”ç­”å»¶è¿Ÿç­‰
ç¼“å­˜ï¼šå¦‚æœé€šä¿¡åŒæ–¹æ¯”è¾ƒâ€è¿œâ€œï¼Œè®¿é—®æ¯”è¾ƒæ…¢ï¼Œé‚£ä¹ˆä»£ç†å¯ä»¥æŠŠæœ€è¿‘è®¿é—®çš„æ•°æ®ç¼“å­˜åœ¨æœ¬åœ°ï¼Œåé¢çš„è®¿é—®ä¸ç”¨è®¿é—®åç«¯æ¥åšåˆ°åŠ é€Ÿã€‚CDN å°±æ˜¯è¿™ä¸ªåŠŸèƒ½çš„å…¸å‹åœºæ™¯
åˆ†å‘ï¼šå¦‚æœæŸä¸ªé€šä¿¡æ–¹æœ‰å¤šä¸ªæœåŠ¡å™¨åç«¯ï¼Œä»£ç†å¯ä»¥æ ¹æ®æŸäº›è§„åˆ™æ¥é€‰æ‹©å¦‚ä½•æŠŠæµé‡å‘é€ç»™å¤šä¸ªæœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„è´Ÿè½½å‡è¡¡åŠŸèƒ½ã€‚æ¯”å¦‚è‘—åçš„ Nginx è½¯ä»¶
è·³æ¿ï¼šå¦‚æœ Aã€B åŒæ–¹å› ä¸ºæŸäº›åŸå› ä¸èƒ½ç›´æ¥è®¿é—®ï¼Œè€Œä»£ç†å¯ä»¥å’ŒåŒæ–¹é€šä¿¡ï¼Œé‚£ä¹ˆé€šè¿‡ä»£ç†ï¼ŒåŒæ–¹å¯ä»¥ç»•è¿‡åŸæ¥çš„é™åˆ¶è¿›è¡Œé€šä¿¡ã€‚è¿™åº”è¯¥å¹¿å¤§ä¸­å›½ç½‘æ°‘æ¯”è¾ƒç†Ÿæ‚‰çš„åœºæ™¯
æ³¨å…¥ï¼šæ—¢ç„¶ä»£ç†å¯ä»¥çœ‹åˆ°æµé‡ï¼Œé‚£ä¹ˆå®ƒä¹Ÿå¯ä»¥ä¿®æ”¹ç½‘ç»œæµé‡ï¼Œå¯ä»¥è‡ªåŠ¨åœ¨æ”¶åˆ°çš„æµé‡ä¸­æ·»åŠ ä¸€äº›æ•°æ®ï¼Œæ¯”å¦‚æœ‰äº›å®½å¸¦æä¾›å•†çš„å¼¹çª—å¹¿å‘Š

å‚è€ƒæ–‡æ¡£ï¼š

Proxy server
ä»£ç†æœåŠ¡å™¨
Istio æ˜¯å•¥ï¼Ÿä¸€æ–‡å¸¦ä½ å½»åº•äº†è§£



æ­£å‘ä»£ç†å’Œåå‘ä»£ç†æ­£å‘ä»£ç†å’Œåå‘ä»£ç†çš„ä¸åŒï¼Œå…³é”®åœ¨äºâ€œä»£ç†â€è¿™ä¸ªå®¶ä¼™çš„æ‰€æœ‰æƒã€‚å‡è®¾æˆ‘è¦å»å°æ˜é‚£é‡Œæ‹¿æ–‡ä»¶ï¼Œè¿™æ—¶å¯ä»¥æœ‰ä¸¤ç§æƒ…å†µã€‚æ­£å‘ä»£ç†ï¼šæˆ‘å§”æ‰˜è‡ªå·±çš„ç§˜ä¹¦ï¼ˆä»£ç†ï¼‰å»æ‰¾å°æ˜æ‹¿æ–‡ä»¶ã€‚åå‘ä»£ç†ï¼šæˆ‘å»æ‰¾å°æ˜æ‹¿æ–‡ä»¶ï¼Œå°æ˜å§”æ‰˜ä»–çš„ç§˜ä¹¦ï¼ˆä»£ç†ï¼‰æŠŠæ–‡ä»¶äº¤ç»™æˆ‘ã€‚
åŒæ ·çš„ï¼Œåœ¨ç½‘ç»œä¸–ç•Œä¸­ï¼Œæ­£å‘ä»£ç†å°±æ˜¯è‡ªå·±çš„ç§˜ä¹¦ï¼Œè‡ªå·±æ˜¯éšè—çš„ï¼Œä¸éœ€è¦äº²è‡ªå‡ºé©¬ï¼Œç§˜ä¹¦å¸®åŠ©è‡ªå·±å‘é€è¯·æ±‚è·å–æ•°æ®ï¼Œä½ è¦ç»™ä»–å¼€å·¥èµ„ï¼ˆä¹°VPNï¼Œåšä¸€äº›è®¾ç½®ç­‰ï¼‰ã€‚
åå‘ä»£ç†å°±æ˜¯æœåŠ¡å™¨çš„ç§˜ä¹¦ï¼ŒæœåŠ¡å™¨å§”æ‰˜è‡ªå·±çš„ç§˜ä¹¦æ¥æ”¶è¯·æ±‚ã€‚ç§˜ä¹¦æ‹¿åˆ°è¯·æ±‚åäº¤ç»™æœåŠ¡å™¨å¤„ç†ï¼ŒæœåŠ¡å™¨å¤„ç†å®Œæˆåå†äº¤ç»™ç§˜ä¹¦ã€‚ç§˜ä¹¦æŠŠæ‹¿åˆ°çš„ç»“æœè¿”å›ç»™ç”¨æˆ·ï¼Œå¹¶ä¸”å¾ˆå¾—æ„åœ°å‘Šè¯‰ç”¨æˆ·ï¼šæˆ‘å°±æ˜¯æœåŠ¡å™¨ã€‚
å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå¤šä¸ªæœåŠ¡å™¨ä¼šå…±ç”¨ä¸€ä¸ªç§˜ä¹¦ï¼ˆåå‘ä»£ç†Nginxï¼‰ï¼Œè¿™ä¸ªç§˜ä¹¦åŒæ—¶å†’å……ç€å¾ˆå¤šæœåŠ¡å™¨ï¼Œä¸€ä¼šè¯´æˆ‘æ˜¯TomcatæœåŠ¡å™¨ï¼Œä¸€ä¼šè¯´æˆ‘æ˜¯PHPæœåŠ¡å™¨ï¼Œä¸€ä¼šåˆè¯´æˆ‘æ˜¯DjangoæœåŠ¡å™¨ã€‚è¿™ä¸ªç§˜ä¹¦è¿˜å¾ˆæœºæ™ºï¼Œæœ‰çš„è¯·æ±‚å¤šä¸ªTomcatæœåŠ¡å™¨éƒ½èƒ½å¤„ç†ï¼Œä»–ä¼šé€åˆ°ç©ºé—²çš„é‚£ä¸ªæ¥å¤„ç†ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ã€‚
å¼•ç”¨è‡ªéƒåŒå­¦è‡ªå·±çš„å›ç­”ï¼šåå‘ä»£ç†ä¸ºä½•å«åå‘ä»£ç†ï¼Ÿ
]]></content>
      <categories>
        <category>engineering</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œ</tag>
        <tag>ä»£ç†</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoéƒ¨ç½²åˆ°çº¿ä¸Šï¼ˆä¿®æ”¹ç‰ˆï¼‰</title>
    <url>/dev-django-deploy-advance/</url>
    <content><![CDATA[å‰è¨€ã€ŠDjangoéƒ¨ç½²åˆ°çº¿ä¸Šã€‹ä¸€æ–‡ä¸­ï¼Œå¾ˆå¤šæ­¥éª¤ä¸æ˜¯å¿…é¡»çš„ï¼Œæœ‰äº›éƒ¨åˆ†ç”šè‡³æ˜¯é”™è¯¯çš„ï¼Œæœ¬æ–‡å°±ç²¾ç®€ä¿®æ”¹ä¸€ä¸‹ã€‚ç›®æ ‡ï¼šæŠŠdjsiteé¡¹ç›®éƒ¨ç½²åˆ°/home/webç›®å½•ä¸­ï¼Œå¹¶ä¸”ç»™å®ƒåˆ†é…ä¸€ä¸ªåŸŸåä¸ºdjsite.voidking.comã€‚


ç¯å¢ƒå‡†å¤‡supervisorå‚è€ƒã€ŠCentOSå®‰è£…é…ç½®Supervisorã€‹ï¼Œå®‰è£…é…ç½®å¥½supervisorã€‚
pythonè™šæ‹Ÿæœºå‚è€ƒã€ŠCentOSå®‰è£…é…ç½®pyenvã€‹ï¼Œå®‰è£…å¥½python3.6.1ã€‚
é¡¹ç›®éƒ¨ç½²ä»£ç å‡†å¤‡1ã€åœ¨/home/webç›®å½•ä¸­ï¼Œæ‰§è¡Œå‘½ä»¤å…‹éš†é¡¹ç›®git clone https://github.com/voidking/djsite.git
2ã€å®‰è£…djangopip install django==1.11.7
3ã€å®‰è£…pymysqlpip install pymysql
æ•°æ®åº“å‡†å¤‡1ã€åˆ›å»ºæ•°æ®åº“
# mysql -uroot -pmysql&gt; create database `djsite` default character set utf8 collate utf8_general_ci; 

2ã€ä¿®æ”¹mysqlçš„binlogæ ¼å¼ä¸ºæ··åˆæ¨¡å¼ï¼š
mysql&gt; set global binlog_format=mixed;mysql&gt; exit;

3ã€ä¿®æ”¹djsite/djsite/settings.pyä¸­çš„æ•°æ®åº“é…ç½®vim djsite/djsite/settings.py
4ã€åˆ›å»ºè¡¨ç»“æ„
python manage.py makemigrationspython manage.py migrate

å¯åŠ¨é¡¹ç›®1ã€å¯åŠ¨å‘½ä»¤python manage.py runserver
2ã€æœåŠ¡å™¨æµ‹è¯•è®¿é—®curl localhost:8000/blog/index
3ã€æœ¬åœ°æµ‹è¯•è®¿é—®ä½¿ç”¨æµè§ˆå™¨æŸ¥çœ‹ http://ip:8000/blog/index ï¼Œæ— æ³•è®¿é—®ã€‚å¯åŠ¨å‘½ä»¤æ”¹ä¸ºï¼špython manage.py runserver 0.0.0.0:8000ï¼Œæ­¤æ—¶å³å¯åœ¨æµè§ˆå™¨çœ‹åˆ°éƒ¨ç½²å¥½çš„é¡¹ç›®ã€‚
å¦‚æœè¿˜æ˜¯ä¸èƒ½è®¿é—®ï¼Œå°è¯•å…ˆå…³é—­é˜²ç«å¢™ï¼šsystemctl stop firewalld
nginxé…ç½®1ã€é¦–å…ˆï¼Œåœ¨ä¸‡ç½‘ä¸Šé…ç½®åŸŸåè§£æï¼Œæ·»åŠ Aè®°å½•ï¼Œè§£æåˆ°é˜¿é‡Œäº‘æœåŠ¡å™¨IPã€‚å‡è®¾è§£æå¥½çš„åŸŸåä¸ºdjango.voidking.comã€‚
2ã€åœ¨nginxçš„vhostä¸­ï¼Œæ·»åŠ django.voidking.com.confï¼Œå†…å®¹ä¸ºï¼š
server &#123;    listen 80;    server_name django.voidking.com;    charset utf-8;    location /&#123;        proxy_set_header   Host             $host;        proxy_set_header   X-Real-IP        $remote_addr;        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;        client_max_body_size       1024m;        client_body_buffer_size    128k;        client_body_temp_path      data/client_body_temp;        proxy_connect_timeout      90;        proxy_send_timeout         90;        proxy_read_timeout         90;        proxy_buffer_size          4k;        proxy_buffers              4 32k;        proxy_busy_buffers_size    64k;        proxy_temp_file_write_size 64k;        proxy_temp_path            data/proxy_temp;        proxy_pass http://127.0.0.1:8000;    &#125;&#125;

3ã€é‡å¯nginxï¼Œ./nginx -s reload
4ã€æµ‹è¯•è®¿é—®æœåŠ¡å™¨ï¼šcurl django.voidking.com/blog/indexæœ¬åœ°æµè§ˆå™¨ï¼šhttp://django.voidking.com/blog/index
è‡³æ­¤ï¼Œdjangoé¡¹ç›®å·²ç»éƒ¨ç½²æˆåŠŸï¼Œæ²¡æœ‰ç”¨åˆ°uwsgiã€‚å¦‚æœç»™djangoæ·»åŠ å®ˆæŠ¤è¿›ç¨‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„éƒ¨ç½²å°±æ¥è¿‘å®Œç¾äº†ã€‚é‚£ä¹ˆï¼Œuwsgiåˆèƒ½å¹²ä»€ä¹ˆå‘¢ï¼Œæˆ‘ä»¬ç»§ç»­ç ”ç©¶ã€‚
uwsgiå®‰è£…uwsgipip install uwsgi
ç¼–å†™æµ‹è¯•ï¼š
# test.pydef application(env, start_response):    start_response(&#x27;200 OK&#x27;, [(&#x27;Content-Type&#x27;,&#x27;text/html&#x27;)])    return [b&quot;Hello World&quot;]

å¯åŠ¨æµ‹è¯•ï¼šuwsgi --http :8001 --wsgi-file test.py
è®¿é—® http://ip:8001 ï¼Œå³å¯çœ‹åˆ°Hello World ã€‚
ä¸€èˆ¬å¯åŠ¨1ã€ç¼–å†™wsgi.pyæ–‡ä»¶ç¼–å†™django_wsgi.pyæ–‡ä»¶ï¼Œå°†å…¶æ”¾åœ¨ä¸æ–‡ä»¶manage.pyåŒä¸€ä¸ªç›®å½•ä¸‹ã€‚
#!/usr/bin/env python# coding: utf-8import os,djangofrom django.core.handlers.wsgi import WSGIHandleros.environ.setdefault(&quot;DJANGO_SETTINGS_MODULE&quot;, &quot;djsite.settings&quot;)django.setup()application = WSGIHandler()

2ã€å¯åŠ¨é¡¹ç›®uwsgi --http :8000 --chdir /home/web/djsite/ --module django_wsgi
3ã€æŸ¥çœ‹å¯åŠ¨ç»“æœlsof -i :8000ï¼Œps aux | grep uwsgi
4ã€æµ‹è¯•è®¿é—®http://ip:8000/blog/indexæ­¤æ—¶ï¼Œé¡µé¢æ˜¯æ²¡æœ‰æ ·å¼çš„ï¼Œä¹Ÿå°±æ˜¯è¯´é™æ€èµ„æºåŠ è½½å¤±è´¥ã€‚
5ã€é…ç½®é™æ€èµ„æºuwsgi --http :8000 --chdir /home/web/djsite/ --module django_wsgi --static-map=/static=staticæ­¤æ—¶ï¼Œé¡µé¢æ ·å¼å°±æ­£å¸¸äº†ã€‚
é«˜çº§å¯åŠ¨1ã€æ–°å»ºuwsgi.iniï¼Œä¸manage.pyåœ¨åŒä¸€çº§ç›®å½•ã€‚
[uwsgi]http = :8000chdir = /home/web/djsite/wsgi-file = django_wsgi.pystatic-map = /static=static

2ã€å¯åŠ¨uwsgiuwsgi uwsgi.ini
3ã€æµ‹è¯•è®¿é—®http://ip:8000/blog/index
ä½¿ç”¨supervisorç®¡ç†å®ˆæŠ¤uwsgi1ã€åœ¨/etc/supervisorä¸­æ–°å»ºdjsite.confæ–‡ä»¶ï¼š
[program:djsite]command=/root/.pyenv/versions/3.6.1/bin/uwsgi --http :8000 --chdir /home/web/djsite/ --module django_wsgi --static-map=/static=staticdirectory=/home/web/djsite/startsecs=0stopwaitsecs=0autostart=trueautorestart=true

2ã€é‡å¯supervisor
ps aux | grep supervisordsystemctl stop supervisordsystemctl start supervisord

é™„ï¼šé‡å¯djsiteå‘½ä»¤
supervisorctl -c /etc/supervisord.conf restart djsite

3ã€æµ‹è¯•è®¿é—®http://ip:8000/blog/indexé¡µé¢æ˜¾ç¤ºæ­£å¸¸ï¼Œè‡³æ­¤å®ˆæŠ¤è¿›ç¨‹é…ç½®æˆåŠŸã€‚
4ã€djsite.confå¯ä»¥ç²¾ç®€ä¿®æ”¹ä¸ºï¼š
[program:djsite]command=/root/.pyenv/versions/3.6.1/bin/uwsgi --ini uwsgi.inidirectory=/home/web/djsite/startsecs=0stopwaitsecs=0autostart=trueautorestart=true

é™æ€èµ„æºé—®é¢˜ï¼ˆå¯å¿½ç•¥ï¼‰å‡è®¾ï¼Œuwsgi.iniä¸ºï¼š
[uwsgi]http = :8000chdir = /home/web/djsite/wsgi-file = django_wsgi.py

é™æ€èµ„æºå°±æ— æ³•è®¿é—®äº†ã€‚åœ¨ä¸æ·»åŠ static-mapçš„æƒ…å†µä¸‹ï¼Œéœ€è¦ä¿®æ”¹ä¸¤ä¸ªæ–‡ä»¶ï¼šï¼ˆ1ï¼‰ä¿®æ”¹djsite/djsite/settings.pyæ–‡ä»¶ï¼Œæ·»åŠ ï¼š
STATIC_ROOT = &#x27;/home/web/djsite/static/&#x27;
ï¼ˆ2ï¼‰ä¿®æ”¹djsite/djsite/settings.pyæ–‡ä»¶ä¸ºï¼š
from django.conf.urls import url,includefrom django.contrib import adminfrom django.conf.urls.static import staticfrom django.conf import settingsurlpatterns = [    url(r&#x27;^admin/&#x27;, admin.site.urls),    url(r&#x27;^blog/&#x27;, include(&#x27;blog.urls&#x27;, namespace=&#x27;blog&#x27;)),] + static(settings.STATIC_URL, document_root=settings.STATIC_ROOT)

adminé™æ€èµ„æºé—®é¢˜å¦‚æœä»¥python manage.py runserverå¯åŠ¨djangoï¼Œé‚£ä¹ˆé™æ€èµ„æºæ²¡æœ‰é—®é¢˜ã€‚
å¦‚æœä»¥uwsgiå¯åŠ¨djangoï¼Œé™æ€èµ„æºçœ‹èµ·æ¥æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ï¼Œå¦‚æœè®¿é—® http://ip:8000/admin ï¼Œå°±ä¼šå‘ç°è¿™ä¸ªé¡µé¢çš„é™æ€èµ„æºæ— æ³•è·å–ã€‚
ä¸€ä¸ªDjangoåº”ç”¨ï¼Œä¸€èˆ¬æœ‰ä¸¤ç±»é™æ€æ–‡ä»¶ã€‚ä¸€æ˜¯åº”ç”¨å†…çš„é™æ€æ–‡ä»¶ï¼ŒäºŒæ˜¯Djangoè‡ªå¸¦çš„é™æ€æ–‡ä»¶ã€‚åº”ç”¨å†…çš„é™æ€æ–‡ä»¶åœ¨djsite/staticç›®å½•ä¸‹ã€‚æ­¤å¤–ï¼Œåœ¨INSTALLED_APPSä¸­é…ç½®äº†django.contrib.adminï¼Œ åˆ™è¿˜ä¼šæœ‰å¦å¤–ä¸€ç»„é™æ€æ–‡ä»¶ï¼Œåœ¨Djangoå®‰è£…ä½ç½®é‡Œã€‚
ä¾‹å¦‚ï¼Œä¸€ä¸ªrootåœ¨Python 3.6ç‰ˆæœ¬å®‰è£…çš„Djangoï¼Œadminçš„é™æ€æ–‡ä»¶åœ¨ï¼š /usr/local/lib/python3.6/site-packages/django/contrib/admin/static/admin/ã€‚
æœ€ç»ˆï¼Œåœ¨STATIC_URLé‡Œï¼Œä¼šæœ‰ä¸¤ç±»é™æ€æ–‡ä»¶ï¼Œ /static/* ä¸ /static/admin/* ã€‚
äº†è§£åŸç†ï¼ŒåŸå› å°±å¾ˆæ˜¾ç„¶äº†ã€‚python manage.py runserverçŸ¥é“é™æ€æ–‡ä»¶çš„ä½ç½®ï¼Œè€ŒuWSGIä¸çŸ¥é“é™æ€æ–‡ä»¶åœ¨ä»€ä¹ˆä½ç½®ã€‚
è§£å†³åŠæ³•å¦‚ä¸‹ï¼šï¼ˆ1ï¼‰ä¿®æ”¹djsite/djsite/settings.pyæ–‡ä»¶ï¼š
SITE_ROOT = os.path.dirname(os.path.abspath(__file__))SITE_ROOT = os.path.abspath(os.path.join(SITE_ROOT, &#x27;../&#x27;))STATIC_ROOT = os.path.join(SITE_ROOT, &#x27;collectedstatic&#x27;)

ï¼ˆ2ï¼‰æ”¶é›†æ‰€æœ‰é™æ€æ–‡ä»¶åˆ°collectedstaticç›®å½•python manage.py collectstatic
ï¼ˆ3ï¼‰ä¿®æ”¹uwsgi.inié…ç½®
[uwsgi]http = :8000chdir = /home/web/djsite/wsgi-file = django_wsgi.pystatic-map = /static=collectedstatic

nginx+uwsgiä»¥ä¸Šï¼Œæˆ‘ä»¬çš„djsiteé¡¹ç›®å·²ç»é€šè¿‡uwsgiæ–¹å¼å¯åŠ¨èµ·æ¥ï¼Œå¹¶ä¸”å¯ä»¥ä¿æŒåå°è¿è¡Œã€‚nginxé…ç½®ä¸æ”¹å˜çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æ­£å¸¸è®¿é—® http://django.voidking.com/blog/index ã€‚æ­¤æ—¶ï¼Œnginxä½œä¸ºåå‘ä»£ç†ï¼Œå’Œuwsgié—´é€šè¿‡httpäº¤äº’ã€‚
æ¥ä¸‹æ¥ï¼Œå°±é…ç½®ä¸‹nginxå’Œuwsgié€šè¿‡socketç»“åˆçš„æ–¹å¼ã€‚åŸç†ï¼šç”¨æˆ·å‘é€httpè¯·æ±‚åˆ°nginxï¼Œnginxé€šè¿‡socketæŠŠè¯·æ±‚äº¤ç»™uwsgiï¼Œuwsgiæ‹¿åˆ°djangoçš„å¤„ç†ç»“æœï¼Œé€šè¿‡socketè¿”è¿˜ç»™nginxï¼Œnginxé€šè¿‡httpè¿”å›ç»“æœç»™ç”¨æˆ·ã€‚
1ã€å› ä¸ºnginxå’Œuwsgié€šè¿‡socketæ–¹å¼äº¤äº’ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹uwsgi.iniçš„é…ç½®ä¸ºï¼š
[uwsgi]socket = :8000chdir = /home/web/djsite/wsgi-file = django_wsgi.pystatic-map = /static=collectedstaticmaster = trueprocesses = 2enable-threads = truedaemonize = /home/web/djsite/uwsgi.log

2ã€é‡å¯supervisorsystemctl stop supervisordsystemctl start supervisord
3ã€ä¿®æ”¹nginxé…ç½®djsite.voidking.com.confï¼š
server &#123;    listen      80;    server_name djsite.voidking.com;    charset     utf-8;    location / &#123;        uwsgi_pass     127.0.0.1:8000;        include        uwsgi_params;    &#125;&#125;

5ã€é‡å¯nginx./nginx -s reload
6ã€æµ‹è¯•è®¿é—®æ­¤æ—¶ï¼Œè®¿é—® http://ip:8000/blog/index å¤±è´¥ï¼Œè®¿é—® http://django.voidking.com/blog/index æ­£å¸¸ã€‚å› ä¸º8000ç«¯å£ä¸å†æä¾›httpæœåŠ¡ï¼Œè€Œæ˜¯ä¸€ä¸ªå’Œnginxè¿æ¥çš„socketã€‚
åŠ é€Ÿé™æ€èµ„æº1ã€ä¿®æ”¹nginxé…ç½®djsite.voidking.com.confï¼š
server &#123;    listen      80;    server_name djsite.voidking.com;    charset     utf-8;    location / &#123;        uwsgi_pass     127.0.0.1:8000;        include        uwsgi_params;    &#125;    location /static &#123;        alias /root/djsite/collectedstatic;    &#125;&#125;

2ã€ä¿®æ”¹nginx.conf
user root;

3ã€é‡å¯nginx./nginx -s reload
å°ç»“è‡³æ­¤ï¼Œdjangoéƒ¨ç½²å®Œæ¯•ï¼Œæˆ‘ä»¬å®ç°äº†ä¸‰ç§éƒ¨ç½²æ–¹æ³•ï¼š

nginx + djangoï¼ˆhttpæ–¹å¼ï¼‰
nginx + uwsgiï¼ˆhttpæ–¹å¼ï¼‰
nginx + uwsgiï¼ˆsocketæ–¹å¼ï¼‰

ä¹¦ç­¾ä½¿ç”¨uWSGIæä¾›é™æ€æ–‡ä»¶ (æ›´æ–°è‡³1.9)
è§£å†³uWSGIé‡Œçš„Djangoé™æ€æ–‡ä»¶ä¸¢å¤±
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>django</tag>
        <tag>centos</tag>
        <tag>supervisor</tag>
        <tag>uwsgi</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨CentOS7ä¸Šå®‰è£…Hadoopå’ŒHive</title>
    <url>/dev-hadoop-hive-on-centos/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¼šåœ¨CentOS7ç³»ç»Ÿä¸­å®‰è£… Hadoop1.2.1 å’Œ Hive1.2.2 ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

hive2.1.1å®‰è£…éƒ¨ç½²
Hiveå®‰è£…ä¸é…ç½®
Hiveé›†æˆmysqlæ•°æ®åº“
Hiveå®‰è£…é…ç½®æŒ‡åŒ—ï¼ˆå«Hive Metastoreè¯¦è§£ï¼‰



å®‰è£…Hadoopå‚è€ƒæ–‡æ¡£ï¼šã€Šåœ¨Ubuntu16.04ä¸Šå®‰è£…Hadoopã€‹
é…ç½®Mysql1ã€å‡è®¾å·²ç»å®‰è£…å¥½äº†mysqlï¼Œç‰ˆæœ¬ä¸º5.6.29ã€‚
2ã€æ–°å»ºhiveæ•°æ®åº“ï¼Œç”¨æ¥ä¿å­˜hiveçš„å…ƒæ•°æ®
create database hive;alter database hive character set latin1;

3ã€å°†hiveæ•°æ®åº“ä¸‹çš„æ‰€æœ‰è¡¨çš„æ‰€æœ‰æƒé™èµ‹ç»™hadoopç”¨æˆ·ï¼Œå¹¶é…ç½®mysqlä¸ºhive-site.xmlä¸­çš„è¿æ¥å¯†ç ï¼Œç„¶ååˆ·æ–°ç³»ç»Ÿæƒé™å…³ç³»è¡¨ã€‚
create user &#x27;hadoop&#x27;@&#x27;%&#x27; identified by &#x27;mysql&#x27;;grant all privileges on  *.* to &#x27;hadoop&#x27;@&#x27;%&#x27; with grant option;flush privileges;

å®‰è£…Hive1ã€ä¸‹è½½è§£å‹hive
cd /optwget http://mirror.bit.edu.cn/apache/hive/hive-1.2.2/apache-hive-1.2.2-bin.tar.gztar -zxvf apache-hive-1.2.2-bin.tar.gz

2ã€é…ç½®HIVE_HOMEï¼Œvim /etc/profileï¼Œåœ¨æœ€åæ·»åŠ 
export HIVE_HOME=/opt/apache-hive-1.2.2-binexport PATH=$HIVE_HOME/bin:$PATH
ç«‹å³ç”Ÿæ•ˆï¼Œsource /etc/profile
3ã€ä¿®æ”¹hive-site.xmlæ–‡ä»¶
cd /opt/apache-hive-1.2.2-bin/conf/cp hive-default.xml.template hive-site.xml  vim hive-site.xml

æ‰¾åˆ°ConnectionURLï¼Œä¿®æ”¹ä¸ºï¼š
&lt;property&gt;  &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;  &lt;value&gt;jdbc:mysql://localhost:3306/hive?createDatabaseIfNotExist=true&lt;/value&gt;  &lt;description&gt;JDBC connect string for a JDBC metastore&lt;/description&gt;&lt;/property&gt;&lt;property&gt;    &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;    &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;  &lt;/property&gt;&lt;property&gt;    &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;    &lt;value&gt;hadoop&lt;/value&gt;  &lt;/property&gt;     &lt;property&gt;    &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;    &lt;value&gt;mysql&lt;/value&gt;  &lt;/property&gt;&lt;property&gt;  &lt;name&gt;hive.support.sql11.reserved.keywords&lt;/name&gt;  &lt;value&gt;false&lt;/value&gt;  &lt;description&gt;    This flag should be set to true to enable support for SQL2011 reserved keywords.    The default value is true.  &lt;/description&gt;&lt;/property&gt;

4ã€ä¸‹è½½é…ç½®mysql-connector-java
wget http://www.java2s.com/Code/JarDownload/mysql/mysql-connector-java-5.1.22-bin.jar.zipunzip mysql-connector-java-5.1.22-bin.jar.zipmv mysql-connector-java-5.1.22-bin.jar /opt/apache-hive-1.2.2-bin/lib

5ã€ä¿®æ”¹hive-env.shæ–‡ä»¶
cp hive-env.sh.template  hive-env.shvi  hive-env.sh

ä¿®æ”¹ä¸ºï¼š
# Set HADOOP_HOME to point to a specific hadoop install directoryHADOOP_HOME=/opt/hadoop-1.2.1

6ã€å¯åŠ¨hadoop,cd /opt/hadoop-1.2.1/binï¼Œstart-all.shã€‚
7ã€å¯åŠ¨metastoreï¼Œnohup hive --service metastore &gt; metastore.log 2&gt;&amp;1 &amp;
8ã€å¯åŠ¨hiveï¼ŒhiveæŠ¥é”™ï¼šThe root scratch dir: /tmp/hive on HDFS should be writable.
mkdir /tmp/hivechmod -R 777 /tmp/hivehadoop fs -chmod -R 777 /tmp/hive

å†æ¬¡å¯åŠ¨ï¼ŒæŠ¥é”™ï¼šRelative path in absolute URI: ${system:java.io.tmpdir%7D/$%7Bsystem:user.name%7Dæ–°å»ºtmpdiræ–‡ä»¶å¤¹
mkdir /tmp/tmpdirchmod -R 777 /tmp/tmpdirhadoop fs -mkdir /tmp/tmpdirhadoop fs -chmod -R 777 /tmp/tmpdir

åœ¨hive-site.xmlä¸­ï¼ŒæŸ¥æ‰¾æ‰€æœ‰çš„$&#123;system:java.io.tmpdir&#125; å’Œ $&#123;system:java.io.tmpdir&#125;/$&#123;system:user.name&#125;ï¼Œæ›¿æ¢ä¸º/tmp/tmpdir
å†æ¬¡å¯åŠ¨ï¼ŒæˆåŠŸï¼
hiveé—®é¢˜è®°å½•é—®é¢˜æè¿°ï¼šhiveè¡¨ä¸­çš„åˆ—åï¼Œæ— æ³•ä½¿ç”¨ç‚¹.å’Œå†’å·:ã€‚è§£å†³åŠæ³•ï¼šé‡æ–°åˆ›å»ºè¡¨ã€‚å› ä¸ºåˆ›å»ºè¡¨æ—¶å¯ä»¥ä½¿ç”¨ç‚¹å’Œå†’å·ï¼Œä¿®æ”¹è¡¨æ—¶ä¸èƒ½ä½¿ç”¨ã€‚è¯¦æƒ…å‚è€ƒCannot use a â€œ.â€ in a Hive table column name
]]></content>
      <categories>
        <category>engineering</category>
        <category>bigdata</category>
      </categories>
      <tags>
        <tag>å¤§æ•°æ®</tag>
        <tag>centos</tag>
        <tag>hadoop</tag>
        <tag>hive</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoéƒ¨ç½²åˆ°çº¿ä¸Š</title>
    <url>/dev-django-deploy/</url>
    <content><![CDATA[å‰è¨€ã€ŠDjangoå¼€å‘ç®€å•Blogç³»ç»Ÿã€‹ç³»åˆ—ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ä¸€ä¸ªè¿·ä½ Webé¡¹ç›®ã€‚é‚£ä¹ˆï¼Œæ€ä¹ˆæŠŠè¿™ä¸ªé¡¹ç›®å‘å¸ƒåˆ°çº¿ä¸Šå‘¢ï¼Ÿæ€æ ·ç»™å®ƒä¸€ä¸ªåŸŸåå‘¢ï¼Ÿ
æ€è·¯ï¼šnginx + uwsgi


ç¯å¢ƒå‡†å¤‡æœåŠ¡å™¨é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œcentos7ç³»ç»Ÿã€‚
pythonå‡çº§pythonåˆ°3.6.1ï¼Œç»Ÿä¸€çº¿ä¸Šå’Œæœ¬åœ°pythonç¯å¢ƒã€‚
1ã€ä¸‹è½½python3.6.1æºç wget  https://www.python.org/ftp/python/3.6.1/Python-3.6.1.tar.xz
2ã€è§£å‹æºç 
xz -d Python-3.6.1.tar.xztar -xvf Python-3.6.1.tar

3ã€ç¼–è¯‘æºç 
mkdir /usr/local/python3cd Python-3.6.1./configure --prefix=/usr/local/python3 --enable-optimizationsmake &amp;&amp; make install

å¦‚æœç¼–è¯‘å¤±è´¥ï¼Œéœ€è¦å…ˆæ›´æ–°ç¼–è¯‘ç¯å¢ƒï¼š
gcc -v g++ -vyum install gccyum install gcc-c++

æ³¨ï¼šæˆ‘çš„ç¯å¢ƒç‰ˆæœ¬ä¸º gcc version 4.8.5 20150623 (Red Hat 4.8.5-11) (GCC) ã€‚
4ã€æ›¿æ¢python
cd /usr/binmv python python.bakln -s /usr/local/python3/bin/python3.6 /usr/bin/pythonll python*python -V

5ã€è§£å†³é—ç•™é—®é¢˜æ‰€æœ‰pythonç›¸å…³çš„åº”ç”¨ï¼Œå¦‚æœä½¿ç”¨/usr/bin/pythonå¼€å¤´çš„è„šæœ¬ï¼Œæ›¿æ¢ä¸º/usr/bin/python2.7ã€‚æ¯”å¦‚ï¼š
vim /usr/bin/yumvim /usr/libexec/urlgrabber-ext-down

uwsgipip install uwsgi
ç¼–å†™æµ‹è¯•ï¼š
# test.pydef application(env, start_response):    start_response(&#x27;200 OK&#x27;, [(&#x27;Content-Type&#x27;,&#x27;text/html&#x27;)])    return [b&quot;Hello World&quot;]

å¯åŠ¨æµ‹è¯•ï¼šuwsgi --http :8001 --wsgi-file test.py
æŠ¥é”™ï¼šuwsgi: command not foundï¼Œçœ‹æ¥æˆ‘ä»¬éœ€è¦æŠŠpython3/binåŠ å…¥åˆ°pathã€‚vim /etc/profileï¼Œåœ¨æ–‡ä»¶æœ€åº•éƒ¨æ‰¾åˆ°PATHï¼Œæ·»åŠ ï¼š
:/usr/local/python3/bin

ä½¿é…ç½®ç”Ÿæ•ˆï¼šsource /etc/profile
è®¿é—® http://ip:8001 ï¼Œå³å¯çœ‹åˆ°Hello World ã€‚
nginxå’Œmysqlå‚è€ƒã€Šåœ¨CentOS7ä¸Šé…ç½®PHPè¿è¡Œç¯å¢ƒã€‹ï¼Œå®‰è£…å¥½äº†nginxå’Œmysqlã€‚
é¡¹ç›®éƒ¨ç½²ä»£ç å‡†å¤‡1ã€å…‹éš†é¡¹ç›®åˆ°æœåŠ¡å™¨git clone https://github.com/voidking/djsite.git
2ã€å®‰è£…djangopip install django
3ã€å®‰è£…pymysqlpip install pymysql
æ•°æ®åº“å‡†å¤‡1ã€åˆ›å»ºæ•°æ®åº“
# mysql -uroot -pmysql&gt; create database `djsite` default character set utf8 collate utf8_general_ci; mysql&gt; exit;

2ã€ä¿®æ”¹djsite/djsite/settings.pyä¸­çš„æ•°æ®åº“é…ç½®vim djsite/djsite/settings.py
3ã€åˆ›å»ºè¡¨ç»“æ„
python manage.py makemigrationspython manage.py migrate

æŠ¥é”™ï¼š
django.db.utils.InternalError: (1665, &#x27;Cannot execute statement: impossible to write to binary log since BINLOG_FORMAT = STATEMENT and at least one table uses a storage engine limited to row-based logging. InnoDB is limited to row-logging when transaction isolation level is READ COMMITTED or READ UNCOMMITTED.&#x27;)

ä¿®æ”¹mysqlçš„binlogæ ¼å¼ä¸ºæ··åˆæ¨¡å¼ï¼š
# mysql -uroot -pmysql&gt; set global binlog_format=mixed;

åˆ é™¤æ•°æ®åº“djsiteä¸­çš„æ‰€æœ‰è¡¨ï¼Œç„¶åå†æ¬¡æ‰§è¡Œï¼š
python manage.py migrate

å¯åŠ¨é¡¹ç›®æ•°æ®åº“é—®é¢˜cd djsitepython manage.py runserver

æŠ¥é”™ï¼š
File &quot;/usr/local/python3/lib/python3.6/site-packages/django/db/backends/mysql/base.py&quot;, line 36, in &lt;module&gt;    raise ImproperlyConfigured(&quot;mysqlclient 1.3.3 or newer is required; you have %s&quot; % Database.__version__)django.core.exceptions.ImproperlyConfigured: mysqlclient 1.3.3 or newer is required; you have 0.7.11.None

è§£å†³åŠæ³•ï¼š
vim /usr/local/python3/lib/python3.6/site-packages/django/db/backends/mysql/base.py

è¿›å…¥vimå‘½ä»¤æ¨¡å¼ï¼Œè¾“å…¥/versionï¼ŒæŒ‰NæŸ¥æ‰¾ä¸‹ä¸€ä¸ªï¼Œæ‰¾åˆ°ï¼š
if version &lt; (1, 3, 3):    raise ImproperlyConfigured(&quot;mysqlclient 1.3.3 or newer is required; you have %s&quot; % Database.__version__)
æ³¨é‡Šæ‰å®ƒï¼Œé—®é¢˜è§£å†³ã€‚
urlé—®é¢˜cd djsitepython manage.py runserver

å†æ¬¡æŠ¥é”™ï¼š
File &quot;/root/djsite/djsite/urls.py&quot;, line 21, in &lt;module&gt;    url(r&#x27;^blog/&#x27;, include(&#x27;blog.urls&#x27;, namespace=&#x27;blog&#x27;)),  File &quot;/usr/local/python3/lib/python3.6/site-packages/django/urls/conf.py&quot;, line 39, in include    &#x27;Specifying a namespace in include() without providing an app_name &#x27;django.core.exceptions.ImproperlyConfigured: Specifying a namespace in include() without providing an app_name is not supported. Set the app_name attribute in the included module, or pass a 2-tuple containing the list of patterns and app_name instead.

è§£å†³åŠæ³•ï¼š
vim /usr/local/python3/lib/python3.6/site-packages/django/urls/conf.py

æ‰¾åˆ°ï¼š
if namespace and not app_name:    raise ImproperlyConfigured(        &#x27;Specifying a namespace in include() without providing an app_name &#x27;        &#x27;is not supported. Set the app_name attribute in the included &#x27;        &#x27;module, or pass a 2-tuple containing the list of patterns and &#x27;        &#x27;app_name instead.&#x27;,    )
æ³¨é‡Šæ‰å®ƒï¼Œé—®é¢˜è§£å†³ã€‚
æŸ¥çœ‹æ•ˆæœcd djsitepython manage.py runserver

å¯åŠ¨æˆåŠŸï¼Œåœ¨æœåŠ¡å™¨ä¸Šæµ‹è¯•è®¿é—®ï¼šcurl localhost:8000/blog/index
ä½¿ç”¨æµè§ˆå™¨æŸ¥çœ‹ http://ip:8000/blog/index ï¼Œå´æ— æ³•è®¿é—®ã€‚è¿™æ˜¯å› ä¸ºåœ¨settings.pyä¸­ï¼ŒALLOWED_HOSTSçš„é…ç½®ä¸ºï¼š
ALLOWED_HOSTS = []

å®˜æ–¹æ–‡æ¡£è¯´ï¼š

When DEBUG is True and ALLOWED_HOSTS is empty, the host is validated against [â€˜localhostâ€™, â€˜127.0.0.1â€™, â€˜[::1]â€™].

ä¿®æ”¹ALLOWED_HOSTSçš„é…ç½®ä¸ºï¼š
ALLOWED_HOSTS = [&#x27;*&#x27;]

ç„¶åå¯åŠ¨å‘½ä»¤æ”¹ä¸ºï¼špython manage.py runserver 0.0.0.0:8000ï¼Œæ­¤æ—¶å³å¯åœ¨æµè§ˆå™¨çœ‹åˆ°éƒ¨ç½²å¥½çš„é¡¹ç›®ã€‚
å¦‚æœè¿˜æ˜¯ä¸èƒ½è®¿é—®ï¼Œå°è¯•å…ˆå…³é—­é˜²ç«å¢™ï¼šsystemctl stop firewalld
nginxé…ç½®1ã€é¦–å…ˆï¼Œåœ¨ä¸‡ç½‘ä¸Šé…ç½®åŸŸåè§£æï¼Œæ·»åŠ Aè®°å½•ï¼Œè§£æåˆ°é˜¿é‡Œäº‘æœåŠ¡å™¨IPã€‚å‡è®¾è§£æå¥½çš„åŸŸåä¸ºdjango.voidking.comã€‚
2ã€åœ¨nginxçš„vhostä¸­ï¼Œæ·»åŠ django.voidking.com.confï¼Œå†…å®¹ä¸ºï¼š
server &#123;    listen 80;    server_name django.voidking.com;    charset utf-8;    location /&#123;        proxy_set_header   Host             $host;        proxy_set_header   X-Real-IP        $remote_addr;        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;        client_max_body_size       1024m;        client_body_buffer_size    128k;        client_body_temp_path      data/client_body_temp;        proxy_connect_timeout      90;        proxy_send_timeout         90;        proxy_read_timeout         90;        proxy_buffer_size          4k;        proxy_buffers              4 32k;        proxy_busy_buffers_size    64k;        proxy_temp_file_write_size 64k;        proxy_temp_path            data/proxy_temp;        proxy_pass http://127.0.0.1:8000;    &#125;&#125;

3ã€é‡å¯nginxï¼Œ./nginx -s reload
4ã€æµ‹è¯•è®¿é—®æœåŠ¡å™¨ï¼šcurl django.voidking.com/blog/indexæœ¬åœ°æµè§ˆå™¨ï¼šhttp://django.voidking.com/blog/index
è‡³æ­¤ï¼Œdjangoé¡¹ç›®å·²ç»éƒ¨ç½²æˆåŠŸï¼Œæ²¡æœ‰ç”¨åˆ°uwsgiã€‚å¦‚æœç»™djangoæ·»åŠ å®ˆæŠ¤è¿›ç¨‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„éƒ¨ç½²å°±æ¥è¿‘å®Œç¾äº†ã€‚é‚£ä¹ˆï¼Œuwsgiåˆèƒ½å¹²ä»€ä¹ˆå‘¢ï¼Œæˆ‘ä»¬ç»§ç»­ç ”ç©¶ã€‚
uwsgiä¸€èˆ¬å¯åŠ¨1ã€ç¼–å†™wsgi.pyæ–‡ä»¶ç¼–å†™django_wsgi.pyæ–‡ä»¶ï¼Œå°†å…¶æ”¾åœ¨ä¸æ–‡ä»¶manage.pyåŒä¸€ä¸ªç›®å½•ä¸‹ã€‚
#!/usr/bin/env python# coding: utf-8import os,djangofrom django.core.handlers.wsgi import WSGIHandleros.environ.setdefault(&quot;DJANGO_SETTINGS_MODULE&quot;, &quot;djsite.settings&quot;)django.setup()application = WSGIHandler()

2ã€å¯åŠ¨é¡¹ç›®uwsgi --http :8000 --chdir ~/djsite/ --module django_wsgi
3ã€æŸ¥çœ‹å¯åŠ¨ç»“æœlsof -i :8000ï¼Œps aux | grep uwsgi
4ã€æµ‹è¯•è®¿é—®http://ip:8000/blog/indexæ­¤æ—¶ï¼Œé¡µé¢æ˜¯æ²¡æœ‰æ ·å¼çš„ï¼Œä¹Ÿå°±æ˜¯è¯´é™æ€èµ„æºåŠ è½½å¤±è´¥ã€‚
5ã€é…ç½®é™æ€èµ„æºuwsgi --http :8000 --chdir ~/djsite/ --module django_wsgi --static-map=/static=staticæ­¤æ—¶ï¼Œé¡µé¢æ ·å¼å°±æ­£å¸¸äº†ã€‚
é«˜çº§å¯åŠ¨1ã€æ–°å»ºuwsgi.iniï¼Œä¸manage.pyåœ¨åŒä¸€çº§ç›®å½•ã€‚
[uwsgi]http = :8000chdir = /root/djsite/wsgi-file = django_wsgi.pystatic-map = &#x27;/static=static&#x27;

2ã€å¯åŠ¨uwsgiuwsgi uwsgi.ini
3ã€æµ‹è¯•è®¿é—®http://ip:8000/blog/index
å®ˆæŠ¤è¿›ç¨‹å®‰è£…supervisorå…³é—­shellåï¼ŒuwsgiæœåŠ¡å°±å¾ˆå¿«å…³é—­äº†ã€‚ä¸ºäº†è®©å®ƒåå°è¿è¡Œï¼Œéœ€è¦è®©å®ƒå˜æˆå®ˆæŠ¤è¿›ç¨‹ã€‚å‚è€ƒã€ŠCentOSå®‰è£…é…ç½®Supervisorã€‹ï¼Œå®‰è£…é…ç½®å¥½supervisorã€‚
å®ˆæŠ¤uwsgi1ã€åœ¨/etc/supervisorä¸­æ–°å»ºdjsite.confæ–‡ä»¶ï¼š
[program:djsite]command=/usr/local/python3/bin/uwsgi --http :8000 --chdir /root/djsite/ --module django_wsgi --static-map=/static=staticdirectory=/root/djsite/startsecs=0stopwaitsecs=0autostart=trueautorestart=true

2ã€é‡å¯supervisor
systemctl stop supervisordsystemctl start supervisord

é™„ï¼šé‡å¯djsiteå‘½ä»¤
supervisorctl -c /etc/supervisord.conf restart djsite

3ã€æµ‹è¯•è®¿é—®http://ip:8000/blog/indexé¡µé¢æ˜¾ç¤ºæ­£å¸¸ï¼Œè‡³æ­¤å®ˆæŠ¤è¿›ç¨‹é…ç½®æˆåŠŸã€‚
4ã€é€€å‡ºsupervisorç¯å¢ƒsource deactivateï¼Œå®ˆæŠ¤è¿›ç¨‹å¹¶æ²¡æœ‰å—åˆ°å½±å“ã€‚
nginx+uwsgiä»¥ä¸Šï¼Œæˆ‘ä»¬çš„djsiteé¡¹ç›®å·²ç»é€šè¿‡uwsgiæ–¹å¼å¯åŠ¨èµ·æ¥ï¼Œå¹¶ä¸”å¯ä»¥ä¿æŒåå°è¿è¡Œã€‚nginxé…ç½®ä¸æ”¹å˜çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æ­£å¸¸è®¿é—® http://django.voidking.com/blog/index ã€‚æ­¤æ—¶ï¼Œnginxä½œä¸ºåå‘ä»£ç†ï¼Œå’Œuwsgié—´é€šè¿‡httpäº¤äº’ã€‚
æ¥ä¸‹æ¥ï¼Œå°±é…ç½®ä¸‹nginxå’Œuwsgié€šè¿‡socketç»“åˆçš„æ–¹å¼ã€‚åŸç†ï¼šç”¨æˆ·å‘é€httpè¯·æ±‚åˆ°nginxï¼Œnginxé€šè¿‡socketæŠŠè¯·æ±‚äº¤ç»™uwsgiï¼Œuwsgiæ‹¿åˆ°djangoçš„å¤„ç†ç»“æœï¼Œé€šè¿‡socketè¿”è¿˜ç»™nginxï¼Œnginxé€šè¿‡httpè¿”å›ç»“æœç»™ç”¨æˆ·ã€‚
1ã€å› ä¸ºnginxå’Œuwsgié€šè¿‡socketæ–¹å¼äº¤äº’ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹uwsgi.iniçš„é…ç½®ä¸ºï¼š
[uwsgi]socket = :8000chdir = /root/djsite/wsgi-file = django_wsgi.pystatic-map = &#x27;/static=static&#x27;master = trueprocesses = 2enable-threads = true# daemonize = /root/djsite/uwsgi.log

2ã€/etc/supervisor/djsite.confï¼Œä¿®æ”¹ä¸º
[program:djsite]command=/usr/local/python3/bin/uwsgi uwsgi.inidirectory=/root/djsite/startsecs=0stopwaitsecs=0autostart=trueautorestart=true

3ã€é‡å¯supervisorsystemctl stop supervisordsystemctl start supervisord
4ã€ä¿®æ”¹nginxé…ç½®djsite.voidking.com.confï¼š
server &#123;    listen      80;    server_name djsite.voidking.com;    charset     utf-8;    location / &#123;        uwsgi_pass     127.0.0.1:8000;        include        uwsgi_params;    &#125;    location /static &#123;        alias /root/djsite/static;    &#125;&#125;

5ã€é‡å¯nginx./nginx -s reload
6ã€æµ‹è¯•è®¿é—®æ­¤æ—¶ï¼Œè®¿é—® http://ip:8000/blog/index å¤±è´¥ï¼Œè®¿é—® http://django.voidking.com/blog/index æ­£å¸¸ã€‚å› ä¸º8000ç«¯å£ä¸å†æä¾›httpæœåŠ¡ï¼Œè€Œæ˜¯ä¸€ä¸ªå’Œnginxè¿æ¥çš„socketã€‚
7ã€staticè¯·é—®ï¼Œæ­¤æ—¶çš„é™æ€èµ„æºï¼Œæ˜¯é€šè¿‡uwsgiè·å–çš„ï¼Ÿè¿˜æ˜¯é€šè¿‡nginxç›´æ¥è·å–çš„ï¼Ÿåšä¸€ä¸ªæµ‹è¯•å³å¯ï¼Œä¿®æ”¹uwsgiä¸ºï¼š
[uwsgi]socket = :8000chdir = /root/djsite/wsgi-file = django_wsgi.py# static-map = &#x27;/static=static&#x27;master = trueprocesses = 2enable-threads = true# daemonize = /root/djsite/uwsgi.log
æ­¤æ—¶ï¼Œuwsgiä¸å†æä¾›é™æ€èµ„æºã€‚é‡å¯supervisorï¼Œé¡µé¢æ ·å¼æ­£å¸¸ï¼Œå¯è§ï¼Œé™æ€èµ„æºæ˜¯é€šè¿‡nginxè·å–çš„ã€‚ä¹‹æ‰€ä»¥å¯ä»¥è·å–åˆ°ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ä¹‹å‰åœ¨djsite/settings.pyä¸­é…ç½®äº†ï¼š
STATICFILES_DIRS = (    os.path.join(BASE_DIR, &quot;static&quot;),)


å°ç»“è‡³æ­¤ï¼Œdjangoéƒ¨ç½²å®Œæ¯•ï¼Œæˆ‘ä»¬å®ç°äº†ä¸‰ç§éƒ¨ç½²æ–¹æ³•ï¼š

nginx + djangoï¼ˆhttpæ–¹å¼ï¼‰
nginx + uwsgiï¼ˆhttpæ–¹å¼ï¼‰
nginx + uwsgiï¼ˆsocketæ–¹å¼ï¼‰

åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œè§£å†³äº†ä¸€äº›å¥‡æ€ªçš„bugï¼Œå­¦ä¹ äº†å‡çº§pythonçš„æ–¹æ³•ï¼Œå­¦ä¹ äº†ä½¿ç”¨pyenvå®‰è£…å¤šç‰ˆæœ¬pythonçš„æ–¹æ³•ï¼ˆç±»ä¼¼çš„è¿˜æœ‰anacondaï¼‰ï¼Œå­¦ä¹ äº†ç»™djangoæˆ–è€…uwsgiæ·»åŠ å®ˆæŠ¤è¿›ç¨‹çš„æ–¹æ³•ï¼Œæ”¶è·é¢‡ä¸°ã€‚
ä¹¦ç­¾Python Webéƒ¨ç½²æ–¹å¼æ€»ç»“
Pythonç½‘ç»œæ¡†æ¶â€”â€”WebæœåŠ¡å™¨
Djangoåœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„éƒ¨ç½²
Django éƒ¨ç½²(Nginx)
ä½¿ç”¨Supervisorç®¡ç†SpiderKeeperå’ŒScrapyd
ä½¿ç”¨uWSGIæä¾›é™æ€æ–‡ä»¶ (æ›´æ–°è‡³1.9)
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>django</tag>
        <tag>centos</tag>
        <tag>supervisor</tag>
        <tag>uwsgi</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoå¼€å‘ç®€å•Blogç³»ç»Ÿâ€”â€”ä¸‹</title>
    <url>/dev-django-blog-2/</url>
    <content><![CDATA[å‰è¨€åšå®¢çš„åŸºæœ¬åŠŸèƒ½å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿˜æœ‰å“ªäº›çŸ¥è¯†ç‚¹å¯ä»¥åŠ å…¥æˆ‘ä»¬çš„ç³»ç»Ÿã€‚


è¶…é“¾æ¥templateä¸­å¯ä»¥ä½¿ç”¨ï¼š
&#123;% url &#x27;app_name: url_name&#x27; param %&#125;


app_nameï¼šåº”ç”¨å‘½åç©ºé—´çš„åç§°
url_nameï¼šé“¾æ¥å
paramï¼šå‚æ•°

app_nameå’Œurl_nameéƒ½åœ¨urls.pyä¸­é…ç½®ã€‚
djsite/djsite/urls.pyä¸­
url(r&#x27;^blog/&#x27;, include(&#x27;blog.urls&#x27;, namespace=&#x27;blog&#x27;)),
å…¶ä¸­namespace=&#39;blog&#39;ä»£è¡¨çš„æ˜¯app_nameã€‚
djsite/blog/urls.pyä¸­
url(r&#x27;^(?P&lt;article_id&gt;[0-9]+)$&#x27;, views.detail, name=&#x27;detail&#x27;),
å…¶ä¸­name=&#39;detail&#39;ä»£è¡¨çš„æ˜¯url_nameã€‚
æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³è¦è®¿é—®views.detailæ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨é¡µé¢ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ï¼š
&#123;% url &#x27;blog:detail&#x27; article.id %&#125;

å®é™…ä¸Šï¼Œè¿™ç§å†™æ³•å¹¶æ²¡æœ‰æˆ‘ä»¬ä¸Šä¸€ç¯‡æ–‡ç« ä¸­çš„å†™æ³•æ–¹ä¾¿ï¼Œå› ä¸ºajaxå¾—åˆ°æ•°æ®åæ— æ³•ä½¿ç”¨è¿™ç§å†™æ³•ï¼Œå»ºè®®å¼ƒç”¨ã€‚
django shelldjango shellå’Œpython shellçš„ä¸åŒï¼Œåœ¨äºdjango shellé‡ŒåŠ å…¥äº†é¡¹ç›®çš„ç¯å¢ƒï¼Œè¿™å°±æ–¹ä¾¿äº†æˆ‘ä»¬çš„è°ƒè¯•ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬åœ¨django shellè¾“å…¥ï¼š
from blog.models import ArticleArticle.objects.all()Article.objects.all().values()
å³å¯æ‰“å°å‡ºæ‰€æœ‰çš„æ–‡ç« ã€‚
Adminè¿›é˜¶åœ¨ä¹‹å‰çš„åå°ç®¡ç†ç³»ç»Ÿä¸­ï¼Œç‚¹å‡»è¿›å…¥Articlesï¼Œå‘ç°é‡Œé¢æœ‰å¾ˆå¤šArticle Objectï¼Œå› ä¸ºæˆ‘ä»¬åœ¨blog/models.pyä¸­æ·»åŠ äº†__str__æ–¹æ³•ï¼Œæ‰€ä»¥æ˜¾ç¤ºçš„åç§°æ˜¯æ–‡ç« æ ‡é¢˜ã€‚
é‚£ä¹ˆï¼Œæ€æ ·æŠŠæ ‡é¢˜ã€å†…å®¹ã€å‘å¸ƒæ—¶é—´éƒ½æ˜¾ç¤ºå‡ºæ¥å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¿®æ”¹blog/admin.pyï¼š
from django.contrib import adminfrom . import models# Register your models here.class ArticleAdmin(admin.ModelAdmin):    # æ˜¾ç¤ºåœ¨adminæ§åˆ¶å°ä¸­çš„åˆ—å    list_display = (&#x27;title&#x27;, &#x27;content&#x27;, &#x27;pub_time&#x27;)    # æ—¶é—´è¿‡æ»¤å™¨    list_filter = (&#x27;pub_time&#x27;,)admin.site.register(models.Article, ArticleAdmin)

æ”¹ç”¨mysqlsqliteï¼Œåšä¸€äº›æµ‹è¯•è¿˜å¯ä»¥ï¼Œä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨mysqlã€‚
1ã€å‡è®¾æˆ‘ä»¬çš„æ•°æ®åº“ç”¨æˆ·åä¸ºrootï¼Œå¯†ç ä¸ºç©ºï¼Œæ•°æ®åº“åä¸ºdjsiteã€‚
2ã€å®‰è£…pymysqlpip install pymysql
3ã€ä¿®æ”¹djsite/djsite/settings.pyï¼š
# Database# https://docs.djangoproject.com/en/1.11/ref/settings/#databases# DATABASES = &#123;#     &#x27;default&#x27;: &#123;#         &#x27;ENGINE&#x27;: &#x27;django.db.backends.sqlite3&#x27;,#         &#x27;NAME&#x27;: os.path.join(BASE_DIR, &#x27;db.sqlite3&#x27;),#     &#125;# &#125;DATABASES = &#123;    &#x27;default&#x27;: &#123;        &#x27;ENGINE&#x27;: &#x27;django.db.backends.mysql&#x27;,        &#x27;HOST&#x27;: &#x27;127.0.0.1&#x27;,        &#x27;PORT&#x27;: &#x27;3306&#x27;,        &#x27;NAME&#x27;: &#x27;djsite&#x27;,        &#x27;USER&#x27;: &#x27;root&#x27;,        &#x27;PASSWORD&#x27;: &#x27;&#x27;,        &#x27;OPTIONS&#x27;: &#123;            &#x27;init_command&#x27;: &quot;SET sql_mode=&#x27;STRICT_TRANS_TABLES&#x27;&quot;,        &#125;,    &#125;&#125;

4ã€ä¿®æ”¹djsite/djsite/__init__.pyï¼š
import pymysqlpymysql.install_as_MySQLdb()

5ã€æ•°æ®è¿ç§»python manage.py makemigrations
python manage.py migrate
6ã€åˆ›å»ºè¶…çº§ç”¨æˆ·python manage.py createsuperuser
æºç åˆ†äº«https://github.com/voidking/djsite/releases/tag/v0.3.0
ä¹¦ç­¾djangoå…¥é—¨ä¸å®è·µ
Django è¿‡æ»¤å™¨
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>django</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoå¼€å‘ç®€å•Blogç³»ç»Ÿâ€”â€”ä¸­</title>
    <url>/dev-django-blog-1/</url>
    <content><![CDATA[ç³»ç»ŸåŠŸèƒ½1ã€åšå®¢åˆ—è¡¨å±•ç¤º2ã€æ–°å¢åšå®¢ã€ä¿®æ”¹åšå®¢ã€åˆ é™¤åšå®¢ã€æœç´¢åšå®¢3ã€åå°ç®¡ç†


åå°ç®¡ç†djangoè‡ªå¸¦åå°ç®¡ç†ç³»ç»ŸAdminï¼Œè¢«æˆæƒçš„ç”¨æˆ·å¯ä»¥ç›´æ¥åœ¨åå°ç®¡ç†ç³»ç»Ÿä¸­æ“ä½œæ•°æ®åº“ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§éœ€æ±‚å¯¹Adminè¿›è¡Œå®šåˆ¶ã€‚
1ã€åˆ›å»ºè¶…çº§ç”¨æˆ·python manage.py createsuperuseræ ¹æ®æç¤ºï¼Œè¾“å…¥ç”¨æˆ·åã€é‚®ç®±ã€å¯†ç ã€‚
2ã€æµ‹è¯•è®¿é—®è®¿é—®åœ°å€ http://localhost:8000/admin/ ï¼Œè¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œç™»å½•åå°ç®¡ç†ç³»ç»Ÿã€‚
3ã€æ”¹æˆä¸­æ–‡åå°ç®¡ç†ç³»ç»Ÿï¼Œé»˜è®¤æ˜¯è‹±æ–‡çš„ï¼Œä¿®æ”¹settings.pyï¼š
# LANGUAGE_CODE = &#x27;en-us&#x27;LANGUAGE_CODE = &#x27;zh-hans&#x27;
åˆ·æ–°åå°ç®¡ç†é¡µé¢ï¼Œå‘ç°å˜æˆäº†ä¸­æ–‡ã€‚
4ã€æ³¨å†Œmodelæ­¤æ—¶ï¼Œæˆ‘ä»¬åœ¨åå°ç®¡ç†ä¸­çœ‹ä¸åˆ°articleç­‰è¡¨æ•°æ®ï¼Œè¦æƒ³æ˜¾ç¤ºæ•°æ®ï¼Œéœ€è¦åœ¨blog/admin.pyä¸­æ³¨å†Œmodelã€‚
from django.contrib import adminfrom . import models# Register your models here.admin.site.register(models.Article)
åˆ·æ–°åå°ç®¡ç†é¡µé¢ï¼Œå‘ç°articleè¡¨å·²ç»å‡ºç°ã€‚
5ã€ç‚¹å‡»è¿›å…¥Articlesï¼Œå‘ç°é‡Œé¢æœ‰å¾ˆå¤šArticle Objectï¼Œå› ä¸ºæˆ‘ä»¬åœ¨blog/models.pyä¸­æ·»åŠ äº†__str__æ–¹æ³•ï¼Œæ‰€ä»¥æ˜¾ç¤ºçš„åç§°æ˜¯æ–‡ç« æ ‡é¢˜ã€‚
def __str__(self):    return self.title

é¡µé¢å¼€å‘ä¸»é¡µé¢1ã€åœ¨blog/urls.pyä¸­é…ç½®è·¯ç”±
url(r&#x27;^$&#x27;, views.index, name=&#x27;index&#x27;),url(r&#x27;^index$&#x27;, views.index, name=&#x27;index&#x27;),

2ã€åœ¨blog/views.pyä¸­ä¿®æ”¹indexæ–¹æ³•
def index(request):    articles = models.Article.objects.all()    return render(request, &#x27;blog/index.html&#x27;, &#123;&#x27;articles&#x27;: articles&#125;)

3ã€ä¿®æ”¹blog/templates/blog/index.html
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;é¦–é¡µ&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;h2&gt;åšå®¢åˆ—è¡¨&lt;/h2&gt;    &lt;div class=&quot;menu&quot;&gt;        &lt;input class=&quot;search-input&quot; type=&quot;text&quot;&gt;         &lt;span class=&quot;search&quot;&gt;æœç´¢&lt;/span&gt;         &lt;a class=&quot;add&quot; href=&quot;/blog/toadd&quot;&gt;æ·»åŠ &lt;/a&gt;    &lt;/div&gt;    &lt;table&gt;        &lt;thead&gt;            &lt;th&gt;åšå®¢æ ‡é¢˜&lt;/th&gt;            &lt;th&gt;å‘å¸ƒæ—¶é—´&lt;/th&gt;            &lt;th&gt;æ“ä½œ&lt;/th&gt;        &lt;/thead&gt;        &lt;tbody&gt;            &#123;% for article in articles %&#125;            &lt;tr data-id=&quot;&#123;&#123;article.id&#125;&#125;&quot;&gt;                &lt;td&gt;&lt;a href=&quot;/blog/&#123;&#123;article.id&#125;&#125;&quot;&gt;&#123;&#123;article.title&#125;&#125;&lt;/a&gt;&lt;/td&gt;                &lt;td&gt;&#123;&#123;article.pub_time&#125;&#125;&lt;/td&gt;                &lt;td&gt;                    &lt;span class=&quot;del&quot;&gt;åˆ é™¤&lt;/span&gt;                &lt;/td&gt;            &lt;/tr&gt;            &#123;% endfor %&#125;        &lt;/tbody&gt;    &lt;/table&gt;&lt;/body&gt;&lt;/html&gt;

4ã€æµ‹è¯•è®¿é—®è®¿é—®åœ°å€ http://localhost:8000/blog æˆ– http://localhost:8000/blog/index
é™æ€èµ„æºblog/index.htmlä¸­ï¼Œæ²¡æœ‰æ·»åŠ æ ·å¼ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹é¡¹ç›®ç»“æ„ï¼ŒæŠŠæ ·å¼è¡¨æ”¾åœ¨é™æ€èµ„æºç›®å½•ä¸­ã€‚å‚è€ƒDJango 1.8 é…ç½®é™æ€èµ„æºæ–‡ä»¶å¯è®¿é—® å’Œ Django é™æ€æ–‡ä»¶ã€‚
1ã€æ–°å»ºdjsite/static/csså±‚çº§ç›®å½•ï¼Œåœ¨cssä¸‹æ–°å»ºindex.cssï¼Œå†…å®¹å‚è§æºç åˆ†äº«ã€‚
2ã€åœ¨settings.pyä¸­æ·»åŠ 
# è®¾ç½®STATIC_URLä¸ºå­˜å‚¨é™æ€æ–‡ä»¶çš„è·¯å¾„ï¼ˆåŸºäºæ ¹ç›®å½•ï¼‰STATIC_URL = &#x27;/static/&#x27; # é…ç½®å­˜å‚¨é™æ€æ–‡ä»¶çš„è·¯å¾„æ˜ å°„å€¼ï¼Œè¿™ä¸ªå€¼ç”¨äºæ¨¡ç‰ˆå¼•ç”¨è·¯å¾„çš„è½¬æ¢ STATICFILES_DIRS = (      os.path.join(BASE_DIR, &quot;static&quot;),  )


3ã€ä¿®æ”¹blog/index.htmlä¸ºï¼š
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &#123;% load staticfiles %&#125;    &lt;link rel=&quot;stylesheet&quot; href=&quot;&#123;%static &#x27;css/index.css&#x27;%&#125;&quot;&gt;    &lt;title&gt;é¦–é¡µ&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;!--ä¸å˜--&gt;&lt;/body&gt;&lt;/html&gt;

æŸ¥çœ‹åšå®¢é¡µé¢1ã€åœ¨blog/urls.pyä¸­æ·»åŠ ï¼š
url(r&#x27;^(?P&lt;article_id&gt;[0-9]+)$&#x27;, views.detail, name=&#x27;detail&#x27;),

2ã€åœ¨blog/views.pyä¸­æ·»åŠ æ–¹æ³•ï¼š
def detail(request,article_id):    article = models.Article.objects.get(pk=article_id)    return render(request, &#x27;blog/article.html&#x27;,                  &#123;&#x27;article&#x27;: article&#125;)

3ã€åœ¨blog/templates/blogä¸­æ·»åŠ article.htmlï¼š
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &#123;% load staticfiles %&#125;    &lt;link rel=&quot;stylesheet&quot; href=&quot;&#123;%static &#x27;css/article.css&#x27;%&#125;&quot;&gt;    &lt;title&gt;&#123;&#123;article.title&#125;&#125;&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;h2&gt;&#123;&#123;article.title&#125;&#125;&lt;/h2&gt;    &lt;div&gt;        &lt;p&gt;&#123;&#123;article.content&#125;&#125;&lt;/p&gt;    &lt;/div&gt;    &lt;div&gt;        &lt;a class=&quot;edit&quot; href=&quot;/blog/toedit/&#123;&#123;article.id&#125;&#125;&quot;&gt;ç¼–è¾‘&lt;/a&gt;    &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;

4ã€æµ‹è¯•è®¿é—®è®¿é—®åœ°å€ http://localhost:8000/blog/1
æ·»åŠ åšå®¢é¡µé¢1ã€åœ¨blog/urls.pyä¸­æ·»åŠ ï¼š
url(r&#x27;^toadd$&#x27;, views.toadd, name=&#x27;toadd&#x27;),

2ã€åœ¨blog/views.pyæ·»åŠ æ–¹æ³•ï¼š
def toadd(request):    return render(request, &#x27;blog/add.html&#x27;)

3ã€åœ¨blog/templates/blogä¸­æ·»åŠ add.htmlï¼š
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;æ·»åŠ åšå®¢&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;form action=&quot;/blog/add&quot; method=&quot;post&quot;&gt;        &lt;p&gt;            &lt;label for=&quot;title&quot;&gt;æ ‡é¢˜&lt;/label&gt;            &lt;input id=&quot;title&quot; name=&quot;title&quot; type=&quot;text&quot;&gt;        &lt;/p&gt;        &lt;p&gt;            &lt;label for=&quot;content&quot;&gt;å†…å®¹&lt;/label&gt;            &lt;textarea id=&quot;content&quot; name=&quot;content&quot; id=&quot;&quot; cols=&quot;30&quot; rows=&quot;10&quot;&gt;&lt;/textarea&gt;        &lt;/p&gt;        &lt;p&gt;            &lt;input type=&quot;submit&quot; value=&quot;ç¡®å®š&quot;&gt;        &lt;/p&gt;    &lt;/form&gt;&lt;/body&gt;&lt;/html&gt;

4ã€ä¿®æ”¹blog/views.pyä¸­çš„addæ–¹æ³•ä¸ºï¼š
@csrf_exemptdef add(request):    title = request.POST.get(&#x27;title&#x27;, &#x27;defaultTitle&#x27;)    content = request.POST.get(&#x27;content&#x27;, &#x27;defaultContent&#x27;)    pub_time = utc2local(timezone.now())    LOCAL_FORMAT = &quot;%Y-%m-%d %H:%M:%S&quot;    pub_time = pub_time.strftime(LOCAL_FORMAT)    models.Article.objects.create(title=title, content=content, pub_time=pub_time)    articles = models.Article.objects.all()    return render(request, &#x27;blog/index.html&#x27;,&#123;&#x27;articles&#x27;: articles&#125;)

5ã€æµ‹è¯•è®¿é—®è®¿é—®åœ°å€ http://localhost:8000/blog/toadd
ä¿®æ”¹åšå®¢é¡µé¢1ã€åœ¨blog/urls.pyä¸­æ·»åŠ ï¼š
url(r&#x27;^toedit/(?P&lt;article_id&gt;[0-9]+)$&#x27;, views.toedit, name=&#x27;toedit&#x27;),

2ã€åœ¨blog/views.pyæ·»åŠ æ–¹æ³•ï¼š
def toedit(request, article_id):    article = models.Article.objects.get(pk=article_id)    return render(request, &#x27;blog/edit.html&#x27;, &#123;&#x27;article&#x27;: article&#125;)

3ã€åœ¨blog/templates/blogä¸­æ·»åŠ edit.htmlï¼š
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;ä¿®æ”¹åšå®¢&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;form action=&quot;/blog/edit&quot; method=&quot;post&quot;&gt;        &lt;p style=&quot;display: none;&quot;&gt;            &lt;input name=&quot;id&quot; type=&quot;text&quot; value=&quot;&#123;&#123;article.id&#125;&#125;&quot;&gt;        &lt;/p&gt;        &lt;p&gt;            &lt;label for=&quot;title&quot;&gt;æ ‡é¢˜&lt;/label&gt;            &lt;input id=&quot;title&quot; name=&quot;title&quot; type=&quot;text&quot; value=&quot;&#123;&#123;article.title&#125;&#125;&quot;&gt;        &lt;/p&gt;        &lt;p&gt;            &lt;label for=&quot;content&quot;&gt;å†…å®¹&lt;/label&gt;            &lt;textarea id=&quot;content&quot; name=&quot;content&quot; id=&quot;&quot; cols=&quot;30&quot; rows=&quot;10&quot;&gt;&#123;&#123;article.content&#125;&#125;&lt;/textarea&gt;        &lt;/p&gt;        &lt;p&gt;            &lt;input type=&quot;submit&quot; value=&quot;ç¡®å®š&quot;&gt;        &lt;/p&gt;    &lt;/form&gt;&lt;/body&gt;&lt;/html&gt;

4ã€ä¿®æ”¹blog/views.pyä¸­çš„editæ–¹æ³•ï¼š
@csrf_exemptdef edit(request):    article_id = request.POST.get(&#x27;id&#x27;, 0)    title = request.POST.get(&#x27;title&#x27;, &#x27;defaultTitle&#x27;)    content = request.POST.get(&#x27;content&#x27;, &#x27;defaultContent&#x27;)    pub_time = utc2local(timezone.now())    LOCAL_FORMAT = &quot;%Y-%m-%d %H:%M:%S&quot;    pub_time = pub_time.strftime(LOCAL_FORMAT)    article = models.Article.objects.get(pk=article_id)    article.title = title    article.content = content    article.pub_time = pub_time    article.save()    articles = models.Article.objects.all()    return render(request, &#x27;blog/index.html&#x27;, &#123;&#x27;articles&#x27;: articles&#125;)

åˆ é™¤åšå®¢1ã€ä¿®æ”¹blog/templates/blog/index.htmlï¼Œæ·»åŠ jså¼•å…¥ï¼š
&lt;script src=&quot;&#123;% static &#x27;lib/jquery/jquery.min.js&#x27;%&#125;&quot;&gt;&lt;/script&gt;&lt;script src=&quot;&#123;% static &#x27;lib/layer/layer.js&#x27;%&#125;&quot;&gt;&lt;/script&gt;&lt;script src=&quot;&#123;% static &#x27;lib/art-template/dist/template-native.js&#x27;%&#125;&quot;&gt;&lt;/script&gt;&lt;script src=&quot;&#123;% static &#x27;js/index.js&#x27;%&#125;&quot;&gt;&lt;/script&gt;

2ã€åˆ›å»ºstatic/jsç›®å½•ï¼Œjsç›®å½•ä¸­æ–°å»ºindex.jsï¼š
$(function()&#123;    $(&#x27;table&#x27;).on(&#x27;click&#x27;,&#x27;.del&#x27;,function()&#123;        $that = $(this);        layer.confirm(&#x27;ç¡®è®¤åˆ é™¤ï¼Ÿ&#x27;, &#123;            btn: [&#x27;ç¡®è®¤&#x27;,&#x27;å–æ¶ˆ&#x27;] //æŒ‰é’®        &#125;, function()&#123;            var $tr = $that.parents(&#x27;tr&#x27;);            var id = $tr.attr(&#x27;data-id&#x27;);            $.ajax(&#123;                url: &#x27;/blog/delete&#x27;,                type: &#x27;POST&#x27;,                dataType: &#x27;json&#x27;,                data: &#123;id: id&#125;,                success: function(data)&#123;                    console.log(data);                    if(data.code == &#x27;0&#x27;)&#123;                        $tr.remove();                        layer.msg(&#x27;åˆ é™¤æˆåŠŸ&#x27;);                    &#125;                &#125;,                error: function(xhr)&#123;                    console.log(xhr);                &#125;            &#125;);        &#125;, function()&#123;            // nothing        &#125;);            &#125;);&#125;);

3ã€ä¿®æ”¹blog/views.pyä¸­çš„deleteæ–¹æ³•ï¼š
@csrf_exemptdef delete(request):    article_id = request.POST.get(&#x27;id&#x27;, 0)    models.Article.objects.get(pk=article_id).delete()    result = &#123;&#x27;code&#x27;: 0, &#x27;ext&#x27;: &#x27;success&#x27;&#125;    return HttpResponse(json.dumps(result, ensure_ascii=False))

4ã€æµ‹è¯•è®¿é—®è®¿é—®åœ°å€ http://localhost:8000/blog/ ï¼Œç‚¹å‡»æ–‡ç« åé¢çš„åˆ é™¤æŒ‰é’®å³å¯ã€‚
æŸ¥æ‰¾åšå®¢1ã€åœ¨blog/urls.pyä¸­æ·»åŠ ï¼š
url(r&#x27;^search$&#x27;, views.search, name=&#x27;search&#x27;)

2ã€åœ¨blog/views.pyä¸­æ·»åŠ searchæ–¹æ³•ï¼š
from django.db.models import Q@csrf_exemptdef search(request):    key = request.POST.get(&#x27;key&#x27;)    articles = models.Article.objects.filter(Q(title__contains=key) | Q(content__contains=key))    json_data = serializers.serialize(&quot;json&quot;, articles)    dict_data = json.loads(json_data)    result = &#123;        &#x27;code&#x27;: 0,        &#x27;ext&#x27;: &#x27;success&#x27;,        &#x27;articles&#x27;: dict_data&#125;    return HttpResponse(json.dumps(result, ensure_ascii=False))


3ã€åœ¨blog/templates/blog/index.htmlä¸­æ·»åŠ ï¼š
&lt;script type=&quot;text/template&quot; id=&quot;tr_template&quot;&gt;    &lt;% for(var i = 0 ; i &lt; articles.length ; i ++)&#123; %&gt;    &lt;% var article = articles[i]; %&gt;    &lt;tr data-id=&quot;&lt;%=article.pk%&gt;&quot;&gt;        &lt;td&gt;&lt;a href=&quot;/blog/&lt;%=article.pk%&gt;&quot;&gt;&lt;%=article.fields.title%&gt;&lt;/a&gt;&lt;/td&gt;        &lt;td&gt;&lt;%=article.fields.pub_time%&gt;&lt;/td&gt;        &lt;td&gt;            &lt;span class=&quot;del&quot;&gt;åˆ é™¤&lt;/span&gt;        &lt;/td&gt;    &lt;/tr&gt;    &lt;% &#125; %&gt;&lt;/script&gt;

4ã€åœ¨index.jsä¸­æ·»åŠ ï¼š
$(&#x27;.search&#x27;).on(&#x27;click&#x27;,function()&#123;    var key = $(&#x27;.search-input&#x27;).val();    $.ajax(&#123;        url: &#x27;/blog/search&#x27;,        type: &#x27;POST&#x27;,        dataType: &#x27;json&#x27;,        data: &#123;key: key&#125;,        success: function(data)&#123;            console.log(data);            if(data.code == &#x27;0&#x27;)&#123;                var html = template(&#x27;tr_template&#x27;,&#123;articles: data.articles&#125;);                $(&#x27;tbody&#x27;).html(html);            &#125;        &#125;,        error: function(xhr)&#123;            console.log(xhr);        &#125;    &#125;);&#125;);$(&#x27;.search-input&#x27;).keypress(function(event) &#123;    var key = event.which;    // console.log(key);    if(key == 13)&#123;        //do something        $(&#x27;.search&#x27;).trigger(&#x27;click&#x27;);    &#125;&#125;);

æ•ˆæœæ¼”ç¤º
æºç åˆ†äº«https://github.com/voidking/djsite/releases/tag/v0.2.0
ä¹¦ç­¾djangoå…¥é—¨ä¸å®è·µ
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>django</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoå¼€å‘ç®€å•Blogç³»ç»Ÿâ€”â€”ä¸Š</title>
    <url>/dev-django-blog-0/</url>
    <content><![CDATA[å‰è¨€æ‰¿æ¥ã€ŠDjangoå…¥é—¨ã€‹ï¼Œæœ¬æ–‡å‚ç…§æ…•è¯¾ç½‘ã€Šdjangoå…¥é—¨ä¸å®è·µã€‹è¯¾ç¨‹ï¼Œå¼€å‘ä¸€ä¸ªç®€å•çš„åšå®¢ç³»ç»Ÿã€‚æŒ‰ç…§å›½é™…æƒ¯ä¾‹ï¼Œæˆ‘ä»¬å…ˆå­¦ä¹ ä¸€ä¸‹djangoçš„åŸºç¡€çŸ¥è¯†ã€‚


æ¨¡æ¿å¼•æ“Djangoé»˜è®¤ä½¿ç”¨DTLï¼ˆDjango Template Languageï¼‰ä½œä¸ºæ¨¡æ¿å¼•æ“ï¼Œå¦‚æœæƒ³è¦ä¿®æ”¹ä¸ºå…¶ä»–æ¨¡æ¿å¼•æ“ï¼Œç›´æ¥åœ¨djsite/djsite/settings.pyä¸­ä¿®æ”¹TEMPLATESå³å¯ã€‚è¯¦æƒ…å¯ä»¥å‚è€ƒThe Django template language: for Python programmersã€‚
first template1ã€åœ¨blogç›®å½•ä¸‹åˆ›å»ºtemplatesç›®å½•ã€‚
2ã€åœ¨templatesç›®å½•ä¸­åˆ›å»ºindex.htmlæ–‡ä»¶ã€‚
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;Index&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    first template!&lt;/body&gt;&lt;/html&gt;

3ã€ä¿®æ”¹blog/urls.pyä¸ºï¼š
from django.conf.urls import urlfrom . import viewsurlpatterns = [    url(r&#x27;^$&#x27;, views.index, name=&#x27;index&#x27;),    url(r&#x27;helloworld&#x27;, views.hello, name=&#x27;hello&#x27;)]

4ã€åœ¨views.pyä¸­æ·»åŠ æ–¹æ³•ï¼š
def index(request):    return render(request, &#x27;index.html&#x27;)

5ã€æµ‹è¯•è®¿é—®å¯åŠ¨djangoï¼Œè®¿é—® http://localhost:8000/blog/ ï¼Œå³å¯çœ‹åˆ°æ¸²æŸ“å¥½çš„é¡µé¢ã€‚
DTL1ã€ä¿®æ”¹indexæ–¹æ³•ä¸ºï¼š
def index(request):    return render(request, &#x27;index.html&#x27;,&#123;&#x27;title&#x27;: &#x27;DTL&#x27;&#125;)

2ã€ä¿®æ”¹index.htmlä¸ºï¼š
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;Index&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;h2&gt;&#123;&#123;title&#125;&#125;&lt;/h2&gt;    &lt;p&gt;first template!&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;

3ã€æµ‹è¯•è®¿é—®å¯åŠ¨djangoï¼Œè®¿é—® http://localhost:8000/blog/ ï¼Œå³å¯çœ‹åˆ°æ¸²æŸ“å¥½çš„é¡µé¢ã€‚

ä¸åŒåº”ç”¨ä¸‹çš„templatesç›®å½•ä¼šå‘ç”Ÿå†²çªï¼ŒdjangoæŒ‰ç…§INSTALLED_APPä¸­çš„é¡ºåºæŸ¥æ‰¾templatesã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨templatesç›®å½•ä¸­åŠ ä¸€å±‚ç›®å½•ï¼Œä»¥åº”ç”¨åä¸ºåã€‚è€Œæ¨¡æ¿ï¼Œéƒ½æ”¾åˆ°è¿™ä¸€å±‚ç›®å½•ä¸­ã€‚

4ã€åœ¨templatesç›®å½•ä¸‹ï¼Œæ–°å»ºblogæ–‡ä»¶å¤¹ï¼ŒæŠŠindex.htmlç§»åŠ¨åˆ°blogæ–‡ä»¶å¤¹ä¸­ã€‚åŒæ—¶ï¼Œä¿®æ”¹indexå‡½æ•°ä¸ºï¼š
def index(request):    return render(request, &#x27;blog/index.html&#x27;,&#123;&#x27;title&#x27;: &#x27;DTL&#x27;&#125;)

å¢åˆ æŸ¥æ”¹djangoé»˜è®¤ä½¿ç”¨db.sqlite3æ•°æ®åº“ï¼Œæˆ‘ä»¬æš‚æ—¶ä¸è¿›è¡Œä¿®æ”¹ã€‚
Model1ã€åœ¨blog/models.pyä¸­æ·»åŠ ä¸€ä¸ªç±»Articleï¼š
class Article(models.Model):    title = models.CharField(max_length=32, default=&#x27;Title&#x27;)    content = models.TextField(null=True)    # å‚æ•° auto_now=True è¡¨ç¤ºè‡ªåŠ¨æ·»åŠ éšè—çš„æ—¶é—´    pub_time = models.DateTimeField(null=True, auto_now=True)    def __str__(self):        return self.title

å…³äºå±æ€§çš„é…ç½®ï¼Œå‚è€ƒModel field referenceã€‚
2ã€ç”Ÿæˆæ•°æ®è¡¨python manage.py makemigrations blogï¼Œåˆ›å»ºmodelï¼Œç”Ÿæˆçš„æ–‡ä»¶åœ¨blog/migrationsç›®å½•ä¸‹
python manage.py migrateï¼Œæ ¹æ®modelç”Ÿæˆæ•°æ®åº“è¡¨
3ã€æŸ¥çœ‹sqlè¯­å¥python manage.py sqlmigrate blog 0001
4ã€ä¸‹è½½å®‰è£…SQLite Expert Personalï¼ŒåŒå‡»db.sqlite3æ–‡ä»¶å³å¯æŸ¥çœ‹ç¼–è¾‘æ•°æ®åº“ã€‚
5ã€ä½¿ç”¨SQLiteExpertï¼Œåœ¨blog_articleè¡¨ä¸­æ·»åŠ æ•°æ®ã€‚
æŸ¥æ‰¾æ•°æ®1ã€åœ¨blog/views.pyä¸­æ·»åŠ æ–¹æ³•ï¼š
from . import modelsdef list(request):    articles = models.Article.objects.all()    article = models.Article.objects.get(pk=1)    return render(request, &#x27;blog/list.html&#x27;,&#123;&#x27;articles&#x27;:articles,&#x27;article&#x27;:article&#125;)

2ã€åœ¨migrations/blogä¸­æ·»åŠ list.htmlæ–‡ä»¶
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;List&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;h2&gt;ç¬¬ä¸€ç¯‡æ–‡ç« &lt;/h2&gt;    &lt;h3&gt;æ ‡é¢˜ï¼š&#123;&#123;article.title&#125;&#125;&lt;/h3&gt;    &lt;p&gt;å†…å®¹&#123;&#123;article.content&#125;&#125;&lt;/p&gt;    &lt;hr&gt;    &lt;h2&gt;æ–‡ç« åˆ—è¡¨&lt;/h2&gt;    &lt;table&gt;        &lt;thead&gt;            &lt;th&gt;æ ‡é¢˜&lt;/th&gt;            &lt;th&gt;å†…å®¹&lt;/th&gt;        &lt;/thead&gt;        &lt;tbody&gt;            &#123;% for article in articles %&#125;            &lt;tr&gt;                &lt;td&gt;&#123;&#123;article.title&#125;&#125;&lt;/td&gt;                &lt;td&gt;&#123;&#123;article.content&#125;&#125;&lt;/td&gt;            &lt;/tr&gt;            &#123;% endfor %&#125;        &lt;/tbody&gt;    &lt;/table&gt;&lt;/body&gt;&lt;/html&gt;

3ã€ä¿®æ”¹blog/urls.pyä¸ºï¼š
from django.conf.urls import urlfrom . import viewsurlpatterns = [    url(r&#x27;^$&#x27;, views.index, name=&#x27;index&#x27;),    url(r&#x27;^index$&#x27;, views.index, name=&#x27;index&#x27;),    url(r&#x27;^helloworld$&#x27;, views.hello, name=&#x27;hello&#x27;),    url(r&#x27;^list$&#x27;,views.list, name=&#x27;list&#x27;)]

4ã€æµ‹è¯•è®¿é—®è®¿é—®åœ°å€ http://localhost:8000/blog/list ï¼Œå³å¯çœ‹åˆ°æ¸²æŸ“åçš„æ•ˆæœã€‚
å¢åŠ æ•°æ®1ã€åœ¨blog/urls.pyä¸­æ·»åŠ ï¼š
url(r&#x27;^add$&#x27;,views.add, name=&#x27;add&#x27;),

2ã€åœ¨blog/views.pyä¸­æ·»åŠ æ–¹æ³•ï¼š
import jsondef add(request):    title = request.GET.get(&#x27;title&#x27;, &#x27;defaultTitle&#x27;)    content = request.GET.get(&#x27;content&#x27;, &#x27;defaultContent&#x27;)    article = models.Article.objects.create(title=title, content=content)    result = &#123;&#x27;code&#x27;: 0, &#x27;ext&#x27;: &#x27;success&#x27;, &#x27;article_id&#x27;: article.id&#125;    return HttpResponse(json.dumps(result,ensure_ascii=False))

3ã€æµ‹è¯•è®¿é—®è®¿é—®åœ°å€ http://localhost:8000/blog/add?title=test&amp;content=test ï¼Œå³å¯çœ‹åˆ°æ·»åŠ æˆåŠŸçš„æç¤ºã€‚
ä¿®æ”¹æ•°æ®1ã€åœ¨blog/urls.pyä¸­æ·»åŠ ï¼š
url(r&#x27;^edit$&#x27;,views.edit, name=&#x27;edit&#x27;),

2ã€åœ¨blog/views.pyä¸­æ·»åŠ æ–¹æ³•ï¼š
def edit(request):    article_id = request.GET.get(&#x27;id&#x27;, 0)    title = request.GET.get(&#x27;title&#x27;, &#x27;defaultTitle&#x27;)    content = request.GET.get(&#x27;content&#x27;, &#x27;defaultContent&#x27;)    article = models.Article.objects.get(pk=article_id)    article.title = title    article.content = content    article.save()    result = &#123;&#x27;code&#x27;: 0, &#x27;ext&#x27;: &#x27;success&#x27;, &#x27;article_id&#x27;: article.id&#125;    return HttpResponse(json.dumps(result,ensure_ascii=False))

3ã€æµ‹è¯•è®¿é—®è®¿é—®åœ°å€ http://localhost:8000/blog/edit?id=1&amp;title=test&amp;content=test222 ï¼Œå³å¯çœ‹åˆ°ä¿®æ”¹æˆåŠŸçš„æç¤ºã€‚
PSï¼šä¿®æ”¹æ•°æ®å’Œå¢åŠ æ•°æ®å¯ä»¥åˆæˆä¸ºä¸€ä¸ªæ¥å£ï¼Œä¾‹å¦‚ï¼š
def edit(request):    article_id = request.GET.get(&#x27;id&#x27;, &#x27;0&#x27;)    title = request.GET.get(&#x27;title&#x27;, &#x27;defaultTitle&#x27;)    content = request.GET.get(&#x27;content&#x27;, &#x27;defaultContent&#x27;)    if article_id == &#x27;0&#x27;:        article = models.Article.objects.create(title=title, content=content)        result = &#123;&#x27;code&#x27;: 0, &#x27;ext&#x27;: &#x27;success&#x27;, &#x27;article_id&#x27;: article.id&#125;        return HttpResponse(json.dumps(result,ensure_ascii=False))    article = models.Article.objects.get(pk=article_id)    article.title = title    article.content = content    article.save()    result = &#123;&#x27;code&#x27;: 0, &#x27;ext&#x27;: &#x27;success&#x27;, &#x27;article_id&#x27;: article.id&#125;    return HttpResponse(json.dumps(result,ensure_ascii=False))

åˆ é™¤æ•°æ®1ã€åœ¨blog/urls.pyä¸­æ·»åŠ ï¼š
url(r&#x27;^delete$&#x27;,views.delete, name=&#x27;delete&#x27;),

2ã€åœ¨blog/views.pyä¸­æ·»åŠ æ–¹æ³•ï¼š
def delete(request):    article_id = request.GET.get(&#x27;id&#x27;, 0)    models.Article.objects.get(pk=article_id).delete()    result = &#123;&#x27;code&#x27;: 0, &#x27;ext&#x27;: &#x27;success&#x27;&#125;    return HttpResponse(json.dumps(result,ensure_ascii=False))

3ã€æµ‹è¯•è®¿é—®è®¿é—®åœ°å€ http://localhost:8000/blog/delete?id=1 ï¼Œå³å¯çœ‹åˆ°åˆ é™¤æˆåŠŸçš„æç¤ºã€‚
Modelè½¬JSON
è¦æƒ³æœ€ç»ˆå¾—åˆ°ä¸€ä¸ªjsonæ•°æ®ï¼Œå‰ææ˜¯æˆ‘ä»¬è¦æ‹¥æœ‰ä¸€ä¸ªdictï¼Œæ‰€ä»¥Modelè½¬JSONé—®é¢˜å°±å½’ç»“ä¸ºæ€æ ·ç»„è£…å‡ºä¸€ä¸ªdictã€‚

ç¤ºä¾‹ä¸€ï¼šåœ¨addæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬è¿”å›çš„ç»“æœæ˜¯jsonæ ¼å¼ã€‚å¦‚æœæƒ³è¦æŠŠarticleï¼ˆModelï¼‰ä¹Ÿæ”¾è¿›ç»“æœä¸­ï¼Œè¯¥æ€ä¹ˆå¤„ç†ï¼Ÿå‚è€ƒPython JSONå’Œdjangoçš„modelå¯¹è±¡è½¬åŒ–æˆdictï¼Œä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š
from django.forms.models import model_to_dictdef add(request):    title = request.GET.get(&#x27;title&#x27;, &#x27;defaultTitle&#x27;)    content = request.GET.get(&#x27;content&#x27;, &#x27;defaultContent&#x27;)    article = models.Article.objects.create(title=title, content=content)    article = model_to_dict(article)    result = &#123;&#x27;code&#x27;: 0, &#x27;ext&#x27;: &#x27;success&#x27;,&#x27;article&#x27;: article&#125;    return HttpResponse(json.dumps(result,ensure_ascii=False))

ç¤ºä¾‹äºŒï¼šå¦‚æœæƒ³è¦æŠŠarticlesï¼ˆModelsï¼‰ä¹Ÿæ”¾è¿›ç»“æœä¸­ï¼Œè¯¥æ€ä¹ˆå¤„ç†ï¼Ÿå‚è€ƒdjango è¿”å›jsonæ•°æ®ã€‚é¦–å…ˆï¼ŒæŠŠModelsåºåˆ—åŒ–ä¸ºjsonæ ¼å¼æ•°æ®ï¼›ç„¶åï¼Œä½¿ç”¨json.loadsè½¬æ¢ä¸ºdictæ ¼å¼æ•°æ®ï¼›æœ€åï¼ŒæŠŠè½¬æ¢åçš„dictå’Œå…¶ä»–dictæ ¼å¼æ•°æ®ç»„è£…åˆ°ä¸€èµ·ã€‚
from django.core import serializersdef add(request):    title = request.GET.get(&#x27;title&#x27;, &#x27;defaultTitle&#x27;)    content = request.GET.get(&#x27;content&#x27;, &#x27;defaultContent&#x27;)    article = models.Article.objects.create(title=title, content=content)    article = model_to_dict(article)    articles = models.Article.objects.all()    json_data = serializers.serialize(&quot;json&quot;, articles)    dict_data = json.loads(json_data)    result = &#123;        &#x27;code&#x27;: 0,        &#x27;ext&#x27;: &#x27;success&#x27;,        &#x27;article&#x27;: article,        &#x27;articles&#x27;: dict_data&#125;    return HttpResponse(json.dumps(result, ensure_ascii=False))

sqliteæ¸…ç©ºè¡¨å‘½ä»¤delete from &#39;blog_article&#39;;update sqlite_sequence set seq = 0 where name = &#39;blog_article&#39;;
POSTé—®é¢˜ä¿®æ”¹addæ–¹æ³•ä¸ºï¼š
def add(request):    title = request.POST.get(&#x27;title&#x27;, &#x27;defaultTitle&#x27;)    content = request.POST.get(&#x27;content&#x27;, &#x27;defaultContent&#x27;)    article = models.Article.objects.create(title=title, content=content)    article = model_to_dict(article)    articles = models.Article.objects.all()    json_data = serializers.serialize(&quot;json&quot;, articles)    dict_data = json.loads(json_data)    result = &#123;        &#x27;code&#x27;: 0,        &#x27;ext&#x27;: &#x27;success&#x27;,        &#x27;article&#x27;: article,        &#x27;articles&#x27;: dict_data&#125;    return HttpResponse(json.dumps(result, ensure_ascii=False))

ä½¿ç”¨postmanå‘é€postè¯·æ±‚æ—¶é‡åˆ°å¦‚ä¸‹é”™è¯¯ï¼š
CSRF verification failed. Request aborted.

è§£å†³åŠæ³•ï¼Œä½¿ç”¨csrf_exemptè£…é¥°å™¨ï¼š
from django.views.decorators.csrf import csrf_exempt@csrf_exemptdef add(request):    title = request.POST.get(&#x27;title&#x27;, &#x27;defaultTitle&#x27;)    content = request.POST.get(&#x27;content&#x27;, &#x27;defaultContent&#x27;)    article = models.Article.objects.create(title=title, content=content)    article = model_to_dict(article)    articles = models.Article.objects.all()    json_data = serializers.serialize(&quot;json&quot;, articles)    dict_data = json.loads(json_data)    result = &#123;        &#x27;code&#x27;: 0,        &#x27;ext&#x27;: &#x27;success&#x27;,        &#x27;article&#x27;: article,        &#x27;articles&#x27;: dict_data&#125;    return HttpResponse(json.dumps(result, ensure_ascii=False))

æ—¶é—´å¤„ç†ä¿®æ”¹æ—¶åŒºæŸ¥çœ‹db.sqlite3æ•°æ®åº“ï¼Œå¯ä»¥çœ‹åˆ°é€šè¿‡æ¥å£æ·»åŠ çš„æ•°æ®æ—¶é—´ä¸å¯¹ã€‚å‚è€ƒdjangoæ—¶é—´çš„æ—¶åŒºé—®é¢˜ï¼Œä¿®æ”¹settings.pyï¼š
USE_TZ = TrueTIME_ZONE = &#x27;Asia/Shanghai&#x27;

è®¾ç½®äº†USE_TZ=Trueï¼Œåˆ™å­˜å‚¨åˆ°æ•°æ®åº“ä¸­çš„æ—¶é—´æ°¸è¿œæ˜¯UTCæ—¶é—´ã€‚è®¾ç½®äº†TIME_ZONE = â€˜Asia/Shanghaiâ€™ï¼Œèƒ½ä¿è¯è¯æ¨¡æ¿æ—¶é—´çš„æ­£ç¡®æ˜¾ç¤ºã€‚
è¿™æ—¶å¦‚æœTIME_ZONE = â€˜UTCâ€™ï¼Œç”¨datetime.datetime.now()è·å–æ—¶é—´ï¼Œdjangoä¼šæŠŠè¿™ä¸ªæ—¶é—´å½“æˆUTCæ—¶é—´å­˜å‚¨åˆ°æ•°æ®åº“ä¸­å»ã€‚å¦‚æœä¿®æ”¹è®¾ç½®ä¸ºTIME_ZONE = â€˜Asia/Shanghaiâ€™ï¼Œç”¨datetime.datetime.now()è·å–æ—¶é—´ï¼Œdjangoä¼šæŠŠè¿™ä¸ªæ—¶é—´å½“æˆAsia/Shanghaiæ—¶é—´ï¼Œå³ä¸œå…«åŒºæ—¶é—´ï¼Œç„¶ådjangoä¼šæŠŠè¿™ä¸ªæ—¶é—´è½¬æˆå¸¦æ—¶åŒºUTCæ—¶é—´å­˜å‚¨åˆ°æ•°æ®åº“ä¸­å»ï¼Œè€Œè¯»çš„æ—¶å€™ç›´æ¥æŒ‰UTCæ—¶é—´è¯»å‡ºæ¥ï¼Œè¿™å°±æ˜¯å¾ˆå¤šäººé‡åˆ°çš„å­˜å‚¨åˆ°æ•°æ®åº“ä¸­çš„æ—¶é—´æ¯”æœ¬åœ°æ—¶é—´ä¼šå°8ä¸ªå°æ—¶çš„åŸå› ã€‚
å¦‚æœè¦è·å–å½“å‰æ—¶åŒºæ—¶é—´ï¼Œåˆ™ä½¿ç”¨django.utils.timezone.now()ã€‚
Modelå‚è€ƒdjangoï¼šDateTimeFieldå¦‚ä½•è‡ªåŠ¨è®¾ç½®ä¸ºå½“å‰æ—¶é—´å¹¶ä¸”èƒ½è¢«ä¿®æ”¹ï¼Œæˆ‘ä»¬æ¥ä¿®æ”¹ä¸€ä¸‹blog/models.pyã€‚
åˆ›å»ºdjangoçš„modelæ—¶ï¼Œæœ‰DateTimeFieldã€DateFieldå’ŒTimeFieldä¸‰ç§ç±»å‹å¯ä»¥ç”¨æ¥åˆ›å»ºæ—¥æœŸå­—æ®µï¼Œå…¶å€¼åˆ†åˆ«å¯¹åº”ç€datetime()ã€date()ã€time()ä¸‰ä¸­å¯¹è±¡ã€‚è¿™ä¸‰ä¸ªfieldæœ‰ç€ç›¸åŒçš„å‚æ•°auto_nowå’Œauto_now_addï¼Œè¡¨é¢ä¸Šçœ‹èµ·æ¥å¾ˆeasyï¼Œä½†å®é™…ä½¿ç”¨ä¸­å¾ˆå®¹æ˜“å‡ºé”™ï¼Œä¸‹é¢æ˜¯ä¸€äº›æ³¨æ„ç‚¹ã€‚
DateTimeField.auto_now
è¿™ä¸ªå‚æ•°çš„é»˜è®¤å€¼ä¸ºfalseï¼Œè®¾ç½®ä¸ºtrueæ—¶ï¼Œèƒ½å¤Ÿåœ¨ä¿å­˜è¯¥å­—æ®µæ—¶ï¼Œå°†å…¶å€¼è®¾ç½®ä¸ºå½“å‰æ—¶é—´ï¼Œå¹¶ä¸”æ¯æ¬¡ä¿®æ”¹modelï¼Œéƒ½ä¼šè‡ªåŠ¨æ›´æ–°ã€‚å› æ­¤è¿™ä¸ªå‚æ•°åœ¨éœ€è¦å­˜å‚¨â€œæœ€åä¿®æ”¹æ—¶é—´â€çš„åœºæ™¯ä¸‹ï¼Œååˆ†æ–¹ä¾¿ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè®¾ç½®è¯¥å‚æ•°ä¸ºtrueæ—¶ï¼Œå¹¶ä¸ç®€å•åœ°æ„å‘³ç€å­—æ®µçš„é»˜è®¤å€¼ä¸ºå½“å‰æ—¶é—´ï¼Œè€Œæ˜¯æŒ‡å­—æ®µä¼šè¢«â€œå¼ºåˆ¶â€æ›´æ–°åˆ°å½“å‰æ—¶é—´ï¼Œä½ æ— æ³•ç¨‹åºä¸­æ‰‹åŠ¨ä¸ºå­—æ®µèµ‹å€¼ï¼›å¦‚æœä½¿ç”¨djangoå†å¸¦çš„adminç®¡ç†å™¨ï¼Œé‚£ä¹ˆè¯¥å­—æ®µåœ¨adminä¸­æ˜¯åªè¯»çš„ã€‚
DateTimeField.auto_now_add
è¿™ä¸ªå‚æ•°çš„é»˜è®¤å€¼ä¹Ÿä¸ºFalseï¼Œè®¾ç½®ä¸ºTrueæ—¶ï¼Œä¼šåœ¨modelå¯¹è±¡ç¬¬ä¸€æ¬¡è¢«åˆ›å»ºæ—¶ï¼Œå°†å­—æ®µçš„å€¼è®¾ç½®ä¸ºåˆ›å»ºæ—¶çš„æ—¶é—´ï¼Œä»¥åä¿®æ”¹å¯¹è±¡æ—¶ï¼Œå­—æ®µçš„å€¼ä¸ä¼šå†æ›´æ–°ã€‚è¯¥å±æ€§é€šå¸¸è¢«ç”¨åœ¨å­˜å‚¨â€œåˆ›å»ºæ—¶é—´â€çš„åœºæ™¯ä¸‹ã€‚ä¸auto_nowç±»ä¼¼ï¼Œauto_now_addä¹Ÿå…·æœ‰å¼ºåˆ¶æ€§ï¼Œä¸€æ—¦è¢«è®¾ç½®ä¸ºTrueï¼Œå°±æ— æ³•åœ¨ç¨‹åºä¸­æ‰‹åŠ¨ä¸ºå­—æ®µèµ‹å€¼ï¼Œåœ¨adminä¸­å­—æ®µä¹Ÿä¼šæˆä¸ºåªè¯»çš„ã€‚
å¦‚ä½•å°†åˆ›å»ºæ—¶é—´è®¾ç½®ä¸ºâ€œé»˜è®¤å½“å‰â€å¹¶ä¸”å¯ä¿®æ”¹
é‚£ä¹ˆé—®é¢˜æ¥äº†ã€‚å®é™…åœºæ™¯ä¸­ï¼Œå¾€å¾€æ—¢å¸Œæœ›åœ¨å¯¹è±¡çš„åˆ›å»ºæ—¶é—´é»˜è®¤è¢«è®¾ç½®ä¸ºå½“å‰å€¼ï¼Œåˆå¸Œæœ›èƒ½åœ¨æ—¥åä¿®æ”¹å®ƒã€‚æ€ä¹ˆå®ç°è¿™ç§éœ€æ±‚å‘¢ï¼Ÿ
djangoä¸­æ‰€æœ‰çš„modelå­—æ®µéƒ½æ‹¥æœ‰ä¸€ä¸ªdefaultå‚æ•°ï¼Œç”¨æ¥ç»™å­—æ®µè®¾ç½®é»˜è®¤å€¼ã€‚å¯ä»¥ç”¨default=timezone.nowæ¥æ›¿æ¢auto_now=Trueæˆ–auto_now_add=Trueã€‚timezone.nowå¯¹åº”ç€django.utils.timezone.now()ï¼Œå› æ­¤éœ€è¦å†™æˆç±»ä¼¼ä¸‹é¢çš„å½¢å¼ï¼š
from django.db import modelsimport django.utils.timezone as timezoneclass Article(models.Model):    title = models.CharField(max_length=32, default=&#x27;Title&#x27;)    content = models.TextField(null=True)    pub_time = models.DateTimeField(&#x27;å‘å¸ƒæ—¥æœŸ&#x27;, default=timezone.now)    def __str__(self):        return self.title

DateEncoderç»è¿‡ä¸Šé¢çš„ä¿®æ”¹ï¼Œæ—¶é—´æ˜¯å¯ä»¥ä¿®æ”¹äº†ï¼Œä½†æ˜¯åŒæ—¶å¼•å…¥äº†å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨addæ¥å£ä¸­ï¼Œjson.dumps()å‡½æ•°ä¼šæŠ¥é”™ï¼š
TypeError: Object of type &#x27;datetime&#x27; is not JSON serializable

è¿™æ˜¯å› ä¸ºjson.dumps()å‡½æ•°æ— æ³•è§£ædatetimeæ ¼å¼çš„æ•°æ®ã€‚é—®é¢˜æ¥äº†ï¼Œauto_now=Trueæ—¶ï¼Œjson.dumps()å´å¯ä»¥è§£æï¼Œè«éæ­¤æ—¶ä¸æ˜¯datetimeæ ¼å¼ï¼Ÿä¸”ä¸ç®¡å®ƒï¼Œæˆ‘ä»¬å…ˆè§£å†³datetimeè½¬jsoné—®é¢˜ã€‚
import json  import datetimeclass DateEncoder(json.JSONEncoder):    def default(self, obj):        if isinstance(obj, datetime.datetime):            return obj.strftime(&#x27;%Y-%m-%d %H:%M:%S&#x27;)        elif isinstance(obj, date):            return obj.strftime(&#x27;%Y-%m-%d&#x27;)        else:            return json.JSONEncoder.default(self, obj)

åœ¨ä½¿ç”¨json.dumps()å‡½æ•°æ—¶ï¼Œæ·»åŠ clså‚æ•°ï¼š
json.dumps(result, cls=DateEncoder, ensure_ascii=False)

é¡µé¢æ¸²æŸ“è®¾ç½®å¥½æ—¶åŒºåï¼Œåœ¨é¡µé¢æ¸²æŸ“æ—¶ï¼Œä¼šè‡ªåŠ¨è½¬åŒ–æˆå½“å‰æ—¶åŒºæ—¶é—´ï¼Œä¾‹å¦‚Nov. 29, 2017, 1:49 p.m.
ä½†æ˜¯ï¼Œè¿™ç§æ ¼å¼ä¸ç¬¦åˆæˆ‘ä»¬çš„é˜…è¯»ä¹ æƒ¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¸²æŸ“æ—¶æ”¹æˆè‡ªå·±å–œæ¬¢çš„æ ¼å¼ï¼š
&#123;&#123;article.pub_time|date:&quot;Y-m-d H:i:s&quot;&#125;&#125;

æ­¤æ—¶ï¼Œè¾“å‡ºåˆ°é¡µé¢çš„æ ¼å¼å°±å˜æˆäº†2017-11-29 13:49:44
json UTCå¤„ç†ä»¥addæ¥å£ä¸ºä¾‹ï¼Œä»æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºçš„æ•°æ®æ—¶é—´æ˜¯UTCæ ¼å¼çš„ï¼Œä¾‹å¦‚2017-11-29T05:49:44.092Z
æ€è·¯ä¸€ï¼šç›´æ¥è¿”å›UTCæ ¼å¼æ•°æ®ç»™å‰ç«¯ï¼Œå‰ç«¯æ¥å®Œæˆæ ¼å¼åŒ–ï¼Œå‚è€ƒjsæ ¼å¼åŒ–jsonä¼ æ¥çš„UTCæ ¼å¼çš„æ—¶é—´ï¼Œæˆ–è€…ä½¿ç”¨æ”¯æŒUTCæ ¼å¼åŒ–çš„æ¨¡æ¿å¼•æ“ã€‚
æ€è·¯äºŒï¼šå‚è€ƒéå†QuerySetï¼Œç»™æ¯ä¸€ä¸ªpub_timeè½¬æ¢æ ¼å¼ï¼š
import datetimeimport timedef utc2local(utc_st):    # UTCæ—¶é—´è½¬æœ¬åœ°æ—¶é—´ï¼ˆ+8:00ï¼‰    now_stamp = time.time()    local_time = datetime.datetime.fromtimestamp(now_stamp)    utc_time = datetime.datetime.utcfromtimestamp(now_stamp)    offset = local_time - utc_time    local_st = utc_st + offset    return local_st

for item in articles:    # print(item.pub_time)    local_time = utc2local(item.pub_time)    # UTC_FORMAT = &quot;%Y-%m-%dT%H:%M:%S.%fZ&quot;    LOCAL_FORMAT = &quot;%Y-%m-%d %H:%M:%S&quot;    # print(local_time.strftime(LOCAL_FORMAT))    local_time_str = local_time.strftime(LOCAL_FORMAT)    item.pub_time = datetime.datetime.strptime(local_time_str, LOCAL_FORMAT)

è¿™ç§æ–¹æ³•è¿”å›çš„æ—¶é—´ï¼Œæ ¼å¼ä¸º2017-11-29T13:49:44ï¼Œè¿˜æ˜¯æœ‰é—®é¢˜ï¼Œå¤šäº†ä¸ªTã€‚æˆ‘ä»¬ä¸ºä»€ä¹ˆä¸æŠŠlocal_time_strèµ‹å€¼ç»™item.pub_timeå‘¢ï¼Ÿå› ä¸ºitem.put_timeé™åˆ¶æ•°æ®ç±»å‹ä¸ºdatetimeã€‚
æ€è·¯ä¸‰ï¼šå­˜å‚¨æ—¶ï¼Œç›´æ¥å­˜å‚¨å­—ç¬¦ä¸²æ ¼å¼çš„æ—¶é—´ã€‚ä¿®æ”¹blog/models.pyå¦‚ä¸‹ï¼š
from django.db import models# Create your models here.class Article(models.Model):    title = models.CharField(max_length=32, default=&#x27;Title&#x27;)    content = models.TextField(null=True)    # pub_time = models.DateTimeField(&#x27;å‘å¸ƒæ—¥æœŸ&#x27;, default=timezone.now)    pub_time = models.CharField(max_length=64, default=&#x27;&#x27;)    def __str__(self):        return self.title

ä¿®æ”¹addå’Œeditæ¥å£ä¸ºï¼š
import jsonfrom django.forms.models import model_to_dictfrom django.views.decorators.csrf import csrf_exemptimport datetimeimport timefrom django.utils import timezone@csrf_exemptdef add(request):    title = request.POST.get(&#x27;title&#x27;, &#x27;defaultTitle&#x27;)    content = request.POST.get(&#x27;content&#x27;, &#x27;defaultContent&#x27;)        pub_time = utc2local(timezone.now())    LOCAL_FORMAT = &quot;%Y-%m-%d %H:%M:%S&quot;    pub_time = pub_time.strftime(LOCAL_FORMAT)    article = models.Article.objects.create(title=title, content=content, pub_time=pub_time)    article = model_to_dict(article)    result = &#123;        &#x27;code&#x27;: 0,        &#x27;ext&#x27;: &#x27;success&#x27;,        &#x27;article&#x27;: article&#125;    return HttpResponse(json.dumps(result, ensure_ascii=False))@csrf_exemptdef edit(request):    article_id = request.POST.get(&#x27;id&#x27;, 0)    title = request.POST.get(&#x27;title&#x27;, &#x27;defaultTitle&#x27;)    content = request.POST.get(&#x27;content&#x27;, &#x27;defaultContent&#x27;)    pub_time = utc2local(timezone.now())    LOCAL_FORMAT = &quot;%Y-%m-%d %H:%M:%S&quot;    pub_time = pub_time.strftime(LOCAL_FORMAT)    article = models.Article.objects.get(pk=article_id)    article.title = title    article.content = content    article.pub_time = pub_time    article.save()    article = model_to_dict(article)    result = &#123;        &#x27;code&#x27;: 0,        &#x27;ext&#x27;: &#x27;success&#x27;,        &#x27;article&#x27;: article&#125;    return HttpResponse(json.dumps(result, ensure_ascii=False))def utc2local(utc_st):    # UTCæ—¶é—´è½¬æœ¬åœ°æ—¶é—´ï¼ˆ+8:00ï¼‰    now_stamp = time.time()    local_time = datetime.datetime.fromtimestamp(now_stamp)    utc_time = datetime.datetime.utcfromtimestamp(now_stamp)    offset = local_time - utc_time    local_st = utc_st + offset    return local_st

æºç åˆ†äº«https://github.com/voidking/djsite/releases/tag/v0.1.0
å°ç»“è‡³æ­¤ï¼Œæ¶‰çŒäº†djangoå¼€å‘blogæ‰€éœ€è¦çš„åŸºæœ¬çŸ¥è¯†ã€‚ä¸‹æ–‡ä¸­ï¼Œå°†ä¼šåœ¨å®æˆ˜ä¸­å­¦ä¹ djangoæ›´é«˜çº§çš„ç”¨æ³•ã€‚
ä¹¦ç­¾djangoå…¥é—¨ä¸å®è·µ
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>django</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoå…¥é—¨</title>
    <url>/dev-django-start/</url>
    <content><![CDATA[Djangoç®€ä»‹Djangoæ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„Webåº”ç”¨æ¡†æ¶ï¼Œç”±Pythonå†™æˆã€‚é‡‡ç”¨äº†MVCçš„æ¡†æ¶æ¨¡å¼ï¼Œå³æ¨¡å‹Mï¼Œè§†å›¾Vå’Œæ§åˆ¶å™¨Cã€‚å®ƒæœ€åˆæ˜¯è¢«å¼€å‘æ¥ç”¨äºç®¡ç†åŠ³ä¼¦æ–¯å‡ºç‰ˆé›†å›¢æ——ä¸‹çš„ä¸€äº›ä»¥æ–°é—»å†…å®¹ä¸ºä¸»çš„ç½‘ç«™çš„ï¼Œå³æ˜¯CMSï¼ˆå†…å®¹ç®¡ç†ç³»ç»Ÿï¼‰è½¯ä»¶ã€‚å¹¶äº2005å¹´7æœˆåœ¨BSDè®¸å¯è¯ä¸‹å‘å¸ƒã€‚


å®‰è£…Djangoå®‰è£…æ–¹æ³•ä¸€ï¼špip install django
å®‰è£…æ–¹æ³•äºŒï¼š
git clone https://github.com/django/django.gitcd djangopip setup.py installpython -m django --version

åˆ›å»ºé¡¹ç›®1ã€åˆ›å»ºdjangoé¡¹ç›®ï¼Œå‘½åä¸ºdjsitedjango-admin startproject djsite
2ã€è¿è¡Œdjsitecd djsiteï¼Œpython manage.py runserver
3ã€æµ‹è¯•è®¿é—®æµè§ˆå™¨è®¿é—® http://localhost:8000/ ï¼Œå³å¯çœ‹åˆ°ç¬¬ä¸€ä¸ªdjangoé¡µé¢ã€‚
4ã€è¿è¡Œdjsiteè¿›é˜¶python manage.py runserver 0.0.0.0:8080 ï¼Œæ­¤æ—¶ï¼Œå…è®¸ä»»æ„ipå¯ä»¥è®¿é—®ï¼Œç«¯å£ä¸º8080ã€‚
ç›®å½•ç»“æ„djsiteâ”‚  db.sqlite3â”‚  manage.pyâ”‚â””â”€djsite    â”‚  settings.py    â”‚  urls.py    â”‚  wsgi.py    â””â”€__init__.py


__init__.pyï¼Œè¡¨ç¤ºdjsiteæ˜¯ä¸€ä¸ªæ¨¡å—
manage.pyï¼Œç®¡ç†å‘½ä»¤æ–‡ä»¶
settings.pyï¼Œå…¨å±€é…ç½®æ–‡ä»¶
urls.pyï¼Œè·¯ç”±é…ç½®
wsgi.pyï¼Œé…ç½®nginxã€apacheå¯¹æ¥

djangoä¸­çš„å„ç§å‘½ä»¤ï¼Œéƒ½æ˜¯åœ¨manage.pyä¸­å®Œæˆçš„ã€‚

å¯åŠ¨æœåŠ¡å™¨ï¼Œpython manage.py runserver
åˆ›å»ºåº”ç”¨ï¼Œpython manage.py startapp blog
è¿›å…¥shellï¼Œpython manage.py shell
åˆ›å»ºmodelï¼Œpython manage.py makemigrations
æ ¹æ®modelæ›´æ–°æ•°æ®åº“è¡¨ï¼Œpython manage.py migrate

åˆ›å»ºåº”ç”¨djangoä¸­ä»¥åº”ç”¨æ¥åˆ†å‰²åŠŸèƒ½ï¼Œä½¿ç»“æ„æ¸…æ™°ï¼Œæ–¹ä¾¿å¤ç”¨ã€‚
1ã€åˆ›å»ºblogåº”ç”¨python manage.py startapp blog
2ã€æ·»åŠ blogåº”ç”¨åˆ°settings.py
# Application definitionINSTALLED_APPS = [    &#x27;django.contrib.admin&#x27;,    &#x27;django.contrib.auth&#x27;,    &#x27;django.contrib.contenttypes&#x27;,    &#x27;django.contrib.sessions&#x27;,    &#x27;django.contrib.messages&#x27;,    &#x27;django.contrib.staticfiles&#x27;,    &#x27;blog&#x27;,]

3ã€blogçš„ç›®å½•ç»“æ„å¦‚ä¸‹
blogâ”‚  admin.pyâ”‚  apps.pyâ”‚  models.pyâ”‚  tests.pyâ”‚  views.pyâ”‚  __init__.pyâ”‚â””â”€migrations        __init__.py


admin.pyï¼Œå½“å‰åº”ç”¨åå°ç®¡ç†é…ç½®
apps.pyï¼Œå½“å‰åº”ç”¨é…ç½®
models.pyï¼Œå®šä¹‰æ•°æ®åº“è¡¨
tests.pyï¼Œæµ‹è¯•ç›¸å…³
views.pyï¼Œæ‰§è¡Œå“åº”
migrationsï¼Œæ•°æ®è¿ç§»æ¨¡å—

4ã€helloworldç¼–è¾‘views.pyï¼Œä¿®æ”¹ä¸ºï¼š
from django.shortcuts import renderfrom django.http import HttpResponse# Create your views here.def hello(request):    return HttpResponse(&#x27;helloworld&#x27;)

5ã€ä¸ºäº†è®¿é—®åˆ°views.pyï¼Œæˆ‘ä»¬è¦é…ç½®ä¸‹è·¯ç”±ï¼Œä¿®æ”¹urls.pyä¸ºï¼š
from blog.views import hellourlpatterns = [    url(r&#x27;^admin/&#x27;, admin.site.urls),    url(r&#x27;helloworld&#x27;, hello),]

6ã€æµ‹è¯•è®¿é—®å¯åŠ¨djangoï¼Œè®¿é—® http://localhost:8000/helloworld ï¼Œå³å¯çœ‹åˆ°helloworldã€‚
è·¯ç”±è¿›é˜¶1ã€ä¿®æ”¹djsite/urls.pyä¸ºï¼š
from django.conf.urls import url,includefrom django.contrib import adminurlpatterns = [    url(r&#x27;^admin/&#x27;, admin.site.urls),    url(r&#x27;^blog/&#x27;, include(&#x27;blog.urls&#x27;, namespace=&quot;blog&quot;)),]

2ã€åœ¨blogä¸­æ·»åŠ urls.pyä¸ºï¼š
from django.conf.urls import urlfrom . import viewsurlpatterns = [    # url(r&#x27;^$&#x27;, views.index, name=&#x27;index&#x27;),    url(r&#x27;helloworld&#x27;, views.hello, name=&#x27;hello&#x27;)]

3ã€æµ‹è¯•è®¿é—®å¯åŠ¨djangoï¼Œè®¿é—® http://localhost:8000/blog/helloworld ï¼Œå³å¯çœ‹åˆ°helloworldã€‚
æºç åˆ†äº«https://github.com/voidking/djsite/releases/tag/v0.0.0
ä¹¦ç­¾djangoåˆä½“æ£€
pycharm æ•™ç¨‹ï¼ˆä¸€ï¼‰å®‰è£…å’Œé¦–æ¬¡ä½¿ç”¨
Django URLç®¡ç†
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>django</tag>
        <tag>pycharm</tag>
      </tags>
  </entry>
  <entry>
    <title>Dubboå…¥é—¨ç¯‡</title>
    <url>/dev-dubbo-start/</url>
    <content><![CDATA[Dubboç®€ä»‹Dubboæ˜¯é˜¿é‡Œå·´å·´å…¬å¸å¼€æºçš„ä¸€ä¸ªé«˜æ€§èƒ½çš„åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶ï¼Œä½¿å¾—åº”ç”¨å¯é€šè¿‡é«˜æ€§èƒ½çš„RPCå®ç°æœåŠ¡çš„è¾“å‡ºå’Œè¾“å…¥åŠŸèƒ½ï¼Œå¯ä»¥å’ŒSpringæ¡†æ¶æ— ç¼é›†æˆã€‚
RPCï¼ˆRemote Procedure Callï¼‰â€”â€”è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œå®ƒæ˜¯ä¸€ç§é€šè¿‡ç½‘ç»œä»è¿œç¨‹è®¡ç®—æœºç¨‹åºä¸Šè¯·æ±‚æœåŠ¡ï¼Œè€Œä¸éœ€è¦äº†è§£åº•å±‚ç½‘ç»œæŠ€æœ¯çš„åè®®ã€‚RPCåè®®å‡å®šæŸäº›ä¼ è¾“åè®®çš„å­˜åœ¨ï¼Œå¦‚TCPæˆ–UDPï¼Œä¸ºé€šä¿¡ç¨‹åºä¹‹é—´æºå¸¦ä¿¡æ¯æ•°æ®ã€‚åœ¨OSIç½‘ç»œé€šä¿¡æ¨¡å‹ä¸­ï¼ŒRPCè·¨è¶Šäº†ä¼ è¾“å±‚å’Œåº”ç”¨å±‚ã€‚RPCä½¿å¾—å¼€å‘åŒ…æ‹¬ç½‘ç»œåˆ†å¸ƒå¼å¤šç¨‹åºåœ¨å†…çš„åº”ç”¨ç¨‹åºæ›´åŠ å®¹æ˜“ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Dubboå®˜ç½‘
Dubboå®˜æ–¹æ–‡æ¡£
åŸºäºDubboæ¡†æ¶æ„å»ºåˆ†å¸ƒå¼æœåŠ¡
Dubboæ¶æ„è®¾è®¡è¯¦è§£
Dubboå…¥é—¨â€”æ­å»ºä¸€ä¸ªæœ€ç®€å•çš„Demoæ¡†æ¶
Dubboæºç å­¦ä¹ ï¼ˆä¸€ï¼‰ä¹‹dubbo-demo
pom.xml ç¼ºå°‘commons-poolä¾èµ–ï¼Œå¯¼è‡´ç¼–è¯‘å¤±è´¥
åŸºäºDubboçš„Hessianåè®®å®ç°è¿œç¨‹è°ƒç”¨
Dubboå®ç°RPCè°ƒç”¨ä½¿ç”¨å…¥é—¨
åŸºäºdubboæ¡†æ¶ä¸‹çš„RPCé€šè®¯åè®®æ€§èƒ½æµ‹è¯•



æœåŠ¡è°ƒç”¨æµç¨‹
1ã€æœåŠ¡å®¹å™¨è´Ÿè´£å¯åŠ¨ï¼ŒåŠ è½½ï¼Œè¿è¡ŒæœåŠ¡æä¾›è€…ã€‚2ã€æœåŠ¡æä¾›è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±æä¾›çš„æœåŠ¡ã€‚3ã€æœåŠ¡æ¶ˆè´¹è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒè®¢é˜…è‡ªå·±æ‰€éœ€çš„æœåŠ¡ã€‚4ã€æ³¨å†Œä¸­å¿ƒè¿”å›æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…ï¼Œå¦‚æœæœ‰å˜æ›´ï¼Œæ³¨å†Œä¸­å¿ƒå°†åŸºäºé•¿è¿æ¥æ¨é€å˜æ›´æ•°æ®ç»™æ¶ˆè´¹è€…ã€‚5ã€æœåŠ¡æ¶ˆè´¹è€…ï¼Œä»æä¾›è€…åœ°å€åˆ—è¡¨ä¸­ï¼ŒåŸºäºè½¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰ä¸€å°æä¾›è€…è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æœè°ƒç”¨å¤±è´¥ï¼Œå†é€‰å¦ä¸€å°è°ƒç”¨ã€‚6ã€æœåŠ¡æ¶ˆè´¹è€…å’Œæä¾›è€…ï¼Œåœ¨å†…å­˜ä¸­ç´¯è®¡è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´ï¼Œå®šæ—¶æ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ç»Ÿè®¡æ•°æ®åˆ°ç›‘æ§ä¸­å¿ƒ
Dubboæ³¨å†Œä¸­å¿ƒDubboæä¾›çš„æ³¨å†Œä¸­å¿ƒæœ‰å¦‚ä¸‹å‡ ç§ç±»å‹å¯ä¾›é€‰æ‹©ï¼š

Multicastæ³¨å†Œä¸­å¿ƒ
Zookeeperæ³¨å†Œä¸­å¿ƒ
Redisæ³¨å†Œä¸­å¿ƒ
Simpleæ³¨å†Œä¸­å¿ƒ

æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨Zookeeperä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼ŒZookeeperå®‰è£…é…ç½®æ–¹æ³•å‚è€ƒæ–‡æ¡£ã€ŠZookeeperå…¥é—¨ç¯‡ã€‹ã€‚
dubbo-admindubboçš„ä½¿ç”¨ï¼Œå…¶å®åªéœ€è¦æœ‰æ³¨å†Œä¸­å¿ƒã€æä¾›è€…ã€æ¶ˆè´¹è€…è¿™ä¸‰ä¸ªå°±å¯ä»¥ä½¿ç”¨äº†ï¼Œä½†æ˜¯å¹¶ä¸èƒ½çœ‹åˆ°æœ‰å“ªäº›æ¶ˆè´¹è€…å’Œæä¾›è€…ï¼Œä¸ºäº†æ›´å¥½çš„è°ƒè¯•ï¼Œå‘ç°é—®é¢˜ï¼Œè§£å†³é—®é¢˜ï¼Œå› æ­¤å¼•å…¥dubbo-adminã€‚é€šè¿‡dubbo-adminå¯ä»¥å¯¹æ¶ˆè´¹è€…å’Œæä¾›è€…è¿›è¡Œç®¡ç†ã€‚
1ã€æºç ä¸‹è½½
git clone https://github.com/alibaba/dubbo.git

è¿™ä»½æºç ï¼Œä¸æ­¢åŒ…å«dubbo-adminï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–ä»£ç ï¼Œæ¯”å¦‚dubbo-demoã€dubbo-configç­‰ã€‚
2ã€ç¼–è¯‘dubbo-adminè¿›å…¥dubbo-adminç›®å½•ï¼Œæ‰“å¼€å‘½ä»¤è¡Œï¼Œæ‰§è¡Œï¼š
mvn package -Dmaven.skip.test=true

å³å¯åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆtargetæ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹ä¸­çš„waråŒ…å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶ã€‚
3ã€éƒ¨ç½²dubbo-adminæŠŠwaråŒ…æ”¾åˆ°tomcatçš„webappsç›®å½•ä¸‹ï¼Œé‡å‘½åä¸ºdubbo-admin.warã€‚
4ã€å¯åŠ¨tomcatè¿›å…¥tomcatçš„binç›®å½•ï¼Œç„¶ååŒå‡»startup.batã€‚
5ã€æµ‹è¯•è®¿é—®tomcatä¼šè‡ªåŠ¨è§£å‹waråŒ…ï¼Œè¿™æ—¶è®¿é—® http://localhost:8080/dubbo-admin ï¼Œå³å¯çœ‹åˆ°éƒ¨ç½²åçš„æ•ˆæœã€‚
6ã€ç”¨æˆ·åå¯†ç é¡µé¢æç¤ºè¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œé»˜è®¤ç”¨æˆ·åå¯†ç éƒ½æ˜¯rootã€‚ç”¨æˆ·åå¯†ç é…ç½®è·¯å¾„ï¼štomcat/webapps/dubbo-admin/WEB-INF/dubbo.properties
dubbo-demoåœ¨ä¸Šé¢ä¸‹è½½çš„æºç ä¸­ï¼ŒåŒ…å«dubbo-demoã€‚
1ã€æ‰“å¼€dubboæ–‡ä»¶å¤¹ï¼Œæ„å»ºæºç ï¼Œç”ŸæˆIDEAæ”¯æŒçš„é¡¹ç›®æ–‡ä»¶
mvn clean install -Dmaven.test.skipmvn idea:idea

ç¼–è¯‘æ—¶ï¼ŒæŠ¥é”™ï¼šFailed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile) on project dubbo-demo-provider: Compilation failure -&gt; [Help 1]
æ”¹mavené…ç½®ï¼Œå¤±è´¥ã€‚æ›´æ¢mavenç‰ˆæœ¬ï¼Œå¤±è´¥ã€‚æ€’åˆ C:\Users\voidking\.m2\repositoryä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼ŒæˆåŠŸã€‚
2ã€IDEAæ‰“å¼€ç”Ÿæˆçš„dubbo-parent.ipræ–‡ä»¶ï¼Œå°±å¯ä»¥çœ‹åˆ°æ•´ä¸ªdubboçš„å·¥ç¨‹äº†ã€‚
3ã€è¿è¡ŒProvider.javaæŠ¥é”™ï¼šError:Maven Resources Compiler: Maven project configuration required for module â€˜hessian-liteâ€™ isnâ€™t available. Compilation of Maven projects is supported only if external build is started from an IDE.
æ‰“å¼€çª—å£å³ä¾§Maven Projectï¼Œç‚¹å‡»åŠ å·é€‰æ‹©dubboæ ¹ç›®å½•ä¸‹çš„pom.xmlï¼Œå†æ¬¡è¿è¡ŒProvider.javaã€‚
å¦‚æœæ²¡æœ‰æŠ¥é”™ï¼Œåˆ™è¯´æ˜Provider.javaè¿è¡ŒæˆåŠŸï¼Œå®ƒä¼šä¿æŒåœ¨è¿è¡ŒçŠ¶æ€ã€‚
4ã€è¿è¡ŒConsumer.javaè¿è¡ŒæˆåŠŸçš„è¯ï¼Œå¯ä»¥çœ‹åˆ°Consumeræ§åˆ¶å°æ‰“å°å‡º Hello world, response form provider: 169.254.36.242:20880ï¼ŒåŒæ—¶ï¼ŒProvideræ§åˆ¶å°æ‰“å°å‡ºHello world, request from consumer: /169.254.36.242:54924ã€‚
5ã€æ‰“å¼€dubbo-adminï¼Œå´çœ‹ä¸åˆ°æä¾›è€…ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨è¿è¡ŒProviderçš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰æŒ‡å®šZookeeperä½œä¸ºæ³¨å†Œä¸­å¿ƒã€‚
6ã€ä¿®æ”¹dubbo-demo-provider.xmlå’Œdubbo-demo-consumer.xmlä¸­çš„registryã€‚
&lt;!-- ä½¿ç”¨multicastå¹¿æ’­æ³¨å†Œä¸­å¿ƒæš´éœ²æœåŠ¡åœ°å€ --&gt;&lt;!--&lt;dubbo:registry address=&quot;multicast://224.5.6.7:1234&quot;/&gt;--&gt;&lt;dubbo:registry address=&quot;zookeeper://localhost:2181&quot;/&gt;

7ã€é‡æ–°è¿è¡ŒProvider.javaï¼Œå³å¯çœ‹åˆ°æä¾›è€…ã€‚é‡æ–°è¿è¡ŒConsumer.javaï¼Œå´çœ‹ä¸åˆ°æ¶ˆè´¹è€…ï¼Œè¿™æ˜¯å› ä¸ºæ¶ˆè´¹è€…æ¶ˆè´¹åæŠŠsocketå…³é—­äº†ã€‚ä¿®æ”¹Consumer.javaï¼Œæ·»åŠ System.in.read();å¹¶ä¸”æŠ›å‡ºå¼‚å¸¸ï¼Œé‡æ–°è¿è¡Œå³å¯åœ¨dubbo-adminä¸­çœ‹åˆ°æ¶ˆè´¹è€…ã€‚
å°ç»“è‡³æ­¤ï¼Œdubboçš„æœ€ç®€å•demoè¿è¡ŒæˆåŠŸã€‚dubboæ”¯æŒå¤šç§åè®®ï¼Œé€šè¿‡åè®®ï¼Œå¯ä»¥å®ç°ä¸åŒè¯­è¨€é—´çš„ç›¸äº’è°ƒç”¨ã€‚æ¥ä¸‹æ¥ï¼Œéœ€è¦ç ”ç©¶pythonè°ƒç”¨dubboæœåŠ¡ã€‚å¾…ç»­ã€‚ã€‚ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>zookeeper</tag>
        <tag>dubbo</tag>
      </tags>
  </entry>
  <entry>
    <title>Zookeeperå…¥é—¨ç¯‡</title>
    <url>/dev-zookeeper-start/</url>
    <content><![CDATA[Zookeeperç®€ä»‹
Official Introduction: ZooKeeper is a centralized service for maintaining configuration information, naming, providing distributed synchronization, and providing group services. All of these kinds of services are used in some form or another by distributed applications. Each time they are implemented there is a lot of work that goes into fixing the bugs and race conditions that are inevitable. Because of the difficulty of implementing these kinds of services, applications initially usually skimp on them, which make them brittle in the presence of change and difficult to manage. Even when done correctly, different implementations of these services lead to management complexity when the applications are deployed.

ZooKeeperæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºåè°ƒæœåŠ¡ï¼Œå®ƒæä¾›äº†åˆ†å¸ƒå¼é”ã€é…ç½®ç®¡ç†ã€å‘½åæœåŠ¡ã€é›†ç¾¤ç®¡ç†ç­‰åŠŸèƒ½ã€‚å®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªé«˜åº¦å¯é çš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼Œä½¿å¾—åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºå¯ä»¥åœ¨ä¸åŒèŠ‚ç‚¹ä¹‹é—´å…±äº«ä¿¡æ¯å’ŒååŒå·¥ä½œã€‚ZooKeeperæœ€åˆç”±é›…è™ç ”ç©¶é™¢å¼€å‘ï¼Œå¹¶åœ¨Apacheè®¸å¯è¯ä¸‹å‘å¸ƒï¼Œç°åœ¨å·²ç»æˆä¸ºä¸€ä¸ªApacheè½¯ä»¶åŸºé‡‘ä¼šçš„å¼€æºé¡¹ç›®ã€‚
ZooKeeperçš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªå…·æœ‰é«˜å¯ç”¨æ€§çš„åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨ç³»ç»Ÿï¼Œå®ƒå¯ä»¥å­˜å‚¨å’Œæ£€ç´¢åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºçš„å…ƒæ•°æ®ã€é…ç½®ä¿¡æ¯ã€çŠ¶æ€ç­‰ã€‚ZooKeeperçš„æ•°æ®å­˜å‚¨é‡‡ç”¨å†…å­˜æ˜ å°„æ–‡ä»¶æ–¹å¼ï¼Œæ”¯æŒå¿«é€Ÿè¯»å†™å’Œé«˜å¹¶å‘æ€§ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

What is ZooKeeper?
zookeeperä»‹ç»åŠè¿ç»´å®è·µ



ZooKeeperçš„åŸºæœ¬æ¦‚å¿µèŠ‚ç‚¹ï¼šZooKeeperä¸­çš„æ•°æ®å­˜å‚¨å•å…ƒï¼Œå¯ä»¥æ˜¯æ–‡ä»¶æˆ–ç›®å½•ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªè·¯å¾„å’Œä¸€ä¸ªæ•°æ®å†…å®¹ï¼Œå¯ä»¥ç”¨æ¥å­˜å‚¨å…ƒæ•°æ®ã€é…ç½®ä¿¡æ¯ç­‰ã€‚
ç‰ˆæœ¬ï¼šæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œç”¨äºæ£€æµ‹æ•°æ®å˜æ›´ã€‚
ä¼šè¯ï¼šå®¢æˆ·ç«¯ä¸ZooKeeperæœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥ï¼Œç”¨äºå®ç°æ•°æ®çš„è¯»å†™å’Œåè°ƒå·¥ä½œã€‚ä¼šè¯å¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œç”¨äºæ§åˆ¶ä¼šè¯çš„ç”Ÿå‘½å‘¨æœŸã€‚
è§‚å¯Ÿè€…ï¼šå®¢æˆ·ç«¯å¯ä»¥æ³¨å†Œä¸€ä¸ªè§‚å¯Ÿå™¨ï¼Œç”¨äºç›‘å¬èŠ‚ç‚¹çš„å˜åŒ–ï¼Œå¹¶åœ¨èŠ‚ç‚¹å˜åŒ–æ—¶å¾—åˆ°é€šçŸ¥ã€‚
ZooKeeperçš„åº”ç”¨åœºæ™¯åˆ†å¸ƒå¼é”ï¼šZooKeeperå¯ä»¥æä¾›åˆ†å¸ƒå¼é”çš„å®ç°ï¼Œä½¿å¾—å¤šä¸ªåº”ç”¨ç¨‹åºå¯ä»¥åœ¨ä¸åŒèŠ‚ç‚¹ä¹‹é—´ååŒå·¥ä½œã€‚
é…ç½®ç®¡ç†ï¼šZooKeeperå¯ä»¥ç”¨æ¥å­˜å‚¨å’Œæ£€ç´¢åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯ï¼Œä½¿å¾—å¤šä¸ªåº”ç”¨ç¨‹åºå¯ä»¥å…±äº«é…ç½®ä¿¡æ¯ã€‚
å‘½åæœåŠ¡ï¼šZooKeeperå¯ä»¥ç”¨æ¥å­˜å‚¨å’Œæ£€ç´¢åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºçš„å‘½åç©ºé—´ï¼Œä½¿å¾—å¤šä¸ªåº”ç”¨ç¨‹åºå¯ä»¥å…±äº«å‘½åç©ºé—´ã€‚
é›†ç¾¤ç®¡ç†ï¼šZooKeeperå¯ä»¥ç”¨æ¥ç®¡ç†åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºçš„é›†ç¾¤ï¼ŒåŒ…æ‹¬èŠ‚ç‚¹çš„åŠ å…¥ã€é€€å‡ºã€çŠ¶æ€æ£€æµ‹ç­‰ã€‚
å®‰è£…é…ç½®Zookeeperå®‰è£…1ã€è®¿é—®zookeeperå®˜ç½‘ï¼Œä¸‹è½½ä¸€ä¸ªå–œæ¬¢çš„zookeeperç‰ˆæœ¬ï¼Œè¿™é‡ŒéƒåŒå­¦ä¸‹è½½çš„æ˜¯zookeeper-3.4.10.tar.gzã€‚
2ã€è§£å‹zookeeper-3.4.10.tar.gzåˆ°D:\Serverç›®å½•ã€‚
é…ç½®1ã€zookeeper çš„é…ç½®æ–‡ä»¶åœ¨ conf ç›®å½•ä¸‹ï¼Œæœ‰ zoo_sample.cfg å’Œ log4j.propertiesã€‚
2ã€å°†zoo_sample.cfgå¤åˆ¶ä¸€ä»½ï¼Œé‡å‘½åæˆzoo.cfgï¼Œå› ä¸ºzookeeperåœ¨å¯åŠ¨æ—¶ä¼šæ‰¾è¿™ä¸ªæ–‡ä»¶ä½œä¸ºé»˜è®¤é…ç½®æ–‡ä»¶ã€‚ä¸‹é¢ä»‹ç»zoo.cfgæ–‡ä»¶é‡Œé¢å‡ ä¸ªé…ç½®çš„æ„ä¹‰ï¼š

tickTimeï¼šè¿™ä¸ªæ—¶é—´æ˜¯ä½œä¸º Zookeeper æœåŠ¡å™¨ä¹‹é—´æˆ–å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´ç»´æŒå¿ƒè·³çš„æ—¶é—´é—´éš”ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ª tickTime æ—¶é—´å°±ä¼šå‘é€ä¸€ä¸ªå¿ƒè·³ã€‚ 
dataDirï¼šé¡¾åæ€ä¹‰å°±æ˜¯ Zookeeper ä¿å­˜æ•°æ®çš„ç›®å½•ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒZookeeper å°†å†™æ•°æ®çš„æ—¥å¿—æ–‡ä»¶ä¹Ÿä¿å­˜åœ¨è¿™ä¸ªç›®å½•é‡Œã€‚ 
clientPortï¼šè¿™ä¸ªç«¯å£å°±æ˜¯å®¢æˆ·ç«¯è¿æ¥ Zookeeper æœåŠ¡å™¨çš„ç«¯å£ï¼ŒZookeeper ä¼šç›‘å¬è¿™ä¸ªç«¯å£ï¼Œæ¥å—å®¢æˆ·ç«¯çš„è®¿é—®è¯·æ±‚ã€‚

3ã€åœ¨zookeeperçš„æ ¹ç›®å½•ä¸‹ï¼Œæ–°å»ºæ–‡ä»¶å¤¹dataã€‚ç„¶åä¿®æ”¹é…ç½®æ–‡ä»¶dataDirä¸ºï¼š
dataDir=D:\\Server\\zookeeper-3.4.10\\data

å¯åŠ¨1ã€zookeeper-3.4.10/binä¸‹å­˜åœ¨zkServer.cmdï¼ŒåŒå‡»å®ƒï¼Œå³å¯å¯åŠ¨zookeeperã€‚
2ã€æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¾“å…¥jspï¼Œå¦‚æœçœ‹åˆ°å¦‚ä¸‹æç¤ºï¼Œè¯´æ˜å¯åŠ¨æˆåŠŸã€‚
10336 RemoteMavenServer13488 Jps12268 QuorumPeerMain13052

ä½¿ç”¨ZookeeperPrettyZooä½¿ç”¨PrettyZooå¯ä»¥å›¾å½¢åŒ–è¿æ¥Zookeeperï¼Œç›´è§‚æ“ä½œZookeeperã€‚
å‚è€ƒæ–‡æ¡£ï¼švran-dev/PrettyZoo
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>chatgpt</tag>
        <tag>zookeeper</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidç»ˆç«¯Termux</title>
    <url>/dev-termux/</url>
    <content><![CDATA[termuxç®€ä»‹termuxæ˜¯ä¸ªéå¸¸å¼ºå¤§çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œèƒ½å¤Ÿåœ¨androidä¸Šæ¨¡æ‹Ÿlinuxç»ˆç«¯ã€‚æ¥ä¸‹æ¥ï¼ŒéƒåŒå­¦å°±åœ¨è‡ªå·±çš„Honor9ä¸Šå°è¯•ä¸€ä¸‹termuxã€‚


å®‰è£…termuxä»google playå®‰è£…ï¼ˆå·²åºŸå¼ƒï¼‰1ã€å®‰è£…google play2ã€google playä¸­æœç´¢â€œtermuxâ€3ã€ä¸‹è½½å®‰è£…termux
ä»githubå®‰è£…1ã€è®¿é—®termux-app/releases2ã€é€‰æ‹©apkå®‰è£…åŒ…ï¼Œè¿™é‡Œé€‰æ‹© github-debug_x86_64.apk ç‰ˆæœ¬3ã€ä¸‹è½½å®‰è£…å³å¯
å®‰è£…sshè¿ç»´ä»è®¿é—®è¿œç¨‹æœåŠ¡å™¨å¼€å§‹ï¼Œè¿™æ€ä¹ˆç¦»å¾—å¼€sshå‘½ä»¤ã€‚Termuxä¸è‡ªå¸¦sshå‘½ä»¤ï¼Œéœ€å…ˆå®‰è£…æ‰èƒ½ä½¿ç”¨ã€‚
1ã€å®‰è£…opensshapt install openssh
å®‰è£…çš„opensshåŒ…æ‹¬å®¢æˆ·ç«¯sshå’ŒæœåŠ¡ç«¯sshdï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æ—¢å¯ä»¥ä½¿ç”¨sshè®¿é—®è¿œç¨‹è®¾å¤‡ï¼Œä¹Ÿå¯ä»¥åœ¨æœ¬æœºä¸Šå¼€å¯sshæœåŠ¡ä»¥æ–¹ä¾¿å…¶ä»–è®¾å¤‡è¿œç¨‹è®¿é—®æœ¬æœºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®‰è£…opensshä¸å¼€å¯æœåŠ¡ç«¯ã€‚
2ã€å¼€å¯sshdæœåŠ¡ç«¯æ­£å¸¸å¯åŠ¨ï¼šsshdè°ƒè¯•æ¨¡å¼å¯åŠ¨ï¼šsshd -d
3ã€å…³é—­sshdæœåŠ¡ç«¯pkill sshdæˆ–è€…killall sshd
4ã€ä½¿ç”¨sshtermuxç»ˆç«¯ä¸­ä½¿ç”¨sshè®¿é—®è¿œç¨‹æœåŠ¡å™¨ï¼Œä¸linuxç»ˆç«¯ä¸­ä½¿ç”¨sshåˆ«æ— äºŒè‡´ã€‚ä½†è¦ä½¿ç”¨sshè®¿é—®androidè®¾å¤‡å°±ä¸åŒäº†ï¼Œtermuxç»ˆç«¯ä¸­sshdæœåŠ¡ä¸æ”¯æŒå¯†ç éªŒè¯ï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨æˆ·ä¸èƒ½æœŸæœ›é€šè¿‡ssh user@serverç„¶åè¾“å…¥ç”¨æˆ·å¯†ç çš„æ–¹å¼ä»åˆ«çš„ç»ˆç«¯è®¿é—®androidè®¾å¤‡ã€‚Termuxç»ˆç«¯ä¸­sshdåªæ”¯æŒå¯†é’¥éªŒè¯ã€‚
5ã€ä¿æŒsshdè¿è¡Œä¸‹æ‹‰æ‰‹æœºé¡¶éƒ¨çŠ¶æ€æ ï¼Œçœ‹åˆ°termuxï¼Œç‚¹å‡»â€œACQUIRE WAKELOCKâ€ï¼Œå³å¯çœ‹åˆ°1 session(wake lock help)ã€‚æ­¤æ—¶ï¼Œtermuxå°±å¯ä»¥ä¿æŒåå°è¿è¡Œï¼Œsshdä¹Ÿä¸ä¼šå…³é—­ã€‚
é…ç½®è¿œç¨‹è¿æ¥å‡è®¾æˆ‘ä»¬æœ‰ä¸€å°linuxæœåŠ¡å™¨ï¼Œipæ˜¯192.168.1.25ï¼›termuxç»ˆç«¯çš„ipåœ°å€ä¸º192.168.1.58ã€‚
1ã€åœ¨termuxä¸­ç”Ÿæˆssh-keyssh-keygen
å‘½ä»¤å®Œæˆåï¼Œåœ¨~/.sshç›®å½•ä¸­å°±ç”Ÿæˆäº†id_rsa.pubå’Œid_rsaä¸¤ä¸ªæ–‡ä»¶ã€‚
2ã€åˆ›å»ºauthorized_keystouch ~/.ssh/authorized_keys
cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys
3ã€æ›´æ”¹æƒé™chmod 700 ~/.sshï¼Œåˆ‡è®°ï¼Œæ˜¯700è€Œä¸æ˜¯777ã€‚
chmod 600 ~/.ssh/authorized_keys
4ã€termuxæµ‹è¯•è¿æ¥ssh localhost -p 8022ï¼Œæˆ–è€… ssh localhost -p 8022 -i ~/.ssh/id_rsa
éƒåŒå­¦åœ¨è¿™é‡Œå‡ºç°é”™è¯¯æç¤ºï¼š
Permission denied (publickey,keyboard-interactive).

5ã€termuxæ‹·è´å¯†é’¥åˆ°linuxï¼Œå‘½åä¸ºid_rsa_honorscp ~/.ssh/id_rsa root@192.168.1.25:~/.ssh/id_rsa_honor
6ã€linuxç«¯æµ‹è¯•è¿æ¥ssh 192.168.1.58 -p 8022 -i ~/.ssh/id_rsa_honor
åŒæ ·å‡ºç°é”™è¯¯æç¤ºï¼š
Permission denied (publickey,keyboard-interactive).

å¦‚æœç¬¬4æ­¥å’Œç¬¬6æ­¥å‡ºç°é”™è¯¯ï¼Œé‚£ä¹ˆï¼Œå…³é—­sshæœåŠ¡ç«¯åï¼Œä»¥è°ƒè¯•æ¨¡å¼å¯åŠ¨ã€‚
killall sshdsshd -d
ç„¶åï¼Œåœ¨linuxç«¯è¾“å…¥ssh 192.168.1.58 -p 8022 -i ~/.ssh/id_rsa_honorã€‚
è¿™æ—¶å°±èƒ½åœ¨termuxæ§åˆ¶å°çœ‹åˆ°é”™è¯¯çš„æç¤ºä¿¡æ¯ã€‚éƒåŒå­¦çš„é”™è¯¯åœ¨äºç»™äº†.sshæ–‡ä»¶å¤¹777æƒé™ï¼Œä¿®æ”¹æˆ700ï¼Œé—®é¢˜è§£å†³ã€‚
windowsç«¯è¿œç¨‹è¿æ¥ä½¿ç”¨xftpç™»å½•linuxï¼Œæ‹·è´id_rsa_honoråˆ°windowsçš„~/.sshæ–‡ä»¶å¤¹ä¸­ï¼Œæ¯”å¦‚C:\Users\voidking\.sshã€‚
è¿æ¥æ–¹å¼ä¸€ï¼šå³é”®æ‰“å¼€gitå‘½ä»¤çª—å£ï¼Œssh 192.168.1.58 -p 8022 -i ~/.ssh/id_rsa_honorï¼Œè¿æ¥æˆåŠŸã€‚
è¿æ¥æ–¹å¼äºŒï¼šä½¿ç”¨xshellï¼Œæ–°å»ºè¿æ¥ï¼Œä¸»æœºå¡«å…¥192.168.1.58ï¼Œç«¯å£å¡«å…¥8022ã€‚ç”¨æˆ·èº«ä»½éªŒè¯ä¸­ï¼Œæ–¹æ³•é€‰æ‹©Public Keyï¼Œç”¨æˆ·å¯†é’¥æµè§ˆå¯¼å…¥id_rsa_honorï¼Œå…¶ä»–ä¸å¡«ã€‚
ç‚¹å‡»è¿æ¥åï¼Œæç¤ºè¾“å…¥ç™»å½•çš„ç”¨æˆ·åï¼Œä¸ç”¨å¡«å†™ï¼Œç›´æ¥ç¡®å®šï¼Œè¿æ¥æˆåŠŸã€‚
æŒ‚è½½æ‰‹æœºå­˜å‚¨æ‰“å¼€termuxç»ˆç«¯ï¼Œé»˜è®¤è·¯å¾„ä¸º /data/data/com.termux/files/home ï¼Œä½†æ˜¯è¿™ä¸ªè·¯å¾„å¹¶ä¸æ˜¯å®‰å“ç³»ç»Ÿçš„çœŸå®è·¯å¾„ã€‚ç›´æ¥cdåˆ°æ ¹ç›®å½•ï¼Œä¹Ÿæ²¡æœ‰æƒé™æŸ¥çœ‹æ–‡ä»¶ã€‚å¦‚æœæƒ³è¦è®¿é—®å®‰å“ç³»ç»Ÿä¸­çš„æ–‡ä»¶ï¼Œå¿…é¡»å…ˆå¯¹å®‰å“ç³»ç»Ÿçš„ç£ç›˜è¿›è¡ŒæŒ‚è½½ã€‚
æŒ‚è½½æ–¹æ³•ä¸ºæ‰§è¡Œå‘½ä»¤ termux-setup-storage ï¼Œæ‰§è¡Œä¹‹åä¼šæç¤ºæˆæƒtermuxè®¿é—®æ–‡ä»¶ç³»ç»Ÿçš„æƒé™ï¼Œé€‰æ‹©åŒæ„ï¼Œç„¶åhomeç›®å½•ä¸‹ä¼šå‡ºç°storageç›®å½•ï¼Œstorageç›®å½•ä¸­å°±æ˜¯å®‰å“ç³»ç»Ÿçš„æ–‡ä»¶äº†ã€‚
æ›´æ¢è½¯ä»¶é•œåƒæºsed -i &#x27;s@^\(deb.*stable main\)$@#\1\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/termux-packages-24 stable main@&#x27; $PREFIX/etc/apt/sources.listsed -i &#x27;s@^\(deb.*games stable\)$@#\1\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/game-packages-24 games stable@&#x27; $PREFIX/etc/apt/sources.list.d/game.listsed -i &#x27;s@^\(deb.*science stable\)$@#\1\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/science-packages-24 science stable@&#x27; $PREFIX/etc/apt/sources.list.d/science.listpkg update

ä¹¦ç­¾ç¥å™¨Termuxçš„ä½¿ç”¨æ—¥å¸¸
debian ssh è¿æ¥android é€šè¿‡termux
Termuxå‘½ä»¤è¡Œç¥å™¨åˆä½“éªŒ
Termux è¨­å®š SSH Server
Run an SSH server on your Android with Termux
The Termux Wiki
Touch Keyboard
]]></content>
      <categories>
        <category>engineering</category>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
        <tag>termux</tag>
      </tags>
  </entry>
  <entry>
    <title>è‹±ä¸­æœºå™¨æ–‡æœ¬ç¿»è¯‘-ç¬¬2ç« </title>
    <url>/dev-en-to-zh-translation-2/</url>
    <content><![CDATA[å‰è¨€tensorflow/nmté¡¹ç›®ï¼Œå¹¶ä¸èƒ½ç›´æ¥åœ¨ucloudçš„AIè®­ç»ƒæœåŠ¡ä¸Šè¿›è¡Œè®­ç»ƒï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä»£ç è¿›è¡Œä¸€äº›ä¿®æ”¹ã€‚


å·®å¼‚åˆ†æè·¯å¾„ä¸Šæ–‡ä¸­ï¼Œåœ¨AIè®­ç»ƒæœåŠ¡ä¸Šè¿è¡Œçš„mnistï¼Œå®ƒçš„è¾“å…¥è¾“å…¥éƒ½æ˜¯åˆ°UFileä¸Šã€‚è€Œnmté¡¹ç›®ï¼Œåœ¨è¿è¡Œæ—¶æŒ‡å®šäº†è®­ç»ƒæ–‡ä»¶çš„è·¯å¾„ã€‚
tensorflowmnisté¡¹ç›®ï¼Œä½¿ç”¨çš„æ˜¯tensorflow1.1.0ã€‚nmté¡¹ç›®ï¼Œä½¿ç”¨çš„æ˜¯tensorflow1.3.0ã€‚
è·¯å¾„å¯¹äºè·¯å¾„å·®å¼‚ï¼Œéœ€è¦ä¿®æ”¹nmtçš„è¿è¡Œå‘½ä»¤å’Œä»£ç ã€‚
è¿è¡Œå‘½ä»¤nmté¡¹ç›®çš„è¿è¡Œæ—¶çš„å‘½ä»¤ä¸ºï¼š
python -m nmt.nmt --src=vi --tgt=en --vocab_prefix=./tmp/nmt_data/vocab  --train_prefix=./tmp/nmt_data/train --dev_prefix=./tmp/nmt_data/tst2012  --test_prefix=./tmp/nmt_data/tst2013 --out_dir=./tmp/nmt_model --num_train_steps=12000 --steps_per_stats=100 --num_layers=2 --num_units=128 --dropout=0.2 --metrics=bleu

å…¶ä¸­ï¼Œå…³äºè·¯å¾„çš„å‚æ•°æœ‰ï¼šâ€“vocab_prefixâ€“train_prefixâ€“dev_prefixâ€“test_prefixâ€“out_dir
å‰å››ä¸ªè·¯å¾„æ˜¯è¾“å…¥ï¼›æœ€åä¸€ä¸ªè·¯å¾„æ˜¯è¾“å‡ºã€‚
æœ€åçš„å‘½ä»¤è¦æ”¹æˆï¼š
python -m nmt.nmt --src=vi --tgt=en --vocab_prefix=vocab  --train_prefix=train --dev_prefix=tst2012  --test_prefix=tst2013 --num_train_steps=12000 --steps_per_stats=100 --num_layers=2 --num_units=128 --dropout=0.2 --metrics=bleu

å¯¹äºè¾“å…¥è·¯å¾„æ¥è¯´ï¼Œå»æ‰äº†./tmp/nmt_data/ï¼Œé»˜è®¤ä¸ºFLAGS.data_dirï¼Œä¹Ÿå°±æ˜¯åˆ›å»ºAIè®­ç»ƒæœåŠ¡æ—¶è¾“å…¥çš„æ•°æ®è¾“å…¥è·¯å¾„ã€‚
å¯¹äºè¾“å‡ºè·¯å¾„æ¥è¯´ï¼Œå»æ‰äº†./tmp/mnt_modelï¼Œé»˜è®¤ä¸ºFLAGS.output_dirï¼Œä¹Ÿå°±æ˜¯åˆ›å»ºAIè®­ç»ƒæœåŠ¡æ—¶è¾“å…¥çš„æ•°æ®è¾“å‡ºè·¯å¾„ã€‚
UFile1ã€ç§»åŠ¨nmt_dataç›®å½•åˆ°/data/nmtã€‚
mkdir -p /data/nmtmv ~/tmp/nmt_data /data/nmt

2ã€ä¸Šä¼ /data/nmtåˆ°UFileã€‚./filemgr --action mput --dir /data/nmt --bucket vk-ucloud --prefix nmt --trimpath /data/nmt
train.enæ–‡ä»¶åœ°å€å¦‚ä¸‹ï¼Œå…¶ä»–æ–‡ä»¶ç±»ä¼¼ï¼šCDNåŠ é€Ÿåœ°å€ï¼šhttp://vk-ucloud.ufile.ucloud.com.cn/nmt/nmt_data/train.enæºç«™åœ°å€ï¼šhttp://vk-ucloud.cn-bj.ufileos.com/nmt/nmt_data/train.en
3ã€python tf_tool.py packæ—¶ï¼ŒæŒ‡å®šæœ¬åœ°æµ‹è¯•æ•°æ®åœ°å€å¦‚ä¸‹ã€‚
--test_data_path=/data/nmt/nmt_data --test_output_path=/data/nmt/nmt_model

ä»£ç tensorflowåè®°æœªå®Œã€‚ã€‚ã€‚ä¸å†ç»­ã€‚ã€‚ã€‚
ä¹¦ç­¾å…¨çƒAIæŒ‘æˆ˜èµ›-è‹±ä¸­æœºå™¨æ–‡æœ¬ç¿»è¯‘
è°·æ­Œå¼€æ”¾GNMTæ•™ç¨‹ï¼šå¦‚ä½•ä½¿ç”¨TensorFlowæ„å»ºè‡ªå·±çš„ç¥ç»æœºå™¨ç¿»è¯‘ç³»ç»Ÿ
TensorFlow è®­ç»ƒé•œåƒè‡ªå®šä¹‰åŒ…å®‰è£…
MNISTå¼€å‘æ¡ˆä¾‹
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>tensorflow</tag>
      </tags>
  </entry>
  <entry>
    <title>è‹±ä¸­æœºå™¨æ–‡æœ¬ç¿»è¯‘-ç¬¬1ç« </title>
    <url>/dev-en-to-zh-translation-1/</url>
    <content><![CDATA[UCloudUCloudæ˜¯åŸºç¡€äº‘è®¡ç®—æœåŠ¡æä¾›å•†ï¼Œä¸å…¨çƒAIæŒ‘æˆ˜èµ›åˆä½œï¼Œç»™å‚èµ›è€…æä¾›å…è´¹ä½¿ç”¨GPUçš„æ—¶é—´ã€‚æœ¬ä»¥ä¸ºå’Œé˜¿é‡Œäº‘ç±»ä¼¼ï¼Œæ–°å»ºä¸ªä¸»æœºï¼Œæ­å»ºç¯å¢ƒï¼Œç„¶åè·‘ä»£ç ã€‚æ²¡æƒ³åˆ°å¹³å°é™åˆ¶ä¸èƒ½åˆ›å»ºä¸»æœºï¼Œåªèƒ½ä½¿ç”¨AIè®­ç»ƒæœåŠ¡ã€‚å¾ˆéº»çƒ¦çš„æ ·å­ï¼ŒèŠ±ç‚¹æ—¶é—´ç ”ç©¶ä¸‹ã€‚


ç¯å¢ƒå‡†å¤‡
é˜¿é‡Œäº‘centos7.2
python2.7.5ï¼ˆé»˜è®¤å®‰è£…ç‰ˆæœ¬ï¼‰
ucloudå®åè®¤è¯é€šè¿‡

Uhub1ã€ç™»å½•ucloudï¼Œå·¦ä¾§å¯¼èˆªæ ç‚¹å‡»å…¬å…±é•œåƒåº“ï¼Œè¿›å…¥uhubäº§å“é¡µé¢ã€‚
2ã€åˆ›å»ºé•œåƒåº“ï¼ˆDocker Registryï¼‰ï¼ŒéƒåŒå­¦è¿™é‡Œå‘½åä¸ºvk_ucloudã€‚
3ã€dockerç™»å½•uhubdocker login uhub.ucloud.cn
UAI Trainå·¥å…·åŒ…UAI-Trainä¸ºç”¨æˆ·æä¾›äº†é•œåƒæ‰“åŒ…å·¥å…·ï¼Œç”¨æˆ·åªéœ€å°†æ‰€éœ€ä»£ç æ–‡ä»¶æ”¾åœ¨æŸä¸€è·¯å¾„ä¸‹ï¼Œæ‰§è¡Œæ‰“åŒ…å‘½ä»¤å³å¯ä»¥ç”ŸæˆUAI-Trainæ‰€éœ€çš„é•œåƒã€‚è¯¥æ‰“åŒ…å·¥å…·å°†åœ¨æœ¬åœ°dockerä¸­ç”Ÿæˆä¸¤ä¸ªé•œåƒä»¥åŠè¿è¡Œé•œåƒçš„æŒ‡ä»¤è¯´æ˜æ–‡ä»¶uaitrain_cmd.txtã€‚ç”Ÿæˆçš„é•œåƒåŒ…æ‹¬cpuå’Œgpuä¸¤ä¸ªç‰ˆæœ¬ï¼Œå…¶ä¸­gpuç‰ˆæœ¬çš„é•œåƒä¼šè‡ªåŠ¨ä¸Šä¼ è‡³ç”¨æˆ·çš„Uhubé•œåƒä»“åº“ã€‚ä¸¤ä¸ªç‰ˆæœ¬çš„é•œåƒå‡å¯ä»¥ç”¨äºæœ¬åœ°æµ‹è¯•ï¼Œæµ‹è¯•å‘½ä»¤å¯åœ¨uaitrain_cmd.txtä¸­æŸ¥è¯¢ã€‚
UIA TrainåŸºç¡€é•œåƒUCloud æä¾›äº†ä¸¤ä¸ªUAI Trainç³»ç»Ÿä½¿ç”¨çš„åŸºç¡€é•œåƒï¼ˆèŒƒä¾‹åŸºäºtensorflow-1.1.0ç‰ˆæœ¬ï¼Œå¦‚æœæƒ³è¦ä½¿ç”¨ tensorflow-1.2.0ï¼Œå¯ä»¥ç›´æ¥å°† 1.1.0 æ›¿æ¢æˆ1.2.0ï¼‰
1ã€ä¸‹è½½gpuç‰ˆæœ¬docker pull uhub.ucloud.cn/uaishare/gpu_uaitrain_ubuntu-14.04_python-2.7.6_tensorflow-1.1.0:v1.0
2ã€ä¸‹è½½cpuç‰ˆæœ¬docker pull uhub.ucloud.cn/uaishare/cpu_uaitrain_ubuntu-14.04_python-2.7.6_tensorflow-1.1.0:v1.0
UAI SDKå®‰è£…æœ€æ–°ç‰ˆæœ¬çš„UAI SDKå’Œdockeræ”¯æŒï¼Œå®‰è£…UAI SDKçš„æ–¹æ³•å¦‚ä¸‹ï¼š
git clone https://github.com/ucloud/uai-sdkcd uai-sdksudo python setup.py install
å®‰è£…Dockerçš„æ–¹æ³•è¯·å‚è§ï¼šDockerä½¿ç”¨æŒ‡å—
å·¥å…·ç›®å½•æ‰¾åˆ°UAI-Train TensorFlowæ“ä½œå·¥å…·æ‰€åœ¨ç›®å½•
$ls ~/uai-sdk/uaitrain_tool/tftf_tool.py

ç»Ÿä¸€è·¯å¾„å°†AIè®­ç»ƒä»»åŠ¡æ‰€éœ€çš„ä»£ç æ”¾åœ¨ç»Ÿä¸€è·¯å¾„ä¸‹ï¼Œæ‰“åŒ…æ—¶å°†å…¶ç›¸å¯¹è·¯å¾„ä½œä¸ºå‚æ•°code_pathä¸Šä¼ 
ä¾‹å¦‚ï¼Œæˆ‘ä»¬è¦å°†~/uai-sdk/examples/tensorflow/train/mnist_summary_1.1ä¸‹é¢çš„è®­ç»ƒä»£ç è¿›è¡Œæ‰“åŒ…ï¼Œè¯¥æ–‡ä»¶è·¯å¾„ç»“æ„å¦‚ä¸‹ï¼š
$ cd ~/uai-sdk/examples/tensorflow/train/mnist_summary_1.1$ lsdata  code
æˆ‘ä»¬éœ€è¦åšå¦‚ä¸‹å‡†å¤‡å·¥ä½œï¼š
1ã€å‡†å¤‡å¥½è®­ç»ƒçš„ä»£ç ï¼Œæ¡ˆä¾‹ä¸­è®­ç»ƒä»£ç åœ¨mnist_summary_1.1/codeä¸‹ï¼Œåä¸ºmnist_summary.py
2ã€å°†tf_tool.py å·¥å…·æ”¾å…¥å’Œè®­ç»ƒä»£ç ç›®å½•åŒçº§çš„ç›®å½•ä¸‹ï¼Œå³mnist_summary_1.1/ ç›®å½•ä¸‹
cd uai-sdkcp ./uaitrain_tool/tf/tf_tool.py ./examples/tensorflow/train/mnist_summary_1.1/

3ã€Ready To Pack
æ‰“åŒ…1ã€è¿›å…¥mnist_summary_1.1ç›®å½•
cd ~/uai-sdk/examples/tensorflow/train/mnist_summary_1.1/

2ã€æ‰“åŒ…å‘½ä»¤
sudo python tf_tool.py pack [-h] --public_key PUBLIC_KEY                         --private_key PRIVATE_KEY                         [--project_id PROJECT_ID]                         --code_path CODE_PATH                         --mainfile_path MAINFILE_PATH                        --uhub_username UHUB_USERNAME                        --uhub_password UHUB_PASSWORD                         --uhub_registry UHUB_REGISTRY                        --uhub_imagename UHUB_IMAGENAME                        [--uhub_imagetag UHUB_IMAGETAG]                        [--internal_uhub False/True]                        --ai_arch_v AI_ARCH_V                        --test_data_path TEST_DATA_PATH                        --test_output_path TEST_OUTPUT_PATH                        --train_params TRAIN_PARAMS                        [--python_version PYTHON_VERSION]                        [--os OS_VERSION]

æ¯ä¸ªå‚æ•°çš„å…·ä½“è§£é‡Šï¼Œè®¿é—®TensorFlowè®­ç»ƒé•œåƒæ‰“åŒ…æŸ¥çœ‹ã€‚
3ã€æ‰“åŒ…æ ·ä¾‹ä½¿ç”¨mnist_summary_1.1ä¸­çš„è®­ç»ƒç¨‹åºä¸ºæ¡ˆä¾‹ã€‚test_data_pathå’Œtest_data_pathä¸è¦æ±‚ä¸€å®šåœ¨è®­ç»ƒä»£ç è·¯å¾„ä¸‹ï¼Œå¦‚æˆ‘ä»¬å¯ä»¥åœ¨/data/testç›®å½•ä¸‹åˆ›å»ºäº†ä¸¤ä¸ªå­ç›®å½•ï¼š

/data/test/data ç”¨äºå­˜æ”¾è®­ç»ƒæ•°æ®ï¼Œæ­¤æ—¶test_data_pathå€¼ä¸º/data/test/data
/data/test/output ç”¨äºå­˜æ”¾è®­ç»ƒè¾“å‡ºæ•°æ®ï¼Œæ­¤æ—¶test_output_pathä¸º/data/test/output

train_paramsä¸ºè®­ç»ƒä»£ç ä¸­ä½¿ç”¨åˆ°çš„ä»»æ„è®­ç»ƒå‚æ•°ï¼Œæœ¬ä¾‹ä¸­ä¸ºâ€â€“max_step=2000â€ä½¿ç”¨å‘½ä»¤æ—¶ï¼Œéœ€è¦ä½¿ç”¨sudoï¼Œä¿è¯dockeré•œåƒæ‰“åŒ…å‘½ä»¤æœ‰è¶³å¤Ÿæƒé™ã€‚
æ³¨ï¼šæˆ‘ä»¬å¯ä»¥å°†~/uai-sdk/examples/tensorflow/train/mnist_summary_1.1/data/ä¸‹çš„æµ‹è¯•æ•°æ®æ”¾å…¥/data/test/data/ç›®å½•ä¸‹ã€‚
sudo python tf_tool.py pack \                        --public_key=&lt;YOUR_PUBLIC_KEY&gt; \            --private_key=&lt;YOUR_PRIVATE_KEY&gt; \            --code_path=./code/ \            --mainfile_path=mnist_summary.py \            --uhub_username=&lt;YOUR_UHUB_USER_NAME&gt; \            --uhub_password=&lt;YOUR_UHUB_PASSWORD&gt; \            --uhub_registry=&lt;YOUR_UHUB_REFDISTRY&gt; \            --uhub_imagename=&lt;YOUR_UHUB_IMAGENAME&gt; \                        --internal_uhub=True \            --ai_arch_v=tensorflow-1.1.0 \            --test_data_path=/data/test/data \            --test_output_path=/data/test/output \            --train_params=&quot;--max_step=2000&quot; \


UCloud APIçš„å…¬é’¥å’Œç§é’¥ï¼Œå¯ä»¥åœ¨å·¦ä¸Šè§’â€œäº§å“ä¸æœåŠ¡â€ï¼Œâ€œAPIå¯†é’¥ UAPIâ€ä¸­æ‰¾åˆ°ã€‚
uhub_usernameå’Œuhub_passwordæ˜¯UCloudçš„è´¦å·å’Œå¯†ç ã€‚
uhub_registryå¡«å…¥vk_ucloudã€‚
ubub_imagenameå¡«å…¥mnist_testã€‚

å…·ä½“å‘½ä»¤ä¸ºï¼š
mkdir -p /data/test/datacp -r ~/uai-sdk/examples/tensorflow/train/mnist_summary_1.1/data/ /data/test/cd ~/uai-sdk/examples/tensorflow/train/mnist_summary_1.1

sudo python tf_tool.py pack --public_key=****** --private_key=****** --code_path=./code/ --mainfile_path=mnist_summary.py --uhub_username=voidking@qq.com --uhub_password=****** --uhub_registry=vk_ucloud --uhub_imagename=mnist_test --internal_uhub=True --ai_arch_v=tensorflow-1.1.0 --test_data_path=/data/test/data --test_output_path=/data/test/output --train_params=&quot;--max_step=2000&quot;

å¦‚æœæ‰§è¡Œä¸Šè¯‰å‘½ä»¤æ—¶æŠ¥é”™ï¼š
Docker login on uhub.service.ucloud.cnError response from daemon: Get https://uhub.service.ucloud.cn/v2/: x509: certificate has expired or is not yet valid

é‚£ä¹ˆè¯·åˆ é™¤æ‰--internal_uhub=Trueè¿™ä¸€å¥ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨UCloudå†…ç½‘ï¼Œè€Œæ˜¯ä½¿ç”¨çš„é˜¿é‡Œäº‘ã€‚åˆ‡è®°ï¼Œæ˜¯åˆ é™¤ï¼Œè€Œä¸æ˜¯æ”¹æˆ--internal_uhub=Falseã€‚è¿™æ˜¯è§£å†³é”™è¯¯å¤±è´¥ï¼Œè¯·æ•™UCloudå®¢æœæ‰å¾—åˆ°çš„ç»“è®ºã€‚åœ¨æ­¤æ„Ÿè°¢ä¸‹å®¢æœå°å“¥ï¼Œå¾ˆè€å¿ƒå¸®å¿™æ’æŸ¥é—®é¢˜ã€‚
è¾“å‡ºè¯´æ˜æˆåŠŸæ‰§è¡Œåï¼Œç•Œé¢æ˜¾ç¤ºæ ·ä¾‹å¦‚ä¸‹ï¼Œä¼šç»™å‡ºéƒ¨ç½²æ—¶æ‰€éœ€çš„CMDå‘½ä»¤ä»¥åŠæœ¬åœ°æµ‹è¯•çš„cmdå‘½ä»¤:
CMD Used for deploying: /data/mnist_summary.py --max_step=2000CMD for CPU local test: sudo docker run -it -v /data/test/data:/data/data -v /data/test/output:/data/output mnist_test-cpu:uaitrain /bin/bash -c &quot;cd /data &amp;&amp; /usr/bin/python /data/mnist_summary.py --max_step=2000 --work_dir=/data --data_dir=/data/data --output_dir=/data/output --log_dir=/data/output&quot;CMD for GPU local test: sudo nvidia-docker run -it -v /data/test/data:/data/data -v /data/test/output:/data/output uhub.ucloud.cn/vk_ucloud/mnist_test:uaitrain /bin/bash -c &quot;cd /data &amp;&amp; /usr/bin/python /data/mnist_summary.py --max_step=2000 --num_gpus=1 --work_dir=/data --data_dir=/data/data --output_dir=/data/output --log_dir=/data/output&quot;You can check these cmd later in file: uaitrain_cmd.txt


CMD Used for deploying: è¯¥è¾“å‡ºçš„å†…å®¹ä¸ºåˆ›å»ºè®­ç»ƒä»»åŠ¡æ—¶ï¼Œè®­ç»ƒå¯åŠ¨å‘½ä»¤æ¡†ä¸­éœ€è¦å¡«å†™çš„å†…å®¹(å‚è§åˆ›å»ºè®­ç»ƒä»»åŠ¡)ã€‚å¯ä»¥ç›´æ¥å¤åˆ¶é»è´´åˆ°å‘½ä»¤æ¡†ä¸­ã€‚
CMD for CPU local test: è¯¥è¾“å‡ºçš„å†…å®¹ä¸ºæœ¬åœ°é€šè¿‡CPUæ¥æµ‹è¯•è®­ç»ƒèƒ½å¦æ­£å¸¸æ‰§è¡Œã€‚åœ¨æœ¬åœ°æ²¡æœ‰GPUçš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨è¯¥å‘½ä»¤æµ‹è¯•è®­ç»ƒä»£ç èƒ½å¦æ­£å¸¸æ‰§è¡Œã€‚
CMD for GPU local testï¼šè¯¥è¾“å‡ºçš„å†…å®¹ä¸ºæœ¬åœ°é€šè¿‡GPUæ¥æµ‹è¯•è®­ç»ƒèƒ½å¦æ­£å¸¸æ‰§è¡Œã€‚åœ¨æœ¬åœ°æœ‰GPUçš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨è¯¥å‘½ä»¤æµ‹è¯•è®­ç»ƒä»£ç èƒ½å¦æ­£å¸¸æ‰§è¡Œã€‚ï¼ˆæ³¨ï¼šåœ¨ä½¿ç”¨å‰è¯·ç¡®è®¤GPUé©±åŠ¨å·²ç»å®‰è£…ï¼Œå¹¶å·²ç»å®‰è£…äº†nvidia-dockerï¼Œè¯¦ç»†å®‰è£…æ–¹æ³•è¯·å‚è§Dockerä½¿ç”¨æŒ‡å—ï¼‰

æœ¬åœ°æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆäº†uaitrain_cmd.txtã€uaiservice.logã€uaitrain-cpu.Dockerfileå’Œuaitrain.Dockerfileï¼Œå…¶ä¸­uaitrain_cmd.txtå†…å®¹å’Œæ ‡å‡†è¾“å‡ºçš„å†…å®¹ä¸€è‡´ï¼Œé˜²æ­¢ç”¨æˆ·ä¸¢å¤±å±å¹•è¾“å‡ºå†…å®¹ã€‚
docker imagesï¼Œåœ¨æœ¬åœ°é•œåƒä»“åº“å¯ä»¥çœ‹åˆ°ç”Ÿæˆäº†ä¸¤ä¸ªdockeré•œåƒï¼Œåˆ†åˆ«ä¸ºcpuç‰ˆæœ¬å’Œgpuç‰ˆæœ¬ã€‚å¦‚ä¸‹ï¼š
uhub.ucloud.cn/vk_ucloud/mnist_testmnist_test-cpu

å…¶ä¸­gpuç‰ˆæœ¬ï¼Œä¼šè‡ªåŠ¨ä¸Šä¼ çš„åˆ°ucloudçš„uhubã€‚
è‡ªå®šä¹‰è½¯ä»¶åŒ…å®‰è£…å¦‚æœè®­ç»ƒä»£ç ä¾èµ–ç‰¹æ®Šçš„è½¯ä»¶åŒ…ï¼Œä¾‹å¦‚nltk ç­‰ï¼Œå¯ä»¥é€šè¿‡Docker æ‰“åŒ…çš„å½¢å¼å°†è½¯ä»¶åŒ…å’Œç›¸å…³æ•°æ®æ‰“åŒ…å…¥è®­ç»ƒçš„Dockeré•œåƒï¼Œè¯¦ç»†æ–¹æ³•å‚è§TensorFlow è®­ç»ƒé•œåƒè‡ªå®šä¹‰åŒ…å®‰è£…ã€‚
UFileåˆ›å»ºå­˜å‚¨ç©ºé—´1ã€ç™»å½•ucloudï¼Œå·¦ä¾§å¯¼èˆªæ ç‚¹å‡»å¯¹è±¡å­˜å‚¨ï¼Œè¿›å…¥ufileäº§å“é¡µé¢ã€‚
2ã€åˆ›å»ºå­˜å‚¨ç©ºé—´ï¼ŒéƒåŒå­¦è¿™é‡Œå­˜å‚¨ç©ºé—´åŸŸåä¸ºvk-ucloudï¼Œç©ºé—´ç±»å‹ä¸ºå…¬æœ‰ç©ºé—´ã€‚åˆ›å»ºæˆåŠŸä¼šæç¤ºï¼šæˆ‘ä»¬ä¸ºæ‚¨åŒæ­¥åˆ›å»ºäº†CDNåŠ é€ŸåŸŸåï¼Œç¨åæ‚¨å¯åœ¨åˆ—è¡¨æŸ¥çœ‹åŸŸåä¿¡æ¯å¹¶è¿›è¡Œæ–‡ä»¶è®¿é—®æ“ä½œã€‚æ¥ä¸‹æ¥æ‚¨å¯é€šè¿‡ä»¥ä¸‹ä¸‰ç§æ–¹å¼è¿›è¡Œç©ºé—´å†…å®¹ç®¡ç†ï¼ŒåŒ…æ‹¬æ–‡ä»¶ä¸Šä¼ ä¸‹è½½ç­‰ã€‚API/SDKï¼Œè¯¦ç»†ä½¿ç”¨è¯´æ˜ï¼›å®¢æˆ·ç«¯ç®¡ç†å·¥å…·ï¼Œè¯¦ç»†ä½¿ç”¨è¯´æ˜ã€‚
3ã€ä¹‹åçš„æ–‡ä»¶ä¸Šä¼ ç­‰æ“ä½œï¼Œå¯ä»¥ç›´æ¥åœ¨ç½‘é¡µå®Œæˆï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ucloudæä¾›çš„ç©ºé—´ç®¡ç†å™¨å’Œæ–‡ä»¶ç®¡ç†å™¨ã€‚
å‡†å¤‡ç®¡ç†å™¨1ã€ä¸‹è½½ç©ºé—´ç®¡ç†å™¨å’Œæ–‡ä»¶ç®¡ç†å™¨
mkdir -p /opt/ufilecd /opt/ufilewget http://tools.ufile.ucloud.com.cn/bucketmgr-linux64.tar.gzwget http://tools.ufile.ucloud.com.cn/filemgr-linux64.tar.gztar -xzvf bucketmgr-linux64.tar.gz tar -xzvf filemgr-linux64.tar.gzrm -rf bucketmgr-linux64.tar.gzrm -rf filemgr-linux64.tar.gzmv bucketmgr_linux64.elf/* ./ mv filemgr-linux64.elf/* ./rm -rf bucketmgr_linux64.elfrm -rf filemgr-linux64.elfmv bucketmgr-linux64 bucketmgrmv filemgr-linux64 filemgr

2ã€é…ç½®vim config.cfg
&#123;    &quot;public_key&quot; : &quot;paste your public key here&quot;,    &quot;private_key&quot; : &quot;paste your private key here&quot;,    &quot;proxy_host&quot; : &quot;www.cn-bj.ufileos.com&quot;,    &quot;api_host&quot; : &quot;api.spark.ucloud.cn&quot;&#125;

å…¶ä¸­ï¼Œpublic_keyå’Œprivate_keyå¯ä»¥åœ¨â€œAPIå¯†é’¥â€ä¸­è·å¾—ã€‚ä¸åŒåœ°åŸŸçš„proxy_hostæ˜¯ä¸ä¸€æ ·çš„ï¼Œå…·ä½“å¦‚ä¸‹:
åŒ—äº¬å¤–ç½‘ï¼šwww.cn-bj.ufileos.com Bæœºæˆ¿å†…ç½‘ï¼šwww.ufile.cn-north-02.ucloud.cnCæœºæˆ¿å†…ç½‘: www.ufile.cn-north-03.ucloud.cnDæœºæˆ¿å†…ç½‘: www.ufile.cn-north-04.ucloud.cnä¸Šæµ·äºŒå¤–ç½‘: www.cn-sh2.ufileos.comå†…ç½‘: www.internal-cn-sh2-01.ufileos.comé¦™æ¸¯å¤–ç½‘ï¼šwww.hk.ufileos.comå†…ç½‘ï¼šwww.internal-hk-01.ufileos.comå¹¿ä¸œå¤–ç½‘ï¼šwww.cn-gd.ufileos.comå†…ç½‘ï¼šwww.internal-cn-gd-02.ufileos.comç¾å›½å¤–ç½‘ï¼šwww.us-ca.ufileos.comå†…ç½‘ï¼šwww.internal-us-ca-01.ufileos.com

ç©ºé—´ç®¡ç†å‘½ä»¤åˆ›å»ºå­˜å‚¨ç©ºé—´åˆ›å»ºå­˜å‚¨ç©ºé—´å»ºè®®ä½¿ç”¨æ§åˆ¶å°ã€‚./bucketmgr --action CreateBucket --bucket bucketname --type public
å‚æ•°è¯´æ˜:â€“bucket: éœ€è¦åˆ›å»ºçš„å­˜å‚¨ç©ºé—´åŸŸåâ€“type: éœ€è¦åˆ›å»ºçš„ç©ºé—´ç±»å‹ï¼Œå…¬å¼€ç©ºé—´ï¼ˆpublicï¼‰æˆ–ç§æœ‰ç©ºé—´ï¼ˆprivateï¼‰
åˆ é™¤å­˜å‚¨ç©ºé—´åˆ é™¤å­˜å‚¨ç©ºé—´å»ºè®®ä½¿ç”¨æ§åˆ¶å°ã€‚
./bucketmgr --action DeleteBucket --bucket bucketname
å‚æ•°è¯´æ˜:â€“bucket: éœ€è¦åˆ é™¤çš„å­˜å‚¨ç©ºé—´åŸŸå
è·å–ç©ºé—´ä¿¡æ¯./bucketmgr --action DescribeBucketå‚æ•°è¯´æ˜:â€“bucket: éœ€è¦æŸ¥è¯¢çš„å­˜å‚¨ç©ºé—´åŸŸå
è·å–æ–‡ä»¶åˆ—è¡¨./bucketmgr --action GetFileList --bucket bucketnameå‚æ•°è¯´æ˜:â€“bucket: éœ€è¦æ‹‰å–åˆ—è¡¨çš„å­˜å‚¨ç©ºé—´åŸŸåâ€“offset: æŸ¥è¯¢èµ·å§‹çš„æ–‡ä»¶ç¼–å·ï¼ˆé»˜è®¤ä¸º0ï¼‰â€“limit : éœ€è¦æŸ¥è¯¢çš„è®°å½•æ•°ï¼ˆé»˜è®¤ä¸º100ï¼‰
æ–‡ä»¶ç®¡ç†å™¨æ–‡ä»¶ç®¡ç†å·¥å…·å¯å¸®åŠ©ç”¨æˆ·è¿›è¡Œå­˜å‚¨ç©ºé—´å†…æ–‡ä»¶çš„ç®¡ç†æ“ä½œï¼ŒåŒ…æ‹¬ï¼š

ä¸Šä¼ å•ä¸ªæ–‡ä»¶ï¼šæ™®é€šä¸Šä¼ ï¼ˆPUTï¼‰ï¼Œç§’ä¼ ï¼ˆUPLOAD-HITï¼‰ï¼Œåˆ†ç‰‡ä¸Šä¼ ï¼ˆMPUTï¼‰ï¼Œè¡¨å•æ–¹å¼ä¸Šä¼ ã€‚

ä¸Šä¼ æ–‡ä»¶å¤¹ï¼šæ™®é€šä¸Šä¼ ï¼ˆPUTï¼‰ï¼Œåˆ†ç‰‡ä¸Šä¼ ï¼ˆMPUTï¼‰ï¼Œå¢é‡ä¸Šä¼ ï¼ˆSYNCï¼‰ã€‚

ä¸‹è½½æ–‡ä»¶/æ–‡ä»¶å¤¹

åˆ é™¤æ–‡ä»¶/æ–‡ä»¶å¤¹


ä¸Šä¼ æ–‡ä»¶(å•ä¸ªæ–‡ä»¶)./filemgr --action put --bucket bucketname --key key --file filename
å‚æ•°è¯´æ˜:â€“bucket: éœ€è¦ä¸Šä¼ è‡³çš„å­˜å‚¨ç©ºé—´â€“key : ä¸Šä¼ è‡³å­˜å‚¨ç©ºé—´ä¸­çš„æ–‡ä»¶åâ€“file : éœ€è¦ä¸Šä¼ çš„æœ¬åœ°æ–‡ä»¶è·¯å¾„
ç¤ºä¾‹:æŠŠä¸€ä¸ªæœ¬åœ°æ–‡ä»¶ ucloud.jpg ä¸Šä¼ è‡³ bucket åç§°ä¸º pics çš„å­˜å‚¨ç©ºé—´ä¸­ï¼Œå¹¶å‘½åä¸º logo.jpg
./filemgr --action put --bucket pics --key logo.jpg --file /home/yours/pictures/ucloud.jpg
ä¸Šä¼ æ–‡ä»¶å¤¹./filemgr --action put --bucket bucketname --dir dirname
å‚æ•°è¯´æ˜:â€“bucket: éœ€è¦ä¸Šä¼ è‡³çš„å­˜å‚¨ç©ºé—´åŸŸåâ€“dir : éœ€è¦ä¸Šä¼ çš„æœ¬åœ°æ–‡ä»¶å¤¹â€“prefix: ç”Ÿæˆæ–‡ä»¶çš„Keyæ—¶ä½¿ç”¨çš„å‰ç¼€ï¼ŒæŒ‡å®šè¯¥å‚æ•°æ—¶ç”Ÿæˆçš„Keyæ˜¯ prefix+baseï¼ˆfilenameï¼‰

ç”¨æ–‡ä»¶å¤¹æ–¹å¼ä¸Šä¼ çš„æ–‡ä»¶é»˜è®¤ä¼šä½¿ç”¨æ–‡ä»¶å¤¹å†…æ–‡ä»¶æ‰€åœ¨çš„ç»å¯¹è·¯å¾„æ¥å‘½åKeyï¼Œå¦‚æœæƒ³æŒ‡å®šç‰¹æ®Šçš„å‰ç¼€è¯·ä½¿ç”¨â€“prefixå‚æ•°ã€‚

ç¤ºä¾‹1:
å°† ~/files è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ è‡³åä¸º demobucket çš„å­˜å‚¨ç©ºé—´ä¸­ï¼Œå¹¶ä¸” key çš„åç§°ä½¿ç”¨ demo/ ä½œä¸ºå‰ç¼€ï¼Œå¦‚æœè¯¥æ–‡ä»¶å¤¹ä¸‹æœ‰ä¸€ä¸ªåä¸º1.jpg çš„æ–‡ä»¶å¹¶ä¸”ç©ºé—´å±æ€§ä¸ºpublicï¼Œåˆ™ä¸Šä¼ å®Œæˆåå¯ä»¥é€šè¿‡ http://demobucket.ufile.ucloud.com.cn/demo/1.jpg è®¿é—®è¯¥æ–‡ä»¶
./filemgr --action put --dir ~/files --bucket demobucket --prefix demo/
å¦‚æœæ‚¨ä¸å¸Œæœ›ä½¿ç”¨ç»å¯¹è·¯å¾„æ¥ä½œä¸ºKeyï¼Œå¯ä»¥ä½¿ç”¨â€“trimpathæˆªæ‰éƒ¨åˆ†è·¯å¾„åã€‚
ä¾‹å¦‚ï¼š./filemgr --action put --dir ~/files --bucket demobucket --prefix demo/ --trimpath /root/test
ç¤ºä¾‹2:å‡è®¾æœ‰ä¸ªç›®å½•åä¸º /some/dir/cutoff/files/ï¼Œä¸‹é¢æœ‰ a.jpgã€b.txtä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ™ä»¥ä¸‹çš„å¤„ç†ä¼šä½¿å¾—ä¿å­˜åœ¨ UFILE çš„æ–‡ä»¶åä¸º files/a.jpgã€files/b.txtã€‚./filemgr --action put --dir ~/files --bucket demobucket --trimpath /some/dir/cutoff/
åˆ†ç‰‡ä¸Šä¼ åˆ†ç‰‡ä¸Šä¼ å…è®¸åœ¨æŸä¸ªåˆ†ç‰‡å¤±è´¥æƒ…å†µä¸‹è¿›è¡Œç»­ä¼ ï¼Œé€‚åˆè¾ƒå¤§æ–‡ä»¶çš„åœºæ™¯ã€‚
./filemgr --action mput --bucket demobucket --key key --file filename
å‚æ•°è¯´æ˜:â€“bucket : éœ€è¦ä¸Šä¼ è‡³çš„ bucket åç§°â€“key : ä¸Šä¼ è‡³ bucket ä¸­çš„æ–‡ä»¶åç§°â€“file : éœ€è¦ä¸Šä¼ çš„æœ¬åœ°æ–‡ä»¶è·¯å¾„â€“part : éœ€è¦è¿›è¡Œé‡ä¼ çš„åˆ†ç‰‡ç´¢å¼•(æ³¨æ„é‡ä¼ çš„åˆ†ç‰‡å¿…é¡»æ˜¯ä¹‹å‰ä¸Šä¼ å¤±è´¥çš„åˆ†ç‰‡ï¼Œå·²ç»æˆåŠŸçš„åˆ†ç‰‡ä¸èƒ½é‡ä¼ ï¼Œå¦åˆ™æœ€ç»ˆ finish ä¼šå¤±è´¥)â€“uploadid: åˆ†ç‰‡ä¸Šä¼ åˆå§‹åŒ–è¿”å›çš„ä¸Šä¼  IDâ€“etags : ç»­ä¼ æ—¶éœ€è¦æŠŠä¹‹å‰å·²ç»æˆåŠŸä¸Šä¼ çš„åˆ†ç‰‡çš„ ETag ä»¥â€,â€åˆ†éš”ä¼ é€’ç»™æœåŠ¡ç«¯
ç¤ºä¾‹:ä»¥åˆ†ç‰‡ä¸Šä¼ æ–¹å¼ä¸Šä¼ ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶ hello.avi è‡³åä¸º demobucket çš„å­˜å‚¨ç©ºé—´ä¸­å¹¶ä¸”å‘½åä¸º world.avi
./filemgr --action mput --bucket demobucket --key world.avi --file /opt/video/hello.avi
ä¸Šä¼ å¤±è´¥çš„è¯ï¼Œé‡æ–°æ‰§è¡Œå‘½ä»¤å³å¯ç»§ç»­ä¸Šä¼ ã€‚
ä¸‹è½½æ–‡ä»¶./filemgr --action download --bucket demobucket --key key --file filenameå‚æ•°è¯´æ˜:â€“bucket : éœ€è¦ä¸‹è½½çš„æ–‡ä»¶æ‰€åœ¨çš„ bucket åç§°â€“key : éœ€è¦ä¸‹è½½çš„æ–‡ä»¶ key åç§°â€“file : éœ€è¦ä¿å­˜åœ¨æœ¬åœ°çš„æ–‡ä»¶è·¯å¾„â€“showurl: ä»…è·å–ä¸‹è½½ URLï¼Œä¸ä¸‹è½½å®é™…æ•°æ®â€“expires: è·å–ä¸‹è½½ URL æ—¶æŒ‡å®šè¿‡æœŸæ—¶é—´â€“queryauth: åœ¨ URL çš„ query ä¸­æºå¸¦ç­¾åä¿¡æ¯
ç¤ºä¾‹:è·å–ä¸€ä¸ªåä¸º demobucket çš„å­˜å‚¨ç©ºé—´ä¸­ä¸€ä¸ªåä¸º QQ.pkg çš„æ–‡ä»¶åœ¨5åˆ†é’Ÿå†…çš„æœ‰æ•ˆä¸‹è½½URLã€‚
./filemgr --action download --showurl --queryauth --expires 300 --bucket demobucket --key QQ.pkg
è·å–ä¸€ä¸ªåä¸º demobucket çš„å­˜å‚¨ç©ºé—´ä¸­ä¸€ä¸ªåä¸º QQ.pkg çš„æ–‡ä»¶å¹¶ä¸”ä¿å­˜ä¸º/opt/data/QQ.pkg./filemgr --action download --bucket demobucket --key QQ.pkg --file /opt/data/QQ.pkg
åˆ é™¤æ–‡ä»¶./filemgr --action delete --bucket demobucket --key keyå‚æ•°è¯´æ˜:â€“bucket: éœ€è¦åˆ é™¤çš„æ–‡ä»¶æ‰€åœ¨çš„ bucket åç§°â€“key : éœ€è¦åˆ é™¤çš„æ–‡ä»¶åœ¨ bucket ä¸­çš„åç§°
ç¤ºä¾‹:åˆ é™¤ä¸€ä¸ªåä¸º demobucket çš„å­˜å‚¨ç©ºé—´ä¸­åä¸º 20140201.blog çš„æ–‡ä»¶
./filemgr --action delete --bucket demobucket --key 20140201.blog
ç§’ä¼ æ–‡ä»¶./filemgr --action upload-hit --bucket demobucket --key key --file filenameå‚æ•°è¯´æ˜:â€“bucket: éœ€è¦ä¸Šä¼ è‡³çš„ bucket åç§°â€“key : ä¸Šä¼ è‡³ bucket ä¸­çš„æ–‡ä»¶åç§°â€“file : éœ€è¦ä¸Šä¼ çš„æœ¬åœ°æ–‡ä»¶è·¯å¾„
ç¤ºä¾‹:å°è¯•ç§’ä¼ æœ¬åœ°æ–‡ä»¶ falcon.avi è‡³å­˜å‚¨ç©ºé—´ nfl2014 å‘½åä¸º 2014-superbow.avi
./filemgr --action upload-hit --bucket demobucket --key 2014-superbow.avi --file falcon.avi
è®¡ç®—æ–‡ä»¶ETagè¯¥é€‰é¡¹ç”¨äºè®¡ç®—ä½¿ç”¨ufileç‰¹æ®Šç®—æ³•å¾—åˆ°çš„æ–‡ä»¶å“ˆå¸Œå€¼
./filemgr --action etag --file filenameå‚æ•°è¯´æ˜:â€“file: éœ€è¦è®¡ç®—å“ˆå¸Œçš„æœ¬åœ°æ–‡ä»¶è·¯å¾„
ç¤ºä¾‹:è®¡ç®—æœ¬åœ°æ–‡ä»¶ sniff-the-rose.pdf çš„ ETag./filemgr --action etag --file /opt/tiger/sniff-the-rose.pdf
å¢é‡ä¸Šä¼ å¢é‡ä¸Šä¼ ä»…ä¸Šä¼ æ–°å¢æˆ–æœ‰å‘ç”Ÿä¿®æ”¹çš„æ•´ä¸ªæ–‡ä»¶ã€‚
./filemgr --action sync --bucket demobucket --dir syncdir [--speedlimit speedlimit] [--prefix prefix] [--excludeptn]
å‚æ•°è¯´æ˜:â€“bucket : éœ€è¦åŒæ­¥è‡³è¿œç«¯çš„ bucket åç§°â€“dir    : éœ€è¦åŒæ­¥çš„æœ¬åœ°æ–‡ä»¶å¤¹â€“speedlimit : ä¸Šä¼ é™é€Ÿ(byte/s)â€“prefix : ç”Ÿæˆæ–‡ä»¶çš„ key æ—¶ä½¿ç”¨çš„å‰ç¼€â€“excludeptn: éœ€è¦æ’é™¤ä¸Šä¼ çš„æ–‡ä»¶æ¨¡å¼ï¼Œæ”¯æŒ POSIX æ­£åˆ™è¡¨è¾¾å¼
ç¤ºä¾‹:æŠŠæœ¬åœ°æ–‡ä»¶å¤¹~/go åŒæ­¥åˆ°åä¸º demobucket çš„å­˜å‚¨ç©ºé—´ä¸­
./filemgr --action sync --bucket demobucket --dir ~/go
ç»§ç»­æ£€æŸ¥æ˜¯å¦è¿˜æœ‰æ–‡ä»¶éœ€è¦æ›´æ–°./filemgr --action sync --bucket demobucket --dir ~/go
ä¸Šä¼ mnistæ•°æ®é›†1ã€ä¸Šä¼ mnistæ•°æ®é›†./filemgr --action mput --dir /data/test/data --bucket vk-ucloud --prefix mnist/data --trimpath /data/test/data
2ã€æŸ¥çœ‹ä¸Šä¼ çš„æ–‡ä»¶
./bucketmgr --action GetFileList --bucket vk-ucloudä¾‹å¦‚ï¼Œçœ‹åˆ°çš„æ–‡ä»¶ä¸ºï¼š
&#123;    BucketName:   vk-ucloud    Key:          mnist/data/t10k-images-idx3-ubyte.gz    Hash:         AQAAAMOiWvH1La1_cmzOjKyxOGVLdg1I@session_0ade634b-8be9-4537-8f73-b900155aae20    MimeType:     application/x-gzip    Size:         1648877    Created:      1508560491    Modified:     1508560491&#125;

é‚£ä¹ˆï¼ŒCDNåŠ é€Ÿåœ°å€ä¸ºï¼šhttp://vk-ucloud.ufile.ucloud.com.cn/mnist/data/t10k-images-idx3-ubyte.gz ï¼Œæºç«™åœ°å€ä¸ºï¼š http://vk-ucloud.cn-bj.ufileos.com/mnist/data/t10k-images-idx3-ubyte.gz
AIè®­ç»ƒæœåŠ¡é…ç½®1ã€è®¿é—®UCloudæ§åˆ¶å°ï¼Œåœ¨å·¦ä¾§å¯¼èˆªæ ä¸­æ‰¾åˆ°AIè®­ç»ƒæœåŠ¡ï¼Œç„¶åç‚¹å‡»â€œåˆ›å»ºAIè®­ç»ƒä»»åŠ¡â€ã€‚
2ã€æŒ‰ç…§æç¤ºï¼Œå¡«å…¥éœ€è¦çš„ä¿¡æ¯ã€‚UCloud APIçš„å…¬é’¥å’Œç§é’¥ï¼Œå¯ä»¥åœ¨å·¦ä¸Šè§’â€œäº§å“ä¸æœåŠ¡â€ï¼Œâ€œAPIå¯†é’¥ UAPIâ€ä¸­æ‰¾åˆ°ã€‚ä»£ç é•œåƒåº“é€‰æ‹©ç”¨æˆ·é•œåƒåº“ï¼Œé•œåƒé€‰æ‹©æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„mnist_test:uaitrainã€‚æ•°æ®è¾“å…¥è·¯å¾„ä¸ºï¼šhttp://vk-ucloud.cn-bj.ufileos.com/mnist/data/æ•°æ®è¾“å‡ºè·¯å¾„ä¸ºï¼šhttp://vk-ucloud.cn-bj.ufileos.com/mnist/output/è®­ç»ƒæ—¶é•¿ä¸ºï¼š6
3ã€ç‚¹å‡»å³ä¾§ç¡®å®šï¼Œåˆ›å»ºä»»åŠ¡å®Œæˆã€‚
4ã€é€‰ä¸­ä»»åŠ¡ï¼Œç‚¹å‡»å¼€å§‹ï¼Œå³å¯å¼€å§‹è®­ç»ƒã€‚ç‚¹å‡»è¯¦æƒ…ï¼Œå¯ä»¥æŸ¥çœ‹åˆ°è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ—¥å¿—ã€‚ç‚¹å‡»tenserboardï¼Œçœ‹åˆ°è®­ç»ƒè¿‡ç¨‹ä¸­çš„ç²¾åº¦å˜åŒ–ç­‰ã€‚
5ã€åœ¨tensorboardçœ‹åˆ°ç²¾åº¦åˆ°è¾¾1åï¼Œå³å¯åœæ­¢è®­ç»ƒã€‚è¿™æ—¶ï¼Œhttp://vk-ucloud.cn-bj.ufileos.com/mnist/output/ æ–‡ä»¶å¤¹ä¸‹ï¼Œä¼šå‡ºç°è®­ç»ƒç»“æœã€‚
å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡ŒæŸ¥çœ‹ï¼Œä¹Ÿå¯ä»¥åœ¨webé¢æ¿æŸ¥çœ‹ã€‚
ä¹¦ç­¾å…¨çƒAIæŒ‘æˆ˜èµ›-è‹±ä¸­æœºå™¨æ–‡æœ¬ç¿»è¯‘
è°·æ­Œå¼€æ”¾GNMTæ•™ç¨‹ï¼šå¦‚ä½•ä½¿ç”¨TensorFlowæ„å»ºè‡ªå·±çš„ç¥ç»æœºå™¨ç¿»è¯‘ç³»ç»Ÿ
UCloudæ–‡æ¡£ä¸­å¿ƒ
å…¨çƒAIæŒ‘æˆ˜èµ›UCloudå‚è€ƒèµ„æ–™
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>tensorflow</tag>
      </tags>
  </entry>
  <entry>
    <title>è‹±ä¸­æœºå™¨æ–‡æœ¬ç¿»è¯‘-ç¬¬0ç« </title>
    <url>/dev-en-to-zh-translation-0/</url>
    <content><![CDATA[æœºå™¨ç¿»è¯‘æœºå™¨ç¿»è¯‘ï¼Œå³è·¨è¯­è¨€é—´çš„è‡ªåŠ¨ç¿»è¯‘ï¼Œæ˜¯æœºå™¨å­¦ä¹ ç¤¾åŒºæœ€æ´»è·ƒçš„ç ”ç©¶é¢†åŸŸã€‚åœ¨æœºå™¨ç¿»è¯‘çš„ä¼—å¤šæ–¹æ³•ä¸­ï¼Œåºåˆ—åˆ°åºåˆ—ï¼ˆsequence-to-sequenceï¼Œseq2seqï¼‰æ¨¡å‹è¿‘æœŸè·å¾—å·¨å¤§æˆåŠŸã€‚ç”±äºå…¶å¯ä»¥ä½¿ç”¨æ·±åº¦ç¥ç»ç½‘ç»œè·å–å¥ä¹‰ï¼Œè¯¥æ¨¡å‹æˆä¸ºè°·æ­Œç¿»è¯‘ç­‰å¤šæ•°å•†ä¸šç¿»è¯‘ç³»ç»Ÿäº‹å®ä¸Šçš„æ ‡å‡†æ¨¡å‹ã€‚
å°ç”Ÿä»¥å‚åŠ ã€Šå…¨çƒAIæŒ‘æˆ˜èµ›-è‹±ä¸­æœºå™¨æ–‡æœ¬ç¿»è¯‘ã€‹ä¸ºå¯¼å‘ï¼Œå­¦ä¹ å„ç§ç›¸å…³çŸ¥è¯†ã€‚


èµ›é¢˜ç®€ä»‹è‹±ä¸­æ–‡æœ¬æœºå™¨ç¿»è¯‘ç«èµ›çš„ç›®æ ‡æ˜¯è¯„æµ‹è‹±ä¸­æ–‡æœ¬æœºå™¨ç¿»è¯‘çš„èƒ½åŠ›ã€‚æœ¬æ¬¡æ–‡æœ¬æœºå™¨ç¿»è¯‘è¯­è¨€æ–¹å‘ä¸ºè‹±æ–‡åˆ°ä¸­æ–‡ã€‚å‚èµ›é˜Ÿä¼éœ€è¦æ ¹æ®è¯„æµ‹æ–¹æä¾›çš„æ•°æ®ï¼Œè®­ç»ƒæœºå™¨ç¿»è¯‘ç³»ç»Ÿï¼Œå¹¶ä¸”è‡ªç”±åœ°é€‰æ‹©æœºå™¨ç¿»è¯‘æŠ€æœ¯ã€‚ä¾‹å¦‚ï¼ŒåŸºäºè§„åˆ™çš„ç¿»è¯‘æŠ€æœ¯ã€åŸºäºå®ä¾‹çš„ç¿»è¯‘æŠ€æœ¯ã€ç»Ÿè®¡æœºå™¨ç¿»è¯‘åŠç¥ç»ç½‘ç»œæœºå™¨ç¿»è¯‘æŠ€æœ¯ç­‰ã€‚
æœ¬æ¬¡ç«èµ›å°†åˆ©ç”¨æœºå™¨ç¿»è¯‘çš„å®¢è§‚è€ƒæ ¸æŒ‡æ ‡ï¼ˆBLEUã€NIST scoreã€TERï¼‰è¿›è¡Œè¯„åˆ†ï¼ŒBLEUå¾—åˆ†ä¼šä½œä¸ºä¸»è¦çš„æœºå™¨è¯„ä»·æŒ‡æ ‡ã€‚ç»„å§”ä¼šå°†é€šè¿‡å®¢è§‚æŒ‡æ ‡ï¼Œå¹¶ç»“åˆç­”è¾©è¡¨ç°ï¼Œç»¼åˆè¯„ä¼°å‚èµ›è€…çš„ç®—æ³•æ¨¡å‹ã€‚
ç¯å¢ƒå‡†å¤‡è½¯ä»¶å®‰è£…
win10
python3.6
tensorflow1.3.0

æºç å®‰è£…é…ç½®git clone https://github.com/tensorflow/nmt/
å› ä¸ºtensorflowçš„æ›´æ–°å¾ˆå¿«ï¼Œnmté¡¹ç›®çš„æ›´æ–°ä¹Ÿå¾ˆå¿«ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨å’Œtensorflowç‰ˆæœ¬å¯¹åº”çš„nmtç‰ˆæœ¬ã€‚git reset --hard 77e6c55
å…¥é—¨demoè®©æˆ‘ä»¬å¼€å§‹è®­ç»ƒç¬¬ä¸€ä¸ª NMT æ¨¡å‹ï¼Œå°†è¶Šå—è¯­ç¿»è¯‘ä¸ºè‹±è¯­ã€‚ä»£ç çš„å…¥å£æ˜¯nmt.pyã€‚
æ•°æ®é›†æˆ‘ä»¬å°†ä½¿ç”¨å°è§„æ¨¡çš„ Ted æ¼”è®²å¹¶è¡Œè¯­æ–™åº“ï¼ˆ133k çš„è®­ç»ƒæ ·æœ¬ï¼‰è¿›è¡Œè®­ç»ƒã€‚æ‰€æœ‰çš„æ•°æ®éƒ½å¯ä»ä»¥ä¸‹é“¾æ¥æ‰¾åˆ°ï¼šhttps://nlp.stanford.edu/projects/nmt/ ã€‚
æˆ‘ä»¬å°†ä½¿ç”¨tst2012ä½œä¸ºå¼€å‘æ•°æ®é›†ï¼Œtst2013ä½œä¸ºæµ‹è¯•æ•°æ®é›†ã€‚åœ¨linuxä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤è¡Œä¸‹è½½æ•°æ®ï¼šmkdir -p /tmp/nmt_data
nmt/scripts/download_iwslt15.sh /tmp/nmt_data
linuxä¸‹è½½å¥½æ•°æ®é›†åï¼ŒæŠŠæ•°æ®é›†ä¸‹è½½åˆ°win10ä¸­nmtç›®å½•ä¸­ï¼Œè·¯å¾„ä¸ºnmt/tmp/nmt_dataã€‚
è®­ç»ƒmodelåœ¨æ ¹ç›®å½•ï¼ˆnmtç›®å½•ï¼‰ä¸‹è¿è¡Œï¼š
python -m nmt.nmt --src=vi --tgt=en --vocab_prefix=./tmp/nmt_data/vocab  --train_prefix=./tmp/nmt_data/train --dev_prefix=./tmp/nmt_data/tst2012  --test_prefix=./tmp/nmt_data/tst2013 --out_dir=./tmp/nmt_model --num_train_steps=12000 --steps_per_stats=100 --num_layers=2 --num_units=128 --dropout=0.2 --metrics=bleu

éƒåŒå­¦i5-3337U &#x43;&#80;&#85;&#x40;&#49;&#x2e;&#56;&#x30;&#71;&#x48;&#122;ï¼Œ8Gå†…å­˜ï¼Œè®­ç»ƒäº†å°†è¿‘ä¸¤ä¸ªå°æ—¶æ‰è®­ç»ƒå®Œæˆã€‚ä¸‹æ–‡æˆ‘ä»¬è¦å­¦ä¹ ä½¿ç”¨ä¸€ä¸‹UCloudæä¾›çš„å…è´¹GPUã€‚
æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Tensorboard åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æŸ¥çœ‹æ¨¡å‹çš„æ€»ç»“ï¼š
tensorboard --port 22222 --logdir ./tmp/nmt_model/
é€šè¿‡ä»¥ä¸‹ç®€å•çš„å˜åŒ–ï¼Œå°±èƒ½é€†å‘å®Œæˆè‹±è¯­åˆ°è¶Šå—è¯­çš„ç¿»è¯‘ã€‚
--src=en --tgt=vi
ä½¿ç”¨model1ã€ä»mnt/tmp/nmt_data/tst2013.viä¸­å¤åˆ¶å‡ å¥è¯ï¼Œæ–°å»ºnmt/tmp/my_infer_file.viï¼Œç²˜è´´åˆ°é‡Œé¢ã€‚
2ã€è¿è¡Œmodel
python -m nmt.nmt --model_dir=./tmp/nmt_model --inference_input_file=./tmp/my_infer_file.vi --inference_output_file=./tmp/nmt_model/output_infer

3ã€æŸ¥çœ‹ç»“æœæ‰“å¼€nmt/tmp/nmt_model/output_inferæ–‡ä»¶ï¼Œå³å¯çœ‹åˆ°ç¿»è¯‘ç»“æœã€‚
ä¹¦ç­¾å…¨çƒAIæŒ‘æˆ˜èµ›-è‹±ä¸­æœºå™¨æ–‡æœ¬ç¿»è¯‘
è°·æ­Œå¼€æ”¾GNMTæ•™ç¨‹ï¼šå¦‚ä½•ä½¿ç”¨TensorFlowæ„å»ºè‡ªå·±çš„ç¥ç»æœºå™¨ç¿»è¯‘ç³»ç»Ÿ
Neural Machine Translation (seq2seq) Tutorial
ç”¨CNNåšæœºå™¨ç¿»è¯‘ï¼ŸFacebookç›¸å…³è®ºæ–‡çš„PyTorchä»£ç å‘å¸ƒ
ä»é›¶å¼€å§‹ï¼šæ·±åº¦å­¦ä¹ è½¯ä»¶ç¯å¢ƒå®‰è£…æŒ‡å—
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>pip</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>tensorflow</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonè½¯ä»¶ä»“åº“PyPI</title>
    <url>/dev-python-pypi/</url>
    <content><![CDATA[PyPIç®€ä»‹
The Python Package Index, abbreviated as PyPI (/ËŒpaÉªpiËˆaÉª/) and also known as the Cheese Shop, is the official third-party software repository for Python.

PyPIæ˜¯Pythonè½¯ä»¶ä»“åº“ï¼Œæˆ‘ä»¬æ‰§è¡Œpip installæ—¶å°±æ˜¯ä»PyPIä»“åº“ä¸­æ‹‰å–çš„è½¯ä»¶åŒ…ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Python Package Index



æ›¿æ¢å›½å†…PyPIä»“åº“å›½å†…ä½¿ç”¨pythonä¸‹è½½åŒ…ï¼Œç»å¸¸ä¼šé‡åˆ°ä¸‹è½½ä¸äº†çš„æƒ…å†µï¼Œè¿™æ—¶å¯ä»¥æ›¿æ¢PyPIä»“åº“ã€‚
ç›®å‰å›½å†…é è°±çš„ pip é•œåƒæºæœ‰ï¼šæ¸…åï¼šhttps://pypi.tuna.tsinghua.edu.cn/simple/é˜¿é‡Œï¼šhttps://mirrors.aliyun.com/pypi/simple/è±†ç“£ï¼šhttps://pypi.douban.com/simple/
å‚è€ƒæ–‡æ¡£ï¼špypi é•œåƒä½¿ç”¨å¸®åŠ©ã€‚
ä¸´æ—¶ä½¿ç”¨æ¯”å¦‚æ›´æ–°tensorflowï¼Œå¯ä»¥ä½¿ç”¨
pip install tensorflow --upgrade -i https://pypi.tuna.tsinghua.edu.cn/simplepip install tensorflow --upgrade --trusted-host -i https://pypi.tuna.tsinghua.edu.cn/simple
ä¸¤è€…çš„å·®åˆ«ï¼Œåœ¨äºä½¿ç”¨çš„åè®®æ˜¯httpè¿˜æ˜¯httpsã€‚åœ¨æœ€æ–°çš„pipç‰ˆæœ¬(&gt;=7)ä¸­ï¼Œä½¿ç”¨é•œåƒæºæ—¶ï¼Œä¼šæç¤ºæºåœ°å€ä¸å—ä¿¡ä»»æˆ–ä¸å®‰å…¨ã€‚
Windowsé…ç½®PyPI1ã€åˆ›å»ºç›®å½•å’Œæ–‡ä»¶
%appdata%\pip\pip.ini# c:\user\username\pip\pip.ini

2ã€pip.iniå†…å®¹ä¸ºï¼š
[global]index-url = https://pypi.tuna.tsinghua.edu.cn/simple/[install]trusted-host = https://pypi.tuna.tsinghua.edu.cn/simple/

Linuxé…ç½®PyPI1ã€åˆ›å»ºç›®å½•å’Œæ–‡ä»¶
vi ~/.pip/pip.conf

2ã€pip.confå†…å®¹ä¸ºï¼š
[global]index-url = https://pypi.tuna.tsinghua.edu.cn/simple/[install]trusted-host = https://pypi.tuna.tsinghua.edu.cn/simple/

Anacondaé…ç½®PyPIconda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/conda config --set show_channel_urls yes

è™½ç„¶ä¿®æ”¹äº†è½¯ä»¶æºï¼Œä½†æ˜¯pip searchå‘½ä»¤è¿˜æ˜¯ä¸èƒ½ä½¿ç”¨çš„ï¼Œå› ä¸ºæœç´¢è½¯ä»¶ä½¿ç”¨çš„åè®®ä¸å®‰è£…è½¯ä»¶ä¸åŒã€‚pip searchåŸºäºxmlrpclibå®ç°ï¼Œpip installåŸºäºurllib2å®ç°ã€‚
æ‰“åŒ…Pythonè½¯ä»¶åŒ…æ‰“åŒ…wheelåŒ…1ã€å‡†å¤‡pythoné¡¹ç›®
.â”œâ”€â”€ exampleâ”‚Â Â  â””â”€â”€ main.pyâ””â”€â”€ setup.py

å…¶ä¸­main.pyå†…å®¹ä¸ºï¼š
if __name__ == &#x27;__main__&#x27;:  print(&quot;hello&quot;)

2ã€å‡†å¤‡setup.py
from setuptools import find_packagesfrom setuptools import setup setup(    name=&quot;example&quot;,    version=&quot;1.0.1&quot;,    author=&quot;voidking&quot;,    author_email=&quot;voidking@qq.com&quot;,    description=&quot;desc&quot;,    long_description=&quot;long desc&quot;,    license=&#x27;Apache2.0&#x27;,    # packages=[&#x27;example&#x27;]  # pythoné¡¹ç›®æ–‡ä»¶å¤¹çš„åå­—    packages=find_packages())

3ã€æ‰§è¡Œæ‰“åŒ…
pip install setuptoolspip install wheelpython setup.py bdist_wheel

æµ‹è¯•wheelåŒ…pip install dist/example-1.0.1-py3-none-any.whlpython -m example.main

å®‰è£…é…ç½®PyPIå‚è€ƒæ–‡æ¡£ï¼š

åˆ©ç”¨Dockerå¿«é€Ÿæ„å»ºåŸºäºdevpiçš„ä¼ä¸šçº§ç§æœ‰PyPI Server
devpi - PyPI
devpi/devpi-ldap
devpi-auth-gitlab

å‡†å¤‡é…ç½®æ–‡ä»¶å‡†å¤‡é…ç½®æ–‡ä»¶ï¼š

config.yamlï¼šdevpiçš„é…ç½®æ–‡ä»¶
Dockerfileï¼šç”¨äºæ‰“åŒ…devpi-serverçš„é•œåƒ
devpi-ldap.yamlï¼šdevpiæ”¯æŒldapçš„é…ç½®

å®Œæ•´é…ç½®æ–‡ä»¶å‚è€ƒhexo-storage/python-pypi
å®‰è£…PyPI1ã€æ‰“åŒ…é•œåƒ
docker build -t voidking/devpi-server:v1.0 .

2ã€masterèŠ‚ç‚¹
mkdir -p /opt/pypi/data/mkdir -p /opt/pypi/certs/openssl genrsa -out /opt/pypi/certs/key.pem 2048chmod 600 /opt/pypi/certs/key.pemdocker run --rm \-v /opt/pypi/data:/app/data \-v /opt/pypi/certs/key.pem:/app/certs/key.pem \-p 3141:3141 \voidking/devpi-server:v1.0 \devpi-init --configfile config.yaml \--role masterdocker run -it --name devpi-master -d \--restart=always \-v /opt/pypi/data:/app/data \-v /opt/pypi/certs/key.pem:/app/certs/key.pem \-p 3141:3141 \voidking/devpi-server:v1.0 \devpi-server \--configfile config.yaml \--ldap-config devpi-ldap.yaml \--gitlab-registry-url https://gitlab.voidking.com \--role master \--secretfile /app/certs/key.pem \--port=3141

3ã€workerèŠ‚ç‚¹
docker run -it --rm \-v /opt/pypi/data:/app/data \-v /opt/pypi/certs/key.pem:/app/certs/key.pem \-p 3141:3141 \voidking/devpi-server:v1.0 \devpi-init \--configfile config.yaml \--role replica \--master=http://192.168.56.101:3141docker run -it --name devpi-worker1 -d \--restart=always \-v /opt/pypi/data:/app/data \-v /opt/pypi/certs/key.pem:/app/certs/key.pem \-p 3141:3141 \voidking/devpi-server:v1.0 \devpi-server \--configfile config.yaml \--role replica \--master=http://192.168.56.101:3141 \--secretfile /app/certs/key.pem \--port=3141

ä½¿ç”¨PyPIç™»å½•PyPIä»“åº“pip install devpi-clientdevpi use http://localhost:3141devpi login root --password=&#x27;&#x27;devpi passwd # ä¿®æ”¹å¯†ç devpi user -m root password=newpasswd # ä¿®æ”¹å¯†ç æ–¹æ³•äºŒdevpi login root --password=newpasswddevpi logoff

è®¾ç½®é•œåƒä»“åº“devpi index root/pypi mirror_url=&quot;https://pypi.douban.com/simple&quot;
å½“æœ¬åœ°PyPIä»“åº“ä¸­ä¸å­˜åœ¨æŸä¸ªåŒ…æ—¶ï¼Œä»é•œåƒä»“åº“ä¸­æ‹‰å–ã€‚
åˆ›å»ºç´¢å¼•devpi index -c dev bases=root/pypidevpi use root/dev

ä¸Šä¼ PyPIåŒ…devpi login root --password=newpasswddevpi use root/devdevpi upload --wheel

æƒ³è¦å¸¦æ–‡æ¡£ä¸Šä¼ çš„è¯ï¼Œå‚è€ƒæ–‡æ¡£Sphinxé…ç½®conf.pyæ–‡ä»¶
pip install sphinxdevpi upload --wheel --with-docs

åˆ é™¤PyPIåŒ…devpi remove exampledevpi remove example&gt;=1.0.1

æ¨é€åŒ…åˆ°å¦å¤–çš„ç´¢å¼•devpi push å‘½ä»¤æ˜¯å°†åŒ…ä»ä¸€ä¸ªç´¢å¼•æ¨é€åˆ°å¦å¤–ä¸€ä¸ªç´¢å¼•ï¼Œä¾‹å¦‚å°†åŒ…exampleæ¨é€åˆ°root/dev
devpi push example==1.0.1 root/dev


]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>docker</tag>
        <tag>pip</tag>
        <tag>pypi</tag>
      </tags>
  </entry>
  <entry>
    <title>tensorflowè¿›é˜¶</title>
    <url>/dev-tensorflow-advance/</url>
    <content><![CDATA[åˆ†ç±»å­¦ä¹ åˆ†ç±»å’Œå›å½’çš„åŒºåˆ«åœ¨äºè¾“å‡ºå˜é‡çš„ç±»å‹ä¸Šã€‚é€šä¿—ç†è§£å®šé‡è¾“å‡ºæ˜¯å›å½’ï¼Œæˆ–è€…è¯´æ˜¯è¿ç»­å˜é‡é¢„æµ‹ï¼›å®šæ€§è¾“å‡ºæ˜¯åˆ†ç±»ï¼Œæˆ–è€…è¯´æ˜¯ç¦»æ•£å˜é‡é¢„æµ‹ã€‚å¦‚é¢„æµ‹æˆ¿ä»·è¿™æ˜¯ä¸€ä¸ªå›å½’ä»»åŠ¡ï¼›æŠŠä¸œè¥¿åˆ†æˆå‡ ç±», æ¯”å¦‚çŒ«ç‹—çŒªç‰›ï¼Œå°±æ˜¯ä¸€ä¸ªåˆ†ç±»ä»»åŠ¡ã€‚


MNISTMNISTæ˜¯ä¸€ä¸ªå…¥é—¨çº§çš„è®¡ç®—æœºè§†è§‰æ•°æ®é›†ï¼Œå®ƒåŒ…å«å„ç§æ‰‹å†™æ•°å­—å›¾ç‰‡ï¼Œå®ƒä¹ŸåŒ…å«æ¯ä¸€å¼ å›¾ç‰‡å¯¹åº”çš„æ ‡ç­¾ï¼Œå‘Šè¯‰æˆ‘ä»¬è¿™ä¸ªæ˜¯æ•°å­—å‡ ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è®­ç»ƒä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹ç”¨äºé¢„æµ‹å›¾ç‰‡é‡Œé¢çš„æ•°å­—ã€‚
ä¸‹è½½æ•°æ®é›†è®¿é—®THE MNIST DATABASEï¼Œä¸‹è½½ï¼š

train-images-idx3-ubyte.gz
train-labels-idx1-ubyte.gz
t10k-images-idx3-ubyte.gz
t10k-labels-idx1-ubyte.gz

æŠŠè¿™å››ä¸ªæ–‡ä»¶æ”¾åˆ°Tensorflow-Tutorial/tutorial-contents/mnistç›®å½•ä¸‹ã€‚
æ•°æ®ä¸­åŒ…å«55000å¼ è®­ç»ƒå›¾ç‰‡ï¼Œæ¯å¼ å›¾ç‰‡çš„åˆ†è¾¨ç‡æ˜¯28Ã—28ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„è®­ç»ƒç½‘ç»œè¾“å…¥åº”è¯¥æ˜¯28Ã—28=784ä¸ªåƒç´ æ•°æ®ã€‚
ç¼–ç from __future__ import print_functionimport tensorflow as tffrom tensorflow.examples.tutorials.mnist import input_data# number 1 to 10 datamnist = input_data.read_data_sets(&#x27;./mnist&#x27;, one_hot=True)def add_layer(inputs, in_size, out_size, activation_function=None,):    # add one more layer and return the output of this layer    Weights = tf.Variable(tf.random_normal([in_size, out_size]))    biases = tf.Variable(tf.zeros([1, out_size]) + 0.1,)    Wx_plus_b = tf.matmul(inputs, Weights) + biases    if activation_function is None:        outputs = Wx_plus_b    else:        outputs = activation_function(Wx_plus_b,)    return outputsdef compute_accuracy(v_xs, v_ys):    global prediction    y_pre = sess.run(prediction, feed_dict=&#123;xs: v_xs&#125;)    correct_prediction = tf.equal(tf.argmax(y_pre,1), tf.argmax(v_ys,1))    accuracy = tf.reduce_mean(tf.cast(correct_prediction, tf.float32))    result = sess.run(accuracy, feed_dict=&#123;xs: v_xs, ys: v_ys&#125;)    return result# define placeholder for inputs to networkxs = tf.placeholder(tf.float32, [None, 784]) # 28x28ys = tf.placeholder(tf.float32, [None, 10])# add output layerprediction = add_layer(xs, 784, 10,  activation_function=tf.nn.softmax)# the error between prediction and real datacross_entropy = tf.reduce_mean(-tf.reduce_sum(ys * tf.log(prediction),                                              reduction_indices=[1]))       # losstrain_step = tf.train.GradientDescentOptimizer(0.5).minimize(cross_entropy)sess = tf.Session()# important step# tf.initialize_all_variables() no long valid from# 2017-03-02 if using tensorflow &gt;= 0.12if int((tf.__version__).split(&#x27;.&#x27;)[1]) &lt; 12 and int((tf.__version__).split(&#x27;.&#x27;)[0]) &lt; 1:    init = tf.initialize_all_variables()else:    init = tf.global_variables_initializer()sess.run(init)for i in range(1000):    batch_xs, batch_ys = mnist.train.next_batch(100)    sess.run(train_step, feed_dict=&#123;xs: batch_xs, ys: batch_ys&#125;)    if i % 50 == 0:        print(compute_accuracy(            mnist.test.images, mnist.test.labels))

è¿‡æ‹Ÿåˆè¿‡æ‹Ÿåˆçš„æ¨¡å‹ï¼Œæ³›åŒ–èƒ½åŠ›å·®ï¼Œä¸èƒ½æˆåŠŸçš„è¡¨è¾¾é™¤äº†è®­ç»ƒæ•°æ®ä»¥å¤–çš„å…¶ä»–æ•°æ®ã€‚
æ•°æ®é‡å¢åŠ æ•°æ®é‡ï¼Œå¤§éƒ¨åˆ†è¿‡æ‹Ÿåˆäº§ç”Ÿçš„åŸå› æ˜¯å› ä¸ºæ•°æ®é‡å¤ªå°‘äº†ã€‚
æ­£è§„åŒ–è¿ç”¨æ­£è§„åŒ–ï¼ŒL1ã€l2 regularizationç­‰ç­‰ï¼Œè¿™äº›æ–¹æ³•é€‚ç”¨äºå¤§å¤šæ•°çš„æœºå™¨å­¦ä¹ ï¼ŒåŒ…æ‹¬ç¥ç»ç½‘ç»œã€‚ä¸»è¦æ€æƒ³æ˜¯æŠŠWï¼ˆæƒé‡ï¼‰åŠ å…¥åˆ°costï¼ŒWå˜å¾—å¤ªå¤§ï¼Œå°±è®©costéšä¹‹å˜å¤§ï¼Œæˆä¸ºä¸€ç§æƒ©ç½šæœºåˆ¶ã€‚
dropoutè¿˜æœ‰ä¸€ç§ä¸“é—¨ç”¨åœ¨ç¥ç»ç½‘ç»œçš„æ­£è§„åŒ–çš„æ–¹æ³•ï¼Œå«ä½œ dropoutã€‚åœ¨è®­ç»ƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬éšæœºå¿½ç•¥æ‰ä¸€äº›ç¥ç»å…ƒå’Œç¥ç»è”ç»“ï¼Œä½¿è¿™ä¸ªç¥ç»ç½‘ç»œå˜å¾—â€œä¸å®Œæ•´â€ã€‚ç”¨ä¸€ä¸ªä¸å®Œæ•´çš„ç¥ç»ç½‘ç»œè®­ç»ƒä¸€æ¬¡ã€‚åˆ°ç¬¬äºŒæ¬¡å†éšæœºå¿½ç•¥å¦ä¸€äº›ï¼Œå˜æˆå¦ä¸€ä¸ªä¸å®Œæ•´çš„ç¥ç»ç½‘ç»œã€‚æœ‰äº†è¿™äº›éšæœº drop æ‰çš„è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³è±¡å…¶å®æ¯æ¬¡è®­ç»ƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½è®©æ¯ä¸€æ¬¡é¢„æµ‹ç»“æœéƒ½ä¸ä¼šä¾èµ–äºå…¶ä¸­æŸéƒ¨åˆ†ç‰¹å®šçš„ç¥ç»å…ƒã€‚
conda install scikit-learn
# View more python learning tutorial on my Youtube and Youku channel!!!# Youtube video tutorial: https://www.youtube.com/channel/UCdyjiB5H8Pu7aDTNVXTTpcg# Youku video tutorial: http://i.youku.com/pythontutorial&quot;&quot;&quot;Please note, this code is only for python 3+. If you are using python 2+, please modify the code accordingly.&quot;&quot;&quot;from __future__ import print_functionimport tensorflow as tffrom sklearn.datasets import load_digitsfrom sklearn.model_selection import train_test_splitfrom sklearn.preprocessing import LabelBinarizer# load datadigits = load_digits()X = digits.datay = digits.targety = LabelBinarizer().fit_transform(y)X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=.3)def add_layer(inputs, in_size, out_size, layer_name, activation_function=None, ):    # add one more layer and return the output of this layer    Weights = tf.Variable(tf.random_normal([in_size, out_size]))    biases = tf.Variable(tf.zeros([1, out_size]) + 0.1, )    Wx_plus_b = tf.matmul(inputs, Weights) + biases    # here to dropout    Wx_plus_b = tf.nn.dropout(Wx_plus_b, keep_prob)    if activation_function is None:        outputs = Wx_plus_b    else:        outputs = activation_function(Wx_plus_b, )    tf.summary.histogram(layer_name + &#x27;/outputs&#x27;, outputs)    return outputs# define placeholder for inputs to networkkeep_prob = tf.placeholder(tf.float32)xs = tf.placeholder(tf.float32, [None, 64])  # 8x8ys = tf.placeholder(tf.float32, [None, 10])# add output layerl1 = add_layer(xs, 64, 50, &#x27;l1&#x27;, activation_function=tf.nn.tanh)prediction = add_layer(l1, 50, 10, &#x27;l2&#x27;, activation_function=tf.nn.softmax)# the loss between prediction and real datacross_entropy = tf.reduce_mean(-tf.reduce_sum(ys * tf.log(prediction),                                              reduction_indices=[1]))  # losstf.summary.scalar(&#x27;loss&#x27;, cross_entropy)train_step = tf.train.GradientDescentOptimizer(0.5).minimize(cross_entropy)sess = tf.Session()merged = tf.summary.merge_all()# summary writer goes in heretrain_writer = tf.summary.FileWriter(&quot;log/train&quot;, sess.graph)test_writer = tf.summary.FileWriter(&quot;log/test&quot;, sess.graph)# tf.initialize_all_variables() no long valid from# 2017-03-02 if using tensorflow &gt;= 0.12if int((tf.__version__).split(&#x27;.&#x27;)[1]) &lt; 12 and int((tf.__version__).split(&#x27;.&#x27;)[0]) &lt; 1:    init = tf.initialize_all_variables()else:    init = tf.global_variables_initializer()sess.run(init)for i in range(500):    # here to determine the keeping probability    sess.run(train_step, feed_dict=&#123;xs: X_train, ys: y_train, keep_prob: 0.5&#125;)    if i % 50 == 0:        # record loss        train_result = sess.run(merged, feed_dict=&#123;xs: X_train, ys: y_train, keep_prob: 1&#125;)        test_result = sess.run(merged, feed_dict=&#123;xs: X_test, ys: y_test, keep_prob: 1&#125;)        train_writer.add_summary(train_result, i)        test_writer.add_summary(test_result, i)

å‚è€ƒèµ„æ–™
Classification åˆ†ç±»å­¦ä¹ 
MNIST For ML Beginners
Deep MNIST for Experts
MNISTæœºå™¨å­¦ä¹ å…¥é—¨
MNISTæœºå™¨å­¦ä¹ å…¥é—¨
Softmaxå‡½æ•°çš„ç‰¹ç‚¹å’Œä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ

æºç åˆ†äº«https://github.com/voidking/Tensorflow-Tutorial.git
ä¹¦ç­¾TensorFlowå®˜ç½‘
Tensorflowæ¸¸ä¹åœº
è«çƒ¦Tensorflowæ•™ç¨‹ç³»åˆ—
TensorFlow å®˜æ–¹æ–‡æ¡£ä¸­æ–‡ç‰ˆ
TensorFlowä¸­æ–‡ç¤¾åŒº
youtube CS 20SI: Tensorflow for Deep Learning Research
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>tensorflow</tag>
      </tags>
  </entry>
  <entry>
    <title>tensorboardåŸºç¡€</title>
    <url>/dev-tensorboard/</url>
    <content><![CDATA[å‰è¨€ã€Štenserflowå…¥é—¨ã€‹ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†tensorflowçš„åŸºæœ¬æ¦‚å¿µå’Œæ­å»ºç¥ç»ç½‘ç»œçš„æ–¹æ³•ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å­¦ä¹ ä¸€ä¸‹tensorboardçš„ä½¿ç”¨ã€‚


Tensorboardä¸ºäº†æ›´æ–¹ä¾¿ TensorFlow ç¨‹åºçš„ç†è§£ã€è°ƒè¯•ä¸ä¼˜åŒ–ï¼ŒGoogleå‘å¸ƒäº†ä¸€å¥—å«åš TensorBoard çš„å¯è§†åŒ–å·¥å…·ã€‚ä½ å¯ä»¥ç”¨ TensorBoard æ¥å±•ç°ä½ çš„ TensorFlow å›¾åƒï¼Œç»˜åˆ¶å›¾åƒç”Ÿæˆçš„å®šé‡æŒ‡æ ‡å›¾ä»¥åŠé™„åŠ æ•°æ®ã€‚
å¯è§†åŒ–æ„å»ºè¿‡ç¨‹ã€Štenserflowå…¥é—¨ã€‹ä¸­ï¼Œæˆ‘ä»¬å»ºç«‹äº†ä¸€ä¸ªç¥ç»ç½‘ç»œã€‚è¿™é‡Œï¼Œæˆ‘ä»¬è¿›è¡Œä¸€ä¸‹ä¿®æ”¹ï¼Œä½¿ä¹‹ç”¨Tensorboardæ˜¾ç¤ºå‡ºç»“æ„ã€‚
import tensorflow as tfimport numpy as nptf.set_random_seed(1)np.random.seed(1)# fake datax = np.linspace(-1, 1, 100)[:, np.newaxis]          # shape (100, 1)noise = np.random.normal(0, 0.1, size=x.shape)y = np.power(x, 2) + noise                          # shape (100, 1) + some noisewith tf.variable_scope(&#x27;Inputs&#x27;):    tf_x = tf.placeholder(tf.float32, x.shape, name=&#x27;x&#x27;)    tf_y = tf.placeholder(tf.float32, y.shape, name=&#x27;y&#x27;)with tf.variable_scope(&#x27;Net&#x27;):    l1 = tf.layers.dense(tf_x, 10, tf.nn.relu, name=&#x27;hidden_layer&#x27;)    output = tf.layers.dense(l1, 1, name=&#x27;output_layer&#x27;)    # add to histogram summary    tf.summary.histogram(&#x27;h_out&#x27;, l1)    tf.summary.histogram(&#x27;pred&#x27;, output)loss = tf.losses.mean_squared_error(tf_y, output, scope=&#x27;loss&#x27;)train_op = tf.train.GradientDescentOptimizer(learning_rate=0.5).minimize(loss)tf.summary.scalar(&#x27;loss&#x27;, loss)     # add loss to scalar summarysess = tf.Session()sess.run(tf.global_variables_initializer())writer = tf.summary.FileWriter(&#x27;./log&#x27;, sess.graph)     # write to filemerge_op = tf.summary.merge_all()                       # operation to merge all summaryfor step in range(100):    # train and net output    _, result = sess.run([train_op, merge_op], &#123;tf_x: x, tf_y: y&#125;)    writer.add_summary(result, step)

1ã€é¦–å…ˆè¿è¡Œç¨‹åºï¼Œpython 305_tensorboard.pyï¼Œè¿™æ—¶ï¼Œä¼šåœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆlogç›®å½•å’Œ event.out.tfevent.* logæ–‡ä»¶ã€‚
2ã€æ‰§è¡Œtensorboard --logdir ./logï¼Œæ­¤æ—¶ï¼Œä¼šå¯åŠ¨tensorboard webæœåŠ¡ï¼Œé»˜è®¤ç«¯å£ä¸º6006ã€‚è®¿é—® http://localhost:6006 ï¼Œçœ‹åˆ°tensorboardé¡µé¢ã€‚
3ã€å› ä¸ºæˆ‘ä»¬åªå®šä¹‰äº†graphï¼Œæ‰€ä»¥ç‚¹å‡»å¯¼èˆªæ çš„GRAPHSï¼Œå³å¯çœ‹åˆ°æˆ‘ä»¬å®šä¹‰çš„graphã€‚
å¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹from __future__ import print_functionimport tensorflow as tfimport numpy as npdef add_layer(inputs, in_size, out_size, n_layer, activation_function=None):    # add one more layer and return the output of this layer    layer_name = &#x27;layer%s&#x27; % n_layer    with tf.name_scope(layer_name):        with tf.name_scope(&#x27;weights&#x27;):            Weights = tf.Variable(tf.random_normal([in_size, out_size]), name=&#x27;W&#x27;)            tf.summary.histogram(layer_name + &#x27;/weights&#x27;, Weights)        with tf.name_scope(&#x27;biases&#x27;):            biases = tf.Variable(tf.zeros([1, out_size]) + 0.1, name=&#x27;b&#x27;)            tf.summary.histogram(layer_name + &#x27;/biases&#x27;, biases)        with tf.name_scope(&#x27;Wx_plus_b&#x27;):            Wx_plus_b = tf.add(tf.matmul(inputs, Weights), biases)        if activation_function is None:            outputs = Wx_plus_b        else:            outputs = activation_function(Wx_plus_b, )        tf.summary.histogram(layer_name + &#x27;/outputs&#x27;, outputs)    return outputs# Make up some real datax_data = np.linspace(-1, 1, 300)[:, np.newaxis]noise = np.random.normal(0, 0.05, x_data.shape)y_data = np.square(x_data) - 0.5 + noise# define placeholder for inputs to networkwith tf.name_scope(&#x27;inputs&#x27;):    xs = tf.placeholder(tf.float32, [None, 1], name=&#x27;x_input&#x27;)    ys = tf.placeholder(tf.float32, [None, 1], name=&#x27;y_input&#x27;)# add hidden layerl1 = add_layer(xs, 1, 10, n_layer=1, activation_function=tf.nn.relu)# add output layerprediction = add_layer(l1, 10, 1, n_layer=2, activation_function=None)# the error between prediciton and real datawith tf.name_scope(&#x27;loss&#x27;):    loss = tf.reduce_mean(tf.reduce_sum(tf.square(ys - prediction),                                        reduction_indices=[1]))    tf.summary.scalar(&#x27;loss&#x27;, loss)with tf.name_scope(&#x27;train&#x27;):    train_step = tf.train.GradientDescentOptimizer(0.1).minimize(loss)sess = tf.Session()merged = tf.summary.merge_all()writer = tf.summary.FileWriter(&quot;log/&quot;, sess.graph)init = tf.global_variables_initializer()sess.run(init)for i in range(1000):    sess.run(train_step, feed_dict=&#123;xs: x_data, ys: y_data&#125;)    if i % 50 == 0:        result = sess.run(merged,                          feed_dict=&#123;xs: x_data, ys: y_data&#125;)        writer.add_summary(result, i)

æ‰“å¼€tensorboardï¼Œç‚¹å‡»å¯¼èˆªæ SCALARSï¼Œå³å¯çœ‹åˆ°lossçš„å˜åŒ–è¿‡ç¨‹ã€‚ç‚¹å‡»å¯¼èˆªæ DISTRIBUTIONSï¼Œå³å¯çœ‹åˆ°weightsã€biaseså’Œputputsçš„å˜åŒ–è¿‡ç¨‹ã€‚
æºç åˆ†äº«https://github.com/voidking/Tensorflow-Tutorial.git
ä¹¦ç­¾TensorFlowå®˜ç½‘
Tensorflowæ¸¸ä¹åœº
è«çƒ¦Tensorflowæ•™ç¨‹ç³»åˆ—
TensorFlow å®˜æ–¹æ–‡æ¡£ä¸­æ–‡ç‰ˆ
TensorFlowä¸­æ–‡ç¤¾åŒº
youtube CS 20SI: Tensorflow for Deep Learning Research
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>tensorflow</tag>
        <tag>tensorboard</tag>
      </tags>
  </entry>
  <entry>
    <title>tensorflowå…¥é—¨</title>
    <url>/dev-tensorflow-start/</url>
    <content><![CDATA[tensorflowç®€ä»‹TensorFlow æ˜¯ä¸€ä¸ªç”¨äºäººå·¥æ™ºèƒ½çš„å¼€æºç¥å™¨ã€‚TensorFlow æ˜¯ä¸€ä¸ªé‡‡ç”¨æ•°æ®æµå›¾ï¼ˆdata flow graphsï¼‰ï¼Œç”¨äºæ•°å€¼è®¡ç®—çš„å¼€æºè½¯ä»¶åº“ã€‚èŠ‚ç‚¹ï¼ˆNodesï¼‰åœ¨å›¾ä¸­è¡¨ç¤ºæ•°å­¦æ“ä½œï¼Œå›¾ä¸­çš„çº¿ï¼ˆedgesï¼‰åˆ™è¡¨ç¤ºåœ¨èŠ‚ç‚¹é—´ç›¸äº’è”ç³»çš„å¤šç»´æ•°æ®æ•°ç»„ï¼Œå³å¼ é‡ï¼ˆtensorï¼‰ã€‚å®ƒçµæ´»çš„æ¶æ„è®©ä½ å¯ä»¥åœ¨å¤šç§å¹³å°ä¸Šå±•å¼€è®¡ç®—ï¼Œä¾‹å¦‚å°å¼è®¡ç®—æœºä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªCPUï¼ˆæˆ–GPUï¼‰ï¼ŒæœåŠ¡å™¨ï¼Œç§»åŠ¨è®¾å¤‡ç­‰ç­‰ã€‚TensorFlow æœ€åˆç”±Googleå¤§è„‘å°ç»„ï¼ˆéš¶å±äºGoogleæœºå™¨æ™ºèƒ½ç ”ç©¶æœºæ„ï¼‰çš„ç ”ç©¶å‘˜å’Œå·¥ç¨‹å¸ˆä»¬å¼€å‘å‡ºæ¥ï¼Œç”¨äºæœºå™¨å­¦ä¹ å’Œæ·±åº¦ç¥ç»ç½‘ç»œæ–¹é¢çš„ç ”ç©¶ï¼Œä½†è¿™ä¸ªç³»ç»Ÿçš„é€šç”¨æ€§ä½¿å…¶ä¹Ÿå¯å¹¿æ³›ç”¨äºå…¶ä»–è®¡ç®—é¢†åŸŸã€‚
æœ¬æ–‡ä¸»è¦å‚è€ƒè«çƒ¦åŒå­¦çš„æ•™ç¨‹ï¼Œè¿›è¡Œäº†å°‘é‡ä¿®æ”¹ã€‚


å®‰è£…tensorflow1ã€å‚è€ƒInstalling TensorFlowæˆ–è€…ä¸‹è½½ä¸å®‰è£…ï¼Œå®‰è£…TensorFlowã€‚
2ã€å‡è®¾æˆ‘ä»¬çš„ç¯å¢ƒæ˜¯anacondaï¼Œé¦–å…ˆæˆ‘ä»¬åˆ‡æ¢åˆ°3.6çš„ç¯å¢ƒï¼Œç„¶åpipå®‰è£…å³å¯ã€‚
activate py3pip install --upgrade tensorflow

3ã€æµ‹è¯•
import osos.environ[&#x27;TF_CPP_MIN_LOG_LEVEL&#x27;]=&#x27;2&#x27;import tensorflow as tfhello = tf.constant(&#x27;Hello, TensorFlow!&#x27;)sess = tf.Session()print(sess.run(hello))

å¦‚æœå±å¹•æ‰“å°å‡ºâ€œHello, TensorFlow!â€ï¼Œåˆ™è¯æ˜å®‰è£…æˆåŠŸï¼
tensorflowåŸºç¡€å¤„ç†ç»“æ„TensorFlow è®©æˆ‘ä»¬å¯ä»¥å…ˆç»˜åˆ¶è®¡ç®—ç»“æ„å›¾ï¼Œä¹Ÿå¯ä»¥ç§°æ˜¯ä¸€ç³»åˆ—å¯äººæœºäº¤äº’çš„è®¡ç®—æ“ä½œï¼Œ ç„¶åæŠŠç¼–è¾‘å¥½çš„Pythonæ–‡ä»¶è½¬æ¢æˆæ›´é«˜æ•ˆçš„ C++ï¼Œå¹¶åœ¨åç«¯è¿›è¡Œè®¡ç®—ã€‚

TensorFlow é¦–å…ˆè¦å®šä¹‰ç¥ç»ç½‘ç»œçš„ç»“æ„ï¼Œç„¶åå†æŠŠæ•°æ®æ”¾å…¥ç»“æ„å½“ä¸­å»è¿ç®—å’Œtraining

ä¸‹é¢åŠ¨å›¾å±•ç¤ºäº† TensorFlow æ•°æ®å¤„ç†æµç¨‹ï¼š
å› ä¸ºTensorFlowæ˜¯é‡‡ç”¨ æ•°æ®æµå›¾ï¼ˆdata flow graphsï¼‰æ¥è®¡ç®—ï¼Œ æ‰€ä»¥é¦–å…ˆæˆ‘ä»¬å¾—åˆ›å»ºä¸€ä¸ªæ•°æ®æµå›¾ï¼Œç„¶åå†å°†æˆ‘ä»¬çš„æ•°æ®ï¼ˆæ•°æ®ä»¥ å¼ é‡(tensor) çš„å½¢å¼å­˜åœ¨ï¼‰æ”¾åˆ°æ•°æ®æµå›¾ä¸­è®¡ç®—ã€‚
å›¾ä¸­çš„ èŠ‚ç‚¹ï¼ˆNodesï¼‰ä¸€èˆ¬ç”¨æ¥è¡¨ç¤ºæ–½åŠ çš„æ•°å­¦æ“ä½œï¼Œä½†ä¹Ÿå¯ä»¥è¡¨ç¤ºæ•°æ®è¾“å…¥ï¼ˆfeed inï¼‰çš„èµ·ç‚¹/è¾“å‡ºï¼ˆpush outï¼‰çš„ç»ˆç‚¹ï¼Œæˆ–è€…æ˜¯è¯»å–/å†™å…¥æŒä¹…å˜é‡ï¼ˆpersistent variableï¼‰çš„ç»ˆç‚¹ï¼›çº¿ï¼ˆedgesï¼‰åˆ™è¡¨ç¤ºåœ¨èŠ‚ç‚¹é—´ç›¸äº’è”ç³»çš„å¤šç»´æ•°æ®æ•°ç»„ï¼Œå³ å¼ é‡ï¼ˆtensorï¼‰ï¼Œè®­ç»ƒæ¨¡å‹æ—¶ï¼Œtensor ä¼šä¸æ–­çš„ä»æ•°æ®æµå›¾ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ flow åˆ°å¦ä¸€èŠ‚ç‚¹ï¼Œè¿™å°±æ˜¯ TensorFlow åå­—çš„ç”±æ¥ã€‚ä¸€æ—¦è¾“å…¥ç«¯çš„æ‰€æœ‰å¼ é‡å‡†å¤‡å¥½ï¼ŒèŠ‚ç‚¹å°†è¢«åˆ†é…åˆ°å„ç§è®¡ç®—è®¾å¤‡å®Œæˆå¼‚æ­¥å¹¶è¡Œåœ°æ‰§è¡Œè¿ç®—ã€‚
å®ƒçµæ´»çš„æ¶æ„è®©ä½ å¯ä»¥åœ¨å¤šç§å¹³å°ä¸Šå±•å¼€è®¡ç®—ï¼Œä¾‹å¦‚å°å¼è®¡ç®—æœºä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªCPUï¼ˆæˆ–GPUï¼‰ï¼ŒæœåŠ¡å™¨ï¼Œç§»åŠ¨è®¾å¤‡ç­‰ç­‰ã€‚

ä½¿ç”¨å›¾ (graph) æ¥è¡¨ç¤ºè®¡ç®—ä»»åŠ¡
åœ¨è¢«ç§°ä¹‹ä¸º ä¼šè¯ (Session) çš„ä¸Šä¸‹æ–‡ (context) ä¸­æ‰§è¡Œå›¾
ä½¿ç”¨ tensor è¡¨ç¤ºæ•°æ®
é€šè¿‡ å˜é‡ (Variable) ç»´æŠ¤çŠ¶æ€
ä½¿ç”¨ feed å’Œ fetch å¯ä»¥ä¸ºä»»æ„çš„æ“ä½œ(arbitrary operation) èµ‹å€¼æˆ–è€…ä»å…¶ä¸­è·å–æ•°æ®

çº¿æ€§é¢„æµ‹demo&quot;&quot;&quot;Please note, this code is only for python 3+. If you are using python 2+, please modify the code accordingly.&quot;&quot;&quot;import osos.environ[&#x27;TF_CPP_MIN_LOG_LEVEL&#x27;]=&#x27;2&#x27;import tensorflow as tfimport numpy as np# create datax_data = np.random.rand(100).astype(np.float32)y_data = x_data*0.1 + 0.3### create tensorflow structure start ###Weights = tf.Variable(tf.random_uniform([1], -1.0, 1.0))biases = tf.Variable(tf.zeros([1]))y = Weights*x_data + biasesloss = tf.reduce_mean(tf.square(y-y_data))optimizer = tf.train.GradientDescentOptimizer(0.5)train = optimizer.minimize(loss)print(tf.__version__)if int((tf.__version__).split(&#x27;.&#x27;)[1]) &lt; 12 and int((tf.__version__).split(&#x27;.&#x27;)[0]) &lt; 1:    init = tf.initialize_all_variables()else:    init = tf.global_variables_initializer()### create tensorflow structure end ###sess = tf.Session()sess.run(init)for step in range(201):    sess.run(train)    if step % 20 == 0:        print(step, sess.run(Weights), sess.run(biases))

x_dataå’Œy_dataæ˜¯çœŸå®æ•°æ®ï¼Œyæ˜¯é¢„æµ‹å‡ºçš„æ•°æ®ï¼Œlossä»£è¡¨é¢„æµ‹è¯¯å·®ï¼Œoptimizerä»£è¡¨è°ƒä¼˜æ–¹æ³•ï¼Œtrainä»£è¡¨æœ€å°åŒ–è¯¯å·®ï¼Œsess.run(train)ä»£è¡¨æ‰§è¡Œä¸€æ¬¡è°ƒä¼˜ã€‚
Sessionimport tensorflow as tfm1 = tf.constant([[2, 2]])m2 = tf.constant([[3],                  [3]])dot_operation = tf.matmul(m1, m2)print(dot_operation)  # wrong! no result# method1 use sessionsess = tf.Session()result = sess.run(dot_operation)print(result)sess.close()# method2 use sessionwith tf.Session() as sess:    result_ = sess.run(dot_operation)    print(result_)

ä»ä¸Šé¢ä»£ç çš„æ‰§è¡Œç»“æœå¯ä»¥çœ‹å‡ºï¼Œä»¥tfå¼€å¤´çš„é‚£äº›è¯­å¥ï¼Œå¹¶æ²¡æœ‰ç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨sess.run()çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œã€‚
Variableimport tensorflow as tfvar = tf.Variable(0)    # our first variable in the &quot;global_variable&quot; setadd_operation = tf.add(var, 1)update_operation = tf.assign(var, add_operation)init = tf.global_variables_initializer()with tf.Session() as sess:    # once define variables, you have to initialize them by doing this    sess.run(init)    for _ in range(3):        sess.run(update_operation)        print(sess.run(var))

å¦‚æœå®šä¹‰äº†å˜é‡ï¼Œä¸€å®šè¦global_variables_initializerå¹¶ä¸”runã€‚
placeholderimport tensorflow as tfx1 = tf.placeholder(dtype=tf.float32, shape=None)y1 = tf.placeholder(dtype=tf.float32, shape=None)z1 = x1 + y1x2 = tf.placeholder(dtype=tf.float32, shape=[2, 1])y2 = tf.placeholder(dtype=tf.float32, shape=[1, 2])z2 = tf.matmul(x2, y2)with tf.Session() as sess:    # when only one operation to run    z1_value = sess.run(z1, feed_dict=&#123;x1: 1, y1: 2&#125;)    # when run multiple operations    z1_value, z2_value = sess.run(        [z1, z2],       # run them together        feed_dict=&#123;            x1: 1, y1: 2,            x2: [[2], [2]], y2: [[3, 3]]        &#125;)    print(z1_value)    print(z2_value)

åœ¨è®¡ç®—æ—¶ï¼Œç»™x1èµ‹å€¼1ï¼Œç»™y1èµ‹å€¼2ã€‚
æ¿€åŠ±å‡½æ•°æ¿€åŠ±å‡½æ•°æ˜¯ç”¨æ¥æ¿€æ´»ç¥ç»å…ƒçš„å‡½æ•°ã€‚å½“ä½ çš„ç¥ç»ç½‘ç»œå±‚åªæœ‰ä¸¤ä¸‰å±‚ï¼Œä¸æ˜¯å¾ˆå¤šçš„æ—¶å€™ï¼Œ å¯¹äºéšè—å±‚ï¼Œä½¿ç”¨ä»»æ„çš„æ¿€åŠ±å‡½æ•°ï¼›åœ¨å¤šå±‚ç¥ç»ç½‘ç»œä¸­ï¼Œåˆ™è¦æœ‰æ‰€é€‰æ‹©ã€‚åœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­ï¼Œä¸€èˆ¬ä½¿ç”¨reluï¼›åœ¨å¾ªç¯ç¥ç»ç½‘ç»œä¸­ï¼Œä¸€èˆ¬ä½¿ç”¨reluæˆ–è€…tanhã€‚
ç¥ç»ç½‘ç»œæ·»åŠ å±‚import tensorflow as tfdef add_layer(inputs, in_size, out_size, activation_function=None):    # add one more layer and return the output of this layer    Weights = tf.Variable(tf.random_normal([in_size, out_size]))    biases = tf.Variable(tf.zeros([1, out_size]) + 0.1)    Wx_plus_b = tf.matmul(inputs, Weights) + biases    if activation_function is None:        outputs = Wx_plus_b    else:        outputs = activation_function(Wx_plus_b)    return outputs

å»ºé€ ç¥ç»ç½‘ç»œimport tensorflow as tfimport numpy as npdef add_layer(inputs, in_size, out_size, activation_function=None):    # add one more layer and return the output of this layer    Weights = tf.Variable(tf.random_normal([in_size, out_size]))    biases = tf.Variable(tf.zeros([1, out_size]) + 0.1)    Wx_plus_b = tf.matmul(inputs, Weights) + biases    if activation_function is None:        outputs = Wx_plus_b    else:        outputs = activation_function(Wx_plus_b)    return outputs# Make up some real datax_data = np.linspace(-1,1,300)[:, np.newaxis]noise = np.random.normal(0, 0.05, x_data.shape)y_data = np.square(x_data) - 0.5 + noise# define placeholder for inputs to networkxs = tf.placeholder(tf.float32, [None, 1])ys = tf.placeholder(tf.float32, [None, 1])# add hidden layerl1 = add_layer(xs, 1, 10, activation_function=tf.nn.relu)# add output layerprediction = add_layer(l1, 10, 1, activation_function=None)# the error between prediction and real dataloss = tf.reduce_mean(tf.reduce_sum(tf.square(ys - prediction),                     reduction_indices=[1]))train_step = tf.train.GradientDescentOptimizer(0.1).minimize(loss)# important stepinit = tf.global_variables_initializer()sess = tf.Session()sess.run(init)for i in range(1000):    # training    sess.run(train_step, feed_dict=&#123;xs: x_data, ys: y_data&#125;)    if i % 50 == 0:        # to see the step improvement        print(sess.run(loss, feed_dict=&#123;xs: x_data, ys: y_data&#125;))

ç»“æœå¯è§†åŒ–import tensorflow as tfimport numpy as npimport matplotlib.pyplot as pltdef add_layer(inputs, in_size, out_size, activation_function=None):    # add one more layer and return the output of this layer    Weights = tf.Variable(tf.random_normal([in_size, out_size]))    biases = tf.Variable(tf.zeros([1, out_size]) + 0.1)    Wx_plus_b = tf.matmul(inputs, Weights) + biases    if activation_function is None:        outputs = Wx_plus_b    else:        outputs = activation_function(Wx_plus_b)    return outputs# Make up some real datax_data = np.linspace(-1,1,300)[:, np.newaxis]noise = np.random.normal(0, 0.05, x_data.shape)y_data = np.square(x_data) - 0.5 + noise# define placeholder for inputs to networkxs = tf.placeholder(tf.float32, [None, 1])ys = tf.placeholder(tf.float32, [None, 1])# add hidden layerl1 = add_layer(xs, 1, 10, activation_function=tf.nn.relu)# add output layerprediction = add_layer(l1, 10, 1, activation_function=None)# the error between prediction and real dataloss = tf.reduce_mean(tf.reduce_sum(tf.square(ys - prediction),                     reduction_indices=[1]))train_step = tf.train.GradientDescentOptimizer(0.1).minimize(loss)# important stepinit = tf.global_variables_initializer()sess = tf.Session()sess.run(init)fig = plt.figure()ax = fig.add_subplot(1,1,1)ax.scatter(x_data, y_data)plt.ion()plt.show()# plt.show(block=False)for i in range(1000):    # training    sess.run(train_step, feed_dict=&#123;xs: x_data, ys: y_data&#125;)    if i % 50 == 0:        # to see the step improvement        # print(sess.run(loss, feed_dict=&#123;xs: x_data, ys: y_data&#125;))        try:            ax.lines.remove(lines[0])        except Exception:            pass        prediction_value = sess.run(prediction,feed_dict=&#123;xs: x_data&#125;)        lines = ax.plot(x_data, prediction_value, &#x27;r-&#x27;,lw=5)               plt.pause(0.1)

åŠ é€Ÿç¥ç»ç½‘ç»œè®­ç»ƒåŠ é€Ÿç¥ç»ç½‘ç»œè®­ç»ƒçš„æ–¹æ³•:

Stochastic Gradient Descent (SGD)
Momentum
AdaGrad
RMSProp
Adam

å…·ä½“å‚è€ƒã€ŠåŠ é€Ÿç¥ç»ç½‘ç»œè®­ç»ƒ (Speed Up Training)ã€‹
optimizerç›¸å…³èµ„æ–™ï¼š

TensorFlowå¯ç”¨çš„optimizer é“¾æ¥
å„ç§Optimizer çš„å¯¹æ¯” é“¾æ¥

ä¸€èˆ¬ä½¿ç”¨GradientDescentOptimizerå°±å¤Ÿäº†ï¼Œå¾€åå­¦ä¹ çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨MomentumOptimizerã€AdamOptimizerã€RMSPropOptimizerã€‚
æºç åˆ†äº«https://github.com/voidking/Tensorflow-Tutorial.git
ä¹¦ç­¾TensorFlowå®˜ç½‘
Tensorflowæ¸¸ä¹åœº
è«çƒ¦Tensorflowæ•™ç¨‹ç³»åˆ—
TensorFlow å®˜æ–¹æ–‡æ¡£ä¸­æ–‡ç‰ˆ
TensorFlowä¸­æ–‡ç¤¾åŒº
TensorFlowå…¥é—¨
youtube CS 20SI: Tensorflow for Deep Learning Research
Tensorflow çš„å¤„ç†ç»“æ„åŠåŸºæœ¬ä½¿ç”¨
2016å¹´ä¸å¯é”™è¿‡çš„21ä¸ªæ·±åº¦å­¦ä¹ è§†é¢‘ã€æ•™ç¨‹å’Œè¯¾ç¨‹
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>tensorflow</tag>
      </tags>
  </entry>
  <entry>
    <title>Numpyå’ŒMatplotlib</title>
    <url>/dev-numpy-matplotlib/</url>
    <content><![CDATA[å‰è¨€åœ¨è¿›è¡Œæœºå™¨å­¦ä¹ æ—¶ï¼Œç»å¸¸ç”¨åˆ°ä¸¤ä¸ªåº“ï¼Œnumpyå’Œmatplotlibã€‚
numpy(Numerical Python extensions)æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„PythonåŒ…ï¼Œç”¨äºç§‘å­¦è®¡ç®—ã€‚è¿™ä¸ªåº“çš„å‰èº«æ˜¯1995å¹´å°±å¼€å§‹å¼€å‘çš„ä¸€ä¸ªç”¨äºæ•°ç»„è¿ç®—çš„åº“ã€‚ç»è¿‡äº†é•¿æ—¶é—´çš„å‘å±•ï¼ŒåŸºæœ¬ä¸Šæˆäº†ç»å¤§éƒ¨åˆ†Pythonç§‘å­¦è®¡ç®—çš„åŸºç¡€åŒ…ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬æ‰€æœ‰æä¾›Pythonæ¥å£çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ã€‚
Matplotlibæ˜¯Pythonä¸­æœ€å¸¸ç”¨çš„å¯è§†åŒ–å·¥å…·ä¹‹ä¸€ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿åœ°åˆ›å»ºæµ·é‡ç±»å‹åœ°2Då›¾è¡¨å’Œä¸€äº›åŸºæœ¬çš„3Då›¾è¡¨ã€‚Matplotlibæœ€æ—©æ˜¯ä¸ºäº†å¯è§†åŒ–ç™«ç—«ç—…äººçš„è„‘çš®å±‚ç”µå›¾ç›¸å…³çš„ä¿¡å·è€Œç ”å‘ï¼Œå› ä¸ºåœ¨å‡½æ•°çš„è®¾è®¡ä¸Šå‚è€ƒäº†MATLABï¼Œæ‰€ä»¥å«åšMatplotlibã€‚


å‡†å¤‡pip install numpypip install matplotlib

numpyåŸºæœ¬ç±»å‹ï¼ˆarrayï¼‰import numpy as npa = [1, 2, 5, 3, 4]b = np.array(a)print(&#x27;a=&#x27;,a)print(&#x27;b=&#x27;,b)print(&#x27;type(a):&#x27;,type(a))print(&#x27;type(b)&#x27;,type(b))  print(&#x27;b.dtype&#x27;,b.dtype)b2 = b.astype(np.float32)print(&#x27;b2.dtype&#x27;,b2.dtype)                   print(&#x27;b.shape:&#x27;, b.shape)                    print(&#x27;b.argmax():&#x27;,b.argmax())                  print(&#x27;b.max():&#x27;,b.max())                     print(&#x27;b.mean():&#x27;,b.mean())            c = [[1, 2], [3, 4]]    d = np.array(c)print(&#x27;c=&#x27;,c)print(&#x27;d=&#x27;,d)print(&#x27;d.shape:&#x27;,d.shape) print(&#x27;d.size:&#x27;,d.size)print(&#x27;d.max(axis=0):&#x27;,d.max(axis=0)) # æ‰¾åˆ—æœ€å¤§å€¼print(&#x27;d.max(axis=1):&#x27;,d.max(axis=1)) # æ‰¾è¡Œæœ€å¤§å€¼print(&#x27;d.mean(axis=0):&#x27;,d.mean(axis=0))  # æ±‚åˆ—å¹³å‡æ•°      print(&#x27;d.flatten():&#x27;,d.flatten()) # å±•å¼€ä¸ºä¸€ç»´æ•°ç»„print(&#x27;np.ravel(c)&#x27;,np.ravel(c)) # å±•å¼€ä¸ºä¸€ç»´æ•°ç»„# 3x3çš„æµ®ç‚¹å‹2ç»´æ•°ç»„ï¼Œå¹¶ä¸”åˆå§‹åŒ–æ‰€æœ‰å…ƒç´ å€¼ä¸º1e = np.ones((3, 3), dtype=np.float32)print(&#x27;e=&#x27;,e)# åˆ›å»ºä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼Œå…ƒç´ å€¼æ˜¯æŠŠ3é‡å¤4æ¬¡ï¼Œarray([3, 3, 3, 3])f = np.repeat(3, 4)print(&#x27;f=&#x27;,f)# 2x2x3çš„æ— ç¬¦å·8ä½æ•´å‹3ç»´æ•°ç»„ï¼Œå¹¶ä¸”åˆå§‹åŒ–æ‰€æœ‰å…ƒç´ å€¼ä¸º0g = np.zeros((2, 2, 3), dtype=np.uint8)print(&#x27;g=&#x27;,g)print(&#x27;g.shape&#x27;,g.shape)h = g.astype(np.float)  # ç”¨å¦ä¸€ç§ç±»å‹è¡¨ç¤ºprint(&#x27;h=&#x27;,h)l = np.arange(10)       # ç±»ä¼¼rangeï¼Œarray([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])print(&#x27;l=&#x27;,l)m = np.linspace(0, 6, 5)# ç­‰å·®æ•°åˆ—ï¼Œ0åˆ°6ä¹‹é—´5ä¸ªå–å€¼ï¼Œarray([ 0., 1.5, 3., 4.5, 6.])print(&#x27;m&#x27;,m)p = np.array(    [[1, 2, 3, 4],     [5, 6, 7, 8]])np.save(&#x27;p.npy&#x27;, p)     # ä¿å­˜åˆ°æ–‡ä»¶q = np.load(&#x27;p.npy&#x27;)    # ä»æ–‡ä»¶è¯»å–

arrayç›¸å…³æ“ä½œimport numpy as np&#x27;&#x27;&#x27;array([[[ 0,  1,  2,  3],        [ 4,  5,  6,  7],        [ 8,  9, 10, 11]],       [[12, 13, 14, 15],        [16, 17, 18, 19],        [20, 21, 22, 23]]])&#x27;&#x27;&#x27;a = np.arange(24).reshape((2, 3, 4))print(&#x27;a=&#x27;,a)b = a[1][1][1]print(&#x27;a[1][1][1]=&#x27;,b)&#x27;&#x27;&#x27;array([[ 8,  9, 10, 11],       [20, 21, 22, 23]])&#x27;&#x27;&#x27;c = a[:, 2, :]print(&#x27;a[:, 2, :]=&#x27;,c)&#x27;&#x27;&#x27; ç”¨:è¡¨ç¤ºå½“å‰ç»´åº¦ä¸Šæ‰€æœ‰ä¸‹æ ‡array([[ 1,  5,  9],       [13, 17, 21]])&#x27;&#x27;&#x27;d = a[:, :, 1]print(&#x27;a[:, :, 1]=&#x27;,d)&#x27;&#x27;&#x27; ç”¨...è¡¨ç¤ºæ²¡æœ‰æ˜ç¡®æŒ‡å‡ºçš„ç»´åº¦array([[ 1,  5,  9],       [13, 17, 21]])&#x27;&#x27;&#x27;e = a[..., 1]print(&#x27;a[..., 1]=&#x27;,e)&#x27;&#x27;&#x27;array([[[ 5,  6],        [ 9, 10]],       [[17, 18],        [21, 22]]])&#x27;&#x27;&#x27;f = a[:, 1:, 1:-1]print(&#x27;a[:, 1:, 1:-1]=&#x27;,f)&#x27;&#x27;&#x27;å¹³å‡åˆ†æˆ3ä»½[array([0, 1, 2]), array([3, 4, 5]), array([6, 7, 8])]&#x27;&#x27;&#x27;g = np.split(np.arange(9), 3)print(&#x27;g=&#x27;,g)&#x27;&#x27;&#x27;æŒ‰ç…§ä¸‹æ ‡ä½ç½®è¿›è¡Œåˆ’åˆ†[array([0, 1]), array([2, 3, 4, 5]), array([6, 7, 8])]&#x27;&#x27;&#x27;h = np.split(np.arange(9), [2, -3])print(&#x27;h=&#x27;,h)l_0 = np.arange(6).reshape((2, 3))l_1 = np.arange(6, 12).reshape(2, 3)print(&#x27;l_0=&#x27;,l_0)print(&#x27;l_1=&#x27;,l_1)&#x27;&#x27;&#x27;vstackæ˜¯æŒ‡æ²¿ç€çºµè½´æ‹¼æ¥ä¸¤ä¸ªarrayï¼Œverticalhstackæ˜¯æŒ‡æ²¿ç€æ¨ªè½´æ‹¼æ¥ä¸¤ä¸ªarrayï¼Œhorizontalæ›´å¹¿ä¹‰çš„æ‹¼æ¥ç”¨concatenateå®ç°ï¼Œhorizontalåçš„ä¸¤å¥ä¾æ¬¡ç­‰æ•ˆäºvstackå’Œhstackstackä¸æ˜¯æ‹¼æ¥è€Œæ˜¯åœ¨è¾“å…¥arrayçš„åŸºç¡€ä¸Šå¢åŠ ä¸€ä¸ªæ–°çš„ç»´åº¦&#x27;&#x27;&#x27;m = np.vstack((l_0, l_1))p = np.hstack((l_0, l_1))q = np.concatenate((l_0, l_1))r = np.concatenate((l_0, l_1), axis=-1)s = np.stack((l_0, l_1))print(&#x27;np.vstack((l_0, l_1))=&#x27;,m)print(&#x27;np.hstack((l_0, l_1))=&#x27;,p)print(&#x27;np.concatenate((l_0, l_1))=&#x27;,q)print(&#x27;np.concatenate((l_0, l_1), axis=-1) = &#x27;,r)print(&#x27;np.stack((l_0, l_1)) = &#x27;,s)&#x27;&#x27;&#x27;æŒ‰æŒ‡å®šè½´è¿›è¡Œè½¬ç½®array([[[ 0,  3],        [ 6,  9]],       [[ 1,  4],        [ 7, 10]],       [[ 2,  5],        [ 8, 11]]])&#x27;&#x27;&#x27;t = s.transpose((2, 0, 1))print(&#x27;s.transpose((2, 0, 1)) = &#x27;,t)&#x27;&#x27;&#x27;é»˜è®¤è½¬ç½®å°†ç»´åº¦å€’åºï¼Œå¯¹äº2ç»´å°±æ˜¯æ¨ªçºµè½´äº’æ¢array([[ 0,  4,  8],       [ 1,  5,  9],       [ 2,  6, 10],       [ 3,  7, 11]])&#x27;&#x27;&#x27;u = a[0].transpose()    # æˆ–è€…u=a[0].Tä¹Ÿæ˜¯è·å¾—è½¬ç½®print(&#x27;u = a[0].transpose() = &#x27;,u)&#x27;&#x27;&#x27;é€†æ—¶é’ˆæ—‹è½¬90åº¦ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ—‹è½¬æ¬¡æ•°array([[ 3,  2,  1,  0],       [ 7,  6,  5,  4],       [11, 10,  9,  8]])&#x27;&#x27;&#x27;v = np.rot90(u, 3)print(&#x27;np.rot90(u, 3) = &#x27;,v)&#x27;&#x27;&#x27;æ²¿çºµè½´å·¦å³ç¿»è½¬array([[ 8,  4,  0],       [ 9,  5,  1],       [10,  6,  2],       [11,  7,  3]])&#x27;&#x27;&#x27;w = np.fliplr(u)print(&#x27;np.fliplr(u) = &#x27;,w)&#x27;&#x27;&#x27;æ²¿æ°´å¹³è½´ä¸Šä¸‹ç¿»è½¬array([[ 3,  7, 11],       [ 2,  6, 10],       [ 1,  5,  9],       [ 0,  4,  8]])&#x27;&#x27;&#x27;x = np.flipud(u)print(&#x27;np.flipud(u) = &#x27;,x)&#x27;&#x27;&#x27;æŒ‰ç…§ä¸€ç»´é¡ºåºæ»šåŠ¨ä½ç§»array([[11,  0,  4],       [ 8,  1,  5],       [ 9,  2,  6],       [10,  3,  7]])&#x27;&#x27;&#x27;y = np.roll(u, 1)print(&#x27;np.roll(u, 1)&#x27;, y)&#x27;&#x27;&#x27;æŒ‰ç…§æŒ‡å®šè½´æ»šåŠ¨ä½ç§»array([[ 8,  0,  4],       [ 9,  1,  5],       [10,  2,  6],       [11,  3,  7]])&#x27;&#x27;&#x27;z = np.roll(u, 1, axis=1)print(&#x27;np.roll(u, 1, axis=1)&#x27;,z)

æ•°å­¦è¿ç®—import numpy as np# ç»å¯¹å€¼ï¼Œ1a = np.abs(-1)# sinå‡½æ•°ï¼Œ1.0b = np.sin(np.pi/2)# tanhé€†å‡½æ•°ï¼Œ0.50000107157840523c = np.arctanh(0.462118)# eä¸ºåº•çš„æŒ‡æ•°å‡½æ•°ï¼Œ20.085536923187668d = np.exp(3)# 2çš„3æ¬¡æ–¹ï¼Œ8f = np.power(2, 3)# ç‚¹ç§¯ï¼Œ1*3+2*4=11g = np.dot([1, 2], [3, 4])# å¼€æ–¹ï¼Œ5h = np.sqrt(25)# æ±‚å’Œï¼Œ10l = np.sum([1, 2, 3, 4])# å¹³å‡å€¼ï¼Œ5.5m = np.mean([4, 5, 6, 7])# æ ‡å‡†å·®ï¼Œ0.96824583655185426p = np.std([1, 2, 3, 2, 1, 3, 2, 0])

å¯¹ä½è¿ç®—import numpy as npa = np.array([    [1, 2, 3],    [4, 5, 6]])b = np.array([    [1, 2, 3],    [1, 2, 3]])&#x27;&#x27;&#x27;ç»´åº¦ä¸€æ ·çš„arrayï¼Œå¯¹ä½è®¡ç®—array([[2, 4, 6],       [5, 7, 9]])&#x27;&#x27;&#x27;a + b&#x27;&#x27;&#x27;array([[0, 0, 0],       [3, 3, 3]])&#x27;&#x27;&#x27;a - b&#x27;&#x27;&#x27;array([[ 1,  4,  9],       [ 4, 10, 18]])&#x27;&#x27;&#x27;a * b&#x27;&#x27;&#x27;array([[1, 1, 1],       [4, 2, 2]])&#x27;&#x27;&#x27;a / b&#x27;&#x27;&#x27;array([[ 1,  4,  9],       [16, 25, 36]])&#x27;&#x27;&#x27;a ** 2&#x27;&#x27;&#x27;array([[  1,   4,  27],       [  4,  25, 216]])&#x27;&#x27;&#x27;a ** bc = np.array([    [1, 2, 3],    [4, 5, 6],    [7, 8, 9],    [10, 11, 12]])d = np.array([2, 2, 2])&#x27;&#x27;&#x27;å¹¿æ’­æœºåˆ¶è®©è®¡ç®—çš„è¡¨è¾¾å¼ä¿æŒç®€æ´då’Œcçš„æ¯ä¸€è¡Œåˆ†åˆ«è¿›è¡Œè¿ç®—array([[ 3,  4,  5],       [ 6,  7,  8],       [ 9, 10, 11],       [12, 13, 14]])&#x27;&#x27;&#x27;c + d&#x27;&#x27;&#x27;array([[ 2,  4,  6],       [ 8, 10, 12],       [14, 16, 18],       [20, 22, 24]])&#x27;&#x27;&#x27;c * d&#x27;&#x27;&#x27;1å’Œcçš„æ¯ä¸ªå…ƒç´ åˆ†åˆ«è¿›è¡Œè¿ç®—array([[ 0,  1,  2],       [ 3,  4,  5],       [ 6,  7,  8],       [ 9, 10, 11]])&#x27;&#x27;&#x27;c - 1

çº¿æ€§ä»£æ•°æ¨¡å—ï¼ˆlinalgï¼‰åœ¨æ·±åº¦å­¦ä¹ ç›¸å…³çš„æ•°æ®å¤„ç†å’Œè¿ç®—ä¸­ï¼Œçº¿æ€§ä»£æ•°æ¨¡å—ï¼ˆlinalgï¼‰æ˜¯æœ€å¸¸ç”¨çš„ä¹‹ä¸€ã€‚ç»“åˆnumpyæä¾›çš„åŸºæœ¬å‡½æ•°ï¼Œå¯ä»¥å¯¹å‘é‡ï¼ŒçŸ©é˜µï¼Œæˆ–æ˜¯è¯´å¤šç»´å¼ é‡è¿›è¡Œä¸€äº›åŸºæœ¬çš„è¿ç®—ã€‚
import numpy as npa = np.array([3, 4])print(&#x27;a=&#x27;,a)# æ±‚èŒƒæ•°ï¼Œé»˜è®¤äºŒèŒƒæ•°ï¼Œå¹³æ–¹å’Œå¼€å¹³æ–¹print(&#x27;np.linalg.norm(a) = &#x27;,np.linalg.norm(a))# æ±‚èŒƒæ•°ï¼Œä¸€èŒƒæ•°ï¼Œç»å¯¹å€¼æ±‚å’Œprint(&#x27;np.linalg.norm(a,ord=1) = &#x27;,np.linalg.norm(a,ord=1))# æ±‚èŒƒæ•°ï¼Œæ— ç©·èŒƒæ•°ï¼Œç»å¯¹å€¼ä¸­çš„æœ€å¤§è€…print(&#x27;np.linalg.norm(a,ord=np.inf) = &#x27;,np.linalg.norm(a,ord=np.inf))b = np.array([    [1, 2, 3],    [4, 5, 6],    [7, 8, 9]])c = np.array([1, 0, 1])# çŸ©é˜µå’Œå‘é‡ä¹‹é—´çš„ä¹˜æ³•np.dot(b, c)                    # array([ 4, 10, 16])np.dot(c, b.T)                  # array([ 4, 10, 16])np.trace(b)                     # æ±‚çŸ©é˜µçš„è¿¹ï¼Œ15np.linalg.det(b)                # æ±‚çŸ©é˜µçš„è¡Œåˆ—å¼å€¼ï¼Œ0np.linalg.matrix_rank(b)    # æ±‚çŸ©é˜µçš„ç§©ï¼Œ2ï¼Œä¸æ»¡ç§©ï¼Œå› ä¸ºè¡Œä¸è¡Œä¹‹é—´ç­‰å·®d = np.array([    [2, 1],    [1, 2]])&#x27;&#x27;&#x27;å¯¹æ­£å®šçŸ©é˜µæ±‚æœ¬å¾å€¼å’Œæœ¬å¾å‘é‡æœ¬å¾å€¼ä¸ºuï¼Œarray([ 3.,  1.])æœ¬å¾å‘é‡æ„æˆçš„äºŒç»´arrayä¸ºvï¼Œarray([[ 0.70710678, -0.70710678],       [ 0.70710678,  0.70710678]])æ˜¯æ²¿ç€45Â°æ–¹å‘eig()æ˜¯ä¸€èˆ¬æƒ…å†µçš„æœ¬å¾å€¼åˆ†è§£ï¼Œå¯¹äºæ›´å¸¸è§çš„å¯¹ç§°å®æ•°çŸ©é˜µï¼Œeigh()æ›´å¿«ä¸”æ›´ç¨³å®šï¼Œä¸è¿‡è¾“å‡ºçš„å€¼çš„é¡ºåºå’Œeig()æ˜¯ç›¸åçš„&#x27;&#x27;&#x27;u, v = np.linalg.eig(d)# Choleskyåˆ†è§£å¹¶é‡å»ºl = np.linalg.cholesky(d)&#x27;&#x27;&#x27;array([[ 2.,  1.],       [ 1.,  2.]])&#x27;&#x27;&#x27;np.dot(l, l.T)e = np.array([    [1, 2],    [3, 4]])# å¯¹ä¸é•‡å®šçŸ©é˜µï¼Œè¿›è¡ŒSVDåˆ†è§£å¹¶é‡å»ºU, s, V = np.linalg.svd(e)S = np.array([    [s[0], 0],    [0, s[1]]])&#x27;&#x27;&#x27;array([[ 1.,  2.],       [ 3.,  4.]])&#x27;&#x27;&#x27;np.dot(U, np.dot(S, V))

éšæœºæ¨¡å—ï¼ˆrandomï¼‰éšæœºæ¨¡å—åŒ…å«äº†éšæœºæ•°äº§ç”Ÿå’Œç»Ÿè®¡åˆ†å¸ƒç›¸å…³çš„åŸºæœ¬å‡½æ•°ï¼ŒPythonæœ¬èº«ä¹Ÿæœ‰éšæœºæ¨¡å—randomï¼Œä¸è¿‡åŠŸèƒ½æ›´ä¸°å¯Œã€‚
import numpy as npimport numpy.random as random# è®¾ç½®éšæœºæ•°ç§å­ï¼Œéšæœºæ•°ç¡®å®šrandom.seed(42)print(&#x27;Random number with seed 42: &#x27;, random.random())# äº§ç”Ÿä¸€ä¸ª1x3ï¼Œ[0,1)ä¹‹é—´çš„æµ®ç‚¹å‹éšæœºæ•°# array([[ 0.37454012,  0.95071431,  0.73199394]])# åé¢çš„ä¾‹å­å°±ä¸åœ¨æ³¨é‡Šä¸­ç»™å‡ºå…·ä½“ç»“æœäº†print(&#x27;random.rand(1, 3) = &#x27;,random.rand(1, 3))# äº§ç”Ÿä¸€ä¸ª[0,1)ä¹‹é—´çš„æµ®ç‚¹å‹éšæœºæ•°print(&#x27;Random number with no seed: &#x27;, random.random())# ä¸‹è¾¹4ä¸ªæ²¡æœ‰åŒºåˆ«ï¼Œéƒ½æ˜¯æŒ‰ç…§æŒ‡å®šå¤§å°äº§ç”Ÿ[0,1)ä¹‹é—´çš„æµ®ç‚¹å‹éšæœºæ•°arrayï¼Œä¸Pythonicâ€¦print(&#x27;random.random((3, 3))=&#x27;,random.random((3, 3)))print(&#x27;random.sample((3, 3))=&#x27;,random.sample((3, 3)))print(&#x27;random.random_sample((3, 3))=&#x27;,random.random_sample((3, 3)))print(&#x27;random.ranf((3, 3))=&#x27;,random.ranf((3, 3)))# äº§ç”Ÿ10ä¸ª[1,6)ä¹‹é—´çš„æµ®ç‚¹å‹éšæœºæ•°5*random.random(10) + 1random.uniform(1, 6, 10)# äº§ç”Ÿ10ä¸ª[1,6)ä¹‹é—´çš„æ•´å‹éšæœºæ•°random.randint(1, 6, 10)# äº§ç”Ÿ2x5çš„æ ‡å‡†æ­£æ€åˆ†å¸ƒæ ·æœ¬result = random.normal(size=(5, 2))print(&#x27;random.normal(size=(5, 2))=&#x27;, result)# äº§ç”Ÿ5ä¸ªï¼Œn=5ï¼Œp=0.5çš„äºŒé¡¹åˆ†å¸ƒæ ·æœ¬random.binomial(n=5, p=0.5, size=5)a = np.arange(10)# ä»aä¸­æœ‰å›æ”¾çš„éšæœºé‡‡æ ·7ä¸ªrandom.choice(a, 7)# ä»aä¸­æ— å›æ”¾çš„éšæœºé‡‡æ ·7ä¸ªrandom.choice(a, 7, replace=False)# å¯¹aè¿›è¡Œä¹±åºå¹¶è¿”å›ä¸€ä¸ªæ–°çš„arrayb = random.permutation(a)# å¯¹aè¿›è¡Œin-placeä¹±åºrandom.shuffle(a)# ç”Ÿæˆä¸€ä¸ªé•¿åº¦ä¸º9çš„éšæœºbytesåºåˆ—å¹¶ä½œä¸ºstrè¿”å›# &#x27;\x96\x9d\xd1?\xe6\x18\xbb\x9a\xec&#x27;random.bytes(9)

Matplotlib2Då›¾è¡¨Matplotlibä¸­æœ€åŸºç¡€çš„æ¨¡å—æ˜¯pyplotã€‚å…ˆä»æœ€ç®€å•çš„ç‚¹å›¾å’Œçº¿å›¾å¼€å§‹ï¼Œæ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ç»„æ•°æ®ï¼Œè¿˜æœ‰ä¸€ä¸ªæ‹Ÿåˆæ¨¡å‹ï¼Œé€šè¿‡ä¸‹é¢çš„ä»£ç å›¾æ¥å¯è§†åŒ–ï¼š
import numpy as npimport matplotlib as mplimport matplotlib.pyplot as plt# é€šè¿‡rcParamsè®¾ç½®å…¨å±€æ¨ªçºµè½´å­—ä½“å¤§å°mpl.rcParams[&#x27;xtick.labelsize&#x27;] = 24mpl.rcParams[&#x27;ytick.labelsize&#x27;] = 24np.random.seed(42)# xè½´çš„é‡‡æ ·ç‚¹x = np.linspace(0, 5, 100)# é€šè¿‡ä¸‹é¢æ›²çº¿åŠ ä¸Šå™ªå£°ç”Ÿæˆæ•°æ®ï¼Œæ‰€ä»¥æ‹Ÿåˆæ¨¡å‹å°±ç”¨yäº†â€¦â€¦y = 2*np.sin(x) + 0.3*x**2y_data = y + np.random.normal(scale=0.3, size=100)# figure()æŒ‡å®šå›¾è¡¨åç§°plt.figure(&#x27;data&#x27;)# &#x27;.&#x27;æ ‡æ˜ç”»æ•£ç‚¹å›¾ï¼Œæ¯ä¸ªæ•£ç‚¹çš„å½¢çŠ¶æ˜¯ä¸ªåœ†plt.plot(x, y_data, &#x27;.&#x27;)# ç”»æ¨¡å‹çš„å›¾ï¼Œplotå‡½æ•°é»˜è®¤ç”»è¿çº¿å›¾plt.figure(&#x27;model&#x27;)plt.plot(x, y)# ä¸¤ä¸ªå›¾ç”»ä¸€èµ·plt.figure(&#x27;data &amp; model&#x27;)# é€šè¿‡&#x27;k&#x27;æŒ‡å®šçº¿çš„é¢œè‰²ï¼ŒlwæŒ‡å®šçº¿çš„å®½åº¦# ç¬¬ä¸‰ä¸ªå‚æ•°é™¤äº†é¢œè‰²ä¹Ÿå¯ä»¥æŒ‡å®šçº¿å½¢ï¼Œæ¯”å¦‚&#x27;r--&#x27;è¡¨ç¤ºçº¢è‰²è™šçº¿# æ›´å¤šå±æ€§å¯ä»¥å‚è€ƒå®˜ç½‘ï¼šhttp://matplotlib.org/api/pyplot_api.htmlplt.plot(x, y, &#x27;k&#x27;, lw=3)# scatterå¯ä»¥æ›´å®¹æ˜“åœ°ç”Ÿæˆæ•£ç‚¹å›¾plt.scatter(x, y_data)# å°†å½“å‰figureçš„å›¾ä¿å­˜åˆ°æ–‡ä»¶result.pngplt.savefig(&#x27;result.png&#x27;)# ä¸€å®šè¦åŠ ä¸Šè¿™å¥æ‰èƒ½è®©ç”»å¥½çš„å›¾æ˜¾ç¤ºåœ¨å±å¹•ä¸Šplt.show()

å¯¹æ¯”å›¾è¡¨ç‚¹å’Œçº¿å›¾è¡¨åªæ˜¯æœ€åŸºæœ¬çš„ç”¨æ³•ï¼Œæœ‰çš„æ—¶å€™æˆ‘ä»¬è·å–äº†åˆ†ç»„æ•°æ®è¦åšå¯¹æ¯”ï¼ŒæŸ±çŠ¶æˆ–é¥¼çŠ¶ç±»å‹çš„å›¾æˆ–è®¸æ›´åˆé€‚ã€‚
import numpy as npimport matplotlib as mplimport matplotlib.pyplot as pltmpl.rcParams[&#x27;axes.titlesize&#x27;] = 20mpl.rcParams[&#x27;xtick.labelsize&#x27;] = 16mpl.rcParams[&#x27;ytick.labelsize&#x27;] = 16mpl.rcParams[&#x27;axes.labelsize&#x27;] = 16mpl.rcParams[&#x27;xtick.major.size&#x27;] = 0mpl.rcParams[&#x27;ytick.major.size&#x27;] = 0# åŒ…å«äº†ç‹—ï¼ŒçŒ«å’ŒçŒè±¹çš„æœ€é«˜å¥”è·‘é€Ÿåº¦ï¼Œè¿˜æœ‰å¯¹åº”çš„å¯è§†åŒ–é¢œè‰²speed_map = &#123;    &#x27;dog&#x27;: (48, &#x27;#7199cf&#x27;),    &#x27;cat&#x27;: (45, &#x27;#4fc4aa&#x27;),    &#x27;cheetah&#x27;: (120, &#x27;#e1a7a2&#x27;)&#125;# æ•´ä½“å›¾çš„æ ‡é¢˜fig = plt.figure(&#x27;Bar chart &amp; Pie chart&#x27;)# åœ¨æ•´å¼ å›¾ä¸ŠåŠ å…¥ä¸€ä¸ªå­å›¾ï¼Œ121çš„æ„æ€æ˜¯åœ¨ä¸€ä¸ª1è¡Œ2åˆ—çš„å­å›¾ä¸­çš„ç¬¬ä¸€å¼ ax = fig.add_subplot(121)ax.set_title(&#x27;Running speed - bar chart&#x27;)# ç”Ÿæˆxè½´æ¯ä¸ªå…ƒç´ çš„ä½ç½®xticks = np.arange(3)# å®šä¹‰æŸ±çŠ¶å›¾æ¯ä¸ªæŸ±çš„å®½åº¦bar_width = 0.5# åŠ¨ç‰©åç§°animals = speed_map.keys()# å¥”è·‘é€Ÿåº¦speeds = [x[0] for x in speed_map.values()]# å¯¹åº”é¢œè‰²colors = [x[1] for x in speed_map.values()]# ç”»æŸ±çŠ¶å›¾ï¼Œæ¨ªè½´æ˜¯åŠ¨ç‰©æ ‡ç­¾çš„ä½ç½®ï¼Œçºµè½´æ˜¯é€Ÿåº¦ï¼Œå®šä¹‰æŸ±çš„å®½åº¦ï¼ŒåŒæ—¶è®¾ç½®æŸ±çš„è¾¹ç¼˜ä¸ºé€æ˜bars = ax.bar(xticks, speeds, width=bar_width, edgecolor=&#x27;none&#x27;)# è®¾ç½®yè½´çš„æ ‡é¢˜ax.set_ylabel(&#x27;Speed(km/h)&#x27;)# xè½´æ¯ä¸ªæ ‡ç­¾çš„å…·ä½“ä½ç½®ï¼Œè®¾ç½®ä¸ºæ¯ä¸ªæŸ±çš„ä¸­å¤®ax.set_xticks(xticks+bar_width/2)# è®¾ç½®æ¯ä¸ªæ ‡ç­¾çš„åå­—ax.set_xticklabels(animals)# è®¾ç½®xè½´çš„èŒƒå›´ax.set_xlim([bar_width/2-0.5, 3-bar_width/2])# è®¾ç½®yè½´çš„èŒƒå›´ax.set_ylim([0, 125])# ç»™æ¯ä¸ªbaråˆ†é…æŒ‡å®šçš„é¢œè‰²for bar, color in zip(bars, colors):    bar.set_color(color)# åœ¨122ä½ç½®åŠ å…¥æ–°çš„å›¾ax = fig.add_subplot(122)ax.set_title(&#x27;Running speed - pie chart&#x27;)# ç”ŸæˆåŒæ—¶åŒ…å«åç§°å’Œé€Ÿåº¦çš„æ ‡ç­¾labels = [&#x27;&#123;&#125;\n&#123;&#125; km/h&#x27;.format(animal, speed) for animal, speed in zip(animals, speeds)]# ç”»é¥¼çŠ¶å›¾ï¼Œå¹¶æŒ‡å®šæ ‡ç­¾å’Œå¯¹åº”é¢œè‰²ax.pie(speeds, labels=labels, colors=colors)plt.show()

åœ¨Matplotlibä¸­ï¼Œç”»å›¾æ—¶æœ‰ä¸¤ä¸ªå¸¸ç”¨æ¦‚å¿µï¼Œä¸€ä¸ªæ˜¯å¹³æ—¶ç”»å›¾è¹¦å‡ºçš„ä¸€ä¸ªçª—å£ï¼Œè¿™å«ä¸€ä¸ªfigureã€‚Figureç›¸å½“äºä¸€ä¸ªå¤§çš„ç”»å¸ƒï¼Œåœ¨æ¯ä¸ªfigureä¸­ï¼Œåˆå¯ä»¥å­˜åœ¨å¤šä¸ªå­å›¾ï¼Œè¿™ç§å­å›¾å«åšaxesã€‚é¡¾åæ€ä¹‰ï¼Œæœ‰äº†æ¨ªçºµè½´å°±æ˜¯ä¸€å¹…ç®€å•çš„å›¾è¡¨ã€‚åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œå…ˆæŠŠfigureå®šä¹‰æˆäº†ä¸€ä¸ªä¸€è¡Œä¸¤åˆ—çš„å¤§ç”»å¸ƒï¼Œç„¶åé€šè¿‡fig.add_subplot()åŠ å…¥ä¸¤ä¸ªæ–°çš„å­å›¾ã€‚subplotçš„å®šä¹‰æ ¼å¼å¾ˆæœ‰è¶£ï¼Œæ•°å­—çš„å‰ä¸¤ä½åˆ†åˆ«å®šä¹‰è¡Œæ•°å’Œåˆ—æ•°ï¼Œæœ€åä¸€ä½å®šä¹‰æ–°åŠ å…¥å­å›¾çš„æ‰€å¤„é¡ºåºï¼Œå½“ç„¶æƒ³å†™æ˜ç¡®äº›ä¹Ÿæ²¡é—®é¢˜ï¼Œç”¨é€—å·åˆ†å¼€å³å¯ã€‚
3Då›¾è¡¨Matplotlibä¸­ä¹Ÿèƒ½æ”¯æŒä¸€äº›åŸºç¡€çš„3Då›¾è¡¨ï¼Œæ¯”å¦‚æ›²é¢å›¾ï¼Œæ•£ç‚¹å›¾å’ŒæŸ±çŠ¶å›¾ã€‚è¿™äº›3Då›¾è¡¨éœ€è¦ä½¿ç”¨mpl_toolkitsæ¨¡å—ã€‚1ã€è®¿é—® Unofficial Windows Binaries for Python Extension Packagesï¼Œä¸‹è½½ä¸¤ä¸ªæ–‡ä»¶ï¼š

pyproj-1.9.5.1-cp36-cp36m-win_amd64.whl
basemap-1.1.0-cp36-cp36m-win_amd64.whl 

2ã€å‡è®¾ä¸‹è½½åˆ°äº†Dç›˜ä¸‹ï¼Œé‚£ä¹ˆåœ¨Dç›˜ä¸‹æ‰“å¼€å‘½ä»¤è¡Œï¼Œæ‰§è¡Œ
pip install pyproj-1.9.5.1-cp36-cp36m-win_amd64.whlpip install basemap-1.1.0-cp36-cp36m-win_amd64.whl 

psï¼šç›¸å…³pipå‘½ä»¤pip listï¼ŒæŸ¥çœ‹å®‰è£…åˆ—è¡¨pip uninstall package_nameï¼Œåˆ é™¤åŒ…
3ã€ç¤ºä¾‹ä»£ç 
import matplotlib.pyplot as pltimport numpy as np# 3Då›¾æ ‡å¿…é¡»çš„æ¨¡å—ï¼Œproject=&#x27;3d&#x27;çš„å®šä¹‰from mpl_toolkits.mplot3d import Axes3D     np.random.seed(42)n_grids = 51            # x-yå¹³é¢çš„æ ¼ç‚¹æ•° c = n_grids / 2         # ä¸­å¿ƒä½ç½®nf = 2                  # ä½é¢‘æˆåˆ†çš„ä¸ªæ•°# ç”Ÿæˆæ ¼ç‚¹x = np.linspace(0, 1, n_grids)y = np.linspace(0, 1, n_grids)# xå’Œyæ˜¯é•¿åº¦ä¸ºn_gridsçš„array# meshgridä¼šæŠŠxå’Œyç»„åˆæˆn_grids*n_gridsçš„arrayï¼ŒXå’ŒYå¯¹åº”ä½ç½®å°±æ˜¯æ‰€æœ‰æ ¼ç‚¹çš„åæ ‡X, Y = np.meshgrid(x, y)# ç”Ÿæˆä¸€ä¸ª0å€¼çš„å‚…é‡Œå¶è°±spectrum = np.zeros((n_grids, n_grids), dtype=np.complex)# ç”Ÿæˆä¸€æ®µå™ªéŸ³ï¼Œé•¿åº¦æ˜¯(2*nf+1)**2/2noise = [np.complex(x, y) for x, y in np.random.uniform(-1,1,((2*nf+1)**2/2, 2))]# å‚…é‡Œå¶é¢‘è°±çš„æ¯ä¸€é¡¹å’Œå…¶å…±è½­å…³äºä¸­å¿ƒå¯¹ç§°noisy_block = np.concatenate((noise, [0j], np.conjugate(noise[::-1])))# å°†ç”Ÿæˆçš„é¢‘è°±ä½œä¸ºä½é¢‘æˆåˆ†spectrum[c-nf:c+nf+1, c-nf:c+nf+1] = noisy_block.reshape((2*nf+1, 2*nf+1))# è¿›è¡Œåå‚…é‡Œå¶å˜æ¢Z = np.real(np.fft.ifft2(np.fft.ifftshift(spectrum)))# åˆ›å»ºå›¾è¡¨fig = plt.figure(&#x27;3D surface &amp; wire&#x27;)# ç¬¬ä¸€ä¸ªå­å›¾ï¼Œsurfaceå›¾ax = fig.add_subplot(1, 2, 1, projection=&#x27;3d&#x27;)# alphaå®šä¹‰é€æ˜åº¦ï¼Œcmapæ˜¯color map# rstrideå’Œcstrideæ˜¯ä¸¤ä¸ªæ–¹å‘ä¸Šçš„é‡‡æ ·ï¼Œè¶Šå°è¶Šç²¾ç»†ï¼Œlwæ˜¯çº¿å®½ax.plot_surface(X, Y, Z, alpha=0.7, cmap=&#x27;jet&#x27;, rstride=1, cstride=1, lw=0)# ç¬¬äºŒä¸ªå­å›¾ï¼Œç½‘çº¿å›¾ax = fig.add_subplot(1, 2, 2, projection=&#x27;3d&#x27;)ax.plot_wireframe(X, Y, Z, rstride=3, cstride=3, lw=0.5)plt.show()

3Dæ•£ç‚¹å›¾3Dçš„æ•£ç‚¹å›¾ä¹Ÿæ˜¯å¸¸å¸¸ç”¨æ¥æŸ¥çœ‹ç©ºé—´æ ·æœ¬åˆ†å¸ƒçš„ä¸€ç§æ‰‹æ®µï¼Œå¹¶ä¸”ç”»èµ·æ¥æ¯”è¡¨é¢å›¾å’Œç½‘çº¿å›¾æ›´åŠ ç®€å•ã€‚
import matplotlib.pyplot as pltimport numpy as npfrom mpl_toolkits.mplot3d import Axes3Dnp.random.seed(42)# é‡‡æ ·ä¸ªæ•°500n_samples = 500dim = 3# å…ˆç”Ÿæˆä¸€ç»„3ç»´æ­£æ€åˆ†å¸ƒæ•°æ®ï¼Œæ•°æ®æ–¹å‘å®Œå…¨éšæœºsamples = np.random.multivariate_normal(    np.zeros(dim),    np.eye(dim),    n_samples)# é€šè¿‡æŠŠæ¯ä¸ªæ ·æœ¬åˆ°åŸç‚¹è·ç¦»å’Œå‡åŒ€åˆ†å¸ƒå»åˆå¾—åˆ°çƒä½“å†…å‡åŒ€åˆ†å¸ƒçš„æ ·æœ¬for i in range(samples.shape[0]):    r = np.power(np.random.random(), 1.0/3.0)    samples[i] *= r / np.linalg.norm(samples[i])upper_samples = []lower_samples = []for x, y, z in samples:    # 3x+2y-z=1ä½œä¸ºåˆ¤åˆ«å¹³é¢    if z &gt; 3*x + 2*y - 1:        upper_samples.append((x, y, z))    else:        lower_samples.append((x, y, z))fig = plt.figure(&#x27;3D scatter plot&#x27;)ax = fig.add_subplot(111, projection=&#x27;3d&#x27;)uppers = np.array(upper_samples)lowers = np.array(lower_samples)# ç”¨ä¸åŒé¢œè‰²ä¸åŒå½¢çŠ¶çš„å›¾æ ‡è¡¨ç¤ºå¹³é¢ä¸Šä¸‹çš„æ ·æœ¬# åˆ¤åˆ«å¹³é¢ä¸ŠåŠéƒ¨åˆ†ä¸ºçº¢è‰²åœ†ç‚¹ï¼Œä¸‹åŠéƒ¨åˆ†ä¸ºç»¿è‰²ä¸‰è§’ax.scatter(uppers[:, 0], uppers[:, 1], uppers[:, 2], c=&#x27;r&#x27;, marker=&#x27;o&#x27;)ax.scatter(lowers[:, 0], lowers[:, 1], lowers[:, 2], c=&#x27;g&#x27;, marker=&#x27;^&#x27;)plt.show()


å›¾åƒæ˜¾ç¤ºMatplotlibä¹Ÿæ”¯æŒå›¾åƒçš„å­˜å–å’Œæ˜¾ç¤ºï¼Œå¹¶ä¸”å’ŒOpenCVä¸€ç±»çš„æ¥å£æ¯”èµ·æ¥ï¼Œå¯¹äºä¸€èˆ¬çš„äºŒç»´çŸ©é˜µçš„å¯è§†åŒ–è¦æ–¹ä¾¿å¾ˆå¤šã€‚
import matplotlib.pyplot as plt# è¯»å–å›¾ç‰‡å¹¶æ˜¾ç¤ºplt.figure(&#x27;A image&#x27;)result_img = plt.imread(&#x27;result.png&#x27;)plt.imshow(result_img)# Zæ˜¯ä¸Šå°èŠ‚ç”Ÿæˆçš„éšæœºå›¾æ¡ˆï¼Œimg0å°±æ˜¯Zï¼Œimg1æ˜¯Zåšäº†ä¸ªç®€å•çš„å˜æ¢img0 = Zimg1 = 3*Z + 4# cmapæŒ‡å®šä¸º&#x27;gray&#x27;ç”¨æ¥æ˜¾ç¤ºç°åº¦å›¾fig = plt.figure(&#x27;Auto Normalized Visualization&#x27;)ax0 = fig.add_subplot(121)ax0.imshow(img0, cmap=&#x27;gray&#x27;)ax1 = fig.add_subplot(122)ax1.imshow(img1, cmap=&#x27;gray&#x27;)plt.show()

è¿™æ®µä»£ç ä¸­ç¬¬ä¸€ä¸ªä¾‹å­æ˜¯è¯»å–ä¸€ä¸ªæœ¬åœ°å›¾ç‰‡å¹¶æ˜¾ç¤ºï¼Œç¬¬äºŒä¸ªä¾‹å­ä¸­ç›´æ¥æŠŠä¸Šå°èŠ‚ä¸­åå‚…é‡Œå¶å˜æ¢ç”Ÿæˆçš„çŸ©é˜µä½œä¸ºå›¾åƒæ‹¿è¿‡æ¥ï¼ŒåŸå›¾å’Œç»è¿‡ä¹˜ä»¥3å†åŠ 4å˜æ¢çš„å›¾ç›´æ¥ç»˜åˆ¶äº†ä¸¤ä¸ªå½¢çŠ¶ä¸€æ ·ï¼Œä½†æ˜¯å€¼çš„èŒƒå›´ä¸ä¸€æ ·çš„å›¾æ¡ˆã€‚æ˜¾ç¤ºçš„æ—¶å€™imshowä¼šè‡ªåŠ¨è¿›è¡Œå½’ä¸€åŒ–ï¼ŒæŠŠæœ€äº®çš„å€¼æ˜¾ç¤ºä¸ºçº¯ç™½ï¼Œæœ€æš—çš„å€¼æ˜¾ç¤ºä¸ºçº¯é»‘ã€‚è¿™æ˜¯ä¸€ç§éå¸¸æ–¹ä¾¿çš„è®¾å®šï¼Œå°¤å…¶æ˜¯æŸ¥çœ‹æ·±åº¦å­¦ä¹ ä¸­æŸä¸ªå·ç§¯å±‚çš„å“åº”å›¾æ—¶ã€‚
æºç åˆ†äº«https://github.com/voidking/udacity-python/tree/master/numpy
https://github.com/voidking/udacity-python/tree/master/matplotlib
ä¹¦ç­¾ç»™æ·±åº¦å­¦ä¹ å…¥é—¨è€…çš„Pythonå¿«é€Ÿæ•™ç¨‹ - åŸºç¡€ç¯‡ç»™æ·±åº¦å­¦ä¹ å…¥é—¨è€…çš„Pythonå¿«é€Ÿæ•™ç¨‹ - numpyå’ŒMatplotlibç¯‡æœºå™¨å­¦ä¹ ä¸­çš„æ•°å­¦(5)-å¼ºå¤§çš„çŸ©é˜µå¥‡å¼‚å€¼åˆ†è§£(SVD)åŠå…¶åº”ç”¨
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>numpy</tag>
        <tag>matplotlib</tag>
      </tags>
  </entry>
  <entry>
    <title>APPç¬¬ä¸‰æ–¹ç™»å½•QQå’Œå¾®åšé…ç½®</title>
    <url>/dev-app-login-qq-sina/</url>
    <content><![CDATA[éœ€æ±‚ä½¿ç”¨hbuilderä¿®æ”¹ä¸œåŒ—é«˜å¸ˆå°±ä¸šè”ç›Ÿç½‘çš„appï¼Œå®Œæˆäº†qqå’Œå¾®åšç¬¬ä¸‰æ–¹ç™»å½•ï¼ŒçœŸæœºè°ƒè¯•æ­£å¸¸ã€‚ä½†æ˜¯æ‰“åŒ…å‘å¸ƒåï¼Œé—®é¢˜æ¥äº†ã€‚ä½¿ç”¨qqç™»å½•æ—¶ï¼Œä¼šæç¤ºé”™è¯¯â€œè¯¥åº”ç”¨éå®˜æ–¹æ­£ç‰ˆåº”ç”¨ï¼Œè¯·å»åº”ç”¨å®ä¸‹è½½æ­£ç‰ˆåè¿›è¡Œqqç™»é™†ã€‚ï¼ˆé”™è¯¯ç ï¼š100044ï¼‰â€ã€‚ä½¿ç”¨å¾®åšç™»å½•æ—¶ï¼Œä¼šæç¤ºé”™è¯¯â€œ21338:sso package or sign errorâ€ã€‚
å› ä¸ºå°±ä¸šè”ç›Ÿç½‘åœ¨å¼€æ”¾å¹³å°ä¸Šæ˜¯ä¸€ä¸ªwebåº”ç”¨ï¼Œä½†æ˜¯æˆ‘ä»¬çš„appæ‰“åŒ…åæ˜¯ä¸€ä¸ªandroidåº”ç”¨å’Œä¸€ä¸ªiosåº”ç”¨ã€‚æ‰€ä»¥ï¼Œè¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬è¦åœ¨å¼€æ”¾å¹³å°ä¸Šæ·»åŠ androidåº”ç”¨å’Œiosåº”ç”¨ã€‚


androidæ‰“åŒ…ç­¾ååœ¨é…ç½®å¼€æ”¾å¹³å°ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæŠŠandroid appæ‰“åŒ…å‘å¸ƒï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼š
å®‰è£…javaç¯å¢ƒå‚è€ƒã€Šå…¨å¹³å°å®‰è£…JDKã€‹ã€‚
ç”Ÿæˆkeystorekeytool -genkey -alias dsjyw.keystore -keyalg RSA -validity 1000 -keystore dsjyw.keystore
è¯´æ˜ï¼škeytool -genkey -alias åˆ«å.keystore -keyalg RSA -validity æœ‰æ•ˆæœŸé™(å¤©æ•°) -keystore åˆ«å.keystore
dsjyw.storeå‚æ•°è¾“å…¥å¯†é’¥åº“å£ä»¤: voidkingå†æ¬¡è¾“å…¥æ–°å£ä»¤: voidkingæ‚¨çš„åå­—ä¸å§“æ°æ˜¯ä»€ä¹ˆ?  [Unknown]:  VoidKingæ‚¨çš„ç»„ç»‡å•ä½åç§°æ˜¯ä»€ä¹ˆ?  [Unknown]:  Nenuæ‚¨çš„ç»„ç»‡åç§°æ˜¯ä»€ä¹ˆ?  [Unknown]:  Nenuæ‚¨æ‰€åœ¨çš„åŸå¸‚æˆ–åŒºåŸŸåç§°æ˜¯ä»€ä¹ˆ?  [Unknown]:  ChangChunæ‚¨æ‰€åœ¨çš„çœ/å¸‚/è‡ªæ²»åŒºåç§°æ˜¯ä»€ä¹ˆ?  [Unknown]:  JiLinè¯¥å•ä½çš„åŒå­—æ¯å›½å®¶/åœ°åŒºä»£ç æ˜¯ä»€ä¹ˆ?  [Unknown]:  CNCN=VoidKing, OU=Nenu, O=Nenu, L=ChangChun, ST=JiLin, C=CNæ˜¯å¦æ­£ç¡®?  [å¦]:  yè¾“å…¥ &lt;dsjyw.keystore&gt; çš„å¯†é’¥å£ä»¤        (å¦‚æœå’Œå¯†é’¥åº“å£ä»¤ç›¸åŒ, æŒ‰å›è½¦):

æ‰“åŒ…1ã€æ‰“å¼€Hbuilderï¼Œå‘è¡Œï¼Œå‘è¡Œä¸ºåŸç”Ÿå®‰è£…åŒ…ã€‚
2ã€ä½¿ç”¨è‡ªæœ‰è¯ä¹¦ï¼›AndroidåŒ…åæ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œä¸éœ€è¦ä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹ä¸ºè‡ªå·±å–œæ¬¢çš„åŒ…åï¼›è¯ä¹¦åˆ«åå’Œç§é’¥å¯†ç æ˜¯ç”Ÿæˆkeystoreæ—¶é…ç½®çš„ï¼›è¯ä¹¦æ–‡ä»¶é€‰æ‹©ç”Ÿæˆçš„keystoreæ–‡ä»¶ã€‚
3ã€æ‰“åŒ…ï¼Œä¹‹åä¼šè‡ªåŠ¨ä¸Šä¼ æºç ï¼Œæ‰“åŒ…å¥½åä¸‹è½½åˆ°appå­˜æ”¾ç›®å½•ä¸­ã€‚
ç­¾å1ã€å¤åˆ¶æ‰“åŒ…ä¸‹è½½å¥½çš„apkæ–‡ä»¶åˆ°dsjyw.keystoreç›¸åŒçš„ç›®å½•ï¼Œé‡å‘½åapkæ–‡ä»¶ä¸ºandroid-release-unsigned.apkã€‚
2ã€æ‰“å¼€cmdï¼Œæ‰§è¡Œç­¾åå‘½ä»¤jarsigner -verbose -keystore dsjyw.keystore -signedjar dsjyw.apk android-release-unsigned.apk dsjyw.keystore
è¯´æ˜ï¼šjarsigner -verbose -keystore åˆ«å.keystore(å¯†é’¥åº“ä½ç½®) -signedjar ç­¾ååäº§ç”Ÿçš„æ–‡ä»¶.apkè¦ç­¾åçš„æ–‡ä»¶.apk åˆ«å.keystore(å¯†é’¥åº“)
æŸ¥çœ‹ç­¾åkeytool -v -list -keystore dsjyw.keystore
æ‰¾åˆ°MD5: 70:1D:81:1E:D3:A6:8B:28:66:82:BA:D8:EB:79:DC:63
æ–°æµªåˆ›å»ºç§»åŠ¨åº”ç”¨æ—¶è¦æ±‚çš„æ˜¯32ä½æ•°å­—å°å†™å­—æ¯ï¼ŒæŠŠå‰é¢çš„è¿™ä¸²æ•°å­—ä¸­çš„å†’å·å»æ‰ï¼Œå­—æ¯å°å†™å³å¯ã€‚
è…¾è®¯å¼€æ”¾å¹³å°åˆ›å»ºå®‰å“åº”ç”¨1ã€ç™»å½•è…¾è®¯å¼€æ”¾å¹³å°
2ã€å®‰å“åº”ç”¨ï¼Œåˆ›å»ºåº”ç”¨ã€‚
3ã€å…³è”QQäº’è”ï¼Œè¾“å…¥è”ç›Ÿç½‘webåº”ç”¨çš„appidå’Œappkeyï¼Œç¡®å®šã€‚ä¹‹æ‰€ä»¥å…³è”QQäº’è”ï¼Œæ˜¯ä¸ºäº†ç»Ÿä¸€appidï¼Œå¦åˆ™ï¼Œwebç™»å½•å’Œappç™»å½•è·å¾—çš„æ˜¯ä¸åŒçš„openidã€‚
å¦‚æœå…³è”QQäº’è”åï¼Œåˆ›å»ºåº”ç”¨å¤±è´¥ï¼Œæç¤ºâ€œå¯¹ä¸èµ·ï¼Œæ‚¨ä¸æ˜¯åº”ç”¨çš„åˆ›å»ºè€…æˆ–åä½œè€…(1500401)â€ã€‚
å¯èƒ½ä¸€ï¼šä¸æ˜¯åä½œè€…ã€‚è¯·å…ˆä½¿ç”¨è”ç›Ÿç½‘webåº”ç”¨æ‰€åœ¨è´¦å·ç™»å½•ï¼Œåœ¨ç®¡ç†ä¸­å¿ƒé¡µé¢ï¼Œæ»‘åŠ¨é¼ æ ‡åˆ°å³ä¸Šè§’ç”¨æˆ·åï¼Œå•å‡»æƒé™æƒé™ç®¡ç†ï¼Œæ·»åŠ åä½œè€…ã€‚
å¯èƒ½äºŒï¼šè´¦å·å†²çªã€‚ä¹‹å‰çš„webåº”ç”¨åœ¨QQäº’è”ä¸Šï¼Œæ­¤æ—¶ï¼Œä¸è¦åœ¨æµè§ˆå™¨ä¸­åŒæ—¶æ‰“å¼€è…¾è®¯å¼€æ”¾å¹³å°å’ŒQQäº’è”ï¼Œä¹Ÿä¸è¦ç™»å½•å…¶ä»–çš„QQé‚®ç®±ï¼Œæœ‰å¯èƒ½è´¦å·å†²çªã€‚
å¯èƒ½ä¸‰ï¼šå¼€å‘è€…èµ„æ–™æœªæäº¤å®¡æ ¸ã€‚
4ã€é€‰æ‹©ç§»åŠ¨åº”ç”¨ å®‰å“ï¼Œåˆ›å»ºåº”ç”¨ï¼Œé€‰æ‹©åº”ç”¨ç±»å‹ï¼Œç¡®å®šã€‚æ­¤æ—¶åˆ›å»ºçš„å®‰å“åº”ç”¨ï¼Œå®ƒçš„appidå’Œappkeyå°±å’Œè”ç›Ÿç½‘webåº”ç”¨ç›¸åŒäº†ã€‚
5ã€æŒ‰ç…§æç¤ºï¼Œå¡«å†™éœ€è¦çš„å­—æ®µå³å¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šä¼ å®‰è£…åŒ…æ—¶ï¼Œéœ€è¦ä¸Šä¼ ç­¾ååçš„apkæ–‡ä»¶ã€‚
6ã€å¡«å†™å¥½ä¿¡æ¯ï¼Œä¿å­˜å³å¯ï¼Œä¸éœ€è¦æäº¤å®¡æ ¸ã€‚å¦‚æœéœ€è¦æäº¤å®¡æ ¸çš„è¯ï¼Œè¯·å…ˆæ ¹æ®æç¤ºåŠ å›ºåº”ç”¨ã€‚
åˆ›å»ºiosåº”ç”¨1ã€åœ¨å®‰å“åº”ç”¨ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆ›å»ºçš„è”ç›Ÿç½‘appï¼Œå•å‡»å®ƒã€‚
2ã€é¼ æ ‡æ»‘åˆ°å³ä¸Šè§’å¹³å°ä¿¡æ¯ï¼Œå•å‡»IOSåº”ç”¨ï¼Œå³å¯åˆ›å»ºIOSåº”ç”¨ã€‚è¯¥IOSåº”ç”¨çš„appidå’Œappkeyå°±å’Œè”ç›Ÿç½‘webåº”ç”¨ç›¸åŒï¼Œä¹Ÿå’Œå®‰å“åº”ç”¨ç›¸åŒã€‚
è­¦å‘Šï¼Œåˆ›å»ºiosåº”ç”¨åï¼Œæ­¤æ—¶å®‰å“åº”ç”¨å’Œiosåº”ç”¨å®é™…ä¸Šæ˜¯åŒä¸€ä¸ªåº”ç”¨ã€‚åˆ é™¤ä»»æ„ä¸€ä¸ªï¼Œä¸¤ä¸ªåº”ç”¨å°±éƒ½æ²¡æœ‰äº†ã€‚
3ã€æŒ‰ç…§æç¤ºå¡«å†™å„å­—æ®µå³å¯ã€‚å…¶ä¸­æ¯”è¾ƒéš¾çš„æ˜¯URL schemeã€AppStore IDå’ŒBundle IDï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥åˆ°Apple Developerå’Œitunes connectä¸ŠæŸ¥çœ‹åˆ°ã€‚
æ–°æµªå¼€æ”¾å¹³å°1ã€ç™»å½•æ–°æµªå¼€æ”¾å¹³å°
2ã€å¾®è¿æ¥ï¼Œç§»åŠ¨åº”ç”¨ï¼Œç«‹å³æ¥å…¥ã€‚å‹¾é€‰Iphoneå’ŒAndroidä¸¤ä¸ªå¹³å°ï¼Œåˆ›å»ºã€‚
3ã€å¡«å†™åº”ç”¨åŸºæœ¬ä¿¡æ¯ã€‚å…¶ä¸­æ¯”è¾ƒéš¾çš„æ˜¯Androidç­¾åï¼Œä¸å¿…ä½¿ç”¨æ–°æµªæä¾›çš„ç­¾åå·¥å…·ï¼Œå‚è€ƒæœ¬æ–‡ä¸­çš„â€œæŸ¥çœ‹ç­¾åâ€å°èŠ‚ï¼Œå¡«å…¥å¾—åˆ°çš„32ä½å­—ç¬¦ä¸²ã€‚
4ã€ä¿å­˜ä¿¡æ¯ï¼Œæäº¤å®¡æ ¸ã€‚å®¡æ ¸ä¸é€šè¿‡ä¼šæœ‰è¯¦ç»†æç¤ºï¼Œå‚è€ƒæç¤ºä¿®æ”¹åå†æ¬¡æäº¤å®¡æ ¸ã€‚
5ã€å•å‡»å·¦ä¾§å¯¼èˆªæ åº”ç”¨ä¿¡æ¯ï¼Œé«˜çº§ä¿¡æ¯ã€‚OAuth2.0 æˆæƒè®¾ç½®ä¸­ç‚¹å‡»ç¼–è¾‘ï¼Œæˆæƒå›è°ƒé¡µå’Œå–æ¶ˆæˆæƒå›è°ƒé¡µéƒ½å¡«å…¥https://api.weibo.com/oauth2/default.htmlã€‚
ä¹¦ç­¾HBuilder æ‰“åŒ…æµç¨‹
è…¾è®¯å¼€æ”¾å¹³å°åˆ›å»ºåº”ç”¨çš„å‘ï¼Œå®‰å“å’ŒiOSç«¯å¦‚ä½•å…±ç”¨åŒä¸€ä¸ªAppidï¼Ÿ
]]></content>
      <categories>
        <category>engineering</category>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
        <tag>hbuilder</tag>
        <tag>ios</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨OpenCVå®ç°å®æ—¶è§†é¢‘ç›®æ ‡æ£€æµ‹</title>
    <url>/dev-object-detection/</url>
    <content><![CDATA[å‰è¨€è€æ¿ä¸æ—¶ä¿±è¿›ï¼Œå¼€å§‹å¸¦é¢†å¤§å®¶ææœºå™¨å­¦ä¹ ã€‚æ–°ä»»åŠ¡ï¼šåˆ©ç”¨æ·±åº¦å­¦ä¹ +python+opencvï¼Œå®ç°å®æ—¶è§†é¢‘ç›®æ ‡æ£€æµ‹ã€‚çœ‹æ•™ç¨‹ï¼Œå¾ˆç®€å•çš„æ ·å­ï¼Œæä¸€ä¸‹ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ã€Šæ·±åº¦å­¦ä¹  + OpenCVï¼ŒPythonå®ç°å®æ—¶è§†é¢‘ç›®æ ‡æ£€æµ‹ã€‹
Real-time object detection with deep learning and OpenCV
Faster video file FPS with cv2.VideoCapture and OpenCV
ç”¨ Python å’Œ OpenCV æ£€æµ‹å’Œè·Ÿè¸ªè¿åŠ¨å¯¹è±¡
ç”¨æ ‘è“æ´¾ + Python + OpenCV å®ç°å®¶åº­ç›‘æ§å’Œç§»åŠ¨ç›®æ ‡æ¢æµ‹ï¼ˆä¸‹ï¼‰
Python 3.x å®‰è£…opencv+opencv_contrib



ç¯å¢ƒå‡†å¤‡python1ã€å‚è€ƒã€ŠAnacondaã€‹ï¼Œå®‰è£…Anacondaã€‚
Anacondaå¸¸ç”¨å‘½ä»¤ï¼š

æŸ¥çœ‹ç¯å¢ƒï¼Œconda env list
è¿›å…¥ç¯å¢ƒï¼Œactivate my_env
é€€å‡ºç¯å¢ƒï¼Œdeactivate
æŸ¥çœ‹pythonç‰ˆæœ¬ï¼Œpython --version
æ·»åŠ ç¯å¢ƒï¼Œconda create -n py3.6 python=3.6
åˆ é™¤ç¯å¢ƒï¼Œconda env remove -n py3.6
æŸ¥çœ‹ç¯å¢ƒä¸­çš„åŒ…ï¼Œconda list
æ›´æ–°å½“å‰ç¯å¢ƒä¸‹çš„æ‰€æœ‰åŒ…ï¼Œconda upgrade --all
å®‰è£…åŒ…ï¼Œconda install package_name

2ã€å®‰è£…python3.6ç¯å¢ƒï¼Œä»¥ä¾¿ä½¿ç”¨å¯¹åº”ç‰ˆæœ¬çš„opencvã€‚
conda create -n py3.6 python=3.6activate py3.6conda upgrade --all


PSï¼šä»¥ä¸‹å‘½ä»¤éƒ½æ˜¯åœ¨python3.6ç¯å¢ƒä¸­æ‰§è¡Œã€‚
3ã€å®‰è£…numpyã€imutils
pip install numpypip install imutils

opencv1ã€è®¿é—®Python Extension Packages for Windowsï¼Œä¸‹è½½pythonå¯¹åº”ç‰ˆæœ¬çš„opencvã€‚
æ¯”å¦‚éƒåŒå­¦ä¸‹è½½çš„æ˜¯opencv_python-3.3.0+contrib-cp36-cp36m-win_amd64.whlï¼Œcp36è¡¨ç¤ºPythonæ˜¯3.6ç‰ˆæœ¬ï¼Œwin_amd64æ˜¯è¡¨ç¤ºå®‰è£…çš„pythonæ˜¯64bitçš„ï¼Œ+contribè¡¨ç¤ºåŒ…æ‹¬contribåŒ…ã€‚
2ã€ä¸‹è½½å¥½åï¼ŒæŠŠå®ƒæ”¾åˆ°Cç›˜ä¸­ï¼Œæ‰§è¡Œå®‰è£…å‘½ä»¤ï¼špip install C:\opencv_python-3.3.0+contrib-cp36-cp36m-win_amd64.whl
è¿è¡Œä»£ç ä¿®æ”¹Adrian RosebrockåŒå­¦çš„åŸç‰ˆä»£ç é€‚ç”¨äºç›´æ¥è°ƒç”¨æ‘„åƒå¤´æ¥è·å–è§†é¢‘æµï¼Œå°´å°¬çš„æ˜¯ï¼Œå°ç”Ÿçš„ç”µè„‘æ‘„åƒå¤´åäº†ï¼Œæ— æ³•ä½¿ç”¨ã€‚äºæ˜¯ï¼Œä¸å¾—ä¸ä¿®æ”¹ä»£ç ï¼Œä¸»è¦æ˜¯æŠŠè§†é¢‘æµçš„è·å–æ–¹å¼æ”¹ä¸ºä»æœ¬åœ°è·å–ã€‚
# vs = VideoStream(src=0).start()# vs =cv2.VideoCapture(&#x27;C:\\Users\\voidking\\Desktop\\real-time-object-detection\\test_video.flv&#x27;)vs =cv2.VideoCapture(&#x27;./test_video.flv&#x27;)

# grab the frame from the threaded video stream and resize it# to have a maximum width of 400 pixels# frame = vs.read()# frame = imutils.resize(frame, width=400)# grab the frame from the threaded video file stream(grabbed,frame) = vs.read()# if the frame was not grabbed, then we have reached the end# of the streamif not grabbed:    breakframe = imutils.resize(frame, width=800)


è¿è¡Œæ¨èä½¿ç”¨å‘½ä»¤ï¼š
python real_time_object_detection.py -p ./MobileNetSSD_deploy.prototxt.txt -m ./MobileNetSSD_deploy.caffemodel

æˆ–è€…ï¼ŒæŒ‡å®šç»å¯¹è·¯å¾„ï¼Œå‡è®¾é¡¹ç›®ç›®å½•ä¸ºC:\Users\voidking\Desktop\real-time-object-detection\ï¼Œé‚£ä¹ˆå‘½ä»¤å¦‚ä¸‹ï¼š
python real_time_object_detection.py -p &quot;C:\Users\voidking\Desktop\real-time-object-detection\MobileNetSSD_deploy.prototxt.txt&quot; -m &quot;C:\Users\voidking\Desktop\real-time-object-detection\MobileNetSSD_deploy.caffemodel&quot;

è¿›é˜¶ä¿®æ”¹æˆ‘ä»¬çœ‹åˆ°ï¼Œprototxtå’Œmodeléƒ½æ˜¯æŒ‡å®šçš„ï¼Œé‚£æˆ‘ä»¬çš„è§†é¢‘æ–‡ä»¶ä¹Ÿç”¨è¿™ç§æ–¹å¼æŒ‡å®šï¼Œå°±æ›´åŠ å‹å¥½ä¸€ç‚¹ã€‚
# construct the argument parse and parse the argumentsap = argparse.ArgumentParser()ap.add_argument(&quot;-p&quot;, &quot;--prototxt&quot;, required=True,    help=&quot;path to Caffe &#x27;deploy&#x27; prototxt file&quot;)ap.add_argument(&quot;-m&quot;, &quot;--model&quot;, required=True,    help=&quot;path to Caffe pre-trained model&quot;)ap.add_argument(&quot;-c&quot;, &quot;--confidence&quot;, type=float, default=0.2,    help=&quot;minimum probability to filter weak detections&quot;)args = vars(ap.parse_args())

æˆ‘ä»¬æ’å…¥ä¸€è¡Œï¼š
ap.add_argument(&quot;-v&quot;, &quot;--video&quot;, required=True,    help=&quot;path to Caffe video file&quot;)

ç„¶ååœ¨åˆå§‹åŒ–è§†é¢‘æµæ—¶ï¼Œä¿®æ”¹ä¸ºï¼š
vs =cv2.VideoCapture(args[&quot;video&quot;])

è¿è¡Œå‘½ä»¤ä¿®æ”¹ä¸ºï¼š
python real_time_object_detection.py -p ./MobileNetSSD_deploy.prototxt.txt -m ./MobileNetSSD_deploy.caffemodel -v ./test_video.flv

è¿è¡Œæ•ˆæœ
æºç åˆ†äº«https://github.com/voidking/object-detection.git
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>opencv</tag>
        <tag>æ·±åº¦å­¦ä¹ </tag>
        <tag>anaconda</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonè·å–å‘½ä»¤è¡Œå‚æ•°</title>
    <url>/dev-python-command-arg/</url>
    <content><![CDATA[Pythonè·å–å‘½ä»¤è¡Œå‚æ•°æ¦‚è¿°åœ¨æ‰§è¡ŒPythonè„šæœ¬æ—¶ï¼Œå¾ˆå¤šæ—¶å€™éœ€è¦ä»å‘½ä»¤è¡Œè·å–ç”¨æˆ·è¾“å…¥çš„å‚æ•°ã€‚
Pthonè·å–å‘½ä»¤è¡Œå‚æ•°çš„æ–¹å¼æœ‰å¤šç§ï¼Œå…·ä½“åŒ…æ‹¬ï¼š

sys.argv
getopt
argparse
click

ä¸ªäººæ„Ÿè§‰å…¶ä¸­æœ€ç®€å•çš„æ˜¯sys.argvï¼Œæ—¢ç®€å•åˆä¼˜é›…çš„æ˜¯argparseã€‚æœ¬æ–‡ï¼Œæˆ‘ä»¬å°±æ¥å­¦ä¹ ä¸€ä¸‹argparseçš„ä½¿ç”¨ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Python å‘½ä»¤è¡Œå‚æ•°
Python å‘½ä»¤è¡Œå‚æ•°çš„3ç§ä¼ å…¥æ–¹å¼



argparseç¤ºä¾‹1ã€ç¼–å†™ test.pyï¼Œå†…å®¹å¦‚ä¸‹
#!/usr/bin/env python# -*- coding: utf-8 -*-import argparse# construct the argument parse and parse the argumentsap = argparse.ArgumentParser()ap.add_argument(&quot;-i&quot;, &quot;--input&quot;, required=True, help=&quot;input filename&quot;)ap.add_argument(&quot;-o&quot;, &quot;--output&quot;, default=&#x27;output.txt&#x27;, help=&quot;output filename&quot;)print(ap.parse_args())print(vars(ap.parse_args()))args = ap.parse_args()print(f&#x27;input: &#123;args.input&#125;&#x27;)print(f&#x27;output: &#123;args.output&#125;&#x27;)

2ã€æµ‹è¯•æ‰§è¡Œ
python test.pypython test.py -i input.txt -o output.txtpython test.py -i input.txt


]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»é›¶å¼€å§‹æ‰“é€ è‡ªå·±çš„JavaScriptæ¡†æ¶â€”â€”ç¬¬0ç« </title>
    <url>/dev-vkjs-0/</url>
    <content><![CDATA[æ¦‚å¿µç®€æåº“ã€æ’ä»¶ã€æ¡†æ¶ã€åŠ è½½é¡¹ã€æ‰©å±•å’Œæ§ä»¶éƒ½æ˜¯ç»„ä»¶ã€‚
ç»„ä»¶ï¼ˆComponentï¼‰æ˜¯ä¸€ä¸ªå«ä¹‰å¾ˆå¤§çš„æ¦‚å¿µï¼Œä¸€èˆ¬æ˜¯æŒ‡è½¯ä»¶ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œæ‰¿æ‹…äº†ç‰¹å®šçš„èŒè´£ï¼Œå¯ä»¥ç‹¬ç«‹äºæ•´ä¸ªç³»ç»Ÿè¿›è¡Œå¼€å‘å’Œæµ‹è¯•ï¼Œä¸€ä¸ªè‰¯å¥½è®¾è®¡çš„ç»„ä»¶åº”è¯¥å¯ä»¥åœ¨ä¸åŒçš„è½¯ä»¶ç³»ç»Ÿä¸­è¢«ä½¿ç”¨ï¼ˆå¯å¤ç”¨ï¼‰ã€‚ä¾‹å¦‚V8å¼•æ“æ˜¯Chromeæµè§ˆå™¨çš„ä¸€éƒ¨åˆ†ï¼Œè´Ÿè´£è¿è¡Œjavascriptä»£ç ï¼Œè¿™é‡ŒV8å¼•æ“å°±å¯ä»¥è§†ä¸ºä¸€ä¸ªç»„ä»¶ã€‚V8å¼•æ“åŒæ—¶ä¹Ÿæ˜¯node.jsçš„javascriptè§£é‡Šå™¨ï¼Œè¿™ä½“ç°äº†ç»„ä»¶çš„å¯å¤ç”¨æ€§ã€‚
åº“ï¼ˆLibraryï¼‰æ˜¯ä¸€ç³»åˆ—é¢„å…ˆå®šä¹‰å¥½çš„æ•°æ®ç»“æ„å’Œå‡½æ•°ï¼ˆå¯¹äºé¢å‘å¯¹è±¡è¯­è¨€æ¥è¯´ï¼Œæ˜¯ç±»ï¼‰çš„é›†åˆï¼Œç¨‹åºå‘˜é€šè¿‡ä½¿ç”¨è¿™äº›æ•°æ®ç»“æ„å’Œå‡½æ•°å®ç°åŠŸèƒ½ã€‚ä¾‹å¦‚Moment.jsæ˜¯ä¸€ä¸ªjavascriptåº“ï¼Œæä¾›äº†å¤„ç†æ—¶é—´çš„ä¸€äº›å‡½æ•°ã€‚åœ¨jsä¸­ï¼Œæ’ä»¶å’Œåº“çš„å«ä¹‰ç›¸åŒï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¯´Moment.jsæ˜¯ä¸€ä¸ªæ’ä»¶ã€‚
æ¡†æ¶ï¼ˆFrameworkï¼‰ä¹Ÿæ˜¯ä¸€ç³»åˆ—é¢„å…ˆå®šä¹‰å¥½çš„æ•°æ®ç»“æ„å’Œå‡½æ•°ï¼Œä¸€èˆ¬ç”¨äºä½œä¸ºä¸€ä¸ªè½¯ä»¶çš„éª¨æ¶ï¼Œä½†ç¨‹åºçœŸæ­£çš„åŠŸèƒ½è¿˜éœ€è¦ç”±å¼€å‘è€…å®ç°ã€‚æ¡†æ¶å’Œåº“çš„æœ€å¤§åŒºåˆ«åœ¨äºâ€œæ§åˆ¶åè½¬â€ï¼Œå½“ä½ ä½¿ç”¨ä¸€ä¸ªåº“ï¼Œä½ ä¼šè°ƒç”¨åº“ä¸­çš„ä»£ç ï¼Œè€Œå½“ä½ ä½¿ç”¨ä¸€ä¸ªæ¡†æ¶ï¼Œæ¡†æ¶ä¼šè°ƒç”¨ä½ çš„ä»£ç ã€‚æ¡†æ¶å’Œåº“æ˜¯ä¸€ä¸ªæœ‰äº¤å‰çš„æ¦‚å¿µï¼Œå¾ˆå¤šæ¡†æ¶éƒ½æ˜¯ä»¥åº“çš„å½¢å¼å‘å¸ƒçš„ï¼Œä¾‹å¦‚Javaçš„Spring MVCæ¡†æ¶ï¼Œå…¶å‘å¸ƒçš„jaråŒ…æœ¬èº«å°±æ˜¯ä¸€ä¸ªåº“ã€‚ä¸‹å›¾æ¥è‡ªLibrary vs. Framework? ï¼Œä»è°ƒç”¨çš„è§’åº¦è¯´æ˜äº†æ¡†æ¶å’Œåº“çš„å…³ç³»ï¼š
æ¥è‡ªçŸ¥ä¹é¾šä¸–ä¼Ÿçš„å›ç­”


ç›®æ ‡è¯´åˆ°jsæ¡†æ¶å’Œæ’ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³åˆ°jqueryã€zeptoã€requirejsã€seajsã€art-templateã€page.jsã€angularjsã€vueç­‰ç­‰ã€‚è¿™äº›æ¡†æ¶å’Œæ’ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæ¥ä¸ªè¡¨æ ¼æ¯”è¾ƒã€‚

    jsæ¡†æ¶å’Œæ’ä»¶æ¯”è¾ƒ
    
        æ¡†æ¶åç§°
        é€‰æ‹©å™¨
        DOMæ“ä½œ
        äº‹ä»¶å¤„ç†
        AJAX
        å¼‚æ­¥å¤„ç†
        åŠ¨ç”»æ¨¡å—
        æ¨¡å—åŒ–ç®¡ç†ä¾èµ–
        æ¨¡æ¿å¼•æ“
        è·¯ç”±ç®¡ç†
    
    
&lt;tr&gt;
    &lt;th&gt;jquery&lt;/th&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;th&gt;zepto&lt;/th&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;th&gt;requirejs&lt;/th&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;th&gt;seajs&lt;/th&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;th&gt;art-template&lt;/th&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;th&gt;page.js&lt;/th&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;Ã—&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;th&gt;angularjs&lt;/th&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;th&gt;vue&lt;/th&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
    &lt;td&gt;âˆš&lt;/td&gt;
&lt;/tr&gt;



æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦å¼€å‘ä¸€ä¸ªjsæ¡†æ¶ï¼Œç±»ä¼¼äºrequirejså’Œseajsï¼Œå®ç°æ¨¡å—åŒ–ç®¡ç†ä¾èµ–çš„åŠŸèƒ½ã€‚
æœ€æ—©çš„æ—¶å€™ï¼Œæ‰€æœ‰Javascriptä»£ç éƒ½å†™åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œåªè¦åŠ è½½è¿™ä¸€ä¸ªæ–‡ä»¶å°±å¤Ÿäº†ã€‚åæ¥ï¼Œä»£ç è¶Šæ¥è¶Šå¤šï¼Œä¸€ä¸ªæ–‡ä»¶ä¸å¤Ÿäº†ï¼Œå¿…é¡»åˆ†æˆå¤šä¸ªæ–‡ä»¶ï¼Œä¾æ¬¡åŠ è½½ã€‚ä¸‹é¢çš„ç½‘é¡µä»£ç ï¼Œç›¸ä¿¡å¾ˆå¤šäººéƒ½è§è¿‡ã€‚
&lt;script src=&quot;1.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;2.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;3.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;4.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;5.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;6.js&quot;&gt;&lt;/script&gt;

è¿™æ®µä»£ç ä¾æ¬¡åŠ è½½å¤šä¸ªjsæ–‡ä»¶ï¼Œè¿™æ ·çš„å†™æ³•æœ‰å¾ˆå¤§çš„ç¼ºç‚¹ã€‚é¦–å…ˆï¼ŒåŠ è½½çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šåœæ­¢ç½‘é¡µæ¸²æŸ“ï¼ŒåŠ è½½æ–‡ä»¶è¶Šå¤šï¼Œç½‘é¡µå¤±å»å“åº”çš„æ—¶é—´å°±ä¼šè¶Šé•¿ï¼›å…¶æ¬¡ï¼Œç”±äºjsæ–‡ä»¶ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œå› æ­¤å¿…é¡»ä¸¥æ ¼ä¿è¯åŠ è½½é¡ºåºï¼ˆæ¯”å¦‚ä¸Šä¾‹çš„1.jsè¦åœ¨2.jsçš„å‰é¢ï¼‰ï¼Œä¾èµ–æ€§æœ€å¤§çš„æ¨¡å—ä¸€å®šè¦æ”¾åˆ°æœ€ååŠ è½½ï¼Œå½“ä¾èµ–å…³ç³»å¾ˆå¤æ‚çš„æ—¶å€™ï¼Œä»£ç çš„ç¼–å†™å’Œç»´æŠ¤éƒ½ä¼šå˜å¾—å›°éš¾ã€‚
è¯¦æƒ…è¯·å‚è€ƒJavascriptæ¨¡å—åŒ–ç¼–ç¨‹ï¼ˆä¸‰ï¼‰ï¼šrequire.jsçš„ç”¨æ³•ã€‚
æˆ‘ä»¬è¦ç¼–å†™çš„vkjsï¼Œå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼šï¼ˆ1ï¼‰å®ç°jsæ–‡ä»¶çš„å¼‚æ­¥åŠ è½½ï¼Œé¿å…ç½‘é¡µå¤±å»å“åº”ï¼›ï¼ˆ2ï¼‰ç®¡ç†æ¨¡å—ä¹‹é—´çš„ä¾èµ–æ€§ï¼Œä¾¿äºä»£ç çš„ç¼–å†™å’Œç»´æŠ¤ã€‚
ç¯å¢ƒå‡†å¤‡1ã€å®‰è£…nodeï¼Œå‚è€ƒnvmé¡¹ç›®ã€‚2ã€å®‰è£…puerï¼Œå‚è€ƒè¶…ç®€å•å·¥å…·puerã€‚
å¼‚æ­¥åŠ è½½é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹æ€æ ·å®ç°å¼‚æ­¥åŠ è½½ã€‚jsçš„å¼‚æ­¥å¾ˆå®¹æ˜“å®ç°ï¼Œä½¿ç”¨å›è°ƒå‡½æ•°å³å¯ã€‚
å¼•å…¥jsjsçš„å¼•å…¥ï¼Œä¸æ˜¯å†™åœ¨é¡µé¢ä¸­ï¼Œé‚£ä¹ˆï¼Œè‚¯å®šæ˜¯å†™åœ¨jsä¸­ã€‚å‚è€ƒJAVASCRIPT è£…è½½å’Œæ‰§è¡Œå’ŒPreload Javascriptï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºå¦‚ä¸‹ä»£ç ï¼š
;(function () &#123;    var vk_config = &#123;        root: &#x27;/&#x27;,        path: &#123;            &#x27;jquery&#x27;: &#x27;lib/jquery/jquery.min.js&#x27;        &#125;    &#125;;    var vk = &#123;        loadjs: function(script_filename,callback) &#123;            script_doc = document.getElementById(script_filename);            if(script_doc)&#123;                return;            &#125;            var script = document.createElement(&#x27;script&#x27;);            script.setAttribute(&#x27;id&#x27;, script_filename);            script.setAttribute(&#x27;type&#x27;, &#x27;text/javascript&#x27;);            script.setAttribute(&#x27;src&#x27;, vk_config.root + vk_config.path[script_filename]);            document.getElementsByTagName(&#x27;body&#x27;)[0].appendChild(script);            console.log(&#x27;loading:&#x27;+script_filename);            script.onload = script.onreadystatechange = function()&#123;                console.log(&#x27;loaded:&#x27;+script_filename);                callback();            &#125;        &#125;    &#125;;    window.vk = vk;&#125;)();

åœ¨é¡µé¢ä¸­ä½¿ç”¨çš„æ—¶å€™ï¼Œè°ƒç”¨loadjsæ–¹æ³•å³å¯ã€‚
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;vkjs&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;h2&gt;vkjsæµ‹è¯•é¡µé¢&lt;/h2&gt;&lt;script src=&quot;../src/vk.js&quot;&gt;&lt;/script&gt;&lt;script&gt;    vk.loadjs(&#x27;jquery&#x27;,function()&#123;        console.log($(&#x27;h2&#x27;).html());    &#125;);     console.log(&#x27;é¡µé¢åŠ è½½å®Œæ¯•&#x27;);&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;

æŸ¥çœ‹æ§åˆ¶å°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰§è¡Œé¡ºåºï¼š
loading:jqueryé¡µé¢åŠ è½½å®Œæ¯•loaded:jqueryvkjsæµ‹è¯•é¡µé¢

å¼•å…¥jqueryçš„æ—¶å€™ï¼Œè¯¥scriptæ˜¯æ’å…¥åˆ°é¡µé¢æœ€åº•éƒ¨çš„ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨å›è°ƒå‡½æ•°ä¸­ä¾ç„¶å¯ä»¥ä½¿ç”¨$ï¼Œå› ä¸ºjqueryåŠ è½½å®Œæ¯•åæˆ‘ä»¬æ‰è°ƒç”¨å›è°ƒå‡½æ•°ï¼Œè¿™æ—¶å°±å’Œé¡µé¢ä½ç½®æ— å…³äº†ã€‚
å¼•å…¥å¤šä¸ªjså¼•å…¥å•ä¸ªjsï¼Œæ˜¯æ¯”è¾ƒå®¹æ˜“çš„ã€‚è€Œåœ¨å¼€å‘æ—¶ï¼Œå¸¸å¸¸éœ€è¦å¼•å…¥å¤šä¸ªjsï¼Œå¦‚æœå¤šæ¬¡è°ƒç”¨loadjsæ–¹æ³•çš„è¯ï¼Œéå¸¸ä¸å‹å¥½ã€‚é‚£ä¹ˆï¼Œæ€æ ·å¼•å…¥å¤šä¸ªjsæ–‡ä»¶ï¼ŸåŒæ ·çš„ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåŠ è½½jsæ–‡ä»¶ï¼Œç­‰åˆ°æ‰€æœ‰jsæ–‡ä»¶åŠ è½½å®Œæˆï¼Œè°ƒç”¨å›è°ƒå‡½æ•°å³å¯ã€‚
;(function () &#123;    var vk_config = &#123;        root: &#x27;/&#x27;,        path: &#123;            &#x27;jquery&#x27;: &#x27;lib/jquery/jquery.min.js&#x27;,            &#x27;layer&#x27;: &#x27;lib/layer/layer.js&#x27;,            &#x27;template&#x27;: &#x27;lib/art-template/dist/template.js&#x27;        &#125;    &#125;;    var vk = &#123;        loadjs: function(script_filename,callback) &#123;            script_doc = document.getElementById(script_filename);            if(script_doc)&#123;                return;            &#125;            var script = document.createElement(&#x27;script&#x27;);            script.setAttribute(&#x27;id&#x27;, script_filename);            script.setAttribute(&#x27;type&#x27;, &#x27;text/javascript&#x27;);            script.setAttribute(&#x27;src&#x27;, vk_config.root + vk_config.path[script_filename]);            document.getElementsByTagName(&#x27;body&#x27;)[0].appendChild(script);            console.log(&#x27;loading:&#x27;+script_filename);            script.onload = script.onreadystatechange = function()&#123;                console.log(&#x27;loaded:&#x27;+script_filename);                callback();            &#125;        &#125;,        count_js: 0,        use: function(ids,callback)&#123;            var that = this;            if (!Array.isArray(ids)) &#123;                ids = [ids];            &#125;            that.count_js = ids.length;            for(var i=0;i&lt;ids.length;i++)&#123;                (function(i)&#123;                    script_doc = document.getElementById(ids[i]);                    if(script_doc)&#123;                        return;                    &#125;                    script = document.createElement(&#x27;script&#x27;);                    script.setAttribute(&#x27;id&#x27;, ids[i]);                    script.setAttribute(&#x27;type&#x27;, &#x27;text/javascript&#x27;);                    script.setAttribute(&#x27;src&#x27;, vk_config.root + vk_config.path[ids[i]]);                    document.getElementsByTagName(&#x27;body&#x27;)[0].appendChild(script);                    console.log(&#x27;loading:&#x27;+ids[i]);                    script.onload = script.onreadystatechange = function()&#123;                        console.log(&#x27;loaded:&#x27;+ids[i]);                         that.count_js--;                        if(that.count_js == 0)&#123;                            callback();                        &#125;                    &#125;                &#125;)(i);            &#125;        &#125;    &#125;;    window.vk = vk;&#125;)();

åœ¨é¡µé¢ä½¿ç”¨çš„æ—¶å€™ï¼Œè°ƒç”¨useæ–¹æ³•ï¼š
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;vkjs&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;h2&gt;vkjsæµ‹è¯•é¡µé¢&lt;/h2&gt;&lt;script src=&quot;../src/vk.js&quot;&gt;&lt;/script&gt;&lt;script&gt;    vk.use([&#x27;jquery&#x27;,&#x27;template&#x27;],function()&#123;        console.log($(&#x27;h2&#x27;).html());    &#125;);     console.log(&#x27;é¡µé¢åŠ è½½å®Œæ¯•&#x27;);&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;

æŸ¥çœ‹æ§åˆ¶å°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰§è¡Œé¡ºåºï¼š
loading:jqueryloading:templateé¡µé¢åŠ è½½å®Œæ¯•loaded:templateloaded:jqueryvkjsæµ‹è¯•é¡µé¢

æœ‰åºå¼•å…¥jså¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¸æ­¢è¦å¼•å…¥å¤šä¸ªjsï¼Œè€Œä¸”è¦æœ‰é¡ºåºåœ°å¼•å…¥jsã€‚ä¸ºäº†å®ç°æœ‰åºåŠ è½½jsï¼Œåˆä¸æƒ³ä½¿ç”¨jså›è°ƒé‡é‡åµŒå¥—ï¼Œæ‰€ä»¥éƒåŒå­¦é€‰æ‹©ä½¿ç”¨Promiseã€‚å…·ä½“ç”¨æ³•å‚è€ƒJavascriptå¼‚æ­¥ç¼–ç¨‹çš„4ç§æ–¹æ³•ã€JavaScript Promise å‘Šåˆ«å¼‚æ­¥ä¹±åµŒå¥—ã€å¤§ç™½è¯è®²è§£Promiseï¼ˆä¸€ï¼‰ã€‚
æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚
ç®¡ç†ä¾èµ–æºç åˆ†äº«https://github.com/voidking/vkjs.git
ä¹¦ç­¾ä»é›¶å¼€å§‹ç¼–å†™è‡ªå·±çš„JavaScriptæ¡†æ¶ï¼ˆä¸€ï¼‰
ä»é›¶å¼€å§‹ç¼–å†™è‡ªå·±çš„JavaScriptæ¡†æ¶ï¼ˆäºŒï¼‰
jQueryæºç è§£æï¼ˆæ¶æ„ä¸ä¾èµ–æ¨¡å—ï¼‰
Queryæºç è§£æï¼ˆæ¶æ„ä¸ä¾èµ–æ¨¡å—ï¼‰å¯¹åº”æºç 
Sea.jsæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ
sea.jsæºç ï¼ˆModule.jsæ ¸å¿ƒä»£ç ï¼‰
JSæ¨¡å—åŠ è½½å™¨åŠ è½½åŸç†æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ
å¦‚ä½•æ„å»ºä¸€ä¸ªå¾®å‹çš„CMDæ¨¡å—åŒ–åŠ è½½å™¨
å¦‚ä½•å®ç°ä¸€ä¸ª CMD æ¨¡å—åŠ è½½å™¨
Grunt å®ä¾‹ä¹‹æ„å»ºseajsé¡¹ç›®
æ¼«è°ˆjsè‡ªå®šä¹‰äº‹ä»¶ã€DOM/ä¼ªDOMè‡ªå®šä¹‰äº‹ä»¶
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>node</tag>
        <tag>js</tag>
        <tag>æ¡†æ¶</tag>
        <tag>puer</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»é›¶å¼€å§‹æ‰“é€ è‡ªå·±çš„PHPæ¡†æ¶â€”â€”ç¬¬7ç« </title>
    <url>/dev-vkphp-7/</url>
    <content><![CDATA[å‰è¨€ã€Šthinkphpéƒ¨ç½²åˆ°nginxæœåŠ¡å™¨ã€‹ä¸€æ–‡ä¸­ï¼Œå°ç”Ÿæåˆ°è¿‡ï¼Œnginxé»˜è®¤æƒ…å†µä¸‹ä¸æ”¯æŒpathinfoæ¨¡å¼ï¼Œä»è€Œä¸èƒ½æ”¯æŒThinkPHPã€‚èƒ½è®¿é—®çš„ï¼Œåªæœ‰é¦–é¡µï¼Œå…¶ä»–å‡½æ•°çš„è·¯å¾„ï¼Œéƒ½æ— æ³•è®¿é—®ã€‚
è¿™æ˜¯å› ä¸ºï¼ŒPHPä¸­çš„å…¨å±€å˜é‡$_SERVER[&#39;PATH_INFO&#39;]ï¼Œå¸¸å¸¸è¢«ç”¨æ¥ä¼˜åŒ–urlè·¯å¾„æ ¼å¼ï¼Œæ¯”å¦‚thinkphpï¼Œè€Œnginxæ˜¯ä¸æ”¯æŒpathinfoçš„ã€‚
åŒæ ·çš„ï¼Œå°ç”Ÿå¼€å‘çš„vkphpï¼Œè™½ç„¶æ²¡æœ‰ä½¿ç”¨$_SERVER[&#39;PATH_INFO&#39;]ï¼Œä½†æ˜¯ä¹Ÿä½¿ç”¨åˆ°äº†$_SERVERï¼Œæ‰€ä»¥ï¼Œä¹Ÿéœ€è¦é…ç½®nginxæ”¯æŒpathinfoã€‚


å®Œæ•´demo1ã€é¦–å…ˆï¼ŒæŸ¥çœ‹nginxé…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œps aux | grep nginx
2ã€è¿›å…¥conf/vhostç›®å½•ï¼Œæ·»åŠ enroll.voidking.com.confæ–‡ä»¶ã€‚
server &#123;    listen 80;    server_name enroll.voidking.com;    root /home/wwwroot/enroll;    index index.html index.htm index.php;    error_page 404 /404.html;    location = /404.html &#123;        return 404 &#x27;Sorry, File not Found!&#x27;;    &#125;    error_page 500 502 503 504 /50x.html;    location = /50x.html &#123;        root /usr/local/nginx/html; # windowsç”¨æˆ·æ›¿æ¢è¿™ä¸ªç›®å½•    &#125;    location / &#123;        try_files $uri @rewrite;    &#125;    location @rewrite &#123;        set $static 0;        if  ($uri ~ \.(css|js|jpg|jpeg|png|gif|ico|woff|eot|svg|css\.map|min\.map)$) &#123;            set $static 1;        &#125;        if ($static = 0) &#123;            rewrite ^/(.*)$ /index.php?s=/$1;        &#125;    &#125;    location ~ /Uploads/.*\.php$ &#123;        deny all;    &#125;    location ~ \.php/ &#123;       if ($request_uri ~ ^(.+\.php)(/.+?)($|\?)) &#123; &#125;       fastcgi_pass 127.0.0.1:9000;       include fastcgi_params;       fastcgi_param SCRIPT_NAME     $1;       fastcgi_param PATH_INFO       $2;       fastcgi_param SCRIPT_FILENAME $document_root$1;    &#125;    location ~ \.php$ &#123;        fastcgi_pass 127.0.0.1:9000;        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;        include fastcgi_params;    &#125;    location ~ /\.ht &#123;        deny  all;    &#125;&#125;

3ã€æœ€åï¼Œé‡å¯nginxï¼Œ./nginx -s reload
]]></content>
      <categories>
        <category>engineering</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>nginx</tag>
        <tag>php</tag>
        <tag>pathinfo</tag>
        <tag>æ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»é›¶å¼€å§‹æ‰“é€ è‡ªå·±çš„PHPæ¡†æ¶â€”â€”ç¬¬6ç« </title>
    <url>/dev-vkphp-6/</url>
    <content><![CDATA[å‰è¨€ç¬¬0åˆ°5ç« ï¼Œæˆ‘ä»¬å®Œæˆäº†ä¸€ä¸ªå±äºè‡ªå·±çš„phpæ¡†æ¶ï¼Œéº»é›€è™½å°äº”è„ä¿±å…¨ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨vkphpæ¡†æ¶å¼€å‘ä¸€ä¸ªè¿·ä½ é¡¹ç›®â€”â€”ä¹¦ç­¾æ”¶è—ã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¹Ÿè®¸ä¼šé‡åˆ°å¾ˆå¤šé—®é¢˜ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å¯¹æ¡†æ¶è¿›è¡Œè°ƒæ•´ï¼Œä½¿ä¹‹æ›´åŠ å®Œå–„ã€‚
ç³»ç»Ÿæè¿°ï¼šç”¨æˆ·ç™»å½•ç³»ç»Ÿï¼Œèƒ½å¤Ÿçœ‹åˆ°è‡ªå·±æ”¶è—çš„ä¹¦ç­¾ï¼Œå¹¶ä¸”å¯ä»¥å¯¹ä¹¦ç­¾è¿›è¡Œå¢åˆ æ”¹æŸ¥ã€‚
ç³»ç»ŸåŠŸèƒ½ï¼š1ã€æ³¨å†Œç™»å½•ã€‚2ã€ä¹¦ç­¾å±•ç¤ºã€‚3ã€å¢åˆ æŸ¥æ”¹ã€‚


é¡¹ç›®ç»“æ„vkphpâ”œâ”€appâ”‚  â”œâ”€ctrlâ”‚  â”‚  â””â”€bookmarkâ”‚  â”œâ”€modelâ”‚  â””â”€smartyâ”‚     â”œâ”€templatesâ”‚     â”‚  â””â”€bookmarkâ”‚     â””â”€templates_c â”œâ”€assetsâ”œâ”€configâ”œâ”€coreâ”œâ”€logâ””â”€vendor


appå†…åŒ…å«æ§åˆ¶å™¨ã€modelã€smartyæ¨¡æ¿ã€‚
configå†…åŒ…å«å…¨å±€é…ç½®æ–‡ä»¶ã€‚
coreå†…åŒ…å«æ¡†æ¶çš„æ ¸å¿ƒæ–‡ä»¶ã€‚
logå†…å­˜æ”¾æ—¥å¿—æ–‡ä»¶ã€‚
assetsåŒ…å«é™æ€èµ„æºæ–‡ä»¶ã€‚
vendorå†…åŒ…å«ç¬¬ä¸‰æ–¹åº“ã€‚

æˆ‘ä»¬ç¼–å†™ä¸šåŠ¡ä»£ç çš„ä½ç½®ï¼Œä¸»è¦åœ¨appã€assetsä¸¤ä¸ªç›®å½•ã€‚
æ³¨å†Œç™»å½•è¡¨ç»“æ„ä¿®æ”¹vk_userè¡¨ç»“æ„ä¸ºï¼š
DROP TABLE IF EXISTS `vk_user`;CREATE TABLE `vk_user` (  `id` int(10) NOT NULL AUTO_INCREMENT,  `username` varchar(20) NOT NULL,  `password` varchar(32) NOT NULL COMMENT &#x27;md5åŠ å¯†&#x27;,  `salt` varchar(16) NOT NULL,  `screen_name` varchar(20) DEFAULT &#x27;ä½è°ƒçš„ç”¨æˆ·&#x27;,  `email` tinytext,  PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8;

modelapp/modelç›®å½•ä¸‹ï¼Œå·²ç»æœ‰äº†user.phpè¿™ä¸ªmodelç±»ã€‚
&lt;?phpnamespace app\model;class user extends \core\model&#123;    public function __construct()&#123;        parent::__construct(__CLASS__);    &#125;&#125;

æ§åˆ¶å™¨app/ctrl/bookmarkç›®å½•ä¸‹ï¼Œæ–°å»ºuser_ctrl.phpã€‚
&lt;?phpnamespace app\ctrl\bookmark;class user_ctrl extends \core\render&#123;    public function index()&#123;        echo &#x27;user ctrl&#x27;;    &#125;    public function captcha()&#123;        $captcha = new \core\util\captcha();        $captcha-&gt;create(300,80,40);    &#125;    public function check()&#123;        if(!(isset($_REQUEST[&#x27;code&#x27;]) &amp;&amp; $_REQUEST[&#x27;code&#x27;] !== &#x27;&#x27;))&#123;            $result = array(                &#x27;code&#x27;=&gt;&#x27;-4&#x27;,                &#x27;ext&#x27;=&gt;&#x27;éªŒè¯ç ä¸èƒ½ä¸ºç©º&#x27;            );            echo json_encode($result,JSON_UNESCAPED_UNICODE);            return;        &#125;        $code = $_REQUEST[&#x27;code&#x27;];        $captcha = new \core\util\captcha();        $ret = $captcha-&gt;check($code);        if($ret == 0)&#123;            $result = array(                &#x27;code&#x27;=&gt;&#x27;0&#x27;,                &#x27;ext&#x27;=&gt;&#x27;éªŒè¯æˆåŠŸ&#x27;            );        &#125;else if($ret == -1)&#123;            $result = array(                &#x27;code&#x27;=&gt;&#x27;-1&#x27;,                &#x27;ext&#x27;=&gt;&#x27;è¯·å…ˆè·å–éªŒè¯ç &#x27;            );        &#125;else if($ret == -2)&#123;            $result = array(                &#x27;code&#x27;=&gt;&#x27;-2&#x27;,                &#x27;ext&#x27;=&gt;&#x27;éªŒè¯ç è¶…æ—¶&#x27;            );        &#125;else if($ret == -3)&#123;            $result = array(                &#x27;code&#x27;=&gt;&#x27;-3&#x27;,                &#x27;ext&#x27;=&gt;&#x27;éªŒè¯ç é”™è¯¯&#x27;            );        &#125;        echo json_encode($result,JSON_UNESCAPED_UNICODE);    &#125;    public function reg()&#123;        if(!(isset($_POST[&#x27;username&#x27;])             &amp;&amp; isset($_POST[&#x27;password&#x27;])             &amp;&amp; isset($_POST[&#x27;password2&#x27;])            &amp;&amp; $_POST[&#x27;username&#x27;] !== &#x27;&#x27;            &amp;&amp; $_POST[&#x27;password&#x27;] !== &#x27;&#x27;            &amp;&amp; $_POST[&#x27;password2&#x27;] !== &#x27;&#x27;)        )&#123;            $result = array(                &#x27;code&#x27;=&gt;&#x27;-1&#x27;,                &#x27;ext&#x27;=&gt;&#x27;å‚æ•°ä¸èƒ½ä¸ºç©º&#x27;            );            echo json_encode($result,JSON_UNESCAPED_UNICODE);            return;        &#125;        $username = $_POST[&#x27;username&#x27;];        $password = $_POST[&#x27;password&#x27;];        $password2 = $_POST[&#x27;password2&#x27;];        if($password !== $password2)&#123;            $result = array(                &#x27;code&#x27;=&gt;&#x27;-2&#x27;,                &#x27;ext&#x27;=&gt;&#x27;ä¸¤æ¬¡å¯†ç ä¸åŒ&#x27;            );            echo json_encode($result,JSON_UNESCAPED_UNICODE);            return;        &#125;        $salt = \core\util\random::get_random_string(16);        $password = md5($password.$salt);        $data = array(            &#x27;username&#x27;=&gt;$username,            &#x27;password&#x27;=&gt;$password,            &#x27;salt&#x27;=&gt;$salt        );        $user = new \app\model\user();        $ret = $user-&gt;find_by_condition([&#x27;username&#x27;=&gt;$username]);        if($ret)&#123;            $result = array(                &#x27;code&#x27;=&gt;&#x27;-2&#x27;,                &#x27;ext&#x27;=&gt;&#x27;ç”¨æˆ·åå·²å­˜åœ¨&#x27;            );            echo json_encode($result,JSON_UNESCAPED_UNICODE);            return;        &#125;        $user_id = $user-&gt;add($data);        if($ret &gt;= 1)&#123;            $result = array(                &#x27;code&#x27;=&gt;&#x27;0&#x27;,                &#x27;user_id&#x27;=&gt;$user_id,                &#x27;ext&#x27;=&gt;&#x27;æ³¨å†ŒæˆåŠŸ&#x27;            );            echo json_encode($result,JSON_UNESCAPED_UNICODE);        &#125;    &#125;    public function login()&#123;        if(!(isset($_POST[&#x27;username&#x27;])             &amp;&amp; isset($_POST[&#x27;password&#x27;])            &amp;&amp; $_POST[&#x27;username&#x27;] !== &#x27;&#x27;            &amp;&amp; $_POST[&#x27;password&#x27;] !== &#x27;&#x27;)        )&#123;            $result = array(                &#x27;code&#x27;=&gt;&#x27;-1&#x27;,                &#x27;ext&#x27;=&gt;&#x27;å‚æ•°ä¸èƒ½ä¸ºç©º&#x27;            );            echo json_encode($result,JSON_UNESCAPED_UNICODE);            return;        &#125;        $username = $_POST[&#x27;username&#x27;];        $password = $_POST[&#x27;password&#x27;];        $user = new \app\model\user();        $ret = $user-&gt;find_by_condition([&#x27;username&#x27;=&gt;$username]);        if($ret)&#123;            $salt = $ret[&#x27;salt&#x27;];            $req_password = md5($password.$salt);            $real_password = $ret[&#x27;password&#x27;];            if($req_password == $real_password)&#123;                session_start();                $_SESSION[&#x27;user_id&#x27;] = $ret[&#x27;id&#x27;];                $result = array(                    &#x27;code&#x27;=&gt;&#x27;0&#x27;,                    &#x27;ext&#x27;=&gt;&#x27;ç™»å½•æˆåŠŸ&#x27;                );                echo json_encode($result,JSON_UNESCAPED_UNICODE);            &#125;        &#125;else&#123;            $result = array(                &#x27;code&#x27;=&gt;&#x27;-2&#x27;,                &#x27;ext&#x27;=&gt;&#x27;ç”¨æˆ·ä¸å­˜åœ¨&#x27;            );            echo json_encode($result,JSON_UNESCAPED_UNICODE);        &#125;    &#125;    public function logout()&#123;        session_start();        if(isset($_SESSION[&#x27;user_id&#x27;]))&#123;            unset($_SESSION[&#x27;user_id&#x27;]);            $result = array(                &#x27;code&#x27;=&gt;&#x27;0&#x27;,                &#x27;ext&#x27;=&gt;&#x27;ä¸‹çº¿æˆåŠŸ&#x27;            );            echo json_encode($result,JSON_UNESCAPED_UNICODE);        &#125;                &#125;    public function to_login()&#123;        $this-&gt;smarty-&gt;assign(&#x27;basepath&#x27;,$this-&gt;basepath);        $this-&gt;smarty-&gt;assign(&#x27;assets&#x27;,$this-&gt;assets);        $this-&gt;smarty-&gt;display(&#x27;bookmark/user/login.html&#x27;);    &#125;&#125;

å‰ç«¯å¦‚æœéœ€è¦è¯¦ç»†ä»£ç ï¼Œè¯·åˆ°æºç ä¸­æŸ¥çœ‹ï¼Œä¸‹é¢åªæè¿°æ€è·¯ã€‚1ã€å®ç°é™æ€é¡µé¢çš„æœ€ç»ˆæ•ˆæœï¼ŒåŒ…æ‹¬htmlã€csså’Œjsã€‚2ã€æŠŠé™æ€é¡µé¢æ”¹å†™ä¸ºsmartyé¡µé¢ã€‚3ã€ä½¿ç”¨postmanæµ‹è¯•å†™å¥½çš„æ³¨å†Œç™»å½•æ¥å£ã€‚4ã€æ‰“é€šå‰åç«¯ã€‚
è®¿é—®åœ°å€ï¼š http://vkphp.dev/bookmark/user/to_login ï¼Œå³å¯çœ‹åˆ°æ³¨å†Œç™»å½•é¡µé¢ã€‚
æºç åˆ†äº«https://github.com/voidking/vkphp/releases/tag/v1.6.0
ä¹¦ç­¾ä»é›¶å¼€å§‹æ‰“é€ è‡ªå·±çš„PHPæ¡†æ¶
sessionä¸PHPä¹‹session_start()
PHP sessionè¯¦è§£
]]></content>
      <categories>
        <category>engineering</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>æ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»é›¶å¼€å§‹æ‰“é€ è‡ªå·±çš„PHPæ¡†æ¶â€”â€”ç¬¬5ç« </title>
    <url>/dev-vkphp-5/</url>
    <content><![CDATA[ç›®æ ‡ä½¿ç”¨medooæ’ä»¶æ¥è¿æ¥å’Œæ“ä½œæ•°æ®åº“ã€‚


medooåŸºç¡€å®‰è£…medoo1ã€åœ¨composerä¸­æ·»åŠ ä¾èµ–ï¼š
&quot;catfan/medoo&quot;: &quot;*&quot;

2ã€æ›´æ–°ä¾èµ–composer update
ä½¿ç”¨medoo1ã€configç›®å½•æ·»åŠ medoo_config.phpä¸ºï¼š
&lt;?phpreturn array(    &#x27;database_type&#x27; =&gt; &#x27;mysql&#x27;,    &#x27;database_name&#x27; =&gt; &#x27;vkphp&#x27;,    &#x27;server&#x27; =&gt; &#x27;localhost&#x27;,    &#x27;username&#x27; =&gt; &#x27;root&#x27;,    &#x27;password&#x27; =&gt; &#x27;&#x27;,    &#x27;charset&#x27; =&gt; &#x27;utf8&#x27;,    &#x27;port&#x27; =&gt; 3306,// å¯é€‰å‚æ•°    &#x27;prefix&#x27; =&gt; &#x27;vk_&#x27;,// å¯é€‰ï¼Œå®šä¹‰è¡¨çš„å‰ç¼€);

2ã€coreç›®å½•æ·»åŠ medoo.phpä¸ºï¼š
&lt;?phpnamespace core;class medoo extends \Medoo\Medoo&#123;    public function __construct()&#123;        $conf = \core\conf::all(&#x27;medoo_config&#x27;);        parent::__construct($conf);    &#125;&#125;

3ã€app/ctrl/indexCtrl.phpä¸­æ·»åŠ å‡½æ•°ï¼š
public function medoo()&#123;    $medoo = new \core\medoo();    dump($medoo);&#125;

è®¿é—® http://vkphp.dev/index/medoo ï¼Œå³å¯çœ‹åˆ°medooçš„ç›¸å…³ä¿¡æ¯ã€‚
å¢åˆ æŸ¥æ”¹æŸ¥æ‰¾$ret = $medoo-&gt;select(&#x27;user&#x27;,&#x27;*&#x27;,[&#x27;username&#x27;=&gt;&#x27;voidking&#x27;]);dump($ret);

æ’å…¥$data = array(    &#x27;username&#x27;=&gt;&#x27;voidking1&#x27;,    &#x27;password&#x27;=&gt;&#x27;voidking1&#x27;);$ret = $medoo-&gt;insert(&#x27;user&#x27;,$data);dump($ret);
å› ä¸ºmedooçš„ç‰ˆæœ¬é—®é¢˜ï¼ˆ1.4.5ï¼‰ï¼Œæ­¤æ—¶å¹¶æ²¡æœ‰æ‰“å°å‡ºè¿™æ¡è®°å½•çš„idï¼Œè€Œæ˜¯PDOStatement objectã€‚æ­¤æ—¶ï¼Œè¦æƒ³è·å–è®°å½•idï¼Œæœ‰ä¸¤ä¸ªæ–¹æ¡ˆï¼š
æ–¹æ¡ˆä¸€ï¼šä»medooä¸­è·å–
dump($medoo-&gt;id());

æ–¹æ¡ˆäºŒï¼šæ‰¾åˆ°vender/catfan/medoo/src/Medoo.phpçš„ç¬¬1173è¡Œï¼Œä¿®æ”¹ä¸º
$this-&gt;exec(&#x27;INSERT INTO &#x27; . $this-&gt;tableQuote($table) . &#x27; (&#x27; . implode(&#x27;, &#x27;, $fields) . &#x27;) VALUES &#x27; . implode(&#x27;, &#x27;, $stack), $map);return $this-&gt;pdo-&gt;lastInsertId();

åˆ é™¤$ret = $medoo-&gt;delete(&#x27;user&#x27;,[&#x27;username&#x27;=&gt;&#x27;voidking2&#x27;]);dump($ret-&gt;rowCount()); // å—å½±å“çš„è¡Œæ•°

ä¿®æ”¹$ret = $medoo-&gt;update(&#x27;user&#x27;,[&#x27;username&#x27;=&gt;&#x27;voidking2&#x27;],[&#x27;username&#x27;=&gt;&#x27;voidking1&#x27;]);dump($ret-&gt;rowCount());

medooè¿›é˜¶å›é¡¾yiiæ¡†æ¶ï¼Œå¯¹äºæ¯ä¸ªè¡¨ï¼Œæˆ‘ä»¬éƒ½è¦åˆ›å»ºä¸€ä¸ªmodelç±»ï¼Œç»§æ‰¿ActiveRecordç±»ã€‚æ¯”å¦‚ï¼š
&lt;?phpnamespace app\models;use yii\db\ActiveRecord;// Project.phpclass Project extends ActiveRecord&#123;    public static function model($className=__CLASS__)    &#123;        return parent::model($className);    &#125;    public function getTenProject()&#123;        // å…·ä½“å®ç°    &#125;&#125;

åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæ–°å»ºä¸€ä¸ªmodelå¯¹è±¡ï¼Œè°ƒç”¨å…¶ä¸­çš„æ–¹æ³•å³å¯ï¼š
$project = new Project();

thinkphpæ¡†æ¶ï¼Œå¯¹äºæ¯ä¸ªè¡¨ï¼Œæˆ‘ä»¬ä¸ç”¨åˆ›å»ºmodelç±»ã€‚åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥æ–°å»ºä¸€ä¸ªé»˜è®¤modelå¯¹è±¡ï¼Œä¼ å…¥è¡¨åï¼Œè°ƒç”¨å…¶ä¸­çš„æ–¹æ³•å³å¯ï¼š
$project = M(&#x27;project&#x27;);

å½“ç„¶ï¼Œthinkphpä¹Ÿå¯ä»¥è‡ªå®šä¹‰modelç±»ï¼Œç»§æ‰¿Modelç±»ã€‚æ¯”å¦‚ï¼š
&lt;?php// ProjectModel.class.phpclass ProjectModel extends Model&#123;    public function getTenProject()&#123;        // å…·ä½“å®ç°    &#125;&#125;

ä½¿ç”¨Dæ–¹æ³•æ–°å»ºè‡ªå®šä¹‰modelå¯¹è±¡ï¼Œæ‰¾ä¸åˆ°å®šä¹‰ç±»çš„æƒ…å†µä¸‹ä¼šè°ƒç”¨Mæ–¹æ³•ï¼š
$project = D(&#x27;project&#x27;);

yiiå’Œthinkphpçš„ä¸¤ç§å®ç°æ–¹æ¡ˆï¼Œå¼‚æ›²åŒå·¥ï¼ŒåŒæ ·éƒ½åŒ…å«äº†é»˜è®¤modelç±»å’Œè‡ªå®šä¹‰modelç±»ã€‚yiiä¸­ï¼Œé»˜è®¤modelç±»ä¸ºActiveRecordï¼Œå¦‚æœè¦è‡ªå®šä¹‰modelç±»ï¼Œç»§æ‰¿å®ƒå³å¯ã€‚thinkphpä¸­ï¼Œé»˜è®¤modelç±»ä¸ºModelï¼Œå¦‚æœè¦è‡ªå®šä¹‰modelç±»ï¼Œç»§æ‰¿å®ƒå³å¯ã€‚
model.phpé‰´äºyiiçš„å®ç°æ–¹å¼ï¼Œæˆ‘ä»¬ä¹Ÿæ¥æ–°å»ºä¸€ä¸ªmodelåŸºç±»ï¼Œå…¶ä»–çš„modelç±»éƒ½ç»§æ‰¿å®ƒã€‚
1ã€coreç›®å½•ä¸‹ï¼Œæ–°å»ºmodel.phpï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?phpnamespace core;class model extends \core\medoo&#123;    public $table_name = &#x27;&#x27;;    public function __construct($table_name)&#123;        $name_arr = explode(&#x27;\\&#x27;,$table_name);        $this-&gt;table_name = strtolower(end($name_arr));        parent::__construct();        //dump($this-&gt;table_name);    &#125;    public function list_all()&#123;        $ret = $this-&gt;select($this-&gt;table_name,&#x27;*&#x27;);        return $ret;    &#125;    public function find_by_id($id)&#123;        $ret = $this-&gt;select($this-&gt;table_name,&#x27;*&#x27;,[&#x27;id&#x27;=&gt;$id]);        return $ret;    &#125;    public function find_by_condition($condition)&#123;        $ret = $this-&gt;select($this-&gt;table_name,&#x27;*&#x27;,$condition);        return $ret;    &#125;    public function add($data)&#123;        $ret = $this-&gt;insert($this-&gt;table_name,$data);        return $this-&gt;id();    &#125;    public function del($condition)&#123;        $ret = $this-&gt;delete($this-&gt;table_name,$condition);        return $ret-&gt;rowCount(); // å—å½±å“çš„è¡Œæ•°    &#125;    public function edit($data,$condition)&#123;        $ret = $this-&gt;update($this-&gt;table_name,$data,$condition);        return $ret-&gt;rowCount();    &#125;&#125;

2ã€åœ¨app/modelç›®å½•ä¸­æ–°å»ºuser.phpï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?phpnamespace app\model;class user extends \core\model&#123;    public function __construct()&#123;        parent::__construct(__CLASS__);    &#125;&#125;

3ã€åœ¨app/ctrl/indexCtrl.phpä¸­æ·»åŠ å‡½æ•°ï¼š
$user = new \app\model\user();dump($user-&gt;list_all());dump($user-&gt;find_by_id(1));dump($user-&gt;find_by_condition([&#x27;username&#x27;=&gt;&#x27;voidking&#x27;]));dump($user-&gt;add([&#x27;username&#x27;=&gt;&#x27;voidking1&#x27;,&#x27;password&#x27;=&gt;&#x27;voidking1&#x27;]));dump($user-&gt;edit([&#x27;username&#x27;=&gt;&#x27;voidking2&#x27;],[&#x27;username&#x27;=&gt;&#x27;voidking1&#x27;]));dump($user-&gt;del([&#x27;username&#x27;=&gt;&#x27;voidking2&#x27;]));

è®¿é—® http://vkphp.dev/index/model ï¼Œå¯ä»¥çœ‹åˆ°æ“ä½œç»“æœï¼š
æ“ä½œå®Œæˆåï¼Œä¹Ÿè®¸ä¼šæ„Ÿè§‰æ•°æ®åº“è¡¨æ¯”è¾ƒä¹±ã€‚è¿™æ—¶å¯ä»¥æ¸…ç©ºè¡¨ï¼Œå¹¶ä¸”é‡æ–°ä»1å¼€å§‹è‡ªå¢idã€‚truncate vk_user;
å°ç»“è‡³æ­¤ï¼Œæ•´ä¸ªæ¡†æ¶å·²ç»åŸºæœ¬å®Œæˆã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¼šå¼€å‘ä¸€ä¸ªè¿·ä½ é¡¹ç›®ï¼Œåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæµ‹è¯•å¹¶æ”¹è¿›æˆ‘ä»¬çš„æ¡†æ¶ã€‚
æºç åˆ†äº«https://github.com/voidking/vkphp/releases/tag/v1.5.0
ä¹¦ç­¾ä»é›¶å¼€å§‹æ‰“é€ è‡ªå·±çš„PHPæ¡†æ¶
Medooå®˜æ–¹æ–‡æ¡£
Medooä¸­æ–‡æ–‡æ¡£
]]></content>
      <categories>
        <category>engineering</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>æ¡†æ¶</tag>
        <tag>medoo</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»é›¶å¼€å§‹æ‰“é€ è‡ªå·±çš„PHPæ¡†æ¶â€”â€”ç¬¬4ç« </title>
    <url>/dev-vkphp-4/</url>
    <content><![CDATA[ComposerComposer æ˜¯ PHP5.3ä»¥ä¸Š çš„ä¸€ä¸ªä¾èµ–ç®¡ç†å·¥å…·ã€‚å®ƒå…è®¸ä½ ç”³æ˜é¡¹ç›®æ‰€ä¾èµ–çš„ä»£ç åº“ï¼Œå®ƒä¼šåœ¨ä½ çš„é¡¹ç›®ä¸­ä¸ºä½ å®‰è£…ä»–ä»¬ã€‚Composer ä¸æ˜¯ä¸€ä¸ªåŒ…ç®¡ç†å™¨ã€‚æ˜¯çš„ï¼Œå®ƒæ¶‰åŠ â€œpackagesâ€ å’Œ â€œlibrariesâ€ï¼Œä½†å®ƒåœ¨æ¯ä¸ªé¡¹ç›®çš„åŸºç¡€ä¸Šè¿›è¡Œç®¡ç†ï¼Œåœ¨ä½ é¡¹ç›®çš„æŸä¸ªç›®å½•ä¸­ï¼ˆä¾‹å¦‚ vendorï¼‰è¿›è¡Œå®‰è£…ã€‚é»˜è®¤æƒ…å†µä¸‹å®ƒä¸ä¼šåœ¨å…¨å±€å®‰è£…ä»»ä½•ä¸œè¥¿ã€‚å› æ­¤ï¼Œè¿™ä»…ä»…æ˜¯ä¸€ä¸ªä¾èµ–ç®¡ç†ã€‚
æœ¬ç¯‡ï¼Œæˆ‘ä»¬å°±åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­ä½¿ç”¨composeræ¥è¿›è¡Œä¾èµ–ç®¡ç†ã€‚


å®‰è£…Composer1ã€è®¿é—®Composerä¸‹è½½åœ°å€ï¼Œä¸‹è½½å®‰è£…å¯¹åº”å¹³å°çš„composerï¼Œå®‰è£…æ–¹æ³•å‚ç…§å®˜æ–¹æ–‡æ¡£ã€‚
2ã€æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¾“å…¥composer -Vï¼Œæµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸã€‚
ä½¿ç”¨Composeråˆæ¬¡ä½¿ç”¨1ã€åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºcomposer.jsonï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&#123;    &quot;name&quot;: &quot;VKPHP&quot;,    &quot;description&quot;: &quot;A PHP Framework for php developer&quot;,    &quot;type&quot;: &quot;Framework&quot;,    &quot;keywords&quot;: [        &quot;PHP&quot;,&quot;PHP Framework&quot;,&quot;VKPHP&quot;    ],    &quot;homepage&quot;: &quot;http://www.voidking.com&quot;,    &quot;time&quot;: &quot;2017-09-14&quot;,    &quot;license&quot;: &quot;MIT&quot;,    &quot;authors&quot;: [&#123;        &quot;name&quot;: &quot;VoidKing&quot;,        &quot;email&quot;: &quot;voidking@qq.com&quot;,        &quot;homepage&quot;: &quot;http://www.voidking.com&quot;,        &quot;role&quot;: &quot;Student&quot;    &#125;],    &quot;require&quot;: &#123;        &quot;PHP&quot;: &quot;&gt;=5.3.0&quot;,        &quot;smarty/smarty&quot;: &quot;~3.1&quot;    &#125;&#125;

éœ€è¦è§£é‡Šçš„ï¼Œæ˜¯requireå­—æ®µï¼Œè¦æ±‚PHPå¤§äºç­‰äº5.3ï¼Œsmartyå¤§äºç­‰äº3.1ä¸”å°äºç­‰äº4.0ã€‚
ç‰ˆæœ¬å·é€‰æ‹©å‚ç…§ä¸‹è¡¨ï¼š
2ã€å®‰è£…ä¾èµ–åœ¨æ ¹ç›®å½•æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¾“å…¥composerï¼Œå¦‚æœcomposer.jsonæ–‡ä»¶æœ‰é”™è¯¯ä¼šå‡ºç°æç¤ºï¼Œæ²¡æœ‰é”™è¯¯åˆ™æç¤ºå¯é€‰å‚æ•°å’ŒåŠŸèƒ½ã€‚è¾“å…¥composer installï¼Œå³å¯å®‰è£…ä¾èµ–åˆ°vendorç›®å½•ä¸­ï¼Œå¹¶ä¸”è‡ªåŠ¨ç”Ÿæˆcomposer.lockå’Œvendor/autoload.phpã€‚
æ›´æ–°ä¾èµ–1ã€åœ¨composer.jsonä¸­æ·»åŠ ä¾èµ–ï¼Œwhoopsä»»æ„ç‰ˆæœ¬ï¼Œvar-dumperä»»æ„ç‰ˆæœ¬ã€‚
&quot;filp/whoops&quot;: &quot;*&quot;,&quot;symfony/var-dumper&quot;: &quot;*&quot;


2ã€å®‰è£…ä¾èµ–composer installï¼Œæç¤º
Loading composer repositories with package informationInstalling dependencies (including require-dev) from lock fileNothing to install or updateGenerating autoload files

ä»æç¤ºå¯ä»¥çœ‹å‡ºï¼Œcomposer installè¯»å–çš„æ˜¯composer.lockä¸­çš„ä¾èµ–ï¼Œè€Œä¸æ˜¯æœ€æ–°çš„composer.jsonã€‚
æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨å‘½ä»¤composer updateï¼Œè¿™æ ·å°±å¯ä»¥ä¸‹è½½æ–°å†™å…¥çš„ä¾èµ–ï¼Œå¹¶ä¸”æ›´æ–°composer.lockã€‚
æ›´æ¢Composeræºå¦‚æœåœ¨composer installæˆ–composer updateæ—¶éå¸¸æ…¢ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ›´æ¢Composeræºã€‚
è®¿é—®Composerä¸­å›½é•œåƒç«™ï¼Œå‚ç…§æ–‡æ¡£ï¼Œåœ¨composer.jsonæ‰€åœ¨ç›®å½•ä¸­æ‰§è¡Œï¼šcomposer config repo.packagist composer https://packagist.phpcomposer.com
æˆ–è€…ï¼Œç›´æ¥åœ¨composer.jsonä¸­æ·»åŠ ï¼š
&quot;repositories&quot;: &#123;    &quot;packagist&quot;: &#123;        &quot;type&quot;: &quot;composer&quot;,        &quot;url&quot;: &quot;https://packagist.phpcomposer.com&quot;    &#125;&#125;

ä½¿ç”¨ä¾èµ–smarty1ã€å½“å‰ï¼Œlibç›®å½•å’Œvendorç›®å½•ä¸­éƒ½åŒ…å«äº†smartyï¼Œä½¿ç”¨verdorä¸­çš„smartyä¼šæ›´æœ‰æ ¼è°ƒï¼Œé‚å¼ƒç”¨libç›®å½•ï¼Œæ”¹ç”¨vendorä½œä¸ºç¬¬ä¸‰æ–¹åº“ç›®å½•ã€‚
2ã€æ ¹ç›®å½•ä¸‹index.phpä¿®æ”¹ä¸ºï¼š
// define(&#x27;LIB&#x27;,VKPHP.&#x27;/lib&#x27;); //ç¬¬ä¸‰æ–¹åº“æ‰€åœ¨ç›®å½•define(&#x27;LIB&#x27;,VKPHP.&#x27;/vendor&#x27;); //ç¬¬ä¸‰æ–¹åº“æ‰€åœ¨ç›®å½•include LIB.&#x27;/autoload.php&#x27;; //è‡ªåŠ¨åŠ è½½ç¬¬ä¸‰æ–¹åº“

3ã€coreç›®å½•ä¸‹render.phpä¿®æ”¹ä¸ºï¼š
// require_once(LIB.&#x27;/smarty/libs/Smarty.class.php&#x27;);
å› ä¸ºindex.phpä¸­è‡ªåŠ¨åŠ è½½äº†æ‰€æœ‰ç¬¬ä¸‰æ–¹åº“ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å†éœ€è¦è‡ªå·±å¼•å…¥ã€‚
è®¿é—® http://vkphp.dev/index/render2 ï¼Œsmartyæ­£å¸¸å·¥ä½œã€‚
whoopsæ ¹ç›®å½•index.phpä¿®æ”¹ä¸ºï¼š
if(DEBUG)&#123;    ini_set(&#x27;display_errors&#x27;, &#x27;On&#x27;);    $whoops = new \Whoops\Run;    $whoops-&gt;pushHandler(new \Whoops\Handler\PrettyPageHandler);    $whoops-&gt;register();&#125;else&#123;    ini_set(&#x27;display_errors&#x27;, &#x27;Off&#x27;);&#125;

è®¿é—® http://vkphp.dev/index/render3 ï¼Œå³å¯çœ‹åˆ°ç‚«é…·çš„æŠ¥é”™é¡µé¢ï¼Œæ²¡é”™ï¼Œwhoopså°±æ˜¯ä¸€ä¸ªé”™è¯¯æ˜¾ç¤ºæ’ä»¶ã€‚
var-dumperä¿®æ”¹app/ctrl/indexCtrl.phpä¸­çš„dataå‡½æ•°ä¸ºï¼š
public function data()&#123;    $db = new \core\db();    $sql = &#x27;select * from vk_user&#x27;;    $result = $db-&gt;query($sql);    dump($result);    dump($result-&gt;fetchAll());&#125;

è®¿é—® http://vkphp.dev/index/data ï¼Œå³å¯çœ‹åˆ°ç‚«é…·çš„å˜é‡è¾“å‡ºé¡µé¢ï¼Œæ²¡é”™ï¼Œvar-dumperæ˜¯ä¸€ä¸ªå˜é‡æ˜¾ç¤ºæ’ä»¶ã€‚
æºç åˆ†äº«https://github.com/voidking/vkphp/releases/tag/v1.4.0
ä¹¦ç­¾ä»é›¶å¼€å§‹æ‰“é€ è‡ªå·±çš„PHPæ¡†æ¶
Composerä¸­æ–‡ç½‘
Composerä¸­æ–‡æ–‡æ¡£
]]></content>
      <categories>
        <category>engineering</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>æ¡†æ¶</tag>
        <tag>composer</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨lanproxyè¿›è¡Œå†…ç½‘ç©¿é€</title>
    <url>/dev-lanproxy/</url>
    <content><![CDATA[å†…ç½‘ç©¿é€ã€Šå¾®ä¿¡æœ¬åœ°è°ƒè¯•ã€‹ä¸€æ–‡ä¸­ï¼ŒéƒåŒå­¦æåˆ°äº†ä½¿ç”¨ngrokã€natappå’ŒèŠ±ç”Ÿå£³è¿›è¡Œå†…ç½‘ç©¿é€ã€‚ä½†æ˜¯ï¼Œæƒ³è¦ä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼Œéƒ½æ˜¯è¦æ”¶è´¹çš„ã€‚
æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬è¦æ­å»ºä¸€ä¸ªå…è´¹çš„å†…ç½‘ç©¿é€æœåŠ¡å™¨ã€‚å†…ç½‘ç©¿é€æœåŠ¡å™¨ï¼Œå¯é€‰çš„è½¯ä»¶æœ‰lanproxyã€frpã€n2nç­‰ç­‰ï¼Œä»Šå¤©æˆ‘ä»¬é€‰æ‹©çš„æ˜¯lanproxyã€‚


å‡†å¤‡1ã€ä¸€å°å…¬ç½‘æœåŠ¡å™¨ï¼ˆè¿è¡Œproxy-serverï¼‰ã€‚2ã€ä¸€å°å†…ç½‘pcæˆ–æœåŠ¡å™¨ï¼ˆè¿è¡Œproxy-clientï¼‰ã€‚
æœåŠ¡ç«¯é…ç½®å®‰è£…javaå‚è€ƒã€Šå…¨å¹³å°å®‰è£…JDKã€‹ã€‚
å®‰è£…lanproxy1ã€è®¿é—®lanproxyä¸‹è½½åœ°å€ï¼Œä¸‹è½½proxy-server-0.1.zipï¼Œä¸Šä¼ åˆ°å…¬ç½‘æœåŠ¡å™¨ã€‚
æˆ–è€…ï¼Œç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šä¸‹è½½
wget https://github.com/ffay/lanproxy/files/1274739/proxy-server-0.1.zipcurl -C - -O -L https://github.com/ffay/lanproxy/files/1274739/proxy-server-0.1.zip

2ã€è§£å‹å®‰è£…
unzip proxy-server-0.1.zipmv proxy-server-0.1 /usr/local/

3ã€ä¿®æ”¹é…ç½®æ–‡ä»¶vim /usr/local/proxy-server-0.1/conf/config.propertiesä¿®æ”¹ç®¡ç†å‘˜çš„ç”¨æˆ·åå’Œå¯†ç ã€‚
4ã€å¯åŠ¨æœåŠ¡
cd /usr/local/proxy-server-0.1/binchmod +x startup.sh./startup.sh

5ã€è®¿é—® http://host_ip:8090 ï¼Œå³å¯çœ‹åˆ°ç™»å½•ç•Œé¢ã€‚
nginxåå‘ä»£ç†1ã€æ·»åŠ åŸŸåè§£ælocalåˆ°å…¬ç½‘ipã€‚
2ã€åœ¨nginxè™šæ‹Ÿä¸»æœºé…ç½®ç›®å½•ä¸­ï¼Œæ·»åŠ local.voidking.com.confï¼Œå†…å®¹å¦‚ä¸‹ï¼š
server &#123;    listen 80;    server_name local.voidking.com;    charset utf-8;    location /&#123;        proxy_set_header   Host             $host;        proxy_set_header   X-Real-IP        $remote_addr;        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;        client_max_body_size       1024m;        client_body_buffer_size    128k;        client_body_temp_path      data/client_body_temp;        proxy_connect_timeout      90;        proxy_send_timeout         90;        proxy_read_timeout         90;        proxy_buffer_size          4k;        proxy_buffers              4 32k;        proxy_busy_buffers_size    64k;        proxy_temp_file_write_size 64k;        proxy_temp_path            data/proxy_temp;                proxy_pass http://127.0.0.1:8090;    &#125;&#125;

3ã€æµ‹è¯•nginx./nginx -tï¼Œä¹Ÿè®¸ä¼šæç¤ºç¼ºå°‘ç›®å½•ï¼Œé‚£ä¹ˆæ–°å»ºç›®å½•ã€‚mkdir -p /usr/local/nginx/data/client_body_temp
mkdir -p /usr/local/nginx/data/proxy_temp
4ã€é‡å¯nginx./nginx -s reload
5ã€è®¿é—® http://local.voidking.com/ ï¼Œå³å¯çœ‹åˆ°ç™»å½•ç•Œé¢ã€‚
ä½¿ç”¨æœåŠ¡ç«¯é…ç½®1ã€ç™»å½•lanproxyï¼Œæ·»åŠ å®¢æˆ·ç«¯ï¼Œè¾“å…¥å®¢æˆ·ç«¯å¤‡æ³¨åç§°ï¼Œç”Ÿæˆéšæœºå¯†é’¥ï¼Œæäº¤æ·»åŠ ã€‚
2ã€å®¢æˆ·ç«¯åˆ—è¡¨ä¸­ï¼Œé…ç½®ç®¡ç†ä¸­ï¼Œéƒ½ä¼šå‡ºç°æ–°æ·»åŠ çš„å®¢æˆ·ç«¯ã€‚
3ã€å•å‡»é…ç½®ç®¡ç†ä¸­çš„å®¢æˆ·ç«¯ï¼Œæ·»åŠ é…ç½®ï¼ˆæ¯ä¸ªå®¢æˆ·ç«¯å¯ä»¥æ·»åŠ å¤šä¸ªé…ç½®ï¼‰ã€‚

ä»£ç†åç§°ï¼Œæ¨èè¾“å…¥å®¢æˆ·ç«¯è¦ä»£ç†å‡ºå»çš„ç«¯å£ï¼Œæˆ–è€…æ˜¯å®¢æˆ·ç«¯æƒ³è¦å‘å¸ƒåˆ°å…¬ç½‘çš„é¡¹ç›®åç§°ã€‚
å…¬ç½‘ç«¯å£ï¼Œå¡«å…¥ä¸€ä¸ªæœåŠ¡å™¨ç©ºé—²ç«¯å£ï¼Œç”¨æ¥è½¬å‘è¯·æ±‚ç»™å®¢æˆ·ç«¯ã€‚
ä»£ç†IPç«¯å£ï¼Œå¡«å…¥å®¢æˆ·ç«¯ç«¯å£ï¼Œå…¬ç½‘ä¼šè½¬å‘è¯·æ±‚ç»™è¯¥å®¢æˆ·ç«¯ç«¯å£ã€‚

å®¢æˆ·ç«¯é…ç½®1ã€è®¿é—®lanproxyä¸‹è½½åœ°å€ï¼Œä¸‹è½½proxy-client-0.1.zipï¼Œè§£å‹åˆ°å–œæ¬¢çš„ç›®å½•ã€‚
2ã€è¿›å…¥proxy-client-0.1/confç›®å½•ï¼Œä¿®æ”¹config.propertiesä¸ºï¼š
#ä¸åœ¨proxy-serveré…ç½®åå°åˆ›å»ºå®¢æˆ·ç«¯æ—¶å¡«å†™çš„ç§˜é’¥ä¿æŒä¸€è‡´ï¼›æ²¡æœ‰æœåŠ¡å™¨å¯ä»¥ç™»å½• https://lanproxy.org/ åˆ›å»ºå®¢æˆ·ç«¯è·å–ç§˜é’¥client.key=7533f855416741d88732954991668715ssl.enable=truessl.jksPath=test.jksssl.keyStorePassword=123456#è¿™é‡Œå¡«å†™å®é™…çš„proxy-serveråœ°å€ï¼›æ²¡æœ‰æœåŠ¡å™¨é»˜è®¤å³å¯ï¼Œè‡ªå·±æœ‰æœåŠ¡å™¨çš„æ›´æ¢ä¸ºè‡ªå·±çš„proxy-serverï¼ˆIPï¼‰åœ°å€server.host=local.voidking.com#proxy-server sslé»˜è®¤ç«¯å£4993ï¼Œé»˜è®¤æ™®é€šç«¯å£4900#ssl.enable=trueæ—¶è¿™é‡Œå¡«å†™sslç«¯å£ï¼Œssl.enable=falseæ—¶è¿™é‡Œå¡«å†™æ™®é€šç«¯å£server.port=4993

3ã€è¿›å…¥proxy-client-0.1/binç›®å½•ï¼ŒåŒå‡»startup.batï¼Œå³å¯å¯åŠ¨lanproxyå®¢æˆ·ç«¯ã€‚
å¦‚æœå¯åŠ¨å¤±è´¥ï¼Œä¸€èˆ¬æ˜¯å› ä¸ºjdkæ²¡æœ‰å®‰è£…é…ç½®æˆåŠŸï¼Œå‚è€ƒã€ŠIDEAçš„å¸¸ç”¨é…ç½®ã€‹ä¸­çš„å®‰è£…jdkï¼Œå®‰è£…é…ç½®jdkåå†æ¬¡å¯åŠ¨å³å¯ã€‚
4ã€è®¿é—®åœ°å€ http://local.voidking.com:50000/ ï¼Œå³å¯çœ‹åˆ°æœ¬åœ°è®¿é—®å®¢æˆ·ç«¯80ç«¯å£ç›¸åŒçš„é¡µé¢ã€‚
è‡³æ­¤ï¼Œä»£ç†æˆåŠŸï¼
è¿›é˜¶é…ç½®ä¸€ä¸ªç«¯å£ä¸€ä¸ªé¡¹ç›®å‡è®¾ï¼Œæˆ‘ä»¬æœ¬åœ°çš„4000ç«¯å£å¼€å¯äº†nodeæœåŠ¡ã€‚é‚£ä¹ˆï¼Œæ€ä¹ˆæŠŠè¿™ä¸ªæœåŠ¡ä¼˜é›…åœ°æä¾›ç»™æ•´ä¸ªäº’è”ç½‘ï¼Ÿ
1ã€æœåŠ¡ç«¯æ·»åŠ é…ç½®
2ã€å¯åŠ¨æœ¬åœ°nodeæœåŠ¡
3ã€å·²ç»å¯åŠ¨lanproxyå®¢æˆ·ç«¯ï¼Œè®¿é—® http://local.voidking.com:50001/
æ­¤æ—¶ï¼Œæ•´ä¸ªäº’è”ç½‘éƒ½èƒ½è®¿é—®åˆ°è¿™ä¸ªnodeé¡¹ç›®ï¼Œä½†æ˜¯ï¼Œå¸¦ç€ç«¯å£å·å¾ˆä¸å‹å¥½ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬å°±ç»™è¿™ä¸ªé¡¹ç›®æ·»åŠ ä¸€ä¸ªå•ç‹¬çš„åŸŸåã€‚
1ã€æ·»åŠ åŸŸåè§£ænode.localåˆ°å…¬ç½‘ipã€‚
2ã€åœ¨nginxè™šæ‹Ÿä¸»æœºé…ç½®ç›®å½•ä¸­ï¼Œæ·»åŠ node.local.voidking.com.confï¼Œå†…å®¹å¦‚ä¸‹ï¼š
server &#123;    listen 80;    server_name node.local.voidking.com;    charset utf-8;    location /&#123;        proxy_set_header   Host             $host;        proxy_set_header   X-Real-IP        $remote_addr;        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;        client_max_body_size       1024m;        client_body_buffer_size    128k;        client_body_temp_path      data/client_body_temp;        proxy_connect_timeout      90;        proxy_send_timeout         90;        proxy_read_timeout         90;        proxy_buffer_size          4k;        proxy_buffers              4 32k;        proxy_busy_buffers_size    64k;        proxy_temp_file_write_size 64k;        proxy_temp_path            data/proxy_temp;                proxy_pass http://127.0.0.1:50001;    &#125;&#125;

3ã€é‡å¯nginx./nginx -s reload
4ã€è®¿é—®åœ°å€ http://node.local.voidking.com/ ï¼Œå³å¯çœ‹åˆ°æœ¬åœ°nodeæœåŠ¡ã€‚
ä¸€ä¸ªç«¯å£å¤šä¸ªé¡¹ç›®1ã€é€šè¿‡æˆ‘ä»¬å¼€æ”¾å‡ºçš„80ç«¯å£ï¼Œå¯ä»¥è®¿é—®webæ ¹ç›®å½•ä¸‹çš„å¾ˆå¤šé¡¹ç›®ï¼Œæ¯”å¦‚åœ¨å…¶ä»–æ–‡ç« ä¸­æåˆ°è¿‡çš„basicé¡¹ç›®å’Œvkphpé¡¹ç›®ï¼Œä¸‹æ–‡ä»¥vkphpé¡¹ç›®ä¸ºä¾‹ã€‚
2ã€å½“å‰ï¼Œvkphpé¡¹ç›®é¦–é¡µæ˜¯ç®€å•çš„æ–‡å­—æ˜¾ç¤ºã€‚
3ã€é€šè¿‡å¤–ç½‘è®¿é—®çš„åœ°å€ä¸º http://local.voidking.com:50000/vkphp
æ­¤æ—¶ï¼Œæ•´ä¸ªäº’è”ç½‘éƒ½èƒ½è®¿é—®åˆ°è¿™ä¸ªvkphpé¡¹ç›®ï¼Œä½†æ˜¯ï¼Œå¸¦ç€ç«¯å£å·å’Œé¡¹ç›®åï¼Œæ„Ÿè§‰åƒæ˜¯ä¸ªæ¬ºè¯ˆç½‘ç«™ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬èƒ½å¦ç»™è¿™ä¸ªé¡¹ç›®æ·»åŠ ä¸€ä¸ªå•ç‹¬çš„åŸŸåå‘¢ï¼Ÿå½“ç„¶ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚
1ã€æ·»åŠ åŸŸåè§£ævkphp.localåˆ°å…¬ç½‘ipã€‚
2ã€åœ¨nginxè™šæ‹Ÿä¸»æœºé…ç½®ç›®å½•ä¸­ï¼Œæ·»åŠ vkphp.local.voidking.com.confï¼Œå†…å®¹å¦‚ä¸‹ï¼š
server &#123;    listen 80;    server_name vkphp.local.voidking.com;    charset utf-8;    location /&#123;        proxy_set_header   Host             $host;        proxy_set_header   X-Real-IP        $remote_addr;        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;        client_max_body_size       1024m;        client_body_buffer_size    128k;        client_body_temp_path      data/client_body_temp;        proxy_connect_timeout      90;        proxy_send_timeout         90;        proxy_read_timeout         90;        proxy_buffer_size          4k;        proxy_buffers              4 32k;        proxy_busy_buffers_size    64k;        proxy_temp_file_write_size 64k;        proxy_temp_path            data/proxy_temp;                proxy_pass http://127.0.0.1:50000;    &#125;&#125;

3ã€é‡å¯nginx./nginx -s reload
4ã€æ‰“å¼€æœ¬åœ°apacheçš„http-vhosts.confï¼Œæ·»åŠ é…ç½®ï¼š
&lt;VirtualHost *:80&gt; #laragon magic!    DocumentRoot &quot;C:/laragon/www/vkphp/&quot;    ServerName vkphp.local.voidking.com    ServerAlias vkphp.local.voidking.com&lt;/VirtualHost&gt;

5ã€é‡å¯æœ¬åœ°apache
6ã€è®¿é—®åœ°å€ http://vkphp.local.voidking.com/ ï¼Œå³å¯çœ‹åˆ°æœ¬åœ°vkphpé¡¹ç›®ã€‚
æœ‰è¶£çš„æ˜¯ï¼Œè®¿é—®æ—¶è¯¥åœ°å€ä¼šè‡ªåŠ¨åœ¨åé¢åŠ ä¸Švkphpï¼Œæˆä¸º http://vkphp.local.voidking.com/vkphp/
ç»“è¯­ç”±ä¸Šé…ç½®æˆ‘ä»¬å‘ç°ï¼Œnginxçš„åå‘ä»£ç†éå¸¸å¥½ç”¨ã€‚ç¨å¾®è°ƒæ•´ï¼Œä¾¿å¯ä»¥é€‚åº”å¤§å¤šæ•°é¡¹ç›®ï¼Œå®åœ¨æ˜¯ç¾åŒ–urlçš„ç¥å™¨ï¼Œå“‡å’”å’”ã€‚
éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨centos7ä½œä¸ºlanproxyå¤–ç½‘æœåŠ¡å™¨çš„æ—¶å€™ï¼Œæ— æ³•ä»£ç†å†…ç½‘æœåŠ¡å™¨çš„22ç«¯å£ã€‚æ‰€æœ‰çš„sshè¿æ¥è¯·æ±‚éƒ½è¢«centos7å½“åšæ¶æ„è¯·æ±‚è‡ªå·±å¤„ç†äº†ï¼Œå¹¶ä¸ä¼šè½¬å‘åˆ°å†…ç½‘ã€‚è€Œä½¿ç”¨ubuntu16ä½œä¸ºlanproxyå¤–ç½‘æœåŠ¡å™¨ï¼Œå°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚å¾ˆç¥å¥‡ï¼Œæ²¡æœ‰æ‰¾åˆ°åŸå› ã€‚
ä¹¦ç­¾lanproxyæºç åœ°å€
ä¸šä½™è‰æ¨èä¸€æ¬¾å±€åŸŸç½‘ï¼ˆå†…ç½‘ï¼‰ç©¿é€å·¥å…·lanproxy
frpæºç åœ°å€
frpä¸­æ–‡æ–‡æ¡£
ä½¿ç”¨frpå®ç°å†…ç½‘ç©¿é€
n2næºç åœ°å€
n2nå†…ç½‘ç©¿é€ç¥å™¨(ä¸€æ¡å‘½ä»¤å®ç°ç©¿é€)
n2nå†…ç½‘ç©¿é€ç¥å™¨
]]></content>
      <categories>
        <category>engineering</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>nginx</tag>
        <tag>apache</tag>
        <tag>å†…ç½‘ç©¿é€</tag>
        <tag>ä»£ç†</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»é›¶å¼€å§‹æ‰“é€ è‡ªå·±çš„PHPæ¡†æ¶â€”â€”ç¬¬3ç« </title>
    <url>/dev-vkphp-3/</url>
    <content><![CDATA[ç›®æ ‡æœ¬ç¯‡ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æœ‰ä¸‰ä¸ªï¼š

è°ƒæ•´é¡¹ç›®ç»“æ„
åŠ è½½é…ç½®ç±»
æ·»åŠ æ—¥å¿—ç±»



è°ƒæ•´é¡¹ç›®ç»“æ„vkphpâ”œâ”€appâ”‚  â”œâ”€ctrlâ”‚  â”œâ”€modelâ”‚  â”œâ”€smartyâ”‚  â””â”€viewâ”œâ”€configâ”œâ”€coreâ”œâ”€libâ”œâ”€logâ””â”€public


appå†…åŒ…å«æ§åˆ¶å™¨ã€æ•°æ®åº“modelã€smartyæ¨¡æ¿ã€æ™®é€šæ¸²æŸ“æ¨¡æ¿ã€‚
configå†…åŒ…å«å…¨å±€é…ç½®æ–‡ä»¶ã€‚
coreå†…åŒ…å«æ¡†æ¶çš„æ ¸å¿ƒæ–‡ä»¶ã€‚
libå†…åŒ…å«ç¬¬ä¸‰æ–¹åº“ã€‚
logå†…å­˜æ”¾æ—¥å¿—æ–‡ä»¶ã€‚
publicåŒ…å«é™æ€èµ„æºæ–‡ä»¶ã€‚

åŠ è½½é…ç½®ç±»æˆ‘ä»¬ä¹‹å‰çš„è·¯ç”±é…ç½®ã€æ•°æ®åº“é…ç½®éƒ½æ˜¯å†™åœ¨ç¨‹åºä¸­çš„ï¼Œä¿®æ”¹èµ·æ¥ä¸æ–¹ä¾¿ï¼Œä¸‹é¢æˆ‘ä»¬æŠŠè¿™äº›é…ç½®éƒ½æ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚
conf.phpåœ¨coreç›®å½•ä¸­ï¼Œæ–°å»ºconf.phpï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?phpnamespace core;class conf&#123;    public function get($name,$file)&#123;        /**         * 1ã€åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨         * 2ã€åˆ¤æ–­é…ç½®æ˜¯å¦å­˜åœ¨         */        $file_path = CONFIG.&#x27;/&#x27;.$file.&#x27;.php&#x27;;        if(is_file($file_path))&#123;            $conf = include $file_path;            if(isset($conf[$name]))&#123;                    return $conf[$name];            &#125;else&#123;                throw new \Exception(&#x27;æ²¡æœ‰é…ç½®é¡¹&#x27;.$name);            &#125;        &#125;else&#123;            throw new \Exception(&#x27;æ‰¾ä¸åˆ°é…ç½®æ–‡ä»¶&#x27;.$file);        &#125;    &#125;    public function all($file)&#123;        $file_path = CONFIG.&#x27;/&#x27;.$file.&#x27;.php&#x27;;        if(is_file($file_path))&#123;            $conf = include $file_path;            return $conf;        &#125;else&#123;            throw new \Exception(&#x27;æ‰¾ä¸åˆ°é…ç½®æ–‡ä»¶&#x27;.$file);        &#125;    &#125;&#125;

é…ç½®ç±»åœ¨configç›®å½•ä¸­ï¼Œæ–°å»ºé…ç½®æ–‡ä»¶route_config.phpå’Œdb_config.phpã€‚
&lt;?phpreturn array(    &#x27;CTRL&#x27;=&gt;&#x27;index&#x27;,    &#x27;ACTION&#x27;=&gt;&#x27;index&#x27;);

&lt;?phpreturn array(    &#x27;DSN&#x27;=&gt;&#x27;mysql:host=localhost;dbname=vkphp&#x27;,    &#x27;USER&#x27;=&gt;&#x27;root&#x27;,    &#x27;PASSWD&#x27;=&gt;&#x27;&#x27;);

ä½¿ç”¨ä¿®æ”¹coreç›®å½•ä¸­çš„route.phpå’Œdb.phpã€‚
&lt;?php/** * è·¯ç”±æ§åˆ¶ */namespace core;class route&#123;    public $ctrl=&#x27;index&#x27;;    public $action=&#x27;index&#x27;;    public $params=array();    public function __construct()&#123;        //echo &#x27;route is ready!&#x27;;        /**         * 1ã€éšè—index.php         * 2ã€è·å–URLä¸­çš„æ§åˆ¶å™¨å’Œæ–¹æ³•         * 3ã€è·å–URLä¸­çš„å‚æ•°         */        $this-&gt;ctrl = \core\conf::get(&#x27;CTRL&#x27;,&#x27;route_config&#x27;);        $this-&gt;action = \core\conf::get(&#x27;ACTION&#x27;,&#x27;route_config&#x27;);        // å…¶ä»–ä¸å˜&#125;

&lt;?phpnamespace core;class db extends \PDO&#123;    public function __construct()&#123;        $conf = \core\conf::all(&#x27;db_config&#x27;);        $dsn = $conf[&#x27;DSN&#x27;];        $user = $conf[&#x27;USER&#x27;];        $passwd = $conf[&#x27;PASSWD&#x27;];        try&#123;            parent::__construct($dsn,$user,$passwd);            // echo &#x27;database connect success&#x27;;        &#125;catch (\Exception $e)&#123;            echo $e-&gt;getMessage();        &#125;    &#125;&#125;

æ·»åŠ æ—¥å¿—ç±»log.phpåœ¨coreç›®å½•ï¼Œæ·»åŠ log.phpæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?phpnamespace core;class log&#123;    public function log($message,$file_name)&#123;        $log_path = LOG.&#x27;/&#x27;.$file_name.&#x27;-&#x27;.date(&#x27;YmdHis&#x27;).&#x27;.log&#x27;;        $message = date(&#x27;Y-m-d H:i:s&#x27;).&#x27; &#x27;.$message;        file_put_contents($log_path,json_encode($message));    &#125;&#125;

ä½¿ç”¨åœ¨indexCtrl.phpä¸­ï¼Œæ·»åŠ ï¼š
public function log()&#123;    $log = new \core\log();    $log-&gt;log(&#x27;this is log&#x27;,&#x27;log_test&#x27;);    echo &#x27;æˆåŠŸå†™å…¥æ—¥å¿—&#x27;;&#125;

è®¿é—® http://vkphp.dev/index/log ï¼Œå³å¯åœ¨logç›®å½•ä¸‹ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ã€‚å¦‚æœæ—¶é—´ä¸æ­£ç¡®ï¼Œå°±åœ¨php.iniä¸­æœç´¢ date.timezone ï¼Œç„¶åä¿®æ”¹æ—¶åŒºä¸ºï¼š
data.timezone=&quot;Asia/Shanghai&quot;

æˆ–è€…ï¼Œç›´æ¥åœ¨ç¨‹åºä»£ç ä¸­ä½¿ç”¨å‡½æ•°ini_set(&#39;date.timezone&#39;,&#39;Asia/Shanghai&#39;); ï¼Œæˆ–è€…date_default_timezone_set(â€˜Asia/Shanghai&#39;); ã€‚
æºç åˆ†äº«https://github.com/voidking/vkphp/releases/tag/v1.3.0
ä¹¦ç­¾ä»é›¶å¼€å§‹æ‰“é€ è‡ªå·±çš„PHPæ¡†æ¶
]]></content>
      <categories>
        <category>engineering</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>æ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title>HBuilder AndroidçœŸæœºè°ƒè¯•</title>
    <url>/dev-hbuilder-android-debug/</url>
    <content><![CDATA[å…³äºè°ƒè¯•éš¾è€…ä¸ä¼šï¼Œä¼šè€…ä¸éš¾ã€‚å¯¹äºè°ƒè¯•ï¼Œè¿™å¥è¯å°¤å…¶åˆé€‚ã€‚æ— è®ºæ˜¯å‰ç«¯è°ƒè¯•ã€Javaè°ƒè¯•ã€PHPè°ƒè¯•ã€Pythonè°ƒè¯•ï¼Œè¿˜æ˜¯æˆ‘ä»¬è¿™æ¬¡è¦ç ”ç©¶çš„HBuilder AndroidçœŸæœºè°ƒè¯•ï¼Œéƒ½æ˜¯ä¸€ä¸ªé“ç†ã€‚æ¬²é€Ÿåˆ™ä¸è¾¾ï¼Œç£¨åˆ€ä¸è¯¯ç æŸ´å·¥ã€‚èŠ±ç‚¹æ—¶é—´ï¼Œç£¨ä¸€ç£¨è°ƒè¯•è¿™æŠŠåˆ€ã€‚


ç¯å¢ƒå‡†å¤‡1ã€å®‰è£…å¥½Hbuilderã€‚
2ã€å®‰è£…å¥½chromeã€‚
3ã€ç”µè„‘å®‰è£…å¥½360æ‰‹æœºåŠ©æ‰‹ã€‚
4ã€Androidæ‰‹æœºå’Œè¿æ¥çº¿ã€‚
å¯åŠ¨è°ƒè¯•æ¨¡å¼ä»¥é­…æ—pro6så’Œè£è€€6ä¸ºä¾‹ã€‚
é­…æ—pro6s1ã€è®¾ç½®ï¼Œå…³äºæ‰‹æœºï¼Œåœ¨â€œç‰ˆæœ¬å·â€çš„é¡¹ç›®æ é‡Œï¼Œè¿ç»­ç‚¹å‡»7æ¬¡ï¼Œå°±ä¼šæç¤ºå¼€å¯å¼€å‘äººå‘˜é€‰é¡¹ã€‚
2ã€å›åˆ°è®¾ç½®ç•Œé¢ï¼Œè¾…åŠ©åŠŸèƒ½ï¼Œç‚¹è¿›å»å³å¯çœ‹åˆ°â€œå¼€å‘äººå‘˜é€‰é¡¹â€ï¼Œè¿›å…¥â€œå¼€å‘äººå‘˜é€‰é¡¹â€å°±å¯ä»¥æ‰“å¼€â€œUSBè°ƒè¯•â€äº†ã€‚
3ã€åœ¨å¼€å‘äººå‘˜é€‰é¡¹ç•Œé¢ä¸­ï¼Œä¸‹æ‹‰åˆ°æœ€åï¼Œæ€§èƒ½ä¼˜åŒ–ï¼Œé«˜çº§æ—¥å¿—è¾“å‡ºï¼Œé€‰æ‹©å…¨éƒ¨å…è®¸ã€‚
è‡³æ­¤ï¼Œé­…æ—pro6sè°ƒè¯•æ¨¡å¼å¯åŠ¨æˆåŠŸã€‚ç„¶è€Œï¼ŒéƒåŒå­¦åœ¨è°ƒè¯•æ—¶ï¼Œå¯ä»¥å¯åŠ¨åº”ç”¨ï¼Œä½†æ˜¯æ— æ³•ä½¿ç”¨console.log()ã€‚
åœ¨æ‹¨å·é¡µï¼Œè¾“å…¥*#*#3646633#*#*ï¼Œè¿›å…¥å·¥ç¨‹æ¨¡å¼ï¼Œä¾§æ»‘åˆ°Log and Debuggingï¼ŒDebug Utilsï¼Œè°ƒè¯•ç­‰çº§è°ƒæˆEngineer Modeã€‚ç„¶è€Œï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆç”¨å¤„ã€‚
å¤‡ä»½HBuilder\tools\adbsä¸­çš„adb.exeã€AdbWinApi.dllã€AdbWinUsbApi.dllï¼Œç„¶åå¤åˆ¶HBuilder\tools\adbs\1.0.31ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œç²˜è´´åˆ°HBuilder\tools\adbsç›®å½•ä¸­ã€‚ç„¶è€Œï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆç”¨å¤„ã€‚
å¥½å§ï¼Œæˆ‘çš„é­…æ—pro6sæœ‰ä¸ªå‘ï¼Œé‚å¼ƒç”¨ã€‚ã€‚ã€‚
è£è€€61ã€è®¾ç½®ï¼Œå…³äºæ‰‹æœºï¼Œåœ¨â€œç‰ˆæœ¬å·â€çš„é¡¹ç›®æ é‡Œï¼Œè¿ç»­ç‚¹å‡»7æ¬¡ï¼Œå°±ä¼šæç¤ºè¿›å…¥å¼€å‘è€…æ¨¡å¼ï¼›
2ã€å›åˆ°è®¾ç½®ç•Œé¢ï¼Œä¸‹æ‹‰å³å¯çœ‹åˆ°â€œå¼€å‘äººå‘˜é€‰é¡¹â€ã€‚
3ã€ç‚¹å‡»å¼€å‘äººå‘˜é€‰é¡¹ç•Œé¢é‡Œï¼Œç‚¹å‡»å¼€å‘äººå‘˜é€‰é¡¹åé¢çš„æ»‘å—ï¼Œå³å¯å¼€å¯å¼€å‘äººå‘˜æ¨¡å¼ã€‚
4ã€å¼€å‘äººå‘˜é€‰é¡¹ç•Œé¢é‡Œï¼Œä¸‹æ‹‰æ‰“å¼€â€œUSBè°ƒè¯•â€ã€‚
å¯é€‰æ“ä½œï¼š1ã€åœ¨æ‹¨å·é¡µï¼Œè¾“å…¥*#*#2846579#*#*ï¼Œè¿›å…¥å·¥ç¨‹èœå•ã€‚
2ã€åå°è®¾ç½®ï¼ŒLogè®¾ç½®ï¼Œç‚¹å‡»å‹¾é€‰éœ€è¦çš„æ—¥å¿—ã€‚
è°ƒè¯•æµç¨‹1ã€æ‰‹æœºè¿æ¥åˆ°ç”µè„‘ä¸Šã€‚
2ã€å¯åŠ¨360æ‰‹æœºåŠ©æ‰‹ï¼Œè¿æ¥æ‰‹æœºï¼Œç„¶åå¯åŠ¨360æ¼”ç¤ºã€‚
3ã€å¯åŠ¨HBuilderï¼Œctrl+Rï¼Œåœ¨æ‰‹æœºä¸Šè¿è¡Œåº”ç”¨ã€‚
4ã€å¯åŠ¨chromeï¼Œåœ¨åœ°å€æ è¾“å…¥ chrome://inspect ï¼Œæ‰“å¼€è®¾å¤‡æ£€æŸ¥é¡µé¢ã€‚
file:///storage/emulated/0/Android/data/io.dcloud.HBuilder/.HBuilder/apps/HBuilder/www/pages/center/â€¦ ä»£è¡¨çš„æ˜¯è¯¥æ–‡ä»¶åœ¨Androidæ‰‹æœºä¸­çš„ä½ç½®ã€‚
5ã€ç‚¹å‡»â€œinspectâ€ï¼Œå³å¯æ‰“å¼€è¯¥é¡µé¢çš„è°ƒè¯•ã€‚å¦‚æœå¯åŠ¨äº†ä¸€ä¸ªç™½å±ç•Œé¢ï¼Œè¯´æ˜è¦ç¿»å¢™æ‰èƒ½ä½¿ç”¨ã€‚
6ã€ä¹‹åçš„è°ƒè¯•ï¼Œä¸å‰ç«¯è°ƒè¯•ç›¸åŒã€‚
7ã€æ ·å¼è°ƒæ•´ï¼Œæ‰“æ–­ç‚¹ï¼Œåœ¨é¡µé¢é€‰æ‹©å…ƒç´ ï¼ˆåœ¨è°ƒè¯•å™¨ä¸­é€‰æ‹©ï¼Œæˆ–è€…åœ¨360æ¼”ç¤ºä¸­é€‰æ‹©å‡å¯ï¼‰ã€‚ã€‚ã€‚
è‡³æ­¤ï¼Œå°±å¯ä»¥æ„‰å¿«åœ°è¿›è¡ŒAndroidçœŸæœºè°ƒè¯•äº†ã€‚
ä¹¦ç­¾HBuilderä¹‹Chromeè°ƒè¯•Androidæ‰‹æœºChromeè°ƒè¯•Androidåº”ç”¨ï¼ˆDebugï¼‰
]]></content>
      <categories>
        <category>engineering</category>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
        <tag>hbuilder</tag>
        <tag>chrome</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx URLå¤§å°å†™è½¬æ¢</title>
    <url>/dev-nginx-url-to-lowercase/</url>
    <content><![CDATA[urlå¤§å°å†™é—®é¢˜å°†Windowsä¸‹çš„é¡¹ç›®ï¼ˆå¦‚ï¼šphpï¼‰è¿ç§»åˆ°Linuxä¸‹ï¼Œç”±äºWindowsæ“ä½œç³»ç»Ÿä¸­ï¼Œæ–‡ä»¶åæ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ï¼›è€ŒLinuxç³»ç»Ÿæ˜¯å¤§å°å†™æ•æ„Ÿï¼Œä¼šå¯¼è‡´æœ‰äº›ç½‘é¡µå‡ºç°404æƒ…å†µã€‚é‚£ä¹ˆï¼Œæ€æ ·Nginxå®ç°urlè¯·æ±‚ä¸åŒºåˆ†å¤§å°å†™å‘¢ï¼Ÿè¿ç»´ç¬”è®°æä¾›äº†å››ç§è§£å†³æ–¹æ¡ˆï¼ŒéƒåŒå­¦é‡‡ç”¨å®‰è£…luaæ¨¡å—çš„æ–¹å¼ã€‚lua-nginx-moduleæ¥è‡ªå¤§ç‰›agentzhçš„å¼€æºé¡¹ç›®ï¼Œåœ¨Nginxä¸­åµŒå…¥Luaè¯­è¨€ï¼Œä½¿ä¹‹å¯ä»¥æ”¯æŒå¼ºå¤§Luaè¯­æ³•ã€‚


å®‰è£…lua1ã€ä¸‹è½½luawget http://luajit.org/download/LuaJIT-2.0.2.tar.gz
2ã€å®‰è£…luatar -xvzf LuaJIT-2.0.2.tar.gz
cd LuaJIT-2.0.2
make &amp;&amp; make install
3ã€é…ç½®luaåœ¨å½“å‰ç”¨æˆ·çš„homeç›®å½•ä¸‹ï¼Œç¼–è¾‘.bashrcï¼Œæ·»åŠ ï¼š
export LUAJIT_LIB=&quot;/usr/local/lib&quot;export LUAJIT_INC=&quot;/usr/local/include/luajit-2.0&quot;

ä½¿é…ç½®ç«‹å³ç”Ÿæ•ˆï¼Œsource .bashrc
ä¸‹è½½nginx1ã€æŸ¥çœ‹nginxç¼–è¯‘å®‰è£…æ—¶å®‰è£…äº†å“ªäº›æ¨¡å—/usr/local/nginx/sbin/nginx -V
ç»“æœä¸ºï¼š
nginx version: nginx/1.10.0built by gcc 4.4.7 20120313 (Red Hat 4.4.7-17) (GCC) built with OpenSSL 1.0.1e-fips 11 Feb 2013TLS SNI support enabledconfigure arguments: --user=www --group=www --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_v2_module --with-http_gzip_static_module --with-ipv6 --with-http_sub_module

2ã€ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„nginxwget http://nginx.org/download/nginx-1.10.0.tar.gz
3ã€è§£å‹tar -xvzf nginx-1.10.0.tar.gz
ä¸‹è½½nginx-lua1ã€åœ¨optç›®å½•ä¸‹ï¼Œä¸‹è½½nginx-luaæ¨¡å—wget https://github.com/simpl/ngx_devel_kit/archive/v0.2.19.tar.gz
wget https://github.com/chaoslawful/lua-nginx-module/archive/v0.10.2.tar.gz
2ã€è§£å‹æ¨¡å—tar -xvzf ngx_devel_kit-0.2.19.tar.gz
tar -xvzf lua-nginx-module-0.10.2.tar.gz
ç¼–è¯‘å®‰è£…nginx-lua1ã€è¿›å…¥nginxæºç ç›®å½•cd cd nginx-1.10.0
2ã€å‚è€ƒnginx -Vä¸­çš„å‚æ•°ï¼Œæ·»åŠ add-moduleç¼–è¯‘å‚æ•°ï¼š./configure --user=www --group=www --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_v2_module --with-http_gzip_static_module --with-ipv6 --with-http_sub_module --add-module=/opt/ngx_devel_kit-0.2.19 --add-module=/opt/lua-nginx-module-0.10.2
3ã€ç¼–è¯‘make
æ³¨æ„ï¼Œä¸€å®šä¸è¦make install
4ã€æ›¿æ¢nginxäºŒè¿›åˆ¶æ–‡ä»¶
cp /usr/local/nginx/sbin/nginx /usr/local/nginx/sbin/nginx.bak
service nginx stop
cp ./objs/nginx /usr/local/nginx/sbin/
5ã€é‡æ–°è¯»å–åº“æ–‡ä»¶ldconfig
6ã€å¯åŠ¨nginx/usr/local/nginx/sbin/nginx -t
service nginx start
nginx-luaä½¿ç”¨ä¿®æ”¹test.voidking.com.confæ–‡ä»¶ï¼š
location / &#123;      if ($uri ~ [A-Z])&#123;          rewrite_by_lua &#x27;return ngx.redirect(string.lower(ngx.var.uri),ngx.HTTP_MOVED_PERMANENTLY)&#x27;;      &#125;  &#125;  

ä¹¦ç­¾Nginxå®ç°urlè¯·æ±‚ä¸åŒºåˆ†å¤§å°å†™
å·²å®‰è£…nginxåŠ¨æ€æ·»åŠ æ¨¡å—
 error while loading shared libraries: libluajit-5.1.so.2
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQLå¸¸ç”¨å‘½ä»¤</title>
    <url>/dev-mysql-command/</url>
    <content><![CDATA[å‰è¨€mysqlæ˜¯éƒåŒå­¦ä½¿ç”¨æœ€å¤šçš„æ•°æ®åº“ï¼Œä½†æ˜¯æ¯æ¬¡è¦æ‰‹æ•²å‘½ä»¤ï¼Œè¿˜æ˜¯å¾—è°·æ­Œç™¾åº¦ã€‚å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œæœ¬æ–‡å¯¹å¸¸ç”¨mysqlå‘½ä»¤è¿›è¡Œä¸€äº›æ•´ç†ï¼Œæ–¹ä¾¿å†æ¬¡æ‹¾èµ·ã€‚


mysqlä¸­SQLè¯­å¥çš„å¤§å°å†™è§„åˆ™mysqlä¸­ï¼Œæ•°æ®åº“åã€è¡¨åã€åˆ—åã€ç´¢å¼•åã€SQLå…³é”®å­—ã€å‡½æ•°åéƒ½ä¸åŒºåˆ†å¤§å°å†™è¯¦æƒ…å‚è€ƒMySQLä¸­SQLè¯­å¥çš„å¤§å°å†™è§„åˆ™
æƒé™ç›¸å…³å‚è€ƒã€ŠMySQLé‡ç½®å¯†ç ã€‹ã€‚
æ•°æ®åº“ç›¸å…³åˆ›å»º/åˆ é™¤æ•°æ®åº“-- åˆ›å»ºæ•°æ®åº“create database vkdb default character set utf8 collate utf8_general_ci;-- åˆ é™¤æ•°æ®åº“drop database vkdb;

åˆ›å»º/åˆ é™¤ç”¨æˆ·-- åˆ›å»ºç”¨æˆ·create user &#x27;vkuser&#x27;@&#x27;%&#x27; identified by &#x27;vkpassword&#x27;;-- orinsert into mysql.user(Host,User,Password) values(&#x27;%&#x27;,&#x27;vkuser&#x27;,&#x27;vkpassword&#x27;);-- åˆ é™¤ç”¨æˆ·drop user &#x27;vkuser&#x27;;drop user &#x27;vkuser&#x27;@&#x27;192.168.56.101&#x27;;

æˆæƒæ•°æ®åº“ç»™ç”¨æˆ·-- æˆæƒæ•°æ®åº“ç»™ç”¨æˆ·grant all privileges on vkdb.* to &#x27;vkuser&#x27;@&#x27;%&#x27; with grant option;-- orinsert into mysql.user(HOST,Db,USER,Select_priv,Insert_priv,Update_priv,Delete_priv,Create_priv,Drop_priv)    VALUES(&#x27;%&#x27;,&#x27;vkdb&#x27;,&#x27;vkuser&#x27;,&#x27;Y&#x27;,&#x27;Y&#x27;,&#x27;Y&#x27;,&#x27;Y&#x27;,&#x27;Y&#x27;,&#x27;Y&#x27;);-- æˆæƒæ•°æ®åº“ç»™ç”¨æˆ·ï¼ŒåŒæ—¶æŒ‡å®šå¯†ç -- å±é™©ï¼è¿™æ¡å‘½ä»¤ä¼šåŒæ—¶ä¿®æ”¹vkuserçš„å¯†ç ï¼Œä¸åŒºåˆ†æ•°æ®åº“ï¼grant all privileges on vkdb.* to &#x27;vkuser&#x27;@&#x27;%&#x27; identified by &#x27;vkpassword2&#x27; with grant option; -- æˆæƒæ•°æ®åº“ç»™ç”¨æˆ·ï¼ŒåŒæ—¶æŒ‡å®šä¸»æœºå’Œå¯†ç -- åªæœ‰é€šè¿‡192.168.56.101è®¿é—®æ•°æ®åº“æ—¶ï¼Œä½¿ç”¨å¯†ç vkpassword2ï¼Œå…¶ä»–ä¸»æœºè®¿é—®æ•°æ®åº“æ—¶è¿˜æ˜¯ä½¿ç”¨vkpasswordgrant all privileges on vkdb.* to &#x27;vkuser&#x27;@&#x27;192.168.56.101&#x27; identified by &#x27;vkpassword2&#x27; with grant option;-- å–æ¶ˆæˆæƒrevoke all on vkdb.* from &#x27;vkuser&#x27;@&#x27;%&#x27;;-- æˆæƒç”¨æˆ·åªå…è®¸ç™»å½•æƒé™grant usage on *.* to &#x27;vkuser&#x27;@&#x27;%&#x27;;-- æŸ¥çœ‹ç”¨æˆ·å’Œæˆæƒshow grants for &#x27;vkuser&#x27;@&#x27;%&#x27;;select User,Host from mysql.user;

æ•°æ®è¡¨ç›¸å…³åˆ›å»º/åˆ é™¤æ•°æ®è¡¨-- åˆ›å»ºæ•°æ®è¡¨create table if not exists `user` (  `id` int(8) not null auto_increment,  `name` varchar(32) not null,  `password` varchar(32) not null default &#x27;&#x27;,  primary key (id)) engine=innodb default charset=utf8;-- æŸ¥çœ‹æ•°æ®è¡¨describe table user;-- åˆ é™¤æ•°æ®è¡¨drop table `user`;-- åˆ é™¤æ‰€æœ‰æ•°æ®è¡¨select concat(&#x27;drop table &#x27;,table_name,&#x27;;&#x27;) FROM information_schema.`TABLES` WHERE table_schema=&#x27;vkdb&#x27;;


æ·»åŠ /ä¿®æ”¹/åˆ é™¤column-- æ·»åŠ columnalter table `user` add column `deleted1` bool not null default false;-- ä¿®æ”¹columnalter table `user` change `deleted1` `deleted` bool not null default false;alter table `user` modify `deleted` int(1) not null default 0;alter table `user` modify column `deleted` int(1) not null default 0;-- åˆ é™¤columnalter table `user` drop `deleted`;alter table `user` drop column `deleted`;

è®¾ç½®unique-- è®¾ç½®uniquealter table `user` modify `name` varchar(32) not null unique;alter table `user` modify column `name` varchar(32) not null unique;

æ’å…¥/ä¿®æ”¹/åˆ é™¤æ•°æ®-- æ’å…¥æ•°æ®insert into `user` (`name`,`password`) values(&#x27;haojin&#x27;,&#x27;voidking&#x27;);-- ä¿®æ”¹æ•°æ®update `user` set password=&#x27;haojin&#x27; where name=&#x27;haojin&#x27;;-- åˆ é™¤æ•°æ®delete from `user` where name=&#x27;haojin&#x27;;

æŸ¥è¯¢æ•°æ®-- æŸ¥è¯¢æ•°æ®select * from `user` where name=&#x27;haojin&#x27; and password=&#x27;voidking&#x27;;select * from `user` where name=&#x27;haojin&#x27; or password=&#x27;haojin&#x27;;select * from `user` where name&lt;&gt;&#x27;haojin0&#x27;;select * from `user` where name like &#x27;%ao%&#x27;;select * from `user` order by id asc;select * from `user` order by id desc;select * from `user` order by id desc limit 2;select * from `user` where unix_timestamp(update_time) &lt; unix_timestamp(&#x27;2020-03-01 10:14:51&#x27;);

æŸ¥çœ‹è¡¨æ˜¯å¦è¢«é”-- æŸ¥çœ‹è¡¨æ˜¯å¦è¢«é”SHOW OPEN TABLES;SHOW OPEN TABLES WHERE In_use &gt; 0;SHOW PROCESSLIST;SHOW TABLE STATUS LIKE &#x27;your_table_name&#x27;;

å¯¼å…¥å¯¼å‡ºæ•°æ®å¯¼å‡ºæ•°æ®åº“æ•°æ®mysqldump -uroot -ppassword vkdb &gt; /root/vkdb.sql

å¯¼å‡ºæ•°æ®åº“userè¡¨æ•°æ®mysqldump -uroot -ppassword vkdb user &gt; /root/user.sql

å¯¼å‡ºæ•°æ®åº“userè¡¨ç»“æ„mysqldump -uroot -ppassword -d vkdb user &gt; /root/user.sqlmysqldump -uroot -ppassword -d --add-drop-table vkdb user &gt; /root/user.sql

å¯¼å…¥æ•°æ®åº“æ•°æ®é€šè¿‡mysqlå‘½ä»¤å¯¼å…¥
mysql -uroot -ppassword vkdb &lt; /root/vkdb.sqlmysql -uroot -ppassword -f vkdb &lt; /root/vkdb.sql

æˆ–è€…ç™»å½•åˆ°mysqlåæ‰§è¡Œå¯¼å…¥
source /root/vkdb.sql;

csvæ•°æ®å¯¼å…¥ä½¿ç”¨dbeaverå¯¼å…¥csvæ•°æ®ï¼Œå¯ä»¥è‡ªåŠ¨åˆ›å»ºè¡¨ç»“æ„ã€‚
ä»binlogå¯¼å‡ºsqlè¯­å¥é¦–å…ˆç¡®ä¿mysql serverå¼€å¯äº†binlog
show variables like &#x27;%log_bin%&#x27;;

æœ¬åœ°å¯¼å‡ºï¼š
mysqlbinlog --base64-output=decode-rows -v --result-file=output.sql binlog.000001

binlogæ–‡ä»¶å¯èƒ½æ¯”è¾ƒå¤šï¼Œé€‰æ‹©æœ€è¿‘ä¿®æ”¹çš„é‚£ä¸ªå¯¼å‡ºã€‚
è¿œç¨‹å¯¼å‡ºï¼š
mysqlbinlog --read-from-remote-server --host=host_name --user=user_name --password=password --base64-output=decode-rows -v --result-file=output.sql -v binlog.000001

shellä¸­æ‰§è¡Œsql# shellä¸­ç›´æ¥æ‰§è¡Œsqlmysql -h 192.168.56.100 -uroot -pvoidking -D vkdb -e &quot;select * from user;&quot;

éœ€æ±‚ï¼šmysqlæ•°æ®åº“ï¼Œè·å–æ•°æ®åº“vkä¸­çš„appè¡¨ä¸­æ‰€æœ‰è®°å½•çš„nameï¼Œå†™å…¥åˆ° name.txt æ–‡ä»¶ã€‚
è„šæœ¬ï¼š
#!/bin/bashget_all_name=&quot;select name from app where app.deleted=0;&quot;all_name=$(mysql -h192.168.56.100 -uroot -pmypassword -s -e &quot;use vk;$&#123;get_all_name&#125;&quot;)echo &quot;$&#123;all_name&#125;&quot; &gt; name.txt

é«˜çº§å‘½ä»¤è”åˆæŸ¥è¯¢left joinï¼ˆå·¦è”æ¥ï¼‰ï¼šè¿”å›å·¦è¡¨ä¸­çš„æ‰€æœ‰è®°å½•ä»¥åŠå’Œå³è¡¨ä¸­çš„è”æ¥å­—æ®µç›¸ç­‰çš„è®°å½•ã€‚right joinï¼ˆå³è”æ¥ï¼‰ï¼šè¿”å›å³è¡¨ä¸­çš„æ‰€æœ‰è®°å½•ä»¥åŠå’Œå·¦è¡¨ä¸­çš„è”æ¥å­—æ®µç›¸ç­‰çš„è®°å½•ã€‚inner joinï¼ˆç­‰å€¼è”æ¥ï¼‰ï¼šåªè¿”å›ä¸¤ä¸ªè¡¨ä¸­è”æ¥å­—æ®µç›¸ç­‰çš„è®°å½•ã€‚
ä¾‹å­ï¼šæŸ¥è¯¢ç”¨æˆ·è¡¨ï¼ˆuserï¼‰ä¸­çš„ç”¨æˆ·åï¼ˆnameï¼‰å’Œç”¨æˆ·è¯¦ç»†è¡¨ï¼ˆuser_detailï¼‰ä¸­çš„ç”¨æˆ·æ‰‹æœºå·ç ï¼ˆtelephoneï¼‰ã€‚
select user.name, user_detail.telephonefrom user inner join user_detailon user.id=user_detail.user_idwhere user.id=1;-- orselect U1.name, U2.telephonefrom user as U1 inner join user_detail as U2on U1.id=U2.user_idwhere U1.id=1;

è”åˆæŸ¥è¯¢3å¼ è¡¨ä¾‹å­ï¼šæŸ¥è¯¢ç”¨æˆ·è¡¨ï¼ˆuserï¼‰ä¸­çš„ç”¨æˆ·åï¼ˆnameï¼‰ã€ç”¨æˆ·è§’è‰²è¡¨ï¼ˆroleï¼‰ä¸­çš„è§’è‰²åï¼ˆnameï¼‰ã€ç”¨æˆ·è¯¦ç»†è¡¨ï¼ˆuser_detailï¼‰ä¸­çš„ç”¨æˆ·æ‰‹æœºå·ç ï¼ˆtelephoneï¼‰ã€‚
select user.name, user_detail.telephone, role.namefrom user left join roleon user.role_id=role.idleft join user_detailon user.id=user_detail.user_idwhere user.id=1;

æŸ¥è¯¢é‡å¤è®°å½•éœ€æ±‚ï¼šæŸ¥è¯¢userè¡¨ä¸­çš„é‡åè®°å½•
select * from user where name in (select name from user group by name having count(name) &gt; 1);

æ›¿æ¢å­—ç¬¦ä¸²éœ€æ±‚ï¼šç”¨æˆ·è¡¨ï¼ˆuserï¼‰çš„ä¸ªæ€§ç­¾åå­—æ®µï¼ˆinfoï¼‰æ˜¯å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ä¸­éƒ½åŒ…å«â€œmy name is haojinâ€ï¼Œç°åœ¨éœ€è¦æŠŠâ€œmy name is haojinâ€éƒ½æ›¿æ¢æˆâ€œmy name is voidkingâ€ã€‚
update user set info=replace(info,&quot;my name is haojin&quot;,&quot;my name is voidking&quot;) where info like &quot;%my name is haojin%&quot;;

æ‹¼æ¥å‘½ä»¤ä¾‹å­ï¼šæ ¹æ®æ‰‹æœºå·17625160000æŸ¥è¯¢ç”¨æˆ·ï¼Œç»™è¯¥ç”¨æˆ·æ·»åŠ å¦å¤–ä¸€ä¸ªæ‰‹æœºå·17625160001ï¼Œæ‰‹æœºå·ç”¨é€—å·åˆ†éš”ã€‚
select name,mobiles from user where mobiles like &quot;%17625160000%&quot;;-- æŸ¥è¯¢å‡ºname=&quot;haojin&quot;,mobiles=&quot;17625160000&quot;update user set mobiles=&quot;17625160000,17625160001&quot; where name=&quot;haojin&quot;;

æ›´ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨concatæ‹¼æ¥ï¼š
select CONCAT(&#x27;update user set mobiles=&quot;&#x27;,mobiles,&#x27;,17625161201&quot; where name=&quot;&#x27;,name,&#x27;&quot;;&#x27;) from user where mobiles like &quot;%17625160000%&quot;;

å‡è®¾æœ‰å¾ˆå¤šç”¨æˆ·éœ€è¦å¦å¤–æ·»åŠ æ‰‹æœºå·ï¼Œä½¿ç”¨æ‹¼æ¥çš„æ–¹å¼ä¹Ÿå¾ˆéº»çƒ¦ï¼Œæ­¤æ—¶éœ€è¦å€ŸåŠ©shellè„šæœ¬ã€‚å·²æœ‰æ–‡æœ¬mobiles.txtï¼Œå†…å®¹ä¸ºï¼š
17625160000 1762516000117625160002 17625160003

ç¼–å†™shellè„šæœ¬ä¸ºï¼š
#!/bin/bash grep -v &quot;^$&quot; mobiles.txt | while read linedo  old=`echo $line | awk &#x27;&#123;print $1&#125;&#x27;`  new=`echo $line | awk &#x27;&#123;print $2&#125;&#x27;`  echo &quot;select CONCAT(&#x27;update user set mobiles=\&quot;&#x27;,mobiles,&#x27;,$&#123;new&#125;\&quot; where name=\&quot;&#x27;,name,&#x27;\&quot;;&#x27;) from user where mobiles like \&quot;%$&#123;old&#125;%\&quot;;&quot;done

å®šæ—¶å¤‡ä»½éœ€æ±‚ï¼šæ¯å¤©è‡ªåŠ¨å¤‡ä»½æ•°æ®åº“ã€‚1ã€æµ‹è¯•å‘½ä»¤
/usr/bin/mysqldump -h 127.0.0.1 -uroot -pvoidking vkdb &gt; /root/vkdb-`date +%Y%m%d-%H%M%S`.sql

2ã€æµ‹è¯•å®šæ—¶ä»»åŠ¡
crontab -e

å†™å…¥æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡çš„å®šæ—¶ä»»åŠ¡ï¼š
# backup vkdbdb* * * * * /usr/bin/mysqldump -h 127.0.0.1 -uroot -pvoidking vkdb &gt; /root/vkdb-`date +\%Y\%m\%d-\%H\%M\%S`.sql

æŸ¥çœ‹æ‰§è¡Œç»“æœæ˜¯å¦æ­£å¸¸ï¼Œå¦‚æœä¸æ­£å¸¸ï¼Œé€šè¿‡crontabæ—¥å¿—æ’æŸ¥ï¼š
tail -f /var/log/cron

3ã€ç¡®è®¤å®šæ—¶ä»»åŠ¡
# backup vkdbdb0 0 * * * /usr/bin/mysqldump -h 127.0.0.1 -uroot -pvoidking vkdb &gt; /root/vkdb-`date +\%Y\%m\%d-\%H\%M\%S`.sql

]]></content>
      <categories>
        <category>engineering</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨HBuilderå¼€å‘ç§»åŠ¨APP</title>
    <url>/dev-hbuilder-app/</url>
    <content><![CDATA[å‰è¨€HBuilderæ˜¯DCloudï¼ˆæ•°å­—å¤©å ‚ï¼‰æ¨å‡ºçš„ä¸€æ¬¾æ”¯æŒHTML5çš„Webå¼€å‘IDEã€‚HBuilderçš„ç¼–å†™ç”¨åˆ°äº†Javaã€Cã€Webå’ŒRubyã€‚HBuilderæœ¬èº«ä¸»ä½“æ˜¯ç”±Javaç¼–å†™ï¼Œå®ƒåŸºäºEclipseï¼Œæ‰€ä»¥é¡ºå…¶è‡ªç„¶åœ°å…¼å®¹äº†Eclipseçš„æ’ä»¶ã€‚å¿«ï¼Œæ˜¯HBuilderçš„æœ€å¤§ä¼˜åŠ¿ï¼Œé€šè¿‡å®Œæ•´çš„è¯­æ³•æç¤ºå’Œä»£ç è¾“å…¥æ³•ã€ä»£ç å—ç­‰ï¼Œå¤§å¹…æå‡HTMLã€jsã€cssçš„å¼€å‘æ•ˆç‡ã€‚
å†…ç½®MUIæ¡†æ¶ï¼ŒçœŸæ­£å½»åº•çš„è·¨å¹³å°å¼€å‘ï¼Œä¸æ˜¯ç®€å•çš„è·¨iOSå’ŒAndroidã€‚åŸºäºmuiï¼Œä¸€å¥—HTML5å·¥ç¨‹ï¼Œé€šè¿‡å‰ç«¯æ„å»ºå·¥å…·ï¼ˆå¦‚gruntï¼‰æ¡ä»¶ç¼–è¯‘ï¼Œå¯åŒæ—¶å‘è¡Œåˆ°iOS Appstoreã€å®‰å“å„å¤§åº”ç”¨å•†åº—ã€æ™®é€šæ‰‹æœºæµè§ˆå™¨ã€å¾®ä¿¡Appå’Œæµåº”ç”¨ã€‚å¹¶ä¸”åœ¨æ¯ä¸ªå¹³å°ä¸Šï¼Œéƒ½èƒ½è°ƒç”¨è¯¥å¹³å°çš„ä¸“æœ‰APIè¾¾åˆ°åŸç”Ÿä½“éªŒã€‚


ç¯å¢ƒå‡†å¤‡javaå‚è€ƒã€Šå…¨å¹³å°å®‰è£…JDKã€‹ã€‚
Androidæ¨¡æ‹Ÿå™¨ä¸‹è½½SDK1ã€è®¿é—®AndroidDevToolsï¼Œä¸‹è½½android-sdkã€‚è®°ä½ï¼Œä¸è¦å»å®‰å“å®˜ç½‘ä¸‹è½½ï¼Œä¸è¦å»å®‰å“å®˜ç½‘ä¸‹è½½ï¼Œä¸è¦å»å®‰å“å®˜ç½‘ä¸‹è½½ã€‚å› ä¸ºå®‰å“å®˜ç½‘ä¸‹è½½çš„ï¼Œè§£å‹ååªæœ‰toolsæ–‡ä»¶å¤¹ï¼Œæ²¡æœ‰AVD Managerå’ŒSDK Managerã€‚
2ã€å¯åŠ¨SDK Managerï¼Œä¸‹è½½å¦‚ä¸‹æ–‡ä»¶ã€‚ï¼ˆ1ï¼‰Toolsç›®å½•ï¼ˆå¿…é¡»çš„å·¥å…·ï¼‰ï¼š

Android SDK Toolsï¼ˆå¿…é¡»ï¼Œåªéœ€ä¸‹è½½ä¸€ä¸ªç‰ˆæœ¬ï¼Œä¸€èˆ¬é€‰æœ€æ–°ç‰ˆæœ¬ï¼‰ï¼šåŸºç¡€å·¥å…·åŒ…ï¼Œç‰ˆæœ¬å·å¸¦rcå­—æ ·çš„æ˜¯é¢„è§ˆç‰ˆã€‚
Android SDK Platform-toolsï¼ˆå¿…é¡»ï¼Œåªéœ€ä¸‹è½½ä¸€ä¸ªç‰ˆæœ¬ï¼Œä¸€èˆ¬é€‰æœ€æ–°ç‰ˆæœ¬ï¼‰ï¼šä»android2.3å¼€å§‹åˆ’å‡ºæ­¤ç›®å½•ï¼Œå­˜æ”¾å…¬ç”¨å¼€å‘å·¥å…·ï¼Œæ¯”å¦‚adbã€sqlite3ç­‰ï¼Œè¢«åˆ’åˆ†åˆ°äº†è¿™é‡Œã€‚
Android SDK Build-toolsï¼ˆå¿…é¡»ï¼Œå¯ä»¥å®‰è£…å¤šä¸ªç‰ˆæœ¬ï¼‰ï¼šAndroidé¡¹ç›®æ„å»ºå·¥å…·ã€‚

ï¼ˆ2ï¼‰Android xxxï¼ˆAPI xxï¼‰ç›®å½•ï¼ˆå¯é€‰çš„å„å¹³å°å¼€å‘å·¥å…·ï¼‰ï¼š

Documentation for Android Sdkï¼ˆå¯é€‰ï¼‰ï¼šå®‰å“å¼€å‘è€…å®˜ç½‘çš„ä¸€äº›ç¦»çº¿æ–‡æ¡£ï¼Œä¸è¿‡ä¸‹è½½ä¸‹æ¥æ‰“å¼€ä¹Ÿå¾ˆæ…¢ï¼Œåé¢ä¼šæä¾›å¦å¤–ä¸€ä¸ªç¦»çº¿ç‰ˆã€‚
SDK Platformï¼ˆå¿…é¡»ï¼‰ï¼šå¯¹åº”å¹³å°çš„å¼€å‘å·¥å…·ï¼Œéœ€è¦åœ¨å“ªä¸ªç‰ˆæœ¬çš„å¹³å°ä¸‹å¼€å‘å°±ä¸‹è½½å“ªä¸ªã€‚
Samples for SDKï¼ˆå¯é€‰ï¼Œæ­¤é¡¹åœ¨é«˜ç‰ˆæœ¬toolsä¸­å·²ä¸æä¾›ï¼Œéœ€è¦åœ¨IDEé‡Œé€šè¿‡Import Sampleå¼•å…¥ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¸‹è½½ç¦»çº¿ç‰ˆï¼‰ï¼šå†…ç½®çš„å®‰å“ç¤ºä¾‹ç¨‹åºï¼Œæ¨èå®‰è£…ã€‚
Sources for Android SDKï¼ˆå¯é€‰ï¼‰ï¼šå®‰å“APIçš„æºä»£ç ï¼Œæ¨èå®‰è£…ã€‚
xxxxxxxx  Imageï¼ˆå¯é€‰ï¼‰ï¼šå„ä¸ªä»¥Imageç»“å°¾çš„ä¸œè¥¿æ˜¯æ”¯æŒç›¸åº”å¹³å°çš„æ¨¡æ‹Ÿå™¨ï¼Œä¸€èˆ¬é€‰æ‹©Intel x86 Atom_64 System Imageã€‚

ï¼ˆ3ï¼‰Extrasç›®å½•ï¼ˆå¯é€‰çš„æ‰©å±•ï¼‰ï¼š

Android Support Librariesï¼ˆéœ€è¦ï¼Œé«˜ç‰ˆæœ¬toolsä¸­å·²ä¸è§äº†ï¼Œåº”è¯¥æ˜¯é›†æˆåˆ°äº†åˆ«çš„åœ°æ–¹ï¼‰ï¼šåœ¨ä½ç‰ˆæœ¬å¹³å°å®ç°é«˜ç‰ˆæœ¬å¹³å°æ§ä»¶æ•ˆæœæ—¶æä¾›æ”¯æŒã€‚
Android Support Repositoryï¼ˆéœ€è¦ï¼‰ï¼šä¸»è¦æ˜¯æ–¹ä¾¿åœ¨gradleä¸­ä½¿ç”¨Android Support Librariesï¼Œå› ä¸ºGoogleå¹¶æ²¡æœ‰æŠŠè¿™äº›åº“å‘å¸ƒåˆ°maven centeræˆ–è€…jcenterå»ï¼Œè€Œæ˜¯ä½¿ç”¨äº†Googleè‡ªå·±çš„mavenä»“åº“ã€‚
Intel x86 Emulator Accelerator(HAXM installer)ï¼ˆå¯é€‰ï¼Œä½†éå¸¸éœ€è¦ï¼Œéœ€è¦CPUæ”¯æŒè™šæ‹ŸåŒ–æŠ€æœ¯æ”¯æŒï¼‰ï¼šwindowså¹³å°çš„Intel x86æ¨¡æ‹Ÿå™¨åŠ é€Ÿå·¥å…·ï¼Œé…åˆIntel x86 atom/atom_64 System Imageä½¿ç”¨å¯åŠ å¿«æ¨¡æ‹Ÿå™¨çš„è¿è¡Œé€Ÿåº¦ã€‚

åˆ›å»ºè™šæ‹Ÿæœº1ã€å¯åŠ¨AVD Managerï¼Œåˆ›å»ºä¸€ä¸ªå®‰å“è™šæ‹Ÿæœºã€‚
2ã€å¯åŠ¨åˆ›å»ºçš„è™šæ‹Ÿæœºã€‚
ä¹Ÿè®¸ä¼šå¯åŠ¨å¤±è´¥ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š
Starting emulator for AVD &#x27;android7.0&#x27;emulator: ERROR: x86_64 emulation currently requires hardware acceleration!Please ensure Intel HAXM is properly installed and usable.CPU acceleration status: HAXM is not installed on this machine

3ã€å†æ¬¡æ‰“å¼€SDK Managerï¼Œå‘ç°Intel x86 Emulator Acceleratorï¼ˆHAXM installerï¼‰çš„çŠ¶æ€æ˜¯Not Compatible with Windowsã€‚
4ã€æœç´¢â€œHardware_Accelerated_Execution_Managerâ€ï¼Œæ‰¾åˆ°Intelå®˜æ–¹ä¸‹è½½åœ°å€ï¼Œä¸‹è½½haxm-windows_v6_2_0.zipã€‚
5ã€è§£å‹haxm-windows_v6_2_0.zipï¼Œæ”¾åˆ°SDK/extras/intel/ç›®å½•ä¸‹ï¼Œç„¶ååŒå‡»silent_install.batã€‚
6ã€å†æ¬¡å¯åŠ¨è™šæ‹Ÿæœºï¼ŒæˆåŠŸï¼
HBuilder1ã€è®¿é—®Hbuilderå®˜ç½‘ï¼Œä¸‹è½½HBuilderã€‚
2ã€è§£å‹HBuilderï¼Œæ”¾åœ¨ä¸€ä¸ªå–œæ¬¢çš„ç›®å½•ã€‚
helloworld1ã€æ‰“å¼€HBuilderï¼Œæ–‡ä»¶ï¼Œæ–°å»ºï¼Œç§»åŠ¨Appã€‚
2ã€åº”ç”¨åç§°å¡«å…¥helloworldï¼Œæ¨¡æ¿é€‰æ‹©Hello muiï¼Œå®Œæˆã€‚
3ã€å•å‡»å·¥å…·æ çš„ä¸‰è§’å·ï¼Œåœ¨æ‰‹æœºè®¾å¤‡ä¸Šè¿è¡Œ/åœæ­¢ç§»åŠ¨è®¾å¤‡ã€‚
4ã€å¦‚æœå·²ç»å¯åŠ¨äº†å®‰å“è™šæ‹Ÿæœºï¼Œç†è®ºä¸Šä¼šå‡ºç°è™šæ‹Ÿæœºçš„é€‰é¡¹ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°çš„è¯ï¼Œç›´æ¥ctrl+Rä¹Ÿå¯ä»¥åœ¨è™šæ‹Ÿæœºä¸Šå¯åŠ¨åº”ç”¨ã€‚
ä¹¦ç­¾ä½¿ç”¨HBuilderå¼€å‘ç§»åŠ¨APPï¼šå¼€å‘ç¯å¢ƒå‡†å¤‡
DCloudæ–‡æ¡£
Androidç¦»çº¿æ‰“åŒ…
IOSç¦»çº¿æ‰“åŒ…
å¦‚ä½•å®‰è£…é…ç½®æ‰‹æœºæ¨¡æ‹Ÿå™¨
7ä¸ªæœ€ä½³çš„Androidæ¨¡æ‹Ÿå™¨
Android SDK Managerå’ŒAVD Managerä½¿ç”¨
Androidå®˜ç½‘
Android Studio &amp;&amp; SDKä¸‹è½½åœ°å€
sdkmanagerä½¿ç”¨è¯´æ˜
åœ¨ Android Emulator ä¸Šè¿è¡Œåº”ç”¨
]]></content>
      <categories>
        <category>engineering</category>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
        <tag>hbuilder</tag>
        <tag>ios</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginxå…¥é—¨ç¯‡</title>
    <url>/dev-nginx-start/</url>
    <content><![CDATA[Nginxæ˜¯ä»€ä¹ˆï¼ŸNginx (engine x) æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„HTTPé™æ€é¡µé¢æœåŠ¡å™¨ï¼Œæ›´æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„åå‘ä»£ç†æœåŠ¡å™¨ï¼ŒåŒæ—¶è¿˜å¯ä»¥ä½œä¸ºIMAP/POP3/SMTPä»£ç†æœåŠ¡å™¨ã€‚
ç»å¸¸ä½¿ç”¨NginxæœåŠ¡å™¨ï¼Œè¿›è¡Œä¸€äº›ç®€å•é…ç½®ï¼Œä½†åªæ˜¯ä»ç½‘ä¸Šç…§æŠ„ï¼ŒçŸ¥å…¶ç„¶ä¸çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚æœ¬æ–‡ï¼Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ ä¸€ä¸‹nginxçš„ç›®å½•ç»“æ„å’ŒåŸºç¡€è§„åˆ™ï¼Œè¡¥ä¸€è¡¥nginxåŸºç¡€ã€‚


å®‰è£…Nginxlinuxä¸­å®‰è£…nginxï¼Œå‚è€ƒæ–‡æ¡£ã€ŠCentOS7è®¾ç½®Nginxå¼€æœºè‡ªå¯åŠ¨ã€‹
dockerå®‰è£…nginxï¼Œå‚è€ƒæ–‡æ¡£ã€Šä½¿ç”¨Dockerå®‰è£…é…ç½®Nginxã€‹
ç›®å½•ç»“æ„å› ä¸ºnginxç›®å½•æ˜¯å¯ä»¥æŒ‡å®šçš„ï¼Œæ‰€ä»¥çœŸå®ä½¿ç”¨çš„ç›®å½•ç»“æ„è¯·ä»¥å‘½ä»¤æŸ¥çœ‹ã€‚
ps aux | grep nginx

ç¨‹åºç›®å½•å¯èƒ½çš„ç¨‹åºç›®å½•ï¼š
/usr/sbin/nginx

é…ç½®ç›®å½•å¯èƒ½çš„é»˜è®¤é…ç½®ç›®å½•ï¼š
/etc/nginx//etc/nginx/conf

nginx.confä¸€èˆ¬æ”¾åœ¨è¿™ä¸¤ä¸ªç›®å½•ä¸­ï¼Œnginx.confä¸­ä¼šå†™æ¸…æ¥šå­é…ç½®ç›®å½•ï¼Œæ¯”å¦‚ï¼š
http &#123;    include /etc/nginx/conf.d/*.conf;&#125;
é‚£ä¹ˆï¼Œå­é…ç½®æ–‡ä»¶å°±æ”¾åœ¨ /etc/nginx/conf.d/ ç›®å½•ä¸­ï¼Œå¹¶ä¸”å­é…ç½®æ–‡ä»¶å¿…é¡»ä»¥ .conf ç»“å°¾ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ¯”è¾ƒå°‘ä¿®æ”¹ nginx.confï¼Œå¤§éƒ¨åˆ†æ—¶å€™éƒ½æ˜¯ä¿®æ”¹å­é…ç½®æ–‡ä»¶ã€‚
æ ¹ç›®å½•å¯èƒ½çš„é»˜è®¤æ ¹ç›®å½•ï¼š
/usr/share/nginx/html
æ ¹ç›®å½•ä¸‹ä¸€èˆ¬ä¼šæœ‰nginxè‡ªå¸¦çš„index.htmlå’Œ50x.htmlã€‚
curl $&#123;nginx_server&#125;æ—¶çœ‹åˆ°å†…å®¹ï¼Œå°±æ˜¯index.htmlæ–‡ä»¶ä¸­çš„å†…å®¹ã€‚
æˆ‘ä»¬è‡ªå·±çš„é™æ€é¡µé¢é¡¹ç›®ï¼Œæœ€å¥½ä¸è¦æ”¾åˆ°é»˜è®¤æ ¹ç›®å½•ä¸‹ï¼Œå› ä¸ºé»˜è®¤æ ¹ç›®å½•å¯ä»¥é€šè¿‡ipå’Œè·¯å¾„è®¿é—®åˆ°ï¼Œè¿™å¾€å¾€æ˜¯ä¸ç¬¦åˆé¢„æœŸçš„ã€‚æ¨èçš„é™æ€é¡µé¢é¡¹ç›®ç›®å½•ä¸ºï¼š/usr/share/nginx/work
æ—¥å¿—ç›®å½•å¯èƒ½çš„é»˜è®¤æ—¥å¿—ç›®å½•ï¼š
/var/log/nginx
æ—¥å¿—æ–‡ä»¶ä¸­ä¸€èˆ¬æœ‰ä¸¤ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œerror.logå’Œaccess.logã€‚
å¸¸ç”¨å‘½ä»¤æµ‹è¯•é…ç½®nginx -t

é‡æ–°åŠ è½½é…ç½®nginx -s reload

é‡å¯nginxsystemctl restart nginx# orps -ef | grep nginxkill -9 xxx/usr/sbin/nginx -c /etc/nginx/conf/nginx.conf

å¸¸è§é…ç½®é™æ€é¡µé¢æœåŠ¡å™¨é…ç½®server &#123;    listen 80;    server_name www.voidking.com;    charset utf-8;    location / &#123;        proxy_set_header   Host             $host;        proxy_set_header   X-Real-IP        $remote_addr;        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;        root /usr/share/nginx/html/;        index index.html;    &#125;&#125;
è¿™ä¸ªé…ç½®ï¼Œæ˜¯ä¸€ä¸ªæ ‡å‡†çš„é™æ€é¡µé¢æœåŠ¡å™¨é…ç½®ã€‚ä½¿ç”¨ä»¥ä¸Šé…ç½®ï¼Œå¦‚æœå·²ç»é…ç½®å¥½äº†åŸŸåè§£æï¼Œé‚£ä¹ˆè®¿é—® www.voidking.com æ—¶ï¼Œå°±ä¼šçœ‹åˆ°nginxé¦–é¡µï¼Œä¹Ÿå°±æ˜¯ index.htmlã€‚
åå‘ä»£ç†åˆ°å…¶ä»–åŸŸåserver &#123;    listen 80;    server_name www.voidking.com;    charset utf-8;    location / &#123;        proxy_set_header   Host             $host;        proxy_set_header   X-Real-IP        $remote_addr;        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;        proxy_pass http://voidking.coding.me;    &#125;&#125;
ä½¿ç”¨ä»¥ä¸Šé…ç½®ï¼Œè®¿é—® www.voidking.com æ—¶ï¼Œå®é™…ä¸Šçœ‹åˆ°çš„æ˜¯ voidking.coding.me è¿™ä¸ªåŸŸåè¿”å›çš„å†…å®¹ã€‚
åå‘ä»£ç†åˆ°ä¸€ä¸ªæœåŠ¡server &#123;    listen 80;    server_name www.voidking.com;    charset utf-8;    location / &#123;        proxy_set_header   Host             $host;        proxy_set_header   X-Real-IP        $remote_addr;        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;        proxy_pass http://192.168.56.101:8080;    &#125;&#125;
ä½¿ç”¨ä»¥ä¸Šé…ç½®ï¼Œè®¿é—® www.voidking.com æ—¶ï¼Œå®é™…ä¸Šçœ‹åˆ°çš„æ˜¯ 192.168.56.101:8080 è¿™ä¸ªæœåŠ¡è¿”å›çš„å†…å®¹ã€‚
åå‘ä»£ç†åˆ°upstreamupstream www_voidking_com&#123;    server 192.168.56.101:8080 weight=5;    server 192.168.56.102:8081 weight=2;    server 192.168.56.103:8000;&#125;server &#123;    listen 80;    server_name www.voidking.com;    charset utf-8;    location / &#123;        proxy_set_header   Host             $host;        proxy_set_header   X-Real-IP        $remote_addr;        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;        proxy_pass http://www_voidking_com;    &#125;&#125;
ä½¿ç”¨ä»¥ä¸Šé…ç½®ï¼Œè®¿é—® www.voidking.com æ—¶ï¼Œå®é™…ä¸Šçœ‹åˆ°çš„æ˜¯upstreamé‡Œçš„æœåŠ¡è¿”å›çš„å†…å®¹ã€‚ä½†æ˜¯é—®é¢˜æ¥äº†ï¼Œupstreamé‡Œæœ‰ä¸‰ä¸ªæœåŠ¡ï¼Œåˆ°åº•æ˜¯å“ªä¸ªæœåŠ¡è¿”å›çš„å†…å®¹å‘¢ï¼Ÿç­”ï¼šä¸ä¸€å®šï¼Œè¿™å°±è¦ç”¨åˆ°ä¼ è¯´ä¸­çš„åŠ æƒè½®è¯¢ç®—æ³•äº†ã€‚ä¸‰ä¸ªæœåŠ¡çš„æƒå€¼åˆ†åˆ«ä¸º 5ã€2ã€1ï¼ˆé»˜è®¤ï¼‰ï¼Œä»æƒå€¼æ¥çœ‹ï¼Œæœ€å¤§å¯èƒ½æ‰“åˆ°ç¬¬ä¸€ä¸ªæœåŠ¡ã€‚æœ‰æ²¡æœ‰æƒ³åˆ°ä»€ä¹ˆçŸ¥è¯†ç‚¹ï¼Ÿæ²¡é”™ï¼Œè´Ÿè½½å‡è¡¡ï¼Œä½¿ç”¨äº†åŠ æƒè½®è¯¢ç®—æ³•çš„è´Ÿè½½å‡è¡¡ã€‚
åå‘ä»£ç†åˆ°websocketæœåŠ¡http &#123;    map $http_upgrade $connection_upgrade &#123;        default upgrade;        &#x27;&#x27; close;    &#125;    server &#123;        listen 80;        server_name www.voidking.com;        charset utf-8;        location ^~ /ws &#123;            proxy_set_header   Host             $host;            proxy_set_header   X-Real-IP        $remote_addr;            proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;            # websocket support            proxy_http_version 1.1;            proxy_set_header Upgrade $http_upgrade;            proxy_set_header Connection $connection_upgrade;            proxy_pass http://192.168.56.101:8080;        &#125;        location / &#123;            proxy_set_header   Host             $host;            proxy_set_header   X-Real-IP        $remote_addr;            proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;            proxy_pass http://192.168.56.101:8080;        &#125;    &#125;&#125;

æ›´å¤šå†…å®¹å‚è€ƒä¸€ç¯‡å¸¦ç»™ä½ Nginxä»£ç†WebSocketæ–¹æ³•å’ŒNGINX as a WebSocket Proxy
é…ç½®åŸŸåè¯ä¹¦server &#123;    listen 80;    listen 443 ssl;    server_name www.voidking.com;    charset utf-8;    ssl_certificate /etc/nginx/ssl/1_www.voidking.com_bundle.crt;    ssl_certificate_key  /etc/nginx/ssl/2_www.voidking.com.key;    ssl_session_timeout  5m;    ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;    ssl_ciphers  HIGH:!ADH:!EXPORT56:RC4+RSA:+MEDIUM;    ssl_prefer_server_ciphers on;    if ($ssl_protocol = &quot;&quot;) &#123;        return 301 https://$host$request_uri;    &#125;    location / &#123;        proxy_set_header   Host             $host;        proxy_set_header   X-Real-IP        $remote_addr;        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;        root /usr/share/nginx/work/voidking/;        index index.html;    &#125;    error_page 404 /404.html;    location = /404.html &#123;        root /usr/share/nginx/work/voidking/;        index 404.html;    &#125;    location ~ /\.git &#123;        return 404;    &#125;&#125;

å››å±‚ä»£ç†åŠ è½½streamæ¨¡å—nginxå››å±‚ä»£ç†ä¾èµ–ngx_stream_core_moduleæ¨¡å—ï¼ˆä¸‹é¢ç®€ç§°streamæ¨¡å—ï¼‰ã€‚
nginx -V &amp;&gt; nginx_version.txtgrep &quot;stream&quot; nginx_version.txt
å¦‚æœçœ‹åˆ°--with-streamï¼Œè¡¨æ˜å·²ç»å®‰è£…å¹¶å¼€å¯streamæ¨¡å—ã€‚
nginx1.22.0ä»¥ä¸Šç‰ˆæœ¬é»˜è®¤æ”¯æŒå¹¶å¼€å¯streamæ¨¡å—ï¼Œä¸€èˆ¬é…ç½®è·¯å¾„ä¸ºï¼š/usr/share/nginx/modules/ ï¼Œåœ¨ nginx.conf ä¸­includeè¯¥è·¯å¾„ã€‚
å¦‚æœæ˜¯ä½ç‰ˆæœ¬çš„nginxï¼Œéœ€è¦è‡ªè¡Œç¼–è¯‘å®‰è£…streamæ¨¡å—ï¼Œæˆ–è€…ä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…streamæ¨¡å—ã€‚
yum install -y nginx-mod-stream

å®‰è£…å®Œæˆåï¼Œnginx.confä¸­åŠ è½½ngx_stream_module.so
#load_module /usr/lib/nginx/modules/ngx_stream_module.so;load_module /usr/lib64/nginx/modules/ngx_stream_module.so;

å››å±‚ä»£ç†é…ç½®ä¸€ä¸ªå››å±‚ä»£ç†çš„å®ä¾‹ï¼š
stream &#123;    upstream remote_mysql &#123;        server 192.168.1.1:3306;    &#125;    server &#123;        listen 3306 so_keepalive=on; # å¼€å§‹TCPå­˜æ´»æ¢æµ‹        proxy_connect_timeout 10s;   # è¿æ¥è¶…æ—¶æ—¶é—´        proxy_timeout 300s;          # ç«¯å£ä¿æŒæ—¶é—´        proxy_pass remote_mysql;    &#125;&#125;

æ³¨æ„ï¼šstreamæ˜¯å’ŒhttpåŒä¸€çº§çš„ï¼Œä¸è¦é…ç½®åˆ°nginx/conf.dç›®å½•ä¸­ã€‚æœ€å¥½æ–°å»ºä¸€ä¸ªnginx/stream.dç›®å½•ï¼Œä¸“é—¨æ”¾ç½®å››å±‚ä»£ç†é…ç½®ã€‚
è¯·æ±‚bodyå¤§å°Syntax:     client_max_body_size size;Default:    client_max_body_size 1m;Context:    http, server, location


Sets the maximum allowed size of the client request body. If the size in a request exceeds the configured value, the 413 (Request Entity Too Large) error is returned to the client. Please be aware that browsers cannot correctly display this error. Setting size to 0 disables checking of client request body size.

å‚è€ƒæ–‡æ¡£ngx_http_core_module - client_max_body_size
å…è®¸è·¨åŸŸå…è®¸æŸä¸ªåŸŸåè·¨åŸŸï¼š
server &#123;    listen 80;    server_name www.voidking.com;    add_header Access-Control-Allow-Origin &#x27;test.voidking.com&#x27;;    add_header Access-Control-Allow-Headers &#x27;*&#x27;;    add_header Access-Control-Allow-Credentials true;    add_header Access-Control-Allow-Methods &quot;GET, POST, PUT, OPTIONS&quot;;    ...&#125;

å…è®¸æ‰€æœ‰åŸŸåè·¨åŸŸï¼š
server &#123;    listen 80;    server_name www.voidking.com;    add_header Access-Control-Allow-Origin &#x27;*&#x27;;    add_header Access-Control-Allow-Headers &#x27;*&#x27;;    add_header Access-Control-Allow-Credentials true;    add_header Access-Control-Allow-Methods &quot;GET, POST, PUT, OPTIONS&quot;;    ...&#125;

é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§conf.dä¸­çš„é…ç½®æ–‡ä»¶ï¼Œæ˜¯æŒ‰ç…§åç§°é¡ºåºæœ‰ä¼˜å…ˆçº§çš„ï¼Œç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„é…ç½®æ–‡ä»¶ä¼šä½œä¸ºdefaultã€‚å¦‚æœä¸€ä¸ªåŸŸåæŒ‡å‘äº†nginxï¼Œä½†æ˜¯nginxä¸­æ²¡æœ‰è¿™ä¸ªåŸŸåçš„é…ç½®ï¼Œé‚£ä¹ˆå°±ä¼šèµ°defaulté…ç½®ã€‚è¯¦æƒ…å‚è€ƒã€Šä½¿ç”¨Dockerå®‰è£…é…ç½®Nginxã€‹æ–‡ä¸­çš„ã€é‡å®šå‘é—®é¢˜æ’æŸ¥ã€‘ä¸€èŠ‚ã€‚
åŸºç¡€è§„åˆ™locationè§„åˆ™åœ¨å¸¸è§é…ç½®ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ä¸€ä¸ªå« location çš„å…³é”®å­—ã€‚locationè§„åˆ™ä¸ºï¼š
location [ = | ~ | ~* | ^~ ] /uri/ &#123; ... &#125;

ç´§è·Ÿåœ¨locationåé¢çš„ï¼Œæ˜¯å¯é€‰çš„ä¿®é¥°ç¬¦ï¼Œuriæ˜¯è¦åŒ¹é…çš„å­—ç¬¦ä¸²ã€‚
å¸¸è§åŒ¹é…ï¼š

location = /uri ç²¾ç¡®åŒ¹é…
location ^~ /uri å‰ç¼€åŒ¹é…ï¼Œåœ¨æ­£åˆ™åŒ¹é…ä¹‹å‰
location ~ pattern æ­£åˆ™åŒ¹é…ï¼ŒåŒºåˆ†å¤§å°å†™
location ~* pattern æ­£åˆ™åŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™
location /uri å‰ç¼€åŒ¹é…ï¼Œåœ¨æ­£åˆ™åŒ¹é…ä¹‹å
location / é€šç”¨åŒ¹é…ï¼ŒæœªåŒ¹é…åˆ°å…¶å®ƒlocationçš„è¯·æ±‚ä¼šåŒ¹é…åˆ°å®ƒ

è¯¦æƒ…å‚è€ƒlocation åŒ¹é…è§„åˆ™
åŒ¹é…è§„åˆ™åŒ¹é…è¿‡ç¨‹ï¼š1ã€ç²¾ç¡®åŒ¹é…2ã€å‰ç¼€åŒ¹é…ï¼ˆ^~ï¼‰3ã€æ­£åˆ™åŒ¹é…ï¼ˆæŒ‰é…ç½®é¡ºåºï¼‰4ã€å‰ç¼€åŒ¹é…ï¼ˆ/xxxï¼‰5ã€é€šç”¨åŒ¹é…
å…¶ä¸­å‰ç¼€åŒ¹é…å¦‚æœæœ‰åŒ…å«å…³ç³»æ—¶ï¼Œéµå¾ªæœ€å¤§åŒ¹é…åŸåˆ™ã€‚
proxy_passè§„åˆ™å¦‚æœnginxä½œä¸ºåå‘ä»£ç†ä½¿ç”¨ï¼Œé‚£ä¹ˆå¿…é¡»è¦ææ˜ç™½çš„å°±æ˜¯proxy_passçš„è§„åˆ™ï¼Œè¿™å…³ç³»åˆ°è¯·æ±‚èƒ½å¦æ‰“åˆ°æ­£ç¡®çš„æ¥å£ã€‚proxy_passè§„åˆ™ï¼š

å¦‚æœproxy_passåé¢æ²¡æœ‰è·¯å¾„ï¼Œé‚£ä¹ˆè½¬å‘æ—¶å¸¦ä¸Šuri
å¦‚æœproxy_passåé¢æœ‰è·¯å¾„ï¼Œé‚£ä¹ˆè½¬å‘æ—¶ä½¿ç”¨è¯¥è·¯å¾„æ›¿æ¢åŒ¹é…åˆ°çš„uri

ä¿ç•™urilocation  /test &#123;    proxy_set_header Host   $host;    proxy_set_header X-Real-IP      $remote_addr;    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;    proxy_pass http://192.168.56.101:8080;&#125;
è®¿é—® www.voidking.com/test/index ä¼šè¢«ä»£ç†åˆ° http://192.168.56.101:8080/test/indexÂ è¿™ä¸ªurlï¼Œ/test/index è¢«ä¿ç•™è½¬å‘ç»™äº†åç«¯æœåŠ¡ã€‚
å»æ‰urilocation  /test &#123;    proxy_set_header Host   $host;    proxy_set_header X-Real-IP      $remote_addr;    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;    proxy_pass http://192.168.56.101:8080/;&#125;
è®¿é—® www.voidking.com/test/index ä¼šè¢«ä»£ç†åˆ° http://192.168.56.101:8080/indexÂ è¿™ä¸ªurlï¼Œ/test è¢«å»æ‰äº†ã€‚
æ›¿æ¢urilocation  /test &#123;    proxy_set_header Host   $host;    proxy_set_header X-Real-IP      $remote_addr;    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;    proxy_pass http://192.168.56.101:8080/qa/;&#125;
è®¿é—® www.voidking.com/test/index ä¼šè¢«ä»£ç†åˆ° http://192.168.56.101:8080/qa/indexÂ è¿™ä¸ªurlï¼Œ/test/index è¢«æ›¿æ¢æˆäº† /qa/indexï¼Œç„¶åè½¬å‘ç»™äº†åç«¯æœåŠ¡ã€‚
location  /test &#123;    proxy_set_header Host   $host;    proxy_set_header X-Real-IP      $remote_addr;    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;    proxy_pass http://192.168.56.101:8080/qa;&#125;

è®¿é—® www.voidking.com/test/index ä¼šè¢«ä»£ç†åˆ° http://192.168.56.101:8080/qaindexÂ è¿™ä¸ªurlï¼Œ/test/index è¢«æ›¿æ¢æˆäº† /qaindexï¼Œç„¶åè½¬å‘ç»™äº†åç«¯æœåŠ¡ã€‚
é…ç½®æ—¥å¿—æ ¼å¼http &#123;    ...    #log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;    #                  &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;    #                  &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;    log_format main escape=json &#x27;&#123; &quot;@timestamp&quot;: &quot;$time_local&quot;, &#x27;        &#x27;&quot;http_user_agent&quot;: &quot;$http_user_agent&quot;,&#x27;        &#x27;&quot;http_x_forwarded_for&quot;: &quot;$http_x_forwarded_for&quot;,&#x27;        &#x27;&quot;remote_addr&quot;: &quot;$remote_addr&quot;,&#x27;        &#x27;&quot;remote_port&quot;: &quot;$remote_port&quot;,&#x27;        &#x27;&quot;host&quot;: &quot;$host&quot;,&#x27;        &#x27;&quot;http_host&quot;: &quot;$http_host&quot;,&#x27;        &#x27;&quot;scheme&quot;: &quot;$scheme&quot;,&#x27;        &#x27;&quot;http_referer&quot;: &quot;$http_referer&quot;,&#x27;        &#x27;&quot;request&quot;: &quot;$request&quot;,&#x27;        &#x27;&quot;request_uri&quot;: &quot;$request_uri&quot;,&#x27;        &#x27;&quot;request_method&quot;: &quot;$request_method&quot;,&#x27;        &#x27;&quot;request_time&quot;: &quot;$request_time&quot;,&#x27;        &#x27;&quot;request_length&quot;: &quot;$request_length&quot;,&#x27;        &#x27;&quot;response_status&quot;: &quot;$status&quot;,&#x27;        &#x27;&quot;bytes_sent&quot;: &quot;$bytes_sent&quot;,&#x27;        &#x27;&quot;body_bytes_sent&quot;: &quot;$body_bytes_sent&quot;,&#x27;        &#x27;&quot;upstream_addr&quot;: &quot;$upstream_addr&quot;,&#x27;        &#x27;&quot;upstream_response_time&quot;: &quot;$upstream_response_time&quot;&#125;&#x27;;&#125;




å­—æ®µ
å«ä¹‰
ç¤ºä¾‹



body_bytes_sent
å“åº”bodyå­—èŠ‚æ•°
3650


bytes_sent
å“åº”æ€»å­—èŠ‚æ•°
175


host
IPæˆ–åŸŸå(ä¸åŒ…æ‹¬ç«¯å£)
10.10.10.14


http_host
IPæˆ–åŸŸå(åŒ…æ‹¬ç«¯å£)
10.10.10.14:81


http_referer
refererä¿¡æ¯
http://10.10.10.14/


http_user_agent
UAä¿¡æ¯
Mozilla/5.0


http_x_forwarded_for
XFFä¿¡æ¯
192.168.1.1


remote_addr
å®¢æˆ·ç«¯åœ°å€
10.10.10.1


remote_user
å®¢æˆ·ç«¯è®¤è¯ç”¨æˆ·å
admin


request
è¯·æ±‚URIå’Œåè®®
GET


request_body
è¯·æ±‚çš„body



request_length
è¯·æ±‚é•¿åº¦
571


request_method
è¯·æ±‚æ–¹æ³•
GET


request_time
è¯·æ±‚å¤„ç†æ—¶é—´
0.000


response_body
è¿”å›çš„bodyï¼Œä¾èµ–luaï¼Œéœ€è¦ç¼–å†™luaè„šæœ¬æ¥é‡‡é›†



response_header_data
å“åº”å¤´æ•°æ®ï¼Œä¾èµ–headers-more-nginx-module



schema
åè®®
http


server_name
è™šæ‹Ÿä¸»æœºåç§°



server_port
æœåŠ¡å™¨ç«¯å£



server_protocol
æœåŠ¡å™¨åè®®



ssl_cipher
äº¤æ¢æ•°æ®ä¸­çš„ç®—æ³•



ssl_protocol
SSLåè®®ç‰ˆæœ¬



status
è¿”å›çŠ¶æ€ç 
404


time_local
æ—¶é—´æˆ³
16/Jun/2019:23:29:50


upstream_addr
åç«¯æä¾›æœåŠ¡åœ°å€



upstream_connect_time
ä¸æœåŠ¡å™¨è¿æ¥æ‰€èŠ±è´¹çš„æ—¶é—´



upstream_response_time
åç«¯å¤„ç†æ—¶é—´



upstream_status
upstreamçŠ¶æ€
200


å‚è€ƒæ–‡æ¡£ï¼š

Nginxé…ç½®æ—¥å¿—æ ¼å¼
Nginx æ—¥å¿—

ä¿®æ”¹æ—¥å¿—æ ¼å¼åï¼Œéœ€è¦é‡å¯nginxï¼Œç„¶åæŸ¥çœ‹æ—¥å¿—ç¡®è®¤æ ¼å¼
tail -f /opt/nginx/log/access.log

mapæŒ‡ä»¤map çš„ä½œç”¨æ˜¯åˆ›å»ºè‡ªå®šä¹‰å˜é‡ã€‚
è¯­æ³•ï¼š
map $var1 $var2 &#123;...&#125;
map çš„var1ä¸ºæºå˜é‡ï¼Œé€šå¸¸æ˜¯nginxçš„å†…ç½®å˜é‡ï¼Œvar2 æ˜¯è‡ªå®šä¹‰å˜é‡ã€‚ var2 çš„å€¼å–å†³äº var1 åœ¨å¯¹åº”è¡¨è¾¾å¼çš„åŒ¹é…æƒ…å†µã€‚å¦‚æœä¸€ä¸ªéƒ½åŒ¹é…ä¸åˆ°åˆ™ var2 å°±æ˜¯ default å¯¹åº”çš„å€¼ã€‚
ä¾‹å­ï¼š
map $args $foo &#123;    default 0;    debug   1;&#125;
args æ˜¯nginxå†…ç½®å˜é‡ï¼Œå°±æ˜¯è·å–çš„è¯·æ±‚ url çš„å‚æ•°ã€‚ å¦‚æœ args åŒ¹é…åˆ° debug é‚£ä¹ˆ foo çš„å€¼ä¼šè¢«è®¾ä¸º 1 ï¼Œå¦‚æœ args ä¸€ä¸ªéƒ½åŒ¹é…ä¸åˆ° foo å°±æ˜¯ default å®šä¹‰çš„å€¼ï¼Œåœ¨è¿™é‡Œå°±æ˜¯ 0
å‚è€ƒæ–‡æ¡£Nginx map ä½¿ç”¨è¯¦è§£
rewriteæŒ‡ä»¤rewriteæŒ‡ä»¤çš„ä½œç”¨æ˜¯é‡å®šå‘ã€‚
è¯­æ³•ï¼š
rewrite regex replacement [flag];

rewriteï¼šè¯¥æŒ‡ä»¤æ˜¯å®ç°URLé‡å†™çš„æŒ‡ä»¤ã€‚
regexï¼šç”¨äºåŒ¹é…URIçš„æ­£åˆ™è¡¨è¾¾å¼ã€‚
replacementï¼šå°†regexæ­£åˆ™åŒ¹é…åˆ°çš„å†…å®¹æ›¿æ¢æˆ replacementã€‚
flag: flagæ ‡è®°ã€‚

flagæœ‰å¦‚ä¸‹å€¼ï¼š

last: æœ¬æ¡è§„åˆ™åŒ¹é…å®Œæˆåï¼Œç»§ç»­å‘ä¸‹åŒ¹é…æ–°çš„location URI è§„åˆ™ã€‚(ä¸å¸¸ç”¨)
break: æœ¬æ¡è§„åˆ™åŒ¹é…å®Œæˆå³ç»ˆæ­¢ï¼Œä¸å†åŒ¹é…åé¢çš„ä»»ä½•è§„åˆ™(ä¸å¸¸ç”¨)ã€‚
redirect: è¿”å›302ä¸´æ—¶é‡å®šå‘ï¼Œæµè§ˆå™¨åœ°å€ä¼šæ˜¾ç¤ºè·³è½¬æ–°çš„URLåœ°å€ã€‚
permanent: è¿”å›301æ°¸ä¹…é‡å®šå‘ã€‚æµè§ˆå™¨åœ°å€ä¼šæ˜¾ç¤ºè·³è½¬æ–°çš„URLåœ°å€ã€‚

ä¾‹å­ï¼š
rewrite ^/(.*) http://www.baidu.com/$1 permanent;

rewrite æ˜¯å›ºå®šå…³é”®å­—ï¼Œè¡¨ç¤ºå¼€å§‹è¿›è¡ŒrewriteåŒ¹é…è§„åˆ™ã€‚
regex æ˜¯ ^/(.*)ï¼Œè¿™æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…å®Œæ•´çš„åŸŸåå’Œåé¢çš„è·¯å¾„åœ°å€ã€‚
replacement æ˜¯ http://www.baidu.com/$1ï¼Œå…¶ä¸­$1æ˜¯å–regexéƒ¨åˆ†()é‡Œé¢çš„å†…å®¹ï¼Œå¦‚æœåŒ¹é…æˆåŠŸåè·³è½¬åˆ°çš„URL
flag æ˜¯ permanentï¼Œä»£è¡¨æ°¸ä¹…é‡å®šå‘çš„å«ä¹‰ï¼Œå³è·³è½¬åˆ° http://www.baidu.com/$1 

å‚è€ƒæ–‡æ¡£Nginxä¸­çš„Rewriteçš„é‡å®šå‘é…ç½®ä¸å®è·µ
çŠ¶æ€ç 
1xx:ä¿¡æ¯å“åº”ç±»ï¼Œè¡¨ç¤ºæ¥æ”¶åˆ°è¯·æ±‚å¹¶ä¸”ç»§ç»­å¤„ç†
2xx:å¤„ç†æˆåŠŸå“åº”ç±»ï¼Œè¡¨ç¤ºåŠ¨ä½œè¢«æˆåŠŸæ¥æ”¶ã€ç†è§£å’Œæ¥å—
3xx:é‡å®šå‘å“åº”ç±»ï¼Œä¸ºäº†å®ŒæˆæŒ‡å®šçš„åŠ¨ä½œï¼Œå¿…é¡»æ¥å—è¿›ä¸€æ­¥å¤„ç†
4xx:å®¢æˆ·ç«¯é”™è¯¯ï¼Œå®¢æˆ·è¯·æ±‚åŒ…å«è¯­æ³•é”™è¯¯æˆ–è€…æ˜¯ä¸èƒ½æ­£ç¡®æ‰§è¡Œ
5xx:æœåŠ¡ç«¯é”™è¯¯ï¼ŒæœåŠ¡å™¨ä¸èƒ½æ­£ç¡®æ‰§è¡Œä¸€ä¸ªæ­£ç¡®çš„è¯·æ±‚

è¯¦æƒ…å‚è€ƒHTTP çŠ¶æ€ç è¯¦è§£ä¸é€‰ç”¨
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOSä¸‹Mysqlæ•°æ®åº“å¯¼å‡ºå’Œå¯¼å…¥</title>
    <url>/dev-centos-mysql-dump-source/</url>
    <content><![CDATA[å‰è¨€mysqlæ•°æ®åº“å¯¼å‡ºå’Œå¯¼å…¥ï¼Œåœ¨ä½¿ç”¨navicatç­‰å›¾å½¢åŒ–ç®¡ç†å·¥å…·çš„æƒ…å†µä¸‹å¾ˆæ–¹ä¾¿ã€‚ä½†æ˜¯ï¼Œå­¦æ ¡æœåŠ¡å™¨ä¸Š3306ç«¯å£ç¦æ­¢è¿œç¨‹è®¿é—®ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åªèƒ½é‡‡ç”¨å¦‚ä¸‹ä¸¤ç§æ–¹æ¡ˆï¼š

åœ¨shellä¸­å¯¼å‡ºå¯¼å…¥
å®‰è£…phpmyadmin



ä½¿ç”¨shellå¯¼å‡ºå‡è®¾æˆ‘ä»¬è¦å¯¼å‡ºçš„æ•°æ®åº“åä¸ºvkphpã€‚
mysqldump -uroot -ppassword vkphp &gt; /root/vkphp.sql
æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œåˆ™ä¼šåœ¨/rootç›®å½•ä¸‹å¯¼å‡ºvkphp.sqlæ–‡ä»¶ã€‚
å¯¼å…¥1ã€ä½¿ç”¨xftpä¸Šä¼ vkphp.sqlåˆ°/rootç›®å½•ä¸‹ã€‚
2ã€ç™»å½•mysql
mysql -u root -p
3ã€æ–°å»ºæ•°æ®åº“CREATE DATABASE vkphp DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;
PSï¼šåˆ é™¤æ•°æ®åº“DROP DATABASE vkphp;
4ã€å¯¼å…¥æ•°æ®use vkphp;
source /root/vkphp.sql;
ä½¿ç”¨phpmyadminå®‰è£…phpmyadmin1ã€åˆ°phpmyadminå®˜ç½‘ä¸‹è½½phpmyadminæºç ï¼Œæ¯”å¦‚phpMyAdmin-4.7.4-all-languages.tar.gzã€‚
2ã€ä¸Šä¼ phpMyAdmin-4.7.4-all-languages.tar.gzåˆ°/rootç›®å½•ä¸‹ã€‚
3ã€è§£å‹å®‰è£…tar -xvf phpMyAdmin-4.7.4-all-languages.tar.gz
mv phpMyAdmin-4.7.4-all-languages phpmyadmin
mv phpmyadmin [web_path]ï¼Œweb_pathæ˜¯webæ ¹ç›®å½•ï¼Œæ¯”å¦‚/home/wwwrootã€‚
4ã€é…ç½®
cd /home/wwwroot/phpmyadmin/libraries
vim config.default.php
// localhost =&gt; 127.0.0.1$cfg[&#x27;Servers&#x27;][$i][&#x27;host&#x27;] = &#x27;127.0.0.1&#x27;;$cfg[&#x27;Servers&#x27;][$i][&#x27;user&#x27;] = &#x27;root&#x27;;$cfg[&#x27;Servers&#x27;][$i][&#x27;password&#x27;] = &#x27;password&#x27;;

nginxé…ç½®1ã€åœ¨phpmyadminç›®å½•ä¸­mkdir log
touch log/phpmyadmin-nginx.log
2ã€æŸ¥æ‰¾php-cgi.sockfind / -name &#39;php-cgi.sock&#39;
çœ‹åˆ°çš„ç»“æœä¸º/tmp/php-cgi.sock
3ã€åœ¨nginxçš„conf/vhostç›®å½•ä¸­ï¼Œæ–°å»ºphpmyadmin.voidking.com.confï¼Œå†…å®¹å¦‚ä¸‹ï¼š
server &#123;    listen 80;    server_name  phpmyadmin.voidking.com;    root /home/wwwroot/phpmyadmin;  access_log  /home/wwwroot/phpmyadmin/log/phpmyadmin-nginx.log  main;    set $php_upstream &#x27;unix:/tmp/php-cgi.sock&#x27;;    location / &#123;     index index.php;    &#125;      location ~ \.php$ &#123;       fastcgi_pass   $php_upstream;      fastcgi_index  index.php;      fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;      include     fastcgi_params;    &#125;      location ~ /\.ht &#123;      deny  all;    &#125;  &#125;

4ã€é‡å¯nginx./nginx -t
./nginx -s reload
å¦‚æœæŠ¥é”™ nginx: [emerg] unknown log format &quot;main&quot; in... ï¼Œé‚£ä¹ˆæœ€ç®€å•çš„æ–¹æ³•æ˜¯å»æ‰mainã€‚
access_log  /home/wwwroot/phpmyadmin/log/phpmyadmin-nginx.log;
5ã€åœ¨ä¸‡ç½‘æ·»åŠ åŸŸåè§£æphpmyadminã€‚
6ã€æµ‹è¯•è®¿é—® http://phpmyadmin.voidking.com
å¯¼å‡ºå¯¼å…¥1ã€ç™»å½•phpmyadminã€‚
2ã€è¿›å…¥vkphpæ•°æ®åº“ã€‚
3ã€å•å‡»å¯¼èˆªæ â€œå¯¼å‡ºâ€ï¼Œæ ¼å¼é€‰æ‹©SQLï¼Œæ‰§è¡Œã€‚å³å¯å¯¼å‡ºsqlæ–‡ä»¶åˆ°æœ¬åœ°ã€‚
4ã€å•å‡»å¯¼èˆªæ â€œå¯¼å…¥â€ï¼Œé€‰æ‹©æ–‡ä»¶ï¼Œæ‰§è¡Œã€‚ä½†æ˜¯ï¼Œæœ€å¤§æ–‡ä»¶é™åˆ¶ä¸º50MBã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹php.iniå’Œnginx.confã€‚
ï¼ˆ1ï¼‰æŸ¥æ‰¾php.iniå’Œnginx.conffind / -name &#39;php.ini&#39;
find / -name &#39;nginx.conf&#39;
ï¼ˆ2ï¼‰ç¼–è¾‘php.inivim /usr/local/php/etc/php.ini
è¾“å…¥/uploadï¼ŒæŸ¥æ‰¾â€œuploadâ€çš„ä½ç½®ï¼ŒæŒ‰Né”®è·³è½¬ä¸‹ä¸€ä¸ªåŒ¹é…ã€‚
ä¿®æ”¹upload_max_filesizeå’Œpost_max_sizeä¸º
upload_max_filesize = 500Mpost_max_size = 500M

ï¼ˆ3ï¼‰ç¼–è¾‘nginx.confvim /usr/local/nginx/conf/nginx.conf
ä¿®æ”¹client_max_body_sizeä¸º
client_max_body_size 500m

ï¼ˆ4ï¼‰é‡å¯php/etc/init.d/php-fpm restart
ï¼ˆ5ï¼‰é‡å¯nginx./nginx -t
./nginx -s reload
5ã€å†æ¬¡æŸ¥çœ‹æœ€å¤§æ–‡ä»¶é™åˆ¶ï¼Œå°±å˜æˆäº†500MBã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>nginx</tag>
        <tag>mysql</tag>
        <tag>centos</tag>
        <tag>phpmyadmin</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOSå®‰è£…Apacheå’ŒPHPç¯å¢ƒ</title>
    <url>/dev-centos-apache-php/</url>
    <content><![CDATA[å‰è¨€ã€Šåœ¨CentOS7ä¸Šé…ç½®PHPè¿è¡Œç¯å¢ƒã€‹ä¸€æ–‡ä¸­ï¼Œå·²ç»é…ç½®å¥½äº†PHPç¯å¢ƒã€‚ä½†æ˜¯ï¼ŒNginxå’ŒPHPçš„é…åˆä¸æ˜¯å¾ˆå¥½ï¼Œæ‰€ä»¥ï¼ŒéƒåŒå­¦å†³å®šåœ¨åŸæœ¬çš„ç¯å¢ƒä¸­åŠ å…¥Apacheã€‚



å®‰è£…Apache1ã€å®‰è£…apacheyum install httpd
2ã€æŸ¥çœ‹httpdå®‰è£…ä½ç½®rpm -ql httpd
3ã€å¯åŠ¨apachesystemctl restart httpd.service
å¦‚æœå¯åŠ¨å¤±è´¥ï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯å› ä¸º80ç«¯å£è¢«å ç”¨ã€‚æ­¤æ—¶ï¼Œéœ€è¦ä¿®æ”¹ç›‘å¬ç«¯å£ã€‚cd /etc/httpd/confï¼Œ vim httpd.confï¼Œæ‰¾åˆ° Listen 80ï¼Œä¿®æ”¹ä¸º Listen 8080ã€‚
4ã€è®¾ç½®å¼€æœºå¯åŠ¨systemctl enable httpd.service
5ã€æµ‹è¯•è®¿é—®è®¿é—®åœ°å€ http://host_ip:8080ï¼Œå³å¯çœ‹åˆ°â€œTesting 123â€ã€‚
cd /var/www/htmlï¼Œvim index.htmlï¼Œè¾“å…¥helloã€‚
å†æ¬¡è®¿é—® http://host_ip:8080ï¼Œå³å¯çœ‹åˆ°â€œhelloâ€ã€‚
PSï¼šå¦‚æœæ— æ³•è®¿é—®ï¼Œè¯·å…ˆå…³é—­é˜²ç«å¢™ã€‚systemctl stop firewalld.service ï¼Œå…³é—­é˜²ç«å¢™ã€‚
systemctl disable firewalld.service ï¼Œç¦æ­¢å¼€æœºå¯åŠ¨ã€‚
å®‰è£…php5.6èƒ½ä¸èƒ½ä½¿ç”¨åŸæ¥ç¯å¢ƒä¸­çš„phpå’Œapacheé…åˆï¼Ÿç†è®ºä¸Šæ˜¯èƒ½çš„ï¼Œä½†æ˜¯é…ç½®éº»çƒ¦ï¼ŒéƒåŒå­¦å†³å®šå†å®‰è£…ä¸€ä¸ªphpã€‚
å¦‚æœç›´æ¥æ‰§è¡Œyum install phpï¼Œcentos7é»˜è®¤å®‰è£…php5.4ç‰ˆæœ¬ã€‚å¦‚æœéœ€è¦å®‰è£…æ›´é«˜ç‰ˆæœ¬ï¼Œæˆ‘ä»¬éœ€è¦å¦‚ä¸‹æ“ä½œã€‚
1ã€è¿½åŠ epelåŠremiæº
rpm -Uvh http://ftp.iij.ad.jp/pub/linux/fedora/epel/7/x86_64/e/epel-release-7-10.noarch.rpmrpm -Uvh http://rpms.famillecollet.com/enterprise/remi-release-7.rpm

2ã€ç¡®è®¤å®‰è£…çš„phpç‰ˆæœ¬yum list --enablerepo=remi --enablerepo=remi-php56 | grep php
å¦‚æœæŠ¥é”™ï¼Œå°±å…ˆæ‰§è¡Œyum install epel-release
3ã€å®‰è£…php5.6
yum install --enablerepo=remi --enablerepo=remi-php56 php php-opcache php-pecl-apcu php-devel php-mbstring php-mcrypt php-mysqlnd php-phpunit-PHPUnit php-pecl-xdebug php-pecl-xhprof php-pdo php-pear php-fpm php-cli php-xml php-bcmath php-process php-gd php-common

4ã€ç¡®è®¤phpç‰ˆæœ¬php -v
5ã€æŸ¥çœ‹phpå®‰è£…ä½ç½®rpm -ql php
whereis php
which php
phpé…ç½®æ–‡ä»¶çš„é»˜è®¤ä½ç½®ä¸º/etc/php.ini
Apacheä½¿ç”¨PHP1ã€é‡å¯apachesystemctl stop httpd.service
systemctl start httpd.service
2ã€åœ¨/var/www/htmlï¼Œæ–°å»ºæ–‡ä»¶index.phpï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?php    echo &#x27;hello php5.6&#x27;;?&gt;

3ã€æµ‹è¯•è®¿é—®è®¿é—®åœ°å€ http://host_ip:8080/index.phpï¼Œå³å¯çœ‹åˆ°â€œhello php5.6â€ã€‚
ä¹¦ç­¾å¦‚ä½•æ­å»ºlamp(CentOS7+Apache+MySQL+PHP)ç¯å¢ƒ
Install Apache, PHP And MySQL On CentOS 7 (LAMP)
åœ¨CentOS7.0å®‰è£…php5.6
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>uncategories</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>apache</tag>
        <tag>php</tag>
        <tag>centos</tag>
        <tag>yumæº</tag>
      </tags>
  </entry>
  <entry>
    <title>PHPä½¿ç”¨Memcache</title>
    <url>/dev-php-memcache/</url>
    <content><![CDATA[memcacheç®€ä»‹Memcached æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„åˆ†å¸ƒå¼å†…å­˜å¯¹è±¡ç¼“å­˜ç³»ç»Ÿï¼Œç”¨äºåŠ¨æ€Webåº”ç”¨ä»¥å‡è½»æ•°æ®åº“è´Ÿè½½ã€‚å®ƒé€šè¿‡åœ¨å†…å­˜ä¸­ç¼“å­˜æ•°æ®å’Œå¯¹è±¡æ¥å‡å°‘è¯»å–æ•°æ®åº“çš„æ¬¡æ•°ï¼Œä»è€Œæé«˜åŠ¨æ€ã€æ•°æ®åº“é©±åŠ¨ç½‘ç«™çš„é€Ÿåº¦ã€‚MemcachedåŸºäºä¸€ä¸ªå­˜å‚¨é”®/å€¼å¯¹çš„hashmapã€‚
memcacheæœ‰memcacheå’Œmemcachedä¸¤ç§åç§°ï¼Œå…¶å®memcacheæ˜¯è¿™ä¸ªé¡¹ç›®çš„åç§°ï¼Œè€Œmemcachedæ˜¯å®ƒæœåŠ¡å™¨ç«¯çš„ä¸»ç¨‹åºæ–‡ä»¶åã€‚
memcachedæ˜¯ä¸€ç§æœåŠ¡å™¨ï¼Œæ˜¯å†…å­˜ç¼“å­˜æœåŠ¡å™¨ï¼Œå°±åƒapacheæœåŠ¡å™¨ä¸€æ ·ã€‚åªä¸è¿‡apacheæ˜¯ç”¨æ¥æä¾›webæœåŠ¡ï¼Œè€Œmemcachedæ˜¯ç”¨æ¥è¿›è¡Œå†…å­˜ç¼“å­˜ã€‚é‚£ä¹ˆmemcacheå®¢æˆ·ç«¯å‘¢ï¼Ÿæˆ‘ä»¬å¯èƒ½ç”¨phpå¼€å‘ç½‘ç«™ï¼Œä¹Ÿå¯èƒ½ç”¨javaæˆ–è€…pythonï¼Œè¿™äº›ç›¸å¯¹ä¸æœåŠ¡å™¨æ¥è¯´æ˜¯å®¢æˆ·ï¼Œéƒ½åœ¨ä½¿ç”¨æœåŠ¡å™¨çš„æœåŠ¡ã€‚åœ¨phpçš„æ‰©å±•ä¸­åŠ å…¥memcacheï¼Œå°±å¯ä»¥è°ƒç”¨æœåŠ¡å™¨çš„æœåŠ¡äº†ï¼Œå°±æ˜¯å¯ä»¥è°ƒç”¨memcachedæ¥è¿›è¡Œå†…å­˜ç¼“å­˜äº†ã€‚


ä¸‹è½½å®‰è£…memcachedæœåŠ¡ç«¯1ã€ä¸‹è½½memcahedï¼Œwget http://www.memcached.org/files/memcached-1.5.1.tar.gz
2ã€è§£å‹æºç ï¼Œtar -xvf memcached-1.5.1.tar.gz
3ã€ç¼–è¯‘å®‰è£…ï¼Œcd memcached-1.5.1ï¼Œ./configureï¼Œmake &amp;&amp; make install
å¯åŠ¨memcachedæœåŠ¡ç«¯1ã€memcachedçš„é»˜è®¤ç›®å½•ä¸º/usr/local/bin/memcached
2ã€å¯åŠ¨memcacheï¼Œmemcached -u root -d

-d é€‰é¡¹æ˜¯å¯åŠ¨ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ã€‚
-m æ˜¯åˆ†é…ç»™Memcacheä½¿ç”¨çš„å†…å­˜æ•°é‡ï¼Œå•ä½æ˜¯MBï¼Œé»˜è®¤64MBã€‚
-u æ˜¯è¿è¡ŒMemcacheçš„ç”¨æˆ·ï¼Œå¦‚æœå½“å‰ä¸ºroot çš„è¯ï¼Œéœ€è¦ä½¿ç”¨æ­¤å‚æ•°æŒ‡å®šç”¨æˆ·
-p [num]æ˜¯è®¾ç½®Memcacheçš„TCPç›‘å¬çš„ç«¯å£ï¼Œæœ€å¥½æ˜¯1024ä»¥ä¸Šçš„ç«¯å£ã€‚
-c é€‰é¡¹æ˜¯æœ€å¤§è¿è¡Œçš„å¹¶å‘è¿æ¥æ•°ï¼Œé»˜è®¤æ˜¯1024ã€‚
-P [file] æ˜¯è®¾ç½®ä¿å­˜Memcacheçš„pidæ–‡ä»¶ã€‚

æˆ–è€…ï¼Œservice memcached start
3ã€éªŒè¯å®‰è£…ç»“æœï¼Œmemcached -h
4ã€è®¾ç½®å¼€æœºå¯åŠ¨ï¼Œchkconfig memcached on
5ã€æŸ¥çœ‹ç›‘å¬ç«¯å£ï¼Œyum install lsofï¼Œlsof -i tcp:11211
phpå®‰è£…memcacheå®‰è£…libmemcached1ã€ä¸‹è½½wget https://launchpad.net/libmemcached/1.0/1.0.18/+download/libmemcached-1.0.18.tar.gz
2ã€è§£å‹tar -xvf libmemcached-1.0.18.tar.gz
3ã€ç¼–è¯‘å®‰è£…åˆ°/usr/local/libmemcachedcd libmemcached-1.0.18
./configure --prefix=/usr/local/libmemcached
make &amp;&amp; make install
å®‰è£…memcachedçš„PHPæ‰©å±•1ã€ä¸‹è½½wget https://pecl.php.net/get/memcached-2.2.0.tgz
2ã€è§£å‹tar -xvf memcached-2.2.0.tgz
3ã€ç”Ÿæˆé…ç½®æ–‡ä»¶cd memcached-2.2.0
/usr/local/php/bin/phpize
4ã€ç¼–è¯‘å®‰è£…./configure --enable-memcached --with-php-config=/usr/local/php/bin/php-config --with-libmemcached-dir=/usr/local/libmemcached --disable-memcached-sasl
make &amp;&amp; make install
5ã€ä¿®æ”¹php.iniï¼Œæ·»åŠ  extension = &quot;memcached.so&quot;
6ã€éªŒè¯å®‰è£…ç»“æœï¼Œ/usr/local/php/bin/php -m | grep memcacheï¼Œå¦‚æœå‡ºç°memcachedï¼Œåˆ™è¯æ˜å®‰è£…æˆåŠŸã€‚
7ã€é‡å¯php-fpmï¼Œservice php-fpm restart
8ã€è®¿é—® http://host_ip/p.phpï¼Œctrl+fï¼ŒæŸ¥æ‰¾memcacheï¼Œå¦‚æœèƒ½æ‰¾åˆ°memcacheï¼Œåˆ™è¯æ˜æˆåŠŸå¯åŠ¨ã€‚
æµ‹è¯•1ã€åœ¨webç›®å½•ä¸‹ï¼Œæ–°å»ºmem.phpï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?php    $mem = new Memcached;    $mem-&gt;addServer(&quot;127.0.0.1&quot;, 11211);    $mem-&gt;set(&#x27;key&#x27;, &#x27;hello memcache!&#x27;);    $val = $mem-&gt;get(&#x27;key&#x27;);    echo $val;?&gt;

2ã€è®¿é—® http://host_ip/mem.phpï¼Œå³å¯çœ‹åˆ°â€œhello memcached!â€ã€‚è‡³æ­¤ï¼Œmemcacheå®‰è£…é…ç½®æˆåŠŸï¼
ä¹¦ç­¾æ•™ä½ CentOS 7ä¸‹å®‰è£…æ“ä½œMemcached
centos yumå®‰è£…memcachedåŠphp memcacheæ‰©å±•
Nginxä¸­æ–‡å®˜æ–¹æ–‡æ¡£ Memcached
ngx_http_memcached_module
]]></content>
      <categories>
        <category>engineering</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>memcache</tag>
      </tags>
  </entry>
  <entry>
    <title>PSç›–ç« æŠ å›¾</title>
    <url>/hobby-ps-seal-cutout/</url>
    <content><![CDATA[ç›®æ ‡ä»å›¾Aä¸­æŠ å‡ºç›–ç« ï¼Œç„¶åç›–åˆ°å›¾Bä¸­ã€‚


æŠ å›¾æ–¹æ³•å‰ªè£1ã€æ‰“å¼€å›¾Aï¼ŒåŒå‡»èƒŒæ™¯ï¼Œè½¬æ¢ä¸ºå›¾å±‚0ã€‚
2ã€å‰ªè£å‡ºç›–ç« éƒ¨åˆ†ã€‚
æ•´ä½“æŠ å›¾1ã€æ‰“å¼€é€šé“é¢æ¿ï¼Œå¤åˆ¶è“è‰²é€šè¾¾ï¼Œåªæ˜¾ç¤ºè“è‰²é€šé“å‰¯æœ¬ã€‚
2ã€å•å‡»è“è‰²é€šé“å‰¯æœ¬ï¼Œctrl+Lï¼ˆå›¾åƒ-è°ƒæ•´-è‰²é˜¶ï¼‰ï¼Œè°ƒæ•´è¾“å…¥è‰²é˜¶ï¼Œä½¿é»‘çš„æ›´é»‘ï¼Œç™½çš„æ›´ç™½ã€‚
3ã€ctrl+Iï¼ˆå›¾åƒ-è°ƒæ•´-åå‘ï¼‰ï¼Œä½¿é»‘ç™½é¢ å€’ã€‚å› ä¸ºç™½è‰²çš„æ˜¯é€‰åŒºã€‚
4ã€ctrl+å•å‡»è“è‰²é€šé“å‰¯æœ¬ï¼ˆé€‰æ‹©-è½½å…¥é€‰åŒºï¼‰ã€‚
5ã€å›åˆ°å›¾å±‚é¢æ¿ï¼Œctrl+Cï¼Œctrl+Vï¼Œåªæ˜¾ç¤ºæ–°å›¾å±‚1ã€‚è‡³æ­¤ï¼Œå°±æŠŠèƒŒæ™¯å»æ‰äº†ã€‚
å»é™¤å¤šä½™1ã€æ–°å»ºå›¾å±‚2ï¼ŒåŒå‡»èƒŒæ™¯è‰²ï¼Œé€‰æ‹©ç™½è‰²ï¼Œctrl+backspaceï¼ˆå¡«å……ï¼‰ã€‚æŠŠå›¾å±‚2æ‹‰åˆ°å›¾å±‚1ä¸‹é¢ã€‚
2ã€åœ¨å›¾å±‚1ä¸Šï¼Œæ–°å»ºè’™ç‰ˆã€‚Bé”®ï¼ˆé€‰æ‹©ç”»ç¬”å·¥å…·ï¼‰ï¼Œè°ƒæ•´ç”»ç¬”å¤§å°ã€‚å‰æ™¯è‰²é€‰æ‹©é»‘è‰²ã€‚
3ã€ä½¿ç”¨ç”»ç¬”æŠŠé»‘è‰²çš„å¤šä½™æ–‡å­—æŠ¹å»ï¼Œæ–‡å­—ä¸ç›–ç« é‡å éƒ¨åˆ†ä¸å¤„ç†ã€‚
é‡å å¤„ç†1ã€é€‰ä¸­å›¾å±‚1ï¼Œé”å®šé€æ˜èƒŒæ™¯åƒç´ ã€‚
2ã€ä½¿ç”¨ä»¿åˆ¶å›¾ç« å·¥å…·ã€‚æŒ‰ä½alté”®é”å®šçº¢è‰²å›¾ç« éƒ¨åˆ†ä½œä¸ºåŸç‚¹ï¼Œç„¶åæ¶‚æŠ¹é»‘è‰²é‡å éƒ¨åˆ†ã€‚æ³¨æ„ï¼Œæ­¤æ—¶ç„¦ç‚¹è¦æ”¾åœ¨å›¾å±‚1ä¸Šï¼Œè€Œä¸æ˜¯å›¾å±‚1çš„è’™ç‰ˆä¸Šã€‚
3ã€ä½¿ç”¨æ©¡çš®æ“¦å·¥å…·ï¼Œæ“¦æ‰å¤šä½™åƒç´ ã€‚
4ã€ctrl+Sï¼Œä¿å­˜ä¸ºpngæˆ–è€…psdæ ¼å¼ã€‚
ä½¿ç”¨1ã€æ‰“å¼€ç›–ç« å›¾ç‰‡å’Œå›¾Bã€‚
2ã€æŠŠç›–ç« å›¾ç‰‡ï¼Œæ‹–åˆ°å›¾Bä¸Šï¼Œæˆä¸ºç›–ç« å›¾å±‚ã€‚
2ã€åœ¨å›¾å±‚é¢æ¿ï¼Œå•å‡»ç›–ç« å›¾å±‚ï¼Œé€‰æ‹©æ­£ç‰‡å åº•ï¼Œè‡³æ­¤å¤§åŠŸå‘Šæˆã€‚
ä¹¦ç­¾photoshopåˆ¶ä½œå°ç« psæŠ å‡ºå°ç« æ•™ç¨‹
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>ps</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»é›¶å¼€å§‹æ‰“é€ è‡ªå·±çš„PHPæ¡†æ¶â€•â€•ç¬¬2ç« </title>
    <url>/dev-vkphp-2/</url>
    <content><![CDATA[ç›®æ ‡æœ¬ç¯‡ï¼Œæˆ‘ä»¬æ¥å®ç°åŠ è½½æ§åˆ¶å™¨ã€æ•°æ®æŸ¥è¯¢å’Œé¡µé¢æ¸²æŸ“ã€‚


åŠ è½½æ§åˆ¶å™¨æ§åˆ¶å™¨åœ¨appç›®å½•ä¸‹ï¼Œæ–°å»ºctrlç›®å½•ï¼Œctrlç›®å½•ä¸‹æ–°å»ºindexCtrl.phpæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?phpnamespace app\ctrl;class indexCtrl&#123;    public function index()&#123;        echo &#x27;index ctrl&#x27;;    &#125;&#125;

è°ƒç”¨æ§åˆ¶å™¨åœ¨æ ¹ç›®å½•ä¸‹çš„index.phpæ–‡ä»¶ä¸­ï¼Œç»§ç»­æ·»åŠ ï¼š
include CORE.&#x27;/autoload.php&#x27;;spl_autoload_register(&#x27;\core\autoload::load&#x27;);$route = new \core\route();$ctrl = $route-&gt;ctrl;$action = $route-&gt;action;$params = $route-&gt;params;$ctrl_file = APP.&#x27;/ctrl/&#x27;.$ctrl.&#x27;Ctrl.php&#x27;;$ctrl_class = &#x27;\\app\\ctrl\\&#x27;.$ctrl.&#x27;Ctrl&#x27;;if(is_file($ctrl_file))&#123;    include $ctrl_file;    $ctrl_obj = new $ctrl_class;    $ctrl_obj-&gt;$action();&#125;else &#123;    throw new \Exception(&#x27;æ‰¾ä¸åˆ°æ§åˆ¶å™¨&#x27;.$ctrl_file);&#125;

è®¿é—®åœ°å€ http://vkphp.dev ï¼Œå³å¯çœ‹åˆ°â€œindex ctrlâ€ã€‚
æ•°æ®æŸ¥è¯¢1ã€åœ¨mysqlä¸­ï¼Œæ–°å»ºæ•°æ®åº“vkphpã€‚
2ã€åœ¨vkphpæ•°æ®åº“ä¸­ï¼Œæ–°å»ºè¡¨vk_userï¼Œå­—æ®µåŒ…æ‹¬idã€usernameå’Œpasswordã€‚
3ã€åœ¨commonæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºdb.phpï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?phpnamespace core\common;class db extends \PDO&#123;    public function __construct()&#123;        $dsn = &#x27;mysql:host=localhost;dbname=vkphp&#x27;;        $username = &#x27;root&#x27;;        $passwd = &#x27;&#x27;;        try&#123;            parent::__construct($dsn,$username,$passwd);            // echo &#x27;database connect success&#x27;;        &#125;catch (\Exception $e)&#123;            echo $e-&gt;getMessage();        &#125;    &#125;&#125;

4ã€åœ¨indexCtrl.phpä¸­ï¼Œæ·»åŠ ï¼š
public function data()&#123;    $db = new \core\common\db();    $sql = &#x27;select * from vk_user&#x27;;    $result = $db-&gt;query($sql);    p($result);    p($result-&gt;fetchAll());&#125;

è®¿é—®åœ°å€ http://vkphp.dev/index/data ï¼Œå³å¯çœ‹åˆ°ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºçš„æ•°æ®ã€‚
é¡µé¢æ¸²æŸ“é¡µé¢æ¸²æŸ“ï¼Œä¸»è¦æœ‰ä¸¤éƒ¨åˆ†å·¥ä½œï¼šèµ‹å€¼å’Œæ˜¾ç¤ºã€‚æˆ‘ä»¬éœ€è¦å®ç°ä¸¤ä¸ªå‡½æ•°ï¼šassignå’Œdisplayã€‚
1ã€åœ¨appç›®å½•ä¸‹æ–°å»ºviewç›®å½•ï¼Œviewç›®å½•ä¸‹æ–°å»ºindexç›®å½•ï¼Œindexç›®å½•ä¸­æ–°å»ºrender.htmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;Render&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;p&gt;ç¬¬ä¸€ä¸ªè§†å›¾&lt;/p&gt;    &lt;p&gt;ç”¨æˆ·åï¼š&lt;?php echo $username; ?&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;

2ã€åœ¨coreç›®å½•ä¸­ï¼Œæ·»åŠ render.phpï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?phpnamespace core;class render&#123;    public $params = array();    public function assign($name,$value)&#123;        $this-&gt;params[$name] = $value;    &#125;    public function display($file)&#123;        $file = APP.&#x27;/view/&#x27;.$file;        if(is_file($file))&#123;            extract($this-&gt;params); //æŠŠæ•°ç»„å˜æˆå˜é‡            include $file;        &#125;    &#125;&#125;

3ã€ä¿®æ”¹indexCtrl.phpå¦‚ä¸‹ï¼š
&lt;?phpnamespace app\ctrl;class indexCtrl extends \core\render&#123;    // å…¶ä»–    public function render()&#123;        $this-&gt;assign(&#x27;username&#x27;,&#x27;voidking&#x27;);        $this-&gt;display(&#x27;index/render.html&#x27;);    &#125;&#125;

è®¿é—®åœ°å€ http://vkphp.dev/index/render ï¼Œå³å¯çœ‹åˆ°æ¸²æŸ“å‡ºçš„é¡µé¢ã€‚
é¡µé¢æ¸²æŸ“è¿›é˜¶ç›´æ¥åœ¨é¡µé¢echoï¼Œéš¾ä»¥ä½“ç°æ°´å¹³ï¼Œæˆ‘ä»¬æ¥å®‰è£…ä¸€ä¸ªæ¨¡æ¿å¼•æ“â€•â€•smartyã€‚
å‘½åç©ºé—´æ¥ä¸‹æ¥smartyçš„ä½¿ç”¨ï¼Œç‰µæ¶‰åˆ°å‘½åç©ºé—´è¿™ä¸ªçŸ¥è¯†ç‚¹ï¼Œåœ¨æ­¤å­¦ä¹ ä¸€ä¸‹ã€‚
é¦–å…ˆå£°æ˜ï¼šå‘½åç©ºé—´å’Œæ–‡ä»¶è·¯å¾„æ²¡æœ‰å…³ç³»ï¼Œæ²¡æœ‰å…³ç³»ï¼Œæ²¡æœ‰å…³ç³»ï¼è™½ç„¶ï¼Œåœ¨ä½¿ç”¨å‘½åç©ºé—´æ—¶ç»å¸¸å‚è€ƒæ–‡ä»¶è·¯å¾„ï¼Œä½†æ˜¯ï¼Œå®ƒä»¬æ²¡æœ‰å¿…ç„¶å…³ç³»ã€‚
å‘½åç©ºé—´çš„ä½œç”¨ï¼šè§£å†³é‡åé—®é¢˜ã€‚ä¸åŒçš„å‘½åç©ºé—´ä¸­ï¼Œå¯ä»¥å­˜åœ¨ç›¸åŒç±»åå’Œå‡½æ•°åã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨ä¸€ä¸ªç±»å’Œå‡½æ•°æ—¶ï¼Œå¿…é¡»æ˜ç¡®æŒ‡å‡ºä½¿ç”¨çš„æ˜¯å“ªä¸€ä¸ªå‘½åç©ºé—´ä¸­çš„ç±»å’Œå‡½æ•°ã€‚
ä¸Šæ–‡æˆ‘ä»¬è¯´åˆ°ï¼Œåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­è®¿é—®ä¸€ä¸ªæ–‡ä»¶æœ‰ä¸‰ç§æ–¹å¼ï¼ŒPHPå‘½åç©ºé—´ä¸­çš„å…ƒç´ ä½¿ç”¨åŒæ ·çš„åŸç†ã€‚ä¾‹å¦‚ï¼Œç±»åå¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼å¼•ç”¨ï¼š
1ã€éé™å®šåç§°ï¼Œæˆ–ä¸åŒ…å«å‰ç¼€çš„ç±»åç§°ï¼Œä¾‹å¦‚ $a=new foo(); æˆ– foo::staticmethod(); ã€‚å¦‚æœå½“å‰å‘½åç©ºé—´æ˜¯ currentnamespaceï¼Œfoo å°†è¢«è§£æä¸º \currentnamespace\foo ï¼›å¦‚æœå½“å‰æ²¡æœ‰æŒ‡å®šå‘½åç©ºé—´ï¼Œåˆ™fooä¼šè¢«è§£æä¸º \fooã€‚2ã€é™å®šåç§°ï¼Œæˆ–åŒ…å«å‰ç¼€çš„åç§°ï¼Œä¾‹å¦‚ $a = new subnamespace\foo(); æˆ– subnamespace\foo::staticmethod(); ã€‚å¦‚æœå½“å‰çš„å‘½åç©ºé—´æ˜¯ currentnamespaceï¼Œåˆ™ foo ä¼šè¢«è§£æä¸º \currentnamespace\subnamespace\foo ï¼›å¦‚æœå½“å‰æ²¡æœ‰æŒ‡å®šå‘½åç©ºé—´ï¼Œfoo ä¼šè¢«è§£æä¸º\subnamespace\fooã€‚3ã€å®Œå…¨é™å®šåç§°ï¼Œæˆ–åŒ…å«äº†å…¨å±€å‰ç¼€æ“ä½œç¬¦çš„åç§°ï¼Œä¾‹å¦‚ï¼Œ$a = new \currentnamespace\foo(); æˆ– \currentnamespace\foo::staticmethod();ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œfoo æ€»æ˜¯è¢«è§£æä¸ºä»£ç ä¸­çš„æ–‡å­—å(literal name) \currentnamespace\fooã€‚
ä¸‹é¢ä¸¾ä¸ªæ —å­ï¼š
&lt;?phpnamespace A\B\C;class Exception extends \Exception &#123;&#125;$a = new Exception(&#x27;hi&#x27;); // $a æ˜¯ç±» A\B\C\Exception çš„ä¸€ä¸ªå¯¹è±¡$b = new \Exception(&#x27;hi&#x27;); // $b æ˜¯ç±» Exception çš„ä¸€ä¸ªå¯¹è±¡$c = new ArrayObject; // è‡´å‘½é”™è¯¯, æ‰¾ä¸åˆ° A\B\C\ArrayObject ç±»?&gt;

ä¸‹è½½å®‰è£…smarty1ã€è®¿é—®smartyå®˜æ–¹ä¸‹è½½ ï¼Œä¸‹è½½smartyï¼ŒéƒåŒå­¦ä¸‹è½½çš„æ˜¯3.1.30ç‰ˆæœ¬ã€‚
2ã€åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºlibï¼Œè§£å‹smartyåˆ°libç›®å½•ä¸‹ï¼Œé‡å‘½åæ–‡ä»¶å¤¹ä¸ºsmartyã€‚
ä½¿ç”¨smarty1ã€åœ¨appç›®å½•ä¸‹æ–°å»ºsmartyç›®å½•ï¼Œsmartyç›®å½•ä¸‹æ–°å»ºtemplatesã€template_cã€configsã€cacheå››ä¸ªç›®å½•ã€‚
2ã€åœ¨templatesç›®å½•ä¸‹æ–°å»ºindexç›®å½•ï¼Œindexç›®å½•ä¸­æ–°å»ºrender2.htmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;Smarty&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;p&gt;ç¬¬ä¸€ä¸ªSmartyé¡µé¢&lt;/p&gt;    &lt;p&gt;ç”¨æˆ·åï¼š&#123;&#123;$username&#125;&#125;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;

3ã€ä¿®æ”¹coreç›®å½•ä¸‹çš„render.phpå¦‚ä¸‹ï¼š
&lt;?phpnamespace core;class render&#123;       public $smarty;    public function __construct()&#123;        require_once(LIB.&#x27;/smarty/libs/Smarty.class.php&#x27;);        $this-&gt;smarty = new \Smarty();        $this-&gt;smarty-&gt;setTemplateDir(APP.&#x27;/smarty/templates/&#x27;);        $this-&gt;smarty-&gt;setCompileDir(APP.&#x27;/smarty/templates_c/&#x27;);        $this-&gt;smarty-&gt;setConfigDir(APP.&#x27;/smarty/configs/&#x27;);        $this-&gt;smarty-&gt;setCacheDir(APP.&#x27;/smarty/cache/&#x27;);    &#125;    public $params = array();    public function assign($name,$value)&#123;        $this-&gt;params[$name] = $value;    &#125;    public function display($file)&#123;        $file = APP.&#x27;/view/&#x27;.$file;        if(is_file($file))&#123;            extract($this-&gt;params); //æŠŠæ•°ç»„å˜æˆå˜é‡            include $file;        &#125;    &#125;&#125;

4ã€ä¿®æ”¹indexCtrl.phpå¦‚ä¸‹ï¼š
&lt;?phpnamespace app\ctrl;include CORE.&#x27;/render.php&#x27;;class indexCtrl extends \render&#123;    // å…¶ä»–    public function render2()&#123;        $this-&gt;smarty-&gt;assign(&#x27;username&#x27;,&#x27;voidking&#x27;);        $this-&gt;smarty-&gt;display(&#x27;index/render2.html&#x27;);    &#125;&#125;

è®¿é—®åœ°å€ http://vkphp.dev/index/render2 ï¼Œå³å¯çœ‹åˆ°æ¸²æŸ“å‡ºçš„é¡µé¢ã€‚
æºç åˆ†äº«https://github.com/voidking/vkphp/releases/tag/v1.2.0
ä¹¦ç­¾ä»é›¶å¼€å§‹æ‰“é€ è‡ªå·±çš„PHPæ¡†æ¶
ä½¿ç”¨å‘½åç©ºé—´ï¼šåŸºç¡€
ä½¿ç”¨å‘½åç©ºé—´ï¼šåå¤‡å…¨å±€å‡½æ•°/å¸¸é‡
smartyåŸºç¡€å®‰è£…
smartyè¿›é˜¶å®‰è£…
]]></content>
      <categories>
        <category>engineering</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>æ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»é›¶å¼€å§‹æ‰“é€ è‡ªå·±çš„PHPæ¡†æ¶â€”â€”ç¬¬1ç« </title>
    <url>/dev-vkphp-1/</url>
    <content><![CDATA[ç›®æ ‡æœ¬ç¯‡ï¼Œæˆ‘ä»¬æ¥å®ç°ç±»åº“è‡ªåŠ¨åŠ è½½ï¼Œä»¥åŠè·¯ç”±è§£æã€‚


ç±»åº“è‡ªåŠ¨åŠ è½½å¸¸è§„åŠ è½½å¸¸è§„åŠ è½½ä¸€èˆ¬ä½¿ç”¨includeæˆ–è€…requireï¼Œå®ƒä»¬æœ€æ ¹æœ¬çš„åŒºåˆ«åœ¨äºé”™è¯¯å¤„ç†çš„æ–¹å¼ä¸ä¸€æ ·ã€‚ 
includeåŒ…æ‹¬å¹¶è¿è¡ŒæŒ‡å®šæ–‡ä»¶ã€‚includeä¸€ä¸ªæ–‡ä»¶å­˜åœ¨é”™è¯¯çš„è¯ï¼Œé‚£ä¹ˆç¨‹åºä¸ä¼šä¸­æ–­ï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œï¼Œå¹¶æ˜¾ç¤ºä¸€ä¸ªè­¦å‘Šé”™è¯¯ã€‚
include_onceçš„ä½œç”¨å’Œincludeå‡ ä¹ç›¸åŒï¼Œå”¯ä¸€çš„å·®åˆ«åœ¨äºå¯¼å…¥ä¹‹å‰ä¼šæ£€æŸ¥è¦å¯¼å…¥çš„æ–‡ä»¶æ˜¯å¦å·²ç»è¢«å¯¼å…¥è¿‡äº†ï¼Œå¦‚æœæœ‰çš„è¯å°±ä¸ä¼šå†æ¬¡é‡å¤å¯¼å…¥ã€‚
requireä¼šå°†ç›®æ ‡æ–‡ä»¶çš„å†…å®¹è¯»å…¥ï¼Œå¹¶ä¸”æŠŠæœ¬èº«æ›¿æ¢æˆè¿™äº›è¯»å…¥çš„å†…å®¹ã€‚requireä¸€ä¸ªæ–‡ä»¶å­˜åœ¨é”™è¯¯çš„è¯ï¼Œé‚£ä¹ˆç¨‹åºå°±ä¼šä¸­æ–­æ‰§è¡Œäº†ï¼Œå¹¶æ˜¾ç¤ºè‡´å‘½é”™è¯¯ã€‚
require_onceçš„ä½œç”¨å’Œrequireå‡ ä¹ç›¸åŒï¼Œå”¯ä¸€çš„å·®åˆ«åœ¨äºå¯¼å…¥ä¹‹å‰ä¼šæ£€æŸ¥è¦å¯¼å…¥çš„æ–‡ä»¶æ˜¯å¦å·²ç»è¢«å¯¼å…¥è¿‡äº†ï¼Œå¦‚æœæœ‰çš„è¯å°±ä¸ä¼šå†æ¬¡é‡å¤å¯¼å…¥ã€‚
åœ¨ä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶ï¼ˆç±»åº“ï¼‰çš„å‡½æ•°ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆä½¿ç”¨includeæˆ–è€…requireï¼ŒæŠŠè¯¥æ–‡ä»¶å¼•å…¥è¿›å½“å‰æ–‡ä»¶ï¼Œç„¶åæ‰èƒ½ä½¿ç”¨æ–‡ä»¶ä¸­çš„å‡½æ•°ã€‚
ä¾‹å¦‚æˆ‘ä»¬è¦æ–°å»ºä¸€ä¸ªrouteå¯¹è±¡ã€‚1ã€coreç›®å½•ä¸­ï¼Œæ–°å»ºroute.phpï¼š
&lt;?php/** * è·¯ç”±æ§åˆ¶ */namespace core;class route&#123;    public function __construct()&#123;        echo &#x27;route is ready!&#x27;;    &#125;&#125;

2ã€æ ¹ç›®å½•ä¸‹index.phpä¸­ï¼Œæ·»åŠ ï¼š
$route = new \core\route();

ä¼šæŠ¥é”™Fatal error: Class â€˜core\routeâ€™ not found inâ€¦
éœ€è¦æ”¹æˆï¼š
include &#x27;\core\route.php&#x27;;$route = new \core\route();

æˆ–è€…ï¼š
require &#x27;\core\route.php&#x27;;$route = new \core\route();

è‡ªåŠ¨åŠ è½½bool spl_autoload_register ([ callable $autoload_function [, bool $throw = true [, bool $prepend = false ]]] )

å°†å‡½æ•°æ³¨å†Œåˆ°SPL __autoloadå‡½æ•°é˜Ÿåˆ—ä¸­ã€‚å¦‚æœè¯¥é˜Ÿåˆ—ä¸­çš„å‡½æ•°å°šæœªæ¿€æ´»ï¼Œåˆ™æ¿€æ´»å®ƒä»¬ã€‚æˆåŠŸæ—¶è¿”å› TRUEï¼Œå¤±è´¥æ—¶è¿”å› FALSEã€‚
spl_autoload_registerçš„ä¸€èˆ¬ç”¨æ³•ï¼š
spl_autoload_register(function ($class_name) &#123;    require_once $class_name . &#x27;.php&#x27;;&#125;);$route = new \core\route();

åœ¨æ–°å»ºrouteå¯¹è±¡æ—¶ï¼Œclass_nameä¹Ÿå°±æ˜¯\core\routeä¼šä¼ å…¥åˆ°spl_autoload_registerå‡½æ•°ä¸­ï¼Œè¯¥å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚å›è°ƒå‡½æ•°æ‹¿åˆ°class_nameï¼Œç„¶åè¿›è¡Œæ–‡ä»¶çš„å¼•å…¥ã€‚
ä¹Ÿå°±æ˜¯è¯´ï¼Œå’Œå¸¸è§„åŠ è½½ç›¸æ¯”ï¼Œä½¿ç”¨è‡ªåŠ¨åŠ è½½ï¼Œæˆ‘ä»¬ä¸å¿…å¯¹æ¯ä¸€ä¸ªç±»åº“å•ç‹¬è¿›è¡Œå¼•å…¥ã€‚
è‡ªåŠ¨åŠ è½½è¿›é˜¶ä¸Šä¾‹ä¸­ï¼Œspl_autoload_registerçš„å›è°ƒå‡½æ•°æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè€Œä¸”æ¯”è¾ƒç®€å•ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥å†™ä¸€ä¸ªæ›´é«˜çº§çš„å›è°ƒå‡½æ•°ã€‚æ–°å»ºaotuload.phpï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?php/** * è‡ªåŠ¨åŠ è½½ç±»åº“ */namespace core;class autoload&#123;    public static function load($class_name)&#123;        if(file_exists($class_name.&#x27;.php&#x27;))&#123;            require_once $class_name.&#x27;.php&#x27;;            return true;        &#125;else&#123;            echo &#x27;error: unable to load &#x27;.$class_name.&#x27;.php&#x27;;            return false;        &#125;    &#125;&#125;

ä½¿ç”¨çš„æ—¶å€™ï¼Œæ”¹æˆï¼š
include CORE.&#x27;/autoload.php&#x27;;spl_autoload_register(&#x27;\core\autoload::load&#x27;);$route = new \core\route();

åŠ è½½æœºåˆ¶ç®€æåœ¨ä½¿ç”¨includeçš„æ—¶å€™ï¼Œä¼šç”¨åˆ°phpæ–‡ä»¶ç³»ç»Ÿã€‚åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­è®¿é—®ä¸€ä¸ªæ–‡ä»¶æœ‰ä¸‰ç§æ–¹å¼ï¼š
1ã€ç›¸å¯¹æ–‡ä»¶åå½¢å¼å¦‚route.phpã€‚å®ƒä¼šè¢«è§£æä¸º include_path/route.phpï¼Œå…¶ä¸­ include_path è¡¨ç¤º.;C:/laragon/bin/php/php-5.6.16/PEAR ã€‚å‡è®¾å½“å‰ç›®å½•æ˜¯C:/laragon/www/vkphpï¼Œåˆ™è¯¥æ–‡ä»¶åä¾æ¬¡è¢«è§£æä¸ºï¼š

C:/laragon/www/vkphp/route.php
C:/laragon/bin/php/php-5.6.16/PEAR/route.php

2ã€ç›¸å¯¹è·¯å¾„åå½¢å¼å¦‚core/route.phpï¼Œå®ƒä¼šè¢«è§£æä¸º include_path/core/route.phpã€‚å‡è®¾å½“å‰ç›®å½•æ˜¯C:/laragon/www/vkphpï¼Œåˆ™è¯¥æ–‡ä»¶åä¾æ¬¡è¢«è§£æä¸ºï¼š

C:/laragon/www/vkphp/core/route.php
C:/laragon/bin/php/php-5.6.16/PEAR/core/route.php

3ã€ç»å¯¹è·¯å¾„åå½¢å¼å¦‚/core/route.phpï¼Œåœ¨linuxç³»ç»Ÿä¸­ï¼Œå®ƒä¼šè¢«è§£æä¸º/core/route.phpï¼›åœ¨windowsç³»ç»Ÿä¸­ï¼Œå®ƒä¼šè¢«è§£æä¸º include_path/core/route.phpï¼Œå’Œç›¸å¯¹è·¯å¾„ä¸€æ ·ã€‚
ç»å¯¹è·¯å¾„åå½¢å¦‚C:/laragon/www/vkphp/core/route.php æˆ–è€…C:\laragon\www\vkphp\core\route.php æˆ–è€… C:\\laragon\\www\\vkphp\\core\\route.php ï¼Œåœ¨windowsç³»ç»Ÿä¸­ï¼Œä¼šè¢«è§£æä¸ºC:/laragon/www/vkphp/core/route.phpã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œwindowsä¸­æ–œçº¿å’Œåæ–œçº¿å’ŒåŒåæ–œçº¿æ•ˆæœç›¸åŒã€‚
è·å–include_pathå’Œè®¾ç½®include_pathçš„æ —å­ï¼š
echo get_include_path();ini_set(&#x27;include_path&#x27;, ini_get(&#x27;include_path&#x27;).PATH_SEPARATOR.&#x27;lib_path/libs&#x27;);echo get_include_path();

è·¯ç”±æ§åˆ¶éšè—index.php1ã€è®¿é—®åœ°å€ http://vkphp.dev/index.php ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬çœ‹åˆ°â€œhelloworldâ€å’Œâ€œroute is ready!â€ã€‚
2ã€è®¿é—®åœ°å€ http://vkphp.dev/index.php/index/index ï¼Œå¯ä»¥çœ‹åˆ°åŒæ ·çš„ä¿¡æ¯ã€‚
3ã€è®¿é—®åœ°å€ http://vkphp.dev/index/index ï¼Œåˆ™ä¼šæŠ¥404é”™è¯¯ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æ€æ ·éšè—æ‰index.phpå‘¢ï¼Ÿç­”æ¡ˆæ˜¯æ·»åŠ .htaccessã€‚
åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ·»åŠ .htaccessï¼Œå†…å®¹å¦‚ä¸‹ï¼š
Options +FollowSymLinks  IndexIgnore */*  RewriteEngine on  # if a directory or a file exists, use it directly  RewriteCond %&#123;REQUEST_FILENAME&#125; !-f  RewriteCond %&#123;REQUEST_FILENAME&#125; !-d# otherwise forward it to index.php  RewriteRule . index.php

4ã€è®¿é—®åœ°å€ http://vkphp.dev/index/index ï¼Œå¯ä»¥çœ‹åˆ°å’Œ1ã€2ä¸­ç›¸åŒçš„ä¿¡æ¯ã€‚
è·å–URLä¸­çš„æ§åˆ¶å™¨å’Œæ–¹æ³•&lt;?php/** * è·¯ç”±æ§åˆ¶ */namespace core;class route&#123;    public $ctrl;    public $action;    public function __construct()&#123;        //echo &#x27;route is ready!&#x27;;        /**         * 1ã€éšè—index.php         * 2ã€è·å–URLä¸­çš„æ§åˆ¶å™¨å’Œæ–¹æ³•         */        if(isset($_SERVER[&#x27;REQUEST_URI&#x27;]) &amp;&amp; $_SERVER[&#x27;REQUEST_URI&#x27;] != &#x27;/&#x27;)&#123;            $path = $_SERVER[&#x27;REQUEST_URI&#x27;];            $patharr = explode(&#x27;/&#x27;,trim($path, &#x27;/&#x27;));            p($patharr);            if(isset($patharr[0]))&#123;                if($patharr[0] != &#x27;index.php&#x27;)&#123;                    // çœç•¥äº†index.php                    $this-&gt;ctrl = $patharr[0];                    if(isset($patharr[1]))&#123;                        $this-&gt;action = $patharr[1];                    &#125; else&#123;                        $this-&gt;action = &#x27;index&#x27;;                    &#125;                &#125;else&#123;                    // æ²¡çœç•¥index.php                    if(isset($patharr[1]))&#123;                        $this-&gt;ctrl = $patharr[1];                    &#125;                    if(isset($patharr[2]))&#123;                        $this-&gt;action = $patharr[2];                    &#125; else&#123;                        $this-&gt;action = &#x27;index&#x27;;                    &#125;                &#125;            &#125;else&#123;                $this-&gt;ctrl = &#x27;index&#x27;;                $this-&gt;action = &#x27;index&#x27;;            &#125;        &#125;else&#123;            $this-&gt;ctrl = &#x27;index&#x27;;            $this-&gt;action = &#x27;index&#x27;;        &#125;    &#125;&#125;

è®¿é—®åœ°å€ http://vkphp.dev/index/index æˆ–è€… http://vkphp.dev/index.php/index/index ï¼Œå³å¯çœ‹åˆ°æ‰“å°å‡ºçš„patharrä¿¡æ¯ã€‚
è·å–URLä¸­çš„å‚æ•°&lt;?php/** * è·¯ç”±æ§åˆ¶ */namespace core;class route&#123;    public $ctrl;    public $action;    public $params=array();    public function __construct()&#123;        //echo &#x27;route is ready!&#x27;;        /**         * 1ã€éšè—index.php         * 2ã€è·å–URLä¸­çš„æ§åˆ¶å™¨å’Œæ–¹æ³•         * 3ã€è·å–URLä¸­çš„å‚æ•°         */        if(isset($_SERVER[&#x27;REQUEST_URI&#x27;]) &amp;&amp; $_SERVER[&#x27;REQUEST_URI&#x27;] != &#x27;/&#x27;)&#123;            $path = $_SERVER[&#x27;REQUEST_URI&#x27;];            $patharr = explode(&#x27;/&#x27;,trim($path, &#x27;/&#x27;));            //p($patharr);            if(isset($patharr[0]))&#123;                if($patharr[0] != &#x27;index.php&#x27;)&#123;                    // çœç•¥äº†index.php                    $this-&gt;ctrl = $patharr[0];                    if(isset($patharr[1]))&#123;                        $this-&gt;action = $patharr[1];                    &#125; else&#123;                        $this-&gt;action = &#x27;index&#x27;;                    &#125;                    $count = count($patharr);                    $i=2;                    while($i &lt; $count)&#123;                        $this-&gt;params[$patharr[$i]] = $patharr[$i+1];                        $i = $i + 2;                    &#125;                &#125;else&#123;                    // æ²¡çœç•¥index.php                    if(isset($patharr[1]))&#123;                        $this-&gt;ctrl = $patharr[1];                    &#125;                    if(isset($patharr[2]))&#123;                        $this-&gt;action = $patharr[2];                    &#125; else&#123;                        $this-&gt;action = &#x27;index&#x27;;                    &#125;                    $count = count($patharr);                    $i=3;                    while($i &lt; $count)&#123;                        $this-&gt;params[$patharr[$i]] = $patharr[$i+1];                        $i = $i + 2;                    &#125;                &#125;            &#125;else&#123;                $this-&gt;ctrl = &#x27;index&#x27;;                $this-&gt;action = &#x27;index&#x27;;            &#125;        &#125;else &#123;            $this-&gt;ctrl = &#x27;index&#x27;;            $this-&gt;action = &#x27;index&#x27;;        &#125;        p($this-&gt;params);    &#125;&#125;

è®¿é—®åœ°å€ http://vkphp.dev/index/index/id/3/name/voidking æˆ–è€… http://vkphp.dev/index.php/index/index/id/3/name/voidking ï¼Œå³å¯çœ‹åˆ°æ‰“å°å‡ºçš„paramsä¿¡æ¯ã€‚
æ”¯æŒlocalhostè®¿é—®åœ°å€ http://localhost/vkphp/index.php/index/index/id/3/name/voidking ï¼Œæ— æ³•æ­£å¸¸è·å–æ§åˆ¶å™¨ã€æ–¹æ³•å’Œå‚æ•°ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š
&lt;?php/** * è·¯ç”±æ§åˆ¶ */namespace core;class route&#123;    public $ctrl=&#x27;index&#x27;;    public $action=&#x27;index&#x27;;    public $params=array();    public function __construct()&#123;        //echo &#x27;route is ready!&#x27;;        /**         * 1ã€éšè—index.php         * 2ã€è·å–URLä¸­çš„æ§åˆ¶å™¨å’Œæ–¹æ³•         * 3ã€è·å–URLä¸­çš„å‚æ•°         */        if(isset($_SERVER[&#x27;REQUEST_URI&#x27;]) &amp;&amp; $_SERVER[&#x27;REQUEST_URI&#x27;] != &#x27;/&#x27; )&#123;            $path = $_SERVER[&#x27;REQUEST_URI&#x27;];            $patharr = explode(&#x27;/&#x27;,trim($path, &#x27;/&#x27;));        &#125;else&#123;            $patharr = array();        &#125;                if(isset($_SERVER[&#x27;HTTP_HOST&#x27;]) &amp;&amp; ($_SERVER[&#x27;HTTP_HOST&#x27;] == &#x27;localhost&#x27; || $_SERVER[&#x27;HTTP_HOST&#x27;] == &#x27;127.0.0.1&#x27;) )&#123;            // å»æ‰é¡¹ç›®åç§°            $patharr = array_slice($patharr,1,count($patharr)-1);        &#125;        if(isset($patharr[0]))&#123;            if($patharr[0] == &#x27;index.php&#x27;)&#123;                // å»æ‰index.php                $patharr = array_slice($patharr,1,count($patharr)-1);            &#125;            if(isset($patharr[0]))&#123;                $this-&gt;ctrl = $patharr[0];            &#125;            if(isset($patharr[1]))&#123;                $this-&gt;action = $patharr[1];            &#125;                         $count = count($patharr);            $i=2;            while($i &lt; $count)&#123;                if(isset($patharr[$i+1]))&#123;                    $this-&gt;params[$patharr[$i]] = $patharr[$i+1];                &#125;                $i = $i + 2;            &#125;        &#125;                p($this-&gt;ctrl);        p($this-&gt;action);        p($this-&gt;params);    &#125;&#125;

æºç åˆ†äº«https://github.com/voidking/vkphp/releases/tag/v1.1.0
ä¹¦ç­¾ä»é›¶å¼€å§‹æ‰“é€ è‡ªå·±çš„PHPæ¡†æ¶
PHP æª”æ¡ˆå¼•å…¥è·¯å¾‘å•é¡Œ
]]></content>
      <categories>
        <category>engineering</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>æ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»é›¶å¼€å§‹æ‰“é€ è‡ªå·±çš„PHPæ¡†æ¶â€”â€”ç¬¬0ç« </title>
    <url>/dev-vkphp-0/</url>
    <content><![CDATA[å‰è¨€ä½¿ç”¨è¿‡thinkphpå’Œyiiï¼Œæ¶‰çŒè¿‡shopncã€‚å¸‚åœºä¸Šå·²ç»æœ‰äº†è¿™ä¹ˆå¤šå¥½çš„æ¡†æ¶ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å¼€å‘è‡ªå·±çš„æ¡†æ¶ï¼Ÿç­”ï¼šå‡è£…å¤§ç¥ã€‚ä¸ºäº†åœ¨è£…ç¥çš„é“è·¯ä¸Šèµ°çš„æ›´è¿œï¼ŒéƒåŒå­¦å†³å®šå¼€å‘ä¸€ä¸ªè‡ªå·±çš„phpæ¡†æ¶ï¼Œå‘½åä¸ºvkphpã€‚


æ¡†æ¶è¿è¡Œæµç¨‹1ã€å…¥å£æ–‡ä»¶
2ã€å®šä¹‰å¸¸é‡
3ã€å¼•å…¥å‡½æ•°åº“
4ã€è‡ªåŠ¨åŠ è½½ç±»
5ã€å¯åŠ¨æ¡†æ¶
6ã€è·¯ç”±è§£æ
7ã€åŠ è½½æ§åˆ¶å™¨
8ã€è¿”å›ç»“æœ
helloworldé›†æˆç¯å¢ƒé›†æˆå¼€å‘ç¯å¢ƒä½¿ç”¨laragonï¼Œåœ¨wwwç›®å½•ä¸‹æ–°å»ºvkphpé¡¹ç›®ç›®å½•ã€‚
é¡¹ç›®ç»“æ„vkphpâ”‚  index.phpâ”‚  README.mdâ”‚â”œâ”€appâ””â”€core    â”‚  vk.php    â”‚    â””â”€common            function.php

index.php&lt;?php/*å…¥å£æ–‡ä»¶1ã€å®šä¹‰å¸¸é‡2ã€åŠ è½½å‡½æ•°åº“3ã€å¯åŠ¨æ¡†æ¶*/define(&#x27;VKPHP&#x27;,realpath(&#x27;./&#x27;)); //è·å–é¡¹ç›®æ‰€åœ¨æ ¹ç›®å½•define(&#x27;CORE&#x27;,VKPHP.&#x27;/core&#x27;); //æ ¸å¿ƒæ–‡ä»¶æ‰€åœ¨ç›®å½•define(&#x27;APP&#x27;,VKPHP.&#x27;/app&#x27;); //åº”ç”¨æ–‡ä»¶æ‰€åœ¨ç›®å½•define(&#x27;DEBUG&#x27;,true); //æ˜¯å¦å¼€å¯è°ƒè¯•if(DEBUG)&#123;    ini_set(&#x27;display_errors&#x27;, &#x27;On&#x27;);&#125;else&#123;    ini_set(&#x27;display_errors&#x27;, &#x27;Off&#x27;);&#125;include CORE.&#x27;/common/function.php&#x27;;//p(VKPHP);include CORE.&#x27;/vk.php&#x27;;\core\vk::run();

function.php&lt;?phpfunction p($var)&#123;    if(is_null($var))&#123;        var_dump(NULL);    &#125;else if(is_bool($var))&#123;        var_dump($var);    &#125;else&#123;        echo &#x27;&lt;p&gt;&#x27;. print_r($var, true) .&#x27;&lt;/p&gt;&#x27;;    &#125;&#125;

vk.php&lt;?phpnamespace core;class vk&#123;    public function run()&#123;        p(&#x27;helloworld&#x27;);    &#125;&#125;

æµ‹è¯•è®¿é—®å¯åŠ¨laragonï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—® http://vkphp.dev æˆ–è€… http://vkphp.dev/index.php ï¼Œå³å¯çœ‹åˆ°â€œhelloworldâ€ã€‚
æºç åˆ†äº«https://github.com/voidking/vkphp/releases/tag/v1.0.0
ä¹¦ç­¾ä»é›¶å¼€å§‹æ‰“é€ è‡ªå·±çš„PHPæ¡†æ¶
]]></content>
      <categories>
        <category>engineering</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>æ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Navicatå¯¹æ¯”å’ŒåŒæ­¥Mysql</title>
    <url>/dev-navicat-mysqldiff/</url>
    <content><![CDATA[é—®é¢˜çº¿ä¸Šä¸€ä»½æ•°æ®åº“ï¼Œæµ‹è¯•ç¯å¢ƒä¸€ä»½æ•°æ®åº“ã€‚æ€æ ·çŸ¥é“ä¸¤ä¸ªæ•°æ®åº“ä¹‹é—´çš„è¡¨ç»“æ„å’Œæ•°æ®å·®å¼‚ï¼Ÿ
1ã€è¡¨ç»“æ„å¯¹æ¯”ï¼šå¯¹æ¯”å¼€å‘åº“å’Œæ­£å¼åº“ä¹‹é—´çš„è¡¨ç»“æ„ï¼Œå“ªä¸ªè¡¨ç»“æ„æœ‰å­—æ®µçš„å¢åŠ å‡å°‘ï¼Œæˆ–è€…å­—æ®µç±»å‹çš„æ”¹å˜ï¼Œå¹¶ç”Ÿæˆsqlè¿›è¡Œç»“æ„çš„åŒæ­¥ã€‚
2ã€æ•°æ®å¯¹æ¯”ï¼šå¯¹æ¯”ä¸¤ä¸ªæ•°æ®åº“ä¸­çš„æŸä¸ªè¡¨çš„æ•°æ®å·®å¼‚ï¼Œç”Ÿæˆsqlè„šæœ¬è¿›è¡Œä¸¤ä¸ªåº“çš„åŒæ­¥ã€‚


è§£å†³åŠæ³•å¾ˆç®€å•ï¼Œä½¿ç”¨ navicat ã€‚
å¾ˆå¤šå¼€å‘è€…ä½¿ç”¨navicatåˆ›å»ºæ•°æ®åº“ã€åˆ›å»ºè¡¨ã€å¢åˆ æŸ¥æ”¹ã€å¯¼å‡ºsqlæ–‡ä»¶ã€å¯¼å…¥sqlæ–‡ä»¶ç­‰ã€‚ä½†æ˜¯ï¼Œåªæœ‰å°‘æ•°äººçŸ¥é“ï¼Œnavicatè¿˜æœ‰å¼ºå¤§çš„å¯¹æ¯”åŒæ­¥åŠŸèƒ½ã€‚
æƒ…æ™¯æè¿°ä¸œåŒ—é«˜å¸ˆå°±ä¸šè”ç›Ÿç½‘ï¼Œçº¿ä¸Šï¼ˆé˜¿é‡Œäº‘ï¼‰æœ‰ä¸€ä»½æ•°æ®åº“db_new_dsjywï¼Œæœ¬åœ°æœ‰ä¸€ä»½æ•°æ®åº“ä¹Ÿå«db_new_dsjywã€‚å› ä¸ºåœ¨æœ¬åœ°è¿›è¡Œå¼€å‘ï¼Œæ‰€ä»¥æœ¬åœ°çš„æ•°æ®åº“è¡¨ç»“æ„æ˜¯æœ€æ–°çš„ï¼Œè€Œçº¿ä¸Šçš„æ•°æ®åº“æ•°æ®æ˜¯æœ€æ–°çš„ã€‚å¼€å‘å®Œæˆè¦æŠŠæœ¬åœ°æ•°æ®åº“è¡¨ç»“æ„åŒæ­¥åˆ°çº¿ä¸Šï¼Œè¯¥æ€ä¹ˆåšï¼Ÿ
è¡¨ç»“æ„åŒæ­¥1ã€åœ¨navicatä¸­ï¼Œé¦–å…ˆç¡®è®¤æœ¬åœ°æ•°æ®åº“è¿æ¥å’Œçº¿ä¸Šæ•°æ®åº“è¿æ¥éƒ½æ­£å¸¸ã€‚
2ã€å·¥å…·ï¼Œç»“æ„åŒæ­¥ã€‚
3ã€ç»“æ„åŒæ­¥çª—å£ï¼Œå¸¸è§„é€‰é¡¹å¡ä¸­ï¼Œæºè¿æ¥é€‰æ‹©æœ¬åœ°ï¼Œæºæ•°æ®åº“é€‰æ‹©db_new_dsjywï¼›ç›®æ ‡è¿æ¥é€‰æ‹©é˜¿é‡Œäº‘ï¼Œç›®æ ‡æ•°æ®åº“é€‰æ‹©db_new_dsjywã€‚
4ã€å¯¹æ¯”é€‰é¡¹å…¨éƒ¨å‹¾é€‰ï¼Œé™¤äº†å¯¹æ¯”è‡ªåŠ¨é€’å¢å€¼ï¼Œè¿è¡Œé€‰é¡¹å…¨éƒ¨å‹¾é€‰ã€‚
5ã€å•å‡»â€œå¯¹æ¯”â€ï¼Œå³å¯è·³è½¬åˆ°å¯¹æ¯”é€‰é¡¹å¡ã€‚
6ã€å¯¹æ¯”å®Œæˆï¼Œå³é”®æŸ¥è¯¢ä¿®æ”¹å°çª—å£ï¼Œå³å¯çœ‹åˆ°â€œè¿è¡ŒæŸ¥è¯¢â€å‰çš„é€‰é¡¹ã€‚
7ã€å•å‡»â€œå…¨éƒ¨å‹¾é€‰â€ï¼Œç„¶åå•å‡»â€œå·²å‹¾é€‰è„šæœ¬çš„è¯¦ç»†ä¿¡æ¯â€ï¼Œå¯ä»¥çœ‹åˆ°è„šæœ¬è¯¦ç»†ä¿¡æ¯ã€‚
8ã€å…¨é€‰ï¼Œå¤åˆ¶ï¼Œä¿å­˜ä¸ºsqlè„šæœ¬ï¼Œç”¨äºä¿®æ”¹çº¿ä¸Šçš„æ•°æ®åº“è¡¨ç»“æ„ã€‚
9ã€å•å‡»â€œè¿è¡ŒæŸ¥è¯¢â€ï¼Œå³å¯ä¿®æ”¹çº¿ä¸Šæ•°æ®åº“è¡¨ç»“æ„ã€‚æˆ–è€…ç›´æ¥åœ¨çº¿ä¸Šæ•°æ®åº“ä¸­æ‰§è¡Œç¬¬8æ­¥ä¸­å¾—åˆ°çš„sqlæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹çº¿ä¸Šæ•°æ®åº“è¡¨ç»“æ„ã€‚
è¡¨æ•°æ®åŒæ­¥åœ¨æœ¬æƒ…æ™¯ä¸­ï¼Œä¸éœ€è¦åŒæ­¥è¡¨æ•°æ®ã€‚å¦‚æœéè¦åŒæ­¥çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦å…ˆæŠŠçº¿ä¸Šçš„æ•°æ®åŒæ­¥åˆ°æœ¬åœ°ï¼Œç„¶åå†æŠŠæœ¬åœ°æ•°æ®åŒæ­¥åˆ°çº¿ä¸Šã€‚å½“ç„¶ï¼Œæ›´å¥½çš„åšæ³•æ˜¯çº¿ä¸Šæ–°å»ºæ•°æ®åº“db_new_dsjyw2ï¼Œç„¶ååˆ‡æ¢åˆ°db_new_dsjyw2ï¼Œä¸‡ä¸€åŒæ­¥é™¤äº†é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ‡æ¢å›db_new_dsjywã€‚
ä¸‹é¢æˆ‘ä»¬å°è¯•ä¸‹çº¿ä¸Šæ•°æ®åŒæ­¥åˆ°æœ¬åœ°ã€‚
1ã€åœ¨navicatä¸­ï¼Œé¦–å…ˆç¡®è®¤æœ¬åœ°æ•°æ®åº“è¿æ¥å’Œçº¿ä¸Šæ•°æ®åº“è¿æ¥éƒ½æ­£å¸¸ã€‚
2ã€å·¥å…·ï¼Œæ•°æ®åŒæ­¥ã€‚
3ã€æ•°æ®åŒæ­¥çª—å£ï¼Œå¸¸è§„é€‰é¡¹å¡ä¸­ï¼Œæºè¿æ¥é€‰æ‹©é˜¿é‡Œäº‘ï¼Œæºæ•°æ®åº“é€‰æ‹©db_new_dsjywï¼›ç›®æ ‡è¿æ¥é€‰æ‹©æœ¬æœºï¼Œç›®æ ‡æ•°æ®åº“é€‰æ‹©db_new_dsjywã€‚
4ã€å•å‡»â€œå…¨é€‰â€ï¼Œæºè¡¨å‡ºç°åœ¨ç›®æ ‡è¡¨ä¸­ã€‚
5ã€å•å‡»â€œå¼€å§‹â€ï¼Œå¼€å§‹æ•°æ®åŒæ­¥ã€‚
åè®°æœ‰åŒå­¦æ¨èmysqldiffï¼Œmysqldiffå·¥å…·æ˜¯å®˜æ–¹mysql-utilitieså·¥å…·é›†çš„ä¸€ä¸ªè„šæœ¬ï¼Œå¯ä»¥ç”¨æ¥å¯¹æ¯”ä¸åŒæ•°æ®åº“ä¹‹é—´çš„è¡¨ç»“æ„ï¼Œæˆ–è€…åŒä¸ªæ•°æ®åº“é—´çš„è¡¨ç»“æ„ã€‚å¦‚æœåœ¨windowsä¸‹ï¼Œç›´æ¥ä¸‹è½½å®‰è£…mysql-utilitieså°±å¯ä»¥äº†ã€‚
ç„¶è€Œï¼Œä¸Šæ‰‹ä½“éªŒä¸æ„‰å¿«ï¼Œé‚æ”¾å¼ƒï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´è‡ªè¡Œç™¾åº¦ã€‚
ä¹¦ç­¾10ç§’é’Ÿå®ŒæˆMySQLæ•°æ®åº“ç»“æ„å¯¹æ¯”
MySQL å¯¹æ¯”æ•°æ®åº“è¡¨ç»“æ„
mysqldiff â€” Identify Differences Among Database Objects
]]></content>
      <categories>
        <category>engineering</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>yiiæ¡†æ¶æ•´åˆsmartyä½¿ç”¨è‡ªå®šä¹‰éªŒè¯ç </title>
    <url>/dev-yii-smarty-captcha/</url>
    <content><![CDATA[å‰è¨€æŠŠæ¨¡æ¿å¼•æ“æ¢æˆsmartyåï¼Œyiiæ¡†æ¶è‡ªå¸¦çš„captchaï¼Œéå¸¸ä¸å‹å¥½ï¼Œä½¿ç”¨èµ·æ¥ä¸æ–¹ä¾¿ã€‚å¹²è„†è‡ªå·±å°è£…ä¸€ä¸ªphpå›¾ç‰‡éªŒè¯ç æ¨¡å—ï¼Œæƒ³è¦ç§»æ¤åˆ°å…¶ä»–æ¡†æ¶ï¼Œç®€å•ä¿®æ”¹å³å¯ã€‚


è®¾è®¡æ€è·¯PHPç”ŸæˆéªŒè¯ç çš„åŸç†ï¼šä½¿ç”¨PHPçš„GDåº“ï¼Œç”Ÿæˆä¸€å¼ å¸¦éªŒè¯ç çš„å›¾ç‰‡ï¼Œå¹¶å°†éªŒè¯ç ä¿å­˜åœ¨Sessionä¸­ã€‚PHPç”ŸæˆéªŒè¯ç çš„å¤§è‡´æµç¨‹æœ‰ï¼š
1ã€äº§ç”Ÿä¸€å¼ pngçš„å›¾ç‰‡ï¼›
2ã€ä¸ºå›¾ç‰‡è®¾ç½®èƒŒæ™¯è‰²ï¼›
3ã€è®¾ç½®å­—ä½“é¢œè‰²å’Œæ ·å¼ï¼›
4ã€äº§ç”ŸNä½æ•°çš„éšæœºçš„éªŒè¯ç ï¼›
5ã€æŠŠäº§ç”Ÿçš„æ¯ä¸ªå­—ç¬¦è°ƒæ•´æ—‹è½¬è§’åº¦å’Œä½ç½®ç”»åˆ°pngå›¾ç‰‡ä¸Šï¼›
6ã€åŠ å…¥å™ªç‚¹å’Œå¹²æ‰°çº¿é˜²æ­¢æ³¨å†Œæœºå™¨åˆ†æåŸå›¾ç‰‡æ¥æ¶æ„ç ´è§£éªŒè¯ç ï¼›
7ã€è¾“å‡ºå›¾ç‰‡ï¼›
8ã€é‡Šæ”¾å›¾ç‰‡æ‰€å å†…å­˜ã€‚
é¡¹ç›®ç»“æ„1ã€ã€Šyiiæ¡†æ¶å®æˆ˜ã€‹çš„åŸºç¡€ä¸Šï¼Œåœ¨controllersç›®å½•ä¸­æ–°å»ºutilç›®å½•ï¼Œutilç›®å½•ä¸­æ–°å»ºCaptchaController.phpï¼Œç”¨æ¥å®ç°éªŒè¯ç æ¨¡å—ã€‚
2ã€åœ¨webä¸­æ–°å»ºfontç›®å½•ï¼Œfontç›®å½•ä¸­æ”¾å…¥å¾®è½¯é›…é»‘å­—ä½“msyh.ttfï¼Œç”¨æ¥æ˜¾ç¤ºéªŒè¯ç ä¸Šçš„å­—ä½“ã€‚

ä»£ç å®ç°&lt;?phpnamespace app\controllers\util;use Yii;use yii\filters\AccessControl;use yii\web\Controller;use yii\filters\VerbFilter;class CaptchaController extends Controller&#123;    public function actionIndex()    &#123;        echo &#x27;captcha index function&#x27;;    &#125;    public function actionGetcode()&#123;        session_start();        $response = Yii::$app-&gt;getResponse();        $response-&gt;format = $response::FORMAT_RAW;        $this-&gt;createCode(300,80,30);    &#125;    public function createCode($width,$height,$fontsize)&#123;        //è®¾ç½®éªŒè¯ç å›¾ç‰‡å¤§å°çš„å‡½æ•°        $image = imagecreate($width, $height);            //è®¾ç½®éªŒè¯ç é¢œè‰² imagecolorallocate(int im, int red, int green, int blue);        $bgcolor = imagecolorallocate($image,255,255,255); //#fff        //åŒºåŸŸå¡«å…… int imagefill(int im, int x, int y, int col) (x,y) æ‰€åœ¨çš„åŒºåŸŸç€è‰²,col è¡¨ç¤ºæ¬²æ¶‚ä¸Šçš„é¢œè‰²        imagefill($image, 0, 0, $bgcolor);                //è®¾ç½®å˜é‡        $captcha_code = &quot;&quot;;        //ç”Ÿæˆéšæœºçš„å­—æ¯å’Œæ•°å­—        for($i=0;$i&lt;4;$i++)&#123;                          //è®¾ç½®å­—ä½“é¢œè‰²ï¼Œéšæœºé¢œè‰²ï¼Œ0-120æ·±é¢œè‰²            $fontcolor = imagecolorallocate($image, rand(0,120),rand(0,120), rand(0,120));                 //$fontcolor = imagecolorallocate($image, 0, 0, 0);            //è®¾ç½®éœ€è¦éšæœºå–çš„å€¼ï¼Œå»æ‰å®¹æ˜“å‡ºé”™çš„å€¼å¦‚0å’Œoã€1å’Œlã€2å’Œz            $data =&#x27;abcdefghigkmnpqrstuvwxy3456789&#x27;;            //å–å‡ºå€¼ï¼Œå­—ç¬¦ä¸²æˆªå–æ–¹æ³•  strlenè·å–å­—ç¬¦ä¸²é•¿åº¦            $fontcontent = substr($data, rand(0,strlen($data)-1),1);            //è¿ç»­å®šä¹‰å˜é‡            $captcha_code .= $fontcontent;                            //imagestringè®¾ç½®å­—ä½“å¤§å°ï¼Œæœ€å¤§å€¼ä¸º5            //$fontsize = 5;             //è®¾ç½®åæ ‡            $x = ($i*$width/4)+rand(5,10);            $y = rand(($height+$fontsize)/2-5,($height+$fontsize)/2+5);            //imagestring($image,$fontsize,$x,$y,$fontcontent,$fontcolor);            imagettftext($image,$fontsize,rand(-10,10),$x,$y,$fontcolor,&#x27;font/msyh.ttf&#x27;,$fontcontent);        &#125;        //å­˜åˆ°session        $_SESSION[&#x27;captcha_code&#x27;] = $captcha_code;        //å¢åŠ å¹²æ‰°å…ƒç´ ï¼Œè®¾ç½®é›ªèŠ±ç‚¹        for($i=0;$i&lt;200;$i++)&#123;            //è®¾ç½®ç‚¹çš„é¢œè‰²ï¼Œ50-200é¢œè‰²æ¯”æ•°å­—æµ…ï¼Œä¸å¹²æ‰°é˜…è¯»            $pointcolor = imagecolorallocate($image,rand(50,200), rand(50,200), rand(50,200));                //imagesetpixel â€” ç”»ä¸€ä¸ªå•ä¸€åƒç´             imagesetpixel($image, rand(1,$width-1), rand(1,$height-1), $pointcolor);        &#125;        //å¢åŠ å¹²æ‰°å…ƒç´ ï¼Œè®¾ç½®æ¨ªçº¿        for($i=0;$i&lt;2;$i++)&#123;            //è®¾ç½®çº¿çš„é¢œè‰²            $linecolor = imagecolorallocate($image,rand(80,220), rand(80,220),rand(80,220));            //è®¾ç½®çº¿ï¼Œä¸¤ç‚¹ä¸€çº¿            imageline($image,rand(1,$width-1), rand(1,$height-1),rand(1,$width-1), rand(1,$height-1),$linecolor);        &#125;                 //è®¾ç½®å¤´éƒ¨ï¼Œimage/png        header(&#x27;Content-Type: image/png&#x27;);        //imagepng() å»ºç«‹pngå›¾å½¢å‡½æ•°        imagepng($image);        //imagedestroy() ç»“æŸå›¾å½¢å‡½æ•° é”€æ¯$image        imagedestroy($image);    &#125;    public function actionCheck($code)&#123;        session_start();        if(isset($_SESSION[&#x27;captcha_code&#x27;]))&#123;            if($_SESSION[&#x27;captcha_code&#x27;] == $code)&#123;                unset($_SESSION[&#x27;captcha_code&#x27;]);                $result = array(                    &#x27;code&#x27;=&gt; &#x27;0&#x27;,                    &#x27;ext&#x27;=&gt; &#x27;éªŒè¯æˆåŠŸ&#x27;                );            &#125;else&#123;                $result = array(                    &#x27;code&#x27;=&gt; &#x27;1&#x27;,                    &#x27;ext&#x27;=&gt; &#x27;éªŒè¯ç é”™è¯¯&#x27;                );            &#125;        &#125;else&#123;            $result = array(                &#x27;code&#x27;=&gt; &#x27;2&#x27;,                &#x27;ext&#x27;=&gt; &#x27;è¯·å…ˆåˆ·æ–°éªŒè¯ç &#x27;            );        &#125;        echo json_encode($result,JSON_UNESCAPED_UNICODE);    &#125; &#125;

ä½¿ç”¨æ¥å£è·å–éªŒè¯ç æ¥å£ï¼šhttp://localhost/basic/web/util/captcha/getcode
éªŒè¯éªŒè¯ç æ¥å£ï¼šhttp://localhost/basic/web/util/captcha/check?code=f7nh
æ˜¾ç¤ºåœ¨smartyæ¸²æŸ“çš„é¡µé¢ä¸­ï¼Œç›´æ¥ä½¿ç”¨éªŒè¯ç æ¥å£å³å¯æ˜¾ç¤ºå›¾ç‰‡ã€‚
&lt;p&gt;&lt;img id=&quot;captcha&quot; src=&quot;http://localhost/basic/web/util/captcha/getcode&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;è¯·è¾“å…¥éªŒè¯ç ï¼š&lt;input id=&quot;code&quot; type=&quot;text&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;input id=&quot;check&quot; type=&quot;button&quot; value=&quot;ç¡®å®š&quot;&gt;&lt;/p&gt;

åˆ·æ–°å¦‚æœè¦åˆ·æ–°éªŒè¯ç ï¼Œåœ¨jsä¸­é‡ç½®srcåœ°å€å³å¯ã€‚
$(&#x27;#captcha&#x27;).click(function()&#123;    var $new_src = &#x27;http://localhost/basic/web/util/captcha/getcode?&#x27;+Math.random();    $(this).attr(&#x27;src&#x27;,$new_src);&#125;);

éªŒè¯$(&#x27;#check&#x27;).click(function()&#123;    var data = &#123;        code: $(&#x27;#code&#x27;).val()    &#125;;    $.ajax(&#123;        url: &#x27;http://localhost/basic/web/util/captcha/check&#x27;,        type: &#x27;GET&#x27;,        dataType: &#x27;json&#x27;,        data: data,        success: function(data)&#123;            alert(data.ext);        &#125;,        error: function(xhr)&#123;            console.log(xhr);        &#125;    &#125;);&#125;);

æ•ˆæœæ¼”ç¤º
æºç åˆ†äº«1ã€ä¸‹è½½å®‰è£…ï¼šgit clone https://github.com/voidking/yii-basic.git basic
2ã€åˆ©ç”¨navicatç­‰å·¥å…·è¿æ¥åˆ°æœ¬åœ°mysqlæ•°æ®åº“ï¼Œåˆ›å»ºæ•°æ®åº“basicï¼Œåœ¨æ•°æ®åº“ä¸­åˆ›å»ºè¡¨bas_project(int id, varchar title, varchar content)ã€‚æ³¨æ„ï¼Œç¼–ç æ ¼å¼é€‰æ‹©utf8ã€‚
3ã€éªŒè¯ç æµ‹è¯•é¡µurlï¼šhttp://localhost/basic/web/util/captcha/index
ä¹¦ç­¾PHPç”Ÿæˆå„ç§éªŒè¯ç å’ŒAjaxéªŒè¯
PHPå¦‚ä½•å®ç°éªŒè¯ç 
]]></content>
      <categories>
        <category>engineering</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>yii</tag>
        <tag>éªŒè¯ç </tag>
      </tags>
  </entry>
  <entry>
    <title>PHPè°ƒè¯•ä¹‹Xdebug+PhpStorm</title>
    <url>/dev-php-debug-xdebug/</url>
    <content><![CDATA[å‰è¨€è¯¥æ€ä¹ˆå¼ºè°ƒè°ƒè¯•çš„é‡è¦æ€§å‘¢ï¼Ÿæˆ‘ä»¬ç”Ÿç—…çš„æ—¶å€™ï¼Œè¦å»çœ‹åŒ»ç”Ÿï¼ŒåŒ»ç”Ÿä¼šé€šè¿‡å„ç§ä»ªå™¨å¯¹æˆ‘ä»¬è¿›è¡Œæ£€æŸ¥ï¼Œå®šä½ç—…å› ï¼Œç„¶åç»™æˆ‘ä»¬æ²»ç–—ã€‚ç¨‹åºä¹Ÿä¼šç”Ÿç—…ï¼Œç”Ÿç—…çš„æ—¶å€™ï¼Œä½œä¸ºåŒ»ç”Ÿï¼ˆå¼€å‘è€…ï¼‰çš„æˆ‘ä»¬ï¼Œå°±è¦é€šè¿‡å„ç§åŠæ³•å®šä½bugï¼Œç„¶åä¿®æ”¹ä»£ç ã€‚å®šä½bugå¹¶ä¸”ä¿®æ”¹ä»£ç çš„è¿‡ç¨‹ï¼Œå°±æ˜¯è°ƒè¯•ã€‚
æœ€ç®€å•ç›´æ¥çš„è°ƒè¯•åŠæ³•æ˜¯æ‘˜å‡ºéœ€è¦è°ƒè¯•çš„éƒ¨åˆ†ï¼Œæ”¾å…¥ main.php ä¸­ï¼Œç„¶åè¿è¡Œè„šæœ¬ï¼šphp main.phpå‰ææ˜¯è°ƒè¯•ç¯å¢ƒè¦å®‰è£…å¥½phpï¼Œæ£€æŸ¥æ–¹æ³•ï¼šphp -v
ä½†æ˜¯ï¼Œè¿™ç§æ–¹æ³•å¹¶ä¸é€‚åˆé¡¹ç›®çš„è°ƒè¯•ï¼Œå› ä¸ºé¡¹ç›®ä¸­æ¶‰åŠåˆ°å¾ˆå¤šä¸Šä¸‹æ–‡ï¼Œæ¨¡æ‹Ÿèµ·æ¥ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚è¿™æ—¶å€™å°±éœ€è¦è°ƒè¯•å·¥å…·å‡ºåœºäº†ã€‚
PHPçš„è°ƒè¯•å·¥å…·æœ‰å¾ˆå¤šï¼Œæœ¬æ–‡è®°å½•ä¸€ä¸‹Xdebugçš„ä½¿ç”¨æ–¹æ³•ã€‚é…åˆä½¿ç”¨çš„é›†æˆç¯å¢ƒä¸ºlaragon-1.0ï¼ŒIDEä¸ºPhpStorm-2016.2.1ã€‚


å¯ç”¨Xdebug1ã€å¯åŠ¨laragonåï¼Œä»»åŠ¡æ å³é”®laragonå›¾æ ‡ï¼Œå®šä½åˆ°PHPï¼Œç„¶åå•å‡»php.iniã€‚ï¼ˆæˆ–è€…ç›´æ¥åˆ°laragonå®‰è£…ç›®å½•å¯»æ‰¾php.iniï¼Œç„¶åæ‰“å¼€å®ƒï¼‰
2ã€æ‰¾åˆ°[XDebug]ï¼Œç„¶åä¿®æ”¹å¦‚ä¸‹ï¼š
[XDebug]zend_extension=php_xdebug.dllxdebug.profiler_append=onxdebug.profiler_enable=onxdebug.profiler_enable_trigger=onxdebug.profiler_output_dir=&quot;C:/laragon/tmp/xdebug&quot;xdebug.profiler_output_name=&quot;cachegrind.out.%t-%s&quot;xdebug.remote_enable=onxdebug.remote_handler=&quot;dbgp&quot;xdebug.remote_host=&quot;127.0.0.1&quot;xdebug.remote_port=9000xdebug.trace_output_dir=&quot;C:/laragon/tmp/xdebug&quot;xdebug.idekey=PHPSTORM

3ã€è®¿é—®http://localhostï¼ŒæŸ¥çœ‹phpinfoã€‚
4ã€åœ¨ç½‘é¡µä¸­Ctrl+Fï¼Œæœç´¢â€œxdebugâ€ï¼Œå¦‚æœæ‰¾åˆ°äº†xdebugçš„é…ç½®ä¿¡æ¯ï¼Œåˆ™è¯æ˜xdebugå¯ç”¨æˆåŠŸã€‚
PhpStormé…ç½®1ã€æ‰“å¼€phpstormï¼ŒFileï¼ŒSettingsã€‚
2ã€æœç´¢â€œdebugâ€ï¼Œå¯ä»¥çœ‹åˆ°PHPä¸‹é¢çš„Debugï¼Œå•å‡»Debugã€‚
3ã€åœ¨xdebugæ ï¼ŒDebug porté»˜è®¤ç«¯å£ä¸º9000ï¼Œä¸€èˆ¬ä¸éœ€è¦ä¿®æ”¹ã€‚åŒæ—¶ï¼Œä¸‰ä¸ªé€‰é¡¹å…¨éƒ¨æ‰“é’©ã€‚
4ã€å±•å¼€Debugï¼Œå•å‡»DBGp Proxyï¼Œå¡«å…¥IDE keyä¸ºPHPSTORMï¼ŒHostä¸ºlocalhostï¼ŒPortä¸º80ã€‚å•å‡»OKï¼Œé€€å‡ºè®¾ç½®ã€‚
Debugé…ç½®1ã€Viewï¼ŒToolbarï¼Œæ˜¾ç¤ºå·¥å…·æ ã€‚
2ã€Viewï¼ŒTool Windowsï¼ŒProjectï¼Œæ˜¾ç¤ºé¡¹ç›®ç»“æ„ã€‚
3ã€å•å‡»å·¥å…·æ å‘ä¸‹çš„å°ä¸‰è§’ï¼ŒEdit Configurationsã€‚
4ã€åœ¨æ–°æ‰“å¼€çš„Run/Debug Configurationsçª—å£ä¸­ï¼Œå•å‡»å·¦ä¸Šè§’åŠ å·ï¼Œé€‰æ‹©PHP Web Applicationã€‚
5ã€å³ä¾§Serveré…ç½®ä¸ºæœ¬åœ°WebæœåŠ¡å™¨ã€‚
å¼€å§‹è°ƒè¯•1ã€åœ¨PhpStormä¸­ï¼Œå•å‡»ä»£ç å·¦ä¾§æ’å…¥æ–­ç‚¹ã€‚
2ã€å•å‡»å¯¼èˆªæ çš„ç”µè¯ï¼Œç„¶åå•å‡»å¯¼èˆªæ ä¸­çš„è™«å­ï¼Œå³å¯æ‰“å¼€é»˜è®¤æµè§ˆå™¨è¿›å…¥è°ƒè¯•ã€‚
3ã€ç½‘é¡µå¡ä½ï¼ŒPhpStormè‡ªåŠ¨å®šä½åˆ°æ–­ç‚¹å¤„ã€‚
4ã€æ­¤æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®PhpStormæä¾›çš„æŒ‰é’®è¿›è¡Œéœ€è¦çš„è°ƒè¯•ã€‚
XDEBUG_SESSION_STARTåœ¨è°ƒè¯•æ—¶ï¼ŒéƒåŒå­¦å‘ç°ä¸€ä¸ªç¥å¥‡çš„é—®é¢˜ï¼šå‡è®¾é»˜è®¤æµè§ˆå™¨æ˜¯chromeï¼Œé‚£ä¹ˆåœ¨chromeä¸­è®¿é—®æ¥å£ï¼ŒPhpStormä¼šè‡ªåŠ¨å®šä½åˆ°æ–­ç‚¹å¤„ã€‚ä½†æ˜¯ï¼Œå¦‚æœè¿™æ—¶ä½¿ç”¨firefoxæˆ–postmanè®¿é—®åŒæ ·çš„æ¥å£ï¼Œåˆ™æ— æ³•å®šä½åˆ°æ–­ç‚¹å¤„ã€‚
è§£å†³åŠæ³•ï¼šéƒåŒå­¦æ³¨æ„åˆ°ï¼Œåœ¨PhpStormæ‰“å¼€é»˜è®¤æµè§ˆå™¨æ—¶ï¼Œurlä¸­å¸¦æœ‰å‚æ•°ï¼Œä¾‹å¦‚ï¼šhttp://www.dsjyw.net/?XDEBUG_SESSION_START=10218
åœ¨firefoxå’Œpostmanä¸­çš„æ¥å£åœ°å€åä¹ŸåŠ ä¸ŠXDEBUG_SESSION_START=10218ï¼ŒæˆåŠŸè·³è½¬åˆ°æ–­ç‚¹ï¼Œé—®é¢˜è§£å†³ã€‚
ä¹¦ç­¾æœ‰å“ªäº› PHP è°ƒè¯•æŠ€å·§ï¼Ÿ
å¦‚ä½•è°ƒè¯•PHPç¨‹åº
Xdebugæ–‡æ¡£
Xdebugä¸‹è½½åœ°å€
phpä½¿ç”¨Xdebugè¿›è¡Œè°ƒè¯•
ç”¨ Xdebug ä¿®æ­£ PHP åº”ç”¨ç¨‹åºä¸­çš„é”™è¯¯
Xdebug é…ç½®
phpstorm+Xdebugæ–­ç‚¹è°ƒè¯•PHP
]]></content>
      <categories>
        <category>engineering</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>è°ƒè¯•</tag>
        <tag>xdebug</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxä¿®æ”¹å‘½ä»¤æç¤ºç¬¦ä¿¡æ¯(PS1)</title>
    <url>/dev-linux-ps1/</url>
    <content><![CDATA[é—®é¢˜å¦‚ä½•å°† root@izwz94j3dpfuv8pcrn1qitz ä¿®æ”¹æˆ root@voidking-aliï¼Ÿ
è§£å†³åŠæ³•1ã€æŸ¥çœ‹åŸPS1ï¼Œecho $PS1ï¼Œæ˜¾ç¤ºç»“æœä¸ºï¼š
[\u@\h \W]\$

2ã€ç¼–è¾‘.bashrcï¼Œvi ~/.bashrc
3ã€æ·»åŠ 
export PS1=&#x27;[\u@voidking-ali \W]\$&#x27;
æˆ–è€…
export PS1=&quot;[\u@voidking-ali \W]\\$&quot;

4ã€ç«‹å³ç”Ÿæ•ˆï¼Œsource ~/.bashrc


æ‰©å±•ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒLinux çš„å‘½ä»¤æç¤ºä¿¡æ¯ç±»ä¼¼äºä»¥ä¸‹æ ·å­ï¼Œæ˜¾ç¤ºä¸º[å½“å‰ç”¨æˆ·å@çŸ­ä¸»æœºå  å½“å‰çŸ­è·¯å¾„]æç¤ºç¬¦ï¼Œä¾‹å¦‚ [root@voidking-ali ~]#ã€‚
ä¸è¿‡ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½æƒ³è‡ªå®šä¹‰å‘½ä»¤æç¤ºç¬¦çš„æ˜¾ç¤ºä¿¡æ¯ï¼Œæ¯”å¦‚æ˜¾ç¤ºå®Œæ•´çš„ä¸»æœºåå’Œå®Œæ•´çš„è·¯å¾„ã€‚
PS1å˜é‡ä¸­æç¤ºç¬¦å„é¡¹å«ä¹‰:
\d ï¼šä»£è¡¨æ—¥æœŸï¼Œæ ¼å¼ä¸ºweekday month dateï¼Œä¾‹å¦‚ï¼š&quot;Mon Aug 1&quot;\H ï¼šå®Œæ•´çš„ä¸»æœºåç§°ã€‚ä¾‹å¦‚ï¼šæˆ‘çš„æœºå™¨åç§°ä¸ºï¼švoidking.linuxï¼Œåˆ™è¿™ä¸ªåç§°å°±æ˜¯voidking.linux\h ï¼šä»…å–ä¸»æœºçš„ç¬¬ä¸€ä¸ªåå­—ï¼Œå¦‚ä¸Šä¾‹ï¼Œåˆ™ä¸ºvoidkingï¼Œ.linuxåˆ™è¢«çœç•¥\t ï¼šæ˜¾ç¤ºæ—¶é—´ä¸º24å°æ—¶æ ¼å¼ï¼Œå¦‚ï¼šHHï¼šMMï¼šSS\T ï¼šæ˜¾ç¤ºæ—¶é—´ä¸º12å°æ—¶æ ¼å¼\A ï¼šæ˜¾ç¤ºæ—¶é—´ä¸º24å°æ—¶æ ¼å¼ï¼šHHï¼šMM\u ï¼šå½“å‰ç”¨æˆ·çš„è´¦å·åç§°\v ï¼šBASHçš„ç‰ˆæœ¬ä¿¡æ¯\w ï¼šå®Œæ•´çš„å·¥ä½œç›®å½•åç§°ã€‚å®¶ç›®å½•ä¼šä»¥ ~ä»£æ›¿\W ï¼šåˆ©ç”¨basenameå–å¾—å·¥ä½œç›®å½•åç§°ï¼Œæ‰€ä»¥åªä¼šåˆ—å‡ºæœ€åä¸€ä¸ªç›®å½•\$ ï¼šæç¤ºå­—ç¬¦ï¼Œå¦‚æœæ˜¯rootæ—¶ï¼Œæç¤ºç¬¦ä¸ºï¼š# ï¼Œæ™®é€šç”¨æˆ·åˆ™ä¸ºï¼š$


]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>leetcodeåˆ·é¢˜è®°å½•-æ’åºç®—æ³•æ€»ç»“</title>
    <url>/dev-leetcode-sort/</url>
    <content><![CDATA[å‰è¨€æ’åºæœ‰å†…éƒ¨æ’åºå’Œå¤–éƒ¨æ’åºï¼Œå†…éƒ¨æ’åºæ˜¯æ•°æ®è®°å½•åœ¨å†…å­˜ä¸­è¿›è¡Œæ’åºï¼Œè€Œå¤–éƒ¨æ’åºæ˜¯å› æ’åºçš„æ•°æ®å¾ˆå¤§ï¼Œä¸€æ¬¡ä¸èƒ½å®¹çº³å…¨éƒ¨çš„æ’åºè®°å½•ï¼Œåœ¨æ’åºè¿‡ç¨‹ä¸­éœ€è¦è®¿é—®å¤–å­˜ã€‚
å†…éƒ¨æ’åºå¤§è‡´åˆ†ä¸ºäº”ç§ï¼šäº¤æ¢æ’åºã€æ’å…¥æ’åºã€é€‰æ‹©æ’åºã€å½’å¹¶æ’åºå’ŒåŸºæ•°æ’åºã€‚å…¶ä¸­äº¤æ¢æ’åºåŒ…æ‹¬å†’æ³¡æ’åºå’Œå¿«é€Ÿæ’åºã€æ’å…¥æ’åºåŒ…æ‹¬ç›´æ¥æ’å…¥æ’åºå’Œå¸Œå°”æ’åºï¼Œé€‰æ‹©æ’åºåŒ…æ‹¬ç®€å•é€‰æ‹©æ’åºå’Œå †æ’åºã€‚
å½“nè¾ƒå¤§æ—¶ï¼Œåº”é‡‡ç”¨æ—¶é—´å¤æ‚åº¦ä¸ºO(nlog2n)çš„æ’åºæ–¹æ³•ï¼šå¿«é€Ÿæ’åºã€å †æ’åºæˆ–å½’å¹¶æ’åºã€‚
å¿«é€Ÿæ’åºç›®å‰æ˜¯å†…éƒ¨æ’åºä¸­æœ€å¥½çš„æ–¹æ³•ï¼Œå½“å¾…æ’åºçš„å…³é”®å­—æ˜¯éšæœºåˆ†å¸ƒæ—¶ï¼Œå¿«é€Ÿæ’åºçš„å¹³å‡æ—¶é—´æœ€çŸ­ã€‚


è‡ªæ‹Ÿé¢˜ç›®ä½¿ç”¨å†’æ³¡æ’åºã€å¿«é€Ÿæ’åºã€ç›´æ¥æ’å…¥æ’åºã€å¸Œå°”æ’åºã€ç®€å•é€‰æ‹©æ’åºã€å †æ’åºã€å½’å¹¶æ’åºã€åŸºæ•°æ’åºå…±å…«ç§æ’åºæ–¹æ³•ï¼Œç»™[8,7,4,2,1,3,5,9,0,6]æŒ‰ç…§å‡åºå’Œé™åºæ’åºã€‚ç¤ºä¾‹è¾“å…¥ï¼š
[8,7,4,2,1,3,5,9,0,6]

ç¤ºä¾‹è¾“å‡ºï¼š
[0,1,2,3,4,5,6,7,8,9][9,8,7,6,5,4,3,2,1,0]

å†’æ³¡æ’åºå†’æ³¡æ’åºé‡å¤åœ°èµ°è®¿è¿‡è¦æ’åºçš„å…ƒç´ ï¼Œä¾æ¬¡æ¯”è¾ƒç›¸é‚»ä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœä»–ä»¬çš„é¡ºåºé”™è¯¯å°±æŠŠä»–ä»¬è°ƒæ¢è¿‡æ¥ï¼Œç›´åˆ°æ²¡æœ‰å…ƒç´ å†éœ€è¦äº¤æ¢ï¼Œæ’åºå®Œæˆã€‚è¿™ä¸ªç®—æ³•çš„åå­—ç”±æ¥æ˜¯å› ä¸ºè¶Šå°ï¼ˆæˆ–è¶Šå¤§ï¼‰çš„å…ƒç´ ä¼šç»ç”±äº¤æ¢æ…¢æ…¢â€œæµ®â€åˆ°æ•°åˆ—çš„é¡¶ç«¯ã€‚
ä»¥å·¦è¾¹ä¸ºæ°´é¢ï¼Œå‡åºå†’æ³¡æ’åºç®—æ³•æè¿°å¦‚ä¸‹ï¼š
1ã€ä»æœ€åä¸€å¯¹ç›¸é‚»çš„å…ƒç´ å¼€å§‹ï¼Œæ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ï¼Œå¦‚æœåä¸€ä¸ªæ¯”å‰ä¸€ä¸ªå°ï¼Œåˆ™è°ƒæ¢å®ƒä»¬çš„ä½ç½®ï¼ˆå°çš„å†’æ³¡ï¼‰ã€‚2ã€å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»æœ€åä¸€å¯¹åˆ°ç¬¬ä¸€å¯¹ã€‚3ã€ç¬¬ä¸€ä¸ªå…ƒç´ å›ºå®šä¸ºæœ€å°å…ƒç´ ï¼Œä¸å‚ä¸æ¥ä¸‹æ¥çš„æ¯”è¾ƒã€‚4ã€å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ ï¼ˆé™¤äº†å›ºå®šå…ƒç´ ï¼‰é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹å…ƒç´ éœ€è¦æ¯”è¾ƒã€‚

// å†’æ³¡æ’åºpublic int[] bubble(int[] arr)&#123;    int sum = arr.length;    int temp = 0;    // sumä¸ªæ•°ï¼Œéœ€è¦sumæ¬¡å†’æ³¡ï¼Œæ¯æ¬¡å†’æ³¡ä¸€ä¸ªæ•°æ‰¾åˆ°ä½ç½®    for(int i=0;i&lt;sum;i++)&#123;        for(int j=sum-1;j&gt;i;j--)&#123;            if(arr[j] &lt; arr[j-1])&#123;                temp = arr[j-1];                arr[j-1] = arr[j];                arr[j] = temp;            &#125;        &#125;    &#125;    return arr;&#125;

å¿«é€Ÿæ’åºå¿«é€Ÿæ’åºæ˜¯C.R.A.Hoareäº1962å¹´æå‡ºçš„ä¸€ç§åˆ’åˆ†äº¤æ¢æ’åºï¼Œå®ƒæ˜¯å¯¹å†’æ³¡æ’åºçš„æ”¹è¿›ã€‚å®ƒé‡‡ç”¨äº†ä¸€ç§åˆ†æ²»çš„ç­–ç•¥ï¼Œé€šå¸¸ç§°å…¶ä¸ºåˆ†æ²»æ³•(Divide-and-ConquerMethod)ã€‚MoreWindowsåŒå­¦æŠŠå®ƒå½’ç»“ä¸ºï¼šæŒ–å‘å¡«æ•°+åˆ†æ²»æ³•ã€‚
å‡åºå¿«é€Ÿæ’åºç®—æ³•æè¿°å¦‚ä¸‹ï¼š
1ã€i = L; j = R; å°†åŸºå‡†æ•°æŒ–å‡ºå½¢æˆç¬¬ä¸€ä¸ªå‘a[i]ã€‚2ã€jâ€“ç”±åå‘å‰æ‰¾æ¯”åŸºå‡†è¾“å°çš„æ•°ï¼Œæ‰¾åˆ°åæŒ–å‡ºæ­¤æ•°å¡«å‰ä¸€ä¸ªå‘a[i]ä¸­ã€‚3ã€i++ç”±å‰å‘åæ‰¾æ¯”åŸºå‡†æ•°å¤§çš„æ•°ï¼Œæ‰¾åˆ°åä¹ŸæŒ–å‡ºæ­¤æ•°å¡«åˆ°å‰ä¸€ä¸ªå‘a[j]ä¸­ã€‚4ã€é‡å¤æ‰§è¡Œ2ï¼Œ3æ­¥ï¼Œç›´åˆ°i==jï¼Œå°†åŸºå‡†æ•°å¡«å…¥a[i]ä¸­ã€‚5ã€ä»¥ä¸Šï¼Œå¾—åˆ°ä¸¤ä¸ªåŒºï¼Œå·¦è¾¹çš„åŒºæ¯”åŸºæ•°å°ï¼Œå³è¾¹çš„åŒºæ¯”åŸºæ•°å¤§ã€‚6ã€å¯¹äºå¾—åˆ°çš„ä¸¤ä¸ªåŒºï¼Œåˆ†åˆ«é‡å¤1-4ã€‚

// å¿«é€Ÿæ’åºpublic int[] quick(int[] arr,int l,int r)&#123;    int temp = arr[l];    int i = l;    int j = r;    while(i &lt; j)&#123;        while(i &lt; j &amp;&amp; arr[j] &gt;= temp)               j--;         if(i &lt; j)&#123;            arr[i] = arr[j];            i++;        &#125;                while(i &lt; j &amp;&amp; arr[i] &lt; temp)&#123;            i++;        &#125;        if(i &lt; j)&#123;            arr[j] = arr[i];             j--;        &#125;    &#125;    arr[i] = temp;            if(l &lt; r)&#123;        quick(arr, l, i-1);        quick(arr, i+1, r);    &#125;    return arr;    &#125;


ç›´æ¥æ’å…¥æ’åºæ’å…¥æ’åºæ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ï¼Œå®ƒçš„å·¥ä½œåŸç†éå¸¸ç±»ä¼¼äºæˆ‘ä»¬æŠ“æ‰‘å…‹ç‰Œã€‚
å‡åºæ’å…¥ç®—æ³•æè¿°å¦‚ä¸‹ï¼š
1ã€ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åºã€‚2ã€å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æã€‚3ã€å¦‚æœæ–°å…ƒç´ å°äºå·²æ’åºçš„å…ƒç´ ï¼ˆè€å…ƒç´ ï¼‰ï¼Œå°†è€å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®ã€‚4ã€é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°æ–°å…ƒç´ å¤§äºæˆ–ç­‰äºè€å…ƒç´ çš„ä½ç½®ï¼Œå°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®ã€‚5ã€é‡å¤æ­¥éª¤2~4ã€‚

// ç›´æ¥æ’å…¥æ’åºpublic int[] insertion(int[] arr)&#123;    int sum = arr.length;    for(int i=1;i&lt;sum;i++)&#123;        int temp = arr[i];        int j = i-1;        while(j&gt;=0 &amp;&amp; temp&lt;arr[j])&#123;            arr[j+1] = arr[j];            j--;        &#125;        arr[j+1] = temp;    &#125;    return arr;&#125;


å¸Œå°”æ’åºå¸Œå°”æ’åºï¼Œä¹Ÿå«é€’å‡å¢é‡æ’åºï¼Œæ˜¯æ’å…¥æ’åºçš„ä¸€ç§æ›´é«˜æ•ˆçš„æ”¹è¿›ç‰ˆæœ¬ã€‚å¸Œå°”æ’åºæ˜¯ä¸ç¨³å®šçš„æ’åºç®—æ³•ã€‚
å¸Œå°”æ’åºæ˜¯åŸºäºæ’å…¥æ’åºçš„ä»¥ä¸‹ä¸¤ç‚¹æ€§è´¨è€Œæå‡ºæ”¹è¿›æ–¹æ³•çš„ï¼š

æ’å…¥æ’åºåœ¨å¯¹å‡ ä¹å·²ç»æ’å¥½åºçš„æ•°æ®æ“ä½œæ—¶ï¼Œæ•ˆç‡é«˜ï¼Œå³å¯ä»¥è¾¾åˆ°çº¿æ€§æ’åºçš„æ•ˆç‡
ä½†æ’å…¥æ’åºä¸€èˆ¬æ¥è¯´æ˜¯ä½æ•ˆçš„ï¼Œå› ä¸ºæ’å…¥æ’åºæ¯æ¬¡åªèƒ½å°†æ•°æ®ç§»åŠ¨ä¸€ä½

å¸Œå°”æ’åºé€šè¿‡å°†æ¯”è¾ƒçš„å…¨éƒ¨å…ƒç´ åˆ†ä¸ºå‡ ä¸ªåŒºåŸŸæ¥æå‡æ’å…¥æ’åºçš„æ€§èƒ½ã€‚è¿™æ ·å¯ä»¥è®©ä¸€ä¸ªå…ƒç´ å¯ä»¥ä¸€æ¬¡æ€§åœ°æœæœ€ç»ˆä½ç½®å‰è¿›ä¸€å¤§æ­¥ã€‚ç„¶åç®—æ³•å†å–è¶Šæ¥è¶Šå°çš„æ­¥é•¿è¿›è¡Œæ’åºï¼Œç®—æ³•çš„æœ€åä¸€æ­¥å°±æ˜¯æ™®é€šçš„æ’å…¥æ’åºï¼Œä½†æ˜¯åˆ°äº†è¿™æ­¥ï¼Œéœ€æ’åºçš„æ•°æ®å‡ ä¹æ˜¯å·²æ’å¥½çš„äº†ï¼ˆæ­¤æ—¶æ’å…¥æ’åºè¾ƒå¿«ï¼‰ã€‚
å‡è®¾æœ‰ä¸€ä¸ªå¾ˆå°çš„æ•°æ®åœ¨ä¸€ä¸ªå·²æŒ‰å‡åºæ’å¥½åºçš„æ•°ç»„çš„æœ«ç«¯ã€‚å¦‚æœç”¨å¤æ‚åº¦ä¸ºO(n^2)çš„æ’åºï¼ˆå†’æ³¡æ’åºæˆ–ç›´æ¥æ’å…¥æ’åºï¼‰ï¼Œå¯èƒ½ä¼šè¿›è¡Œnæ¬¡çš„æ¯”è¾ƒå’Œäº¤æ¢æ‰èƒ½å°†è¯¥æ•°æ®ç§»è‡³æ­£ç¡®ä½ç½®ã€‚è€Œå¸Œå°”æ’åºä¼šç”¨è¾ƒå¤§çš„æ­¥é•¿ç§»åŠ¨æ•°æ®ï¼Œæ‰€ä»¥å°æ•°æ®åªéœ€è¿›è¡Œå°‘æ•°æ¯”è¾ƒå’Œäº¤æ¢å³å¯åˆ°æ­£ç¡®ä½ç½®ã€‚
å‡åºå¸Œå°”ç®—æ³•æè¿°å¦‚ä¸‹ï¼š1ã€é€‰æ‹©å¢é‡gap=length/2ï¼ŒæŠŠå…ƒç´ åˆ†æˆgapç»„ï¼Œæ¯ç»„å–å€¼ä¸º{i,i+gap,i+2gap,â€¦}ã€‚2ã€åˆ†åˆ«å¯¹æ¯ä¸€ç»„ä¸­çš„æ•°æ®è¿›è¡Œä»å‰åˆ°åæ‰«ææ’å…¥æ’åºã€‚3ã€ç¼©å°å¢é‡gap = gap/2ï¼Œè¿™ç§å¢é‡é€‰æ‹©å¯ä»¥ç”¨ä¸€ä¸ªåºåˆ—æ¥è¡¨ç¤ºï¼Œ{n/2,(n/2)/2â€¦1}ï¼Œç§°ä¸ºå¢é‡åºåˆ—ã€‚4ã€é‡å¤æ­¥éª¤2~3ï¼Œç›´åˆ°å¢é‡gap=1ã€‚

// å¸Œå°”æ’åºpublic int[] shell(int[] arr)&#123;    int sum = arr.length;    int gap = sum/2;    while(gap &gt;= 1)&#123;        //åˆ†æˆgapç»„        for(int i=0;i&lt;gap;i++)&#123;            //ç»„å†…æ’åº            for(int j=i+gap;j&lt;sum;j += gap)&#123;                int temp = arr[j];                int k = j-gap;                while(k &gt;= 0 &amp;&amp; temp &lt; arr[k])&#123;                    arr[k+gap] = arr[k];                    k = k-gap;                &#125;                arr[k+gap] = temp;            &#125;        &#125;        gap = gap/2;            &#125;    return arr;&#125;


ç®€å•é€‰æ‹©æ’åºé€‰æ‹©æ’åºæ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚å®ƒçš„å·¥ä½œåŸç†å¾ˆå®¹æ˜“ç†è§£ï¼šåˆå§‹æ—¶åœ¨åºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œæ”¾åˆ°åºåˆ—çš„èµ·å§‹ä½ç½®ä½œä¸ºå·²æ’åºåºåˆ—ï¼›ç„¶åï¼Œå†ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ã€‚ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æ’åºå®Œæ¯•ã€‚
æ³¨æ„é€‰æ‹©æ’åºä¸å†’æ³¡æ’åºçš„åŒºåˆ«ï¼šå†’æ³¡æ’åºé€šè¿‡ä¾æ¬¡äº¤æ¢ç›¸é‚»ä¸¤ä¸ªé¡ºåºä¸åˆæ³•çš„å…ƒç´ ä½ç½®ï¼Œä»è€Œå°†å½“å‰æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ æ”¾åˆ°åˆé€‚çš„ä½ç½®ï¼›è€Œé€‰æ‹©æ’åºæ¯éå†ä¸€æ¬¡éƒ½è®°ä½äº†å½“å‰æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ çš„ä½ç½®ï¼Œæœ€åä»…éœ€ä¸€æ¬¡äº¤æ¢æ“ä½œå³å¯å°†å…¶æ”¾åˆ°åˆé€‚çš„ä½ç½®ã€‚
å‡åºç®€å•é€‰æ‹©æ’åºæè¿°å¦‚ä¸‹ï¼š1ã€æœªæ’åºåºåˆ—ä¸­ï¼Œå‡è®¾æœ€å°å…ƒç´ æŒ‡é’ˆpositionæŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ iã€‚2ã€ä¾æ¬¡å¯¹æ¯”æ‰€æœ‰æœªæ’åºå…ƒç´ ï¼Œé‡åˆ°æ›´å°çš„å…ƒç´ ï¼Œåˆ™æŠŠpositionæŒ‡å‘æ›´å°çš„å…ƒç´ ã€‚3ã€éå†æœªæ’åºåºåˆ—ç»“æŸï¼Œäº¤æ¢positionå’Œiçš„å…ƒç´ ï¼Œiä½ç½®æ’åºå®Œæˆã€‚4ã€é‡å¤1åˆ°3ï¼Œç›´åˆ°æ‰€æœ‰ä½ç½®æ’åºå®Œæˆã€‚
// ç®€å•é€‰æ‹©æ’åºpublic int[] selection(int[] arr)&#123;    int sum = arr.length;    for(int i=0;i&lt;sum;i++)&#123;        int position = i;        for(int j=i+1;j&lt;sum;j++)&#123;            if(arr[j] &lt; arr[position])&#123;                position = j;            &#125;        &#125;        int tmp = arr[i];        arr[i] = arr[position];        arr[position] = tmp;    &#125;    return arr;&#125;

å †æ’åºå †æ’åºæ˜¯åˆ©ç”¨å †è¿™ç§æ•°æ®ç»“æ„è€Œè®¾è®¡çš„ä¸€ç§æ’åºç®—æ³•ï¼Œå †æ’åºæ˜¯ä¸€ç§é€‰æ‹©æ’åºï¼Œå®ƒçš„æœ€åã€æœ€å¥½ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦å‡ä¸ºO(nlogn)ï¼Œå®ƒä¹Ÿæ˜¯ä¸ç¨³å®šæ’åºã€‚
å †æ˜¯å…·æœ‰ä»¥ä¸‹æ€§è´¨çš„å®Œå…¨äºŒå‰æ ‘ï¼šæ¯ä¸ªç»“ç‚¹çš„å€¼éƒ½å¤§äºæˆ–ç­‰äºå…¶å·¦å³å­©å­ç»“ç‚¹çš„å€¼ï¼Œç§°ä¸ºå¤§é¡¶å †ï¼›æˆ–è€…æ¯ä¸ªç»“ç‚¹çš„å€¼éƒ½å°äºæˆ–ç­‰äºå…¶å·¦å³å­©å­ç»“ç‚¹çš„å€¼ï¼Œç§°ä¸ºå°é¡¶å †ã€‚
å †æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå°†å¾…æ’åºåºåˆ—æ„é€ æˆä¸€ä¸ªå¤§é¡¶å †ï¼Œæ­¤æ—¶ï¼Œæ•´ä¸ªåºåˆ—çš„æœ€å¤§å€¼å°±æ˜¯å †é¡¶çš„æ ¹èŠ‚ç‚¹ã€‚å°†å…¶ä¸æœ«å°¾å…ƒç´ è¿›è¡Œäº¤æ¢ï¼Œæ­¤æ—¶æœ«å°¾å°±ä¸ºæœ€å¤§å€¼ã€‚ç„¶åå°†å‰©ä½™n-1ä¸ªå…ƒç´ é‡æ–°æ„é€ æˆä¸€ä¸ªå †ï¼Œè¿™æ ·ä¼šå¾—åˆ°nä¸ªå…ƒç´ çš„æ¬¡å°å€¼ã€‚å¦‚æ­¤åå¤æ‰§è¡Œï¼Œä¾¿èƒ½å¾—åˆ°ä¸€ä¸ªæœ‰åºåºåˆ—äº†ã€‚
å‚ç…§å›¾è§£æ’åºç®—æ³•(ä¸‰)ä¹‹å †æ’åºï¼Œå‡åºå †æ’åºæè¿°å¦‚ä¸‹ï¼š1ã€æ„é€ åˆå§‹å †ã€‚å°†ç»™å®šæ— åºåºåˆ—æ„é€ æˆä¸€ä¸ªå¤§é¡¶å †ï¼ˆä¸€èˆ¬å‡åºé‡‡ç”¨å¤§é¡¶å †ï¼Œé™åºé‡‡ç”¨å°é¡¶å †)ã€‚2ã€ä»æœ€åä¸€ä¸ªéå¶å­ç»“ç‚¹å¼€å§‹ï¼ˆå¶ç»“ç‚¹è‡ªç„¶ä¸ç”¨è°ƒæ•´ï¼Œç¬¬ä¸€ä¸ªéå¶å­ç»“ç‚¹arr.length/2-1ï¼‰ï¼Œä»å³è‡³å·¦ï¼Œä»ä¸‹è‡³ä¸Šè¿›è¡Œè°ƒæ•´ã€‚3ã€äº¤æ¢ä½ç½®åä¹Ÿè®¸å­æ ¹ç»“æ„æ··ä¹±ï¼Œé‚£ä¹ˆç»§ç»­è°ƒæ•´ï¼Œç›´åˆ°æ„é€ å®Œæˆå¤§é¡¶å †ã€‚4ã€å°†å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ è¿›è¡Œäº¤æ¢ï¼Œä½¿æœ«å°¾å…ƒç´ æœ€å¤§ã€‚ç„¶åç»§ç»­è°ƒæ•´å †ï¼Œæ„é€ æˆå¤§é¡¶å †ã€‚å†å°†å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ äº¤æ¢ï¼Œå¾—åˆ°ç¬¬äºŒå¤§å…ƒç´ ã€‚å¦‚æ­¤åå¤è¿›è¡Œäº¤æ¢ã€é‡å»ºã€äº¤æ¢ã€‚
// å †æ’åºpublic int[] heap(int[] arr)&#123;    int sum = arr.length;    //1.æ„å»ºå¤§é¡¶å †    for(int i=arr.length/2-1;i&gt;=0;i--)&#123;        //ä»ç¬¬ä¸€ä¸ªéå¶å­ç»“ç‚¹ä»ä¸‹è‡³ä¸Šï¼Œä»å³è‡³å·¦è°ƒæ•´ç»“æ„        adjustHeap(arr,i,arr.length);    &#125;    //2.è°ƒæ•´å †ç»“æ„+äº¤æ¢å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´     for(int j=arr.length-1;j&gt;0;j--)&#123;        swap(arr,0,j);//å°†å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ è¿›è¡Œäº¤æ¢        adjustHeap(arr,0,j);//é‡æ–°å¯¹å †è¿›è¡Œè°ƒæ•´    &#125;    return arr;&#125;//è°ƒæ•´å¤§é¡¶å †ï¼ˆä»…æ˜¯è°ƒæ•´è¿‡ç¨‹ï¼Œå»ºç«‹åœ¨å¤§é¡¶å †å·²æ„å»ºçš„åŸºç¡€ä¸Šï¼‰public void adjustHeap(int []arr,int i,int length)&#123;    int temp = arr[i];//å…ˆå–å‡ºå½“å‰å…ƒç´ i    for(int k=i*2+1;k&lt;length;k=k*2+1)&#123;//ä»iç»“ç‚¹çš„å·¦å­ç»“ç‚¹å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯2i+1å¤„å¼€å§‹        if(k+1&lt;length &amp;&amp; arr[k]&lt;arr[k+1])&#123;//å¦‚æœå·¦å­ç»“ç‚¹å°äºå³å­ç»“ç‚¹ï¼ŒkæŒ‡å‘å³å­ç»“ç‚¹            k++;        &#125;        if(arr[k] &gt;temp)&#123;//å¦‚æœå­èŠ‚ç‚¹å¤§äºçˆ¶èŠ‚ç‚¹ï¼Œå°†å­èŠ‚ç‚¹å€¼èµ‹ç»™çˆ¶èŠ‚ç‚¹ï¼ˆä¸ç”¨è¿›è¡Œäº¤æ¢ï¼‰            arr[i] = arr[k];            i = k;        &#125;else&#123;            break;        &#125;    &#125;    arr[i] = temp;//å°†tempå€¼æ”¾åˆ°æœ€ç»ˆçš„ä½ç½®&#125;//äº¤æ¢å…ƒç´ public static void swap(int []arr,int a ,int b)&#123;    int temp=arr[a];    arr[a] = arr[b];    arr[b] = temp;&#125;

å½’å¹¶æ’åºå½’å¹¶æ’åºæ˜¯åˆ›å»ºåœ¨å½’å¹¶æ“ä½œä¸Šçš„ä¸€ç§æœ‰æ•ˆçš„æ’åºç®—æ³•ï¼Œæ•ˆç‡ä¸ºO(nlogn)ï¼Œ1945å¹´ç”±å†¯Â·è¯ºä¼Šæ›¼é¦–æ¬¡æå‡ºã€‚
å½’å¹¶æ’åºçš„å®ç°åˆ†ä¸ºé€’å½’å®ç°ä¸éé€’å½’(è¿­ä»£)å®ç°ã€‚é€’å½’å®ç°çš„å½’å¹¶æ’åºæ˜¯ç®—æ³•è®¾è®¡ä¸­åˆ†æ²»ç­–ç•¥çš„å…¸å‹åº”ç”¨ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªå¤§é—®é¢˜åˆ†å‰²æˆå°é—®é¢˜åˆ†åˆ«è§£å†³ï¼Œç„¶åç”¨æ‰€æœ‰å°é—®é¢˜çš„ç­”æ¡ˆæ¥è§£å†³æ•´ä¸ªå¤§é—®é¢˜ã€‚éé€’å½’(è¿­ä»£)å®ç°çš„å½’å¹¶æ’åºé¦–å…ˆè¿›è¡Œæ˜¯ä¸¤ä¸¤å½’å¹¶ï¼Œç„¶åå››å››å½’å¹¶ï¼Œç„¶åæ˜¯å…«å…«å½’å¹¶ï¼Œä¸€ç›´ä¸‹å»ç›´åˆ°å½’å¹¶äº†æ•´ä¸ªæ•°ç»„ã€‚
å½’å¹¶æ’åºç®—æ³•ä¸»è¦ä¾èµ–å½’å¹¶(Merge)æ“ä½œã€‚å½’å¹¶æ“ä½œæŒ‡çš„æ˜¯å°†ä¸¤ä¸ªå·²ç»æ’åºçš„åºåˆ—åˆå¹¶æˆä¸€ä¸ªåºåˆ—çš„æ“ä½œï¼Œå½’å¹¶æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š
1ã€ç”³è¯·ç©ºé—´ï¼Œè¯¥ç©ºé—´ç”¨æ¥å­˜æ”¾åˆå¹¶åçš„åºåˆ—2ã€è®¾å®šä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€åˆä½ç½®åˆ†åˆ«ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®3ã€æ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ ï¼Œé€‰æ‹©ç›¸å¯¹å°çš„å…ƒç´ æ”¾å…¥åˆ°åˆå¹¶ç©ºé—´ï¼Œå¹¶ç§»åŠ¨æŒ‡é’ˆåˆ°ä¸‹ä¸€ä½ç½®4ã€é‡å¤æ­¥éª¤3ç›´åˆ°æŸä¸€æŒ‡é’ˆåˆ°è¾¾åºåˆ—å°¾5ã€å°†å¦ä¸€åºåˆ—å‰©ä¸‹çš„æ‰€æœ‰å…ƒç´ ç›´æ¥å¤åˆ¶åˆ°åˆå¹¶åºåˆ—å°¾
å‚ç…§å›¾è§£æ’åºç®—æ³•(å››)ä¹‹å½’å¹¶æ’åºï¼Œä»£ç å¦‚ä¸‹ï¼š
// å½’å¹¶æ’åºpublic int[] merge(int[] arr)&#123;    int []temp = new int[arr.length];//åœ¨æ’åºå‰ï¼Œå…ˆå»ºå¥½ä¸€ä¸ªé•¿åº¦ç­‰äºåŸæ•°ç»„é•¿åº¦çš„ä¸´æ—¶æ•°ç»„ï¼Œé¿å…é€’å½’ä¸­é¢‘ç¹å¼€è¾Ÿç©ºé—´    mergeSort(arr,0,arr.length-1,temp);    return arr;&#125;public void mergeSort(int[] arr,int left,int right,int []temp)&#123;    if(left&lt;right)&#123;        int mid = (left+right)/2;        mergeSort(arr,left,mid,temp);//å·¦è¾¹å½’å¹¶æ’åºï¼Œä½¿å¾—å·¦å­åºåˆ—æœ‰åº        mergeSort(arr,mid+1,right,temp);//å³è¾¹å½’å¹¶æ’åºï¼Œä½¿å¾—å³å­åºåˆ—æœ‰åº        mergeCore(arr,left,mid,right,temp);//å°†ä¸¤ä¸ªæœ‰åºå­æ•°ç»„åˆå¹¶æ“ä½œ    &#125;&#125;public void mergeCore(int[] arr,int left,int mid,int right,int[] temp)&#123;    int i = left;//å·¦åºåˆ—æŒ‡é’ˆ    int j = mid+1;//å³åºåˆ—æŒ‡é’ˆ    int t = 0;//ä¸´æ—¶æ•°ç»„æŒ‡é’ˆ    while (i&lt;=mid &amp;&amp; j&lt;=right)&#123;        if(arr[i]&lt;=arr[j])&#123;            temp[t++] = arr[i++];        &#125;else &#123;            temp[t++] = arr[j++];        &#125;    &#125;    while(i&lt;=mid)&#123;//å°†å·¦è¾¹å‰©ä½™å…ƒç´ å¡«å……è¿›tempä¸­        temp[t++] = arr[i++];    &#125;    while(j&lt;=right)&#123;//å°†å³åºåˆ—å‰©ä½™å…ƒç´ å¡«å……è¿›tempä¸­        temp[t++] = arr[j++];    &#125;    t = 0;    //å°†tempä¸­çš„å…ƒç´ å…¨éƒ¨æ‹·è´åˆ°åŸæ•°ç»„ä¸­    while(left &lt;= right)&#123;        arr[left++] = temp[t++];    &#125;&#125;


åŸºæ•°æ’åºåŸºæ•°æ’åºçš„å‘æ˜å¯ä»¥è¿½æº¯åˆ°1887å¹´èµ«å°”æ›¼Â·ä½•ä¹ç¤¼åœ¨æ‰“å­”å¡ç‰‡åˆ¶è¡¨æœºä¸Šçš„è´¡çŒ®ã€‚å®ƒæ˜¯è¿™æ ·å®ç°çš„ï¼šå°†æ‰€æœ‰å¾…æ¯”è¾ƒæ­£æ•´æ•°ç»Ÿä¸€ä¸ºåŒæ ·çš„æ•°ä½é•¿åº¦ï¼Œæ•°ä½è¾ƒçŸ­çš„æ•°å‰é¢è¡¥é›¶ã€‚ç„¶åï¼Œä»æœ€ä½ä½å¼€å§‹è¿›è¡ŒåŸºæ•°ä¸º10çš„è®¡æ•°æ’åºï¼Œä¸€ç›´åˆ°æœ€é«˜ä½è®¡æ•°æ’åºå®Œåï¼Œæ•°åˆ—å°±å˜æˆä¸€ä¸ªæœ‰åºåºåˆ—ï¼ˆåˆ©ç”¨äº†è®¡æ•°æ’åºçš„ç¨³å®šæ€§ï¼‰ã€‚
åŸºæ•°æ’åºæ­¥éª¤å¦‚ä¸‹ï¼š1ã€åˆå§‹åŒ–ï¼šæ„é€ ä¸€ä¸ª10*nçš„äºŒç»´æ•°ç»„ï¼Œä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•°ç»„ç”¨äºå­˜å‚¨æ¯æ¬¡ä½æ’åºæ—¶æ¯ä¸ªæ¡¶å­é‡Œæœ‰å¤šå°‘ä¸ªå…ƒç´ ã€‚2ã€å¾ªç¯æ“ä½œï¼šä»ä½ä½å¼€å§‹ï¼ˆæˆ‘ä»¬é‡‡ç”¨LSDçš„æ–¹å¼ï¼‰ï¼Œå°†æ‰€æœ‰å…ƒç´ å¯¹åº”è¯¥ä½çš„æ•°å­—å­˜åˆ°ç›¸åº”çš„æ¡¶å­é‡Œå»ï¼ˆå¯¹åº”äºŒç»´æ•°ç»„çš„é‚£ä¸€åˆ—ï¼‰ã€‚ç„¶åå°†æ‰€æœ‰æ¡¶å­é‡Œçš„å…ƒç´ æŒ‰ç…§æ¡¶å­æ ‡å·ä»å°åˆ°å¤§å–å‡ºï¼Œå¯¹äºåŒä¸€ä¸ªæ¡¶å­é‡Œçš„å…ƒç´ ï¼Œå…ˆæ”¾è¿›å»çš„å…ˆå–å‡ºï¼Œåæ”¾è¿›å»çš„åå–å‡ºï¼ˆä¿è¯æ’åºç¨³å®šæ€§ï¼‰ã€‚è¿™æ ·åŸæ•°ç»„å°±æŒ‰è¯¥ä½æ’åºå®Œæ¯•äº†ï¼Œç»§ç»­ä¸‹ä¸€ä½æ“ä½œï¼Œç›´åˆ°æœ€é«˜ä½æ’åºå®Œæˆã€‚
å‚è€ƒåŸºæ•°æ’åºè¯¦è§£ä»¥åŠjavaå®ç°ï¼Œä»£ç å¦‚ä¸‹ï¼š
// åŸºæ•°æ’åºpublic int[] radix(int[] arr, int d)&#123;    int n=1;//ä»£è¡¨ä½æ•°å¯¹åº”çš„æ•°ï¼š1,10,100...    int k=0;//ä¿å­˜æ¯ä¸€ä½æ’åºåçš„ç»“æœç”¨äºä¸‹ä¸€ä½çš„æ’åºè¾“å…¥    int length=arr.length;    int[][] bucket=new int[10][length];//æ’åºæ¡¶ç”¨äºä¿å­˜æ¯æ¬¡æ’åºåçš„ç»“æœï¼Œè¿™ä¸€ä½ä¸Šæ’åºç»“æœç›¸åŒçš„æ•°å­—æ”¾åœ¨åŒä¸€ä¸ªæ¡¶é‡Œ    int[] order=new int[length];//ç”¨äºä¿å­˜æ¯ä¸ªæ¡¶é‡Œæœ‰å¤šå°‘ä¸ªæ•°å­—    while(n&lt;d)    &#123;        for(int num:arr) //å°†æ•°ç»„arrayé‡Œçš„æ¯ä¸ªæ•°å­—æ”¾åœ¨ç›¸åº”çš„æ¡¶é‡Œ        &#123;            int digit=(num/n)%10;            bucket[digit][order[digit]]=num;            order[digit]++;        &#125;        for(int i=0;i&lt;length;i++)//å°†å‰ä¸€ä¸ªå¾ªç¯ç”Ÿæˆçš„æ¡¶é‡Œçš„æ•°æ®è¦†ç›–åˆ°åŸæ•°ç»„ä¸­ç”¨äºä¿å­˜è¿™ä¸€ä½çš„æ’åºç»“æœ        &#123;            if(order[i]!=0)//è¿™ä¸ªæ¡¶é‡Œæœ‰æ•°æ®ï¼Œä»ä¸Šåˆ°ä¸‹éå†è¿™ä¸ªæ¡¶å¹¶å°†æ•°æ®ä¿å­˜åˆ°åŸæ•°ç»„ä¸­            &#123;                for(int j=0;j&lt;order[i];j++)                &#123;                    arr[k]=bucket[i][j];                    k++;                &#125;            &#125;            order[i]=0;//å°†æ¡¶é‡Œè®¡æ•°å™¨ç½®0ï¼Œç”¨äºä¸‹ä¸€æ¬¡ä½æ’åº        &#125;        n*=10;        k=0;//å°†kç½®0ï¼Œç”¨äºä¸‹ä¸€è½®ä¿å­˜ä½æ’åºç»“æœ    &#125;        return arr;&#125;


æºç åœ°å€https://github.com/voidking/leetcode/tree/master/src/com/voidking/leetcode/sort
ä¹¦ç­¾å¸¸ç”¨æ’åºç®—æ³•æ€»ç»“(ä¸€)
å¸¸ç”¨æ’åºç®—æ³•æ€»ç»“(äºŒ)
å…«å¤§æ’åºç®—æ³•
å›¾è§£æ’åºç®—æ³•(ä¸€)ä¹‹3ç§ç®€å•æ’åº(é€‰æ‹©ï¼Œå†’æ³¡ï¼Œç›´æ¥æ’å…¥)
å›¾è§£æ’åºç®—æ³•(äºŒ)ä¹‹å¸Œå°”æ’åº
]]></content>
      <categories>
        <category>engineering</category>
        <category>algorithm</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>ç®—æ³•</tag>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>VirtualBoxä¸­å®‰è£…OpenStack</title>
    <url>/dev-virtualbox-ubuntu-openstack/</url>
    <content><![CDATA[å‰è¨€OpenStackçš„å®‰è£…æ˜¯ä¸€ä¸ªéš¾ç‚¹ï¼Œéå¸¸éš¾ã€‚å“ªæ€•å·²ç»å®‰è£…è¿‡OpenStackï¼Œå†æ¬¡å®‰è£…ï¼Œä¹Ÿä¸æ•¢è¯´ä¸€å®šæˆåŠŸã€‚å®‰è£…è¿‡ç¨‹ä¸­æŸå¤„ç»†å¾®å˜åŒ–ï¼Œä¹Ÿè®¸å°±ä¼šå‡ºç°å„ç§å¥‡è‘©é”™è¯¯ã€‚
æ€»çš„æ¥è¯´ï¼ŒOpenStackå¤§è‡´åˆ†ä¸º4ç§å®‰è£…æ–¹å¼ï¼š1ã€åŸºäºè™šæ‹Ÿæœºçš„å¿«é€Ÿä½“éªŒå®‰è£…ã€‚è¿™æ˜¯æœ€ç®€å•çš„æ–¹æ³•ï¼ŒæŠŠæ­å»ºå¥½ç¯å¢ƒçš„è™šæ‹Ÿæœºè¿è¡Œèµ·æ¥å³å¯ã€‚ä½†æ˜¯ï¼Œé—æ†¾çš„æ˜¯ï¼Œåœ¨ç½‘ä¸Šæ²¡æœ‰æ‰¾åˆ°OpenStackçš„è™šæ‹Ÿæœºé•œåƒã€‚
2ã€åŸºäºDevStackå¿«é€Ÿè„šæœ¬å®‰è£…ã€‚è¿™æ˜¯OpenStackå®˜æ–¹æ¨èçš„æ–¹å¼ï¼Œå®‰è£…é€Ÿåº¦è¾ƒå¿«ï¼ŒåŸºäºFolsomç‰ˆæœ¬ã€‚ä½†æ˜¯ï¼Œå®‰è£…è¿‡ç¨‹ä¸­ä¸€è¨€ä¸åˆå°±æŠ¥é”™ï¼Œå›°éš¾é‡é‡ã€‚
3ã€ä½¿ç”¨è‡ªåŠ¨åŒ–å®‰è£…å·¥å…·ã€‚RDOã€Fuelã€Puppetã€Chefã€Saltç­‰ï¼Œéƒ½æ˜¯OpenStackçš„è‡ªåŠ¨åŒ–å®‰è£…å·¥å…·ã€‚è¯´æ˜¯è‡ªåŠ¨åŒ–å®‰è£…å·¥å…·ï¼Œå®é™…ä¸Šå®‰è£…é…ç½®æ—¶ï¼Œä¹Ÿæ˜¯éå¸¸ç¹çã€‚
4ã€æ‰‹åŠ¨å®‰è£…ã€‚è¿™ç§æ–¹å¼æœ€å›°éš¾ï¼Œä½†æ˜¯å®é™…ç”Ÿäº§ç¯å¢ƒä¸‹ï¼ŒåŸºæœ¬éƒ½éœ€è¦æ‰‹åŠ¨å®‰è£…ã€‚
æœ¬æ–‡ï¼Œå°±æ¢è®¨ä¸€ä¸‹åœ¨VirtualBoxä¸­ä½¿ç”¨DevStackå®‰è£…OpenStackçš„æ­¥éª¤ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¦è‡ªå·±åˆ›å»ºä¸€ä¸ªOpenStackçš„è™šæ‹Ÿæœºé•œåƒã€‚


ç³»ç»Ÿå‡†å¤‡1ã€VirtualBoxä¸­å®‰è£…å¥½Ubuntu16ï¼Œè‡³å°‘éœ€è¦å†…å­˜4Gï¼Œç¡¬ç›˜20Gã€‚
2ã€é…ç½®å¥½Ubuntu16çš„ç½‘ç»œåœ°å€ä¸º192.169.56.102ã€‚
3ã€å®‰è£…å¥½sshæœåŠ¡ï¼Œæ–¹ä¾¿è¿œç¨‹æ“ä½œã€‚
æ­¥éª¤2å’Œ3å¯ä»¥å‚è€ƒã€ŠVirtualBoxä¸‹CentOS7å’ŒUbuntu16.04ç½‘ç»œé…ç½®ã€‹ã€‚
ç¯å¢ƒå‡†å¤‡1ã€å®‰è£…gitapt-get install git
2ã€å®‰è£…pythonapt-get install python
3ã€æ·»åŠ stackç”¨æˆ·useradd -s /bin/bash -d /opt/stack -m stack
4ã€ç»™stackç”¨æˆ·æ·»åŠ sudoæƒé™echo &quot;stack ALL=(ALL) NOPASSWD: ALL&quot; | sudo tee /etc/sudoers.d/stack
5ã€åˆ‡æ¢åˆ°stackç”¨æˆ·su - stack
6ã€ä¸‹è½½devstackgit clone https://git.openstack.org/openstack-dev/devstackæˆ–è€…git clone https://github.com/openstack-dev/devstack
æ¨èä»githubä¸‹è½½ã€‚é€Ÿåº¦ç¼“æ…¢ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚
7ã€åˆ‡æ¢åˆ°stable/newtonåˆ†æ”¯cd devstack
git checkout stable/newton
é…ç½®devstackåˆ›å»ºlocal.confåœ¨devstackç›®å½•ä¸‹åˆ›å»ºlocal.confæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
[[local|localrc]]ADMIN_PASSWORD=voidkingDATABASE_PASSWORD=$ADMIN_PASSWORDRABBIT_PASSWORD=$ADMIN_PASSWORDSERVICE_PASSWORD=$ADMIN_PASSWORD# BranchesKEYSTONE_BRANCH=stable/newtonNOVA_BRANCH=stable/newtonNEUTRON_BRANCH=stable/newtonSWIFT_BRANCH=stable/newtonGLANCE_BRANCH=stable/newtonCINDER_BRANCH=stable/newton# Use mirrorGIT_BASE=http://git.trystack.cnNOVNC_REPO=http://git.trystack.cn/kanaka/noVNC.gitSPICE_REPO=http://git.trystack.cn/git/spice/spice-html5.git# Enable heat servicesenable_service h-eng h-api h-api-cfn h-api-cw# Enable heat pluginenable_plugin heat http://git.trystack.cn/openstack/heat.git stable/newtonIMAGE_URL_SITE=&quot;http://download.fedoraproject.org&quot;IMAGE_URL_PATH=&quot;/pub/fedora/linux/releases/25/CloudImages/x86_64/images/&quot;IMAGE_URL_FILE=&quot;Fedora-Cloud-Base-25-1.3.x86_64.qcow2&quot;IMAGE_URLS+=&quot;,&quot;$IMAGE_URL_SITE$IMAGE_URL_PATH$IMAGE_URL_FILE# Service/Dashboard IPFLOATING_RANGE=192.168.1.224/27HOST_IP=192.168.56.102FLAT_INTERFACE=enp0s3

local.confè¯´æ˜1ã€å¯†ç é…ç½®
ADMIN_PASSWORD=voidkingDATABASE_PASSWORD=$ADMIN_PASSWORDRABBIT_PASSWORD=$ADMIN_PASSWORDSERVICE_PASSWORD=$ADMIN_PASSWORD

2ã€gitä»“åº“devstacké»˜è®¤ä¼šä» https://git.openstack.org ä¸Šä¸‹è½½openstackç»„ä»¶ï¼Œé‚£æ˜¯ç›¸å½“çš„æ…¢ã€‚æ•…åœ¨local.confå¿…é¡»è¦æŠŠä»“åº“æ›¿æ¢æˆå…¶ä»–æºï¼Œå›½å†…æ¨ègit.trystack.cnã€‚æ³¨æ„ï¼Œtrystackç”¨çš„æ˜¯httpï¼Œä¸æ˜¯httpsã€‚
GIT_BASE=http://git.trystack.cn
æˆ–è€…
GIT_BASE=https://github.com

3ã€branchä¿è¯ä¸devstackçš„branchä¸€è‡´ï¼Œé¿å…ä¸å¯é¢„çŸ¥çš„é—®é¢˜ã€‚
NOVA_BRANCH=stable/newton

4ã€Service/Dashboard IPä¸è™šæ‹ŸæœºIPä¿æŒä¸€è‡´ã€‚
HOST_IP=192.168.56.102

æ›´æ¢pypiæºï¼ˆå¯é€‰ï¼‰devstacké»˜è®¤pythonæºä¸º https://pypi.python.org ï¼Œå›½å†…è®¿é—®éå¸¸æ…¢ã€‚å¯ä»¥ä» https://www.pypi-mirrors.org/ é€‰ä¸€ä¸ªå›½å†…çš„é•œåƒï¼ŒæŠŠé•œåƒåœ°å€å†™åˆ°pip.confæ–‡ä»¶ï¼Œå¹¶æ”¾åˆ°/root/.pip/pip.confä»¥åŠ/home/stack/.pip/pip.confã€‚
[global]index-url = https://pypi.doubanio.com/simple

å®‰è£…devstack1ã€åˆ‡æ¢stackç”¨æˆ·ï¼Œåœ¨devstackç›®å½•ä¸‹ã€‚./stack.sh
å®‰è£…è¿‡ç¨‹ä¸­ï¼Œä¼šä¸‰æ¬¡æç¤ºè¾“å…¥å¯†ç ï¼Œè¿™äº›å¯†ç éœ€è¦å’Œlocal.confä¸­ä¿æŒä¸€è‡´ã€‚
å¦‚æœä¸‹è½½æŠ¥é”™äº†ã€‚ã€‚ã€‚ï¼Œè¯·é‡æ–°æ‰§è¡Œï¼š./stack.sh
è¿™ä¸€æ­¥éå¸¸ä¹…ï¼ŒéƒåŒå­¦ç”¨äº†å…­ä¸ªå¤šå°æ—¶ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚
3ã€å®‰è£…æˆåŠŸï¼Œæç¤ºï¼š
=========================Total runtime         2982run_process           104test_with_retry         6apt-get-update         22pip_install           462restart_apache_server  15wait_for_service       26apt-get                12=========================This is your host IP address: 192.168.56.102This is your host IPv6 address: ::1Horizon is now available at http://192.168.56.102/dashboardKeystone is serving at http://192.168.56.102/identity/The default users are: admin and demoThe password: voidking2017-06-15 01:01:59.770 | WARNING: 2017-06-15 01:01:59.771 | Using lib/neutron-legacy is deprecated, and it will be removed in the future2017-06-15 01:01:59.771 | stack.sh completed in 2982 seconds.


4ã€å¤§åŠŸå‘Šæˆï¼Œè¿™æ—¶å°±å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®openstackæœåŠ¡äº†ï¼è®¿é—®åœ°å€ï¼šhttp://192.168.56.102/dashboard

PSï¼šå¦‚æœè¿™ä¸€æ­¥æ— æ³•è®¿é—®ï¼Œæç¤ºâ€œInternal Server Errorâ€ï¼Œé‚£ä¹ˆéœ€è¦æ‰‹åŠ¨æŠŠipåœ°å€åŠ åˆ°local_settings.pyé‡Œçš„ALLOWED_HOSTSå­—æ®µã€‚vim /opt/stack/horizon/openstack_dashboard/local/local_settings.py
# If horizon is running in production (DEBUG is False), set this# with the list of host/domain names that the application can serve.# For more information see:# https://docs.djangoproject.com/en/dev/ref/settings/#allowed-hostsALLOWED_HOSTS = [&#x27;*&#x27;]

ç„¶åé‡å¯apache2æœåŠ¡ï¼Œservice apache2 restart
5ã€è¾“å…¥ç”¨æˆ·åadminï¼Œå¯†ç voidkingï¼Œè¿›å…¥ç®¡ç†é¢æ¿ã€‚
ä¹¦ç­¾VirtualBox + DevStack
DevStack
10åˆ†é’Ÿå®‰è£…OpenStack
Fuel 30 åˆ†é’Ÿå¿«é€Ÿå®‰è£…OpenStack
ä¸ªäººç”µè„‘ä¸Šæ­å»ºOpenStackçš„å®éªŒå®¤
All-In-One Single Machine
Huawei Icehouse All in One Operation Guide
penStacké¡¹ç›®ç³»åˆ—ä»‹ç»ï¼ˆ3ï¼‰ Devstack
DevStackç¯å¢ƒæ­å»º
Ubuntu14.04ä¸‹è½½åœ°å€1
Ubuntu14.04ä¸‹è½½åœ°å€2
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>openstack</tag>
        <tag>ssh</tag>
        <tag>virtualbox</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenStackå…¥é—¨</title>
    <url>/dev-openstack-start/</url>
    <content><![CDATA[äº‘è®¡ç®—â€œäº‘â€æ˜¯ä¸¤ä¸ªæ¯”å–»ï¼šç¬¬ä¸€ä¸ªæ¯”å–»æ˜¯äº’è”ç½‘ï¼Œè®¡ç®—èµ„æºä¸åœ¨æœ¬åœ°ï¼Œåœ¨äº’è”ç½‘çš„å¦ä¸€ç«¯ï¼ˆäº‘ç«¯ï¼‰ã€‚ç¬¬äºŒä¸ªæ¯”å–»æ˜¯ç¾¤ç»„ï¼Œå¤©ä¸Šçš„äº‘æ˜¯é›¨æ»´çš„æ±‡èšæˆç¾¤ç»„ï¼Œäº‘è®¡ç®—ä¸­çš„äº‘æ˜¯è®¡ç®—èµ„æºçš„ç¾¤ç»„ã€‚
äº‘è®¡ç®—æœ‰ä¸€ä¸ªæ„¿æ™¯ï¼Œå°±æ˜¯å¸Œæœ›æŠŠè®¡ç®—åƒæ°´ç”µä¸€æ ·æä¾›ç»™ç”¨æˆ·ä½¿ç”¨ã€‚ç„¶è€Œç”¨æˆ·å¹¶ä¸æ˜¯ç›´æ¥ä½¿ç”¨ç”µï¼Œè€Œæ˜¯ä½¿ç”¨ç”µç¯ç”µè§†ç­‰ï¼›åŒæ ·ï¼Œç”¨æˆ·å¹¶ä¸ä¼šç›´æ¥ä½¿ç”¨è®¡ç®—èµ„æºï¼Œè€Œæ˜¯ä½¿ç”¨åœ¨è®¡ç®—èµ„æºä¸Šå±‚å¼€å‘çš„ä¸€äº›åº”ç”¨ã€‚ 
â€œäº‘â€æ˜¯åˆ†å±‚çš„ï¼š

IaaSï¼šInfrastructure-as-a-Serviceï¼ŒåŸºç¡€è®¾æ–½å³æœåŠ¡ã€‚
PaaSï¼šPlatform-as-a-Serviceï¼Œå¹³å°å³æœåŠ¡ã€‚
SaaSï¼šSoftware-as-a-Serviceï¼Œè½¯ä»¶å³æœåŠ¡ã€‚



What is OpenStack?
OpenStack is a cloud operating system that controls large pools of compute, storage, and networking resources throughout a datacenter, all managed through a dashboard that gives administrators control while empowering their users to provision resources through a web interface.

OpenStackæ˜¯ä¸€ä¸ªäº‘æ“ä½œç³»ç»Ÿï¼Œæ§åˆ¶æ•´ä¸ªæ•°æ®ä¸­å¿ƒçš„è®¡ç®—ã€å­˜å‚¨å’Œç½‘ç»œèµ„æºã€‚ç®¡ç†å‘˜é€šè¿‡é¢æ¿ç®¡ç†OpenStackï¼Œæ™®é€šç”¨æˆ·é€šè¿‡ä¸€ä¸ªWebç•Œé¢è·å–èµ„æºã€‚
OpenStackå°†ç¡¬ä»¶èµ„æºè™šæ‹ŸåŒ–å‡ºè®¡ç®—èµ„æºæ± ï¼Œå‘ä¸Šå¼€æ”¾äº†ä¸€ç³»åˆ—APIï¼Œç”¨äºæ”¯æŒä¸Šå±‚åº”ç”¨çš„å¼€å‘ï¼Œæ»¡è¶³ç”¨æˆ·å¯¹è®¡ç®—èµ„æºçš„å„ç§éœ€æ±‚ã€‚
OpenStackä¸Dockerçš„é›†æˆæœ‰ä¸¤ä¸ªæ–¹é¢ï¼š1ã€åˆ©ç”¨Dockerè¿›è¡ŒOpenStackéƒ¨ç½²ã€‚2ã€åœ¨OpenStackä¸­é›†æˆDockerï¼Œæä¾›PaaSæœåŠ¡ã€‚
ä¹¦ç­¾å†™åœ¨æœ€å‰é¢ - æ¯å¤©5åˆ†é’Ÿç©è½¬ OpenStackï¼ˆ1ï¼‰
5åˆ†é’Ÿå­¦ä¼šOpenStack åŸºç¡€çŸ¥è¯†
ä¸ºä½•ç°åœ¨æµè¡ŒOpenStackå’ŒDockerç»“åˆï¼Ÿ
æ·±åº¦è§£æDockerå’ŒOpenStackç³»ç»Ÿé›†æˆ
Dockerå­¦ä¹ ç¬”è®° â€” Dockerä¸OpenStacké›†æˆ
How To Get Started With OpenStack
äº‘æœåŠ¡çš„ä¸‰å±‚æ¦‚å¿µ
]]></content>
      <categories>
        <category>engineering</category>
        <category>openstack</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>openstack</tag>
      </tags>
  </entry>
  <entry>
    <title>è¡Œä¸ºå‹æ¨¡å¼ä¹‹è¿­ä»£å™¨æ¨¡å¼</title>
    <url>/dev-design-pattern-iterator/</url>
    <content><![CDATA[éœ€æ±‚åœºæ™¯åœ¨Javaä¸­ï¼Œç»å¸¸éœ€è¦å°†ä¸€ç±»å¯¹è±¡æ”¾åˆ°Listã€Setã€Mapç­‰å®¹å™¨ä¸­ï¼Œè€Œä¸”é€šå¸¸éœ€è¦å¯¹å®¹å™¨ä¸­çš„å¯¹è±¡è¿›è¡Œéå†è®¿é—®ã€‚é‚£ä¹ˆå¦‚ä½•å®ç°å¯¹è¿™äº›å®¹å™¨çš„éå†å‘¢ï¼Ÿå½“ç„¶ï¼Œæ¯ä¸ªå®¹å™¨æœ¬èº«éƒ½æä¾›äº†éå†çš„æ–¹æ³•ã€‚ä½†æ˜¯è¿™äº›æ–¹æ³•æ˜¯ä¸ç»Ÿä¸€çš„ï¼Œå®¢æˆ·ç«¯çš„ä½¿ç”¨å˜å¾—éº»çƒ¦ã€‚


è§£å†³åŠæ³•å…¶å®ï¼Œåœ¨Javaä¸­ä¸ç®¡æ˜¯é‡‡ç”¨Listã€Setæ–¹å¼å­˜å‚¨çš„å¯¹è±¡ï¼Œè¿˜æ˜¯é‡‡ç”¨Mapæ–¹å¼å­˜å‚¨å¯¹è±¡ï¼Œéƒ½å¯ä»¥ä½¿ç”¨è¿­ä»£å™¨è¿›è¡Œéå†ã€‚
æ€»ç»“è¿­ä»£å™¨æ¨¡å¼æä¾›ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥é¡ºåºè®¿é—®ä¸€ä¸ªé›†åˆä¸­çš„å¯¹è±¡ï¼Œè€Œåˆä¸éœ€è¦æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚
è¿­ä»£å™¨æ¨¡å¼åˆ†ç¦»äº†é›†åˆå¯¹è±¡çš„éå†è¡Œä¸ºï¼ŒæŠ½è±¡å‡ºä¸€ä¸ªè¿­èµ·å™¨ç±»æ¥è´Ÿè´£ï¼Œè¿™æ ·æ—¢å¯ä»¥åšåˆ°ä¸æš´éœ²é›†åˆçš„å†…éƒ¨ç»“æ„ï¼Œåˆå¯è®©å¤–éƒ¨ä»£ç é€æ˜åœ°è®¿é—®é›†åˆå†…éƒ¨çš„æ•°æ®ã€‚
è¿­ä»£å™¨æ¨¡å¼ä¸»è¦ç”±4éƒ¨åˆ†ç»„æˆï¼šè¿­ä»£å™¨è§’è‰²ã€å…·ä½“è¿­ä»£å™¨è§’è‰²ã€å®¹å™¨è§’è‰²å’Œå…·ä½“å®¹å™¨è§’è‰²ã€‚

è¿­ä»£å™¨è§’è‰²è´Ÿè´£å®šä¹‰è®¿é—®å’Œéå†å…ƒç´ çš„æ¥å£ã€‚
å…·ä½“è¿­ä»£å™¨è§’è‰²è¦å®ç°è¿­ä»£å™¨æ¥å£ï¼Œå¹¶è¦è®°å½•éå†ä¸­çš„å½“å‰ä½ç½®ã€‚
å®¹å™¨è§’è‰²è´Ÿè´£æä¾›åˆ›å»ºå…·ä½“è¿­ä»£å™¨è§’è‰²çš„æ¥å£ã€‚
å…·ä½“å®¹å™¨è§’è‰²å®ç°åˆ›å»ºå…·ä½“è¿­ä»£å™¨è§’è‰²çš„æ¥å£ï¼Œè¿™ä¸ªå…·ä½“è¿­ä»£å™¨è§’è‰²ä¸è¯¥å®¹å™¨çš„ç»“æ„æ— å…³ã€‚

æºç åˆ†äº«https://github.com/voidking/design-pattern-behavior.git
å‚è€ƒæ–‡çŒ®ã€Šæ˜“å­¦è®¾è®¡æ¨¡å¼ã€‹ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹æ¥å£è®¾è®¡å…­å¤§åŸåˆ™è½¯ä»¶è®¾è®¡å…­å¤§è®¾è®¡åŸåˆ™è®²è§£Javaä¸­å¦‚ä½•éå†Mapå¯¹è±¡çš„4ç§æ–¹æ³•Javaå®¹å™¨é›†åˆç±»çš„åŒºåˆ«ç”¨æ³•
]]></content>
      <categories>
        <category>engineering</category>
        <category>architecture</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>è¡Œä¸ºå‹æ¨¡å¼ä¹‹ç­–ç•¥æ¨¡å¼</title>
    <url>/dev-design-pattern-strategy/</url>
    <content><![CDATA[ç°å®åœºæ™¯åœ¨é”€å”®äº§å“æ—¶ï¼Œä¸ºäº†ä¿ƒé”€ï¼Œç»å¸¸ä¼šè¿›è¡Œæ‰“æŠ˜ã€‚é’ˆå¯¹ä¸åŒçš„æ—¶é—´ã€ä¸åŒçš„æ¶ˆè´¹ç¾¤ä½“ï¼Œé‡‡ç”¨çš„æ‰“æŠ˜ç­–ç•¥ä¹Ÿä¼šä¸åŒã€‚æ¯”å¦‚æœ‰çš„æ‰“å…«æŠ˜ï¼Œæœ‰çš„ä¹°ä¸€é€ä¸€ã€‚è¿™ç§åŠ¨æ€çš„è°ƒæ•´é”€å”®ç­–ç•¥çš„è¡Œä¸ºï¼Œå°±æ˜¯ç­–ç•¥æ¨¡å¼åœ¨ç°å®ç”Ÿæ´»ä¸­çš„åº”ç”¨ã€‚


éœ€æ±‚åœºæ™¯ä¸€ä¸ªå¤§å…¬å¸æœ‰ä¸¤ä¸ªå­å…¬å¸ï¼Œå‰æ—å­å…¬å¸å’Œæ²³åŒ—å­å…¬å¸ï¼Œæ¯ä¸ªå­å…¬å¸éƒ½è¦è®¡ç®—è–ªèµ„ã€‚è–ªèµ„çš„è®¡ç®—åŒ…æ‹¬åŸºæœ¬å·¥èµ„ã€ç¤¾ä¼šä¿é™©å’Œä¸ªäººæ‰€å¾—ç¨ã€‚
ä¸€èˆ¬æ€è·¯ï¼Œä½¿ç”¨æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚
public abstract class SalaryTemplate&#123;    public void Compute()    &#123;        computeSalary();        computeInsurance();        computeTax();    &#125;    public abstract void computeSalary();    public abstract void computeInsurance();    public abstract void computeTax();&#125;

public class JiLinSalary extends SalaryTemplate&#123;    public void computeSalary()    &#123;        System.out.println(&quot;é‡‡ç”¨å‰æ—ç®—æ³•è®¡ç®—åŸºæœ¬å·¥èµ„&quot;);    &#125;    public void computeInsurance()    &#123;        System.out.println(&quot;é‡‡ç”¨å‰æ—ç®—æ³•è®¡ç®—ä¿é™©&quot;);    &#125;    public void computeTax()    &#123;        System.out.println(&quot;é‡‡ç”¨å‰æ—ç®—æ³•è®¡ç®—æ‰€å¾—ç¨&quot;);    &#125;&#125;

public class HeBeiSalary extends SalaryTemplate&#123;    public void computeSalary()    &#123;        System.out.println(&quot;é‡‡ç”¨æ²³åŒ—ç®—æ³•è®¡ç®—åŸºæœ¬å·¥èµ„&quot;);    &#125;    public void computeInsurance()    &#123;        System.out.println(&quot;é‡‡ç”¨æ²³åŒ—ç®—æ³•è®¡ç®—ä¿é™©&quot;);    &#125;    public void computeTax()    &#123;        System.out.println(&quot;é‡‡ç”¨æ²³åŒ—ç®—æ³•è®¡ç®—æ‰€å¾—ç¨&quot;);    &#125;&#125;

public class Client &#123;    public static void main(String[] args) &#123;        SalaryTemplate jilin = new JiLinSalary();        SalaryTemplate hebei = new HeBeiSalary();                jilin.computeSalary();        jilin.computeInsurance();        jilin.computeTax();                hebei.computeSalary();        hebei.computeInsurance();        hebei.computeTax();    &#125;&#125;

è§£å†³åŠæ³•ä½†æ˜¯ï¼Œå¦‚æœå®ç°åˆ°è¿™é‡Œï¼Œè¿˜æ˜¯æœ‰é—®é¢˜çš„ï¼Œé‚£å°±æ˜¯ç±»çš„èŒè´£ä¸æ¸…ã€‚è¿™ä¸ªæ¨¡æ¿ç±»ï¼Œæ—¢è¦è®¡ç®—åŸºæœ¬å·¥èµ„ï¼Œåˆè¦è®¡ç®—ç¤¾ä¼šä¿é™©ï¼Œè¿˜è¦è®¡ç®—ä¸ªäººæ‰€å¾—ç¨ã€‚è¿åäº†å•ä¸€èŒè´£åŸåˆ™ã€‚é‚£è¯¥å¦‚ä½•è®¾è®¡å‘¢ï¼Ÿå¾ˆæ˜æ˜¾ï¼Œéœ€è¦æŠŠè®¡ç®—åŸºæœ¬å·¥èµ„ã€ç¤¾ä¼šä¿é™©ã€ä¸ªäººæ‰€å¾—ç¨çš„åŠŸèƒ½è¿›è¡Œæ‹†åˆ†ã€‚
æ€»ç»“ç­–ç•¥æ¨¡å¼å°±æ˜¯å®šä¹‰äº†ä¸€ç³»åˆ—çš„ç®—æ³•ï¼Œå¹¶å°†æ¯ä¸€ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œè€Œä¸”ä½¿å®ƒä»¬è¿˜å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚ç­–ç•¥æ¨¡å¼è®©ç®—æ³•ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„å®¢æˆ·ç«¯è€Œç‹¬ç«‹å˜åŒ–ã€‚
ç­–ç•¥æ¨¡å¼ä¸»è¦ç”±3éƒ¨åˆ†ç»„æˆï¼šæŠ½è±¡ç­–ç•¥ç±»ã€å…·ä½“ç­–ç•¥ç±»ã€ä¸Šä¸‹æ–‡åœºæ™¯ç±»ã€‚
ä¼˜ç‚¹ï¼šä½¿ç”¨ç­–ç•¥æ¨¡å¼ï¼Œå¯ä»¥æ›¿æ¢ç»§æ‰¿å…³ç³»çš„åŠæ³•ï¼Œä¹Ÿå¯ä»¥é¿å…ä½¿ç”¨å¤šé‡æ¡ä»¶è½¬ç§»è¯­å¥ã€‚ç¼ºç‚¹ï¼šä½¿ç”¨ç­–ç•¥æ¨¡å¼æ—¶å®¢æˆ·ç«¯å¿…é¡»çŸ¥é“æ‰€æœ‰çš„ç­–ç•¥ç±»ï¼Œå¹¶è‡ªè¡Œå†³å®šä½¿ç”¨å“ªä¸€ä¸ªç­–ç•¥ç±»ï¼Œå¦‚æœç®—æ³•æ¯”è¾ƒå¤šï¼Œåˆ™ä¼šé€ æˆå¾ˆå¤šçš„ç­–ç•¥ç±»ã€‚
æºç åˆ†äº«https://github.com/voidking/design-pattern-behavior.git
å‚è€ƒæ–‡çŒ®ã€Šæ˜“å­¦è®¾è®¡æ¨¡å¼ã€‹ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹æ¥å£è®¾è®¡å…­å¤§åŸåˆ™è½¯ä»¶è®¾è®¡å…­å¤§è®¾è®¡åŸåˆ™è®²è§£
]]></content>
      <categories>
        <category>engineering</category>
        <category>architecture</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>è¡Œä¸ºå‹æ¨¡å¼ä¹‹è§‚å¯Ÿè€…æ¨¡å¼</title>
    <url>/dev-design-pattern-observer/</url>
    <content><![CDATA[ç°å®åœºæ™¯æ¯å½“æœ‰æœ€æ–°ä¸€æœŸçš„æŠ¥çº¸å‡ºç‰ˆæ—¶ï¼Œé€æŠ¥å‘˜éƒ½ä¼šæŒ‰ç…§è®¢é˜…è€…çš„åå•ï¼ŒæŠŠæœ€æ–°çš„æŠ¥çº¸æŒ‰æ—¶é€åˆ°è®¢é˜…è€…æ‰‹é‡Œã€‚è€Œä¸”è®¢é˜…è€…ä¹Ÿå¯ä»¥éšæ—¶é€€è®¢æˆ–è€…è®¢é˜…å…¶ä»–çš„æŠ¥çº¸ï¼Œè¿™å°±æ˜¯è§‚å¯Ÿè€…åœ¨ç°å®ç”Ÿæ´»ä¸­çš„åº”ç”¨ã€‚


éœ€æ±‚åœºæ™¯ç”¨æˆ·å¯ä»¥åœ¨ç”µè„‘ç«¯ã€å®‰å“ç«¯æŸ¥çœ‹è‚¡ç¥¨è¡Œæƒ…ï¼Œå½“è‚¡ç¥¨ä»·æ ¼å’Œä¹°å–æ•°é‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¦é€šçŸ¥è¿™ä¸¤ä¸ªå®¢æˆ·ç«¯ã€‚
ä¸€èˆ¬æ€è·¯ï¼š
public class ComputerClient&#123;    public void updatePrice(String name)    &#123;        System.out.println(name + &quot;è‚¡ç¥¨åœ¨ç”µè„‘ä¸Šçš„ä»·æ ¼æ›´æ–°äº†&quot;);    &#125;    public void updateCount(String name)    &#123;        System.out.println(name + &quot;è‚¡ç¥¨åœ¨ç”µè„‘ä¸Šçš„ä¹°å–æ•°é‡æ›´æ–°äº†&quot;);    &#125;&#125;

public class AndroidClient&#123;    public void updatePrice(String name)    &#123;        System.out.println(name + &quot;è‚¡ç¥¨åœ¨å®‰å“ä¸Šçš„ä»·æ ¼æ›´æ–°äº†&quot;);    &#125;    public void updateCount(String name)    &#123;        System.out.println(name + &quot;è‚¡ç¥¨åœ¨å®‰å“ä¸Šçš„ä¹°å–æ•°é‡æ›´æ–°äº†&quot;);    &#125;&#125;

public class Stock&#123;    private String stockName = &quot;ä¸­ä¿¡è¯åˆ¸&quot;;    public void changeCount()    &#123;        ComputerClient computerClient = new ComputerClient();        computerClient.updateCount(stockName);                AndroidClient androidClient = new AndroidClient();        androidClient.updateCount(stockName);    &#125;    public void changePrice()    &#123;        ComputerClient computerClient = new ComputerClient();        computerClient.updatePrice(stockName);                AndroidClient androidClient = new AndroidClient();        androidClient.updatePrice(stockName);    &#125;&#125;

public class Client&#123;    public static void main(String[] args)    &#123;        Stock stock = new Stock();        stock.changePrice();        stock.changeCount();    &#125;&#125;

ä¸Šé¢çš„ä»£ç æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ï¼Œå¦‚æœè¦å¢åŠ ä¸€ä¸ªè‹¹æœå®¢æˆ·ç«¯ï¼Œå°±è¦ä¿®æ”¹Stockç±»çš„ä»£ç ï¼Œå¢åŠ å¯¹è‹¹æœå®¢æˆ·ç«¯çš„æ”¯æŒã€‚è€Œä¸”ï¼Œè‹¹æœå®¢æˆ·ç«¯è¦å†™å¾ˆå¤šé‡å¤ä»£ç ã€‚
åæ¥åˆä¸æƒ³æ”¯æŒè‹¹æœå®¢æˆ·ç«¯äº†ï¼Œè¿™æ—¶åˆè¦ä¿®æ”¹Stockç±»çš„ä»£ç ã€‚
ä¸€ä¸ªè‹¹æœå®¢æˆ·ç«¯è¿˜å¥½ï¼Œå¦‚æœè¿˜æœ‰æ›´å¤šå…¶ä»–çš„å®¢æˆ·ç«¯å‘¢ï¼Ÿ
è§£å†³åŠæ³•å¦‚æœèƒ½å¤Ÿåœ¨è‚¡ç¥¨ç±»å¢åŠ ä¸€ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥åŠ¨æ€ã€éšæ„åœ°æ·»åŠ æˆ–åˆ é™¤å®¢æˆ·ç«¯ï¼Œæ˜¯ä¸æ˜¯å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿè¦å®ç°åŠ¨æ€ã€éšæ„åœ°æ·»åŠ æˆ–åˆ é™¤å®¢æˆ·ç«¯ï¼Œå°±å¿…é¡»é¢å‘æ¥å£ç¼–ç¨‹ï¼Œå³æŠŠå„ç§å®¢æˆ·ç«¯æŠ½è±¡å¤„ç†ï¼Œåœ¨è‚¡ç¥¨ç±»é‡Œé’ˆå¯¹æŠ½è±¡çš„å®¢æˆ·ç«¯ç¼–ç¨‹ã€‚
æ€»ç»“è§‚å¯Ÿè€…æ¨¡å¼å°±æ˜¯å®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å°†å¾—åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚è§‚å¯Ÿè€…æ¨¡å¼ä¸»è¦ç”±4ä¸ªéƒ¨åˆ†ç»„æˆï¼šæŠ½è±¡ç›®æ ‡ç±»ã€å…·ä½“ç›®æ ‡ç±»ã€æŠ½è±¡è§‚å¯Ÿè€…ç±»ã€å…·ä½“è§‚å¯Ÿè€…ç±»ã€‚
æºç åˆ†äº«https://github.com/voidking/design-pattern-behavior.git
å‚è€ƒæ–‡çŒ®ã€Šæ˜“å­¦è®¾è®¡æ¨¡å¼ã€‹ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹æ¥å£è®¾è®¡å…­å¤§åŸåˆ™è½¯ä»¶è®¾è®¡å…­å¤§è®¾è®¡åŸåˆ™è®²è§£
]]></content>
      <categories>
        <category>engineering</category>
        <category>architecture</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>è¡Œä¸ºå‹æ¨¡å¼ä¹‹æ¨¡æ¿æ–¹æ³•æ¨¡å¼</title>
    <url>/dev-design-pattern-template-method/</url>
    <content><![CDATA[åœºæ™¯æœ‰ä¸€ä¸ªæŠ¥è¡¨æ‰“å°ç¨‹åºï¼Œç”¨æˆ·è§„å®šå¿…é¡»è¦æ‰“å°è¡¨å¤´ã€æ­£æ–‡ã€è¡¨å°¾ä¸‰ä¸ªéƒ¨åˆ†ã€‚
ä¸€èˆ¬æ€è·¯ï¼š
public class Report &#123;    public void print()    &#123;        printTitle();        printBody();        printTail();    &#125;        public void printTitle()    &#123;        System.out.println(&quot;é‡‡ç”¨ä¸€ç§æ–¹å¼æ‰“å°è¡¨å¤´&quot;);    &#125;    public void printBody()    &#123;        System.out.println(&quot;é‡‡ç”¨ä¸€ç§æ–¹å¼æ‰“å°æ­£æ–‡&quot;);    &#125;    public void printTail()    &#123;        System.out.println(&quot;é‡‡ç”¨ä¸€ç§æ–¹å¼æ‰“å°è¡¨å°¾&quot;);    &#125;&#125;



å®¢æˆ·ç«¯è°ƒç”¨çš„æ—¶å€™ï¼Œç›´æ¥newä¸€ä¸ªReportå¯¹è±¡ï¼Œç„¶åè°ƒç”¨printæ–¹æ³•å³å¯ã€‚ç°åœ¨çœ‹èµ·æ¥æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå¯æ˜¯éœ€æ±‚æ˜¯ä¸æ–­å˜åŒ–çš„ã€‚å¦‚æœç”¨æˆ·æå‡ºéœ€è¦æŠŠè¡¨å¤´æ”¹ä¸€ä¸‹æ ·å¼ï¼Œæ€ä¹ˆåŠï¼Ÿæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯åœ¨Reportç±»é‡Œä¿®æ”¹æ‰“å°è¡¨å¤´çš„ä»£ç ã€‚
ä¿®æ”¹å®Œæ¯•ï¼Œç”¨æˆ·åˆè§‰å¾—è¿˜æ˜¯åŸæ¥çš„æ ·å¼å¥½çœ‹ï¼Œè¦æ±‚å†æ”¹å›åŸæ¥çš„æ ·å¼ï¼Œè¿™æ—¶æˆ‘ä»¬è¦å†ä¿®æ”¹Reportã€‚
ä¿®æ”¹å®Œæ¯•ï¼Œç”¨æˆ·åˆè¦æ±‚ä¿®æ”¹æ­£æ–‡å’Œè¡¨å°¾ï¼Œæˆ‘ä»¬æ¥ç€ä¿®æ”¹Reportã€‚
ä¿®æ”¹å®Œæ¯•ï¼Œç”¨æˆ·è¦æ±‚æ‰“å°ä¸¤å¥—æ ·å¼çš„æŠ¥è¡¨ï¼Œç¬¬ä¸€å¥—å°±ä½¿ç”¨æœ€åˆçš„æ ·å¼ï¼Œç¬¬äºŒå¥—ä½¿ç”¨ä¿®æ”¹è¿‡è¡¨å¤´çš„æ ·å¼ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬æ²¡æ³•é€šè¿‡ä»…ä»…ä¿®æ”¹Reportæ¥å®Œæˆéœ€æ±‚äº†ï¼Œæˆ‘ä»¬è¦æ·»åŠ ä¸€ä¸ªReport2ã€‚ä»¥åä¹Ÿè®¸è¿˜è¦æ·»åŠ Report3ã€Report4ç­‰ç­‰ã€‚
æˆ‘ä»¬å‘ç°ï¼Œæ”¹æ¥æ”¹å»éå¸¸éº»çƒ¦ï¼Œè€Œä¸”å­˜åœ¨å¤§é‡é‡å¤ä»£ç ï¼Œè¿˜è¿åäº†å¼€é—­åŸåˆ™ã€‚é‚£ä¹ˆæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ
åˆ†æåˆ†æéœ€æ±‚å¯ä»¥çœ‹å‡ºï¼Œæ‰“å°è¡¨å¤´ã€æ­£æ–‡ã€è¡¨å°¾è¿™ä¸ªæµç¨‹æ˜¯ä¸å˜çš„ï¼Œè€Œæ‰“å°çš„æ–¹å¼æ˜¯å˜åŒ–çš„ã€‚
æ ¹æ®å¼€é—­åŸåˆ™ï¼Œä¸€ä¸ªè½¯ä»¶å®ä½“å¦‚ç±»ã€æ¨¡å—å’Œå‡½æ•°åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªè½¯ä»¶å®ä½“åº”è¯¥é€šè¿‡æ‰©å±•æ¥å®ç°å˜åŒ–ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¿®æ”¹å·²æœ‰çš„ä»£ç æ¥å®ç°å˜åŒ–ã€‚
é‚£ä¹ˆæˆ‘ä»¬æœ€å¥½æŠŠä¸å˜çš„éƒ¨åˆ†å’Œå˜åŒ–çš„éƒ¨åˆ†åˆ†å¼€ï¼Œä¸å˜çš„éƒ¨åˆ†ä½œä¸ºè½¯ä»¶å®ä½“ï¼Œå˜åŒ–çš„éƒ¨åˆ†ä½œä¸ºæ‰©å±•ã€‚
è§£å†³åŠæ³•Reportç±»ä½œä¸ºæŠ½è±¡ç±»ï¼Œè§„å®šæµç¨‹ã€‚å­ç±»ç»§æ‰¿Reportç±»ï¼Œå®ç°ä¸åŒæ ·å¼ã€‚
public abstract class Report&#123;    public void print()    &#123;        printTitle();        printBody();        printTail();    &#125;    public abstract void printTitle();    public abstract void printBody();    public abstract void printTail();&#125;

public class ReportImpl extends Report&#123;    public void printTitle()    &#123;        System.out.println(&quot;é‡‡ç”¨ä¸€ç§æ–¹å¼æ‰“å°è¡¨å¤´&quot;);    &#125;    public void printBody()    &#123;        System.out.println(&quot;é‡‡ç”¨ä¸€ç§æ–¹å¼æ‰“å°æ­£æ–‡&quot;);    &#125;    public void printTail()    &#123;        System.out.println(&quot;é‡‡ç”¨ä¸€ç§æ–¹å¼æ‰“å°è¡¨å°¾&quot;);    &#125;&#125;

æ€»ç»“æ¨¡æ¿æ–¹æ³•å¯ä»¥æ€»ç»“ä¸ºå››ä¸ªå­—ï¼šæŒ‰éƒ¨å°±ç­ã€‚é€‚ç”¨äºæµç¨‹æ˜¯å›ºå®šçš„ï¼Œè€Œæµç¨‹çš„å…·ä½“å®ç°æ˜¯å˜åŒ–çš„æƒ…å†µã€‚
åº”ç”¨Webå¼€å‘ä¸­çš„HttpServletç±»å°±æ˜¯ä¸€ä¸ªå…¸å‹æ¨¡æ¿åº”ç”¨ã€‚å¦‚æœæ²¡æœ‰HttpServletï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„MyServletéœ€è¦ç»§æ‰¿GenericServletã€‚
æ¥ä¸‹æ¥çš„å¤„ç†æµç¨‹æ˜¯ç¡®å®šçš„ï¼š1ã€è½¬åŒ–ServletRequestå’ŒServletResponseä¸ºHttpServletRequestå’ŒHttpServletResponseã€‚2ã€åˆ¤æ–­è¯·æ±‚ç±»å‹æ˜¯getã€postæˆ–è€…å…¶ä»–ç±»å‹ã€‚3ã€ä»HttpServletRequestä¸­æ‹¿åˆ°è¯·æ±‚å‚æ•°ï¼Œè¿›è¡Œä¸šåŠ¡å¤„ç†ã€‚
å…¶ä¸­ç»å¸¸å˜åŒ–çš„æ˜¯ç¬¬3æ­¥ã€‚
è€ŒHttpServletï¼Œè§„å®šäº†å¤„ç†çš„æµç¨‹ã€‚æˆ‘ä»¬çš„MyServletï¼Œå¦‚æœç»§æ‰¿HttpServletï¼Œé‚£ä¹ˆåªè¦ä¸“æ³¨äºç¬¬3æ­¥å³å¯ã€‚
æºç åˆ†äº«https://github.com/voidking/design-pattern-behavior.git
å‚è€ƒæ–‡çŒ®ã€Šæ˜“å­¦è®¾è®¡æ¨¡å¼ã€‹ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹æ¥å£è®¾è®¡å…­å¤§åŸåˆ™è½¯ä»¶è®¾è®¡å…­å¤§è®¾è®¡åŸåˆ™è®²è§£
]]></content>
      <categories>
        <category>engineering</category>
        <category>architecture</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¾è®¡æ¨¡å¼æ¦‚è¿°</title>
    <url>/dev-design-pattern-summary/</url>
    <content><![CDATA[è®¾è®¡æ¨¡å¼ç®€ä»‹1979å¹´ï¼Œå»ºç­‘å¸ˆäºšå†å±±å¤§ç¼–å†™äº†ã€Šå»ºç­‘çš„æ°¸æ’ä¹‹é“ã€‹ï¼Œè¿™æœ¬ä¹¦é˜è¿°äº†å»ºç­‘ä¸è§„åˆ’çš„æ–°è§‚ç‚¹ã€‚ä½œè€…é€šè¿‡å¯¹å½“ä»£å»ºç­‘çš„ç ”ç©¶å‘ç°ï¼šä¼˜ç§€çš„å»ºç­‘ä¸­ï¼Œæ€»æ˜¯å­˜åœ¨ç€ä¸€äº›ç›¸ä¼¼ä¹‹å¤„ã€‚å¦‚æœèƒ½å¤Ÿæ‰¾å‡ºè¿™äº›ä¼˜ç§€å»ºç­‘çš„ç‰¹å¾ï¼Œå°±èƒ½å¤Ÿæ‰¾åˆ°è¿™äº›å»ºç­‘æ˜¯é‡‡ç”¨äº†å“ªäº›æ–¹æ³•ï¼Œå¦‚ä½•è®¾è®¡æ‰å˜å¾—ä¼˜ç§€çš„ï¼Œä»è€Œä¹Ÿå°±èƒ½å¤Ÿå®¢è§‚è¯„ä»·ä¸€ä¸ªå»ºç­‘è®¾è®¡çš„å¥½åã€‚é€šè¿‡æ‰¾å‡ºå¹¶æŒæ¡è¿™äº›ä¼˜ç§€å»ºç­‘çš„è®¾è®¡æ–¹æ³•ï¼Œå»ºç­‘å¸ˆå°±å¯ä»¥æŠŠè¿™äº›æ–¹æ³•å¤åˆ¶åˆ°å…¶ä»–çš„å»ºç­‘è®¾è®¡ä¸­ï¼Œä»è€Œè®¾è®¡å‡ºåŒæ ·ä¼˜ç§€çš„å»ºç­‘æ¥ã€‚
å»ºç­‘è¡Œä¸šä¸­å­˜åœ¨çš„æƒ…å†µå’Œè½¯ä»¶è¡Œä¸šå­˜åœ¨çš„æƒ…å†µç±»ä¼¼ã€‚åœ¨è½¯ä»¶è¡Œä¸šï¼Œæ˜¯å¦ä¹Ÿèƒ½å¤Ÿä»é‚£äº›ä¼˜ç§€çš„è½¯ä»¶ä¸­ï¼Œæ‰¾åˆ°ä¸€äº›ç›¸åŒçš„ç‰¹å¾ã€ä¼˜ç§€çš„è®¾è®¡æ–¹æ³•ï¼Œä»è€Œä½¿è½¯ä»¶å¼€å‘äººå‘˜èƒ½å¤ŸæŒæ¡è¿™äº›æ–¹æ³•ï¼Œå¹¶å°†å…¶åº”ç”¨åˆ°å…¶ä»–çš„è½¯ä»¶å¼€å‘ä¸­ï¼Œä»è€Œä¹Ÿå¼€å‘å‡ºåŒæ ·ä¼˜ç§€çš„è½¯ä»¶å‘¢ï¼Ÿ
ä¸ºäº†æ¢è®¨è¿™ä¸ªé—®é¢˜ï¼Œå¾ˆå¤šè½¯ä»¶å¼€å‘äººå‘˜å¼€å§‹äº†è¿™æ–¹é¢çš„ç ”ç©¶ï¼Œå…¶ä¸­å½±å“æœ€å¤§çš„æ–‡çŒ®æ˜¯ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦ï¼Œè¯¥ä¹¦çš„å››ä¸ªä½œè€…è¢«ç§°ä¸ºGoFæˆ–Gang of Fourã€‚è¿™æœ¬ä¹¦æ€»ç»“äº†äººç±»å†å²ä¸Šè½¯ä»¶å¼€å‘çš„ç»éªŒï¼Œç»™å‡ºäº†æè¿°æ¨¡å¼çš„ä¸€äº›ç‰¹å¾ï¼Œå¹¶æç‚¼å‡ºç”¨äºæŒ‡å¯¼è½¯ä»¶è®¾è®¡çš„23ç§æ¨¡å¼å’Œä¸€äº›é¢å‘å¯¹è±¡çš„è®¾è®¡æ–¹æ³•ã€‚


è®¾è®¡æ¨¡å¼åˆ†ç±»è®¾è®¡æ¨¡å¼å¯ä»¥åˆ†ä¸ºä¸‰å¤§ç±»ï¼šåˆ›å»ºå‹æ¨¡å¼ï¼ˆCreational Patternsï¼‰ã€ç»“æ„å‹æ¨¡å¼ï¼ˆStructural Patternsï¼‰ã€è¡Œä¸ºå‹æ¨¡å¼ï¼ˆBehavioral Patternsï¼‰ã€‚
åˆ›å»ºå‹æ¨¡å¼è½¯ä»¶è®¾è®¡æ–¹é¢ï¼Œåˆ†å·¥è¶Šæ¥è¶Šç»†ï¼Œå› æ­¤å¯¹è±¡çš„åˆ›å»ºå’Œå¯¹è±¡çš„ä½¿ç”¨åˆ†å¼€ä¹Ÿå°±æˆäº†å¿…ç„¶è¶‹åŠ¿ã€‚å› ä¸ºå¯¹è±¡çš„åˆ›å»ºä¼šæ¶ˆè€—å¾ˆå¤šèµ„æºï¼Œæ‰€ä»¥å¯¹å¯¹è±¡çš„åˆ›å»ºè¿›è¡Œç ”ç©¶ï¼Œèƒ½å¤Ÿé«˜æ•ˆåœ°åˆ›å»ºå¯¹è±¡å°±æ˜¯åˆ›å»ºå‹æ¨¡å¼è¦æ¢è®¨çš„é—®é¢˜ã€‚åˆ›å»ºå‹æ¨¡å¼æœ‰6ä¸ªï¼š

ç®€å•å·¥å‚æ¨¡å¼ï¼ˆSimple Factoryï¼‰
å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory Methodï¼‰
æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factoryï¼‰
åˆ›å»ºè€…æ¨¡å¼ï¼ˆBuilderï¼‰
åŸå‹æ¨¡å¼ï¼ˆPrototypeï¼‰
å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰

ç»“æ„å‹æ¨¡å¼åœ¨è§£å†³äº†å¯¹è±¡çš„åˆ›å»ºé—®é¢˜åï¼Œå¯¹è±¡çš„ç»„æˆä»¥åŠå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»å°±æˆäº†å¼€å‘äººå‘˜å…³æ³¨çš„ç„¦ç‚¹ï¼Œå› ä¸ºå¦‚ä½•è®¾è®¡å¯¹è±¡çš„ç»“æ„ã€ç»§æ‰¿å’Œä¾èµ–å…³ç³»ä¼šå½±å“åç»­ç¨‹åºçš„ç»´æŠ¤æ€§ã€ä»£ç çš„å¥å£®æ€§ã€è€¦åˆæ€§ç­‰ã€‚å¯¹è±¡ç»“æ„çš„è®¾è®¡å¾ˆå®¹æ˜“ä½“ç°å‡ºè®¾è®¡äººå‘˜æ°´å¹³çš„é«˜ä½ã€‚ç»“æ„å‹æ¨¡å¼æœ‰7ä¸ªï¼š

å¤–è§‚æ¨¡å¼ï¼ˆFacadeï¼‰
é€‚é…å™¨æ¨¡å¼ï¼ˆAdapterï¼‰
ä»£ç†æ¨¡å¼ï¼ˆProxyï¼‰
è£…é¥°æ¨¡å¼ï¼ˆDecoratorï¼‰
æ¡¥æ¨¡å¼ï¼ˆBridgeï¼‰
ç»„åˆæ¨¡å¼ï¼ˆCompositeï¼‰
äº«å…ƒæ¨¡å¼ï¼ˆFlyweightï¼‰

è¡Œä¸ºå‹æ¨¡å¼åœ¨å¯¹è±¡çš„åˆ›å»ºå’Œå¯¹è±¡çš„ç»“æ„é—®é¢˜éƒ½è§£å†³äº†ä¹‹åï¼Œå°±å‰©ä¸‹å¯¹è±¡çš„è¡Œä¸ºé—®é¢˜äº†ï¼Œå¦‚æœå¯¹è±¡çš„è¡Œä¸ºè®¾è®¡çš„å¥½ï¼Œé‚£ä¹ˆå¯¹è±¡çš„è¡Œä¸ºå°±ä¼šæ›´æ¸…æ™°ï¼Œå®ƒä»¬ä¹‹é—´çš„åä½œæ•ˆç‡å°±ä¼šæé«˜ã€‚è¡Œä¸ºå‹æ¨¡å¼æœ‰11ä¸ªï¼š

æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆTemplate Methodï¼‰
è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰
çŠ¶æ€æ¨¡å¼ï¼ˆStateï¼‰
ç­–ç•¥æ¨¡å¼ï¼ˆStrategyï¼‰
èŒè´£é“¾æ¨¡å¼ï¼ˆChain of Responsibilityï¼‰
å‘½ä»¤æ¨¡å¼ï¼ˆCommandï¼‰
è®¿é—®è€…æ¨¡å¼ï¼ˆVisitorï¼‰
è°ƒåœè€…æ¨¡å¼ï¼ˆMediatorï¼‰
å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMementoï¼‰
è¿­ä»£å™¨æ¨¡å¼ï¼ˆIteratorï¼‰
è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreterï¼‰

ç±»ä¹‹é—´å…³ç³»åœ¨é¢å‘å¯¹è±¡è®¾è®¡æ¨¡å¼ä¸­ï¼Œç±»ä¸ç±»ä¹‹é—´ä¸»è¦æœ‰6ç§å…³ç³»ï¼Œåˆ†åˆ«æ˜¯ï¼šä¾èµ–ã€å…³è”ã€èšåˆã€ç»„åˆã€ç»§æ‰¿ã€å®ç°ï¼Œè€¦åˆåº¦ä¾æ¬¡å¢å¼ºã€‚

ä¾èµ–ï¼Œä¸€ä¸ªç±»çš„æ–¹æ³•é‡Œä½¿ç”¨äº†å¦ä¸€ä¸ªç±»ã€‚
å…³è”ï¼Œä¸€ä¸ªç±»é‡ŒåŒ…å«å¦ä¸€ä¸ªç±»ä½œä¸ºå±æ€§ï¼ˆæˆå‘˜å˜é‡ï¼‰ã€‚
èšåˆï¼Œå¼ºçš„å…³è”ï¼Œæ•´ä½“ä¸ä¸ªä½“ã€‚
ç»„åˆï¼Œæ›´å¼ºçš„å…³è”ï¼ŒåŒç”Ÿå…±æ­»ã€‚
ç»§æ‰¿
å®ç°

starumlé€†å‘é—®é¢˜ä½¿ç”¨starumlé€†å‘ç”Ÿæˆç±»å›¾çš„æ—¶å€™ï¼Œæç¤ºé”™è¯¯ï¼šâ€œDescription: Unrecoverable Parse Errorâ€ã€‚
åŸå› 1ï¼šjavaæ–‡ä»¶ç¼–ç ä¸ºåŒ…å«BOMçš„UTF-8ï¼Œè€ŒBOMåœ¨starumlä¸­æ— æ³•å¤„ç†ã€‚è§£å†³åŠæ³•ï¼šä½¿ç”¨æ ¼å¼è½¬æ¢å·¥å…·ï¼Œè½¬æ¢ä¸ºä¸åŒ…å«BOMçš„UTF-8ã€‚æˆ–è€…ï¼Œè½¬æ¢ä¸ºGB2312ã€‚
åŸå› 2ï¼šjavaæ–‡ä»¶ä¸­åŒ…å«@Overrideç­‰æ ‡ç­¾ï¼Œstarumlæ— æ³•è¯†åˆ«ã€‚è§£å†³åŠæ³•ï¼šå»æ‰æ ‡ç­¾ã€‚æˆ–è€…æ¢ç”¨å…¶ä»–é€†å‘å·¥å…·ï¼Œæ¯”å¦‚WhiteStarUMLã€BOUMLã€UMLetç­‰ã€‚
æºç åˆ†äº«https://github.com/voidking/design.git
å‚è€ƒæ–‡çŒ®ã€Šæ˜“å­¦è®¾è®¡æ¨¡å¼ã€‹ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹æ¥å£è®¾è®¡å…­å¤§åŸåˆ™è½¯ä»¶è®¾è®¡å…­å¤§è®¾è®¡åŸåˆ™è®²è§£äº†è§£è¿™23ç§è®¾è®¡æ¨¡å¼ä¾èµ–ã€å…³è”ã€èšåˆå’Œç»„åˆåŠå…¶ä¹‹é—´åŒºåˆ«çš„ç®€å•ç†è§£StarUMLä½¿ç”¨è¯´æ˜-æŒ‡å¯¼æ‰‹å†Œä½¿ç”¨StarUMLç”»ç±»å›¾UMLå»ºæ¨¡ä¹‹æ—¶åºå›¾ï¼ˆSequence Diagramï¼‰
]]></content>
      <categories>
        <category>engineering</category>
        <category>architecture</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>staruml</tag>
      </tags>
  </entry>
  <entry>
    <title>shellå‘½ä»¤ä¹‹curl</title>
    <url>/dev-shell-curl/</url>
    <content><![CDATA[curlç®€ä»‹curlå‘½ä»¤å§‹äº1998å¹´ï¼Œæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·å’Œåº“ï¼Œç”¨äºé€šè¿‡ URL ä¼ è¾“æ•°æ®ã€‚curlå‡ ä¹æ”¯æŒæ‰€æœ‰åè®®ç±»å‹çš„æ•°æ®ä¼ è¾“ï¼ŒHTTPã€HTTPSã€FTPã€SFTPã€SMBã€TELNETç­‰ç­‰ç­‰ç­‰ã€‚å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œcurlæœ€å¸¸è§çš„ç”¨é€”æ˜¯ä»£æ›¿æµè§ˆå™¨æˆ–è€…postmanç­‰æ¥å£æµ‹è¯•å·¥å…·ï¼Œç”¨æ¥è¯·æ±‚æ¥å£å¹¶è·å–æ•°æ®ã€‚
æ›´å¤šå†…å®¹å‚è€ƒcurlå®˜ç½‘ã€‚


curlå‚æ•°è¯´æ˜curlå‘½ä»¤çš„å‚æ•°å¾ˆå¤šï¼Œè¿™é‡Œæˆ‘ä»¬å¯¹ä¸€äº›å¸¸ç”¨å‚æ•°è¿›è¡Œè¯´æ˜ã€‚

Xï¼šæŒ‡å®šè¯·æ±‚ç±»å‹ï¼ŒGETã€POSTã€PATCHã€DELETEã€PUTç­‰
sï¼šä¸è¾“å‡ºé”™è¯¯å’Œè¿›åº¦
Hï¼šè®¾ç½®headerå†…å®¹
dï¼šè®¾ç½®bodyå†…å®¹
d@ï¼šè®¾ç½®bodyå†…å®¹ï¼Œä»æ–‡ä»¶è¯»å–
Fï¼šè¯·æ±‚æ—¶å¸¦æ–‡ä»¶
mï¼šè¯·æ±‚è¶…æ—¶æ—¶é—´
kï¼šå¿½ç•¥SSLè¯ä¹¦éªŒè¯
oï¼šä¿å­˜æ–‡ä»¶

curlå®è·µcurlä¸è¾“å‡ºé”™è¯¯å’Œè¿›åº¦# ä¸è¾“å‡ºé”™è¯¯å’Œè¿›åº¦curl -s &quot;https://www.voidking.com&quot;curl -sX GET &quot;https://www.voidking.com&quot;# ä¸äº§ç”Ÿä»»ä½•è¾“å‡ºcurl -s -o /dev/null &quot;https://www.voidking.com&quot;
æ›´å¤šå†…å®¹å‚è€ƒ curlçš„ç”¨æ³•æŒ‡å—ã€‚
curl postè¯·æ±‚å¸¦å‚æ•°1ã€application/x-www-form-urlencodedè¯·æ±‚ï¼š
id=1ip=10.0.0.1curl -X POST &quot;http://rap2api.taobao.org/app/mock/241888/updateip&quot; -d &quot;id=$&#123;id&#125;&amp;ip=$&#123;ip&#125;&quot; 

2ã€application/jsonè¯·æ±‚ï¼š
curl -X POST &quot;http://rap2api.taobao.org/app/mock/241888/updateip&quot; -H &quot;Content-type: application/json&quot; -d &#x27;&#123;&quot;id&quot;:&quot;&#x27;$&#123;id&#125;&#x27;&quot;,&quot;ip&quot;:&quot;&#x27;$&#123;ip&#125;&#x27;&quot;&#125;&#x27; # orcurl -X POST &quot;http://rap2api.taobao.org/app/mock/241888/updateip&quot; -H &quot;Content-type: application/json&quot; -d@data.json# data.jsonæ˜¯å¤§æ–‡ä»¶curl -X POST &quot;http://rap2api.taobao.org/app/mock/241888/updateip&quot; -H &quot;Content-type: application/json&quot; -H &quot;Expect:&quot; -d@data.json

å…¶ä¸­data.jsonä¸­çš„å†…å®¹ä¸ºï¼š
&#123;  &quot;id&quot;:1,  &quot;ip&quot;:&quot;10.0.0.1&quot;&#125;

3ã€multipart/form-dataè¯·æ±‚ï¼š
curl -X POST http://rap2api.taobao.org/app/mock/241888/updateip -F &quot;id=$&#123;id&#125;&quot; -F &quot;filename=@file.tar.gz&quot;

curl è®¾ç½®è¶…æ—¶curl -m 15 -s &quot;https://www.voidking.com&quot;

curl å¿½ç•¥è¯ä¹¦éªŒè¯æ‰§è¡Œcurlå‘½ä»¤æ—¶ï¼Œå¦‚ä¸‹æŠ¥é”™ï¼š
curl: (60) SSL certificate problem, verify that the CA cert is OK. Details:error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failedMore details here: http://curl.haxx.se/docs/sslcerts.htmlcurl performs SSL certificate verification by default, using a &quot;bundle&quot; of Certificate Authority (CA) public keys (CA certs). The default bundle is named curl-ca-bundle.crt; you can specify an alternate file using the --cacert option.If this HTTPS server uses a certificate signed by a CA represented in the bundle, the certificate verification probably failed due to a problem with the certificate (it might be expired, or the name might not match the domain name in the URL).If you&#x27;d like to turn off curl&#x27;s verification of the certificate, use the -k (or --insecure) option.

è§£å†³åŠæ³•ï¼šå¦‚æŠ¥é”™æç¤ºï¼Œä½¿ç”¨ -k å‚æ•°
curl -k &quot;https://www.voidking.com&quot;

curlä¸‹è½½æ–‡ä»¶curl -o icon.png &quot;https://www.python.org/static/opengraph-icon-200x200.png&quot;


]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>rsyncå‘½ä»¤çš„å®‰è£…ä½¿ç”¨</title>
    <url>/dev-rsync-command/</url>
    <content><![CDATA[rsyncå‘½ä»¤ç®€ä»‹
rsync is an open source utility that provides fast incremental file transfer. rsync is freely available under the GNU General Public License and is currently being maintained by Wayne Davison.


rsyncæ˜¯ä¸€ä¸ªå¼€æºçš„æä¾›å¿«é€Ÿå¢é‡æ–‡ä»¶ä¼ è¾“çš„å·¥å…·ã€‚rsyncä½¿ç”¨GNUåè®®ï¼Œå½“å‰ç»´æŠ¤è€…æ˜¯Wayne Davisonã€‚

rsyncæ˜¯å¼€æºçš„å¢é‡ä¼ è¾“å·¥å…·ï¼Œé€Ÿåº¦å¾ˆå¿«ã€‚åŸºæœ¬åŸç†æ˜¯æ–‡ä»¶åˆ†å—æ£€æŸ¥md5ï¼Œç›¸åŒå°±ä¸å†ä¼ è¾“ï¼Œä¸åŒå°±å¢é‡ä¼ è¾“ã€‚rsyncå¯ä»¥ä»£æ›¿æœ¬åœ°æ‹·è´å‘½ä»¤cpï¼Œä¹Ÿå¯ä»¥ä»£æ›¿è¿œç¨‹æ‹·è´å‘½ä»¤scpã€‚
å‚è€ƒæ–‡æ¡£ï¼š

rsyncå®˜ç½‘
rsyncæ–‡æ¡£
archlinux - rsync
rsync æ–‡ä»¶åŒæ­¥
è¯¦è§£rsyncç®—æ³•â€“å¦‚ä½•å‡å°‘åŒæ­¥æ–‡ä»¶æ—¶çš„ç½‘ç»œä¼ è¾“é‡



å®‰è£…rsynccentosyum install -y rsync

rsyncå‘½ä»¤è¯´æ˜å‘½ä»¤æ ¼å¼#Local:    rsync [OPTION...] SRC... [DEST]#Access via remote shell:    #Pull:        rsync [OPTION...] [USER@]HOST:SRC... [DEST]    #Push:        rsync [OPTION...] SRC... [USER@]HOST:DEST#Access via rsync daemon:    #Pull:        rsync [OPTION...] [USER@]HOST::SRC... [DEST]        rsync [OPTION...] rsync://[USER@]HOST[:PORT]/SRC... [DEST]    #Push:        rsync [OPTION...] SRC... [USER@]HOST::DEST        rsync [OPTION...] SRC... rsync://[USER@]HOST[:PORT]/DEST)

ç‰¹åˆ«æ³¨æ„ï¼š

SRCç›®å½•åé¢åŠ /ï¼Œè¡¨ç¤ºæ‹·è´SRCä¸­çš„å†…å®¹åˆ°DESTç›®å½•ä¸­
SRCç›®å½•åé¢ä¸åŠ /ï¼Œè¡¨ç¤ºåœ¨DESTç›®å½•ä¸­æ–°å»ºä¸€ä¸ªSRCç›®å½•ï¼Œç„¶åSRCä¸­çš„å†…å®¹åˆ°DEST/SRC
DESTç›®å½•ååŠ ä¸åŠ /ä¸åšåŒºåˆ«

å¸¸ç”¨å‚æ•°
-vï¼šæ˜¾ç¤ºä¼ è¾“çš„è¿‡ç¨‹ï¼Œ-vvvvå¯ä»¥è·å–æ›´è¯¦ç»†ä¿¡æ¯
â€“partialï¼šä¿ç•™éƒ¨åˆ†ä¼ è¾“çš„æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯å®ç°æ–­ç‚¹ç»­ä¼ åŠŸèƒ½
â€“progressï¼šæ˜¾ç¤ºè¿›åº¦
-Pï¼šâ€“partial å’Œ â€“progressçš„é›†åˆ
-rï¼šâ€“recursive å¯¹å­ç›®å½•ä»¥é€’å½’æ¨¡å¼å¤„ç†
-tï¼šâ€“timesï¼Œä¿æŒmtimeå±æ€§ã€‚
-oï¼šâ€“ownerï¼Œä¿æŒownerå±æ€§
-pï¼šâ€“permsï¼šä¿æŒpermså±æ€§ï¼ˆæƒé™ï¼‰
-gï¼šâ€“groupï¼šä¿æŒgroupå±æ€§ï¼ˆæ‰€å±ç»„ï¼‰
â€“deviceï¼šæ‹·è´è®¾å¤‡æ–‡ä»¶
â€“specialsï¼šæ‹·è´ç‰¹æ®Šæ–‡ä»¶
-Dï¼šâ€“deviceå’Œâ€“specialsçš„é›†åˆ
-lï¼šâ€“links æ‹·è´è½¯é“¾æ¥ï¼Œè€Œéè½¯é“¾æ¥æŒ‡å‘çš„å¯¹è±¡
-Lï¼šæ‹·è´è½¯é“¾æ¥ï¼Œä»¥åŠè½¯é“¾æ¥æŒ‡å‘çš„å¯¹è±¡
-aï¼šâ€“archive å½’æ¡£æ¨¡å¼ï¼Œå¯¹å­ç›®å½•ä»¥é€’å½’æ¨¡å¼å¤„ç†ï¼Œå¹¶ä¸”ä¿æŒæ–‡ä»¶å±æ€§ã€‚ç­‰åŒäº-rtopgDl
-zï¼šä¼ è¾“æ—¶è¿›è¡Œå‹ç¼©æé«˜ä¼ è¾“æ•ˆç‡
â€“excludeï¼šæ’é™¤ä¸éœ€è¦ä¼ è¾“çš„æ–‡ä»¶
â€“includeï¼šæŒ‡å®šå¿…é¡»è¦ä¼ è¾“çš„æ–‡ä»¶
-bï¼šâ€“backup å¯¹ç›®æ ‡ä¸Šå·²å­˜åœ¨çš„æ–‡ä»¶åšä¸€ä¸ªå¤‡ä»½ï¼Œå¤‡ä»½çš„æ–‡ä»¶åé»˜è®¤ä½¿ç”¨~åšåç¼€
â€“backup-dirï¼šæŒ‡å®šå¤‡ä»½æ–‡ä»¶çš„ä¿å­˜è·¯å¾„
-uï¼šâ€“update ä»…åœ¨æºmtimeæ¯”ç›®æ ‡mtimeæ–°æ—¶æ‰æ‹·è´
â€“deleteï¼šä»¥SRCä¸ºä¸»ï¼Œå¯¹DESTè¿›è¡ŒåŒæ­¥ã€‚å¤šåˆ™åˆ ï¼Œå°‘åˆ™è¡¥ã€‚
â€“dry-runï¼šæ¨¡æ‹Ÿè¿è¡Œrsyncï¼Œè€Œä¸çœŸæ­£ä¼ è¾“
eï¼šæŒ‡å®šè¦ä½¿ç”¨çš„è¿œç¨‹shellç¨‹åºï¼Œé»˜è®¤æ˜¯ssh
existingï¼šåªæ›´æ–°ç›®æ ‡ç«¯å·²å­˜åœ¨çš„æ–‡ä»¶ï¼Œç›®æ ‡ç«¯ä¸å­˜åœ¨çš„æ–‡ä»¶ä¸ä¼ è¾“
ignore-existingï¼šåªæ›´æ–°ç›®æ ‡ç«¯ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œç›®æ ‡ç«¯å­˜åœ¨çš„æ–‡ä»¶ä¸ä¼ è¾“
Wï¼šâ€“whole-file å…¨é‡ä¼ è¾“ï¼Œè€Œä¸æ˜¯é»˜è®¤çš„å¢é‡ä¼ è¾“

ç‰¹åˆ«æ³¨æ„ï¼š

ä¸åŠ -tå‚æ•°ï¼Œå¦‚æœä¸¤ä¸ªæ–‡ä»¶çš„md5ç›¸åŒï¼Œmtimeä¸åŒï¼Œä¼ è¾“æ—¶ä¼šæ›´æ”¹ç›®æ ‡æ–‡ä»¶çš„mtimeä¸ºå½“å‰æ—¶é—´ï¼Œå¢é‡ä¿®æ”¹ã€‚
åŠ ä¸Š-tå‚æ•°ï¼Œå¦‚æœä¸¤ä¸ªæ–‡ä»¶çš„md5ç›¸åŒï¼Œmtimeä¸åŒï¼Œä¼ è¾“æ—¶ä¼šæ›´æ”¹ç›®æ ‡æ–‡ä»¶çš„mtimeå’Œæºæ–‡ä»¶ç›¸åŒï¼Œå¢é‡ä¿®æ”¹ã€‚

æ›´å¤šå†…å®¹å‚è€ƒ rsyncæ–‡æ¡£
ä½¿ç”¨rsyncæœ¬åœ°æ‹·è´æ–­ç‚¹ç»­ä¼ éœ€æ±‚ï¼šæœ¬åœ°æ‹·è´/opt/nginxç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œåˆ°/opt/nginx.bakï¼Œæ–­ç‚¹ç»­ä¼ 
rsync -P -avz /opt/nginx/ /opt/nginx.bak/

è¿œç¨‹æ‹·è´æ–­ç‚¹ç»­ä¼ éœ€æ±‚1ï¼šæ‹·è´æœ¬åœ°/opt/nginxç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œåˆ°è¿œç¨‹æœåŠ¡å™¨192.168.56.102:/opt/nginxç›®å½•ä¸­ï¼Œæ–­ç‚¹ç»­ä¼ 
rsync -P -avz /opt/nginx/ 192.168.56.102:/opt/nginx/rsync -P -avz -e &#x27;ssh -p 2222&#x27; /opt/nginx/ 192.168.56.102:/opt/nginx/

æ³¨æ„ï¼šè¦æå‰é…ç½®å¥½sshå…å¯†ç™»å½•ï¼Œé…ç½®æ–¹æ³•å‚è€ƒæ–‡æ¡£ã€Šshellå‘½ä»¤ä¹‹sshã€‹ã€‚
éœ€æ±‚2ï¼šæ‹·è´è¿œç¨‹æœåŠ¡å™¨192.168.56.102:/opt/nginxç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œåˆ°æœ¬åœ°/opt/nginxç›®å½•ä¸­ï¼Œæ–­ç‚¹ç»­ä¼ 
rsync -P -avz 192.168.56.102:/opt/nginx/ /opt/nginx/

æ³¨æ„ï¼šå¦‚æœæƒ³æš‚æ—¶ç»“æŸrsyncï¼Œç¨åç»§ç»­ï¼Œè¯·ä½¿ç”¨ctrl+Cï¼Œè€Œä¸æ˜¯ç›´æ¥killã€‚ç›´æ¥killè¿›ç¨‹ä¼šå¯¼è‡´æ–­ç‚¹ç»­ä¼ å¤±æ•ˆï¼ˆç¼“å­˜æ–‡ä»¶æ¥ä¸åŠå†™å…¥åˆ°ç›®æ ‡æ–‡ä»¶ï¼‰ï¼Œè¡¥æ•‘åŠæ³•æ˜¯æŠŠç¼“å­˜æ–‡ä»¶é‡å‘½åä¸ºç›®æ ‡æ–‡ä»¶ï¼Œå°±å¯ä»¥æ–­ç‚¹ç»­ä¼ äº†ã€‚
åå°è¿è¡Œrsyncåå°è¿è¡Œrsyncï¼Œæœ€å¥½ä½¿ç”¨screenè€Œä¸æ˜¯nohupã€‚å¦‚æœä½¿ç”¨nohupï¼Œé‚£ä¹ˆåœ¨ç»ˆç«¯å…³é—­åï¼Œrsyncå¯èƒ½ä¹Ÿä¼šç»ˆæ­¢ï¼ŒæŠ¥é”™ï¼š
rsync error: received SIGINT, SIGTERM, or SIGHUP (code 20) at rsync.c(638) [sender=3.1.2]rsync error: received SIGINT, SIGTERM, or SIGHUP (code 20) at io.c(504) [generator=3.1.2]
æ²¡æœ‰æ‰¾åˆ°åŸå› ï¼Œå› æ­¤å°±å…ˆé¿å…nohupå’Œrsyncé…åˆä½¿ç”¨ã€‚
ä½¿ç”¨screenåå°è¿è¡Œrsyncç¤ºä¾‹ï¼š
screen rsync -P -avz --log-file=/path/to/rsync.log /opt/nginx/ /opt/nginx.bak/# ctrl+A+Dscreen -lsscreen -r 23500.ttys005.B000000349215A

screenè¯¦ç»†è¯´æ˜å‚è€ƒæ–‡æ¡£ã€ŠLinuxåå°è¿è¡Œè„šæœ¬æˆ–ç¨‹åºã€‹
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>Shellè„šæœ¬ä¹‹å¾ªç¯è¯»å–æ–‡æœ¬</title>
    <url>/dev-shell-loop-read-file/</url>
    <content><![CDATA[éœ€æ±‚å·²çŸ¥mobile.txtä¸ºï¼š
haojin 17625160000voidking 17625160001

éœ€æ±‚ï¼šæ ¹æ® mobile.txt ä¸­çš„å†…å®¹æ‹¼æ¥æˆSQLï¼Œä¿®æ”¹ä¸åŒç”¨æˆ·çš„æ‰‹æœºå·ã€‚ä¾‹å¦‚ï¼š
update user set mobile=&quot;17625160000&quot; where name=&quot;haojin&quot;;



ç®€å•å®ç°è„šæœ¬ï¼š
#!/bin/bashgrep -v &quot;^$&quot; mobile.txt | while read linedo  name=`echo $line | awk &#x27;&#123;print $1&#125;&#x27;`  mobile=`echo $line | awk &#x27;&#123;print $2&#125;&#x27;`  echo &quot;update user set mobile=\&quot;$&#123;mobile&#125;\&quot; where name=\&quot;$&#123;name&#125;\&quot;;&quot;done

PSï¼šä¸èƒ½ä½¿ç”¨for line in cat &#39;mobile.txt&#39;ï¼Œå› ä¸ºè¿™ç§æ–¹æ³•ä¼šæŒ‰ç…§ç©ºæ ¼æˆ–æ¢è¡Œåˆ‡åˆ†æ–‡æœ¬ã€‚
æ›´å¥½çš„å®ç°ä»¥ä¸Šå¾ªç¯è¯»å–çš„æ–¹æ³•ï¼Œå¯¹äºä¸Šé¢çš„éœ€æ±‚æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä½†æ˜¯é€šç”¨æ€§ä¸å¥½ï¼Œæˆ‘ä»¬å†æ¥çœ‹å¦å¤–ä¸€ä¸ªéœ€æ±‚ã€‚
å·²çŸ¥service.txtå†…å®¹ä¸ºï¼š
127.0.0.1 80127.0.0.1 8080192.168.56.101 8080

éœ€æ±‚ï¼šæ¢æµ‹service.txtä¸­æ¯ä¸ªæœåŠ¡çš„è¿é€šæ€§ï¼Œå¹¶è®°å½•ç»“æœã€‚
æˆ‘ä»¬ç”¨åŒæ ·çš„æ€è·¯å®ç°è„šæœ¬ï¼š
#!/bin/bash#cat /dev/null &gt; detectresult.txt: &gt; detectresult.txtcat service.txt | while read linedo  ip=$(echo $line | awk &#x27;&#123;print $1&#125;&#x27;)  port=$(echo $line | awk &#x27;&#123;print $2&#125;&#x27;)  res=$(nc -w 2 -v $ip $port)  echo &quot;$res&quot; &gt;&gt; detectresult.txtdone

æ‰§è¡Œè„šæœ¬åï¼Œæˆ‘ä»¬å‘ç°ç»“æœæ–‡ä»¶ä¸­åªæœ‰ä¸€æ¡ç»“æœï¼è¿™å°±ä¸ç¬¦åˆé¢„æœŸäº†ã€‚è¿™æ˜¯å› ä¸ºwhileä½¿ç”¨é‡å®šå‘æœºåˆ¶ï¼Œwhile read lineä¸€æ¬¡æ€§å°†æ–‡ä»¶ä¿¡æ¯è¯»å…¥è¾“å…¥ç¼“å­˜ï¼Œå¹¶æŒ‰è¡Œèµ‹å€¼ç»™å˜é‡lineï¼Œç›´åˆ°è¾“å…¥ç¼“å­˜æ•°æ®ä¸ºç©ºã€‚è€Œåˆšå¥½ncã€telnetã€sshç­‰å‘½ä»¤ï¼Œä¼šè¯»å–è¾“å…¥ç¼“å­˜ä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œè¿™å°±å¯¼è‡´è¾“å…¥ç¼“å­˜è¢«æ¸…ç©ºäº†ï¼Œwhileå¾ªç¯ç»“æŸã€‚
è§£å†³åŠæ³•ï¼š
res=$(nc -w 2 -v $ip $port &lt; /dev/null)

æ­¤å¤–ï¼Œå› ä¸ºç®¡é“ç¬¦å·¦å³çš„å‘½ä»¤éƒ½æ˜¯åœ¨å­shellä¸­æ‰§è¡Œçš„ï¼Œæ‰€ä»¥å®¹æ˜“å¼•èµ·å˜é‡èµ‹å€¼ä¸ä¼šåœ¨çˆ¶shellä¸­ç”Ÿæ•ˆçš„é—®é¢˜ã€‚
å› æ­¤ï¼Œæ›´å¥½çš„è„šæœ¬åº”è¯¥æ”¹æˆï¼š
#!/bin/bashcat /dev/null &gt; detectresult.txtwhile read linedo  ip=$(echo $line | awk &#x27;&#123;print $1&#125;&#x27;)  port=$(echo $line | awk &#x27;&#123;print $2&#125;&#x27;)  res=$(nc -w 2 -v $ip $port &lt; /dev/null)  echo &quot;$res&quot; &gt;&gt; detectresult.txtdone &lt; service.txt

while read lineè¿›é˜¶ä½¿ç”¨while read lineçš„å¾ªç¯è¯»å–æ–‡æœ¬çš„æ–¹æ¡ˆï¼Œé€šç”¨æ€§å·²ç»å¾ˆä¸é”™ï¼Œå¯ä»¥åº”å¯¹å¤§å¤šæ•°åœºæ™¯ã€‚ä½†æ˜¯ï¼Œå¦‚æœå¾ªç¯è¯»å–æ—¶ï¼Œè¿˜éœ€è¦å’Œç”¨æˆ·è¿›è¡Œäº¤äº’ï¼Œé‚£ä¹ˆå°±ä¸é€‚ç”¨äº†ï¼Œä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ã€‚
å·²çŸ¥applist.txtå†…å®¹ä¸ºï¼š
app1 running hbaapp2 stop hbeapp3 running hna

éœ€æ±‚ï¼šå¯¹applist.txtä¸­çš„appè¿›è¡Œä¿®æ”¹ï¼Œä¿®æ”¹æ¯ä¸ªappå‰éƒ½éœ€è¦è¿›è¡Œç¡®è®¤ã€‚
æŒ‰ç…§whileçš„æ€è·¯ï¼Œç¼–å†™ main.sh å†…å®¹ä¸ºï¼š
#!/bin/bashwhile read line;do  app_id=$(echo $line | awk &#x27;&#123;print $1&#125;&#x27;)  idc=$(echo $app_id | awk -F&#x27;.&#x27; &#x27;&#123;print $NF&#125;&#x27;)  #echo $&#123;app_id&#125;&quot; &quot;$&#123;idc&#125;  bash modify.sh $&#123;idc&#125; $&#123;app_id&#125;done &lt; applist.txt

modify.shå†…å®¹ä¸ºï¼š
#!/bin/bashidc=$1app_id=$2echo -e &quot;idc: $&#123;idc&#125;&quot;echo -e &quot;app_id: $&#123;app_id&#125;&quot;read -p &quot;ç¡®è®¤è¿›è¡Œä¿®æ”¹ï¼Ÿ[Y/N]&quot; inputif [[ $input = &quot;y&quot; || $input = &quot;Y&quot; ]];then    echo -e &quot;continue...&quot;else    echo -e &quot;exit&quot;    exit 1fi# logic code

ä½†æ˜¯é—®é¢˜æ¥äº†ï¼Œæœ€ç»ˆæ‰§è¡Œæ•ˆæœä¸ç¬¦åˆé¢„æœŸï¼Œmodify.shä¸­çš„ç¡®è®¤äº¤äº’æ•ˆæœä¼šå¤±æ•ˆï¼è¿™æ˜¯å› ä¸ºreadä¼šè¯»å–ç¼“å­˜ä¸­çš„å†…å®¹ï¼Œè€Œä¸æ˜¯ç­‰å¾…äº¤äº’ã€‚
é‚£ä¹ˆï¼Œæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿéè¦ä½¿ç”¨while read lineçš„è¯ï¼Œç¡®å®æ²¡æœ‰å¥½çš„è§£å†³åŠæ³•ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠwhile read lineæ›¿æ¢æ‰ï¼æ–°çš„ main.sh å¦‚ä¸‹ï¼š
#!/bin/bashfilename=&quot;applist.txt&quot;lines=$(cat $&#123;filename&#125; | sed &#x27;/^$/d&#x27;)linenum=$(echo &quot;$&#123;lines&#125;&quot; | wc -l)#echo -e &quot;$&#123;lines&#125;&quot;#echo -e &quot;$&#123;linenum&#125;&quot;index=1while [[ $&#123;index&#125; -le $&#123;linenum&#125; ]];do  #echo $&#123;index&#125;  line=$(echo &quot;$&#123;lines&#125;&quot; | sed -n &quot;$&#123;index&#125;p&quot;)  app_id=$(echo $line | awk &#x27;&#123;print $1&#125;&#x27;)  idc=$(echo $app_id | awk -F&#x27;.&#x27; &#x27;&#123;print $NF&#125;&#x27;)  bash modify.sh $&#123;idc&#125; $&#123;app_id&#125;  index=$(($&#123;index&#125;+1))done

æˆ–è€…ä½¿ç”¨forå¾ªç¯ï¼š
#!/bin/bashfilename=&quot;applist.txt&quot;lines=$(cat $&#123;filename&#125; | sed &#x27;/^$/d&#x27;)linenum=$(echo &quot;$&#123;lines&#125;&quot; | wc -l)#echo -e &quot;$&#123;lines&#125;&quot;#echo -e &quot;$&#123;linenum&#125;&quot;for index in `seq 1 $&#123;lines&#125;`;do  #echo $&#123;index&#125;  line=$(echo &quot;$&#123;lines&#125;&quot; | sed -n &quot;$&#123;index&#125;p&quot;)  app_id=$(echo $line | awk &#x27;&#123;print $1&#125;&#x27;)  idc=$(echo $app_id | awk -F&#x27;.&#x27; &#x27;&#123;print $NF&#125;&#x27;)  bash modify.sh $&#123;idc&#125; $&#123;app_id&#125;done


]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>Shellè„šæœ¬ä¹‹é‡è¯•</title>
    <url>/dev-shell-retry/</url>
    <content><![CDATA[ä¸ºä»€ä¹ˆéœ€è¦é‡è¯•ï¼Ÿå…¸å‹åœºæ™¯ï¼šç¨‹åºçš„å®ç°éœ€è¦è°ƒç”¨ç¬¬ä¸‰æ–¹çš„APIï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸èƒ½ä¿è¯ç¬¬ä¸‰æ–¹APIä¸€ç›´å¥½ç”¨ï¼Œä¹Ÿä¸èƒ½ä¿è¯ç½‘ç»œä¸€ç›´ç•…é€šï¼Œæ‰€ä»¥åœ¨è°ƒç”¨ç¬¬ä¸‰æ–¹APIæ—¶éœ€è¦åŠ ä¸Šé”™è¯¯é‡è¯•ã€‚
é€šç”¨åœºæ™¯ï¼šç¨‹åºçš„è¿è¡Œä¸ç¬¦åˆé¢„æœŸï¼Œæˆ‘ä»¬çŸ¥é“å†æ¬¡è°ƒç”¨å¤§æ¦‚ç‡å¯ä»¥ä½¿ä¹‹ç¬¦åˆé¢„æœŸï¼Œè¿™æ—¶å°±éœ€è¦é‡è¯•ã€‚
æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ ä¸€ä¸‹Shellè„šæœ¬ä¸­çš„å¤±è´¥é‡è¯•ã€‚


ä»£ç ç¤ºä¾‹æœ¬èŠ‚æ¥è‡ªChatGPTã€‚
#!/bin/bash# æœ€å¤§é‡è¯•æ¬¡æ•°MAX_RETRY=5# å½“å‰é‡è¯•æ¬¡æ•°retry_count=0# å¾ªç¯æ‰§è¡Œå‘½ä»¤ï¼Œå¦‚æœå¤±è´¥åˆ™é‡è¯•while true; do    # æ‰§è¡Œå‘½ä»¤ï¼Œå¯ä»¥å°†å…·ä½“çš„å‘½ä»¤æ›¿æ¢ä¸ºä½ éœ€è¦æ‰§è¡Œçš„å‘½ä»¤    command_result=$(some_command)    # æ£€æŸ¥å‘½ä»¤çš„è¿”å›å€¼ï¼Œå¦‚æœæˆåŠŸåˆ™é€€å‡ºå¾ªç¯    if [ $? -eq 0 ]; then        echo &quot;Command succeeded!&quot;        break    fi    # å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œæ£€æŸ¥æ˜¯å¦å·²è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°    if [ $retry_count -ge $MAX_RETRY ]; then        echo &quot;Command failed after $MAX_RETRY attempts.&quot;        exit 1    fi    # å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œå¢åŠ é‡è¯•æ¬¡æ•°ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´åå†æ¬¡æ‰§è¡Œå‘½ä»¤    echo &quot;Command failed, retrying in 10 seconds...&quot;    retry_count=$((retry_count+1))    sleep 10done

åœ¨ä¸Šé¢çš„è„šæœ¬ä¸­ï¼ŒMAX_RETRYå®šä¹‰äº†æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œretry_countç”¨äºè®°å½•å½“å‰é‡è¯•æ¬¡æ•°ï¼Œwhileå¾ªç¯ç”¨äºä¸æ–­æ‰§è¡Œå‘½ä»¤ï¼Œifè¯­å¥ç”¨äºæ£€æŸ¥å‘½ä»¤çš„è¿”å›å€¼ï¼Œå¦‚æœæˆåŠŸåˆ™é€€å‡ºå¾ªç¯ï¼Œå¦åˆ™å¢åŠ é‡è¯•æ¬¡æ•°ï¼Œå¹¶ç­‰å¾…ä¸€æ®µæ—¶é—´åå†æ¬¡æ‰§è¡Œå‘½ä»¤ï¼Œç›´åˆ°å‘½ä»¤æˆåŠŸæˆ–è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚å¦‚æœå‘½ä»¤åœ¨æœ€å¤§é‡è¯•æ¬¡æ•°å†…æ‰§è¡Œå¤±è´¥ï¼Œåˆ™è„šæœ¬é€€å‡ºå¹¶è¿”å›é”™è¯¯ç 1ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>chatgpt</tag>
      </tags>
  </entry>
  <entry>
    <title>Shellè„šæœ¬ä¹‹å®‰å…¨åˆ é™¤</title>
    <url>/dev-shell-saferm/</url>
    <content><![CDATA[å‰è¨€å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¼šè¯¯åˆ æ–‡ä»¶ï¼Œé‚£ä¹ˆä¸€ä¸ªå›æ”¶ç«™å°±å¾ˆæœ‰å¿…è¦äº†ã€‚çœ‹äº†ä¸€äº›å›æ”¶ç«™çš„å®ç°ï¼Œéƒ½æ¯”è¾ƒå¤æ‚ï¼Œå¹²è„†è‡ªå·±å†™ä¸€ä¸ªã€‚
æ€è·¯ï¼šä½¿ç”¨mvæ›¿æ¢rmï¼ŒæŠŠæƒ³è¦åˆ é™¤çš„æ–‡ä»¶æš‚æ—¶ç§»åŠ¨åˆ°å›æ”¶ç«™ã€‚


å®‰å…¨åˆ é™¤è„šæœ¬1ã€ç¼–å†™å®‰å…¨åˆ é™¤è„šæœ¬ï¼Œsaferm.sh
#!/bin/bashTRASHDIR=&quot;$&#123;HOME&#125;/.saferm/trash&quot;[[ ! -d $&#123;TRASHDIR&#125; ]] &amp;&amp; mkdir -p $&#123;TRASHDIR&#125;function usage()&#123;    echo -e &quot;    Brief: move directory and files to ~/.local/trash    Usage: alias rm=/path/to/saferm.sh            rm &lt;dir&gt;            rm &lt;file&gt;            rm &lt;file1&gt; &lt;file2&gt;    &quot;&#125;function main()&#123;    local now=$(date &quot;+%Y%m%d%H%M%S&quot;)    local destdir=&quot;$&#123;TRASHDIR&#125;/$&#123;now&#125;&quot;    mkdir $&#123;destdir&#125;    local opt    while getopts &quot;h&quot; opt    do      case $opt in        h)          usage &amp;&amp; exit 0 ;;        \?)          usage &amp;&amp; exit 0 ;;      esac    done    local files=&quot;$*&quot;    local successfiles=&quot;&quot;    for file in $&#123;files&#125;;do        mv $&#123;file&#125; $&#123;destdir&#125; &amp;&amp; successfiles=$&#123;successfiles&#125;&quot; &quot;$&#123;file&#125;    done    if [[ -z &quot;$&#123;successfiles&#125;&quot; ]];then        echo -e &quot;\033[31mNothing to do! Check the source filenames please!\033[0m&quot;    else        echo -e &quot;$&#123;successfiles&#125; have been moved to \033[31m$&#123;destdir&#125;\033[0m&quot;    fi&#125;main &quot;$@&quot;

2ã€ä½¿ç”¨æ–¹æ³•ç¼–è¾‘ .bash_profile ï¼Œæ·»åŠ å†…å®¹
# safermalias rm=&quot;/path/to/saferm.sh&quot;
æ·»åŠ å†…å®¹å®Œæˆï¼Œ source .bash_profile ï¼Œrmå‘½ä»¤å°±è¢«æ›¿æ¢ä¸ºsafermè„šæœ¬äº†ã€‚
ä»¥ä¸Šï¼Œå®‰å…¨åˆ é™¤çš„åŠŸèƒ½å°±å®Œæˆäº†ï¼Œè‡ªå·±å¶å°”æ‰‹åŠ¨æ¸…ç†ä¸‹ TRASHDIR ä¸­çš„æ–‡ä»¶ã€‚ä»¥ä¸‹å†…å®¹å¯é€‰ï¼Œæ˜¯å¯¹è¯¥safermè„šæœ¬çš„è¡¥å……ã€‚
æ¸…ç†å›æ”¶ç«™è„šæœ¬1ã€æ¸…ç†å›æ”¶ç«™è„šæœ¬ï¼Œcleartrash.sh
#!/bin/bash# Clear files in trash that been removed 3 days ago.TRASHDIR=&quot;$&#123;HOME&#125;/.saferm/trash&quot;CLEARLOG=&quot;$&#123;TRASHDIR&#125;/clear.log&quot;[[ -d $&#123;TRASHDIR&#125; ]] \&amp;&amp; find $&#123;TRASHDIR&#125; -mindepth 1 -type d -mtime +2 \| xargs rm -rfv | tee -a $&#123;CLEARLOG&#125;

2ã€ä½¿ç”¨æ–¹æ³•ç¼–è¾‘ .bash_profile ï¼Œæ·»åŠ å†…å®¹
# safermalias rm=&quot;/path/to/saferm.sh&quot;alias cleartrash=&quot;/path/to/cleartrash.sh&quot;
æ·»åŠ å†…å®¹å®Œæˆï¼Œ source .bash_profile ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨ cleartrash å‘½ä»¤æ¸…ç†å›æ”¶ç«™äº†ã€‚
3ã€å®šæ—¶ä»»åŠ¡å‚è€ƒã€ŠLinuxè®¾ç½®å®šæ—¶ä»»åŠ¡ã€‹ï¼Œæ·»åŠ å®šæ—¶ä»»åŠ¡ã€‚
crontab -eï¼Œæ·»åŠ å®šæ—¶ä»»åŠ¡ï¼Œæ¯å¤©æ™šä¸Šæ‰§è¡Œä¸€æ¬¡ï¼š
5 0 * * * /bin/bash /path/to/cleartrash.sh

è¿›é˜¶saferm.sh è„šæœ¬å­˜åœ¨ä¸€ä¸ªä¸¥é‡bugï¼šæ— æ³•åˆ é™¤æ–‡ä»¶åå¸¦ç©ºæ ¼çš„æ–‡ä»¶ï¼Œç”šè‡³ä¼šè¯¯åˆ æ–‡ä»¶ã€‚å› ä¸ºShellé»˜è®¤ä»¥ç©ºæ ¼ã€Tabã€å›è½¦ä½œä¸ºå€¼ä¸å€¼ä¹‹é—´çš„åˆ†éš”ç¬¦ï¼Œè€Œä¸æ˜¯åšä¸ºæ–‡ä»¶åçš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœæ–‡ä»¶åä¸­å¸¦ç©ºæ ¼ï¼Œå°±ä¼šè¢«è®¤ä¸ºæ˜¯å¤šä¸ªæ–‡ä»¶ã€‚
ä¿®æ”¹ saferm.sh å¦‚ä¸‹ï¼š
#!/bin/bashTRASHDIR=&quot;$&#123;HOME&#125;/.saferm/trash&quot;[[ ! -d $&#123;TRASHDIR&#125; ]] &amp;&amp; mkdir -p $&#123;TRASHDIR&#125;function usage()&#123;    echo -e &quot;    Brief: Move directories or files to ~/.local/trash           You can move 1-3 files with wildcard. More is unsupported.            If file name contains space, use quotation mark please.    Usage: alias rm=/path/to/saferm.sh            rm &lt;dir&gt;            rm &lt;file&gt;            rm *.&lt;filetype&gt;            rm &lt;file1&gt; &lt;file2&gt; &lt;file3&gt;    &quot;&#125;function main()&#123;    local now=$(date &quot;+%Y%m%d%H%M%S&quot;)    local destdir=&quot;$&#123;TRASHDIR&#125;/$&#123;now&#125;&quot;    mkdir $&#123;destdir&#125;    local opt    while getopts &quot;h&quot; opt    do      case $opt in        h)          usage &amp;&amp; exit 0 ;;        \?)          usage &amp;&amp; exit 0 ;;      esac    done    local file1=&quot;$1&quot;    local file2=&quot;$2&quot;    local file3=&quot;$3&quot;    local file4=&quot;$4&quot;    local successfiles=&quot;&quot;    [[ -n &quot;$&#123;file1&#125;&quot; ]] &amp;&amp; mv &quot;$&#123;file1&#125;&quot; $&#123;destdir&#125; &amp;&amp; successfiles=$&#123;successfiles&#125;&quot; &quot;$&#123;file1&#125;    [[ -n &quot;$&#123;file2&#125;&quot; ]] &amp;&amp; mv &quot;$&#123;file2&#125;&quot; $&#123;destdir&#125; &amp;&amp; successfiles=$&#123;successfiles&#125;&quot; &quot;$&#123;file2&#125;    [[ -n &quot;$&#123;file3&#125;&quot; ]] &amp;&amp; mv &quot;$&#123;file3&#125;&quot; $&#123;destdir&#125; &amp;&amp; successfiles=$&#123;successfiles&#125;&quot; &quot;$&#123;file3&#125;    [[ -n &quot;$&#123;file4&#125;&quot; ]] &amp;&amp; echo -e &quot;\033[31mYou can move 1-3 files with wildcard. More is unsupported.\033[0m&quot;    if [[ -z &quot;$&#123;successfiles&#125;&quot; ]];then        echo -e &quot;\033[31mNothing to do! Check the source filenames please!\033[0m&quot;    else        echo -e &quot;$&#123;successfiles&#125; have been moved to \033[31m$&#123;destdir&#125;\033[0m&quot;    fi&#125;main &quot;$@&quot;

åˆ«äººå®¶çš„saferm1ã€ä¸‹è½½å®‰è£…saferm.sh
git clone https://github.com/lagerspetz/linux-stuffsudo mv linux-stuff/scripts/saferm.sh /binrm -Rf linux-stuff

2ã€ç¼–è¾‘.bashrcæ–‡ä»¶ï¼Œæœ«å°¾æ·»åŠ 
alias rm=saferm.shalias sudo=&#x27;sudo &#x27;

3ã€ä½¿ç¯å¢ƒç”Ÿæ•ˆ
source .bashrc
ä¹‹åï¼Œå†ä½¿ç”¨rmæˆ–è€…sudo rmå‘½ä»¤ï¼Œå®é™…ä¸Šæ‰§è¡Œçš„æ˜¯mvæ“ä½œï¼Œç§»åŠ¨æ–‡ä»¶åˆ°Trashç›®å½•ã€‚
å‚è€ƒæ–‡æ¡£ï¼šMake â€œrmâ€ Command To Move The Files To â€œTrash Canâ€
]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>Shellè„šæœ¬ä¹‹è°ƒç”¨å­è„šæœ¬</title>
    <url>/dev-shell-sub-shell/</url>
    <content><![CDATA[å‰è¨€è„šæœ¬è°ƒç”¨è„šæœ¬çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼Œç¬¬ä¸€ç§æ˜¯bashè°ƒç”¨ï¼Œåœ¨å­shellé‡Œæ‰§è¡Œå­è„šæœ¬ï¼›ç¬¬äºŒç§æ˜¯å¼•ç”¨è°ƒç”¨ï¼Œåœ¨å½“å‰è„šæœ¬é‡Œæ‰§è¡Œå­è„šæœ¬ã€‚
ã€ŠShellè„šæœ¬ä¹‹æ¨¡å—åŒ–ã€‹ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ äº†å¼•ç”¨è°ƒç”¨ã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹bashè°ƒç”¨ã€‚


è°ƒç”¨é¡ºåºæ§åˆ¶æœ¬èŠ‚å†…å®¹ä¸»è¦æ¥è‡ªChatGPTã€‚
åœ¨ä¸€ä¸ª bash è„šæœ¬ä¸­è°ƒç”¨å¤šä¸ªå­ bash è„šæœ¬æ—¶ï¼Œæœ‰ä¸¤ç§å¸¸ç”¨çš„æ–¹å¼æ¥ç¡®ä¿å­è¿›ç¨‹æ‰§è¡Œçš„é¡ºåºå’ŒçŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯waitå’Œ&amp;&amp;ã€‚
waitç¬¬ä¸€ç§æ˜¯ä½¿ç”¨ wait å‘½ä»¤æ¥ç­‰å¾…æ‰€æœ‰å­è¿›ç¨‹æ‰§è¡Œå®Œæ¯•ã€‚è¿™ç§æ–¹æ³•ä¼šé˜»å¡å½“å‰è¿›ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰å­è¿›ç¨‹éƒ½æ‰§è¡Œå®Œæ¯•ï¼Œç„¶åæ‰ä¼šç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ã€‚è¿™ç§æ–¹æ³•å¯ä»¥ç¡®ä¿æ‰€æœ‰å­è¿›ç¨‹éƒ½å·²ç»å®Œæˆï¼Œä½†æ˜¯ä¼šé˜»å¡å½“å‰è¿›ç¨‹ï¼Œä¸èƒ½åŒæ—¶æ‰§è¡Œå…¶ä»–ä»£ç ã€‚
ä¾‹å¦‚ï¼š
#!/bin/bash./sub_script1.sh &amp;./sub_script2.sh &amp;./sub_script3.sh &amp;waitecho &quot;All sub scripts completed.&quot;

waitè¯´æ˜ï¼š

wait åœ¨æ²¡æœ‰ä»»ä½•å‚æ•°çš„æƒ…å†µä¸‹ï¼Œwaitå‘½ä»¤ä¼šç­‰å¾…æ‰€æœ‰åå°è¿›ç¨‹å®Œæˆï¼Œç„¶åå†ç»§ç»­æ‰§è¡Œè„šæœ¬ã€‚
wait $PID åœ¨ç»§ç»­è„šæœ¬ä¹‹å‰ç­‰å¾…ç‰¹å®šè¿›ç¨‹ç»“æŸã€‚
&amp; å‘½ä»¤åçš„&amp;ç¬¦å·è¡¨ç¤ºåå°ä»»åŠ¡ã€‚
$! è·å–æœ€åä¸€ä¸ªåå°è¿›ç¨‹çš„PIDã€‚
$? æ‰“å°ä¸Šä¸€ä¸ªè¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ã€‚

å†æ¥ä¸€ä¸ªç¤ºä¾‹ï¼Œæ¥è‡ªæ–‡æ¡£ï¼šBash æ•™ç¨‹ - å¼‚æ­¥ä»»åŠ¡
async-parent.sh
#!/bin/bash# async-parent : Asynchronous execution demo (parent)echo &quot;Parent: starting...&quot;echo &quot;Parent: launching child script...&quot;async-child.sh &amp;pid=$!echo &quot;Parent: child (PID= $pid) launched.&quot;echo &quot;Parent: continuing...&quot;sleep 2echo &quot;Parent: pausing to wait for child to finish...&quot;wait $pidecho &quot;Parent: child is finished. Continuing...&quot;echo &quot;Parent: parent is done. Exiting.&quot;

async-child.sh
#!/bin/bash# async-child : Asynchronous execution demo (child)echo &quot;Child: child is running...&quot;sleep 5echo &quot;Child: child is done. Exiting.&quot;

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°è¯¥å­è„šæœ¬æ˜¯éå¸¸ç®€å•çš„ã€‚çœŸæ­£çš„æ“ä½œé€šè¿‡çˆ¶è„šæœ¬å®Œæˆã€‚åœ¨çˆ¶è„šæœ¬ä¸­ï¼Œå­è„šæœ¬è¢«å¯åŠ¨ï¼Œ å¹¶è¢«æ”¾ç½®åˆ°åå°è¿è¡Œã€‚å­è„šæœ¬çš„è¿›ç¨‹ ID è®°å½•åœ¨ pid å˜é‡ä¸­ï¼Œè¿™ä¸ªå˜é‡çš„å€¼æ˜¯ $! shell å‚æ•°çš„å€¼ï¼Œå®ƒæ€»æ˜¯ åŒ…å«æ”¾åˆ°åå°æ‰§è¡Œçš„æœ€åä¸€ä¸ªä»»åŠ¡çš„è¿›ç¨‹ ID å·ã€‚
çˆ¶è„šæœ¬ç»§ç»­ï¼Œç„¶åæ‰§è¡Œä¸€ä¸ªä»¥å­è¿›ç¨‹ PID ä¸ºå‚æ•°çš„ wait å‘½ä»¤ã€‚è¿™å°±å¯¼è‡´çˆ¶è„šæœ¬æš‚åœè¿è¡Œï¼Œç›´åˆ°å­è„šæœ¬é€€å‡ºï¼Œæ„å‘³ç€çˆ¶è„šæœ¬ç»“æŸã€‚
&amp;&amp;ç¬¬äºŒç§æ˜¯ä½¿ç”¨ &amp;&amp; è¿æ¥å¤šä¸ªå­è¿›ç¨‹ã€‚è¿™ç§æ–¹æ³•ä¼šç­‰å¾…ä¸Šä¸€ä¸ªå­è¿›ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œæ‰ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªå­è¿›ç¨‹ã€‚å¦‚æœæœ‰ä¸€ä¸ªå­è¿›ç¨‹æ‰§è¡Œå¤±è´¥ï¼Œåé¢çš„å­è¿›ç¨‹å°†ä¸ä¼šè¢«æ‰§è¡Œã€‚è¿™ç§æ–¹æ³•å¯ä»¥ç¡®ä¿æ‰€æœ‰å­è¿›ç¨‹éƒ½è¢«æ‰§è¡Œï¼Œä½†æ˜¯å¦‚æœæœ‰ä¸€ä¸ªå­è¿›ç¨‹æ‰§è¡Œå¤±è´¥ï¼Œæ•´ä¸ªè„šæœ¬å°±ä¼šåœæ­¢æ‰§è¡Œã€‚
ä¾‹å¦‚ï¼š
#!/bin/bash./sub_script1.sh &amp;&amp; ./sub_script2.sh &amp;&amp; ./sub_script3.shecho &quot;All sub scripts completed.&quot;







]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>chatgpt</tag>
      </tags>
  </entry>
  <entry>
    <title>Shellè„šæœ¬ä¹‹æ¨¡å—åŒ–</title>
    <url>/dev-shell-modules/</url>
    <content><![CDATA[è„šæœ¬æ¨¡å—åŒ–è„šæœ¬è°ƒç”¨è„šæœ¬çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼Œç¬¬ä¸€ç§æ˜¯bashè°ƒç”¨ï¼Œåœ¨å­shellé‡Œæ‰§è¡Œå­è„šæœ¬ï¼›ç¬¬äºŒç§æ˜¯å¼•ç”¨è°ƒç”¨ï¼Œåœ¨å½“å‰è„šæœ¬é‡Œæ‰§è¡Œå­è„šæœ¬ã€‚
è„šæœ¬çš„æ¨¡å—åŒ–ï¼Œä¸¤ç§è°ƒç”¨æ–¹æ³•éƒ½èƒ½å®ç°ï¼Œè¿™é‡Œæ¨èç¬¬äºŒç§æ–¹æ³•ï¼šå¼•ç”¨è°ƒç”¨ã€‚
å¼•ç”¨è°ƒç”¨æ—¶ï¼Œçˆ¶è„šæœ¬å’Œå­è„šæœ¬é‡Œçš„å˜é‡æ˜¯å…±ç”¨çš„ã€‚


æ¨¡å—åŒ–è®¾è®¡1ã€åˆ›å»ºmodulesç›®å½•ï¼Œåç»­æ¨¡å—æ”¾å…¥è¿™ä¸ªç›®å½•é‡Œ
2ã€åˆ›å»ºæ–‡ä»¶ modules/check.sh
read -p &quot;ç¡®è®¤è¿›è¡Œæ£€æŸ¥ï¼Ÿ[Y/N]&quot; inputif [[ $input = &quot;y&quot; || $input = &quot;Y&quot; ]];then    echo -e &quot;\n------ continue... ------\n&quot;    # check something    echo -e &quot;\n------ finished ------\n&quot;else    echo -e &quot;\n------ ä¸æ£€æŸ¥ ------\n&quot;fi

3ã€åˆ›å»ºæ–‡ä»¶ modules/modify.sh
read -p &quot;ç¡®è®¤è¿›è¡Œä¿®æ”¹ï¼Ÿ[Y/N]&quot; inputif [[ $input = &quot;y&quot; || $input = &quot;Y&quot; ]];then    echo -e &quot;\n------ continue... ------\n&quot;    # modify something    echo -e &quot;\n------ finished ------\n&quot;else    echo -e &quot;\n------ ä¸ä¿®æ”¹ ------\n&quot;fi

4ã€åˆ›å»ºæ–‡ä»¶ main.sh 
#!/bin/bashfunction main()&#123;    # å‚æ•°æç¤ºå’Œæ ¡éªŒï¼Œä»£ç çœç•¥    read -p &quot;ç¡®è®¤å‚æ•°æ­£ç¡®ï¼Œç»§ç»­æ‰§è¡Œè„šæœ¬ï¼Ÿ[Y/N]&quot; input    if [[ $input = &quot;y&quot; || $input = &quot;Y&quot; ]];then        echo -e &quot;\n------ continue... ------\n&quot;    else        echo -e &quot;\n------ exit ------\n&quot;        exit 1    fi    # è°ƒç”¨å„ä¸ªæ¨¡å—    source modules/check.sh    source modules/modify.sh&#125;main &quot;$@&quot;

å…¶ä¸­ï¼Œå‚æ•°æç¤ºå’Œæ ¡éªŒéƒ¨åˆ†ä»£ç å‚è€ƒ ã€ŠShellè„šæœ¬ä¹‹å‚æ•°æç¤ºå’Œæ ¡éªŒã€‹
äº¤äº’éƒ¨åˆ†æ¨¡å—åŒ–äº¤äº’éƒ¨åˆ†æ¨¡å—åŒ–ï¼Œå¯ä»¥é€‰æ‹©æ˜¯å¦å¼€å¯äº¤äº’ã€‚
1ã€æ”¹å†™main.shï¼ŒæŠ½è±¡å‡ºå‡½æ•°
#!/bin/bashINTERACTIVE=trueCHECK_ENABLE=trueMODIFY_ENABLE=truefunction run() &#123;    func=$1    info=$2    if [[ $&#123;INTERACTIVE&#125; = false ]];then        $&#123;func&#125;        return 0    fi    read -p &quot;$&#123;info&#125; [Y/N]&quot; input    if [[ $input = &quot;y&quot; || $input = &quot;Y&quot; ]];then        $&#123;func&#125;    else        echo &quot;æ”¾å¼ƒæ“ä½œ&quot;        return 1    fi    return 0&#125;function nothing()&#123;    :&#125;function main()&#123;    # å‚æ•°æç¤ºå’Œæ ¡éªŒï¼Œä»£ç çœç•¥    run nothing &quot;ç¡®è®¤å‚æ•°æ­£ç¡®ï¼Œç»§ç»­æ‰§è¡Œï¼Ÿ&quot;    [[ $? -ne 0 ]] &amp;&amp; exit 1        # è°ƒç”¨å„ä¸ªæ¨¡å—    [[ $&#123;CHECK_ENABLE&#125; = true ]] &amp;&amp; source modules/check.sh    [[ $&#123;MODIFY_ENABLE&#125; = true ]] &amp;&amp; source modules/modify.sh&#125;main &quot;$@&quot;

2ã€æ”¹å†™ modules/check.sh
echo -e &quot;appname=$&#123;appname&#125;&quot;function check()&#123;    # check something&#125;run check &quot;ç¡®è®¤è¿›è¡Œæ£€æŸ¥ï¼Ÿ&quot;

2ã€æ”¹å†™ modules/modify.sh
echo -e &quot;appname=$&#123;appname&#125;&quot;function modify()&#123;    # modify something&#125;run modify &quot;ç¡®è®¤è¿›è¡Œä¿®æ”¹ï¼Ÿ&quot;

]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>Shellè„šæœ¬ä¹‹å‚æ•°æç¤ºå’Œæ ¡éªŒ</title>
    <url>/dev-shell-args-prompt-and-check/</url>
    <content><![CDATA[éœ€æ±‚ï¼šæœ‰ä¸€ä¸ªè„šæœ¬ï¼Œéœ€è¦appnameã€ipã€hostnameã€domainå››ä¸ªå‚æ•°ï¼Œå¹¶ä¸”éƒ½ä¸èƒ½ä¸ºç©ºã€‚
main.sh è„šæœ¬å†…å®¹ä¸ºï¼š
#!/bin/bashfunction usage()&#123;    echo -e &quot;-a -i -H -d are requierd    -a: appName    -i: ip    -h: hostname    -d: domain    &quot;&#125;checkOpts () &#123;    local key=$1    local value=$2    [[ -z &quot;$&#123;value&#125;&quot; ]] \    &amp;&amp; echo -e &quot;\033[31mFATAL: $&#123;key&#125; should not be empty! \033[0m&quot; \    &amp;&amp; usage \    &amp;&amp; return 1    return 0&#125;function main()&#123;    while getopts &quot;a:i:H:d:&quot; opt;do        case $opt in            a) appname=$&#123;OPTARG&#125; &amp;&amp; echo &quot;appname=$&#123;appname&#125;&quot; ;;            i) ip=$&#123;OPTARG&#125; &amp;&amp; echo &quot;ip=$&#123;ip&#125;&quot; ;;            H) hostname=$&#123;OPTARG&#125; &amp;&amp; echo &quot;hostname=$&#123;hostname&#125;&quot; ;;            d) domain=$&#123;OPTARG&#125; &amp;&amp; echo &quot;domain=$&#123;domain&#125;&quot; ;;            *) usage &amp;&amp; exit 0 ;;        esac    done    read -p &quot;ç¡®è®¤å‚æ•°æ— è¯¯ï¼Œç»§ç»­æ‰§è¡Œè„šæœ¬ï¼Ÿ[Y/N]&quot; input    if [[ $input = &quot;y&quot; || $input = &quot;Y&quot; ]];then        echo -e &quot;\n------ continue... ------\n&quot;    else        echo -e &quot;\n------ exit ------\n&quot;        exit 1    fi    ! checkOpts &quot;appname&quot; $&#123;appname&#125; &amp;&amp; exit 1    ! checkOpts &quot;ip&quot; $&#123;ip&#125; &amp;&amp; exit 1    ! checkOpts &quot;hostname&quot; $&#123;hostname&#125; &amp;&amp; exit 1    ! checkOpts &quot;domain&quot; $&#123;domain&#125; &amp;&amp; exit 1        # logic code&#125;main &quot;$@&quot;

é—®é¢˜æ¥äº†ï¼Œå¦‚æœæƒ³è¦æ·»åŠ å‚æ•°æ€ä¹ˆåŠï¼Ÿæœ€ç®€å•çš„æ€è·¯å°±æ˜¯ä¿®æ”¹getoptséƒ¨åˆ†ï¼Œæ·»åŠ æ–°çš„å‚æ•°ã€‚è¿™é‡Œæä¾›å¦å¤–ä¸€ä¸ªæ€è·¯ï¼šæå‰ç•™å‡ºä¸€ä¸ªotherå˜é‡ï¼Œç”¨æ¥æ¥æ”¶å¤šå‡ºçš„å‚æ•°ï¼Œè¿™ä¸ªotherå˜é‡å¯ä»¥æ‹†åˆ†æˆå¤šä¸ªå­å˜é‡ï¼Œè¿™æ ·å°±å…·å¤‡äº†æ›´å¥½çš„é€šç”¨æ€§ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>iftopå‘½ä»¤</title>
    <url>/dev-iftop/</url>
    <content><![CDATA[å“ªä¸ªç¨‹åºå ç”¨äº†å¸¦å®½ï¼ŸæŸ¥çœ‹ä¸€å°ä¸»æœºçš„ç›‘æ§ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¼šå‘ç°ç½‘ç»œå¸¦å®½è¢«æ‰“æ»¡äº†ï¼Œè¿™æ—¶å€™æ€æ ·å®šä½å‡ºæ˜¯å“ªä¸ªç¨‹åºå¤§é‡å ç”¨äº†å¸¦å®½ï¼Ÿç­”ï¼šä½¿ç”¨ç½‘ç»œæ•°æ®åŒ…åˆ†æå·¥å…·ã€‚æ¯”å¦‚iftopï¼Œå¯ä»¥ç›‘æ§åˆ°è¿›å‡ºç½‘å¡çš„å¸¦å®½ç”¨é‡ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

How do I find out which process is eating up my bandwidth?
iftop: display bandwidth usage on an interface
ç½‘ç»œæµé‡ç›‘æ§å·¥å…·iftop
iftopç®€ä»‹
ä»é›¶å¼€å§‹å­¦ä¹ iftopæµé‡ç›‘æ§



å®‰è£…iftopyum install iftop
ä½¿ç”¨iftopæ˜¾ç¤ºå½“å‰ä¸»æœºçš„æµé‡å’Œç«¯å£ã€‚iftop -P
è¿™é‡Œæ¯”è¾ƒå‘çš„æ˜¯ï¼Œæœ‰çš„ç»Ÿè®¡é¡¹å¹¶ä¸ä¼šæ˜¾ç¤ºç«¯å£ã€‚åŸå› æœªçŸ¥ï¼Œè§£å†³æ–¹æ³•æœªçŸ¥ã€‚ã€‚ã€‚
è¾“å‡ºå†…å®¹è¯´æ˜iftopçš„è¾“å‡ºä»ä¸Šåˆ°ä¸‹å¯ä»¥åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šæµé‡åˆ»åº¦ï¼Œè¯¦ç»†ä¿¡æ¯å’Œç»Ÿè®¡ä¿¡æ¯ã€‚
æµé‡åˆ»åº¦æ˜¯iftopè¾“å‡ºä¸­æœ€ä¸Šé¢çš„ä¸€è¡Œã€‚æ­¤è¡Œä¿¡æ¯æ˜¯æµé‡åˆ»åº¦ï¼Œç”¨äºæ˜¾ç¤ºç½‘å¡å¸¦å®½æµé‡ã€‚
è¯¦ç»†ä¿¡æ¯æ˜¯iftopè¾“å‡ºä¸­æœ€å¤§çš„ä¸€ä¸ªéƒ¨åˆ†ï¼Œæ­¤éƒ¨åˆ†åˆåˆ†ä¸ºå·¦ã€ä¸­ã€å³ä¸‰åˆ—ã€‚

å·¦è¾¹æ˜¾ç¤ºæœ¬æœºçš„ä¸»æœºå/IPå’Œç«¯å£
ä¸­é—´æ˜¾ç¤ºæ­£åœ¨å’Œæœ¬æœºé€šä¿¡çš„ä¸»æœºå/IPå’Œç«¯å£ï¼Œ=&gt;ä»£è¡¨å‘é€æ•°æ®ï¼Œåä¹‹&lt;=æ˜¯æ¥å—æ•°æ®ã€‚
å³è¾¹è¡¨ç¤º2så†…ï¼Œ10så†…ï¼Œ40så†…çš„ä¸€ä¸ªå¹³å‡æµé‡å€¼ï¼Œæ˜¾ç¤ºä¸åŒæ—¶é—´æ®µçš„æµé‡å€¼ã€‚

ç»Ÿè®¡ä¿¡æ¯ä½äºiftopè¾“å‡ºçš„æœ€ä¸‹é¢ã€‚TXè¡¨ç¤ºå‘é€æµé‡ï¼ŒRXè¡¨ç¤ºæ¥æ”¶æµé‡ï¼ŒTOTALè¡¨ç¤ºå‘é€å’Œæ¥æ”¶çš„å…¨éƒ¨æµé‡ã€‚

cumï¼šä»è¿è¡Œiftopåˆ°å½“å‰æ—¶åˆ»ï¼Œå‘é€å’Œæ¥æ”¶çš„æ€»æµé‡ã€‚
peakï¼šæµé‡çš„å³°å€¼ã€‚
rateï¼šåœ¨è¿‡å»2sï¼Œ10sï¼Œ40sï¼Œå¹³å‡çš„æµé‡çš„å€¼ã€‚

æ ¹æ®ç«¯å£å·æŸ¥æ‰¾è¿›ç¨‹å‚è€ƒæ–‡æ¡£ã€Šshellå‘½ä»¤ä¹‹ç³»ç»Ÿç®¡ç†ã€‹
]]></content>
      <categories>
        <category>engineering</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>iotopå‘½ä»¤</title>
    <url>/dev-iotop/</url>
    <content><![CDATA[å“ªä¸ªç¨‹åºå ç”¨äº†ç£ç›˜IOï¼ŸæŸ¥çœ‹ä¸€å°ä¸»æœºçš„ç›‘æ§ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¼šå‘ç°ç£ç›˜IOè¢«æ‰“æ»¡äº†ï¼Œè¿™æ—¶å€™æ€æ ·å®šä½å‡ºæ˜¯å“ªä¸ªç¨‹åºå¤§é‡å ç”¨äº†ç£ç›˜IOï¼Ÿç­”ï¼šä½¿ç”¨ç£ç›˜IOåˆ†æå·¥å…·ã€‚æ¯”å¦‚iotopï¼Œå¯ä»¥ç›‘æ§åˆ°è¯»å†™ç£ç›˜çš„çº¿ç¨‹å’Œè¯»å†™é€Ÿåº¦ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

åœ¨ Linux ä¸­å¦‚ä½•ä½¿ç”¨ iotop å’Œ iostat ç›‘æ§ç£ç›˜ I/O æ´»åŠ¨ï¼Ÿ
Linuxæ€§èƒ½ç›‘æ§å‘½ä»¤ç³»åˆ—ä¹‹ iotop
Monitor Disk I/O with iotop in Linux
Iotop



å®‰è£…iotopyum install iotop
ä½¿ç”¨iotopæ˜¾ç¤ºå½“å‰ä¸»æœºçš„IOæƒ…å†µiotop
è¾“å‡ºå†…å®¹è¯´æ˜

Thread ID (TID).
I/O Priority class/level (PRIO).
the owner of the thread with TID (USER).
the disk read per second (DISK READ).
the disk write per second (DISK WRITE).
the percentage of time the thread spent while swapping in (SWAPIN).
the percentage of time the thread spent waiting on I/O (IO&gt;).
the command the thread is running (COMMAND).

æ ¹æ®çº¿ç¨‹å·æŸ¥æ‰¾è¿›ç¨‹å·²çŸ¥çº¿ç¨‹å·ï¼ˆä¾‹å¦‚34567ï¼‰ï¼Œæ€æ ·æŸ¥æ‰¾å¯¹åº”çš„è¿›ç¨‹å·ï¼Ÿ
æ–¹æ³•ä¸€ï¼šç›´æ¥æŸ¥æ‰¾çº¿ç¨‹å·ps -efL | grep 34567
æ–¹æ³•äºŒï¼šæ ¹æ®COMMANDå…³é”®å­—ï¼ˆä¾‹å¦‚nginxï¼‰æŸ¥æ‰¾è¿›ç¨‹å·ï¼Œç„¶åæŸ¥çœ‹è¿›ç¨‹åŒ…å«çš„çº¿ç¨‹å·ï¼Œæœ€åå’Œè¦æŸ¥æ‰¾çš„çº¿ç¨‹å·è¿›è¡Œå¯¹æ¯”ã€‚
ps -ef | grep nginxps -T -p 12345











]]></content>
      <categories>
        <category>engineering</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>é—®é¢˜æ’æŸ¥</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxåå°è¿è¡Œè„šæœ¬æˆ–ç¨‹åº</title>
    <url>/dev-nohup-and-screen/</url>
    <content><![CDATA[å‰è¨€ç»å¸¸é‡åˆ°çš„ä¸€ä¸ªéœ€æ±‚ï¼Œæ˜¯éœ€è¦Linuxåå°è¿è¡Œè„šæœ¬æˆ–ç¨‹åºã€‚å¯¹äºè¿™ä¸ªéœ€æ±‚ï¼Œæœ‰ä¸¤ä¸ªæœ€å¸¸ç”¨çš„å·¥å…·ï¼šnohupå’Œscreenã€‚

nohup - run a command immune to hangups, with output to a non-ttyscreen - screen manager with VT100/ANSI terminal emulation

nohupå¯åŠ¨ä¸€ä¸ªåå°è¿›ç¨‹ï¼Œè¿›ç¨‹çš„è¾“å‡ºè¾“å‡ºåˆ°éç»ˆç«¯ã€‚screenå¯ä»¥åœ¨ç»ˆç«¯ä¸­åˆ›å»ºå’Œç®¡ç†å¤šä¸ªå­ç»ˆç«¯çª—å£ï¼Œé€šè¿‡åœ¨å­ç»ˆç«¯çª—å£ä¸­è¿è¡Œç¨‹åºï¼Œå®ç°åå°è¿è¡Œçš„æ•ˆæœã€‚
è¿™ä¸¤ä¸ªå·¥å…·èƒ½å¤Ÿå®ç°çš„åŠŸèƒ½åŸºæœ¬ç›¸åŒã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°±æ¥å­¦ä¹ ä¸€ä¸‹è¿™ä¸¤ä¸ªå·¥å…·çš„ä½¿ç”¨æ–¹æ³•ã€‚
é¡ºä¾¿è¯´ä¸€ä¸‹ï¼ŒTTYæ˜¯ç”µä¼ æ‰“å­—æœºçš„ç¼©å†™ï¼Œåæ¥å‘å±•ä¸ºè™šæ‹Ÿçš„ç”µå­TTYï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç°åœ¨è¯´çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼ˆterminal emulatorï¼‰ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Linux é»‘è¯è§£é‡Šï¼šTTY æ˜¯ä»€ä¹ˆï¼Ÿ



nohupåå°æ‰§è¡Œè„šæœ¬nohup /root/test.sh &amp;nohup /root/test.sh &gt; test.log 2&gt;&amp;1 &amp;

æŸ¥çœ‹åå°è„šæœ¬jobs

è°ƒåˆ°å‰å°fg %2

å½“æ‰§è¡Œ fg å°†åå°çš„å‘½ä»¤è°ƒåˆ°å‰å°æ¥ç»§ç»­æ‰§è¡Œæ—¶ï¼Œç”±äºæ­¤æ—¶ç³»ç»Ÿæ­£å¤„äºæ‰§è¡Œè¯¥å‘½ä»¤çš„å‰å°è¿è¡ŒçŠ¶æ€ï¼Œæ­¤æ—¶ä¸èƒ½ç›´æ¥å†è°ƒå›åˆ°åå°æ‰§è¡Œã€‚éœ€è¦å…ˆæŠŠå‰å°è¿è¡Œçš„å‘½ä»¤æŒ‚èµ·ï¼Œå†ç”¨ bg å‘½ä»¤æ¢å¤æ‰§è¡Œï¼Œå‘½ä»¤æ‰ä¼šè°ƒè‡³åå°ç»§ç»­æ‰§è¡Œã€‚
æ”¾å›åå°å¹¶ç»§ç»­æ‰§è¡Œctrl+Zjobsbg %2


åœæ­¢åå°è„šæœ¬æ–¹æ³•ä¸€ï¼š
jobsfg %2ctrl+C

æ–¹æ³•äºŒï¼š
ps -ef | grep test.shkill -9 $PID

å®šæ—¶ä»»åŠ¡é€šè¿‡crontabè®¾ç½®å®šæ—¶ä»»åŠ¡æ—¶ï¼Œnohupå‘½ä»¤å¯ä»¥çœç•¥ã€‚ä¾‹å¦‚ï¼š
#0 12 * * * nohup /home/voidking/restart.sh &gt; /home/voidking/log/daily-`date +\%Y\%m\%d\%H\%M\%S`.log 2&gt;&amp;1 &amp;0 12 * * * /home/voidking/restart.sh &gt; /home/voidking/log/daily-`date +\%Y\%m\%d\%H\%M\%S`.log 2&gt;&amp;1 &amp;

screenä½¿ç”¨æ–°çš„screenè¿è¡Œè„šæœ¬screen ./main.sh

æŠŠå½“å‰screenæ”¾å…¥åå°ctrl+A+D
æŸ¥çœ‹screenscreen -ls

è¿”å›screenscreen -r 23500.ttys005.B000000349215A





]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>nohup</tag>
        <tag>screen</tag>
      </tags>
  </entry>
  <entry>
    <title>shellå‘½ä»¤ä¹‹ç¼–ç æ ¼å¼è½¬æ¢</title>
    <url>/dev-shell-encoding/</url>
    <content><![CDATA[ç¼–ç æ ¼å¼ä¿®æ”¹æ‰§è¡Œshè„šæœ¬æ—¶æŠ¥é”™ï¼š/bin/sh^M: bad interpreter: No such file or directory
1ã€æ·»åŠ æ‰§è¡Œæƒé™chmod a+x filename
2ã€ç„¶åä¿®æ”¹æ–‡ä»¶æ ¼å¼vi filename
3ã€åˆ©ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶æ ¼å¼
:set ff æˆ– :set fileformat
å¯ä»¥çœ‹åˆ° fileformat=dos æˆ– fileformat=unixã€‚
4ã€åˆ©ç”¨å¦‚ä¸‹å‘½ä»¤ä¿®æ”¹æ–‡ä»¶æ ¼å¼
:set ff=unix æˆ– :set fileformat=unix
5ã€ä¿å­˜æ–‡ä»¶:wq
6ã€æœ€åå†æ‰§è¡Œæ–‡ä»¶./filename


UTF-8 BOM è½¬ UTF-8ä½¿ç”¨macos/linuxä¸­ç¼–è¯‘è¿è¡Œwindowsä¸‹åˆ›å»ºçš„javaé¡¹ç›®ï¼ŒæŠ¥é”™ Error:(1, 1) java: éæ³•å­—ç¬¦: â€˜\ufeffâ€™ã€‚BOMï¼ˆbyte order markï¼‰æ˜¯ä¸º UTF-16 å’Œ UTF-32 å‡†å¤‡çš„ï¼Œç”¨äºæ ‡è®°å­—èŠ‚åºï¼ˆbyte orderï¼‰ã€‚å¾®è½¯åœ¨ UTF-8 ä¸­ä½¿ç”¨ BOM æ˜¯å› ä¸ºè¿™æ ·å¯ä»¥æŠŠ UTF-8 å’Œ ASCII ç­‰ç¼–ç æ˜ç¡®åŒºåˆ†å¼€ï¼Œä½†è¿™æ ·çš„æ–‡ä»¶åœ¨ Windows ä¹‹å¤–çš„æ“ä½œç³»ç»Ÿé‡Œä¼šå¸¦æ¥é—®é¢˜ã€‚é‚£ä¹ˆï¼Œæ€ä¹ˆæŠŠutf8 bomç¼–ç æ–‡ä»¶æ‰¹é‡è½¬æ¢ä¸ºutf8ç¼–ç æ–‡ä»¶å‘¢ï¼Ÿä½¿ç”¨ä¸‹é¢çš„è„šæœ¬ã€‚
# å½“å‰ç›®å½•ä¸‹é€’å½’æ‰€æœ‰æ–‡ä»¶grep -r -i -l $&#x27;^\xEF\xBB\xBF&#x27; . | xargs sed -i &#x27;s/^\xEF\xBB\xBF//g&#x27;# å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶grep -i -l $&#x27;^\xEF\xBB\xBF&#x27; * | xargs sed -i &#x27;s/^\xEF\xBB\xBF//g&#x27;# macosbrew install gnu-sedgrep -r -i -l $&#x27;^\xEF\xBB\xBF&#x27; . | xargs gsed -i &#x27;s/^\xEF\xBB\xBF//g&#x27;grep -i -l $&#x27;^\xEF\xBB\xBF&#x27; * | xargs gsed -i &#x27;s/^\xEF\xBB\xBF//g&#x27;

GBK è½¬ UTF-81ã€å•ä¸ªæ–‡ä»¶ç¼–ç è½¬æ¢æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå‘ç°ä¸­æ–‡æ˜¾ç¤ºä¹±ç ï¼Œå¤§æ¦‚ç‡ç¼–ç é—®é¢˜ã€‚ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤è¿›è¡Œè½¬ç ï¼š
iconv -f GBK -t UTF-8 inputfile &gt; outputfile

2ã€å¤šä¸ªæ–‡ä»¶æ‰¹é‡ç¼–ç è½¬æ¢
#!/bin/bashfind . -type f -name &quot;*.py&quot; &gt; filename.txtwhile read line;do     iconv -f GBK -t UTF-8 $&#123;line&#125; &gt; $&#123;line&#125;.bak    mv $&#123;line&#125;.bak $&#123;line&#125;done &lt; filename.txtrm -f filename.txt


]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>macos</tag>
        <tag>linux</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>shellå‘½ä»¤ä¹‹æ–‡ä»¶ç®¡ç†</title>
    <url>/dev-shell-file/</url>
    <content><![CDATA[cpé¡»çŸ¥unalias cp #é¿å…cpå‘½ä»¤è¢«aliascp -f #å¼ºåˆ¶è¦†ç›–cp -R #é€’å½’æ‹·è´æ‰€æœ‰æ–‡ä»¶ã€‚å¯¹ç‰¹æ®Šæ–‡ä»¶ï¼ˆç®¡é“æ–‡ä»¶ã€å—è®¾å¤‡æ–‡ä»¶ã€å­—ç¬¦è®¾å¤‡æ–‡ä»¶ï¼‰ä¼šè¿›è¡Œåˆ›å»ºè€Œä¸æ˜¯æ‹·è´ã€‚cp -r #é€’å½’æ‹·è´æ‰€æœ‰æ–‡ä»¶ã€‚æ‰€æœ‰sourceæ–‡ä»¶å½“åšæ™®é€šæ–‡ä»¶ã€‚cp -rf public/* voidking #é€’å½’æ‹·è´æ‰€æœ‰æ–‡ä»¶ï¼Œä¸åŒ…æ‹¬éšè—æ–‡ä»¶cp -rf public/. voidking #é€’å½’æ‹·è´æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶



åŒ¹é…æ’é™¤.å’Œ..å½“å‰ç›®å½•ä¸‹ï¼Œä¸€å®šå­˜åœ¨ä¸¤ä¸ªç›®å½•ï¼š.å’Œ..ã€‚æœ‰ä¸€äº›æ“ä½œæˆ‘ä»¬éœ€è¦æ’é™¤è¿™ä¸¤ä¸ªç›®å½•ï¼Œæ€æ ·åŒ¹é…æ’é™¤å®ƒä»¬å‘¢ï¼Ÿ
ls -als -a | xargsls -a | wc -lls -a | grep -vw &#x27;\.&#x27;ls -a | grep -vw &#x27;[.]&#x27;ls -a | grep -v &#x27;^.$&#x27; | grep -v &#x27;^..$&#x27;

cpæ’é™¤ç›®å½•éœ€æ±‚ï¼šæºç›®å½•ä¸ºdirAï¼Œç›®æ ‡ç›®å½•dirBï¼Œå¤åˆ¶dirAä¸‹æ‰€æœ‰ç›®å½•&amp;æ–‡ä»¶åˆ°dirBï¼Œæ’é™¤ç›®å½•logæ–¹æ³•ä¸€ï¼šä¸åŒ…å«éšè—æ–‡ä»¶
cd dirAls | grep -v log | xargscp -r `ls | grep -v log | xargs` pathto/dirB

æ–¹æ³•äºŒï¼šåŒ…å«éšè—æ–‡ä»¶
cd dirAls -a | grep -vw &#x27;\.&#x27; | grep -v log | xargscp -r `ls -a | grep -vw &#x27;\.&#x27; | grep -v log | xargs` pathto/dirB

rmæ’é™¤ç›®å½•éœ€æ±‚ï¼šæƒ³è¦åˆ é™¤dirAç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶ï¼Œé™¤äº†.gitç›®å½•
cd dirAls -a | grep -vw &#x27;\.&#x27; | grep -vw &#x27;\.git&#x27; | xargsrm -rf `ls -a | grep -vw &#x27;\.&#x27; | grep -vw &#x27;\.git&#x27; | xargs`

åˆ é™¤ç‰¹æ®Šå­—ç¬¦åç§°çš„æ–‡ä»¶ls -ifind . -inum 83661618# åˆ é™¤æ–‡ä»¶find . -inum 83661618 -delete# åˆ é™¤éç©ºç›®å½•find . -inum 83661619 -exec rm &#123;&#125; \;

å‹ç¼©ä¸è§£å‹tar.gzæ–‡ä»¶å‹ç¼©ä¸è§£å‹tar.gzæ–‡ä»¶
tar -czvf filename.tar.gz filenametar -xzvf filename.tar.gz

zipæ–‡ä»¶å‹ç¼©ä¸è§£å‹zipæ–‡ä»¶
zip filename.zip filenameunzip filename.zip

è§£å‹zipæ–‡ä»¶åˆ°æŒ‡å®šç›®å½•
unzip -d filename filename.zip

åŠ å¯†å‹ç¼©å’Œè§£å‹zipæ–‡ä»¶
zip -er filename.zip filenamezip -er -P xxxxxx filename.zip filenameunzip -P xxxxxx filename.zip

æ‰¹é‡åŠ å¯†å‹ç¼©å’Œè§£å‹zipæ–‡ä»¶
for i in `ls`;do zip -er -P xxxxxx $i.zip $i;donefor i in *.zip;do unzip -P xxxxxx $i;done

è§£å‹ä¸­æ–‡åzipæ–‡ä»¶
yum install unarunar -e GBK ä¸­æ–‡å.zipunar -e GBK -p xxxxxx ä¸­æ–‡å.zipfor i in *.zip;do unar -e GBK -p xxxxxx $i;done

taræ’é™¤ç›®å½•éœ€æ±‚ï¼šæ‰“åŒ…ç›®å½•dirAä¸‹æ‰€æœ‰ç›®å½•&amp;æ–‡ä»¶ï¼Œæ’é™¤ç›®å½•dirA/logå’ŒdirA/data
tar -czvf dirA.tar.gz dirA --exclude dirA/log --exclude dirA/data

taræ–‡ä»¶æ‹†åˆ†ä¸åˆå¹¶ä½¿ç”¨szä¼ è¾“å¤§æ–‡ä»¶ï¼Œæœ‰æ—¶å€™ä¼šè¢«ä¸­æ–­ã€‚è¿™æ—¶æˆ‘ä»¬å¯ä»¥æŠŠæ–‡ä»¶è¿›è¡Œæ‹†åˆ†ï¼Œä¸‹è½½åå†è¿›è¡Œåˆå¹¶ã€‚
tar -czf - bigfile.tar.gz | split -b 50m -d - bigfile.tar.gz.cat bigfile.tar.gz.* | tar -xzf -md5sum bigfile.tar.gz

åˆ é™¤10å¤©å‰çš„æ—¥å¿—éœ€æ±‚ï¼šæ‰¾å‡º10å¤©å‰çš„æ—¥å¿—å¹¶åˆ é™¤ã€‚è„šæœ¬ï¼š
find /usr/local/tomcat/logs/ -type f -mtime +10 -exec rm -rfv &#123;&#125; \;find /usr/local/tomcat/logs/ -type f -mtime +10 | xargs rm -rfv

æ–‡ä»¶æ‹†åˆ†éœ€æ±‚1ï¼šå¤§æ–‡ä»¶æ‹†åˆ†æˆå°æ–‡ä»¶ï¼Œæ¯50è¡Œæ‹†åˆ†æˆä¸€ä¸ªæ–‡ä»¶ã€‚è„šæœ¬1ï¼š
#!/bin/bashlinenum=&quot;50&quot;bigfile=&quot;bigfile.txt&quot;datadir=&quot;files&quot;prefix=&quot;smallfile.&quot;mkdir -p $&#123;datadir&#125;split -l $&#123;linenum&#125; $&#123;bigfile&#125; -d -a 2 $&#123;datadir&#125;/$&#123;prefix&#125;

éœ€æ±‚2ï¼šå¤§æ–‡ä»¶æ‹†åˆ†æˆå°æ–‡ä»¶ï¼Œæ–¹ä¾¿æŒ‰æ¯”ä¾‹è¿›è¡Œå˜æ›´ã€‚è„šæœ¬2ï¼š
#!/bin/bashpercent=&quot;50&quot;#percent=&quot;34&quot;bigfile=&quot;bigfile.txt&quot;datadir=&quot;file&quot;prefix=&quot;smallfile.&quot;rm -rf $&#123;datadir&#125;/$&#123;prefix&#125;*mkdir -p $&#123;datadir&#125;content=$(cat $&#123;bigfile&#125;)sum=$(echo &quot;$&#123;content&#125;&quot; | wc -l)linenum=$(($&#123;sum&#125;*$&#123;percent&#125;/100))split -l $&#123;linenum&#125; $&#123;bigfile&#125; -d -a 2 $&#123;datadir&#125;/$&#123;prefix&#125;

æ–‡ä»¶è½¯é“¾åˆ›å»ºæ–‡ä»¶è½¯é“¾
ln -s source_file link_file

ä¿®æ”¹æ–‡ä»¶è½¯é“¾
ln -sfn new_source_file link_file

æ˜¾ç¤ºæ–‡ä»¶çš„ç»å¯¹è·¯å¾„realpath filename





]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>shellå‘½ä»¤ä¹‹grep/awk/sed</title>
    <url>/dev-shell-grep-awk-sed/</url>
    <content><![CDATA[awkæ³¨æ„äº‹é¡¹awkå‘½ä»¤æ ¼å¼ï¼šawk [é€‰é¡¹å‚æ•°] &#39;script&#39; var=value file(s)
è¿™é‡Œéœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼ŒåŒ…è£¹scriptçš„æ˜¯å•å¼•å·ï¼Œå•å¼•å·ï¼Œå•å¼•å·ï¼å‚è€ƒæ–‡æ¡£Linux awk å‘½ä»¤


åˆ é™¤ç©ºè¡Œè¿‡æ»¤hostlist.txtä¸­çš„ç©ºè¡Œï¼š
cat hostlist.txt |tr -s &#x27;\n&#x27;cat hostlist.txt |sed &#x27;/^$/d&#x27;cat hostlist.txt |awk &#x27;&#123;if($0!=&quot;&quot;)print&#125;&#x27;cat hostlist.txt |awk &#x27;&#123;if(length!=0) print $0&#125;&#x27;grep -v &quot;^$&quot; hostlist.txt# ç»ˆææ–¹æ³•ï¼ˆlinuxå’Œwindowsç©ºè¡Œéƒ½é€‚ç”¨ï¼‰grep -v -e &#x27;^[[:space:]]*$&#x27; hostlist.txt

è¿‡æ»¤windowsæ¢è¡Œç¬¦åœ¨windowsé‡Œç¼–è¾‘å¥½çš„æ–‡ä»¶ï¼Œä¸Šä¼ åˆ°linuxåå‘ç°å¤šäº†^Mã€‚ä»¥è¿‡æ»¤hostlist.txtä¸­çš„^Mä¸ºä¾‹ï¼š
sed -i &#x27;s/^M//g&#x27; hostlist.txt
æ³¨æ„ï¼Œç›´æ¥å¤åˆ¶ç²˜è´´ä¸Šé¢çš„å‘½ä»¤æ˜¯æ— æ•ˆçš„ã€‚^Mçš„è¾“å…¥æ–¹å¼æ˜¯ Ctrl + V ï¼Œç„¶å Ctrl + M ã€‚
å»é™¤ç©ºæ ¼å»é™¤test.txtæ–‡æœ¬ä¸­çš„ç©ºæ ¼ï¼š
cat test.txt | tr -d &#x27; &#x27;

ç©ºæ ¼è½¬æ¢è¡ŒæŠŠtest.txtæ–‡æœ¬ä¸­çš„ç©ºæ ¼å˜æˆæ¢è¡Œç¬¦ã€‚
cat test.txt | tr &#x27; &#x27; &#x27;\n&#x27;cat test.txt | sed &#x27;s/ /\n/g&#x27;

æŸ¥æ‰¾å¹¶æ’å…¥ä¸€è¡ŒæŸ¥æ‰¾åŒ…å«- [engineering,subject0]çš„æ–‡ä»¶ï¼Œ- [engineering,subject0]ä¹‹åç´§æ¥ç€æ’å…¥ä¸€è¡Œ- [engineering,subject1]
sed -i &#x27;s/- \[engineering,subject0\]/- \[engineering,subject0\]\n- \[engineering,subject1\]/g&#x27; *sed -i &#x27;s/- \[engineering,subject0\]/- \[engineering,subject0\]\n- \[engineering,subject1\]/g&#x27; `grep -e &#x27;- \[engineering,subject0\]&#x27; -rl .`

å¤§å°å†™å­—ç¬¦è½¬æ¢# å¤§å†™è½¬å°å†™echo &quot;192.168.56.101 MASTER&quot; | tr &#x27;[A-Z]&#x27; &#x27;[a-z]&#x27;# å°å†™è½¬å¤§å†™echo &quot;192.168.56.101 master&quot; | tr &#x27;[a-z]&#x27; &#x27;[A-Z]&#x27;# æŸä¸€åˆ—å¤§å†™è½¬å°å†™echo &quot;192.168.56.101 MASTER&quot; | awk &#x27;$3=tolower($2) &#123;print $1&quot; &quot;$2&quot; &quot;$3&#125;&#x27;# æŸä¸€åˆ—å°å†™è½¬å¤§å†™echo &quot;192.168.56.101 master&quot; | awk &#x27;$3=toupper($2) &#123;print $1&quot; &quot;$2&quot; &quot;$3&#125;&#x27;

PSï¼šå¯¹äº/etc/hostsä¸­çš„ä¸»æœºåå’ŒåŸŸåï¼Œåªä¿ç•™å¤§å†™æˆ–è€…åªä¿ç•™å°å†™å°±å¯ä»¥äº†ï¼Œå› ä¸ºä¸»æœºåå’ŒåŸŸåä¸åŒºåˆ†å¤§å°å†™ã€‚
è¯»å–æŸä¸€åˆ—è¯»å–ç¬¬ä¸€åˆ—ï¼Œè¯»å–æœ€åä¸€åˆ—ã€‚
echo &quot;www.voidking.com&quot; | awk -F&#x27;.&#x27; &#x27;&#123;print $1&#125;&#x27;echo &quot;www.voidking.com&quot; | awk -F&#x27;.&#x27; &#x27;&#123;print $3&#125;&#x27;echo &quot;www.voidking.com&quot; | awk -F&#x27;.&#x27; &#x27;&#123;print $NF&#125;&#x27;

ç¬¬ä¸€åˆ—æ¢åˆ°æœ€åä¸€åˆ—å·²çŸ¥namelist.txtï¼š
haojin 70 80voidking 90 100

éœ€æ±‚ï¼šç¬¬ä¸€åˆ—nameï¼Œåœ¨æ˜¾ç¤ºæ—¶æ”¾åˆ°æœ€åä¸€åˆ—ã€‚
cat namelist.txt | awk &#x27;&#123;for(i=2;i&lt;=NF;i++)printf(&quot;%s &quot;, $i);print $1&#125;&#x27;

å¾ªç¯è¯»å–å•åˆ—æ–‡æœ¬å·²çŸ¥hostlist.txtä¸ºï¼š
www.baidu.comwww.voidking.com

éœ€æ±‚ï¼šæ‰¹é‡æŸ¥è¯¢ä¸»æœºåæˆ–è€…ä¸»æœºIP
è„šæœ¬ï¼š
for i in `cat hostlist.txt`;do host $i;done

æ–‡æœ¬æ¯”è¾ƒéœ€æ±‚ï¼šä¸¤ä¸ªå§“ååˆ—è¡¨ï¼Œéœ€è¦å¯¹æ¯”å‡ºä¸¤ä¸ªæ–‡ä»¶ä¸­ç›¸åŒçš„å§“åå’Œä¸åŒçš„å§“åã€‚
è„šæœ¬ï¼š
cat file1 &gt; file.txtcat file2 &gt;&gt; file.txtcat file.txt | sort |uniq -c | sort -n &gt; result.txt


è”åˆæŸ¥è¯¢ä½¿ç”¨shellï¼Œèƒ½å¦å®ç°ç±»ä¼¼äºSQLçš„è”åˆæŸ¥è¯¢ï¼Ÿå¿…é¡»å¯ä»¥ã€‚
å·²çŸ¥file1çš„å†…å®¹ä¸ºï¼š
1 realname2 nickname
file2çš„å†…å®¹ä¸ºï¼š
voidking nicknamehaojin realnamehankin nicknamejinhao realnamevk nickname  

éœ€æ±‚ï¼šæ ¹æ®file1å’Œfile2çš„ç¬¬äºŒåˆ—ï¼ŒæŠŠfile1å’Œfile2åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶ã€‚
2 voidking nickname1 haojin realname2 hankin nickname1 jinhao realname2 vk nickname

è¿™ä¸ªéœ€æ±‚ä½¿ç”¨awkå‘½ä»¤æ¥å®ç°ã€‚NRï¼Œè¡¨ç¤ºawkå¼€å§‹æ‰§è¡Œç¨‹åºåæ‰€è¯»å–çš„æ•°æ®è¡Œæ•°ã€‚FNRï¼Œä¸NRåŠŸç”¨ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯awkæ¯æ‰“å¼€ä¸€ä¸ªæ–°æ–‡ä»¶ï¼ŒFNRä¾¿ä»0é‡æ–°ç´¯è®¡ã€‚NR==FNRï¼šç”¨äºåœ¨è¯»å–ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„æ–‡ä»¶æ—¶ï¼Œåˆ¤æ–­æ˜¯ä¸æ˜¯åœ¨è¯»å–ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚awkå¤„ç†å¤šä¸ªæ–‡ä»¶çš„è¯­æ³•ï¼š
awk -F åˆ†éš”ç¬¦ &#x27;BEGIN &#123; åˆå§‹åŒ– &#125; &#123; å¾ªç¯æ‰§è¡Œéƒ¨åˆ† &#125; END &#123; ç»“æŸå¤„ç† &#125;&#x27; file_list1 file_list2
å…¶ä¸­BEGINå’ŒENDå¯ä»¥çœç•¥ï¼Œ-Fä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤ï¼Œå¾ªç¯æ‰§è¡Œéƒ¨åˆ†ï¼Œæ˜¯æŒ‰è¡Œå¯¹æ–‡ä»¶è¿›è¡Œå¤„ç†çš„ã€‚
è„šæœ¬ï¼š
awk -F &quot; &quot; &#x27;NR==FNR&#123;a[$2]=$0;next&#125;&#123;print a[$2]&quot; &quot;$1&#125;&#x27; file1 file2 \| awk &#x27;&#123;print $1&quot; &quot;$3&quot; &quot;$2&#125;&#x27;
ç”±NR=FNRä¸ºçœŸæ—¶ï¼Œåˆ¤æ–­å½“å‰è¯»å…¥çš„æ˜¯ç¬¬ä¸€ä¸ªæ–‡ä»¶file1ï¼Œæ‰§è¡Œç¬¬ä¸€ä¸ªèŠ±æ‹¬å·å†…çš„å†…å®¹ã€‚æŠŠfile1ä¸­æ¯è¡Œè®°å½•éƒ½å­˜å…¥æ•°ç»„aï¼Œå¹¶ä½¿ç”¨file1çš„ç¬¬2ä¸ªå­—æ®µä½œä¸ºä¸‹æ ‡ã€‚
ç”±NR=FNRä¸ºå‡æ—¶ï¼Œåˆ¤æ–­å½“å‰è¯»å…¥äº†ç¬¬äºŒä¸ªæ–‡ä»¶file2ï¼Œæ‰§è¡Œç¬¬äºŒä¸ªèŠ±æ‹¬å·å†…çš„å†…å®¹ã€‚file2ä¸­çš„æ¯è¡Œï¼Œæ ¹æ®file2çš„ç¬¬2ä¸ªå­—æ®µæ‰“å°æ•°ç»„aä¸­çš„å†…å®¹ï¼ŒåŒæ—¶æ‰“å°file2ä¸­çš„ç¬¬ä¸€åˆ—ã€‚
æ±‚äº¤é›†å·²çŸ¥file1å†…å®¹ä¸ºï¼š
haojinvoidkingvk

file2å†…å®¹ä¸ºï¼š
haoshuai 95 93 80vk 99 99 100haojin 100 100 99baidu 100 100 100voidking 99 99 99

éœ€æ±‚ï¼šfile1ç¬¬ä¸€åˆ—å’Œfile2ç¬¬ä¸€åˆ—æ±‚äº¤é›†ï¼Œæ˜¾ç¤ºfile2ä¸­äº¤é›†çš„å†…å®¹ã€‚
awk &#x27;&#123;if(NR==FNR)&#123;a[$1]=$1&#125;else if($1 in a)&#123;print $0&#125;&#125;&#x27; file1 file2# orawk &#x27;&#123;if(NR==FNR)a[$1]=$1;else if($1 in a)print $0&#125;&#x27; file1 file2

æ¯ä¸¤è¡Œåˆæˆä¸€è¡Œå·²çŸ¥ip-port.txtå†…å®¹ä¸ºï¼š
127.0.0.180127.0.0.18080192.168.56.1013306

éœ€æ±‚ï¼šæŠŠipå’Œå¯¹åº”ç«¯å£æ”¾åœ¨åŒä¸€è¡Œã€‚
127.0.0.1 80127.0.0.1 8080192.168.56.101 3306

è„šæœ¬ï¼š
sed -n &quot;N;s/\n/ /p&quot; ip-port.txtawk &#x27;NR%2&#123;printf &quot;%s &quot;,$0;next;&#125;1&#x27; ip-port.txtawk &#x27;ORS=NR%2?FS:RS&#x27; ip-port.txtawk &#x27;&#123; ORS = (NR%2 ? FS : RS) &#125; 1&#x27; ip-port.txtawk &#x27;&#123; ORS = (NR%2 ? &quot;,&quot; : RS) &#125; 1&#x27; ip-port.txt

è®¡ç®—ä¸€åˆ—çš„å’Œå·²çŸ¥fruit.txtå†…å®¹ä¸ºï¼š
apple 10orange 7banana 0watermelon 1
ç¬¬ä¸€åˆ—æ˜¯æ°´æœåç§°ï¼Œç¬¬äºŒåˆ—æ˜¯æ°´æœæ•°é‡ã€‚
éœ€æ±‚1ï¼šè®¡ç®—æ°´æœçš„æ€»æ•°ã€‚
awk &#x27;&#123;sum += $2&#125;;END &#123;print sum&#125;&#x27; fruit.txtcat fruit.txt | awk &#x27;&#123;sum += $2&#125;;END &#123;print sum&#125;&#x27;

éœ€æ±‚2ï¼šè®¡ç®—å­˜åœ¨å¤šå°‘ç§æ°´æœã€‚
cat fruit.txt | awk &#x27;&#123;if ($2&gt;0) (sum += 1); else (sum += 0)&#125;;END&#123;print sum&#125;&#x27;

æ ¹æ®æ—¶é—´ç­›é€‰æ—¥å¿—ç­›é€‰11æœˆ10æ—¥å’Œ11æœˆ11æ—¥çš„14:30åˆ°18:00çš„æ—¥å¿—
grep -E &#x27;1[0,1]/Nov/2022:14:[3,4,5][0-9]|1[0,1]/Nov/2022:1[5-7]|1[0,1]/Nov/2022:18:00&#x27; access.log# orgrep -E &#x27;10/Nov/2022&#x27; access.log | sed -n &#x27;/2022:14:30/,/2022:18:00/p&#x27; &gt; tmp.loggrep -E &#x27;11/Nov/2022&#x27; access.log | sed -n &#x27;/2022:14:30/,/2022:18:00/p&#x27; &gt;&gt; tmp.log
grepç­›é€‰å‡ºçš„æ—¥å¿—ï¼ŒåŒ…å«18:00:00-18:00:59å†…çš„æ—¥å¿—ã€‚sedç­›é€‰å‡ºçš„æ—¥å¿—ï¼ŒåªåŒ…å«ç¬¬ä¸€ä¸ªåŒ¹é…ä¸Š2022:18:00çš„æ—¥å¿—ï¼Œä¸åŒ…å«18:00:00-18:00:59å†…çš„æ—¥å¿—ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>network</category>
        <category>shell</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>shellå‘½ä»¤ä¹‹journalctl</title>
    <url>/dev-shell-journalctl/</url>
    <content><![CDATA[journalctlå‘½ä»¤ç®€ä»‹journalctlæ˜¯systemdå¥—ä»¶çš„ä¸€ä¸ªå‘½ä»¤ï¼Œæ˜¯ä¸€ä¸ªç³»ç»Ÿæ—¥å¿—ç®¡ç†å™¨ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨Linuxç³»ç»Ÿä¸Šæ£€æŸ¥å’ŒæŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—æ¶ˆæ¯ã€‚å®ƒæä¾›äº†ä¸€ç§ç®€å•è€Œçµæ´»çš„æ–¹å¼æ¥æŸ¥çœ‹å’Œåˆ†æç³»ç»Ÿæ—¥å¿—ï¼ŒåŒ…æ‹¬å†…æ ¸ã€ç³»ç»ŸæœåŠ¡å’Œåº”ç”¨ç¨‹åºæ—¥å¿—ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

systemd
ã€Šshellå‘½ä»¤ä¹‹systemctlã€‹
Linuxç³»ç»Ÿç®¡ç†å‘˜åº”è¯¥çŸ¥é“çš„journalctlçŸ¥è¯†



journalctlå¸¸ç”¨å‘½ä»¤å¸®åŠ©journalctl --helpman journalctl

æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—æ¶ˆæ¯
journalctl

ä»¥æ˜“è¯»çš„æ ¼å¼æ˜¾ç¤ºæ—¥å¿—æ¶ˆæ¯
journalctl -o cat

å®æ—¶è·Ÿè¸ªæ—¥å¿—æ¶ˆæ¯
journalctl -f

æŸ¥çœ‹ç‰¹å®šæ—¶é—´èŒƒå›´å†…çš„æ—¥å¿—æ¶ˆæ¯
journalctl --since &quot;YYYY-MM-DD HH:MM:SS&quot; --until &quot;YYYY-MM-DD HH:MM:SS&quot;

æŸ¥çœ‹å¼•å¯¼æ—¥å¿—æŸ¥çœ‹å¼•å¯¼æ—¥å¿—
journalctl -b

æŸ¥çœ‹è¯¦ç»†å¼•å¯¼æ—¥å¿—
journalctl -xb

æŸ¥çœ‹ç¨‹åºæ—¥å¿—æŸ¥çœ‹ç‰¹å®šç¨‹åºæ—¥å¿—
journalctl -xeu kubelet

é€†åºæŸ¥çœ‹ç¨‹åºæ—¥å¿—
journalctl -xeu kubelet -r

æ¸…ç†æ—¥å¿—æ¸…ç†2å¤©å‰çš„æ—¥å¿—
journalctl --vacuum-time=2d

æ¸…ç†è¶…è¿‡500Mçš„æ—¥å¿—
journalctl --vacuum-size=500M

ç¿»é¡µjournalctlæŸ¥çœ‹æ—¥å¿—æ—¶ç¿»é¡µï¼šfn + ä¸Šä¸‹
]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>shellå‘½ä»¤ä¹‹é‡å®šå‘</title>
    <url>/dev-shell-redirect/</url>
    <content><![CDATA[é‡å®šå‘è¯­æ³•æ–‡ä»¶æè¿°ç¬¦
0ï¼šæ ‡å‡†è¾“å…¥
1ï¼šæ ‡å‡†è¾“å‡ºï¼Œé»˜è®¤æŒ‡å‘å±å¹•
2ï¼šé”™è¯¯è¾“å‡ºï¼Œé»˜è®¤æŒ‡å‘å±å¹•
/dev/nullï¼š é»‘æ´

é‡å®šå‘æ“ä½œç¬¦
&gt;ï¼šå°†å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æŒ‡å®šæ–‡ä»¶
&gt;&gt;ï¼šå°†å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºè¿½åŠ åˆ°æŒ‡å®šæ–‡ä»¶çš„æœ«å°¾
&lt;ï¼šå°†å‘½ä»¤çš„æ ‡å‡†è¾“å…¥é‡å®šå‘ä¸ºæŒ‡å®šæ–‡ä»¶çš„å†…å®¹
|ï¼šå°†ä¸€ä¸ªå‘½ä»¤çš„æ ‡å‡†è¾“å‡ºä½œä¸ºå¦ä¸€ä¸ªå‘½ä»¤çš„æ ‡å‡†è¾“å…¥
&amp;&gt;ï¼šå°†å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºé‡å®šå‘åˆ°æŒ‡å®šæ–‡ä»¶



é‡å®šå‘ç¤ºä¾‹# æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶ls &gt;out.txtcat out.txt# ç­‰åŒäºls 1&gt;out.txtcat out.txt# é”™è¯¯è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶ls 2&gt;out.txtcat out.txtls xxx 2&gt;out.txtcat out.txt# æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºéƒ½é‡å®šå‘åˆ°æ–‡ä»¶(ls xxx || ls) &amp;&gt;out.txtcat out.txt# ç­‰åŒäº(ls xxx || ls) &gt;out.txt 2&gt;&amp;1cat out.txt# æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºéƒ½ä¸¢å¼ƒ(ls xxx || ls) &amp;&gt;/dev/null# ç­‰åŒäº(ls xxx; ls) &amp;&gt;/dev/null

é‡å®šå‘åº”ç”¨è¾“å‡ºåˆ°å±å¹•å’Œæ–‡ä»¶è¾“å‡ºå†…å®¹åŒæ—¶åˆ°å±å¹•å’Œæ–‡ä»¶ï¼š
echo &quot;hello&quot; | tee test.log

æ¸…ç©ºæ–‡ä»¶å†…å®¹æ¸…ç©ºtest.txtæ–‡ä»¶ä¸­çš„å†…å®¹
echo &quot;&quot; &gt; test.txtecho -n &quot;&quot; &gt; test.txtcat /dev/null &gt; test.txt:&gt; test.txt&gt; test.txt

catå†™å…¥æ–‡ä»¶æ–°å»ºæ–‡ä»¶ï¼š
cat &lt;&lt;EOF &gt; test.txthello worldwelcome to python world!EOFcat &lt;&lt;EOF | tee test.txthello worldwelcome to python world!EOF

è¿½åŠ å†…å®¹ï¼š
cat &lt;&lt;EOF &gt;&gt; test.txthello worldwelcome to python world!EOFcat &lt;&lt;EOF | tee -a test.txthello worldwelcome to python world!EOF

å†™å…¥çš„å†…å®¹æœ‰$ç¬¦ï¼š
cat &lt;&lt;EOF &gt; /etc/init.wsl#!/bin/sh/etc/init.d/cron \$1/etc/init.d/ssh \$1EOF





]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>shellå‘½ä»¤ä¹‹ssh</title>
    <url>/dev-shell-ssh/</url>
    <content><![CDATA[åˆ›å»ºç”¨æˆ·åˆ›å»ºvoidkingç”¨æˆ·ï¼Œå¹¶æ·»åŠ sudoæƒé™ï¼š
useradd -m voidking -s /bin/bashpasswd voidkingadduser voidking sudo



ç”Ÿæˆå¯†é’¥å¯¹# ç”Ÿæˆ ~/.ssh/id_rsa å’Œ ~/.ssh/id_rsa.pubssh-keygen# ç”Ÿæˆ voidking_rsa å’Œ voidking_rsa.pubï¼Œæ³¨é‡Šå†…å®¹ä¸º voidking@qq.comssh-keygen -C &quot;voidking@qq.com&quot; -f ./voidking_rsa 

é…ç½®å…å¯†ç™»å½•æ·»åŠ å…¬é’¥åˆ°è¿œç¨‹æœºå™¨
# ~/.ssh/id_rsa.pub çš„å†…å®¹è¿½åŠ åˆ°è¿œç¨‹æœºå™¨çš„ ~/.ssh/authorized_keys ä¸­ssh-copy-id voidking@hostname # æŒ‡å®špublic keyï¼Œè¿½åŠ åˆ°è¿œç¨‹æœºå™¨çš„ ~/.ssh/authorized_keys ä¸­ssh-copy-id -i ~/.ssh/id_rsa.pub voidking@hostnamessh-copy-id -i ~/.ssh/id_rsa.pub voidking@hostname -p 22# æµ‹è¯•ç™»å½•ssh voidking@hostname

æ³¨æ„ï¼šauthorized_keysæ–‡ä»¶æƒé™ä¸º600ã€‚å¦‚æœé…ç½®å¥½äº†sshdï¼Œä½†æ˜¯æ— æ³•ä½¿ç”¨å¯†é’¥ç™»å½•æœºå™¨ï¼Œè¯·æ£€æŸ¥authorized_keysæ–‡ä»¶æƒé™ã€‚
å¯†é’¥æ·»åŠ å¤±è´¥é—®é¢˜å¦‚æœssh-copy-idæŠ¥é”™cannot create .ssh/authorized_keys: Operation not permittedæˆ–è€…æ‰‹åŠ¨ç¼–è¾‘authorized_keysåæ— æ³•ä¿å­˜ï¼Œchmodä¹Ÿæ— æ³•æ”¹å˜authorized_keysæ–‡ä»¶çš„æƒé™ã€‚
é‚£ä¹ˆå¯èƒ½æ˜¯å› ä¸ºauthorized_keysè¢«åŠ é”äº†ï¼Œé˜²æ­¢è¯¯åˆ ï¼Œéœ€è¦å…ˆè¿›è¡Œè§£é”ã€‚
chattr -i ~/.ssh/authorized_keys
å‚è€ƒæ–‡æ¡£chattrå‘½ä»¤ â€“ æ›´æ”¹æ–‡ä»¶éšè—å±æ€§
æµ‹è¯•sshè¿æ¥ssh -vvv root@192.168.56.100 /bin/true

sshæ‰§è¡Œè¿œç¨‹å‘½ä»¤æ‰§è¡Œè¿œç¨‹å‘½ä»¤å¾ˆç®€å•ï¼Œç›´æ¥sshåé¢è·Ÿç€å‘½ä»¤å°±å¯ä»¥äº†ã€‚
ssh root@192.168.56.100 &quot;echo helloworld&quot;

é‚£å¦‚æœè¿œç¨‹å‘½ä»¤é‡Œé¢åŒ…å«åŒå¼•å·æ€ä¹ˆåŠï¼Ÿå˜æˆå•å¼•å·ï¼Œæˆ–è€…æ·»åŠ è½¬ä¹‰ã€‚
ssh root@192.168.56.100 &quot;echo &#x27;helloworld&#x27;&quot;ssh root@192.168.56.100 &quot;echo \&quot;helloworld\&quot;&quot;

é‚£å¦‚æœéœ€è¦è¿œç¨‹å‘½ä»¤é‡Œä½¿ç”¨å˜é‡æ€ä¹ˆåŠï¼Ÿæ·»åŠ è½¬ä¹‰ã€‚
ssh root@192.168.56.100 &quot;host=\$(hostname);echo \&quot;\$&#123;host&#125;\&quot;&quot;

æ‰¹é‡æ·»åŠ å¼€æœºå¯åŠ¨å‘½ä»¤å·²çŸ¥ä¸»æœºåˆ—è¡¨hosts.txtå†…å®¹ä¸ºï¼š
192.168.56.101192.168.56.102

éœ€æ±‚ï¼šç»™ä¸»æœºåˆ—è¡¨ä¸­çš„æœºå™¨æ·»åŠ å¼€æœºå¯åŠ¨å‘½ä»¤
è„šæœ¬ï¼š
for i in `cat hosts.txt`; do ssh $i &quot;echo &#x27;/home/voidking/start.sh&#x27; | sudo tee -a /etc/rc.local&quot;;done


]]></content>
      <categories>
        <category>engineering</category>
        <category>network</category>
        <category>shell</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>shellå‘½ä»¤ä¹‹ç³»ç»Ÿç®¡ç†</title>
    <url>/dev-shell-system/</url>
    <content><![CDATA[æŸ¥çœ‹ç¡¬ä»¶é…ç½®æŸ¥çœ‹æœåŠ¡å™¨å‹å·dmidecodedmidecode | grep &quot;System Information&quot; -A16 

æŸ¥çœ‹CPUç‰©ç†CPUæ•°ï¼ˆphysical idï¼‰ï¼šä¸»æ¿ä¸Šå®é™…æ’å…¥çš„cpuæ•°é‡ï¼Œå¯ä»¥æ•°ä¸é‡å¤çš„ physical id æœ‰å‡ ä¸ªã€‚CPUæ ¸å¿ƒæ•°ï¼ˆcpu coresï¼‰ï¼šå•å—CPUä¸Šé¢èƒ½å¤„ç†æ•°æ®çš„èŠ¯ç‰‡ç»„çš„æ•°é‡ï¼Œå¦‚åŒæ ¸ã€å››æ ¸ç­‰é€»è¾‘CPUæ•°ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé€»è¾‘CPU=ç‰©ç†CPUä¸ªæ•°Ã—æ¯é¢—æ ¸æ•°ï¼›å¦‚æœå¼€å¯äº†è¶…çº¿ç¨‹æŠ€æœ¯ï¼Œé€»è¾‘CPU=ç‰©ç†CPUä¸ªæ•°Ã—æ¯é¢—æ ¸æ•°x2 
# æŸ¥çœ‹CPUè¯¦ç»†ä¿¡æ¯lscpucat /proc/cpuinfo# æŸ¥è¯¢ç‰©ç†CPUæ•°é‡lscpu | grep -i &quot;Architecture&quot; | wc -lcat /proc/cpuinfo | grep &quot;physical id&quot; |sort | uniq | wc -l# æŸ¥è¯¢æ¯é¢—ç‰©ç†CPUæ ¸æ•°lscpu | grep &quot;per socket&quot;cat /proc/cpuinfo | grep &quot;core id&quot; | sort | uniq | wc -l# æŸ¥è¯¢ç³»ç»Ÿçš„æ¯é¢—ç‰©ç†CPUæ ¸å¿ƒæ˜¯å¦å¯ç”¨è¶…çº¿ç¨‹æŠ€æœ¯lscpu | grep -e &quot;per socket&quot; -e &quot;per core&quot;cat /proc/cpuinfo | grep -e &quot;cpu cores&quot;  -e &quot;siblings&quot; | sort | uniq# æŸ¥è¯¢ç³»ç»Ÿå…·æœ‰å¤šå°‘ä¸ªé€»è¾‘CPUlscpu | grep -i &quot;CPU(s):&quot;cat /proc/cpuinfo | grep &quot;processor&quot; | wc -l

lscpuæŸ¥çœ‹åˆ°çš„Core(s) per socketè¡¨ç¤ºè¿™é¢—ç‰©ç†CPUæœ‰å¤šå°‘æ ¸å¿ƒï¼ŒThread(s) per coreè¡¨ç¤ºæ¯ä¸ªæ ¸å¿ƒèƒ½åŒæ—¶å¤„ç†å¤šå°‘çº¿ç¨‹ã€‚
å‚è€ƒæ–‡æ¡£ï¼š/proc/cpuinfoæ–‡ä»¶è§£è¯»ï¼ˆè¶…æ˜“ç†è§£ï¼‰
æŸ¥çœ‹å†…å­˜# æŸ¥çœ‹å†…å­˜free -hfree -mcat /proc/meminfo

æŸ¥çœ‹ç£ç›˜lsblkdf -h

æŸ¥çœ‹æ˜¾å¡lspci | grep -i vga # æœ€å‰é¢çš„åºå·æ˜¯æ˜¾å¡ä»£å·lspci | grep -i nvidia lspci -v -s 02:00.0 # é€šè¿‡æ˜¾å¡åºå·æŸ¥çœ‹æ˜¾å¡è¯¦æƒ…lshw -numeric -C display # æŸ¥çœ‹æ‰€æœ‰æ˜¾å¡è¯¦æƒ…

æŸ¥çœ‹ç½‘å¡lspci | grep Ethernet # æŸ¥çœ‹ç½‘å¡æ˜¯ç™¾å…†ã€åƒå…†ã€è¿˜æ˜¯ä¸‡å…†ç½‘å¡



æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬lsb_release -acat /etc/issuecat /etc/os-releasecat /etc/centos-releasehostnamectl

æŸ¥çœ‹ç³»ç»Ÿä½æ•°uname -afile /bin/lsgetconf LONG_BIThostnamectl

æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬uname -ahostnamectl

æŸ¥çœ‹æ˜¯å¦æ˜¯ç‰©ç†æœºdmidecode -s system-product-namehostnamectl

æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—dmesg -Tdmesg -T | grep -i -e &quot;error&quot; -e &quot;fail&quot;journalctl -xb

dmesgç”¨äºæ˜¾ç¤ºå†…æ ¸ç¯å¢ƒä¸‹çš„ç³»ç»Ÿæ—¥å¿—ï¼ŒåŒ…æ‹¬å†…æ ¸å¯åŠ¨æ—¶çš„ä¿¡æ¯ã€ç¡¬ä»¶æ£€æµ‹ä¿¡æ¯ã€å†…æ ¸æ¨¡å—åŠ è½½ä¿¡æ¯ã€å†…æ ¸é”™è¯¯ç­‰ã€‚é€šå¸¸ç”¨äºè¯Šæ–­ç³»ç»Ÿå¯åŠ¨å’Œè¿è¡Œæ—¶å‡ºç°çš„é—®é¢˜ã€‚dmesgå‘½ä»¤æ˜¾ç¤ºçš„æ—¥å¿—ä¿¡æ¯æ¥è‡ªç³»ç»Ÿå†…æ ¸ç¯ç¼“å†²åŒºï¼Œå› æ­¤æ˜¯æœ€æ–°çš„ç³»ç»Ÿæ—¥å¿—ã€‚
journalctl -xbå‘½ä»¤ç”¨äºæŸ¥çœ‹ systemd æ—¥å¿—ï¼Œè¾“å‡ºç³»ç»Ÿå¯åŠ¨æ—¶çš„æ‰€æœ‰æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬å†…æ ¸æ¶ˆæ¯ã€ç³»ç»ŸæœåŠ¡å’Œåº”ç”¨ç¨‹åºçš„æ—¥å¿—ä¿¡æ¯ã€‚å…¶ä¸­ï¼Œ-x å‚æ•°æ˜¾ç¤ºå®Œæ•´çš„æ—¥å¿—ä¿¡æ¯ï¼Œ-b å‚æ•°è¡¨ç¤ºæ˜¾ç¤ºç³»ç»Ÿå¯åŠ¨æ—¶çš„æ—¥å¿—ä¿¡æ¯ã€‚
é€šè¿‡ journalctl -xb å‘½ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹ç³»ç»Ÿå¯åŠ¨æ—¶çš„å„ä¸ªæœåŠ¡å¯åŠ¨æƒ…å†µï¼Œåº”ç”¨ç¨‹åºå¯åŠ¨æƒ…å†µï¼Œä»¥åŠå…¶ä»–ç³»ç»Ÿçº§åˆ«çš„æ¶ˆæ¯ã€‚å¯ä»¥ç”¨æ¥è¯Šæ–­ç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹ä¸­çš„é”™è¯¯å’Œé—®é¢˜ã€‚
æ›´å¤šjournalctlçš„ç”¨æ³•ï¼Œå‚è€ƒæ–‡æ¡£ã€Šsystemctlå‘½ä»¤ã€‹ã€‚
æŸ¥çœ‹é‡å¯å‰çš„ç³»ç»Ÿæ—¥å¿—/var/logç›®å½•ä¸‹å­˜åœ¨dmesgæ—¥å¿—æ–‡ä»¶ï¼š
dmesgdmesg.0dmesg.1.gz...
dmesg æ—¥å¿—æ–‡ä»¶ä¸­ä¿å­˜çš„æ˜¯æœ¬æ¬¡é‡å¯åçš„æ—¥å¿—ï¼Œè€Œ dmesg.0 æ˜¯è¿™æ¬¡é‡å¯å‰çš„ dmesg æ—¥å¿—ï¼Œdmesg.1.gz æ˜¯ä¸Šæ¬¡é‡å¯å‰çš„ dmesg æ—¥å¿—ï¼Œä¾æ¬¡ç±»æ¨ã€‚
journalctl -k -b -1journalctl -r -k -b -1

ç³»ç»Ÿé…ç½®ä¿®æ”¹é»˜è®¤shellecho $SHELLcat /etc/shellswhich bashchsh -s /bin/bash

æ˜¾ç¤ºé¢œè‰²vim ~/.bashrc

å–æ¶ˆ force_color_prompt=yes çš„æç¤ºã€‚
ç¦æ­¢æ£€æŸ¥é‚®ä»¶ç³»ç»Ÿç»å¸¸æç¤ºï¼šæ‚¨åœ¨ /var/spool/mail/root ä¸­æœ‰æ–°é‚®ä»¶
echo &quot;unset MAILCHECK&quot; &gt;&gt; /etc/profilesource /etc/profile

æ·»åŠ ç”¨æˆ·åˆ›å»ºç”¨æˆ·ï¼Œå¹¶æ·»åŠ sudoæƒé™
useradd -m voidking -s /bin/bashpasswd voidkingadduser voidking sudo

æ·»åŠ ç”¨æˆ·åˆ°ç»„usermod -G docker -a gitlab-runnerusermod -G root -a gitlab-runner

åˆ é™¤ç”¨æˆ·åˆ é™¤ç”¨æˆ·å’Œç”¨æˆ·ç›®å½•
userdel -r voidking

åˆ é™¤ç”¨æˆ·ï¼Œç„¶ååˆ é™¤ç”¨æˆ·ç›®å½•
userdel voidkingfind /home/ -nouser | xargs rm -rfv

åˆ‡æ¢ç”¨æˆ·åˆ‡æ¢root
sudo -i# orsudo su

åˆ‡æ¢æ™®é€šç”¨æˆ·
su voidking

ä¿®æ”¹ç”¨æˆ·å®¶ç›®å½•usermod -d /data/voidking voidking # åˆ‡æ¢ç”¨æˆ·å®¶ç›®å½•åˆ° /data/voidkingusermod -md /data/voidking voidking # åˆ‡æ¢ç”¨æˆ·å®¶ç›®å½•ï¼ŒåŒæ—¶æŠŠåŸæ¥å®¶ç›®å½•ä¸­çš„å†…å®¹ç§»åŠ¨åˆ°æ–°çš„å®¶ç›®å½•

å¯¹äºrootç”¨æˆ·ï¼Œéœ€è¦å…ˆè¿›å…¥å•ç”¨æˆ·æ¨¡å¼ï¼Œæ‰èƒ½è¿›è¡Œä¿®æ”¹å®¶ç›®å½•æ“ä½œã€‚
æ·»åŠ å­—ä½“æŸ¥çœ‹å­—ä½“
fc-list

æ·»åŠ å­—ä½“
mkdir -p /usr/share/fonts/win/cd /usr/share/fonts/win/rz # æˆ–è€… wget/scptar -xzvf fonts.tgz

æ·»åŠ å­—ä½“åæ›´æ–°ç¼“å­˜
fc-cache -fvfc-list

è®¾ç½®ä¸´æ—¶IPæ·»åŠ ä¸´æ—¶IP
ip addr add 192.168.51.20/24 dev em1

åˆ é™¤ä¸´æ—¶IP
ip addr del 192.168.51.20/24 dev em1

ç½‘æ¡¥ä»å±ç½‘å¡ä¸¤å°ä¸»æœºé€šè¿‡ç½‘çº¿ç›´è¿ï¼Œå¹¶ä¸”è®¾ç½®äº†ä¸´æ—¶IPåï¼Œå¦‚æœå‘ç°äº’pingä¸é€šï¼Œé‚£ä¹ˆå¯ä»¥æ£€æŸ¥ä¸‹æ¡¥æ¥ä»å±ç½‘å¡é…ç½®ã€‚æœ‰çš„æ—¶å€™ï¼Œä¸€ä¸ªç½‘æ¡¥å¯èƒ½ä¼šæ·»åŠ å¤šä¸ªä»å±ç½‘å¡ï¼Œä»è€Œå¯¼è‡´ç½‘å¡è®¾ç½®äº†IPä½†æ˜¯ä¸é€šã€‚
ä»å±ç½‘å¡åœ¨ç½‘ç»œä¸­èµ·åˆ°ä»¥ä¸‹ä½œç”¨ï¼š

æ‰©å±•ç½‘ç»œç«¯å£ï¼šé€šè¿‡å°†å¤šä¸ªç½‘å¡æ·»åŠ åˆ°ç½‘æ¡¥æˆ–äº¤æ¢æœºä¸Šï¼Œå¯ä»¥å¢åŠ ç½‘ç»œè®¾å¤‡çš„ç«¯å£æ•°é‡ï¼Œä»è€Œè¿æ¥æ›´å¤šçš„è®¾å¤‡æˆ–è™šæ‹Ÿæœºã€‚
å®ç°ç½‘ç»œèšåˆï¼šä»å±ç½‘å¡å¯ä»¥ç”¨äºå®ç°ç½‘ç»œèšåˆï¼Œå°†å¤šä¸ªç‰©ç†ç½‘å¡ç»‘å®šåœ¨ä¸€èµ·ï¼Œæä¾›æ›´é«˜çš„å¸¦å®½å’Œå†—ä½™ã€‚
å®ç°å†—ä½™å’Œå®¹é”™ï¼šé€šè¿‡å°†å¤šä¸ªä»å±ç½‘å¡è¿æ¥åˆ°ç½‘æ¡¥æˆ–äº¤æ¢æœºä¸Šï¼Œå¯ä»¥å®ç°å†—ä½™è·¯å¾„ï¼Œå½“ä¸€ä¸ªè·¯å¾„å‘ç”Ÿæ•…éšœæ—¶ï¼Œå¯ä»¥åˆ‡æ¢åˆ°å…¶ä»–è·¯å¾„ï¼Œæé«˜ç½‘ç»œçš„å¯é æ€§å’Œå®¹é”™æ€§ã€‚
æä¾›ç½‘ç»œéš”ç¦»ï¼šä»å±ç½‘å¡å¯ä»¥ç”¨äºéš”ç¦»ç½‘ç»œæµé‡ï¼Œå°†ä¸åŒç±»å‹çš„æµé‡æˆ–ä¸åŒç½‘ç»œçš„æµé‡åˆ†å¼€å¤„ç†ï¼Œå¢åŠ ç½‘ç»œçš„å®‰å…¨æ€§å’Œæ€§èƒ½ã€‚

æŸ¥çœ‹ç½‘æ¡¥ä¿¡æ¯
ip addr # å¯ä»¥æŸ¥çœ‹åˆ°ç½‘å¡ä»å±çš„ç½‘æ¡¥brctl showbridge link

å¢åŠ ç½‘æ¡¥ä»å±ç½‘å¡
bridge link set dev eth2 master br0

åˆ é™¤ç½‘æ¡¥ä»å±ç½‘å¡
ip link set dev eth2 downbrctl delif br0 eth2ip link set dev eth2 up

ç¡®å®šç½‘å¡ç¼–å·å’Œç½‘å£å¯¹åº”å…³ç³»ethtool -p eth2

æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤åï¼Œè§‚å¯Ÿç½‘å£ï¼Œé—ªçƒçš„é‚£ä¸ªç½‘å£å°±æ˜¯ç½‘å¡ç¼–å·å¯¹åº”çš„ç½‘å£ã€‚
ä¿®æ”¹ç½‘å¡é…ç½®1ã€æŸ¥çœ‹ç½‘å¡é…ç½®
ethtool eth2

2ã€è®¾ç½®ç½‘å¡åƒå…†å…¨åŒå·¥
ethtool -s eth2 speed 1000 duplex full

è½¯ä»¶å®‰è£…æŸ¥çœ‹å‘½ä»¤å±äºå“ªä¸ªè½¯ä»¶åŒ…1ã€centos7
yum makecache fastyum whatprovides lsb_release

2ã€ubuntu
apt-get install -y apt-fileapt-file updateapt-file search ifconfig

é‡å»ºè½¯ä»¶å®‰è£…æºcentos7
cd /etc/yum.repos.drm -f *.reposcp 192.168.56.101:/etc/yum.repos.d/* .yum clean allyum makecache fast

EPELæºEPELï¼ˆExtraPackagesforEnterpriseLinuxï¼‰æ˜¯åŸºäºFedoraçš„ä¸€ä¸ªé¡¹ç›®ï¼Œä¸ºRedHatç³»çš„æ“ä½œç³»ç»Ÿæä¾›é¢å¤–çš„é«˜è´¨é‡è½¯ä»¶åŒ…ã€‚
yum install epel-release

å®‰è£…epelæºä¹‹åï¼Œå¯ä»¥å®‰è£…å¾ˆå¤šåŸæœ¬ No package xxx available çš„è½¯ä»¶ï¼Œæ¯”å¦‚jqï¼š
yum install jq

å®‰è£…æŒ‡å®šç‰ˆæœ¬è½¯ä»¶ä»¥å®‰è£…Dockerä¸ºä¾‹ï¼Œå‚è€ƒæ–‡æ¡£ã€ŠDockerå…¥é—¨ç¯‡ã€‹
é—®é¢˜æ’æŸ¥æŸ¥çœ‹CPUè´Ÿè½½toptop # æŒ‰1ï¼ŒæŸ¥çœ‹æ¯ä¸ªé€»è¾‘CPUçš„ä½¿ç”¨æƒ…å†µuptimehtop

ä¸€ä¸ªé€»è¾‘CPUå¯ä»¥å¤„ç†ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸€èˆ¬å½“ load average è¶…è¿‡é€»è¾‘CPUæ•°é‡çš„70%ï¼Œå°±å¯ä»¥è®¤ä¸º CPU çš„è´Ÿè½½è¾ƒé«˜ã€‚
æŸ¥çœ‹å†…å­˜å ç”¨æŸ¥çœ‹å†…å®¹æ€»çš„å ç”¨æƒ…å†µ
free -h

æŸ¥çœ‹å“ªä¸ªè¿›ç¨‹å ç”¨å†…å­˜è¾ƒå¤š
top # ç„¶åè¾“å…¥å¤§å†™çš„Mps aux --sort=-%mem | head

æŸ¥çœ‹ç£ç›˜ç©ºé—´å ç”¨du -sh * # ä¸åŒ…å«éšè—æ–‡ä»¶du -sh .[!.]* # æŸ¥çœ‹éšè—æ–‡ä»¶cd /du -sh * --exclude=proc --exclude=data* # é€šè¿‡å­—ç¬¦ä¸²åŒ¹é…æ’é™¤ä¸€äº›ç›®å½•æˆ–æ–‡ä»¶ï¼Œä¹Ÿä¼šæ’é™¤åŒ¹é…åˆ°çš„å­ç›®å½•å’Œå­æ–‡ä»¶du -sh * --threshold=1G # ç­›é€‰å¤§äº1Gçš„ç›®å½•æˆ–æ–‡ä»¶

æŸ¥çœ‹ç£ç›˜ç©ºé—´å ç”¨ï¼ˆå¿«é€Ÿç‰ˆï¼‰å½“æ–‡ä»¶æ¯”è¾ƒå¤šæ—¶ï¼Œduæ‰§è¡Œé€Ÿåº¦å¤ªæ…¢ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨å®ƒçš„å‡çº§ç‰ˆncduï¼ˆNCurses Disk Usageï¼‰
1ã€å®‰è£…ncdu
yum install -y ncdu

ncduäºŒè¿›åˆ¶å®‰è£…æ–¹æ³•
# wget https://dev.yorhel.nl/download/ncdu-2.2.1.tar.gzwget https://dev.yorhel.nl/download/ncdu-2.2.1-linux-x86_64.tar.gz --no-check-certificatetar -xzvf ncdu-2.2.1-linux-x86_64.tar.gzcp ncdu /usr/local/binln -s /usr/local/bin/ncdu /usr/bin/ncdu

2ã€æ‰«ææŒ‡å®šç›®å½•ç£ç›˜ç©ºé—´å ç”¨
ncdu /home/voidking

3ã€å…¨å±€æ‰«æç£ç›˜ç©ºé—´å ç”¨
ncdu / --exclude=/data/mntnfs

ç­‰åˆ°æ‰«æç»“æŸåï¼Œé€šè¿‡ä¸Šä¸‹æŒ‰é”®å’ŒEnteræŒ‰é”®ï¼Œå¯ä»¥æŸ¥çœ‹æ¯ä¸€ä¸ªç›®å½•çš„ç£ç›˜ç©ºé—´å ç”¨æƒ…å†µã€‚
æŸ¥çœ‹ç£ç›˜IOè´Ÿè½½iostat -x

åœ¨iostatå‘½ä»¤çš„è¾“å‡ºä¸­ï¼Œç£ç›˜IOè¯·æ±‚é˜Ÿåˆ—é•¿åº¦å¯¹åº”çš„æ˜¯avgqu-szå­—æ®µï¼Œè¡¨ç¤ºå¹³å‡æ¯ç§’çš„I/Oè¯·æ±‚é˜Ÿåˆ—é•¿åº¦ã€‚å®ƒå¯ä»¥ç”¨æ¥åˆ¤æ–­ç³»ç»Ÿçš„ç£ç›˜IOç“¶é¢ˆæƒ…å†µï¼Œå¦‚æœè¯¥å€¼è¶…è¿‡äº†ç£ç›˜çš„æœ€å¤§IOé˜Ÿåˆ—é•¿åº¦ï¼Œå°±è¯´æ˜ç£ç›˜IOè¯·æ±‚é˜Ÿåˆ—ç§¯å‹äº†ï¼Œç³»ç»ŸIOæ€§èƒ½å¯èƒ½ä¼šå—åˆ°å½±å“ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå½“avgqu-szå€¼è¶…è¿‡1æ—¶ï¼Œå°±å¯èƒ½ä¼šæœ‰IOç“¶é¢ˆçš„é£é™©ã€‚
æµ‹è¯•ç£ç›˜è¯»å†™æ€§èƒ½æµ‹è¯•è¯»å–æ€§èƒ½ï¼š
dd if=/path/to/testfile of=/dev/null bs=1M count=1000
ä» /path/to/testfile æµ‹è¯•æ–‡ä»¶ä¸­è¯»å–æ•°æ®å¹¶å°†å…¶ä¸¢å¼ƒï¼Œå°†ç»“æœè¾“å‡ºåˆ°/dev/nullï¼Œä»¥é¿å…å¹²æ‰°æµ‹è¯•ã€‚bs=1MæŒ‡å®šæ¯ä¸ªæ•°æ®å—çš„å¤§å°ä¸º1MBï¼Œcount=1000æŒ‡å®šè¦è¯»å–çš„æ•°æ®å—æ•°é‡ã€‚
æµ‹è¯•å†™å…¥æ€§èƒ½ï¼š
dd if=/dev/zero of=/path/to/testfile bs=1M count=1000 conv=fdatasync
å°†/path/to/testfileæ›¿æ¢ä¸ºè¦è¿›è¡Œæµ‹è¯•çš„æ–‡ä»¶è·¯å¾„ï¼Œbs=1Må’Œcount=1000æŒ‡å®šäº†æ•°æ®å—çš„å¤§å°å’Œæ•°é‡ï¼Œconv=fdatasyncç¡®ä¿æ•°æ®åŒæ­¥å†™å…¥ç£ç›˜ã€‚
æŸ¥çœ‹ç½‘ç»œè´Ÿè½½iftop

è¯¦æƒ…å‚è€ƒã€Šiftopå‘½ä»¤ã€‹
æŸ¥çœ‹è¿›ç¨‹å’Œçº¿ç¨‹# æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹ps -ef# orps aux# æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹ï¼Œå¹¶ä¸”æ˜¾ç¤ºè¿›ç¨‹å¯åŠ¨çš„å…¨éƒ¨å‘½ä»¤ps auxww# æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹ï¼Œå¹¶ä¸”æ˜¾ç¤ºè¿›ç¨‹çš„çº¿ç¨‹ps -efL# æŸ¥çœ‹æŸä¸ªè¿›ç¨‹çš„çº¿ç¨‹ps -T -p 12345

æ ¹æ®ç«¯å£æ‰¾è¿›ç¨‹å·²çŸ¥ç«¯å£å·ï¼ˆä¾‹å¦‚22ï¼‰ï¼Œæ€æ ·æŸ¥æ‰¾å¯¹åº”çš„è¿›ç¨‹ï¼ˆPIDï¼‰ï¼Ÿæ€æ ·æ‰¾åˆ°è¯¥è¿›ç¨‹å¯åŠ¨å‘½ä»¤ï¼Ÿ
æ–¹æ³•ä¸€ï¼šä½¿ç”¨lsof
lsof -i:22ps -ef | grep 12345

æ–¹æ³•äºŒï¼šä½¿ç”¨netstat
netstat -nlp | grep &quot;:22&quot;ps -ef | grep 12345

æŸ¥çœ‹ç«¯å£æ˜¯å¦å¯ä»¥æ­£å¸¸è¿æ¥nc -v 192.168.56.101 8080nc -zv -w 5 192.168.56.101 8080# æˆåŠŸè¿”å›0ï¼Œ5sè¶…æ—¶å¤±è´¥è¿”å›1telnet 192.168.56.101 8080echo &#x27;&#x27; | timeout --signal=9 5 telnet 192.168.56.101 8080echo &#x27;q&#x27; | timeout --signal=9 5 telnet -e &#x27;q&#x27; 192.168.56.101 8080# æˆåŠŸè¿”å›1ï¼Œ5sè¶…æ—¶å¤±è´¥è¿”å›137

æŸ¥çœ‹è¿›ç¨‹èµ„æºå ç”¨1ã€æŸ¥çœ‹è¿›ç¨‹çš„å®æ—¶èµ„æºå ç”¨
top -p 12234# orcat /proc/12345/status

2ã€æŸ¥çœ‹è¿›ç¨‹ä»å¯åŠ¨åˆ°æ­¤åˆ»çš„èµ„æºå ç”¨å¹³å‡å€¼
ps aux | grep 12345

å‚è€ƒæ–‡æ¡£ï¼š

çº ç»“pså’Œtopçš„cpuå ç”¨ç‡ä¸ä¸€è‡´é—®é¢˜
/proc/pid/statusç®€è¦åˆ†æ
Linuxä¸‹è¿›ç¨‹ä¿¡æ¯/proc/pid/statusçš„æ·±å…¥åˆ†æ

æŸ¥çœ‹æœ¬æœºIPåœ°å€1ã€æŸ¥çœ‹æœ¬æœºå½“å‰namespaceæ‰€æœ‰IPåœ°å€ifconfig æˆ–è€… ip address
2ã€è·å–æŸä¸ªç½‘å¡çš„IPåœ°å€ifconfig eth0 | awk &#39;NR==2&#123;print $2&#125;&#39;
æŸ¥çœ‹å¤–ç½‘å‡ºå£IPcurl myip.ipip.net
æŸ¥çœ‹å±€åŸŸç½‘æ‰€æœ‰IPéœ€æ±‚ï¼šæŸ¥çœ‹å½“å‰å±€åŸŸç½‘å·²ç»åˆ†é…çš„IPï¼Œå·²çŸ¥å±€åŸŸç½‘ä¸º192.168.56.0/241ã€é€šè¿‡æ‰«ææ›´æ–°arpç¼“å­˜
# æ‰§è¡Œå¿«ï¼Œä½†æ˜¯æŸäº›æƒ…å†µä¸‹æ— æ³•æ›´æ–°arpç¼“å­˜nmap -sP 192.168.56.0/24# æ‰§è¡Œæ…¢ï¼Œä½†æ˜¯è‚¯å®šå¯ä»¥æ›´æ–°arpç¼“å­˜nmap -PR 192.168.56.0/24

2ã€æŸ¥çœ‹æœ¬åœ°arpç¼“å­˜  
cat /proc/net/arp | awk &#x27;&#123;print $1&#125;&#x27; | grep &#x27;192.168&#x27; | sort  arp -a | awk &#x27;&#123;print $2&#125;&#x27; | grep &#x27;192.168&#x27; | sort

æ ¹æ®IPæ’åºéœ€æ±‚ï¼š/proc/net/arpä¸­çš„å†…å®¹ï¼Œæ ¹æ®IPè¿›è¡Œæ’åº
cat /proc/net/arp | grep 192.168.56 | sort -t&#x27;.&#x27; -k1n,1 -k2n,2 -k3n,3 -k4n,4

æµ‹è¯•mtuå€¼MTUæ˜¯Maximum Transmission Unitçš„ç¼©å†™ï¼Œè¡¨ç¤ºæœ€å¤§ä¼ è¾“å•å…ƒï¼ŒMTUçš„å•ä½æ˜¯å­—èŠ‚ã€‚å¤§éƒ¨åˆ†ç½‘ç»œè®¾å¤‡çš„MTUéƒ½æ˜¯1500ã€‚æŠŠæœ¬æœºçš„MTUè®¾æˆæ¯”ç½‘å…³çš„MTUå°æˆ–ç›¸åŒï¼Œå°±å¯ä»¥å‡å°‘ä¸¢åŒ…ã€‚å¦‚æœæœ¬æœºçš„MTUæ¯”ç½‘å…³çš„MTUå¤§ï¼Œå¤§çš„æ•°æ®åŒ…å°±ä¼šè¢«æ‹†å¼€æ¥ä¼ é€ï¼Œè¿™æ ·ä¼šäº§ç”Ÿå¾ˆå¤šæ•°æ®åŒ…ç¢ç‰‡ï¼Œå¢åŠ ä¸¢åŒ…ç‡ã€‚æŠŠæ•°æ®åŒ…é•¿åº¦åŠ ä¸Šæ•°æ®åŒ…å¤´28å­—èŠ‚ï¼Œå°±å¾—åˆ°MTUçš„å€¼ã€‚
ping -c 3 -s 1472 -M do www.baidu.comping -c 3 -s 1473 -M do www.baidu.com

å¸¦å®½æµ‹è¯•1ã€å®‰è£…æµ‹è¯•å·¥å…·iperf
yum install -y iperf

2ã€å¯åŠ¨iperfæœåŠ¡ç«¯
iperf -s

3ã€ä½¿ç”¨iperfå®¢æˆ·ç«¯æµ‹è¯•ç½‘é€Ÿ
iperf -c 192.168.56.112 -i 3

è·Ÿè¸ªç³»ç»Ÿè°ƒç”¨å‡è®¾lsæ‰§è¡Œå¡ä½ï¼Œå¯ä»¥é€šè¿‡straceå‘½ä»¤æŸ¥çœ‹lså…·ä½“çš„æ‰§è¡Œæƒ…å†µ
strace ls /mnt


Uncategoriesæ—¶é—´å’Œæ—¶é—´æˆ³# è¾“å‡ºæ—¶é—´date# è¾“å‡ºæ—¶é—´å¹¶æ ¼å¼åŒ–date &quot;+%Y-%m-%d %H:%M:%S&quot;# æ—¶é—´è½¬æ—¶é—´æˆ³ï¼ˆç§’ï¼‰date &quot;+%s&quot;# æ—¶é—´è½¬æ—¶é—´æˆ³ï¼ˆå¾®ç§’ï¼‰microsecond=$(($(date &quot;+%s%N&quot;)/1000000))# æ—¶é—´æˆ³ï¼ˆç§’ï¼‰è½¬æ—¶é—´date -d @1612351314 &quot;+%Y-%m-%d %H:%M:%S&quot;

è¿˜åŸhistoryä¸‡ä¸‡æ²¡æƒ³åˆ°ï¼Œcentos4.3çš„history -cå‘½ä»¤ï¼Œä¸æ­¢ä¼šæ¸…é™¤å½“å‰ç™»å½•çš„æ“ä½œå†å²è®°å½•ï¼Œè¿˜ä¼šæ¸…é™¤ .bash_history ä¸­çš„å†…å®¹ã€‚
å¦‚æœä¸å°å¿ƒæ¸…é™¤äº† .bash_history ä¸­çš„å†…å®¹ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿå¦‚æœå±å¹•ä¸Šè¿˜æ®‹ç•™ç€historyçš„å†å²è®°å½•ï¼Œé‚£ä¹ˆè¿˜æœ‰å¾—æ•‘ã€‚æ‹·è´å±å¹•ä¸Šçš„å†…å®¹ï¼Œåˆ° history.txtï¼Œå‡è®¾å†…å®¹ä¸ºï¼š
244486  2021-01-08 17:35:18 cd haojin244487  2021-01-08 17:36:01 vim main.py244488  2021-01-08 17:38:33 python main.py

æ€ä¹ˆæ¢å¤æˆæ ‡å‡†çš„ .bash_history æ ¼å¼å‘¢ï¼Ÿä½¿ç”¨å¦‚ä¸‹è„šæœ¬ï¼š
#!/bin/bashcat /dev/null &gt; bash_historywhile read linedo  time=$(echo $line | awk &#x27;&#123;print $2&quot; &quot;$3&#125;&#x27;)  #cmd=$(echo $line | awk &#x27;&#123;$1=&quot;&quot;;$2=&quot;&quot;;$3=&quot;&quot;;print $0&#125;&#x27;)  cmd=$(echo $line | awk -F &quot; &quot;  &#x27;&#123;for (i=4;i&lt;=NF;i++)printf(&quot;%s &quot;, $i);print &quot;&quot;&#125;&#x27;)  timestamp=$(date -d &quot;$time&quot; +%s)  echo &quot;#&quot;$timestamp &gt;&gt; bash_history  echo $cmd &gt;&gt; bash_historydone &lt; history.txt

æ‰§è¡Œå®Œæˆï¼Œä½¿ç”¨ bash_history æ›¿æ¢ .bash_history å³å¯ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>shell</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>linux</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>shell</tag>
        <tag>iperf</tag>
      </tags>
  </entry>
  <entry>
    <title>shellå‘½ä»¤ä¹‹systemctl</title>
    <url>/dev-shell-systemctl/</url>
    <content><![CDATA[systemctlå‘½ä»¤ç®€ä»‹
systemd is a software suite that provides an array of system components for Linux operating systems. Its main aim is to unify service configuration and behavior across Linux distributions; Its primary component is a â€œsystem and service managerâ€â€”an init system used to bootstrap user space and manage user processes. It also provides replacements for various daemons and utilities, including device management, login management, network connection management, and event logging. 

systemd æ˜¯ä¸€ä¸ªè½¯ä»¶å¥—ä»¶ï¼Œå®ƒä¸º Linux æ“ä½œç³»ç»Ÿæä¾›ä¸€ç³»åˆ—ç³»ç»Ÿç»„ä»¶ã€‚å®ƒçš„ä¸»è¦ç›®æ ‡æ˜¯ç»Ÿä¸€ Linux å‘è¡Œç‰ˆä¸­çš„æœåŠ¡é…ç½®å’Œè¡Œä¸ºï¼›å®ƒçš„ä¸»è¦ç»„ä»¶æ˜¯â€œç³»ç»Ÿå’ŒæœåŠ¡ç®¡ç†å™¨â€â€”â€”ä¸€ä¸ªç”¨äºå¼•å¯¼ç”¨æˆ·ç©ºé—´å’Œç®¡ç†ç”¨æˆ·è¿›ç¨‹çš„ init ç³»ç»Ÿã€‚å®ƒè¿˜æä¾›å„ç§å®ˆæŠ¤ç¨‹åºå’Œå®ç”¨ç¨‹åºçš„æ›¿ä»£å“ï¼ŒåŒ…æ‹¬è®¾å¤‡ç®¡ç†ã€ç™»å½•ç®¡ç†ã€ç½‘ç»œè¿æ¥ç®¡ç†å’Œäº‹ä»¶æ—¥å¿—è®°å½•ã€‚
systemdâ€™s core components include the following:

systemd is a system and service manager for Linux operating systems.
systemctl is a command to introspect and control the state of the systemd system and service manager. Not to be confused with sysctl.
systemd-analyze may be used to determine system boot-up performance statistics and retrieve other state and tracing information from the system and service manager.

å¦‚wikiæ‰€è¯´ï¼Œsystemctlæ˜¯systemdçš„ä¸€ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œä½œç”¨æ˜¯ä½œä¸ºå‘½ä»¤å®¢æˆ·ç«¯æ§åˆ¶systemdã€‚
å‚è€ƒæ–‡æ¡£ï¼š

systemd
ã€Šshellå‘½ä»¤ä¹‹journalctlã€‹



systemctlå¸¸ç”¨å‘½ä»¤å¯åœæœåŠ¡ä»¥å¯åŠ¨dockeræœåŠ¡ä¸ºä¾‹
systemctl start docker

ä»¥åœæ­¢dockeræœåŠ¡ä¸ºä¾‹
systemctl stop docker

ä»¥é‡å¯dockeræœåŠ¡ä¸ºä¾‹
systemctl restart docker

é‡æ–°åŠ è½½å•å…ƒé…ç½®systemctl daemon-reload
ç»å¸¸å’Œå¯åœæœåŠ¡é…åˆä½¿ç”¨ã€‚åœæ­¢æœåŠ¡ -&gt; ä¿®æ”¹å•å…ƒé…ç½® -&gt; é‡æ–°åŠ è½½å•å…ƒé…ç½® -&gt; å¯åŠ¨æœåŠ¡ä¿®æ”¹å•å…ƒé…ç½® -&gt; é‡æ–°åŠ è½½å•å…ƒé…ç½® -&gt; é‡å¯æœåŠ¡
å¼€æœºè‡ªå¯åŠ¨# å¼€æœºè‡ªå¯åŠ¨systemctl enable docker# å…³é—­å¼€æœºè‡ªå¯åŠ¨systemctl disable docker

æŸ¥çœ‹æœåŠ¡çŠ¶æ€ä»¥æŸ¥çœ‹dockeræœåŠ¡çŠ¶æ€ä¸ºä¾‹
systemctl status docker

æŸ¥çœ‹ Drop-In å­—æ®µï¼Œå°±èƒ½æ‰¾åˆ°é…ç½®æ–‡ä»¶ä½ç½®ã€‚ä»è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼Œåˆå¯ä»¥æŸ¥çœ‹åˆ°å…¶ä»–é…ç½®æ–‡ä»¶çš„ä½ç½®ã€‚
æŸ¥çœ‹dockeræœåŠ¡çŠ¶æ€ï¼Œæ—¥å¿—ä¸æˆªæ–­
systemctl status docker -l

æŸ¥çœ‹æœåŠ¡å‚æ•°é…ç½®ä»¥æŸ¥çœ‹dockeræœåŠ¡çš„MountFlagsé…ç½®ä¸ºä¾‹
sudo systemctl show --property=MountFlags docker.servicesudo systemctl show docker.service

é‡æ–°åŠ è½½é…ç½®ä»¥é‡æ–°åŠ è½½sshdæœåŠ¡é…ç½®ä¸ºä¾‹
systemctl reload sshd

æŸ¥çœ‹æ‰€æœ‰æ´»è·ƒçš„å•å…ƒsystemctl list-units

æŸ¥çœ‹æ‰€æœ‰æ´»è·ƒçš„æœåŠ¡systemctl list-units -t service





]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>shellå‘½ä»¤ä¹‹top</title>
    <url>/dev-shell-top/</url>
    <content><![CDATA[topå‘½ä»¤ç®€ä»‹topå‘½ä»¤æ˜¯ä¸€ç§å¸¸ç”¨çš„ Linux å®æ—¶æ€§èƒ½ç›‘æ§å·¥å…·ï¼Œå¯ä»¥æ˜¾ç¤ºç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µå’Œè¿›ç¨‹ä¿¡æ¯ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·äº†è§£å½“å‰ç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ã€Šshellå‘½ä»¤ä¹‹ç³»ç»Ÿç®¡ç†ã€‹
Linux ä½¿ç”¨ top å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿçš„è¿è¡Œæƒ…å†µ



å¸¸è§ç”¨æ³•
æ˜¾ç¤ºå®æ—¶è¿›ç¨‹ä¿¡æ¯ï¼šåœ¨ç»ˆç«¯è¾“å…¥ top å‘½ä»¤å³å¯ï¼ŒæŒ‰ä¸‹é”®ç›˜ä¸Šçš„ q é”®é€€å‡ºã€‚

æŒ‰ CPU ä½¿ç”¨ç‡æ’åºï¼šæŒ‰ä¸‹ Shift + P é”®ï¼Œå³å¯å°†è¿›ç¨‹æŒ‰ç…§ CPU ä½¿ç”¨ç‡çš„é«˜ä½æ’åºã€‚

æŒ‰å†…å­˜ä½¿ç”¨ç‡æ’åºï¼šæŒ‰ä¸‹ Shift + M é”®ï¼Œå³å¯å°†è¿›ç¨‹æŒ‰ç…§å†…å­˜ä½¿ç”¨ç‡çš„é«˜ä½æ’åºã€‚

ä»¥æ‰¹å¤„ç†æ–¹å¼è¿è¡Œï¼šåœ¨ç»ˆç«¯è¾“å…¥ top -b å‘½ä»¤ï¼Œå¯ä»¥å°† top å‘½ä»¤çš„è¾“å‡ºç»“æœè¾“å‡ºåˆ°æ–‡ä»¶ä¸­ï¼Œä»¥æ‰¹å¤„ç†çš„æ–¹å¼è¿è¡Œã€‚

æ˜¾ç¤ºç‰¹å®šç”¨æˆ·è¿›ç¨‹ï¼šåœ¨ç»ˆç«¯è¾“å…¥ top -u &lt;username&gt; å‘½ä»¤ï¼Œå¯ä»¥åªæ˜¾ç¤ºç‰¹å®šç”¨æˆ·çš„è¿›ç¨‹ã€‚

æ˜¾ç¤ºç‰¹å®šè¿›ç¨‹ä¿¡æ¯ï¼šåœ¨ç»ˆç«¯è¾“å…¥ top -p &lt;pid&gt; å‘½ä»¤ï¼Œå¯ä»¥åªæ˜¾ç¤ºæŒ‡å®šè¿›ç¨‹çš„ä¿¡æ¯ã€‚


topå‘½ä»¤è¾“å‡ºåœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸­ï¼Œtop å‘½ä»¤è¾“å‡ºçš„è¡Œåˆ—å¯èƒ½ç•¥æœ‰ä¸åŒï¼Œä½†å¤§ä½“ä¸Šæ˜¯ç±»ä¼¼çš„ã€‚
ç¤ºä¾‹ï¼š
top - 15:15:44 up 13 days,  1:30,  1 user,  load average: 0.00, 0.01, 0.05Tasks: 140 total,   1 running, 139 sleeping,   0 stopped,   0 zombie%Cpu(s):  0.0 us,  0.0 sy,  0.0 ni, 99.9 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 stKiB Mem :  8008124 total,  3366332 free,   355280 used,  4286512 buff/cacheKiB Swap:        0 total,        0 free,        0 used.  2325788 avail Mem  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND  615 root      20   0  477124   8900   6808 S   0.3  0.1  93:41.43 NetworkManager    1 root      20   0   43584   3804   2416 S   0.0  0.0   0:20.89 systemd    2 root      20   0       0      0      0 S   0.0  0.0   0:00.27 kthreadd    4 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 kworker/0:0H

ç¬¬ä¸€è¡Œ
topï¼šå½“å‰ç³»ç»Ÿæ—¶é—´å’Œè¿è¡Œæ—¶é—´ã€‚
upï¼šç³»ç»Ÿè¿è¡Œçš„æ—¶é—´ã€‚
usersï¼šå½“å‰ç™»å½•çš„ç”¨æˆ·æ•°ã€‚
load averageï¼šç³»ç»Ÿçš„å¹³å‡è´Ÿè½½æƒ…å†µï¼Œåˆ†åˆ«è¡¨ç¤ºè¿‡å» 1 åˆ†é’Ÿã€5 åˆ†é’Ÿå’Œ 15 åˆ†é’Ÿçš„å¹³å‡å€¼ã€‚

ç¬¬äºŒè¡Œ
Tasksï¼šæ€»çš„è¿›ç¨‹æ•°ã€‚
runningï¼šæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹æ•°ã€‚
sleepingï¼šä¼‘çœ çŠ¶æ€çš„è¿›ç¨‹æ•°ã€‚
stoppedï¼šå·²åœæ­¢çš„è¿›ç¨‹æ•°ã€‚
zombieï¼šåƒµå°¸è¿›ç¨‹çš„æ•°é‡ã€‚

ç¬¬ä¸‰è¡Œ
Cpu(s)ï¼šCPU çš„ä½¿ç”¨æƒ…å†µã€‚
usï¼šç”¨æˆ·ç©ºé—´ç¨‹åºä½¿ç”¨ CPU æ—¶é—´å æ¯”ã€‚
syï¼šå†…æ ¸ç©ºé—´ç¨‹åºä½¿ç”¨ CPU æ—¶é—´å æ¯”ã€‚
niï¼šè¿›ç¨‹ä¼˜å…ˆçº§ï¼ˆniceï¼‰ã€‚
idï¼šCPU ç©ºé—²æ—¶é—´å æ¯”ã€‚
waï¼šç­‰å¾… I/O çš„ CPU æ—¶é—´å æ¯”ã€‚
hiï¼šç¡¬ä»¶ä¸­æ–­å ç”¨ CPU æ—¶é—´å æ¯”ã€‚
siï¼šè½¯ä»¶ä¸­æ–­å ç”¨ CPU æ—¶é—´å æ¯”ã€‚
stï¼šè¢«å·èµ°çš„ CPU æ—¶é—´å æ¯”ã€‚

ç¬¬å››è¡Œ
totalï¼šç³»ç»Ÿæ€»å†…å­˜ã€‚
freeï¼šç©ºé—²å†…å­˜ã€‚
usedï¼šå·²ä½¿ç”¨å†…å­˜ã€‚
buff/cacheï¼šç”¨äºç¼“å­˜çš„å†…å­˜ï¼ŒåŒ…æ‹¬å†…æ ¸ç¼“å­˜å’Œç”¨æˆ·ç©ºé—´ç¼“å­˜ã€‚

ç¬¬äº”è¡Œ
totalï¼šäº¤æ¢ç©ºé—´æ€»å¤§å°ã€‚
freeï¼šç©ºé—²äº¤æ¢ç©ºé—´å¤§å°ã€‚
usedï¼šå·²ä½¿ç”¨çš„äº¤æ¢ç©ºé—´å¤§å°ã€‚
avail Memï¼šå¯ä»¥è¢«åº”ç”¨ç¨‹åºä½¿ç”¨çš„å†…å­˜å¤§å°ã€‚

ç¬¬å…­è¡Œä»¥å
PIDï¼šè¿›ç¨‹ IDã€‚
USERï¼šè¿›ç¨‹æ‰€å±ç”¨æˆ·ã€‚
%CPUï¼šè¿›ç¨‹ä½¿ç”¨ CPU æ—¶é—´å æ¯”ã€‚
%MEMï¼šè¿›ç¨‹ä½¿ç”¨å†…å­˜å æ¯”ã€‚
VSZï¼šè¿›ç¨‹è™šæ‹Ÿå†…å­˜ä½¿ç”¨é‡ã€‚
RSSï¼šè¿›ç¨‹ç‰©ç†å†…å­˜ä½¿ç”¨é‡ã€‚
TTYï¼šè¿›ç¨‹ç»‘å®šçš„ç»ˆç«¯ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚
STATï¼šè¿›ç¨‹çŠ¶æ€ï¼ŒåŒ…æ‹¬ Sï¼ˆç¡çœ çŠ¶æ€ï¼‰ã€Rï¼ˆæ­£åœ¨è¿è¡Œï¼‰ã€Dï¼ˆä¸å¯ä¸­æ–­çš„ç¡çœ çŠ¶æ€ï¼‰ã€Zï¼ˆåƒµå°¸çŠ¶æ€ï¼‰ç­‰ã€‚
STARTï¼šè¿›ç¨‹å¯åŠ¨æ—¶é—´ã€‚
TIME+ï¼šè¿›ç¨‹ä½¿ç”¨ CPU æ—¶é—´æ€»è®¡ã€‚
COMMANDï¼šè¿›ç¨‹æ‰€å¯¹åº”çš„å‘½ä»¤ã€‚

]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>Shellè„šæœ¬ç¼–ç¨‹â€”â€”ä¸‹</title>
    <url>/dev-shell-script-program-1/</url>
    <content><![CDATA[è¿ç®—ç¬¦ç®—æœ¯è¿ç®—ç¬¦#!/bin/sha=10b=20echo &quot;a=$a, b=$b&quot;val=`expr $a + $b`echo &quot;a + b : $val&quot;val=`expr $a - $b`echo &quot;a - b : $val&quot;val=`expr $a \* $b`echo &quot;a * b : $val&quot;val=`expr $b / $a`echo &quot;b / a : $val&quot;val=`expr $b % $a`echo &quot;b % a : $val&quot;if [ $a == $b ]then   echo &quot;a is equal to b&quot;fiif [ $a != $b ]then   echo &quot;a is not equal to b&quot;fi



å…³ç³»è¿ç®—ç¬¦#!/bin/sha=10b=20echo &quot;a=$a, b=$b&quot;if [ $a -eq $b ]then   echo &quot;$a -eq $b : a is equal to b&quot;else   echo &quot;$a -eq $b: a is not equal to b&quot;fiif [ $a -ne $b ]then   echo &quot;$a -ne $b: a is not equal to b&quot;else   echo &quot;$a -ne $b : a is equal to b&quot;fiif [ $a -gt $b ]then   echo &quot;$a -gt $b: a is greater than b&quot;else   echo &quot;$a -gt $b: a is not greater than b&quot;fiif [ $a -lt $b ]then   echo &quot;$a -lt $b: a is less than b&quot;else   echo &quot;$a -lt $b: a is not less than b&quot;fiif [ $a -ge $b ]then   echo &quot;$a -ge $b: a is greater or  equal to b&quot;else   echo &quot;$a -ge $b: a is not greater or equal to b&quot;fiif [ $a -le $b ]then   echo &quot;$a -le $b: a is less or  equal to b&quot;else   echo &quot;$a -le $b: a is not less or equal to b&quot;fi


å¸ƒå°”è¿ç®—ç¬¦#!/bin/sha=10b=20echo &quot;a=$a, b=$b&quot;if [ $a != $b ]then   echo &quot;$a != $b : a is not equal to b&quot;else   echo &quot;$a != $b: a is equal to b&quot;fiif [ $a -lt 100 -a $b -gt 15 ]then   echo &quot;$a -lt 100 -a $b -gt 15 : returns true&quot;else   echo &quot;$a -lt 100 -a $b -gt 15 : returns false&quot;fiif [ $a -lt 100 -o $b -gt 100 ]then   echo &quot;$a -lt 100 -o $b -gt 100 : returns true&quot;else   echo &quot;$a -lt 100 -o $b -gt 100 : returns false&quot;fiif [ $a -lt 5 -o $b -gt 100 ]then   echo &quot;$a -lt 100 -o $b -gt 100 : returns true&quot;else   echo &quot;$a -lt 100 -o $b -gt 100 : returns false&quot;fi

å­—ç¬¦ä¸²è¿ç®—ç¬¦#!/bin/sha=&quot;abc&quot;b=&quot;efg&quot;echo &quot;a=$a, b=$b&quot;if [ $a = $b ]then   echo &quot;$a = $b : a is equal to b&quot;else   echo &quot;$a = $b: a is not equal to b&quot;fiif [ $a != $b ]then   echo &quot;$a != $b : a is not equal to b&quot;else   echo &quot;$a != $b: a is equal to b&quot;fiif [ -z $a ]then   echo &quot;-z $a : string length is zero&quot;else   echo &quot;-z $a : string length is not zero&quot;fiif [ -n $a ]then   echo &quot;-n $a : string length is not zero&quot;else   echo &quot;-n $a : string length is zero&quot;fiif [ $a ]then   echo &quot;$a : string is not empty&quot;else   echo &quot;$a : string is empty&quot;fi

æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦#!/bin/shfile=&quot;../start/helloworld.sh&quot;if [ -r $file ]then   echo &quot;File has read access&quot;else   echo &quot;File does not have read access&quot;fiif [ -w $file ]then   echo &quot;File has write permission&quot;else   echo &quot;File does not have write permission&quot;fiif [ -x $file ]then   echo &quot;File has execute permission&quot;else   echo &quot;File does not have execute permission&quot;fiif [ -f $file ]then   echo &quot;File is an ordinary file&quot;else   echo &quot;This is sepcial file&quot;fiif [ -d $file ]then   echo &quot;File is a directory&quot;else   echo &quot;This is not a directory&quot;fiif [ -s $file ]then   echo &quot;File size is not zero&quot;else   echo &quot;File size is zero&quot;fiif [ -e $file ]then   echo &quot;File exists&quot;else   echo &quot;File does not exist&quot;fi


æ¡ä»¶ifâ€¦fi#!/bin/sha=10b=20echo &quot;a=$a, b=$b&quot;if [ $a == $b ]then   echo &quot;a is equal to b&quot;fiif [ $a != $b ]then   echo &quot;a is not equal to b&quot;fi

ifâ€¦elseâ€¦fi#!/bin/sha=10b=20echo &quot;a=$a, b=$b&quot;if [ $a == $b ]then   echo &quot;a is equal to b&quot;else   echo &quot;a is not equal to b&quot;fi

ifâ€¦elifâ€¦fi#!/bin/sha=10b=20echo &quot;a=$a, b=$b&quot;if [ $a == $b ]then   echo &quot;a is equal to b&quot;elif [ $a -gt $b ]then   echo &quot;a is greater than b&quot;elif [ $a -lt $b ]then   echo &quot;a is less than b&quot;else   echo &quot;None of the condition met&quot;fi

testtest å‘½ä»¤ç”¨äºæ£€æŸ¥æŸä¸ªæ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œä¸æ–¹æ‹¬å·[]ç±»ä¼¼ã€‚
#!/bin/shnum1=$[2*3]num2=$[1+5]if test $[num1] -eq $[num2]then    echo &#x27;The two numbers are equal!&#x27;else    echo &#x27;The two numbers are not equal!&#x27;fi


casecase â€¦ esac ä¸å…¶ä»–è¯­è¨€ä¸­çš„ switch â€¦ case è¯­å¥ç±»ä¼¼ï¼Œæ˜¯ä¸€ç§å¤šåˆ†æé€‰æ‹©ç»“æ„ã€‚
#!/bin/shecho -e &quot;Input a number between 1 to 4: \c&quot;read aNumcase $aNum in    1)  echo &#x27;You select 1&#x27;    ;;    2)  echo &#x27;You select 2&#x27;    ;;    3)  echo &#x27;You select 3&#x27;    ;;    4)  echo &#x27;You select 4&#x27;    ;;    *)  echo &#x27;You do not select a number between 1 to 4&#x27;    ;;esac

#!/bin/bashoption=&quot;$&#123;1&#125;&quot;case $&#123;option&#125; in    -f) FILE=&quot;$&#123;2&#125;&quot;        echo &quot;File name is $FILE&quot;    ;;    -d) DIR=&quot;$&#123;2&#125;&quot;        echo &quot;Dir name is $DIR&quot;    ;;    *)         echo &quot;`basename $&#123;0&#125;`:usage: [-f file] | [-d directory]&quot;        exit 1 # Command to come out of the program with status 1    ;;esac

å¾ªç¯for#!/bin/bashfor loop in 1 2 3 4 5do    echo &quot;The value is: $loop&quot;donefor str in &#x27;This is a string&#x27;do    echo $strdonefor FILE in $HOME/.bash*do   echo $FILEdone

while#!/bin/bashCOUNTER=0while ( $COUNTER &lt;= 5 )do    COUNTER=`expr $COUNTER + 1`    echo $COUNTERdonewhile [ $COUNTER -lt 10 ]do    COUNTER=`expr $COUNTER + 1`    echo $COUNTERdoneecho &#x27;type &lt;CTRL-D&gt; to terminate&#x27;echo -n &#x27;enter your most liked film: &#x27;while read FILMdo    echo &quot;Yeah! great film the $FILM&quot;done

until#!/bin/basha=0until [ ! $a -lt 10 ]do    echo $a    a=`expr $a + 1`done

for_break#!/bin/bashfor var1 in 1 2 3do    for var2 in 0 5    do        if [ $var1 -eq 2 -a $var2 -eq 0 ]        then            break 2        else            echo &quot;$var1 $var2&quot;        fi    donedone

while_break#!/bin/bashwhile :do    echo -n &quot;Input a number between 1 to 5: &quot;    read aNum    case $aNum in        1|2|3|4|5) echo &quot;Your number is $aNum!&quot;        ;;        *) echo &quot;You do not select a number between 1 to 5, game is over!&quot;            break        ;;    esacdone

for_continue#!/bin/bashNUMS=&quot;1 2 3 4 5 6 7&quot;for NUM in $NUMSdo    Q=`expr $NUM % 2`    if [ $Q -eq 0 ]    then        echo &quot;Number is an even number!!&quot;        continue    fi    echo &quot;Found odd number&quot;done

while_continue#!/bin/bashwhile :do    echo -n &quot;Input a number between 1 to 5: &quot;    read aNum    case $aNum in        1|2|3|4|5) echo &quot;Your number is $aNum!&quot;        ;;        *) echo &quot;You do not select a number between 1 to 5!&quot;            continue            echo &quot;Game is over!&quot;        ;;    esacdone

å‡½æ•°hello#!/bin/bash# Define your function hereHello () &#123;   echo &quot;http://www.voidking.com&quot;&#125;# Invoke your functionHello

return#!/bin/bashfunWithReturn()&#123;    echo &quot;The function is to get the sum of two numbers...&quot;    echo -n &quot;Input first number: &quot;    read aNum    echo -n &quot;Input another number: &quot;    read anotherNum    echo &quot;The two numbers are $aNum and $anotherNum !&quot;    return $(($aNum+$anotherNum))&#125;funWithReturn# Capture value returnd by last commandret=$?echo &quot;The sum of two numbers is $ret !&quot;

two_function#!/bin/bash# Calling one function from anothernumber_one () &#123;    echo &quot;Url_1 is http://www.voidking.com&quot;    number_two&#125;number_two () &#123;    echo &quot;Url_2 is http://www.baidu.com&quot;&#125;number_onenumber_three () &#123;    echo &quot;Url_3 is http://www.baidu.com&quot;&#125;unset -f number_three

å‚æ•°#!/bin/bashfunWithParam()&#123;    echo &quot;The value of the first parameter is $1 !&quot;    echo &quot;The value of the second parameter is $2 !&quot;    echo &quot;The value of the tenth parameter is $4 !&quot;    # å‚æ•°ä¸ªæ•°    echo &quot;The amount of the parameters is $# !&quot;    # ä¼ é€’ç»™å‡½æ•°çš„æ‰€æœ‰å‚æ•°      echo &quot;The string of the parameters is $* !&quot;  &#125;funWithParam 1 2 3 4

è·å–è„šæœ¬ç»å¯¹è·¯å¾„scriptpath=$(cd &quot;$(dirname &quot;$0&quot;)&quot;; pwd)

æºç åˆ†äº«https://github.com/voidking/shell.git
]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>vim</tag>
      </tags>
  </entry>
  <entry>
    <title>Shellè„šæœ¬ç¼–ç¨‹â€”â€”ä¸Š</title>
    <url>/dev-shell-script-program-0/</url>
    <content><![CDATA[Shellç®€ä»‹Shell æ˜¯ä»€ä¹ˆï¼ŸShell è¿™ä¸ªå•è¯çš„åŸæ„æ˜¯â€œå¤–å£³â€ï¼Œè·Ÿ kernelï¼ˆå†…æ ¸ï¼‰ç›¸å¯¹åº”ï¼Œæ¯”å–»å†…æ ¸å¤–é¢çš„ä¸€å±‚ï¼Œå³ç”¨æˆ·è·Ÿå†…æ ¸äº¤äº’çš„å¯¹è¯ç•Œé¢ã€‚
å…·ä½“æ¥è¯´ï¼ŒShell è¿™ä¸ªè¯æœ‰å¤šç§å«ä¹‰ã€‚
é¦–å…ˆï¼ŒShell æ˜¯ä¸€ä¸ªç¨‹åºï¼Œæä¾›ä¸€ä¸ªä¸ç”¨æˆ·å¯¹è¯çš„ç¯å¢ƒã€‚è¿™ä¸ªç¯å¢ƒåªæœ‰ä¸€ä¸ªå‘½ä»¤æç¤ºç¬¦ï¼Œè®©ç”¨æˆ·ä»é”®ç›˜è¾“å…¥å‘½ä»¤ï¼Œæ‰€ä»¥åˆç§°ä¸ºå‘½ä»¤è¡Œç¯å¢ƒï¼ˆcommand line interfaceï¼Œç®€å†™ä¸º CLIï¼‰ã€‚Shell æ¥æ”¶åˆ°ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤ï¼Œå°†å‘½ä»¤é€å…¥æ“ä½œç³»ç»Ÿæ‰§è¡Œï¼Œå¹¶å°†ç»“æœè¿”å›ç»™ç”¨æˆ·ã€‚  
å…¶æ¬¡ï¼ŒShell æ˜¯ä¸€ä¸ªå‘½ä»¤è§£é‡Šå™¨ï¼Œè§£é‡Šç”¨æˆ·è¾“å…¥çš„å‘½ä»¤ã€‚å®ƒæ”¯æŒå˜é‡ã€æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯æ“ä½œç­‰è¯­æ³•ï¼Œæ‰€ä»¥ç”¨æˆ·å¯ä»¥ç”¨ Shell å‘½ä»¤å†™å‡ºå„ç§å°ç¨‹åºï¼Œåˆç§°ä¸ºè„šæœ¬ï¼ˆscriptï¼‰ã€‚è¿™äº›è„šæœ¬éƒ½é€šè¿‡ Shell çš„è§£é‡Šæ‰§è¡Œï¼Œè€Œä¸é€šè¿‡ç¼–è¯‘ã€‚  
æœ€åï¼ŒShell æ˜¯ä¸€ä¸ªå·¥å…·ç®±ï¼Œæä¾›äº†å„ç§å°å·¥å…·ï¼Œä¾›ç”¨æˆ·æ–¹ä¾¿åœ°ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„åŠŸèƒ½ã€‚  
å¯¹äºç”¨æˆ·æ¥è¯´ï¼ŒShellæ˜¯æœ€é‡è¦çš„å®ç”¨ç¨‹åºï¼Œæ·±å…¥äº†è§£å’Œç†Ÿç»ƒæŒæ¡Shellçš„ç‰¹æ€§æå…¶ä½¿ç”¨æ–¹æ³•ï¼Œæ˜¯ç”¨å¥½Unix/Linuxç³»ç»Ÿçš„å…³é”®ã€‚å¯ä»¥è¯´ï¼ŒShellä½¿ç”¨çš„ç†Ÿç»ƒç¨‹åº¦åæ˜ äº†ç”¨æˆ·å¯¹Unix/Linuxä½¿ç”¨çš„ç†Ÿç»ƒç¨‹åº¦ã€‚
Shell æœ‰ä¸¤ç§æ‰§è¡Œå‘½ä»¤çš„æ–¹å¼ï¼šäº¤äº’å¼ï¼ˆInteractiveï¼‰ï¼šè§£é‡Šæ‰§è¡Œç”¨æˆ·çš„å‘½ä»¤ï¼Œç”¨æˆ·è¾“å…¥ä¸€æ¡å‘½ä»¤ï¼ŒShellå°±è§£é‡Šæ‰§è¡Œä¸€æ¡ã€‚æ‰¹å¤„ç†ï¼ˆBatchï¼‰ï¼šç”¨æˆ·äº‹å…ˆå†™ä¸€ä¸ªShellè„šæœ¬ï¼Œå…¶ä¸­æœ‰å¾ˆå¤šæ¡å‘½ä»¤ï¼Œè®©Shellä¸€æ¬¡æŠŠè¿™äº›å‘½ä»¤æ‰§è¡Œå®Œã€‚
Shellè„šæœ¬æ˜¯è§£é‡Šå‹è¯­è¨€ï¼Œä¸éœ€è¦ç¼–è¯‘ã€‚Shellç¨‹åºä»è„šæœ¬ä¸­ä¸€è¡Œä¸€è¡Œè¯»å–å¹¶æ‰§è¡Œè¿™äº›å‘½ä»¤ï¼Œç›¸å½“äºä¸€ä¸ªç”¨æˆ·æŠŠè„šæœ¬ä¸­çš„å‘½ä»¤ä¸€è¡Œä¸€è¡Œæ•²åˆ°Shellæç¤ºç¬¦ä¸‹æ‰§è¡Œã€‚
Unix/Linux ä¸Šå¸¸è§çš„ Shell è„šæœ¬è§£é‡Šå™¨æœ‰ bashã€shã€cshã€ksh ç­‰ï¼Œä¹ æƒ¯ä¸ŠæŠŠå®ƒä»¬ç§°ä½œä¸€ç§Shellã€‚æˆ‘ä»¬å¸¸è¯´æœ‰å¤šå°‘ç§ Shellï¼Œå…¶å®è¯´çš„æ˜¯ Shell è„šæœ¬è§£é‡Šå™¨ã€‚
Bash æ˜¯å¤§å¤šæ•° Linux æ ‡å‡†é»˜è®¤çš„ Shellï¼Œå› æ­¤æ˜¯æˆ‘ä»¬å­¦ä¹ çš„é‡ç‚¹ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ã€ŠBash è„šæœ¬æ•™ç¨‹ã€‹
Linux Shellè„šæœ¬æ•™ç¨‹ï¼š30åˆ†é’Ÿç©è½¬Shellè„šæœ¬ç¼–ç¨‹



starthelloworld1ã€æ–°å»ºhelloworld.shï¼Œå†…å®¹ä¸ºï¼š
#!/bin/bashecho &quot;Hello World !&quot;

#! æ˜¯ä¸€ä¸ªçº¦å®šçš„æ ‡è®°ï¼Œå®ƒå‘Šè¯‰ç³»ç»Ÿè¿™ä¸ªè„šæœ¬éœ€è¦ä»€ä¹ˆè§£é‡Šå™¨æ¥æ‰§è¡Œï¼Œå³ä½¿ç”¨å“ªä¸€ç§Shellã€‚echoå‘½ä»¤ç”¨äºå‘çª—å£è¾“å‡ºæ–‡æœ¬ã€‚
2ã€æ·»åŠ æ‰§è¡Œæƒé™chmod +x helloworld.sh
3ã€æ‰§è¡Œè„šæœ¬./helloworld.sh
PSï¼šè¾“å…¥ggè·³åˆ°é¦–è¡Œï¼Œ.,$dï¼Œè¡¨ç¤ºä»å½“å‰è¡Œåˆ°æœ«è¡Œå…¨éƒ¨åˆ é™¤æ‰ã€‚æˆ–è€…ï¼Œ1,$dï¼Œè¡¨ç¤ºä»é¦–è¡Œåˆ°æœ«è¡Œå…¨éƒ¨åˆ é™¤æ‰ã€‚
echoechoæ˜¯Shellçš„ä¸€ä¸ªå†…éƒ¨æŒ‡ä»¤ï¼Œç”¨äºåœ¨å±å¹•ä¸Šæ‰“å°å‡ºæŒ‡å®šçš„å­—ç¬¦ä¸²ã€‚
#!/bin/bash# æ˜¾ç¤ºè½¬ä¹‰å­—ç¬¦echo &quot;\&quot;It is a test\&quot;&quot;# æ˜¾ç¤ºå˜é‡name=&quot;VoidKing&quot;echo &quot;Welcome, $name&quot;# å˜é‡ä¸å…¶å®ƒå­—ç¬¦ç›¸è¿æ—¶éœ€è¦ä½¿ç”¨å¤§æ‹¬å·month=8echo &quot;$&#123;month&#125;-1-2009&quot;# æ˜¾ç¤ºæ¢è¡Œecho -e &quot;OK!\n&quot;echo &quot;It is a test&quot;# æ˜¾ç¤ºä¸æ¢è¡Œecho -e &quot;OK!\c&quot;echo &quot;It is a test&quot;# æ˜¾ç¤ºç»“æœé‡å®šå‘è‡³æ–‡ä»¶echo &quot;It is a test&quot; &gt; myfile# åŸæ ·è¾“å‡ºå­—ç¬¦ä¸²echo &#x27;$name\&quot;&#x27;# æ˜¾ç¤ºå‘½ä»¤æ‰§è¡Œç»“æœecho `date`

printfprintf å‘½ä»¤ç”¨äºæ ¼å¼åŒ–è¾“å‡ºï¼Œ æ˜¯echoå‘½ä»¤çš„å¢å¼ºç‰ˆã€‚å®ƒæ˜¯Cè¯­è¨€printf()åº“å‡½æ•°çš„ä¸€ä¸ªæœ‰é™çš„å˜å½¢ï¼Œå¹¶ä¸”åœ¨è¯­æ³•ä¸Šæœ‰äº›ä¸åŒã€‚
æ³¨æ„ï¼šprintf ç”± POSIX æ ‡å‡†æ‰€å®šä¹‰ï¼Œç§»æ¤æ€§è¦æ¯” echo å¥½ã€‚
#!/bin/bash# format-stringä¸ºåŒå¼•å·printf &quot;%d %s\n&quot; 1 &quot;abc&quot;# å•å¼•å·ä¸åŒå¼•å·æ•ˆæœä¸€æ · printf &#x27;%d %s\n&#x27; 1 &quot;abc&quot; # æ²¡æœ‰å¼•å·ä¹Ÿå¯ä»¥è¾“å‡ºprintf %s abcdef# ä¸€ä¸ªæ ¼å¼å¤šä¸ªå‚æ•°printf %s abc defprintf &quot;%s\n&quot; abc defprintf &quot;%s %s %s\n&quot; a b c d e f g h i j# %sé»˜è®¤ä¸ºç©ºï¼Œ%dé»˜è®¤ä¸º0printf &quot;%s and %d \n&quot; # å¦‚æœä»¥%dçš„æ ¼å¼æ¥æ˜¾ç¤ºå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆä¼šæœ‰è­¦å‘Šï¼Œå¹¶ä¸”é»˜è®¤ç½®ä¸º 0printf &quot;always prints %s,%d\n&quot; Hello Shell

äº¤äº’ä½¿ç”¨ read å‘½ä»¤ä» stdin è·å–è¾“å…¥å¹¶èµ‹å€¼ç»™ PERSON å˜é‡ï¼Œæœ€ååœ¨ stdout ä¸Šè¾“å‡ºã€‚
#!/bin/bashecho &quot;What is your name?&quot;read PERSONecho &quot;Hello, $PERSON&quot;

é‡å®šå‘#!/bin/bash# stdouté‡å®šå‘åˆ°filels -l &gt; filels -l &gt;&gt; file# stdoutå’Œstderråˆå¹¶åé‡å®šå‘åˆ°myfilels -l &gt; myfile 2&gt;&amp;1ls -l &gt;&gt; myfile 2&gt;&amp;1# å±è”½ stdout å’Œ stderrls -l &gt; /dev/null 2&gt;&amp;1

#!/bin/bashcat &lt;&lt; EOFMy name is VoidKing.I&#x27;m good at programming.EOF

åŒ…å«è„šæœ¬url.shå†…å®¹ä¸º
url=&quot;http://www.voidking.com&quot;

main.shå†…å®¹ä¸º
#!/bin/bash. ./helloworld.shsource ./helloworld.sh. ./url.shecho $url

å˜é‡åŸºæœ¬å˜é‡#!/bin/bash# å®šä¹‰å˜é‡your_name=&quot;voidking&quot;your_age=25# æ˜¾ç¤ºå˜é‡echo -e &quot;your name is $&#123;your_name&#125; \n welcome to shell world&quot;echo &quot;your age is $&#123;your_age&#125;&quot;your_email=&quot;voidking@qq.com&quot;# è®¾ç½®your_emailä¸ºåªè¯»å˜é‡readonly your_emailecho &quot;your email is $your_email&quot;your_address=&quot;ä¸­å›½å‰æ—é•¿æ˜¥&quot;# åˆ é™¤å˜é‡unset your_address

æ³¨æ„ï¼Œå˜é‡åå’Œç­‰å·ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œè¿™å¯èƒ½å’Œæˆ‘ä»¬ç†Ÿæ‚‰çš„æ‰€æœ‰ç¼–ç¨‹è¯­è¨€éƒ½ä¸ä¸€æ ·ã€‚shellé‡Œæ²¡æœ‰å¤šè¡Œæ³¨é‡Šï¼Œåªèƒ½æ¯ä¸€è¡ŒåŠ ä¸€ä¸ª#å·ã€‚
ä¸Šé¢çš„è„šæœ¬ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€äº›ä¸­æ–‡ã€‚åœ¨CentOS7.2ä¸­ï¼Œå¦‚æœå‡ºç°ä¹±ç ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ CentOS7.2çš„ä¸­æ–‡æ”¯æŒã€‚localeï¼Œæ˜¾ç¤ºLANG=Cã€‚
vim /etc/locale.confï¼Œä¿®æ”¹locale.confå¦‚ä¸‹ï¼š
LANG=&quot;zh_CN.UTF-8&quot;LANGUAGE=&quot;zh_CN.UTF-8:zh_CN.UTF-8:zh_CN&quot;SUPPORTED=&quot;zh_CN.UTF-8:zh_CN:zh:en_US.UTF-8:en_US:en&quot;SYSFONT=&quot;lat0-sun16&quot;

localeï¼Œæ˜¾ç¤ºï¼š
LANG=zh_CN.UTF-8LC_CTYPE=&quot;zh_CN.UTF-8&quot;LC_NUMERIC=&quot;zh_CN.UTF-8&quot;LC_TIME=&quot;zh_CN.UTF-8&quot;LC_COLLATE=&quot;zh_CN.UTF-8&quot;LC_MONETARY=&quot;zh_CN.UTF-8&quot;LC_MESSAGES=&quot;zh_CN.UTF-8&quot;LC_PAPER=&quot;zh_CN.UTF-8&quot;LC_NAME=&quot;zh_CN.UTF-8&quot;LC_ADDRESS=&quot;zh_CN.UTF-8&quot;LC_TELEPHONE=&quot;zh_CN.UTF-8&quot;LC_MEASUREMENT=&quot;zh_CN.UTF-8&quot;LC_IDENTIFICATION=&quot;zh_CN.UTF-8&quot;LC_ALL=

ç‰¹æ®Šå˜é‡#!/bin/bashecho &quot;Process ID: $$&quot;echo &quot;File Name: $0&quot;echo &quot;First Parameter: $1&quot;echo &quot;Second Parameter: $2&quot;echo &quot;Quoted Values: $@&quot;echo &quot;Quoted Values: $*&quot;echo &quot;Total Number of Parameters: $#&quot;


å˜é‡æ›¿æ¢#!/bin/bashecho $&#123;var:-&quot;Variable is not set&quot;&#125;echo &quot;1 - Value of var is $&#123;var&#125;&quot;echo $&#123;var:=&quot;Variable is not set&quot;&#125;echo &quot;2 - Value of var is $&#123;var&#125;&quot;unset varecho $&#123;var:+&quot;This is default value&quot;&#125;echo &quot;3 - Value of var is $var&quot;var=&quot;Prefix&quot;echo $&#123;var:+&quot;This is default value&quot;&#125;echo &quot;4 - Value of var is $var&quot;echo $&#123;var:?&quot;Print this message&quot;&#125;echo &quot;5 - Value of var is $&#123;var&#125;&quot;

å‘½ä»¤æ›¿æ¢#!/bin/bashDATE=`date`echo &quot;Date is $DATE&quot;USERS=`who | awk &#x27;&#123;print $1&#125;&#x27;`echo &quot;Logged in user are $USERS&quot;UP=`date ; uptime`echo &quot;Uptime is $UP&quot;

å­—ç¬¦ä¸²#!/bin/bash# å•å¼•å·å­—ç¬¦ä¸²ä¸­çš„å˜é‡æ— æ•ˆï¼Œä»»ä½•å­—ç¬¦éƒ½ä¼šåŸæ ·è¾“å‡º# å•å¼•å·å­—ä¸²ä¸­ä¸èƒ½å‡ºç°å•å¼•å·ï¼ˆå¯¹å•å¼•å·ä½¿ç”¨è½¬ä¹‰ç¬¦åä¹Ÿä¸è¡Œï¼‰str=&#x27;this is a string&#x27;# åŒå¼•å·é‡Œå¯ä»¥æœ‰å˜é‡ï¼Œå¯ä»¥å‡ºç°è½¬ä¹‰ç¬¦str=&quot;Hello, I know your are \&quot;$your_name\&quot;! \n&quot;# æ‹¼æ¥å­—ç¬¦ä¸²your_name=&quot;voidking&quot;greeting=&quot;hello, &quot;$your_name&quot; !&quot;greeting_1=&quot;hello, $&#123;your_name&#125; !&quot;echo $greeting $greeting_1# è·å–å­—ç¬¦ä¸²é•¿åº¦string=&quot;abcd&quot;echo $&#123;#string&#125;# æå–å­å­—ç¬¦ä¸²string=&quot;alibaba is a great company&quot;echo $&#123;string:1:4&#125; # æŸ¥æ‰¾å­å­—ç¬¦ä¸²string=&quot;alibaba is a great company&quot;echo `expr index &quot;$string&quot; is`

æ•°ç»„#!/bin/shname[0]=&quot;VoidKing0&quot;name[1]=&quot;VoidKing1&quot;name[2]=&quot;VoidKing2&quot;echo &quot;Index0: $&#123;name[0]&#125;&quot;echo &quot;Index1: $&#123;name[1]&#125;&quot;echo &quot;All names: $&#123;name[*]&#125;&quot;echo &quot;All names: $&#123;name[@]&#125;&quot;age=(24 25 26)age[2]=25# å–å¾—æ•°ç»„å…ƒç´ çš„ä¸ªæ•°name_length=$&#123;#name[@]&#125;age_length=$&#123;#age[*]&#125;echo &quot;name_length: $name_length,age_length: $age_length&quot;# å–å¾—æ•°ç»„å•ä¸ªå…ƒç´ çš„é•¿åº¦lengthn=$&#123;#name[0]&#125;echo &quot;Index0 length: $lengthn&quot;

æºç åˆ†äº«https://github.com/voidking/shell.git
]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
        <tag>vim</tag>
      </tags>
  </entry>
  <entry>
    <title>bash_profileå’Œbashrcçš„åŒºåˆ«</title>
    <url>/dev-bashprofile-bashrc/</url>
    <content><![CDATA[bash_profileå’Œbashrcæ˜¯å•¥ï¼Ÿbash_profileå’Œbashrcéƒ½æ˜¯linuxé‡Œçš„åˆå§‹åŒ–è„šæœ¬ï¼Œä½œç”¨æ˜¯å¯¹shellç¯å¢ƒè¿›è¡Œåˆå§‹åŒ–ã€‚åœ¨å®‰è£…å’Œé…ç½®è½¯ä»¶çš„æ—¶å€™ï¼Œç»å¸¸éœ€è¦ä¿®æ”¹è¿™ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼Œä»¥ä¾¿æ¯æ¬¡ç™»å½•è‡ªåŠ¨ç”Ÿæ•ˆæˆ–è€…æ¯æ¬¡æ‰§è¡Œè„šæœ¬éƒ½è‡ªåŠ¨ç”Ÿæ•ˆã€‚
è¿™ä¸¤ä¸ªæ–‡ä»¶çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿå®ƒä»¬æœ‰ä»€ä¹ˆè”ç³»ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦ä¿®æ”¹bash_profileï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦ä¿®æ”¹bashrcï¼Ÿæœ¬æ–‡å°±æ¥è¯¦ç»†äº†è§£ä¸€ä¸‹ï¼Œä¸»è¦å¼•ç”¨é˜®ä¸€å³°å¤§ä½¬çš„Bash å¯åŠ¨ç¯å¢ƒã€‚


Sessionç”¨æˆ·æ¯æ¬¡ä½¿ç”¨ Shellï¼Œéƒ½ä¼šå¼€å¯ä¸€ä¸ªä¸ Shell çš„ Sessionï¼ˆå¯¹è¯ï¼‰ã€‚
Session æœ‰ä¸¤ç§ç±»å‹ï¼šç™»å½• Session å’Œéç™»å½• Sessionï¼Œä¹Ÿå¯ä»¥å«åš login shell å’Œ non-login shellã€‚
ç™»å½• Sessionç™»å½• Session æ˜¯ç”¨æˆ·ç™»å½•ç³»ç»Ÿä»¥åï¼Œç³»ç»Ÿä¸ºç”¨æˆ·å¼€å¯çš„åŸå§‹ Sessionï¼Œé€šå¸¸éœ€è¦ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œç™»å½•ã€‚
ç™»å½• Session ä¸€èˆ¬è¿›è¡Œæ•´ä¸ªç³»ç»Ÿç¯å¢ƒçš„åˆå§‹åŒ–ï¼Œå¯åŠ¨çš„åˆå§‹åŒ–è„šæœ¬ä¾æ¬¡å¦‚ä¸‹ã€‚

/etc/profileï¼šæ‰€æœ‰ç”¨æˆ·çš„å…¨å±€é…ç½®è„šæœ¬ã€‚
/etc/profile.dï¼šç›®å½•é‡Œé¢æ‰€æœ‰.shæ–‡ä»¶
~/.bash_profileï¼šç”¨æˆ·çš„ä¸ªäººé…ç½®è„šæœ¬ã€‚å¦‚æœè¯¥è„šæœ¬å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œå®Œå°±ä¸å†å¾€ä¸‹æ‰§è¡Œã€‚
~/.bash_loginï¼šå¦‚æœ~/.bash_profileæ²¡æ‰¾åˆ°ï¼Œåˆ™å°è¯•æ‰§è¡Œè¿™ä¸ªè„šæœ¬ï¼ˆC shell çš„åˆå§‹åŒ–è„šæœ¬ï¼‰ã€‚å¦‚æœè¯¥è„šæœ¬å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œå®Œå°±ä¸å†å¾€ä¸‹æ‰§è¡Œã€‚
~/.profileï¼šå¦‚æœ~/.bash_profileå’Œ~/.bash_loginéƒ½æ²¡æ‰¾åˆ°ï¼Œåˆ™å°è¯•è¯»å–è¿™ä¸ªè„šæœ¬ï¼ˆBourne shell å’Œ Korn shell çš„åˆå§‹åŒ–è„šæœ¬ï¼‰ã€‚

Linux å‘è¡Œç‰ˆæ›´æ–°çš„æ—¶å€™ï¼Œä¼šæ›´æ–°/etcé‡Œé¢çš„æ–‡ä»¶ï¼Œæ¯”å¦‚/etc/profileï¼Œå› æ­¤ä¸è¦ç›´æ¥ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ã€‚å¦‚æœæƒ³ä¿®æ”¹æ‰€æœ‰ç”¨æˆ·çš„ç™»é™†ç¯å¢ƒï¼Œå°±åœ¨/etc/profile.dç›®å½•é‡Œé¢æ–°å»º.shè„šæœ¬ã€‚
å¦‚æœæƒ³ä¿®æ”¹ä½ ä¸ªäººçš„ç™»å½•ç¯å¢ƒï¼Œä¸€èˆ¬æ˜¯å†™åœ¨~/.bash_profileé‡Œé¢ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„.bash_profileæ–‡ä»¶ã€‚
# .bash_profilePATH=/sbin:/usr/sbin:/bin:/usr/bin:/usr/local/binPATH=$PATH:$HOME/binSHELL=/bin/bashMANPATH=/usr/man:/usr/X11/manEDITOR=/usr/bin/viPS1=&#x27;\h:\w\$ &#x27;PS2=&#x27;&gt; &#x27;if [ -f ~/.bashrc ]; then. ~/.bashrcfiexport PATHexport EDITOR
å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªè„šæœ¬å®šä¹‰äº†ä¸€äº›æœ€åŸºæœ¬çš„ç¯å¢ƒå˜é‡ï¼Œç„¶åæ‰§è¡Œäº†~/.bashrc
bashå‘½ä»¤çš„ â€“login å‚æ•°ï¼Œä¼šå¼ºåˆ¶æ‰§è¡Œç™»å½• Session ä¼šæ‰§è¡Œçš„è„šæœ¬ã€‚bash --loginbashå‘½ä»¤çš„ â€“noprofile å‚æ•°ï¼Œä¼šè·³è¿‡ä¸Šé¢è¿™äº› Profile è„šæœ¬ã€‚bash --noprofile
éç™»å½• Sessionéç™»å½• Session æ˜¯ç”¨æˆ·è¿›å…¥ç³»ç»Ÿä»¥åï¼Œæ‰‹åŠ¨æ–°å»ºçš„ Sessionï¼Œè¿™æ—¶ä¸ä¼šè¿›è¡Œç¯å¢ƒåˆå§‹åŒ–ã€‚æ¯”å¦‚ï¼Œåœ¨å‘½ä»¤è¡Œæ‰§è¡Œbashå‘½ä»¤ï¼Œå°±ä¼šæ–°å»ºä¸€ä¸ªéç™»å½• Sessionã€‚
éç™»å½• Session çš„åˆå§‹åŒ–è„šæœ¬ä¾æ¬¡å¦‚ä¸‹ã€‚

/etc/bash.bashrcï¼šå¯¹å…¨ä½“ç”¨æˆ·æœ‰æ•ˆã€‚
~/.bashrcï¼šä»…å¯¹å½“å‰ç”¨æˆ·æœ‰æ•ˆã€‚

å¯¹ç”¨æˆ·æ¥è¯´ï¼Œ~/.bashrcé€šå¸¸æ˜¯æœ€é‡è¦çš„è„šæœ¬ã€‚éç™»å½• Session é»˜è®¤ä¼šæ‰§è¡Œå®ƒï¼Œè€Œç™»å½• Session ä¸€èˆ¬ä¹Ÿä¼šé€šè¿‡è°ƒç”¨æ‰§è¡Œå®ƒã€‚æ¯æ¬¡æ–°å»ºä¸€ä¸ª Bash çª—å£ï¼Œå°±ç›¸å½“äºæ–°å»ºä¸€ä¸ªéç™»å½• Sessionï¼Œæ‰€ä»¥~/.bashrcæ¯æ¬¡éƒ½ä¼šæ‰§è¡Œã€‚
æ³¨æ„ï¼Œæ‰§è¡Œè„šæœ¬ç›¸å½“äºæ–°å»ºä¸€ä¸ªéäº’åŠ¨çš„ Bash ç¯å¢ƒï¼Œä½†æ˜¯è¿™ç§æƒ…å†µä¸ä¼šè°ƒç”¨~/.bashrcã€‚
bashå‘½ä»¤çš„ â€“norc å‚æ•°ï¼Œå¯ä»¥ç¦æ­¢åœ¨éç™»å½• Session æ‰§è¡Œ~/.bashrcè„šæœ¬ã€‚bash --norcbashå‘½ä»¤çš„ â€“rcfile å‚æ•°ï¼ŒæŒ‡å®šå¦ä¸€ä¸ªè„šæœ¬ä»£æ›¿.bashrcã€‚bash --rcfile testrc
bash_logout~/.bash_logoutè„šæœ¬åœ¨æ¯æ¬¡é€€å‡º Session æ—¶æ‰§è¡Œï¼Œé€šå¸¸ç”¨æ¥åšä¸€äº›æ¸…ç†å·¥ä½œå’Œè®°å½•å·¥ä½œï¼Œæ¯”å¦‚åˆ é™¤ä¸´æ—¶æ–‡ä»¶ï¼Œè®°å½•ç”¨æˆ·åœ¨æœ¬æ¬¡ Session èŠ±è´¹çš„æ—¶é—´ã€‚
å¦‚æœæ²¡æœ‰é€€å‡ºæ—¶è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œè¿™ä¸ªæ–‡ä»¶ä¹Ÿå¯ä»¥ä¸å­˜åœ¨ã€‚
å°ç»“
å…¨å±€é…ç½®ä¿®æ”¹ /etc/profile ã€/etc/profile.d å’Œ /etc/bash.bashrc
ä¸ªäººé…ç½®ä¿®æ”¹ ~/.bash_profile å’Œ ~/.bashrc
~/.bash_profileç™»å½•sessionçš„åˆå§‹åŒ–è„šæœ¬ï¼Œæ¯æ¬¡ç™»å½•ç³»ç»Ÿåéƒ½ä¼šæ‰§è¡Œå®ƒï¼Œå®ƒä¼šè°ƒç”¨bashrcã€‚
~/.bashrcæ˜¯éç™»å½•sessionçš„åˆå§‹åŒ–è„šæœ¬ï¼Œæ‰§è¡Œ bash å‘½ä»¤åè¿›å…¥æ–°çš„bashç¯å¢ƒæ—¶ä¼šæ‰§è¡Œå®ƒã€‚
macosä¸Šçš„åˆå§‹åŒ–è„šæœ¬æ˜¯~/.bash_profileï¼Œæ²¡æœ‰~/.bashrcã€‚
ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¿®æ”¹~/.bash_profileå³å¯ï¼Œ~/.bashrcä¿®æ”¹è¾ƒå°‘ã€‚

]]></content>
      <categories>
        <category>engineering</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockerfileä½¿ç”¨Supervisorç®¡ç†Tomcat</title>
    <url>/dev-dockerfile-supervisor/</url>
    <content><![CDATA[é—®é¢˜æè¿°å®¹å™¨ä¸­ï¼Œä½¿ç”¨supervisorç®¡ç†tomcatï¼ŒsupervisoræŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºï¼Œä½¿ç”¨supervisorç›‘æ§ç®¡ç†çš„è¿›ç¨‹å¿…é¡»ä»¥nodaemonå¯åŠ¨ï¼Œè€Œtomcatçš„startup.shè„šæœ¬æ˜¯daemonæ–¹å¼çš„ã€‚


è§£å†³åŠæ³•ä¸€1ã€ä¿®æ”¹startup.shè„šæœ¬åœ¨startup.shçš„æœ€åçš„
exec &quot;$PRGDIR&quot;/&quot;$EXECUTABLE&quot; start &quot;$@&quot; 

æ”¹ä¸º    
exec &quot;$PRGDIR&quot;/&quot;$EXECUTABLE&quot; run &quot;$@&quot;


2ã€ä¿®æ”¹supervisor_tomcat.confç„¶åsupervisor_tomcat.confå†…å®¹ä¸ºï¼š
[program:tomcat]directory=/opt/apache-tomcat-8.0.44command=/opt/apache-tomcat-8.0.44/bin/startup.shenvironment=JAVA_HOME=&quot;/usr/lib/jvm/jdk1.8.0_131&quot;,JAVA_BIN=&quot;/usr/lib/jvm/jdk1.8.0_131/bin&quot;user=rootautostart=trueautorestart=truestdout_logfile=/var/log/supervisor/%(program_name)s.logstderr_logfile=/var/log/supervisor/%(program_name)s.log

è§£å†³åŠæ³•äºŒä¸éœ€è¦ä¿®æ”¹startup.shï¼Œä½¿ç”¨catalina.shã€‚ç„¶åsupervisor_tomcat.confå†…å®¹ä¸ºï¼š
[program:tomcat]directory=/opt/apache-tomcat-8.0.44command=/opt/apache-tomcat-8.0.44/bin/catalina.sh runenvironment=JAVA_HOME=&quot;/usr/lib/jvm/jdk1.8.0_131&quot;,JAVA_BIN=&quot;/usr/lib/jvm/jdk1.8.0_131/bin&quot;user=rootautostart=trueautorestart=truestdout_logfile=/var/log/supervisor/%(program_name)s.logstderr_logfile=/var/log/supervisor/%(program_name)s.log

æ„å»ºsupervisorç®¡ç†tomcatçš„é•œåƒ1ã€å‡†å¤‡Dockerfileã€supervisord.confå’Œsupervisor_tomcat.confï¼Œå†…å®¹å¯ä»¥å‚è€ƒhexo-storage/dockerfile-supervisor
2ã€ä¸‹è½½ jdk-8u131-linux-x64.tar.gz å’Œ apache-tomcat-8.0.44.tar.gz åˆ°downloadç›®å½•
3ã€æ„å»ºä¸€ä¸ªåä¸ºcentos/supervisor:v1.0çš„é•œåƒ
docker build -t centos/supervisor:v1.0 .

4ã€å¯åŠ¨å®¹å™¨
docker run --name supervisor -d \-p 18080:8080 \centos/supervisor:v1.0docker logs supervisor

5ã€æµ‹è¯•è®¿é—®
curl localhost:18080

åè®°æœ¬æ–‡ä¸­çš„è¿™ç§ç®¡ç†æ–¹å¼ï¼Œå…¶å®æ˜¯è¿èƒŒå®¹å™¨ä½¿ç”¨çš„åŸºæœ¬åŸåˆ™çš„ã€‚å®¹å™¨ä¸­ï¼Œåº”è¯¥åªè·‘ä¸€ä¸ªç¨‹åºï¼Œä½œä¸º1å·è¿›ç¨‹ã€‚å¹´å°‘æ— çŸ¥ï¼Œæœ¬æ–‡å°±ä¸åˆ äº†ï¼Œç•™ä½œçºªå¿µå§ã€‚
ä¹¦ç­¾
ä¸­å›½ç¬¬ä¸€å¥—Dockerå®æˆ˜æ¡ˆä¾‹è§†é¢‘è¯¾ç¨‹ï¼ˆå…¥é—¨åˆ°é«˜çº§ï¼‰
Dockerå®æˆ˜æ¡ˆä¾‹æºç 
Dockerå®æˆ˜æ¡ˆä¾‹æ–‡æ¡£
Linuxåå°è¿›ç¨‹ç®¡ç†åˆ©å™¨ï¼šsupervisor
tomcatä½¿ç”¨supervisorç®¡ç†

]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>docker</category>
        <category>java</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>tomcat</tag>
        <tag>java</tag>
        <tag>centos</tag>
        <tag>supervisor</tag>
        <tag>dockerfile</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Dockerfileæ„å»ºTomcaté•œåƒ</title>
    <url>/dev-dockerfile-tomcat/</url>
    <content><![CDATA[å‰è¨€å¦‚æœåªæ˜¯æƒ³è¦ä¸€ä¸ªtomcatç¯å¢ƒï¼Œå¾ˆç®€å•ï¼Œç›´æ¥æ‹‰å–ä¸€ä¸ªtomcaté•œåƒå°±å¯ä»¥äº†ã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬åœ¨centos7é•œåƒçš„åŸºç¡€ä¸Šï¼Œå­¦ä¹ ä½¿ç”¨Dockerfileæ„å»ºTomcaté•œåƒã€‚åŒæ—¶ä¼šå¯¹æ¯”æ‰‹å·¥æ„å»ºé•œåƒå’Œä½¿ç”¨Dockerfileæ„å»ºé•œåƒçš„ä¸åŒï¼Œä»¥ä¾¿æ›´å¥½åœ°ç†è§£æ„å»ºè¿‡ç¨‹ã€‚


æ‰‹å·¥æ„å»ºé•œåƒå¯åŠ¨å®¹å™¨å‡è®¾æˆ‘ä»¬çš„æ‰€æœ‰å®‰è£…ç¨‹åºéƒ½æ”¾åœ¨äº†å®¿ä¸»æœºçš„/downloadç›®å½•ä¸‹ï¼Œç°åœ¨éœ€è¦å°†å…¶æŒ‚è½½åˆ°å®¹å™¨çš„/mnt/softwareç›®å½•ä¸‹ã€‚
service docker startdocker run -i -t -v /download/:/mnt/software/ centos:7 /bin/bash

å®‰è£…jdk1ã€è¿›å…¥å®¹å™¨ç¯å¢ƒã€‚
2ã€å¯é€‰æ“ä½œï¼Œå®‰è£…vimå¢å¼ºç‰ˆã€‚
yum install vim-enhanced

3ã€è§£å‹jdkåˆ°/usr/lib/jvmç›®å½•ã€‚
cd /mnt/softwaremkdir -p /usr/lib/jvmtar zxvf jdk-8u131-linux-x64.tar.gz -C /usr/lib/jvm/

4ã€é…ç½®JAVA_HOMEå’ŒJRE_HOMEï¼Œvi /etc/profileï¼Œåœ¨æœ€åæ·»åŠ ï¼š
export JAVA_HOME=/usr/lib/jvm/jdk1.8.0_131export JRE_HOME=$JAVA_HOME/jreexport CLASSPATH=$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATHexport PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH

ç„¶åä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ
source /etc/profile

5ã€æµ‹è¯•jdkæ˜¯å¦é…ç½®æˆåŠŸ
javajavac

å®‰è£…tomcat1ã€è¿›å…¥å®¹å™¨ç¯å¢ƒã€‚
2ã€è§£å‹tomcatåˆ°/optç›®å½•ã€‚
cd /mnt/softwaretar zxvf apache-tomcat-8.0.44.tar.gz -C /opt

3ã€å¯åŠ¨tomcatã€‚
cd /opt/apache-tomcat-8.0.44/bin/./startup.sh

4ã€æµ‹è¯•è®¿é—®ã€‚
yum install curlcurl localhost:8080

ç¼–å†™å¯åŠ¨è„šæœ¬1ã€è¿›å…¥æ ¹ç›®å½•ï¼Œæ–°å»ºrun.shæ–‡ä»¶ã€‚
cd /vi run.sh

2ã€ç¼–è¾‘run.shå†…å®¹ä¸ºï¼š
#!/bin/shexport JAVA_HOME=/usr/lib/jvm/jdk1.8.0_131export JRE_HOME=$JAVA_HOME/jreexport CLASSPATH=$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATHexport PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATHsh /opt/apache-tomcat-8.0.44/bin/catalina.sh run

3ã€æ›´æ”¹run.shæƒé™
chmod 777 run.sh

ä¿å­˜å®¹å™¨ä¿å­˜å®¹å™¨ä¸ºcentos/tomcaté•œåƒ
docker ps -ldocker commit 206f centos/tomcat

dockeré•œåƒçš„å‘½åè§„åˆ™ registry_url/namespace/image_name:tag é»˜è®¤tagæ˜¯latestã€‚
ä½¿ç”¨é•œåƒ1ã€å¯åŠ¨é•œåƒ
docker run -d -p 18080:8080 centos/tomcat /run.sh

2ã€æµ‹è¯•è®¿é—®
curl localhost:18080

ä½¿ç”¨Dockerfileæ„å»ºé•œåƒç¼–å†™dockerfile1ã€å‡†å¤‡Dockerfileå’Œrun.shå†…å®¹å¯ä»¥å‚è€ƒhexo-storage/dockerfile-tomcat
2ã€ä¸‹è½½ jdk-8u131-linux-x64.tar.gz å’Œ apache-tomcat-8.0.44.tar.gz åˆ°downloadç›®å½•
3ã€æ„å»ºä¸€ä¸ªåä¸ºcentos/tomcat8.0:v1.0çš„é•œåƒ
docker build -t centos/tomcat8.0:v1.0 .

ä½¿ç”¨é•œåƒ1ã€å¯åŠ¨é•œåƒ
docker run -d -p 28080:8080 centos/tomcat8.0:v1.0 /run.sh

2ã€æµ‹è¯•è®¿é—®
curl localhost:28080






]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>tomcat</tag>
        <tag>centos</tag>
        <tag>dockerfile</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockerfileå…¥é—¨ç¯‡</title>
    <url>/dev-dockerfile-start/</url>
    <content><![CDATA[ä»€ä¹ˆæ˜¯Dockerfileï¼Ÿæ­£å¦‚ã€ŠDockerå…¥é—¨ç¯‡ã€‹ä¸€æ–‡ä¸­æ‰€è¯´ï¼Œå®¹å™¨æŠ€æœ¯åŒ…æ‹¬å®¹å™¨é•œåƒå’Œå®¹å™¨è¿è¡Œæ—¶ã€‚å…¶ä¸­å®¹å™¨é•œåƒæ˜¯ä¸€ä¸ªè½¯ä»¶é›†è£…ç®±ï¼ŒåŒ…å«è½¯ä»¶è¿è¡Œéœ€è¦çš„æ‰€æœ‰æ–‡ä»¶ã€‚é‚£ä¹ˆï¼Œæ€æ ·åˆ¶ä½œä¸€ä¸ªå®¹å™¨é•œåƒå‘¢ï¼Ÿä¸¤ä¸ªæ–¹æ³•ï¼šç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯ä¿®æ”¹å®¹å™¨è¿è¡Œæ—¶ï¼Œç„¶åæäº¤ä¿®æ”¹å˜æˆæ–°å®¹å™¨é•œåƒã€‚ç¬¬äºŒä¸ªæ–¹æ³•å°±æ˜¯ä½¿ç”¨Dockerfileã€‚

Dockerfileæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£ï¼Œå…¶ä¸­åŒ…å«ä¸€äº›æŒ‡ä»¤ï¼ˆç±»ä¼¼äºshellå‘½ä»¤ï¼‰ã€‚Dockerå¯ä»¥é€šè¿‡é˜…è¯»Dockerfileä¸­çš„æŒ‡ä»¤ï¼Œæ¥è‡ªåŠ¨æ„å»ºé•œåƒã€‚

æ›´å¤šå†…å®¹ï¼Œå‚è€ƒDockerfile reference ã€èœé¸ŸDocker Dockerfile å’Œ Dockerfile ä½¿ç”¨ä»‹ç»ã€‚
æœ¬æ–‡ï¼Œæˆ‘ä»¬å°±æ¥å­¦ä¹ ä¸€ä¸‹Dockerfileçš„ç¼–å†™å’Œä½¿ç”¨ã€‚


helloworld1ã€åˆ›å»ºä¸€ä¸ªDockerfileæ–‡ä»¶ï¼Œå†…å®¹ä¸º
FROM busybox:1.25ENTRYPOINT [&quot;echo&quot;]CMD [&quot;helloworld&quot;]

2ã€æ‰“åŒ…æ–°é•œåƒdocker build -t busybox-echo:1.25 .
3ã€è¿è¡Œæ–°é•œåƒdocker run busybox-echo:1.25å¯ä»¥çœ‹åˆ°è¾“å‡ºäº†helloworldï¼Œè‡³æ­¤ï¼Œå…¥é—¨ä»ªå¼å®Œæˆã€‚
Dockerfileç®€æDockerfileå¯ä»¥åˆ†ä¸ºå››éƒ¨åˆ†ï¼š

åŸºç¡€é•œåƒä¿¡æ¯
ç»´æŠ¤è€…ä¿¡æ¯
é•œåƒæ“ä½œå‘½ä»¤
å®¹å™¨å¯åŠ¨å‘½ä»¤

å…¶ä¸­å¿…è¦çš„æ˜¯åŸºç¡€é•œåƒä¿¡æ¯ï¼Œå…¶ä»–éƒ½å¯ä»¥ä¸è¦ã€‚åªä¸è¿‡è¿™ç§æƒ…å†µä¸‹ï¼Œæ„å»ºæ—¶å°±ç›¸å½“äºæ‹·è´äº†ä¸€ä¸ªé•œåƒã€‚
ä»¥ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­è¯´æ˜Dockerfileçš„å››ä¸ªéƒ¨åˆ†ï¼š
# This dockerfile is a demo.# åŸºç¡€é•œåƒä¿¡æ¯FROM ubuntu:16.04# ç»´æŠ¤è€…ä¿¡æ¯MAINTAINER voidking voidking@qq.com# é•œåƒæ“ä½œå‘½ä»¤ENV TZ=&quot;Asia/Shanghai&quot;RUN apt update &amp;&amp; apt install -y tzdata jq# å®¹å™¨å¯åŠ¨å‘½ä»¤CMD [&quot;/bin/bash&quot;,&quot;-c&quot;,&quot;echo $(date) &amp;&amp; echo &#x27;&#123;\&quot;name\&quot;:\&quot;voidking\&quot;&#125;&#x27; | jq .&quot;]
FROMï¼šå®šåˆ¶çš„é•œåƒéƒ½æ˜¯åŸºäº FROM çš„é•œåƒï¼Œè¿™é‡Œçš„ ubuntu:16.04 å°±æ˜¯éœ€è¦çš„åŸºç¡€é•œåƒã€‚MAINTAINERï¼šç»´æŠ¤è€…ä¿¡æ¯ã€‚ENVï¼šè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œè®¾ç½®dockerå®¹å™¨çš„æ—¶åŒºä¸ºShanghaiã€‚RUNï¼šç”¨äºæ‰§è¡Œåé¢è·Ÿç€çš„å‘½ä»¤è¡Œå‘½ä»¤ã€‚CMDï¼šå®¹å™¨å¯åŠ¨æ—¶é»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ã€‚
æ­¤å¤–ï¼Œå¸¸ç”¨çš„é•œåƒå‘½ä»¤è¿˜æœ‰COPYå’ŒADDã€‚COPYå‘½ä»¤æ ¼å¼ï¼šCOPY  æºè·¯å¾„  ç›®æ ‡è·¯å¾„æºè·¯å¾„å¦‚æœæ˜¯æ–‡ä»¶ï¼ŒCOPYå‘½ä»¤æ‹·è´æ–‡ä»¶åˆ°ç›®æ ‡è·¯å¾„ä¸‹ã€‚æºè·¯å¾„å¦‚æœæ˜¯ç›®å½•ï¼ŒCOPYå‘½ä»¤æ‹·è´ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶åˆ°ç›®æ ‡è·¯å¾„ä¸‹ï¼Œç›®æ ‡è·¯å¾„ä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»ºã€‚
ADDæŒ‡ä»¤æ˜¯COPYå‘½ä»¤çš„åŠ å¼ºç‰ˆï¼ˆadditionï¼‰ï¼šæ‹·è´å‹ç¼©æ–‡ä»¶ä¼šè‡ªåŠ¨è§£å‹ï¼Œæ”¯æŒä»urlä¸­æ‹·è´æ–‡ä»¶ã€‚
PSï¼šæ„å»ºå¹¶è¿è¡Œé•œåƒ
docker build -t ubuntu-jq:16.04 .docker run ubuntu-jq:16.04

ä»é•œåƒè¿˜åŸDockerfileDockerImage=&quot;busybox-echo:1.25&quot;docker history --format &#123;&#123;.CreatedBy&#125;&#125; --no-trunc=true $DockerImage |sed &quot;s/\/bin\/sh\ -c\ \#(nop)\ //g&quot;|sed &quot;s/\/bin\/sh\ -c/RUN/g&quot; | tac

åˆ é™¤Dockerfileç¼“å­˜docker buildå¤±è´¥åï¼Œä¼šäº§ç”Ÿç¼“å­˜ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¸…é™¤ç¼“å­˜
docker rm $(docker ps -qf status=exited)docker rmi $(docker images -q -f dangling=true)



]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Yiiæ¡†æ¶å®æˆ˜</title>
    <url>/dev-yii-in-action/</url>
    <content><![CDATA[å‰è¨€æ–°å…¥æ‰‹çš„é¡¹ç›®éœ€è¦ä½¿ç”¨Yiiæ¡†æ¶å¼€å‘ï¼Œé‚£å°±ä»¿ç…§ä¹‹å‰å†™çš„ã€ŠThinkPHPå®æˆ˜ã€‹ï¼Œæ•´ç†ä¸€ä¸‹å¿…é¡»æŒæ¡çš„ä¸‰ä¸ªéƒ¨åˆ†ï¼šè·¯ç”±æ§åˆ¶ã€æ¨¡æ¿æ¸²æŸ“ã€å¢åˆ æ”¹æŸ¥ã€‚


ç¯å¢ƒå‡†å¤‡å‚ç…§ã€ŠThinkPHPå¼€å‘ç¯å¢ƒæ­å»ºã€‹ã€‚
ä¸‹è½½å®‰è£…1ã€ä¸‹è½½Yii2çš„åŸºæœ¬åº”ç”¨ç¨‹åºæ¨¡æ¿ã€‚
2ã€è§£å‹å‡ºbasicç›®å½•ã€‚
3ã€ç§»åŠ¨basicç›®å½•åˆ°wampserverçš„wwwç›®å½•ä¸‹ã€‚
4ã€ä¿®æ”¹ basic/config/web.php æ–‡ä»¶ï¼Œç»™ cookieValidationKey é…ç½®é¡¹ æ·»åŠ ä¸€ä¸ªå¯†é’¥ï¼š
&#x27;cookieValidationKey&#x27; =&gt; &#x27;voidking&#x27;,

5ã€å¯åŠ¨wampserverï¼Œæµè§ˆå™¨è®¿é—®ï¼šhttp://localhost/basic/web/index.php ã€‚å¦‚æœå®‰è£…æˆåŠŸï¼Œå°±ä¼šçœ‹åˆ°â€œCongratulations! You have successfully created your Yii-powered application.â€ã€‚
é¡¹ç›®ç»“æ„basic/                  åº”ç”¨æ ¹ç›®å½•    composer.json       Composer é…ç½®æ–‡ä»¶, æè¿°åŒ…ä¿¡æ¯    config/             åŒ…å«åº”ç”¨é…ç½®åŠå…¶å®ƒé…ç½®        console.php     æ§åˆ¶å°åº”ç”¨é…ç½®ä¿¡æ¯        web.php         Web åº”ç”¨é…ç½®ä¿¡æ¯    commands/           åŒ…å«æ§åˆ¶å°å‘½ä»¤ç±»    controllers/        åŒ…å«æ§åˆ¶å™¨ç±»    models/             åŒ…å«æ¨¡å‹ç±»    runtime/            åŒ…å« Yii åœ¨è¿è¡Œæ—¶ç”Ÿæˆçš„æ–‡ä»¶ï¼Œä¾‹å¦‚æ—¥å¿—å’Œç¼“å­˜æ–‡ä»¶    vendor/             åŒ…å«å·²ç»å®‰è£…çš„ Composer åŒ…ï¼ŒåŒ…æ‹¬ Yii æ¡†æ¶è‡ªèº«    views/              åŒ…å«è§†å›¾æ–‡ä»¶    web/                Web åº”ç”¨æ ¹ç›®å½•ï¼ŒåŒ…å« Web å…¥å£æ–‡ä»¶        assets/         åŒ…å« Yii å‘å¸ƒçš„èµ„æºæ–‡ä»¶ï¼ˆjavascript å’Œ cssï¼‰        index.php       åº”ç”¨å…¥å£æ–‡ä»¶    yii                 Yii æ§åˆ¶å°å‘½ä»¤æ‰§è¡Œè„šæœ¬

ä¸€èˆ¬æ¥è¯´ï¼Œåº”ç”¨ä¸­çš„æ–‡ä»¶å¯è¢«åˆ†ä¸ºä¸¤ç±»ï¼šåœ¨ basic/web ä¸‹çš„å’Œåœ¨å…¶å®ƒç›®å½•ä¸‹çš„ã€‚ å‰è€…å¯ä»¥ç›´æ¥é€šè¿‡ HTTP è®¿é—®ï¼Œåè€…ä¸èƒ½ä¹Ÿä¸åº”è¯¥è¢«ç›´æ¥è®¿é—®ã€‚
helloworldåˆ›å»ºåŠ¨ä½œå¯¹äºâ€œHelloâ€ä»»åŠ¡ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ª say åŠ¨ä½œï¼Œ ä»è¯·æ±‚ä¸­æ¥æ”¶ message å‚æ•°å¹¶æ˜¾ç¤ºç»™æœ€ç»ˆç”¨æˆ·ã€‚å¦‚æœè¯·æ±‚æ²¡æœ‰æä¾› message å‚æ•°ï¼Œ åŠ¨ä½œå°†æ˜¾ç¤ºé»˜è®¤å‚æ•° â€œHelloâ€ã€‚

 åŠ¨ä½œæ˜¯æœ€ç»ˆç”¨æˆ·å¯ä»¥ç›´æ¥è®¿é—®å¹¶æ‰§è¡Œçš„å¯¹è±¡ã€‚ åŠ¨ä½œè¢«ç»„ç»‡åœ¨æ§åˆ¶å™¨ä¸­ã€‚ ä¸€ä¸ªåŠ¨ä½œçš„æ‰§è¡Œç»“æœå°±æ˜¯æœ€ç»ˆç”¨æˆ·æ”¶åˆ°çš„å“åº”å†…å®¹ã€‚

åŠ¨ä½œå¿…é¡»å£°æ˜åœ¨æ§åˆ¶å™¨ä¸­ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œ ä½ å¯ä»¥åœ¨ç°å­˜çš„ SiteController æ§åˆ¶å™¨é‡Œå£°æ˜ say åŠ¨ä½œã€‚è¿™ä¸ªæ§åˆ¶å™¨å®šä¹‰åœ¨ controllers/SiteController.php ç±»æ–‡ä»¶ä¸­ã€‚ ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŠ¨ä½œçš„å£°æ˜ï¼š
&lt;?phpnamespace app\controllers;use yii\web\Controller;class SiteController extends Controller&#123;    // ...ç°å­˜çš„ä»£ç ...    public function actionSay($message = &#x27;Hello&#x27;)    &#123;        return $this-&gt;render(&#x27;say&#x27;, [&#x27;message&#x27; =&gt; $message]);    &#125;&#125;

åœ¨ä¸Šè¿° SiteController ä»£ç ä¸­ï¼Œsay åŠ¨ä½œè¢«å®šä¹‰ä¸º actionSay æ–¹æ³•ã€‚ Yii ä½¿ç”¨ action å‰ç¼€åŒºåˆ†æ™®é€šæ–¹æ³•å’ŒåŠ¨ä½œã€‚ action å‰ç¼€åé¢çš„åç§°è¢«æ˜ å°„ä¸ºåŠ¨ä½œçš„ IDã€‚
åŠ¨ä½œ ID æ€»æ˜¯è¢«ä»¥å°å†™å¤„ç†ï¼Œå¦‚æœä¸€ä¸ªæ“ä½œ ID ç”±å¤šä¸ªå•è¯ç»„æˆï¼Œ å•è¯ä¹‹é—´å°†ç”±ç ´æŠ˜å·è¿æ¥ï¼ˆå¦‚ create-commentï¼‰ã€‚åŠ¨ä½œ ID æ˜ å°„ä¸ºæ–¹æ³•åæ—¶ç§»é™¤äº†ç ´æŠ˜å·ï¼Œ å°†æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼Œå¹¶åŠ ä¸Š action å‰ç¼€ã€‚ æ¯”å¦‚ï¼šåŠ¨ä½œ ID create-comment å¯¹åº”æ–¹æ³•å actionCreateCommentã€‚
ä¸Šè¿°ä»£ç ä¸­çš„åŠ¨ä½œæ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•° messageï¼Œå®ƒçš„é»˜è®¤å€¼æ˜¯ â€œHelloâ€ã€‚ 
åœ¨åŠ¨ä½œæ–¹æ³•ä¸­ï¼Œyii\web\Controller::render() è¢«ç”¨æ¥æ¸²æŸ“ä¸€ä¸ªåä¸º say çš„è§†å›¾æ–‡ä»¶ã€‚ message å‚æ•°ä¹Ÿè¢«ä¼ å…¥è§†å›¾ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨é‡Œé¢ä½¿ç”¨ã€‚åŠ¨ä½œæ–¹æ³•ä¼šè¿”å›æ¸²æŸ“ç»“æœã€‚ ç»“æœä¼šè¢«åº”ç”¨æ¥æ”¶å¹¶æ˜¾ç¤ºç»™æœ€ç»ˆç”¨æˆ·çš„æµè§ˆå™¨ï¼ˆä½œä¸ºæ•´é¡µ HTML çš„ä¸€éƒ¨åˆ†ï¼‰ã€‚
åˆ›å»ºè§†å›¾è§†å›¾æ˜¯ä½ ç”¨æ¥ç”Ÿæˆå“åº”å†…å®¹çš„è„šæœ¬ã€‚ä¸ºäº†è¯´ â€œHelloâ€ï¼Œ ä½ éœ€è¦åˆ›å»ºä¸€ä¸ª say è§†å›¾ï¼Œä»¥ä¾¿æ˜¾ç¤ºä»åŠ¨ä½œæ–¹æ³•ä¸­ä¼ æ¥çš„ message å‚æ•°ã€‚
&lt;?phpuse yii\helpers\Html;?&gt;&lt;?= Html::encode($message) ?&gt;

say è§†å›¾åº”è¯¥å­˜ä¸º views/site/say.php æ–‡ä»¶ã€‚å½“ä¸€ä¸ªåŠ¨ä½œä¸­è°ƒç”¨äº† yii\web\Controller::render() æ–¹æ³•æ—¶ï¼Œ å®ƒå°†ä¼šå¯»æ‰¾åä¸º views/æ§åˆ¶å™¨ ID/è§†å›¾å.php çš„PHPæ–‡ä»¶ã€‚ã€‚
å½“ç„¶äº†ï¼Œä½ å¤§æ¦‚ä¼šåœ¨ say è§†å›¾é‡Œæ”¾å…¥æ›´å¤šå†…å®¹ã€‚å†…å®¹å¯ä»¥ç”± HTML æ ‡ç­¾ï¼Œçº¯æ–‡æœ¬ï¼Œ ç”šè‡³ PHP è¯­å¥ç»„æˆã€‚å®é™…ä¸Š say è§†å›¾å°±æ˜¯ä¸€ä¸ªç”± yii\web\Controller::render() æ‰§è¡Œçš„ PHP è„šæœ¬ã€‚ è§†å›¾è„šæœ¬è¾“å‡ºçš„å†…å®¹å°†ä¼šä½œä¸ºå“åº”ç»“æœè¿”å›ç»™åº”ç”¨ã€‚åº”ç”¨å°†ä¾æ¬¡è¾“å‡ºç»“æœç»™æœ€ç»ˆç”¨æˆ·ã€‚
è¯•è¿è¡Œåˆ›å»ºå®ŒåŠ¨ä½œå’Œè§†å›¾åï¼Œä½ å°±å¯ä»¥é€šè¿‡ä¸‹é¢çš„ URL è®¿é—®æ–°é¡µé¢äº†ï¼šhttp://localhost/basic/web/index.php?r=site/say&amp;message=helloworld
è·¯ç”±æ§åˆ¶URLç¾åŒ–ä»ä¸Šé¢çš„helloworldä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çœ‹å‡ºï¼Œè®¿é—®çš„URLåˆ†æˆå‡ ä¸ªéƒ¨åˆ†ï¼š

è¡¨ç¤ºä¸»æœºä¿¡æ¯çš„ http://localhost/basic/web/
è¡¨ç¤ºå…¥å£è„šæœ¬çš„ index.php
è¡¨ç¤ºè·¯ç”±çš„ r=site/say
è¡¨ç¤ºæ™®é€šå‚æ•°çš„ message=helloworld

è¯¥URLï¼Œå¦‚æœå˜å½¢æˆ http://localhost/basic/web/index.php/site/say?message=helloworld ï¼Œæ˜¯ä¸æ˜¯å¥½çœ‹å¾ˆå¤šï¼Ÿ
è¯¥URLï¼Œå¦‚æœå˜å½¢æˆ http://localhost/basic/web/site/say?message=helloworld ï¼Œæ˜¯ä¸æ˜¯æ›´å¥½çœ‹ï¼Ÿ
è¯¥URLï¼Œå¦‚æœå˜å½¢æˆ http://localhost/basic/web/say?message=helloworld ï¼Œæ˜¯ä¸æ˜¯æ›´å¥½çœ‹ï¼Ÿ
è¯¥URLï¼Œå¦‚æœå˜å½¢æˆ http://localhost/basic/web/say/helloworld ï¼Œæ˜¯ä¸æ˜¯æ›´å¥½çœ‹ï¼Ÿ
Yiiæœ‰ä¸“é—¨çš„ yii\web\UrlManager æ¥è¿›è¡Œå¤„ç†ï¼Œå…¶ä¸­ï¼š

éšè—å…¥å£è„šæœ¬å¯ä»¥é€šè¿‡ yii\web\UrlManager::showScriptName = false æ¥å®ç°
è·¯ç”±çš„è·¯å¾„åŒ–å¯ä»¥é€šè¿‡ yii\web\UrlManager::enablePrettyUrl = true æ¥å®ç°
å‚æ•°çš„è·¯å¾„åŒ–å¯ä»¥é€šè¿‡è·¯ç”±è§„åˆ™æ¥å®ç°
åŠ å…¥å‡åç¼€(fake suffix) .html å¯ä»¥é€šè¿‡ yii\web\UrlManager::suffix = &#39;.html&#39; æ¥å®ç°

è·¯ç”±è§„åˆ™è·¯ç”±è§„åˆ™æ˜¯æŒ‡ urlManager ç”¨äºè§£æè¯·æ±‚æˆ–ç”ŸæˆURLçš„è§„åˆ™ã€‚
1ã€æ‰“å¼€basic/config/web.phpï¼Œæ‰¾åˆ°urlManagerï¼Œå–æ¶ˆæ³¨é‡Šã€‚
&#x27;urlManager&#x27; =&gt; [    &#x27;enablePrettyUrl&#x27; =&gt; true,    &#x27;showScriptName&#x27; =&gt; false,    &#x27;rules&#x27; =&gt; [    ],],

è¿™æ—¶ï¼Œhttp://localhost/basic/web/index.php/site/say?message=helloworld å°±å¯ä»¥ä½¿ç”¨äº†ã€‚
2ã€æ‰¾åˆ°apacheçš„é…ç½®æ–‡ä»¶httpd.confï¼Œå»æ‰å»æ‰rewriteå‰çš„#ã€‚
LoadModule rewrite_module modules/mod_rewrite.so

3ã€åœ¨index.phpæ‰€åœ¨ç›®å½•ï¼Œæ·»åŠ .htaccessæ–‡ä»¶ï¼ˆä¸æ·»åŠ è¯¥æ–‡ä»¶ä¹Ÿå¯ä»¥ï¼‰ã€‚
Options +FollowSymLinks  IndexIgnore */*  RewriteEngine on  # if a directory or a file exists, use it directly  RewriteCond %&#123;REQUEST_FILENAME&#125; !-f  RewriteCond %&#123;REQUEST_FILENAME&#125; !-d# otherwise forward it to index.php  RewriteRule . index.php

è¿™æ—¶ï¼Œhttp://localhost/basic/web/site/say?message=helloworld å°±å¯ä»¥ä½¿ç”¨äº†ã€‚
4ã€æ‰“å¼€basic/config/web.phpï¼Œä¿®æ”¹rulesã€‚
&#x27;urlManager&#x27; =&gt; [    &#x27;enablePrettyUrl&#x27; =&gt; true,    &#x27;showScriptName&#x27; =&gt; false,    &#x27;rules&#x27; =&gt; [        &#x27;say&#x27; =&gt; &#x27;site/say&#x27;    ],],

è¿™æ—¶ï¼Œhttp://localhost/basic/web/say?message=helloworld å°±å¯ä»¥ä½¿ç”¨äº†ã€‚
5ã€ç»§ç»­ä¿®æ”¹rulesã€‚
&#x27;urlManager&#x27; =&gt; [    &#x27;enablePrettyUrl&#x27; =&gt; true,    &#x27;showScriptName&#x27; =&gt; false,    &#x27;rules&#x27; =&gt; [        &#x27;say&#x27; =&gt; &#x27;site/say&#x27;,        &#x27;say/&lt;message:\w+&gt;&#x27;=&gt;&#x27;site/say&#x27;    ],],

è¿™æ—¶ï¼Œ http://localhost/basic/web/say/helloworld å°±å¯ä»¥ä½¿ç”¨äº†ã€‚
æ¨¡æ¿æ¸²æŸ“é»˜è®¤æ¨¡æ¿å¼•æ“1ã€åœ¨controllers/SiteController.phpä¸­æ·»åŠ å‡½æ•°ï¼š
public function actionTemplate()&#123;    $data = &#x27;æµ‹è¯•æ•°æ®&#x27;;    $dataArr = array(        array(&#x27;name&#x27;=&gt;&#x27;éƒé”¦&#x27;,&#x27;age&#x27;=&gt;&#x27;24&#x27;),        array(&#x27;name&#x27;=&gt;&#x27;å°å¸…&#x27;,&#x27;age&#x27;=&gt;&#x27;22&#x27;),        array(&#x27;name&#x27;=&gt;&#x27;å°é£&#x27;,&#x27;age&#x27;=&gt;&#x27;22&#x27;)    );    $dataObj = new userInfo();    return $this-&gt;render(&#x27;template&#x27;,         [&#x27;data&#x27; =&gt; $data,        &#x27;dataArr&#x27; =&gt; $dataArr,        &#x27;dataObj&#x27; =&gt; $dataObj        ]);&#125;

2ã€åŒæ—¶ï¼Œåœ¨æ–‡ä»¶æœ€åæ·»åŠ ä¸€ä¸ªuserInfoç±»ï¼š
class userInfo&#123;    public $name = &#x27;éƒé”¦&#x27;;    public $age = &#x27;24&#x27;;    function show()&#123;        echo &#x27;ä¸€ä¸ªå‡½æ•°&#x27;;    &#125;&#125;

3ã€åœ¨views/siteä¸­æ·»åŠ template.phpï¼š
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;Template&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;h1&gt;æ¨¡æ¿&lt;/h1&gt;    &lt;p&gt;&lt;?php echo $data; ?&gt;&lt;/p&gt;    &lt;p&gt;&lt;?php echo $dataObj-&gt;name; ?&gt;&lt;/p&gt;    &lt;p&gt;&lt;?php echo $dataObj-&gt;age; ?&gt;&lt;/p&gt;    &lt;p&gt;        &lt;?php             foreach ($dataArr as $value) &#123;                echo $value[&#x27;name&#x27;];                echo $value[&#x27;age&#x27;];            &#125;        ?&gt;    &lt;/p&gt;&lt;/body&gt;&lt;/html&gt;

4ã€æµ‹è¯•è®¿é—®urlï¼š http://localhost/basic/web/site/template
smartyä¸Šé¢çš„æ¸²æŸ“ä¸­ï¼Œæˆ‘ä»¬å‘ç°ï¼Œtemplate.phpä¸­çš„å†™æ³•ä¸å‹å¥½ã€‚å› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼ŒYii ä½¿ç”¨ PHP ä½œä¸ºå…¶é»˜è®¤çš„æ¨¡æ¿å¼•æ“è¯­è¨€ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½® Yii ä»¥æ‰©å±•çš„æ–¹å¼æ”¯æŒå…¶ä»–çš„æ¸²æŸ“å¼•æ“ï¼Œ æ¯”å¦‚ Twig æˆ– Smartyç­‰ã€‚ä¸‹é¢æˆ‘ä»¬æŠŠæ¨¡æ¿å¼•æ“æ¢æˆsmartyã€‚
1ã€ä¸‹è½½å®‰è£…Composerã€‚
2ã€åœ¨basicç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤composer require --prefer-dist yiisoft/yii2-smartyï¼Œå®‰è£…smartyæ’ä»¶ã€‚
å¦‚æœæç¤ºè¾“å…¥tokenï¼Œè§£å†³åŠæ³•ä¸ºï¼šè¿›å…¥ https://github.com/settings/tokens ç‚¹å‡» ã€ŒGenerate new tokenã€ æ–°å»ºä¸€ä¸ª Tokenï¼Œé€‰æ‹©é»˜è®¤æ–°å»ºå°±è¡Œï¼Œç„¶åå°±ä¼šå¾—åˆ°ä¸€ä¸ª Tokenï¼Œç„¶åè¾“å…¥è¿™ä¸ªå€¼å°± OK äº†ã€‚
3ã€æ‰“å¼€basic/config/web.phpï¼Œæ‰¾åˆ°componentsï¼Œæ·»åŠ ä½¿ç”¨smartyï¼š
&#x27;components&#x27; =&gt; [    // other settings    &#x27;view&#x27; =&gt; [        &#x27;renderers&#x27; =&gt; [            &#x27;tpl&#x27; =&gt; [                &#x27;class&#x27; =&gt; &#x27;yii\smarty\ViewRenderer&#x27;,                //&#x27;cachePath&#x27; =&gt; &#x27;@runtime/Smarty/cache&#x27;,            ],        ],    ],],

4ã€ä¿®æ”¹actionTemplateä¸ºï¼š
public function actionTemplate()&#123;    $data = &#x27;æµ‹è¯•æ•°æ®&#x27;;    $dataArr = array(        array(&#x27;name&#x27;=&gt;&#x27;éƒé”¦&#x27;,&#x27;age&#x27;=&gt;&#x27;24&#x27;),        array(&#x27;name&#x27;=&gt;&#x27;å°å¸…&#x27;,&#x27;age&#x27;=&gt;&#x27;22&#x27;),        array(&#x27;name&#x27;=&gt;&#x27;å°é£&#x27;,&#x27;age&#x27;=&gt;&#x27;22&#x27;)    );    $dataObj = new userInfo();    return $this-&gt;render(&#x27;template.tpl&#x27;,         [&#x27;data&#x27; =&gt; $data,        &#x27;dataArr&#x27; =&gt; $dataArr,        &#x27;dataObj&#x27; =&gt; $dataObj        ]);&#125;

5ã€åœ¨views/siteä¸­æ·»åŠ template.tplï¼š
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;Template&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;h1&gt;æ¨¡æ¿&lt;/h1&gt;    &lt;p&gt;&#123;$data&#125;&lt;/p&gt;    &lt;p&gt;&#123;$dataObj-&gt;name&#125;&lt;/p&gt;    &lt;p&gt;&#123;$dataObj-&gt;age&#125;&lt;/p&gt;    &lt;p&gt;        &#123;foreach from=$dataArr key=mykey item=$value&#125;            &#123;$value.name&#125;&amp;nbsp;&#123;$value.age&#125;        &#123;/foreach&#125;    &lt;/p&gt;&lt;/body&gt;&lt;/html&gt;

6ã€æµ‹è¯•è®¿é—®urlï¼š http://localhost/basic/web/site/template
å¢åˆ æ”¹æŸ¥æ•°æ®åº“é…ç½®åˆ©ç”¨navicatç­‰å·¥å…·è¿æ¥åˆ°æœ¬åœ°mysqlæ•°æ®åº“ï¼Œåˆ›å»ºæ•°æ®åº“basicï¼Œåœ¨æ•°æ®åº“ä¸­åˆ›å»ºè¡¨bas_project(int id, varchar title, varchar content)ã€‚æ³¨æ„ï¼Œç¼–ç æ ¼å¼é€‰æ‹©utf8ã€‚
è¿æ¥é…ç½®æ‰“å¼€basic/config/db.phpï¼Œä¿®æ”¹å†…å®¹å¦‚ä¸‹ï¼š
&lt;?phpreturn [    &#x27;class&#x27; =&gt; &#x27;yii\db\Connection&#x27;,    &#x27;dsn&#x27; =&gt; &#x27;mysql:host=localhost;dbname=basic&#x27;,    &#x27;username&#x27; =&gt; &#x27;root&#x27;,    &#x27;password&#x27; =&gt; &#x27;&#x27;,    &#x27;charset&#x27; =&gt; &#x27;utf8&#x27;,    &#x27;tablePrefix&#x27; =&gt; &#x27;bas_&#x27;,];

æ–°å»ºmodelåœ¨basic/modelsä¸‹ï¼Œæ–°å»ºProject.phpï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?phpnamespace app\models;use yii\db\ActiveRecord;/** * Project model */class Project extends ActiveRecord&#123;    public static function model($className=__CLASS__)    &#123;        return parent::model($className);    &#125;&#125;

æ–°å»ºControlleråœ¨basic/controllersä¸‹ï¼Œæ–°å»ºProjectController.phpï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?phpnamespace app\controllers;use Yii;use yii\filters\AccessControl;use yii\web\Controller;use yii\filters\VerbFilter;use app\models\LoginForm;use app\models\ContactForm;use app\models\Project;class ProjectController extends Controller&#123;    public function actionAdd($title, $content)&#123;        $project = new Project();        $project-&gt;title = $title;        $project-&gt;content = $content;         $success = $project-&gt;save();        if($success)&#123;            $result = array(                &#x27;code&#x27; =&gt; &#x27;0&#x27;,                &#x27;ext&#x27; =&gt; &#x27;success&#x27;            );            echo json_encode($result,JSON_UNESCAPED_UNICODE);        &#125;    &#125;    public function actionEdit($id, $title, $content)&#123;        $project = Project::find()-&gt;where([&#x27;id&#x27;=&gt;$id])-&gt;one();        $project-&gt;title = $title;        $project-&gt;content = $content;        $success = $project-&gt;save();        if($success)&#123;            $result = array(                &#x27;code&#x27;=&gt; &#x27;0&#x27;,                &#x27;ext&#x27;=&gt; &#x27;success&#x27;            );            echo json_encode($result,JSON_UNESCAPED_UNICODE);        &#125;else &#123;            $result = array(                &#x27;code&#x27;=&gt; &#x27;1&#x27;,                &#x27;ext&#x27;=&gt; &#x27;fail&#x27;            );            echo json_encode($result,JSON_UNESCAPED_UNICODE);        &#125;    &#125;    public function actionDelete($id)&#123;        $project = Project::find()-&gt;where([&#x27;id&#x27;=&gt;$id])-&gt;one();        $success = $project-&gt;delete();        if($success)&#123;            $result = array(                &#x27;code&#x27;=&gt; &#x27;0&#x27;,                &#x27;ext&#x27;=&gt; &#x27;success&#x27;            );            echo json_encode($result);        &#125;else &#123;            $result = array(                &#x27;code&#x27;=&gt; &#x27;1&#x27;,                &#x27;ext&#x27;=&gt; &#x27;fail&#x27;            );            echo json_encode($result);        &#125;    &#125;    public function actionList()&#123;        $projectList = Project::find()-&gt;asArray()-&gt;all();        $result = array(                &#x27;code&#x27;=&gt; &#x27;0&#x27;,                &#x27;ext&#x27;=&gt; &#x27;success&#x27;,                &#x27;projectList&#x27; =&gt; $projectList        );        echo json_encode($result,JSON_UNESCAPED_UNICODE);    &#125;    public function actionPage($pageSize,$pageNum)&#123;        $project = new Project();        $total = $project-&gt;find()-&gt;count();        $totalPage = $total%$pageSize ? (int)($total/$pageSize)+1 : (int)($total/$pageSize);        $projectList = $project-&gt;find()-&gt;offset(($pageNum-1)*$pageSize)-&gt;limit($pageSize)-&gt;asArray()-&gt;all();                if($projectList)&#123;            $resultArr = array(                &#x27;totalPage&#x27;=&gt; $totalPage,                &#x27;pageNum&#x27;=&gt; $pageNum,                &#x27;projectList&#x27;=&gt; $projectList            );            $result = array(                &#x27;code&#x27;=&gt; &#x27;0&#x27;,                &#x27;ext&#x27;=&gt; &#x27;success&#x27;,                &#x27;obj&#x27;=&gt; $resultArr            );            echo json_encode($result,JSON_UNESCAPED_UNICODE);        &#125;    &#125;    public function actionFind($id)&#123;        $project = new Project();        $item = $project-&gt;find()-&gt;where([&#x27;id&#x27;=&gt;$id])-&gt;asArray()-&gt;one();        $result = array(            &#x27;code&#x27;=&gt; &#x27;0&#x27;,            &#x27;ext&#x27;=&gt; &#x27;success&#x27;,            &#x27;obj&#x27;=&gt; $item        );        echo json_encode($result,JSON_UNESCAPED_UNICODE);    &#125;&#125;

æµ‹è¯•æ¥å£1ã€æ·»åŠ ï¼šhttp://localhost/basic/web/project/add?title=voidking-title&amp;content=voidking-content
2ã€ä¿®æ”¹ï¼šhttp://localhost/basic/web/project/edit?id=1&amp;title=voidking-title&amp;content=voidking-content
3ã€æŸ¥æ‰¾å…¨éƒ¨ï¼šhttp://localhost/basic/web/project/list
4ã€æŸ¥æ‰¾ä¸€é¡µï¼šhttp://localhost/basic/web/project/page?pageSize=10&amp;pageNum=1
5ã€æŸ¥æ‰¾ä¸€æ¡ï¼šhttp://localhost/basic/web/project/find?id=1
6ã€åˆ é™¤ï¼šhttp://localhost/basic/web/project/delete?id=1
è·¯ç”±æ§åˆ¶ã€æ¨¡æ¿æ¸²æŸ“ã€å¢åˆ æ”¹æŸ¥ï¼Œè‡³æ­¤å…¨éƒ¨è·‘é€šï¼Œå¯ä»¥è¿›è¡Œç®€å•çš„å¼€å‘äº†ã€‚è‡³äºyiiæ¡†æ¶æä¾›çš„å…¶ä»–æ›´åŠ å¼ºå¤§çš„åŠŸèƒ½ï¼Œåœ¨éœ€è¦æ—¶æŸ¥æŸ¥æ–‡æ¡£å°±å¥½ã€‚
æºç åˆ†äº«1ã€ä¸‹è½½å®‰è£…ï¼šgit clone https://github.com/voidking/yii-basic.git basic
2ã€åˆ©ç”¨navicatç­‰å·¥å…·è¿æ¥åˆ°æœ¬åœ°mysqlæ•°æ®åº“ï¼Œåˆ›å»ºæ•°æ®åº“basicï¼Œåœ¨æ•°æ®åº“ä¸­åˆ›å»ºè¡¨bas_project(int id, varchar title, varchar content)ã€‚æ³¨æ„ï¼Œç¼–ç æ ¼å¼é€‰æ‹©utf8ã€‚
ä¹¦ç­¾Yii Frameworkä¸­æ–‡ç¤¾åŒº
ä¸‹è½½å®‰è£…Yii
Yii 2.0 æƒå¨æŒ‡å— 
URL Management(ç½‘å€ç®¡ç†)
Yii2.0æ•°æ®åº“æ“ä½œå¢åˆ æ”¹æŸ¥è¯¦è§£
ActiveRecord
]]></content>
      <categories>
        <category>engineering</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>yii</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨aria2ç¦»çº¿ä¸‹è½½</title>
    <url>/hobby-aria2-download/</url>
    <content><![CDATA[å‰è¨€è¿…é›·ã€æ—‹é£ã€ç™¾åº¦äº‘ç›˜ç­‰ä¸‹è½½å·¥å…·ï¼ŒéVIPæœ‰é™é€Ÿï¼ŒVIPæœ‰èµ„æºä¸‹è½½é™åˆ¶ã€‚åœ¨çº¿äº‘æ’­ï¼Œå¹¿å‘Šç¹å¤šï¼Œç¼“å­˜æ…¢ï¼Œå¦‚ä»Šæ›´æ˜¯è¢«å°äº†99%ã€‚
éƒåŒå­¦åœ¨çŸ¥ä¹æ‰¾åˆ°äº†ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼šaria2ã€‚aria2 + aria2webuiå®Œæˆä¸‹è½½ï¼Œembyæˆ–plexå®Œæˆä¸‹è½½åæ’­æ”¾åŠŸèƒ½ã€‚
æœ¬æ–‡ï¼Œå°±æ¥ç ”ç©¶ä¸€ä¸‹aria2çš„å®‰è£…éƒ¨ç½²ã€‚


aria2ç®€ä»‹
aria2 is a lightweight multi-protocol &amp; multi-source command-line download utility. It supports HTTP/HTTPS, FTP, SFTP, BitTorrent and Metalink. aria2 can be manipulated via built-in JSON-RPC and XML-RPC interfaces.


aria2å®˜ç½‘
aria2æºç 
aria2ä¸‹è½½åœ°å€

webuiç®€ä»‹aria2webuiåŒ…æ‹¬yaawã€webui-aria2ã€AriaNgç­‰ã€‚
yaaw
YAAW: Yet Another Aria2 Web Frontend in pure HTML/CSS/Javascirpt.No HTTP server, backend or server-side program. All you need is just a browser.


yaawæºç åœ°å€
Aria2 &amp; YAAW å®˜æ–¹ä½¿ç”¨è¯´æ˜
yaawç®¡ç†é¡µé¢
yaawç®¡ç†é¡µé¢2
yaawç®¡ç†é¡µé¢3

webui-aria2
The aim for this project is to create the worlds best and hottest interface to interact with aria2. aria2 is the worlds best file downloader, but sometimes the command line brings more power than necessary. The project was initially created as part of the GSOC scheme, however it has rapidly grown and changed with tremendous support and feedback from the aria2 community.


webui-aria2æºç 
webui-aria2ç®¡ç†é¡µé¢
webui-aria2ç®¡ç†é¡µé¢2

AriaNg
AriaNg is a web frontend making aria2 better. AriaNg is written in pure html &amp; javascript, thus it does not need any compilers or runtime environment. You can just put AriaNg in your web server and open it in your browser. AriaNg uses responsive layout, and supports any desktop or mobile devices.


AriaNgæºç åœ°å€
AriaNgç®¡ç†é¡µé¢

aria2å‘½ä»¤è¡Œaria2å‘½ä»¤è¡Œåœ¨windowså’Œlinuxä¸­é€šç”¨ã€‚
1ã€Download from WEBaria2c -c -s 5 http://example.org/mylinux.iso
å…¶ä¸­-cä»£è¡¨æ–­ç‚¹ç»­ä¼ ï¼Œ-sä»£è¡¨çº¿ç¨‹æ•°ã€‚
2ã€Download from 2 sourcesaria2c http://a/f.iso   ftp://b/f.iso
3ã€Download using 2 connections per hostaria2c -x2 http://a/f.iso
4ã€BitTorrent Magnet URIaria2c &#39;magnet:?xt=urn:btih:248D0A1CD08284299DE78D5C1ED359BB46717D8C&#39;
5ã€Metalinkaria2c http://example.org/mylinux.metalink
6ã€Download URIs found in text filearia2c -i uris.txt
7ã€BTaria2c /tmp/CentOS-6.3-i386-bin-DVD1to2.torrent
aria2c http://mirrors.163.com/centos/6.6/isos/x86_64/CentOS-6.6-x86_64-minimal.torrent
æ³¨æ„ï¼šå½“æºåœ°å€å­˜åœ¨è¯¸å¦‚ &amp;, * ç­‰ shell çš„ç‰¹æ®Šå­—ç¬¦ï¼Œè¯·ä½¿ç”¨å•å¼•å·æˆ–åŒå¼•å·æŠŠ URI åŒ…å«èµ·æ¥ã€‚
windowså®‰è£…ä½¿ç”¨aria2å®‰è£…aria21ã€è®¿é—®aria2é¡¹ç›®ï¼Œä¸‹è½½æœ€æ–°çš„aria2ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸‹è½½aria2-1.34.0-win-64bit-build1.zipã€‚
2ã€è§£å‹aria2-1.34.0-win-64bit-build1.zipï¼Œå¹¶ä¸”é‡å‘½åä¸ºaria2ï¼Œæœ€ç»ˆè·¯å¾„ä¸ºD:\develop\aria2ã€‚
é…ç½®aria2å‚è€ƒaria2 Online Manualå’ŒWindowsé…ç½®Aria2åŠWebç®¡ç†é¢æ¿æ•™ç¨‹ï¼Œé…ç½®aria2ã€‚
1ã€ä¸‹è½½é…ç½®æ–‡ä»¶git clone https://github.com/voidking/aria2-conf.git
é¡¹ç›®åŒ…å«ä¸¤ä¸ªç›®å½•ï¼Œä¸€ä¸ªæ˜¯windowsï¼Œä¸€ä¸ªæ˜¯centosã€‚windowsç›®å½•ä¸‹åŒ…å«å¦‚ä¸‹æ–‡ä»¶ï¼š

aria2.confï¼Œé…ç½®æ–‡ä»¶
aria2.logï¼Œæ—¥å¿—æ–‡ä»¶
aria2.sessionï¼Œä¸‹è½½å†å²
Start.batï¼Œå¯åŠ¨aria2
Stop.batï¼Œåœæ­¢aria2
Restart.batï¼Œé‡å¯aria2
Start.vbsï¼Œéšè—cmdçª—å£å¯åŠ¨aria2
Status.batï¼ŒæŸ¥çœ‹aria2çŠ¶æ€
Boot.batï¼Œå¼€å¯æˆ–å–æ¶ˆaria2å¼€æœºå¯åŠ¨

2ã€aria2-conf/windowsä¸­çš„å…¨éƒ¨æ–‡ä»¶å¤åˆ¶åˆ°D:\develop\aria2ä¸­ã€‚
3ã€æ ¹æ®éœ€è¦ï¼Œä¿®æ”¹aria2.confæ–‡ä»¶ã€‚
4ã€åŒå‡»Start.batï¼Œå¯åŠ¨aria2æœåŠ¡ã€‚
AriaNgå®‰è£…é…ç½®1ã€è®¿é—®ariangé¡¹ç›®ï¼Œä¸‹è½½æœ€æ–°ç‰ˆçš„ariangï¼Œè¿™é‡Œæˆ‘ä»¬ä¸‹è½½aria-ng-0.4.0.zipã€‚
2ã€è§£å‹aria-ng-0.4.0.zipï¼Œå¹¶ä¸”é‡å‘½åä¸ºariangï¼Œæœ€ç»ˆè·¯å¾„ä¸ºD:\develop\ariangã€‚
3ã€ä¸‹è½½EasyWebSvr.exeï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªä¸‹è½½åœ°å€ï¼Œå¯†ç ä¸º1ey1ã€‚
4ã€åŒå‡»EasyWebSvr.exeï¼Œç‚¹å‡»åº•éƒ¨çš„é”¤å­å›¾æ ‡ï¼Œé€‰æ‹©è®¾ç½®ï¼Œé€‰æ‹©ä¸»ç›®å½•ä¸ºD:\develop\ariangç›®å½•ï¼Œç¡®å®šï¼Œç‚¹å‡»åº•éƒ¨çš„é”¤å­å›¾æ ‡ï¼Œé€‰æ‹©å¯åŠ¨æœåŠ¡å™¨ã€‚
å¦‚æœä¸æƒ³æ­å»ºWebæœåŠ¡å™¨çš„è¯ï¼Œå¯ä»¥è®¿é—®åˆ«äººæ­å»ºçš„AriaNgç®¡ç†é¡µé¢ã€‚
PSï¼šé™¤äº†easywebsvrï¼Œè¿˜å¯ä»¥æŠŠairangæ‰”åˆ°nginxã€apacheæˆ–tomcatç­‰æœåŠ¡å™¨çš„webç›®å½•ä¸‹ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚
5ã€è®¿é—® http://localhost ï¼Œè¿›å…¥Aria2 Webç®¡ç†é¡µé¢ã€‚
6ã€åœ¨Aria2 Webç®¡ç†é¡µé¢ç‚¹å‡»æ–°å»ºï¼Œå¯ä»¥æ·»åŠ HTTPã€FTPã€BTä»»åŠ¡ç­‰ï¼ŒåŒæ—¶æ·»åŠ å¤šä¸ªä»»åŠ¡æ¯è¡Œä¸€ä¸ªURLï¼Œæ·»åŠ é•œåƒURLç”¨ç©ºæ ¼åˆ†å‰²ï¼Œç‚¹å‡»æ–‡ä»¶å¤¹å›¾æ ‡å¯ä»¥æ‰“å¼€ç§å­æ–‡ä»¶ç­‰ã€‚
æ–‡ä»¶é»˜è®¤ä¸‹è½½åˆ°D:\develop\aria2\downloadæ–‡ä»¶å¤¹ï¼Œè¿™æ˜¯åœ¨aria2.confä¸­é…ç½®çš„ã€‚
æ³¨æ„ï¼š

åœ¨Webç®¡ç†é¢æ¿åˆ é™¤ä¸‹è½½ä»»åŠ¡åï¼ŒAria2å¹¶ä¸ä¼šåˆ é™¤ä¸‹è½½æ–‡ä»¶æˆ–è€…ç¼“å­˜ï¼Œéœ€è¦è‡ªå·±å»ä¸‹è½½æ–‡ä»¶å¤¹åˆ é™¤æ‰ã€‚
åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…ï¼Œå…¶ä»–è®¾å¤‡è¾“å…¥å½“å‰è®¾å¤‡IPåœ°å€ï¼Œä¹Ÿå¯ä»¥è®¿é—®Webç®¡ç†ç•Œé¢ï¼Œå¦‚ï¼š192.168.1.2 ã€‚
ç”±äºWebç®¡ç†ç•Œé¢åªæ˜¯ä¸€ä¸ªè°ƒç”¨çš„ä½œç”¨ï¼Œæ‰€ä»¥å³ä½¿æµè§ˆå™¨å…³é—­ä¹Ÿä¸å½±å“Aria2è¿›è¡Œä¸‹è½½ã€‚

centoså®‰è£…é…ç½®aria2yumå®‰è£…aria21ã€æ‰‹åŠ¨å®‰è£…EPELæº
wget http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpmrpm -ivh epel-release-latest-7.noarch.rpmyum repolist //æŸ¥çœ‹æ˜¯å¦æˆåŠŸå®‰è£…epel

2ã€è‡ªåŠ¨å®‰è£…EPELæº
yum install epel-releaseyum repolist

3ã€å®‰è£…aria2yum install aria2
4ã€æŸ¥çœ‹å®‰è£…æƒ…å†µaria2c -v
ç¼–è¯‘å®‰è£…aria21ã€è®¿é—®aria2é¡¹ç›®ï¼Œä¸‹è½½æœ€æ–°çš„aria2ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸‹è½½aria2-1.34.0.tar.gzã€‚
wget --no-check-certificate --content-disposition https://github.com/aria2/aria2/releases/download/release-1.34.0/aria2-1.34.0.tar.gz
æˆ–è€…ï¼šcurl -LJO https://github.com/aria2/aria2/releases/download/release-1.34.0/aria2-1.34.0.tar.gz
2ã€è§£å‹aria2-1.34.0.tar.gzå¹¶ç¼–è¯‘å®‰è£…ã€‚
mv aria2-1.34.0.tar.gz /optcd /opt/tar -zxvf aria2-1.34.0.tar.gzcd aria2-1.34.0/./configure --enable-bittorrent --enable-metalink  makemake install
é»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šåœ¨/usr/local/bin ç›®å½•åˆ›å»º aria2c å¯æ‰§è¡Œç¨‹åºã€‚
3ã€æŸ¥çœ‹å®‰è£…æƒ…å†µã€‚aria2c -v
é…ç½®aria21ã€ä¸‹è½½é…ç½®æ–‡ä»¶git clone https://github.com/voidking/aria2-conf.git
é¡¹ç›®åŒ…å«ä¸¤ä¸ªç›®å½•ï¼Œä¸€ä¸ªæ˜¯windowsï¼Œä¸€ä¸ªæ˜¯centosã€‚centosç›®å½•ä¸‹åŒ…å«å¦‚ä¸‹æ–‡ä»¶ï¼š

aria2.confï¼Œé…ç½®æ–‡ä»¶
aria2.logï¼Œæ—¥å¿—æ–‡ä»¶
aria2.sessionï¼Œä¸‹è½½å†å²

2ã€ç§»åŠ¨æ–‡ä»¶mkdir -p /data/aria2
cd aria2-conf/centos &amp;&amp; mv ./* /data/aria2/
3ã€å¯åŠ¨æµ‹è¯•aria2c --conf-path=/data/aria2/aria2.conf
4ã€åå°å¯åŠ¨aria2c --conf-path=/data/aria2/aria2.conf -D
AriaNgå®‰è£…ä½¿ç”¨1ã€è®¿é—®ariangé¡¹ç›®ï¼Œä¸‹è½½æœ€æ–°ç‰ˆçš„ariangï¼Œè¿™é‡Œæˆ‘ä»¬ä¸‹è½½aria-ng-0.4.0.zipã€‚curl -LJO https://github.com/mayswind/AriaNg/releases/download/0.4.0/aria-ng-0.4.0.zip
2ã€å‚è€ƒHexoåŠ é€Ÿè®¿é—®ï¼Œåœ¨/opt/wwwç›®å½•ä¸‹åˆ›å»ºaria2ç›®å½•ã€‚
mkdir -p /opt/www/aria2
3ã€ç§»åŠ¨æ–‡ä»¶å¹¶è§£å‹mv aria-ng-0.4.0.zip /opt/www/aria2
cd /opt/www/aria2 &amp;&amp; unzip aria-ng-0.4.0.zip
rm aria-ng-0.4.0.zip
4ã€é…ç½®nginxcd /etc/nginx/conf.d/
vim www.voidking.com.confï¼Œå†…å®¹ä¸ºï¼š
server &#123;    listen 80;    server_name aria2.voidking.com;    location / &#123;        root /opt/www/aria2/;        index index.html;    &#125;&#125;

5ã€é‡å¯nginx/usr/sbin/nginx -s reload
6ã€åœ¨dnsæœåŠ¡å™¨ä¸Šæ·»åŠ aria2ï¼Œè§£æåˆ°centosæœåŠ¡å™¨ipã€‚
7ã€æµ‹è¯•è®¿é—®è®¿é—®åœ°å€ï¼šhttp://aria2.voidking.com
æ— æ³•è¿æ¥é—®é¢˜åœ¨ariangé¡µé¢ï¼Œå¦‚æœå‘ç°æ— æ³•è¿æ¥åˆ°aria2ï¼Œé‚£ä¹ˆå‚ç…§å¦‚ä¸‹æ–¹æ³•è§£å†³ï¼š
æ–¹æ³•ä¸€ï¼šå¼€æ”¾ç«¯å£ï¼ˆæ¨èï¼‰1ã€æŸ¥è¯¢6800ç«¯å£æ˜¯å¦å¼€æ”¾firewall-cmd --query-port=6800/tcp
2ã€æ‰“å¼€6800ç«¯å£firewall-cmd --add-port=6800/tcp
æ–¹æ³•äºŒï¼šå…³é—­é˜²ç«å¢™ï¼ˆä¸æ¨èï¼‰systemctl stop firewalld.service
btä¸‹è½½é—®é¢˜æœ‰äº›btæ–‡ä»¶ï¼Œåœ¨aria2ä¸Šè¿›è¡Œä¸‹è½½ï¼Œå´æ²¡æœ‰é€Ÿåº¦ã€‚å‚è€ƒæ›´æ–°Trackerï¼Œè§£å†³Aria2 BTä¸‹è½½æ— é€Ÿåº¦å’ŒAria2 bt æ²¡é€Ÿåº¦? è¯•è¯•è‡ªåŠ¨æ›´æ–°BT TrackeræœåŠ¡å™¨åˆ—è¡¨çš„æ–¹æ³•ï¼Œè¿›è¡Œé…ç½®ã€‚
1ã€æ–°å»ºaddtrackers.shè„šæœ¬ï¼Œå†…å®¹ä¸º
#!/bin/bashlist=`wget -qO- https://raw.githubusercontent.com/ngosang/trackerslist/master/trackers_all.txt|awk NF|sed &quot;:a;N;s/\n/,/g;ta&quot;`if [ -z &quot;`grep &quot;bt-tracker&quot; /data/aria2/aria2.conf`&quot; ]; then    sed -i &#x27;$a bt-tracker=&#x27;$&#123;list&#125; /data/aria2/aria2.conf    echo add......else    sed -i &quot;s@bt-tracker.*@bt-tracker=$list@g&quot; /data/aria2/aria2.conf    echo update......fi

2ã€æ‰§è¡Œè„šæœ¬chmod +x addtrackers.sh
./addtrackers.sh
3ã€é‡å¯aria2è¿›è¡Œæµ‹è¯•aria2c --conf-path=/data/aria2/aria2.conf
PSï¼šæˆ–è€…ï¼Œç›´æ¥è®¿é—®trackerslisté¡¹ç›®ï¼Œå¤åˆ¶listï¼Œç„¶åæ·»åŠ åˆ°aria2.confæ–‡ä»¶ä¸­ã€‚
ç£åŠ›é“¾ä¸‹è½½é—®é¢˜æ‰€æœ‰ç£åŠ›é“¾åœ¨aria2ä¸Šè¿›è¡Œä¸‹è½½ï¼Œæ²¡æœ‰é€Ÿåº¦ã€‚
åè®°å…³äºembyå’Œplexï¼Œæš‚æ—¶æ²¡æœ‰ç ”ç©¶ã€‚
ä¹¦ç­¾CentOS ä¸‹æ­å»º aria2 è¿œç¨‹ä¸‹è½½ç¯å¢ƒ
CentOS7å®‰è£…Aria2
åœ¨çº¿ç£åŠ›æ’­æ”¾å¼•æ“
DIYä¸€å¥—NAS+ç§æœ‰äº‘ç›˜+ä¸‹è½½æœº
Ubuntu16 ä¸‹è½½è½¯ä»¶Aria2 å…¨å±€é…ç½®æ–¹æ³•(æœ€å…¨ç»„åˆ)
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>computer</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockeréƒ¨ç½²JavaWebé¡¹ç›®</title>
    <url>/dev-docker-deploy-javaweb/</url>
    <content><![CDATA[éƒ¨ç½²è¦æ±‚å®¿ä¸»æœºä¸ºCentOS7ï¼Œä¸Šé¢å®‰è£…äº†dockerã€nginxå’Œmysqlã€‚
1ã€æŠŠå·²ç»å¼€å‘å¥½çš„JavaWebé¡¹ç›®ï¼ˆpandawork-startï¼‰éƒ¨ç½²åˆ°dockerå®¹å™¨é‡Œã€‚2ã€è¯¥JavaWebé¡¹ç›®ä½¿ç”¨å®¿ä¸»æœºçš„mysqlã€‚3ã€å®¹å™¨è®¾ç½®é™æ€ipä¸º192.168.34.10ï¼Œ80ç«¯å£æ˜ å°„ä¸ºå®¿ä¸»æœº28080ç«¯å£ã€‚4ã€nginxé…ç½®å¯ä»¥é€šè¿‡ç½‘å€pandawork.voidking.comè®¿é—®è¯¥JavaWebé¡¹ç›®ã€‚


è½¯ä»¶å‡†å¤‡1ã€ã€ŠDockerå®‰è£…tomcatæœåŠ¡ã€‹ä¸€æ–‡ä¸­é…ç½®å¥½çš„ubuntu/tomcaté•œåƒã€‚
2ã€å‡è®¾å®¿ä¸»æœºä¸­çš„mysqlæ•°æ®åº“å¯†ç ä¸ºvoidkingï¼Œé‚£ä¹ˆéœ€è¦ä¿®æ”¹pandawork-starté¡¹ç›®ä¸­çš„æ•°æ®åº“é…ç½®æ–‡ä»¶ï¼ˆmybatis-config.xmlï¼‰ï¼Œä¸»æœºä¿®æ”¹ä¸º192.168.34.1ï¼Œå¯†ç ä¿®æ”¹ä¸ºvoidkingã€‚
3ã€æ‰“åŒ…JavaWebé¡¹ç›®çš„waråŒ…ä¸€ä»½ã€‚åœ¨pom.xmlæ‰€åœ¨æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œmvn package -Dmaven.test.skip=trueå‘½ä»¤ï¼Œåœ¨targetç›®å½•ä¸‹å°±ä¼šç”ŸæˆwaråŒ…ã€‚ï¼ˆæŠŠè¯¥waråŒ…æ”¾åˆ°tomcatçš„webappsæ–‡ä»¶å¤¹é‡Œï¼Œä¼šè‡ªåŠ¨è§£å‹ã€‚ï¼‰
4ã€ä½¿ç”¨xftpï¼Œä¸Šä¼ waråŒ…åˆ°CentOS7çš„/downloadç›®å½•ä¸‹ã€‚
æ•°æ®åº“å‡†å¤‡1ã€ä½¿ç”¨navicatè¿æ¥åˆ°å®¿ä¸»æœºmysqlã€‚2ã€åˆ›å»ºæ•°æ®åº“pandaworkï¼Œæ•°æ®åº“åä¸ºpandaworkï¼Œå­—ç¬¦é›†é€‰æ‹©utf8â€“UTF-8 Unicodeï¼Œæ’åºè§„åˆ™é€‰æ‹©utf8_general_ciã€‚3ã€å¯¼å…¥pandawork-starté¡¹ç›®ä¸­çš„pandawork.sqlæ–‡ä»¶ã€‚
éƒ¨ç½²é¡¹ç›®éƒ¨ç½²waråŒ…1ã€å¯åŠ¨ubuntu/tomcaté•œåƒã€‚docker run -i -t -v /download/:/mnt/software/ ubuntu/tomcat /bin/bash
2ã€ç§»åŠ¨waråŒ…åˆ°webappsã€‚cd /mnt/software
mv pandawork-start.war /opt/apache-tomcat-8.0.44/webapps/
3ã€å¯åŠ¨tomcatï¼Œè‡ªåŠ¨è§£å‹waråŒ…ã€‚source /etc/profile
cd /opt/apache-tomcat-8.0.44/bin/
./startup.sh
4ã€æµ‹è¯•è®¿é—®ã€‚curl localhost:8080/pandawork-start/hello
5ã€å…³é—­tomcatã€‚./shutdown.sh
tomcaté…ç½®1ã€é…ç½®tomcatç«¯å£ä¸º80ã€‚cd /opt/apache-tomcat-8.0.44/conf/
vi server.xml
æ‰¾åˆ°ï¼š
&lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot;               connectionTimeout=&quot;20000&quot;               redirectPort=&quot;8443&quot; /&gt;
ä¿®æ”¹ä¸ºï¼š
&lt;Connector port=&quot;80&quot; protocol=&quot;HTTP/1.1&quot;               connectionTimeout=&quot;20000&quot;               redirectPort=&quot;8443&quot; /&gt;

2ã€é…ç½®åŸŸåè®¿é—®ã€‚æ‰¾åˆ°ï¼š
&lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;localhost&quot;&gt;
ä¿®æ”¹ä¸ºï¼š
&lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;pandawork.voidking.com&quot;&gt;

æ‰¾åˆ°ï¼š
&lt;Host name=&quot;localhost&quot;  appBase=&quot;webapps&quot;      unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;  &lt;!-- SingleSignOn valve, share authentication between web applications       Documentation at: /docs/config/valve.html --&gt;  &lt;!--  &lt;Valve className=&quot;org.apache.catalina.authenticator.SingleSignOn&quot; /&gt;  --&gt;  &lt;!-- Access log processes all example.       Documentation at: /docs/config/valve.html       Note: The pattern used is equivalent to using pattern=&quot;common&quot; --&gt;  &lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs&quot;         prefix=&quot;localhost_access_log&quot; suffix=&quot;.txt&quot;         pattern=&quot;%h %l %u %t &amp;quot;%r&amp;quot; %s %b&quot; /&gt;&lt;/Host&gt;
ä¿®æ”¹ä¸ºï¼š
&lt;Host name=&quot;pandawork.voidking.com&quot;  appBase=&quot;webapps&quot;      unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;  &lt;Context path=&quot;&quot; docBase=&quot;pandawork-start&quot; reloadable=&quot;true&quot; /&gt;  &lt;!-- SingleSignOn valve, share authentication between web applications       Documentation at: /docs/config/valve.html --&gt;  &lt;!--  &lt;Valve className=&quot;org.apache.catalina.authenticator.SingleSignOn&quot; /&gt;  --&gt;  &lt;!-- Access log processes all example.       Documentation at: /docs/config/valve.html       Note: The pattern used is equivalent to using pattern=&quot;common&quot; --&gt;  &lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs&quot;         prefix=&quot;localhost_access_log&quot; suffix=&quot;.txt&quot;         pattern=&quot;%h %l %u %t &amp;quot;%r&amp;quot; %s %b&quot; /&gt;&lt;/Host&gt;


æµ‹è¯•å¯åŠ¨1ã€å¯åŠ¨tomcatã€‚cd /opt/apache-tomcat-8.0.44/bin/
./startup.sh
2ã€åœ¨/etc/hostsæ–‡ä»¶ä¸­ï¼Œæ·»åŠ 
127.0.0.1       pandawork.voidking.com

3ã€æµ‹è¯•è®¿é—®ã€‚curl pandawork.voidking.com
4ã€å…³é—­tomcatã€‚./shutdown.sh
ä¿å­˜å®¹å™¨1ã€é€€å‡ºå®¹å™¨exit
2ã€æŸ¥çœ‹dockeriddocker ps -l
3ã€ä¿å­˜å®¹å™¨ä¸ºubuntu/pandaworké•œåƒã€‚docker commit 87be ubuntu/pandawork
ç½‘ç»œé…ç½®1ã€åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œï¼Œé€‰å–192.168.34.0ç½‘æ®µã€‚
docker network create --subnet=192.168.34.0/24 voidkingnet

2ã€é€‰å–192.168.34.10ä½œä¸ºé™æ€IPåœ°å€ï¼Œå¯åŠ¨ubuntu/pandaworké•œåƒã€‚
docker run -d -p 28080:80 --name pandawork1.0 --add-host pandawork.voidking.com:127.0.0.1 --net voidkingnet --ip 192.168.34.10 ubuntu/pandawork /run.sh

æˆ‘ä»¬å·²ç»åœ¨å®¹å™¨ä¸­ä¿®æ”¹äº†/etc/hostsæ–‡ä»¶ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦â€“add-hostå‚æ•°ï¼Ÿè¿™æ˜¯å› ä¸ºå®¹å™¨ä¸­çš„hostsæ–‡ä»¶ï¼Œåœ¨é‡å¯åä¼šæ¢å¤åˆå§‹è®¾ç½®ï¼Œæ”¹äº†ä¹Ÿæ²¡ç”¨ã€‚
å®é™…ä¸Šï¼Œåœ¨å®¹å™¨ä¸­é…ç½®tomcatçš„æ—¶å€™ï¼Œå¦‚æœ
&lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;localhost&quot;&gt;

&lt;Host name=&quot;localhost&quot;  appBase=&quot;webapps&quot;      unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;  &lt;Context path=&quot;&quot; docBase=&quot;pandawork-start&quot; reloadable=&quot;true&quot; /&gt;  &lt;!-- SingleSignOn valve, share authentication between web applications       Documentation at: /docs/config/valve.html --&gt;  &lt;!--  &lt;Valve className=&quot;org.apache.catalina.authenticator.SingleSignOn&quot; /&gt;  --&gt;  &lt;!-- Access log processes all example.       Documentation at: /docs/config/valve.html       Note: The pattern used is equivalent to using pattern=&quot;common&quot; --&gt;  &lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs&quot;         prefix=&quot;localhost_access_log&quot; suffix=&quot;.txt&quot;         pattern=&quot;%h %l %u %t &amp;quot;%r&amp;quot; %s %b&quot; /&gt;&lt;/Host&gt;

é‚£ä¹ˆï¼Œâ€“add-hostå‚æ•°ä¸åŠ ä¹Ÿå¯ä»¥ã€‚è²Œä¼¼ç”»è›‡æ·»è¶³ï¼Œå®é™…ä¸Šä¸ç„¶ï¼Œæœ‰äº›é¡¹ç›®å¯ç§»æ¤æ€§æ¯”è¾ƒå·®ï¼Œå¿…é¡»é…ç½®æœ¬åœ°hostsã€‚
3ã€æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ã€‚docker ps
4ã€æµ‹è¯•è®¿é—®ã€‚curl 192.168.34.10æˆ–è€…curl localhost:28080
5ã€å…³é—­å®¹å™¨docker kill pandawork1.0
6ã€å†æ¬¡å¯åŠ¨å®¹å™¨docker start pandawork1.0
nginxé…ç½®1ã€åœ¨å®¿ä¸»æœºä¸­ï¼Œæ‰¾åˆ°nginxå®‰è£…ä½ç½®ps aux | grep nginx
2ã€è¿›å…¥nginxé…ç½®ç›®å½•åœ¨ã€Šåœ¨CentOS7ä¸Šé…ç½®PHPè¿è¡Œç¯å¢ƒã€‹ä¸€æ–‡ä¸­ï¼ŒéƒåŒå­¦çš„nginxæ˜¯é€šè¿‡EZHTTPå®‰è£…çš„ã€‚
cd /usr/local/nginx/confï¼Œè¿›å…¥nginxé…ç½®æ–‡ä»¶ç›®å½•ã€‚cd vhostï¼Œå…·ä½“çš„æŸä¸ªç«™ç‚¹çš„ç›®å½•ï¼Œéƒ½åœ¨vhostç›®å½•ä¸‹ã€‚
3ã€ä¿®æ”¹nginxé…ç½®æ–‡ä»¶å‚ç…§é¡¹ç›®ï¼šhttps://github.com/voidking/nginx-conf ï¼Œåœ¨vhostç›®å½•ä¸‹ï¼Œæ–°å»ºpandawork.voidking.com.confæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
upstream pandawork&#123;    server 192.168.34.10;    #server 192.168.34.11;ç”¨æ¥è´Ÿè½½å‡è¡¡&#125;server&#123;    listen 80;    server_name pandawork.voidking.com;    location / &#123;        proxy_pass http://pandawork;    &#125;&#125;

4ã€é‡æ–°åŠ è½½nginxé…ç½®æ–‡ä»¶cd /usr/local/nginx/sbinï¼Œ./nginx -s reload
æŠ¥é”™ï¼š
nginx: [error] open() &quot;/usr/local/nginx/logs/nginx.pid&quot; failed (2: No such file or directory)

è§£å†³åŠæ³•ï¼š/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf
ç„¶åé‡æ–°æ‰§è¡Œ./nginx -s reloadã€‚
hostsé…ç½®1ã€åœ¨å®¿ä¸»æœºä¸­ï¼Œä¿®æ”¹/etc/hostsæ–‡ä»¶ï¼Œæ·»åŠ ï¼š
127.0.0.1       pandawork.voidking.com

2ã€æµ‹è¯•è®¿é—®ã€‚åœ¨å®¿ä¸»æœºä¸­ï¼Œcurl pandawork.voidking.comã€‚
æœ€ç»ˆæµ‹è¯•1ã€åœ¨å®¿ä¸»æœºä¸­å…³é—­é˜²ç«å¢™ï¼Œsystemctl stop firewalld.serviceã€‚
2ã€å‡è®¾å®¿ä¸»æœºIPä¸º192.168.56.101ï¼Œé‚£ä¹ˆåœ¨å®¿ä¸»æœºåŒå±€åŸŸç½‘PCä¸­é…ç½®hostsï¼š
192.168.56.101    pandawork.voidking.com

3ã€æµè§ˆå™¨ä¸­è¾“å…¥http://pandawork.voidking.comï¼Œçœ‹åˆ°â€œHello World!â€ã€‚
4ã€éªŒè¯æ³¨å†Œç™»å½•ç­‰åŠŸèƒ½ï¼Œå…¨éƒ¨æ­£å¸¸ã€‚æ­¤æ¬¡ï¼Œå¤§åŠŸå‘Šæˆã€‚
é‡å¯å®¿ä¸»æœºåæŠ¥é”™é‡æ–°å¯åŠ¨å®¿ä¸»æœºåï¼Œå¯åŠ¨dockerï¼Œå¯åŠ¨pandaworkå®¹å™¨ã€‚æ‰§è¡Œdocker start pandawork1.0æ—¶ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š
Error response from daemon: driver failed programming external connectivity on endpoint pandawork1.0 (9f3cbc9ebc5030c0cbbbbbac81628ce48374fd392f6995f4d75ac20bce9d2a30):  (iptables failed: iptables --wait -t nat -A DOCKER -p tcp -d 0/0 --dport 28080 -j DNAT --to-destination 192.168.34.10:80 ! -i br-024154a13bb1: iptables: No chain/target/match by that name. (exit status 1))

è§£å†³åŠæ³•ï¼špkill docker
iptables -t nat -F
ifconfig docker0 down
æœ€åé‡å¯dockerï¼Œdocker restart dockerã€‚
ä¹¦ç­¾Dockeréƒ¨ç½²JavaWebé¡¹ç›®å®æˆ˜
ä½¿ç”¨ Docker æ­å»º Java Web è¿è¡Œç¯å¢ƒ
è§£å†³dockerå®¹å™¨ä¸­æ–‡ä¹±ç ï¼Œä¿®æ”¹dockerå®¹å™¨ç¼–ç æ ¼å¼
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>nginx</tag>
        <tag>docker</tag>
        <tag>ubuntu</tag>
        <tag>tomcat</tag>
        <tag>centos</tag>
        <tag>jdk</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockerå®‰è£…tomcatæœåŠ¡</title>
    <url>/dev-docker-ubuntu-tomcat/</url>
    <content><![CDATA[éƒ¨ç½²è¦æ±‚å®¿ä¸»æœºä¸ºCentOS7ï¼Œä¸Šé¢å®‰è£…äº†dockerã€‚
1ã€dockeré•œåƒé€‰æ‹©ubuntuï¼Œåœ¨ubuntuä¸­å®‰è£…tomcatã€‚2ã€å®¹å™¨8080ç«¯å£æ˜ å°„ä¸ºå®¿ä¸»æœº18080ç«¯å£ã€‚


è½¯ä»¶å‡†å¤‡1ã€ubuntuä¸‹å¯ä»¥ä½¿ç”¨çš„jdkä¸€ä»½ï¼Œjdk-8u131-linux-x64.tar.gzã€‚ä¸‹è½½åœ°å€ï¼šhttp://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html
2ã€ubuntuä¸‹å¯ä»¥ä½¿ç”¨çš„tomcatä¸€ä»½ï¼Œapache-tomcat-8.0.44.tar.gzã€‚ä¸‹è½½åœ°å€ï¼šhttp://tomcat.apache.org/download-80.cgi
3ã€ä½¿ç”¨xftpï¼Œä¸Šä¼ jdkå’Œtomcatåˆ°CentOS7çš„/downloadç›®å½•ä¸‹ã€‚
dockerå‡†å¤‡ä¸‹è½½é•œåƒdocker search ubuntu
docker pull ubuntu
docker images
å¯åŠ¨é•œåƒå‡è®¾æˆ‘ä»¬çš„æ‰€æœ‰å®‰è£…ç¨‹åºéƒ½æ”¾åœ¨äº†å®¿ä¸»æœºçš„/downloadç›®å½•ä¸‹ï¼Œç°åœ¨éœ€è¦å°†å…¶æŒ‚è½½åˆ°å®¹å™¨çš„/mnt/softwareç›®å½•ä¸‹ã€‚
docker run -i -t -v /download/:/mnt/software/ ubuntu /bin/bash
æ³¨æ„ï¼Œä¸Šé¢çš„ubuntuä¹Ÿå¯ä»¥æ¢æˆubuntuçš„é•œåƒIDã€‚

-iï¼šè¡¨ç¤ºä»¥â€œäº¤äº’æ¨¡å¼â€è¿è¡Œå®¹å™¨ã€‚
-tï¼šè¡¨ç¤ºå®¹å™¨å¯åŠ¨åä¼šè¿›å…¥å…¶å‘½ä»¤è¡Œã€‚  
-vï¼šè¡¨ç¤ºéœ€è¦å°†æœ¬åœ°å“ªä¸ªç›®å½•æŒ‚è½½åˆ°å®¹å™¨ä¸­ï¼Œæ ¼å¼ï¼š-v &lt;å®¿ä¸»æœºç›®å½•&gt;:&lt;å®¹å™¨ç›®å½•&gt; ã€‚

å¯åŠ¨å®¹å™¨é€€å‡ºå®¹å™¨åï¼Œå¯ä»¥å†æ¬¡å¯åŠ¨å®¹å™¨ï¼ˆä½¿ç”¨å®¹å™¨IDæˆ–å®¹å™¨NAMESï¼‰ã€‚docker ps -l
docker start 87be
æ³¨æ„ï¼Œå…ˆè¿è¡Œdocker runï¼Œç„¶åè¢«stopæ‰çš„å®¹å™¨æ‰å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„å‘½ä»¤ã€‚
ä¸Šé¢çš„å‘½ä»¤ä¸èƒ½è¿›å…¥å®¹å™¨ï¼Œè¦è¿›å…¥å®¹å™¨è¿˜éœ€è¦ä½¿ç”¨ï¼šdocker attach 87be
å®‰è£…jdk1ã€è¿›å…¥å®¹å™¨ç¯å¢ƒã€‚
2ã€æ›´æ–°vimï¼Œå¦åˆ™ä¸Šä¸‹å·¦å³å’Œé€€æ ¼é”®æ— æ³•ä½¿ç”¨ã€‚apt-get update
apt-get remove vim-common
apt-get install vim
3ã€è¿›å…¥jdkæ‰€åœ¨ç›®å½•cd /mnt/software
ç„¶åå‚è€ƒã€Šå…¨å¹³å°å®‰è£…JDKã€‹ï¼Œå®Œæˆå‰©ä¸‹çš„é…ç½®ã€‚
å®‰è£…tomcat1ã€è¿›å…¥å®¹å™¨ç¯å¢ƒã€‚
2ã€è§£å‹tomcatåˆ°/optç›®å½•ã€‚cd /mnt/software
tar zxvf apache-tomcat-8.0.44.tar.gz -C /opt
3ã€å¯åŠ¨tomcatã€‚cd /opt/apache-tomcat-8.0.44/bin/
./startup.sh
4ã€æµ‹è¯•è®¿é—®ã€‚apt-get install curl
curl localhost:8080
5ã€å…³é—­tomcatã€‚./shutdown.sh
ç¼–å†™å¯åŠ¨è„šæœ¬1ã€è¿›å…¥æ ¹ç›®å½•ï¼Œæ–°å»ºrun.shæ–‡ä»¶ã€‚cd /
vim run.sh
2ã€ç¼–è¾‘run.shå†…å®¹ä¸ºï¼š
#!/bin/shexport JAVA_HOME=/usr/lib/jvm/jdk1.8.0_131export JRE_HOME=$JAVA_HOME/jreexport CLASSPATH=$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATHexport PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATHsh /opt/apache-tomcat-8.0.44/bin/catalina.sh run

æ³¨æ„ï¼šrun.shä¸­çš„å¯åŠ¨è„šæœ¬ä¸å¯ä»¥å†™ä¸ºï¼š
sh /opt/apache-tomcat-8.0.44/bin/startup.sh run

å¦‚æœè¿™ä¹ˆå†™çš„è¯ï¼Œåœ¨ä½¿ç”¨docker runçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨é€€å‡ºã€‚
å› ä¸ºæƒ³è¦Dockerå®¹å™¨åå°è¿è¡Œï¼Œå°±å¿…é¡»æœ‰ä¸€ä¸ªå‰å°è¿›ç¨‹ã€‚å®¹å™¨è¿è¡Œçš„å‘½ä»¤å¦‚æœä¸æ˜¯é‚£äº›ä¸€ç›´æŒ‚èµ·çš„å‘½ä»¤ï¼ˆæ¯”å¦‚è¿è¡Œtopï¼Œtailï¼‰ï¼Œå°±æ˜¯ä¼šè‡ªåŠ¨é€€å‡ºçš„ã€‚
3ã€æ›´æ”¹run.shæƒé™chmod 777 run.sh
4ã€æµ‹è¯•è®¿é—®ã€‚./run.sh
curl localhost:8080
ä¿å­˜å®¹å™¨1ã€é€€å‡ºå®¹å™¨exit
2ã€æŸ¥çœ‹dockeriddocker ps -l
3ã€ä¿å­˜å®¹å™¨ä¸ºubuntu/tomcaté•œåƒã€‚docker commit 87be ubuntu/tomcat
å¯åŠ¨é•œåƒ1ã€å¯åŠ¨ubuntu/tomcaté•œåƒdocker run -d -p 18080:8080 --name tomcat8.0 ubuntu/tomcat /run.sh

-dï¼šè¡¨ç¤ºä»¥å®ˆæŠ¤æ¨¡å¼æ‰§è¡Œ/run.shè„šæœ¬ï¼Œæ­¤æ—¶ Tomcat æ§åˆ¶å°ä¸ä¼šå‡ºç°åœ¨è¾“å‡ºç»ˆç«¯ä¸Šã€‚  
-pï¼šè¡¨ç¤ºå®¿ä¸»æœºä¸å®¹å™¨çš„ç«¯å£æ˜ å°„ï¼Œæ­¤æ—¶å°†å®¹å™¨å†…éƒ¨çš„ 8080 ç«¯å£æ˜ å°„ä¸ºå®¿ä¸»æœºçš„ 18080 ç«¯å£ã€‚  
â€“nameï¼šè¡¨ç¤ºå®¹å™¨åç§°ï¼Œç”¨ä¸€ä¸ªæœ‰æ„ä¹‰çš„åç§°å‘½åå³å¯ã€‚  

2ã€æŸ¥çœ‹å®¹å™¨è¿è¡ŒçŠ¶æ€docker ps
3ã€å…³é—­å®¹å™¨docker kill tomcat8.0 æˆ–è€… docker stop tomcat8.0
4ã€å†æ¬¡å¯åŠ¨å®¹å™¨docker start tomcat8.0
5ã€æµ‹è¯•è®¿é—®åœ¨å®¿ä¸»æœºä¸­ï¼Œæ‰§è¡Œå‘½ä»¤ curl localhost:18080ã€‚
æˆ–è€…ï¼ŒæŸ¥åˆ°å®¹å™¨IPåï¼Œæ‰§è¡Œå‘½ä»¤ curl &lt;å®¹å™¨IP&gt;:8080ã€‚
æˆ–è€…ï¼Œåœ¨å®¿ä¸»æœºä¸­å…³é—­é˜²ç«å¢™ï¼Œsystemctl stop firewalld.serviceã€‚ç„¶åï¼Œåœ¨å®¿ä¸»æœºåŒå±€åŸŸç½‘PCæµè§ˆå™¨ä¸­è¾“å…¥http://&lt;å®¿ä¸»æœºIP&gt;:18080ã€‚
ä¹¦ç­¾Dockeréƒ¨ç½²JavaWebé¡¹ç›®å®æˆ˜
ä½¿ç”¨ Docker æ­å»º Java Web è¿è¡Œç¯å¢ƒ
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>docker</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>ubuntu</tag>
        <tag>tomcat</tag>
      </tags>
  </entry>
  <entry>
    <title>èšç¾¤ç®—æ³•è§£å†³TSPé—®é¢˜</title>
    <url>/dev-matlab-aco-tsp/</url>
    <content><![CDATA[TSPé—®é¢˜æ—…è¡Œå•†é—®é¢˜ï¼Œå³TSPé—®é¢˜ï¼ˆTravelling Salesman Problemï¼‰åˆè¯‘ä¸ºæ—…è¡Œæ¨é”€å‘˜é—®é¢˜ã€è´§éƒæ‹…é—®é¢˜ï¼Œæ˜¯æ•°å­¦é¢†åŸŸä¸­è‘—åé—®é¢˜ä¹‹ä¸€ã€‚å‡è®¾æœ‰ä¸€ä¸ªæ—…è¡Œå•†äººè¦æ‹œè®¿nä¸ªåŸå¸‚ï¼Œä»–å¿…é¡»é€‰æ‹©æ‰€è¦èµ°çš„è·¯å¾„ï¼Œè·¯å¾„çš„é™åˆ¶æ˜¯æ¯ä¸ªåŸå¸‚åªèƒ½æ‹œè®¿ä¸€æ¬¡ï¼Œè€Œä¸”æœ€åè¦å›åˆ°åŸæ¥å‡ºå‘çš„åŸå¸‚ã€‚è·¯å¾„çš„é€‰æ‹©ç›®æ ‡æ˜¯è¦æ±‚å¾—çš„è·¯å¾„è·¯ç¨‹ä¸ºæ‰€æœ‰è·¯å¾„ä¹‹ä¸­çš„æœ€å°å€¼ã€‚


è®¾è®¡æ€è·¯1ã€éšæœºç”Ÿæˆnä¸ªä½ç½®ï¼ˆåæ ‡ï¼‰ï¼ŒæŠŠåæ ‡ç‚¹ç»˜åˆ¶åˆ°é¡µé¢ä¸Šã€‚
2ã€è®¾ç½®èš‚èšæ•°é‡ä¸ºmï¼ŒæŠŠmåªèš‚èšéšæœºæ”¾åœ¨nä¸ªä½ç½®ä¸Šã€‚
3ã€è®¾ç½®æ¯æ¡è·¯å¾„çš„åˆå§‹ä¿¡æ¯ç´ ä¸º $info_{ij}(0) = C$ã€‚
4ã€è®¡ç®—tæ—¶åˆ»èš‚èškï¼ˆ1åˆ°mï¼‰ç”±ä½ç½®iç§»åŠ¨åˆ°ä½ç½®jçš„æ¦‚ç‡ $probability_{ij}^k$ã€‚$$probability_{ij}^k =\begin{cases}\frac{info_{ij}^Î±(t) reciprocal_{ij}^Î²}{\sum info_{is}^Î±(t) reciprocal_{is}^Î²}, &amp; j \in allowed_k,s \in allowed_k \0, &amp; \text{other}  \\end{cases}$$
ï¼ˆ1ï¼‰$info_{ij}(t)$ è¡¨ç¤ºtæ—¶åˆ»ijä¸Šçš„ä¿¡æ¯ç´ ã€‚$$info_{ij}(t+1) = Ï \cdot info_{ij}(t) + Î”info_{ij}$$
Ïè¡¨ç¤ºä¿¡æ¯ç´ æŒ¥å‘å› å­ï¼Œæ§åˆ¶ä¿¡æ¯ç´ ä¿ç•™å¤šå°‘ã€‚$Î”info_{ij}$è¡¨ç¤ºï¼ˆæœ¬æ¬¡ç§»åŠ¨ï¼‰ijè·¯å¾„é—ç•™çš„ä¿¡æ¯ç´ ã€‚
$$Î”info_{ij} = \sum_{k=1}^m Î”info_{ij}^k$$
$$Î”info_{ij}^k =\begin{cases}\frac{Q}{L_k}, &amp; \text{å½“ç¬¬kåªèš‚èšç»è¿‡ijæ—¶} \0, &amp; \text{å½“ä¸ç»è¿‡æ—¶}  \\end{cases}$$
$L_k$è¡¨ç¤ºï¼ˆæœ¬æ¬¡ç§»åŠ¨ï¼‰èš‚èškç»è¿‡çš„è·¯å¾„å’Œã€‚
ï¼ˆ2ï¼‰$reciprocal_{ij}$ è¡¨ç¤ºijä¹‹é—´è·ç¦»çš„å€’æ•°ï¼Œè¾ƒè¿‘çš„åæ ‡æœ‰è¾ƒå¤§çš„å¯èƒ½è¢«é€‰ä¸­ã€‚$$distance_{ij} = \sqrt{(x_i-x_j)^2+(y_i-y_j)^2}$$$$reciprocal_{ij} = \frac{1}{distance_{ij}}$$
ï¼ˆ3ï¼‰Î±è¡¨ç¤ºä¿¡æ¯å¯å‘å¼å› å­ï¼Œæ§åˆ¶ä¿¡æ¯ç´ å¯¹æ¦‚ç‡çš„å½±å“åŠ›å¤§å°ï¼Œè¿›è€Œæ§åˆ¶èš‚èšé€‰æ‹©åæ ‡ã€‚
ï¼ˆ4ï¼‰Î²è¡¨ç¤ºæœŸæœ›å€¼å¯å‘å¼å› å­ï¼Œæ§åˆ¶è·ç¦»å¯¹æ¦‚ç‡çš„å½±å“åŠ›çš„å¤§å°ï¼Œè¿›è€Œæ§åˆ¶èš‚èšé€‰æ‹©åæ ‡ã€‚ï¼ˆ5ï¼‰$allowed_k$è¡¨ç¤ºèš‚èškä¸‹ä¸€æ­¥å…è®¸é€‰æ‹©çš„åæ ‡é›†åˆï¼Œ$travelled_k$è¡¨ç¤ºèš‚èškå·²ç»èµ°è¿‡çš„åæ ‡é›†åˆã€‚
5ã€æ¯”è¾ƒé€‰æ‹©æ¯ä¸ªåæ ‡çš„æ¦‚ç‡ï¼Œä¾æ¬¡ä¸ºæ¯åªèš‚èšé€‰æ‹©ä¸‹ä¸€ä¸ªåæ ‡ã€‚
6ã€é‡å¤4-5ï¼Œç›´åˆ°èš‚èšèµ°å®Œæ‰€æœ‰åæ ‡ã€‚
7ã€ä½¿ç”¨ $travelled_k$é›†åˆï¼Œåˆ†åˆ«è®¡ç®—måªèš‚èšèµ°è¿‡çš„è·¯å¾„å’Œï¼Œé€‰æ‹©å‡ºæœ€å°çš„è·¯å¾„å’Œï¼Œä½œä¸ºæœ¬æ¬¡è¿­ä»£çš„æœ€ä¼˜è§£ã€‚
8ã€æŠŠmåªèš‚èšéšæœºæ”¾åœ¨nä¸ªä½ç½®ä¸Šã€‚
9ã€é‡å¤4-8ï¼Œç›´åˆ°è¾¾åˆ°æŒ‡å®šçš„è¿­ä»£æ¬¡æ•°ï¼Œæœ€åä¸€æ¬¡è¿­ä»£çš„æœ€ä¼˜è§£ï¼Œå°±æ˜¯æˆ‘ä»¬æ‰¾åˆ°çš„æœ€ä¼˜è§£ã€‚
æºç åˆ†äº«https://github.com/voidking/TSP_MATLAB.git
ä¹¦ç­¾Mathjaxä¸LaTexå…¬å¼ç®€ä»‹http://mlworks.cn/posts/introduction-to-mathjax-and-latex-expression/
]]></content>
      <categories>
        <category>engineering</category>
        <category>algorithm</category>
      </categories>
      <tags>
        <tag>çŸ¥è¯†å·¥ç¨‹</tag>
        <tag>mathjax</tag>
        <tag>matlab</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockeré•œåƒè¿ç§»/åˆ†äº«</title>
    <url>/dev-docker-image-migrate/</url>
    <content><![CDATA[é—®é¢˜æè¿°åœ¨æ²¡æœ‰å¤–ç½‘çš„æƒ…å†µä¸‹ï¼Œæ€æ ·æŠŠ docker image åˆ†äº«ç»™å±€åŸŸç½‘çš„å…¶ä»–ç”¨æˆ·ï¼Ÿ
è§£å†³åŠæ³•è§£å†³åŠæ³•æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯æ­å»ºæœ¬åœ°é•œåƒä»“åº“ï¼Œä¸€ä¸ªæ˜¯å¯¼å‡ºå¯¼å…¥é•œåƒã€‚


æ­å»ºæœ¬åœ°é•œåƒä»“åº“æ­å»ºæœ¬åœ°é•œåƒä»“åº“ï¼ŒæŠŠé•œåƒpushåˆ°æœ¬åœ°é•œåƒä»“åº“ï¼Œå…¶ä»–æœºå™¨pullå³å¯ã€‚
å‡è®¾éœ€æ±‚ä¸ºæœ¬æœºæœ‰é•œåƒ busybox:1.25ï¼Œç°åœ¨æƒ³è¦æŠŠè¿™ä¸ªé•œåƒåˆ†äº«ç»™å…¶ä»–æœºå™¨ã€‚
1ã€æœ‰é•œåƒçš„æœºå™¨æ‰§è¡Œï¼š
docker tag busybox:1.25 harbor.voidking.com/base/busybox:1.25docker login harbor.voidking.comdocker push harbor.voidking.com/base/busybox:1.25

2ã€å…¶ä»–æœºå™¨æ‰§è¡Œï¼š
docker pull harbor.voidking.com/base/busybox:1.25docker tag harbor.voidking.com/base/busybox:1.25 busybox:1.25

å¯¼å‡ºå¯¼å…¥é•œåƒå¯¼å‡ºå¯¼å…¥é•œåƒï¼Œä¸»è¦ä¾èµ–docker saveå’Œdocker loadå‘½ä»¤ã€‚
å•ä¸ªé•œåƒå‡ºå¯¼å…¥å‡è®¾éœ€æ±‚ä¸ºæœ¬æœºæœ‰é•œåƒ busybox:1.25ï¼Œç°åœ¨æƒ³è¦æŠŠè¿™ä¸ªé•œåƒåˆ†äº«ç»™å…¶ä»–æœºå™¨ã€‚
1ã€æœ‰é•œåƒçš„æœºå™¨å¯¼å‡ºé•œåƒ  
docker save -o busybox.tar busybox:1.25

2ã€æ‹·è´å‹ç¼©åŒ…åˆ°å…¶ä»–æœºå™¨
3ã€å…¶ä»–æœºå™¨å¯¼å…¥é•œåƒ  
docker load -i busybox.tar

å…¨éƒ¨é•œåƒå¯¼å‡ºå¯¼å…¥å‡è®¾éœ€æ±‚ä¸ºæœ¬æœºæœ‰å¾ˆå¤šä¸ªé•œåƒï¼Œç°åœ¨æƒ³è¦æŠŠè¿™äº›é•œåƒå…¨éƒ¨å¯¼å‡ºåˆ°å…¶ä»–æœºå™¨ã€‚
1ã€æœ‰é•œåƒçš„æœºå™¨å¯¼å‡ºæ‰€æœ‰é•œåƒ  
docker save $(docker images | grep -v REPOSITORY | awk &#x27;BEGIN&#123;OFS=&quot;:&quot;;ORS=&quot; &quot;&#125;&#123;print $1,$2&#125;&#x27;) -o all.tar

2ã€æ‹·è´å‹ç¼©åŒ…åˆ°å…¶ä»–æœºå™¨
3ã€å…¶ä»–æœºå™¨å¯¼å…¥é•œåƒ  
docker load -i all.tar

å­˜åœ¨çš„é—®é¢˜è¿™ç§å¯¼å‡ºå¯¼å…¥å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šå¯¼å…¥åçš„é•œåƒï¼Œä¸ä¼šä½œä¸ºbase layerã€‚
å·²çŸ¥ï¼šAä¸»æœºä¸Šdocker saveäº†ä¸€ä¸ªé•œåƒXï¼Œæ‹·è´åˆ°Bä¸»æœºåï¼ŒBä¸»æœºä¸Šdocker loadäº†é•œåƒXã€‚æ¥ç€Aä¸»æœºä¸ŠåŸºäºé•œåƒXåšäº†ä¸€ä¸ªé•œåƒYï¼Œä¸Šä¼ åˆ°harborã€‚é—®é¢˜ï¼šBä¸»æœºä¸Šdocker pullæ‹‰å–harborä¸­çš„é•œåƒYï¼Œä¼šå…¨é‡æ‹‰å–é•œåƒå—ï¼Ÿ
ç†è®ºä¸Šï¼Œä¸ä¼šå…¨é‡æ‹‰å–é•œåƒï¼Œåªä¼šå¢é‡æ‹‰å–ã€‚ä½†æ˜¯å®æµ‹ç¬¬ä¸€æ¬¡æ‹‰å–ä¾ç„¶ä¼šå…¨é‡æ‹‰å–Yã€‚ç¥å¥‡çš„æ˜¯ï¼Œå¦‚æœæ‰§è¡Œè¿‡docker rmi Yï¼Œå†æ¬¡æ‹‰å–Yç¡®å®ä¼šå˜æˆå¢é‡æ‹‰å–ã€‚æš‚æ—¶ä¸çŸ¥é“åŸå› ï¼Œå¾…è§£ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>harbor</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockeré•œåƒç«™çš„é…ç½®å’Œä½¿ç”¨</title>
    <url>/dev-docker-registry-mirror/</url>
    <content><![CDATA[å‰è¨€ä½¿ç”¨ Docker çš„æ—¶å€™ï¼Œç»å¸¸éœ€è¦ä»å®˜æ–¹è·å–é•œåƒï¼Œä½†æ˜¯æœ‰æ—¶å€™æ‹‰å–é•œåƒçš„éå¸¸æ…¢ï¼Œä½“éªŒå¾ˆå·®ã€‚
è§£å†³åŠæ³•ï¼šä½¿ç”¨ docker.io çš„å›½å†…é•œåƒç«™ï¼ŒåŠ é€Ÿdockeré•œåƒçš„ä¸‹è½½ã€‚
æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°±æ¥å­¦ä¹ é…ç½®ä½¿ç”¨dockeré•œåƒç«™ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

é•œåƒåŠ é€Ÿå™¨
yeasy/docker_practice
é•œåƒç«™å¯ç”¨æ€§æµ‹è¯•



æ¨èé•œåƒç«™
Dockerä¸­å›½åŒºå®˜æ–¹é•œåƒï¼šhttps://registry.docker-cn.com
ç½‘æ˜“ï¼šhttps://hub-mirror.c.163.com
ä¸­å›½ç§‘æŠ€å¤§å­¦ï¼šhttps://docker.mirrors.ustc.edu.cn
é˜¿é‡Œäº‘ï¼šhttps://cr.console.aliyun.com
è…¾è®¯äº‘ï¼ˆå·²åºŸå¼ƒï¼‰ï¼šhttps://mirror.ccs.tencentyun.com

ä¸ªäººä¸“å±åŠ é€Ÿåœ°å€ï¼š

é˜¿é‡Œäº‘ï¼šè®¿é—®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨ï¼Œå¾—åˆ°ä¸€ä¸ªä¸“å±çš„åŠ é€Ÿåœ°å€ã€‚
DaoCloudï¼šè®¿é—®é…ç½® Docker åŠ é€Ÿå™¨ï¼Œå¾—åˆ°ä¸€ä¸ªä¸“å±åŠ é€Ÿåœ°å€ã€‚

é…ç½®ä½¿ç”¨é•œåƒç«™1ã€ä¿®æ”¹dockeré…ç½®æ–‡ä»¶åˆ›å»ºæˆ–ä¿®æ”¹ /etc/docker/daemon.json ï¼Œæ·»åŠ  registry-mirrors é…ç½®
&#123;    &quot;registry-mirrors&quot; : [        &quot;https://registry.docker-cn.com&quot;,        &quot;https://docker.mirrors.ustc.edu.cn&quot;,        &quot;https://hub-mirror.c.163.com&quot;,        &quot;https://cr.console.aliyun.com&quot;    ]&#125;

2ã€é‡å¯docker
systemctl daemon-reloadsystemctl restart docker

3ã€éªŒè¯é…ç½®  
docker info

çœ‹åˆ° Registry Mirrors éƒ¨åˆ†æœ‰æˆ‘ä»¬é…ç½®çš„é•œåƒç«™ï¼Œå°±è¡¨æ˜é…ç½®æˆåŠŸã€‚
è‡ªå»ºé•œåƒç«™è‡ªå»ºé•œåƒç«™çš„ä¼˜ç‚¹ï¼Œæ˜¯å¯ä»¥ç»Ÿä¸€é…ç½®ä»£ç†ï¼Œä¸‹è½½éœ€è¦ç§‘å­¦ä¸Šç½‘æ‰èƒ½ä¸‹è½½çš„é•œåƒã€‚
å‚è€ƒæ–‡æ¡£ï¼šDocker Registry
å¯åŠ¨é•œåƒç«™1ã€ä¸‹è½½registryé•œåƒ
docker pull registry:2.7.1

2ã€å¯åŠ¨æœ¬åœ°é•œåƒç«™å¯åŠ¨docker.ioé•œåƒç«™ï¼š
docker run --name docker_io_mirror -d registry:2.7.1 \-p 5000:5000 \-e REGISTRY_PROXY_REMOTEURL=https://registry-1.docker.io \-v /data/docker_io_registry:/var/lib/registry \--restart always 

å¯åŠ¨gcr.ioé•œåƒç«™ï¼š
docker run --name gcr_io_mirror -d registry:2.7.1 \-p 5001:5000 \-e REGISTRY_PROXY_REMOTEURL=https://gcr.io \-e HTTPS_PROXY=socks5://192.168.56.1:7891 \-v /data/gcr_io_registry:/var/lib/registry \--restart always

ä½¿ç”¨æœ¬åœ°é•œåƒç«™å‡è®¾é•œåƒç«™å®¿ä¸»æœºIPåœ°å€ä¸ºï¼š192.168.56.101é‚£ä¹ˆæƒ³è¦ä½¿ç”¨é•œåƒç«™çš„æœºå™¨ä¸Šï¼Œ /etc/docker/daemon.json ä¿®æ”¹ä¸ºï¼š
&#123;    &quot;registry-mirrors&quot;: [      &quot;http://192.168.56.101:5000&quot;,      &quot;http://192.168.56.101:5001&quot;    ],    &quot;insecure-registries&quot;: [      &quot;http://192.168.56.101:5000&quot;,      &quot;http://192.168.56.101:5001&quot;    ]&#125;

K8Sä¸­æ­å»ºé•œåƒç«™K8Sä¸­æ­å»ºé•œåƒç«™ï¼Œå¯ä»¥å‚è€ƒdocker-registry-mirror/manifests
Harborä½œä¸ºé•œåƒç«™é™¤äº†ä½¿ç”¨docker registryä½œä¸ºé•œåƒç«™ï¼Œharborä¹Ÿå¯ä»¥ä½œä¸ºé•œåƒç«™ï¼Œå…·ä½“é…ç½®æ–¹æ³•å‚è€ƒæ–‡æ¡£ä½¿ç”¨ Harbor æ­å»º Mirror Registryã€‚
ä¸è¿‡ä¸å»ºè®®è¿™ä¹ˆä½¿ç”¨ï¼Œå› ä¸ºharborä½œä¸ºmirrorç«™åï¼Œåªèƒ½ä½œä¸ºmirrorç«™ï¼Œå¤§æå°ç”¨ï¼ŒåŸæœ¬çš„å¾ˆå¤šåŠŸèƒ½å°±ä¸èƒ½ä½¿ç”¨äº†ã€‚
Docker Proxy
Docker Proxyæä¾›å¤šå¹³å°å®¹å™¨é•œåƒä»£ç†æœåŠ¡,æ”¯æŒ Docker Hub, GitHub, Google, k8s, Quayç­‰é•œåƒä»“åº“ã€‚

Docker Hub å®˜æ–¹é•œåƒä»£ç†å¸¸è§„é•œåƒä»£ç†å®˜æ–¹å‘½ä»¤ï¼šdocker pull stilleshan/frpc:latestä»£ç†å‘½ä»¤ï¼šdocker pull dockerproxy.com/stilleshan/frpc:latest
æ ¹é•œåƒä»£ç†å®˜æ–¹å‘½ä»¤ï¼šdocker pull nginx:latestä»£ç†å‘½ä»¤ï¼šdocker pull dockerproxy.com/library/nginx:latest
GitHub Container Registryå¸¸è§„é•œåƒä»£ç†å®˜æ–¹å‘½ä»¤ï¼šdocker pull ghcr.io/username/image:tagä»£ç†å‘½ä»¤ï¼šdocker pull ghcr.dockerproxy.com/username/image:tag
Google Container Registryå¸¸è§„é•œåƒä»£ç†å®˜æ–¹å‘½ä»¤ï¼šdocker pull gcr.io/username/image:tagä»£ç†å‘½ä»¤ï¼šdocker pull gcr.dockerproxy.com/username/image:tag
Google Kuberneteså¸¸è§„é•œåƒä»£ç†å®˜æ–¹å‘½ä»¤ï¼šdocker pull k8s.gcr.io/username/image:tagå®˜æ–¹å‘½ä»¤ï¼šdocker pull registry.k8s.io/username/image:tagä»£ç†å‘½ä»¤ï¼šdocker pull k8s.dockerproxy.com/username/image:tag
æ ¹é•œåƒä»£ç†å®˜æ–¹å‘½ä»¤ï¼šdocker pull k8s.gcr.io/coredns:1.6.5å®˜æ–¹å‘½ä»¤ï¼šdocker pull registry.k8s.io/coredns:1.6.5ä»£ç†å‘½ä»¤ï¼šdocker pull k8s.dockerproxy.com/coredns:1.6.5
Quay.ioå¸¸è§„é•œåƒä»£ç†å®˜æ–¹å‘½ä»¤ï¼šdocker pull quay.io/username/image:tagä»£ç†å‘½ä»¤ï¼šdocker pull quay.dockerproxy.com/username/image:tag
]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockeré™æ€IPè®¾ç½®</title>
    <url>/dev-docker-static-ip/</url>
    <content><![CDATA[å‰è¨€Dockerå®¹å™¨è¿è¡Œçš„æ—¶å€™é»˜è®¤ä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªé»˜è®¤ç½‘æ¡¥æ‰€åœ¨ç½‘æ®µçš„IPåœ°å€ã€‚ä½†å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¯èƒ½éœ€è¦è®©å®¹å™¨è¿è¡Œåœ¨é¢„å…ˆæŒ‡å®šçš„é™æ€IPåœ°å€ä¸Šï¼Œå› ä¸ºæ—©æœŸçš„ç‰ˆæœ¬ä¸æ”¯æŒé™æ€IPï¼Œå› æ­¤ç½‘ä¸Šå¤§éƒ¨åˆ†æ–¹æ³•éƒ½æ˜¯å€ŸåŠ©pipeworkç­‰å»å®ç°ï¼Œç„¶è€Œåœ¨æœ€æ–°çš„ç‰ˆæœ¬ä¸­ï¼ŒDockerå·²ç»å†…åµŒæ”¯æŒåœ¨å¯åŠ¨æ—¶æŒ‡å®šé™æ€IPäº†ã€‚
Dockerå®ˆæŠ¤è¿›ç¨‹å¯åŠ¨ä»¥åä¼šåˆ›å»ºé»˜è®¤ç½‘æ¡¥docker0ï¼Œå…¶IPç½‘æ®µé€šå¸¸ä¸º172.17.0.1ã€‚åœ¨å¯åŠ¨Containerçš„æ—¶å€™ï¼ŒDockerå°†ä»è¿™ä¸ªç½‘æ®µè‡ªåŠ¨åˆ†é…ä¸€ä¸ªIPåœ°å€ä½œä¸ºå®¹å™¨çš„IPåœ°å€ã€‚æœ€æ–°ç‰ˆ(1.10.3)çš„Dockerå†…åµŒæ”¯æŒåœ¨å¯åŠ¨å®¹å™¨çš„æ—¶å€™ä¸ºå…¶æŒ‡å®šé™æ€çš„IPåœ°å€ã€‚


åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œé€‰å–äº†192.168.34.0ç½‘æ®µï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå…¶ä»–ä»»æ„ç©ºé—²çš„ç½‘æ®µã€‚
docker network create --subnet=192.168.34.0/24 voidkingnet

æ³¨ï¼švoidkingnetä¸ºè‡ªå®šä¹‰ç½‘æ¡¥çš„åå­—ï¼Œå¯è‡ªå·±ä»»æ„å–åã€‚
æŸ¥çœ‹æ‰€æœ‰dockerç½‘æ®µï¼š
docker network ls


è®¾ç½®é™æ€IPåœ¨åˆ›å»ºçš„ç½‘æ®µä¸­é€‰å–äº†192.168.34.10ä½œä¸ºé™æ€IPåœ°å€ã€‚è¿™é‡Œä»¥å¯åŠ¨learn/pingä¸ºä¾‹ã€‚
docker run -d -p 2001:2001 --net voidkingnet --ip 192.168.34.10 learn/ping ping www.baidu.com

æŸ¥çœ‹å®¹å™¨ipæ–¹æ³•ä¸€ï¼š
docker inspect $(docker ps -q) | grep IPAddress

æ–¹æ³•äºŒï¼š
docker inspect --format=&#x27;&#123;&#123;.NetworkSettings.IPAddress&#125;&#125;&#x27; $(docker ps -q)


å…³é—­å®¹å™¨æ–¹æ³•ä¸€ï¼š
docker stop $(docker ps -q)
å…³é—­æ‰€æœ‰å®¹å™¨ã€‚
æ–¹æ³•äºŒï¼š
docker psdocker stop 3e2efd019b9a
æŸ¥è¯¢å®¹å™¨idï¼Œå…³é—­æŒ‡å®šidçš„å®¹å™¨ã€‚
ä¹¦ç­¾ä¸ºDockerå®¹å™¨æŒ‡å®šè‡ªå®šä¹‰ç½‘æ®µçš„å›ºå®šIP/é™æ€IPåœ°å€http://blog.csdn.net/gobitan/article/details/51104362
]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>centos</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockerå¸¸ç”¨å‘½ä»¤</title>
    <url>/dev-docker-command/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡è®°å½•Dockerå¸¸ç”¨å‘½ä»¤ï¼Œå¤‡å¿˜ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ä»€ä¹ˆæ˜¯Docker?
dockerå…¥é—¨æ•™ç¨‹
Dockerå…¥é—¨å®æˆ˜
ä¸­å›½ç¬¬ä¸€å¥—Dockerå®æˆ˜æ¡ˆä¾‹è§†é¢‘è¯¾ç¨‹ï¼ˆå…¥é—¨åˆ°é«˜çº§ï¼‰
Dockerå®æˆ˜æ¡ˆä¾‹æºç 
Dockerå®æˆ˜æ¡ˆä¾‹æ–‡æ¡£



æŸ¥çœ‹dockerç‰ˆæœ¬å’Œå¸®åŠ©# æŸ¥çœ‹ç‰ˆæœ¬docker version# æŸ¥çœ‹å¸®åŠ©dockerdocker -h# æŸ¥çœ‹dockerå®‰è£…é…ç½®ä¿¡æ¯docker info# æŸ¥çœ‹docker startå¸®åŠ©docker start --helpdocker help start

æ“ä½œé•œåƒdocker hubè¯´æ˜githubæ˜¯å­˜å‚¨ä»£ç çš„ä»“åº“ï¼Œè€Œdocker hubæ˜¯å­˜å‚¨dockeré•œåƒçš„ä»“åº“ã€‚
docker hubä¸Šé¢çš„é•œåƒå‘½åæ–¹å¼ä¸ºï¼š&lt;username&gt;/&lt;imagename&gt;:&lt;tag&gt;ï¼Œæ¯”å¦‚voidking/nginx:v1.0å…¶ä¸­ tag å¯ä»¥çœç•¥ï¼Œçœç•¥åˆ™é»˜è®¤ä½¿ç”¨ latest ã€‚
æœ‰ä¸€ç±»æ¯”è¾ƒç‰¹æ®Šçš„é•œåƒï¼Œç»è¿‡å®˜æ–¹çš„éªŒè¯å€¼å¾—ä¿¡ä»»ï¼Œå‘½åæ–¹å¼ä¸ºï¼š&lt;imagename&gt;:&lt;tag&gt;ï¼Œæ¯”å¦‚ busybox:1.25
é•œåƒå‘½åè§„èŒƒdocker registryé•œåƒåç§°æ ¼å¼ä¸ºï¼šDOCKER_REGISTRY/repo/name:tagï¼Œå„ä¸ªå­—æ®µå…·ä½“å«ä¹‰å¦‚ä¸‹ï¼š

DOCKER_REGISTRYï¼šä¼ä¸šç»Ÿä¸€çš„Docker Registryåœ°å€ï¼›
repoï¼šé•œåƒä»“åº“ï¼Œç”¨æ¥ç®¡ç†æŸä¸€ç±»é•œåƒï¼›
nameï¼šæŸä¸ªé•œåƒçš„å…·ä½“åç§°ï¼Œä¸€èˆ¬çš„å‘½åè§„åˆ™ä¸ºï¼šç³»ç»Ÿåç§°+ç³»ç»Ÿç‰ˆæœ¬+æœåŠ¡å+æœåŠ¡ç‰ˆæœ¬ï¼ˆå¦‚æœå…¬å¸çº¦å®šäº†ä¸»è¦ä½¿ç”¨çš„ç³»ç»Ÿåç§°å’Œç‰ˆæœ¬ï¼Œåˆ™å¯ä»¥çœç•¥ç³»ç»Ÿåç§°+ç³»ç»Ÿç‰ˆæœ¬éƒ¨åˆ†ï¼Œç›´æ¥ä½¿ç”¨æœåŠ¡åä½œä¸ºé•œåƒçš„åç§°ï¼‰ã€‚ä¾‹å¦‚ï¼šcentos7.6-nginx-1.47ã€‚

é•œåƒçš„åç§°å¯ä»¥åŒ…å«çš„å­—ç¬¦é™åˆ¶ä¸º[a-z0-9]å’Œ[-._]ï¼Œä¸èƒ½å‡ºç°ä¸­æ–‡ä»¥åŠä¸­æ–‡ç¬¦å·ã€‚
å‚è€ƒæ–‡æ¡£å®¹å™¨å­¦ä¹ ï¼šå®¹å™¨é•œåƒå‘½åè§„èŒƒåŠç‰ˆæœ¬ç®¡ç†è§„èŒƒ
dockeré»˜è®¤çš„é•œåƒä»“åº“ä¸º docker.ioï¼Œweb uiä¸º hub.docker.com
harboré•œåƒåç§°æ ¼å¼ä¸ºï¼šHARBOR_REGISTRY/repo/path/name:tagå’Œdocker registryé•œåƒåç§°ç›¸æ¯”ï¼Œä¸»è¦æ˜¯æ”¯æŒäº†å¤šçº§è·¯å¾„ã€‚
æŸ¥æ‰¾é•œåƒæ–¹æ³•ä¸€ï¼šåœ¨docker hubä¸ŠæŸ¥æ‰¾é•œåƒï¼Œç›´æ¥æœç´¢å³å¯æ–¹æ³•äºŒï¼šä½¿ç”¨å‘½ä»¤è¡Œçš„å·¥å…·æœç´¢ï¼Œä¾‹å¦‚æœç´¢ busybox é•œåƒ  
docker search busyboxcurl -s &quot;https://registry.hub.docker.com/v1/repositories/busybox/tags&quot; | jq -r .[].name


æŒ‡å®šTAGä¸‹è½½é•œåƒ1ã€æŒ‡å®šTAGä¸‹è½½é•œåƒä»¥ä¸‹è½½ busybox:1.25 é•œåƒä¸ºä¾‹  
docker pull busybox:1.25


2ã€æŸ¥çœ‹æœ¬åœ°é•œåƒ  
docker images

æŒ‡å®šDIGESTä¸‹è½½é•œåƒå‚è€ƒæ–‡æ¡£docker pullï¼Œæˆ‘ä»¬äº†è§£åˆ°ï¼Œé™¤äº†æŒ‡å®šTAGä¸‹è½½é•œåƒä¹‹å¤–ï¼Œè¿˜å¯ä»¥æŒ‡å®šDIGESTä¸‹è½½é•œåƒã€‚ä¹‹æ‰€ä»¥éœ€è¦DIGESTï¼Œæ˜¯å› ä¸ºåŒä¸€ä¸ªé•œåƒTAGï¼Œæˆ‘ä»¬å¯èƒ½ä½¿ç”¨å¤šæ¬¡ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸åŒçš„ç‰ˆæœ¬äº†ã€‚ç”¨æˆ·æŒ‡å®šTAGæ‹‰å–é•œåƒæ—¶ï¼Œé»˜è®¤ä¼šæ‹‰å–æœ€æ–°çš„é‚£ä¸ªç‰ˆæœ¬ï¼Œé‚£æœ‰çš„ç”¨æˆ·å°±æƒ³ä½¿ç”¨ä»¥å‰çš„ç‰ˆæœ¬ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨DIGESTã€‚
DIGESTå¯ä»¥åœ¨dockerhubçš„é•œåƒé¡µé¢æ‰¾åˆ°ï¼Œä»¥busyboxä¸ºä¾‹ï¼Œå¯¹äºåŒä¸€ä¸ªTAGå¤šç‰ˆæœ¬çš„é•œåƒï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸€ä¸ªDIGESTæ¥ä¸‹è½½ã€‚
docker pull busybox@sha256:e02e811dd08fd49e7f6032625495118e63f597eb150403d02e3238af1df240ba

åˆ é™¤é•œåƒ# åˆ é™¤å•ä¸ªé•œåƒ docker rmi &lt;image_name&gt;docker rmi &lt;image_id&gt;docker rmi &lt;image_name&gt; -fdocker rmi &lt;image_id&gt; -f# åˆ é™¤æ‰€æœ‰é•œåƒdocker rmi $(docker images -q)

é€‰æ‹©é•œåƒå¦‚æœä¸€ä¸ªè½¯ä»¶æœ‰å¾ˆå¤šç‰ˆæœ¬çš„é•œåƒï¼Œè¯¥æ€ä¹ˆé€‰æ‹©ï¼Ÿ1ã€å¦‚æœå¯¹è½¯ä»¶ç‰ˆæœ¬æœ‰è¦æ±‚ï¼Œé‚£ä¹ˆæŒ‰ç…§ç‰ˆæœ¬è¦æ±‚ä¸‹è½½ã€‚2ã€å¦‚æœå¯¹è½¯ä»¶ç‰ˆæœ¬æ²¡æœ‰è¦æ±‚ï¼Œé‚£ä¹ˆé€‰æ‹©ä¸‹è½½3åˆ°6ä¸ªæœˆå‰çš„ç‰ˆæœ¬ï¼Œæœ€å¥½æ˜¯å¤§ç‰ˆæœ¬çš„æœ€åä¸€ä¸ªå°ç‰ˆæœ¬ã€‚å› ä¸ºå¦‚æœç‰ˆæœ¬å¤ªæ–°ï¼Œå°±å®¹æ˜“å½“å°ç™½é¼ ï¼Œå¯èƒ½æœ‰å¾ˆå¤šæœªçŸ¥çš„å‘ã€‚è€Œè€ä¸€ç‚¹çš„ç‰ˆæœ¬ï¼Œé‡åˆ°é—®é¢˜ä¸€èˆ¬ä¹Ÿèƒ½æœç´¢åˆ°è§£å†³åŠæ³•ã€‚
ä¿®æ”¹å®¹å™¨å¹¶ä¿å­˜æˆé•œåƒè¿›å…¥å®¹å™¨åï¼Œæˆ‘ä»¬å¯¹å®¹å™¨è¿›è¡Œäº†ä¿®æ”¹ï¼Œæ¯”å¦‚åˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶ /tmp/test.txt ã€‚ç°åœ¨æƒ³è¦æŠŠè¿™ä¸ªå®¹å™¨ä¿å­˜æˆé•œåƒï¼Œæ–¹ä¾¿ä»¥åå¤ç”¨ï¼Œè¯¥æ€ä¹ˆæ“ä½œï¼Ÿç­”ï¼šä½¿ç”¨docker commitå‘½ä»¤ï¼Œç±»ä¼¼äºgit commitã€‚  
docker commit vk-busybox voidking/vk-busybox:v1.0
ä»¥ä¸Šå‘½ä»¤ï¼ŒæŠŠä¿®æ”¹åçš„ vk-busybox å®¹å™¨ä¿å­˜æˆäº†é•œåƒ voidking/vk-busybox:v1.0 ã€‚docker commitæ—¶ï¼Œé™¤äº†ä½¿ç”¨å®¹å™¨åç§°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å®¹å™¨idã€‚
åˆ†äº«é•œåƒæˆ‘ä»¬åœ¨æœ¬åœ°ä¿å­˜äº† voidking/vk-busybox:v1.0 é•œåƒï¼Œæ€æ ·æŠŠå®ƒåˆ†äº«å‡ºå»ï¼Ÿç­”ï¼šä½¿ç”¨docker pushå‘½ä»¤ï¼Œç±»ä¼¼äºgit pushã€‚  
docker push voidking/vk-busybox:v1.0
è¯¥å‘½ä»¤æŠŠ voidking/vk-busybox:v1.0 é•œåƒæ¨é€åˆ° docker hubï¼Œæ‰€å±è´¦æˆ·ä¸º voidking ã€‚  
è®°å¾—pushå‰ï¼Œéœ€è¦docker loginï¼Œè¿›è¡Œç™»å½•é‰´æƒã€‚
ä¿®æ”¹é•œåƒåä¿®æ”¹é•œåƒåï¼Œä¸Šä¼ åˆ°è‡ªå·±çš„é•œåƒä»“åº“
docker tag voidking/vk-busybox:v1.0 harbor.voidking.com/voidking/vk-busybox:v1.0docker login harbor.voidking.comdocekr push harbor.voidking.com/voidking/vk-busybox:v1.0

å¦‚æœdocker loginæˆ–è€…docker pushæŠ¥é”™ï¼Œå¯ä»¥å‚è€ƒã€ŠHarborå…¥é—¨ç¯‡ã€‹è¿›è¡Œè§£å†³
ä¸‹è½½å›½å¤–é•œåƒå¸¸ç”¨çš„å›½å¤–é•œåƒä»“åº“åŒ…æ‹¬ï¼š

gcr.io
ghcr.io
quay.io

å¯¹äºè¿™äº›é•œåƒä»“åº“ï¼Œå›½å†…ä¸€èˆ¬ä¸èƒ½ä¸‹è½½ã€‚å¦‚æœç¡®å®éœ€è¦ä¸‹è½½ï¼Œå»ºè®®é€šè¿‡ç§‘å­¦ä¸Šç½‘ä¸‹è½½åˆ°æœ¬åœ°ï¼Œç„¶åä¸Šä¼ åˆ°hub.docker.comæˆ–è€…æœ¬åœ°é•œåƒä»“åº“ã€‚
ä¾‹å¦‚ä¸‹è½½mysqlçƒ­å¤‡ä»½è½¯ä»¶xtrabackupçš„é•œåƒï¼š
docker pull gcr.io/google-samples/xtrabackup:1.0docker tag gcr.io/google-samples/xtrabackup:1.0 harbor.voidking.com/gcr.io/google-samples/xtrabackup:1.0docker login harbor.voidking.comdocker push harbor.voidking.com/gcr.io/google-samples/xtrabackup:1.0docker tag gcr.io/google-samples/xtrabackup:1.0 voidking/gcr.io:google-samples.xtrabackup.1.0docker push voidking/gcr.io:google-samples.xtrabackup.1.0

æ“ä½œå®¹å™¨åˆ›å»º&amp;å¯åŠ¨å®¹å™¨æ€æ ·åˆ›å»º&amp;å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œå¹¶è®©å®ƒä¿æŒè¿è¡Œå‘¢ï¼Ÿç­”ï¼šåœ¨å¯åŠ¨å®¹å™¨æ—¶ï¼ŒæŒ‡å®šä¸€ä¸ªé•¿æœŸè¿è¡Œçš„å‰å°è¿›ç¨‹ä½œä¸º1å·è¿›ç¨‹ã€‚    
docker run --name vk-busybox -d \busybox:1.25 sleep 3600

å‘½ä»¤è¯´æ˜ï¼š 

docker run è¡¨ç¤ºå¯åŠ¨ä¸€ä¸ªå®¹å™¨
â€“name æŒ‡å®šå®¹å™¨åä¸º vk-busybox
-d è¡¨ç¤ºåå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨id
busybox:1.25 æ˜¯é•œåƒå
sleep æ˜¯1å·è¿›ç¨‹ï¼Œ3600æ˜¯sleepçš„å‚æ•°

æ˜ å°„ç«¯å£å’ŒæŒ‚è½½ç›®å½•docker run --name vk-nginx -d --privileged=true \-p 80:80 \-v /etc/localtime:/etc/localtime \nginx:1.17.7

å‚æ•°è¯´æ˜ï¼š

-p è¡¨ç¤ºå®¿ä¸»æœºç«¯å£ï¼ˆå†’å·å‰çš„ç«¯å£ï¼‰æ˜ å°„ç»™å®¹å™¨ç«¯å£ï¼ˆå†’å·åçš„ç«¯å£ï¼‰
-v è¡¨ç¤ºå®¿ä¸»æœºç›®å½•ï¼ˆå†’å·å‰ç›®å½•ï¼‰æŒ‚è½½ç»™å®¹å™¨ç›®å½•ï¼ˆå®¹å™¨ç›®å½•ï¼‰

è¯¦æƒ…å‚è€ƒã€Šä½¿ç”¨Dockerå®‰è£…é…ç½®Nginxã€‹
è¿™é‡Œæœ‰ä¸€ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„é—®é¢˜ï¼šå¦‚æœæŒ‡å®šç«¯å£81:81ï¼Œé€šè¿‡ncæ¢æµ‹å®¿ä¸»æœº81ç«¯å£æ˜¯å¦æ˜¯é€šçš„ï¼Ÿç­”ï¼šä¹Ÿæ˜¯é€šçš„ã€‚è¿™ä¸ªåº”è¯¥æ˜¯dockerçš„æœºåˆ¶ï¼Œdockerå ç”¨äº†å®¿ä¸»æœºçš„81ç«¯å£ï¼Œå› æ­¤ncæ˜¯é€šçš„ã€‚ä½†æ˜¯é€šè¿‡veth pairæŠŠæµé‡è½¬å‘ç»™å®¹å™¨åï¼Œå› ä¸ºå®¹å™¨å†…çš„81ç«¯å£å¹¶ä¸æä¾›æœåŠ¡ï¼Œæ‰€ä»¥é€šè¿‡curlè®¿é—®å®¿ä¸»æœº81ç«¯å£ï¼Œæœ€ç»ˆå¹¶ä¸èƒ½è·å¾—æœåŠ¡ã€‚
å¯åœå®¹å™¨# åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨docker stop vk-busybox# å¯åŠ¨ä¸€ä¸ªå·²ç»åœæ­¢çš„å®¹å™¨docker start vk-busybox

å¼€æœºå¯åŠ¨å®¹å™¨# å¼€æœºå¯åŠ¨dockersystemctl enable docker# å¼€æœºå¯åŠ¨å®¹å™¨docker run --restart=always vk-busyboxdocker update --restart=always vk-busybox

æŸ¥çœ‹å®¹å™¨# æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨ docker ps# æŸ¥çœ‹å†å²å®¹å™¨docker ps -l# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨  docker ps -a# æŸ¥çœ‹å®¹å™¨å¯åŠ¨å‘½ä»¤  docker ps --no-trunc# æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯  docker inspect &lt;container_name&gt;docker inspect &lt;container_id&gt;

æŸ¥çœ‹å®¹å™¨æ—¥å¿—æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs &lt;container_name&gt;docker logs --tail=100 &lt;container_name&gt;

æŸ¥æ‰¾å®¹å™¨æ—¥å¿—
docker logs --tail=100 vk-busybox | grep xxxdocker logs --tail=100 vk-busybox 2&gt;&amp;1 | grep xxx

ç®¡é“ç¬¦åªå¯¹stdoutæœ‰æ•ˆï¼Œå¦‚æœå®¹å™¨æ—¥å¿—è¾“å‡ºåˆ°äº†stderrï¼Œå°±ä¼šå‘ç°grepæ— æ•ˆï¼Œè¿™æ—¶å°±éœ€è¦é‡å®šå‘ã€‚
æ‹·è´æ–‡ä»¶åœ¨å®¿ä¸»æœºå’Œå®¹å™¨ä¹‹é—´äº’ç›¸æ‹·è´æ–‡ä»¶
docker cp /tmp/test.txt vk-busybox:/tmpdocker cp vk-busybox:/tmp/test.txt /tmp/test.txt

å¯åŠ¨å®¹å™¨çš„åŒæ—¶æ‹·è´æ–‡ä»¶ä½¿ç”¨catä»£æ›¿cpï¼š
docker run --rm \    --entrypoint cat \    prom/prometheus:v2.43.1 \    /etc/prometheus/prometheus.yml &gt; prometheus.yml

æŒ‚è½½ç›®å½•æ‹·è´ï¼š
docker run --rm \    -u root \    --entrypoint cp \    -v /opt:/opt \    prom/prometheus:v2.43.1 \    -rf /etc/prometheus /opt/

è¿›å…¥å®¹å™¨docker exec -it vk-busybox /bin/sh


æŸ¥çœ‹å®¹å™¨idå’Œå®¹å™¨è¿›ç¨‹æŸ¥çœ‹å®¹å™¨è¿›ç¨‹ID  
docker psdocker top vk-busyboxdocker inspect vk-busybox | grep pid -i

æŸ¥çœ‹å®¹å™¨è¿›ç¨‹çš„namespace  
ll /proc/$$/nsll /proc/&lt;pid&gt;/ns

åœ¨å®¹å™¨net namespaceæ‰§è¡Œå‘½ä»¤ï¼ˆéœ€è¦å®¿ä¸»æœºä¸Šæœ‰routeå‘½ä»¤ï¼‰  
nsenter -t &lt;pid&gt; -n ip addnsenter -t &lt;pid&gt; -n route -nnsenter -t &lt;pid&gt; -n iptables -A OUTPUT -p tcp --dport 7535 -j DROP

æŸ¥æ‰¾å ç”¨æŸä¸ªç«¯å£çš„å®¹å™¨ä»¥æŸ¥æ‰¾å ç”¨80ç«¯å£çš„å®¹å™¨ä¸ºä¾‹ã€‚
1ã€æŸ¥æ‰¾è¿›ç¨‹ID
netstat -nlp | grep 80

çœ‹åˆ°è¿›ç¨‹ä¸º 10538/docker-proxy
2ã€å®¹å™¨IP
ps -Af | grep 10538
çœ‹åˆ°å®¹å™¨å¯åŠ¨ä¿¡æ¯ä¸º /usr/bin/docker-proxy -proto tcp -host-ip 0.0.0.0 -host-port 80 -container-ip  -container-port 8000
3ã€æ‰¾åˆ°å®¹å™¨
docker inspect &lt;container_id&gt; | grep IPAddressdocker inspect &lt;container_id&gt; | grep 172.23.0.4

åˆ é™¤å®¹å™¨# åˆ é™¤å•ä¸ªå®¹å™¨docker rm &lt;container_name&gt;docker rm &lt;container_id&gt;# åˆ é™¤æ‰€æœ‰å®¹å™¨  docker rm $(docker ps -a -q)

æ“ä½œvolumeæŸ¥çœ‹volumeä¿¡æ¯
docker volume lsdocker volume inspect xxx

æ¸…ç†æ— ç”¨èµ„æºæ¸…ç†æ‰€æœ‰èµ„æºåˆ é™¤åœæ­¢çš„å®¹å™¨ã€åˆ é™¤æ²¡æœ‰è¢«ä½¿ç”¨çš„ç½‘ç»œã€åˆ é™¤æ²¡æœ‰è¢«ä½¿ç”¨çš„é•œåƒã€åˆ é™¤æ„å»ºäº§ç”Ÿçš„ç¼“å­˜
docker system prunedocker system prune -adocker system prune -f

åˆ é™¤ä»¥ä¸Šå†…å®¹ï¼ŒåŒæ—¶åˆ é™¤æ²¡æœ‰è¢«ä½¿ç”¨çš„volumes  
docker system prune -a --volumes

æ¸…ç†æŒ‡å®šèµ„æº# åˆ é™¤æ²¡æœ‰è¢«ä½¿ç”¨çš„volumesdocker volume prunedocker volume rm $(docker volume ls -qf dangling=true)# åˆ é™¤åœæ­¢çš„å®¹å™¨ docker container prune# åˆ é™¤æ²¡æœ‰è¢«ä½¿ç”¨çš„é•œåƒ docker image prune# åˆ é™¤docker buildç¼“å­˜docker builder prune# åˆ é™¤æ²¡æœ‰è¢«ä½¿ç”¨çš„ç½‘ç»œ  docker network prune# åˆ é™¤æ‰€æœ‰æ‚¬ç©ºé•œåƒï¼ˆæ²¡æœ‰åç§°çš„é•œåƒï¼‰ï¼Œä¸åˆ é™¤æœªä½¿ç”¨é•œåƒdocker rmi $(docker images -f &quot;dangling=true&quot; -q)# åˆ é™¤æœªä½¿ç”¨é•œåƒå’Œæ‚¬ç©ºé•œåƒ docker rmi $(docker images -q)# åˆ é™¤æ‰€æœ‰å·²é€€å‡ºçš„å®¹å™¨ docker rm -v $(docker ps -aq -f status=exited)# åˆ é™¤æ‰€æœ‰çŠ¶æ€ä¸ºdeadçš„å®¹å™¨docker rm -v $(docker ps -aq -f status=dead)





]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockerå…¥é—¨ç¯‡</title>
    <url>/dev-docker-start/</url>
    <content><![CDATA[å®¹å™¨ç®€ä»‹å¥”é©°è½¦ç”Ÿäº§å¥½ä¹‹åï¼Œç»è¿‡é›†è£…ç®±å°è£…ï¼Œä»çº½çº¦è¿é€åˆ°äº†ä¸Šæµ·ï¼Œå¼€ç®±åå¥”é©°è½¦å¯ä»¥è·‘åœ¨ä¸Šæµ·çš„å¤§è¡—ä¸Šã€‚è½¯ä»¶åœ¨ç¯å¢ƒAå¼€å‘å¥½ä¹‹åï¼Œç»è¿‡é›†è£…ç®±å°è£…ï¼Œä»ç¯å¢ƒAè¿é€åˆ°äº†ç¯å¢ƒBï¼Œå¼€ç®±åè½¯ä»¶å¯ä»¥è·‘åœ¨ç¯å¢ƒBã€‚è¿™ç§è½¯ä»¶é›†è£…ç®±æŠ€æœ¯ï¼Œå°±æ˜¯å®¹å™¨æŠ€æœ¯ï¼Œè‹±æ–‡å«åš Linux Containerã€‚
å®¹å™¨æŠ€æœ¯çš„ä¸»è¦ä¼˜ç‚¹æ˜¯è½»é‡è™šæ‹ŸåŒ–ï¼ˆè‰¯å¥½çš„éš”ç¦»æ€§ã€é«˜èµ„æºåˆ©ç”¨ç‡ï¼‰ã€å¿«æ·å’Œå¯ç§»æ¤æ€§ã€‚
èµ·åˆï¼Œå®¹å™¨æŠ€æœ¯åšçš„æœ€å¥½çš„å°±æ˜¯Dockerï¼ŒDockerä¹Ÿå‡ ä¹å°±æ˜¯å®¹å™¨çš„ä»£åè¯ï¼Œåæ¥CoreOSã€Mesosã€Containerdä¹Ÿéƒ½ç›¸ç»§å‘å±•å£®å¤§ã€‚ä¸ºäº†ç»Ÿä¸€å®¹å™¨æ ‡å‡†ï¼ŒOCIï¼ˆOpen Container Initiativeï¼‰ç»„ç»‡æˆç«‹äº†ï¼Œå¹¶äº2016å¹´4æœˆæ¨å‡ºäº†ç¬¬ä¸€ä¸ªå¼€æ”¾å®¹å™¨æ ‡å‡†ï¼Œæ ‡å‡†ä¸»è¦åŒ…æ‹¬imageé•œåƒæ ‡å‡†å’Œruntimeè¿è¡Œæ—¶æ ‡å‡†ã€‚


Dockerç®€ä»‹
Dockeræ˜¯ä¸€ä¸ªå¼€æºçš„å®¹å™¨å¼•æ“ï¼ˆç®¡ç†å®¹å™¨çš„å·¥å…·ï¼‰ï¼Œå¯ä»¥è½»æ¾çš„ä¸ºä»»ä½•åº”ç”¨åˆ›å»ºä¸€ä¸ªè½»é‡çº§çš„ã€å¯ç§»æ¤çš„ã€è‡ªç»™è‡ªè¶³çš„å®¹å™¨ã€‚å¼€å‘è€…åœ¨ç¬”è®°æœ¬ä¸Šç¼–è¯‘æµ‹è¯•é€šè¿‡çš„å®¹å™¨å¯ä»¥æ‰¹é‡åœ°åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²ï¼ŒåŒ…æ‹¬VMsï¼ˆè™šæ‹Ÿæœºï¼‰ã€bare metalã€OpenStack é›†ç¾¤å’Œå…¶ä»–çš„åŸºç¡€åº”ç”¨å¹³å°ã€‚ 

åº”ç”¨åœºæ™¯ï¼šå¼€å‘ç¯å¢ƒæ­å»ºã€è‡ªåŠ¨åŒ–æ„å»ºã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€è‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚
Dockerç³»ç»Ÿæœ‰ä¸¤ä¸ªç¨‹åºï¼šdockeræœåŠ¡ç«¯å’Œdockerå®¢æˆ·ç«¯ã€‚å…¶ä¸­dockeræœåŠ¡ç«¯æ˜¯ä¸€ä¸ªæœåŠ¡è¿›ç¨‹ï¼Œç®¡ç†ç€æ‰€æœ‰çš„å®¹å™¨ã€‚dockerå®¢æˆ·ç«¯åˆ™æ‰®æ¼”ç€dockeræœåŠ¡ç«¯çš„è¿œç¨‹æ§åˆ¶å™¨ï¼Œå¯ä»¥ç”¨æ¥æ§åˆ¶dockerçš„æœåŠ¡ç«¯è¿›ç¨‹ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼ŒdockeræœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯è¿è¡Œåœ¨ä¸€å°æœºå™¨ä¸Šã€‚
Dockerä¼˜ç‚¹ï¼šBuild, Ship and Run.Build once, run anywhere.
å‚è€ƒæ–‡æ¡£ï¼š

Dockerå®˜æ–¹æ–‡æ¡£
ä»€ä¹ˆæ˜¯Docker?
Dockerå…¥é—¨å®æˆ˜
ä¸­å›½ç¬¬ä¸€å¥—Dockerå®æˆ˜æ¡ˆä¾‹è§†é¢‘è¯¾ç¨‹ï¼ˆå…¥é—¨åˆ°é«˜çº§ï¼‰
Dockerå®æˆ˜æ¡ˆä¾‹æºç 
Dockerå®æˆ˜æ¡ˆä¾‹æ–‡æ¡£

Dockerå®‰è£…centos7å®‰è£…dockerå‚è€ƒæ–‡æ¡£Install Docker Engine on CentOS
1ã€å®‰è£…yum-utils  
yum install yum-utils

2ã€æ·»åŠ docker-ceæº
# å®˜æ–¹æºyum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo# é˜¿é‡Œäº‘æºï¼Œå›½å†…æ›´å¿«yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo

3ã€æ›´æ–°yumåŒ…  
yum makecache fast

4ã€æŸ¥çœ‹dockerç‰ˆæœ¬ 
yum list | grep dockeryum list docker-ce --showduplicates | sort -r

çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼š
docker-ce.x86_64            3:23.0.1-1.el7                     docker-ce-stabledocker-ce.x86_64            3:23.0.1-1.el7                     @docker-ce-stabledocker-ce.x86_64            3:23.0.0-1.el7                     docker-ce-stabledocker-ce.x86_64            3:20.10.9-3.el7                    docker-ce-stabledocker-ce.x86_64            3:20.10.8-3.el7                    docker-ce-stabledocker-ce.x86_64            3:20.10.7-3.el7                    docker-ce-stable...docker-ce.x86_64            17.03.1.ce-1.el7.centos            docker-ce-stabledocker-ce.x86_64            17.03.0.ce-1.el7.centos            docker-ce-stable

5ã€å®‰è£…æŒ‡å®šç‰ˆæœ¬docker
yum install docker-ce # å®‰è£…æœ€æ–°ç‰ˆyum install docker-ce-20.10.9 # å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼ˆä¸æ¨èï¼Œå¯èƒ½æ¶æ„ä¸åŒ¹é…ï¼‰# yum install &lt;softname&gt;-&lt;version&gt;.&lt;arch&gt;yum install docker-ce-3:20.10.9-3.el7.x86_64 # å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼ˆæ¨èï¼‰

6ã€å¯åŠ¨docker-ceå¹¶è®¾ç½®å¼€æœºå¯åŠ¨
systemctl start dockersystemctl enable docker

ubuntu18å®‰è£…dockerå‚è€ƒæ–‡æ¡£Install Docker Engine on Ubuntu
æ³¨æ„ï¼šubuntuä¸è¦ä½¿ç”¨snapå®‰è£…dockerï¼Œå¦åˆ™é…ç½®å’Œå…¶ä»–ç³»ç»Ÿä¸ä¸€è‡´å¾ˆéº»çƒ¦ã€‚
1ã€åˆ é™¤è‡ªå¸¦çš„è€ç‰ˆæœ¬
sudo apt-get remove docker docker-engine docker.io containerd runc

2ã€å®‰è£…ä¾èµ–
sudo apt-get updatesudo apt-get install \    ca-certificates \    curl \    gnupg \    lsb-release

3ã€æ·»åŠ dockerå®˜æ–¹GPG key
sudo mkdir -p /etc/apt/keyringscurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg

4ã€å»ºç«‹ä»“åº“
echo \  &quot;deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \  $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null

5ã€æŸ¥çœ‹dockerç‰ˆæœ¬
sudo apt-get update#sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-pluginapt-cache madison docker-ce | awk &#x27;&#123; print $3 &#125;&#x27;

6ã€å®‰è£…æŒ‡å®šç‰ˆæœ¬docker
VERSION_STRING=5:20.10.13~3-0~ubuntu-focalsudo apt-get install docker-ce=$VERSION_STRING docker-ce-cli=$VERSION_STRING containerd.io docker-compose-plugin

win10å®‰è£…dockerå‚è€ƒæ–‡æ¡£ï¼šã€ŠWin10å®‰è£…é…ç½®Dockerã€‹
centos7é™çº§å®‰è£…dockerdocker versionyum list docker-ce --showduplicates | sort -rsystemctl stop dockersystemctl stop docker.socketsystemctl stop containerdversion=19.03.15yum downgrade --setopt=obsoletes=0 -y docker-ce-$&#123;version&#125; docker-ce-cli-$&#123;version&#125; docker-ce-selinux-$&#123;version&#125; containerd.iosystemctl start containerdsystemctl start docker

helloworldè¿è¡Œå®¹å™¨å›½é™…æƒ¯ä¾‹ï¼Œå…ˆè·‘ä¸€ä¸ªhelloworldã€‚
docker pull busybox:1.25docker run busybox:1.25 echo &quot;helloworld&quot;

docker pullè¯´æ˜docker pull busybox:1.25 ä»é•œåƒä»“åº“ä¸‹è½½ä¸€ä¸ªåç§°ä¸º busybox:1.25 çš„é•œåƒã€‚ç­‰ä»·äº docker pull docker.io/busybox:1.25 ï¼Œè¿™æ˜¯å› ä¸ºdockeré»˜è®¤çš„é•œåƒä»“åº“å°±æ˜¯ docker.io
docker runè¯´æ˜docker run busybox:1.25 echo &quot;helloworld&quot;busybox:1.25 é•œåƒä½œä¸ºæ¨¡æ¿å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œå®¹å™¨ä¸­è¿è¡Œechoç¨‹åºï¼Œå‚æ•°ä¸ºâ€helloworldâ€ã€‚å®¹å™¨å¯åŠ¨åï¼Œè¾“å‡ºäº† helloworld ï¼Œç„¶åå°±åœæ­¢äº†ã€‚è¿™æ˜¯å› ä¸ºï¼Œ1å·è¿›ç¨‹ï¼ˆechoè¿›ç¨‹ï¼‰åœæ­¢äº†ï¼Œå®¹å™¨ä¹Ÿéšä¹‹åœæ­¢ã€‚
dockeré•œåƒè¿è¡Œèµ·æ¥ï¼Œä¾¿ä¼šç”Ÿæˆä¸€ä¸ªdockerå®¹å™¨ã€‚dockerå®¹å™¨å¯ä»¥ç†è§£ä¸ºåœ¨æ²™ç›’ä¸­è¿è¡Œçš„è¿›ç¨‹ï¼Œè¿™ä¸ªæ²™ç›’åŒ…å«äº†è¯¥è¿›ç¨‹è¿è¡Œæ‰€å¿…é¡»çš„èµ„æºï¼ŒåŒ…æ‹¬æ–‡ä»¶ç³»ç»Ÿã€ç³»ç»Ÿç±»åº“ã€shellç¯å¢ƒç­‰ç­‰ã€‚è¿™ä¸ªæ²™ç›’é»˜è®¤ä¸ä¼šè¿è¡Œä»»ä½•ç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šä¸€ä¸ªç¨‹åºåœ¨å¯åŠ¨å®¹å™¨æ—¶è¿è¡Œã€‚è¿™ä¸ªç¨‹åºå¯¹åº”çš„è¿›ç¨‹æ˜¯è¯¥å®¹å™¨çš„1å·è¿›ç¨‹ï¼Œå½“è¯¥è¿›ç¨‹ç»“æŸçš„æ—¶å€™ï¼Œå®¹å™¨ä¹Ÿä¼šå®Œå…¨åœæ­¢ã€‚
Dockerå¸¸ç”¨å‘½ä»¤å‚è€ƒã€ŠDockerå¸¸ç”¨å‘½ä»¤ã€‹
å¾®ä¿¡å…¬ä¼—å·å¾®ä¿¡å…¬ä¼—å·çš„äºŒç»´ç ï¼Œæ–‡ç« æ¨é€ + èµ„æºåˆ†äº«ï¼Œä¸€èµ·å­¦ä¹ è¿›æ­¥ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>centos</tag>
        <tag>harbor</tag>
      </tags>
  </entry>
  <entry>
    <title>Win10å®‰è£…é…ç½®Docker Desktop</title>
    <url>/dev-win10-docker-desktop/</url>
    <content><![CDATA[Docker Desktopç®€ä»‹
Docker Desktop is a one-click-install application for your Mac, Linux, or Windows environment that enables you to build and share containerized applications and microservices.


It provides a straightforward GUI (Graphical User Interface) that lets you manage your containers, applications, and images directly from your machine. Docker Desktop can be used either on itâ€™s own or as a complementary tool to the CLI.


Docker Desktop reduces the time spent on complex setups so you can focus on writing code. It takes care of port mappings, file system concerns, and other default settings, and is regularly updated with bug fixes and security updates.

å‚è€ƒæ–‡æ¡£ï¼šDocker Desktop
æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ åœ¨Win10ä¸­å®‰è£…é…ç½®Docker Desktopçš„æ–¹æ³•ã€‚


å®‰è£…WSL2å‚è€ƒæ–‡æ¡£ï¼šã€ŠWin10å®‰è£…é…ç½®Linuxå’ŒDockerã€‹
å®‰è£…é…ç½®Docker Desktopå®‰è£…Dockerä¸‹è½½Docker Desktop for Windowsï¼ŒåŒå‡»å®‰è£…ã€‚å®‰è£…æ—¶å‹¾é€‰ä½¿ç”¨WSL2 backendï¼Œåœ¨Windowsä¸Šè¿è¡Œä¸€ä¸ªçœŸæ­£çš„Linuxç¯å¢ƒï¼Œä½†æ˜¯æ— éœ€ä¼ ç»Ÿè™šæ‹Ÿæœºæˆ–åŒç³»ç»Ÿçš„é¢å¤–è´Ÿæ‹…ï¼Œæ€§èƒ½æ›´å¥½ã€‚
è¿›å…¥æ ¹è·¯å¾„çš„æ–¹æ³•æ–¹æ³•ä¸€ï¼šæ‰“å¼€æ–‡ä»¶èµ„æºç®¡ç†å™¨ï¼Œç‚¹å‡»å·¦ä¾§Linux
æ–¹æ³•äºŒï¼šWindowsèµ„æºç®¡ç†å™¨è·¯å¾„ä¸­è¾“å…¥
\\wsl.localhost\docker-desktop-data

ä½¿ç”¨ç¤ºä¾‹ä»¥å®‰è£…MySQLä¸ºä¾‹ï¼š
docker pull mysql:8.0.28docker run --name mysql -d -p 3306:3306 -v D:\DockerData\mysql\mysql-files:/var/lib/mysql-files -v D:\DockerData\mysql\conf.d:/etc/mysql/conf.d -v D:\DockerData\mysql\mysql:/var/lib/mysql -v D:\DockerData\mysql\log:/var/log/mysql -e MYSQL_ROOT_PASSWORD=voidking mysql:8.0.28

æ³¨æ„ï¼šè¿™é‡ŒæŒ‚è½½å®¿ä¸»æœºç›®å½•ä½¿ç”¨çš„æ˜¯Win10ä¸­çš„ç›®å½•D:\DockerData\mysqlï¼Œæ–¹ä¾¿æŸ¥æ‰¾æ–‡ä»¶ã€‚å¦‚æœä¾ç„¶ä½¿ç”¨/opt/mysqlï¼Œé‚£ä¹ˆæ–‡ä»¶å¾ˆéš¾æ‰¾åˆ°ï¼ˆæˆ‘æ²¡æ‰¾åˆ°ï¼Œæ‚è„¸ï¼‰ã€‚
æ›´å¤šå†…å®¹å‚è€ƒæ–‡æ¡£ï¼šã€Šä½¿ç”¨Dockerå®‰è£…é…ç½®MySQLã€‹
æ›´æ”¹Dockeræ•°æ®ç›˜åˆ°Dç›˜å‚è€ƒæ–‡æ¡£ï¼šWSL2ä¸‹ä¿®æ”¹Docker Desktopé•œåƒå­˜æ”¾è·¯å¾„
WSLå‘è¡Œç‰ˆé»˜è®¤å®‰è£…åœ¨Cç›˜ï¼Œåœ¨%LOCALAPPDATA%/Docker/wslç›®å½•ã€‚Dockerçš„è¿è¡Œæ•°æ®ã€é•œåƒæ–‡ä»¶éƒ½å­˜åœ¨%LOCALAPPDATA%/Docker/wsl/data/ext4.vhdxä¸­ã€‚
æ›´æ”¹Dockeræ•°æ®ç›˜æ–¹æ³•ï¼š
1ã€å…³é—­docker desktop
2ã€å…³é—­æ‰€æœ‰linuxå‘è¡Œç‰ˆ
wsl -l --allwsl -l -vwsl --shutdown

3ã€å¯¼å‡ºdocker-desktop-dataåˆ°Dç›˜ï¼ˆåŸæœ‰çš„docker imagesä¸ä¼šä¸€èµ·å¯¼å‡ºï¼‰åªéœ€è¦è¿ç§»docker-desktop-dataä¸€ä¸ªå‘è¡Œç‰ˆå°±è¡Œï¼Œdocker-desktopä¸ç”¨ç®¡ï¼Œå®ƒå ç”¨ç©ºé—´å¾ˆå°ã€‚æ‰‹åŠ¨åˆ›å»ºç›®å½•D:\DockerData\docker-desktop-data\ï¼Œç„¶åæ‰§è¡Œå¯¼å‡ºå‘½ä»¤
wsl --export docker-desktop-data D:\DockerData\docker-desktop-data\docker-desktop-data.tar

4ã€æ³¨é”€ docker-desktop-data
wsl --unregister docker-desktop-data

5ã€å¯¼å…¥ docker-desktop-data
wsl --import docker-desktop-data D:\DockerData\docker-desktop-data\ D:\DockerData\docker-desktop-data\docker-desktop-data.tar --version 2

6ã€å¯åŠ¨docker desktop
]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>windows</tag>
        <tag>wsl2</tag>
      </tags>
  </entry>
  <entry>
    <title>Win10ä¸­çš„Dockerä½¿ç”¨USBè®¾å¤‡</title>
    <url>/dev-win10-docker-usb/</url>
    <content><![CDATA[å‰è¨€ã€ŠWin10å®‰è£…é…ç½®Dockerã€‹ä¸€æ–‡ä¸­ï¼Œå…¶ä¸­æ–¹æ³•ï¼ˆ4ï¼‰æ˜¯åœ¨Win10ä¸­å®‰è£…WSL2 Linuxç³»ç»Ÿï¼Œç„¶ååœ¨Linuxç³»ç»Ÿä¸­å®‰è£…Dockerã€‚
å¦‚æœæƒ³è¦åœ¨Dockerä¸­ä½¿ç”¨Win10å®¿ä¸»æœºä¸Šçš„USBè®¾å¤‡ï¼Œè¯¥æ€ä¹ˆåšï¼Ÿæœ¬æ–‡ä¸­æˆ‘ä»¬å°±æ¥å­¦ä¹ ä¸€ä¸‹ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

è¿æ¥ USB è®¾å¤‡



å‡†å¤‡æ¡ä»¶
è¿è¡Œ Windows 11 (å†…éƒ¨ç‰ˆæœ¬ 22000 æˆ–æ›´é«˜ç‰ˆæœ¬) ã€‚ ï¼ˆå¯æä¾› Windows 10 æ”¯æŒï¼Œè¯·å‚è§ä¸‹é¢çš„æ³¨é‡Šï¼‰
éœ€è¦å…·æœ‰ x64/x86 å¤„ç†å™¨çš„è®¡ç®—æœºã€‚ (arm64 ç›®å‰ä¸æ”¯æŒ usbipd-win) ã€‚
Linux å‘è¡Œç‰ˆå·²å®‰è£…å¹¶è®¾ç½®ä¸º WSL 2ã€‚
è¿è¡Œ Linux å†…æ ¸ 5.10.60.1 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚

å‡çº§Linuxå†…æ ¸æ–¹æ³•ï¼š1ã€å‡çº§å†…æ ¸åˆ°æœ€æ–°ç‰ˆæœ¬wsl --update2ã€é‡å¯ç”µè„‘
å®‰è£… USBIPD-WIN é¡¹ç›®WSL æœ¬èº«å¹¶ä¸æ”¯æŒè¿æ¥ USB è®¾å¤‡ï¼Œå› æ­¤ä½ éœ€è¦å®‰è£…å¼€æº usbipd-win é¡¹ç›®ã€‚
1ã€è½¬åˆ° usbipd-win é¡¹ç›®çš„æœ€æ–°å‘å¸ƒé¡µã€‚2ã€é€‰æ‹© .msi æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å°†ä¸‹è½½å®‰è£…ç¨‹åºã€‚3ã€è¿è¡Œä¸‹è½½çš„ usbipd-win_x.msi å®‰è£…ç¨‹åºæ–‡ä»¶ã€‚
å®‰è£… USBIP å·¥å…·å’Œç¡¬ä»¶æ•°æ®åº“USB/IP é¡¹ç›®å®Œæˆå®‰è£…åï¼Œéœ€è¦å®‰è£…ç”¨æˆ·ç©ºé—´å·¥å…·å’Œ USB ç¡¬ä»¶æ ‡è¯†ç¬¦æ•°æ®åº“ã€‚ è¿™äº›è¯´æ˜é€‚ç”¨äº Ubuntu â€” å…¶ä»–åˆ†å‘ç‰ˆå¯èƒ½éœ€è¦ä¸åŒçš„ usbip å®¢æˆ·ç«¯åŒ…ã€‚
åœ¨ Ubuntu ä¸Šï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
sudo apt install linux-tools-5.4.0-77-generic hwdatasudo update-alternatives --install /usr/local/bin/usbip usbip /usr/lib/linux-tools/5.4.0-77-generic/usbip 20
æ­¤æ—¶ï¼Œä¸€ä¸ªæœåŠ¡æ­£åœ¨ Windows ä¸Šè¿è¡Œä»¥å…±äº« USB è®¾å¤‡ï¼Œå¹¶ä¸”åœ¨ WSL ä¸­å®‰è£…äº†å¿…è¦çš„å·¥å…·æ¥è¿æ¥åˆ°å…±äº«è®¾å¤‡ã€‚
é™„åŠ  USB è®¾å¤‡åœ¨é™„åŠ  USB è®¾å¤‡ä¹‹å‰ï¼Œè¯·ç¡®ä¿ WSL å‘½ä»¤è¡Œå·²æ‰“å¼€ã€‚ è¿™å°†ä½¿ WSL 2 è½»å‹ VM ä¿æŒæ´»åŠ¨çŠ¶æ€ã€‚
1ã€é€šè¿‡ä»¥ç®¡ç†å‘˜æ¨¡å¼æ‰“å¼€ PowerShell å¹¶è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œåˆ—å‡ºæ‰€æœ‰è¿æ¥åˆ° Windows çš„ USB è®¾å¤‡ï¼š
usbipd wsl list
å¯ä»¥çœ‹åˆ°BUSIDã€VID:PIDã€DEVICEã€STATEï¼Œå…¶ä¸­STATEéƒ½æ˜¯Not attachedã€‚
æ³¨æ„ï¼šè®¾å¤‡è¿æ¥ä¸åŒçš„USBç«¯å£ï¼ŒBUSIDä¹Ÿæ˜¯ä¸åŒçš„ã€‚
2ã€é€‰æ‹©è¦é™„åŠ åˆ° WSL çš„è®¾å¤‡æ€»çº¿ IDï¼Œç„¶åè¿è¡Œä¸‹é¢çš„å‘½ä»¤ã€‚ 
wsl -l -vwsl --set-default Ubuntu-18.04usbipd wsl attach --busid &lt;busid&gt;usbipd wsl attach -d Ubuntu-18.04 --busid &lt;busid&gt;

æ­¤æ—¶å¯èƒ½æŠ¥é”™ï¼šusbip: error: Attach Request for 1-24 failed - Device in error stateusbipd: error: Failed to attach device with busid â€˜1-24â€™.
è¯·æ£€æŸ¥ç¡®è®¤æƒ³è¦æŒ‚è½½çš„è®¾å¤‡busidæ˜¯å¦æ­£ç¡®ï¼Œå¦‚æœæ˜¯æ­£ç¡®çš„è®¾å¤‡busidï¼Œä¸€èˆ¬å¯ä»¥æ­£å¸¸æŒ‚è½½ã€‚
3ã€æ‰“å¼€ Ubuntuï¼ˆæˆ–é¦–é€‰çš„ WSL å‘½ä»¤è¡Œï¼‰ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ—å‡ºé™„åŠ çš„ USB è®¾å¤‡ï¼š
lsusb
ä½ åº”ä¼šçœ‹åˆ°åˆšåˆšé™„åŠ çš„è®¾å¤‡ï¼Œå¹¶ä¸”èƒ½å¤Ÿä½¿ç”¨å¸¸è§„ Linux å·¥å…·ä¸ä¹‹äº¤äº’ã€‚å…¶ä¸­è®¾å¤‡çš„ ID å¯¹åº”Win10ä¸­çœ‹åˆ°çš„ VID:PID ã€‚æ ¹æ®ä½ çš„åº”ç”¨ç¨‹åºï¼Œä½ å¯èƒ½éœ€è¦é…ç½® udev è§„åˆ™ä»¥å…è®¸éæ ¹ç”¨æˆ·è®¿é—®è®¾å¤‡ã€‚
4ã€åœ¨ WSL ä¸­å®Œæˆè®¾å¤‡ä½¿ç”¨åï¼Œå¯ç‰©ç†æ–­å¼€ USB è®¾å¤‡ï¼Œæˆ–è€…åœ¨ç®¡ç†å‘˜æ¨¡å¼ä¸‹ä» PowerShell è¿è¡Œæ­¤å‘½ä»¤ï¼š
usbipd wsl detach --busid &lt;busid&gt;

è‹¥è¦è¯¦ç»†äº†è§£æ­¤æ“ä½œçš„å·¥ä½œåŸç†ï¼Œè¯·å‚é˜… Windows å‘½ä»¤è¡Œåšå®¢å’Œ GitHub ä¸Šçš„ usbipd-win å­˜å‚¨åº“ã€‚
æœ‰å…³è§†é¢‘æ¼”ç¤ºï¼Œè¯·å‚é˜… WSL 2ï¼šè¿æ¥ USB è®¾å¤‡ï¼ˆåˆ¶è¡¨ç¬¦ä¸ç©ºæ ¼æ˜¾ç¤ºï¼‰ã€‚
ä½¿ç”¨ USB è®¾å¤‡1ã€Ubuntu18ä¸­æŸ¥çœ‹USBè®¾å¤‡
lsusb

å‡è®¾çœ‹åˆ°çš„ç»“æœä¸ºï¼š
Bus 002 Device 002: ID 2ba2:4d55Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hubBus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub

é‚£ä¹ˆè®¾å¤‡ 2ba2:4d55 å¯¹åº”çš„è·¯å¾„ä¸ºï¼š
/dev/bus/usb/002/002

2ã€æŒ‚è½½è®¾å¤‡åˆ°å®¹å™¨ä¸­
docker run --name test -d \-v /dev/bus/usb:/dev/bus/usb \busybox sleep 7200

3ã€å®¹å™¨ä¸­æŸ¥çœ‹USBè®¾å¤‡
lsusb

è‡³æ­¤ï¼Œå®¹å™¨ä¸­çš„ç¨‹åºå°±å¯ä»¥æ­£å¸¸è®¿é—®USBè®¾å¤‡äº†ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>windows</tag>
        <tag>wsl2</tag>
      </tags>
  </entry>
  <entry>
    <title>Win10å®‰è£…é…ç½®Linuxå’ŒDocker</title>
    <url>/dev-win10-linux-docker/</url>
    <content><![CDATA[Win10å®‰è£…é…ç½®Dockerçš„æ–¹æ³•åœ¨Win10ä¸­å®‰è£…é…ç½®Dockerï¼Œæœ‰å››ç§æ–¹æ³•ï¼šï¼ˆ1ï¼‰åœ¨Win10ä¸Šå®‰è£…Docker Desktopã€‚Docker Desktop åˆ©ç”¨äº† Windows 10 çš„ Hyper-V è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œæ¥åˆ›å»ºä¸€ä¸ªè½»é‡çº§çš„ Linux è™šæ‹Ÿæœºï¼ˆVMï¼‰ï¼Œå¹¶åœ¨å…¶ä¸­è¿è¡Œ Docker å¼•æ“å’Œå®¹å™¨ã€‚è¿™æ ·ï¼Œç”¨æˆ·å°±å¯ä»¥åœ¨ Windows ä¸Šäº«å—åˆ° Linux ä¸Šçš„ Docker åŠŸèƒ½å’Œæ€§èƒ½ã€‚ï¼ˆ2ï¼‰åœ¨Win10ä¸Šå®‰è£…Docker Toolboxã€‚Docker Toolbox æ˜¯ä¸€ç§é€‚ç”¨äºä¸æ”¯æŒ Hyper-V çš„æ—§ç‰ˆ Windows ç³»ç»Ÿçš„æ›¿ä»£æ–¹æ¡ˆï¼Œå®ƒä½¿ç”¨äº† Oracle VirtualBox æ¥åˆ›å»ºä¸€ä¸ª Linux VMï¼Œå¹¶åœ¨å…¶ä¸­è¿è¡Œ Docker å¼•æ“å’Œå®¹å™¨ã€‚Docker Toolbox éœ€è¦ç”¨æˆ·æ‰‹åŠ¨é…ç½®ä¸€äº›ç½‘ç»œå’Œå­˜å‚¨è®¾ç½®ï¼Œä»¥ä¾¿è®© Windows å’Œ VM ä¹‹é—´è¿›è¡Œé€šä¿¡å’Œæ•°æ®äº¤æ¢ã€‚ï¼ˆ3ï¼‰ä½¿ç”¨VirtualBoxç­‰è™šæ‹ŸåŒ–å·¥å…·å¯åŠ¨ä¸€ä¸ªLinuxè™šæ‹Ÿæœºï¼ˆä¸æ–¹æ³•ï¼ˆ2ï¼‰ç±»ä¼¼ï¼‰ï¼Œç„¶ååœ¨è™šæ‹Ÿæœºä¸­å®‰è£…ä½¿ç”¨Dockerã€‚ï¼ˆ4ï¼‰åœ¨Win10ä¸Šå®‰è£…ä¸€ä¸ªWSL2 Linuxç³»ç»Ÿï¼Œç„¶ååœ¨Linuxç³»ç»Ÿä¸­å®‰è£…Dockerã€‚
æ— è®ºå“ªç§æ–¹æ³•ï¼Œæƒ³è¦åœ¨ Windows ä¸Šè¿è¡Œ Dockerï¼Œéƒ½éœ€è¦ä¸€ä¸ª Linux VM æ¥æ‰˜ç®¡ Docker å¼•æ“å’Œå®¹å™¨ï¼Œå› ä¸º Docker æ˜¯åŸºäº Linux å†…æ ¸çš„æŠ€æœ¯ï¼Œè€Œä¸èƒ½ç›´æ¥åœ¨ Windows å†…æ ¸ä¸Šè¿è¡Œã€‚ä½†æ˜¯ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæˆ–å›¾å½¢ç•Œé¢æ¥æ“ä½œå’Œç®¡ç† Docker å®¹å™¨ï¼Œå°±åƒå®ƒä»¬æ˜¯æœ¬åœ°åº”ç”¨ç¨‹åºä¸€æ ·ã€‚
æ–¹æ³•ï¼ˆ1ï¼‰ï¼ŒDocker Desktopçš„å®‰è£…é…ç½®æ–¹æ³•ï¼Œå‚è€ƒæ–‡æ¡£ã€ŠWin10å®‰è£…é…ç½®Docker Desktopã€‹æ–¹æ³•ï¼ˆ2ï¼‰ï¼ŒDocker Toolboxçš„å®‰è£…é…ç½®æ–¹æ³•ï¼Œå‚è€ƒæ–‡æ¡£ã€ŠK8Så…¥é—¨ç¯‡ã€‹ã€‚æ–¹æ³•ï¼ˆ3ï¼‰ï¼Œè™šæ‹Ÿæœºä¸­å®‰è£…ä½¿ç”¨Dockerçš„æ–¹æ³•ï¼Œå’ŒLinuxä¸­å®‰è£…ä½¿ç”¨Dockerçš„æ–¹æ³•æ²¡æœ‰åŒºåˆ«ï¼Œå‚è€ƒæ–‡æ¡£ã€ŠDockerå…¥é—¨ç¯‡ã€‹ã€‚
æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ æ–¹æ³•ï¼ˆ4ï¼‰ï¼Œåœ¨Win10ä¸­å®‰è£…Linuxï¼Œå¹¶åœ¨Linuxä¸­å®‰è£…Dockerã€‚


WSL2ç®€ä»‹WSLå…¨æ‹¼æ˜¯Windows Subsystem for Linuxï¼ŒWSL2æ˜¯é€‚ç”¨äºLinuxçš„Windowså­ç³»ç»Ÿä½“ç³»ç»“æ„çš„ä¸€ä¸ªæ–°ç‰ˆæœ¬ã€‚WSL2æ˜¯åŸºäºHyper-Vè™šæ‹ŸåŒ–æŠ€æœ¯çš„ï¼Œå®ƒåœ¨Windowsä¸Šå¯åŠ¨ä¸€ä¸ªçœŸæ­£çš„Linuxç³»ç»Ÿï¼Œä½¿ç”¨ä¸€ä¸ªå®šåˆ¶çš„Linuxå†…æ ¸ã€‚è¿™ä¸ªå†…æ ¸æ”¯æŒå®Œæ•´çš„Linuxç³»ç»Ÿè°ƒç”¨ï¼Œæ‰€ä»¥å¯ä»¥åœ¨WSL2ä¸­è¿è¡Œä»»ä½•Linuxåº”ç”¨ç¨‹åºã€‚
WSL2å’ŒWindowsä¹‹é—´ç›¸å½“äºä¸¤å°å¤„äºä¸€ä¸ªç½‘ç»œä¸­ä½†åˆ†åˆ«ç‹¬ç«‹çš„ä¸»æœºï¼Œæˆ‘ä»¬ç§°è¿™ä¸ªç½‘ç»œä¸ºWSLç½‘ç»œã€‚æˆ‘ä»¬å¯ä»¥åœ¨Windowsä¸»æœºä¸Šä½¿ç”¨ipconfigå‘½ä»¤æ¥æŸ¥çœ‹Windowsä¸»æœºåœ¨WSLç½‘ç»œä¸­çš„åœ°å€ï¼Œç›¸åº”åœ°ï¼Œåœ¨WSL2ä¸­ä½ å¯ä»¥ä½¿ç”¨ifconfigå‘½ä»¤æ¥æŸ¥çœ‹WSL2åœ¨WSLç½‘ç»œä¸­çš„åœ°å€2ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸¤ä¸ªç³»ç»Ÿä¹‹é—´è¿›è¡Œç½‘ç»œé€šä¿¡ï¼Œæ¯”å¦‚è®¿é—®WebæœåŠ¡æˆ–æ•°æ®åº“ç­‰ã€‚
WSL2è¿˜ä¿ç•™äº†WSL1çš„æ— ç¼é›†æˆç‰¹æ€§ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥ä»Windowsèµ„æºç®¡ç†å™¨ä¸­è®¿é—®Linuxæ–‡ä»¶ç³»ç»Ÿï¼Œæˆ–è€…ä»Linuxç»ˆç«¯ä¸­è¿è¡ŒWindowsåº”ç”¨ç¨‹åºç­‰ã€‚æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡wslå‘½ä»¤æ¥ç®¡ç†å’Œé…ç½®WSL2ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

é€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿæ–‡æ¡£
ä½¿ç”¨ WSL åœ¨ Windows ä¸Šå®‰è£… Linux
æ—§ç‰ˆ WSL çš„æ‰‹åŠ¨å®‰è£…æ­¥éª¤
WSL çš„åŸºæœ¬å‘½ä»¤

å®‰è£…WSL21ã€æ‰“å¼€PowerShellæœç´¢PowerShellï¼Œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ
2ã€å¯ç”¨é€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿ
dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart

3ã€å¯ç”¨è™šæ‹ŸæœºåŠŸèƒ½
dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart

4ã€ä¸‹è½½ Linux å†…æ ¸æ›´æ–°åŒ…ä¸‹è½½Linux å†…æ ¸æ›´æ–°åŒ…ï¼ŒåŒå‡»å®‰è£…ã€‚
5ã€å°†WSL2è®¾ç½®ä¸ºé»˜è®¤ç‰ˆæœ¬
wsl --set-default-version 2

Win10ä¸­å®‰è£…Ubuntu18å‚è€ƒæ–‡æ¡£ï¼š

æ—§ç‰ˆ WSL çš„æ‰‹åŠ¨å®‰è£…æ­¥éª¤
è®¾ç½® WSL å¼€å‘ç¯å¢ƒ

å®‰è£…Ubuntu18æ‰“å¼€Microsoft Storeï¼Œæœç´¢Ubuntuï¼Œé€‰æ‹©Ubuntu18ç‰ˆæœ¬ï¼Œè·å–æˆ–è€…ç›´æ¥æ‰“å¼€Ubuntu 18.04 LTSï¼Œè·å–
é¦–æ¬¡å¯åŠ¨æ–°å®‰è£…çš„ Linux å‘è¡Œç‰ˆæ—¶ï¼Œå°†æ‰“å¼€ä¸€ä¸ªæ§åˆ¶å°çª—å£ï¼Œç³»ç»Ÿä¼šè¦æ±‚ä½ ç­‰å¾…ä¸€åˆ†é’Ÿæˆ–ä¸¤åˆ†é’Ÿï¼Œä»¥ä¾¿æ–‡ä»¶è§£å‹ç¼©å¹¶å­˜å‚¨åˆ°ç”µè„‘ä¸Šã€‚ æœªæ¥çš„æ‰€æœ‰å¯åŠ¨æ—¶é—´åº”ä¸åˆ°ä¸€ç§’ã€‚
ç„¶åï¼Œéœ€è¦ä¸ºæ–°çš„ Linux å‘è¡Œç‰ˆåˆ›å»ºç”¨æˆ·å¸æˆ·å’Œå¯†ç ã€‚
è®¾ç½®WSL2é»˜è®¤å‘è¡Œç‰ˆwsl -l -vwsl --set-default Ubuntu-18.04
è®¾ç½®é»˜è®¤WSL2é»˜è®¤å‘è¡Œç‰ˆä¹‹åï¼Œå°±ä¸ç”¨ä½¿ç”¨æŒ‡å®š-dæŒ‡å®šå‘è¡Œç‰ˆäº†ã€‚
è¯¦æƒ…å‚é˜…WSL æ–‡æ¡£çš„åŸºæœ¬ comands
ç™»å½•Ubuntu18æ–¹æ³•ä¸€ï¼šæœç´¢Ubuntuï¼Œæ‰“å¼€Ubuntu 18.04.5 on Windowsï¼Œä¼šç›´æ¥ç™»å½•åˆ°å‘è¡Œç‰ˆå†…éƒ¨
æ–¹æ³•äºŒï¼šPowerShellä¸­æ‰§è¡Œwslå‘½ä»¤ç™»å½•è¿›å…¥å‘è¡Œç‰ˆå†…éƒ¨
wsl -l -vwsl -d Ubuntu-18.04wsl -d Ubuntu-18.04 -u root

PSï¼šdocker-desktop-data å‘è¡Œç‰ˆæ˜¯ä¸æ”¯æŒ wsl -d ç™»å½•çš„ã€‚
ç£ç›˜è·¯å¾„è¯´æ˜Cç›˜å¯¹åº”Ubuntu18è·¯å¾„/mnt/cï¼ŒDç›˜å¯¹åº”Ubuntu18è·¯å¾„/mnt/d
é…ç½®SSHç™»å½•å‚è€ƒæ–‡æ¡£ï¼šWin10å®‰è£…Ubuntu
é…ç½®è¿œç¨‹ç™»å½•Ubuntu18æ”¯æŒSSHç™»å½•äº†ï¼Œä½†æ˜¯åªèƒ½ä»Win10å®¿ä¸»æœºä¸Šç™»å½•ï¼Œç›¸åŒå±€åŸŸç½‘çš„å…¶ä»–ä¸»æœºè¿˜ä¸èƒ½è®¿é—®åˆ°Ubuntu18ã€‚æœ¬èŠ‚é…ç½®ä½¿å±€åŸŸç½‘å…¶ä»–ä¸»æœºä¹Ÿå¯ä»¥è®¿é—®åˆ°Ubuntu18ï¼Œæ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š1ã€å›ºå®šUbuntu18çš„IPåœ°å€2ã€é…ç½®ç«¯å£è½¬å‘ï¼Œå‘å¾€Win10ç‰¹å®šç«¯å£çš„è¯·æ±‚è½¬å‘ç»™Ubuntu183ã€å…³é—­Win10é˜²ç«å¢™
å‚è€ƒæ–‡æ¡£ï¼š

å¦‚ä½•åœ¨å±€åŸŸç½‘çš„å…¶ä»–ä¸»æœºä¸Šä¸­è®¿é—®æœ¬æœºçš„WSL2
wslè½¬wsl2ä¸å±€åŸŸç½‘å†…ç½‘è®¿é—®å¡«å‘
å¦‚ä½•ç”¨ç¬”è®°æœ¬sshè¿æ¥å±€åŸŸç½‘å†…å…¶ä»–ç”µè„‘ä¸Šçš„wsl2 ubuntu

å›ºå®šIPåœ°å€æ¯æ¬¡é‡å¯WSL2 Ubuntu18é‡å¯åï¼ŒIPåœ°å€éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ— æ³•å›ºå®šè·¯ç”±è§„åˆ™ï¼Œå› æ­¤éœ€è¦é…ç½®å›ºå®šIPã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Open WSL2 Set static ip?
å°†batæ–‡ä»¶è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨

1ã€ç¼–å†™ setip.bat è„šæœ¬
@echo offsetlocal enabledelayedexpansion:: set windows ipipconfig | findstr &quot;172.29.128.1&quot; &gt; nulif !errorlevel! equ 0 (    echo windows ip has set) else (    netsh interface ip add address &quot;vEthernet (WSL)&quot; 172.29.128.1 255.255.240.0    echo set windows ip success: 172.29.128.1):: set wsl2 ipwsl -d Ubuntu-18.04 -u root ip addr | findstr &quot;172.29.132.34&quot; &gt; nulif !errorlevel! equ 0 (    echo wsl2 ip has set) else (    wsl -d Ubuntu-18.04 -u root ip addr add 172.29.132.34/20 broadcast 172.29.143.255 dev eth0 label eth0:1    echo set wsl2 ip success: 172.29.132.34)pause

2ã€ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œè„šæœ¬
3ã€ç™»å½•åˆ°Ubuntu18ï¼ŒæŸ¥çœ‹IPå’Œç½‘å…³
ifconfigroute -n
æ­£å¸¸çš„è¯ï¼Œå¯ä»¥æŸ¥çœ‹åˆ°IPåœ°å€ä¸º172.29.132.34ï¼Œç½‘å…³ä¸º172.29.128.1ï¼ˆWin10è™šæ‹Ÿç½‘å¡çš„IPï¼‰ã€‚
æ³¨æ„ï¼šä¸èƒ½ä½¿ç”¨å¸¸è§„çš„åœ¨Ubuntu18ä¸­é…ç½®å›ºå®šIPçš„æ–¹æ³•ã€‚1ã€ç¼–è¾‘ç½‘å¡é…ç½®æ–‡ä»¶
vim /etc/netplan/01-network-manager-all.yaml

å¦‚ä¸‹ä¿®æ”¹ï¼š
# Let NetworkManager manage all devices on this systemnetwork:  version: 2  renderer: NetworkManager  ethernets:    eth0:      dhcp4: false                          # ç¦æ­¢åŠ¨æ€IP      addresses: [172.29.132.34/20]       # IPåœ°å€å’Œæ©ç       gateway4: 172.29.128.1               # ç½‘å…³      nameservers:        addresses: [180.76.76.76,114.114.114.114]   #DNSæœåŠ¡å™¨

2ã€ä½¿é…ç½®ç”Ÿæ•ˆ
netplan apply

ä¼šæŠ¥é”™ï¼šSystem has not been booted with systemd as init system (PID 1). Canâ€™t operate.
é…ç½®ç«¯å£è½¬å‘Win10ä¸­ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€PowerShellï¼Œæ‰§è¡Œ
netsh interface portproxy add v4tov4 listenaddress=0.0.0.0 listenport=22 connectaddress=172.29.132.34 connectport=22netsh interface portproxy show v4tov4#netsh interface portproxy delete v4tov4 listenaddress=0.0.0.0 listenport=22

å‚è€ƒæ–‡æ¡£ï¼šNetsh interface portproxy å‘½ä»¤
é…ç½®è·¯ç”±è§„åˆ™ä¹‹åï¼Œæœ¬åœ°è®¿é—®æœ¬æœºIP:22ç«¯å£ï¼Œä¼šè‡ªåŠ¨è½¬å‘åˆ°172.29.132.34:22ã€‚
å¦‚æœå±€åŸŸç½‘ä¸­å…¶ä»–ä¸»æœºä¹Ÿæƒ³è¦è®¿é—®åˆ°172.29.132.34:22ï¼Œé‚£ä¹ˆæœ¬æœºè¿˜éœ€è¦å…³é—­å±€åŸŸç½‘é˜²ç«å¢™ï¼ˆä¸“æœ‰ç½‘ç»œé˜²ç«å¢™ï¼‰ã€‚
å…³é—­é˜²ç«å¢™æœç´¢â€œé˜²ç«å¢™â€ï¼Œé€‰æ‹©Windows Defender é˜²ç«å¢™ï¼Œå¯ç”¨æˆ–å…³é—­Windows Defenderé˜²ç«å¢™ï¼Œå…³é—­é˜²ç«å¢™ã€‚
æˆ–è€…æ“ä½œå¼€æ”¾ç«¯å£ï¼Œå‚è€ƒæ–‡æ¡£ï¼šWIN10ç”µè„‘æ€ä¹ˆå¼€æ”¾å¯è®¿é—®ç«¯å£
å…³é—­é˜²ç«å¢™ä¹‹åï¼Œä½¿ç”¨å±€åŸŸç½‘å†…çš„å…¶ä»–ä¸»æœºå°è¯•è¿œç¨‹ç™»å½•Ubuntu18è¿›è¡Œæµ‹è¯•ã€‚
é…ç½®å¼€æœºè‡ªå¯åŠ¨é…ç½®å¼€æœºè‡ªå¯åŠ¨æ¦‚è¿°é…ç½®å¼€æœºè‡ªå¯åŠ¨çš„å¸¸ç”¨æ–¹æ³•åŒ…æ‹¬ï¼š

Startupç›®å½•ä¸­æ”¾å…¥å¿«æ·æ–¹å¼ï¼Œå¿«æ·æ–¹å¼å¯èƒ½é“¾æ¥åˆ°batè„šæœ¬æˆ–è€…exeç¨‹åº
Startupç›®å½•ä¸­æ”¾å…¥vbsè„šæ­¥
ä»»åŠ¡è®¡åˆ’ç¨‹åºä¸­æ·»åŠ è¦æ‰§è¡Œçš„ç¨‹åºï¼Œé…ç½®è§¦å‘å™¨
ä½¿ç”¨ç¬¬ä¸‰æ–¹é…ç½®å¼€æœºè‡ªå¯åŠ¨çš„ç¨‹åºï¼Œä¾‹å¦‚NSSMå’ŒFireDaemon

å¯åŠ¨sshå‚è€ƒæ–‡æ¡£ï¼š

WSL æœåŠ¡è‡ªåŠ¨å¯åŠ¨çš„æ­£ç¡®æ–¹æ³•
è®© wsl ä¸­çš„æœåŠ¡éš Win10 å¼€æœºè‡ªå¯åŠ¨
åœ¨ Windows 10 ä¸­æ·»åŠ åœ¨å¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œçš„åº”ç”¨

æ–¹æ³•ä¸€ï¼šä½¿ç”¨ vbs è„šæœ¬
1ã€åˆ›å»º vbs è„šæœ¬åœ¨ Windows ä¸­ï¼Œå¼€å§‹-è¿è¡Œï¼Œè¾“å…¥shell:startupï¼Œè¿›å…¥Startupç›®å½•åˆ›å»º ubuntu18.vbs è„šæœ¬ï¼Œå†…å®¹ä¸ºï¼š
Set ws = CreateObject(&quot;Wscript.Shell&quot;)ws.run &quot;wsl -d Ubuntu-18.04 -u root /etc/init.d/ssh start&quot;, vbhide

2ã€é‡å¯æœºå™¨æµ‹è¯•é‡å¯æœºå™¨åï¼Œæ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œè¯¦ç»†ä¿¡æ¯ï¼Œå¯åŠ¨ï¼Œå¯ä»¥çœ‹åˆ° ubuntu18.vbs è¢«è°ƒç”¨äº†ã€‚
æ–¹æ³•äºŒï¼šä½¿ç”¨å¿«æ·æ–¹å¼
1ã€åˆ›å»ºå¿«æ·æ–¹å¼åœ¨ Windows ä¸­ï¼Œå¼€å§‹-è¿è¡Œï¼Œè¾“å…¥shell:startupï¼Œè¿›å…¥Startupç›®å½•æ–°å»ºå¿«æ·æ–¹å¼ï¼Œèµ·å§‹ä½ç½®ä¸ºD:\Windows\System32ï¼Œç›®æ ‡ä¸ºwsl.exe -d Ubuntu-18.04 -u root /etc/init.d/ssh start
2ã€é‡å¯æœºå™¨æµ‹è¯•é‡å¯æœºå™¨åï¼Œæ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œè¯¦ç»†ä¿¡æ¯ï¼Œå¯åŠ¨ï¼Œå¯ä»¥çœ‹åˆ° wsl.exe è¢«è°ƒç”¨äº†ã€‚
é…ç½®å›ºå®šIPåœ°å€æ–¹æ³•ä¸€ï¼šä½¿ç”¨å¯åŠ¨ç›®å½•
1ã€ç¼–å†™Win10å¼€æœºè‡ªå¯åŠ¨è„šæœ¬ ubuntu18-init.batåŠŸèƒ½åŒ…æ‹¬ï¼šè‡ªåŠ¨è®¾ç½®å›ºå®šIPåœ°å€ã€é…ç½®è·¯ç”±è§„åˆ™
@echo offsetlocal enabledelayedexpansion:: set windows ipipconfig | findstr &quot;172.29.128.1&quot; &gt; nulif !errorlevel! equ 0 (    echo windows ip has set) else (    netsh interface ip add address &quot;vEthernet (WSL)&quot; 172.29.128.1 255.255.240.0    echo set windows ip success: 172.29.128.1):: set wsl2 ipwsl -d Ubuntu-18.04 -u root ip addr | findstr &quot;172.29.132.34&quot; &gt; nulif !errorlevel! equ 0 (    echo wsl2 ip has set) else (    wsl -d Ubuntu-18.04 -u root ip addr add 172.29.132.34/20 broadcast 172.29.143.255 dev eth0 label eth0:1    echo set wsl2 ip success: 172.29.132.34):: set portproxynetsh interface portproxy add v4tov4 listenaddress=0.0.0.0 listenport=22 connectaddress=172.29.132.34 connectport=22echo set set protproxy success: 22 -&gt; 172.29.132.34:22:: start sshdwsl -d Ubuntu-18.04 -u root /usr/sbin/service ssh startecho start sshd success: port 172.29.132.34:22pause

2ã€åˆ›å»ºå¿«æ·æ–¹å¼å³é”® ubuntu18-init.batï¼Œåˆ›å»ºå¿«æ·æ–¹å¼ã€‚å³é”®å¿«æ·æ–¹å¼ï¼Œå±æ€§ï¼Œé«˜çº§ï¼Œå‹¾é€‰ç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€‚
3ã€è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ubuntu18-init.bat çš„å¿«æ·æ–¹å¼ï¼Œæ”¾å…¥åˆ° Startup ç›®å½•ä¸­ï¼Œå¼€æœºåä¼šè‡ªåŠ¨æ‰§è¡Œå®ƒã€‚
win+Ræ‰“å¼€è¿è¡Œï¼Œè¾“å…¥shell:startupï¼Œè¿›å…¥Startupç›®å½•ã€‚Startup ç›®å½•å…¨è·¯å¾„ä¸º C:\Users\&lt;username&gt;\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup
4ã€é‡å¯æœºå™¨æµ‹è¯•é‡å¯æœºå™¨åï¼Œæ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œè¯¦ç»†ä¿¡æ¯ï¼Œå¯åŠ¨ï¼Œå¯ä»¥çœ‹åˆ° ubuntu18-init.bat è¢«è°ƒç”¨äº†ã€‚
PSï¼šè¿™ä¸ªè®¾ç½®å¼€æœºè‡ªå¯åŠ¨çš„æ–¹æ³•ï¼Œä¸æ­¢é€‚ç”¨äº bat è„šæœ¬ï¼Œå¯¹äºå¸¸è§çš„åº”ç”¨ç¨‹åºä¹Ÿæ˜¯å¯è¡Œçš„ï¼Œæ¯”å¦‚QQã€å¾®ä¿¡ç­‰ã€‚
æ–¹æ³•äºŒï¼šä½¿ç”¨è®¡åˆ’ä»»åŠ¡
å‚è€ƒæ–‡æ¡£ï¼šWindowså¼€æœºå¯åŠ¨batæ–‡ä»¶
1ã€æ‰“å¼€ä»»åŠ¡è®¡åˆ’ç¨‹åºæŒ‰é”®ç›˜ä¸Šçš„Windows + Ré”®ä»¥æ‰“å¼€è¿è¡Œï¼Œç„¶åé”®å…¥taskschd.mscï¼Œå›è½¦ã€‚
2ã€åˆ›å»ºä»»åŠ¡ç‚¹å‡»åˆ›å»ºä»»åŠ¡ï¼Œè¿›è¡Œä»»åŠ¡é…ç½®ã€‚
å¸¸è§„å‚æ•°ï¼š

åç§°ï¼šubuntu18-init
å‹¾é€‰ä¸ç®¡ç”¨æˆ·æ˜¯å¦ç™»å½•éƒ½è¦è¿è¡Œ
å‹¾é€‰ä¸å­˜å‚¨å¯†ç ã€‚è¯¥ä»»åŠ¡å°†åªæœ‰è®¿é—®æœ¬åœ°è®¡ç®—æœºèµ„æºçš„æƒé™ã€‚
å‹¾é€‰ä½¿ç”¨æœ€é«˜æƒé™è¿è¡Œã€‚

è§¦å‘å™¨ï¼Œæ–°å»ºï¼Œå¼€å§‹ä»»åŠ¡é€‰æ‹©å¯åŠ¨æ—¶ï¼Œå»¶è¿Ÿä»»åŠ¡æ—¶é—´é€‰æ‹©1åˆ†é’Ÿï¼Œå‹¾é€‰å·²å¯ç”¨ï¼Œç¡®å®šã€‚æ“ä½œï¼Œæ–°å»ºï¼Œæ“ä½œé€‰æ‹©å¯åŠ¨ç¨‹åºï¼Œç¨‹åºæˆ–è„šæœ¬é€šè¿‡æµè§ˆé€‰ä¸­ubuntu18-init.batï¼Œæ·»åŠ å‚æ•°ç©ºç™½ï¼Œèµ·å§‹äºç©ºç™½ï¼ˆåœ¨å“ªä¸ªè·¯å¾„ä¸­æ‰§è¡Œï¼‰ï¼Œç¡®å®šã€‚
3ã€æŸ¥çœ‹ä»»åŠ¡å³é”®ä»»åŠ¡è®¡åˆ’ç¨‹åºåº“ï¼Œåˆ·æ–°ï¼Œå³å¯çœ‹åˆ°æ–°å¢çš„ä»»åŠ¡ã€‚
4ã€é‡å¯æœºå™¨æµ‹è¯•
æ‰‹åŠ¨æµ‹è¯•è®¡åˆ’ä»»åŠ¡ï¼š1ã€åœ¨powershellæˆ–è€…cmdä¸­æ‰§è¡Œè®¡åˆ’ä»»åŠ¡ä¸­å®šä¹‰çš„å‘½ä»¤å’Œå‚æ•°2ã€å•å‡»è®¡åˆ’ä»»åŠ¡ï¼Œç‚¹å‡»å³ä¾§å¼€å§‹
Ubuntu18ä¸­å®‰è£…Dockerå®‰è£…æ–¹æ³•å‚è€ƒæ–‡æ¡£ï¼šã€ŠDockerå…¥é—¨ç¯‡ã€‹
å¯åŠ¨Dockerä½¿ç”¨serviceå‘½ä»¤å¯åŠ¨Docker
service docker start

ä½¿ç”¨ç¤ºä¾‹ä»¥å®‰è£…MySQLä¸ºä¾‹ï¼š
docker pull mysql:8.0.28docker run --name mysql -d \-p 3306:3306 \-v /opt/mysql/mysql-files:/var/lib/mysql-files \-v /opt/mysql/conf.d:/etc/mysql/conf.d \-v /opt/mysql/data:/var/lib/mysql \-v /opt/mysql/log:/var/log/mysql \-e MYSQL_ROOT_PASSWORD=voidking \mysql:8.0.28

æ›´å¤šå†…å®¹å‚è€ƒæ–‡æ¡£ï¼šã€Šä½¿ç”¨Dockerå®‰è£…é…ç½®MySQLã€‹
æ›´æ”¹Ubuntu18æ•°æ®ç›˜åˆ°Dç›˜å‚è€ƒæ–‡æ¡£ï¼šWSL2ä¸‹ä¿®æ”¹Docker Desktopé•œåƒå­˜æ”¾è·¯å¾„
1ã€å…³é—­Ubuntu18
wsl -l --allwsl -l -vwsl -t Ubuntu-18.04

2ã€å¯¼å‡ºUbuntu18å¤‡ä»½æ–‡ä»¶åˆ°D:\Ubuntu18ï¼ˆéœ€è¦æå‰åˆ›å»ºç›®å½•ï¼‰
wsl --export Ubuntu-18.04 D:\Ubuntu18\Ubuntu-18.04.tar

3ã€æ³¨é”€Ubuntu18
wsl --unregister Ubuntu-18.04

5ã€å¯¼å…¥Ubuntu18
wsl --import Ubuntu-18.04 D:\Ubuntu18\ D:\Ubuntu18\Ubuntu-18.04.tar --version 2

6ã€å¯åŠ¨Ubuntu18
wsl -d Ubuntu-18.04

æœåŠ¡æ¢æ´»äº¤äº’å¼æ¢æ´»@echo offset /p host=&quot;Enter IP: &quot;set /p port=&quot;Enter PORT: &quot;powershell -Command &quot;if((Test-NetConnection -ComputerName %host% -Port %port%).TcpTestSucceeded)&#123;write-host &#x27;connect to %host%:%port% success&#x27;&#125;else&#123;write-host &#x27;connect to %host%:%port% failed&#x27;&#125;&quot;pause

ä¸€é”®æ¢æ´»å‡è®¾ Ubuntu-18.04 ä¸­å®‰è£…äº†MySQLå’ŒRedisï¼Œæƒ³è¦åœ¨Win10ä¸­ä¸€é”®æ¢æ´»ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è„šæœ¬ã€‚
@echo offREM æ¢æµ‹MySQLçŠ¶æ€set mysql_host=172.29.132.34set mysql_port=3306powershell -Command &quot;if((Test-NetConnection -ComputerName %mysql_host% -Port %mysql_port%).TcpTestSucceeded)&#123;write-host &#x27;connect to mysql %mysql_host%:%mysql_port% success&#x27;&#125;else&#123;write-host &#x27;connect to mysql %mysql_host%:%mysql_port% failed&#x27;&#125;&quot;REM æ¢æµ‹RedisçŠ¶æ€set redis_host=172.29.132.34set redis_port=6379powershell -Command &quot;if((Test-NetConnection -ComputerName %redis_host% -Port %redis_port%).TcpTestSucceeded)&#123;write-host &#x27;connect to redis %redis_host%:%redis_port% success&#x27;&#125;else&#123;write-host &#x27;connect to redis %redis_host%:%redis_port% failed&#x27;&#125;&quot;pause




]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>windows</tag>
        <tag>wsl2</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨IDEAå¼€å‘Maven JavaWebè¿·ä½ é¡¹ç›®</title>
    <url>/dev-idea-maven-javaweb-miniproject/</url>
    <content><![CDATA[é¡¹ç›®ç®€ä»‹æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨Mybatis+Spring+SpringMVCæ¥å®Œæˆä¸€ä¸ªè¿·ä½ JavaWebé¡¹ç›®ï¼šç”¨æˆ·ç®¡ç†ç³»ç»Ÿã€‚åŠŸèƒ½ï¼šæ™®é€šç”¨æˆ·å¯ä»¥æ³¨å†Œç™»å½•ï¼Œç®¡ç†å‘˜å¯ä»¥ç®¡ç†æ™®é€šç”¨æˆ·ã€‚
ç¯å¢ƒå‡†å¤‡å®‰è£…jdkå‚è€ƒã€Šå…¨å¹³å°å®‰è£…JDKã€‹ã€‚
å®‰è£…mavenä¸‹è½½åœ°å€ï¼š http://maven.apache.org/download.cgi
1ã€è§£å‹åˆ°è‡ªå·±å–œæ¬¢çš„ç›®å½•ï¼ˆè¿™é‡ŒéƒåŒå­¦æ”¾åˆ°D:\Serverè·¯å¾„ä¸‹ï¼‰ã€‚2ã€æ·»åŠ ç¯å¢ƒå˜é‡M2_HOMEï¼Œå€¼ä¸ºD:\Server\apache-maven-3.3.93ã€åœ¨Pathä¸­æ·»åŠ ;%M2_HOME%\bin;ã€‚
æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œè¾“å…¥mvn -vï¼Œå¦‚æœèƒ½å¤Ÿçœ‹åˆ°mavenç‰ˆæœ¬å·ï¼Œè¯´æ˜å®‰è£…æˆåŠŸã€‚
å®‰è£…tomcat1ã€tomcatä¸‹è½½åœ°å€ï¼šhttp://tomcat.apache.org/download-80.cgi
2ã€å‡è®¾è§£å‹ç›®å½•ä¸ºD:\Server\apache-tomcat-8.5.9ã€‚
3ã€è¿›å…¥ç›®å½•D:\Server\apache-tomcat-8.5.9\binï¼ŒåŒå‡»startup.batã€‚
4ã€æµè§ˆå™¨è®¿é—®http://localhost:8080ï¼Œå¯åŠ¨æˆåŠŸåˆ™æ˜¾ç¤ºtomcatç®¡ç†é¡µé¢ã€‚
ideaé…ç½®ideaé…ç½®å‚è€ƒã€ŠIDEAå¿«æ·é”®å’Œé…ç½®ã€‹ã€‚
æ–°å»ºWebé¡¹ç›®1ã€æ‰“å¼€ideaï¼ŒFileï¼ŒNewï¼ŒProjectï¼Œå³è¾¹å¯¼èˆªæ é€‰æ‹©Mavenï¼Œå‹¾é€‰Create from archetypeï¼Œé€‰æ‹©maven-archetype-webappã€‚
2ã€Nextï¼Œè¾“å…¥GroupIdä¸ºâ€œcom.voidking.pandaworkâ€ï¼Œè¾“å…¥ArtifactIdä¸ºâ€œpandawork-startâ€ã€‚
3ã€Nextï¼Œé€‰æ‹©è‡ªå·±å®‰è£…çš„Mavenä¸­çš„User settings fileï¼Œé€‰æ‹©settings.xmlä¸­é…ç½®çš„Local repositoryã€‚
4ã€Nextï¼Œè¾“å…¥Project nameï¼Œé€‰æ‹©Project locationï¼ŒFinishã€‚
5ã€ç¨ç­‰å‡ åç§’ï¼ŒWebé¡¹ç›®ä¾¿å¯ä»¥åˆ›å»ºæˆåŠŸã€‚
åˆå§‹åŒ–é¡¹ç›®ç»“æ„1ã€å±•å¼€pandawork-starté¡¹ç›®ï¼Œå±•å¼€srcæ–‡ä»¶å¤¹ã€‚
2ã€å³é”®mainæ–‡ä»¶å¤¹ï¼ŒNewï¼ŒDirectoryï¼Œè¾“å…¥directory nameä¸ºâ€œjavaâ€ã€‚
3ã€å³é”®main/javaæ–‡ä»¶å¤¹ï¼ŒNewï¼ŒPackageï¼Œè¾“å…¥package nameä¸ºâ€œcom.voidking.pandaworkâ€ã€‚å³é”®â€œcom.voidking.pandaworkâ€ï¼Œæ–°å»ºæ–‡ä»¶README.mdã€‚
3ã€å³é”®main/resourcesæ–‡ä»¶å¤¹ï¼ŒNewï¼ŒDirectoryï¼Œè¾“å…¥directory nameä¸ºâ€œcom.voidking.pandaworkâ€ã€‚
3ã€è‡³æ­¤ï¼Œåˆå§‹åŒ–é¡¹ç›®ç»“æ„å®Œæˆã€‚


æŒä¹…å±‚æ–°å»ºæ•°æ®åº“1ã€ä½¿ç”¨navicatæ–°å»ºmysqlæ•°æ®åº“ï¼Œæ•°æ®åº“åä¸ºpandaworkï¼Œå­—ç¬¦é›†é€‰æ‹©utf8â€“UTF-8 Unicodeï¼Œæ’åºè§„åˆ™é€‰æ‹©utf8_general_ciã€‚
2ã€æ–°å»ºè¡¨t_userï¼ŒåŒ…æ‹¬idã€usernameã€passwordä¸‰ä¸ªå­—æ®µã€‚
DROP TABLE IF EXISTS `t_user`;CREATE TABLE `t_user` (  `id` int(8) NOT NULL AUTO_INCREMENT,  `username` varchar(16) NOT NULL,  `password` varchar(16) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=MyISAM DEFAULT CHARSET=utf8;

mybatisçš„mavené…ç½®åœ¨pom.xmlä¸­ï¼Œæ·»åŠ ï¼š
&lt;dependency&gt;  &lt;groupId&gt;org.mybatis&lt;/groupId&gt;  &lt;artifactId&gt;mybatis&lt;/artifactId&gt;  &lt;version&gt;3.4.4&lt;/version&gt;&lt;/dependency&gt;

è¿æ¥mysql1ã€åœ¨pom.xmlä¸­ï¼Œæ·»åŠ ï¼š
&lt;!-- mysqlé©±åŠ¨ --&gt;&lt;dependency&gt;  &lt;groupId&gt;mysql&lt;/groupId&gt;  &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;  &lt;version&gt;5.1.30&lt;/version&gt;&lt;/dependency&gt;


2ã€å³é”®resourcesæ–‡ä»¶å¤¹ï¼Œæ–°å»ºæ–‡ä»¶mybatis-config.xmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE configuration        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;&lt;configuration&gt;    &lt;environments default=&quot;development&quot;&gt;        &lt;environment id=&quot;development&quot;&gt;            &lt;transactionManager type=&quot;JDBC&quot;/&gt;            &lt;dataSource type=&quot;POOLED&quot;&gt;                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/pandawork&quot;/&gt;                &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;                &lt;property name=&quot;password&quot; value=&quot;mysql&quot;/&gt;            &lt;/dataSource&gt;        &lt;/environment&gt;    &lt;/environments&gt;    &lt;mappers&gt;        &lt;mapper resource=&quot;com/voidking/pandawork/mapper/user.mapper.xml&quot;/&gt;    &lt;/mappers&gt;&lt;/configuration&gt;

3ã€main/javaæ–‡ä»¶å¤¹ä¸‹ï¼Œå³é”®com.voidking.pandaworkï¼Œæ–°å»ºåŒ…utilã€‚
4ã€å³é”®åŒ…uitlï¼Œæ–°å»ºè¿æ¥æ•°æ®åº“çš„ç±»ConnetDB.javaï¼Œå†…å®¹å¦‚ä¸‹ï¼š
package com.voidking.pandawork.util;import org.apache.ibatis.io.Resources;import org.apache.ibatis.session.SqlSessionFactory;import org.apache.ibatis.session.SqlSessionFactoryBuilder;import java.io.IOException;import java.io.InputStream;public class ConnectDB &#123;    private static volatile ConnectDB instance=null;    private SqlSessionFactory sqlSessionFactory=null;    private ConnectDB()&#123;        try &#123;            String resource = &quot;mybatis-config.xml&quot;;            InputStream inputStream = Resources.getResourceAsStream(resource);            sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);        &#125; catch (IOException e) &#123;            e.printStackTrace();        &#125;    &#125;    public static ConnectDB getInstance()&#123;        if(instance==null)&#123;            synchronized(ConnectDB.class)&#123;                if(instance==null)&#123;                    instance=new ConnectDB();                &#125;            &#125;        &#125;        return instance;    &#125;    public SqlSessionFactory getSqlSessionFactory()&#123;        return sqlSessionFactory;    &#125;&#125;

entity1ã€main/javaæ–‡ä»¶å¤¹ä¸‹ï¼Œå³é”®com.voidking.pandaworkï¼Œæ–°å»ºåŒ…entityã€‚2ã€å³é”®åŒ…entityï¼Œæ–°å»ºç±»User.javaã€‚
mapper1ã€main/javaæ–‡ä»¶å¤¹ä¸‹ï¼Œå³é”®com.voidking.pandaworkï¼Œæ–°å»ºåŒ…mapperã€‚å³é”®åŒ…mapperï¼Œæ–°å»ºæ¥å£UserMapper.javaã€‚2ã€main/resourcesæ–‡ä»¶å¤¹ä¸‹ï¼Œå³é”®com.voidking.pandaworkï¼Œæ–°å»ºåŒ…mapperã€‚å³é”®åŒ…mapperï¼Œæ–°å»ºæ–‡ä»¶user.mapper.xmlã€‚
service1ã€main/javaæ–‡ä»¶å¤¹ä¸‹ï¼Œå³é”®com.voidking.pandaworkï¼Œæ–°å»ºåŒ…serviceã€‚2ã€å³é”®åŒ…serviceï¼Œæ–°å»ºæ¥å£UserService.javaã€‚3ã€å³é”®åŒ…serviceï¼Œæ–°å»ºåŒ…implã€‚4ã€æ‰“å¼€UserService.javaï¼Œé¼ æ ‡å…‰æ ‡èšç„¦åˆ°â€œpublic interface UserServiceâ€ä¸€è¡Œï¼ŒæŒ‰ä¸‹alt+enterï¼ˆæˆ–è€…é€‰æ‹©codeï¼Œgenerateï¼‰ï¼Œé€‰æ‹©com.voidking.pandawork.service.implåŒ…ï¼Œæ–°å»ºæ¥å£å®ç°æ–‡ä»¶UserServiceImpl.javaã€‚
testæ‰“å¼€UserServiceImpl.javaï¼Œé¼ æ ‡å…‰æ ‡èšç„¦åˆ°â€œpublic class UserServiceImpl implements UserServiceâ€ä¸€è¡Œï¼ŒæŒ‰ä¸‹alt+enterï¼Œé€‰æ‹©com.voidking.pandaworkåŒ…ï¼Œæ–°å»ºæµ‹è¯•æ–‡ä»¶UserServiceTest.javaã€‚è¿™æ ·ï¼Œå°±åœ¨test/java/com.voidking.pandaworkåŒ…ä¸­ç”Ÿæˆäº†æµ‹è¯•æ–‡ä»¶ã€‚
ä¸šåŠ¡é€»è¾‘å±‚springåŒ…åœ¨pom.xmlä¸­ï¼Œæ·»åŠ springmvcæœ€å°åŒ–ä¾èµ–ï¼š
&lt;dependency&gt;  &lt;groupId&gt;org.springframework&lt;/groupId&gt;  &lt;artifactId&gt;spring-context&lt;/artifactId&gt;  &lt;version&gt;4.3.8.RELEASE&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt;  &lt;groupId&gt;org.springframework&lt;/groupId&gt;  &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;  &lt;version&gt;$&#123;springframework.version&#125;&lt;/version&gt;&lt;/dependency&gt;

applicationContext.xmlå³é”®main/resourcesæ–‡ä»¶å¤¹ï¼Œæ–°å»ºapplicationContext.xmlï¼Œä¸é…ç½®ä»»ä½•beanï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;       xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans                           http://www.springframework.org/schema/beans/spring-beans-4.0.xsd                           http://www.springframework.org/schema/tx                           http://www.springframework.org/schema/tx/spring-tx-4.0.xsd                           http://www.springframework.org/schema/aop                           http://www.springframework.org/schema/aop/spring-aop-4.0.xsd                           http://www.springframework.org/schema/context                           http://www.springframework.org/schema/context/spring-context-4.0.xsd&quot;&gt;&lt;/beans&gt;

springmvc-servlet.xmlå³é”®main/resourcesæ–‡ä»¶å¤¹ï¼Œæ–°å»ºspringmvc-servlet.xmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;       xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;       xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans                           http://www.springframework.org/schema/beans/spring-beans-4.0.xsd                           http://www.springframework.org/schema/mvc                           http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd                           http://www.springframework.org/schema/context                           http://www.springframework.org/schema/context/spring-context-4.0.xsd                           http://www.springframework.org/schema/aop                           http://www.springframework.org/schema/aop/spring-aop-4.0.xsd                           http://www.springframework.org/schema/tx                           http://www.springframework.org/schema/tx/spring-tx-4.0.xsd&quot;&gt;    &lt;!-- è®¾ç½®ä½¿ç”¨æ³¨è§£çš„ç±»æ‰€åœ¨çš„jaråŒ… --&gt;    &lt;context:component-scan base-package=&quot;com.voidking.pandawork.controller&quot; /&gt;&lt;/beans&gt;

web.xmlæ‰“å¼€main/webapp/WEB-INFO/web.xmlï¼Œä¿®æ”¹å†…å®¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app  version=&quot;3.1&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;          xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;          xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee                              http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;&gt;  &lt;context-param&gt;    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;    &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;    &lt;!-- é»˜è®¤æ˜¯/WEB-INF/applicationContext.xml --&gt;  &lt;/context-param&gt;  &lt;listener&gt;    &lt;listener-class&gt;      org.springframework.web.context.ContextLoaderListener    &lt;/listener-class&gt;  &lt;/listener&gt;  &lt;servlet&gt;    &lt;servlet-name&gt;SpringMVC&lt;/servlet-name&gt;    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;    &lt;init-param&gt;      &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;      &lt;param-value&gt;classpath:springmvc-servlet.xml&lt;/param-value&gt;      &lt;!-- é»˜è®¤æ˜¯/WEB-INF/[servletåå­—]-servlet.xml --&gt;    &lt;/init-param&gt;    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;  &lt;/servlet&gt;  &lt;servlet-mapping&gt;    &lt;servlet-name&gt;SpringMVC&lt;/servlet-name&gt;    &lt;url-pattern&gt;/&lt;/url-pattern&gt;  &lt;/servlet-mapping&gt;&lt;/web-app&gt;

helloworld1ã€main/javaæ–‡ä»¶å¤¹ä¸‹ï¼Œå³é”®com.voidking.pandaworkï¼Œæ–°å»ºåŒ…controllerã€‚å³é”®åŒ…controllerï¼Œæ–°å»ºç±»HelloWorld.javaï¼Œå†…å®¹å¦‚ä¸‹ï¼š
package com.voidking.pandawork.controller;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;@Controllerpublic class HelloWorld &#123;    @RequestMapping(&quot;/hello&quot;)    public @ResponseBody String test() &#123;        return &quot;hello, world! This com from spring!&quot;;    &#125;&#125;

2ã€éƒ¨ç½²é¡¹ç›®åˆ°tomcatçš„8080ç«¯å£ï¼Œè®¿é—®http://localhost:8080/helloï¼Œå³å¯çœ‹åˆ°â€œhello, world! This com from spring!â€ã€‚
è¿·ä½ JavaWebé¡¹ç›®å®ç°å…·ä½“é…ç½®å’Œä»£ç å®ç°è¯·è‡ªè¡Œé˜…è¯»ä»£ç ï¼špandawork-start
ä¹¦ç­¾
mybatisæ–‡æ¡£
SpringMVC+Spring4+Mybatis3é›†æˆï¼Œå¼€å‘ç®€å•Webé¡¹ç›®+æºç ä¸‹è½½
æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºSpringMVCâ€”â€”æœ€å°åŒ–é…ç½®

]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>ç¼–è¾‘å™¨</tag>
        <tag>java</tag>
        <tag>maven</tag>
        <tag>idea</tag>
        <tag>spring</tag>
        <tag>springmvc</tag>
        <tag>mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title>IDEAå¸¸ç”¨å¿«æ·é”®å’Œé…ç½®</title>
    <url>/dev-idea-shortcut-and-config/</url>
    <content><![CDATA[å‰è¨€å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚IDEAä½œä¸ºå½“ä»Šæœ€æµè¡Œçš„IDEä¹‹ä¸€ï¼Œæœ‰å¾ˆå¤šå¿«æ·é”®å’Œé…ç½®å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°å¼€å‘ã€‚æœ¬æ–‡è®°å½•ä¸€ä¸‹è‡ªå·±å¸¸ç”¨çš„ä¸€äº›å¿«æ·é”®å’Œé…ç½®ï¼Œå¤‡å¿˜ã€‚
å¿«æ·é”®æŸ¥çœ‹å¿«æ·é”®1ã€èœå•æ ï¼ŒIntelliJ IDEAï¼ŒPreferencesâ€¦ã€‚2ã€Keymapï¼ŒMain menuï¼ŒRefactorï¼ŒExtractï¼ŒIntroduce Variableâ€¦ã€‚
è‡ªåŠ¨è¡¥å…¨å‡½æ•°è¿”å›å€¼windows: ctrl+alt+Vï¼Œå›è½¦macos: option+command+Vï¼Œå›è½¦
å‡½æ•°è·³è½¬command+å•å‡»ï¼Œcommand+]ï¼Œcommand+[
ä»£ç æ ¼å¼åŒ–macos: option+command+L


é…ç½®ideaé…ç½®maven1ã€æ‰“å¼€ideaï¼ŒFileï¼ŒSettingsï¼Œæœç´¢â€œmavenâ€ã€‚2ã€Maven home directoryé€‰æ‹©D:\Server\apache-maven-3.3.9ã€‚3ã€User settings fileé€‰æ‹©D:\Server\apache-maven-3.3.9\conf\settings.xmlã€‚
ideaé…ç½®tomcat1ã€æ‰“å¼€ideaï¼ŒViewï¼Œå‹¾é€‰Toolbarï¼Œæ˜¾ç¤ºå·¥å…·æ ã€‚
2ã€å•å‡»å·¥å…·æ ä¸Šçš„ä¸‹ä¸‰è§’ï¼ˆSelect Run/Debug Configurationï¼‰ï¼ŒEdit Configurationsã€‚
3ã€å•å‡»æ‰“å¼€çª—å£çš„â€œ+â€å·ï¼ŒAdd New Configurationï¼ŒTomcat Serverï¼ŒLocalã€‚
4ã€Nameä¿®æ”¹ä¸ºTomcat8.5ï¼ŒJREé€‰æ‹©C:\Program Files\Java\jdk1.8.0_111\jreã€‚
5ã€å‹¾é€‰Show this pageï¼Œå•å‡»Fixï¼Œé€‰æ‹©project_name:war explodedï¼ŒOKã€‚
6ã€å•å‡»å·¥å…·æ çš„ç»¿è‰²ä¸‰è§’ï¼Œå¯åŠ¨tomcatã€‚
è‡ªåŠ¨å¯¼åŒ…æ‰“å¼€ideaï¼ŒFileï¼ŒSettingsï¼ŒEditorï¼ŒGeneralï¼ŒAuto Importï¼Œç•Œé¢ä¸Šèƒ½å‹¾é€‰çš„å…¨éƒ¨å‹¾é€‰ã€‚
è‡ªåŠ¨æ¢è¡Œ1ã€ç¼–ç æ—¶è‡ªåŠ¨æ¢è¡ŒPreferences &gt; Editor &gt; Code Styleï¼Œå‹¾é€‰wrap on typingåœ¨ç¼–ç æ—¶ï¼Œå¦‚æœè¶…å‡ºæœ€å¤§è¡Œå®½ï¼Œåˆ™è‡ªåŠ¨æ¢è¡Œã€‚
2ã€ä»£ç æ ¼å¼åŒ–æ—¶è‡ªåŠ¨æ¢è¡ŒPreferences &gt; Editor &gt; Code Style &gt; Pythonï¼Œå‹¾é€‰ Ensure right margin is not exceededåœ¨ä½¿ç”¨å¿«æ·é”®æ‰‹åŠ¨æ ¼å¼åŒ–ä»£ç æ—¶ï¼Œè‡ªåŠ¨æ¢è¡Œã€‚
æ‰¹é‡æ›¿æ¢æ¢è¡Œç¬¦å‚è€ƒConfiguring Line Separatorsã€‚
ä¸ºæ–°æ–‡ä»¶é…ç½®æ¢è¡Œç¬¦ï¼š

Press âŒ˜, to open IDE settings and select Editor | Code Style.
To configure line separators for new projects, go to File | New Projects Setup | Settings/Preferences for New Projects | Editor | Code Style.
The line separator style applied to the current file is indicated in the status bar.

å­˜é‡æ–‡ä»¶æ›¿æ¢æ¢è¡Œç¬¦ï¼š

Select a file or directory in the Project tool window âŒ˜1.Note that if a directory is selected, the line ending style applies to all nested files recursively.

From the main menu, choose File | File Properties | Line Separators, and then select a line ending style from the list.


pythonä»£ç æ£€æŸ¥pylint æ˜¯ä¸€ä¸ªèƒ½å¤Ÿæ£€æŸ¥Pythonç¼–ç è´¨é‡ã€ç¼–ç è§„èŒƒçš„å·¥å…·ã€‚å®ƒåˆ†æ Python ä»£ç ä¸­çš„é”™è¯¯ï¼ŒæŸ¥æ‰¾ä¸ç¬¦åˆä»£ç é£æ ¼æ ‡å‡†ï¼ˆPylint é»˜è®¤ä½¿ç”¨çš„ä»£ç é£æ ¼æ˜¯ PEP 8ï¼‰å’Œæœ‰æ½œåœ¨é—®é¢˜çš„ä»£ç ã€‚
å‚è€ƒæ–‡æ¡£ï¼š 

Google Python Style Guide
ç¼–ç é£æ ¼ä¸è‡ªåŠ¨æ£€æŸ¥
Python ç¼–ç é£æ ¼ä¸è§„èŒƒ

pylintå®‰è£…é…ç½®æ–¹æ³•å¦‚ä¸‹ï¼š
1ã€å®‰è£…pylintpip install pylint
2ã€å¸¸ç”¨å‘½ä»¤
pylint --versionpylint --help# æŸ¥çœ‹pylintå®‰è£…è·¯å¾„which pylint# ç”Ÿæˆé…ç½®æ–‡ä»¶pylint --persistent=n --generate-rcfile &gt; .pylintrc# é»˜è®¤ä½¿ç”¨å½“å‰ç›®å½•ä¸‹çš„.pylintrcé…ç½®æ–‡ä»¶pylint test.py# æŒ‡å®šé…ç½®æ–‡ä»¶pylint --rcfile=.pylintrc test.py

C(convention)ï¼šè§„èŒƒï¼Œè¿åäº†ç¼–ç é£æ ¼æ ‡å‡†W(warning)ï¼šè­¦å‘Šï¼ŒæŸäº›pythonç‰¹å®šé—®é¢˜E(error)ï¼šé”™è¯¯ï¼Œå¯èƒ½æ˜¯ä»£ç ä¸­çš„é”™è¯¯R(refactor)ï¼šé‡æ„ï¼Œä»£ç æ¯”è¾ƒç³Ÿç³•F(fatal error)ï¼šè‡´å‘½é”™è¯¯
3ã€ideaé…ç½®pylintPreferencesâ€¦ &gt; Tools &gt; External Toolsï¼Œç‚¹å‡» + å·æ·»åŠ 

Nameï¼špylint
Programï¼š/Users/haojin01/Library/Python/2.7/bin/pylint 
Argumentsï¼š--rcfile=$ProjectFileDir$/.pylintrc $FilePath$
Working directoryï¼š$FileDir$

4ã€ä½¿ç”¨Tools &gt; External Tools &gt; pylint
pythonä»£ç è‡ªåŠ¨è§„èŒƒåŒ–black æ˜¯ä¸€ä¸ªå®˜æ–¹çš„ Python ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œgitåœ°å€ psf/blackã€‚
blackå®‰è£…é…ç½®æ–¹æ³•å¦‚ä¸‹ï¼š
1ã€å®‰è£…blackpip3 install black
2ã€å¸¸ç”¨å‘½ä»¤
black --helpblack --diff test.pyblack test.pyblack --line-length 120 test.pyblack --config pyproject.toml test.py

3ã€å®˜æ–¹ pyproject.toml ç¤ºä¾‹
# Example configuration for Black.# NOTE: you have to use single-quoted strings in TOML for regular expressions.# It&#x27;s the equivalent of r-strings in Python.  Multiline strings are treated as# verbose regular expressions by Black.  Use [ ] to denote a significant space# character.[tool.black]line-length = 88target-version = [&#x27;py36&#x27;, &#x27;py37&#x27;, &#x27;py38&#x27;]include = &#x27;\.pyi?$&#x27;extend-exclude = &#x27;&#x27;&#x27;/(  # The following are specific to Black, you probably don&#x27;t want those.  | blib2to3  | tests/data  | profiling)/&#x27;&#x27;&#x27;# Build system information below.# NOTE: You don&#x27;t need this in your own Black configuration.[build-system]requires = [&quot;setuptools&gt;=41.0&quot;, &quot;setuptools-scm&quot;, &quot;wheel&quot;]build-backend = &quot;setuptools.build_meta&quot;[tool.pytest.ini_options]# Option below requires `tests/optional.py`optional-tests = [  &quot;no_python2: run when `python2` extra NOT installed&quot;,  &quot;no_blackd: run when `d` extra NOT installed&quot;,  &quot;no_jupyter: run when `jupyter` extra NOT installed&quot;,]

4ã€è‡ªåŠ¨æ¢è¡Œæ— æ•ˆé—®é¢˜
black --line-length 120 test.pyblack --config pyproject.toml test.py
ä»¥ä¸Šä¸¤ä¸ªå‘½ä»¤ï¼Œéƒ½æ— æ•ˆï¼Œä¸èƒ½å®ç°è‡ªåŠ¨æ¢è¡Œï¼Œå¾ˆå¥‡æ€ªï¼Œåº”è¯¥æ˜¯ä¸ªbugï¼Œå…ˆä¸ç®¡å®ƒã€‚
5ã€ideaé…ç½®blackPreferencesâ€¦ &gt; Tools &gt; External Toolsï¼Œç‚¹å‡» + å·æ·»åŠ 

Nameï¼šblack
Programï¼š/usr/local/bin/black 
Argumentsï¼š--config $ProjectFileDir$/pyproject.toml $FilePath$
Working directoryï¼š$FileDir$

6ã€ä½¿ç”¨Tools &gt; External Tools &gt; black
è®¾ç½®Pythonæ³¨é‡Šæ¨¡æ¿1ã€æ‰“å¼€æ³¨é‡Šæ¨¡æ¿é…ç½®Preferences &gt; Editor &gt; Code Style &gt; File and Code Templates &gt;  Python Script
2ã€å¡«å…¥æ³¨é‡Šå†…å®¹
#!/usr/bin/env python3# -*- coding:utf-8 -*-################################################################################## Copyright (c) 2021 Baidu.com, Inc. All Rights Reserved#################################################################################&quot;&quot;&quot;Authors: voidkingDate:    $&#123;DATE&#125;&quot;&quot;&quot;

3ã€æ–°å»ºPythonæ–‡ä»¶ï¼Œæ–‡ä»¶å¤´éƒ¨å°±ä¼šè‡ªåŠ¨å‡ºç°æ³¨é‡Šäº†ã€‚
æ–°å»ºæ–‡ä»¶è‡ªåŠ¨git add1ã€æ‰“å¼€æ³¨é‡Šæ¨¡æ¿é…ç½®Preferences &gt; Version Control &gt; Confirmation ï¼Œé€‰æ‹©Add silentlyã€‚
2ã€æ–°å»ºæ–‡ä»¶ï¼Œæ–‡ä»¶ä¼šè¢«è‡ªåŠ¨git addè·Ÿè¸ªã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>ç¼–è¾‘å™¨</tag>
        <tag>tomcat</tag>
        <tag>java</tag>
        <tag>maven</tag>
        <tag>idea</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxå®‰è£…é…ç½®Supervisor</title>
    <url>/dev-linux-supervisor/</url>
    <content><![CDATA[Supervisorç®€ä»‹
Supervisor is a client/server system that allows its users to monitor and control a number of processes on UNIX-like operating systems.


It shares some of the same goals of programs like launchd, daemontools, and runit. Unlike some of these programs, it is not meant to be run as a substitute for init as â€œprocess id 1â€. Instead it is meant to be used to control processes related to a project or a customer, and is meant to start like any other program at boot time.

Supervisoræ˜¯ç”¨Pythonå¼€å‘çš„ä¸€å¥—é€šç”¨çš„è¿›ç¨‹ç®¡ç†ç¨‹åºï¼Œèƒ½å°†ä¸€ä¸ªæ™®é€šçš„å‘½ä»¤è¡Œè¿›ç¨‹å˜ä¸ºåå°daemonï¼Œå¹¶ç›‘æ§è¿›ç¨‹çŠ¶æ€ï¼Œå¼‚å¸¸é€€å‡ºæ—¶èƒ½è‡ªåŠ¨é‡å¯ã€‚å®ƒæ˜¯é€šè¿‡fork/execçš„æ–¹å¼æŠŠè¿™äº›è¢«ç®¡ç†çš„è¿›ç¨‹å½“ä½œsupervisorçš„å­è¿›ç¨‹æ¥å¯åŠ¨ï¼Œè¿™æ ·åªè¦åœ¨supervisorçš„é…ç½®æ–‡ä»¶ä¸­ï¼ŒæŠŠè¦ç®¡ç†çš„è¿›ç¨‹çš„å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„å†™è¿›å»å³å¯ã€‚ä¹Ÿå®ç°å½“å­è¿›ç¨‹æŒ‚æ‰çš„æ—¶å€™ï¼Œçˆ¶è¿›ç¨‹å¯ä»¥å‡†ç¡®è·å–å­è¿›ç¨‹æŒ‚æ‰çš„ä¿¡æ¯ï¼Œå¯ä»¥é€‰æ‹©æ˜¯å¦è‡ªå·±å¯åŠ¨å’ŒæŠ¥è­¦ã€‚supervisorè¿˜æä¾›äº†ä¸€ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥ä¸ºsupervisordæˆ–è€…æ¯ä¸ªå­è¿›ç¨‹ï¼Œè®¾ç½®ä¸€ä¸ªérootçš„userï¼Œè¿™ä¸ªuserå°±å¯ä»¥ç®¡ç†å®ƒå¯¹åº”çš„è¿›ç¨‹ã€‚
ç›¸å…³æ–‡æ¡£ï¼š

Supervisorå®˜ç½‘
Supervisorä½¿ç”¨è¯¦è§£



å®‰è£…SupervisoråŸºäºCentOS71ã€å®‰è£…supervisor
# æ–¹æ³•ä¸€yum install epel-releaseyum install supervisor# æ–¹æ³•äºŒyum install python-pippip install supervisor

2ã€å‡†å¤‡é…ç½®æ–‡ä»¶
mkdir -p /etc/supervisor/echo_supervisord_conf &gt; /etc/supervisord.confvim /etc/supervisord.conf

ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ï¼š
[include]files = /etc/supervisor/*.ini;files = /etc/supervisor/*.conf

3ã€å¯åŠ¨æœåŠ¡&amp;è®¾ç½®å¼€æœºå¯åŠ¨
systemctl start supervisordsystemctl enable supervisord

åŸºäºpyenvå¦‚æœç³»ç»Ÿçš„Pythonç‰ˆæœ¬ä¸é€‚åˆSupservisorè¿è¡Œï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨pyenvåˆ‡æ¢Pythonç¯å¢ƒå®‰è£…Supervisorã€‚å‚è€ƒã€ŠPythonç‰ˆæœ¬ç®¡ç†å™¨pyenvã€‹ï¼Œå®‰è£…å¥½python2.7.13ã€‚
1ã€æ–°å»ºsupervisorç¯å¢ƒ
pyenv virtualenv 2.7.13 supervisor

2ã€æ¿€æ´»supervisorç¯å¢ƒ
source /root/.pyenv/versions/2.7.13/envs/supervisor/bin/activate supervisor# orsource activate supervisor

3ã€å®‰è£…supervisor
pip install supervisor

4ã€å‡†å¤‡é…ç½®æ–‡ä»¶
mkdir -p /etc/supervisor/echo_supervisord_conf &gt; /etc/supervisord.confvim /etc/supervisord.conf

ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ï¼š
[include]files = /etc/supervisor/*.ini;files = /etc/supervisor/*.conf

5ã€æµ‹è¯•è¿è¡Œ
/root/.pyenv/versions/2.7.13/envs/supervisor/bin/supervisord -c /etc/supervisord.conf

6ã€é…ç½®supervisord.service
vi /usr/lib/systemd/system/supervisord.service

ä¿®æ”¹ä¸ºï¼š
[Unit]Description=Process Monitoring and Control DaemonAfter=rc-local.service nss-user-lookup.target[Service]Type=forkingExecStart=/root/.pyenv/versions/2.7.13/envs/supervisor/bin/supervisord -c /etc/supervisord.conf  ExecReload=/root/.pyenv/versions/2.7.13/envs/supervisor/bin/supervisorctl reload       ExecStop=/root/.pyenv/versions/2.7.13/envs/supervisor/bin/supervisorctl shutdown      [Install]WantedBy=multi-user.target

7ã€é‡æ–°å¯åŠ¨æœåŠ¡&amp;è®¾ç½®å¼€æœºå¯åŠ¨
ps aux | grep supervisordsystemctl stop supervisordsystemctl start supervisordsystemctl enable supervisord

å¸¸ç”¨å‘½ä»¤# é‡å¯supervisorsystemctl retart supervisord# é‡å¯è¢«ç®¡ç†çš„æœåŠ¡supervisorctl -c /etc/supervisord.conf restart service_name# æŸ¥çœ‹è¢«ç®¡ç†çš„æœåŠ¡çŠ¶æ€supervisorctl status# é‡æ–°åŠ è½½é…ç½®supervisorctl restart

Supervisorå®æˆ˜ç®¡ç†tomcatå‚è€ƒã€ŠCentOS7è®¾ç½®tomcatå¼€æœºè‡ªå¯åŠ¨ã€‹ã€‚
ç®¡ç†Jupyterå‚è€ƒã€ŠCentOSå®‰è£…é…ç½®Jupyterã€‹ã€‚
ç®¡ç†Djangoå‚è€ƒDjangoéƒ¨ç½²åˆ°çº¿ä¸Šï¼ˆä¿®æ”¹ç‰ˆï¼‰ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>centos</tag>
        <tag>supervisor</tag>
        <tag>pyenv</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonç‰ˆæœ¬ç®¡ç†å™¨pyenv</title>
    <url>/dev-python-pyenv/</url>
    <content><![CDATA[pyenvç®€ä»‹pyenvä½¿æˆ‘ä»¬å¯ä»¥è½»æ¾åœ°åœ¨å¤šä¸ªç‰ˆæœ¬çš„Pythonä¹‹é—´åˆ‡æ¢ã€‚å®ƒç”¨æ³•ç®€å•ï¼Œéµå¾ªUNIXçš„ä¸€ç«™å¼å·¥å…·ä¼ ç»Ÿï¼Œå¯ä»¥å¾ˆå¥½åœ°å®Œæˆä¸åŒPythonç‰ˆæœ¬ä¹‹é—´çš„åˆ‡æ¢ã€‚ä¸ä¹‹ç±»ä¼¼çš„ï¼Œè¿˜æœ‰condaã€‚
å‚è€ƒæ–‡æ¡£ï¼š

github - pyenv
Command Reference
ã€ŠPythonåŒ…ç®¡ç†å·¥å…·Condaã€‹
ã€ŠPythonåŒ…ç®¡ç†å·¥å…·pipã€‹



å®‰è£…pyenvlinuxcurl https://pyenv.run | bash

macosbrew updatebrew install pyenv

é…ç½®pyenv1ã€åœ¨ .bash_profile ä¸­æ·»åŠ 
export PYENV_ROOT=&quot;$HOME/.pyenv&quot;command -v pyenv &gt;/dev/null || export PATH=&quot;$PYENV_ROOT/bin:$PATH&quot;eval &quot;$(pyenv init -)&quot;

2ã€ä½¿é…ç½®ç”Ÿæ•ˆï¼š
source ~/.bash_profile

3ã€æŸ¥çœ‹å®‰è£…æƒ…å†µ
pyenv versions

pyenvå¸¸ç”¨å‘½ä»¤æŸ¥çœ‹å¯å®‰è£…çš„pythonç‰ˆæœ¬åˆ—è¡¨
pyenv install -l

å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„python
pyenv install 3.6.10

æŸ¥çœ‹å·²å®‰è£…çš„python
pyenv versions

æŸ¥çœ‹å½“å‰è®¾ä¸ºé»˜è®¤çš„pythonç‰ˆæœ¬
pyenv version

å®‰è£…pythonä»¥å®‰è£…python3.6.10ç‰ˆæœ¬ä¸ºä¾‹
pyenv install -lpyenv install -v 3.6.10pyenv rehash

å¦‚æœå®‰è£…å¾ˆæ…¢ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªå°æŠ€å·§ï¼šæå‰ä¸‹è½½å®‰è£…åŒ…ã€‚
mkdir ~/.pyenv/cachecd ~/.pyenv/cachewget https://www.python.org/ftp/python/3.6.10/Python-3.6.10.tar.xz

åˆ‡æ¢pythonç‰ˆæœ¬1ã€åˆ‡æ¢ä¸º3.6.10ç‰ˆæœ¬
pyenv versionspyenv global 3.6.10pyenv rehashpython -V

2ã€åˆ‡æ¢ä¸ºåŸç‰ˆæœ¬
pyenv global systempyenv rehashpython -V




]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>linux</tag>
        <tag>pyenv</tag>
      </tags>
  </entry>
  <entry>
    <title>å…¨å¹³å°å®‰è£…JDKï¼ˆJavaå¼€å‘ç¯å¢ƒï¼‰</title>
    <url>/dev-install-jdk-on-all-platforms/</url>
    <content><![CDATA[å‰è¨€ç»å¸¸éœ€è¦å®‰è£…JDKï¼ˆJava Development Kitï¼ŒJavaå¼€å‘ç¯å¢ƒï¼‰ï¼Œæœ¬æ–‡å°±å¯¹å¸¸ç”¨ç³»ç»Ÿçš„JDKå®‰è£…æ–¹æ³•åšä¸€ä¸ªæ±‡æ€»ï¼Œå…·ä½“åŒ…æ‹¬Windowsã€MacOSã€Ubuntuå’ŒCentOSã€‚


JDKä¸‹è½½åœ°å€
å®˜æ–¹æœ€æ–°ç‰ˆä¸‹è½½åœ°å€ï¼šJava SE Downloads
å®˜æ–¹å†å²ç‰ˆä¸‹è½½åœ°å€ï¼šPrevious Java releases
ç¼–ç¨‹å®åº“java jdké•œåƒ
åä¸ºjava-jdké•œåƒ

Windows1ã€ä¸‹è½½exeæ–‡ä»¶æœ¬èŠ‚é€‰æ‹©ä¸‹è½½jdk-8u111-windows-x64.exe
2ã€åŒå‡»å®‰è£…jdkï¼ŒæŒ‰ç…§æç¤ºä¸€æ­¥ä¸€æ­¥å®‰è£…å³å¯å‡è®¾å®‰è£…ç›®å½•ä¸ºC:\Program Files\Java\jdk1.8.0_111å’ŒC:\Program Files\Java\jre1.8.0_111
3ã€æ·»åŠ ç¯å¢ƒå˜é‡JAVA_HOMEä¸ºC:\Program Files\Java\jdk1.8.0_111
4ã€åœ¨ç¯å¢ƒå˜é‡Pathä¸­æ·»åŠ ;%JAVA_HOME%\bin;%JAVA_HOME%\jre\bin;
5ã€æ·»åŠ ç¯å¢ƒå˜é‡CLASSPATHä¸º.;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar;
6ã€åœ¨DOSå‘½ä»¤è¡Œçª—å£è¾“å…¥javacï¼Œè¾“å‡ºå¸®åŠ©ä¿¡æ¯å³ä¸ºé…ç½®æ­£ç¡®
MacOSå®‰è£…JDK14.01ã€ä¸‹è½½dmgæ–‡ä»¶å¹¶å®‰è£…æœ¬èŠ‚é€‰æ‹©ä¸‹è½½jdk-14.0.1_osx-x64_bin.dmg
2ã€é…ç½®ç¯å¢ƒå˜é‡ç¼–è¾‘ ~/.bash_profile æ–‡ä»¶ï¼Œæ·»åŠ jdkç›¸å…³é…ç½®
JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-14.0.1.jdk/Contents/HomeCLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:.PATH=$JAVA_HOME/bin:$PATH:.export JAVA_HOMEexport CLASSPATHexport PATH

3ã€æµ‹è¯•å®‰è£…
source ~/.bash_profilejava -version

å¸è½½JDK14.01ã€æŸ¥çœ‹jdkå®‰è£…è·¯å¾„
echo $JAVA_HOMEls /Library/Java/JavaVirtualMachines/

2ã€åˆ é™¤jdk
cd /Library/Java/JavaVirtualMachines/sudo rm -rf jdk-14.0.2.jdk

æ³¨æ„ï¼Œè¿™é‡Œä¸èƒ½ç»™jdk-14.0.2.jdké‡å‘½åè€Œä¸åˆ é™¤ï¼Œå› ä¸º/usr/bin/javaä¼šè‡ªåŠ¨å‘ç°æœ€æ–°ç‰ˆçš„jdkå¹¶å…³è”ã€‚
3ã€åˆ é™¤ç¯å¢ƒå˜é‡ç¼–è¾‘ ~/.bash_profile æ–‡ä»¶ï¼Œåˆ é™¤jdkç›¸å…³é…ç½®ã€‚
4ã€æµ‹è¯•å¸è½½
java -version

å‚è€ƒæ–‡æ¡£ï¼š

ã€æ•™ç¨‹ã€‘macOSå®Œå…¨å¸è½½Javaå¼€å‘ç¯å¢ƒ
Installation of the JDK on macOS

å®‰è£…JDK1.81ã€ä¸‹è½½dmgæ–‡ä»¶å¹¶å®‰è£…æœ¬èŠ‚é€‰æ‹©ä¸‹è½½jdk-8u161-macosx-x64.dmg
2ã€é…ç½®ç¯å¢ƒå˜é‡ç¼–è¾‘ ~/.bash_profile æ–‡ä»¶ï¼Œæ·»åŠ jdkç›¸å…³é…ç½®
JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_161.jdk/Contents/HomeCLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:.PATH=$JAVA_HOME/bin:$PATH:.export JAVA_HOMEexport CLASSPATHexport PATH

3ã€æµ‹è¯•å®‰è£…
source ~/.bash_profilejava -version

å¸è½½JDK1.81ã€æŸ¥çœ‹jdkå®‰è£…è·¯å¾„
echo $JAVA_HOMEls /Library/Java/JavaVirtualMachines/

2ã€åˆ é™¤jdk
cd /Library/Java/JavaVirtualMachines/sudo rm -rf jdk1.8.0_161.jdk

3ã€åˆ é™¤jdkç›¸å…³æ–‡ä»¶
sudo rm -rf &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot;sudo rm -rf &quot;/Library/PreferencePanes/JavaControlPanel.prefpane&quot;

4ã€åˆ é™¤ç¯å¢ƒå˜é‡ç¼–è¾‘ ~/.bash_profile æ–‡ä»¶ï¼Œåˆ é™¤jdkç›¸å…³é…ç½®ã€‚
5ã€æµ‹è¯•å¸è½½
java -version

å‚è€ƒæ–‡æ¡£ï¼š

ã€æ•™ç¨‹ã€‘macOSå®Œå…¨å¸è½½Javaå¼€å‘ç¯å¢ƒ
JDK 8 Installation for OS X

Ubuntu/CentOS1ã€ä¸‹è½½jdk8u161
wget --no-check-certificate --no-cookies --header &quot;Cookie: oraclelicense=accept-securebackup-cookie&quot; http://download.oracle.com/otn-pub/java/jdk/8u161-b12/2f38c3b165be4555a1fa6e98c45e0808/jdk-8u161-linux-x64.tar.gz

ä»oracleå®˜ç½‘ä¸‹è½½jdkæ¯”è¾ƒéº»çƒ¦ï¼Œå¯ä»¥é€‰æ‹©ä»é•œåƒç«™ä¸‹è½½ã€‚
2ã€è§£å‹åˆ°jvmç›®å½•
mkdir -p /usr/lib/jvmtar -xzvf jdk-8u161-linux-x64.tar.gz -C /usr/lib/jvm/

3ã€é…ç½®JAVA_HOMEå’ŒJRE_HOMEï¼Œvi /etc/profileï¼Œåœ¨æœ€åæ·»åŠ ï¼š
export JAVA_HOME=/usr/lib/jvm/jdk1.8.0_161export JRE_HOME=$JAVA_HOME/jreexport CLASSPATH=$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATHexport PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH
ç„¶åä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼Œsource /etc/profileã€‚
4ã€æµ‹è¯•jdkæ˜¯å¦é…ç½®æˆåŠŸã€‚
java -versionjavajavac

CentOSç‹¬æœ‰æ–¹æ³•ï¼ˆä¸æ¨èï¼‰CentOSä¸­å®‰è£…JDKï¼Œé™¤äº†å¯ä»¥è‡ªå·±ä¸‹è½½å®‰è£…åŒ…è¿›è¡Œå®‰è£…ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨yumå‘½ä»¤ï¼Œä¸‹é¢æ˜¯å®‰è£…é…ç½®æµç¨‹ã€‚
1ã€åˆ é™¤è‡ªå¸¦jdk
rpm -e --nodeps `rpm -qa | grep java`

2ã€æŸ¥çœ‹yumåº“ä¸­æœ‰å“ªäº›jdkç‰ˆæœ¬ã€‚
yum search java | grep jdk

3ã€é€‰æ‹©java-1.8.0-openjdk-devel.x86_64 : OpenJDK Development Environmentç‰ˆæœ¬è¿›è¡Œå®‰è£…ã€‚
yum install java-1.8.0-openjdk-devel.x86_64

é»˜è®¤å®‰è£…ç›®å½•ä¸º/usr/lib/jvm/ï¼Œå…¶ä¸­çš„æ–‡ä»¶åŒ…æ‹¬ï¼š
java-1.8.0-openjdk-1.8.0.212.b04-0.el7_6.x86_64java -&gt; /etc/alternatives/java_sdkjava-1.8.0 -&gt; /etc/alternatives/java_sdk_1.8.0java-1.8.0-openjdk -&gt; /etc/alternatives/java_sdk_1.8.0_openjdkjava-openjdk -&gt; /etc/alternatives/java_sdk_openjdkjre -&gt; /etc/alternatives/jrejre-1.8.0 -&gt; /etc/alternatives/jre_1.8.0jre-1.8.0-openjdk -&gt; /etc/alternatives/jre_1.8.0_openjdkjre-1.8.0-openjdk-1.8.0.212.b04-0.el7_6.x86_64 -&gt; java-1.8.0-openjdk-1.8.0.212.b04-0.el7_6.x86_64/jrejre-openjdk -&gt; /etc/alternatives/jre_openjdk

ç¬¬ä¸€ä¸ªæ˜¯çœŸå®ç›®å½•ï¼Œå…¶ä»–çš„å…¨éƒ¨éƒ½æ˜¯è½¯é“¾æ¥ï¼ŒæŒ‡å‘/etc/alternatives/ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚æœ‰æ„æ€çš„æ˜¯ï¼ŒæŸ¥çœ‹/etc/alternatives/ç›®å½•ï¼Œé‡Œé¢å±…ç„¶ä¹Ÿæ˜¯è½¯é“¾æ¥ï¼Œè€Œä¸”æŒ‡å›äº†/usr/lib/jvm/ç›®å½•ï¼
/etc/alternatives/java_sdk -&gt; /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.212.b04-0.el7_6.x86_64/etc/alternatives/java_sdk_1.8.0 -&gt; /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.212.b04-0.el7_6.x86_64/etc/alternatives/java_sdk_1.8.0_openjdk -&gt; /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.212.b04-0.el7_6.x86_64/etc/alternatives/java_sdk_openjdk -&gt; /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.212.b04-0.el7_6.x86_64/etc/alternatives/jre -&gt; /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.212.b04-0.el7_6.x86_64/jre/etc/alternatives/jre_1.8.0 -&gt; /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.212.b04-0.el7_6.x86_64/jre/etc/alternatives/jre_1.8.0_openjdk -&gt; /usr/lib/jvm/jre-1.8.0-openjdk-1.8.0.212.b04-0.el7_6.x86_64/etc/alternatives/jre_openjdk -&gt; /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.212.b04-0.el7_6.x86_64/jre......

è€Œä¸”ï¼Œæ‰€æœ‰çš„java_sdkï¼Œéƒ½æŒ‡å‘æ˜¯/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.212.b04-0.el7_6.x86_64ï¼›æ‰€æœ‰çš„jreï¼Œéƒ½æŒ‡å‘/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.212.b04-0.el7_6.x86_64/jreã€‚jre_1.8.0_openjdkæ˜¯ä¸ªä¾‹å¤–ï¼Œä¹Ÿè®¸æ˜¯è½¯ä»¶çš„é”™è¯¯ã€‚
ç»¼ä¸Šï¼Œ/usr/lib/jvm/ç›®å½•ä¸­çš„javaã€java-1.8.0ã€java-1.8.0-openjdkã€java-openjdkã€java-1.8.0-openjdk-1.8.0.212.b04-0.el7_6.x86_64æ˜¯ç­‰ä»·çš„ï¼Œåœ¨é…ç½®JAVA_HOMEçš„æ—¶å€™å¯ä»¥ä»»é€‰å…¶ä¸€ã€‚
4ã€é…ç½®å…¨å±€å˜é‡
vim /etc/profile

åœ¨æœ€åæ·»åŠ ï¼š
#set java environmentJAVA_HOME=/usr/lib/jvm/java-1.8.0JRE_HOME=$JAVA_HOME/jreCLASS_PATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/libPATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/binexport JAVA_HOME JRE_HOME CLASS_PATH PATH

5ã€è®©ä¿®æ”¹ç«‹å³ç”Ÿæ•ˆ
source /etc/profile

6ã€æŸ¥çœ‹å®‰è£…ç»“æœ
java -versionjavajavac

Dockerfile1ã€ä¸‹è½½jdk-8u161-linux-x64.tar.gzåˆ°å½“å‰ç›®å½•
2ã€ç¼–å†™Dockerfile
FROM python:3.7.10-slim-busterADD jdk-8u161-linux-x64.tar.gz /usr/lib/jvm/ENV JAVA_HOME=/usr/lib/jvm/jdk1.8.0_161ENV JRE_HOME=$JAVA_HOME/jreENV CLASSPATH=$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATHENV PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH

3ã€ç”ŸæˆåŒ…å«javaç¯å¢ƒçš„é•œåƒ
docker built -t python:3.7.10-slim-buster-java1.8 .



]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>java</tag>
        <tag>dockerfile</tag>
      </tags>
  </entry>
  <entry>
    <title>èšç¾¤ç®—æ³•</title>
    <url>/dev-aco/</url>
    <content><![CDATA[æ¥é¾™å»è„‰çŸ¥è¯†å·¥ç¨‹è¿™é—¨è¯¾ï¼Œä¸»è¦è®²ä¸‰ç±»ç®—æ³•ï¼šæ¼”åŒ–è®¡ç®—ã€ç¾¤æ™ºèƒ½è®¡ç®—å’Œç¥ç»è®¡ç®—ã€‚
æ¼”åŒ–è®¡ç®—ï¼ŒåŒ…æ‹¬é—ä¼ ç®—æ³•ã€é—ä¼ è§„åˆ’ã€è¿›åŒ–ç­–ç•¥å’Œè¿›åŒ–è§„åˆ’ã€‚ç¾¤æ™ºèƒ½è®¡ç®—ï¼ŒåŒ…æ‹¬èšç¾¤ç®—æ³•å’Œç²’å­ç¾¤ç®—æ³•ã€‚ç¥ç»è®¡ç®—ï¼ŒåŒ…æ‹¬äººå·¥ç¥ç»ç½‘ç»œå’Œæ·±åº¦å­¦ä¹ ç¥ç»ç½‘ç»œã€‚
æœ¬æ–‡ï¼Œä¸»è¦ä»‹ç»ä¸€ä¸‹ç¾¤æ™ºèƒ½è®¡ç®—ä¸­çš„èšç¾¤ç®—æ³•ã€‚


ä»€ä¹ˆæ˜¯èšç¾¤ç®—æ³•ï¼Ÿèšç¾¤ç®—æ³•ï¼ˆant colony optimizationï¼Œ ACOï¼‰ï¼Œåˆç§°èš‚èšç®—æ³•ï¼Œæ˜¯ä¸€ç§ç”¨æ¥åœ¨å›¾ä¸­å¯»æ‰¾ä¼˜åŒ–è·¯å¾„çš„æœºç‡å‹ç®—æ³•ã€‚å®ƒç”±Marco Dorigoäº1992å¹´åœ¨ä»–çš„åšå£«è®ºæ–‡ä¸­æå‡ºï¼Œå…¶çµæ„Ÿæ¥æºäºèš‚èšåœ¨å¯»æ‰¾é£Ÿç‰©è¿‡ç¨‹ä¸­å‘ç°è·¯å¾„çš„è¡Œä¸ºã€‚èšç¾¤ç®—æ³•æ˜¯ä¸€ç§æ¨¡æ‹Ÿè¿›åŒ–ç®—æ³•ï¼Œåˆæ­¥çš„ç ”ç©¶è¡¨æ˜è¯¥ç®—æ³•å…·æœ‰è®¸å¤šä¼˜è‰¯çš„æ€§è´¨ï¼Œå¹¶ä¸”ç°åœ¨å·²ç”¨äºæˆ‘ä»¬ç”Ÿæ´»çš„æ–¹æ–¹é¢é¢ã€‚
ä¸»è¦å†…å®¹åŸºæœ¬æ¦‚å¿µï¼ˆæœ€å¥½ä¸¾ä¾‹è¯´æ˜ï¼‰ã€èšç¾¤ç®—æ³•æè¿°ã€èšç¾¤ç®—æ³•å®ä¾‹ã€èšç¾¤ç®—æ³•ç‰¹ç‚¹ç­‰ã€‚ï¼ˆç»†èŠ‚ä»‹ç»ï¼Œé€šå¸¸20åˆ†é’Ÿå·¦å³ï¼‰
åº”ç”¨é¢†åŸŸåˆ©ç”¨æ–‡çŒ®æ³•æ¥æ€»ç»“èšç¾¤ç®—æ³•å„ç§é¢†åŸŸçš„åº”ç”¨ç°çŠ¶ï¼ŒæŠŠä½ é˜…è¯»çš„æ–‡çŒ®ï¼ˆè‡³å°‘3ç¯‡ï¼‰æå‰3å¤©å‘åˆ°äº‘ç›˜ä¸­. ï¼ˆé‡ç‚¹å†…å®¹ä»‹ç»ï¼Œé€šå¸¸è®²è§£20åˆ†é’Ÿå·¦å³ï¼‰ï¼Œæ¯”å¦‚ï¼Œa)èšç¾¤ç®—æ³•å…·ä½“å¦‚ä½•å®ç°çš„ï¼Ÿb)æ€§èƒ½å¦‚ä½•ï¼Ÿå­˜åœ¨æ€æ ·çš„é—®é¢˜ï¼Ÿæ”¹è¿›æ–¹å‘å¦‚ä½•ï¼Ÿc)åœ¨å“ªäº›é¢†åŸŸçš„å“ªäº›æ–¹é¢åº”ç”¨äº†èšç¾¤ç®—æ³•ï¼Ÿ
èšç¾¤ç®—æ³•å®ç°èš‚èšåœ¨è¿åŠ¨è¿‡ç¨‹ä¸­ï¼Œä¼šç•™ä¸‹ä¸€ç§ç§°ä¸ºä¿¡æ¯ç´ çš„ä¸œè¥¿ï¼Œå¹¶ä¸”ä¼šéšç€ç§»åŠ¨çš„è·ç¦»ï¼Œæ’­æ•£çš„ä¿¡æ¯ç´ è¶Šæ¥è¶Šå°‘ï¼Œæ‰€ä»¥å¾€å¾€åœ¨å®¶æˆ–è€…é£Ÿç‰©çš„å‘¨å›´ï¼Œä¿¡æ¯ç´ çš„æµ“åº¦æ˜¯æœ€å¼ºçš„ï¼Œè€Œèš‚èšè‡ªèº«ä¼šæ ¹æ®ä¿¡æ¯ç´ å»é€‰æ‹©æ–¹å‘ï¼Œå½“ç„¶ä¿¡æ¯ç´ è¶Šæµ“ï¼Œè¢«é€‰æ‹©çš„æ¦‚ç‡ä¹Ÿå°±è¶Šå¤§ï¼Œå¹¶ä¸”ä¿¡æ¯ç´ æœ¬èº«å…·æœ‰ä¸€å®šçš„æŒ¥å‘ä½œç”¨ã€‚èš‚èšçš„è¿åŠ¨è¿‡ç¨‹å¯ä»¥ç®€å•å½’çº³å¦‚ä¸‹ï¼š
1ã€å½“å‘¨å›´æ²¡æœ‰ä¿¡æ¯ç´ æŒ‡å¼•æ—¶ï¼Œèš‚èšçš„è¿åŠ¨å…·æœ‰ä¸€å®šçš„æƒ¯æ€§ï¼Œå¹¶æœ‰ä¸€å®šçš„æ¦‚ç‡é€‰æ‹©å…¶ä»–æ–¹å‘ã€‚2ã€å½“å‘¨å›´æœ‰ä¿¡æ¯ç´ çš„æŒ‡å¼•æ—¶ï¼ŒæŒ‰ç…§ä¿¡æ¯ç´ çš„æµ“åº¦å¼ºåº¦æ¦‚ç‡æ€§çš„é€‰æ‹©è¿åŠ¨æ–¹å‘ã€‚3ã€æ‰¾é£Ÿç‰©æ—¶ï¼Œèš‚èšç•™ä¸‹å®¶ç›¸å…³çš„Aä¿¡æ¯ç´ ï¼Œæ‰¾å®¶æ—¶ï¼Œèš‚èšç•™ä¸‹é£Ÿç‰©ç›¸å…³çš„Bä¿¡æ¯ç´ ï¼Œå¹¶éšç€ç§»åŠ¨è·ç¦»çš„å¢åŠ ï¼Œæ´’æ’­çš„ä¿¡æ¯ç´ è¶Šæ¥è¶Šå°‘ã€‚4ã€éšç€æ—¶é—´æ¨ç§»ï¼Œä¿¡æ¯ç´ ä¼šè‡ªè¡ŒæŒ¥å‘ã€‚
ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå¦‚æœç°åœ¨æœ‰ä¸¤æ¡é€šå¾€é£Ÿç‰©çš„è·¯å¾„ï¼Œä¸€æ¡è¾ƒé•¿è·¯å¾„Aï¼Œä¸€æ¡è¾ƒçŸ­è·¯å¾„Bï¼Œè™½ç„¶åˆšå¼€å§‹Aï¼ŒBè·¯å¾„ä¸Šéƒ½æœ‰èš‚èšï¼Œåˆå› ä¸ºBæ¯”AçŸ­ï¼Œèš‚èšé€šè¿‡BèŠ±è´¹çš„æ—¶é—´è¾ƒçŸ­ï¼Œéšç€æ—¶é—´çš„æ¨ç§»å’Œä¿¡æ¯ç´ çš„æŒ¥å‘ï¼Œé€æ¸çš„Bä¸Šçš„ä¿¡æ¯ç´ æµ“åº¦ä¼šå¼ºäºAï¼Œè¿™æ—¶å€™å› ä¸ºBçš„æµ“åº¦æ¯”Aå¼ºï¼Œè¶Šæ¥è¶Šå¤šçš„èš‚èšä¼šé€‰æ‹©Bï¼Œè€Œè¿™æ—¶å€™Bä¸Šçš„æµ“åº¦åªä¼šè¶Šæ¥è¶Šå¼ºã€‚å¦‚æœèš‚èšä¸€å¼€å§‹åªåœ¨Aä¸Šå‘¢ï¼Œæ³¨æ„èš‚èšçš„ç§»åŠ¨å…·æœ‰ä¸€å®šå°æ¦‚ç‡çš„éšæœºæ€§ï¼Œæ‰€ä»¥å½“ä¸€éƒ¨åˆ†èš‚èšæ‰¾åˆ°Bæ—¶ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œèš‚èšä¼šæ”¶æ•›åˆ°Bä¸Šï¼Œä»è€Œå¯ä»¥è·³å‡ºå±€éƒ¨æœ€ä¼˜ã€‚
æ€§èƒ½ã€é—®é¢˜å’Œæ”¹è¿›é—®é¢˜å½“èš‚èšåœ¨ä¸€æ¡è·¯å¾„ä¸Šè§…é£Ÿå¾ˆä¹…æ—¶ï¼Œå†æ”¾ç½®ä¸€ä¸ªè¿‘çš„é£Ÿç‰©åŸºæœ¬æ²¡æœ‰æ•ˆæœã€‚å¯ä»¥ç†è§£ä¸ºå½“ä¸€åªèš‚èšæ‰¾åˆ°ä¸€æ¡è·¯å¾„æ—¶ï¼Œè¿‡äº†å¾ˆä¹…çš„æ—¶é—´ï¼Œå¤§å¤šæ•°èš‚èšéƒ½é€‰æ‹©äº†è¿™æ¡è·¯å¾„ï¼Œå°±åœ¨è¿™æ—¶å€™ï¼Œçªç„¶æœ‰ä¸€åªèš‚èšæ‰¾åˆ°äº†è¾ƒè¿‘çš„é£Ÿç‰©ï¼Œä½†å› ä¸ºæ—¶é—´è¿‡å¾—å¤ªä¹…ï¼Œä¸¤æ¡è·¯å¾„ä¸Šæµ“åº¦ç›¸å·®å¤ªå¤§ï¼ˆæµ“åº¦è¶Šå¤§ï¼Œè¢«é€‰æ‹©çš„æ¦‚ç‡å°±è¶Šå¤§ï¼‰ï¼Œæ•´ä¸ªç³»ç»ŸåŸºæœ¬å·²ç»åœæ»äº†ï¼Œé™·å…¥äº†å±€éƒ¨æœ€ä¼˜ã€‚æ‰€ä»¥ç®€å•çš„èš‚èšç³»ç»Ÿæ˜¯å­˜åœ¨ä¸€äº›é—®é¢˜çš„ï¼Œå¦‚ï¼š
1ã€æœç´¢åˆ°ä¸€å®šç¨‹åº¦ï¼Œä¼šå‡ºç°åœæ»çŠ¶æ€ï¼Œé™·å…¥å±€éƒ¨æœ€ä¼˜çš„æƒ…å†µã€‚2ã€ç›²ç›®çš„éšæœºæœç´¢ï¼Œæœç´¢æ—¶é—´è¾ƒé•¿ã€‚
æ”¹è¿›è§£å†³ä»¥ä¸Šé—®é¢˜çš„åŠæ³•ï¼š
1ã€å¢åŠ èš‚èšçš„æ•°é‡ã€‚2ã€å‡å°æ®‹ç•™çš„ä¿¡æ¯ç´ ï¼ˆæ‰€æœ‰èš‚èšéƒ½å‡å°ï¼Œéƒ¨åˆ†èš‚èšå‡å°ï¼‰ã€‚3ã€å‡å°èš‚èšé€‰æ‹©ä¿¡æ¯ç´ å¼ºçš„è·¯å¾„çš„æ¦‚ç‡ã€‚4ã€ç»™èš‚èšå’Œç¯å¢ƒä¸€å®šçš„è®°å¿†èƒ½åŠ›ï¼Œå‡å°‘æœç´¢ç©ºé—´ï¼Œä»è€Œå‡å°‘æœç´¢æ—¶é—´ã€‚
æ”¹è¿›å°ç»“
1ã€èš‚èšæ•°é‡çš„é€‰æ‹©ã€‚èš‚èšæ•°é‡ m æ˜¯èšç¾¤ç®—æ³•çš„é‡è¦å‚æ•°ä¹‹ä¸€ã€‚èš‚èšæ•°é‡å¤šï¼Œå¯ä»¥æé«˜èšç¾¤ç®—æ³•çš„å…¨å±€æœç´¢èƒ½åŠ›ä»¥åŠç®—æ³•çš„ç¨³å®šæ€§ï¼Œä½†å¤§é‡è¢«æœç´¢è¿‡çš„è·¯å¾„ä¿¡æ¯ç´ å˜å¾—å¹³å‡ï¼Œä¼šå‡å¼±ä¿¡æ¯æ­£åé¦ˆçš„ä½œç”¨ï¼Œä½¿æœç´¢çš„éšæœºæ€§å¢å¼ºï¼Œä»è€Œé™ä½æ”¶æ•›é€Ÿåº¦ï¼›åä¹‹ï¼Œèš‚èšæ•°é‡å°‘ï¼Œç‰¹åˆ«æ˜¯å½“è¦å¤„ç†çš„é—®é¢˜è§„æ¨¡æ¯”è¾ƒå¤§æ—¶ï¼Œè€Œä»æœªæœç´¢è¿‡çš„è·¯å¾„ä¿¡æ¯ç´ æ¥è¿‘0ï¼Œèšç¾¤ä¼šå€¾å‘é€‰æ‹©ä¿¡æ¯é‡å¤§çš„è·¯å¾„ï¼Œä¼šä½¿æœç´¢çš„éšæœºæ€§å‡å¼±ï¼Œè™½ç„¶æ”¶æ•›é€Ÿåº¦åŠ å¿«ï¼Œä½†ä¼šä½¿ç®—æ³•çš„å…¨å±€æœç´¢èƒ½åŠ›é™ä½ï¼Œç¨³å®šæ€§å·®ï¼Œå®¹æ˜“å‡ºç°åœæ»ç°è±¡ï¼ˆå±€éƒ¨æœ€ä¼˜ï¼‰ã€‚
2ã€ä¿¡æ¯å¯å‘å¼å› å­çš„é€‰æ‹©ã€‚ä¿¡æ¯å¯å‘å¼å› å­Î±çš„å¤§å°åæ˜ äº†ä¿¡æ¯ç´ å› ç´ ä½œç”¨çš„å¼ºåº¦ã€‚å…¶å€¼è¶Šå¤§ï¼Œèš‚èšé€‰æ‹©ä»¥å‰èµ°è¿‡è·¯å¾„çš„å¯èƒ½æ€§è¶Šå¤§ï¼Œæœç´¢çš„éšæœºæ€§å‡å¼±ã€‚å½“Î±å€¼è¿‡å¤§æ—¶ä¼šä½¿èšç¾¤çš„æœç´¢è¿‡æ—©é™·äºå±€éƒ¨æœ€ä¼˜ï¼›å½“Î±å€¼è¾ƒå°æ—¶ï¼Œæœç´¢çš„éšæœºæ€§å¢å¼ºï¼Œç®—æ³•æ”¶æ•›é€Ÿåº¦å‡æ…¢ã€‚
3ã€æœŸæœ›å€¼å¯å‘å¼å› å­çš„é€‰æ‹©ã€‚æœŸæœ›å€¼å¯å‘å¼å› å­Î²çš„å¤§å°åæ˜ äº†å…ˆéªŒæ€§ã€ç¡®å®šæ€§å› ç´ ä½œç”¨çš„å¼ºåº¦ã€‚å…¶å€¼è¶Šå¤§ï¼Œèš‚èšåœ¨æŸä¸ªå±€éƒ¨ç‚¹ä¸Šé€‰æ‹©å±€éƒ¨æœ€çŸ­è·¯å¾„çš„å¯èƒ½æ€§è¶Šå¤§ï¼Œç®—æ³•çš„éšæœºæ€§å‡å¼±ï¼Œæ˜“äºé™·å…¥å±€éƒ¨æœ€ä¼˜ï¼›è€ŒÎ²è¿‡å°ï¼Œå°†å¯¼è‡´èš‚èšç¾¤ä½“é™·å…¥çº¯ç²¹çš„éšæœºæœç´¢ï¼Œå¾ˆéš¾æ‰¾åˆ°æœ€ä¼˜è§£ã€‚
4ã€ä¿¡æ¯ç´ æŒ¥å‘å› å­çš„é€‰æ‹©ã€‚ä¿¡æ¯ç´ æŒ¥å‘å› å­ Ï çš„å¤§å°ç›´æ¥å…³ç³»åˆ°èšç¾¤ç®—æ³•çš„å…¨å±€æœç´¢èƒ½åŠ›åŠå…¶æ”¶æ•›é€Ÿåº¦ã€‚ Ï å°±æ˜¯ä¿¡æ¯ç´ æ®‹ç•™ç³»æ•°ï¼Œåæ˜ äº†ä¿¡æ¯æ¶ˆé€ç¨‹åº¦ã€‚è¾ƒå¤§æ—¶ï¼Œç”±äºä¿¡æ¯æ­£åé¦ˆçš„ä½œç”¨å ä¸»å¯¼åœ°ä½ï¼Œä»¥å‰æœç´¢è¿‡çš„è·¯å¾„è¢«å†æ¬¡é€‰æ‹©çš„å¯èƒ½æ€§è¿‡å¤§ï¼Œæœç´¢çš„éšæœºæ€§å‡å¼±ï¼›åä¹‹ï¼Œå½“ Ï å¾ˆå°æ—¶ï¼Œä¿¡æ¯æ­£åé¦ˆçš„ä½œç”¨ç›¸å¯¹è¾ƒå¼±ï¼Œæœç´¢çš„éšæœºæ€§å¢å¼ºï¼Œå› æ­¤èšç¾¤ç®—æ³•æ”¶æ•›é€Ÿåº¦å¾ˆæ…¢ã€‚
æ”¹è¿›æ–¹æ³•ï¼šæœ€å¤§æœ€å°èšç¾¤ç®—æ³•ã€æœ€ä¼˜æœ€å·®èšç¾¤ç®—æ³•ã€åˆ†æ®µå˜å¼‚èšç¾¤ç®—æ³•ã€æ’åºèšç¾¤ç®—æ³•ã€åŸºäºé—ä¼ ç®—æ³•çš„èšç¾¤ç®—æ³•ç­‰ã€‚
èšç¾¤ç®—æ³•åº”ç”¨ç»„åˆä¼˜åŒ–é—®é¢˜æ—…è¡Œå•†é—®é¢˜ã€0-1èƒŒåŒ…é—®é¢˜ã€åŠ å·¥è°ƒåº¦é—®é¢˜ã€è£…ç®±é—®é¢˜ã€å›¾ç€è‰²é—®é¢˜ã€èšç±»é—®é¢˜ã€æœ€å¤§å›¢é—®é¢˜ã€æœ€å¤§å‰²é—®é¢˜ã€‚ç†è®ºä¸Šæ¯ä¸ªç»„åˆä¼˜åŒ–é—®é¢˜éƒ½å¯ä»¥é€šè¿‡æšä¸¾çš„æ–¹æ³•å¾—åˆ°æœ€ä¼˜è§£ï¼Œä½†æšä¸¾æ˜¯ä»¥æ—¶é—´ä¸ºä»£ä»·çš„ã€‚æœ‰çš„æšä¸¾æ—¶é—´è¿˜èƒ½æ¥å—ï¼Œæœ‰çš„åˆ™ä¸å¯èƒ½æ¥å—ï¼Œå³æ‰€è°“çš„â€œç»„åˆçˆ†ç‚¸â€ã€‚å¯¹äºNPå®Œå…¨çš„ç»„åˆä¼˜åŒ–é—®é¢˜ï¼Œè‡³ä»Šå°šæ— å¾ˆå¥½çš„è§£æç®—æ³•ï¼Œä¸€èˆ¬é‡‡ç”¨å¯å‘å¼ç®—æ³•æ¥è§£å†³ã€‚
å‚è€ƒæ–‡æ¡£è‡ªè¯èšç¾¤ç®—æ³•
è‡ªè¯ç²’å­ç¾¤ç®—æ³•
è‡ªè¯é—ä¼ ç®—æ³•
NPå®Œå…¨é—®é¢˜
]]></content>
      <categories>
        <category>engineering</category>
        <category>algorithm</category>
      </categories>
      <tags>
        <tag>çŸ¥è¯†å·¥ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç®—æœºç½‘ç»œæ‘˜è¦ï¼ˆæ¨é²²æ•™æˆï¼‰</title>
    <url>/dev-computer-network/</url>
    <content><![CDATA[å‰è¨€è‹±å›½essexå¤§å­¦æ¨é²²æ•™æˆï¼Œç»™æˆ‘ä»¬ä¸Šäº†ä¸€å‘¨çš„è®¡ç®—æœºç½‘ç»œè¯¾ç¨‹ï¼Œæ”¶è·äº†å¾ˆå¤šâ€œcommon senseâ€ã€‚ä»¥ä¸‹ç®€å•è®°å½•ä¸€ä¸‹ï¼Œå¤‡å¿˜ã€‚


ä¸‰ä¸ªé‡è¦æ¦‚å¿µåè®®åè®®å³çº¦å®šï¼Œå¯¹ç­‰å±‚ä¹‹é—´çš„çº¦å®šã€‚
æœåŠ¡ç›¸é‚»ä¸¤å±‚ä¹‹é—´ï¼Œä¸‹å±‚ä¸ºä¸Šå±‚æä¾›æœåŠ¡ã€‚
åœ°å€ç½‘å¡åœ°å€ã€IPåœ°å€ã€ç½‘å€ç­‰ç­‰ã€‚
ç½‘ç»œåˆ†å±‚åˆ†å‡ å±‚ä¸é‡è¦ï¼Œä¸ºä»€ä¹ˆåˆ†å±‚ï¼Ÿ
æ‹¿åˆ°åè®®ã€è®¾å¤‡ã€åœ°å€ï¼Œå…ˆçœ‹åœ¨å“ªä¸€å±‚ã€‚
TCPå’ŒUDPTCPå¯é ï¼Œæœ‰è¿æ¥ã€‚
UDPå®æ—¶ï¼Œæ²¡å¿…è¦é‡ä¼ ï¼Œæ— è¿æ¥ã€‚
socketsocketï¼Œå¥—æ¥å­—ï¼Œ48ä½ã€‚IPï¼ˆ32ä½ï¼‰+ ç«¯å£å·ï¼ˆ16ä½ï¼‰ = 48ä½ã€‚
å…¶ä»–å¤šç”¨å›¾ç‰‡ï¼Œè§£é‡ŠåŸç†ã€‚
å¤§å­¦é‡Œï¼Œæœ€é‡è¦çš„æ˜¯æ”¶è·â€œcommon senseâ€ã€‚
ä¼˜ç­‰ç”Ÿå’Œå·®ç”Ÿï¼Œæœ€å¤§çš„åŒºåˆ«ï¼Œåœ¨äºæ€è€ƒé—®é¢˜çš„æ–¹å¼ã€‚ä¼˜ç­‰ç”Ÿä¸æ˜¯ä¸ºäº†ç ”ç©¶è€Œç ”ç©¶ï¼Œè€Œæ˜¯ä¸ºäº†è§£å†³é—®é¢˜è€Œç ”ç©¶ã€‚è€Œå·®ç”Ÿï¼Œåœ¨è®ºæ–‡ä¸­ç”¨äº†å¾ˆå¤šæ–¹æ³•ï¼Œä½†æ˜¯è¿é—®é¢˜æ˜¯ä»€ä¹ˆéƒ½æ²¡ææ¸…æ¥šã€‚å¾ˆå¤šæ—¶å€™ï¼Œæå‡ºé—®é¢˜æ¯”è§£å†³é—®é¢˜æ›´é‡è¦ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>å‡½æ•°å¼ç¼–ç¨‹ä¹‹Schemeå…¥é—¨</title>
    <url>/dev-scheme-start/</url>
    <content><![CDATA[å‰è¨€Lispæ˜¯Fortranè¯­è¨€ä¹‹åç¬¬äºŒå¤è€çš„é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œè‡ªæˆç«‹ä¹‹åˆå·²å‘ç”Ÿäº†å¾ˆå¤§å˜åŒ–ã€‚å¦‚ä»Šï¼Œæœ€å¹¿ä¸ºäººçŸ¥çš„é€šç”¨çš„æ˜¯Lispæ–¹è¨€ï¼šCommon Lispå’ŒSchemeã€‚
Common Lispå’ŒSchemeæœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿä¸ªäººè®¤ä¸ºï¼ŒCommon Lispå’ŒSchemeï¼Œå°±åƒç‹®å­å’Œå®¶çŠ¬ã€‚ç‹®å­æ›´åŠ å¼ºå¤§ï¼Œéš¾ä»¥é©¯æœï¼›å®¶çŠ¬æ›´åŠ å°å·§ï¼Œå®¹æ˜“é©¯æœã€‚è€Œé€‰æ‹©å“ªä¸€ç§ï¼Œå–å†³äºå®é™…éœ€è¦ã€‚é‰´äºéƒåŒå­¦åªæ˜¯éœ€è¦å­¦ä¹ ä¸€ä¸‹å‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³ï¼Œæ‰€ä»¥Schemeè¶³å¤Ÿäº†ã€‚
PSï¼šMIT çš„ä¸¤æœ¬è‘—åæ•™æ SICPï¼ˆStructure and Interpretation of Computer Programsï¼‰å’Œ  HTDPï¼ˆHow to Design Programsï¼‰éƒ½æ˜¯ä»¥Schemeä¸ºåŸºç¡€çš„ã€‚


å®‰è£…mit-scheme1ã€è¿›å…¥mit-schemeå®˜ç½‘ï¼Œä¸‹è½½å¯¹åº”å¹³å°çš„mit-schemeï¼ˆä¸‹æ–‡ä»¥windowsä¸ºä¾‹ï¼‰ã€‚
2ã€å®‰è£…ä¸‹è½½çš„mit-schemeï¼ˆä¸‹æ–‡ç®€ç§°schemeï¼‰ã€‚
3ã€åŒå‡»schemeå¿«æ·æ–¹å¼ï¼Œå¦‚æœå‡ºç°å¦‚ä¸‹ç•Œé¢ï¼Œè¡¨æ˜å®‰è£…æˆåŠŸã€‚
PSï¼šå¦‚æœæ‰“å¼€schemeçš„æ—¶å€™æŠ¥é”™â€œRequested allocation is too large. Try with smaller argument to â€“heapâ€ã€‚é‚£ä¹ˆï¼Œåœ¨ç¨‹åºçš„å¿«æ·æ–¹å¼ä¸Šå³é”®ï¼Œå±æ€§ï¼Œåœ¨â€œç›®æ ‡â€é‡ŒåŠ ä¸Š--heap 512ã€‚ 
4ã€æŠŠå®‰è£…è·¯å¾„åŠ å…¥ç¯å¢ƒå˜é‡ã€‚ä¾‹å¦‚ï¼Œæˆ‘çš„schemeå®‰è£…è·¯å¾„ä¸ºC:\Program Files (x86)\MIT-GNU Schemeï¼Œé‚£ä¹ˆï¼Œåœ¨pathä¸­åŠ å…¥C:\Program Files (x86)\MIT-GNU Scheme\binã€‚åŒæ—¶ï¼Œæ–°å»ºç³»ç»Ÿå˜é‡MITSCHEME_LIBRARY_PATHï¼Œå€¼ä¸ºC:\Program Files (x86)\MIT-GNU Scheme\libã€‚
5ã€æµ‹è¯•schemeã€‚æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¾“å…¥mit-schemeï¼Œå¼¹å‡ºå¦‚ä¸‹ç•Œé¢ï¼Œè¡¨æ˜å®‰è£…é…ç½®æˆåŠŸã€‚
6ã€é€€å‡ºschemeã€‚åœ¨schemeå‘½ä»¤çª—å£è¾“å…¥(exit)ï¼Œé€‰æ‹©yï¼Œé€€å‡ºschemeå‘½ä»¤çª—å£ã€‚
hello worldåœ¨schemeå‘½ä»¤çª—å£ä¸­è¾“å…¥ä»£ç éå¸¸éº»çƒ¦ï¼Œå…‰æ ‡ä¸èƒ½å›é€€å’Œä¸Šä¸‹ç§»åŠ¨ï¼Œæ‰€ä»¥æ¯”è¾ƒç®€å•çš„æ–¹æ³•å°±æ˜¯è¿è¡Œå·²ç»å†™å®Œçš„æ–‡ä»¶ã€‚
æ–¹æ³•ä¸€1ã€æ–°å»ºhello.scmæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
;The first program(begin    (display &quot;Hello, World!&quot;)    (newline))

2ã€è¿è¡Œhello.scmã€‚mit-scheme -load hello.scmï¼Œæ•ˆæœå¦‚ä¸‹ï¼š
PSï¼šå¦‚æœæ­¤æ—¶æŠ¥é”™â€œRequested allocation is too large. Try with smaller argument to â€“heapâ€ï¼Œé‚£ä¹ˆï¼Œä¿®æ”¹å‘½ä»¤ä¸ºmit-scheme --heap 128 -load hello.scmã€‚
æ–¹æ³•äºŒæ‰“å¼€mit-schemeçª—å£åï¼Œ(cd &quot;e:\\temp&quot;)ï¼Œ(load &quot;hello.scm&quot;)ã€‚
åŸºæœ¬è¯­æ³•æ•°æ®ç±»å‹Schemeä¸­çš„ç®€å•æ•°æ®ç±»å‹åŒ…å« booleanï¼ˆå¸ƒå°”ç±»å‹ï¼‰ï¼Œnumberï¼ˆæ•°å­—ç±»å‹ï¼‰ï¼Œcharacterï¼ˆå­—ç¬¦ç±»å‹ï¼‰ å’Œ symbolï¼ˆæ ‡è¯†ç¬¦ç±»å‹ï¼‰ã€‚
å¤åˆæ•°æ®ç±»å‹æ˜¯ä»¥ç»„åˆçš„æ–¹å¼é€šè¿‡ç»„åˆå…¶å®ƒæ•°æ®ç±»å‹æ•°æ®æ¥è·å¾—ã€‚åŒ…æ‹¬stringã€vectorã€dotted pairã€listç­‰ã€‚
æ•°æ®ç±»å‹è¯¦è§£ï¼šhttp://www.kancloud.cn/wizardforcel/teach-yourself-scheme/147165
ä»£ç ç»“æ„å‡½æ•°å¼ç¼–ç¨‹åªç”¨â€œè¡¨è¾¾å¼â€ï¼Œä¸ç”¨â€œè¯­å¥â€ã€‚
â€œè¡¨è¾¾å¼â€ï¼ˆexpressionï¼‰æ˜¯ä¸€ä¸ªå•çº¯çš„è¿ç®—è¿‡ç¨‹ï¼Œæ€»æ˜¯æœ‰è¿”å›å€¼ï¼›â€œè¯­å¥â€ï¼ˆstatementï¼‰æ˜¯æ‰§è¡ŒæŸç§æ“ä½œï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚å‡½æ•°å¼ç¼–ç¨‹è¦æ±‚ï¼Œåªä½¿ç”¨è¡¨è¾¾å¼ï¼Œä¸ä½¿ç”¨è¯­å¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸€æ­¥éƒ½æ˜¯å•çº¯çš„è¿ç®—ï¼Œè€Œä¸”éƒ½æœ‰è¿”å›å€¼ã€‚
åŸå› æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„å¼€å‘åŠ¨æœºï¼Œä¸€å¼€å§‹å°±æ˜¯ä¸ºäº†å¤„ç†è¿ç®—ï¼ˆcomputationï¼‰ï¼Œä¸è€ƒè™‘ç³»ç»Ÿçš„è¯»å†™ï¼ˆI/Oï¼‰ã€‚â€è¯­å¥â€å±äºå¯¹ç³»ç»Ÿçš„è¯»å†™æ“ä½œï¼Œæ‰€ä»¥å°±è¢«æ’æ–¥åœ¨å¤–ã€‚å½“ç„¶ï¼Œå®é™…åº”ç”¨ä¸­ï¼Œä¸åšI/Oæ˜¯ä¸å¯èƒ½çš„ã€‚å› æ­¤ï¼Œç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œå‡½æ•°å¼ç¼–ç¨‹åªè¦æ±‚æŠŠI/Oé™åˆ¶åˆ°æœ€å°ï¼Œä¸è¦æœ‰ä¸å¿…è¦çš„è¯»å†™è¡Œä¸ºï¼Œä¿æŒè®¡ç®—è¿‡ç¨‹çš„å•çº¯æ€§ã€‚
åŸºæœ¬æ ¼å¼ï¼š(function_name arg0,arg1,...)
ç¤ºä¾‹ï¼š
(display &quot;Hello, World!&quot;)(newline)(exit)(number? 42)(eqv? 42 42)(&gt;= 4.5 3)

è¿„ä»Šä¸ºæ­¢æˆ‘ä»¬æä¾›çš„Schemeç¤ºä¾‹ç¨‹åºéƒ½æ˜¯s-è¡¨è¾¾å¼ã€‚è¿™å¯¹æ‰€æœ‰çš„Schemeç¨‹åºæ¥è¯´éƒ½é€‚ç”¨ï¼šç¨‹åºæ˜¯æ•°æ®ã€‚
Schemeè¿è¡Œä¸€ä¸ªåˆ—è¡¨å½¢å¼çš„ä»£ç ç»“æ„æ—¶ï¼Œé¦–å…ˆè¦æ£€æµ‹åˆ—è¡¨ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæˆ–åˆ—è¡¨å¤´ã€‚å¦‚æœè¿™ä¸ªåˆ—è¡¨å¤´æ˜¯ä¸€ä¸ªè¿‡ç¨‹ï¼Œåˆ™ä»£ç ç»“æ„çš„å…¶ä½™éƒ¨åˆ†åˆ™è¢«å½“æˆå°†ä¼ é€’ç»™è¿™ä¸ªè¿‡ç¨‹çš„å‚æ•°é›†ï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹å°†æ¥æ”¶è¿™äº›å‚æ•°å¹¶è¿ç®—ã€‚
å¦‚æœè¿™ä¸ªä»£ç ç»“æ„çš„åˆ—è¡¨å¤´æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ä»£ç ç»“æ„ï¼Œåˆ™å°†ä¼šé‡‡ç”¨ä¸€ç§ç‰¹æ®Šçš„æ–¹å¼æ¥è¿è¡Œã€‚å¸¸è§çš„ç‰¹æ®Šçš„ä»£ç ç»“æ„æœ‰beginï¼Œ defineå’Œ set!ã€‚
beginå¯ä»¥è®©å®ƒçš„å­ç»“æ„å¯ä»¥æœ‰åºçš„è¿ç®—ï¼Œè€Œæœ€åä¸€ä¸ªå­ç»“æ„çš„ç»“æœå°†æˆä¸ºæ•´ä¸ªä»£ç ç»“æ„çš„è¿è¡Œç»“æœã€‚defineä¼šå£°æ˜å¹¶ä¼šåˆå§‹åŒ–ä¸€ä¸ªå˜é‡ã€‚set! å¯ä»¥ç»™å·²ç»å­˜åœ¨çš„å˜é‡é‡æ–°èµ‹å€¼ã€‚
è¿‡ç¨‹ï¼ˆå‡½æ•°ï¼‰å®šä¹‰åŒ¿åè¿‡ç¨‹æˆ‘ä»¬å·²ç»è§è¿‡äº†è®¸å¤šç³»ç»Ÿè¿‡ç¨‹ï¼Œæ¯”å¦‚ï¼Œconsï¼Œ string-&gt;listç­‰ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨ä»£ç ç»“æ„lambdaæ¥åˆ›å»ºè‡ªå®šä¹‰çš„è¿‡ç¨‹ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢å®šä¹‰äº†ä¸€ä¸ªè¿‡ç¨‹å¯ä»¥åœ¨å®ƒçš„å‚æ•°ä¸ŠåŠ ä¸Š2ï¼š
(lambda (x) (+ x 2))

ç¬¬ä¸€ä¸ªå­ç»“æ„ï¼Œ(x)ï¼Œæ˜¯å‚æ•°åˆ—è¡¨ã€‚å…¶ä½™çš„å­ç»“æ„åˆ™æ„æˆäº†è¿™ä¸ªè¿‡ç¨‹æ‰§è¡Œä½“ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥åƒç³»ç»Ÿè¿‡ç¨‹ä¸€æ ·ï¼Œé€šè¿‡ä¼ é€’ä¸€ä¸ªå‚æ•°å®Œæˆè°ƒç”¨ï¼š
((lambda (x) (+ x 2)) 5)


ä¸€èˆ¬å®šä¹‰å¦‚æœæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿå¤šæ¬¡è°ƒç”¨è¿™ä¸ªç›¸åŒçš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥æ¯æ¬¡ä½¿ç”¨lambdaé‡æ–°åˆ›å»ºä¸€ä¸ªå¤åˆ¶å“ï¼Œä½†æˆ‘ä»¬æœ‰æ›´å¥½çš„æ–¹å¼ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå˜é‡æ¥æ‰¿è½½è¿™ä¸ªè¿‡ç¨‹ï¼š
(define add2  (lambda (x) (+ x 2)))

åªè¦éœ€è¦ï¼Œæˆ‘ä»¬å°±å¯ä»¥åå¤ä½¿ç”¨add2ä¸ºå‚æ•°åŠ ä¸Š2ï¼š
(add2 4) =&gt;  6(add2 9) =&gt;  11
å®šä¹‰è¿‡ç¨‹è¿˜å¯ä»¥æœ‰å¦ä¸€ç§ç®€å•çš„æ–¹å¼ï¼Œç›´æ¥ç”¨defineè€Œä¸ä½¿ç”¨lambdaæ¥åˆ›å»ºï¼š
(define (add2 x)       (+ x 2))

è¿‡ç¨‹çš„å‚æ•°lambda è¿‡ç¨‹çš„å‚æ•°ç”±å®ƒçš„ç¬¬ä¸€ä¸ªå­ç»“æ„ï¼ˆç´§è·Ÿç€lambdaæ ‡è®°çš„é‚£ä¸ªç»“æ„ï¼‰æ¥å®šä¹‰ã€‚add2æ˜¯ä¸€ä¸ªå•å‚æ•°æˆ–ä¸€å…ƒè¿‡ç¨‹ï¼Œæ‰€ä»¥å®ƒçš„å‚æ•°åˆ—è¡¨æ˜¯åªæœ‰ä¸€ä¸ªå…ƒç´ çš„åˆ—è¡¨(x)ã€‚æ ‡è®°xä½œä¸ºä¸€ä¸ªæ‰¿è½½è¿‡ç¨‹å‚æ•°çš„å˜é‡è€Œå­˜åœ¨ã€‚åœ¨è¿‡ç¨‹ä½“ä¸­å‡ºç°çš„æ‰€æœ‰xéƒ½æ˜¯æŒ‡ä»£è¿™ä¸ªè¿‡ç¨‹çš„å‚æ•°ã€‚å¯¹è¿™ä¸ªè¿‡ç¨‹ä½“æ¥è¯´xæ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ã€‚
æˆ‘ä»¬å¯ä»¥ä¸ºä¸¤ä¸ªå‚æ•°çš„è¿‡ç¨‹æä¾›ä¸¤ä¸ªå…ƒç´ çš„åˆ—è¡¨åšå‚æ•°ï¼Œé€šå¸¸éƒ½æ˜¯ä¸ºnä¸ªå‚æ•°çš„è¿‡ç¨‹æä¾›nä¸ªå…ƒç´ çš„åˆ—è¡¨ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå¯ä»¥è®¡ç®—çŸ©å½¢é¢ç§¯çš„åŒå‚æ•°è¿‡ç¨‹ã€‚å®ƒçš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯çŸ©å½¢çš„é•¿å’Œå®½ã€‚
(define area  (lambda (length breadth)    (* length breadth)))
æˆ‘ä»¬çœ‹åˆ°areaå°†å®ƒçš„å‚æ•°è¿›è¡Œç›¸ä¹˜ï¼Œç³»ç»Ÿè¿‡ç¨‹*ä¹Ÿå¯ä»¥å®ç°ç›¸ä¹˜ã€‚æˆ‘ä»¬å¯ä»¥ç®€å•çš„è¿™æ ·åšï¼š
(define area *)

applyè¿‡ç¨‹applyè¿‡ç¨‹å…è®¸æˆ‘ä»¬ç›´æ¥ä¼ é€’ä¸€ä¸ªè£…æœ‰å‚æ•°çš„list ç»™ä¸€ä¸ªè¿‡ç¨‹æ¥å®Œæˆå¯¹è¿™ä¸ªè¿‡ç¨‹çš„æ‰¹é‡æ“ä½œã€‚
(define x &#x27;(1 2 3))(apply + x)

é€šå¸¸ï¼Œapplyéœ€è¦ä¼ é€’ä¸€ä¸ªè¿‡ç¨‹ç»™å®ƒï¼Œåé¢ç´§æ¥ç€æ˜¯ä¸å®šé•¿å‚æ•°ï¼Œä½†æœ€åä¸€ä¸ªå‚æ•°å€¼ä¸€å®šè¦æ˜¯listã€‚å®ƒä¼šæ ¹æ®æœ€åä¸€ä¸ªå‚æ•°å’Œä¸­é—´å…¶å®ƒçš„å‚æ•°æ¥æ„å»ºå‚æ•°åˆ—è¡¨ã€‚ç„¶åè¿”å›æ ¹æ®è¿™ä¸ªå‚æ•°åˆ—è¡¨æ¥è°ƒç”¨è¿‡ç¨‹å¾—åˆ°çš„ç»“æœã€‚ä¾‹å¦‚:
(apply + 1 2 3 x)

é¡ºåºæ‰§è¡Œæˆ‘ä»¬ä½¿ç”¨beginè¿™ä¸ªç‰¹æ®Šçš„ç»“æ„æ¥å¯¹ä¸€ç»„éœ€è¦æœ‰åºæ‰§è¡Œçš„å­ç»“æ„æ¥è¿›è¡Œæ‰“åŒ…ã€‚è®¸å¤šSchemeçš„ä»£ç ç»“æ„éƒ½éšå«äº†beginã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªä¸‰ä¸ªå‚æ•°çš„è¿‡ç¨‹æ¥è¾“å‡ºå®ƒä»¬ï¼Œå¹¶ç”¨ç©ºæ ¼é—´æ ¼ã€‚ä¸€ç§æ­£ç¡®çš„å®šä¹‰æ˜¯ï¼š
(define display3  (lambda (arg1 arg2 arg3)    (begin      (display arg1)      (display &quot; &quot;)      (display arg2)      (display &quot; &quot;)      (display arg3)      (newline))))
åœ¨Schemeä¸­ï¼Œlambdaçš„è¯­å¥ä½“éƒ½æ˜¯éšå¼çš„beginä»£ç ç»“æ„ã€‚å› æ­¤ï¼Œdisplay3è¯­å¥ä½“ä¸­çš„beginä¸æ˜¯å¿…é¡»çš„ï¼Œä¸å†™æ—¶ä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆå½±å“ã€‚
display3æ›´ç®€åŒ–çš„å†™æ³•æ˜¯ï¼š
(define display3  (lambda (arg1 arg2 arg3)    (display arg1)    (display &quot; &quot;)    (display arg2)    (display &quot; &quot;)    (display arg3)    (newline)))

æ¡ä»¶è¯­å¥ifæœ€åŸºæœ¬çš„ç»“æ„å°±æ˜¯ifï¼š
(if æµ‹è¯•æ¡ä»¶    then-åˆ†æ”¯    else-åˆ†æ”¯)
å¦‚æœæµ‹è¯•æ¡ä»¶è¿ç®—çš„ç»“æœæ˜¯çœŸ(é#fçš„ä»»ä½•å…¶å®ƒå€¼)ï¼Œthenåˆ†æ”¯å°†ä¼šè¢«è¿è¡Œ(å³æ»¡è¶³æ¡ä»¶æ—¶çš„è¿è¡Œåˆ†æ”¯)ã€‚å¦åˆ™ï¼Œelseåˆ†æ”¯ä¼šè¢«è¿è¡Œã€‚elseåˆ†æ”¯æ˜¯å¯é€‰çš„ã€‚
(define p 80)(if (&gt; p 70)     &#x27;safe    &#x27;unsafe)(if (&lt; p 90)    &#x27;low-pressure) ;no ``else&#x27;&#x27; branch

when å’Œ unlesså½“æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªåŸºæœ¬æ¡ä»¶è¯­å¥åˆ†æ”¯æ—¶ï¼ˆâ€thenâ€åˆ†æ”¯æˆ–â€elseâ€åˆ†æ”¯ï¼‰ï¼Œä½¿ç”¨when å’Œ unlessä¼šæ›´æ–¹ä¾¿ã€‚
(define a 10)(define b 20)(when (&lt; a b)    (display &quot;aæ˜¯&quot;)    (display a)    (display &quot;bæ˜¯&quot;)    (display b)    (display &quot;aå°äºb&quot; ) )
å…ˆåˆ¤æ–­aæ˜¯å¦å°äºbï¼Œè¿™ä¸ªæ¡ä»¶æˆç«‹æ—¶ä¼šè¾“å‡ºå€’åºçš„5æ¡ä¿¡æ¯ã€‚
åŒæ ·çš„åŠŸèƒ½è¿˜å¯ä»¥åƒä¸‹é¢è¿™æ ·ç”¨unlessæ¥å†™(unlesså’Œwhençš„æ„æ€æ­£å¥½ç›¸å)ï¼š
(define a 10)(define b 20)(unless (&gt;= a b)   (display &quot;aæ˜¯&quot;)   (display a)   (display &quot;bæ˜¯&quot;)   (display b)   (display &quot;aå°äºb&quot; ) )
å¹¶ä¸æ˜¯æ‰€æœ‰çš„Schemeç¯å¢ƒéƒ½æä¾›whenå’Œunlessã€‚å¦‚æœä½ çš„Schemeä¸­æ²¡æœ‰ï¼Œä½ å¯ä»¥ç”¨å®æ¥è‡ªå®šä¹‰å‡ºwhenå’Œunlessã€‚
ä½¿ç”¨ifå®ç°ç›¸åŒçš„ç¨‹åºä¼šæ˜¯è¿™æ ·ï¼š
(define a 10)(define b 20)(if (&lt; a b)    (begin        (display &quot;aæ˜¯&quot;)        (display a)        (display &quot;bæ˜¯&quot;)        (display b)        (display &quot;aå°äºb&quot; ) ))
å…ˆåˆ¤æ–­aæ˜¯å¦å°äºbï¼Œè¿™ä¸ªæ¡ä»¶æˆç«‹æ—¶ä¼šè¾“å‡ºæ­£åºçš„5æ¡ä¿¡æ¯ã€‚
åœ¨mit-schemeä¸‹ï¼Œä¸­æ–‡ä¼šæ˜¾ç¤ºä¹±ç ï¼Œä¸ºæ–¹ä¾¿æŸ¥çœ‹ï¼Œå»ºè®®ä¿®æ”¹æˆè‹±æ–‡ã€‚
condå¤šé‡ifç»“æ„ä¸ºï¼š
(define c #\c)(if (char&lt;? c #\c) -1    (if (char=? c #\c) 0        1))
è¿™æ ·çš„ç»“æ„éƒ½å¯ä»¥ä½¿ç”¨condæ¥è¿™æ ·å†™ï¼š
(cond ((char&lt;? c #\c) -1)    ((char=? c #\c) 0)    (else 1))
condå°±æ˜¯è¿™æ ·çš„ä¸€ç§å¤šåˆ†æ”¯æ¡ä»¶ç»“æ„ã€‚æ¯ä¸ªä»å¥éƒ½åŒ…å«ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶å’Œä¸€ä¸ªç›¸å…³çš„æ“ä½œã€‚ç¬¬ä¸€ä¸ªåˆ¤æ–­æˆç«‹çš„ä»å¥å°†ä¼šå¼•å‘å®ƒç›¸å…³çš„æ“ä½œæ‰§è¡Œã€‚å¦‚æœä»»ä½•ä¸€ä¸ªåˆ†æ”¯çš„æ¡ä»¶åˆ¤æ–­éƒ½ä¸æˆç«‹åˆ™æœ€åä¸€ä¸ªelseåˆ†æ”¯å°†ä¼šæ‰§è¡Œ(elseåˆ†æ”¯è¯­å¥æ˜¯å¯é€‰çš„)ã€‚
condçš„åˆ†æ”¯æ“ä½œéƒ½æ˜¯beginç»“æ„ã€‚
caseå½“condç»“æ„çš„æ¯ä¸ªæµ‹è¯•æ¡ä»¶æ˜¯ä¸€ä¸ªæµ‹è¯•æ¡ä»¶çš„åˆ†æ”¯æ¡ä»¶æ—¶ï¼Œå¯ä»¥ç¼©å‡ä¸ºä¸€ä¸ªcaseè¡¨è¾¾å¼ã€‚
(define c #\c)(case c    ((#\a) 1)    ((#\b) 2)    ((#\c) 3)    (else 4))
åˆ†æ”¯å¤´å€¼æ˜¯#\c çš„åˆ†æ”¯å°†è¢«æ‰§è¡Œã€‚
and å’Œ orSchemeæä¾›äº†å¯¹booleanå€¼è¿›è¡Œé€»è¾‘ä¸andå’Œé€»è¾‘æˆ–orè¿ç®—çš„ç»“æ„ã€‚(æˆ‘ä»¬å·²ç»è§è¿‡äº†å¸ƒå°”ç±»å‹çš„æ±‚åè¿ç®—notè¿‡ç¨‹ã€‚)
å½“æ‰€æœ‰å­ç»“æ„çš„å€¼éƒ½æ˜¯çœŸæ—¶ï¼Œandçš„è¿”å›å€¼æ˜¯çœŸï¼Œå®é™…ä¸Šï¼Œandçš„è¿è¡Œç»“æœæ˜¯æœ€åä¸€ä¸ªå­ç»“æ„çš„å€¼ã€‚å¦‚æœä»»ä½•ä¸€ä¸ªå­ç»“æ„çš„å€¼éƒ½æ˜¯å‡ï¼Œåˆ™è¿”å›#fã€‚
(and 1 2)  =&gt;  2(and #f 1) =&gt;  #f
è€Œorä¼šè¿”å›å®ƒç¬¬ä¸€ä¸ªä¸ºå€¼ä¸ºçœŸçš„å­ç»“æ„çš„ç»“æœã€‚å¦‚æœæ‰€æœ‰çš„å­ç»“æ„çš„å€¼éƒ½ä¸ºå‡ï¼Œoråˆ™è¿”å›#fã€‚
(or 1 2)  =&gt;  1(or #f 1) =&gt;  1
andå’Œoréƒ½æ˜¯ä»å·¦å‘å³è¿ç®—ã€‚å½“æŸä¸ªå­ç»“æ„å¯ä»¥å†³å®šæœ€ç»ˆç»“æœæ—¶ï¼Œandå’Œorä¼šå¿½ç•¥å‰©ä½™çš„å­ç»“æ„ï¼Œå³å®ƒä»¬æ˜¯â€œçŸ­è·¯â€çš„ã€‚
(and 1 #f expression-guaranteed-to-cause-error)(or 1 #f expression-guaranteed-to-cause-error)

è¯æ³•å˜é‡Schemeçš„å˜é‡æœ‰ä¸€å®šçš„è¯æ³•ä½œç”¨åŸŸï¼Œå³å®ƒä»¬åœ¨ç¨‹åºä»£ç ä¸­åªå¯¹ç‰¹å®šèŒƒå›´çš„ä»£ç ç»“æ„å¯è§ã€‚
(define x 9)(define add2 (lambda (x) (+ x 2)))(add2 3)(add2 x) 
è¿™é‡Œæœ‰ä¸€ä¸ªå…¨å±€å˜é‡xï¼Œå€¼ä¸€ç›´ä¸º9ï¼›è¿˜æœ‰ä¸€ä¸ªå±€éƒ¨å˜é‡xï¼Œå°±æ˜¯åœ¨è¿‡ç¨‹add2ä¸­é‚£ä¸ªå­—æ¯xã€‚
è€Œset!ä»£ç ç»“æ„å¯ä¿®æ”¹å˜é‡çš„èµ‹å€¼ã€‚
(set! x 20)
ä¸Šé¢ä»£ç å°†å…¨å±€å˜é‡xçš„å€¼9ä¿®æ”¹ä¸º20ï¼Œå› ä¸ºå¯¹äºset!å…¨å±€å˜é‡æ˜¯å¯è§çš„ã€‚å¦‚æœset!æ˜¯åœ¨add2è¿‡ç¨‹ä½“å†…è¢«è°ƒç”¨ï¼Œé‚£ä¿®æ”¹çš„å°±æ˜¯å±€éƒ¨å˜é‡xï¼š
(define add2  (lambda (x)    (set! x (+ x 2))    x))
è¿™é‡Œset!åœ¨å±€éƒ¨å˜é‡xä¸ŠåŠ ä¸Š2ï¼Œå¹¶ä¸”ä¼šè¿”å›å±€éƒ¨å˜é‡xçš„æ–°å€¼ã€‚(ä»ç»“æœæ¥çœ‹ï¼Œæˆ‘ä»¬æ— æ³•åŒºåˆ†è¿™ä¸ªè¿‡ç¨‹å’Œå…ˆå‰çš„add2è¿‡ç¨‹)ã€‚
(define counter 0)(define bump-counter  (lambda ()    (set! counter (+ counter 1))    counter))
bump-counteræ˜¯ä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„è¿‡ç¨‹(æ²¡æœ‰å‚æ•°çš„è¿‡ç¨‹ä¹Ÿç§°ä½œthunk)ã€‚ å®ƒæ²¡æœ‰å¼•å…¥å±€éƒ¨å˜é‡å’Œå‚æ•°ï¼Œè¿™æ ·å°±ä¸ä¼šéšè—ä»»ä½•å€¼ã€‚åœ¨æ¯æ¬¡è°ƒç”¨æ—¶ï¼Œå®ƒä¼šä¿®æ”¹å…¨å±€å˜é‡counterçš„å€¼ï¼Œè®©å®ƒå¢åŠ 1ï¼Œç„¶åè¿”å›å®ƒå½“å‰çš„å€¼ã€‚ä¸‹é¢æ˜¯ä¸€äº›bump-counterçš„æˆåŠŸè°ƒç”¨ç¤ºä¾‹:
(bump-counter) =&gt;  1(bump-counter) =&gt;  2(bump-counter) =&gt;  3

let å’Œ let*å¹¶ä¸æ˜¯ä¸€å®šè¦æ˜¾å¼çš„åˆ›å»ºè¿‡ç¨‹æ‰å¯ä»¥åˆ›å»ºå±€éƒ¨å˜é‡ã€‚æœ‰ä¸ªç‰¹æ®Šçš„ä»£ç ç»“æ„letå¯ä»¥åˆ›å»ºä¸€åˆ—å±€éƒ¨å˜é‡ä»¥ä¾¿åœ¨å…¶ç»“æ„ä½“ä¸­ä½¿ç”¨:
(let ((x 1)      (y 2)      (z 3))    (list x y z))=&gt;  (1 2 3)
å’Œlambdaä¸€æ ·ï¼Œåœ¨letç»“æ„ä½“ä¸­ï¼Œå±€éƒ¨å˜é‡xï¼ˆèµ‹å€¼ä¸º1ï¼‰ä¼šæš‚æ—¶éšè—å…¨å±€å˜é‡xï¼ˆèµ‹å€¼ä¸º20ï¼‰ã€‚
å±€éƒ¨å˜é‡xã€yã€zåˆ†åˆ«è¢«èµ‹å€¼ä¸º1ã€2ã€3ï¼Œè¿™ä¸ªåˆå§‹åŒ–çš„è¿‡ç¨‹å¹¶ä¸ä½œä¸ºletè¿‡ç¨‹ç»“æ„ä½“çš„ä¸€éƒ¨åˆ†ã€‚å› æ­¤ï¼Œåœ¨åˆå§‹åŒ–æ—¶å¯¹xçš„å¼•ç”¨éƒ½æŒ‡å‘äº†å…¨å±€å˜é‡xï¼Œè€Œä¸æ˜¯å±€éƒ¨å˜é‡xã€‚
(let ((x 1)      (y x))  (+ x y))=&gt;  21

åœ¨åˆå§‹åŒ–åŒºåŸŸä¸­ï¼Œå¯ä»¥ç”¨å…ˆåˆ›å»ºçš„å˜é‡æ¥ä¸ºååˆ›å»ºçš„å˜é‡èµ‹å€¼ï¼Œlet*ç»“æ„å°±å¯ä»¥è¿™æ ·åšï¼š
(let* ((x 1)       (y x))  (+ x y))=&gt;  2

è¿™ä¸ªä¾‹å­å®Œå…¨ç­‰ä»·äºä¸‹é¢è¿™ä¸ªletåµŒå¥—çš„ç¨‹åºï¼Œæ›´æ·±äº†è¯´ï¼Œå®é™…ä¸Šå°±æ˜¯letåµŒå¥—çš„ç¼©å†™ã€‚
(let ((x 1))  (let ((y x))    (+ x y)))=&gt;  2

æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠä¸€ä¸ªè¿‡ç¨‹åšä¸ºå€¼èµ‹ç»™å˜é‡ï¼š
(let ((cons (lambda (x y) (+ x y))))  (cons 1 2))=&gt;  3
åœ¨è¿™ä¸ªletæ„ç»“ä½“ä¸­ï¼Œå˜é‡conså°†å®ƒçš„å‚æ•°è¿›è¡Œç›¸åŠ ã€‚è€Œåœ¨letç»“æ„çš„å¤–é¢ï¼Œconsè¿˜æ˜¯ç”¨æ¥åˆ›å»ºç‚¹å¯¹ã€‚
fluid-letä¸€ä¸ªè¯æ³•å˜é‡å¦‚æœæ²¡æœ‰è¢«éšè—ï¼Œåœ¨å®ƒçš„ä½œç”¨åŸŸå†…ä¸€ç›´éƒ½ä¸ºå¯è§çŠ¶æ€ã€‚æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å°†ä¸€ä¸ªè¯æ³•å˜é‡ä¸´æ—¶çš„è®¾ç½®ä¸ºä¸€ä¸ªå›ºå®šçš„å€¼ï¼Œä¸ºæ­¤æˆ‘ä»¬å¯ä½¿ç”¨fluid-letç»“æ„ã€‚
(fluid-let ((counter 99))  (display (bump-counter)) (newline)  (display (bump-counter)) (newline)  (display (bump-counter)) (newline))

è¿™å’Œletçœ‹èµ·æ¥éå¸¸ç›¸åƒï¼Œä½†å¹¶ä¸æ˜¯æš‚æ—¶çš„éšè—äº†å…¨å±€å˜é‡counterçš„å€¼ï¼Œè€Œæ˜¯åœ¨fluid-letæ‰§è¡Œä½“ä¸­ä¸´æ—¶çš„å°†å…¨å±€å˜é‡counterçš„å€¼è®¾ç½®ä¸ºäº†99ç›´åˆ°æ‰§è¡Œä½“ç»“æŸã€‚å› æ­¤æ‰§è¡Œä½“ä¸­çš„ä¸‰å¥displayäº§ç”Ÿäº†ç»“æœ
100 101 102 

å½“fluid-letè¡¨è¾¾å¼è®¡ç®—ç»“æŸåï¼Œå…¨å±€å˜é‡counterä¼šæ¢å¤æˆä¹‹å‰çš„çš„å€¼ã€‚
æ³¨æ„fluid-letå’Œletçš„æ•ˆæœå®Œå…¨ä¸åŒã€‚fluid-letä¸ä¼šå’Œletä¸€æ ·äº§ç”Ÿä¸€ä¸ªæ–°çš„å˜é‡ã€‚å®ƒä¼šä¿®æ”¹å·²ç»å­˜çš„å˜é‡çš„å€¼ç»‘å®šï¼Œå½“fluid-letç»“æŸæ—¶è¿™ä¸ªä¿®æ”¹ä¹Ÿä¼šç»“æŸã€‚
é€’å½’ä¸€ä¸ªè¿‡ç¨‹ä½“ä¸­å¯ä»¥åŒ…å«å¯¹å…¶å®ƒè¿‡ç¨‹çš„è°ƒç”¨ï¼Œç‰¹åˆ«çš„æ˜¯ä¹Ÿå¯ä»¥è°ƒç”¨è‡ªå·±ã€‚
(define factorial (lambda (n)    (if (= n 0) 1        (* n (factorial (- n 1))))))
è¿™ä¸ªé€’å½’è¿‡ç¨‹ç”¨æ¥è®¡ç®—ä¸€ä¸ªæ•°çš„é˜¶ä¹˜ã€‚å¦‚æœè¿™ä¸ªæ•°æ˜¯0ï¼Œåˆ™ç»“æœä¸º1ã€‚å¯¹äºä»»ä½•å…¶å®ƒçš„å€¼nï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šè°ƒç”¨å…¶è‡ªèº«æ¥å®Œæˆn-1é˜¶ä¹˜çš„è®¡ç®—ï¼Œç„¶åå°†è¿™ä¸ªå­ç»“æœä¹˜ä¸Šnå¹¶è¿”å›æœ€ç»ˆäº§ç”Ÿçš„ç»“æœã€‚
äº’é€’å½’è¿‡ç¨‹ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä¸‹é¢åˆ¤æ–­å¥‡å¶æ•°çš„è¿‡ç¨‹ç›¸äº’è¿›è¡Œäº†è°ƒç”¨ã€‚
(define is-even? (lambda (n)    (if (= n 0) #t        (is-odd? (- n 1)))))(define is-odd? (lambda (n)    (if (= n 0) #f        (is-even? (- n 1)))))
è¿™é‡Œæä¾›çš„ä¸¤ä¸ªè¿‡ç¨‹çš„å®šä¹‰ä»…ä½œä¸ºç®€å•çš„äº’é€’å½’ç¤ºä¾‹ã€‚Schemeå·²ç»æä¾›äº†ç®€å•çš„åˆ¤æ–­è¿‡ç¨‹even?å’Œodd?ã€‚
letrecå¦‚æœå¸Œæœ›å°†ä¸Šé¢çš„è¿‡ç¨‹å®šä¹‰ä¸ºå±€éƒ¨çš„ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨letrecç»“æ„ã€‚
(letrec ((local-even? (lambda (n)                        (if (= n 0) #t                            (local-odd? (- n 1)))))         (local-odd? (lambda (n)                       (if (= n 0) #f                           (local-even? (- n 1)))))) (list (local-even? 23) (local-odd? 23)))
ç”¨letrecåˆ›å»ºçš„è¯æ³•å˜é‡ä¸ä»…å¯ä»¥åœ¨letrecæ‰§è¡Œä½“ä¸­å¯è§è€Œä¸”åœ¨åˆå§‹åŒ–ä¸­ä¹Ÿå¯è§ã€‚letrecæ˜¯ä¸“é—¨ä¸ºå±€éƒ¨çš„é€’å½’å’Œäº’é€’å½’è¿‡ç¨‹è€Œè®¾ç½®çš„ã€‚(è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨defineæ¥åˆ›å»ºä¸¤ä¸ªå­ç»“æ„çš„æ–¹å¼æ¥å®ç°å±€éƒ¨é€’å½’)
å‘½åletä½¿ç”¨letrecå®šä¹‰é€’å½’è¿‡ç¨‹å¯ä»¥å®ç°å¾ªç¯ã€‚å¦‚æœæˆ‘ä»¬æƒ³æ˜¾ç¤º10åˆ°1çš„é™æ•°åˆ—ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š
(letrec ((countdown (lambda (i)                      (if (= i 0) &#x27;liftoff                          (begin                            (display i)                            (newline)                            (countdown (- i 1))))))) (countdown 10))
è¿™ä¼šåœ¨æ§åˆ¶å°ä¸Šè¾“å‡º10åˆ°1ï¼Œå¹¶ä¼šè¿”å›ç»“æœliftoffã€‚
Schemeå…è®¸ä½¿ç”¨ä¸€ç§å«â€œå‘½åletâ€çš„letå˜ä½“æ¥æ›´ç®€æ´çš„å†™å‡ºè¿™æ ·çš„å¾ªç¯:
(let countdown ((i 10)) (if (= i 0) &#x27;liftoff      (begin        (display i)        (newline)        (countdown (- i 1)))))
æ³¨æ„åœ¨letçš„åé¢ç«‹å³å£°æ˜äº†ä¸€ä¸ªå˜é‡ç”¨æ¥è¡¨ç¤ºè¿™ä¸ªå¾ªç¯ã€‚è¿™ä¸ªç¨‹åºå’Œå…ˆå‰ç”¨letrecå†™çš„ç¨‹åºæ˜¯ç­‰ä»·çš„ï¼Œå¯ä»¥å°†â€œå‘½åletâ€çœ‹æˆä¸€ä¸ªå¯¹letrecç»“æ„è¿›è¡Œæ‰©å±•çš„å®ã€‚
è¿­ä»£ä¸Šé¢å®šä¹‰çš„countdownå‡½æ•°äº‹å®ä¸Šæ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ã€‚Schemeåªæœ‰é€šè¿‡é€’å½’æ‰èƒ½å®šä¹‰å¾ªç¯ï¼Œä¸å­˜åœ¨ç‰¹æ®Šçš„å¾ªç¯æˆ–è¿­ä»£ç»“æ„ã€‚
å°½ç®¡å¦‚æ­¤ï¼Œä¸Šè¿°å®šä¹‰çš„å¾ªç¯æ˜¯ä¸€ä¸ªâ€œçœŸâ€å¾ªç¯ï¼Œä¸å…¶ä»–è¯­è¨€å®ç°å®ƒä»¬çš„å¾ªç¯çš„æ–¹æ³•å®Œå…¨ç›¸åŒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒSchemeååˆ†æ³¨æ„ç¡®ä¿ä¸Šé¢ä½¿ç”¨è¿‡çš„é€’å½’ç±»å‹ä¸ä¼šäº§ç”Ÿè¿‡ç¨‹è°ƒç”¨/è¿”å›å¼€é”€ã€‚
Schemeé€šè¿‡ä¸€ç§æ¶ˆé™¤å°¾éƒ¨è°ƒç”¨ï¼ˆtail-call eliminationï¼‰çš„è¿‡ç¨‹å®Œæˆè¿™ä¸ªåŠŸèƒ½ã€‚å¦‚æœä½ æ³¨æ„è§‚å¯Ÿcountdownçš„æ­¥éª¤ï¼Œä½ ä¼šæ³¨æ„åˆ°å½“é€’å½’è°ƒç”¨å‡ºç°åœ¨countdownä¸»ä½“å†…æ—¶ï¼Œå°±å˜æˆäº†â€œå°¾éƒ¨è°ƒç”¨â€ï¼Œæˆ–è€…è¯´æ˜¯æœ€åå®Œæˆçš„äº‹æƒ…â€”â€”countdownçš„æ¯æ¬¡è°ƒç”¨è¦ä¹ˆä¸è°ƒç”¨å®ƒè‡ªèº«ï¼Œè¦ä¹ˆå½“å®ƒè°ƒç”¨è‡ªèº«æ—¶æŠŠè¿™ä¸ªåŠ¨ä½œç•™åœ¨æœ€åã€‚å¯¹äºä¸€ä¸ªSchemeè¯­è¨€çš„å®ç°æ¥è¯´ï¼ˆè§£é‡Šå™¨ï¼‰ï¼Œè¿™ä¼šä½¿é€’å½’ä¸åŒäºè¿­ä»£ã€‚å› æ­¤ï¼Œå°½ç®¡ç”¨é€’å½’å»å†™å¾ªç¯å§ï¼Œè¿™æ˜¯å®‰å…¨çš„ã€‚
è¿™æ˜¯åˆä¸€ä¸ªæœ‰ç”¨çš„å°¾é€’å½’ç¨‹åºçš„ä¾‹å­ï¼š
(define list-position  (lambda (o l)    (let loop ((i 0) (l l))      (if (null? l) #f          (if (eqv? (car l) o) i              (loop (+ i 1) (cdr l)))))))

list-positionå‘ç°äº†oå¯¹è±¡åœ¨åˆ—è¡¨lä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ã€‚å¦‚æœåœ¨åˆ—è¡¨ä¸­æ²¡æœ‰å‘ç°å¯¹è±¡ï¼Œè¿‡ç¨‹å°†ä¼šè¿”å›#fã€‚
è¿™åˆæ˜¯ä¸€ä¸ªå°¾éƒ¨é€’å½’è¿‡ç¨‹ï¼Œå®ƒå°†è‡ªèº«çš„å‚æ•°åˆ—è¡¨å°±åœ°åè½¬ï¼Œä¹Ÿå°±æ˜¯ä½¿ç°æœ‰çš„åˆ—è¡¨å†…å®¹äº§ç”Ÿå˜å¼‚ï¼Œè€Œæ²¡æœ‰åˆ†é…ä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼š
(define reverse!  (lambda (s)    (let loop ((s s) (r &#x27;()))      (if (null? s) r      (let ((d (cdr s)))            (set-cdr! s r)        (loop d s))))))
reverse!æ˜¯ä¸€ä¸ªååˆ†æœ‰ç”¨çš„è¿‡ç¨‹ï¼Œå®ƒåœ¨å¾ˆå¤šSchemeæ–¹è¨€ä¸­éƒ½èƒ½ä½¿ç”¨ã€‚
ç”¨è‡ªå®šä¹‰è¿‡ç¨‹æ˜ å°„æ•´ä¸ªåˆ—è¡¨æœ‰ä¸€ç§ç‰¹æ®Šç±»å‹çš„è¿­ä»£ï¼Œå¯¹åˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ ï¼Œå®ƒéƒ½ä¼šé‡å¤ç›¸åŒçš„åŠ¨ä½œã€‚Schemeä¸ºè¿™ç§æƒ…å†µæä¾›äº†ä¸¤ç§ç¨‹åºï¼šmapå’Œfor-eachã€‚
mapç¨‹åºä¸ºç»™å®šåˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ æä¾›äº†ä¸€ç§æ—¢å®šç¨‹åºï¼Œå¹¶è¿”å›ä¸€ä¸ªç»“æœçš„åˆ—è¡¨ã€‚ä¾‹å¦‚ï¼š
(map add2 &#x27;(1 2 3))=&gt;  (3 4 5)

for-eachç¨‹åºä¹Ÿä¸ºåˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ æä¾›äº†ä¸€ä¸ªç¨‹åºï¼Œä½†è¿”å›å€¼ä¸ºç©ºã€‚
(for-each display  (list &quot;one &quot; &quot;two &quot; &quot;buckle my shoe&quot;))

è¿™ä¸ªç”±mapå’Œfor-eachç”¨åœ¨åˆ—è¡¨ä¸Šçš„ç¨‹åºå¹¶ä¸ä¸€å®šæ˜¯å•å‚æ•°ç¨‹åºã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå‡è®¾ä¸€ä¸ªnå‚æ•°çš„ç¨‹åºï¼Œmapä¼šæ¥å—nä¸ªåˆ—è¡¨ï¼Œæ¯ä¸ªåˆ—è¡¨éƒ½æ˜¯ç”±ä¸€ä¸ªå‚æ•°æ‰€ç»„æˆçš„é›†åˆï¼Œè€Œmapä¼šä»æ¯ä¸ªåˆ—è¡¨ä¸­å–ç›¸åº”å…ƒç´ æä¾›ç»™ç¨‹åºã€‚ä¾‹å¦‚ï¼š
(map cons &#x27;(1 2 3) &#x27;(10 20 30))=&gt;  ((1 . 10) (2 . 20) (3 . 30))(map + &#x27;(1 2 3) &#x27;(10 20 30))=&gt;  (11 22 33)

è¾“å…¥è¾“å‡ºSchemeçš„è¾“å…¥/è¾“å‡ºç¨‹åºï¼Œå¯ä»¥ä»è¾“å…¥ç«¯å£è¯»å–æˆ–è€…å†™å…¥åˆ°è¾“å‡ºç«¯å£ã€‚ç«¯å£å¯ä»¥å…³è”åˆ°æ§åˆ¶å°ï¼Œæ–‡ä»¶å’Œå­—ç¬¦ä¸²ã€‚
è¯»å–Schemeçš„è¯»å–ç¨‹åºå¸¦æœ‰ä¸€ä¸ªå¯é€‰çš„è¾“å…¥ç«¯å£å‚æ•°ã€‚å¦‚æœç«¯å£æ²¡æœ‰ç‰¹åˆ«æŒ‡å®šï¼Œåˆ™é»˜è®¤ä¸ºå½“å‰ç«¯å£ï¼ˆä¸€èˆ¬æ˜¯æ§åˆ¶å°ï¼‰ã€‚
è¯»å–çš„å†…å®¹å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œä¸€è¡Œæ•°æ®æˆ–æ˜¯Sè¡¨è¾¾å¼ã€‚å½“æ¯æ¬¡æ‰§è¡Œè¯»å–æ—¶ï¼Œç«¯å£çš„çŠ¶æ€å°±ä¼šæ”¹å˜ï¼Œå› æ­¤ä¸‹ä¸€æ¬¡å°±ä¼šè¯»å–å½“å‰å·²è¯»å–å†…å®¹åé¢çš„å†…å®¹ã€‚å¦‚æœæ²¡æœ‰æ›´å¤šçš„å†…å®¹å¯è¯»ï¼Œè¯»å–ç¨‹åºå°†è¿”å›ä¸€ä¸ªç‰¹æ®Šçš„æ•°æ®ï¼ˆæ–‡ä»¶ç»“æŸç¬¦æˆ–EOFå¯¹è±¡ï¼‰ï¼Œè¿™ä¸ªå¯¹è±¡åªèƒ½ç”¨eof-object?å‡½æ•°æ¥åˆ¤æ–­ã€‚
read-charç¨‹åºä¼šä»ç«¯å£è¯»å–ä¸‹ä¸€ä¸ªå­—ç¬¦ã€‚read-lineç¨‹åºä¼šè¯»å–ä¸‹ä¸€è¡Œæ•°æ®ï¼Œå¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆä¸åŒ…æ‹¬æœ€åçš„æ¢è¡Œç¬¦ï¼‰ï¼Œreadç¨‹åºåˆ™ä¼šè¯»å–ä¸‹ä¸€ä¸ªSè¡¨è¾¾å¼ã€‚
å†™å…¥Schemeçš„å†™å…¥ç¨‹åºæ¥å—ä¸€ä¸ªè¦è¢«å†™å…¥çš„å¯¹è±¡å’Œä¸€ä¸ªå¯é€‰çš„è¾“å‡ºç«¯å£å‚æ•°ã€‚å¦‚æœæœªæŒ‡å®šç«¯å£ï¼Œåˆ™é»˜è®¤ä¸ºå½“å‰ç«¯å£ï¼ˆä¸€èˆ¬ä¸ºæ§åˆ¶å°ï¼‰ã€‚
å†™å…¥çš„å¯¹è±¡å¯ä»¥æ˜¯å­—ç¬¦æˆ–æ˜¯Sè¡¨è¾¾å¼ã€‚
write-charç¨‹åºå¯ä»¥å‘è¾“å‡ºç«¯å£å†™å…¥ä¸€ä¸ªç»™å®šçš„å­—ç¬¦ï¼ˆä¸åŒ…æ‹¬#\ï¼‰ã€‚writeå’Œdisplayç¨‹åºéƒ½å¯ä»¥å‘ç«¯å£å†™å…¥ä¸€ä¸ªç»™å®šçš„Sè¡¨è¾¾å¼ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼šwriteç¨‹åºä¼šä½¿ç”¨æœºå™¨å¯è¯»å‹çš„æ ¼å¼è€Œdisplayç¨‹åºå´ä¸ç”¨ã€‚ä¾‹å¦‚ï¼Œwriteç”¨åŒå¼•å·è¡¨ç¤ºå­—ç¬¦ä¸²ï¼Œç”¨#\å¥æ³•è¡¨ç¤ºå­—ç¬¦ï¼Œä½†displayå´ä¸è¿™ä¹ˆåšã€‚
newlineç¨‹åºä¼šåœ¨è¾“å‡ºç«¯å£è¾“å‡ºä¸€ä¸ªæ¢è¡Œç¬¦ã€‚
æ–‡ä»¶ç«¯å£å¦‚æœç«¯å£æ˜¯æ ‡å‡†çš„è¾“å…¥å’Œè¾“å‡ºç«¯å£ï¼ŒSchemeçš„I/Oç¨‹åºå°±ä¸éœ€è¦ç«¯å£å‚æ•°ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ æ˜ç¡®éœ€è¦è¿™äº›ç«¯å£ï¼Œåˆ™current-input-portå’Œcurrent-output-portè¿™äº›é›¶å‚æ•°ç¨‹åºä¼šæä¾›è¿™ä¸ªåŠŸèƒ½ï¼Œä¾‹å¦‚ï¼š
(display 9)(display 9 (current-output-port))
æ‹¥æœ‰ç›¸åŒçš„æ•ˆæœã€‚
ä¸€ä¸ªç«¯å£é€šè¿‡æ‰“å¼€æ–‡ä»¶å’Œè¿™ä¸ªæ–‡ä»¶å…³è”åœ¨ä¸€èµ·ã€‚open-input-fileç¨‹åºä¼šæ¥å—ä¸€ä¸ªæ–‡ä»¶åä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå’Œè¿™ä¸ªæ–‡ä»¶å…³è”çš„æ–°çš„è¾“å…¥ç«¯å£ã€‚open-output-fileç¨‹åºä¼šæ¥å—ä¸€ä¸ªæ–‡ä»¶åä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå’Œè¿™ä¸ªæ–‡ä»¶å…³è”çš„æ–°çš„è¾“å‡ºç«¯å£ã€‚å¦‚æœæ‰“å¼€ä¸€ä¸ªä¸å­˜åœ¨çš„è¾“å…¥æ–‡ä»¶ï¼Œæˆ–è€…æ‰“å¼€ä¸€ä¸ªå·²ç»å­˜åœ¨çš„è¾“å‡ºæ–‡ä»¶ï¼Œç¨‹åºéƒ½ä¼šå‡ºé”™ã€‚
å·²ç»åœ¨ä¸€ä¸ªç«¯å£æ‰§è¡Œå®Œè¾“å…¥æˆ–è¾“å‡ºåï¼Œéœ€è¦ä½¿ç”¨close-input-portæˆ–close-output-portç¨‹åºå°†å®ƒå…³é—­ã€‚
åœ¨ä¸‹è¿°ä¾‹å­ä¸­ï¼Œå‡å¦‚æ–‡ä»¶io.txtæ–‡ä»¶åªåŒ…å«ä¸€ä¸ªå•è¯helloã€‚
(define i (open-input-file &quot;io.txt&quot;))(read-char i)(define j (read i))j

å‡å¦‚æ–‡ä»¶greeting.txtåœ¨ä¸‹è¿°ç¨‹åºè¿è¡Œå‰ä¸å­˜åœ¨ï¼š
(define o (open-output-file &quot;greeting.txt&quot;))(display &quot;hello&quot; o)(write-char #\space o)(display &#x27;world o)(newline o)(close-output-port o)
ç°åœ¨greeting.txtæ–‡ä»¶å°†ä¼šåŒ…å«â€œhello worldâ€ã€‚
æ–‡ä»¶ç«¯å£çš„è‡ªåŠ¨æ‰“å¼€å’Œå…³é—­
Schemeæä¾›äº†call-with-input-fileå’Œcall-with-output-fileè¿‡ç¨‹ï¼Œè¿™äº›è¿‡ç¨‹ä¼šç…§é¡¾å¥½æ‰“å¼€çš„ç«¯å£å¹¶åœ¨ä½ ä½¿ç”¨å®Œåå°†ç«¯å£å…³é—­ã€‚
call-with-input-fileç¨‹åºæ¥å—ä¸€ä¸ªæ–‡ä»¶åå‚æ•°å’Œä¸€ä¸ªè¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«åº”ç”¨åœ¨ä¸€ä¸ªå·²æ‰“å¼€çš„æ–‡ä»¶è¾“å…¥ç«¯å£ã€‚å½“ç¨‹åºç»“æŸæ—¶ï¼Œå®ƒçš„ç»“æœä¼šåœ¨ä¿è¯ç«¯å£å…³é—­åè¿”å›ã€‚
(call-with-input-file &quot;io.txt&quot;  (lambda (i)    (let* ((a (read-char i))           (b (read-char i))           (c (read-char i)))      (list a b c))))=&gt;  (#\h #\e #\l)
call-with-output-fileç¨‹åºä¼šå¯¹è¾“å‡ºæ–‡ä»¶æä¾›ç±»ä¼¼çš„æœåŠ¡ã€‚
å­—ç¬¦ä¸²ç«¯å£ä¸€èˆ¬æ¥è¯´å°†å­—ç¬¦ä¸²ä¸ç«¯å£ç›¸å…³è”æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚å› æ­¤ï¼Œopen-input-stringç¨‹åºå°†ä¸€ä¸ªç»™å®šçš„å­—ç¬¦ä¸²å’Œä¸€ä¸ªç«¯å£å…³è”èµ·æ¥ã€‚è¯»å–è¿™ä¸ªç«¯å£çš„ç¨‹åºå°†è¯»å‡ºä¸‹è¿°å­—ç¬¦ä¸²ï¼š
(define i (open-input-string &quot;hello world&quot;))(read-char i)=&gt;  #\h(read i)=&gt;  ello(read i)=&gt;  world
open-output-stringåˆ›å»ºäº†ä¸€ä¸ªè¾“å‡ºç«¯å£ï¼Œæœ€ç»ˆå¯ä»¥ç”¨äºåˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼š
(define o (open-output-string))(write &#x27;hello o)(write-char #\, o)(display &quot; &quot; o)(display &quot;world&quot; o)
ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨get-output-stringç¨‹åºå¾—åˆ°ä¿ç•™åœ¨å­—ç¬¦ä¸²ç«¯å£oä¸­çš„å­—ç¬¦ä¸²ï¼š
(get-output-string o)=&gt;  &quot;hello, world&quot;
å­—ç¬¦ä¸²ç«¯å£ä¸éœ€è¦æ˜¾å¼åœ°å»å…³é—­ã€‚
åŠ è½½æ–‡ä»¶loadç¨‹åºå¯ä»¥åŠ è½½åŒ…å«Schemeä»£ç çš„æ–‡ä»¶ï¼Œloadä¸€ä¸ªæ–‡ä»¶æ„å‘³ç€æŒ‰é¡ºåºæ±‚å€¼æ–‡ä»¶ä¸­æ¯ä¸€ä¸ªSchemeè¡¨è¾¾å¼ã€‚loadä¸­çš„è·¯å¾„å‚æ•°æ˜¯ç›¸å¯¹å½“å‰Schemeå·¥ä½œç›®å½•è®¡ç®—çš„ï¼Œè¯¥å·¥ä½œç›®å½•ä¸€èˆ¬æ˜¯è°ƒç”¨Schemeå¯æ‰§è¡Œæ–‡ä»¶æ—¶çš„ç›®å½•ã€‚
ä¸€ä¸ªæ–‡ä»¶å¯ä»¥åŠ è½½å…¶ä»–çš„æ–‡ä»¶ï¼Œè¿™åœ¨åŒ…å«è®¸å¤šæ–‡ä»¶çš„å¤§é¡¹ç›®ä¸­ååˆ†æœ‰ç”¨ã€‚ä½†æ˜¯ï¼Œé™¤éä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œå¦åˆ™loadå‚æ•°ä¸­çš„æ–‡ä»¶ä½ç½®å°†ä¾èµ–äºæ‰§è¡ŒSchemeçš„å½“å‰ç›®å½•ã€‚è€Œæä¾›ç»å¯¹è·¯å¾„åå¹¶ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºæˆ‘ä»¬æ›´æ„¿æ„æŠŠé¡¹ç›®æ–‡ä»¶ä½œä¸ºä¸€ä¸ªå•å…ƒï¼ˆä¿ç•™å®ƒä»¬çš„ç›¸å¯¹è·¯å¾„åï¼‰åœ¨å¾ˆå¤šä¸åŒæœºå™¨ä¸­è¿è¡Œã€‚
å®åœ¨Schemeä¸­ï¼Œå¯¹å®çš„å¤„ç†ä¸Cè¯­è¨€ç±»ä¼¼ï¼Œä¹Ÿåˆ†ä¸ºä¸¤æ­¥ï¼šç¬¬ä¸€æ­¥æ˜¯å®å±•å¼€ï¼Œç¬¬äºŒæ­¥åˆ™æ˜¯ç¼–è¯‘å±•å¼€ä¹‹åçš„ä»£ç ã€‚è¿™æ ·ï¼Œé€šè¿‡å®å’ŒåŸºæœ¬çš„è¯­è¨€æ„é€ ï¼Œå¯ä»¥å¯¹Schemeè¯­è¨€è¿›è¡Œæ‰©å±•â€”â€”Cè¯­è¨€çš„å®åˆ™ä¸å…·å¤‡æ‰©å±•è¯­è¨€çš„èƒ½åŠ›ã€‚
å®é€šè¿‡define-macroæ¥å®šä¹‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„Schemeç¼ºå°‘æ¡ä»¶è¡¨è¾¾å¼whenï¼Œä½ å°±å¯ä»¥ä»¥ä¸‹è¿°å®å®šä¹‰whenï¼š
(define-macro when  (lambda (test . branch)    (list &#x27;if test      (cons &#x27;begin branch))))
è¿™æ ·å®šä¹‰çš„whenè½¬æ¢å™¨èƒ½å¤ŸæŠŠä¸€ä¸ªwhenè¡¨è¾¾å¼è½¬æ¢ä¸ºç­‰ä»·çš„ifè¡¨è¾¾å¼ã€‚
(when (&lt; (pressure tube) 60)   (open-valve tube)   (attach floor-pump tube)   (depress floor-pump 5)   (detach floor-pump tube)   (close-valve tube))
ä¸Šé¢çš„whenè¡¨è¾¾å¼ï¼Œåœ¨å®å±•å¼€åä¸ºï¼š
(apply  (lambda (test . branch)    (list &#x27;if test      (cons &#x27;begin branch)))  &#x27;((&lt; (pressure tube) 60)      (open-valve tube)      (attach floor-pump tube)      (depress floor-pump 5)      (detach floor-pump tube)      (close-valve tube)))

è¿™ä¸ªè½¬æ¢äº§ç”Ÿäº†ä¸€ä¸ªåˆ—è¡¨ï¼š
(if (&lt; (pressure tube) 60)    (begin      (open-valve tube)      (attach floor-pump tube)      (depress floor-pump 5)      (detach floor-pump tube)      (close-valve tube)))

Schemeå°†ä¼šå¯¹è¿™ä¸ªè¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ï¼Œå°±åƒå®ƒå¯¹å…¶ä»–è¡¨è¾¾å¼æ‰€åšçš„ä¸€æ ·ã€‚
å†æ¥çœ‹unlessçš„å®å®šä¹‰ï¼š
(define-macro unless  (lambda (test . branch)    (list &#x27;if          (list &#x27;not test)          (cons &#x27;begin branch)))) 

å¦å¤–ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨whenæ”¾è¿›unlesså®šä¹‰ä¸­ï¼š
(define-macro unless  (lambda (test . branch)    (cons &#x27;when          (cons (list &#x27;not test) branch))))
å®è¡¨è¾¾å¼å¯ä»¥å¼•ç”¨å…¶ä»–çš„å®ã€‚
ç»“æ„æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Schemeæä¾›çš„å¤åˆæ•°æ®ç»“æ„ï¼ˆå¦‚å‘é‡å’Œåˆ—è¡¨ï¼‰ï¼Œæ¥è¡¨ç¤ºä¸€ç§â€œç»“æ„â€ã€‚ä¾‹å¦‚ï¼šæˆ‘ä»¬æ­£åœ¨å¤„ç†ä¸æ ‘æœ¨ç›¸å…³çš„ä¸€ç»„æ•°æ®ã€‚æ•°æ®ä¸­çš„å…ƒç´ åŒ…æ‹¬ï¼šé«˜åº¦ï¼Œå‘¨é•¿ï¼Œå¹´é¾„ï¼Œæ ‘å¶å½¢çŠ¶å’Œæ ‘å¶é¢œè‰²å…±5ä¸ªå­—æ®µã€‚è¿™æ ·çš„æ•°æ®å¯ä»¥è¡¨ç¤ºä¸º5å…ƒå‘é‡ï¼Œè¿™äº›å­—æ®µå¯ä»¥åˆ©ç”¨vector-refè®¿é—®ï¼Œæˆ–ä½¿ç”¨vector-set!ä¿®æ”¹ã€‚
æˆ‘ä»¬ä½¿ç”¨Schemeçš„å®defstructå»å®šä¹‰ä¸€ä¸ªç»“æ„ï¼ŒåŸºæœ¬ä¸Šä½ å¯ä»¥æŠŠå®ƒå½“ä½œä¸€ç§å‘é‡ï¼Œä¸è¿‡å®ƒæä¾›äº†å¾ˆå¤šæ–¹æ³•è¯¸å¦‚åˆ›å»ºç»“æ„å®ä¾‹ã€è®¿é—®æˆ–ä¿®æ”¹å®ƒçš„å­—æ®µç­‰ç­‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„æ ‘ç»“æ„åº”è¿™æ ·å®šä¹‰ï¼š
(defstruct tree height girth age leaf-shape leaf-color)
è¿™æ ·å®ƒè‡ªåŠ¨ç”Ÿæˆäº†ä¸€ä¸ªåä¸ºmake-treeçš„æ„é€ è¿‡ç¨‹ï¼Œä»¥åŠæ¯ä¸ªå­—æ®µçš„è®¿é—®æ–¹æ³•ï¼Œå‘½åä¸ºtree.heightï¼Œtree.girthç­‰ç­‰ã€‚æ„é€ æ–¹æ³•çš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š
(define coconut   (make-tree &#x27;height 30             &#x27;leaf-shape &#x27;frond             &#x27;age 5))
è¿™ä¸ªæ„é€ å‡½æ•°çš„å‚æ•°ä»¥æˆå¯¹çš„å½¢å¼å‡ºç°ï¼Œå­—æ®µååé¢ç´§è·Ÿç€å…¶åˆå§‹å€¼ã€‚è¿™äº›å­—æ®µèƒ½ä»¥ä»»æ„é¡ºåºå‡ºç°ï¼Œæˆ–è€…ä¸å‡ºç°â€”â€”å¦‚æœå­—æ®µçš„å€¼æ²¡æœ‰å®šä¹‰çš„è¯ã€‚
è®¿é—®è¿‡ç¨‹çš„è°ƒç”¨å¦‚ä¸‹æ‰€ç¤ºï¼š
(tree.height coconut) =&gt;  30(tree.leaf-shape coconut) =&gt;  frond(tree.girth coconut) =&gt;  &lt;undefined&gt;
tree.girthå­˜å–ç¨‹åºè¿”å›ä¸€ä¸ªæœªå®šä¹‰çš„å€¼ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰ä¸ºcoconutè¿™ä¸ªtreeç»“æ„æŒ‡å®šgirthçš„å€¼ã€‚
ä¿®æ”¹è¿‡ç¨‹çš„è°ƒç”¨å¦‚ä¸‹æ‰€ç¤ºï¼š
(set!tree.height coconut 40)(set!tree.girth coconut 10)
å¦‚æœæˆ‘ä»¬ç°åœ¨é‡æ–°è°ƒç”¨è®¿é—®è¿‡ç¨‹å»è®¿é—®è¿™äº›å­—æ®µï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°æ–°çš„å€¼ï¼š
(tree.height coconut) =&gt;  40(tree.girth coconut) =&gt;  10

é»˜è®¤åˆå§‹åŒ–æˆ‘ä»¬å¯ä»¥åœ¨å®šä¹‰ç»“æ„æ—¶è¿›è¡Œä¸€äº›åˆå§‹åŒ–çš„è®¾ç½®ï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ªå®ä¾‹ä¸­éƒ½è¿›è¡Œåˆå§‹åŒ–ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å‡å®šleaf-shapeå’Œleaf-coloråœ¨é»˜è®¤æƒ…å†µä¸‹åˆ†åˆ«ä¸ºfrondå’Œgreenã€‚æˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨make-treeæ—¶é€šè¿‡æ˜¾å¼çš„åˆå§‹åŒ–æ¥è¦†ç›–æ‰è¿™äº›é»˜è®¤å€¼ï¼Œæˆ–è€…åœ¨åˆ›å»ºä¸€ä¸ªç»“æ„å®ä¾‹åä½¿ç”¨ä¸Šé¢æåˆ°çš„å­—æ®µä¿®æ”¹è¿‡ç¨‹ï¼š
(defstruct tree height girth age                (leaf-shape &#x27;frond)                (leaf-color &#x27;green))(define palm (make-tree &#x27;height 60))(tree.height palm) =&gt;  60(tree.leaf-shape palm) =&gt;  frond(define plantain   (make-tree &#x27;height 7             &#x27;leaf-shape &#x27;sheet))(tree.height plantain) =&gt;  7(tree.leaf-shape plantain) =&gt;  sheet(tree.leaf-color plantain) =&gt;  green

å…³è”è¡¨å…³è”è¡¨æ˜¯Schemeä¸€ç§ç‰¹æ®Šå½¢å¼çš„åˆ—è¡¨ã€‚åˆ—è¡¨çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªç‚¹å¯¹ï¼Œå…¶ä¸­çš„carï¼ˆå·¦è¾¹çš„å…ƒç´ ï¼‰è¢«ç§°ä¸ºé”®ï¼Œcdrï¼ˆå³è¾¹çš„å…ƒç´ ï¼‰è¢«ç§°ä¸ºå’Œè¯¥é”®å…³è”çš„å€¼ã€‚ä¾‹å¦‚ï¼š
((a . 1) (b . 2) (c . 3))

ç³»ç»Ÿæ¥å£Schemeç¨‹åºç»å¸¸éœ€è¦ä¸åº•å±‚æ“ä½œç³»ç»Ÿè¿›è¡Œäº¤äº’ã€‚
æ£€æŸ¥å’Œåˆ é™¤æ–‡ä»¶file-exists?ä¼šæ£€æŸ¥å®ƒçš„å‚æ•°å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚delete-fileæ¥å—ä¸€ä¸ªæ–‡ä»¶åå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°å¹¶åˆ é™¤ç›¸åº”çš„æ–‡ä»¶ã€‚è¿™äº›ç¨‹åºå¹¶ä¸æ˜¯Schemeæ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯åœ¨å¤§å¤šæ•°Schemeå®ç°ä¸­éƒ½èƒ½æ‰¾åˆ°å®ƒä»¬ã€‚ç”¨è¿™äº›è¿‡ç¨‹æ“ä½œç›®å½•ï¼ˆè€Œä¸æ˜¯æ–‡ä»¶ï¼‰å¹¶ä¸æ˜¯å¾ˆå¯é ï¼Œæ“ä½œç»“æœä¸å…·ä½“çš„Schemeå®ç°æœ‰å…³ã€‚
file-or-directory-modify-secondsè¿‡ç¨‹æ¥å—ä¸€ä¸ªæ–‡ä»¶åæˆ–ç›®å½•åä¸ºå‚æ•°ï¼Œå¹¶è¿”å›è¿™ä¸ªç›®å½•æˆ–æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´ã€‚æ—¶é—´æ˜¯ä»æ ¼æ—å¨æ²»æ ‡å‡†æ—¶é—´1970å¹´1æœˆ1æ—¥0ç‚¹å¼€å§‹è®°æ—¶çš„ã€‚ä¾‹å¦‚ï¼š
(file-or-directory-modify-seconds &quot;hello.scm&quot;)=&gt;  893189629
å‡å®šhello.scmæ–‡ä»¶æœ€åä¸€æ¬¡ä¿®æ”¹çš„æ—¶é—´æ˜¯1998å¹´4æœˆ21æ—¥çš„æŸä¸ªæ—¶é—´ã€‚
è°ƒç”¨æ“ä½œç³»ç»Ÿå‘½ä»¤systemå‡½æ•°æŠŠå®ƒçš„å‚æ•°å­—ç¬¦ä¸²å½“ä½œæ“ä½œç³»ç»Ÿå‘½ä»¤æ¥æ‰§è¡Œã€‚å¦‚æœå‘½ä»¤æˆåŠŸæ‰§è¡Œå¹¶è¿”å›0ï¼Œåˆ™å®ƒä¼šè¿”å›çœŸï¼Œå¦‚æœå‘½ä»¤æ‰§è¡Œå¤±è´¥å¹¶è¿”å›æŸé0å€¼ï¼Œåˆ™å®ƒä¼šè¿”å›å‡ã€‚å‘½ä»¤äº§ç”Ÿçš„ä»»ä½•è¾“å‡ºéƒ½ä¼šè¿›å…¥æ ‡å‡†çš„è¾“å‡ºã€‚
(system &quot;ls&quot;);lists current directory(define fname &quot;spot&quot;)(system (string-append &quot;test -f &quot; fname)) ;tests if file `spot&#x27; exists(system (string-append &quot;rm -f &quot; fname)) ;removes `spot&#x27;
æœ€åä¸¤ä¸ªå‘½ä»¤ç­‰ä»·äºï¼š
(file-exists? fname)(delete-file fname)

ç¯å¢ƒå˜é‡è¿‡ç¨‹getenvè¿”å›æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡çš„è®¾å®šå€¼ï¼Œå¦‚ï¼š
(getenv &quot;HOME&quot;)=&gt;  &quot;/home/dorai&quot;(getenv &quot;SHELL&quot;)=&gt;  &quot;/bin/bash&quot;


å¯¹è±¡å’Œç±»http://www.kancloud.cn/wizardforcel/teach-yourself-scheme/147175
æºç åˆ†äº«https://github.com/voidking/scheme-start.git
ä¹¦ç­¾å‡½æ•°å¼ç¼–ç¨‹åˆæ¢
å‡½æ•°å¼ç¼–ç¨‹å…¥é—¨æ•™ç¨‹
Lispæ•™ç¨‹
Schemeè¯­è¨€ç®€æ˜æ•™ç¨‹
MIT/GNU Scheme Documentation
Racketå®˜ç½‘
ç¬¦å·: æŠ½è±¡ã€è¯­ä¹‰
ç¼–ç¨‹è¯­è¨€çš„åŸºçŸ³â€”â€”Lambda calculus
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>å‡½æ•°å¼ç¼–ç¨‹</tag>
        <tag>å½¢å¼è¯­ä¹‰å­¦</tag>
        <tag>lisp</tag>
        <tag>scheme</tag>
      </tags>
  </entry>
  <entry>
    <title>é—ä¼ ç®—æ³•è§£å†³TSPé—®é¢˜</title>
    <url>/dev-matlab-ga-tsp/</url>
    <content><![CDATA[TSPé—®é¢˜æ—…è¡Œå•†é—®é¢˜ï¼Œå³TSPé—®é¢˜ï¼ˆTravelling Salesman Problemï¼‰åˆè¯‘ä¸ºæ—…è¡Œæ¨é”€å‘˜é—®é¢˜ã€è´§éƒæ‹…é—®é¢˜ï¼Œæ˜¯æ•°å­¦é¢†åŸŸä¸­è‘—åé—®é¢˜ä¹‹ä¸€ã€‚å‡è®¾æœ‰ä¸€ä¸ªæ—…è¡Œå•†äººè¦æ‹œè®¿nä¸ªåŸå¸‚ï¼Œä»–å¿…é¡»é€‰æ‹©æ‰€è¦èµ°çš„è·¯å¾„ï¼Œè·¯å¾„çš„é™åˆ¶æ˜¯æ¯ä¸ªåŸå¸‚åªèƒ½æ‹œè®¿ä¸€æ¬¡ï¼Œè€Œä¸”æœ€åè¦å›åˆ°åŸæ¥å‡ºå‘çš„åŸå¸‚ã€‚è·¯å¾„çš„é€‰æ‹©ç›®æ ‡æ˜¯è¦æ±‚å¾—çš„è·¯å¾„è·¯ç¨‹ä¸ºæ‰€æœ‰è·¯å¾„ä¹‹ä¸­çš„æœ€å°å€¼ã€‚


è®¾è®¡æ€è·¯1ã€éšæœºç”ŸæˆNçš„ä½ç½®ï¼ˆåæ ‡ï¼‰ï¼ŒæŠŠåæ ‡ç‚¹ç»˜åˆ¶åˆ°é¡µé¢ä¸Šã€‚2ã€è®¾ç½®ç§ç¾¤è§„æ¨¡ä¸ºMï¼Œæ¯ä¸ªä¸ªä½“ç”Ÿæˆ1åˆ°Nçš„éšæœºåºåˆ—ã€‚3ã€è®¡ç®—æ¯ä¸ªä¸ªä½“çš„é€‚åº”åº¦ï¼ˆè·¯å¾„æ€»é•¿åº¦ï¼‰ã€‚4ã€å¯»æ‰¾å‡ºå½“å‰è¿­ä»£çš„æœ€ä¼˜è§£ï¼ŒæŠŠæœ€ä¼˜è§£è·¯çº¿ç»˜åˆ¶åˆ°é¡µé¢ä¸Šã€‚5ã€äº¤å‰ï¼Œå˜å¼‚ï¼Œç”Ÿæˆæ–°çš„ä¸€ä»£ç§ç¾¤ã€‚6ã€é‡å¤3-5ï¼Œç›´åˆ°è¿­ä»£æ¬¡æ•°åˆ°è¾¾æŒ‡å®šæ¬¡æ•°ã€‚
å¯¹æ¯”å®éªŒTSPé—®é¢˜çš„è§£æ³•ï¼Œè¿˜æœ‰å›æº¯æ³•ã€åˆ†æ”¯é™ç•Œæ³•ã€è¿‘ä¼¼ç®—æ³•ã€åŠ¨æ€è§„åˆ’æ³•ã€èšç¾¤ç®—æ³•ç­‰ã€‚å¯¹æ¯”é—ä¼ ç®—æ³•å’Œå…¶ä»–ç®—æ³•æ±‚è§£TSPé—®é¢˜çš„æ•°æ®é‡ã€æ•°æ®åˆ†å¸ƒä»¥åŠå®éªŒç»“æœï¼ˆæ±‚è§£æ—¶é—´ç­‰ï¼‰ï¼Œæ‰¾å‡ºé—ä¼ ç®—æ³•çš„ä¼˜ç¼ºç‚¹ï¼Œé€‚ç”¨äºæ•°æ®é‡å¤šå°‘ï¼Œæ•°æ®åˆ†å¸ƒæ˜¯ä»€ä¹ˆæƒ…å†µã€‚
ç„¶è€Œï¼Œå·¥ä½œé‡å¾ˆå¤§ï¼Œæš‚æ—¶æç½®ï¼Œå®Œæˆåä¹Ÿèƒ½å†™ç¯‡ä¸é”™çš„è®ºæ–‡äº†å§ã€‚
æºç åˆ†äº«https://github.com/voidking/TSP_MATLAB.githttps://github.com/voidking/GA4TSPProblem.git
]]></content>
      <categories>
        <category>engineering</category>
        <category>algorithm</category>
      </categories>
      <tags>
        <tag>çŸ¥è¯†å·¥ç¨‹</tag>
        <tag>matlab</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOSå®‰è£…å¤šç‰ˆæœ¬MySQL</title>
    <url>/dev-centos-multiple-mysql/</url>
    <content><![CDATA[å‰è¨€å“éŸ³å·¥ä½œå®¤çš„æœåŠ¡å™¨ä¸­ï¼Œå·²ç»å®‰è£…äº†MySQL5.7ã€‚ä½†æ˜¯ï¼Œconfluenceå’Œjiraä¸æ”¯æŒMySQL5.7ï¼Œä¸ºäº†å®‰è£…è¿™ä¸¤æ¬¾è½¯ä»¶ï¼Œå¿…é¡»å®‰è£…MySQL5.6æˆ–æ›´ä½çš„ç‰ˆæœ¬ã€‚


å®‰è£…è¯¦è§£å®‰è£…å¼€å‘åŒ…yum -y install wget gcc-c++ ncurses ncurses-devel cmake make perl bison openssl openssl-devel gcc* libxml2 libxml2-devel curl-devel libjpeg* libpng* freetype* --setopt=protected_multilib=false

ä¸‹è½½MySQLæœç‹é•œåƒï¼šhttp://mirrors.sohu.com/mysql/MySQL-5.6/é€‰æ‹©ä¸‹è½½ï¼šmysql-5.6.34.tar.gz
å®‰è£…å‰å‡†å¤‡1ã€åˆ›å»ºä¸€ä¸ªMysqlç”¨æˆ·ï¼Œuseradd mysqlã€‚
2ã€æ–°å»ºmysqlä¸‹dataå’Œlogå­ç›®å½•
mkdir -p /usr/local/mysql&#123;3306,3307&#125;/data            mkdir -p /usr/local/mysql&#123;3306,3307&#125;/log  

3ã€ä¿®æ”¹ç›®å½•çš„æ‰€å±è€…ä»¥åŠæ‰€å±ç»„æƒé™ 
chown -R mysql:mysql /usr/local/mysql&#123;3306,3307&#125;/data/  chown -R mysql:mysql /usr/local/mysql&#123;3306,3307&#125;/log/  chmod 750 /usr/local/mysql&#123;3306,3307&#125;/data        chmod 750 /usr/local/mysql&#123;3306,3307&#125;/log  

4ã€åˆ›å»ºmysqlç›¸å…³ç›®å½•å¹¶é…ç½®æƒé™
mkdir -p /usr/local/mysql&#123;3306,3307&#125;/etc  chown -R mysql.mysql /usr/local/mysql&#123;3306,3307&#125;/etc  mkdir -p /var/run/mysqld&#123;3306,3307&#125;  chown -R mysql.mysql /var/run/mysqld&#123;3306,3307&#125;  mkdir -p /var/lib/mysqld&#123;3306,3307&#125;  chown -R mysql.mysql /var/lib/mysqld&#123;3306,3307&#125;

5ã€åˆ›å»ºmysql.sockæ–‡ä»¶
touch /tmp/mysql&#123;3306,3307&#125;.sock

è§£å‹MySQL1ã€ä½¿ç”¨xftpä¸Šä¼ mysql-5.6.34.tar.gzåˆ°CentOSæœåŠ¡å™¨ã€‚2ã€tar -zxvf mysql-5.6.34.tar.gzï¼Œè§£å‹mysqlã€‚
ç¼–è¯‘å®‰è£…MySQL1ã€cd mysql-5.6.34ï¼Œè¿›å…¥mysqlæºæ–‡ä»¶ç›®å½•ã€‚2ã€é…ç½®ç¼–è¯‘ã€‚
cmake \-DCMAKE_INSTALL_PREFIX=/usr/local/mysql3307 \-DMYSQL_DATADIR=/usr/local/mysql3307/data \-DSYSCONFDIR=/usr/local/mysql3307/etc \-DWITH_MYISAM_STORAGE_ENGINE=1 \-DWITH_INNOBASE_STORAGE_ENGINE=1 \-DWITH_MEMORY_STORAGE_ENGINE=1 \-DWITH_READLINE=1 \-DMYSQL_TCP_PORT=3307 \-DENABLED_LOCAL_INFILE=1 \-DWITH_PARTITION_STORAGE_ENGINE=1 \-DEXTRA_CHARSETS=all \-DDEFAULT_CHARSET=utf8 \-DDEFAULT_COLLATION=utf8_general_ci \-DMYSQL_USER=mysql \-DWITH_DEBUG=0 \-DWITH_SSL=system

3ã€ç¼–è¯‘å®‰è£…
makemake install
è¿™ä¸€æ­¥æ—¶é—´è¾ƒé•¿ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚
é…ç½®MySQL1ã€æ‹·è´æ¨¡æ¿ï¼Œä½œä¸ºé…ç½®æ–‡ä»¶ã€‚
cp /usr/local/mysql3307/support-files/my-default.cnf /usr/local/mysql3307/etc/my.cnf

2ã€è®¾ç½®å¼€æœºå¯åŠ¨ã€‚
cp /usr/local/mysql3307/support-files/mysql.server /etc/init.d/mysqld3307


3ã€ä¿®æ”¹my.cnf
# For advice on how to change settings please see# http://dev.mysql.com/doc/refman/5.6/en/server-configuration-defaults.html# *** DO NOT EDIT THIS FILE. It&#x27;s a template which will be copied to the# *** default location during install, and will be replaced if you# *** upgrade to a newer version of MySQL.[mysqld]# Remove leading # and set to the amount of RAM for the most important data# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.# innodb_buffer_pool_size = 128M# Remove leading # to turn on a very important data integrity option: logging# changes to the binary log between backups.# log_bin# These are commonly set, remove the # and set as required.basedir = /usr/local/mysql3307datadir = /usr/local/mysql3307/dataport = 3307# server_id = .....socket = /tmp/mysql3307.sock# Remove leading # to set options mainly useful for reporting servers.

4ã€åˆå§‹åŒ–mysqlæ•°æ®åº“ã€‚
/usr/local/mysql3307/scripts/mysql_install_db --basedir=/usr/local/mysql3307 --datadir=/usr/local/mysql3307/data --user=mysql


å¯åŠ¨MySQL1ã€å¯åŠ¨mysqlservice mysqld3307 start
2ã€è®¾ç½®è¶…çº§ç®¡ç†å‘˜å¯†ç /usr/local/mysql3307/bin/mysqladmin -u root password voidking -S /tmp/mysql3307.sock
3ã€ç™»å½•mysqlmysql -u root -p -S /tmp/mysql3307.sockï¼Œç„¶åè¾“å…¥å¯†ç voidkingï¼ŒæˆåŠŸç™»å½•mysql5.6ã€‚
è‡³æ­¤ï¼Œå¤šç‰ˆæœ¬mysqlå®‰è£…é…ç½®æˆåŠŸï¼
è¿œç¨‹è¿æ¥1ã€å…³é—­é˜²ç«å¢™systemctl stop firewalld.service
2ã€ç™»å½•mysqlæ§åˆ¶å°ï¼šmysql&gt; grant all privileges on *.* to &#39;root&#39;@&#39;%&#39; identified by &#39;voidking&#39; with grant option;
3ã€è¿œç¨‹è¿æ¥æµ‹è¯•æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨navicatç­‰å›¾å½¢åŒ–å·¥å…·ã€‚æ–¹æ¡ˆäºŒï¼šä½¿ç”¨mysqlå‘½ä»¤ï¼Œæ¯”å¦‚mysql -h 192.168.56.101 -P 3307 -u root -pvoidking
ä¹¦ç­¾MySQLä¹‹â€”â€”Centosä¸­å®‰è£…å¤šä¸ªmysqlæ•°æ®åº“çš„é…ç½®å®ä¾‹http://blog.csdn.net/l1028386804/article/details/48368937
centos6.5 MySQLå¤šå®ä¾‹å®‰è£…ä¸é…ç½®http://jingyan.baidu.com/article/9faa723187a5ab473c28cba8.html
centosç¼–è¯‘å®‰è£…mysql 5.6åŠå®‰è£…å¤šä¸ªmysqlå®ä¾‹http://blog.chinaunix.net/xmlrpc.php?r=blog/article&amp;uid=29792372&amp;id=5759878
centos7å®‰è£…è¿è¡Œå¤šä¸ªmysqlå®ä¾‹ç¬”è®°https://my.oschina.net/hollowj/blog/796146
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>centos</tag>
      </tags>
  </entry>
  <entry>
    <title>KISSYå…¥é—¨ç¯‡</title>
    <url>/dev-kissy-start/</url>
    <content><![CDATA[WHAT IS KISSY ?KISSY æ˜¯ä¸€æ¬¾è·¨ç»ˆç«¯ã€æ¨¡å—åŒ–ã€é«˜æ€§èƒ½ã€ä½¿ç”¨ç®€å•çš„ JavaScript æ¡†æ¶ã€‚é™¤äº†å®Œå¤‡çš„å·¥å…·é›†åˆå¦‚ DOMã€Eventã€Ajaxã€Anim ç­‰ï¼Œå®ƒè¿˜æä¾›äº†ç»å…¸çš„é¢å‘å¯¹è±¡ã€åŠ¨æ€åŠ è½½ã€æ€§èƒ½ä¼˜åŒ–è§£å†³æ–¹æ¡ˆã€‚ä½œä¸ºä¸€æ¬¾å…¨ç»ˆç«¯æ”¯æŒçš„ JavaScript æ¡†æ¶ï¼ŒKISSY ä¸ºç§»åŠ¨ç»ˆç«¯åšäº†å¤§é‡é€‚é…å’Œä¼˜åŒ–ï¼Œè®©ä½ çš„ç¨‹åºåœ¨å…¨ç»ˆç«¯å‡èƒ½æµç•…è¿è¡Œã€‚

å¼•å…¥KISSY1ã€å¼•å…¥çº¿ä¸Škissyã€‚
&lt;script src=&quot;http://g.alicdn.com/kissy/k/1.4.7/seed.js&quot;&gt;&lt;/script&gt;

2ã€å¼•å…¥æœ¬åœ°kissyã€‚
&lt;script src=&quot;./lib/kissy-1.3.2/build/seed.js&quot;&gt;&lt;/script&gt;

hello world1ã€å¯åŠ¨ï¼šHello World!
KISSY.ready(function(S)&#123;    alert(&#x27;Hello World!&#x27;);&#125;);

2ã€DOMæ“ä½œï¼šè·å–ä¸€ä¸ªclassNameå«continueçš„buttonï¼Œå¹¶å°†å®ƒçš„å†…å®¹æ”¹ä¸ºâ€Hello Kissyâ€ã€‚
KISSY.use(&#x27;node&#x27;,function(S,Node)&#123;    Node.one(&#x27;button.continue&#x27;).html(&#x27;Hello Kissy!&#x27;);&#125;);

3ã€äº‹ä»¶å¤„ç†ï¼šç‚¹å‡»ä¸€ä¸ªidä¸ºclick-meçš„buttonï¼Œæ˜¾ç¤º#banner-msgçš„å†…å®¹ã€‚
KISSY.use(&#x27;node&#x27;,function(S,Node)&#123;    Node.one(&#x27;#click-me&#x27;).on(&#x27;click&#x27;,function(e)&#123;        Node.one(&#x27;#banner-msg&#x27;).show();    &#125;);&#125;);

4ã€Ajaxï¼šè¯·æ±‚æœ¬åœ°æ•°æ®/data/ajax-data.jsonï¼Œå¸¦å…¥å‚æ•°zipcodeï¼Œå°†ç»“æœæ˜¾ç¤ºåœ¨#weather-conä¸­ã€‚
KISSY.use(&#x27;io,node&#x27;,function(S,io,Node)&#123;    io(&#123;        url:&#x27;./data/ajax-data.json&#x27;,        data:&#123;            zipcode:10010        &#125;,        success:function(data)&#123;            Node.one(&#x27;#weather-con&#x27;).html(&#x27;&lt;em&gt;&#x27; + data.weather + &#x27;&lt;/em&gt; æ‘„æ°åº¦&#x27;);        &#125;    &#125;);&#125;);


æºç åˆ†äº«https://github.com/voidking/kissy-start.git
ä¹¦ç­¾KISSY - A Powerful JavaScript Frameworkhttp://docs.kissyui.com/
KISSYé¡¹ç›®åœ°å€https://github.com/kissyteam/kissy
KISSY æŒ‡å¯¼æ‰‹å†Œhttp://docs.kissyui.com/1.4/docs/html/guideline/get-started.html
jQuery - KISSY Rosetta Stonehttp://cyj.me/jquery-kissy-rosetta/
KISSY æ¨¡å—å®šä¹‰è§„èŒƒï¼ˆKMDï¼‰http://docs.kissyui.com/1.4/docs/html/guideline/kmd.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>jiraç®€å•ä½¿ç”¨</title>
    <url>/dev-jira-start/</url>
    <content><![CDATA[æ–°å»ºé¡¹ç›®1ã€é¡¹ç›®ï¼Œåˆ›å»ºé¡¹ç›®ï¼ŒScrumå¼€å‘æ–¹æ³•ï¼Œä¸‹ä¸€æ­¥ï¼Œé€‰æ‹©ã€‚2ã€è¾“å…¥åç§°å’Œå…³é”®å­—ï¼Œå…¶ä¸­å…³é”®å­—ä¼šæˆä¸ºé¡¹ç›®ä¸­æ¯ä¸ªé—®é¢˜çš„å‰ç¼€ï¼Œæäº¤ã€‚3ã€é¡¹ç›®è®¾ç½®ï¼Œé—®é¢˜ç±»å‹ï¼Œæ“ä½œï¼Œç¼–è¾‘é—®é¢˜ç±»å‹ï¼Œç§»é™¤æˆ–æ·»åŠ é—®é¢˜ç±»å‹ã€‚4ã€é¡¹ç›®è®¾ç½®ï¼Œé—®é¢˜ç±»å‹ï¼Œç•Œé¢ï¼Œç§»é™¤æˆ–æ·»åŠ å­—æ®µï¼Œå…¶ä¸­æ¨¡å—å­—æ®µå¿…é¡»ä¿ç•™ã€‚5ã€æ¨¡å—ï¼Œè¾“å…¥æ¨¡å—åç§°ï¼ˆDefaultï¼‰ã€è¯´æ˜ã€é€‰æ‹©é»˜è®¤ç»åŠäººï¼Œæ·»åŠ ã€‚6ã€æ–°å»ºï¼Œåˆ›å»ºé—®é¢˜ï¼Œæµ‹è¯•åˆ›å»ºé—®é¢˜ã€‚


æ–°å»ºsprintsprintï¼Œå…¨é€ŸçŸ­è·‘ã€‚æ–°å»ºsprintï¼Œä¹Ÿå°±æ˜¯æ–°å»ºä¸€è½®è¿­ä»£ã€‚1ã€åœ¨é¡¶éƒ¨å¯¼èˆªæ é€‰æ‹©é¡¹ç›®ï¼Œæ‰“å¼€é¡¹ç›®ã€‚2ã€å•å‡»å·¦ä¾§å¯¼èˆªæ Backlogï¼ˆç§¯å‹æœªåŠä¹‹äº‹ï¼Œå­˜è´§ï¼‰ï¼Œæ‰“å¼€Backlogé¡µé¢ã€‚3ã€å•å‡»â€œcreate sprintâ€æŒ‰é’®ï¼Œåˆ›å»ºsprintã€‚4ã€å•å‡»æ–°å»ºçš„sprintåç§°ï¼Œé‡å‘½åè¯¥sprintã€‚
æ·»åŠ issuesissuesåŒ…æ‹¬Taskã€Storyã€Bugã€Epicï¼Œå¸¸ç”¨Taskå’ŒBugã€‚
1ã€åœ¨backlogé¡µé¢ï¼ŒæŠŠissuesæ‹‰å…¥æ–°å»ºçš„sprintã€‚2ã€å•å‡»ä»»æ„issueï¼Œå³ä¾§æ˜¾ç¤ºissueè¯¦æƒ…ï¼ˆæ­¤å¤„å¯ä»¥é€‰æ‹©æŠŠè¯¥issueåˆ†é…ç»™è‡ªå·±ï¼‰ã€‚
æ›´æ–°issue1ã€å•å‡»å·¦ä¾§å¯¼èˆªæ Active sprintsï¼Œæ‰“å¼€active sprintsé¡µé¢ã€‚2ã€åœ¨active sprintsé¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°issuesè¿›åº¦ï¼Œå¹¶ä¸”å¯ä»¥æ”¹å˜issueè¿›åº¦ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>jira</tag>
      </tags>
  </entry>
  <entry>
    <title>wikiç®€å•ä½¿ç”¨</title>
    <url>/dev-wiki-start/</url>
    <content><![CDATA[åˆ›å»ºç©ºé—´1ã€å¯¼èˆªæ ç‚¹å‡»ç©ºé—´ï¼Œåˆ›å»ºç©ºé—´ï¼Œé€‰æ‹©å›¢é˜Ÿç©ºé—´ã€‚2ã€å¡«å…¥ç©ºé—´ä¿¡æ¯ï¼Œåˆ›å»ºã€‚


æ–°å»ºé¡µé¢1ã€è¿›å…¥ç©ºé—´åï¼Œå¯¼èˆªæ ç‚¹å‡»åˆ›å»ºï¼Œç„¶åæ–°å»ºä¸€ä¸ªé¡µé¢ã€‚2ã€è¿›å…¥ä¸€ä¸ªé¡µé¢ï¼Œå¯¼èˆªæ ç‚¹å‡»åˆ›å»ºï¼Œç„¶åæ–°å»ºä¸€ä¸ªé¡µé¢ã€‚
åˆ‡æ¢ä¸»é¢˜1ã€å¯¼èˆªæ é€‰æ‹©ç©ºé—´ï¼Œç©ºé—´ç›®å½•ã€‚2ã€ç‚¹å‡»ç©ºé—´åç§°åé¢çš„å°åœ†åœˆï¼ˆSpace Detailsï¼‰ï¼Œè¿›å…¥ç©ºé—´ç®¡ç†é¡µé¢ã€‚æˆ–è€…åœ¨è¿›å…¥ç©ºé—´åç‚¹å‡»å³ä¸Šè§’å·¥å…·ï¼Œä»¥å±‚çº§æ–¹å¼æŸ¥çœ‹ã€‚3ã€ç‚¹å‡»å¤–è§‚ï¼Œä¸»é¢˜ï¼Œç„¶åé€‰æ‹©Documentation Themeï¼Œç¡®è®¤ã€‚
é¡µé¢æ ‘1ã€è¿›å…¥ç©ºé—´åï¼Œç‚¹å‡»å³ä¸Šè§’ç¼–è¾‘ã€‚2ã€åˆ é™¤ä¸éœ€è¦çš„æ¨¡å—ï¼Œä¿ç•™éœ€è¦çš„æ¨¡å—ã€‚3ã€æ’å…¥ï¼Œå…¶ä»–å®ï¼Œå¯¼èˆªï¼Œé¡µé¢æ ‘ã€‚4ã€é…ç½®é¡µé¢æ ‘ï¼Œæ’å…¥ã€‚
é‡å»ºç´¢å¼•æœ‰æ—¶å€™ï¼Œè¿›å…¥ç©ºé—´ç›®å½•ï¼Œå´çœ‹ä¸åˆ°æˆ‘ä»¬æ–°å»ºçš„ç©ºé—´ï¼Œè¿™æ˜¯å› ä¸ºç´¢å¼•æ²¡æœ‰æ›´æ–°ã€‚1ã€å¯¼èˆªæ å•å‡»ç®¡ç†ï¼ˆå³ä¸Šè§’é½¿è½®ï¼‰ï¼Œä¸€èˆ¬é…ç½®ã€‚2ã€ä¸‹æ‹‰åœ¨å·¦è¾¹å¯¼èˆªæ æ‰¾åˆ°ç®¡ç†ï¼Œå†…å®¹ç´¢å¼•ã€‚3ã€å•å‡»é‡æ–°åˆ›å»ºï¼Œç­‰å¾…ç‰‡åˆ»å³å¯ã€‚
wikiè½¬é‚®ä»¶æœ‰æ—¶å€™ï¼Œç¼–è¾‘å¥½äº†wikié¡µé¢ï¼Œç„¶åæƒ³ä½œä¸ºé‚®ä»¶å‘é€ã€‚ä½†æ˜¯ï¼Œå¦‚æœç›´æ¥å¤åˆ¶ç²˜è´´åˆ°outlookï¼Œä¼šå‘ç°æ ¼å¼å…¨éƒ¨éƒ½ä¹±äº†ã€‚æ¯”è¾ƒå¥½çš„åšæ³•æ˜¯å¯¼å‡ºä¸ºwordï¼Œæ‰“å¼€wordï¼Œå¤åˆ¶ç²˜è´´åˆ°outlookã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>wiki</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQLé—®é¢˜è®°å½•</title>
    <url>/dev-mysql-problem/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡è®°å½•ä½¿ç”¨MySQLè¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œå¤‡å¿˜ã€‚


ERROR 2002 (HY000)é—®é¢˜æè¿°mysql -u root -pï¼Œç„¶åè¾“å…¥å¯†ç ï¼Œç™»å½•mysqlï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š
ERROR 2002 (HY000): Can&#x27;t connect to local MySQL server through socket &#x27;/tmp/mysql.sock&#x27; (2)

æ’æŸ¥è§£å†³å‚è€ƒæ–‡æ¡£ï¼šMySQLé”™è¯¯ERROR 2002 (HY000)
1ã€æŸ¥çœ‹mysql.sockæ–‡ä»¶ä½ç½®find / -name mysql.sockï¼Œç»“æœä¸ºï¼š/data/db/3306/mysql.sock
å’ŒæŠ¥é”™ä¸­çš„/tmp/mysql.sockä¸ä¸€è‡´ã€‚
åœ¨/tmpä¸‹æ²¡æœ‰mysql.sockæ–‡ä»¶ï¼Œä¾æ¬¡æ‰§è¡Œtouch mysql.sockï¼Œchmod 666 mysql.sockã€‚
é‡å¯mysqlï¼Œservice mysqld restartï¼Œå†æ¬¡ç™»å½•mysqlï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š
ERROR 2002 (HY000): Can&#x27;t connect to local MySQL server through socket &#x27;/tmp/mysql.sock&#x27; (111)

2ã€æ‰¾åˆ°mysqlé…ç½®æ–‡ä»¶ps aux | grep mysqlï¼Œåœ¨ç»“æœä¸­æ‰¾åˆ°ï¼š
--defaults-file=/opt/mysql/my.cnf

3ã€æŸ¥çœ‹mysql.socké…ç½®more /opt/mysql/my.cnf | grep sockï¼Œç»“æœå¦‚ä¸‹ï¼š
socket=/data/db/3306/mysql.socksocket = /data/db/3306/mysql.sock

4ã€ä¿®æ”¹my.cnfvim /opt/mysql/my.cnfï¼Œä¿®æ”¹ä¸¤ä¸ªsocketå¦‚ä¸‹ï¼š
socket = /tmp/mysql.socksocket = /tmp/mysql.sock

é‡å¯mysqlï¼Œå†æ¬¡ç™»å½•ï¼ŒæˆåŠŸï¼
Lost connection to MySQL server during queryé—®é¢˜æè¿°Pythonä½¿ç”¨tortoise-ormåº“è¿æ¥MySQLï¼Œå¶å°”æŠ¥é”™ï¼š
2013, &#x27;Lost connection to MySQL server during query ([Errno 104] Connection reset by peer)&#x27;

æ’æŸ¥è§£å†³è¿™æ˜¯æŠ¥é”™ï¼Œæ˜¯å› ä¸ºmysqlè‡ªåŠ¨æ–­å¼€äº†é•¿æ—¶é—´æ²¡æœ‰ä»»ä½•åŠ¨ä½œçš„è¿æ¥ã€‚
è§£å†³åŠæ³•ï¼šä½¿ç”¨pool_recycleå‚æ•°ï¼Œå¹¶ä¸”å°äºwait_timeoutå’Œinteractive_timeoutã€‚ã€‚
åŸç†ï¼šmysqlæ ¹æ®wait_timeoutå’Œinteractive_timeoutçš„é…ç½®ï¼Œè‡ªåŠ¨æ–­å¼€é•¿æ—¶é—´æ²¡æœ‰ä»»ä½•åŠ¨ä½œçš„è¿æ¥ã€‚
tortoise-ormçš„pool_recycleå‚æ•°å¯ä»¥é¿å…MySQLè‡ªåŠ¨æ–­å¼€é•¿æ—¶é—´æ²¡æœ‰ä»»ä½•åŠ¨ä½œçš„è¿æ¥ï¼Œæ˜¯å› ä¸ºå®ƒä¼šå®šæœŸæ£€æŸ¥è¿æ¥çš„æœ‰æ•ˆæ€§ï¼Œå¹¶åœ¨è¶…è¿‡æŒ‡å®šæ—¶é—´åå…³é—­å¹¶é‡æ–°æ‰“å¼€è¿æ¥ã€‚è¿™æ ·ï¼Œå°±å¯ä»¥ä¿è¯è¿æ¥æ± ä¸­çš„è¿æ¥éƒ½æ˜¯æ–°é²œçš„ï¼Œä¸ä¼šå› ä¸ºMySQLæœåŠ¡å™¨çš„è¶…æ—¶è®¾ç½®è€Œè¢«æ–­å¼€ã€‚
pool_recycleåº”è¯¥å°äºwait_timeoutå’Œinteractive_timeoutã€‚
MySQLé…ç½®timeoutçš„æ–¹æ³•ï¼š1ã€æŸ¥çœ‹wait_timeoutå’Œinteractive_timeout
show global variables like &#x27;%timeout%&#x27;;show variables like &#x27;%timeout%&#x27;;

2ã€ç¼–è¾‘/etc/my.cnfï¼Œå¦‚ä¸‹ä¿®æ”¹
wait_timeout=28800interactive_timeout=28800

3ã€é‡å¯MySQL
caching_sha2_password cannot be loadedé—®é¢˜æè¿°mysqlå‘½ä»¤è¡Œè¿æ¥mysql8.0ï¼ŒæŠ¥é”™ï¼š
ERROR 2059 (HY000): Authentication plugin &#x27;caching_sha2_password&#x27; cannot be loaded: /usr/lib64/mysql/plugin/caching_sha2_password.so: cannot open shared object file: No such file or directory

æ’æŸ¥è§£å†³åŸå› ï¼šè¯¥é”™è¯¯é€šå¸¸æ˜¯ç”±äº MySQL 8 ä½¿ç”¨çš„é»˜è®¤èº«ä»½éªŒè¯æ’ä»¶å·²æ›´æ”¹è€Œå¼•èµ·çš„ã€‚MySQL 8 é»˜è®¤ä½¿ç”¨ caching_sha2_password èº«ä»½éªŒè¯æ’ä»¶ï¼Œè€Œä¹‹å‰ç‰ˆæœ¬é»˜è®¤ä½¿ç”¨ mysql_native_passwordã€‚
è§£å†³æ–¹æ³•ä¸€ï¼šæœåŠ¡ç«¯æ”¹ç”¨ mysql_native_password æ’ä»¶
[mysqld]default-authentication-plugin=mysql_native_password

è§£å†³æ–¹æ³•äºŒï¼šå‡çº§å®¢æˆ·ç«¯ï¼Œå®‰è£…æ”¯æŒmysql8.0çš„clientï¼Œå‚è€ƒæ–‡æ¡£ã€Šä½¿ç”¨Dockerå®‰è£…é…ç½®MySQLã€‹
rootæ— æƒgranté—®é¢˜é—®é¢˜æè¿°rootç”¨æˆ·ç™»å½•mysqlåï¼Œæ‰§è¡Œå‘½ä»¤ 
grant all privileges on *.* to &#x27;root&#x27;@&#x27;%&#x27; identified by &#x27;vkpassword2&#x27;;
æŠ¥é”™ï¼šError 1045 (28000): Access denied for user â€˜rootâ€˜@â€™localhostâ€™ (Using password: YES)
é—®é¢˜æ’æŸ¥åŸå› ï¼šroot@localhost ä¸å…·å¤‡grantæƒé™ã€‚
show grants for root@&#x27;localhost&#x27;;

å¦‚æœå…·å¤‡grantæƒé™ï¼Œé‚£ä¹ˆä¼šçœ‹åˆ°ä¸‹é¢çš„è¾“å‡ºï¼š
+---------------------------------------------------------------------+| Grants for root@localhost                                           |+---------------------------------------------------------------------+| GRANT ALL PRIVILEGES ON *.* TO &#x27;root&#x27;@&#x27;localhost&#x27; WITH GRANT OPTION || GRANT PROXY ON &#x27;&#x27;@&#x27;&#x27; TO &#x27;root&#x27;@&#x27;localhost&#x27; WITH GRANT OPTION        |+---------------------------------------------------------------------+

å¦‚æœæ²¡æœ‰grantæƒé™ï¼Œé‚£ä¹ˆç¬¬ä¸€è¡Œä¸ä¼šå‡ºç° WITH GRANT OPTIONã€‚
è§£å†³åŠæ³•ï¼š
update mysql.user set Grant_priv=&quot;Y&quot; where user=&quot;root&quot; and host=&quot;localhost&quot;;flush privileges;exit;

é‡æ–°ç™»å½•åï¼Œå°±å¯ä»¥æ­£å¸¸æ‰§è¡Œæˆæƒå‘½ä»¤äº†ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
        <category>database</category>
        <category>troubleshooting</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>mysql</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
      </tags>
  </entry>
  <entry>
    <title>é—ä¼ è§„åˆ’</title>
    <url>/dev-genetic-programming/</url>
    <content><![CDATA[æ¥é¾™å»è„‰åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ï¼Œå­˜åœ¨ä»€ä¹ˆé—®é¢˜ï¼Œé—ä¼ è§„åˆ’æ˜¯ä»ä»€ä¹ˆæ ·çš„è§†è§’æ¥è§£å†³é—®é¢˜çš„ï¼Ÿï¼ˆæ•´ä½“ä»‹ç»ï¼Œé€šå¸¸10åˆ†é’Ÿå·¦å³ï¼‰


ä»€ä¹ˆæ˜¯è¿›åŒ–ç®—æ³•è¿›åŒ–ç®—æ³•ï¼Œåˆç§°æ¼”åŒ–ç®—æ³• ï¼Œæ˜¯ä¸€ä¸ªç®—æ³•é›†åˆï¼ŒåŒ…æ‹¬é—ä¼ ç®—æ³•ã€é—ä¼ è§„åˆ’ã€è¿›åŒ–ç­–ç•¥å’Œè¿›åŒ–è§„åˆ’4ç§å…¸å‹æ–¹æ³•ã€‚è¿›åŒ–ç®—æ³•å€Ÿé‰´äº†è¿›åŒ–ç”Ÿç‰©å­¦çš„é—ä¼ ã€çªå˜ã€è‡ªç„¶é€‰æ‹©ä»¥åŠæ‚äº¤ç­‰ç°è±¡ï¼Œåˆ©ç”¨â€œä¼˜èƒœåŠ£æ±°â€ï¼Œæ¥å¤„ç†æœ€ä¼˜åŒ–é—®é¢˜ã€‚
ç”±äºé—ä¼ ç®—æ³•ã€è¿›åŒ–è§„åˆ’å’Œè¿›åŒ–ç­–ç•¥æ˜¯ä¸åŒé¢†åŸŸçš„ç ”ç©¶äººå‘˜åˆ†åˆ«ç‹¬ç«‹æå‡ºçš„ï¼Œåœ¨ç›¸å½“é•¿çš„æ—¶æœŸé‡Œç›¸äº’ä¹‹é—´æ²¡æœ‰æ­£å¼æ²Ÿé€šã€‚ç›´åˆ°90å¹´ä»£ï¼Œæ‰æœ‰æ‰€äº¤æµã€‚
ä»–ä»¬å‘ç°å½¼æ­¤çš„åŸºæœ¬æ€æƒ³å…·æœ‰æƒŠäººçš„ç›¸ä¼¼ä¹‹å¤„ï¼Œäºæ˜¯æå‡ºå°†è¿™ç±»æ–¹æ³•ç»Ÿç§°ä¸ºâ€œè¿›åŒ–è®¡ç®—â€ ( Evolutionary Computation ) ã€‚
ä»€ä¹ˆæ˜¯é—ä¼ è§„åˆ’é—ä¼ è§„åˆ’ï¼Œåˆç§°é—ä¼ ç¼–ç¨‹ï¼Œæ˜¯è¿›åŒ–ç®—æ³•çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œä¸é—ä¼ ç®—æ³•ä¸­æ¯ä¸ªä¸ªä½“æ˜¯ä¸€æ®µæŸ“è‰²ä½“ç¼–ç ä¸åŒï¼Œå®ƒçš„ä¸ªä½“æ˜¯ä¸€ä¸ªè®¡ç®—æœºç¨‹åºã€‚
é¦–å…ˆåˆ©ç”¨è®¡ç®—æœºéšæœºç”Ÿæˆçš„åƒç™¾ä¸‡ä¸ªç¨‹åºï¼Œç„¶åæ ¹æ®ä¸€ä¸ªç¨‹åºå®Œæˆç»™å®šçš„ä»»åŠ¡çš„èƒ½åŠ›æ¥ç¡®å®šæŸä¸ªç¨‹åºçš„é€‚åˆåº¦ï¼Œåº”ç”¨è¾¾å°”æ–‡çš„è‡ªç„¶é€‰æ‹©ï¼ˆé€‚è€…ç”Ÿå­˜ï¼‰ç¡®å®šèƒœå‡ºçš„ç¨‹åºï¼Œè®¡ç®—æœºç¨‹åºé—´ä¹Ÿæ¨¡æ‹Ÿä¸¤æ€§ç»„åˆï¼Œå˜å¼‚ï¼ŒåŸºå› å¤åˆ¶ï¼ŒåŸºå› åˆ é™¤ç­‰ä»£ä»£è¿›åŒ–ï¼Œç›´åˆ°è¾¾åˆ°é¢„å…ˆç¡®å®šçš„æŸä¸ªä¸­æ­¢æ¡ä»¶ä¸ºæ­¢ã€‚
é—ä¼ è§„åˆ’ä¸é—ä¼ ç®—æ³•çš„å…³ç³»é—ä¼ è§„åˆ’æ˜¯é—ä¼ ç®—æ³•çš„æ”¹è¿›ç®—æ³•ã€‚
é—ä¼ ç®—æ³•ä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸ºæŸ“è‰²ä½“å»è¡¨è¾¾æ‰€ç ”ç©¶çš„é—®é¢˜ï¼Œè€Œä¸”å­—ç¬¦ä¸²çš„é•¿åº¦å¸¸å¸¸æ˜¯å›ºå®šçš„ã€‚ç„¶è€Œï¼Œç°å®ä¸­çš„é—®é¢˜å¾€å¾€å¾ˆå¤æ‚ï¼Œæœ‰æ—¶ä¸èƒ½ç”¨ç®€å•çš„å­—ç¬¦ä¸²è¡¨è¾¾é—®é¢˜çš„æ‰€æœ‰æ€§è´¨ï¼Œäºæ˜¯å°±äº§ç”Ÿäº†é—ä¼ è§„åˆ’ã€‚é—ä¼ è§„åˆ’ç”¨å¹¿ä¹‰çš„è®¡ç®—æœºå½¢å¼è¡¨è¾¾é—®é¢˜ï¼Œå®ƒçš„ç»“æ„å’Œå¤§å°éƒ½æ˜¯å¯ä»¥å˜åŒ–çš„ï¼Œä»è€Œå¯ä»¥æ›´çµæ´»åœ°è¡¨è¾¾å¤æ‚çš„äº‹ç‰©æ€§è´¨ï¼Œæ›´æœ‰åˆ©äºç®—æ³•æ”¶æ•›åˆ°å…¨å±€æœ€ä¼˜è§£ï¼ŒåŒæ—¶ä¹Ÿå¼¥è¡¥äº†é—ä¼ ç®—æ³•åœ¨æŸäº›é¢†åŸŸå¾—ä¸åˆ°æœ‰æ•ˆåº”ç”¨çš„ä¸è¶³ã€‚
ä¸»è¦å†…å®¹åŸºæœ¬æ¦‚å¿µï¼ˆæœ€å¥½ä¸¾ä¾‹è¯´æ˜ï¼‰ã€é—ä¼ è§„åˆ’æè¿°ã€é—ä¼ è§„åˆ’å®ä¾‹ã€é—ä¼ è§„åˆ’ç‰¹ç‚¹ç­‰ã€‚ï¼ˆç»†èŠ‚ä»‹ç»ï¼Œé€šå¸¸20åˆ†é’Ÿå·¦å³ï¼‰
ä¸»è¦ç ”ç©¶é—®é¢˜åˆ©ç”¨æ–‡çŒ®æ³•æ¥æ€»ç»“å„ç§é—®é¢˜çš„ç ”ç©¶ç°çŠ¶ï¼ŒæŠŠä½ é˜…è¯»çš„æ–‡çŒ®ï¼ˆè‡³å°‘3ç¯‡ï¼‰æå‰3å¤©å‘åˆ°äº‘ç›˜ä¸­ã€‚ï¼ˆé‡ç‚¹å†…å®¹ä»‹ç»ï¼Œé€šå¸¸è®²è§£20åˆ†é’Ÿå·¦å³ï¼‰a)ç¼–ç é—®é¢˜ï¼šæ¯”å¦‚ï¼Œåœ¨å“ªå¹´ç”±è°æå‡ºäº†æ€æ ·çš„ç¼–ç æ–¹æ¡ˆï¼Ÿæ€§èƒ½å¦‚ä½•ï¼Ÿä¸»è¦ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿä¸»è¦ç”¨æ¥è§£å†³å“ªäº›ç±»é—®é¢˜ç­‰ã€‚b)å‚æ•°è®¾ç½®é—®é¢˜ï¼šæ¯”å¦‚ï¼Œå„ç§æ“ä½œçš„å‚æ•°é€‰æ‹©æ–¹æ³•ç­‰ã€‚c)å„ç§å¯å‘å¼å®ç°æ–¹æ³•ï¼šæ¯”å¦‚ï¼Œæœ‰è®°å¿†çš„é—ä¼ è§„åˆ’ç­‰ã€‚d)â€¦ â€¦
åº”ç”¨é¢†åŸŸåˆ©ç”¨æ–‡çŒ®æ³•æ¥æ€»ç»“é—ä¼ è§„åˆ’å„ç§é¢†åŸŸçš„åº”ç”¨ç°çŠ¶ï¼ŒæŠŠä½ é˜…è¯»çš„æ–‡çŒ®ï¼ˆè‡³å°‘3ç¯‡ï¼‰æå‰3å¤©å‘åˆ°äº‘ç›˜ä¸­. ï¼ˆé‡ç‚¹å†…å®¹ä»‹ç»ï¼Œé€šå¸¸è®²è§£20åˆ†é’Ÿå·¦å³ï¼‰ï¼Œæ¯”å¦‚ï¼Œa)åœ¨å“ªäº›é¢†åŸŸçš„å“ªäº›æ–¹é¢åº”ç”¨äº†é—ä¼ è§„åˆ’ï¼Ÿb)ä¸ºä»€ä¹ˆé€‰ç”¨è¿™ä¸ªç®—æ³•ï¼Ÿå…·ä½“å¦‚ä½•å®ç°çš„ï¼Ÿc)æ€§èƒ½å¦‚ä½•ï¼Ÿå­˜åœ¨æ€æ ·çš„é—®é¢˜ï¼Ÿæ”¹è¿›æ–¹å‘å¦‚ä½•ï¼Ÿ
è¿›åŒ–ç®—æ³•åº”ç”¨1ã€ç»“æ„æ€§ä¼˜åŒ–ã€‚é€šå¸¸ï¼Œå·¥ç¨‹æŠ€æœ¯çš„ä¼˜åŒ–åŒ…æ‹¬ç»“æ„ä¼˜åŒ–å’Œå‚æ•°ä¼˜åŒ–ã€‚å¯¹äºåè€…ï¼Œäººä»¬å·²ç»æˆåŠŸåœ°ä½¿ç”¨äº†è®¸å¤šæ–¹æ³•ï¼Œå¦‚è¿ç­¹å­¦ã€æ•°ç†ç»Ÿè®¡ã€æœ‰é™å…ƒç­‰æ•°å€¼è®¡ç®—ã€‚ç„¶è€Œå¯¹äºç»“æ„ä¼˜åŒ–ï¼Œè¿˜ç¼ºä¹æˆç†Ÿã€æœ‰æ•ˆçš„æ–¹æ³•ã€‚è¿‘å¹´æ¥ï¼Œäººä»¬è¿ç”¨è¿›åŒ–ç®—æ³•ï¼ŒæˆåŠŸè§£å†³äº†å»ºç­‘æ¡†æ¶ç»“æ„ã€é£æœºç»“æ„è®¾è®¡ã€ç”µç½‘åŠç®¡ç½‘ç­‰ç½‘ç»œç»“æ„ç­‰ç»“æ„å‹é—®é¢˜ï¼Œå……åˆ†æ˜¾ç¤ºè¿›åŒ–ç®—æ³•åœ¨è¿™ä¸€é¢†åŸŸçš„å¹¿é˜”å¼•ç”¨å‰æ™¯ã€‚
2ã€äººå·¥æ™ºèƒ½ã€‚è¿›åŒ–ç®—æ³•ç»§æ¨¡ç³Šæ•°å­¦ã€ä¸“å®¶ç³»ç»Ÿã€äººå·¥ç¥ç»ç½‘ç»œä¹‹åï¼Œæˆä¸ºå¤„ç†äººå·¥æ™ºèƒ½çš„åˆä¸€ä¸ªæœ‰åŠ›å·¥å…·ã€‚è®¸å¤šç ”ç©¶å·¥ä½œè€…åˆ©ç”¨è¿™ç§æ–°æŠ€æœ¯ï¼Œä»äº‹æœºå™¨å­¦ä¹ ã€è‡ªåŠ¨ç¨‹åºè®¾è®¡ã€èšç±»åˆ†æã€åšå¼ˆå¯¹ç­–ç­‰å·¥ä½œã€‚åœ¨çŸ¥è¯†å·¥ç¨‹æ–¹é¢ï¼Œè¿›åŒ–ç®—æ³•å‘æŒ¥è¶Šæ¥è¶Šé‡è¦çš„ä½œç”¨ã€‚
3ã€å¤æ‚é—®é¢˜çš„ä¼˜åŒ–ã€‚å½“æ‰€è¦è§£å†³çš„é—®é¢˜å…·æœ‰éçº¿æ€§ã€å¤šå³°å€¼ã€ä¸ç¡®å®šæ€§æ—¶ï¼Œä½¿ç”¨ä¼ ç»Ÿçš„ä¼˜åŒ–æ–¹æ³•å¸¸å¸¸ä¸èƒ½å¥æ•ˆã€‚è¿›åŒ–ç®—æ³•ç”±äºæ˜¯ä¸€ç§é»‘ç®±å¼çš„æ¡†æ¶å‹æŠ€æœ¯ï¼Œä¸è¦æ±‚æœ‰æ˜ç¡®çš„å› æœå…³ç³»æ•°å­¦è¡¨è¾¾å¼ï¼Œå› æ­¤å®ƒæ˜¯è§£å†³è¿™ç±»é—®é¢˜çš„æœ‰åŠ›å·¥å…·ï¼Œå¯ä»¥è§£å†³è¯¸å¦‚æ¶²ä½“æµåŠ¨ã€æ°”å€™å˜åŒ–ä»¥åŠå†›äº‹æˆ˜ç•¥ç­‰éçº¿æ€§åŠ¨æ€ç³»ç»Ÿé—®é¢˜ã€‚
4ã€å¤æ‚ç³»ç»Ÿåˆ†æã€‚å¤šå¹´æ¥ï¼Œäººä»¬åº”ç”¨è¿›åŒ–ç®—æ³•ä»äº‹èšç±»åˆ†æã€æ¨¡å¼è¯†åˆ«ã€å›¾åƒå¤„ç†ã€è°ƒåº¦ç»„ç»‡ç­‰å·¥ä½œï¼Œå°†è¡¨é¢ä¸Šæ‚ä¹±æ— ç« çš„å¤æ‚äº‹ç‰©æ¡ç†åŒ–ã€‚å¯¹äºè¿™ç±»å¤æ‚ç³»ç»Ÿçš„åˆ†æå’Œå½’çº³ï¼Œè¿›åŒ–ç®—æ³•å…·æœ‰å¾ˆå¤§çš„å¼•ç”¨ä»·å€¼ã€‚
5ã€ç»¼åˆåº”ç”¨ã€‚éšç€ç§‘å­¦æŠ€æœ¯çš„å‘å±•ï¼Œå„ç§å­¦ç§‘ä¸æ–­äº¤å‰æ¸—é€ï¼Œç›¸äº’ä¿ƒè¿›ã€‚åŒæ ·ï¼Œè¿›åŒ–ç®—æ³•ä¹Ÿè¦å’Œå…¶ä»–æŠ€æœ¯æ‰‹æ®µç›¸ç»“åˆï¼Œå„è‡ªå‘æŒ¥ç‰¹é•¿ï¼Œç»¼åˆè§£å†³é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œäººä»¬å·²å°†é—ä¼ ç®—æ³•å’Œäººå·¥ç¥ç»ç½‘ç»œç›¸ç»“åˆï¼ŒæˆåŠŸåœ°è§£å†³äº†æœºå™¨å­¦ä¹ ç­‰é—®é¢˜ã€‚
ç”±äºè¿›åŒ–ç®—æ³•å…·æœ‰å¹¿é˜”çš„åº”ç”¨èŒƒå›´ï¼Œæˆ‘ä»¬æ— æ³•ä¸€ä¸€åˆ—ä¸¾å…·ä½“çš„åº”ç”¨é¢†åŸŸï¼Œåªèƒ½æ¦‚æ‹¬åœ°æŒ‡æ˜åº”ç”¨æ–¹å‘ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå®ƒçš„åº”ç”¨èŒƒå›´è¿˜ä¼šä¸æ–­æ‰©å¤§ã€‚
é—ä¼ ç®—æ³•åº”ç”¨1ã€å‡½æ•°ä¼˜åŒ–æ˜¯é—ä¼ ç®—æ³•çš„ç»å…¸åº”ç”¨é¢†åŸŸ;
2ã€ç»„åˆä¼˜åŒ–å®è·µè¯æ˜ï¼Œé—ä¼ ç®—æ³•å¯¹äºç»„åˆä¼˜åŒ–ä¸­çš„NPå®Œå…¨é—®é¢˜éå¸¸æœ‰æ•ˆ;
3ã€è‡ªåŠ¨æ§åˆ¶å¦‚åŸºäºé—ä¼ ç®—æ³•çš„æ¨¡ç³Šæ§åˆ¶å™¨ä¼˜åŒ–è®¾è®¡ã€åŸºäºé—ä¼ ç®—æ³•çš„å‚æ•°è¾¨è¯†ã€åˆ©ç”¨é—ä¼ ç®—æ³•è¿›è¡Œäººå·¥ç¥ç»ç½‘ç»œçš„ç»“æ„ä¼˜åŒ–è®¾è®¡å’Œæƒå€¼å­¦ä¹ ç­‰;
4ã€æœºå™¨äººæ™ºèƒ½æ§åˆ¶é—ä¼ ç®—æ³•å·²ç»åœ¨ç§»åŠ¨æœºå™¨äººè·¯å¾„è§„åˆ’ã€å…³èŠ‚æœºå™¨äººè¿åŠ¨è½¨è¿¹è§„åˆ’ã€æœºå™¨äººé€†è¿åŠ¨å­¦æ±‚è§£ã€ç»†èƒæœºå™¨äººçš„ç»“æ„ä¼˜åŒ–å’Œè¡ŒåŠ¨åè°ƒç­‰;
5ã€ç»„åˆå›¾åƒå¤„ç†å’Œæ¨¡å¼è¯†åˆ«ç›®å‰å·²åœ¨å›¾åƒæ¢å¤ã€å›¾åƒè¾¹ç¼˜æŒå¾æå–ã€å‡ ä½•å½¢çŠ¶è¯†åˆ«ç­‰æ–¹é¢å¾—åˆ°äº†åº”ç”¨;
6ã€äººå·¥ç”Ÿå‘½åŸºäºé—ä¼ ç®—æ³•çš„è¿›åŒ–æ¨¡å‹æ˜¯ç ”ç©¶äººå·¥ç”Ÿå‘½ç°è±¡çš„é‡è¦ç†è®ºåŸºç¡€ï¼Œé—ä¼ ç®—æ³•å·²åœ¨å…¶è¿›åŒ–æ¨¡å‹ã€å­¦ä¹ æ¨¡å‹ã€è¡Œä¸ºæ¨¡å‹ç­‰æ–¹é¢æ˜¾ç¤ºäº†åˆæ­¥çš„åº”ç”¨èƒ½åŠ›ï¼›
7ã€é—ä¼ ç¨‹åºè®¾è®¡Kozaå‘å±•äº†é—ä¼ ç¨‹åºè®¾è®¡çš„æ…¨å¿µï¼Œä»–ä½¿ç”¨äº†ä»¥LISPè¯­è¨€æ‰€è¡¨ç¤ºçš„ç¼–ç æ–¹æ³•ï¼ŒåŸºäºå¯¹ä¸€ç§æ ‘å‹ç»“æ„æ‰€è¿›è¡Œçš„é—ä¼ æ“ä½œè‡ªåŠ¨ç”Ÿæˆè®¡ç®—æœºç¨‹åº;
é€‰ç”¨å’Œå®ç°1ã€ä¸ºä»€ä¹ˆé€‰ç”¨é—ä¼ è§„åˆ’ï¼Ÿä¸ºäº†è§£å†³ç»“æ„æ€§ä¼˜åŒ–é—®é¢˜ç­‰ä¼ ç»Ÿæ–¹æ³•è§£å†³ä¸äº†çš„é—®é¢˜ã€‚
2ã€å®ç°çš„ä¾‹å­ä»¥æ›²çº¿æ‹Ÿåˆä¸ºä¾‹ï¼Œè¯´æ˜é—ä¼ è§„åˆ’çš„åŸºæœ¬åŸç†ã€‚å›¾1-5çš„æ›²çº¿è¡¨ç¤ºå®éªŒçš„ç»“æœï¼Œç°åœ¨è¦ç¡®å®šå®éªŒç»“æœçš„çš„å‡½æ•°å…³ç³»y=f(x)ã€‚
é—ä¼ è§„åˆ’çš„å·¥ä½œåŸç†å¤§è‡´å¦‚ä¸‹ï¼šï¼ˆ1ï¼‰é€‰æ‹©åˆå§‹ç»“æ„ã€‚é‡‡ç”¨éšæœºäº§ç”Ÿçš„æ–¹æ³•ï¼Œå‡è®¾y=f(x)çš„è¡¨è¾¾å¼æœ‰ä¸‹è¿°å››ç§ï¼š$$1) y = A + Bx$$$$2) y = A + Bx + Cx^2$$$$3) y = xsinx$$$$4) y = Dxsinx$$
ï¼ˆ2ï¼‰è®¡ç®—é€‚åº”åº¦ã€‚å°†ä¸åŒçš„$x_i$å¸¦å…¥å››ç§åˆå§‹è¡¨è¾¾å¼ä¸­ï¼Œä»è€Œå¾—å‡ºä¸€ç»„ä¸åŒ$y_j$ï¼Œå°†è®¡ç®—æ‰€å¾—çš„$y_j$ä¸å®éªŒæ•°æ®$y_i$ç›¸æ¯”è¾ƒï¼Œå¯ä»¥è¡¡é‡åˆå§‹è¡¨è¾¾å¼çš„ä¼˜åŠ£ã€‚å‡è®¾ç¬¬3ç§è¡¨è¾¾å¼æœ€ä½³ï¼Œç¬¬1ç§è¡¨è¾¾å¼æœ€å·®ã€‚
ï¼ˆ3ï¼‰å¤åˆ¶ã€‚æ ¹æ®ä¼˜èƒœåŠ£æ±°çš„åŸåˆ™ï¼Œå¤åˆ¶æ•ˆæœæœ€ä½³çš„ç¬¬3ç§è¡¨è¾¾å¼ï¼Œæ·˜æ±°æ•ˆæœæœ€å·®çš„ç¬¬1ç§è¡¨è¾¾å¼ï¼Œäºæ˜¯ï¼Œæ–°ä¸€ä»£çš„è¡¨è¾¾å¼ç”±ä¸‹è¿°æ–¹ç¨‹ç»„æˆï¼š$$1) y = xsinx$$$$2) y = A + Bx + Cx^2$$$$3) y = xsinx$$$$4) y = Dxsinx$$
ï¼ˆ4ï¼‰äº¤æ¢ã€‚ä¸ºäº†äº§ç”Ÿæ–°çš„è¡¨è¾¾å¼ï¼Œéœ€è¦ä½¿ç”¨äº¤æ¢ã€‚é‡‡ç”¨éšæœºé€‰æ‹©çš„æ–¹æ³•ï¼Œå‡è®¾ç¬¬2ã€3ç§è¡¨è¾¾å¼è¿›è¡Œäº¤æ¢ï¼Œäº¤æ¢ä½ç½®åœ¨ç¬¬ä¸€é¡¹ï¼Œåˆ™æ–°çš„è¡¨è¾¾å¼ä¸ºï¼š$$1) y = xsinx$$$$2) y = x + Bx + Cx^2$$$$3) y = Asinx$$$$4) y = Dxsinx$$
ï¼ˆ5ï¼‰çªå˜ã€‚åœ¨é—ä¼ è§„åˆ’ä¸­ä¹Ÿå¯ä»¥é‡‡ç”¨çªå˜äº§ç”Ÿæ–°ä¸ªä½“ã€‚ä¾‹å¦‚ï¼Œå°†è¡¨è¾¾å¼ä¸­çš„$sinx$å˜ä¸º$cosx$ï¼Œä¸è¿‡ï¼Œé—ä¼ è§„åˆ’ä¸­çš„çªå˜è¿œä¸åŠåœ¨é—ä¼ ç®—æ³•ä¸­é‚£æ ·é‡è¦ã€‚
ä¸Šè¿°ï¼ˆ2ï¼‰~ï¼ˆ5ï¼‰åå¤æ‰§è¡Œï¼Œä½¿å‡½æ•°è¡¨è¾¾å¼y=f(x)ä¸æ–­å˜åŒ–ï¼Œé€æ­¥å¾—åˆ°æ‰€è¦æ±‚çš„è¡¨è¾¾å¼ã€‚
æ€§èƒ½ã€é—®é¢˜å’Œæ”¹è¿›1ã€æ€§èƒ½æ²¡æœ‰æ‰¾åˆ°å…·ä½“æ€§èƒ½è¯„ä¼°æ•°æ®ï¼ŒçŒœæµ‹æ˜¯ç”¨æ—¶é—´å’Œé€‚åº”åº¦ä¸¤æ–¹é¢è¿›è¡Œè¡¡é‡ã€‚
2ã€é—®é¢˜ï¼ˆ1ï¼‰æ±‚è§£çš„æ˜¯ä¸€ä¸ªæè¿°é—®é¢˜çš„ç¨‹åºï¼ˆæˆ–è€…è¯´æ˜¯ä¸€ä¸ªç®—æ³•ï¼‰ã€‚ï¼ˆ2ï¼‰é€šå¸¸ç”¨æ ‘å‹ç»“æ„æ¥è¡¨ç¤ºï¼Œæè¿°ç›¸å¯¹å¤æ‚ã€‚ï¼ˆ3ï¼‰æ¯ä¸€ä»£çš„ä¸ªä½“çš„é•¿åº¦ï¼ˆæ·±åº¦ï¼‰ä¸€èˆ¬æ˜¯ä¸åŒçš„ï¼Œå³ä½¿åœ¨åŒä¸€ä»£ä¸­çš„ä¸ªä½“ä¹‹é—´çš„é•¿åº¦ï¼ˆæ·±åº¦ï¼‰ä¹Ÿæ˜¯ä¸åŒçš„ã€‚ï¼ˆ4ï¼‰æ‰€æ¶ˆè€—çš„èµ„æºæ˜¯ä¸å¯æ§çš„ï¼ˆè¿™é‡Œæ‰€æŒ‡çš„ä¸å¯æ§æ˜¯æŒ‡ä¸èƒ½ç²¾ç¡®çš„æè¿°ï¼‰ï¼Œéœ€è¦æ¶ˆè€—å¤§é‡çš„å†…å­˜ç©ºé—´ï¼Œå› è€Œæ¯ä¸€ä»£çš„è¿›åŒ–éƒ½æ¯”è¾ƒæ…¢ã€‚
3ã€æ”¹è¿›ï¼ˆ1ï¼‰ç¡®å®šåˆå§‹ç¾¤ä½“è§„æ¨¡çš„æ–¹æ³•çš„æ”¹è¿›ã€‚ï¼ˆ2ï¼‰ç¼–ç æŠ€æœ¯å’Œç¨‹åºè¡¨è¾¾æŠ€æœ¯çš„æ”¹è¿›ã€‚ï¼ˆ3ï¼‰å¤åˆ¶ã€äº¤æ¢ã€çªå˜ç­‰é—ä¼ æ“ä½œçš„æ”¹è¿›ã€‚ï¼ˆ4ï¼‰é€‚åº”åº¦çš„è¡¨è¾¾å’Œè®¡ç®—çš„æ”¹è¿›ã€‚ï¼ˆ5ï¼‰å¯»æ±‚å…¶ä»–æœ‰æ•ˆçš„é—ä¼ ç®—å­ï¼Œé˜²æ­¢è¿‘ç¼˜æ‚äº¤ã€è¿‡æ—©æ”¶æ•›ç­‰å¼Šç—…ã€‚
å‚è€ƒæ–‡æ¡£è¿›åŒ–ç®—æ³•é—ä¼ ç®—æ³•é—ä¼ ç¼–ç¨‹
]]></content>
      <categories>
        <category>engineering</category>
        <category>algorithm</category>
      </categories>
      <tags>
        <tag>çŸ¥è¯†å·¥ç¨‹</tag>
        <tag>mathjax</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŠçŸ¥è¯†å·¥ç¨‹ã€‹æ•™å­¦å¤§çº²</title>
    <url>/dev-knowledge-engineering/</url>
    <content><![CDATA[è¯¾ç¨‹ç›®æ ‡äººå·¥æ™ºèƒ½ä¸ºçŸ¥è¯†å·¥ç¨‹çš„å‘å±•æä¾›äº†ç†è®ºåŸºç¡€ï¼ŒçŸ¥è¯†å·¥ç¨‹çš„å‘å±•è¿›ä¸€æ­¥å°†äººå·¥æ™ºèƒ½æ¨å‘äº†æ›´å¹¿æ³›çš„åº”ç”¨é¢†åŸŸã€‚å…·ä½“ç›®æ ‡åŒ…æ‹¬ï¼šï¼ˆ1ï¼‰ä¸°å¯Œå’Œå®Œå–„å¯¹äººå·¥æ™ºèƒ½é¢†åŸŸçš„ç†è®ºã€æ–¹æ³•çš„å­¦ä¹ å’Œç ”ç©¶ã€‚ï¼ˆ2ï¼‰å­¦ä¹ å’Œç ”ç©¶è®¡ç®—æ™ºèƒ½çš„å¯å‘å¼ç®—æ³•ã€‚é€šè¿‡è‡ªä¸»/åˆä½œå­¦ä¹ ä¸ç ”ç©¶çš„æ–¹æ³•ï¼Œè®­ç»ƒå’Œæå‡å­¦ç”Ÿåˆ†æé—®é¢˜ã€å‘ç°é—®é¢˜å’Œè§£å†³å®é™…é—®é¢˜çš„èƒ½åŠ›ã€‚ï¼ˆ3ï¼‰æé«˜å­¦ç”Ÿè·å–æ–‡çŒ®çš„èƒ½åŠ›ã€‚åŒæ—¶ï¼Œé€šè¿‡ä¹¦å†™æ–‡ç« æ¥æé«˜å­¦ç”Ÿå½’çº³ã€æ€»ç»“ã€æŠ½è±¡ã€æç‚¼ç ”ç©¶æˆæœçš„å­¦æœ¯ç ”ç©¶ç´ å…»ï¼Œä¸ºå¼€é¢˜æŠ¥å‘Šå’Œæ¯•ä¸šè®ºæ–‡çš„å®Œæˆå’Œå°†æ¥ä»äº‹ç§‘å­¦ç ”ç©¶å·¥ä½œå¥ å®šåšå®çš„åŸºç¡€ã€‚


è¯¾ç¨‹å†…å®¹ã€ŠçŸ¥è¯†å·¥ç¨‹ã€‹è¿™é—¨è¯¾æ˜¯ç ”ç©¶ç”Ÿç¬¬ä¸€å­¦æœŸã€Šäººå·¥æ™ºèƒ½ã€‹ä¸“ä¸šåŸºç¡€è¯¾çš„åç»­è¯¾ç¨‹ã€‚ç”±äºã€Šäººå·¥æ™ºèƒ½ã€‹è¯¾ä¸­å¯¹åŸºæœ¬çš„çŸ¥è¯†è¡¨ç¤ºã€çŸ¥è¯†æ¨ç†ã€çŸ¥è¯†è·å–ã€ä¸“å®¶ç³»ç»Ÿç­‰æ–¹é¢çš„åŸºæœ¬ç†è®ºå’Œæ–¹æ³•è¿›è¡Œäº†è¯¦ç»†çš„è®²æˆå’Œè®¨è®ºï¼Œæ‰€ä»¥åœ¨ã€ŠçŸ¥è¯†å·¥ç¨‹ã€‹è¿™é—¨è¯¾ä¸­å°†ä¸»è¦ä»è®¡ç®—æ™ºèƒ½çš„è§’åº¦æ¥å¼€å±•æ•™å­¦å’Œç ”ç©¶ã€‚æœ¬è¯¾ç¨‹å…±åŒ…æ‹¬4ä¸ªæ¨¡å—ï¼Œå«7ä¸ªä¸“é¢˜ã€‚æ¨¡å—ä¸€ä¸ºäººå·¥æ™ºèƒ½ä¸çŸ¥è¯†å·¥ç¨‹æ¦‚è¿°ï¼ˆä¸“é¢˜1ï¼‰ã€‚æ¨¡å—äºŒä¸ºä¼ ç»Ÿäººå·¥æ™ºèƒ½åŸºæœ¬ç†è®ºå’Œæ–¹æ³•çš„æ¢³ç†ï¼ˆä¸“é¢˜2-3ï¼‰ã€‚æ¨¡å—ä¸‰ä¸ºè®¡ç®—æ™ºèƒ½ç ”ç©¶ï¼ˆä¸“é¢˜4-6ï¼‰ã€‚æ¨¡å—å››ä¸ºç§‘æŠ€è®ºæ–‡ä¹¦å†™æ¢è®¨ï¼ˆä¸“é¢˜7ï¼‰ã€‚å…¶ä¸­çš„é‡éš¾ç‚¹éƒ¨åˆ†æ˜¯ç¬¬ä¸‰æ¨¡å—ã€‚
ä¸“é¢˜ä¸€ï¼šäººå·¥æ™ºèƒ½ä¸çŸ¥è¯†å·¥ç¨‹æ¦‚è¿°ï¼ˆ2å­¦æ—¶ 2017-3-1ï¼‰
1ã€æ ¸å¿ƒå†…å®¹äººå·¥æ™ºèƒ½çš„ç ”ç©¶é€”å¾„ï¼›äººå·¥æ™ºèƒ½çš„åº”ç”¨é¢†åŸŸï¼›åœ¨å¤§æ•°æ®ç¯å¢ƒä¸‹äººå·¥æ™ºèƒ½çš„ç ”ç©¶æ–¹æ³•å’Œå‘å±•è¶‹åŠ¿ï¼›çŸ¥è¯†å·¥ç¨‹ä¸çŸ¥è¯†ç®¡ç†ç­‰ã€‚
2ã€æ€è€ƒä¸è®¨è®ºé—®é¢˜å¤§æ•°æ®å’Œäººå·¥æ™ºèƒ½çš„å…³ç³»ã€‚ä»IBMçš„Watsonæœºå™¨äººåˆ°è°·æ­ŒDeepMindå®éªŒå®¤ç ”å‘çš„äººå·¥æ™ºèƒ½å›´æ£‹ç¨‹åºAlphaGoï¼Œç»™ä½ æ€æ ·çš„å¯ç¤ºã€‚ä»€ä¹ˆæ˜¯è®¡ç®—æ™ºèƒ½ï¼Ÿè®¡ç®—æ™ºèƒ½å’Œä¼ ç»Ÿäººå·¥æ™ºèƒ½æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿä»€ä¹ˆæ˜¯å¯å‘å¼ç®—æ³•ï¼Ÿæ¯”è¾ƒè‘—åçš„å¯å‘å¼ç®—æ³•æœ‰å“ªäº›ï¼Ÿè®¨è®ºæœ¬è¯¾ç¨‹çš„æ•™å­¦ç›®æ ‡ã€æ•™å­¦å†…å®¹ã€æ•™å­¦æ–¹å¼ã€è€ƒæ ¸æ–¹å¼ç­‰çš„è®¾ç½®æ˜¯å¦åˆç†ï¼Ÿ
3ã€é˜…è¯»æ–‡çŒ®å‚è€ƒæ–‡çŒ®1ä¸­çš„ç¬¬1ã€7ã€8ç« å‚è€ƒæ–‡çŒ®2ä¸­çš„ç¬¬1ç« å‚è€ƒæ–‡çŒ®3ä¸­çš„ç¬¬1ç« å‚è€ƒæ–‡çŒ®5
ä¸“é¢˜äºŒï¼šçŸ¥è¯†è¡¨ç¤ºã€çŸ¥è¯†æ¨ç†å’ŒçŸ¥è¯†è·å–çš„æ–¹æ³•ï¼ˆ2å­¦æ—¶ 2017-3-8ï¼‰
1ã€æ ¸å¿ƒå†…å®¹çŸ¥è¯†è¡¨ç¤ºæ–¹æ³•åŠç‰¹ç‚¹çš„åˆ†æå’Œæ€»ç»“ï¼›åŸºæœ¬æ¨ç†æ–¹æ³•å’Œå®ç”¨æ¨ç†æŠ€æœ¯çš„æ¢³ç†ï¼›çŸ¥è¯†è·å–çš„åŸºæœ¬è¿‡ç¨‹ã€æ‰‹æ®µå’Œå·¥å…·çš„åˆ†æå’Œæ€»ç»“ï¼›å„ç±»æœºå™¨å­¦ä¹ æ–¹æ³•çš„å›é¡¾ä¸æ¯”è¾ƒç­‰ã€‚
2ã€æ€è€ƒä¸è®¨è®ºé—®é¢˜å¦‚ä½•ç†è§£å’Œåº”ç”¨å¯å‘å¼æœç´¢ç­–ç•¥ï¼ŸçŸ¥è¯†è·å–çš„é€”å¾„æœ‰å“ªäº›ï¼Ÿæœºå™¨å­¦ä¹ ã€çŸ¥è¯†å‘ç°å’Œæ•°æ®æŒ–æ˜æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ
3ã€é˜…è¯»æ–‡çŒ®å‚è€ƒæ–‡çŒ®1ä¸­çš„ç¬¬5ç« å‚è€ƒæ–‡çŒ®2ä¸­çš„ç¬¬2ã€3ã€4ã€8ç« å‚è€ƒæ–‡çŒ®5
ä¸“é¢˜ä¸‰ï¼šä¸“å®¶ç³»ç»Ÿï¼ˆ2å­¦æ—¶ 2017-3-15ï¼‰
1ã€æ ¸å¿ƒå†…å®¹ä¸“å®¶ç³»ç»Ÿçš„ç»“æ„ã€åŸç†ã€å»ºé€ åŠè¯„ä»·çš„åˆ†æå’Œæ€»ç»“ã€‚æ¢è®¨å¤§æ•°æ®ç¯å¢ƒä¸‹çš„ä¸“å®¶ç³»ç»Ÿçš„è®¾è®¡åŠå®ç°çš„å…³é”®é—®é¢˜ã€‚
2ã€æ€è€ƒä¸è®¨è®ºé—®é¢˜åŸºäºçŸ¥è¯†çš„ç³»ç»Ÿï¼ˆä¸“å®¶ç³»ç»Ÿï¼‰çš„ç ”ç©¶ç“¶é¢ˆé—®é¢˜æœ‰å“ªäº›ï¼Ÿç ´è§£æ€è·¯æ˜¯ä»€ä¹ˆï¼Ÿæ·±å±‚çŸ¥è¯†ä¸“å®¶ç³»ç»Ÿã€æ¨¡ç³Šä¸“å®¶ç³»ç»Ÿå’Œç¥ç»ç½‘ç»œä¸“å®¶ç³»ç»Ÿçš„æ·±å…¥ç ”ç©¶ã€‚å¤§å‹ååŒåˆ†å¸ƒå¼ä¸“å®¶ç³»ç»Ÿçš„è®¾è®¡ä¸å®ç°çš„å…³é”®é—®é¢˜åˆ†æã€‚
3ã€é˜…è¯»æ–‡çŒ®å‚è€ƒæ–‡çŒ®1ä¸­çš„ç¬¬2ç« å‚è€ƒæ–‡çŒ®2ä¸­çš„ç¬¬7ç« å‚è€ƒæ–‡çŒ®5
ä¸“é¢˜å››ï¼šæ¼”åŒ–è®¡ç®—ï¼ˆ6 å­¦æ—¶ 2017-3-22 ~2017-4-5ï¼‰
1ã€æ ¸å¿ƒå†…å®¹æ¼”åŒ–è®¡ç®—æ¦‚è¿°ï¼›é—ä¼ ç®—æ³•ï¼ˆæ¯”å¦‚ï¼Œæ¨¡å¼ã€ç¼–ç ã€é€‚åº”åº¦ç­‰æ–¹é¢çš„å†…å®¹ï¼‰åŠåº”ç”¨æ¡ˆä¾‹çš„å­¦ä¹ ä¸æ¢è®¨ï¼›é—ä¼ è§„åˆ’åŠåº”ç”¨æ¡ˆä¾‹çš„å­¦ä¹ ä¸æ¢è®¨ï¼›åº”ç”¨é—ä¼ ç®—æ³•æ¥è§£å†³TSPé—®é¢˜çš„å…³é”®é—®é¢˜ç ”ç©¶ã€‚
2ã€æ€è€ƒä¸è®¨è®ºé—®é¢˜ç¼–ç é—®é¢˜ï¼šåœ¨å“ªå¹´ç”±è°æå‡ºäº†æ€æ ·çš„ç¼–ç æ–¹æ¡ˆï¼Ÿæ€§èƒ½å¦‚ä½•ï¼Ÿä¸»è¦ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿä¸»è¦ç”¨æ¥è§£å†³å“ªäº›ç±»é—®é¢˜ç­‰ã€‚å¯¹æœ‰è®°å¿†çš„é—ä¼ ç®—æ³•çš„æ·±å…¥ç ”ç©¶ã€‚å‚æ•°è®¾ç½®é—®é¢˜ï¼šå„ç§æ“ä½œçš„å‚æ•°é€‰æ‹©æ–¹æ³•ç­‰ã€‚
3ã€ä½œä¸šÂ :ä½œä¸š1ï¼šåˆ©ç”¨é—ä¼ ç®—æ³•æ¥å®ç°æ±‚è§£TSPé—®é¢˜ï¼ˆæˆ–ç±»ä¼¼é—®é¢˜ï¼‰çš„è½¯ä»¶ç³»ç»Ÿã€‚å…·ä½“è¦æ±‚è§é™„å½•V.
4ã€é˜…è¯»æ–‡çŒ®å‚è€ƒæ–‡çŒ®1ä¸­çš„ç¬¬4ç« å‚è€ƒæ–‡çŒ®2ä¸­çš„ç¬¬6ç« å‚è€ƒæ–‡çŒ®3ä¸­çš„ç¬¬4ç« å‚è€ƒæ–‡çŒ®4ã€5
ä¸“é¢˜äº”ï¼šç¾¤æ™ºèƒ½è®¡ç®—ï¼ˆ10å­¦æ—¶ 2017-4-12 ~2017-5-10ï¼‰1ã€æ ¸å¿ƒå†…å®¹ç¾¤æ™ºèƒ½è®¡ç®—æ¦‚è¿°ï¼›èšç¾¤ç®—æ³•åŠåº”ç”¨å®ä¾‹çš„å­¦ä¹ ä¸æ¢è®¨ï¼›ç²’å­ç¾¤ç®—æ³•åŠåº”ç”¨å®ä¾‹çš„å­¦ä¹ ä¸æ¢è®¨ï¼›åº”ç”¨èšç¾¤ç®—æ³•ã€ç²’å­ç¾¤ç®—æ³•æ¥è§£å†³TSPé—®é¢˜çš„å…³é”®é—®é¢˜ç ”ç©¶ï¼›é—ä¼ ç®—æ³•ã€èšç¾¤ç®—æ³•ã€ç²’ç¾¤ç®—æ³•åœ¨è§£å†³ä¼˜åŒ–é—®é¢˜æ–¹é¢çš„æ¯”è¾ƒç ”ç©¶ã€‚
2ã€æ€è€ƒä¸è®¨è®ºé—®é¢˜èšç¾¤ç®—æ³•çš„æ”¹è¿›æ–¹æ³•æ¯”è¾ƒä¸å‘å±•è¶‹åŠ¿åˆ†æã€‚èšç¾¤ç®—æ³•ã€ç²’å­ç¾¤ç®—æ³•çš„å®ç°æŠ€å·§æ¢³ç†é—ä¼ ç®—æ³•ã€èšç¾¤ç®—æ³•å’Œç²’å­ç¾¤ç®—æ³•çš„ç»¼åˆåº”ç”¨
3ã€ä½œä¸šä½œä¸š2ï¼šåˆ©ç”¨èšç¾¤ç®—æ³•æ¥å®ç°æ±‚è§£TSPé—®é¢˜ï¼ˆæˆ–ç±»ä¼¼é—®é¢˜ï¼‰çš„è½¯ä»¶ç³»ç»Ÿã€‚å…·ä½“è¦æ±‚è§é™„å½•V.ä½œä¸š3ï¼šåˆ©ç”¨ç²’å­ç¾¤ç®—æ³•æ¥å®ç°æ±‚è§£TSPé—®é¢˜ï¼ˆæˆ–ç±»ä¼¼é—®é¢˜ï¼‰çš„è½¯ä»¶ç³»ç»Ÿã€‚å…·ä½“è¦æ±‚è§é™„å½•V.
4ã€é˜…è¯»æ–‡çŒ®å‚è€ƒæ–‡çŒ®1ä¸­çš„ç¬¬4ç« å‚è€ƒæ–‡çŒ®2ä¸­çš„ç¬¬9ç« å‚è€ƒæ–‡çŒ®3ä¸­çš„ç¬¬5ã€6ç« å‚è€ƒæ–‡çŒ®4ã€5
ä¸“é¢˜å…­ï¼šç¥ç»è®¡ç®—ï¼ˆ 10å­¦æ—¶ 2017-5-17 ~2017-6-14ï¼‰1ã€æ ¸å¿ƒå†…å®¹äººå·¥ç¥ç»ç½‘ç»œæ¦‚è¿°ï¼›å…¸å‹BPå‰å‘ç½‘ç»œåŠåº”ç”¨å®ä¾‹çš„å­¦ä¹ ä¸æ¢è®¨ï¼›å…¸å‹Hopfieldåé¦ˆç½‘ç»œåŠåº”ç”¨å®ä¾‹çš„å­¦ä¹ ä¸æ¢è®¨ï¼›åº”ç”¨äººå·¥ç¥ç»ç½‘ç»œæŠ€æœ¯æ¥è§£å†³TSPé—®é¢˜çš„å…³é”®é—®é¢˜ç ”ç©¶ï¼›æ¨¡ç³Šç¥ç»ç½‘ç»œçš„å­¦ä¹ ä¸æ¢è®¨ï¼›åœ¨è§£å†³ç»„åˆä¼˜åŒ–é—®é¢˜æ–¹é¢æœ¬è¯¾ä¸­æ¶‰åŠåˆ°çš„å„ç±»ä¼˜åŒ–ç®—æ³•çš„æ¯”è¾ƒç ”ç©¶ã€‚
2ã€æ€è€ƒä¸è®¨è®ºé—®é¢˜äººå·¥ç¥ç»ç½‘ç»œä¸­çš„å­¦ä¹ æ–¹æ³•çš„æ¯”è¾ƒä¸é€‰æ‹©ã€‚å¦‚ä½•ç†è§£å’Œåº”ç”¨æ¨¡ç³Šé€»è¾‘æ¨ç†æŠ€æœ¯ï¼Ÿå„ç§ä¼˜åŒ–ç®—æ³•çš„ç»¼åˆåº”ç”¨ã€‚ä»€ä¹ˆæ˜¯æ·±åº¦å­¦ä¹ ï¼Ÿå®ƒå¯¹æˆ‘ä»¬çš„ç”Ÿæ´»æœ‰ä»€ä¹ˆå½±å“ï¼Ÿä½ æ˜¯å¦‚ä½•çœ‹å¾…äººå·¥æ™ºèƒ½å‘å±•çš„æœªæ¥çš„ï¼Ÿ
3ã€ä½œä¸šä½œä¸š4ï¼šåˆ©ç”¨äººå·¥ç¥ç»ç½‘ç»œæŠ€æœ¯ï¼ˆæ¯”å¦‚ï¼ŒHopfieldï¼‰æ¥å®ç°æ±‚è§£TSPé—®é¢˜ï¼ˆæˆ–ç±»ä¼¼é—®é¢˜ï¼‰çš„è½¯ä»¶ç³»ç»Ÿã€‚å…·ä½“è¦æ±‚è§é™„å½•V.
4ã€é˜…è¯»æ–‡çŒ®å‚è€ƒæ–‡çŒ®2ä¸­çš„ç¬¬4ã€5ç« å‚è€ƒæ–‡çŒ®3ä¸­çš„ç¬¬2ã€3ç« å‚è€ƒæ–‡çŒ®4ã€5
ä¸“é¢˜ä¸ƒï¼šç§‘æŠ€è®ºæ–‡ä¹¦å†™ï¼ˆ 4å­¦æ—¶ 2017-6-21 ~2017-6-28ï¼‰
1ã€æ ¸å¿ƒå†…å®¹ç§‘æŠ€è®ºæ–‡ä¹¦å†™çš„ä¸€èˆ¬æ ¼å¼ï¼›ç§‘æŠ€è®ºæ–‡å†™ä½œçš„æ–¹æ³•ï¼›ç§‘æŠ€è®ºæ–‡å†™ä½œåº”æ³¨æ„çš„é—®é¢˜ï¼›è®ºæ–‡å®ä¾‹çš„é˜…è¯»ã€åˆ†æä¸æ¢è®¨ï¼›è‡ªå·±åŠ¨æ‰‹ä¹¦å†™è®ºæ–‡ï¼Œå¯¹è®ºæ–‡è´¨é‡è¿›è¡Œè¯„ä»·ï¼Œé€‰æ‹©åˆé€‚çš„æœŸåˆŠæ‚å¿—å’Œä¼šè®®ç­‰å‡ºç‰ˆå•ä½è¿›è¡ŒæŠ•ç¨¿ã€‚
2ã€æ€è€ƒä¸è®¨è®ºé—®é¢˜ç»“åˆè¿™é—¨è¯¾çš„å…·ä½“å†…å®¹ï¼Œæ¥ç¡®å®šè®ºæ–‡çš„é€‰é¢˜ã€æ¡†æ¶ã€çªå‡ºçš„ä¸»é¢˜ã€é’ˆå¯¹ä¸»é¢˜çš„è®¨è®ºã€ç»“è®ºç­‰ã€‚å±•ç¤ºè‡ªå·±çš„æˆæœï¼Œå’Œè€å¸ˆã€åŒå­¦ä¸€èµ·è®¨è®ºä¿®æ”¹æ–¹æ¡ˆï¼Œç›´è‡³å½¢æˆè®ºæ–‡ç»ˆç¨¿ã€‚ 
3ã€é˜…è¯»æ–‡çŒ®å‚è€ƒæ–‡çŒ®5
æ•™å­¦æ–¹å¼æœ¬è¯¾ç¨‹ä¸»è¦é‡‡ç”¨è®²æˆæ³•ã€ç ”è®¨æ³•ã€ä»»åŠ¡æ³•ã€æ–‡çŒ®æ³•ç­‰æ•™å­¦æ–¹å¼ã€‚åŸºæœ¬ç†è®ºã€æ–¹æ³•å’Œç®—æ³•ä»¥åŠå…·ä½“ä»»åŠ¡çš„å¸ƒç½®ç­‰å†…å®¹é‡‡ç”¨è®²æˆæ³•ã€‚å­¦ç”Ÿåœ¨è‡ªä¸»å­¦ä¹ /åˆä½œå­¦ä¹ ï¼ˆç»„å»ºå°ç»„ã€å°ç»„åˆ†å·¥ã€åä½œè®¨è®ºã€ç¡®å®šæ–¹æ¡ˆã€æˆæœå‘ˆç°ï¼‰è¿‡ç¨‹ä¸­ç»å†äº†æœé›†èµ„æ–™ã€åˆ¶å®šå’Œå®ç°æ–¹æ¡ˆã€å±•ç¤ºæˆæœç­‰æ´»åŠ¨ï¼Œä¸»è¦åº”ç”¨äº†æ–‡çŒ®æ³•ã€ä»»åŠ¡æ³•å’Œç ”è®¨æ³•ç­‰ã€‚
å­¦ä¹ èµ„æº1ã€çŸ¥è¯†å·¥ç¨‹ä¸çŸ¥è¯†ç®¡ç†ï¼Œé™ˆæ–‡ä¼Ÿï¼Œé™ˆæ™Ÿï¼Œæ¸…åå¤§å­¦å‡ºç‰ˆç¤¾,2010ã€‚2ã€äººå·¥æ™ºèƒ½æŠ€æœ¯ï¼Œ æ›¹æ‰¿å¿—ï¼Œæ¸…åå¤§å­¦å‡ºç‰ˆç¤¾ï¼Œ2010ã€‚3ã€è®¡ç®—æ™ºèƒ½ï¼Œå¼ å†›ï¼Œè©¹å¿—è¾‰ï¼Œæ¸…åå¤§å­¦å‡ºç‰ˆç¤¾ï¼Œ2009.4ã€è‡ªé€‰Matlab æ•™æ.5ã€é«˜è´¨é‡çš„å­¦ä½è®ºæ–‡åŠæ ¸å¿ƒæœŸåˆŠçš„ç›¸å…³æ–‡ç« ã€‚æ–‡çŒ®æ£€ç´¢ä¾‹å­è§é™„å½•Iã€‚
å­¦ä¹ å»ºè®®1ã€ä¸ºäº†æ·±å…¥åœ°ç†è§£å’Œåº”ç”¨å„ç±»å¯å‘å¼ä¼˜åŒ–ç®—æ³•ï¼Œéœ€è¦å­¦ç”Ÿå…·å¤‡ä¸€å®šçš„æ•°å­¦åŸºç¡€å’Œä¼šåº”ç”¨Matlabç¼–ç¨‹ç¯å¢ƒã€‚2ã€æœ¬è¯¾ç¨‹æ˜¯å®è·µæ€§å¾ˆå¼ºçš„è¯¾ç¨‹ï¼Œå­¦ç”Ÿä¸€å®šè¦åŠ¨æ‰‹å¼€å‘å…·ä½“çš„åº”ç”¨ç³»ç»Ÿï¼Œè¿™å°±è¦æ±‚åŒå­¦ä»¬è¦å…·å¤‡ç›¸å…³çš„ç³»ç»Ÿå¼€å‘åŸºç¡€ã€‚3ã€è¦è·Ÿä¸Šè€å¸ˆçš„æ•™å­¦è¿›åº¦ï¼ŒåŠæ—¶é˜…è¯»è€å¸ˆæä¾›çš„å‚è€ƒèµ„æ–™ï¼Œä½œä¸šæŒ‰æ—¶å®Œæˆï¼Œå¦è€…ä¼šå½±å“åç»­è¯¾ç¨‹çš„å­¦ä¹ ã€‚ 
åˆ†ç»„æ³¨: æ¯ç»„ç¬¬ä¸€äººä¸ºç»„é•¿ã€‚ç¬¬ä¸€ç»„3æœˆ22æ—¥è®²æˆé—ä¼ ç®—æ³•åŠåº”ç”¨æ¡ˆä¾‹ä»‹ç»ï¼›ç¬¬äºŒç»„3æœˆ29æ—¥å¼€å§‹è®²æˆé—ä¼ è§„åˆ’åŠåº”ç”¨æ¡ˆä¾‹ä»‹ç»ï¼›ç¬¬ä¸‰ç»„4æœˆ19æ—¥å¼€å§‹è®²æˆèšç¾¤ç®—æ³•åŠåº”ç”¨å®ä¾‹ä»‹ç»ã€‚
è€ƒæ ¸æ–¹å¼1ã€æ€»åˆ†100åˆ†ã€‚2ã€æ¯äº”ä¸ªäººä¸€ç»„ï¼Œå®Œæˆä¸¤ä¸ªä½œä¸šï¼ˆå…·ä½“è§åˆ†ç»„è¡¨ï¼‰ï¼Œæ¯ä¸ªä½œä¸šå æ€»æˆç»©çš„30åˆ†ã€‚æœ¬éƒ¨åˆ†æˆç»©ç”±è€å¸ˆï¼ˆ80%ï¼‰å’Œå­¦ç”Ÿï¼ˆ20%ï¼‰çš„æ‰“åˆ†ç»¼åˆå½¢æˆã€‚è¦æ±‚å’Œè¯„ä»·æ ‡å‡†è§é™„å½•III å’Œé™„å½•IVã€‚ (å°ç»„æˆå‘˜æˆç»©æœ‰åŒºåˆ«)3ã€æ ¹æ®é€‰æ‹©çš„ä½œä¸šå†…å®¹ï¼Œæ¯äººå†™ä¸€ç¯‡3000å­—å·¦å³çš„å°è®ºæ–‡ï¼Œå æ€»æˆç»©çš„20åˆ†ã€‚è¦æ±‚è‡³å°‘15ç¯‡é«˜è´¨é‡çš„å‚è€ƒæ–‡çŒ®ã€‚4ã€è¯¾å ‚è¡¨ç°ï¼ˆå‡ºå‹¤ã€æ¼”è®²ã€å‚ä¸åº¦ç­‰ï¼‰å æ€»æˆç»©çš„20åˆ†ã€‚æœ¬éƒ¨åˆ†æˆç»©ç”±è€å¸ˆï¼ˆ80%ï¼‰å’Œå­¦ç”Ÿï¼ˆ20%ï¼‰çš„æ‰“åˆ†ç»¼åˆå½¢æˆã€‚è¦æ±‚å’Œè¯„ä»·æ ‡å‡†è§é™„å½•III å’Œé™„å½•IVã€‚5ã€ä½œä¸šå¿…é¡»æŒ‰æ—¶å®Œæˆï¼Œè¶…æœŸé™è€…ä¸èƒ½å¾—åˆ†ã€‚
é™„å½•é™„å½•Iï¼šæ–‡çŒ®æ£€ç´¢ä¾‹å­è¡¨ä¸€ ç›¸å…³æ–‡çŒ®çš„æ£€ç´¢æƒ…å†µ         
æœé›†åˆ°çš„è®ºæ–‡ç¯‡æ•°å¦‚è¡¨ä¸€æ‰€ç¤ºã€‚å»é™¤ç›¸å…³åº¦å¤ªä½å’Œå¹´é™å¤ªä¹…çš„æ–‡çŒ®ï¼Œå¯¹å‰©ä½™çš„æ–‡çŒ®è¿›è¡Œåˆ†æã€‚ç›¸å…³æ–‡çŒ®ä¸»è¦æ¶µç›–ä»¥ä¸‹å‡ æ–¹é¢ï¼š1ã€åŸºæœ¬ç†è®ºç ”ç©¶ï¼šæ¶µç›–æ¦‚å¿µã€å®šä¹‰ã€ç‰¹ç‚¹ã€åˆ†ç±»ã€ç†è®ºæ–¹æ³•ã€ç ”ç©¶ç°çŠ¶ã€ç ”ç©¶è¶‹åŠ¿ã€åº”ç”¨ä»·å€¼ç­‰ã€‚2ã€ç›¸å…³æŠ€æœ¯ç ”ç©¶ï¼šåŒ…æ‹¬XæŠ€æœ¯ï¼ŒX XæŠ€æœ¯ï¼Œâ€¦ â€¦3ã€æŠ€æœ¯åº”ç”¨ç ”ç©¶ï¼šåº”ç”¨æ¨¡å¼ï¼Œåº”ç”¨é¢†åŸŸï¼Œâ€¦ â€¦4ã€ç›¸å…³æ ‡å‡†ç ”ç©¶ï¼šAæ ‡å‡†ï¼Œ Bæ ‡å‡†ï¼Œâ€¦ â€¦5ã€â€¦ â€¦æœ¬æ–‡å¯¹ä¸æœ¬ç ”ç©¶ç›¸å…³çš„XXæ–¹é¢çš„æ–‡çŒ®è¿›è¡Œäº†è¯¦ç»†é˜…è¯»å’Œåˆ†ææ•´ç†ã€‚å…·ä½“æˆæœå¦‚ä¸‹ã€‚è¯»ä¹¦æŠ¥å‘Šâ€¦ â€¦
é™„å½•IIï¼šé¡¹ç›®æŠ¥å‘Šæ ¼å¼åŠè¦æ±‚ä¸€ã€é¢˜ç›®äºŒã€æŠ¥å‘Šäººä¸‰ã€é¡¹ç›®æ„ä¹‰ã€è¦æ±‚åŠæ¡ä»¶ï¼šä¸ºä»€ä¹ˆè¦åšè¿™ä¸ªé¡¹ç›®ï¼Œæœ‰å“ªäº›å…·ä½“è¦æ±‚ï¼Œæä¾›äº†å“ªäº›æ¡ä»¶å»å®Œæˆè¿™ä¸ªé¡¹ç›®ã€‚å››ã€å…·ä½“å†…å®¹1ã€ç³»ç»Ÿç®€ä»‹ï¼šåŒ…æ‹¬é‡‡ç”¨äº†å“ªäº›ç†è®ºæ–¹æ³•ä¸ç®—æ³•ï¼Œå®ç°äº†å“ªäº›åŠŸèƒ½ï¼Œè§£å†³äº†å“ªäº›å®é™…é—®é¢˜ã€‚2ã€ç³»ç»Ÿè®¾è®¡ï¼šç»™å‡ºæ¡†å›¾ï¼Œå¹¶å¯¹æ¨¡å—åŠæ¨¡å—ä¹‹é—´çš„å…³ç³»ç»™å‡ºè§£é‡Šã€‚3ã€ç³»ç»Ÿå¼€å‘ç¯å¢ƒï¼šç¡¬ç¯å¢ƒåŠè½¯ç¯å¢ƒã€‚4ã€ç³»ç»Ÿä½¿ç”¨è¯´æ˜ã€‚äº”ã€ç³»ç»Ÿæ€§èƒ½åˆ†æå¯¹å¥½çš„æ–¹é¢ï¼Œä»ç†è®ºæ–¹æ³•ä¸Šè¿›è¡Œå½’çº³æ€»ç»“ã€‚å¯¹å­˜åœ¨é—®é¢˜çš„æ–¹é¢ï¼Œæ‰¾å‡ºåŸå› ï¼Œå¹¶ç»™å‡ºæ”¹è¿›æ–¹æ³•åŠå»ºè®®ã€‚å…­ã€å¿ƒå¾—ä½“ä¼š: å¼€å‘ä¸­æ‰€é‡åˆ°çš„å›°éš¾åŠè§£å†³æ–¹æ³•, ä»ä¸­å¾—åˆ°çš„ç»éªŒå’Œæ•™è®­ï¼Œå¯¹ä»¥åå­¦ä¹ ã€ç§‘ç ”ç­‰æ–¹é¢æ‰€å¸¦æ¥çš„å¯ç¤ºã€‚å¯¹è¿™é—¨è¯¾çš„æ„è§åŠå»ºè®®ã€‚
é™„å½•IIIï¼šè¯¾å ‚è®²è§£è¦æ±‚ï¼ˆä»¥é—ä¼ ç®—æ³•ä¸ºä¾‹ï¼‰
1ã€æ¥é¾™å»è„‰ï¼šåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ï¼Œå­˜åœ¨ä»€ä¹ˆé—®é¢˜ï¼Œé—ä¼ ç®—æ³•æ˜¯ä»ä»€ä¹ˆæ ·çš„è§†è§’æ¥è§£å†³é—®é¢˜çš„ï¼Ÿï¼ˆæ•´ä½“ä»‹ç»ï¼Œé€šå¸¸10åˆ†é’Ÿå·¦å³ï¼‰2ã€ä¸»è¦å†…å®¹ï¼šåŸºæœ¬æ¦‚å¿µï¼ˆæœ€å¥½ä¸¾ä¾‹è¯´æ˜ï¼‰ã€é—ä¼ ç®—æ³•æè¿°ã€é—ä¼ ç®—æ³•å®ä¾‹ã€é—ä¼ ç®—æ³•ç‰¹ç‚¹ç­‰ã€‚ï¼ˆç»†èŠ‚ä»‹ç»ï¼Œé€šå¸¸20åˆ†é’Ÿå·¦å³ï¼‰3ã€ä¸»è¦ç ”ç©¶é—®é¢˜ï¼šåˆ©ç”¨æ–‡çŒ®æ³•æ¥æ€»ç»“å„ç§é—®é¢˜çš„ç ”ç©¶ç°çŠ¶ï¼ŒæŠŠä½ é˜…è¯»çš„æ–‡çŒ®ï¼ˆè‡³å°‘3ç¯‡ï¼‰æå‰3å¤©å‘åˆ°äº‘ç›˜ä¸­ã€‚ï¼ˆé‡ç‚¹å†…å®¹ä»‹ç»ï¼Œé€šå¸¸è®²è§£20åˆ†é’Ÿå·¦å³ï¼‰a)ç¼–ç é—®é¢˜ï¼šæ¯”å¦‚ï¼Œåœ¨å“ªå¹´ç”±è°æå‡ºäº†æ€æ ·çš„ç¼–ç æ–¹æ¡ˆï¼Ÿæ€§èƒ½å¦‚ä½•ï¼Ÿä¸»è¦ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿä¸»è¦ç”¨æ¥è§£å†³å“ªäº›ç±»é—®é¢˜ç­‰ã€‚b)å‚æ•°è®¾ç½®é—®é¢˜ï¼šæ¯”å¦‚ï¼Œå„ç§æ“ä½œçš„å‚æ•°é€‰æ‹©æ–¹æ³•ç­‰ã€‚c)å„ç§å¯å‘å¼å®ç°æ–¹æ³•ï¼šæ¯”å¦‚ï¼Œæœ‰è®°å¿†çš„é—ä¼ ç®—æ³•ç­‰ã€‚d)â€¦ â€¦4ã€åº”ç”¨é¢†åŸŸï¼šåˆ©ç”¨æ–‡çŒ®æ³•æ¥æ€»ç»“é—ä¼ ç®—æ³•å„ç§é¢†åŸŸçš„åº”ç”¨ç°çŠ¶ï¼ŒæŠŠä½ é˜…è¯»çš„æ–‡çŒ®ï¼ˆè‡³å°‘3ç¯‡ï¼‰æå‰3å¤©å‘åˆ°äº‘ç›˜ä¸­. ï¼ˆé‡ç‚¹å†…å®¹ä»‹ç»ï¼Œé€šå¸¸è®²è§£20åˆ†é’Ÿå·¦å³ï¼‰ï¼Œæ¯”å¦‚ï¼Œa)åœ¨å“ªäº›é¢†åŸŸçš„å“ªäº›æ–¹é¢åº”ç”¨äº†é—ä¼ ç®—æ³•ï¼Ÿb)ä¸ºä»€ä¹ˆé€‰ç”¨è¿™ä¸ªç®—æ³•ï¼Ÿå…·ä½“å¦‚ä½•å®ç°çš„ï¼Ÿc)æ€§èƒ½å¦‚ä½•ï¼Ÿå­˜åœ¨æ€æ ·çš„é—®é¢˜ï¼Ÿæ”¹è¿›æ–¹å‘å¦‚ä½•ï¼Ÿ
é™„å½•IVï¼šè¯¾å ‚è®²è§£è¯„ä»·1ã€å†…å®¹æ–¹é¢ ï¼ˆ60åˆ†ï¼‰a)å‡†ç¡®b)å…¨é¢2ã€PPTåˆ¶ä½œï¼ˆ20åˆ†ï¼‰a)å¿…é¡»è‡ªå·±åˆ¶ä½œPPTè®²ç¨¿ï¼Œå¯ä»¥åº”ç”¨å·²æœ‰æ¨¡æ¿ï¼›b)å†…å®¹è¡”æ¥å¾—å½“ï¼Œæ¸…æ™°ã€æœ‰é€»è¾‘æ€§ï¼›c)å›¾ç‰‡/å›¾è¡¨æ¸…æ¥šï¼Œæ˜¾ç¤ºæ€§å¼ºï¼Œå¼•äººå…¥èƒœï¼Œå½“ç„¶ä¹Ÿä¸è¦è¿‡äºèŠ±å“¨ï¼Œå–§å®¾å¤ºä¸»ï¼›d)æ–‡å­—è¦çªå‡ºé‡ç‚¹ï¼Œä¸è¦æ•´é¡µçš„æ–‡å­—ã€‚3ã€è®²è§£æ°´å¹³ï¼ˆ20åˆ†ï¼‰a)å£°éŸ³æ´ªäº®ã€åå­—æ¸…æ™°ï¼›b)é€‰ç”¨åˆé€‚çš„ä¸²æ¥è¯ï¼Œè®²å‡ºé€»è¾‘æ€§ï¼Œä¸è¦ç…§ç€æ–‡å­—å¿µï¼›c)æ³¨æ„æ—¶é—´åˆ†é…ï¼Œçªå‡ºé‡ç‚¹ï¼›d)ç»™å‡ºä¸€äº›å¯å‘å¼çš„è¯é¢˜ï¼Œé€‚å½“åœ°äº’åŠ¨ï¼Œé›†ä¸­å¤§å®¶çš„æ³¨æ„åŠ›ã€‚
é™„å½•Vï¼šä½œä¸šåˆ©ç”¨å¯å‘å¼ç®—æ³•ï¼ˆé—ä¼ ç®—æ³•ã€èšç¾¤ç®—æ³•ã€ç²’ç¾¤ç®—æ³•ã€äººå·¥ç¥ç»ç½‘ç»œç­‰ï¼‰æ¥å®ç°æ±‚è§£TSPé—®é¢˜ï¼ˆæˆ–ç±»ä¼¼é—®é¢˜ï¼‰çš„è½¯ä»¶ç³»ç»Ÿã€‚è¦æ±‚ï¼š1ã€å®ç°ä¸€ä¸ªåº”ç”¨ç³»ç»Ÿï¼Œè¦æ±‚æœ‰GUIç•Œé¢ï¼Œå¯ä»¥å¯¹ä¸€äº›å…³é”®å› å­è¿›è¡Œè°ƒæ•´ã€‚åŒæ—¶ï¼Œç³»ç»Ÿä¸ä»…æ˜¾ç¤ºæœ€ç»ˆç»“æœï¼Œè¿˜è¦è®°å½•å’Œæ˜¾ç¤ºä¸­é—´ç»“æœï¼Œç»™å‡ºè·å¾—æ­¤ç»“æœçš„æ¨ç†è¿‡ç¨‹ã€‚2ã€åœ¨è¯¾å ‚ä¸Šç”±ä¸€åå°ç»„æˆå‘˜æ¼”ç¤ºå¹¶è®²è§£æ‰€å®ç°çš„ç³»ç»Ÿã€‚ç”±å…¨ä½“æˆå‘˜æ¥å›ç­”å…¶ä»–åŒå­¦å’Œè€å¸ˆçš„æé—®ã€‚ç„¶åç”±è€å¸ˆå’ŒåŒå­¦ä¸ºå°ç»„ä¸­çš„æˆå‘˜æ‰“åˆ†ï¼Œè®²è§£è¦æ±‚å’Œè¯„åˆ†æ ‡å‡†è§é™„å½•IIIå’Œé™„å½•IVã€‚3ã€æäº¤é¡¹ç›®æŠ¥å‘Šï¼ˆè§é™„å½•IIï¼‰ï¼Œæºç¨‹åºã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>algorithm</category>
      </categories>
      <tags>
        <tag>çŸ¥è¯†å·¥ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7æ­å»ºAtlassian Jira</title>
    <url>/dev-centos-atlassian-jira/</url>
    <content><![CDATA[å‰è¨€Jiraæ˜¯Atlassianå…¬å¸å‡ºå“çš„é¡¹ç›®ä¸äº‹åŠ¡è·Ÿè¸ªå·¥å…·ï¼Œè¢«å¹¿æ³›åº”ç”¨äºç¼ºé™·è·Ÿè¸ªï¼ˆbugç®¡ç†ï¼‰ã€å®¢æˆ·æœåŠ¡ã€éœ€æ±‚æ”¶é›†ã€æµç¨‹å®¡æ‰¹ã€ä»»åŠ¡è·Ÿè¸ªã€é¡¹ç›®è·Ÿè¸ªå’Œæ•æ·ç®¡ç†ç­‰å·¥ä½œé¢†åŸŸã€‚
å†™å®Œäº†ã€Šè‡ªåŠ¨éƒ¨ç½²å·¥å…·Jenkinsã€‹å’Œã€ŠCentOS7æ­å»ºConfluence Wikiã€‹ï¼Œæ„Ÿè§‰æœ‰äº›ç¼ºæ†¾ï¼Œå†³å®šæŠŠJiraçš„æ­å»ºæ–¹æ³•ä¹Ÿè®°å½•ä¸€ä¸‹ã€‚


å‡†å¤‡ä¸‹è½½è½¯ä»¶åŒ…å¼€å§‹æ­å»ºJiraå‰ï¼Œéœ€è¦ä¸‹è½½ä¸€äº›è½¯ä»¶åŒ…ã€‚

atlassian-jira-software-7.2.2-x64
JIRA Core-7.2.1-language-pack-zh_CN
mysql-connector-java-5.1.39-bin
atlassian-extras-3.1.2

å®‰è£…é…ç½®javayum install javajava -version

å®‰è£…é…ç½®mysql1ã€å®‰è£…mysqlåï¼Œç™»å½•mysqlæ§åˆ¶å°ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š
create database jira default character set utf8;grant all on jira.* to &#x27;jirauser&#x27;@&#x27;%&#x27; identified by &#x27;jirapasswd&#x27; with grant option;grant all on jira.* to &#x27;jirauser&#x27;@localhost identified by &#x27;jirapasswd&#x27; with grant option;flush privileges;

2ã€è¿›å…¥/usr/local/mysqlæ–‡ä»¶å¤¹ï¼Œåœ¨my.cnfä¸­æ·»åŠ ï¼š
binlog_format=mixed

3ã€é‡å¯mysql
service mysqld stopservice mysqld start

å…³é—­é˜²ç«å¢™systemctl stop firewalld.service


è¯¦ç»†æ­¥éª¤å®‰è£…jira1ã€ä½¿ç”¨xftpï¼Œä¸Šä¼ atlassian-jira-software-7.2.2-x64.binåˆ°/rootæ–‡ä»¶å¤¹ã€‚
2ã€ä¸Šä¼ å®Œæˆåï¼Œæ‰§è¡Œå‘½ä»¤ï¼š
chmod 755 atlassian-jira-software-7.2.2-x64.bin./atlassian-jira-software-7.2.2-x64.bin
jiraé»˜è®¤å®‰è£…åˆ°/opt/atlassian/jiraå’Œ/var/atlassian/application-data/jiraç›®å½•ä¸‹ï¼Œå¹¶ä¸”jiraç›‘å¬çš„ç«¯å£æ˜¯8080ã€‚
3ã€jiraçš„ä¸»è¦é…ç½®æ–‡ä»¶ï¼Œæ˜¯/opt/atlassian/jira/conf/server.xmlã€‚
4ã€æ­¤æ—¶ä¸è¦æµ‹è¯•è®¿é—®ï¼Œåˆ‡è®°ã€‚
ç ´è§£jira1ã€å…³é—­jira
/etc/init.d/jira stop

2ã€æŠŠatlassian-extras-3.1.2.jarå’Œmysql-connector-java-5.1.39-bin.jarä¸¤ä¸ªæ–‡ä»¶ä¸Šä¼ åˆ°/opt/atlassian/jira/atlassian-jira/WEB-INF/lib/é‡Œã€‚å…¶ä¸­atlassian-extras-3.1.2.jaræ˜¯ç”¨æ¥æ›¿æ¢åŸæ¥çš„atlassian-extras-3.1.2.jaræ–‡ä»¶ï¼Œç”¨ä½œç ´è§£jiraç³»ç»Ÿçš„ï¼›mysql-connector-java-5.1.39-bin.jaræ˜¯ç”¨æ¥è¿æ¥mysqlæ•°æ®åº“çš„é©±åŠ¨è½¯ä»¶åŒ…ã€‚
3ã€å¯åŠ¨jira
/etc/init.d/jira start

4ã€æµ‹è¯•è®¿é—®ï¼Œå‡è®¾CentOS7çš„ipåœ°å€ä¸º192.168.56.101ï¼Œé‚£ä¹ˆåœ¨æµè§ˆå™¨è¾“å…¥http://192.168.56.101:8080ï¼Œå³å¯çœ‹åˆ°jiraçš„å®‰è£…é¡µé¢ã€‚
5ã€é€‰æ‹©Iâ€™ll set it up myselfï¼Œç„¶åâ€œNextâ€ï¼Œè¿›å…¥æ•°æ®åº“è®¾ç½®é¡µé¢ã€‚
6ã€é€‰æ‹©MySQLæ•°æ®åº“ï¼Œè¾“å…¥å®‰è£…é…ç½®mysqlä¸­è®¾ç½®çš„è´¦å·å’Œå¯†ç ã€‚ç‚¹å‡»â€œTest Connectionâ€ï¼Œç¡®è®¤æ•°æ®åº“è¿æ¥æ˜¯å¦æˆåŠŸã€‚ 
7ã€ç‚¹å‡»â€œNextâ€ï¼Œå‘æ•°æ®åº“å†™å…¥æ•°æ®ï¼Œè¿™ä¸€æ­¥èŠ±è´¹æ—¶é—´è¾ƒé•¿ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚æ•°æ®åº“çš„é…ç½®æ–‡ä»¶ï¼Œæ˜¯/var/atlassian/application-data/jira/dbconfig.xml
8ã€æŠ¥é”™ã€‚
9ã€å¿½ç•¥ä»¥ä¸Šé”™è¯¯ï¼Œé‡å¯jiraæœåŠ¡ã€‚
/etc/init.d/jira start/etc/init.d/jira stop

10ã€å†æ¬¡è®¿é—®http://192.168.56.101:8080ï¼Œè¿›å…¥jiraé…ç½®é¡µé¢ã€‚
è¯•ç”¨jira1ã€é€‰æ‹©Privateæ¨¡å¼ï¼Œåœ¨è¿™ä¸ªæ¨¡å¼ä¸‹ï¼Œç”¨æˆ·éœ€è¦ç”±ç®¡ç†å‘˜åˆ›å»ºã€‚è€Œåœ¨Publicæ¨¡å¼ä¸‹ï¼Œç”¨æˆ·å¯ä»¥è‡ªå·±è¿›è¡Œæ³¨å†Œã€‚
2ã€ç‚¹å‡»generate a JIRA trial licenseï¼Œç™»å½•atlassianï¼Œè·å–è¯•ç”¨licenseã€‚
3ã€è·å–licenseååœ¨è¿™ä¸ªé¡µé¢æŸ¥çœ‹ã€‚
4ã€æ‹·è´licenseï¼Œç²˜è´´åˆ°jiraé…ç½®é¡µé¢ï¼Œâ€œNextâ€ã€‚
5ã€å†æ¬¡æŠ¥é”™ï¼Œä¸è¿‡ä¸è¦æ”¾å¼ƒã€‚
6ã€é‡å¯ï¼Œå†æ¬¡æ‹·è´licenseï¼Œç²˜è´´åˆ°jiraé…ç½®é¡µé¢ï¼Œâ€œNextâ€ã€‚
é…ç½®ç®¡ç†å‘˜1ã€ä¸Šä¸€æ­¥åï¼ŒæˆåŠŸè¿›å…¥ç®¡ç†å‘˜é…ç½®é¡µã€‚
2ã€é…ç½®ç®¡ç†å‘˜åï¼Œä¸‹ä¸€æ­¥è¿›å…¥é‚®ä»¶è®¾ç½®é¡µé¢ã€‚
3ã€ç‚¹å‡»â€œFinishâ€ï¼Œè¿›å…¥æ¬¢è¿é¡µé¢ã€‚
4ã€åˆ›å»ºæ–°é¡¹ç›®ï¼Œé€‰æ‹©Scrum software developmentï¼Œâ€œNextâ€ã€‚
5ã€ç¨ç­‰ç‰‡åˆ»ï¼Œä¾¿ä¼šè·³è½¬åˆ°ç®¡ç†é¡µé¢ã€‚
æŸ¥çœ‹ç ´è§£ç‚¹å‡»å³ä¸Šè§’é½¿è½®å½¢çŠ¶çš„ç®¡ç†å›¾æ ‡ï¼Œé€‰æ‹©â€œApplicationsâ€ï¼ŒæŸ¥çœ‹ç ´è§£ä¿¡æ¯ã€‚å¯ä»¥çœ‹åˆ°ï¼Œåˆ°æœŸæ—¥æœŸæ˜¯2033å¹´2æœˆ8æ—¥ï¼Œç ´è§£æˆåŠŸã€‚
æ±‰åŒ–1ã€ç‚¹å‡»å³ä¸Šè§’é½¿è½®å½¢çŠ¶çš„ç®¡ç†å›¾æ ‡ï¼Œé€‰æ‹©â€œAdd-onsâ€ï¼Œå†é€‰æ‹©â€œManage add-onsâ€ã€‚
2ã€ç‚¹å‡»â€œUpload add-onâ€ï¼Œé€‰æ‹©ä¸Šä¼ JIRA Core-7.2.1-language-pack-zh_CN.jarã€‚
3ã€ä¾æ¬¡ç‚¹å‡»â€œSystemâ€ï¼Œâ€œEdit Settingsâ€ã€‚
4ã€æ‰¾åˆ°Internationalizationï¼Œä¿®æ”¹Indexing languageå’ŒDefault languageä¸ºä¸­æ–‡ï¼Œä¿®æ”¹Default user time zoneä¸ºäºšæ´²ä¸Šæµ·ã€‚ç„¶åç‚¹å‡»é¡µé¢åº•éƒ¨çš„â€œUpdateâ€æŒ‰é’®ã€‚
åè®°è‡³æ­¤ï¼Œjiraç ´è§£å’Œæ±‰åŒ–å®Œæˆã€‚è™½ç„¶ä¸­é€”æœ‰äº›æ³¢æŠ˜ï¼Œä½†æ€»å½’æ˜¯å®‰è£…æˆåŠŸäº†ï¼Œå¼å¼ï¼
ä¹¦ç­¾çƒ‚æ³¥ï¼šjira7.2å®‰è£…ã€ä¸­æ–‡åŠç ´è§£http://blog.chinaunix.net/uid-21710354-id-5756990.html
jiraä¸‹è½½é¡µhttps://www.atlassian.com/software/jira/download
jiraè¯­è¨€åŒ…ä¸‹è½½é¡µhttps://translations.atlassian.com/dashboard/download?lang=zh_CN#/JIRA Core/7.2.1
JIRAæ•°æ®åº“åˆ‡æ¢ï¼ˆHSQL Databaseåˆ°MySQLï¼‰http://www.tuicool.com/articles/7feMjqy
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>centos</tag>
        <tag>jira</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7æ­å»ºConfluence Wiki</title>
    <url>/dev-centos-confluence-wiki/</url>
    <content><![CDATA[å‰è¨€åœ¨è‰¾ä½³ç”Ÿæ´»å®ä¹ æ—¶ï¼Œæœ‰ä¸‰æ¬¾å›¢é˜Ÿåä½œç³»ç»Ÿç‰¹åˆ«å–œæ¬¢ï¼šWikiã€Jiraå’ŒJenkinsã€‚å¯¹äºJenkinsçš„æ­å»ºï¼Œä¹‹å‰ã€Šè‡ªåŠ¨éƒ¨ç½²å·¥å…·Jenkinsã€‹æœ‰è¿‡è®°å½•ã€‚è¿™æ¬¡ï¼Œæ­å»ºä¸€ä¸ªWikiï¼Œä½œä¸ºçŸ¥è¯†ç®¡ç†çš„å·¥å…·ï¼Œå®ç°å›¢é˜Ÿæˆå‘˜ä¹‹é—´çš„åä½œå’ŒçŸ¥è¯†å…±äº«ã€‚


å‡†å¤‡ä¸‹è½½è½¯ä»¶åŒ…å¼€å§‹æ­å»ºWikiå‰ï¼Œéœ€è¦ä¸‹è½½ä¸€äº›è½¯ä»¶åŒ…ã€‚

atlassian-confluence-5.6.6-x64
Confluence-5.6.6-language-pack-zh_CN
mysql-connector
confluence_keygen

å®‰è£…é…ç½®javayum install javajava -version

å®‰è£…é…ç½®mysql1ã€å®‰è£…mysqlåï¼Œç™»å½•mysqlæ§åˆ¶å°ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š
create database confluence default character set utf8;grant all on confluence.* to &#x27;confluenceuser&#x27;@&#x27;%&#x27; identified by &#x27;confluencepasswd&#x27; with grant option;grant all on confluence.* to &#x27;confluenceuser&#x27;@localhost identified by &#x27;confluencepasswd&#x27; with grant option;flush privileges;

2ã€è¿›å…¥/usr/local/mysqlæ–‡ä»¶å¤¹ï¼Œåœ¨my.cnfä¸­æ·»åŠ ï¼š
binlog_format=mixed

3ã€é‡å¯mysql
service mysqld stopservice mysqld start

å…³é—­é˜²ç«å¢™systemctl stop firewalld.service


è¯¦ç»†æ­¥éª¤å®‰è£…confluence1ã€ä½¿ç”¨xftpï¼Œä¸Šä¼ atlassian-confluence-5.6.6-x64.binåˆ°/rootæ–‡ä»¶å¤¹ã€‚
2ã€ä¸Šä¼ å®Œæˆåï¼Œæ‰§è¡Œå‘½ä»¤ï¼š
chmod 755 atlassian-confluence-5.6.6-x64.bin./atlassian-confluence-5.6.6-x64.bin
confluenceé»˜è®¤å®‰è£…åˆ°/opt/atlassian/confluenceå’Œ/var/atlassian/application-data/confluenceç›®å½•ä¸‹ï¼Œå¹¶ä¸”confluenceç›‘å¬çš„ç«¯å£æ˜¯8090ã€‚
3ã€confluenceçš„ä¸»è¦é…ç½®æ–‡ä»¶ï¼Œå­˜æ”¾åœ¨/opt/atlassian/confluence/conf/server.xmlæ–‡ä»¶ä¸­ã€‚
4ã€æµ‹è¯•è®¿é—®ï¼Œå‡è®¾CentOS7çš„ipåœ°å€ä¸º192.168.56.101ï¼Œé‚£ä¹ˆåœ¨æµè§ˆå™¨è¾“å…¥http://192.168.56.101:8090ï¼Œå³å¯çœ‹åˆ°Confluenceçš„æ¬¢è¿ç•Œé¢ã€‚
ç ´è§£confluence1ã€ç‚¹å‡»â€œStart setupâ€ï¼Œçœ‹åˆ°å¦‚ä¸‹ç•Œé¢ã€‚
2ã€å¤åˆ¶Server IDå¹¶ä¿å­˜ï¼Œç„¶åå…³é—­confluenceã€‚
/etc/init.d/confluence stop

3ã€ä»/opt/atlassian/confluence/confluence/WEB-INF/libä¸­ï¼Œæ‹·è´atlassian-extras-decoder-v2-3.2.jaråˆ°windowsï¼Œå¹¶é‡å‘½åä¸ºatlassian-extras-2.4.jarã€‚
4ã€åœ¨windowsä¸‹ï¼Œç”ŸæˆLicense Keyã€‚
java -jar confluence_keygen.jar
æŠŠç¬¬äºŒæ­¥ä¸­å¤åˆ¶çš„Server IDç²˜è´´è¿›å»ï¼Œç„¶åç‚¹å‡»â€œ.gen!â€ï¼Œä¿å­˜ç”Ÿæˆçš„keyã€‚
5ã€æ‰“è¡¥ä¸ã€‚ç‚¹å‡»â€œ.patch!â€ï¼Œé€‰æ‹©ç¬¬3æ­¥ä¸­é‡å‘½åçš„atlassian-extras-2.4.jarï¼Œä¼šç”Ÿæˆæ–°çš„atlassian-extras-2.4.jarã€‚
6ã€ä¸Šä¼ æ–°çš„atlassian-extras-2.4.jarã€Confluence-5.6.6-language-pack-zh_CN.jarã€mysql-connector-java-5.1.39-bin.jaråˆ°/opt/atlassian/confluence/confluence/WEB-INF/libï¼Œå¹¶ä¸”åˆ é™¤atlassian-extras-decoder-v2-3.2.jarã€‚
5ã€å¯åŠ¨confluence
/etc/init.d/confluence start

7ã€æŠŠç”Ÿæˆçš„keyå¤åˆ¶ç²˜è´´åˆ°License Keyæ¡†ä¸­ï¼Œç‚¹å‡»â€œNextâ€ï¼Œå¦‚æœé¡ºåˆ©è¿›å…¥é€‰æ‹©æ•°æ®åº“é¡µé¢ï¼Œè¯´æ˜ç ´è§£æˆåŠŸã€‚
é…ç½®æ•°æ®åº“1ã€æ•°æ®åº“é€‰æ‹©MySQLï¼Œç„¶åç‚¹å‡»â€œExternal Databaseâ€ï¼Œè¿›å…¥æ•°æ®åº“é…ç½®é¡µé¢ã€‚
2ã€ç‚¹å‡»â€œDirect JDBCâ€ï¼ŒUser Nameå’ŒPasswordå¡«å†™å®‰è£…é…ç½®mysqlä¸­è®¾ç½®çš„ç”¨æˆ·åå’Œå¯†ç ã€‚
3ã€ç‚¹å‡»â€œNextâ€ï¼Œè¿™ä¸€æ­¥èŠ±è´¹æ—¶é—´è¾ƒé•¿ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚æ•°æ®å†™å…¥æˆåŠŸï¼Œè¿›å…¥å¦‚ä¸‹é¡µé¢ã€‚
4ã€ç¬¬3æ­¥å¦‚æœæŠ¥é”™ï¼Œè¯·æ£€æŸ¥mysqlæ•°æ®åº“é…ç½®ï¼Œç„¶åå¸è½½åé‡æ–°å®‰è£…ï¼Œå¸è½½å‘½ä»¤å¦‚ä¸‹ã€‚
/etc/init.d/confluence stopcd /opt/atlassian/confluence/./uninstall
æˆ–è€…ï¼š
/etc/init.d/confluence stoprm -rf /opt/atlassian/rm -rf /var/atlassian/

é…ç½®ç®¡ç†å‘˜åˆå§‹åŒ–ä¸€ä¸ªæ ·ä¾‹ç«™ç‚¹ï¼Œæ ¹æ®æç¤ºè¿›è¡Œé…ç½®ã€‚
ä¹¦ç­¾wikiç³»ç»Ÿconfluence5.6.6å®‰è£…ã€ä¸­æ–‡ã€ç ´è§£åŠè¿ç§»http://www.ilanni.com/?p=11989
confluence wikiæ­å»ºä½¿ç”¨http://www.cnblogs.com/guigujun/p/6137673.html
confluenceä¸‹è½½é¡µhttps://www.atlassian.com/software/confluence/download-archives
confluenceè¯­è¨€åŒ…ä¸‹è½½é¡µhttps://translations.atlassian.com/dashboard/download?lang=zh_CN#/Confluence/6.1.0
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>centos</tag>
        <tag>wiki</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoä¸­ä½¿ç”¨Mathjaxçš„å†²çªé—®é¢˜</title>
    <url>/dev-hexo-mathjax/</url>
    <content><![CDATA[é—®é¢˜æè¿°å†™ã€Šä¿¡æ¯é‡&amp;ä¿¡æ¯ç†µ&amp;ä¿¡æ¯å¢ç›Šã€‹æ—¶ï¼Œç”¨åˆ°äº†ä¸€äº›æ•°å­¦å…¬å¼ã€‚ä½†æ˜¯ï¼Œåœ¨ä½¿ç”¨hexoç”Ÿæˆé¡µé¢åï¼Œè¿™äº›æ•°å­¦å…¬å¼å¹¶æ²¡æœ‰è¢«æ­£ç¡®æ˜¾ç¤ºã€‚æŸ¥æ‰¾èµ„æ–™å‘ç°markdwonæœ¬èº«çš„ç‰¹æ®Šç¬¦å·ä¸latexä¸­çš„ç¬¦å·ä¼šå‡ºç°å†²çª:
1ã€åœ¨markdownä¸­ï¼Œ_æ˜¯æ–œä½“ï¼Œä½†æ˜¯åœ¨latexä¸­ï¼Œå´æœ‰ä¸‹æ ‡çš„æ„æ€ã€‚2ã€åœ¨markdownä¸­ï¼Œ\\ä¼šè¢«è½¬ä¹‰ä¸º\,è¿™æ ·ä¹Ÿä¼šå½±å“å½±å“mathjaxå¯¹å…¬å¼ä¸­çš„\\è¿›è¡Œæ¸²æŸ“ã€‚
è§£å†³åŠæ³•æœ‰ä¸‰ç§ï¼Œæ‰‹åŠ¨æ·»åŠ è½¬ä¹‰ã€æ›´æ¢hexoçš„markdownæ¸²æŸ“å¼•æ“å’Œä¿®æ”¹hexoçš„æ¸²æŸ“ä»£ç ã€‚éƒåŒå­¦æ›´å–œæ¬¢ç¬¬ä¸‰ç§ï¼Œç»è¿‡å°è¯•ï¼Œå®Œç¾è§£å†³é—®é¢˜ï¼Œæœ¬æ–‡è®°å½•ä¸‹è§£å†³é—®é¢˜çš„è¿‡ç¨‹ã€‚


è§£å†³é—®é¢˜ç¡®è®¤å¼€å¯mathjaxä»¥éƒåŒå­¦ä½¿ç”¨çš„yiliaä¸»é¢˜ä¸ºä¾‹ï¼Œä¸»é¢˜æœ¬èº«å·²ç»é›†æˆäº†mathjaxï¼Œå…¶ä»–ä¸»é¢˜å¯ä»¥å‚è€ƒæ·»åŠ ã€‚
åœ¨yilia\layout\_partial\after_footer.ejs é‡Œæœ‰å¦‚ä¸‹ä»£ç ï¼š
&lt;% if (theme.mathjax)&#123; %&gt;&lt;%- partial(&#x27;mathjax&#x27;) %&gt;&lt;% &#125; %&gt;
å½“_config.ymlæ–‡ä»¶ä¸­çš„mathjaxå‚æ•°ä¸ºtrueæ—¶ï¼Œé¡µé¢ä¸­ä¾¿ä¼šå¼•å…¥mathjax.ejsã€‚
åœ¨yilia\layout\_partial\mathjax.ejsé‡Œæœ‰å¦‚ä¸‹ä»£ç ï¼š
&lt;! -- mathjax config similar to math.stackexchange --&gt;&lt;script type=&quot;text/x-mathjax-config&quot;&gt;MathJax.Hub.Config(&#123;    tex2jax: &#123;        inlineMath: [ [&#x27;$&#x27;,&#x27;$&#x27;], [&quot;\\(&quot;,&quot;\\)&quot;]  ],        processEscapes: true,        skipTags: [&#x27;script&#x27;, &#x27;noscript&#x27;, &#x27;style&#x27;, &#x27;textarea&#x27;, &#x27;pre&#x27;, &#x27;code&#x27;]    &#125;&#125;);MathJax.Hub.Queue(function() &#123;    var all = MathJax.Hub.getAllJax(), i;    for(i=0; i &lt; all.length; i += 1) &#123;        all[i].SourceElement().parentNode.className += &#x27; has-jax&#x27;;                     &#125;       &#125;);&lt;/script&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot;&gt;&lt;/script&gt;
å¼•å…¥äº†mathjaxï¼Œä»¥åŠé…ç½®mathjaxã€‚
å…¶å®æ›´å¥½çš„åšæ³•ï¼Œæ˜¯æŠŠafter_footer.ejsä¸­çš„ä»£ç ä¿®æ”¹ä¸ºï¼š
&lt;% if (page.mathjax)&#123; %&gt;&lt;%- partial(&#x27;mathjax&#x27;) %&gt;&lt;% &#125; %&gt;
è¿™æ ·ï¼Œæ˜¯å¦åœ¨é¡µé¢ä¸­å¼•å…¥mathjaxï¼Œå°±äº¤ç”±äº†é¡µé¢æ§åˆ¶ï¼Œæ›´åŠ çµæ´»ã€‚å†™æ–‡æ¡£æ—¶ï¼Œåœ¨å¤´éƒ¨åŠ å…¥mathjax: trueï¼Œæˆ–è€…mathjax: falseã€‚
---title: Hexeä¸­ä½¿ç”¨Mathjaxçš„å†²çªé—®é¢˜toc: truemathjax: falsedate: 2017-03-14 16:00:00updated: 2017-03-14 16:00:00tags:- hexo- mathjaxcategories: ç‚¹æ»´å‘ç°---


ä¿®æ”¹æ¸²æŸ“ä»£ç æ‰¾åˆ°hexo\node_modules\hexo-renderer-marked\node_modules\marked\lib\markd.jsï¼Œå¤‡ä»½åè¿›è¡Œä¿®æ”¹ï¼š
1ã€å»æ‰\çš„è½¬ä¹‰
escape: /^\\([\\`*&#123;&#125;\[\]()# +\-.!_&gt;])/,
ä¿®æ”¹ä¸º
escape: /^\\([`*&#123;&#125;\[\]()# +\-.!_&gt;])/,

2ã€å»æ‰_çš„æ–œä½“å«ä¹‰
em: /^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,
ä¿®æ”¹ä¸º
em:/^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,


ä¹¦ç­¾MathJaxhttps://www.mathjax.org/
æœŸåˆŠæ–‡ç«  - TeXIDE, åœ¨çº¿ LaTeX ç¼–è¾‘å™¨https://www.texide.com/templates/journals/?
JaxEdit Websitehttp://jaxedit.com/
Cmd Markdown ç¼–è¾‘é˜…è¯»å™¨ - ä½œä¸šéƒ¨è½å‡ºå“https://www.zybuluo.com/mdeditor
åœ¨ Hexo ä¸­å®Œç¾ä½¿ç”¨ Mathjax è¾“å‡ºæ•°å­¦å…¬å¼http://lukang.me/2014/mathjax-for-hexo.html
Hexoä¸‹mathjaxçš„è½¬ä¹‰é—®é¢˜https://segmentfault.com/a/1190000007261752
]]></content>
      <categories>
        <category>engineering</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>mathjax</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¿¡æ¯é‡&amp;ä¿¡æ¯ç†µ&amp;ä¿¡æ¯å¢ç›Š</title>
    <url>/dev-entropy/</url>
    <content><![CDATA[ä¿¡æ¯é‡ç¡®å®šæ€§æ˜¯æŒ‡äº‹å…ˆå¯ä»¥å‡†ç¡®çŸ¥é“æŸä¸ªäº‹ä»¶æˆ–æŸç§å†³ç­–çš„ç»“æœã€‚æˆ–è€…è¯´ï¼Œå¦‚æœäº‹ä»¶æˆ–å†³ç­–çš„å¯èƒ½ç»“æœåªæœ‰ä¸€ç§ï¼Œå°±ä¼šäº§ç”Ÿç¡®å®šæ€§ã€‚
ä¿¡æ¯è®ºåˆ›å§‹äººé¦™å†œå¯¹ä¿¡æ¯çš„å®šä¹‰ï¼šä¿¡æ¯æ˜¯ç¡®å®šæ€§çš„å¢åŠ ã€‚

ä¿¡æ¯é‡æ˜¯ä¿¡æ¯å¤šå°‘çš„åº¦é‡ï¼Œä¹Ÿå°±æ˜¯ç¡®å®šæ€§å¢åŠ çš„å¤šå°‘çš„åº¦é‡ï¼Œå•ä½æ˜¯æ¯”ç‰¹ã€‚

å¦‚ä½•è®¡ç®—ä¿¡æ¯é‡çš„å¤šå°‘ï¼Ÿåœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œæå°‘å‘ç”Ÿçš„äº‹ä»¶ä¸€æ—¦å‘ç”Ÿæ˜¯å®¹æ˜“å¼•èµ·äººä»¬å…³æ³¨çš„ï¼Œè€Œå¸ç©ºè§æƒ¯çš„äº‹ä¸ä¼šå¼•èµ·æ³¨æ„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæå°‘è§çš„äº‹ä»¶æ‰€å¸¦æ¥çš„ä¿¡æ¯é‡å¤šã€‚å¦‚æœç”¨ç»Ÿè®¡å­¦çš„æœ¯è¯­æ¥æè¿°ï¼Œå°±æ˜¯å‡ºç°æ¦‚ç‡å°çš„äº‹ä»¶ä¿¡æ¯é‡å¤šã€‚å› æ­¤ï¼Œäº‹ä»¶å‡ºç°å¾—æ¦‚ç‡è¶Šå°ï¼Œä¿¡æ¯é‡æ„ˆå¤§ã€‚å³ä¿¡æ¯é‡çš„å¤šå°‘æ˜¯ä¸äº‹ä»¶å‘ç”Ÿé¢‘ç¹ï¼ˆå³æ¦‚ç‡å¤§å°ï¼‰æˆåæ¯”ã€‚


å¦‚å·²çŸ¥äº‹ä»¶$x_i$å·²å‘ç”Ÿï¼Œåˆ™è¡¨ç¤º$x_i$æ‰€å«æœ‰æˆ–æ‰€æä¾›çš„ä¿¡æ¯é‡$$I(x_i) = -\log 2^{p(x_i)}$$
ä¾‹é¢˜ï¼šè‹¥ä¼°è®¡åœ¨ä¸€æ¬¡å›½é™…è±¡æ£‹æ¯”èµ›ä¸­è°¢å†›è·å¾—å† å†›çš„å¯èƒ½æ€§ä¸º0.1ï¼ˆè®°ä¸ºäº‹ä»¶Aï¼‰ï¼Œè€Œåœ¨å¦ä¸€æ¬¡å›½é™…è±¡æ£‹æ¯”èµ›ä¸­å¥¹å¾—åˆ°å† å†›çš„å¯èƒ½æ€§ä¸º0.9ï¼ˆè®°ä¸ºäº‹ä»¶Bï¼‰ã€‚è¯•åˆ†åˆ«è®¡ç®—å½“ä½ å¾—çŸ¥å¥¹è·å¾—å† å†›æ—¶ï¼Œä»è¿™ä¸¤ä¸ªäº‹ä»¶ä¸­è·å¾—çš„ä¿¡æ¯é‡å„ä¸ºå¤šå°‘ï¼Ÿ$$I(A) = -\log 2^{p(0.1)} â‰ˆ 3.32ï¼ˆæ¯”ç‰¹ï¼‰$$
$$I(B) = -\log 2^{p(0.9)} â‰ˆ 0.152ï¼ˆæ¯”ç‰¹ï¼‰$$
ä¿¡æ¯ç†µä¸ç¡®å®šæ€§æ˜¯æŒ‡äº‹å…ˆä¸èƒ½å‡†ç¡®çŸ¥é“æŸä¸ªäº‹ä»¶æˆ–æŸç§å†³ç­–çš„ç»“æœã€‚æˆ–è€…è¯´ï¼Œåªè¦äº‹ä»¶æˆ–å†³ç­–çš„å¯èƒ½ç»“æœä¸æ­¢ä¸€ç§ï¼Œå°±ä¼šäº§ç”Ÿä¸ç¡®å®šæ€§ã€‚

ä¿¡æ¯ç†µå°±æ˜¯ç”¨ä»¥æ¶ˆé™¤äº‹ä»¶çš„ä¸ç¡®å®šæ€§æ‰€éœ€è¦çš„ä¿¡æ¯é‡ï¼Œå•ä½æ˜¯æ¯”ç‰¹ã€‚

æ ¹æ®éƒåŒå­¦çš„ç†è§£ï¼Œç»™å‡ºä¸¤ä¸ªå¯¹æ¯”æè¿°ï¼š1ã€è¿™ä¸ªæ¯å­çš„å®¹é‡æ˜¯2Lï¼Œå®¹é‡æ˜¯æŒ‡ç‰©ä½“æˆ–è€…ç©ºé—´æ‰€èƒ½å¤Ÿå®¹çº³çš„å•ä½ç‰©ä½“çš„æ•°é‡ã€‚2ã€è¿™ä¸ªäº‹ä»¶çš„ä¿¡æ¯ç†µæ˜¯3bitï¼Œä¿¡æ¯ç†µæ˜¯æŒ‡æ¶ˆé™¤äº‹ä»¶çš„ä¸ç¡®å®šæ€§æ‰€éœ€è¦çš„å•ä½ä¿¡æ¯çš„æ•°é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå°±åƒå®¹é‡æ˜¯ç”¨æ¥æè¿°ç©ºé—´å¤§å°çš„åº¦é‡ä¸€æ ·ï¼Œä¿¡æ¯ç†µå°±æ˜¯ç”¨æ¥æè¿°ä¸ç¡®å®šæ€§å¤§å°çš„åº¦é‡ã€‚
é€šå¸¸æˆ‘ä»¬ä½¿ç”¨H(X)è¡¨ç¤ºéšæœºå˜é‡ï¼ˆäº‹ä»¶ï¼‰çš„ç†µï¼š$$H(X) = E(I(X))$$å…¶ä¸­çš„ E ä»£è¡¨æœŸæœ›å€¼å‡½æ•¸ï¼Œ I(X) ä»£è¡¨ä¿¡æ¯é‡æ‰€å½¢æˆçš„éšæœºå˜é‡ï¼ˆå˜é‡Xçš„å‡½æ•°ç»“æœè¡¨ç¤ºI(X)ä¹Ÿæ˜¯å˜é‡ï¼‰ã€‚
$$H(X) = E(I(X)) = \sum_{i=1}^n {p(x_i),I(x_i)} = -\sum_{i=1}^n {p(x_i) \log 2^{p(x_i)}}$$
å…¶ä¸­$x_i$è¡¨ç¤ºç¬¬iä¸ªçŠ¶æ€ï¼ˆæ€»å…±æœ‰nç§çŠ¶æ€ï¼‰ï¼Œ$p(x_i)$è¡¨ç¤ºç¬¬iä¸ªçŠ¶æ€å‡ºç°çš„æ¦‚ç‡ã€‚

æ¡ä»¶ç†µå°±æ˜¯åœ¨äº‹ä»¶Xç¡®å®šçš„æ¡ä»¶ä¸‹ï¼Œç”¨ä»¥æ¶ˆé™¤äº‹ä»¶Yçš„ä¸ç¡®å®šæ€§æ‰€éœ€è¦çš„ä¿¡æ¯é‡ã€‚

ä»¥ä¸‹æ¨å¯¼ï¼Œlogå‡½æ•°é»˜è®¤ä»¥2ä¸ºåº•æ•°ã€‚
\begin{eqnarray}H(Y|X) &amp;=&amp; \sum_{x\in\mathcal X},p(x),H(Y|X=x)\&amp;=&amp; -\sum_{x\in\mathcal X}p(x)\sum_{y\in\mathcal Y},p(y|x),\log,p(y|x)\&amp;=&amp; -\sum_{x\in\mathcal X}\sum_{y\in\mathcal Y},p(y,x),\log,p(y|x)\&amp;=&amp; -\sum_{x\in\mathcal X, y\in\mathcal Y}p(x,y)\log,p(y|x).\end{eqnarray}
æ¡ä»¶ç†µ H(Y|X) ç›¸å½“äºè”åˆç†µ H(Y,X) å‡å»å•ç‹¬çš„ç†µ H(X)ï¼Œå…¶æ•°å­¦å¼å¦‚ä¸‹ã€‚
\begin{align}H(Y|X) = H(Y,X)-H(X)\end{align}

è”åˆç†µå°±æ˜¯ç”¨ä»¥æ¶ˆé™¤å¤šä¸ªåŒæ—¶å‘ç”Ÿçš„äº‹ä»¶çš„ä¸ç¡®å®šæ€§æ‰€éœ€è¦çš„ä¿¡æ¯é‡ã€‚

ä»¥ä¸‹è¯æ˜è”åˆç†µå’Œæ¡ä»¶ç†µçš„å…³ç³»ã€‚\begin{eqnarray}H(X,Y)&amp;=&amp; -\sum_{x\in\mathcal X, y\in\mathcal Y}p(x,y)log,p(x,y)\&amp;=&amp; -\sum_{x\in\mathcal X, y\in\mathcal Y}p(x,y)log\left(p(y|x)p(x)\right)\&amp;=&amp; -\sum_{x\in\mathcal X, y\in\mathcal Y}p(x,y)log,p(y|x) - \sum_{x\in\mathcal X, y\in\mathcal Y} p(x,y) log,p(x)\&amp;=&amp; H(Y|X)-\sum_{x\in\mathcal X, y\in\mathcal Y}p(x,y)log,p(x)\&amp;=&amp; H(Y|X)-\sum_{x\in\mathcal X}\sum_{y\in\mathcal Y}p(x,y)log,p(x)\ &amp;=&amp; H(Y|X)-\sum_{x\in\mathcal X}log,p(x)\sum_{y\in\mathcal Y}p(x,y)\ &amp;=&amp; H(Y|X)-\sum_{x\in\mathcal X}(log,p(x))p(x)\&amp;=&amp; H(Y|X)-\sum_{x\in\mathcal X}p(x)log,p(x)\&amp;=&amp; H(Y|X)+H(X)\ &amp;=&amp; H(X)+H(Y|X)\\end{eqnarray}
ä¿¡æ¯å¢ç›Šç‰¹å¾é€‰æ‹©æ˜¯æŒ‡ä»å…¨éƒ¨ç‰¹å¾ä¸­é€‰æ‹©ä¸€ä¸ªç‰¹å¾å­é›†ï¼Œä½¿æ„é€ å‡ºæ¥çš„æ¨¡å‹æ›´å¥½ã€‚
åœ¨æœºå™¨å­¦ä¹ çš„å®é™…åº”ç”¨ä¸­ï¼Œç‰¹å¾æ•°é‡å¾€å¾€è¾ƒå¤šï¼Œå…¶ä¸­å¯èƒ½å­˜åœ¨ä¸ç›¸å…³çš„ç‰¹å¾ï¼Œç‰¹å¾ä¹‹é—´ä¹Ÿå¯èƒ½å­˜åœ¨ç›¸äº’ä¾èµ–ï¼Œå®¹æ˜“å¯¼è‡´è®­ç»ƒæ—¶é—´è¿‡é•¿ã€ç»´åº¦ç¾éš¾ç­‰ã€‚ç‰¹å¾é€‰æ‹©èƒ½å‰”é™¤ä¸ç›¸å…³æˆ–å†—ä½™çš„ç‰¹å¾ï¼Œä»è€Œè¾¾åˆ°å‡å°‘ç‰¹å¾ä¸ªæ•°ï¼Œæé«˜æ¨¡å‹ç²¾ç¡®åº¦ï¼Œå‡å°‘è¿è¡Œæ—¶é—´çš„ç›®çš„ã€‚å¦ä¸€æ–¹é¢ï¼Œé€‰å–å‡ºçœŸæ­£ç›¸å…³çš„ç‰¹å¾ï¼Œç®€åŒ–äº†æ¨¡å‹ã€‚
åœ¨è®­ç»ƒæ ·æœ¬é›†ä¸Šï¼Œè¿è¡ŒC4.5æˆ–å…¶ä»–å†³ç­–æ ‘ç”Ÿæˆç®—æ³•ï¼Œå¾…å†³ç­–æ ‘å……åˆ†ç”Ÿé•¿åï¼Œå†åœ¨æ ‘ä¸Šè¿è¡Œå‰ªæç®—æ³•ï¼Œåˆ™æœ€ç»ˆå†³ç­–æ ‘å„åˆ†æ”¯å¤„çš„ç‰¹å¾å°±æ˜¯é€‰å‡ºæ¥çš„ç‰¹å¾å­é›†ã€‚å†³ç­–æ ‘æ–¹æ³•ä¸€èˆ¬ä½¿ç”¨ä¿¡æ¯å¢ç›Šä½œä¸ºè¯„ä»·å‡½æ•°ã€‚
åœ¨ä¿¡æ¯å¢ç›Šä¸­ï¼Œè¡¡é‡æ ‡å‡†æ˜¯çœ‹ç‰¹å¾èƒ½å¤Ÿä¸ºåˆ†ç±»ç³»ç»Ÿå¸¦æ¥å¤šå°‘ä¿¡æ¯ï¼Œå¸¦æ¥çš„ä¿¡æ¯è¶Šå¤šï¼Œè¯¥ç‰¹å¾å°±è¶Šé‡è¦ã€‚å¯¹ä¸€ä¸ªç‰¹å¾è€Œè¨€ï¼Œç³»ç»Ÿæœ‰å®ƒå’Œæ²¡å®ƒæ—¶ä¿¡æ¯é‡å°†å‘ç”Ÿå˜åŒ–ï¼Œè€Œå‰åä¿¡æ¯é‡çš„å·®å€¼å°±æ˜¯è¿™ä¸ªç‰¹å¾ç»™ç³»ç»Ÿå¸¦æ¥çš„ä¿¡æ¯é‡ã€‚

ä¿¡æ¯å¢ç›Šå®šä¹‰ä¸ºçˆ¶é¡¹ç†µå‡å»åˆ†å‰²çˆ¶é¡¹åç”Ÿæˆçš„å­é¡¹çš„ç†µçš„åŠ æƒå¹³å‡ã€‚

ç‰¹å¾Tç»™èšç±»Cæˆ–åˆ†ç±»Cå¸¦æ¥çš„ä¿¡æ¯å¢ç›Šä¸ºï¼š$$IG(T) = H(C) - H(C|T)$$
ä¹¦ç­¾ä¿¡æ¯é‡http://baike.baidu.com/item/%E4%BF%A1%E6%81%AF%E9%87%8F
ä¿¡æ¯ç†µhttp://baike.baidu.com/item/%E4%BF%A1%E6%81%AF%E7%86%B5
ä¿¡æ¯å¢ç›Šhttp://baike.baidu.com/item/%E4%BF%A1%E6%81%AF%E5%A2%9E%E7%9B%8A
äº’è³‡è¨Šèˆ‡æ¢ä»¶ç†µhttp://ccckmit.wikidot.com/st:mutualinformation
c4.5ä¸ºä»€ä¹ˆä½¿ç”¨ä¿¡æ¯å¢ç›Šæ¯”æ¥é€‰æ‹©ç‰¹å¾ï¼Ÿhttps://www.zhihu.com/question/22928442/answer/117189907
ä¿¡æ¯å¢ç›Šåˆ°åº•æ€ä¹ˆç†è§£å‘¢ï¼Ÿhttps://www.zhihu.com/question/22104055/answer/67014456
ä¼˜è¾¾å­¦åŸ-æœºå™¨å­¦ä¹ å…¥é—¨-ç†µå’Œä¿¡æ¯å¢ç›Š
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>PHPæ¥æ”¶ajaxçš„jsonæ•°ç»„</title>
    <url>/dev-php-ajax-json-array/</url>
    <content><![CDATA[å‰è¨€å‰ç«¯å’ŒPHPç«¯ï¼ˆæœåŠ¡å™¨ï¼‰é€šè¿‡ajaxè¿›è¡Œæ•°æ®äº¤äº’æ—¶ï¼Œæ•°æ®æ ¼å¼ä¸€èˆ¬ä¸ºå­—ç¬¦ä¸²ã€æ•°ç»„ã€jsonã€jsonæ•°ç»„ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬é’ˆå¯¹è¿™å››ç§æ•°æ®æ ¼å¼ï¼Œè¿›è¡Œå‰ç«¯å’ŒPHPç«¯æ¨¡æ‹Ÿäº¤äº’ï¼Œå¯»æ‰¾ä¸€äº›è§„å¾‹å’Œç»“è®ºã€‚


å‰ç«¯var data = &#123;    product_name: &#x27;æ¯›å·¾&#x27;,    product_arr: [&#x27;æ¯›å·¾&#x27;,&#x27;è‚¥çš‚&#x27;],    product_json: &#123;        product_name: &#x27;æ¯›å·¾&#x27;,        product_num: &#x27;5&#x27;,        product_unit: &#x27;æ¡&#x27;    &#125;,    product_json_arr: [&#123;        product_name: &#x27;æ¯›å·¾&#x27;,        product_num: &#x27;5&#x27;,        product_unit: &#x27;æ¡&#x27;    &#125;,&#123;        product_name: &#x27;è‚¥çš‚&#x27;,        product_num: &#x27;10&#x27;,        product_unit: &#x27;å—&#x27;    &#125;]&#125;console.log(data);$.ajax(&#123;    url: &#x27;/&#x27;,    type: &#x27;POST&#x27;,    dataType: &#x27;json&#x27;,    data: data,    success: function(data)&#123;        console.log(data);    &#125;,    error: function(xhr)&#123;        console.log(xhr);    &#125;&#125;);

PHPç«¯æ¥æ”¶å­—ç¬¦ä¸²$product_name = $_POST[&#x27;product_name&#x27;];echo json_encode($product_name,JSON_UNESCAPED_UNICODE);
ç”±ç»“æœçœ‹å‡ºï¼ŒPHPç«¯è·å–åˆ°äº†product_nameã€‚
æ¥æ”¶æ•°ç»„$product_arr = $_POST[&#x27;product_arr&#x27;];echo json_encode($product_arr,JSON_UNESCAPED_UNICODE);
ç”±ç»“æœçœ‹å‡ºï¼ŒPHPç«¯è·å–åˆ°äº†product_arrã€‚
$product_arr = $_POST[&#x27;product_arr&#x27;];echo json_encode($product_arr[0],JSON_UNESCAPED_UNICODE);
ç”±ç»“æœçœ‹å‡ºï¼ŒPHPç«¯æ‹¿åˆ°çš„ç¡®å®æ˜¯æ•°ç»„ã€‚
æ¥æ”¶json$product_json = $_POST[&#x27;product_json&#x27;];echo json_encode($product_json,JSON_UNESCAPED_UNICODE);
ç”±ç»“æœçœ‹å‡ºï¼ŒPHPè·å–åˆ°äº†product_jsonã€‚
$product_json = $_POST[&#x27;product_json&#x27;];echo json_encode($product_json-&gt;product_name,JSON_UNESCAPED_UNICODE);
æ ¹æ®è¿”å›ç»“æœï¼ŒçŒœæµ‹PHPç«¯æ‹¿åˆ°çš„jsonæ•°æ®æ˜¯å­—ç¬¦ä¸²ã€‚
$product_json = json_decode($_POST[&#x27;product_json&#x27;]);echo json_encode($product_json-&gt;product_name,JSON_UNESCAPED_UNICODE);
æ ¹æ®è¿”å›ç»“æœï¼Œè¯æ˜PHPç«¯æ‹¿åˆ°çš„jsonæ•°æ®ä¸æ˜¯å­—ç¬¦ä¸²ã€‚å› ä¸ºjsonå­—ç¬¦ä¸²é€šè¿‡json_decodeå‡½æ•°æ˜¯å¯ä»¥è½¬æ¢æˆjsonæ ¼å¼æ•°æ®çš„ï¼Œè€Œæ­¤å¤„çš„jsonæ•°æ®è½¬æ¢å¤±è´¥ã€‚
åç«¯å·²ç»æ²¡æœ‰åŠæ³•å†å˜åŒ–ï¼Œæˆ‘ä»¬è°ƒæ•´å‰ç«¯æ•°æ®æ ¼å¼ï¼ŒæŠŠjsonæ•°æ®å…ˆè½¬åŒ–æˆå­—ç¬¦ä¸²å†ä¼ è¾“ã€‚
var data = &#123;    product_json: JSON.stringify(&#123;        product_name: &#x27;æ¯›å·¾&#x27;,        product_num: &#x27;5&#x27;,        product_unit: &#x27;æ¡&#x27;    &#125;)&#125;
æ ¹æ®è¿”å›ç»“æœï¼Œè¯æ˜å‰ç«¯jsonæ•°æ®å¿…é¡»å…ˆè½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œç„¶åPHPç«¯å¯ä»¥è·å–jsonå­—ç¬¦ä¸²ï¼Œæ¥ç€æ­£å¸¸å¤„ç†å³å¯ã€‚
jsonæ•°ç»„$product_json_arr = $_POST[&#x27;product_json_arr&#x27;];  echo json_encode($product_json_arr,JSON_UNESCAPED_UNICODE);
ç”±ç»“æœçœ‹å‡ºï¼ŒPHPç«¯æ‹¿åˆ°äº†product_json_arrã€‚
$product_json_arr = $_POST[&#x27;product_json_arr&#x27;];  echo json_encode($product_json_arr[0],JSON_UNESCAPED_UNICODE);
ç”±ç»“æœçœ‹å‡ºï¼ŒPHPç«¯æ‹¿åˆ°çš„ç¡®å®æ˜¯æ•°ç»„ã€‚
$product_json_arr = $_POST[&#x27;product_json_arr&#x27;]; echo json_encode($product_json_arr[0]-&gt;product_name,JSON_UNESCAPED_UNICODE);
ç”±ç»“æœçœ‹å‡ºï¼ŒPHPç«¯æ‹¿åˆ°çš„æ˜¯æ•°ç»„ï¼Œä½†æ˜¯æ•°ç»„é‡Œçš„å¹¶ä¸æ˜¯jsonæ•°æ®ã€‚
$product_json_arr = json_decode($_POST[&#x27;product_json_arr&#x27;],true);echo json_encode($product_json_arr[0]-&gt;product_name,JSON_UNESCAPED_UNICODE);
ç”±ç»“æœçœ‹å‡ºï¼Œæ•°ç»„é‡Œçš„jsonæ•°æ®ä¸æ˜¯å­—ç¬¦ä¸²ï¼ŒçŒœæµ‹è¿™é‡Œä¹Ÿéœ€è¦å‰ç«¯å…ˆè½¬jsonå­—ç¬¦ä¸²ã€‚
è°ƒæ•´å‰ç«¯æ•°æ®æ ¼å¼ï¼ŒæŠŠjsonæ•°ç»„æ•°æ®å…ˆè½¬åŒ–æˆå­—ç¬¦ä¸²å†ä¼ è¾“ã€‚
var data = &#123;    product_json_arr: JSON.stringify([&#123;        product_name: &#x27;æ¯›å·¾&#x27;,        product_num: &#x27;5&#x27;,        product_unit: &#x27;æ¡&#x27;    &#125;,&#123;        product_name: &#x27;è‚¥çš‚&#x27;,        product_num: &#x27;10&#x27;,        product_unit: &#x27;å—&#x27;    &#125;])&#125;

ç”±ç»“æœçœ‹å‡ºï¼Œä¾ç„¶ä¸è¡Œã€‚
å†æ¬¡ä¿®æ”¹åç«¯ä»£ç ï¼š
$product_json_arr = json_decode($_POST[&#x27;product_json_arr&#x27;]);echo json_encode($product_json_arr[0]-&gt;product_name,JSON_UNESCAPED_UNICODE);
è¾“å‡ºæˆåŠŸï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé—®é¢˜å‡ºåœ¨json_decodeä¸Šé¢ã€‚json_decode($str, true) å¯ä»¥å¾—åˆ°æ•°ç»„ï¼Œç¬¬äºŒå‚æ•°ä¸åŠ é»˜è®¤ä¸ºfalseï¼Œå¾—åˆ°å¯¹è±¡ã€‚è€Œjsonæ•°ç»„å‡ºç°æ—¶ï¼Œè¦é€‰æ‹©ç”Ÿæˆå¯¹è±¡ã€‚
å°ç»“é€šè¿‡ä¸Šé¢çš„å®éªŒï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼šæ¶‰åŠåˆ°jsonæ ¼å¼çš„æ•°æ®ï¼Œéœ€è¦åœ¨å‰ç«¯å…ˆä½¿ç”¨JSON.stringify()å‡½æ•°è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼›ç„¶åï¼Œåœ¨PHPç«¯é€šè¿‡json_decode()å‡½æ•°è½¬æ¢ä¸ºå¯¹è±¡ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>ajax</tag>
      </tags>
  </entry>
  <entry>
    <title>æœ€ç»ˆé¡¹ç›®</title>
    <url>/dev-ml-final-project/</url>
    <content><![CDATA[é¡¹ç›®ç®€ä»‹åœ¨æ­¤é¡¹ç›®ä¸­ï¼Œä½ å°†æ‰®æ¼”ä¾¦æ¢ï¼Œè¿ç”¨ä½ çš„æœºå™¨å­¦ä¹ æŠ€èƒ½æ„å»ºä¸€ä¸ªç®—æ³•ï¼Œé€šè¿‡å…¬å¼€çš„å®‰ç„¶è´¢åŠ¡å’Œé‚®ä»¶æ•°æ®é›†ï¼Œæ‰¾å‡ºæœ‰æ¬ºè¯ˆå«Œç–‘çš„å®‰ç„¶é›‡å‘˜ã€‚


ä¸ºä½•è¦è¿›è¡Œæ­¤é¡¹ç›®ï¼Ÿæ­¤é¡¹ç›®å°†é€šè¿‡æœºå™¨å­¦ä¹ çš„è§†è§’æ•™æˆä½ æ•°æ®è°ƒæŸ¥çš„ç«¯åˆ°ç«¯æµç¨‹ã€‚
å®ƒå°†æ•™æˆä½ å¦‚ä½•æå–å¹¶è¯†åˆ«æœ€èƒ½ä»£è¡¨ä½ çš„æ•°æ®çš„æœ‰ç”¨ç‰¹å¾ï¼Œå½“ä»Šæœ€å¸¸ç”¨çš„æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œä»¥åŠå¦‚ä½•è¯„ä¼°æœºå™¨å­¦ä¹ ç®—æ³•çš„æ€§èƒ½ã€‚
æˆ‘å°†å­¦åˆ°ä»€ä¹ˆï¼Ÿé¡¹ç›®ç»“æŸæ—¶ï¼Œä½ å°†èƒ½ï¼š

å¤„ç†ç°å®å½“ä¸­ä¸å®Œç¾çš„æ•°æ®é›†
ä½¿ç”¨æµ‹è¯•æ•°æ®éªŒè¯æœºå™¨å­¦ä¹ çš„ç»“æœ
ä½¿ç”¨å®šé‡æŒ‡æ ‡è¯„ä¼°æœºå™¨å­¦ä¹ çš„ç»“æœ
åˆ›å»ºã€é€‰æ‹©å’Œè½¬æ¢ç‰¹å¾
æ¯”è¾ƒæœºå™¨å­¦ä¹ ç®—æ³•çš„æ€§èƒ½
ä¸ºè·å¾—æœ€å¤§æ€§èƒ½è°ƒæ•´æœºå™¨å­¦ä¹ ç®—æ³•
æ¸…æ¥šè¡¨è¿°ä½ çš„æœºå™¨å­¦ä¹ ç®—æ³•

ä¸ºä»€ä¹ˆè¿™å¯¹æˆ‘çš„èŒä¸šå‘å±•å¾ˆé‡è¦ï¼Ÿæœºå™¨å­¦ä¹ æ˜¯å¦‚ä»Šæ•°æ®åˆ†æè¡Œä¸šå†…çš„é‡‘ç‰Œæ•²é—¨ç –ï¼Œèƒ½ä½¿ä½ è·å¾—æœ€ä»¤äººå…´å¥‹çš„èŒä¸šæœºä¼šã€‚
éšç€é…å¥—è®¡ç®—èƒ½åŠ›çš„ä¸æ–­å‘å±•ï¼Œæ•°æ®æºæ•°é‡ä¸æ—¥ä¿±å¢ï¼Œå€ŸåŠ©æ•°æ®å¿«é€Ÿè¿›è¡Œæ·±å…¥æ¢ç´¢å¹¶åšå‡ºé¢„æµ‹æ˜¯æœ€ç›´æ¥çš„æ–¹å¼ä¹‹ä¸€ã€‚
æœºå™¨å­¦ä¹ å°†è®¡ç®—æœºç§‘å­¦åŠç»Ÿè®¡å­¦ç»“åˆåœ¨ä¸€èµ·ï¼Œä»è€Œè·å¾—å¼ºå¤§çš„é¢„æµ‹èƒ½åŠ›ã€‚
æˆ‘è¦å¦‚ä½•å®Œæˆæ­¤é¡¹ç›®ï¼Ÿåœ¨å¼€å§‹ä¹‹å‰ï¼Œä½ åº”è¯¥æ³¨æ„ï¼Œæ­¤è¿·ä½ é¡¹ç›®éœ€è¦å¤§é‡æ•°æ®ç‚¹æ‰èƒ½ç»™å‡ºç›´è§‚çš„ç»“æœï¼Œå¹¶ä¸”è‰¯å¥½åœ°è¿è¡Œèµ·æ¥ã€‚ æ­¤é¡¹ç›®æ›´ä¸ºæ£˜æ‰‹çš„åŸå› åœ¨äºï¼Œæˆ‘ä»¬ä½¿ç”¨äº†çœŸå®çš„æ•°æ®ï¼Œè¿™äº›æ•°æ®å¯ä»¥æ˜¯æ‚ä¹±æ— ç« çš„ï¼Œè€Œä¸”åœ¨è¿›è¡Œæœºå™¨å­¦ä¹ æ—¶ä¸å…·æœ‰æˆ‘ä»¬æ‰€å¸Œæœ›çš„å¤§é‡æ•°æ®ç‚¹ã€‚ ä¸è¦å¤±å»ä¿¡å¿ƒâ€”â€”ä½œä¸ºæ•°æ®åˆ†æå¸ˆï¼Œä½ åªéœ€è¦ä¹ æƒ¯ä¸å®Œç¾çš„æ•°æ®ï¼å¦‚æœä½ é‡åˆ°ä¹‹å‰æ²¡æœ‰è§è¿‡çš„äº‹ç‰©ï¼Œè¯·é€€åä¸€æ­¥æƒ³æƒ³èªæ˜çš„è§£å†³ä¹‹é“ã€‚è¦ç›¸ä¿¡è‡ªå·±ï¼
é¡¹ç›®æ¦‚è¿°å®‰ç„¶æ›¾æ˜¯ 2000 å¹´ç¾å›½æœ€å¤§çš„å…¬å¸ä¹‹ä¸€ã€‚2002 å¹´ï¼Œç”±äºå…¶å­˜åœ¨å¤§é‡çš„ä¼ä¸šæ¬ºè¯ˆè¡Œä¸ºï¼Œè¿™ä¸ªæ˜”æ—¥çš„å¤§é›†å›¢åœŸå´©ç“¦è§£ã€‚ åœ¨éšåè”é‚¦è¿›è¡Œçš„è°ƒæŸ¥è¿‡ç¨‹ä¸­ï¼Œå¤§é‡æœ‰ä»£è¡¨æ€§çš„ä¿å¯†ä¿¡æ¯è¿›å…¥äº†å…¬ä¼—çš„è§†çº¿ï¼ŒåŒ…æ‹¬æˆåƒä¸Šä¸‡æ¶‰åŠé«˜ç®¡çš„é‚®ä»¶å’Œè¯¦ç»†çš„è´¢åŠ¡æ•°æ®ã€‚ ä½ å°†åœ¨æ­¤é¡¹ç›®ä¸­æ‰®æ¼”ä¾¦æ¢ï¼Œè¿ç”¨ä½ çš„æ–°æŠ€èƒ½ï¼Œæ ¹æ®å®‰ç„¶ä¸‘é—»ä¸­å…¬å¼€çš„è´¢åŠ¡å’Œé‚®ä»¶æ•°æ®æ¥æ„å»ºç›¸å…³äººå£«è¯†åˆ«ç¬¦ã€‚ ä¸ºäº†ååŠ©ä½ è¿›è¡Œä¾¦æŸ¥å·¥ä½œï¼Œæˆ‘ä»¬å·²å°†æ•°æ®ä¸æ‰‹åŠ¨æ•´ç†å‡ºæ¥çš„æ¬ºè¯ˆæ¡ˆæ¶‰æ¡ˆäººå‘˜åˆ—è¡¨è¿›è¡Œäº†åˆå¹¶ï¼Œ è¿™æ„å‘³ç€è¢«èµ·è¯‰çš„äººå‘˜è¦ä¹ˆè¾¾æˆå’Œè§£ï¼Œè¦ä¹ˆå‘æ”¿åºœç­¾ç½²è®¤ç½ªåè®®ï¼Œå†æˆ–è€…å‡ºåº­ä½œè¯ä»¥è·å¾—å…å—èµ·è¯‰çš„è±å…æƒã€‚
éœ€è¦çš„èµ„æºä½ çš„è®¡ç®—æœºä¸Šåº”æœ‰ python å’Œ sklearnï¼Œä»¥åŠä½ éšâ€œæœºå™¨å­¦ä¹ å…¥é—¨â€è¯¾ç¨‹çš„é¦–ä¸ªè¿·ä½ é¡¹ç›®ä¸€å¹¶ä¸‹è½½çš„åˆå§‹ä»£ç ï¼ˆpython è„šæœ¬å’Œå®‰ç„¶æ•°æ®é›†ï¼‰ã€‚ ä½ å¯ä»¥ä» git ä¸Šè·å–åˆå§‹ä»£ç ï¼š
git clone https://github.com/udacity/ud120-projects.git
ä½ å¯ä»¥åœ¨ä¸‹è½½ä¸‹æ¥ç”¨äºè¿·ä½ é¡¹ç›®çš„ä»£ç åº“ final_project ç›®å½•ä¸­æ‰¾åˆ°åˆå§‹ä»£ç ã€‚ç›¸å…³æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š
poi_id.pyï¼šç”¨äº POI è¯†åˆ«ç¬¦çš„åˆå§‹ä»£ç ï¼Œä½ å°†åœ¨æ­¤å¤„æ’°å†™ä½ çš„åˆ†ææŠ¥å‘Šã€‚ä½ ä¹Ÿå°†æäº¤æ­¤æ–‡ä»¶çš„å‰¯æœ¬ï¼Œç”¨äºè¯„ä¼°äººå‘˜æ£€éªŒä½ çš„ç®—æ³•å’Œç»“æœã€‚
final_project_dataset.pklï¼šé¡¹ç›®æ•°æ®é›†ï¼Œè¯¦æƒ…å¦‚ä¸‹ã€‚
tester.pyï¼šåœ¨ä½ æäº¤ä¾›ä¼˜è¾¾å­¦åŸè¯„ä¼°çš„åˆ†ææŠ¥å‘Šæ—¶ï¼Œä½ å°†éšé™„ç®—æ³•ã€æ•°æ®é›†å’Œä½ ä½¿ç”¨çš„ç‰¹å¾åˆ—è¡¨ï¼ˆè¿™äº›æ˜¯åœ¨ poi_id.py ä¸­è‡ªåŠ¨åˆ›å»ºçš„ï¼‰ã€‚ è¯„ä¼°äººå‘˜å°†åœ¨æ­¤åä½¿ç”¨è¿™ä¸€ä»£ç æ¥æµ‹è¯•ä½ çš„ç»“æœï¼Œä»¥ç¡®ä¿æ€§èƒ½ä¸ä½ åœ¨æŠ¥å‘Šä¸­æ‰€è¿°ç±»ä¼¼ã€‚ä½ æ— éœ€å¤„ç†è¿™ä¸€ä»£ç ï¼Œæˆ‘ä»¬åªæ˜¯å°†å®ƒå‘ˆç°å‡ºæ¥ä¾›ä½ å‚è€ƒã€‚
emails_by_addressï¼šè¯¥ç›®å½•åŒ…å«è®¸å¤šæ–‡æœ¬æ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶åˆåŒ…å«ç‰¹å®šé‚®ç®±çš„å¾€æ¥é‚®ä»¶ã€‚ ä½ å¯ä»¥è¿›è¡Œå‚è€ƒï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®é‚®ä»¶æ•°æ®é›†çš„è¯¦ç»†ä¿¡æ¯åˆ›å»ºæ›´å¤šçš„é«˜çº§ç‰¹å¾ã€‚ä½ æ— éœ€å¤„ç†ç”µå­é‚®ä»¶è¯­æ–™åº“æ¥å®Œæˆé¡¹ç›®ã€‚
è¿ˆå‘æˆåŠŸæˆ‘ä»¬å°†ç»™äºˆä½ å¯è¯»å…¥æ•°æ®çš„åˆå§‹ä»£ç ï¼Œå°†ä½ é€‰æ‹©çš„ç‰¹å¾æ”¾å…¥ numpy æ•°ç»„ä¸­ï¼Œè¯¥æ•°ç»„æ˜¯å¤§å¤šæ•° sklearn å‡½æ•°å‡å®šçš„è¾“å…¥è¡¨å•ã€‚ ä½ è¦åšçš„å°±æ˜¯è®¾è®¡ç‰¹å¾ï¼Œé€‰æ‹©å¹¶è°ƒæ•´ç®—æ³•ï¼Œç”¨ä»¥æµ‹è¯•å’Œè¯„ä¼°è¯†åˆ«ç¬¦ã€‚ æˆ‘ä»¬åœ¨è®¾è®¡æ•°ä¸ªè¿·ä½ é¡¹ç›®ä¹‹åˆå°±æƒ³åˆ°äº†è¿™ä¸ªæœ€ç»ˆçš„é¡¹ç›®ï¼Œå› æ­¤è¯·è®°å¾—å€ŸåŠ©ä½ å·²å®Œæˆçš„å·¥ä½œæˆæœã€‚
åœ¨é¢„å¤„ç†æ­¤é¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬å·²å°†å®‰ç„¶é‚®ä»¶å’Œè´¢åŠ¡æ•°æ®ä¸å­—å…¸ç»“åˆåœ¨ä¸€èµ·ï¼Œå­—å…¸ä¸­çš„æ¯å¯¹é”®å€¼å¯¹åº”ä¸€ä¸ªäººã€‚ å­—å…¸é”®æ˜¯äººåï¼Œå€¼æ˜¯å¦ä¸€ä¸ªå­—å…¸ï¼ˆåŒ…å«æ­¤äººçš„æ‰€æœ‰ç‰¹å¾åå’Œå¯¹åº”çš„å€¼ï¼‰ã€‚ æ•°æ®ä¸­çš„ç‰¹å¾åˆ†ä¸ºä¸‰å¤§ç±»ï¼Œå³è´¢åŠ¡ç‰¹å¾ã€é‚®ä»¶ç‰¹å¾å’Œ POI æ ‡ç­¾ã€‚
è´¢åŠ¡ç‰¹å¾: [â€˜salaryâ€™, â€˜deferral_paymentsâ€™, â€˜total_paymentsâ€™, â€˜loan_advancesâ€™, â€˜bonusâ€™, â€˜restricted_stock_deferredâ€™, â€˜deferred_incomeâ€™, â€˜total_stock_valueâ€™, â€˜expensesâ€™, â€˜exercised_stock_optionsâ€™, â€˜otherâ€™, â€˜long_term_incentiveâ€™, â€˜restricted_stockâ€™, â€˜director_feesâ€™] (å•ä½å‡æ˜¯ç¾å…ƒï¼‰
é‚®ä»¶ç‰¹å¾: [â€˜to_messagesâ€™, â€˜email_addressâ€™, â€˜from_poi_to_this_personâ€™, â€˜from_messagesâ€™, â€˜from_this_person_to_poiâ€™, â€˜shared_receipt_with_poiâ€™] (å•ä½é€šå¸¸æ˜¯ç”µå­é‚®ä»¶çš„æ•°é‡ï¼Œæ˜æ˜¾çš„ä¾‹å¤–æ˜¯ â€˜email_addressâ€™ï¼Œè¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰
POI æ ‡ç­¾: [â€˜poiâ€™] (booleanï¼Œæ•´æ•°)
æˆ‘ä»¬é¼“åŠ±ä½ åœ¨å¯åŠ¨å™¨åŠŸèƒ½ä¸­åˆ¶ä½œï¼Œè½¬æ¢æˆ–é‡æ–°è°ƒæ•´æ–°åŠŸèƒ½ã€‚å¦‚æœè¿™æ ·åšï¼Œä½ åº”è¯¥æŠŠæ–°åŠŸèƒ½å­˜å‚¨åˆ°my_datasetï¼Œå¦‚æœä½ æƒ³åœ¨æœ€ç»ˆç®—æ³•ä¸­ä½¿ç”¨æ–°åŠŸèƒ½ï¼Œä½ è¿˜åº”è¯¥å°†åŠŸèƒ½åç§°æ·»åŠ åˆ° my_feature_listï¼Œä»¥ä¾¿äºä½ çš„è¯„ä¼°è€…å¯ä»¥åœ¨æµ‹è¯•æœŸé—´è®¿é—®å®ƒã€‚å…³äºå¦‚ä½•åœ¨æ•°æ®é›†ä¸­æ·»åŠ å…·ä½“çš„æ–°è¦ç´ çš„ä¾‹å­ï¼Œå¯ä»¥å‚è€ƒâ€œç‰¹å¾é€‰æ‹©â€è¿™ä¸€è¯¾ã€‚
æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å»ºè®®ä½ å¯ä»¥åœ¨å®Œæˆé¡¹ç›®è¿‡ç¨‹ä¸­åšä¸€äº›è®°å·ã€‚ä½ å¯ä»¥å†™å‡ºç³»åˆ—é—®é¢˜çš„ç­”æ¡ˆï¼ˆåœ¨ä¸‹ä¸€é¡µï¼‰ï¼Œå°†è¿™ä¸ªä½œä¸ºæäº¤çš„é¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼Œä»¥ä¾¿äºè¯„ä¼°è€…äº†è§£åˆ°ä½ å¯¹äºä¸åŒæ–¹é¢åˆ†æçš„æ–¹æ³•ã€‚ä½ çš„æ€ç»´è¿‡ç¨‹åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ¯”ä½ çš„æœ€ç»ˆé¡¹ç›®æ›´é‡è¦ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä½ åœ¨è¿™äº›é—®é¢˜çš„è§£ç­”ä¸­äº†è§£ä½ çš„æ€ç»´è¿‡ç¨‹ã€‚
Project EvaluationFinal Project Evaulation InstructionsWhen youâ€™re finished, your project will have 2 parts: the code/classifier you create and some written documentation of your work. Share your project with others and self-evaluate your project according to the rubric here.
Before you start working on the project: Review the final project rubric carefully. Think about the following questions - How will you incorporate each of the rubric criterion into your project? Why are these aspects important? What is your strategy to ensure that your project â€œmeets specificationsâ€ in the given criteria? Once you are convinced that you understand each part of the rubric, please start working on your project. Remember to refer to the rubric often to ensure that you are on the right track.
Items to include when sharing your work with others for feedback:
Code/ClassifierWhen making your classifier, you will create three pickle files (my_dataset.pkl, my_classifier.pkl, my_feature_list.pkl). The project evaluator will test these using the tester.py script. You are encouraged to use this script before checking to gauge if your performance is good enough. You should also include your modified poi_id.py file in case of any issues with running your code or to verify what is reported in your question responses (see next paragraph).
Documentation of Your WorkDocument the work youâ€™ve done by answering (in about a paragraph each) the questions found here. You can write your answers in a PDF, Word document, text file, or similar format.
æºç åˆ†äº«https://github.com/voidking/ud120-projects
ä¹¦ç­¾æœºå™¨å­¦ä¹ å…¥é—¨https://cn.udacity.com/course/intro-to-machine-learning--ud120
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>è½¬è½½</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>è¯„ä¼°è¿·ä½ é¡¹ç›®</title>
    <url>/dev-ml-evaluation/</url>
    <content><![CDATA[é¡¹ç›®ç®€ä»‹è¿”å›è‡³ä½ ä¸ŠèŠ‚è¯¾çš„ä»£ç ï¼Œä½ åœ¨å…¶ä¸­ä½¿ç”¨å†³ç­–æ ‘å’Œä¸€ä¸ªç‰¹å¾æ„å»ºäº† POI è¯†åˆ«ç¬¦çš„é¦–ä¸ªç®€å•è¿­ä»£ã€‚ å°†ä½ æ„å»ºçš„ POI è¯†åˆ«ç¬¦å¤åˆ¶åˆ° evaluation/evaluate_poi_identifier.py å†…çš„éª¨æ¶ä»£ç ä¸­ã€‚ å›å¿†ä¸€ä¸‹åœ¨è¯¥é¡¹ç›®ç»“å°¾ï¼Œä½ ï¼ˆæµ‹è¯•é›†ä¸Šçš„ï¼‰è¯†åˆ«ç¬¦æœ‰ 0.724 çš„å‡†ç¡®ç‡ã€‚ä¸æ˜¯å¾ˆå·®ï¼Œå¯¹å§ï¼Ÿè®©æˆ‘ä»¬æ›´ä¸ºä»”ç»†åœ°æ¢ç©¶ä½ çš„é¢„æµ‹å€¼ã€‚


æµ‹è¯•é›†å¯¹äº POI è¯†åˆ«ç¬¦çš„æµ‹è¯•é›†ï¼Œæœ‰å¤šå°‘ POI è¢«é¢„æµ‹åˆ°äº†ï¼Ÿç­”ï¼š4(æ³¨æ„æˆ‘ä»¬è¯´çš„æ˜¯æµ‹è¯•é›†ï¼æˆ‘ä»¬æœŸæœ›çœ‹åˆ°çš„ä¸æ˜¯æ•´ä¸ªæ•°æ®é›†ä¸­ POI çš„æ•°é‡ã€‚)
ä½ çš„æµ‹è¯•é›†ä¸­çš„æ€»äººæ•°æ˜¯å¤šå°‘ï¼Ÿç­”ï¼š29
å¦‚æœæµ‹è¯•é›†ä¸­æ‰€æœ‰äººçš„è¯†åˆ«ç¬¦éƒ½è¢«é¢„æµ‹ä¸º 0ï¼ˆé POIï¼‰ï¼Œå…¶å‡†ç¡®ç‡ä¼šæ˜¯å¤šå°‘ï¼Ÿ0.8620689655172413
True Positive æ•°é‡æŠŠä½ çš„è¿‡æ‹Ÿåˆæ¨¡å‹çš„é¢„æµ‹ä¸çœŸå®æµ‹è¯•æ ‡ç­¾æ¯”è¾ƒï¼Œä½ å¾—åˆ° true positive äº†å—ï¼Ÿï¼ˆåœ¨æ­¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å®šä¹‰çš„ true positive ä¸­å®é™…æ ‡ç­¾å’Œé¢„æµ‹æ ‡ç­¾å‡ä¸º 1ï¼‰ç­”ï¼šNope
ç²¾ç¡®ç‡å’Œå¬å›ç‡å¦‚ä½ ç°åœ¨å¯èƒ½çœ‹åˆ°çš„ï¼Œç±»ä¼¼äºå®‰ç„¶æ•°æ®é›†ï¼ˆé POI å¤šäº POIï¼‰ä¸­çš„é‚£äº›ä¸å¹³è¡¡ç±»ä¼šå¸¦æ¥ä¸€äº›ç‰¹æ®Šçš„æŒ‘æˆ˜ï¼Œå³ä½ å¯ä»¥ä¸ºæ¯ä¸ªç‚¹æ¨æµ‹å‡ºæ›´ä¸ºå¸¸è§çš„ç±»æ ‡ç­¾ï¼Œè™½ç„¶è¿™ä¸æ˜¯ä¸€ä¸ªéå¸¸æœ‰æ°´å‡†çš„ç­–ç•¥ï¼Œä½†å´ä»ç„¶èƒ½å¤Ÿè·å¾—ç›¸å½“ä¸é”™çš„å‡†ç¡®ç‡ï¼
ç²¾ç¡®ç‡å’Œå¬å›ç‡å¯ä»¥æ›´å¥½åœ°è¯´æ˜æ€§èƒ½ã€‚ä½¿ç”¨ sklearn.metrics ä¸­å¯ç”¨çš„ precision_score å’Œ recall_score æ¥è®¡ç®—è¿™äº›æ•°é‡ã€‚
ç²¾ç¡®ç‡æ˜¯å¤šå°‘ï¼Ÿç­”ï¼š0
å¬å›ç‡æ˜¯å¤šå°‘ï¼Ÿç­”ï¼š0
ï¼ˆæ³¨æ„ï¼šä½ å¯èƒ½çœ‹åˆ°è¿‡ç±»ä¼¼äºâ€œç”¨æˆ·è­¦å‘Šï¼šä¸€äº›æ ‡ç­¾çš„ç²¾ç¡®ç‡å’Œå¬å›ç‡ç­‰äºé›¶â€çš„æ¶ˆæ¯ã€‚ å°±åƒå…¶ä¸­æ‰€æ˜¾ç¤ºçš„ï¼Œå½“ç²¾ç¡®ç‡å’Œ/æˆ–å¬å›ç‡ä¸ºé›¶æ—¶ï¼Œè®¡ç®—å…¶ä»–æŒ‡æ ‡ï¼ˆæ¯”å¦‚ F1 åˆ†æ•°ï¼‰å¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œè€Œä¸”åœ¨é—®é¢˜å‘ç”Ÿæ—¶ï¼Œè­¦å‘Šæ¶ˆæ¯ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚ï¼‰ 
æ˜¾ç„¶ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªä¼˜åŒ–å¾—éå¸¸å¥½çš„æœºå™¨å­¦ä¹ ç­–ç•¥ï¼ˆæˆ‘ä»¬æ²¡æœ‰å°è¯•è¿‡å†³ç­–æ ‘ä»¥å¤–çš„ä»»ä½•ç®—æ³•ï¼Œæˆ–è°ƒæ•´è¿‡ä»»ä½•å‚æ•°ï¼Œä¹Ÿæ²¡æœ‰è¿›è¡Œè¿‡ä»»ä½•ç‰¹å¾é€‰æ‹©ï¼‰ï¼Œ ç°åœ¨çœ‹æ¥ï¼Œç²¾ç¡®ç‡å’Œå¬å›ç‡è¦æ¯”å‡†ç¡®ç‡æ›´ç›´è§‚ã€‚
æ··æ·†çŸ©é˜µåœ¨æœ€ç»ˆé¡¹ç›®ä¸­ï¼Œä½ å°†ä½¿ç”¨åœ¨æœ¬è¯¾ç¨‹ä¸­å­¦ä¹ åˆ°çš„ä¼—å¤šå·¥å…·ä¼˜åŒ– POI è¯†åˆ«ç¬¦ã€‚å¸Œæœ›ç»“æœæ˜¯ä½ çš„ç²¾ç¡®ç‡å’Œ/æˆ–å¬å›ç‡ä¼šæé«˜ï¼Œä½†æ˜¯ä½ å¿…é¡»èƒ½å¤Ÿè§£è¯»å®ƒä»¬ã€‚
æ­¤å¤„ä¸ºä¸€äº›ç¼–é€ çš„é¢„æµ‹å€¼å’Œå‡è®¾çš„æµ‹è¯•é›†çš„çœŸæ ‡ç­¾ï¼›åœ¨ä»¥ä¸‹æ–¹æ¡†ä¸­å¡«ç©ºï¼Œç»ƒä¹ è¯†åˆ« true positiveã€false positiveã€true negative å’Œ false negativeã€‚ è®©æˆ‘ä»¬æŒ‰ç…§æƒ¯ä¾‹ï¼Œä½¿ç”¨â€œ1â€è¡¨ç¤ºæ­£ç»“æœï¼Œâ€œ0â€è¡¨ç¤ºè´Ÿç»“æœã€‚
é¢„æµ‹å€¼ = [0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 1, 0, 1]
çœŸå®æ ‡ç­¾ = [0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0]
æœ‰å¤šå°‘ true positiveï¼Ÿç­”ï¼š6
æ­¤ç¤ºä¾‹ä¸­æœ‰å¤šå°‘ true negativeï¼Ÿç­”ï¼š9
æ­¤ç¤ºä¾‹ä¸­æœ‰å¤šå°‘ false positivesï¼Ÿç­”ï¼š3
æ­¤ç¤ºä¾‹ä¸­æœ‰å¤šå°‘ false negativesï¼Ÿç­”ï¼š2
è¿™ä¸ªåˆ†ç±»å™¨çš„ç²¾ç¡®ç‡æ˜¯å¤šå°‘ï¼Ÿç­”ï¼š0.666666666667
è¿™ä¸ªåˆ†ç±»å™¨çš„å¬å›ç‡æ˜¯å¤šå°‘ï¼Ÿç­”ï¼š0.75
ç†è§£æŒ‡æ ‡1ã€å¡«ç©ºï¼š
â€œæˆ‘çš„ true positive ç‡å¾ˆé«˜ï¼Œè¿™æ„å‘³ç€å½“æµ‹è¯•æ•°æ®ä¸­å‡ºç°ï¼ˆPOIï¼‰æ—¶ï¼Œæˆ‘æ“…é•¿äºæ ‡è®°ä»–æˆ–å¥¹ã€‚â€
2ã€å¡«ç©ºï¼š
â€œæˆ‘çš„è¯†åˆ«ç¬¦æ²¡æœ‰å¾ˆå¥½çš„ï¼ˆprecisionï¼‰ï¼Œä½†æ˜¯æœ‰ä¸é”™çš„ï¼ˆrecallï¼‰ã€‚ è¿™æ„å‘³ç€ï¼Œæ— è®ºæˆ‘æµ‹è¯•é›†ä¸­çš„ POI ä½•æ—¶è¢«æ ‡è®°ï¼Œæˆ‘éƒ½å¯ä»¥æ˜ç¡®åœ°çŸ¥é“é‚£å¾ˆæœ‰å¯èƒ½æ˜¯çœŸå®çš„ POI è€Œéè™šè­¦ã€‚ å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä¸ºæ­¤ä»˜å‡ºçš„ä»£ä»·æ˜¯æˆ‘æœ‰æ—¶å€™ä¼šé”™è¿‡çœŸå®çš„ POIï¼Œå› ä¸ºæˆ‘å®é™…ä¸Šä¸å¤ªæƒ…æ„¿è§¦åŠè¾¹ç•Œæƒ…å½¢ã€‚ â€
3ã€å¡«ç©ºï¼š
â€œæˆ‘çš„è¯†åˆ«ç¬¦æ²¡æœ‰å¾ˆå¥½çš„ï¼ˆrecallï¼‰ï¼Œä½†æ˜¯æœ‰ä¸é”™çš„ï¼ˆprecisionï¼‰ã€‚ è¿™æ„å‘³ç€ï¼Œæ— è®ºæˆ‘æµ‹è¯•é›†ä¸­çš„ POI ä½•æ—¶è¢«æ ‡è®°ï¼Œæˆ‘éƒ½å¯ä»¥æ˜ç¡®åœ°çŸ¥é“é‚£å¾ˆæœ‰å¯èƒ½æ˜¯çœŸå®çš„ POI è€Œéè™šè­¦ã€‚ å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä¸ºæ­¤ä»˜å‡ºçš„ä»£ä»·æ˜¯æˆ‘æœ‰æ—¶å€™ä¼šé”™è¿‡çœŸå®çš„ POIï¼Œå› ä¸ºæˆ‘å®é™…ä¸Šä¸å¤ªæƒ…æ„¿è§¦åŠè¾¹ç•Œæƒ…å½¢â€
4ã€å¡«ç©ºï¼š
â€œæˆ‘çš„è¯†åˆ«ç¬¦æœ‰éå¸¸å¥½çš„ï¼ˆF1 scoreï¼‰ã€‚è¿™æ˜¯ä¸¤ä¸ªä¸–ç•Œä¸­æœ€å¥½çš„è¯†åˆ«ç¬¦ï¼Œæˆ‘çš„ false positive å’Œ false negative ç‡å‡ä¸ºï¼ˆlowï¼‰ï¼Œè¿™æ„å‘³ç€æˆ‘å¯ä»¥å¯é ã€å‡†ç¡®åœ°è¯†åˆ« POIã€‚ å¦‚æœæˆ‘çš„è¯†åˆ«ç¬¦å‘ç°äº† POIï¼Œé‚£ä¹ˆæ­¤äººå‡ ä¹å¯ä»¥è‚¯å®šæ˜¯ POIï¼Œè€Œä¸”å¦‚æœè¯†åˆ«ç¬¦æ²¡æœ‰æ ‡è®°æŸäººï¼Œé‚£ä¹ˆå‡ ä¹å¯ä»¥è‚¯å®šä»–ä»¬ä¸æ˜¯ POIã€‚â€
POI è¯†åˆ«ç¬¦æŒ‡æ ‡æˆ‘ä»¬é€šå¸¸éœ€è¦åœ¨ç²¾ç¡®ç‡å’Œå¬å›ç‡ä¹‹é—´è¿›è¡Œå–èˆâ€”â€”ä½ è®¤ä¸ºåœ¨ POI è¯†åˆ«ç¬¦ä¸­å“ªä¸ªæ›´é‡è¦ï¼Ÿ ç­”æ¡ˆæ²¡æœ‰å¯¹é”™ï¼Œå› ä¸ºæ— è®ºæ€æ ·éƒ½ä¼šå¾—åˆ°å¾ˆå¥½çš„è®ºè¯ï¼Œä½†æ˜¯ä½ åº”èƒ½è§£è¯»è¿™ä¸¤ä¸ªæŒ‡æ ‡ï¼Œå¹¶ä¸”æ¸…æ¥šè¡¨è¿°ä½ å‘ç°å“ªä¸ªæœ€é‡è¦ä»¥åŠä¸ºä»€ä¹ˆã€‚
æºç åˆ†äº«https://github.com/voidking/ud120-projects
ä¹¦ç­¾æœºå™¨å­¦ä¹ å…¥é—¨https://cn.udacity.com/course/intro-to-machine-learning--ud120
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>è½¬è½½</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>éªŒè¯è¿·ä½ é¡¹ç›®</title>
    <url>/dev-ml-validation/</url>
    <content><![CDATA[é¡¹ç›®ç®€ä»‹åœ¨æ­¤è¿·ä½ é¡¹ç›®ä¸­ï¼Œä½ å°†ä»åˆ†å‰²è®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®å¼€å§‹ã€‚è¿™æ˜¯ä½ é€šå¾€â€œæ„å»º POI è¯†åˆ«ç¬¦â€è¿™ä¸ªæœ€ç»ˆé¡¹ç›®çš„ç¬¬ä¸€æ­¥ã€‚


ç¬¬ä¸€ä¸ªï¼ˆè¿‡æ‹Ÿåˆï¼‰POI è¯†åˆ«ç¬¦ä½ å°†å…ˆå¼€å§‹æ„å»ºæƒ³è±¡å¾—åˆ°çš„æœ€ç®€å•ï¼ˆæœªç»è¿‡éªŒè¯çš„ï¼‰POI è¯†åˆ«ç¬¦ã€‚ æœ¬èŠ‚è¯¾çš„åˆå§‹ä»£ç  (validation/validate_poi.py) ç›¸å½“ç›´ç™½â€”â€”å®ƒçš„ä½œç”¨å°±æ˜¯è¯»å…¥æ•°æ®ï¼Œå¹¶å°†æ•°æ®æ ¼å¼åŒ–ä¸ºæ ‡ç­¾å’Œç‰¹å¾çš„åˆ—è¡¨ã€‚ åˆ›å»ºå†³ç­–æ ‘åˆ†ç±»å™¨ï¼ˆä»…ä½¿ç”¨é»˜è®¤å‚æ•°ï¼‰ï¼Œåœ¨æ‰€æœ‰æ•°æ®ï¼ˆä½ å°†åœ¨ä¸‹ä¸€éƒ¨åˆ†ä¸­ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼ï¼‰ä¸Šè®­ç»ƒå®ƒï¼Œå¹¶æ‰“å°å‡ºå‡†ç¡®ç‡ã€‚ è¿™æ˜¯ä¸€é¢—è¿‡æ‹Ÿåˆæ ‘ï¼Œä¸è¦ç›¸ä¿¡è¿™ä¸ªæ•°å­—ï¼å°½ç®¡å¦‚æ­¤ï¼Œå‡†ç¡®ç‡æ˜¯å¤šå°‘ï¼Ÿç­”ï¼š
ä» Python 3.3 å¼€å§‹ï¼Œå­—å…¸é”®è¢«å¤„ç†çš„é¡ºåºå‘ç”Ÿäº†å˜åŒ–ï¼Œé¡ºåºåœ¨æ¯æ¬¡ä»£ç è¿è¡Œæ—¶éƒ½ä¼šå¾—åˆ°éšæœºåŒ–å¤„ç†ã€‚ è¿™ä¼šé€ æˆä¸è¯„åˆ†å·¥å…·å’Œé¡¹ç›®ä»£ç ï¼ˆå‡åœ¨ Python 2.7 ä¸‹è¿è¡Œï¼‰çš„ä¸€äº›å…¼å®¹æ€§é—®é¢˜ã€‚ è¦æ›´æ­£è¿™ä¸ªé—®é¢˜ï¼Œå‘ validate_poi.py ç¬¬ 25 è¡Œè°ƒç”¨çš„ featureFormat æ·»åŠ ä»¥ä¸‹å‚æ•°ï¼š
sort_keys = &#x27;../tools/python2_lesson13_keys.pkl&#x27;
è¿™å°†ä»¥ Python 2 çš„é”®é¡ºåºæ‰“å¼€ tools æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶ã€‚
æ³¨æ„ï¼šå¦‚æœä½ æ²¡æœ‰è·å¾—è¯„åˆ†å·¥å…·æœŸæœ›çš„ç»“æœï¼Œä½ å¯èƒ½ä¼šæƒ³æŸ¥çœ‹ tools/feature_format.py æ–‡ä»¶ã€‚ ç”±äºæœ€ç»ˆé¡¹ç›®å‘ç”Ÿçš„å˜åŒ–ï¼Œä¸€äº›æ–‡ä»¶æ›´æ”¹å½±å“äº†æ­¤å¤„æ‰€å†™ä»»åŠ¡çš„æ•°é‡è¾“å‡ºã€‚ æ£€æŸ¥ä½ æ˜¯å¦ä»èµ„æºåº“è·å¾—äº†æœ€æ–°ç‰ˆæœ¬çš„æ–‡ä»¶ï¼Œä»¥ä¾¿ featureFormat å…·æœ‰ sort_keys = False çš„é»˜è®¤å‚æ•°ï¼Œå¹¶ä¸” keys = dictionary.keys() èƒ½å¤Ÿäº§ç”Ÿç»“æœã€‚
éƒ¨ç½²è®­ç»ƒ/æµ‹è¯•æœºåˆ¶ç°åœ¨ï¼Œä½ å°†æ·»åŠ è®­ç»ƒå’Œæµ‹è¯•ï¼Œä»¥ä¾¿è·å¾—ä¸€ä¸ªå¯é çš„å‡†ç¡®ç‡æ•°å­—ã€‚ ä½¿ç”¨ sklearn.cross_validation ä¸­çš„ train_test_split éªŒè¯ï¼› å°† 30% çš„æ•°æ®ç”¨äºæµ‹è¯•ï¼Œå¹¶è®¾ç½® random_state å‚æ•°ä¸º 42ï¼ˆrandom_state æ§åˆ¶å“ªäº›ç‚¹è¿›å…¥è®­ç»ƒé›†ï¼Œå“ªäº›ç‚¹ç”¨äºæµ‹è¯•ï¼›å°†å…¶è®¾ç½®ä¸º 42 æ„å‘³ç€æˆ‘ä»¬ç¡®åˆ‡åœ°çŸ¥é“å“ªäº›äº‹ä»¶åœ¨å“ªä¸ªé›†ä¸­ï¼› å¹¶ä¸”å¯ä»¥æ£€æŸ¥ä½ å¾—åˆ°çš„ç»“æœï¼‰ã€‚æ›´æ–°åçš„å‡†ç¡®ç‡æ˜¯å¤šå°‘ï¼Ÿç­”ï¼š0.724137931034
æºç åˆ†äº«https://github.com/voidking/ud120-projects
ä¹¦ç­¾æœºå™¨å­¦ä¹ å…¥é—¨https://cn.udacity.com/course/intro-to-machine-learning--ud120
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>è½¬è½½</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸»æˆåˆ†åˆ†æè¿·ä½ é¡¹ç›®</title>
    <url>/dev-ml-pca/</url>
    <content><![CDATA[é¡¹ç›®ç®€ä»‹æˆ‘ä»¬åœ¨è®¨è®º PCA æ—¶èŠ±è´¹äº†å¤§é‡æ—¶é—´æ¥æ¢è®¨ç†è®ºé—®é¢˜ï¼Œå› æ­¤ï¼Œåœ¨æ­¤è¿·ä½ é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†è¦æ±‚ä½ å†™ä¸€äº› sklearn ä»£ç ã€‚ç‰¹å¾è„¸æ–¹æ³•ä»£ç å¾ˆæœ‰è¶£ï¼Œè€Œä¸”å†…å®¹ä¸°å¯Œï¼Œè¶³ä»¥èƒœä»»è¿™ä¸€æ•´ä¸ªè¿·ä½ é¡¹ç›®çš„è¯•éªŒå¹³å°ã€‚
å¯åœ¨ pca/eigenfaces.py ä¸­æ‰¾åˆ°åˆå§‹ä»£ç ã€‚æ­¤ä»£ç ä¸»è¦å–è‡ªæ­¤å¤„ sklearn æ–‡æ¡£ä¸­çš„ç¤ºä¾‹ã€‚
è¯·æ³¨æ„ï¼Œåœ¨è¿è¡Œä»£ç æ—¶ï¼Œå¯¹äºåœ¨ pca/eigenfaces.py çš„ç¬¬ 94 è¡Œè°ƒç”¨çš„ SVC å‡½æ•°ï¼Œæœ‰ä¸€ä¸ªå‚æ•°æœ‰æ”¹å˜ã€‚å¯¹äºâ€œclass_weightâ€å‚æ•°ï¼Œå‚æ•°å­—ç¬¦ä¸²â€œautoâ€å¯¹äº sklearn ç‰ˆæœ¬ 0.16 å’Œæ›´æ—©ç‰ˆæœ¬æ˜¯æœ‰æ•ˆå€¼ï¼Œä½†å°†è¢« 0.19 èˆå¼ƒã€‚å¦‚æœè¿è¡Œ sklearn ç‰ˆæœ¬ 0.17 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œé¢„æœŸçš„å‚æ•°å­—ç¬¦ä¸²åº”ä¸ºâ€œbalancedâ€ã€‚å¦‚æœåœ¨è¿è¡Œ pca/eigenfaces.py æ—¶æ”¶åˆ°é”™è¯¯æˆ–è­¦å‘Šï¼Œè¯·ç¡®ä¿ç¬¬ 98 è¡ŒåŒ…å«ä¸ä½ å®‰è£…çš„ sklearn ç‰ˆæœ¬åŒ¹é…çš„æ­£ç¡®å‚æ•°ã€‚
å¦‚æœç›´æ¥è¿è¡Œä¸‹è½½çš„ä»£ç ï¼Œä¼šå…ˆä¸‹è½½233MBçš„æ•°æ®æ–‡ä»¶ã€‚ä½ å¯ä»¥ç‚¹å‡»è¿™é‡Œå…ˆä¸‹è½½æ•°æ®é›†ï¼Œå†æ ¹æ®æŒ‡ç¤ºè¿è¡Œä»£ç ã€‚


ä¸»æˆåˆ†çš„å¯é‡Šæ–¹å·®æˆ‘ä»¬æåˆ° PCA ä¼šå¯¹ä¸»æˆåˆ†è¿›è¡Œæ’åºï¼Œç¬¬ä¸€ä¸ªä¸»æˆåˆ†å…·æœ‰æœ€å¤§æ–¹å·®ï¼Œç¬¬äºŒä¸ªä¸»æˆåˆ† å…·æœ‰ç¬¬äºŒå¤§æ–¹å·®ï¼Œä¾æ­¤ç±»æ¨ã€‚ç¬¬ä¸€ä¸ªä¸»æˆåˆ†å¯ä»¥è§£é‡Šå¤šå°‘æ–¹å·®ï¼Ÿç¬¬äºŒä¸ªå‘¢ï¼Ÿ
æˆ‘ä»¬å‘ç°ï¼Œæœ‰æ—¶ Pillow æ¨¡å—ï¼ˆæœ¬ä¾‹ä¸­ä½¿ç”¨çš„ï¼‰å¯èƒ½ä¼šé€ æˆéº»çƒ¦ã€‚å¦‚æœä½ æ”¶åˆ°ä¸ fetch_lfw_people() å‘½ä»¤ç›¸å…³çš„é”™è¯¯ï¼Œè¯·å°è¯•ä»¥ä¸‹å‘½ä»¤ï¼špip install --upgrade PILLOW
å¦‚æœè¿è¡Œæ—¶é‡åˆ°é”™è¯¯ï¼Œè¯·æ³¨æ„å¯¹äºåœ¨â€œpca/eigenfaces.py â€çš„ç¬¬ 94 è¡Œè°ƒç”¨çš„â€œSVCâ€å‡½æ•°ï¼Œæœ‰ä¸€ä¸ªå‚æ•°æœ‰æ”¹å˜ã€‚å¯¹äºâ€œclass_weightâ€å‚æ•°ï¼Œå‚æ•°å­—ç¬¦ä¸²â€œautoâ€å¯¹äº sklearn ç‰ˆæœ¬ 0.16 å’Œæ›´æ—©ç‰ˆæœ¬æ˜¯æœ‰æ•ˆå€¼ï¼Œä½†å°†è¢« 0.19 ç‰ˆæœ¬èˆå¼ƒã€‚å¦‚æœè¿è¡Œ sklearn ç‰ˆæœ¬ 0.17 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œé¢„æœŸçš„å‚æ•°å­—ç¬¦ä¸²åº”ä¸ºâ€œbalancedâ€ã€‚å¦‚æœåœ¨è¿è¡Œâ€œpca/eigenfaces.pyâ€æ—¶æ”¶åˆ°é”™è¯¯æˆ–è­¦å‘Šï¼Œè¯·ç¡®ä¿ç¬¬ 98 è¡ŒåŒ…å«ä¸ä½ å®‰è£…çš„ sklearn ç‰ˆæœ¬åŒ¹é…çš„æ­£ç¡®å‚æ•°ã€‚
è¦ä½¿ç”¨å¤šå°‘ä¸ªä¸»æˆåˆ†ï¼Ÿç°åœ¨ä½ å°†å°è¯•ä¿ç•™ä¸åŒæ•°é‡çš„ä¸»æˆåˆ†ã€‚åœ¨ç±»ä¼¼è¿™æ ·çš„å¤šç±»åˆ†ç±»é—®é¢˜ä¸­ï¼ˆè¦åº”ç”¨ä¸¤ä¸ªä»¥ä¸Šæ ‡ç­¾ï¼‰ï¼Œå‡†ç¡®æ€§è¿™ä¸ªæŒ‡æ ‡ä¸åƒåœ¨ä¸¤ä¸ªç±»çš„æƒ…å½¢ä¸­é‚£ä¹ˆç›´è§‚ã€‚ç›¸åï¼Œæ›´å¸¸ç”¨çš„æŒ‡æ ‡æ˜¯ F1 åˆ†æ•°ã€‚
æˆ‘ä»¬å°†åœ¨è¯„ä¼°æŒ‡æ ‡è¯¾ç¨‹ä¸­å­¦ä¹  F1 åˆ†æ•°ï¼Œä½†ä½ è‡ªå·±è¦å¼„æ¸…æ¥šå¥½çš„åˆ†ç±»å™¨çš„ç‰¹ç‚¹æ˜¯å…·æœ‰é«˜ F1 åˆ†æ•°è¿˜æ˜¯ä½ F1 åˆ†æ•°ã€‚ä½ å°†é€šè¿‡æ”¹å˜ä¸»æˆåˆ†æ•°é‡å¹¶è§‚å¯Ÿ F1 åˆ†æ•°å¦‚ä½•ç›¸åº”åœ°å˜åŒ–æ¥ç¡®å®šã€‚
éšç€ä½ æ·»åŠ è¶Šæ¥è¶Šå¤šçš„ä¸»æˆåˆ†ä½œä¸ºè®­ç»ƒåˆ†ç±»å™¨çš„ç‰¹å¾ï¼Œä½ è®¤ä¸ºå®ƒçš„æ€§èƒ½ä¼šæ›´å¥½è¿˜æ˜¯æ›´å·®ï¼Ÿç­”ï¼šæ›´å¥½
F1 åˆ†æ•°ä¸ä½¿ç”¨çš„ä¸»æˆåˆ†æ•°å°† n_components æ›´æ”¹ä¸ºä»¥ä¸‹å€¼ï¼š[10, 15, 25, 50, 100, 250]ã€‚å¯¹äºæ¯ä¸ªä¸»æˆåˆ†ï¼Œè¯·æ³¨æ„ Ariel Sharon çš„ F1 åˆ†æ•°ã€‚ï¼ˆå¯¹äº 10 ä¸ªä¸»æˆåˆ†ï¼Œä»£ç ä¸­çš„ç»˜åˆ¶åŠŸèƒ½å°†ä¼šå¤±æ•ˆï¼Œä½†ä½ åº”è¯¥èƒ½å¤Ÿçœ‹åˆ° F1 åˆ†æ•°ã€‚ï¼‰
å¦‚æœçœ‹åˆ°è¾ƒé«˜çš„ F1 åˆ†æ•°ï¼Œè¿™æ„å‘³ç€åˆ†ç±»å™¨çš„è¡¨ç°æ˜¯æ›´å¥½è¿˜æ˜¯æ›´å·®ï¼Ÿç­”ï¼šæ›´å¥½
ç»´åº¦é™ä½ä¸è¿‡æ‹Ÿåˆåœ¨ä½¿ç”¨å¤§é‡ä¸»æˆåˆ†æ—¶ï¼Œæ˜¯å¦çœ‹åˆ°è¿‡æ‹Ÿåˆçš„è¯æ®ï¼Ÿç­”ï¼šæ˜¯çš„ï¼Œå½“ä½¿ç”¨å¤§é‡ä¸»æˆåˆ†æ—¶ï¼Œæ€§èƒ½å¼€å§‹ä¸‹é™ã€‚
æºç åˆ†äº«https://github.com/voidking/ud120-projects
ä¹¦ç­¾æœºå™¨å­¦ä¹ å…¥é—¨https://cn.udacity.com/course/intro-to-machine-learning--ud120
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>è½¬è½½</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>ç‰¹å¾é€‰æ‹©è¿·ä½ é¡¹ç›®</title>
    <url>/dev-ml-feature-selection/</url>
    <content><![CDATA[é¡¹ç›®ç®€ä»‹Katie åœ¨è§†é¢‘ä¸­è§£é‡Šäº†å¥¹åœ¨ä¸ºâ€œä½œè€…è¯†åˆ«â€é¡¹ç›®å‡†å¤‡ Chris å’Œ Sara çš„é‚®ä»¶æ—¶é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜ï¼Œ å³ä¸€ä¸ªç‰¹å¾è¿‡äºå¼ºå¤§ï¼ˆå°±åƒç­¾åä¸€æ ·ï¼Œå¯ä»¥è¯´ç»™äº†ç®—æ³•ä¸€ä¸ªæœ‰å¤±å…¬å¹³çš„ä¼˜åŠ¿ï¼‰ã€‚ä½ å°†åœ¨æ­¤äº²è‡ªæ¢ç©¶è¿™ä¸€å‘ç°ã€‚


è¿‡æ‹Ÿåˆå†³ç­–æ ‘æ­¤æ¼æ´æ˜¯åœ¨ Katie è¯•å›¾ä¸ºå†³ç­–æ ‘è¿·ä½ é¡¹ç›®åˆ›å»ºè¿‡æ‹Ÿåˆå†³ç­–æ ‘çš„ç¤ºä¾‹æ—¶å‘ç°çš„ã€‚ å†³ç­–æ ‘ä½œä¸ºä¼ ç»Ÿç®—æ³•éå¸¸å®¹æ˜“è¿‡æ‹Ÿåˆï¼Œè·å¾—è¿‡æ‹Ÿåˆå†³ç­–æ ‘æœ€ç®€å•çš„ä¸€ç§æ–¹å¼å°±æ˜¯ä½¿ç”¨å°å‹è®­ç»ƒé›†å’Œå¤§é‡ç‰¹å¾ã€‚
å¦‚æœå†³ç­–æ ‘è¢«è¿‡æ‹Ÿåˆï¼Œä½ æœŸæœ›æµ‹è¯•é›†çš„å‡†ç¡®ç‡æ˜¯éå¸¸é«˜è¿˜æ˜¯ç›¸å½“ä½ï¼Ÿç­”ï¼šä½
å¦‚æœå†³ç­–æ ‘è¢«è¿‡æ‹Ÿåˆï¼Œä½ æœŸæœ›è®­ç»ƒé›†çš„å‡†ç¡®ç‡æ˜¯é«˜è¿˜æ˜¯ä½ï¼Ÿç­”ï¼šé«˜
ç‰¹å¾æ•°é‡å’Œè¿‡æ‹Ÿåˆè¿‡æ‹Ÿåˆç®—æ³•çš„ä¸€ç§ä¼ ç»Ÿæ–¹å¼æ˜¯ä½¿ç”¨å¤§é‡ç‰¹å¾å’Œå°‘é‡è®­ç»ƒæ•°æ®ã€‚ä½ å¯ä»¥åœ¨ feature_selection/find_signature.py ä¸­æ‰¾åˆ°åˆå§‹ä»£ç ã€‚ å‡†å¤‡å¥½å†³ç­–æ ‘ï¼Œå¼€å§‹åœ¨è®­ç»ƒæ•°æ®ä¸Šè¿›è¡Œè®­ç»ƒï¼Œæ‰“å°å‡ºå‡†ç¡®ç‡ã€‚
æ ¹æ®åˆå§‹ä»£ç ï¼Œæœ‰å¤šå°‘è®­ç»ƒç‚¹ï¼Ÿç­”ï¼š18849
ç‰¹åˆ«è¯´æ˜ï¼šæ ¹æ®ä½ ä½•æ—¶ä¸‹è½½ find_signature.py ä»£ç ï¼Œä½ å¯èƒ½éœ€è¦å°†ç¬¬ 9 è‡³ 10 è¡Œçš„ä»£ç æ›´æ”¹ä¸º
words_file = &quot;../text_learning/your_word_data.pkl&quot; authors_file = &quot;../text_learning/your_email_authors.pkl&quot;
è¿™æ ·ä¸€æ¥ï¼Œé€šè¿‡è¿è¡Œ vectorize_text.py åˆ›å»ºè€Œæ¥çš„æ–‡ä»¶å°±å¯ä»¥å¾—åˆ°é€‚å½“çš„ä½“ç°äº†ã€‚
å¦å¤–ï¼Œå¦‚æœä½ ç”±äºå†…å­˜é—®é¢˜è€Œæ— æ³•è¿è¡Œä»£ç ï¼Œè€Œä¸”å¦‚æœä½ çš„ scikit-learn ç‰ˆæœ¬æ˜¯ 0.16.xï¼Œ ä½ å¯ä»¥ä» features_train è¢«åˆ›å»ºå‡ºæ¥çš„è¡Œä¸­åˆ é™¤ .toarray() å‡½æ•°ï¼Œ ä»¥èŠ‚çœå†…å­˜â€”â€”è¯¥ç‰ˆæœ¬ä¸­çš„å†³ç­–æ ‘åˆ†ç±»å™¨å¯ä»¥å°†ç¨€ç–æ•°ç»„è€Œéä»…ä»…æ˜¯å¯†é›†æ•°ç»„ä½œä¸ºè¾“å…¥ã€‚
ä½ åˆšæ‰åˆ›å»ºçš„å†³ç­–æ ‘çš„å‡†ç¡®ç‡æ˜¯å¤šå°‘ï¼Ÿç­”ï¼šï¼ˆè®°ä½ï¼Œæˆ‘ä»¬è®¾ç½®å†³ç­–æ ‘ç”¨äºè¿‡æ‹Ÿåˆâ€”â€”ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›çœ‹åˆ°çš„æ˜¯ç›¸å¯¹è¾ƒä½çš„æµ‹è¯•å‡†ç¡®ç‡ã€‚ï¼‰
è¯†åˆ«æœ€å¼ºçš„ç‰¹å¾é€‰æ‹©ï¼ˆè¿‡æ‹Ÿåˆï¼‰å†³ç­–æ ‘å¹¶ä½¿ç”¨ featureimportances å±æ€§æ¥è·å¾—ä¸€ä¸ªåˆ—è¡¨ï¼Œ å…¶ä¸­åˆ—å‡ºäº†æ‰€æœ‰ç”¨åˆ°çš„ç‰¹å¾çš„ç›¸å¯¹é‡è¦æ€§ï¼ˆç”±äºæ˜¯æ–‡æœ¬æ•°æ®ï¼Œå› æ­¤åˆ—è¡¨ä¼šå¾ˆé•¿ï¼‰ã€‚ æˆ‘ä»¬å»ºè®®è¿­ä»£æ­¤åˆ—è¡¨å¹¶ä¸”ä»…åœ¨è¶…è¿‡é˜ˆå€¼ï¼ˆæ¯”å¦‚ 0.2â€”â€”è®°ä½ï¼Œæ‰€æœ‰å•è¯éƒ½åŒç­‰é‡è¦ï¼Œæ¯ä¸ªå•è¯çš„é‡è¦æ€§éƒ½ä½äº 0.01ï¼‰çš„æƒ…å†µä¸‹å°†ç‰¹å¾é‡è¦æ€§æ‰“å°å‡ºæ¥ã€‚
æœ€é‡è¦ç‰¹å¾çš„é‡è¦æ€§æ˜¯ä»€ä¹ˆï¼Ÿè¯¥ç‰¹å¾çš„æ•°å­—æ˜¯å¤šå°‘ï¼Ÿç­”ï¼š
ä½¿ç”¨ TfIdf è·å¾—æœ€é‡è¦çš„å•è¯ä¸ºäº†ç¡®å®šæ˜¯ä»€ä¹ˆå•è¯å¯¼è‡´äº†é—®é¢˜çš„å‘ç”Ÿï¼Œä½ éœ€è¦è¿”å›è‡³ TfIdfï¼Œä½¿ç”¨ä½ ä»è¿·ä½ é¡¹ç›®çš„ä¸Šä¸€éƒ¨åˆ†ä¸­è·å¾—çš„ç‰¹å¾æ•°é‡æ¥è·å–å…³è”è¯ã€‚ ä½ å¯ä»¥åœ¨ TfIdf ä¸­è°ƒç”¨ get_feature_names() æ¥è¿”å›åŒ…å«æ‰€æœ‰å•è¯çš„åˆ—è¡¨ï¼›æŠ½å‡ºé€ æˆå¤§å¤šæ•°å†³ç­–æ ‘æ­§è§†çš„å•è¯ã€‚
è¿™ä¸ªå•è¯æ˜¯ä»€ä¹ˆï¼Ÿç±»ä¼¼äºç­¾åè¿™ç§ä¸ Chris Germany æˆ– Sara Shackleton å”¯ä¸€å…³è”çš„å•è¯æ˜¯å¦è®²å¾—é€šï¼Ÿç­”ï¼š
åˆ é™¤é‡å¤ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œè¿™ä¸€å•è¯çœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªå¼‚å¸¸å€¼ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åœ¨åˆ é™¤å®ƒä¹‹åé‡æ–°æ‹Ÿåˆã€‚ è¿”å›è‡³ text_learning/vectorize_text.pyï¼Œä½¿ç”¨æˆ‘ä»¬åˆ é™¤â€œsaraâ€ã€â€œchrisâ€ç­‰çš„æ–¹æ³•ï¼Œä»é‚®ä»¶ä¸­åˆ é™¤æ­¤å•è¯ã€‚ é‡æ–°è¿è¡Œ vectorize_text.pyï¼Œå®Œæˆä»¥åç«‹å³é‡æ–°è¿è¡Œ find_signature.pyã€‚
æœ‰è·³å‡ºå…¶ä»–ä»»ä½•çš„å¼‚å¸¸å€¼å—ï¼Ÿæ˜¯ä»€ä¹ˆå•è¯ï¼Ÿåƒæ˜¯ä¸€ä¸ªç­¾åç±»å‹çš„å•è¯ï¼Ÿï¼ˆè·Ÿä¹‹å‰ä¸€æ ·ï¼Œå°†å¼‚å¸¸å€¼å®šä¹‰ä¸ºé‡è¦æ€§å¤§äº 0.2 çš„ç‰¹å¾ï¼‰ã€‚ç­”ï¼š 
å†æ¬¡æ£€æŸ¥é‡è¦ç‰¹å¾å†æ¬¡æ›´æ–° vectorize_test.py åé‡æ–°è¿è¡Œã€‚ç„¶åï¼Œå†æ¬¡è¿è¡Œ find_signature.pyã€‚
æ˜¯å¦å‡ºç°å…¶ä»–ä»»ä½•çš„é‡è¦ç‰¹å¾ï¼ˆé‡è¦æ€§å¤§äº 0.2ï¼‰ï¼Ÿæœ‰å¤šå°‘ï¼Ÿå®ƒä»¬çœ‹èµ·æ¥åƒâ€œç­¾åæ–‡å­—â€ï¼Œè¿˜æ˜¯æ›´åƒæ¥è‡ªé‚®ä»¶æ­£æ–‡çš„â€œé‚®ä»¶å†…å®¹æ–‡å­—â€ï¼Ÿç­”ï¼š
è¿‡æ‹Ÿåˆæ ‘çš„å‡†ç¡®ç‡ç°åœ¨å†³ç­–æ ‘çš„å‡†ç¡®ç‡æ˜¯å¤šå°‘ï¼Ÿç­”ï¼š0.816268486917
æˆ‘ä»¬å·²ç»ç§»é™¤äº†ä¸¤ä¸ªâ€œç­¾åè¯è¯­â€ï¼Œæ‰€ä»¥è¦è®©æˆ‘ä»¬çš„ç®—æ³•æ‹Ÿåˆè®­ç»ƒé›†ï¼ŒåŒæ—¶ä¸å‡ºç°è¿‡æ‹Ÿåˆæ›´ä¸ºå›°éš¾ã€‚è®°ä½ï¼Œæˆ‘ä»¬è¿™é‡Œæ˜¯æƒ³è¦çŸ¥é“æˆ‘ä»¬æ˜¯å¦ä¼šè®©ç®—æ³•è¿‡æ‹Ÿåˆï¼Œå‡†ç¡®ç‡å¦‚ä½•å¹¶ä¸æ˜¯å…³é”®ï¼
æºç åˆ†äº«https://github.com/voidking/ud120-projects
ä¹¦ç­¾æœºå™¨å­¦ä¹ å…¥é—¨https://cn.udacity.com/course/intro-to-machine-learning--ud120
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>è½¬è½½</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>æ–‡æœ¬å­¦ä¹ è¿·ä½ é¡¹ç›®</title>
    <url>/dev-ml-text-learning/</url>
    <content><![CDATA[é¡¹ç›®ç®€ä»‹æœ¬èŠ‚è¯¾å¼€å§‹ï¼Œä½ ä½¿ç”¨å¤§é‡ç›‘ç£å¼åˆ†ç±»ç®—æ³•ï¼Œæ ¹æ®ä½œè€…æ¥è¯†åˆ«é‚®ä»¶ã€‚ åœ¨è¿™äº›é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¸ºä½ åšäº†é¢„å¤„ç†ï¼Œå°†è¾“å…¥é‚®ä»¶è½¬æ¢åˆ° TfIdf ä¸­ï¼Œè¿™æ ·ä½ å°±èƒ½å‘ç®—æ³•æä¾›è¿™äº›é‚®ä»¶äº†ã€‚ ç°åœ¨ï¼Œä½ å°†è‡ªè¡Œå®Œæˆé¢„å¤„ç†å·¥ä½œï¼Œä»¥ä¾¿ä½ èƒ½ä»åŸå§‹æ•°æ®ç›´æ¥å¾—åˆ°ç»è¿‡å¤„ç†çš„ç‰¹å¾ã€‚
ä½ å°†å¾—åˆ°ä¸¤ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼šä¸€ä¸ªåŒ…å«æ¥è‡ª Sara çš„æ‰€æœ‰é‚®ä»¶ï¼Œä¸€ä¸ªåŒ…å« Chris çš„é‚®ä»¶ã€‚ ä½ è¿˜å°†è®¿é—® parseOutText() å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ä½œä¸ºå‚æ•°çš„å·²è¯»é‚®ä»¶ï¼Œå¹¶ä¸”è¿”å›åŒ…å«é‚®ä»¶ä¸­æ‰€æœ‰ï¼ˆè¢«è¯å¹²åŒ–çš„ï¼‰å•è¯çš„å­—ç¬¦ä¸²ã€‚


é¡¹ç›®å‡†å¤‡# ä¸‹è½½è¯­æ–™åº“import nltknltk.download()# åœæ­¢è¯from nltk.corpus import stopwordssw = stopwords.words(&#x27;english&#x27;)print len(sw)# è¯å¹²åŒ–from nltk.stem.snowball import SnowballStemmerstemmer = SnowballStemmer(&#x27;english&#x27;)stemmer.stem(&#x27;responsiveness&#x27;)stemmer.stem(&#x27;responsivity&#x27;)stemmer.stem(&#x27;unresponsive&#x27;)

parseOutText()ä½ å°†ä»çƒ­èº«ä¹ é¢˜å¼€å§‹äº†è§£ parseOutText()ã€‚ å‰å¾€å·¥å…·ç›®å½•å¹¶è¿è¡Œ parse_out_email_text.pyï¼Œè¯¥ç¨‹åºåŒ…å« parseOutText() å’Œä¸€å°æµ‹è¯•é‚®ä»¶ï¼Œç”¨ä»¥è¿è¡Œæ­¤å‡½æ•°ã€‚
parseOutText() è·å¾—è¢«æ‰“å¼€çš„é‚®ä»¶ï¼Œç„¶åä»…è¿”å›æ–‡å­—éƒ¨åˆ†ï¼Œé™¤å»äº†å¯èƒ½å‡ºç°åœ¨é‚®ä»¶å¼€å¤´çš„å…ƒæ•°æ®ï¼Œæ¥ä¸‹æ¥å°±æ˜¯é‚®ä»¶æ­£æ–‡äº†ã€‚ æˆ‘ä»¬ç°åœ¨å·²ç»è®¾ç½®å¥½äº†è¿™ä¸€è„šæœ¬ï¼Œè¿™æ ·å®ƒå°±èƒ½å°†é‚®ä»¶æ­£æ–‡æ‰“å°åˆ°å±å¹•ä¸Šï¼Œä½ è¿è¡Œ parseOutText() æ—¶ä¼šå¾—åˆ°æ€æ ·çš„æ­£æ–‡ï¼Ÿç­”ï¼šHi Everyone  If you can read this message youre properly using parseOutText  Please proceed to the next part of the project
åœ¨ parseOutText() ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹æ³¨é‡Šï¼š 
# words = text_string 

å¢å¼º parseOutText() ï¼Œè¿™æ ·è¿”å›çš„å­—ç¬¦ä¸²å°±æœ‰äº†æ‰€æœ‰å› ä½¿ç”¨ SnowballStemmerï¼ˆä½¿ç”¨ nltk åŒ…ï¼Œå¯åœ¨ http://www.nltk.org/howto/stem.html æ‰¾åˆ°æˆ‘å‘ç°æœ‰ç”¨çš„ä¸€äº›ç¤ºä¾‹ï¼‰è€Œè·å¾—çš„è¯å¹²åŒ–å•è¯ã€‚
é‡æ–°è¿è¡Œ parse_out_email_text.pyï¼Œè¯¥ç¨‹åºå°†ä½¿ç”¨ä½ æ›´æ–°çš„ parseOutText() å‡½æ•°ã€‚ä½ ç°åœ¨çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿç­”ï¼šhi everyon if you can read this messag your proper use parseouttext pleas proceed to the next part of the project
æç¤ºï¼šä½ éœ€è¦å°†å­—ç¬¦ä¸²åˆ†è§£æˆå•ä¸ªå•è¯ï¼Œè¯å¹²åŒ–æ¯ä¸ªå•è¯ï¼Œç„¶åå†å°†æ‰€æœ‰å•è¯é‡æ–°ç»„åˆæˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚
æ¸…é™¤â€œç­¾åæ–‡å­—â€åœ¨ text_learning/vectorize_text.py ä¸­ï¼Œä½ å°†è¿­ä»£æ‰€æœ‰æ¥è‡ª Chris å’Œ Sara çš„é‚®ä»¶ã€‚ å°†æ¯å°å·²è¯»é‚®ä»¶æä¾›ç»™ parseOutText() å¹¶è¿”å›è¯å¹²åŒ–çš„æ–‡æœ¬å­—ç¬¦ä¸²ã€‚ç„¶ååšä»¥ä¸‹ä¸¤ä»¶äº‹ï¼š

åˆ é™¤ç­¾åæ–‡å­—ï¼ˆâ€œsaraâ€ã€â€œshackletonâ€ã€â€œchrisâ€ã€â€œgermaniâ€â€”â€”å¦‚æœä½ çŸ¥é“ä¸ºä»€ä¹ˆæ˜¯â€œgermaniâ€è€Œä¸æ˜¯â€œgermanyâ€ï¼Œä½ å°†è·å¾—åŠ åˆ†ï¼‰
å‘ word_data æ·»åŠ æ›´æ–°çš„æ–‡æœ¬å­—ç¬¦ä¸²â€”â€”å¦‚æœé‚®ä»¶æ¥è‡ª Saraï¼Œå‘ from_data æ·»åŠ  0ï¼ˆé›¶ï¼‰ï¼Œå¦‚æœæ˜¯ Chris å†™çš„é‚®ä»¶ï¼Œåˆ™æ·»åŠ  1ã€‚

å®Œæˆæ­¤æ­¥éª¤åï¼Œä½ åº”è¯¥æœ‰ä¸¤ä¸ªåˆ—è¡¨ï¼šä¸€ä¸ªåŒ…å«äº†æ¯å°é‚®ä»¶è¢«è¯å¹²åŒ–çš„æ­£æ–‡ï¼Œç¬¬äºŒä¸ªåº”è¯¥åŒ…å«ç”¨æ¥ç¼–ç ï¼ˆé€šè¿‡ 0 æˆ– 1ï¼‰è°æ˜¯é‚®ä»¶ä½œè€…çš„æ ‡ç­¾ã€‚
å¯¹æ‰€æœ‰é‚®ä»¶è¿è¡Œç¨‹åºéœ€è¦èŠ±ä¸€äº›æ—¶é—´ï¼ˆ5 åˆ†é’Ÿæˆ–æ›´é•¿æ—¶é—´ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ª temp_counterï¼Œå°†ç¬¬ 200 å°ä¹‹åçš„é‚®ä»¶åˆ‡å‰²æ‰ã€‚ å½“ç„¶ï¼Œä¸€åˆ‡å°±ç»ªåï¼Œä½ ä¼šå¸Œæœ›å¯¹æ•´ä¸ªæ•°æ®é›†è¿è¡Œç¨‹åºã€‚
åœ¨ä»¥ä¸‹æ–¹æ¡†ä¸­ï¼Œæ”¾å…¥ä½ å¾—åˆ°çš„ word_data[152] å­—ç¬¦ä¸²ã€‚ç­”ï¼štjonesnsf stephani and sam need nymex calendar
è¿›è¡Œ TfIdfä½¿ç”¨ sklearn TfIdf è½¬æ¢å°† word_data è½¬æ¢ä¸º tf-idf çŸ©é˜µã€‚åˆ é™¤è‹±æ–‡åœæ­¢è¯ã€‚
ä½ å¯ä»¥ä½¿ç”¨ get_feature_names() è®¿é—®å•è¯å’Œç‰¹å¾æ•°å­—ä¹‹é—´çš„æ˜ å°„ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªåŒ…å«è¯æ±‡è¡¨æ‰€æœ‰å•è¯çš„åˆ—è¡¨ã€‚æœ‰å¤šå°‘ä¸åŒçš„å•è¯ï¼Ÿç­”ï¼š
ä½  TfId ä¸­çš„å•è¯ç¼–å· 34597 æ˜¯ä»€ä¹ˆï¼Ÿç­”ï¼šstephen
éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œå¦‚æœé—®é¢˜æ˜¯â€œå•è¯ç¼–å· 100 æ˜¯ä»€ä¹ˆâ€ï¼Œæˆ‘ä»¬è‚¯å®šä¼šæŸ¥æ‰¾å¯¹åº” vocab_list[100] çš„å•è¯ã€‚æœ‰æ—¶å€™ï¼Œé›¶ç´¢å¼•æ•°ç»„è°ˆè®ºèµ·æ¥éå¸¸ä¸å¥½ç†è§£ã€‚
æºç åˆ†äº«https://github.com/voidking/ud120-projects
ä¹¦ç­¾æœºå™¨å­¦ä¹ å…¥é—¨https://cn.udacity.com/course/intro-to-machine-learning--ud120
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>è½¬è½½</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>ç‰¹å¾ç¼©æ”¾è¿·ä½ é¡¹ç›®</title>
    <url>/dev-ml-feature-scaling/</url>
    <content><![CDATA[é¡¹ç›®ç®€ä»‹åœ¨ä¸Šä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œä½ å°†å®‰ç„¶äººç‰©çš„è´¢åŠ¡æ•°æ®ä½œä¸ºè¾“å…¥ï¼Œå¯¹è¿™äº›äººç‰©æ‰§è¡Œäº† k-å‡å€¼èšç±»ã€‚æˆ‘ä»¬å°†æ›´æ–°é‚£éƒ¨åˆ†å·¥ä½œï¼Œä»¥åŒ…å«è¢«ç¼©æ”¾çš„ç‰¹å¾ï¼Œçœ‹çœ‹ä¼šæœ‰æ€æ ·çš„å˜åŒ–ã€‚


ç¼©æ”¾ç±»å‹å›é¡¾ K-å‡å€¼èšç±»è¿·ä½ é¡¹ç›®æœ€åä¸€éƒ¨åˆ†ã€‚æˆ‘ä»¬å½“æ—¶æ²¡æœ‰è¯¦ç»†æ¢è®¨ç¼©æ”¾ç®—æ³•è€Œéƒ¨ç½²äº†ç¼©æ”¾ï¼Œä½†æ˜¯ä½ ç°åœ¨æ›´åŠ äº†è§£å…·ä½“çš„ç¼©æ”¾ç®—æ³•äº†ï¼Œå¹¶ä¸”å¯ä»¥åˆ†æå‡ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å“ªç±»ç¼©æ”¾ã€‚
å“ªç±»ç¼©æ”¾è¢«éƒ¨ç½²äº†ï¼Ÿ
è®¡ç®—é‡ç¼©æ”¾ç‰¹å¾å¯¹ä½ åœ¨ä¸Šä¸€èŠ‚è¯¾ä¸­çš„ k å‡å€¼èšç±»ä»£ç çš„â€œsalaryâ€å’Œâ€œexercised_stock_optionsâ€ç‰¹å¾ï¼ˆä»…è¿™ä¸¤é¡¹ç‰¹å¾ï¼‰è¿ç”¨ç‰¹å¾ç¼©æ”¾ã€‚ åŸå§‹å€¼ä¸º 20 ä¸‡ç¾å…ƒçš„â€œsalaryâ€ç‰¹å¾å’ŒåŸå§‹å€¼ä¸º 1 ç™¾ä¸‡ç¾å…ƒçš„â€œexercised_stock_optionsâ€ç‰¹å¾çš„é‡ç¼©æ”¾å€¼ä¼šæ˜¯å¤šå°‘ï¼Ÿ ï¼ˆç¡®ä¿å‘ˆç°æµ®ç‚¹å‹è€Œéæ•´æ•°å‹æ•°å­—ï¼ï¼‰ç­”ï¼š0.17962407ï¼Œ0.02902059
ä½•æ—¶éƒ¨ç½²ç‰¹å¾ç¼©æ”¾æœ‰äººå¯èƒ½ä¼šè´¨ç–‘æ˜¯å¦å¿…é¡»é‡ç¼©æ”¾è´¢åŠ¡æ•°æ®ï¼Œä¹Ÿè®¸æˆ‘ä»¬å¸Œæœ› 10 ä¸‡ç¾å…ƒçš„å·¥èµ„å’Œ 4 åƒä¸‡ç¾å…ƒçš„è‚¡ç¥¨æœŸæƒä¹‹é—´å­˜åœ¨å·¨å¤§å·®å¼‚ã€‚å¦‚æœæˆ‘ä»¬æƒ³åŸºäºâ€œfrom_messagesâ€ï¼ˆä»ä¸€ä¸ªç‰¹å®šçš„é‚®ç®±å¸å·å‘å‡ºçš„ç”µå­é‚®ä»¶æ•°ï¼‰å’Œâ€œsalaryâ€æ¥è¿›è¡Œé›†ç¾¤åŒ–ä¼šæ€æ ·ï¼Ÿ åœ¨è¿™ç§æƒ…å½¢ä¸‹ï¼Œç‰¹å¾ç¼©æ”¾æ˜¯ä¸å¿…è¦çš„ï¼Œè¿˜æ˜¯é‡è¦çš„ï¼Ÿç­”ï¼šé‡è¦çš„ã€‚
æºç åˆ†äº«https://github.com/voidking/ud120-projects
ä¹¦ç­¾æœºå™¨å­¦ä¹ å…¥é—¨https://cn.udacity.com/course/intro-to-machine-learning--ud120
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>è½¬è½½</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>K-å‡å€¼èšç±»è¿·ä½ é¡¹ç›®</title>
    <url>/dev-ml-k-means/</url>
    <content><![CDATA[é¡¹ç›®ç®€ä»‹åœ¨æ­¤é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¼šå°† k-å‡å€¼èšç±»åº”ç”¨äºå®‰ç„¶è´¢åŠ¡æ•°æ®ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬æœ€ç»ˆçš„ç›®æ ‡æ˜¯è¯†åˆ«ç›¸å…³äººå‘˜ï¼›æ—¢ç„¶æˆ‘ä»¬æœ‰äº†å·²æ ‡è®°æ•°æ®ï¼Œè°ƒç”¨ k-å‡å€¼èšç±»è¿™ç§éç›‘ç£å¼æ–¹æ³•å°±ä¸æˆé—®é¢˜ã€‚
å°½ç®¡å¦‚æ­¤ï¼Œåœ¨æ­¤é¡¹ç›®ä¸­ï¼Œä½ ä»ç„¶ä¼šè·å¾— k-å‡å€¼çš„ä¸€äº›å®é™…æ“ä½œç»éªŒå¹¶å°è¯•ç‰¹å¾ç¼©æ”¾ï¼Œè¿™ä¼šè®©ä½ é¢„å…ˆäº†è§£ä¸‹ä¸€è¯¾çš„ææ–™ã€‚å¯åœ¨æ­¤å¤„æ‰¾åˆ°å®‰ç„¶æ•°æ®é›†ã€‚


èšç±»ç‰¹å¾å¯ä»¥åœ¨ k_means/k_means_cluster.py ä¸­æ‰¾åˆ°åˆå§‹ä»£ç ï¼Œè¯¥ä»£ç ä¼šè¯»å…¥ç”µå­é‚®ä»¶ + è´¢åŠ¡ (E+F) æ•°æ®é›†ï¼Œè®©æˆ‘ä»¬ä¸ºèšç±»åšå¥½å‡†å¤‡ã€‚é¦–å…ˆä½ å°†åŸºäºä¸¤ä¸ªè´¢åŠ¡ç‰¹å¾å¼€å§‹æ‰§è¡Œ K-meansï¼Œè¯·æŸ¥çœ‹ä»£ç å¹¶ç¡®å®šä»£ç ä½¿ç”¨å“ªäº›ç‰¹å¾è¿›è¡Œèšç±»ã€‚
è¿è¡Œä»£ç ï¼Œè¿™å°†åˆ›å»ºæ•°æ®çš„æ•£ç‚¹å›¾ã€‚ä»”ç»†æ€è€ƒå¦‚æœåˆ›å»ºä¸¤ä¸ªèšç±»ï¼Œä½ é¢„æœŸä¼šäº§ç”Ÿå“ªä¸¤ä¸ªèšç±»ã€‚ç­”ï¼šsalaryï¼Œexercised_stock_options
éƒ¨ç½²èšç±»åœ¨ financial_features æ•°æ®ä¸Šéƒ¨ç½² k-å‡å€¼èšç±»ï¼Œå¹¶å°† 2 ä¸ªèšç±»æŒ‡å®šä¸ºå‚æ•°ã€‚å°†èšç±»é¢„æµ‹å­˜å‚¨åˆ°åä¸º pred çš„åˆ—è¡¨ï¼Œä»¥ä¾¿è„šæœ¬åº•éƒ¨çš„ Draw() å‘½ä»¤æ­£å¸¸å·¥ä½œã€‚åœ¨å¼¹å‡ºçš„æ•£ç‚¹å›¾ä¸­ï¼Œèšç±»æ˜¯å¦æ˜¯ä½ é¢„æœŸçš„ï¼Ÿ
ä½¿ç”¨ 3 ä¸ªç‰¹å¾èšç±»å‘ç‰¹å¾åˆ—è¡¨ï¼ˆfeatures_listï¼‰ä¸­æ·»åŠ ç¬¬ä¸‰ä¸ªç‰¹å¾ï¼šâ€œtotal_paymentsâ€ã€‚ç°åœ¨ä½¿ç”¨ 3 ä¸ªï¼Œè€Œä¸æ˜¯ 2 ä¸ªè¾“å…¥ç‰¹å¾é‡æ–°è¿è¡Œèšç±»ï¼ˆå¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥åªæ˜¾ç¤ºåŸæ¥çš„ 2 ä¸ªç»´åº¦ï¼‰ã€‚å°†èšç±»ç»˜å›¾ä¸ä½¿ç”¨ 2 ä¸ªè¾“å…¥ç‰¹å¾è·å–çš„ç»˜å›¾è¿›è¡Œæ¯”è¾ƒã€‚æ˜¯å¦æœ‰ä»»ä½•ç‚¹åˆ‡æ¢ç¾¤é›†ï¼Ÿå¤šå°‘ä¸ªç‚¹ï¼Ÿè¿™ç§ä½¿ç”¨ 3 ä¸ªç‰²çš„æ–°èšç±»æ— æ³•é€šè¿‡è‚‰çœ¼åŠ ä»¥çŒœæµ‹â€”â€”å¿…é¡»é€šè¿‡ k-å‡å€¼ç®—æ³•æ‰èƒ½è¯†åˆ«å®ƒã€‚
ï¼ˆä½ éœ€è¦æ›´æ”¹åˆ›å»ºæ•£ç‚¹å›¾çš„ä»£ç ï¼Œä»¥ä¾¿å®¹çº³ 3 ä¸ªç‰¹å¾è€Œä¸æ˜¯ 2 ä¸ªï¼Œæœ‰å…³æ“ä½œè¯´æ˜ï¼Œè¯·å‚é˜…åˆå§‹ä»£ç ä¸­çš„æ³¨é‡Šã€‚ï¼‰
è‚¡ç¥¨æœŸæƒèŒƒå›´åœ¨ä¸‹ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºç‰¹å¾ç¼©æ”¾ã€‚å®ƒæ˜¯ä¸€ç§ç‰¹å¾é¢„å¤„ç†ï¼Œåº”åœ¨æ‰§è¡ŒæŸäº›åˆ†ç±»å’Œå›å½’ä»»åŠ¡ä¹‹å‰æ‰§è¡Œã€‚è¿™é‡Œåªæ˜¯å¿«é€Ÿé¢„è§ˆï¼Œæ¦‚è¿°ç‰¹å¾ç¼©æ”¾çš„åŠŸèƒ½ã€‚
æœ¬ä¾‹ä¸­ä½¿ç”¨çš„â€œexercised_stock_optionsâ€ç‰¹å¾å–çš„æœ€å¤§å€¼å’Œæœ€å°å€¼æ˜¯ä»€ä¹ˆï¼Ÿ
ï¼ˆæ³¨æ„ï¼šå¦‚æœæŸ¥çœ‹ finance_featuresï¼Œä¼šå‘ç°æœ‰äº›â€œNaNâ€å€¼å·²è¢«æ¸…ç†å¹¶è¢«é›¶å€¼å–ä»£â€”â€”å› æ­¤å°½ç®¡é‚£äº›å€¼å¯èƒ½çœ‹èµ·æ¥åƒæ˜¯æœ€å°å€¼ï¼Œä½†å´å…·æœ‰æ¬ºéª—æ€§ï¼Œå› æ­¤å®ƒä»¬æ›´åƒæ˜¯ä½ ä¸å…·æœ‰å…¶ç›¸å…³ä¿¡æ¯è€Œå¿…é¡»å¡«å…¥ä¸€ä¸ªæ•°å­—çš„ç‚¹ã€‚å¯¹äºæ­¤é—®é¢˜ï¼Œè¯·è¿”å› data_dict å¹¶æŸ¥æ‰¾æ˜¾ç¤ºçš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œå¿½ç•¥æ‰€æœ‰â€œNaNâ€æ¡ç›®ã€‚ï¼‰
è–ªé…¬èŒƒå›´â€œsalaryâ€å–çš„æœ€å¤§å€¼å’Œæœ€å°å€¼æ˜¯ä»€ä¹ˆï¼Ÿ
ï¼ˆæ³¨æ„ï¼šä¸ä¸Šä¸€ä¸ªæµ‹è¯•é¢˜ä¸­çš„æ³¨æ„äº‹é¡¹ç›¸åŒã€‚å¦‚æœæŸ¥çœ‹ finance_featuresï¼Œä¼šå‘ç°æœ‰äº›â€œNaNâ€å€¼å·²è¢«æ¸…ç†å¹¶è¢«é›¶å€¼å–ä»£â€”â€”å› æ­¤å°½ç®¡é‚£äº›å€¼å¯èƒ½çœ‹èµ·æ¥åƒæ˜¯æœ€å°å€¼ï¼Œä½†å´å…·æœ‰æ¬ºéª—æ€§ï¼Œå› æ­¤å®ƒä»¬æ›´åƒæ˜¯ä½ ä¸å…·æœ‰å…¶ç›¸å…³ä¿¡æ¯è€Œå¿…é¡»å¡«å…¥ä¸€ä¸ªæ•°å­—çš„ç‚¹ã€‚å¯¹äºæ­¤é—®é¢˜ï¼Œè¯·è¿”å› data_dict å¹¶æŸ¥æ‰¾æ˜¾ç¤ºçš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œå¿½ç•¥æ‰€æœ‰â€œNaNâ€æ¡ç›®ã€‚ï¼‰
èšç±»æ›´æ”¹ä¸‹ä¸€å¼ å¹»ç¯ç‰‡ä¸Šçš„ç»˜å›¾ä¼šæ˜¾ç¤ºä½ åˆšåˆšç¼–å†™çš„èšç±»ä»£ç ï¼Œä½†åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨æ‰§è¡Œèšç±»ä¹‹å‰åº”ç”¨äº†ç‰¹å¾ç¼©æ”¾ã€‚
æˆ‘ä»¬å¸Œæœ›ä½ å°†ï¼ˆä¸‹ä¸€å¼ å¹»ç¯ç‰‡ä¸Šï¼‰ä½¿ç”¨ç¼©æ”¾çš„èšç±»ä¸åœ¨èšç±»ç®—æ³•ä¸­ä½¿ç”¨*ä¸¤ä¸ªç‰¹å¾æ—¶ç”Ÿæˆçš„ç¬¬ä¸€ä¸ªèšç±»å¯è§†åŒ–æ•ˆæœè¿›è¡Œæ¯”è¾ƒã€‚
è¯·æ³¨æ„ï¼Œç‰¹å¾èŒƒå›´ç°åœ¨å·²æ›´æ”¹ä¸º [0.0, 1.0]ã€‚è¿™æ˜¯æˆ‘ä»¬æ‰€åšçš„å”¯ä¸€æ›´æ”¹ã€‚
åœ¨ä¸‹ä¸€è¯¾ä¸­ï¼Œä½ å°†è¯¦ç»†äº†è§£ç‰¹å¾ç¼©æ”¾çš„å«ä¹‰ï¼Œä½†ç°åœ¨ï¼Œåªéœ€æŸ¥çœ‹å¯¹èšç±»äº§ç”Ÿçš„å½±å“â€“å“ªä¸ª/å“ªäº›ç‚¹ä¼šåˆ‡æ¢å®ƒä»¬å…³è”çš„èšç±»ï¼Ÿ 
æºç åˆ†äº«https://github.com/voidking/ud120-projects
ä¹¦ç­¾æœºå™¨å­¦ä¹ å…¥é—¨https://cn.udacity.com/course/intro-to-machine-learning--ud120
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>è½¬è½½</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>å¼‚å¸¸å€¼è¿·ä½ é¡¹ç›®</title>
    <url>/dev-ml-outliers/</url>
    <content><![CDATA[é¡¹ç›®ç®€ä»‹æ­¤é¡¹ç›®æœ‰ä¸¤éƒ¨åˆ†ã€‚åœ¨ç¬¬ä¸€éƒ¨åˆ†ä¸­å°†è¿è¡Œå›å½’ï¼Œç„¶åè¯†åˆ«å¹¶åˆ é™¤å…·æœ‰æœ€å¤§æ®‹å·®çš„ 10% çš„ç‚¹ã€‚ç„¶åï¼Œæ ¹æ® Sebastian åœ¨è¯¾ç¨‹è§†é¢‘ä¸­æ‰€å»ºè®®çš„ï¼Œä»æ•°æ®é›†ä¸­åˆ é™¤é‚£äº›å¼‚å¸¸å€¼å¹¶é‡æ–°æ‹Ÿåˆå›å½’ã€‚
åœ¨ç¬¬äºŒéƒ¨åˆ†ä¸­ï¼Œä½ å°†ç†Ÿæ‚‰å®‰ç„¶è´¢åŠ¡æ•°æ®ä¸­çš„ä¸€äº›å¼‚å¸¸å€¼ï¼Œå¹¶ä¸”äº†è§£æ˜¯å¦/å¦‚ä½•åˆ é™¤å®ƒä»¬ã€‚


å¸¦æœ‰å¼‚å¸¸å€¼Sebastian å‘æˆ‘ä»¬æè¿°äº†æ”¹å–„å›å½’çš„ä¸€ä¸ªç®—æ³•ï¼Œä½ å°†åœ¨æ­¤é¡¹ç›®ä¸­å®ç°è¯¥ç®—æ³•ã€‚ä½ å°†åœ¨æ¥ä¸‹æ¥çš„å‡ ä¸ªæµ‹è¯•é¢˜ä¸­è¿ç”¨è¿™ä¸€ç®—æ³•ã€‚æ€»çš„æ¥è¯´ï¼Œä½ å°†åœ¨æ‰€æœ‰è®­ç»ƒç‚¹ä¸Šæ‹Ÿåˆå›å½’ã€‚èˆå¼ƒåœ¨å®é™… y å€¼å’Œå›å½’é¢„æµ‹ y å€¼ä¹‹é—´æœ‰æœ€å¤§è¯¯å·®çš„ 10% çš„ç‚¹ã€‚
å…ˆå¼€å§‹è¿è¡Œåˆå§‹ä»£ç  (outliers/outlier_removal_regression.py) å’Œå¯è§†åŒ–ç‚¹ã€‚ä¸€äº›å¼‚å¸¸å€¼åº”è¯¥ä¼šè·³å‡ºæ¥ã€‚éƒ¨ç½²ä¸€ä¸ªçº¿æ€§å›å½’ï¼Œå…¶ä¸­çš„å‡€å€¼æ˜¯ç›®æ ‡ï¼Œè€Œç”¨æ¥è¿›è¡Œé¢„æµ‹çš„ç‰¹å¾æ˜¯äººçš„å¹´é¾„ï¼ˆè®°å¾—åœ¨è®­ç»ƒæ•°æ®ä¸Šè¿›è¡Œè®­ç»ƒï¼ï¼‰ã€‚
æ•°æ®ç‚¹ä¸»ä½“çš„æ­£ç¡®æ–œç‡æ˜¯ 6.25ï¼ˆæˆ‘ä»¬ä¹‹æ‰€ä»¥çŸ¥é“ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ä½¿ç”¨è¯¥å€¼æ¥ç”Ÿæˆæ•°æ®ï¼‰ï¼›ä½ çš„å›å½’çš„æ–œç‡æ˜¯å¤šå°‘ï¼Ÿç­”ï¼š5.07793064
å½“ä½¿ç”¨å›å½’åœ¨æµ‹è¯•æ•°æ®ä¸Šè¿›è¡Œé¢„æµ‹æ—¶ï¼Œä½ è·å¾—çš„åˆ†æ•°æ˜¯å¤šå°‘ï¼Ÿç­”ï¼š0.878262470366
æ¸…ç†å¼‚å¸¸å€¼åä½ å°†åœ¨ outliers/outlier_cleaner.py ä¸­æ‰¾åˆ° outlierCleaner() å‡½æ•°çš„éª¨æ¶å¹¶å‘å…¶å¡«å……æ¸…ç†ç®—æ³•ã€‚ç”¨åˆ°çš„ä¸‰ä¸ªå‚æ•°æ˜¯ï¼špredictions æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼ŒåŒ…å«å›å½’çš„é¢„æµ‹ç›®æ ‡ï¼›ages ä¹Ÿæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼ŒåŒ…å«è®­ç»ƒé›†å†…çš„å¹´é¾„ï¼›net_worths æ˜¯è®­ç»ƒé›†å†…å‡€å€¼çš„å®é™…å€¼ã€‚æ¯ä¸ªåˆ—è¡¨ä¸­åº”æœ‰ 90 ä¸ªå…ƒç´ ï¼ˆå› ä¸ºè®­ç»ƒé›†å†…æœ‰ 90 ä¸ªç‚¹ï¼‰ã€‚ä½ çš„å·¥ä½œæ˜¯è¿”å›ä¸€ä¸ªåå«cleaned_data çš„åˆ—è¡¨ï¼Œè¯¥åˆ—è¡¨ä¸­åªæœ‰ 81 ä¸ªå…ƒç´ ï¼Œä¹Ÿå³é¢„æµ‹å€¼å’Œå®é™…å€¼ (net_worths) å…·æœ‰æœ€å°è¯¯å·®çš„ 81 ä¸ªè®­ç»ƒç‚¹ (90 * 0.9 = 81)ã€‚cleaned_data çš„æ ¼å¼åº”ä¸ºä¸€ä¸ªå…ƒç»„åˆ—è¡¨ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç»„çš„å½¢å¼å‡ä¸º (age, net_worth, error)ã€‚
ä¸€æ—¦æ­¤æ¸…ç†å‡½æ•°è¿è¡Œèµ·æ¥ï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°å›å½’ç»“æœå‘ç”Ÿäº†å˜åŒ–ã€‚æ–°æ–œç‡æ˜¯å¤šå°‘ï¼Ÿæ˜¯å¦æ›´ä¸ºæ¥è¿‘ 6.25 è¿™ä¸ªâ€œæ­£ç¡®â€ç»“æœï¼Ÿç­”ï¼š6.36859481
å½“ä½¿ç”¨å›å½’åœ¨æµ‹è¯•é›†ä¸Šè¿›è¡Œé¢„æµ‹æ—¶ï¼Œæ–°çš„åˆ†æ•°æ˜¯å¤šå°‘ï¼Ÿç­”ï¼š0.983189455396
å®‰ç„¶å¼‚å¸¸å€¼åœ¨æœ¬èŠ‚å›å½’è¯¾ç¨‹çš„è¿·ä½ é¡¹ç›®ä¸­ï¼Œä½ ä½¿ç”¨å›å½’æ¥é¢„æµ‹å®‰ç„¶é›‡å‘˜çš„å¥–é‡‘ã€‚å¦‚ä½ æ‰€è§ï¼Œå•ä¸€çš„å¼‚å¸¸å€¼éƒ½å¯ä»¥å¯¹å›å½’ç»“æœé€ æˆå¾ˆå¤§çš„å·®å¼‚ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¹‹å‰æ²¡æœ‰è·Ÿä½ è¯´è¿‡çš„æ˜¯ï¼Œä½ åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„æ•°æ®é›†å·²ç»è¢«æ¸…ç†è¿‡æ˜æ˜¾çš„å¼‚å¸¸å€¼äº†ã€‚ç¬¬ä¸€æ¬¡çœ‹åˆ°æ•°æ®é›†æ—¶ï¼Œè¯†åˆ«å¹¶æ¸…é™¤å¼‚å¸¸å€¼æ˜¯ä½ ä¸€ç›´åº”è¯¥æ€è€ƒçš„é—®é¢˜ï¼Œè€Œä½ ç°åœ¨å·²ç»é€šè¿‡å®‰ç„¶æ•°æ®æœ‰äº†ä¸€å®šçš„å®è·µç»éªŒã€‚
ä½ å¯ä»¥åœ¨ outliers/enron_outliers.py ä¸­æ‰¾åˆ°åˆå§‹ä»£ç ï¼Œè¯¥ä»£ç è¯»å…¥æ•°æ®ï¼ˆä»¥å­—å…¸å½¢å¼ï¼‰å¹¶å°†ä¹‹è½¬æ¢ä¸ºé€‚åˆ sklearn çš„ numpy æ•°ç»„ã€‚ç”±äºä»å­—å…¸ä¸­æå–å‡ºäº†ä¸¤ä¸ªç‰¹å¾ï¼ˆâ€œå·¥èµ„â€å’Œâ€œå¥–é‡‘â€ï¼‰ï¼Œå¾—å‡ºçš„ numpy æ•°ç»„ç»´åº¦å°†æ˜¯ N x 2ï¼Œå…¶ä¸­ N æ˜¯æ•°æ®ç‚¹æ•°ï¼Œ2æ˜¯ç‰¹å¾æ•°ã€‚å¯¹æ•£ç‚¹å›¾è€Œè¨€ï¼Œè¿™æ˜¯éå¸¸å®Œç¾çš„è¾“å…¥ï¼›æˆ‘ä»¬å°†ä½¿ç”¨ matplotlib.pyplot æ¨¡å—æ¥ç»˜åˆ¶å›¾å½¢ã€‚ï¼ˆåœ¨æœ¬è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯¹æ‰€æœ‰å¯è§†åŒ–å‡ä½¿ç”¨ pyplotã€‚ï¼‰å°†è¿™äº›è¡Œæ·»åŠ è‡³è„šæœ¬åº•éƒ¨ï¼Œç”¨ä»¥ç»˜åˆ¶æ•£ç‚¹å›¾ï¼š
for point in data:    salary = point[0]    bonus = point[1]    matplotlib.pyplot.scatter( salary, bonus )matplotlib.pyplot.xlabel(&quot;salary&quot;)matplotlib.pyplot.ylabel(&quot;bonus&quot;)matplotlib.pyplot.show()

å¦‚ä½ æ‰€è§ï¼Œå¯è§†åŒ–æ˜¯æŸ¥æ‰¾å¼‚å¸¸å€¼æœ€å¼ºå¤§çš„å·¥å…·ä¹‹ä¸€ï¼
è¯†åˆ«æœ€å¤§çš„å®‰ç„¶å¼‚å¸¸å€¼æœ‰ä¸€ä¸ªå¼‚å¸¸å€¼åº”è¯¥ä¼šç«‹å³è·³å‡ºæ¥ã€‚ç°åœ¨çš„é—®é¢˜æ˜¯è¯†åˆ«æ¥æºã€‚æˆ‘ä»¬å‘ç°åŸå§‹æ•°æ®æºå¯¹äºè¯†åˆ«å·¥ä½œéå¸¸æœ‰å¸®åŠ©ï¼›ä½ å¯ä»¥åœ¨ final_project/enron61702insiderpay.pdf ä¸­æ‰¾åˆ°è¯¥ PDFã€‚
è¯¥æ•°æ®ç‚¹çš„å­—å…¸é”®åç§°æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆä¾‹å¦‚ï¼šå¦‚æœæ˜¯ Ken Layï¼Œé‚£ä¹ˆç­”æ¡ˆå°±æ˜¯â€œLAY KENNETH Lâ€ï¼‰ã€‚æœ€å¤§ Enron å¼‚å¸¸å€¼çš„å­—å…¸ key å€¼æ˜¯ä»€ä¹ˆï¼Ÿ
ç§»é™¤å®‰ç„¶å¼‚å¸¸å€¼åœ¨æ­¤æ•°æ®é›†ä¸Šè¿è¡Œæœºå™¨å­¦ä¹ æ—¶ï¼Œè¯¥å¼‚å¸¸å€¼æ˜¯å¦åƒæˆ‘ä»¬åº”è¯¥åŒ…å«çš„æ•°æ®ç‚¹ï¼Ÿæ˜¯å¦åº”è¯¥åˆ é™¤å®ƒï¼Ÿç­”ï¼šåº”è¯¥ç§»é™¤
ä»å­—å…¸ä¸­å¿«é€Ÿåˆ é™¤é”®å€¼å¯¹çš„ä¸€ç§æ–¹æ³•å¦‚ä»¥ä¸‹è¡Œæ‰€ç¤ºï¼š
dictionary.pop( key, 0 )

å†™ä¸‹è¿™æ ·çš„ä¸€è¡Œä»£ç ï¼ˆä½ å¿…é¡»ä¿®æ”¹å­—å…¸å’Œé”®åï¼‰å¹¶åœ¨è°ƒç”¨ featureFormat() ä¹‹å‰åˆ é™¤å¼‚å¸¸å€¼ã€‚ç„¶åé‡æ–°è¿è¡Œä»£ç ï¼Œä½ çš„æ•£ç‚¹å›¾å°±ä¸ä¼šå†æœ‰è¿™ä¸ªå¼‚å¸¸å€¼äº†ã€‚
æ‰€æœ‰å¼‚å¸¸å€¼éƒ½æ²¡äº†å—ï¼Ÿ
æˆ‘ä»¬è®¤ä¸ºè¿˜æœ‰ 4 ä¸ªå¼‚å¸¸å€¼éœ€è¦è°ƒæŸ¥ï¼›è®©æˆ‘ä»¬ä¸¾ä¾‹æ¥çœ‹ã€‚ä¸¤äººè·å¾—äº†è‡³å°‘ 5 ç™¾ä¸‡ç¾å…ƒçš„å¥–é‡‘ï¼Œä»¥åŠè¶…è¿‡ 1 ç™¾ä¸‡ç¾å…ƒçš„å·¥èµ„ï¼›æ¢å¥è¯è¯´ï¼Œä»–ä»¬å°±åƒæ˜¯å¼ºç›—ã€‚
å’Œè¿™äº›ç‚¹ç›¸å…³çš„åå­—æ˜¯ä»€ä¹ˆï¼Ÿ
ä½ æ˜¯å¦ä¼šçŒœåˆ°è¿™äº›å°±æ˜¯æˆ‘ä»¬åº”è¯¥åˆ é™¤çš„é”™è¯¯æˆ–è€…å¥‡æ€ªçš„ç”µå­è¡¨æ ¼è¡Œï¼Œä½ æ˜¯å¦çŸ¥é“è¿™äº›ç‚¹ä¹‹æ‰€ä»¥ä¸åŒçš„é‡è¦åŸå› ï¼Ÿï¼ˆæ¢å¥è¯è¯´ï¼Œåœ¨æˆ‘ä»¬è¯•å›¾æ„å»º POI è¯†åˆ«ç¬¦ä¹‹å‰ï¼Œæ˜¯å¦åº”è¯¥åˆ é™¤å®ƒä»¬ï¼Ÿï¼‰ç­”ï¼šå¦
æºç åˆ†äº«https://github.com/voidking/ud120-projects
ä¹¦ç­¾æœºå™¨å­¦ä¹ å…¥é—¨https://cn.udacity.com/course/intro-to-machine-learning--ud120
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>è½¬è½½</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>å›å½’è¿·ä½ é¡¹ç›®</title>
    <url>/dev-ml-regression/</url>
    <content><![CDATA[é¡¹ç›®ç®€ä»‹åœ¨æ­¤é¡¹ç›®ä¸­ï¼Œä½ å°†ä½¿ç”¨å›å½’æ¥é¢„æµ‹å®‰ç„¶é›‡å‘˜å’Œåˆä¼™äººçš„è´¢åŠ¡æ•°æ®ã€‚ä¸€æ—¦ä½ çŸ¥é“æŸä½é›‡å‘˜çš„è´¢åŠ¡æ•°æ®ï¼Œæ¯”å¦‚å·¥èµ„ï¼Œä½ æ˜¯å¦ä¼šé¢„æµ‹ä»–ä»¬å¥–é‡‘çš„æ•°é¢ï¼Ÿ


ç›®æ ‡å’Œç‰¹å¾è¿è¡Œåœ¨ regression/finance_regression.py ä¸­æ‰¾åˆ°çš„åˆå§‹ä»£ç ã€‚è¿™å°†ç»˜åˆ¶å‡ºä¸€ä¸ªæ•£ç‚¹å›¾ï¼Œå…¶ä¸­æœ‰æ‰€æœ‰çš„æ•°æ®ç‚¹ã€‚ä½ å°è¯•é¢„æµ‹ä»€ä¹ˆç›®æ ‡ï¼Ÿç”¨æ¥é¢„æµ‹ç›®æ ‡çš„è¾“å…¥ç‰¹å¾æ˜¯ä»€ä¹ˆï¼Ÿ
åœ¨è„‘æµ·ä¸­æç»˜å‡ºä½ å¤§è‡´é¢„æµ‹çš„å›å½’çº¿ï¼ˆå¦‚æœæ‰“å°æ•£ç‚¹å›¾å¹¶ç”¨çº¸ç¬”æ¥æç»˜ï¼Œæ•ˆæœä¼šæ›´å¥½ï¼‰ã€‚
å¯è§†åŒ–å›å½’æ•°æ®å°±åƒåœ¨åˆ†ç±»ä¸­ä¸€æ ·ï¼Œä½ éœ€è¦åœ¨å›å½’ä¸­è®­ç»ƒå’Œæµ‹è¯•æ•°æ®ã€‚è¿™åœ¨åˆå§‹ä»£ç ä¸­å·²è¢«è®¾å®šã€‚å°† test_color çš„å€¼ä»â€œbâ€æ”¹ä¸ºâ€œrâ€ï¼ˆé’ˆå¯¹â€œredâ€ï¼‰ï¼Œç„¶åé‡æ–°è¿è¡Œã€‚
æ³¨æ„ï¼šå¯¹äºå°† Python 2 ä»£ç è½¬æ¢è‡³ Python 3 çš„å­¦å‘˜ï¼Œè¯·å‚è§ä»¥ä¸‹å…³äºå…¼å®¹æ€§çš„é‡è¦å¤‡æ³¨ã€‚
ä½ å°†ä»…ä½¿ç”¨è“è‰²ï¼ˆè®­ç»ƒï¼‰ç‚¹æ¥æ‹Ÿåˆå›å½’ã€‚ï¼ˆä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬æ”¾å…¥æµ‹è¯•é›†çš„æ˜¯ 50% çš„æ•°æ®è€Œéæ ‡å‡†çš„ 10%â€”å› ä¸ºåœ¨ç¬¬ 5 éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†æ”¹å˜è®­ç»ƒå’Œæµ‹è¯•æ•°æ®é›†ï¼Œå¹¶ä¸”å¹³å‡åˆ†å‰²æ•°æ®ä½¿è¿™ç§åšæ³•æ›´åŠ ç®€å•ã€‚ï¼‰ä» Python 3.3 ç‰ˆæœ¬å¼€å§‹ï¼Œå­—å…¸çš„é”®å€¼é¡ºåºæœ‰æ‰€æ”¹å˜ï¼Œåœ¨æ¯æ¬¡ä»£ç è¿è¡Œæ—¶ï¼Œå­—å…¸çš„é”®å€¼çš†ä¸ºéšæœºæ’åºã€‚è¿™ä¼šè®©æˆ‘ä»¬åœ¨ Python 2.7 ç¯å¢ƒä¸‹å·¥ä½œçš„è¯„åˆ†è€…é­é‡ä¸€äº›å…¼å®¹æ€§çš„é—®é¢˜ã€‚ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œè¯·åœ¨ finance_regression.py æ–‡ä»¶çš„ç¬¬26è¡Œ featureFormat è°ƒç”¨æ—¶æ·»åŠ ä¸€ä¸ªå‚æ•°
sort_keys = â€˜../tools/python2_lesson06_keys.pklâ€™
å®ƒä¼šæ‰“å¼€ tools æ–‡ä»¶å¤¹ä¸­å¸¦æœ‰ Python 2 é”®å€¼é¡ºåºçš„æ•°æ®æ–‡ä»¶ã€‚
æå–æ–œç‡å’Œæˆªè·ä» sklearn å¯¼å…¥ LinearRegression å¹¶åˆ›å»º/æ‹Ÿåˆå›å½’ã€‚å°†å…¶å‘½åä¸º regï¼Œè¿™æ ·ç»˜å›¾ä»£ç å°±èƒ½å°†å›å½’è¦†ç›–åœ¨æ•£ç‚¹å›¾ä¸Šå‘ˆç°å‡ºæ¥ã€‚å›å½’æ˜¯å¦å¤§è‡´è½åœ¨äº†ä½ æœŸæœ›çš„åœ°æ–¹ï¼Ÿ
æå–æ–œç‡ï¼ˆå­˜å‚¨åœ¨ reg.coef_ å±æ€§ä¸­ï¼‰å’Œæˆªè·ã€‚
æ–œç‡å’Œæˆªè·æ˜¯å¤šå°‘ï¼Ÿç­”ï¼šæ–œç‡ä¸º5.44814029ï¼Œæˆªè·ä¸º-102360.543294
è®­ç»ƒæ•°æ®å‡è®¾ä½ æ˜¯ä¸€åæ‚Ÿæ€§ä¸å¤ªé«˜çš„æœºå™¨å­¦ä¹ è€…ï¼Œä½ æ²¡æœ‰åœ¨æµ‹è¯•é›†ä¸Šè¿›è¡Œæµ‹è¯•ï¼Œè€Œæ˜¯åœ¨ä½ ç”¨æ¥è®­ç»ƒçš„ç›¸åŒæ•°æ®ä¸Šè¿›è¡Œäº†æµ‹è¯•ï¼Œå¹¶ä¸”ç”¨åˆ°çš„æ–¹æ³•æ˜¯å°†å›å½’é¢„æµ‹å€¼ä¸è®­ç»ƒæ•°æ®ä¸­çš„ç›®æ ‡å€¼ï¼ˆæ¯”å¦‚ï¼šå¥–é‡‘ï¼‰åšå¯¹æ¯”ã€‚
ä½ æ‰¾åˆ°çš„åˆ†æ•°æ˜¯å¤šå°‘ï¼Ÿä½ å¯èƒ½å¯¹â€œè‰¯å¥½â€åˆ†æ•°è¿˜æ²¡æœ‰æ¦‚å¿µï¼›æ­¤åˆ†æ•°ä¸æ˜¯éå¸¸å¥½ï¼ˆä½†å´éå¸¸ç³Ÿç³•ï¼‰ã€‚ç­”ï¼š0.0455091926995
æµ‹è¯•æ•°æ®ç°åœ¨ï¼Œåœ¨æµ‹è¯•æ•°æ®ä¸Šè®¡ç®—å›å½’çš„åˆ†æ•°ã€‚
æµ‹è¯•æ•°æ®çš„åˆ†æ•°æ˜¯å¤šå°‘ï¼Ÿå¦‚æœåªæ˜¯é”™è¯¯åœ°åœ¨è®­ç»ƒæ•°æ®ä¸Šè¿›è¡Œè¯„ä¼°ï¼Œä½ æ˜¯å¦ä¼šé«˜ä¼°æˆ–ä½ä¼°å›å½’çš„æ€§èƒ½ï¼Ÿç­”ï¼š-1.48499241737
æ ¹æ® LTI å›å½’å¥–é‡‘æˆ‘ä»¬æœ‰è®¸å¤šå¯ç”¨çš„è´¢åŠ¡ç‰¹å¾ï¼Œå°±é¢„æµ‹ä¸ªäººå¥–é‡‘è€Œè¨€ï¼Œå…¶ä¸­ä¸€äº›ç‰¹å¾å¯èƒ½æ¯”ä½™ä¸‹çš„ç‰¹å¾æ›´ä¸ºå¼ºå¤§ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ å¯¹æ•°æ®åšå‡ºäº†æ€è€ƒï¼Œå¹¶ä¸”æ¨æµ‹å‡ºâ€œlong_term_incentiveâ€ç‰¹å¾ï¼ˆä¸ºå…¬å¸é•¿æœŸçš„å¥åº·å‘å±•åšå‡ºè´¡çŒ®çš„é›‡å‘˜åº”è¯¥å¾—åˆ°è¿™ä»½å¥–åŠ±ï¼‰å¯èƒ½ä¸å¥–é‡‘è€Œéå·¥èµ„çš„å…³ç³»æ›´å¯†åˆ‡ã€‚
è¯æ˜ä½ çš„å‡è®¾æ˜¯æ­£ç¡®çš„ä¸€ç§æ–¹å¼æ˜¯æ ¹æ®é•¿æœŸæ¿€åŠ±å›å½’å¥–é‡‘ï¼Œç„¶åçœ‹çœ‹å›å½’æ˜¯å¦æ˜¾è‘—é«˜äºæ ¹æ®å·¥èµ„å›å½’å¥–é‡‘ã€‚æ ¹æ®é•¿æœŸå¥–åŠ±å›å½’å¥–é‡‘â€”æµ‹è¯•æ•°æ®çš„åˆ†æ•°æ˜¯å¤šå°‘ï¼Ÿç­”ï¼š-0.59271289995
å·¥èµ„ä¸ LTIå¦‚æœä½ å¿…é¡»é¢„æµ‹æŸäººçš„å¥–é‡‘å¹¶ä¸”ä½ åªæœ‰ä¸€å°æ®µç›¸å…³ä¿¡æ¯ï¼Œä½ æƒ³è¦çŸ¥é“ä»–ä»¬çš„å·¥èµ„è¿˜æ˜¯é•¿æœŸå¥–åŠ±ï¼Ÿç­”ï¼šé•¿æœŸå¥–åŠ±
å¼‚å¸¸å€¼ç ´åå›å½’è¿™æ˜¯ä¸‹èŠ‚è¯¾çš„å†…å®¹ç®€ä»‹ï¼Œå…³äºå¼‚å¸¸å€¼çš„è¯†åˆ«å’Œåˆ é™¤ã€‚è¿”å›è‡³ä¹‹å‰çš„ä¸€ä¸ªè®¾ç½®ï¼Œä½ åœ¨å…¶ä¸­ä½¿ç”¨å·¥èµ„é¢„æµ‹å¥–é‡‘ï¼Œå¹¶ä¸”é‡æ–°è¿è¡Œä»£ç æ¥å›é¡¾æ•°æ®ã€‚ä½ å¯èƒ½æ³¨æ„åˆ°ï¼Œå°‘é‡æ•°æ®ç‚¹è½åœ¨äº†ä¸»è¶‹åŠ¿ä¹‹å¤–ï¼Œå³æŸäººæ‹¿åˆ°é«˜å·¥èµ„ï¼ˆè¶…è¿‡ 1 ç™¾ä¸‡ç¾å…ƒï¼ï¼‰å´æ‹¿åˆ°ç›¸å¯¹è¾ƒå°‘çš„å¥–é‡‘ã€‚æ­¤ä¸ºå¼‚å¸¸å€¼çš„ä¸€ä¸ªç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹èŠ‚è¯¾ä¸­é‡ç‚¹è®²è¿°å®ƒä»¬ã€‚
ç±»ä¼¼çš„è¿™ç§ç‚¹å¯ä»¥å¯¹å›å½’é€ æˆå¾ˆå¤§çš„å½±å“ï¼šå¦‚æœå®ƒè½åœ¨è®­ç»ƒé›†å†…ï¼Œå®ƒå¯èƒ½æ˜¾è‘—å½±å“æ–œç‡/æˆªè·ã€‚å¦‚æœå®ƒè½åœ¨æµ‹è¯•é›†å†…ï¼Œå®ƒå¯èƒ½æ¯”è½åœ¨æµ‹è¯•é›†å¤–è¦ä½¿åˆ†æ•°ä½å¾—å¤šã€‚å°±ç›®å‰æƒ…å†µæ¥çœ‹ï¼Œæ­¤ç‚¹è½åœ¨æµ‹è¯•é›†å†…ï¼ˆè€Œä¸”æœ€ç»ˆå¾ˆå¯èƒ½é™ä½åˆ†æ•°ï¼‰ã€‚è®©æˆ‘ä»¬åšä¸€äº›å¤„ç†ï¼Œçœ‹çœ‹å®ƒè½åœ¨è®­ç»ƒé›†å†…ä¼šå‘ç”Ÿä»€ä¹ˆã€‚åœ¨ finance_regression.py åº•éƒ¨é™„è¿‘å¹¶ä¸”åœ¨ plt.xlabel(features_list[1]) ä¹‹å‰æ·»åŠ è¿™ä¸¤è¡Œä»£ç ï¼š
reg.fit(feature_test, target_test)plt.plot(feature_train, reg.predict(feature_train), color=â€bâ€)
ç°åœ¨ï¼Œæˆ‘ä»¬å°†ç»˜åˆ¶ä¸¤æ¡å›å½’çº¿ï¼Œä¸€æ¡åœ¨æµ‹è¯•æ•°æ®ä¸Šæ‹Ÿåˆï¼ˆæœ‰å¼‚å¸¸å€¼ï¼‰ï¼Œä¸€æ¡åœ¨è®­ç»ƒæ•°æ®ä¸Šæ‹Ÿåˆï¼ˆæ— å¼‚å¸¸å€¼ï¼‰ã€‚æ¥çœ‹çœ‹ç°åœ¨çš„å›¾å½¢ï¼Œæœ‰å¾ˆå¤§å·®åˆ«ï¼Œå¯¹å§ï¼Ÿå•ä¸€çš„å¼‚å¸¸å€¼ä¼šå¼•èµ·å¾ˆå¤§çš„å·®å¼‚ã€‚
æ–°çš„å›å½’çº¿æ–œç‡æ˜¯å¤šå°‘ï¼Ÿç­”ï¼š2.27410114
ï¼ˆä½ ä¼šå‘ç°å·®å¼‚å¾ˆå¤§ï¼Œå¤šæ•°æƒ…å†µä¸‹ç”±å¼‚å¸¸å€¼å¼•èµ·ã€‚ä¸‹ä¸€èŠ‚è¯¾å°†è¯¦ç»†ä»‹ç»å¼‚å¸¸å€¼ï¼Œè¿™æ ·ä½ å°±æœ‰å·¥å…·æ¥æ£€æµ‹å’Œå¤„ç†å®ƒä»¬äº†ã€‚ï¼‰
æºç åˆ†äº«https://github.com/voidking/ud120-projects
ä¹¦ç­¾æœºå™¨å­¦ä¹ å…¥é—¨https://cn.udacity.com/course/intro-to-machine-learning--ud120
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>è½¬è½½</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>å®‰ç„¶è¿·ä½ é¡¹ç›®</title>
    <url>/dev-ml-enron/</url>
    <content><![CDATA[é¡¹ç›®ç®€ä»‹å®‰ç„¶æ¬ºè¯ˆæ¡ˆæ˜¯ä¸€ä¸ªæ··ä¹±è€Œåˆå¼•äººå…¥èƒœçš„å¤§äº‹ä»¶ï¼Œä»ä¸­å¯ä»¥å‘ç°å‡ ä¹æ‰€æœ‰æƒ³åƒå¾—åˆ°çš„ä¼ä¸šè¿æ³•è¡Œä¸ºã€‚å®‰ç„¶çš„ç”µå­é‚®ä»¶å’Œè´¢åŠ¡æ•°æ®é›†è¿˜æ˜¯å·¨å¤§ã€æ··ä¹±çš„ä¿¡æ¯å®è—ï¼Œè€Œä¸”ï¼Œåœ¨ä½ ç¨å¾®ç†Ÿæ‚‰è¿™äº›å®è—åï¼Œå®ƒä»¬ä¼šå˜å¾—æ›´åŠ æœ‰ç”¨ã€‚æˆ‘ä»¬å·²å°†è¿™äº›ç”µå­é‚®ä»¶å’Œè´¢åŠ¡æ•°æ®åˆå¹¶ä¸ºä¸€ä¸ªæ•°æ®é›†ï¼Œè€Œä½ å°†åœ¨æ­¤è¿·ä½ é¡¹ç›®ä¸­ç ”ç©¶å®ƒã€‚
å¼€å§‹ï¼šå…‹éš†è¿™ä¸ª GitHub åº“ï¼šhttps://github.com/udacity/ud120-projectsè¿è¡Œå¼€å§‹ä»£ç ï¼šdatasets_questions/explore_enron_data.py


æ•°æ®é›†å¤§å°èšåˆçš„å®‰ç„¶ç”µå­é‚®ä»¶å’Œè´¢åŠ¡æ•°æ®é›†è¢«å­˜å‚¨åˆ°å­—å…¸ä¸­ï¼Œå­—å…¸ä¸­çš„æ¯ä¸ªé”®æ˜¯ä¸€ä¸ªäººåï¼Œè€Œä¸”å€¼æ˜¯åŒ…å«æ­¤äººæ‰€æœ‰ç‰¹å¾çš„ä¸€ä¸ªå­—å…¸ã€‚
ç”µå­é‚®ä»¶å’Œè´¢åŠ¡ (E+F) æ•°æ®å­—å…¸è¢«å­˜å‚¨åœ¨ pickle æ–‡ä»¶ä¸­ï¼Œè¯¥æ–‡ä»¶å¯ç›´æ¥å­˜å‚¨å’ŒåŠ è½½ python å¯¹è±¡ï¼Œéå¸¸æ–¹ä¾¿ã€‚ ä½¿ç”¨ datasets_questions/explore_enron_data.py åŠ è½½æ•°æ®é›†ã€‚
æ•°æ®é›†ä¸­æœ‰å¤šå°‘æ•°æ®ç‚¹ï¼ˆäººï¼‰ï¼Ÿç­”ï¼š146
æ•°æ®é›†ç‰¹å¾å¯¹äºæ¯ä¸ªäººï¼Œæœ‰å¤šå°‘ä¸ªç‰¹å¾å¯ç”¨ï¼Ÿç­”ï¼š21
æŸ¥æ‰¾POIæ ¹æ®æˆ‘ä»¬çš„å®šä¹‰ï¼Œâ€œPOIâ€ï¼ˆPerson of interestï¼Œå«Œç–‘äººï¼‰ç‰¹å¾è®°å½•ç€ä¸€ä¸ªäººæ˜¯å¦ä¸ºç›¸å…³äººå£«çš„ä¿¡æ¯ã€‚
æ•°æ®é›†ä¸­æœ‰å¤šå°‘ POIï¼Ÿä¹Ÿå°±æ˜¯è¯´ï¼Œè®¡ç®— data[person_name][â€œpoiâ€]==1 æ—¶ï¼Œå­—å…¸ä¸­æ¡ç›®çš„æ•°é‡ã€‚ç­”ï¼š18
æ›´æ¢æ•°æ®æºåå­˜åœ¨å¤šå°‘ POIï¼Ÿæˆ‘ä»¬ç¼–è¾‘äº†ä¸€ä¸ªåŒ…å«æ‰€æœ‰ POI å§“åçš„åˆ—è¡¨ï¼ˆåœ¨ ../final_project/poi_names.txt ä¸­ï¼‰å¹¶é™„ä¸Šäº†ç›¸åº”çš„é‚®ç®±åœ°å€ï¼ˆåœ¨ ../final_project/poi_email_addresses.py ä¸­ï¼‰ã€‚
æ€»å…±æœ‰å¤šå°‘ POIï¼Ÿ(ä½¿ç”¨å§“ååˆ—è¡¨ï¼Œä¸è¦ç”¨é‚®ç®±åœ°å€ï¼Œå› ä¸ºè®¸å¤šé›‡å‘˜ä¸æ­¢ä¸€ä¸ªé‚®ç®±ï¼Œè€Œä¸”å…¶ä¸­å°‘æ•°äººå‘˜ä¸æ˜¯å®‰ç„¶çš„é›‡å‘˜ï¼Œæˆ‘ä»¬æ²¡æœ‰ä»–ä»¬çš„é‚®ç®±åœ°å€ã€‚)ç­”ï¼š35
ä¸å®Œæ•´æ•°æ®ä½ å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨æ•°æ®é›†ä¸­æœ‰è®¸å¤šPOIï¼Œä½†ä¸æ˜¯æ‰€æœ‰ã€‚è¿™ä¸ºä½•ä¼šæ˜¯ä¸€ä¸ªæ½œåœ¨çš„é—®é¢˜ï¼Ÿ
æˆ‘ä»¬å°†åœ¨ç¨åè§£é‡ŠPOIä¸ºä½•æœ‰å¯èƒ½ä¸åœ¨å®‰ç„¶æ•°æ®é›†ä¸­ï¼Œè¿™æ ·ä½ å°±å¯ä»¥åœ¨å¾€ä¸‹ç»§ç»­ä¹‹å‰å®Œå…¨ç†è§£è¿™ä¸ªé—®é¢˜ã€‚
æŸ¥è¯¢æ•°æ®é›†å’Œä»»ä½•å­—å…¸ä¸€æ ·ï¼Œä¸ªäººç‰¹å¾å¯ä»¥è¿™æ ·è¢«è®¿é—®ï¼š
enron_data[â€œLASTNAME FIRSTNAMEâ€][â€œfeature_nameâ€]æˆ–è€…enron_data[â€œLASTNAME FIRSTNAME MIDDLEINITIALâ€][â€œfeature_nameâ€]
1ã€James Prentice åä¸‹çš„è‚¡ç¥¨æ€»å€¼æ˜¯å¤šå°‘ï¼Ÿç­”ï¼š1095040
2ã€æœ‰å¤šå°‘æ¥è‡ª Wesley Colwell çš„å‘ç»™å«Œç–‘äººçš„ç”µå­é‚®ä»¶ï¼Ÿç­”ï¼š11
3ã€Jeffrey K Skilling è¡Œä½¿çš„è‚¡ç¥¨æœŸæƒä»·å€¼æ˜¯å¤šå°‘ï¼Ÿç­”ï¼š19250000
ç ”ç©¶å®‰ç„¶æ¬ºè¯ˆæ¡ˆåœ¨ä¸‹é¢çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»ä¸ºä»€ä¹ˆå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæœ€å¥½çš„ç‰¹å¾éƒ½æ¥è‡ªæˆ‘ä»¬çš„ç›´è§‰ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å°†å¯¹å®‰ç„¶æ¬ºè¯ˆæ¡ˆç¨ä½œäº†è§£ã€‚
å¦‚æœä½ èƒ½è…¾å‡ºä¸€ä¸ªåŠå°æ—¶çš„æ—¶é—´ï¼Œå¯ä»¥è§‚çœ‹ã€Šå®‰ç„¶ï¼šæˆ¿é—´ä¸­æœ€èªæ˜çš„ä¼™è®¡ï¼ˆEnron: The Smartest Guys in the Roomï¼‰ã€‹è¿™éƒ¨çºªå½•ç‰‡ï¼Œå®ƒç²¾å½©æ¦‚è¿°äº†æ•´ä¸ªäº‹ä»¶ã€‚å¦å¤–ï¼Œè¿˜æœ‰è®¸å¤šæŠ¥çº¸å’Œæ•…äº‹è®°å½•ç€å®‰ç„¶çš„å…´è¡°æˆè´¥ã€‚
ä¸‹é¢è¿™äº›é˜´è°‹ä¸­ï¼Œå“ªä¸€ä¸ªæ²¡æœ‰å®‰ç„¶çš„å‚ä¸ï¼Ÿ

æ¯æœˆåº•å‘ç©ºå£³å…¬å¸å‡ºå”®èµ„äº§ï¼Œå¹¶åœ¨æ¬¡æœˆåˆè´­å›ï¼Œä»¥éšç’ä¼šè®¡æŸå¤±
é€ æˆåŠ å·ç”µç½‘æ–­ç”µ
éæ³•è·å–æ”¿åºœæŠ¥å‘Šï¼Œå„æ–­æµ“ç¼©æ©™æ±è¡Œä¸š
å›¾è°‹ä¸ºä¸€åæ²™ç‰¹ç‹å­åŠ æ€¥åŠç†ç¾å›½å…¬æ°‘èº«ä»½
è®¡åˆ’ä¸å–åº§ç”µå½±åˆä½œåœ¨ç½‘ä¸Šä¼ è¾“ç”µå½±

1ã€æ¬ºè¯ˆæ¡ˆå‘ç”Ÿçš„å¤šæ•°æ—¶é—´å†…ï¼Œå®‰ç„¶çš„ CEO æ˜¯è°ï¼Ÿç­”ï¼šJeffrey Skilling
2ã€å®‰ç„¶çš„è‘£äº‹ä¼šä¸»å¸­æ˜¯è°ï¼Ÿç­”ï¼šKenneth Lay
3ã€æ¬ºè¯ˆæ¡ˆå‘ç”Ÿçš„å¤šæ•°æ—¶é—´å†…ï¼Œå®‰ç„¶çš„ CFOï¼ˆé¦–å¸­è´¢åŠ¡å®˜ï¼‰æ˜¯è°ï¼Ÿç­”ï¼šAndrew Fastow
4ã€è¿™ä¸‰ä¸ªäººï¼ˆLayã€Skilling å’Œ Fastowï¼‰å½“ä¸­ï¼Œè°æ‹¿å›å®¶çš„é’±æœ€å¤šï¼ˆâ€œtotal_paymentsâ€ç‰¹å¾çš„æœ€å¤§å€¼ï¼‰ï¼Ÿç­”ï¼šLAY KENNETH L 103559793
5ã€å¯¹äºæ•°æ®é›†ä¸­çš„æ‰€æœ‰äººï¼Œä¸æ˜¯æ¯ä¸€ä¸ªç‰¹å¾éƒ½æœ‰å€¼ã€‚å½“ç‰¹å¾æ²¡æœ‰æ˜ç¡®çš„å€¼æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ä»€ä¹ˆæ¥è¡¨ç¤ºå®ƒï¼Ÿç­”ï¼šNaN
6ã€æ­¤æ•°æ®é›†ä¸­æœ‰å¤šå°‘é›‡å‘˜æœ‰é‡åŒ–çš„å·¥èµ„ï¼Ÿå·²çŸ¥çš„é‚®ç®±åœ°å€æ˜¯å¦å¯ç”¨ï¼Ÿç­”ï¼š95ï¼Œ111
å­—å…¸åˆ°æ•°ç»„è½¬æ¢ä¸èƒ½å°† python å­—å…¸ç›´æ¥è¯»å…¥åˆ° sklearn åˆ†ç±»æˆ–å›å½’ç®—æ³•ä¸­ï¼›å®ƒå…¶å®éœ€è¦ä¸€ä¸ª numpy æ•°ç»„ï¼Œæˆ–è€…ä¸€ä¸ªç”±åˆ—è¡¨ç»„æˆçš„åˆ—è¡¨ï¼ˆæ­¤åˆ—è¡¨æœ¬èº«æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå®ƒçš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯æ•°æ®ç‚¹ï¼Œè€Œè¾ƒå°åˆ—è¡¨çš„å…ƒç´ æ˜¯è¯¥ç‚¹çš„ç‰¹å¾ï¼‰ã€‚
æˆ‘ä»¬ç¼–å†™äº†ä¸€äº›è¾…åŠ©å‡½æ•°ï¼ˆtools/feature_format.py ä¸­çš„ featureFormat() å’Œ targetFeatureSplit()ï¼‰ï¼Œå®ƒä»¬å¯ä»¥è·å–ç‰¹å¾åçš„åˆ—è¡¨å’Œæ•°æ®å­—å…¸ï¼Œç„¶åè¿”å› numpy æ•°ç»„ã€‚
å¦‚æœç‰¹å¾æ²¡æœ‰æŸä¸ªç‰¹å®šäººå‘˜çš„å€¼ï¼Œæ­¤å‡½æ•°è¿˜ä¼šç”¨ 0ï¼ˆé›¶ï¼‰æ›¿æ¢ç‰¹å¾å€¼ã€‚
ç¼ºå°‘POIå¦‚ä½ åˆšæ‰æ‰€è§ï¼Œä¸æ˜¯æ¯ä¸ª POI åœ¨æ•°æ®é›†ä¸­éƒ½æœ‰ä¸€ä¸ªæ¡ç›®ï¼ˆæ¯”å¦‚ï¼šMichael Krautzï¼‰ã€‚é‚£æ˜¯å› ä¸ºæ•°æ®é›†æ˜¯é€šè¿‡ä½ åœ¨ final_project/enron61702insiderpay.pdf ä¸­æ‰¾åˆ°çš„è´¢åŠ¡æ•°æ®æ‰€åˆ›å»ºçš„ï¼Œè¿™äº›æ•°æ®ä¸­ç¼ºå°‘äº†ä¸€äº› POIï¼ˆè¿™äº›ç¼ºå¤±çš„ POI è¢«ä¼ é€è‡³æœ€ç»ˆçš„æ•°æ®é›†ï¼‰ã€‚å¦ä¸€æ–¹é¢ï¼Œå¯¹äºè¿™äº›â€œç¼ºå°‘çš„â€POIï¼Œæˆ‘ä»¬ç¡®å®æœ‰ä»–ä»¬çš„é‚®ä»¶ã€‚
å°½ç®¡å‘æ•°æ®é›†ä¸­æ·»åŠ è¿™äº› POI å’Œä»–ä»¬çš„ä¿¡æ¯ï¼Œå¹¶ä¸”ä¸ºè´¢åŠ¡ä¿¡æ¯è®¾ç½®â€œNaNâ€éå¸¸ç®€å•ï¼Œä½†è¿™ä¼šå¸¦æ¥ä¸€ä¸ªå¾®å¦™çš„é—®é¢˜ã€‚ä½ å°†åœ¨æ­¤å¤„äº†è§£åˆ°è¿™ä¸€é—®é¢˜ã€‚
1ã€ï¼ˆå½“å‰çš„ï¼‰æ•°æ®é›†ä¸­æœ‰å¤šå°‘äººçš„è–ªé…¬æ€»é¢è¢«è®¾ç½®äº†â€œNaNâ€ï¼Ÿæ•°æ®é›†ä¸­è¿™äº›äººçš„æ¯”ä¾‹å å¤šå°‘ï¼Ÿç­”ï¼š21ï¼Œ14.3835616438%
2ã€æ•°æ®é›†ä¸­æœ‰å¤šå°‘ POI çš„è–ªé…¬æ€»é¢è¢«è®¾ç½®äº†â€œNaNâ€ï¼Ÿè¿™äº› POI å å¤šå°‘æ¯”ä¾‹ï¼Ÿç­”ï¼š0ï¼Œ0.0%
3ã€å¦‚æœæœºå™¨å­¦ä¹ ç®—æ³•å°† total_payments ç”¨ä½œç‰¹å¾ï¼Œä½ å¸Œæœ›å®ƒå°†â€œNaNâ€å€¼å…³è”åˆ° POI è¿˜æ˜¯é POIï¼Ÿç­”ï¼šéPOI
4ã€å¦‚æœä½ å†æ¬¡æ·»åŠ äº†å…¨æ˜¯ POI çš„ 10 ä¸ªæ•°æ®ç‚¹ï¼Œå¹¶ä¸”å¯¹è¿™äº›é›‡å‘˜çš„è–ªé…¬æ€»é¢è®¾ç½®äº†â€œNaNâ€ï¼Œä½ åˆšæ‰è®¡ç®—çš„æ•°å­—ä¼šå‘ç”Ÿå˜åŒ–ã€‚æ•°æ®é›†ä¸­è¿™äº›äººçš„æ•°é‡å˜æˆäº†å¤šå°‘ï¼Ÿè–ªé…¬æ€»é¢è¢«è®¾ç½®äº†â€œNaNâ€çš„é›‡å‘˜æ•°å˜æˆäº†å¤šå°‘ï¼Ÿç­”ï¼š156ï¼Œ31
5ã€æ•°æ®é›†ä¸­çš„ POI æ•°é‡å˜æˆäº†å¤šå°‘ï¼Ÿè–ªé…¬æ€»é¢è¢«è®¾ç½®äº†â€œNaNâ€çš„ POI æ•°é‡å˜æˆäº†å¤šå°‘ï¼Ÿç­”ï¼š28ï¼Œ10
6ã€åœ¨æ·»åŠ äº†æ–°çš„æ•°æ®ç‚¹åï¼Œä½ æ˜¯å¦è®¤ä¸ºï¼Œç›‘ç£å¼åˆ†ç±»ç®—æ³•å¯å°† total_payments ä¸ºâ€œNaNâ€ç†è§£ä¸ºæŸäººæ˜¯ POI çš„çº¿ç´¢ï¼Ÿç­”ï¼šæ˜¯
æ··åˆæ•°æ®æºæ­¤ä¾‹ä¸­åŠ å…¥äº†æ–°çš„ POIï¼Œè€Œæˆ‘ä»¬æ²¡æœ‰ä»»ä½•äººçš„è´¢åŠ¡ä¿¡æ¯ï¼Œè¿™å°±å¸¦æ¥äº†ä¸€ä¸ªå¾®å¦™çš„é—®é¢˜ï¼Œå³ç®—æ³•å¯èƒ½ä¼šæ³¨æ„åˆ°æˆ‘ä»¬ç¼ºå°‘ä»–ä»¬çš„è´¢åŠ¡ä¿¡æ¯ï¼Œå¹¶å°†è¿™ä¸€ç‚¹ä½œä¸ºä»–ä»¬æ˜¯POIçš„çº¿ç´¢ã€‚æ¢ä¸ªè§’åº¦æ¥çœ‹ï¼Œä¸ºæˆ‘ä»¬çš„ä¸¤ä¸ªç±»ç”Ÿæˆæ•°æ®çš„æ–¹å¼ç°åœ¨æœ‰æ‰€ä¸åŒ - éPOIçš„äººå…¨éƒ½æ¥è‡ªè´¢åŠ¡ç”µå­è¡¨æ ¼ï¼Œä¹‹åæ‰‹åŠ¨åŠ å…¥äº†è®¸å¤šPOIã€‚è¿™ç§ä¸åŒå¯èƒ½ä¼šè¯±ä½¿æˆ‘ä»¬ä»¥ä¸ºæˆ‘ä»¬çš„è¡¨ç°ä¼˜äºå®é™…çŠ¶å†µ - å‡è®¾ä½ ä½¿ç”¨ POI æ£€æµ‹å™¨æ¥ç¡®å®šæŸä¸ªæœªè§è¿‡çš„æ–°äººæ˜¯å¦æ˜¯ POIï¼Œè€Œä¸”è¯¥äººä¸åœ¨ç”µå­è¡¨æ ¼ä¸Šã€‚ç„¶åï¼Œä»–ä»¬çš„æ‰€æœ‰è´¢åŠ¡æ•°æ®éƒ½å°†åŒ…å«â€œNaNâ€ï¼Œä½†è¯¥äººææœ‰å¯èƒ½ä¸æ˜¯ POIï¼ˆä¸–ç•Œä¸Šé POI çš„äººæ¯” POI å¤šå¾—å¤šï¼Œå³ä½¿åœ¨å®‰ç„¶ä¹Ÿæ˜¯å¦‚æ­¤ï¼‰- ç„¶è€Œä½ å¯èƒ½ä¼šæ— æ„ä¸­å°†ä»–ä»¬æ ‡è¯†ä¸º POIï¼
è¿™å°±æ˜¯è¯´ï¼Œåœ¨ç”Ÿæˆæˆ–å¢å¤§æ•°æ®é›†æ—¶ï¼Œå¦‚æœæ•°æ®æ¥è‡ªä¸åŒç±»çš„ä¸åŒæ¥æºï¼Œä½ åº”æ ¼å¤–å°å¿ƒã€‚å®ƒå¾ˆå®¹æ˜“ä¼šé€ æˆæˆ‘ä»¬åœ¨æ­¤å±•ç¤ºçš„åå·®æˆ–é”™è¯¯ç±»å‹ã€‚å¯é€šè¿‡å¤šç§æ–¹æ³•å¤„ç†æ­¤é—®é¢˜ã€‚ä¸¾ä¾‹è€Œè¨€ï¼Œå¦‚æœä»…ä½¿ç”¨äº†ç”µå­é‚®ä»¶æ•°æ®ï¼Œåˆ™ä½ æ— éœ€æ‹…å¿ƒæ­¤é—®é¢˜ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè´¢åŠ¡æ•°æ®ä¸­çš„å·®å¼‚å¹¶ä¸é‡è¦ï¼Œå› ä¸ºå¹¶æœªä½¿ç”¨è´¢åŠ¡ç‰¹å¾ï¼‰ã€‚è¿˜å¯ä»¥é€šè¿‡æ›´å¤æ‚çš„æ–¹æ³•æ¥ä¼°è®¡è¿™äº›åå·®å¯èƒ½ä¼šå¯¹ä½ çš„æœ€ç»ˆç­”æ¡ˆé€ æˆå¤šå¤§å½±å“ï¼Œä¸è¿‡æ­¤è¯é¢˜è¶…å‡ºäº†æœ¬è¯¾ç¨‹çš„èŒƒå›´ã€‚
ç›®å‰çš„ç»“è®ºå°±æ˜¯ï¼Œè¦éå¸¸å°å¿ƒåœ°å¯¹å¾…å¼•å…¥æ¥è‡ªä¸åŒæ¥æºï¼ˆå…·ä½“å–å†³äºç±»ï¼‰çš„ç‰¹å¾è¿™ä¸ªé—®é¢˜ï¼å¼•å…¥æ­¤ç±»ç‰¹å¾å¸¸å¸¸ä¼šæ„å¤–åœ°å¸¦æ¥åå·®å’Œé”™è¯¯ã€‚
æºç åˆ†äº«https://github.com/voidking/ud120-projects
ä¹¦ç­¾æœºå™¨å­¦ä¹ å…¥é—¨https://cn.udacity.com/course/intro-to-machine-learning--ud120
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>è½¬è½½</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>é€‰æ‹©è‡ªå·±çš„ç®—æ³•</title>
    <url>/dev-ml-new-algorithm/</url>
    <content><![CDATA[ä¸ºä½•è¦å­¦ä¹ æ–°ç®—æ³•ï¼Ÿä»»ä½•æ•°æ®åˆ†æå¸ˆå…·å¤‡çš„ä¸€é¡¹å…³é”®æŠ€èƒ½å°±æ˜¯ä¸æ–­ä»æœºå™¨å­¦ä¹ ä¸­å¾—åˆ°æ–°çš„è®¤è¯†ï¼Œè¿™ä¹Ÿæ˜¯æœ¬èŠ‚è¯¾çš„å­¦ä¹ ç›®æ ‡ã€‚è¿™èŠ‚è¯¾çš„å†…å®¹æ˜¯ä¸€ä¸ªè¿·ä½ é¡¹ç›®ã€‚ç›®æ ‡æ˜¯ç”¨ä½ é€‰æ‹©çš„ç®—æ³•æ¥åšåœ°å½¢åˆ†ç±»ï¼Œå¹¶ç”±ä½ è‡ªå·±è¿›è¡Œç ”ç©¶å’Œéƒ¨ç½²ã€‚


å¯é€‰çš„ç®—æ³•å¦‚ä¸‹ï¼š
1ã€k nearest neighborsï¼ˆk æœ€è¿‘é‚» æˆ– KNNï¼‰2ã€random forestï¼ˆéšæœºæ£®æ—ï¼‰3ã€adaboostï¼ˆæœ‰æ—¶ä¹Ÿå«â€œè¢«æå‡çš„å†³ç­–æ ‘â€ï¼‰
æˆ‘ä»¬æ— æ³•æ£€æŸ¥ä½ çš„ç»“æœï¼Œå› ä¸ºä½ æœ‰å¤ªå¤šçš„ç®—æ³•å’Œå‚æ•°ç»„åˆå¯ä»¥å°è¯•äº†ï¼Œä½†æ˜¯ä½ çœ‹åˆ°è¿‡æˆ‘ä»¬ä¸Šä¸€ä¸ªç®—æ³•ï¼ˆæœ´ç´ è´å¶æ–¯ã€SVMã€å†³ç­–æ ‘ï¼‰æ‰€å¾—å‡ºçš„å‡†ç¡®ç‡ï¼Œå› æ­¤ä½ å¯ä»¥è‡ªè¡Œè¯„ä¼°æ–°çš„ç®—æ³•æ˜¯å¦æ›´å¥½ã€‚
ä½ å°†åœ¨ choose_your_own/your_algorithm.py æ–‡ä»¶ä¸­å¯»æ‰¾åˆå§‹ä»£ç æ¥å‡†å¤‡ä½ çš„æ•°æ®ã€‚ä»¥ä¸‹è§†é¢‘è¿˜ç»™å‡ºäº†æ›´å¤šä½ åº”è¯¥éµå¾ªçš„ç®—æ³•å’Œè¿‡ç¨‹çš„ç»†èŠ‚ï¼Œä¸è¿‡ä½ éœ€è¦è‡ªè¡Œå»å‘ç°ã€‚ç¥ä½ å¥½è¿ï¼
å­¦ä¹ ç®—æ³•çš„æ­¥éª¤1ã€æœç´¢ç›¸å…³èµ„æ–™ï¼Œå¤§è‡´äº†è§£è¿™ä¸ªç®—æ³•ï¼Œèƒ½å¤Ÿå‘æœ‹å‹è§£é‡Šè¿™ä¸ªç®—æ³•ã€‚2ã€æŸ¥æ‰¾sklearnä¸­å…³äºè¿™ä¸ªç®—æ³•çš„æ–‡æ¡£ï¼Œè¿è¡Œæ–‡æ¡£ç»™çš„demoã€‚3ã€ä½¿ç”¨ç®—æ³•å¯¹å®é™…é—®é¢˜è¿›è¡Œé¢„æµ‹ã€‚4ã€å¯¹ç®—æ³•è¿›è¡Œè¯„ä¼°ï¼Œå‡†ç¡®ç‡å’Œé€Ÿåº¦ã€‚
æŒ‘æˆ˜æˆ‘ä»¬ä½¿ç”¨ä»»ä¸€è¿™äº›ç®—æ³•ï¼ˆæœ´ç´ è´å¶æ–¯ã€SVMã€å†³ç­–æ ‘ã€AdaBoostã€éšæœºæ£®æ—ã€KNNï¼‰èƒ½å¤Ÿè·å¾—çš„æœ€é«˜å‡†ç¡®ç‡æ˜¯ 93.6%ã€‚è¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„æŒ‘æˆ˜ï¼šä½ å¯ä»¥æ‰“è´¥æˆ‘ä»¬å—ï¼Ÿå¦‚æœå¯ä»¥ï¼Œè¯·åœ¨æ–¹æ¡†ä¸­å†™ä¸‹ä½ çš„æ–¹æ³•ï¼ˆç®—æ³•å’Œå‚æ•°ï¼‰ã€‚
ç­”ï¼šknnç®—æ³•ï¼Œå‡†ç¡®ç‡94%ã€‚
æºç åˆ†äº«https://github.com/voidking/ud120-projects
ä¹¦ç­¾æœºå™¨å­¦ä¹ å…¥é—¨https://cn.udacity.com/course/intro-to-machine-learning--ud120
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>è½¬è½½</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>å†³ç­–æ ‘è¿·ä½ é¡¹ç›®</title>
    <url>/dev-ml-dt/</url>
    <content><![CDATA[é¡¹ç›®èƒŒæ™¯åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†å†æ¬¡å°è¯•ç¡®è®¤é‚®ä»¶ä½œè€…ï¼Œä½†è¿™æ¬¡ä½¿ç”¨çš„æ˜¯å†³ç­–æ ‘ã€‚åˆå§‹ä»£ç å¯ä»¥åœ¨ decision_tree/dt_author_id.py ä¸­æ‰¾åˆ°ã€‚
ä½ ä»éœ€è¦åœ¨ä½ è®¡ç®—æœºä¸Šå®Œæˆè¿·ä½ é¡¹ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç­”æ¡ˆã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å†³ç­–æ ‘è¿·ä½ é¡¹ç›®çš„è¯´æ˜ã€‚


è¿è¡Œèµ·æ¥ä½¿ç”¨ decision_tree/dt_author_id.py ä¸­çš„åˆå§‹ä»£ç ï¼Œå‡†å¤‡å¥½å†³ç­–æ ‘å¹¶å°†å®ƒä½œä¸ºåˆ†ç±»å™¨è¿è¡Œèµ·æ¥ï¼Œè®¾ç½® min_samples_split=40ã€‚å¯èƒ½éœ€è¦ç­‰ä¸€æ®µæ—¶é—´æ‰èƒ½å¼€å§‹è®­ç»ƒã€‚
å‡†ç¡®ç‡æ˜¯å¤šå°‘ï¼Ÿ
training time: 136.862 s0.978384527873

åŠ é€Ÿä½ ä» SVM è¿·ä½ é¡¹ç›®ä¸­äº†è§£åˆ°ï¼Œå‚æ•°è°ƒæ•´å¯ä»¥æ˜¾è‘—åŠ å¿«æœºå™¨å­¦ä¹ ç®—æ³•çš„è®­ç»ƒæ—¶é—´ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå‚æ•°å¯ä»¥è°ƒæ•´ç®—æ³•çš„å¤æ‚åº¦ï¼Œè¶Šå¤æ‚çš„ç®—æ³•é€šå¸¸è¿è¡Œèµ·æ¥è¶Šæ…¢ã€‚
æ§åˆ¶ç®—æ³•å¤æ‚åº¦çš„å¦ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡ä½ åœ¨è®­ç»ƒ/æµ‹è¯•æ—¶ç”¨åˆ°çš„ç‰¹å¾æ•°é‡ã€‚ç®—æ³•å¯ç”¨çš„ç‰¹å¾æ•°è¶Šå¤šï¼Œè¶Šæœ‰å¯èƒ½å‘ç”Ÿå¤æ‚æ‹Ÿåˆã€‚æˆ‘ä»¬å°†åœ¨â€œç‰¹å¾é€‰æ‹©â€è¿™èŠ‚è¯¾ä¸­è¯¦ç»†æ¢è®¨ï¼Œä½†ä½ ç°åœ¨å¯ä»¥æå‰æœ‰æ‰€äº†è§£ã€‚
1ã€ä»ä½ çš„æ•°æ®ä¸­æ‰¾å‡ºç‰¹å¾çš„æ•°é‡ï¼Œæ•°æ®æ˜¯ä»¥ numpy æ•°ç»„çš„å½¢å¼æ’åˆ—çš„ï¼Œå…¶ä¸­æ•°ç»„çš„è¡Œæ•°ä»£è¡¨æ•°æ®ç‚¹çš„æ•°é‡ï¼Œåˆ—æ•°ä»£è¡¨ç‰¹å¾çš„æ•°é‡ï¼›ä¸ºäº†æå–è¿™ä¸ªæ•°å€¼ï¼Œå¯ä»¥å†™ä¸€è¡Œè¿™æ ·çš„ä»£ç len(features_train[0])
3785

2ã€è¿›å…¥ tools/email_preprocess.pyï¼Œä¼šçœ‹åˆ°è¿™æ ·çš„ä»£ç ï¼šselector = SelectPercentile(f_classif, percentile=10) ï¼Œå°† percentile ä» 10 æ”¹ä¸º 1ã€‚ç°åœ¨çš„ç‰¹å¾æ•°é‡æ˜¯å¤šå°‘å‘¢ï¼Ÿ
379


3ã€ä½ è®¤ä¸º SelectPercentile èµ·åˆ°ä»€ä¹ˆä½œç”¨ï¼Ÿå…¶ä»–æ‰€æœ‰çš„éƒ½ä¸å˜çš„æƒ…å†µä¸‹ï¼Œèµ‹äºˆpercentileçš„å€¼è¾ƒå¤§æ˜¯å¦å¾—åˆ°ä¸€æ£µæ›´åŠ å¤æ‚çš„æˆ–è€…ç®€åŒ–çš„å†³ç­–æ ‘ï¼Ÿç­”ï¼šèµ‹äºˆpercentileçš„å€¼è¾ƒå¤§ï¼Œå¾—åˆ°æ›´å¤æ‚çš„å†³ç­–æ ‘ã€‚
4ã€æ³¨æ„è®­ç»ƒæ—¶é—´çš„ä¸åŒå–å†³äºç‰¹å¾çš„æ•°é‡ã€‚
5ã€å½“ percentile ç­‰äº 1 æ—¶ï¼Œå‡†ç¡®åº¦æ˜¯å¤šå°‘ï¼Ÿ
training time: 9.185 s0.966439135381


æºç åˆ†äº«https://github.com/voidking/ud120-projects
ä¹¦ç­¾æœºå™¨å­¦ä¹ å…¥é—¨https://cn.udacity.com/course/intro-to-machine-learning--ud120
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>è½¬è½½</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>SVMè¿·ä½ é¡¹ç›®</title>
    <url>/dev-ml-svm/</url>
    <content><![CDATA[é¡¹ç›®èƒŒæ™¯åœ¨æ­¤è¿·ä½ é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†è§£å†³ä¸æœ´ç´ è´å¶æ–¯è¿·ä½ é¡¹ç›®ç›¸åŒçš„ç”µå­é‚®ä»¶ä½œè€… ID é—®é¢˜ï¼Œä¸åŒçš„æ˜¯æˆ‘ä»¬å°†è¿ç”¨ SVMã€‚æˆ‘ä»¬çš„ç ”ç©¶ç»“æœå°†é˜æ˜ä¸¤ç§ç®—æ³•ä¹‹é—´çš„ä¸€äº›å®é™…å·®å¼‚ã€‚æ­¤é¡¹ç›®è¿˜å‘æˆ‘ä»¬æä¾›æ¯”æœ´ç´ è´å¶æ–¯æ›´å¤šçš„æœºä¼šæ¥ä½¿ç”¨å‚æ•°ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå°†è¿™æ ·åšã€‚


è¿è¡Œä»£ç è½¬åˆ° svm ç›®å½•ï¼ŒæŸ¥æ‰¾åˆå§‹ä»£ç  (svm/svm_author_id.py)ã€‚
ä½¿ç”¨ sklearn SVC åˆ†ç±»å™¨è¿›è¡Œå¯¼å…¥ã€åˆ›å»ºã€è®­ç»ƒå’Œé¢„æµ‹ã€‚åœ¨åˆ›å»ºåˆ†ç±»å™¨æ—¶ä½¿ç”¨çº¿æ€§å†…æ ¸ï¼ˆå¦‚æœä½ å¿˜è®°æ­¤æ­¥éª¤ï¼Œä½ ä¼šå‘ç°åˆ†ç±»å™¨è¦èŠ±å¾ˆé•¿çš„æ—¶é—´æ¥è®­ç»ƒï¼‰ã€‚
åˆ†ç±»å™¨çš„å‡†ç¡®ç‡æ˜¯å¤šå°‘ï¼Ÿ
æ—¶é—´è·Ÿä½ åœ¨æœ´ç´ è´å¶æ–¯è¿·ä½ é¡¹ç›®ä¸­æ‰€åšçš„ä¸€æ ·ï¼Œå°†è®¡æ—¶ä»£ç ç”¨äºæ‹Ÿåˆå’Œé¢„æµ‹å‡½æ•°ã€‚ä¸æœ´ç´ è´å¶æ–¯ç›¸æ¯”ï¼Œè®­ç»ƒå’Œé¢„æµ‹å¦‚ä½•è®¡æ—¶ï¼Ÿ
æœ´ç´ è´å¶æ–¯ç»“æœï¼š
training time: 1.517 s0.973265073948

SVMç»“æœï¼š
training time: 207.594 s0.984072810011

å‡å°è®­ç»ƒé›†åŠ å¿«ç®—æ³•é€Ÿåº¦çš„ä¸€ç§æ–¹å¼æ˜¯åœ¨ä¸€ä¸ªè¾ƒå°çš„è®­ç»ƒæ•°æ®é›†ä¸Šè®­ç»ƒå®ƒã€‚è¿™æ ·åšæ¢æ¥çš„æ˜¯å‡†ç¡®ç‡å‡ ä¹è‚¯å®šä¼šä¸‹é™ã€‚è®©æˆ‘ä»¬æ›´å…·ä½“åœ°æ¢è®¨è¿™ä¸ªé—®é¢˜ï¼šåœ¨è®­ç»ƒåˆ†ç±»å™¨ä¹‹å‰ï¼Œç«‹å³åŠ å…¥ä»¥ä¸‹ä¸¤è¡Œã€‚ 
features_train = features_train[:len(features_train)/100] labels_train = labels_train[:len(labels_train)/100] 

è¿™ä¸¤è¡Œæœ‰æ•ˆåœ°å°†è®­ç»ƒæ•°æ®é›†åˆ‡å‰²è‡³åŸå§‹å¤§å°çš„ 1%ï¼Œä¸¢å¼ƒæ‰ 99% çš„è®­ç»ƒæ•°æ®ã€‚ä½ å¯ä»¥ä½¿å…¶ä»–æ‰€æœ‰ä»£ç ä¿æŒä¸å˜ã€‚
ç°åœ¨çš„å‡†ç¡®ç‡æ˜¯å¤šå°‘ï¼Ÿä¿®æ”¹åSVMç»“æœï¼š
training time: 0.124 s0.884527872582

é€Ÿåº¦ä¸å‡†ç¡®ç‡å¦‚æœé€Ÿåº¦æ˜¯ä¸€ä¸ªä¸»è¦è€ƒè™‘å› ç´ ï¼ˆå¯¹äºè®¸å¤šå®æ—¶æœºå™¨å­¦ä¹ åº”ç”¨è€Œè¨€ç¡®å®å¦‚æ­¤ï¼‰ï¼Œå¹¶ä¸”å¦‚æœç‰ºç‰²ä¸€äº›å‡†ç¡®ç‡å¯åŠ å¿«ä½ çš„è®­ç»ƒ/é¢„æµ‹é€Ÿåº¦ï¼Œåˆ™ä½ å¯èƒ½ä¼šæƒ³è¿™æ ·åšã€‚
åœ¨ä»¥ä¸‹å“ªäº›åº”ç”¨ä¸­ï¼Œä½ å¯ä»¥æƒ³è±¡éå¸¸å¿«é€Ÿåœ°è¿è¡Œçš„ç®—æ³•å°¤å…¶é‡è¦ï¼Ÿ
1ã€é¢„æµ‹ç”µå­é‚®ä»¶ä½œè€…2ã€æ ‡è®°ä¿¡ç”¨å¡æ¬ºè¯ˆï¼Œåœ¨æ¬ºè¯ˆå‘ç”Ÿä¹‹å‰é˜»æ­¢äº¤æ˜“3ã€Siri ä¹‹ç±»çš„è¯­éŸ³è¯†åˆ«
ç­”æ¡ˆæ˜¯2å’Œ3ã€‚
éƒ¨ç½²RBFå†…æ ¸ä¿ç•™ä¸Šä¸€ä¸ªæµ‹è¯•é¢˜ä¸­çš„è®­ç»ƒé›†ä»£ç æ®µï¼Œä»¥ä¾¿ä»åœ¨ 1% çš„å®Œæ•´è®­ç»ƒé›†ä¸Šè¿›è¡Œè®­ç»ƒã€‚å°† SVM çš„å†…æ ¸æ›´æ”¹ä¸ºâ€œrbfâ€ã€‚
è¿™ä¸ªæ›´å¤æ‚çš„å†…æ ¸ç»™å‡ºçš„å‡†ç¡®ç‡æ˜¯å¤šå°‘ï¼Ÿ
training time: 0.139 s0.616040955631

ä¼˜åŒ–Cå‚æ•°ä¿æŒè®­ç»ƒé›†å¤§å°ä¸å˜ï¼Œå¹¶ä¸”ä¿ç•™ä¸Šä¸€ä¸ªæµ‹è¯•é¢˜ä¸­çš„ rbf å†…æ ¸ï¼Œä½†æ˜¯å°è¯•å¤šä¸ª C å€¼ï¼ˆæ¯”å¦‚ï¼š10.0ã€100.ã€1000. å’Œ 10000.ï¼‰ã€‚
å“ªä¸ªç»™å‡ºçš„å‡†ç¡®ç‡æœ€é«˜ï¼Ÿç»“æœä¾æ¬¡ä¸ºï¼š
training time: 0.142 s0.616040955631training time: 0.139 s0.616040955631training time: 0.132 s0.821387940842training time: 0.127 s0.892491467577

ä¼˜åŒ–Cåçš„å‡†ç¡®ç‡åœ¨ä½ ä¸º RBF å†…æ ¸ä¼˜åŒ–äº† C å€¼åï¼Œä½ ä¼šè·å¾—æ€æ ·çš„å‡†ç¡®ç‡ï¼Ÿè¯¥ C å€¼æ˜¯å¦å¯¹åº”æ›´ç®€å•æˆ–è€…æ›´å¤æ‚çš„å†³ç­–è¾¹ç•Œï¼Ÿ
ï¼ˆå¦‚æœä½ ä¸ç¡®å®šå¤æ‚åº¦ï¼Œè¯·å›é¡¾æœ¬èŠ‚è¯¾æœ‰å…³â€œSVM C å‚æ•°â€çš„è§†é¢‘ã€‚ä½ åœ¨è¯¥å¤„å‘ç°çš„ç»“æœåŒæ ·é€‚ç”¨äºæ­¤å¤„ï¼Œä¸è¿‡ï¼Œåœ¨ç®€å•çš„æ•£ç‚¹å›¾ä¸­ç”»å‡ºå†³ç­–è¾¹ç•Œç°åœ¨å˜å¾—æ›´åŠ å›°éš¾ç”šè‡³ä¸å¯èƒ½ã€‚ï¼‰
ä¼˜åŒ–Cåä½¿ç”¨å®Œæ•´è®­ç»ƒé›†ä½ å·²ç»ä¸º RBF å†…æ ¸ä¼˜åŒ–äº† Cï¼Œç°åœ¨æ¢å¤ä¸ºä½¿ç”¨å®Œæ•´çš„è®­ç»ƒé›†ã€‚è¾ƒå¤§çš„è®­ç»ƒé›†å¾€å¾€èƒ½æé«˜ç®—æ³•çš„æ€§èƒ½ï¼Œæ‰€ä»¥ï¼ˆé€šè¿‡åœ¨å¤§æ•°æ®é›†ä¸Šè°ƒæ•´ C å’Œè¿›è¡Œè®­ç»ƒï¼‰æˆ‘ä»¬åº”å¾—åˆ°ç›¸å½“ä¼˜åŒ–çš„ç»“æœã€‚
ç»è¿‡ä¼˜åŒ–çš„ SVM çš„å‡†ç¡®ç‡æ˜¯å¤šå°‘ï¼Ÿ
training time: 142.459 s0.990898748578

ä»SVMæå–é¢„æµ‹ä½ çš„ SVMï¼ˆ0 æˆ– 1ï¼Œåˆ†åˆ«å¯¹åº” Sara å’Œ Chrisï¼‰å°†æµ‹è¯•é›†ä¸­çš„å…ƒç´ 10ã€å…ƒç´ 26å’Œå…ƒç´ 50åˆ†åˆ«é¢„æµ‹ä¸ºå“ªä¸€ç±»ï¼Ÿ
ï¼ˆä½¿ç”¨ RBF å†…æ ¸ã€C=10000 å’Œ 1% çš„è®­ç»ƒé›†ã€‚é€šå¸¸ï¼Œä½¿ç”¨å®Œæ•´çš„è®­ç»ƒé›†èƒ½è·å¾—æœ€å¥½çš„ç»“æœï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°ä½¿ç”¨ 1% çš„å®Œæ•´è®­ç»ƒé›†ä¸ä»…å¤§å¹…åŠ å¿«è®¡ç®—è¿‡ç¨‹ï¼Œè€Œä¸”ä¸ä¼šæ”¹å˜æˆ‘ä»¬çš„ç»“æœï¼Œå› æ­¤ä½ åœ¨è¿™é‡Œå¯ä»¥éšæ„ä½¿ç”¨è¯¥å¿«æ·ç®—æ³•ã€‚ï¼‰
è€Œä¸”éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œæˆ‘ä»¬è¿™é‡Œç»™å‡ºçš„æ•°æ®ç‚¹æ•°å­— (10, 26, 50) å‡è®¾ä½¿ç”¨çš„æ˜¯é›¶ç´¢å¼•åˆ—è¡¨ã€‚å› æ­¤ï¼Œä½¿ç”¨ç±»ä¼¼äº answer=predictions[100] çš„è¡¨è¾¾å¼å¯æ‰¾åˆ°å…ƒç´  # 100 çš„æ­£ç¡®ç­”æ¡ˆã€‚
é¢„æµ‹Chrisçš„é‚®ä»¶æ•°é‡There are over 1700 test eventsâ€“how many are predicted to be in the â€œChrisâ€ (1) class? (Use the RBF kernel, C=10000., and the full training set.) 
æµ‹è¯•äº‹ä»¶çš„æ•°é‡è¶…è¿‡ 1700â€”â€”å…¶ä¸­å¤šå°‘é¢„æµ‹åœ¨â€œChrisâ€ (1) ç±»ä¸­ï¼Ÿï¼ˆä½¿ç”¨ RBF å†…æ ¸ã€C=10000. ä»¥åŠå®Œæ•´çš„è®­ç»ƒé›†ã€‚ï¼‰
training time: 137.599 s877

éƒ¨ç½²SVMæœ€åæé†’å¸Œæœ› Sebastian åœ¨è¯´æœ´ç´ è´å¶æ–¯éå¸¸é€‚åˆæ–‡æœ¬æ—¶ï¼Œæ›´æ¸…æ¥šåœ°è¡¨è¾¾äº†ä»–çš„æ„æ€ã€‚å¯¹äºè¿™ä¸€å…·ä½“é—®é¢˜ï¼Œæœ´ç´ è´å¶æ–¯ä¸ä»…æ›´å¿«ï¼Œè€Œä¸”é€šå¸¸æ¯” SVM æ›´å‡ºè‰²ã€‚å½“ç„¶ï¼ŒSVM æ›´é€‚åˆè®¸å¤šå…¶ä»–é—®é¢˜ã€‚ä½ åœ¨ç¬¬ä¸€æ¬¡æ±‚è§£é—®é¢˜æ—¶å°±çŸ¥é“è¯¥å°è¯•å“ªä¸ªç®—æ³•ï¼Œè¿™æ˜¯æœºå™¨å­¦ä¹ è‰ºæœ¯å’Œç§‘å­¦æ€§çš„ä¸€ä¸ªä½“ç°ã€‚é™¤äº†é€‰æ‹©ç®—æ³•å¤–ï¼Œè§†ä½ å°è¯•çš„ç®—æ³•è€Œå®šï¼Œä½ è¿˜éœ€è¦è€ƒè™‘ç›¸åº”çš„å‚æ•°è°ƒæ•´ä»¥åŠè¿‡æ‹Ÿåˆçš„å¯èƒ½æ€§ï¼ˆç‰¹åˆ«æ˜¯åœ¨ä½ æ²¡æœ‰å¤§é‡è®­ç»ƒæ•°æ®çš„æƒ…å†µä¸‹ï¼‰ã€‚
æˆ‘ä»¬é€šå¸¸å»ºè®®ä½ å°è¯•ä¸€äº›ä¸åŒçš„ç®—æ³•æ¥æ±‚è§£æ¯ä¸ªé—®é¢˜ã€‚è°ƒæ•´å‚æ•°çš„å·¥ä½œé‡å¾ˆå¤§ï¼Œä½†ä½ ç°åœ¨åªéœ€è¦å¬å®Œè¿™å ‚è¯¾ï¼Œæˆ‘ä»¬å°†å‘ä½ ä»‹ç» GridCVï¼Œä¸€ç§å‡ ä¹èƒ½è‡ªåŠ¨æŸ¥æ‰¾æœ€ä¼˜å‚æ•°è°ƒæ•´çš„ä¼˜ç§€ sklearn å·¥å…·ã€‚
æºç åˆ†äº«https://github.com/voidking/ud120-projects
ä¹¦ç­¾æœºå™¨å­¦ä¹ å…¥é—¨https://cn.udacity.com/course/intro-to-machine-learning--ud120
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>è½¬è½½</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>æœ´ç´ è´å¶æ–¯è¿·ä½ é¡¹ç›®</title>
    <url>/dev-ml-naive-bayes/</url>
    <content><![CDATA[é¡¹ç›®èƒŒæ™¯å‡ å¹´å‰ï¼ŒJ.K. ç½—ç³ï¼ˆå‡­å€Ÿã€Šå“ˆåˆ©æ³¢ç‰¹ã€‹å‡ºåï¼‰è¯•ç€åšäº†ä»¶æœ‰è¶£çš„äº‹ã€‚å¥¹ä»¥ Robert Galbraith çš„åŒ–åå†™äº†æœ¬åå«ã€ŠThe Cuckooâ€™s Callingã€‹çš„ä¹¦ã€‚å°½ç®¡è¯¥ä¹¦å¾—åˆ°ä¸€äº›ä¸é”™çš„è¯„è®ºï¼Œä½†æ˜¯å¤§å®¶éƒ½ä¸å¤ªé‡è§†å®ƒï¼Œç›´åˆ° Twitter ä¸Šä¸€ä¸ªåŒ¿åçš„çŸ¥æƒ…äººå£«è¯´é‚£æ˜¯ J.K. Rowling å†™çš„ã€‚ã€Šä¼¦æ•¦å‘¨æ—¥æ³°æ™¤å£«æŠ¥ã€‹æ‰¾æ¥ä¸¤åä¸“å®¶å¯¹ã€Šæœé¹ƒåœ¨å‘¼å”¤ã€‹å’Œ Rowling çš„ã€Šå¶å‘ç©ºç¼ºã€‹ä»¥åŠå…¶ä»–å‡ åä½œè€…çš„ä¹¦è¿›è¡Œäº†æ¯”è¾ƒã€‚åˆ†æç»“æœå¼ºæœ‰åŠ›åœ°æŒ‡å‡ºç½—ç³å°±æ˜¯ä½œè€…ï¼Œã€Šæ³°æ™¤å£«æŠ¥ã€‹ç›´æ¥è¯¢é—®å‡ºç‰ˆå•†æƒ…å†µæ˜¯å¦å±å®ï¼Œè€Œå‡ºç‰ˆå•†ä¹Ÿè¯å®äº†è¿™ä¸€è¯´æ³•ï¼Œè¯¥ä¹¦åœ¨æ­¤åä¸€å¤œæˆåã€‚


æˆ‘ä»¬ä¹Ÿå°†åœ¨æ­¤é¡¹ç›®ä¸­åšç±»ä¼¼çš„äº‹ã€‚æˆ‘ä»¬æœ‰ä¸€ç»„é‚®ä»¶ï¼Œåˆ†åˆ«ç”±åŒä¸€å®¶å…¬å¸çš„ä¸¤ä¸ªäººæ’°å†™å…¶ä¸­åŠæ•°çš„é‚®ä»¶ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä»…æ ¹æ®é‚®ä»¶æ­£æ–‡åŒºåˆ†æ¯ä¸ªäººå†™çš„é‚®ä»¶ã€‚åœ¨è¿™ä¸ªè¿·ä½ é¡¹ç›®ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æœ´ç´ è´å¶æ–¯ï¼Œå¹¶åœ¨ä¹‹åçš„é¡¹ç›®ä¸­æ‰©å±•è‡³å…¶ä»–ç®—æ³•ã€‚
æˆ‘ä»¬ä¼šå…ˆç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ã€‚æ¯ä¸ªå­—ç¬¦ä¸²ä»£è¡¨ä¸€å°ç»è¿‡é¢„å¤„ç†çš„é‚®ä»¶çš„æ­£æ–‡ï¼›ç„¶åï¼Œæˆ‘ä»¬ä¼šæä¾›ä»£ç ï¼Œç”¨æ¥å°†æ•°æ®é›†åˆ†è§£ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼ˆåœ¨ä¸‹èŠ‚è¯¾ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•è¿›è¡Œé¢„å¤„ç†å’Œåˆ†è§£ï¼Œä½†æ˜¯ç°åœ¨è¯·ä½¿ç”¨æˆ‘ä»¬æä¾›çš„ä»£ç ï¼‰ã€‚
æœ´ç´ è´å¶æ–¯ç‰¹æ®Šçš„ä¸€ç‚¹åœ¨äºï¼Œè¿™ç§ç®—æ³•éå¸¸é€‚åˆæ–‡æœ¬åˆ†ç±»ã€‚åœ¨å¤„ç†æ–‡æœ¬æ—¶ï¼Œå¸¸è§çš„åšæ³•æ˜¯å°†æ¯ä¸ªå•è¯çœ‹ä½œä¸€ä¸ªç‰¹å¾ï¼Œè¿™æ ·å°±ä¼šæœ‰å¤§é‡çš„ç‰¹å¾ã€‚æ­¤ç®—æ³•çš„ç›¸å¯¹ç®€å•æ€§å’Œæœ´ç´ è´å¶æ–¯ç‹¬ç«‹ç‰¹å¾çš„è¿™ä¸€å‡è®¾ï¼Œä½¿å…¶èƒ½å¤Ÿå‡ºè‰²å®Œæˆæ–‡æœ¬çš„åˆ†ç±»ã€‚åœ¨è¿™ä¸ªè¿·ä½ é¡¹ç›®ä¸­ï¼Œä½ å°†åœ¨è®¡ç®—æœºä¸­ä¸‹è½½å¹¶å®‰è£… sklearnï¼Œç„¶åä½¿ç”¨æœ´ç´ è´å¶æ–¯æ ¹æ®ä½œè€…å¯¹é‚®ä»¶è¿›è¡Œåˆ†ç±»ã€‚
ç¯å¢ƒå‡†å¤‡1ã€æ£€æŸ¥ä½ æ˜¯å¦è£…æœ‰å¯ç”¨çš„ pythonï¼Œç‰ˆæœ¬æœ€å¥½æ˜¯ 2.6 æˆ– 2.7ï¼ˆè¿™æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„ç‰ˆæœ¬ - å…¶ä»–ç‰ˆæœ¬åº”è¯¥ä¹Ÿå¯ä»¥ï¼Œä½†æˆ‘ä»¬ä¸æ•¢ä¿è¯ï¼‰ã€‚2ã€æˆ‘ä»¬ä¼šä½¿ç”¨ pip æ¥å®‰è£…ä¸€äº›åŒ…ã€‚é¦–å…ˆï¼Œä»æ­¤å¤„è·å–å¹¶å®‰è£… pipã€‚3ã€ä½¿ç”¨ pip å®‰è£…ä¸€ç³»åˆ— Python åŒ…ï¼š

è½¬åˆ°ç»ˆç«¯è¡Œç•Œé¢ï¼ˆè¯·å‹¿æ‰“å¼€ Pythonï¼Œåªæ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼‰
å®‰è£… sklearn: pip install scikit-learn
æ­¤å¤„åŒ…å« sklearn å®‰è£…è¯´æ˜ï¼Œå¯ä¾›å‚è€ƒ

4ã€å®‰è£…è‡ªç„¶è¯­è¨€å·¥å…·åŒ…ï¼špip install nltk5ã€è·å–æœºå™¨å­¦ä¹ ç®€ä»‹æºä»£ç ã€‚ä½ å°†éœ€è¦ git æ¥å¤åˆ¶èµ„æºåº“ï¼šgit clone https://github.com/udacity/ud120-projects.git
ä½ åªéœ€æ“ä½œä¸€æ¬¡ï¼ŒåŸºç¡€ä»£ç åŒ…å«æ‰€æœ‰è¿·ä½ é¡¹ç›®çš„åˆå§‹ä»£ç ã€‚è¿›å…¥ tools/ ç›®å½•ï¼Œè¿è¡Œ startup.pyã€‚è¯¥ç¨‹åºé¦–å…ˆæ£€æŸ¥ python æ¨¡å—ï¼Œç„¶åä¸‹è½½å¹¶è§£å‹ç¼©æˆ‘ä»¬åœ¨åæœŸå°†å¤§é‡ä½¿ç”¨çš„å¤§å‹æ•°æ®é›†ã€‚ä¸‹è½½å’Œè§£å‹ç¼©éœ€è¦ä¸€äº›æ—¶é—´ï¼Œä½†æ˜¯ä½ æ— éœ€ç­‰åˆ°å…¨éƒ¨å®Œæˆå†å¼€å§‹ç¬¬ä¸€éƒ¨åˆ†ã€‚
è¿è¡Œä»£ç åœ¨ naive_bayes/nb_author_id.py ä¸­åˆ›å»ºå’Œè®­ç»ƒæœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨ï¼Œç”¨å…¶ä¸ºæµ‹è¯•é›†è¿›è¡Œé¢„æµ‹ã€‚å‡†ç¡®ç‡æ˜¯å¤šå°‘ï¼Ÿ
training time: 1.517 s0.973265073948

åœ¨è®­ç»ƒæœŸé—´ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°ä»¥ä¸‹é”™è¯¯ï¼šâ€œç”¨æˆ·è­¦å‘Šï¼šåˆ†æ•°é‡å¤ã€‚ç»“æœå¯èƒ½å–å†³äºç‰¹å¾æ’åºï¼Œæˆ–è€…ä½ å¯¹å›å½’ä»»åŠ¡ä½¿ç”¨äº†åˆ†ç±»åˆ†æ•°ã€‚â€ è­¦å‘Šï¼ˆâ€œåˆ†æ•°é‡å¤ã€‚ç»“æœå¯èƒ½å–å†³äºç‰¹å¾æ’åºã€‚â€ï¼‰
é‚®ä»¶ä¸­ä¸¤ä¸ªä»¥ä¸Šçš„å•è¯æ°å·§å…·æœ‰ç›¸åŒçš„ä½¿ç”¨æ¨¡å¼æ—¶ï¼Œä¼šå‡ºç°è¿™ä¸€è­¦å‘Šâ€”å¯¹ç®—æ³•è€Œè¨€ï¼Œè¿™è¡¨ç¤ºä¸¤ä¸ªç‰¹å¾æ˜¯ç›¸åŒçš„ã€‚å½“é‡å¤ç‰¹å¾å‡ºç°æ—¶ï¼Œä¸€äº›ç®—æ³•å®é™…ä¸Šä¼šä¸­æ–­ï¼ˆæ•°å­¦ä¸Šæ— æ³•è¿è¡Œï¼‰ï¼Œæˆ–ç»™å‡ºå¤šä¸ªä¸åŒçš„ç­”æ¡ˆï¼ˆå–å†³äºç‰¹å¾æ’åºï¼‰ï¼Œç„¶å sklearn å‘å‡ºè­¦å‘Šã€‚è¿™ç§ä¿¡æ¯èƒ½èµ·åˆ°å¸®åŠ©ä½œç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— éœ€æ‹…å¿ƒã€‚
ç»ƒä¹ : ä½œè€…èº«ä»½å‡†ç¡®ç‡åœ¨æ­¤é—®é¢˜ä¸­ï¼Œä¸€äº›å­¦å‘˜åœ¨æ‰§è¡Œä»£ç æ—¶ä¼šé‡åˆ°å†…å­˜é—®é¢˜ã€‚ä¸ºäº†é™ä½è¿è¡Œä»£ç æ—¶çœ‹åˆ°å†…å­˜é”™è¯¯çš„æç¤ºï¼Œæˆ‘ä»¬å»ºè®®ä½ ä½¿ç”¨ RAM è‡³å°‘ä¸º 2GB çš„è®¡ç®—æœºã€‚å¦‚æœä½ å‘ç°ä»£ç é€ æˆå†…å­˜é”™è¯¯ï¼Œä½ ä¹Ÿå¯ä»¥å°è¯•åœ¨ email_preprocess.py æ–‡ä»¶ä¸­è®¾ç½® test_size = 0.5ã€‚
å¯¹åˆ†ç±»å™¨è®¡æ—¶æˆ‘ä»¬ä¹‹å‰æœªæ˜ç¡®æåŠçš„ä¸€ä¸ªé‡è¦ä¸»é¢˜æ˜¯ä½•æ—¶è®­ç»ƒå’Œæµ‹è¯•ç®—æ³•ã€‚åœ¨ä½ åˆ†ç±»å™¨æ‰€åœ¨è¡Œçš„ä¸Šæ–¹å’Œä¸‹æ–¹æ’å…¥ä¸¤è¡Œä»£ç ï¼Œå°±åƒè¿™æ ·ï¼š
t0 = time()&lt; ä½ çš„ clf.fit() ä»£ç è¡Œ &gt;print &#x27;training time:&#x27;, round(time()-t0, 3), &#x27;s&#x27;

åœ¨ä½ çš„ clf.predict() ä»£ç è¡Œå‰åä¹ŸåŠ ä¸Šè¿™æ®µä»£ç ï¼Œè¿™æ ·ä½ å¯ä»¥æ¯”è¾ƒè®­ç»ƒåˆ†ç±»å™¨çš„æ‰€éœ€æ—¶é—´ï¼Œå¹¶ä½œå‡ºé¢„æµ‹ã€‚è®­ç»ƒå’Œé¢„æµ‹å“ªä¸€ä¸ªæ›´å¿«ï¼Ÿ
æˆ‘ä»¬ä¼šæŠŠæœ´ç´ è´å¶æ–¯çš„ç”¨æ—¶ä¸å…¶ä»–å‡ ç§ç®—æ³•æ¯”è¾ƒï¼Œæ‰€ä»¥è¯·è®°ä¸‹ä½ å¾—åˆ°çš„æ—¶é—´å’Œå‡†ç¡®ç‡ï¼Œåœ¨ä¸‹ä¸€ä¸ªè¿·ä½ é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬è¿˜ä¼šç”¨åˆ°ã€‚
æºç åˆ†äº«https://github.com/voidking/ud120-projects
ä¹¦ç­¾æœºå™¨å­¦ä¹ å…¥é—¨https://cn.udacity.com/course/intro-to-machine-learning--ud120
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>è½¬è½½</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>æ»´æ»´ç®—æ³•å¤§èµ›</title>
    <url>/dev-didi-competition/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡è½¬è½½è‡ªä¼˜è¾¾å­¦åŸã€Šæœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆã€‹
å…¨çƒé¢†å…ˆçš„å‡ºè¡Œæ–¹æ¡ˆæä¾›å•†æ»´æ»´å‡ºè¡Œåœ¨2016å¹´5æœˆåˆ°7æœˆæˆåŠŸä¸¾åŠäº†ç¬¬ä¸€å±Šç®—æ³•å¤§èµ›å¹¶å–å¾—äº†åœ†æ»¡çš„æˆåŠŸã€‚ä¼˜è¾¾å­¦åŸä½œä¸ºååŠæ–¹ï¼Œä¹Ÿæ·±åˆ»åœ°æ„Ÿå—åˆ°äº†å­¦ç”Ÿå¯¹è§£å†³åŸºäºä¼ä¸šçœŸå®æ•°æ®é¢˜ç›®çš„çƒ­æƒ…ã€‚ä¸ºäº†è®©æ›´å¤šçš„å­¦ç”Ÿèƒ½å¤Ÿæœ‰æœºä¼šå¾—åˆ°è¿™æ ·çš„é”»ç‚¼ï¼Œæˆ‘ä»¬ç‰¹åœ°ä¸æ»´æ»´å‡ºè¡Œåä½œï¼ŒæŠŠç®—æ³•æ¯”èµ›çš„é¢˜ç›®ä½œä¸ºçº³ç±³å­¦ä½ä¸­çš„ä¸€ä¸ªå¯é€‰é¡¹ç›®ã€‚
é¡¹ç›®åœ¨è®¾è®¡æ—¶ç»¼åˆè€ƒé‡äº†çº³ç±³å­¦ä½çš„å†…å®¹ä¸æ»´æ»´å‡ºè¡Œçš„æ‹›è˜è¦æ±‚ã€‚è®©ä½ èƒ½å¤ŸæŠŠå­¦åˆ°çš„å†…å®¹åº”ç”¨åœ¨çœŸå®ä¼ä¸šæ•°æ®ä¸­ã€‚å®Œæˆé¡¹ç›®çš„ä¼˜ç§€è€…å¯ä»¥å¾—åˆ°æ»´æ»´å‡ºè¡Œçš„è¯ä¹¦ã€‚ä¸ºä½ çš„ç®€å†æ·»ç –åŠ ç“¦ã€‚


é¡¹ç›®åˆ¶å®šåŸåˆ™ï¼š

æ»´æ»´å‡ºè¡ŒæŒ‰ç…§è‡ªèº«æ‹›è˜çš„éœ€æ±‚è®¾è®¡é¡¹ç›®ã€‚
ä¼˜è¾¾å­¦åŸç»“åˆæœºå™¨å­¦ä¹ çº³ç±³å­¦ä½çš„è¯¾ç¨‹å†…å®¹è¿›è¡Œå¾®è°ƒã€‚
ç•™ä¸‹è¶³å¤Ÿå¤šçš„è‡ªå®šç©ºé—´ç»™å­¦ç”Ÿè‡ªç”±å‘æŒ¥ï¼Œä¹Ÿå¯ä¾æ­¤æ›´å¥½å¾—åŒºåˆ†å­¦ç”Ÿæ°´å¹³ã€‚

é¡¹ç›®ä»‹ç»åœ¨å‡ºè¡Œé—®é¢˜ä¸Šï¼Œä¸­å›½å¸‚åœºäººæ•°å¤šã€äººå£å¯†åº¦å¤§ï¼Œæ€»ä½“çš„å‡ºè¡Œé¢‘ç‡è¿œé«˜äºå…¶ä»–å›½å®¶ï¼Œè¿™ç§æƒ…å†µåœ¨å¤§åŸå¸‚å°¤ä¸ºæ˜æ˜¾ã€‚ç„¶è€Œï¼Œæˆªè‡³ç›®å‰ä¸­å›½æ‹¥æœ‰æ±½è½¦çš„äººå£åªæœ‰ä¸åˆ°10%ï¼Œè¿™æ„å‘³ç€åœ¨ä¸­å›½äººä»¬çš„å‡ºè¡Œæ›´åŠ ä¾èµ–äºå‡ºç§Ÿè½¦ã€å…¬å…±äº¤é€šç­‰å¸‚åœºæä¾›çš„æœåŠ¡ã€‚å¦ä¸€æ–¹é¢ï¼Œæ»´æ»´å‡ºè¡Œå é¢†äº†å›½å†…ç»å¤§éƒ¨åˆ†çš„ç½‘ç»œå‘¼å«å‡ºè¡Œå¸‚åœºï¼Œé¢å¯¹ç€å·¨å¤§çš„æ•°æ®é‡ä»¥åŠä¸æ—¥ä¿±å¢çš„æ•°æ®å¤„ç†éœ€æ±‚ã€‚æˆªè‡³ç›®å‰ï¼Œæ»´æ»´å‡ºè¡Œå¹³å°æ—¥å‡éœ€å¤„ç†1100ä¸‡è®¢å•ï¼Œéœ€è¦åˆ†æçš„æ•°æ®é‡è¾¾åˆ°50TBï¼Œè·¯å¾„è§„åˆ’æœåŠ¡è¯·æ±‚è¶…è¿‡90äº¿ã€‚é¢å¯¹å¦‚æ­¤åºæ‚çš„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä¸æ–­å‡çº§ã€å®Œå–„ä¸åˆ›æ–°èƒŒåçš„äº‘è®¡ç®—ä¸å¤§æ•°æ®æŠ€æœ¯ï¼Œä»è€Œä¿è¯æ•°æ®åˆ†æåŠç›¸å…³åº”ç”¨çš„ç¨³å®šï¼Œå®ç°é«˜é¢‘å‡ºè¡Œä¸‹çš„è¿åŠ›å‡è¡¡ã€‚ä¾›éœ€é¢„æµ‹å°±æ˜¯å…¶ä¸­çš„ä¸€ä¸ªå…³é”®é—®é¢˜ã€‚
ä¾›éœ€é¢„æµ‹çš„ç›®æ ‡æ˜¯å‡†ç¡®é¢„æµ‹å‡ºç»™å®šåœ°ç†åŒºåŸŸåœ¨æœªæ¥æŸä¸ªæ—¶é—´æ®µçš„å‡ºè¡Œéœ€æ±‚é‡åŠéœ€æ±‚æ»¡è¶³é‡ã€‚è°ƒç ”å‘ç°ï¼ŒåŒä¸€åœ°åŒºä¸åŒæ—¶é—´æ®µçš„è®¢å•å¯†åº¦æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¾‹å¦‚å¤§å‹å±…ä½åŒºåœ¨æ—©é«˜å³°æ—¶æ®µçš„å‡ºè¡Œéœ€æ±‚æ¯”è¾ƒæ—ºç››ï¼Œè€Œå•†åŠ¡åŒºåˆ™åœ¨æ™šé«˜å³°æ—¶æ®µçš„å‡ºè¡Œéœ€æ±‚æ¯”è¾ƒæ—ºç››ã€‚å¦‚æœèƒ½é¢„æµ‹åˆ°åœ¨æœªæ¥çš„ä¸€æ®µæ—¶é—´å†…æŸäº›åœ°åŒºçš„å‡ºè¡Œéœ€æ±‚é‡æ¯”è¾ƒå¤§ï¼Œå°±å¯ä»¥æå‰å¯¹è¥è¿è½¦è¾†æä¾›ä¸€äº›å¼•å¯¼ï¼ŒæŒ‡å‘æ€§åœ°æé«˜éƒ¨åˆ†åœ°åŒºçš„è¿åŠ›ï¼Œä»è€Œæå‡ä¹˜å®¢çš„æ•´ä½“å‡ºè¡Œä½“éªŒã€‚

é—®é¢˜å®šä¹‰ã€æ•°æ®æè¿°åŠå¸¸è§é—®é¢˜
æ•°æ®é›†ä¸‹è½½

é¡¹ç›®æäº¤æäº¤å’Œè¯„ä¼°ä½ çš„é¡¹ç›®å°†ç”±ä¼˜è¾¾å­¦åŸé¡¹ç›®å¯¼å¸ˆæ ¹æ®æ­¤è¦æ±‚è¿›è¡Œè¯„ä¼°ã€‚ æäº¤å‰è¯·åŠ¡å¿…ä»”ç»†æŸ¥çœ‹æ­¤è¦æ±‚ã€‚æ‰€æœ‰æ ‡å‡†å¿…é¡»â€œç¬¦åˆè§„æ ¼â€æ‰èƒ½é€šè¿‡ã€‚

éœ€æäº¤ä¸€ä»½PDFæ ¼å¼çš„é¡¹ç›®æŠ¥å‘Šï¼Œè¦æ±‚è§è¿™é‡Œã€‚
è§£é¢˜ä»£ç éœ€ä½¿ç”¨ python 2.7 çš„ ipynb æˆ– py ä¸ºåç¼€çš„æ–‡ä»¶ã€‚ï¼ˆåç»­ä¼šå¼€æ”¾æ›´å¤šç¼–ç¨‹è¯­è¨€ï¼‰
ä»£ç è¿è¡Œè¯´æ˜æ–‡ä»¶ã€‚çº¯æ–‡æœ¬æˆ–markdownæ ¼å¼ï¼Œå†™æ˜è¿è¡Œä½ çš„ä»£ç æ‰€éœ€è¦çš„åº“ï¼Œä»–ä»¬çš„å®‰è£…æ–¹æ³•å’Œè¿è¡Œæ–¹æ³•
é¢„æµ‹ç»“æœ: çº¯æ–‡æœ¬æˆ–CSVæ–‡ä»¶ã€‚

å¯¹é¡¹ç›®è¦æ±‚æœ‰ç–‘é—®è¯·è‡´ä¿¡ &#115;&#117;&#112;&#112;&#x6f;&#x72;&#x74;&#64;&#x79;&#x6f;&#x75;&#100;&#97;&#120;&#x75;&#101;&#x2e;&#x63;&#x6f;&#109;
å‡†å¤‡å¥½æäº¤é¡¹ç›®åï¼Œè¯·ç‚¹å‡»ä¸‹ä¸€é¡¹ï¼Œåœ¨â€œé¡¹ç›®æäº¤â€å°èŠ‚ä¸­æäº¤ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>è½¬è½½</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆæ±‚èŒé¢è¯•</title>
    <url>/dev-ml-interview/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡è½¬è½½è‡ªä¼˜è¾¾å­¦åŸã€Šæœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆã€‹
ç®€å†é¡¹ç›®åœ¨å·¥ä½œç”³è¯·å’Œåº”è˜ä¸­ï¼Œç®€å†æ˜¯å¿…å¤‡å“ã€‚ä¸€ä»½å¥½çš„ç®€å†ï¼Œå¿…é¡»å¥‘åˆå²—ä½éœ€æ±‚ã€‚åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œä½ éœ€è¦æ‰¾åˆ°ä¸€æ¡æ‹›è˜ä¿¡æ¯ï¼Œç„¶åæ ¹æ®å²—ä½çš„èŒè´£è¦æ±‚ï¼Œæ›´æ”¹ä½ çš„ç®€å†ã€‚ä¸€æ—¦ä½ å®Œæˆæ­¤é¡¹ç›®ï¼Œä½ å°±æˆåŠŸå­¦ä¼šäº†å®šå‘å¯»æ‰¾çš„æ–¹æ³•ï¼Œä½ å°±å¯ä»¥éšæ—¶å»æ‰¾å·¥ä½œäº†ï¼


é¡¹ç›®èµ„æº1ã€é¡¹ç›®è¯„å®¡æ ‡å‡†ã€‚ä¼˜è¾¾å­¦åŸçš„é¡¹ç›®å¯¼å¸ˆå°†æ ¹æ®æ­¤è¯„å®¡æ ‡å‡†æ£€æŸ¥ä½ çš„é¡¹ç›®ã€‚2ã€é¡¹ç›®æ£€æŸ¥è¡¨ã€‚æäº¤é¡¹ç›®å‰ï¼Œä½ å¯ä»¥å¯¹ç…§è¿™ä¸ªæ£€æŸ¥è¡¨æ£€æŸ¥ä½ çš„é¡¹ç›®ã€‚3ã€èŒä¸šèµ„æºä¸­å¿ƒã€‚åœ¨è¿™é‡Œæ‰¾åˆ°æ›´å¤šå…³äºå¦‚ä½•æ”¹è¿›ä½ çš„ç®€å†çš„è´´å£«ã€‚
ç®€å†æ¨¡æ¿ä»é›¶å¼€å§‹ç¼–å†™ä½ è‡ªå·±çš„ç®€å†ï¼Œè¿™æ ·ä½ çš„ç®€å†ä¸€å®šæ˜¯ç‹¬ä¸€æ— äºŒçš„

Resume Genius: Resume Templates
Resume Builder

æŠ€å·§åœ¨ä»‹ç»ä½ å‚ä¸è¿‡çš„é¡¹ç›®å’Œå·¥ä½œç»éªŒæ—¶ï¼Œå°½é‡ä½¿ç”¨ç‚¹åˆ—è¡¨ï¼ˆbullet pointsï¼‰ï¼š

ç”¨åŠ¨è¯å¼€å¤´
åŒ…å«æ•°å­—
å¼ºè°ƒç»“æœ
ä¼¯å…‹åˆ©å¤§å­¦åŠ¨è¯è¡¨ï¼ˆé€‚ç”¨äºç®€å†å’Œæ±‚èŒä¿¡ï¼‰

ç®€å†é¡¹ç›®æäº¤è¯´æ˜ï¼šæ­¤é¡¹ç›®ç›®å‰ä»…æä¾›è‹±æ–‡å®¡é˜…æœåŠ¡ï¼Œä½ éœ€è¦ç”¨è‹±æ–‡å®Œæˆé¡¹ç›®ã€‚
é¡¹ç›®å¯¼å¸ˆä¼šæ ¹æ®è¯¥è¯„ä¼°å‡†åˆ™ï¼ˆä¸ä½ åˆ¶ä½œç®€å†æ—¶éµå¾ªçš„æ¸…å•ç›¸ç¬¦ï¼‰å¯¹ä½ çš„ç®€å†é¡¹ç›®è¿›è¡Œå®¡æ ¸ã€‚
æäº¤è¯´æ˜1ã€åœ¨ä¼˜è¾¾å­¦åŸèŒä¸šèµ„æºä¸­å¿ƒæ‰¾åˆ°ä¸€ä¸ªæ‹›è˜å²—ä½ï¼Œè¦ä¹ˆæ˜¯ä½ ç°åœ¨å°±å¯ä»¥ç”³è¯·çš„ï¼Œè¦ä¹ˆæ˜¯ä½ åœ¨çº³ç±³å­¦ä½æ¯•ä¸šåä¼šç”³è¯·çš„ã€‚åˆ¤æ–­è¿™ä¸ªå²—ä½æ˜¯å¦é€‚åˆä½ ã€‚ï¼ˆæ³¨ï¼šå¦‚æœä½ åˆæ­¥åˆ¤æ–­æœ‰75%çš„å¯èƒ½å¯ä»¥è¾¾åˆ°è¯¥å·¥ä½œè¦æ±‚ï¼Œé‚£ä¹ˆä½ å°±å¯èƒ½å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å€™é€‰äººï¼Œä½ å°±è¯¥å»è¯•ä¸€ä¸‹ï¼ï¼‰2ã€æ ¹æ®è¿™ä¸ªå²—ä½çš„å…·ä½“è¦æ±‚ï¼Œä¿®æ”¹å®Œå–„ä½ çš„ç®€å†ã€‚3ã€åœ¨æäº¤æ—¶ï¼Œåœ¨â€œç»™å®¡æ ¸äººç•™è¨€â€ä¸€é¡¹ä¸­å¤åˆ¶å¹¶ç²˜è´´å²—ä½å†…å®¹ï¼Œæˆ–æ˜¯ç›´æ¥æ”¾ç½®é“¾æ¥ã€‚4ã€å‚è€ƒï¼šåœ¨ç®€å†ä¸­åˆ é™¤æ•æ„Ÿä¿¡æ¯ï¼Œä¾‹å¦‚ä½ çš„ç”µè¯å·ç ã€‚5ã€æäº¤ pdf ç‰ˆæœ¬çš„ç®€å†ã€‚
åˆ†äº«ç®€å†ä¼˜è¾¾å­¦åŸä¸é›‡ä¸»åˆä½œï¼Œé›‡ä¸»å¯ä»¥é€šè¿‡ä½ çš„ä¸“ä¸šèµ„æ–™ä¸ä¼˜è¾¾å­¦åŸå­¦å‘˜å’Œæ¯•ä¸šç”Ÿè”ç³»ã€‚ ä¸€æ—¦ä½ å®Œæˆäº†ç®€å†å®¡æ ¸ï¼Œè¯·åŠ¡å¿…å°†ä½ å·²å®¡æ ¸çš„ç®€å†æ›´æ–°åˆ°ä½ çš„ä¸ªäººèµ„æ–™ä¸­ï¼
æ±‚èŒä¿¡é¡¹ç›®åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œä½ éœ€è¦æ’°å†™ä¸€å°æ±‚èŒä¿¡æ¥æè¿°ä½ æ‰€å…·å¤‡çš„å„é¡¹æŠ€èƒ½ã€‚æ›´é‡è¦çš„æ˜¯åœ¨ä¿¡ä¸­é™ˆè¿°ä½ å¯¹è¿™ä»½å·¥ä½œçš„çƒ­æƒ…ã€‚æˆ‘ä»¬å»ºè®®ä½ é’ˆå¯¹ä¸€ä¸ªä½ åœ¨ç½‘ä¸Šæ‰¾åˆ°å·¥ä½œæè¿°æ¥æ’°å†™è¿™å°æ±‚èŒä¿¡ã€‚æˆ‘ä»¬å¸Œæœ›æ‰€æœ‰çš„å­¦ç”Ÿèƒ½å¤Ÿé€šè¿‡ç»ƒä¹ æ’°å†™æ±‚èŒä¿¡æ¥å­¦ä¹ å¦‚ä½•æŠŠä½ çš„æŠ€èƒ½ä¸å·¥ä½œèŒä½çš„è¦æ±‚è”ç³»èµ·æ¥ã€‚
è¯´æ˜ï¼šæ­¤é¡¹ç›®ç›®å‰ä»…æä¾›è‹±æ–‡å®¡é˜…æœåŠ¡ï¼Œä½ éœ€è¦ç”¨è‹±æ–‡å®Œæˆé¡¹ç›®ã€‚
é¡¹ç›®å¯¼å¸ˆä¼šæ ¹æ®è¯¥è¯„ä¼°å‡†åˆ™ï¼ˆä¸ä½ åˆ¶ä½œç®€å†æ—¶éµå¾ªçš„æ¸…å•ç›¸ç¬¦ï¼‰å¯¹ä½ çš„ç®€å†é¡¹ç›®è¿›è¡Œå®¡æ ¸ã€‚
æäº¤å‡†å¤‡å¥½æäº¤æ±‚èŒä¿¡åï¼Œä½ éœ€è¦ï¼š
1ã€åˆ é™¤/åŒ¿ååŒ–ä½ çš„æ±‚èŒä¿¡ä¸Šçš„æ‰€æœ‰ä¸ªäººè”ç³»äººä¿¡æ¯ï¼Œä»¥é˜²æ³„æ¼éšç§ã€‚2ã€åˆ›å»º PDF æ ¼å¼çš„ç®€å†ï¼Œè¿™æ ·ä½ çš„ç®€å†åœ¨ä¸åŒæ“ä½œç³»ç»Ÿ/è½¯ä»¶/å±å¹•ä¸­æœ‰ä¸€è‡´çš„ç‰ˆé¢æ ·å¼ã€‚3ã€ç‚¹å‡»ä¸‹æ–¹çš„â€œæäº¤é¡¹ç›®â€æŒ‰é’®ï¼Œå¹¶æ ¹æ®è¯´æ˜æ“ä½œã€‚4ã€åœ¨â€œå‘ŠçŸ¥å®¡æ ¸å‘˜â€ä¸­ï¼Œè¯·åŒ…æ‹¬ä»»ä½•æœ‰å…³ä½ çš„èŒä¸šç›®æ ‡ï¼ˆå¦‚ç”³è¯·çš„å·¥ä½œæˆ–é¢†åŸŸï¼‰ï¼Œæˆ–ä»»ä½•æœ‰æ„åç¦»è¯„ä¼°å‡†åˆ™æƒ…å†µçš„è¯¦ç»†ä¿¡æ¯ã€‚
æ³¨æ„ï¼šæˆ‘ä»¬æœ€å¤šéœ€è¦ä¸€å‘¨çš„æ—¶é—´æ¥å¯¹é¡¹ç›®è¿›è¡Œè¯„åˆ†ï¼Œä½†å¤šæ•°æƒ…å†µä¸‹æ— éœ€ä¸€å‘¨ã€‚é¡¹ç›®è¯„å®¡å®Œæˆåï¼Œä½ ä¼šæ”¶åˆ°ç”µå­é‚®ä»¶ã€‚å¦‚æœä½ åœ¨æäº¤é¡¹ç›®æ—¶é‡åˆ°é—®é¢˜ï¼Œæˆ–è€…æƒ³æŸ¥çœ‹æäº¤çŠ¶æ€ï¼Œè¯·å‘é€ç”µå­é‚®ä»¶è‡³ &#115;&#117;&#x70;&#112;&#x6f;&#114;&#116;&#x40;&#x79;&#111;&#x75;&#x64;&#x61;&#120;&#x75;&#101;&#46;&#99;&#x6f;&#x6d;ã€‚
GitHubä¸ªäººèµ„æ–™é¡¹ç›®ä½ çš„GitHubä¸ªäººèµ„æ–™å±•ç¤ºä½ åˆ›å»ºçš„é¡¹ç›®ï¼Œå¹¶è®©ä»–äººäº†è§£ä½ çš„å·¥ä½œé£æ ¼å’Œæäº¤é¢‘ç‡ã€‚é€šè¿‡å±•ç¤ºä½ å¯¹ GitHub çš„ç†Ÿæ‚‰ç¨‹åº¦ï¼Œå…¶ä»–å¼€å‘äººå‘˜å’Œæ‹›è˜ç»ç†èƒ½å¤ŸçŸ¥é“ä½ æ‹¥æœ‰ä»–ä»¬éœ€è¦èƒ½åŠ›ï¼Œä½ å°±æ˜¯ä»–ä»¬æ­£åœ¨å¯»æ‰¾çš„äººã€‚ä½ çš„ä»£ç åº“åº”è¡¨æ˜ä½ è®¤çœŸå¯¹å¾…é¡¹ç›®ï¼Œå¹¶ä¸”èƒ½å¤Ÿç¼–å†™å¹²å‡€ã€æ ¼å¼æ­£ç¡®çš„ä»£ç ã€‚è¯·æŸ¥çœ‹ GitHub ä¸Šçš„è¿™ç¯‡å‡ºè‰²çš„åšå®¢æ–‡ç« ï¼Œäº†è§£å¦‚ä½•ç”¨ GitHub å¸®åŠ©ä½ æŒç»­å­¦ä¹ ï¼Œå‘å±•èŒä¸šç”Ÿæ¶¯ã€‚
ä¸ºä½•è¦å®Œæˆæ­¤ GitHub ä¸ªäººèµ„æ–™é¡¹ç›®ï¼ŸGitHub è¶Šæ¥è¶Šå¤šåœ°è¢«ç”¨ä½œæ‹›è˜å¹³å°ä»¥åŠæ½œåœ¨é›‡ä¸»æŸ¥çœ‹ä½ çš„ä½œå“çš„æ–¹å¼ã€‚å®ƒè¿˜æ˜¯ä¸å…¶ä»–å¼€å‘äººå‘˜å»ºç«‹è”ç³»å’Œå±•ç¤ºä½ çš„æŠ€èƒ½çš„å¥½åœ°æ–¹ã€‚
æˆ‘åº”è¯¥åšä»€ä¹ˆï¼Ÿä½ åº”è¯¥ä»¥æ‹›è˜äººå‘˜æˆ–ç”¨äººéƒ¨é—¨ç»ç†çš„çœ¼å…‰æŸ¥çœ‹ä½ çš„ GitHub ä¸ªäººèµ„æ–™ï¼Œé‡ç‚¹å…³æ³¨ä½ çš„ä¸ªäººèµ„æ–™ã€é¡¹ç›®å’Œä»£ç å¦‚ä½•å°†ä½ æç»˜æˆå…¬å¸çš„æ½œåœ¨å€™é€‰äººæˆ–é¡¹ç›®çš„åä½œè€…ã€‚
ä¸ºæ­¤ï¼Œä½ éœ€è¦æ›´æ–°ä½ çš„ GitHub ä¸ªäººèµ„æ–™ï¼Œè®©å…¶æ˜¾å¾—ä¸“ä¸šå¹¶é€‚åˆç”¨äºæ±‚èŒã€‚ä½ è¿˜è¦å®Œå–„é¡¹ç›®ï¼Œè®©å®ƒä»¬æ–¹ä¾¿æ‹›è˜äººå‘˜å’Œå¯¹ä½ çš„å·¥ä½œæ„Ÿå…´è¶£çš„ä»»ä½•å…¶ä»–äººæµè§ˆã€‚å› æ­¤ï¼Œä½ éœ€è¦æ·»åŠ è‡ªè¿°æ–‡ä»¶å’Œæ ¼å¼æ­£ç¡®çš„æäº¤è¯´æ˜ã€‚
å¦‚ä½•å®Œæˆæ­¤ GitHub ä¸ªäººèµ„æ–™é¡¹ç›®ï¼Ÿåœ¨çº³ç±³å­¦ä½è¯¾ç¨‹çš„æ­¤é˜¶æ®µï¼Œæˆ‘ä»¬å‡è®¾ä½ æŒæ¡äº† Git å’Œ GitHub çš„åŸºç¡€çŸ¥è¯†ï¼šå¦‚ä½•å…‹éš†ä»£ç åº“ï¼Œå¦‚ä½•åˆå§‹åŒ–ä»£ç åº“ï¼Œå¦‚ä½•æäº¤å¹¶æä¾›è¯´æ˜ï¼Œä»¥åŠå¦‚ä½•å‘ GitHub ä¸Šä¼ ä»£ç åº“ã€‚å¦‚æœä¸äº†è§£è¿™äº›åŸºç¡€çŸ¥è¯†ï¼Œè¯·æŸ¥çœ‹æˆ‘ä»¬çš„å¦‚ä½•ä½¿ç”¨ Git å’Œ GitHub è¯¾ç¨‹ã€‚
é¦–å…ˆé€šè¯» Udacity GitHub ä¸ªäººèµ„æ–™æ£€æŸ¥è¡¨å¤§è‡´äº†è§£ GitHub ä¸ªäººèµ„æ–™çš„ç›®æ ‡å’Œä»»åŠ¡ã€‚
æŸ¥çœ‹æ•´ä¸ªæ£€æŸ¥è¡¨ï¼›å‹¾é€‰å·²å®Œæˆçš„æ¯ä¸€é¡¹ã€‚å¯¹äºæœªå®Œæˆçš„é¡¹ï¼Œä¿®å¤å¹¶æ›´æ–° GitHub ä¸ªäººèµ„æ–™ã€‚å»ºè®®ä½ é˜…è¯»æ­¤åšå®¢æ–‡ç« ï¼Œäº†è§£æœ‰å…³ GitHub è¿™ä¸ªåœ¨çº¿å¹³å°çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚è¿˜å»ºè®®ä½ æŸ¥çœ‹èŒä¸šèµ„æºä¸­å¿ƒï¼Œè·å–æœ‰å…³æ›´æ–° GitHub ä¸ªäººèµ„æ–™çš„æ›´å¤šæŒ‡å¯¼ã€‚
å¦‚ä½•åœ¨ GitHub ä¸Šåˆ›å»º readme æ–‡æ¡£ï¼Ÿå¦‚æœå¯¹å¦‚ä½•åœ¨ GitHub ä¸Šåˆ›å»º readme æ–‡æ¡£ä¸ç†Ÿæ‚‰ï¼Œå¯æŒ‰ç…§ä¸‹é¢çš„è¯´æ˜å¼€å§‹åˆ›å»ºï¼š1ã€å•å‡»æŸä¸ªé¡¹ç›®å¹¶æ»šåŠ¨åˆ°ä¸‹é¢çš„æ–‡ä»¶åˆ—è¡¨ã€‚å¦‚æœå°šæœªåˆ›å»ºè‡ªè¿°æ–‡ä»¶ï¼Œå°†ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å›¾åƒï¼š2ã€å•å‡»æ·»åŠ è‡ªè¿°æ–‡ä»¶æŒ‰é’®ã€‚3ã€åœ¨è‡ªè¿°æ–‡ä»¶ä¸­ï¼Œè§£é‡Šé¡¹ç›®çš„ç›®æ ‡ï¼Œæœ‰å…³å¦‚ä½•ä½¿ç”¨æˆ–æŸ¥çœ‹é¡¹ç›®çš„è¯´æ˜ï¼Œä»¥åŠå¯»æ±‚ä½•ç§ç±»å‹çš„åä½œã€‚è‡ªè¿°æ–‡ä»¶æ˜¯ä½¿ç”¨ Markdown ç¼–å†™çš„ï¼›è¯·æŸ¥çœ‹ GitHub çš„ Markdown æŒ‡å—äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚
å®Œå–„ä¸ªäººèµ„æ–™çš„é€”å¾„ï¼ŸGitHub èƒ½å¤Ÿå¿«é€Ÿã€ç›´è§‚åœ°æ˜¾ç¤ºä½ çš„ä»£ç åº“æ´»åŠ¨ã€‚å› æ­¤ï¼Œå¼ºçƒˆå»ºè®®å¼€å‘äººå‘˜æ˜¾ç¤ºæ´»åŠ¨ã€‚ä½ åœ¨æ­¤é¡¹ç›®ä¸­å®Œæˆçš„ä»»åŠ¡åªæ˜¯ä¸€ä¸ªå¼€ç«¯ã€‚GitHubä¼šçªå‡ºæ˜¾ç¤ºä½ åœ¨ä¸Šä¸€å¹´çš„æ´»åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬æœ‰ä¸¤æ¡é•¿æœŸå»ºè®®ï¼š1ã€æ¯å¤©æäº¤ç»†å¾®çš„å¢é‡æ›´æ”¹ã€‚åƒä¸‹å›¾è¿™æ ·çš„ç»¿è‰²æäº¤å›¾è¡¨è¡¨æ˜ä½ æ­£ç§¯æåœ°å‘é¡¹ç›®ä¸­æ·»åŠ å†…å®¹ã€‚2ã€å‘å¼€æºä»£ç åº“ä¾›ç¨¿ã€‚å¯¹äºæ‹›è˜äººå‘˜ï¼Œè¿™æ˜¯ä¸€ä¸ªé‡è¦çš„ç§¯æä¿¡å·ã€‚å®ƒè¡¨æ˜ä½ èƒ½å¤Ÿå¾ˆå¥½åœ°ä¸ä»–äººåˆä½œï¼Œå¹¶ä¸”æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒè¡¨æ˜ä½ çœŸçš„å¯¹ç¼–ç å……æ»¡çƒ­æƒ…ï¼Œæ„¿æ„åœ¨ä¸šä½™æ—¶é—´ä¸è®¡æŠ¥é…¬åœ°åšè¿™ä»¶äº‹ã€‚å¦‚æœæƒ³çŸ¥é“å¦‚ä½•å¼€å§‹ï¼Œè¯·æŸ¥çœ‹ GitHub æŒ‡å—ã€‚
GitHubé¡¹ç›®æäº¤ä½ çš„ GitHub ä¸»é¡µæ˜¯å‘ˆç°ç»™æ½œåœ¨é›‡ä¸»çš„â€œå…³é”®è¯æ®â€ï¼Œè¯æ˜ä½ ä¼šæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èŒä½å€™é€‰äººï¼Œå› ä¸ºä»–ä»¬å¯ä»¥ä»ä¸­çœ‹åˆ°ä½ è¿‡å¾€å·¥ä½œçš„ç»†èŠ‚ã€‚ è®¸å¤šæ‹›è˜äººå‘˜ä½¿ç”¨ GitHub æœå¯»å€™é€‰è€…ï¼Œè®¸å¤šçº³ç±³å­¦ä½æ¯•ä¸šç”Ÿéƒ½å› ä¸ºä»–ä»¬åœ¨ GitHub ä¸Šçš„æ´»è·ƒè®°å½•è·å¾—äº†å·¥ä½œæœºä¼šã€‚ æ­¤å¤–ï¼Œé€šå¸¸ï¼Œä½ ä¸å…¶ä»–ç¨‹åºå‘˜ä½¿ç”¨ GitHub åˆä½œå®Œæˆé¡¹ç›®çš„â€”â€”è¿™å°†æ˜¾ç¤ºä½ èƒ½å¤Ÿåœ¨å·¥ä½œä¸­ä¸å·¥ç¨‹å›¢é˜Ÿçš„å…¶ä»–æˆå‘˜åˆä½œã€‚
åœ¨æ­¤é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†æŒ‡å¯¼ä½ å¦‚ä½•ä»æ‹›è˜ç»ç†æˆ–äººäº‹éƒ¨é—¨ç»ç†çš„è§’åº¦å®¡è§†ä½ çš„çš„ GitHub ä¸»é¡µï¼Œé‡ç‚¹å…³æ³¨ä½ çš„ä¸ªäººèµ„æ–™ã€é¡¹ç›®å’Œä»£ç ï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•èƒ½è¯æ˜ä½ æ˜¯å…¬å¸çš„æ½œåœ¨å€™é€‰äººæˆ–é¡¹ç›®éœ€è¦çš„å·¥ç¨‹å¸ˆã€‚è™½ç„¶è¿™ä¸ªé¡¹ç›®å’Œå…¶ä»–èŒä¸šå‘å±•é¡¹ç›®ä¸€æ ·æ˜¯å¯é€‰çš„ï¼Œä½†æˆ‘ä»¬å»ºè®®æ‰€æœ‰å­¦ç”Ÿéƒ½èƒ½å®Œæˆæ­¤é¡¹ç›®ã€‚
è¯´æ˜ï¼šæ­¤é¡¹ç›®ç›®å‰ä»…æä¾›è‹±æ–‡å®¡é˜…æœåŠ¡ï¼Œä½ éœ€è¦ç”¨è‹±æ–‡å®Œæˆé¡¹ç›®ä½œä¸šã€‚
æäº¤è¯´æ˜1ã€åœ¨ä½ å·²ç»è¿ç»­ç¼–ç¨‹è‡³å°‘ä¸¤å‘¨åå†æäº¤æ­¤é¡¹ç›®ï¼Œè¿™æ ·å®¡é˜…è€…æ‰èƒ½å‘ä½ æä¾›æœ‰æ•ˆçš„ç‚¹è¯„ã€‚2ã€åœ¨é¡¹ç›®æäº¤é¡µé¢ä¸­è¾“å…¥ä½ çš„ GitHub ä¸ªäººä¸»é¡µï¼ˆhttps://github.com/usernameï¼‰ã€‚
é¡¹ç›®èµ„æº1ã€é¡¹ç›®è¯„å®¡æ ‡å‡†ã€‚ä¼˜è¾¾å­¦åŸé¡¹ç›®å¯¼å¸ˆä¼šä¾æ®æ­¤è¯„å®¡æ ‡å‡†å®¡é˜…ä½ çš„é¡¹ç›®ã€‚2ã€é¡¹ç›®æ£€æŸ¥è¡¨ã€‚å¯¹ç…§æ­¤æ£€æŸ¥è¡¨ï¼Œæ£€æŸ¥ä½ æ˜¯å¦å·²ç»æ»¡è¶³é¡¹ç›®è¦æ±‚ã€‚3ã€èŒä¸šèµ„æºä¸­å¿ƒã€‚ä½ å¯ä»¥æ‰¾åˆ°å…³äºå¦‚ä½•æ”¹å–„ä½ çš„ä¸ªäººä¸»é¡µçš„è¿›ä¸€æ­¥çš„ä¿¡æ¯ã€‚
é¢†è‹±ä¸ªäººèµ„æ–™é¡¹ç›®ä½ å·²ç»åˆ›å»ºï¼ˆæˆ–æ›´æ–°ï¼‰äº†é¢†è‹±ä¸ªäººèµ„æ–™ï¼Œå®ƒç®€æ˜ã€æ¸…æ™°ï¼Œç²¾å½©åœ°è®²è¿°äº†ä½ æœ€å¥½çš„ä¸€é¢ï¼Œæ¥ä¸‹æ¥ä½ å°±å¯ä»¥æäº¤å®ƒä»¥ä¾›è¯„å®¡äº†ï¼
è¿™æ˜¯ä¸€ä¸ªå¯é€‰é¡¹ç›®ã€‚ä»…å½“ä½ å¸Œæœ›è·å¾—æœ‰å…³é¢†è‹±ä¸ªäººèµ„æ–™çš„åé¦ˆæ—¶ï¼Œæ‰åº”æäº¤ã€‚è¿™æœ€é€‚åˆæƒ³è¦æ‰¾å·¥ä½œæˆ–æƒ³æ”¹è¿›å…¶é¢†è‹±ä¸ªäººèµ„æ–™çš„å­¦ç”Ÿã€‚
ä¸ºä½•è¦å®Œæˆæ­¤é¢†è‹±ä¸ªäººèµ„æ–™é¡¹ç›®ï¼Ÿé¢†è‹±æ˜¯ä¸–ç•Œä¸Šæœ€å¤§çš„åœ¨çº¿èŒä¸šç¤¾äº¤ç½‘ç»œï¼Œåœ¨å…¨çƒæ‹¥æœ‰ 3 äº¿ç”¨æˆ·ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œå®ƒä¸ä»…ä»…æ˜¯ä¸€ä»½ä¼ ç»Ÿç®€å†ï¼é¢†è‹±è¿˜è®©ä½ èƒ½å¤Ÿåœ¨çº¿æ¨é”€è‡ªå·±çš„æˆå°±ï¼ŒåŒæ—¶å¢å¼ºè‡ªå·±çš„èŒä¸šç¤¾äº¤ç½‘ç»œã€‚
95% ä»¥ä¸Šçš„æ‹›è˜äººå‘˜ä½¿ç”¨é¢†è‹±ä½œä¸ºæ‹›è˜å·¥å…·ã€‚ä½ çš„ç®€å†åªèƒ½æ¦‚è¿°ä½ çš„èŒä¸šç”Ÿæ¶¯ï¼Œè€Œ é¢†è‹±å´å¯ä»¥ç”ŸåŠ¨åœ°æç»˜ä½ çš„æƒ…å†µï¼Œæ— è®ºä½ æœ‰ä½•èƒŒæ™¯ã€‚ç”±äºè®¸å¤šè¡Œä¸šé¢†å¯¼è€…éƒ½æ˜¯é¢†è‹±ç¤¾åŒºçš„ç§¯ææŠ•ç¨¿äººï¼Œå› æ­¤ é¢†è‹±è¿˜è®©ä½ æœ‰æœºä¼šåˆ›å»ºä¸ªäººå“ç‰Œï¼Œè®©æ½œåœ¨é›‡ä¸»ä¸ä½ è”ç³»å¹¶è·å¾—æœ‰å…³è¡Œä¸šè¶‹åŠ¿çš„è§è§£ã€‚
æˆ‘åº”è¯¥åšä»€ä¹ˆï¼Ÿä½ çš„é¢†è‹±ä¸ªäººèµ„æ–™åº”è¯¥å¸®åŠ©ä½ åœ¨ä½¿ç”¨æ­£ç¡®å…³é”®å­—çš„æœç´¢ç»“æœä¸­çªæ˜¾å‡ºæ¥ï¼Œå¹¶æŒ‡ç¤ºä½ ä¸ä»…æœ‰ç›¸åº”çš„èµ„è´¨ï¼Œè€Œä¸”ç§¯æä¸Šè¿›ã€‚ä¸ºäº†å®ç°è¿™äº›ç›®æ ‡ï¼Œè¯·è®°ä½ 3-30-180 è§„åˆ™ã€‚å®ƒæ˜¯æŒ‡æ‹›è˜äººå‘˜åªåœ¨ä½ çš„é¢†è‹±ä¸ªäººèµ„æ–™ä¸ŠèŠ±å¾ˆçŸ­çš„æ—¶é—´ã€‚æ‹›è˜äººå‘˜èŠ± 3 ç§’é’Ÿæ¥å†³å®šæ˜¯å¦ç»§ç»­æŸ¥çœ‹ä½ çš„ä¸ªäººèµ„æ–™ï¼ŒèŠ±30 ç§’é’Ÿé˜…è¯»ç¬¬ä¸€éï¼Œç„¶åèŠ± 180 ç§’é’Ÿå†³å®šæ˜¯å¦ä¸ä½ è”ç³»ã€‚æœ‰å…³ 3-30-180 è§„åˆ™çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ä¼˜è¾¾å­¦åŸçš„è¿™ç¯‡åšå®¢æ–‡ç« ã€‚
å¦‚ä½•å®Œæˆæ­¤é¢†è‹±ä¸ªäººèµ„æ–™é¡¹ç›®ï¼Ÿé¦–å…ˆé€šè¯» ä¼˜è¾¾å­¦åŸé¢†è‹±ä¸ªäººèµ„æ–™æ£€æŸ¥è¡¨ï¼Œå¤§è‡´äº†è§£é¢†è‹±ä¸ªäººèµ„æ–™çš„ç›®æ ‡å’Œä»»åŠ¡ã€‚è¿˜åº”æ£€æŸ¥åŒè¡Œçš„ä¸ªäººèµ„æ–™ï¼Œäº†è§£å¦‚ä½•æ¨ä»‹ä½ è‡ªå·±å’Œä½ çš„æŠ€èƒ½ã€‚
å¦‚æœæ˜¯ä»å¤´å¼€å§‹åˆ›å»ºé¢†è‹±ä¸ªäººèµ„æ–™ï¼Œè¯·è½¬åˆ°ä¸‹ä¸€éƒ¨åˆ†ã€‚å¦‚æœæ˜¯æ›´æ–°é¢†è‹±ä¸ªäººèµ„æ–™ï¼Œå¯ä»¥è·³åˆ°æ‹¥æœ‰é¢†è‹±ä¸ªäººèµ„æ–™åéƒ¨åˆ†ã€‚
å¦‚æœæ˜¯ä»å¤´å¼€å§‹åˆ›å»ºé¢†è‹±ä¸ªäººèµ„æ–™åˆ›å»ºä¸€ä¸ªå¸æˆ·ï¼Œå¹¶ç™»å½•é¢†è‹±ã€‚
æ‹¥æœ‰é¢†è‹±ä¸ªäººèµ„æ–™åæŸ¥çœ‹æ•´ä¸ªä¼˜è¾¾å­¦åŸé¢†è‹±ä¸ªäººèµ„æ–™æ£€æŸ¥è¡¨ï¼›å‹¾é€‰å·²å®Œæˆçš„æ¯ä¸€é¡¹ã€‚å¯¹äºæœªå®Œæˆçš„é¡¹ï¼Œä¿®å¤å¹¶æ›´æ–°ä½ çš„ é¢†è‹±ä¸ªäººèµ„æ–™ã€‚å‹¾é€‰æ‰€æœ‰é¡¹åï¼Œç§»åˆ°ä¸‹ä¸€éƒ¨åˆ†ã€‚æœ‰å…³æ›´å¤šæŒ‡å¯¼ï¼Œè¯·æŸ¥çœ‹èŒä¸šèµ„æºä¸­å¿ƒè·å–æ›´å¤šå»ºè®®å’Œèµ„æºã€‚
é¢†è‹±é¡¹ç›®æäº¤åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œä½ å°†ç«™åœ¨æ‹›è˜ç»ç†æˆ–è€…äººåŠ›éƒ¨é—¨çš„è§’åº¦æ¥å®¡è§†è‡ªå·±çš„é¢†è‹±ä¸ªäººèµ„æ–™ï¼Œå°†ç€é‡ç‚¹æ”¾åœ¨è‡ªå·±çš„å·¥ä½œç»éªŒï¼Œæ•™è‚²èƒŒæ™¯ä»¥åŠå…´è¶£çˆ±å¥½ä¸Šï¼Œå‘ä»–äººå±•ç¤ºä½ æ˜¯ä¸€ä¸ªæœ‰æ½œåŠ›ï¼Œæœ‰åˆä½œåŠ›çš„åº”è˜è€…ã€‚è™½ç„¶è¿™ä¸ªé¡¹ç›®å’Œå…¶ä»–èŒä¸šå‘å±•é¡¹ç›®ä¸€æ ·æ˜¯å¯é€‰çš„ï¼Œä½†æˆ‘ä»¬æ¨èæ‰€æœ‰å­¦å‘˜æ›´æ–°è‡ªå·±çš„é¢†è‹±ä¸ªäººèµ„æ–™ï¼Œå±•ç¤ºä½ æ–°æŒæ¡çš„æŠ€èƒ½ã€‚
è¯´æ˜ï¼šæ­¤é¡¹ç›®ç›®å‰ä»…æä¾›è‹±æ–‡å®¡é˜…æœåŠ¡ï¼Œä½ éœ€è¦ç”¨è‹±æ–‡å®Œæˆé¡¹ç›®ä½œä¸šã€‚
åé¦ˆä¼˜è¾¾å­¦åŸé¡¹ç›®å¯¼å¸ˆä¼šæ ¹æ®è¯¥æ ‡å‡†ï¼ˆä¸ä½ åˆ¶ä½œé¢†è‹±ç®€ä»‹æ—¶éµå¾ªçš„æ¸…å•ç›¸ç¬¦ï¼‰å¯¹ä½ çš„é¢†è‹±ç®€ä»‹é¡¹ç›®è¿›è¡Œå®¡æ ¸ã€‚
æäº¤å‡†å¤‡å¥½æäº¤é¢†è‹±ä¸ªäººèµ„æ–™åï¼š
1ã€è‹¥è¦æäº¤ï¼Œè¯·ç‚¹å‡»ä¸‹æ–¹çš„â€œæäº¤é¡¹ç›®â€æŒ‰é’®ï¼Œå¹¶æ ¹æ®è¯´æ˜æ“ä½œã€‚2ã€åœ¨â€œå‘ŠçŸ¥è¯„å®¡å‘˜â€ä¸­ï¼Œè¯·åŒ…æ‹¬ä»»ä½•æœ‰å…³ä½ çš„èŒä¸šç›®æ ‡ï¼ˆå¦‚é¢„æœŸå·¥ä½œé¢†åŸŸï¼‰çš„è¯¦ç»†ä¿¡æ¯ã€‚
æ³¨æ„ï¼šæˆ‘ä»¬æœ€å¤šéœ€è¦ä¸€å‘¨çš„æ—¶é—´æ¥å¯¹é¡¹ç›®è¿›è¡Œè¯„åˆ†ï¼Œä½†å¤šæ•°æƒ…å†µä¸‹æ— éœ€ä¸€å‘¨ã€‚é¡¹ç›®è¯„å®¡å®Œæˆåï¼Œä½ ä¼šæ”¶åˆ°ç”µå­é‚®ä»¶ã€‚å¦‚æœä½ åœ¨æäº¤é¡¹ç›®æ—¶é‡åˆ°é—®é¢˜ï¼Œæˆ–è€…æƒ³æŸ¥çœ‹æäº¤çŠ¶æ€ï¼Œè¯·å‘é€ç”µå­é‚®ä»¶è‡³ &#x73;&#x75;&#112;&#x70;&#x6f;&#x72;&#116;&#64;&#121;&#x6f;&#x75;&#x64;&#x61;&#120;&#117;&#101;&#x2e;&#99;&#x6f;&#109;ã€‚
æŠ€æœ¯é¢è¯•é¡¹ç›®å¯¹äºæ­¤å®æˆ˜é¡¹ç›®ï¼Œä½ éœ€è¦å›ç­”äº”ä¸ªæŠ€æœ¯é¢è¯•é—®é¢˜ï¼Œè¿™äº›é—®é¢˜æ¶‰åŠçš„æ˜¯æŠ€æœ¯é¢è¯•è¯¾ç¨‹ä¸­è®¨è®ºçš„å„ç§ä¸»é¢˜ã€‚ä½ åº”è¯¥ç”¨ Python å†™å‡ºæ¸…æ™°é«˜æ•ˆçš„ç­”æ¡ˆï¼Œå¹¶ç”¨æ–‡å­—è§£é‡Šä»£ç çš„æ•ˆç‡å’Œè®¾è®¡ç†ç”±ã€‚æˆ‘ä»¬å°†å®‰æ’åˆæ ¼çš„å®¡æ ¸è€…æ£€æŸ¥ä½ çš„ç­”æ¡ˆï¼Œå¹¶é’ˆå¯¹ä»»ä½•ç²¾å½©ä¹‹å¤„æˆ–æ¬ ç¼ºçš„æ–¹é¢åšå‡ºåé¦ˆï¼šä½ çš„è§£å†³æ–¹æ¡ˆæ˜¯æœ€é«˜æ•ˆçš„å—ï¼Ÿä½ å¾ˆå¥½åœ°è§£é‡Šäº†ä½ çš„æƒ³æ³•å—ï¼Ÿä½ çš„ä»£ç ç®€æ´æ˜“æ‡‚å—ï¼Ÿ
è¯·å›ç­”ä»¥ä¸‹é—®é¢˜ï¼š
é—®é¢˜ 1: å‡è®¾æœ‰ä¸¤ä¸ªå­—ç¬¦ä¸² s å’Œ tï¼Œè¯·åˆ¤æ–­ t çš„å˜å½¢è¯æ˜¯å¦æ˜¯ s çš„å­å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼šå¦‚æœ s = â€œudacityâ€ï¼Œt = â€œadâ€ï¼Œåˆ™å‡½æ•°è¿”å› Trueã€‚ä½ çš„å‡½æ•°å®šä¹‰åº”è¯¥ä¸ºï¼šâ€œquestion1(s, t)â€ï¼Œå¹¶è¿”å›å¸ƒå°”å€¼ True æˆ– Falseã€‚ 
é—®é¢˜ 2: è®¾æœ‰å­—ç¬¦ä¸² aï¼Œè¯·æ‰¾åˆ° a ä¸­å­˜åœ¨çš„æœ€é•¿å›æ–‡å­å­—ç¬¦ä¸²ã€‚ä½ çš„å‡½æ•°å®šä¹‰åº”è¯¥ç±»ä¼¼äºâ€œquestion2(a)â€ï¼Œå¹¶è¿”å›å­—ç¬¦ä¸²ã€‚ 
é—®é¢˜ 3: å‡è®¾æœ‰ä¸ªæ— å‘å›¾ Gï¼Œè¯·æ‰¾å‡º G ä¸­çš„æœ€å°ç”Ÿæˆæ ‘ã€‚æœ€å°ç”Ÿæˆæ ‘æ˜¯æŒ‡è¿é€šå›¾è¡¨ä¸­çš„æ‰€æœ‰é¡¶ç‚¹ä¸”è¾¹çš„æ€»æƒå€¼æœ€å°çš„å­å›¾ã€‚ä½ çš„å‡½æ•°åº”è¯¥ä»¥é‚»æ¥è¡¨ä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›ä¸€ä¸ªé‚»æ¥è¡¨ï¼Œè¡¨çš„æ ¼å¼å¦‚ä¸‹ï¼š{â€˜Aâ€™:[(â€˜Bâ€™,2)],â€™Bâ€™:[(â€˜Aâ€™,2),(â€˜Câ€™,5)],â€™Câ€™:[(â€˜Bâ€™,5)]}ã€‚é¡¶ç‚¹è¡¨ç¤ºä¸ºå”¯ä¸€å­—ç¬¦ä¸²ã€‚å‡½æ•°å®šä¹‰åº”ä¸ºâ€œquestion3(G)â€ã€‚ 
é—®é¢˜ 4: è¯·åœ¨äºŒåˆ†æŸ¥æ‰¾æ ‘ä¸­æ‰¾åˆ°ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„æœ€è¿‘å…±åŒç¥–å…ˆã€‚æœ€è¿‘å…±åŒç¥–å…ˆæ˜¯æŒ‡åŒæ—¶ä¸ºä¸¤ä¸ªèŠ‚ç‚¹çš„ç¥–å…ˆä¸”ç¦»æ ¹æœ€è¿œçš„èŠ‚ç‚¹ã€‚ä¾‹å¦‚ï¼Œæ ¹èŠ‚ç‚¹æ˜¯æ ‘ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å…±åŒç¥–å…ˆï¼Œä½†æ˜¯å¦‚æœä¸¤ä¸ªèŠ‚ç‚¹éƒ½æ˜¯æ ¹èŠ‚ç‚¹å·¦ä¾§å­èŠ‚ç‚¹çš„å­å­™ï¼Œåˆ™è¯¥å·¦ä¾§å­èŠ‚ç‚¹å¯èƒ½æ˜¯æœ€ä½å…±åŒç¥–å…ˆã€‚ä½ å¯ä»¥å‡è®¾ä¸¤ä¸ªèŠ‚ç‚¹éƒ½åœ¨æ ‘ä¸­ï¼Œè¯¥æ ‘æœ¬èº«éµå®ˆçš„æ˜¯ BST è§„åˆ™ã€‚å‡½æ•°å®šä¹‰åº”è¯¥ä¸ºâ€œquestion4(T, r, n1, n2)â€ï¼Œå…¶ä¸­ T æ˜¯ç”¨çŸ©é˜µè¡¨ç¤ºçš„æ ‘ï¼Œåˆ—è¡¨çš„ç´¢å¼•ç­‰äºè¯¥èŠ‚ç‚¹ä¸­å­˜å‚¨çš„æ•´æ•°ï¼Œ1 è¡¨ç¤ºå­èŠ‚ç‚¹ï¼Œr æ˜¯è¡¨ç¤ºæ ¹èŠ‚ç‚¹çš„éè´Ÿæ•´æ•°ï¼Œn1 å’Œ n2 æ˜¯è¡¨ç¤ºè¿™ä¸¤ä¸ªèŠ‚ç‚¹çš„éè´Ÿæ•´æ•°ï¼ŒäºŒè€…æ²¡æœ‰ç‰¹å®šçš„é¡ºåºã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæµ‹è¯•æ¡ä»¶å¯ä»¥ä¸º question4([[0,1,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[1,0,0,0,1],[0,0,0,0,0]],3,1,4)ï¼Œç­”æ¡ˆåº”ä¸º 3ã€‚ 
é—®é¢˜ 5: ä»å•é“¾è¡¨ä¸­æ‰¾åˆ°å€’æ•°ç¬¬ m ä¸ªå…ƒç´ ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå•é“¾è¡¨ä¸­æœ‰ 5 ä¸ªå…ƒç´ ï¼Œåˆ™å€’æ•°ç¬¬ 3 ä¸ªå…ƒç´ ä¹Ÿæ˜¯æ­£æ•°åœ° 3 ä¸ªå…ƒç´ ã€‚è¯¥å‡½æ•°çš„å®šä¹‰åº”ä¸ºâ€œquestion5(ll, m)â€ï¼Œå…¶ä¸­ ll æ˜¯é“¾è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œm æ˜¯â€œå€’æ•°ç¬¬ m ä¸ªå…ƒç´ â€ã€‚ä½ åº”è¯¥å¤åˆ¶ç²˜è´´ä¸‹é¢çš„ Node ç±»ï¼Œå¹¶ç”¨å®ƒæ¥è¡¨ç¤ºé“¾è¡¨ä¸­çš„èŠ‚ç‚¹ã€‚è¯·è¿”å›è¯¥ä½ç½®çš„èŠ‚ç‚¹å¯¹åº”çš„å€¼ã€‚
class Node(object):  def __init__(self, data):    self.data = data    self.next = None

æŠ€æœ¯é¢è¯•é¡¹ç›®æäº¤å¯¹äºæ­¤é¡¹ç›®ï¼Œè¯·å›ç­”äº”ä¸ªæŠ€æœ¯é¢è¯•é—®é¢˜ï¼Œå†…å®¹æ¶µç›–äº†æŠ€æœ¯é¢è¯•è¯¾ç¨‹ä¸­è®¨è®ºçš„å„ç§è¯é¢˜ã€‚è¯·ç”¨ Python å†™å‡ºç®€æ´é«˜æ•ˆçš„ç­”æ¡ˆï¼Œå¹¶ç”¨æ–‡å­—è§£é‡Šä¸‹ä»£ç çš„æ•ˆç‡å’Œè®¾è®¡ç†ç”±ã€‚æˆ‘ä»¬ä¼šå®‰æ’ä¸€ä½åˆæ ¼çš„å®¡é˜…äººå‘˜æ£€æŸ¥ä½ çš„ç­”æ¡ˆï¼Œå¹¶å¯¹å…¶ä¸­çš„äº®ç‚¹æˆ–ä¸è¶³ä¹‹å¤„åšå‡ºåé¦ˆâ€”â€”ä½ çš„è§£å†³æ–¹æ¡ˆæ˜¯æ•ˆç‡æœ€é«˜çš„å—ï¼Ÿæ¸…æ™°åœ°è§£é‡Šäº†è‡ªå·±çš„æ€è·¯äº†å—ï¼Ÿä½ çš„ä»£ç ç®€æ´ã€æ˜“äºè¯»æ‡‚å—ï¼Ÿ
æäº¤è¯´æ˜1ã€å¯¹äºæ¯ä¸ªé—®é¢˜ï¼Œè¯·ç”¨ Pythonï¼ˆç‰ˆæœ¬ 2ï¼‰å†™å‡ºè§£å†³æ–¹æ¡ˆã€‚æ‰€æœ‰è§£å†³æ–¹æ¡ˆçš„å‡½æ•°åç§°éƒ½åº”ä¸ºâ€œquestion1â€ã€â€œquestion1â€ç­‰ç­‰ã€‚å¯ä»¥æ ¹æ®éœ€è¦åˆ›å»ºå…¶ä»–è¾…åŠ©å‡½æ•°æˆ–ç±»ã€‚ä»£ç è§£å†³æ–¹æ¡ˆå¿…é¡»æ”¾åœ¨ç§°ä¸ºâ€œsolutions.pyâ€çš„æ–‡ä»¶å†…ã€‚
2ã€åœ¨åŒä¸€ .py æ–‡ä»¶ä¸­ï¼Œè¯·ä¸ºæ¯ä¸ªè§£å†³æ–¹æ¡ˆæä¾›è‡³å°‘ 3 ä¸ªæµ‹è¯•æ¡ˆä¾‹ã€‚å¯¹äºæ¯ä¸ªæµ‹è¯•æ¡ˆä¾‹ï¼Œè¯·å†™å‡ºå‡½æ•°è°ƒç”¨ï¼Œè¾“å…¥å€¼ä¸ºä½ è¦æµ‹è¯•çš„å†…å®¹ï¼Œå¹¶è¾“å‡ºåˆ°æ§åˆ¶å°ä¸Šï¼Œä¾‹å¦‚â€œprint question1()â€ã€‚åœ¨ä¸‹ä¸€è¡Œï¼Œæ³¨é‡Šæ‰ä½ é¢„æœŸä¼šä»è¯¥å‡½æ•°è°ƒç”¨ä¸­è·å¾—çš„è¾“å‡ºã€‚è‡³å°‘æœ‰ä¸¤ä¸ªæµ‹è¯•æ¡ˆä¾‹å¿…é¡»æ˜¯æç«¯æƒ…å†µï¼Œä¾‹å¦‚è¾“å…¥ä¸º null å€¼ã€ç©ºè¾“å…¥å€¼ã€éå¸¸å¤§çš„å€¼ç­‰ç­‰ã€‚
3ã€åœ¨å•ç‹¬çš„æ–‡æœ¬æ–‡ä»¶ï¼ˆç§°ä¸ºâ€œexplanations.txtâ€ï¼‰é‡Œå†™ä¸Šæ¯ä¸ªé—®é¢˜çš„è¯´æ˜ã€‚ä¸ç”¨è¯¦ç»†è§£é‡Šæ‰€æä¾›çš„ä»£ç ï¼Œä½†æ˜¯è¯·è¯´æ˜ä»£ç ä¸­å„ä¸ªå†³ç­–èƒŒåçš„åŸå› ã€‚ä¾‹å¦‚ï¼Œä¸ºä½•ä½¿ç”¨è¯¥æ•°æ®ç»“æ„ï¼ŸåŒæ—¶è¿˜éœ€è¦è§£é‡Šä¸‹è§£å†³æ–¹æ¡ˆçš„æ•ˆç‡ï¼ˆæ—¶é—´æ•ˆç‡å’Œç©ºé—´æ•ˆç‡ï¼‰ã€‚
4ã€å°† Python æ–‡ä»¶å’Œæ–‡æœ¬æ–‡ä»¶å‹ç¼©ä¸º .zip æ–‡ä»¶ï¼Œç„¶åæäº¤äº†ã€‚
è¯·å‚é˜…æ­¤å¤„çš„è¯„ä¼°æ ‡å‡†ï¼
æœºå™¨å­¦ä¹ æ¨¡æ‹Ÿé¢è¯•å…·ä½“å†…å®¹çœ‹è§†é¢‘ã€‚
åšæŒç»ƒä¹ ï¼ä½ åœ¨è¯¥è¯¾ç¨‹ä¸­å®Œæˆçš„é¢è¯•å‡†å¤‡ç»ƒä¹ åªæ˜¯ç‰›åˆ€å°è¯•ï¼Œæˆ‘ä»¬ä¼šé¼“åŠ±ä½ è¿›è¡Œæ›´å¤šç»ƒä¹ ã€‚æˆ‘ä»¬è¿˜å‡†å¤‡äº†ä»¥ä¸‹èµ„æºåˆ—è¡¨ï¼Œå¯ä¾›ä½ è¿›è¡Œå…¶ä»–ç»ƒä¹ ã€‚è€Œä¸”å¦‚æœä½ è¿˜çŸ¥é“å…¶ä»–èµ„æºï¼Œè¯·ä¸åå‘ŠçŸ¥ã€‚å¹¶éæ‰€æœ‰èµ„æºéƒ½é€‚åˆä½ æ‰€ç”³è¯·çš„å·¥ä½œï¼Œå› æ­¤è¯·åŠ¡å¿…åœ¨å¼€å§‹ç»ƒä¹ å‰è¿›è¡Œè°ƒæŸ¥ï¼
ä¹¦ç±
ã€Šç¨‹åºå‘˜é¢è¯•é‡‘å…¸ã€‹
ã€ŠElements of Programming Interviewsã€‹

Web èµ„æº
Project Euler
Matasano å…¬å¸çš„åŠ å¯†æŒ‘æˆ˜èµ›
ç¼–ç¨‹é¢è¯•é—®é¢˜åˆ—è¡¨

åœ¨çº¿å®è·µå¹³å°
LeetCode
CodeKata
Coderust
Interview Cake
Codewars
HackerRank
èŒä¸šèµ„æºä¸­å¿ƒ

ä¸æ–­ç»ƒä¹ çš„è¿‡ç¨‹ä¸­ï¼Œä½ è¦å°½é‡å…¨é¢åœ°æ¨¡ä»¿çœŸæ­£çš„é¢è¯•ã€‚ä¾‹å¦‚ä½ åº”è¯¥å°è¯•ä¸æœ‹å‹ä¸€èµ·ç»ƒä¹ è¡Œä¸ºé—®é¢˜ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªäººé—·å¤´ç»ƒä¹ ã€‚è¿˜è¦å°è¯•ä½¿ç”¨è®¡æ—¶æ–¹æ³•ï¼Œä»¥ç¡®ä¿ç»™å‡ºçš„ç­”æ¡ˆæ¡ç†æ¸…æ™°ï¼Œç®€æ˜æ‰¼è¦ã€‚å¯¹äºæŠ€æœ¯é—®é¢˜ï¼Œä½ è¦å°è¯•ä½¿ç”¨ç™½æ¿æˆ–åœ¨çº¿æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œè€Œé IDE å’Œç¼–è¯‘å™¨è¿›è¡Œç¼–ç ã€‚
ç°åœ¨æˆ‘ä»¬å¼€å§‹é¢è¯•æ’ç»ƒï¼
é¢è¯•é¡¹ç›®æäº¤é›‡ä¸»é€šè¿‡é¢è¯•æ¥åˆ¤æ–­ä½ æ˜¯å¦é€‚åˆè¿™ä»½å·¥ä½œï¼Œä»¥åŠæ˜¯å¦å·²ç»åšå¥½å‡†å¤‡ã€‚é¢è¯•ä¸æ˜¯ä¸€åœºè€ƒè¯•ï¼Œè€Œæ˜¯ä½ å’Œé›‡ä¸»ä¹‹é—´çš„å¯¹è¯ã€‚å»ºç«‹ä½ è‡ªå·±çš„ç­–ç•¥ï¼Œä¸ºé¢è¯•åˆ°æ¥çš„é‚£ä¸€å¤©åšå¥½å‡†å¤‡å§ï¼
è¯´æ˜ï¼šæ­¤é¡¹ç›®ç›®å‰ä»…æä¾›è‹±æ–‡å®¡é˜…æœåŠ¡ï¼Œä½ éœ€è¦ç”¨è‹±æ–‡å®Œæˆé¡¹ç›®ä½œä¸šã€‚
æäº¤è¯´æ˜1ã€åœ¨ä¸‹é¢çš„æ‹›è˜ç½‘ç«™ä¸­ï¼Œé€‰æ‹©ä¸€ä¸ªä½ æƒ³è¦åœ¨æ¯•ä¸šåå»åº”è˜çš„èŒä½ã€‚

The Udacity Career Network on AfterCollege
FirstJob
R-users
kaggle
Jr.DevJobs
LaunchCode
Whitetruffle
AngelList
HIRED
Dice

2ã€å‡è£…ä½ åœ¨æ¥å—ä¸€åœºçœŸæ­£çš„é¢è¯•ï¼Œå›ç­”ä¸‹æ–¹çš„é¢è¯•é—®é¢˜ã€‚3ã€å°†ä½ çš„å›ç­”ä¿å­˜ä¸º .pdf æˆ– .txt æ ¼å¼æäº¤ã€‚4ã€æäº¤æ—¶ï¼Œå°†ä½ é€‰æ‹©çš„æ‹›è˜å¯äº‹çš„çš„é“¾æ¥å¤åˆ¶ç²˜è´´åˆ°ç»™å®¡é˜…è€…çš„è¡¥å……è¯´æ˜ï¼ˆNotes to reviewerï¼‰ä¸­ã€‚
é¢è¯•é—®é¢˜ï¼ˆå…± 7 ä¸ªï¼‰æƒ³è±¡ä½ åœ¨é¢è¯•ä¸­å›ç­”ä»¥ä¸‹é—®é¢˜ï¼Œç”¨ä½ è®¤ä¸ºé€‚å½“çš„ä¸¤ä¸‰æ®µè¯è§£é‡Šå’Œè¯´æ˜ä½ çš„ç­”æ¡ˆã€‚å¯¹äºç¼–ç ç­”æ¡ˆï¼Œè¯·è§£é‡Šä½ åœ¨ç¼–å†™ä»£ç æ—¶æ‰€ä½œçš„ç›¸å…³é€‰æ‹©ã€‚
é—®é¢˜ 1 â€“ æˆ‘ä»¬é‡‡ç”¨ A/B æµ‹è¯•æ–¹æ³•æµ‹è¯•äº†æˆ‘ä»¬å…¬å¸äº§å“é¡µé¢ä¸Šä¸¤ç§ä¸åŒé£æ ¼çš„æ³¨å†ŒæŒ‰é’®ã€‚100 åè®¿å®¢è®¿é—®äº† A é¡µé¢ï¼Œå…¶ä¸­æœ‰ 20 åç‚¹å‡»äº†æŒ‰é’®ï¼›ç„¶è€Œï¼Œ70 åè®¿å®¢è®¿é—®äº† B é¡µé¢ï¼Œä¸”ä»…æœ‰ 15 åç‚¹å‡»äº†æŒ‰é’®ã€‚é‚£ä¹ˆä½ èƒ½è‚¯å®šåœ°è¯´ A æˆ– B é¡µé¢æ˜¯æ›´å¥½çš„é€‰æ‹©å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ
é—®é¢˜ 2 - ä½ èƒ½å¦è®¾è®¡ä¸€ä¸ªè®¡åˆ’ï¼Œä»…é è§‚å¯Ÿæ¨æ–‡æ¥å¯¹ Twitter ç”¨æˆ·è¿›è¡Œåˆ†ç»„ï¼Ÿä½ æ²¡æœ‰ä»»ä½•å¯ç”¨çš„äººå£ã€åœ°ç†æˆ–å…¶ä»–è¯†åˆ«ä¿¡æ¯ï¼Œåªèƒ½åˆ©ç”¨ä»–ä»¬å‘å¸ƒçš„çº¯æ–‡æœ¬æ¶ˆæ¯åŠæ¯æ¡æ¶ˆæ¯çš„æ—¶é—´æˆ³ã€‚
åœ¨ JSON æ ¼å¼ä¸­ï¼Œå®ƒä»¬æ˜¯è¿™æ ·çš„ï¼š
&#123;    &quot;user_id&quot;: 3,    &quot;timestamp&quot;: &quot;2016-03-22_11-31-20&quot;,    &quot;tweet&quot;: &quot;It&#x27;s #dinner-time!&quot;&#125;

å‡è®¾ä½ æ”¶åˆ°ä¸€äº›è¿™æ ·çš„æ¨æ–‡æµï¼Œè¯·æè¿°ä¸€ä¸‹æ”¶é›†å’Œåˆ†æå®ƒä»¬çš„è¿‡ç¨‹ï¼Œä½ ä¼šé‡‡ç”¨ä»€ä¹ˆè½¬æ¢/ç®—æ³•ï¼Œä½ å¦‚ä½•è®­ç»ƒå’Œæµ‹è¯•ä½ çš„æ¨¡å‹åŠå±•ç¤ºç»“æœã€‚
é—®é¢˜ 3 - åœ¨åˆ†ç±»è®¾ç½®ä¸­ï¼Œç»™å®šä¸€ä¸ªåŠ æ ‡ç­¾ç¤ºä¾‹æ•°æ®é›†åŠä½ å°è¯•æ‹Ÿåˆçš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œè¯´æ˜æ£€æµ‹å’Œé˜²æ­¢è¿‡æ‹Ÿåˆçš„ç­–ç•¥ã€‚
é—®é¢˜ 4 - ä½ çš„å›¢é˜Ÿæ­£åœ¨ä¸ºä½ ä»¬çš„æ——èˆ° 3D å»ºæ¨¡å·¥å…·è®¾è®¡ä¸‹ä¸€ä»£ç”¨æˆ·ä½“éªŒã€‚ç‰¹åˆ«æ˜¯ï¼Œä½ çš„ä»»åŠ¡æ˜¯å®ç°ä¸€ä¸ªæ™ºèƒ½ä¸Šä¸‹æ–‡èœå•ï¼Œå®ƒèƒ½å¤Ÿå­¦ä¹ å»ºæ¨¡è€…çš„èœå•é€‰é¡¹ä½¿ç”¨ï¼Œç„¶åæ˜¾ç¤ºæœ€æœ‰ç›Šçš„é€‰é¡¹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ç»å¸¸ä½¿ç”¨â€œç¼–è¾‘â€&gt;â€œè¡¨é¢â€&gt;â€œå…‰æ»‘è¡¨é¢â€ï¼ˆEdit &gt; Surface &gt; Smooth Surfaceï¼‰ï¼Œè€Œæˆ‘å¸Œæœ›åªè¦å³å‡»å°±ä¼šå‡ºç°ä¸€ä¸ªâ€œå…‰æ»‘è¡¨é¢â€é€‰é¡¹ï¼Œå°±åƒâ€œå‰ªåˆ‡â€ã€â€œå¤åˆ¶â€å’Œâ€œç²˜è´´â€ä¸€æ ·ã€‚æ³¨æ„å¹¶ä¸æ˜¯æ‰€æœ‰å‘½ä»¤åœ¨æ‰€æœ‰ä¸Šä¸‹æ–‡ä¸‹å‡æœ‰æ„ä¹‰ï¼Œä¾‹å¦‚æˆ‘éœ€è¦é€‰æ‹©ä¸€ä¸ªè¡¨é¢æ‰å¯¹å®ƒè¿›è¡Œå…‰æ»‘å¤„ç†ã€‚é‚£ä¹ˆï¼Œä½ å¦‚ä½•è®¾è®¡ä¸€ä¸ªèƒ½å¤Ÿæ‰§è¡Œè¿™ç§è¡Œä¸ºçš„å­¦ä¹ ç³»ç»Ÿ/ä»£ç†ã€‚
é—®é¢˜ 5 - é€šè¿‡ä¸€ä¸ªæƒ…æ™¯ä¸¾ä¾‹è¯´æ˜æ­£åˆ™åŒ–å¯¹å­¦ä¹ å¥½çš„æ¨¡å‹çš„å¿…è¦æ€§ï¼Œä»¥åŠæä¾›ä¸€ä¸ªæ­£åˆ™åŒ–æ²¡æœ‰æ„ä¹‰çš„æƒ…æ™¯ã€‚
é—®é¢˜ 6 -ä½ é™„è¿‘çš„æ‚è´§åº—æƒ³å‘é¡¾å®¢æœ‰é’ˆå¯¹æ€§åœ°å‘æ”¾å¯¹ä»–ä»¬æ¥è¯´æœ‰ç”¨çš„ä¼˜æƒ åˆ¸ã€‚å‡è®¾ä½ å¯ä»¥è®¿é—®æ¯ä½é¡¾å®¢çš„è´­ä¹°å†å²å’Œåº—é“ºå•†å“ç›®å½•ï¼Œä½ å°†è®¾è®¡æ€æ ·ä¸€ä¸ªç³»ç»Ÿï¼Œæ¥å†³å®šå‘æ”¾å“ªäº›ä¼˜æƒ åˆ¸ï¼Ÿä½ å¦‚ä½•è¡¡é‡è¿™ä¸ªç³»ç»Ÿçš„æ€§èƒ½ï¼Ÿ
é—®é¢˜ 7 - é€‰æ‹©ä¸€ä¸ªå…¬å¸ï¼Œç„¶åæè¿°ä½ æƒ³åº”è˜çš„è¯¥å…¬å¸å†…çš„æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆèŒä½ï¼ˆå‡è®¾æœ‰ï¼‰ã€‚ç°åœ¨ï¼Œå¦‚æœä½ å·²æˆåŠŸåº”è˜ï¼Œå¹¶ä»ä»Šå¤©å¼€å§‹ä»»èŒï¼Œåœ¨ä½ çœ‹æ¥ï¼Œä½ çš„èŒä½åœ¨ä¸‹ä¸€å¹´ä¼šæœ‰æ€æ ·çš„å‘å±•ï¼Ÿä½ çš„é•¿æœŸèŒä¸šç›®æ ‡æ˜¯ä»€ä¹ˆï¼Œè¿™ä¸ªèŒä½å¦‚ä½•å¸®åŠ©ä½ å®ç°é•¿æœŸç›®æ ‡ï¼Ÿ
æäº¤å½“ä½ å‡†å¤‡æäº¤é¡¹ç›®ï¼Œç‚¹å‡»ä¸‹æ–¹â€œæäº¤é¡¹ç›®â€ï¼Œä¸Šä¼ ä¸€ä»½ PDF æ–‡ä»¶ã€‚å¦‚æœæœ‰ä»»ä½•ä¸æäº¤é¡¹ç›®ç›¸å…³çš„ç–‘é—®ï¼Œæˆ–æƒ³æŸ¥çœ‹æäº¤çŠ¶æ€ï¼Œè¯·å‘æˆ‘ä»¬å‘é€ç”µå­é‚®ä»¶è¯¢é—®ï¼ˆ&#115;&#117;&#112;&#x70;&#111;&#x72;&#x74;&#x40;&#121;&#111;&#117;&#100;&#97;&#120;&#117;&#x65;&#x2e;&#x63;&#x6f;&#109;ï¼‰ã€‚
é¡¹ç›®èµ„æºé¡¹ç›®è¯„å®¡æ ‡å‡†ã€‚ä¼˜è¾¾å­¦åŸçš„é¡¹ç›®å¯¼å¸ˆä¼šä¾æ®æ­¤è¯„å®¡æ ‡å‡†å®¡é˜…ä½ çš„é¡¹ç›®ã€‚ä½ å¯ä»¥åœ¨æäº¤å‰è‡ªè¡Œæ£€æŸ¥è‡ªå·±æ˜¯å¦å·²è¾¾åˆ°æ‰€æœ‰æ ‡å‡†ã€‚èŒä¸šèµ„æºä¸­å¿ƒã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æ›´å¤šæœ‰å…³å‡†å¤‡é¢è¯•çš„èµ„æºå’Œè´´å£«ã€‚
æ¥ä¸‹æ¥é¢è¯•ç»ƒä¹ å¹¶ä¸æ˜¯åªåœ¨ä½ æ±‚èŒæ—¶æ‰éœ€è¦åšçš„äº‹æƒ…ï¼Œ åœ¨ä½ çš„æ•´ä¸ªèŒä¸šç”Ÿæ¶¯ä¸­ï¼Œä½ éƒ½éœ€è¦ç»§ç»­æé«˜è‡ªå·±çš„é¢è¯•æŠ€å·§ã€‚æŠ“ä½æ¯ä¸€ä¸ªæœºä¼šï¼Œæ€è€ƒå’Œä¸äººäº¤æµä½ çš„èŒä¸šç›®æ ‡ã€‚åœ¨ç”³è¯·ä¸€ä¸ªèŒä½ä¹‹å‰ï¼Œè¯·æ€è€ƒæ¸…æ¥šè‡ªå·±ä¸ºä»€ä¹ˆè¦ç”³è¯·â€”â€”è¿™å°†æå¤§åœ°å¸®åŠ©ä½ ä¸ºé¢è¯•åšå¥½å‡†å¤‡ã€‚
ä¹¦ç­¾Interview Guide: Machine Learninghttps://career-resource-center.udacity.com/interview-courses-and-guides/machine-learning
èŒä¸šèµ„æºä¸­å¿ƒ - ç®€å†https://career-resource-center.udacity.com/resume
èŒä¸šèµ„æºä¸­å¿ƒ - æ±‚èŒä¿¡https://career-resource-center.udacity.com/cover-letters
LinkedIn and GitHub Profileshttps://career-resource-center.udacity.com/linkedin-github-profiles
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>è½¬è½½</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>Kaggle</title>
    <url>/dev-kaggle/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡è½¬è½½è‡ªä¼˜è¾¾å­¦åŸã€Šæœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆã€‹
Kaggle æ˜¯ä¸€ä¸ªæå—æ¬¢è¿çš„æ•°æ®ç§‘å­¦å’Œæœºå™¨å­¦ä¹ æŒ‘æˆ˜å¹³å°ï¼Œæœ‰ç€æä¸ºæ´»è·ƒå’Œä¸æ–­å£®å¤§çš„ç¤¾åŒºã€‚Kaggle æˆå‘˜ä¸ä»…å¯ä»¥äº‰å¤ºç§¯åˆ†æ¦œä¸Šçš„æ’åï¼Œå…¬å¸å’Œç ”ç©¶å®éªŒå®¤åœ¨æ­¤æå‡ºçš„æŸäº›æŒ‘æˆ˜é¢˜è¿˜è®¾æœ‰ä¸°åšå¥–é‡‘ã€‚
Kaggle ä¸ºæ‚¨æä¾›è§£å†³å¤æ‚ç°å®é—®é¢˜çš„æœºä¼šï¼Œæ‚¨å¯é€šè¿‡è§£å†³è¿™äº›é—®é¢˜ç£¨ç»ƒæ‚¨çš„æœºå™¨å­¦ä¹ æŠ€å·§ï¼Œå¦‚æœä½ çš„ Kaggle ä¸ªäººé¡µé¢ä¸­æœ‰ç§¯æå‚ä¸å’Œè¡¨ç°è‰¯å¥½çš„è®°å½•ï¼Œå¯ä»¥è®©ä½ åœ¨ç”³è¯·å·¥ä½œæ—¶æ›´å…·ä¼˜åŠ¿ã€‚


å¼€å§‹å‡†å¤‡å¥½æˆä¸º Kaggle çš„ä¸€å‘˜äº†å—ï¼Ÿ
1ã€å‰å¾€ Kaggle ç½‘ç«™ï¼Œå¹¶æ³¨å†Œè´¦å·ã€‚çœ‹ä¸€ä¸‹ è¿›è¡Œä¸­çš„ç«èµ›ï¼Œæœ‰æ²¡æœ‰ä½ æ„Ÿå…´è¶£çš„é¡¹ç›®ï¼Ÿ
2ã€é€‰æ‹©ä¸€ä¸ªé¡¹ç›®ï¼Œæ ¹æ®æŒ‡å¯¼è¯´æ˜è·å–æ•°æ®ï¼Œç¼–å†™å¹¶è¿è¡Œæ‚¨çš„ç®—æ³•ï¼Œæœ€åæäº¤è§£å†³æ–¹æ¡ˆã€‚
3ã€å¦‚æœä½ è§‰å¾—è¿™äº›é¡¹ç›®è¿‡äºå¤æ‚ï¼Œå¯ä»¥æŸ¥çœ‹ä»¥ä¸‹å†…å®¹ï¼š

æ³°å¦å°¼å…‹å·ç«èµ›æ•™ç¨‹
æ•°å­—è¯†åˆ«
é¢éƒ¨ç‰¹å¾ç‚¹æ£€æµ‹
Julia å…¥é—¨æ•™ç¨‹

Kaggle è„šæœ¬ä½¿ç”¨ Kaggleè„šæœ¬ï¼Œä½ æ— éœ€è®¾ç½®ä½ çš„ç”µè„‘ï¼ˆæˆ–ä¸‹è½½æ‰€æœ‰æ•°æ®ï¼‰ï¼Œä¾¿å¯è½»æ¾å¼€å§‹è§£å†³æŒ‘æˆ˜é—®é¢˜ã€‚
åˆ›å»ºè„šæœ¬é€‰æ‹©ä¸€ä¸ªç«èµ›æˆ–æ•°æ®é›†ï¼Œå•å‡»æ–°è„šæœ¬ï¼ˆNew Scriptï¼‰æˆ–æ–°è®°äº‹æœ¬ï¼ˆNew Notebookï¼‰ï¼Œé€‰æ‹©ä½ çš„è¯­è¨€åå¥½ã€‚
ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç¨‹åºå·²ä¸ºä½ æä¾›äº†ä¸€äº›åˆå§‹ä»£ç ï¼Œæ•™ä½ å¦‚ä½•ä¸‹è½½æ‰€éœ€æ•°æ®ã€‚ä¿®æ”¹å¹¶è¿è¡Œä»£ç ï¼Œä»¥æµè§ˆè¾“å‡ºæ—¥å¿—ã€‚ä½ å¯ç›´æ¥åœ¨è„šæœ¬ä¸­æäº¤æŒ‘æˆ˜çš„è¾“å‡ºæ–‡ä»¶ï¼ˆæ ¼å¼é€šå¸¸ä¸º .csvï¼‰ï¼Œå¾ˆç®€å•ï¼Œå¯¹å§ï¼Ÿ
Fork ä¸€ä¸ªå·²æœ‰è„šæœ¬Kaggle æˆå‘˜é€šå¸¸ä¼šå°†è‡ªå·±çš„è§£å†³æ–¹æ¡ˆæä¾›ç»™å…¶ä»–å‚èµ›è€…æµè§ˆå’Œå‚è€ƒï¼Œè¯·åœ¨ç«èµ›çš„æ§åˆ¶é¢æ¿ï¼ˆDashboardï¼‰ä¸­å¯»æ‰¾è„šæœ¬ã€‚
ä¾‹å¦‚ï¼Œä¸æ•°å­—è¯†åˆ«æŒ‘æˆ˜æœ‰å…³çš„æ‰€æœ‰è„šæœ¬éƒ½å¯åœ¨è¿™é‡Œæ‰¾åˆ°ã€‚è®©æˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªæ¥è¯¦ç»†äº†è§£ï¼šåœ¨ Python ä¸­å®ç°çš„ç®€å•æ„ŸçŸ¥åˆ†ç±»å™¨ï¼ˆä¸€ä¸ªå•å±‚ç¥ç»ç½‘ç»œï¼‰ã€‚ç‚¹å‡» Fork è„šæœ¬ï¼ˆFork Script ï¼‰æˆ– Fork è®°äº‹æœ¬ï¼ˆFork Notebookï¼‰æŒ‰é’®æ¥è¿è¡Œæˆ–ä¿®æ”¹è„šæœ¬ã€‚
ç¤¾ç¾¤æˆä¸º Kaggle æˆå‘˜ä¸ä»…æ„å‘³ç€ä½ å¯ä»¥ä¹æ­¤ä¸ç–²åœ°è§£å†³å¤šç§æŒ‘æˆ˜ï¼Œå¹¶ä¸ºæ­¤ä»˜å‡ºæ¯ä¸€ä»½ç²¾åŠ›ï¼ˆæˆ‘ç›¸ä¿¡ä½ çš„ç²¾åŠ›æ˜¯æºæºä¸æ–­çš„ï¼‰ï¼Œä½ è¿˜ä¼šæˆä¸ºæ•°æ®ç§‘å­¦å®¶å’Œæœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆç¤¾ç¾¤çš„ä¸€å‘˜ï¼Œä¸ºè§£å†³å½“ä»Šç¤¾ä¼šæ‰€é¢ä¸´çš„è¯¸å¤šå®é™…é—®é¢˜è´¡çŒ®ä¸€ä»½åŠ›é‡ã€‚
å¦‚æœä½ åœ¨è§£å†³æŒ‘æˆ˜ä¸­é‡åˆ°å›°éš¾æˆ–éœ€è¦å»ºè®®ï¼Œè¯·å‰å¾€è®ºå›å¯»æ‰¾ç›¸å…³ä¿¡æ¯ï¼Œè®ºå›ä¸­ä¹Ÿä¼šæœ‰ä¸€äº›ä»–äººçš„é—®é¢˜ä½ èƒ½å¤Ÿå›ç­”ã€‚å…¶ä»–èµ„æºå¯å‚è€ƒæ­¤ wiki ç½‘é¡µã€‚
ä½ å¯ä»¥åœ¨ Kaggle çš„åä¸º no free hunch çš„å®˜æ–¹åšå®¢ä¸­äº†è§£åˆ°ç«èµ›ã€æ–°åŠŸèƒ½å’Œå¹³å°å˜åŒ–ç­‰æ–¹é¢çš„æœ€æ–°æƒ…å†µã€‚ä¾‹å¦‚ï¼Œè¿™ç¯‡æ–‡ç« ä»‹ç»äº† Kaggle çš„ä¸€ä½é¡¶çº§æˆå‘˜ã€‚
ä½ çš„ Kaggle ä¸ªäººä¸»é¡µä½ å¯ä»¥åœ¨ä½ å…¬å¼€çš„ Kaggle ä¸ªäººä¸»é¡µä¸ŠæŸ¥é˜…ä½ åœ¨ä¸åŒç«èµ›ä¸­çš„æ’åå’Œè¡¨ç°ï¼š 

https://www.kaggle.com/&lt;è¾“å…¥ä½ çš„ Kaggle ç”¨æˆ·å&gt;

è¯·åœ¨ä¸ªäººä¸»é¡µä¸­å¡«å†™ä½ çš„å‡†ç¡®ä¿¡æ¯ï¼Œæä¾›ç¤¾äº¤ç¼–ç å¹³å°ï¼ˆå¦‚ GitHubï¼‰å’Œä¸“ä¸šç½‘ç«™ï¼ˆå¦‚é¢†è‹±ï¼‰çš„é“¾æ¥ï¼Œå¹¶å®šæœŸæ›´æ–°ã€‚æˆ‘ä»¬ä¹Ÿæ¬¢è¿ä½ æä¾›ä½ çš„ä¼˜è¾¾å­¦åŸä¸ªäººä¸»é¡µé“¾æ¥ã€‚
å·¥ä½œKaggle æœ‰ä¸€ä¸ªä¸“é—¨çš„æ±‚èŒç‰ˆå—ï¼Œä½ å¯èƒ½ä¼šåœ¨è¿™é‡Œæ‰¾åˆ°ä»¤ä½ å¿ƒåŠ¨çš„èŒä½ã€‚åœ¨ Kaggle ç«èµ›ä¸­çš„è‰¯å¥½è¡¨ç°èƒ½ä½¿ä½ è„±é¢–è€Œå‡ºã€‚ä½ åœ¨çº³ç±³å­¦ä½é¡¹ç›®ä¸­å–å¾—è¿›å±•çš„åŒæ—¶ï¼Œè¯·ç»§ç»­å°è¯•è§£å†³å„é¡¹æŒ‘æˆ˜ï¼Œæ„å»ºè‰¯å¥½çš„æ¡£æ¡ˆè®°å½•ã€‚å¦‚æœä½ æ­£åœ¨å¯»æ‰¾å·¥ä½œï¼Œ åœ¨ç”³è¯·æ—¶ä¸è¦å¿˜äº†åˆ©ç”¨è¿™ä¸ªèµ„æºã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>è½¬è½½</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>scikit-learn</title>
    <url>/dev-scikit-learn/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡è½¬è½½è‡ªä¼˜è¾¾å­¦åŸã€Šæœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆã€‹


scikit-learn çš„å®‰è£…æ£€æŸ¥æ‚¨æ˜¯å¦è£…æœ‰å¯ç”¨çš„ pythonã€‚ä¼˜è¾¾å­¦åŸä½¿ç”¨ python 2.7 ä½œä¸ºç¤ºä¾‹ä»£ç å’Œåœ¨æµè§ˆå™¨ä¸­å®Œæˆä½œä¸šçš„ä»£ç ã€‚
æˆ‘ä»¬ä¼šä½¿ç”¨ pip æ¥å®‰è£…ä¸€äº›ç¨‹åºåŒ…ã€‚é¦–å…ˆï¼Œåœ¨æ­¤å¤„è·å–å¹¶å®‰è£… pipã€‚å¦‚æœä½ ä½¿ç”¨Anaconda, ä½ å¯ä»¥ç”¨ conda å‘½ä»¤æ¥å®‰è£…åŒ…ã€‚
ä½¿ç”¨ pip æˆ– anaconda æ¥å®‰è£… scikit-learnï¼š

æ‰“å¼€ Terminalï¼ˆmac ä¸‹æ˜¯ Terminalï¼Œ PC æ˜¯ cmdï¼‰ç”¨ä¸‹åˆ—å‘½ä»¤å®‰è£… sklearn
pip install scikit-learn æˆ–è€… conda install scikit-learn
å¦‚æœä½ ä¸ç”¨ pip æˆ–è€… condaï¼Œå¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å®‰è£…è¯´æ˜ã€‚

å…³äº scikit-learn ç‰ˆæœ¬çš„é‡è¦é€šçŸ¥scikit-learn æœ€è¿‘æŠŠç¨³å®šç‰ˆå‡çº§åˆ°äº† v0.18ã€‚è¿™æ¬¡å‡çº§æ”¹å˜äº†ä¸€äº›æˆ‘ä»¬å°†è¦åœ¨è¯¾ç¨‹ä¸­è®²åˆ°çš„å‡½æ•°çš„è°ƒç”¨æ–¹æ³•ï¼Œä¾‹å¦‚ï¼štrain_test_splitã€gridSearchCVã€ShuffleSplit å’Œ learning_curvesã€‚scikit-learn ç½‘ç«™ä¸Šçš„æ–‡æ¡£å·²ç»æ›´æ–°åˆ°äº† v0.18ã€‚ä½†æ˜¯ Katie å¯¼å¸ˆçš„è®²è§£ä»¥åŠä¼˜è¾¾å­¦åŸï¼ˆUdacityï¼‰çš„ç»ƒä¹ ï¼Œä½œä¸šè¿˜æ˜¯åŸºäºv0.17ã€‚å¦‚æœä½ éœ€è¦æŸ¥è¯¢ scikit-learn çš„æ–‡æ¡£ï¼Œè¯·æŸ¥è¯¢ v0.17 çš„è¯´æ˜ï¼Œè€Œé v0.18ã€‚è¿‘æœŸæˆ‘ä»¬ä¼šæŠŠå†…å®¹ç»Ÿä¸€å‡çº§æˆ v0.18ã€‚
è¿™ä¸ªè®ºå›é“¾æ¥æä¾›äº†æ›´åŠ è¯¦ç»†çš„è¯´æ˜ã€‚å¦‚æœä½ è¿˜æœ‰ç–‘é—®ï¼Œå¯ä»¥åœ¨è®ºå›å’Œå¾®ä¿¡ç¾¤é‡Œæå‡ºã€‚
Scikit-learn ä»£ç åœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†ä¸­ï¼ŒKatie ä¼šæ¼”ç¤ºå¦‚ä½•å°† scikit-learnï¼ˆæˆ– sklearnï¼‰æ–‡æ¡£ä¸åœ¨â€œæœºå™¨å­¦ä¹ ç®€ä»‹â€è¯¾ç¨‹ä¸­ä»‹ç»çš„é«˜æ–¯æœ´ç´ è´å¶æ–¯æ¨¡å‹ä¸€èµ·ä½¿ç”¨ã€‚å¯¹äºæœ¬ç»ƒä¹ ï¼Œæ‚¨ä¸å¿…ç†Ÿæ‚‰æœ´ç´ è´å¶æ–¯æˆ–è€… Katie æ¼”ç¤ºçš„ä»£ç ï¼Œè€Œæ˜¯è¦ç†Ÿæ‚‰ sklearn çš„å¸ƒå±€ï¼Œä»¥ä¾¿ä¹‹åèƒ½è¯„ä¼°å’ŒéªŒè¯ä»»ä½•æ•°æ®æ¨¡å‹ã€‚
åœ¨å³å°†å¼€å§‹çš„â€œç›‘ç£å¼æœºå™¨å­¦ä¹ â€è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šæ›´è¯¦ç»†åœ°ä»‹ç»æœ´ç´ è´å¶æ–¯ä»¥åŠå…¶ä»–æœ‰ç”¨çš„å—ç›‘ç£æ¨¡å‹ï¼Œå¹¶è¿ç”¨æˆ‘ä»¬åœ¨æœ¬è¯¾ç¨‹ä¸­å­¦åˆ°çš„çŸ¥è¯†è¯„ä¼°æ¯ä¸ªæ¨¡å‹çš„ä¼˜ç¼ºç‚¹ã€‚
å¦‚æœæƒ³æå‰äº†è§£ä¸€ä¸‹æœ´ç´ è´å¶æ–¯ï¼Œè¯·æŸ¥çœ‹æ­¤é“¾æ¥ã€‚
sklearnä½¿ç”¨å…¥é—¨åœ¨è°·æ­Œä¸Šæœç´¢â€œsklearn naive bayesâ€å³å¯ã€‚
é«˜æ–¯æœ´ç´ è´å¶æ–¯ç¤ºä¾‹http://scikit-learn.org/stable/modules/generated/sklearn.naive_bayes.GaussianNB.html
æœ‰å…³åœ°å½¢æ•°æ®çš„é«˜æ–¯ NB éƒ¨ç½²studentMain.py# -*- coding: UTF-8 -*-#!/usr/bin/python&quot;&quot;&quot; Complete the code in ClassifyNB.py with the sklearn    Naive Bayes classifier to classify the terrain data.        The objective of this exercise is to recreate the decision     boundary found in the lesson video, and make a plot that    visually shows the decision boundary &quot;&quot;&quot;from prep_terrain_data import makeTerrainDatafrom class_vis import prettyPicture, output_imagefrom ClassifyNB import classifyimport numpy as npimport pylab as plfeatures_train, labels_train, features_test, labels_test = makeTerrainData()### the training data (features_train, labels_train) have both &quot;fast&quot; and &quot;slow&quot; points mixed### in together--separate them so we can give them different colors in the scatterplot,### and visually identify themgrade_fast = [features_train[ii][0] for ii in range(0, len(features_train)) if labels_train[ii]==0]bumpy_fast = [features_train[ii][1] for ii in range(0, len(features_train)) if labels_train[ii]==0]grade_slow = [features_train[ii][0] for ii in range(0, len(features_train)) if labels_train[ii]==1]bumpy_slow = [features_train[ii][1] for ii in range(0, len(features_train)) if labels_train[ii]==1]# You will need to complete this function imported from the ClassifyNB script.# Be sure to change to that code tab to complete this quiz.clf = classify(features_train, labels_train)### draw the decision boundary with the text points overlaidprettyPicture(clf, features_test, labels_test)output_image(&quot;test.png&quot;, &quot;png&quot;, open(&quot;test.png&quot;, &quot;rb&quot;).read())

class_vis.py# -*- coding: UTF-8 -*-#!/usr/bin/python#from udacityplots import *import warningswarnings.filterwarnings(&quot;ignore&quot;)import matplotlib matplotlib.use(&#x27;agg&#x27;)import matplotlib.pyplot as pltimport pylab as plimport numpy as np#import numpy as np#import matplotlib.pyplot as plt#plt.ioff()def prettyPicture(clf, X_test, y_test):    x_min = 0.0; x_max = 1.0    y_min = 0.0; y_max = 1.0    # Plot the decision boundary. For that, we will assign a color to each    # point in the mesh [x_min, m_max]x[y_min, y_max].    h = .01  # step size in the mesh    xx, yy = np.meshgrid(np.arange(x_min, x_max, h), np.arange(y_min, y_max, h))    Z = clf.predict(np.c_[xx.ravel(), yy.ravel()])    # Put the result into a color plot    Z = Z.reshape(xx.shape)    plt.xlim(xx.min(), xx.max())    plt.ylim(yy.min(), yy.max())    plt.pcolormesh(xx, yy, Z, cmap=pl.cm.seismic)    # Plot also the test points    grade_sig = [X_test[ii][0] for ii in range(0, len(X_test)) if y_test[ii]==0]    bumpy_sig = [X_test[ii][1] for ii in range(0, len(X_test)) if y_test[ii]==0]    grade_bkg = [X_test[ii][0] for ii in range(0, len(X_test)) if y_test[ii]==1]    bumpy_bkg = [X_test[ii][1] for ii in range(0, len(X_test)) if y_test[ii]==1]    plt.scatter(grade_sig, bumpy_sig, color = &quot;b&quot;, label=&quot;fast&quot;)    plt.scatter(grade_bkg, bumpy_bkg, color = &quot;r&quot;, label=&quot;slow&quot;)    plt.legend()    plt.xlabel(&quot;bumpiness&quot;)    plt.ylabel(&quot;grade&quot;)    plt.savefig(&quot;test.png&quot;)    import base64import jsonimport subprocessdef output_image(name, format, bytes):    image_start = &quot;BEGIN_IMAGE_f9825uweof8jw9fj4r8&quot;    image_end = &quot;END_IMAGE_0238jfw08fjsiufhw8frs&quot;    data = &#123;&#125;    data[&#x27;name&#x27;] = name    data[&#x27;format&#x27;] = format    data[&#x27;bytes&#x27;] = base64.encodestring(bytes)    print image_start+json.dumps(data)+image_end

prep_terrain_data.py# -*- coding: UTF-8 -*-#!/usr/bin/pythonimport randomdef makeTerrainData(n_points=1000):################################################################################## make the toy dataset    random.seed(42)    grade = [random.random() for ii in range(0,n_points)]    bumpy = [random.random() for ii in range(0,n_points)]    error = [random.random() for ii in range(0,n_points)]    y = [round(grade[ii]*bumpy[ii]+0.3+0.1*error[ii]) for ii in range(0,n_points)]    for ii in range(0, len(y)):        if grade[ii]&gt;0.8 or bumpy[ii]&gt;0.8:            y[ii] = 1.0### split into train/test sets    X = [[gg, ss] for gg, ss in zip(grade, bumpy)]    split = int(0.75*n_points)    X_train = X[0:split]    X_test  = X[split:]    y_train = y[0:split]    y_test  = y[split:]    grade_sig = [X_train[ii][0] for ii in range(0, len(X_train)) if y_train[ii]==0]    bumpy_sig = [X_train[ii][1] for ii in range(0, len(X_train)) if y_train[ii]==0]    grade_bkg = [X_train[ii][0] for ii in range(0, len(X_train)) if y_train[ii]==1]    bumpy_bkg = [X_train[ii][1] for ii in range(0, len(X_train)) if y_train[ii]==1]#    training_data = &#123;&quot;fast&quot;:&#123;&quot;grade&quot;:grade_sig, &quot;bumpiness&quot;:bumpy_sig&#125;#            , &quot;slow&quot;:&#123;&quot;grade&quot;:grade_bkg, &quot;bumpiness&quot;:bumpy_bkg&#125;&#125;    grade_sig = [X_test[ii][0] for ii in range(0, len(X_test)) if y_test[ii]==0]    bumpy_sig = [X_test[ii][1] for ii in range(0, len(X_test)) if y_test[ii]==0]    grade_bkg = [X_test[ii][0] for ii in range(0, len(X_test)) if y_test[ii]==1]    bumpy_bkg = [X_test[ii][1] for ii in range(0, len(X_test)) if y_test[ii]==1]    test_data = &#123;&quot;fast&quot;:&#123;&quot;grade&quot;:grade_sig, &quot;bumpiness&quot;:bumpy_sig&#125;            , &quot;slow&quot;:&#123;&quot;grade&quot;:grade_bkg, &quot;bumpiness&quot;:bumpy_bkg&#125;&#125;    return X_train, y_train, X_test, y_test#    return training_data, test_data

ClassifyNB.py# -*- coding: UTF-8 -*-def classify(features_train, labels_train):       ### import the sklearn module for GaussianNB    ### create classifier    ### fit the classifier on the training features and labels    ### return the fit classifier            ### your code goes here!    def classify(traindata,trainlabel):        from sklearn.naive_bayes import GaussianNB        classifier=GaussianNB()        classifier.fit(traindata, trainlabel)        return classifier

]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>è½¬è½½</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>Numpyå’ŒPandasæ•™ç¨‹</title>
    <url>/dev-numpy-and-pandas/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡è½¬è½½è‡ªä¼˜è¾¾å­¦åŸã€Šæœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆã€‹
æ—¢ç„¶ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²å­¦ä¼šäº†ä¸€äº›åŸºæœ¬çš„ç»Ÿè®¡å­¦æ¦‚å¿µï¼Œç°åœ¨è®©æˆ‘ä»¬æ¢è®¨ä¸€äº› Python åº“ï¼Œå®ƒä»¬å…è®¸æ‚¨ç ”ç©¶æ•°æ®å’Œå¤„ç†å¤§å‹æ•°æ®é›†ã€‚
å…·ä½“è€Œè¨€ï¼Œåœ¨æœ¬é˜¶æ®µçš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨ numpyï¼Œå®ƒå…è®¸æ‚¨å¤„ç†å¤§é‡æ•°å€¼æ•°æ®ä»¥åŠ panda åºåˆ—å’Œæ•°æ®æ¡†ï¼ˆå®ƒä»¬å…è®¸ä½ å­˜å‚¨å¤§å‹æ•°æ®é›†å’Œæå–å…¶ä¸­çš„ä¿¡æ¯ï¼‰ã€‚æˆ‘ä»¬å°†å­¦ä¹  numpy å’Œ panda.DataFramesï¼Œå‰è€…èƒ½å¤Ÿå¸®åŠ©ä½ å¤„ç†å¤§é‡æ•°å€¼æ•°æ®ï¼Œè€Œåè€…å¯ä»¥å¸®åŠ©ä½ å­˜å‚¨å¤§å‹æ•°æ®é›†ä»¥åŠä»æ•°æ®é›†ä¸­æå–å‡ºæ¥çš„ä¿¡æ¯ã€‚
Numpy åº“æ–‡æ¡£ï¼š https://docs.scipy.org/doc/numpy-dev/user/quickstart.html
Pandas åº“æ–‡æ¡£ï¼š http://pandas.pydata.org/pandas-docs/version/0.17.0/


Numpyimport numpy as np&#x27;&#x27;&#x27;The following code is to help you play with Numpy, which is a library that provides functions that are especially useful when you have towork with large arrays and matrices of numeric data, like doing matrix matrix multiplications. Also, Numpy is battle tested and optimized so that it runs fast, much faster than if you were workingwith Python lists directly.&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;The array object class is the foundation of Numpy, and Numpy arrays are likelists in Python, except that every thing inside an array must be of thesame type, like int or float.&#x27;&#x27;&#x27;# Change False to True to see Numpy arrays in actionif False:    array = np.array([1, 4, 5, 8], float)    print array    print &quot;&quot;    array = np.array([[1, 2, 3], [4, 5, 6]], float)  # a 2D array/Matrix    print array&#x27;&#x27;&#x27;You can index, slice, and manipulate a Numpy array much like you would with aa Python list.&#x27;&#x27;&#x27;# Change False to True to see array indexing and slicing in actionif False:    array = np.array([1, 4, 5, 8], float)    print array    print &quot;&quot;    print array[1]    print &quot;&quot;    print array[:2]    print &quot;&quot;    array[1] = 5.0    print array[1]# Change False to True to see Matrix indexing and slicing in actionif False:    two_D_array = np.array([[1, 2, 3], [4, 5, 6]], float)    print two_D_array    print &quot;&quot;    print two_D_array[1][1]    print &quot;&quot;    print two_D_array[1, :]    print &quot;&quot;    print two_D_array[:, 2]&#x27;&#x27;&#x27;Here are some arithmetic operations that you can do with Numpy arrays&#x27;&#x27;&#x27;# Change False to True to see Array arithmetics in actionif False:    array_1 = np.array([1, 2, 3], float)    array_2 = np.array([5, 2, 6], float)    print array_1 + array_2    print &quot;&quot;    print array_1 - array_2    print &quot;&quot;    print array_1 * array_2# Change False to True to see Matrix arithmetics in actionif False:    array_1 = np.array([[1, 2], [3, 4]], float)    array_2 = np.array([[5, 6], [7, 8]], float)    print array_1 + array_2    print &quot;&quot;    print array_1 - array_2    print &quot;&quot;    print array_1 * array_2&#x27;&#x27;&#x27;In addition to the standard arthimetic operations, Numpy also has a range ofother mathematical operations that you can apply to Numpy arrays, such asmean and dot product.Both of these functions will be useful in later programming quizzes.&#x27;&#x27;&#x27;if False:    array_1 = np.array([1, 2, 3], float)    array_2 = np.array([[6], [7], [8]], float)    print np.mean(array_1)    print np.mean(array_2)    print &quot;&quot;    print np.dot(array_1, array_2)

Pandasimport pandas as pd&#x27;&#x27;&#x27;The following code is to help you play with the concept of Series in Pandas.You can think of Series as an one-dimensional object that is similar toan array, list, or column in a database. By default, it will assign anindex label to each item in the Series ranging from 0 to N, where N isthe number of items in the Series minus one.Please feel free to play around with the concept of Series and see what it does*This playground is inspired by Greg Reda&#x27;s post on Intro to Pandas Data Structures:http://www.gregreda.com/intro-to-pandas-data-structures/&#x27;&#x27;&#x27;# Change False to True to create a Series objectif False:    series = pd.Series([&#x27;Dave&#x27;, &#x27;Cheng-Han&#x27;, &#x27;Udacity&#x27;, 42, -1789710578])    print series&#x27;&#x27;&#x27;You can also manually assign indices to the items in the Series whencreating the series&#x27;&#x27;&#x27;# Change False to True to see custom index in actionif False:    series = pd.Series([&#x27;Dave&#x27;, &#x27;Cheng-Han&#x27;, 359, 9001],                       index=[&#x27;Instructor&#x27;, &#x27;Curriculum Manager&#x27;,                              &#x27;Course Number&#x27;, &#x27;Power Level&#x27;])    print series&#x27;&#x27;&#x27;You can use index to select specific items from the Series&#x27;&#x27;&#x27;# Change False to True to see Series indexing in actionif False:    series = pd.Series([&#x27;Dave&#x27;, &#x27;Cheng-Han&#x27;, 359, 9001],                       index=[&#x27;Instructor&#x27;, &#x27;Curriculum Manager&#x27;,                              &#x27;Course Number&#x27;, &#x27;Power Level&#x27;])    print series[&#x27;Instructor&#x27;]    print &quot;&quot;    print series[[&#x27;Instructor&#x27;, &#x27;Curriculum Manager&#x27;, &#x27;Course Number&#x27;]]&#x27;&#x27;&#x27;You can also use boolean operators to select specific items from the Series&#x27;&#x27;&#x27;# Change False to True to see boolean indexing in actionif False:    cuteness = pd.Series([1, 2, 3, 4, 5], index=[&#x27;Cockroach&#x27;, &#x27;Fish&#x27;, &#x27;Mini Pig&#x27;,                                                 &#x27;Puppy&#x27;, &#x27;Kitten&#x27;])    print cuteness &gt; 3    print &quot;&quot;    print cuteness[cuteness &gt; 3]

Pandas æ•°æ®æ¡†import numpy as npimport pandas as pd&#x27;&#x27;&#x27;The following code is to help you play with the concept of Dataframe in Pandas.You can think of a Dataframe as something with rows and columns. It issimilar to a spreadsheet, a database table, or R&#x27;s data.frame object.*This playground is inspired by Greg Reda&#x27;s post on Intro to Pandas Data Structures:http://www.gregreda.com/intro-to-pandas-data-structures/&#x27;&#x27;&#x27;&#x27;&#x27;&#x27;To create a dataframe, you can pass a dictionary of lists to the Dataframeconstructor:1) The key of the dictionary will be the column name2) The associating list will be the values within that column.&#x27;&#x27;&#x27;# Change False to True to see Dataframes in actionif False:    data = &#123;&#x27;year&#x27;: [2010, 2011, 2012, 2011, 2012, 2010, 2011, 2012],            &#x27;team&#x27;: [&#x27;Bears&#x27;, &#x27;Bears&#x27;, &#x27;Bears&#x27;, &#x27;Packers&#x27;, &#x27;Packers&#x27;, &#x27;Lions&#x27;,                     &#x27;Lions&#x27;, &#x27;Lions&#x27;],            &#x27;wins&#x27;: [11, 8, 10, 15, 11, 6, 10, 4],            &#x27;losses&#x27;: [5, 8, 6, 1, 5, 10, 6, 12]&#125;    football = pd.DataFrame(data)    print football&#x27;&#x27;&#x27;Pandas also has various functions that will help you understand some basicinformation about your data frame. Some of these functions are:1) dtypes: to get the datatype for each column2) describe: useful for seeing basic statistics of the dataframe&#x27;s numerical   columns3) head: displays the first five rows of the dataset4) tail: displays the last five rows of the dataset&#x27;&#x27;&#x27;# Change False to True to see these functions in actionif False:    data = &#123;&#x27;year&#x27;: [2010, 2011, 2012, 2011, 2012, 2010, 2011, 2012],            &#x27;team&#x27;: [&#x27;Bears&#x27;, &#x27;Bears&#x27;, &#x27;Bears&#x27;, &#x27;Packers&#x27;, &#x27;Packers&#x27;, &#x27;Lions&#x27;,                     &#x27;Lions&#x27;, &#x27;Lions&#x27;],            &#x27;wins&#x27;: [11, 8, 10, 15, 11, 6, 10, 4],            &#x27;losses&#x27;: [5, 8, 6, 1, 5, 10, 6, 12]&#125;    football = pd.DataFrame(data)    print football.dtypes    print &quot;&quot;    print football.describe()    print &quot;&quot;    print football.head()    print &quot;&quot;    print football.tail()


from pandas import DataFrame, Series################## Syntax Reminder:## The following code would create a two-column pandas DataFrame# named df with columns labeled &#x27;name&#x27; and &#x27;age&#x27;:## people = [&#x27;Sarah&#x27;, &#x27;Mike&#x27;, &#x27;Chrisna&#x27;]# ages  =  [28, 32, 25]# df = DataFrame(&#123;&#x27;name&#x27; : Series(people),#                 &#x27;age&#x27;  : Series(ages)&#125;)def create_dataframe():    &#x27;&#x27;&#x27;    Create a pandas dataframe called &#x27;olympic_medal_counts_df&#x27; containing    the data from the table of 2014 Sochi winter olympics medal counts.      The columns for this dataframe should be called     &#x27;country_name&#x27;, &#x27;gold&#x27;, &#x27;silver&#x27;, and &#x27;bronze&#x27;.      There is no need to  specify row indexes for this dataframe     (in this case, the rows will automatically be assigned numbered indexes).        You do not need to call the function in your code when running it in the    browser - the grader will do that automatically when you submit or test it.    &#x27;&#x27;&#x27;    countries = [&#x27;Russian Fed.&#x27;, &#x27;Norway&#x27;, &#x27;Canada&#x27;, &#x27;United States&#x27;,                 &#x27;Netherlands&#x27;, &#x27;Germany&#x27;, &#x27;Switzerland&#x27;, &#x27;Belarus&#x27;,                 &#x27;Austria&#x27;, &#x27;France&#x27;, &#x27;Poland&#x27;, &#x27;China&#x27;, &#x27;Korea&#x27;,                  &#x27;Sweden&#x27;, &#x27;Czech Republic&#x27;, &#x27;Slovenia&#x27;, &#x27;Japan&#x27;,                 &#x27;Finland&#x27;, &#x27;Great Britain&#x27;, &#x27;Ukraine&#x27;, &#x27;Slovakia&#x27;,                 &#x27;Italy&#x27;, &#x27;Latvia&#x27;, &#x27;Australia&#x27;, &#x27;Croatia&#x27;, &#x27;Kazakhstan&#x27;]    gold = [13, 11, 10, 9, 8, 8, 6, 5, 4, 4, 4, 3, 3, 2, 2, 2, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0]    silver = [11, 5, 10, 7, 7, 6, 3, 0, 8, 4, 1, 4, 3, 7, 4, 2, 4, 3, 1, 0, 0, 2, 2, 2, 1, 0]    bronze = [9, 10, 5, 12, 9, 5, 2, 1, 5, 7, 1, 2, 2, 6, 2, 4, 3, 1, 2, 1, 0, 6, 2, 1, 0, 1]    # your code here    data = &#123;&#x27;country_name&#x27;:Series(countries),&#x27;gold&#x27;:Series(gold),&#x27;silver&#x27;:Series(silver),&#x27;bronze&#x27;:Series(bronze)&#125;    olympic_medal_counts_df = DataFrame(data,index=countries)    return olympic_medal_counts_df

ç´¢å¼•æ•°æ®æ¡†import pandas as pd&#x27;&#x27;&#x27;You can think of a DataFrame as a group of Series that share an index.This makes it easy to select specific columns that you want from the DataFrame. Also a couple pointers:1) Selecting a single column from the DataFrame will return a Series2) Selecting multiple columns from the DataFrame will return a DataFrame*This playground is inspired by Greg Reda&#x27;s post on Intro to Pandas Data Structures:http://www.gregreda.com/intro-to-pandas-data-structures/&#x27;&#x27;&#x27;# Change False to True to see Series indexing in actionif True:    data = &#123;&#x27;year&#x27;: [2010, 2011, 2012, 2011, 2012, 2010, 2011, 2012],            &#x27;team&#x27;: [&#x27;Bears&#x27;, &#x27;Bears&#x27;, &#x27;Bears&#x27;, &#x27;Packers&#x27;, &#x27;Packers&#x27;, &#x27;Lions&#x27;,                     &#x27;Lions&#x27;, &#x27;Lions&#x27;],            &#x27;wins&#x27;: [11, 8, 10, 15, 11, 6, 10, 4],            &#x27;losses&#x27;: [5, 8, 6, 1, 5, 10, 6, 12]&#125;    football = pd.DataFrame(data)    print football[&#x27;year&#x27;]    print &#x27;&#x27;    print football.year  # shorthand for football[&#x27;year&#x27;]    print &#x27;&#x27;    print football[[&#x27;year&#x27;, &#x27;wins&#x27;, &#x27;losses&#x27;]]&#x27;&#x27;&#x27;Row selection can be done through multiple ways.Some of the basic and common methods are:   1) Slicing   2) An individual index (through the functions iloc or loc)   3) Boolean indexingYou can also combine multiple selection requirements through booleanoperators like &amp; (and) or | (or)&#x27;&#x27;&#x27;# Change False to True to see boolean indexing in actionif True:    data = &#123;&#x27;year&#x27;: [2010, 2011, 2012, 2011, 2012, 2010, 2011, 2012],            &#x27;team&#x27;: [&#x27;Bears&#x27;, &#x27;Bears&#x27;, &#x27;Bears&#x27;, &#x27;Packers&#x27;, &#x27;Packers&#x27;, &#x27;Lions&#x27;,                     &#x27;Lions&#x27;, &#x27;Lions&#x27;],            &#x27;wins&#x27;: [11, 8, 10, 15, 11, 6, 10, 4],            &#x27;losses&#x27;: [5, 8, 6, 1, 5, 10, 6, 12]&#125;    football = pd.DataFrame(data)    print football.iloc[[0]]    print &quot;&quot;    print football.loc[[0]]    print &quot;&quot;    print football[3:5]    print &quot;&quot;    print football[football.wins &gt; 10]    print &quot;&quot;    print football[(football.wins &gt; 10) &amp; (football.team == &quot;Packers&quot;)]


å‘é‡åŒ–æ–¹æ³•from pandas import DataFrame, Seriesimport numpydef avg_medal_count():    &#x27;&#x27;&#x27;    Compute the average number of bronze medals earned by countries who     earned at least one gold medal.          Save this to a variable named avg_bronze_at_least_one_gold. You do not    need to call the function in your code when running it in the browser -    the grader will do that automatically when you submit or test it.        HINT-1:    You can retrieve all of the values of a Pandas column from a     data frame, &quot;df&quot;, as follows:    df[&#x27;column_name&#x27;]        HINT-2:    The numpy.mean function can accept as an argument a single    Pandas column.         For example, numpy.mean(df[&quot;col_name&quot;]) would return the     mean of the values located in &quot;col_name&quot; of a dataframe df.    &#x27;&#x27;&#x27;    countries = [&#x27;Russian Fed.&#x27;, &#x27;Norway&#x27;, &#x27;Canada&#x27;, &#x27;United States&#x27;,                 &#x27;Netherlands&#x27;, &#x27;Germany&#x27;, &#x27;Switzerland&#x27;, &#x27;Belarus&#x27;,                 &#x27;Austria&#x27;, &#x27;France&#x27;, &#x27;Poland&#x27;, &#x27;China&#x27;, &#x27;Korea&#x27;,                  &#x27;Sweden&#x27;, &#x27;Czech Republic&#x27;, &#x27;Slovenia&#x27;, &#x27;Japan&#x27;,                 &#x27;Finland&#x27;, &#x27;Great Britain&#x27;, &#x27;Ukraine&#x27;, &#x27;Slovakia&#x27;,                 &#x27;Italy&#x27;, &#x27;Latvia&#x27;, &#x27;Australia&#x27;, &#x27;Croatia&#x27;, &#x27;Kazakhstan&#x27;]    gold = [13, 11, 10, 9, 8, 8, 6, 5, 4, 4, 4, 3, 3, 2, 2, 2, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0]    silver = [11, 5, 10, 7, 7, 6, 3, 0, 8, 4, 1, 4, 3, 7, 4, 2, 4, 3, 1, 0, 0, 2, 2, 2, 1, 0]    bronze = [9, 10, 5, 12, 9, 5, 2, 1, 5, 7, 1, 2, 2, 6, 2, 4, 3, 1, 2, 1, 0, 6, 2, 1, 0, 1]        olympic_medal_counts = &#123;&#x27;country_name&#x27;:Series(countries),                            &#x27;gold&#x27;: Series(gold),                            &#x27;silver&#x27;: Series(silver),                            &#x27;bronze&#x27;: Series(bronze)&#125;    df = DataFrame(olympic_medal_counts)        # YOUR CODE HERE    broze_at_least_one_gold = df[&#x27;bronze&#x27;][df[&#x27;gold&#x27;] &gt;= 1]    avg_bronze_at_least_one_gold = numpy.mean(broze_at_least_one_gold)    return avg_bronze_at_least_one_gold

import numpyfrom pandas import DataFrame, Seriesdef avg_medal_count():    &#x27;&#x27;&#x27;    Using the dataframe&#x27;s apply method, create a new Series called     avg_medal_count that indicates the average number of gold, silver,    and bronze medals earned amongst countries who earned at     least one medal of any kind at the 2014 Sochi olympics.  Note that    the countries list already only includes countries that have earned    at least one medal. No additional filtering is necessary.        You do not need to call the function in your code when running it in the    browser - the grader will do that automatically when you submit or test it.    &#x27;&#x27;&#x27;    countries = [&#x27;Russian Fed.&#x27;, &#x27;Norway&#x27;, &#x27;Canada&#x27;, &#x27;United States&#x27;,                 &#x27;Netherlands&#x27;, &#x27;Germany&#x27;, &#x27;Switzerland&#x27;, &#x27;Belarus&#x27;,                 &#x27;Austria&#x27;, &#x27;France&#x27;, &#x27;Poland&#x27;, &#x27;China&#x27;, &#x27;Korea&#x27;,                  &#x27;Sweden&#x27;, &#x27;Czech Republic&#x27;, &#x27;Slovenia&#x27;, &#x27;Japan&#x27;,                 &#x27;Finland&#x27;, &#x27;Great Britain&#x27;, &#x27;Ukraine&#x27;, &#x27;Slovakia&#x27;,                 &#x27;Italy&#x27;, &#x27;Latvia&#x27;, &#x27;Australia&#x27;, &#x27;Croatia&#x27;, &#x27;Kazakhstan&#x27;]    gold = [13, 11, 10, 9, 8, 8, 6, 5, 4, 4, 4, 3, 3, 2, 2, 2, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0]    silver = [11, 5, 10, 7, 7, 6, 3, 0, 8, 4, 1, 4, 3, 7, 4, 2, 4, 3, 1, 0, 0, 2, 2, 2, 1, 0]    bronze = [9, 10, 5, 12, 9, 5, 2, 1, 5, 7, 1, 2, 2, 6, 2, 4, 3, 1, 2, 1, 0, 6, 2, 1, 0, 1]        olympic_medal_counts = &#123;&#x27;country_name&#x27;:countries,                            &#x27;gold&#x27;: Series(gold),                            &#x27;silver&#x27;: Series(silver),                            &#x27;bronze&#x27;: Series(bronze)&#125;        df = DataFrame(olympic_medal_counts)        # YOUR CODE HERE    avg_medal_count = df[[&#x27;gold&#x27;,&#x27;silver&#x27;,&#x27;bronze&#x27;]].apply(numpy.mean)        return avg_medal_count


çŸ©é˜µä¹˜æ³•å’ŒNumpy Dotimport numpyfrom pandas import DataFrame, Seriesdef numpy_dot():    &#x27;&#x27;&#x27;    Imagine a point system in which each country is awarded 4 points for each    gold medal,  2 points for each silver medal, and one point for each     bronze medal.      Using the numpy.dot function, create a new dataframe called     &#x27;olympic_points_df&#x27; that includes:        a) a column called &#x27;country_name&#x27; with the country name        b) a column called &#x27;points&#x27; with the total number of points the country           earned at the Sochi olympics.               You do not need to call the function in your code when running it in the    browser - the grader will do that automatically when you submit or test it.    &#x27;&#x27;&#x27;    countries = [&#x27;Russian Fed.&#x27;, &#x27;Norway&#x27;, &#x27;Canada&#x27;, &#x27;United States&#x27;,                 &#x27;Netherlands&#x27;, &#x27;Germany&#x27;, &#x27;Switzerland&#x27;, &#x27;Belarus&#x27;,                 &#x27;Austria&#x27;, &#x27;France&#x27;, &#x27;Poland&#x27;, &#x27;China&#x27;, &#x27;Korea&#x27;,                  &#x27;Sweden&#x27;, &#x27;Czech Republic&#x27;, &#x27;Slovenia&#x27;, &#x27;Japan&#x27;,                 &#x27;Finland&#x27;, &#x27;Great Britain&#x27;, &#x27;Ukraine&#x27;, &#x27;Slovakia&#x27;,                 &#x27;Italy&#x27;, &#x27;Latvia&#x27;, &#x27;Australia&#x27;, &#x27;Croatia&#x27;, &#x27;Kazakhstan&#x27;]    gold = [13, 11, 10, 9, 8, 8, 6, 5, 4, 4, 4, 3, 3, 2, 2, 2, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0]    silver = [11, 5, 10, 7, 7, 6, 3, 0, 8, 4, 1, 4, 3, 7, 4, 2, 4, 3, 1, 0, 0, 2, 2, 2, 1, 0]    bronze = [9, 10, 5, 12, 9, 5, 2, 1, 5, 7, 1, 2, 2, 6, 2, 4, 3, 1, 2, 1, 0, 6, 2, 1, 0, 1]     # YOUR CODE HERE    data = &#123;&#x27;country_name&#x27;:Series(countries),&#x27;gold&#x27;:Series(gold),&#x27;silver&#x27;:Series(silver),&#x27;bronze&#x27;:Series(bronze)&#125;    df = DataFrame(data)    medal_counts = df[[&#x27;gold&#x27;,&#x27;silver&#x27;,&#x27;bronze&#x27;]]    points = numpy.dot(medal_counts,[4,2,1])    olympic_points = &#123;&#x27;country_name&#x27;: Series(countries),&#x27;points&#x27;:Series(points)&#125;    olympic_points_df = DataFrame(olympic_points)        return olympic_points_df

ä¹¦ç­¾Pandasæ–‡æ¡£http://pandas.pydata.org/pandas-docs/stable/
Pandas IPython Notebook æ•™ç¨‹https://bitbucket.org/hrojas/learn-pandas
numpy.dot â€” NumPy v1.12 Manualhttps://docs.scipy.org/doc/numpy/reference/generated/numpy.dot.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>è½¬è½½</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>numpy</tag>
        <tag>pandas</tag>
      </tags>
  </entry>
  <entry>
    <title>Jupyter notebook</title>
    <url>/dev-jupyter-notebook/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡è½¬è½½è‡ªä¼˜è¾¾å­¦åŸã€Šæœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆã€‹
Jupyter notebook æ˜¯ Web æ–‡æ¡£ï¼Œèƒ½è®©ä½ å°†æ–‡æœ¬ã€å›¾åƒå’Œä»£ç å…¨éƒ¨ç»„åˆåˆ°ä¸€ä¸ªæ–‡æ¡£ä¸­ã€‚å®ƒå·²ç»æˆä¸ºæ•°æ®åˆ†æçš„æ ‡å‡†ç¯å¢ƒã€‚notebook æºè‡ª 2011 å¹´çš„ IPython é¡¹ç›®ï¼Œä¹‹åè¿…é€Ÿæµè¡Œèµ·æ¥ã€‚


Jupyter notebook æ˜¯ä»€ä¹ˆï¼Ÿæ¬¢è¿å­¦ä¹ æœ¬è¯¾ï¼Œå³å¦‚ä½•ä½¿ç”¨ Jupyter notebookã€‚notebook æ˜¯ä¸€ç§ Web åº”ç”¨ï¼Œèƒ½è®©ç”¨æˆ·å°†è¯´æ˜æ–‡æœ¬ã€æ•°å­¦æ–¹ç¨‹ã€ä»£ç å’Œå¯è§†åŒ–å†…å®¹å…¨éƒ¨ç»„åˆåˆ°ä¸€ä¸ªæ˜“äºå…±äº«çš„æ–‡æ¡£ä¸­ã€‚ä¾‹å¦‚ï¼Œä¸ä¹…å‰æˆ‘å…±äº«äº†æˆ‘æœ€çˆ±çš„ notebook ä¹‹ä¸€ï¼Œå®ƒåˆ†æäº† LIGO å®éªŒæ¢æµ‹åˆ°çš„ä¸¤ä¸ªç¢°æ’çš„é»‘æ´æ‰€å‘å‡ºçš„å¼•åŠ›æ³¢ã€‚ä½ å¯ä»¥ä¸‹è½½æ•°æ®ï¼Œè¿è¡Œ notebook ä¸­çš„ä»£ç ï¼Œé‡å¤æ•´ä¸ªåˆ†æï¼Œå®é™…ä¸Šç­‰äºä½ è‡ªå·±æ¢æµ‹å¼•åŠ›æ³¢ï¼
Notebook å·²è¿…é€Ÿæˆä¸ºå¤„ç†æ•°æ®çš„å¿…å¤‡å·¥å…·ã€‚å…¶å·²çŸ¥ç”¨é€”åŒ…æ‹¬æ•°æ®æ¸…ç†å’Œæ¢ç´¢ã€å¯è§†åŒ–ã€æœºå™¨å­¦ä¹ å’Œå¤§æ•°æ®åˆ†æã€‚æˆ‘ä¸ºæˆ‘çš„ä¸ªäººåšå®¢åˆ›å»ºäº†ä¸€ä¸ª notebook ç¤ºä¾‹ï¼Œå®ƒå±•ç¤ºäº† notebook çš„è®¸å¤šç‰¹ç‚¹ã€‚è¿™é¡¹å·¥ä½œé€šå¸¸åœ¨ç»ˆç«¯ä¸­å®Œæˆï¼Œä¹Ÿå³ä½¿ç”¨æ™®é€šçš„ Python shell æˆ– IPython å®Œæˆã€‚å¯è§†åŒ–åœ¨å•ç‹¬çš„çª—å£ä¸­è¿›è¡Œï¼Œè€Œæ–‡å­—èµ„æ–™ä»¥åŠå„ç§å‡½æ•°å’Œç±»è„šæœ¬åŒ…å«åœ¨ç‹¬ç«‹çš„æ–‡æ¡£ä¸­ã€‚ä½†æ˜¯ï¼Œnotebook èƒ½å°†è¿™ä¸€åˆ‡é›†ä¸­åˆ°ä¸€å¤„ï¼Œè®©ç”¨æˆ·ä¸€ç›®äº†ç„¶ã€‚
GitHub ä¸Šé¢ä¹Ÿä¼šè‡ªåŠ¨æä¾› notebookã€‚å€ŸåŠ©æ­¤å‡ºè‰²çš„åŠŸèƒ½ï¼Œä½ å¯ä»¥è½»æ¾å…±äº«å·¥ä½œã€‚http://nbviewer.jupyter.org/ ä¹Ÿä¼šæä¾› GitHub ä»£ç åº“ä¸­çš„ notebook æˆ–å­˜å‚¨åœ¨å…¶ä»–åœ°æ–¹çš„ notebookã€‚
æ–‡å­¦åŒ–ç¼–ç¨‹notebook æ˜¯ Donald Knuth åœ¨ 1984 å¹´æå‡ºçš„æ–‡å­¦åŒ–ç¼–ç¨‹çš„ä¸€ç§å½¢å¼ã€‚åœ¨æ–‡å­¦åŒ–ç¼–ç¨‹ä¸­ï¼Œç›´æ¥åœ¨ä»£ç æ—å†™å‡ºå™è¿°æ€§æ–‡æ¡£ï¼Œè€Œä¸æ˜¯å¦å¤–ç¼–å†™å•ç‹¬çš„æ–‡æ¡£ã€‚ç”¨ Donald Knuth çš„è¯æ¥è¯´ï¼š

è®©æˆ‘ä»¬é›†ä¸­ç²¾åŠ›å‘äººä»¬è§£é‡Šæˆ‘ä»¬å¸Œæœ›è®¡ç®—æœºåšä»€ä¹ˆï¼Œè€Œä¸æ˜¯è®¾æƒ³æˆ‘ä»¬çš„ä¸»è¦ä»»åŠ¡æ˜¯æŒ‡ç¤ºè®¡ç®—æœºåšä»€ä¹ˆã€‚

å½’æ ¹åˆ°åº•ï¼Œä»£ç æ˜¯å†™ç»™äººè€Œä¸æ˜¯è®¡ç®—æœºçœ‹çš„ã€‚notebook æ°æ°æä¾›äº†è¿™ç§èƒ½åŠ›ã€‚ä½ èƒ½å¤Ÿç›´æ¥åœ¨ä»£ç æ—å†™å‡ºå™è¿°æ€§æ–‡æ¡£ã€‚è¿™ä¸ä»…å¯¹é˜…è¯» notebook çš„äººå¾ˆæœ‰ç”¨ï¼Œè€Œä¸”å¯¹ä½ å°†æ¥å›å¤´åˆ†æä»£ç ä¹Ÿå¾ˆæœ‰ç”¨ã€‚
è¯´ç‚¹é¢˜å¤–è¯ï¼šæœ€è¿‘ï¼Œæ–‡å­¦åŒ–ç¼–ç¨‹è¿™ä¸ªæ¦‚å¿µå·²ç»å‘å±•æˆä¸ºä¸€é—¨å®Œæ•´çš„ç¼–ç¨‹è¯­è¨€ï¼Œå³ Eveã€‚
notebook å¦‚ä½•å·¥ä½œJupyter notebook æºè‡ª Fernando Perez å‘èµ·çš„ IPython é¡¹ç›®ã€‚IPython æ˜¯ä¸€ç§äº¤äº’å¼ shellï¼Œä¸æ™®é€šçš„ Python shell ç›¸ä¼¼ï¼Œä½†å…·æœ‰ä¸€äº›å¾ˆå¥½çš„åŠŸèƒ½ï¼ˆä¾‹å¦‚è¯­æ³•é«˜äº®æ˜¾ç¤ºå’Œä»£ç è¡¥å…¨ï¼‰ã€‚æœ€åˆï¼Œnotebook çš„å·¥ä½œæ–¹å¼æ˜¯ï¼Œå°†æ¥è‡ª Web åº”ç”¨ï¼ˆä½ åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°çš„ notebookï¼‰çš„æ¶ˆæ¯å‘é€ç»™ IPython å†…æ ¸ï¼ˆåœ¨åå°è¿è¡Œçš„ IPython åº”ç”¨ç¨‹åºï¼‰ã€‚å†…æ ¸æ‰§è¡Œä»£ç ï¼Œç„¶åå°†ä»£ç å‘é€å› notebookã€‚å½“å‰æ¶æ„ä¸ä¹‹ç›¸ä¼¼ï¼Œå…·ä½“è§ä¸‹å›¾ï¼ˆæ‘˜è‡ªJupyteræ–‡æ¡£ï¼‰ã€‚ä¸­å¿ƒç‚¹æ˜¯ notebook æœåŠ¡å™¨ã€‚ä½ é€šè¿‡æµè§ˆå™¨è¿æ¥åˆ°è¯¥æœåŠ¡å™¨ï¼Œè€Œ notebook å‘ˆç°ä¸º Web åº”ç”¨ã€‚ä½ åœ¨ Web åº”ç”¨ä¸­ç¼–å†™çš„ä»£ç é€šè¿‡è¯¥æœåŠ¡å™¨å‘é€ç»™å†…æ ¸ã€‚å†…æ ¸è¿è¡Œä»£ç å¹¶å°†ä»£ç å‘é€å›è¯¥æœåŠ¡å™¨ï¼Œä¹‹åï¼Œä»»ä½•è¾“å‡ºéƒ½ä¼šè¿”å›åˆ°æµè§ˆå™¨ä¸­ã€‚ä¿å­˜ notebook æ—¶ï¼Œå®ƒä½œä¸º JSON æ–‡ä»¶ï¼ˆæ–‡ä»¶æ‰©å±•åä¸º .ipynbï¼‰å†™å…¥åˆ°è¯¥æœåŠ¡å™¨ä¸­ã€‚
æ­¤æ¶æ„çš„ä¸€ä¸ªä¼˜ç‚¹æ˜¯ï¼Œå†…æ ¸æ— éœ€è¿è¡Œ Pythonã€‚ç”±äº notebook å’Œå†…æ ¸åˆ†å¼€ï¼Œå› æ­¤å¯ä»¥åœ¨ä¸¤è€…ä¹‹é—´å‘é€ä»»ä½•è¯­è¨€çš„ä»£ç ã€‚ä¾‹å¦‚ï¼Œæ—©æœŸçš„ä¸¤ä¸ªé Python å†…æ ¸åˆ†åˆ«ç”¨äº R è¯­è¨€å’Œ Julia è¯­è¨€ã€‚ä½¿ç”¨ R å†…æ ¸æ—¶ï¼Œç”¨ R ç¼–å†™çš„ä»£ç å°†å‘é€ç»™æ‰§è¡Œè¯¥ä»£ç çš„ R å†…æ ¸ï¼Œè¿™ä¸åœ¨ Python å†…æ ¸ä¸Šè¿è¡Œ Python ä»£ç å®Œå…¨ä¸€æ ·ã€‚IPython notebook å·²è¢«æ”¹åï¼Œå› ä¸º notebook å˜å¾—ä¸ç¼–ç¨‹è¯­è¨€æ— å…³ã€‚æ–°çš„åç§° Jupyter ç”± Juliaã€Python å’Œ R ç»„åˆè€Œæˆã€‚å¦‚æœæœ‰å…´è¶£ï¼Œä¸å¦¨çœ‹çœ‹å¯ç”¨å†…æ ¸çš„åˆ—è¡¨ã€‚
å¦ä¸€ä¸ªä¼˜ç‚¹æ˜¯ï¼Œå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¿è¡ŒæœåŠ¡å™¨ï¼Œå¹¶ä¸”å¯é€šè¿‡äº’è”ç½‘è®¿é—®æœåŠ¡å™¨ã€‚é€šå¸¸ï¼Œä½ ä¼šåœ¨å­˜å‚¨æ‰€æœ‰æ•°æ®å’Œ notebook æ–‡ä»¶çš„è‡ªæœ‰è®¡ç®—æœºä¸Šè¿è¡ŒæœåŠ¡å™¨ã€‚ä½†æ˜¯ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨è¿œç¨‹è®¡ç®—æœºæˆ–äº‘å®ä¾‹ï¼ˆå¦‚ Amazon çš„ EC2ï¼‰ä¸Šè®¾ç½®æœåŠ¡å™¨ã€‚ä¹‹åï¼Œå¯ä»¥åœ¨å…¨çƒä»»ä½•åœ°æ–¹é€šè¿‡æµè§ˆå™¨è®¿é—® notebookã€‚
å®‰è£… Jupyter notebookåˆ°ç›®å‰ä¸ºæ­¢ï¼Œå®‰è£… Jupyter çš„æœ€ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨ Anacondaã€‚è¯¥å‘è¡Œç‰ˆè‡ªåŠ¨é™„å¸¦äº† Jupyter notebookã€‚ä½ èƒ½å¤Ÿåœ¨é»˜è®¤ç¯å¢ƒä¸‹ä½¿ç”¨ notebookã€‚
è¦åœ¨ conda ç¯å¢ƒä¸­å®‰è£… Jupyter notebookï¼Œè¯·ä½¿ç”¨ conda install jupyter notebookã€‚
ä¹Ÿå¯ä»¥é€šè¿‡ pip ä½¿ç”¨ pip install jupyter notebook æ¥è·å¾— Jupyter notebookã€‚
å®‰è£…å¤šç‰ˆæœ¬å†…æ ¸1ã€æŸ¥çœ‹å·²å®‰è£…å†…æ ¸jupyter kernelspec list
2ã€å®‰è£…å†…æ ¸å‡è®¾é»˜è®¤ç¯å¢ƒæ˜¯python2.7ï¼Œé‚£ä¹ˆåˆ‡æ¢åˆ°python3.6ç¯å¢ƒä¸‹ï¼Œç„¶åå®‰è£…å†…æ ¸
activate py3conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/conda config --set show_channel_urls yesconda install ipykernel

3ã€æŠŠå†…æ ¸æ·»åŠ åˆ°jupyter
activate py3python -m ipykernel install

å¯ä»¥æ·»åŠ å‘½ä»¤ --name kernelname ä¸ºkernelæŒ‡å®šåå­—ã€‚
4ã€åˆ é™¤å†…æ ¸jupyter kernelspec remove kernelname
å¯åŠ¨ notebook æœåŠ¡å™¨è¦å¯åŠ¨ notebook æœåŠ¡å™¨ï¼Œè¯·åœ¨ç»ˆç«¯æˆ–æ§åˆ¶å°ä¸­è¾“å…¥ jupyter notebookã€‚æœåŠ¡å™¨ä¼šåœ¨ä½ è¿è¡Œæ­¤å‘½ä»¤çš„ç›®å½•ä¸­å¯åŠ¨ã€‚è¿™æ„å‘³ç€ä»»ä½• notebook æ–‡ä»¶éƒ½ä¼šä¿å­˜åœ¨è¯¥ç›®å½•ä¸­ã€‚ä½ é€šå¸¸å¸Œæœ›åœ¨ notebook æ‰€åœ¨çš„ç›®å½•ä¸­å¯åŠ¨æœåŠ¡å™¨ã€‚ä¸è¿‡ï¼Œä½ å¯ä»¥åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­å¯¼èˆªåˆ° notebook æ‰€åœ¨çš„ä½ç½®ã€‚
è¿è¡Œæ­¤å‘½ä»¤æ—¶ï¼ˆè¯·è‡ªå·±è¯•ä¸€ä¸‹ï¼ï¼‰ï¼ŒæœåŠ¡å™¨ä¸»é¡µä¼šåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œnotebook æœåŠ¡å™¨çš„è¿è¡Œåœ°å€æ˜¯ http://localhost:8888ã€‚å¦‚æœä½ ä¸ç†Ÿæ‚‰è¯¥åœ°å€ï¼Œå…¶å«ä¹‰æ˜¯ï¼šlocalhost è¡¨ç¤ºä½ çš„è®¡ç®—æœºï¼Œè€Œ 8888 æ˜¯æœåŠ¡å™¨çš„é€šä¿¡ç«¯å£ã€‚åªè¦æœåŠ¡å™¨ä»åœ¨è¿è¡Œï¼Œä½ éšæ—¶éƒ½èƒ½é€šè¿‡åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ http://localhost:8888 è¿”å›åˆ°æœåŠ¡å™¨ã€‚
å¦‚æœå¯åŠ¨å…¶ä»–æœåŠ¡å™¨ï¼Œæ–°æœåŠ¡å™¨ä¼šå°è¯•ä½¿ç”¨ç«¯å£ 8888ï¼Œä½†ç”±äºæ­¤ç«¯å£å·²è¢«å ç”¨ï¼Œå› æ­¤æ–°æœåŠ¡å™¨ä¼šåœ¨ç«¯å£ 8889 ä¸Šè¿è¡Œã€‚ä¹‹åï¼Œå¯ä»¥é€šè¿‡ http://localhost:8889 è¿æ¥åˆ°æ–°æœåŠ¡å™¨ã€‚æ¯å°é¢å¤–çš„ notebook æœåŠ¡å™¨éƒ½ä¼šåƒè¿™æ ·å¢å¤§ç«¯å£å·ã€‚
å¦‚æœä½ å°è¯•å¯åŠ¨è‡ªå·±çš„æœåŠ¡å™¨ï¼Œå®ƒåº”ç±»ä¼¼ä»¥ä¸‹æ‰€ç¤ºï¼š
ä½ å¯èƒ½ä¼šçœ‹åˆ°ä¸Šé¢åˆ—è¡¨ä¸­çš„ä¸€äº›æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œå…·ä½“å–å†³äºä½ åœ¨å“ªé‡Œå¯åŠ¨æœåŠ¡å™¨ã€‚
åœ¨å³ä¾§ï¼Œä½ å¯ä»¥ç‚¹å‡»â€œNewâ€ï¼ˆæ–°å»ºï¼‰ï¼Œåˆ›å»ºæ–°çš„ notebookã€æ–‡æœ¬æ–‡ä»¶ã€æ–‡ä»¶å¤¹æˆ–ç»ˆç«¯ã€‚â€œNotebooksâ€ä¸‹çš„åˆ—è¡¨æ˜¾ç¤ºäº†ä½ å·²å®‰è£…çš„å†…æ ¸ã€‚ç”±äºæˆ‘åœ¨ Python 3 ç¯å¢ƒä¸­è¿è¡ŒæœåŠ¡å™¨ï¼Œå› æ­¤åˆ—å‡ºäº† Python 3 å†…æ ¸ã€‚ä½ åœ¨è¿™é‡Œçœ‹åˆ°çš„å¯èƒ½æ˜¯ Python 2ã€‚æˆ‘è¿˜å®‰è£…äº†ç”¨äº Scala 2.10 å’Œ 2.11 çš„å†…æ ¸ï¼Œå› æ­¤å®ƒä»¬å‡ºç°åœ¨åˆ—è¡¨ä¸­ã€‚
å¦‚æœåœ¨ conda ç¯å¢ƒä¸­è¿è¡Œ Jupyter notebook æœåŠ¡å™¨ï¼Œåˆ™ä½ è¿˜èƒ½é€‰æ‹©ä»»ä½•å…¶ä»–ç¯å¢ƒä¸­çš„å†…æ ¸ï¼ˆè§ä¸‹å›¾ï¼‰ã€‚è¦åˆ›å»ºæ–°çš„ notebookï¼Œè¯·ç‚¹å‡»ä½ è¦ä½¿ç”¨çš„å†…æ ¸ã€‚
é¡¶éƒ¨çš„é€‰é¡¹å¡æ˜¯ Filesï¼ˆæ–‡ä»¶ï¼‰ã€Runningï¼ˆè¿è¡Œï¼‰å’Œ Clusterï¼ˆèšç±»ï¼‰ã€‚Filesï¼ˆæ–‡ä»¶ï¼‰æ˜¾ç¤ºå½“å‰ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚ç‚¹å‡» Runningï¼ˆè¿è¡Œï¼‰é€‰é¡¹å¡ä¼šåˆ—å‡ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„ notebookã€‚å¯ä»¥åœ¨è¯¥é€‰é¡¹å¡ä¸­ç®¡ç†è¿™äº› notebookã€‚
è¿‡å»ï¼Œåœ¨ Clustersï¼ˆèšç±»ï¼‰ä¸­åˆ›å»ºå¤šä¸ªç”¨äºå¹¶è¡Œè®¡ç®—çš„å†…æ ¸ã€‚ç°åœ¨ï¼Œè¿™é¡¹å·¥ä½œå·²ç»ç”± ipyparallel æ¥ç®¡ï¼Œå› æ­¤è¯¥é€‰é¡¹å¡å¦‚ä»Šç”¨å¤„ä¸å¤šã€‚
å¦‚æœåœ¨ conda ç¯å¢ƒä¸­è¿è¡Œ notebook æœåŠ¡å™¨ï¼Œåˆ™ä½ è¿˜èƒ½è®¿é—®ä»¥ä¸‹æ‰€ç¤ºçš„â€œCondaâ€é€‰é¡¹å¡ã€‚å¯ä»¥é€šè¿‡è¯¥é€‰é¡¹å¡ç®¡ç† Jupyter ä¸­çš„ç¯å¢ƒã€‚ä½ å¯ä»¥æ‰§è¡Œå¤šç§æ“ä½œï¼Œä¾‹å¦‚åˆ›å»ºæ–°çš„ç¯å¢ƒã€å®‰è£…åŒ…ã€æ›´æ–°åŒ…ã€å¯¼å‡ºç¯å¢ƒã€‚
å¿«é€Ÿå¯åŠ¨ notebookå¯åŠ¨jupyter notebookæ—¶ï¼Œæ¯æ¬¡éƒ½è¦åˆ‡æ¢æ–‡ä»¶è·¯å¾„ï¼Œéœ€è¦è¾“å…¥ç›¸å…³çš„å‘½ä»¤ï¼Œç›¸å¯¹æ¥è¯´æ¯”è¾ƒéº»çƒ¦ï¼Œæœ‰ä¸€ä¸ªå¯ä»¥å¿«é€Ÿå¯åŠ¨çš„å°æŠ€å·§ã€‚
åœ¨æƒ³è¦æ‰“å¼€çš„ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ª ipy.bat æ–‡ä»¶ï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œè¾“å…¥å¦‚ä¸‹å†…å®¹å¹¶ä¿å­˜ã€‚
jupyter notebookpause
åŒå‡»è¿™ä¸ª ipy.bat æ–‡ä»¶ï¼Œå°±å¯ä»¥å¿«é€Ÿå¯åŠ¨jupyter notebookï¼ŒæŠŠè¿™ä¸ª ipy.batæ–‡ä»¶ä»¥å¿«æ·æ–¹å¼å‘é€åˆ°æ¡Œé¢ï¼Œå¯åŠ¨å¾ˆæ–¹ä¾¿ã€‚
å…³é—­ Jupyteré€šè¿‡åœ¨æœåŠ¡å™¨ä¸»é¡µä¸Šé€‰ä¸­ notebook æ—è¾¹çš„å¤é€‰æ¡†ï¼Œç„¶åç‚¹å‡»â€œShutdownâ€ï¼ˆå…³é—­ï¼‰ï¼Œä½ å¯ä»¥å…³é—­å„ä¸ª notebookã€‚ä½†æ˜¯ï¼Œåœ¨è¿™æ ·åšä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ ä¿å­˜äº†å·¥ä½œï¼å¦åˆ™ï¼Œåœ¨ä½ ä¸Šæ¬¡ä¿å­˜åæ‰€åšçš„ä»»ä½•æ›´æ”¹éƒ½ä¼šä¸¢å¤±ã€‚ä¸‹æ¬¡è¿è¡Œ notebook æ—¶ï¼Œä½ è¿˜éœ€è¦é‡æ–°è¿è¡Œä»£ç ã€‚é€šè¿‡åœ¨ç»ˆç«¯ä¸­æŒ‰ä¸¤æ¬¡ Ctrl + Cï¼Œå¯ä»¥å…³é—­æ•´ä¸ªæœåŠ¡å™¨ã€‚å†æ¬¡æé†’ï¼Œè¿™ä¼šç«‹å³å…³é—­æ‰€æœ‰è¿è¡Œä¸­çš„ notebookï¼Œå› æ­¤ï¼Œè¯·ç¡®ä¿ä½ ä¿å­˜äº†å·¥ä½œï¼
notebook ç•Œé¢åˆ›å»ºæ–°çš„ notebook æ—¶ï¼Œä½ ä¼šçœ‹åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„ç•Œé¢ï¼šè¯·éšæ„å°è¯•å’Œå››å¤„æµè§ˆä¸€ä¸‹ã€‚
ä½ ä¼šçœ‹åˆ°å¤–æ¡†ä¸ºç»¿è‰²çš„ä¸€ä¸ªå°æ–¹æ¡†ã€‚å®ƒç§°ä¸ºå•å…ƒæ ¼ã€‚å•å…ƒæ ¼æ˜¯ä½ ç¼–å†™å’Œè¿è¡Œä»£ç çš„åœ°æ–¹ã€‚ä½ ä¹Ÿå¯ä»¥æ›´æ”¹å…¶ç±»å‹ï¼Œä»¥å‘ˆç° Markdownï¼ˆä¸€ç§å¸¸ç”¨äºç¼–å†™ Web å†…å®¹çš„æ ¼å¼åŒ–è¯­æ³•ï¼‰ã€‚æˆ‘ä¼šåœ¨åé¢æ›´è¯¦ç»†åœ°ä»‹ç» Markdownã€‚åœ¨å·¥å…·æ ä¸­ç‚¹å‡»â€œCodeâ€ï¼Œå°†å…¶æ”¹ä¸º Markdownï¼Œç„¶åæ”¹å›æ¥ã€‚å°å‹çš„æ’­æ”¾æŒ‰é’®ç”¨äºè¿è¡Œå•å…ƒæ ¼ï¼Œè€Œå‘ä¸Šå’Œå‘ä¸‹çš„ç®­å¤´ç”¨äºä¸Šä¸‹ç§»åŠ¨å•å…ƒæ ¼ã€‚è¿è¡Œä»£ç å•å…ƒæ ¼æ—¶ï¼Œå•å…ƒæ ¼ä¸‹æ–¹ä¼šæ˜¾ç¤ºè¾“å‡ºã€‚å•å…ƒæ ¼è¿˜ä¼šè¢«ç¼–å·ï¼ˆå·¦ä¾§ä¼šæ˜¾ç¤º In [1]:ï¼‰ã€‚è¿™èƒ½è®©ä½ çŸ¥é“è¿è¡Œçš„ä»£ç å’Œè¿è¡Œé¡ºåºï¼ˆå¦‚æœè¿è¡Œäº†å¤šä¸ªå•å…ƒæ ¼çš„è¯ï¼‰ã€‚åœ¨ Markdown æ¨¡å¼ä¸‹è¿è¡Œå•å…ƒæ ¼ä¼šå°† Markdown å‘ˆç°ä¸ºæ–‡æœ¬ã€‚
å·¥å…·æ ä»å·¦ä¾§å¼€å§‹ï¼Œå·¥å…·æ ä¸Šçš„å…¶ä»–æ§ä»¶æ˜¯ï¼š

è½ä¼çš„è½¯ç›˜ç¬¦å·ï¼Œè¡¨ç¤ºâ€œä¿å­˜â€ã€‚è¯·è®°å¾—ä¿å­˜ notebookï¼

æŒ‰é’®ç”¨äºåˆ›å»ºæ–°çš„å•å…ƒæ ¼


ç„¶åæ˜¯ç”¨äºå‰ªåˆ‡ã€å¤åˆ¶å’Œç²˜è´´å•å…ƒæ ¼çš„æŒ‰é’®ã€‚
è¿è¡Œã€åœæ­¢ã€é‡æ–°å¯åŠ¨å†…æ ¸
å•å…ƒæ ¼ç±»å‹ï¼šä»£ç ã€Markdownã€åŸå§‹æ–‡æœ¬å’Œæ ‡é¢˜
å‘½ä»¤é¢æ¿ï¼ˆè§ä¸‹æ–‡ï¼‰
å•å…ƒæ ¼å·¥å…·æ ï¼Œæä¾›ä¸åŒçš„å•å…ƒæ ¼é€‰é¡¹ï¼ˆä¾‹å¦‚å°†å•å…ƒæ ¼ç”¨ä½œå¹»ç¯ç‰‡ï¼‰

å‘½ä»¤é¢æ¿å°é”®ç›˜ç¬¦å·ä»£è¡¨å‘½ä»¤é¢æ¿ã€‚ç‚¹å‡»å®ƒä¼šå¼¹å‡ºä¸€ä¸ªå¸¦æœ‰æœç´¢æ çš„é¢æ¿ï¼Œä¾›ä½ æœç´¢ä¸åŒçš„å‘½ä»¤ã€‚è¿™èƒ½åˆ‡å®å¸®åŠ©ä½ åŠ å¿«å·¥ä½œé€Ÿåº¦ï¼Œå› ä¸ºä½ æ— éœ€ä½¿ç”¨é¼ æ ‡ç¿»æŸ¥å„ä¸ªèœå•ã€‚ä½ åªéœ€æ‰“å¼€å‘½ä»¤é¢æ¿ï¼Œç„¶åé”®å…¥è¦æ‰§è¡Œçš„æ“ä½œã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¦åˆå¹¶ä¸¤ä¸ªå•å…ƒæ ¼ï¼š
æ›´å¤šäº‹é¡¹é¡¶éƒ¨æ˜¾ç¤ºäº†æ ‡é¢˜ã€‚ç‚¹å‡»å®ƒå¯ä»¥å°† notebook é‡å‘½åã€‚
å³ä¾§æ˜¯å†…æ ¸ç±»å‹ï¼ˆåœ¨æˆ‘çš„ä¾‹å­ä¸­æ˜¯ Python 3ï¼‰ï¼Œæ—è¾¹æ˜¯ä¸€ä¸ªå°åœ†å½¢ã€‚åœ¨å†…æ ¸è¿è¡Œå•å…ƒæ ¼æ—¶ï¼Œä¼šå¡«å……è¿™ä¸ªå°åœ†å½¢ã€‚å¯¹äºå¤§å¤šæ•°å¿«é€Ÿè¿è¡Œçš„æ“ä½œï¼Œå¹¶ä¸ä¼šå¡«å……å®ƒã€‚å®ƒæ˜¯ä¸€ä¸ªå°å‹æŒ‡ç¤ºå™¨ï¼Œè®©ä½ çŸ¥é“å®é™…è¿è¡Œçš„ä»£ç ä¼šè¿è¡Œè¾ƒé•¿æ—¶é—´ã€‚
å·¥å…·æ åŒ…å«äº†ä¿å­˜æŒ‰é’®ï¼Œæ­¤å¤–ï¼Œnotebook ä¹Ÿä¼šå®šæœŸè‡ªåŠ¨ä¿å­˜ã€‚æ ‡é¢˜å³ä¾§ä¼šæ³¨æ˜æœ€è¿‘ä¸€æ¬¡çš„ä¿å­˜ã€‚å¯ä»¥ä½¿ç”¨ä¿å­˜æŒ‰é’®æ‰‹åŠ¨è¿›è¡Œä¿å­˜ï¼Œä¹Ÿå¯ä»¥æŒ‰é”®ç›˜ä¸Šçš„ Escï¼Œç„¶åæŒ‰ sã€‚æŒ‰ Esc é”®ä¼šå˜ä¸ºå‘½ä»¤æ¨¡å¼ï¼Œè€Œ s æ˜¯â€œä¿å­˜â€çš„å¿«æ·é”®ã€‚æˆ‘ä¼šåœ¨åé¢ä»‹ç»å‘½ä»¤æ¨¡å¼å’Œå¿«æ·é”®ã€‚
åœ¨â€œFileâ€ï¼ˆæ–‡ä»¶ï¼‰èœå•ä¸­ï¼Œå¯ä»¥ä¸‹è½½å¤šç§æ ¼å¼çš„ notebookã€‚é€šå¸¸ï¼Œä½ ä¼šå¸Œæœ›å°†å®ƒä½œä¸º HTML æ–‡ä»¶ä¸‹è½½ï¼Œä»¥ä¾¿ä¸ä¸ä½¿ç”¨ Jupyter çš„å…¶ä»–äººå…±äº«ã€‚ä¹Ÿå¯ä»¥å°† notebook ä½œä¸ºæ™®é€šçš„ Python æ–‡ä»¶ä¸‹è½½ï¼Œæ­¤æ—¶æ‰€æœ‰ä»£ç éƒ½ä¼šåƒå¹³å¸¸ä¸€æ ·è¿è¡Œã€‚è¦åœ¨åšå®¢æˆ–æ–‡æ¡£ä¸­ä½¿ç”¨ notebookï¼ŒMarkdown å’Œ reST æ ¼å¼å¾ˆåˆé€‚ã€‚
ä»£ç å•å…ƒæ ¼notebook ä¸­çš„å¤§éƒ¨åˆ†å·¥ä½œå‡åœ¨ä»£ç å•å…ƒæ ¼ä¸­å®Œæˆã€‚è¿™æ˜¯ç¼–å†™å’Œæ‰§è¡Œä»£ç çš„åœ°æ–¹ã€‚åœ¨ä»£ç å•å…ƒæ ¼ä¸­å¯ä»¥æ‰§è¡Œå¤šç§æ“ä½œï¼Œä¾‹å¦‚ç¼–å†™ä»»ä½•ä»£ç ã€ç»™å˜é‡èµ‹å€¼ã€å®šä¹‰å‡½æ•°å’Œç±»ã€å¯¼å…¥åŒ…ã€‚åœ¨ä¸€ä¸ªå•å…ƒæ ¼ä¸­æ‰§è¡Œçš„ä»»ä½•ä»£ç åœ¨æ‰€æœ‰å…¶ä»–å•å…ƒæ ¼ä¸­å‡å¯ç”¨ã€‚
æˆ‘åˆ›å»ºäº†ä¸€ä¸ª notebookï¼Œä½ å¯ä»¥å°†å®ƒå½“ä½œç»ƒä¹ æ¥å®Œæˆã€‚è¯·åœ¨ä¸‹é¢ä¸‹è½½æ­¤ notebook (Working With Code Cells)ï¼Œç„¶åä»ä½ è‡ªå·±çš„ notebook æœåŠ¡å™¨è¿è¡Œå®ƒã€‚ï¼ˆåœ¨ä½ çš„ç»ˆç«¯ä¸­ï¼Œè½¬åˆ°åŒ…å«æ­¤ notebook æ–‡ä»¶çš„ç›®å½•ï¼Œç„¶åè¾“å…¥ jupyter notebookï¼‰æµè§ˆå™¨å¯èƒ½ä¼šå°è¯•ä¸ä¸‹è½½å°±æ‰“å¼€æ­¤ notebook æ–‡ä»¶ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œè¯·å³å‡»é“¾æ¥å¹¶é€‰æ‹©â€œé“¾æ¥å¦å­˜ä¸ºâ€¦â€ã€‚
è¾…åŠ©ææ–™ï¼šWorking With Code Cells
Markdown å•å…ƒæ ¼å¦‚å‰æ‰€è¿°ï¼Œå•å…ƒæ ¼ä¹Ÿå¯ç”¨äºä»¥ Markdown ç¼–å†™çš„æ–‡æœ¬ã€‚Markdown æ˜¯æ ¼å¼åŒ–è¯­æ³•ï¼Œå¯è®©ä½ åŠ å…¥é“¾æ¥ã€å°†æ–‡æœ¬æ ·å¼è®¾ä¸ºç²—ä½“æˆ–æ–œä½“å’Œè®¾ç½®ä»£ç æ ¼å¼ã€‚åƒä»£ç å•å…ƒæ ¼ä¸€æ ·ï¼ŒæŒ‰ Shift + Enter æˆ– Ctrl + Enter å¯è¿è¡Œ Markdown å•å…ƒæ ¼ï¼Œè¿™ä¼šå°† Markdown å‘ˆç°ä¸ºæ ¼å¼åŒ–æ–‡æœ¬ã€‚åŠ å…¥æ–‡æœ¬å¯è®©ä½ ç›´æ¥åœ¨ä»£ç æ—å†™å‡ºå™è¿°æ€§æ–‡æ¡£ï¼Œä»¥åŠä¸ºä»£ç å’Œä»£ç ä¸­çš„æ€è·¯ç¼–å†™æ–‡æ¡£ã€‚
ä½ å¯ä»¥åœ¨æ­¤å¤„æŸ¥æ‰¾æ–‡æ¡£ï¼Œä½†æˆ‘ä¼šæä¾›ç®€çŸ­çš„å…¥é—¨æ–‡æ¡£ã€‚
æ ‡é¢˜è¦ç¼–å†™æ ‡é¢˜ï¼Œå¯åœ¨æ–‡æœ¬å‰æ”¾ç½®äº•å·ï¼Œå³ #ï¼ˆè‹±æ–‡è¯»ä½œ poundã€hash æˆ– octothorpeï¼‰ã€‚ä¸€ä¸ª # å‘ˆç°ä¸º h1 æ ‡é¢˜ï¼Œä¸¤ä¸ª # æ˜¯ h2 æ ‡é¢˜ï¼Œä¾æ­¤ç±»æ¨ã€‚ç±»ä¼¼ä»¥ä¸‹æ‰€ç¤ºï¼š
# Header 1## Header 2### Header 3

é“¾æ¥è¦åœ¨ Markdown ä¸­æ·»åŠ é“¾æ¥ï¼Œè¯·åœ¨æ–‡æœ¬ä¸¤ä¾§åŠ ä¸Šæ–¹æ‹¬å·ï¼Œå¹¶åœ¨ URL ä¸¤ä¾§åŠ ä¸Šåœ†æ‹¬å·ï¼Œä¾‹å¦‚ï¼š[Udacity&#39;s home page](https://www.udacity.com) è¡¨ç¤ºæŒ‡å‘ Udacityâ€™s home pageçš„é“¾æ¥ã€‚
å¼ºè°ƒæ•ˆæœå¯ä»¥ä½¿ç”¨æ˜Ÿå·æˆ–ä¸‹åˆ’çº¿ï¼ˆ* æˆ– _ï¼‰æ¥è¡¨ç¤ºç²—ä½“æˆ–æ–œä½“ï¼Œä»è€Œæ·»åŠ å¼ºè°ƒæ•ˆæœã€‚å¯¹äºæ–œä½“ï¼Œåœ¨æ–‡æœ¬ä¸¤ä¾§åŠ ä¸Šä¸€ä¸ªæ˜Ÿå·æˆ–ä¸‹åˆ’çº¿ï¼Œä¾‹å¦‚ _gelato_ æˆ– *gelato* ä¼šå‘ˆç°ä¸º gelatoã€‚
ç²—ä½“æ–‡æœ¬ä½¿ç”¨ä¸¤ä¸ªç¬¦å·ï¼Œä¾‹å¦‚ **aardvark** æˆ– __aardvark__ ä¼šå‘ˆç°ä¸º aardvarkã€‚
åªè¦åœ¨æ–‡æœ¬ä¸¤ä¾§ä½¿ç”¨ç›¸åŒçš„ç¬¦å·ï¼Œæ˜Ÿå·å’Œä¸‹åˆ’çº¿çš„ä½œç”¨éƒ½ä¸€æ ·ã€‚
ä»£ç å¯ä»¥é€šè¿‡ä¸¤ç§ä¸åŒçš„æ–¹å¼æ˜¾ç¤ºä»£ç ï¼Œä¸€ç§æ˜¯ä¸æ–‡æœ¬å†…è”ï¼Œå¦ä¸€ç§æ˜¯å°†ä»£ç å—ä¸æ–‡æœ¬åˆ†ç¦»ã€‚è¦å°†ä»£ç å˜ä¸ºå†…è”æ ¼å¼ï¼Œè¯·åœ¨æ–‡æœ¬ä¸¤ä¾§åŠ ä¸Šåæ’‡å·ã€‚ä¾‹å¦‚ï¼Œ`string.punctuation` ä¼šå‘ˆç°ä¸º string.punctuationã€‚
è¦åˆ›å»ºä»£ç å—ï¼Œè¯·å¦èµ·ä¸€è¡Œå¹¶ç”¨ä¸‰ä¸ªåæ’‡å·å°†æ–‡æœ¬åŒ…èµ·æ¥ï¼šæˆ–è€…å°†ä»£ç å—çš„æ¯ä¸€è¡Œéƒ½ç¼©è¿›å››ä¸ªç©ºæ ¼ã€‚
æ•°å­¦è¡¨è¾¾å¼åœ¨ Markdown å•å…ƒæ ¼ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ LaTeX ç¬¦å·åˆ›å»ºæ•°å­¦è¡¨è¾¾å¼ã€‚notebook ä½¿ç”¨ MathJax å°† LaTeX ç¬¦å·å‘ˆç°ä¸ºæ•°å­¦ç¬¦å·ã€‚è¦å¯åŠ¨æ•°å­¦æ¨¡å¼ï¼Œè¯·åœ¨ LaTeX ç¬¦å·ä¸¤ä¾§åŠ ä¸Šç¾å…ƒç¬¦å·ï¼ˆä¾‹å¦‚ $y = mx + b$ï¼‰ï¼Œä»¥åˆ›å»ºå†…è”çš„æ•°å­¦è¡¨è¾¾å¼ã€‚å¯¹äºæ•°å­¦ç¬¦å·å—ï¼Œè¯·ä½¿ç”¨ä¸¤ä¸ªç¾å…ƒç¬¦å·ï¼š
$$y = \frac&#123;a&#125;&#123;b+c&#125;$$

æ­¤åŠŸèƒ½çš„ç¡®å¾ˆæœ‰ç”¨ï¼Œå› æ­¤ï¼Œå¦‚æœä½ æ²¡æœ‰ç”¨è¿‡ LaTeXï¼Œè¯·é˜…è¯»è¿™ç¯‡å…¥é—¨æ–‡æ¡£ï¼Œå®ƒä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ LaTeX æ¥åˆ›å»ºæ•°å­¦è¡¨è¾¾å¼ã€‚
å°ç»“åœ¨ç¼–å†™ Markdown æ—¶ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªé€ŸæŸ¥æŒ‡å—ã€‚æˆ‘å»ºè®®ä½¿ç”¨ Markdown å•å…ƒæ ¼ï¼Œä¸ä½¿ç”¨ä¸€å †ä»£ç å—ç›¸æ¯”ï¼Œè¿™ä½¿ notebook å˜å¾—æ›´æ˜“äºé˜…è¯»ã€‚
å¿«æ·é”®notebook è‡ªå¸¦ä¸€ç»„å¿«æ·é”®ï¼Œèƒ½è®©ä½ ä½¿ç”¨é”®ç›˜ä¸å•å…ƒæ ¼äº¤äº’ï¼Œè€Œæ— éœ€ä½¿ç”¨é¼ æ ‡å’Œå·¥å…·æ ã€‚ç†Ÿæ‚‰è¿™äº›å¿«æ·é”®éœ€è¦èŠ±è´¹ä¸€ç‚¹æ—¶é—´ï¼Œä½†å¦‚æœèƒ½ç†Ÿç»ƒæŒæ¡ï¼Œå°†å¤§å¤§åŠ å¿«ä½ åœ¨ notebook ä¸­çš„å·¥ä½œé€Ÿåº¦ã€‚è¦è¯¦ç»†äº†è§£è¿™äº›å¿«æ·é”®å’Œç»ƒä¹ å®ƒä»¬çš„ç”¨æ³•ï¼Œè¯·åœ¨ä¸‹é¢ä¸‹è½½ notebook Keyboard Shortcutsã€‚å†æ¬¡æé†’ï¼Œæµè§ˆå™¨å¯èƒ½ä¼šå°è¯•æ‰“å¼€å®ƒï¼Œä½†è¯·å°†å®ƒä¿å­˜åˆ°è®¡ç®—æœºä¸­ã€‚è¯·å³å‡»é“¾æ¥å¹¶é€‰æ‹©â€œé“¾æ¥å¦å­˜ä¸ºâ€¦â€ã€‚è¾…åŠ©ææ–™ï¼šKeyboard Shortcuts
Magic å…³é”®å­—Magic å…³é”®å­—æ˜¯å¯ä»¥åœ¨å•å…ƒæ ¼ä¸­è¿è¡Œçš„ç‰¹æ®Šå‘½ä»¤ï¼Œèƒ½è®©ä½ æ§åˆ¶ notebook æœ¬èº«æˆ–æ‰§è¡Œç³»ç»Ÿè°ƒç”¨ï¼ˆä¾‹å¦‚æ›´æ”¹ç›®å½•ï¼‰ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ %matplotlib å°† matplotlib è®¾ç½®ä¸ºä»¥äº¤äº’æ–¹å¼åœ¨ notebook ä¸­å·¥ä½œã€‚
Magic å‘½ä»¤çš„å‰é¢å¸¦æœ‰ä¸€ä¸ªæˆ–ä¸¤ä¸ªç™¾åˆ†å·ï¼ˆ% æˆ– %%ï¼‰ï¼Œåˆ†åˆ«å¯¹åº”è¡Œ Magic å‘½ä»¤å’Œå•å…ƒæ ¼ Magic å‘½ä»¤ã€‚è¡Œ Magic å‘½ä»¤ä»…åº”ç”¨äºç¼–å†™ Magic å‘½ä»¤æ—¶æ‰€åœ¨çš„è¡Œï¼Œè€Œå•å…ƒæ ¼ Magic å‘½ä»¤åº”ç”¨äºæ•´ä¸ªå•å…ƒæ ¼ã€‚
æ³¨æ„ï¼šè¿™äº› Magic å…³é”®å­—æ˜¯ç‰¹å®šäºæ™®é€š Python å†…æ ¸çš„å…³é”®å­—ã€‚å¦‚æœä½¿ç”¨å…¶ä»–å†…æ ¸ï¼Œè¿™äº›å…³é”®å­—å¾ˆæœ‰å¯èƒ½æ— æ•ˆã€‚
ä»£ç è®¡æ—¶æœ‰æ—¶å€™ï¼Œä½ å¯èƒ½è¦èŠ±äº›ç²¾åŠ›ä¼˜åŒ–ä»£ç ï¼Œè®©ä»£ç è¿è¡Œå¾—æ›´å¿«ã€‚åœ¨æ­¤ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œå¿…é¡»å¯¹ä»£ç çš„è¿è¡Œé€Ÿåº¦è¿›è¡Œè®¡æ—¶ã€‚å¯ä»¥ä½¿ç”¨ Magic å‘½ä»¤ timeit æµ‹ç®—å‡½æ•°çš„è¿è¡Œæ—¶é—´ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
å¦‚æœè¦æµ‹ç®—æ•´ä¸ªå•å…ƒæ ¼çš„è¿è¡Œæ—¶é—´ï¼Œè¯·ä½¿ç”¨ %%timeitï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

åœ¨ notebook ä¸­åµŒå…¥å¯è§†åŒ–å†…å®¹å¦‚å‰æ‰€è¿°ï¼Œnotebook å…è®¸ä½ å°†å›¾åƒä¸æ–‡æœ¬å’Œä»£ç ä¸€èµ·åµŒå…¥ã€‚è¿™åœ¨ä½ ä½¿ç”¨ matplotlib æˆ–å…¶ä»–ç»˜å›¾åŒ…åˆ›å»ºå¯è§†åŒ–å†…å®¹æ—¶æœ€ä¸ºæœ‰ç”¨ã€‚å¯ä»¥ä½¿ç”¨ %matplotlib å°† matplotlib è®¾ç½®ä¸ºä»¥äº¤äº’æ–¹å¼åœ¨ notebook ä¸­å·¥ä½œã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå›¾å½¢å‘ˆç°åœ¨å„è‡ªçš„çª—å£ä¸­ã€‚ä½†æ˜¯ï¼Œå¯ä»¥å‘å‘½ä»¤ä¼ é€’å‚æ•°ï¼Œä»¥é€‰æ‹©ç‰¹å®šçš„â€œåç«¯â€ï¼ˆå‘ˆç°å›¾åƒçš„è½¯ä»¶ï¼‰ã€‚è¦ç›´æ¥åœ¨ notebook ä¸­å‘ˆç°å›¾å½¢ï¼Œåº”å°†å†…è”åç«¯ä¸å‘½ä»¤ %matplotlib inline ä¸€èµ·ä½¿ç”¨ã€‚

æç¤ºï¼šåœ¨åˆ†è¾¨ç‡è¾ƒé«˜çš„å±å¹•ï¼ˆä¾‹å¦‚ Retina æ˜¾ç¤ºå±ï¼‰ä¸Šï¼Œnotebook ä¸­çš„é»˜è®¤å›¾åƒå¯èƒ½ä¼šæ˜¾å¾—æ¨¡ç³Šã€‚å¯ä»¥åœ¨ %matplotlib inline ä¹‹åä½¿ç”¨ %config InlineBackend.figure_format = &#39;retina&#39; æ¥å‘ˆç°åˆ†è¾¨ç‡è¾ƒé«˜çš„å›¾åƒã€‚


åœ¨ notebook ä¸­è¿›è¡Œè°ƒè¯•å¯¹äº Python å†…æ ¸ï¼Œå¯ä»¥ä½¿ç”¨ Magic å‘½ä»¤ %pdbå¼€å¯äº¤äº’å¼è°ƒè¯•å™¨ã€‚å‡ºé”™æ—¶ï¼Œä½ èƒ½æ£€æŸ¥å½“å‰å‘½åç©ºé—´ä¸­çš„å˜é‡ã€‚
åœ¨ä¸Šå›¾ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘å°è¯•å¯¹å­—ç¬¦ä¸²æ±‚å’Œï¼Œè¿™é€ æˆäº†é”™è¯¯ã€‚è°ƒè¯•å™¨æŒ‡å‡ºäº†è¯¥é”™è¯¯ï¼Œå¹¶æç¤ºä½ æ£€æŸ¥ä»£ç ã€‚
è¦è¯¦ç»†äº†è§£ pdbï¼Œè¯·é˜…è¯»æ­¤æ–‡æ¡£ã€‚è¦é€€å‡ºè°ƒè¯•å™¨ï¼Œåœ¨æç¤ºç¬¦ä¸­è¾“å…¥ q å³å¯ã€‚
è¡¥å……è¯»ç‰©Magic å‘½ä»¤è¿˜æœ‰å¾ˆå¤šï¼Œæˆ‘åªæ˜¯ä»‹ç»äº†ä½ å°†ä¼šç”¨å¾—æœ€å¤šçš„ä¸€äº›å‘½ä»¤ã€‚è¦äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹æ­¤åˆ—è¡¨ï¼Œå®ƒåˆ—å‡ºäº†æ‰€æœ‰å¯ç”¨çš„ Magic å‘½ä»¤ã€‚
è½¬æ¢ notebookNotebook åªæ˜¯æ‰©å±•åä¸º .ipynb çš„å¤§å‹ JSON æ–‡ä»¶ã€‚
ç”±äº notebook æ˜¯ JSON æ–‡ä»¶ï¼Œå› æ­¤ï¼Œå¯ä»¥è½»æ¾å°†å…¶è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼ã€‚Jupyter é™„å¸¦äº†ä¸€ä¸ªåä¸º nbconvert çš„å®ç”¨ç¨‹åºï¼Œå¯å°† notebook è½¬æ¢ä¸º HTMLã€Markdownã€å¹»ç¯ç‰‡ç­‰æ ¼å¼ã€‚
ä¾‹å¦‚ï¼Œè¦å°† notebook è½¬æ¢ä¸º HTML æ–‡ä»¶ï¼Œè¯·åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨jupyter nbconvert --to html notebook.ipynb
è¦å°† notebook ä¸ä¸ä½¿ç”¨ notebook çš„å…¶ä»–äººå…±äº«ï¼Œè½¬æ¢ä¸º HTML å¾ˆæœ‰ç”¨ã€‚è€Œè¦åœ¨åšå®¢å’Œå…¶ä»–æ¥å— Markdown æ ¼å¼åŒ–çš„æ–‡æœ¬ç¼–è¾‘å™¨ä¸­åŠ å…¥ notebookï¼ŒMarkdown å¾ˆåˆé€‚ã€‚
åƒå¹³å¸¸ä¸€æ ·ï¼Œè¦è¯¦ç»†äº†è§£ nbconvertï¼Œè¯·é˜…è¯»ç›¸å…³æ–‡æ¡£ã€‚
åˆ›å»ºå¹»ç¯ç‰‡é€šè¿‡ notebook åˆ›å»ºå¹»ç¯ç‰‡æ˜¯æˆ‘æœ€çˆ±çš„åŠŸèƒ½ä¹‹ä¸€ã€‚æ­¤å¤„æœ‰ä¸€ä¸ªå¹»ç¯ç‰‡ç¤ºä¾‹ï¼Œå®ƒä»‹ç»äº†ç”¨äºå¤„ç†æ•°æ®çš„ Pandasã€‚
åœ¨ notebook ä¸­åˆ›å»ºå¹»ç¯ç‰‡çš„è¿‡ç¨‹åƒå¹³å¸¸ä¸€æ ·ï¼Œä½†éœ€è¦æŒ‡å®šä½œä¸ºå¹»ç¯ç‰‡çš„å•å…ƒæ ¼å’Œå•å…ƒæ ¼çš„å¹»ç¯ç‰‡ç±»å‹ã€‚åœ¨èœå•æ ä¸­ï¼Œç‚¹å‡»â€œViewâ€ï¼ˆè§†å›¾ï¼‰&gt;â€œCell Toolbarâ€ï¼ˆå•å…ƒæ ¼å·¥å…·æ ï¼‰&gt;â€œSlideshowâ€ï¼ˆå¹»ç¯ç‰‡ï¼‰ï¼Œä»¥ä¾¿åœ¨æ¯ä¸ªå•å…ƒæ ¼ä¸Šå¼¹å‡ºå¹»ç¯ç‰‡å•å…ƒæ ¼èœå•ã€‚
è¿™ä¼šåœ¨æ¯ä¸ªå•å…ƒæ ¼ä¸Šæ˜¾ç¤ºä¸€ä¸ªä¸‹æ‹‰èœå•ï¼Œè®©ä½ é€‰æ‹©å•å…ƒæ ¼åœ¨å¹»ç¯ç‰‡ä¸­çš„æ˜¾ç¤ºæ–¹å¼ã€‚

Slidesï¼ˆå¹»ç¯ç‰‡ï¼‰æ˜¯ä½ ä»å·¦å‘å³ç§»åŠ¨çš„å®Œæ•´å¹»ç¯ç‰‡ã€‚æŒ‰å‘ä¸Šæˆ–å‘ä¸‹çš„ç®­å¤´æ—¶ï¼ŒSub-slidesï¼ˆå­å¹»ç¯ç‰‡ï¼‰ä¼šå‡ºç°åœ¨å¹»ç¯ç‰‡ä¸­ã€‚Fragmentsï¼ˆç‰‡æ®µï¼‰æœ€åˆæ˜¯éšè—çš„ï¼Œåœ¨ä½ æŒ‰ä¸‹æŒ‰é’®æ—¶ä¼šå‡ºç°ã€‚é€‰æ‹© Skipï¼ˆå¿½ç•¥ï¼‰ä¼šå¿½ç•¥å¹»ç¯ç‰‡ä¸­çš„å•å…ƒæ ¼ï¼Œè€Œé€‰æ‹© Notesï¼ˆå¤‡æ³¨ï¼‰ä¼šå°†å•å…ƒæ ¼ä¿ç•™ä¸ºæ¼”è®²è€…å¤‡æ³¨ã€‚
è¿è¡Œå¹»ç¯ç‰‡è¦é€šè¿‡ notebook æ–‡ä»¶åˆ›å»ºå¹»ç¯ç‰‡ï¼Œéœ€è¦ä½¿ç”¨ nbconvertï¼šjupyter nbconvert notebook.ipynb --to slides
è¿™åªæ˜¯å°† notebook è½¬æ¢ä¸ºå¹»ç¯ç‰‡å¿…éœ€çš„æ–‡ä»¶ï¼Œä½ éœ€è¦å‘å…¶æä¾› HTTP æœåŠ¡å™¨æ‰èƒ½çœŸæ­£çœ‹åˆ°æ¼”ç¤ºæ–‡ç¨¿ã€‚
è¦è½¬æ¢å®ƒå¹¶ç«‹å³çœ‹åˆ°å®ƒï¼Œè¯·ä½¿ç”¨jupyter nbconvert notebook.ipynb --to slides --post serveè¿™ä¼šåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€å¹»ç¯ç‰‡ï¼Œè®©ä½ å¯ä»¥æ¼”ç¤ºå®ƒã€‚
æ­å–œä½ ï¼è¿™ä¸ªç®€çŸ­çš„è¯¾ç¨‹åˆ°æ­¤ç»“æŸï¼Œå®ƒä¸»è¦ä»‹ç»äº† Python æ•°æ®ç§‘å­¦å·¥ä½œæµç¨‹ä¸­çš„å·¥å…·ã€‚å……åˆ†åˆ©ç”¨ Anaconda å’Œ Jupyter notebook ä¸ä»…èƒ½æå‡ä½ çš„å·¥ä½œæ•ˆç‡ï¼Œè¿˜ä¼šè®©ä½ å¿ƒæƒ…æ›´æ„‰å¿«ã€‚è¦æƒ³å……åˆ†å‘æŒ¥å®ƒä»¬çš„ä½œç”¨ï¼Œä½ è¿˜è¦å­¦ä¹ å¾ˆå¤šä¸œè¥¿ï¼ˆä¾‹å¦‚ Markdown å’Œ LaTeXï¼‰ï¼Œä½†å¾ˆå¿«ä½ å°±ä¼šæƒ³çŸ¥é“ä¸ºä½•è¦ä»¥å…¶ä»–æ–¹å¼è¿›è¡Œæ•°æ®åˆ†æã€‚
å†æ¬¡æ­å–œä½ ï¼ç¥ä½ å¥½è¿ï¼
ä¹¦ç­¾Jupyter Notebookçš„27ä¸ªç§˜è¯€ï¼ŒæŠ€å·§å’Œå¿«æ·é”®
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>è½¬è½½</tag>
        <tag>jupyter</tag>
        <tag>anaconda</tag>
      </tags>
  </entry>
  <entry>
    <title>Anaconda</title>
    <url>/dev-anaconda/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡è½¬è½½è‡ªä¼˜è¾¾å­¦åŸã€Šæœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆã€‹
æ¬¢è¿æ¥åˆ°æœ¬è¯¾ç¨‹ï¼æˆ‘å« Mat Leonardï¼Œæ˜¯æ•°æ®åˆ†æå¸ˆçº³ç±³å­¦ä½çš„é¡¹ç›®ä¸»ç®¡ï¼Œä¹Ÿæ˜¯è¿™ä¸ªç®€çŸ­è¯¾ç¨‹çš„è®²å¸ˆã€‚æˆ‘ä¼šåœ¨è¯¾ç¨‹ä¸­ä»‹ç»ä¸¤ä¸ªå¯¹äºæ•°æ®åˆ†æå¸ˆæœ€ä¸ºé‡è¦çš„å·¥å…·ï¼Œå³ Anaconda å’Œ Jupyter notebookã€‚
Anaconda æ˜¯ä¸€ä¸ªåŒ…å«æ•°æ®ç§‘å­¦å¸¸ç”¨åŒ…çš„å‘è¡Œç‰ˆæœ¬ã€‚å®ƒæ˜¯åŸºäº conda â€”â€”ä¸€ä¸ªåŒ…å’Œç¯å¢ƒç®¡ç†å™¨â€”â€”è¡ç”Ÿè€Œæ¥ã€‚ä½ å°†ä½¿ç”¨ conda åˆ›å»ºç¯å¢ƒï¼Œä»¥ä¾¿åˆ†éš”ä½¿ç”¨ä¸åŒ Python ç‰ˆæœ¬å’Œ/æˆ–ä¸åŒåŒ…çš„é¡¹ç›®ã€‚ä½ è¿˜å°†ä½¿ç”¨å®ƒåœ¨ç¯å¢ƒä¸­å®‰è£…ã€å¸è½½å’Œæ›´æ–°åŒ…ã€‚é€šè¿‡ä½¿ç”¨ Anacondaï¼Œä½¿æˆ‘å¤„ç†æ•°æ®çš„è¿‡ç¨‹æ›´åŠ æ„‰å¿«ã€‚
Jupyter notebook æ˜¯ Web æ–‡æ¡£ï¼Œèƒ½è®©ä½ å°†æ–‡æœ¬ã€å›¾åƒå’Œä»£ç å…¨éƒ¨ç»„åˆåˆ°ä¸€ä¸ªæ–‡æ¡£ä¸­ã€‚å®ƒå·²ç»æˆä¸ºæ•°æ®åˆ†æçš„æ ‡å‡†ç¯å¢ƒã€‚notebook æºè‡ª 2011 å¹´çš„ IPython é¡¹ç›®ï¼Œä¹‹åè¿…é€Ÿæµè¡Œèµ·æ¥ã€‚åœ¨æœ¬è¯¾ç¨‹çš„ç¬¬äºŒèŠ‚è¯¾ä¸­ï¼Œä½ å°†è·å¾—ä½¿ç”¨ notebook è¿›è¡Œåˆ†æå·¥ä½œçš„ç»éªŒã€‚
è®©æˆ‘ä»¬ç»§ç»­è¯¾ç¨‹ï¼é¦–å…ˆå­¦ä¹  Anacondaã€‚


Anacondaæ¬¢è¿å­¦ä¹ æœ¬è¯¾ï¼Œå³å¦‚ä½•ä½¿ç”¨ Anaconda æ¥ç®¡ç† Python æ‰€ç”¨çš„åŒ…å’Œç¯å¢ƒã€‚Anaconda èƒ½è®©ä½ è½»æ¾å®‰è£…åœ¨æ•°æ®ç§‘å­¦å·¥ä½œä¸­ç»å¸¸ä½¿ç”¨çš„åŒ…ã€‚ä½ è¿˜å°†ä½¿ç”¨å®ƒåˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œä»¥ä¾¿æ›´è½»æ¾åœ°å¤„ç†å¤šä¸ªé¡¹ç›®ã€‚Anaconda ç®€åŒ–äº†æˆ‘çš„å·¥ä½œæµç¨‹ï¼Œå¹¶ä¸”è§£å†³äº†æˆ‘åœ¨å¤„ç†åŒ…å’Œå¤šä¸ª Python ç‰ˆæœ¬æ—¶é‡åˆ°çš„å¤§é‡é—®é¢˜ã€‚
Anaconda å®é™…ä¸Šæ˜¯ä¸€ä¸ªè½¯ä»¶å‘è¡Œç‰ˆï¼Œå®ƒé™„å¸¦äº† condaã€Python å’Œ 150 å¤šä¸ªç§‘å­¦åŒ…åŠå…¶ä¾èµ–é¡¹ã€‚åº”ç”¨ç¨‹åº conda æ˜¯åŒ…å’Œç¯å¢ƒç®¡ç†å™¨ã€‚Anaconda çš„ä¸‹è½½æ–‡ä»¶æ¯”è¾ƒå¤§ï¼ˆçº¦ 500 MBï¼‰ï¼Œå› ä¸ºå®ƒé™„å¸¦äº† Python ä¸­æœ€å¸¸ç”¨çš„æ•°æ®ç§‘å­¦åŒ…ã€‚å¦‚æœåªéœ€è¦æŸäº›åŒ…ï¼Œæˆ–è€…éœ€è¦èŠ‚çœå¸¦å®½æˆ–å­˜å‚¨ç©ºé—´ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Miniconda è¿™ä¸ªè¾ƒå°çš„å‘è¡Œç‰ˆï¼ˆä»…åŒ…å« conda å’Œ Pythonï¼‰ã€‚ä½ ä»å¯ä»¥ä½¿ç”¨ conda æ¥å®‰è£…ä»»ä½•å¯ç”¨çš„åŒ…ï¼Œå®ƒåªæ˜¯æ²¡æœ‰é™„å¸¦è¿™äº›åŒ…è€Œå·²ã€‚
conda æ˜¯ä¸€ç§åªèƒ½é€šè¿‡å‘½ä»¤è¡Œæ¥ä½¿ç”¨çš„ç¨‹åºï¼Œå› æ­¤ï¼Œå¦‚æœä½ è§‰å¾—å®ƒå¾ˆéš¾ç”¨ï¼Œè¯·æŸ¥çœ‹è¿™ä¸ªé¢å‘ Windows çš„å‘½ä»¤æç¤ºç¬¦æ•™ç¨‹ï¼Œæˆ–è€…å­¦ä¹ æˆ‘ä»¬é¢å‘ OSX/Linux çš„ Linux å‘½ä»¤è¡ŒåŸºç¡€çŸ¥è¯†è¯¾ç¨‹ã€‚
ä½ å¯èƒ½å·²ç»å®‰è£…äº† Pythonï¼Œå¹¶ä¸”æƒ³çŸ¥é“ä¸ºä½•è¿˜éœ€è¦ Anacondaã€‚é¦–å…ˆï¼Œç”±äº Anaconda é™„å¸¦äº†ä¸€å¤§æ‰¹æ•°æ®ç§‘å­¦åŒ…ï¼Œå› æ­¤ä½ å¯ä»¥ç«‹å³å¼€å§‹å¤„ç†æ•°æ®ã€‚å…¶æ¬¡ï¼Œä½¿ç”¨ conda æ¥ç®¡ç†åŒ…å’Œç¯å¢ƒèƒ½å‡å°‘å°†æ¥åœ¨å¤„ç†ä½ è¦ä½¿ç”¨çš„å„ç§åº“æ—¶é‡åˆ°çš„é—®é¢˜ã€‚
ç®¡ç†åŒ…
åŒ…ç®¡ç†å™¨ç”¨äºåœ¨è®¡ç®—æœºä¸Šå®‰è£…åº“å’Œå…¶ä»–è½¯ä»¶ã€‚ä½ å¯èƒ½å·²ç»ç†Ÿæ‚‰ pipï¼Œå®ƒæ˜¯ Python åº“çš„é»˜è®¤åŒ…ç®¡ç†å™¨ã€‚conda ä¸ pip ç›¸ä¼¼ï¼Œä¸åŒä¹‹å¤„æ˜¯å¯ç”¨çš„åŒ…ä»¥æ•°æ®ç§‘å­¦åŒ…ä¸ºä¸»ï¼Œè€Œ pip é€‚åˆä¸€èˆ¬ç”¨é€”ã€‚ä½†æ˜¯ï¼Œconda å¹¶é åƒ pip é‚£æ ·ä¸“é—¨é€‚ç”¨äº Pythonï¼Œå®ƒä¹Ÿå¯ä»¥å®‰è£…é Python çš„åŒ…ã€‚å®ƒæ˜¯é€‚ç”¨äº ä»»ä½• è½¯ä»¶å †æ ˆçš„åŒ…ç®¡ç†å™¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¹¶éæ‰€æœ‰çš„ Python åº“éƒ½èƒ½é€šè¿‡ Anaconda å‘è¡Œç‰ˆå’Œ conda è·å¾—ã€‚åœ¨ä½¿ç”¨ conda çš„åŒæ—¶ï¼Œä½ ä»å¯ä»¥å¹¶ä¸”ä»å°†ä½¿ç”¨ pip æ¥å®‰è£…åŒ…ã€‚
Conda å®‰è£…äº†é¢„ç¼–è¯‘çš„åŒ…ã€‚ä¾‹å¦‚ï¼ŒAnaconda å‘è¡Œç‰ˆé™„å¸¦äº†ä½¿ç”¨ MKL åº“ç¼–è¯‘çš„ Numpyã€Scipy å’Œ Scikit-learnï¼Œä»è€ŒåŠ å¿«äº†å„ç§æ•°å­¦è¿ç®—çš„é€Ÿåº¦ã€‚è¿™äº›åŒ…ç”±å‘è¡Œç‰ˆçš„è´¡çŒ®è€…ç»´æŠ¤ï¼Œè¿™æ„å‘³ç€å®ƒä»¬é€šå¸¸æ»åäºæ–°ç‰ˆæœ¬ã€‚ä½†æ˜¯ï¼Œç”±äºæœ‰äººéœ€è¦ä¸ºè®¸å¤šç³»ç»Ÿæ„å»ºè¿™äº›åŒ…ï¼Œå› æ­¤ï¼Œå®ƒä»¬å¾€å¾€æ›´ä¸ºç¨³å®šï¼Œè€Œä¸”æ›´ä¾¿äºä½ ä½¿ç”¨ã€‚
ç¯å¢ƒé™¤äº†ç®¡ç†åŒ…ä¹‹å¤–ï¼Œconda è¿˜æ˜¯è™šæ‹Ÿç¯å¢ƒç®¡ç†å™¨ã€‚å®ƒç±»ä¼¼äºå¦å¤–ä¸¤ä¸ªå¾ˆæµè¡Œçš„ç¯å¢ƒç®¡ç†å™¨ï¼Œå³ virtualenv å’Œ pyenvã€‚
ç¯å¢ƒèƒ½è®©ä½ åˆ†éš”ä½ è¦ç”¨äºä¸åŒé¡¹ç›®çš„åŒ…ã€‚ä½ å¸¸å¸¸è¦ä½¿ç”¨ä¾èµ–äºæŸä¸ªåº“çš„ä¸åŒç‰ˆæœ¬çš„ä»£ç ã€‚ä¾‹å¦‚ï¼Œä½ çš„ä»£ç å¯èƒ½ä½¿ç”¨äº† Numpy ä¸­çš„æ–°åŠŸèƒ½ï¼Œæˆ–è€…ä½¿ç”¨äº†å·²åˆ é™¤çš„æ—§åŠŸèƒ½ã€‚å®é™…ä¸Šï¼Œä¸å¯èƒ½åŒæ—¶å®‰è£…ä¸¤ä¸ª Numpy ç‰ˆæœ¬ã€‚ä½ è¦åšçš„åº”è¯¥æ˜¯ï¼Œä¸ºæ¯ä¸ª Numpy ç‰ˆæœ¬åˆ›å»ºä¸€ä¸ªç¯å¢ƒï¼Œç„¶ååœ¨é€‚ç”¨äºé¡¹ç›®çš„ç¯å¢ƒä¸­å·¥ä½œã€‚
åœ¨åº”å¯¹ Python 2 å’Œ Python 3 æ—¶ï¼Œæ­¤é—®é¢˜ä¹Ÿä¼šå¸¸å¸¸å‘ç”Ÿã€‚ä½ å¯èƒ½ä¼šä½¿ç”¨åœ¨ Python 3 ä¸­ä¸èƒ½è¿è¡Œçš„æ—§ä»£ç ï¼Œä»¥åŠåœ¨ Python 2 ä¸­ä¸èƒ½è¿è¡Œçš„æ–°ä»£ç ã€‚åŒæ—¶å®‰è£…ä¸¤ä¸ªç‰ˆæœ¬å¯èƒ½ä¼šé€ æˆè®¸å¤šæ··ä¹±å’Œé”™è¯¯ã€‚è€Œåˆ›å»ºç‹¬ç«‹çš„ç¯å¢ƒä¼šå¥½å¾ˆå¤šã€‚
ä¹Ÿå¯ä»¥å°†ç¯å¢ƒä¸­çš„åŒ…çš„åˆ—è¡¨å¯¼å‡ºä¸ºæ–‡ä»¶ï¼Œç„¶åå°†è¯¥æ–‡ä»¶ä¸ä»£ç åŒ…æ‹¬åœ¨ä¸€èµ·ã€‚è¿™èƒ½è®©å…¶ä»–äººè½»æ¾åŠ è½½ä»£ç çš„æ‰€æœ‰ä¾èµ–é¡¹ã€‚pip æä¾›äº†ç±»ä¼¼çš„åŠŸèƒ½ï¼Œå³ pip freeze &gt; requirements.txtã€‚
æ¥ä¸‹æ¥ä»‹ç»çš„å†…å®¹æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šè¯¦ç»†ä»‹ç» Anaconda çš„ç”¨æ³•ã€‚é¦–å…ˆï¼Œæˆ‘ä¼šä»‹ç»å®ƒçš„å®‰è£…è¿‡ç¨‹ï¼Œç„¶åä»‹ç»å¦‚ä½•ä½¿ç”¨åŒ…ç®¡ç†å™¨ï¼Œæœ€åä»‹ç»å¦‚ä½•åˆ›å»ºå’Œç®¡ç†ç¯å¢ƒã€‚
å®‰è£… AnacondaAnaconda å¯ç”¨äº Windowsã€Mac OS X å’Œ Linuxã€‚å¯ä»¥åœ¨ https://www.continuum.io/downloads ä¸Šæ‰¾åˆ°å®‰è£…ç¨‹åºå’Œå®‰è£…è¯´æ˜ã€‚
å¦‚æœè®¡ç®—æœºä¸Šå·²ç»å®‰è£…äº† Pythonï¼Œè¿™ä¸ä¼šæœ‰ä»»ä½•å½±å“ã€‚å®é™…ä¸Šï¼Œè„šæœ¬å’Œç¨‹åºä½¿ç”¨çš„é»˜è®¤ Python æ˜¯ Anaconda é™„å¸¦çš„ Pythonã€‚
é€‰æ‹© Python 2.7 ç‰ˆæœ¬ï¼ˆä½ å¯ä»¥åœ¨ä»¥åå®‰è£… Python 3 ç‰ˆæœ¬ï¼‰ã€‚æ­¤å¤–ï¼Œå¦‚æœæ˜¯ 64 ä½æ“ä½œç³»ç»Ÿï¼Œåˆ™é€‰æ‹© 64 ä½å®‰è£…ç¨‹åºï¼Œå¦åˆ™é€‰æ‹© 32 ä½å®‰è£…ç¨‹åºã€‚ç»§ç»­å¹¶é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ï¼Œç„¶åå®‰è£…å®ƒã€‚ä¹‹åï¼Œç»§ç»­è¿›è¡Œï¼
å®Œæˆå®‰è£…åï¼Œä¼šè‡ªåŠ¨è¿›å…¥é»˜è®¤çš„ conda ç¯å¢ƒï¼Œè€Œä¸”æ‰€æœ‰åŒ…å‡å·²å®‰è£…å®Œæ¯•ï¼Œå¦‚ä¸‹é¢æ‰€ç¤ºã€‚å¯ä»¥åœ¨ç»ˆç«¯æˆ–å‘½ä»¤æç¤ºç¬¦ä¸­é”®å…¥ conda listï¼Œä»¥æŸ¥çœ‹ä½ å®‰è£…çš„å†…å®¹ã€‚

åœ¨ Windows ä¸Šï¼Œä¼šéš Anaconda ä¸€èµ·å®‰è£…ä¸€æ‰¹åº”ç”¨ç¨‹åºï¼š

Anaconda Navigatorï¼Œå®ƒæ˜¯ç”¨äºç®¡ç†ç¯å¢ƒå’ŒåŒ…çš„ GUI
Anaconda Prompt ç»ˆç«¯ï¼Œå®ƒå¯è®©ä½ ä½¿ç”¨å‘½ä»¤è¡Œç•Œé¢æ¥ç®¡ç†ç¯å¢ƒå’ŒåŒ…
Spyderï¼Œå®ƒæ˜¯é¢å‘ç§‘å­¦å¼€å‘çš„ IDE

ä¸ºäº†é¿å…æŠ¥é”™ï¼Œæˆ‘æ¨èåœ¨é»˜è®¤ç¯å¢ƒä¸‹æ›´æ–°æ‰€æœ‰çš„åŒ…ã€‚æ‰“å¼€ Anaconda Prompt ï¼ˆæˆ–è€… Mac ä¸‹çš„ç»ˆç«¯ï¼‰ï¼Œé”®å…¥ï¼šconda upgrade --all
å¹¶åœ¨æç¤ºæ˜¯å¦æ›´æ–°çš„æ—¶å€™è¾“å…¥yï¼ˆYesï¼‰ä»¥ä¾¿è®©æ›´æ–°ç»§ç»­ã€‚åˆæ¬¡å®‰è£…ä¸‹çš„è½¯ä»¶åŒ…ç‰ˆæœ¬ä¸€èˆ¬éƒ½æ¯”è¾ƒè€æ—§ï¼Œå› æ­¤æå‰æ›´æ–°å¯ä»¥é¿å…æœªæ¥ä¸å¿…è¦çš„é—®é¢˜ã€‚
åœ¨æœ¬è¯¾çš„ä½™ä¸‹éƒ¨åˆ†ï¼Œæˆ‘ä¼šè¦æ±‚ä½ åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨å‘½ä»¤ã€‚æˆ‘å¼ºçƒˆå»ºè®®ä½ ä»¥è¿™ç§æ–¹å¼å¼€å§‹ä½¿ç”¨ Anacondaï¼Œä¹‹åå†æ ¹æ®éœ€è¦ä½¿ç”¨ GUIã€‚
ç®¡ç†åŒ…å®‰è£…äº† Anaconda ä¹‹åï¼Œç®¡ç†åŒ…æ˜¯ç›¸å½“ç®€å•çš„ã€‚è¦å®‰è£…åŒ…ï¼Œè¯·åœ¨ç»ˆç«¯ä¸­é”®å…¥ conda install package_nameã€‚ä¾‹å¦‚ï¼Œè¦å®‰è£… numpyï¼Œè¯·é”®å…¥ conda install numpyã€‚ä½ è¿˜å¯ä»¥åŒæ—¶å®‰è£…å¤šä¸ªåŒ…ã€‚ç±»ä¼¼ conda install numpy scipy pandas çš„å‘½ä»¤ä¼šåŒæ—¶å®‰è£…æ‰€æœ‰è¿™äº›åŒ…ã€‚è¿˜å¯ä»¥é€šè¿‡æ·»åŠ ç‰ˆæœ¬å·ï¼ˆä¾‹å¦‚ conda install numpy=1.10ï¼‰æ¥æŒ‡å®šæ‰€éœ€çš„åŒ…ç‰ˆæœ¬ã€‚
Conda è¿˜ä¼šè‡ªåŠ¨ä¸ºä½ å®‰è£…ä¾èµ–é¡¹ã€‚ä¾‹å¦‚ï¼Œscipy ä¾èµ–äº numpyï¼Œå› ä¸ºå®ƒä½¿ç”¨å¹¶éœ€è¦ numpyã€‚å¦‚æœä½ åªå®‰è£… scipy (conda install scipy)ï¼Œåˆ™ conda è¿˜ä¼šå®‰è£… numpyï¼ˆå¦‚æœå°šæœªå®‰è£…çš„è¯ï¼‰ã€‚
å¤§å¤šæ•°å‘½ä»¤éƒ½æ˜¯å¾ˆç›´è§‚çš„ã€‚è¦å¸è½½åŒ…ï¼Œè¯·ä½¿ç”¨ conda remove package_nameã€‚è¦æ›´æ–°åŒ…ï¼Œè¯·ä½¿ç”¨ conda update package_nameã€‚å¦‚æœæƒ³æ›´æ–°ç¯å¢ƒä¸­çš„æ‰€æœ‰åŒ…ï¼ˆè¿™æ ·åšå¸¸å¸¸å¾ˆæœ‰ç”¨ï¼‰ï¼Œè¯·ä½¿ç”¨ conda update --allã€‚æœ€åï¼Œè¦åˆ—å‡ºå·²å®‰è£…çš„åŒ…ï¼Œè¯·ä½¿ç”¨å‰é¢æè¿‡çš„ conda listã€‚
å¦‚æœä¸çŸ¥é“è¦æ‰¾çš„åŒ…çš„ç¡®åˆ‡åç§°ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨ conda search search_term è¿›è¡Œæœç´¢ã€‚ä¾‹å¦‚ï¼Œæˆ‘çŸ¥é“æˆ‘æƒ³å®‰è£… Beautiful Soupï¼Œä½†æˆ‘ä¸æ¸…æ¥šç¡®åˆ‡çš„åŒ…åç§°ã€‚å› æ­¤ï¼Œæˆ‘å°è¯•æ‰§è¡Œ conda search beautifulsoupã€‚å®ƒè¿”å›å¯ç”¨çš„ Beautiful Soup åŒ…çš„åˆ—è¡¨ï¼Œå¹¶åˆ—å‡ºäº†ç›¸åº”çš„åŒ…åç§° beautifulsoup4ã€‚
ç®¡ç†ç¯å¢ƒå¦‚å‰æ‰€è¿°ï¼Œå¯ä»¥ä½¿ç”¨ conda åˆ›å»ºç¯å¢ƒä»¥éš”ç¦»é¡¹ç›®ã€‚è¦åˆ›å»ºç¯å¢ƒï¼Œè¯·åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ conda create -n env_name list of packagesã€‚åœ¨è¿™é‡Œï¼Œ-n env_name è®¾ç½®ç¯å¢ƒçš„åç§°ï¼ˆ-n æ˜¯æŒ‡åç§°ï¼‰ï¼Œè€Œ list of packages æ˜¯è¦å®‰è£…åœ¨ç¯å¢ƒä¸­çš„åŒ…çš„åˆ—è¡¨ã€‚ä¾‹å¦‚ï¼Œè¦åˆ›å»ºåä¸º my_env çš„ç¯å¢ƒå¹¶åœ¨å…¶ä¸­å®‰è£… numpyï¼Œè¯·é”®å…¥ conda create -n my_env numpyã€‚åˆ›å»ºç¯å¢ƒæ—¶ï¼Œå¯ä»¥æŒ‡å®šè¦å®‰è£…åœ¨ç¯å¢ƒä¸­çš„ Python ç‰ˆæœ¬ã€‚è¿™åœ¨ä½ åŒæ—¶ä½¿ç”¨ Python 2.x å’Œ Python 3.x ä¸­çš„ä»£ç æ—¶å¾ˆæœ‰ç”¨ã€‚è¦åˆ›å»ºå…·æœ‰ç‰¹å®š Python ç‰ˆæœ¬çš„ç¯å¢ƒï¼Œè¯·é”®å…¥ç±»ä¼¼äº conda create -n py3 python=3 æˆ– conda create -n py2 python=2 çš„å‘½ä»¤ã€‚å®é™…ä¸Šï¼Œæˆ‘åœ¨æˆ‘çš„ä¸ªäººè®¡ç®—æœºä¸Šåˆ›å»ºäº†è¿™ä¸¤ä¸ªç¯å¢ƒã€‚æˆ‘å°†å®ƒä»¬ç”¨ä½œä¸ä»»ä½•ç‰¹å®šé¡¹ç›®å‡æ— å…³çš„é€šç”¨ç¯å¢ƒï¼Œä»¥å¤„ç†æ™®é€šçš„å·¥ä½œï¼ˆå¯è½»æ¾ä½¿ç”¨æ¯ä¸ª Python ç‰ˆæœ¬ï¼‰ã€‚è¿™äº›å‘½ä»¤å°†åˆ†åˆ«å®‰è£… Python 3 å’Œ 2 çš„æœ€æ–°ç‰ˆæœ¬ã€‚è¦å®‰è£…ç‰¹å®šç‰ˆæœ¬ï¼ˆä¾‹å¦‚ Python 3.3ï¼‰ï¼Œè¯·ä½¿ç”¨ conda create -n py python=3.3ã€‚
è¿›å…¥ç¯å¢ƒåˆ›å»ºäº†ç¯å¢ƒåï¼Œåœ¨ OSX/Linux ä¸Šä½¿ç”¨ source activate my_env è¿›å…¥ç¯å¢ƒã€‚åœ¨ Windows ä¸Šï¼Œè¯·ä½¿ç”¨ activate my_envã€‚
è¿›å…¥ç¯å¢ƒåï¼Œä½ ä¼šåœ¨ç»ˆç«¯æç¤ºç¬¦ä¸­çœ‹åˆ°ç¯å¢ƒåç§°ï¼Œå®ƒç±»ä¼¼äº (my_env) ~ $ã€‚ç¯å¢ƒä¸­åªå®‰è£…äº†å‡ ä¸ªé»˜è®¤çš„åŒ…ï¼Œä»¥åŠä½ åœ¨åˆ›å»ºå®ƒæ—¶å®‰è£…çš„åŒ…ã€‚å¯ä»¥ä½¿ç”¨ conda list æ£€æŸ¥è¿™ä¸€ç‚¹ã€‚åœ¨ç¯å¢ƒä¸­å®‰è£…åŒ…çš„å‘½ä»¤ä¸å‰é¢ä¸€æ ·ï¼šconda install package_nameã€‚ä¸è¿‡ï¼Œè¿™æ¬¡ä½ å®‰è£…çš„ç‰¹å®šåŒ…ä»…åœ¨ä½ è¿›å…¥ç¯å¢ƒåæ‰å¯ç”¨ã€‚è¦ç¦»å¼€ç¯å¢ƒï¼Œè¯·é”®å…¥ source deactivateï¼ˆåœ¨ OSX/Linux ä¸Šï¼‰ã€‚åœ¨ Windows ä¸Šï¼Œè¯·ä½¿ç”¨ deactivateã€‚
ä¿å­˜å’ŒåŠ è½½ç¯å¢ƒå…±äº«ç¯å¢ƒè¿™é¡¹åŠŸèƒ½ç¡®å®å¾ˆæœ‰ç”¨ï¼Œå®ƒèƒ½è®©å…¶ä»–äººå®‰è£…ä½ çš„ä»£ç ä¸­ä½¿ç”¨çš„æ‰€æœ‰åŒ…ï¼Œå¹¶ç¡®ä¿è¿™äº›åŒ…çš„ç‰ˆæœ¬æ­£ç¡®ã€‚å¯ä»¥ä½¿ç”¨ conda env export &gt; environment.yaml å°†åŒ…ä¿å­˜ä¸º YAMLã€‚ç¬¬ä¸€éƒ¨åˆ† conda env export å†™å‡ºç¯å¢ƒä¸­çš„æ‰€æœ‰åŒ…ï¼ˆåŒ…æ‹¬ Python ç‰ˆæœ¬ï¼‰ã€‚ä¸Šå›¾å¯ä»¥çœ‹åˆ°åˆ—å‡ºäº†ç¯å¢ƒçš„åç§°å’Œæ‰€æœ‰ä¾èµ–é¡¹åŠå…¶ç‰ˆæœ¬ã€‚å¯¼å‡ºå‘½ä»¤çš„ç¬¬äºŒéƒ¨åˆ† &gt; environment.yaml å°†å¯¼å‡ºçš„æ–‡æœ¬å†™å…¥åˆ° YAML æ–‡ä»¶ environment.yaml ä¸­ã€‚ç°åœ¨å¯ä»¥å…±äº«æ­¤æ–‡ä»¶ï¼Œè€Œä¸”å…¶ä»–äººèƒ½å¤Ÿåˆ›å»ºå’Œä½ ç”¨äºé¡¹ç›®ç›¸åŒçš„ç¯å¢ƒã€‚
è¦é€šè¿‡ç¯å¢ƒæ–‡ä»¶åˆ›å»ºç¯å¢ƒï¼Œè¯·ä½¿ç”¨ conda env create -f environment.yamlã€‚è¿™ä¼šåˆ›å»ºä¸€ä¸ªæ–°ç¯å¢ƒï¼Œè€Œä¸”å®ƒå…·æœ‰åœ¨ environment.yaml ä¸­åˆ—å‡ºçš„åŒä¸€åº“ã€‚
åˆ—å‡ºç¯å¢ƒå¦‚æœå¿˜è®°äº†ç¯å¢ƒçš„åç§°ï¼ˆæˆ‘æœ‰æ—¶ä¼šè¿™æ ·ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ conda env list åˆ—å‡ºä½ åˆ›å»ºçš„æ‰€æœ‰ç¯å¢ƒã€‚ä½ ä¼šçœ‹åˆ°ç¯å¢ƒçš„åˆ—è¡¨ï¼Œè€Œä¸”ä½ å½“å‰æ‰€åœ¨ç¯å¢ƒçš„æ—è¾¹ä¼šæœ‰ä¸€ä¸ªæ˜Ÿå·ã€‚é»˜è®¤çš„ç¯å¢ƒï¼ˆå³å½“ä½ ä¸åœ¨ç¯å¢ƒä¸­æ—¶ä½¿ç”¨çš„ç¯å¢ƒï¼‰åä¸º rootã€‚
åˆ é™¤ç¯å¢ƒå¦‚æœä½ ä¸å†ä½¿ç”¨æŸäº›ç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨ conda env remove -n env_name åˆ é™¤æŒ‡å®šçš„ç¯å¢ƒï¼ˆåœ¨è¿™é‡Œåä¸º env_nameï¼‰ã€‚
æœ€ä½³åšæ³•ä½¿ç”¨ç¯å¢ƒå¯¹æˆ‘å¸®åŠ©å¾ˆå¤§çš„ä¸€ç‚¹æ˜¯ï¼Œæˆ‘çš„ Python 2 å’Œ Python 3 å…·æœ‰ç‹¬ç«‹çš„ç¯å¢ƒã€‚æˆ‘ä½¿ç”¨äº† conda create -n py2 python=2 å’Œ conda create -n py3 python=3 åˆ›å»ºä¸¤ä¸ªç‹¬ç«‹çš„ç¯å¢ƒï¼Œå³ py2 å’Œ py3ã€‚ç°åœ¨ï¼Œæˆ‘çš„æ¯ä¸ª Python ç‰ˆæœ¬éƒ½æœ‰ä¸€ä¸ªé€šç”¨ç¯å¢ƒã€‚åœ¨æ‰€æœ‰è¿™äº›ç¯å¢ƒä¸­ï¼Œæˆ‘éƒ½å®‰è£…äº†å¤§å¤šæ•°æ ‡å‡†çš„æ•°æ®ç§‘å­¦åŒ…ï¼ˆnumpyã€scipyã€pandas ç­‰ï¼‰ã€‚
æˆ‘è¿˜å‘ç°ï¼Œä¸ºæˆ‘ä»äº‹çš„æ¯ä¸ªé¡¹ç›®åˆ›å»ºç¯å¢ƒå¾ˆæœ‰ç”¨ã€‚è¿™å¯¹äºä¸æ•°æ®ä¸ç›¸å…³çš„é¡¹ç›®ï¼ˆä¾‹å¦‚ä½¿ç”¨ Flask å¼€å‘çš„ Web åº”ç”¨ï¼‰ä¹Ÿå¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä¸ºæˆ‘çš„ä¸ªäººåšå®¢ï¼ˆä½¿ç”¨ Pelicanï¼‰åˆ›å»ºäº†ä¸€ä¸ªç¯å¢ƒã€‚
å…±äº«ç¯å¢ƒåœ¨ GitHub ä¸Šå…±äº«ä»£ç æ—¶ï¼Œæœ€å¥½åŒæ ·åˆ›å»ºç¯å¢ƒæ–‡ä»¶å¹¶å°†å…¶åŒ…æ‹¬åœ¨ä»£ç åº“ä¸­ã€‚è¿™èƒ½è®©å…¶ä»–äººæ›´è½»æ¾åœ°å®‰è£…ä½ çš„ä»£ç çš„æ‰€æœ‰ä¾èµ–é¡¹ã€‚å¯¹äºä¸ä½¿ç”¨ conda çš„äººï¼Œæˆ‘é€šå¸¸è¿˜ä¼šä½¿ç”¨ pip freezeï¼ˆåœ¨æ­¤å¤„äº†è§£è¯¦æƒ…ï¼‰å°†ä¸€ä¸ª pip requirements.txt æ–‡ä»¶åŒ…æ‹¬åœ¨å†…ã€‚
äº†è§£æ›´å¤šä¿¡æ¯è¦è¯¦ç»†äº†è§£ conda å’Œå®ƒå¦‚ä½•èå…¥åˆ° Python ç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œè¯·æŸ¥çœ‹è¿™ç¯‡ç”± Jake Vanderplas æ’°å†™çš„æ–‡ç« ï¼šConda myths and misconceptionsï¼ˆæœ‰å…³ conda çš„è¿·æ€å’Œè¯¯è§£ï¼‰ã€‚æ­¤å¤–ï¼Œæœ‰ç©ºä¹Ÿå¯ä»¥å‚è€ƒè¿™ç¯‡ conda æ–‡æ¡£ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>conda</tag>
        <tag>è½¬è½½</tag>
      </tags>
  </entry>
  <entry>
    <title>PythonåŒ…ç®¡ç†å·¥å…·Conda</title>
    <url>/dev-python-conda/</url>
    <content><![CDATA[condaç®€ä»‹æœ¬æ–‡éƒ¨åˆ†å†…å®¹æ¥è‡ªChatGPTã€‚
condaæ˜¯ä¸€ä¸ªå¼€æºçš„è·¨å¹³å°åŒ…ç®¡ç†å™¨ï¼Œç”¨äºå®‰è£…å¹¶ç®¡ç†ä¸åŒç¼–ç¨‹è¯­è¨€çš„è½¯ä»¶åŒ…ã€‚å®ƒæœ€åˆæ˜¯ä¸ºPythonç¼–ç¨‹è¯­è¨€è®¾è®¡çš„ï¼Œä½†ç°å·²æ‰©å±•åˆ°å…¶ä»–è¯­è¨€ï¼Œå¦‚Rã€Rubyå’ŒLuaç­‰ã€‚
condaçš„ä¸€ä¸ªä¸»è¦ä¼˜åŠ¿æ˜¯å®ƒå¯ä»¥åŒæ—¶ç®¡ç†å¤šä¸ªç¯å¢ƒï¼Œä½¿å¾—åœ¨ä¸åŒé¡¹ç›®ä¹‹é—´åˆ‡æ¢å’Œéš”ç¦»ä¾èµ–å˜å¾—å®¹æ˜“ã€‚æ­¤å¤–ï¼Œcondaè¿˜å¯ä»¥è§£å†³ä¾èµ–å…³ç³»ï¼Œä»¥ç¡®ä¿è½¯ä»¶åŒ…ä¹‹é—´çš„å…¼å®¹æ€§ã€‚
ç›¸å…³æ–‡æ¡£ï¼š

github - conda
ã€ŠAnacondaã€‹
ã€ŠPythonåŒ…ç®¡ç†å·¥å…·pipã€‹
ã€ŠPythonç‰ˆæœ¬ç®¡ç†å™¨pyenvã€‹



Anacondaå’ŒMinicondaAnacondaAnacondaæ˜¯ä¸€ä¸ªæµè¡Œçš„Pythonå’ŒRè¯­è¨€çš„æ•°æ®ç§‘å­¦å‘è¡Œç‰ˆï¼Œæä¾›äº†åŒ…æ‹¬condaåœ¨å†…çš„ä¸€æ•´å¥—å·¥å…·å’Œåº“ã€‚Anacondaé¢„è£…äº†è®¸å¤šç”¨äºæ•°æ®ç§‘å­¦å’Œæœºå™¨å­¦ä¹ çš„å¸¸ç”¨åŒ…ï¼Œä½¿å¾—æ–°æ‰‹èƒ½å¤Ÿå¿«é€Ÿå¼€å§‹ç¼–å†™ä»£ç ã€‚ç„¶è€Œï¼ŒAnacondaçš„ä½“ç§¯è¾ƒå¤§ï¼Œå¯èƒ½ä¼šå ç”¨å¤§é‡ç£ç›˜ç©ºé—´ã€‚
å®‰è£…æ–¹æ³•ï¼šè®¿é—®anacondaå®˜ç½‘ï¼Œä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„å®‰è£…åŒ…ï¼Œæ‰§è¡Œå®‰è£…ã€‚
MinicondaMinicondaæ˜¯Anacondaçš„è½»é‡çº§ç‰ˆæœ¬ï¼ŒåªåŒ…å«Pythonå’Œcondaã€‚Minicondaæ²¡æœ‰é¢„è£…ä»»ä½•å…¶ä»–åŒ…ï¼Œä½†å…è®¸ç”¨æˆ·ä½¿ç”¨condaè‡ªå®šä¹‰å®‰è£…æ‰€éœ€çš„åŒ…ã€‚Minicondaæ˜¯ä¸ºé‚£äº›å¯¹ç£ç›˜ç©ºé—´æœ‰é™åˆ¶æˆ–åªéœ€ç‰¹å®šè½¯ä»¶åŒ…çš„ç”¨æˆ·è®¾è®¡çš„ã€‚
å®‰è£…æ–¹æ³•ï¼šè®¿é—®minicondaå®˜ç½‘ï¼Œä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„å®‰è£…åŒ…æˆ–è€…è„šæœ¬ï¼Œæ‰§è¡Œå®‰è£…ã€‚
Linuxä¸­å®‰è£…æ–¹æ³•ï¼š
wget https://repo.anaconda.com/miniconda/Miniconda3-py37_23.1.0-1-Linux-x86_64.shbash Miniconda3-py37_23.1.0-1-Linux-x86_64.sh -hbash Miniconda3-py37_23.1.0-1-Linux-x86_64.sh -b -p /opt/miniconda3echo &#x27;PATH=/opt/miniconda3/bin:$PATH&#x27; &gt;&gt; .bash_profilesource .bash_profileconda --version

condaå¸¸ç”¨å‘½ä»¤æŸ¥çœ‹condaçš„ç‰ˆæœ¬
conda --version

æ›´æ–°condaè‡³æœ€æ–°ç‰ˆæœ¬
conda update conda

åˆ›å»ºä¸€ä¸ªæ–°çš„ç¯å¢ƒï¼ŒæŒ‡å®šPythonç‰ˆæœ¬
conda create --name &lt;env_name&gt; python=&lt;python_version&gt;

æ¿€æ´»æŒ‡å®šçš„ç¯å¢ƒ
conda activate &lt;env_name&gt;

åœç”¨å½“å‰ç¯å¢ƒ
conda deactivate

åœ¨å½“å‰ç¯å¢ƒä¸­å®‰è£…æŒ‡å®šçš„è½¯ä»¶åŒ…
conda install &lt;package_name&gt;

åˆ—å‡ºå½“å‰ç¯å¢ƒä¸­çš„æ‰€æœ‰è½¯ä»¶åŒ…
conda list

æ›´æ–°æŒ‡å®šçš„è½¯ä»¶åŒ…
conda update &lt;package_name&gt;

ä»å½“å‰ç¯å¢ƒä¸­åˆ é™¤æŒ‡å®šçš„è½¯ä»¶åŒ…
conda remove &lt;package_name&gt;

åˆ—å‡ºæ‰€æœ‰å·²åˆ›å»ºçš„ç¯å¢ƒ
conda info --envs

condaåˆ›å»ºç¯å¢ƒä½¿ç”¨condaåˆ›å»ºä¸€ä¸ªåä¸ºmy_envçš„Python 3.7.10ç¯å¢ƒï¼Œå¹¶å®‰è£…requestsã€pytestå’Œpytest-covä¾èµ–ã€‚
conda create --name my_env python=3.7.10conda activate my_envconda install requests pytest pytest-cov

conda vs pipè·¨å¹³å°å’Œè·¨è¯­è¨€æ”¯æŒcondaï¼šcondaæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„åŒ…ç®¡ç†å™¨ï¼Œæ”¯æŒLinuxã€macOSå’ŒWindowsã€‚è™½ç„¶æœ€åˆæ˜¯ä¸ºPythonè®¾è®¡çš„ï¼Œä½†condaç°åœ¨ä¹Ÿæ”¯æŒå…¶ä»–ç¼–ç¨‹è¯­è¨€ï¼Œå¦‚Rã€Rubyå’ŒLuaç­‰ã€‚
pipï¼špipæ˜¯Pythonçš„å®˜æ–¹åŒ…ç®¡ç†å™¨ï¼Œä¸“ä¸ºPythonè®¾è®¡ã€‚pipåœ¨å„ç§å¹³å°ä¸Šè¿è¡Œè‰¯å¥½ï¼Œä½†ä»…é€‚ç”¨äºPythonåŒ…ã€‚
ç¯å¢ƒç®¡ç†condaï¼šcondaå¯ä»¥è½»æ¾åˆ›å»ºå’Œç®¡ç†å¤šä¸ªç‹¬ç«‹çš„ç¯å¢ƒï¼Œè¿™ä½¿å¾—åœ¨ä¸åŒé¡¹ç›®ä¹‹é—´åˆ‡æ¢å’Œéš”ç¦»ä¾èµ–å˜å¾—å®¹æ˜“ã€‚è¿™å¯¹äºå¤„ç†å…·æœ‰å¤æ‚ä¾èµ–å…³ç³»æˆ–éœ€è¦ç‰¹å®šç‰ˆæœ¬çš„åŒ…çš„é¡¹ç›®ç‰¹åˆ«æœ‰ç”¨ã€‚
pipï¼šè™½ç„¶pipæœ¬èº«ä¸æ”¯æŒç¯å¢ƒç®¡ç†ï¼Œä½†å®ƒå¯ä»¥ä¸virtualenvæˆ–venvï¼ˆPython 3.3+å†…ç½®ï¼‰ç­‰å·¥å…·ç»“åˆä½¿ç”¨æ¥åˆ›å»ºå’Œç®¡ç†è™šæ‹Ÿç¯å¢ƒã€‚
äºŒè¿›åˆ¶åŒ…å’Œç¼–è¯‘condaï¼šcondaæä¾›çš„åŒ…é€šå¸¸æ˜¯é¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œè¿™æ„å‘³ç€å®ƒä»¬å·²ç»é’ˆå¯¹ç‰¹å®šå¹³å°ç¼–è¯‘è¿‡ï¼Œå› æ­¤å®‰è£…è¿‡ç¨‹æ›´å¿«ï¼Œä¸éœ€è¦ç”¨æˆ·è¿›è¡Œç¼–è¯‘ã€‚è¿™åœ¨å¤„ç†éœ€è¦ç¼–è¯‘çš„å¤æ‚åº“æ—¶éå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯å¯¹äºæ¶‰åŠå¤æ‚ç¼–è¯‘è¿‡ç¨‹çš„æœ¬åœ°æ‰©å±•ã€‚
pipï¼špipä»Python Package Index (PyPI)å®‰è£…åŒ…ï¼Œé€šå¸¸æ˜¯æºä»£ç æ ¼å¼ã€‚è™½ç„¶è®¸å¤šåŒ…å¯ä»¥ç›´æ¥å®‰è£…ï¼Œä½†æŸäº›åŒ…å¯èƒ½éœ€è¦ç¼–è¯‘ï¼Œè¿™å¯èƒ½å¯¼è‡´ä¾èµ–å…³ç³»é—®é¢˜æˆ–åœ¨ç‰¹å®šå¹³å°ä¸Šé‡åˆ°å®‰è£…å›°éš¾ã€‚
ä¾èµ–è§£æcondaï¼šcondaåœ¨å®‰è£…è½¯ä»¶åŒ…æ—¶è§£å†³ä¾èµ–å…³ç³»é—®é¢˜ï¼Œç¡®ä¿æ‰€æœ‰ä¾èµ–çš„åŒ…éƒ½å…¼å®¹ã€‚è¿™æœ‰åŠ©äºé¿å…ç‰ˆæœ¬å†²çªå’Œåº“ä¹‹é—´çš„æ½œåœ¨é—®é¢˜ã€‚
pipï¼špipåœ¨è§£å†³ä¾èµ–å…³ç³»æ–¹é¢çš„èƒ½åŠ›æœ‰é™ï¼Œå¯èƒ½å¯¼è‡´ç‰ˆæœ¬å†²çªæˆ–ä¸å…¼å®¹ã€‚å°½ç®¡å¦‚æ­¤ï¼Œpipåœ¨æœ€è¿‘çš„ç‰ˆæœ¬ä¸­å·²ç»å–å¾—äº†å¾ˆå¤§çš„è¿›æ­¥ã€‚
åº”ç”¨åœºæ™¯condaï¼šcondaç‰¹åˆ«é€‚åˆäºç§‘å­¦è®¡ç®—ã€æ•°æ®ç§‘å­¦å’Œæœºå™¨å­¦ä¹ ç­‰é¢†åŸŸï¼Œå› ä¸ºå®ƒå¯ä»¥è½»æ¾å¤„ç†è¿™äº›é¢†åŸŸä¸­å¸¸è§çš„å¤æ‚ä¾èµ–å…³ç³»ã€‚Anacondaå’ŒMinicondaåˆ†åˆ«ä¸ºè¿™äº›é¢†åŸŸçš„ç”¨æˆ·æä¾›äº†å…¨é¢å’Œè½»é‡çº§çš„è§£å†³æ–¹æ¡ˆã€‚
pipï¼špipæ˜¯Pythonç”Ÿæ€ç³»ç»Ÿçš„æ ‡å‡†å·¥å…·ï¼Œé€‚ç”¨äºå¤§å¤šæ•°é¡¹ç›®ã€‚
conda vs pyenvConda å’Œ Pyenv éƒ½å¯ä»¥ç®¡ç† Python ç¯å¢ƒï¼Œä½†å®ƒä»¬çš„ç”¨é€”å’ŒåŠŸèƒ½ç•¥æœ‰ä¸åŒã€‚
Conda æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„ Python åŒ…ç®¡ç†å™¨å’Œç¯å¢ƒç®¡ç†å™¨ã€‚å®ƒå¯ä»¥åœ¨åŒä¸€ç³»ç»Ÿä¸­ç®¡ç†å¤šä¸ª Python ç‰ˆæœ¬å’Œå…¶å®ƒç¼–ç¨‹è¯­è¨€çš„ç¯å¢ƒã€‚Conda å¯ä»¥åˆ›å»ºå’Œç®¡ç† Python ç¯å¢ƒï¼Œå¹¶å®‰è£…ã€å‡çº§å’Œåˆ é™¤è½¯ä»¶åŒ…ã€‚Conda è¿˜æœ‰ä¸€ä¸ªéå¸¸å¥½çš„ç‰¹ç‚¹å°±æ˜¯å¯ä»¥è½»æ¾åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œæ¯ä¸ªè™šæ‹Ÿç¯å¢ƒå¯ä»¥æ‹¥æœ‰ä¸åŒçš„ Python ç‰ˆæœ¬å’Œè½¯ä»¶åŒ…ã€‚
Pyenv æ˜¯å¦ä¸€ä¸ª Python ç‰ˆæœ¬ç®¡ç†å™¨ï¼Œå®ƒå¯ä»¥è®©æ‚¨åœ¨åŒä¸€ç³»ç»Ÿä¸­è½»æ¾å®‰è£…å’Œåˆ‡æ¢ä¸åŒç‰ˆæœ¬çš„ Pythonã€‚Pyenv ä¸ä»…å¯ä»¥å®‰è£…å…¨å±€ Python ç‰ˆæœ¬ï¼Œè€Œä¸”è¿˜å¯ä»¥åœ¨ä¸åŒçš„é¡¹ç›®ä¸­ä½¿ç”¨ä¸åŒçš„ Python ç‰ˆæœ¬ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜å¯ä»¥ç®¡ç† Python çš„è™šæ‹Ÿç¯å¢ƒã€‚
ç»¼ä¸Šæ‰€è¿°ï¼Œä¸¤è€…çš„åŒºåˆ«åœ¨äº Conda ä¸»è¦ç”¨äºç®¡ç†è½¯ä»¶åŒ…å’Œç¯å¢ƒï¼Œè€Œ Pyenv ä¸»è¦ç”¨äºç®¡ç† Python ç‰ˆæœ¬ã€‚å¦‚æœéœ€è¦åœ¨åŒä¸€ç³»ç»Ÿä¸­ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„ Python æˆ–ä¸åŒçš„è½¯ä»¶åŒ…ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ Condaã€‚å¦‚æœä»…ä»…éœ€è¦åˆ‡æ¢ Python ç‰ˆæœ¬ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ Pyenvã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>conda</tag>
        <tag>chatgpt</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ â€”â€”æ³°å¦å°¼å…‹å·ç”Ÿè¿˜è€…åˆ†æ</title>
    <url>/dev-machine-learning-titanic/</url>
    <content><![CDATA[å‰è¨€å®æˆ˜é¡¹ç›®ï¼šæ³°å¦å°¼å…‹å·ç”Ÿè¿˜è€…åˆ†æ
åœ¨è¿™ä¸ªå¯é€‰é¡¹ç›®ä¸­ï¼Œä½ è¦ä¾æ®ä¹˜å®¢çš„ä¸€äº›ç‰¹å¾ï¼Œä¾‹å¦‚æ€§åˆ«å’Œå¹´é¾„ï¼Œæ¥åˆ›é€ ä¸€ä¸ªå†³ç­–å‡½æ•°ï¼Œé¢„æµ‹1912å¹´æ³°å¦å°¼å…‹å·æ²‰æ²¡äº‹ä»¶ä¸­çš„ç”Ÿè¿˜è€…ã€‚ä»ä¸€ä¸ªç®€å•çš„ç®—æ³•å¼€å§‹ï¼Œé€æ¸æé«˜å®ƒçš„å¤æ‚æ€§ï¼Œç›´åˆ°ä½ èƒ½å‡†ç¡®é¢„æµ‹ç»™å®šæ•°æ®ä¸­80%çš„ä¹˜å®¢çš„ç”Ÿè¿˜æƒ…å†µã€‚é€šè¿‡è¿™ä¸ªæ¡ˆä¾‹ï¼Œæˆ‘ä»¬å°†å‘ä½ ä»‹ç»æœºå™¨å­¦ä¹ çº³ç±³å­¦ä½ä¸­ä¼šé‡åˆ°çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µã€‚


é¡¹ç›®æ¦‚è¿°åœ¨è¿™ä¸ªå¯é€‰çš„é¡¹ç›®ä¸­ï¼Œæ‚¨å°†åˆ›å»ºå†³ç­–å‡½æ•°ï¼Œå¹¶æ ¹æ®1912å¹´æ³°å¦å°¼å…‹å·æµ·éš¾çš„ä¹˜å®¢ç‰¹å¾ï¼Œå¦‚ï¼šæ€§åˆ«ã€å¹´é¾„ç­‰ï¼Œå¯¹ä¹˜å®¢ç”Ÿè¿˜ç»“æœè¿›è¡Œé¢„æµ‹ã€‚æ‚¨å¯ä»¥ä»ä¸€ä¸ªç®€å•çš„ç®—æ³•å…¥æ‰‹ï¼Œç„¶åé€æ¸å¢åŠ è¯¥ç®—æ³•çš„å¤æ‚åº¦ï¼Œç›´è‡³æ‚¨è‡³å°‘èƒ½ç²¾ç¡®åœ°é¢„æµ‹å‡ºæ‰€æä¾›æ•°æ®ä¸­80%çš„ä¹˜å®¢çš„ç”Ÿè¿˜ç»“æœã€‚é€šè¿‡è¯¥é¡¹ç›®ï¼Œæ‚¨å¯åœ¨æ­£å¼å¼€å§‹å­¦ä¹ æœ¬çº³ç±³å­¦ä½å‰ï¼Œäº†è§£æœºå™¨å­¦ä¹ çš„ä¸€äº›æ¦‚å¿µã€‚ä½ è¿˜å¯ä»¥åœ¨è®ºå›æ‰¾åˆ°è¯¥é¢˜ç›®åœ¨ Kaggle çš„æ•°æ®é“¾æ¥ã€‚
æ­¤å¤–ï¼Œè¯·ç¡®ä¿ Python è£…æœ‰å®Œæˆæœ¬é¡¹ç›®æ‰€éœ€çš„ç¨‹åºåŒ…ã€‚æˆ‘ä»¬åœ¨æœ¬é¡¹ç›®ä¸­å°†ä½¿ç”¨åˆ°çš„ Python åº“æœ‰ä¸¤ä¸ªï¼Œå³ numpy å’Œ pandasã€‚ç°åœ¨ä¸éœ€æ‹…å¿ƒå®ƒä»¬å¦‚ä½•è¿ä½œâ€”â€”æˆ‘ä»¬å°†åœ¨å®æˆ˜é¡¹ç›® 1 ä¸­æ¥è§¦åˆ°å®ƒä»¬ã€‚æœ¬é¡¹ç›®è¿˜å°†è®©æ‚¨ç†Ÿæ‚‰é¡¹ç›®çš„æäº¤ç¨‹åºï¼Œé¡¹ç›®æäº¤æ˜¯æ‚¨åœ¨çº³ç±³å­¦ä½è¯¾ç¨‹ä¸­éœ€è¦å®Œæˆçš„å†…å®¹ã€‚
æ‰€éœ€è½¯ä»¶è½¯ä»¶å’Œåº“æœ¬é¡¹ç›®é‡‡ç”¨ä»¥ä¸‹è½¯ä»¶å’Œ Python åº“ï¼š

Python 2.7
NumPy
pandas
matplotlib

ä½ è¿˜éœ€è¦å®‰è£…å’Œè¿è¡Œ Jupyter Notebook
å¯¹jupyterä¸ç†Ÿæ‚‰çš„åŒå­¦å¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸¤ä¸ªé“¾æ¥ï¼š
Jupyterä½¿ç”¨è§†é¢‘æ•™ç¨‹ä¸ºä»€ä¹ˆä½¿ç”¨jupyterï¼Ÿå¦‚æœæ‚¨è¿˜æœªå®‰è£… Pythonï¼Œæˆ‘ä»¬å¼ºçƒˆæ¨èæ‚¨å®‰è£… Python å‘è¡Œç‰ˆï¼šAnacondaï¼Œå…¶å…·å¤‡åŒ…æ‹¬ä¸Šè¿°ç¨‹åºåŒ…åœ¨å†…çš„æ›´å¤šç¨‹åºåŒ…ã€‚å®‰è£…æ—¶ï¼Œç¡®ä¿æ‚¨é€‰æ‹©çš„æ˜¯ Python 2.7 å®‰è£…ç¨‹åºï¼Œè€Œä¸æ˜¯ Python 3.x å®‰è£…ç¨‹åºã€‚
å¦‚æœæ‚¨çš„è®¡ç®—æœºä¸­å·²è£…æœ‰ Python 2.7ï¼Œé‚£ä¹ˆæ‚¨å¯ä½¿ç”¨å‘½ä»¤è¡Œä¸Šçš„ pip å®‰è£… numpyï¼Œ scikit-learn å’Œ Jupyter Notebookï¼ˆä¹‹å‰å«â€™iPythonâ€™ï¼‰ã€‚å¦‚æœä½¿ç”¨ pip æ‰§è¡Œå®‰è£…æ—¶å‡ºç°é—®é¢˜ï¼Œè¿™ä¸ªé¡µé¢å¯¹ Windows ç”¨æˆ·çš„æŸäº›ç¨‹åºåŒ…ä¹Ÿæ˜¯æœ‰ç”¨çš„ã€‚å®‰è£…å®Œ pip ä¹‹åï¼Œä½ å¯ä»¥æ‰§è¡Œä¸‹åˆ—å‘½ä»¤å®‰è£…æ‰€éœ€è¦çš„åŒ…ï¼š
sudo pip install numpy pandas matplotlib jupyter scikit-learn
å¼€å§‹é¡¹ç›®è¦å¼€å§‹è¿™ä¸ªé¡¹ç›®ï¼Œä½ å¯ä»¥è®¿é—®æˆ‘ä»¬çš„GitHubé¡µé¢ï¼Œæˆ–è€…ç‚¹å‡»è¿™é‡Œç›´æ¥ä¸‹è½½æœ€æ–°çš„é¡¹ç›®æ‰€éœ€æ–‡ä»¶ã€‚
projects/titanic_survival_exploration æ–‡ä»¶å¤¹åŒ…å«ä¸‰ä¸ªæ–‡ä»¶ï¼š

Titanic_Survival_Exploration.ipynb: è¿™æ˜¯æœ€ä¸»è¦çš„æ–‡ä»¶ï¼Œé¡¹ç›®ä¸­çš„ä¸»è¦å·¥ä½œéƒ½å°†åœ¨è¿™ä¸ªæ–‡ä»¶ä¸Šå®Œæˆ
titanic_data.csv: é¡¹ç›®æ•°æ®è¡¨ã€‚æ‚¨å°†éœ€è¦æŠŠè¿™ä¸ªæ•°æ®åŠ è½½åˆ° notebook é‡Œã€‚
titanic_visualizations.py: è¿™ä¸ª Python è„šæœ¬åŒ…å« helper å‡½æ•°ï¼Œå¯ä»¥è®©æ•°æ®å’Œå­˜æ´»ç»“æœå¯è§†åŒ–ã€‚

ä¸ºäº†æ‰“å¼€ jupyter notebookï¼Œéœ€è¦å®Œæˆä»¥ä¸‹å‡ æ­¥ã€‚å¦‚æœä½ ä½¿ç”¨ Windows ç³»ç»Ÿï¼Œä½ éœ€è¦æ‰“å¼€å‘½ä»¤ç»ˆç«¯æˆ– PowerShellï¼›å¦‚æœä½ ä½¿ç”¨ Mac æˆ–è€… Linux ç³»ç»Ÿï¼Œç›´æ¥æ‰“å¼€Terminal ç»ˆç«¯å³å¯ã€‚ä½¿ç”¨ cd å‘½ä»¤æ¥æ‰“å¼€é¡¹ç›®æ–‡ä»¶å¤¹ã€‚ä¾‹å¦‚ï¼Œåœ¨ Windows ä¸Šä½ å¯ä»¥ä½¿ç”¨ cd C:\Users\username\Documents\  ï¼ˆusername ç”¨è‡ªå·±çš„ç”¨æˆ·åæ›¿æ¢ï¼‰æ‰¾åˆ°é¡¹ç›®æ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼›åœ¨ Mac ä¸Šï¼Œä½ å¯ä»¥ä½¿ç”¨ cd ~/Documents/ ã€‚åœ¨ Windows ä¸Šä½ å¯ä»¥ä½¿ç”¨ dir å‘½ä»¤ï¼Œåœ¨ Mac æˆ–è€… Linux ä¸Šç”¨ lså‘½ä»¤åˆ—å‡ºå½“å‰ç›®å½•ä¸­çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚å¦‚æœå‘ç°è¿›é”™ç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨ cd .. è¿”å›ä¸Šä¸€çº§ç›®å½•ã€‚
ä¸€æ—¦ä½ è¿›å…¥åŒ…å«é¡¹ç›®æ–‡ä»¶çš„æ–‡ä»¶å¤¹ï¼Œæ‚¨å¯ä»¥è¾“å…¥å‘½ä»¤
jupyter notebook titanic_survival_exploration.ipynb
æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨çª—å£ï¼Œæˆ–è€…æ–°å»ºæ ‡ç­¾é¡µï¼Œæ¥ä½¿ç”¨ä½ çš„ notebookã€‚ä¾ç…§ notebook ä¸Šçš„æŒ‡å¯¼å›ç­”æ¯ä¸€ä¸ªé—®é¢˜å®Œæˆè¿™ä¸ªé¡¹ç›®ã€‚æˆ‘ä»¬è¿˜æä¾›äº†éšé¡¹ç›®çš„ READEME æ–‡æ¡£ï¼Œä¸Šé¢ä¹Ÿæœ‰å…³äºè¿™ä¸ªé¡¹ç›®çš„ä¿¡æ¯å’ŒæŒ‡å¯¼ã€‚
é¡¹ç›®æäº¤è¯„ä¼°ä½ çš„é¡¹ç›®ä¼šç”±ä¼˜è¾¾å­¦åŸé¡¹ç›®è¯„å®¡å¸ˆæŒ‰ç…§ æ³°å¦å°¼å…‹å·æ¢ç´¢é¡¹ç›®è¦æ±‚è¿›è¡Œè¯„å®¡ã€‚è¯·ç¡®å®šä½ ä»”ç»†é˜…è¯»äº†è¯¥è¦æ±‚ï¼Œå¹¶åœ¨é¡¹ç›®æäº¤å‰è‡ªæˆ‘å¯¹æ£€æŸ¥ã€‚è¦æ±‚å½“ä¸­çš„æ‰€æœ‰æ¡ç›®éƒ½å¿…é¡»åˆæ ¼é¡¹ç›®æ‰èƒ½é€šè¿‡ã€‚
æäº¤æ–‡ä»¶å½“ä½ å‡†å¤‡å¥½æäº¤é¡¹ç›®æ—¶ï¼Œä½ å¯ä»¥æŠŠä¸‹åˆ—æ–‡ä»¶å‹ç¼©æˆä¸€ä¸ª zip æ–‡ä»¶ä¸Šä¼ ã€‚æˆ–è€…ï¼Œä½ å¯ä»¥æäº¤ä½ åœ¨ GitHub çš„ Repo ã€‚å¯ä»¥æŠŠæ–‡ä»¶å¤¹å‘½åä¸º titanic_survival_exploration ä¾¿äºæŸ¥æ‰¾ï¼š

å¸¦æœ‰å®Œæ•´é—®é¢˜ç­”æ¡ˆå’Œä»£ç çš„ titanic_survival_exploration.ipynb notebook æ–‡ä»¶ã€‚
notebook é¡¹ç›®å¯¼å‡ºçš„ HTML æ–‡ä»¶ï¼Œå‘½åä¸º report.htmlã€‚

æ³¨æ„ï¼šæ‰€æäº¤æ–‡ä»¶çš„æ–‡ä»¶ååï¼ŒåŒ…æ‹¬zipå‹ç¼©åŒ…å†…çš„æ–‡ä»¶åï¼Œéƒ½ä¸èƒ½å«æœ‰ä¸­æ–‡åŠä»»ä½•ASCIIä¹‹å¤–çš„å­—ç¬¦ï¼Œå¦åˆ™ä¼šé€ æˆæäº¤å¤±è´¥ã€‚
å¦‚ä½•å¯¼å‡ºHTMLçš„è¯´æ˜åœ¨ notebook çš„æœ€ä¸‹æ–¹ã€‚ ä½ ä¹Ÿè®¸éœ€è¦å…ˆåœ¨å‘½ä»¤åé€šè¿‡ pip install mistune å‘½ä»¤å®‰è£… mistune ã€‚å½“ä½ å‡†å¤‡å¥½æ‰€æœ‰è¿™äº›æ–‡ä»¶ï¼Œå¹¶ä¸”ä¾ç…§é¡¹ç›®è¦æ±‚æ ¸å¯¹è¿‡ä¹‹åï¼Œå°±å¯ä»¥åœ¨ä¸‹é¢çš„é¡¹ç›®æäº¤é¡µé¢æäº¤ä½ çš„é¡¹ç›®äº†ã€‚
å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡åœ¨ä¼˜è¾¾å­¦åŸæäº¤é¡¹ç›®ï¼Œç‚¹å‡»æäº¤ä¹‹åï¼Œè¦ç­‰1åˆ†é’Ÿå·¦å³æ‰èƒ½æ‰“å¼€æäº¤é¡µé¢ã€‚å¦‚æœé•¿æ—¶é—´æ‰“ä¸å¼€ï¼Œå¯ä»¥åˆ·æ–°ã€‚å¦‚æœä¾ç„¶æ— æ³•æ‰“å¼€é¡¹ç›®æäº¤é¡µé¢ï¼Œå¯ä»¥è”ç³»å®¢æœå¾®ä¿¡æˆ–è€…é‚®ä»¶è‡³ &#115;&#117;&#x70;&#112;&#x6f;&#x72;&#116;&#64;&#x79;&#111;&#x75;&#100;&#97;&#x78;&#117;&#101;&#x2e;&#99;&#x6f;&#109;
åè®°è¿™ä¸ªé¡¹ç›®ï¼Œæ˜¯ä¼˜è¾¾å­¦åŸã€Šæœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆã€‹è¯¾ç¨‹æä¾›çš„ç¬¬ä¸€ä¸ªå®æˆ˜é¡¹ç›®ã€‚æ‘˜å½•äº†å…¨æ–‡ï¼Œæ–¹ä¾¿æŸ¥çœ‹ã€‚éƒåŒå­¦çš„é¡¹ç›®åœ°å€ï¼šhttps://github.com/voidking/udaciyty-machine-learning/tree/master/projects/titanic_survival_exploration
ä¹¦ç­¾æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆï¼ˆä¸­/è‹±ï¼‰https://cn.udacity.com/course/machine-learning-engineer-nanodegree--nd009
æ•°æ®ç§‘å­¦å…¥é—¨https://cn.udacity.com/course/intro-to-data-science--ud359
å¦‚ä½•æŠŠ Project 0 æäº¤åˆ° Kaggle ä¸Šhttp://discussions.youdaxue.com/t/project-0-kaggle/7032
Kaggle: Your Home for Data Sciencehttps://www.kaggle.com/
Titanic: Machine Learning from Disaster | Kagglehttps://www.kaggle.com/c/titanic
A Visual Introduction to Machine Learninghttp://www.r2d3.us/visual-intro-to-machine-learning-part-1/
numpy 1.12.0 : Python Package Indexhttps://pypi.python.org/pypi/numpy
pandas 0.19.2 : Python Package Indexhttps://pypi.python.org/pypi/pandas
window ä¸‹python2.7ä¸python3.5ä¸¤ç‰ˆæœ¬å…±å­˜è®¾ç½®http://blog.csdn.net/u010004460/article/details/53410091
win7ä¸‹python2.7å®‰è£… pipï¼Œsetuptoolsçš„æ­£ç¡®æ–¹æ³•http://www.jincon.com/archives/213/
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ å…¥é—¨</title>
    <url>/dev-machine-learning-start/</url>
    <content><![CDATA[å‰è¨€æœºå™¨å­¦ä¹ æ ‡å¿—ç€è®¡ç®—æœºç§‘å­¦ã€æ•°æ®åˆ†æã€è½¯ä»¶å·¥ç¨‹å’Œäººå·¥æ™ºèƒ½é¢†åŸŸå†…çš„é‡å¤§æŠ€æœ¯çªç ´ã€‚AlphaGo æˆ˜èƒœäººç±»å›´æ£‹å† å†›ã€äººè„¸è¯†åˆ«ã€è¯­éŸ³è¯†åˆ«ã€å›¾ç‰‡è¯†åˆ«ã€å¤§æ•°æ®æŒ–æ˜ã€è‡ªåŠ¨é©¾é©¶ç­‰ç­‰ï¼Œéƒ½å’Œæœºå™¨å­¦ä¹ å¯†åˆ‡ç›¸å…³ã€‚
æœºå™¨å­¦ä¹ å…¶å®å¾ˆç®€å•ï¼Œè€Œä¸”å¾ˆæœ‰è¶£ã€‚
æœºå™¨å­¦ä¹ æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬ç”Ÿæ´»åœ¨ä¸€ä¸ªæœ‰äººç±»å’Œè®¡ç®—æœºçš„ä¸–ç•Œï¼Œäººç±»å’Œè®¡ç®—æœºçš„ä¸€å¤§ä¸åŒç‚¹æ˜¯ï¼Œäººç±»èƒ½ä»è¿‡å»çš„ç»éªŒä¸­å­¦ä¹ ï¼Œè€Œè®¡ç®—æœºåªèƒ½æ‰§è¡ŒæŒ‡ä»¤ï¼Œå®ƒä»¬éœ€è¦è¢«ç¼–ç¨‹ã€‚ç°åœ¨çš„é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬èƒ½è®©è®¡ç®—æœºä»è¿‡å»çš„ç»éªŒä¸­å­¦ä¹ å—ï¼Ÿç­”æ¡ˆæ˜¯æˆ‘ä»¬èƒ½è¿™ä¹ˆåšã€‚è¿™å°±æ˜¯æœºå™¨å­¦ä¹ çš„ç›®çš„ï¼Œæ•™ä¼šè®¡ç®—æœºåˆ©ç”¨è¿‡å¾€çš„ç»éªŒå®ŒæˆæŒ‡å®šä»»åŠ¡ã€‚å½“ç„¶ï¼Œå¯¹è®¡ç®—æœºæ¥è¯´ï¼Œè¿‡å»çš„ç»éªŒå°±æ˜¯è¢«è®°å½•çš„æ•°æ®ã€‚


å…ˆä¿®æ¡ä»¶å’Œè¦æ±‚1ã€æŒæ¡ä¸­çº§ç¼–ç¨‹çŸ¥è¯†ï¼Œå¯ä»¥é€šè¿‡â€œç¼–ç¨‹å…¥é—¨â€çº³ç±³å­¦ä½ã€å…¶ä»–ç¼–ç¨‹å…¥é—¨è¯¾ç¨‹é¡¹ç›®æˆ–å…¶ä»–è½¯ä»¶å¼€å‘å®æˆ˜ç»éªŒè·å¾—ï¼Œç›¸å…³çŸ¥è¯†åŒ…æ‹¬ï¼š

å­—ç¬¦ä¸²ã€æ•°å€¼å’Œå˜é‡
è¯­å¥ã€æ“ä½œç¬¦å’Œè¡¨è¾¾å¼
åˆ—è¡¨ã€å…ƒç»„å’Œå­—å…¸
æ¡ä»¶ã€å¾ªç¯
è¿‡ç¨‹ã€å¯¹è±¡ã€æ¨¡å—å’Œåº“
æ•…éšœè¯Šæ–­å’Œè°ƒè¯•
è°ƒç ”å’Œæ–‡æ¡£
è§£å†³é—®é¢˜
ç®—æ³•å’Œæ•°æ®ç»“æ„

2ã€æŒæ¡ä¸­çº§ç»Ÿè®¡å­¦çŸ¥è¯†ï¼Œå¯ä»¥é€šè¿‡ä¼˜è¾¾å­¦åŸçš„ç»Ÿè®¡å­¦å…¥é—¨è¯¾ç¨‹è·å¾—ï¼Œç›¸å…³çŸ¥è¯†åŒ…æ‹¬ï¼š

æ€»ä½“ï¼Œæ ·æœ¬
å‡æ•°ã€ä¸­é—´å€¼ã€ä¼—æ•°
æ ‡å‡†è¯¯å·®
æ–¹å·®ï¼Œæ ‡å‡†å·®
æ­£æ€åˆ†å¸ƒ
ç²¾åº¦å’Œå‡†ç¡®åº¦

3ã€æŒæ¡ä¸­çº§å¾®ç§¯åˆ†å’Œçº¿æ€§ä»£æ•°çŸ¥è¯†ï¼Œè¿™äº›çŸ¥è¯†å¯ä»¥é€šè¿‡çº¿æ€§ä»£æ•°å¤ä¹ è¯¾è·å¾—ï¼Œç›¸å…³çŸ¥è¯†åŒ…æ‹¬:

å¯¼æ•°
ç§¯åˆ†
çº§æ•°å±•å¼€
é€šè¿‡ç‰¹å¾å‘é‡å’Œç‰¹å¾å€¼è¿›è¡ŒçŸ©é˜µè¿ç®—

æˆ‘ä»¬ä¸ºä½ å‡†å¤‡äº†ä¸€äº›å­¦ä¹ æ‰©å±•èµ„æ–™ï¼Œç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ã€‚
å†³ç­–æ ‘å‡è®¾æˆ‘ä»¬æ˜¯è‹¹æœæˆ–è°·æ­Œåº”ç”¨å•†åº—ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä¸ºç”¨æˆ·æ¨èåº”ç”¨ã€‚å¯¹æ¯ä¸ªç”¨æˆ·ï¼Œæˆ‘ä»¬å‘å…¶æ¨èæœ€æœ‰å¯èƒ½ä¸‹è½½çš„åº”ç”¨ã€‚æˆ‘ä»¬æœ‰ä¸€å¼ ç”¨æ¥åˆ¶å®šæ¨èè§„åˆ™çš„æ•°æ®è¡¨ã€‚æˆ‘ä»¬æœ‰6ä¸ªç”¨æˆ·ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ€§åˆ«ã€å¹´é¾„å’Œä¸‹è½½è¿‡çš„åº”ç”¨ã€‚ä»è¡¨ä¸­å¯ä»¥çœ‹å‡ºï¼Œå¹´é¾„æ¯”æ€§åˆ«æ›´é€‚åˆç”¨æ¥é¢„æµ‹ç”¨æˆ·ä¼šä¸‹è½½ä»€ä¹ˆåº”ç”¨ã€‚ç»è¿‡åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªå†³ç­–æ ‘ã€‚ç°åœ¨æˆ‘ä»¬ä¸€æ—¦æˆ‘ä»¬æœ‰äº†æ–°ç”¨æˆ·ï¼Œå°±å¯ä»¥å°†å†³ç­–æ ‘åº”ç”¨äºä»–ä»¬çš„æ•°æ®ï¼Œå¹¶å‘ä»–ä»¬æ¨èå†³ç­–æ ‘å¾—å‡ºçš„åº”ç”¨ã€‚
æ˜¾ç„¶ï¼Œæˆ‘ä»¬å¹¶ä¸æ€»èƒ½å¾—åˆ°ä¸æ•°æ®è‰¯å¥½åŒ¹é…çš„å†³ç­–æ ‘ï¼Œæˆ‘ä»¬å°†å­¦ä¹ ä¸€ä¸ªç®—æ³•ï¼Œç”¨æ¥å¸®åŠ©æˆ‘ä»¬æ‰¾åˆ°å’Œæ•°æ®æœ€åŒ¹é…çš„å†³ç­–æ ‘ã€‚
æœ´ç´ è´å¶æ–¯æˆ‘ä»¬å†æ¥çœ‹ä¸‹ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å°†æ­å»ºä¸€ä¸ªåƒåœ¾é‚®ä»¶æ£€æµ‹åˆ†ç±»å™¨ã€‚æˆ‘ä»¬æœ‰100å°é‚®ä»¶ï¼Œå…¶ä¸­å·²ç»æ‰‹å·¥æ ‡è®°å‡ºäº†25å°åƒåœ¾é‚®ä»¶ï¼Œå‰©ä¸‹çš„75å°è¢«ç§°ä¸ºéåƒåœ¾é‚®ä»¶ã€‚ç°åœ¨æˆ‘ä»¬æ¥æ€è€ƒä¸€å°åƒåœ¾æœ‰å®¶å¯èƒ½ä¼šæ˜¾ç¤ºå‡ºä»€ä¹ˆç‰¹å¾ï¼Œå¹¶å¯¹è¿™äº›ç‰¹å¾è¿›è¡Œåˆ†æã€‚ä¾‹å¦‚ï¼Œå¯èƒ½æœ‰ä¸€ä¸ªç‰¹å¾åŒ…å«å•è¯â€œcheapâ€ï¼Œè®¤ä¸ºä¸€å°åŒ…å«äº†å•è¯cheapçš„é‚®ä»¶å¯èƒ½æ˜¯åƒåœ¾é‚®ä»¶ï¼Œæ˜¯åˆç†çš„ã€‚æˆ‘ä»¬æ¥åˆ†æè¿™ä¸€åˆ¤å®šï¼Œæˆ‘ä»¬å‘ç°25å°åƒåœ¾é‚®ä»¶ä¸­æœ‰20å°åŒ…å«å•è¯â€œcheapâ€ï¼Œå…¶ä½™75å°æ­£å¸¸é‚®ä»¶çš„5å°åŒ…å«å•è¯â€œcheapâ€ã€‚æˆ‘ä»¬æš‚æ—¶ä¸ç†ä¼šå‰©ä¸‹çš„ä¸å«â€œcheapâ€çš„é‚®ä»¶ï¼Œåªå…³æ³¨é‚£äº›åŒ…å«cheapçš„é‚®ä»¶ã€‚è¯·é—®ï¼Œå¦‚æœæœ‰ä¸€å°é‚®ä»¶åŒ…å«å•è¯â€œcheapâ€ï¼Œé‚£ä¹ˆå®ƒæ˜¯åƒåœ¾é‚®ä»¶çš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼Ÿç­”ï¼š80%ã€‚å³ï¼Œå¦‚æœä¸€å°é‚®ä»¶åŒ…å«å•è¯â€œcheapâ€ï¼Œé‚£ä¹ˆå®ƒçš„åƒåœ¾é‚®ä»¶çš„æ¦‚ç‡ä¸º80%ï¼Œäºæ˜¯æˆ‘ä»¬æŠŠè¿™ä¸ªç‰¹å¾çš„å…³è”æ¦‚ç‡è®¾ä¸º80%ï¼Œå¹¶ç”¨å®ƒæ¥æ ‡è®°æ–°é‚®ä»¶æ˜¯å¦ä¸ºåƒåœ¾é‚®ä»¶ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æ£€æŸ¥å…¶ä»–ç‰¹å¾ï¼Œå°è¯•æ‰¾å‡ºå®ƒä»¬çš„å…³è”æ¦‚ç‡ã€‚æ¯”å¦‚æˆ‘ä»¬æŸ¥çœ‹é‚®ä»¶æ˜¯å¦åŒ…å«æ‹¼å†™é”™è¯¯ï¼Œå‘ç°åŒ…å«æ‹¼å†™é”™è¯¯çš„é‚®ä»¶ä¸ºåƒåœ¾é‚®ä»¶çš„æ¦‚ç‡ä¸º70%ã€‚æ¥ç€æŸ¥çœ‹ç¼ºå°‘æ ‡é¢˜çš„é‚®ä»¶ï¼Œå‘ç°å®ƒä»¬æ˜¯åƒåœ¾é‚®ä»¶çš„æ¦‚ç‡ä¸º90%ã€‚å½“æˆ‘ä»¬æ”¶åˆ°æ–°é‚®ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆè¿™äº›ç‰¹å¾æ¥çŒœæµ‹æ–°é‚®ä»¶æ˜¯å¦æ˜¯åƒåœ¾é‚®ä»¶ï¼Œè¿™ä¸ªç®—æ³•å«åšæœ´ç´ è´å¶æ–¯ç®—æ³•ã€‚
æ¢¯åº¦ä¸‹é™å‡å¦‚æˆ‘ä»¬ç°åœ¨æ­£èº«å¤„å±±é¡¶ï¼ˆç ç©†æœ—ç›å³°ï¼‰ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯æŠµè¾¾å±±åº•ï¼Œåº”è¯¥é‡‡å–ä»€ä¹ˆç­–ç•¥ï¼Ÿæˆ‘ä»¬å¯ä»¥ä¸€æ­¥ä¸€æ­¥æ¥ã€‚æˆ‘ä»¬æŸ¥çœ‹å››å‘¨å¯ä»¥èµ°çš„è®¸å¤šé€‰é¡¹ï¼Œåœ¨å…¶ä¸­æ‰¾åˆ°ä¸‹é™è·ç¦»æœ€å¤§çš„æ–¹å‘ï¼Œä¸‹é™ä¸€æ­¥ã€‚ç„¶åé‡å¤è¿™ä¸ªæ­¥éª¤ï¼ŒæŸ¥çœ‹å››å‘¨ï¼Œæ‰¾åˆ°ä¸‹é™è·ç¦»æœ€å¤§çš„æ–¹å‘ï¼Œä¸‹é™ä¸€æ­¥ã€‚é‡å¤æ­¤æ­¥éª¤ï¼Œç›´åˆ°å®Œæˆä¸‹å±±ã€‚è¿™ä¸ªç®—æ³•ï¼Œå«åšæ¢¯åº¦ä¸‹é™ã€‚ä½ å¯ä»¥æŠŠè¿™åº§å±±æƒ³è±¡æˆè¦è§£å†³çš„é—®é¢˜ï¼ŒæŠŠå±±åº•å½“åšå¯¹é—®é¢˜çš„è§£ç­”ã€‚æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜çš„è¿‡ç¨‹ï¼Œå°±æ˜¯æ€»æ˜¯é¡ºç€æŒ‡å‘ç­”æ¡ˆçš„æ–¹å‘å°æ­¥å‰è¿›ã€‚
çº¿æ€§å›å½’å‡è®¾æˆ‘ä»¬æ­£åœ¨ç ”ç©¶æˆ¿åœ°äº§å¸‚åœºï¼Œæˆ‘ä»¬çš„ä»»åŠ¡æ˜¯é¢„æµ‹ç»™å®šé¢ç§¯çš„æˆ¿å±‹çš„ä»·æ ¼ã€‚è¿™é‡Œæœ‰ä¸€æ ‹è¾ƒå°çš„æˆ¿å­å”®ä»·ä¸º$70000ï¼Œä¸€æ ‹è¾ƒå¤§çš„æˆ¿å­å”®ä»·ä¸º$160000ï¼Œæˆ‘ä»¬å¸Œæœ›ä¼°è®¡ä¸€æ ‹ä¸­ç­‰é¢ç§¯çš„æˆ¿å­çš„ä»·æ ¼ï¼Œåº”è¯¥å¦‚ä½•æ¥åšï¼Ÿå›¾ä¸­çš„è“è‰²æ•°æ®ç‚¹ï¼Œæ˜¯æˆ‘ä»¬æ”¶é›†çš„è¿‡å»çš„æˆ¿å±‹æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™äº›æ•°æ®ç‚¹ä¼¼ä¹æ’æˆä¸€æ¡ç›´çº¿ï¼Œæˆ‘ä»¬å¯ä»¥ç”»å‡ºä¸€æ¡å¯¹æ‹Ÿåˆæ•°æ®çš„ç›´çº¿ã€‚æ ¹æ®è¿™æ¡ç›´çº¿ï¼Œæˆ‘ä»¬å¯ä»¥é¢„æµ‹ä¸­ç­‰æˆ¿å­çš„ä»·æ ¼ä¸º$120000ã€‚è¿™ä¸ªæ–¹æ³•å«åšçº¿æ€§å›å½’ã€‚
ä½ å¯ä»¥æŠŠçº¿æ€§å›å½’æƒ³è±¡æˆä¸€ä¸ªç”»å®¶ï¼Œä»–æ£€æŸ¥æ•°æ®å¹¶ç”»å‡ºç©¿è¿‡æ•°æ®åŒºåŸŸçš„æœ€ä½³æ‹Ÿåˆç›´çº¿ã€‚ä½ æˆ–è®¸ä¼šé—®ï¼Œæˆ‘ä»¬å¦‚ä½•æ‰¾åˆ°è¿™æ¡çº¿ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å°è¯•æ‰¾å‡ºè¿™ä¸‰ä¸ªç‚¹çš„æœ€ä½³æ‹Ÿåˆç›´çº¿ã€‚æˆ‘ä»¬å‡è®¾è‡ªå·±æ˜¯è®¡ç®—æœºï¼Œå› æ­¤ä¸èƒ½ç›´æ¥ç”¨è§†è§‰æ¥åˆ¤æ–­ã€‚æˆ‘ä»¬éšæœºåœ°ç”»ä¸€æ¡ç›´çº¿ï¼Œæ£€æŸ¥è¿™æ¡ç›´çº¿çš„æ•ˆæœå¦‚ä½•ï¼Œä¸ºæ­¤æˆ‘ä»¬éœ€è¦è®¡ç®—è¯¯å·®ã€‚æˆ‘ä»¬å°†æ£€æŸ¥è¿™ä¸‰ä¸ªç‚¹ä¸æ‹Ÿåˆç›´çº¿çš„è·ç¦»ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸‰ä¸ªè·ç¦»ä¹‹å’Œï¼Œç§°ä¸ºè¯¯å·®ã€‚ç°åœ¨å››å¤„ç§»åŠ¨è¿™æ¡çº¿ï¼Œçœ‹æ˜¯å¦èƒ½å‡å°è¯¯å·®ã€‚ç§»åŠ¨åï¼Œå†æ¬¡è®¡ç®—è¯¯å·®ã€‚å¦‚æœè¯¯å·®å˜å¤§ï¼Œåˆ™è¯´æ˜æ–¹å‘é”™è¯¯ã€‚å¦‚æœè¯¯å·®å˜å°ï¼Œåˆ™è¯´æ˜æ–¹å‘æ­£ç¡®ã€‚æˆ‘ä»¬å‘ç°è¯¯å·®å˜å°äº†ï¼Œå› æ­¤å†³å®šé‡‡ç”¨è¿™æ¬¡ç§»åŠ¨ã€‚å¦‚æœé‡å¤å‡ æ¬¡è¿™ä¸ªæ­¥éª¤ï¼Œæˆ‘ä»¬æ€»èƒ½ç»§ç»­å‡å°è¯¯å·®ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€æ¡æ‹Ÿåˆæ›²çº¿ä½œä¸ºå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆã€‚è¿™ç§æœ€å°åŒ–è¯¯å·®çš„é€šç”¨æ–¹æ³•å«åšæ¢¯åº¦ä¸‹é™ï¼ˆgradient descentï¼‰ã€‚
åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸å¸Œæœ›ä½¿ç”¨æ•°å€¼ä¸ºè´Ÿçš„è·ç¦»ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨æ•°æ®ç‚¹åˆ°æ‹Ÿåˆç›´çº¿çš„è·ç¦»çš„å¹³æ–¹ï¼Œè€Œä¸æ˜¯è·ç¦»æœ¬èº«ã€‚è¿™ç§æ–¹æ³•å«åšæœ€å°äºŒä¹˜æ³•ï¼ˆleast squaresï¼‰ã€‚
æˆ‘ä»¬å†æ¬¡å›åˆ°ç ç©†æœ—ç›å³°é¡¶ï¼Œå°è¯•æ‰¾å‡ºåˆ°è¾¾å±±åº•çš„ä¸‹é™è·¯å¾„ã€‚åœ¨è¿™ä¸ªèƒŒæ™¯é‡Œï¼Œæˆ‘ä»¬æ‰€å¤„çš„ä½ç½®è¶Šé«˜ï¼Œä»£è¡¨å½“å‰çš„è¯¯å·®è¶Šå¤§ï¼Œä¸‹é™é«˜åº¦å°±æ„å‘³ç€å‡å°è¯¯å·®ã€‚æˆ‘ä»¬è¯¥æ€ä¹ˆåšï¼Ÿæˆ‘ä»¬æŸ¥çœ‹å››å‘¨ï¼Œå¯»æ‰¾èƒ½ä¸‹é™æ›´å¤šé«˜åº¦çš„è·¯å¾„ï¼Œè¿™ç­‰ä»·äºå››å¤„ç§»åŠ¨æ‹Ÿåˆç›´çº¿æ¥æœ€å¤§ç¨‹åº¦å‡å°è¯¯å·®ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œè¿™ä¸ªæ–¹å‘ä¼¼ä¹å°±æ˜¯é«˜åº¦ä¸‹é™æœ€å¤§çš„æ–¹å‘ï¼Œæˆ‘ä»¬æœç€è¿™ä¸ªæ–¹å‘å‰è¿›ä¸€æ­¥ï¼Œè¿™ç­‰ä»·äºæ²¿ç€èƒ½å¤Ÿæœ€å¤§ç¨‹åº¦å‡å°è¯¯å·®çš„æ–¹å‘ç§»åŠ¨æ‹Ÿåˆæ›²çº¿ï¼Œå³ç§»åŠ¨ç›´çº¿è®©å®ƒæ›´åŠ æ¥è¿‘è¿™ä¸‰ä¸ªç‚¹ã€‚ç°åœ¨æˆ‘ä»¬å‡å°äº†è¯¯å·®ï¼Œä¹Ÿå°±æ˜¯æ›´åŠ é è¿‘äº†å±±åº•ã€‚ç„¶åæˆ‘ä»¬é‡å¤ä»¥ä¸Šçš„è¿‡ç¨‹ï¼ŒæŸ¥çœ‹å››å‘¨å¹¶åˆ¤æ–­èƒ½å¤Ÿæœ€å¤§ç¨‹åº¦ä¸‹é™çš„æ–¹å‘ã€‚æˆ–è€…ç­‰ä»·åœ°ï¼Œèƒ½å¤Ÿä½¿æ‹Ÿåˆç›´çº¿æ›´åŠ é è¿‘æ•°æ®ç‚¹çš„æ–¹å‘ã€‚ç„¶åæˆ‘ä»¬ä¸æ–­åœ°é‡å¤æ­¤è¿‡ç¨‹ï¼Œå¯»æ‰¾é«˜åº¦ä¸‹é™æœ€å¤§çš„æ–¹å‘ï¼Œæˆ–è€…ä½¿æ‹Ÿåˆç›´çº¿æ›´åŠ é è¿‘æ•°æ®ç‚¹çš„æ–¹å‘ï¼Œä¸æ–­å‡å°è¯¯å·®ç›´åˆ°å…¶è¾¾åˆ°æœ€å°å€¼ï¼Œä¹Ÿå°±å¾—åˆ°äº†æœ€ä½³æ‹Ÿåˆç›´çº¿ã€‚
é€»è¾‘å›å½’å‡è®¾æˆ‘ä»¬æ˜¯ä¸€æ‰€å¤§å­¦çš„æ‹›ç”ŸåŠå…¬å®¤ï¼Œæ­£åœ¨å†³å®šå½•å–å“ªäº›å­¦ç”Ÿã€‚æ ¹æ®å¦‚ä¸‹ä¸¤æ¡ä¿¡æ¯ï¼Œæˆ‘ä»¬å°†å½•å–æˆ–æ‹’ç»ä»–ä»¬ã€‚å½•å–è€ƒè¯•æˆç»©ï¼Œå’Œä»–ä»¬çš„è¯¾ç¨‹æˆç»©ã€‚ä¾‹å¦‚ï¼Œå­¦ç”Ÿ1è€ƒè¯•æˆç»©ä¸º9ï¼Œè¯¾ç¨‹æˆç»©ä¸º8ï¼Œè¿™åå­¦ç”Ÿæœ€ç»ˆè¢«å½•å–äº†ã€‚è¿˜æœ‰ä¸€åå­¦ç”Ÿ2ï¼Œè€ƒè¯•æˆç»©ä¸º3ï¼Œè¯¾ç¨‹æˆç»©ä¸º4ï¼Œæœ€ç»ˆæ²¡æœ‰è¢«å½•å–ã€‚ç°åœ¨æœ‰ä¸€ä½æ–°æäº¤ç”³è¯·çš„å­¦ç”Ÿ3ï¼Œè€ƒè¯•æˆç»©ä¸º7ï¼Œè¯¾ç¨‹æˆç»©ä¸º6ï¼Œæˆ‘ä»¬æ˜¯å¦åº”è¯¥å½•å–ä»–ï¼Ÿä¸ºæ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆæŠŠä»–ä»¬çš„æ•°æ®ç”»åœ¨åæ ‡ç³»ä¸­ï¼Œxè½´ä»£è¡¨è€ƒè¯•æˆç»©ï¼Œyè½´ä»£è¡¨è¯¾ç¨‹æˆç»©ã€‚ä¸ºå†³å®šæ˜¯å¦å½•å–å­¦ç”Ÿ3ï¼Œæˆ‘ä»¬å°è¯•åœ¨å½•å–æ•°æ®ä¸­å¯»æ‰¾è§„å¾‹ã€‚ä¸ºæ­¤æˆ‘ä»¬æ£€æŸ¥æ›¾ç»ç”³è¯·è¿‡çš„å­¦ç”Ÿï¼Œè¢«å½•å–æˆ–æ‹’ç»çš„æ•°æ®ã€‚å½•å–çš„ç‚¹ä»£è¡¨è¿‡å»è¢«å½•å–çš„å­¦ç”Ÿï¼Œçº¢è‰²çš„ç‚¹ä»£è¡¨æ›¾ç»è¢«æ‹’ç»çš„å­¦ç”Ÿã€‚æˆ‘ä»¬æ¥ä»”ç»†æŸ¥çœ‹æ•°æ®ï¼Œçº¢è‰²çš„ç‚¹å’Œç»¿è‰²çš„ç‚¹ä¼¼ä¹å¯ä»¥è¢«ä¸€æ¡çº¿å¾ˆå¥½åœ°åˆ†å¼€ã€‚åœ¨è¿™æ¡çº¿ä¸Šæ–¹çš„å¤§éƒ¨åˆ†ç‚¹æ˜¯ç»¿è‰²çš„ï¼Œè€Œä¸‹æ–¹çš„å¤§éƒ¨åˆ†ç‚¹æ˜¯çº¢è‰²çš„ï¼Œä½†æœ‰äº›æ•°æ®ç‚¹ä¾‹å¤–ã€‚æˆ‘ä»¬ä»¥è¿™æ¡çº¿ä¸ºæ¨¡å‹ï¼Œæ¯å½“æ¥åˆ°æ–°çš„å­¦ç”Ÿç”³è¯·ï¼Œæˆ‘ä»¬æŠŠä»–ä»¬çš„æˆç»©ç”»åœ¨åæ ‡å›¾ä¸Šã€‚å¦‚æœæ•°æ®ç‚¹æ˜¯åœ¨è¿™æ¡çº¿çš„ä¸Šæ–¹ï¼Œé‚£ä¹ˆé¢„æµ‹ä»–ä»¬ä¼šè¢«å½•å–ï¼›å¦‚æœæ•°æ®ç‚¹åœ¨ä¸‹æ–¹ï¼Œåˆ™é¢„æµ‹ä»–ä»¬ä¼šè¢«æ‹’ç»ã€‚å­¦ç”Ÿ3çš„æ•°æ®åæ ‡ä¸º(7,6)ï¼Œä½äºç›´çº¿ä¸Šæ–¹ï¼Œå› æ­¤æˆ‘ä»¬åˆ¤æ–­è¿™ä¸ªå­¦ç”Ÿä¼šè¢«å½•å–ã€‚è¿™ç§æ–¹æ³•å«åšé€»è¾‘å›å½’ï¼ˆLogistic Regressionï¼‰ã€‚
ç°åœ¨çš„é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬å¦‚ä½•æ‰¾åˆ°è¿™æ¡èƒ½æœ€å¥½åœ°åˆ†å‰²æ•°æ®ç‚¹çš„çº¿ï¼Ÿæ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå¦‚ä½•ç”»å‡ºä¸€æ¡çº¿ä»¥æœ€å¥½åœ°åŒºåˆ†ç»¿è‰²æ•°æ®ç‚¹å’Œçº¢è‰²æ•°æ®ç‚¹ï¼Ÿè®¡ç®—æœºæ— æ³•ä¾é è§†è§‰æ¥ç”»å‡ºè¿™æ¡çº¿ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»ç”»ä¸€æ¡åƒè¿™æ ·éšæœºçš„çº¿å¼€å§‹ã€‚æœ‰äº†è¿™æ¡çº¿ï¼Œæˆ‘ä»¬å†éšæœºåœ°è§„å®šï¼Œä½äºçº¿ä¸Šæ–¹çš„ç‚¹ä¸ºç»¿è‰²ï¼Œä¸‹æ–¹çš„ç‚¹ä¸ºçº¢è‰²ã€‚ç„¶åå°±åƒçº¿æ€§é‚£æ ·ï¼Œæˆ‘ä»¬å…ˆè®¡ç®—è¿™æ¡çº¿çš„æ•ˆæœã€‚ä¸€ä¸ªç®€å•çš„æµ‹é‡è¯¯å·®çš„æ ‡å‡†æ˜¯å‡ºé”™çš„æ•°ç›®ï¼Œå³è¢«é”™è¯¯å½’ç±»çš„æ•°æ®ç‚¹çš„æ•°é‡ã€‚è¿™æ¡çº¿é”™åˆ¤äº†ä¸¤ä¸ªç‚¹ï¼Œä¸€ä¸ªçº¢è‰²çš„ç‚¹å’Œä¸€ä¸ªç»¿è‰²çš„ç‚¹ã€‚ä»ç„¶å’Œçº¿æ€§å›å½’ç±»ä¼¼ï¼Œæˆ‘ä»¬ç§»åŠ¨è¿™æ¡çº¿ï¼Œé€šè¿‡æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œæœ€å°åŒ–é”™è¯¯æ•°é‡ã€‚å®é™…ä½¿ç”¨ä¸­ï¼Œä¸ºäº†æ­£ç¡®åœ°ä½¿ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œæˆ‘ä»¬éœ€è¦æœ€å°åŒ–çš„å¹¶ä¸æ˜¯é”™è¯¯æ•°ç›®ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œèƒ½ä»£è¡¨é”™è¯¯æ•°ç›®çš„å¯¹æ•°æŸå¤±å‡½æ•°ï¼ˆlog loss functionï¼‰ã€‚
æœ€åˆ6ä¸ªæ•°æ®ï¼Œæœ‰4ä¸ªè¢«æ­£ç¡®åˆ†ç±»ï¼Œå®ƒä»¬æ˜¯ä¸¤ä¸ªçº¢è‰²å’Œä¸¤ä¸ªç»¿è‰²ï¼›2ä¸ªè¢«é”™è¯¯åˆ†ç±»ï¼Œå®ƒä»¬æ˜¯ä¸€ä¸ªçº¢è‰²å’Œä¸€ä¸ªç»¿è‰²ã€‚è¯¯å·®å‡½æ•°ä¼šå¯¹è¿™ä¸¤ä¸ªè¢«é”™è¯¯å½’ç±»çš„æ•°æ®ç‚¹æ–½åŠ å¾ˆå¤§çš„æƒ©ç½šï¼Œè€Œå¯¹å››ä¸ªè¢«æ­£ç¡®åˆ†ç±»çš„æ•°æ®ç‚¹æ–½åŠ å¾ˆå°çš„æƒ©ç½šã€‚ç°åœ¨å››å¤„ç§»åŠ¨è¿™æ¡çº¿ä»¥å°†è¯¯å·®é™åˆ°æœ€å°ã€‚ç§»åŠ¨ç›´çº¿åï¼Œå¯ä»¥çœ‹åˆ°æœ‰äº›è¯¯å·®å‡å°äº†ï¼Œæœ‰äº›å¢åŠ äº†ï¼Œä½†æ€»ä½“ä¸Šï¼Œè¯¯å·®ä¹‹å’Œå˜å°äº†ï¼Œå› ä¸ºæˆ‘ä»¬æ­£ç¡®å½’ç±»äº†ä¹‹å‰è¢«é”™åˆ¤çš„ä¸¤ä¸ªç‚¹ã€‚è¿™ä¸ªè¿‡ç¨‹çš„æ„å›¾æ˜¯ï¼Œæ‰¾åˆ°èƒ½æœ€å°åŒ–è¯¯å·®å‡½æ•°çš„æœ€ä½³æ‹Ÿåˆæ›²çº¿ã€‚æˆ‘ä»¬å¦‚ä½•æœ€å°åŒ–è¯¯å·®å‡½æ•°ï¼Ÿä¾æ—§æ˜¯ä½¿ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•ã€‚æˆ‘ä»¬å†æ¬¡å›åˆ°ç ç©†æœ—ç›å³°ï¼Œæˆ‘ä»¬æ‰€åœ¨çš„ä½ç½®å¾ˆé«˜ï¼Œå› æ­¤æ­¤æ—¶æœ‰å¾ˆå¤§çš„è¯¯å·®ï¼Œæˆ‘ä»¬æ¢ç´¢å››å‘¨å¯»æ‰¾ä¸‹é™æœ€å¤§çš„æ–¹å‘ã€‚æˆ–è€…ç­‰ä»·çš„ï¼Œå¯»æ‰¾èƒ½é€šè¿‡ç§»åŠ¨ç›´çº¿æœ€å¤§ç¨‹åº¦å‡å°è¯¯å·®çš„æ–¹å‘ã€‚æˆ‘ä»¬å†³å®šæ²¿ç€è¿™ä¸ªæ–¹å‘å‰è¿›ä¸€æ­¥ï¼Œå‡å°äº†å‡½æ•°è¯¯å·®ã€‚é‡å¤è¿™ä¸ªæ­¥éª¤ï¼Œæ²¿ç€æœ€å¤§ç¨‹åº¦å‡å°è¯¯å·®çš„æ–¹å‘å‰è¿›ä¸€æ­¥ã€‚åˆ°è¾¾äº†å±±åº•ï¼Œåˆ™è¯´æ˜æˆ‘ä»¬å·²ç»å°†è¯¯å·®å‡å°‘åˆ°äº†æœ€å°å€¼ã€‚
æ”¯æŒå‘é‡æœºSVMæˆ‘ä»¬æ›´è¿›ä¸€æ­¥å­¦ä¹ æŠŠæ•°æ®ä¸€åˆ†ä¸ºäºŒçš„è‰ºæœ¯ã€‚æˆ‘ä»¬çœ‹è¿™6ä¸ªç‚¹ï¼Œä¼¼ä¹æœ‰å¾ˆå¤šæ¡çº¿å¯ä»¥åˆ†å¼€å®ƒä»¬ã€‚ä¾‹å¦‚ï¼Œè¿™æ¡è“è‰²çš„å’Œé»„è‰²çš„ã€‚è¯·é—®ï¼Œé‚£æ¡çº¿å¯ä»¥æŠŠæ•°æ®æ›´å¥½åœ°åˆ†å¼€ï¼Ÿçœ‹è¿™æ¡è“è‰²çš„çº¿ï¼Œä¼¼ä¹å®ƒæ˜¯å¤±è´¥çš„ï¼Œå®ƒå¤ªé è¿‘è¿™ä¸¤ä¸ªç‚¹äº†ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦æœ€å°åŒ–è¯¯å·®ï¼Œå®ƒä¼šè¯¯åˆ†åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªç‚¹ã€‚è¿™æ¡é»„çº¿ä¼¼ä¹æ˜¯ä¸€ä¸ªæ›´å¥½çš„åˆ’åˆ†ï¼Œè€ƒè™‘åˆ°å®ƒèƒ½å¤Ÿæ¥è‡ªäºæ‰€æœ‰çš„ç‚¹è¿›è¡Œåˆ’åˆ†ã€‚æ‰€ä»¥ï¼Œä¼¼ä¹æœ€å¥½çš„çº¿æ˜¯è¿™æ¡é»„è‰²çš„ã€‚ç°åœ¨çš„é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬å¦‚ä½•èƒ½å¤Ÿæ‰¾åˆ°è¿™æ¡é»„è‰²çš„çº¿ï¼Ÿåœ¨æ‰¾è¿™æ¡é»„è‰²çš„çº¿ä¹‹å‰ï¼Œè®©æˆ‘ä»¬äº‹å®ä¸Šæ¥æ‰¾ä¸€ä¸ªåº¦é‡æ–¹å¼ï¼Œå®ƒå¯ä»¥å‘Šè¯‰æˆ‘ä»¬é»„è‰²çš„çº¿æ›´å¥½ã€‚é‚£ä¹ˆï¼Œç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯è§‚å¯Ÿè¿™äº›è¿œç¦»è¾¹ç•Œçš„ç‚¹ï¼Œå®ƒä»¬å¯¹äºæˆ‘ä»¬çš„å†³å®šå¹¶ä¸é‡è¦ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬å¿˜æ‰è¿™äº›ç‚¹ï¼Œåªè€ƒè™‘é‚£äº›ç¦»è¾¹ç•Œè¿‘çš„ç‚¹ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬çœŸæ­£è¦å…³æ³¨çš„æ˜¯ç‚¹åˆ°ä¸¤æ¡ç›´çº¿çš„è·ç¦»ã€‚ä»€ä¹ˆè®©æˆ‘ä»¬çŸ¥é“äº†é»„çš„çº¿æ›´å¥½å‘¢ï¼Ÿè¿™æ¡é»„è‰²çš„çº¿æ›´å¥½ï¼Œæ˜¯å› ä¸ºå®ƒè·ç¦»è¿™äº›ç‚¹æ›´è¿œã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬è§‚å¯Ÿè¿™å››ä¸ªç‚¹çš„è·ç¦»ï¼Œæœ€å°çš„è·ç¦»å°±æ˜¯æˆ‘ä»¬åº¦é‡ç‚¹ç¦»ç›´çº¿åˆ°åº•æœ‰å¤šè¿‘ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¿…é¡»è¦è€ƒè™‘çš„ï¼Œå°±æ˜¯è¿™å››ä¸ªè·ç¦»çš„æœ€å°å€¼ï¼Œé‚£æ˜¯æˆ‘ä»¬åº¦é‡çº¿ç¦»ç‚¹åˆ°åº•æœ‰å¤šè¿‘çš„æ–¹å¼ã€‚æˆ‘ä»¬ç§°è¿™ä¸ªåº¦é‡ä¸ºè·ç¦»ã€‚
æ‰€ä»¥æˆ‘ä»¬å¾—å‡ºç»“è®ºï¼Œé»„è‰²çš„çº¿æ›´å¥½ã€‚å› ä¸ºåœ¨é»„çº¿ä¸­ï¼Œè¿™äº›è·ç¦»ä¸­æœ€å°çš„è·ç¦»ï¼Œæ¯”è“çº¿ä¸­æœ€å°çš„è·ç¦»å¤§ã€‚è¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦å¤„ç†çš„å‡½æ•°ï¼Œè¿™å››ä¸ªè·ç¦»ä¸­çš„æœ€å°å€¼ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä½¿è¿™ä¸ªæœ€å°å€¼å°½å¯èƒ½çš„å¤§ï¼Œæ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬éœ€è¦æœ€å¤§åŒ–è¿™ä¸ªè·ç¦»ã€‚æˆ‘ä»¬èƒ½å¤Ÿæ€ä¹ˆæœ€å¤§åŒ–è¿™ä¸ªè·ç¦»å‘¢ï¼Ÿæ²¡é”™ï¼Œæ¢¯åº¦ä¸‹é™ã€‚è¿™é‡Œä¹Ÿæœ‰å…¶ä»–æ–¹æ³•èƒ½å¤Ÿä½¿ç”¨ï¼Œä¹‹åçš„è¯¾ä¸Šä¼šå­¦åˆ°ã€‚è¿™ä¸ªæ–¹æ³•å«åšæ”¯æŒå‘é‡æœºï¼Œæ”¯æŒï¼Œæ˜¯å› ä¸ºé è¿‘è¾¹ç•Œçš„ç‚¹è¢«ç§°ä¸ºæ”¯æ’‘ã€‚
ç¥ç»ç½‘ç»œæˆ‘ä»¬æ›´åŠ ä»”ç»†åœ°è§‚å¯Ÿè¿™ä¸ªæ¨¡å‹ï¼Œè¿™ä¸ªæ¨¡å‹æ¥å—æˆ–è€…æ‹’ç»å­¦ç”Ÿã€‚æ¯”å¦‚æœ‰ä¸€ä¸ªå­¦ç”Ÿ4ï¼Œä»–åœ¨è¿™æ¬¡è€ƒè¯•æˆç»©ä¸­å¾—åˆ°äº†9åˆ†ï¼Œä½†ä»–çš„è¯¾ç¨‹æˆç»©æ˜¯1ã€‚æ ¹æ®æˆ‘ä»¬çš„æ¨¡å‹ï¼Œè¿™ä¸ªå­¦ç”Ÿåº”è¯¥è¢«æ¥å—ã€‚å› ä¸ºä»–åœ¨è¿™æ¡çº¿çš„ä¸Šé¢ï¼Œä½†æ˜¯è¿™ä¼¼ä¹ä¸å¯¹ï¼Œå› ä¸ºè¿™ä¸ªå­¦ç”Ÿæœ‰ä¸€ä¸ªéå¸¸ä½çš„è¯¾ç¨‹æˆç»©ï¼Œä¸åº”è¯¥è¢«æ¥å—ã€‚æ‰€ä»¥æƒ³è¦ç”¨ä¸€æ¡ç›´çº¿æ¥åŒºåˆ†è¿™é‡Œçš„æ•°æ®ï¼Œå·²ç»ä¸åˆé€‚äº†ã€‚ä¹Ÿè®¸çœŸå®çš„æ•°æ®ï¼Œåº”è¯¥åƒé‚£äº›ä½çš„è€ƒè¯•æˆç»©æˆ–è€…ä½çš„è¯¾ç¨‹æˆç»©çš„éƒ½ä¸åº”è¯¥è¢«æ¥å—ï¼Œæ‰€ä»¥è¿™æ¡çº¿å·²ç»ä¸èƒ½åˆ†ç¦»è¿™äº›ç‚¹äº†ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿä¹Ÿè®¸æ˜¯ä¸€ä¸ªåœ†ï¼Œä¹Ÿè®¸æ˜¯ä¸¤æ¡çº¿ã€‚
è®©æˆ‘ä»¬è¯•ä¸€ä¸‹ä¸¤æ¡çº¿ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ€ä¹ˆæ‰¾åˆ°è¿™ä¸¤æ¡çº¿å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡æ¢¯åº¦ä¸‹é™æ¥æœ€å°åŒ–ä¸€ä¸ªå’Œä¹‹å‰ç›¸ä¼¼çš„å¯¹æ•°æŸå¤±å‡½æ•°ã€‚è¿™è¢«ç§°ä¸ºç¥ç»ç½‘ç»œï¼ˆneural networkï¼‰ã€‚
ç°åœ¨é—®é¢˜æ˜¯ï¼Œä¸ºä»€ä¹ˆè¿™è¢«ç§°ä¸ºç¥ç»ç½‘ç»œï¼Ÿæ¯”å¦‚æˆ‘ä»¬åœ¨ä¸€å°éå¸¸æ…¢çš„ç”µè„‘ä¸Šå·¥ä½œï¼Œä¸€ä¸ªæ—¶é—´åªèƒ½å¤„ç†ä¸€ä»¶äº‹ï¼Œè¯·é—®è¿™ä¸ªåŒºåŸŸçš„ç‚¹è¢«ä¸¤æ¡çº¿åŒºåˆ†å¼€äº†å—ï¼Ÿæˆ‘ä»¬å¿…é¡»æŠŠå®ƒåˆ†æˆä¸¤ä¸ªå•ç‹¬çš„é—®é¢˜ã€‚ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œè¿™ä¸ªç‚¹åœ¨è“çº¿ä¹‹ä¸Šå—ï¼Ÿç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼Œè¿™ä¸ªç‚¹åœ¨é»„çº¿ä¹‹ä¸Šå—ï¼Ÿç¬¬ä¸‰ä¸ªé—®é¢˜æ˜¯ï¼Œç¬¬ä¸€ä¸ªé—®é¢˜å’Œç¬¬äºŒä¸ªé—®é¢˜çš„ç­”æ¡ˆéƒ½æ˜¯â€œyesâ€å—ï¼Ÿå‡è®¾æˆ‘ä»¬æŠŠ(1,8)ä½œä¸ºè¾“å…¥ï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹ç»“æœï¼šæˆ‘ä»¬æŠŠè¿™ä¸‰ä¸ªé—®é¢˜åˆæˆåˆ°ä¸€èµ·ï¼Œå°±å¾—åˆ°äº†ä¸€ä¸ªç¥ç»ç½‘ç»œã€‚æŠŠâ€œandâ€èŠ‚ç‚¹çœ‹æˆå’Œå‰ä¸¤ä¸ªèŠ‚ç‚¹ç›¸åŒï¼Œå¯ä»¥å¾—åˆ°æœ€ç»ˆç¥ç»ç½‘ç»œçš„æ ·å­ã€‚å·¦è¾¹ï¼Œæˆ‘ä»¬å«åšè¾“å…¥å±‚ï¼›ä¸­é—´ï¼Œæˆ‘ä»¬å«åšéšè—å±‚ï¼Œä¼šå¸®åŠ©æˆ‘ä»¬è®¡ç®—ï¼›å³è¾¹ï¼Œæˆ‘ä»¬å«åšè¾“å‡ºå±‚ã€‚
è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç¥ç»ç½‘ç»œï¼Œä½†æ˜¯èƒ½å¤Ÿçœ‹å‡ºå¦‚ä½•åœ¨ä¸­é—´å¢åŠ æ›´å¤šçš„èŠ‚ç‚¹æˆ–å¢åŠ æ›´å¤šçš„å±‚ï¼Œå¸®åŠ©æˆ‘ä»¬æ˜ å°„æ›´åŠ å¤æ‚çš„é—®é¢˜ï¼Œç”šè‡³åœ¨ä¸‰ç»´ç©ºé—´æˆ–è€…æ›´é«˜ç»´çš„ç©ºé—´ã€‚ç¥ç»ç½‘ç»œæ˜¯éå¸¸å¼ºçš„æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œå…¶è¢«ä½¿ç”¨åœ¨å¤§å¤šæ•°äººå·¥æ™ºèƒ½é¡¹ç›®ä¸­ï¼Œæ¯”å¦‚é¢éƒ¨è¯†åˆ«ã€è¯­éŸ³è¯†åˆ«ã€ä¸‹æ£‹å’Œé©¾é©¶ã€‚æˆ‘ä»¬ç§°å®ƒä¸ºç¥ç»ç½‘ç»œæ˜¯å› ä¸ºè¿™äº›èŠ‚ç‚¹åƒå¤§è„‘é‡Œçš„ç¥ç»å…ƒï¼Œç¥ç»å…ƒä¼šæŠŠè¾“å…¥å’Œå…¶ä»–ç¥ç»å…ƒçš„è¾“å‡ºä»¥ä¸€ç§ç¥ç»è„‰å†²çš„å½¢å¼ï¼Œå†³å®šæ˜¯å¦æ¿€æ´»è¿™ä¸ªç¥ç»è„‰å†²ã€‚åœ¨æˆ‘ä»¬çš„æƒ…å†µä¸­ï¼Œç¥ç»å…ƒæŠŠè¾“å…¥å’Œå…¶ä»–ç¥ç»å…ƒçš„è¾“å‡ºä»¥æ•°å­—çš„å½¢å¼ï¼Œå†³å®šè¿”å›ä¸€ä¸ª0æˆ–1ã€‚
æ ¸å‡½æ•°ç°åœ¨æˆ‘ä»¬å­¦ä¹ å¦å¤–ä¸€ç§éå¸¸å¼ºå¤§çš„æ–¹æ³•ï¼Œæ¥åˆ†å¼€å¹³é¢ä¸Šçš„ç‚¹ã€‚å‡è®¾æˆ‘ä»¬æœ‰4ä¸ªç‚¹åƒè¿™æ ·æ’åˆ—ï¼Œæˆ‘ä»¬æƒ³è¦åˆ†å¼€å®ƒä»¬ï¼Œä¼¼ä¹ä¸€æ¡çº¿ä¸èƒ½å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œå› ä¸ºå®ƒä»¬å·²ç»åœ¨ä¸€æ¡çº¿ä¸Šé¢ã€‚æˆ‘ä»¬è¦è·³å‡ºæ€ç»´å®šå¼ï¼Œä¸€ä¸ªæ–¹å¼æ˜¯ç”¨ä¸€ä¸ªæ›²çº¿æ¥åˆ†å¼€å®ƒä»¬ï¼Œå¦å¤–çš„æ–¹å¼äº‹å®ä¸Šæ˜¯åœ¨å¹³é¢å¤–è€ƒè™‘ã€‚æƒ³è±¡ä¸€ä¸‹è¿™äº›ç‚¹æ­£åœ¨ä¸€ä¸ªä¸‰ç»´çš„ç©ºé—´ä¸­ï¼Œæœ‰4ä¸ªç‚¹åœ¨å¹³é¢ä¸Šï¼Œå¯¹äºç¬¬ä¸‰ä¸ªç»´åº¦ï¼Œæˆ‘ä»¬å¢åŠ ä¸€ä¸ªé¢å¤–çš„zè½´ã€‚å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿæ‰¾åˆ°ä¸€ä¸ªæ–¹å¼æ¥æå‡è¿™ä¸¤ä¸ªç»¿è‰²çš„ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±èƒ½å¤Ÿç”¨å¹³é¢åˆ†å¼€å®ƒä»¬ã€‚é‚£ä¹ˆå“ªä¸€ä¸ªæ˜¯æ›´å¥½çš„è§£å†³åŠæ³•ï¼Ÿåœ¨ä¸€ä¸ªå¹³é¢é‡Œç”¨ä¸€æ¡æ›²çº¿åˆ†å¼€è¿™äº›ç‚¹ï¼Œè¿˜æ˜¯åœ¨ç©ºé—´é‡Œç”¨å¹³é¢åˆ†å¼€å®ƒä»¬ï¼Ÿå®é™…ä¸Šï¼Œè¿™ä¸¤ä¸ªå…¶å®æ˜¯ç›¸åŒçš„åŠæ³•ã€‚è¿™ç§æ–¹æ³•è¢«ç§°ä¸ºæ ¸æ–¹æ³•ï¼ˆkernel methodï¼‰ï¼Œåœ¨æ”¯æŒå‘é‡æœºä¸­å®ƒè¢«å¾ˆå¥½çš„ä½¿ç”¨ã€‚
æˆ‘ä»¬æ¥ä¸‹æ¥å­¦ä¹ æ›²çº¿åŠæ³•çš„æ›´å¤šç»†èŠ‚ã€‚é¦–å…ˆæˆ‘ä»¬æŠŠåæ ‡æ”¾åœ¨ç‚¹ä¸Šï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸€ç§åŠæ³•ï¼Œèƒ½å¤Ÿä»çº¢è‰²çš„ç‚¹ä¸­åŒºåˆ†å‡ºç»¿è‰²çš„ç‚¹ã€‚å¦‚æœç‚¹çš„åæ ‡æ˜¯(x,y)ï¼Œä¹Ÿè®¸æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–¹ç¨‹ï¼Œå˜é‡æ˜¯xå’Œyã€‚å¯¹äºç»¿è‰²çš„ç‚¹ï¼Œç»™æˆ‘ä»¬ä¸€ä¸ªå¤§çš„å€¼ï¼›å¯¹äºçº¢è‰²çš„ç‚¹ï¼Œç»™æˆ‘ä»¬ä¸€ä¸ªå°çš„å€¼ã€‚æˆ–è€…æ˜¯ç›¸åçš„æƒ…å†µã€‚é‚£ä¹ˆä¸‹é¢å“ªä¸ªæ–¹ç¨‹èƒ½å¤Ÿè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿè¿™ä¸æ˜¯ä¸€ä¸ªç®€å•çš„é—®é¢˜ï¼Œæˆ‘ä»¬å…ˆæ¥åšä¸€ä¸ªè¡¨æ ¼ã€‚è¿™äº›ç­‰å¼ä¸­ï¼Œå“ªä¸€ä¸ªèƒ½å¤Ÿåˆ†ç¦»ç»¿è‰²çš„ç‚¹å’Œçº¢è‰²çš„ç‚¹ï¼Ÿx+yå¯¹äºæ¯ä¸ªç‚¹éƒ½æ˜¯ç»“æœ3ï¼Œæ— æ³•åˆ†ç¦»ï¼›xçš„å¹³æ–¹ï¼Œå¯¹äºçº¢è‰²ç‚¹çš„ç»“æœæœ‰å¤§æœ‰å°ï¼Œç»¿è‰²ç‚¹çš„ç»“æœä¹Ÿæœ‰å¤§æœ‰å°ï¼Œæ— æ³•åˆ†ç¦»ï¼›xyå¯¹äºçº¢è‰²ç‚¹ç»“æœä¸º0ï¼Œç»¿è‰²çš„ç‚¹ç»“æœä¸º2ï¼Œå¯ä»¥åˆ†ç¦»ã€‚å› ä¸ºè¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œçº¢è‰²çš„ç‚¹ç»™æˆ‘ä»¬ä¸€ä¸ªå€¼ï¼Œç»¿è‰²çš„ç‚¹åˆç»™æˆ‘ä»¬å¦å¤–ä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªå‡½æ•°èƒ½å¤ŸåŒºåˆ†å¼€çº¢è‰²å’Œç»¿è‰²ã€‚è¿™é‡Œæˆ‘ä»¬æœ‰4ä¸ªç‚¹ï¼Œåæ ‡æ˜¯(x,y)ï¼Œè¿˜æœ‰ä¸€ä¸ªåæ ‡çš„ä¹˜ç§¯xyã€‚å¯¹äºçº¢è‰²çš„ç‚¹ï¼Œæˆ‘ä»¬æœ‰ä¹˜ç§¯xy=0ï¼›å¯¹äºç»¿è‰²çš„ç‚¹ï¼Œæˆ‘ä»¬æœ‰ä¹˜ç§¯xy=2ã€‚ä»€ä¹ˆèƒ½å¤Ÿåˆ†å¼€0å’Œ2å‘¢ï¼Ÿé‚£å°±æ˜¯1ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨å¼å­xy=1å°±èƒ½åˆ†å¼€å®ƒä»¬ã€‚é‚£ä¹ˆï¼Œxy=1æ˜¯ä»€ä¹ˆï¼Ÿè¿™ä¸ªå’Œy=1/xæ˜¯ä¸€æ ·çš„ã€‚y=1/xçš„å›¾ï¼Œå°±æ˜¯ä¸Šé¢çš„åŒæ›²çº¿ã€‚
æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹åœ¨ä¸‰ç»´ç©ºé—´ä¸­å‘ç”Ÿäº†ä»€ä¹ˆã€‚æˆ‘ä»¬æœ‰4ä¸ªç‚¹ï¼Œæœ‰ä¸€ä¸ªé¢å¤–çš„zè½´ï¼ˆç”¨äºè¡¨ç¤ºé«˜åº¦ï¼‰ã€‚æˆ‘ä»¬æŠŠxyåŠ å…¥æˆ‘ä»¬çš„æ ¸å¿ƒéœ€æ±‚ä¸­ï¼Œæ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªäºŒç»´åˆ°ä¸‰ç»´çš„æ˜ å°„ï¼ŒæŠŠå¹³é¢ä¸Šåæ ‡æ˜¯(x,y)çš„ç‚¹æ˜ å°„åˆ°äº†ç©ºé—´ä¸­ï¼Œåæ ‡ä¸º(x,y,xy)ã€‚æ‰€ä»¥ï¼Œä»¥ä¸€ä¸ªä¸åŒçš„æ–¹å¼ï¼Œå®ƒä»ç„¶èƒ½å¤Ÿåˆ†ç¦»è¿™äº›ç‚¹ï¼Œå› ä¸ºå®ƒæŠŠç»¿è‰²çš„ç‚¹å‡é«˜åˆ°äº†2ï¼ŒæŠŠçº¢è‰²çš„ç‚¹ç•™åœ¨ä¸‹é¢ã€‚ç°åœ¨ä»€ä¹ˆå¯ä»¥åŒºåˆ†è¿™äº›ç‚¹å‘¢ï¼Ÿä¸€ä¸ªå¹³é¢ã€‚è¿™å°±æ˜¯åœ¨ä¸‰ç»´ç©ºé—´ä¸­å¯è§†åŒ–æ ¸æ–¹æ³•çš„ä¸€ç§æ–¹å¼ã€‚
Kå‡å€¼èšç±»å‡è®¾æˆ‘ä»¬æœ‰ä¸€äº›æŠ«è¨åº—ï¼Œæˆ‘ä»¬æƒ³æŠŠä»–ä»¬ä¸­çš„ä¸‰ä¸ªæ”¾åˆ°è¿™ä¸ªåŸå¸‚é‡Œã€‚ç ”ç©¶å‘ç°åƒæŠ«è¨çš„äººå¤§éƒ½ä½åœ¨è¿™äº›åœ°æ–¹ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å“ªé‡Œæ˜¯æ”¾ç½®ä»–ä»¬æœ€ä¼˜çš„åœ°æ–¹ã€‚è¿™äº›æˆ¿å­èƒ½å¤Ÿå¾ˆå¥½åœ°åˆ†æˆä¸‰ç»„ï¼Œçº¢è‰²ã€è“è‰²å’Œé»„è‰²ã€‚åœ¨è¿™ä¸‰ä¸ªç»„é‡Œæ¯ä¸ªæ”¾ä¸€ä¸ªæŠ«è¨åº—ä¼¼ä¹è¡Œå¾—é€šï¼Œä½†æ˜¯ç”µè„‘å¹¶ä¸çŸ¥é“æ€ä¹ˆåšè¿™ä¸ªï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç®—æ³•æ¥åšè¿™ä»¶äº‹ã€‚æˆ‘ä»¬éšæœºé€‰æ‹©ä¸‰ä¸ªåœ°æ–¹ä½œä¸ºæŠ«è¨åº—ï¼Œå®ƒä»¬åœ¨æ˜Ÿæ ‡çš„åœ°æ–¹ã€‚æ¯ä¸€ä¸ªæˆ¿å­éƒ½ä¼šå»ç¦»ä»–ä»¬æœ€è¿‘çš„æŠ«è¨åº—ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé»„è‰²æˆ¿å­ä¼šå»é»„è‰²çš„æŠ«è¨åº—ï¼Œè“è‰²æˆ¿å­ä¼šå»è“è‰²çš„æŠ«è¨åº—ï¼Œçº¢è‰²æˆ¿å­ä¼šå»çº¢è‰²çš„æŠ«è¨åº—ã€‚ä½†æ˜¯ç°åœ¨ï¼Œé»„è‰²æˆ¿å­ç¦»é»„è‰²æŠ«è¨åº—å¾ˆè¿œã€‚å¦‚æœç§»åŠ¨é»„è‰²æŠ«è¨åº—åˆ°å®ƒä»¬çš„é¡¾å®¢ä¸­å¿ƒï¼Œæ˜¯æœ‰æ„ä¹‰çš„ï¼Œå¯¹äºè“è‰²å’Œçº¢è‰²æŠ«è¨åº—ä¹Ÿä¸€æ ·ã€‚é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬ç§»åŠ¨æ¯ä¸€ä¸ªæŠ«è¨åº—åˆ°å®ƒä»¬çš„é¡¾å®¢ä¸­å¿ƒã€‚æ¯ä¸€æ¬¡ç§»åŠ¨æŠ«è¨åº—åï¼Œç¦»æˆ¿å­æœ€è¿‘çš„æŠ«è¨åº—éšä¹‹å‘ç”Ÿå˜åŒ–ï¼Œæˆ¿å­çš„é¢œè‰²å˜æˆæœ€è¿‘çš„æŠ«è¨åº—çš„é¢œè‰²ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æœ‰äº†ä¸€ä¸ªä¼˜åŒ–çš„æ–¹æ¡ˆã€‚è¿­ä»£è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬ä»éšæœºçš„è§£ï¼Œé€¼è¿‘äº†ç†æƒ³çš„è§£ï¼Œä¹Ÿå°±æ˜¯æŠŠæŠ«è¨åº—æ”¾åœ¨é¡¾å®¢ä½çš„æˆ¿å­çš„ä¸­å¿ƒã€‚è¿™ä¸ªç®—æ³•å«åšKå‡å€¼èšç±»ï¼ˆK-Means Clusteringï¼‰ã€‚å½“æˆ‘ä»¬çŸ¥é“èšç±»æ•°é‡çš„æ—¶å€™ï¼ŒKå‡å€¼èšç±»éå¸¸å®ç”¨ã€‚ç°åœ¨ç•™ä¸‹ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬ä¸çŸ¥é“èšç±»æ•°é‡ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ
å±‚æ¬¡èšç±»è¿™é‡Œæœ‰ä¸€ä¸ªæ–¹å¼ï¼Œè®©æˆ‘ä»¬ç»™æˆ¿å­åˆ†ç»„ï¼Œä¸éœ€è¦æå‰çŸ¥é“èšç±»çš„è¯¦ç»†æ•°é‡ã€‚æ¯”å¦‚æˆ¿å­è¢«æ’åˆ—æˆè¿™æ ·ï¼šå¦‚æœä¸¤ä¸ªæˆ¿å­å¾ˆè¿‘ï¼Œé‚£ä¹ˆå®ƒä»¬åº”è¯¥ç”±å…±åŒçš„æŠ«è¨åº—æœåŠ¡ã€‚æŒ‰ç…§è¿™ä¸ªç†å¿µï¼Œæˆ‘ä»¬æ¥åˆ†ç»„è¿™äº›æˆ¿å­ã€‚æŠŠæœ€è¿‘ä¸¤ä¸ªæˆ¿å­åˆ†åˆ°ä¸€ç»„ï¼Œé‡å¤è¿™ä¸ªæ­¥éª¤ï¼Œç›´åˆ°æœ€è¿‘çš„ä¸¤ä¸ªæˆ¿å­çš„è·ç¦»è¶…è¿‡æŸä¸ªç•Œé™ï¼Œè¿™ä¸ªç•Œé™å°†ä¼šæ§åˆ¶æˆ‘ä»¬æƒ³è¦è¿™äº›èšç±»åˆ†å¼€å¤šè¿œã€‚è¿™ä¸ªç®—æ³•å«åšåˆ†å±‚èšç±»ã€‚ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œå½“æˆ‘ä»¬ä¸çŸ¥é“æ•°ç›®ï¼Œä½†æ˜¯çŸ¥é“æƒ³è¦è¿™äº›èšç±»ç¦»å¾—å¤šè¿œçš„æ—¶å€™ï¼Œåˆ†å±‚èšç±»å¾ˆå®ç”¨ã€‚
åè®°æˆ‘ä»¬å­¦ä¹ äº†å¾ˆå¤šè¢«ç”¨åœ¨æœºå™¨å­¦ä¹ ä¸­çš„ä¸»è¦ç®—æ³•ï¼Œä½¿ç”¨çº¿æ€§å›å½’æ¥é¢„æµ‹æˆ¿å±‹ä»·æ ¼ï¼Œä½¿ç”¨æœ´ç´ è´å¶æ–¯æ¥æ£€æµ‹åƒåœ¾é‚®ä»¶ï¼Œä½¿ç”¨å†³ç­–æ ‘æ¥æ¨èåº”ç”¨ã€‚æˆ‘ä»¬å­¦ä¼šäº†ä½¿ç”¨é€»è¾‘å›å½’å’Œæ”¯æŒå‘é‡æœºæ¥åˆ›å»ºä¸€ä¸ªæ¨¡å‹ï¼Œä½¿ç”¨ç¥ç»ç½‘ç»œå’Œæ ¸æ–¹æ³•æ¥æ”¹å–„æ¨¡å‹ã€‚æˆ‘ä»¬å­¦ä¼šäº†ä½¿ç”¨èšç±»ç®—æ³•ï¼Œåœ¨ä¸€ä¸ªåŸå¸‚ä¸­å¦‚ä½•å®šä½ä¸€ä¸ªæŠ«è¨åº—ã€‚è¿˜æœ‰æ›´å¤šçš„ç®—æ³•ï¼Œç­‰å¾…æˆ‘ä»¬ä»¥åå»å­¦ä¹ ã€‚å¦‚æœç»™ä½ ä¸€ä¸ªæ•°æ®é›†ï¼Œä½ æ€ä¹ˆçŸ¥é“è¯¥æŒ‘é€‰å“ªç§ç®—æ³•å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦å­¦ä¹ æ¯”è¾ƒå®ƒä»¬ï¼ŒåŸºäºè¿è¡Œæ—¶é—´ã€å‡†ç¡®ç‡ç­‰ç­‰ã€‚æˆ‘ä»¬è¿˜èƒ½å¤ŸæŠŠç®—æ³•ç»„åˆåœ¨ä¸€èµ·ä½¿ç”¨ã€‚
ä¹¦ç­¾ä¼˜è¾¾å­¦åŸ-æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆï¼ˆä¸­/è‹±ï¼‰https://cn.udacity.com/course/machine-learning-engineer-nanodegree--nd009
Udacity GitHub æœºå™¨å­¦ä¹ é¡¹ç›®https://github.com/udacity/machine-learning/
ä¼˜è¾¾å­¦åŸè®ºå›https://discussions.youdaxue.com/c/nd009-machine-learning-engineer-cafe
Latest MLND: CafÃ© topics - Udacity Discussion Forumhttps://discussions.udacity.com/c/nd009-cafe
Coursera-æœºå™¨å­¦ä¹ https://www.coursera.org/learn/machine-learning/home/welcome
Coursera-æœºå™¨å­¦ä¹ åŸºç¡€ï¼šæ¡ˆä¾‹ç ”ç©¶https://www.coursera.org/learn/ml-foundations/home/welcome
Machine Learning Examples - MATLAB &amp; Simulinkhttps://cn.mathworks.com/solutions/machine-learning/examples.html?s_eid=PSM_da
MATLABæ•°æ®åˆ†æä¸æŒ–æ˜å®æˆ˜â€”â€”å›¾ä¹¦é…å¥—èµ„æ–™ä¸‹è½½http://www.tipdm.org/ts/578.jhtml
BdRaceæ•°ç¿æ€_æ•°æ®æŒ–æ˜ç«èµ›å¹³å°http://www.tipdm.org/datarace/index.html
æœºå™¨å­¦ä¹ å…¬å¼€è¯¾æ±‡æ€»
å¾®è½¯â€œæœºå™¨å­¦ä¹ â€ç³»åˆ—æ–‡ç« ï¼ˆéœ€ç¿»å¢™ï¼‰http://www.msra.cn/zh-cn/research/machine-learning-group/default.aspx
æœºå™¨å­¦ä¹ (Machine Learning)&amp;æ·±åº¦å­¦ä¹ (Deep Learning)èµ„æ–™(Chapter 1)https://github.com/ty4z2008/Qix/blob/master/dl.md
ä»0åˆ°1ï¼šæˆ‘æ˜¯å¦‚ä½•åœ¨ä¸€å¹´å†…æ— å¸ˆè‡ªé€šæœºå™¨å­¦ä¹ çš„ï¼Ÿhttp://www.leiphone.com/news/201609/SJGulTsdGcisR8Wz.html
Deep Learning Tutorialshttp://deeplearning.net/tutorial/
]]></content>
      <categories>
        <category>engineering</category>
        <category>machinelearning</category>
      </categories>
      <tags>
        <tag>æœºå™¨å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>matlabå…¥é—¨</title>
    <url>/dev-matlab-start/</url>
    <content><![CDATA[å‰è¨€
MATLABæ˜¯ç¾å›½MathWorkså…¬å¸å‡ºå“çš„å•†ä¸šæ•°å­¦è½¯ä»¶ï¼Œç”¨äºç®—æ³•å¼€å‘ã€æ•°æ®å¯è§†åŒ–ã€æ•°æ®åˆ†æä»¥åŠæ•°å€¼è®¡ç®—çš„é«˜çº§æŠ€æœ¯è®¡ç®—è¯­è¨€å’Œäº¤äº’å¼ç¯å¢ƒï¼Œä¸»è¦åŒ…æ‹¬MATLABå’ŒSimulinkä¸¤å¤§éƒ¨åˆ†ã€‚

è¯»ç ”ä»¥æ¥ï¼Œè€³è¾¹ä¸æ—¶å¬åˆ°â€œmatlabâ€ï¼Œè¢«è€å¸ˆå’ŒåŒå­¦æ™®éæ¨å´‡ã€‚ä»Šå¤©ï¼ŒéƒåŒå­¦å°±æ¥å­¦ä¹ ä¸€ä¸‹matlabçš„åŸºç¡€æ“ä½œã€‚


åŸºç¡€è®¾ç½®æ˜¾ç¤ºç±»å‹è®¡ç®—åœ†é¢ç§¯æ—¶ï¼Œé¢ç§¯çš„ç»“æœæ˜¾ç¤ºï¼Œé»˜è®¤æ˜¯shortç±»å‹ï¼ˆä¿ç•™å°æ•°ç‚¹å4ä½ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®ä¸ºlongç±»å‹ï¼Œæ¥æ˜¾ç¤ºæ›´ç²¾ç¡®çš„ç»“æœã€‚1ï¼‰é€šè¿‡å‘½ä»¤è®¾ç½®format longï¼Œè¿™ç§è®¾ç½®æ–¹å¼ä¸´æ—¶æ€§çš„ã€‚
2ï¼‰é€šè¿‡ç•Œé¢è®¾ç½®Fileï¼ŒPreferencesï¼ŒCommand Windowï¼ŒNumeric formaté€‰æ‹©longï¼Œä¹‹åApplyå³å¯ã€‚
æ¸…å±æ¸…å±å‘½ä»¤ï¼šclc
æ¸…æ•°æ®æ¸…æ•°æ®å‘½ä»¤ï¼šclear
ä¿®æ”¹å˜é‡åœ¨workspaceä¸­ï¼ŒåŒå‡»å˜é‡ï¼Œå¯ä»¥åœ¨å›¾å½¢åŒ–ç•Œé¢ä¿®æ”¹å˜é‡å€¼ã€‚
ç»˜å›¾åœ¨workspaceä¸­ï¼Œå•å‡»å˜é‡ï¼Œç„¶åç‚¹å‡»plotã€‚
æŸ¥çœ‹å˜é‡ä¿¡æ¯whoï¼Œwhosï¼Œwhos a
é‡æ–°æ‰§è¡Œå‘½ä»¤åœ¨command historyä¸­ï¼Œæ‰¾åˆ°ä¸€æ¡å‘½ä»¤ï¼Œå³é”®é€‰æ‹©evaluate selectionã€‚
ä¿å­˜å˜é‡save aï¼Œä¿å­˜å˜é‡åˆ°å½“å‰å·¥ä½œè·¯å¾„ï¼Œæ–‡ä»¶åä¸ºa.matã€‚
åŠ è½½æ•°æ®æ–‡ä»¶load aæˆ–è€…load a.matã€‚
ç¼–è¾‘å™¨çª—å£editï¼Œæ‰“å¼€ç¼–è¾‘çª—å£ï¼Œæ–°å»ºmatlabç¨‹åºã€‚
å›¾åƒçª—å£figure
GUIçª—å£guide
æ·»åŠ æœç´¢è·¯å¾„Fileï¼ŒSet Pathï¼ŒAdd Folderã€‚
è®¾ç½®åˆå§‹è·¯å¾„å³é”®matlabå¿«æ·æ–¹å¼ï¼Œåœ¨å¿«æ·æ–¹å¼é€‰é¡¹å¡ä¸­ï¼Œä¿®æ”¹èµ·å§‹ä½ç½®ã€‚
æŸ¥æ‰¾å‡½æ•°è·¯å¾„which sin
è®¾ç½®é»˜è®¤ç¼–ç ä¸­æ–‡æ—¶ï¼ŒMatlabé»˜è®¤ç¼–ç æ ¼å¼ä¸ºGB2312ã€‚ä½¿ç”¨sublimeæ‰“å¼€æ–‡ä»¶ï¼Œæ˜¾ç¤ºä¹±ç ï¼ŒéƒåŒå­¦æƒ³æŠŠMablabé»˜è®¤ç¼–ç ä¿®æ”¹ä¸ºUTF-8ã€‚
1ã€åœ¨Matlabå®‰è£…ç›®å½•ä¸‹çš„binç›®å½•ä¸‹ï¼ˆä¾‹å¦‚D:\Program Files\MATLAB\R2010b\binï¼‰ï¼Œæ‰¾åˆ°lcdata.xmlæ–‡ä»¶ã€‚
2ã€åœ¨matlabä¸­ï¼Œè¾“å…¥å‘½ä»¤feature(&#39;locale&#39;)ï¼ŒæŸ¥çœ‹å½“å‰ä½¿ç”¨çš„ç¼–ç ã€‚
3ã€ç¼–è¾‘lcdata.xmlï¼Œæ‰¾åˆ°å¦‚ä¸‹ä¸€æ®µï¼š
&lt;locale name=&quot;zh_CN&quot; encoding=&quot;GB2312&quot; xpg_name=&quot;zh_CN.GB2312&quot;&gt;    &lt;alias name=&quot;zh-Hans&quot;/&gt;&lt;/locale&gt;

ä¿®æ”¹ä¸ºï¼š
&lt;locale name=&quot;zh_CN&quot; encoding=&quot;UTF-8&quot; xpg_name=&quot;zh_CN.UTF-8&quot;&gt;    &lt;alias name=&quot;zh-Hans&quot;/&gt;&lt;/locale&gt;

ç„¶è€Œï¼Œä¿®æ”¹åé‡å¯ï¼Œmatlabä¾ç„¶ä½¿ç”¨GBKç¼–ç ã€‚è€Œä¸”ï¼ŒæŠŠ.mæ–‡ä»¶è½¬æ¢æˆUTF-8æ ¼å¼åï¼ŒMatlabä¸­ä¼šå‡ºç°ä¹±ç ã€‚
æ— å¥ˆï¼Œä»å¦ä¸€ä¸ªæ–¹é¢å…¥æ‰‹ï¼Œè®©sublimeæ”¯æŒGBKç¼–ç æ–‡ä»¶ï¼Œå®‰è£…æ’ä»¶ConvertToUTF8å³å¯ã€‚
Matlabè¯­è¨€åŸºç¡€å˜é‡å’Œå¸¸é‡matlabéµå¾ªå¼±ç±»å‹è¯­è¨€çš„å˜é‡åˆå§‹åŒ–å’Œèµ‹å€¼è¯­æ³•ï¼Œå’ŒpythonåŸºæœ¬ç›¸åŒã€‚
è¾“å…¥æ•°æ®x = input(&#39;è¯·è¾“å…¥æ•°æ®&#39;)ï¼Œè¾“å…¥æ•°æ®åï¼Œæ•°æ®å­˜å…¥xã€‚
é»˜è®¤èµ‹å€¼å¦‚æœè¾“å…¥æ•°å€¼ï¼Œæ²¡æœ‰èµ‹å€¼ç»™å˜é‡ï¼Œé‚£ä¹ˆé»˜è®¤èµ‹å€¼ç»™å†…ç½®çš„anså˜é‡ã€‚
åŸºæœ¬æ•°æ®ç»“æ„è¾“å…¥è¡ŒçŸ©é˜µa = [1 2 3]æˆ–a = [1,2,3]
è¾“å…¥åˆ—çŸ©é˜µb = [1 2 3]&#39;æˆ–b = [1,2,3]&#39;æˆ–b = [1;2;3]
è¾“å…¥2*2çŸ©é˜µc = [1 2; 3 4]
è¾“å…¥ç‰¹å®šå€¼çŸ©é˜µd(2,3) = 8ï¼Œç”Ÿæˆ2*3çš„çŸ©é˜µï¼Œç¬¬äºŒè¡Œç¬¬ä¸‰åˆ—çš„å…ƒç´ ä¸º8ï¼Œå…¶ä»–å…ƒç´ ä¸º0ã€‚
å†…ç½®å‡½æ•°ç”ŸæˆçŸ©é˜µones(4)ï¼Œç”Ÿæˆ4*4çš„çŸ©é˜µï¼Œæ‰€æœ‰å…ƒç´ ä¸º1ã€‚
ones(4,3)ï¼Œç”Ÿæˆ4*3çš„çŸ©é˜µï¼Œæ‰€æœ‰å…ƒç´ ä¸º1ã€‚
zeros(4)ï¼Œç”Ÿæˆ4*4çš„çŸ©é˜µï¼Œæ‰€æœ‰å…ƒç´ ä¸º0ã€‚
zeros(4,3)ï¼Œç”Ÿæˆ4*3çš„çŸ©é˜µï¼Œæ‰€æœ‰å…ƒç´ ä¸º0ã€‚
eye(4)ï¼Œç”Ÿæˆ4*4çš„å•ä½çŸ©é˜µã€‚
eye(4,3)ï¼Œç”Ÿæˆ4*3çš„çŸ©é˜µï¼Œå‰ä¸‰è¡Œå‰ä¸‰åˆ—ç»„æˆå•ä½çŸ©é˜µï¼Œç¬¬å››è¡Œä¸º0ã€‚
magic(4)ï¼Œç”Ÿæˆ4*4çš„é­”æ–¹æ•°ç»„ã€‚
å†’å·è¡¨è¾¾å¼ç”ŸæˆçŸ©é˜µ3:9ï¼Œç”Ÿæˆ3åˆ°9çš„è¡Œå‘é‡ï¼Œå¢é‡ä¸º1ã€‚
3:2:9ï¼Œç”Ÿæˆ3åˆ°9çš„è¡Œå‘é‡ï¼Œå¢é‡ä¸º2ã€‚
(3:9)&#39;ï¼Œç”Ÿæˆ3åˆ°9çš„åˆ—å‘é‡ï¼Œå¢é‡ä¸º1ã€‚
è¯»å–çŸ©é˜µæ•°æ®a = [1 2 3]ï¼Œa(2)ï¼Œè¯»å–ç¬¬äºŒä¸ªæ•°æ®ã€‚
c = [1 2; 3 4]ï¼Œc(1,2)ï¼Œè¯»å–ç¬¬ä¸€è¡Œç¬¬äºŒåˆ—çš„æ•°æ®ã€‚
c(:,2)ï¼Œè¯»å–äºŒåˆ—çš„æ•°æ®ã€‚
c(1,:)ï¼Œè¯»å–ç¬¬ä¸€è¡Œçš„æ•°æ®ã€‚
k = [1 2 3;4 5 6;7 8 9;10 11 12]ï¼Œk(2:4,2)ï¼Œè¯»å–ç¬¬äºŒåˆ—ä¸­ç¬¬äºŒè¡Œåˆ°ç¬¬å››è¡Œçš„æ•°æ®ã€‚
æ‹¼æ¥çŸ©é˜µm = [c,c]ï¼Œæ¨ªå‘æ‹¼æ¥ä¸¤ä¸ªcçŸ©é˜µã€‚
n = [c:c]ï¼Œçºµå‘æ‹¼æ¥ä¸¤ä¸ªcçŸ©é˜µã€‚
çŸ©é˜µå‡½æ•°size(n)ï¼Œè¿”å›è¡Œåˆ—æ•°ã€‚
length(n)ï¼Œè¿”å›è¡Œæ•°å’Œåˆ—æ•°ä¸­çš„è¾ƒå¤§è€…ã€‚
ç©ºæ•°ç»„å’Œå­æ•°ç»„ç©ºæ•°ç»„nullmatrix = []ï¼Œåˆ›å»ºç©ºæ•°ç»„ã€‚
å­æ•°ç»„magicmatrix = magic(4)ï¼Œchild = magicmatrix(3,[2,4])
child = magicmatrix(3,2:end)
magicmatrix(3,2) = 3ï¼Œå•ä¸ªå…ƒç´ èµ‹å€¼ã€‚
ç­‰å·®æ•°åˆ—linspace(1,99,50)ï¼Œç”Ÿæˆ1åˆ°99çš„50ä¸ªæ•°ï¼Œç­‰å·®ä¸º2ã€‚
ç­‰æ¯”æ•°åˆ—logspace(1,3,3)ï¼Œç”Ÿæˆ10 100 1000ä¸‰ä¸ªæ•°ã€‚
æ•°ç»„å˜å½¢1:1:9ï¼Œreshape(ans,3,3)ï¼ŒæŒ‰åˆ—æ’åˆ—å˜å½¢æˆä¸ºæ–¹æ•°ç»„ã€‚
æ—¶é—´å˜é‡dataï¼Œclockï¼Œyear(now)ï¼Œmonth(now)ï¼Œday(now)ï¼Œday(today)
ç®—æœ¯è¿ç®—ç¬¦æ ‡é‡è¿ç®—æ­£å¸¸åŠ å‡ä¹˜é™¤ï¼Œå’ŒpythonåŸºæœ¬ç›¸åŒã€‚éœ€è¦æ³¨æ„çš„æ˜¯5/6ä»£è¡¨5é™¤ä»¥6ï¼Œ5\6ä»£è¡¨6é™¤ä»¥5ã€‚
5^2å’Œpower(5,2)éƒ½æ˜¯ä»£è¡¨5çš„å¹³æ–¹ã€‚
çŸ©é˜µè¿ç®—A=[1 2 3; 4 5 6; 7 8 9]ï¼ŒB=magic(3)
A+Bï¼ŒA-Bï¼ŒA*Bï¼ŒA+3ï¼ŒA*3
inv(B)ï¼Œæ±‚BçŸ©é˜µçš„é€†çŸ©é˜µã€‚
A/Bå’ŒA*inv(B)ç›¸åŒã€‚
A.*Bï¼Œå¯¹åº”ä½ç½®ç›¸ä¹˜ã€‚
è¿ç®—å‡½æ•°matlabçš„è¿ç®—å‡½æ•°åŒ…æ‹¬å¹‚æ¬¡æ–¹ã€æŒ‡æ•°ä¸å¯¹æ•°å‡½æ•°ã€ä¸‰è§’ä¸åä¸‰è§’å‡½æ•°ç­‰ç­‰ã€‚
å¹‚æ¬¡æ–¹å¹‚æ¬¡æ–¹çš„ç¬¦å·å°±æ˜¯å¸¸ç”¨çš„^è®°å·ã€‚æŒ‡æ•°éƒ¨åˆ†å¯ä»¥æ˜¯ä»»æ„æ•°ã€‚2^2ï¼Œ2^(-1)ï¼Œ2^(1/2)ï¼Œ2^(1.25) 
æŒ‡æ•°ä¸å¯¹æ•°ç§‘å­¦ä¸å·¥ç¨‹é¢†åŸŸæƒ¯ç”¨ã€Œæ ‡å‡†æŒ‡æ•°å‡½æ•°ã€ï¼Œä¹Ÿå°±æ˜¯ä»¥eä¸ºåº•çš„æŒ‡æ•°å‡½æ•°ã€‚å…¶ä¸­ï¼Œeæ˜¯ä¸€ä¸ªæ— ç†æ•°ï¼Œå¤§çº¦ç­‰äº2.71828ã€‚Matlabå¹¶ä¸æä¾›eè¿™ä¸ªå¸¸æ•°ï¼Œè€Œæ˜¯ä»¥å‡½æ•°exp()æ¥è®¡ç®—ä»¥eä¸ºåº•çš„æŒ‡æ•°å‡½æ•°ã€‚exp(1)
Matlab åˆ†åˆ«æä¾›ä¸‰ä¸ªå‡½æ•° log()ã€log10()å’Œlog2()ï¼Œåˆ†åˆ«è¡¨ç¤ºä»¥eä¸ºåº•çš„å¯¹æ•°ï¼ˆè‡ªç„¶å¯¹æ•°ï¼‰ï¼Œä»¥10ä¸ºåº•çš„å¯¹æ•°ï¼ˆå¸¸ç”¨å¯¹æ•°ï¼‰ï¼Œä»¥2ä¸ºåº•çš„å¯¹æ•°ã€‚log(exp(2))ï¼Œlog10(100)ï¼Œlog2(4)ï¼Œç­”æ¡ˆéƒ½æ˜¯2ã€‚
ä¸‰è§’ä¸åä¸‰è§’å‡½æ•°å…­ä¸ªä¸‰è§’å‡½æ•°åœ¨Matlab ä¸­å¯¹åº”çš„å‡½æ•°åˆ†åˆ«ä¸ºï¼šæ­£å¼¦ï¼šsin()ä½™å¼¦ï¼šcos()æ­£åˆ‡ï¼štan()ä½™åˆ‡ï¼šcot()æ­£å‰²ï¼šsec()ä½™å‰²ï¼šcsc()
å…­ä¸ªåä¸‰è§’å‡½æ•°åœ¨Matlab ä¸­å¯¹åº”çš„å‡½æ•°åˆ†åˆ«ä¸ºï¼šåæ­£å¼¦ï¼šasin()åä½™å¼¦ï¼šacos()åæ­£åˆ‡ï¼šatan()åä½™åˆ‡ï¼šacot()åæ­£å‰²ï¼šasec()åä½™å‰²ï¼šacsc()
éœ€è¦æ³¨æ„çš„å°±æ˜¯ä½¿ç”¨ä¸‰è§’å‡½æ•°æ—¶ï¼Œè§’åº¦çš„å•ä½æ˜¯â€œå¼§åº¦â€ã€‚
å¤æ•°Matlab çš„æ‰€æœ‰è¿ç®—ç¬¦å·ã€æ‰€æœ‰å‡½æ•°ï¼Œéƒ½æ‡‚å¾—å¦‚ä½•åšå¤æ•°è®¡ç®—ã€‚sqrt(-1)
abs(3+4i)
å¾®ç§¯åˆ†æé™æ±‚æé™æ˜¯å¾®ç§¯åˆ†çš„åŸºç¡€ï¼Œæ±‚æé™çš„å‡½æ•°limitã€‚limit(f,x,a)ï¼Œxè¶‹è¿‘äºaæ—¶ï¼Œf çš„æé™ã€‚limit(f,x,a,&#39;left&#39;)ï¼Œxå·¦è¶‹è¿‘äºaæ—¶ï¼Œf çš„æé™ã€‚limit(f,x,a,&#39;right&#39;)ï¼Œxå³è¶‹è¿‘äºaæ—¶ï¼Œfçš„æé™ã€‚
å¾®åˆ†diff(f,t,n)ï¼Œæ±‚f å¯¹ç‹¬ç«‹å˜é‡tçš„næ¬¡å¾®åˆ†å€¼ã€‚
ç§¯åˆ†int(f,&#39;t&#39;,a,b)ï¼Œæ±‚f å¯¹ç‹¬ç«‹å˜é‡t åœ¨ç§¯åˆ†åŒºé—´[aï¼Œb]çš„ç§¯åˆ†å€¼ã€‚
çº§æ•°è‡ªå˜é‡våœ¨[aï¼Œb]ä¹‹é—´å–å€¼æ—¶ï¼Œå¯¹é€šé¡¹sæ±‚å’Œï¼Œç”¨å‡½æ•°symsum(s,v,a,b)ã€‚
æ–¹ç¨‹æ±‚è§£ä»£æ•°æ–¹ç¨‹solve(f)
solve(f,a)
å¸¸å¾®åˆ†æ–¹ç¨‹dsolve(&#39;å¸¸å¾®åˆ†æ–¹ç¨‹å¼&#39;,&#39;åˆå§‹æ¡ä»¶&#39;,&#39;è‡ªå˜é‡&#39;)
å¯è§†åŒ–äºŒç»´å¹³é¢å›¾å½¢æŠ˜çº¿å›¾plot(x,y)å‡½æ•°ï¼Œxï¼Œyæ˜¯ç»´åº¦ç›¸åŒçš„åºåˆ—æˆ–å‘é‡ã€‚
x=[0 1 2];y=[0 1 0];plot(x,y);

ç”¨300æ®µæŠ˜çº¿ç”»å‡ºsin(x)åœ¨[-pi,pi]åŒºé—´å†…çš„æŠ˜çº¿å›¾ã€‚
x = linspace(-pi, pi, 301);plot(x, sin(x));

å¦‚æœè¦ç”»å¤šæ¡æ›²çº¿ï¼Œä¹Ÿå¯ä»¥ç”¨plotå‡½æ•°ã€‚
x=0:pi/10:2*pi;y1=sin(x);y2=cos(x);plot(x,y1,x,y2);plot(x,y1,&#x27;r + -&#x27;,x,y2,&#x27;k * :&#x27;);
å›¾å½¢æ˜¯ä»¥å…¬å…±çš„xå…ƒç´ ä¸ºæ¨ªåæ ‡å€¼ï¼Œy1ã€y2ä¸ºçºµåæ ‡å€¼ç»˜åˆ¶æ›²çº¿å›¾çš„ã€‚å¦‚æœæƒ³è¦å›¾å½¢æ›´åŠ å®Œç¾ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€äº›ç‰¹æ®Šçš„å›¾å½¢å‡½æ•°å¯¹å®ƒè¿›è¡Œä¿®é¥°ã€‚
xlabel(&#x27;ç‹¬ç«‹å˜é‡X&#x27;);ylabel(&#x27;å˜é‡Y&#x27;);title(&#x27;æ­£å¼¦å’Œä½™å¼¦æ›²çº¿&#x27;);text(1.5,0.3,&#x27;cos(x)&#x27;);text(0,0,&#x27;sin(x)&#x27;);%axis([0 2*pi -0.9 0.9]);

å¦‚æœåªç»™plot()ä¸€ä¸ªå‚æ•°ï¼Œä¾‹å¦‚plot(y)ï¼Œè€Œyæ˜¯ä¸€ä¸ªnç»´å‘é‡æˆ–åˆ—ï¼Œåˆ™å®ƒçš„æ•ˆæœå°±ç›¸å½“äºplot((1:n), y)ã€‚
y = [ 1 4 0 2 3 5];plot(y);

å¤šé‡æŠ˜çº¿å›¾Matlabåœ¨ä¸€å¼ å›¾ç‰‡ä¸Šå¯ä»¥é‡å¤åˆ¶å›¾ã€‚åŸºæœ¬ä¸Šï¼Œç”»ä¸€å¼ å›¾çš„æŒ‡ä»¤ï¼Œå°†ä¼šè‡ªåŠ¨æ¸…é™¤å‰ä¸€å¼ å›¾ã€‚ä½†æ˜¯ï¼Œå¦‚æœä¸‹äº†æŒ‡ä»¤hold onï¼Œå°†ä¸ä¼šæ¸…é™¤å‰ä¸€å¼ å›¾ï¼Œè€Œæ˜¯é‡å¤ç”»ä¸Šå»ã€‚ä¸‹äº†hold onæŒ‡ä»¤çš„æ‰€æœ‰å›¾å°†ä¼šé‡è¿­åœ¨ä¸€å¼ å›¾ç‰‡é‡Œï¼Œç›´åˆ°ä½ ä¸‹äº†hold offä¸ºæ­¢ã€‚
æˆ‘ä»¬ä»¥ 300 ä¸ªæŠ˜çº¿æ®µï¼Œåœ¨ä¸€å¼ å›¾ç‰‡ä¸­ï¼Œç”»å‡ºä»¥ä¸‹ä¸‰ä¸ªå‡½æ•°åœ¨[-pi, pi]åŒºé—´å†…çš„æ›²çº¿å›¾ï¼šsin(x)ï¼Œcos(x)ï¼Œxã€‚
x = linspace(0, 2*pi, 301);y = sin(x);plot(x, y, &#x27;r&#x27;);axis([0 2*pi -1.2 1.2]);hold ony = cos(x);plot(x, y, &#x27;g&#x27;);y = x; plot(x, y, &#x27;b&#x27;);hold off;

æˆ‘ä»¬è¿˜å¯ä»¥é‡‡ç”¨å›¾å½¢çª—å£åˆ†å‰²çš„æ–¹æ³•ï¼Œåœ¨åŒä¸€ä¸ªè§†å›¾çª—å£ä¸­ç”»å‡ºå¤šä¸ªå°å›¾å½¢ã€‚è¿™æ—¶è¦ç”¨åˆ°subplot(n,m,k)ã€‚å¦‚æœå†™subplot(2,2,1),å³å°±æ˜¯æŠŠå›¾å½¢çª—å£åˆ†å‰²æˆ2è¡Œ2åˆ—ï¼Œåœ¨ç¬¬1ä¸ªä½ç½®ï¼ˆç¬¬1è¡Œç¬¬1åˆ—ï¼‰ç”»å›¾ã€‚
x = linspace(0, 2*pi, 301);y = sin(x);subplot(2,2,1);plot(x, y);y = cos(x);subplot(2,2,2);plot(x, y);
Matlabå¯¹æ•°æ®æ˜¯æŒ‰åˆ—å­˜å‚¨å’Œè®¡ç®—çš„ã€‚
ä¸‰ç»´ç«‹ä½“å›¾å½¢ä¸‰ç»´æ›²çº¿å›¾plot3å‡½æ•°è°ƒç”¨æ ¼å¼ï¼šplot3(x1,y1,z1,x2,y2,z2,â€¦)ã€‚å…¶ä¸­x1ï¼Œy1ï¼Œz1ï¼Œx2ï¼Œy2ï¼Œz2â€¦ç­‰åˆ†åˆ«ä¸ºç»´æ•°ç›¸åŒçš„å‘é‡ï¼Œåˆ†åˆ«å­˜å‚¨ç€æ›²çº¿çš„ä¸‰ä¸ªåæ ‡å€¼ã€‚
ç»˜åˆ¶æ–¹ç¨‹åœ¨t=[0,2Ï€]çš„ç©ºé—´æ–¹ç¨‹ã€‚
\begin{cases}x=t \y=sin(t) \z=cos(t)\end{cases}
t=0:pi/10:2*pi;x=t;y=sin(t);z=cos(t);plot3(x,y,z,&#x27;r:p&#x27;);grid on;xlabel(&#x27;X&#x27;);ylabel(&#x27;Y&#x27;);zlabel(&#x27;Z&#x27;);title(&#x27;sine and cosine&#x27;);

ä¸‰ç»´ç½‘æ ¼å›¾å’Œæ›²é¢å›¾Matlabåœ¨ç»˜åˆ¶ä¸‰ç»´ç½‘æ ¼å›¾ä¸æ›²é¢å›¾æ—¶ï¼Œå¾€å¾€å…ˆå°†è¦ç»˜åˆ¶å›¾å½¢çš„å®šä¹‰åŒºåŸŸåˆ†æˆè‹¥å¹²ç½‘æ ¼ï¼Œç„¶åè®¡ç®—è¿™äº›ç½‘æ ¼èŠ‚ç‚¹ä¸Šçš„äºŒå…ƒå‡½æ•°å€¼ï¼Œæœ€åæ‰èƒ½ä½¿ç”¨meshå’Œsurfå‡½æ•°ç»˜åˆ¶ç›¸åº”çš„å›¾å½¢ã€‚ç”Ÿæˆç½‘æ ¼çŸ©é˜µä½¿ç”¨meshgridå‡½æ•°ï¼Œå…¶è°ƒç”¨æ ¼å¼ä¸ºï¼š
[U, V]=meshgrid(x,y)

å‡½æ•°è¯´æ˜ï¼šåˆ©ç”¨å‘é‡xå’Œyç”Ÿæˆç½‘æ ¼çŸ©é˜µUå’ŒVï¼Œä»¥ä¾¿meshå’Œsurfç­‰å‡½æ•°ç”¨æ¥ç»˜å›¾ã€‚å…¶ä¸­xã€yåˆ†åˆ«æ˜¯é•¿åº¦ä¸ºnå’Œmå‡åºæ’åˆ—çš„è¡Œå‘é‡ã€‚
ç”Ÿæˆçš„æ–¹æ³•æ˜¯å°†xå¤åˆ¶næ¬¡ç”Ÿæˆç½‘æ ¼çŸ©é˜µUï¼Œå°†yè½¬ç½®æˆåˆ—å‘é‡åå¤åˆ¶mæ¬¡ç”Ÿæˆç½‘æ ¼çŸ©é˜µVã€‚åæ ‡(uij,vij)è¡¨ç¤ºxoyå¹³é¢ä¸Šç½‘æ ¼èŠ‚ç‚¹çš„åæ ‡ï¼Œç¬¬ä¸‰ç»´åæ ‡zij=f(uij,vij)ã€‚
ä¾‹ï¼šç»™å®šå‘é‡x=[1 2 3 4]ï¼Œy=[10 11 12 13 14]ï¼Œè¯•ç”±å‘é‡xã€yç”Ÿæˆç½‘æ ¼çŸ©é˜µã€‚
x=[1 2 3 4]; %è¾“å…¥å‘é‡xy=[10 11 12 13 14]; %è¾“å…¥å‘é‡y[U,V]=meshgrid(x,y); %ç”Ÿæˆç½‘æ ¼çŸ©é˜µZ=peaks(U,V);mesh(U,V,Z); %ç»˜åˆ¶ä¸‰ç»´ç½‘æ ¼å›¾

Matlabæä¾›äº†ä¸€ä¸ªpeakså‡½æ•°ï¼Œå¯äº§ç”Ÿä¸€ä¸ªå‡¹å‡¸æœ‰è‡´çš„æ›²é¢ï¼ŒåŒ…å«äº†ä¸‰ä¸ªå±€éƒ¨æå¤§ç‚¹åŠä¸‰ä¸ªå±€éƒ¨æå°ç‚¹ã€‚åœ¨matlabä¸­è¾“å…¥peaks()ã€peaks(5)å°±å¯ä»¥çœ‹åˆ°æ•ˆæœã€‚
ä¾‹ï¼šåœ¨ -4&lt;x&lt;4ï¼Œ-4&lt;y&lt;4 ä¸Šç»˜åˆ¶ $z=x^2+y^2$ çš„ä¸‰ç»´ç½‘æ ¼å›¾ã€‚
[x,y]=meshgrid(-4:4, -4:4); %å®šä¹‰ç½‘æ ¼æ•°æ®å‘é‡x,yz=x.^2+y.^2; %è®¡ç®—äºŒå…ƒå‡½æ•°å€¼mesh(x,y,z); %ç»˜åˆ¶ä¸‰ç»´ç½‘æ ¼å›¾% surf(x,y,z); %ç»˜åˆ¶ä¸‰ç»´æ›²é¢å›¾

è§‚å¯Ÿç‚¹å‡½æ•°view(azinmuth,elevation)azinmuthï¼šæ–¹ä½è§’ã€‚è§‚å¯Ÿç‚¹ä¸åæ ‡åŸç‚¹çš„è¿çº¿åœ¨æ°´å¹³é¢ä¸Šçš„æŠ•å½±å’Œyè½´è´Ÿæ–¹å‘çš„å¤¹è§’ã€‚ï¼ˆåœ¨æ°´å¹³é¢ä¸Šï¼‰elevationï¼šä»°è§’ã€‚è§‚å¯Ÿç‚¹ä¸åæ ‡åŸç‚¹çš„è¿çº¿å’Œæ°´å¹³é¢çš„å¤¹è§’ã€‚ï¼ˆä¸æ°´å¹³é¢å‚ç›´ï¼‰
ä½¿ç”¨å¾ªç¯å’Œè§‚å¯Ÿç‚¹è®¾å®šæ¥å®ç°åŠ¨ç”»æ•ˆæœã€‚
Matlabç¨‹åºè®¾è®¡å‘½ä»¤æ–‡ä»¶Matlabæä¾›ä¸¤ç§æºç¨‹åºæ–‡ä»¶æ ¼å¼ï¼šå‘½ä»¤æ–‡ä»¶å’Œå‡½æ•°æ–‡ä»¶ã€‚è¿™ä¸¤ç§æ–‡ä»¶çš„æ‰©å±•åç›¸åŒï¼Œå‡ä¸ºâ€œ.mâ€ï¼Œåˆç§°ä¸ºâ€œMæ–‡ä»¶â€ã€‚å‘½ä»¤æ–‡ä»¶çš„æ‰§è¡Œæ–¹å¼ï¼šåœ¨æç¤ºç¬¦åé”®å…¥å‘½ä»¤æ–‡ä»¶çš„æ–‡ä»¶åã€‚å‘½ä»¤æ–‡ä»¶é€‚åˆäºç”¨æˆ·åšéœ€è¦ç†è§£å¾—åˆ°ç»“æœçš„å°è§„æ¨¡è¿ç®—ã€‚
å‡½æ•°æ–‡ä»¶å‡½æ•°æ–‡ä»¶ç”±functionè¯­å¥å¼•å¯¼ã€‚å…¶æ ¼å¼ä¸ºï¼š
function [è¿”å›å˜é‡åˆ—è¡¨]=å‡½æ•°å(è¾“å…¥å˜é‡åˆ—è¡¨)

1ã€æ–°å»ºä¸€ä¸ªæ±‚é˜¶ä¹˜çš„å‡½æ•°æ–‡ä»¶myFunc.mï¼š
function value = myFunc(n);if n&lt;=1    value = 1;else    value = myFunc(n-1)*n;end

2ã€é‡å†™æ±‚é˜¶ä¹˜çš„å‡½æ•°æ–‡ä»¶myFunc2.mï¼š
function value = myFunc2(n);value = 1;while n &gt; 1    value = value*n;    n = n - 1;end

3ã€é‡å†™æ±‚é˜¶ä¹˜çš„å‡½æ•°æ–‡ä»¶myFunc3.mï¼š
function value = myFunc3(n);value = 1;for i=1:1:n    value = value*i;end%for i=n:-1:1%    value = value*i;%end

4ã€æ–°å»ºä¼ å…¥æ•°å€¼æ˜¾ç¤ºç»“æœçš„å‡½æ•°æ–‡ä»¶showNum.mï¼š
function showNum(input_var);switch input_var    case 1        disp(&#x27;1&#x27;);    case &#123;2,3,4&#125;        disp(&#x27;2 or 3 or 4&#x27;);    case 5        disp(&#x27;5&#x27;);    otherwise        disp(&#x27;something else&#x27;);end

æºç åˆ†äº«https://github.com/voidking/matlab-start.git
ä¹¦ç­¾Matlabè§†é¢‘æ•™ç¨‹http://www.51zxw.net/list.aspx?cid=456
æˆ‘çš„å­¦ä¹ èµ„æ–™http://pan.baidu.com/s/1bp1oyXT
Mathjaxä¸LaTexå…¬å¼ç®€ä»‹http://mlworks.cn/posts/introduction-to-mathjax-and-latex-expression/
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>matlab</tag>
      </tags>
  </entry>
  <entry>
    <title>PythonæŠ“å–ç™¾åº¦ç™¾ç§‘æ•°æ®</title>
    <url>/dev-python-crawler-baidu-baike/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡æ•´ç†è‡ªæ…•è¯¾ç½‘ã€ŠPythonå¼€å‘ç®€å•çˆ¬è™«ã€‹ï¼Œå°†ä¼šè®°å½•çˆ¬å–ç™¾åº¦ç™¾ç§‘â€œpythonâ€è¯æ¡ç›¸å…³é¡µé¢çš„æ•´ä¸ªè¿‡ç¨‹ã€‚


æŠ“å–ç­–ç•¥ç¡®å®šç›®æ ‡ï¼šç¡®å®šæŠ“å–å“ªä¸ªç½‘ç«™çš„å“ªäº›é¡µé¢çš„å“ªéƒ¨åˆ†æ•°æ®ã€‚æœ¬å®ä¾‹æŠ“å–ç™¾åº¦ç™¾ç§‘pythonè¯æ¡é¡µé¢ä»¥åŠpythonç›¸å…³è¯æ¡é¡µé¢çš„æ ‡é¢˜å’Œç®€ä»‹ã€‚åˆ†æç›®æ ‡ï¼šåˆ†æè¦æŠ“å–çš„urlçš„æ ¼å¼ï¼Œé™å®šæŠ“å–èŒƒå›´ã€‚åˆ†æè¦æŠ“å–çš„æ•°æ®çš„æ ¼å¼ï¼Œæœ¬å®ä¾‹ä¸­å°±è¦åˆ†ææ ‡é¢˜å’Œç®€ä»‹è¿™ä¸¤ä¸ªæ•°æ®æ‰€åœ¨çš„æ ‡ç­¾çš„æ ¼å¼ã€‚åˆ†æè¦æŠ“å–çš„é¡µé¢ç¼–ç çš„æ ¼å¼ï¼Œåœ¨ç½‘é¡µè§£æå™¨éƒ¨åˆ†ï¼Œè¦æŒ‡å®šç½‘é¡µç¼–ç ï¼Œç„¶åæ‰èƒ½è¿›è¡Œæ­£ç¡®çš„è§£æã€‚ç¼–å†™ä»£ç ï¼šåœ¨ç½‘é¡µè§£æå™¨éƒ¨åˆ†ï¼Œè¦ä½¿ç”¨åˆ°åˆ†æç›®æ ‡å¾—åˆ°çš„ç»“æœã€‚æ‰§è¡Œçˆ¬è™«ï¼šè¿›è¡Œæ•°æ®æŠ“å–ã€‚
åˆ†æç›®æ ‡1ã€urlæ ¼å¼è¿›å…¥ç™¾åº¦ç™¾ç§‘pythonè¯æ¡é¡µé¢ï¼Œé¡µé¢ä¸­ç›¸å…³è¯æ¡çš„é“¾æ¥æ¯”è¾ƒç»Ÿä¸€ï¼Œå¤§éƒ½æ˜¯/view/xxx.htmã€‚
2ã€æ•°æ®æ ¼å¼æ ‡é¢˜ä½äºç±»lemmaWgt-lemmaTitle-titleä¸‹çš„h1å­æ ‡ç­¾ï¼Œç®€ä»‹ä½äºç±»lemma-summaryä¸‹ã€‚
3ã€ç¼–ç æ ¼å¼æŸ¥çœ‹é¡µé¢ç¼–ç æ ¼å¼ï¼Œä¸ºutf-8ã€‚
ç»è¿‡ä»¥ä¸Šåˆ†æï¼Œå¾—åˆ°ç»“æœå¦‚ä¸‹ï¼š
ä»£ç ç¼–å†™é¡¹ç›®ç»“æ„åœ¨sublimeä¸‹ï¼Œæ–°å»ºæ–‡ä»¶å¤¹baike-spiderï¼Œä½œä¸ºé¡¹ç›®æ ¹ç›®å½•ã€‚æ–°å»ºspider_main.pyï¼Œä½œä¸ºçˆ¬è™«æ€»è°ƒåº¦ç¨‹åºã€‚æ–°å»ºurl_manger.pyï¼Œä½œä¸ºurlç®¡ç†å™¨ã€‚æ–°å»ºhtml_downloader.pyï¼Œä½œä¸ºhtmlä¸‹è½½å™¨ã€‚æ–°å»ºhtml_parser.pyï¼Œä½œä¸ºhtmlè§£æå™¨ã€‚æ–°å»ºhtml_outputer.pyï¼Œä½œä¸ºå†™å‡ºæ•°æ®çš„å·¥å…·ã€‚æœ€ç»ˆé¡¹ç›®ç»“æ„å¦‚ä¸‹å›¾ï¼š
spider_main.py# coding:utf-8import url_manager, html_downloader, html_parser, html_outputerclass SpiderMain(object):    def __init__(self):        self.urls = url_manager.UrlManager()        self.downloader = html_downloader.HtmlDownloader()        self.parser = html_parser.HtmlParser()        self.outputer = html_outputer.HtmlOutputer()    def craw(self, root_url):        count = 1        self.urls.add_new_url(root_url)        while self.urls.has_new_url():            try:                new_url = self.urls.get_new_url()                print(&#x27;craw %d : %s&#x27; % (count, new_url))                html_cont = self.downloader.download(new_url)                new_urls, new_data = self.parser.parse(new_url, html_cont)                self.urls.add_new_urls(new_urls)                self.outputer.collect_data(new_data)                if count == 10:                    break                count = count + 1            except:                print(&#x27;craw failed&#x27;)        self.outputer.output_html()if __name__==&#x27;__main__&#x27;:    root_url = &#x27;http://baike.baidu.com/view/21087.htm&#x27;    obj_spider = SpiderMain()    obj_spider.craw(root_url)

url_manger.py# coding:utf-8class UrlManager(object):    def __init__(self):        self.new_urls = set()        self.old_urls = set()    def add_new_url(self, url):        if url is None:            return        if url not in self.new_urls and url not in self.old_urls:            self.new_urls.add(url)    def add_new_urls(self, urls):        if urls is None or len(urls) == 0:            return        for url in urls:            self.add_new_url(url)    def has_new_url(self):        return len(self.new_urls) != 0    def get_new_url(self):        new_url = self.new_urls.pop()        self.old_urls.add(new_url)        return new_url

html_downloader.py# coding:utf-8import urllib.requestclass HtmlDownloader(object):    def download(self, url):        if url is None:            return None        response = urllib.request.urlopen(url)        if response.getcode() != 200:            return None        return response.read()

html_parser.py# coding:utf-8from bs4 import BeautifulSoupimport refrom urllib.parse import urljoinclass HtmlParser(object):    def _get_new_urls(self, page_url, soup):        new_urls = set()        # /view/123.htm        links = soup.find_all(&#x27;a&#x27;, href=re.compile(r&#x27;/view/\d+\.htm&#x27;))        for link in links:            new_url = link[&#x27;href&#x27;]            new_full_url = urljoin(page_url, new_url)            # print(new_full_url)            new_urls.add(new_full_url)        #print(new_urls)        return new_urls    def _get_new_data(self, page_url, soup):        res_data = &#123;&#125;        # url        res_data[&#x27;url&#x27;] = page_url        # &lt;dd class=&quot;lemmaWgt-lemmaTitle-title&quot;&gt; &lt;h1&gt;Python&lt;/h1&gt;        title_node = soup.find(&#x27;dd&#x27;, class_=&#x27;lemmaWgt-lemmaTitle-title&#x27;).find(&#x27;h1&#x27;)        res_data[&#x27;title&#x27;] = title_node.get_text()        # &lt;div class=&quot;lemma-summary&quot; label-module=&quot;lemmaSummary&quot;&gt;        summary_node = soup.find(&#x27;div&#x27;, class_=&#x27;lemma-summary&#x27;)        res_data[&#x27;summary&#x27;] = summary_node.get_text()        # print(res_data)        return res_data    def parse(self, page_url, html_cont):        if page_url is None or html_cont is None:            return        soup = BeautifulSoup(html_cont, &#x27;html.parser&#x27;)        # print(soup.prettify())        new_urls = self._get_new_urls(page_url, soup)        new_data = self._get_new_data(page_url, soup)        # print(&#x27;mark&#x27;)        return new_urls, new_data

html_outputer.py# coding:utf-8class HtmlOutputer(object):    def __init__(self):        self.datas = []    def collect_data(self, data):        if data is None:            return        self.datas.append(data)    def output_html(self):        fout = open(&#x27;output.html&#x27;,&#x27;w&#x27;, encoding=&#x27;utf-8&#x27;)        fout.write(&#x27;&lt;html&gt;&#x27;)        fout.write(&#x27;&lt;body&gt;&#x27;)        fout.write(&#x27;&lt;table&gt;&#x27;)        for data in self.datas:            fout.write(&#x27;&lt;tr&gt;&#x27;)            fout.write(&#x27;&lt;td&gt;%s&lt;/td&gt;&#x27; % data[&#x27;url&#x27;])            fout.write(&#x27;&lt;td&gt;%s&lt;/td&gt;&#x27; % data[&#x27;title&#x27;])            fout.write(&#x27;&lt;td&gt;%s&lt;/td&gt;&#x27; % data[&#x27;summary&#x27;])            fout.write(&#x27;&lt;/tr&gt;&#x27;)        fout.write(&#x27;&lt;/table&gt;&#x27;)        fout.write(&#x27;&lt;/body&gt;&#x27;)        fout.write(&#x27;&lt;/html&gt;&#x27;)        fout.close()

è¿è¡Œåœ¨å‘½ä»¤è¡Œä¸‹ï¼Œæ‰§è¡Œpython spider_main.pyã€‚
ç¼–ç é—®é¢˜é—®é¢˜æè¿°ï¼šUnicodeEncodeError: â€˜gbkâ€™ codec canâ€™t encode character â€˜\xa0â€™ in position â€¦ 
ä½¿ç”¨Pythonå†™æ–‡ä»¶çš„æ—¶å€™ï¼Œæˆ–è€…å°†ç½‘ç»œæ•°æ®æµå†™å…¥åˆ°æœ¬åœ°æ–‡ä»¶çš„æ—¶å€™ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ã€‚ç½‘ç»œä¸Šæœ‰å¾ˆå¤šç±»ä¼¼çš„æ–‡ç« è®²è¿°å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æ— éå°±æ˜¯encodeï¼Œdecodeç›¸å…³çš„ï¼Œè¿™æ˜¯å¯¼è‡´è¯¥é—®é¢˜å‡ºç°çš„çœŸæ­£åŸå› å—ï¼Ÿä¸æ˜¯çš„ã€‚å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†decodeå’Œencodeï¼Œè¯•éäº†å„ç§ç¼–ç ï¼Œutf8ï¼Œutf-8ï¼Œgbkï¼Œgb2312ç­‰ç­‰ï¼Œè¯¥æœ‰çš„ç¼–ç éƒ½è¯•éäº†ï¼Œå¯æ˜¯ä»ç„¶å‡ºç°è¯¥é”™è¯¯ï¼Œä»¤äººå´©æºƒã€‚
åœ¨windowsä¸‹é¢ç¼–å†™pythonè„šæœ¬ï¼Œç¼–ç é—®é¢˜å¾ˆä¸¥é‡ã€‚å°†ç½‘ç»œæ•°æ®æµå†™å…¥æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°å‡ ä¸ªç¼–ç ï¼š1ã€#encoding=â€™XXXâ€™è¿™é‡Œ(ä¹Ÿå°±æ˜¯pythonæ–‡ä»¶ç¬¬ä¸€è¡Œçš„å†…å®¹)çš„ç¼–ç æ˜¯æŒ‡è¯¥pythonè„šæœ¬æ–‡ä»¶æœ¬èº«çš„ç¼–ç ï¼Œæ— å…³ç´§è¦ã€‚åªè¦XXXå’Œæ–‡ä»¶æœ¬èº«çš„ç¼–ç ç›¸åŒå°±è¡Œäº†ã€‚æ¯”å¦‚notepad++â€æ ¼å¼â€èœå•é‡Œé¢é‡Œå¯ä»¥è®¾ç½®å„ç§ç¼–ç ï¼Œè¿™æ—¶éœ€è¦ä¿è¯è¯¥èœå•é‡Œè®¾ç½®çš„ç¼–ç å’Œencoding XXXç›¸åŒå°±è¡Œäº†ï¼Œä¸åŒçš„è¯ä¼šæŠ¥é”™ã€‚
2ã€ç½‘ç»œæ•°æ®æµçš„ç¼–ç æ¯”å¦‚è·å–ç½‘é¡µï¼Œé‚£ä¹ˆç½‘ç»œæ•°æ®æµçš„ç¼–ç å°±æ˜¯ç½‘é¡µçš„ç¼–ç ã€‚éœ€è¦ä½¿ç”¨decodeè§£ç æˆunicodeç¼–ç ã€‚
3ã€ç›®æ ‡æ–‡ä»¶çš„ç¼–ç å°†ç½‘ç»œæ•°æ®æµå†™å…¥åˆ°æ–°æ–‡ä»¶ï¼Œå†™æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š
fout = open(&#x27;output.html&#x27;,&#x27;w&#x27;)fout.write(str)
åœ¨windowsä¸‹é¢ï¼Œæ–°æ–‡ä»¶çš„é»˜è®¤ç¼–ç æ˜¯gbkï¼Œpythonè§£é‡Šå™¨ä¼šç”¨gbkç¼–ç å»è§£ææˆ‘ä»¬çš„ç½‘ç»œæ•°æ®æµstrï¼Œç„¶è€Œstræ˜¯decodeè¿‡çš„unicodeç¼–ç ï¼Œè¿™æ ·çš„è¯å°±ä¼šå¯¼è‡´è§£æä¸äº†ï¼Œå‡ºç°ä¸Šè¿°é—®é¢˜ã€‚ è§£å†³çš„åŠæ³•æ˜¯æ”¹å˜ç›®æ ‡æ–‡ä»¶çš„ç¼–ç ï¼š
fout = open(&#x27;output.html&#x27;,&#x27;w&#x27;, encoding=&#x27;utf-8&#x27;)

è¿è¡Œç»“æœ
æºç åˆ†äº«https://github.com/voidking/baike-spider
ä¹¦ç­¾Pythonå¼€å‘ç®€å•çˆ¬è™«http://www.imooc.com/learn/563
The Python Standard Libraryhttps://docs.python.org/3/library/index.html
Beautiful Soup 4.2.0 æ–‡æ¡£https://www.crummy.com/software/BeautifulSoup/bs4/doc/index.zh.html
Pythonè¯æ¡http://baike.baidu.com/view/21087.htmhttp://baike.baidu.com/item/Python
Python3.xçˆ¬è™«æ•™ç¨‹ï¼šçˆ¬ç½‘é¡µã€çˆ¬å›¾ç‰‡ã€è‡ªåŠ¨ç™»å½•http://www.2cto.com/kf/201507/417660.html
ä½¿ç”¨python3è¿›è¡Œä¼˜é›…çš„çˆ¬è™«ï¼ˆä¸€ï¼‰çˆ¬å–å›¾ç‰‡http://www.jianshu.com/p/696922f268df
Python UnicodeEncodeError: â€˜gbkâ€™ codec canâ€™t encode character è§£å†³æ–¹æ³•http://www.jb51.net/article/64816.htm
Scrapy documentationhttps://doc.scrapy.org/en/latest/
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>çˆ¬è™«</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonçˆ¬è™«åŸºç¡€</title>
    <url>/dev-python-crawler-base/</url>
    <content><![CDATA[å‰è¨€Pythonéå¸¸é€‚åˆç”¨æ¥å¼€å‘ç½‘é¡µçˆ¬è™«ï¼Œç†ç”±å¦‚ä¸‹ï¼š1ã€æŠ“å–ç½‘é¡µæœ¬èº«çš„æ¥å£ç›¸æ¯”ä¸å…¶ä»–é™æ€ç¼–ç¨‹è¯­è¨€ï¼Œå¦‚javaï¼Œc#ï¼Œc++ï¼ŒpythonæŠ“å–ç½‘é¡µæ–‡æ¡£çš„æ¥å£æ›´ç®€æ´ï¼›ç›¸æ¯”å…¶ä»–åŠ¨æ€è„šæœ¬è¯­è¨€ï¼Œå¦‚perlï¼Œshellï¼Œpythonçš„urllibåŒ…æä¾›äº†è¾ƒä¸ºå®Œæ•´çš„è®¿é—®ç½‘é¡µæ–‡æ¡£çš„APIã€‚ï¼ˆå½“ç„¶rubyä¹Ÿæ˜¯å¾ˆå¥½çš„é€‰æ‹©ï¼‰æ­¤å¤–ï¼ŒæŠ“å–ç½‘é¡µæœ‰æ—¶å€™éœ€è¦æ¨¡æ‹Ÿæµè§ˆå™¨çš„è¡Œä¸ºï¼Œå¾ˆå¤šç½‘ç«™å¯¹äºç”Ÿç¡¬çš„çˆ¬è™«æŠ“å–éƒ½æ˜¯å°æ€çš„ã€‚è¿™æ˜¯æˆ‘ä»¬éœ€è¦æ¨¡æ‹Ÿuser agentçš„è¡Œä¸ºæ„é€ åˆé€‚çš„è¯·æ±‚ï¼Œè­¬å¦‚æ¨¡æ‹Ÿç”¨æˆ·ç™»é™†ã€æ¨¡æ‹Ÿsession/cookieçš„å­˜å‚¨å’Œè®¾ç½®ã€‚åœ¨pythoné‡Œéƒ½æœ‰éå¸¸ä¼˜ç§€çš„ç¬¬ä¸‰æ–¹åŒ…å¸®ä½ æå®šï¼Œå¦‚Requestsï¼Œmechanize
2ã€ç½‘é¡µæŠ“å–åçš„å¤„ç†æŠ“å–çš„ç½‘é¡µé€šå¸¸éœ€è¦å¤„ç†ï¼Œæ¯”å¦‚è¿‡æ»¤htmlæ ‡ç­¾ï¼Œæå–æ–‡æœ¬ç­‰ã€‚pythonçš„beautifulsoapæä¾›äº†ç®€æ´çš„æ–‡æ¡£å¤„ç†åŠŸèƒ½ï¼Œèƒ½ç”¨æçŸ­çš„ä»£ç å®Œæˆå¤§éƒ¨åˆ†æ–‡æ¡£çš„å¤„ç†ã€‚å…¶å®ä»¥ä¸ŠåŠŸèƒ½å¾ˆå¤šè¯­è¨€å’Œå·¥å…·éƒ½èƒ½åšï¼Œä½†æ˜¯ç”¨pythonèƒ½å¤Ÿå¹²å¾—æœ€å¿«ï¼Œæœ€å¹²å‡€ã€‚

Life is short, you need python.

PSï¼špython2.xå’Œpython3.xæœ‰å¾ˆå¤§ä¸åŒï¼Œæœ¬æ–‡åªè®¨è®ºpython3.xçš„çˆ¬è™«å®ç°æ–¹æ³•ã€‚


çˆ¬è™«æ¶æ„æ¶æ„ç»„æˆURLç®¡ç†å™¨ï¼šç®¡ç†å¾…çˆ¬å–çš„urlé›†åˆå’Œå·²çˆ¬å–çš„urlé›†åˆï¼Œä¼ é€å¾…çˆ¬å–çš„urlç»™ç½‘é¡µä¸‹è½½å™¨ã€‚ç½‘é¡µä¸‹è½½å™¨ï¼ˆurllibï¼‰ï¼šçˆ¬å–urlå¯¹åº”çš„ç½‘é¡µï¼Œå­˜å‚¨æˆå­—ç¬¦ä¸²ï¼Œä¼ é€ç»™ç½‘é¡µè§£æå™¨ã€‚ç½‘é¡µè§£æå™¨ï¼ˆBeautifulSoupï¼‰ï¼šè§£æå‡ºæœ‰ä»·å€¼çš„æ•°æ®ï¼Œå­˜å‚¨ä¸‹æ¥ï¼ŒåŒæ—¶è¡¥å……urlåˆ°URLç®¡ç†å™¨ã€‚
è¿è¡Œæµç¨‹
URLç®¡ç†å™¨åŸºæœ¬åŠŸèƒ½
æ·»åŠ æ–°çš„urlåˆ°å¾…çˆ¬å–urlé›†åˆä¸­ã€‚
åˆ¤æ–­å¾…æ·»åŠ çš„urlæ˜¯å¦åœ¨å®¹å™¨ä¸­ï¼ˆåŒ…æ‹¬å¾…çˆ¬å–urlé›†åˆå’Œå·²çˆ¬å–urlé›†åˆï¼‰ã€‚
è·å–å¾…çˆ¬å–çš„urlã€‚
åˆ¤æ–­æ˜¯å¦æœ‰å¾…çˆ¬å–çš„urlã€‚
å°†çˆ¬å–å®Œæˆçš„urlä»å¾…çˆ¬å–urlé›†åˆç§»åŠ¨åˆ°å·²çˆ¬å–urlé›†åˆã€‚

å­˜å‚¨æ–¹å¼1ã€å†…å­˜ï¼ˆpythonå†…å­˜ï¼‰å¾…çˆ¬å–urlé›†åˆï¼šset()å·²çˆ¬å–urlé›†åˆï¼šset()
2ã€å…³ç³»æ•°æ®åº“ï¼ˆmysqlï¼‰urls(url, is_crawled)
3ã€ç¼“å­˜ï¼ˆredisï¼‰å¾…çˆ¬å–urlé›†åˆï¼šsetå·²çˆ¬å–urlé›†åˆï¼šset
å¤§å‹äº’è”ç½‘å…¬å¸ï¼Œç”±äºç¼“å­˜æ•°æ®åº“çš„é«˜æ€§èƒ½ï¼Œä¸€èˆ¬æŠŠurlå­˜å‚¨åœ¨ç¼“å­˜æ•°æ®åº“ä¸­ã€‚å°å‹å…¬å¸ï¼Œä¸€èˆ¬æŠŠurlå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœæƒ³è¦æ°¸ä¹…å­˜å‚¨ï¼Œåˆ™å­˜å‚¨åˆ°å…³ç³»æ•°æ®åº“ä¸­ã€‚
ç½‘é¡µä¸‹è½½å™¨ï¼ˆurllibï¼‰å°†urlå¯¹åº”çš„ç½‘é¡µä¸‹è½½åˆ°æœ¬åœ°ï¼Œå­˜å‚¨æˆä¸€ä¸ªæ–‡ä»¶æˆ–å­—ç¬¦ä¸²ã€‚
åŸºæœ¬æ–¹æ³•æ–°å»ºbaidu.pyï¼Œå†…å®¹å¦‚ä¸‹ï¼š
import urllib.requestresponse = urllib.request.urlopen(&#x27;http://www.baidu.com&#x27;)buff = response.read()html = buff.decode(&quot;utf8&quot;)print(html)
å‘½ä»¤è¡Œä¸­æ‰§è¡Œpython baidu.pyï¼Œåˆ™å¯ä»¥æ‰“å°å‡ºè·å–åˆ°çš„é¡µé¢ã€‚
æ„é€ Requestä¸Šé¢çš„ä»£ç ï¼Œå¯ä»¥ä¿®æ”¹ä¸ºï¼š
import urllib.requestrequest = urllib.request.Request(&#x27;http://www.baidu.com&#x27;)response = urllib.request.urlopen(request)buff = response.read()html = buff.decode(&quot;utf8&quot;)print(html)

æºå¸¦å‚æ•°æ–°å»ºbaidu2.pyï¼Œå†…å®¹å¦‚ä¸‹ï¼š
import urllib.requestimport urllib.parseurl = &#x27;http://www.baidu.com&#x27;values = &#123;&#x27;name&#x27;: &#x27;voidking&#x27;,&#x27;language&#x27;: &#x27;Python&#x27;&#125;data = urllib.parse.urlencode(values).encode(encoding=&#x27;utf-8&#x27;,errors=&#x27;ignore&#x27;)headers = &#123; &#x27;User-Agent&#x27; : &#x27;Mozilla/5.0 (Windows NT 10.0; WOW64; rv:50.0) Gecko/20100101 Firefox/50.0&#x27; &#125;request = urllib.request.Request(url=url, data=data,headers=headers,method=&#x27;GET&#x27;)response = urllib.request.urlopen(request)buff = response.read()html = buff.decode(&quot;utf8&quot;)print(html)

ä½¿ç”¨Fiddlerç›‘å¬æ•°æ®æˆ‘ä»¬æƒ³è¦æŸ¥çœ‹ä¸€ä¸‹ï¼Œæˆ‘ä»¬çš„è¯·æ±‚æ˜¯å¦çœŸçš„æºå¸¦äº†å‚æ•°ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨fiddlerã€‚æ‰“å¼€fiddlerä¹‹åï¼Œå´æ„å¤–å‘ç°ï¼Œä¸Šé¢çš„ä»£ç ä¼šæŠ¥é”™504ï¼Œæ— è®ºæ˜¯baidu.pyè¿˜æ˜¯baidu2.pyã€‚è™½ç„¶pythonæœ‰æŠ¥é”™ï¼Œä½†æ˜¯åœ¨fiddlerä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯·æ±‚ä¿¡æ¯ï¼Œç¡®å®æºå¸¦äº†å‚æ•°ã€‚
ç»è¿‡æŸ¥æ‰¾èµ„æ–™ï¼Œå‘ç°pythonä»¥å‰ç‰ˆæœ¬çš„Requestéƒ½ä¸æ”¯æŒä»£ç†ç¯å¢ƒä¸‹è®¿é—®httpsã€‚ä½†æ˜¯ï¼Œæœ€è¿‘çš„ç‰ˆæœ¬åº”è¯¥æ”¯æŒäº†æ‰å¯¹ã€‚é‚£ä¹ˆï¼Œæœ€ç®€å•çš„åŠæ³•ï¼Œå°±æ˜¯æ¢ä¸€ä¸ªä½¿ç”¨httpåè®®çš„urlæ¥çˆ¬å–ï¼Œæ¯”å¦‚ï¼Œæ¢æˆhttp://www.csdn.netã€‚ç»“æœï¼Œä¾ç„¶æŠ¥é”™ï¼Œåªä¸è¿‡å˜æˆäº†400é”™è¯¯ã€‚
ç„¶è€Œï¼Œç„¶è€Œï¼Œç„¶è€Œã€‚ã€‚ã€‚ç¥è½¬æŠ˜å‡ºç°äº†ï¼ï¼ï¼å½“æˆ‘æŠŠurlæ¢æˆhttp://www.csdn.net/åï¼Œè¯·æ±‚æˆåŠŸï¼æ²¡é”™ï¼Œå°±æ˜¯åœ¨ç½‘å€åé¢å¤šåŠ äº†ä¸€ä¸ªæ–œæ /ã€‚åŒç†ï¼ŒæŠŠhttp://www.baidu.comæ”¹æˆhttp://www.baidu.com/ï¼Œè¯·æ±‚ä¹ŸæˆåŠŸäº†ï¼ç¥å¥‡ï¼ï¼ï¼
æ·»åŠ å¤„ç†å™¨
import urllib.requestimport http.cookiejar# åˆ›å»ºcookieå®¹å™¨cj = http.cookiejar.CookieJar()# åˆ›å»ºopeneropener = urllib.request.build_opener(urllib.request.HTTPCookieProcessor(cj))# ç»™urllib.requestå®‰è£…openerurllib.request.install_opener(opener)# è¯·æ±‚request = urllib.request.Request(&#x27;http://www.baidu.com/&#x27;)response = urllib.request.urlopen(request)buff = response.read()html = buff.decode(&quot;utf8&quot;)print(html)print(cj)

ç½‘é¡µè§£æå™¨ï¼ˆBeautifulSoupï¼‰ä»ç½‘é¡µä¸­æå–å‡ºæœ‰ä»·å€¼çš„æ•°æ®å’Œæ–°çš„urlåˆ—è¡¨ã€‚
è§£æå™¨é€‰æ‹©ä¸ºäº†å®ç°è§£æå™¨ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€html.parserã€BeautifulSoupã€lxmlç­‰ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©BeautifulSoupã€‚å…¶ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼åŸºäºæ¨¡ç³ŠåŒ¹é…ï¼Œè€Œå¦å¤–ä¸‰ç§åˆ™æ˜¯åŸºäºDOMç»“æ„åŒ–è§£æã€‚
BeautifulSoupå®‰è£…æµ‹è¯•1ã€å®‰è£…ï¼Œåœ¨å‘½ä»¤è¡Œä¸‹æ‰§è¡Œpip install beautifulsoup4ã€‚2ã€æµ‹è¯•
import bs4print(bs4)

ä½¿ç”¨è¯´æ˜
åŸºæœ¬ç”¨æ³•1ã€åˆ›å»ºBeautifulSoupå¯¹è±¡
import bs4from bs4 import BeautifulSoup# æ ¹æ®htmlç½‘é¡µå­—ç¬¦ä¸²åˆ›å»ºBeautifulSoupå¯¹è±¡html_doc = &quot;&quot;&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;p class=&quot;title&quot;&gt;&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;&lt;/p&gt;&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;and they lived at the bottom of a well.&lt;/p&gt;&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;&quot;&quot;&quot;soup = BeautifulSoup(html_doc)print(soup.prettify())

2ã€è®¿é—®èŠ‚ç‚¹
print(soup.title)print(soup.title.name)print(soup.title.string)print(soup.title.parent.name)print(soup.p)print(soup.p[&#x27;class&#x27;])

3ã€æŒ‡å®štagã€classæˆ–id
print(soup.find_all(&#x27;a&#x27;))print(soup.find(&#x27;a&#x27;))print(soup.find(class_=&#x27;title&#x27;))print(soup.find(id=&quot;link3&quot;))print(soup.find(&#x27;p&#x27;,class_=&#x27;title&#x27;))

4ã€ä»æ–‡æ¡£ä¸­æ‰¾åˆ°æ‰€æœ‰&lt;a&gt;æ ‡ç­¾çš„é“¾æ¥
for link in soup.find_all(&#x27;a&#x27;):    print(link.get(&#x27;href&#x27;))
å‡ºç°äº†è­¦å‘Šï¼Œæ ¹æ®æç¤ºï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºBeautifulSoupå¯¹è±¡æ—¶ï¼ŒæŒ‡å®šè§£æå™¨å³å¯ã€‚
soup = BeautifulSoup(html_doc,&#x27;html.parser&#x27;)

5ã€ä»æ–‡æ¡£ä¸­è·å–æ‰€æœ‰æ–‡å­—å†…å®¹
print(soup.get_text())

6ã€æ­£åˆ™åŒ¹é…
link_node = soup.find(&#x27;a&#x27;,href=re.compile(r&#x27;til&#x27;))print(link_node)


åè®°pythonçˆ¬è™«åŸºç¡€çŸ¥è¯†ï¼Œè‡³æ­¤è¶³å¤Ÿï¼Œæ¥ä¸‹æ¥ï¼Œåœ¨å®æˆ˜ä¸­å­¦ä¹ æ›´é«˜çº§çš„çŸ¥è¯†ã€‚
ä¹¦ç­¾Pythonå¼€å‘ç®€å•çˆ¬è™«http://www.imooc.com/learn/563
The Python Standard Libraryhttps://docs.python.org/3/library/index.html
Beautiful Soup 4.2.0 æ–‡æ¡£https://www.crummy.com/software/BeautifulSoup/bs4/doc/index.zh.html
ä¸ºä»€ä¹ˆpythoné€‚åˆå†™çˆ¬è™«ï¼Ÿhttp://www.cnblogs.com/benzone/p/5854084.html
å¦‚ä½•å­¦ä¹ Pythonçˆ¬è™«[å…¥é—¨ç¯‡]ï¼Ÿhttps://zhuanlan.zhihu.com/p/21479334?refer=passer
ä½ éœ€è¦è¿™äº›ï¼šPython3.xçˆ¬è™«å­¦ä¹ èµ„æ–™æ•´ç†https://zhuanlan.zhihu.com/p/24358829?refer=passer
å¦‚ä½•å…¥é—¨ Python çˆ¬è™«ï¼Ÿhttps://www.zhihu.com/question/20899988
Python3.X æŠ“å–ç½‘ç»œèµ„æºhttp://www.open-open.com/lib/view/open1396062681294.html
pythonç½‘ç»œè¯·æ±‚å’Œâ€HTTP Error 504:Fiddler - Receive Failureâ€http://blog.csdn.net/guoguo527/article/details/50709244
æ€ä¹ˆä½¿ç”¨FiddleræŠ“å–è‡ªå·±å†™çš„çˆ¬è™«çš„åŒ…ï¼Ÿhttps://www.zhihu.com/question/52614615
fiddlerå¯¹pythonè„šæœ¬æŠ“å–httpsåŒ…æ—¶å‘ç”Ÿäº†é”™è¯¯?https://www.zhihu.com/question/42104344?sort=created
HTTPSå’ŒHTTPçš„åŒºåˆ«http://blog.csdn.net/whatday/article/details/38147103
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>çˆ¬è™«</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonæ¨¡å—</title>
    <url>/dev-python-module/</url>
    <content><![CDATA[ä»€ä¹ˆæ˜¯Pythonæ¨¡å—ï¼ŸPythonä¸­ï¼Œæ¯ä¸€ä¸ª .py æ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªæ¨¡å—ã€‚åŒ…å« .py æ–‡ä»¶çš„ç›®å½•å«åšåŒ…ã€‚
Python æ¨¡å—(Module)ï¼Œæ˜¯ä¸€ä¸ª Python æ–‡ä»¶ï¼Œä»¥ .py ç»“å°¾ï¼ŒåŒ…å«äº† Python å¯¹è±¡å®šä¹‰å’ŒPythonè¯­å¥ã€‚
æ¨¡å—è®©ä½ èƒ½å¤Ÿæœ‰é€»è¾‘åœ°ç»„ç»‡ä½ çš„ Python ä»£ç æ®µã€‚
æŠŠç›¸å…³çš„ä»£ç åˆ†é…åˆ°ä¸€ä¸ªæ¨¡å—é‡Œèƒ½è®©ä½ çš„ä»£ç æ›´å¥½ç”¨ï¼Œæ›´æ˜“æ‡‚ã€‚
æ¨¡å—èƒ½å®šä¹‰å‡½æ•°ï¼Œç±»å’Œå˜é‡ï¼Œæ¨¡å—é‡Œä¹Ÿèƒ½åŒ…å«å¯æ‰§è¡Œçš„ä»£ç ã€‚
å‚è€ƒæ–‡æ¡£ï¼šPython æ¨¡å—


æœç´¢è·¯å¾„å½“å¯¼å…¥ä¸€ä¸ªæ¨¡å—æ—¶ï¼ŒPython è§£æå™¨å¯¹æ¨¡å—ä½ç½®çš„æœç´¢é¡ºåºä¸ºï¼š
1ã€å½“å‰ç›®å½•ã€‚2ã€shell å˜é‡ PYTHONPATH ä¸­çš„æ¯ä¸ªç›®å½•ã€‚3ã€Python å®‰è£…è·¯å¾„ã€‚UNIXä¸‹ï¼Œé»˜è®¤è·¯å¾„ä¸€èˆ¬ä¸º/usr/local/lib/python/ã€‚
æ¨¡å—æœç´¢è·¯å¾„å­˜å‚¨åœ¨ system æ¨¡å—çš„ sys.path å˜é‡ä¸­ã€‚å˜é‡é‡ŒåŒ…å«å½“å‰ç›®å½•ï¼ŒPYTHONPATHå’Œç”±å®‰è£…è¿‡ç¨‹å†³å®šçš„é»˜è®¤ç›®å½•ã€‚
å¯¼å…¥æ¨¡å—è¯­æ³•import module_namefrom package_name import module_name

å¯¼å…¥æ¨¡å—ç¤ºä¾‹1ã€æ–°å»ºname.pyï¼Œå†…å®¹ä¸ºï¼š
name=&#x27;voidking&#x27;

2ã€åŒç›®å½•ä¸‹ï¼Œè¿›å…¥python shell
python

3ã€å¼•å…¥æ¨¡å—
&gt;&gt;&gt; import name&gt;&gt;&gt; print(name.name)

å¯¼å…¥æŒ‡å®šæ¨¡å—è‡ªå·±æ–°å»ºäº†ä¸€ä¸ªæ¨¡å—aï¼Œè·¯å¾„ä¸åŒçš„æƒ…å†µä¸‹ï¼Œæ€æ ·è®©å®ƒè¢«æ¨¡å—bå¯¼å…¥ï¼Ÿç­”ï¼šä½¿ç”¨ sys.path.append å‡½æ•°ã€‚
# sys.path.remove(&#x27;/path/to/a&#x27;)sys.path.append(&#x27;/path/to/a&#x27;)

å…¨å±€å¯¼å…¥æ¨¡å—è‡ªå®šä¹‰äº†ä¸€ä¸ªæ¨¡å—ï¼Œè·¯å¾„ä¸º/home/voidking/scripts/vktools/ï¼Œæ€æ ·è®©å®ƒå¯ä»¥è¢«å…¨å±€å¯¼å…¥ï¼Ÿ
æ–¹æ³•ä¸€æ–¹æ³•ä¸€ï¼šPYTHONPATHå˜é‡ä¸­ï¼Œæ·»åŠ è‡ªå®šä¹‰æ¨¡å—çš„è·¯å¾„
export PYTHONPATH=/home/voidking/scripts/vktools:$PYTHONPATH

æ–¹æ³•äºŒæ–¹æ³•äºŒï¼šè‡ªå®šä¹‰æ¨¡å—çš„è·¯å¾„ï¼Œå†™å…¥åˆ°å®‰è£…è·¯å¾„ä¸­çš„.pthæ–‡ä»¶ä¸­ã€‚
å…·ä½“æ“ä½œæ–¹æ³•ï¼š1ã€è¿›å…¥ xxx/python3/lib/python3.6/site-packages ç›®å½•2ã€æ–°å»º yyy.pth æ–‡ä»¶ï¼Œå†™å…¥è‡ªå®šä¹‰æ¨¡å—çš„è·¯å¾„
/home/voidking/scripts/vktools/

è¯¦æƒ…å‚è€ƒpythonä¹‹ä½¿ç”¨.pthæ–‡ä»¶å¯¼å…¥è‡ªå®šä¹‰æ¨¡å—
]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>PythonåŸºç¡€</title>
    <url>/dev-python-start/</url>
    <content><![CDATA[Pythonç®€ä»‹
Bruce Eckel: Life is short, you need Python.

Pythonï¼Œæ˜¯ Bruce Eckel åœ¨1989å¹´ä¸ºäº†æ‰“å‘æ— èŠçš„åœ£è¯èŠ‚è€Œç¼–å†™çš„ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œç‰¹ç‚¹æ˜¯ä¼˜é›…ã€æ˜ç¡®ã€ç®€å•ï¼Œç°ä»Šæ‹¥æœ‰ä¸°å¯Œçš„æ ‡å‡†åº“å’Œç¬¬ä¸‰æ–¹åº“ã€‚
Pythoné€‚åˆå¼€å‘Webç½‘ç«™å’Œå„ç§ç½‘ç»œæœåŠ¡ï¼Œç³»ç»Ÿå·¥å…·å’Œè„šæœ¬ï¼Œä½œä¸ºâ€œèƒ¶æ°´â€è¯­è¨€æŠŠå…¶ä»–è¯­è¨€å¼€å‘çš„æ¨¡å—åŒ…è£…èµ·æ¥ä½¿ç”¨ï¼Œç§‘å­¦è®¡ç®—ç­‰ç­‰ã€‚
æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°±æ¥å­¦ä¹ ä¸€ä¸‹Pythonçš„åŸºç¡€çŸ¥è¯†ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Pythonå®˜ç½‘
Python 3.6.10 documentation
PEP 8 â€“ Style Guide for Python Code
Pythonå…¥é—¨
å¦‚ä½•å­¦ä¹ Pythonçˆ¬è™«ï¼Ÿ
ä½ éœ€è¦è¿™äº›ï¼šPython3.xçˆ¬è™«å­¦ä¹ èµ„æ–™æ•´ç†



å‡†å¤‡å·¥ä½œ1ã€åœ¨Pythonå®˜ç½‘ä¸‹è½½å®‰è£…å–œæ¬¢çš„ç‰ˆæœ¬ï¼ŒéƒåŒå­¦ä½¿ç”¨çš„ï¼Œæ˜¯å½“å‰æœ€æ–°ç‰ˆæœ¬3.6.0ã€‚2ã€æ‰“å¼€IDLEï¼Œè¿™æ˜¯Pythonçš„é›†æˆå¼€å‘ç¯å¢ƒï¼Œå°½ç®¡ç®€å•ï¼Œä½†æå…¶æœ‰ç”¨ã€‚IDLEåŒ…æ‹¬ä¸€ä¸ªèƒ½å¤Ÿåˆ©ç”¨é¢œè‰²çªå‡ºæ˜¾ç¤ºè¯­æ³•çš„ç¼–è¾‘å™¨ã€ä¸€ä¸ªè°ƒè¯•å·¥å…·ã€Python Shellï¼Œä»¥åŠä¸€ä¸ªå®Œæ•´çš„Python3åœ¨çº¿æ–‡æ¡£é›†ã€‚
hello worldäº¤äº’æ¨¡å¼1ã€æ‰“å¼€IDLE
2ã€è¾“å…¥æƒ³è¦æ‰§è¡Œçš„è¯­å¥
print(&#x27;hello world&#x27;)

PSï¼šè¯­å¥æœ«å°¾åŠ ä¸åŠ åˆ†å·;éƒ½å¯ä»¥
3ã€æ‰§è¡Œè¯­å¥å›è½¦ï¼Œå³å¯æ‰§è¡Œè¯­å¥ã€‚
è„šæœ¬æ¨¡å¼1ã€æ–°å»ºæ–‡ä»¶hello.pyï¼Œå†…å®¹ä¸ºï¼š
print(&#x27;hello world&#x27;)

2ã€æ‰§è¡Œè„šæœ¬
python hello.py

è„šæœ¬æ¨¡å¼-æŒ‡å®šè§£é‡Šå™¨1ã€æ–°å»ºæ–‡ä»¶hello.pyï¼Œå†…å®¹ä¸ºï¼š
#!/usr/bin/env pythonprint(&#x27;hello world&#x27;)

2ã€æ·»åŠ æ‰§è¡Œæƒé™
chmod a+x hello.py

3ã€æ‰§è¡Œè„šæœ¬
./hello.py

åŸºç¡€è¯­æ³•å¸¸ç”¨å‡½æ•°ï¼ˆprintï¼‰ã€æ•°æ®ç±»å‹ã€è¡¨è¾¾å¼ã€å˜é‡ã€æ¡ä»¶å’Œå¾ªç¯ã€å‡½æ•°ã€‚å’Œå…¶ä»–è¯­è¨€ç±»ä¼¼ï¼Œä¸‹é¢é€‰æ‹©ä¸€éƒ¨åˆ†å±•å¼€ã€‚
listé“¾è¡¨æ•°ç»„1ã€å®šä¹‰æ•°ç»„myList = [&#39;Hello&#39;, 100, True]
2ã€è¾“å‡ºæ•°ç»„print(myList)
3ã€è¾“å‡ºæ•°ç»„å…ƒç´ print(myList[0])ï¼Œprint(myList[-1])
4ã€è¿½åŠ å…ƒç´ åˆ°æœ«å°¾myList.append(&#39;voidking&#39;)
5ã€è¿½åŠ å…ƒç´ åˆ°å¤´éƒ¨myList.insert(0,&#39;voidking&#39;)
6ã€åˆ é™¤å…ƒç´ myList.pop()ï¼ŒmyList.pop(0)
7ã€å…ƒç´ èµ‹å€¼myList[0]=&#39;hello666&#39;
tupleå›ºå®šæ•°ç»„1ã€å®šä¹‰æ•°ç»„myTuple = (&#39;Hello&#39;, 100, True)é”™è¯¯å®šä¹‰ï¼šmyTuple1=(1)ï¼Œæ­£ç¡®å®šä¹‰ï¼šmyTuple=(1,)
2ã€è¾“å‡ºæ•°ç»„print(myTuple)
3ã€è¾“å‡ºæ•°ç»„å…ƒç´ print(myTuple[0])
4ã€tupleå’Œlistç»“åˆt = (&#39;a&#39;, &#39;b&#39;, [&#39;A&#39;, &#39;B&#39;])ï¼Œt[2][0]=&#39;X&#39;
ifè¯­å¥ifscore = 75if score&gt;=60:    print &#x27;passed&#x27;

if-elseif score&gt;=60:    print(&#x27;passed&#x27;)else:    print(&#x27;failed&#x27;)

if-elif-elseif score&gt;=90:    print(&#x27;excellent&#x27;)elif score&gt;=80:    print(&#x27;good&#x27;)elif score&gt;=60:    print(&#x27;passed&#x27;)else:    print(&#x27;failed&#x27;)

å¾ªç¯forå¾ªç¯L = [75, 92, 59, 68]sum = 0.0for score in L:       sum += scoreprint(sum / 4)

whileå¾ªç¯sum = 0x = 1while x&lt;100:    sum += x    x = x + 1print(sum)

breaksum = 0x = 1while True:    sum = sum + x    x = x + 1    if x &gt; 100:        breakprint(sum)

continueL = [75, 98, 59, 81, 66, 43, 69, 85]sum = 0.0n = 0for x in L:    if x &lt; 60:        continue    sum = sum + x    n = n + 1print(sum/n)

å¤šé‡å¾ªç¯for x in [&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;]:    for y in [&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;]:        print(x + y)

dictdictçš„ä½œç”¨æ˜¯å»ºç«‹ä¸€ç»„ keyå’Œä¸€ç»„valueçš„æ˜ å°„å…³ç³»ã€‚
d = &#123;    &#x27;Adam&#x27;: 95,    &#x27;Lisa&#x27;: 85,    &#x27;Bart&#x27;: 59,    &#x27;Paul&#x27;: 75&#125;print(d)print(d[&#x27;Adam&#x27;])print(d.get(&#x27;Lisa&#x27;))d[&#x27;voidking&#x27;]=100print(d)for key in d:    print(key+&#x27;:&#x27;,d.get(key))

setsetæŒæœ‰ä¸€ç³»åˆ—å…ƒç´ ï¼Œè¿™ä¸€ç‚¹å’Œlistå¾ˆåƒï¼Œä½†æ˜¯setçš„å…ƒç´ æ²¡æœ‰é‡å¤ï¼Œè€Œä¸”æ˜¯æ— åºçš„ï¼Œè¿™ç‚¹å’Œdictçš„keyå¾ˆåƒã€‚
s = set([&#x27;Adam&#x27;, &#x27;Lisa&#x27;, &#x27;Bart&#x27;, &#x27;Paul&#x27;])print(s)s = set([&#x27;Adam&#x27;, &#x27;Lisa&#x27;, &#x27;Bart&#x27;, &#x27;Paul&#x27;, &#x27;Paul&#x27;])print(s)len(s)print(&#x27;Adam&#x27; in s)print(&#x27;adam&#x27; in s)for name in s:    print(name)

s = set([(&#x27;Adam&#x27;, 95), (&#x27;Lisa&#x27;, 85), (&#x27;Bart&#x27;, 59)])for x in s:    print(x[0]+&#x27;:&#x27;,x[1])

s.add(100)print(s)s.remove((&#x27;Adam&#x27;,95))print(s)

å‡½æ•°è‡ªå¸¦å‡½æ•°L = [x*x for x in range(1,101)]print(sum(L))

è‡ªå®šä¹‰å‡½æ•°def my_abs(x):    if x &gt;= 0:        return x    else:        return -xprint(my_abs(-100))

å¼•å…¥å‡½æ•°åº“import mathdef quadratic_equation(a, b, c):    x = b * b - 4 * a * c    if x &lt; 0:        return none    elif x == 0:        return -b / (2 *a)    else:        return ((math.sqrt(x) - b ) / (2 * a)) , ((-math.sqrt(x) - b ) / (2 * a))print(quadratic_equation(2, 3, 0))print(quadratic_equation(1, -6, 5))

å¯å˜å‚æ•°def average(*args):    if args:        return sum(args)*1.0/len(args)    else:        return 0.0print(average())print(average(1, 2))print(average(1, 2, 2, 3, 4))

åˆ‡ç‰‡liståˆ‡ç‰‡L = [&#x27;Adam&#x27;, &#x27;Lisa&#x27;, &#x27;Bart&#x27;, &#x27;Paul&#x27;]print(L[0:3])print(L[:3])print(L[1:3])print(L[:])print(L[::2])

å€’åºåˆ‡ç‰‡print(L[-2:])print(L[-3:-1])print(L[-4:-1:2])

L = range(1, 101)print(L[-10:])print(L[4::5][-10:])
PSï¼šrangeæ˜¯æœ‰åºçš„listï¼Œé»˜è®¤ä»¥å‡½æ•°å½¢å¼è¡¨ç¤ºï¼Œæ‰§è¡Œrangeå‡½æ•°ï¼Œå³å¯ä»¥listå½¢å¼è¡¨ç¤ºã€‚
å­—ç¬¦ä¸²åˆ‡ç‰‡def firstCharUpper(s):    return s[0:1].upper() + s[1:]print(firstCharUpper(&#x27;hello&#x27;))

è¿­ä»£Pythonçš„forå¾ªç¯ä¸ä»…å¯ä»¥ç”¨åœ¨listæˆ–tupleä¸Šï¼Œè¿˜å¯ä»¥ä½œç”¨åœ¨å…¶ä»–ä»»ä½•å¯è¿­ä»£å¯¹è±¡ä¸Šã€‚è¿­ä»£æ“ä½œå°±æ˜¯å¯¹äºä¸€ä¸ªé›†åˆï¼Œæ— è®ºè¯¥é›†åˆæ˜¯æœ‰åºè¿˜æ˜¯æ— åºï¼Œæˆ‘ä»¬ç”¨forå¾ªç¯æ€»æ˜¯å¯ä»¥ä¾æ¬¡å–å‡ºé›†åˆçš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚é›†åˆæ˜¯æŒ‡åŒ…å«ä¸€ç»„å…ƒç´ çš„æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬ï¼š

æœ‰åºé›†åˆï¼šlistï¼Œtupleï¼Œstrå’Œunicodeï¼›
æ— åºé›†åˆï¼šset
æ— åºé›†åˆå¹¶ä¸”å…·æœ‰key-valueå¯¹ï¼šdict

for i in range(1,101):    if i%7 == 0:        print(i)

ç´¢å¼•è¿­ä»£å¯¹äºæœ‰åºé›†åˆï¼Œå…ƒç´ æ˜¯æœ‰ç´¢å¼•çš„ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åœ¨forå¾ªç¯ä¸­æ‹¿åˆ°ç´¢å¼•ï¼Œæ€ä¹ˆåŠï¼Ÿæ–¹æ³•æ˜¯ä½¿ç”¨enumerate()å‡½æ•°ã€‚
L = [&#x27;Adam&#x27;, &#x27;Lisa&#x27;, &#x27;Bart&#x27;, &#x27;Paul&#x27;]for index, name in enumerate(L):    print(index+1, &#x27;-&#x27;, name)myList = zip([100,20,30,40],L);for index, name in myList:    print(index, &#x27;-&#x27;, name)

è¿­ä»£dictçš„valued = &#123; &#x27;Adam&#x27;: 95, &#x27;Lisa&#x27;: 85, &#x27;Bart&#x27;: 59 &#125;print(d.values())for v in d.values():    print(v)

PSï¼šPython3.xä¸­ï¼Œdictçš„æ–¹æ³•dict.keys()ï¼Œdict.items()ï¼Œdict.values()ä¸ä¼šå†è¿”å›åˆ—è¡¨ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ˜“è¯»çš„â€œviewsâ€ã€‚è¿™æ ·ä¸€æ¥ï¼Œk = d.keys();k.sort()ä¸å†æœ‰ç”¨ï¼Œå¯ä»¥ä½¿ç”¨k = sorted(d)æ¥ä»£æ›¿ã€‚åŒæ—¶ï¼Œdict.iterkeys()ï¼Œdict.iteritems()ï¼Œdict.itervalues()æ–¹æ³•ä¸å†æ”¯æŒã€‚
è¿­ä»£dictçš„keyå’Œvalued = &#123; &#x27;Adam&#x27;: 95, &#x27;Lisa&#x27;: 85, &#x27;Bart&#x27;: 59 &#125;for key, value in d.items():    print(key, &#x27;:&#x27;, value)

åˆ—è¡¨ç”Ÿæˆä¸€èˆ¬è¡¨è¾¾å¼L = [x*(x+1) for x in range(1,100)]print(L)

å¤æ‚è¡¨è¾¾å¼d = &#123; &#x27;Adam&#x27;: 95, &#x27;Lisa&#x27;: 85, &#x27;Bart&#x27;: 59 &#125;def generate_tr(name, score):    if score &gt;=60:        return &#x27;&lt;tr&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td&gt;%s&lt;/td&gt;&lt;/tr&gt;&#x27; % (name, score)    else:        return &#x27;&lt;tr&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td style=&quot;color:red&quot;&gt;%s&lt;/td&gt;&lt;/tr&gt;&#x27; % (name, score)tds = [generate_tr(name,score) for name, score in d.items()]print(&#x27;&lt;table border=&quot;1&quot;&gt;&#x27;)print(&#x27;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Score&lt;/th&gt;&lt;tr&gt;&#x27;)print(&#x27;\n&#x27;.join(tds))print(&#x27;&lt;/table&gt;&#x27;)

æ¡ä»¶è¡¨è¾¾å¼L = [x * x for x in range(1, 11) if x % 2 == 0]print(L)

def toUppers(L):    return [x.upper() for x in L if isinstance(x,str)]print(toUppers([&#x27;Hello&#x27;, &#x27;world&#x27;, 101]))

å¤šå±‚è¡¨è¾¾å¼L = [m + n for m in &#x27;ABC&#x27; for n in &#x27;123&#x27;]print(L)

L = [a*100+b*10+c for a in range(1,10) for b in range(0,10) for c in range(1,10) if a==c]print(L)



]]></content>
      <categories>
        <category>engineering</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>å¤§æ•°æ®çŸ¥è¯†ç»“æ„</title>
    <url>/dev-big-data-structure/</url>
    <content><![CDATA[å¤§æ•°æ®è„‘å›¾


å¤§æ•°æ®äº‘è®¡ç®—1ã€äº‘æœåŠ¡

SaaS
PaaS
LaaS

2ã€Openstack
3ã€Docker
åˆ†å¸ƒå¼è®¡ç®—1ã€hadoop

HDFSï¼ˆåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼‰
Mapreduceï¼ˆè®¡ç®—æ¡†æ¶ï¼‰
yarnï¼ˆèµ„æºç®¡ç†å¹³å°ï¼‰
pigï¼ˆpiglatinè¯­å¥åˆ°mapreduceçš„æ˜ å°„ï¼‰
hiveï¼ˆæ•°æ®ä»“åº“ï¼Œæä¾›SQLï¼‰
mahoutï¼ˆæœºå™¨å­¦ä¹ ç®—æ³•çš„mapreduceå®ç°åº“ï¼‰

2ã€spark

RDO
Spark SQL
Spark Streamingï¼ˆæµå¤„ç†ï¼‰
MLlibï¼ˆç”¨äºæœºå™¨å­¦ä¹ ï¼‰

3ã€storm

Topology
å’ŒKAFKAé›†åˆ

æ•°æ®åˆ†æå·¥å…·1ã€Rè¯­è¨€2ã€matlab3ã€SAS
ç®—æ³•1ã€æœºå™¨å­¦ä¹ 

èšç±»
æ—¶é—´åºåˆ—
æ¨èç³»ç»Ÿ
å›å½’åˆ†æ
æ–‡æœ¬æŒ–æ˜
å†³ç­–æ ‘
æ”¯æŒå‘é‡æœº
è´å¶æ–¯åˆ†ç±»
ç¥ç»ç½‘ç»œ

2ã€ä¸€è‡´æ€§

paxos
raft
gossip

3ã€æ•°æ®ç»“æ„

æ ˆã€é˜Ÿåˆ—ã€é“¾è¡¨
æ•£åˆ—è¡¨
äºŒå‰æ ‘ã€çº¢é»‘æ ‘ã€Bæ ‘
é¢

4ã€å¸¸ç”¨ç®—æ³•

æ’åº
æœ€å¤§å­æ•°ç»„
æœ€é•¿å…¬å…±å­åºåˆ—
æœ€å°ç”Ÿæˆæ ‘
æœ€çŸ­è·¯å¾„
çŸ©é˜µçš„å­˜å‚¨å’Œè¿ç®—

ä¹¦ç­¾å¤§æ•°æ®èµ„æºæ•´ç†http://www.toutiao.com/i6361620880396648962/
]]></content>
      <categories>
        <category>engineering</category>
        <category>bigdata</category>
      </categories>
      <tags>
        <tag>å¤§æ•°æ®</tag>
      </tags>
  </entry>
  <entry>
    <title>å…¬äº¤æŸ¥è¯¢ç³»ç»Ÿ</title>
    <url>/dev-bus-search-system/</url>
    <content><![CDATA[äº¤äº’æµç¨‹1ã€ç”¨æˆ·è¿›å…¥é¦–é¡µï¼Œçœ‹åˆ°çƒ­é—¨å…¬äº¤çº¿è·¯åˆ—è¡¨ã€‚2ã€è¾“å…¥å…³é”®è¯ï¼Œå¯ä»¥æœç´¢åˆ°ç›¸å…³å…¬äº¤çº¿è·¯ã€‚3ã€å•å‡»é€‰æ‹©å…¬äº¤çº¿è·¯ï¼Œè¿›å…¥çº¿è·¯æ–¹å‘é€‰æ‹©é¡µé¢ã€‚4ã€å•å‡»é€‰æ‹©çº¿è·¯æ–¹å‘ï¼Œè¿›å…¥ç™¾åº¦åœ°å›¾ã€‚5ã€åœ¨åˆå§‹åŒ–ç™¾åº¦åœ°å›¾æ—¶ï¼Œä¼ å…¥çº¿è·¯æ–¹å‘ã€‚


æŠ€æœ¯æ¶æ„å‰ç«¯æŠ€æœ¯ï¼šjqueryå’Œart-templateã€‚åç«¯æŠ€æœ¯ï¼šservletã€freemarkerã€jdbcå’Œmysqlã€‚
è¯¦ç»†è®¾è®¡å‰ç«¯å“åº”å¼æœ¬ç³»ç»Ÿé€‚ç”¨äºç§»åŠ¨ç«¯ï¼Œä¸ºäº†é€‚åº”ä¸åŒçš„å±å¹•ï¼Œæ‰€ä»¥å‰ç«¯ä½¿ç”¨å“åº”å¼å¸ƒå±€ã€‚
html&#123;font-size:10px&#125;@media screen and (min-width:321px) and (max-width:375px)&#123;html&#123;font-size:11px&#125;&#125;@media screen and (min-width:376px) and (max-width:414px)&#123;html&#123;font-size:12px&#125;&#125;@media screen and (min-width:415px) and (max-width:639px)&#123;html&#123;font-size:15px&#125;&#125;@media screen and (min-width:640px) and (max-width:719px)&#123;html&#123;font-size:20px&#125;&#125;@media screen and (min-width:720px) and (max-width:749px)&#123;html&#123;font-size:22.5px&#125;&#125;@media screen and (min-width:750px) and (max-width:799px)&#123;html&#123;font-size:23.5px&#125;&#125;@media screen and (min-width:800px)&#123;html&#123;font-size:25px&#125;&#125;*&#123;    margin: 0;    padding: 0;&#125;

æ¨¡æ¿å¼•æ“æœç´¢åï¼Œæœç´¢ç»“æœè¦æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚è¿™é‡Œï¼Œæˆ‘ä»¬é€‰ç”¨art-templateæ¨¡æ¿å¼•æ“ï¼ŒæŠŠæœç´¢è¯·æ±‚å¾—åˆ°çš„æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚
&lt;script id=&quot;line-template&quot; type=&quot;text/html&quot;&gt;&lt;ul&gt;    &#123;&#123;each lineList as line&#125;&#125;    &lt;a href=&quot;$&#123;basePath&#125;/Direction?busName=&#123;&#123;line.busName&#125;&#125;&quot;&gt;        &lt;li&gt;&#123;&#123;line.fullName&#125;&#125;(&#123;&#123;line.firstStop&#125;&#125;-&#123;&#123;line.lastStop&#125;&#125;)&lt;/li&gt;    &lt;/a&gt;    &#123;&#123;/each&#125;&#125;&lt;/ul&gt;&lt;/script&gt;

$(&#x27;#search&#x27;).click(function(event) &#123;    var basePath = $(&#x27;#basePath&#x27;).val();    var key = $(&#x27;#key&#x27;).val();    $.ajax(&#123;        url: basePath+&#x27;/Search&#x27;,        type: &#x27;POST&#x27;,        dataType: &#x27;json&#x27;,        data: &#123;key: key&#125;,        success: function(data)&#123;            console.log(data);            var html = template(&#x27;line-template&#x27;, data);            $(&#x27;.content&#x27;).html(html);        &#125;,        error: function(xhr)&#123;            console.log(xhr);        &#125;    &#125;);&#125;);

ç™¾åº¦åœ°å›¾æœ€ç»ˆç»“æœï¼Œä»¥ç™¾åº¦åœ°å›¾çš„æ–¹å¼å±•ç¤ºï¼Œéœ€è¦ç”¨åˆ°ç™¾åº¦åœ°å›¾apiã€‚
&lt;script type=&quot;text/javascript&quot;&gt;    function  init() &#123;        window.busName = document.getElementById(&#x27;busName&#x27;).value;        window.firstStop = document.getElementById(&#x27;firstStop&#x27;).value;        // console.log(window.busName);        // console.log(window.firstStop);    &#125;    // ç™¾åº¦åœ°å›¾APIåŠŸèƒ½    var map = new BMap.Map(&quot;l-map&quot;);            // åˆ›å»ºMapå®ä¾‹    map.centerAndZoom(new BMap.Point(125.434025,43.83246), 12);    var busline = new BMap.BusLineSearch(map,&#123;        renderOptions:&#123;map:map,panel:&quot;r-result&quot;&#125;,            onGetBusListComplete: function(result)&#123;                var directionArr = result.PA;                console.log(result);                if(result) &#123;                    var line = result.getBusListItem(0);                    var backLine = result.getBusListItem(1);                    console.log(line);                    var regx = /\([\u4E00-\u9FA5\uF900-\uFA2D]*-/;                    var str = line.name;                    console.log(str);                    var rs = str.match(regx)[0];                    rs = rs.slice(1,-1);                    console.log(rs);                    if(rs == window.firstStop)&#123;                        busline.getBusLine(line);                    &#125;else&#123;                        busline.getBusLine(backLine);                    &#125;                &#125;            &#125;    &#125;);    function busSearch()&#123;        busline.getBusList(window.busName);        //console.log(busline);    &#125;    init();    setTimeout(function()&#123;        busSearch();    &#125;,1500);&lt;/script&gt;

åç«¯servleté‰´äºæœ¬ç³»ç»Ÿä¸šåŠ¡ç®€å•ï¼Œæ‰€ä»¥ä½¿ç”¨servletå°±å¤Ÿç”¨äº†ã€‚
package com.voidking.servlet;import java.io.IOException;import javax.servlet.ServletException;import javax.servlet.annotation.WebServlet;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;@WebServlet(&quot;/Home&quot;)public class Home extends HttpServlet &#123;    public Home() &#123;        super();    &#125;    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;        // TODO Auto-generated method stub        response.getWriter().append(&quot;Served at: &quot;).append(request.getContextPath());    &#125;    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;        // TODO Auto-generated method stub        doGet(request, response);    &#125;&#125;

freemarkerè¿›å…¥é¦–é¡µæ—¶ï¼ŒæŸ¥è¯¢å‡ºçš„æ•°æ®éœ€è¦æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚è¿™é‡Œï¼Œæˆ‘ä»¬è¦é€‰æ‹©ä¸€ä¸ªåç«¯æ¨¡æ¿å¼•æ“ã€‚ä¸ä¹ æƒ¯ä½¿ç”¨jspï¼Œå†³å®šä½¿ç”¨freemarkerã€‚
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;    // TODO Auto-generated method stub    //freemarkeré…ç½®      Configuration config=new Configuration();    ServletContext context = request.getServletContext();    config.setServletContextForTemplateLoading(context, &quot;template&quot;);        //åŠ è½½æ¨¡æ¿æ–‡ä»¶      Template template=config.getTemplate(&quot;home.ftl&quot;);         //åˆ›å»ºæ•°æ®æ¨¡å‹      Map&lt;String,Object&gt; map=new HashMap&lt;String,Object&gt;();      map.put(&quot;basePath&quot;, request.getContextPath());    map.put(&quot;lineList&quot;, lineList);        response.setCharacterEncoding(&quot;utf8&quot;);    PrintWriter out = response.getWriter();    try &#123;        // è¾“å‡ºæ¨¡æ¿åˆ°é¡µé¢ä¸Š        template.process(map, out);        out.flush();        out.close();    &#125; catch (TemplateException e) &#123;        e.printStackTrace();    &#125;&#125;

jsonç›®å‰ï¼Œå‰åç«¯ä¼ è¾“æ•°æ®æœ€å¸¸ç”¨çš„æ ¼å¼ä¸å¤–ä¹xmlå’Œjsonï¼Œæœ¬ç³»ç»Ÿé‡‡ç”¨jsonä½œä¸ºæ•°æ®ä¼ è¾“æ ¼å¼ã€‚
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;    // TODO Auto-generated method stub    response.setCharacterEncoding(&quot;utf8&quot;);    PrintWriter pw = response.getWriter();        String key = request.getParameter(&quot;key&quot;);    ArrayList&lt;Line&gt; lineList = lineService.searchLine(key);    if(lineList.size() &gt; 0)&#123;        jsonObj = new JSONObject(&quot;&#123;&#x27;code&#x27;:&#x27;0&#x27;,&#x27;ext&#x27;:&#x27;success&#x27;&#125;&quot;);        jsonObj.put(&quot;lineList&quot;, lineList);    &#125;else&#123;        jsonObj = new JSONObject(&quot;&#123;&#x27;code&#x27;:&#x27;1&#x27;,&#x27;ext&#x27;:&#x27;error&#x27;&#125;&quot;);    &#125;        pw.println(jsonObj);&#125;

jdbcæ•°æ®åº“è¿æ¥å’ŒæŸ¥è¯¢ï¼Œä½¿ç”¨jdbcã€‚
public ArrayList&lt;Line&gt; getLines() &#123;    // ç»“æœé›†åˆ    ArrayList&lt;Line&gt; result = new ArrayList&lt;Line&gt;();    // Step 1: Claim Connection and Statement    Connection conn = null;    Statement stmt = null;    try &#123;        // STEP 2: Register JDBC driver        Class.forName(JDBC_DRIVER);        // STEP 3: Open a connection        System.out.println(&quot;Connecting to database...&quot;);        conn = DriverManager.getConnection(DB_URL, USER, PASS);        // STEP 4: Execute a query        System.out.println(&quot;Creating statement...&quot;);        stmt = conn.createStatement();        String sql;        sql = &quot;select * from line&quot;;        ResultSet rs = stmt.executeQuery(sql);        // STEP 5: Extract data from result set        while (rs.next()) &#123;            // Retrieve by column name            int id = rs.getInt(&quot;id&quot;);            String busName = rs.getString(&quot;bus_name&quot;);            String fullName = rs.getString(&quot;full_name&quot;);            String firstStop = rs.getString(&quot;first_stop&quot;);            String lastStop = rs.getString(&quot;last_stop&quot;);            Line line = new Line(id, busName, fullName, firstStop, lastStop);            result.add(line);        &#125;        // STEP 6: Clean-up environment        rs.close();        stmt.close();        conn.close();    &#125; catch (SQLException se) &#123;        // Handle errors for JDBC        se.printStackTrace();    &#125; catch (Exception e) &#123;        // Handle errors for Class.forName        e.printStackTrace();    &#125; finally &#123;        // finally block used to close resources        try &#123;            if (stmt != null)                stmt.close();        &#125; catch (SQLException se2) &#123;        &#125; // nothing we can do        try &#123;            if (conn != null)                conn.close();        &#125; catch (SQLException se) &#123;            se.printStackTrace();        &#125; // end finally try    &#125; // end try    System.out.println(&quot;Goodbye!&quot;);    return result;&#125;


æ•°æ®åº“æ•°æ®æœé›†é•¿æ˜¥å…¬äº¤æœ‰è¿‘200æ¡å…¬äº¤çº¿è·¯ï¼Œè¿™é‡Œï¼Œæˆ‘ä»¬ä»8684ç½‘ç«™ä¸Šæœé›†äº†å¸¸ç”¨çš„11æ¡çº¿è·¯ç”¨æ¥åšæµ‹è¯•ã€‚
è¡¨è®¾è®¡CREATE TABLE `line` (  `id` int(4) NOT NULL AUTO_INCREMENT,  `bus_name` varchar(32) NOT NULL,  `full_name` tinytext NOT NULL,  `first_stop` varchar(32) DEFAULT NULL,  `last_stop` varchar(32) DEFAULT NULL,  PRIMARY KEY (`id`)) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

æ•ˆæœæ¼”ç¤º
æºç åˆ†äº«https://github.com/voidking/bus-search
åè®°ä¸ºä»€ä¹ˆä¸åšå®æ—¶å…¬äº¤æŸ¥è¯¢ï¼Ÿå› ä¸ºæ‹¿ä¸åˆ°æ•°æ®ã€‚ç™¾åº¦åœ°å›¾æ²¡æœ‰æä¾›å®æ—¶å…¬äº¤APIï¼Œä¹Ÿæ‹¿ä¸åˆ°å…¬äº¤å…¬å¸çš„æ•°æ®ã€‚
ä¹¦ç­¾Introducing JSONhttp://www.json.org/
JSONå…¥é—¨ä¹‹äºŒï¼šorg.jsonçš„åŸºæœ¬ç”¨æ³•http://blog.csdn.net/jediael_lu/article/details/25779087
JSONè§£æå·¥å…·-org.jsonä½¿ç”¨æ•™ç¨‹http://www.open-open.com/lib/view/open1381566882614.html
Amaze UI æ¨¡æ¿ä¸­å¿ƒhttp://tpl.amazeui.org/
ï¼ˆæ·˜å®æ— é™é€‚é…ï¼‰æ‰‹æœºç«¯remå¸ƒå±€è¯¦è§£http://www.cnblogs.com/well-nice/p/5509589.html
é•¿æ˜¥å…¬äº¤æŸ¥è¯¢http://changchun.8684.cn/
ç™¾åº¦åœ°å›¾JavaScript å¼€æºåº“http://lbsyun.baidu.com/index.php?title=open/library
ç™¾åº¦åœ°å›¾APIç¤ºä¾‹http://lbsyun.baidu.com/jsdemo.htm#a1_2
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>freemarker</tag>
      </tags>
  </entry>
  <entry>
    <title>å¾®ä¿¡å°ç¨‹åºåŸºç¡€</title>
    <url>/dev-weapp-base/</url>
    <content><![CDATA[å‰è¨€
å¼ å°é¾™åœ¨æœ‹å‹åœˆé‡Œè¿™æ ·è§£é‡Šåˆ°ï¼šå°ç¨‹åºæ˜¯ä¸€ç§ä¸éœ€è¦ä¸‹è½½å®‰è£…å³å¯ä½¿ç”¨çš„åº”ç”¨ï¼Œå®ƒå®ç°äº†åº”ç”¨â€œè§¦æ‰‹å¯åŠâ€çš„æ¢¦æƒ³ï¼Œç”¨æˆ·æ‰«ä¸€æ‰«æˆ–è€…æœä¸€ä¸‹å³å¯æ‰“å¼€åº”ç”¨ï¼Œä¹Ÿä½“ç°äº†â€œç”¨å®Œå³èµ°â€çš„ç†å¿µï¼Œç”¨æˆ·ä¸ç”¨å…³å¿ƒæ˜¯å¦å®‰è£…å¤ªå¤šåº”ç”¨çš„é—®é¢˜ã€‚åº”ç”¨å°†æ— å¤„ä¸åœ¨ï¼Œéšæ—¶å¯ç”¨ï¼Œä½†åˆæ— éœ€å®‰è£…å¸è½½ã€‚



è€å¸ˆå¸®åŠ©ç”³è¯·äº†ä¸€ä¸ªå°ç¨‹åºï¼Œæ¥ä¸‹æ¥ï¼ŒéƒåŒå­¦å†³å®šåˆ©ç”¨å°ç¨‹åºåšä¸€ä¸ªåº”ç”¨ã€‚æœ‰ä»¥ä¸‹äº”ä¸ªæƒ³æ³•ï¼š1ã€å…¬äº¤æŸ¥è¯¢ç³»ç»Ÿ2ã€é¤å…æ’å·ç³»ç»Ÿ3ã€é¤å…ç‚¹é¤ç³»ç»Ÿ4ã€ä¹¦ç±å€Ÿé˜…äº¤æ˜“ç³»ç»Ÿ5ã€å°èŒƒå›´é—®ç­”ç³»ç»Ÿ
æ— è®ºåšå“ªä¸ªï¼Œéƒ½éœ€è¦å¯¹è…¾è®¯æä¾›çš„å°ç¨‹åºAPIè¿›è¡Œä¸€ä¸ªè¾ƒå…¨é¢çš„äº†è§£ï¼Œæœ¬æ–‡å°±è®°å½•ä¸€ä¸‹å­¦ä¹ è¿‡ç¨‹ä¸­çš„é‡ç‚¹ã€‚
é¡¹ç›®ç»“æ„ä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œæ–°å»ºå°ç¨‹åºé¡¹ç›®ï¼Œç”Ÿæˆä¸€äº›åˆå§‹æ–‡ä»¶ï¼Œç»“æ„å¦‚ä¸‹ã€‚



æ–‡ä»¶
å¿…å¡«
ä½œç”¨



app.js
æ˜¯
å°ç¨‹åºé€»è¾‘


app.json
æ˜¯
å°ç¨‹åºå…¬å…±è®¾ç½®


app.wxss
å¦
å°ç¨‹åºå…¬å…±æ ·å¼è¡¨


| æ–‡ä»¶ç±»å‹ | å¿…å¡« | ä½œç”¨ || js | æ˜¯ | é¡µé¢é€»è¾‘ || wxml | æ˜¯ | é¡µé¢ç»“æ„ || wxss | å¦ | é¡µé¢æ ·å¼è¡¨ || json | å¦ | é¡µé¢é…ç½® |
app.jsonæ–‡ä»¶æ¥å¯¹å¾®ä¿¡å°ç¨‹åºè¿›è¡Œå…¨å±€é…ç½®ï¼Œå†³å®šé¡µé¢æ–‡ä»¶çš„è·¯å¾„ã€çª—å£è¡¨ç°ã€è®¾ç½®ç½‘ç»œè¶…æ—¶æ—¶é—´ã€è®¾ç½®å¤š tab ç­‰ã€‚
ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŒ…å«äº†æ‰€æœ‰é…ç½®é€‰é¡¹çš„ç®€å•é…ç½®app.json ï¼š
&#123;  &quot;pages&quot;: [    &quot;pages/index/index&quot;,    &quot;pages/logs/index&quot;  ],  &quot;window&quot;: &#123;    &quot;navigationBarTitleText&quot;: &quot;Demo&quot;  &#125;,  &quot;tabBar&quot;: &#123;    &quot;list&quot;: [&#123;      &quot;pagePath&quot;: &quot;pages/index/index&quot;,      &quot;text&quot;: &quot;é¦–é¡µ&quot;    &#125;, &#123;      &quot;pagePath&quot;: &quot;pages/logs/logs&quot;,      &quot;text&quot;: &quot;æ—¥å¿—&quot;    &#125;]  &#125;,  &quot;networkTimeout&quot;: &#123;    &quot;request&quot;: 10000,    &quot;downloadFile&quot;: 10000  &#125;,  &quot;debug&quot;: true&#125;

åŠ è½½è¿‡ç¨‹ç”±ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒåŠ è½½è¿‡ç¨‹ä¸ºï¼š1ã€app.jsä¸­çš„onLaunchå’ŒonShowå‡½æ•°è¢«è°ƒç”¨ã€‚2ã€æŒ‰ç…§app.jsonä¸­çš„é…ç½®ï¼Œæ³¨å†Œpageså‚æ•°ä¸­çš„é¡µé¢ã€‚3ã€æŒ‰ç…§app.jsonä¸­çš„é…ç½®ï¼Œè·³è½¬åˆ°pageså‚æ•°ä¸­çš„ç¬¬ä¸€ä¸ªé¡µé¢ï¼ˆindexé¡µé¢ï¼‰ã€‚4ã€index.jsä¸­çš„onLoadå’ŒonShowå‡½æ•°è¢«è°ƒç”¨ã€‚5ã€ä½¿ç”¨index.jsçš„dataåˆå§‹åŒ–é¡µé¢ã€‚6ã€index.jsä¸­onReadyå‡½æ•°è¢«è°ƒç”¨ã€‚
é€»è¾‘å±‚æ³¨å†Œç¨‹åºApp() å‡½æ•°ç”¨æ¥æ³¨å†Œä¸€ä¸ªå°ç¨‹åºã€‚æ¥å—ä¸€ä¸ª object å‚æ•°ï¼Œå…¶æŒ‡å®šå°ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ç­‰ã€‚
objectå‚æ•°è¯´æ˜ï¼š



å±æ€§
ç±»å‹
æè¿°
è§¦å‘æ—¶æœº



onLaunch
Function
ç”Ÿå‘½å‘¨æœŸå‡½æ•°â€“ç›‘å¬å°ç¨‹åºåˆå§‹åŒ–
å½“å°ç¨‹åºåˆå§‹åŒ–å®Œæˆæ—¶ï¼Œä¼šè§¦å‘ onLaunchï¼ˆå…¨å±€åªè§¦å‘ä¸€æ¬¡ï¼‰


onShow
Function
ç”Ÿå‘½å‘¨æœŸå‡½æ•°â€“ç›‘å¬å°ç¨‹åºæ˜¾ç¤º
å½“å°ç¨‹åºå¯åŠ¨ï¼Œæˆ–ä»åå°è¿›å…¥å‰å°æ˜¾ç¤ºï¼Œä¼šè§¦å‘onShow


onHide
Function
ç”Ÿå‘½å‘¨æœŸå‡½æ•°â€“ç›‘å¬å°ç¨‹åºéšè—
å½“å°ç¨‹åºä»å‰å°è¿›å…¥åå°ï¼Œä¼šè§¦å‘ onHide


å…¶ä»–
Any
å¼€å‘è€…å¯ä»¥æ·»åŠ ä»»æ„çš„å‡½æ•°æˆ–æ•°æ®åˆ° Object å‚æ•°ä¸­ï¼Œç”¨ this å¯ä»¥è®¿é—®



æ³¨å†Œé¡µé¢Page() å‡½æ•°ç”¨æ¥æ³¨å†Œä¸€ä¸ªé¡µé¢ã€‚æ¥å—ä¸€ä¸ª object å‚æ•°ï¼Œå…¶æŒ‡å®šé¡µé¢çš„åˆå§‹æ•°æ®ã€ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€äº‹ä»¶å¤„ç†å‡½æ•°ç­‰ã€‚
object å‚æ•°è¯´æ˜ï¼š



å±æ€§
ç±»å‹
æè¿°



data
Object
é¡µé¢çš„åˆå§‹æ•°æ®


onLoad
Function
ç”Ÿå‘½å‘¨æœŸå‡½æ•°â€“ç›‘å¬é¡µé¢åŠ è½½


onReady
Function
ç”Ÿå‘½å‘¨æœŸå‡½æ•°â€“ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆ


onShow
Function
ç”Ÿå‘½å‘¨æœŸå‡½æ•°â€“ç›‘å¬é¡µé¢æ˜¾ç¤º


onHide
Function
ç”Ÿå‘½å‘¨æœŸå‡½æ•°â€“ç›‘å¬é¡µé¢éšè—


onUnload
Function
ç”Ÿå‘½å‘¨æœŸå‡½æ•°â€“ç›‘å¬é¡µé¢å¸è½½


onPullDownRefresh
Function
é¡µé¢ç›¸å…³äº‹ä»¶å¤„ç†å‡½æ•°â€“ç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åŠ¨ä½œ


onReachBottom
Function
é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶çš„å¤„ç†å‡½æ•°


å…¶ä»–
Any
å¼€å‘è€…å¯ä»¥æ·»åŠ ä»»æ„çš„å‡½æ•°æˆ–æ•°æ®åˆ° object å‚æ•°ä¸­ï¼Œåœ¨é¡µé¢çš„å‡½æ•°ä¸­ç”¨ this å¯ä»¥è®¿é—®


è¯¦è§å°ç¨‹åºæ–‡æ¡£
æ¨¡å—åŒ–æˆ‘ä»¬å¯ä»¥å°†ä¸€äº›å…¬å…±çš„ä»£ç æŠ½ç¦»æˆä¸ºä¸€ä¸ªå•ç‹¬çš„ js æ–‡ä»¶ï¼Œä½œä¸ºä¸€ä¸ªæ¨¡å—ã€‚æ¨¡å—åªæœ‰é€šè¿‡ module.exports æˆ–è€… exports æ‰èƒ½å¯¹å¤–æš´éœ²æ¥å£ã€‚
éœ€è¦æ³¨æ„çš„æ˜¯ï¼š

exports æ˜¯ module.exports çš„ä¸€ä¸ªå¼•ç”¨ï¼Œå› æ­¤åœ¨æ¨¡å—é‡Œè¾¹éšæ„æ›´æ”¹ exports çš„æŒ‡å‘ä¼šé€ æˆæœªçŸ¥çš„é”™è¯¯ã€‚æ‰€ä»¥æˆ‘ä»¬æ›´æ¨èå¼€å‘è€…é‡‡ç”¨ module.exports æ¥æš´éœ²æ¨¡å—æ¥å£ï¼Œé™¤éä½ å·²ç»æ¸…æ™°çŸ¥é“è¿™ä¸¤è€…çš„å…³ç³»ã€‚
å°ç¨‹åºç›®å‰ä¸æ”¯æŒç›´æ¥å¼•å…¥ node_modules , å¼€å‘è€…éœ€è¦ä½¿ç”¨åˆ° node_modules æ—¶å€™å»ºè®®æ‹·è´å‡ºç›¸å…³çš„ä»£ç åˆ°å°ç¨‹åºçš„ç›®å½•ä¸­ã€‚

// common.jsvar common = &#123;    sayHello: function()&#123;        console.log(&#x27;hello&#x27;);    &#125;,    sayGoodbye: function()&#123;        console.log(&#x27;goodbye&#x27;);    &#125;&#125;;module.exports = common;

åœ¨éœ€è¦ä½¿ç”¨è¿™äº›æ¨¡å—çš„æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ require(path) å°†å…¬å…±ä»£ç å¼•å…¥ã€‚
var common = require(&#x27;../../modules/common/common.js&#x27;);Page(&#123;  say: function() &#123;    common.sayHello();    common.sayGoodbye();  &#125;&#125;)

APIå°ç¨‹åºå¼€å‘æ¡†æ¶æä¾›ä¸°å¯Œçš„å¾®ä¿¡åŸç”Ÿ APIï¼Œå¯ä»¥æ–¹ä¾¿çš„è°ƒèµ·å¾®ä¿¡æä¾›çš„èƒ½åŠ›ï¼Œå¦‚è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œæœ¬åœ°å­˜å‚¨ï¼Œæ”¯ä»˜åŠŸèƒ½ç­‰ã€‚è¯¦ç»†ä»‹ç»è¯·å‚è€ƒAPI æ–‡æ¡£
è§†å›¾å±‚WXML&lt;!-- item.wxml --&gt;&lt;template name=&quot;item&quot;&gt;  &lt;text&gt;&#123;&#123;text&#125;&#125;&lt;/text&gt;&lt;/template&gt;

&lt;!--home.wxml--&gt;&lt;view class=&quot;container&quot;&gt;  &lt;view  bindtap=&quot;bindViewTap&quot; class=&quot;userinfo&quot;&gt;    &lt;image class=&quot;userinfo-avatar&quot; src=&quot;&#123;&#123;userInfo.avatarUrl&#125;&#125;&quot; background-size=&quot;cover&quot;&gt;&lt;/image&gt;    &lt;text class=&quot;userinfo-nickname&quot;&gt;&#123;&#123;userInfo.nickName&#125;&#125;&lt;/text&gt;  &lt;/view&gt;  &lt;button bindtap=&quot;toIndex&quot;&gt;è·³è½¬index&lt;/button&gt;  &lt;view wx:if=&quot;&#123;&#123;id==1&#125;&#125;&quot;&gt;ç¬¬ä¸€æ¡&lt;/view&gt;  &lt;view wx:elif=&quot;&#123;&#123;id==2&#125;&#125;&quot;&gt;ç¬¬äºŒæ¡&lt;/view&gt;  &lt;view wx:else&gt;å…¶ä»–&lt;/view&gt;  &lt;!--hiddenåªç”¨äºtext--&gt;  &lt;div hidden=&quot;&#123;&#123;true&#125;&#125;&quot;&gt;    è¿™æ˜¯ä¸ªdiv  &lt;/div&gt;  &lt;text hidden=&quot;&#123;&#123;true&#125;&#125;&quot;&gt;è¿™æ˜¯ä¸ªtext&lt;/text&gt;  &lt;view wx:for=&quot;&#123;&#123;array&#125;&#125;&quot;&gt;    &#123;&#123;index&#125;&#125;:&#123;&#123;item.message&#125;&#125;  &lt;/view&gt;  &lt;!--å®šä¹‰æ¨¡æ¿--&gt;  &lt;template name=&quot;myTemplate&quot;&gt;    &lt;view&gt;      &lt;text&gt; &#123;&#123;index&#125;&#125;: &#123;&#123;msg&#125;&#125; &lt;/text&gt;      &lt;text&gt; Time: &#123;&#123;time&#125;&#125; &lt;/text&gt;    &lt;/view&gt;  &lt;/template&gt;  &lt;!--ä½¿ç”¨æ¨¡æ¿--&gt;  &lt;template is=&quot;myTemplate&quot; data=&quot;&#123;&#123;...myData&#125;&#125;&quot;/&gt;  &lt;template name=&quot;odd&quot;&gt;    &lt;view&gt; odd &lt;/view&gt;  &lt;/template&gt;  &lt;template name=&quot;even&quot;&gt;    &lt;view&gt; even &lt;/view&gt;  &lt;/template&gt;  &lt;block wx:for=&quot;&#123;&#123;[1, 2, 3, 4, 5]&#125;&#125;&quot;&gt;    &lt;template is=&quot;&#123;&#123;item % 2 == 0 ? &#x27;even&#x27; : &#x27;odd&#x27;&#125;&#125;&quot;/&gt;    &lt;template is=&quot;&#123;&#123;index % 2 == 0 ? &#x27;even&#x27; : &#x27;odd&#x27;&#125;&#125;&quot;/&gt;  &lt;/block&gt;  &lt;block wx:for=&quot;&#123;&#123;[1, 2, 3, 4, 5]&#125;&#125;&quot; wx:for-index=&quot;itemIndex&quot; wx:for-item=&quot;itemData&quot;&gt;    ç´¢å¼•&#123;&#123;itemIndex&#125;&#125;ï¼Œæ•°å€¼&#123;&#123;itemData&#125;&#125;  &lt;/block&gt;  &lt;view id=&quot;tapTest&quot; data-hi=&quot;WeChat&quot; bindtap=&quot;tapName&quot;&gt; Click me! &lt;/view&gt;  &lt;import src=&quot;item.wxml&quot;/&gt;  &lt;template is=&quot;item&quot; data=&quot;&#123;&#123;text: &#x27;forbar&#x27;&#125;&#125;&quot;/&gt;&lt;/view&gt;

/*home.js*/// è·å–åº”ç”¨å®ä¾‹var app = getApp();var common = require(&#x27;../../modules/common/common.js&#x27;);Page(&#123;  data:&#123;    id: 4,    userInfo: &#123;&#125;,    array: [&#123;      message: &#x27;foo&#x27;,    &#125;, &#123;      message: &#x27;bar&#x27;    &#125;],    myData: &#123;      index: 1000,      msg: &#x27;æ¨¡æ¿&#x27;,      time: &#x27;16:08&#x27;    &#125;  &#125;,  onLoad:function(options)&#123;    // é¡µé¢åˆå§‹åŒ– optionsä¸ºé¡µé¢è·³è½¬æ‰€å¸¦æ¥çš„å‚æ•°    var that = this;    //è°ƒç”¨åº”ç”¨å®ä¾‹çš„æ–¹æ³•è·å–å…¨å±€æ•°æ®    app.getUserInfo(function(userInfo)&#123;      //æ›´æ–°æ•°æ®      that.setData(&#123;        userInfo:userInfo      &#125;)    &#125;);    common.sayHello();  &#125;,  onReady:function()&#123;    // é¡µé¢æ¸²æŸ“å®Œæˆ  &#125;,  onShow:function()&#123;    // é¡µé¢æ˜¾ç¤º    console.log(&#x27;è¿™æ˜¯homeé¡µçš„onShowæ–¹æ³•&#x27;);  &#125;,  onHide:function()&#123;    // é¡µé¢éšè—  &#125;,  onUnload:function()&#123;    // é¡µé¢å…³é—­  &#125;,  toIndex: function()&#123;    wx.navigateTo(&#123;      url: &#x27;../index/index&#x27;    &#125;);  &#125;,  tapName: function(event) &#123;    console.log(event)  &#125;&#125;)


WXSSå½“æˆcssä½¿ç”¨å°±å¥½ã€‚
ç»„ä»¶ç»„ä»¶æ–‡æ¡£
åè®°å°ç¨‹åºåˆ©å¼Šå„åŠï¼Œæ˜¯å¦ä½¿ç”¨è¿˜æ˜¯è¦çœ‹éœ€æ±‚ã€‚
åˆ©ï¼š

ä¸ç”¨å®‰è£…ï¼Œå³å¼€å³ç”¨ï¼Œç”¨å®Œå°±èµ°ã€‚
çœæµé‡ï¼Œçœå®‰è£…æ—¶é—´ã€‚
ç›¸è¾ƒäºåŸç”Ÿåº”ç”¨ï¼Œå¼€å‘æˆæœ¬æ›´ä½ã€‚
æ¨å¹¿æ›´å®¹æ˜“æ›´ç®€å•ï¼Œæ›´çœæˆæœ¬ã€‚

å¼Šï¼š

å¯„ç”Ÿäºå¾®ä¿¡ï¼Œç½‘é¡µæ²¡æœ‰å¯ç§»æ¤æ€§ã€‚
æ— æ³•å–ä»£ä¼‘é—²å¨±ä¹åŠå…¬ç±»åŸç”Ÿåº”ç”¨ã€‚

æœ€åï¼Œå¼•ç”¨iH5äº’åŠ¨å¤§å¸ˆåˆ›å§‹äººå­Ÿæ™ºå¹³çš„ä¸€æ®µè¯ï¼š

çœŸæ­£çš„å°ç¨‹åºçš„å½¢å¼åªèƒ½æ˜¯H5ã€‚æœ€è½»ï¼ˆä¸ç”¨ä¸‹è½½å®‰è£…ï¼Œç”¨äº†å°±èµ°ï¼‰ã€æœ€çµæ´»ï¼ˆå¼€å‘éš¾åº¦å°ï¼ŒæŠ•æ”¾å‘¨æœŸçŸ­ï¼Œè°ƒæ•´æ›´å®¹æ˜“ï¼‰ã€æœ€é€šç”¨ï¼ˆæ ‡å‡†çš„Webå½¢æ€ï¼Œæœ‰æµè§ˆå™¨å°±èƒ½æ‰“å¼€ï¼‰ã€‚

ä¹¦ç­¾ç®€æ˜“æ•™ç¨‹-å°ç¨‹åºhttps://mp.weixin.qq.com/debug/wxadoc/dev/index.html
å¾®ä¿¡å°ç¨‹åºå…¨æ–¹ä½æ·±åº¦è§£æ-è¯¾ç¨‹å­¦ä¹ -ç™¾åº¦ä¼ è¯¾http://www.chuanke.com/v4702151-193232-1107660.html
ä¸ºä»€ä¹ˆæˆ‘åå¯¹å¾®ä¿¡å°ç¨‹åºï¼Ÿhttps://www.huxiu.com/article/171880/1.html?f=myzakercom
æˆ‘ä»¬çœŸçš„éœ€è¦ç½‘é¡µç‰ˆAppå—ï¼ŸGoogle PWAçš„å›°å±€http://www.leiphone.com/news/201606/UEiart497WUzS62u.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡</tag>
        <tag>å°ç¨‹åº</tag>
      </tags>
  </entry>
  <entry>
    <title>hexoç”Ÿæˆsitemap</title>
    <url>/dev-hexo-sitemap/</url>
    <content><![CDATA[å‰è¨€å¾ˆä¹…ï¼Œéƒ½ä¸å†å…³å¿ƒç™¾åº¦è°·æ­Œå¯¹è‡ªå·±åšå®¢çš„æ”¶å½•ï¼Œåªæ˜¯æŠŠåšå®¢å½“åšç”Ÿæ´»çš„è®°å½•ã€‚ä»Šå¤©ï¼Œçªç„¶æƒ³ç¨å¾®æä¸‹SEOï¼Œç„¶åå°±æœ‰äº†è¿™ç¯‡åšæ–‡ã€‚


è¿‡ç¨‹1ã€ç”Ÿæˆç«™ç‚¹åœ°å›¾
npm install hexo-generator-sitemap --savenpm install hexo-generator-baidu-sitemap --save

æç¤ºè­¦å‘Šï¼Œä¸è¿‡å¯ä»¥å¿½ç•¥ã€‚
npm WARN optional Skipping failed optional dependency /chokidar/fsevents:npm WARN notsup Not compatible with your operating system or architecture: fsevents@1.0.15......

åœ¨åšå®¢ç›®å½•çš„_config.ymlä¸­æ·»åŠ å¦‚ä¸‹ä»£ç (è²Œä¼¼ä¸åŠ ä¹Ÿå¯ä»¥ï¼Œåæ­£æˆ‘æ²¡åŠ )
sitemap:path: sitemap.xmlbaidusitemap:path: baidusitemap.xml

2ã€éªŒè¯ç½‘ç«™GoogleéªŒè¯ç½‘ç«™çš„æ–¹å¼æ˜¯æ–‡ä»¶éªŒè¯ï¼›ç™¾åº¦éªŒè¯ç½‘ç«™çš„æ–¹å¼æœ‰ä¸‰ç§ï¼Œæ–‡ä»¶éªŒè¯ã€htmlæ ‡ç­¾éªŒè¯ã€CNAMEéªŒè¯ã€‚éƒåŒå­¦é‡‡ç”¨æ–‡ä»¶éªŒè¯æ–¹å¼ï¼Œä¸‹è½½éªŒè¯æ–‡ä»¶ï¼Œæ”¾åˆ°hexo/sourceç›®å½•ä¸‹ï¼Œhexo gï¼Œhexo dï¼Œå³å¯å‘å¸ƒéªŒè¯æ–‡ä»¶åˆ°æœåŠ¡å™¨ä¸Šã€‚
3ã€æ·»åŠ ç«™ç‚¹åœ°å›¾åˆ†åˆ«ç™»å½•Google Search Consoleï¼Œå’Œç™¾åº¦ç«™é•¿å¹³å°ï¼Œæ·»åŠ ç«™ç‚¹åœ°å›¾ã€‚
é—®é¢˜ç”±ä¸Šé¢ä¸¤ä¸ªå›¾å¯ä»¥çœ‹å‡ºï¼Œsitemap.xmlæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯baidusitemap.xmlè§£æä¼šå‡ºé”™ã€‚è®¿é—®http://www.voidking.com/baidusitemap.xmlï¼Œçœ‹åˆ°è¯¦ç»†æŠ¥é”™ã€‚
xmlè§£æå™¨åœ¨é‡åˆ°å­—ç¬¦â€œ&amp;â€æ—¶ï¼Œä¼šæŠŠâ€œ&amp;â€å½“åšä¸€ä¸ªå®ä½“å¼•ç”¨çš„å¼€å§‹ï¼Œè€Œå»å¯»æ‰¾è¿™ä¸ªå®ä½“å¼•ç”¨çš„ç»“æŸç¬¦å·â€œ;â€ï¼Œ
åœ¨xmlæ–‡æ¡£ä¸­ï¼Œåƒâ€œ&amp;â€è¿™æ ·çš„é¢„å®šä¹‰çš„å®ä½“å¼•ç”¨ä¸€å…±æœ‰5ä¸ªï¼Œåˆ†åˆ«æ˜¯â€œ&amp;â€ã€â€œ&lt;â€ã€â€œ&gt;â€ã€â€œâ€™â€ã€â€œâ€â€ã€‚
è§£å†³æ–¹æ³•ä¸€ï¼šæŠŠå®ä½“å¼•ç”¨ç¼–ç åä½¿ç”¨ï¼Œå³
æŠŠâ€œ&amp;â€ ç¼–ç ä¸º â€œ&amp;amp;â€ æŠŠâ€œ&lt;â€ ç¼–ç ä¸ºâ€œ&amp;lt;â€ æŠŠâ€œ&gt;â€ ç¼–ç ä¸º â€œ&amp;gt;â€ æŠŠâ€œ&#x27;â€ ç¼–ç ä¸º â€œ&amp;apos;â€ æŠŠâ€œ&quot;â€ ç¼–ç ä¸º â€œ&amp;quot;â€ 

&lt;loc&gt;url&amp;mb=bt&lt;/loc&gt;
æ›¿æ¢ä¸ºï¼š
&lt;loc&gt;url&amp;amp;mb=bt&lt;/loc&gt;

è§£å†³æ–¹æ³•äºŒï¼šåœ¨æ ‡è®°CDATAä¸­ï¼Œæ‰€æœ‰çš„æ ‡è®°ã€å®ä½“å¼•ç”¨éƒ½è¢«å¿½ç•¥ï¼Œè€Œè¢«â€œxmlè§£æå™¨â€ä¸€è§†åŒä»åœ°å½“åšåŸå§‹å­—ç¬¦æ•°æ®çœ‹å¾…ï¼ŒCDATAçš„å½¢å¼å¦‚ä¸‹ï¼šé’ˆå¯¹æœ¬æ–‡ä¸Šé¢çš„é—®é¢˜ï¼Œå³æŠŠåŸæ¥ä»£ç ä¸­çš„ï¼š
&lt;loc&gt;url&amp;mb=bt&lt;/loc&gt;
æ›¿æ¢ä¸ºï¼š
&lt;loc&gt;&lt;![CDATA[url&amp;mb=bt]]&gt;&lt;/loc&gt;
ä½¿ç”¨CDATAéœ€è¦æ³¨æ„çš„ä¸¤ç‚¹ï¼Œ1ã€ç”±äºCDATAçš„ç»“æŸç¬¦å·æ˜¯â€œ]]&gt;â€ï¼Œæ‰€ä»¥CDATAä¸­ä¸èƒ½åŒ…å«â€œ]]&gt;â€ã€‚2ã€ç”±äºCDATAä¸­çš„æ‰€æœ‰æ ‡è®°ã€å®ä½“å¼•ç”¨éƒ½è¢«å¿½ç•¥ï¼Œæ‰€ä»¥CDATAä¸èƒ½åµŒå¥—ä½¿ç”¨ã€‚
åè®°ç„¶è€Œï¼Œä¸Šé¢çš„é—®é¢˜å¹¶æ²¡æœ‰æ‰¾åˆ°è§£å†³åŠæ³•ï¼Œé‚£å°±ç•™ä¸ªå‘å§ã€‚å¦‚æœçœ‹åˆ°è¿™ç¯‡æ–‡ç« çš„åŒå­¦æ‰¾åˆ°è§£å†³åŠæ³•ï¼Œå¸Œæœ›èƒ½ç»™æˆ‘ç•™è¨€ï¼Œåœ¨æ­¤è°¢è¿‡ã€‚
ä¹¦ç­¾ç«™ç‚¹ä¿¡æ¯_ç«™é•¿å·¥å…·_ç«™ç‚¹é‡è¦æ•°æ®æ¦‚è§ˆ_ç™¾åº¦ç«™é•¿å¹³å°http://zhanzhang.baidu.com/dashboard/index
Search Console - é¦–é¡µhttps://www.google.com/webmasters/tools/home?hl=zh-CN
Hexoç”Ÿæˆsitemapç«™ç‚¹åœ°å›¾çš„æ–¹æ³•http://blog.kenai.cc/article/hexo/hexo-skills/
hexoå¹²è´§ç³»åˆ—ï¼šï¼ˆå…­ï¼‰hexoæäº¤æœç´¢å¼•æ“ï¼ˆç™¾åº¦+è°·æ­Œï¼‰http://www.jianshu.com/p/619dab2d3c08
å…³äºxmlç‰¹æ®Šç¬¦å·æŠ¥é”™EntityRef: expecting â€˜;â€™http://bbs.phome.net/showthread-13-330736-0.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>thinkphpä¸­sessionè·¨åŸŸé—®é¢˜</title>
    <url>/dev-thinkphp-session-cross-domain/</url>
    <content><![CDATA[é—®é¢˜æè¿°ã€Šthinkphpå®ç°çŸ­ä¿¡éªŒè¯æ³¨å†Œã€‹ä¸­ï¼ŒéƒåŒå­¦ä¸æ­¢è®°å½•äº†çŸ­ä¿¡éªŒè¯ç çš„å®ç°æ–¹æ³•ï¼ŒåŒæ—¶è¿˜è®°å½•äº†å›¾ç‰‡éªŒè¯ç çš„å®ç°æ–¹æ³•ã€‚æœ¬åœ°ä½¿ç”¨ï¼Œä¸€åˆ‡æ­£å¸¸ï¼›åç«¯é¡¹ç›®å’Œå‰ç«¯é¡¹ç›®éƒ½éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼Œä¸€åˆ‡æ­£å¸¸ï¼›åç«¯é¡¹ç›®éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼Œå¹¶è®¾ç½®å…è®¸è·¨åŸŸè®¿é—®åï¼Œæœ¬åœ°å‰ç«¯é¡¹ç›®ä½¿ç”¨æœåŠ¡å™¨ä¸Šåç«¯é¡¹ç›®æ¥å£æ—¶ï¼Œé—®é¢˜æ¥äº†ï¼šé¦–å…ˆï¼Œä½¿ç”¨postmanæµ‹è¯•è·å–å›¾ç‰‡éªŒè¯ç æ¥å£å’ŒéªŒè¯å›¾ç‰‡éªŒè¯ç æ¥å£ï¼Œæ­£å¸¸ã€‚ç„¶åï¼Œåœ¨htmlä¸­ä½¿ç”¨è·å–å›¾ç‰‡éªŒè¯ç æ¥å£ï¼Œæ­£å¸¸ï¼›æœ€åï¼Œåœ¨JSä¸­ä½¿ç”¨éªŒè¯å›¾ç‰‡éªŒè¯ç æ¥å£ï¼Œå‡ºé”™ï¼ï¼ï¼


åˆ†æé€šè¿‡é—®é¢˜æè¿°ï¼Œæˆ‘ä»¬çœ‹å‡ºï¼Œé—®é¢˜å‡ºç°åœ¨è·¨åŸŸä¸Šã€‚é‚£ä¹ˆï¼Œæœ‰ä¸¤ç§å¯èƒ½ï¼Œä¸€ç§æ˜¯å› ä¸ºè·¨åŸŸè®¾ç½®ä¸æ­£ç¡®ï¼›ä¸€ç§æ˜¯å› ä¸ºthinkphpæœ¬èº«çš„é—®é¢˜ã€‚
é‡‡ç”¨å¦å¤–ä¸€ç§è·¨åŸŸé…ç½®ï¼Œé—®é¢˜ä¾ç„¶å­˜åœ¨ã€‚é‚£å°±æ˜¯thinkphpæœ¬èº«çš„é—®é¢˜äº†ï¼Œç»æŸ¥æ‰¾èµ„æ–™ï¼Œé—®é¢˜å®šä½åœ¨thinkphpçš„sessionè·¨åŸŸä¸Šã€‚
è·¨å­åŸŸè§£å†³åŠæ³•å…¶å®ä¸ç®¡æ˜¯ThinkPHPè¿˜æ˜¯phpæœ¬èº«ï¼Œåœ¨è§£å†³sessionè·¨åŸŸé—®é¢˜çš„æ—¶å€™éƒ½éœ€è¦è®¾ç½®session.cookie_domainã€‚é’ˆå¯¹sessionè·¨åŸŸè¿™ä¸€é—®é¢˜çš„è§£å†³æ–¹æ³•ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼šç¬¬ä¸€ç§æƒ…å†µï¼šå¦‚æœç›®å½•ä¸‹æ²¡æœ‰.htaccessè¿™ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰é‡‡å–urlä¼ªé™æ€çš„è¯ï¼Œé‚£ä¹ˆï¼Œåœ¨conf/config.phpçš„ç¬¬ä¸€è¡ŒåŠ ä¸Šï¼š
ini_set(&#x27;session.cookie_domain&#x27;,&quot;.domain.com&quot;);//è·¨åŸŸè®¿é—®Session
è¿™æ—¶å¦‚æœä½ å¼€å¯äº†è°ƒè¯•ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ï¼ä½†å…³é—­äº†è°ƒè¯•ï¼Œå°±ä¸ç®¡ç”¨äº†ï¼
ç¬¬äºŒç§æƒ…å†µï¼šå¦‚æœä½ ç›®å½•ä¸‹æœ‰.htaccessè¿™ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆä½ åœ¨æ ¹ç›®å½•ï¼Œindex.phpçš„ç¬¬ä¸€è¡ŒåŠ å…¥ï¼š
&lt;?php ini_set(&#x27;session.cookie_domain&#x27;,&quot;.domain.com&quot;);//è·¨åŸŸè®¿é—®Session// åº”ç”¨å…¥å£æ–‡ä»¶?&gt;
è¿™ç§æ–¹æ³•ä¸ç®¡å¼€ä¸å¼€å¯è°ƒè¯•éƒ½ç®¡ç”¨ï¼
ç„¶è€Œï¼Œæˆ‘ä»¬çš„é—®é¢˜å¹¶ä¸æ˜¯è·¨å­åŸŸçš„é—®é¢˜ï¼Œè€Œæ˜¯å®Œå…¨è·¨åŸŸï¼Œæ‰€ä»¥ä¸Šè¿°æ–¹æ³•æ— æ•ˆã€‚
å®Œå…¨è·¨åŸŸè§£å†³åŠæ³•è·å–å›¾ç‰‡éªŒè¯ç è¯·æ±‚æŸ¥çœ‹è·å–å›¾ç‰‡éªŒè¯ç çš„è¯·æ±‚ä¿¡æ¯ï¼ŒRequest Headersä¸ºï¼š
Accept:image/webp,image/*,*/*;q=0.8Accept-Encoding:gzip, deflate, sdchAccept-Language:zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.4Connection:keep-aliveCookie:pma_lang=zh_CN; pma_collation_connection=utf8_unicode_ci; pma_iv-1=wnpO4gv0eQRW1AMHmGr2ww%3D%3D; pmaUser-1=weZPqS0%2BW7nzFUVHRdqcfA%3D%3DHost:api.voidking.comReferer:http://localhost/ajax/ajax.htmlUser-Agent:Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.71 Safari/537.36

Response Headersä¸ºï¼š
Access-Control-Allow-Origin:*Cache-Control:post-check=0, pre-check=0Cache-Control:private, max-age=0, no-store, no-cache, must-revalidateConnection:keep-aliveContent-Type:image/pngDate:Sun, 27 Nov 2016 12:10:44 GMTExpires:Thu, 19 Nov 1981 08:52:00 GMTPragma:no-cacheServer:nginxSet-Cookie:PHPSESSID=721t4sqanvsii550m1dk8gq1o3; path=/; domain=.voidking.comTransfer-Encoding:chunked

éªŒè¯éªŒè¯ç è¯·æ±‚æŸ¥çœ‹éªŒè¯éªŒè¯ç çš„è¯·æ±‚ä¿¡æ¯ï¼ŒRequest Headersä¸ºï¼š
Accept:application/json, text/javascript, */*; q=0.01Accept-Encoding:gzip, deflateAccept-Language:zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.4Connection:keep-aliveContent-Length:9Content-Type:application/x-www-form-urlencoded; charset=UTF-8Host:api.voidking.comOrigin:http://localhostReferer:http://localhost/ajax/ajax.htmlUser-Agent:Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.71 Safari/537.36

Response Headersä¸ºï¼š
Access-Control-Allow-Origin:*Cache-Control:no-store, no-cache, must-revalidate, post-check=0, pre-check=0Connection:keep-aliveContent-Encoding:gzipContent-Type:text/html; charset=UTF-8Date:Sun, 27 Nov 2016 12:13:21 GMTExpires:Thu, 19 Nov 1981 08:52:00 GMTPragma:no-cacheServer:nginxSet-Cookie:PHPSESSID=149t0hhs2icqaaemvp39onkgp4; path=/; domain=.voidking.comTransfer-Encoding:chunkedVary:Accept-Encoding

å†æ¬¡è·å–å›¾ç‰‡éªŒè¯ç è¯·æ±‚Request Headersä¸ºï¼š
Accept:image/webp,image/*,*/*;q=0.8Accept-Encoding:gzip, deflate, sdchAccept-Language:zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.4Cache-Control:max-age=0Connection:keep-aliveCookie:pma_lang=zh_CN; pma_collation_connection=utf8_unicode_ci; pma_iv-1=wnpO4gv0eQRW1AMHmGr2ww%3D%3D; pmaUser-1=weZPqS0%2BW7nzFUVHRdqcfA%3D%3D; PHPSESSID=721t4sqanvsii550m1dk8gq1o3Host:api.voidking.comReferer:http://localhost/ajax/ajax.htmlUser-Agent:Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.71 Safari/537.36

Response Headersä¸ºï¼š
Access-Control-Allow-Origin:*Cache-Control:private, max-age=0, no-store, no-cache, must-revalidateCache-Control:post-check=0, pre-check=0Connection:keep-aliveContent-Type:image/pngDate:Sun, 27 Nov 2016 13:26:21 GMTExpires:Thu, 19 Nov 1981 08:52:00 GMTPragma:no-cacheServer:nginxTransfer-Encoding:chunked

ä¸‰æ¬¡è¯·æ±‚æ¯”è¾ƒ
ç¬¬ä¸€æ¬¡è·å–å›¾ç‰‡éªŒè¯ç è¯·æ±‚ï¼ŒCookieä¸­æ²¡æœ‰PHPSESSIDï¼Œæ‰€ä»¥ï¼Œè¿”å›ä¿¡æ¯ä¸­æœ‰Set-Cookieã€‚ç¬¬äºŒæ¬¡è·å–å›¾ç‰‡éªŒè¯ç è¯·æ±‚ï¼ŒCookieä¸­å«æœ‰PHPSESSIDï¼Œæ‰€ä»¥ï¼Œè¿”å›ä¿¡æ¯ä¸­æ²¡æœ‰äº†Set-Cookieã€‚è€Œä¸”ç¬¬ä¸€æ¬¡è¯·æ±‚è¿”å›ä¿¡æ¯Set-Cookieä¸­çš„PHPSESSIDï¼Œå’Œç¬¬äºŒæ¬¡è¯·æ±‚è¯·æ±‚ä¿¡æ¯Cookieä¸­çš„PHPSESSIDæ˜¯ç›¸åŒçš„ã€‚
è€ŒéªŒè¯å›¾ç‰‡éªŒè¯ç çš„ajaxè¯·æ±‚ï¼Œæ²¡æœ‰Cookieï¼Œè‡ªç„¶ä¹Ÿæ²¡æœ‰PHPSESSIDï¼Œæ‰€ä»¥ï¼Œè¿”å›ä¿¡æ¯ä¸­ä¹Ÿæœ‰Set-Cookieã€‚
å¯è§ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å‰ç«¯åšä¸€äº›ä¿®æ”¹ï¼Œä½¿ä¹‹å‘é€è¯·æ±‚æ—¶å¸¦ç€Cookieã€‚
å‰ç«¯jqueryè®¾ç½®&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;jquery&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;p&gt;        &lt;img src=&quot;http://api.voidking.com/owner-bd/index.php/Home/CheckCode/getPicCode&quot; alt=&quot;&quot;&gt;        &lt;input type=&quot;text&quot; id=&quot;picCode&quot;&gt;        &lt;input type=&quot;button&quot; id=&quot;send&quot; value=&quot;éªŒè¯&quot;&gt;    &lt;/p&gt;&lt;script src=&quot;http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt;    $(function()&#123;        $(&#x27;#send&#x27;).click(function()&#123;            //console.log(document.cookie);            $.ajax(&#123;                url: &#x27;http://api.voidking.com/owner-bd/index.php/Home/CheckCode/checkPicCode&#x27;,                type: &#x27;POST&#x27;,                crossDomain: true,                xhrFields: &#123;                    withCredentials: true                &#125;,                dataType: &#x27;json&#x27;,                data: &#123;code: $(&#x27;#picCode&#x27;).val()&#125;,                success: function(data)&#123;                    console.log(data);                &#125;,                error: function(xhr)&#123;                    console.log(xhr);                &#125;            &#125;);        &#125;);    &#125;);&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;

è¯·æ±‚æ—¶æŠ¥é”™å¦‚ä¸‹ï¼š
A wildcard &#x27;*&#x27; cannot be used in the &#x27;Access-Control-Allow-Origin&#x27; header when the credentials flag is true. Origin &#x27;http://localhost&#x27; is therefore not allowed access. The credentials mode of an XMLHttpRequest is controlled by the withCredentials attribute.

å‡ºç°äº†è·¨åŸŸæŠ¥é”™ï¼Œå¯è§åç«¯ä¹Ÿéœ€è¦åšä¸€äº›ä¿®æ”¹ï¼Œä½¿ä¹‹å¯ä»¥æ¥æ”¶è·¨åŸŸCookieã€‚
åç«¯nginxè®¾ç½®add_header Access-Control-Allow-Origin http://localhost;add_header Access-Control-Allow-Credentials true;
æ³¨æ„ï¼šæœåŠ¡å™¨ç«¯Access-Control-Allow-Credentialså‚æ•°ä¸ºtrueæ—¶ï¼ŒAccess-Control-Allow-Originå‚æ•°çš„å€¼ä¸èƒ½ä¸º*ã€‚
åç«¯nginxè®¾ç½®åï¼Œjqueryçš„ajaxè¯·æ±‚æ­£å¸¸äº†ï¼Œå¯ä»¥æºå¸¦Cookieï¼Œåç«¯æ­£å¸¸æ¥æ”¶æ•°æ®å¹¶è¿”å›æ•°æ®ã€‚
ç”±äºangularçš„ajaxè¯·æ±‚ä¸åŒäºjqueryï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç ”ç©¶ä¸€ä¸‹angularæ€ä¹ˆå‘é€æºå¸¦Cookieçš„è·¨åŸŸè¯·æ±‚ã€‚
å‰ç«¯angularè®¾ç½®&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;    &lt;meta charset=&quot;utf-8&quot;&gt;    &lt;title&gt;angular&lt;/title&gt;    &lt;script src=&quot;http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body ng-app=&quot;myApp&quot; &gt;    &lt;p ng-controller=&quot;myCtrl&quot;&gt;        &lt;img src=&quot;http://api.voidking.com/owner-bd/index.php/Home/CheckCode/getPicCode&quot; alt=&quot;&quot;&gt;        &lt;input type=&quot;text&quot; id=&quot;picCode&quot; ng-model=&quot;picCode&quot;&gt;        &lt;input type=&quot;button&quot; ng-click=&quot;send()&quot;  value=&quot;éªŒè¯&quot;&gt;    &lt;/p&gt;&lt;script&gt;    var app = angular.module(&#x27;myApp&#x27;, []);    app.controller(&#x27;myCtrl&#x27;, function($scope, $http, $httpParamSerializer) &#123;        $scope.send = function()&#123;            $http(&#123;                method:&#x27;POST&#x27;,                url:&#x27;http://api.voidking.com/owner-bd/index.php/Home/CheckCode/checkPicCode&#x27;,                headers:&#123;                    &#x27;Content-Type&#x27;:&#x27;application/x-www-form-urlencoded&#x27;                &#125;,                withCredentials: true,                dataType: &#x27;json&#x27;,                data: $httpParamSerializer(&#123;code: $scope.picCode&#125;)            &#125;).then(function successCallback(response) &#123;                console.log(response.data);                $scope.username = response.data.username;            &#125;, function errorCallback(response) &#123;                console.log(response.data);            &#125;);        &#125;    &#125;);&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;

nginxé…ç½®æ–‡ä»¶ç»“åˆã€Šthinkphpéƒ¨ç½²åˆ°nginxæœåŠ¡å™¨ã€‹ä¸­nginxçš„é…ç½®ï¼Œæœ€ç»ˆnginxé…ç½®é…ç½®æ–‡ä»¶nginx.confæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
error_log  logs/error.log  error ;pid logs/nginx.pid;user  www;worker_processes  auto;worker_rlimit_nofile 51200;events &#123;    use epoll;    worker_connections  51200;&#125;http &#123;    client_body_buffer_size 32k;    client_header_buffer_size 2k;    client_max_body_size 2m;    default_type application/octet-stream;    log_not_found off;    server_tokens off;    include       mime.types;    gzip on;    gzip_min_length  1k;    gzip_buffers     4 16k;    gzip_http_version 1.0;    gzip_comp_level 2;    gzip_types       text/plain text/css text/xml text/javascript application/x-javascript application/xml application/rss+xml application/xhtml+xml application/atom_xml;    gzip_vary on;    #error_page   500 502 503 504  /50x.html;     log_format  access  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;              &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;              &#x27;&quot;$http_user_agent&quot; $http_x_forwarded_for&#x27;;    server &#123;        listen 80 default_server;        server_name localhost api.voidking.com;        root /home/wwwroot/;        index index.php index.html index.htm;            add_header Access-Control-Allow-Origin http://localhost;        add_header Access-Control-Allow-Credentials true;        location ~ \.php &#123;        root /home/wwwroot/;            fastcgi_pass   127.0.0.1:9000;            fastcgi_index  index.php;        fastcgi_split_path_info ^(.+\.php)(.*)$;            fastcgi_param PATH_INFO $fastcgi_path_info;            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;            fastcgi_param  PHP_VALUE        open_basedir=$document_root:/tmp/:/proc/;            include        fastcgi_params;        &#125;    &#125;    include vhost/*.conf;    &#125;

åè®°è‡³æ­¤ï¼Œå¤§åŠŸå‘Šæˆï¼Œsessionè·¨åŸŸé—®é¢˜å®Œç¾è§£å†³ã€‚
ä¹¦ç­¾
ThinkPHPæ¡†æ¶å®ç°sessionè·¨åŸŸé—®é¢˜çš„è§£å†³æ–¹æ³•
ThinkPHPäºŒçº§åŸŸåsessionå…±äº«é—®é¢˜
php è·¨åŸŸã€è·¨å­åŸŸï¼Œè·¨æœåŠ¡å™¨è¯»å–session
è·¨æœåŠ¡å™¨Sessionå…±äº«çš„å››ç§æ–¹æ³•
Angularé€šè¿‡CORSå®ç°è·¨åŸŸæ–¹æ¡ˆ

]]></content>
      <categories>
        <category>engineering</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>nginx</tag>
        <tag>thinkphp</tag>
        <tag>session</tag>
        <tag>è·¨åŸŸ</tag>
      </tags>
  </entry>
  <entry>
    <title>thinkphpéƒ¨ç½²åˆ°nginxæœåŠ¡å™¨</title>
    <url>/dev-thinkphp-nginx/</url>
    <content><![CDATA[å‰è¨€nginxé»˜è®¤æƒ…å†µä¸‹ä¸æ”¯æŒpathinfoæ¨¡å¼ï¼Œä»è€Œä¸èƒ½æ”¯æŒThinkPHPã€‚èƒ½è®¿é—®çš„ï¼Œåªæœ‰é¦–é¡µï¼Œå…¶ä»–å‡½æ•°çš„è·¯å¾„ï¼Œéƒ½æ— æ³•è®¿é—®ã€‚


nginxé…ç½®æ”¯æŒpathinfoé¦–å…ˆï¼ŒæŸ¥çœ‹nginxé…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œps aux | grep nginxã€‚ç„¶åï¼Œè¿›å…¥é…ç½®æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹ï¼Œå¤‡ä»½é…ç½®æ–‡ä»¶cp nginx.conf nginx.conf_mybakã€‚
åŸnginx.confå†…å®¹å¦‚ä¸‹ï¼š
error_log  logs/error.log  error ;pid logs/nginx.pid;user  www;worker_processes  auto;worker_rlimit_nofile 51200;events &#123;    use epoll;    worker_connections  51200;&#125;http &#123;    client_body_buffer_size 32k;    client_header_buffer_size 2k;    client_max_body_size 2m;    default_type application/octet-stream;    log_not_found off;    server_tokens off;    include       mime.types;    gzip on;    gzip_min_length  1k;    gzip_buffers     4 16k;    gzip_http_version 1.0;    gzip_comp_level 2;    gzip_types       text/plain text/css text/xml text/javascript application/x-javascript application/xml application/rss+xml application/xhtml+xml application/atom_xml;    gzip_vary on;    #error_page   500 502 503 504  /50x.html;     log_format  access  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;              &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;              &#x27;&quot;$http_user_agent&quot; $http_x_forwarded_for&#x27;;    server &#123;        listen 80 default_server;        server_name localhost;        root /home/wwwroot/;        index index.php index.html index.htm;        location ~ \.php$ &#123;            fastcgi_pass   127.0.0.1:9000;            fastcgi_index  index.php;            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;            fastcgi_param  PHP_VALUE        open_basedir=$document_root:/tmp/:/proc/;            include        fastcgi_params;        &#125;    &#125;    include vhost/*.conf;    &#125;

ä¿®æ”¹nginx.confçš„serveréƒ¨åˆ†å¦‚ä¸‹ï¼š
server &#123;    listen 80 default_server;    server_name localhost;    root /home/wwwroot/;    index index.html index.htm index.php;    error_page 404 /404.html;    location = /404.html &#123;        return 404 &#x27;Sorry, File not Found!&#x27;;    &#125;    error_page 500 502 503 504 /50x.html;    location = /50x.html &#123;        root /usr/local/nginx/html; # windowsç”¨æˆ·æ›¿æ¢è¿™ä¸ªç›®å½•    &#125;    location / &#123;        try_files $uri @rewrite;    &#125;    location @rewrite &#123;        set $static 0;        if  ($uri ~ \.(css|js|jpg|jpeg|png|gif|ico|woff|eot|svg|css\.map|min\.map)$) &#123;            set $static 1;        &#125;        if ($static = 0) &#123;            rewrite ^/(.*)$ /index.php?s=/$1;        &#125;    &#125;    location ~ /Uploads/.*\.php$ &#123;        deny all;    &#125;    location ~ \.php/ &#123;       if ($request_uri ~ ^(.+\.php)(/.+?)($|\?)) &#123; &#125;       fastcgi_pass 127.0.0.1:9000;       include fastcgi_params;       fastcgi_param SCRIPT_NAME     $1;       fastcgi_param PATH_INFO       $2;       fastcgi_param SCRIPT_FILENAME $document_root$1;    &#125;    location ~ \.php$ &#123;        fastcgi_pass 127.0.0.1:9000;        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;        include fastcgi_params;    &#125;    location ~ /\.ht &#123;        deny  all;    &#125;&#125;

æœ€åï¼Œé‡å¯nginxã€‚cd /usr/local/nginx/sbinï¼Œ./nginx -s reloadã€‚
è®¿é—®http://192.168.56.101ï¼Œæç¤ºNo input file specified.ã€‚å‡ºé”™äº†ï¼Ÿä¸è¿‡æ²¡æœ‰å¤ªå¤§å½±å“ã€‚
è¾“å…¥å‡½æ•°å®Œæ•´è·¯å¾„ï¼Œhttp://192.168.56.101/thinkphp/index.php/Home/Index/getInfoï¼Œè·å–ä¿¡æ¯æˆåŠŸï¼è‡³æ­¤ï¼Œnginxé…ç½®æ”¯æŒpathinfoæˆåŠŸï¼
nginxé…ç½®æ”¯æŒè·¨åŸŸç´§æ¥ç€ä¸Šé¢çš„nginx.confé…ç½®æ–‡ä»¶ä¿®æ”¹ï¼Œæ·»åŠ ä¸€è¡Œå³å¯ï¼š
add_header Access-Control-Allow-Origin *;location / &#123;    try_files $uri @rewrite;&#125;


No input file specifiedç´§æ¥ç€ä¸Šé¢çš„nginx.confé…ç½®æ–‡ä»¶ä¿®æ”¹ï¼Œæ·»åŠ ä¸€è¡Œå³å¯ï¼š
http &#123;    # å…¶ä»–é…ç½®çœç•¥    fastcgi_intercept_errors on;    include vhost/*.conf;&#125;

åè®°è‡³æ­¤ï¼Œåœ¨è™šæ‹ŸæœºCentOS7ä¸Šé…ç½®çš„nginxï¼Œå·²ç»æ”¯æŒpathinfoæ¨¡å¼ã€æ”¯æŒè·¨åŸŸã€404æŠ¥é”™æ­£å¸¸ã€‚
é˜¿é‡Œäº‘åŒæ ·çš„é…ç½®ï¼Œæ”¾åœ¨é˜¿é‡Œäº‘çš„CentOS6.5ä¸Šå±…ç„¶æŠ¥é”™ï¼æ— å¥ˆï¼Œå¯»æ‰¾å¦å¤–ä¸€ç§é…ç½®nginxæ”¯æŒpathinfoæ¨¡å¼çš„æ–¹æ³•ã€‚åªéœ€è¦åœ¨nginx.confåˆå§‹é…ç½®çš„åŸºç¡€ä¸Šï¼Œä¿®æ”¹å››ä¸ªåœ°æ–¹å³å¯ï¼š
location ~ \.php &#123; #å»æ‰$    root /home/wwwroot/; #å¢åŠ è¿™ä¸€å¥    fastcgi_pass   127.0.0.1:9000;    fastcgi_index  index.php;    fastcgi_split_path_info ^(.+\.php)(.*)$; #å¢åŠ è¿™ä¸€å¥    fastcgi_param PATH_INFO $fastcgi_path_info; #å¢åŠ è¿™ä¸€å¥    fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;    fastcgi_param  PHP_VALUE        open_basedir=$document_root:/tmp/:/proc/;    include        fastcgi_params;&#125;

æ·»åŠ è·¨åŸŸæ”¯æŒï¼š
add_header Access-Control-Allow-Origin *;

åŸŸåç»‘å®šï¼š
server_name localhost api.voidking.com;
ç„¶åï¼Œåœ¨ä¸‡ç½‘æ·»åŠ åŸŸåè§£æAè®°å½•åˆ°é˜¿é‡Œäº‘ä¸»æœºipåœ°å€ã€‚
ä¹¦ç­¾æœ€å®Œç¾ThinkPHP nginx é…ç½®æ–‡ä»¶https://my.oschina.net/zhuyajie/blog/523268
Nginxè·¨åŸŸé…ç½®ï¼Œæ”¯æŒDELETE,PUTè¯·æ±‚http://to-u.xyz/nginx-cors/
Nginxæ‰§è¡Œphpæ˜¾ç¤ºno input file specifiedçš„å¤„ç†æ–¹æ³•http://www.ahlinux.com/nginx/3984.html
nginxæŒ‡å®š404 No input file specifiedhttp://coolnull.com/238.html
ç®€å•é…ç½®nginxä½¿ä¹‹æ”¯æŒpathinfohttp://www.thinkphp.cn/topic/3228.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>nginx</tag>
        <tag>centos</tag>
        <tag>thinkphp</tag>
        <tag>pathinfo</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaç½‘é¡µçˆ¬è™«</title>
    <url>/dev-java-crawler/</url>
    <content><![CDATA[åŠŸèƒ½è¿›é˜¶1ã€Javaç½‘é¡µçˆ¬è™«ï¼Œæœ€åŸºç¡€çš„åŠŸèƒ½ï¼Œæ˜¯èƒ½çˆ¬å–æŸä¸ªé¡µé¢çš„htmlæºç ã€‚2ã€å›¾å½¢åŒ–ç•Œé¢ã€‚3ã€çˆ¬å–æŸä¸ªé¡µé¢çš„htmlæºç ï¼Œä»¥åŠé¡µé¢éœ€è¦çš„é™æ€èµ„æºï¼ˆå›¾ç‰‡ã€csså’Œjsï¼‰ã€‚4ã€çˆ¬å–æŸä¸ªé¡µé¢çš„htmlæºç ï¼Œä»¥åŠé¡µé¢ä¸­çš„é“¾æ¥æŒ‡å‘çš„é¡µé¢çš„htmlæºç ï¼Œå¹¶ä¸”ä¸æ–­åœ°å»¶ä¼¸çˆ¬å–ã€‚
æ•´ä¸ªå¼€å‘è¿‡ç¨‹ï¼Œéœ€è¦ç”¨åˆ°ç½‘ç»œç¼–ç¨‹ã€æ­£åˆ™è¡¨è¾¾å¼ã€I/Oæµã€å›¾å½¢ç•Œé¢ç¼–ç¨‹ã€äº‹ä»¶ç›‘å¬ã€å¤šçº¿ç¨‹ç­‰ã€‚ä¸ºäº†ç®€åŒ–å¼€å‘ï¼Œè¿˜éœ€è¦ç”¨åˆ°ä¸€äº›å¤–éƒ¨jaråŒ…ï¼Œæ¯”å¦‚jsoupã€‚


æ¨¡å—åˆ’åˆ†1ã€è·å–é¡µé¢æ¨¡å—ï¼šè·å–é¡µé¢æ–‡æ¡£ï¼Œä»¥åŠé¡µé¢æ–‡æ¡£çš„å­—ç¬¦ä¸²ã€‚2ã€è·å–é¡µé¢é“¾æ¥æ¨¡å—ï¼šè·å–é¡µé¢ä¸­å­˜åœ¨çš„å„ç§é“¾æ¥ï¼ŒåŒ…æ‹¬aæ ‡ç­¾ã€imgæ ‡ç­¾ã€cssé“¾æ¥ã€jsé“¾æ¥ç­‰ã€‚3ã€è·å–é™æ€æ–‡ä»¶æ¨¡å—ï¼šé™æ€æ–‡ä»¶åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œä¸€ç§æ˜¯å­—èŠ‚ç±»å‹ã€‚4ã€ä¿å­˜æ–‡ä»¶æ¨¡å—ï¼šä¿å­˜é¡µé¢æ–‡æ¡£å’Œé™æ€æ–‡ä»¶ã€‚5ã€ç•Œé¢æ¨¡å—ï¼šåŒ…æ‹¬ç•Œé¢è®¾è®¡ï¼Œäº‹ä»¶ç›‘å¬å¤„ç†ã€‚
æ ¸å¿ƒä»£ç æ‘˜è¦è·å–é¡µé¢æ¨¡å—public class Page &#123;    Document doc = null;    public Page(String url) &#123;        try &#123;            doc = Jsoup.connect(url).timeout(5000).userAgent(&quot;Mozilla&quot;).get();        &#125; catch (IOException e) &#123;            e.printStackTrace();        &#125;    &#125;        public String getHtml()&#123;        return doc.html();    &#125;        public Document getDoc()&#123;        return doc;    &#125;&#125;

è·å–é¡µé¢é“¾æ¥æ¨¡å—public class UrlList &#123;    public Document doc = null;    public UrlList(String url) &#123;        try &#123;            doc = Jsoup.connect(url).timeout(5000).userAgent(&quot;Mozilla&quot;).get();        &#125; catch (IOException e) &#123;            e.printStackTrace();        &#125;    &#125;        public ArrayList&lt;Element&gt; getLinkList()&#123;        Elements links = doc.select(&quot;link[href]&quot;);        ArrayList&lt;Element&gt; resultList = new ArrayList&lt;Element&gt;();        for(Element link : links)&#123;            resultList.add(link);        &#125;        return resultList;    &#125;        public ArrayList&lt;Element&gt; getCssList()&#123;        Elements links = doc.select(&quot;link[href]&quot;);        ArrayList&lt;Element&gt; resultList = new ArrayList&lt;Element&gt;();        for(Element link : links)&#123;            if(&quot;stylesheet&quot;.equals(link.attr(&quot;rel&quot;)))&#123;                resultList.add(link);                           &#125;        &#125;        return resultList;    &#125;        public ArrayList&lt;Element&gt; getAList()&#123;        Elements links = doc.select(&quot;a[href]&quot;);        ArrayList&lt;Element&gt; resultList = new ArrayList&lt;Element&gt;();        for(Element link : links)&#123;            resultList.add(link);        &#125;        return resultList;    &#125;        public ArrayList&lt;Element&gt; getImgList()&#123;        Elements links = doc.select(&quot;img[src]&quot;);        ArrayList&lt;Element&gt; resultList = new ArrayList&lt;Element&gt;();        for(Element link : links)&#123;            resultList.add(link);        &#125;        return resultList;    &#125;        public ArrayList&lt;Element&gt; getJsList()&#123;        Elements links = doc.select(&quot;script[src]&quot;);        ArrayList&lt;Element&gt; resultList = new ArrayList&lt;Element&gt;();        for(Element link : links)&#123;            resultList.add(link);        &#125;        return resultList;    &#125;&#125; 

è·å–é™æ€æ–‡ä»¶public class Source &#123;    public String getString(String url) &#123; // å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²ç”¨æ¥å­˜å‚¨ç½‘é¡µå†…å®¹        String result = &quot;&quot;;        // å®šä¹‰ä¸€ä¸ªç¼“å†²å­—ç¬¦è¾“å…¥æµ        BufferedReader in = null;        try &#123;            // å°†stringè½¬æˆurlå¯¹è±¡            URL realUrl = new URL(url);            // åˆå§‹åŒ–ä¸€ä¸ªé“¾æ¥åˆ°é‚£ä¸ªurlçš„è¿æ¥            URLConnection connection = realUrl.openConnection();            // å¼€å§‹å®é™…çš„è¿æ¥            connection.connect();            // åˆå§‹åŒ– BufferedReaderè¾“å…¥æµæ¥è¯»å–URLçš„å“åº”            in = new BufferedReader(new InputStreamReader(connection.getInputStream()));            // ç”¨æ¥ä¸´æ—¶å­˜å‚¨æŠ“å–åˆ°çš„æ¯ä¸€è¡Œçš„æ•°æ®            String line;            while ((line = in.readLine()) != null) &#123;                // éå†æŠ“å–åˆ°çš„æ¯ä¸€è¡Œå¹¶å°†å…¶å­˜å‚¨åˆ°resulté‡Œé¢                result += line;            &#125;        &#125; catch (Exception e) &#123;            System.out.println(&quot;å‘é€GETè¯·æ±‚å‡ºç°å¼‚å¸¸ï¼&quot; + e);            e.printStackTrace();        &#125; finally &#123;            try &#123;                if (in != null) &#123;                    in.close();                &#125;            &#125; catch (Exception e2) &#123;                e2.printStackTrace();            &#125;        &#125;        return result;    &#125;&#125;

ä¿å­˜æ–‡ä»¶æ¨¡å—public class SaveFile &#123;    public void saveFile(String path, String htmlStr) &#123;        File file = new File(path + &quot;\\çˆ¬å–çš„æ–‡ä»¶\\index.html&quot;);        if (!file.getParentFile().exists()) &#123;            file.getParentFile().mkdirs();        &#125;        // å­—èŠ‚è¾“å‡ºæµ        FileOutputStream fos = null;        try &#123;            fos = new FileOutputStream(file);            OutputStreamWriter writer = new OutputStreamWriter(fos, &quot;UTF-8&quot;);            writer.write(htmlStr);            writer.close();        &#125; catch (Exception e) &#123;            e.printStackTrace();        &#125; finally &#123;            try &#123;                fos.close();            &#125; catch (IOException e) &#123;                // TODO Auto-generated catch block                e.printStackTrace();            &#125;        &#125;    &#125;    public void saveCss(String path, ArrayList&lt;Element&gt; cssList) &#123;        for (int i = 0; i &lt; cssList.size(); i++) &#123;            if (!cssList.get(i).attr(&quot;abs:href&quot;).equals(cssList.get(i).attr(&quot;href&quot;))) &#123;                Source source = new Source();                String css = source.getString(cssList.get(i).attr(&quot;abs:href&quot;));                String paths[] = cssList.get(i).attr(&quot;href&quot;).split(&quot;\\?&quot;);                File file = new File(path + &quot;\\çˆ¬å–çš„æ–‡ä»¶\\&quot; + paths[0]);                if (!file.getParentFile().exists()) &#123;                    file.getParentFile().mkdirs();                &#125;                // å­—èŠ‚è¾“å‡ºæµ                FileOutputStream fos = null;                try &#123;                    fos = new FileOutputStream(file);                    OutputStreamWriter writer = new OutputStreamWriter(fos, &quot;UTF-8&quot;);                    writer.write(css);                    writer.close();                &#125; catch (Exception e) &#123;                    e.printStackTrace();                &#125; finally &#123;                    try &#123;                        fos.close();                    &#125; catch (IOException e) &#123;                        // TODO Auto-generated catch block                        e.printStackTrace();                    &#125;                &#125;            &#125;        &#125;    &#125;    public void saveImg(String path, ArrayList&lt;Element&gt; imgList) &#123;        for (int i = 0; i &lt; imgList.size(); i++) &#123;            if (!imgList.get(i).attr(&quot;abs:src&quot;).equals(imgList.get(i).attr(&quot;src&quot;))) &#123;                String paths[] = imgList.get(i).attr(&quot;src&quot;).split(&quot;\\?&quot;);                File file = new File(path + &quot;\\çˆ¬å–çš„æ–‡ä»¶\\&quot; + paths[0]);                if (!file.getParentFile().exists()) &#123;                    file.getParentFile().mkdirs();                &#125;                try &#123;                    URL uri = new URL(imgList.get(i).attr(&quot;abs:src&quot;));                      InputStream in = uri.openStream();                      FileOutputStream fo = new FileOutputStream(file);                      byte[] buf = new byte[1024];                      int length = 0;                      while ((length = in.read(buf, 0, buf.length)) != -1) &#123;                          fo.write(buf, 0, length);                      &#125;                      in.close();                      fo.close();                  &#125; catch (Exception e) &#123;                      e.printStackTrace();                  &#125;                              &#125;        &#125;    &#125;        public void saveJs(String path, ArrayList&lt;Element&gt; jsList)&#123;        for (int i = 0; i &lt; jsList.size(); i++) &#123;            if (!jsList.get(i).attr(&quot;abs:src&quot;).equals(jsList.get(i).attr(&quot;src&quot;))) &#123;                Source source = new Source();                String css = source.getString(jsList.get(i).attr(&quot;abs:src&quot;));                String paths[] = jsList.get(i).attr(&quot;src&quot;).split(&quot;\\?&quot;);                File file = new File(path + &quot;\\çˆ¬å–çš„æ–‡ä»¶\\&quot; + paths[0]);                if (!file.getParentFile().exists()) &#123;                    file.getParentFile().mkdirs();                &#125;                // å­—èŠ‚è¾“å‡ºæµ                FileOutputStream fos = null;                try &#123;                    fos = new FileOutputStream(file);                    OutputStreamWriter writer = new OutputStreamWriter(fos, &quot;UTF-8&quot;);                    writer.write(css);                    writer.close();                &#125; catch (Exception e) &#123;                    e.printStackTrace();                &#125; finally &#123;                    try &#123;                        fos.close();                    &#125; catch (IOException e) &#123;                        // TODO Auto-generated catch block                        e.printStackTrace();                    &#125;                &#125;            &#125;        &#125;    &#125;&#125;

ç•Œé¢æ¨¡å—ä»£ç ç•¥ï¼Œæ¥ä¸ªå›¾è¯´æ˜è®¾è®¡ã€‚
åè®°æœªå¡«çš„å‘ï¼š1ã€æœ€ç»ˆè®¾è®¡åšåˆ°äº†åŠŸèƒ½3ï¼ŒåŠŸèƒ½4æœªåšã€‚2ã€çˆ¬å–æ–‡ä»¶çš„ç›¸å¯¹ä½ç½®éœ€è¦å¦åšå¤„ç†ã€‚
æºç åˆ†äº«https://github.com/voidking/java-crawler
ä¹¦ç­¾å¦‚ä½•ç”¨Javaå†™ä¸€ä¸ªçˆ¬è™«ï¼Ÿhttps://www.zhihu.com/question/30626103
é›¶åŸºç¡€å†™JavaçŸ¥ä¹çˆ¬è™«ä¹‹å…ˆæ‹¿ç™¾åº¦é¦–é¡µç»ƒç»ƒæ‰‹http://www.jb51.net/article/57193.htm
ç½‘é¡µçˆ¬è™«çš„è®¾è®¡ä¸å®ç°ï¼ˆJavaç‰ˆï¼‰http://www.aiuxian.com/article/p-2279197.html
ç½‘é¡µçˆ¬è™«ç³»ç»Ÿçš„è®¾è®¡http://www.tuicool.com/articles/7JVzIza
ä¸“æ ï¼šä½¿ç”¨JSOUPå®ç°ç½‘ç»œçˆ¬è™«http://blog.csdn.net/column/details/jsoup.html
jsoup Cookbook(ä¸­æ–‡ç‰ˆ)http://www.open-open.com/jsoup/
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>Hadoopå•è¯è®¡æ•°</title>
    <url>/dev-hadoop-wordcount/</url>
    <content><![CDATA[å‰è¨€ã€Šåœ¨Ubuntu16.04ä¸Šå®‰è£…Hadoopã€‹ä¸€æ–‡ä¸­ï¼Œæ­å»ºå¥½äº†hadoopå¹³å°ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å‚ç…§æ…•è¯¾ç½‘Kit_Rençš„ã€ŠHadoopå¤§æ•°æ®å¹³å°æ¶æ„ä¸å®è·µâ€”â€”åŸºç¡€ç¯‡ã€‹æ•™ç¨‹ï¼Œè·‘ä¸€ä¸‹å•è¯è®¡æ•°ç¨‹åºã€‚
è¦æ±‚ï¼šè®¡ç®—æ–‡ä»¶ä¸­å‡ºç°æ¯ä¸ªå•è¯çš„é¢‘æ•°ï¼Œè¾“å…¥ç»“æœæŒ‰ç…§å­—æ¯é¡ºåºè¿›è¡Œæ’åºã€‚è¾“å…¥ï¼š
hello world bye worldhello hadoop bye hadoopbye hadoop hello hadoop

è¾“å‡ºï¼š
bye     3hello   3hadoop  4world   2



MapReduceè¿‡ç¨‹
ç¼–è¯‘æ‰“åŒ…å’Œè¿è¡Œ1ã€ä¸Šä¼  WordCount.java æ–‡ä»¶åˆ°hadoopæ‰€åœ¨æœºå™¨
2ã€ç¼–è¯‘javaæ–‡ä»¶
javac -classpath /opt/hadoop-1.2.1/hadoop-core-1.2.1.jar:/opt/hadoop-1.2.1/lib/commons-cli-1.2.jar WordCount.java

3ã€æ‰“åŒ…ä¸‰ä¸ª.classæ–‡ä»¶ä¸ºä¸€ä¸ªjaræ–‡ä»¶
jar -cvf wordcount.jar *.class

4ã€æ–°å»ºä¸¤ä¸ªæ–‡ä»¶ï¼Œfile1å’Œfile2ï¼Œå†…å®¹åˆ†åˆ«ä¸ºï¼š
hello world bye worldhello hadoop bye hadoopbye hadoop hello hadoop

hello world bye worldsystem hello hadoop

5ã€æŠŠfile1å’Œfile2æ”¾åˆ°hdfsä¸­
hadoop fs -mkdir wordcount_inputhadoop fs -put file* wordcount_input/

6ã€æ‰§è¡ŒjaråŒ…
hadoop jar wordcount.jar WordCount wordcount_input wordcount_output

7ã€æŸ¥çœ‹ç»“æœ
hadoop fs -ls wordcount_output`ï¼Œ`hadoop fs -cat wordcount_output/part-r-00000

]]></content>
      <categories>
        <category>engineering</category>
        <category>bigdata</category>
      </categories>
      <tags>
        <tag>å¤§æ•°æ®</tag>
        <tag>java</tag>
        <tag>hadoop</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQLé‡ç½®å¯†ç </title>
    <url>/dev-mysql-reset-password/</url>
    <content><![CDATA[mysql5.6è®¾ç½®å¯†ç é€šè¿‡ä¿®æ”¹è¡¨æ•°æ®è®¾ç½®å¯†ç ä¸€èˆ¬mysqlçš„rooté»˜è®¤å¯†ç ä¸ºç©ºï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰è®¾ç½®è¿‡rootå¯†ç ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç©ºå¯†ç ç™»å½•åè®¾ç½®å¯†ç ã€‚
1ã€å¯åŠ¨mysql
service start mysql

2ã€è¿›å…¥mysqlæ§åˆ¶å°
mysql -u root

3ã€ä¿®æ”¹å¯†ç 
use mysql;update mysql.user set password=password(&#x27;voidking&#x27;) where user=&#x27;root&#x27;;exit;

4ã€é‡å¯mysqlæœåŠ¡
service mysqld restart

5ã€æµ‹è¯•ç™»å½•
mysql -u root -p



é€šè¿‡mysqladminä¿®æ”¹å¯†ç 1ã€å¯åŠ¨mysql
2ã€é‡ç½®å¯†ç 
mysqladmin -u root -p password voidking

mysql5.6å¿˜è®°å¯†ç 1ã€åœæ­¢æˆ–è€…killæ‰mysqlè¿›ç¨‹
service mysqld stop

2ã€ä»¥ä¸æ£€æŸ¥æƒé™çš„æ–¹å¼å¯åŠ¨mysql
cd /usr/local/mysql/bin./mysqld_safe --skip-grant-tables &amp;

3ã€ç”¨ç©ºå¯†ç ç™»å½•mysql
mysql -u root

4ã€ä¿®æ”¹rootç”¨æˆ·çš„å¯†ç 
use mysql;select user, host from user;update user set password=password(&#x27;voidking&#x27;) where user=&#x27;root&#x27; and host=&#x27;localhost&#x27;;update user set password=password(&#x27;voidking&#x27;) where user=&#x27;root&#x27; and host=&#x27;%&#x27;;-- orgrant all privileges on *.* to root@&#x27;localhost&#x27; identified by &#x27;voidking&#x27; with grant option;grant all privileges on *.* to root@&#x27;%&#x27; identified by &#x27;voidking&#x27; with grant option;select host, user from user;flush privileges;quit;

PSï¼šä¸»æœºåœ°å€æ”¯æŒå•ä¸ª IP å½¢å¼çš„åœ°å€ï¼Œä¹Ÿæ”¯æŒå¡«å…¥%ï¼ˆè¡¨ç¤ºä¸åš IP èŒƒå›´é™åˆ¶ï¼‰è¿›è¡Œæ¨¡ç³ŠåŒ¹é…ã€‚ç¤ºä¾‹1ï¼šå¡«å…¥%ï¼Œè¡¨ç¤ºä¸åš IP èŒƒå›´é™åˆ¶ï¼Œå³å…è®¸æ‰€æœ‰ IP åœ°å€çš„å®¢æˆ·ç«¯ä½¿ç”¨è¯¥å¸å·è®¿é—®æ•°æ®åº“ã€‚ç¤ºä¾‹2ï¼šå¡«å…¥10.5.10.%ï¼Œè¡¨ç¤ºå…è®¸ IP èŒƒå›´åœ¨10.5.10.%å†…çš„å®¢æˆ·ç«¯ä½¿ç”¨è¯¥å¸å·è®¿é—®æ•°æ®åº“ã€‚ç¤ºä¾‹3ï¼šå¡«å…¥%.mysql-read.mysql.svc.cluster.localï¼Œè¡¨ç¤ºå…è®¸ä¸»æœºåèŒƒå›´åœ¨%.mysql-read.mysql.svc.cluster.localå†…çš„å®¢æˆ·ç«¯ä½¿ç”¨è¯¥å¸å·è®¿é—®æ•°æ®åº“ã€‚
5ã€é‡æ–°å¯åŠ¨mysql
ps -e | grep mysqlkill -KILL $mysqld_safe_pidkill -KILL $mysqld_pidservice mysqld start

6ã€æµ‹è¯•ç™»å½•mysql
mysql -u root -p

mysql5.7ä¿®æ”¹å¯†ç select user,host from mysql.user where user=&#x27;root&#x27;;set password for root@&#x27;localhost&#x27; = password(&#x27;voidking&#x27;);set password for root@&#x27;%&#x27; = password(&#x27;voidking&#x27;);

mysql8é‡ç½®å¯†ç alter user &#x27;root&#x27;@&#x27;localhost&#x27; identified with mysql_native_password by &#x27;voidking&#x27;;flush privileges;

å…è®¸è¿œç¨‹è®¿é—®1ã€ç¡®è®¤é…ç½®äº†è¿œç¨‹è®¿é—®æƒé™
use mysql;select user, host from user where user=&#x27;root&#x27;;grant all privileges on *.* to &#x27;root&#x27;@&#x27;%&#x27; with grant option;

2ã€å¼€æ”¾æ‰€åœ¨ä¸»æœºç«¯å£
systemctl stop firewalld.service# orfirewall-cmd --zone=public --add-port=3306/tcp --permanentfirewall-cmd --reload

ä¹¦ç­¾
Mysqlæ•°æ®åº“ä¸­è®¾ç½®rootå¯†ç çš„å‘½ä»¤åŠæ–¹æ³•
Access denied for user â€˜root@localhostâ€™ (using password:NO)

]]></content>
      <categories>
        <category>engineering</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Hadoopå…¥é—¨ç¯‡</title>
    <url>/dev-hadoop-start/</url>
    <content><![CDATA[ä»€ä¹ˆæ˜¯å¤§æ•°æ®ï¼Ÿä»€ä¹ˆæ˜¯å¤§æ•°æ®ï¼Ÿæ­£å¦‚å­—é¢æ„æ€ï¼Œå¤§é‡çš„æ•°æ®ã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒMysqlçš„ä¸€å¼ è¡¨é‡Œå­˜äº†1ä¸‡æ¡æ•°æ®ï¼ŒæŸ¥è¯¢æ²¡é—®é¢˜ï¼›100ä¸‡æ¡æ•°æ®ï¼ŒæŸ¥è¯¢ä¹Ÿæ²¡é—®é¢˜ï¼›é‚£ä¹ˆï¼Œ1äº¿æ¡æ•°æ®ï¼Ÿ100äº¿æ¡æ•°æ®ï¼Ÿæ›´å¤§çš„æ•°æ®ï¼Ÿ

å¤§æ•°æ®ç§‘å­¦å®¶JohnRauseræåˆ°ä¸€ä¸ªç®€å•çš„å®šä¹‰ï¼šå¤§æ•°æ®å°±æ˜¯ä»»ä½•è¶…è¿‡äº†ä¸€å°è®¡ç®—æœºå¤„ç†èƒ½åŠ›çš„åºå¤§æ•°æ®é‡ã€‚

ä¸ºäº†å¤„ç†å¤§é‡çš„æ•°æ®ï¼Œæˆ‘ä»¬å¿…é¡»æ‰¾åˆ°æ›´å¥½çš„åŠæ³•ã€‚è°·æ­Œç»è¿‡ç ”ç©¶ï¼Œå‘è¡¨äº†ä¸€äº›å…³äºå¤§æ•°æ®è§£å†³æ–¹æ¡ˆçš„è®ºæ–‡ï¼Œæ¶‰åŠMapReduceã€BigTableã€GFSç­‰ã€‚ä½†æ˜¯ï¼Œè°·æ­Œå¼€å‘çš„å¤§æ•°æ®å¤„ç†å¹³å°ï¼Œå¹¶æ²¡æœ‰å¼€æºã€‚ä¸€äº›å‹¤å¥‹çš„åŒå­¦æ ¹æ®è°·æ­Œå‘è¡¨çš„è®ºæ–‡ï¼Œæå‡ºäº†Hadoopå¹³å°ï¼Œåæ¥æˆä¸ºä¸€ä¸ªä¸»æµçš„å¤§æ•°æ®å¤„ç†å¹³å°ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ä»€ä¹ˆæ˜¯å¤§æ•°æ®ï¼Ÿ
Hadoopå¤§æ•°æ®å¹³å°æ¶æ„ä¸å®è·µâ€“åŸºç¡€ç¯‡



å¤§æ•°æ®åˆ†æ1ã€å¯è§†åŒ–åˆ†æå¤§æ•°æ®åˆ†æçš„ä½¿ç”¨è€…æœ‰å¤§æ•°æ®åˆ†æä¸“å®¶ï¼ŒåŒæ—¶è¿˜æœ‰æ™®é€šç”¨æˆ·ï¼Œä½†æ˜¯ä»–ä»¬äºŒè€…å¯¹äºå¤§æ•°æ®åˆ†ææœ€åŸºæœ¬çš„è¦æ±‚å°±æ˜¯å¯è§†åŒ–åˆ†æï¼Œå› ä¸ºå¯è§†åŒ–åˆ†æèƒ½å¤Ÿç›´è§‚çš„å‘ˆç°å¤§æ•°æ®ç‰¹ç‚¹ï¼ŒåŒæ—¶èƒ½å¤Ÿéå¸¸å®¹æ˜“è¢«è¯»è€…æ‰€æ¥å—ï¼Œå°±å¦‚åŒçœ‹å›¾è¯´è¯ä¸€æ ·ç®€å•æ˜äº†ã€‚
2ã€æ•°æ®æŒ–æ˜ç®—æ³•å¤§æ•°æ®åˆ†æçš„ç†è®ºæ ¸å¿ƒå°±æ˜¯æ•°æ®æŒ–æ˜ç®—æ³•ï¼Œå„ç§æ•°æ®æŒ–æ˜çš„ç®—æ³•åŸºäºä¸åŒçš„æ•°æ®ç±»å‹å’Œæ ¼å¼æ‰èƒ½æ›´åŠ ç§‘å­¦çš„å‘ˆç°å‡ºæ•°æ®æœ¬èº«å…·å¤‡çš„ç‰¹ç‚¹ï¼Œä¹Ÿæ­£æ˜¯å› ä¸ºè¿™äº›è¢«å…¨ä¸–ç•Œç»Ÿè®¡å­¦å®¶æ‰€å…¬è®¤çš„å„ç§ç»Ÿè®¡æ–¹æ³•ï¼ˆå¯ä»¥ç§°ä¹‹ä¸ºçœŸç†ï¼‰æ‰èƒ½æ·±å…¥æ•°æ®å†…éƒ¨ï¼ŒæŒ–æ˜å‡ºå…¬è®¤çš„ä»·å€¼ã€‚å¦å¤–ä¸€ä¸ªæ–¹é¢ä¹Ÿæ˜¯å› ä¸ºæœ‰è¿™äº›æ•°æ®æŒ–æ˜çš„ç®—æ³•æ‰èƒ½æ›´å¿«é€Ÿçš„å¤„ç†å¤§æ•°æ®ï¼Œå¦‚æœä¸€ä¸ªç®—æ³•å¾—èŠ±ä¸Šå¥½å‡ å¹´æ‰èƒ½å¾—å‡ºç»“è®ºï¼Œé‚£å¤§æ•°æ®çš„ä»·å€¼ä¹Ÿå°±æ— ä»è¯´èµ·äº†ã€‚
3ã€é¢„æµ‹æ€§åˆ†æèƒ½åŠ›å¤§æ•°æ®åˆ†ææœ€ç»ˆè¦çš„åº”ç”¨é¢†åŸŸä¹‹ä¸€å°±æ˜¯é¢„æµ‹æ€§åˆ†æï¼Œä»å¤§æ•°æ®ä¸­æŒ–æ˜å‡ºç‰¹ç‚¹ï¼Œé€šè¿‡ç§‘å­¦çš„å»ºç«‹æ¨¡å‹ï¼Œä¹‹åä¾¿å¯ä»¥é€šè¿‡æ¨¡å‹å¸¦å…¥æ–°çš„æ•°æ®ï¼Œä»è€Œé¢„æµ‹æœªæ¥çš„æ•°æ®ã€‚
4ã€æ•°æ®è´¨é‡å’Œæ•°æ®ç®¡ç†å¤§æ•°æ®åˆ†æç¦»ä¸å¼€æ•°æ®è´¨é‡å’Œæ•°æ®ç®¡ç†ï¼Œé«˜è´¨é‡çš„æ•°æ®å’Œæœ‰æ•ˆçš„æ•°æ®ç®¡ç†ï¼Œæ— è®ºæ˜¯åœ¨å­¦æœ¯ç ”ç©¶è¿˜æ˜¯åœ¨å•†ä¸šåº”ç”¨é¢†åŸŸï¼Œéƒ½èƒ½å¤Ÿä¿è¯åˆ†æç»“æœçš„çœŸå®å’Œæœ‰ä»·å€¼ã€‚
Hadoopç®€ä»‹
Apache Hadoop (/hÉ™ËˆduËp/) is a collection of open-source software utilities that facilitates using a network of many computers to solve problems involving massive amounts of data and computation. 

Apache Hadoopæ˜¯ä¸€ä¸ªå¼€æºå·¥å…·é›†åˆï¼Œèƒ½å¤Ÿé€šè¿‡ç½‘ç»œåˆ©ç”¨å¤šå°è®¡ç®—æœºè§£å†³å¤§é‡æ•°æ®å’Œå¤§é‡è®¡ç®—çš„é—®é¢˜ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Apache Hadoop
Hadoop Tutorial: Getting Started with Hadoop
1.0 Hadoop æ•™ç¨‹
Hadoop(ä¸€) åŸç†ç®€ä»‹ã€åŸºæœ¬æ„å»º

Hadoopæ¶æ„æœªå®Œå¾…ç»­
Hadoopå®‰è£…å‚è€ƒæ–‡æ¡£ã€Šåœ¨Linuxä¸­å®‰è£…Hadoopã€‹
Hadoopå¸¸ç”¨å‘½ä»¤æŸ¥çœ‹é›†ç¾¤çŠ¶æ€jps -ljps -l | grep hadoophdfs dfsadmin -reporthdfs haadmin -getAllServiceState

å•ç‹¬å¯åŠ¨namenodehdfs --daemon start namenode

æŸ¥çœ‹é…ç½®cd /usr/local/hadoop/hadoop-2.10.2/etc/hadoop/cat core-site.xmlcat hdfs-site.xmlcat log4j.properties...

æŸ¥çœ‹æ—¥å¿—è¿›å…¥log4j.propertiesä¸­é…ç½®çš„æ—¥å¿—ç›®å½•ï¼ŒæŸ¥çœ‹æ—¥å¿—ã€‚
tail -n 1000 xxx.log | grep xxx

æŸ¥çœ‹å­˜å‚¨hdfs dfs -df -hhdfs dfs -ls /

åˆ é™¤æ–‡ä»¶1ã€åˆ é™¤æ–‡ä»¶
hdfs dfs -rm -r -f /path/to/directory

å›æ”¶ç«™ä¿ç•™æ—¶é—´é…ç½®é¡¹fs.trash.intervalï¼Œé»˜è®¤é…ç½®1440åˆ†é’Ÿï¼Œåœ¨core-site.xmlä¸­é…ç½®ã€‚
2ã€è¿˜åŸå›æ”¶ç«™
hdfs dfs -mv /user/root/.Trash/Current/path/to/directory /path/to/

3ã€æ¸…ç†å›æ”¶ç«™
hdfs dfs -rm -r -f /user/root/.Trash/Current/path/to/directory#hdfs dfs -expunge

4ã€åˆ é™¤æ–‡ä»¶ï¼Œä¸ç»è¿‡å›æ”¶ç«™
hdfs dfs -rm -r -f /path/to/directory -skipTrash

æ³¨æ„ï¼šhdfsä¸­åˆ é™¤æ–‡ä»¶åï¼Œç³»ç»Ÿç£ç›˜åˆ é™¤æ–‡ä»¶éå¸¸æ…¢ã€‚æ›¾ç»åˆ é™¤è¿‡17Tçš„æ•°æ®ï¼Œç‰©ç†ç£ç›˜ä¸Šåˆ é™¤äº†ä¸‰å¤©æ‰å®Œæˆã€‚åˆ é™¤è¿‡ç¨‹å¯ä»¥æŸ¥çœ‹datanodeçš„æ—¥å¿—ã€‚
æ¸…ç†æŸåå—hdfs fsck /path/to/directoryhdfs fsck /path/to/directory -delete

æ‰¾åˆ°åå¤©å‰çš„æ–‡ä»¶now=$(date +%s)hdfs dfs -ls /wdc/result/tmp5 | grep &quot;^d&quot; | while read f; do dir_date=`echo $f | awk &#x27;&#123;print $6&#125;&#x27;` difference=$(( ( $now - $(date -d &quot;$dir_date&quot; +%s) ) / (24 * 60 * 60 ) )) if [ $difference -gt 10 ]; then   echo $f; fidone

å‚è€ƒæ–‡æ¡£How to find directories in HDFS which are older than N days?
]]></content>
      <categories>
        <category>engineering</category>
        <category>bigdata</category>
      </categories>
      <tags>
        <tag>å¤§æ•°æ®</tag>
        <tag>java</tag>
        <tag>hadoop</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxä¸­å®‰è£…é…ç½®Hadoop</title>
    <url>/dev-install-hadoop-on-linux/</url>
    <content><![CDATA[å‰è¨€Hadoopæ˜¯ä¸€ç§åˆ†å¸ƒå¼ç³»ç»Ÿæ¡†æ¶ï¼Œç»„ä»¶åŒ…æ‹¬HDFSã€MapRedureå’ŒYarnã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ åœ¨ Linux ç³»ç»Ÿä¸­å®‰è£… Hadoopã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Ubutnu20.04+hadoop2.10.2+hive1.2.2å®ç°å®Œç¾å®‰è£…è¯¦ç»†æ•™ç¨‹
Hadoop å®‰è£…è¯¦ç»†æ­¥éª¤

Hadoopä¸‹è½½åœ°å€ï¼š

Hadoop Download
Hadoop release archive
Hadoop release archive mirror site



å®‰è£…Hadoop1.2.1å®‰è£…JDK1.8å®‰è£…jdk-8u161ï¼Œå‚è€ƒæ–‡æ¡£ã€Šå…¨å¹³å°å®‰è£…JDKã€‹
ä¸‹è½½Hadoopå®‰è£…åŒ…wget http://mirror.bit.edu.cn/apache/hadoop/common/hadoop-1.2.1/hadoop-1.2.1.tar.gztar -xzvf hadoop-1.2.1.tar.gz -C /opt/

ä¿®æ”¹Hadoopé…ç½®1ã€ä¿®æ”¹hadoop-env.sh
cd /opt/hadoop-1.2.1/conf/vim hadoop-env.sh
ä¿®æ”¹JAVA_HOMEã€‚
export JAVA_HOME=/usr/lib/jvm/jdk1.8.0_161

2ã€ä¿®æ”¹core-site.xmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot;?&gt;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;&lt;!-- Put site-specific property overrides in this file. --&gt;&lt;configuration&gt;    &lt;property&gt;        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;        &lt;value&gt;/hadoop&lt;/value&gt;    &lt;/property&gt;    &lt;property&gt;        &lt;name&gt;dfs.name.dir&lt;/name&gt;        &lt;value&gt;/hadoop/name&lt;/value&gt;    &lt;/property&gt;    &lt;property&gt;        &lt;name&gt;fs.default.name&lt;/name&gt;        &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;    &lt;/property&gt;&lt;/configuration&gt;

3ã€ä¿®æ”¹hdfs-site.xmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot;?&gt;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;&lt;!-- Put site-specific property overrides in this file. --&gt;&lt;configuration&gt;    &lt;property&gt;        &lt;name&gt;dfs.data.dir&lt;/name&gt;        &lt;value&gt;/hadoop/data&lt;/value&gt;    &lt;/property&gt;&lt;/configuration&gt;

4ã€ä¿®æ”¹mapred-site.xmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot;?&gt;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;&lt;!-- Put site-specific property overrides in this file. --&gt;&lt;configuration&gt;    &lt;property&gt;        &lt;name&gt;mapred.job.tracker&lt;/name&gt;        &lt;value&gt;localhost:9001&lt;/value&gt;    &lt;/property&gt;&lt;/configuration&gt;

5ã€ä¿®æ”¹/etc/profileï¼Œä¿®æ”¹PATHå¦‚ä¸‹ï¼š
export HADOOP_HOME=/opt/hadoop-1.2.1export PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$HADOOP_HOME/bin:$PATH

ç”Ÿæ•ˆï¼Œsource /etc/profileã€‚
6ã€æµ‹è¯•
hadoop
å¦‚æœå‡ºç°COMMANDæç¤ºï¼Œåˆ™è¡¨æ˜å®‰è£…é…ç½®æˆåŠŸã€‚
å¦‚æœå‡ºç°ï¼šWarning: $HADOOP_HOME is deprecated.è¿™æ˜¯å› ä¸ºæ–°ç‰ˆçš„hadoopåºŸå¼ƒæ‰äº†HADOOP_HOMEè¿™ä¸ªå˜é‡ã€‚è‹¥è¦é™¤å»è¿™ä¸ªè­¦å‘Šï¼Œè¦ä¹ˆæ¢ç”¨HADOOP_PREFIXï¼Œè¦ä¹ˆåœ¨hadoop-env.shæ·»åŠ ä¸€è¡Œï¼š
export HADOOP_HOME_WARN_SUPPRESS=1
è¯¦æƒ…å‚è€ƒæ–‡æ¡£ï¼šWarning: $HADOOP_HOME is deprecated.çš„åŸå› ä»¥åŠè§£å†³æ–¹æ³•
å¯åŠ¨Hadoop1ã€namenodeæ ¼å¼åŒ–
hadoop namenode -format

2ã€å¯åŠ¨hadoop
cd /opt/hadoop-1.2.1/binstart-all.sh

3ã€æ£€æŸ¥æ˜¯å¦å¯åŠ¨æˆåŠŸ
jps
å¦‚æœçœ‹åˆ°ä¸Šå›¾ä¸­çš„è¿›ç¨‹ï¼Œåˆ™è¡¨æ˜å¯åŠ¨æˆåŠŸã€‚
4ã€æŸ¥çœ‹hadoop/hdfsä¸­æœ‰å“ªäº›æ–‡ä»¶
hadoop fs -ls /

è‡³æ­¤ï¼Œhadoopå®‰è£…å®Œæˆã€‚
å®‰è£…Hadoop2.10.2å®‰è£…JDK1.8å®‰è£…jdk-8u161ï¼Œå‚è€ƒæ–‡æ¡£ã€Šå…¨å¹³å°å®‰è£…JDKã€‹
ä¸‹è½½Hadoopå®‰è£…åŒ…wget https://dlcdn.apache.org/hadoop/common/hadoop-2.10.2/hadoop-2.10.2.tar.gz --no-check-certificatemkdir -p /usr/local/hadoop/tar -xzvf hadoop-2.10.2.tar.gz -C /usr/local/hadoop/

Hadoopé…ç½®ä½¿ç”¨JDK1ã€ä¿®æ”¹hadoop-env.sh
cd /usr/local/hadoop/hadoop-2.10.2vim etc/hadoop/hadoop-env.sh
ä¿®æ”¹JAVA_HOMEä¸ºç»å¯¹è·¯å¾„ã€‚
export JAVA_HOME=/usr/lib/jvm/jdk1.8.0_161

2ã€éªŒè¯ç¯å¢ƒ
./bin/hadoop version

å•æœºæµ‹è¯•è¿è¡Œmkdir ./inputcp ./etc/hadoop/*.xml ./input./bin/hadoop jar ./share/hadoop/mapreduce/hadoop-mapreduce-examples-*.jar grep ./input ./output &#x27;dfs[a-z.]+&#x27;cat ./output/*

çœ‹åˆ°ç»“æœ1  dfsadminè¡¨æ˜è¿è¡ŒæˆåŠŸã€‚
é…ç½®HDFSä¼ªåˆ†å¸ƒå¼éƒ¨ç½²ï¼š

åœ¨ä¸€å°æœºå™¨ä¸Šå®‰è£…ï¼Œä½¿ç”¨çš„æ˜¯åˆ†å¸ƒå¼æ€æƒ³ï¼Œå³åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œéæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€‚
Hdfsæ¶‰åŠåˆ°çš„ç›¸å…³å®ˆæŠ¤è¿›ç¨‹(namenode,datanode,secondarynamenode)éƒ½è¿è¡Œåœ¨ä¸€å°æœºå™¨ä¸Šï¼Œéƒ½æ˜¯ç‹¬ç«‹çš„javaè¿›ç¨‹ã€‚
ç”¨é€”æ¯” Standalone mode å¤šäº†ä»£ç è°ƒè¯•åŠŸèƒ½ï¼Œå…è®¸æ£€æŸ¥å†…å­˜ä½¿ç”¨æƒ…å†µï¼ŒHDFSè¾“å…¥è¾“å‡ºï¼Œä»¥åŠå…¶ä»–çš„å®ˆæŠ¤è¿›ç¨‹äº¤äº’ã€‚

1ã€ä¿®æ”¹etc/hadoop/core-site.xml
&lt;configuration&gt;    &lt;property&gt;        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;        &lt;value&gt;file:/usr/local/hadoop/hadoop-2.10.2/tmp&lt;/value&gt;    &lt;/property&gt;    &lt;property&gt;        &lt;name&gt;fs.defaultFS&lt;/name&gt;        &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;    &lt;/property&gt;&lt;/configuration&gt;

é…ç½®å‚è€ƒæ–‡æ¡£ï¼šhadoop2.10.2 core-default.xml
2ã€ä¿®æ”¹etc/hadoop/hdfs-site.xml
&lt;configuration&gt;    &lt;property&gt;        &lt;name&gt;dfs.replication&lt;/name&gt;        &lt;value&gt;1&lt;/value&gt;    &lt;/property&gt;    &lt;property&gt;        &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;        &lt;value&gt;file:/usr/local/hadoop/hadoop-2.10.2/tmp/dfs/name&lt;/value&gt;    &lt;/property&gt;    &lt;property&gt;        &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;        &lt;value&gt;file:/usr/local/hadoop/hadoop-2.10.2/tmp/dfs/data&lt;/value&gt;    &lt;/property&gt;&lt;/configuration&gt;

é…ç½®å‚è€ƒæ–‡æ¡£ï¼šhadoop2.10.2 hdfs-default.xml
3ã€æ ¼å¼åŒ–namenode
./bin/hdfs namenode -format

æ‰§è¡Œå®Œæˆï¼Œæ²¡æœ‰æŠ¥é”™ï¼Œå½“å‰ç›®å½•ä¸­å‡ºç°äº†tmpç›®å½•ï¼Œè¡¨æ˜æ ¼å¼åŒ–æˆåŠŸã€‚
4ã€å¯åŠ¨hadoopæœåŠ¡
./sbin/start-dfs.sh
éœ€è¦ä¸‰æ¬¡è¾“å…¥å½“å‰ç”¨æˆ·çš„å¯†ç ã€‚
5ã€æŸ¥çœ‹hadoopè¿›ç¨‹
jps -l

6ã€æµè§ˆå™¨è®¿é—®æµè§ˆå™¨è®¿é—® http://192.168.56.101:50070å¯ä»¥çœ‹åˆ° NameNode å’Œ Datanode çš„ä¿¡æ¯ã€‚
é…ç½®å…å¯†å¯åŠ¨å¯åŠ¨hadoopæ—¶éœ€è¦è¾“å…¥å¯†ç ï¼Œè¿™ä¸ªæ¯”è¾ƒéº»çƒ¦ï¼Œå¯ä»¥é€šè¿‡é…ç½®å…å¯†ç™»å½•çœå»è¾“å…¥å¯†ç çš„æ­¥éª¤ã€‚
ssh-keygenssh-copy-id localhost

åœæ­¢hadoopæœåŠ¡./sbin/stop-all.sh






]]></content>
      <categories>
        <category>engineering</category>
        <category>bigdata</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>å¤§æ•°æ®</tag>
        <tag>java</tag>
        <tag>hadoop</tag>
        <tag>spark</tag>
      </tags>
  </entry>
  <entry>
    <title>å¼€å‘è€…å¿…å¤‡çš„å¼€æ”¾å¹³å°æ³¨å†Œåº”ç”¨å¤§å…¨</title>
    <url>/hobby-open-platform/</url>
    <content><![CDATA[æ‰€è°“å¼€æ”¾å¹³å°ï¼Œå°±æ˜¯é¦–å…ˆæä¾›ä¸€ä¸ªåŸºæœ¬çš„æœåŠ¡ï¼Œç„¶åé€šè¿‡å¼€æ”¾è‡ªèº«çš„æ¥å£ï¼Œä½¿å¾—ç¬¬ä¸‰æ–¹å¼€å‘è€…å¾—ä»¥é€šè¿‡è¿ç”¨å’Œç»„è£…å…¶æ¥å£ä»¥åŠå…¶ä»–ç¬¬ä¸‰æ–¹æœåŠ¡æ¥å£äº§ç”Ÿæ–°çš„åº”ç”¨ï¼Œå¹¶ä¸”ä½¿å¾—è¯¥åº”ç”¨èƒ½å¤Ÿç»Ÿä¸€è¿è¡Œåœ¨è¿™ä¸ªå¹³å°ä¹‹ä¸Šï¼Œæˆ‘ä»¬æŠŠè¿™æ ·çš„ä¸€ç§ç½‘ç»œæœåŠ¡æ¨¡å¼å«åšå¼€æ”¾å¹³å°ã€‚å¼€æ”¾å¹³å°æ¨¡å¼æˆåŠŸçš„è¦ç‚¹åœ¨äºï¼Œé€šè¿‡è‡ªèº«æœåŠ¡å’Œç¬¬ä¸‰æ–¹åº”ç”¨çš„äº’åˆ©äº’æƒ ï¼Œæé«˜ç”¨æˆ·å¯¹å¹³å°ç½‘ç«™çš„ç²˜æ€§å’Œä½¿ç”¨ç¨‹åº¦ï¼Œè¿›è€Œæé«˜è·åˆ©ï¼ŒåŒæ—¶ï¼Œé€šè¿‡åˆ©ç›Šåˆ†æ‘Šï¼Œè¾¾åˆ°å¹³å°è‡ªèº«å’Œç¬¬ä¸‰æ–¹åº”ç”¨å¾ªç¯åˆºæ¿€è€Œäº§ç”Ÿçš„æ»šé›ªçƒå¼çš„å¢é•¿ã€‚éº¦å¸ƒæ”¶é›†äº†æœ€æ–°æœ€å…¨çš„å¼€æ”¾å¹³å°æ³¨å†Œåº”ç”¨ï¼Œç”¨å¾—ç€å°±æ”¶è—äº†å§ã€‚


1ã€æ–°æµªå¾®åšå¼€æ”¾å¹³å°ï¼šhttp://open.weibo.com/2ã€QQäº’è”ï¼šhttp://connect.qq.com/3ã€ç™¾åº¦å¼€æ”¾å¹³å°ï¼šhttp://open.baidu.com/4ã€ç™¾åº¦å®˜ç½‘è®¤è¯ï¼šhttp://guanwang.baidu.com/vcard/officialsite5ã€360å®˜ç½‘è®¤è¯ï¼šhttp://zhanzhang.so.com/?m=SiteCertification&amp;a=siteVerify6ã€Discuz! å¼€æ”¾å¹³å°ï¼šhttp://open.discuz.net/7ã€PHPCMSå¼€æ”¾å¹³å°ï¼šhttp://open.phpcms.cn/8ã€æœæœè®ºå›å¼€æ”¾è®¡åˆ’ï¼šhttp://open.soso.com/9ã€æœç‹—å¼€æ”¾å¹³å°ï¼šhttp://open.sogou.com/10ã€QQç©ºé—´è®¤è¯ï¼šhttp://page.opensns.qq.com/apply.html11ã€å¾®æ¸¸æˆå¼€æ”¾å¹³å°ï¼šhttp://open.weibo.com/game/12ã€è…¾è®¯å¾®åšå¼€æ”¾å¹³å°ï¼šhttp://dev.open.t.qq.com/13ã€å¾®ä¿¡å¼€æ”¾å¹³å°ï¼šhttp://open.weixin.qq.com/14ã€è…¾è®¯ç¤¾åŒºå¼€æ”¾å¹³å°ï¼šhttp://opensns.qq.com/15ã€è…¾è®¯Q+å¹³å°ï¼šhttp://dev.qplus.com/16ã€æ‹æ‹ç½‘å¼€æ”¾å¹³å°ï¼šhttp://pop.paipai.com/17ã€æœç‹—å®˜ç½‘è®¤è¯ï¼šhttp://help.sogou.com/renzheng/18ã€æœç‹—é—®é—®å¼€æ”¾å¹³å°ï¼šhttp://open.wenwen.sogou.com/19ã€ç™¾åº¦å¼€å‘è€…ä¸­å¿ƒï¼šhttp://developer.baidu.com/20ã€ç™¾åº¦çŸ¥é“å¼€æ”¾å¹³å°ï¼šhttp://open.zhidao.baidu.com/21ã€äººäººç½‘å¼€æ”¾å¹³å°ï¼šhttp://dev.renren.com/22ã€ç½‘æ˜“å¾®åšå¼€æ”¾å¹³å°ï¼šhttp://open.t.163.com/23ã€ç½‘æ˜“äº‘é˜…è¯»å¼€æ”¾å¹³å°ï¼šhttp://open.yuedu.163.com/24ã€æœç‹å¾®åšå¼€æ”¾å¹³å°ï¼šhttp://open.t.sohu.com/25ã€æœç‹æ–°é—»å®¢æˆ·ç«¯å…¨åª’ä½“å¹³å°ï¼šhttp://mp.k.sohu.com/26ã€æœç‹åšå®¢å¼€æ”¾å¹³å°ï¼šhttp://ow.blog.sohu.com/27ã€æ·˜å®å¼€æ”¾å¹³å°ï¼šhttp://open.taobao.com28ã€æ”¯ä»˜å®å¼€æ”¾å¹³å°ï¼šhttp://bizpartner.alipay.com/denglu/index.htm29ã€é˜¿é‡Œå·´å·´å¼€æ”¾å¹³å°ï¼šhttp://open.1688.com/30ã€è±†ç“£API keyï¼šhttp://www.douban.com/service/apikey/apply31ã€UCä¼˜è§†å¼€æ”¾å¹³å°ï¼šhttp://www.uc.cn/business/ucly.shtml32ã€å¤©æ¶¯å¼€æ”¾å¹³å°ï¼šhttp://open.tianya.cn/33ã€Googleç«™é•¿å¼€å‘è€…ï¼šhttps://www.google.com/accounts/ManageDomains34ã€å¼€å¿ƒå¼€æ”¾å¹³å°ï¼šhttp://open.kaixin001.com/35ã€å¤©ç¿¼å¼€æ”¾å¹³å°ï¼šhttp://open.189.cn/36ã€360è½¯ä»¶å¼€æ”¾å¹³å°ï¼šhttp://rz.360.cn/37ã€360åº”ç”¨å¼€æ”¾å¹³å°ï¼šhttp://dev.app.360.cn/38ã€é›…è™å¼€æ”¾å¹³å°ï¼šhttps://developer.apps.yahoo.com/projects39ã€Twitterå¼€æ”¾å¹³å°ï¼šhttps://dev.twitter.com/40ã€Facebookå¼€æ”¾å¹³å°ï¼šhttps://developers.facebook.com/41ã€56è§†é¢‘å¼€æ”¾å¹³å°ï¼šhttp://dev.56.com/42ã€äº¿èµ·å‘â€“å¼€æ”¾å¹³å°ï¼šhttp://open.yiqifa.com/43ã€PHPCMSå¼€æ”¾å¹³å°ï¼šhttp://open.phpcms.cn/44ã€UCä¼˜è§†å¼€æ”¾å¹³å°ï¼šhttp://www.uc.cn/business/ucly.shtml45ã€æ·˜å®å¼€æ”¾å¹³å°ï¼šhttp://open.taobao.com
è½¬è½½è‡ªï¼šhttp://mt.sohu.com/20160628/n456773156.shtml
]]></content>
      <categories>
        <category>computer</category>
      </categories>
  </entry>
  <entry>
    <title>CentOS7å®‰è£…SVN</title>
    <url>/dev-centos7-install-svn/</url>
    <content><![CDATA[SVNç®€ä»‹Apache Subversion é€šå¸¸è¢«ç¼©å†™æˆ SVNï¼Œæ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ŒSubversion åœ¨ 2000 å¹´ç”± CollabNet Inc å¼€å‘ï¼Œç°åœ¨å‘å±•æˆä¸º Apache è½¯ä»¶åŸºé‡‘ä¼šçš„ä¸€ä¸ªé¡¹ç›®ï¼Œæ‹¥æœ‰ä¸°å¯Œçš„å¼€å‘è€…å’Œç”¨æˆ·ç¤¾åŒºã€‚
SVNç›¸å¯¹äºçš„RCSã€CVSï¼Œé‡‡ç”¨äº†åˆ†æ”¯ç®¡ç†ç³»ç»Ÿï¼Œå®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯å–ä»£CVSã€‚äº’è”ç½‘ä¸Šå…è´¹çš„ç‰ˆæœ¬æ§åˆ¶æœåŠ¡å¤§å¤šåŸºäºSubversionã€‚
æœ¬æ–‡ä¸­ï¼Œåœ¨CentOS7ä¸­å®‰è£…é…ç½®SVNã€‚


å®‰è£…SVN1ã€å®‰è£…SVNï¼š
yum install subversionsvnserve --version

2ã€åˆ›å»ºç‰ˆæœ¬åº“ï¼š
mkdir -p /var/svn/svnrepossvnadmin create /var/svn/svnrepos

3ã€è¿›å…¥confç›®å½•ï¼ˆè¯¥svnç‰ˆæœ¬åº“é…ç½®æ–‡ä»¶ï¼‰ï¼Œcd /var/svn/svnrepos/confã€‚

authzæ–‡ä»¶æ˜¯æƒé™æ§åˆ¶æ–‡ä»¶
passwdæ˜¯å¸å·å¯†ç æ–‡ä»¶
svnserve.conf SVNæœåŠ¡é…ç½®æ–‡ä»¶

4ã€è®¾ç½®å¸å·å¯†ç ï¼Œvi passwdã€‚åœ¨[users]å—ä¸­æ·»åŠ ç”¨æˆ·å’Œå¯†ç ï¼Œæ ¼å¼ï¼šå¸å·=å¯†ç ï¼Œå¦‚voidking=woaixuexiã€‚
### This file is an example password file for svnserve.### Its format is similar to that of svnserve.conf. As shown in the### example below it contains one section labelled [users].### The name and password for each user follow, one account per line.[users]# harry = harryssecret# sally = sallyssecretvoidking=woaixuexi

5ã€è®¾ç½®æƒé™ï¼Œvi authzã€‚åœ¨æœ«å°¾æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š
[/]voidking=rw
æ„æ€æ˜¯ç‰ˆæœ¬åº“çš„æ ¹ç›®å½•quwenzheå¯¹å…¶æœ‰è¯»å†™æƒé™ã€‚
6ã€ä¿®æ”¹svnserve.confæ–‡ä»¶ï¼Œvi svnserve.confã€‚æ‰“å¼€ä¸‹é¢çš„å‡ ä¸ªæ³¨é‡Šï¼š
anon-access = read #åŒ¿åç”¨æˆ·å¯è¯»auth-access = write #æˆæƒç”¨æˆ·å¯å†™password-db = passwd #ä½¿ç”¨å“ªä¸ªæ–‡ä»¶ä½œä¸ºè´¦å·æ–‡ä»¶authz-db = authz #ä½¿ç”¨å“ªä¸ªæ–‡ä»¶ä½œä¸ºæƒé™æ–‡ä»¶realm = /var/svn/svnrepos # è®¤è¯ç©ºé—´åï¼Œç‰ˆæœ¬åº“æ‰€åœ¨ç›®å½•

7ã€å¯åŠ¨svnç‰ˆæœ¬åº“ï¼Œsvnserve -d -r /var/svn/svnreposã€‚ï¼ˆåœæ­¢SVNå‘½ä»¤ï¼Œkillall svnserveï¼‰
8ã€ä½¿ç”¨SVNWindowsä¸Šå³é”®ï¼ŒSVN Checkoutã€‚
ä¹¦ç­¾CentOS 7æ­å»ºSVNæœåŠ¡å™¨
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>centos</tag>
      </tags>
  </entry>
  <entry>
    <title>æ­å»ºè‡ªå·±çš„äº‘ç›˜æœåŠ¡</title>
    <url>/dev-build-owncloud/</url>
    <content><![CDATA[å‰è¨€
ç»§åä¸ºã€è¿…é›·ã€æ–°æµªï¼Œ115ç­‰ç½‘ç›˜ä¹‹åï¼Œè¿‘æ—¥360äº‘ç›˜ä¹Ÿå®£å¸ƒå…³é—­ä¸ªäººäº‘å­˜å‚¨æœåŠ¡ã€‚è¿™åœºå‘èµ·äº2013å¹´çš„ä¸ªäººç½‘ç›˜å¤§æˆ˜è‡³ä»Šï¼Œæ’åé å‰çš„å¸¸ç”¨ç½‘ç›˜å·²ç»åªå‰©ä¸‹ç™¾åº¦äº‘ç›˜å’Œè…¾è®¯å¾®äº‘ï¼ŒçœŸæ˜¯ä»¤äººå”å˜˜ä¸å·²â€¦â€¦

360äº‘ç›˜å³å°†åœæ­¢æœåŠ¡ï¼Œæ‰€æœ‰ç”¨æˆ·æ•°æ®å°†åªä¿å­˜åˆ°æ˜å¹´2æœˆ1æ—¥ï¼Œå¯æ€œæˆ‘çš„38Tæ•°æ®ï¼ï¼ï¼é¦–å…ˆï¼Œæ²¡æœ‰ç¡¬ç›˜å­˜å‚¨è¿™ä¹ˆå¤šæ•°æ®ï¼Œåªèƒ½é€‰æ‹©ä¸‹è½½ï¼›å…¶æ¬¡ï¼Œå¤§å®¶äº‰ç›¸ä¸‹è½½ï¼Œ360äº‘ç›˜é™é€Ÿï¼Œæ€ä¸€ä¸ªæ…¢å­—äº†å¾—ï¼
è€ƒè™‘åˆ°åˆ«äººçš„äº‘ç›˜ä¸é è°±ï¼ŒéƒåŒå­¦å†³å®šè‡ªå·±æ­å»ºä¸€ä¸ªã€‚


ubuntuå®‰è£…owncloud1ã€å®‰è£…lamp-serverï¼Œtasksel install lamp-serverï¼ŒæŠ¥é”™tasksel: apt-get failed (100)ã€‚å°±çŸ¥é“ä¸ä¼šä¸€å¸†é£é¡ºï¼Œå…ˆæ›´æ–°ä¸ªè½¯ä»¶æºï¼Œapt-get updateï¼Œç„¶è€Œï¼Œæ¥ç€æŠ¥é”™ï¼šE: Could not get lock /var/lib/dpkg/lock - open (11: Resource temporarily unavailable)E: Unable to lock the administration directory (/var/lib/dpkg/), is another process using it?
åˆ é™¤ä¸¤ä¸ªæ–‡ä»¶ï¼š
rm /var/cache/apt/archives/lockrm /var/lib/dpkg/lock

å†æ¬¡æ›´æ–°è½¯ä»¶æºï¼Œapt-get updateï¼Œå†æ¬¡å®‰è£…lamp-serverï¼Œtasksel install lamp-serverã€‚
2ã€ä¸‹è½½å®‰è£…owncloud
wget -nv https://download.owncloud.org/download/repositories/9.1/Ubuntu_16.04/Release.key -O Release.keyapt-key add - &lt; Release.keysh -c &quot;echo &#x27;deb http://download.owncloud.org/download/repositories/9.1/Ubuntu_16.04/ /&#x27; &gt; /etc/apt/sources.list.d/owncloud.list&quot;apt-get updateapt-get install owncloud

3ã€è®¿é—®owncloudè®¿é—®http://192.168.56.102/owncloudï¼Œè¿›å…¥owncloudåˆå§‹é¡µé¢ã€‚
å®‰è£…åˆ°è¿™ä¸€æ­¥å°±å®Œæˆäº†ï¼Œå·²ç»å¯ä»¥é€šè¿‡æœåŠ¡å™¨ä½¿ç”¨ownCloudçš„æœåŠ¡æ¥å­˜å‚¨åŒæ­¥åˆ†äº«æ–‡ä»¶äº†ã€‚
ç»‘å®šåŸŸååœ¨/etc/apache2/sites-availableæ–‡ä»¶å¤¹ä¸‹æ·»åŠ æ–°çš„è™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶ï¼Œå¤‡ä»½000-default.confæ–‡ä»¶ï¼Œç„¶ååœ¨å…¶ä¸­æ·»åŠ ï¼š
&lt;VirtualHost *:80&gt;  ServerName yun.voidking.com  DocumentRoot /var/www/owncloud  &lt;IfModule mod_headers.c&gt;    Header always set Strict-Transport-Security &quot;max-age=15552000; includeSubDomains; preload&quot;  &lt;/IfModule&gt;&lt;/VirtualHost&gt;
ç„¶ååŸŸåè§£æyun.voidking.comåˆ°æœåŠ¡å™¨ipåœ°å€ã€‚
å®‰è£…æ’ä»¶ubuntuå®‰è£…ftpæœåŠ¡ï¼Œapt-get install vsftpdã€‚vi /etc/vsftpd.confï¼Œå¯ç”¨å¦‚ä¸‹é…ç½®ï¼š
write_enable=YESlocal_umask=022utf8_filesystem=YES
ç„¶åservice vsftpd restartã€‚
ä¸‹è½½owncloudçš„æ’ä»¶ï¼Œä¸‹è½½çš„å‹ç¼©åŒ…è§£å‹åˆ°/var/www/owncloud/appsï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€owncloudï¼Œé€‰æ‹©åº”ç”¨é¡µé¢ï¼Œå¯ç”¨æ’ä»¶ã€‚ç¦»çº¿ä¸‹è½½ï¼šhttps://apps.owncloud.com/content/show.php/ocDownloader+%28NG%29?content=169974
åœ¨çº¿çœ‹è§†é¢‘ï¼šhttps://apps.owncloud.com/content/show.php/Video+Viewer+Plus?content=174666
ä¹¦ç­¾äº‘ç›˜ä¸€ä¸ªä¸ªå€’ä¸‹æ€ä¹ˆåŠï¼Ÿæ— éœ€ç¼–ç ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºè‡³å°Šç§äº«äº‘ç›˜https://zhuanlan.zhihu.com/p/23156514
å¤©ä¸‹æ²¡æœ‰å…è´¹çš„åˆé¤ï¼æ˜¯æ—¶å€™æ­å»ºèµ·è‡ªå·±çš„äº‘ç›˜æœåŠ¡äº†https://zhuanlan.zhihu.com/p/23179293
owncloud-fileshttp://download.owncloud.org/download/repositories/9.1/owncloud/
Installation Wizardhttps://doc.owncloud.org/server/9.1/admin_manual/installation/installation_wizard.html
ownCloud Applicationshttps://apps.owncloud.com/
å®¢æˆ·ç«¯https://owncloud.org/install/#install-clients
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Chromeæ’ä»¶å¼€å‘åŸºç¡€</title>
    <url>/dev-chrome-extension-start/</url>
    <content><![CDATA[å‰è¨€å‰äº›å¤©ï¼Œå°ä¼™ä¼´é—®æˆ‘ä¼šä¸ä¼šå¼€å‘chromeæ’ä»¶ã€‚çªç„¶æ„è¯†åˆ°ï¼Œè¿™æ˜¯ä¸ªæœ‰è¶£çš„äº‹æƒ…ï¼Œé‚£å°±æä¸€æã€‚
æœ€å¼€å§‹æƒ³åšä¸€ä¸ªæ‰¹é‡ä¸‹è½½å›¾ç‰‡æ’ä»¶ï¼Œå¾ˆå¿«æ‰¾åˆ°ä¸€ä¸ªfatkunã€‚åšä¸€ä¸ªè§†é¢‘å¹¿å‘Šå±è”½æ’ä»¶ï¼Ÿå¤ªéš¾ï¼Œæ”¾å¼ƒã€‚è¦ä¸åšä¸€ä¸ªç¿»å¢™æ’ä»¶ï¼Ÿæ›´éš¾ï¼Œæ”¾å¼ƒã€‚åšä¸€ä¸ªåˆ’è¯ç¿»è¯‘æ’ä»¶æ€ä¹ˆæ ·ï¼Ÿå·²ç»æœ‰äº†Googleç¿»è¯‘å’Œåˆ’è¯ç¿»è¯‘ã€‚åšä¸€ä¸ªé¡µé¢æˆªå›¾æ’ä»¶ï¼Ÿå·²ç»æœ‰äº†æ•æ‰ç½‘é¡µæˆªå›¾ - FireShotçš„ã€‚åšä¸€ä¸ªmarkdownç¼–è¾‘å™¨ï¼Ÿå·²ç»æœ‰äº†Markdown Hereã€‚
æœç„¶æ˜¯å‰äººç§æ ‘ï¼Œåäººæ²¡åœ°ç§å“‡ï¼åæ¥æƒ³åšä¸€ä¸ªæŸ¯æ—æ–¯è¯å…¸ç¿»è¯‘ï¼Œç„¶è€Œæ²¡æœ‰å¹³å°æä¾›è¿™ä¸ªè¯å…¸çš„æ¥å£ï¼Œå”¯ä¸€çš„åŠæ³•æ˜¯æŠ“å–ç™¾åº¦ç¿»è¯‘çš„é¡µé¢ï¼Œç„¶åæˆªå–ç»“æœã€‚å¤ªéº»çƒ¦ï¼Œè¿˜è¦æ­ä¸ªæœåŠ¡å™¨ã€‚
æœ€ç»ˆï¼Œå†³å®šåšä¸€ä¸ªè·å–å…¬ç½‘IPçš„æ’ä»¶ã€‚å¼€å‘å·¥å…·ï¼šsublimeï¼›å¼€å‘è¯­è¨€ï¼šhtml+css+jsã€‚


å®˜æ–¹å…¥é—¨demoç›®å½•ç»“æ„chrome-extention-start|-icon.png|-manifest.json|-popup.html|-popup.js
å…¶ä¸­ï¼Œicon.pngæ˜¯æ’ä»¶çš„å›¾æ ‡ï¼›manifest.jsonæ˜¯æ’ä»¶çš„é…ç½®æ–‡ä»¶ï¼›popup.htmlæ˜¯å•å‡»æ’ä»¶å›¾æ ‡åå¼¹å‡ºçš„é¡µé¢ï¼›popup.jsæ˜¯ä¸šåŠ¡å¤„ç†çš„jsã€‚
å¯ç”¨æ’ä»¶è®¿é—®chrome://extensionsï¼Œå‹¾é€‰å¼€å‘è€…æ¨¡å¼ï¼ŒåŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åºï¼Œé€‰æ‹©chrome-extention-startæ–‡ä»¶å¤¹ã€‚
è¯•ç”¨å®˜æ–¹ç»™å‡ºçš„æ•ˆæœæ˜¯è¿™æ ·çš„ï¼š
éƒåŒå­¦æ»¡æ€€æœŸå¾…æ‰“å¼€YouTubeï¼Œç»“æœæ˜¯è¿™æ ·çš„ï¼šä¸è¦åœ¨æ„è¿™äº›ç»†èŠ‚ï¼Œè‡³å°‘ç¬¬ä¸€ä¸ªæ’ä»¶å·²ç»è·‘èµ·æ¥äº†ï¼
æŸ¥è¯¢å…¬ç½‘IPmanifest.json&#123;  &quot;manifest_version&quot;: 2,  &quot;name&quot;: &quot;Public IP&quot;,  &quot;description&quot;: &quot;This extension shows your public IP&quot;,  &quot;icons&quot;: &#123;    &quot;16&quot;: &quot;icon_16.png&quot;,    &quot;48&quot;: &quot;icon_48.png&quot;,    &quot;64&quot;: &quot;icon_64.png&quot;,    &quot;128&quot;: &quot;icon_128.png&quot;  &#125;,  &quot;version&quot;: &quot;1.0&quot;,  &quot;browser_action&quot;: &#123;    &quot;default_icon&quot;: &quot;icon_19.png&quot;,    &quot;default_title&quot;: &quot;æŸ¥çœ‹å…¬ç½‘IP&quot;,    &quot;default_popup&quot;: &quot;popup.html&quot;  &#125;,  &quot;permissions&quot;: [    &quot;http://ip.chinaz.com/getip.aspx&quot;  ]&#125;
éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œpermissionsä¸­çš„urlæ˜¯å…è®¸è·¨åŸŸçš„ã€‚
popup.js$(function()&#123;  String.prototype.replaceAll  = function(s1,s2)&#123;         return this.replace(new RegExp(s1,&quot;gm&quot;),s2);       &#125;  $.ajax(&#123;    url: &#x27;http://ip.chinaz.com/getip.aspx&#x27;,    type: &#x27;GET&#x27;,    data: &#123;&#125;,    success: function(data)&#123;      console.log(data);      data = data.replace(&quot;ip&quot;,&quot;&#x27;ip&#x27;&quot;);      data = data.replace(&quot;address&quot;,&quot;&#x27;address&#x27;&quot;);      data = data.replaceAll(&quot;\&#x27;&quot;,&quot;\&quot;&quot;);      console.log(data);      var dataJson = JSON.parse(data);      $(&#x27;#ip&#x27;).val(dataJson.ip);      $(&#x27;#address&#x27;).val(dataJson.address);    &#125;,    error: function(xhr)&#123;      console.log(xhr);    &#125;  &#125;);  &#125;);



æ•ˆæœ
å‘å¸ƒæ’ä»¶çš„å‘å¸ƒéå¸¸ç®€å•ï¼Œä¸Šä¼ é¡¹ç›®çš„zipå‹ç¼©åŒ…ä¹‹åï¼Œå¡«å†™ä¸€äº›ä¿¡æ¯å³å¯ã€‚ä½†æ˜¯ï¼Œæƒ³è¦è·å¾—å‘å¸ƒæ’ä»¶çš„æƒé™ï¼Œéå¸¸éº»çƒ¦ï¼Œå…·ä½“æˆ‘ä¼šåœ¨åè®°éƒ¨åˆ†åæ§½ã€‚
æœ¬åœ°æ’ä»¶å®‰è£…å‡è®¾ç”µè„‘è¢«å¢™ï¼Œåˆéœ€è¦å®‰è£…Chromeæ’ä»¶ï¼Œé‚£ä¹ˆä¸‹è½½crxæ–‡ä»¶ï¼Œç„¶ååœ¨Chromeåœ°å€æ è¾“å…¥chrome://extensions/ï¼Œå¹¶å°†ä¸‹è½½çš„crxæ‹–å…¥è¯¥é¡µé¢å³å¯ã€‚
åè®°è°·æ­Œï¼Œä½ å¦¹ï¼è¿™ç‰¹ä¹ˆæ­§è§†ä¹Ÿå¤ªæ˜æ˜¾äº†å§ï¼å¤§é™†å¼€å‘è€…ï¼Œæ— æ³•å‘å¸ƒåº”ç”¨ã€‚è¦æƒ³å‘å¸ƒï¼Œåªèƒ½ä½¿ç”¨é™¤äº†ä¸­å›½å¤§é™†å¤–çš„ä¿¡ç”¨å¡æ”¯ä»˜ï¼æˆ‘*&amp;â€¦â€¦%ï¿¥#@ï¼
å†ç»æ³¢æŠ˜ï¼Œç»ˆäºæ‹¿åˆ°ä¸€å¼ å…¨çƒä»˜çš„å¡ã€‚ç„¶è€Œç”±äºæ¿€åŠ¨ï¼Œè¿›é”™äº†é¡µé¢ï¼Œåˆ°äº†Google Playçš„æ”¯ä»˜é¡µé¢ï¼Œå¡«å†™ä¿¡æ¯æ—¶å±…ç„¶æœ‰ä¸­å›½çš„é€‰é¡¹ï¼Œç†æ‰€å½“ç„¶é€‰äº†ä¸­å›½ï¼Œå¡«äº†çœŸå®ä¿¡æ¯ã€‚
åæ¥ï¼Œå‘ç°è¿›é”™é¡µé¢ï¼Œå›åˆ°å¼€å‘è€…ä¿¡æ¯ä¸­å¿ƒï¼Œå´å†ä¹Ÿæ— æ³•ç‚¹å‡ºä»˜æ¬¾çš„é¡µé¢ï¼ï¼ï¼å½“æˆ‘è½¬åˆ°google payment centerï¼Œå´æç¤ºé‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼What the fuckï¼è¿™æ˜¯æ‘†æ˜äº†ä¸ç»™ä¿®æ”¹çš„æœºä¼šå“‡ï¼
ä¸‡èˆ¬æ— å¥ˆï¼Œæ³¨å†Œäº†å°å·ï¼Œæ‰æ”¯ä»˜æˆåŠŸã€‚æœ€åï¼Œé™„ä¸Šæ’ä»¶é“¾æ¥ï¼šhttps://chrome.google.com/webstore/detail/public-ip/cdpgbfmmhnbmkdnhlgjpbjdgblggnhck
ä¹¦ç­¾Getting Started: Building a Chrome Extensionhttps://developer.chrome.com/extensions/getstarted
360æé€Ÿæµè§ˆå™¨åº”ç”¨å¼€æ”¾å¹³å°http://open.chrome.360.cn/extension_dev/overview.html
Chromeæ‰©å±•æŠ€æœ¯æ‰‹å†Œhttp://crxdoczh.readthedocs.io/en/latest/
Chromeæ‰©å±•åŠåº”ç”¨å¼€å‘ï¼ˆé¦–å‘ç‰ˆï¼‰http://www.ituring.com.cn/book/1421
å¦‚ä½•ä»é›¶å¼€å§‹å†™ä¸€ä¸ª Chrome æ‰©å±•ï¼Ÿhttps://www.zhihu.com/question/20179805
2016å¹´æœ€å®ç”¨çš„ä¸ƒæ¬¾chromeæµè§ˆå™¨â€œç¥å™¨â€çº§åˆ«æ’ä»¶http://mt.sohu.com/20160621/n455512782.shtml
å¦‚ä½•å‘å¸ƒä¸€æ¬¾Chrome Apphttps://segmentfault.com/a/1190000000354014
å‘å¸ƒäº†å‡ ä¸ªè‡ªå·±åˆ¶ä½œçš„Chromeæ’ä»¶http://www.jianshu.com/p/NpjteJ
Chromeæ’ä»¶ï¼ˆExtensionsï¼‰å¼€å‘æ”»ç•¥http://www.cnblogs.com/guogangj/p/3235703.html
Google Play Developer Consolehttps://play.google.com/apps/publish/signup/
å¼€å‘è€…ä¿¡æ¯ä¸­å¿ƒhttps://chrome.google.com/webstore/developer/dashboard/
Google payment centerhttps://payments.google.com/payments/home#settings
å…¨çƒä»˜ -å›½é™…è´­ç‰©-åœ¨çº¿æ¶ˆè´¹æ–°ä½“éªŒhttps://www.globalcash.hk/index-welcome.do
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>chrome</tag>
        <tag>æ’ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>thinkphpå®ç°çŸ­ä¿¡éªŒè¯æ³¨å†Œ</title>
    <url>/dev-sms-verification-code/</url>
    <content><![CDATA[å‰è¨€å°å¤ªé˜³é¡¹ç›®æœ€å…ˆåšçš„æ¨¡å—ï¼Œç”¨æˆ·ç®¡ç†æ¨¡å—ã€‚ä¸šä¸»ç«¯è¯¥æ¨¡å—åˆ†ä¸ºä¸‰ä¸ªåŠŸèƒ½ï¼šæ³¨å†Œç™»å½•ã€ä¸ªäººä¿¡æ¯ä¿®æ”¹ã€è®¤è¯ã€‚æ³¨å†Œæ—¶éœ€è¦ç”¨åˆ°çŸ­ä¿¡éªŒè¯ç ï¼Œæœ¬æ–‡è®°å½•ä¸€ä¸‹æ€è·¯å’Œå…·ä½“å®ç°ã€‚çŸ­ä¿¡éªŒè¯å¹³å°ä½¿ç”¨äº‘ç‰‡ï¼ŒçŸ­ä¿¡éªŒè¯ç çš„ç”Ÿæˆä½¿ç”¨thinkphpã€‚


æ€è·¯1ã€ç”¨æˆ·è¾“å…¥æ‰‹æœºå·ï¼Œè¯·æ±‚è·å–çŸ­ä¿¡éªŒè¯ç ã€‚2ã€thinkphpç”ŸæˆçŸ­ä¿¡éªŒè¯ç ï¼Œå­˜å‚¨ï¼ŒåŒæ—¶å’Œå…¶ä»–å‚æ•°ä¸€èµ·å‘é€è¯·æ±‚ç»™äº‘ç‰‡ã€‚3ã€äº‘ç‰‡å‘é€çŸ­ä¿¡éªŒè¯ç åˆ°æŒ‡å®šæ‰‹æœºå·ã€‚4ã€ç”¨æˆ·è¾“å…¥çŸ­ä¿¡éªŒè¯ç ã€‚5ã€thinkphpæ ¹æ®éªŒè¯ç æ˜¯å¦æ­£ç¡®ã€éªŒè¯ç æ˜¯å¦è¿‡æœŸä¸¤ä¸ªæ¡ä»¶åˆ¤æ–­æ˜¯å¦éªŒè¯é€šè¿‡ã€‚
ä»£ç å®ç°éªŒè¯æ¥å£æ¥å£åœ°å€ï¼šhttps://sms.yunpian.com/v1/sms/send.jsonã€‚ä½¿ç”¨postmanï¼Œè¾“å…¥ä¸‰ä¸ªå¿…é¡»çš„å‚æ•°apikeyã€mobileå’Œtextã€‚
phpå‘èµ·http/httpsè¯·æ±‚ä½¿ç”¨phpçš„curlå‡½æ•°å‘èµ·httpsè¯·æ±‚ï¼Œå¸¦å…¥å‚æ•°apikeyã€mobileå’Œtextã€‚
// è·å–çŸ­ä¿¡éªŒè¯ç public function getSMSCode()&#123;    // create curl resource     $ch = curl_init();     // set url    $url = &#x27;https://sms.yunpian.com/v1/sms/send.json&#x27;;     curl_setopt($ch, CURLOPT_URL, $url);     // set param    $paramArr = array(        &#x27;apikey&#x27; =&gt; &#x27;******&#x27;,        &#x27;mobile&#x27; =&gt; &#x27;******&#x27;,        &#x27;text&#x27; =&gt; &#x27;ã€å°å¤ªé˜³ã€‘æ‚¨çš„éªŒè¯ç æ˜¯1234&#x27;    );    $param = &#x27;&#x27;;    foreach ($paramArr as $key =&gt; $value) &#123;        $param .= urlencode($key).&#x27;=&#x27;.urlencode($value).&#x27;&amp;&#x27;;    &#125;    $param = substr($param, 0, strlen($param)-1);    curl_setopt($ch, CURLOPT_POSTFIELDS, $param);    curl_setopt($ch, CURLOPT_HEADER, 0);    curl_setopt($ch, CURLOPT_POST, 1);    //curlé»˜è®¤ä¸æ”¯æŒhttpsåè®®ï¼Œè®¾ç½®ä¸éªŒè¯åè®®    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);     curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);     //return the transfer as a string     curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);     // $output contains the output string     $output = curl_exec($ch);     // close curl resource to free up system resources     curl_close($ch);     echo $output;&#125;


ç”ŸæˆéšæœºçŸ­ä¿¡éªŒè¯ç é»˜è®¤ç”Ÿæˆå››ä½çš„éšæœºçŸ­ä¿¡éªŒè¯ç ã€‚
// ç”ŸæˆçŸ­ä¿¡éªŒè¯ç public function createSMSCode($length = 4)&#123;    $min = pow(10 , ($length - 1));    $max = pow(10, $length) - 1;    return rand($min, $max);&#125;

æ•´åˆåœ¨æ•°æ®åº“æ–°å»ºè¡¨sun_smscodeï¼š
DROP TABLE IF EXISTS `sun_smscode`;CREATE TABLE `sun_smscode` (  `id` int(8) NOT NULL AUTO_INCREMENT,  `mobile` varchar(11) NOT NULL,  `code` int(4) NOT NULL,  `create_at` datetime NOT NULL,  `update_at` datetime NOT NULL,  PRIMARY KEY (`id`)) ENGINE=MyISAM AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;

thinkphpä»£ç ï¼š
// è·å–çŸ­ä¿¡éªŒè¯ç public function getSMSCode()&#123;    // create curl resource     $ch = curl_init();     // set url    $url = &#x27;https://sms.yunpian.com/v1/sms/send.json&#x27;;     curl_setopt($ch, CURLOPT_URL, $url);     // set param    $mobile = $_POST[&#x27;mobile&#x27;];    $code = $this-&gt;createSMSCode();    $paramArr = array(        &#x27;apikey&#x27; =&gt; &#x27;******&#x27;,        &#x27;mobile&#x27; =&gt; $mobile,        &#x27;text&#x27; =&gt; &#x27;ã€å°å¤ªé˜³ã€‘æ‚¨çš„éªŒè¯ç æ˜¯&#x27;.$code    );    $param = &#x27;&#x27;;    foreach ($paramArr as $key =&gt; $value) &#123;        $param .= urlencode($key).&#x27;=&#x27;.urlencode($value).&#x27;&amp;&#x27;;    &#125;    $param = substr($param, 0, strlen($param)-1);    curl_setopt($ch, CURLOPT_POSTFIELDS, $param);    curl_setopt($ch, CURLOPT_HEADER, 0);    curl_setopt($ch, CURLOPT_POST, 1);    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); //ä¸éªŒè¯è¯ä¹¦ä¸‹åŒ    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);     //return the transfer as a string     curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);     // $output contains the output string     $output = curl_exec($ch);     // close curl resource to free up system resources     curl_close($ch);     //$outputJson = json_decode($output);    $outputArr = json_decode($output, true);    //echo $outputJson-&gt;code;    //echo $outputArr[&#x27;code&#x27;];    if($outputArr[&#x27;code&#x27;] == &#x27;0&#x27;)&#123;        $data[&#x27;mobile&#x27;] = $mobile;        $data[&#x27;code&#x27;] = $code;        $smscode = D(&#x27;smscode&#x27;);        $smscodeObj = $smscode-&gt;where(&quot;mobile=&#x27;$mobile&#x27;&quot;)-&gt;find();        if($smscodeObj)&#123;            $data[&#x27;update_at&#x27;] = date(&#x27;Y-m-d H:i:s&#x27;);            $success = $smscode-&gt;where(&quot;mobile=&#x27;$mobile&#x27;&quot;)-&gt;save($data);            if($success !== false)&#123;                $result = array(                    &#x27;code&#x27; =&gt; &#x27;0&#x27;,                    &#x27;ext&#x27; =&gt; &#x27;ä¿®æ”¹æˆåŠŸ&#x27;,                    &#x27;obj&#x27; =&gt; $smscodeObj                );            &#125;            echo json_encode($result,JSON_UNESCAPED_UNICODE);        &#125;else&#123;            $data[&#x27;create_at&#x27;] = date(&#x27;Y-m-d H:i:s&#x27;);            $data[&#x27;update_at&#x27;] = $data[&#x27;create_at&#x27;];            if($smscode-&gt;create($data))&#123;                $id = $smscode-&gt;add();                if($id)&#123;                    $smscode_temp = $smscode-&gt;where(&quot;id=&#x27;$id&#x27;&quot;)-&gt;find();                    $result = array(                        &#x27;code&#x27;=&gt; &#x27;0&#x27;,                        &#x27;ext&#x27;=&gt; &#x27;åˆ›å»ºæˆåŠŸ&#x27;,                        &#x27;obj&#x27;=&gt;$smscode_temp                    );                    echo json_encode($result,JSON_UNESCAPED_UNICODE);                &#125;            &#125;        &#125;            &#125;&#125;

éªŒè¯çŸ­ä¿¡éªŒè¯ç éªŒè¯çŸ­ä¿¡éªŒè¯ç æ—¶é—´æ˜¯å¦è¿‡æœŸï¼ŒéªŒè¯çŸ­ä¿¡éªŒè¯ç æ˜¯å¦æ­£ç¡®ã€‚
// éªŒè¯çŸ­ä¿¡éªŒè¯ç æ˜¯å¦æœ‰æ•ˆpublic function checkSMSCode()&#123;    $mobile = $_POST[&#x27;mobile&#x27;];    $code = $_POST[&#x27;code&#x27;];    $nowTimeStr = date(&#x27;Y-m-d H:i:s&#x27;);    $smscode = D(&#x27;smscode&#x27;);    $smscodeObj = $smscode-&gt;where(&quot;mobile=&#x27;$mobile&#x27;&quot;)-&gt;find();    if($smscodeObj)&#123;        $smsCodeTimeStr = $smscodeObj[&#x27;update_at&#x27;];        $recordCode = $smscodeObj[&#x27;code&#x27;];        $flag = $this-&gt;checkTime($nowTimeStr, $smsCodeTimeStr);        if(!$flag)&#123;            $result = array(                &#x27;code&#x27; =&gt; &#x27;1&#x27;,                &#x27;ext&#x27; =&gt; &#x27;éªŒè¯ç è¿‡æœŸï¼Œè¯·åˆ·æ–°åé‡æ–°è·å–&#x27;            );            echo json_encode($result,JSON_UNESCAPED_UNICODE);            return;        &#125;        if($code != $recordCode)&#123;            $result = array(                &#x27;code&#x27; =&gt; &#x27;2&#x27;,                &#x27;ext&#x27; =&gt; &#x27;éªŒè¯ç é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥&#x27;            );            echo json_encode($result,JSON_UNESCAPED_UNICODE);            return;        &#125;        $result = array(            &#x27;code&#x27; =&gt; &#x27;0&#x27;,            &#x27;ext&#x27; =&gt; &#x27;éªŒè¯é€šè¿‡&#x27;        );        echo json_encode($result,JSON_UNESCAPED_UNICODE);    &#125;&#125;// éªŒè¯éªŒè¯ç æ—¶é—´æ˜¯å¦è¿‡æœŸpublic function checkTime($nowTimeStr,$smsCodeTimeStr)&#123;    //$nowTimeStr = &#x27;2016-10-15 14:39:59&#x27;;    //$smsCodeTimeStr = &#x27;2016-10-15 14:30:00&#x27;;    $nowTime = strtotime($nowTimeStr);    $smsCodeTime = strtotime($smsCodeTimeStr);    $period = floor(($nowTime-$smsCodeTime)/60); //60s    if($period&gt;=0 &amp;&amp; $period&lt;=20)&#123;        return true;    &#125;else&#123;        return false;    &#125;&#125;


æ”¹è¿›ä¸ºäº†é˜²æ­¢çŸ­ä¿¡è½°ç‚¸ï¼Œåœ¨è¯·æ±‚è·å–çŸ­ä¿¡éªŒè¯ç æ—¶ï¼Œéœ€è¦åŠ å…¥å›¾ç‰‡éªŒè¯ç ã€‚
thinkphpæä¾›äº†ç”Ÿæˆå›¾ç‰‡éªŒè¯ç çš„å‡½æ•°ï¼Œä¸‹é¢æˆ‘ä»¬æ¥å®ç°éªŒè¯ç çš„ç”Ÿæˆã€åˆ·æ–°å’ŒéªŒè¯ã€‚
ç”Ÿæˆå’Œåˆ·æ–°å›¾ç‰‡éªŒè¯ç // è·å–å›¾ç‰‡éªŒè¯ç ï¼Œåˆ·æ–°å›¾ç‰‡éªŒè¯ç public function getPicCode()&#123;    $config = array(        &#x27;fontSize&#x27;=&gt;30,    // éªŒè¯ç å­—ä½“å¤§å°        &#x27;length&#x27;=&gt;4,     // éªŒè¯ç ä½æ•°        &#x27;useNoise&#x27;=&gt;false, // å…³é—­éªŒè¯ç æ‚ç‚¹        &#x27;expire&#x27;=&gt;600    );    $Verify = new \Think\Verify($config);    $Verify-&gt;entry(2333);//2333æ˜¯éªŒè¯ç æ ‡å¿—&#125;

å‡è®¾ï¼Œè¯¥å‡½æ•°çš„å¯¹åº”urlä¸ºhttp://localhost/owner-bd/index.php/Home/CheckCode/getPicCodeï¼Œé‚£ä¹ˆï¼Œå›¾ç‰‡éªŒè¯ç çš„åœ°å€å°±æ˜¯è¿™ä¸ªurlï¼Œæ”¾å…¥é¡µé¢å›¾ç‰‡æ ‡ç­¾çš„srcå±æ€§å³å¯ã€‚
éªŒè¯å›¾ç‰‡éªŒè¯ç // éªŒè¯éªŒè¯ç æ˜¯å¦æ­£ç¡®public function checkPicCode($code)&#123;    $verify = new \Think\Verify();    if($verify-&gt;check($code, 2333))&#123;        $result = array(            &#x27;code&#x27; =&gt; &#x27;0&#x27;,            &#x27;ext&#x27; =&gt; &#x27;éªŒè¯é€šè¿‡&#x27;        );        echo json_encode($result,JSON_UNESCAPED_UNICODE);    &#125;else&#123;        $result = array(            &#x27;code&#x27; =&gt; &#x27;1&#x27;,            &#x27;ext&#x27; =&gt; &#x27;éªŒè¯ç é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥&#x27;        );        echo json_encode($result,JSON_UNESCAPED_UNICODE);    &#125;;&#125;
ä»¥ä¸Šæ–¹æ³•ï¼Œæˆ‘ä»¬åˆ©ç”¨äº†thinkphpæä¾›çš„checkæ–¹æ³•ï¼Œå®ç°èµ·æ¥å¾ˆç®€å•ã€‚ä½†æ˜¯ï¼Œå¦‚æœæƒ³è¦å¾—åˆ°éªŒè¯ç»†èŠ‚ï¼Œå°±æ²¡æœ‰åŠæ³•äº†ã€‚æ¯”å¦‚ï¼ŒéªŒè¯ç é”™è¯¯ï¼Œå¯èƒ½éªŒè¯ç è¶…æ—¶ï¼Œå¯èƒ½å› ä¸ºè¾“å…¥éªŒè¯ç é”™è¯¯ï¼Œå¯èƒ½å› ä¸ºéªŒè¯ç å·²ç»ä½¿ç”¨è¿‡ç­‰ç­‰ã€‚å¿…è¦çš„æ—¶å€™ï¼Œå¯ä»¥é‡å†™thinkphpçš„éªŒè¯ç ç±»ï¼Œæˆ–è€…é‡å†™thinkphpçš„checkæ–¹æ³•ã€‚
è·‘é€šå‰åç«¯åç«¯ä¿®æ”¹éªŒè¯å›¾ç‰‡éªŒè¯ç å‡½æ•°ï¼Œæ”¹ä¸ºè¢«è°ƒç”¨å‡½æ•°ï¼š
public function checkPicCode($picCode)&#123;    $verify = new \Think\Verify();    if($verify-&gt;check($picCode, 2333))&#123;        return true;    &#125;else&#123;        return false;    &#125;;&#125;

åœ¨è·å–çŸ­ä¿¡éªŒè¯ç å‡½æ•°çš„æœ€é¡¶éƒ¨ï¼Œæ·»åŠ è°ƒç”¨å›¾ç‰‡éªŒè¯ç å‡½æ•°ï¼Œåªæœ‰é€šè¿‡éªŒè¯ï¼Œæ‰å‘é€è¯·æ±‚ç»™äº‘ç‰‡ã€‚
// è·å–çŸ­ä¿¡éªŒè¯ç public function getSMSCode()&#123;    $picCode = $_POST[&#x27;picCode&#x27;];    if(!$this-&gt;checkPicCode($picCode))&#123;        $result = array(            &#x27;code&#x27; =&gt; &#x27;1&#x27;,            &#x27;ext&#x27; =&gt; &#x27;éªŒè¯ç é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥&#x27;        );        echo json_encode($result,JSON_UNESCAPED_UNICODE);        return;    &#125;    /*çœç•¥*/&#125;

å‰ç«¯æ ¸å¿ƒä»£ç &lt;!--register.html--&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh&quot; ng-app=&quot;sunApp&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;æ³¨å†Œ&lt;/title&gt;&lt;/head&gt;&lt;body ng-controller=&quot;registerController&quot;&gt;    &lt;form action=&quot;&quot; class=&quot;register-form&quot; ng-show=&quot;isShow1&quot;&gt;        &lt;div class=&quot;input-group&quot;&gt;            &lt;input type=&quot;text&quot; class=&quot;mobile&quot; ng-model=&quot;mobile&quot; placeholder=&quot;æ‰‹æœºå·&quot;&gt;        &lt;/div&gt;        &lt;div class=&quot;input-group&quot;&gt;            &lt;input type=&quot;text&quot; class=&quot;pic-code&quot; ng-model=&quot;picCode&quot; placeholder=&quot;å›¾ç‰‡éªŒè¯ç &quot;&gt;            &lt;img class=&quot;img&quot; src=&quot;&#123;&#123;picCodeUrl&#125;&#125;&quot; alt=&quot;&quot; ng-click=&quot;refresh()&quot;&gt;        &lt;/div&gt;        &lt;div class=&quot;input-group&quot;&gt;            &lt;input type=&quot;text&quot; class=&quot;sms-code&quot; ng-model=&quot;SMSCode&quot; placeholder=&quot;çŸ­ä¿¡éªŒè¯ç &quot;&gt;            &lt;button class=&quot;btn-sms&quot; ng-click=&quot;getSMSCode()&quot; ng-disabled=&quot;btnSMSDisabled&quot;&gt;&#123;&#123;btnSMSText&#125;&#125;&lt;/button&gt;        &lt;/div&gt;        &lt;button class=&quot;confirm-btn&quot; ng-click=&quot;next()&quot;&gt;ä¸‹ä¸€æ­¥&lt;/button&gt;    &lt;/form&gt;    &lt;form action=&quot;&quot; class=&quot;register-form&quot; ng-show=&quot;isShow2&quot;&gt;        &lt;div class=&quot;input-group&quot;&gt;            &lt;input type=&quot;text&quot; class=&quot;mobile&quot; ng-model=&quot;mobile&quot; placeholder=&quot;æ‰‹æœºå·&quot; disabled=&quot;true&quot;&gt;        &lt;/div&gt;        &lt;div class=&quot;input-group&quot;&gt;            &lt;input type=&quot;password&quot; class=&quot;password&quot; ng-model=&quot;password&quot; placeholder=&quot;è¯·è¾“å…¥å¯†ç &quot;&gt;            &lt;input type=&quot;password&quot; class=&quot;password&quot; ng-model=&quot;password2&quot; placeholder=&quot;è¯·å†æ¬¡è¾“å…¥å¯†ç &quot;&gt;        &lt;/div&gt;        &lt;button class=&quot;confirm-btn&quot; ng-click=&quot;getSMSCode()&quot;&gt;æ³¨å†Œ&lt;/button&gt;    &lt;/form&gt;&lt;/body&gt;&lt;/html&gt;


// register.jsangular.module(&#x27;sunApp&#x27;).controller(&#x27;registerController&#x27;, function ($scope,$http,$httpParamSerializer,$state,$interval) &#123;     $scope.picCodeUrl = &#x27;/owner-bd/index.php/Home/CheckCode/getPicCode&#x27;;    $scope.isShow1 = true;    $scope.isShow2 = false;    $scope.btnSMSText = &#x27;è·å–éªŒè¯ç &#x27;;    $scope.btnSMSDisabled = false;    $scope.checkOver = false;    // è·å–çŸ­ä¿¡éªŒè¯ç     $scope.getSMSCode = function()&#123;        var param = &#123;            mobile: $scope.mobile,            picCode: $scope.picCode        &#125;;        $http(&#123;            method:&#x27;POST&#x27;,            url:&#x27;/owner-bd/index.php/Home/SMS/getSMSCode&#x27;,            //url: &#x27;/owner-fd/mock/common.json&#x27;,            headers:&#123;                &#x27;Content-Type&#x27;:&#x27;application/x-www-form-urlencoded&#x27;            &#125;,            dataType: &#x27;json&#x27;,            data: $httpParamSerializer(param)        &#125;).then(function successCallback(response) &#123;            console.log(response.data);            if(response.data.code == &#x27;0&#x27;)&#123;                $scope.checkOver = true;                $scope.btnSMSDisabled = true;                var time = 60;                var timer = null;                timer = $interval(function()&#123;                    time = time - 1;                    $scope.btnSMSText = time+&#x27;ç§’&#x27;;                    if(time == 0) &#123;                        $interval.cancel(timer);                        $scope.btnSMSDisabled = false;                        $scope.btnSMSText = &#x27;é‡æ–°è·å–&#x27;;                    &#125;                &#125;, 1000);            &#125;        &#125;, function errorCallback(response) &#123;            console.log(response.data);        &#125;);    &#125;    // éªŒè¯çŸ­ä¿¡éªŒè¯ç     $scope.next = function()&#123;        if(!$scope.checkOver)&#123;            console.log(&#x27;æœªé€šè¿‡éªŒè¯&#x27;);            return;        &#125;        var param = &#123;            mobile: $scope.mobile,            code: $scope.SMSCode        &#125;;        $http(&#123;            method:&#x27;POST&#x27;,            url:&#x27;/owner-bd/index.php/Home/SMS/checkSMSCode&#x27;,            //url: &#x27;/owner-fd/mock/common.json&#x27;,            headers:&#123;                &#x27;Content-Type&#x27;:&#x27;application/x-www-form-urlencoded&#x27;            &#125;,            dataType: &#x27;json&#x27;,            data: $httpParamSerializer(param)        &#125;).then(function successCallback(response) &#123;            console.log(response.data);            if(response.data.code == &#x27;0&#x27;)&#123;                $scope.isShow1 = false;                $scope.isShow2 = true;            &#125;        &#125;, function errorCallback(response) &#123;            console.log(response.data);        &#125;);    &#125;    // åˆ·æ–°å›¾ç‰‡éªŒè¯ç     $scope.refresh = function()&#123;        $scope.picCodeUrl = &#x27;/owner-bd/index.php/Home/CheckCode/getPicCode?&#x27;+Math.random();    &#125;&#125;);

ä¼˜åŒ–ä»¥ä¸Šä»£ç ï¼Œå®‰å…¨æ€§ä¸æ˜¯å¾ˆå¥½ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å·¥å…·ç»•è¿‡å‰ç«¯éªŒè¯ã€‚ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åœ¨checkPicCodeå’ŒcheckSMSCodeå‡½æ•°ä¸­æ·»åŠ sessionå€¼æ¥æ ‡è®°ã€‚
$_SESSION[&#x27;checkPicCode&#x27;] = true;$_SESSION[&#x27;checkSMSCode&#x27;] = true;
åœ¨æœ€åä¸€æ­¥ï¼Œå‘æ•°æ®åº“ä¸­æ·»åŠ ç”¨æˆ·æ—¶ï¼Œå…ˆéªŒè¯ä¸€ä¸‹ä¸¤ä¸ªsessionå€¼æ˜¯å¦éƒ½ä¸ºtrueï¼Œéƒ½ä¸ºtrueæ—¶å†æ·»åŠ ã€‚
æˆæœ
åè®°ä»¥åä¹Ÿè®¸æœ‰ç”¨çš„ä»£ç ï¼š
echo json_encode($_SESSION);// æ‰“å°å‡ºsessionä¸­çš„æ•°æ®echo session_id();// æ‰“å°å½“å‰sessionçš„id

ä¹¦ç­¾äº‘ç‰‡ç½‘https://www.yunpian.com/
cURLå‡½æ•°http://php.net/manual/zh/ref.curl.php
curl åŸºç¡€ä¾‹å­http://php.net/manual/zh/curl.examples.php
åœ¨PHPè¯­è¨€ä¸­ä½¿ç”¨JSONhttp://www.ruanyifeng.com/blog/2011/01/json_in_php.html
thinkphpéªŒè¯ç http://document.thinkphp.cn/manual_3_2.html#verify
ä¿®æ”¹ThinkPHPçš„éªŒè¯ç ç±»http://www.cnblogs.com/BTMaster/p/3547878.html
ThinkPHP 3.2ç‰ˆæœ¬ , æ— æ³•è¯»å–$_SESSION[â€˜verify_codeâ€™]http://www.cnblogs.com/lovezbs/p/4496117.html
LICEcap - Downloadhttp://licecap.en.softonic.com/
gifåŠ¨æ€å›¾å±€éƒ¨åŠ é©¬èµ›å…‹æ¨¡ç³Šå¹¿å‘Šæ–‡å­—http://www.leawo.cn/space-138176-do-thread-id-64000.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>angularjs</tag>
        <tag>php</tag>
        <tag>thinkphp</tag>
      </tags>
  </entry>
  <entry>
    <title>thinkphpå’Œangularjsæ•´åˆ</title>
    <url>/dev-thinkphp-and-angularjs/</url>
    <content><![CDATA[å‰è¨€ä¸ºäº†å‰åç«¯åˆ†ç¦»çš„æ›´å½»åº•ï¼Œä¾¿äºå‰åç«¯ç‹¬ç«‹å¼€å‘ï¼Œå°å¤ªé˜³é¡¹ç›®ï¼Œè®¡åˆ’ä½¿ç”¨thinkphp+angularã€‚åç«¯ä¸“æ³¨å†™æ¥å£ï¼Œå‰ç«¯è´Ÿè´£é¡µé¢æ¸²æŸ“ã€‚


é¡¹ç›®åˆ†å‰²é¡¹ç›®åˆ†æˆä¸‰ä¸ªå­ç³»ç»Ÿï¼šä¸šä¸»ç«¯ã€ç‰©ä¸šç«¯ã€CMSç«¯ã€‚æ¯ä¸ªå­ç³»ç»Ÿåˆ†åˆ«æœ‰å‰ç«¯å’Œåç«¯ï¼Œå‰ç«¯ä½¿ç”¨angularï¼Œåç«¯ä½¿ç”¨thinkphpã€‚è‡ªæ­¤ï¼Œäº§ç”Ÿäº†å…­ä¸ªå­é¡¹ç›®ï¼Œåˆ†åˆ«å‘½åä¸ºowner-fdã€owner-bdã€manager-fdã€manager-bdã€cms-fdå’Œcms-bdã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»¥cms-fdå’Œcms-bdä¸ºä¾‹ï¼Œæ¥è¯´æ˜angularå’Œthinkphpä¹‹é—´çš„äº¤äº’ã€‚
æ·»åŠ ä¸šä¸»ä¿¡æ¯ä¸šåŠ¡é€»è¾‘ï¼šåœ¨æ·»åŠ ä¸šä¸»ä¿¡æ¯é¡µé¢ï¼Œå¡«å†™ä¸šä¸»ä¿¡æ¯çš„è¡¨å•ï¼Œå¡«å†™å®Œæˆåå•å‡»â€œç¡®è®¤æ·»åŠ â€æŒ‰é’®ï¼Œå‘é€httpè¯·æ±‚ç»™åç«¯ã€‚åç«¯æŠŠè·å–åˆ°çš„æ•°æ®å­˜åˆ°æ•°æ®åº“ä¸­ï¼Œå¹¶ä¸”è¿”å›å€¼ç»™å‰ç«¯ï¼Œå‰ç«¯æç¤ºæˆåŠŸæˆ–å¤±è´¥ã€‚
angularéƒ¨åˆ†1ã€å…¥å£html
&lt;!--cms-fd/index.html--&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;link rel=&quot;stylesheet&quot; href=&quot;public/libs/bootstrap/dist/css/bootstrap.min.css&quot;&gt;    &lt;link rel=&quot;stylesheet&quot; href=&quot;public/libs/layer/skin/layer.css&quot;&gt;    &lt;link rel=&quot;stylesheet&quot; href=&quot;public/css/index.css&quot;&gt;    &lt;title&gt;CMSç³»ç»Ÿ&lt;/title&gt;&lt;/head&gt;&lt;body ng-app=&quot;myApp&quot;&gt;    &lt;ul class=&quot;navigator nav nav-pills&quot; ng-controller=&quot;MainCtroller&quot;&gt;        &lt;li role=&quot;presentation&quot; ng-class=&quot;&#123;active:&#x27;home&#x27; == currentTab&#125;&quot;&gt;            &lt;a ui-sref=&quot;home&quot; ng-click=&quot;changeTab(&#x27;home&#x27;)&quot;&gt;é¦–é¡µ&lt;/a&gt;        &lt;/li&gt;        &lt;li role=&quot;presentation&quot; ng-class=&quot;&#123;active:&#x27;ownerList&#x27; == currentTab&#125;&quot;&gt;            &lt;a ui-sref=&quot;ownerList&quot; ng-click=&quot;changeTab(&#x27;ownerList&#x27;)&quot;&gt;ä¸šä¸»ä¿¡æ¯åˆ—è¡¨&lt;/a&gt;        &lt;/li&gt;        &lt;li role=&quot;presentation&quot; ng-class=&quot;&#123;active:&#x27;ownerAdd&#x27; == currentTab&#125;&quot;&gt;            &lt;a ui-sref=&quot;ownerAdd&quot; ng-click=&quot;changeTab(&#x27;ownerAdd&#x27;)&quot;&gt;æ·»åŠ ä¸šä¸»ä¿¡æ¯&lt;/a&gt;        &lt;/li&gt;    &lt;/ul&gt;    &lt;div ui-view style=&quot;width: 500px;margin: 50px auto 0&quot;&gt;&lt;/div&gt;&lt;script src=&quot;public/libs/angular/angular.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;public/libs/angular-ui-router/release/angular-ui-router.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;public/libs/oclazyload/dist/ocLazyLoad.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;public/libs/jquery/dist/jquery.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;public/libs/layer/layer.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;public/js/index.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;

2ã€å…¥å£js
/* *cms-fd/public/js/index.js*/var myApp = angular.module(&#x27;myApp&#x27;,[&#x27;ui.router&#x27;,&#x27;oc.lazyLoad&#x27;]);myApp.config(function ($stateProvider,$urlRouterProvider) &#123;    $urlRouterProvider.when(&#x27;&#x27;,&#x27;/home&#x27;);    $stateProvider.state(&#x27;home&#x27;,&#123;        url:&#x27;/home&#x27;,        templateUrl: &#x27;views/home.html&#x27;,        resolve:&#123;            loadMyCtrl:[&#x27;$ocLazyLoad&#x27;,function ($ocLazyLoad) &#123;                return $ocLazyLoad.load(&#123;                    name:&#x27;homeController&#x27;,                    files:[&#x27;public/js/home.js&#x27;]                &#125;)            &#125;]         &#125;    &#125;);    $stateProvider.state(&#x27;ownerList&#x27;,&#123;        url:&#x27;/ownerList&#x27;,        templateUrl:&#x27;views/owner/list.html&#x27;,        resolve:&#123;            loadMyCtrl:function ($ocLazyLoad) &#123;                return $ocLazyLoad.load(&#123;                    name:&#x27;ownerListController&#x27;,                    files:[&#x27;public/js/owner/list.js&#x27;]                &#125;)            &#125;        &#125;    &#125;);    $stateProvider.state(&#x27;ownerAdd&#x27;,&#123;        url: &#x27;/ownerAdd&#x27;,        templateUrl: &#x27;views/owner/add.html&#x27;,        resolve:&#123;            loadMyCtrl:function ($ocLazyLoad) &#123;                return $ocLazyLoad.load(&#123;                    name:&#x27;ownerAddController&#x27;,                    files:[&#x27;public/js/owner/add.js&#x27;]                &#125;)            &#125;        &#125;    &#125;);    $stateProvider.state(&#x27;ownerEdit&#x27;,&#123;        url: &#x27;/owner/edit/:ownerId&#x27;,        templateUrl: &#x27;views/owner/edit.html&#x27;,        resolve:&#123;            loadMyCtrl:function ($ocLazyLoad) &#123;                return $ocLazyLoad.load(&#123;                    name:&#x27;ownerEditController&#x27;,                    files:[&#x27;public/js/owner/edit.js&#x27;]                &#125;)            &#125;        &#125;    &#125;);    &#125;);myApp.controller(&#x27;MainCtroller&#x27;,function($scope,$location)&#123;    //console.log($location.url());    var url = $location.url();    $scope.currentTab = url.substr(1);    $scope.changeTab = function(tabname)&#123;          $scope.currentTab = tabname;    &#125;;  &#125;);

3ã€æ·»åŠ ä¸šä¸»ä¿¡æ¯é¡µé¢
&lt;!--cms-fd/views/owner/add.html--&gt;&lt;div id=&quot;home&quot; ng-controller=&quot;ownerAddController&quot;&gt;    &lt;h2&gt;æ·»åŠ ä¸šä¸»ä¿¡æ¯&lt;/h2&gt;    &lt;form role=&quot;form&quot;&gt;        &lt;div class=&quot;form-group&quot;&gt;            &lt;label for=&quot;&quot;&gt;ç”¨æˆ·å&lt;/label&gt;            &lt;input name=&quot;username&quot; type=&quot;text&quot; class=&quot;form-control username&quot; id=&quot;&quot; ng-model=&quot;username&quot;&gt;        &lt;/div&gt;        &lt;div class=&quot;form-group&quot;&gt;            &lt;label for=&quot;&quot;&gt;å¯†ç &lt;/label&gt;            &lt;input name=&quot;password&quot; type=&quot;password&quot; class=&quot;form-control password&quot; id=&quot;&quot; ng-model=&quot;password&quot;&gt;        &lt;/div&gt;        &lt;div class=&quot;form-group&quot;&gt;            &lt;label for=&quot;&quot;&gt;é‚®ç®±&lt;/label&gt;            &lt;input name=&quot;password&quot; type=&quot;email&quot; class=&quot;form-control email&quot; id=&quot;&quot; ng-model=&quot;email&quot;&gt;        &lt;/div&gt;        &lt;div class=&quot;form-group&quot;&gt;            &lt;label for=&quot;&quot;&gt;æ˜µç§°&lt;/label&gt;            &lt;input name=&quot;nickname&quot; type=&quot;text&quot; class=&quot;form-control nickname&quot; id=&quot;&quot; ng-model=&quot;nickname&quot;&gt;        &lt;/div&gt;        &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary submit&quot; ng-click=&quot;submit()&quot;&gt;ç¡®è®¤æ·»åŠ &lt;/button&gt;    &lt;/form&gt;&lt;/div&gt;

3ã€æ·»åŠ ä¸šä¸»ä¿¡æ¯é¡µé¢js
/* *cms-fd/public/js/owner/add.js*/angular.module(&#x27;myApp&#x27;).controller(&#x27;ownerAddController&#x27;, function ($scope,$http,$httpParamSerializer) &#123;     $scope.submit = function()&#123;        var param = &#123;            username: $scope.username,            password: $scope.password,            email: $scope.email,            nickname: $scope.nickname        &#125;;        $http(&#123;            method:&#x27;POST&#x27;,            url:&#x27;/cms-bd/index.php/Home/Owner/add&#x27;,            headers:&#123;                &#x27;Content-Type&#x27;:&#x27;application/x-www-form-urlencoded&#x27;            &#125;,            dataType: &#x27;json&#x27;,            data: $httpParamSerializer(param)        &#125;).then(function successCallback(response) &#123;            console.log(response.data);            layer.msg(response.data.ext);        &#125;, function errorCallback(response) &#123;            console.log(response.data);        &#125;);    &#125;&#125;);

thinkphpéƒ¨åˆ†åœ¨cms-bd/Application/Home/Controllerä¸­æ–°å»ºOwnerController.class.phpï¼Œç¼–å†™addå‡½æ•°ã€‚
// å¢åŠ ä¸šä¸»public function add()&#123;    if(!$_POST[&#x27;username&#x27;] || !$_POST[&#x27;password&#x27;] || !$_POST[&#x27;email&#x27;] || !$_POST[&#x27;nickname&#x27;])&#123;        $result = array(            &#x27;code&#x27; =&gt; &#x27;0&#x27;,            &#x27;ext&#x27; =&gt; &#x27;å‚æ•°ä¸è¶³&#x27;         );        echo json_encode($result,JSON_UNESCAPED_UNICODE);        return;    &#125;    $data[&#x27;username&#x27;] = $_POST[&#x27;username&#x27;];    $data[&#x27;password&#x27;] = md5($_POST[&#x27;password&#x27;]);    $data[&#x27;email&#x27;] = $_POST[&#x27;email&#x27;];    $data[&#x27;nickname&#x27;] = $_POST[&#x27;nickname&#x27;];    $data[&#x27;create_at&#x27;] = date(&#x27;Y-m-d H:i:s&#x27;);    $data[&#x27;update_at&#x27;] = date(&#x27;Y-m-d H:i:s&#x27;);    $owner = D(&#x27;owner&#x27;);    if($owner-&gt;create($data))&#123;        $id = $owner-&gt;add();        if($id)&#123;            $owner_temp = $owner-&gt;where(&quot;id=&#x27;$id&#x27;&quot;)-&gt;find();            $result = array(                &#x27;code&#x27;=&gt; &#x27;0&#x27;,                &#x27;ext&#x27;=&gt; &#x27;success&#x27;,                &#x27;obj&#x27;=&gt;$owner_temp            );            echo json_encode($result,JSON_UNESCAPED_UNICODE);        &#125;    &#125;&#125;

æŸ¥çœ‹ä¸šä¸»ä¿¡æ¯åˆ—è¡¨å’Œåˆ é™¤ä¸šä¸»ä¿¡æ¯ä¸šåŠ¡é€»è¾‘ï¼šè¿›å…¥ä¸šä¸»ä¿¡æ¯åˆ—è¡¨é¡µæ—¶ï¼Œå‘é€httpè¯·æ±‚ç»™åç«¯ï¼Œè·å–åˆ°ä¸šä¸»ä¿¡æ¯åˆ—è¡¨ï¼Œç„¶åæ˜¾ç¤ºåˆ°ä¸šä¸»ä¿¡æ¯åˆ—è¡¨é¡µä¸Šã€‚å•å‡»æŸæ¡è®°å½•åé¢çš„â€œåˆ é™¤â€æŒ‰é’®ï¼Œå¼¹å‡ºç¡®è®¤æç¤ºæ¡†ã€‚ç¡®è®¤åˆ é™¤ï¼Œåˆ™å‘é€httpè¯·æ±‚ç»™åç«¯ï¼Œè·å–è¿”å›å€¼ï¼Œå¦‚æœåˆ é™¤æˆåŠŸï¼Œåˆ™ä»é¡µé¢ç§»é™¤è¯¥æ¡è®°å½•ã€‚
angularéƒ¨åˆ†1ã€ä¸šä¸»ä¿¡æ¯åˆ—è¡¨é¡µé¢
&lt;!--cms-fd/views/owner/list.html--&gt;&lt;div id=&quot;owner-list&quot; ng-controller=&quot;ownerListController&quot;&gt;    &lt;h2&gt;ä¸šä¸»åˆ—è¡¨&lt;/h2&gt;    &lt;ul&gt;        &lt;li ng-repeat=&quot;owner in ownerList&quot;&gt;            &lt;span&gt;ç”¨æˆ·åï¼š&#123;&#123;owner.username&#125;&#125;ï¼Œæ˜µç§°ï¼š&#123;&#123;owner.nickname&#125;&#125;&lt;/span&gt;            &lt;button ng-click=&quot;edit(owner.id)&quot;&gt;ä¿®æ”¹&lt;/button&gt;            &lt;button ng-click=&quot;delete(owner.id,$index)&quot;&gt;åˆ é™¤&lt;/button&gt;        &lt;/li&gt;    &lt;/ul&gt; &lt;/div&gt;

2ã€ä¸šä¸»ä¿¡æ¯åˆ—è¡¨é¡µjs
/* *cms-fd/public/js/owner/list.js*/angular.module(&#x27;myApp&#x27;).controller(&#x27;ownerListController&#x27;, function ($scope,$http,$httpParamSerializer,$state) &#123;     $http(&#123;        method: &#x27;POST&#x27;,        url: &#x27;/cms-bd/index.php/Home/Owner/listAll&#x27;,        headers:&#123;            &#x27;Content-Type&#x27;:&#x27;application/x-www-form-urlencoded&#x27;        &#125;,        dataType: &#x27;json&#x27;,        data: $httpParamSerializer(&#123;&#125;)    &#125;).then(function successCallback(response)&#123;        console.log(response.data);        $scope.ownerList = response.data;    &#125;, function errorCallback(response)&#123;        console.log(response.data);    &#125;);    $scope.edit = function(ownerId)&#123;        $state.go(&#x27;ownerEdit&#x27;, &#123;ownerId: ownerId&#125;);    &#125;    $scope.delete = function(ownerId,index)&#123;        var layerIndex = layer.confirm(&#x27;ç¡®è®¤åˆ é™¤ï¼Ÿ&#x27;, &#123;            btn: [&#x27;æ˜¯çš„&#x27;,&#x27;å–æ¶ˆ&#x27;] //æŒ‰é’®        &#125;, function()&#123;            $http(&#123;                method:&#x27;POST&#x27;,                url:&#x27;/cms-bd/index.php/Home/Owner/delete&#x27;,                headers:&#123;                    &#x27;Content-Type&#x27;:&#x27;application/x-www-form-urlencoded&#x27;                &#125;,                dataType: &#x27;json&#x27;,                data: $httpParamSerializer(&#123;ownerId: ownerId&#125;)            &#125;).then(function successCallback(response) &#123;                console.log(response.data);                if(response.data.code == &#x27;0&#x27;)&#123;                    $scope.ownerList.splice(index,1);                &#125;                layer.close(layerIndex);            &#125;, function errorCallback(response) &#123;                console.log(response.data);                layer.close(layerIndex);            &#125;);                    &#125;, function()&#123;            //layer.msg(&#x27;å–æ¶ˆ&#x27;);        &#125;);    &#125;&#125;);

thinkphpéƒ¨åˆ†æ·»åŠ listAllå‡½æ•°å’Œdeleteå‡½æ•°ã€‚
// ä¸šä¸»åˆ—è¡¨public function listAll()&#123;    $owner = D(&#x27;owner&#x27;);    $resultArr = $owner-&gt;where(&#x27;state=0&#x27;)-&gt;order(&#x27;update_at desc,id desc&#x27;)-&gt;select();    echo json_encode($resultArr,JSON_UNESCAPED_UNICODE);&#125;// åˆ é™¤ä¸šä¸»public function delete()&#123;    $ownerId = $_POST[&#x27;ownerId&#x27;];    $data[&#x27;state&#x27;] = 1;    $owner = D(&#x27;owner&#x27;);    $success = $owner-&gt;where(&quot;id=&#x27;$ownerId&#x27;&quot;)-&gt;save($data);    if($success)&#123;        $result = array(            &#x27;code&#x27;=&gt; &#x27;0&#x27;,            &#x27;ext&#x27;=&gt; &#x27;success&#x27;        );        echo json_encode($result);    &#125;else &#123;        $result = array(            &#x27;code&#x27;=&gt; &#x27;1&#x27;,            &#x27;ext&#x27;=&gt; &#x27;fail&#x27;        );        echo json_encode($result);    &#125;&#125;

ä¿®æ”¹ä¸šä¸»ä¿¡æ¯ä¸šåŠ¡é€»è¾‘ï¼šåœ¨ä¸šä¸»ä¿¡æ¯åˆ—è¡¨é¡µï¼Œå•å‡»æŸæ¡è®°å½•åçš„â€œä¿®æ”¹â€æŒ‰é’®ï¼Œè·³è½¬åˆ°ä¿®æ”¹ä¸šä¸»ä¿¡æ¯é¡µé¢ã€‚ä¿®æ”¹å®Œæˆåï¼Œå•å‡»â€œç¡®è®¤ä¿®æ”¹â€æŒ‰é’®ï¼Œè·³è½¬å›ä¸šä¸»ä¿¡æ¯åˆ—è¡¨é¡µã€‚
angularéƒ¨åˆ†1ã€ä¿®æ”¹ä¸šä¸»ä¿¡æ¯é¡µé¢
&lt;!--cms-fd/views/owner/edit.html--&gt;&lt;div id=&quot;owner-edit&quot; ng-controller=&quot;ownerEditController&quot;&gt;    &lt;h2&gt;ä¿®æ”¹ä¸šä¸»ä¿¡æ¯&lt;/h2&gt;    &lt;form role=&quot;form&quot;&gt;        &lt;div class=&quot;form-group&quot;&gt;            &lt;label for=&quot;&quot;&gt;ç”¨æˆ·å&lt;/label&gt;            &lt;input name=&quot;username&quot; type=&quot;text&quot; class=&quot;form-control username&quot; id=&quot;&quot; ng-model=&quot;owner.username&quot;&gt;        &lt;/div&gt;        &lt;div class=&quot;form-group&quot;&gt;            &lt;label for=&quot;&quot;&gt;å¯†ç &lt;/label&gt;            &lt;input name=&quot;password&quot; type=&quot;password&quot; class=&quot;form-control password&quot; id=&quot;&quot; ng-model=&quot;owner.password&quot;&gt;        &lt;/div&gt;        &lt;div class=&quot;form-group&quot;&gt;            &lt;label for=&quot;&quot;&gt;é‚®ç®±&lt;/label&gt;            &lt;input name=&quot;password&quot; type=&quot;email&quot; class=&quot;form-control email&quot; id=&quot;&quot; ng-model=&quot;owner.email&quot;&gt;        &lt;/div&gt;        &lt;div class=&quot;form-group&quot;&gt;            &lt;label for=&quot;&quot;&gt;æ˜µç§°&lt;/label&gt;            &lt;input name=&quot;nickname&quot; type=&quot;text&quot; class=&quot;form-control nickname&quot; id=&quot;&quot; ng-model=&quot;owner.nickname&quot;&gt;        &lt;/div&gt;        &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary submit&quot; ng-click=&quot;submit()&quot;&gt;ç¡®è®¤ä¿®æ”¹&lt;/button&gt;    &lt;/form&gt;&lt;/div&gt;

2ã€ä¿®æ”¹ä¸šä¸»ä¿¡æ¯js
/* *cms-fd/public/js/owner/edit.js*/angular.module(&#x27;myApp&#x27;).controller(&#x27;ownerEditController&#x27;, function ($scope,$http,$httpParamSerializer,$stateParams,$state) &#123;     $http(&#123;        method:&#x27;POST&#x27;,        url:&#x27;/cms-bd/index.php/Home/Owner/findById&#x27;,        headers:&#123;            &#x27;Content-Type&#x27;:&#x27;application/x-www-form-urlencoded&#x27;        &#125;,        dataType: &#x27;json&#x27;,        data: $httpParamSerializer(&#123;ownerId: $stateParams.ownerId&#125;)    &#125;).then(function successCallback(response) &#123;        console.log(response.data);        $scope.owner = response.data.obj;    &#125;, function errorCallback(response) &#123;        console.log(response.data);    &#125;);    $scope.submit = function()&#123;        $http(&#123;            method:&#x27;POST&#x27;,            url:&#x27;/cms-bd/index.php/Home/Owner/edit&#x27;,            headers:&#123;                &#x27;Content-Type&#x27;:&#x27;application/x-www-form-urlencoded&#x27;            &#125;,            dataType: &#x27;json&#x27;,            data: $httpParamSerializer($scope.owner)        &#125;).then(function successCallback(response) &#123;            console.log(response.data);            $state.go(&#x27;ownerList&#x27;);        &#125;, function errorCallback(response) &#123;            console.log(response.data);        &#125;);    &#125;&#125;);

thinkphpéƒ¨åˆ†æ·»åŠ findByIdå’Œeditä¸¤ä¸ªå‡½æ•°ã€‚
// æ ¹æ®idæŸ¥æ‰¾ä¸šä¸»public function findById()&#123;    $ownerId = $_POST[&#x27;ownerId&#x27;];    $owner = D(&#x27;owner&#x27;);    $ownerObj = $owner-&gt;where(&quot;id=&#x27;$ownerId&#x27;&quot;)-&gt;find();    if($ownerObj)&#123;        $result = array(            &#x27;code&#x27;=&gt; &#x27;0&#x27;,            &#x27;ext&#x27;=&gt; &#x27;success&#x27;,            &#x27;obj&#x27;=&gt; $ownerObj        );        echo json_encode($result,JSON_UNESCAPED_UNICODE);    &#125;else&#123;        $result = array(            &#x27;code&#x27;=&gt; &#x27;1&#x27;,            &#x27;ext&#x27;=&gt; &#x27;æ²¡æœ‰æ‰¾åˆ°è®°å½•&#x27;        );        echo json_encode($result,JSON_UNESCAPED_UNICODE);    &#125;  &#125;// ä¿®æ”¹ä¸šä¸»public function edit()&#123;    if(!$_POST[&#x27;id&#x27;] || !$_POST[&#x27;username&#x27;] || !$_POST[&#x27;password&#x27;] || !$_POST[&#x27;email&#x27;] || !$_POST[&#x27;nickname&#x27;])&#123;        $result = array(            &#x27;code&#x27; =&gt; &#x27;0&#x27;,            &#x27;ext&#x27; =&gt; &#x27;å‚æ•°ä¸è¶³&#x27;         );        echo json_encode($result,JSON_UNESCAPED_UNICODE);        return;    &#125;    $id = $_POST[&#x27;id&#x27;];    $data[&#x27;username&#x27;] = $_POST[&#x27;username&#x27;];    $data[&#x27;password&#x27;] = md5($_POST[&#x27;password&#x27;]);    $data[&#x27;email&#x27;] = $_POST[&#x27;email&#x27;];    $data[&#x27;nickname&#x27;] = $_POST[&#x27;nickname&#x27;];    $data[&#x27;update_at&#x27;] = date(&#x27;Y-m-d H:i:s&#x27;);    $owner = D(&#x27;owner&#x27;);    $success = $owner-&gt;where(&quot;id=&#x27;$id&#x27;&quot;)-&gt;save($data);    if($success)&#123;        $owner_temp = $owner-&gt;where(&quot;id=&#x27;$id&#x27;&quot;)-&gt;find();        $result = array(            &#x27;code&#x27;=&gt; &#x27;0&#x27;,            &#x27;ext&#x27;=&gt; &#x27;success&#x27;,            &#x27;obj&#x27;=&gt;$owner_temp        );        echo json_encode($result,JSON_UNESCAPED_UNICODE);    &#125;else &#123;        $result = array(            &#x27;code&#x27;=&gt; &#x27;1&#x27;,            &#x27;ext&#x27;=&gt; &#x27;ç”¨æˆ·ä¸å­˜åœ¨&#x27;        );        echo json_encode($result,JSON_UNESCAPED_UNICODE);    &#125;&#125;


thinkphpå…³é—­å³ä¸‹è§’Traceä¿¡æ¯thinkphpé»˜è®¤å¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œè¿”å›å€¼æ—¶æ€»ä¼šè·Ÿç€ä¸€ä¸ªå°å›¾æ ‡ï¼Œé»˜è®¤åœ¨é¡µé¢çš„å³ä¸‹è§’å°å›¾æ ‡ã€‚åœ¨éƒ¨ç½²é˜¶æ®µï¼Œéœ€è¦æŠŠå®ƒå…³é—­ã€‚1ã€åœ¨å…¥å£æ–‡ä»¶index.phpåŠ å…¥
define(&quot;APP_DEBUG&quot;, false);

2ã€åœ¨Application/Common/config.php é…ç½®æ–‡ä»¶ä¸­åŠ å…¥
&#x27;SHOW_PAGE_TRACE&#x27; =&gt; false

3ã€åˆ é™¤Applicationä¸‹çš„Runtimeæ–‡ä»¶å¤¹ã€‚
åè®°å¢åˆ æŸ¥æ”¹è·‘é€šï¼Œè¿™ä¸ªdemoä¹Ÿç®—æ˜¯æ¯”è¾ƒå®Œæ•´äº†ã€‚åœ¨å®é™…å¼€å‘çš„æ—¶å€™ï¼Œå¾ˆå¤šåœ°æ–¹è¿˜è¦åšè°ƒæ•´ã€‚æ¯”å¦‚å¯¼èˆªæ çš„ä¸€äº›å‘ã€æ›´å¥½é¡µé¢å¸ƒå±€ã€æ›´å‹å¥½çš„æç¤ºå’Œè·³è½¬ã€å®‰å…¨æ€§æ ¡éªŒã€æ•°æ®åº“è¡¨è®¾è®¡ç­‰ç­‰ç­‰ç­‰ã€‚
angularéå¸¸å®¹æ˜“äº§ç”Ÿé¡µé¢ç¼“å­˜ï¼Œå¦‚æœé‡åˆ°å¾ˆå¥‡è‘©çš„å‘ï¼Œæ¯”å¦‚ä¿®æ”¹äº†æŸä¸ªé¡µé¢ï¼Œä½†æ˜¯åˆ·æ–°æ— æ•ˆã€‚ä¸è¦çŠ¹è±«ï¼Œå…ˆæ¸…ä¸‹æµè§ˆå™¨ç¼“å­˜ã€‚
ä¹¦ç­¾Php 5.6 â€œAutomatically populating $HTTP_RAW_POST_DATA is deprecatedhttps://github.com/piwik/piwik/issues/6465
PHP 5.6: â€œAutomatically populating $HTTP_RAW_POST_DATA is deprecated and will be removed in a future version.â€https://www.bram.us/php-5-6-automatically-populating-http_raw_post_data-is-deprecated-and-will-be-removed-in-a-future-version/
angularjs è¯·æ±‚åç«¯æ¥å£è¯·æ±‚äº†ä¸¤æ¬¡http://jingyan.baidu.com/article/49ad8bce42a2415834d8fa97.html
AngularJs + angular-ui-router + bootstrap å®ç°åŸºç¡€å¯¼èˆªæ http://blog.csdn.net/a416311458/article/details/51497230
Angularç»“åˆBootstrap3çš„å¯¼èˆªèœå•http://www.tuicool.com/articles/ayqqmi
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>angularjs</tag>
        <tag>php</tag>
        <tag>thinkphp</tag>
      </tags>
  </entry>
  <entry>
    <title>AngularJSæŒ‰éœ€åŠ è½½js</title>
    <url>/dev-angularjs-dynamic-js/</url>
    <content><![CDATA[å‰è¨€Angularæ˜¯ä¸€ä¸ªå•é¡µé¢åº”ç”¨ï¼Œéšç€ç³»ç»Ÿçš„è¿­ä»£ï¼Œé¦–å±ä»£ç ä¼šè¶Šæ¥è¶Šå¤§ï¼Œæ‰€ä»¥å¯¹ã€ŠAngularJSå…¥é—¨ã€‹ä¸­çš„ä»£ç è¿›è¡Œæ”¹é€ ï¼Œå®ç°AngularJSå¯ä»¥æŒ‰éœ€åŠ è½½jså’Œcssã€‚å®ç°è¿™ä¸ªéœ€æ±‚ï¼Œæœ‰ä¸‰ä¸ªæ–¹æ¡ˆï¼š1ã€åˆ©ç”¨requirejsã€‚requirejså¹¶ä¸æ˜¯æŒ‰ç…§angularè§„èŒƒå¼€å‘çš„ç¬¬ä¸‰æ–¹æ’ä»¶ï¼ŒåæœŸä¼°è®¡ä¼šæœ‰å¾ˆå¤šå‘ï¼Œæ”¾å¼ƒã€‚
2ã€åˆ©ç”¨ui-routerå’ŒocLazyLoadã€‚

æ¯æ¬¡â€œé¡µé¢è·³è½¬â€éƒ½è¦é¢å¤–è¯·æ±‚jså¹¶åŠ è½½ï¼Œæµªè´¹å¸¦å®½å¢åŠ é¡µé¢åŠ è½½æ—¶é—´ï¼ŒåŸºæœ¬æŠ›å¼ƒäº†é¢„åŠ è½½ã€‚
æ¯ä¸€ä¸ªè·¯ç”±éƒ½éœ€è¦é…ç½®resolveå±æ€§ï¼Œå¤ªlowã€‚
æ¨¡å—åŒ–ç¨‹åº¦å¤ªä½ï¼Œä¸åˆ©äºä»¥åä»£ç ç§»æ¤å’Œç»´æŠ¤ã€‚

3ã€è‡ªå·±å†™éœ€è¦çš„ç»„ä»¶ã€‚æœ€å¥½çš„æ–¹æ¡ˆï¼Œç„¶è€ŒæŠ€æœ¯è¦æ±‚å¤ªé«˜ï¼Œæ”¾å¼ƒã€‚


ç»¼ä¸Šï¼Œç¬¬ä¸‰ç§æ–¹æ¡ˆæš‚æ—¶æ— æ³•å®ç°ï¼Œæ”¾å¼ƒï¼›ç¬¬ä¸€ç§æ–¹æ¡ˆå‘å¤ªå¤šï¼Œæ”¾å¼ƒï¼›ç¬¬äºŒç§æ–¹æ¡ˆä¹Ÿä¸å¥½ï¼Œä½†æ˜¯ç›¸å¯¹å®¹æ˜“ï¼Œè€Œä¸”æ˜¯é’ˆå¯¹angularçš„æ’ä»¶ï¼Œå°±å®ƒäº†ã€‚
bower install angular#1.5.8bower install angular-ui-routerbower install oclazyloadbower install bootstrap

æ ¸å¿ƒä»£ç &lt;!--dynamic/index.html--&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;link rel=&quot;stylesheet&quot; href=&quot;bower_components/bootstrap/dist/css/bootstrap.min.css&quot;&gt;     &lt;style&gt;        body&#123;            font-family: &quot;Microsoft Yahei&quot;;        &#125;        .navigator&#123;            width: 500px;margin: 0 auto        &#125;        .navigator li&#123;           color: #000;font-size: 14px;        &#125;    &lt;/style&gt;    &lt;title&gt;æŒ‰éœ€åŠ è½½js&lt;/title&gt;&lt;/head&gt;&lt;body ng-app=&quot;myApp&quot;&gt;    &lt;ul class=&quot;navigator nav nav-pills&quot;&gt;        &lt;li role=&quot;presentation&quot; class=&quot;active&quot;&gt;&lt;a href=&quot;#home&quot; ng-click=&quot;isActive($event)&quot;&gt;ä¸»é¡µ&lt;/a&gt;&lt;/li&gt;        &lt;li role=&quot;presentation&quot; class=&quot;active&quot;&gt;&lt;a href=&quot;#page2&quot;&gt;Page2&lt;/a&gt;&lt;/li&gt;        &lt;li role=&quot;presentation&quot; class=&quot;active&quot;&gt;&lt;a href=&quot;#page3&quot; ng-click=&quot;isActive($event)&quot;&gt;Page3&lt;/a&gt;&lt;/li&gt;    &lt;/ul&gt;    &lt;div ui-view style=&quot;width: 500px;margin: 50px auto 0&quot;&gt;&lt;/div&gt;&lt;script src=&quot;bower_components/angular/angular.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;bower_components/angular-ui-router/release/angular-ui-router.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;bower_components/oclazyload/dist/ocLazyLoad.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;public/js/index.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;

/* *dynamic/public/js/index.js*/var myApp=angular.module(&quot;myApp&quot;,[&quot;ui.router&quot;,&quot;oc.lazyLoad&quot;]);myApp.config(function ($stateProvider,$urlRouterProvider) &#123;    $urlRouterProvider.when(&quot;&quot;,&quot;/home&quot;);    $stateProvider.state(&#x27;home&#x27;,&#123;        url:&quot;/home&quot;,        templateUrl: &#x27;views/homepage.html&#x27;,        controller: &#x27;homeController&#x27;,        resolve:&#123;            loadMyCtrl:[&#x27;$ocLazyLoad&#x27;,function ($ocLazyLoad) &#123;                return $ocLazyLoad.load(&#123;                    name:&quot;homeApp&quot;,                    files:[&quot;public/js/homepage.js&quot;]                &#125;)            &#125;]         &#125;    &#125;);    $stateProvider.state(&#x27;page2&#x27;,&#123;        url:&quot;/page2&quot;,        templateUrl:&#x27;views/page2.html&#x27;,        resolve:&#123;            loadMyCtrl:function ($ocLazyLoad) &#123;                return $ocLazyLoad.load(&#123;                    name:&#x27;page2App&#x27;,                    files:[&quot;public/js/page2.js&quot;]                &#125;)            &#125;        &#125;    &#125;)    $stateProvider.state(&#x27;page3&#x27;,&#123;        url:&quot;/page3&quot;,        templateUrl:&#x27;views/page3.html&#x27;,        resolve:&#123;            loadMyCtrl:function ($ocLazyLoad) &#123;                return $ocLazyLoad.load(&#123;                    name:&#x27;page3App&#x27;,                    files:[&quot;public/js/page3.js&quot;,&quot;public/js/page3-ext.js&quot;]                &#125;)            &#125;        &#125;    &#125;)    &#125;);

&lt;!--dynamic/views/homepage.html--&gt;&lt;div id=&quot;home&quot; ng-controller=&quot;homeController&quot;&gt;    &lt;h1&gt;é¦–é¡µ&lt;/h1&gt;    &#123;&#123;content&#125;&#125;&lt;/div&gt;

/* *dynamic/public/js/homepage.js*/angular.module(&#x27;myApp&#x27;).controller(&#x27;homeController&#x27;, function ($scope) &#123;     $scope.content = &#x27;è¿™æ˜¯ä¸»é¡µçš„å†…å®¹&#x27;;&#125;);

å®Œæ•´ä»£ç githubè‡ªå–ï¼šhttps://github.com/voidking/angulardemo/tree/master/dynamic
ä¹¦ç­¾RequireJSå®˜æ–¹æ–‡æ¡£http://requirejs.org/docs/start.html
Dynamically Loading Controllers and Views with AngularJShttp://weblogs.asp.net/dwahlin/dynamically-loading-controllers-and-views-with-angularjs-and-requirejs
angularåº”ç”¨å¦‚ä½•å®ç°æŒ‰éœ€åŠ è½½http://www.alloyteam.com/2015/10/angular-application-how-to-load-on-demand/
å°è¯•é€šè¿‡AngularJSæ¨¡å—æŒ‰éœ€åŠ è½½æ­å»ºå¤§å‹åº”ç”¨ï¼ˆä¸Šï¼‰http://web.jobbole.com/86915/
å°è¯•é€šè¿‡AngularJSæ¨¡å—æŒ‰éœ€åŠ è½½æ­å»ºå¤§å‹åº”ç”¨ï¼ˆä¸‹ï¼‰http://web.jobbole.com/87025/
angularjs ocLazyLoadåˆ†æ­¥åŠ è½½jsæ–‡ä»¶,angularjs ocLazyLoadæŒ‰éœ€åŠ è½½jshttp://m.w2bc.com/article/158713
æŒ‰éœ€åŠ è½½ AngularJS çš„ Controllerhttp://beginor.github.io/angularjs-controller-load-on-demand.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>angularjs</tag>
      </tags>
  </entry>
  <entry>
    <title>AngularJSå…¥é—¨ç¯‡</title>
    <url>/dev-angularjs-start/</url>
    <content><![CDATA[å‰è¨€AngularJSæ˜¯ä¸€ä¸ªJavaScriptæ¡†æ¶ï¼Œå®ƒé€šè¿‡æŒ‡ä»¤æ‰©å±•äº†HTMLï¼Œä¸”é€šè¿‡è¡¨è¾¾å¼ç»‘å®šæ•°æ®åˆ° HTMLã€‚
é¡ºä¾¿ä¸€æï¼Œä»€ä¹ˆæ˜¯æ¡†æ¶ï¼Ÿæ¯”å¦‚struts2ã€springã€hibernateã€thinkphpã€wordpressç­‰ç­‰ã€‚é‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯ç»„ä»¶ï¼Ÿæ¯”å¦‚jdbcã€jqueryã€swiperã€layerã€arttemplateç­‰ç­‰ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé‚£äº›å¯å¤ç”¨çš„ã€ç”¨äºç®€åŒ–å¼€å‘å·¥ä½œçš„ä»£ç é›†åˆï¼Œå¤§çš„å«æ¡†æ¶ï¼Œå°çš„å«ç»„ä»¶ã€‚æœ‰äººè¯´jqueryæ˜¯æ¡†æ¶ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œå¤§å°å¹¶æ²¡æœ‰æ˜ç¡®è¾¹ç•Œã€‚ä¸è¦å¤ªçº ç»“äºæ¦‚å¿µï¼Œå¦‚æ— å¿…è¦ï¼Œå‹¿å¢å®ä½“ã€‚
æœ¬æ–‡ï¼Œä¸»è¦å­¦ä¹ å½’çº³ä¸€ä¸‹Angularçš„å„ç§ç‰¹æ€§ï¼ŒåŒ…æ‹¬åŒå‘æ•°æ®ç»‘å®šã€å®šä¹‰åº”ç”¨å’Œæ§åˆ¶å™¨ã€ä¼˜åŒ–æ¨¡æ¿æ¸²æŸ“å»¶è¿Ÿã€è‡ªå®šä¹‰æŒ‡ä»¤ã€ä½œç”¨åŸŸã€HTTPè¯·æ±‚è·å–æ•°æ®ã€è‡ªå®šä¹‰æœåŠ¡ã€ä¾èµ–æ³¨å…¥ã€è·¯ç”±æ§åˆ¶ç­‰ã€‚æœ€åï¼Œä¼šç»™å‡ºä¸€ä¸ªç»¼åˆå®ä¾‹ã€‚



åŒå‘æ•°æ®ç»‘å®šå•å‘æ•°æ®ç»‘å®šçš„åŸç†ï¼šæ¨¡æ¿+æ•°æ®=&gt;è§†å›¾ã€‚ç›®å‰å¤§å¤šæ•°å‰ç«¯æ¡†æ¶éƒ½æ˜¯å•å‘æ•°æ®ç»‘å®šï¼Œæ¯”å¦‚jQueryUIã€BackBoneã€Flexã€‚
åŒå‘æ•°æ®ç»‘å®šåŸç†ï¼šæ¨¡æ¿+æ•°æ®=&gt;è§†å›¾ï¼Œæ¨¡æ¿+è§†å›¾=&gt;æ•°æ®ã€‚
Angularé‡‡ç”¨çš„ï¼Œå°±æ˜¯åŒå‘æ•°æ®ç»‘å®šã€‚
&lt;!--helloworld.html--&gt;&lt;!DOCTYPE html&gt;&lt;html ng-app&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;åŒå‘æ•°æ®ç»‘å®š&lt;/title&gt;    &lt;script src=&quot;http://code.angularjs.org/angular-1.0.1.min.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;    Hello &#123;&#123;&#x27;World&#x27;&#125;&#125;!&lt;br/&gt;    Your name: &lt;input type=&quot;text&quot; ng-model=&quot;yourname&quot; placeholder=&quot;World&quot;&gt;    &lt;hr&gt;    Hello &#123;&#123;yourname || &#x27;World&#x27;&#125;&#125;!&lt;/body&gt;&lt;/html&gt;

å®šä¹‰åº”ç”¨å’Œæ§åˆ¶å™¨angularå¯¹è±¡ï¼Œæ˜¯Angularçš„æ ¹å¯¹è±¡ã€‚ç±»ä¼¼äºexpressæ¡†æ¶ä¸­çš„expresså¯¹è±¡ï¼Œç±»ä¼¼äºseajsæ¡†æ¶çš„seajså¯¹è±¡ï¼Œç±»ä¼¼äºæµè§ˆå™¨çš„windowå¯¹è±¡ã€‚å¦‚æœè¯´angularå¯¹è±¡æ˜¯Angularä¸­çš„ç­ä¸»ä»»ï¼Œé‚£ä¹ˆåº”ç”¨ï¼ˆæˆ–è€…å«æ¨¡å—ï¼Œappï¼‰å°±æ˜¯Angularä¸­çš„ç­é•¿ï¼è€Œç­ä¸»ä»»ä¸å¸¸å‡ºæ²¡ï¼Œç®¡äº‹çš„å°±æ˜¯ç­é•¿ã€‚æ§åˆ¶å™¨ï¼ˆcontrollerï¼‰ï¼Œå°±æ˜¯æ™®é€šåŒå­¦å°æ˜ï¼Œè´Ÿè´£æ§åˆ¶Angularåº”ç”¨ç¨‹åºä¸­çš„æ•°æ®ã€‚
&lt;!--app.html--&gt;&lt;!DOCTYPE html&gt;&lt;html ng-app=&quot;myApp&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;å®šä¹‰åº”ç”¨å’Œæ§åˆ¶å™¨&lt;/title&gt;    &lt;style&gt;        [ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak &#123;          display: none !important;        &#125;    &lt;/style&gt;&lt;/head&gt;&lt;body&gt;    &lt;div ng-controller=&quot;myCtrl&quot;&gt;    å: &lt;input type=&quot;text&quot; ng-model=&quot;firstName&quot;&gt;&lt;br&gt;    å§“: &lt;input type=&quot;text&quot; ng-model=&quot;lastName&quot;&gt;&lt;br&gt;    &lt;br&gt;    å§“å: &lt;span&gt;&#123;&#123;firstName + &quot; &quot; + lastName&#125;&#125;&lt;/span&gt;&lt;br&gt;    å§“å2: &lt;span class=&quot;ng-cloak&quot;&gt;&#123;&#123;fullName()&#125;&#125;&lt;/span&gt;&lt;br&gt;    å§“å3: &lt;span ng-bind=&quot;fullName()&quot;&gt;&lt;/span&gt;    &lt;/div&gt;    &lt;script src=&quot;http://code.angularjs.org/angular-1.0.1.min.js&quot;&gt;&lt;/script&gt;    &lt;script&gt;        var app = angular.module(&#x27;myApp&#x27;, []);        app.controller(&#x27;myCtrl&#x27;, function($scope) &#123;            $scope.firstName= &quot;John&quot;;            $scope.lastName= &quot;Doe&quot;;            $scope.fullName = function() &#123;                return $scope.firstName + &quot; &quot; + $scope.lastName;            &#125;        &#125;);    &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;

ä¼˜åŒ–æ¨¡æ¿æ¸²æŸ“å»¶è¿Ÿåœ¨å®šä¹‰åº”ç”¨å’Œæ§åˆ¶å™¨çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œé¡µé¢ä¸Šå…ˆå‡ºç°äº†è¡¨è¾¾å¼ï¼Œä¹‹åæ‰å‡ºç°æˆ‘ä»¬æœŸæœ›çš„ç»“æœã€‚è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¸¸ç”¨çš„æœ‰ä¸¤ä¸ªåŠæ³•ã€‚ä¸€ä¸ªæ˜¯ä½¿ç”¨ng-bindï¼Œå¦ä¸€ä¸ªæ˜¯æ·»åŠ ng-cloakæ ·å¼ã€‚
è‡ªå®šä¹‰æŒ‡ä»¤&lt;!--directive.html--&gt;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;è‡ªå®šä¹‰æŒ‡ä»¤&lt;/title&gt;    &lt;script src=&quot;http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js&quot;&gt;&lt;/script&gt; &lt;/head&gt;&lt;body ng-app=&quot;myApp&quot;&gt;    &lt;runoob-directive&gt;&lt;/runoob-directive&gt;    &lt;div runoob-directive&gt;&lt;/div&gt;    &lt;div class=&quot;runoob-directive&quot;&gt;&lt;/div&gt;    &lt;!-- æŒ‡ä»¤: runoob-directive --&gt;    &lt;script&gt;        var app = angular.module(&quot;myApp&quot;, []);        app.directive(&quot;runoobDirective&quot;, function() &#123;            return &#123;                //restrict : &quot;A&quot;,                //restrict : &quot;C&quot;,                //restrict : &quot;M&quot;,                //replace : true,                template : &quot;&lt;h1&gt;è‡ªå®šä¹‰æŒ‡ä»¤!&lt;/h1&gt;&quot;            &#125;;        &#125;);    &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;

ä½œç”¨åŸŸ&lt;!--scope.html--&gt;&lt;!DOCTYPE html&gt;&lt;html ng-app=&quot;myApp&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;utf-8&quot;&gt;    &lt;title&gt;ä½œç”¨åŸŸ&lt;/title&gt;    &lt;script src=&quot;http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;    &lt;div ng-controller=&quot;myCtrl&quot;&gt;        &lt;h1&gt;å§“æ°ä¸º &#123;&#123;lastname&#125;&#125; å®¶æ—æˆå‘˜:&lt;/h1&gt;        &lt;ul&gt;            &lt;li ng-repeat=&quot;x in names&quot;&gt;&#123;&#123;x&#125;&#125; &#123;&#123;lastname&#125;&#125;&lt;/li&gt;        &lt;/ul&gt;    &lt;/div&gt;    &lt;script&gt;        var app = angular.module(&#x27;myApp&#x27;, []);        app.controller(&#x27;myCtrl&#x27;, function($scope, $rootScope) &#123;            $scope.names = [&quot;Emil&quot;, &quot;Tobias&quot;, &quot;Linus&quot;];            $rootScope.lastname = &quot;Refsnes&quot;;        &#125;);    &lt;/script&gt;    &lt;p&gt;æ³¨æ„ $rootScope åœ¨å¾ªç¯å¯¹è±¡å†…å¤–éƒ½å¯ä»¥è®¿é—®ã€‚&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;

ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ$scopeçš„ä½œç”¨åŸŸä¸ºmyCtrlè¿™ä¸ªng-controllerçš„èŒƒå›´ï¼Œ$rootScopeçš„ä½œç”¨åŸŸä¸ºmyAppè¿™ä¸ªng-appçš„èŒƒå›´ã€‚
HTTPè¯·æ±‚è·å–æ•°æ®è·å–æœ¬åœ°æ•°æ®&lt;!--http.html--&gt;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;    &lt;meta charset=&quot;utf-8&quot;&gt;    &lt;title&gt;HTTPè¯·æ±‚&lt;/title&gt;    &lt;script src=&quot;http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body ng-app=&quot;myApp&quot; &gt;    &lt;div ng-controller=&quot;myCtrl&quot;&gt;         &lt;h1&gt;æ¬¢è¿ä½ ï¼&#123;&#123;username&#125;&#125;&lt;/h1&gt;    &lt;/div&gt;    &lt;p&gt; $http æœåŠ¡å‘æœåŠ¡å™¨è¯·æ±‚ä¿¡æ¯ï¼Œè¿”å›çš„å€¼æ”¾å…¥å˜é‡ &quot;username&quot; ä¸­ã€‚&lt;/p&gt;&lt;script&gt;    var app = angular.module(&#x27;myApp&#x27;, []);    app.controller(&#x27;myCtrl&#x27;, function($scope, $http) &#123;      $http.get(&quot;http.json&quot;).then(function (response) &#123;          $scope.username = response.data.username;      &#125;);    &#125;);&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;

http.jsonä¸­çš„å†…å®¹ä¸ºï¼š
&#123;    &quot;username&quot;:&quot;voidking&quot; &#125;

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ¬ä¾‹éœ€è¦åœ¨æœåŠ¡å™¨ä¸­è®¿é—®ã€‚å› ä¸ºAngularçš„HTTPè¯·æ±‚å°è£…äº†XMLHttpRequestï¼Œè€ŒXMLHttpRequestçš„ä½¿ç”¨éœ€è¦æœåŠ¡å™¨ç¯å¢ƒã€‚
è·å–æœåŠ¡å™¨æ•°æ®&lt;!--http2.html--&gt;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;    &lt;meta charset=&quot;utf-8&quot;&gt;    &lt;title&gt;HTTPè¯·æ±‚æœåŠ¡å™¨æ•°æ®&lt;/title&gt;    &lt;script src=&quot;http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body ng-app=&quot;myApp&quot; &gt;    &lt;div ng-controller=&quot;myCtrl&quot;&gt;     &lt;h1&gt;æ¬¢è¿ä½ ï¼&#123;&#123;username&#125;&#125;&lt;/h1&gt;    &lt;/div&gt;    &lt;p&gt; $http æœåŠ¡å‘æœåŠ¡å™¨è¯·æ±‚ä¿¡æ¯ï¼Œè¿”å›çš„å€¼æ”¾å…¥å˜é‡ &quot;username&quot; ä¸­ã€‚&lt;/p&gt;&lt;script&gt;    var app = angular.module(&#x27;myApp&#x27;, []);    app.controller(&#x27;myCtrl&#x27;, function($scope, $http, $httpParamSerializer) &#123;        $http(&#123;            method:&#x27;POST&#x27;,            url:&#x27;/angulardemo/http.php&#x27;,            headers:&#123;                &#x27;Content-Type&#x27;:&#x27;application/x-www-form-urlencoded&#x27;            &#125;,            dataType: &#x27;json&#x27;,            data: $httpParamSerializer(&#123;username:&#x27;voidking&#x27;&#125;)        &#125;).then(function successCallback(response) &#123;            console.log(response.data);            $scope.username = response.data.username;        &#125;, function errorCallback(response) &#123;            console.log(response.data);        &#125;);;    &#125;);&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;

æ–°å»ºhttp.phpï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?php     $username = $_POST[&#x27;username&#x27;];    $result = array(        &#x27;code&#x27; =&gt; &#x27;0&#x27;,        &#x27;ext&#x27; =&gt; &#x27;success&#x27;,        &#x27;username&#x27; =&gt; $username    );    echo json_encode($result);?&gt;


è‡ªå®šä¹‰æœåŠ¡&lt;!--service.html--&gt;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;    &lt;meta charset=&quot;utf-8&quot;&gt;    &lt;title&gt;è‡ªå®šä¹‰Service&lt;/title&gt;    &lt;script src=&quot;http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js&quot;&gt;&lt;/script&gt;&lt;/head&gt;&lt;body ng-app=&quot;myApp&quot; &gt;    &lt;div ng-controller=&quot;myCtrl&quot;&gt;        &lt;p&gt;è‡ªå®šä¹‰æœåŠ¡ï¼Œç”¨äºè½¬æ¢16è¿›åˆ¶æ•°ï¼š&lt;/p&gt;        &lt;p&gt;255 çš„16è¿›åˆ¶æ˜¯:&lt;/p&gt;        &lt;h1&gt;&#123;&#123;hex&#125;&#125;&lt;/h1&gt;        &lt;hr&gt;        &lt;p&gt;åœ¨è·å–æ•°ç»„ [255, 251, 200] å€¼æ—¶ä½¿ç”¨è¿‡æ»¤å™¨:&lt;/p&gt;        &lt;ul&gt;          &lt;li ng-repeat=&quot;x in counts&quot;&gt;&#123;&#123;x | myFormat&#125;&#125;&lt;/li&gt;        &lt;/ul&gt;    &lt;/div&gt;&lt;script&gt;    var app = angular.module(&#x27;myApp&#x27;, []);    app.service(&#x27;hexafy&#x27;, function() &#123;        this.myFunc = function (x) &#123;            return x.toString(16);        &#125;    &#125;);    app.controller(&#x27;myCtrl&#x27;, function($scope, hexafy) &#123;        $scope.hex = hexafy.myFunc(255);        $scope.counts = [255, 251, 200];    &#125;);    app.filter(&#x27;myFormat&#x27;,[&#x27;hexafy&#x27;, function(hexafy) &#123;        return function(x) &#123;            return hexafy.myFunc(x);        &#125;;    &#125;]);&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;

å½“åˆ›å»ºäº†è‡ªå®šä¹‰æœåŠ¡ï¼Œå¹¶è¿æ¥åˆ°åº”ç”¨ä¸Šåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ§åˆ¶å™¨ï¼ŒæŒ‡ä»¤ï¼Œè¿‡æ»¤å™¨æˆ–å…¶ä»–æœåŠ¡ä¸­ä½¿ç”¨å®ƒã€‚
ä¾èµ–æ³¨å…¥AngularJS æä¾›å¾ˆå¥½çš„ä¾èµ–æ³¨å…¥æœºåˆ¶ã€‚ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿwiki ä¸Šçš„è§£é‡Šæ˜¯ï¼šä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼Œç®€ç§°DIï¼‰æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œåœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œä¸€ä¸ªæˆ–æ›´å¤šçš„ä¾èµ–ï¼ˆæˆ–æœåŠ¡ï¼‰è¢«æ³¨å…¥ï¼ˆæˆ–è€…é€šè¿‡å¼•ç”¨ä¼ é€’ï¼‰åˆ°ä¸€ä¸ªç‹¬ç«‹çš„å¯¹è±¡ï¼ˆæˆ–å®¢æˆ·ç«¯ï¼‰ä¸­ï¼Œç„¶åæˆä¸ºäº†è¯¥å®¢æˆ·ç«¯çŠ¶æ€çš„ä¸€éƒ¨åˆ†ã€‚è¯¥æ¨¡å¼åˆ†ç¦»äº†å®¢æˆ·ç«¯ä¾èµ–æœ¬èº«è¡Œä¸ºçš„åˆ›å»ºï¼Œè¿™ä½¿å¾—ç¨‹åºè®¾è®¡å˜å¾—æ¾è€¦åˆï¼Œå¹¶éµå¾ªäº†ä¾èµ–åè½¬å’Œå•ä¸€èŒè´£åŸåˆ™ã€‚ä¸æœåŠ¡å®šä½å™¨æ¨¡å¼å½¢æˆç›´æ¥å¯¹æ¯”çš„æ˜¯ï¼Œå®ƒå…è®¸å®¢æˆ·ç«¯äº†è§£å®¢æˆ·ç«¯å¦‚ä½•ä½¿ç”¨è¯¥ç³»ç»Ÿæ‰¾åˆ°ä¾èµ–ã€‚
&lt;!--di.html--&gt;&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt;   &lt;meta charset=&quot;utf-8&quot;&gt;   &lt;title&gt;AngularJSä¾èµ–æ³¨å…¥&lt;/title&gt;&lt;/head&gt;   &lt;body ng-app=&quot;mainApp&quot; &gt;   &lt;h2&gt;AngularJS ç®€å•åº”ç”¨&lt;/h2&gt;   &lt;div ng-controller=&quot;CalcController&quot;&gt;      &lt;p&gt;é…ç½®ï¼š&#123;&#123;constant&#125;&#125;&lt;/p&gt;      &lt;p&gt;è¾“å…¥ä¸€ä¸ªæ•°å­—: &lt;input type = &quot;number&quot; ng-model = &quot;number&quot; /&gt;&lt;/p&gt;      &lt;button ng-click = &quot;square()&quot;&gt;X&lt;sup&gt;2&lt;/sup&gt;&lt;/button&gt;      &lt;p&gt;ç»“æœ: &#123;&#123;result&#125;&#125;&lt;/p&gt;   &lt;/div&gt;   &lt;hr&gt;   &lt;div ng-controller=&quot;CalcController2&quot;&gt;      &lt;p&gt;å†è¾“å…¥ä¸€ä¸ªæ•°å­—: &lt;input type = &quot;number&quot; ng-model = &quot;number&quot; /&gt;&lt;/p&gt;      &lt;button ng-click = &quot;square()&quot;&gt;X&lt;sup&gt;2&lt;/sup&gt;&lt;/button&gt;      &lt;p&gt;ç»“æœ: &#123;&#123;result&#125;&#125;&lt;/p&gt;   &lt;/div&gt;   &lt;script src=&quot;http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js&quot;&gt;&lt;/script&gt;&lt;script&gt;   var mainApp = angular.module(&quot;mainApp&quot;, []);   mainApp.config(function($provide) &#123;      // åˆ›å»ºä¸€ä¸ªåå«MathServiceçš„provider      $provide.provider(&#x27;MathService&#x27;, function() &#123;         this.$get = function() &#123;            var factory = &#123;&#125;;                     factory.multiply = function(a, b) &#123;               return a * b;            &#125;            return factory;         &#125;;      &#125;);   &#125;);   // åˆ›å»ºä¸€ä¸ªåå«defaultInputçš„value   mainApp.value(&quot;defaultInput&quot;, 5);   // åˆ›å»ºä¸€ä¸ªåå«constantçš„constant value   mainApp.constant(&quot;constant&quot;, &quot;constant value&quot;);   // å°†MathServiceã€defaultInputã€constantæ³¨å…¥åˆ°æ§åˆ¶å™¨   mainApp.controller(&#x27;CalcController&#x27;, function($scope, MathService, defaultInput, constant) &#123;      $scope.number = defaultInput;      $scope.constant = constant;      $scope.result = MathService.multiply($scope.number,$scope.number);      $scope.square = function() &#123;         $scope.result = MathService.multiply($scope.number,$scope.number);      &#125;   &#125;);   /*--------ä»¥ä¸‹æ˜¯CalcController2çš„å†…å®¹--------*/   // åˆ›å»ºä¸€ä¸ªåå«MathService2çš„factory   mainApp.factory(&#x27;MathService2&#x27;, function() &#123;      var factory = &#123;&#125;;            factory.multiply = function(a, b) &#123;         return a * b;      &#125;      return factory;   &#125;);      // åˆ›å»ºä¸€ä¸ªåå«CalcService2çš„serviceï¼Œå¹¶ä¸”æ³¨å…¥MathService2   mainApp.service(&#x27;CalcService2&#x27;, function(MathService2)&#123;      this.square = function(a) &#123;         return MathService2.multiply(a,a);      &#125;   &#125;);   // å°†CalcService2æ³¨å…¥åˆ°æ§åˆ¶å™¨   mainApp.controller(&#x27;CalcController2&#x27;,function($scope,CalcService2)&#123;      $scope.number = 6;      $scope.result = CalcService2.square($scope.number);      $scope.square = function() &#123;         $scope.result = CalcService2.square($scope.number,$scope.number);      &#125;   &#125;);    &lt;/script&gt;   &lt;/body&gt;&lt;/html&gt;

provider()å‡½æ•°æ˜¯ç”¨æ¥åˆ›å»ºproviderå¯¹è±¡çš„æ ‡å‡†æ–¹æ³•ã€‚
å®é™…ä¸Šï¼Œvalue()ã€constant()ã€factory()ã€service()å…¨éƒ½æ˜¯ç”¨æ¥åˆ›å»ºä¸€ä¸ªproviderå¯¹è±¡çš„æ–¹æ³•ï¼Œå®ƒä»¬æä¾›äº†ä¸€ç§æ–¹å¼æ¥å®šä¹‰ä¸€ä¸ªproviderï¼Œè€Œæ— éœ€è¾“å…¥æ‰€æœ‰çš„å¤æ‚çš„ä»£ç ã€‚
è·¯ç”±æ§åˆ¶AngularJS è·¯ç”±å…è®¸æˆ‘ä»¬é€šè¿‡ä¸åŒçš„ URL è®¿é—®ä¸åŒçš„å†…å®¹ã€‚é€šè¿‡ AngularJS å¯ä»¥å®ç°å¤šè§†å›¾çš„å•é¡µWebåº”ç”¨ï¼ˆsingle page web applicationï¼ŒSPAï¼‰ã€‚é€šå¸¸æˆ‘ä»¬çš„URLå½¢å¼ä¸ºhttp://runoob.com/first/page ï¼Œä½†åœ¨å•é¡µWebåº”ç”¨ä¸­AngularJS é€šè¿‡ # + æ ‡è®° å®ç°ï¼Œä¾‹å¦‚ï¼š
http://runoob.com/#/firsthttp://runoob.com/#/secondhttp://runoob.com/#/third

å½“æˆ‘ä»¬ç‚¹å‡»ä»¥ä¸Šçš„ä»»æ„ä¸€ä¸ªé“¾æ¥æ—¶ï¼Œå‘æœåŠ¡ç«¯è¯·çš„åœ°å€éƒ½æ˜¯ä¸€æ ·çš„ (http://runoob.com/)ã€‚ å› ä¸º # å·ä¹‹åçš„å†…å®¹åœ¨å‘æœåŠ¡ç«¯è¯·æ±‚æ—¶ä¼šè¢«æµè§ˆå™¨å¿½ç•¥æ‰ã€‚ æ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦åœ¨å®¢æˆ·ç«¯å®ç° # å·åé¢å†…å®¹çš„åŠŸèƒ½å®ç°ã€‚ AngularJS è·¯ç”± å°±é€šè¿‡ # + æ ‡è®° å¸®åŠ©æˆ‘ä»¬åŒºåˆ†ä¸åŒçš„é€»è¾‘é¡µé¢å¹¶å°†ä¸åŒçš„é¡µé¢ç»‘å®šåˆ°å¯¹åº”çš„æ§åˆ¶å™¨ä¸Šã€‚

AngularJS æ¨¡å—çš„ config å‡½æ•°ç”¨äºé…ç½®è·¯ç”±è§„åˆ™ã€‚é€šè¿‡ä½¿ç”¨ configAPIï¼Œæˆ‘ä»¬è¯·æ±‚æŠŠ$routeProvideræ³¨å…¥åˆ°æˆ‘ä»¬çš„é…ç½®å‡½æ•°å¹¶ä¸”ä½¿ç”¨$routeProvider.whenAPIæ¥å®šä¹‰æˆ‘ä»¬çš„è·¯ç”±è§„åˆ™ã€‚$routeProvider ä¸ºæˆ‘ä»¬æä¾›äº† when(path,object) &amp; otherwise(object) å‡½æ•°æŒ‰é¡ºåºå®šä¹‰æ‰€æœ‰è·¯ç”±ï¼Œå‡½æ•°åŒ…å«ä¸¤ä¸ªå‚æ•°:ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ URL æˆ–è€… URL æ­£åˆ™è§„åˆ™ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯è·¯ç”±é…ç½®å¯¹è±¡ã€‚
&lt;!--router.html--&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;è·¯ç”±æ§åˆ¶&lt;/title&gt;&lt;/head&gt;&lt;body ng-app=&quot;ngRouteExample&quot; class=&quot;ng-scope&quot;&gt;    &lt;div&gt;         &lt;div id=&quot;navigation&quot;&gt;          &lt;a href=&quot;#/home&quot;&gt;Home&lt;/a&gt;        &lt;a href=&quot;#/about&quot;&gt;About&lt;/a&gt;    &lt;/div&gt;          &lt;div ng-view=&quot;&quot;&gt;    &lt;/div&gt;&lt;script type=&quot;text/ng-template&quot; id=&quot;embedded.home.html&quot;&gt;    &lt;h1&gt; Home &lt;/h1&gt;&lt;/script&gt;&lt;script src=&quot;http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;http://apps.bdimg.com/libs/angular-route/1.3.13/angular-route.js&quot;&gt;&lt;/script&gt;&lt;script type=&quot;text/javascript&quot;&gt;    angular.module(&#x27;ngRouteExample&#x27;, [&#x27;ngRoute&#x27;])    .controller(&#x27;HomeController&#x27;, function ($scope, $route) &#123; $scope.$route = $route;&#125;)    .controller(&#x27;AboutController&#x27;, function ($scope, $route) &#123; $scope.$route = $route;&#125;)    .config(function ($routeProvider) &#123;        $routeProvider.        when(&#x27;/home&#x27;, &#123;            templateUrl: &#x27;embedded.home.html&#x27;,            controller: &#x27;HomeController&#x27;        &#125;).        when(&#x27;/about&#x27;, &#123;            templateUrl: &#x27;about.html&#x27;,            controller: &#x27;AboutController&#x27;        &#125;).        otherwise(&#123;            redirectTo: &#x27;/home&#x27;        &#125;);    &#125;);&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;

&lt;!--about.html--&gt;&lt;h1&gt; About &lt;/h1&gt;

ç»¼åˆ&lt;!--complex.html--&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;ç»¼åˆå®ä¾‹&lt;/title&gt;&lt;/head&gt;&lt;body ng-app=&quot;ngRouteExample&quot; class=&quot;ng-scope&quot;&gt;    &lt;div&gt;         &lt;div id=&quot;navigation&quot;&gt;          &lt;a href=&quot;#/page1&quot;&gt;Page1&lt;/a&gt;        &lt;a href=&quot;#/page2&quot;&gt;Page2&lt;/a&gt;    &lt;/div&gt;         &lt;div ng-view=&quot;&quot;&gt;    &lt;/div&gt;&lt;script src=&quot;http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;http://apps.bdimg.com/libs/angular-route/1.3.13/angular-route.js&quot;&gt;&lt;/script&gt;&lt;script type=&quot;text/javascript&quot;&gt;        var myApp = angular.module(&#x27;ngRouteExample&#x27;, [&#x27;ngRoute&#x27;]);    myApp.controller(&#x27;Page1Controller&#x27;, function ($scope, $route) &#123;         $scope.$route = $route;        $scope.content = &#x27;è¿™æ˜¯page1çš„å†…å®¹&#x27;;    &#125;);    myApp.controller(&#x27;Page2Controller&#x27;, function ($scope, $route) &#123;         $scope.$route = $route;        $scope.content = &#x27;è¿™æ˜¯page2çš„å†…å®¹&#x27;;    &#125;)    myApp.config(function ($routeProvider) &#123;        $routeProvider.        when(&#x27;/page1&#x27;, &#123;            templateUrl: &#x27;complex-page1.html&#x27;,            controller: &#x27;Page1Controller&#x27;        &#125;).        when(&#x27;/page2&#x27;, &#123;            templateUrl: &#x27;complex-page2.html&#x27;,            controller: &#x27;Page2Controller&#x27;        &#125;).        otherwise(&#123;            redirectTo: &#x27;/page1&#x27;        &#125;);    &#125;);&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;

&lt;!--complex-page1.html--&gt;&lt;div id=&quot;page1&quot; ng-controller=&quot;Page1Controller&quot;&gt;    &lt;h1&gt;Page1&lt;/h1&gt;    &lt;p&gt;&#123;&#123;content&#125;&#125;&lt;/p&gt;&lt;/div&gt;

&lt;!--complex-page2.html--&gt;&lt;div id=&quot;page2&quot; ng-controller=&quot;Page2Controller&quot;&gt;    &lt;h1&gt;Page2&lt;/h1&gt;    &lt;p&gt;&#123;&#123;content&#125;&#125;&lt;/p&gt;&lt;/div&gt;

åè®°è‡³äºè¾“å…¥éªŒè¯ã€äº‹ä»¶ã€åŠ¨ç”»ã€APIç­‰ï¼Œæœ¬æ–‡ä¸å†è®¨è®ºï¼Œç”¨åˆ°æ—¶è‡ªè¡ŒæŸ¥é˜…æ–‡æ¡£ã€‚æœ¬æ–‡å®Œæ•´æºç åœ°å€ï¼šhttps://github.com/voidking/angulardemo
è®°å½•ä¸€ä¸ªhexoçš„å‘ï¼šå¦‚æœæ–‡ä¸­å‡ºç°äº†åŒæ‹¬å·ï¼Œè€Œä¸”åŒæ‹¬å·æ²¡æœ‰è¢«ä»£ç å—åŒ…å«ï¼Œé‚£ä¹ˆè§£æä¼šæŠ¥é”™ï¼Œæ— æ³•ç”Ÿæˆé¡µé¢ã€‚
æŸ¥æ‰¾åˆ°çš„è§£å†³åŠæ³•ï¼š
&#123;% raw %&#125;å†…å®¹&#123;% endraw %&#125;

ç»æµ‹è¯•ï¼Œæ— æ•ˆï¼Œå°±ç”¨æ±‰å­—ä»£æ›¿å¥½äº†ã€‚
ä¹¦ç­¾AngularJSå®æˆ˜http://www.imooc.com/learn/156
AngularJS æ•™ç¨‹ | èœé¸Ÿæ•™ç¨‹http://www.runoob.com/angularjs/angularjs-tutorial.html
AngularJSä¸­æ–‡ç½‘http://www.apjs.net/
AngularJSä¸­æ–‡ç¤¾åŒºhttp://angularjs.cn/
å›¾çµç¤¾åŒº: åˆé›† : AngularJSå…¥é—¨æ•™ç¨‹http://www.ituring.com.cn/minibook/303
AngularJS: API: API Referencehttps://docs.angularjs.org/api
ngCloakhttps://docs.angularjs.org/api/ng/directive/ngCloak
AngularJS : Why ng-bind is better than åŒæ‹¬å· in angular?http://stackoverflow.com/questions/16125872/angularjs-why-ng-bind-is-better-than-in-angular
Metronic3.3ç½‘é¡µæ¨¡æ¿åœ¨çº¿æ¼”ç¤ºhttp://metronic.kp7.cn/
æ¡†æ¶åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Ÿhttps://www.zhihu.com/question/32069908
ç†è§£AngularJSä¸­çš„ä¾èµ–æ³¨å…¥http://sentsin.com/web/663.html
Hexoçš„ä¸€ä¸ªå°BUG(Template render error)http://www.jianshu.com/p/738ebe02029b
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>å‰ç«¯</tag>
        <tag>angularjs</tag>
      </tags>
  </entry>
  <entry>
    <title>Webå®‰å…¨ä¹‹æ¼æ´æ‰«æ</title>
    <url>/dev-web-security-vulnerability-scan/</url>
    <content><![CDATA[æ¼æ´æ‰«ææ¦‚è¿°æ¼æ´æ‰«æå™¨å¯ä»¥å¿«é€Ÿå¸®åŠ©æˆ‘ä»¬å‘ç°æ¼æ´ï¼Œä¾‹å¦‚ï¼ŒSQLæ³¨å…¥æ¼æ´ï¼ˆSQL injectionï¼‰ã€è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆcross site scriptingï¼‰ã€ç¼“å†²åŒºæº¢å‡ºï¼ˆbuffer overflowï¼‰ã€‚ä¸€ä¸ªå¥½çš„æ¼æ´æ‰«æå™¨åœ¨æ¸—é€æµ‹è¯•ä¸­æ˜¯è‡³å…³é‡è¦çš„ï¼Œå¯ä»¥è¯´æ˜¯æ¸—é€æˆåŠŸæˆ–è€…å¤±è´¥çš„å…³é”®ç‚¹ã€‚


æ¼æ´æ‰«æå·¥å…·ä¸€æ¬¾ä¼˜ç§€çš„æ¼æ´æ‰«æå™¨ä¼šä½¿æ¸—é€æµ‹è¯•å˜å¾—è½»æ¾ï¼Œä½†å¯¹äºä¸€äº›æ¼æ´ï¼Œè‡ªåŠ¨åŒ–è½¯ä»¶æ˜¯æ— æ³•è¯†åˆ«çš„ï¼Œä¾‹å¦‚ï¼Œé€»è¾‘æ€§æ¼æ´ï¼ŒåŠå…¶éšè”½çš„XSSæ¼æ´æˆ–è€…SQLæ³¨å…¥æ¼æ´ã€‚æ‰€ä»¥ï¼Œåœ¨è¿›è¡Œæ¼æ‰«æ—¶ï¼Œå¿…é¡»è¦ä¸äººå·¥æ¸—é€ç›¸ç»“åˆã€‚
æ¼æ´æ‰«æä¹Ÿå±äºä¿¡æ¯æ¢æµ‹çš„ä¸€ç§ï¼Œæ‰«æå™¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬å‘ç°éå¸¸å¤šçš„é—®é¢˜ã€‚
æœ¬ç« ä¸»è¦ä»‹ç»äº†å‡ æ¬¾å·¥å…·çš„ä½¿ç”¨ï¼ŒéƒåŒå­¦æ›´åŠ å–œæ¬¢åœ¨åº”ç”¨ä¸­å­¦ä¹ ï¼Œå› æ­¤ï¼Œä¸å†æ‘˜æŠ„ä¹¦ä¸­å†…å®¹ï¼Œä»…è®°å½•ä¸€ä¸‹ä¸‰æ¬¾ä¼˜ç§€çš„å·¥å…·ï¼Œå…·ä½“ç”¨æ³•è‡ªè¡Œç™¾åº¦ã€‚
Burp Suiteåœ¨sectools.org Webæ‰«ææ¨¡å—ä½å±…ç¬¬ä¸€åã€‚
AWVSAWVSï¼ˆAcunetix Web Volunerability Scannerï¼‰æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„Webåº”ç”¨ç¨‹åºå®‰å…¨æµ‹è¯•å·¥å…·ï¼Œå®ƒå¯ä»¥æ‰«æä»»ä½•å¯é€šè¿‡Webæµè§ˆå™¨è®¿é—®çš„å’Œéµå¾ªHTTP/HTTPSè§„åˆ™çš„Webç«™ç‚¹å’ŒWebåº”ç”¨ç¨‹åºã€‚
ä¹Ÿæœ‰å¾ˆå¤šäººå–œæ¬¢æŠŠAWVSæ”¹ä¸ºWVSç§°å‘¼ï¼Œä¸¤è€…æ˜¯åŒä¸€æ¬¾å·¥å…·ã€‚
WVSå¯ä»¥å¿«é€Ÿæ‰«æè·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXXSï¼‰ã€SQLæ³¨å…¥æ”»å‡»ã€ä»£ç æ‰§è¡Œã€ä»£ç æ‰§è¡Œã€ç›®å½•éå†æ”»å‡»ã€æ–‡ä»¶å…¥ä¾µã€è„šæœ¬æºä»£ç æ³„æ¼ã€CRLFæ³¨å…¥ã€PHPä»£ç æ³¨å…¥ã€XPathæ³¨å…¥ã€LDAPæ³¨å…¥ã€Cookieæ“çºµã€URLé‡å®šå‘ã€åº”ç”¨ç¨‹åºé”™è¯¯æ¶ˆæ¯ç­‰ã€‚
å®˜ç½‘ï¼šhttp://www.acunetix.com/
AppScanAppScanæ˜¯IBMå…¬å¸å‡ºå“çš„ä¸€ä¸ªé¢†å…ˆçš„Webåº”ç”¨å®‰å…¨æµ‹è¯•å·¥å…·ï¼Œæ›¾ä»¥Watchfire AppScançš„åç§°äº«èª‰ä¸šç•Œã€‚AppScanå¯è‡ªåŠ¨åŒ–Webåº”ç”¨çš„å®‰å…¨æ¼æ´è¯„ä¼°å·¥ä½œï¼Œèƒ½æ‰«æå’Œæ£€æµ‹æ‰€æœ‰å¸¸è§çš„Webåº”ç”¨å®‰å…¨æ¼æ´ï¼Œä¾‹å¦‚ï¼ŒSQLæ³¨å…¥ã€è·¨ç«™ç‚¹è„šæœ¬æ”»å‡»ã€ç¼“å†²åŒºæº¢å‡ºåŠæœ€æ–°çš„Flash/Flexåº”ç”¨å’ŒWeb2.0åº”ç”¨æš´éœ²ç­‰æ–¹é¢çš„å®‰å…¨æ¼æ´æ‰«æã€‚
å…¶ä»–å›½å¤–å·¥å…·ï¼šHP Webinspectã€Owasp Zapã€Niktoã€Owasp WebScarabã€w3afã€Netsparkerã€‚
å…¶ä»–å›½å†…å·¥å…·ï¼šJSKYã€Safe3 Web Vul Scannerã€å®‰æ’ä¿¡æ¯æ˜é‰´Webåº”ç”¨å¼±ç‚¹æ‰«æå™¨ã€æå…‰è¿œç¨‹å®‰å…¨è¯„ä¼°ç³»ç»Ÿã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>å®‰å…¨</tag>
        <tag>é»‘å®¢</tag>
      </tags>
  </entry>
  <entry>
    <title>Webå®‰å…¨ä¹‹ä¿¡æ¯æ¢æµ‹</title>
    <url>/dev-web-security-info-detection/</url>
    <content><![CDATA[ä¿¡æ¯æ¢æµ‹åœ¨è¿›è¡Œå®‰å…¨æµ‹è¯•ä¹‹å‰ï¼Œæœ€é‡è¦çš„ä¸€æ­¥å°±æ˜¯ä¿¡æ¯æ¢æµ‹ã€‚ä¿¡æ¯æ¢æµ‹æ—¶åº”è¯¥æœé›†å“ªäº›èµ„æ–™å‘¢ï¼Ÿå…¶å®æœ€ä¸»è¦çš„å°±æ˜¯ä¸æœåŠ¡å™¨çš„é…ç½®ä¿¡æ¯å’Œç½‘ç«™çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç½‘ç«™æ³¨å†Œäººã€ç›®æ ‡ç½‘ç«™ç³»ç»Ÿã€ç›®æ ‡æœåŠ¡å™¨ç³»ç»Ÿã€ç›®æ ‡ç½‘ç«™ç›¸å…³å­åŸŸåã€ç›®æ ‡æœåŠ¡å™¨å¼€æ”¾çš„ç«¯å£å’ŒæœåŠ¡å™¨å­˜æ”¾ç½‘ç«™ç­‰ã€‚


NmapNmapæ˜¯ä¸€ä¸ªå¼€æºçš„ç½‘ç»œè¿æ¥ç«¯æ‰«æè½¯ä»¶ï¼Œç”¨æ¥æ‰«æè®¡ç®—æœºå¼€æ”¾çš„ç½‘ç»œè¿æ¥ç«¯ï¼Œç¡®å®šå“ªäº›æœåŠ¡è¿è¡Œåœ¨å“ªäº›è¿æ¥ç«¯ï¼Œå¹¶ä¸”æ¨æ–­è®¡ç®—æœºè¿è¡Œå“ªä¸ªæ“ä½œç³»ç»Ÿã€‚å¦å¤–ï¼Œå®ƒä¹Ÿç”¨äºè¯„ä¼°ç½‘ç»œç³»ç»Ÿå®‰å…¨ã€‚
å¸¸ç”¨å‘½ä»¤1ã€æ‰«æä¸»æœºåˆ—è¡¨nmap -sL 192.168.199.1/24
2ã€æ‰«æç‰¹å®šä¸»æœºä¸Šçš„ç‰¹å®šç«¯å£nmap -p 80,21,23 192.168.199.1
3ã€æ¢æµ‹ä¸»æœºæ“ä½œç³»ç»Ÿnmap -O 192.168.199.1
4ã€å…¨é¢çš„ç³»ç»Ÿæ¢æµ‹nmap -v -A 192.168.199.1
5ã€ç©¿é€é˜²ç«å¢™çš„è¿›è¡Œæ‰«ænmap -Pn -A 192.168.199.1
6ã€ä½¿ç”¨æ–‡ä»¶ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªipåœ°å€åˆ—è¡¨ï¼Œå°†è¿™ä¸ªä¿å­˜ä¸ºä¸€ä¸ªtxtæ–‡ä»¶ï¼Œå’Œå‘½ä»¤è¡Œæ‰§è¡Œè·¯å¾„ç›¸åŒï¼Œæ‰«æè¿™ä¸ªtxtå†…çš„æ‰€æœ‰ä¸»æœºã€‚nmap -iL target.txt
PSï¼štarget.txtå†…å®¹
127.0.0.1www.baidu.com

7ã€ä¿å­˜æ‰«æç»“æœnmap -O 127.0.0.1 -oN result.txt
8ã€windowsæ‰«ææœ¬æœºnmap -sT 127.0.0.1
è„šæœ¬å¼•æ“åœ¨Nmapå®‰è£…ç›®å½•ä¸‹å­˜åœ¨Scriptæ–‡ä»¶å¤¹ï¼Œåœ¨Scriptæ–‡ä»¶å¤¹ä¸­å­˜åœ¨è®¸å¤šä»¥â€œ.nseâ€åç¼€ç»“å°¾çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå³Nmapè‡ªå¸¦çš„è„šæœ¬å¼•æ“ã€‚
1ã€æ‰«æWebæ•æ„Ÿç›®å½•nmap -p 80 --script=http-enum.nse 192.168.199.1
2ã€æ‰«æSqlInjectionnmap -p 80 --script=sql-injection.nse 192.168.199.1
3ã€ä½¿ç”¨é€šé…ç¬¦æ‰«ænmap --script=&quot;http-*&quot; 192.168.199.1
4ã€ä½¿ç”¨æ‰€æœ‰çš„è„šæœ¬è¿›è¡Œæ‰«ænmap --script all 192.168.199.1
DirBusteråœ¨æ¸—é€æµ‹è¯•ä¸­ï¼Œæ¢æµ‹Webç›®å½•ç»“æ„å’Œéšè—çš„æ•æ„Ÿæ–‡ä»¶æ˜¯å¿…ä¸å¯å°‘çš„ä¸€éƒ¨åˆ†ã€‚é€šè¿‡æ¢æµ‹å¯ä»¥äº†è§£ç½‘ç«™çš„ç»“æ„ï¼Œè·å–ç®¡ç†å‘˜çš„ä¸€äº›æ•æ„Ÿä¿¡æ¯ï¼Œæ¯”å¦‚ç½‘ç«™çš„åå°ç®¡ç†é¡µé¢ã€æ–‡ä»¶ä¸Šä¼ ç•Œé¢ï¼Œæœ‰äº‹ç”šè‡³å¯èƒ½æ‰«æå‡ºç½‘ç«™çš„æºä»£ç ã€‚è€ŒDirBusterå°±æ˜¯å®Œæˆè¿™äº›åŠŸèƒ½çš„ä¸€æ¬¾ä¼˜ç§€çš„èµ„æºæ¢æµ‹å·¥å…·ã€‚
å›¾å½¢åŒ–ç•Œé¢ï¼Œç†Ÿæ‚‰ä¸‹å³å¯ã€‚
æŒ‡çº¹è¯†åˆ«æ­¤å¤„çš„æŒ‡çº¹è¯†åˆ«å¹¶éä¸€äº›é—¨ç¦æŒ‡çº¹è¯†åˆ«ã€è´¢åŠ¡æŒ‡çº¹è¯†åˆ«ã€æ±½è½¦æŒ‡çº¹è¯†åˆ«ç­‰ï¼Œè€Œæ˜¯é’ˆå¯¹è®¡ç®—æœºæˆ–è®¡ç®—æœºç³»ç»Ÿçš„æŸäº›æœåŠ¡çš„æŒ‡çº¹è¯†åˆ«ã€‚
Nampçš„nmap -Oå‘½ä»¤ï¼Œå¾¡å‰‘çš„æŒ‡çº¹è¯†åˆ«ï¼ŒAppPrintç­‰ã€‚
ä¹¦ç­¾
Nmap: the Network Mapper - Free Security Scanner
DirBuster download | SourceForge.net
Nmap scan produces all â€œunknownâ€
Zenmap prits all states as unknown

]]></content>
      <categories>
        <category>engineering</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>å®‰å…¨</tag>
        <tag>é»‘å®¢</tag>
      </tags>
  </entry>
  <entry>
    <title>Cloudflareé…ç½®æ¦‚è¿°</title>
    <url>/dev-cloudflare-config/</url>
    <content><![CDATA[æ·»åŠ åŸŸå
Create a Cloudflare account and add your domain.

Choose Plan.

Change your nameservers.




å¿«é€Ÿé…ç½®å¿«é€Ÿé…ç½®åœ°å€ï¼šhttps://dash.cloudflare.com/&lt;xxx&gt;/voidking.com/recommendationså…¶ä¸­ &lt;xxx&gt; è¦æ”¹æˆCloudflareè‡ªåŠ¨ç”Ÿæˆçš„éšæœºå­—ç¬¦ä¸²ã€‚

æé«˜å®‰å…¨æ€§ï¼Œè‡ªåŠ¨HTTPSé‡å†™ï¼Œå§‹ç»ˆä½¿ç”¨HTTPS
ä¼˜åŒ–æ€§èƒ½ï¼ŒBrotliå‹ç¼©
æ‘˜è¦

DNSè®°å½•Cloudflareçš„DNSè®°å½•æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒæ”¯æŒä¸¤ç§è§£ææ–¹å¼ï¼š

ä»…DNSï¼šå’Œå…¶ä»–åŸŸåæœåŠ¡å™¨ä¸€æ ·ï¼ŒåŸŸåè§£æåˆ°æŒ‡å®šçš„åœ°å€ï¼›
ä»£ç†ï¼šé€šè¿‡Cloudflareä»£ç†çœŸå®æœåŠ¡å™¨çš„æµé‡ï¼Œä¹Ÿå°±æ˜¯è¯´åŸŸåè§£æåˆ°çš„åœ°å€æ˜¯ä»£ç†åœ°å€ï¼ŒçœŸå®åœ°å€ä¼šè¢«éšè—ã€‚

è§£ææ–¹å¼æ˜¯ä»£ç†çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥é˜²DDoSäº†ï¼Œå› ä¸ºä»£ç†æœåŠ¡å™¨æ˜¯é˜²DDoSçš„ï¼Œé»‘å®¢æ”»å‡»ä¸åˆ°æˆ‘ä»¬çš„çœŸå®åœ°å€ã€‚
CloudFlare for SaaSé…ç½®æ·»åŠ åŸŸå
Create a Cloudflare account and add your domain.

For your Plan, choose Business or Enterprise.

Add your domain to Cloudflare. You should land on the Overview page.

Ignore the instructions to change your nameservers.

For Advanced Actions, click Convert to CNAME DNS Setup.


éªŒè¯åŸŸåOnce you add your domain to Cloudflare, add the Verification TXT Record at your authoritative DNS provider. Cloudflare will verify the TXT record and send a confirmation email. This can take up to a few hours.
æ·»åŠ è§£æ
In Cloudflare, add an A, AAAA, or CNAME record.

At your authoritative DNS provider:


  a. Remove any existing A, AAAA, or CNAME records on the hostname you want to proxy to Cloudflare.
  b. Add a CNAME record for {your-hostname}.cdn.cloudflare.net.
  c. Repeat this process for each subdomain proxied to Cloudflare.
]]></content>
      <categories>
        <category>engineering</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>Webå®‰å…¨ä¹‹é˜²å¾¡DDoS</title>
    <url>/dev-web-security-defend-ddos/</url>
    <content><![CDATA[DDoSç®€ä»‹DDoS(Distributed Denial of Service) æ˜¯ä¸€ç§æ”»å‡»æ–¹å¼ï¼Œä¸­æ–‡ç¿»è¯‘ä¸ºåˆ†å¸ƒå¼æ‹’ç»æœåŠ¡ã€‚DDoSæ”»å‡»é€šè¿‡åˆ©ç”¨å¤§é‡çš„è®¡ç®—æœºæˆ–è®¾å¤‡å‘ç›®æ ‡ç½‘ç»œæˆ–æœåŠ¡å™¨å‘é€æµ·é‡çš„è¯·æ±‚ï¼Œä»¥æ¶ˆè€—å…¶å¸¦å®½ã€å¤„ç†å™¨æˆ–å­˜å‚¨ç­‰èµ„æºï¼Œä»è€Œä½¿å…¶æ— æ³•æ­£å¸¸æœåŠ¡ã€‚
ç›¸å…³æ–‡æ¡£ï¼š

WikiPedia - Denial-of-service attack
å¦‚ä½•å‘åŠ¨ DDoS æ”»å‡» | DoS å’Œ DDoS æ”»å‡»å·¥å…·



å¸¸è§é˜²å¾¡æ–¹æ³•
å¢åŠ å¸¦å®½ï¼šæ‰©å¤§å¸¦å®½æ˜¯ä¸€ç§æœ€å¸¸è§çš„DDoSæ”»å‡»é˜²å¾¡æ–¹æ³•ã€‚å¢åŠ å¸¦å®½å¯ä»¥åˆ†æ‘Šæ”»å‡»æµé‡ï¼Œä»è€Œå‡è½»æ”»å‡»å¯¹æœåŠ¡å™¨çš„å½±å“ã€‚
å®‰è£…é˜²ç«å¢™ï¼šé˜²ç«å¢™å¯ä»¥ç›‘æ§å’Œæ§åˆ¶ç½‘ç»œæµé‡ï¼Œè¿‡æ»¤æ‰å¼‚å¸¸æµé‡å’Œæ”»å‡»æµé‡ã€‚é˜²ç«å¢™å¯ä»¥æ ¹æ®ä¸€äº›ç­–ç•¥è¿›è¡Œé…ç½®ï¼Œä¾‹å¦‚é™åˆ¶IPåœ°å€å’Œç«¯å£å·ã€‚
CDNåŠ é€Ÿï¼šCDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰å¯ä»¥å°†é™æ€å’ŒåŠ¨æ€å†…å®¹ç¼“å­˜åˆ°å…¨çƒå„åœ°çš„èŠ‚ç‚¹ä¸Šï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿæ›´å¿«åœ°è®¿é—®ç½‘ç«™å†…å®¹ã€‚CDNå¯ä»¥é˜²æ­¢DDoSæ”»å‡»ï¼Œå› ä¸ºæ”»å‡»è€…æ— æ³•æ”»å‡»æ‰€æœ‰èŠ‚ç‚¹ã€‚
é˜²DDoSè®¾å¤‡ï¼šé˜²DDoSè®¾å¤‡å¯ä»¥åœ¨æ”»å‡»å¼€å§‹æ—¶è‡ªåŠ¨æ£€æµ‹å¹¶è¿‡æ»¤æ”»å‡»æµé‡ã€‚è¿™äº›è®¾å¤‡å¯ä»¥ä½¿ç”¨å„ç§ç®—æ³•è¿›è¡Œæ”»å‡»æ£€æµ‹å’Œæµé‡åˆ†æï¼Œå¹¶å¯¹æ”»å‡»æµé‡è¿›è¡Œè¿‡æ»¤å’Œé˜»æ­¢ã€‚
ä½¿ç”¨äº‘æœåŠ¡ï¼šäº‘æœåŠ¡æä¾›å•†å¯ä»¥ä½¿ç”¨å¤šä¸ªæ•°æ®ä¸­å¿ƒå’Œé«˜åº¦å¯ç”¨çš„æœåŠ¡æ¥é˜²æ­¢DDoSæ”»å‡»ã€‚é€šè¿‡ä½¿ç”¨äº‘æœåŠ¡ï¼Œç½‘ç«™ç®¡ç†å‘˜å¯ä»¥æ›´å¥½åœ°åˆ†æ‘Šæ”»å‡»æµé‡ï¼ŒåŒæ—¶æé«˜ç½‘ç«™çš„å¯ç”¨æ€§å’Œç¨³å®šæ€§ã€‚

é€‰æ‹©é˜²å¾¡æ–¹æ³•
å¢åŠ å¸¦å®½ï¼šä¸åˆé€‚ã€‚LBæœ¬èº«å°±æ²¡æœ‰å¸¦å®½é™åˆ¶ã€‚
å®‰è£…é˜²ç«å¢™ï¼šä¸åˆé€‚ã€‚è…¾è®¯äº‘WAFå¤ªè´µï¼ˆ3880å…ƒ/æœˆ - 28880å…ƒ/æœˆï¼‰ï¼Œé˜²æ­¢DDoSæœåŠ¡è¿˜è¦å•ç‹¬è´­ä¹°ï¼ˆ10ä¸‡å…ƒ/å¹´ - 300ä¸‡å…ƒ/å¹´ï¼‰ï¼›è‡ªå·±æ­å»ºDDoSé˜²ç«å¢™ï¼Œéœ€è¦ä¸“èŒçš„å®‰å…¨äººå‘˜å¼€å‘ï¼Œæˆæœ¬æ›´é«˜ã€‚
CDNåŠ é€Ÿï¼šå¤‡é€‰ã€‚é…ç½®ç®€å•ï¼Œä»·æ ¼åˆé€‚ï¼ˆè¿˜æœ‰å…è´¹ç‰ˆï¼‰ã€‚
é˜²DDoSè®¾å¤‡ï¼šä¸åˆé€‚ã€‚ä»·æ ¼æ˜‚è´µï¼ˆä¸Šç™¾ä¸‡ä¸€å°ï¼‰ã€‚
ä½¿ç”¨äº‘æœåŠ¡ï¼šä¸åˆé€‚ã€‚æ²¡æœ‰å¿…è¦æä¾›é‚£ä¹ˆå¼ºçš„è´Ÿè½½èƒ½åŠ›ã€‚

ç»¼ä¸Šï¼Œé€‰æ‹©CDNåŠ é€Ÿè¿›è¡ŒDDoSé˜²æŠ¤ï¼Œæ˜¯æœ€ä¼˜é€‰ã€‚
CDNè°ƒç ”Cloudflare CDNCloudflare CDNé˜²æŠ¤åŸç†Cloudflare CDNåŠ é€Ÿé˜²å¾¡DDoSæ”»å‡»çš„åŸºæœ¬åŸç†ï¼š

åˆ†å¸ƒå¼æ¶æ„ï¼šCloudflareä½¿ç”¨åˆ†å¸ƒå¼çš„CDNæ¶æ„ï¼Œåœ¨å…¨çƒå„åœ°éƒ¨ç½²äº†å¤§é‡çš„æ•°æ®ä¸­å¿ƒå’ŒæœåŠ¡å™¨èŠ‚ç‚¹ã€‚è¿™äº›èŠ‚ç‚¹å¯ä»¥ç¼“å­˜å’Œåˆ†å‘ç½‘ç«™çš„é™æ€å†…å®¹å’ŒåŠ¨æ€å†…å®¹ï¼Œå¹¶æä¾›åŸºäºäº‘ç«¯çš„é˜²å¾¡å’Œå®‰å…¨æœåŠ¡ã€‚
åŸºäºè¡Œä¸ºçš„åˆ†æï¼šCloudflareä½¿ç”¨åŸºäºè¡Œä¸ºçš„åˆ†ææŠ€æœ¯ï¼Œå¯¹è®¿é—®ç½‘ç«™çš„æµé‡è¿›è¡Œå®æ—¶åˆ†æå’Œè¯†åˆ«ã€‚å½“æ£€æµ‹åˆ°å¼‚å¸¸çš„è®¿é—®è¡Œä¸ºæ—¶ï¼Œä¾‹å¦‚å¤§é‡è¯·æ±‚æ¥è‡ªåŒä¸€IPåœ°å€æˆ–åŒä¸€åœ°åŒºçš„è®¿é—®ç­‰ï¼ŒCloudflareä¼šè‡ªåŠ¨å°é”è¿™äº›IPåœ°å€æˆ–åœ°åŒºçš„æµé‡ï¼Œä»¥å‡è½»DDoSæ”»å‡»çš„å½±å“ã€‚
åŸºäºIPåœ°å€çš„è®¿é—®æ§åˆ¶ï¼šCloudflareå¯ä»¥é€šè¿‡è®¾ç½®IPç™½åå•å’Œé»‘åå•ï¼Œé™åˆ¶è®¿é—®ç½‘ç«™çš„IPåœ°å€èŒƒå›´ã€‚è¿™å¯ä»¥å¸®åŠ©é˜»æ­¢ä¸€äº›æ¶æ„IPåœ°å€å’Œæµé‡ï¼Œä»¥ä¿æŠ¤ç½‘ç«™çš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ã€‚
æµé‡é™åˆ¶ï¼šCloudflareå¯ä»¥é™åˆ¶è®¿é—®ç½‘ç«™çš„æµé‡é€Ÿç‡å’Œæ•°é‡ï¼Œä»¥é¿å…è¿‡åº¦çš„æµé‡æ¶ˆè€—å’ŒæœåŠ¡å™¨å´©æºƒã€‚å½“æ£€æµ‹åˆ°DDoSæ”»å‡»çš„æµé‡æ—¶ï¼ŒCloudflareä¼šè‡ªåŠ¨é™åˆ¶æµé‡é€Ÿç‡å’Œæ•°é‡ï¼Œä»¥å‡è½»æ”»å‡»çš„å½±å“ã€‚
DDoSé˜²ç«å¢™ï¼šCloudflareè¿˜æä¾›äº†ä¸€äº›é«˜çº§é˜²å¾¡å’Œé˜²æŠ¤åŠŸèƒ½ï¼Œä¾‹å¦‚Webåº”ç”¨ç¨‹åºé˜²ç«å¢™ï¼ˆWAFï¼‰å’ŒSSLè¯ä¹¦ç­‰ã€‚WAFå¯ä»¥è¯†åˆ«å’Œé˜»æ­¢ä¸€äº›å¸¸è§çš„æ”»å‡»å’Œæ¼æ´ï¼Œä¾‹å¦‚SQLæ³¨å…¥ã€XSSç­‰ã€‚SSLè¯ä¹¦å¯ä»¥ä¸ºç½‘ç«™æä¾›HTTPSåŠ å¯†å’Œèº«ä»½è®¤è¯åŠŸèƒ½ï¼Œä»¥ä¿æŠ¤ç”¨æˆ·çš„éšç§å’Œå®‰å…¨ã€‚

ä½¿ç”¨Cloudflare CDNä¹‹åï¼Œé€šè¿‡digè¿˜èƒ½æ‰¾åˆ°çœŸå®åç«¯æœåŠ¡å™¨å—ï¼Ÿä½¿ç”¨Cloudflare CDNåŠ é€Ÿåï¼Œé€šè¿‡digå‘½ä»¤ï¼ˆæˆ–å…¶ä»–æŸ¥è¯¢DNSè®°å½•çš„å·¥å…·ï¼‰æŸ¥è¯¢åŸŸåè§£æç»“æœï¼Œé€šå¸¸åªèƒ½æŸ¥åˆ°Cloudflareçš„DNSè®°å½•ï¼Œè€Œæ— æ³•ç›´æ¥æŸ¥åˆ°çœŸå®çš„åç«¯æœåŠ¡å™¨ã€‚è¿™æ˜¯å› ä¸ºCloudflare CDNä½¿ç”¨äº†åå‘ä»£ç†å’Œç¼“å­˜æŠ€æœ¯ï¼Œå°†ç½‘ç«™çš„å†…å®¹ç¼“å­˜åœ¨Cloudflareçš„è¾¹ç¼˜èŠ‚ç‚¹ä¸Šï¼Œå¹¶ä½¿ç”¨Cloudflareçš„IPåœ°å€ä½œä¸ºå‰ç«¯å…¥å£ï¼Œè€Œåç«¯çš„çœŸå®æœåŠ¡å™¨åœ°å€é€šå¸¸ä¸ä¼šæš´éœ²åœ¨å¤–éƒ¨ã€‚
Cloudflare CDNæ³¨æ„äº‹é¡¹ä½¿ç”¨Cloudflareçš„CDNåŠ é€Ÿï¼Œå¯ä»¥å®ç°é˜²æŠ¤DDoSã€‚
Cloudflareæ”¶è´¹æ ‡å‡†ï¼š

å…è´¹ç‰ˆï¼šæ”¯æŒDNSè§£æã€DDoSé˜²æŠ¤ã€CDNã€SSLè¯ä¹¦ï¼Œè¶³å¤Ÿæˆ‘ä»¬ä½¿ç”¨äº†ã€‚
ä»˜è´¹Proç‰ˆï¼š25åˆ€/æœˆ
ä»˜è´¹Businessç‰ˆï¼š250åˆ€/æœˆ
ä»˜è´¹Enterpriseç‰ˆï¼š250åˆ€+/æœˆ

å…è´¹ç‰ˆå’Œä»˜è´¹Proç‰ˆï¼Œæ·»åŠ ç«™ç‚¹æ—¶ï¼Œæœ€åä¸€æ­¥ä¼šæç¤ºä¿®æ”¹NSåœ°å€ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥åŸŸåæ‰€æœ‰çš„è§£æéƒ½è¦æ‰˜ç®¡åˆ°Cloudflareï¼Œè¿™å°±å¾ˆä¸å‹å¥½äº†ã€‚å¯¹äºä»˜è´¹Businessç‰ˆå’ŒEnterpriseç‰ˆï¼Œå¦‚æœä¸æƒ³ä¿®æ”¹NSåœ°å€ï¼Œé‚£ä¹ˆå»ºè®®ä½¿ç”¨Partial (CNAME) setupï¼Œé…ç½®æ–¹æ³•å‚è€ƒã€ŠCloudflareé…ç½®æ¦‚è¿°ã€‹ã€‚å¯¹äºå…è´¹ç‰ˆå’Œä»˜è´¹Proç‰ˆï¼Œå¦‚æœä¸æƒ³ä¿®æ”¹NSåœ°å€ï¼Œé‚£ä¹ˆå»ºè®®ä½¿ç”¨Cloudflare for SaaSï¼Œä¸è¿‡è¿™ç§é…ç½®æ–¹å¼å¯èƒ½ä¼šè¢«æ‹¦æˆªï¼Œé¡µé¢å‡ºç° è­¦æ–¹æç¤ºç–‘ä¼¼è¯ˆéª— è”ç³»ç”µè¯ï¼š0592-96110ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

å®‰å…¨ã€æ€§èƒ½å’Œå¯é æ€§ â€”â€” ä¸€ä¸ªè½¯ä»¶åŒ…å…¨éƒ¨æå®š
Partial (CNAME) setup
Cloudflare for SaaS
æœ€æ–°Cloudflareå…è´¹CNAMEå’ŒIPæ¥å…¥æ•™ç¨‹-æ— éœ€ä¿®æ”¹NSç›´æ¥æ¥å…¥Cloudflare

è…¾è®¯äº‘CDNæ”¶è´¹æ–¹å¼ï¼šæŒ‰è®¿é—®æ¬¡æ•°å’Œæµé‡æ”¶è´¹æ˜¯å¦é˜²DDoSï¼šæƒ³è¦é˜²DDoSï¼Œéœ€é¢å¤–è´­ä¹°SCDNï¼ˆæœ€åŸºç¡€å¥—é¤3800å…ƒ/æœˆï¼Œæ”¯æŒ20ä¸ªåŸŸåï¼Œ10Gbpsé˜²æŠ¤ï¼‰
ç»“è®ºï¼šå¯é˜²DDoSï¼Œä»·æ ¼ä¸åˆé€‚
å‚è€ƒæ–‡æ¡£ï¼š

å…¨ç«™åŠ é€Ÿç½‘ç»œ - äº§å“æ¦‚è¿°
å…¨ç«™åŠ é€Ÿç½‘ç»œ - è®¡è´¹è¯´æ˜
å®‰å…¨åŠ é€Ÿ SCDN
SCND - ä»·æ ¼è¯•ç®—

é˜¿é‡Œäº‘CDNæ”¶è´¹æ–¹å¼ï¼šæŒ‰æµé‡è®¡è´¹æ˜¯å¦é˜²DDoSï¼šæƒ³è¦é˜²DDoSï¼Œéœ€é¢å¤–è´­ä¹°è¾¹ç¼˜DDoSï¼ˆ6ä¸‡å—10ä¸ªåŸŸå/æ¯æœˆï¼‰
ç»“è®ºï¼šå¯é˜²DDoSï¼Œä»·æ ¼ä¸åˆé€‚
å‚è€ƒæ–‡æ¡£ï¼š

é˜¿é‡Œäº‘ - CDN
é˜¿é‡Œäº‘ - CDNè®¡è´¹æ¦‚è¿°
å¦‚ä½•å¤„ç†åŠ é€ŸåŸŸåé­å—DDoSæˆ–CCæ”»å‡»é—®é¢˜ï¼Ÿ
é˜¿é‡Œäº‘ - è¾¹ç¼˜DDoSé˜²æŠ¤

AWS CDNæ”¶è´¹æ–¹å¼ï¼šæ¯æœˆå…è´¹1TBæµé‡ï¼Œ1åƒä¸‡è¯·æ±‚ï¼Œè¶…å‡ºéƒ¨åˆ†æ”¶è´¹æ˜¯å¦é˜²DDoSï¼šé˜²DDoS
ç»“è®ºï¼šå¯é˜²DDoSï¼Œå¤‡é€‰
å‚è€ƒæ–‡æ¡£ï¼š

Amazon CloudFront
Amazon CloudFront å®šä»·

Azure CDNæ”¶è´¹æ–¹å¼ï¼šæŒ‰æµé‡ã€è¯·æ±‚é‡å’Œè§„åˆ™æ•°é‡æ”¶è´¹ï¼ˆè¾ƒè´µ)æ˜¯å¦é˜²DDoSï¼šé˜²DDoS
ç»“è®ºï¼šå¯é˜²DDoSï¼Œä»·æ ¼ä¸åˆé€‚
å‚è€ƒæ–‡æ¡£

Azure å†…å®¹åˆ†å‘ç½‘ç»œ
å†…å®¹åˆ†å‘ç½‘ç»œå®šä»·

å°ç»“ç»¼ä¸Šï¼Œä»ä»·æ ¼æ–¹é¢è€ƒè™‘ï¼Œæœ€åˆé€‚çš„é€‰æ‹©æ˜¯Cloudflare CDNï¼Œå…¶æ¬¡æ˜¯AWS CDNã€‚
æ‰©å±•é˜…è¯»è…¾è®¯äº‘é˜²æŠ¤äº§å“è…¾è®¯äº‘CLBè…¾è®¯äº‘CLBä¾é å¤§ç¦¹åˆ†å¸ƒå¼é˜²å¾¡ç³»ç»Ÿèƒ½å¤Ÿé˜²å¾¡ç»å¤§å¤šæ•°ç½‘ç»œæ”»å‡»ï¼ˆä¾‹å¦‚ DDoSã€Web å…¥ä¾µï¼‰ï¼Œé’ˆå¯¹æµé‡æ”»å‡»å®ç°ç§’çº§æ¸…æ´—ï¼Œæå¤§é¿å… IP è¢«å°ã€å¸¦å®½è¢«å æ»¡ç­‰æƒ…å†µå‘ç”Ÿã€‚CLB è‡ªå¸¦çš„ synproxy é˜²æ”»å‡»æœºåˆ¶ï¼Œé¿å…äº†å¤§ç¦¹ç³»ç»Ÿç”Ÿæ•ˆä¹‹å‰åç«¯ CVM è¢«æ”»å‡»å‹å®ï¼Œä¿æŠ¤æ•°æ®æ›´å®‰å…¨ç¨³å®šã€‚CLB å¯¹æ¯ä¸ªç§Ÿæˆ·çš„æµé‡è¿›è¡Œä¸¥æ ¼éš”ç¦»ï¼Œæä¾›ä¸»åŠ¨ DDoS é˜²æŠ¤èƒ½åŠ›ï¼Œå…¬ç½‘ CLB é»˜è®¤æ”¯æŒ DDoS åŸºç¡€é˜²æŠ¤ã€‚CLB è¿˜æ”¯æŒ DDoS é«˜é˜²åŒ…ã€DDoS é«˜é˜² IPã€Web åº”ç”¨é˜²ç«å¢™ ç­‰å¤šç§å®‰å…¨äº§å“ï¼Œä¿éšœä¸šåŠ¡å®‰å…¨æ€§ã€‚
ä»·æ ¼ï¼šå…è´¹
è…¾è®¯äº‘WAFè…¾è®¯äº‘ Web åº”ç”¨é˜²ç«å¢™ï¼ˆWeb Application Firewallï¼ŒWAFï¼‰æ˜¯ä¸€æ¬¾åŸºäº AI çš„ä¸€ç«™å¼ Web ä¸šåŠ¡è¿è¥é£é™©é˜²æŠ¤æ–¹æ¡ˆã€‚é€šè¿‡ AI+è§„åˆ™åŒå¼•æ“è¯†åˆ«æ¶æ„æµé‡ï¼Œä¿æŠ¤ç½‘ç«™å®‰å…¨ï¼Œæé«˜ Web ç«™ç‚¹çš„å®‰å…¨æ€§å’Œå¯é æ€§ã€‚é€šè¿‡ BOT è¡Œä¸ºåˆ†æï¼Œé˜²å¾¡æ¶æ„è®¿é—®è¡Œä¸ºï¼Œä¿æŠ¤ç½‘ç«™æ ¸å¿ƒä¸šåŠ¡å®‰å…¨å’Œæ•°æ®å®‰å…¨ã€‚è…¾è®¯äº‘ WAF æä¾›ä¸¤ç§ç±»å‹çš„äº‘ä¸Š WAFï¼ŒSaaS å‹ WAF å’Œè´Ÿè½½å‡è¡¡å‹ WAFï¼Œä¸¤ç§ WAF æä¾›çš„å®‰å…¨é˜²æŠ¤èƒ½åŠ›åŸºæœ¬ç›¸åŒï¼Œæ¥å…¥æ–¹å¼ä¸åŒã€‚

SaaS å‹ WAF é€šè¿‡ DNS è§£æï¼Œå°†åŸŸåè§£æåˆ° WAF é›†ç¾¤æä¾›çš„ CNAME åœ°å€ä¸Šï¼Œé€šè¿‡ WAF é…ç½®æºç«™æœåŠ¡å™¨ IPï¼Œå®ç°åŸŸåæ¶æ„æµé‡æ¸…æ´—å’Œè¿‡æ»¤ï¼Œå°†æ­£å¸¸æµé‡å›æºåˆ°æºç«™ï¼Œä¿æŠ¤ç½‘ç«™å®‰å…¨ã€‚
è´Ÿè½½å‡è¡¡å‹ WAF é€šè¿‡å’Œè…¾è®¯äº‘è´Ÿè½½å‡è¡¡é›†ç¾¤è¿›è¡Œè”åŠ¨ï¼Œå°†è´Ÿè½½å‡è¡¡çš„ HTTP/HTTPS æµé‡é•œåƒåˆ° WAF é›†ç¾¤ï¼ŒWAF è¿›è¡Œæ—è·¯å¨èƒæ£€æµ‹å’Œæ¸…æ´—ï¼Œå°†ç”¨æˆ·è¯·æ±‚çš„å¯ä¿¡çŠ¶æ€åŒæ­¥åˆ°è´Ÿè½½å‡è¡¡é›†ç¾¤è¿›è¡Œå¨èƒæ‹¦æˆªæˆ–æ”¾è¡Œï¼Œå®ç°ç½‘ç«™å®‰å…¨é˜²æŠ¤ã€‚

è…¾è®¯äº‘ WAF å¯ä»¥æœ‰æ•ˆé˜²å¾¡ SQL æ³¨å…¥ã€XSS è·¨ç«™è„šæœ¬ã€æœ¨é©¬ä¸Šä¼ ã€éæˆæƒè®¿é—®ç­‰ OWASP æ”»å‡»ã€‚æ­¤å¤–è¿˜å¯ä»¥æœ‰æ•ˆè¿‡æ»¤ CC æ”»å‡»ã€æä¾› 0day æ¼æ´è¡¥ä¸ã€é˜²æ­¢ç½‘é¡µç¯¡æ”¹ç­‰ï¼Œé€šè¿‡å¤šç§æ‰‹æ®µå…¨æ–¹ä½ä¿æŠ¤ç½‘ç«™çš„ç³»ç»Ÿä»¥åŠä¸šåŠ¡å®‰å…¨ã€‚
ä»·æ ¼ï¼š3880å…ƒ/æœˆ - 28880å…ƒ/æœˆ
DDoSé˜²æŠ¤DDoS åŸºç¡€é˜²æŠ¤æ˜¯è…¾è®¯äº‘å…è´¹ä¸ºäº‘æœåŠ¡å™¨ï¼ˆCloud Virtual Machineï¼ŒCVMï¼‰ã€è´Ÿè½½å‡è¡¡ï¼ˆCloud Load Balancerï¼ŒCLBï¼‰ç­‰èµ„æºæä¾›çš„åŸºç¡€ DDoS é˜²æŠ¤èƒ½åŠ›ï¼Œæ»¡è¶³æ—¥å¸¸å®‰å…¨è¿è¥éœ€æ±‚ã€‚æ™®é€šç”¨æˆ·é»˜è®¤å¯äº«å—ä¸è¶…è¿‡2Gbpsé˜²æŠ¤ï¼ŒVIP ç”¨æˆ· å¯äº«å—ä¸è¶…è¿‡10Gbpsé˜²æŠ¤ï¼Œå¢ƒå¤–åœ°åŒºå¯äº«å—ä¸è¶…è¿‡2Gbpsé˜²æŠ¤ã€‚è…¾è®¯äº‘ä¼šæ ¹æ®ç”¨æˆ·çš„å®‰å…¨ä¿¡èª‰çŠ¶æ€ï¼ŒåŠ¨æ€è°ƒæ•´å°å µé˜ˆå€¼ã€‚å®‰å…¨ä¿¡èª‰çŠ¶æ€ä¸å†å²æ”»å‡»æƒ…å†µã€äº‘ä¸ŠåŸºç¡€èµ„æºä¿¡æ¯ç­‰ç›¸å…³ã€‚å®‰å…¨ä¿¡èª‰è¿‡ä½ä¼šå½±å“ç”¨æˆ·çš„å…è´¹é˜²æŠ¤èƒ½åŠ›ï¼Œç›´åˆ°åç»­å®‰å…¨ä¿¡èª‰æ¢å¤ã€‚DDoS åŸºç¡€é˜²æŠ¤é»˜è®¤å¼€å¯ï¼Œå®æ—¶ç›‘æ§ç½‘ç»œæµé‡ï¼Œå‘ç°æ”»å‡»ç«‹å³æ¸…æ´—ï¼Œä¸ºè…¾è®¯äº‘ä¸Šå…¬ç½‘ IP ç§’çº§å¼€å¯é˜²æŠ¤ã€‚
é™¤äº†åŸºç¡€é˜²æŠ¤ï¼Œç”¨æˆ·è¿˜å¯ä»¥æŒ‰éœ€é€‰è´­è½»é‡ç‰ˆé«˜é˜²åŒ…ã€DDoS é«˜é˜²åŒ…ã€DDoS é«˜é˜² IPï¼ˆä¸­å›½å¤§é™†ï¼‰ã€DDoS é«˜é˜² IPï¼ˆå¢ƒå¤–ï¼‰ã€DDoS é«˜é˜² IPï¼ˆå¢ƒå¤–ä¼ä¸šç‰ˆï¼‰ã€‚
ä»˜è´¹ç‰ˆä»·æ ¼ï¼š10ä¸‡å…ƒ/å¹´ - 300ä¸‡å…ƒ/å¹´
]]></content>
      <categories>
        <category>engineering</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>chatgpt</tag>
        <tag>ç½‘ç»œ</tag>
        <tag>å®‰å…¨</tag>
        <tag>é»‘å®¢</tag>
      </tags>
  </entry>
  <entry>
    <title>Webå®‰å…¨ä¹‹HTTPè¯·æ±‚æŠ“åŒ…</title>
    <url>/dev-web-security-http-packetcapture/</url>
    <content><![CDATA[å‰è¨€æœ€è¿‘åœ¨ç ”è¯»ã€ŠWebå®‰å…¨æ·±åº¦å‰–æã€‹å’Œã€ŠWebå®‰å…¨æ·±åº¦å‰–æã€‹ï¼Œå…¶ä¸­çš„ä¸€äº›å®è·µå¾ˆæœ‰æ„æ€ï¼Œåšä¸‹è®°å½•ã€‚


å‘é€HTTPè¯·æ±‚æµè§ˆå™¨ä½¿ç”¨æµè§ˆå™¨ï¼Œè¾“å…¥ç½‘å€è®¿é—®ç½‘ç«™ï¼Œå°±å‘èµ·äº†HTTPè¯·æ±‚ã€‚
curlå¦‚æœä¸å€ŸåŠ©æµè§ˆå™¨ï¼Œä½¿ç”¨ä¸€äº›å‘½ä»¤ï¼Œä¹Ÿå¯ä»¥å‘èµ·HTTPè¯·æ±‚ï¼Œæ¯”å¦‚curlå‘½ä»¤ã€‚åœ¨Windowsä¸‹ï¼Œéœ€è¦å•ç‹¬å®‰è£…ã€‚ä¸‹è½½åœ°å€ï¼šhttps://curl.haxx.se/download.html ã€‚
å®‰è£…æˆåŠŸåï¼Œæˆ‘ä»¬å‘èµ·ä¸€ä¸ªHTTPè¯·æ±‚ï¼š
curl www.baidu.com
è¿”å›çš„å†…å®¹æ˜¯ä¹±ç ã€‚æ˜¯Windowsçš„é—®é¢˜ï¼Ÿæ¢æˆLinuxï¼Œä¾ç„¶æ˜¯ä¹±ç ã€‚åæ¥æŸ¥åˆ°ï¼Œä»ç™¾åº¦è·å–åˆ°çš„æ–‡ä»¶ï¼Œå®é™…ä¸Šæ˜¯ç»è¿‡å‹ç¼©çš„ï¼Œéœ€è¦è§£å‹ç¼©ï¼Œæ¢æˆå‘½ä»¤ï¼š
curl www.baidu.com | gunzip
ä¹±ç é—®é¢˜è§£å†³ï¼Œä½†æ˜¯ä¸­æ–‡ä¾ç„¶æ˜¯ä¹±ç ï¼Œå…ˆä¸ç®¡å®ƒã€‚
telnetä½¿ç”¨telnetå‘½ä»¤ä¹Ÿå¯ä»¥å‘èµ·HTTPè¯·æ±‚ã€‚
1ã€win+Rï¼Œè¾“å…¥appwiz.cplï¼Œå›è½¦ï¼Œæ‰“å¼€æˆ–å…³é—­WindowsåŠŸèƒ½ï¼Œå‹¾é€‰Telnetå®¢æˆ·ç«¯ï¼Œç¡®å®šã€‚2ã€æ‰“å¼€CMDè¿è¡Œæ¡†ï¼Œè¾“å…¥telnet www.baidu.com 80ï¼Œç„¶ååˆ©ç”¨å¿«æ·é”®â€œctrl+]â€æ¥æ‰“å¼€telnetå›æ˜¾ã€‚3ã€æŒ‰å›è½¦é”®ï¼Œè¿›å…¥ç¼–è¾‘çŠ¶æ€ã€‚4ã€è¾“å…¥GET /index.html HTTP/1.1ï¼ŒæŒ‰å›è½¦é”®ï¼Œæ¥ç€è¾“å…¥HOST:www.baidu.comï¼Œå†è¿ç»­ä¸¤æ¬¡æŒ‰å›è½¦é”®ã€‚æ²¡é”™ï¼ŒWindowsä¸‹ä¸­æ–‡ä¾ç„¶æ˜¯ä¹±ç ï¼Œåœ¨CentOS7ä¸‹è¯•è¯•ï¼š
HTTPæŠ“åŒ…WireSharkå‚è€ƒæ–‡æ¡£ï¼šã€ŠWiresharkå…¥é—¨ç¯‡ã€‹
FiddlerFiddleræ˜¯ä¸€æ¬¾ä¼˜ç§€çš„Webè°ƒè¯•å·¥å…·ï¼Œå®ƒå¯ä»¥è®°å½•æ‰€æœ‰çš„æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ä¿¡æ¯ï¼ˆHTTPå’ŒHTTPSï¼‰ï¼Œå¹¶ä¸”å…è®¸ä½ è®¾ç½®æ–­ç‚¹ï¼Œä¿®æ”¹è¾“å…¥/è¾“å‡ºæ•°æ®ã€‚å®˜æ–¹ä¸‹è½½åœ°å€ï¼šhttp://www.telerik.com/fiddler
1ã€ç›‘å¬HTTPè¯·æ±‚å®‰è£…å®Œæˆåï¼Œæ— éœ€ä»»ä½•è®¾ç½®ï¼ŒFiddlerå°±å¯ä»¥ç›‘å¬æ‰€æœ‰æµè§ˆå™¨å’Œå…¶ä»–åº”ç”¨ï¼ˆæ¯”å¦‚360ã€QQï¼‰å‘å‡ºçš„HTTPè¯·æ±‚å’Œå“åº”ã€‚
2ã€ç›‘å¬HTTPSè¯·æ±‚Fiddleré»˜è®¤ä¸è®°å½•HTTPSè¯·æ±‚ï¼Œé€‰æ‹©Toolsï¼ŒFiddler Optionsï¼ŒHTTPSï¼Œå‹¾é€‰Decrypt HTTPS trafficå¤é€‰æ¡†ï¼Œå•å‡»OKã€‚
3ã€è®¾ç½®æ–­ç‚¹æ–¹æ³•ä¸€ï¼šé€šè¿‡Rulesï¼ŒAutomatic Breakpointsï¼Œé€‰æ‹©æ–­ç‚¹çš„æ’å…¥ç‚¹ï¼Œä¸‰ä¸ªé€‰é¡¹åˆ†åˆ«æ˜¯è¯·æ±‚ä¹‹å‰ã€å“åº”ä¹‹åå’Œä¸æ‹¦æˆªã€‚æ’å…¥æ–­ç‚¹ä¹‹åï¼Œä¼šåº”ç”¨åˆ°æ‰€æœ‰çš„è¯·æ±‚å’Œå“åº”ã€‚
æ–¹æ³•äºŒï¼šé€šè¿‡å‘½ä»¤è¿›è¡Œæ–­ç‚¹è®¾ç½®ã€‚ä¾‹å¦‚ï¼Œbpu www.baidu.comï¼Œä¼šæ‹¦æˆªæ‰€æœ‰å‘å¾€www.baidu.comçš„è¯·æ±‚ï¼›bpafter www.baidu.comï¼Œä¼šæ‹¦æˆªæ‰€æœ‰æ¥è‡ªwww.baidu.comçš„å“åº”ï¼›bpuå’Œbpaï¼Œä¼šæ¸…é™¤æ–­ç‚¹ã€‚
è®¾ç½®å®Œæ–­ç‚¹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å’Œä½¿ç”¨Burpä¸€æ ·ï¼Œæ¥æ‹¦æˆªHTTPè¯·æ±‚å¹¶ä¸”ä¿®æ”¹è¯·æ±‚ä¿¡æ¯äº†ã€‚
4ã€ä¸è¦è¯¯æ»‘æ»šè½®æˆ‘ä»¬å¯ä»¥åˆ©ç”¨Fiddlerè‡ªå·±å®šä¹‰è¿”å›ç»™æµè§ˆå™¨çš„å†…å®¹ï¼Œéå¸¸æ–¹ä¾¿ã€‚ä½†æ˜¯ï¼Œåªè¦ç‚¹å‡»â€œBreak on Responseâ€ï¼Œå¹¶ä¸”æ»‘åŠ¨æ»šè½®ï¼Œè‡ªå®šä¹‰å†…å®¹å°±é»˜è®¤è®¾ç½®ä¸ºä¸€å¼ å›¾ç‰‡ï¼Œä½ å¯ä»¥é€‰æ‹©å…¶ä»–è‡ªå®šä¹‰è¿”å›çš„å†…å®¹ï¼Œä½†æ˜¯ï¼Œæ— æ³•å†æ­£å¸¸è¿”å›ã€‚æ‰€ä»¥ï¼Œåˆ‡è®°ä¸è¦è¯¯æ»‘æ»šè½®ï¼ï¼ï¼
5ã€ä¸­æ–‡ä¹±ç åœ¨responseä¿¡æ¯ä¸­ï¼Œç»å¸¸å¯ä»¥çœ‹åˆ°ä¹±ç ã€‚å› ä¸ºFiddleræ˜¯é»˜è®¤æŒ‰ç…§UTF-8ç¼–ç è§£ç çš„ï¼Œä½†æ˜¯å¾ˆå¤šç½‘ç«™é‡‡ç”¨çš„æ˜¯GB2312/GBK/GB18030ç¼–ç ï¼Œå´æ²¡æœ‰åœ¨HEADERä¸­æŒ‡æ˜ç¼–ç æ–¹å¼ã€‚
è§£å†³åŠæ³•ï¼šæ‰“å¼€æ³¨å†Œè¡¨ç¼–è¾‘å™¨ï¼Œæ‰¾åˆ°HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Fiddler2\ï¼Œæ·»åŠ å­—ç¬¦ä¸²å€¼HeaderEncodingï¼Œvalueä¸ºGB18030ï¼Œç„¶åé‡å¯Fiddlerã€‚ä½†æ˜¯è¿™æ ·ä¸€æ¥ï¼ŒUTF-8ç¼–ç å¹¶ä¸”æ²¡æœ‰æŒ‡æ˜ç¼–ç æ–¹å¼çš„æ–‡ä»¶ï¼Œä¸å°±å˜æˆäº†ä¹±ç äº†ä¹ˆï¼Ÿæ‰€ä»¥ï¼Œå»ºè®®ä¸è¦ä¿®æ”¹ã€‚
6ã€å‘èµ·HTTPè¯·æ±‚Fiddlerï¼Œå¯ä»¥ä»£æ›¿HttpRequesterï¼Œç”¨æ¥æµ‹è¯•æ¥å£ã€‚
Burp Suite ProxyBurp Suiteæ˜¯ç”¨äºWebåº”ç”¨å®‰å…¨æµ‹è¯•å·¥å…·çš„é›†æˆå¹³å°ï¼Œä¸‹è½½åœ°å€ï¼šhttps://portswigger.net/burp/download.html
1ã€é…ç½®ç½‘ç»œä»£ç†ã€‚åŒå‡»BurpLoader.jarï¼Œé€‰æ‹©â€œProxyâ€é€‰é¡¹å¡ï¼Œç„¶åé€‰æ‹©â€œOptionsâ€é€‰é¡¹å¡ï¼Œç‚¹å‡»AddæŒ‰é’®ï¼Œåœ¨â€œBind to portâ€æ¡†ä¸­è¾“å…¥ç«¯å£å·6666ï¼Œâ€œBind to addressâ€é€‰æ‹©â€œLoopback onlyâ€ï¼Œç„¶åå•å‡»â€œOKâ€æŒ‰é’®ã€‚
æ‰“å¼€ç«ç‹æµè§ˆå™¨ï¼Œé€‰é¡¹ï¼Œé«˜çº§ï¼Œç½‘ç»œï¼Œè®¾ç½®ï¼Œæ‰‹åŠ¨é…ç½®ä»£ç†ã€‚åœ¨HTTPä»£ç†æ¡†ä¸­è¾“å…¥127.0.0.1ï¼Œç«¯å£å·ä¸º6666ï¼Œå…¶ä»–ä¸ç”¨é…ç½®ï¼Œå•å‡»â€œç¡®å®šâ€ã€‚
2ã€æŸ¥çœ‹æ‹¦æˆªä¿¡æ¯ã€‚åœ¨ç«ç‹æµè§ˆå™¨ä¸­ï¼Œè¾“å…¥www.baidu.comï¼Œå›è½¦åå‘ç°æœåŠ¡å™¨å¾ˆä¹…æ²¡æœ‰å›åº”ä¿¡æ¯ï¼ŒåŸå› æ˜¯BurpæŠŠHTTPè¯·æ±‚æ‹¦æˆªäº†ï¼Œæ­¤æ—¶æµè§ˆå™¨ä¼šå¤„äºé˜»å¡çŠ¶æ€ã€‚æŸ¥çœ‹Burpçš„Intercepté€‰é¡¹å¡ï¼Œå¯ä»¥çœ‹åˆ°è¯·æ±‚ä¿¡æ¯ã€‚
3ã€ç»•è¿‡å‰ç«¯éªŒè¯ã€‚å¯åŠ¨wampæœåŠ¡å™¨ï¼Œåœ¨ç«ç‹æµè§ˆå™¨è®¿é—®æˆ‘ä»¬è‡ªå·±å†™çš„ç™»å½•é¡µé¢ã€‚å‘ç°è¯·æ±‚é¡µé¢å¹¶æ²¡æœ‰è¢«æ‹¦æˆªï¼Œä¿®æ”¹ç«ç‹ä»£ç†é…ç½®ã€‚å†æ¬¡è®¿é—®ç™»å½•é¡µé¢ï¼Œé¡µé¢è¢«æ‹¦æˆªï¼Œåœ¨Burpä¸­ç‚¹å‡»â€œForwordâ€ï¼Œè·³è½¬åˆ°ä¸‹ä¸€æ­¥ã€‚å½“æˆ‘ä»¬è¾“å…¥çš„ç”¨æˆ·åæˆ–å¯†ç ä¸ºç©ºæ—¶ï¼Œå‰ç«¯ä¼šå‡ºç°æç¤ºã€‚å½“æˆ‘ä»¬æ­£å¸¸è¾“å…¥ç”¨æˆ·åå’Œå¯†ç æ—¶ï¼Œåœ¨Burpä¸­æ‹¦æˆªä¿¡æ¯ã€‚ç„¶åä¿®æ”¹ä¿¡æ¯ä¸ºï¼šç‚¹å‡»â€œForwardâ€ï¼Œå‰ç«¯å‡ºç°ç™»å½•ç»“æœã€‚è¿™ä¸ªè¯·æ±‚ï¼Œå°±ç»•è¿‡äº†å‰ç«¯éªŒè¯ï¼Œå‘é€äº†ç©ºçš„ç”¨æˆ·åå’Œå¯†ç ç»™åç«¯ã€‚
4ã€æ‹¦æˆªå“åº”å¦‚æœæˆ‘ä»¬æƒ³è¦æ‹¦æˆªæœåŠ¡å™¨çš„å“åº”ä¿¡æ¯ï¼Œé‚£ä¹ˆï¼Œåœ¨Proxyï¼ŒOptionsé€‰é¡¹å¡ä¸­ï¼Œå‹¾é€‰Intercept response based on the following ruleså³å¯ã€‚
WinSock ExpertWinsock Expertæ˜¯ä¸€ä¸ªç”¨æ¥ç›‘è§†å’Œä¿®æ”¹ç½‘ç»œå‘é€å’Œæ¥æ”¶æ•°æ®çš„ç¨‹åºï¼Œå¯ä»¥ç”¨æ¥å¸®åŠ©æ¸—é€æµ‹è¯•äººå‘˜è°ƒè¯•ç½‘ç»œåº”ç”¨ç¨‹åºã€‚
ä¹¦ç­¾
FreeBuf.COM | å…³æ³¨é»‘å®¢ä¸æå®¢
æ¼æ´ç›’å­ | äº’è”ç½‘å®‰å…¨æµ‹è¯•å¹³å°
Fiddler é«˜çº§ç”¨æ³•ï¼šFiddler Script ä¸ HTTP æ–­ç‚¹è°ƒè¯•
Fiddlerå·¥å…·ä½¿ç”¨
web debugger fiddler ä½¿ç”¨å°ç»“
ã€ŠWiresharkåè®®åˆ†æä»å…¥é—¨åˆ°ç²¾é€šã€‹

]]></content>
      <categories>
        <category>engineering</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>centos</tag>
        <tag>å®‰å…¨</tag>
        <tag>é»‘å®¢</tag>
      </tags>
  </entry>
  <entry>
    <title>shellå‘½ä»¤ä¹‹route</title>
    <url>/dev-shell-route/</url>
    <content><![CDATA[routeå‘½ä»¤ç®€ä»‹æœ¬æ–‡å†…å®¹ä¸»è¦æ¥è‡ªChatGPTã€‚
routeå‘½ä»¤ç”¨äºåœ¨Linuxæ“ä½œç³»ç»Ÿä¸­æ˜¾ç¤ºå’Œæ“ä½œIPè·¯ç”±è¡¨ã€‚è·¯ç”±è¡¨æ˜¯ä¸€ä¸ªå­˜å‚¨åœ¨æ“ä½œç³»ç»Ÿå†…æ ¸ä¸­çš„è¡¨æ ¼ï¼Œç”¨äºç¡®å®šæ•°æ®åŒ…åº”è¯¥å¦‚ä½•ä»ä¸€ä¸ªç½‘ç»œæ¥å£å‘é€åˆ°å¦ä¸€ä¸ªç½‘ç»œæ¥å£ã€‚routeå‘½ä»¤å¯ä»¥å¸®åŠ©æˆ‘ä»¬æŸ¥çœ‹ã€æ·»åŠ ã€åˆ é™¤å’Œä¿®æ”¹è·¯ç”±è¡¨ä¸­çš„æ¡ç›®ã€‚è¿™å¯¹äºç½‘ç»œé…ç½®å’Œæ•…éšœæ’é™¤éå¸¸æœ‰ç”¨ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

linux è·¯ç”±è¡¨è®¾ç½®ä¹‹ route æŒ‡ä»¤è¯¦è§£
ã€Šiptableså…¥é—¨ç¯‡ã€‹



routeå‘½ä»¤è¯­æ³•route å‘½ä»¤çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š
route [é€‰é¡¹] [å‚æ•°]

ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„é€‰é¡¹ï¼š

-n: ä»¥æ•°å­—å½¢å¼æ˜¾ç¤ºIPåœ°å€å’Œè·¯ç”±ä¿¡æ¯ã€‚
-e: ä»¥ç±»ä¼¼netstatçš„æ ¼å¼æ˜¾ç¤ºè·¯ç”±ä¿¡æ¯ã€‚
-A &lt;åœ°å€ç±»å‹&gt;: æŒ‡å®šåœ°å€ç±»å‹ï¼Œå¦‚ inetï¼ˆIPv4ï¼‰æˆ– inet6ï¼ˆIPv6ï¼‰ã€‚
-v: æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ã€‚

ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„å‚æ•°ï¼š

add: æ·»åŠ ä¸€æ¡æ–°çš„è·¯ç”±ã€‚
del: åˆ é™¤ä¸€æ¡ç°æœ‰çš„è·¯ç”±ã€‚
flush: æ¸…ç©ºæ‰€æœ‰è·¯ç”±ã€‚

routeå¸¸ç”¨å‘½ä»¤æŸ¥çœ‹å½“å‰è·¯ç”±è¡¨route -n

æ·»åŠ /åˆ é™¤é™æ€è·¯ç”±å·²çŸ¥ä¸»æœºAçš„IPä¸º172.16.0.2å’Œ192.168.0.2ï¼Œé»˜è®¤ç½‘å…³Aä¸º172.16.0.1ã€‚ä¸»æœºAåŒæ—¶å’Œç½‘å…³B 192.168.0.1è¿é€šï¼Œç½‘å…³Bè¿é€š 192.168.0.0/24 å’Œ 192.168.1.0/24ã€‚
æ·»åŠ ä¸€æ¡é™æ€è·¯ç”±ï¼Œä½¿ä¸»æœºAè¿é€š 192.168.1.0/24
route add -net ç›®æ ‡ç½‘ç»œåœ°å€ netmask å­ç½‘æ©ç  gw ç½‘å…³åœ°å€ dev ç½‘ç»œè®¾å¤‡route add -net 192.168.1.0 netmask 255.255.255.0 gw 192.168.0.1 dev eth0

åˆ é™¤ä¸€æ¡é™æ€è·¯ç”±ï¼Œä½¿ä¸»æœºAä¸è¿é€š 192.168.1.0/24
route del -net ç›®æ ‡ç½‘ç»œåœ°å€ netmask å­ç½‘æ©ç  gw ç½‘å…³åœ°å€ dev ç½‘ç»œè®¾å¤‡route del -net 192.168.1.0 netmask 255.255.255.0 gw 192.168.0.1 dev eth0

æ·»åŠ /åˆ é™¤é»˜è®¤è·¯ç”±æ·»åŠ é»˜è®¤è·¯ç”±
route add default gw ç½‘å…³åœ°å€route add default gw 192.168.0.1route add default gw 192.168.0.1 dev eth0

åˆ é™¤é»˜è®¤è·¯ç”±ï¼Œå¸¸ç”¨æ¥æ–­ç½‘ï¼ˆå‡ºæµé‡ï¼‰
route del default gw ç½‘å…³åœ°å€route del default gw 192.168.0.1

route å’Œ iptablesrouteå’Œiptablesæ˜¯Linuxç³»ç»Ÿä¸­ä¸¤ä¸ªä¸åŒçš„ç½‘ç»œé…ç½®å·¥å…·ï¼Œå®ƒä»¬æœ‰ä»¥ä¸‹åŒºåˆ«ï¼š

routeä¸»è¦ç”¨äºå¤„ç†IPè·¯ç”±è¡¨ï¼Œå³å†³å®šæ•°æ®åŒ…åº”è¯¥å¦‚ä½•ä»ä¸€ä¸ªç½‘ç»œæ¥å£å‘é€åˆ°å¦ä¸€ä¸ªç½‘ç»œæ¥å£ã€‚è·¯ç”±è¡¨ç”¨äºæ§åˆ¶ä¸åŒç½‘ç»œä¹‹é—´çš„æ•°æ®åŒ…ä¼ è¾“ã€‚
iptablesæ˜¯Linuxç³»ç»Ÿä¸­çš„é˜²ç«å¢™å·¥å…·ï¼Œç”¨äºæ§åˆ¶å’Œç®¡ç†æ•°æ®åŒ…åœ¨ç½‘ç»œå±‚çš„è®¿é—®æ§åˆ¶ã€‚iptableså¯ä»¥æ ¹æ®æºIPã€ç›®çš„IPã€åè®®ç­‰ä¿¡æ¯å¯¹æ•°æ®åŒ…è¿›è¡Œè¿‡æ»¤ã€è½¬å‘æˆ–ä¿®æ”¹ã€‚

å°½ç®¡routeå’Œiptablesçš„ä½œç”¨ä¸åŒï¼Œä½†å®ƒä»¬åœ¨ç½‘ç»œé…ç½®å’Œæ•…éšœæ’é™¤æ–¹é¢æ˜¯ç›¸è¾…ç›¸æˆçš„ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›routeå’Œiptablesåœ¨å®é™…åº”ç”¨ä¸­çš„ä¾‹å­ï¼š

è´Ÿè½½å‡è¡¡ï¼šæ‚¨å¯ä»¥ä½¿ç”¨iptableså°†ç‰¹å®šçš„æ•°æ®æµé‡è½¬å‘åˆ°ä¸åŒçš„æœåŠ¡å™¨ä»¥å®ç°è´Ÿè½½å‡è¡¡ï¼ŒåŒæ—¶ä½¿ç”¨routeæ¥é…ç½®æœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œè·¯å¾„ã€‚
ç½‘ç»œéš”ç¦»ï¼šåœ¨éœ€è¦å¯¹ä¸åŒå­ç½‘è¿›è¡Œè®¿é—®æ§åˆ¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨routeä¸ºä¸åŒçš„å­ç½‘é…ç½®ä¸åŒçš„è·¯ç”±ï¼Œç„¶åä½¿ç”¨iptablesæ¥é™åˆ¶æˆ–å…è®¸ç‰¹å®šå­ç½‘ä¹‹é—´çš„é€šä¿¡ã€‚
VPN é…ç½®ï¼šåœ¨é…ç½®VPNæ—¶ï¼Œrouteç”¨äºè®¾ç½®VPNæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¹‹é—´çš„è·¯ç”±ï¼Œè€Œiptablesç”¨äºé…ç½®é˜²ç«å¢™è§„åˆ™ï¼Œä»¥ä¾¿æ­£ç¡®å¤„ç†åŠ å¯†å’Œè§£å¯†çš„æ•°æ®åŒ…ã€‚
ç½‘ç»œå®‰å…¨ï¼šrouteå’Œiptableså¯ä»¥å…±åŒå®ç°ç½‘ç»œå®‰å…¨ç­–ç•¥ã€‚ä¾‹å¦‚ï¼Œrouteç”¨äºé…ç½®æ•°æ®åŒ…å‘é€çš„è·¯å¾„ï¼Œè€Œiptablesåˆ™ç”¨äºæ£€æŸ¥æ•°æ®åŒ…çš„å†…å®¹ï¼Œé˜»æ­¢æ¶æ„æµé‡è¿›å…¥ç½‘ç»œã€‚

æ€»ä¹‹ï¼Œrouteå’Œiptablesè™½ç„¶åˆ†åˆ«å¤„ç†è·¯ç”±è¡¨å’Œé˜²ç«å¢™è§„åˆ™ï¼Œä½†å®ƒä»¬åœ¨å®é™…åº”ç”¨ä¸­éœ€è¦ç›¸äº’é…åˆï¼Œå…±åŒå®ç°æ›´åŠ é«˜æ•ˆã€å®‰å…¨å’Œç¨³å®šçš„ç½‘ç»œç¯å¢ƒã€‚
MacOSä¸­çš„routeå‘½ä»¤MacOSä¸­çš„routeå‘½ä»¤ä¸Linuxä¸­çš„routeå‘½ä»¤å…·æœ‰ç›¸ä¼¼çš„åŠŸèƒ½ï¼Œä½†å®ƒä»¬ä¹‹é—´å­˜åœ¨ä¸€äº›è¯­æ³•å’Œè¡Œä¸ºå·®å¼‚ã€‚ä»¥ä¸‹æ˜¯åœ¨MacOSä¸Šé…ç½®è·¯ç”±è§„åˆ™çš„ä¸€äº›å¸¸ç”¨æ“ä½œã€‚
æ˜¾ç¤ºå½“å‰è·¯ç”±è¡¨netstat -nrsudo route get default

æ·»åŠ ä¸€æ¡é™æ€è·¯ç”±sudo route add -net ç›®æ ‡ç½‘ç»œåœ°å€/å­ç½‘æ©ç  ç½‘å…³åœ°å€sudo route add -net 192.168.1.0/24 192.168.0.1

åˆ é™¤ä¸€æ¡é™æ€è·¯ç”±sudo route delete -net ç›®æ ‡ç½‘ç»œåœ°å€/å­ç½‘æ©ç  ç½‘å…³åœ°å€sudo route delete -net 192.168.1.0/24 192.168.0.1

æ·»åŠ é»˜è®¤è·¯ç”±sudo route add default ç½‘å…³åœ°å€sudo route add default 192.168.0.1

ä¿®æ”¹é»˜è®¤è·¯ç”±sudo route change default ç½‘å…³åœ°å€sudo route change default 192.168.0.1

æ·»åŠ é»˜è®¤è·¯ç”±sudo route delete default








]]></content>
      <categories>
        <category>engineering</category>
        <category>network</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>macos</tag>
        <tag>chatgpt</tag>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxè™šæ‹Ÿç½‘ç»œè®¾å¤‡tun/tapå’Œveth pair</title>
    <url>/dev-tun-tap-vethpair/</url>
    <content><![CDATA[Linuxè™šæ‹Ÿç½‘ç»œè®¾å¤‡ç®€ä»‹æœ¬æ–‡å†…å®¹ä¸»è¦æ¥è‡ªChatGPTã€‚
Linuxè™šæ‹Ÿç½‘ç»œè®¾å¤‡æœ‰å¤šç§ç±»å‹ï¼Œå®ƒä»¬åœ¨ä¸åŒåœºæ™¯ä¸‹è¢«ç”¨äºåˆ›å»ºå’Œç®¡ç†è™šæ‹Ÿç½‘ç»œè¿æ¥ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„Linuxè™šæ‹Ÿç½‘ç»œè®¾å¤‡ï¼š

TUN/TAPï¼šTUNï¼ˆç½‘ç»œå±‚è™šæ‹Ÿè®¾å¤‡ï¼‰å’ŒTAPï¼ˆæ•°æ®é“¾è·¯å±‚è™šæ‹Ÿè®¾å¤‡ï¼‰è®¾å¤‡ç”¨äºåœ¨ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´ä¹‹é—´åˆ›å»ºè™šæ‹Ÿç½‘ç»œè®¾å¤‡ã€‚å®ƒä»¬é€šå¸¸ç”¨äºå®ç°VPNã€è™šæ‹Ÿæœºç­‰åœºæ™¯ã€‚
veth pairï¼šveth pairæ˜¯ä¸€å¯¹è™šæ‹Ÿä»¥å¤ªç½‘è®¾å¤‡ï¼Œå®ƒä»¬åœ¨å†…æ ¸ç©ºé—´ä¸­ç›¸äº’è¿æ¥ã€‚å½“ä¸€ä¸ªvethè®¾å¤‡æ¥æ”¶åˆ°æ•°æ®åŒ…æ—¶ï¼Œå®ƒä¼šå°†æ•°æ®åŒ…ä¼ é€’ç»™ä¸ä¹‹é…å¯¹çš„å¦ä¸€ä¸ªvethè®¾å¤‡ã€‚veth pairå¸¸ç”¨äºè¿æ¥ä¸åŒçš„ç½‘ç»œå‘½åç©ºé—´æˆ–è™šæ‹Ÿæœºã€‚
bridgeï¼šè™šæ‹Ÿæ¡¥æ¥å™¨ç”¨äºå°†å¤šä¸ªç½‘ç»œè®¾å¤‡è¿æ¥åœ¨ä¸€èµ·ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸­ç›¸äº’é€šä¿¡ã€‚è™šæ‹Ÿæ¡¥æ¥å™¨é€šå¸¸ç”¨äºè¿æ¥è™šæ‹Ÿæœºã€å®¹å™¨æˆ–å…¶ä»–è™šæ‹Ÿç½‘ç»œè®¾å¤‡ã€‚
macvlanï¼šmacvlanè®¾å¤‡å…è®¸åœ¨åŒä¸€ä¸ªç‰©ç†ç½‘ç»œæ¥å£ä¸Šåˆ›å»ºå¤šä¸ªè™šæ‹Ÿæ¥å£ï¼Œæ¯ä¸ªæ¥å£éƒ½æœ‰è‡ªå·±çš„MACåœ°å€ã€‚è¿™ç§è®¾å¤‡ç±»å‹åœ¨è™šæ‹ŸåŒ–å’Œå®¹å™¨ç¯å¢ƒä¸­éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå¯ä»¥è®©å¤šä¸ªè™šæ‹Ÿè®¾å¤‡å…±äº«åŒä¸€ä¸ªç‰©ç†ç½‘ç»œæ¥å£ã€‚
ipvlanï¼šipvlanä¸macvlanç±»ä¼¼ï¼Œä½†å®ƒåœ¨åŒä¸€ä¸ªç‰©ç†ç½‘ç»œæ¥å£ä¸Šåˆ›å»ºå¤šä¸ªè™šæ‹Ÿæ¥å£ï¼Œè¿™äº›æ¥å£å…±äº«ç›¸åŒçš„MACåœ°å€ä½†å…·æœ‰ç‹¬ç«‹çš„IPåœ°å€ã€‚ipvlanåœ¨æŸäº›åœºæ™¯ä¸‹å¯èƒ½æ¯”macvlanæ›´é«˜æ•ˆï¼Œå› ä¸ºå®ƒé¿å…äº†ARPå¹¿æ’­é£æš´ã€‚
VXLANï¼šè™šæ‹Ÿå¯æ‰©å±•å±€åŸŸç½‘ï¼ˆVXLANï¼‰æ˜¯ä¸€ç§åœ¨æ•°æ®ä¸­å¿ƒç½‘ç»œä¸­åˆ›å»ºå¯æ‰©å±•çš„è™šæ‹Ÿå±€åŸŸç½‘çš„æŠ€æœ¯ã€‚VXLANä½¿ç”¨UDPå°è£…å°†äºŒå±‚ä»¥å¤ªç½‘å¸§å°è£…åˆ°IPæ•°æ®åŒ…ä¸­ï¼Œä»è€Œå®ç°è·¨æ•°æ®ä¸­å¿ƒå’Œå¹¿åŸŸç½‘çš„è™šæ‹Ÿç½‘ç»œè¿æ¥ã€‚
GREï¼šé€šç”¨è·¯ç”±å°è£…ï¼ˆGREï¼‰æ˜¯ä¸€ç§å°è£…åè®®ï¼Œå¯ä»¥åœ¨ä¸åŒç½‘ç»œåè®®ä¹‹é—´åˆ›å»ºç‚¹å¯¹ç‚¹è¿æ¥ã€‚åœ¨Linuxä¸­ï¼Œå¯ä»¥ä½¿ç”¨GREéš§é“åœ¨ä¸¤ä¸ªç½‘ç»œèŠ‚ç‚¹ä¹‹é—´åˆ›å»ºè™šæ‹Ÿç½‘ç»œè¿æ¥ã€‚

VXLANï¼ˆVirtual Extensible LANï¼‰å’ŒGREï¼ˆGeneric Routing Encapsulationï¼‰å¹¶éä¸¥æ ¼æ„ä¹‰ä¸Šçš„ç½‘ç»œè®¾å¤‡ï¼Œè€Œæ˜¯ç½‘ç»œéš§é“åè®®ã€‚ç„¶è€Œï¼Œåœ¨Linuxç³»ç»Ÿä¸­ï¼Œå®ƒä»¬å¯ä»¥è¢«è§†ä¸ºä¸€ç§ç‰¹æ®Šç±»å‹çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥åˆ›å»ºå’Œç®¡ç†è™šæ‹Ÿç½‘ç»œè¿æ¥ã€‚
æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ tun/tapå’Œveth pairã€‚
å‚è€ƒæ–‡æ¡£ï¼š

TUN/TAPè®¾å¤‡æµ…æ(ä¸€) â€“ åŸç†æµ…æ
Linux è™šæ‹Ÿç½‘ç»œè®¾å¤‡ tun/tap veth pair



tun/tapåŸç†tun/tapæ˜¯Linuxå†…æ ¸ä¸­çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡é©±åŠ¨ï¼Œç”¨äºåœ¨ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´ä¹‹é—´åˆ›å»ºè™šæ‹Ÿç½‘ç»œè®¾å¤‡ã€‚tunè®¾å¤‡ç”¨äºå¤„ç†ä¸‰å±‚æ•°æ®åŒ…ï¼ˆIPæ•°æ®åŒ…ï¼‰ï¼Œè€Œtapè®¾å¤‡ç”¨äºå¤„ç†äºŒå±‚æ•°æ®åŒ…ï¼ˆä»¥å¤ªç½‘å¸§ï¼‰ã€‚
tun/tapè®¾å¤‡å…è®¸ç”¨æˆ·ç©ºé—´ç¨‹åºä¸å†…æ ¸ç©ºé—´è™šæ‹Ÿç½‘ç»œè®¾å¤‡è¿›è¡Œé€šä¿¡ã€‚å½“ç”¨æˆ·ç©ºé—´ç¨‹åºå¾€tun/tapè®¾å¤‡å†™å…¥æ•°æ®æ—¶ï¼Œå†…æ ¸å°†æ•°æ®åŒ…ä½œä¸ºè™šæ‹Ÿè®¾å¤‡çš„è¾“å…¥è¿›è¡Œå¤„ç†ã€‚åŒæ ·ï¼Œå½“å†…æ ¸å‘ç”¨æˆ·ç©ºé—´ç¨‹åºå‘é€æ•°æ®åŒ…æ—¶ï¼Œç¨‹åºå¯ä»tun/tapè®¾å¤‡è¯»å–æ•°æ®ã€‚è¿™ä½¿å¾—ç”¨æˆ·ç©ºé—´ç¨‹åºå¯ä»¥æ¨¡æ‹Ÿä¸€ä¸ªå®Œæ•´çš„ç½‘ç»œè®¾å¤‡ï¼Œç”¨äºå®ç°VPNã€è™šæ‹Ÿæœºç­‰åŠŸèƒ½ã€‚
ä½¿ç”¨tun/tapè®¾å¤‡ä½¿ç”¨tapè®¾å¤‡1ã€å®‰è£…iproute2å’Œuml-utilitiesè½¯ä»¶åŒ…
sudo apt-get install iproute2 uml-utilities

2ã€åˆ›å»ºä¸€ä¸ªtapè®¾å¤‡
sudo ip tuntap add dev tap0 mode tap

3ã€ä¸ºtapè®¾å¤‡åˆ†é…IPåœ°å€å¹¶å¯ç”¨è®¾å¤‡
sudo ip addr add 192.168.100.1/24 dev tap0sudo ip link set tap0 up

4ã€æµ‹è¯•è®¾å¤‡çš„è¿é€šæ€§
ping 192.168.100.1

ä½¿ç”¨tunè®¾å¤‡åŒæ ·åœ°ï¼Œåˆ›å»ºä¸€ä¸ªtunè®¾å¤‡çš„å‘½ä»¤å¦‚ä¸‹ï¼š
sudo ip tuntap add dev tun0 mode tunsudo ip addr add 10.0.0.1/24 dev tun0sudo ip link set tun0 up

veth pairåŸç†veth pairï¼ˆVirtual Ethernet Pairï¼‰æ˜¯ä¸€å¯¹è™šæ‹Ÿä»¥å¤ªç½‘è®¾å¤‡ï¼Œå®ƒä»¬åœ¨å†…æ ¸ç©ºé—´ä¸­ç›¸äº’è¿æ¥ã€‚å½“ä¸€ä¸ªvethè®¾å¤‡æ¥æ”¶åˆ°æ•°æ®åŒ…æ—¶ï¼Œå®ƒä¼šå°†æ•°æ®åŒ…ä¼ é€’ç»™ä¸ä¹‹é…å¯¹çš„å¦ä¸€ä¸ªvethè®¾å¤‡ã€‚veth pairå¸¸ç”¨äºè¿æ¥ä¸åŒçš„ç½‘ç»œå‘½åç©ºé—´æˆ–è™šæ‹Ÿæœºã€‚
veth pairåœ¨å†…æ ¸ç©ºé—´ä¸­è¡¨ç°ä¸ºä¸€å¯¹è¿æ¥åœ¨ä¸€èµ·çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡ã€‚å½“ä¸€ä¸ªvethè®¾å¤‡æ¥æ”¶åˆ°æ•°æ®åŒ…æ—¶ï¼Œæ•°æ®åŒ…ä¼šç«‹å³ä¼ é€’ç»™ä¸ä¹‹é…å¯¹çš„å¦ä¸€ä¸ªvethè®¾å¤‡ã€‚è¿™ç§æœºåˆ¶ä½¿å¾—veth pairå¯ä»¥ç”¨äºè¿æ¥ä¸åŒçš„ç½‘ç»œå‘½åç©ºé—´ï¼Œä¾‹å¦‚Dockerå®¹å™¨æˆ–Linuxå®¹å™¨ï¼ˆLXCï¼‰ä¸­çš„ç½‘ç»œã€‚è¿™ç§è¿æ¥æ–¹å¼ç±»ä¼¼äºå°†ä¸¤å°ç‰©ç†ä¸»æœºé€šè¿‡ç½‘çº¿è¿æ¥èµ·æ¥ï¼Œä½†åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿æ¥å‘ç”Ÿåœ¨è™šæ‹Ÿç¯å¢ƒä¸­ã€‚
ä½¿ç”¨veth pairç›¸åŒç½‘ç»œå‘½åç©ºé—´å†…1ã€åˆ›å»ºä¸€å¯¹vethè®¾å¤‡
sudo ip link add veth0 type veth peer name veth1

2ã€ä¸ºvethè®¾å¤‡åˆ†é…IPåœ°å€å¹¶å¯ç”¨è®¾å¤‡
sudo ip addr add 192.168.200.1/24 dev veth0sudo ip link set veth0 upsudo ip addr add 192.168.200.2/24 dev veth1sudo ip link set veth1 up

3ã€æµ‹è¯•è®¾å¤‡ä¹‹é—´çš„è¿é€šæ€§
ping 192.168.200.2 -c 4 -I veth0

ä¸åŒç½‘ç»œå‘½åç©ºé—´å†…å¦‚æœ‰éœ€è¦ï¼Œå¯ä»¥å°†veth pairä¸ä¸åŒçš„ç½‘ç»œå‘½åç©ºé—´å…³è”ã€‚
1ã€åˆ›å»ºä¸¤ä¸ªç½‘ç»œå‘½åç©ºé—´
sudo ip netns add ns1sudo ip netns add ns2

2ã€å°†veth0ç§»åŠ¨åˆ°ns1å‘½åç©ºé—´
sudo ip link set veth0 netns ns1

3ã€å°†veth1ç§»åŠ¨åˆ°ns2å‘½åç©ºé—´
sudo ip link set veth1 netns ns2

4ã€åœ¨ç½‘ç»œå‘½åç©ºé—´å†…åˆ†é…IPåœ°å€å¹¶å¯ç”¨vethè®¾å¤‡
sudo ip netns exec ns1 ip addr add 192.168.200.1/24 dev veth0sudo ip netns exec ns1 ip link set veth0 upsudo ip netns exec ns2 ip addr add 192.168.200.2/24 dev veth1sudo ip netns exec ns2 ip link set veth1 up

5ã€åœ¨å‘½åç©ºé—´ä¹‹é—´æµ‹è¯•è®¾å¤‡çš„è¿é€šæ€§
sudo ip netns exec ns1 ping 192.168.200.2 -c 4





]]></content>
      <categories>
        <category>engineering</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>chatgpt</tag>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>Wiresharkå…¥é—¨ç¯‡</title>
    <url>/dev-wireshark-start/</url>
    <content><![CDATA[Wiresharkç®€ä»‹
Wireshark: The worldâ€™s most popular network protocol analyzer.

Wiresharkæœ€åˆæ˜¯ä¸€ä¸ªåä¸ºEtherealçš„é¡¹ç›®ï¼Œåœ¨2006å¹´æ›´åä¸ºWiresharkã€‚Wiresharkæ˜¯ä¸€ä¸ªå…è´¹ä¸”å¼€æºçš„ç½‘ç»œåè®®åˆ†æå·¥å…·ï¼Œå¯ä»¥ç”¨äºæ•è·å’Œåˆ†æç½‘ç»œæ•°æ®åŒ…ã€‚å®ƒæ”¯æŒè¶…è¿‡2,000ç§åè®®ï¼Œå¹¶ä¸”å¯ä»¥æ·±å…¥åˆ†ææ¯ä¸ªåè®®çš„ç»†èŠ‚ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

ã€ŠWiresharkç½‘ç»œåˆ†æå°±æ˜¯è¿™ä¹ˆç®€å•ã€‹
ã€ŠWiresharkç½‘ç»œåˆ†æçš„è‰ºæœ¯ã€‹
Wiresharkå®˜ç½‘
ã€ŠK8Sä¸­PodæŠ“åŒ…ã€‹
wiresharkæŠ“åŒ…æ•™ç¨‹è¯¦è§£



å®‰è£…æŠ“åŒ…å·¥å…·å®‰è£…Wireshark1ã€å®‰è£…wiresharkè®¿é—®Wiresharkä¸‹è½½é¡µï¼Œä¸‹è½½å¯¹åº”ç³»ç»Ÿç‰ˆæœ¬çš„Wiresharkï¼ŒåŒå‡»å®‰è£…ã€‚
2ã€é…ç½®å‘½ä»¤è¡Œå¯åŠ¨wiresharkmacosä¸­ï¼Œwiresharké»˜è®¤å®‰è£…è·¯å¾„ä¸º/Applications/Wireshark.app/Contents/MacOS/Wiresharkæƒ³è¦åœ¨å‘½ä»¤è¡Œä¸­ç›´æ¥å¯åŠ¨wiresharkï¼Œæœ€å¥½æ˜¯é…ç½®ä¸€ä¸ªè½¯é“¾
ln -s /Applications/Wireshark.app/Contents/MacOS/Wireshark /usr/local/bin/wiresharkwhich wiresharkwireshark

å®‰è£…TsharkTsharkæ˜¯Wiresharkçš„å‘½ä»¤è¡Œç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ã€‚å®ƒå¯ä»¥ç”¨äºæ•è·å’Œåˆ†æç½‘ç»œæ•°æ®åŒ…ã€‚
1ã€å®‰è£… epel æ‰©å±•æº
yum install -y epel-release

2ã€å®‰è£…wireshark
yum install -y wireshark
wiresharkåŒ…å«äº†tsharkå·¥å…·ã€‚
3ã€éªŒè¯å®‰è£…
tshark -v

å‚è€ƒæ–‡æ¡£ï¼šTshark - INSTALL
å®‰è£…tcpdumptcpdumpæ˜¯å¦ä¸€ä¸ªå‘½ä»¤è¡Œç½‘ç»œåè®®åˆ†æå·¥å…·ï¼Œå¯ä»¥ç”¨äºæ•è·å’Œåˆ†æç½‘ç»œæ•°æ®åŒ…ã€‚
1ã€å®‰è£…tcpdump
yum install -y tcpdump

2ã€éªŒè¯å®‰è£…
tcpdump --version

æŠ“å–æ•°æ®åŒ…WiresharkæŠ“åŒ…åœºæ™¯ï¼šè®¿é—®www.voidking.comï¼ŒæŠ“å–æ•°æ®åŒ…ã€‚
1ã€æ‰“å¼€Wiresharkï¼Œé€‰æ‹©è¦æ•è·çš„æ¥å£ã€‚
2ã€åœ¨â€œCapture Optionsâ€å¯¹è¯æ¡†ä¸­ï¼Œå¯ä»¥é€‰æ‹©è¦æ•è·çš„åè®®å’Œè¿‡æ»¤å™¨ã€‚æœ¬ä¾‹ä¸­ï¼Œé€‰æ‹©hostè¿‡æ»¤å™¨ï¼Œå¯¹åº”è¾“å…¥host www.voidking.comæœ¬æ­¥éª¤å¯ä»¥çœç•¥ï¼Œç›´æ¥æŠ“å–æ‰€æœ‰çš„æµé‡ï¼Œç„¶ååœ¨æŠ“åŒ…åè¿›è¡Œè¿‡æ»¤ã€‚
3ã€ç‚¹å‡»â€œStartâ€æŒ‰é’®å¼€å§‹æ•è·æ•°æ®åŒ…ã€‚
4ã€æµè§ˆå™¨è®¿é—®http://www.voidking.com
5ã€Wiresharkä¸­æ•è·åˆ°æŒ‡å®šåŸŸåçš„æ•°æ®åŒ…ï¼Œå¯ä»¥è¿›è¡Œåˆ†æäº†ã€‚æ•è·åˆ°çš„æ•°æ®åŒ…ï¼Œå¯ä»¥å†æ¬¡è¿›è¡Œè¿‡æ»¤ï¼Œä¾‹å¦‚ä½¿ç”¨httpè¿‡æ»¤å™¨ï¼Œå¯¹åº”è¾“å…¥httpã€‚
æˆ‘ä»¬å¯ä»¥ç‚¹å‡»ä»»æ„ä¸€ä¸ª HTTP æ•°æ®åŒ…æ¥æŸ¥çœ‹å…¶è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚è¯·æ±‚æ–¹æ³•ã€è¯·æ±‚å¤´ã€å“åº”çŠ¶æ€ç ã€å“åº”å¤´ã€å“åº”å†…å®¹ç­‰ã€‚ä¹Ÿå¯ä»¥å³é”®ç‚¹å‡»ä¸€ä¸ªæ•°æ®åŒ…ï¼Œå¹¶é€‰æ‹©â€œFollow &gt; HTTP Streamâ€æ¥æŸ¥çœ‹æ•´ä¸ª HTTP ä¼šè¯çš„å†…å®¹ã€‚
è¯·æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨HTTPSåè®®è¿›è¡Œé€šä¿¡ï¼ŒWiresharkå°†æ— æ³•ç›´æ¥è§£å¯†å’ŒæŸ¥çœ‹é€šä¿¡å†…å®¹ã€‚ä½†æ˜¯ï¼ŒWiresharkä»ç„¶å¯ä»¥æ•è·åŠ å¯†çš„æ•°æ®åŒ…ï¼ŒåŒ…æ‹¬TLSæ¡æ‰‹å’ŒåŠ å¯†çš„åº”ç”¨æ•°æ®ï¼Œå¯ä»¥é€šè¿‡åˆ†æè¿™äº›æ•°æ®åŒ…æ¥è·å–æœ‰å…³é€šä¿¡çš„ä¸€äº›ä¿¡æ¯ã€‚
Tsharkå‘½ä»¤æŠ“åŒ…åœºæ™¯ï¼šè®¿é—®www.voidking.comï¼ŒæŠ“å–æ•°æ®åŒ…ã€‚
1ã€æŸ¥çœ‹å¯ä»¥æŠ“åŒ…çš„ç½‘ç»œæ¥å£
tshark -D

2ã€æ•è·æ•°æ®åŒ…
tshark -i eth0 -f &quot;host www.voidking.com&quot; -w stream.pcap

3ã€å†å¼€ä¸€ä¸ªç»ˆç«¯ curl www.voidking.com
4ã€è¯»å–æ•°æ®åŒ…
tshark -r stream.pcaptshark -r stream.pcap -Vtshark -r stream.pcap -Y &quot;http&quot; -V

å‚è€ƒæ–‡æ¡£ï¼šTshark - Capture Pcap
tcpdumpå‘½ä»¤æŠ“åŒ…åœºæ™¯ï¼šè®¿é—®www.voidking.comï¼ŒæŠ“å–æ•°æ®åŒ…ã€‚
1ã€æŸ¥çœ‹å¯ä»¥æŠ“åŒ…çš„ç½‘ç»œæ¥å£
tcpdump -D

2ã€æŸ¥çœ‹www.voidking.comåŸŸåä¸»æœº
ping www.voidking.com

ä¸»æœºä¸ºï¼š8.136.13.58
3ã€æ•è·æ•°æ®åŒ…
tcpdump -i eth0 host 8.136.13.58 -w stream.pcap

4ã€è¯»å–æ•°æ®åŒ…
tcpdump -r stream.pcaptcpdump -r stream.pcap -vtcpdump -r stream.pcap -vvvtshark -r stream.pcap -V

å‚è€ƒæ–‡æ¡£ï¼šåœ¨ Linux å‘½ä»¤è¡Œä¸­ä½¿ç”¨ tcpdump æŠ“åŒ…
æŸ¥çœ‹æ•°æ®åŒ…1ã€Wiresharkæ‰“å¼€æ•è·åˆ°çš„æ•°æ®åŒ…æ–‡ä»¶ï¼ˆ.pcapæ–‡ä»¶ï¼‰ã€‚
2ã€Wiresharkå°†æ˜¾ç¤ºæ•è·åˆ°çš„æ‰€æœ‰æ•°æ®åŒ…ã€‚
3ã€å¯ä»¥ä½¿ç”¨è¿‡æ»¤å™¨è¿‡æ»¤å‡ºç‰¹å®šçš„æµé‡ã€‚
4ã€ç‚¹å‡»ä»»ä½•æ•°æ®åŒ…ä»¥æŸ¥çœ‹å…¶è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åè®®ã€æºå’Œç›®æ ‡åœ°å€ã€æ—¶é—´æˆ³å’Œæ•°æ®å†…å®¹ç­‰ã€‚
Wiresharkè¿‡æ»¤å™¨è¡¨è¾¾å¼Wiresharkè¿‡æ»¤å™¨è¡¨è¾¾å¼æ˜¯ç”¨æ¥è¿‡æ»¤å’Œæœç´¢æ•°æ®åŒ…çš„ä¸€ç§æœºåˆ¶ã€‚è¿™äº›è¡¨è¾¾å¼æ˜¯åŸºäºBPFè¿‡æ»¤å™¨çš„è¯­æ³•ï¼Œå¹¶æ”¯æŒå¤§é‡çš„åè®®å’Œå­—æ®µè¿‡æ»¤å™¨ã€‚
é€»è¾‘è¿ç®—ç¬¦Wiresharkæ”¯æŒé€»è¾‘è¿ç®—ç¬¦â€œandâ€ã€â€œorâ€å’Œâ€œnotâ€ã€‚å¯ä»¥ä½¿ç”¨è¿™äº›è¿ç®—ç¬¦å°†å¤šä¸ªè¿‡æ»¤æ¡ä»¶ç»„åˆèµ·æ¥ã€‚ä¾‹å¦‚ï¼Œâ€œtcp and port 80â€è¡¨ç¤ºåŒæ—¶è¿‡æ»¤TCPæµé‡å’Œç«¯å£ä¸º80çš„æµé‡ã€‚
æ¯”è¾ƒè¿ç®—ç¬¦Wiresharkæ”¯æŒæ¯”è¾ƒè¿ç®—ç¬¦â€œ==â€ã€â€œ!=â€ã€â€œ&gt;â€ã€â€œ&lt;â€ã€â€œ&gt;=â€å’Œâ€œ&lt;=â€ã€‚å¯ä»¥ä½¿ç”¨è¿™äº›è¿ç®—ç¬¦æ¯”è¾ƒæ•°æ®åŒ…ä¸­çš„å­—æ®µå€¼ã€‚ä¾‹å¦‚ï¼Œâ€œip.src == 192.168.1.1â€è¡¨ç¤ºæºIPåœ°å€ä¸º192.168.1.1çš„æ•°æ®åŒ…ã€‚
å­—æ®µè¿‡æ»¤å™¨Wiresharkæ”¯æŒè®¸å¤šå­—æ®µè¿‡æ»¤å™¨ï¼Œè¿™äº›è¿‡æ»¤å™¨ç”¨äºè¿‡æ»¤å’Œæœç´¢ç‰¹å®šçš„åè®®å­—æ®µã€‚ä¾‹å¦‚ï¼Œâ€œtcp.portâ€è¡¨ç¤ºTCPç«¯å£ï¼Œè€Œâ€œhttp.request.uriâ€è¡¨ç¤ºHTTPè¯·æ±‚çš„URIå­—æ®µã€‚å¯ä»¥åœ¨è¿‡æ»¤å™¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨è¿™äº›å­—æ®µè¿‡æ»¤å™¨æ¥å®šä½ç‰¹å®šçš„æ•°æ®åŒ…ã€‚
åè®®è¿‡æ»¤å™¨Wiresharkæ”¯æŒå¤šç§åè®®è¿‡æ»¤å™¨ï¼Œè¿™äº›è¿‡æ»¤å™¨ç”¨äºè¿‡æ»¤ç‰¹å®šçš„åè®®æµé‡ã€‚ä¾‹å¦‚ï¼Œâ€œtcpâ€è¡¨ç¤ºTCPæµé‡ï¼Œâ€œudpâ€è¡¨ç¤ºUDPæµé‡ï¼Œâ€œhttpâ€è¡¨ç¤ºHTTPæµé‡ç­‰ã€‚
é™åˆ¶è¡¨è¾¾å¼Wiresharkæ”¯æŒä¸€äº›é™åˆ¶è¡¨è¾¾å¼ï¼Œè¿™äº›è¡¨è¾¾å¼ç”¨äºé™åˆ¶è¿‡æ»¤å™¨çš„æœç´¢ç»“æœã€‚ä¾‹å¦‚ï¼Œâ€œip.src == 192.168.1.1 limit 10â€è¡¨ç¤ºä»…æ˜¾ç¤ºæºIPåœ°å€ä¸º192.168.1.1çš„å‰10ä¸ªæ•°æ®åŒ…ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œ</tag>
        <tag>wireshark</tag>
        <tag>tshark</tag>
        <tag>tcpdump</tag>
      </tags>
  </entry>
  <entry>
    <title>æŠŠUEditoræ•´åˆè¿›ThinkPHP</title>
    <url>/dev-ueditor-in-thinkphp/</url>
    <content><![CDATA[å‰è¨€
UEditoræ˜¯ç”±ç™¾åº¦webå‰ç«¯ç ”å‘éƒ¨å¼€å‘æ‰€è§å³æ‰€å¾—å¯Œæ–‡æœ¬webç¼–è¾‘å™¨ï¼Œå…·æœ‰è½»é‡ï¼Œå¯å®šåˆ¶ï¼Œæ³¨é‡ç”¨æˆ·ä½“éªŒç­‰ç‰¹ç‚¹ï¼Œå¼€æºåŸºäºMITåè®®ï¼Œå…è®¸è‡ªç”±ä½¿ç”¨å’Œä¿®æ”¹ä»£ç â€¦



å·¾å¸¼å¿—æ„¿è€…é¡¹ç›®ï¼Œéœ€è¦å‘å¸ƒä¸€äº›å¸¦å›¾ç‰‡çš„æ–‡ç« ï¼Œä½¿ç”¨UEditorå¾ˆåˆé€‚ã€‚åŒæ—¶ï¼ŒUEditorè¿˜å¯ä»¥å½“åšå›¾ç‰‡ä¸Šä¼ æ’ä»¶ä½¿ç”¨ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬æŠŠUEditoræ•´åˆè¿›ThinkPHPæ¡†æ¶ä¸­ã€‚
å‡†å¤‡1ã€ç™»å½•UEditorå®˜ç½‘ï¼Œä¸‹è½½PHPç‰ˆæœ¬ï¼ˆUTF-8ç‰ˆï¼‰çš„ä»£ç ã€‚2ã€è§£å‹æ–‡ä»¶ï¼Œé‡å‘½åæ–‡ä»¶å¤¹utf8-phpä¸ºueditorã€‚3ã€æ‹·è´ueditoråˆ°é¡¹ç›®ä¸­çš„Public/libsæ–‡ä»¶å¤¹ä¸‹ã€‚4ã€ä¿®æ”¹ueditor/php/config.jsoné‡Œçš„è·¯å¾„ã€‚
ç¼–è¾‘å™¨æ–°å»ºè¡¨åœ¨æ•°æ®åº“ä¸­æ–°å»ºè¡¨volun_cultureï¼Œcontentå­—æ®µçš„ç±»å‹é€‰æ‹©longtextã€‚
Controlleråœ¨Application/Admin/Controller/TestController.class.phpä¸­ï¼Œæ·»åŠ å‡½æ•°ueditorã€cultureAddå’Œueditorshowã€‚
public function ueditor()&#123;    $this-&gt;display();&#125;public function cultureAdd($title, $content)&#123;    $data[&#x27;title&#x27;] = $title;    $data[&#x27;content&#x27;] = $content;    $culture = D(&#x27;culture&#x27;);    if($culture-&gt;create($data))&#123;        $id = $culture-&gt;add();        if($id)&#123;            $data = array(                &#x27;code&#x27;=&gt;&#x27;0&#x27;,                &#x27;id&#x27;=&gt;$id            );            echo json_encode($data);        &#125;    &#125;&#125;public function ueditorshow()&#123;    $culture = D(&#x27;culture&#x27;);    $cultureArr = $culture-&gt;select();    $this-&gt;assign(&#x27;cultureArr&#x27;,$cultureArr);    $this-&gt;display();&#125;


é¡µé¢åœ¨Application/Admin/View/Testæ–‡ä»¶å¤¹ä¸­ï¼Œæ–°å»ºæ–‡ä»¶ueditor.htmlå’Œueditorshow.htmlã€‚
&lt;!--ueditor.html--&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;UEditor&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;!-- åŠ è½½ç¼–è¾‘å™¨çš„å®¹å™¨ --&gt;    &lt;script id=&quot;container&quot; name=&quot;content&quot; type=&quot;text/plain&quot;&gt;        è¿™é‡Œå†™ä½ çš„åˆå§‹åŒ–å†…å®¹    &lt;/script&gt;    &lt;button id=&quot;getContent&quot;&gt;è·å–å†…å®¹&lt;/button&gt;    &lt;button id=&quot;saveContent&quot;&gt;ä¿å­˜&lt;/button&gt;    &lt;script src=&quot;/volunteer/Public/libs/jquery/jquery.min.js&quot;&gt;&lt;/script&gt;    &lt;!-- é…ç½®æ–‡ä»¶ --&gt;    &lt;script type=&quot;text/javascript&quot; src=&quot;/volunteer/Public/libs/ueditor/ueditor.config.js&quot;&gt;&lt;/script&gt;    &lt;!-- ç¼–è¾‘å™¨æºç æ–‡ä»¶ --&gt;    &lt;script type=&quot;text/javascript&quot; src=&quot;/volunteer/Public/libs/ueditor/ueditor.all.js&quot;&gt;&lt;/script&gt;    &lt;!-- å®ä¾‹åŒ–ç¼–è¾‘å™¨ --&gt;    &lt;script type=&quot;text/javascript&quot;&gt;        $(function()&#123;            var ue = UE.getEditor(&#x27;container&#x27;);            $(&#x27;#getContent&#x27;).click(function()&#123;                var html = ue.getContent();                alert(html);            &#125;);            $(&#x27;#saveContent&#x27;).click(function()&#123;                var html = ue.getContent();                var param = &#123;                    title: &#x27;æµ‹è¯•&#x27;,                    content: html                &#125;;                $.ajax(&#123;                    url: &#x27;/volunteer/index.php/Admin/Test/cultureAdd&#x27;,                    type: &#x27;POST&#x27;,                    dataType: &#x27;json&#x27;,                    data: param,                    success: function(data)&#123;                        console.log(data);                    &#125;,                    error: function(xhr)&#123;                        console.log(xhr);                    &#125;                &#125;);                            &#125;);        &#125;);    &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;
æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼šç‚¹å‡»â€œè·å–å†…å®¹â€ï¼šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸Šä¼ çš„å›¾ç‰‡è·¯å¾„ä¸º/volunteer/Public/libs/ueditor/php/upload/image/*ï¼Œè¿™ä¸ªè·¯å¾„æ˜¯æˆ‘ä»¬åœ¨å‡†å¤‡å·¥ä½œçš„ç¬¬å››æ­¥ä¸­é…ç½®çš„ã€‚æŸ¥çœ‹ä¸€ä¸‹è¯¥è·¯å¾„ï¼Œæœç„¶å¯ä»¥æ‰¾åˆ°ä¸Šä¼ çš„å›¾ç‰‡ã€‚ç‚¹å‡»â€œä¿å­˜â€ï¼š
&lt;!--ueditorshow.html--&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;æ–‡ç« å±•ç¤º&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;volist name=&quot;cultureArr&quot; id=&quot;item&quot;&gt;        &lt;div class=&quot;article&quot;&gt;            &lt;h2&gt;&#123;$item.title&#125;&lt;/h2&gt;            &#123;$item.content&#125;        &lt;/div&gt;        &lt;hr/&gt;    &lt;/volist&gt;&lt;/body&gt;&lt;/html&gt;

æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š
å›¾ç‰‡ä¸Šä¼ æ’ä»¶Controlleråœ¨Application/Admin/Controller/TestController.class.phpä¸­ï¼Œæ·»åŠ å‡½æ•°imguploadã€‚
public function imgupload()&#123;    $this-&gt;display();&#125;

é¡µé¢åœ¨Application/Admin/View/Testæ–‡ä»¶å¤¹ä¸­ï¼Œæ–°å»ºæ–‡ä»¶imgupload.htmlã€‚
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;å›¾ç‰‡ä¸Šä¼ &lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;tr&gt;        &lt;th&gt;ä¸Šä¼ å›¾ç‰‡&lt;/th&gt;        &lt;td&gt;            &lt;input type=&quot;text&quot; id=&quot;path&quot; /&gt;            &lt;input type=&quot;button&quot; id=&quot;addPic&quot; value=&quot;ä¸Šä¼ å›¾ç‰‡&quot;/&gt;        &lt;/td&gt;    &lt;/tr&gt;    &lt;div id=&quot;myeditor&quot; style=&quot;display: none;&quot;&gt;&lt;/div&gt;&lt;js file=&quot;__ROOT__/Public/libs/ueditor/ueditor.config.js&quot;/&gt;&lt;js file=&quot;__ROOT__/Public/libs/ueditor/ueditor.all.js&quot;/&gt;&lt;js file=&quot;__ROOT__/Public/libs/jquery/jquery.min.js&quot;/&gt;&lt;script&gt;    $(function()&#123;        var editor = UE.getEditor(&#x27;myeditor&#x27;);        editor.ready(function () &#123;            //editor.setDisabled();            editor.hide();            editor.addListener(&#x27;beforeInsertImage&#x27;, function (t, arg) &#123;                $(&quot;#path&quot;).val(arg[0].src);                //$(&quot;#preview&quot;).attr(&quot;src&quot;, arg[0].src);                console.log(arg);            &#125;);        &#125;);        $(&#x27;#addPic&#x27;).click(function()&#123;            var myImage = editor.getDialog(&quot;insertimage&quot;);            myImage.open();        &#125;);    &#125;);&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;

UEditorä¼˜åŒ–ä¸Šä¼ å›¾ç‰‡å¼¹æ¡†å»¶è¿Ÿé—®é¢˜æè¿°ï¼šåœ¨æœ€æ–°ç‰ˆChromeæµè§ˆå™¨ä¸­ï¼Œç‚¹å‡»ä¸Šä¼ å›¾ç‰‡æ—¶ï¼Œç­‰å¾…éå¸¸ä¹…ï¼Œå¤§æ¦‚10ç§’å·¦å³ï¼Œæ‰å¼¹å‡ºé€‰æ‹©å›¾ç‰‡çš„å¯¹è¯æ¡†ã€‚
è§£å†³æ–¹æ¡ˆï¼šæ‰“å¼€ueditor.all.jsï¼Œæ‰¾åˆ°ï¼š
accept=&quot;image/*&quot;
ä¿®æ”¹ä¸ºï¼š
accept=&quot;image/jpg,image/jpeg,image/png,image/gif&quot;

ç‚¹å‡»é€‰æ‹©å›¾ç‰‡å¼¹æ¡†å»¶è¿Ÿé—®é¢˜æè¿°ï¼šå’Œä¸Šä¼ å›¾ç‰‡å¼¹æ¡†å»¶è¿ŸåŸºæœ¬ç›¸åŒï¼Œä½†æ˜¯ï¼Œç‚¹å‡»çš„æŒ‰é’®æœ‰æ‰€å·®åˆ«ã€‚
è§£å†³æ–¹æ¡ˆï¼šæ‰“å¼€dialogs/images/images.jsï¼Œæ‰¾åˆ°ï¼š
accept: &#123;    title: &#x27;Images&#x27;,    extensions: acceptExtensions,    mimeTypes: &#x27;image/*&#x27;&#125;
ä¿®æ”¹ä¸ºï¼š
accept: &#123;    title: &#x27;Images&#x27;,    extensions: acceptExtensions,    mimeTypes: &#x27;image/jpg,image/jpeg,image/png,image/gif&#x27;&#125;

åè®°ä¸ºä»€ä¹ˆæˆ‘ä¼šçŸ¥é“ä¿®æ”¹å“ªä¸ªjsæ–‡ä»¶ï¼Ÿä¸¤ä¸ªåŸå› ï¼š
ç¬¬ä¸€ï¼ŒæŸ¥æ‰¾èµ„æ–™ï¼Œèµ„æ–™æŒ‡æ˜äº†ä¿®æ”¹ueditor.all.jsï¼ˆueditor.all.min.jsï¼‰å’Œwebuploader.jsï¼ˆwebuploader.min.jsï¼‰ã€‚
ç¬¬äºŒï¼ŒæŒ‰ç…§èµ„æ–™ç»™çš„æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰è§£å†³æˆ‘çš„é—®é¢˜ã€‚ä»”ç»†ç ”è¯»èµ„æ–™ï¼Œå…³é”®åœ¨äºacceptå‚æ•°çš„ä¿®æ”¹ã€‚é—®é¢˜æ²¡æœ‰è§£å†³ï¼Œæå¤§çš„å¯èƒ½æ˜¯acceptå‚æ•°æ²¡æœ‰ä¿®æ”¹æ­£ç¡®ã€‚æ£€æŸ¥åï¼Œç¡®ä¿¡acceptå‚æ•°å·²ç»ä¿®æ”¹æ­£ç¡®ã€‚æ¸…æ‰ç¼“å­˜ï¼Œç¡®ä¿ä¿®æ”¹åçš„ä»£ç ç”Ÿæ•ˆã€‚ç„¶è€Œï¼Œé—®é¢˜ä¾ç„¶æ²¡æœ‰è§£å†³ã€‚é‚£ä¹ˆï¼Œåªå‰©ä¸‹ä¸€ç§å¯èƒ½ï¼Œç‰ˆæœ¬é—®é¢˜ï¼Œacceptå‚æ•°ä¹Ÿè®¸ç§»åŠ¨åˆ°å…¶ä»–jsä¸­äº†ã€‚
å³é”®â€œå•å‡»é€‰æ‹©å›¾ç‰‡â€æŒ‰é’®ï¼Œæ£€æŸ¥ï¼Œé€‰æ‹©Event Listenerï¼Œä¾¿å¯ä»¥å®šä½åˆ°ç›¸å…³çš„jsã€‚
ä¹¦ç­¾UEditor - é¦–é¡µhttp://ueditor.baidu.com/website/
UEditor Docshttp://fex-team.github.io/ueditor/#start-config
Web Uploaderhttp://fex.baidu.com/webuploader/
WebUploader UEditor chrome ç‚¹å‡»ä¸Šä¼ æ–‡ä»¶é€‰æ‹©æ¡†ä¼šå»¶è¿Ÿå‡ ç§’æ‰ä¼šæ˜¾ç¤º ååº”å¾ˆæ…¢http://www.cnblogs.com/liangjiang/p/5799984.html
FAQ Â· fex-team/ueditor Wiki Â· GitHubhttps://github.com/fex-team/ueditor/wiki/FAQ
]]></content>
      <categories>
        <category>engineering</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>thinkphp</tag>
      </tags>
  </entry>
  <entry>
    <title>ThinkPHPç™»å½•çŠ¶æ€è®°å½•</title>
    <url>/dev-thinkphp-login-state/</url>
    <content><![CDATA[å‰è¨€ç™»å½•çŠ¶æ€çš„è®°å½•ï¼Œä¸¤ç§æ€è·¯ï¼šä¸€ç§æ˜¯åœ¨å‰ç«¯cookieä¸­å­˜ä¸€ä¸ªtokenï¼Œæ¯æ¬¡è¯·æ±‚éƒ½æŠŠtokenä¼ ç»™åç«¯ï¼Œç”¨äºéªŒè¯ç”¨æˆ·èº«ä»½ï¼›å¦ä¸€ç§æ˜¯å»ºç«‹sessionï¼Œåœ¨sessionä¸­ä¿å­˜ç”¨æˆ·ä¿¡æ¯ã€‚
æœ¬æ¬¡å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨ç¬¬äºŒç§æ€è·¯ï¼Œä¸‹é¢å®ç°ä¸€ä¸ªç®€å•çš„é€»è¾‘ï¼š1ã€åœ¨åœ°å€æ è¾“å…¥åå°é¦–é¡µåœ°å€ï¼Œå¦‚æœç®¡ç†å‘˜æœªç™»å½•ï¼Œåˆ™æ˜¾ç¤ºåå°é¦–é¡µï¼ˆç™»å½•é¡µé¢ï¼‰ï¼›å¦‚æœç®¡ç†å‘˜å·²ç™»å½•ï¼Œåˆ™è·³è½¬åˆ°å†…å®¹ç®¡ç†é¡µé¢ã€‚2ã€åœ¨åœ°å€æ è¾“å…¥å†…å®¹ç®¡ç†é¡µé¢åœ°å€ï¼Œå¦‚æœç®¡ç†å‘˜æœªç™»å½•ï¼Œåˆ™è·³è½¬åˆ°åå°é¦–é¡µï¼›å¦‚æœç®¡ç†å‘˜å·²ç™»å½•ï¼Œåˆ™æ˜¾ç¤ºå†…å®¹ç®¡ç†é¡µé¢ã€‚


phpä»£ç // åå°é¦–é¡µpublic function index()&#123;    if(isset($_SESSION[&#x27;admin&#x27;]))&#123;        $url = &#x27;http://localhost/volunteer/index.php/Admin/manage&#x27;;        header(&quot;location: $url&quot;);    &#125;else&#123;        $this-&gt;display();    &#125;&#125;// ç™»å½•å‡½æ•°public function login($name, $password)&#123;    // $name = $_POST[&#x27;name&#x27;];    // $password = $_POST[&#x27;password&#x27;];    $admin = M(&#x27;admin&#x27;);    $data = $admin-&gt;where(&quot;name=&#x27;$name&#x27; AND password=&#x27;$password&#x27;&quot;)-&gt;find();    if($data)&#123;        $_SESSION[&#x27;admin&#x27;]=$name;        $result = array(            &#x27;code&#x27; =&gt; &#x27;0&#x27;,            &#x27;ext&#x27; =&gt; &#x27;ç™»å½•æˆåŠŸ&#x27;,            &#x27;adminName&#x27; =&gt; $_SESSION[&#x27;admin&#x27;]        );        echo json_encode($result);    &#125;else&#123;        $result = array(            &#x27;code&#x27; =&gt; &#x27;1&#x27;,            &#x27;ext&#x27; =&gt; &#x27;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&#x27;        );        echo json_encode($result);    &#125;&#125;// ç®¡ç†é¡µé¢public function manage()&#123;    if(!isset($_SESSION[&#x27;admin&#x27;]) || !$_SESSION[&#x27;admin&#x27;])&#123;        $url = &#x27;http://localhost/volunteer/index.php/Admin/Index&#x27;;        header(&quot;location: $url&quot;);    &#125;else&#123;        $this-&gt;display();    &#125;&#125;

jsä»£ç $(function()&#123;    $(&#x27;#confirm&#x27;).click(function(e)&#123;        e.preventDefault();        var name = $(&#x27;#name&#x27;).val();        var password = $(&#x27;#password&#x27;).val();        $.ajax(&#123;            url: &#x27;/volunteer/index.php/Admin/Index/login&#x27;,            type: &#x27;POST&#x27;,            dataType: &#x27;json&#x27;,            data: &#123;                name: name,                password: password            &#125;,            success: function(data)&#123;                console.log(data);                if(data.code == 0)&#123;                    window.location = &#x27;/volunteer/index.php/Admin/Index/manage&#x27;;                &#125;            &#125;,            error: function(xhr)&#123;                console.log(xhr);            &#125;        &#125;);    &#125;); &#125;);

ä¹¦ç­¾èµ·æ­¥ Â· Bootstrap v3 ä¸­æ–‡æ–‡æ¡£http://v3.bootcss.com/getting-started/#examples
]]></content>
      <categories>
        <category>engineering</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>thinkphp</tag>
      </tags>
  </entry>
  <entry>
    <title>ThinkPHPå®æˆ˜</title>
    <url>/dev-thinkphp-in-action/</url>
    <content><![CDATA[å‰è¨€æœ¬ç€â€œéœ€è¦ä»€ä¹ˆå°±å­¦ä¹ ä»€ä¹ˆâ€çš„åŸåˆ™ï¼ŒèŠ±äº†å‡ å¤©æ—¶é—´ï¼Œå®è·µäº†ä¸€ä¸‹thinkphpæ¡†æ¶çš„ä½¿ç”¨ã€‚æ•´ç†äº†ä¸€ä¸‹å¿…é¡»æŒæ¡çš„ä¸‰ä¸ªéƒ¨åˆ†ï¼šè·¯ç”±æ§åˆ¶ã€æ¨¡æ¿æ¸²æŸ“ã€å¢åˆ æ”¹æŸ¥ã€‚


å‡†å¤‡åœ¨ã€ŠThinkPHPå¼€å‘ç¯å¢ƒæ­å»ºã€‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†thinkphpçš„å¼€å‘ç¯å¢ƒã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¤åˆ¶Applicationä¸­çš„Homeæ–‡ä»¶å¤¹ï¼Œé‡å‘½åä¸ºAdminã€‚ç„¶åï¼Œä¿®æ”¹Admin/IndexController.class.phpæ–‡ä»¶çš„namespaceä¸ºï¼š
namespace Admin\Controller;
å¥½äº†ï¼Œå¯ä»¥è¿›å…¥çœŸæ­£çš„å¼€å‘äº†ï¼
è·¯ç”±æ§åˆ¶è·¯ç”±æ§åˆ¶ï¼Œåœ¨thinkphpå¼€å‘æ‰‹å†Œä¸­å¯¹åº”â€œæ¶æ„&gt;URLæ¨¡å¼â€ã€‚thinkphpæä¾›äº†å¤šç§URLæ¨¡å¼ï¼Œæœ¬æ¬¡å¼€å‘é‡‡ç”¨æ ‡å‡†URLæ ¼å¼ã€‚
http://serverName/index.php/æ¨¡å—/æ§åˆ¶å™¨/æ“ä½œ

æ¯”å¦‚ï¼Œæˆ‘ä»¬åœ¨Admin/IndexController.class.phpæ–‡ä»¶ä¸­æ·»åŠ å‡½æ•°ï¼š
public function firstFunc()&#123;    echo &#x27;ç¬¬ä¸€ä¸ªå‡½æ•°&#x27;;&#125;
é‚£ä¹ˆï¼Œè¿™ä¸ªå‡½æ•°çš„è®¿é—®è·¯å¾„ä¸ºhttp://localhost/thinkphp/index.php/Admin/Index/firstFuncã€‚è®¿é—®è¯¥è·¯å¾„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡µé¢ä¸Šçœ‹åˆ°è¿”å›å€¼â€œç¬¬ä¸€ä¸ªå‡½æ•°â€ã€‚
æ¨¡æ¿æ¸²æŸ“æ¨¡æ¿æ¸²æŸ“ï¼Œåœ¨thinkphpå¼€å‘æ‰‹å†Œä¸­å¯¹åº”â€œè§†å›¾&gt;æ¨¡æ¿èµ‹å€¼å’Œæ¨¡æ¿æ¸²æŸ“â€ä»¥åŠâ€œæ¨¡æ¿â€ã€‚åœ¨Admin/View/Indexæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºæ–‡ä»¶template.htmlã€‚åœ¨Admin/IndexController.class.phpæ–‡ä»¶ä¸­æ·»åŠ å‡½æ•°ï¼š
public function template()&#123;    $data = &#x27;æµ‹è¯•æ•°æ®&#x27;;    $dataArr = array(        array(&#x27;name&#x27;=&gt;&#x27;éƒé”¦&#x27;,&#x27;age&#x27;=&gt;&#x27;24&#x27;),        array(&#x27;name&#x27;=&gt;&#x27;å°å¸…&#x27;,&#x27;age&#x27;=&gt;&#x27;22&#x27;),        array(&#x27;name&#x27;=&gt;&#x27;å°é£&#x27;,&#x27;age&#x27;=&gt;&#x27;22&#x27;)    );    $dataObj = new userInfo();    $this-&gt;assign(&#x27;data2&#x27;,$data);    $this-&gt;assign(&#x27;dataArr&#x27;,$dataArr);    $this-&gt;assign(&#x27;dataObj&#x27;,$dataObj);    $this-&gt;display();&#125;
åŒæ—¶ï¼Œåœ¨æ–‡ä»¶æœ€åæ·»åŠ ä¸€ä¸ªuserInfoç±»ï¼š
class userInfo&#123;    public $name = &#x27;éƒé”¦&#x27;;    public $age = &#x27;24&#x27;;    function show()&#123;        echo &#x27;ä¸€ä¸ªå‡½æ•°&#x27;;    &#125;&#125;
é‚£ä¹ˆï¼Œ$dataã€$dataArrå’Œ$dataObjéƒ½ä¼šé€šè¿‡assignå‡½æ•°ä¼ é€åˆ°template.htmlé¡µé¢ã€‚template.htmlé¡µé¢ä»£ç å¦‚ä¸‹ï¼š
&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;æ¨¡æ¿&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;h1&gt;æ¨¡æ¿&lt;/h1&gt;    &lt;p&gt;&#123;$data2&#125;&lt;/p&gt;    &lt;p&gt;&#123;$dataObj:name&#125;&lt;/p&gt;    &lt;p&gt;&#123;$dataObj:age&#125;&lt;/p&gt;    &lt;volist name=&#x27;dataArr&#x27; id=&quot;item&quot;&gt;        &#123;$item.name&#125;&amp;nbsp;&#123;$item.age&#125;&lt;br/&gt;    &lt;/volist&gt;&lt;/body&gt;&lt;/html&gt;

æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š
æ³¨æ„ï¼Œå‡½æ•°åå’Œé¡µé¢åå­—æ˜¯ç›¸åŒçš„ï¼Œä¸€ä¸€å¯¹åº”çš„ã€‚
å¢åˆ æŸ¥æ”¹å¢åˆ æŸ¥æ”¹ï¼Œåœ¨thinkphpå¼€å‘æ‰‹å†Œä¸­å¯¹åº”â€œæ¨¡å‹&gt;GURDæ“ä½œâ€å’Œâ€œä¸“é¢˜&gt;æ•°æ®åˆ†é¡µâ€ã€‚
æ•°æ®åº“é…ç½®åˆ©ç”¨navicatç­‰å·¥å…·è¿æ¥åˆ°æœ¬åœ°mysqlæ•°æ®åº“ï¼Œåˆ›å»ºæ•°æ®åº“volunteerï¼Œåœ¨æ•°æ®åº“ä¸­åˆ›å»ºè¡¨volun_admin(int id, varchar name, vachar password)å’Œvolun_project(int id, varchar title, varchar content)ã€‚æ³¨æ„ï¼Œç¼–ç æ ¼å¼é€‰æ‹©utf8ã€‚
phpé…ç½®åœ¨è¿›è¡Œæ•°æ®åº“å¢åˆ æŸ¥æ”¹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆè¿æ¥åˆ°æ•°æ®åº“ã€‚æ‰“å¼€Application/Common/Conf/config.phpæ–‡ä»¶ï¼Œä¿®æ”¹å†…å®¹å¦‚ä¸‹ï¼š
&lt;?phpreturn array(    //&#x27;é…ç½®é¡¹&#x27;=&gt;&#x27;é…ç½®å€¼&#x27;    &#x27;DB_TYPE&#x27;=&gt;&#x27;mysql&#x27;, //æ•°æ®åº“ç±»å‹    &#x27;DB_HOST&#x27;=&gt;&#x27;localhost&#x27;, //æœåŠ¡å™¨åœ°å€    &#x27;DB_NAME&#x27;=&gt;&#x27;volunteer&#x27;, //æ•°æ®åº“å    &#x27;DB_USER&#x27;=&gt;&#x27;root&#x27;, //ç”¨æˆ·å    &#x27;DB_PWD&#x27;=&gt;&#x27;&#x27;, //å¯†ç     &#x27;DB_PORT&#x27;=&gt;3306, //ç«¯å£    &#x27;DB_PREFIX&#x27;=&gt;&#x27;volun_&#x27;, //æ•°æ®åº“è¡¨å‰ç¼€    &#x27;SHOW_PAGE_TRACE&#x27; =&gt;true,);?&gt;

projectè¡¨çš„å¢åˆ æŸ¥æ”¹// å¿—æ„¿é¡¹ç›®å¢åˆ æŸ¥æ”¹public function projectAdd($title, $content)&#123;    $project = D(&#x27;project&#x27;);    $data[&#x27;title&#x27;] = $title;    $data[&#x27;content&#x27;] = $content;    if($project-&gt;create($data))&#123;        $id = $project-&gt;add();        if($id)&#123;            $result = array(                &#x27;code&#x27;=&gt; &#x27;0&#x27;,                &#x27;ext&#x27;=&gt; &#x27;success&#x27;            );            echo json_encode($result);        &#125;    &#125;&#125;public function projectEdit($id, $title, $content)&#123;    $project = D(&#x27;project&#x27;);    $data[&#x27;title&#x27;] = $title;    $data[&#x27;content&#x27;] = $content;    $success = $project-&gt;where(&quot;id=&#x27;$id&#x27;&quot;)-&gt;save($data);    if($success)&#123;        $result = array(            &#x27;code&#x27;=&gt; &#x27;0&#x27;,            &#x27;ext&#x27;=&gt; &#x27;success&#x27;        );        echo json_encode($result);    &#125;else &#123;        $result = array(            &#x27;code&#x27;=&gt; &#x27;1&#x27;,            &#x27;ext&#x27;=&gt; &#x27;fail&#x27;        );        echo json_encode($result);    &#125;&#125;public function projectDelete($id)&#123;    $project = D(&#x27;project&#x27;);    $success = $project-&gt;where(&quot;id=&#x27;$id&#x27;&quot;)-&gt;delete();    if($success)&#123;        $result = array(            &#x27;code&#x27;=&gt; &#x27;0&#x27;,            &#x27;ext&#x27;=&gt; &#x27;success&#x27;        );        echo json_encode($result);    &#125;else &#123;        $result = array(            &#x27;code&#x27;=&gt; &#x27;1&#x27;,            &#x27;ext&#x27;=&gt; &#x27;fail&#x27;        );        echo json_encode($result);    &#125;&#125;public function projectList()&#123;    $project = D(&#x27;project&#x27;);    $resultArr = $project-&gt;select();    echo json_encode($resultArr,JSON_UNESCAPED_UNICODE);&#125;public function projectPage($pageSize,$pageNum)&#123;    $project = D(&#x27;project&#x27;);    $total = $project-&gt;count();    $totalPage = $total%$pageSize ? (int)($total/$pageSize)+1 : (int)($total/$pageSize);        $list = $project-&gt;page($pageNum.&#x27;,&#x27;.$pageSize)-&gt;select();    if($list)&#123;        $resultArr = array(            &#x27;totalPage&#x27;=&gt; $totalPage,            &#x27;pageNum&#x27;=&gt; $pageNum,            &#x27;projectList&#x27;=&gt; $list        );        $result = array(            &#x27;code&#x27;=&gt; &#x27;0&#x27;,            &#x27;ext&#x27;=&gt; &#x27;success&#x27;,            &#x27;obj&#x27;=&gt; $resultArr        );        echo json_encode($result,JSON_UNESCAPED_UNICODE);    &#125;&#125;

ä»¥ä¸Šæ–¹æ³•ï¼Œåœ¨jsä¸­ï¼Œå¯ä»¥ä½¿ç”¨GETæ–¹å¼è¯·æ±‚ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨POSTæ–¹å¼è¯·æ±‚ã€‚
è·¯ç”±æ§åˆ¶ã€æ¨¡æ¿æ¸²æŸ“ã€å¢åˆ æ”¹æŸ¥ï¼Œè‡³æ­¤å…¨éƒ¨è·‘é€šï¼Œå¯ä»¥è¿›è¡Œç®€å•çš„å¼€å‘äº†ã€‚è‡³äºthinkphpæä¾›çš„å…¶ä»–æ›´åŠ å¼ºå¤§çš„åŠŸèƒ½ï¼Œåœ¨éœ€è¦æ—¶æŸ¥æŸ¥æ–‡æ¡£å°±å¥½ã€‚
æ¥å£æµ‹è¯•ä¸Šæ¬¡åœ¨ç»™å¤§å®¶æ¼”ç¤ºHttpRequesterçš„æ—¶å€™ï¼ŒéªŒè¯ç™»å½•æ¥å£ï¼Œä¸€ç›´å‡ºç°é”™è¯¯ã€‚çŒœæµ‹æœ‰å››ç§å¯èƒ½ï¼š1ã€HttpRequesterçš„é—®é¢˜2ã€thinkphpçš„é—®é¢˜3ã€phpçš„é—®é¢˜4ã€apacheçš„é—®é¢˜
HttpRequesterçš„é—®é¢˜ä»¥projectAddæ–¹æ³•ä¸ºä¾‹ï¼Œåœ¨jsä¸­ä½¿ç”¨ajaxè¯·æ±‚è¯¥æ–¹æ³•ï¼Œæ— è®ºtypeæ˜¯GETè¿˜æ˜¯POSTï¼Œéƒ½èƒ½æˆåŠŸæ‹¿åˆ°è¿”å›å€¼&#123;&quot;code&quot;:&quot;0&quot;,&quot;ext&quot;:&quot;success&quot;&#125;ã€‚
åœ¨HttpRequesterä¸­ï¼Œä½¿ç”¨GETæ–¹å¼è¯·æ±‚è¯¥æ–¹æ³•ï¼Œå¯ä»¥æ‹¿åˆ°è¿”å›å€¼ï¼›ä½†æ˜¯ï¼Œä½¿ç”¨POSTæ–¹å¼è¯·æ±‚ï¼Œæ‹¿ä¸åˆ°è¿”å›å€¼ï¼Œæç¤ºâ€œå‚æ•°é”™è¯¯æˆ–è€…æœªå®šä¹‰:titleâ€ï¼Œå› ä¸ºprojectAddæ–¹æ³•æ²¡æœ‰æ‹¿åˆ°æˆ‘ä»¬ä¼ è¿‡å»çš„å‚æ•°ã€‚
ä¿®æ”¹projectAddæ–¹æ³•ä¸ºï¼š
public function projectAdd()&#123;    $title = $_POST[&#x27;title&#x27;];    $content = $_POST[&#x27;content&#x27;];    $project = D(&#x27;project&#x27;);    $data[&#x27;title&#x27;] = $title;    $data[&#x27;content&#x27;] = $content;    if($project-&gt;create($data))&#123;        $id = $project-&gt;add();        if($id)&#123;            $result = array(                &#x27;code&#x27;=&gt; &#x27;0&#x27;,                &#x27;ext&#x27;=&gt; &#x27;success&#x27;            );            echo json_encode($result);        &#125;    &#125;&#125;

å†æ¬¡ä½¿ç”¨HttpRequesterè¯·æ±‚projectAddæ–¹æ³•ï¼Œè¿™æ¬¡æ¢äº†ä¸ªé”™è¯¯ï¼š
Column &#x27;content&#x27; cannot be null [ SQLè¯­å¥ ] : INSERT INTO `volun_project` (`title`,`content`) VALUES (NULL,NULL)

æ˜¾ç„¶ï¼Œé”™è¯¯çš„åŸå› ä¾ç„¶æ˜¯projectAddæ–¹æ³•æ²¡æœ‰æ‹¿åˆ°æˆ‘ä»¬ä¼ è¿‡å»çš„å‚æ•°ï¼Œå¯¼è‡´titleå’Œcontentä¸ºç©ºã€‚
ä½¿ç”¨ajaxçš„POSTæ–¹å¼è¯·æ±‚è¯¥æ–¹æ³•ï¼ŒæˆåŠŸæ‹¿åˆ°è¿”å›å€¼ã€‚å¯è§ï¼Œè¿™æ˜¯HttpRequesterçš„é—®é¢˜ï¼Œå®ƒæ— æ³•æ¨¡æ‹Ÿajaxçš„POSTè¯·æ±‚ã€‚
é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œajaxçš„POSTå’ŒHttpRequesterçš„POSTåˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¾ˆé—æ†¾ï¼Œæš‚æ—¶æ²¡æœ‰æ‰¾åˆ°ç­”æ¡ˆã€‚
thinkphpçš„é—®é¢˜åœ¨å…¬å¸å¼€å‘æ—¶ï¼Œä¸€ç›´ä½¿ç”¨HttpRequesteræ¥éªŒè¯æ¥å£ï¼Œèƒ½ç”¨ajaxè¯·æ±‚çš„æ¥å£ï¼Œéƒ½å¯ä»¥ä½¿ç”¨HttpRequesteræ¥æ¨¡æ‹Ÿè¯·æ±‚ã€‚è¿™æ ·çœ‹æ¥ï¼Œå°±æ˜¯æ¥å£çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯thinkphpæ¡†æ¶çš„é—®é¢˜ï¼æˆ–è€…ï¼Œå°±æ˜¯phpçš„é—®é¢˜ï¼
phpçš„é—®é¢˜åœ¨thinkphpæ–‡ä»¶ä¸‹ï¼Œæ–°å»ºäº†ä¸€ä¸ªtest.phpæ–‡ä»¶ï¼š
&lt;?php    $title = $_POST[&#x27;title&#x27;];    $array = array(        &#x27;title&#x27;=&gt;$title    );    echo json_encode($array);?&gt;
åœ¨ajaxä¸­ï¼Œå¸¦å…¥å‚æ•°&#123;title:&#39;æµ‹è¯•æ ‡é¢˜&#39;&#125;ï¼ŒPOSTè¯·æ±‚http://localhost/thinkphp/test.phpï¼ŒæˆåŠŸæ‹¿åˆ°è¿”å›å€¼ã€‚
åœ¨HttpRequesterä¸­ï¼Œå¸¦å…¥å‚æ•°&#123;title:&#39;æµ‹è¯•æ ‡é¢˜&#39;&#125;ï¼ŒPOSTè¯·æ±‚http://localhost/thinkphp/test.phpï¼Œæç¤ºé”™è¯¯â€œNotice: Undefined index: title in D:\Server\wamp64\www\thinkphp\test.php on line 2â€ã€‚
ä¿®æ”¹test.phpæ–‡ä»¶ä¸ºï¼š
&lt;?php    $title = $_GET[&#x27;title&#x27;];    $array = array(        &#x27;title&#x27;=&gt;$title    );    echo json_encode($array);?&gt;
åœ¨ajaxä¸­ï¼Œå¸¦å…¥å‚æ•°&#123;title:&#39;æµ‹è¯•æ ‡é¢˜&#39;&#125;ï¼ŒGETè¯·æ±‚http://localhost/thinkphp/test.phpï¼ŒæˆåŠŸæ‹¿åˆ°è¿”å›å€¼ã€‚
åœ¨HttpRequesterä¸­ï¼Œå¸¦å…¥å‚æ•°&#123;title:&#39;æµ‹è¯•æ ‡é¢˜&#39;&#125;ï¼ŒGETè¯·æ±‚http://localhost/thinkphp/test.phpï¼ŒæˆåŠŸæ‹¿åˆ°è¿”å›å€¼ã€‚
ç”±æ­¤æ’é™¤thinkphpçš„é—®é¢˜ã€‚
apacheçš„é—®é¢˜è¿˜æœ‰ä¸€ç§å¯èƒ½ï¼Œapacheçš„é—®é¢˜ï¼Œäºæ˜¯æŠŠtest.phpæ–‡ä»¶æ”¾åˆ°nginxä¸‹ï¼Œç»æµ‹è¯•ï¼Œæ¥å£åŒæ ·æ‹¿ä¸åˆ°å‚æ•°ã€‚ç”±æ­¤æ’é™¤apacheçš„é—®é¢˜ã€‚
å°ç»“ç»¼ä¸Šï¼ŒHttpRequesteræ— æ³•æµ‹è¯•thinkphpçš„POSTæ¥å£é—®é¢˜ï¼Œæœ‰ä¸¤ä¸ªå¯èƒ½ï¼Œä¸€ä¸ªæ˜¯HttpRequesterå­˜åœ¨ç¼ºé™·ï¼Œå¦ä¸€ä¸ªæ˜¯phpå­˜åœ¨ç¼ºé™·ã€‚
åè®°æ— è®ºå“ªç§åŸå› ï¼Œæ€»ä¹‹ï¼Œæ— æ³•ä½¿ç”¨HttpRequesterçš„POSTè¯·æ±‚æ¥éªŒè¯æˆ‘ä»¬çš„thinkphpæ¥å£äº†ã€‚éœ€è¦éªŒè¯æ¥å£æ—¶ï¼Œæš‚æ—¶ä½¿ç”¨GETè¯·æ±‚ï¼Œå› ä¸ºæˆ‘ä»¬çš„æ¥å£ä¸¤ç§è¯·æ±‚æ–¹å¼éƒ½å¯ä»¥æ‹¿åˆ°è¿”å›å€¼ã€‚
æ³¨æ„ï¼Œæœ¬åº”è¯¥æ˜¯POSTè¯·æ±‚çš„æ¥å£ï¼Œæ¥å£æ–‡æ¡£ä¸­çš„è¯·æ±‚ç±»å‹ä¾ç„¶å†™POSTï¼Œajaxçš„typeä¹Ÿä½¿ç”¨POSTï¼Œä¿è¯è§„èŒƒæ€§ã€‚
2016.09.14æ›´æ–°Thinkphp3.2.3 æ¥æ”¶ä¸åˆ°jsonæ•°æ®https://segmentfault.com/q/1010000004980405
åŸæ¥ï¼Œé€ æˆHttpRequesteræ— æ³•æµ‹è¯•æ¥å£çš„åŸå› ï¼Œæ˜¯Content-Typeæ²¡æœ‰é€‰å¯¹ã€‚
ç”±äºPHPé»˜è®¤åªè¯†åˆ«Content-Type: application/x-www.form-urlencodedæ ‡å‡†çš„æ•°æ®ç±»å‹ï¼Œå› æ­¤ï¼Œå¯¹å‹å¦‚application/jsonçš„å†…å®¹æ— æ³•è§£æä¸º$_POSTæ•°ç»„ï¼Œæ•…ä¿ç•™åŸå‹ï¼Œäº¤ç»™$GLOBALS[&#39;HTTP_RAW_POST_DATA&#39;]æ¥æ¥æ”¶ã€‚
file_get_contents(&#39;php://input&#39;)å…è®¸è¯»å– POST çš„åŸå§‹æ•°æ®ï¼Œå’Œ$GLOBALS[&#39;HTTP_RAW_POST_DATA&#39;]æ¯”èµ·æ¥ï¼Œå®ƒç»™å†…å­˜å¸¦æ¥çš„å‹åŠ›è¾ƒå°ï¼Œå¹¶ä¸”ä¸éœ€è¦ä»»ä½•ç‰¹æ®Šçš„php.iniè®¾ç½®ã€‚file_get_contents(&#39;php://input&#39;)ä¸èƒ½ç”¨äºenctype=&quot;multipart/form-data&quot;ã€‚
ä¹¦ç­¾åºè¨€ - ThinkPHP3.2å®Œå…¨å¼€å‘æ‰‹å†Œhttp://document.thinkphp.cn/manual_3_2.html
ThinkPHPæ¡†æ¶æ•™ç¨‹ - çŒ¿å›¢http://edu.yuantuan.com/course/explore/thinkphp
PHP: è¯­è¨€å‚è€ƒ - Manualhttp://php.net/manual/zh/langref.php
]]></content>
      <categories>
        <category>engineering</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>thinkphp</tag>
      </tags>
  </entry>
  <entry>
    <title>å¼€æºä¸­å›½å›¢é˜Ÿåä½œå¼€å‘å¹³å°</title>
    <url>/dev-oschina-teamwork/</url>
    <content><![CDATA[å‰è¨€åœ¨å…¬å¸æ—¶ï¼Œä½¿ç”¨wikiæ¥å†™æ–‡æ¡£ï¼Œä½¿ç”¨jiraæ¥è®°å½•å·¥ä½œè¿›åº¦å’Œbugï¼Œéå¸¸æ–¹ä¾¿ã€‚é©¬ä¸Šè¦è¿›è¡Œé¡¹ç›®ç®¡ç†ï¼Œæœ¬æ¥æ‰“ç®—è‡ªå·±æ­å»ºwikiå’Œjiraç³»ç»Ÿï¼Œåæ¥æƒ³åˆ°å¼€æºä¸­å›½æœ‰ä¸€ä¸ªå›¢é˜Ÿåä½œå¼€å‘å¹³å°ã€‚è¯•ç”¨äº†ä¸€ä¸‹ï¼ŒåŸºæœ¬æ»¡è¶³è¦æ±‚ï¼Œniceã€‚


å†™æ–‡æ¡£æœ¬å¹³å°å†…ç½®markdownç¼–è¾‘å™¨ï¼Œå»ºè®®å­¦ä¹ ä¸€ä¸‹markdownå†™æ³•ã€‚
æ™®é€šæ–‡æ¡£1ã€ç‚¹å‡»å·¦ä¾§å¯¼èˆªæ çš„â€œæ–‡æ¡£â€ï¼Œç„¶åç‚¹å‡»â€œæ–°æ–‡æ¡£â€ã€‚
2ã€è¾“å…¥æ–‡æ¡£ä¿¡æ¯ã€‚
3ã€ä¹‹åç‚¹å‡»æ–‡æ¡£åï¼Œè¿›å…¥ç¼–è¾‘é¡µé¢ã€‚
4ã€ç¼–è¾‘å®Œæˆï¼Œå¯ä»¥è¿›è¡Œé¢„è§ˆã€‚
æ¥å£æ–‡æ¡£æ¥å£æ–‡æ¡£ï¼Œåœ¨æ™®é€šæ–‡æ¡£çš„åŸºç¡€ä¸Šï¼Œè§„å®šç»“æ„å¦‚ä¸‹ï¼š
ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼šhttp://doc.oschina.net/interfacedemo
PSï¼šæ¥å£æ–‡æ¡£åç«¯è´Ÿè´£ç¼–å†™ã€‚åç«¯åœ¨å¼€å‘å‰ï¼Œå…ˆå†™å¥½æ¥å£æ–‡æ¡£ï¼Œç„¶åæŠŠæ–‡æ¡£åœ°å€å‘åˆ°è®¨è®ºç»„é‡Œï¼Œå‰ç«¯å°±å¯ä»¥è‡ªå·±æ¨¡æ‹Ÿæ•°æ®ç‹¬ç«‹è¿›è¡Œå¼€å‘ã€‚åç«¯åœ¨å¼€å‘å¥½æ¥å£ä¹‹åï¼Œè‡ªå·±ä½¿ç”¨HttpRequesteræµ‹è¯•ä¸€ä¸‹ï¼Œç¡®ä¿æ¥å£æ²¡æœ‰é—®é¢˜ï¼Œç„¶ååœ¨è®¨è®ºç»„é‡Œå£°æ˜å“ªäº›æ¥å£å·²ç»å¯ä»¥ä½¿ç”¨ã€‚
æ¸²æŸ“æ–‡æ¡£thinkphpæ¡†æ¶çš„å‰åç«¯åˆ†ç¦»åšçš„ä¸å½»åº•ï¼Œé»˜è®¤æ¶æ„ä¸ºåç«¯è·¯ç”±+åç«¯æ¸²æŸ“+åç«¯æ¥å£ï¼Œé€‚åˆå…¨æ ˆå¼€å‘è€…ä½¿ç”¨ã€‚ç†æƒ³çš„å‰åç«¯åˆ†ç¦»æ¡†æ¶ï¼Œåº”è¯¥æ˜¯ç”±å‰ç«¯æ¥è´Ÿè´£è·¯ç”±æ§åˆ¶å’Œå‰ç«¯æ¸²æŸ“ï¼Œåç«¯ä¸“æ³¨äºæ¥å£ï¼Œä¹Ÿå°±æ˜¯å‰ç«¯è·¯ç”±+å‰ç«¯æ¸²æŸ“+åç«¯æ¥å£ã€‚
å› ä¸ºthinkphpæ¡†æ¶ä¸­çš„è·¯ç”±æ§åˆ¶ç”±åç«¯æ¥æ§åˆ¶ï¼Œé¡µé¢æ¸²æŸ“ä¹Ÿå±äºåç«¯æ¸²æŸ“ï¼Œæ‰€ä»¥é¡µé¢æ¸²æŸ“çš„å·¥ä½œç†è®ºä¸Šåº”è¯¥å½’å±äºåç«¯å¼€å‘è€…ã€‚ä½†æ˜¯ï¼Œåç«¯å¼€å‘è€…è´Ÿè´£é¡µé¢æ¸²æŸ“çš„è¯ï¼Œå‰åç«¯å°±æ··åˆ°äº†ä¸€èµ·ï¼ŒåŠ å¤§äº†å¼€å‘çš„å¤æ‚åº¦ã€‚
ç›¸è¾ƒè€Œè¨€ï¼Œè®©å‰ç«¯å¼€å‘è€…è´Ÿè´£é¡µé¢æ¸²æŸ“çš„æ›´å¥½ä¸€äº›ã€‚é‚£ä¹ˆï¼Œå‰ç«¯å¼€å‘è€…å°±éœ€è¦æ‹¿åˆ°é¡µé¢åœ°å€ï¼Œä»¥åŠç”¨æ¥é¡µé¢æ¸²æŸ“çš„æ•°æ®ã€‚é¡µé¢åœ°å€å’Œé¡µé¢æ¸²æŸ“æ•°æ®éœ€è¦åç«¯æä¾›ï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªæ–‡æ¡£æ¥è¯´æ˜ã€‚
æ›´å¤šå…³äºå‰åç«¯æ¸²æŸ“çš„å†…å®¹ï¼Œè¯·å‚è€ƒã€ŠJavaScriptæ¨¡æ¿å¼•æ“ã€‹ã€‚
è§„å®šæ¸²æŸ“æ–‡æ¡£ç»“æ„å¦‚ä¸‹ï¼š
ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼šhttp://doc.oschina.net/interfacedemo2
PSï¼šæ¸²æŸ“æ–‡æ¡£åŒæ ·ç”±åç«¯è´Ÿè´£ç¼–å†™ã€‚åç«¯æ¸²æŸ“è™½ç„¶ä¸ä¾¿äºå‰åç«¯åˆ†ç¦»ï¼Œä½†æ˜¯ä¹Ÿæœ‰å¥½å¤„ã€‚å› ä¸ºåç«¯æ¸²æŸ“çš„è¯ï¼Œé¡µé¢åŠ è½½çš„é€Ÿåº¦ä¼šæ›´å¿«äº›ã€‚å¦‚æœå˜æ›´æ¶æ„ä¸ºå‰ç«¯æ¸²æŸ“+åç«¯è·¯ç”±+åç«¯æ¥å£ï¼Œä¹Ÿå¾ˆç®€å•ï¼Œåªè¦åœ¨å‰ç«¯åŠ ä¸€ä¸ªæ¨¡æ¿å¼•æ“å³å¯ã€‚
è®°å½•å·¥ä½œè¿›åº¦æ–°å»ºä»»åŠ¡1ã€æ¯æ¬¡å¼€å‘å‰ï¼Œç‚¹å‡»å·¦ä¾§å¯¼èˆªæ çš„â€œä»»åŠ¡â€ï¼Œç„¶åç‚¹å‡»â€œæ–°å»ºä»»åŠ¡â€ã€‚
2ã€é€‰æ‹©é¡¹ç›®ï¼Œæ ‡é¢˜è¾“å…¥å½“å¤©çš„ä»»åŠ¡ï¼ˆæˆ–ä¸€æ®µæ—¶é—´çš„ä»»åŠ¡ï¼‰ï¼Œä»»åŠ¡æ ‡ç­¾é€‰æ‹©åŠŸèƒ½ï¼ˆfeatureï¼‰ï¼ŒæŒ‡æ´¾æˆå‘˜é€‰è‡ªå·±ï¼Œé€‰æ‹©å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´ï¼Œå…¶ä»–å¯é€‰ã€‚
3ã€ç‚¹å‡»ç¡®è®¤åˆ›å»ºã€‚
å…³é—­ä»»åŠ¡å½“ä»»åŠ¡å®Œæˆåï¼Œå˜æ›´ä»»åŠ¡çŠ¶æ€ä¸ºå·²å®Œæˆæˆ–éªŒæ”¶é€šè¿‡ã€‚
ç”Ÿæˆå‘¨æŠ¥æ¯å‘¨æ—¥ï¼Œç‚¹å‡»å·¦ä¾§å¯¼èˆªæ çš„â€œå‘¨æŠ¥â€ï¼Œç„¶åç‚¹å‡»â€œæäº¤å‘¨æŠ¥â€ï¼Œè‡ªåŠ¨ç”Ÿæˆå‘¨æŠ¥ã€‚
è®°å½•bugå’Œè®°å½•å·¥ä½œè¿›åº¦ç±»ä¼¼ï¼Œåªä¸è¿‡ä»»åŠ¡æ ‡ç­¾é€‰æ‹©ç¼ºé™·ï¼ˆbugï¼‰ï¼ŒæŒ‡æ´¾æˆå‘˜é€‰æ‹©æ¨¡å—çš„å¼€å‘è€…ã€‚å¹¶ä¸”ï¼Œåœ¨ä»»åŠ¡æè¿°ä¸­æ·»åŠ ä¸€äº›bugçš„æè¿°ä¿¡æ¯ã€‚
ä»£ç æ‰˜ç®¡è·å–é¡¹ç›®git clone https://git.oschina.net/voidking/volunteer.git

ä¸Šä¼ é¡¹ç›®git pullgit add .git commit -m &quot;message&quot;git push

åè®°æœ‰ä»»ä½•é—®é¢˜ï¼Œæˆ–è€…å¥½çš„å»ºè®®ï¼Œéƒ½å¯ä»¥æå‡ºæ¥ï¼Œå¸Œæœ›å¤§å®¶åœ¨è¿™ä¸ªå›¢ä½“ä¸­å…±åŒè¿›æ­¥ï¼Œæˆä¸ºæ›´åŠ ç‰›é€¼çš„è‡ªå·±ã€‚
ä¹¦ç­¾å“éŸ³å·¥ä½œå®¤â€”Team@OSCå›¢é˜Ÿåä½œå¼€å‘å¹³å°https://team.oschina.net/pandazhuoyin
ç äº‘å¹³å°å¸®åŠ©æ–‡æ¡£_V1.2http://git.mydoc.io/?t=84110
ç äº‘ - å¼€æºä¸­å›½http://git.oschina.net/
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>jira</tag>
        <tag>wiki</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨CentOS7ä¸Šé…ç½®PHPè¿è¡Œç¯å¢ƒ</title>
    <url>/dev-centos-php-envirenment/</url>
    <content><![CDATA[å‰è¨€é˜¿é‡Œäº‘åˆ°æœŸäº†ï¼Œç©·äººä¹°ä¸èµ·æœåŠ¡å™¨ï¼Œä»¥ååªèƒ½åœ¨è™šæ‹Ÿæœºä¸­ç»ƒæ‰‹äº†ã€‚VMwareå’ŒVirtualBoxéƒ½å¾ˆå¥½ç”¨ï¼ŒVMwareå¯ä»¥å®‰è£…MacOSï¼ŒVirtualBoxæ›´è½»é‡ã€‚
CentOS7å®‰è£…åˆ°äº†VirtualBoxä¸­ï¼Œä¸‹é¢ï¼Œæ¥å­¦ä¹ é…ç½®ä¸€ä¸‹PHPçš„è¿è¡Œç¯å¢ƒã€‚å‡è®¾é‡‡ç”¨æ¡¥æ¥ï¼ŒCentOS7çš„IPåœ°å€ä¸º192.168.1.114ã€‚



phpç¯å¢ƒé…ç½®å¸¸ç”¨çš„PHPç¯å¢ƒä¸ºLAMPå’ŒLNMPï¼Œè¿™æ¬¡éƒåŒå­¦é€‰æ‹©LNMPï¼Œä¹Ÿå°±æ˜¯Linuxã€Nginxã€Mysqlå’ŒPHPã€‚å¬è¯´EZHTTPå¯ä»¥ç®€åŒ–å®‰è£…é…ç½®è¿‡ç¨‹ï¼Œå°è¯•ä¸€ä¸‹ã€‚
å®‰è£…screen(å¯é€‰)ç”±äºç¼–è¯‘å®‰è£…Nginx Apache PHP MySQLç­‰è½¯ä»¶ä¼šèŠ±è´¹æ¯”è¾ƒé•¿çš„æ—¶é—´ï¼Œéš¾å…ä¼šå‡ºç°ç”±äºç½‘ç»œæ„å¤–ä¸­æ–­è€Œå¯¼è‡´å®‰è£…ä¹Ÿä¸­æ–­äº†ï¼Œæ‰€ä»¥ä¸ºäº†é¿å…æ­¤é—®é¢˜ï¼Œå¯ä»¥ç”¨screenæ¥å®‰è£…ã€‚yum install -y screen
å®‰è£…unzipå’Œwgetæ‰§è¡Œezhttpå®‰è£…ç¨‹åºï¼Œè‡³å°‘éœ€è¦unzipåŠwgetå·¥å…·ã€‚yum install -y wget unzip
å®‰è£…gityum install -y git
å®‰è£…EZHTTPgit clone https://github.com/centos-bz/ezhttp.gitcd ezhttpchmod +x start.sh./start.sh
è½¯ä»¶é€‰æ‹©é—®é¢˜ï¼Œå‚è§ä¹¦ç­¾ä¸­ã€Šä½¿ç”¨EZHTTPå®‰è£…LNMP(Nginx MySQL PHP) ã€‹ã€‚ç½‘ç»œæ¡ä»¶è‰¯å¥½çš„è¯ï¼Œä¸€ä¸ªå°æ—¶å·¦å³å°±å¯ä»¥å®‰è£…å®Œæˆã€‚
æµ‹è¯•åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥http://192.168.1.114ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒEZHTTPå·²ç»å®‰è£…æˆåŠŸã€‚
ä¸Šä¼ thinkphp1ã€ä¸‹è½½thinkphpï¼Œè§£å‹åˆ°thinkphp_3.2.3_fullã€‚2ã€é‡å‘½åthinkphp_3.2.3_fullæ–‡ä»¶å¤¹ä¸ºthinkphpã€‚3ã€åˆ©ç”¨xftpä¸Šä¼ thinkphpæ–‡ä»¶å¤¹åˆ°/home/wwwrootç›®å½•ä¸‹ã€‚
æµ‹è¯•åœ¨æµè§ˆå™¨æ è¾“å…¥http://192.168.1.114/thinkphp/ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œthinkphpå·²ç»å¯ä»¥è®¿é—®ã€‚
åè®°å†æ¬¡å¯åŠ¨centosï¼Œåˆ©ç”¨ip addå‘½ä»¤æŸ¥çœ‹åˆ°ipåœ°å€ï¼Œåœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥è¯¥ipåœ°å€ã€‚ç„¶åï¼Œç¥å¥‡çš„äº‹æƒ…å‘ç”Ÿäº†â€”â€”ç½‘ç«™æ— æ³•è®¿é—®ï¼æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œpingè¯¥ipï¼Œæç¤ºâ€œæ— æ³•è®¿é—®ç›®æ ‡ä¸»æœºâ€ã€‚
è§£å†³åŠæ³•ï¼šå…³é—­centosé˜²ç«å¢™ï¼Œæ‰§è¡Œå‘½ä»¤systemctl stop firewalld.serviceã€‚
ä¹¦ç­¾åœ¨CentOSä¸Šæ­å»ºPHPæœåŠ¡å™¨ç¯å¢ƒ
EZHTTPä½¿ç”¨æ•™ç¨‹
EZHTTPå®‰è£…å‰å‡†å¤‡å·¥ä½œ
ä½¿ç”¨EZHTTPå®‰è£…LNMP(Nginx MySQL PHP)
EZHTTPç›¸å…³è¿›ç¨‹ç®¡ç†åŠç›®å½•ä½ç½®
LAMPä¸€é”®å®‰è£…åŒ…
LNMPä¸€é”®å®‰è£…åŒ…
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>centos</tag>
      </tags>
  </entry>
  <entry>
    <title>VirtualBoxä¸‹CentOS7å’ŒUbuntu16.04ç½‘ç»œé…ç½®</title>
    <url>/dev-virtualbox-centos-ubuntu-network/</url>
    <content><![CDATA[å‰è¨€å¼€å‘ä¸­ï¼Œç»å¸¸éœ€è¦ç”¨åˆ°è™šæ‹Ÿæœºï¼Œè™šæ‹Ÿä¸­çš„ç½‘ç»œé…ç½®ï¼Œè®©éƒåŒå­¦å¤´ç–¼äº†å¾ˆä¹…ã€‚ä»Šå¤©ï¼Œä»¥CentOS7å’ŒUbuntu16.04ä¸ºä¾‹ï¼Œå½»åº•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¿‡ç¨‹ä¸­ï¼Œä¼šç©¿æ’xshellå’Œxftpçš„ä½¿ç”¨è¯´æ˜ã€‚


æ¡¥æ¥VirtualBoxè®¾ç½®é€‰ä¸­CentOSï¼Œè®¾ç½®ï¼Œç½‘ç»œï¼Œè¿æ¥æ–¹å¼é€‰æ‹©æ¡¥æ¥ç½‘å¡ã€‚
CentOSçš„ipè®¾ç½®1ã€å¯åŠ¨CentOSï¼Œä½¿ç”¨rootç”¨æˆ·ç™»å½•ã€‚2ã€æŸ¥çœ‹ipï¼šip addã€‚3ã€ç¼–è¾‘ifcfg-enp0s3ï¼Œvi /etc/sysconfig/network-scripts/ifcfg-enp0s3ï¼ŒæŠŠONBOOT=noæ”¹ä¸ºONBOOT=yesã€‚4ã€é‡å¯ç½‘ç»œæœåŠ¡ï¼Œservice network restartã€‚5ã€å†æ¬¡æŸ¥çœ‹ipï¼šip addã€‚
CentOSçš„sshè®¾ç½®1ã€å¯åŠ¨CentOSï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œåˆ‡æ¢åˆ°rootç”¨æˆ·ã€‚2ã€æ£€æŸ¥æ˜¯å¦å®‰è£…äº†sshï¼šrpm -qa | grep sshå¦‚æœæ²¡æœ‰å®‰è£…sshï¼Œåˆ™æ‰§è¡Œå‘½ä»¤ï¼šyum install openssh-server
3ã€å¯åŠ¨sshï¼šservice sshd startå¦‚æœæç¤º:redirecting to /bin/systemctl startï¼Œé‚£ä¹ˆæ”¹ç”¨å‘½ä»¤ï¼š/bin/systemctl start sshd.service
4ã€æ£€æŸ¥æ˜¯å¦å·²ç»æˆåŠŸå¯åŠ¨ï¼šnetstat -antp | grep sshd å¦‚æœçœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼Œåˆ™è¡¨ç¤ºå¯åŠ¨æˆåŠŸã€‚
5ã€è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ï¼šchkconfig sshd on
PSï¼šåˆ©ç”¨å³ctrlé”®æ¥åˆ‡æ¢ä¸»æœºå’Œè™šæ‹Ÿæœºçš„é¼ æ ‡ï¼Œåˆ©ç”¨å³ctrl+Fæ¥åˆ‡æ¢è™šæ‹Ÿæœºå…¨å±çŠ¶æ€ã€‚
xshellè®¾ç½®1ã€æ–‡ä»¶ï¼Œæ–°å»ºï¼Œä¸»æœºå¡«å…¥192.168.1.114ã€‚2ã€é€‰æ‹©ç”¨æˆ·èº«ä»½éªŒè¯ï¼Œè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚3ã€ç‚¹å‡»ç¡®å®šï¼Œå»ºç«‹è¿æ¥ã€‚
å¦‚æœè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥centosçš„é˜²ç«å¢™æ˜¯å¦å…³é—­ã€‚å…³é—­é˜²ç«å¢™å‘½ä»¤ï¼šsystemctl stop firewalld.service
xftpé…ç½®1ã€æ–‡ä»¶ï¼Œæ–°å»ºï¼Œä¸»æœºå¡«å…¥192.168.1.114ã€‚2ã€åè®®é€‰æ‹©SFTPã€‚3ã€è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚4ã€ç‚¹å‡»ç¡®å®šï¼Œå»ºç«‹è¿æ¥ã€‚
æ”¹è¿›é‡‡ç”¨æ¡¥æ¥æ–¹å¼ï¼Œè™šæ‹Ÿæœºä¸­CentOSçš„IPåœ°å€æ˜¯DHCPæœåŠ¡å™¨åŠ¨æ€åˆ†é…çš„ã€‚æ‰€ä»¥æ¯æ¬¡ä½¿ç”¨å‰éœ€è¦ä½¿ç”¨ip addå‘½ä»¤ï¼Œé‡æ–°æŸ¥è¯¢ä¸€ä¸‹CentOSçš„IPåœ°å€ï¼Œç„¶åä¿®æ”¹xshellå’Œxftpä¸­çš„ä¸»æœºåœ°å€ã€‚
å½“å¤–éƒ¨æ²¡æœ‰DHCPæœåŠ¡å™¨æ—¶ï¼Œè™šæ‹Ÿæœºä¹Ÿéœ€è¦æ‹¨å·æ‰èƒ½ä¸Šç½‘ï¼Œå¾ˆéº»çƒ¦ã€‚äºæ˜¯ï¼Œå†æ¬¡ç ”ç©¶Virtualboxç½‘ç»œè®¾ç½®ï¼Œç›—å›¾ä¸€å¼ è¯´æ˜å››ç§è¿æ¥æ–¹å¼åŒºåˆ«ã€‚

æ¯”è¾ƒç®€å•çš„è®¾è®¡ï¼Œæ˜¯æ·»åŠ ä¸¤å¼ ç½‘å¡ã€‚ä¸€å¼ é€‰æ‹©ä»…ä¸»æœºï¼ˆHost-Onlyï¼‰é€‚é…å™¨ï¼Œç”¨äºå®¿ä¸»æœºå’Œè™šæ‹Ÿæœºä¹‹é—´çš„é€šè®¯ï¼Œä½¿å®¿ä¸»æœºå¯ä»¥è®¿é—®è™šæ‹Ÿæœºçš„æœåŠ¡ï¼›ä¸€å¼ é€‰æ‹©ç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰ï¼Œç”¨äºåˆ†äº«å®¿ä¸»æœºç½‘ç»œç»™è™šæ‹Ÿæœºï¼Œä½¿è™šæ‹Ÿæœºå¯ä»¥è®¿é—®å¤–ç½‘ã€‚
ä¸‹é¢è¯¦ç»†è¯´æ˜ä¸€ä¸‹å››ç§è¿æ¥æ–¹å¼çš„ä¸åŒã€‚
NATNATï¼šNetwork Address Translationï¼Œç½‘ç»œåœ°å€è½¬æ¢NATæ¨¡å¼æ˜¯æœ€ç®€å•çš„å®ç°è™šæ‹Ÿæœºä¸Šç½‘çš„æ–¹å¼ï¼Œä½ å¯ä»¥è¿™æ ·ç†è§£ï¼š

Guestè®¿é—®ç½‘ç»œçš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯ç”±ä¸»æœºæä¾›çš„ï¼ŒGuestå¹¶ä¸çœŸå®å­˜åœ¨äºç½‘ç»œä¸­ï¼Œä¸»æœºä¸ç½‘ç»œä¸­çš„ä»»ä½•æœºå™¨éƒ½ä¸èƒ½æŸ¥çœ‹å’Œè®¿é—®åˆ°Guestçš„å­˜åœ¨ã€‚

Guestå¯ä»¥è®¿é—®ä¸»æœºèƒ½è®¿é—®åˆ°çš„æ‰€æœ‰ç½‘ç»œï¼Œä½†æ˜¯å¯¹äºä¸»æœºä»¥åŠä¸»æœºç½‘ç»œä¸Šçš„å…¶ä»–æœºå™¨ï¼ŒGueståˆæ˜¯ä¸å¯è§çš„ï¼Œç”šè‡³ä¸»æœºä¹Ÿè®¿é—®ä¸åˆ°Guestã€‚
è™šæ‹Ÿæœºä¸ä¸»æœºçš„å…³ç³»ï¼šåªèƒ½å•å‘è®¿é—®ï¼Œè™šæ‹Ÿæœºå¯ä»¥é€šè¿‡ç½‘ç»œè®¿é—®åˆ°ä¸»æœºï¼Œä¸»æœºæ— æ³•é€šè¿‡ç½‘ç»œè®¿é—®åˆ°è™šæ‹Ÿæœºã€‚
è™šæ‹Ÿæœºä¸ç½‘ç»œä¸­å…¶ä»–ä¸»æœºçš„å…³ç³»ï¼šåªèƒ½å•å‘è®¿é—®ï¼Œè™šæ‹Ÿæœºå¯ä»¥è®¿é—®åˆ°ç½‘ç»œä¸­å…¶ä»–ä¸»æœºï¼Œå…¶ä»–ä¸»æœºä¸èƒ½é€šè¿‡ç½‘ç»œè®¿é—®åˆ°è™šæ‹Ÿæœºã€‚
è™šæ‹Ÿæœºä¸è™šæ‹Ÿæœºçš„å…³ç³»ï¼šç›¸äº’ä¸èƒ½è®¿é—®ï¼Œè™šæ‹Ÿæœºä¸è™šæ‹Ÿæœºå„è‡ªå®Œå…¨ç‹¬ç«‹ï¼Œç›¸äº’é—´æ— æ³•é€šè¿‡ç½‘ç»œè®¿é—®å½¼æ­¤ã€‚
Bridged Adapterï¼ˆç½‘æ¡¥æ¨¡å¼ï¼‰ç½‘æ¡¥æ¨¡å¼ï¼Œä½ å¯ä»¥è¿™æ ·ç†è§£ï¼š

å®ƒæ˜¯é€šè¿‡ä¸»æœºç½‘å¡ï¼Œæ¶è®¾äº†ä¸€æ¡æ¡¥ï¼Œç›´æ¥è¿å…¥åˆ°ç½‘ç»œä¸­äº†ã€‚å› æ­¤ï¼Œå®ƒä½¿å¾—è™šæ‹Ÿæœºèƒ½è¢«åˆ†é…åˆ°ä¸€ä¸ªç½‘ç»œä¸­ç‹¬ç«‹çš„IPï¼Œæ‰€æœ‰ç½‘ç»œåŠŸèƒ½å®Œå…¨å’Œåœ¨ç½‘ç»œä¸­çš„çœŸå®æœºå™¨ä¸€æ ·ã€‚

ç½‘æ¡¥æ¨¡å¼ä¸‹çš„è™šæ‹Ÿæœºï¼Œä½ æŠŠå®ƒè®¤ä¸ºæ˜¯çœŸå®è®¡ç®—æœºå°±è¡Œäº†ã€‚
è™šæ‹Ÿæœºä¸ä¸»æœºçš„å…³ç³»ï¼šå¯ä»¥ç›¸äº’è®¿é—®ï¼Œå› ä¸ºè™šæ‹Ÿæœºåœ¨çœŸå®ç½‘ç»œæ®µä¸­æœ‰ç‹¬ç«‹IPï¼Œä¸»æœºä¸è™šæ‹Ÿæœºå¤„äºåŒä¸€ç½‘ç»œæ®µä¸­ï¼Œå½¼æ­¤å¯ä»¥é€šè¿‡å„è‡ªIPç›¸äº’è®¿é—®ã€‚
è™šæ‹Ÿæœºäºç½‘ç»œä¸­å…¶ä»–ä¸»æœºçš„å…³ç³»ï¼šå¯ä»¥ç›¸äº’è®¿é—®ï¼ŒåŒæ ·å› ä¸ºè™šæ‹Ÿæœºåœ¨çœŸå®ç½‘ç»œæ®µä¸­æœ‰ç‹¬ç«‹IPï¼Œè™šæ‹Ÿæœºä¸æ‰€æœ‰ç½‘ç»œå…¶ä»–ä¸»æœºå¤„äºåŒä¸€ç½‘ç»œæ®µä¸­ï¼Œå½¼æ­¤å¯ä»¥é€šè¿‡å„è‡ªIPç›¸äº’è®¿é—®ã€‚
è™šæ‹Ÿæœºä¸è™šæ‹Ÿæœºçš„å…³ç³»ï¼šå¯ä»¥ç›¸äº’è®¿é—®ï¼ŒåŸå› åŒä¸Šã€‚
Internalï¼ˆå†…ç½‘æ¨¡å¼ï¼‰å†…ç½‘æ¨¡å¼ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯å†…éƒ¨ç½‘ç»œæ¨¡å¼ï¼š

è™šæ‹Ÿæœºä¸å¤–ç½‘å®Œå…¨æ–­å¼€ï¼Œåªå®ç°è™šæ‹Ÿæœºäºè™šæ‹Ÿæœºä¹‹é—´çš„å†…éƒ¨ç½‘ç»œæ¨¡å¼ã€‚

è™šæ‹Ÿæœºä¸ä¸»æœºçš„å…³ç³»ï¼šä¸èƒ½ç›¸äº’è®¿é—®ï¼Œå½¼æ­¤ä¸å±äºåŒä¸€ä¸ªç½‘ç»œï¼Œæ— æ³•ç›¸äº’è®¿é—®ã€‚
è™šæ‹Ÿæœºä¸ç½‘ç»œä¸­å…¶ä»–ä¸»æœºçš„å…³ç³»ï¼šä¸èƒ½ç›¸äº’è®¿é—®ï¼Œç†ç”±åŒä¸Šã€‚
è™šæ‹Ÿæœºä¸è™šæ‹Ÿæœºçš„å…³ç³»ï¼šå¯ä»¥ç›¸äº’è®¿é—®ï¼Œå‰ææ˜¯åœ¨è®¾ç½®ç½‘ç»œæ—¶ï¼Œä¸¤å°è™šæ‹Ÿæœºè®¾ç½®åŒä¸€ç½‘ç»œåç§°ã€‚å¦‚ä¸Šé…ç½®å›¾ä¸­ï¼Œåç§°ä¸ºintnetã€‚
Host-only Adapterï¼ˆä¸»æœºæ¨¡å¼ï¼‰ä¸»æœºæ¨¡å¼ï¼Œè¿™æ˜¯ä¸€ç§æ¯”è¾ƒå¤æ‚çš„æ¨¡å¼ï¼Œéœ€è¦æœ‰æ¯”è¾ƒæ‰å®çš„ç½‘ç»œåŸºç¡€çŸ¥è¯†æ‰èƒ½ç©è½¬ã€‚å¯ä»¥è¯´å‰é¢å‡ ç§æ¨¡å¼æ‰€å®ç°çš„åŠŸèƒ½ï¼Œåœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œé€šè¿‡è™šæ‹ŸæœºåŠç½‘å¡çš„è®¾ç½®éƒ½å¯ä»¥è¢«å®ç°ã€‚
æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºGueståœ¨ä¸»æœºä¸­æ¨¡æ‹Ÿå‡ºä¸€å¼ ä¸“ä¾›è™šæ‹Ÿæœºä½¿ç”¨çš„ç½‘å¡ï¼Œæ‰€æœ‰è™šæ‹Ÿæœºéƒ½æ˜¯è¿æ¥åˆ°è¯¥ç½‘å¡ä¸Šçš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®è¿™å¼ ç½‘å¡æ¥å®ç°ä¸Šç½‘åŠå…¶ä»–å¾ˆå¤šåŠŸèƒ½ï¼Œæ¯”å¦‚ï¼ˆç½‘å¡å…±äº«ã€ç½‘å¡æ¡¥æ¥ç­‰ï¼‰ã€‚
è™šæ‹Ÿæœºä¸ä¸»æœºçš„å…³ç³»ï¼šé»˜è®¤ä¸èƒ½ç›¸äº’è®¿é—®ï¼ŒåŒæ–¹ä¸å±äºåŒä¸€IPæ®µï¼Œhost-onlyç½‘å¡é»˜è®¤IPæ®µä¸º192.168.56.X å­ç½‘æ©ç ä¸º255.255.255.0ï¼Œåé¢çš„è™šæ‹Ÿæœºè¢«åˆ†é…åˆ°çš„ä¹Ÿéƒ½æ˜¯è¿™ä¸ªç½‘æ®µã€‚é€šè¿‡ç½‘å¡å…±äº«ã€ç½‘å¡æ¡¥æ¥ç­‰ï¼Œå¯ä»¥å®ç°è™šæ‹Ÿæœºäºä¸»æœºç›¸äº’è®¿é—®ã€‚
è™šæ‹Ÿæœºä¸ç½‘ç»œä¸»æœºçš„å…³ç³»ï¼šé»˜è®¤ä¸èƒ½ç›¸äº’è®¿é—®ï¼ŒåŸå› åŒä¸Šï¼Œé€šè¿‡è®¾ç½®ï¼Œå¯ä»¥å®ç°ç›¸äº’è®¿é—®ã€‚
è™šæ‹Ÿæœºä¸è™šæ‹Ÿæœºçš„å…³ç³»ï¼šé»˜è®¤å¯ä»¥ç›¸äº’è®¿é—®ï¼Œéƒ½æ˜¯åŒå¤„äºä¸€ä¸ªç½‘æ®µã€‚
ä¿®æ­£é‡‡ç”¨ä¸»æœºæ¨¡å¼ï¼Œè™šæ‹Ÿæœºä¸ä¸»æœºçš„å…³ç³»ï¼Œé»˜è®¤å¯ä»¥ç›¸äº’è®¿é—®ã€‚å› ä¸ºï¼Œä¸»æœºIPåœ°å€é»˜è®¤ä¸º192.168.56.1ï¼Œè™šæ‹Ÿæœºçš„IPåœ°å€ä¸º192.168.56.Xã€‚æ‰€ä»¥ï¼Œç†è®ºä¸Šè™šæ‹Ÿæœºå’Œä¸»æœºå¯ä»¥ç›¸äº’è®¿é—®ã€‚äº²æµ‹è¯æ˜ï¼Œè™šæ‹Ÿæœºå’Œä¸»æœºç¡®å®å¯ä»¥äº’ç›¸è®¿é—®ã€‚
CentOS7ç›¸å…³æ·»åŠ ç½‘ç»œå‘½ä»¤CentOS7æ²¡æœ‰netstat å’Œ ifconfigå‘½ä»¤ï¼Œyum install net-toolsã€‚CentOS7æŸ¥çœ‹ç½‘ç»œé…ç½®ï¼Œifconfig -aæˆ–è€…ip addï¼Œå¦‚æœæ²¡æœ‰è·å–åˆ°IPåœ°å€ï¼Œvi /etc/sysconfig/network-scripts/ifcfg-enp0s3ï¼Œä¿®æ”¹ONBOOT=noä¸ºONBOOT=yesï¼Œç„¶åservice network restartã€‚
ä¿®æ”¹æ—¶åŒºCentOS7ä¿®æ”¹æ—¶åŒºï¼Œcp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime ã€‚
è®¾ç½®é™æ€IPç¬¬ä¸€ç½‘å¡è®¾ç½®ä¸ºå›ºå®šIPï¼Œifcfg-enp0s3åŸé…ç½®ï¼š
TYPE=EthernetBOOTPROTO=dhcpDEFROUTE=yesPEERDNS=yesPEERROUTES=yesIPV4_FAILURE_FATAL=noIPV6INIT=yesIPV6_AUTOCONF=yesIPV6_DEFROUTE=yesIPV6_PEERDNS=yesIPV6_PEERROUTES=yesIPV6_FAILURE_FATAL=noNAME=enp0s3UUID=459b17a4-fd16-4ea7-8a4b-9509b6e899e7DEVICE=enp0s3ONBOOT=yes

ifcfg-enp0s3ä¿®æ”¹ä¸ºï¼š
TYPE=EthernetBOOTPROTO=staticIPADDR=192.168.56.101NETMASK=255.255.255.0NM_CONTROLLED=noDEFROUTE=yesPEERDNS=yesPEERROUTES=yesIPV4_FAILURE_FATAL=noIPV6INIT=yesIPV6_AUTOCONF=yesIPV6_DEFROUTE=yesIPV6_PEERDNS=yesIPV6_PEERROUTES=yesIPV6_FAILURE_FATAL=noNAME=enp0s3UUID=459b17a4-fd16-4ea7-8a4b-9509b6e899e7DEVICE=enp0s3ONBOOT=yes

Ubuntuç›¸å…³ä¿®æ”¹rootå¯†ç ä¿®æ”¹rootå¯†ç ï¼Œsudo passwd rootã€‚
å®‰è£…sshæœåŠ¡å®‰è£…sshæœåŠ¡ï¼Œapt-get install openssh-serverï¼Œå¦‚æœæç¤ºæ‰¾ä¸åˆ°å®‰è£…åŒ…ï¼Œæ‰§è¡Œapt-get updateã€‚
å…è®¸ä»¥rootç”¨æˆ·é€šè¿‡sshç™»å½•ï¼Œvi /etc/ssh/sshd_configï¼Œæ‰¾åˆ°ï¼š
# Authentication:LoginGraceTime 120PermitRootLogin prohibit-passwordStrictModes yes
ä¿®æ”¹ä¸ºï¼š
# Authentication:LoginGraceTime 120#PermitRootLogin prohibit-passwordPermitRootLogin yesStrictModes yes

ç„¶åé‡å¯sshæœåŠ¡ï¼Œservice ssh restartã€‚
è®¾ç½®é™æ€IPæŸ¥çœ‹ç½‘ç»œé…ç½®ï¼Œifconfig -aï¼Œå¦‚æœåªæ˜¾ç¤ºä¸€ä¸ªç½‘å¡ï¼Œæ‰§è¡Œvi /etc/network/interfacesã€‚interfacesåŸé…ç½®ä¸ºï¼š
# This file describes the network interfaces available on your system# and how to activate them. For more information, see interfaces(5).source /etc/network/interfaces.d/*# The loopback network interfaceauto loiface lo inet loopback# The primary network interfaceauto enp0s3iface enp0s3 inet dhcp

æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š
# The second network interfaceauto enp0s8iface enp0s8 inet dhcp

ç„¶åé‡å¯ç½‘ç»œæœåŠ¡ï¼Œ/etc/init.d/networking restartã€‚
ç¬¬ä¸€ç½‘å¡è®¾ç½®ä¸ºå›ºå®šIPï¼š
# The primary network interfaceauto enp0s3iface enp0s3 inet static  address 192.168.56.102 netmask 255.255.255.0  

ç„¶åé‡å¯ç¬¬ä¸€å¼ ç½‘å¡ï¼Œsudo ifdown enp0s3ï¼Œsudo ifup enp0s3ã€‚å¦‚æœæŠ¥é”™ï¼šRTNETLINK answers: File existsï¼Œé‚£å°±å…ˆæ‰§è¡Œä¸€ä¸‹sudo ip addr flush dev enp0s3ã€‚
ä¿®æ”¹ç½‘å¡åç½‘å¡åå«enp0s3è¿™ç§åå­—ï¼Œå¾ˆä¸å‹å¥½ï¼Œä¸å¦‚ubuntu14ä¸­çš„eth0çœ‹èµ·æ¥èˆ’æœã€‚
1ã€ç¼–è¾‘grubæ–‡ä»¶sudo vim /etc/default/grub
æ‰¾åˆ°ï¼š
GRUB_CMDLINE_LINUX=&quot;&quot;

ä¿®æ”¹ä¸ºï¼š
GRUB_CMDLINE_LINUX=&quot;net.ifnames=0 biosdevname=0&quot;

2ã€é‡æ–°ç”Ÿæˆgrubé…ç½®sudo grub-mkconfig -o /boot/grub/grub.cfg
3ã€ä¿®æ”¹/etc/network/interfacesä¸­çš„enp0s3ä¸ºeth0ï¼Œenp0s8ä¿®æ”¹ä¸ºeth1ã€‚
4ã€é‡å¯sudo reboot
ä¿®æ”¹ä¸»æœºå1ã€ç¼–è¾‘/etc/hostnamesudo vim /etc/hostname
ä¿®æ”¹ä¸ºæƒ³è¦çš„ä¸»æœºåï¼Œæ¯”å¦‚controllerã€‚
2ã€ç¼–è¾‘/etc/hostssudo vim /etc/hosts
æ·»åŠ æˆ–ç¼–è¾‘ï¼š
127.0.0.1  controller

3ã€é‡å¯sudo reboot
åè®°ä»¥åä¸ç©å›¾å½¢ç•Œé¢çš„linuxäº†ï¼Œä¸“æ³¨äºæœåŠ¡å™¨é…ç½®ã€‚
ä¹¦ç­¾å¦‚ä½•å¼€å¯Centos6.4ç³»ç»Ÿçš„SSHæœåŠ¡http://jingyan.baidu.com/article/3ea51489f9efbf52e61bba05.html
é€šè¿‡SSHè¿æ¥VirtualBoxä¸­çš„CentOShttp://www.2cto.com/os/201212/172712.html
VirtualBox + CentOS è™šæ‹Ÿæœºç½‘å¡é…ç½®http://my.oschina.net/duangr/blog/182541
CentOS 7 ç½‘ç»œé…ç½®http://simonhu.blog.51cto.com/196416/1588971
centOS7åœ¨VirtualBoxä¸­è£…å¥½åçš„ç½‘ç»œè¿æ¥é—®é¢˜http://jingyan.baidu.com/article/456c463b4a98460a5931444c.html
å¿«é€Ÿç†è§£VirtualBoxçš„å››ç§ç½‘ç»œè¿æ¥æ–¹å¼http://www.cnblogs.com/york-hust/archive/2422911.html
CentOS 7 ä¿®æ”¹æ—¶åŒºhttp://blog.csdn.net/robertsong2004/article/details/42268701
centOS7åœ¨VirtualBoxä¸­è£…å¥½åçš„ç½‘ç»œè¿æ¥é—®é¢˜http://jingyan.baidu.com/article/456c463b4a98460a5931444c.html
virtualBoxä¸‹Centosç³»ç»Ÿæ‰©å±•ç£ç›˜ç©ºé—´è¯¦ç»†æ•™ç¨‹http://blog.csdn.net/timecolor/article/details/48468377
virtualboxä¸­ubuntuç¡¬ç›˜æ‰©å±•ï¼ŒGpartedæ— æ³•è¿›å…¥å›¾å½¢ç•Œé¢http://blog.sina.com.cn/s/blog_7149fc900102wvxh.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>ssh</tag>
        <tag>centos</tag>
        <tag>ç½‘ç»œ</tag>
        <tag>virtualbox</tag>
        <tag>xshell</tag>
        <tag>xftp</tag>
      </tags>
  </entry>
  <entry>
    <title>ThinkPHPå¼€å‘ç¯å¢ƒæ­å»º</title>
    <url>/dev-thinkphp-environment/</url>
    <content><![CDATA[å‰è¨€8æœˆ12å·ï¼ŒæŠµè¾¾ä¸œåŒ—å¸ˆèŒƒï¼Œå¼€å¯äº†é—­å…³ä¿®ç‚¼æ¨¡å¼ã€‚å…¥æ‰‹çš„ç¬¬ä¸€ä¸ªé¡¹ç›®ï¼Œå°å¤ªé˜³ï¼Œæœ‰æ„æ€çš„åå­—ã€‚è¿™æ˜¯ä¸€ä¸ªç‰©ä¸šç®¡ç†ç³»ç»Ÿï¼Œåˆ†ä¸ºä¸šä¸»ç«¯ã€ç‰©ä¸šç«¯ã€CMSç«¯ï¼Œè®¡åˆ’ä½¿ç”¨ThinkPHPæ¡†æ¶æ¥å¼€å‘ã€‚PHPï¼Œå¥½ä¹…ä¸è§ï¼Œå€æ„Ÿäº²åˆ‡ã€‚


PHPè¿è¡Œç¯å¢ƒPHPè¿è¡Œï¼Œéœ€è¦ä¸¤ä¸ªæ¡ä»¶ï¼Œä¸€ä¸ªæ˜¯Apacheå®¹å™¨ï¼Œå¦ä¸€ä¸ªæ˜¯PHPç¨‹åºã€‚å¾ˆå¤šæƒ…å†µä¸‹ï¼Œè¿˜éœ€è¦Mysqlæ•°æ®åº“ã€‚æœ¬æ¬¡ç¯å¢ƒæ­å»ºä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨é›†æˆç¯å¢ƒWAMPServerï¼Œæœ¬ç¯å¢ƒåŒ…å«äº†ä»¥ä¸Šä¸‰ä¸ªè½¯ä»¶ã€‚çœå´äº†å¾ˆå¤šé…ç½®ï¼Œå¾ˆæ–¹ä¾¿ã€‚å…¶ä¸­ï¼ŒWä»£è¡¨Windowsï¼ŒAä»£è¡¨Apacheï¼ŒMä»£è¡¨Mysqlï¼ŒPä»£è¡¨PHPã€‚
ä¸‹è½½WAMPServerWAMPSeverå®˜ç½‘ï¼šhttp://www.wampserver.com/ä¸ç¿»å¢™çš„è¯ï¼Œå¯èƒ½ä¸‹è½½ä¸ä¸‹æ¥ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ª360ç½‘ç›˜çš„ä¸‹è½½é“¾æ¥ï¼šhttps://yunpan.cn/c6CkFLeumMZVv  è®¿é—®å¯†ç  38f7
MSVCR110è¿è¡ŒWAMPServerï¼ŒæŠ¥é”™ï¼š
å¦‚æœæ˜¯64ä½ç³»ç»Ÿï¼Œä¸‹è½½å®‰è£…vcredist_x64.exeï¼Œå³å¯è§£å†³è¯¥é”™è¯¯ï¼Œ32ä½åŒç†ä¸‹è½½vcredist_x86.exeã€‚å¾®è½¯å®˜ç½‘ä¸‹è½½ï¼šhttp://www.microsoft.com/zh-CN/download/details.aspx?id=30679
360ç½‘ç›˜çš„ä¸‹è½½é“¾æ¥ï¼šhttps://yunpan.cn/c6C2FxHGXTabm  è®¿é—®å¯†ç  f641
æŸ¥çœ‹è¿è¡Œæ•ˆæœæˆåŠŸè¿è¡ŒWAMPSeveråï¼Œæˆ‘ä»¬å‘ç°æ¡Œé¢å³ä¸‹è§’å¤šäº†ä¸€ä¸ªWAMPSeverçš„logoã€‚è¿™æ—¶åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥http://localhostï¼Œå³å¯çœ‹åˆ°WAMPçš„ä¸€äº›ä¿¡æ¯ã€‚
phpmyadminåœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥http://localhost/phpmyadmin/ï¼Œå¯ä»¥çœ‹åˆ°phpmyadminçš„ç™»å½•ç•Œé¢ã€‚é»˜è®¤ç”¨æˆ·åä¸ºrootï¼Œå¯†ç ä¸ºç©ºã€‚
ä¸‹è½½å®‰è£…ThinkPHPä¸‹è½½ThinkPHPå®˜ç½‘ï¼šhttp://www.thinkphp.cn/360ç½‘ç›˜çš„ä¸‹è½½é“¾æ¥ï¼šhttps://yunpan.cn/c6CvrUtM6C6X4  è®¿é—®å¯†ç  ebd1
å®‰è£…1ã€è§£å‹åˆ°thinkphp_3.2.3_fullã€‚2ã€é‡å‘½åthinkphp_3.2.3_fullæ–‡ä»¶å¤¹ä¸ºthinkphpã€‚3ã€å‰ªåˆ‡thinkphpæ–‡ä»¶å¤¹åˆ°WAMPå®‰è£…ç›®å½•ä¸‹çš„wwwæ–‡ä»¶å¤¹ä¸­ã€‚æ¯”å¦‚æˆ‘çš„WAMPå®‰è£…ç›®å½•ä¸ºD:\Server\wamp64ï¼Œé‚£ä¹ˆå°±æŠŠthinkphpæ”¾åˆ°D:\Server\wamp64\wwwä¸­ã€‚
æŸ¥çœ‹è¿è¡Œç»“æœåœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥http://localhost/thinkphpï¼Œå³å¯çœ‹åˆ°thinkphpçš„ä¸€äº›ä¿¡æ¯ã€‚
åè®°è‡³æ­¤ï¼ŒThinkPHPçš„å¼€å‘ç¯å¢ƒæ­å»ºæˆåŠŸï¼Œæ¥ä¸‹æ¥å¯ä»¥æ„‰å¿«åœ°å¼€å‘äº†ï¼
é™„ä¸Šå¦å¤–å‡ æ¬¾å¸¸è§çš„PHPé›†æˆç¯å¢ƒï¼š1ã€AppServ2ã€WAMPP3ã€ServKitï¼ˆåŸåPHPnowï¼‰4ã€UPUPW
ä¹¦ç­¾PHPå…¥é—¨ç¯‡http://www.imooc.com/learn/54
ThinkPHP3.2å®Œå…¨å¼€å‘æ‰‹å†Œhttp://document.thinkphp.cn/manual_3_2.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title>å¾®ä¿¡å…¬ä¼—å·æ”¯ä»˜æµç¨‹</title>
    <url>/dev-weixinpay-process/</url>
    <content><![CDATA[å‰è¨€èŠ±è´¹äº†ä¸€å¤©æ—¶é—´ï¼Œè°ƒé€šäº†å¾®ä¿¡å…¬ä¼—å·æ”¯ä»˜ã€‚ä½œä¸‹è®°å½•ï¼Œæ–¹ä¾¿ä»¥åå†æ¬¡å¡«å‘ã€‚å…ˆå£°æ˜ï¼Œå¾®ä¿¡å…¬ä¼—å·æ”¯ä»˜ï¼Œä¸åŒäºå¾®ä¿¡H5æ”¯ä»˜ï¼Œè¿™ç‚¹åœ¨æœ¬æ–‡ç»“æŸæ—¶å†è¯¦ç»†è¯´æ˜ã€‚


å¾®ä¿¡é…ç½®è®¾ç½®æµ‹è¯•ç›®å½•åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°è®¾ç½®ï¼Œæ ç›®è§ä¸‹å›¾ã€‚æ”¯ä»˜æµ‹è¯•çŠ¶æ€ä¸‹ï¼Œè®¾ç½®æµ‹è¯•ç›®å½•ï¼Œæµ‹è¯•äººçš„å¾®ä¿¡å·æ·»åŠ åˆ°ç™½åå•ï¼Œå‘èµ·æ”¯ä»˜çš„é¡µé¢ç›®å½•å¿…é¡»ä¸è®¾ç½®çš„ç²¾ç¡®åŒ¹é…ã€‚å¹¶å°†æ”¯ä»˜é“¾æ¥å‘åˆ°å¯¹åº”çš„å…¬ä¼—å·ä¼šè¯çª—å£ä¸­æ‰èƒ½æ­£å¸¸å‘èµ·æ”¯ä»˜æµ‹è¯•ã€‚æ³¨æ„æ­£å¼ç›®å½•ä¸€å®šä¸èƒ½ä¸æµ‹è¯•ç›®å½•è®¾ç½®æˆä¸€æ ·ï¼Œå¦åˆ™æ”¯ä»˜ä¼šå‡ºé”™ã€‚
è®¾ç½®æ­£å¼æ”¯ä»˜ç›®å½•æ ¹æ®å›¾ä¸­æ ç›®é¡ºåºè¿›å…¥ä¿®æ”¹æ ç›®ï¼Œå‹¾é€‰JSAPIç½‘é¡µæ”¯ä»˜å¼€é€šè¯¥æƒé™ï¼Œå¹¶é…ç½®å¥½æ”¯ä»˜æˆæƒç›®å½•ï¼Œè¯¥ç›®å½•å¿…é¡»æ˜¯å‘èµ·æ”¯ä»˜çš„é¡µé¢çš„ç²¾ç¡®ç›®å½•ï¼Œå­ç›®å½•ä¸‹æ— æ³•æ­£å¸¸è°ƒç”¨æ”¯ä»˜ã€‚å…·ä½“ç•Œé¢å¦‚å›¾æ‰€ç¤ºï¼š
äº¤äº’æµç¨‹ä¸šåŠ¡æµç¨‹æ—¶åºå›¾é¦–å…ˆçœ‹ä¸‹å¾®ä¿¡å®˜æ–¹ç»™å‡ºçš„äº¤äº’æµç¨‹ï¼š
æœåŠ¡å™¨äº¤äº’å¾®ä¿¡å…¬ä¼—å·æ”¯ä»˜çš„æµç¨‹ï¼Œç®€è€Œè¨€ä¹‹åªæœ‰ä¸¤æ­¥ã€‚ç¬¬ä¸€æ­¥ï¼Œä¸‹å•ï¼Œæ‹¿åˆ°prepay_idç­‰ä¿¡æ¯ï¼›ç¬¬äºŒæ­¥ï¼Œåˆ©ç”¨ç¬¬ä¸€æ­¥æ‹¿åˆ°çš„prepay_idç­‰ä¿¡æ¯è¿›è¡Œæ”¯ä»˜ã€‚
ä»£ç Nodeç«¯// å¾®ä¿¡æ”¯ä»˜exports.weixinpay = function(req, res)&#123;  var orderId = req.params.orderId;  var selectSum = req.params.selectSum;  var token = req.params.token;  // è·å–code  if(!req.query.code)&#123;    var r_url = &#x27;http://&#x27; +config.host+&#x27;/artist/weixinpay/&#x27;+orderId+&#x27;/&#x27;+selectSum+&#x27;/&#x27;+token;    var url = &#x27;https://open.weixin.qq.com/connect/oauth2/authorize?appid=&#x27;+config.weixin.appid+&#x27;&amp;redirect_uri=&#x27;+urlencode(r_url)+&#x27;&amp;response_type=code&amp;scope=snsapi_userinfo&amp;state=111#wechat_redirect&#x27;;    res.redirect(url);  &#125;else&#123;    var code = req.query.code;    var state = req.query.state;    var ep = new eventproxy();    ep.all(&#x27;userInfo&#x27;,function(userInfoData)&#123;      var userInfoData = JSON.parse(userInfoData);      res.render(&#x27;artist/weixinpay&#x27;,&#123;        // å…¶ä»–æ•°æ®        openid: userInfoData.openid,        orderId: orderId,        selectSum: selectSum,        token: token      &#125;);    &#125;);    // è·å–ç”¨æˆ·ä¿¡æ¯userInfo  &#125;&#125;exports.weixinpay2 = function(req, res)&#123;  var wxParamUrl = config.apihost + &#x27;/order/getH5SubOrderforWechat&#x27;;  var param = &#123;    orderId: req.query.orderId,    selectSum: req.query.selectSum,    accessToken: req.query.token,    openId: req.query.openid  &#125;;  request.post(&#123;url: wxParamUrl,form: JSON.stringify(param)&#125;,function(error, response, body)&#123;        res.render(&#x27;artist/weixinpay2&#x27;,&#123;      // å…¶ä»–æ•°æ®      wxParam: JSON.parse(response.body)    &#125;);  &#125;);&#125;

ä¸Šé¢çš„ä»£ç çœ‹èµ·æ¥å¾ˆå¥‡æ€ªï¼Œä¸ºä»€ä¹ˆéœ€è¦ä¸€ä¸ªweixinpay2å‡½æ•°ï¼Ÿä»£ç å…¨éƒ¨æ”¾åœ¨weixinpayå‡½æ•°é‡Œé¢ï¼Œç„¶ååœ¨weixinpay.htmlé‡Œè°ƒç”¨å¾®ä¿¡æ”¯ä»˜æ¥å£ï¼Œä¸æ˜¯å¾ˆå¥½ä¹ˆï¼Ÿè¿™ä¸ªï¼Œå°±æ¶‰åŠåˆ°æ”¯ä»˜ç›®å½•çš„é—®é¢˜äº†ã€‚weixinpayå‡½æ•°ä¸­ï¼Œå¾®ä¿¡æˆæƒè·å–ç”¨æˆ·ä¿¡æ¯åçš„å›è°ƒurlï¼Œç›®å½•å¤ªæ·±ï¼Œè€Œä¸”ä¸ç¡®å®šï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯é€šè¿‡ç›®å½•æ¥ä¼ é€’å‚æ•°çš„ã€‚è¿™æ ·ï¼Œå°±æ— æ³•åœ¨å¾®ä¿¡å…¬ä¼—å·ä¸Šé¢è®¾ç½®æ”¯ä»˜æˆæƒç›®å½•ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨weixinpay.htmlè¿™ä¸ªé¡µé¢å‘èµ·æ”¯ä»˜è¯·æ±‚ï¼Œåªèƒ½æŠŠå‚æ•°è½¬å‘ç»™ä¸‹ä¸€ä¸ªweixinpay2.htmlé¡µé¢ï¼Œåœ¨weixinpap2.htmlä¸­å‘èµ·æ”¯ä»˜è¯·æ±‚ã€‚
é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆè·å–ç”¨æˆ·ä¿¡æ¯åçš„å›è°ƒurlç›®å½•å¤ªæ·±ï¼Ÿç›´æ¥æŠŠorderIdç­‰ä¿¡æ¯å½“åšå‚æ•°æ”¾åœ¨å›è°ƒurlåé¢ä¸å°±å¯ä»¥äº†å—ï¼Ÿå¾ˆé—æ†¾ï¼Œå›è°ƒurlæ— æ³•å¸¦å…¥ä½ çš„è‡ªå®šä¹‰å‚æ•°ã€‚å› æ­¤ï¼Œåªèƒ½æŠŠå‚æ•°å½“åšå›è°ƒurlçš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯ç›®å½•çš„ä¸€éƒ¨åˆ†ã€‚
ç»¼ä¸Šï¼Œweixinpayå‡½æ•°è´Ÿè´£è·å–ç”¨æˆ·çš„openidï¼Œweixinpay.htmlè´Ÿè´£è·³è½¬weixinpay2.htmlï¼›weixinpay2å‡½æ•°è´Ÿè´£è·å–è°ƒç”¨å¾®ä¿¡JSAPIçš„å‚æ•°ï¼Œweixinpay2.htmlè´Ÿè´£è°ƒç”¨å¾®ä¿¡JSAPIã€‚
html&lt;!--weixinpay.html--&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;å¾®ä¿¡æ”¯ä»˜&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;a id=&quot;weixin-link&quot; href=&quot;/artist/weixinpay2?orderId=&lt;%= orderId%&gt;&amp;selectSum=&lt;%= selectSum%&gt;&amp;token=&lt;%= token%&gt;&amp;openid=&lt;%= openid%&gt;&quot; style=&quot;display: none&quot;&gt;å¾®ä¿¡æ”¯ä»˜&lt;/a&gt;&lt;script&gt;    var link = document.getElementById(&#x27;weixin-link&#x27;);    link.click();&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;

&lt;!--weixinpay2.html--&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;å¾®ä¿¡æ”¯ä»˜&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;input id=&quot;appId&quot; type=&quot;hidden&quot; value=&quot;&lt;%= wxParam.obj.appid%&gt;&quot;&gt;    &lt;input id=&quot;timeStamp&quot; type=&quot;hidden&quot; value=&quot;&lt;%= wxParam.obj.timestamp%&gt;&quot;&gt;    &lt;input id=&quot;nonceStr&quot; type=&quot;hidden&quot; value=&quot;&lt;%= wxParam.obj.noncestr%&gt;&quot;&gt;    &lt;input id=&quot;package&quot; type=&quot;hidden&quot; value=&quot;&lt;%= wxParam.obj.packagestr%&gt;&quot;&gt;    &lt;input id=&quot;signType&quot; type=&quot;hidden&quot; value=&quot;MD5&quot;&gt;    &lt;input id=&quot;paySign&quot; type=&quot;hidden&quot; value=&quot;&lt;%= wxParam.obj.sign%&gt;&quot;&gt;&lt;script&gt;function onBridgeReady()&#123;    var appId = document.getElementById(&#x27;appId&#x27;).value;    var timeStamp = document.getElementById(&#x27;timeStamp&#x27;).value;    var nonceStr = document.getElementById(&#x27;nonceStr&#x27;).value;    var package = document.getElementById(&#x27;package&#x27;).value;    var signType = document.getElementById(&#x27;signType&#x27;).value;    var paySign = document.getElementById(&#x27;paySign&#x27;).value;    WeixinJSBridge.invoke(        &#x27;getBrandWCPayRequest&#x27;, &#123;            &quot;appId&quot;: appId,     //å…¬ä¼—å·åç§°ï¼Œç”±å•†æˆ·ä¼ å…¥                 &quot;timeStamp&quot;:timeStamp,         //æ—¶é—´æˆ³ï¼Œè‡ª1970å¹´ä»¥æ¥çš„ç§’æ•°                 &quot;nonceStr&quot;: nonceStr, //éšæœºä¸²                 &quot;package&quot;: package,                 &quot;signType&quot;: signType,         //å¾®ä¿¡ç­¾åæ–¹å¼ï¼š                 &quot;paySign&quot;: paySign //å¾®ä¿¡ç­¾å         &#125;,        function(res)&#123;            WeixinJSBridge.log(res.err_msg);            //alert(res.err_code + res.err_desc + res.err_msg);            if (res.err_msg == &quot;get_brand_wcpay_request:ok&quot;) &#123;                  window.location.href = &#x27;/artist/alipayresult?trade_status=TRADE_SUCCESS&#x27;;                // æ‰§è¡Œè·³è½¬é¡µé¢....              &#125; else if (res.err_msg == &quot;get_brand_wcpay_request:cancel&quot;) &#123;                  alert (&quot;ç”¨æˆ·å–æ¶ˆæ”¯ä»˜!&quot;);              &#125; else &#123;                  alert (&quot;æ”¯ä»˜å¤±è´¥!&quot;);              &#125;                      &#125;    ); &#125;if (typeof WeixinJSBridge == &quot;undefined&quot;)&#123;    if( document.addEventListener )&#123;        document.addEventListener(&#x27;WeixinJSBridgeReady&#x27;, onBridgeReady, false);    &#125;else if (document.attachEvent)&#123;        document.attachEvent(&#x27;WeixinJSBridgeReady&#x27;, onBridgeReady);         document.attachEvent(&#x27;onWeixinJSBridgeReady&#x27;, onBridgeReady);    &#125;&#125;else&#123;    onBridgeReady();&#125;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;

ä¸ºäº†åŠ å¿«æ‰§è¡Œé€Ÿåº¦ï¼Œè¿™é‡Œçš„ä¸¤ä¸ªé¡µé¢ä¸­ï¼Œéƒ½ä½¿ç”¨åŸç”Ÿçš„jsæ¥å®ç°é¡µé¢é€»è¾‘ã€‚
é”™è¯¯æ”¯ä»˜éªŒè¯ç­¾åå¤±è´¥å¾ˆæ˜æ˜¾ï¼Œæ”¯ä»˜éªŒè¯ç­¾åå¤±è´¥ã€‚æ€ä¹ˆåˆ¤æ–­ç®—å‡ºçš„ç­¾åæ˜¯å¦æ­£ç¡®ï¼Ÿä½¿ç”¨å¾®ä¿¡æ”¯ä»˜æ¥å£ç­¾åæ ¡éªŒå·¥å…·ã€‚æ ¡éªŒæ–¹å¼é€‰æ‹©è‡ªå®šä¹‰å‚æ•°ï¼ŒæŠŠéœ€è¦ç­¾åçš„å‚æ•°åç§°å’Œå‚æ•°å€¼è¾“å…¥é¡µé¢ï¼Œç‚¹å‡»ç”Ÿæˆç­¾åå³å¯ã€‚
å½“å‰é¡µé¢çš„URLæœªæ³¨å†Œä¸å¥½æ„æ€ï¼Œè¿™ä¸ªé”™è¯¯å¿˜è®°æˆªå›¾äº†ã€‚å€Ÿæ¥äº†ä¸€å¼ å›¾ï¼Œå‡‘åˆç€çœ‹ã€‚è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯ç”±äºè°ƒç”¨æ”¯ä»˜æ¥å£çš„urlä¸å¯¹ï¼é‚£ä¹ˆï¼Œæ€æ ·æ˜¯å¯¹çš„å‘¢ï¼Ÿä¸¾ä¸ªæ —å­ï¼šå¦‚æœè°ƒç”¨æ”¯ä»˜æ¥å£çš„urlä¸ºhttp://wx.voidking.com/pay/weixinpayï¼Œé‚£ä¹ˆå¾®ä¿¡å…¬ä¼—å¹³å°ä¸Šçš„æ”¯ä»˜æˆæƒç›®å½•åº”è¯¥è®¾ç½®ä¸ºhttp://wx.voidking.com/pay/ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ”¯ä»˜æˆæƒç›®å½•åº”è¯¥è®¾ç½®ä¸ºè°ƒç”¨æ”¯ä»˜æ¥å£çš„urlçš„ä¸Šä¸€çº§ç›®å½•ã€‚
æ”¯ä»˜æˆåŠŸ
åè®°å¾®ä¿¡å…¬ä¼—å·æ”¯ä»˜ï¼Œä¸¤ä¸ªç¼ºç‚¹ï¼Œä¸€æ˜¯å¿…é¡»åœ¨å¾®ä¿¡æµè§ˆå™¨ä½¿ç”¨ï¼ŒäºŒæ˜¯å¿…é¡»æœ‰ä¸€ä¸ªæ‹‰å–ç”¨æˆ·ä¿¡æ¯çš„æ­¥éª¤ã€‚ä½†æ˜¯æˆ‘ä»¬å‘ç°ï¼Œå¾ˆå¤šç½‘ç«™ï¼Œåœ¨å…¶ä»–æµè§ˆå™¨ä¹Ÿå¯ä»¥ä½¿ç”¨å¾®ä¿¡æ”¯ä»˜ï¼Œä¹Ÿä¸éœ€è¦æ‹‰å–ç”¨æˆ·ä¿¡æ¯ï¼Œè¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ
å› ä¸ºï¼Œè¿™æ˜¯ä¸¤ç§ä¸åŒçš„æ”¯ä»˜æ–¹å¼ï¼ä»Šå¤©æˆ‘ä»¬è®¨è®ºçš„ï¼Œå«åšå¾®ä¿¡å…¬ä¼—å·æ”¯ä»˜ï¼›è€Œåœ¨å…¶ä»–æµè§ˆå™¨ä¸­è°ƒç”¨å¾®ä¿¡æ”¯ä»˜ï¼Œå«åšå¾®ä¿¡H5æ”¯ä»˜ï¼
æ›´å¤šå…³äºå¾®ä¿¡H5æ”¯ä»˜çš„å†…å®¹ï¼Œè¯·å‚è€ƒå¾®ä¿¡H5æ”¯ä»˜å®˜æ–¹æ–‡æ¡£ã€‚
ä¹¦ç­¾å¾®ä¿¡æ”¯ä»˜å¼€å‘æ–‡æ¡£â€”â€”å…¬ä¼—å·æ”¯ä»˜https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=7_1
å¾®ä¿¡æ”¯ä»˜æ¥å£ç­¾åæ ¡éªŒå·¥å…·https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=20_1
éå¾®ä¿¡å†…ç½®æµè§ˆå™¨ä¸­çš„ç½‘é¡µè°ƒèµ·å¾®ä¿¡æ”¯ä»˜çš„æ–¹æ¡ˆç ”ç©¶http://blog.csdn.net/ahence/article/details/51317814
å¾®ä¿¡æ”¯ä»˜|å•†æˆ·å¹³å°å¼€å‘è€…æ–‡æ¡£https://pay.weixin.qq.com/wiki/doc/api/wap.php?chapter=15_1
ã€å¾®ä¿¡æ”¯ä»˜V2.0ã€‘H5æ”¯ä»˜å®ä¾‹http://wxpay.weixin.qq.com/pub_v2/pay/wap.v2.php
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>node</tag>
        <tag>å¾®ä¿¡</tag>
      </tags>
  </entry>
  <entry>
    <title>H5è·³è½¬å¾®ä¿¡å…¬ä¼—å¹³å°</title>
    <url>/dev-h5-jump-wechat-public-platform/</url>
    <content><![CDATA[å¾®ä¿¡å…¬ä¼—å¹³å°å‘å¸ƒäº†ä¸€ç¯‡æ–‡ç« ï¼Œå•å‡»å…¬ä¼—å¹³å°åç§°ï¼Œèƒ½å¤Ÿç›´æ¥è·³è½¬åˆ°å¾®ä¿¡å…¬ä¼—å¹³å°çš„å…³æ³¨é¡µé¢ã€‚å°±åƒè¿™æ ·ï¼š



è¯·é—®ï¼Œå¦‚æœæˆ‘ä»¬è‡ªå·±å†™äº†ä¸€ç¯‡æ–‡ç« ï¼Œä¸æ˜¯å‘å¸ƒåœ¨å¾®ä¿¡å…¬ä¼—å¹³å°ä¸Šï¼Œèƒ½ä¸èƒ½è·³è½¬åˆ°å¾®ä¿¡å…¬ä¼—å¹³å°å…³æ³¨é¡µé¢å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼Œä¸èƒ½ï¼Œä½†æ˜¯æˆ‘ä»¬æœ‰æ›¿ä»£æ–¹æ¡ˆã€‚
æ˜¾ç„¶ï¼Œè¿™æ ·å…³æ³¨ä¹Ÿæ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œå…³é”®ç‚¹åœ¨äºâ€œè‰¾ä½³ç”Ÿæ´»å¿—â€çš„é“¾æ¥æ€ä¹ˆæå‡ºæ¥ã€‚æœ‰ä¸ªç½‘ç«™è´´å¿ƒçš„ç»™å‡ºäº†æ–¹æ¡ˆï¼šå¾®ä¿¡å…¬ä¼—å·ä¸€é”®å…³æ³¨é¡µé¢ç”Ÿæˆå™¨ã€‚å°†å…¬ä¼—å·å‘è¿‡çš„å›¾æ–‡é“¾æ¥ç²˜è´´è¿›å»ï¼Œç‚¹å‡»ç”Ÿæˆå³å¯å¾—åˆ°æˆ‘ä»¬éœ€è¦çš„é“¾æ¥ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>å¾®ä¿¡</tag>
      </tags>
  </entry>
  <entry>
    <title>å¤–åŒ…å¹³å°</title>
    <url>/dev-outsourcing-platform/</url>
    <content><![CDATA[å‰è¨€è®¡åˆ’10å·ç¦»èŒï¼Œ12å·å‰å¾€å‰æ—é•¿æ˜¥ã€‚æ— è®ºæ˜¯å‡ºäºè‡ªå°Šå¿ƒï¼Œè¿˜æ˜¯å‡ºäºä¸€ä¸ªç”·äººçš„è´£ä»»ï¼Œéƒ½ä¸æ‰“ç®—å†å‘å®¶é‡Œè¦é’±ã€‚æ²¡æœ‰äº†æ”¶å…¥æ¥æºï¼Œé‚£å°±å¼€æºï¼æƒ³æ¥æƒ³å»ï¼Œå¤–åŒ…ä¹Ÿè®¸æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚ä»çŸ¥ä¹ä¸Šæ‘˜å½•äº†ä¸€äº›å¤–åŒ…å¹³å°ï¼Œå¤‡å¿˜ã€‚


å¹³å°1ã€ç¨‹åºå‘˜å®¢æ ˆç¨‹åºå‘˜å®¢æ ˆ-ç¨‹åºå‘˜çš„ç»çºªäºº|ç½‘ç«™å»ºè®¾APPå¼€å‘åˆ¶ä½œè¿œç¨‹æŠ€æœ¯ä¸­å¿ƒhttps://www.proginn.com/
2ã€å¿«ç ä¼—åŒ…å¿«ç ä¼—åŒ…-è®©äº’è”ç½‘äº§å“å¼€å‘æ›´å¿«é€Ÿï¼è®¤å‡†åŸŸåKuai.mahttp://www.kuai.ma/
3ã€Codingç å¸‚Coding ç å¸‚ - äº‘ç«¯ä¼—åŒ…ï¼Œå¯é äº¤ä»˜ï¼Œè¿œç¨‹å·¥ä½œï¼Œå…¨ç¨‹æ‹…ä¿ï¼https://mart.coding.net/
4ã€çŒ¿å›¢çŒ¿å›¢-YuanTuan.Com_æˆä¸ºåˆ›ä¸šè€…çš„ä¸“ä¸šæŠ€æœ¯åˆä¼™äººhttp://www.yuantuan.com/
5ã€è‹±é€‰è‹±é€‰ | ä»0åˆ°1ï¼Œæ‰“é€ ä½ çš„ç¬¬ä¸€ç‰ˆäº§å“https://www.linktion.cn/
6ã€å¼€æºä¸­å›½ä¼—åŒ…å¹³å°å¼€æºä¸­å›½ä¼—åŒ…å¹³å° - ä¸“ä¸šITè½¯ä»¶ä¼—åŒ…å¹³å°ï¼Œå¿«é€Ÿäº¤ä»˜ï¼Œå®‰å…¨å¯é -å¼€æºä¸­å›½ä¼—åŒ…å¹³å°https://zb.oschina.net/
7ã€ç æ˜“ç æ˜“-é«˜è´¨é‡è½¯ä»¶äº¤ä»˜æœåŠ¡å¹³å°http://www.mayigeek.com/
8ã€å°åœ†æ¡Œé¦–é¡µ - åˆ›ä¸šä¸äººæ‰çš„ç¤¾åŒº|å°åœ†æ¡Œhttp://www.xyuanzhuo.com/
9ã€é¡¹ç›®è½¯ä»¶äº¤æ˜“ç½‘è½¯ä»¶é¡¹ç›®äº¤æ˜“ç½‘ï¼ä¸­å›½æœ€æ—©çš„è½¯ä»¶å¤–åŒ…æœåŠ¡å¹³å°ï¼Œä¸“æ³¨å®ç°ä¸­å›½ç¨‹åºå‘˜ä»·å€¼http://www.sxsoft.com/
10ã€äººäººå¼€å‘äººäººå¼€å‘ - é›†å¯è§†åŒ–å¼€å‘ï¼Œåº”ç”¨å¸‚åœºï¼Œå¨å®¢ä¼—åŒ…ï¼ŒPaaSäº‘äºä¸€ä½“çš„ä¼ä¸šçº§åº”ç”¨æœåŠ¡å¹³å°http://rrkf.com/
11ã€æå®¢é‚¦æå®¢é‚¦ ä¸“æ³¨æä¾›æŠ€æœ¯æœåŠ¡çš„åœ¨çº¿å¹³å°http://www.looip.cn/
12ã€å¼€å‘é‚¦å¼€å‘é‚¦-ä¸“ä¸šäº’è”ç½‘è½¯ä»¶å¼€å‘ä¸å’¨è¯¢æœåŠ¡http://www.kaifabang.com/
ä¹¦ç­¾å›½å†…æœ‰ç±»ä¼¼Freelancerçš„ç½‘ç«™ï¼Ÿhttps://www.zhihu.com/question/26478092
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
  </entry>
  <entry>
    <title>cssé›ªç¢§å›¾</title>
    <url>/dev-css-sprite/</url>
    <content><![CDATA[å‰è¨€CSSé›ªç¢§ å³CSS Spriteï¼Œä¹Ÿæœ‰äººå«å®ƒCSSç²¾çµï¼Œæ˜¯ä¸€ç§CSSå›¾åƒåˆå¹¶æŠ€æœ¯ï¼Œè¯¥æ–¹æ³•æ˜¯å°†å°å›¾æ ‡åˆå¹¶åˆ°ä¸€å¼ å›¾ç‰‡ä¸Šï¼Œç„¶ååˆ©ç”¨cssçš„èƒŒæ™¯å®šä½æ¥æ˜¾ç¤ºéœ€è¦æ˜¾ç¤ºçš„å›¾ç‰‡éƒ¨åˆ†ã€‚
ä¼˜ç‚¹ï¼šå‡å°‘åŠ è½½ç½‘é¡µå›¾ç‰‡æ—¶å¯¹æœåŠ¡å™¨çš„è¯·æ±‚æ¬¡æ•°ï¼Œæé«˜é¡µé¢çš„åŠ è½½é€Ÿåº¦ï¼Œå‡å°‘é¼ æ ‡æ»‘è¿‡çš„ä¸€äº›bugã€‚


åˆ¶ä½œé›ªç¢§å›¾çš„åˆ¶ä½œï¼Œå¯ä»¥ä½¿ç”¨PSï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸“é—¨çš„é›ªç¢§å›¾åˆ¶ä½œå·¥å…·ã€‚åˆ¶ä½œæ—¶ï¼Œæœ€å¥½åˆ¶ä½œæˆä¸€åˆ—æˆ–è€…ä¸€è¡Œï¼Œå®šä½æ—¶ä¼šæ–¹ä¾¿ä¸€äº›ã€‚ä¸‹é¢è¿™ä¸ªå·¥å…·æŒºå¥½ç”¨ï¼Œåˆ†äº«ç»™å¤§å®¶ï¼šhttps://yunpan.cn/cMKygj2hnrBBe  è®¿é—®å¯†ç  f516
cssé›ªç¢§å›¾ç®€å•åˆ¶ä½œå·¥å…·ï¼ˆæºç ï¼‰https://github.com/iwangx/sprite
å¦‚æœè¦åˆ¶ä½œsvgé›ªç¢§å›¾ï¼Œæ¨èä½¿ç”¨AIã€‚
å®šä½ä½ç½®é›ªç¢§å›¾å®šä½çš„å…³é”®ï¼Œåœ¨äºbackground-positionã€‚è¯€çªåœ¨äºâ€œè°ƒè¯•â€ï¼Œåœ¨é¡µé¢æ§åˆ¶èƒŒæ™¯å›¾ä¸Šä¸‹å·¦å³ç§»åŠ¨ï¼Œå¾ˆå¿«å°±å®šä½å¥½äº†ã€‚
ä»¥ä¸Šé¢çš„é›ªç¢§å›¾ä¸ºä¾‹ï¼Œå‡è®¾æˆ‘ä»¬è¦æ˜¾ç¤ºå¾®åšçš„å›¾æ ‡ï¼Œé‚£ä¹ˆscssä»£ç å¦‚ä¸‹ï¼š
.icon-weibo&#123;    width: 20px;    height: 20px;    background: url(../../img/test/index/icon.png) no-repeat;    background-position: 0px -60px;&#125;

å¤§å°å‡è®¾æˆ‘ä»¬çš„è¦æ˜¾ç¤ºçš„å›¾æ ‡æ¯”é›ªç¢§å›¾å¤§ï¼Œæˆ–è€…æ¯”é›ªç¢§å›¾å°ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿbackground-sizeã€‚
.icon-weibo&#123;    width: 40px;    height: 40px;    background: url(../../img/test/index/icon.png) no-repeat;    background-position: -2px -116px;    background-size: 118%;&#125;

ç§»åŠ¨ç«¯å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸ä½¿ç”¨pxä½œä¸ºå•ä½ï¼Œè€Œæ˜¯remæˆ–è€…ç™¾åˆ†æ¯”ï¼Œè¿™æ—¶å€™ï¼Œè¯¥æ€ä¹ˆæ§åˆ¶é›ªç¢§å›¾çš„ä½ç½®å’Œå¤§å°ï¼Ÿåˆ©ç”¨svgå›¾ç‰‡ã€‚
&lt;span class=&quot;i i_menu_0&quot;&gt;&lt;/span&gt;

.i &#123;    width: 0.8rem; height: 0.8rem;    background: url(../images/ico_global.svg) no-repeat;    display: inline-block;    background-size: 1100%;&#125;.i_menu_0 &#123; background-position: 0% 0%; &#125;.i_menu_1 &#123; background-position: 10% 0%; &#125;.i_menu_2 &#123; background-position: 20% 0%; &#125;.i_menu_3 &#123; background-position: 30% 0%; &#125;.i_menu_4 &#123; background-position: 40% 0%; &#125;.i_menu_5 &#123; background-position: 50% 0%; &#125;

åè®°è‡³äºPSå’ŒAIçš„ä½¿ç”¨ï¼Œåœ¨æ…•è¯¾ç½‘å’Œç½‘æ˜“äº‘è¯¾å ‚ä¸Šæœ‰å¾ˆå¤šä¼˜ç§€æ•™ç¨‹ï¼Œä¸è¦é”™è¿‡ã€‚
ä¹¦ç­¾CSSé›ªç¢§å›¾çš„å®ç°æ–¹æ³•ï¼ˆå³èƒŒæ™¯å®šä½ï¼‰http://www.suixin8.com/59.html
CSS3æŠ€æœ¯-é›ªç¢§å›¾è‡ªé€‚åº”ç¼©æ”¾http://www.imooc.com/wiki/detail/id/183
åˆ©ç”¨åŠ¨æ€viewport+remåˆ¶ä½œä¸€å¼ è‡ªé€‚åº”çš„svgé›ªç¢§å›¾iconhttp://www.open-open.com/lib/view/open1452229325136.html
SVGçš„ç”¨æ³•http://www.webhek.com/svg/
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>css</tag>
        <tag>å‰ç«¯</tag>
        <tag>sprite</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”¨divæ¨¡æ‹Ÿselect</title>
    <url>/dev-simulate-select-by-div/</url>
    <content><![CDATA[å‰è¨€å››ä¸å››å‚»ï¼Ÿæœ‰selectä¸ç”¨ï¼Œå¹²å˜›è¦ç”¨divæ¥æ¨¡æ‹Ÿselectå‘¢ï¼Ÿä¸‹é¢æ¥çœ‹ä¸€ä¸ªé—®é¢˜ï¼š
è¯·é—®ä¸ä½¿ç”¨chosenç­‰æ’ä»¶ï¼Œä¹Ÿä¸ä½¿ç”¨divæ¨¡æ‹Ÿselectï¼Œé€šè¿‡htmlå’Œcssï¼Œæœ‰æ²¡æœ‰åŠæ³•é™åˆ¶selectä¸‹æ‹‰æ¡†çš„é«˜åº¦ã€‚é»˜è®¤æ˜¾ç¤º20æ¡optionï¼Œæˆ‘æƒ³æ”¹æˆ5æ¡è¯¥æ€ä¹ˆå¤„ç†ï¼Ÿ
ç­”æ¡ˆæ˜¯ï¼Œæ— è§£ï¼ä½¿ç”¨æ’ä»¶ï¼Ÿæ‰¾äº†åå‡ æ¬¾selectboxæ’ä»¶ï¼Œéƒ½ä¸æ»¡æ„ï¼è¦ä¹ˆå°è£…èµ·æ¥éº»çƒ¦ï¼Œè¦ä¹ˆæ ¹æœ¬ä¸æä¾›é™åˆ¶ä¸‹æ‹‰æ¡†é•¿åº¦çš„åŠŸèƒ½ã€‚
è¯„ä¼°äº†ä¸€ä¸‹ï¼Œè¿˜æ˜¯è‡ªå·±æ¨¡æ‹Ÿä¸€ä¸ªselecté€‰æ‹©æ¡†æ›´é è°±ã€‚


selectæ—¥æœŸé€‰æ‹©html&lt;div class=&quot;birthday&quot;&gt;    &lt;label&gt;ç”Ÿæ—¥ï¼š&lt;/label&gt;    &lt;select name=&quot;month&quot; id=&quot;month&quot;&gt;        &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;        &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;        &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;        &lt;option value=&quot;4&quot;&gt;4&lt;/option&gt;        &lt;option value=&quot;5&quot;&gt;5&lt;/option&gt;        &lt;option value=&quot;6&quot;&gt;6&lt;/option&gt;        &lt;option value=&quot;7&quot;&gt;7&lt;/option&gt;        &lt;option value=&quot;8&quot;&gt;8&lt;/option&gt;        &lt;option value=&quot;9&quot;&gt;9&lt;/option&gt;        &lt;option value=&quot;10&quot;&gt;10&lt;/option&gt;        &lt;option value=&quot;11&quot;&gt;11&lt;/option&gt;        &lt;option value=&quot;12&quot;&gt;12&lt;/option&gt;    &lt;/select&gt;æœˆ    &lt;select name=&quot;day&quot; id=&quot;day&quot;&gt;    &lt;/select&gt;æ—¥&lt;/div&gt;

js$(&#x27;#month&#x27;).change(function()&#123;    changeDay();&#125;);function changeDay()&#123;    var $day = $(&#x27;#day&#x27;);    var month = $(&#x27;#month&#x27;).val();    var data = [];              if(month==2)&#123;        for (var i = 1; i &lt;= 29; i++) &#123;            data.push(i);        &#125;    &#125;else if(month==1 || month==3 || month==5 || month==7 || month==8 || month==10 || month==12)&#123;        for (var i = 1; i &lt;= 31; i++) &#123;            data.push(i);        &#125;    &#125;else if(month==4 || month==6 || month==9 || month==11)&#123;        for (var i = 1; i &lt;= 30; i++) &#123;            data.push(i);        &#125;    &#125;    var html = &#x27;&#x27;;    data.forEach( function(element, index) &#123;        html += &#x27;&lt;option value=&#x27;+element+&#x27;&gt;&#x27;+element+&#x27;&lt;/option&gt;&#x27;;    &#125;);    $day.html(html);    $day.find(&#x27;option&#x27;).first().checked;&#125;

divæ—¥æœŸé€‰æ‹©html&lt;div class=&quot;birthday2&quot;&gt;    &lt;label&gt;ç”Ÿæ—¥ï¼š&lt;/label&gt;    &lt;div class=&quot;simulate-select&quot; id=&quot;month-box&quot;&gt;        &lt;input class=&quot;input&quot; name=&quot;month2&quot; type=&quot;hidden&quot; value=&quot;1&quot;&gt;        &lt;div class=&quot;check&quot;&gt;1&lt;/div&gt;æœˆ        &lt;ul class=&quot;items&quot;&gt;            &lt;li&gt;1&lt;/li&gt;            &lt;li&gt;2&lt;/li&gt;            &lt;li&gt;3&lt;/li&gt;            &lt;li&gt;4&lt;/li&gt;            &lt;li&gt;5&lt;/li&gt;            &lt;li&gt;6&lt;/li&gt;            &lt;li&gt;7&lt;/li&gt;            &lt;li&gt;8&lt;/li&gt;            &lt;li&gt;9&lt;/li&gt;            &lt;li&gt;10&lt;/li&gt;            &lt;li&gt;11&lt;/li&gt;            &lt;li&gt;12&lt;/li&gt;        &lt;/ul&gt;    &lt;/div&gt;    &lt;div class=&quot;simulate-select&quot; id=&quot;day-box&quot;&gt;        &lt;input class=&quot;input&quot; name=&quot;day2&quot; type=&quot;hidden&quot; value=&quot;1&quot;&gt;        &lt;div class=&quot;check&quot;&gt;1&lt;/div&gt;æ—¥        &lt;ul class=&quot;items&quot;&gt;        &lt;/ul&gt;    &lt;/div&gt;&lt;/div&gt;

scss.simulate-select&#123;    position: relative;    display: inline-block;    .check&#123;        display: inline-block;        width: 40px;        text-align: center;        border: 1px solid #333;    &#125;    .items&#123;        display: none;        list-style: none;        position: absolute;        top: 100%;        left: 0;        height: 100px;        overflow-y: auto;        margin: -1px 0 0 0;        padding: 0;        width: 40px;        text-align: center;        border: 1px solid #333;        background: #fff;        li&#123;            &amp;.active&#123;                background: #eee;                color: #fff;            &#125;        &#125;        &amp;.active&#123;            display: block;        &#125;    &#125;&#125;

jsselectMonth2();changeDay2();selectDay2();function selectMonth2()&#123;    var self = this;    var $month = $(&#x27;#month-box&#x27;);    $(&#x27;#month-box&#x27;).on(&#x27;click&#x27;,&#x27;.check&#x27;,function(event)&#123;        $(&#x27;#day-box&#x27;).find(&#x27;.items&#x27;).removeClass(&#x27;active&#x27;);        if($month.find(&#x27;.items&#x27;).hasClass(&#x27;active&#x27;))&#123;            $month.find(&#x27;.items&#x27;).removeClass(&#x27;active&#x27;);        &#125;else&#123;            $month.find(&#x27;.items&#x27;).addClass(&#x27;active&#x27;);        &#125;        event.stopPropagation();    &#125;);    $(&#x27;#month-box&#x27;).on(&#x27;click&#x27;,&#x27;li&#x27;,function()&#123;        var month = $(this).html();        $month.find(&#x27;.input&#x27;).val(month);        $month.find(&#x27;.check&#x27;).html(month);        $month.find(&#x27;.items&#x27;).removeClass(&#x27;active&#x27;);        changeDay2();    &#125;);    $(document).click(function()&#123;        $month.find(&#x27;.items&#x27;).removeClass(&#x27;active&#x27;);    &#125;);&#125;function changeDay2()&#123;    var $month = $(&#x27;#month-box&#x27;);    var $day = $(&#x27;#day-box&#x27;);    var month = $month.find(&#x27;.input&#x27;).val();    var data = [];          if(month==2)&#123;        for (var i = 1; i &lt;= 29; i++) &#123;            data.push(i);        &#125;    &#125;else if(month==1 || month==3 || month==5 || month==7 || month==8 || month==10 || month==12)&#123;        for (var i = 1; i &lt;= 31; i++) &#123;            data.push(i);        &#125;    &#125;else if(month==4 || month==6 || month==9 || month==11)&#123;        for (var i = 1; i &lt;= 30; i++) &#123;            data.push(i);        &#125;    &#125;    var html = &#x27;&#x27;;    data.forEach( function(element, index) &#123;        html += &#x27;&lt;li&gt;&#x27;+element+&#x27;&lt;/li&gt;&#x27;;    &#125;);    $day.find(&#x27;.items&#x27;).html(html);    $day.find(&#x27;.check&#x27;).html(&#x27;1&#x27;);&#125;function selectDay2()&#123;    var $day = $(&#x27;#day-box&#x27;);    $(&#x27;#day-box&#x27;).on(&#x27;click&#x27;,&#x27;.check&#x27;,function(event)&#123;        $(&#x27;#month-box&#x27;).find(&#x27;.items&#x27;).removeClass(&#x27;active&#x27;);        if($day.find(&#x27;.items&#x27;).hasClass(&#x27;active&#x27;))&#123;            $day.find(&#x27;.items&#x27;).removeClass(&#x27;active&#x27;);        &#125;else&#123;            $day.find(&#x27;.items&#x27;).addClass(&#x27;active&#x27;);        &#125;        event.stopPropagation();    &#125;);    $(&#x27;#day-box&#x27;).on(&#x27;click&#x27;,&#x27;li&#x27;,function()&#123;        var day = $(this).html();        $day.find(&#x27;.input&#x27;).val(day);        $day.find(&#x27;.check&#x27;).html(day);        $day.find(&#x27;.items&#x27;).removeClass(&#x27;active&#x27;);    &#125;);    $(document).click(function()&#123;        $day.find(&#x27;.items&#x27;).removeClass(&#x27;active&#x27;);    &#125;);&#125;

æ•ˆæœå›¾
æºç https://github.com/voidking/nodebase/blob/master/views/weixin/love.htmlhttps://github.com/voidking/nodebase/blob/master/public/scss/weixin/love.scsshttps://github.com/voidking/nodebase/blob/master/public/js/weixin/love.js
åè®°æˆ‘ç›¸ä¿¡ï¼Œä¸€å®šæœ‰æ›´ç®€å•çš„æ–¹æ³•å®ç°é™åˆ¶selectä¸‹æ‹‰æ¡†çš„é«˜åº¦ã€‚å¦‚æœåœ¨è°ƒè¯•æ—¶ï¼Œå¯ä»¥æ•æ‰åˆ°ä¸‹æ‹‰æ¡†ï¼Œå°±å¯ä»¥è®¾ç½®è¯¥ä¸‹æ‹‰æ¡†çš„é«˜åº¦äº†ã€‚ä½†æ˜¯ï¼Œå°è¯•äº†å„ç§åŠæ³•éƒ½æ²¡æœ‰æ•æ‰åˆ°ï¼Œå¥‡æ€ªã€‚ä¸ç®¡äº†ï¼Œæš‚æ—¶è¿™æ ·ï¼Œä»¥åå‘ç°äº†æ›´å¥½çš„è§£å†³åŠæ³•å†è¡¥ä¸Šã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>css</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Nodeè¯»å†™æ–‡ä»¶</title>
    <url>/dev-node-read-and-write-file/</url>
    <content><![CDATA[å‰è¨€ä¸ƒå¤•å°†è¿‘ï¼Œå…¬å¸è¦æ•´ä¸€ä¸ªæ´»åŠ¨ï¼šä¸ƒå¤•ç¤¼ç‰©æµ‹è¯•ã€‚å¤§è‡´éœ€æ±‚æ˜¯ï¼Œç”¨æˆ·é€‰æ‹©è‡ªå·±çš„æ€§åˆ«ã€ç”Ÿæ—¥å’Œæƒ…æ„ŸçŠ¶æ€ï¼Œç‚¹å‡»â€œæƒŠå–œä¸€ä¸‹â€ï¼Œå‡ºç°ç¤¼ç‰©è¯¦æƒ…ã€‚æ ¹æ®æ€§åˆ«ã€ç”Ÿæ—¥å’Œæƒ…æ„ŸçŠ¶æ€çš„ä¸åŒï¼Œç»™å‡ºä¸åŒçš„ç¤¼ç‰©è¯¦æƒ…ï¼Œä¸€å…±æœ‰37ç§ä¸åŒçš„ç¤¼ç‰©ã€‚åŒæ—¶ï¼Œæ·»åŠ ç»Ÿè®¡ï¼Œç»Ÿè®¡æœ‰å¤šå°‘äººå‚åŠ è¿‡æµ‹è¯•ã€‚


è®¾è®¡è¿™æ¬¡æ´»åŠ¨ï¼Œä¸æ‰“ç®—è®©åç«¯å‚ä¸ï¼Œæ‰€ä»¥è¦Nodeç«¯è‡ªå·±è´Ÿè´£æ•°æ®çš„å­˜å–ã€‚
è¯»å–æ–‡ä»¶æœ‰ä¸‰ä¸ªæ–¹æ¡ˆï¼š1ã€æ•°æ®å­˜åœ¨ä»£ç ä¸­ï¼ˆè¿è¡Œæ—¶ç›´æ¥åŠ è½½åˆ°å†…å­˜ï¼‰ã€‚2ã€åˆ©ç”¨requestæ¨¡å—è¯»å–ã€‚3ã€åˆ©ç”¨fsæ¨¡å—è¯»å–ã€‚
å†™å…¥æ–‡ä»¶æœ‰ä¸€ä¸ªæ–¹æ¡ˆï¼šåˆ©ç”¨fsæ¨¡å—å†™å…¥ã€‚
åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œå·²ç»è®¨è®ºè¿‡ä½¿ç”¨requestæ¨¡å—è¯»å–æœ¬åœ°æ–‡ä»¶çš„æ–¹æ³•ï¼Œæœ¬æ–‡ä¸»è¦æ¢è®¨ä¸€ä¸‹ä½¿ç”¨fsæ¨¡å—è¯»å†™æ–‡ä»¶çš„æ–¹æ³•ã€‚
ä»£ç æ•°æ®æ–‡ä»¶åœ¨/public/dataæ–‡ä»¶ä¸‹ï¼Œæ–°å»ºæ–‡ä»¶count.jsonã€‚å†…å®¹å¦‚ä¸‹ï¼š
&#123;&quot;count&quot;:100&#125;

fsè¯»å–æ–‡ä»¶var fs = require(&#x27;fs&#x27;);var path = require(&#x27;path&#x27;);fs.readFile(path.join(__dirname,&#x27;../public/data/count.json&#x27;),&#123;encoding:&#x27;utf-8&#x27;&#125;,function(error, data)&#123;    console.log(data);    var countData = JSON.parse(data);    console.log(count.countData.count);&#125;);
éœ€è¦è§£é‡Šä¸€ä¸‹çš„ï¼Œæ˜¯__dirnameï¼Œåœ¨ä»»ä½•æ¨¡å—æ–‡ä»¶å†…éƒ¨ï¼Œå¯ä»¥ä½¿ç”¨__dirnameå˜é‡è·å–å½“å‰æ¨¡å—æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„å®Œæ•´ç»å¯¹è·¯å¾„ã€‚
path.join([path1],[path2],[â€¦])å‡½æ•°ï¼Œå°†å¤šä¸ªå‚æ•°ç»„åˆæˆä¸€ä¸ªpathã€‚
fså†™å…¥æ–‡ä»¶var fs = require(&#x27;fs&#x27;);var path = require(&#x27;path&#x27;);fs.readFile(path.join(__dirname,&#x27;../public/data/count.json&#x27;),&#123;encoding:&#x27;utf-8&#x27;&#125;,function(error, data)&#123;    //console.log(data);    var count = parseInt(JSON.parse(data).count);    count++;    var countData = &#123;        count: count    &#125;;    fs.writeFile(path.join(__dirname,&#x27;../public/data/count.json&#x27;),JSON.stringify(countData),function(error)&#123;        console.log(&#x27;success&#x27;);    &#125;);&#125;);

å®Œæ•´ä»£ç https://github.com/voidking/nodebase/blob/master/controllers/weixin.js
ä¹¦ç­¾ç®€å•çš„nodejs æ–‡ä»¶ç³»ç»Ÿï¼ˆfsï¼‰è¯»å†™ä¾‹å­http://www.2cto.com/kf/201411/351586.html
Node.jsè¯»å–æ–‡ä»¶å†…å®¹http://blog.csdn.net/zk437092645/article/details/9231787
node çš„æ–‡ä»¶æ“ä½œhttp://blog.chinaunix.net/uid-26672038-id-4139323.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title>Cookieã€localStorageå’ŒsessionStorage</title>
    <url>/dev-cookie-localstorage-and-sessionstorage/</url>
    <content><![CDATA[å‰è¨€åœ¨ã€Šä½¿ç”¨accessTokenè®°å½•ç™»å½•çŠ¶æ€ã€‹ä¸€æ–‡ä¸­ï¼Œå·²ç»è®¨è®ºäº†Cookieçš„å¢åˆ æŸ¥æ”¹ã€‚æœ¬æ–‡è¯¦ç»†æ¢è®¨ä¸€ä¸‹Cookieã€localStorageå’ŒsessionStorageçš„æ¦‚å¿µå·®åˆ«ï¼Œä»¥åŠlocalStorageçš„ç”¨æ³•ã€‚


CookieCookieçš„ç‰¹ç‚¹æ˜¯å°ï¼Œåªæœ‰4kï¼Œå¸¸ç”¨æ¥å­˜å‚¨è¾¨åˆ«ç”¨æˆ·ä¿¡æ¯çš„æ•°æ®ï¼Œæ¯”å¦‚accessTokenã€‚è€Œä¸”ï¼ŒCookieæœ‰æ•°é‡é™åˆ¶ï¼Œæ¯ä¸ªç‰¹å®šçš„åŸŸåä¸‹ï¼Œæœ€å¤šç”Ÿæˆ50ä¸ªCookieï¼ˆIE7+ï¼‰ã€‚æœ€å¤§çš„ä¼˜åŠ¿æ˜¯å‡ ä¹æ‰€æœ‰çš„æµè§ˆå™¨éƒ½æ”¯æŒã€‚
localStoragelocalStorage æ˜¯ HTML5 æ ‡å‡†ä¸­æ–°åŠ å…¥çš„æŠ€æœ¯ï¼Œæ‹¥æœ‰5Mçš„å­˜å‚¨ç©ºé—´ï¼Œä¸»æµæµè§ˆå™¨éƒ½æ”¯æŒã€‚
å­˜å‚¨if(window.localStorage)&#123;    var x = window.localStorage.userInfo? JSON.parse(window.localStorage.userInfo):&#123;&#125;;    if((x.unionid == undefined) || (x.unionid == &quot;undefined&quot;))&#123;        var temp = &#123;            unionid: $(&#x27;#unionid&#x27;).val(),            openid: $(&#x27;#openid&#x27;).val(),            nickname: $(&#x27;#nickname&#x27;).val(),            headimgurl:$ (&#x27;#headimgurl&#x27;).val()        &#125;;        window.localStorage.userInfo = JSON.stringify(temp);    &#125;&#125;

è¯»å–var temp = (window.localStorage &amp;&amp; window.localStorage.userInfo)?JSON.parse(window.localStorage.userInfo):&#123;&#125;var unionid = temp.unionid;console.log(unionid);

sessionStoragesessionStorageå’ŒlocalStorageéå¸¸ç›¸ä¼¼ï¼Œæœ€ä¸»è¦çš„å·®åˆ«ï¼Œæ˜¯ç”Ÿå‘½å‘¨æœŸã€‚localStorageé™¤éè¢«æ¸…é™¤ï¼Œå¦åˆ™æ°¸ä¹…ä¿å­˜ï¼›sessionStorageå…³é—­é¡µé¢æˆ–æµè§ˆå™¨åè¢«æ¸…é™¤ã€‚
å¼‚åŒ


ç‰¹æ€§
Cookie
localStorage
sessionStorage



æ•°æ®çš„ç”Ÿå‘½æœŸ
å¯è®¾ç½®å¤±æ•ˆæ—¶é—´ï¼Œé»˜è®¤æ˜¯å…³é—­æµè§ˆå™¨åå¤±æ•ˆ
é™¤éè¢«æ¸…é™¤ï¼Œå¦åˆ™æ°¸ä¹…ä¿å­˜
ä»…åœ¨å½“å‰ä¼šè¯ä¸‹æœ‰æ•ˆï¼Œå…³é—­é¡µé¢æˆ–æµè§ˆå™¨åè¢«æ¸…é™¤


å­˜æ”¾æ•°æ®å¤§å°
4Kå·¦å³
ä¸€èˆ¬ä¸º5MB
ä¸€èˆ¬ä¸º5MB


ä¸æœåŠ¡å™¨ç«¯é€šä¿¡
æ¯æ¬¡éƒ½ä¼šæºå¸¦åœ¨HTTPå¤´ä¸­ï¼Œå¦‚æœä½¿ç”¨cookieä¿å­˜è¿‡å¤šæ•°æ®ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜
ä»…åœ¨å®¢æˆ·ç«¯ï¼ˆå³æµè§ˆå™¨ï¼‰ä¸­ä¿å­˜ï¼Œä¸å‚ä¸å’ŒæœåŠ¡å™¨çš„é€šä¿¡
ä»…åœ¨å®¢æˆ·ç«¯ï¼ˆå³æµè§ˆå™¨ï¼‰ä¸­ä¿å­˜ï¼Œä¸å‚ä¸å’ŒæœåŠ¡å™¨çš„é€šä¿¡


æ˜“ç”¨æ€§
éœ€è¦ç¨‹åºå‘˜è‡ªå·±å°è£…ï¼Œæºç”Ÿçš„Cookieæ¥å£ä¸å‹å¥½
æºç”Ÿæ¥å£å¯ä»¥æ¥å—ï¼Œäº¦å¯å†æ¬¡å°è£…æ¥å¯¹Objectå’ŒArrayæœ‰æ›´å¥½çš„æ”¯æŒ
æºç”Ÿæ¥å£å¯ä»¥æ¥å—ï¼Œäº¦å¯å†æ¬¡å°è£…æ¥å¯¹Objectå’ŒArrayæœ‰æ›´å¥½çš„æ”¯æŒ


ä¹¦ç­¾è¯¦è¯´ Cookie, LocalStorage ä¸ SessionStoragehttps://segmentfault.com/a/1190000002723469
HTML5 localStorageæœ¬åœ°å­˜å‚¨å®é™…åº”ç”¨ä¸¾ä¾‹
è°ˆè°ˆæœ¬åœ°å­˜å‚¨åˆ©å¼ŠCookieã€localStorageã€sessionStoragehttp://www.tuicool.com/articles/fM32ier
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>cookie</tag>
        <tag>localstorage</tag>
        <tag>sessionstorage</tag>
      </tags>
  </entry>
  <entry>
    <title>æ”¯ä»˜å®ç­¾åä¸éªŒç­¾</title>
    <url>/dev-alipay-sign-and-checksign/</url>
    <content><![CDATA[å‰è¨€æ”¯ä»˜å®æä¾›äº†DSAã€RSAã€MD5ä¸‰ç§ç­¾åæ–¹å¼ï¼Œæœ¬æ–‡ä»…è®¨è®ºRSAç­¾åã€‚

RSAå…¬é’¥åŠ å¯†ç®—æ³•æ˜¯1977å¹´ç”±ç½—çº³å¾·Â·æç»´æ–¯ç‰¹ï¼ˆRon Rivestï¼‰ã€é˜¿è¿ªÂ·è¨è«å°”ï¼ˆAdi Shamirï¼‰å’Œä¼¦çº³å¾·Â·é˜¿å¾·æ›¼ï¼ˆLeonard Adlemanï¼‰ä¸€èµ·æå‡ºçš„ã€‚1987å¹´é¦–æ¬¡å…¬å¸ƒï¼Œå½“æ—¶ä»–ä»¬ä¸‰äººéƒ½åœ¨éº»çœç†å·¥å­¦é™¢å·¥ä½œã€‚RSAå°±æ˜¯ä»–ä»¬ä¸‰äººå§“æ°å¼€å¤´å­—æ¯æ‹¼åœ¨ä¸€èµ·ç»„æˆçš„ã€‚



RSAç†è§£ä»¥ä¸‹å†…å®¹è½¬è½½è‡ª21aspnetçš„ã€Šå…¬é’¥ï¼Œç§é’¥å’Œæ•°å­—ç­¾åè¿™æ ·æœ€å¥½ç†è§£ã€‹ï¼ŒåŸä½œè€…ä¸¾çš„ä¾‹å­é€šä¿—æ˜“æ‡‚ï¼ŒéƒåŒå­¦å·äº†è¿‡æ¥ï¼Œå¤§å®¶ä¸è¦å‘Šè¯‰ä»–ã€‚
å…¬é’¥åŠ å¯†å‡è®¾ä¸€ä¸‹ï¼Œæˆ‘æ‰¾äº†ä¸¤ä¸ªæ•°å­—ï¼Œä¸€ä¸ªæ˜¯1ï¼Œä¸€ä¸ªæ˜¯2ã€‚æˆ‘å–œæ¬¢2è¿™ä¸ªæ•°å­—ï¼Œå°±ä¿ç•™èµ·æ¥ï¼Œä¸å‘Šè¯‰ä½ ä»¬(ç§é’¥ï¼‰ï¼Œç„¶åæˆ‘å‘Šè¯‰å¤§å®¶ï¼Œ1æ˜¯æˆ‘çš„å…¬é’¥ã€‚æˆ‘æœ‰ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸èƒ½è®©åˆ«äººçœ‹ï¼Œæˆ‘å°±ç”¨1åŠ å¯†äº†ã€‚åˆ«äººæ‰¾åˆ°äº†è¿™ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯ä»–ä¸çŸ¥é“2å°±æ˜¯è§£å¯†çš„ç§é’¥å•Šï¼Œæ‰€ä»¥ä»–è§£ä¸å¼€ï¼Œåªæœ‰æˆ‘å¯ä»¥ç”¨æ•°å­—2ï¼Œå°±æ˜¯æˆ‘çš„ç§é’¥ï¼Œæ¥è§£å¯†ã€‚è¿™æ ·æˆ‘å°±å¯ä»¥ä¿æŠ¤æ•°æ®äº†ã€‚æˆ‘çš„å¥½æœ‹å‹xç”¨æˆ‘çš„å…¬é’¥1åŠ å¯†äº†å­—ç¬¦aï¼ŒåŠ å¯†åæˆäº†bï¼Œæ”¾åœ¨ç½‘ä¸Šã€‚åˆ«äººå·åˆ°äº†è¿™ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯åˆ«äººè§£ä¸å¼€ï¼Œå› ä¸ºåˆ«äººä¸çŸ¥é“2å°±æ˜¯æˆ‘çš„ç§é’¥ï¼Œåªæœ‰æˆ‘æ‰èƒ½è§£å¯†ï¼Œè§£å¯†åå°±å¾—åˆ°aã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¼ é€åŠ å¯†çš„æ•°æ®äº†ã€‚
ç§é’¥ç­¾åå¦‚æœæˆ‘ç”¨ç§é’¥åŠ å¯†ä¸€æ®µæ•°æ®ï¼ˆå½“ç„¶åªæœ‰æˆ‘å¯ä»¥ç”¨ç§é’¥åŠ å¯†ï¼Œå› ä¸ºåªæœ‰æˆ‘çŸ¥é“2æ˜¯æˆ‘çš„ç§é’¥ï¼‰ï¼Œç»“æœæ‰€æœ‰çš„äººéƒ½çœ‹åˆ°æˆ‘çš„å†…å®¹äº†ï¼Œå› ä¸ºä»–ä»¬éƒ½çŸ¥é“æˆ‘çš„å…¬é’¥æ˜¯1ï¼Œé‚£ä¹ˆè¿™ç§åŠ å¯†æœ‰ä»€ä¹ˆç”¨å¤„å‘¢ï¼Ÿä½†æ˜¯æˆ‘çš„å¥½æœ‹å‹xè¯´æœ‰äººå†’å……æˆ‘ç»™ä»–å‘ä¿¡ã€‚æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘æŠŠæˆ‘è¦å‘çš„ä¿¡ï¼Œå†…å®¹æ˜¯cï¼Œç”¨æˆ‘çš„ç§é’¥2ï¼ŒåŠ å¯†ï¼ŒåŠ å¯†åçš„å†…å®¹æ˜¯dï¼Œå‘ç»™xï¼Œå†å‘Šè¯‰ä»–è§£å¯†çœ‹æ˜¯ä¸æ˜¯cã€‚ä»–ç”¨æˆ‘çš„å…¬é’¥1è§£å¯†ï¼Œå‘ç°æœç„¶æ˜¯cã€‚è¿™ä¸ªæ—¶å€™ï¼Œä»–ä¼šæƒ³åˆ°ï¼Œèƒ½å¤Ÿç”¨æˆ‘çš„å…¬é’¥è§£å¯†çš„æ•°æ®ï¼Œå¿…ç„¶æ˜¯ç”¨æˆ‘çš„ç§é’¥åŠ çš„å¯†ã€‚åªæœ‰æˆ‘çŸ¥é“æˆ‘å¾—ç§é’¥ï¼Œå› æ­¤ä»–å°±å¯ä»¥ç¡®è®¤ç¡®å®æ˜¯æˆ‘å‘çš„ä¸œè¥¿ã€‚è¿™æ ·æˆ‘ä»¬å°±èƒ½ç¡®è®¤å‘é€æ–¹èº«ä»½äº†ã€‚è¿™ä¸ªè¿‡ç¨‹å«åšæ•°å­—ç­¾åã€‚å½“ç„¶å…·ä½“çš„è¿‡ç¨‹è¦ç¨å¾®å¤æ‚ä¸€äº›ã€‚ç”¨ç§é’¥æ¥åŠ å¯†æ•°æ®ï¼Œç”¨é€”å°±æ˜¯æ•°å­—ç­¾åã€‚
å°ç»“æ€»ç»“ï¼šå…¬é’¥å’Œç§é’¥æ˜¯æˆå¯¹çš„ï¼Œå®ƒä»¬äº’ç›¸è§£å¯†ã€‚å…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†ã€‚ç§é’¥æ•°å­—ç­¾åï¼Œå…¬é’¥éªŒè¯ã€‚
æ”¯ä»˜å®ç­¾åä¸éªŒç­¾è¯·æ±‚å‚æ•°ç­¾åç­¾åçš„ç›®çš„ï¼šä¸ºäº†æ”¯ä»˜å®èƒ½å¤Ÿç¡®å®šè¯·æ±‚æ˜¯ç”±å¼€å‘è€…å‘å‡ºçš„ã€‚
1ã€ç­›é€‰è·å–æ‰€æœ‰è¯·æ±‚å‚æ•°ï¼Œä¸åŒ…æ‹¬å­—èŠ‚ç±»å‹å‚æ•°ï¼Œå¦‚æ–‡ä»¶ã€å­—èŠ‚æµï¼Œå‰”é™¤signä¸sign_typeå‚æ•°ã€‚
2ã€æ’åºå°†ç­›é€‰çš„å‚æ•°æŒ‰ç…§ç¬¬ä¸€ä¸ªå­—ç¬¦çš„é”®å€¼ASCIIç é€’å¢æ’åºï¼ˆå­—æ¯å‡åºæ’åºï¼‰ï¼Œå¦‚æœé‡åˆ°ç›¸åŒå­—ç¬¦åˆ™æŒ‰ç…§ç¬¬äºŒä¸ªå­—ç¬¦çš„é”®å€¼ASCIIç é€’å¢æ’åºï¼Œä»¥æ­¤ç±»æ¨ã€‚
3ã€æ‹¼æ¥å°†æ’åºåçš„å‚æ•°ä¸å…¶å¯¹åº”å€¼ï¼Œç»„åˆæˆâ€œå‚æ•°=å‚æ•°å€¼â€çš„æ ¼å¼ï¼Œå¹¶ä¸”æŠŠè¿™äº›å‚æ•°ç”¨&amp;å­—ç¬¦è¿æ¥èµ·æ¥ï¼Œæ­¤æ—¶ç”Ÿæˆçš„å­—ç¬¦ä¸²ä¸ºå¾…ç­¾åå­—ç¬¦ä¸²ã€‚
4ã€ç­¾åMD5ç­¾åçš„å•†æˆ·éœ€è¦å°†keyçš„å€¼æ‹¼æ¥åœ¨å­—ç¬¦ä¸²åé¢ï¼Œè°ƒç”¨MD5ç®—æ³•ç”Ÿæˆsignï¼›RSAç­¾åçš„å•†æˆ·å°†å¾…ç­¾åå­—ç¬¦ä¸²å’Œå•†æˆ·ç§é’¥å¸¦å…¥SHA1ç®—æ³•ä¸­å¾—å‡ºsignã€‚
è¿”å›å‚æ•°éªŒè¯ç­¾åéªŒç­¾çš„ç›®çš„ï¼šä¸ºäº†å¼€å‘è€…èƒ½å¤Ÿç¡®å®šè¯·æ±‚æ˜¯ç”±æ”¯ä»˜å®å‘å‡ºçš„ã€‚
1ã€ç­›é€‰è·å–æ‰€æœ‰æ”¯ä»˜å®è¿”å›çš„å‚æ•°ï¼Œä¸åŒ…æ‹¬å­—èŠ‚ç±»å‹å‚æ•°ï¼Œå¦‚æ–‡ä»¶ã€å­—èŠ‚æµã€‚éªŒç­¾å‚æ•°å‰”é™¤signä¸sign_typeå‚æ•°ã€‚
2ã€æ’åºå°†ç­›é€‰çš„å‚æ•°æŒ‰ç…§ç¬¬ä¸€ä¸ªå­—ç¬¦çš„é”®å€¼ASCIIç é€’å¢æ’åºï¼ˆå­—æ¯å‡åºï¼‰ï¼Œå¦‚æœé‡åˆ°ç›¸åŒå­—ç¬¦åˆ™æŒ‰ç…§ç¬¬äºŒä¸ªå­—ç¬¦çš„é”®å€¼ASCIIç é€’å¢æ’åºï¼Œä»¥æ­¤ç±»æ¨ã€‚
3ã€æ‹¼æ¥å°†æ’åºåçš„å‚æ•°ä¸å…¶å¯¹åº”å€¼ï¼Œç»„åˆæˆâ€œå‚æ•°=å‚æ•°å€¼â€çš„æ ¼å¼ï¼Œå¹¶ä¸”æŠŠè¿™äº›å‚æ•°ç”¨&amp;å­—ç¬¦è¿æ¥èµ·æ¥ï¼Œæ­¤æ—¶ç”Ÿæˆçš„å­—ç¬¦ä¸²ä¸ºå¾…ç­¾åå­—ç¬¦ä¸²ã€‚
4ã€éªŒç­¾MD5ï¼šæŠŠMD5å¯†é’¥ï¼ˆKeyï¼‰æ‹¼æ¥åœ¨å¾…éªŒè¯ç­¾åçš„å­—ç¬¦ä¸²å°¾éƒ¨ï¼Œç„¶åä½¿ç”¨å„è‡ªè¯­è¨€å¯¹åº”çš„MD5åŠ å¯†å‡½æ•°è¿›è¡ŒåŠ å¯†ï¼Œå¾—åˆ°çš„åŠ å¯†å€¼ä¸æ”¯ä»˜å®è¿”å›çš„å‚æ•°signåšâ€œç›¸ç­‰â€åˆ¤æ–­ï¼ŒåŒæ—¶å¯¹è¿”å›å‚æ•°ä¸­çš„notify_idè¿›è¡ŒéªŒè¯ï¼Œå¦‚æœè¿™ä¸¤ä¸ªæ•°æ®åŒæ—¶ä¸ºtrueï¼Œåˆ™éªŒè¯é€šè¿‡ã€‚
å•Šå˜ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰RSAéªŒç­¾çš„è¯´æ˜ï¼Ÿæ²ˆæ™¨å¸…å“¥è§£é‡Šè¯´ï¼Œäººå®¶æ”¯ä»˜å®å°±åªç»™ä½ ä¸€ç§MD5ï¼å‘é€è¯·æ±‚å¯é€‰çš„ç­¾åæ–¹å¼æœ‰ä¸‰ç§ï¼Œæ¥å—è¯·æ±‚åªæœ‰ä¸€ç§ç­¾åæ–¹å¼ï¼Œå¾ˆåˆç†ã€‚
é—®é¢˜å‡è®¾æ”¯ä»˜å®è¿”å›å‚æ•°çš„ç­¾åæ–¹å¼ä¹Ÿæ˜¯RSAï¼Œé‚£ä¹ˆæ€ä¹ˆéªŒè¯ç­¾åï¼ŸçŒœæµ‹è§£ï¼šç­›é€‰ã€æ’åºã€æ‹¼æ¥åï¼Œåˆ©ç”¨RSAå…¬é’¥å¯¹å¾…ç­¾åå­—ç¬¦ä¸²è¿›è¡ŒåŠ å¯†ï¼Œå¾—åˆ°çš„åŠ å¯†å€¼ä¸æ”¯ä»˜å®è¿”å›çš„å‚æ•°signåšâ€œç›¸ç­‰â€åˆ¤æ–­ï¼ŒåŒæ—¶å¯¹è¿”å›å‚æ•°ä¸­çš„notify_idè¿›è¡ŒéªŒè¯ï¼Œå¦‚æœè¿™ä¸¤ä¸ªæ•°æ®åŒæ—¶ä¸ºtrueï¼Œåˆ™éªŒè¯é€šè¿‡ã€‚
å‰ææ˜¯ï¼Œå¯¹åŒä¸€ä¸ªå­—ç¬¦ä¸²è¿›è¡ŒåŠ å¯†å’Œç­¾åï¼Œå¾—åˆ°çš„signæ˜¯ä¸€æ ·çš„ï¼æ¯”å¦‚ï¼Œåˆ©ç”¨å…¬é’¥å¯¹â€œaâ€è¿›è¡ŒåŠ å¯†å¾—åˆ°sign1ï¼Œåˆ©ç”¨ç§é’¥å¯¹â€œaâ€è¿›è¡Œç­¾åå¾—åˆ°sign2ï¼Œé‚£ä¹ˆï¼Œsign1=sign2ï¼
é‚£ä¹ˆï¼Œè¿™ä¸ªå‰æå¯¹ä¸å¯¹å‘¢ï¼Ÿä¸å¥½æ„æ€ï¼Œä¸å¯¹ï¼
å…¬é’¥åŠ å¯†ï¼Œé€šè¿‡ç§é’¥è§£å¯†å¯ä»¥å¾—åˆ°æ˜æ–‡ï¼›ç§é’¥åŠ å¯†ï¼Œé€šè¿‡å…¬é’¥è§£å¯†å¯ä»¥å¾—åˆ°æ˜æ–‡ã€‚ç„¶è€Œï¼Œå¯¹äºåŒä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå…¬é’¥åŠ å¯†å’Œç§é’¥åŠ å¯†å¾—åˆ°çš„å¯†æ–‡æ˜¯ä¸åŒçš„ï¼
å¯¹ç§°åŠ å¯†å¯¹ç§°åŠ å¯†ç®—æ³•ä¸­ï¼Œä½¿ç”¨çš„å¯†é’¥åªæœ‰ä¸€ä¸ªï¼Œå‘æ”¶ä¿¡åŒæ–¹éƒ½ä½¿ç”¨è¿™ä¸ªå¯†é’¥å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ã€‚
MD5åŠ å¯†ç®—æ³•å°±å±äºå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œå› ä¸ºæ— æ³•è¿›è¡Œè§£å¯†ï¼Œæ‰€ä»¥MD5åŠ å¯†ç®—æ³•ä¹Ÿå±äºå•å‘åŠ å¯†ç®—æ³•ã€‚å¸¸ç”¨äºç”¨æˆ·å¯†ç çš„å­˜å‚¨å’Œç­¾åéªŒç­¾ã€‚
éå¯¹ç§°åŠ å¯†ä¸å¯¹ç§°åŠ å¯†ç®—æ³•ä½¿ç”¨ä¸¤æŠŠå®Œå…¨ä¸åŒä½†åˆæ˜¯å®Œå…¨åŒ¹é…çš„ä¸€æŠŠé’¥åŒ™â€”â€”å…¬é’¥å’Œç§é’¥ã€‚åœ¨ä½¿ç”¨ä¸å¯¹ç§°åŠ å¯†ç®—æ³•åŠ å¯†æ–‡ä»¶æ—¶ï¼Œåªæœ‰ä½¿ç”¨åŒ¹é…çš„ä¸€å¯¹å…¬é’¥å’Œç§é’¥ï¼Œæ‰èƒ½å®Œæˆå¯¹æ˜æ–‡çš„åŠ å¯†å’Œè§£å¯†è¿‡ç¨‹ã€‚
RSAåŠ å¯†ç®—æ³•å°±å±äºéå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œå¸¸ç”¨äºåŠ å¯†è§£å¯†å’ŒgitæœåŠ¡å™¨éªŒç­¾ã€‚
ä¹¦ç­¾ç­¾åä¸éªŒç­¾
å…¬é’¥ï¼Œç§é’¥å’Œæ•°å­—ç­¾åè¿™æ ·æœ€å¥½ç†è§£http://blog.csdn.net/21aspnet/article/details/7249401
RSAç®—æ³•åŸç†ï¼ˆä¸€ï¼‰http://www.ruanyifeng.com/blog/2013/06/rsa_algorithm_part_one.html
RSAç®—æ³•åŸç†ï¼ˆäºŒï¼‰http://www.ruanyifeng.com/blog/2013/07/rsa_algorithm_part_two.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>æ”¯ä»˜å®</tag>
        <tag>rsa</tag>
      </tags>
  </entry>
  <entry>
    <title>æ”¯ä»˜å®æ‰‹æœºç½‘ç«™æ”¯ä»˜æµç¨‹</title>
    <url>/dev-alipay-process/</url>
    <content><![CDATA[å‰è¨€å…¬å¸Mç«™è¦æ¥å…¥æ”¯ä»˜å®ï¼Œå€Ÿæœºç ”ç©¶äº†ä¸€ä¸‹æ”¯ä»˜å®çš„æ”¯ä»˜æµç¨‹ã€‚æ¯•ç«Ÿï¼Œåªæœ‰å…¬å¸æ‰èƒ½æ‹¿åˆ°æ”¯ä»˜æ¥å£æƒé™ã€‚
ä¸»è¦å‚è€ƒæ–‡æ¡£ï¼šhttps://doc.open.alipay.com/doc2/detail?treeId=60&amp;articleId=103564&amp;docType=1https://b.alipay.com/order/productDetail.htm?productId=2015110218008816


æ‰‹æœºç½‘ç«™æ”¯ä»˜æ¥å£äº§å“ç®€ä»‹æ‰‹æœºç½‘ç«™æ”¯ä»˜ä¸»è¦åº”ç”¨äºæ‰‹æœºã€æŒä¸Šç”µè„‘ç­‰æ— çº¿è®¾å¤‡çš„ç½‘é¡µä¸Šï¼Œé€šè¿‡ç½‘é¡µè·³è½¬æˆ–æµè§ˆå™¨è‡ªå¸¦çš„æ”¯ä»˜å®å¿«æ·æ”¯ä»˜å®ç°ä¹°å®¶ä»˜æ¬¾çš„åŠŸèƒ½ï¼Œèµ„é‡‘å³æ—¶åˆ°è´¦ã€‚
ç”³è¯·æ¡ä»¶1ã€æ‚¨ç”³è¯·å‰å¿…é¡»æ‹¥æœ‰ä¼ä¸šæ”¯ä»˜å®è´¦å·ï¼ˆä¸å«ä¸ªä½“å·¥å•†æˆ·è´¦å·ï¼‰ï¼Œä¸”é€šè¿‡æ”¯ä»˜å®å®åè®¤è¯å®¡æ ¸ã€‚2ã€å¦‚æœæ‚¨æœ‰å·²ç»å»ºè®¾å®Œæˆçš„æ— çº¿ç½‘ç«™ï¼ˆéæ·˜å®ã€å¤©çŒ«ã€è¯šä¿¡é€šç½‘åº—ï¼‰ï¼Œç½‘ç«™ç»è¥çš„å•†å“æˆ–æœåŠ¡å†…å®¹æ˜ç¡®ã€å®Œæ•´ï¼ˆå¤ç©ã€ç å®ç­‰å¥¢ä¾ˆå“ã€æŠ•èµ„ç±»è¡Œä¸šæ— æ³•ç”³è¯·æœ¬äº§å“ï¼‰ã€‚3ã€ç½‘ç«™å¿…é¡»å·²é€šè¿‡ICPå¤‡æ¡ˆï¼Œå¤‡æ¡ˆä¿¡æ¯ä¸ç­¾çº¦å•†æˆ·ä¿¡æ¯ä¸€è‡´ã€‚
é…ç½®å‡è®¾æˆ‘ä»¬å·²ç»æˆåŠŸç”³è¯·åˆ°æ‰‹æœºç½‘ç«™æ”¯ä»˜æ¥å£ï¼Œåœ¨è¿›è¡Œå¼€å‘ä¹‹å‰ï¼Œéœ€è¦ä½¿ç”¨å…¬å¸è´¦å·ç™»å½•æ”¯ä»˜å®å¼€æ”¾å¹³å°ã€‚
æŸ¥çœ‹PID1ã€å¼€å‘è€…ç™»å½•å¼€æ”¾å¹³å°ï¼Œç‚¹å‡»å³ä¸Šè§’çš„â€œè´¦æˆ·åŠå¯†é’¥ç®¡ç†â€ã€‚
2ã€é€‰æ‹©â€œåˆä½œä¼™ä¼´å¯†é’¥â€ï¼Œå³å¯æŸ¥è¯¢åˆ°åˆä½œä¼™ä¼´èº«ä»½ï¼ˆPIDï¼‰ï¼Œä»¥2088å¼€å¤´çš„16ä½çº¯æ•°å­—ã€‚
é…ç½®å¯†é’¥æ”¯ä»˜å®æä¾›äº†DSAã€RSAã€MD5ä¸‰ç§ç­¾åæ–¹å¼ï¼Œæœ¬æ¬¡å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨RSAç­¾åå’ŒåŠ å¯†ï¼Œé‚£å°±åªé…ç½®RSAå¯†é’¥å°±å¥½äº†ã€‚
å…³äºRSAåŠ å¯†çš„è¯¦è§£ï¼Œå‚è§ã€Šæ”¯ä»˜å®ç­¾åä¸éªŒç­¾ã€‹ã€‚
åº”ç”¨ç¯å¢ƒæœ¬èŠ‚å¯ä»¥å¿½ç•¥ï¼Œæœ¬èŠ‚å¯ä»¥å¿½ç•¥ï¼Œæœ¬èŠ‚å¯ä»¥å¿½ç•¥ï¼å› ä¸ºå®˜æ–¹æ–‡æ¡£å¹¶æ²¡æœ‰æåŠåº”ç”¨ç¯å¢ƒé…ç½®çš„é—®é¢˜ã€‚
è¿›å…¥ç®¡ç†ä¸­å¿ƒï¼Œå¯¹åº”ç”¨è¿›è¡Œè®¾ç½®ã€‚ä¸Šå›¾æ˜¯æˆ‘çš„åº”ç”¨é…ç½®é€‰é¡¹ï¼Œå…¬å¸è´¦å·ä¹Ÿè®¸ä¼šæœ‰æ‰€ä¸åŒã€‚å…·ä½“å“ªäº›å‚æ•°éœ€è¦é…ç½®ï¼Ÿè¯·å‚ç…§æ¥å£å‚æ•°è¯´æ˜ï¼Œéœ€è¦ä»€ä¹ˆå°±é…ç½®ä»€ä¹ˆã€‚
äº¤äº’Nodeç«¯å‘èµ·æ”¯ä»˜è¯·æ±‚æˆ‘ä»¬å…¬å¸é‡‡ç”¨çš„ï¼Œå°±æ˜¯è¿™ç§æ–¹å¼ï¼Œæ­¥éª¤3ä¸­Nodeç«¯è·å–åˆ°çš„æ”¯ä»˜å®å‚æ•°ï¼ŒåŒ…æ‹¬signã€‚å…¶å®ï¼Œsignçš„è®¡ç®—å·¥ä½œä¹Ÿå¯ä»¥æ”¾åœ¨Nodeç«¯ï¼Œåªä¸è¿‡æ”¯ä»˜å®æ²¡æœ‰ç»™å‡ºNodeçš„demoï¼Œå®ç°èµ·æ¥éœ€è¦è€—è´¹å¤šä¸€ç‚¹æ—¶é—´ã€‚
åç«¯å‘èµ·æ”¯ä»˜è¯·æ±‚è¿™ç§æ–¹å¼ä¹Ÿå¾ˆå¥½ï¼Œè€Œä¸”ï¼Œæ­¥éª¤4ä¸­åç«¯è·å–åˆ°æ”¯ä»˜é¡µé¢ï¼Œä¹Ÿå¯ä»¥ä¸ä¼ ç»™Nodeç«¯ï¼Œè‡ªå·±æ˜¾ç¤ºå‡ºæ¥ã€‚è¿™æ ·ï¼Œæ•´ä¸ªæµç¨‹å°±æ›´åŠ ç®€å•ã€‚
return_urlå’Œnotify_urlreturn_urlï¼Œæ”¯ä»˜å®Œæˆåçš„å›è°ƒurlï¼›notify_urlï¼Œæ”¯ä»˜å®Œæˆåé€šçŸ¥çš„urlã€‚æ”¯ä»˜å®å‘é€ç»™ä¸¤ä¸ªurlçš„å‚æ•°æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ä¸€ä¸ªæ˜¯getï¼Œä¸€ä¸ªæ˜¯postã€‚
ä»¥ä¸Šä¸¤ç§å‘èµ·è¯·æ±‚çš„æ–¹å¼ä¸­ï¼Œreturn_urlåœ¨Nodeç«¯ï¼Œnotify_urlåœ¨åç«¯ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦ï¼ŒæŠŠä¸¤ä¸ªurléƒ½æ”¾åœ¨åç«¯ï¼Œæˆ–è€…éƒ½æ”¾åœ¨Nodeç«¯ï¼Œæ”¹å˜ç›¸åº”ä¸šåŠ¡é€»è¾‘å³å¯ã€‚
Nodeç«¯è¯¦è§£Nodeç«¯å‘èµ·æ”¯ä»˜è¯·æ±‚æœ‰ä¸¤ç§é€‰æ‹©ï¼Œä¸€ç§æ˜¯è·å–åˆ°åç«¯ç»™çš„å‚æ•°åï¼Œé€šè¿‡requestæ¨¡å—å‘èµ·getè¯·æ±‚ï¼Œè·å–åˆ°æ”¯ä»˜å®è¿”å›çš„æ”¯ä»˜é¡µé¢ï¼Œç„¶åæ˜¾ç¤ºåˆ°é¡µé¢ä¸Šï¼›å¦ä¸€ç§æ˜¯è·å–åˆ°åç«¯ç»™çš„å‚æ•°åï¼ŒæŠŠå‚æ•°å…¨éƒ¨è¾“å‡ºåˆ°é¡µé¢ä¸­çš„formè¡¨å•ï¼Œç„¶åé€šè¿‡jsè‡ªåŠ¨æäº¤è¡¨å•ï¼Œè·å–åˆ°æ”¯ä»˜å®è¿”å›çš„æ”¯ä»˜é¡µé¢ï¼ˆåŒæ—¶æ˜¾ç¤ºå‡ºæ¥ï¼‰ã€‚
requestå‘èµ·è¯·æ±‚// é€šè¿‡orderIdå‘åç«¯è¯·æ±‚è·å–æ”¯ä»˜å®æ”¯ä»˜å‚æ•°alidatavar alipayUrl = &#x27;https://mapi.alipay.com/gateway.do?&#x27;+ alidata;request.get(&#123;url: alipayUrl&#125;,function(error, response, body)&#123;    res.send(response.body);&#125;);

ç†è®ºä¸Šå®Œå…¨æ­£ç¡®çš„è¯·æ±‚ï¼Œç„¶è€Œï¼Œè·å–åˆ°çš„æ”¯ä»˜é¡µé¢ï¼Œè¾“å‡ºåˆ°é¡µé¢ä¸Šï¼Œå´æ˜¯ä¹±ç ã€‚æ²¡é”™ï¼Œè¿˜æ˜¯ä¸€ä¸ªé”™è¯¯æç¤ºé¡µé¢ã€‚
ç¥å¥‡çš„åœ°æ–¹åœ¨äºï¼Œåœ¨åˆ·æ–°é¡µé¢å¤šæ¬¡åï¼Œæ­£å¸¸äº†ï¼ï¼ï¼å•Šå˜ï¼Œè¿™æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ

å…ˆè§£å†³ä¹±ç é—®é¢˜ï¼Œçœ‹çœ‹æŠ¥ä»€ä¹ˆé”™ï¼
request.get(&#123;url: alipayUrl&#125;,function(error, response, body)&#123;    var str = response2.body;    str = str.replace(/gb2312/, &quot;utf-8&quot;);    res.setHeader(&#x27;content-type&#x27;, &#x27;text/html;charset=utf-8&#x27;);    res.send(str);&#125;);

å¾ˆé—æ†¾ï¼Œæ— æ•ˆï¼ä¹±ç ä¾ç„¶æ˜¯ä¹±ç ã€‚ã€‚ã€‚å’Œæ²ˆæ™¨å¸…å“¥è®¨è®ºå¾ˆä¹…ï¼Œæœ€ç»ˆå†³å®šæ¢ä¸€ç§æ–¹æ¡ˆâ€”â€”åˆ©ç”¨è¡¨å•æäº¤ã€‚
è¡¨å•æäº¤è¯·æ±‚Nodeç«¯// nodeç«¯// é€šè¿‡orderIdå‘åç«¯è¯·æ±‚è·å–æ”¯ä»˜å®æ”¯ä»˜å‚æ•°alidatafunction getArg(str,arg) &#123;  var reg = new RegExp(&#x27;(^|&amp;)&#x27; + arg + &#x27;=([^&amp;]*)(&amp;|$)&#x27;, &#x27;i&#x27;);  var r = str.match(reg);  if (r != null) &#123;      return unescape(r[2]);  &#125;  return null;&#125;var alipayParam = &#123;  _input_charset: getArg(alidata,&#x27;_input_charset&#x27;),  body: getArg(alidata,&#x27;body&#x27;),  it_b_pay: getArg(alidata, &#x27;it_b_pay&#x27;),  notify_url: getArg(alidata, &#x27;notify_url&#x27;),  out_trade_no: getArg(alidata, &#x27;out_trade_no&#x27;),  partner: getArg(alidata, &#x27;partner&#x27;),  payment_type: getArg(alidata, &#x27;payment_type&#x27;),  return_url: getArg(alidata, &#x27;return_url&#x27;),  seller_id: getArg(alidata, &#x27;seller_id&#x27;),  service: getArg(alidata, &#x27;service&#x27;),  show_url: getArg(alidata, &#x27;show_url&#x27;),  subject: getArg(alidata, &#x27;subject&#x27;),  total_fee: getArg(alidata, &#x27;total_fee&#x27;),  sign_type: getArg(alidata, &#x27;sign_type&#x27;),  sign: getArg(alidata, &#x27;sign&#x27;),  app_pay: getArg(alidata, &#x27;app_pay&#x27;)&#125;;res.render(&#x27;artist/alipay&#x27;,&#123;  // å…¶ä»–å‚æ•°  alipayParam: alipayParam&#125;);

html&lt;!--alipay.html--&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;æ”¯ä»˜å®æ”¯ä»˜&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;form id=&quot;ali-form&quot; action=&quot;https://mapi.alipay.com/gateway.do&quot; method=&quot;get&quot;&gt;           &lt;input type=&quot;hidden&quot; name=&quot;_input_charset&quot; value=&quot;&lt;%= alipayParam._input_charset%&gt;&quot;&gt;        &lt;input type=&quot;hidden&quot; name=&quot;body&quot; value=&quot;&lt;%= alipayParam.body%&gt;&quot;&gt;        &lt;input type=&quot;hidden&quot; name=&quot;it_b_pay&quot; value=&quot;&lt;%= alipayParam.it_b_pay%&gt;&quot;&gt;        &lt;input type=&quot;hidden&quot; name=&quot;notify_url&quot; value=&quot;&lt;%= alipayParam.notify_url%&gt;&quot;&gt;        &lt;input type=&quot;hidden&quot; name=&quot;out_trade_no&quot; value=&quot;&lt;%= alipayParam.out_trade_no%&gt;&quot;&gt;        &lt;input type=&quot;hidden&quot; name=&quot;partner&quot; value=&quot;&lt;%= alipayParam.partner%&gt;&quot;&gt;        &lt;input type=&quot;hidden&quot; name=&quot;payment_type&quot; value=&quot;&lt;%= alipayParam.payment_type%&gt;&quot;&gt;        &lt;input type=&quot;hidden&quot; name=&quot;return_url&quot; value=&quot;&lt;%= alipayParam.return_url%&gt;&quot;&gt;        &lt;input type=&quot;hidden&quot; name=&quot;seller_id&quot; value=&quot;&lt;%= alipayParam.seller_id%&gt;&quot;&gt;        &lt;input type=&quot;hidden&quot; name=&quot;service&quot; value=&quot;&lt;%= alipayParam.service%&gt;&quot;&gt;        &lt;input type=&quot;hidden&quot; name=&quot;show_url&quot; value=&quot;&lt;%= alipayParam.show_url%&gt;&quot;&gt;        &lt;input type=&quot;hidden&quot; name=&quot;subject&quot; value=&quot;&lt;%= alipayParam.subject%&gt;&quot;&gt;        &lt;input type=&quot;hidden&quot; name=&quot;total_fee&quot; value=&quot;&lt;%= alipayParam.total_fee%&gt;&quot;&gt;        &lt;input type=&quot;hidden&quot; name=&quot;sign_type&quot; value=&quot;&lt;%= alipayParam.sign_type%&gt;&quot;&gt;        &lt;input type=&quot;hidden&quot; name=&quot;sign&quot; value=&quot;&lt;%= alipayParam.sign%&gt;&quot;&gt;        &lt;input type=&quot;hidden&quot; name=&quot;app_pay&quot; value=&quot;&lt;%= alipayParam.app_pay%&gt;&quot;&gt;    &lt;/form&gt;&lt;% include ../bootstrap.html %&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;&lt;%= dist %&gt;/js/business-modules/artist/alipay.js?v=2016052401&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;

js// alipay.jsseajs.use([&#x27;zepto&#x27;],function($)&#123;    var index = &#123;        init:function()&#123;            var self = this;            this.bindEvent();        &#125;,        bindEvent:function()&#123;            var self = this;            $(&#x27;#ali-form&#x27;).submit();        &#125;    &#125;    index.init();&#125;);

å°ç»“é€‰æ‹©æ”¯ä»˜å®æ”¯ä»˜åï¼ŒæˆåŠŸè·³è½¬åˆ°äº†æ”¯ä»˜å®æ”¯ä»˜é¡µé¢ï¼Œniceï¼çœ‹æ¥è¿™ç§æ–¹æ¡ˆå¾ˆé è°±ã€‚
å¼€å§‹æ—¶ï¼Œæ‰“ç®—æŠŠalidataç›´æ¥è¾“å‡ºåˆ°formè¡¨å•çš„actionä¸­æ¥å£çš„åé¢ï¼Œå› ä¸ºè¿™æ ·ä¼¼ä¹æœ€ç®€ä¾¿ã€‚ä½†æ˜¯ï¼Œæäº¤è¡¨å•æ—¶ï¼Œåé¢çš„å‚æ•°å…¨éƒ¨è¢«ä¸¢å¼ƒäº†ã€‚æ‰€ä»¥ï¼Œä¸å¾—ä¸å¾—æŠŠæ‰€æœ‰å‚æ•°æ”¾åœ¨formè¡¨å•ä¸­ã€‚Nodeç«¯æ‹†åˆ†äº†ä¸€ä¸‹å‚æ•°ï¼Œç»„è£…æˆäº†ä¸€ä¸ªalipayParamå¯¹è±¡ï¼Œè¿™ä¸ªå·¥ä½œä¹Ÿå¯ä»¥äº¤ç»™åç«¯æ¥åšã€‚
æ˜¾ç„¶ï¼Œrequestæ¨¡æ‹Ÿè¡¨å•æäº¤å’ŒçœŸå®è¡¨å•æäº¤ç»“æœçš„ä¸åŒï¼Œå¾—å‡ºçš„ç»“è®ºæ˜¯ï¼Œrequestå¹¶ä¸èƒ½å®Œå…¨æ¨¡æ‹Ÿè¡¨å•æäº¤ã€‚æˆ–è€…ï¼Œrequestå¯ä»¥æ¨¡æ‹Ÿï¼Œè€Œæˆ‘ä¸ä¼š-_-|||ã€‚
é”™è¯¯æ’æŸ¥å€¼å¾—ç‚¹èµçš„æ˜¯ï¼Œæ”¯ä»˜å®ç»™çš„é”™è¯¯ä»£ç å¾ˆæ˜ç¡®ï¼Œä¸€çœ‹å°±æ‡‚ã€‚ä¸Šé¢è¿™ä¸ªé”™è¯¯ï¼Œç­¾åä¸å¯¹ã€‚å› ä¸ºæˆ‘ç»™alipayParamç§è‡ªåŠ äº†ä¸ªapp_payå±æ€§ï¼Œæ²¡æœ‰ç»è¿‡ç­¾åã€‚
å¾®ä¿¡å±è”½æ”¯ä»˜å®é—®é¢˜æè¿°ä»¥ä¸Šï¼Œå¤§åŠŸå‘Šæˆï¼Ÿä¸ï¼è¿˜æœ‰ä¸€ä¸ªå‘è¦å¡«ï¼Œå› ä¸ºå¾®ä¿¡å±è”½äº†æ”¯ä»˜å®ï¼åœ¨ç”µè„‘ä¸Šï¼Œè·³è½¬æ”¯ä»˜å®æ”¯ä»˜é¡µé¢æ­£å¸¸ï¼Œå¾ˆå®Œç¾ï¼ç„¶è€Œï¼Œåœ¨å¾®ä¿¡æµè§ˆå™¨ä¸­æµ‹è¯•æ—¶ï¼Œå´æ²¡æœ‰è·³è½¬ï¼Œè€Œæ˜¯å‡ºç°å¦‚ä¸‹ä¿¡æ¯ã€‚
å®Œç¾è§£å†³åŠæ³•å¾®ä¿¡ç«¯æ”¯ä»˜å®æ”¯ä»˜ï¼Œiframeæ”¹é€ http://www.cnblogs.com/jiqing9006/p/5584268.html
è¯¥åŠæ³•çš„æ ¸å¿ƒåœ¨äºï¼šæŠŠå¾®ä¿¡å±è”½çš„é“¾æ¥ï¼Œèµ‹å€¼ç»™iframeçš„srcå±æ€§ã€‚
Nodeç«¯res.render(&#x27;artist/alipay&#x27;,&#123;  alipayParam: alipayParam,  param: urlencode(alidata) &#125;);

html&lt;input type=&quot;hidden&quot; id=&quot;param&quot; value=&quot;&lt;%= param%&gt;&quot;&gt;&lt;iframe id=&quot;payFrame&quot; name=&quot;mainIframe&quot; src=&quot;&quot; frameborder=&quot;0&quot; scrolling=&quot;auto&quot; &gt;&lt;/iframe&gt;

jsvar iframe = document.getElementById(&#x27;payFrame&#x27;);var param = $(&#x27;#param&#x27;).val();iframe.src=&#x27;https://mapi.alipay.com/gateway.do?&#x27;+param;

æŠ¥é”™ç„¶è€Œï¼Œåœ¨æ”¹é€ æ—¶ï¼Œå…ˆæ˜¯æŠ¥é”™ILLEGAL_SIGNï¼Œäºæ˜¯åˆ©ç”¨urlencodeå¤„ç†äº†å­—ç¬¦ä¸²ã€‚æ¥ç€ï¼ŒåˆæŠ¥é”™ILLEGAL_EXTERFACEï¼Œæ²¡æœ‰æ‰¾åˆ°è§£å†³åŠæ³•ã€‚
æš‚æ—¶æ”¾å¼ƒï¼Œä»¥åå¦‚æœæœ‰äº†è§£å†³åŠæ³•å†è¡¥ä¸Šã€‚
å®˜æ–¹è§£å†³åŠæ³•å…³äºå¾®ä¿¡å…¬ä¼—å¹³å°æ— æ³•ä½¿ç”¨æ”¯ä»˜å®æ”¶ä»˜æ¬¾çš„è§£å†³æ–¹æ¡ˆè¯´æ˜https://cshall.alipay.com/enterprise/help_detail.htm?help_id=524702
è¯¥æ–¹æ³•çš„æ ¸å¿ƒåœ¨äºï¼šç¡®è®¤æ”¯ä»˜æ—¶ï¼Œæç¤ºç”¨æˆ·æ‰“å¼€å¤–éƒ¨ç³»ç»Ÿæµè§ˆå™¨ï¼Œåœ¨ç³»ç»Ÿæµè§ˆå™¨ä¸­æ”¯ä»˜ã€‚
html&lt;!--alipay.html--&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;  &lt;meta charset=&quot;UTF-8&quot;&gt;  &lt;title&gt;æ”¯ä»˜å®æ”¯ä»˜&lt;/title&gt;&lt;/head&gt;&lt;body&gt;  &lt;form id=&quot;ali-form&quot; action=&quot;https://mapi.alipay.com/gateway.do&quot; method=&quot;get&quot;&gt;     &lt;input type=&quot;hidden&quot; name=&quot;_input_charset&quot; value=&quot;&lt;%= alipayParam._input_charset%&gt;&quot;&gt;    &lt;input type=&quot;hidden&quot; name=&quot;body&quot; value=&quot;&lt;%= alipayParam.body%&gt;&quot;&gt;    &lt;input type=&quot;hidden&quot; name=&quot;it_b_pay&quot; value=&quot;&lt;%= alipayParam.it_b_pay%&gt;&quot;&gt;    &lt;input type=&quot;hidden&quot; name=&quot;notify_url&quot; value=&quot;&lt;%= alipayParam.notify_url%&gt;&quot;&gt;    &lt;input type=&quot;hidden&quot; name=&quot;out_trade_no&quot; value=&quot;&lt;%= alipayParam.out_trade_no%&gt;&quot;&gt;    &lt;input type=&quot;hidden&quot; name=&quot;partner&quot; value=&quot;&lt;%= alipayParam.partner%&gt;&quot;&gt;    &lt;input type=&quot;hidden&quot; name=&quot;payment_type&quot; value=&quot;&lt;%= alipayParam.payment_type%&gt;&quot;&gt;    &lt;input type=&quot;hidden&quot; name=&quot;return_url&quot; value=&quot;&lt;%= alipayParam.return_url%&gt;&quot;&gt;    &lt;input type=&quot;hidden&quot; name=&quot;seller_id&quot; value=&quot;&lt;%= alipayParam.seller_id%&gt;&quot;&gt;    &lt;input type=&quot;hidden&quot; name=&quot;service&quot; value=&quot;&lt;%= alipayParam.service%&gt;&quot;&gt;    &lt;input type=&quot;hidden&quot; name=&quot;show_url&quot; value=&quot;&lt;%= alipayParam.show_url%&gt;&quot;&gt;    &lt;input type=&quot;hidden&quot; name=&quot;subject&quot; value=&quot;&lt;%= alipayParam.subject%&gt;&quot;&gt;    &lt;input type=&quot;hidden&quot; name=&quot;total_fee&quot; value=&quot;&lt;%= alipayParam.total_fee%&gt;&quot;&gt;    &lt;input type=&quot;hidden&quot; name=&quot;sign_type&quot; value=&quot;&lt;%= alipayParam.sign_type%&gt;&quot;&gt;    &lt;input type=&quot;hidden&quot; name=&quot;sign&quot; value=&quot;&lt;%= alipayParam.sign%&gt;&quot;&gt;    &lt;div class=&quot;wrapper buy-wrapper&quot; style=&quot;display: none;&quot;&gt;        &lt;a href=&quot;javascript:void(0);&quot;           class=&quot;J-btn-submit btn mj-submit btn-strong btn-larger btn-block&quot;&gt;ç¡®è®¤æ”¯ä»˜&lt;/a&gt;    &lt;/div&gt;  &lt;/form&gt;&lt;input type=&quot;hidden&quot; id=&quot;param&quot; value=&quot;&lt;%= param%&gt;&quot;&gt;&lt;% include ../bootstrap.html %&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;&lt;%= dist %&gt;/js/business-modules/artist/ap.js&quot;&gt;&lt;/script&gt;&lt;script&gt;    var btn = document.querySelector(&quot;.J-btn-submit&quot;);    btn.addEventListener(&quot;click&quot;, function (e) &#123;        e.preventDefault();        e.stopPropagation();        e.stopImmediatePropagation();        var queryParam = &#x27;&#x27;;        Array.prototype.slice.call(document.querySelectorAll(&quot;input[type=hidden]&quot;)).forEach(function (ele) &#123;            queryParam += ele.name + &quot;=&quot; + encodeURIComponent(ele.value) + &#x27;&amp;&#x27;;        &#125;);        var gotoUrl = document.querySelector(&quot;#ali-form&quot;).getAttribute(&#x27;action&#x27;) + &#x27;?&#x27; + queryParam;        _AP.pay(gotoUrl);        return false;    &#125;, false);    btn.click();&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;

è¯¥é¡µé¢ä¼šè‡ªåŠ¨è·³è½¬åˆ°åŒä¸€æ–‡ä»¶å¤¹ä¸‹çš„pay.htmï¼Œè¯¥æ–‡ä»¶å®˜æ–¹å·²ç»æä¾›ï¼ŒæŠŠå…¶ä¸­çš„å¼•å…¥ap.jsçš„è·¯å¾„ä¿®æ”¹ä¸€ä¸‹å³å¯ã€‚æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š
åè®°æ”¯ä»˜å®çš„æ”¯ä»˜æµç¨‹å’Œå¾®ä¿¡çš„æ”¯ä»˜æµç¨‹ï¼Œæœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„ã€‚æ²ˆæ™¨æŒ‡å‡ºä¸€ç‚¹ä¸åŒï¼šæ”¯ä»˜å®æ”¯ä»˜å®Œæˆåæœ‰return_urlå’Œnotify_urlï¼›å¾®ä¿¡æ”¯ä»˜å®Œæˆååªæœ‰notify_urlã€‚
ç ”è¯»äº†ä¸€ä¸‹å¾®ä¿¡æ”¯ä»˜çš„å¼€å‘æ–‡æ¡£ï¼Œç¡®å®å¦‚æ­¤ã€‚å¾®ä¿¡æ”¯ä»˜å®Œæˆåçš„é€šçŸ¥ä¹Ÿåˆ†æˆä¸¤è·¯ï¼Œä¸€è·¯é€šçŸ¥åˆ°notify_urlï¼Œå¦ä¸€è·¯è¿”å›ç»™è°ƒç”¨æ”¯ä»˜æ¥å£çš„JSï¼ŒåŒæ—¶å‘å¾®ä¿¡æ¶ˆæ¯æç¤ºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè·³è½¬return_urlçš„å·¥ä½œæˆ‘ä»¬éœ€è¦è‡ªå·±åšã€‚
æœ€åï¼Œæ„Ÿè°¢æ²ˆæ™¨å¸…å“¥æä¾›çš„æ€è·¯å’Œå¸®åŠ©ï¼Œæ„Ÿè°¢ä½“è¶…å¸…å“¥è¾›è‹¦æ”¹åç«¯ã€‚
ä¹¦ç­¾æ”¯ä»˜å®å¼€æ”¾å¹³å°https://openhome.alipay.com/platform/home.htm
æ”¯ä»˜å®å¼€æ”¾å¹³å°-æ‰‹æœºç½‘ç«™æ”¯ä»˜-æ–‡æ¡£ä¸­å¿ƒhttps://doc.open.alipay.com/doc2/detail?treeId=60&amp;articleId=103564&amp;docType=1
æ”¯ä»˜å®WAPæ”¯ä»˜æ¥å£å¼€å‘http://blog.csdn.net/tspangle/article/details/39932963
wap h5æ‰‹æœºç½‘ç«™æ”¯ä»˜æ¥å£å”¤èµ·æ”¯ä»˜å®é’±åŒ…ä»˜æ¬¾
å•†å®¶æœåŠ¡ - æ”¯ä»˜å® çŸ¥æ‰˜ä»˜ï¼https://b.alipay.com/order/techService.htm
å¾®ä¿¡æ”¯ä»˜-å¼€å‘æ–‡æ¡£https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=7_1
å¾®ä¿¡ç«¯æ”¯ä»˜å®æ”¯ä»˜ï¼Œiframeæ”¹é€ http://www.cnblogs.com/jiqing9006/p/5584268.html
å¾®ä¿¡å¦‚ä½•çªç ´æ”¯ä»˜å®çš„å°é”http://blog.csdn.net/lee_sire/article/details/49530875
JavaScriptä¸“é¢˜ï¼ˆäºŒï¼‰ï¼šæ·±å…¥ç†è§£iframehttp://www.cnblogs.com/fangjins/archive/2645631.html
å…³äºå¾®ä¿¡å…¬ä¼—å¹³å°æ— æ³•ä½¿ç”¨æ”¯ä»˜å®æ”¶ä»˜æ¬¾çš„è§£å†³æ–¹æ¡ˆè¯´æ˜https://cshall.alipay.com/enterprise/help_detail.htm?help_id=524702
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>node</tag>
        <tag>æ”¯ä»˜å®</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ©ç”¨Nodeçš„requestæ¨¡å—è®¿é—®æœ¬åœ°æ•°æ®</title>
    <url>/dev-node-request-local-data/</url>
    <content><![CDATA[å‰è¨€æœ€è¿‘å…¬å¸ç³»ç»Ÿæ¶æ„è°ƒæ•´ï¼Œæ•°æ®è¿˜æ²¡æœ‰è¿ç§»å®Œæ¯•ï¼Œå¾ˆå¤šæ¥å£å‡ºç°äº†é—®é¢˜ï¼Œè”è°ƒæˆäº†ä¸€ä»¶å›°éš¾çš„äº‹ã€‚å¼€å‘è¿˜è¦ç»§ç»­ï¼Œç‰›é€¼çš„å‰ç«¯è‡ªåŠ›æ›´ç”Ÿï¼


è·å–åœ°å€ä»¥è·å–ç”¨æˆ·çš„åœ°å€ä¿¡æ¯ä¸ºä¾‹ï¼Œå¯¹ä»£ç è¿›è¡Œæ”¹é€ ã€‚
åŸä»£ç // è·å–ç”¨æˆ·åœ°å€ä¿¡æ¯var queryAddressUrl = config.apihost + &#x27;/address/selAddress&#x27;;var param = &#123;  accessToken: accessToken&#125;;request.post(&#123;url: queryAddressUrl, form:JSON.stringify(param)&#125;,function(error, response, body)&#123;  console.log(response.body);  if(!error &amp;&amp; response.statusCode == 200)&#123;    ep.emit(&#x27;address&#x27;,response.body);  &#125;&#125;);

æ”¹é€ åä»£ç // è·å–ç”¨æˆ·åœ°å€ä¿¡æ¯// var queryAddressUrl = config.apihost + &#x27;/address/selAddress&#x27;;var queryAddressUrl = config.host + &#x27;/data/address.json&#x27;;var param = &#123;  accessToken: accessToken&#125;;// postæ”¹ä¸ºgetrequest.get(&#123;url: queryAddressUrl, form:JSON.stringify(param)&#125;,function(error, response, body)&#123;  console.log(response.body);  if(!error &amp;&amp; response.statusCode == 200)&#123;    ep.emit(&#x27;address&#x27;,response.body);  &#125;&#125;);
ä¸¤æ®µä»£ç å¯¹æ¯”ï¼Œå¯ä»¥å‘ç°ï¼Œè¯·æ±‚çš„urlç”±è¿œç¨‹æ¥å£åœ°å€æ”¹ä¸ºäº†æœ¬åœ°æ–‡ä»¶åœ°å€ï¼Œè¯·æ±‚çš„typeç”±postæ”¹ä¸ºäº†getã€‚
address.jsonå› ä¸ºpublicæ–‡ä»¶å¤¹çš„è™šæ‹Ÿè·¯å¾„ä¸ºç½‘ç«™æ ¹ç›®å½•ï¼Œä¸”ä¸ºé™æ€æ–‡ä»¶ç›®å½•ï¼Œæ‰€ä»¥åœ¨/public/dataæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºæ–‡ä»¶address.jsonï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&#123;    &quot;code&quot;: 1,    &quot;ext&quot;: &#123;        &quot;msg&quot;: &quot;æˆåŠŸ&quot;    &#125;,    &quot;obj&quot;: &#123;        &quot;pcdAddress&quot;: &quot;æ±Ÿè‹çœ å—äº¬å¸‚ é›¨èŠ±å°åŒº&quot;,        &quot;purchaserName&quot;: &quot;éƒé”¦&quot;,        &quot;purchaserTel&quot;: &quot;15195892217&quot;,        &quot;street&quot;: &quot;ååšæ™ºæ…§å›­&quot;,        &quot;areaId&quot;: 0,        &quot;defaultAddress&quot;: false    &#125;&#125;
è‡³æ­¤ï¼Œæ”¹é€ æˆåŠŸï¼Œå¯ä»¥æ„‰å¿«åœ°è·å–æ•°æ®äº†ï¼
åè®°æœ‰äº›éœ€è¦è®¡ç®—çš„æ•°æ®å¹¶ä¸èƒ½æ¨¡æ‹Ÿï¼Œæ¯”å¦‚æ”¯ä»˜å®çš„ç­¾åå­—ç¬¦ä¸²ã€‚
åˆ©ç”¨ajaxä¹Ÿå¯ä»¥è·å–æœ¬åœ°æ•°æ®ï¼Œå¯¹äºå‰ç«¯å¼€å‘è€…æ¥è¯´åŒæ ·å¾ˆå®ç”¨ã€‚ç”¨æ³•å¾ˆç®€å•ï¼Œä¸€çœ‹å°±ä¼šï¼Œè¯¦æƒ…è‡ªè¡Œç™¾åº¦ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>node</tag>
        <tag>request</tag>
      </tags>
  </entry>
  <entry>
    <title>nodeä¸­exportså’Œmodule.exportsçš„åŒºåˆ«å’Œè”ç³»</title>
    <url>/dev-node-exports-and-module-exports/</url>
    <content><![CDATA[å‰è¨€
exportsåªæ˜¯module.exportsçš„è¾…åŠ©æ–¹æ³•ã€‚ä½ çš„æ¨¡å—æœ€ç»ˆè¿”å›module.exportsç»™è°ƒç”¨è€…ï¼Œè€Œä¸æ˜¯exportsã€‚exportsæ‰€åšçš„äº‹æƒ…æ˜¯æ”¶é›†å±æ€§ï¼Œå¦‚æœmodule.exportså½“å‰æ²¡æœ‰ä»»ä½•å±æ€§çš„è¯ï¼Œexportsä¼šæŠŠè¿™äº›å±æ€§èµ‹äºˆmodule.exportsã€‚å¦‚æœmodule.exportså·²ç»å­˜åœ¨ä¸€äº›å±æ€§çš„è¯ï¼Œé‚£ä¹ˆexportsä¸­æ‰€ç”¨çš„ä¸œè¥¿éƒ½ä¼šè¢«å¿½ç•¥ã€‚


æœ€åˆæ—¶ï¼Œexportsæ˜¯module.exportsçš„ä¸€ä¸ªå¼•ç”¨ã€‚(exports=global.exports)=(self.exports=module.exports)



exportsæ­£å¸¸å¯¼å‡º// caculate.jsexports.add = function (a, b) &#123;    return a+b;&#125;

// main.jsvar caculate = require(&#x27;./caculate&#x27;);exports.runAdd = function(req, res)&#123;    var num = caculate.add(5,4);    console.log(num);&#125;
åœ¨mainæ¨¡å—ä¸­ï¼Œå¯ä»¥æ­£å¸¸è°ƒç”¨caculateæ¨¡å—ä¸­çš„addå‡½æ•°ã€‚å› ä¸ºexportsæ˜¯module.exportsçš„ä¸€ä¸ªå¼•ç”¨ï¼Œæ‰€ä»¥exports.add=function()&#123;&#125;è¿™ä¸ªæ“ä½œï¼ŒæŠŠaddå‡½æ•°åŠ åˆ°äº†module.exportsæŒ‡å‘çš„å¯¹è±¡ï¼ˆå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼‰ä¸­ã€‚è€Œmainæ¨¡å—ä¸­è·å–åˆ°çš„ï¼Œå°±æ˜¯caculateçš„module.exportsæŒ‡å‘çš„å¯¹è±¡ï¼Œè‡ªç„¶ä¹Ÿè·å–åˆ°äº†addå‡½æ•°ã€‚
exportsé”™è¯¯å¯¼å‡º// caculate.jsexports = function (a, b) &#123;    return a+b;&#125;

// main.jsvar caculate = require(&#x27;./caculate&#x27;);exports.runAdd = function(req, res)&#123;    console.log(caculate);    //var num = caculate(5, 4);    //console.log(num);&#125;
å¦‚ä¸Šçš„å¯¼å‡ºæ–¹æ³•æ˜¯é”™è¯¯çš„ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰“å°å‡ºçš„caculateæ˜¯ä¸€ä¸ªç©ºå¯¹è±¡&#123;&#125;ã€‚å› ä¸ºexportsåŸæœ¬æ˜¯module.exportsçš„ä¸€ä¸ªå¼•ç”¨ï¼Œåæ¥æŒ‡å‘äº†ä¸€ä¸ªå‡½æ•°ã€‚è€Œmodule.exportsçš„æŒ‡å‘çš„å¯¹è±¡ï¼Œåˆå§‹å€¼å°±æ˜¯ç©ºå¯¹è±¡&#123;&#125;ï¼Œè‡ªå§‹è‡³ç»ˆéƒ½æ²¡æœ‰è¿™ä¸ªç©ºå¯¹è±¡æ·»åŠ å±æ€§æˆ–å‡½æ•°ã€‚æ‰€ä»¥ï¼Œå½“mainæ¨¡å—ä¸­è·å–åˆ°caculateçš„module.exportsæŒ‡å‘çš„å¯¹è±¡æ—¶ï¼Œä¾ç„¶æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡&#123;&#125;ã€‚
module.exportså¯¼å‡º// caculate.jsexports.add = function (a, b) &#123;    return a+b;&#125;var caculate = &#123;    delete: function(a, b)&#123;        return a-b;    &#125;,    multiple: function(a, b)&#123;        return a*b;    &#125;&#125;;module.exports = caculate;

// main.jsvar caculate = require(&#x27;./caculate&#x27;);exports.runDelete = function(req, res)&#123;    //var num = caculate.add(5, 4);    var num = caculate.delete(5, 4);    console.log(num);&#125;
å¦‚ä¸Šå¯¼å‡ºæ–¹æ³•ï¼Œåœ¨caculateçš„module.exportsæŒ‡å‘çš„å¯¹è±¡ä¸­ï¼Œä¸ä¼šåŒ…å«addå‡½æ•°ã€‚è™½ç„¶exports.add=function()&#123;&#125;å‘module.exportsæŒ‡å‘çš„ç©ºå¯¹è±¡&#123;&#125;ä¸­æ·»åŠ äº†ä¸€ä¸ªaddå‡½æ•°ï¼Œä½†æ˜¯ç´§æ¥ç€ï¼Œmodule.exportsæŒ‡å‘çš„å¯¹è±¡æ”¹å˜äº†ï¼å˜æˆäº†caculateå¯¹è±¡ã€‚
seajsä¸­module.exportså’Œreturnseajsä¸­çš„exportså’Œmodule.exportsçš„å…³ç³»ï¼Œå’ŒNodeä¸­ç›¸åŒã€‚
åœ¨è¿›è¡Œæ’ä»¶CMDæ¨¡å—åŒ–æ—¶ï¼Œå‘ç°module.exportså’ŒreturnåŸºæœ¬ç›¸åŒã€‚ä¸‹é¢å†™ä¸ªå°ä¾‹å­ï¼š
// plugin.jsdefine(function(require, exports, module)&#123;    module.exports = function(jQuery)&#123;        // require(&#x27;another-plugin&#x27;)(jQuery);        // ä¾èµ–jQueryçš„æ’ä»¶ä»£ç     &#125;&#125;)

// plugin.jsdefine(function(require, exports, module)&#123;    return function(jQuery)&#123;        // require(&#x27;another-plugin&#x27;)(jQuery);        // ä¾èµ–jQueryçš„æ’ä»¶ä»£ç     &#125;&#125;)

seajs.use([&#x27;jquery&#x27;,&#x27;plugin&#x27;],function($,plugin)&#123;    plugin($);//åˆå§‹åŒ–&#125;);

ä¹¦ç­¾Modules Node.js v6.3.0 Manual &amp; Documentationhttps://nodejs.org/api/modules.html#modules_the_module_object
module.exports è¿˜æ˜¯ exportsï¼Ÿhttp://zihua.li/2012/03/use-module-exports-or-exports-in-node/
nodejsä¸­exportä¸module.exportçš„åŒºåˆ«
SeaJS ä¸­çš„ exports å’Œæ¨¡å—åŠ è½½http://www.tuicool.com/articles/Y3qmAj
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>node</tag>
        <tag>exports</tag>
      </tags>
  </entry>
  <entry>
    <title>å¾®ä¿¡è‡ªå®šä¹‰åˆ†äº«ä¸­nodeå¤„ç†url</title>
    <url>/dev-weixin-node-handle-url/</url>
    <content><![CDATA[å‰è¨€ç¨‹åºå‘˜çš„å·¥ä½œå°±æ˜¯å¡«å‘ï¼Œæœ‰æ—¶æ˜¯å¡«åˆ«äººæŒ–çš„å‘ï¼Œæœ‰æ—¶æ˜¯å¡«è‡ªå·±æŒ–çš„å‘ã€‚


å¾®ä¿¡è‡ªå®šä¹‰åˆ†äº«åœ¨ä½¿ç”¨nodeå¼€å‘çš„æ—¶å€™ï¼Œç»å¸¸ä¼šç”¨åˆ°å¾®ä¿¡è‡ªå®šä¹‰åˆ†äº«ã€‚è‡ªå®šä¹‰åˆ†äº«çš„æ­¥éª¤ï¼Œå¤§è‡´å¦‚ä¸‹ï¼š
å¾®ä¿¡é…ç½®ç™»å½•å¾®ä¿¡å…¬ä¼—å¹³å°ï¼Œè¿›å…¥â€œå…¬ä¼—å·è®¾ç½®â€çš„â€œåŠŸèƒ½è®¾ç½®â€é‡Œå¡«å†™â€œJSæ¥å£å®‰å…¨åŸŸåâ€ã€‚
nodeç«¯1ã€è®¾ç½®åˆ†äº«æ•°æ®ï¼ˆTKDï¼‰ã€‚2ã€è·å–æƒé™éªŒè¯é…ç½®æ•°æ®ã€‚3ã€è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆéå¿…è¦ï¼‰ï¼Œå› ä¸ºéœ€è¦åœ¨åˆ†äº«é¡µé¢æ˜¾ç¤ºåˆ†äº«ç”¨æˆ·çš„æ˜µç§°ã€‚
var config = require(&#x27;../config&#x27;);var urlencode = require(&#x27;urlencode&#x27;);var eventproxy = require(&#x27;eventproxy&#x27;);var request = require(&#x27;request&#x27;);var WechatAPI = require(&#x27;wechat-api&#x27;);var WXapi = new WechatAPI(config.weixin.appid, config.weixin.appsecret);// å¾®ä¿¡exports.home = function(req, res)&#123;    // è·å–code    var subscribe = 1;    if(!req.query.code)&#123;        var r_url = config.host+&#x27;/weixin/home&#x27;;        var url = &#x27;https://open.weixin.qq.com/connect/oauth2/authorize?appid=&#x27;+config.weixin.appid+&#x27;&amp;redirect_uri=&#x27;+urlencode(r_url)+&#x27;&amp;response_type=code&amp;scope=snsapi_userinfo&amp;state=111#wechat_redirect&#x27;;        res.redirect(url);    &#125;else&#123;        var code = req.query.code;        var state = req.query.state;                var ep = new eventproxy();        ep.all(&#x27;shareConfig&#x27;,&#x27;userInfo&#x27;,function(shareConfigData,userInfoData)&#123;            console.log(shareConfigData);            console.log(userInfoData);            // è®¾ç½®åˆ†äº«æ•°æ®ï¼ˆTKDï¼‰            var shareData = &#123;                enable: true,                title: &#x27;åˆ†äº«&#x27;,                icon: &#x27;http://cdn.voidking.com//imgs/head.jpg&#x27;,                desc: &#x27;æ²¡è§è¿‡è¿™ä¹ˆæ‹‰é£çš„åˆ†äº«æè¿°å§ï¼&#x27;,                mUrl: config.host+&#x27;/weixin/userinfo?openid=000&amp;nickname=voidking&amp;num=10&#x27;            &#125;;            res.render(&#x27;./weixin/home&#x27;,&#123;                title: &#x27;å¾®ä¿¡&#x27;,                host: config.host,                shareConfigData: shareConfigData,                shareData: shareData,                userInfoData: JSON.parse(userInfoData)            &#125;);        &#125;);        var param = &#123;            debug: false,            jsApiList: [&#x27;onMenuShareTimeline&#x27;, &#x27;onMenuShareAppMessage&#x27;],            url: req.protocol+&quot;://&quot;+req.hostname+req.originalUrl        &#125;;             WXapi.getJsConfig(param, function(err,result)&#123;            // resultå°±æ˜¯æƒé™é…ç½®éªŒè¯é…ç½®æ•°æ®            ep.emit(&#x27;shareConfig&#x27;,result);            &#125;);        // é€šè¿‡codeæ¢å–ç½‘é¡µæˆæƒaccess_token        var params = &#123;            appid:config.weixin.appid,            secret:config.weixin.appsecret,            code:code,            grant_type:&#x27;authorization_code&#x27;        &#125;;        var getAccessTokenUrl = &#x27;https://api.weixin.qq.com/sns/oauth2/access_token?appid=&#x27;+params.appid+&#x27;&amp;secret=&#x27;+params.secret+&#x27;&amp;code=&#x27;+params.code+&#x27;&amp;grant_type=&#x27;+params.grant_type;        request.get(getAccessTokenUrl,function(error, response, body)&#123;            if (!error &amp;&amp; response.statusCode == 200) &#123;                var re = JSON.parse(response.body);                console.log(re);                var getuserinfo = &#x27;https://api.weixin.qq.com/sns/userinfo?access_token=&#x27;+re.access_token+&#x27;&amp;openid=&#x27;+re.openid+&#x27;&amp;lang=zh_CN&#x27;;                request.get(getuserinfo,function(error2, response2, body2)&#123;                    if (!error2 &amp;&amp; response2.statusCode == 200) &#123;                        ep.emit(&#x27;userInfo&#x27;,response2.body);                    &#125;                &#125;);            &#125;        &#125;);    &#125;&#125;

å‰ç«¯1ã€å‰ç«¯é¡µé¢ä¸­å¼•å…¥å¾®ä¿¡çš„jsæ–‡ä»¶http://res.wx.qq.com/open/js/jweixin-1.0.0.jsã€‚2ã€å¾®ä¿¡æƒé™éªŒè¯æ•°æ®é…ç½®ã€‚3ã€åˆ†äº«æ•°æ®é…ç½®ã€‚
&lt;script type=&quot;text/javascript&quot;&gt;    wx.config(&#123;       debug:  false,  //è°ƒå¼æ¨¡å¼ï¼Œè®¾ç½®ä¸ºtureåä¼šç›´æ¥åœ¨ç½‘é¡µä¸Šå¼¹å‡ºè°ƒè¯•ä¿¡æ¯ï¼Œç”¨äºæ’æŸ¥é—®é¢˜       appId: &#x27;&lt;%= shareConfigData.appId%&gt;&#x27;,       timestamp: &#x27;&lt;%= shareConfigData.timestamp%&gt;&#x27;,       nonceStr: &#x27;&lt;%= shareConfigData.nonceStr%&gt;&#x27;,       signature: &#x27;&lt;%= shareConfigData.signature%&gt;&#x27;,       jsApiList: [  //éœ€è¦ä½¿ç”¨çš„ç½‘é¡µæœåŠ¡æ¥å£           &#x27;checkJsApi&#x27;,  //åˆ¤æ–­å½“å‰å®¢æˆ·ç«¯ç‰ˆæœ¬æ˜¯å¦æ”¯æŒæŒ‡å®šJSæ¥å£           &#x27;onMenuShareTimeline&#x27;, //åˆ†äº«ç»™å¥½å‹           &#x27;onMenuShareAppMessage&#x27;, //åˆ†äº«åˆ°æœ‹å‹åœˆ           &#x27;onMenuShareQQ&#x27;,  //åˆ†äº«åˆ°QQ           &#x27;onMenuShareWeibo&#x27; //åˆ†äº«åˆ°å¾®åš       ]     &#125;);     wx.ready(function () &#123;   //readyå‡½æ•°ç”¨äºè°ƒç”¨APIï¼Œå¦‚æœä½ çš„ç½‘é¡µåœ¨åŠ è½½åå°±éœ€è¦è‡ªå®šä¹‰åˆ†äº«å’Œå›è°ƒåŠŸèƒ½ï¼Œéœ€è¦åœ¨æ­¤è°ƒç”¨åˆ†äº«å‡½æ•°ã€‚//å¦‚æœæ˜¯å¾®ä¿¡æ¸¸æˆç»“æŸåï¼Œéœ€è¦ç‚¹å‡»æŒ‰é’®è§¦å‘å¾—åˆ°åˆ†å€¼ååˆ†äº«ï¼Œè¿™é‡Œå°±ä¸éœ€è¦è°ƒç”¨APIäº†ï¼Œå¯ä»¥åœ¨æŒ‰é’®ä¸Šç»‘å®šäº‹ä»¶ç›´æ¥è°ƒç”¨ã€‚å› æ­¤ï¼Œå¾®ä¿¡æ¸¸æˆç”±äºå¤§å¤šéœ€è¦ç”¨æˆ·å…ˆè§¦å‘è·å–åˆ†å€¼ï¼Œæ­¤å¤„è¯·ä¸è¦å¡«å†™å¦‚ä¸‹æ‰€ç¤ºçš„åˆ†äº«API        wx.onMenuShareTimeline(&#123;  //ä¾‹å¦‚åˆ†äº«åˆ°æœ‹å‹åœˆçš„API             title: &#x27;&lt;%= shareData.title%&gt;&#x27;, // åˆ†äº«æ ‡é¢˜           link: &#x27;&lt;%= shareData.mUrl%&gt;&#x27;, // åˆ†äº«é“¾æ¥           imgUrl: &#x27;&lt;%= shareData.icon%&gt;&#x27;, // åˆ†äº«å›¾æ ‡           desc:&#x27;&lt;%= shareData.desc%&gt;&#x27;,           success: function () &#123;               // ç”¨æˆ·ç¡®è®¤åˆ†äº«åæ‰§è¡Œçš„å›è°ƒå‡½æ•°           &#125;,           cancel: function () &#123;               // ç”¨æˆ·å–æ¶ˆåˆ†äº«åæ‰§è¡Œçš„å›è°ƒå‡½æ•°           &#125;        &#125;);        wx.onMenuShareAppMessage(&#123;  //ä¾‹å¦‚åˆ†äº«åˆ°æœ‹å‹åœˆçš„API             title: &#x27;&lt;%= shareData.title%&gt;&#x27;, // åˆ†äº«æ ‡é¢˜           link: &#x27;&lt;%= shareData.mUrl%&gt;&#x27;, // åˆ†äº«é“¾æ¥           imgUrl: &#x27;&lt;%= shareData.icon%&gt;&#x27;, // åˆ†äº«å›¾æ ‡           desc:&#x27;&lt;%= shareData.desc%&gt;&#x27;,           success: function () &#123;               // ç”¨æˆ·ç¡®è®¤åˆ†äº«åæ‰§è¡Œçš„å›è°ƒå‡½æ•°           &#125;,           cancel: function () &#123;               // ç”¨æˆ·å–æ¶ˆåˆ†äº«åæ‰§è¡Œçš„å›è°ƒå‡½æ•°           &#125;        &#125;);        wx.onMenuShareQQ(&#123;  //ä¾‹å¦‚åˆ†äº«åˆ°æœ‹å‹åœˆçš„API             title: &#x27;&lt;%= shareData.title%&gt;&#x27;, // åˆ†äº«æ ‡é¢˜           link: &#x27;&lt;%= shareData.mUrl%&gt;&#x27;, // åˆ†äº«é“¾æ¥           imgUrl: &#x27;&lt;%= shareData.icon%&gt;&#x27;, // åˆ†äº«å›¾æ ‡           desc:&#x27;&lt;%= shareData.desc%&gt;&#x27;,           success: function () &#123;               // ç”¨æˆ·ç¡®è®¤åˆ†äº«åæ‰§è¡Œçš„å›è°ƒå‡½æ•°           &#125;,           cancel: function () &#123;               // ç”¨æˆ·å–æ¶ˆåˆ†äº«åæ‰§è¡Œçš„å›è°ƒå‡½æ•°           &#125;        &#125;);        wx.onMenuShareWeibo(&#123;  //ä¾‹å¦‚åˆ†äº«åˆ°æœ‹å‹åœˆçš„API             title: &#x27;&lt;%= shareData.title%&gt;&#x27;, // åˆ†äº«æ ‡é¢˜           link: &#x27;&lt;%= shareData.mUrl%&gt;&#x27;, // åˆ†äº«é“¾æ¥           imgUrl: &#x27;&lt;%= shareData.icon%&gt;&#x27;, // åˆ†äº«å›¾æ ‡           desc:&#x27;&lt;%= shareData.desc%&gt;&#x27;,           success: function () &#123;               // ç”¨æˆ·ç¡®è®¤åˆ†äº«åæ‰§è¡Œçš„å›è°ƒå‡½æ•°           &#125;,           cancel: function () &#123;               // ç”¨æˆ·å–æ¶ˆåˆ†äº«åæ‰§è¡Œçš„å›è°ƒå‡½æ•°           &#125;        &#125;);    &#125;);     wx.error(function (res) &#123;        // alert(res.errMsg);  //æ‰“å°é”™è¯¯æ¶ˆæ¯ã€‚åŠæŠŠ debug:false,è®¾ç½®ä¸ºdebug:tureå°±å¯ä»¥ç›´æ¥åœ¨ç½‘é¡µä¸Šçœ‹åˆ°å¼¹å‡ºçš„é”™è¯¯æç¤º    &#125;);&lt;/script&gt;

æºç https://github.com/voidking/nodebase/blob/master/controllers/weixin.jshttps://github.com/voidking/nodebase/blob/master/views/weixin/home.html
&amp;è½¬&amp;amp;ä»¥ä¸Šï¼Œå·²ç»å®Œæˆäº†å¾®ä¿¡è‡ªå®šä¹‰åˆ†äº«çš„å·¥ä½œã€‚ç„¶è€Œï¼Œè¿˜å­˜åœ¨ä¸€äº›å‘ï¼ï¼ï¼
å¦‚ä¸Šï¼Œæˆ‘ä»¬çš„åˆ†äº«é¡µé¢urlä¸ºhttp://wx.voidking.com/weixin/userinfo?openid=000&amp;nickname=voidking&amp;num=10ï¼Œå‚æ•°æ˜¯å†™æ­»çš„ï¼Œå®é™…ç”Ÿäº§ç¯å¢ƒä¸­éœ€è¦ä½¿ç”¨çœŸå®æ•°æ®æ‹¼æ¥å‡ºæ¥ã€‚
è¯¥åˆ†äº«é¡µé¢çš„urlï¼Œå¦‚æœè¾“å‡ºåˆ°é¡µé¢ä¸Šï¼Œå°±æ˜¾ç¤ºæ­£å¸¸ï¼Œæ¯”å¦‚ä½¿ç”¨éšè—çš„inputæ¥æ”¶ã€‚
&lt;input type=&quot;hidden&quot; id=&quot;url&quot; value=&quot;&lt;%= shareData.url%&gt;&quot;&gt;
æ˜¾ç¤ºç»“æœä¸º
&lt;input type=&quot;hidden&quot; id=&quot;url&quot; value=&quot;http://wx.voidking.com/weixin/userinfo?openid=000&amp;nickname=voidking&amp;num=10&quot;&gt;

ä½†æ˜¯ï¼Œå¦‚æœè¾“å‡ºåˆ°å¾®ä¿¡åˆ†äº«çš„jsä¸­ï¼Œurlä¸­çš„&amp;å°±ä¼šå˜æˆ&amp;amp;ã€‚
wx.onMenuShareTimeline(&#123;  //ä¾‹å¦‚åˆ†äº«åˆ°æœ‹å‹åœˆçš„API      link: &#x27;&lt;%= shareData.mUrl%&gt;&#x27;, // åˆ†äº«é“¾æ¥    // å…¶ä»–åˆ†äº«ä¿¡æ¯çœç•¥&#125;);
æ˜¾ç¤ºç»“æœä¸º
wx.onMenuShareTimeline(&#123;  //ä¾‹å¦‚åˆ†äº«åˆ°æœ‹å‹åœˆçš„API      link: &#x27;http://wx.voidking.com/weixin/userinfo?openid=000&amp;amp;nickname=voidking&amp;amp;num=10&#x27;, // åˆ†äº«é“¾æ¥    // å…¶ä»–åˆ†äº«ä¿¡æ¯çœç•¥&#125;);

å•Šå˜ï¼Œ&amp;è½¬ä¹‰æˆäº†&amp;amp;ï¼ï¼ï¼æ²¡é”™ï¼Œè¿™å°±æ˜¯ç¬¬ä¸€ä¸ªå‘ã€‚å› ä¸ºåˆ†äº«å‡ºå»çš„urlå‚æ•°ä¸æ˜¯ä»¥å¸¸è§„&amp;é—´éš”ï¼Œè€Œæ˜¯&amp;amp;ï¼Œæ‰€ä»¥å¢åŠ äº†æˆ‘ä»¬æˆªå–å‚æ•°çš„éš¾åº¦ã€‚
æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š1ã€å‰ç«¯è§£å†³ã€‚è¾“å…¥å†…å®¹åˆ°éšè—çš„inputï¼Œç„¶åè·å–å€¼ï¼Œæ·»åŠ åˆ°å¾®ä¿¡åˆ†äº«çš„jsä¸­ã€‚ç»æµ‹è¯•ï¼Œè¡Œä¸é€šã€‚2ã€nodeç«¯è§£å†³ã€‚åœ¨è·³è½¬åˆ†äº«é¡µé¢æ—¶ï¼Œæ”¹å˜è·å–å‚æ•°çš„æ–¹å¼ï¼Œä»£ç å¦‚ä¸‹ã€‚
exports.userinfo = function(req, res)&#123;        function getArg(str,arg) &#123;        var reg = new RegExp(&#x27;(^|&amp;)&#x27; + arg + &#x27;=([^&amp;]*)(&amp;|$)&#x27;, &#x27;i&#x27;);        var r = str.match(reg);        if (r != null) &#123;            return unescape(r[2]);        &#125;        return null;    &#125;    String.prototype.replaceAll  = function(s1,s2)&#123;             return this.replace(new RegExp(s1,&quot;gm&quot;),s2);         &#125;     var str = decodeURI(req.url.split(&#x27;?&#x27;)[1]);    console.log(str);    str = str.replaceAll(&#x27;&amp;amp%3B&#x27;,&#x27;&amp;&#x27;);     str = str.replaceAll(&#x27;&amp;amp;&#x27;,&#x27;&amp;&#x27;);    console.log(str);    var name = getArg(str,&#x27;name&#x27;);    console.log(name);    res.render(&#x27;weixin/userinfo&#x27;,&#123;        title: &#x27;ç”¨æˆ·ä¿¡æ¯&#x27;,        host: config.host    &#125;);&#125;

;è½¬%3Bä»¥ä¸Šï¼Œæˆ‘ä»¬è§£å†³äº†å¾®ä¿¡åˆ†äº«ä¸­&amp;è½¬ä¹‰çš„é—®é¢˜ï¼Œåœ¨ç”µè„‘ç«¯æˆ–è€…å®‰å“ç«¯æŸ¥çœ‹åˆ†äº«éƒ½æ˜¯æ­£å¸¸çš„ã€‚ç„¶è€Œï¼Œåœ¨IOSç«¯æŸ¥çœ‹ä¼šå‡ºç°é”™è¯¯ï¼ï¼ï¼
å› ä¸ºé“¾æ¥http://wx.voidking.com/weixin/userinfo?openid=000&amp;amp;nickname=voidking&amp;amp;num=10åœ¨ä½¿ç”¨IOSè®¿é—®çš„æ—¶å€™ï¼Œå˜æˆäº†http://wx.voidking.com/weixin/userinfo?openid=000&amp;amp%3Bnickname=voidking&amp;amp%3Bnum=10ï¼Œ;è½¬ä¹‰æˆäº†%3Bï¼ï¼ï¼
è§£å†³åŠæ³•ï¼Œå‚è€ƒ&amp;è½¬&amp;amp;ä¸€èŠ‚nodeç«¯ä»£ç ï¼Œæ›¿æ¢å­—ç¬¦ä¸²å³å¯ã€‚
ä»urlä¸­æˆªå–ä¸­æ–‡å‚æ•°ä»¥ä¸Šï¼Œurlå±æ€§ä¸­nameçš„å€¼æ˜¯voidkingï¼Œæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚ç„¶è€Œï¼Œå½“æˆ‘æŠŠnameçš„å€¼æ¢ä¸ºâ€œå¸…å“¥â€æ—¶ï¼Œæ§åˆ¶å°æ‰“å°å‡ºäº†ä¹±ç ã€‚å•Šå“ˆï¼Œè¿™å°±å¯¹äº†ï¼Œä¸­æ–‡è‚¯å®šè¦å¤„ç†ä¸€ä¸‹å˜›ï¼
è§£å†³åŠæ³•ï¼Œä½¿ç”¨decodeURIå‡½æ•°è§£ç ç¼–ç è¿‡çš„uriï¼Œå‚è€ƒ&amp;è½¬&amp;amp;ä¸€èŠ‚nodeç«¯ä»£ç ã€‚
ä¹¦ç­¾å¾®ä¿¡å…¬ä¼—å¹³å°å¼€å‘è€…æ–‡æ¡£â€”â€”å¾®ä¿¡JS-SDKè¯´æ˜æ–‡æ¡£http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html
å¾®ä¿¡å…¬å…±å¹³å°Nodeåº“ APIhttp://doxmate.cool/node-webot/wechat-api/api.html
wechat-api Documentationhttp://doxmate.cool/node-webot/wechat-api/api.html#api_js_exports_getJsConfig
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>node</tag>
        <tag>å¾®ä¿¡</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨nodeé¡¹ç›®ä¸­ä½¿ç”¨Sea.js</title>
    <url>/dev-seajs-in-node/</url>
    <content><![CDATA[å‰è¨€Sea.js è¿½æ±‚ç®€å•ã€è‡ªç„¶çš„ä»£ç ä¹¦å†™å’Œç»„ç»‡æ–¹å¼ï¼Œå…·æœ‰ä»¥ä¸‹æ ¸å¿ƒç‰¹æ€§ï¼š

ç®€å•å‹å¥½çš„æ¨¡å—å®šä¹‰è§„èŒƒï¼šSea.jséµå¾ªCMDè§„èŒƒï¼Œå¯ä»¥åƒNode.jsä¸€èˆ¬ä¹¦å†™æ¨¡å—ä»£ç ã€‚
è‡ªç„¶ç›´è§‚çš„ä»£ç ç»„ç»‡æ–¹å¼ï¼šä¾èµ–çš„è‡ªåŠ¨åŠ è½½ã€é…ç½®çš„ç®€æ´æ¸…æ™°ï¼Œå¯ä»¥è®©æˆ‘ä»¬æ›´å¤šåœ°äº«å—ç¼–ç çš„ä¹è¶£ã€‚

Sea.jsè¿˜æä¾›å¸¸ç”¨æ’ä»¶ï¼Œéå¸¸æœ‰åŠ©äºå¼€å‘è°ƒè¯•å’Œæ€§èƒ½ä¼˜åŒ–ï¼Œå¹¶å…·æœ‰ä¸°å¯Œçš„å¯æ‰©å±•æ¥å£ã€‚


é…ç½®ä¸‹è½½seajsseajså®˜æ–¹ä¸‹è½½ï¼šhttp://seajs.org/docs/#downloads
é¡¹ç›®ç»“æ„
æ¦‚å¿µè¯´æ˜ä¸‹é¢æ˜ç¡®å‡ ä¸ªæ¦‚å¿µï¼Œæ–¹ä¾¿æ¥ä¸‹æ¥çš„æè¿°ï¼š1ã€/ï¼ˆç½‘ç«™æ ¹ç›®å½•ï¼‰ï¼Œæ˜¯é¡¹ç›®ç›®å½•nodebaseã€‚2ã€è™šæ‹Ÿè·¯å¾„ï¼Œæ˜¯nodeæŠŠæŸä¸ªæ–‡ä»¶ï¼ˆå¤¹ï¼‰è½¬åŒ–ä¹‹åï¼Œè¯¥æ–‡ä»¶ï¼ˆå¤¹ï¼‰çš„ç›¸å¯¹äº/çš„è·¯å¾„ã€‚3ã€è®¿é—®è·¯å¾„ï¼Œæ˜¯é€šè¿‡æµè§ˆå™¨urlè®¿é—®çš„è·¯å¾„ã€‚

è™šæ‹Ÿè·¯å¾„ä¸ä¸€å®šæ˜¯è®¿é—®è·¯å¾„ï¼Œè®¿é—®è·¯å¾„ä¸ä¸€å®šæ˜¯è™šæ‹Ÿè·¯å¾„ã€‚å› ä¸ºï¼Œåªæœ‰æˆ‘ä»¬æŒ‡å®šçš„èµ„æºã€æŒ‡å®šçš„è·¯å¾„æ˜¯å¼€æ”¾ç»™ç”¨æˆ·è®¿é—®çš„ã€‚

é™æ€èµ„æºé…ç½®// æŠŠæ–‡ä»¶å¤¹ä¸­çš„å†…å®¹æ·»åŠ åˆ°ç½‘ç«™æ ¹ç›®å½•ä¸‹ï¼Œé™æ€æ–‡ä»¶åŠ¡å¿…æ·»åŠ ï¼Œå¦åˆ™è®¿é—®ä¸åˆ°app.use(express.static(path.join(__dirname, &#x27;bower_components&#x27;)));app.use(express.static(path.join(__dirname, &#x27;public&#x27;)));
åœ¨nodeé¡¹ç›®çš„å…¥å£æ–‡ä»¶app.jsä¸­ï¼ŒåŠ å…¥å¦‚ä¸Šé…ç½®ï¼Œé‚£ä¹ˆï¼Œbower_componentsã€publicä¸¤ä¸ªæ–‡ä»¶å¤¹çš„è™šæ‹Ÿè·¯å¾„éƒ½å˜æˆäº†/ï¼Œè®¿é—®è·¯å¾„éƒ½å˜æˆäº†/ã€‚
// é™æ€æ–‡ä»¶ç›®å½•var staticDir = path.join(__dirname, &#x27;public&#x27;);// è™šæ‹Ÿç›®å½•app.use(&#x27;/dist&#x27;, express.static(staticDir));app.use(&#x27;/public&#x27;, express.static(staticDir));
åœ¨nodeé¡¹ç›®çš„å…¥å£æ–‡ä»¶app.jsä¸­ï¼ŒåŠ å…¥å¦‚ä¸Šé…ç½®ï¼Œé‚£ä¹ˆï¼Œpublicæ–‡ä»¶å¤¹çš„è™šæ‹Ÿè·¯å¾„å°±å˜æˆäº†/distå’Œ/publicï¼Œè®¿é—®è·¯å¾„å°±å˜æˆäº†/distå’Œ/publicã€‚
é€šè¿‡ä¸Šé¢ä¸¤ä¸ªé…ç½®ï¼Œå¯ä»¥çœ‹å‡ºï¼Œé™æ€èµ„æºçš„è™šæ‹Ÿè·¯å¾„å’Œè®¿é—®è·¯å¾„æ˜¯ç›¸åŒçš„ã€‚
sea-config.jsseajs.config(&#123;    //base: &#x27;../&#x27;,    base: window.host + &#x27;/&#x27;,    alias: &#123;        &#x27;jquery&#x27;: &#x27;seajs/jquery/jquery.min.js&#x27;,        &#x27;layer&#x27;: &#x27;seajs/layer/layer.js&#x27;,        &#x27;swiper&#x27;: &#x27;Swiper/dist/js/swiper.min.js&#x27;           &#125;&#125;);
å¦‚æœbaseçš„å€¼ä½¿ç”¨ç›¸å¯¹è·¯å¾„../ï¼Œé‚£ä¹ˆé¡µé¢å¼•å…¥ä¾èµ–çš„jsæ–‡ä»¶çš„æ—¶å€™ï¼Œå°±æ˜¯ç›¸å¯¹äºé¡µé¢æ–‡ä»¶çš„è™šæ‹Ÿè·¯å¾„ã€‚
app.set(&#x27;views&#x27;,&#x27;./views&#x27;);// é¡µé¢ç›®å½•é…ç½®
ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨app.jsä¸­ä½¿ç”¨äº†é¡µé¢ç›®å½•é…ç½®ï¼Œviewsæ–‡ä»¶å¤¹è™šæ‹Ÿè·¯å¾„å˜æˆäº†/ã€‚æ³¨æ„ï¼Œviewsæ–‡ä»¶å¤¹ä¾ç„¶æ²¡æœ‰è®¿é—®è·¯å¾„ã€‚
viewsæ–‡ä»¶å¤¹çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š
views|-weixin| |-home.html|-index.html

åœ¨è·¯ç”±è½¬å‘ä¸­ï¼Œindex.htmlå’Œhome.htmlçš„è™šæ‹Ÿè·¯å¾„åˆ†åˆ«å¦‚ä¸‹ï¼š
res.render(&#x27;index&#x27;,&#123;    title: &#x27;index&#x27;&#125;);res.render(&#x27;weixin/home&#x27;,&#123;    title: &#x27;home&#x27;&#125;);
åœ¨index.htmlä¸­å¼•å…¥sea-config.jsï¼Œåœ¨åŠ è½½ä¾èµ–çš„jsæ–‡ä»¶çš„æ—¶å€™ï¼Œä¼šåœ¨index.htmlçš„åŸºç¡€ä¸Šå‘ä¸Šä¸€å±‚å¯»æ‰¾ã€‚å› ä¸ºindex.htmlæ‰€åœ¨çš„è™šæ‹Ÿè·¯å¾„ä¸º/ï¼Œæ²¡æœ‰ä¸Šä¸€å±‚ï¼Œæ‰€ä»¥è‚¯å®šæ‰¾ä¸åˆ°jsæ–‡ä»¶ã€‚
è€Œhome.htmlæ‰€åœ¨çš„è™šæ‹Ÿè·¯å¾„ä¸º/weixin/ï¼Œå‘ä¸Šä¸€å±‚å¯»æ‰¾ï¼Œæ˜¯è™šæ‹Ÿè·¯å¾„/ã€‚è€Œé™æ€æ–‡ä»¶çš„è™šæ‹Ÿè·¯å¾„éƒ½æ˜¯/ï¼Œåˆšå¥½å¯ä»¥æ‰¾åˆ°éœ€è¦çš„jsæ–‡ä»¶ã€‚

é‰´äºç›¸å¯¹è·¯å¾„çš„å·®å¼‚é—®é¢˜ï¼Œbaseæœ€å¥½ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œé…ç½®åœ¨å…¨å±€config.jsä¸­ã€‚

home.jsseajs.use([&#x27;jquery&#x27;,&#x27;layer&#x27;],function($,layer)&#123;    var index = &#123;        init:function()&#123;            this.saveData();            this.bindEvent();        &#125;,        saveData: function()&#123;            if(window.localStorage)&#123;                var x = window.localStorage.userInfo? JSON.parse(window.localStorage.userInfo):&#123;&#125;;                if((x.unionid == undefined) || (x.unionid == &quot;undefined&quot;))&#123;                    var temp = &#123;                        unionid: $(&#x27;#unionid&#x27;).val(),                        openid: $(&#x27;#openid&#x27;).val(),                        nickname: $(&#x27;#nickname&#x27;).val(),                        headimgurl:$ (&#x27;#headimgurl&#x27;).val()                    &#125;;                    window.localStorage.userInfo = JSON.stringify(temp);                &#125;            &#125;        &#125;,        bindEvent:function()&#123;            layer.alert(&#x27;layer&#x27;);        &#125;    &#125;    index.init();&#125;);

å¼•å…¥jsæ–‡ä»¶&lt;script&gt;    window.host = &#x27;&lt;%= host%&gt;&#x27;;&lt;/script&gt;&lt;script src=&quot;/seajs/seajs-1.3.1/dist/sea.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/seajs/sea-config.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/js/weixin/home.js&quot;&gt;&lt;/script&gt;

CMDæ¨¡å—åŒ–ä¸å°è£…å› ä¸ºseajséµå¾ªCMDè§„èŒƒï¼Œæ‰€ä»¥éµå¾ªCMDè§„èŒƒçš„æ’ä»¶ï¼Œæ¯”å¦‚swiperï¼Œå¼•å…¥åå°±å¯ä»¥ä½¿ç”¨ã€‚
jqueryå°è£…jqueryéµå¾ªAMDè§„èŒƒï¼Œéœ€è¦å°è£…ä¸€ä¸‹ï¼Œä½¿å…¶ç¬¦åˆCMDè§„èŒƒæ‰å¯ä»¥ä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚
define(function(require, exports, module) &#123;    // æ¨¡å—åŒ–jqueryæºç &#125;);

ä¾èµ–jqueryçš„æ’ä»¶å°è£…æœ‰äº›æ’ä»¶ï¼Œæ˜¯åœ¨jqueryçš„åŸºç¡€ä¸Šçš„å¼€å‘çš„ï¼Œéœ€è¦å…ˆå¼•å…¥jqueryã€‚
define(function(require, exports, module) &#123;    var $ = require(&#x27;jquery&#x27;);    // ä¾èµ–jqueryçš„æ¨¡å—åŒ–ä»£ç &#125;);

å¦å¤–ä¸€ç§æ–¹æ³•ï¼š
define(function(require, exports, module) &#123;    return function($)&#123;        // ä¾èµ–jqueryçš„æ¨¡å—åŒ–ä»£ç     &#125; &#125;);
è¿™ç§æ–¹æ³•åœ¨ä½¿ç”¨æ¨¡å—å‰éœ€è¦å…ˆä¼ å…¥jqueryè¿›è¡Œåˆå§‹åŒ–ã€‚
æ™®é€šæ’ä»¶å°è£…å¦‚æœæ˜¯æœªæ¨¡å—åŒ–çš„æ’ä»¶ï¼ˆæ™®é€šjsä»£ç ï¼‰ï¼Œéœ€è¦æš´éœ²å¯¹åº”çš„æ¥å£ã€‚
define(function(require, exports, module) &#123;    var $ = require(&#x27;jquery&#x27;);    var voidking = &#123;        init: function()&#123;            // æœªæ¨¡å—åŒ–ä»£ç             var height = $(document).height();            console.log(height);        &#125;    &#125;;    module.exports = voidking;&#125;);
åœ¨ä½¿ç”¨æ¨¡å—å‰éœ€è¦è°ƒç”¨initæ–¹æ³•åˆå§‹åŒ–ã€‚
layerçš„å‘ä¸å°è£…ä¸å¯¹layer.jsè¿›è¡Œå°è£…ï¼Œç›´æ¥å¼•å…¥æ—¶ï¼Œä¼šæŠ¥é”™jQuery is not definedã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨layer-mobile.jsçš„æ—¶å€™ï¼Œä¸éœ€è¦å°è£…å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚
å°è£…ç”±ä¸Šé¢çš„æŠ¥é”™ï¼Œå¯ä»¥çœ‹å‡ºï¼Œlayer.jséœ€è¦ä¾èµ–jqueryï¼Œé‚£å°±å°è£…ä¸€ä¸‹ï¼Œå¼•å…¥jqueryå§ï¼
define(function(require, exports, module) &#123;    var jQuery = require(&#x27;jquery&#x27;);    // layer.jsä»£ç &#125;);
ç„¶åï¼Œé”™è¯¯å°±å˜æˆäº†layer.alert is not a functionã€‚åœ¨æ§åˆ¶å°è¾“å…¥layerï¼Œå¯ä»¥çœ‹åˆ°layeræ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å•Šå˜ï¼Œlayerå¯¹è±¡æ˜æ˜åŒ…å«äº†ä¸€ä¸ªalertæ–¹æ³•ï¼ï¼ï¼ä¸ºå•¥ä¸èƒ½è°ƒç”¨æï¼Ÿ
ä¸ç”˜å¿ƒçš„éƒåŒå­¦ï¼Œåˆå°è¯•äº†å¾ˆå¤šå…¶ä»–çš„å°è£…æ–¹æ³•ï¼Œä¾ç„¶æ— æ³•ä½¿ç”¨ã€‚
ä¸å®Œç¾è§£å†³åŠæ³•layerçš„ä½œè€…è´¤å¿ƒè¯´ï¼Œlayeræ˜¯CMDè§„èŒƒçš„ã€‚é‚£ä¹ˆï¼Œç†è®ºä¸Šç›´æ¥å¼•å…¥å°±å¯ä»¥ä½¿ç”¨ã€‚ä½†æ˜¯ï¼Œé”™è¯¯å½“é“ï¼ŒjQuery is not definedã€‚é‚£ä¹ˆé—®é¢˜çš„å…³é”®ï¼Œå°±æ˜¯ç»™layer.jså¼•å…¥jqueryã€‚
ä½¿ç”¨å°è£…çš„åŠæ³•ï¼Œå¼•å…¥jqueryï¼Œç»è¿‡æµ‹è¯•ï¼Œè¡Œä¸é€šã€‚
å¦‚æœç›´æ¥æŠŠjqueryæºç ç²˜è´´åˆ°layer.jsæ–‡ä»¶ä¸­ï¼Œæ˜¯å¦å¯ä»¥å‘¢ï¼Ÿç»è¿‡æµ‹è¯•ï¼Œç¡®å®å¯ä»¥ï¼ï¼ï¼
å¥½å§ï¼Œè¿™ä¸ªå‘æ€»ç®—æ˜¯å¡«ä¸Šäº†ã€‚è™½ç„¶ä¸å¤Ÿå®Œç¾ï¼Œä½†æ˜¯ç¡®å®æ˜¯ä¸ªæœ‰æ•ˆçš„æ–¹æ³•ï¼å¦‚æœæœ‰æ›´å¥½çš„è§£å†³çš„åŠæ³•ï¼Œå¸Œæœ›èƒ½ç•™è¨€å‘Šè¯‰æˆ‘ï¼Œè°¢è°¢ã€‚
seajsæ¨¡å—åŠ è½½é¡ºåº1ã€ä»seajs.useæ–¹æ³•å…¥å£ï¼Œå¼€å§‹åŠ è½½useåˆ°çš„æ¨¡å—ã€‚2ã€useåˆ°çš„æ¨¡å—è¿™æ—¶modç¼“å­˜å½“ä¸­ä¸€å®šæ˜¯ä¸å­˜åœ¨çš„ï¼Œseajsåˆ›å»ºä¸€ä¸ªæ–°çš„modï¼Œèµ‹äºˆä¸€äº›åˆå§‹çš„çŠ¶æ€ã€‚3ã€æ‰§è¡Œmod.loadæ–¹æ³•ã€‚4ã€ä¸€å †é€»è¾‘ä¹‹åèµ°åˆ°seajs.requestæ–¹æ³•ï¼Œè¯·æ±‚æ¨¡å—æ–‡ä»¶ã€‚æ¨¡å—åŠ è½½å®Œæˆä¹‹åï¼Œæ‰§è¡Œdefineæ–¹æ³•ã€‚5ã€defineæ–¹æ³•åˆ†ææå–æ¨¡å—çš„ä¾èµ–æ¨¡å—ï¼Œä¿å­˜èµ·æ¥ï¼Œç¼“å­˜factoryä½†ä¸æ‰§è¡Œã€‚6ã€æ¨¡å—çš„ä¾èµ–æ¨¡å—å†è¢«åŠ è½½ï¼Œå¦‚æœç»§ç»­æœ‰ä¾èµ–æ¨¡å—ï¼Œåˆ™ç»§ç»­åŠ è½½ï¼Œç›´è‡³æ‰€æœ‰è¢«ä¾èµ–çš„æ¨¡å—éƒ½åŠ è½½å®Œæ¯•ã€‚7ã€æ‰€æœ‰çš„æ¨¡å—åŠ è½½å®Œæ¯•ä¹‹åï¼Œæ‰§è¡Œuseæ–¹æ³•çš„callbackã€‚8ã€æ¨¡å—å†…éƒ¨é€»è¾‘ä»callbackå¼€å§‹æ‰§è¡Œï¼Œrequireæ–¹æ³•åœ¨è¿™ä¸ªè¿‡ç¨‹å½“ä¸­æ‰è¢«æ‰§è¡Œã€‚PS: defineæ–¹æ³•çº¯ç²¹åªæ˜¯åˆ†ææ¨¡å—ã€å­˜å‚¨æ¨¡å—ï¼Œå¹¶æ²¡æœ‰æ‰§è¡Œæ¨¡å—ã€‚requireæ–¹æ³•å°±æ˜¯æ ¹æ®idåœ¨defineå®šä¹‰å­˜å‚¨çš„æ¨¡å—ç¼“å­˜ä¸­æ‰¾åˆ°ç›¸åº”çš„æ¨¡å—ï¼Œå¹¶æ‰§è¡Œå®ƒï¼Œè·å¾—æ¨¡å—å®šä¹‰è¿”å›çš„æ–¹æ³•ã€‚
åè®°ä¹Ÿè®¸ï¼Œå‚åŠ Sea.jsçš„ç¤¾åŒºç»´æŠ¤ä¹Ÿæ˜¯ä¸€ä»¶å¾ˆå¥½ç©çš„äº‹æƒ…ã€‚åˆå¤šäº†å¾ˆå¤šè®¸å¤šéœ€è¦å­¦ä¹ çš„ä¸œè¥¿ï¼Œè·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼
ä¹¦ç­¾Seajsç®€æ˜“æ–‡æ¡£http://yslove.net/seajs/
å¿«é€Ÿä¸Šæ‰‹seajsâ€”â€”ç®€å•æ˜“ç”¨Seajshttp://www.tuicool.com/articles/3uIZzy
seajs baseé…ç½®http://www.tuicool.com/articles/3Eb6Fj
jQuery æ’ä»¶çš„æ¨¡å—åŒ–https://lifesinger.wordpress.com/jquery-plugins-modulization/
seajs åŠ è½½Jqueryçš„é‡åˆ°é—®é¢˜?https://www.zhihu.com/question/21703739
å¦‚ä½•æ”¹é€ ç°æœ‰æ–‡ä»¶ä¸º CMD æ¨¡å—https://github.com/seajs/seajs/issues/971
CMD æ¨¡å—å®šä¹‰è§„èŒƒhttps://github.com/seajs/seajs/issues/242
ç¤¾åŒºhttps://github.com/seajs/seajs/issues/271
å‰ç«¯æ¨¡å—åŒ–å¼€å‘é‚£ç‚¹å†å²https://github.com/seajs/seajs/issues/588
å¦‚ä½•å‚ä¸å¼€å‘https://github.com/seajs/seajs/issues/276
Develop A Packagehttp://spmjs.io/documentation/develop-a-package
é«˜å¯Œå¸…seajsä½¿ç”¨ç¤ºä¾‹åŠspmåˆå¹¶å‹ç¼©å·¥å…·éœ²è„¸http://www.zhangxinxu.com/wordpress/2012/07/seajs-node-nodejs-spm-npm/
Hello Sea.jshttp://island205.github.io/HelloSea.js/index.html
ä»é›¶å¼€å§‹ç¼–å†™è‡ªå·±çš„JavaScriptæ¡†æ¶ï¼ˆä¸€ï¼‰http://www.ituring.com.cn/article/48461
Javascriptæ¨¡å—åŒ–ç¼–ç¨‹ï¼ˆä¸€ï¼‰ï¼šæ¨¡å—çš„å†™æ³•http://www.ruanyifeng.com/blog/2012/10/javascript_module.html
JavaSriptæ¨¡å—è§„èŒƒ - AMDè§„èŒƒä¸CMDè§„èŒƒä»‹ç»http://blog.chinaunix.net/uid-26672038-id-4112229.html
è¯¥å¦‚ä½•ç†è§£AMD ï¼ŒCMDï¼ŒCommonJSè§„èŒƒhttp://www.cnblogs.com/qianshui/p/5216580.html?utm_source=tuicool&amp;utm_medium=referralhttp://www.tuicool.com/articles/MVrMBrI
(function($){â€¦})(jQuery)æ˜¯ä»€ä¹ˆæ„æ€http://blog.csdn.net/rambo_china/article/details/7742321
æ·±å…¥æ¢å¯»seajsçš„æ¨¡å—åŒ–ä¸åŠ è½½æ–¹å¼http://www.jb51.net/article/64024.htm
seajsæ¨¡å—åŠ è½½æœºåˆ¶http://www.jianshu.com/p/1245af09383e
SeaJSä¸­jQueryæ’ä»¶æ¨¡å—åŒ–åŠå…¶è°ƒç”¨æ–¹å¼http://my.oschina.net/briviowang/blog/208587
seajsæ¨¡å—åŒ–jQueryä¸jQueryæ’ä»¶http://julabs.com/blog/seajs-jquery-and-plugins/
Sea.js æ‰‹å†Œä¸æ–‡æ¡£http://www.zhangxinxu.com/sp/seajs/docs/zh-cn/module-definition.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>node</tag>
        <tag>seajs</tag>
      </tags>
  </entry>
  <entry>
    <title>å¾®ä¿¡è·å–ç”¨æˆ·ä¿¡æ¯</title>
    <url>/dev-weixin-get-user-info/</url>
    <content><![CDATA[å‰è¨€åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šéœ€è¦è·å–ç”¨æˆ·ä¿¡æ¯ã€‚è·å–ç”¨æˆ·ä¿¡æ¯çš„æ–¹æ³•å¾ˆç®€å•ï¼Œä¼ å…¥ACCESS_TOKENå’ŒOPENIDï¼Œç›´æ¥è¯·æ±‚å¾®ä¿¡ç»™å‡ºçš„æ¥å£å°±å¯ä»¥äº†ã€‚


æœ¬æ–‡ä¸­ï¼Œå‚ç…§æ–¹å€å·¥ä½œå®¤çš„åˆ†ç±»æ–¹æ³•ï¼ŒæŠŠaccess_tokenåˆ†ä¸ºä¸¤ç§ã€‚ä¸€ç§æ˜¯ä½¿ç”¨AppIDå’ŒAppSecretè·å–çš„access_tokenï¼Œä¸€ç§æ˜¯OAuth2.0æˆæƒä¸­äº§ç”Ÿçš„access_tokenï¼Œæ–¹å€å·¥ä½œå®¤åˆ†åˆ«ç§°ä¸ºå…¨å±€access_tokenå’Œæˆæƒaccess_tokenã€‚
å…¨å±€access_tokenè·å–å…¨å±€access_tokenä¼ å…¥APPIDå’ŒAPPSECRETï¼Œè¯·æ±‚å¾®ä¿¡ç»™å‡ºçš„æ¥å£ï¼Œå°±å¯ä»¥è·å–åˆ°å…¨å±€access_tokenã€‚
https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=APPID&amp;secret=APPSECRET

è¿”å›ç»“æœï¼š
&#123;    &quot;access_token&quot;: &quot;NU7Kr6v9L9TQaqm5NE3OTPctTZx797Wxw4Snd2WL2HHBqLCiXlDVOw2l-Se0I-WmOLLniAYLAwzhbYhXNjbLc_KAA092cxkmpj5FpuqNO0IL7bB0Exz5s5qC9Umypy-rz2y441W9qgfnmNtIZWSjSQ&quot;,    &quot;expires_in&quot;: 7200&#125;

è·å–openidç”¨æˆ·å…³æ³¨ä»¥åŠå›å¤æ¶ˆæ¯çš„æ—¶å€™ï¼Œå‡å¯ä»¥è·å¾—ç”¨æˆ·çš„OpenIDã€‚
&lt;xml&gt;    &lt;ToUserName&gt;&lt;![CDATA[gh_b629c48b653e]]&gt;&lt;/ToUserName&gt;    &lt;FromUserName&gt;&lt;![CDATA[ollB4jv7LA3tydjviJp5V9qTU_kA]]&gt;&lt;/FromUserName&gt;    &lt;CreateTime&gt;1372307736&lt;/CreateTime&gt;    &lt;MsgType&gt;&lt;![CDATA[event]]&gt;&lt;/MsgType&gt;    &lt;Event&gt;&lt;![CDATA[subscribe]]&gt;&lt;/Event&gt;    &lt;EventKey&gt;&lt;![CDATA[]]&gt;&lt;/EventKey&gt;&lt;/xml&gt;
å…¶ä¸­çš„FromUserNameå°±æ˜¯OpenIDã€‚
è·å–ç”¨æˆ·ä¿¡æ¯æœ‰äº†access_tokenå’Œopenidï¼Œè¯·æ±‚å¦‚ä¸‹æ¥å£ï¼š
https://api.weixin.qq.com/cgi-bin/user/info?access_token=ACCESS_TOKEN&amp;openid=OPENID&amp;lang=zh_CN

è·å–åˆ°çš„ç”¨æˆ·ä¿¡æ¯æ•°æ®æ ¼å¼å¦‚ä¸‹ï¼š
&#123;    &quot;subscribe&quot;: 1,     &quot;openid&quot;: &quot;o6_bmjrPTlm6_2sgVt7hMZOPfL2M&quot;,     &quot;nickname&quot;: &quot;Band&quot;,     &quot;sex&quot;: 1,     &quot;language&quot;: &quot;zh_CN&quot;,     &quot;city&quot;: &quot;å¹¿å·&quot;,     &quot;province&quot;: &quot;å¹¿ä¸œ&quot;,     &quot;country&quot;: &quot;ä¸­å›½&quot;,     &quot;headimgurl&quot;: &quot;http://wx.qlogo.cn/mmopen/g3MonUZtNHkdmzicIlibx6iaFqAc56vxLSUfpb6n5WKSYVY0ChQKkiaJSgQ1dZuTOgvLLrhJbERQQ4eMsv84eavHiaiceqxibJxCfHe/0&quot;,     &quot;subscribe_time&quot;: 1382694957,    &quot;unionid&quot;: &quot;o6_bmasdasdsad6_2sgVt7hMZOPfL&quot;    &quot;remark&quot;: &quot;&quot;,    &quot;groupid&quot;: 0&#125;

æˆæƒaccess_tokenå¾®ä¿¡é…ç½®å‡è®¾Mç«™çš„ç½‘å€ä¸ºhttp://wx.voidking.comï¼Œé‚£ä¹ˆåœ¨å¾®ä¿¡å…¬ä¼—å¹³å°ä¸Šï¼ŒJSæ¥å£å®‰å…¨åŸŸåä¿®æ”¹ä¸ºwx.voidking.comï¼Œç½‘é¡µæˆæƒè·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ä¿®æ”¹ä¸ºwx.voidking.comã€‚
è·å–codeåœ¨ç¡®ä¿å¾®ä¿¡å…¬ä¼—è´¦å·æ‹¥æœ‰æˆæƒä½œç”¨åŸŸï¼ˆscopeå‚æ•°ï¼‰çš„æƒé™çš„å‰æä¸‹ï¼ˆæœåŠ¡å·è·å¾—é«˜çº§æ¥å£åï¼Œé»˜è®¤æ‹¥æœ‰scopeå‚æ•°ä¸­çš„snsapi_baseå’Œsnsapi_userinfoï¼‰ï¼Œå¼•å¯¼å…³æ³¨è€…æ‰“å¼€å¦‚ä¸‹é¡µé¢ï¼š
https://open.weixin.qq.com/connect/oauth2/authorize?appid=APPID&amp;redirect_uri=REDIRECT_URI&amp;response_type=code&amp;scope=SCOPE&amp;state=STATE#wechat_redirect
è‹¥æç¤ºâ€œè¯¥é“¾æ¥æ— æ³•è®¿é—®â€ï¼Œè¯·æ£€æŸ¥å‚æ•°æ˜¯å¦å¡«å†™é”™è¯¯ï¼Œæ˜¯å¦æ‹¥æœ‰scopeå‚æ•°å¯¹åº”çš„æˆæƒä½œç”¨åŸŸæƒé™ã€‚
è·å–æˆæƒaccess_tokenå’Œopenidè·å–codeåï¼Œè¯·æ±‚æ¥å£ï¼š
https://api.weixin.qq.com/sns/oauth2/access_token?appid=APPID&amp;secret=SECRET&amp;code=CODE&amp;grant_type=authorization_code

è¿”å›æ•°æ®å¦‚ä¸‹ï¼š
&#123;   &quot;access_token&quot;:&quot;ACCESS_TOKEN&quot;,   &quot;expires_in&quot;:7200,   &quot;refresh_token&quot;:&quot;REFRESH_TOKEN&quot;,   &quot;openid&quot;:&quot;OPENID&quot;,   &quot;scope&quot;:&quot;SCOPE&quot;,   &quot;unionid&quot;: &quot;o6_bmasdasdsad6_2sgVt7hMZOPfL&quot;&#125;

è·å–ç”¨æˆ·ä¿¡æ¯è·å–codeæ—¶ï¼Œå¦‚æœç½‘é¡µæˆæƒä½œç”¨åŸŸä¸ºsnsapi_userinfoï¼Œåˆ™æ­¤æ—¶å¼€å‘è€…å¯ä»¥é€šè¿‡access_tokenå’Œopenidæ‹‰å–ç”¨æˆ·ä¿¡æ¯äº†ã€‚è¯·æ±‚æ¥å£å¦‚ä¸‹ï¼š
https://api.weixin.qq.com/sns/userinfo?access_token=ACCESS_TOKEN&amp;openid=OPENID&amp;lang=zh_CN

è¿”å›æ•°æ®å¦‚ä¸‹ï¼š
&#123;    &quot;openid&quot;:&quot;OPENID&quot;,    &quot;nickname&quot;:&quot;NICKNAME&quot;,    &quot;sex&quot;:&quot;1&quot;,    &quot;province&quot;:&quot;PROVINCE&quot;    &quot;city&quot;:&quot;CITY&quot;,    &quot;country&quot;:&quot;COUNTRY&quot;,    &quot;headimgurl&quot;:&quot;http://wx.qlogo.cn/mmopen/g3MonUZtNHkdmzicIlibx6iaFqAc56vxLSUfpb6n5WKSYVY0ChQKkiaJSgQ1dZuTOgvLLrhJbERQQ4eMsv84eavHiaiceqxibJxCfHe/46&quot;,     &quot;privilege&quot;:[        &quot;PRIVILEGE1&quot;,        &quot;PRIVILEGE2&quot;    ],    &quot;unionid&quot;: &quot;o6_bmasdasdsad6_2sgVt7hMZOPfL&quot;&#125;

Nodeç«¯æºç https://github.com/voidking/nodebase/blob/master/controllers/weixin.js
ä¸¤ç§æ–¹æ³•çš„å¯¹æ¯”æ¥å£å…¨å±€access_tokenè·å–ç”¨æˆ·ä¿¡æ¯æ¥å£ä¸ºhttps://api.weixin.qq.com/cgi-bin/user/infoã€‚æˆæƒaccess_tokenè·å–ç”¨æˆ·ä¿¡æ¯æ¥å£ä¸ºhttps://api.weixin.qq.com/sns/userinfoã€‚
è¿”å›æ•°æ®å…¨å±€access_tokenè·å–ç”¨æˆ·ä¿¡æ¯è¿”å›æ•°æ®ä¸ºï¼š
æˆæƒaccess_tokenè·å–ç”¨æˆ·ä¿¡æ¯è¿”å›æ•°æ®ä¸ºï¼š
å°ç»“é€šè¿‡æˆæƒaccess_tokenæ— æ³•å¾—çŸ¥ç”¨æˆ·æ˜¯å¦å…³æ³¨äº†å…¬ä¼—å·ï¼Œå¿…é¡»é€šè¿‡å…¨å±€access_tokenã€‚
åè®°æœ‰é—®é¢˜ï¼Œçœ‹æ–‡æ¡£ã€‚ç»å†äº†å››å¹´å‘å±•çš„å¾®ä¿¡å…¬ä¼—å¹³å°ï¼Œæ–‡æ¡£å·²ç»è¶Šæ¥è¶Šå®Œå–„ã€‚
ä¹¦ç­¾å¾®ä¿¡å…¬ä¼—å¹³å°å¼€å‘(76) è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯http://www.cnblogs.com/txw1958/p/weixin76-user-info.html
å¾®ä¿¡å…¬ä¼—å¹³å°å¼€å‘è€…æ–‡æ¡£â€”â€”è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯http://mp.weixin.qq.com/wiki/14/bb5031008f1494a59c6f71fa0f319c66.html
å¾®ä¿¡å…¬ä¼—å¹³å°å¼€å‘è€…æ–‡æ¡£â€”â€”ç½‘é¡µæˆæƒè·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯http://mp.weixin.qq.com/wiki/17/c0f37d5704f0b64713d5d2c37b468d75.html
å¾®ä¿¡å…¬å…±å¹³å°Nodeåº“ APIhttp://doxmate.cool/node-webot/wechat-api/api.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>å¾®ä¿¡</tag>
      </tags>
  </entry>
  <entry>
    <title>NodeåŸºç¡€å¼€å‘æ¡†æ¶</title>
    <url>/dev-nodebase-framework/</url>
    <content><![CDATA[å‰è¨€æµ‹è¯•æ–°åŠŸèƒ½ï¼Œå¼€å‘æ–°é¡¹ç›®ï¼ŒæŒ‰ç…§æœ¬äººçš„æ‡’æƒ°ç¨‹åº¦æ¨ç®—ï¼Œå…«æˆä¼šåœ¨åŸæœ‰é¡¹ç›®çš„åŸºç¡€ä¸Šå¼€å‘ã€‚æ—¢ç„¶å¦‚æ­¤ï¼ŒæŠ½å‡ºæ¥ä¸€ä¸ªnodeåŸºç¡€æ¡†æ¶ï¼Œä¼¼ä¹æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æƒ³æ³•ã€‚æœ¬æ¡†æ¶ä¿ç•™äº†æ¯•è®¾çš„ä¸»ä½“ä»£ç ï¼Œåˆ é™¤äº†ä¸€äº›æ— å…³ä»£ç ï¼Œå¹¶ä¸”ä¼šç»§ç»­å¢å‡ä»£ç ï¼Œé€æ¸å®Œå–„ã€‚


nodebasea node framework designed for myselfversion: v1.0.0url: https://github.com/voidking/nodebase.git  
ä½œè€…ç›¸å…³author: haojin(voidking)e-mail: &#118;&#x6f;&#105;&#x64;&#x6b;&#x69;&#110;&#x67;&#64;&#x71;&#x71;&#46;&#99;&#111;&#x6d;site: http://www.voidking.com   
å¼€å‘ç¯å¢ƒè¯´æ˜1ã€å®‰è£…5.6.0ä»¥ä¸ŠNode2ã€å®‰è£…mongodbï¼Œä¸è¦é…ç½®å¯†ç 3ã€å®‰è£…sass4ã€å…¨å±€å®‰è£…bower5ã€å…¨å±€å®‰è£…supervisor6ã€å…¨å±€å®‰è£…node-inspector7ã€å…¨å±€å®‰è£…puer8ã€è¿è¡Œå‰æ‰§è¡Œå‘½ä»¤
npm installbower install


nodeå®æ—¶è°ƒè¯•å‘½ä»¤node-inspector --web-port=8888node --debug app.js

è¿è¡Œå‘½ä»¤node app.jsï¼Œè®¿é—®http://localhost
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title>å¾®ä¿¡æœ¬åœ°è°ƒè¯•</title>
    <url>/dev-weixin-localhost-debug/</url>
    <content><![CDATA[å‰è¨€åœ¨å¾®ä¿¡å¼€å‘çš„æ—¶å€™ï¼Œéœ€è¦å¡«å†™ä¸å¾®ä¿¡æœåŠ¡å™¨ç›¸è¿æ¥çš„urlï¼Œè¿™ä¸ªurlå¿…é¡»æ˜¯å…¬ç½‘åŸŸåã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸ªå…¬ç½‘åŸŸåå¯¹åº”çš„å…¬ç½‘æœåŠ¡å™¨ä¸Šåšå¼€å‘ï¼Œè€Œæ²¡åŠæ³•æœ¬åœ°å¼€å‘è°ƒè¯•ã€‚
ç†æƒ³çš„è§£å†³åŠæ³•ï¼Œæ˜¯æŠŠå…¬ç½‘åŸŸåç»‘å®šåˆ°æœ¬åœ°æœåŠ¡å™¨ï¼Œé‚£å°±å¯ä»¥æœ¬åœ°å¼€å‘è°ƒè¯•äº†ã€‚è€Œæœ¬åœ°ä¸»æœºæ˜¯æ²¡æœ‰å…¬ç½‘IPçš„ï¼Œæ€ä¹ˆåŠï¼ŸåŠ¨æ€åŸŸåè§£æã€‚


ngrok
I want to expose a local server behind a NAT or firewall to the internet.æˆ‘æƒ³å‘å¸ƒä¸€ä¸ªèƒ½å¤Ÿè¢«å…¬ç½‘è®¿é—®çš„æœ¬åœ°æœåŠ¡ã€‚

ngrokå®˜ç½‘ä¸Šçš„è¿™å¥è¯ï¼Œä¹Ÿæ­£æ˜¯æˆ‘ä»¬çš„éœ€æ±‚ã€‚
æŒ‰ç…§å®˜æ–¹æ•™ç¨‹ï¼ŒéƒåŒå­¦æµ‹è¯•äº†ä¸€ä¸‹ã€‚ngrokä¼šåˆ†é…ç»™æˆ‘ä»¬ä¸€ä¸ªåŠ¨æ€åŸŸåï¼Œä¹Ÿå¯ä»¥é€šè¿‡å…¬ç½‘è®¿é—®è¿™ä¸ªåŸŸåï¼ˆä¹Ÿå°±è®¿é—®åˆ°äº†æœ¬åœ°æœåŠ¡å™¨ï¼‰ï¼Œniceã€‚ä½†æ˜¯ï¼Œå¦‚æœæƒ³è¦ä½¿ç”¨å›ºå®šåŸŸåï¼Œå¿…é¡»ä»˜è´¹ã€‚åŸºç¡€ç‰ˆ5dollarä¸€ä¸ªæœˆï¼Œçº¦åˆäººæ°‘å¸33.4å…ƒï¼Œå€¼å¾—ã€‚
natapp
å¼€å¯æ‚¨çš„å†…ç½‘ç©¿é€ä¹‹æ—…ã€‚

natappï¼Œå®é™…ä¸Šæ˜¯ä¸­å›½çš„ngrokã€‚æ”¶è´¹æ›´ä¾¿å®œï¼ŒåŸºç¡€ç‰ˆ5å…ƒä¸€ä¸ªæœˆï¼ŒçœŸå¿ƒå®æƒ ï¼Œå¼ºçƒˆæ¨èã€‚
å€¼å¾—ä¸€æçš„æ˜¯ï¼Œnatappçš„æœåŠ¡äººå‘˜æ€åº¦å¾ˆå¥½ã€‚ç”±äºå®˜æ–¹æ–‡æ¡£è¿˜ä¸æ˜¯ç‰¹åˆ«å®Œå–„ï¼ŒéƒåŒå­¦é‡åˆ°äº†ä¸€ä¸ªè§£å†³ä¸äº†çš„é—®é¢˜ï¼šä»˜è´¹åä¾ç„¶æ— æ³•ä½¿ç”¨å›ºå®šåŸŸåã€‚ç»™æœåŠ¡äººå‘˜å‘é‚®ä»¶ï¼Œå¾ˆå¿«å°±å›å¤ï¼Œè¿˜å¸®å¿™è¿œç¨‹ã€‚æœ€åç¡®å®šæ˜¯win8.1ç³»ç»Ÿçš„é—®é¢˜ï¼Œæ— æ³•ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼Œå¿…é¡»æ‰‹è¾“å‚æ•°ã€‚
win8.1ä¸‹natappå¯åŠ¨æ­¥éª¤ï¼šåœ¨natapp.exeæ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼Œé¼ æ ‡å³é”®+shiftï¼Œåœ¨æ­¤å¤„æ‰“å¼€å‘½ä»¤çª—å£ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤å³å¯ã€‚
natapp -authtoken=xxxxxx

èŠ±ç”Ÿå£³èŠ±ç”Ÿå£³çš„ä¸šåŠ¡æœ‰ç‚¹å¤šï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯æä¾›åŠ¨æ€åŸŸåè§£æã€‚éƒåŒå­¦èŠ±äº†5å…ƒåœ¨èŠ±ç”Ÿå£³ä¹°äº†ä¸ªå›ºå®šåŸŸåï¼Œä¸è¿‡æ²¡æœ‰ç»§ç»­æµ‹è¯•ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´è‡ªè¡Œç™¾åº¦ã€‚
åè®°æœ€ç»ˆï¼ŒéƒåŒå­¦å†³å®šé•¿æœŸä½¿ç”¨natappã€‚natappå®˜ç½‘åˆ†é…çš„å›ºå®šåŸŸåä¸ºvoidking.vip.natapp.cnï¼ŒéƒåŒå­¦ç»‘å®šäº†è‡ªå·±çš„åŸŸåwx.voidking.comã€‚
åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°æµ‹è¯•å·ä¸Šï¼ŒJSæ¥å£å®‰å…¨åŸŸåä¿®æ”¹ä¸ºwx.voidking.comï¼Œç½‘é¡µæˆæƒè·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ä¿®æ”¹ä¸ºwx.voidking.comã€‚
å®Œæˆäº†ä»¥ä¸Šæ­¥éª¤ï¼Œå°±å¯ä»¥è¿›è¡Œå¾®ä¿¡å…¬ä¼—å·ç½‘ç«™çš„æœ¬åœ°å¼€å‘äº†ã€‚å¦‚æœè¦åšå¾®ä¿¡å…¬ä¼—å·åå°ï¼Œæ¥å£é…ç½®ä¿¡æ¯ä¹Ÿéœ€è¦ä¿®æ”¹ã€‚
ä¹¦ç­¾
å¾®ä¿¡å¼€å‘å¦‚ä½•åšæœ¬åœ°è°ƒè¯•
ngrok - secure introspectable tunnels to localhost
NATAPP åŸºäºngroké«˜é€Ÿå†…ç½‘ç©¿é€æœåŠ¡
èŠ±ç”Ÿå£³å®˜ç½‘
å¾®ä¿¡å…¬ä¼—å¹³å°å¼€å‘è€…æ–‡æ¡£
å¾®ä¿¡å…¬ä¼—å¹³å°æ¥å£è°ƒè¯•å·¥å…·
å¾®ä¿¡webå¼€å‘è€…å·¥å…·

]]></content>
      <categories>
        <category>engineering</category>
        <category>network</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œ</tag>
        <tag>å†…ç½‘ç©¿é€</tag>
        <tag>ä»£ç†</tag>
        <tag>å¾®ä¿¡</tag>
        <tag>è°ƒè¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>cssé˜´å½±æ•ˆæœ</title>
    <url>/dev-css-box-shadow/</url>
    <content><![CDATA[æœ‰é˜´å½±çš„å›¾ï¼Œçœ‹ä¸Šå»é«˜å¤§ä¸Šäº›ï¼Ÿä¸ç®¡æ€æ ·ï¼ŒUIè®¾è®¡äº†é˜´å½±ï¼Œå’±å°±ç…§åšå¥½äº†ã€‚
è¯­æ³•ï¼š
box-shadow: h-shadow v-shadow blur spread color inset;



è§£é‡Šï¼š



å€¼
æè¿°



h-shadow
å¿…éœ€ã€‚æ°´å¹³é˜´å½±çš„ä½ç½®ã€‚å…è®¸è´Ÿå€¼ã€‚


v-shadow
å¿…éœ€ã€‚å‚ç›´é˜´å½±çš„ä½ç½®ã€‚å…è®¸è´Ÿå€¼ã€‚


blur
å¯é€‰ã€‚æ¨¡ç³Šè·ç¦»ã€‚


spread
å¯é€‰ã€‚é˜´å½±çš„å°ºå¯¸ã€‚


color
å¯é€‰ã€‚é˜´å½±çš„é¢œè‰²ã€‚è¯·å‚é˜… CSS é¢œè‰²å€¼ã€‚


inset
å¯é€‰ã€‚å°†å¤–éƒ¨é˜´å½± (outset) æ”¹ä¸ºå†…éƒ¨é˜´å½±ã€‚


å¸¸è§ç”¨æ³•ï¼š
div&#123;    box-shadow: 10px 10px 5px #0cc;&#125;
å››ä¸ªå€¼åˆ†åˆ«æ˜¯æ°´å¹³é˜´å½±ä½ç½®ã€å‚ç›´é˜´å½±ä½ç½®ã€æ¨¡ç³Šè·ç¦»ã€é¢œè‰²ã€‚
å®é™…æ¡ˆä¾‹ï¼š
&lt;a href=&quot;&quot; class=&quot;confirm&quot;&gt;    &lt;span&gt;é©¬ä¸Šå»æŠ¢2Gæµé‡&lt;/span&gt;&lt;/a&gt;

.confirm&#123;    display: inline-block;    box-shadow: 0 .5rem 1.5rem #0cc;    border-radius: 5px;    margin-top: 12%;    width: 98%;    height: 17%;    background: url(../../img/flowrate/blue.jpg) no-repeat;    background-size: 100% 100%;    color: #fff;    span&#123;        display: inline-block;        margin-top: 3%;        font-size: 1.5rem;    &#125;&#125;

æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>css</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>ç»å¯¹å®šä½å±…ä¸­å¸ƒå±€</title>
    <url>/dev-absolute-center-layout/</url>
    <content><![CDATA[å‰è¨€ç»å¯¹å®šä½å¹¶ä¸”å±…ä¸­æ˜¾ç¤ºï¼Œåœ¨å¼€å‘ä¸­ç»å¸¸ç”¨åˆ°ã€‚æ€»ç»“äº†ä¸€ä¸‹è¿™ç§å¸ƒå±€çš„ä¸‰ç§æ–¹æ³•ï¼Œå¤‡å¿˜ã€‚
æ–¹æ³•ä¸€position: absolute;top: 0;left: 0;right: 0;bottom: 0;margin: auto;width: 82%;height: 40%;



æ–¹æ³•äºŒposition: absolute;left: 50%; top: 50%;margin-top: -20%;margin-left: -41%;width: 82%;height: 40%;

æ–¹æ³•ä¸‰position: absolute;left: 50%; top: 50%;transform: translate(-50%, -50%);    /* 50%ä¸ºè‡ªèº«å°ºå¯¸çš„ä¸€åŠ */margin: auto;

åè®°ä»¥ä¸Šä¸‰ç§ç»å¯¹å®šä½å±…ä¸­å¸ƒå±€æ–¹æ³•ï¼ŒåŒæ ·é€‚ç”¨äºå›ºå®šå®šä½ï¼Œå³position:fixed;ï¼Œåªä¸è¿‡æ˜¯ç›¸å¯¹çš„å®¹å™¨å˜æˆäº†æµè§ˆå™¨ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>css</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>inputç»‘å®šå›è½¦äº‹ä»¶</title>
    <url>/dev-enter-event/</url>
    <content><![CDATA[htmléƒ¨åˆ†ï¼š
&lt;input id=&quot;search-key&quot; type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥å…³é”®å­—&quot;&gt;



JavaScriptéƒ¨åˆ†ï¼š
$(&#x27;#search-key&#x27;).keypress(function(event) &#123;    var key = event.which;    console.log(key);    if(key == 13)&#123;        //do something    &#125;&#125;);
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>jquery</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¨ªå‘æ»šåŠ¨æ•ˆæœ</title>
    <url>/dev-horizontal-scrolling/</url>
    <content><![CDATA[htmléƒ¨åˆ†ï¼š
&lt;div class=&quot;tab-body&quot;&gt;    &lt;ul&gt;        &lt;li data-key=&quot;0&quot;&gt;å…¨éƒ¨&lt;/li&gt;        &lt;li data-key=&quot;1&quot;&gt;æ”»ç•¥&lt;/li&gt;        &lt;li data-key=&quot;2&quot;&gt;æ¡ˆä¾‹&lt;/li&gt;        &lt;li data-key=&quot;3&quot;&gt;æ•…äº‹ä¼š&lt;/li&gt;        &lt;li data-key=&quot;4&quot;&gt;ç‰¹åˆ«ç­–åˆ’&lt;/li&gt;        &lt;li data-key=&quot;5&quot;&gt;å–œèˆæ¯&lt;/li&gt;        &lt;li data-key=&quot;6&quot;&gt;å®¶å±…è½¶äº‹&lt;/li&gt;    &lt;/ul&gt;&lt;/div&gt;



sasséƒ¨åˆ†ï¼š
.tab-body&#123;    background: #fff;    overflow-x: scroll;    ul&#123;        width: 1000%;        li&#123;            display: inline-block;            vertical-align: top;            height: 3.5rem;            line-height: 3.5rem;            font-size: 1.3rem;            color: #666;            padding: 0 .8rem 0 .8rem;            margin-right: 1.8rem;            &amp;.active&#123;                border-bottom: 4px solid #FF5500;                color: #FF5500;            &#125;        &#125;    &#125;&#125;

jséƒ¨åˆ†ï¼š
// åˆå§‹typeæ˜¯å…¨éƒ¨$(&#x27;.tab-body li&#x27;).first().addClass(&#x27;active&#x27;);var type = 0;// è®¾ç½®å¯¼èˆªæ¡å®½åº¦var totalWidth = 0;$(&#x27;.tab-body li&#x27;).each(function(index, el) &#123;    totalWidth += $(el).width()+parseInt($(el).css(&#x27;margin-right&#x27;));&#125;);$(&#x27;.tab-body ul&#x27;).css(&#123;    &#x27;width&#x27;: (totalWidth + 50)+ &#x27;px&#x27;&#125;);// åˆ‡æ¢type$(&#x27;.tab-body li&#x27;).on(&#x27;click&#x27;,function()&#123;    $(&#x27;.tab-body li&#x27;).removeClass(&#x27;active&#x27;);    $(this).addClass(&#x27;active&#x27;);    type = $(this).attr(&#x27;data-key&#x27;);    var param = &#123;        articleType: type,        pageNo: 1,        pageSize: 4    &#125;    $.ajax(&#123;        url: &#x27;/inspiration/home/api&#x27;,        type: &#x27;POST&#x27;,        dataType: &#x27;json&#x27;,        data: param,        success: function(data)&#123;            //æŠŠæ–°è·å¾—çš„æ•°æ®æ’å…¥åˆ°é¡µé¢        &#125;,        error: function(xhr)&#123;            console.log(xhr)        &#125;    &#125;);         &#125;);

æ•ˆæœå›¾
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>é€šè¿‡æµè§ˆå™¨æ‰“å¼€åº”ç”¨ç¨‹åº</title>
    <url>/dev-start-app-from-browser/</url>
    <content><![CDATA[åŸç†é€šè¿‡æµè§ˆå™¨æ‰“å¼€åº”ç”¨ç¨‹åºï¼Œåˆ©ç”¨çš„æ˜¯åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥ä¸€ä¸ªåè®®ï¼Œå¦‚æœæœ‰æœ¬åœ°ç¨‹åºï¼ˆåº”ç”¨ï¼‰èƒ½å¤Ÿè§£æè¿™ä¸ªåè®®ï¼Œé‚£ä¹ˆè¿™ä¸ªåº”ç”¨å°†è¢«è°ƒèµ·ã€‚


å‰ç«¯ä»£ç å¦‚æœå®‰è£…è¿‡appè°ƒèµ·appï¼Œå¦åˆ™é¡µé¢è·³è½¬åˆ°appä¸‹è½½é¡µé¢ï¼Œè¿™ä¸ªé€»è¾‘åˆ†æ”¯å®ç°åŸç†å¦‚ä¸‹ï¼š
å½“åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥appå®šä¹‰çš„åè®®è°ƒèµ·appæ—¶ï¼Œå¦‚æœå·²ç»å®‰è£…è¿‡ï¼Œç³»ç»Ÿä¸­æ–­æµè§ˆå™¨è¿›ç¨‹ï¼Œç»§è€Œå“åº”appè¿›ç¨‹ï¼Œå› è€Œåœ¨åˆ‡æ¢åˆ°appçš„æ—¶å€™æµè§ˆå™¨ä¸­jsä»£ç å°†ä¸å†æ‰§è¡Œï¼Œå½“å†æ¬¡åˆ‡æ¢å›æ¥æ—¶ç³»ç»Ÿè¿›ç¨‹åˆåˆ‡å›æµè§ˆå™¨ï¼Œjsä»£ç ä»ä¸­æ–­å¤„ç»§ç»­æ‰§è¡Œã€‚æ‰€åšçš„é€»è¾‘åˆ†æ”¯å°±æ˜¯åˆ©ç”¨è¿™ä¸ªå…³é”®ç‚¹ã€‚å¯è®¾ç½®å»¶æ—¶æ¥åšåˆ†æ”¯ï¼Œå½“appå¯ä»¥è¢«è°ƒèµ·æ—¶ï¼Œåˆ‡æ¢åˆ°appï¼Œjsä¸å†æ‰§è¡Œï¼Œè¿™æœŸä¸­æœ‰ä¸ªappè°ƒèµ·æ—¶é—´ï¼ˆä¸ç³»ç»Ÿæœ‰å…³ï¼‰ï¼Œå¦‚æœè®¾ç½®çš„å»¶æ—¶æ—¶é—´è¿‡çŸ­ï¼Œåˆ™jsä¼šç»§ç»­æ‰§è¡Œã€‚å½“åˆ‡æ¢å›æ¥ï¼Œè®°å½•åˆ‡æ¢å›æ¥çš„æ—¶é—´ç‚¹ï¼Œä¸åˆ‡æ¢ä¹‹å‰æ¯”è¾ƒå¤§äºè®¾å®šæ—¶é—´è¯´æ˜å·²ç»åˆ‡æ¢æˆåŠŸï¼Œå°†ä¸å†æ‰§è¡Œä¸‹è½½ï¼Œå¦åˆ™ä¸‹è½½ã€‚
PSï¼šappçš„åè®®æ˜¯ä¸appå¼€å‘åŒå­¦çº¦å®šï¼Œç”±appå¼€å‘åŒå­¦é€šè¿‡activity schemeè®¾ç½®çš„ã€‚
var appInfo = &#123;    iosUrl: &quot;&quot;,    //æ‰“å¼€IOSå®¢æˆ·ç«¯é“¾æ¥    androidUrl: &quot;&quot;,  //æ‰“å¼€ANdroidå®¢æˆ·ç«¯çš„é“¾æ¥    downloadUrl: &quot;&quot;  //ä¸‹è½½å®¢æˆ·ç«¯æˆ–è€…å»App Storeçš„é“¾æ¥&#125;;var t1 = new Date().getTime();iframe2open();jump2download();//åˆ©ç”¨iframeæ‰“å¼€å®¢æˆ·ç«¯function iframe2open()&#123;    var src = $.os.ios ? appInfo.iosUrl : appInfo.androidUrl,        iframe = document.createElement(&quot;iframe&quot;);    iframe.src = src;    iframe.style.display = &quot;none&quot;;    document.body.appendChild(iframe); &#125; //è·³è½¬ä¸‹è½½é¡µé¢function jump2download()&#123;    var _timer = null;    clearTimeout(_timer);    _timer = setTimeout(function()&#123;        var t2 = new Date().getTime();        if (t2 - t1 &lt;= 800) &#123;            window.location = appInfo.downloadUrl;        &#125;    &#125;,400);&#125;

ä¹¦ç­¾é€šè¿‡æµè§ˆå™¨ç›´æ¥æ‰“å¼€iOS/Android App åº”ç”¨ç¨‹åºhttp://itindex.net/blog/1415353560000.html
Make a link in the Android browser start up my app?
Launch custom android application from android browser
éå¾®ä¿¡å†…ç½®æµè§ˆå™¨ä¸­çš„ç½‘é¡µè°ƒèµ·å¾®ä¿¡æ”¯ä»˜çš„æ–¹æ¡ˆç ”ç©¶http://blog.csdn.net/ahence/article/details/51317814
æµè§ˆå™¨è°ƒèµ·appåº”ç”¨æ–¹æ³•http://blog.csdn.net/u012193330/article/details/52190143
androidè‡ªå®šä¹‰åè®®å’ŒhtmlåŠ è½½æ—¶è‡ªåŠ¨å°è¯•è°ƒç”¨æœ¬åœ°APPhttp://www.oschina.net/code/snippet_256033_35330/
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>ReactNativeã€Ionicå’ŒNativeScript</title>
    <url>/dev-reactnative-ionic-nativescript/</url>
    <content><![CDATA[å‰è¨€æœ€è¿‘å‡ å¹´ï¼Œåˆ©ç”¨HTML5æŠ€æœ¯å¼€å‘è·¨å¹³å°appï¼Œè¶Šæ¥è¶Šæµè¡Œã€‚å„ç§æ¡†æ¶å±‚å‡ºä¸ç©·ï¼ŒéƒåŒå­¦é€‰æ‹©äº†å…¶ä¸­ä¸‰ä¸ªï¼Œæ¥å¯¹æ¯”ç ”ç©¶ä¸€ä¸‹ç©¶ç«Ÿä»€ä¹ˆæ ·çš„æ¡†æ¶æ‰æ›´å¥½ã€‚


ReactNativeReact Native ä½¿ä½ èƒ½å¤Ÿä½¿ç”¨åŸºäº JavaScript å’Œ React ä¸€è‡´çš„å¼€å‘ä½“éªŒåœ¨æœ¬åœ°å¹³å°ä¸Šæ„å»ºä¸–ç•Œä¸€æµçš„åº”ç”¨ç¨‹åºä½“éªŒã€‚React Native æŠŠé‡ç‚¹æ”¾åœ¨æ‰€æœ‰å¼€å‘äººå‘˜å…³å¿ƒçš„å¹³å°çš„å¼€å‘æ•ˆç‡ä¸Šâ€”â€”å¼€å‘è€…åªéœ€å­¦ä¹ ä¸€ç§è¯­è¨€å°±èƒ½è½»æ˜“ä¸ºä»»ä½•å¹³å°é«˜æ•ˆåœ°ç¼–å†™ä»£ç ã€‚Facebook åœ¨å¤šä¸ªåº”ç”¨ç¨‹åºäº§å“ä¸­ä½¿ç”¨äº† React Nativeï¼Œå¹¶å°†ç»§ç»­ä¸º React Native æŠ•èµ„ã€‚
ä¼˜åŠ¿ï¼š1ã€è™½ç„¶ä¸èƒ½åšåˆ°ä¸€å¤„ç¼–ç åˆ°å¤„è¿è¡Œï¼Œä½†æ˜¯åŸºæœ¬ä¸Šå³ä½¿æ˜¯ä¸¤å¥—ä»£ç ï¼Œä¹Ÿæ˜¯ç›¸åŒçš„jsxè¯­æ³•ï¼Œä½¿ç”¨jsè¿›è¡Œå¼€å‘ã€‚ç”¨æˆ·ä½“éªŒï¼Œé«˜äºhtmlï¼Œå¼€å‘æ•ˆç‡è¾ƒé«˜ã€‚2ã€flexbox å¸ƒå±€ï¼Œæ®è¯´æ¯”nativeçš„è‡ªé€‚åº”å¸ƒå±€æ›´åŠ ç®€å•é«˜æ•ˆã€‚3ã€å¯å®ç°åœ¨çº¿æ›´æ–°ï¼ŒAppStoreå®¡æ ¸æ”¿ç­–è°ƒæ•´ï¼šå…è®¸è¿è¡ŒäºJavascriptCoreçš„åŠ¨æ€åŠ è½½ä»£ç ã€‚4ã€æ›´è´´è¿‘åŸç”Ÿå¼€å‘ã€‚
åŠ£åŠ¿ï¼š1ã€ï¼ˆå¼•ï¼‰å¯¹å¼€å‘äººå‘˜è¦æ±‚è¾ƒé«˜ï¼Œä¸æ˜¯æ‡‚ç‚¹webæŠ€æœ¯å°±è¡Œçš„ï¼Œå½“å®˜æ–¹å°è£…çš„æ§ä»¶ã€apiæ— æ³•æ»¡è¶³éœ€æ±‚æ—¶ å°±å¿…ç„¶éœ€è¦æ‡‚ä¸€äº›nativeçš„ä¸œè¥¿å»æ‰©å±•ï¼Œæ‰©å±•æ€§ä»ç„¶è¿œè¿œä¸å¦‚webï¼Œä¹Ÿè¿œè¿œä¸å¦‚ç›´æ¥å†™Native codeã€‚2ã€ï¼ˆå¼•ï¼‰å®˜æ–¹è¯´å¾—å¾ˆéšæ™¦ï¼šlearn once, write anywhereã€‚äººå®¶å¯æ²¡è¯´run anywhereã€‚äº‹å®ä¸Šï¼Œä»å®˜æ–¹çš„apiæ¥çœ‹SliderIOSï¼ŒSwitchIOS..ç­‰ç­‰è¿™äº›æ§ä»¶ï¼Œä¹‹ååŠ¿å¿…ä¼šå‡ºç°SliderAndroidï¼ŒSwitchAndroidâ€¦ï¼Œä¹Ÿå°±æ˜¯å¾ˆå¯èƒ½é’ˆå¯¹ä¸åŒçš„å¹³å°ä¼šéœ€è¦å†™å¤šå¥—ä»£ç ã€‚3ã€å‘å±•è¿˜ä¸æˆç†Ÿï¼Œç›®å‰å¾ˆå¤šuiç»„ä»¶åªæœ‰iosçš„å®ç°ï¼Œandroidçš„éœ€è¦è‡ªå·±å®ç°ã€‚4ã€ï¼ˆå¼•ï¼‰ä»Nativeåˆ°Webï¼Œè¦åšå¾ˆå¤šæ¦‚å¿µè½¬æ¢ï¼ŒåŠ¿å¿…é€ æˆåŒæ–¹éƒ½è¦å¦¥åã€‚æ¯”å¦‚webè¦ç”¨ä¸€å¥—CSSçš„é˜‰å‰²ç‰ˆï¼ŒNativeé€šè¿‡css-layoutæ‹¿åˆ°æœ€ç»ˆæ ·å¼å†è½¬æ¢æˆnativeåŸç”Ÿçš„è¡¨è¾¾æ–¹å¼ï¼ˆæ¯”å¦‚iOSçš„Constraint\origin\Centerç­‰å±æ€§ï¼‰ï¼Œå†æ¯”å¦‚åŠ¨ç”»ã€‚å¦å¤–ï¼Œè‹¥Androidå’ŒiOSéƒ½è¦åšç›¸åŒçš„å°è£…ï¼Œæ¦‚å¿µè½¬æ¢å°±æ›´å¤æ‚ã€‚5ã€æ–‡æ¡£è¿˜ä¸å¤Ÿå®Œæ•´ï¼Œå­¦ä¹ èµ·æ¥å›°éš¾ã€‚
IonicIONICæ˜¯ç›®å‰æœ€æœ‰æ½œåŠ›çš„ä¸€æ¬¾ HTML5 æ‰‹æœºåº”ç”¨å¼€å‘æ¡†æ¶ã€‚é€šè¿‡ SASS æ„å»ºåº”ç”¨ç¨‹åºï¼Œå®ƒæä¾›äº†å¾ˆå¤š UI ç»„ä»¶æ¥å¸®åŠ©å¼€å‘è€…å¼€å‘å¼ºå¤§çš„åº”ç”¨ã€‚ å®ƒä½¿ç”¨ JavaScript MVVM æ¡†æ¶å’Œ AngularJS æ¥å¢å¼ºåº”ç”¨ã€‚æä¾›æ•°æ®çš„åŒå‘ç»‘å®šï¼Œä½¿ç”¨å®ƒæˆä¸º Web å’Œç§»åŠ¨å¼€å‘è€…çš„å…±åŒé€‰æ‹©ã€‚Ionicæ˜¯ä¸€ä¸ªä¸“æ³¨äºç”¨WEBå¼€å‘æŠ€æœ¯ï¼ŒåŸºäºHTML5åˆ›å»ºç±»ä¼¼äºæ‰‹æœºå¹³å°åŸç”Ÿåº”ç”¨çš„ä¸€ä¸ªå¼€å‘æ¡†æ¶ã€‚Ionicæ¡†æ¶çš„ç›®çš„æ˜¯ä»webçš„è§’åº¦å¼€å‘æ‰‹æœºåº”ç”¨ï¼ŒåŸºäºPhoneGapçš„ç¼–è¯‘å¹³å°ï¼Œå¯ä»¥å®ç°ç¼–è¯‘æˆå„ä¸ªå¹³å°çš„åº”ç”¨ç¨‹åºã€‚
ä¼˜åŠ¿ï¼š1ã€ios å’Œ android åŸºæœ¬ä¸Šå¯ä»¥å…±ç”¨ä»£ç ï¼Œçº¯webæ€ç»´ï¼Œå¼€å‘é€Ÿåº¦å¿«ï¼Œç®€å•æ–¹ä¾¿ï¼Œä¸€æ¬¡ç¼–ç ï¼Œåˆ°å¤„è¿è¡Œï¼Œå¦‚æœç†Ÿæ‚‰webå¼€å‘ï¼Œåˆ™å¼€å‘éš¾åº¦è¾ƒä½ã€‚2ã€æ–‡æ¡£å¾ˆå…¨ï¼Œç³»ç»Ÿçº§æ”¯æŒå°è£…è¾ƒå¥½ï¼Œæ‰€æœ‰UIç»„ä»¶éƒ½æ˜¯æœ‰htmlæ¨¡æ‹Ÿï¼Œå¯ä»¥ç»Ÿä¸€ä½¿ç”¨ã€‚3ã€å¯å®ç°åœ¨çº¿æ›´æ–° å…è®¸åŠ è½½åŠ¨æ€åŠ è½½web jsã€‚4ã€æ–‡æ¡£å¤šï¼Œå¼€å‘è€…å¤šï¼Œè§†é¢‘æ•™ç¨‹å¤šã€‚å®¹æ˜“å­¦ä¹ ï¼Œé‡åˆ°é—®é¢˜å®¹æ˜“è§£å†³ï¼ŒæŠ€æœ¯æˆç†Ÿã€‚
åŠ£åŠ¿ï¼š1ã€å ç”¨å†…å­˜é«˜ä¸€äº›ï¼ˆä¸è¿‡æ‰‹æœºå†…å­˜éƒ½å¤§äº†ä¸å½±å“ï¼‰ï¼Œä¸é€‚åˆåšæ¸¸æˆç±»å‹appï¼ŒwebæŠ€æœ¯æ— æ³•è§£å†³ä¸€åˆ‡é—®é¢˜ï¼Œå¯¹äºæ¯”è¾ƒè€—æ€§èƒ½çš„åœ°æ–¹æ— æ³•åˆ©ç”¨nativeçš„æ€ç»´å®ç°ä¼˜åŠ¿äº’è¡¥ï¼Œå¦‚é«˜ä½“éªŒçš„äº¤äº’ï¼ŒåŠ¨ç”»ç­‰ã€‚
NativeScriptå’Œ ReactNative ç›¸æ¯”ï¼ŒNativeScript æœ€å¤§çš„ç‰¹ç‚¹æ˜¯å¯ä»¥è·å¾—100%çš„åŸç”Ÿ API ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ JavaScript è·å–å’ŒåŸç”Ÿå¼€å‘è¯­è¨€åŒæ ·å¤šçš„åŸç”Ÿæ¥å£ã€‚
ä¼˜åŠ¿ï¼š1ã€ä½¿ç”¨ JavaScript ç›´æ¥è®¿é—®æ‰€æœ‰åŸç”Ÿ APIã€‚2ã€ç³»ç»Ÿæ–°åŠŸèƒ½0å»¶æ—¶æ”¯æŒã€‚3ã€ç¬¬ä¸‰æ–¹åŸç”Ÿåº“å…¨éƒ¨æ”¯æŒã€‚
åŠ£åŠ¿ï¼š1ã€NativeScriptå’ŒReactä¸åŒï¼Œæ— æ³•ä¸åŸç”Ÿé¡¹ç›®èåˆï¼Œå³ä½ åªèƒ½çº¯å†™ä¸ªNativeScriptçš„åº”ç”¨ï¼Œä¸å¯èƒ½æŠŠå®ƒæŠ½ç¦»å‡ºæ¥ä½œä¸ºæŸåŸç”Ÿåº”ç”¨çš„ä¸€éƒ¨åˆ†æ¥å‡ºç°ã€‚è™½ç„¶è¯´å®ƒå’ŒReactçš„å‡ºå‘ç‚¹ä¸€è‡´éƒ½æ˜¯â€ç”¨Web APPçš„å¼€å‘é€Ÿåº¦æ‰“é€ Native Appçš„ä½“éªŒâ€ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œå®ƒç®—æ˜¯é¸¡è‚‹å§ï¼Œæ‹¿å®ƒæ¥å†™ä¸ªå±•ç¤ºAppæˆ–è€…ç®€å•çš„åº”ç”¨è¿˜æ˜¯ä¸é”™çš„ã€‚2ã€NativeScriptä¸­è™½ç„¶å·²ç»æ”¯æŒäº†å¾ˆå¤šç»„ä»¶ï¼Œæ¯”å¦‚è¯´tabviewã€srcollviewã€buttonï¼Œä½†æ˜¯æä¾›çš„ç»„ä»¶æ–¹æ³•ã€å±æ€§è¿‡å°‘ï¼Œæ•´ä¸ªæ¡†æ¶è¿˜ä¸æ˜¯å¾ˆä¸°æ»¡ã€‚
åè®°åˆ©ç”¨HTML5æŠ€æœ¯å¼€å‘è·¨å¹³å°appï¼Œæœ€é‡è¦çš„æ˜¯ä¸¤ç‚¹ï¼šç¬¬ä¸€ç‚¹ï¼Œä¸€å¥—ä»£ç ï¼Œæ‰€æœ‰å¹³å°éƒ½å¯ä»¥è¿è¡Œï¼›ç¬¬äºŒç‚¹ï¼Œåˆ©ç”¨HTML5æŠ€æœ¯å®ç°ï¼Œå°½é‡å°‘çš„ç”¨åˆ°å…¶ä»–æŠ€æœ¯ã€‚è‡³äºæ€§èƒ½ï¼Œè‚¯å®šæ˜¯ä¸å¦‚åŸç”Ÿåº”ç”¨çš„ï¼Œåªèƒ½æœŸå¾…æ¡†æ¶ä»¥åçš„ä¼˜åŒ–ã€‚ReactNativeï¼Œå¾ˆå¤šæ—¶å€™éƒ½è¦å†™ä¸¤å¥—ä»£ç ï¼Œä¸æ»¡è¶³ç¬¬ä¸€ç‚¹ï¼›å¼€å‘æ—¶è¦ç”¨åˆ°å¾ˆå¤šåŸç”Ÿçš„androidå’ŒiosæŠ€æœ¯ï¼Œä¸æ»¡è¶³ç¬¬äºŒç‚¹ã€‚Ionicï¼Œä¸¤ç‚¹çš†æ»¡è¶³ï¼Œä½†æ˜¯æ›´é€‚åˆå¼€å‘webç±»appï¼Œä¸é€‚åˆå¼€å‘æ¸¸æˆã€‚NativeScriptï¼Œä¸¤ç‚¹çš†æ»¡è¶³ã€‚
ç»¼ä¸Šï¼Œä¸ªäººè®¤ä¸ºï¼ŒIonicå’ŒNativeScriptæ›´å€¼å¾—å­¦ä¹ ã€‚å¦‚æœéè¦äºŒé€‰ä¸€ï¼Œæˆ‘é€‰æ‹©NativeScriptã€‚ç†ç”±å¾ˆç®€å•ï¼ŒReactNativeçš„ç ”å‘äººæ•°æ›´å°‘ï¼Œå‚è€ƒæ–‡æ¡£ã€ä¹¦ç±å’Œè§†é¢‘æ›´å°‘ï¼Œè¦åšï¼Œå°±åšå…ˆè¡Œè€…ã€‚
ä¹¦ç­¾ReactNativeæ•´ç†äº†ä¸€ä»½React-Nativeå­¦ä¹ æŒ‡å—http://www.tuicool.com/articles/zaInUbA
RativeScriptçš„å·¥ä½œåŸç†ï¼šç”¨JavaScriptè°ƒç”¨åŸç”ŸAPIå®ç°è·¨å¹³å° â€“ OurJShttp://top.css88.com/archives/656
React Nativeä¸­æ–‡ç¤¾åŒºhttp://bbs.reactnative.cn/
React å…¥é—¨å®ä¾‹æ•™ç¨‹http://www.ruanyifeng.com/blog/2015/03/react.html
WebViewJavascriptBridgeè¯¦ç»†ä½¿ç”¨http://www.tuicool.com/articles/Q3AVnq2
WebViewJavascriptBridge åŸç†åˆ†æhttp://www.2cto.com/kf/201503/384998.html
æ•™ä½ æ€ä¹ˆå±è”½æ‰åœ¨ç§»åŠ¨ç«¯çš„å®½å¸¦è¿è¥å•†çš„æµé‡åŠ«æŒï¼Œå±è”½æ— è€»çš„å¹¿å‘Šhttps://my.oschina.net/zxcholmes/blog/596192
ReactJS å‚»ç“œæ•™ç¨‹https://zhuanlan.zhihu.com/p/19896745?columnSlug=FrontendMagazine
React | A JAVASCRIPT LIBRARY FOR BUILDING USER INTERFACEShttps://facebook.github.io/react/index.html
IonicIonic: Advanced HTML5 Hybrid Mobile App Frameworkhttp://ionicframework.com/
Ionicä¸­æ–‡æ–‡æ¡£æ•™ç¨‹http://www.ionic.wang/js_doc-index.html
ionic react-native native ä¼˜åŠ£åŠ¿å¯¹æ¯”http://www.ionic.wang/article-index-id-69.html
NativeScriptä½¿ç”¨NativeScriptå’ŒAngular2æ„å»ºè·¨å¹³å°APPhttps://zhuanlan.zhihu.com/p/21458458
Cross-Platform Native Development with Javascripthttps://www.nativescript.org/
NativeScriptæºç https://github.com/NativeScript
NativeScriptä¸­æ–‡æ‰‹å†Œ - GitBookhttps://www.gitbook.com/book/flowforever/nativescript-cn-book/details
]]></content>
      <categories>
        <category>engineering</category>
        <category>android</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨accessTokenè®°å½•ç™»å½•çŠ¶æ€</title>
    <url>/dev-login-state-accesstoken/</url>
    <content><![CDATA[jsè®¾ç½®cookieæµ·å“¥çš„æ’ä»¶æµè§ˆå™¨ç«¯ç”¨åˆ°äº†æµ·å“¥å†™çš„Cookieæ’ä»¶ï¼šhttps://github.com/voidking/jquery-cookie ï¼Œå€¼å¾—å¥½å¥½å­¦ä¹ ä¸€ä¸‹ã€‚
cookie.prototype.setCookie(&#x27;accessToken&#x27;, accessToken,7);

jqueryå®˜æ–¹æ’ä»¶å¦‚æœä½¿ç”¨jqueryå®˜æ–¹ç»™çš„cookieæ’ä»¶ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š
$.cookie(&#x27;accessToken&#x27;, accessToken,&#123; expires: 7&#125;);


åŸç”Ÿjså¦‚æœä½¿ç”¨åŸç”Ÿçš„JSæ¥æ“ä½œcookieï¼Œç”¨æ³•å¦‚ä¸‹ï¼š
//è·å–å½“å‰æ—¶é—´var date=new Date();var expireDays=7;//å°†dateè®¾ç½®ä¸º7å¤©ä»¥åçš„æ—¶é—´date.setTime(date.getTime()+expireDays*24*3600*1000);//æˆ–è€…ä¹Ÿå¯ä»¥ç”¨date.setDate(date.getDate+expireDays);//å°†accessTokenè¿™ä¸ªcookieè®¾ç½®ä¸º7å¤©åè¿‡æœŸdocument.cookie = &#x27;accessToken=&#x27;+accessToken+&#x27;;expires=7&#x27;;

jsåˆ é™¤cookieæµ·å“¥çš„æ’ä»¶cookie.prototype.delCookie(&#x27;accessToken&#x27;); 

jqueryå®˜æ–¹æ’ä»¶$.removeCookie(&#x27;accessToken&#x27;);

åŸç”ŸJS//è·å–å½“å‰æ—¶é—´var date=new Date();//å°†dateè®¾ç½®ä¸ºè¿‡å»çš„æ—¶é—´date.setTime(date.getTime()-10000);//å°†accessTokenè¿™ä¸ªcookieåˆ é™¤document.cookie=&#x27;accessToken=v; expire=&#x27;+date.toGMTString();console.log(document.cookie);

jsè·å–cookieæµ·å“¥çš„æ’ä»¶var accessToken = cookie.prototype.getCookie(&#x27;accessToken&#x27;);

jqueryå®˜æ–¹æ’ä»¶var accessToken = $.cookie(&#x27;accessToken&#x27;);

åŸç”Ÿjsvar accessToken = getCookie(&#x27;accessToken&#x27;);function getCookie(objName)&#123;    var arrStr = document.cookie.split(&quot;; &quot;);    for(var i = 0;i &lt; arrStr.length;i ++)&#123;            var temp = arrStr[i].split(&quot;=&quot;);            if(temp[0] == objName)                 return unescape(temp[1]);    &#125;&#125;


Nodeç«¯è·å–cookievar Cookies = &#123;&#125;;req.headers.cookie &amp;&amp; req.headers.cookie.split(&#x27;;&#x27;).forEach(function( Cookie ) &#123;    var parts = Cookie.split(&#x27;=&#x27;);    Cookies[ parts[ 0 ].trim() ] = ( parts[ 1 ] || &#x27;&#x27; ).trim();&#125;);var accessToken = Cookies[&#x27;accessToken&#x27;] || &#x27;&#x27;;

åè®°accessTokenå¯ä»¥åœ¨å‰ç«¯è·å–åä¼ ç»™Nodeç«¯ï¼Œä¹Ÿå¯ä»¥åœ¨Nodeç«¯è·å–ã€‚å¦‚æœè¿™ä¸ªaccessTokenä¸ä¸ºç©ºï¼Œåˆ™è¡¨æ˜è¯¥ç”¨æˆ·å·²ç»ç™»å½•ï¼Œå¦åˆ™è¡¨æ˜è¯¥ç”¨æˆ·æœªç™»å½•ã€‚
å‚è€ƒæ–‡æ¡£jQuery Cookiehttp://plugins.jquery.com/cookie/
jQuery Cookieé¡¹ç›®åœ°å€https://github.com/carhartl/jquery-cookie
å…³äºdocument.cookieçš„ä½¿ç”¨http://www.cnblogs.com/newsouls/archive/2766567.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>node</tag>
        <tag>cookie</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Socket.IOå®ç°å®æ—¶ç§ä¿¡åŠŸèƒ½</title>
    <url>/dev-graduation-project-socketio/</url>
    <content><![CDATA[åŠŸèƒ½æè¿°åœ¨å¸–å­è¯¦æƒ…é¡µé¢ï¼Œå•å‡»ç”¨æˆ·å¤´åƒï¼Œå¯ä»¥å‘é€ç§ä¿¡ç»™è¯¥ç”¨æˆ·ã€‚åœ¨æ¶ˆæ¯é¡µé¢ï¼Œè¾“å…¥ç”¨æˆ·åï¼Œå¯ä»¥å‘é€ç§ä¿¡ç»™è¯¥ç”¨æˆ·ã€‚å¦‚æœè¯¥ç”¨æˆ·åœ¨çº¿ï¼Œåˆ™æŠŠç§ä¿¡å®æ—¶å‘é€ç»™è¯¥ç”¨æˆ·ï¼Œå¦‚æœè¯¥ç”¨æˆ·ä¸åœ¨çº¿ï¼Œåˆ™æŠŠç§ä¿¡å­˜å‚¨åˆ°æ•°æ®åº“ï¼Œæˆä¸ºæ¶ˆæ¯è®°å½•ã€‚


åŸç†WebSocket protocol æ˜¯HTML5ä¸€ç§æ–°çš„åè®®ã€‚ä½¿ç”¨WebSocket APIï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨åªéœ€è¦åšä¸€ä¸ªæ¡æ‰‹çš„åŠ¨ä½œï¼Œå°±å½¢æˆäº†ä¸€æ¡å¿«é€Ÿé€šé“ã€‚å€ŸåŠ©è¿™ä¸ªé€šé“ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´å°±å¯ä»¥äº’ç›¸ä¼ é€æ•°æ®ã€‚
Socket.IOæ˜¯ä¸€ä¸ªå®Œå…¨ç”±JavaScriptå®ç°ã€åŸºäºNode.jsã€æ”¯æŒWebSocketçš„åè®®ç”¨äºå®æ—¶é€šä¿¡ã€è·¨å¹³å°çš„å¼€æºæ¡†æ¶ï¼Œå®ƒåŒ…æ‹¬äº†æµè§ˆå™¨ç«¯çš„JavaScriptå’ŒæœåŠ¡å™¨ç«¯çš„Node.jsã€‚ Socket.IOé™¤äº†æ”¯æŒWebSocketé€šè®¯åè®®å¤–ï¼Œè¿˜æ”¯æŒè®¸å¤šç§è½®è¯¢ï¼ˆPollingï¼‰æœºåˆ¶ä»¥åŠå…¶å®ƒå®æ—¶é€šä¿¡æ–¹å¼ï¼Œå¹¶å°è£…æˆäº†é€šç”¨çš„æ¥å£ï¼Œå¹¶ä¸”åœ¨æœåŠ¡ç«¯å®ç°äº†è¿™äº›å®æ—¶æœºåˆ¶çš„ç›¸åº”ä»£ç ã€‚
é¡µé¢åˆå§‹åŒ–æ—¶ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡ç«¯å»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œç”¨æ¥å‘é€äº‹ä»¶å’Œæ¥æ”¶äº‹ä»¶ã€‚æµè§ˆå™¨å’ŒæœåŠ¡ç«¯å»ºç«‹è¿æ¥åï¼ŒæœåŠ¡ç«¯ä¼šè§¦å‘ä¸€ä¸ªâ€œadduserâ€äº‹ä»¶ï¼ŒæŠŠå½“å‰ç”¨æˆ·æ·»åŠ åˆ°åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ä¸­ã€‚å½“ç”¨æˆ·ç¦»å¼€é¡µé¢æ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ªâ€œdeleteuserâ€äº‹ä»¶ï¼ŒæŠŠå½“å‰ç”¨æˆ·ä»åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ä¸­åˆ é™¤ã€‚ç”¨æˆ·Aå‘ç§ä¿¡ç»™ç”¨æˆ·Bæ—¶ï¼ŒæœåŠ¡ç«¯æ¥æ”¶åˆ°â€œprivatemsgâ€äº‹ä»¶ï¼Œä¼šæŠŠè¯¥ä¿¡æ¯å­˜å‚¨åˆ°æ•°æ®åº“ã€‚åŒæ—¶ï¼Œå¦‚æœç”¨æˆ·Båœ¨çº¿ï¼Œåˆ™è§¦å‘ç”¨æˆ·Bçš„æµè§ˆå™¨çš„â€œsendbackâ€äº‹ä»¶ï¼ŒæŠŠä¿¡æ¯å‘é€ç»™ç”¨æˆ·Bçš„æµè§ˆå™¨ã€‚ç”¨æˆ·Bçš„æµè§ˆå™¨æ¥æ”¶åˆ°â€œsendbackâ€äº‹ä»¶ï¼Œè¯´æ˜æ”¶åˆ°äº†æ–°çš„æ¶ˆæ¯ï¼Œè¯¥æ¶ˆæ¯å®æ—¶æ’å…¥åˆ°èŠå¤©å¯¹è¯æ¡†ã€‚
ä»£ç js// å³æ—¶é€šè®¯// å»ºç«‹è¿æ¥var socket = io.connect();var from_user = $(&#x27;#from-user&#x27;).val();socket.emit(&quot;adduser&quot;,from_user,function(data)&#123;    console.log(data);&#125;);// å‘é€æ¶ˆæ¯var from_user = $(&#x27;#from-user&#x27;).val();var to_user = friend_id;var content = $(&#x27;#chat .reply-content&#x27;).val();var data = &#123;    from_user: from_user,    to_user: to_user,    content: content&#125;;socket.emit(&quot;privatemsg&quot;,data,function(data)&#123;    console.log(data);&#125;);// æ¥å—æ¶ˆæ¯socket.on(&quot;sendback&quot;,function(data)&#123;    console.log(data);&#125;);// æ–­å¼€è¿æ¥window.onunload = function()&#123;    console.log(&#x27;åˆ é™¤ç”¨æˆ·&#x27;);    var from_user = $(&#x27;#from-user&#x27;).val();    socket.emit(&#x27;deleteuser&#x27;,from_user,function(data)&#123;        console.log(data);    &#125;);&#125;


Nodeç«¯var User = require(&#x27;./models/user-model&#x27;);var Message = require(&#x27;./models/message-model&#x27;);var FriendCollect = require(&#x27;./models/friend-collect-model&#x27;);//var mongoose = require(&#x27;mongoose&#x27;);//mongoose.connect(&#x27;mongodb://localhost/forum&#x27;);var users = &#123;&#125;;var socket_event = function(socket) &#123;    socket.on(&#x27;disconnect&#x27;, function () &#123;        //console.log(&#x27;user disconnected&#x27;);    &#125;);    socket.on(&quot;adduser&quot;, function (from_user, callback) &#123;        if (from_user in users) &#123;            users[from_user] = socket;            callback(true);        &#125; else &#123;            socket.user_id = from_user;            users[socket.user_id] = socket;            callback(true);        &#125;    &#125;);    socket.on(&#x27;deleteuser&#x27;, function (from_user, callback) &#123;        if (from_user in users) &#123;            delete users[from_user];            callback(true);        &#125;    &#125;);    socket.on(&quot;privatemsg&quot;, function (data, callback) &#123;        var param = &#123;            from_user: data.from_user,            to_user: data.to_user,            content: data.content        &#125;;        var message = new Message(param);        message.save();        if (data.to_user in users) &#123;            User.findById(data.from_user,function(err,user)&#123;                users[data.to_user].emit(&#x27;sendback&#x27;, &#123;&#x27;content&#x27;: data.content,&#x27;friend&#x27;:user&#125;);                callback(true);            &#125;);        &#125; else &#123;            callback(&#x27;å¯¹æ–¹æœªç™»å½•ï¼Œå·²ç•™è¨€&#x27;);        &#125;    &#125;);&#125;module.exports = socket_event;

æºç https://github.com/voidking/nodeforum/blob/master/views/message/message.htmlhttps://github.com/voidking/nodeforum/blob/master/public/js/message/message.jshttps://github.com/voidking/nodeforum/blob/master/app.jshttps://github.com/voidking/nodeforum/blob/master/socket-event.js
å‚è€ƒæ–‡æ¡£Socket.IOå®˜ç½‘http://socket.io/
Socke.IOé¡¹ç›®åœ°å€https://github.com/socketio/socket.io
åœ¨çº¿èŠå¤©Demohttp://chat.socket.io/http://socket.io/get-started/chat/
Socket.IO APIhttp://socket.io/docs/
Nodejs Socket.io å‘é€ç§ä¿¡http://www.jenkihuang.com/job/2015/10/nodejs-socket-io-privatemsg.html
Socket.IO å’Œ Node.js å…¥é—¨http://www.oschina.net/question/12_54009/?fromerr=pCDquuQy
Socket.io:æœ‰ç‚¹æ„æ€http://www.cnblogs.com/edwardstudy/p/4358202.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>node</tag>
        <tag>æ¯•è®¾</tag>
        <tag>socketio</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨ç™¾åº¦åœ°å›¾å®ç°å‘å¸–æ—¶çš„å®šä½</title>
    <url>/dev-graduation-project-baidumap/</url>
    <content><![CDATA[åŠŸèƒ½æè¿°åœ¨å‘å¸ƒå¸–å­ç•Œé¢ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©æ˜¯å¦åœ¨å‘å¸ƒå¸–å­æ—¶æ˜¾ç¤ºä½ç½®ã€‚ä½ç½®å›¾æ ‡é»˜è®¤ç°è‰²ï¼Œä¸æ˜¾ç¤ºä½ç½®ï¼›ç”¨æˆ·é€‰æ‹©ä½ç½®åï¼Œä½ç½®å›¾æ ‡å˜æˆç»¿è‰²ï¼ŒåŒæ—¶æŠŠä½ç½®ä¿¡æ¯æ˜¾ç¤ºåœ¨å‘å¸ƒå¸–å­ç•Œé¢ä¸Šã€‚



åŸç†ç™¾åº¦åœ°å›¾ï¼Œæä¾›äº†å››ç§å®šä½çš„æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯æ ¹æ®æµè§ˆå™¨å®šä½ã€æ ¹æ®IPå®šä½ã€æ ¹æ®åŸå¸‚åå®šä½ã€æ ¹æ®ç»çº¬åº¦å®šä½ã€‚æœ¬åŠŸèƒ½æ¨¡å—ä¸­ï¼Œé‡‡ç”¨æ ¹æ®æµè§ˆå™¨å®šä½çš„æ–¹å¼ã€‚
æµè§ˆå™¨é€šè¿‡jsè¯·æ±‚ç™¾åº¦åœ°å›¾APIï¼Œè·å–åˆ°åœ°å€ä¿¡æ¯åï¼Œå‘é€ç»™æˆ‘çš„æœåŠ¡å™¨ã€‚
ä»£ç htmlå¼•å…¥ç™¾åº¦åœ°å›¾apiï¼Œå®šä¹‰ä¸€ä¸ªidï¼Œç”¨æ¥åˆå§‹åŒ–BMapã€‚
&lt;script type=&quot;text/javascript&quot; src=&quot;http://api.map.baidu.com/api?v=2.0&amp;ak=BC46e2b24290dba4d0267e2430f512fe&quot;&gt;&lt;/script&gt;&lt;div id=&quot;allmap&quot; style=&quot;display: none;&quot;&gt;&lt;/div&gt;

jsæ–°å»ºBMapå¯¹è±¡ï¼Œç»™ä¸€ä¸ªåˆå§‹åŒ–åæ ‡ï¼Œç„¶åæµè§ˆå™¨é€šè¿‡ç™¾åº¦åœ°å›¾APIè·å–åˆ°ä½ç½®ä¿¡æ¯ï¼Œè·å–åˆ°ä½ç½®ä¿¡æ¯åï¼Œå’Œå¸–å­çš„å…¶ä»–ä¿¡æ¯ä¸€èµ·ï¼Œå‘é€ç»™æœåŠ¡ç«¯ã€‚
// ç™¾åº¦åœ°å›¾å®šä½var baidu_position = &#123;&#125;;var map = new BMap.Map(&quot;allmap&quot;);var point = new BMap.Point(118.895144,31.92596);map.centerAndZoom(point,12);var geolocation = new BMap.Geolocation();geolocation.getCurrentPosition(function(r)&#123;    if(this.getStatus() == BMAP_STATUS_SUCCESS)&#123;        var mk = new BMap.Marker(r.point);        map.addOverlay(mk);        map.panTo(r.point);        //alert(&#x27;æ‚¨çš„ä½ç½®ï¼š&#x27;+r.point.lng+&#x27;,&#x27;+r.point.lat);        console.log(r);        baidu_position = r;    &#125;    else &#123;        alert(&#x27;failed&#x27;+this.getStatus());    &#125;&#125;,&#123;enableHighAccuracy: true&#125;)

æºç https://github.com/voidking/nodeforum/blob/master/public/js/post/post-add.js
ä¹¦ç­¾ç™¾åº¦åœ°å›¾APIhttp://developer.baidu.com/map/reference/
ç™¾åº¦åœ°å›¾APIç¤ºä¾‹http://developer.baidu.com/map/jsdemo.htm#d0_2
ç™¾åº¦LSB APIå¼€å‘æŒ‡å—http://developer.baidu.com/map/wiki/index.php?title=uri/api/web
æ‹¾å–åæ ‡ç³»ç»Ÿhttp://api.map.baidu.com/lbsapi/getpoint/index.html
æ ¹æ®æ ‡æ³¨ç‚¹åæ ‡èŒƒå›´è®¡ç®—æ˜¾ç¤ºç¼©æ”¾çº§åˆ«zoomè‡ªé€‚åº”æ˜¾ç¤ºåœ°å›¾http://www.aichengxu.com/view/2456553
ç™¾åº¦åœ°å›¾APIè¯¦è§£å’Œè¿ç”¨http://blog.csdn.net/binyao02123202/article/details/7955803
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>node</tag>
        <tag>æ¯•è®¾</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨ä¸ƒç‰›ç®¡ç†å›¾ç‰‡</title>
    <url>/dev-graduation-project-qiniu/</url>
    <content><![CDATA[åŠŸèƒ½æè¿°åœ¨å‘å¸ƒå¸–å­ç•Œé¢ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©å›¾ç‰‡ä¸Šä¼ ï¼Œå›¾ç‰‡ä¸Šä¼ æˆåŠŸåæ˜¾ç¤ºåœ¨å‘å¸ƒå¸–å­ç•Œé¢ä¸Šï¼Œä¸Šä¼ å¤±è´¥åˆ™æç¤ºâ€œä¸Šä¼ å¤±è´¥â€ã€‚


åŸç†ä¸ƒç‰›æ˜¯ä¸€ä¸ªä¼˜ç§€çš„äº‘å­˜å‚¨å¹³å°ï¼Œæä¾›å›¾ç‰‡ç›¸å…³çš„ç¼©ç•¥ã€å‰ªè£ã€æ·»åŠ æ°´å°ç­‰åŠŸèƒ½ã€‚æœ¬ç³»ç»Ÿçš„é‡å¿ƒåœ¨äºç¤¾åŒºè®ºå›ï¼Œæ‰€ä»¥å¤„ç†å›¾ç‰‡çš„å·¥ä½œå°±äº¤ç»™ä¸ƒç‰›äº†ï¼Œé¿å…é‡å¤é€ è½®å­ã€‚
åœ¨å‘å¸ƒå¸–å­é¡µé¢ï¼Œç”¨æˆ·é€‰æ‹©å›¾ç‰‡åï¼Œæµè§ˆå™¨è·å–åˆ°å›¾ç‰‡æ•°æ®imageDataï¼Œå‘é€ç»™æˆ‘çš„æœåŠ¡å™¨ï¼Œæˆ‘çš„æœåŠ¡å™¨è½¬å‘å›¾ç‰‡æ•°æ®ç»™ä¸ƒç‰›æœåŠ¡å™¨ã€‚ä¸Šä¼ æˆåŠŸåï¼Œä¸ƒç‰›æœåŠ¡å™¨è¿”å›æ•°æ®ç»™æˆ‘çš„æœåŠ¡å™¨ï¼Œæˆ‘çš„æœåŠ¡å™¨è¿”å›æ•°æ®ç»™æµè§ˆå™¨ã€‚
æµè§ˆå™¨è·å¾—è¿”å›æ•°æ®ï¼Œå¦‚æœè·å–åˆ°æœåŠ¡å™¨è¿”å›çš„çŠ¶æ€trueå’Œå›¾ç‰‡urlï¼Œåˆ™æŠŠå›¾ç‰‡æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚å¦åˆ™ï¼Œå°±æŠŠå‘ŠçŸ¥ç”¨æˆ·â€œä¸Šä¼ å¤±è´¥â€ã€‚
ä»£ç html&lt;div class=&quot;form-group&quot;&gt;    &lt;label for=&quot;picture&quot; class=&quot;col-sm-2 control-label&quot;&gt;å›¾ç‰‡&lt;/label&gt;    &lt;div class=&quot;col-sm-9&quot;&gt;        &lt;!--&lt;input id=&quot;image&quot;  type=&quot;file&quot; multiple&gt;--&gt;        &lt;input type=&quot;file&quot; id=&quot;picture&quot; style=&quot;display: none;&quot; /&gt;        &lt;span class=&quot;icon-picture&quot;&gt;&lt;/span&gt;        &lt;span class=&quot;icon-loading&quot;&gt;&lt;/span&gt;        &lt;span class=&quot;addimage&quot;&gt;æ·»åŠ å›¾ç‰‡&lt;/span&gt;    &lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;form-group&quot;&gt;    &lt;div class=&quot;col-sm-offset-2 col-sm-9&quot;&gt;        &lt;div class=&quot;pictures&quot;&gt;            &lt;!--åŠ¨æ€æ’å…¥å›¾ç‰‡--&gt;        &lt;/div&gt;    &lt;/div&gt;&lt;/div&gt;

js$(&#x27;.icon-picture&#x27;).click(function()&#123;    $(&#x27;#picture&#x27;).click();    $(&#x27;#picture&#x27;).unbind().on(&#x27;change&#x27;,function()&#123;        var fileNumber = $(&#x27;#picture&#x27;).get(0).files.length;        if(fileNumber==0)&#123;            return;        &#125;        var file = $(&#x27;#picture&#x27;).get(0).files[0];        console.log(file);        var fileReader = new FileReader();        fileReader.readAsDataURL(file);        fileReader.onload = function(e) &#123;//            var fileType = file.name.substring(file.name.lastIndexOf(&#x27;.&#x27;), file.name.length);//            var now = new Date();//            var fileName = now.getTime() + &#x27;langting&#x27; + parseInt(Math.random() * 20) + fileType;            $(&quot;.addimage&quot;).text(&quot;ä¸Šä¼ ä¸­...&quot;);            $(&#x27;.icon-picture&#x27;).hide();            $(&#x27;.icon-loading&#x27;).css(&#123;                &#x27;display&#x27;: &#x27;inline-block&#x27;            &#125;);            $.ajax(&#123;                type: &#x27;POST&#x27;,                dataType: &#x27;json&#x27;,                url: &#x27;/qn-upload&#x27;,                data: &#123;                    imageData: e.target.result                &#125;,                success: function(data) &#123;                    if (data.state == true) &#123;                        setTimeout(function() &#123;                            $(&quot;.addimage&quot;).text(&quot;æ·»åŠ å›¾ç‰‡&quot;);                            $(&#x27;.icon-loading&#x27;).hide();                            $(&#x27;.icon-picture&#x27;).show();                            var html = template(&#x27;pic_template&#x27;,data);                            $(&#x27;.pictures&#x27;).append(html);                        &#125;, 1500);                    &#125; else &#123;                        alert(&quot;ä¸Šä¼ å¤±è´¥&quot;);                    &#125;                &#125;,                error: function()&#123;                &#125;            &#125;);        &#125;    &#125;);&#125;);// åˆ é™¤å›¾ç‰‡$(&#x27;.pictures&#x27;).on(&#x27;click&#x27;,&#x27;.icon-delete&#x27;,function()&#123;    $(this).parents(&#x27;.pic&#x27;).remove();&#125;);

Nodeç«¯exports.qn_upload = function(req,res)&#123;    var qn = require(&#x27;qn&#x27;);    var client = qn.create(&#123;        accessKey: &#x27;JEBuh6qG9FPI6atoycgdoypwOZJWuzYk1YXnC-6c&#x27;,        secretKey: &#x27;IBAa_7Mkj2_ROefIRcwVjcVEK9PVFDvzrtPiL9nO&#x27;,        bucket: &#x27;forum&#x27;,        domain: &#x27;http://7xstti.com2.z0.glb.clouddn.com&#x27;    &#125;);    var imageData = req.body.imageData;    var key = uuid.v1();    imageData = imageData.replace(/^data:image\/\w+;base64,/, &quot;&quot;);    var dataBuffer = new Buffer(imageData, &#x27;base64&#x27;);    client.upload(dataBuffer, &#123;        key: key    &#125;, function(err, result) &#123;        if (err) &#123;            res.json(&#123;                state: false,                imgname: imageName,                imgurl: &quot;&quot;,                imghash: &quot;&quot;            &#125;);        &#125; else &#123;            res.json(&#123;                state: true,                imgname: result.key,                imgurl: result.url,                imghash: result.hash            &#125;);        &#125;    &#125;);&#125;

æºç https://github.com/voidking/nodeforum/blob/master/views/post/post-add.htmlhttps://github.com/voidking/nodeforum/blob/master/public/js/post/post-add.jshttps://github.com/voidking/nodeforum/blob/master/controllers/post.js
åè®°ä¸Šä¼ çš„äº¤äº’è¿‡ç¨‹ï¼Œæ˜¯å‰ç«¯æŠŠå›¾ç‰‡æ•°æ®ä¼ ç»™Nodeç«¯ï¼ŒNodeç«¯è½¬å‘å›¾ç‰‡æ•°æ®åˆ°ä¸ƒç‰›æœåŠ¡å™¨ã€‚ä¸ƒç‰›æœåŠ¡å™¨è¿”å›ç»“æœæ•°æ®ç»™Nodeç«¯ï¼ŒNodeç«¯è½¬å‘ç»“æœæ•°æ®ç»™å‰ç«¯ã€‚
è¿™ä¸ªè¿‡ç¨‹æ¯”è¾ƒéº»çƒ¦ï¼Œæ›´å¥½çš„åšæ³•ï¼Œæ˜¯å‰ç«¯èƒ½å¤Ÿç›´æ¥æŠŠå›¾ç‰‡æ•°æ®ä¼ ç»™ä¸ƒç‰›æœåŠ¡å™¨ï¼Œä¸ƒç‰›æœåŠ¡å™¨è¿”å›ç»“æœç»™å‰ç«¯ã€‚æŒ‰ç…§ä¸ƒç‰›ç»™çš„æ–‡æ¡£ï¼Œæ˜¯å¯ä»¥å®ç°çš„ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´è¯·ç ”è¯»ä¸ƒç‰›çš„ã€ŠJavaScript SDKä½¿ç”¨æŒ‡å—ã€‹ã€‚
ä¹¦ç­¾ä¸ƒç‰›å¼€å‘è€…ä¸­å¿ƒhttp://developer.qiniu.com/
JavaScript SDKä½¿ç”¨æŒ‡å—http://developer.qiniu.com/code/v6/sdk/javascript.html
ä¸ƒç‰› Node.js SDKhttps://www.npmjs.com/package/node-qiniu
Fileå¯¹è±¡ä¸Šä¼ å›¾ç‰‡ï¼ˆnodejsç‰ˆï¼‰http://www.html-js.com/article/NodejsDemoDemo-go
å›¾ç‰‡ä¸Šä¼ æ—¶input file changeäº‹ä»¶å¤šæ¬¡è§¦å‘è§£å†³http://www.aichengxu.com/view/78921
ç”¨jsè·å–ä¸Šä¼ å‰å›¾ç‰‡çš„å®½é«˜http://bbs.csdn.net/topics/390768571
HTML5 ä¹‹æ–‡ä»¶æ“ä½œ(file)http://blog.csdn.net/oscar999/article/details/37499743
Using files from web applicationshttps://developer.mozilla.org/en-US/docs/Using_files_from_web_applications
å›¾ç‰‡åŸºæœ¬å¤„ç† (imageView2)http://developer.qiniu.com/code/v6/api/kodo-api/image/imageview2.html
ä¿å­˜è£å‰ªåçš„å›¾ç‰‡çš„ç–‘é—®https://segmentfault.com/q/1010000003892579
base64ç™¾åº¦ç™¾ç§‘
å¥½æ–‡æ¨èï¼šç§»åŠ¨ç«¯å›¾ç‰‡æ ¼å¼è°ƒç ”http://www.cocoachina.com/ios/20151201/14478.html
Pluploadhttp://www.plupload.com/
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>node</tag>
        <tag>æ¯•è®¾</tag>
      </tags>
  </entry>
  <entry>
    <title>å“åº”å¼å¸ƒå±€</title>
    <url>/dev-graduation-project-responsive-layout/</url>
    <content><![CDATA[å‰è¨€å“åº”å¼å¸ƒå±€ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯åˆ©ç”¨CSS3çš„Media Queryï¼ˆåª’ä»‹æŸ¥è¯¢ï¼‰ï¼Œæ¥æ¢æµ‹è®¿é—®ç³»ç»Ÿçš„ç»ˆç«¯çš„å®½å’Œé«˜ç­‰å±æ€§ï¼Œå¹¶ä»¥æ­¤æ¥å†³å®šç»™ç”¨æˆ·å±•ç¤ºä»€ä¹ˆæ ·çš„é¡µé¢ã€‚
æ¯•è®¾çš„ç¤¾åŒºç½‘ç«™ç³»ç»Ÿè®¾è®¡äº†ä¸¤å¥—UIï¼Œä»¥768pxä¸ºä¸¤ç§UIçš„åˆ†å‰²ç‚¹ã€‚


ç•Œé¢å±•ç¤º
sass/* è¶…å°å±å¹•ï¼ˆæ‰‹æœºï¼Œå°äº 768pxï¼‰ */@media (max-width: 767px) &#123;&#125;/* å°å±å¹•ï¼ˆå¹³æ¿ï¼Œå¤§äºç­‰äº 768pxï¼‰ */@media (min-width: 768px) &#123;&#125;

æºç ï¼šhttps://github.com/voidking/nodeforum/blob/master/public/scss/partial/header.scss
ä¹¦ç­¾Bootstrap v3ä¸­æ–‡æ–‡æ¡£http://v3.bootcss.com/getting-started/#examples
Bootstrapä¸­æ–‡ç½‘å¼€æºé¡¹ç›®å…è´¹ CDN æœåŠ¡http://www.bootcdn.cn/
20åˆ†é’Ÿæ‰“é€ ä½ çš„Bootstrapç«™ç‚¹http://www.w3cplus.com/css/twitter-bootstrap-tutorial.html
ç¨‹åºå‘˜ä»¬æœ€çˆ±çš„12æ¬¾Bootstrapæ¨¡æ¿ ï¼http://www.chinaz.com/free/2014/0924/368583.shtml
15ä¸ªå¥½çœ‹çš„Bootstrap HTMLç½‘ç«™æ¨¡æ¿ä¸‹è½½http://www.shejidaren.com/bootstrap-mo-ban.html
æŠ˜è…¾å“åº”å¼å¸ƒå±€è®¾è®¡http://caibaojian.com/356.html
å“åº”å¼è®¾è®¡çš„æ€§èƒ½ä¼˜åŒ–http://www.jianshu.com/p/193911ee72e2
Bootstrap File Input Demohttp://plugins.krajee.com/file-basic-usage-demo
å½»åº•å¼„æ‡‚cssä¸­å•ä½pxå’Œem,remçš„åŒºåˆ«http://www.cnblogs.com/leejersey/p/3662612.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>node</tag>
        <tag>æ¯•è®¾</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”¨divæ¨¡æ‹Ÿinputå’Œtextarea</title>
    <url>/dev-simulate-input-by-div/</url>
    <content><![CDATA[å‰è¨€å…ˆçœ‹éœ€æ±‚ï¼šåœ¨è¾“å…¥è¯„è®ºçš„æ—¶å€™ï¼Œå½“è¯„è®ºé•¿åº¦è¶…è¿‡ä¸€è¡Œæ—¶ï¼Œè‡ªåŠ¨æ¢è¡Œï¼ŒåŒæ—¶è¯„è®ºæ¡†å˜é«˜ï¼Œæ•ˆæœå¦‚ä¸‹ã€‚
ç„¶è€Œï¼Œinputå¹¶æ²¡æœ‰è‡ªåŠ¨æ¢è¡Œå±æ€§ï¼Œä¹Ÿå°±æ— æ³•å®ç°è¿™ä¸ªæ•ˆæœï¼›ä½¿ç”¨textareaï¼Œå†™jsæ§åˆ¶rowï¼Ÿæƒ³æƒ³å°±ä¸å¤Ÿä¼˜é›…ï¼
ç»è¯„ä¼°ï¼Œä½¿ç”¨divæ¨¡æ‹Ÿè¾“å…¥æ¡†ï¼Œæ˜¯æœ€ä½³æ–¹æ¡ˆã€‚


html&lt;div class=&quot;input-body&quot;&gt;    &lt;div class=&quot;left&quot;&gt;        &lt;div class=&quot;input&quot;&gt;            &lt;p id=&quot;input-comment&quot; contenteditable=&quot;true&quot;&gt;&lt;/p&gt;            &lt;p id=&quot;input-placeholder&quot;&gt;è¯·è¾“å…¥è¯„è®ºå†…å®¹&lt;/p&gt;        &lt;/div&gt;                  &lt;/div&gt;    &lt;div class=&quot;right&quot;&gt;        &lt;span id=&quot;send&quot;&gt;å‘é€&lt;/span&gt;    &lt;/div&gt;  &lt;/div&gt;&lt;div class=&quot;input-body-back&quot;&gt;&lt;/div&gt;

scss.input-body&#123;    position: fixed;    border-top: 1px solid #e5e5e5;    border-bottom: 1px solid #e5e5e5;    width: 100%;    bottom: 0;    background: #f7f7f7;    font-size: 1.2rem;    .left&#123;        display: inline-block;        vertical-align: bottom;        width: 80%;        text-align: center;        padding: .5rem;        .input&#123;            position: relative;            #input-comment&#123;                display: inline-block;                width: 92%;                min-height: 2rem;                line-height: 2rem;                text-align: left;                padding: .2rem .5rem;                background: #fff;                border: 1px solid #e5e5e5;                border-radius: 3px;                outline: 0;            &#125;               #input-placeholder&#123;                position: absolute;                top: .5rem;                left: .8rem;                color: #8E8E93;            &#125;        &#125;           &#125;    .right&#123;        display: inline-block;        vertical-align: bottom;        width: 15%;        height: 2.5rem;        text-align: center;        font-weight: bold;        #send&#123;            margin-right: 1rem;            color: #8E8E93;            &amp;.active&#123;                color: #146AF3;            &#125;;        &#125;    &#125;&#125;.input-body-back&#123;    height: 4rem;&#125;

js$(&#x27;#input-comment&#x27;).on(&#x27;input propertychange&#x27;,function()&#123;    var str = $(this).html();    if(str == &#x27;&#x27;)&#123;        $(&#x27;#send&#x27;).removeClass(&#x27;active&#x27;);        $(&#x27;#input-placeholder&#x27;).show();    &#125;else&#123;        $(&#x27;#send&#x27;).addClass(&#x27;active&#x27;);        $(&#x27;#input-placeholder&#x27;).hide();    &#125;&#125;);$(&#x27;#send&#x27;).on(&#x27;click&#x27;,function()&#123;    if(!$(this).hasClass(&#x27;active&#x27;))&#123;        return;    &#125;    var comment = $(&#x27;#input-comment&#x27;).html();    if(comment.length &gt; 500)&#123;        alert(&#x27;å­—æ•°è¿‡å¤šï¼Œè¯·åˆ å‡&#x27;);        return;    &#125;    // ajaxè¯·æ±‚&#125;);


ä¹¦ç­¾divæ¨¡æ‹Ÿtextareaæ–‡æœ¬åŸŸè½»æ¾å®ç°é«˜åº¦è‡ªé€‚åº”http://www.zhangxinxu.com/wordpress/2010/12/div-textarea-height-auto/
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>css</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>JSè½¬æ¢HTMLè½¬ä¹‰ç¬¦</title>
    <url>/dev-escape-to-html/</url>
    <content><![CDATA[å»æ‰htmlæ ‡ç­¾function removeHtmlTab(tab) &#123;    return tab.replace(/&lt;[^&lt;&gt;]+?&gt;/g,&#x27;&#x27;);//åˆ é™¤æ‰€æœ‰HTMLæ ‡ç­¾&#125;



æ™®é€šå­—ç¬¦è½¬æ¢æˆè½¬æ„ç¬¦function html2Escape(sHtml) &#123;    return sHtml.replace(/[&lt;&gt;&amp;&quot;]/g,function(c)&#123;return &#123;&#x27;&lt;&#x27;:&#x27;&amp;lt;&#x27;,&#x27;&gt;&#x27;:&#x27;&amp;gt;&#x27;,&#x27;&amp;&#x27;:&#x27;&amp;amp;&#x27;,&#x27;&quot;&#x27;:&#x27;&amp;quot;&#x27;&#125;[c];&#125;);&#125;

è½¬æ„ç¬¦æ¢æˆæ™®é€šå­—ç¬¦function escape2Html(str) &#123;    var arrEntities=&#123;&#x27;lt&#x27;:&#x27;&lt;&#x27;,&#x27;gt&#x27;:&#x27;&gt;&#x27;,&#x27;nbsp&#x27;:&#x27; &#x27;,&#x27;amp&#x27;:&#x27;&amp;&#x27;,&#x27;quot&#x27;:&#x27;&quot;&#x27;&#125;;    return str.replace(/&amp;(lt|gt|nbsp|amp|quot);/ig,function(all,t)&#123;return arrEntities[t];&#125;);&#125;

&nbsp;è½¬æˆç©ºæ ¼function nbsp2Space(str) &#123;    var arrEntities = &#123;&#x27;nbsp&#x27; : &#x27; &#x27;&#125;;    return str.replace(/&amp;(nbsp);/ig, function(all, t)&#123;return arrEntities[t]&#125;)&#125;

å›è½¦è½¬ä¸ºbræ ‡ç­¾function return2Br(str) &#123;    return str.replace(/\r?\n/g,&quot;&lt;br /&gt;&quot;);&#125;

å»é™¤å¼€å¤´ç»“å°¾æ¢è¡Œfunction trimBr(str) &#123;    str=str.replace(/((\s|&amp;nbsp;)*\r?\n)&#123;3,&#125;/g,&quot;\r\n\r\n&quot;);//é™åˆ¶æœ€å¤š2æ¬¡æ¢è¡Œ    str=str.replace(/^((\s|&amp;nbsp;)*\r?\n)+/g,&#x27;&#x27;);//æ¸…é™¤å¼€å¤´æ¢è¡Œ    str=str.replace(/((\s|&amp;nbsp;)*\r?\n)+$/g,&#x27;&#x27;);//æ¸…é™¤ç»“å°¾æ¢è¡Œ    return str;&#125;

å°†å¤šä¸ªè¿ç»­ç©ºæ ¼åˆå¹¶æˆä¸€ä¸ªç©ºæ ¼function mergeSpace(str) &#123;    str=str.replace(/(\s|&amp;nbsp;)+/g,&#x27; &#x27;);    return str;&#125;

è½¬è½½è‡ª http://www.cnblogs.com/leejersey/p/4568092.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨Windowsä¸Šå®‰è£…mongodb</title>
    <url>/dev-install-mongodb-on-windows/</url>
    <content><![CDATA[ä¸‹è½½mongodbmongodbå®˜ç½‘ https://www.mongodb.com/download-center#community ï¼Œå¦‚æœä¸‹è½½msiç‰ˆæœ¬ï¼Œç›´æ¥æŒ‰ç…§æç¤ºå®‰è£…å³å¯ã€‚
å¦‚æœä¸‹è½½çš„æ˜¯zipç‰ˆæœ¬ï¼Œåˆ™å¾€ä¸‹æ¥ç€çœ‹ã€‚


æ–°å»ºæ–‡ä»¶å’Œæ–‡ä»¶å¤¹1ã€è§£å‹å®‰è£…åŒ…åˆ°å–œæ¬¢çš„ä½ç½®ï¼ŒéƒåŒå­¦è§£å‹åˆ°D:\Serverç›®å½•ä¸‹ï¼Œé‡å‘½åè§£å‹å‡ºæ¥çš„æ–‡ä»¶å¤¹ä¸ºmongodbã€‚
2ã€åœ¨mongodbæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºæ–‡ä»¶å¤¹dataï¼›åœ¨dataä¸‹æ–°å»ºæ–‡ä»¶å¤¹dbå’Œlogï¼›åœ¨logä¸‹æ–°å»ºæ–‡ä»¶mongodb.logã€‚
3ã€åœ¨mongodbæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºæ–‡ä»¶mongo.configï¼Œå†…å®¹å¦‚ä¸‹ï¼š
dbpath=D:\Server\mongodb\data\dblogpath=D:\Server\mongodb\data\log\mongodb.log  

å®‰è£…å‘½ä»¤ä½¿ç”¨ç®¡ç†å‘˜æ‰“å¼€cmdï¼Œè¾“å…¥å‘½ä»¤ï¼š
sc create mongodb binPath=&quot;D:\Server\mongodb\bin\mongod.exe --service --config=D:\Server\mongodb\mongo.config&quot;

è‡³æ­¤ï¼Œå®‰è£…ç»“æŸã€‚ä½¿ç”¨net start mongodbï¼Œæ£€æŸ¥èƒ½å¦æ­£å¸¸å¯åŠ¨ã€‚å¯åŠ¨åï¼Œä½¿ç”¨mongoï¼Œæ£€æŸ¥èƒ½å¦æ­£å¸¸è¿æ¥ã€‚
å¼€æœºè‡ªå¯åŠ¨å³å‡»è®¡ç®—æœºï¼Œç®¡ç†ï¼ŒæœåŠ¡ï¼Œå³å‡»mongodbï¼Œå±æ€§ï¼Œå¯åŠ¨ç±»å‹è®¾ç½®è‡ªåŠ¨ã€‚
åè®°é¡ºä¾¿æ¨èä¸ªmongodbå¯è§†åŒ–ç®¡ç†å·¥å…·â€”â€”Robomongoï¼Œç”¨èµ·æ¥å¾ˆé¡ºæ‰‹ã€‚å®˜æ–¹åœ°å€ï¼šhttps://robomongo.org/
]]></content>
      <categories>
        <category>engineering</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>mongodb</tag>
      </tags>
  </entry>
  <entry>
    <title>åŸºäºJQueryå®ç°æ»šåŠ¨åˆ°é¡µé¢åº•ç«¯æ—¶è‡ªåŠ¨åŠ è½½æ›´å¤šä¿¡æ¯</title>
    <url>/dev-auto-loading-when-scroll-to-the-bottom/</url>
    <content><![CDATA[è¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»äº†åŸºäºJQueryå®ç°æ»šåŠ¨åˆ°é¡µé¢åº•ç«¯æ—¶è‡ªåŠ¨åŠ è½½æ›´å¤šä¿¡æ¯ï¼Œç±»ä¼¼å¾®åšï¼Œæ–°æµªæ–°é—»çš„è¯„è®ºç­‰ï¼Œéƒ½é‡‡ç”¨äº†è¿™æ–¹æ³•,éœ€è¦çš„æœ‹å‹å¯ä»¥å‚è€ƒä¸‹å…³é”®ä»£ç ï¼š
var stop=true; $(window).scroll(function()&#123;     totalheight = parseFloat($(window).height()) + parseFloat($(window).scrollTop());     if($(document).height() &lt;= totalheight)&#123;         if(stop==true)&#123;             stop=false;             $.post(&quot;ajax.php&quot;, &#123;start:1, n:50&#125;,function(txt)&#123;                 $(&quot;#Loading&quot;).before(txt);                 stop=true;             &#125;,&quot;text&quot;);         &#125;     &#125; &#125;);



HTMLä»£ç å¦‚ä¸‹:
&lt;div id=&quot;Loading&quot;&gt;Loading...&lt;/div&gt;

å®ç°æ–¹æ³•æ˜¯æ¯”è¾ƒé¡µé¢æ€»é«˜åº¦å’Œä¸‹æ»šé«˜åº¦ä»¥åˆ¤æ–­æ˜¯å¦åˆ°è¾¾åº•ç«¯ï¼Œè‹¥åˆ°è¾¾åº•ç«¯åˆ™é€šè¿‡ajaxè¯»å–æ›´å¤šçš„å†…å®¹ï¼Œç”¨beforeæ’å…¥åˆ°Loadingä¹‹å‰ã€‚stopå‚æ•°æ˜¯è€ƒè™‘åˆ°ajaxè¯»å–è€—æ—¶ï¼Œé˜²æ­¢åœ¨ä¸€æ¬¡ajaxè¯»å–è¿‡ç¨‹ä¸­å¤šæ¬¡è§¦å‘äº‹ä»¶ï¼Œé€ æˆå¤šæ¬¡åŠ è½½å†…å®¹ã€‚
è½¬è½½è‡ªhttp://www.3lian.com/edu/2014/02-10/127916.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>jquery</tag>
      </tags>
  </entry>
  <entry>
    <title>MongoDBå…¥é—¨ç¯‡</title>
    <url>/dev-mongodb-start/</url>
    <content><![CDATA[MongoDBç®€ä»‹
MongoDB æ˜¯ä¸€ä¸ªæ–‡æ¡£æ•°æ®åº“ï¼Œæ—¨åœ¨ç®€åŒ–åº”ç”¨ç¨‹åºå¼€å‘å’Œæ‰©å±•ã€‚

mongodbé‡‡ç”¨æ–‡æ¡£å¼å­˜å‚¨ç»“æ„ï¼Œå­˜å‚¨ç»“æ„åˆ†ä¸ºå››ä¸ªå±‚æ¬¡ï¼šé”®å€¼å¯¹ã€æ–‡æ¡£ã€é›†åˆã€æ•°æ®åº“ã€‚æ–‡æ¡£æ•°æ®åº“å­˜å‚¨ç»“æ„çš„åŸºæœ¬å•ä½æ˜¯é”®å€¼å¯¹ï¼Œå…·ä½“åŒ…å«æ•°æ®å’Œç±»å‹ã€‚é”®å€¼å¯¹çš„æ•°æ®åŒ…å«é”®å’Œå€¼ï¼Œé”®çš„æ ¼å¼ä¸€èˆ¬ä¸ºå­—ç¬¦ä¸²ï¼Œå€¼çš„æ ¼å¼å¯ä»¥åŒ…å«å­—ç¬¦ä¸²ã€æ•°å€¼ã€æ•°ç»„ã€æ–‡æ¡£ç­‰ç±»å‹ã€‚æ–‡æ¡£æ˜¯mongodbçš„æ ¸å¿ƒæ¦‚å¿µï¼Œæ˜¯æ•°æ®çš„åŸºæœ¬å•å…ƒï¼Œæ–‡æ¡£çš„æ•°æ®ç»“æ„å’ŒjsonåŸºæœ¬ç›¸åŒï¼Œå®é™…å­˜å‚¨æ—¶æ˜¯bsonï¼ˆbinary jsonï¼‰ã€‚æ–‡æ¡£å­˜å‚¨åœ¨é›†åˆä¸­ï¼Œä¸€ä¸ªé›†åˆæ˜¯ç”±ä¸€äº›æ–‡æ¡£æ„æˆçš„å¯¹è±¡ã€‚æ–‡æ¡£ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“çš„è¡Œï¼Œé›†åˆç±»ä¼¼äºè¡¨ã€‚åŒä¸€ä¸ªé›†åˆå¯ä»¥æ’å…¥ä¸åŒæ ¼å¼çš„æ–‡æ¡£ï¼Œä½†æ˜¯é€šå¸¸æƒ…å†µä¸‹ä¸€ä¸ªé›†åˆä¸­çš„æ–‡æ¡£åº”è¯¥å…·æœ‰ç›¸å…³æ€§ã€‚æ•°æ®åº“åŒ…å«å¤šä¸ªé›†åˆï¼Œé€šå¸¸ä¸€ä¸ªåº”ç”¨çš„æ‰€æœ‰æ•°æ®å­˜å‚¨åˆ°åŒä¸€ä¸ªæ•°æ®åº“ã€‚
mongodbçš„æœ€å¤§ä¼˜ç‚¹æ˜¯éå¸¸é€‚åˆå±‚çº§å¼çš„æ•°æ®å­˜å‚¨ã€‚ä¸¾ä¸ªç®€å•ä¾‹å­ï¼Œæ¯”å¦‚Aå¯¹è±¡åŒ…å«Bå¯¹è±¡ï¼ŒBå¯¹è±¡åŒ…å«Cå¯¹è±¡ï¼Œå…³ç³»å‹æ•°æ®åº“åº”è¯¥ä¼šå­˜ä¸‰ä¸ªè¡¨ï¼ŒæŸ¥è¯¢æ—¶ä¹Ÿéœ€è¦ä¸‰ä¸ªè¡¨è¿›è¡Œå…³è”ã€‚è€Œæ–‡æ¡£æ•°æ®åº“å¯ä»¥æŠŠABCä¸‰ä¸ªå¯¹è±¡æŒ‰ç…§å±‚çº§å…³ç³»ä½œä¸ºä¸€ä¸ªæ–‡æ¡£å­˜å‚¨åˆ°ä¸€ä¸ªé›†åˆä¸­ï¼Œæ•´å­˜æ•´å–ã€‚æ­¤å¤–ï¼Œmongodbæ”¯æŒåˆ†å¸ƒå¼å­˜å‚¨ï¼Œå¯ä»¥æ»¡è¶³æµ·é‡æ•°æ®çš„å­˜å‚¨å’ŒæŸ¥è¯¢ã€‚
ç¼ºç‚¹ï¼š1ï¼‰ä¸æ”¯æŒäº‹åŠ¡ï¼›2ï¼‰keyå­—æ®µå ç”¨é¢å¤–ç©ºé—´
å‚è€ƒæ–‡æ¡£ï¼š

MongoDBå®˜æ–¹æ–‡æ¡£
MongoDBçš„æ–‡æ¡£å­˜å‚¨ç»“æ„
mongodbä¸mysqlç›¸æ¯”çš„ä¼˜ç¼ºç‚¹
k8s éƒ¨ç½² mongodb ä¸‰ç§æ¨¡å¼
mongodbçš„è®¤è¯(authentication)ä¸æˆæƒ(authorization)
MongoDBæ•°æ®å¯¼å‡ºå¯¼å…¥



å¸¸ç”¨å‘½ä»¤ç™»å½•æ•°æ®åº“#mongo --host localhost --port 27017mongo --host localhost --port 27017 -uroot -pmongo --host localhost --port 27017 -uroot -p --authenticationDatabase=admin

å…¶ä¸­authenticationDatabaseå‚æ•°æŒ‡å®šè®¤è¯æ•°æ®åº“ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤æ˜¯adminã€‚è¿™æ˜¯å› ä¸ºMongodbå…è®¸å­˜åœ¨å¤šä¸ªåŒåçš„ç”¨æˆ·å­˜åœ¨ï¼Œä½†åŒåçš„ç”¨æˆ·è®¤è¯dbå¿…é¡»ä¸èƒ½ç›¸åŒã€‚
æŸ¥çœ‹å¸®åŠ©help

æ“ä½œæ•°æ®åº“// æŸ¥çœ‹æ•°æ®åº“show dbs// åˆ‡æ¢æ•°æ®åº“ï¼ˆä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰use local// æŸ¥çœ‹å½“å‰æ•°æ®åº“db// é€€å‡ºexit

æ“ä½œè¡¨// æŸ¥çœ‹æœ‰å“ªäº›è¡¨show tablesshow collections// æ˜¾ç¤ºè¡¨ä¸­çš„å…¨éƒ¨å†…å®¹db.startup_log.find()db.startup_log.find().pretty()

æ“ä½œç”¨æˆ·å’Œæƒé™use admindb.createUser(&#123; user:&#x27;mongouser&#x27;,pwd:&#x27;thepasswordA1&#x27;,roles:[&#123; role:&#x27;readWrite&#x27;, db: &#x27;testdb&#x27;&#125;,&quot;readWriteAnyDatabase&quot;]&#125;);db.auth(&#x27;mongouser&#x27;, &#x27;thepasswordA1&#x27;)use testdb

å¯¼å‡ºå¯¼å…¥æ•°æ®æ•´åº“å¯¼å‡ºå¯¼å…¥# å¯¼å‡ºæ•°æ®åº“mongodump --host 10.66.187.127:27017 -u mongouser -p thepasswordA1 --authenticationDatabase=admin --db=testdb -o /data/dump_testdb# å¯¼å‡ºæ•°æ®åº“ï¼Œæ ¹æ®æç¤ºè¾“å…¥å¯†ç mongodump --host 10.66.187.127:27017 -u mongouser --authenticationDatabase=admin --db=testdb -o /data/dump_testdb# å¯¼å…¥æ•°æ®åº“mongorestore --host 10.66.187.127:27017 -u mongouser -p thepasswordA1 --authenticationDatabase=admin --dir=/data/dump_testdb

å•ä¸ªé›†åˆå¯¼å‡ºå¯¼å…¥# å¯¼å‡ºæ•°æ®é›†åˆmongoexport --host 10.66.187.127:27017 -u mongouser -p thepasswordA1 --authenticationDatabase=admin --db=testdb --collection=testcollection -o /data/export_testdb_testcollection.json# å¯¼å…¥æ•°æ®é›†åˆmongoimport --host 10.66.187.127:27017 -u mongouser -p thepasswordA1 --authenticationDatabase=admin --db=testdb --collection=testcollection2 --file=/data/export_testdb_testcollection.json

é‡ç½®å¯†ç bin mongoé‡ç½®å¯†ç 1ã€ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå–æ¶ˆç”¨æˆ·éªŒè¯
vim /etc/mongod.conf

æ³¨é‡Šæ‰ï¼š
#security:#  authorization: enabled

2ã€é‡å¯mongo
systemctl restart mongod

3ã€é‡ç½®å¯†ç 
mongo&gt; show dbs&gt; use admin&gt; db.system.users.find()&gt; db.changeUserPassword(&quot;admin&quot;,&quot;xxx&quot;)

4ã€å¼€å¯ç”¨æˆ·éªŒè¯ï¼Œé‡å¯mongo
docker mongoé‡ç½®å¯†ç 1ã€å¯åŠ¨é‡å¯å¯†ç å®¹å™¨
docker run -it --name mongo-repair -d --volumes-from mongo mongo:4.2.11 --noauth

2ã€è¿›å…¥å®¹å™¨
docker exec -it mongo-repair /bin/bash

3ã€é‡ç½®å¯†ç 
mongo&gt; show dbs&gt; use admin&gt; db.system.users.find()&gt; db.changeUserPassword(&quot;admin&quot;,&quot;xxx&quot;)

4ã€å¯åŠ¨åŸå®¹å™¨
docker stop mongo-repairdocker rm mongo-repairdocker start mongo-repair



]]></content>
      <categories>
        <category>engineering</category>
        <category>docker</category>
        <category>database</category>
        <category>storage</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>æ•°æ®åº“</tag>
        <tag>å­˜å‚¨</tag>
        <tag>mongodb</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨CentOSä¸Šæ­å»ºNodeç¯å¢ƒ</title>
    <url>/dev-install-node-in-centos/</url>
    <content><![CDATA[å‰è¨€æ¯•è®¾è¿›å…¥åˆ°äº†æœ€åé˜¶æ®µï¼ŒåŸºæœ¬åŠŸèƒ½éƒ½å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä¸€äº›åŠŸèƒ½çš„å®Œå–„å’Œbugçš„ä¿®æ”¹ã€‚ä»¥åŠï¼Œå¥½é•¿å¥½é•¿çš„è®ºæ–‡è¦å†™ã€‚ã€‚ã€‚å‹åŠ›æœ‰ç‚¹å¤§å“‡ï¼
ä¸ºäº†æ–¹ä¾¿åœ¨ç­”è¾©çš„æ—¶å€™è£…é€¼ï¼ŒéƒåŒå­¦å†³å®šæŠŠæ¯•è®¾ä¸Šçº¿åˆ°é˜¿é‡Œäº‘æœåŠ¡å™¨ã€‚


æ­¥éª¤å®‰è£…node1ã€ä½¿ç”¨xshellç™»é™†åˆ°é˜¿é‡Œäº‘æœåŠ¡å™¨ã€‚2ã€yum -y install gcc make gcc-c++ openssl-devel wget3ã€wget http://nodejs.org/dist/v6.1.0/node-v6.1.0.tar.gz4ã€tar -zvxf node-v6.1.0.tar.gz5ã€cd node-v6.1.06ã€./configure7ã€make &amp;&amp; make install8ã€node -v
å®‰è£…nodeæ–¹æ³•äºŒç¬¬ä¸€ç§å®‰è£…nodeçš„æ–¹æ³•ï¼ŒéƒåŒå­¦å¤±è´¥äº†ï¼Œå› ä¸ºç¼–è¯‘å‡ºé”™ã€‚é‚£ä¹ˆï¼Œè¯•è¯•ç¬¬äºŒç§æ–¹æ³•ã€‚1ã€yum install epel-release2ã€yum install nodejs3ã€yum install npm4ã€node -vå®‰è£…æˆåŠŸï¼ä½†æ˜¯ç‰ˆæœ¬æœ‰ç‚¹ä½ï¼Œ0.12.0ï¼Œå› ä¸ºæˆ‘æœ¬åœ°ä½¿ç”¨çš„5.6.0ï¼Œç‰ˆæœ¬ä¸åŒï¼Œä¼°è®¡ä¼šå‡ºé—®é¢˜å“‡ï¼
å®‰è£…mongodb1ã€wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.0.6.tgz 2ã€tar -zxvf mongodb-linux-x86_64-3.0.6.tgz3ã€mv  mongodb-linux-x86_64-3.0.6/ /usr/local/mongodb4ã€export PATH=&lt;mongodb-install-directory&gt;/bin:$PATHï¼Œå…¶ä¸­&lt;mongodb-install-directory&gt;ä¸º/usr/local/mongodbã€‚5ã€mkdir -p /data/db6ã€cd /usr/local/mongodb/binï¼Œmongodï¼Œè‡³æ­¤ï¼Œmongodbå·²ç»å®‰è£…æˆåŠŸå¹¶ä¸”å¯åŠ¨7ã€ä½¿ç”¨å¦ä¸€ä¸ªshellï¼Œcd /usr/local/mongodb/binï¼Œmongoï¼Œè¿æ¥æˆåŠŸï¼Œå¯ä»¥è¿›è¡Œæ•°æ®åº“çš„æ“ä½œäº†ã€‚
å¼€æœºè‡ªå¯åŠ¨mongodbvim /etc/rc.d/rc.localï¼Œæ’å…¥ä¸€è¡Œå¦‚ä¸‹ï¼š
/usr/local/mongodb/bin/mongod


å®‰è£…gityum install git
ä¸‹è½½é¡¹ç›®æŠŠæœ¬åœ°é¡¹ç›®ä¸Šä¼ åˆ°githubgit clone https://github.com/voidking/nodeforum.git
å®‰è£…éœ€è¦çš„ä¾èµ–1ã€npm install2ã€npm install bower -g3ã€bower installæœ‰æŠ¥é”™ï¼Œæ•´äº†åŠå¤©æ²¡æ•´å¥½ï¼Œåæ¥æ— ç¼˜æ— æ•…å¥½äº†ï¼Œå¤§å†™çš„è›‹ç–¼ã€‚
è¿è¡Œnode app.jsï¼ŒæŠ¥é”™ï¼Œä¸»è¦æ˜¯connect-mongoç‰ˆæœ¬é—®é¢˜ã€‚å¤§å“¥ï¼Œå‡ºé—®é¢˜æ‰æ­£å¸¸å¥½ä¸ï¼Œæ¯•ç«Ÿnodeç‰ˆæœ¬ç›¸å·®å¤ªå¤§ã€‚è¿˜æ˜¯æƒ³åŠæ³•å…ˆæŠŠnodeç‰ˆæœ¬ç»Ÿä¸€äº†ï¼Œè¿™æ‰æ˜¯æ­£é€”ï¼
å®‰è£…nodeæ–¹æ³•ä¸‰1ã€wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.31.1/install.sh | bash2ã€source ~/.bash_profile3ã€nvm list-remote4ã€nvm install v5.6.05ã€nvm list6ã€nvm use v5.6.07ã€nvm alias default v5.6.0
å†æ¬¡è¿è¡Œnode app.jsï¼Œå“ˆå“ˆï¼Œä¹‹å‰çš„æŠ¥é”™æ²¡æœ‰å•¦ï¼ç„¶åï¼Œæ¢äº†ä¸€ä¸ªæ–°çš„æŠ¥é”™ï¼Œæ— æ³•è¿æ¥åˆ°mongodbã€‚ä½¿ç”¨mongoå‘½ä»¤æ£€æŸ¥ä¸€ä¸‹ï¼ŒåŸæ¥æ˜¯æœåŠ¡å…³æ‰äº†ã€‚ä¸ºä»€ä¹ˆä¼šå…³æ‰å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬ä¹‹å‰çš„mongodbå¯åŠ¨æ–¹æ³•ä¸å¯¹ï¼åœ¨shellé‡Œå¯åŠ¨ï¼Œè‚¯å®šä¸é è°±å“‡ï¼å¥½å§ï¼Œæš‚æ—¶å…ˆå‹‰å¼ºç”¨ç€ï¼Œåœ¨shellé‡Œå†æ¬¡å¯åŠ¨mongodbã€‚node app.jsï¼Œå¯åŠ¨æˆåŠŸï¼æ‰“å¼€http://139.129.28.10:3000 ï¼Œçœ‹åˆ°äº†ç†Ÿæ‚‰çš„ç•Œé¢ï¼Œä¸Šçº¿æˆåŠŸï¼
mongodbæ·»åŠ è¿›æœåŠ¡1ã€mkdir -p /data/dbï¼Œmkdir -p /data/logï¼Œåœ¨/data/logä¸‹æ–°å»ºæ–‡ä»¶mongodb.logã€‚2ã€åœ¨/usr/local/mongodbä¸‹æ–°å»ºæ–‡ä»¶mongod.confï¼Œå†…å®¹å¦‚ä¸‹ï¼š
dbpath = /data/db #æ•°æ®æ–‡ä»¶å­˜æ”¾ç›®å½•logpath = /data/log/mongodb.log #æ—¥å¿—æ–‡ä»¶å­˜æ”¾ç›®å½•port = 27017  #ç«¯å£fork = true  #ä»¥å®ˆæŠ¤ç¨‹åºçš„æ–¹å¼å¯ç”¨ï¼Œå³åœ¨åå°è¿è¡Œ
3ã€åœ¨/ect/rc.d/init.dä¸‹æ–°å»ºæ–‡ä»¶mongodï¼Œå†…å®¹å¦‚ä¸‹ï¼š
#!/bin/sh## mongodb init file for starting up the MongoDB server## chkconfig: - 20 80# description: Starts and stops the MongDB daemon that handles all \# database requests.# Source function library.. /etc/rc.d/init.d/functionsexec=&quot;/usr/local/mongodb/bin/mongod&quot;prog=&quot;mongod&quot;logfile=&quot;/data/log/mongodb.log&quot;options=&quot; -f /usr/local/mongodb/mongod.conf&quot;[ -e /etc/sysconfig/$prog ] &amp;&amp; . /etc/sysconfig/$proglockfile=&quot;/var/lock/subsys/mongod&quot;start() &#123;[ -x $exec ] || exit 5echo -n $&quot;Starting $prog: &quot;daemon --user root &quot;$exec --quiet $options run &gt;&gt; $logfile 2&gt;&amp;1 &amp;&quot;retval=$?echo[ $retval -eq 0 ] &amp;&amp; touch $lockfilereturn $retval&#125;stop() &#123;echo -n $&quot;Stopping $prog: &quot;killproc $progretval=$?echo[ $retval -eq 0 ] &amp;&amp; rm -f $lockfilereturn $retval&#125;restart() &#123;stopstart&#125;reload() &#123;restart&#125;force_reload() &#123;restart&#125;rh_status() &#123;# run checks to determine if the service is running or use generic statusstatus $prog&#125;rh_status_q() &#123;rh_status &gt;/dev/null 2&gt;&amp;1&#125;case &quot;$1&quot; instart)rh_status_q &amp;&amp; exit 0$1;;stop)rh_status_q || exit 0$1;;restart)$1;;reload)rh_status_q || exit 7$1;;force-reload)force_reload;;status)rh_status;;condrestart|try-restart)rh_status_q || exit 0restart;;*)echo $&quot;Usage: $0 &#123;start|stop|status|restart|condrestart|try-restart|reload|force-reload&#125;&quot;exit 2esacexit $?

4ã€chmod 777 mongodï¼Œç»™mongodæ–‡ä»¶å¢åŠ æ‰§è¡Œæƒé™ã€‚5ã€service mongod startï¼ŒmongodbæœåŠ¡æˆåŠŸå¯åŠ¨ã€‚
nodeå®ˆæŠ¤è¿›ç¨‹1ã€å®‰è£…nohupï¼Œyum provides */nohupï¼Œyum install coreutils2ã€å¯åŠ¨æœåŠ¡ï¼Œnohup node app.js &amp;3ã€å…³é—­æœåŠ¡ï¼Œbgï¼Œfgï¼ŒCtrl+Cã€‚
åæ¥å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œnohup node app.js &amp;ï¼Œæ–­å¼€è¿æ¥åæœ‰æ—¶ä¼šå…³é—­è¿›ç¨‹ï¼Œæˆ–è€…è¾“å…¥å‘½ä»¤åä¸¤æ¬¡å›è½¦ä¹Ÿä¼šå…³é—­è¿›ç¨‹ã€‚æŸ¥çœ‹nohup.outæ–‡ä»¶ï¼Œå¥¥ï¼ŒåŸæ¥æ˜¯ä»£ç å‡ºé—®é¢˜äº†ï¼å¦‚æœä½¿ç”¨å‘½ä»¤nohup node app.js &gt; myout.file 2&gt;&amp;1 &amp;ï¼Œå°±æŸ¥çœ‹myout.fileæ–‡ä»¶ã€‚
è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œé€€å‡ºxshellçš„æ—¶å€™ï¼Œä¸è¦ç›´æ¥å…³é—­ï¼Œæœ€å¥½ä½¿ç”¨exitå‘½ä»¤ï¼Œå¦åˆ™æœ‰æ—¶ä¹Ÿä¼šå¯¼è‡´è¿›ç¨‹å…³é—­ã€‚
åè®°æŸ¥çœ‹CentOSç‰ˆæœ¬å‘½ä»¤ï¼šcat  /etc/redhat-releaseæŸ¥çœ‹ç«¯å£å ç”¨å‘½ä»¤ï¼šnetstat -apn | grep 27017æŸ¥çœ‹è¿›ç¨‹å‘½ä»¤ï¼šps -ef | grep mongodbï¼Œps aux | grep mongodbï¼Œtopç»“æŸè¿›ç¨‹å‘½ä»¤ï¼škill -9 [PID]
å‚è€ƒæ–‡æ¡£Centos å®‰è£… NodeJShttp://www.cnblogs.com/hamy/p/3632574.html
Node Downloadshttps://nodejs.org/en/download/current/
å¦‚ä½•åœ¨CentOS 7å®‰è£…Node.jshttp://www.linuxidc.com/Linux/2015-02/113554.htm
Linuxå¹³å°å®‰è£…MongoDBhttp://www.runoob.com/mongodb/mongodb-linux-install.html
CentOS6.5æºç å®‰è£…nodejs4.4http://www.centoscn.com/image-text/install/2016/0314/6839.html
åœ¨CentOS 7ä¸Šå®‰è£…Node.jsçš„4ç§æ–¹æ³•https://www.vmvps.com/4-ways-to-install-node-js-on-centos-7-servers.html
nvmé¡¹ç›®https://github.com/creationix/nvm
MongoDBåœ¨CentOS6ä¸‹çš„å®‰è£…ä»¥åŠæœåŠ¡å¯åŠ¨http://www.swmemo.com/2136.html
Linux å®ˆæŠ¤è¿›ç¨‹çš„å¯åŠ¨æ–¹æ³•http://www.ruanyifeng.com/blog/2016/02/linux-daemon.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>node</tag>
        <tag>centos</tag>
        <tag>æ¯•è®¾</tag>
        <tag>nvm</tag>
      </tags>
  </entry>
  <entry>
    <title>è¿ç§»åšå®¢ä»gitcafeåˆ°coding</title>
    <url>/dev-hexo-gitcafe-to-coding/</url>
    <content><![CDATA[å‰è¨€
GitCafe å·²åŠ å…¥ CODING æˆä¸º CODING çš„ä¸€å‘˜ï¼Œå…±åŒæ‰“é€ æœ€é€‚åˆä¸­å›½å¼€å‘è€…ä½¿ç”¨çš„ Git æœåŠ¡å¹³å°ï¼GitCafe å°†äº 2016å¹´5æœˆ31æ—¥ åœæ­¢æ‰€æœ‰æœåŠ¡ï¼Œå±Šæ—¶æ‚¨åœ¨ GitCafe çš„è´¦æˆ·èµ„æ–™åŠæ‰€æœ‰é¡¹ç›®éƒ½å°†è¢«æ°¸ä¹…åˆ é™¤ï¼Œè¯·å°½å¿«å°†æ‚¨çš„èµ„æ–™å’Œé¡¹ç›®è¿ç§»è‡³ Codingã€‚

å•Šå˜ï¼ŒéƒåŒå­¦çš„åšå®¢å°±åœ¨gitcafeä¸Šï¼Œå…ä¸äº†åˆè¦æŠ˜è…¾ä¸€ä¸‹äº†ï¼Œä¸‹é¢æˆ‘ä»¬å°±ç ”ç©¶ä¸€ä¸‹hexoæ‰˜ç®¡åˆ°codingçš„æ–¹æ³•ã€‚
é¡¹ç›®è¿ç§»é¦–å…ˆï¼Œæ³¨å†Œä¸€ä¸ªcodingè´¦æˆ·ï¼›ç„¶åï¼ŒæŒ‰ç…§æç¤ºï¼Œå…³è”gitcafeè´¦æˆ·ï¼Œé€‰æ‹©é¡¹ç›®è¿›è¡Œè¿ç§»ã€‚


Coding Pages æœåŠ¡Coding Pages æœåŠ¡ï¼Œæ˜¯ä¸€ä¸ªæ”¯æŒ jekyll é™æ€ç«™çš„æœåŠ¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ­å»ºé™æ€åšå®¢éœ€è¦çš„æœåŠ¡ã€‚1ã€è¿›å…¥å’Œç”¨æˆ·åç›¸åŒçš„é¡¹ç›®ä¸‹ï¼ˆéƒåŒå­¦ç”¨æˆ·åä¸ºvoidkingï¼Œé‚£ä¹ˆå°±è¿›å…¥voidkingé¡¹ç›®ï¼‰ï¼Œç‚¹å‡»Pagesã€‚
2ã€å¼€å¯æœåŠ¡ï¼Œå¹¶ä¸”ç»‘å®šéœ€è¦çš„åŸŸåã€‚
3ã€è®¿é—®http://voidking.coding.me/voidking ï¼Œ404é”™è¯¯ï¼Œæ­£å¸¸ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰coding-pagesåˆ†æ”¯ã€‚
4ã€ç‚¹å‡»åˆ†æ”¯ï¼Œæ–°å»ºåˆ†æ”¯ï¼Œè¾“å…¥åç§°ä¸ºcoding-pagesï¼Œè¾“å…¥èµ·ç‚¹ã€‚
5ã€åˆ†æ”¯åˆ›å»ºæˆåŠŸï¼Œè®¿é—®http://voidking.coding.me/voidking ï¼Œä¾ç„¶404ã€‚
6ã€ç‚¹å‡»Pagesï¼Œé‡æ–°éƒ¨ç½²ã€‚ç­‰å¾…åå¤šç§’ï¼Œå°±å¯ä»¥æ­£å¸¸è®¿é—®äº†ã€‚
åŸŸåè§£æåœ¨ä¸Šä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬å·²ç»åœ¨codingä¸Šç»‘å®šäº†åŸŸåã€‚ä½†æ˜¯ï¼Œè¦æƒ³é€šè¿‡åŸŸåè®¿é—®ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨è‡ªå·±çš„åŸŸåæœåŠ¡å™¨ä¸Šå®Œæˆè§£æã€‚ä»¥ä¸‡ç½‘ä¸ºä¾‹ï¼Œè§£æå¦‚ä¸‹ï¼šç„¶åï¼Œè®¿é—®http://voidking.com ï¼Œhttp://www.voidking.com ï¼Œhttp://blog.voidking.com ï¼Œå…¨éƒ¨æ­£å¸¸ã€‚
å‘å¸ƒåšå®¢å¯ä»¥æ­£å¸¸è®¿é—®äº†ï¼Œæ¥ä¸‹æ¥çš„é—®é¢˜æ˜¯ï¼Œå®ƒèƒ½ä¸èƒ½å’Œä¹‹å‰ä¸€æ ·ï¼Œä½¿ç”¨hexo då°±é‡æ–°éƒ¨ç½²å‘¢ï¼Ÿè¯•è¯•çœ‹ã€‚
è®¾ç½®_config.ymlåŸé…ç½®å¦‚ä¸‹ï¼š
deploy:  type: git  repository: git@gitcafe.com:voidking/voidking.git  branch: gitcafe-pages
ä¿®æ”¹å¦‚ä¸‹ï¼š
deploy:  type: git  repository: https://git.coding.net/voidking/voidking.git  branch: coding-pages

æ·»åŠ SSH keyè¿›å…¥é¡¹ç›®ï¼Œè®¾ç½®ï¼Œéƒ¨ç½²å…¬é’¥ï¼Œæ–°å»ºéƒ¨ç½²å…¬é’¥ã€‚å¤åˆ¶C:\Users\Administrator\.ssh\id_rsa.pubä¸­çš„å†…å®¹ï¼Œç²˜è´´è¿›å»å³å¯ã€‚å…³äºå¯†é’¥çš„ç”Ÿæˆæ–¹æ³•ï¼Œå‚è§ã€ŠHexoç¯å¢ƒæ­å»ºã€‹ã€‚
å‘å¸ƒæµ‹è¯•hexo gï¼Œhexo dï¼Œæ ¹æ®æç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œç»“æœå¦‚ä¸‹ï¼š
$ hexo dINFO  Deploying: gitINFO  Clearing .deploy folder...INFO  Copying files from public folder...[master a7d185c] Site updated: 2016-05-13 11:56:08 568 files changed, 8448 insertions(+), 4942 deletions(-) create mode 100644 dev-npm-install/index.html create mode 100644 dev-gitcafe-to-coding/index.html create mode 100644 archives/2016/05/index.html create mode 100644 &quot;categories/\350\256\276\350\256\241\345\274\200\345\217\221/page/2/index.html&quot; rewrite page/40/index.html (74%) create mode 100644 page/59/index.html create mode 100644 tags/bower/index.html create mode 100644 tags/coding/index.html create mode 100644 tags/node/index.html create mode 100644 tags/npm/index.html create mode 100644 &quot;tags/\345\215\232\345\256\242/index.html&quot;Username for &#x27;https://git.coding.net&#x27;: voidkingPassword for &#x27;https://voidking@git.coding.net&#x27;:Branch master set up to track remote branch coding-pages from https://git.coding.net/voidking/voidking.git.To https://git.coding.net/voidking/voidking.git   f14ee2d..a7d185c  master -&gt; coding-pagesINFO  Deploy done: git
è®¿é—®http://www.voidking.com ï¼Œåˆ·æ–°ä¸‹ï¼Œå†åˆ·æ–°ä¸‹ã€‚ã€‚ã€‚niceï¼Œå†…å®¹å·²ç»æ›´æ–°ã€‚å¯è§ï¼Œhexo då‘½ä»¤åŒæ ·é€‚ç”¨äºcodingã€‚
åè®°å¦‚æœè¿‡äº†5æœˆ31å·ï¼Œè¿˜æ²¡æœ‰å®Œæˆè¿ç§»ï¼Œæ€ä¹ˆåŠï¼Ÿå‚è§å‚è€ƒæ–‡æ¡£çš„ã€ŠCoding Pages ä»‹ç»ã€‹ï¼Œæ­£å¸¸åˆ›å»ºé¡¹ç›®å°±å¯ä»¥äº†ã€‚
å‚è€ƒæ–‡æ¡£Coding Pages ä»‹ç»https://coding.net/help/doc/pages/index.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>åšå®¢</tag>
      </tags>
  </entry>
  <entry>
    <title>nodeä¾èµ–åŒ…çš„ç®¡ç†</title>
    <url>/dev-npm-install/</url>
    <content><![CDATA[å‰è¨€åœ¨ä½¿ç”¨nodeè¿›è¡Œå¼€å‘æ—¶ï¼Œæˆ‘ä»¬ä¼šç”¨åˆ°å¾ˆå¤šåŒ…ï¼ˆæ¨¡å—ã€ä¸­é—´ä»¶ï¼‰ï¼Œè€Œè¿™äº›åŒ…ï¼Œå¹¶ä¸æ˜¯éœ€è¦æˆ‘ä»¬ç»´æŠ¤çš„ï¼Œæ‰€ä»¥ï¼Œåªè¦è®°ä½åŒ…åå’Œç‰ˆæœ¬å·å°±å¤Ÿäº†ã€‚è€Œè¿™äº›åŒ…åå’Œç‰ˆæœ¬å·ç­‰ä¿¡æ¯ï¼Œå°±æ”¾åœ¨package.jsonæ–‡ä»¶é‡Œï¼Œè¯¥æ–‡ä»¶å°±ç±»ä¼¼äºMavenä¸­çš„pom.xmlã€‚
package.jsonæ–‡ä»¶ï¼Œå¯ä»¥æ‰‹åŠ¨ç¼–å†™ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨npm initå‘½ä»¤ç”Ÿæˆã€‚


npmå¸¸ç”¨å‘½ä»¤1ã€npm install module-name -gï¼Œå…¨å±€å®‰è£…ã€‚2ã€npm install module-name --saveï¼Œè‡ªåŠ¨æŠŠæ¨¡å—å’Œç‰ˆæœ¬å·æ·»åŠ åˆ°dependencieséƒ¨åˆ†ã€‚3ã€spm install module-name --save-dev è‡ªåŠ¨æŠŠæ¨¡å—å’Œç‰ˆæœ¬å·æ·»åŠ åˆ°devDependencieséƒ¨åˆ†ã€‚é‚£ä¹ˆï¼Œ2å’Œ3æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿæ ¹æ®å®˜æ–¹çš„è§£é‡Šï¼Œå°±æ˜¯è¯´åœ¨dependencieséƒ¨åˆ†ç”¨åˆ°çš„æ¨¡å—ï¼Œæ˜¯ä¸€äº›å¿…é¡»çš„æ¨¡å—ï¼›è€ŒdevDependenciesç”¨åˆ°çš„æ¨¡å—ï¼Œæ˜¯æˆ‘ä»¬åœ¨ç”Ÿäº§è¿‡ç¨‹ä¸­åšæµ‹è¯•ç”¨åˆ°çš„æ¨¡å—ã€‚å¦‚æœä½ æŠŠè‡ªå·±çš„ä»£ç æäº¤åˆ°äº†gitæœåŠ¡å™¨ï¼Œåˆ«äººä¸‹è½½äº†ä½ çš„ä»£ç ï¼Œç„¶ånpm installï¼Œä¸‹è½½æ‰€æœ‰ä¾èµ–çš„æ¨¡å—ï¼Œè¿™æ—¶ï¼Œdependenciesé‡Œçš„æ¨¡å—ä¼šä¸‹è½½ï¼ŒdevDependenciesé‡Œçš„æ¨¡å—ä¸ä¼šä¸‹è½½ã€‚
å¿˜è®°ä½¿ç”¨â€“saveè¡¥æ•‘npm initï¼Œæ ¹æ®æç¤ºå¯ä»¥åˆ›å»ºä¸€ä¸ªpackage.jsonæ–‡ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šè‡ªåŠ¨æŠŠå·²ç»å®‰è£…çš„æ¨¡å—å†™å…¥package.jsonçš„dependencieséƒ¨åˆ†ã€‚
å‡è®¾ï¼Œåœ¨ä¹‹åï¼Œæˆ‘ä»¬åˆå®‰è£…äº†å¾ˆå¤šæ¨¡å—ï¼Œä½†æ˜¯ï¼Œåœ¨å®‰è£…æ—¶ï¼Œä½¿ç”¨çš„å‘½ä»¤æ˜¯npm installï¼Œè€Œä¸æ˜¯npm install --saveã€‚è¿™æ—¶ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•ï¼Œå¯ä»¥ä¸€æ¬¡æ€§æŠŠæˆ‘ä»¬å®‰è£…çš„æ‰€æœ‰æ¨¡å—åå’Œç‰ˆæœ¬å·å†™å…¥package.jsonå‘¢ï¼Ÿ
éƒåŒå­¦æ‘¸ç´¢å‡ºæ¥ä¸€ä¸ªå¯è¡Œçš„åŠæ³•ï¼š1ã€æŠŠåŸå…ˆçš„package.jsonï¼ˆæ–‡ä»¶1ï¼‰æ‹·è´å‡ºæ¥ã€‚2ã€npm initï¼Œä¸åœå›è½¦è‡³æ–°çš„package.jsonï¼ˆæ–‡ä»¶2ï¼‰åˆ›å»ºå®Œæˆã€‚3ã€æŠŠæ–‡ä»¶2çš„dependencieséƒ¨åˆ†æ‹·è´è¦†ç›–åˆ°æ–‡ä»¶1çš„dependencieséƒ¨åˆ†ã€‚4ã€ä½¿ç”¨æ–‡ä»¶1è¦†ç›–æ–‡ä»¶2ã€‚5ã€npm lsï¼Œå¦‚æœæœ‰æŠ¥é”™ï¼Œè¯´æ˜è¿˜æœ‰ä¸ªåˆ«ä¾èµ–æ¨¡å—æ²¡æœ‰å†™è¿›package.jsonã€‚6ã€æ ¹æ®5çš„æç¤ºï¼Œæ‰‹åŠ¨ä¿®æ”¹package.jsonï¼›æˆ–è€…ï¼Œnpm install module-name --saveï¼ŒæŠŠæ²¡æœ‰å†™è¿›package.jsonçš„æ¨¡å—é‡æ–°å®‰è£…ä¸€æ¬¡ã€‚
gitå¿½ç•¥ä¸Šä¼ åœ¨ä¸»ç›®å½•ä¸‹æ–°å»º.gitignoreæ–‡ä»¶ï¼Œå†…å®¹æ ¼å¼å¦‚ä¸‹ï¼š1ã€æœ€å¸¸ç”¨
/node_modules/*/bower_components/*

2ã€åœ¨å·²å¿½ç•¥æ–‡ä»¶å¤¹ä¸­ä¸å¿½ç•¥æŒ‡å®šæ–‡ä»¶å¤¹
/node_modules/*!/node_modules/layer/

3ã€åœ¨å·²å¿½ç•¥æ–‡ä»¶å¤¹ä¸­ä¸å¿½ç•¥æŒ‡å®šæ–‡ä»¶
/node_modules/*!/node_modules/layer/layer.js
ã€æ³¨æ„é¡¹ã€‘æ³¨æ„å†™æ³• è¦å¿½ç•¥çš„æ–‡ä»¶å¤¹ä¸€å®šè¦ç»“å°¾ /* ï¼Œå¦åˆ™ä¸å¿½ç•¥è§„åˆ™å°†æ— æ³•ç”Ÿæ•ˆ
4ã€å…¶ä»–è§„åˆ™å†™æ³• (é™„)

ä»¥æ–œæ â€œ/â€å¼€å¤´è¡¨ç¤ºç›®å½•ï¼›

ä»¥æ˜Ÿå·â€œ*â€é€šé…å¤šä¸ªå­—ç¬¦ï¼›

ä»¥é—®å·â€œ?â€é€šé…å•ä¸ªå­—ç¬¦

ä»¥æ–¹æ‹¬å·â€œ[]â€åŒ…å«å•ä¸ªå­—ç¬¦çš„åŒ¹é…åˆ—è¡¨ï¼›

ä»¥å¹å·â€œ!â€è¡¨ç¤ºä¸å¿½ç•¥(è·Ÿè¸ª)åŒ¹é…åˆ°çš„æ–‡ä»¶æˆ–ç›®å½•ï¼›


åè®°bowerçš„ç”¨æ³•å’Œnpméå¸¸ç›¸ä¼¼ï¼Œä¸¤è€…å¯ä»¥å¯¹æ¯”ç€å­¦ä¹ å’Œè®°å¿†ã€‚
å‚è€ƒæ–‡æ¡£npm Documentationhttps://docs.npmjs.com/install
package.jsonhttps://docs.npmjs.com/files/package.json
gitæ·»åŠ  .ignore å¿½ç•¥http://www.thinksaas.cn/topics/0/487/487787.html  
.gitignore è§„åˆ™å†™æ³•http://my.oschina.net/longyuan/blog/521098
ç”¨package.jsonæ¥ç®¡ç†NPMé‡Œé¢çš„ä¾èµ–åŒ…
æ·˜å®npmé•œåƒhttp://npm.taobao.org/
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>node</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>Apacheä¸TomcatåŒºåˆ«è”ç³»</title>
    <url>/dev-apache-and-tomcat/</url>
    <content><![CDATA[æ¦‚è¿°Apache å’Œ Tomcat éƒ½æ˜¯webç½‘ç»œæœåŠ¡å™¨ï¼Œä¸¤è€…æ—¢æœ‰è”ç³»åˆæœ‰åŒºåˆ«ï¼Œåœ¨è¿›è¡ŒHTMLã€PHPã€JSPã€Perlç­‰å¼€å‘è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å‡†ç¡®æŒæ¡å…¶å„è‡ªç‰¹ç‚¹ï¼Œé€‰æ‹©æœ€ä½³çš„æœåŠ¡å™¨é…ç½®ã€‚
Apacheæ˜¯webæœåŠ¡å™¨ï¼ˆé™æ€è§£æï¼Œå¦‚HTMLï¼‰ï¼Œtomcatæ˜¯javaåº”ç”¨æœåŠ¡å™¨ï¼ˆåŠ¨æ€è§£æï¼Œå¦‚JSPã€PHPï¼‰ã€‚
Tomcatåªæ˜¯ä¸€ä¸ªservlet(jspä¹Ÿç¿»è¯‘æˆservlet)å®¹å™¨ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯apacheçš„æ‰©å±•ï¼Œä½†æ˜¯å¯ä»¥ç‹¬ç«‹äºapacheè¿è¡Œã€‚
ä¸¤è€…ä»ä»¥ä¸‹å‡ ç‚¹å¯ä»¥æ¯”è¾ƒçš„ï¼š1ã€ä¸¤è€…éƒ½æ˜¯apacheç»„ç»‡å¼€å‘çš„2ã€ä¸¤è€…éƒ½æœ‰HTTPæœåŠ¡çš„åŠŸèƒ½3ã€ä¸¤è€…éƒ½æ˜¯å¼€æºå…è´¹çš„
è”ç³»1ï¼‰Apacheæ˜¯æ™®é€šæœåŠ¡å™¨ï¼Œæœ¬èº«åªæ”¯æŒhtmlå³æ™®é€šç½‘é¡µï¼Œå¯ä»¥é€šè¿‡æ’ä»¶æ”¯æŒphpï¼Œè¿˜å¯ä»¥ä¸Tomcatè¿é€š(Apacheå•å‘è¿æ¥Tomcatï¼Œå°±æ˜¯è¯´é€šè¿‡Apacheå¯ä»¥è®¿é—®Tomcatèµ„æºï¼Œåä¹‹ä¸ç„¶)ã€‚ã€€ã€€
2ï¼‰Apacheåªæ”¯æŒé™æ€ç½‘é¡µï¼Œä½†åƒaspã€jspã€phpã€cgiç­‰åŠ¨æ€ç½‘é¡µå°±éœ€è¦Tomcatæ¥å¤„ç†ã€‚
3ï¼‰Apacheå’ŒTomcatæ•´åˆä½¿ç”¨ï¼šå¦‚æœå®¢æˆ·ç«¯è¯·æ±‚çš„æ˜¯é™æ€é¡µé¢ï¼Œåˆ™åªéœ€è¦ApacheæœåŠ¡å™¨å“åº”è¯·æ±‚ï¼›å¦‚æœå®¢æˆ·ç«¯è¯·æ±‚åŠ¨æ€é¡µé¢ï¼Œåˆ™æ˜¯TomcatæœåŠ¡å™¨å“åº”è¯·æ±‚ï¼Œå°†è§£æçš„JSPç­‰ç½‘é¡µä»£ç è§£æåå›ä¼ ç»™ApacheæœåŠ¡å™¨ï¼Œå†ç»Apacheè¿”å›ç»™æµè§ˆå™¨ç«¯ã€‚è¿™æ˜¯å› ä¸ºjspæ˜¯æœåŠ¡å™¨ç«¯è§£é‡Šä»£ç çš„ï¼ŒTomcatåªåšåŠ¨æ€ä»£ç è§£æï¼ŒApacheå›ä¼ è§£æå¥½çš„é™æ€ä»£ç ï¼ŒApache+Tomcatè¿™æ ·æ•´åˆå°±å¯ä»¥å‡å°‘Tomcatçš„æœåŠ¡å¼€é”€ã€‚
4ï¼‰Apacheå’ŒTomcatæ˜¯ç‹¬ç«‹çš„ï¼Œåœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šå¯ä»¥é›†æˆã€‚
åŒºåˆ«Apacheæ˜¯æœ‰Cè¯­è¨€å®ç°çš„ï¼Œæ”¯æŒå„ç§ç‰¹æ€§å’Œæ¨¡å—ä»è€Œæ¥æ‰©å±•æ ¸å¿ƒåŠŸèƒ½ï¼›Tomcatæ˜¯Javaç¼–å†™çš„ï¼Œæ›´å¥½çš„æ”¯æŒServletå’ŒJSPã€‚1ã€Apacheæ˜¯WebæœåŠ¡å™¨ï¼ŒWebæœåŠ¡å™¨ä¼ é€(serves)é¡µé¢ä½¿æµè§ˆå™¨å¯ä»¥æµè§ˆï¼ŒWebæœåŠ¡å™¨ä¸“é—¨å¤„ç†HTTPè¯·æ±‚(request)ï¼Œä½†æ˜¯åº”ç”¨ç¨‹åºæœåŠ¡å™¨æ˜¯é€šè¿‡å¾ˆå¤šåè®®æ¥ä¸ºåº”ç”¨ç¨‹åºæä¾› (serves)å•†ä¸šé€»è¾‘(business logic)ã€‚Tomcatæ˜¯è¿è¡Œåœ¨Apacheä¸Šçš„åº”ç”¨æœåŠ¡å™¨ï¼Œåº”ç”¨ç¨‹åºæœåŠ¡å™¨æä¾›çš„æ˜¯å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºå¯ä»¥è°ƒç”¨(call)çš„æ–¹æ³• (methods)ã€‚å®ƒåªæ˜¯ä¸€ä¸ªservlet(jspä¹Ÿç¿»è¯‘æˆservlet)å®¹å™¨ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯Apacheçš„æ‰©å±•ï¼Œä½†æ˜¯å¯ä»¥ç‹¬ç«‹äºapacheè¿è¡Œã€‚
2ã€Apacheæ˜¯æ™®é€šæœåŠ¡å™¨ï¼Œæœ¬èº«åªæ”¯æŒhtmlé™æ€æ™®é€šç½‘é¡µã€‚ä¸è¿‡å¯ä»¥é€šè¿‡æ’ä»¶æ”¯æŒPHPï¼Œè¿˜å¯ä»¥ä¸Tomcatè¿é€š(å•å‘Apacheè¿æ¥Tomcat,å°±æ˜¯è¯´é€šè¿‡Apacheå¯ä»¥è®¿é—®Tomcatèµ„æºï¼Œåä¹‹ä¸ç„¶)ï¼ŒTomcatæ˜¯jsp/servletå®¹å™¨ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒHTMLã€JSPã€ASPã€PHPã€CGIç­‰ï¼Œå…¶ä¸­CGIéœ€è¦ä¸€äº›æ‰‹åŠ¨è°ƒè¯•ï¼Œä¸è¿‡å¾ˆå®¹æ˜“çš„ã€‚
3ã€Apacheä¾§é‡äºhttp serverï¼ŒTomcatä¾§é‡äºservletå¼•æ“ï¼Œå¦‚æœä»¥standaloneæ–¹å¼è¿è¡Œï¼ŒåŠŸèƒ½ä¸ŠTomcatä¸apacheç­‰æ•ˆæ”¯æŒJSPï¼Œä½†å¯¹é™æ€ç½‘é¡µä¸å¤ªç†æƒ³ã€‚
4ã€Apacheå¯ä»¥è¿è¡Œä¸€å¹´ä¸é‡å¯ï¼Œç¨³å®šæ€§éå¸¸å¥½ï¼Œè€ŒTomcatåˆ™ä¸è§å¾—ã€‚
5ã€é¦–é€‰webæœåŠ¡å™¨æ˜¯Apacheï¼Œä½†Apacheè§£æä¸äº†çš„jspã€servletæ‰ç”¨tomcatã€‚
6ã€Apacheæ˜¯å¾ˆæœ€å¼€å§‹çš„é¡µé¢è§£ææœåŠ¡ï¼Œtomcatæ˜¯åç ”å‘å‡ºæ¥çš„ï¼Œä»æœ¬è´¨ä¸Šæ¥è¯´tomcatçš„åŠŸèƒ½å®Œå…¨å¯ä»¥æ›¿ä»£Apacheï¼Œä½†Apacheæ¯•ç«Ÿæ˜¯tomcatçš„å‰è¾ˆçº§äººç‰©ï¼Œå¹¶ä¸”å¸‚åœºä¸Šä¹Ÿæœ‰ä¸å°‘äººè¿˜åœ¨ç”¨Apacheï¼Œæ‰€ä»¥Apacheè¿˜ä¼šç»§ç»­å­˜åœ¨ï¼Œä¸ä¼šè¢«å–ä»£ï¼Œapacheä¸èƒ½è§£æjavaçš„ä¸œè¥¿ï¼Œä½†è§£æhtmlé€Ÿåº¦å¿«ã€‚
ä¸¤è€…ä¾‹å­ï¼šApacheæ˜¯ä¸€è¾†è½¦ï¼Œä¸Šé¢å¯ä»¥è£…ä¸€äº›ä¸œè¥¿å¦‚htmlç­‰ï¼Œä½†æ˜¯ä¸èƒ½è£…æ°´ï¼Œè¦è£…æ°´å¿…é¡»è¦æœ‰å®¹å™¨ï¼ˆæ¡¶ï¼‰ï¼Œè€Œè¿™ä¸ªæ¡¶ä¹Ÿå¯ä»¥ä¸æ”¾åœ¨å¡è½¦ä¸Šï¼Œé‚£è¿™ä¸ªæ¡¶å°±æ˜¯TOMCATã€‚
ä¸¤è€…æ•´åˆï¼šApacheæ˜¯ä¸€ä¸ªwebæœåŠ¡å™¨ç¯å¢ƒç¨‹åºï¼Œå¯ç”¨ä»–å¯ä»¥ä½œä¸ºwebæœåŠ¡å™¨ä½¿ç”¨ä¸è¿‡åªæ”¯æŒé™æ€ç½‘é¡µï¼Œä¸æ”¯æŒåŠ¨æ€ç½‘é¡µï¼Œå¦‚aspã€jspã€phpã€cgi
å¦‚æœè¦åœ¨Apacheç¯å¢ƒä¸‹è¿è¡Œjspå°±éœ€è¦ä¸€ä¸ªè§£é‡Šå™¨æ¥æ‰§è¡Œjspç½‘é¡µï¼Œè€Œè¿™ä¸ªjspè§£é‡Šå™¨å°±æ˜¯Tomcatã€‚
é‚£ä¸ºä»€ä¹ˆè¿˜è¦JDKå‘¢ï¼Ÿå› ä¸ºjspéœ€è¦è¿æ¥æ•°æ®åº“çš„è¯å°±è¦jdkæ¥æä¾›è¿æ¥æ•°æ®åº“çš„é©±ç¨‹ï¼Œæ‰€ä»¥è¦è¿è¡Œjspçš„webæœåŠ¡å™¨å¹³å°å°±éœ€è¦APACHE+TOMCAT+JDKã€‚
æ•´åˆçš„å¥½å¤„ï¼š
å¦‚æœå®¢æˆ·ç«¯è¯·æ±‚çš„æ˜¯é™æ€é¡µé¢ï¼Œåˆ™åªéœ€è¦ApacheæœåŠ¡å™¨å“åº”è¯·æ±‚
å¦‚æœå®¢æˆ·ç«¯è¯·æ±‚åŠ¨æ€é¡µé¢ï¼Œåˆ™æ˜¯TomcatæœåŠ¡å™¨å“åº”è¯·æ±‚
å› ä¸ºjspæ˜¯æœåŠ¡å™¨ç«¯è§£é‡Šä»£ç çš„ï¼Œè¿™æ ·æ•´åˆå°±å¯ä»¥å‡å°‘Tomcatçš„æœåŠ¡å¼€é”€
è½¬è½½è‡ªï¼šhttp://www.admin10000.com/document/974.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>apache</tag>
        <tag>tomcat</tag>
      </tags>
  </entry>
  <entry>
    <title>artTemplateæ¨¡æ¿å¼•æ“</title>
    <url>/dev-arttemplate/</url>
    <content><![CDATA[å‰è¨€åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¸¸å¸¸è¦å®ç°è¿™æ ·ä¸€ç§æ•ˆæœï¼šè·å–æ•°æ®ï¼Œå¹¶ä¸”æ’å…¥åˆ°å½“å‰é¡µé¢ã€‚æœ€åŸºæœ¬çš„åšæ³•æ˜¯æŠŠè·å–åˆ°çš„æ•°æ®æ‹¼æ¥åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œç„¶åä½¿ç”¨html()æˆ–è€…append()å‡½æ•°æ’å…¥åˆ°é¡µé¢ä¸­ã€‚è¿™ç§åšæ³•ï¼Œæ‹¼æ¥å­—ç¬¦ä¸²æ—¶å¾ˆéº»çƒ¦ã€‚æœ¬æ–‡ä¸­ï¼ŒéƒåŒå­¦è¦ä»‹ç»ä¸€ä¸‹ArtTemplateï¼Œä¸€ä¸ªè¶…å¿«çš„å‰ç«¯æ¨¡æ¿å¼•æ“ã€‚


å¿«é€Ÿä¸Šæ‰‹ç¼–å†™æ¨¡æ¿&lt;script id=&quot;test&quot; type=&quot;text/html&quot;&gt;&lt;h1&gt;&#123;&#123;title&#125;&#125;&lt;/h1&gt;&lt;ul&gt;    &#123;&#123;each list as value i&#125;&#125;        &lt;li&gt;ç´¢å¼• &#123;&#123;i + 1&#125;&#125; ï¼š&#123;&#123;value&#125;&#125;&lt;/li&gt;    &#123;&#123;/each&#125;&#125;&lt;/ul&gt;&lt;/script&gt;

æ¸²æŸ“æ¨¡æ¿var data = &#123;    title: &#x27;æ ‡ç­¾&#x27;,    list: [&#x27;æ–‡è‰º&#x27;, &#x27;åšå®¢&#x27;, &#x27;æ‘„å½±&#x27;, &#x27;ç”µå½±&#x27;, &#x27;æ°‘è°£&#x27;, &#x27;æ—…è¡Œ&#x27;, &#x27;å‰ä»–&#x27;]&#125;;var html = template(&#x27;test&#x27;, data);document.getElementById(&#x27;content&#x27;).innerHTML = html;

æ¨¡æ¿è¯­æ³•æ³¨æ„ï¼šç®€æ´è¯­æ³•å’ŒåŸç”Ÿè¯­æ³•å¼•å…¥çš„jsæ–‡ä»¶ä¸åŒã€‚
ç®€æ´è¯­æ³•&#123;&#123;if admin&#125;&#125;    &#123;&#123;include &#x27;admin_content&#x27;&#125;&#125;    &#123;&#123;each list&#125;&#125;        &lt;div&gt;&#123;&#123;$index&#125;&#125;. &#123;&#123;$value.user&#125;&#125;&lt;/div&gt;    &#123;&#123;/each&#125;&#125;&#123;&#123;/if&#125;&#125;

åŸç”Ÿè¯­æ³•&lt;%if (admin)&#123;%&gt;    &lt;%include(&#x27;admin_content&#x27;)%&gt;    &lt;%for (var i=0;i&lt;list.length;i++) &#123;%&gt;        &lt;div&gt;&lt;%=i%&gt;. &lt;%=list[i].user%&gt;&lt;/div&gt;    &lt;%&#125;%&gt;&lt;%&#125;%&gt;

å‚è€ƒæ–‡æ¡£Arttemplate by auihttp://aui.github.io/artTemplate/
å‰ç«¯æ¨¡ç‰ˆartTemplateçš„ä»‹ç»åŠä½¿ç”¨http://blog.csdn.net/playboyanta123/article/details/45536501
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScriptæ¨¡æ¿å¼•æ“</title>
    <url>/dev-javascript-template-engine/</url>
    <content><![CDATA[å‰è¨€åç«¯æ¸²æŸ“å’Œå‰ç«¯æ¸²æŸ“ï¼Œåˆ†ç±»ä¾æ®åœ¨äºæµè§ˆå™¨åˆ°åº•åšäº†ä»€ä¹ˆäº‹æƒ…ã€‚
åç«¯æ¸²æŸ“HTMLçš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨ä¼šç›´æ¥æ¥æ”¶åˆ°ç»è¿‡æœåŠ¡å™¨è®¡ç®—ä¹‹åçš„å‘ˆç°ç»™ç”¨æˆ·çš„æœ€ç»ˆçš„HTMLå­—ç¬¦ä¸²ï¼Œè¿™é‡Œçš„è®¡ç®—å°±æ˜¯æœåŠ¡å™¨ç»è¿‡è§£æå­˜æ”¾åœ¨æœåŠ¡å™¨ç«¯çš„æ¨¡æ¿æ–‡ä»¶æ¥å®Œæˆçš„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨åªè¿›è¡Œäº†HTMLçš„è§£æï¼Œä»¥åŠé€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„æ“çºµæ˜¾ç¤ºå™¨æ˜¾ç¤ºå†…å®¹çš„ç³»ç»Ÿè°ƒç”¨åœ¨æ˜¾ç¤ºå™¨ä¸ŠæŠŠHTMLæ‰€ä»£è¡¨çš„å›¾åƒæ˜¾ç¤ºç»™ç”¨æˆ·ã€‚
å‰ç«¯æ¸²æŸ“å°±æ˜¯æŒ‡æµè§ˆå™¨ä¼šä»åç«¯å¾—åˆ°ä¸€äº›ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯æˆ–è®¸æ˜¯é€‚ç”¨äºé¢˜ä¸»æ‰€è¯´çš„angularjsçš„æ¨¡æ¿æ–‡ä»¶ï¼Œäº¦æˆ–æ˜¯JSONç­‰å„ç§æ•°æ®äº¤æ¢æ ¼å¼æ‰€åŒ…è£…çš„æ•°æ®ï¼Œç”šè‡³æ˜¯ç›´æ¥çš„åˆæ³•çš„HTMLå­—ç¬¦ä¸²ã€‚è¿™äº›å½¢å¼éƒ½ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯ï¼Œå°†è¿™äº›ä¿¡æ¯ç»„ç»‡æ’åˆ—å½¢æˆæœ€ç»ˆå¯è¯»çš„HTMLå­—ç¬¦ä¸²æ˜¯ç”±æµè§ˆå™¨æ¥å®Œæˆçš„ï¼Œåœ¨å½¢æˆäº†HTMLå­—ç¬¦ä¸²ä¹‹åï¼Œå†è¿›è¡Œæ˜¾ç¤ºã€‚
æ ¹æ®å‰åç«¯æ¸²æŸ“çš„ä¸åŒï¼Œæ¨¡æ¿å¼•æ“ä¹Ÿåˆ†ä¸ºä¸¤ç§ï¼Œåç«¯æ¨¡æ¿å¼•æ“å’Œå‰ç«¯æ¨¡æ¿å¼•æ“ã€‚è€Œå‰ç«¯æ¨¡æ¿å¼•æ“ï¼Œå°±æ˜¯æœ¬æ–‡è¦è¯´çš„JavaScriptæ¨¡æ¿å¼•æ“ã€‚


æ„å»ºè‡ªå·±çš„JavaScriptæ¨¡æ¿å°å¼•æ“htmléƒ¨åˆ†&lt;!doctype html&gt;&lt;html&gt;&lt;head&gt;   &lt;meta charset=utf-8&gt;   &lt;title&gt;Simple Templating&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;div class=&quot;result&quot;&gt;&lt;/div&gt;&lt;script type=&quot;template&quot; id=&quot;template&quot;&gt;    &lt;h2&gt;      &lt;a href=&quot;&#123;&#123;href&#125;&#125;&quot;&gt;        &#123;&#123;title&#125;&#125;      &lt;/a&gt;    &lt;/h2&gt;    &lt;img src=&quot;&#123;&#123;imgSrc&#125;&#125;&quot; alt=&quot;&#123;&#123;title&#125;&#125;&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;

ä»¿é€ ajaxè·å–çš„æ•°æ®var data = [    &#123;      title: &quot;Knockoutåº”ç”¨å¼€å‘æŒ‡å—&quot;,      href: &quot;http://www.cnblogs.com/TomXu/archive/2257154.html&quot;,      imgSrc: &quot;http://images.cnblogs.com/cnblogs_com/TomXu/339203/o_knockout2.jpg&quot;    &#125;,    &#123;      title: &quot;å¾®è½¯ASP.NETç«™ç‚¹éƒ¨ç½²æŒ‡å—&quot;,      href: &quot;http://www.cnblogs.com/TomXu/archive/2263050.html&quot;,      imgSrc: &quot;http://images.cnblogs.com/cnblogs_com/TomXu/339203/o_vs.jpg&quot;    &#125;,    &#123;      title: &quot;HTML5å­¦ä¹ ç¬”è®°ç®€æ˜ç‰ˆ&quot;,      href: &quot;http://www.cnblogs.com/TomXu/archive/2277499.html&quot;,      imgSrc: &quot;http://images.cnblogs.com/cnblogs_com/TomXu/339203/o_LearningHtml5.png&quot;    &#125;];

å˜é‡æ›¿æ¢æ–¹æ³•ä¸€template = document.querySelector(&#x27;#template&#x27;).innerHTML,result = document.querySelector(&#x27;.result&#x27;),i = 0, len = data.length,fragment = &#x27;&#x27;; for ( ; i &lt; len; i++ ) &#123;    fragment += template      .replace( /\&#123;\&#123;title\&#125;\&#125;/, data[i].title )      .replace( /\&#123;\&#123;href\&#125;\&#125;/, data[i].href )      .replace( /\&#123;\&#123;imgSrc\&#125;\&#125;/, data[i].imgSrc );&#125; result.innerHTML = fragment;

å˜é‡æ›¿æ¢æ–¹æ³•äºŒtemplate = document.querySelector(&#x27;#template&#x27;).innerHTML,result = document.querySelector(&#x27;.result&#x27;),attachTemplateToData; // å°†æ¨¡æ¿å’Œæ•°æ®ä½œä¸ºå‚æ•°ï¼Œé€šè¿‡æ•°æ®é‡Œæ‰€æœ‰çš„é¡¹å°†å€¼æ›¿æ¢åˆ°æ¨¡æ¿çš„æ ‡ç­¾ä¸Šï¼ˆæ³¨æ„ä¸æ˜¯éå†æ¨¡æ¿æ ‡ç­¾ï¼Œå› ä¸ºæ ‡ç­¾å¯èƒ½ä¸åœ¨æ•°æ®é‡Œå­˜åœ¨ï¼‰ã€‚attachTemplateToData = function(template, data) &#123;    var i = 0,        len = data.length,        fragment = &#x27;&#x27;;     // éå†æ•°æ®é›†åˆé‡Œçš„æ¯ä¸€ä¸ªé¡¹ï¼Œåšç›¸åº”çš„æ›¿æ¢    function replace(obj) &#123;        var t, key, reg; ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//éå†è¯¥æ•°æ®é¡¹ä¸‹æ‰€æœ‰çš„å±æ€§ï¼Œå°†è¯¥å±æ€§ä½œä¸ºkeyå€¼æ¥æŸ¥æ‰¾æ ‡ç­¾ï¼Œç„¶åæ›¿æ¢        for (key in obj) &#123;            reg = new RegExp(&#x27;&#123;&#123;&#x27; + key + &#x27;&#125;&#125;&#x27;, &#x27;ig&#x27;);            t = (t || template).replace(reg, obj[key]);        &#125;         return t;    &#125;     for (; i &lt; len; i++) &#123;        fragment += replace(data[i]);    &#125;     return fragment;&#125;; result.innerHTML = attachTemplateToData(template, data);

å‚è€ƒæ–‡æ¡£æœ€ç®€å•çš„JavaScriptæ¨¡æ¿å¼•æ“http://www.cnblogs.com/dolphinX/p/3489269.html
å¤§å”æ‰‹è®°ï¼ˆ7ï¼‰ï¼šæ„å»ºè‡ªå·±çš„JavaScriptæ¨¡æ¿å°å¼•æ“http://www.cnblogs.com/TomXu/archive/2284752.html
JavaScript Micro-Templatinghttp://ejohn.org/blog/javascript-micro-templating/
JavaScriptæ¨¡æ¿å¼•æ“åŸç†ï¼Œå‡ è¡Œä»£ç çš„äº‹å„¿http://www.cnblogs.com/hustskyking/p/principle-of-javascript-template.html
å…¨çƒæœ€å¿«çš„JSæ¨¡æ¿å¼•æ“https://cnodejs.org/topic/5490e8ca4823a0234c9e1767
Arttemplate by auihttp://aui.github.io/artTemplate/
laytplå®˜ç½‘http://laytpl.layui.com/
åç«¯æ¸²æŸ“htmlã€å‰ç«¯æ¨¡æ¿æ¸²æŸ“htmlï¼Œjqueryçš„htmlï¼Œå„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿhttp://www.zhihu.com/question/28725977/answer/42077482
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>CSSå®ç°æ–‡æœ¬æº¢å‡ºæ˜¾ç¤ºçœç•¥å·</title>
    <url>/dev-css-text-overflow-omit/</url>
    <content><![CDATA[å•è¡Œæ–‡æœ¬æº¢å‡ºæ˜¾ç¤ºçœç•¥å·width: 300px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;

å¦‚æœå­—ç¬¦ä¸²é•¿åº¦è¶…è¿‡300pxï¼Œé‚£ä¹ˆè¶…å‡ºéƒ¨åˆ†å°±å˜æˆ...ã€‚
å¤šè¡Œæ–‡æœ¬æº¢å‡ºæ˜¾ç¤ºçœç•¥å·display: -webkit-box;-webkit-box-orient: vertical;-webkit-line-clamp: 3;overflow: hidden;
å› ä¸ºä½¿ç”¨äº†WebKitçš„CSSæ‰©å±•å±æ€§ï¼Œè¯¥æ–¹æ³•é€‚ç”¨äºWebKitæµè§ˆå™¨åŠç§»åŠ¨ç«¯ï¼›
-webkit-line-clampç”¨æ¥é™åˆ¶åœ¨ä¸€ä¸ªå—å…ƒç´ æ˜¾ç¤ºçš„æ–‡æœ¬çš„è¡Œæ•°ã€‚ä¸ºäº†å®ç°è¯¥æ•ˆæœï¼Œå®ƒéœ€è¦ç»„åˆå…¶ä»–çš„WebKitå±æ€§ã€‚å¸¸è§ç»“åˆå±æ€§ï¼šdisplay: -webkit-box; å¿…é¡»ç»“åˆçš„å±æ€§ ï¼Œå°†å¯¹è±¡ä½œä¸ºå¼¹æ€§ä¼¸ç¼©ç›’å­æ¨¡å‹æ˜¾ç¤º ã€‚-webkit-box-orient å¿…é¡»ç»“åˆçš„å±æ€§ ï¼Œè®¾ç½®æˆ–æ£€ç´¢ä¼¸ç¼©ç›’å¯¹è±¡çš„å­å…ƒç´ çš„æ’åˆ—æ–¹å¼ ã€‚
æ€æ ·åœ¨jsä¸­åˆ¤æ–­æ–‡æœ¬æ˜¯å¦æº¢å‡ºé—®é¢˜æè¿°ï¼šä¸€æ®µæ–‡å­—é™å®šè¡Œæ•°ï¼Œä½¿ç”¨cssæŠŠå¤šä½™æ–‡å­—æ˜¾ç¤ºä¸ºçœç•¥å·ï¼Œè¯·é—®æ€ä¹ˆé€šè¿‡jsåˆ¤æ–­è¿™æ®µæ–‡å­—æ˜¯å¦æœ‰æ–‡å­—æ˜¾ç¤ºä¸ºçœç•¥å·ï¼Ÿ
æ€è·¯ä¸€ç‹æ™¨å¸…å“¥æä¾›äº†ä¸€ä¸ªæ€è·¯ï¼šå–æ¶ˆcssçš„-webkit-line-clampå±æ€§ï¼Œçœ‹çœ‹å…ƒç´ é«˜åº¦æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼Œå˜åŒ–äº†å°±æ˜¯æœ‰æ–‡å­—æ˜¾ç¤ºä¸ºçœç•¥å·ã€‚
å¥½æƒ³æ³•ï¼Œæœ€åéƒåŒå­¦æ”¹è¿›åå¦‚ä¸‹ï¼šè¿™æ®µæ–‡å­—åœ¨é¡µé¢ä¸Šæ”¾ä¸¤ä»½ï¼Œä¸€ä»½é™å®šè¡Œæ•°ï¼Œæ­£å¸¸æ˜¾ç¤ºï¼›å¦ä¸€ä»½ä¸é™å®šè¡Œæ•°ï¼Œéšè—èµ·æ¥ã€‚ç„¶åï¼Œå¯¹æ¯”è¿™ä¸¤æ®µæ–‡å­—çš„é«˜åº¦æ˜¯å¦ç›¸åŒã€‚å…·ä½“å®ç°ï¼š
// scsséƒ¨åˆ†.info&#123;    font-size: 1.2rem;    margin-top: .6rem;    display: -webkit-box;    -webkit-box-orient: vertical;    -webkit-line-clamp: 4;    overflow: hidden;    p&#123;        &amp;:not(:first-child)&#123;            margin-top: .4rem;        &#125;;          line-height: 1.8rem;    &#125;&#125;.info-hidden&#123;    position: fixed;    z-index: -10;    visibility: hidden;    font-size: 1.2rem;    margin-top: .6rem;    p&#123;        &amp;:not(:first-child)&#123;            margin-top: .4rem;        &#125;;          line-height: 1.8rem;    &#125;&#125;

// jséƒ¨åˆ†var $info = $(&#x27;.info&#x27;);var $info_hidden = $(&#x27;.info-hidden&#x27;);if($info.height() === $info_hidden.height())&#123;    $(&#x27;.more&#x27;).hide();&#125;

æ€è·¯äºŒåæ¥å¼ ä¼Ÿæ—å¸…å“¥æä¾›äº†ä¸€ä¸ªæ›´å¥½çš„æ€è·¯ï¼šæ—¢ç„¶å·²ç»çŸ¥é“äº†é™å®šçš„è¡Œæ•°ï¼Œé‚£ä¹ˆåˆ¤æ–­ä¸€ä¸ªé«˜åº¦å°±å¯ä»¥äº†ã€‚ç»“åˆline-heightï¼Œé«˜åº¦ç”¨scrollheightï¼Œåˆ¤æ–­scrollheight &gt; line-height*ä½ å†³å®šçš„è¡Œæ•°ã€‚
éƒåŒå­¦é©¬ä¸Šæœç´¢äº†ä¸€ä¸ªscrollheightï¼Œå‘ç°ï¼ŒåŸæ¥scrollHeightå¯ä»¥è¿”å›å…ƒç´ çš„å®Œæ•´é«˜åº¦ã€‚é‚£ä¹ˆï¼Œæ¯”è¾ƒä¸€ä¸‹scrollHeightå’Œheightä¸å°±å¯ä»¥äº†ä¹ˆï¼Ÿå…·ä½“å®ç°ï¼š
// jséƒ¨åˆ†var $info = $(&#x27;.info&#x27;);console.log($info.height());console.log($info[0].scrollHeight);if($info.height() &gt;= $info[0].scrollHeight)&#123;    $(&#x27;.more&#x27;).hide();&#125;

åè®°åˆ©ç”¨jsä¹Ÿå¯ä»¥å®ç°æ–‡æœ¬æº¢å‡ºæ˜¾ç¤ºçœç•¥å·ï¼Œå¯ä»¥å‚è€ƒä¹¦ç­¾ä¸­çš„dotdotdotï¼Œå¾ˆå½¢è±¡çš„åå­—ã€‚ã€‚ã€‚
ä¹¦ç­¾CSSå®ç°å•è¡Œã€å¤šè¡Œæ–‡æœ¬æº¢å‡ºæ˜¾ç¤ºçœç•¥å·ï¼ˆâ€¦ï¼‰http://www.daqianduan.com/6179.html
jQuery.dotdotdothttp://www.bootcdn.cn/jQuery.dotdotdot/
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>css</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>freemarkerå…¥é—¨</title>
    <url>/dev-freemarker/</url>
    <content><![CDATA[å‰è¨€æ˜¨å¤©ï¼ŒéƒåŒå­¦ä»‹ç»äº†ä¸€æ¬¾å‰ç«¯æ¨¡æ¿å¼•æ“artTemplateã€‚ä»Šå¤©ï¼Œä»‹ç»ä¸€æ¬¾åç«¯æ¨¡æ¿å¼•æ“freemarkerã€‚

Apache FreeMarker is a template engine: a Java library to generate text output (HTML web pages, e-mails, configuration files, source code, etc.) based on templates and changing data. 



åŸºæœ¬è¯­æ³•å®šä¹‰å’Œè¾“å‡º&lt;#assign answer=42/&gt;$&#123;answer&#125;
ç»“æœä¸ºï¼š42
åˆ†æ”¯è¯­å¥&lt;#assign age=23&gt;&lt;#if (age&gt;60)&gt;è€å¹´äºº&lt;#elseif (age&gt;40)&gt;ä¸­å¹´äºº&lt;#elseif (age&gt;20)&gt;é’å¹´äºº&lt;#else&gt; å°‘å¹´äºº&lt;/#if&gt;

å¾ªç¯è¯­å¥&lt;#list books as book&gt;    &lt;tr&gt;        &lt;td&gt;$&#123;book.name&#125;&lt;/td&gt;        &lt;td&gt;ä½œè€…:$&#123;book.author&#125;&lt;/td&gt;    &lt;/tr&gt;&lt;/#list&gt;

è¿ç®—å’Œå‡½æ•°&lt;#assign x=5&gt;$&#123; (x/2)?int &#125;$&#123; 1.1?int &#125;$&#123; 1.999?int &#125;$&#123; -1.1?int &#125;$&#123; -1.999?int &#125;
ç»“æœä¸º:2 1 1 -1 -1
æºç åˆ†äº«https://github.com/voidking/freemarker.git
å‚è€ƒæ–‡æ¡£FreeMarker Java Template Enginehttp://freemarker.org/
Download / Maven - Apache FreeMarkerhttp://freemarker.org/freemarkerdownload.html
Index (FreeMarker 2.3.24-incubating API)http://freemarker.org/docs/api/index-all.html
æ¨¡æ¿å¼•æ“freemarkerçš„ç®€å•ä½¿ç”¨æ•™ç¨‹http://blog.csdn.net/stormwy/article/details/26172353
FreeMarkerä½¿ç”¨è¯¦è§£http://www.open-open.com/lib/view/open1394860597743.html
Freemarkerç”±æµ…å…¥æ·±01-ç¯å¢ƒæ­å»ºã€æµ‹è¯•http://blog.csdn.net/it_wangxiangpan/article/details/17526869
ftlçš„ä½¿ç”¨http://blog.163.com/liuweiyoung@126/blog/static/1731310452012112755018198/
ã€FreeMarkerã€‘ã€æ¨¡æ¿æ–‡ä»¶FTLã€‘æ¨¡æ¿è‡ªå®šä¹‰æŒ‡ä»¤ macrohttp://blog.csdn.net/robinjwong/article/details/40427977
freemarkerçš„ä½¿ç”¨å¿ƒå¾—http://blog.csdn.net/walkcode/article/details/40707997
Freemarkerä¸­Configurationçš„setClassForTemplateLoadingæ–¹æ³•å‚æ•°é—®é¢˜http://www.cnblogs.com/fangjian0423/p/freemarker-templateloading-question.html
Servlet 3.0ç¬”è®°ä¹‹ä½¿ç”¨Freemarkeræ›¿ä»£JSPï¼Œæ›´å¿«æ›´è½»æ›´é«˜æ•ˆhttp://www.blogjava.net/yongboy/archive/346224.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>freemarker</tag>
      </tags>
  </entry>
  <entry>
    <title>æˆä¸ºä¸€ä¸ªæœ‰æ€æƒ³çš„äºº</title>
    <url>/essay-to-be-a-man-with-thought/</url>
    <content><![CDATA[å‰è¨€
ä¸æŠŠä¿¡æ¯å½“ä½œçŸ¥è¯†ï¼Œä¸æŠŠæ”¶è—å½“ä½œå­¦ä¹ ï¼Œä¸æŠŠé˜…è¯»å½“ä½œæ€è€ƒï¼Œä¸æŠŠå‚¨å­˜å½“ä½œæŒæ¡ã€‚ä¸æç‚¼æ€»ç»“ã€ä¸åº”ç”¨å­¦ä¹ ã€ä¸æ·±å…¥æ€è€ƒã€ä¸å®è·µåé¦ˆï¼Œå°±ä¸ä¼šå˜æˆè‡ªå·±çš„èƒ½åŠ›ã€‚

ä»€ä¹ˆæ˜¯æœ‰æ€æƒ³çš„äººï¼Ÿå¯¹ä¸€ä»¶äº‹ï¼Œæœ‰è‡ªå·±çš„è§‚ç‚¹ï¼Œæœ‰è‡ªå·±çš„è§è§£ï¼Œæœ‰ç†æœ‰æ®ï¼Œä»¤äººä¿¡æœã€‚
è¿‘æœ±è€…èµ¤è¿‘å¢¨è€…é»‘ï¼Œå’Œè¿™æ ·çš„äººåœ¨ä¸€èµ·ï¼Œèƒ½å¤Ÿæ„Ÿå—åˆ°TAçš„æ°”åœºï¼Œèƒ½å¤Ÿæ„Ÿå—åˆ°TAçš„èƒ½é‡ï¼Œèƒ½å¤Ÿæ„Ÿå—åˆ°æ”¶è·å’Œæˆé•¿ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

å››ç§æ€ç»´æ–¹å¼
ç‰›äººå’Œæ™®é€šäººçš„åŒºåˆ«åœ¨äºæ€ç»´æ–¹å¼ï¼
å¦‚ä½•æˆä¸ºæœ‰æƒ³æ³•çš„äººï¼Ÿå¦‚ä½•åŸ¹å…»ç‹¬ç«‹æ€è€ƒçš„èƒ½åŠ›ï¼Ÿ
æ–°é—»è”æ’­è¯¥å¦‚ä½•çœ‹ï¼Ÿ



å¦‚ä½•åšé‚£ä¹ˆï¼Œæ€æ ·æˆä¸ºä¸€ä¸ªæœ‰æ€æƒ³çš„äººï¼Ÿ
1ã€æé—®ä¸ºä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆä¸ï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿæ€æ ·å»åšï¼Ÿä½œè€…æƒ³è¡¨è¾¾ä»€ä¹ˆæ ·çš„è§‚ç‚¹ï¼Ÿè¿™ä¸ªæ–°é—»æƒ³è®©æˆ‘ä»¬ç›¸ä¿¡ä»€ä¹ˆï¼Ÿè¿™ä¸ªå¾®åšä¼ è¾¾äº†æœ‹å‹ä»€ä¹ˆæ ·çš„æƒ…ç»ªï¼Ÿ
2ã€æ‰¹åˆ¤çŸ¥é“è‡ªå·±çš„è§‚ç‚¹ï¼Œç†è§£æ–‡å­—ï¼ˆä¿¡æ¯ï¼‰ä¸­çš„è§‚ç‚¹ã€‚æ”¯æŒæˆ–åå¯¹ï¼Œæœ‰ç†æœ‰æ®ã€‚ç›¸ä¿¡æˆ–ä¸ä¿¡ï¼Œæ‰¾å‡ºåŸå› ã€‚
3ã€æƒ³è±¡æƒ³è±¡å’Œåˆ«äººèŠå¤©ï¼Œæƒ³è±¡æ¼”è®²ï¼Œæƒ³è±¡è¾©è®ºã€‚
åè®°ä¼šæ€è€ƒçš„äººä¸ä¼šæ— èŠï¼ä¿æŒå¥½å¥‡å¿ƒï¼Œå¤šé—®å¤šæƒ³å¤šè¯»ä¹¦ã€‚ä¹Ÿè®¸ç»ˆå…¶ä¸€ç”Ÿä¹Ÿæ— æ³•æˆä¸ºæœ‰æ€æƒ³çš„äººï¼Œä½†è‡³å°‘ï¼Œè¦æ¯”æ˜¨å¤©çš„è‡ªå·±æ›´å¥½ä¸€äº›ã€‚
]]></content>
      <categories>
        <category>essay</category>
      </categories>
      <tags>
        <tag>æ€è€ƒ</tag>
      </tags>
  </entry>
  <entry>
    <title>å‰ç«¯å¼€å‘å¸¸ç”¨æ’ä»¶</title>
    <url>/dev-front-end-plugin/</url>
    <content><![CDATA[å‰è¨€æœ€è¿‘åœ¨é˜…è¯»å…¬å¸å®˜ç½‘çš„å‰ç«¯ä»£ç ï¼Œä½¿ç”¨äº†å¾ˆå¤šæ’ä»¶ã€‚æŒ¨ä¸ªç™¾åº¦ï¼Œç®€å•è®°å½•ä¸‹ï¼Œçœ‹çœ‹ä»–ä»¬éƒ½æ˜¯å¹²ä»€ä¹ˆçš„ã€‚
jQuery UIjQuery UI APIä¸­æ–‡æ–‡æ¡£http://www.css88.com/jquery-ui-api/


SwiperSwiperæ˜¯çº¯javascriptæ‰“é€ çš„æ»‘åŠ¨ç‰¹æ•ˆæ’ä»¶ï¼Œé¢å‘æ‰‹æœºã€å¹³æ¿ç”µè„‘ç­‰ç§»åŠ¨ç»ˆç«¯ã€‚
Swiperèƒ½å®ç°è§¦å±ç„¦ç‚¹å›¾ã€è§¦å±Tabåˆ‡æ¢ã€è§¦å±å¤šå›¾åˆ‡æ¢ç­‰å¸¸ç”¨æ•ˆæœã€‚Swiperå¼€æºã€å…è´¹ã€ç¨³å®šã€ä½¿ç”¨ç®€å•ã€åŠŸèƒ½å¼ºå¤§ï¼Œæ˜¯æ¶æ„ç§»åŠ¨ç»ˆç«¯ç½‘ç«™çš„é‡è¦é€‰æ‹©ï¼
Swiperä¸­æ–‡ç½‘http://www.swiper.com.cn/
å®˜ç½‘http://www.idangero.us/swiper/
BlockUIjQuery BlockUI Pluginhttp://malsup.com/jquery/block/
blockui githubhttps://github.com/malsup/blockui/
jQueryé®ç½©æ’ä»¶jQuery.blockUI.jsç®€ä»‹http://bookshadow.com/weblog/jquery-blockui-js-introduction/
email-autocompleteemail-autocompletehttps://github.com/10w042/email-autocomplete
jQuery-AutocompletejQuery-Autocompletehttps://github.com/devbridge/jQuery-Autocomplete
chosenchosenhttps://github.com/harvesthq/chosen
Chosen (v1.4.2)http://harvesthq.github.io/chosen/
ajaxfileuploadjQueryæ’ä»¶ä¹‹ajaxFileUploadhttp://www.cnblogs.com/kissdodog/archive/2819025.html
html2canvashtml2canvashttp://www.bootcdn.cn/html2canvas/
ç™¾åº¦åœ°å›¾ç™¾åº¦åœ°å›¾APIhttp://lbsyun.baidu.com/
momentJavaScript æ—¥æœŸå¤„ç†ç±»åº“
Moment.jsä¸­æ–‡ç½‘http://momentjs.cn/
paginationjQuery Pagination pluginhttp://esimakin.github.io/twbs-pagination/
placeholderjquery-placeholderhttps://github.com/mathiasbynens/jquery-placeholder
romeromehttp://spmjs.io/package/rome
validationvalidationå®˜æ–¹æ–‡æ¡£http://jqueryvalidation.org/documentation
zeptoZepto is a minimalist JavaScript library for modern browsers with a largely jQuery-compatible API.
zeptoä¸­æ–‡ç½‘http://www.zeptojs.cn/
tooltipsterA powerful, flexible jQuery plugin enabling you to easily create semantic, modern tooltips enhanced with the power of CSS.
å®˜ç½‘http://iamceege.github.io/tooltipster/
lazyloadLazy Load Plugin for jQueryhttp://www.appelsiini.net/projects/lazyload
lazyloadé¡¹ç›®åœ°å€ï¼šhttps://github.com/tuupola/jquery_lazyload
MasonryMasonryå®˜ç½‘http://masonry.desandro.com/
mosonryé¡¹ç›®åœ°å€ï¼šhttps://github.com/desandro/masonry
imageLoadedimagesLoadedå®˜ç½‘http://imagesloaded.desandro.com/
imagesloadedé¡¹ç›®åœ°å€ï¼šhttps://github.com/desandro/imagesloaded
touch.jsTouch.jså®˜ç½‘http://touch.code.baidu.com/
iscrolliScrollå®˜ç½‘http://cubiq.org/iscroll-5
iScrollæ–‡æ¡£http://iscrolljs.com/
iScrollé¡¹ç›®åœ°å€https://github.com/cubiq/iscroll
ã€iScrollæºç å­¦ä¹ 00ã€‘æ¨¡æ‹ŸiScrollhttp://www.cnblogs.com/yexiaochai/p/3489676.html
åè®°ä¼˜ç‚¹ï¼šå¼€å‘æˆæœ¬ä½ã€æ—¶é—´çŸ­ï¼›ç¨³å®šæ€§ã€å…¼å®¹æ€§è‰¯å¥½ã€‚ç¼ºç‚¹ï¼šä¸æ‡‚åŸç†ï¼Œé‡åˆ°é—®é¢˜ä¸å¥½è§£å†³ã€‚
æä¾›ç»™å¼€å‘è€…çš„ 20 æ¬¾æœ€æ£’çš„ jQuery Bootstrap æ’ä»¶http://www.oschina.net/translate/20-best-jquery-bootstrap-plugins-for-developers
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>æ’ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>SASSä½¿ç”¨è¯´æ˜</title>
    <url>/dev-sass-guide/</url>
    <content><![CDATA[å‰è¨€
Sassï¼ŒSyntactically Awesome StyleSheetsã€‚Sass æ˜¯å¯¹ CSS çš„æ‰©å±•ï¼Œè®© CSS è¯­è¨€æ›´å¼ºå¤§ã€ä¼˜é›…ã€‚ å®ƒå…è®¸ä½ ä½¿ç”¨å˜é‡ã€åµŒå¥—è§„åˆ™ã€ mixinsã€å¯¼å…¥ç­‰ä¼—å¤šåŠŸèƒ½ï¼Œ å¹¶ä¸”å®Œå…¨å…¼å®¹ CSS è¯­æ³•ã€‚ Sass æœ‰åŠ©äºä¿æŒå¤§å‹æ ·å¼è¡¨ç»“æ„è‰¯å¥½ï¼Œ åŒæ—¶ä¹Ÿè®©ä½ èƒ½å¤Ÿå¿«é€Ÿå¼€å§‹å°å‹é¡¹ç›®ï¼Œ ç‰¹åˆ«æ˜¯åœ¨æ­é… Compass æ ·å¼åº“ä¸€åŒä½¿ç”¨æ—¶ã€‚



å®‰è£…1ã€ä¸‹è½½å®‰è£…ruby2ã€å®‰è£…å¥½rubyåï¼Œå†rubyå‘½ä»¤è¡Œä¸­è¾“å…¥gem install sass
è¯­æ³•å˜é‡sassä¸­å¯ä»¥å®šä¹‰å˜é‡ï¼Œæ–¹ä¾¿ç»Ÿä¸€ä¿®æ”¹å’Œç»´æŠ¤ã€‚
$fontStack:    Helvetica, sans-serif;$primaryColor: #333;body &#123;  font-family: $fontStack;  color: $primaryColor;&#125;

åµŒå¥—sasså¯ä»¥è¿›è¡Œé€‰æ‹©å™¨çš„åµŒå¥—ï¼Œè¡¨ç¤ºå±‚çº§å…³ç³»ï¼Œçœ‹èµ·æ¥å¾ˆä¼˜é›…æ•´é½ã€‚
nav &#123;  ul &#123;    margin: 0;    padding: 0;    list-style: none;  &#125;  li &#123; display: inline-block; &#125;  a &#123;    display: block;    padding: 6px 12px;    text-decoration: none`;  &#125;&#125;`ã€‚

å¯¼å…¥sassä¸­å¦‚å¯¼å…¥å…¶ä»–sassæ–‡ä»¶ï¼Œæœ€åç¼–è¯‘ä¸ºä¸€ä¸ªcssæ–‡ä»¶ï¼Œä¼˜äºçº¯cssçš„@importã€‚
// reset.scsshtml,body,ul,ol &#123;  margin: 0;  padding: 0;&#125;

@import &#x27;reset&#x27;;body &#123;  font-size: 100% Helvetica, sans-serif;  background-color: #efefef;&#125;

mixinsassä¸­å¯ç”¨mixinå®šä¹‰ä¸€äº›ä»£ç ç‰‡æ®µï¼Œä¸”å¯ä¼ å‚æ•°ï¼Œæ–¹ä¾¿æ—¥åæ ¹æ®éœ€æ±‚è°ƒç”¨ã€‚ä»æ­¤å¤„ç†css3çš„å‰ç¼€å…¼å®¹è½»æ¾ä¾¿æ·ã€‚
@mixin box-sizing ($sizing) &#123;    -webkit-box-sizing:$sizing;            -moz-box-sizing:$sizing;            box-sizing:$sizing;&#125;.box-border&#123;    border:1px solid #ccc;    @include box-sizing(border-box);&#125;

æ‰©å±•/ç»§æ‰¿sasså¯é€šè¿‡@extendæ¥å®ç°ä»£ç ç»„åˆå£°æ˜ï¼Œä½¿ä»£ç æ›´åŠ ä¼˜è¶Šç®€æ´ã€‚
.message &#123;  border: 1px solid #ccc;  padding: 10px;  color: #333;&#125;.success &#123;  @extend .message;  border-color: green;&#125;.error &#123;  @extend .message;  border-color: red;&#125;.warning &#123;  @extend .message;  border-color: yellow;&#125;

è¿ç®—sasså¯è¿›è¡Œç®€å•çš„åŠ å‡ä¹˜é™¤è¿ç®—ç­‰
.container &#123; width: 100%; &#125;article[role=&quot;main&quot;] &#123;  float: left;  width: 600px / 960px * 100%;&#125;aside[role=&quot;complimentary&quot;] &#123;  float: right;  width: 300px / 960px * 100%;&#125;

é¢œè‰²sassä¸­é›†æˆäº†å¤§é‡çš„é¢œè‰²å‡½æ•°ï¼Œè®©å˜æ¢é¢œè‰²æ›´åŠ ç®€å•ã€‚
$linkColor: #08c;a &#123;    text-decoration:none;    color:$linkColor;    &amp;:hover&#123;      color:darken($linkColor,10%);    &#125;&#125;

&amp;è¡¨ç¤ºå½“å‰å…ƒç´ ä¼ªç±»å’Œä¼ªå…ƒç´ åœ¨CSSä¸­æ˜¯å¸¸ç”¨çš„ä¸€ç§æ–¹å¼ï¼Œæ¯”å¦‚æœ€å¸¸è§çš„æ˜¯é“¾æ¥çš„ä¼ªç±»æˆ–è€…è¯´ä¼ªå…ƒç´ :afterå’Œ:beforeçš„ä½¿ç”¨ã€‚å¤§å®¶å¸¸çœ‹åˆ°çš„å°±æ˜¯æ¸…é™¤æµ®åŠ¨çš„clearfix:
.clearfix:before,.clearfix:after &#123;    content:&quot;&quot;;    display:table;&#125;.clearfix:after &#123;    clear:both;    overflow:hidden;&#125;.clearfix &#123;    *zoom: 1;&#125;

é‚£ä¹ˆåœ¨Sassä¸­ï¼Œä½¿ç”¨&amp;ä¼šå˜å¾—æ›´ç®€å•ï¼Œæ›´æ–¹ä¾¿ï¼š
$lte-ie: true !default;.clearfix &#123;    @if $lte-ie &#123;        *zoom: 1;    &#125;    &amp;:before,    &amp;:after &#123;        content: &quot;&quot;;        display: table;    &#125;    &amp;:after &#123;        clear: both;        overflow: hidden;    &#125;&#125;

&amp;ä¸æ­¢ç”¨äºå’Œä¼ªç±»çš„ç»“åˆï¼Œè¿˜å¯ä»¥ç”¨äºå¤šç±»é€‰æ‹©å™¨ã€åä»£é€‰æ‹©å™¨ã€ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨ã€åª’ä½“æŸ¥è¯¢ä¸­çš„åµŒå¥—ç­‰ã€‚
2016.07.30è¡¥Sassç¼–ç é”™è¯¯rubyç¯å¢ƒsassç¼–è¯‘ä¸­æ–‡å‡ºç°Syntax error: Invalid GBK characterã€‚è§£å†³åŠæ³•å¦‚ä¸‹ï¼šæ‰“å¼€rubyä¸­sassçš„å®‰è£…ç›®å½•ï¼Œåœ¨å…¶ä¸­æ‰¾åˆ°engine.rbã€‚åœ¨engine.rbä¸­æ‰€æœ‰çš„require XXXä¹‹åï¼Œæ·»åŠ 
Encoding.default_external = Encoding.find(&#x27;utf-8&#x27;)

PS:éƒåŒå­¦çš„engine.rbçš„è·¯å¾„ä¸ºD:\Program Files\Ruby23-x64\lib\ruby\gems\2.3.0\gems\sass-3.4.22\lib\sass\engine.rb
scssè‡ªåŠ¨ç¼–è¯‘ä¸ºcsså¦‚æœå¸Œæœ›æŸä¸€ä¸ªscssæ–‡ä»¶æˆ–è€…ç›¸åº”çš„æ–‡ä»¶å¤¹ä¸‹é¢æ–‡ä»¶ä¿®æ”¹åï¼Œè‡ªåŠ¨è¿›è¡Œç¼–è¯‘ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ä¾¦å¬å‘½ä»¤ã€‚1ã€ä¾¦å¬æ–‡ä»¶
sass --watch --style compressed style.scss:style.css

2ã€ä¾¦å¬æ–‡ä»¶å¤¹
sass --watch --style compressed scss:css

3ã€å°è£…ä¸ºè„šæœ¬ä¸ºäº†é¿å…æ¯æ¬¡è¿è¡Œéƒ½æ•²å‘½ä»¤ï¼Œæˆ‘ä»¬æŠŠä¸Šè¿°å‘½ä»¤åˆ†è£…ä¸ºè„šæœ¬scss.batã€‚
sass --watch --style compressed scss:css

æµ·å“¥å“¥å°è£…äº†ä¸ä¸€æ ·çš„scss-wap.batï¼Œå…¶ä¸­çš„å‚æ•°è‡³ä»Šæ²¡æœ‰çœ‹æ‡‚ï¼Œå¯ä»¥å®ç°åŒæ ·çš„æ•ˆæœã€‚
@echo offsass -C -t compressed --watch scss:cssrem  sass -C -t compact --watch scss:csspause

è¯¥å‘½ä»¤çš„å«ä¹‰ä¸ºï¼š
ä¹¦ç­¾sasså®‰è£…http://www.w3cplus.com/sassguide/install.html
SASSç”¨æ³•æŒ‡å—http://www.ruanyifeng.com/blog/2012/06/sass.html
sasså…¥é—¨http://www.w3cplus.com/sassguide/
SASS åˆå­¦è€…å…¥é—¨http://www.oschina.net/translate/the-absolute-beginners-guide-to-sass
Sasså‚è€ƒæ‰‹å†Œhttp://sass.bootcss.com/docs/sass-reference/
SassMeisteråœ¨çº¿è°ƒè¯•http://www.sassmeister.com/
Sassä¸­è¿ä½“ç¬¦ï¼ˆ&amp;ï¼‰çš„è¿ç”¨
rubyç¯å¢ƒsassç¼–è¯‘ä¸­æ–‡å‡ºç°Syntax error: Invalid GBK characteré”™è¯¯è§£å†³æ–¹æ³•http://www.tuicool.com/articles/f2YVRvhttp://www.cnblogs.com/zhidong123/p/3902270.html
SASSçš„å®‰è£…å’Œè½¬æ¢ä¸ºCSSçš„æ–¹æ³•http://www.cnblogs.com/52css/archive/sass-how-to-install-and-use.html
å‰ç«¯ä¹‹Sass/Scsså®æˆ˜ç¬”è®°http://www.tuicool.com/articles/iERVJbBhttp://segmentfault.com/a/1190000003742313
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>css</tag>
        <tag>å‰ç«¯</tag>
        <tag>sass</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦‚ä½•å­¦ä¹ ç¼–ç¨‹</title>
    <url>/dev-how-to-learn-programming/</url>
    <content><![CDATA[æ–¹æ³•åœ¨ç¼–ç¨‹è¿™æ¡è·¯ä¸Šï¼Œå·²ç»èµ°äº†å››å¹´ï¼Œè€Œä¸”ï¼Œè¿˜è¦ä¸€ç›´èµ°ä¸‹å»ã€‚
ä¸ªäººå…³äºå­¦ä¹ ç¼–ç¨‹çš„æ–¹æ³•ï¼Œä¸‰å¥è¯ä»¥è”½ä¹‹ï¼š1ã€å­¦è€Œä¸æ€åˆ™ç½”ï¼Œæ€è€Œä¸å­¦åˆ™æ®†ã€‚2ã€æ— è®ºæ˜¯ä»€ä¹ˆå·¥å…·ï¼Œå½“ä½ å¼€å§‹å»ä½¿ç”¨å®ƒï¼Œä¸€åˆ‡éƒ½ä¼šå˜å¾—ç®€å•ï¼3ã€å­¦ä¸€ç‚¹ï¼Œä¼šä¸€ç‚¹ï¼Œèƒœåœ¨ä¸æ­¢ã€‚
æ±‚çŸ¥ï¼Œæ€è€ƒï¼Œå®è·µï¼Œæ€»ç»“ã€‚çŸ¥æ˜“è¡Œéš¾ï¼Œè´µåœ¨åšæŒï¼


ä¹¦ç­¾åå¹´å­¦ä¼šç¼–ç¨‹http://daiyuwen.freeshell.org/gb/misc/21-days-cn.html
ä¸“è®¿å‘¨å®¶å®‰ï¼šæˆ‘çš„åå¹´ç¼–ç¨‹è‡ªå­¦ä¹‹è·¯http://www.csdn.net/article/2013-02-26/2814263
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»¿æ·˜å®å›¾ç‰‡æ”¾å¤§å™¨</title>
    <url>/dev-jquery-image-zoom/</url>
    <content><![CDATA[åŸç†ä¸¤ä¸ªç›’å­ï¼Œç›’å­1æ”¾å°å›¾ç‰‡ï¼Œç›’å­2æ”¾å¯¹åº”çš„å¤§å›¾ç‰‡ã€‚ç›’å­1é‡Œçš„å›¾ç‰‡æ­£å¸¸æ˜¾ç¤ºï¼Œç›’å­2é‡Œçš„å›¾ç‰‡éšè—ã€‚åœ¨ç›’å­1çš„å›¾ç‰‡æ ‡ç­¾ä¸­ï¼ŒåŠ å…¥å¤§å›¾çš„æ•°æ®é“¾æ¥ã€‚å½“é¼ æ ‡åœ¨ç›’å­1ä¸Šç§»åŠ¨æ—¶ï¼Œé€šè¿‡é¼ æ ‡åœ¨ç›’å­1çš„ä½ç½®è®¡ç®—å‡ºç›’å­2ä¸­åº”è¯¥æ˜¾ç¤ºçš„å¤§å›¾çš„éƒ¨åˆ†ã€‚


ä»¥ä¸‹ä»£ç ä¸­ï¼Œåˆ©ç”¨åˆ°äº†jquery.jqzoom.jsæ’ä»¶ã€‚
ä»£ç &lt;div id=&quot;preview&quot; class=&quot;spec-preview&quot;&gt;     &lt;span class=&quot;jqzoom&quot;&gt;        &lt;img jqimg=&quot;images/b1.jpg&quot; src=&quot;images/s1.jpg&quot; /&gt;    &lt;/span&gt; &lt;/div&gt;

$(function()&#123;    $(&quot;.jqzoom&quot;).jqueryzoom(&#123;xzoom:380,yzoom:380&#125;);&#125;);


å‚è€ƒæ–‡æ¡£jquery.jqzoom.jså›¾ç‰‡æ”¾å¤§é•œhttp://www.cnblogs.com/sydeveloper/p/3796330.html
ImageZoom å›¾ç‰‡æ”¾å¤§æ•ˆæœhttp://www.cnblogs.com/cloudgamer/archive/ImageZoom.html
jQuery-å®ç°å›¾ç‰‡çš„æ”¾å¤§é•œæ˜¾ç¤ºæ•ˆæœ
jqueryæ’ä»¶ æ”¾å¤§é•œhttp://www.jq-school.com/Article.aspx?kid=41
jQzoomç®€ä»‹http://www.oschina.net/p/jqzoom?fromerr=tUayHgqO
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>jquery</tag>
        <tag>æ’ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>ç€‘å¸ƒæµç‰¹æ•ˆ</title>
    <url>/dev-jquery-waterfall/</url>
    <content><![CDATA[åŸç†å‡è®¾é¡µé¢ä¸Šæœ‰ä¸‰åˆ—å›¾ç‰‡ï¼Œå½“æˆ‘ä»¬ä¸‹æ‹‰æ—¶ï¼Œæœ€çŸ­ï¼ˆæˆ–æœ€é•¿ï¼‰çš„ä¸€åˆ—å›¾ç‰‡å±•ç¤ºå®Œçš„æ—¶å€™ï¼Œå°±è¦è¯·æ±‚åŠ è½½æ–°çš„å›¾ç‰‡ï¼Œè·å–åˆ°çš„æ–°çš„å›¾ç‰‡æ”¾åˆ°æœ€çŸ­ä¸€åˆ—å›¾ç‰‡çš„ä¸‹é¢ã€‚
å°è¯•è¿‡ç”¨åŸç”Ÿjsæˆ–jqueryå®ç°ç€‘å¸ƒæµï¼Œæºç æ”¾åœ¨æœ¬æ–‡æœ€åã€‚ä¸‹é¢è®°å½•ä¸€ç§ä½¿ç”¨imageloadedå’Œmasonryæ’ä»¶å®ç°çš„ç€‘å¸ƒæµï¼Œæ›´ç®€ä¾¿ã€‚


imageloadedå’Œmasonryejsä»£ç ï¼š
&lt;div id=&quot;meitulist&quot; class=&quot;meitulist&quot;&gt;    &lt;% data.obj.pictureList.forEach(function(picture)&#123; %&gt;        &lt;a href=&quot;/inspiration/imagedetail/&lt;%= picture.albumId%&gt;&quot; class=&quot;item&quot;&gt;            &lt;img src=&quot;&lt;%= picture.url%&gt;&quot; /&gt;        &lt;/a&gt;    &lt;% &#125;)%&gt;&lt;/div&gt;

æ¯æ¬¡åŠ è½½å›¾ç‰‡å¹¶æ’å…¥åï¼Œæ‰§è¡ŒresetImage()å‡½æ•°ã€‚
function resetImage()&#123;    var width = document.documentElement.clientWidth;    var column = width&gt;320? 3 : 2;    var itemWidth = Math.ceil((width-(column+1)*10)/column);    $(&#x27;.meitulist .item&#x27;).css(&#x27;width&#x27;,itemWidth);    $(&#x27;.meitulist .item img&#x27;).css(&#123;        &#x27;width&#x27;:itemWidth        // &#x27;height&#x27;: itemWidth    &#125;)    window.imagesLoaded(&#x27;#meitulist&#x27;, function() &#123;        var msnry = new Masonry(&#x27;#meitulist&#x27;,&#123;            &#x27;columnWidth&#x27;: itemWidth,            &#x27;itemSelector&#x27;: &#x27;.item&#x27;,            &#x27;isAnimated&#x27;:true,            // &#x27;percentPosition&#x27;:true,            &#x27;gutter&#x27;: 10        &#125;);    &#125;);&#125;

jså’Œjqueryæºç https://github.com/voidking/front-end-demo/tree/master/%E7%80%91%E5%B8%83%E6%B5%81
å‚è€ƒæ–‡æ¡£ç€‘å¸ƒæµç‰¹æ•ˆhttp://www.cnblogs.com/Leo_wl/p/4306295.html
Masonryå®˜ç½‘http://masonry.desandro.com/
mosonryé¡¹ç›®åœ°å€ï¼šhttps://github.com/desandro/masonry
imagesLoadedå®˜ç½‘http://imagesloaded.desandro.com/
imagesloadedé¡¹ç›®åœ°å€ï¼šhttps://github.com/desandro/imagesloaded
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>jquery</tag>
        <tag>æ’ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>jQueryä¹¦ç­¾</title>
    <url>/dev-jquery-bookmark/</url>
    <content><![CDATA[ä»é›¶å¼€å§‹å­¦ä¹ jQuery (ä¸€) å¼€å¤©è¾Ÿåœ°å…¥é—¨ç¯‡http://kb.cnblogs.com/page/46450/
jQuery APIhttp://jquery.cuishifeng.cn/
jQuery APIèµ„æºä¸“å±ä¸‹è½½é¡µhttp://www.cuishifeng.cn/down.html


jQueryåŸºç¡€è¯¾ç¨‹http://www.imooc.com/learn/11
CodePlayerhttp://www.365mini.com/
htmlä¸­offsetTopã€clientTopã€scrollTopã€offsetTopå„å±æ€§ä»‹ç»http://blog.csdn.net/fswan/article/details/17238933
å€¼å¾— Web å¼€å‘äººå‘˜å­¦ä¹ çš„20ä¸ª jQuery å®ä¾‹æ•™ç¨‹http://www.cnblogs.com/lhb25/p/20-must-have-jquery-tutorials.html
jQuery Mobilehttp://jquerymobile.com/
HTML5+JSæ‰‹æœºwebå¼€å‘ä¹‹jQuery Mobileåˆæ¶‰
10ä¸ªä¼˜ç§€çš„jQuery Mobileä¸»é¢˜http://caibaojian.com/10-best-free-jquery-mobile-theme.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>jquery</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScriptä¹¦ç­¾</title>
    <url>/dev-javascript-bookmark/</url>
    <content><![CDATA[å›è°ƒå‡½æ•°ï¼ˆcallbackï¼‰æ˜¯ä»€ä¹ˆï¼Ÿhttp://www.zhihu.com/question/19801131
è¯»å–JAVASCRIPTç¬¬ä¸€å…¬æ°‘-å‡½æ•°http://www.cnblogs.com/YOUCAN/archive/2754968.html
ã€ŠJAVASCRIPTè¯­è¨€ç²¾é«“ä¸ç¼–ç¨‹å®è·µã€‹ï¼Œå‘¨çˆ±æ°‘http://www.chnxp.com.cn/soft/2013-12/22670.html


æ— åºŸè¯JavaScripthttp://blog.csdn.net/aimingoo/article/details/3022379
æ·±å…¥ç†è§£javascriptåŸå‹å’Œé—­åŒ…http://www.cnblogs.com/wangfupeng1988/p/3977987.html
JSçš„äº‹ä»¶ç›‘å¬æœºåˆ¶http://www.cnblogs.com/aji88/archive/2600492.html
jsäº‹ä»¶ç›‘å¬å™¨ç”¨æ³•å®ä¾‹è¯¦è§£http://www.jb51.net/article/67051.htm
HTML æœ€ä½³å®è·µhttp://www.imooc.com/article/3666
Node.JSç¼–ç è§„èŒƒæŒ‡å—æ•™ç¨‹ï¼šæ•™ä½ ä¼˜é›…åœ°å†™JavaScriptä»£ç 
å‰ç«¯JavaScriptè§„èŒƒhttp://www.imooc.com/article/1402
ä¸ºJavaScriptç¨‹åºå‘˜å‡†å¤‡çš„10æœ¬å…è´¹ä¹¦ç±http://www.imooc.com/article/1767
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>å‡½æ•°å¼ç¼–ç¨‹</title>
    <url>/dev-functional-programming/</url>
    <content><![CDATA[æ¦‚å¿µä»¥ä¸‹å†…å®¹è½¬è½½è‡ªç”¨å¿ƒé˜çš„å›ç­”ï¼Œè¯¦è§çŸ¥ä¹ã€‚
1ã€ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿå‡½æ•°å¼ç¼–ç¨‹æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œæˆ‘ä»¬å¸¸è§çš„ç¼–ç¨‹èŒƒå¼æœ‰å‘½ä»¤å¼ç¼–ç¨‹ï¼ˆImperative programmingï¼‰ï¼Œå‡½æ•°å¼ç¼–ç¨‹ï¼Œé€»è¾‘å¼ç¼–ç¨‹ï¼Œå¸¸è§çš„é¢å‘å¯¹è±¡ç¼–ç¨‹æ˜¯ä¹Ÿæ˜¯ä¸€ç§å‘½ä»¤å¼ç¼–ç¨‹ã€‚
å‘½ä»¤å¼ç¼–ç¨‹æ˜¯é¢å‘è®¡ç®—æœºç¡¬ä»¶çš„æŠ½è±¡ï¼Œæœ‰å˜é‡ï¼ˆå¯¹åº”ç€å­˜å‚¨å•å…ƒï¼‰ï¼Œèµ‹å€¼è¯­å¥ï¼ˆè·å–ï¼Œå­˜å‚¨æŒ‡ä»¤ï¼‰ï¼Œè¡¨è¾¾å¼ï¼ˆå†…å­˜å¼•ç”¨å’Œç®—æœ¯è¿ç®—ï¼‰å’Œæ§åˆ¶è¯­å¥ï¼ˆè·³è½¬æŒ‡ä»¤ï¼‰ï¼Œä¸€å¥è¯ï¼Œå‘½ä»¤å¼ç¨‹åºå°±æ˜¯ä¸€ä¸ªå†¯è¯ºä¾æ›¼æœºçš„æŒ‡ä»¤åºåˆ—ã€‚
è€Œå‡½æ•°å¼ç¼–ç¨‹æ˜¯é¢å‘æ•°å­¦çš„æŠ½è±¡ï¼Œå°†è®¡ç®—æè¿°ä¸ºä¸€ç§è¡¨è¾¾å¼æ±‚å€¼ï¼Œä¸€å¥è¯ï¼Œå‡½æ•°å¼ç¨‹åºå°±æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚


å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„å‡½æ•°è¿™ä¸ªæœ¯è¯­ä¸æ˜¯æŒ‡è®¡ç®—æœºä¸­çš„å‡½æ•°ï¼ˆå®é™…ä¸Šæ˜¯Subroutineï¼‰ï¼Œè€Œæ˜¯æŒ‡æ•°å­¦ä¸­çš„å‡½æ•°ï¼Œå³è‡ªå˜é‡çš„æ˜ å°„ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªå‡½æ•°çš„å€¼ä»…å†³å®šäºå‡½æ•°å‚æ•°çš„å€¼ï¼Œä¸ä¾èµ–å…¶ä»–çŠ¶æ€ã€‚æ¯”å¦‚sqrt(x)å‡½æ•°è®¡ç®—xçš„å¹³æ–¹æ ¹ï¼Œåªè¦xä¸å˜ï¼Œä¸è®ºä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼Œè°ƒç”¨å‡ æ¬¡ï¼Œå€¼éƒ½æ˜¯ä¸å˜çš„ã€‚
åœ¨å‡½æ•°å¼è¯­è¨€ä¸­ï¼Œå‡½æ•°ä½œä¸ºä¸€ç­‰å…¬æ°‘ï¼Œå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å®šä¹‰ï¼Œåœ¨å‡½æ•°å†…æˆ–å‡½æ•°å¤–ï¼Œå¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼ï¼Œå¯ä»¥å¯¹å‡½æ•°è¿›è¡Œç»„åˆã€‚
çº¯å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ä¸­çš„å˜é‡ä¹Ÿä¸æ˜¯å‘½ä»¤å¼ç¼–ç¨‹è¯­è¨€ä¸­çš„å˜é‡ï¼Œå³å­˜å‚¨çŠ¶æ€çš„å•å…ƒï¼Œè€Œæ˜¯ä»£æ•°ä¸­çš„å˜é‡ï¼Œå³ä¸€ä¸ªå€¼çš„åç§°ã€‚å˜é‡çš„å€¼æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸å…è®¸åƒå‘½ä»¤å¼ç¼–ç¨‹è¯­è¨€ä¸­é‚£æ ·å¤šæ¬¡ç»™ä¸€ä¸ªå˜é‡èµ‹å€¼ã€‚æ¯”å¦‚è¯´åœ¨å‘½ä»¤å¼ç¼–ç¨‹è¯­è¨€æˆ‘ä»¬å†™â€œx = x + 1â€ï¼Œè¿™ä¾èµ–å¯å˜çŠ¶æ€çš„äº‹å®ï¼Œæ‹¿ç»™ç¨‹åºå‘˜çœ‹è¯´æ˜¯å¯¹çš„ï¼Œä½†æ‹¿ç»™æ•°å­¦å®¶çœ‹ï¼Œå´è¢«è®¤ä¸ºè¿™ä¸ªç­‰å¼ä¸ºå‡ã€‚
å‡½æ•°å¼è¯­è¨€çš„å¦‚æ¡ä»¶è¯­å¥ï¼Œå¾ªç¯è¯­å¥ä¹Ÿä¸æ˜¯å‘½ä»¤å¼ç¼–ç¨‹è¯­è¨€ä¸­çš„æ§åˆ¶è¯­å¥ï¼Œè€Œæ˜¯å‡½æ•°çš„è¯­æ³•ç³–ï¼Œæ¯”å¦‚åœ¨Scalaè¯­è¨€ä¸­ï¼Œif elseä¸æ˜¯è¯­å¥è€Œæ˜¯ä¸‰å…ƒè¿ç®—ç¬¦ï¼Œæ˜¯æœ‰è¿”å›å€¼çš„ã€‚
ä¸¥æ ¼æ„ä¹‰ä¸Šçš„å‡½æ•°å¼ç¼–ç¨‹æ„å‘³ç€ä¸ä½¿ç”¨å¯å˜çš„å˜é‡ï¼Œèµ‹å€¼ï¼Œå¾ªç¯å’Œå…¶ä»–å‘½ä»¤å¼æ§åˆ¶ç»“æ„è¿›è¡Œç¼–ç¨‹ã€‚
ä»ç†è®ºä¸Šè¯´ï¼Œå‡½æ•°å¼è¯­è¨€ä¹Ÿä¸æ˜¯é€šè¿‡å†¯è¯ºä¼Šæ›¼ä½“ç³»ç»“æ„çš„æœºå™¨ä¸Šè¿è¡Œçš„ï¼Œè€Œæ˜¯é€šè¿‡Î»æ¼”ç®—æ¥è¿è¡Œçš„ï¼Œå°±æ˜¯é€šè¿‡å˜é‡æ›¿æ¢çš„æ–¹å¼è¿›è¡Œï¼Œå˜é‡æ›¿æ¢ä¸ºå…¶å€¼æˆ–è¡¨è¾¾å¼ï¼Œå‡½æ•°ä¹Ÿæ›¿æ¢ä¸ºå…¶è¡¨è¾¾å¼ï¼Œå¹¶æ ¹æ®è¿ç®—ç¬¦è¿›è¡Œè®¡ç®—ã€‚Î»æ¼”ç®—æ˜¯å›¾çµå®Œå…¨ï¼ˆTuring completenessï¼‰çš„ï¼Œä½†æ˜¯å¤§å¤šæ•°æƒ…å†µï¼Œå‡½æ•°å¼ç¨‹åºè¿˜æ˜¯è¢«ç¼–è¯‘æˆï¼ˆå†¯è¯ºä¾æ›¼æœºçš„ï¼‰æœºå™¨è¯­è¨€çš„æŒ‡ä»¤æ‰§è¡Œçš„ã€‚
2ã€ä¸ºä»€ä¹ˆéœ€è¦å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿç”±äºå‘½ä»¤å¼ç¼–ç¨‹è¯­è¨€ä¹Ÿå¯ä»¥é€šè¿‡ç±»ä¼¼å‡½æ•°æŒ‡é’ˆçš„æ–¹å¼æ¥å®ç°é«˜é˜¶å‡½æ•°ï¼Œå‡½æ•°å¼çš„æœ€ä¸»è¦çš„å¥½å¤„ä¸»è¦æ˜¯ä¸å¯å˜æ€§å¸¦æ¥çš„ã€‚æ²¡æœ‰å¯å˜çš„çŠ¶æ€ï¼Œå‡½æ•°å°±æ˜¯å¼•ç”¨é€æ˜ï¼ˆReferential transparencyï¼‰çš„å’Œæ²¡æœ‰å‰¯ä½œç”¨ï¼ˆNo Side Effectï¼‰ã€‚
ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œå‡½æ•°å³ä¸ä¾èµ–å¤–éƒ¨çš„çŠ¶æ€ä¹Ÿä¸ä¿®æ”¹å¤–éƒ¨çš„çŠ¶æ€ï¼Œå‡½æ•°è°ƒç”¨çš„ç»“æœä¸ä¾èµ–è°ƒç”¨çš„æ—¶é—´å’Œä½ç½®ï¼Œè¿™æ ·å†™çš„ä»£ç å®¹æ˜“è¿›è¡Œæ¨ç†ï¼Œä¸å®¹æ˜“å‡ºé”™ã€‚è¿™ä½¿å¾—å•å…ƒæµ‹è¯•å’Œè°ƒè¯•éƒ½æ›´å®¹æ˜“ã€‚
ä¸å˜æ€§å¸¦æ¥çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯ï¼šç”±äºï¼ˆå¤šä¸ªçº¿ç¨‹ä¹‹é—´ï¼‰ä¸å…±äº«çŠ¶æ€ï¼Œä¸ä¼šé€ æˆèµ„æºäº‰ç”¨(Race condition)ï¼Œä¹Ÿå°±ä¸éœ€è¦ç”¨é”æ¥ä¿æŠ¤å¯å˜çŠ¶æ€ï¼Œä¹Ÿå°±ä¸ä¼šå‡ºç°æ­»é”ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½åœ°å¹¶å‘èµ·æ¥ï¼Œå°¤å…¶æ˜¯åœ¨å¯¹ç§°å¤šå¤„ç†å™¨ï¼ˆSMPï¼‰æ¶æ„ä¸‹èƒ½å¤Ÿæ›´å¥½åœ°åˆ©ç”¨å¤šä¸ªå¤„ç†å™¨ï¼ˆæ ¸ï¼‰æä¾›çš„å¹¶è¡Œå¤„ç†èƒ½åŠ›ã€‚
ç”±äºå‡½æ•°æ˜¯å¼•ç”¨é€æ˜çš„ï¼Œä»¥åŠå‡½æ•°å¼ç¼–ç¨‹ä¸åƒå‘½ä»¤å¼ç¼–ç¨‹é‚£æ ·å…³æ³¨æ‰§è¡Œæ­¥éª¤ï¼Œè¿™ä¸ªç³»ç»Ÿæä¾›äº†ä¼˜åŒ–å‡½æ•°å¼ç¨‹åºçš„ç©ºé—´ï¼ŒåŒ…æ‹¬æƒ°æ€§æ±‚å€¼å’Œå¹¶æ€§å¤„ç†ã€‚
è¿˜æœ‰ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œç”±äºå‡½æ•°å¼è¯­è¨€æ˜¯é¢å‘æ•°å­¦çš„æŠ½è±¡ï¼Œæ›´æ¥è¿‘äººçš„è¯­è¨€ï¼Œè€Œä¸æ˜¯æœºå™¨è¯­è¨€ï¼Œä»£ç ä¼šæ¯”è¾ƒç®€æ´ï¼Œä¹Ÿæ›´å®¹æ˜“è¢«ç†è§£ã€‚
ä¹¦ç­¾ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹æ€ç»´ï¼Ÿhttps://www.zhihu.com/question/28292740
æœ‰è¶£çš„ Scala è¯­è¨€: ä½¿ç”¨é€’å½’çš„æ–¹å¼å»æ€è€ƒhttp://www.ibm.com/developerworks/cn/java/j-lo-funinscala1/
å‡½æ•°å¼ç¼–ç¨‹åˆæ¢http://www.ruanyifeng.com/blog/2012/04/functional_programming.html
å¯¹å‡½æ•°å¼è¯­è¨€çš„è¯¯è§£http://blog.163.com/bowen_tong/blog/static/20681717420133142740252/
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>å‡½æ•°å¼ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML5å’ŒCSS3å­¦ä¹ èµ„æ–™</title>
    <url>/dev-html5-and-css3-resources/</url>
    <content><![CDATA[è·ŸKingDZå­¦HTML5ä¹‹å›› ç»§ç»­æ¢ç©¶Canvasä¹‹è·¯å¾„http://www.cnblogs.com/hihell/archive/2150413.html
SVG å¤šè¾¹å½¢http://www.runoob.com/svg/svg-polygon.html
ç†è§£SVGçš„å›¾å½¢å¡«å……è§„åˆ™http://blog.csdn.net/cuixiping/article/details/7848369
åœ°ç†å®šä½ï¼ˆnavigator.geolocationï¼‰http://blog.csdn.net/smok56888/article/details/20628161
HTML5 åœ°ç†ä½ç½®å®šä½ï¼ˆHTML5 Geolocationï¼‰åŸç†åŠåº”ç”¨http://www.cnblogs.com/lhb25/archive/html5-geolocation-api-demo.html
HTML5 Web Workerçš„ä½¿ç”¨http://www.cnblogs.com/feng_013/archive/2175007.html
HTML å‚è€ƒæ‰‹å†Œhttp://www.w3school.com.cn/tags/index.asp
HTML5 æµ‹éªŒhttp://www.w3school.com.cn/quiz/quiz.asp?quiz=html5
CSS3 border-imageè¯¦è§£ã€åº”ç”¨åŠjQueryæ’ä»¶
åˆ©ç”¨css3-animationæ¥åˆ¶ä½œé€å¸§åŠ¨ç”»https://www.qianduan.net/css3-animation/
css3 box-sizingå±æ€§http://www.cnblogs.com/zhaoran/archive/3097482.html
Selectors Level 3https://www.w3.org/TR/css3-selectors/
HTML5 Trickshttp://www.html5tricks.com/
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>è‰¾ä½³ç”Ÿæ´»</tag>
      </tags>
  </entry>
  <entry>
    <title>ç™¾åº¦æœç´¢ç»“æœé¡µ</title>
    <url>/dev-baidu-search-result/</url>
    <content><![CDATA[å‰è¨€1æœˆ18æ—¥ï¼Œå…¥èŒè‰¾ä½³ï¼ŒåŠå¥½äº†å„ç§æ‰‹ç»­ã€‚ä»æµ·å“¥é‚£é‡Œï¼Œæ¥åˆ°äº†ç¬¬ä¸€ä¸ªä»»åŠ¡â€”â€”å‘¨ä¸€åˆ°å‘¨ä¸‰ï¼ˆ18åˆ°20ï¼‰ï¼Œé«˜ä»¿ä¸€ä¸ªç™¾åº¦æœç´¢ç»“æœé¡µã€‚éƒåŒå­¦éšæ‰‹æŒ–äº†ä¸€ä¸ªå‘ï¼šâ€œä¸Šæµ·â€ï¼Œæ¥ç€ä¾¿å¼€å§‹å¡«å‘ã€‚


ç•Œé¢å¸ƒå±€æµè§ˆå™¨ï¼Œæ˜¯ä¸€ä¸ªé•¿æ–¹ä½“çš„ä¸é€æ˜çš„å¯å˜ä½“ç§¯çš„ç›’å­ï¼Œç›’å­ä¸Šé¢å¼€äº†ä¸€ä¸ªé•¿æ–¹å½¢çš„çª—å£ã€‚ä»è¿™ä¸ªçª—å£ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç›’å­é‡Œçš„å†…å®¹ã€‚ç›’å­æœ‰å¾ˆå¤šå±‚ï¼ŒIEã€FireFoxã€Safariæœ‰2147483647å±‚ï¼ŒOperaæœ‰2147483584å±‚ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ10å±‚ï¼Œå°±è¶³å¤Ÿæˆ‘ä»¬ä½¿ç”¨äº†ã€‚ 
ç•Œé¢å¸ƒå±€ï¼Œä¹Ÿå°±æ˜¯åœ¨æµè§ˆå™¨ç›’å­é‡Œé¢æ‘†æ”¾ä¸œè¥¿çš„æ–¹å¼ã€‚ä¸€èˆ¬åˆ†ä¸ºä¸‰ç§ï¼šæ ‡å‡†æ–‡æ¡£æµã€æµ®åŠ¨å’Œå®šä½ã€‚
æ ‡å‡†æ–‡æ¡£æµæ ‡å‡†æ–‡æ¡£æµï¼Œå°±æ˜¯åœ¨ç›’å­çš„ç¬¬ä¸€å±‚æ‘†æ”¾ä¸œè¥¿ï¼ŒæŒ‰ç…§ä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹çš„æ–¹å¼ï¼Œç¬¦åˆæˆ‘ä»¬å¹³æ—¶çš„æ€ç»´ä¹ æƒ¯ã€‚
æµ®åŠ¨æµ®åŠ¨ä¼šè„±ç¦»æ ‡å‡†æ–‡æ¡£æµï¼Œä¸å†æŒ‰ç…§ä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹çš„æ–¹å¼ã€‚ä½†æ˜¯ï¼Œæµ®åŠ¨çš„å…ƒç´ ï¼Œä»ç„¶å¤„äºç¬¬ä¸€å±‚ã€‚
å¯¹äºæµ®åŠ¨ï¼Œæœ€è®¤åŒå¼ é‘«æ—­çš„çœ‹æ³•ã€‚æµ®åŠ¨å‡ºç°çš„æ„ä¹‰å…¶å®åªæ˜¯ç”¨æ¥è®©æ–‡å­—ç¯ç»•å›¾ç‰‡è€Œå·²ï¼Œä»…æ­¤è€Œå·²ã€‚æµ®åŠ¨çš„æœ¬è´¨ä¸ºâ€œåŒ…è£¹ä¸ç ´åâ€ï¼
1ã€åŒ…è£¹æ’‡å¼€æµ®åŠ¨çš„â€œç ´åæ€§â€ï¼Œæµ®åŠ¨å°±æ˜¯ä¸ªå¸¦æœ‰æ–¹ä½çš„display:inline-blockå±æ€§ã€‚
2ã€ç ´åæ–‡å­—ä¹‹æ‰€ä»¥ä¼šç¯ç»•å«æœ‰floatå±æ€§çš„å›¾ç‰‡ï¼Œæ˜¯å› ä¸ºæµ®åŠ¨ç ´åäº†æ­£å¸¸çš„line boxesã€‚
å®šä½staticå…ƒç´ å‡ºç°åœ¨æ ‡å‡†æ–‡æ¡£æµä¸­ã€‚
relativeç”Ÿæˆç›¸å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºå…¶æ­£å¸¸ä½ç½®è¿›è¡Œå®šä½ã€‚
å› æ­¤ï¼Œâ€left:20â€ ä¼šå‘å…ƒç´ çš„ LEFT ä½ç½®æ·»åŠ  20 åƒç´ ã€‚
absoluteç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äº static å®šä½ä»¥å¤–çš„ç¬¬ä¸€ä¸ªçˆ¶å…ƒç´ è¿›è¡Œå®šä½ã€‚
å…ƒç´ çš„ä½ç½®é€šè¿‡ â€œleftâ€, â€œtopâ€, â€œrightâ€ ä»¥åŠ â€œbottomâ€ å±æ€§è¿›è¡Œè§„å®šã€‚
fixedç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºæµè§ˆå™¨çª—å£è¿›è¡Œå®šä½ã€‚
å…ƒç´ çš„ä½ç½®é€šè¿‡ â€œleftâ€, â€œtopâ€, â€œrightâ€ ä»¥åŠ â€œbottomâ€ å±æ€§è¿›è¡Œè§„å®šã€‚
ç›’å­æ¨¡å‹ä¸Šé¢æˆ‘ä»¬è¯´ï¼Œè¦åœ¨æµè§ˆå™¨è¿™ä¸ªç›’å­é‡Œæ‘†æ”¾ä¸œè¥¿ã€‚é‚£ä¹ˆï¼Œæ‘†æ”¾ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿç›’å­ï¼æ²¡æœ‰é¡¶çš„ç›’å­ã€‚

marginï¼šç›’å­é—´çš„è·ç¦»ã€‚
borderï¼šç›’å­çš„æ¿åšåº¦ã€‚
paddingï¼šç›’å­é‡Œçš„å‡éœ‡æ³¡æ²«åšåº¦ã€‚
contentï¼šç›’å­é‡Œå¯ä»¥æ‘†æ”¾ç‰©å“çš„ç©ºé—´å°ºå¯¸ã€‚

å…¨å±€è®¾ç½®æ’ç‰ˆçš„æ—¶å€™ï¼ŒéƒåŒå­¦å‘ç°ï¼Œåœ¨å†…å®¹å’Œæµè§ˆå™¨çª—å£ä¹‹é—´ï¼Œä¼šå­˜åœ¨ç¼éš™ã€‚æ‰€ä»¥ï¼Œä¸€èˆ¬ä¼šè®¾ç½®ä¸€ä¸ªå…¨å±€æ ·å¼ï¼š
*&#123;    margin: 0;    padding: 0;&#125;

ä¸‹æ‹‰èœå•é¼ æ ‡ç§»åŠ¨åˆ°é¡¶éƒ¨çš„â€œè®¾ç½®â€æˆ–è€…â€œç”¨æˆ·åâ€ä¸‹é¢ï¼Œä¼šå‡ºç°ä¸‹æ‹‰èœå•ã€‚è¿™ä¸ªæ•ˆæœï¼Œå°±éœ€è¦ç”¨åˆ°å®šä½ä¸­çš„â€œabsoluteâ€äº†ï¼Œ
å—çº§å…ƒç´ è¡Œå†…å…ƒç´ 1ã€è¡Œå†…å…ƒç´ ä¸å—çº§å…ƒç´ ç›´è§‚ä¸Šçš„åŒºåˆ«è¡Œå†…å…ƒç´ ä¼šåœ¨ä¸€æ¡ç›´çº¿ä¸Šæ’åˆ—ï¼Œéƒ½æ˜¯åŒä¸€è¡Œçš„ï¼Œæ°´å¹³æ–¹å‘æ’åˆ—å—çº§å…ƒç´ å„å æ®ä¸€è¡Œï¼Œå‚ç›´æ–¹å‘æ’åˆ—ã€‚å—çº§å…ƒç´ ä»æ–°è¡Œå¼€å§‹ç»“æŸæ¥ç€ä¸€ä¸ªæ–­è¡Œã€‚
2ã€å—çº§å…ƒç´ å¯ä»¥åŒ…å«è¡Œå†…å…ƒç´ å’Œå—çº§å…ƒç´ ï¼Œè¡Œå†…å…ƒç´ ä¸èƒ½åŒ…å«å—çº§å…ƒç´ ã€‚
3ã€è¡Œå†…å…ƒç´ ä¸å—çº§å…ƒç´ å±æ€§çš„ä¸åŒï¼Œä¸»è¦æ˜¯ç›’æ¨¡å‹å±æ€§ä¸Šè¡Œå†…å…ƒç´ è®¾ç½®widthæ— æ•ˆï¼Œheightæ— æ•ˆ(å¯ä»¥è®¾ç½®line-height)ï¼Œmarginä¸Šä¸‹æ— æ•ˆï¼Œpaddingä¸Šä¸‹æ— æ•ˆ
line-heightå’Œvertical-alignline-heighté€‚ç”¨äºæ‰€æœ‰å…ƒç´ ï¼Œè®¾ç½®å…ƒç´ ä¸­è¡Œçš„é«˜åº¦ã€‚vertical-aligné€‚ç”¨äºè¡Œå†…å…ƒç´ å’Œå•å…ƒæ ¼ï¼ˆtable-cellï¼‰å…ƒç´ ï¼Œè®¾ç½®å…ƒç´ å†…å®¹çš„å‚ç›´å¯¹é½æ–¹å¼ã€‚
åè®°æœ¬æ¬¡ä»»åŠ¡ï¼Œéµå¾ªä¸€ä¸ªåŸåˆ™ï¼šèƒ½ç”¨HTML+CSSå®ç°çš„ï¼Œä¸ç”¨JavaScriptï¼›èƒ½ç”¨JavaScriptå®ç°çš„ï¼Œä¸ç”¨jQueryã€‚ä¸Šé¢ä¸»è¦è®°å½•äº†è¿™æ¬¡ä»»åŠ¡ç”¨åˆ°çš„æŠ€æœ¯å’ŒåŸç†ï¼Œç»†èŠ‚æ–¹é¢çš„ä¸œè¥¿ï¼Œçœ‹ä»£ç å§ï¼Œå®Œæˆåº¦80%ï¼šhttps://github.com/voidking/baidu-search-result.git
å‚è€ƒæ–‡æ¡£å¦‚ä½•åˆ©ç”¨ CSS è£½ä½œå¤šç´šé¸å–®ï¼Ÿhttps://zespia.tw/blog/css-multi-level-menu/
ç½‘é¡µå¸ƒå±€åŸºç¡€http://www.imooc.com/learn/95
cssçŸ¥å¤šå°‘ï¼ˆ7ï¼‰â€”â€”ç›’å­æ¨¡å‹http://www.cnblogs.com/wangfupeng1988/p/4287292.html
CSS+DIVå®šä½åˆ†æhttp://blog.163.com/love_heartbreaking/blog/static/124561901201211334714800/
DOMä¸­å…³äºè„±ç¦»æ–‡æ¡£æµçš„å‡ ç§æƒ…å†µåˆ†æhttp://www.tuicool.com/articles/IBJvyy7http://www.cnblogs.com/chuaWeb/p/html_css_position_float.html
CSS floatæµ®åŠ¨çš„æ·±å…¥ç ”ç©¶ã€è¯¦è§£åŠæ‹“å±•(ä¸€)
CSSæ·±å…¥ç†è§£ä¹‹floatæµ®åŠ¨http://www.imooc.com/view/121
è¡Œå†…å…ƒç´ ä¸å—çº§å…ƒç´ æ¯”è¾ƒå…¨é¢çš„åŒºåˆ«å’Œè½¬æ¢http://blog.csdn.net/sykent/article/details/7738408
line-height å’Œ vertical-align è¡Œé«˜ä¸è¡Œå¯¹é½ç²¾è§£ ï¼ˆå›¾æ–‡ï¼‰http://www.jb51.net/css/29328.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>è‰¾ä½³ç”Ÿæ´»</tag>
      </tags>
  </entry>
  <entry>
    <title>å¾®æ“ç³»ç»Ÿæ­å»º</title>
    <url>/dev-we7-start/</url>
    <content><![CDATA[å‰è¨€æ—¶éš”ä¸€å¹´åŠï¼Œå†æ¬¡æ¥è§¦å¾®ä¿¡å…¬ä¼—å¹³å°å¼€å‘ã€‚ç›¸æ¯”äºæŒä¸Šå¤§å­¦ã€åœˆé‡Œã€å¾®ç«™ABCã€å›¾çµæœºå™¨äººã€å°iæœºå™¨äººã€FAQå…è´¹æ™ºèƒ½é—®ç­”æœºå™¨äººã€V5KFã€èµ›ç§‘æ™ºèƒ½æœºå™¨äººï¼Œä¸ªäººæ›´å–œæ¬¢æ¨¡å—å®šåˆ¶çš„å¾®æ“å’Œæ·å¾®ï¼Œæºç åœ¨è‡ªå·±æ‰‹é‡Œï¼Œæƒ³æ€ä¹ˆææ€ä¹ˆæã€‚æœ¬ç¯‡çŸ­æ–‡ï¼Œå°±è®°å½•ä¸‹å¾®æ“ç³»ç»Ÿæ­å»ºçš„å…·ä½“æ­¥éª¤ã€‚


å‡†å¤‡æ¡ä»¶é¦–å…ˆï¼Œä½ è¦æœ‰ä¸€ä¸ªå…¬ç½‘æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä¸Šæœ‰PHPå’ŒMySQLçš„ç¯å¢ƒï¼Œå®˜æ–¹æ¨èlinux(centOS)+ nginx + php5.3ï¼Œmysql5.6ã€‚å…¶æ¬¡ï¼Œä½ è¦æœ‰è¿œç¨‹æ“ä½œæœåŠ¡å™¨çš„å·¥å…·ï¼Œæ¨èä½¿ç”¨xshellå’Œxftpã€‚æœ€åï¼Œä½ éœ€è¦ä»å¾®æ“å®˜ç½‘ä¸‹è½½å¾®æ“çš„æºç ã€‚
æœåŠ¡å™¨äº‘æ“å…ˆè¯´å›½å†…çš„ï¼ŒBAEã€CAEã€JAEã€SAEç­‰ï¼Œä¸Šæ¬¡åšå¾®ä¿¡å¼€å‘æ—¶ï¼Œå®ƒä»¬è¿˜æ˜¯å…è´¹çš„ï¼Œç°åœ¨æœ‰äº›å¼€å§‹æ”¶è´¹äº†ã€‚
å†è¯´å›½å¤–çš„ï¼ŒGAEã€OpenShiftã€herokuã€appfogã€mongolabç­‰ï¼Œä½†æ˜¯å›½å†…çš„è®¿é—®é€Ÿåº¦ä¸€èˆ¬ï¼Œè¦ä¹ˆç›´æ¥è¢«å¢™ã€‚å…¶ä¸­ï¼ŒOpenShiftæ˜¯æˆ‘æœ€å–œæ¬¢çš„ï¼Œä»¥å‰ä½¿ç”¨WordPressåœ¨ä¸Šé¢æ­å»ºäº†ä¸€ä¸ªåšå®¢ã€‚
äº‘æ“çš„ç”¨æ³•ç®€å•ï¼ŒåŸºæœ¬éƒ½æ˜¯å»ºç«‹æŸä¸ªç±»å‹çš„åº”ç”¨ï¼Œç„¶åæŠŠä»£ç éƒ¨ç½²ä¸Šå»ã€‚å› ä¸ºäº‘æ“æœ‰å„ç§é™åˆ¶ï¼Œæ¯”å¦‚PHPç‰ˆæœ¬é™åˆ¶ã€æ–‡ä»¶å¤§å°é™åˆ¶ã€è®¿é—®æµé‡é™åˆ¶ç­‰ï¼Œæ‰€ä»¥ä¸å»ºè®®ä½¿ç”¨ã€‚ä½†æ˜¯ï¼Œäº‘æ“çš„é‡ç‚¹åœ¨äºå…è´¹ï¼Œæˆ–è€…å…è´¹ä¸€æ®µæ—¶é—´ã€‚åšåšæµ‹è¯•è¿˜æ˜¯å¯ä»¥çš„ï¼Œå¯¹äºæˆ‘ç­‰ç©·å±Œä¸è€Œè¨€ï¼Œä¸å¤±ä¸ºä¸€ç§ç¦åˆ©ã€‚
ä¸»æµæœåŠ¡å™¨é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€äºšé©¬é€Šã€è¥¿éƒ¨æ•°æ®ã€ç¾å›¢äº‘ç­‰ï¼ŒæŒ‰é…ç½®æ”¶è´¹ï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€è¦å’Œç»æµèƒ½åŠ›é€‰æ‹©ã€‚è¿™ç§æœåŠ¡å™¨ï¼Œå°±å¯ä»¥åƒæœ¬åœ°ä¸»æœºä¸€æ ·éšæ„å®‰è£…é…ç½®äº†ã€‚æœ¬æ¬¡çš„å¾®æ“ç¯å¢ƒï¼Œæˆ‘ä»¬å°±ä½¿ç”¨é˜¿é‡Œäº‘ã€‚
PHP+MySQLåœ¨linuxä¸‹é…ç½®PHP+MySQLçš„ç¯å¢ƒï¼Œå…·ä½“æ­¥éª¤è¯·è‡ªè¡Œç™¾åº¦ã€‚å¦‚æœè§‰å¾—éº»çƒ¦ï¼Œå¯ä»¥åœ¨é˜¿é‡Œäº‘è´­ä¹°ä¸€ä¸ªé…ç½®å¥½çš„é•œåƒç³»ç»Ÿï¼Œ10å…ƒå·¦å³ã€‚
è¿œç¨‹å·¥å…·xshellï¼Œç”¨æ¥è¿œç¨‹ç™»å½•æœåŠ¡å™¨ç³»ç»Ÿï¼ˆä¸€èˆ¬æ˜¯Linuxï¼‰ï¼Œè¿›è¡Œä¸€äº›é…ç½®ã€‚xftpï¼Œç”¨æ¥ç®¡ç†æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ã€‚
æºç å¾®æ“å®˜ç½‘ï¼šhttp://www.we7.cc/ä»¥å‰ä½¿ç”¨å¾®æ“ï¼Œéœ€è¦æŠŠæ•´ä¸ªå¾®æ“ç³»ç»Ÿçš„æºç ä¸‹è½½ä¸‹æ¥ï¼Œç„¶åéƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šã€‚ç°åœ¨ï¼Œåªéœ€è¦ä¸‹è½½ä¸€ä¸ªåå«â€œinstall.phpâ€çš„æ–‡ä»¶å°±å¯ä»¥äº†ã€‚
æµç¨‹è¿æ¥æœåŠ¡å™¨1ã€æ‰“å¼€xshellï¼Œæ–‡ä»¶ï¼Œæ–°å»ºï¼Œè¾“å…¥æœåŠ¡å™¨çš„ipåœ°å€ï¼Œç¡®å®šï¼Œç„¶åè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œä¾¿å¯ä»¥è¿æ¥åˆ°æœåŠ¡å™¨ã€‚å“‡å’”å’”ï¼Œçœ‹åˆ°äº†é»‘é»é»çš„shellç•Œé¢ï¼Œcongratulationsï¼2ã€æ‰“å¼€xftpï¼Œæ–‡ä»¶ï¼Œæ–°å»ºï¼Œè¾“å…¥æœåŠ¡å™¨çš„ipåœ°å€ã€ç”¨æˆ·åã€å¯†ç ï¼Œä¾¿å¯ä»¥è¿æ¥åˆ°æœåŠ¡å™¨ã€‚
æŸ¥çœ‹å¸®åŠ©é€šè¿‡xftpï¼Œä¸‹è½½å¸®åŠ©æ–‡ä»¶ï¼Œå°±å¯ä»¥å¤§è‡´çŸ¥é“è‡ªå·±çš„æœåŠ¡å™¨çš„é…ç½®ã€‚å¯ä»¥çœ‹åˆ°ï¼ŒéƒåŒå­¦çš„webä¸»ç›®å½•ä¸º/alidata/wwwï¼ŒOKï¼Œæˆ‘ä»¬è¿›å…¥åˆ°/alidata/wwwç›®å½•ä¸‹ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªdefaultç›®å½•ã€‚æ²¡é”™ï¼Œè¿™å°±æ˜¯é»˜è®¤çš„webç½‘ç«™äº†ï¼Œè™½ç„¶é‡Œé¢åªæœ‰ä¸€ä¸ªindex.htmlã€‚è€Œæˆ‘ä»¬åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ä¸»æœºipåœ°å€ï¼Œçœ‹åˆ°çš„å°±æ˜¯è¿™ä¸ªindex.htmlã€‚
é…ç½®è™šæ‹Ÿä¸»æœºå¦‚æœå†³å®šç›´æ¥åœ¨defaultç›®å½•ä¸‹æ­å»ºå¾®æ“ï¼Œè¿™ä¸ªæ­¥éª¤å¯ä»¥å¿½ç•¥ã€‚å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸Šé¢æ­å»ºå¤šä¸ªç½‘ç«™ã€‚ä»¥Apacheä¸ºä¾‹ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®/etc/httpd/conf/httpd.confï¼Œç„¶åæ‰§è¡Œå‘½ä»¤service httpd restartï¼Œå…·ä½“æ­¥éª¤å¯ä»¥å€Ÿé‰´å‚è€ƒæ–‡æ¡£ã€‚æœ€ç»ˆç»“æœæ˜¯ï¼Œæˆ‘ä»¬é…ç½®äº†ä¸€ä¸ªåŸŸåä¸ºhttp://test.voidking.comï¼Œå¯¹åº”æœåŠ¡å™¨ä¸»æœºç›®å½•ä¸º/alidata/www/testã€‚
ä¸Šä¼ æºç é€šè¿‡xftpï¼ŒæŠŠä»å¾®æ“å®˜ç½‘ä¸‹è½½çš„â€œinstall.phpâ€ä¸Šä¼ åˆ°defaultç›®å½•ä¸‹ã€‚ï¼ˆé…ç½®è¿‡è™šæ‹Ÿä¸»æœºçš„è¯ï¼Œå°±ä¸Šä¼ åˆ°testç›®å½•ä¸‹ï¼‰åœ¨æµè§ˆå™¨è®¿é—®åœ°å€ï¼šServerName/install.phpï¼Œå…¶ä¸­ï¼ŒServerNameä¸ºipåœ°å€æˆ–è€…è‡ªå·±é…ç½®çš„åŸŸåã€‚æ²¡æœ‰æ„å¤–çš„è¯ï¼Œå¯ä»¥çœ‹åˆ°å¾®æ“çš„å®‰è£…å¼•å¯¼é¡µé¢ã€‚è‡³æ­¤ï¼ŒæˆåŠŸäº†ä¸€åŠã€‚
ç¯å¢ƒæ£€æŸ¥å¾®æ“å®‰è£…å¼•å¯¼ï¼Œä¼šè‡ªåŠ¨æ£€æµ‹ä½ çš„æœåŠ¡å™¨ç¯å¢ƒæ˜¯å¦ç¬¦åˆç³»ç»Ÿå®‰è£…çš„è¦æ±‚ï¼Œå¾ˆäººæ€§åŒ–ã€‚æˆ‘ä»¬çœ‹åˆ°ï¼Œç›®å½•æƒé™æœ‰é—®é¢˜ã€‚æ‰“å¼€xshellï¼Œè¿›å…¥åˆ°/alidata/wwwç›®å½•ä¸‹ï¼Œchmod -R 777 testï¼Œç»™testç›®å½•å’Œtestç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å¢åŠ è¯»å†™æ‰§è¡Œæƒé™ã€‚ç„¶åï¼Œå†æ¬¡æ£€æµ‹ï¼Œå·²ç»æ²¡æœ‰é—®é¢˜äº†ã€‚
ç³»ç»Ÿé…ç½®æ•°æ®åº“é€‰é¡¹ï¼Œè¾“å…¥æ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç å³å¯ï¼Œå…¶ä»–æ— éœ€ä¿®æ”¹ã€‚ç®¡ç†é€‰é¡¹ï¼Œåˆ›å»ºä¸€ä¸ªç®¡ç†å‘˜è´¦å·ï¼Œå¾®æ“å®‰è£…å®Œæˆåç”¨æ¥ç™»å½•ã€‚
ä¸‹è½½æ–‡ä»¶ç³»ç»Ÿé…ç½®å®Œæˆåï¼Œå•å‡»â€œç»§ç»­â€ï¼Œå¾®æ“ç³»ç»Ÿå°±ä¼šä¸‹è½½éœ€è¦çš„æ–‡ä»¶åˆ°testæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªåä¸ºâ€œwe7â€çš„æ•°æ®åº“ã€‚å–æ¯å’–å•¡çš„æ—¶é—´ï¼Œå°±å¯ä»¥å®Œæˆä¸‹è½½ã€‚
æ›´æ–°ç³»ç»Ÿç”¨åˆšæ‰é…ç½®çš„ç®¡ç†å‘˜è´¦å·ç™»å½•å¾®æ“ç³»ç»Ÿï¼Œçœ‹ä¸Šå»ï¼Œä¸€åˆ‡æ­£å¸¸ã€‚ç°åœ¨å°±å¯ä»¥ä½¿ç”¨äº†å—ï¼Ÿä¸ï¼Œåœ¨çº¿å®‰è£…çš„ç³»ç»Ÿæ˜¯ç²¾ç®€ç‰ˆï¼Œå¿…é¡»æ›´æ–°ï¼Œæ³¨æ„ï¼Œæ˜¯å¿…é¡»ï¼ä¸€èˆ¬æ¥è¯´ï¼Œç™»å½•åä¼šæœ‰æ›´æ–°æç¤ºï¼Œç‚¹è¿‡å»å³å¯ã€‚
æµ‹è¯•å¾®ä¿¡å…¬ä¼—å·å¾®ä¿¡å…¬ä¼—å·åˆ†ä¸¤ç§ï¼ŒæœåŠ¡å·å’Œè®¢é˜…å·ã€‚ä»€ä¹ˆå·®åˆ«å‘¢ï¼Ÿ1ã€æœåŠ¡å·åªæœ‰ä¼ä¸šæˆ–è€…å›¢ä½“æ‰èƒ½ç”³è¯·ï¼Œè€Œè®¢é˜…å·ç”³è¯·è¦æ±‚è¾ƒä½ï¼›2ã€æœåŠ¡å·æ˜¾ç¤ºåœ¨èŠå¤©åˆ—è¡¨é¡µï¼Œè€Œè®¢é˜…å·éƒ½åœ¨èŠå¤©åˆ—è¡¨é¡µçš„è®¢é˜…å·é‡Œé¢ï¼›3ã€æœåŠ¡å·åˆå§‹å°±å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰èœå•ï¼Œè€Œè®¢é˜…å·éœ€è¦å¾®åšè®¤è¯åŒæ—¶500äººè®¢é˜…æ‰å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰èœå•ï¼ˆ2015å¹´8æœˆèµ·ï¼Œèœå•ä¹Ÿå¼€æ”¾ç»™è®¢é˜…å·äº†ï¼Œä½†æ˜¯ä¸èƒ½åœ¨å¼€å‘è€…æ¨¡å¼ä½¿ç”¨ï¼Œä»éœ€è®¤è¯ï¼‰ï¼›4ã€æœåŠ¡å·æ¯æœˆå¯ä»¥æ¨é€4æ¡æ¶ˆæ¯ï¼Œè€Œè®¢é˜…å·å¯ä»¥æ¨é€30æ¡ã€‚
äº¤äº’åŸç†è¢«åŠ¨å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ã€‚å›¾ä¸­çš„ä¸ªäºº/ä¼ä¸šæœåŠ¡å™¨ï¼ŒæŒ‡çš„å°±æ˜¯å¾®æ“æ‰€åœ¨çš„æœåŠ¡å™¨ã€‚
è®¾ç½®å¾®ä¿¡æœåŠ¡å™¨ï¼Œæˆ–è€…ä¸»åŠ¨ç»™ç”¨æˆ·å‘æ¨é€æ•°æ®ã€‚
åŒå‘ç»‘å®š1ã€åœ¨å¾®æ“ç³»ç»Ÿï¼Œæ·»åŠ å…¬ä¼—å·ï¼Œè¾“å…¥è‡ªå·±çš„å…¬ä¼—å·å’Œå¯†ç ä¸€é”®è·å–å…¬ä¼—å·ä¿¡æ¯ï¼Œæˆ–è€…è‡ªå·±å¡«å…¥å…¬ä¼—å·ä¿¡æ¯ã€‚æœ€ç»ˆç”Ÿæˆæˆ‘ä»¬éœ€è¦çš„URLã€Tokenã€EncodingAESKeyã€‚
2ã€åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°ï¼Œç™»å½•è‡ªå·±çš„å…¬ä¼—å·ã€‚å·¦è¾¹å¯¼èˆªæ ï¼Œå¼€å‘ï¼ŒåŸºæœ¬é…ç½®ã€‚å…¶ä¸­ï¼ŒURLã€Tokenã€EncodingAESKeyè¦å’Œå¾®æ“ä¸­ä¸€è‡´ã€‚
helloworldåœ¨å¾®æ“ç³»ç»Ÿä¸­ï¼Œç®¡ç†å…¬ä¼—å·ï¼Œæ–‡å­—å›å¤ï¼Œæ·»åŠ åŸºæœ¬æ–‡å­—å›å¤ã€‚è¾“å…¥è§„åˆ™åç§°ã€è§¦å‘è§„åˆ™ã€å›å¤å†…å®¹ï¼Œä¿å­˜ï¼Œæäº¤ã€‚æ‰‹æœºå…³æ³¨è‡ªå·±çš„å…¬ä¼—å·ï¼Œåœ¨èŠå¤©ç•Œé¢è¾“å…¥â€œhelloworldâ€ï¼Œçœ‹çœ‹è¿”å›äº†ä»€ä¹ˆï¼Ÿâ€œæ­å–œä½ è¿›å…¥äº†ä¸€ä¸ªæ–°çš„ä¸–ç•Œï¼â€å¾®æ“ç³»ç»Ÿï¼Œè‡³æ­¤åŸºæœ¬æ­å»ºå®Œæˆï¼Œæ›´å¤šå¥½ç©çš„åŠŸèƒ½ï¼Œç­‰ç€ä½ å»å‘æ˜ã€‚
åè®°åœ¨æ­å»ºå¾®æ“ç³»ç»Ÿçš„è¿‡ç¨‹ä¸­ï¼Œä¼šé‡åˆ°å„ç§å„æ ·æ„æƒ³ä¸åˆ°çš„é”™è¯¯ã€‚å§æ§½ï¼Œé€—æˆ‘å—ï¼Ÿä¸ºä»€ä¹ˆå†™æ•™ç¨‹çš„å®¶ä¼™æ²¡æœ‰é‡åˆ°è¿™ç§é”™è¯¯ï¼è«æ–¹ï¼ŒéƒåŒå­¦ä¹Ÿé‡åˆ°è¿‡å„ç§ä¸æ‡‚ï¼Œå„ç§é”™è¯¯ã€‚ç™¾åº¦ã€å®˜ç½‘ã€åšå®¢ã€è®ºå›ã€QQç¾¤ã€å‰è¾ˆï¼Œæ€»èƒ½æ‰¾åˆ°ä½ æƒ³è¦çš„ç­”æ¡ˆã€‚
å‚è€ƒæ–‡æ¡£å¾®æ“å¼€å‘æ–‡æ¡£http://www.we7.cc/docs/#introduce
é˜¿é‡Œäº‘ä¸€é”®å®‰è£…webæ”»ç•¥https://bbs.aliyun.com/read/153209.html
å…¬é’¥å’Œç§é’¥http://blog.csdn.net/tanyujing/article/details/17348321
åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šæ­å»ºå¤šä¸ªç½‘ç«™çš„æ–¹æ³•ï¼ˆApacheç‰ˆï¼‰https://help.aliyun.com/knowledge_detail/6701386.html
Apache è™šæ‹Ÿä¸»æœº VirtualHost é…ç½®http://www.neoease.com/apache-virtual-host/
DocumentRoot does not existè§£å†³æ–¹æ³•http://blog.csdn.net/zhuoyr/article/details/8393854
å¾®ä¿¡å…¬ä¼—å·æäº¤å¼€å‘è€…æç¤ºtokenéªŒè¯å¤±è´¥http://www.68ecshop.com/article-1656.html
Xshell å¯åŠ¨æŠ¥ç¼ºå°‘msvcp110.dllæ–‡ä»¶http://blog.csdn.net/z1154505909/article/details/50474104
]]></content>
      <categories>
        <category>engineering</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡</tag>
      </tags>
  </entry>
  <entry>
    <title>Sublime Text3</title>
    <url>/dev-sublime/</url>
    <content><![CDATA[Sublimeç®€ä»‹
Sublime Text is a sophisticated text editor for code, markup and prose.Youâ€™ll love the slick user interface, extraordinary features and amazing performance.

sublimeæ˜¯å‰ç«¯ç¥å™¨ï¼Œæ”¯æŒmarkdownè¯­æ³•é«˜äº®ï¼Œéå¸¸é€‚åˆä½œä¸ºæ—¥å¸¸ç¼–è¾‘å™¨ä½¿ç”¨ã€‚
Sublimeçš„å®‰è£…å¾ˆç®€å•ï¼Œè®¿é—®Sublimeå®˜ç½‘ï¼Œä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„å®‰è£…åŒ…ï¼ŒåŒå‡»å®‰è£…å³å¯ã€‚


å¸¸ç”¨è®¾ç½®å˜æ›´å­—ä½“Sublimeé»˜è®¤å­—ä½“æ˜¯Consolasï¼ŒConsolasè‹±æ–‡æ˜¾ç¤ºå¾ˆå¥½ï¼Œä½†æ˜¯ä¸­æ–‡æ˜¾ç¤ºä¸å¤ªå¥½çœ‹ã€‚æœ‰ä¸€æ¬¾å­—ä½“æ˜¯Consolaså’Œå¾®è½¯é›…é»‘çš„æ··åˆå­—ä½“ï¼Œå«åšYaHei Consolas Hybridï¼Œå°ä¼™ä¼´å¯ä»¥è¯•è¯•çœ‹ã€‚1ã€ä¸‹è½½å®‰è£…YaHei Consolas Hybrid2ã€Sublimeèœå•æ é‡Œç‚¹å‡»Preferencesï¼ŒSettingã€‚3ã€åœ¨å¼¹å‡ºæ¥çš„Preferences.sublime-settingsâ€”â€”Useræ–‡æœ¬é‡Œï¼Œæ·»åŠ å¦‚ä¸‹ä¸€è¡Œ:
&quot;font_face&quot;: &quot;YaHei Consolas Hybrid&quot;,

TABè½¬ç©ºæ ¼åœ¨ç”¨Sublimeé‡Œç¼–å†™Pythonä»£ç æ—¶ï¼Œéœ€è¦æŠŠTABé”®ï¼ˆåˆ¶è¡¨é”®ï¼‰è½¬æ¢æˆå››ä¸ªç©ºæ ¼ã€‚å…·ä½“åšæ³•å¦‚ä¸‹ï¼š1ã€èœå•æ é‡Œç‚¹å‡»Preferencesï¼ŒSettingã€‚2ã€åœ¨å¼¹å‡ºæ¥çš„Preferences.sublime-settingsâ€”â€”Useræ–‡æœ¬é‡Œï¼Œæ·»åŠ å¦‚ä¸‹ä¸¤è¡Œ:
&#123;    &quot;tab_size&quot;: 4,    &quot;translate_tabs_to_spaces&quot;: true&#125;

ä»¥ä¸Šé…ç½®ï¼Œåœ¨ä½¿ç”¨sublimeæ–°å»ºæ–‡ä»¶åï¼Œç¼–è¾‘æ—¶ä½¿ç”¨tabé”®ï¼Œtabåˆ¶è¡¨ç¬¦ä¼šè‡ªåŠ¨è½¬æˆ4ä¸ªç©ºæ ¼ã€‚ä½†æ˜¯ï¼Œå¯¹äºå·²ç»å­˜åœ¨çš„ä½¿ç”¨tabåˆ¶è¡¨ç¬¦çš„æ–‡ä»¶ï¼Œç¼–è¾‘æ—¶ä½¿ç”¨tabé”®ä¾ç„¶è¿˜æ˜¯tabåˆ¶è¡¨ç¬¦ï¼Œä¸ä¼šè‡ªåŠ¨è½¬æ¢æˆç©ºæ ¼ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç‚¹å‡»sublimeå³ä¸‹è§’çš„ â€œTab Size: Nâ€ï¼Œé€‰æ‹© â€œConvert Indentation to Spacesâ€ã€‚è¿™æ ·å¤„ç†ä¾ç„¶æœ‰ç‚¹éº»çƒ¦ï¼Œèƒ½ä¸èƒ½åœ¨ä¿å­˜æ—¶è‡ªåŠ¨è½¬æ¢æˆç©ºæ ¼å‘¢ï¼Ÿå¯ä»¥çš„ã€‚
3ã€èœå•æ é‡Œç‚¹å‡» Preferenceï¼ŒBrowser Packagesâ€¦ï¼Œæ–°å»ºä¸€ä¸ªç›®å½• ExpandTabsOnSaveï¼Œç›®å½•é‡Œæ–°å»ºæ–‡ä»¶ ExpandTabsOnSave.pyï¼Œå†…å®¹ä¸ºï¼š
import sublime, sublime_plugin, osclass ExpandTabsOnSave(sublime_plugin.EventListener):    def on_pre_save(self, view):        if view.settings().get(&#x27;expand_tabs_on_save&#x27;) == 1:            view.window().run_command(&#x27;expand_tabs&#x27;)

4ï¼ŒPreferences.sublime-settingsâ€”â€”User é‡Œæ·»åŠ ä¸€è¡Œï¼š
&#123;    &quot;expand_tabs_on_save&quot;: true&#125;
ä»¥ä¸Šé…ç½®ï¼Œå°±å¯ä»¥åœ¨ä¿å­˜æ—¶è‡ªåŠ¨æŠŠtabåˆ¶è¡¨ç¬¦è½¬æ¢æˆç©ºæ ¼ã€‚
å…³é—­æ›´æ–°æç¤ºç‚¹å‡»èœå•æ Preferencesï¼ŒSettingsï¼Œåœ¨å¼¹å‡ºçš„Settings-Useréƒ¨åˆ†ä¸­æ·»åŠ ï¼š
&quot;update_check&quot;: false,

PSï¼šå‰ææ˜¯sublimeå·²ç»æ³¨å†Œï¼Œæ³¨å†Œæ–¹æ³•å‚è€ƒSublime Text 3æ³¨å†Œç ã€‚
1ã€ä¸‹è½½å¹¶å®‰è£…Sublime Text 3.2.2 Build 3211
2ã€æµè§ˆå™¨è®¿é—®åå…­è¿›åˆ¶ç¼–è¾‘å™¨Hexed.it
3ã€æ‰“å¼€æ–‡ä»¶sublime_text.exeï¼Œæœç´¢97 94 0Dï¼Œæ›´æ”¹ä¸º00 00 00ã€‚æœç´¢38 18 0F 94 C1ï¼Œä¿®æ”¹ä¸ºC6 00 01 90 90ã€‚
4ã€ä¸‹è½½ä¿®æ”¹åçš„sublime_text.exeï¼Œè¦†ç›–åŸæœ‰sublime_text.exe
åŒä¸€ä¸ªçª—å£ä¸­æ‰“å¼€æ–‡ä»¶åŒå‡»æŸä¸ªæ–‡æœ¬ä½¿ç”¨sublimeæ‰“å¼€ï¼Œsublimeé»˜è®¤ä¼šæ–°å¼€ä¸€ä¸ªçª—å£ã€‚ä½†æ˜¯å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬ä¸æƒ³æ–°å¼€çª—å£ï¼Œè€Œæ˜¯æƒ³å’Œå…¶ä»–æ–‡ä»¶åœ¨åŒä¸€ä¸ªçª—å£ä¸­è¿›è¡Œç¼–è¾‘ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹é»˜è®¤é…ç½®ï¼Œä½¿ç”¨åŒä¸€ä¸ªçª—å£æ‰“å¼€æ–°æ–‡æœ¬ã€‚
ç‚¹å‡»èœå•æ Preferencesï¼ŒSettingsï¼Œåœ¨å¼¹å‡ºçš„Settings-Useréƒ¨åˆ†ä¸­æ·»åŠ ï¼š
&quot;open_files_in_new_window&quot;: false

PSï¼šSettings-Defaultéƒ¨åˆ†æ— æ³•ç¼–è¾‘ï¼Œopen_files_in_new_window å‚æ•°å€¼ä¸º trueï¼Œä¸ç”¨ç®¡å®ƒï¼Œå› ä¸ºSettings-Userä¼˜å…ˆçº§æ›´é«˜ï¼Œä¼šè¦†ç›–Settings-Defaultçš„é…ç½®ã€‚
å¸¸ç”¨å¿«æ·é”®
ctrl+Dï¼šé€‰æ‹©å•è¯ï¼Œé‡å¤å¯å¢åŠ é€‰æ‹©ä¸‹ä¸€ä¸ªç›¸åŒçš„å•è¯ã€‚
ctrl+alt+â†‘â†“ã€‚åŒåˆ—å¤šè¡ŒåŒæ—¶ç¼–è¾‘ã€‚
ctrl+Lï¼šé€‰æ‹©è¡Œï¼Œé‡å¤å¯ä¾æ¬¡å¢åŠ é€‰æ‹©ä¸‹ä¸€è¡Œã€‚
shift+ctrl+â†‘â†“ã€‚å¯å®ç°ç±»ä¼¼é¼ æ ‡é€‰ä¸­ä¹‹åç§»åŠ¨çš„æ•ˆæœã€‚
ctrl+Pï¼šæœç´¢é¡¹ç›®ä¸­çš„æ–‡ä»¶ï¼Œæ¨¡ç³ŠåŒ¹é…æ–‡ä»¶åã€‚
ctrl+Rï¼šå‰å¾€ methodã€‚
ctrl+Fï¼šæŸ¥æ‰¾å­—ç¬¦ä¸²ã€‚
ctrl+shift+Fï¼šåœ¨æ•´ä¸ªé¡¹ç›®ä¸­æŸ¥æ‰¾å­—ç¬¦ä¸²ã€‚å¦‚æœå¿«æ·é”®ä¸å¯ç”¨ï¼Œåˆ™Find-&gt;Find in Filesâ€¦ã€‚
ctrl+Hï¼šæŸ¥æ‰¾å¹¶æ›¿æ¢ã€‚
ctrl+shift+Pï¼šæ‰“å¼€å‘½ä»¤é¢æ¿ã€‚è¾“å…¥set syntax:cssï¼Œå¯ä»¥è®¾ç½®è¯­æ³•ä¸ºcssã€‚
ctrl+shift+[ï¼šæŠ˜å ä»£ç æ®µã€‚
ctrl+shift+Vï¼šç²˜è´´å¹¶æ ¼å¼åŒ–ã€‚
ctrl+enterï¼šåœ¨å½“å‰è¡Œåæ’å…¥ä¸€è¡Œã€‚
ctrl+shift+enterï¼šåœ¨å½“å‰è¡Œå‰æ’å…¥ä¸€è¡Œã€‚
ctrl+shift+Dï¼šå¿«é€Ÿå¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„ä¸€æ•´è¡Œï¼Œå¹¶å¤åˆ¶åˆ°è¯¥è¡Œä¹‹å‰ã€‚
ctrl+shift+Kï¼šåˆ é™¤ä¸€è¡Œã€‚
ctrl+shift+â†‘â†“ï¼šå¯æ›¿æ¢è¡Œã€‚
ctrl+/ï¼šæ³¨é‡Šå½“å‰è¡Œã€‚
ctrl+shift+/ï¼šå½“å‰ä½ç½®æ’å…¥æ³¨é‡Šã€‚
ctrl+shift+Aï¼šé€‰ä¸­æ ‡ç­¾å†…çš„å†…å®¹ä¸åŒ…æ‹¬æ ‡ç­¾ï¼Œç»§ç»­æŒ‰ä¼šç»§ç»­å¾€ä¸Šä¸€å±‚é€‰æ‹©ã€‚
f11ï¼šå…¨å±ã€‚
shift+f11ï¼šå…¨å±å…æ‰“æ‰°æ¨¡å¼ï¼Œåªç¼–è¾‘å½“å‰æ–‡ä»¶ã€‚
escï¼šé€€å‡ºå„ç§é¢æ¿ã€‚

Package Controlå®‰è£…1ã€è®¿é—®Package Controlå®˜ç½‘ï¼Œæ‰¾åˆ°package controlçš„å®‰è£…ä»£ç ï¼ˆä¸å®šæ—¶æ›´æ–°ï¼‰ã€‚
import urllib.request,os,hashlib; h = &#x27;6f4c264a24d933ce70df5dedcf1dcaee&#x27; + &#x27;ebe013ee18cced0ef93d5f746d80ef60&#x27;; pf = &#x27;Package Control.sublime-package&#x27;; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( &#x27;http://packagecontrol.io/&#x27; + pf.replace(&#x27; &#x27;, &#x27;%20&#x27;)).read(); dh = hashlib.sha256(by).hexdigest(); print(&#x27;Error validating download (got %s instead of %s), please try manual install&#x27; % (dh, h)) if dh != h else open(os.path.join( ipp, pf), &#x27;wb&#x27; ).write(by)

2ã€ctrl + ~ è°ƒå‡º consoleï¼ˆæˆ–è€…View - Show Consoleï¼‰ï¼Œå°†å®‰è£…ä»£ç ç²˜è´´è¿›å»å¹¶ enter æ‰§è¡Œã€‚
3ã€å®‰è£…å®ŒæˆåPreferencesä¸­å‡ºç°Package Controlã€‚
ä½¿ç”¨æ–¹æ³•1ã€æŸ¥çœ‹å·²å®‰è£…æ’ä»¶ctrl+shift+Pï¼Œè¾“å…¥packageï¼Œé€‰æ‹©list packagesã€‚
2ã€å®‰è£…æ’ä»¶ctrl+shift+Pï¼Œè¾“å…¥packageï¼Œé€‰æ‹©install packagesã€‚è¾“å…¥æˆ–é€‰æ‹©ä½ éœ€è¦çš„æ’ä»¶ï¼Œå›è½¦å®‰è£…ï¼ˆæ³¨æ„å·¦ä¸‹è§’çš„å°æ–‡å­—å˜åŒ–ï¼Œä¼šæç¤ºå®‰è£…æˆåŠŸï¼‰ã€‚
3ã€å¸è½½æ’ä»¶ctrl+shift+Pï¼Œè¾“å…¥packageï¼Œé€‰æ‹©remove packagesã€‚
å¸¸ç”¨æ’ä»¶Sodaä¼ è¯´ä¸­å®Œç¾çš„ç¼–ç ä¸»é¢˜ï¼Œå®˜ç½‘ï¼šhttp://buymeasoda.github.io/soda-theme/
EmmetHTML/CSSä»£ç å¿«é€Ÿç¼–å†™ç¥å™¨ï¼Œé¡¹ç›®åœ°å€ï¼šhttps://github.com/sergeche/emmet-sublime#readme
Javascript Completionsæµ‹è¯•äº†å¤šä¸ªjsæ’ä»¶ï¼Œè¿™ä¸ªæ˜¯æœ€å¥½ç”¨çš„ï¼Œé¡¹ç›®åœ°å€ï¼šhttps://github.com/pichillilorenzo/JavaScript-Completions
sublime jQueryæä¾›äº†é¢å¤–çš„è¯­æ³•é«˜äº®å’Œå‡ ä¹æ‰€æœ‰jQueryæ–¹æ³•çš„ç‰‡æ®µï¼Œé¡¹ç›®åœ°å€ï¼šhttps://github.com/SublimeText/jQuery/
SideBar Enhancementsæ”¹è¿›äº†ä¾§è¾¹æ ï¼Œå¢åŠ äº†è®¸å¤šåŠŸèƒ½ã€‚
sublimelinterè¯­æ³•æ£€æŸ¥æ’ä»¶ï¼Œå®‰è£…sublimelinterå’Œsublimelinter-*ï¼Œ*ä¸ºæ‰€ç”¨çš„è¯­è¨€ï¼Œä¾‹å¦‚sublimelinter-phpã€‚
Jedi - Python autocompletionJedi - an awesome autocompletion/static analysis library for Python.é¡¹ç›®åœ°å€ï¼šhttps://github.com/davidhalter/jedi
ConvertToUTF8sublimeé»˜è®¤ä¸æ”¯æŒGBKç¼–ç æ ¼å¼ï¼Œå› æ­¤æ‰“å¼€GBKç¼–ç çš„æ–‡ä»¶ä¼šå‡ºç°ä¹±ç ï¼Œæœ¬æ’ä»¶å¯ä»¥ä½¿sublimeæ”¯æŒGBKç¼–ç æ ¼å¼ã€‚
PackageResourceVieweræ›´æ”¹ä¾§è¾¹æ å­—ä½“æ˜¾ç¤ºå¤§å°ï¼Œå‚è€ƒSublime text 3æ›´æ”¹ä¾§è¾¹æ ã€sidebarã€‘çš„å­—ä½“å¤§å° å’Œ ä¿®æ”¹Sublime Text3 çš„ä¾§è¾¹æ å­—ä½“å¤§å°ã€‚é¡¹ç›®åœ°å€ï¼šhttps://packagecontrol.io/packages/PackageResourceViewer
ä»£ç ç¼©è¿›æ ¼å¼åŒ–ä½¿ç”¨Jetbrainsç³»åˆ—IDEè¿›è¡Œä»£ç æ ¼å¼åŒ–å¾ˆæ–¹ä¾¿ï¼ŒWindowsä¸Š Ctrl+Alt+L ï¼ŒMacä¸Š command+option+L ã€‚é‚£ä¹ˆï¼Œä½¿ç”¨sublimeçš„æ—¶å€™ï¼Œæœ‰æ²¡æœ‰è¿™ä¹ˆæ–¹ä¾¿çš„å¿«æ·é”®è¿›è¡Œä»£ç æ ¼å¼åŒ–å‘¢ï¼Ÿæ²¡æœ‰ï¼
ä½†æ˜¯ï¼Œsublimeæä¾›äº†ä¸€ä¸ªè°ƒæ•´ç¼©è¿›çš„æ–¹æ³•ï¼š1ã€å…¨é€‰ä»£ç 2ã€Editï¼ŒLineï¼ŒReindent
çœ‹èµ·æ¥ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•æ˜¯æœ‰é—®é¢˜çš„ã€‚å¦‚æœä»£ç ä¹‹å‰å·²ç»æœ‰äº†ä¸€äº›ä¸è§„èŒƒçš„ç¼©è¿›ï¼Œæ¯”å¦‚tabå’Œspaceæ··ç”¨ï¼Œæ¯”å¦‚ä¸‰ä¸ªç©ºæ ¼ç¼©è¿›ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œæœ€ç»ˆæ ¼å¼åŒ–å‡ºæ¥çš„ä»£ç ä»ç„¶æ˜¯æœ‰é—®é¢˜çš„ã€‚
æ­£ç¡®çš„ä»£ç æ ¼å¼åŒ–æ–¹æ³•ä¸ºï¼š1ã€å…¨é€‰ä»£ç 2ã€shift+tabï¼Œé‡å¤ç›´è‡³æ‰€æœ‰è¡Œéƒ½ä¸è¿›è¡Œç¼©è¿›3ã€Editï¼ŒLineï¼ŒReindent
å½“ç„¶ï¼Œè¿™ç§æ–¹æ³•è°ƒæ•´çš„åªæ˜¯ç¼©è¿›ï¼Œæ ¼å¼åŒ–æ•ˆæœä¸å¦‚Jetbrainsã€‚
æ‰“é€ ä¾¿æºsublimeåˆ¶ä½œ1ã€åœ¨åœ°å€æ è¾“å…¥ %appdata% ç„¶ååˆ é™¤è¯¥ç›®å½•ä¸‹çš„Sublime Text 3æ–‡ä»¶å¤¹ã€‚2ã€åœ¨sublimeçš„å®‰è£…ç›®å½•ä¸‹ï¼ˆä¾‹å¦‚ï¼Œæˆ‘çš„ç”µè„‘ä¸Šçš„å®‰è£…ç›®å½•æ˜¯ï¼šC:\Program Files\Sublime Text 3ï¼‰ï¼Œæ–°å»º Data æ–‡ä»¶å¤¹(æ³¨æ„å¤§å°å†™)ã€‚3ã€æ‰“å¼€Sublime Textï¼Œæ‰€æœ‰çš„é…ç½®æ–‡ä»¶éƒ½ä¼šç”Ÿæˆåœ¨Dataæ–‡ä»¶å¤¹ä¸­ã€‚4ã€æ‰“åŒ…å‹ç¼©Sublime Text 3ï¼Œå³å¯åˆ¶ä½œå®Œæˆä¾¿æºsublimeã€‚
ä½¿ç”¨æ–¹æ³•ä¸€ç›´æ¥è§£å‹è‡ªå·±åˆ¶ä½œçš„å‹ç¼©åŒ…ã€‚
ä½¿ç”¨æ–¹æ³•äºŒ1ã€æ­£å¸¸å®‰è£…sublimeï¼Œå®‰è£…å®Œæˆåä¸è¦å¯åŠ¨ã€‚2ã€æŠŠè‡ªå·±åˆ¶ä½œçš„å‹ç¼©åŒ…ä¸­çš„Dataæ–‡ä»¶å¤¹è§£å‹åˆ°sublimeçš„å®‰è£…ç›®å½•ã€‚3ã€å˜æ›´sublimeçš„å®‰è£…ç›®å½•æƒé™ä¸ºå®Œå…¨æ§åˆ¶ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>ç¼–è¾‘å™¨</tag>
        <tag>å‰ç«¯</tag>
        <tag>markdown</tag>
        <tag>sublime</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯•ä¸šä¸“ä¸šç¯å¢ƒçš„æ­å»º</title>
    <url>/dev-graduation-project-dev-environment/</url>
    <content><![CDATA[Webstormè®¿é—®Jetbrainsçš„Webstormå®˜ç½‘ï¼šhttp://www.jetbrains.com/webstorm/ ï¼Œä¸‹è½½Webstormï¼ŒåŒå‡»å®‰è£…ã€‚
Gitè®¿é—®Gitå®˜ç½‘ï¼šhttps://git-scm.com/download/ ï¼Œä¸‹è½½Gitï¼ŒåŒå‡»å®‰è£…ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨Select Componentsç•Œé¢ï¼Œç‚¹é€‰Simple context menuï¼Œæ–¹ä¾¿ä»¥åç›´æ¥å³é”®æ‰“å¼€Git bashã€‚
Nodeè®¿é—®Nodeå®˜ç½‘ï¼šhttps://nodejs.org/en/ ï¼Œä¸‹è½½ç¨³å®šç‰ˆçš„Nodeï¼ŒåŒå‡»å®‰è£…ã€‚å®‰è£…ä¹‹åï¼Œwin+Rï¼Œcmdï¼Œæ‰“å¼€å‘½ä»¤æç¤ºç¬¦ç•Œé¢ï¼Œè¾“å…¥node --versionï¼Œå¦‚æœå¯ä»¥çœ‹åˆ°ç‰ˆæœ¬å·ï¼Œå°±è¯´æ˜å®‰è£…æˆåŠŸã€‚
Expressæ–°å»ºæ–‡ä»¶å¤¹nodeforumï¼Œåœ¨æ–‡ä»¶å¤¹ä¸‹æ‰“å¼€Git bashï¼Œnpm install expressã€‚
æµ‹è¯•è¿è¡Œåœ¨nodeforumä¸‹æ–°å»ºæ–‡ä»¶app.jsï¼Œå†…å®¹å¦‚ä¸‹ï¼š
var express = require(&#x27;express&#x27;);var app = express();app.get(&#x27;/&#x27;, function (req, res) &#123;   res.send(&#x27;Hello World&#x27;);&#125;);var server = app.listen(3000, function () &#123;  console.log(&#x27;åº”ç”¨å¯åŠ¨åœ¨port:&#x27;+3000)&#125;);
åœ¨Git bashä¸‹è¾“å…¥ï¼šnode app.jsã€‚ç„¶åè®¿é—®http://localhost:3000 ï¼Œçœ‹åˆ°â€œHello Worldâ€ï¼Œå°±è¡¨æ˜expresså®‰è£…æˆåŠŸï¼
MongoDBè®¿é—®MongoDBå®˜ç½‘ï¼šhttps://www.mongodb.com/download-center#communityä¸‹è½½MongoDBï¼ŒåŒå‡»å®‰è£…ã€‚ä¹‹åï¼Œæ‰“å¼€å‘½ä»¤æç¤ºç¬¦ç•Œé¢ï¼Œè¾“å…¥mongoï¼Œè¿›å…¥MongoDB shellï¼Œå¦‚æœå¯ä»¥è¿›å…¥ï¼Œè¯´æ˜å®‰è£…æˆåŠŸã€‚
é¡¹ç›®ç»“æ„â”‚  .gitignoreâ”‚  app.jsâ”‚  bower.jsonâ”‚  config.jsâ”‚  package.jsonâ”‚  README.mdâ”‚  socket-event.jsâ”‚  web-router.jsâ”œâ”€bower_componentsâ”œâ”€controllersâ”œâ”€modelsâ”œâ”€node_modulesâ”œâ”€publicâ”‚  â”œâ”€cssâ”‚  â”œâ”€imgâ”‚  â”œâ”€jsâ”‚  â””â”€scssâ”œâ”€schemasâ””â”€views

.gitignoreå†…å†™çš„æ˜¯ä¸éœ€è¦ä¸Šä¼ åˆ°GitæœåŠ¡å™¨çš„æ–‡ä»¶ã€‚
app.jsæ˜¯ç¨‹åºçš„å…¥å£ã€‚
bower.jsonæ˜¯Boweré…ç½®æ–‡ä»¶ï¼Œå£°æ˜äº†ä¸€ç³»åˆ—ä¸å‰ç«¯åŒ…æœ‰å…³çš„å†…å®¹ã€‚
config.jså£°æ˜äº†ä¸€äº›å…¨å±€é…ç½®ã€‚
package.jsonæ˜¯Npmçš„é…ç½®æ–‡ä»¶ï¼Œå£°æ˜äº†ä¸€ç³»åˆ—ä¸Nodeä¾èµ–åŒ…æœ‰å…³çš„å†…å®¹ã€‚
README.mdæ˜¯å…³äºæ•´ä¸ªé¡¹ç›®çš„è¯´æ˜ã€‚
socket-event.jsé‡Œå®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥å¤„ç†socket.ioçš„æœåŠ¡å™¨ç«¯ã€‚
web-router.jsé‡Œå†™çš„æ˜¯è·¯ç”±æ§åˆ¶ã€‚
bower_componentsæ–‡ä»¶å¤¹é‡Œæ˜¯å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦ä¾èµ–çš„ä¸€äº›å‰ç«¯è½¯ä»¶åŒ…ã€‚
controllersæ–‡ä»¶å¤¹é‡Œæ˜¯å¤„ç†è¯·æ±‚ï¼Œä»¥åŠæ§åˆ¶é¡µé¢è·³è½¬çš„ä¸€äº›æ–‡ä»¶ã€‚
modelsæ–‡ä»¶å¤¹é‡Œæ˜¯ä¸€äº›Mongooseå»ºç«‹çš„Modelæ–‡ä»¶ã€‚
node_modulesæ–‡ä»¶å¤¹é‡Œæ˜¯å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦ä¾èµ–çš„ä¸€äº›Nodeè½¯ä»¶åŒ…ã€‚
publicæ–‡ä»¶å¤¹é‡Œå­˜æ”¾è‡ªå·±å†™çš„scssæ–‡ä»¶ã€jsæ–‡ä»¶ã€éœ€è¦ç”¨åˆ°å›¾ç‰‡æ–‡ä»¶ã€‚
schemasæ–‡ä»¶å¤¹é‡Œæ˜¯ä¸€äº›Mongooseå»ºç«‹çš„Schemaæ–‡ä»¶ã€‚
viewsæ–‡ä»¶é‡Œå­˜æ”¾çš„æ˜¯å‰ç«¯æ¨¡æ¿æ–‡ä»¶ã€‚

]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>node</tag>
        <tag>æ¯•è®¾</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¯•ä¸šè®¾è®¡å¼€å§‹</title>
    <url>/dev-graduation-project-start/</url>
    <content><![CDATA[å‰è¨€å‰å‰ååï¼ŒæŠ•äº†æœ‰ä¸‰åå®¶å…¬å¸äº†ã€‚ç„¶è€Œï¼Œå”¯ä¸€çš„é¢è¯•é€šçŸ¥ï¼Œå±…ç„¶å¬ä¸åˆ°å£°éŸ³ï¼Œå›ç”µä¹Ÿæ‰“ä¸é€šã€‚ã€‚ã€‚è²Œä¼¼ï¼Œå›å®¶å‰å¾ˆéš¾æ‰¾åˆ°å·¥ä½œäº†ã€‚æ²¡æœ‰å·¥ä½œï¼Œå°±ä¸“å¿ƒåšæ¯•è®¾ï¼Œæœ‰ä¸ªä½œå“å¯¹æ‰¾å·¥ä½œä¹Ÿæœ‰å¸®åŠ©ã€‚


æ¯•è®¾é€‰é¢˜æƒ³äº†å¾ˆä¹…ï¼Œæœ€ç»ˆå†³å®šï¼Œåšä¸€ä¸ªç¤¾åŒºç½‘ç«™ç³»ç»Ÿã€‚ä¸»è¦æœ‰æ³¨å†Œã€ç™»é™†ã€å‘å¸–ã€å›å¸–ã€å…³æ³¨ã€æ”¶è—ã€@ã€ç§ä¿¡ã€åˆ†äº«ã€ä¸ªäººä¿¡æ¯ç®¡ç†ã€ç³»ç»Ÿç®¡ç†ç­‰åŠŸèƒ½ï¼Œå‚è€ƒ http://named.cn/.mine
æŠ€æœ¯æ¶æ„ç”¨çš„æœ€ç†Ÿç»ƒçš„æ˜¯Javaï¼Œä½†æ˜¯ï¼Œè¿™ä¸€æ¬¡ï¼ŒéƒåŒå­¦å†³å®šä½¿ç”¨ä¸å¤Ÿç†Ÿç»ƒçš„æŠ€æœ¯â€”â€”Node.jsã€‚å› ä¸ºï¼Œè¿™æ˜¯æˆ‘æœªæ¥æƒ³è¦æ·±å…¥å‘å±•çš„æ–¹å‘â€”â€”å‰ç«¯ï¼
è¿™ä¸ªé¡¹ç›®å¯èƒ½ç”¨åˆ°çš„æŠ€æœ¯å’Œæ¡†æ¶æœ‰ï¼šNode.jsã€Expressã€EJSã€Bootstrapã€MongoDBã€‚
å¼€å‘å·¥å…·ï¼šWebstorm
åè®°ä»ä»Šå¤©å¼€å§‹ï¼Œè®°å½•ä¸‹åšæ¯•è®¾çš„ç‚¹ç‚¹æ»´æ»´ã€‚åŒæ—¶ï¼Œæœ¬é¡¹ç›®å¼€æºï¼Œå¸Œæœ›èƒ½å¤Ÿå¯¹å…¶ä»–å°ä¼™ä¼´æœ‰æ‰€å¸®åŠ©ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>node</tag>
        <tag>æ¯•è®¾</tag>
      </tags>
  </entry>
  <entry>
    <title>æå®¢å¤§èµ›å›é¡¾</title>
    <url>/essay-geek-review/</url>
    <content><![CDATA[å¤§ä¼—ç‚¹è¯„æå®¢å¤§èµ›ï¼Œä¸€æ®µéš¾å¿˜çš„ç»å†ã€‚æ¥ä¸‹æ¥çš„ä¸€æ®µæ—¶é—´ï¼Œæœ‰äº†å¹ç‰›é€¼çš„ææ–™ã€‚å·®ä¸€ç‚¹æ‹¿åˆ°ä¸€ç­‰å¥–ï¼Œè™½æœ‰é—æ†¾ï¼Œä½†æ˜¯äºŒç­‰å¥–çš„ipad airï¼Œä¾ç„¶ä»¤äººæƒŠå–œã€‚
æ¯”èµ›ä¹‹åï¼ŒéƒåŒå­¦åšå®šäº†è€ƒç ”çš„ä¿¡å¿µã€‚å­¦å†ï¼ŒåŸæ¥å¯ä»¥å¦‚æ­¤é‡è¦ã€‚


æœ¬æ¬¡å¤§èµ›ï¼Œå®é™…ä¸Šæ˜¯å¤§ä¼—ç‚¹è¯„çš„ä¸€æ¬¡æ‹›è˜ä¼šã€‚é€šè¿‡ä¸€å¤©ä¸€å¤œçš„ç¼–ç¨‹é©¬æ‹‰æ¾ï¼ŒæŒ‘é€‰å‡ºä»–ä»¬çœ‹ä¸­çš„äººæ‰ã€‚ç½‘ä¸Šæµ·é€‰çš„å‚èµ›è€…å…±æœ‰è¿‘ä¸¤åƒï¼Œç„¶åé€‰å‡º60ä¸ªäººåœ¨ä¸Šæµ·å¤§ä¼—ç‚¹è¯„æ€»éƒ¨å‚åŠ å†³èµ›ï¼ŒæŠ¥é”€æ¥å›è·¯è´¹ï¼Œè¿˜åŒ…åƒä½ã€‚å…¨å­£é…’åº—ï¼Œæä¾›è‡ªåŠ©æ—©é¤ï¼ŒçœŸå¿ƒå¥½åƒã€‚
åˆ°äº†é…’åº—ï¼Œæˆ‘æ‰çŸ¥é“ï¼Œæ¥å‚èµ›çš„å‡ ä¹å…¨éƒ¨æ˜¯985ã€211çš„ç ”ç©¶ç”Ÿã€‚ä¸€é˜µæ— è¯­ï¼Œå°±å½“é•¿é•¿è§è¯†å§ï¼Œçœ‹çœ‹äººå®¶æœ‰å¤šå¼ºï¼
ç¬¬ä¸€å¤©ä¸Šåˆï¼Œå…¬å¸ç®€ä»‹ï¼Œå°±æ˜¯è¯´è¯´å¤§ä¼—ç‚¹è¯„çš„ç‰›é€¼ä¹‹å¤„ï¼Œå¸å¼•å¤§å®¶åŠ å…¥ã€‚ç¬¬ä¸€å¤©ä¸‹åˆï¼Œç»„é˜Ÿï¼Œç”±é˜Ÿé•¿ä¸Šå‰æ¼”è®²ï¼Œæ‹›æ½é˜Ÿå‹ã€‚ä¸€å…±12é˜Ÿï¼Œæ¯é˜Ÿ5ä¸ªäººã€‚å·®ç‚¹æˆä¸ºé˜Ÿé•¿ï¼Œæœ€ç»ˆè€èµ–èµ–æ‰äº†ï¼Œå¥½é™©ã€‚ã€‚ã€‚æˆ‘ä»¬ç»„æœ€ç»ˆæˆå‘˜ä¸ºï¼šå¼ çªå­¦é•¿ã€è®¸æ¦•å­¦é•¿ã€ç†Šç¯å®‡å­¦é•¿ã€æä¹¾ç§‘å’Œæˆ‘ï¼Œå¼ çªå­¦é•¿ä¸ºé˜Ÿé•¿ã€‚ç¬¬ä¸€å¤©æ™šä¸Šï¼Œæˆ‘ä»¬é˜Ÿåœ¨é…’åº—çƒ­çƒˆè®¨è®ºäº†éœ€æ±‚ä»¥åŠè®¾è®¡æ–¹æ¡ˆï¼Œæ¯ä¸ªäººéƒ½å¾ˆæœ‰æ¿€æƒ…ã€‚
ç¬¬äºŒå¤©æ—©ä¸Šåˆ°ç¬¬ä¸‰å¤©æ—©ä¸Šï¼Œ24å°æ—¶ï¼Œç¼–ç¨‹æ¯”èµ›ï¼å¤§è‡´åˆ†å·¥æ˜¯è®¸æ¦•å­¦é•¿å’Œæä¹¾ç§‘è´Ÿè´£åç«¯ï¼Œç†Šç¯å®‡å­¦é•¿å’Œæˆ‘è´Ÿè´£å‰ç«¯ï¼Œå¼ çªå­¦é•¿è´Ÿè´£æ”¯æ´ã€‚é¢„æœŸæ˜¯ç¾å¥½çš„ï¼Œä½†å®é™…è¿›åº¦æ€»è¦æ…¢å¾ˆå¤šï¼Œå¥½åœ¨å¤§å®¶éƒ½å¾ˆä¹è§‚ï¼Œå˜»å˜»å“ˆå“ˆå°±è¿‡æ¥äº†ã€‚æ™šä¸Šï¼Œæœ‰ç‚¹è¯„çš„å¼€å‘äººå‘˜æ¥å¸®æˆ‘ä»¬è§£å†³é—®é¢˜ï¼ŒçœŸæ­£è§è¯†åˆ°äº†ä¸€äº›å¤§ç‰›ï¼
ç¬¬ä¸‰å¤©ä¸Šåˆï¼Œä¼‘æ¯ã€‚ç¬¬ä¸‰å¤©ä¸‹åˆï¼Œä½œå“å±•ç¤ºã€‚æˆ‘ä»¬æŠ½ä¸­äº†æœ€åä¸€ç»„ï¼Œluckyï¼Œäºæ˜¯ï¼Œè¶ç€å…¶ä»–ç»„å±•ç¤ºçš„æ—¶é—´ä¿®æ”¹ä»£ç ï¼Œæœ€ç»ˆä½œå“ä¸Šå‡äº†ä¸€ä¸ªæ¡£æ¬¡ï¼å°è±¡æ·±åˆ»çš„æ˜¯ï¼Œå¼ çªå­¦é•¿å¥³æœ‹å‹çš„åŠ©æ”»ï¼Œå¾ˆå¼ºæ‚ï¼å¼ çªå­¦é•¿çš„æ¼”è®²æ°´å¹³ï¼Œä¹Ÿæ˜¯æ æ çš„ï¼ç¬¬ä¸€ï¼Œè¿‘åœ¨çœ¼å‰ï¼ç¬¬ä¸‰å¤©æ™šä¸Šï¼Œé¢å¥–ã€‚å…³äºç¬¬ä¸€åå’Œç¬¬äºŒåçš„äº‰è®ºï¼Œè¯„å§”å›¢å‡ ä¹åµäº†èµ·æ¥ã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬ç»„æ‹¿åˆ°äº†ç¬¬äºŒï¼Œä¸€ä¸ªä»¤äººé—æ†¾å’ŒæƒŠå–œå¹¶å­˜çš„æˆç»©ã€‚ç»„å†…æ²¡æœ‰é˜Ÿå‘˜æ”¶åˆ°offerï¼Œå› ä¸ºä¸‰ä½å­¦é•¿è¿˜æ²¡æœ‰å…¥èŒæ„å‘ï¼Œå› ä¸ºæˆ‘å’Œä¹¾ç§‘æ˜¯æœ¬ç§‘ç”Ÿï¼ˆåº”è¯¥æ˜¯ä»…æœ‰çš„ä¸¤ä¸ªæœ¬ç§‘ç”Ÿï¼‰ã€‚
æœŸé—´çš„ç»†èŠ‚ä¸ä½œå±•å¼€ï¼Œç•™ä¸€ä»½æœ¦èƒ§çš„ç¾å¥½è®°å¿†ã€‚
æœ€åï¼Œé™„ä¸Šä¸€äº›ç…§ç‰‡ã€‚
]]></content>
      <categories>
        <category>essay</category>
      </categories>
      <tags>
        <tag>éšç¬”</tag>
      </tags>
  </entry>
  <entry>
    <title>å›¾ä¹¦ç®¡ç†ç³»ç»Ÿä¹‹ui</title>
    <url>/dev-bookmanage-ui/</url>
    <content><![CDATA[å‰è¨€è¿™ä¸‰ç¯‡åšæ–‡ï¼Œæ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œå•ç‹¬çœ‹ä¹Ÿè®¸è‰°æ¶©éš¾æ‡‚ã€‚ä½†æ˜¯ï¼Œåˆèµ·æ¥çœ‹ï¼Œå¾ˆå¤šç–‘é—®å°±å¯ä»¥è¿åˆƒè€Œè§£ã€‚æ­£å¦‚é©¬å“²æ‰€è¯´ï¼Œæ•´ä½“åŠŸèƒ½å¯ä»¥å¤§äºéƒ¨åˆ†åŠŸèƒ½ä¹‹å’Œã€‚
æ–°å»ºå·¥ç¨‹1ã€æ‰“å¼€Eclipseï¼ŒFileï¼ŒNewï¼ŒMaven Projectï¼Œå‹¾é€‰Create a simple projectï¼ŒNextã€‚
2ã€å¡«å†™Group Idå’ŒArtifact Idï¼ŒPackagingé€‰æ‹©warã€‚


ç›¸å½“äºå‘½ä»¤ï¼š
mvn archetype:create -DgroupId=com.voidking.book -DartifactId=book-ui-DarchetypeArtifactId=maven-archetype-webapp

pom.xml&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;  &lt;parent&gt;		&lt;groupId&gt;com.voidking.book&lt;/groupId&gt;		&lt;artifactId&gt;book-parent&lt;/artifactId&gt;		&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;		&lt;relativePath&gt;../book-parent/pom.xml&lt;/relativePath&gt;	&lt;/parent&gt;  &lt;artifactId&gt;book-ui&lt;/artifactId&gt;    &lt;packaging&gt;war&lt;/packaging&gt;    &lt;dependencies&gt;		&lt;!-- struts2æ¡†æ¶ --&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.apache.struts&lt;/groupId&gt;			&lt;artifactId&gt;struts2-core&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.apache.struts&lt;/groupId&gt;			&lt;artifactId&gt;struts2-spring-plugin&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.apache.struts&lt;/groupId&gt;			&lt;artifactId&gt;struts2-json-plugin&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.apache.struts&lt;/groupId&gt;			&lt;artifactId&gt;struts2-convention-plugin&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;!-- Spring æ ¸å¿ƒåº“ --&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-context&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-core&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-beans&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-orm&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-aop&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-tx&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;!-- Spring MVC åº“ --&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.aspectj&lt;/groupId&gt;			&lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;!-- servlet api --&gt;		&lt;dependency&gt;			&lt;groupId&gt;javax.servlet&lt;/groupId&gt;			&lt;artifactId&gt;servlet-api&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;!-- å¼•ç”¨ä¸šåŠ¡å±‚çš„jaråŒ… --&gt;		&lt;dependency&gt;			&lt;groupId&gt;com.voidking.book&lt;/groupId&gt;			&lt;artifactId&gt;book-logic&lt;/artifactId&gt;			&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;			&lt;exclusions&gt;				&lt;exclusion&gt;					&lt;groupId&gt;org.hibernate&lt;/groupId&gt;					&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;				&lt;/exclusion&gt;			&lt;/exclusions&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.hibernate&lt;/groupId&gt;			&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-web&lt;/artifactId&gt;		&lt;/dependency&gt;	&lt;/dependencies&gt;	&lt;build&gt;		&lt;plugins&gt;			&lt;plugin&gt;				&lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;				&lt;artifactId&gt;maven-jetty-plugin&lt;/artifactId&gt;				&lt;configuration&gt;					&lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;					&lt;connectors&gt;						&lt;connector implementation=&quot;org.mortbay.jetty.nio.SelectChannelConnector&quot;&gt;							&lt;port&gt;8099&lt;/port&gt;							&lt;maxIdleTime&gt;60000&lt;/maxIdleTime&gt;						&lt;/connector&gt;					&lt;/connectors&gt;				&lt;/configuration&gt;			&lt;/plugin&gt;		&lt;/plugins&gt;	&lt;/build&gt;&lt;/project&gt;
å€¼å¾—ä¸€æçš„æ˜¯ï¼Œmavençš„webå·¥ç¨‹ä¸­ï¼Œä¹ æƒ¯ç”¨jettyè€Œä¸æ˜¯tomcatã€‚jettyå‘å¸ƒçš„å·¥ç¨‹ï¼Œåœ¨å½“å‰å·¥ç¨‹ä¸‹çš„target/ç›¸åº”ç‰ˆæœ¬å·ä¸‹ã€‚æ¯”å¦‚æœ¬å·¥ç¨‹ï¼Œå‘å¸ƒååœ¨target/book-ui-0.0.1-SNAPSHOTä¸‹ã€‚
æ–°å»ºåŒ…æ–°å»ºåŒ…com.voidking.book.admin.actionã€com.voidking.book.bookbase.actionã€com.voidking.book.bookkind.actionã€com.voidking.book.readerbase.actionã€com.voidking.book.readerkind.actionã€com.voidking.book.borrowinfo.actionã€com.voidking.book.search.actionã€com.voidking.book.statistics.actionã€‚
admin.actionåŒ…åœ¨admin.actionåŒ…ï¼Œæ–°å»ºLoginAction.javaï¼Œå†…å®¹å¦‚ä¸‹ã€‚
package com.voidking.book.admin.action;import org.apache.struts2.convention.annotation.Action;import org.apache.struts2.convention.annotation.Namespace;import org.apache.struts2.convention.annotation.ParentPackage;import org.apache.struts2.convention.annotation.Result;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import com.opensymphony.xwork2.ActionContext;import com.opensymphony.xwork2.ActionSupport;import com.voidking.book.entity.Admin;import com.voidking.book.logic.AdminLogicService;@Controller@Namespace(&quot;/admin&quot;)@ParentPackage(&quot;custom-default&quot;)public class LoginAction extends ActionSupport &#123;	private static final long serialVersionUID = 2936224923889056993L;	@Autowired	private AdminLogicService adminLogicService;	private Admin admin;	private String info;	public Admin getAdmin() &#123;		return admin;	&#125;	public void setAdmin(Admin admin) &#123;		this.admin = admin;	&#125;	public String getInfo() &#123;		return info;	&#125;	public void setInfo(String info) &#123;		this.info = info;	&#125;	@Action(value = &quot;login&quot;, results = &#123; @Result(name = &quot;success&quot;, type = &quot;json&quot;) &#125;)	public String login() throws Exception &#123;		this.info = this.adminLogicService.login(admin);		if (admin.getId() != null)// ç™»å½•æˆåŠŸ		&#123;			ActionContext.getContext().getSession().put(&quot;admin&quot;, admin);		&#125;		return SUCCESS;	&#125;&#125;
1ã€@Controllerï¼ŒSpringçš„æ³¨è§£ã€‚åœ¨SpringMVCä¸­æä¾›äº†ä¸€ä¸ªéå¸¸ç®€ä¾¿çš„å®šä¹‰Controllerçš„æ–¹æ³•ï¼Œä½ æ— éœ€ç»§æ‰¿ç‰¹å®šçš„ç±»æˆ–å®ç°ç‰¹å®šçš„æ¥å£ï¼Œåªéœ€ä½¿ç”¨@Controlleræ ‡è®°ä¸€ä¸ªç±»æ˜¯Controllerï¼Œç„¶åä½¿ç”¨@RequestMappingå’Œ@RequestParamç­‰ä¸€äº›æ³¨è§£ç”¨ä»¥å®šä¹‰URLè¯·æ±‚å’ŒControlleræ–¹æ³•ä¹‹é—´çš„æ˜ å°„ï¼Œè¿™æ ·çš„Controllerå°±èƒ½è¢«å¤–ç•Œè®¿é—®åˆ°ã€‚æ­¤å¤–Controllerä¸ä¼šç›´æ¥ä¾èµ–äºHttpServletRequestå’ŒHttpServletResponseç­‰HttpServletå¯¹è±¡ï¼Œå®ƒä»¬å¯ä»¥é€šè¿‡Controller çš„æ–¹æ³•å‚æ•°çµæ´»çš„è·å–åˆ°ã€‚
2ã€æˆ‘ä»¬çŸ¥é“é€šå¸¸æƒ…å†µä¸‹ï¼ŒStruts2æ˜¯é€šè¿‡struts.xmlé…ç½®çš„ã€‚ä½†æ˜¯éšç€ç³»ç»Ÿè§„æ¨¡çš„åŠ å¤§æˆ‘ä»¬éœ€è¦é…ç½®çš„æ–‡ä»¶ä¼šæ¯”è¾ƒå¤§ï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸åŒçš„ç³»ç»ŸåŠŸèƒ½å°†ä¸åŒæ¨¡å—çš„é…ç½®æ–‡ä»¶å•ç‹¬ä¹¦å†™ï¼Œç„¶åé€šè¿‡includeèŠ‚ç‚¹å°†ä¸åŒçš„é…ç½®æ–‡ä»¶å¼•å…¥åˆ°æœ€ç»ˆçš„struts.xmlæ–‡ä»¶ä¸­ï¼Œä½†æ˜¯æ¯•ç«Ÿè¿˜æ˜¯è¦ç»´æŠ¤å’Œç®¡ç†è¿™äº›æ–‡ä»¶ï¼Œå› æ­¤ä¹Ÿä¼šç»™ç»´æŠ¤å·¥ä½œå¸¦æ¥å¾ˆå¤§çš„å›°æ‰°ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨struts2çš„æ³¨è§£ã€‚å®é™…ä¸Šstruts2ä¸­æœ€ä¸»è¦çš„æ¦‚å¿µå°±æ˜¯packageã€actionä»¥åŠInterceptorç­‰ç­‰æ¦‚å¿µï¼Œæ‰€ä»¥åªè¦æ˜ç™½è¿™äº›æ³¨è§£å°±å¯ä»¥äº†ã€‚
3ã€@Namespaceï¼ŒStruts2çš„æ³¨è§£ã€‚å‘½åç©ºé—´ï¼Œä¹Ÿå°±æ˜¯xmlæ–‡ä»¶ä¸­packageçš„namespaceå±æ€§ã€‚å¦‚æœæ²¡æœ‰@Namespace(â€œ/adminâ€)æ³¨è§£ï¼ŒæŒ‰ç…§Convention Pluginçš„çº¦å®šï¼Œä¼šå°†æ­¤åŒ…ä½œä¸ºæ ¹åŒ…ï¼Œå¯¹åº”Action URLçš„å‘½åç©ºé—´ä¸ºâ€œ/â€ã€‚
4ã€@ParentPackageï¼ŒStruts2çš„æ³¨è§£ã€‚è¿™ä¸ªæ³¨è§£å¯¹åº”äº†xmlæ–‡ä»¶ä¸­çš„packageèŠ‚ç‚¹ï¼Œå®ƒåªæœ‰ä¸€ä¸ªå±æ€§å«valueï¼Œå…¶å®å°±æ˜¯packageçš„nameå±æ€§ï¼›
5ã€@Actionï¼ŒStruts2çš„æ³¨è§£ã€‚è¿™ä¸ªæ³¨è§£å¯¹åº”actionèŠ‚ç‚¹ã€‚è¿™ä¸ªæ³¨è§£å¯ä»¥åº”ç”¨äº action ç±»ä¸Šï¼Œä¹Ÿå¯ä»¥åº”ç”¨äºæ–¹æ³•ä¸Šã€‚è¿™ä¸ªæ³¨è§£ä¸­æœ‰å‡ ä¸ªå±æ€§ï¼š

valueï¼Œè¡¨ç¤ºactionçš„URLï¼Œä¹Ÿå°±æ˜¯actionèŠ‚ç‚¹ä¸­çš„nameå±æ€§ï¼›
resultsï¼Œè¡¨ç¤ºactionçš„å¤šä¸ªresultï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæ•°ç»„å±æ€§ï¼Œå› æ­¤å¯ä»¥å®šä¹‰å¤šä¸ªResultï¼›
interceptorRefsï¼Œè¡¨ç¤ºactionçš„å¤šä¸ªæ‹¦æˆªå™¨ï¼Œè¿™ä¸ªå±æ€§ä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„å±æ€§ï¼Œå› æ­¤å¯ä»¥å®šä¹‰å¤šä¸ªæ‹¦æˆªå™¨ï¼›
paramsï¼Œè¿™æ˜¯ä¸€ä¸ªStringç±»å‹çš„æ•°ç»„ï¼Œå®ƒæŒ‰ç…§name/valueçš„å½¢å¼ç»„ç»‡ï¼Œæ˜¯ä¼ ç»™actionçš„å‚æ•°ï¼›
exceptionMappingsï¼Œè¿™æ˜¯å¼‚å¸¸å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ªExceptionMappingçš„æ•°ç»„å±æ€§ï¼Œè¡¨ç¤ºactionçš„å¼‚å¸¸ï¼Œåœ¨ä½¿ç”¨æ—¶å¿…é¡»å¼•ç”¨ç›¸åº”çš„æ‹¦æˆªå™¨ï¼›

6ã€@Result ï¼ŒStruts2çš„æ³¨è§£ã€‚è¿™ä¸ªæ³¨è§£å¯¹åº”äº†resultèŠ‚ç‚¹ã€‚è¿™ä¸ªæ³¨è§£åªèƒ½åº”ç”¨äº action ç±»ä¸Šã€‚è¿™ä¸ªæ³¨è§£ä¸­ä¹Ÿæœ‰å‡ ä¸ªå±æ€§ï¼š

nameï¼Œè¡¨ç¤ºactionæ–¹æ³•çš„è¿”å›å€¼ï¼Œä¹Ÿå°±æ˜¯resultèŠ‚ç‚¹çš„nameå±æ€§ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯successï¼›
locationï¼Œè¡¨ç¤ºviewå±‚æ–‡ä»¶çš„ä½ç½®ï¼Œå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼›
typeï¼Œæ˜¯actionçš„ç±»å‹ï¼Œæ¯”å¦‚redirectï¼›
paramsï¼Œæ˜¯ä¸€ä¸ªStringæ•°ç»„ã€‚ä¹Ÿæ˜¯ä»¥name/valueå½¢å¼ä¼ é€ç»™resultçš„å‚æ•°ï¼›

struts.xmlåœ¨src/main/resourcesæ–‡ä»¶ä¸‹ï¼Œæ–°å»ºstruts.xmlï¼Œå†…å®¹å¦‚ä¸‹ã€‚
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE struts PUBLIC &quot;-//Apache Software Foundation//DTD Struts Configuration 2.1//EN&quot; &quot;http://struts.apache.org/dtds/struts-2.1.dtd&quot;&gt;&lt;struts&gt;	&lt;constant name=&quot;struts.multipart.maxSize&quot; value=&quot;99999999999&quot; /&gt;	&lt;constant name=&quot;struts.allowed.action.names&quot; value=&quot;[a-zA-Z0-9._!/\-]*&quot;&gt;&lt;/constant&gt;	&lt;constant name=&quot;struts.multipart.saveDir&quot; value=&quot;/tmp&quot; /&gt;	&lt;constant name=&quot;struts.devMode&quot; value=&quot;true&quot; /&gt;	&lt;constant name=&quot;struts.i18n.encoding&quot; value=&quot;UTF-8&quot; /&gt;	&lt;package name=&quot;custom-default&quot; extends=&quot;json-default&quot;&gt;		&lt;interceptors&gt;			&lt;!--å®šä¹‰æ‹¦æˆªå™¨ name:æ‹¦æˆªå™¨åç§° class:æ‹¦æˆªå™¨ç±»è·¯å¾„--&gt;			&lt;!-- å®šä¹‰æ‹¦æˆªå™¨æ ˆ --&gt;			&lt;interceptor-stack name=&quot;myDefaultStack&quot;&gt;				&lt;interceptor-ref name=&quot;json&quot; /&gt;				&lt;interceptor-ref name=&quot;defaultStack&quot; /&gt;			&lt;/interceptor-stack&gt;		&lt;/interceptors&gt;		&lt;default-interceptor-ref name=&quot;myDefaultStack&quot; /&gt;	&lt;/package&gt;&lt;/struts&gt;    
1ã€struts.propertiesæ–‡ä»¶çš„å†…å®¹å‡å¯åœ¨struts.xmlä¸­ä»¥&lt;constant name=&quot;&quot; value=&quot;&quot;&gt;&lt;/constant&gt;åŠ è½½ã€‚
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE struts PUBLIC    &quot;-//Apache Software Foundation//DTD Struts Configuration 2.3//EN&quot;    &quot;http://struts.apache.org/dtds/struts-2.3.dtd&quot;&gt;&lt;struts&gt;    &lt;!-- æŠŠå®ƒè®¾ç½®ä¸ºå¼€å‘æ¨¡å¼ï¼Œå‘å¸ƒæ—¶è¦è®¾ç½®ä¸ºfalse --&gt;    &lt;constant name=&quot;struts.devMode&quot; value=&quot;true&quot; /&gt;    &lt;!-- è®¾ç½®åœ¨classè¢«ä¿®æ”¹æ—¶æ˜¯å¦çƒ­åŠ è½½ï¼Œå‘å¸ƒæ—¶è¦è®¾ç½®ä¸ºfalse --&gt;    &lt;constant name=&quot;struts.convention.classes.reload&quot; value=&quot;true&quot;/&gt;    &lt;!-- è‡ªåŠ¨åŠ¨æ€æ–¹æ³•çš„è°ƒç”¨ï¼Œä½¿ç”¨è¿™ä¸ªè®¾ç½®åå¯ä»¥è¿™æ ·è°ƒç”¨ï¼šaction!method --&gt;    &lt;constant name=&quot;struts.enable.DynamicMethodInvocation&quot; value=&quot;true&quot; /&gt;    &lt;!-- æŒ‡å®šjspæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•åœ°å€ --&gt;    &lt;constant name=&quot;struts.convention.result.path&quot; value=&quot;/WEB-INF/content/&quot; /&gt;    &lt;!-- ä½¿ç”¨struts-defaulté»˜è®¤çš„è½¬æ¢å™¨ï¼Œå¦‚æœæ˜¯restçš„ä½¿ç”¨ï¼šrest-defaultï¼Œrestéœ€è¦restçš„jaræ’ä»¶ --&gt;    &lt;constant name=&quot;struts.convention.default.parent.package&quot; value=&quot;struts-default&quot;/&gt;    &lt;!-- ç”¨äºé…ç½®åŒ…ååç¼€ã€‚é»˜è®¤ä¸ºactionã€actionsã€struts--&gt;    &lt;constant name=&quot;struts.convention.package.locators&quot; value=&quot;actions&quot; /&gt;    &lt;!-- ç”¨äºé…ç½®ç±»ååç¼€ï¼Œé»˜è®¤ä¸ºActionï¼Œè®¾ç½®åï¼ŒStruts2åªä¼šå»æ‰¾è¿™ç§åç¼€åçš„ç±»åšæ˜ å°„ --&gt;    &lt;constant name=&quot;struts.convention.action.suffix&quot; value=&quot;Action&quot;/&gt;    &lt;!-- è®¾ç½®å³ä½¿æ²¡æœ‰@Actionæ³¨é‡Šï¼Œä¾ç„¶åˆ›å»ºActionæ˜ å°„ã€‚é»˜è®¤å€¼æ˜¯falseã€‚å› ä¸ºConvention-Pluginæ˜¯çº¦å®šä¼˜äºé…ç½®çš„é£æ ¼ï¼Œ        å¯ä»¥ä¸é€šè¿‡æ³¨è§£æ ¹æ®é¢„å…ˆçš„å®šä¹‰å°±èƒ½è®¿é—®ç›¸åº”Actionä¸­çš„æ–¹æ³• --&gt;    &lt;constant name=&quot;struts.convention.action.mapAllMatches&quot; value=&quot;true&quot;/&gt;    &lt;!-- è‡ªå®šä¹‰jspæ–‡ä»¶å‘½åçš„åˆ†éš”ç¬¦ --&gt;    &lt;constant name=&quot;struts.convention.action.name.separator&quot; value=&quot;-&quot; /&gt;    &lt;!-- å›½é™…åŒ–èµ„æºæ–‡ä»¶åç§° --&gt;    &lt;constant name=&quot;struts.custom.i18n.resources&quot; value=&quot;i18n&quot; /&gt;    &lt;!-- æ˜¯å¦è‡ªåŠ¨åŠ è½½å›½é™…åŒ–èµ„æºæ–‡ä»¶  --&gt;    &lt;constant name=&quot;struts.i18n.reload&quot; value=&quot;true&quot; /&gt;    &lt;!-- æµè§ˆå™¨æ˜¯å¦ç¼“å­˜é™æ€å†…å®¹ --&gt;    &lt;constant name=&quot;struts.serve.static.browserCache&quot; value=&quot;false&quot; /&gt;     &lt;!-- ä¸Šä¼ æ–‡ä»¶å¤§å°é™åˆ¶è®¾ç½® --&gt;    &lt;constant name=&quot;struts.multipart.maxSize&quot; value=&quot;-1&quot; /&gt;    &lt;!-- ä¸»é¢˜ï¼Œå°†å€¼è®¾ç½®ä¸ºsimpleï¼Œå³ä¸ä½¿ç”¨UIæ¨¡æ¿ã€‚è¿™å°†ä¸ä¼šç”Ÿæˆé¢å¤–çš„htmlæ ‡ç­¾ --&gt;    &lt;constant name=&quot;struts.ui.theme&quot; value=&quot;simple&quot; /&gt;    &lt;!-- ç¼–ç æ ¼å¼ --&gt;    &lt;constant name=&quot;struts.i18n.encoding&quot; value=&quot;UTF-8&quot; /&gt;&lt;/struts&gt;

2ã€packageæœ‰ä»¥ä¸‹å‡ ä¸ªå¸¸ç”¨å±æ€§ï¼š

nameï¼šè¯¥å±æ€§æ˜¯å¿…é€‰çš„ï¼ŒæŒ‡å®šåŒ…çš„åå­—ï¼Œè¿™ä¸ªåå­—å°†ä½œä¸ºå¼•ç”¨è¯¥åŒ…çš„é”®ã€‚æ³¨æ„ï¼ŒåŒ…çš„åå­—å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œåœ¨ä¸€ä¸ªstruts.xmlæ–‡ä»¶ä¸­ä¸èƒ½å‡ºç°ä¸¤ä¸ªåŒåçš„åŒ…ã€‚
extendsï¼šè¯¥å±æ€§æ˜¯å¯é€‰çš„ï¼Œå…è®¸ä¸€ä¸ªåŒ…ç»§æ‰¿ä¸€ä¸ªæˆ–å¤šä¸ªå…ˆå‰å®šä¹‰çš„åŒ…ã€‚
abstractï¼šè¯¥å±æ€§æ˜¯å¯é€‰çš„ï¼Œå°†å…¶è®¾ç½®ä¸ºtrueï¼Œå¯ä»¥æŠŠä¸€ä¸ªåŒ…å®šä¹‰ä¸ºæŠ½è±¡çš„ã€‚æŠ½è±¡åŒ…ä¸èƒ½æœ‰actionå®šä¹‰ï¼Œå®ƒåªèƒ½ä½œä¸ºâ€œçˆ¶â€åŒ…ï¼Œè¢«å…¶ä»–åŒ…æ‰€ç»§æ‰¿ã€‚æ³¨æ„ï¼Œä»¥ä¸ºStruts2çš„é…ç½®æ–‡ä»¶æ˜¯ä»ä¸Šåˆ°ä¸‹å¤„ç†çš„ï¼Œæ‰€ä»¥çˆ¶åŒ…åº”è¯¥åœ¨å­åŒ…å‰é¢å®šä¹‰ã€‚
namespaceï¼šè¯¥å±æ€§æ˜¯å¯é€‰çš„ï¼Œå°†ä¿å­˜çš„actioné…ç½®ä¸ºä¸åŒçš„åç§°ç©ºé—´ã€‚å¦‚æœæ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ä¸º/space/main.actionï¼Œæ¡†æ¶å°†é¦–å…ˆæŸ¥æ‰¾/spaceåç§°ç©ºé—´ï¼Œå¦‚æœæ‰¾åˆ°äº†ï¼Œåˆ™æ‰§è¡Œmain.actionï¼›å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™åˆ°é»˜è®¤çš„åç§°ç©ºé—´ï¼ˆname=â€defaultâ€ï¼‰ä¸­ç»§ç»­æŸ¥æ‰¾ã€‚å¦‚æœæ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ä¸º/main.actionï¼Œæ¡†æ¶å°†é¦–å…ˆæŸ¥æ‰¾â€œ/â€åç§°ç©ºé—´ï¼Œå¦‚æœæ‰¾åˆ°äº†ï¼Œåˆ™æ‰§è¡Œmain.actionï¼›å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™åˆ°é»˜è®¤çš„åç§°ç©ºé—´ï¼ˆname=â€defaultâ€ï¼‰ä¸­ç»§ç»­æŸ¥æ‰¾ã€‚

é…ç½®æ–‡ä»¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å‰ä¸¤å±‚ä¸­ï¼Œæˆ‘ä»¬çš„é…ç½®æ–‡ä»¶å…¨éƒ¨æ”¾åˆ°äº†src/test/resourcesä¸­ã€‚ä½†æ˜¯ï¼Œåœ¨è¿™ä¸€å±‚ï¼Œæˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ä¸»è¦æ”¾åœ¨ä¸¤ä¸ªä½ç½®ã€‚ä¸€ä¸ªæ˜¯src/main/resourcesï¼Œå¦ä¸€ä¸ªæ˜¯src/main/webapp/WEB-INFã€‚
1ã€åœ¨resourcesä¸‹ï¼Œæœ‰struts.xmlã€database-conn.propertiesã€log4j.propertiesã€‚2ã€åœ¨WEB-INFä¸‹ï¼Œæœ‰applicationContext.xmlã€spring-persist.xmlã€web.xmlã€‚
web.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;	xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;	xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;	version=&quot;2.5&quot;&gt;	&lt;display-name&gt;voidking&lt;/display-name&gt;	&lt;filter&gt;		&lt;filter-name&gt;entityManagerFilter&lt;/filter-name&gt;		&lt;filter-class&gt;org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter&lt;/filter-class&gt;	&lt;/filter&gt;	&lt;filter-mapping&gt;		&lt;filter-name&gt;entityManagerFilter&lt;/filter-name&gt;		&lt;url-pattern&gt;/*&lt;/url-pattern&gt;	&lt;/filter-mapping&gt;	&lt;filter&gt;		&lt;filter-name&gt;struts2&lt;/filter-name&gt;		&lt;filter-class&gt;org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt;	&lt;/filter&gt;	&lt;filter-mapping&gt;		&lt;filter-name&gt;struts2&lt;/filter-name&gt;		&lt;url-pattern&gt;/*&lt;/url-pattern&gt;	&lt;/filter-mapping&gt;	&lt;listener&gt;		&lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;	&lt;/listener&gt;&lt;/web-app&gt;
1ã€display-nameï¼Œå¦‚æœä½¿ç”¨å·¥å…·ç¼–è¾‘éƒ¨ç½²æè¿°ç¬¦ï¼Œdisplay-nameå…ƒç´ åŒ…å«çš„å°±æ˜¯XMLç¼–è¾‘å™¨æ˜¾ç¤ºçš„åç§°ã€‚
2ã€filterï¼Œç”¨äºæŒ‡å®šWebå®¹å™¨ä¸­çš„è¿‡æ»¤å™¨ã€‚åœ¨è¯·æ±‚å’Œå“åº”å¯¹è±¡è¢«servletå¤„ç†ä¹‹å‰æˆ–ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨è¿‡æ»¤å™¨å¯¹è¿™ä¸¤ä¸ªå¯¹è±¡è¿›è¡Œæ“ä½œã€‚é…åˆfilter-mappingï¼Œè¿‡æ»¤å™¨è¢«æ˜ å°„åˆ°ä¸€ä¸ªservletæˆ–ä¸€ä¸ªURLã€‚è¿™ä¸ªè¿‡æ»¤å™¨çš„filterå…ƒç´ å’Œfilter-mappingå…ƒç´ å¿…é¡»å…·æœ‰ç›¸åŒçš„åç§°ã€‚
applicationContext.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;	xmlns=&quot;http://www.springframework.org/schema/beans&quot;	xsi:schemaLocation=&quot;    http://www.springframework.org/schema/beans     http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;    &lt;import resource=&quot;spring-persist.xml&quot;/&gt;    &lt;/beans&gt;

å·¥ä½œæµç¨‹1ã€å®¢æˆ·ç«¯æäº¤ä¸€ä¸ªHttpServletRequestè¯·æ±‚ã€‚
2ã€è¯·æ±‚è¢«æäº¤åˆ°ä¸€ç³»åˆ—Filterè¿‡æ»¤å™¨ï¼Œå¦‚ActionCleanUpå’ŒFilterDispatcherç­‰ã€‚
3ã€FilterDispatcheræ˜¯Struts2æ§åˆ¶å™¨çš„æ ¸å¿ƒï¼Œå®ƒé€šå¸¸æ˜¯è¿‡æ»¤å™¨é“¾ä¸­çš„æœ€åä¸€ä¸ªè¿‡æ»¤å™¨ã€‚
4ã€è¯·æ±‚è¢«å‘é€åˆ°FilterDispatcheråï¼ŒFilterDispatcherè¯¢é—®ActionMapperæ—¶å€™éœ€è¦è°ƒç”¨æŸä¸ªactionæ¥å¤„ç†è¿™ä¸ªRequestã€‚
5ã€å¦‚æœActionMapperå†³å®šéœ€è¦è°ƒç”¨æŸä¸ªactionï¼ŒFilterDispatcheråˆ™æŠŠè¯·æ±‚äº¤ç»™ActionProxyè¿›è¡Œå¤„ç†ã€‚
6.ActionProxyé€šè¿‡Configuration Managerè¯¢é—®æ¡†æ¶çš„é…ç½®æ–‡ä»¶struts.xmlï¼ˆæœ¬é¡¹ç›®å®ç°struts2é›¶é…ç½®ï¼Œæ‰€ä»¥è¯¢é—®actionæ–‡ä»¶ï¼‰ï¼Œæ‰¾åˆ°è°ƒç”¨çš„actionç±»ã€‚
7.ActionProxyåˆ›å»ºä¸€ä¸ªActionInvocationå®ä¾‹ï¼Œé€šè¿‡ä»£ç†æ¨¡å¼è°ƒç”¨Actionã€‚
8.actionæ‰§è¡Œå®Œæ¯•åï¼Œè¿”å›ä¸€ä¸ªresultå­—ç¬¦ä¸²ï¼Œæ­¤æ—¶å†æŒ‰ç›¸åçš„é¡ºåºé€šè¿‡Intercepteræ‹¦æˆªå™¨ã€‚
9.æœ€åActionInvocationå®ä¾‹ï¼Œè´Ÿè´£æ ¹æ®struts.xmlä¸­é…ç½®resultå…ƒç´ ï¼Œæ‰¾åˆ°ä¸ä¹‹ç›¸å¯¹åº”çš„resultï¼Œå†³å®šè¿›ä¸€æ­¥è¾“å‡ºã€‚
spring-persist.xmlåŠ è½½é—®é¢˜åœ¨persistå±‚å’Œlogicå±‚æµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯æ‰‹åŠ¨åŠ è½½spring-persist.xmlæ–‡ä»¶ã€‚é‚£ä¹ˆï¼Œåœ¨uiå±‚ï¼Œspring-perisist.xmlæ–‡ä»¶çš„åŠ è½½æµç¨‹æ˜¯æ€æ ·çš„å‘¢ï¼Ÿåœ¨web.xmlä¸­ï¼Œå¯ä»¥é€šè¿‡&lt;context-param&gt;æŒ‡å®šSpringé…ç½®æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ ‡ç­¾ï¼Œåˆ™é»˜è®¤åŠ è½½WEB-INFä¸‹çš„applicationContext.xmlï¼Œä¹Ÿå¯ä»¥ç”¨å®ƒæŒ‡å®šå…¶ä»–é…ç½®æ–‡ä»¶ã€‚
å‰ç«¯å‰ç«¯ä½¿ç”¨BootStrap+AngularJsï¼Œå…¶ä¸­BootStrapè´Ÿè´£ç•Œé¢æ˜¾ç¤ºï¼ŒAngularJsåˆ™æ˜¯æ²Ÿé€šå‰åç«¯çš„æ¡¥æ¢ã€‚
è¿™ä¸ªéƒ¨åˆ†æ¯”è¾ƒå¤æ‚ï¼Œç»™ä¸ªä¾‹å­ï¼Œè®²çš„å¾ˆå¥½ã€‚http://www.runoob.com/angularjs/angularjs-application.html
æ•ˆæœæ¼”ç¤º
åè®°è¿™ä¸ªå›¾ä¹¦ç®¡ç†ç³»ç»Ÿï¼Œä½¿ç”¨çš„æŠ€æœ¯ï¼Œå¾ˆå¤šéƒåŒå­¦ä¹Ÿæ˜¯ä¸€çŸ¥åŠè§£ã€‚æ¥ä¸‹æ¥ï¼Œä¼šæœ‰ä¸€ç¯‡æ–‡ç« ï¼Œä¸“é—¨é’ˆå¯¹è¿™ä¸ªé¡¹ç›®è¿›è¡Œæ”¹è¿›ã€‚å…¨éƒ¨ä»£ç è‡ªå–https://github.com/voidking/bookmanage.git
å‚è€ƒæ–‡æ¡£springçš„applicationContext.xmlå¦‚ä½•è‡ªåŠ¨åŠ è½½http://blog.csdn.net/fuqingtian/article/details/5545860
Spring controllerhttp://my.oschina.net/hcliu/blog/396887
Struts2æ³¨è§£é…ç½®ä¹‹@Namespace(å››)http://blog.csdn.net/spyjava/article/details/13764757
Struts2æ³¨è§£ä½¿ç”¨è¯´æ˜http://blog.csdn.net/wk313753744/article/details/19920195
Struts2çš„æ³¨è§£åŠŸèƒ½è¯¦è§£http://my.oschina.net/victorHomePage/blog/56732http://www.cnblogs.com/wayne_wang/archive/1942927.html
Struts2 - å¸¸ç”¨çš„constantæ€»ç»“http://www.cnblogs.com/HD/p/3653930.html
Struts2 å¸¸ç”¨çš„å¸¸é‡é…ç½®http://www.cnblogs.com/yokoboy/archive/2877145.html
struts2.0ä¸­struts.xmlé…ç½®æ–‡ä»¶è¯¦è§£http://www.cnblogs.com/kay/archive/976120.html
Web.xmlè¯¦è§£http://www.cnblogs.com/konbluesky/articles/1925295.html
web.xmlè¯¦ç»†ä»‹ç»http://mianhuaman.iteye.com/blog/1105522
struts2å·¥ä½œæµç¨‹http://huaxia524151.iteye.com/blog/1430148
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>maven</tag>
        <tag>struts2</tag>
      </tags>
  </entry>
  <entry>
    <title>å›¾ä¹¦ç®¡ç†ç³»ç»Ÿä¹‹logic</title>
    <url>/dev-bookmanage-logic/</url>
    <content><![CDATA[å‰è¨€persistå±‚åŸºæœ¬ææ¸…æ¥šäº†ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ç€çœ‹logicå±‚ã€‚
æ–°å»ºå·¥ç¨‹1ã€æ‰“å¼€Eclipseï¼ŒFileï¼ŒNewï¼ŒMaven Projectï¼Œå‹¾é€‰Create a simple projectï¼ŒNextã€‚
2ã€å¡«å†™Group Idå’ŒArtifact Idï¼ŒPackagingé€‰æ‹©jarã€‚


pom.xml&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;  &lt;parent&gt;		&lt;groupId&gt;com.voidking.book&lt;/groupId&gt;		&lt;artifactId&gt;book-parent&lt;/artifactId&gt;		&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;		&lt;relativePath&gt;../book-parent/pom.xml&lt;/relativePath&gt;	&lt;/parent&gt;	&lt;artifactId&gt;book-logic&lt;/artifactId&gt;	&lt;dependencies&gt;		&lt;!-- Spring æ ¸å¿ƒåº“ --&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-context&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-core&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-beans&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-orm&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-aop&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-tx&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;!-- Spring MVC åº“ --&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt; org.aspectj&lt;/groupId&gt;			&lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;!-- persist --&gt;		&lt;dependency&gt;			&lt;groupId&gt;com.voidking.book&lt;/groupId&gt;			&lt;artifactId&gt;book-persist&lt;/artifactId&gt;			&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;		&lt;/dependency&gt;		&lt;!-- æ—¥å¿—æ‰“å° --&gt;		&lt;!-- junit --&gt;		&lt;dependency&gt;			&lt;groupId&gt;junit&lt;/groupId&gt;			&lt;artifactId&gt;junit&lt;/artifactId&gt;			&lt;scope&gt;test&lt;/scope&gt;		&lt;/dependency&gt;		&lt;!-- hibernate --&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.hibernate&lt;/groupId&gt;			&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;			&lt;scope&gt;provided&lt;/scope&gt;		&lt;/dependency&gt;	&lt;/dependencies&gt;  &lt;/project&gt;

logicåŒ…æ–°å»ºåŒ…com.voidking.book.logicï¼Œåœ¨è¯¥åŒ…ä¸‹ï¼Œæ–°å»ºAdminLogicService.javaï¼Œå†…å®¹å¦‚ä¸‹ã€‚
package com.voidking.book.logic;import com.voidking.book.entity.Admin;public interface AdminLogicService &#123;		String login(Admin admin);	&#125;
æ–°å»ºBookBaseLogicService.javaã€BookKindLogicService.javaã€ReaderBaseLogicService.javaã€ReaderKindLogicService.javaã€BorrowInfoLogicService.javaã€SearchLogicService.javaã€StatisticsLogicService.javaï¼Œè¯¦ç»†ä»£ç ç§»æ­¥https://github.com/voidking/bookmanage.git
logic.implåŒ…æ–°å»ºåŒ…com.voidking.book.logic.implï¼Œåœ¨è¯¥åŒ…ä¸‹ï¼Œæ–°å»ºAdminLogicServiceImpl.javaï¼Œå†…å®¹å¦‚ä¸‹ã€‚
package com.voidking.book.logic.imp;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import com.voidking.book.entity.Admin;import com.voidking.book.logic.AdminLogicService;import com.voidking.book.repository.AdminRepository;import com.voidking.book.service.AdminService;@Servicepublic class AdminLogicServiceImpl implements AdminLogicService &#123;	@Autowired	private AdminService adminService;		@Autowired	private AdminRepository adminRepository;	public String login(Admin admin) &#123;		if (admin == null) &#123;			return &quot;è¡¨ç°å±‚é”™è¯¯&quot;;		&#125;		if (admin.getName() == null || admin.getName().equals(&quot;&quot;)) &#123;			return &quot;ç”¨æˆ·åé”™è¯¯&quot;;		&#125;		if (admin.getPwd() == null || admin.getPwd().equals(&quot;&quot;)) &#123;			return &quot;å¯†ç é”™è¯¯&quot;;		&#125;//		AdminBase tmp = this.adminBaseService.findByNameAndPwd(//				adminBase.getName(), adminBase.getPwd());		Admin tmp = this.adminRepository.findByNameAndPwd(admin.getName(), admin.getPwd());				if (tmp == null) &#123;			return &quot;ç”¨æˆ·åæˆ–è€…å¯†ç é”™è¯¯&quot;;		&#125;		admin.setId(tmp.getId());		//this.adminBaseService.save(adminBase);		return &quot;ç™»å½•æˆåŠŸ&quot;;	&#125;&#125;
æ–°å»ºBookBaseLogicServiceImpl.javaã€BookKindLogicServiceImpl.javaã€ReaderBaseLogicServiceImpl.javaã€ReaderKindLogicServiceImpl.javaã€BorrowInfoLogicServiceImpl.javaã€SearchLogicServiceImpl.javaã€StatisticsLogicServiceImpl.javaï¼Œè¯¦ç»†ä»£ç ç§»æ­¥https://github.com/voidking/bookmanage.git
é…ç½®æ–‡ä»¶spring-persist.xmlã€database-conn.propertiesã€log4j.propertiesï¼Œå’Œpersistå±‚ç›¸åŒã€‚
context:component-scanèŒƒå›´book-persistå·¥ç¨‹ä¸‹å«æœ‰com.voidking.book.entityã€com.voidking.book.repositoryã€com.voidking.book.serviceã€com.voidking.book.service.implå››ä¸ªåŒ…ã€‚book-persistå·¥ç¨‹ä¸­Springçš„é…ç½®æ–‡ä»¶ï¼Œæœ‰è¿™ä¹ˆä¸€å¥ï¼š
&lt;context:component-scan base-package=&quot;com.voidking.book&quot; /&gt;
è¿™ä¸ªé…ç½®ï¼Œä¼šè‡ªåŠ¨æ‰«æcom.voidking.bookåŒ…åŠå…¶å­åŒ…ä¸‹çš„æ³¨è§£ï¼Œ@Repositoryã€@Serviceã€@Controller å’Œ @Componentï¼Œå¹¶æŠŠå®ƒä»¬æ³¨å†Œä¸ºSpring Beanã€‚åœ¨book-persistå·¥ç¨‹ä¸­ï¼Œä¼¼ä¹æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚
ä¸‹é¢æ³¨æ„ï¼Œé—®é¢˜æ¥äº†ï¼ï¼ï¼
åœ¨book-logicå·¥ç¨‹ä¸­ï¼Œå«æœ‰com.voidking.book.logicã€com.voidking.book.logic.implä¸¤ä¸ªåŒ…ã€‚åŒæ—¶ï¼Œå¼•å…¥äº†book-persistæ‰“åŒ…æˆçš„jaræ–‡ä»¶ï¼Œjaræ–‡ä»¶ä¸­å¹¶æ²¡æœ‰Springçš„é…ç½®æ–‡ä»¶ï¼Œæ›´æ²¡æœ‰åŠ è½½é…ç½®æ–‡ä»¶è¿™ä¸€è¿‡ç¨‹ã€‚è€Œbook-logicå·¥ç¨‹ä¸­Springçš„é…ç½®æ–‡ä»¶ï¼Œä¹Ÿæœ‰è¿™ä¹ˆä¸€å¥ï¼š
&lt;context:component-scan base-package=&quot;com.voidking.book&quot; /&gt;
è¿™æ—¶ï¼Œè¯·é—®ï¼Œè¿™é‡Œçš„com.voidking.bookæ˜¯æŒ‡åœ¨å½“å‰å·¥ç¨‹ä¸‹ï¼Œè¿˜æ˜¯jaræ–‡ä»¶é‡Œé¢ï¼Œåˆæˆ–æ˜¯ä¸¤è€…éƒ½åŒ…æ‹¬ï¼ŸéƒåŒå­¦çŒœæµ‹ä¸¤è€…éƒ½åŒ…æ‹¬ï¼Œé‚£ä¹ˆæ€ä¹ˆè¯æ˜ï¼Ÿ1ã€ç”±book-persistå·¥ç¨‹ï¼Œå¯ä»¥çœ‹å‡ºï¼Œå½“å‰å·¥ç¨‹ä¸‹çš„åŒ…ï¼Œæ˜¯è‚¯å®šä¼šè¢«æ‰«æçš„ã€‚2ã€ç”±book-logicå·¥ç¨‹ï¼Œå¯ä»¥çœ‹å‡ºï¼Œå®ƒä½¿ç”¨äº†jaræ–‡ä»¶ä¸­çš„ç±»ï¼Œè€Œä¸”æ²¡æœ‰â€œnewâ€ï¼Œè€Œæ˜¯â€œ@Autowiredâ€ï¼Œè¯´æ˜jaråŒ…ä¸­çš„åŒ…ä¹Ÿæ˜¯ä¼šè¢«æ‰«æçš„ã€‚
è¿™æ—¶æ–°çš„é—®é¢˜å‡ºç°äº†ï¼Œbook-persistå’Œbook-logicè¿™ä¸¤ä¸ªå·¥ç¨‹ï¼Œæ˜¯å¦éœ€è¦ä»€ä¹ˆå¿…ç„¶çš„è¦æ±‚ï¼Ÿæ¯”å¦‚å¿…é¡»åœ¨åŒä¸€ä¸ªgroupIdä¸‹é¢ï¼Ÿ
ç­”æ¡ˆæ˜¯æ²¡æœ‰ç‰¹æ®Šè¦æ±‚ï¼è¯æ˜è¿‡ç¨‹å¦‚ä¸‹ï¼š1ã€æ–°å»ºä»»æ„Mavenå·¥ç¨‹ï¼ˆä»¥book-jpaä¸ºä¾‹ï¼‰ã€‚2ã€åœ¨pom.xmlä¸­ï¼Œåƒbook-logicä¸€æ ·ï¼Œå¼•å…¥book-persistçš„jaræ–‡ä»¶ã€‚3ã€æ‹·è´book-logicçš„Springé…ç½®æ–‡ä»¶åˆ°book-jpaçš„å¯¹åº”ä½ç½®ã€‚4ã€åœ¨src/test/javaä¸‹æ–°å»ºä»»æ„åŒ…ï¼ŒåŒ…ä¸­æ–°å»ºä»»æ„javaæ–‡ä»¶ã€‚5ã€åœ¨Testæ–¹æ³•ä¸­ï¼ŒåŠ è½½é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨book-persistä¸­çš„Beanã€‚æœ€åè¿è¡Œç»“æœå’Œé¢„æœŸä¸€è‡´ï¼Œç­”æ¡ˆå¾—è¯ï¼
æ€»ç»“ï¼šcontext:component-scanæ‰«æçš„èŒƒå›´åŒ…æ‹¬å½“å‰å·¥ç¨‹å’Œå¼•å…¥çš„jaræ–‡ä»¶ï¼Œè€Œä¸”ä¸è¦æ±‚å½“å‰å·¥ç¨‹å’Œjaræ–‡ä»¶åŒå¤„äºä¸€ä¸ªgroupIdã€‚
å•å…ƒæµ‹è¯•åœ¨src/test/javaæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºåŒ…com.voidking.book.logicï¼Œæ–°å»ºAdminLogicServiceTest.javaæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ã€‚
package com.voidking.book.logic;import org.junit.Before;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;import com.voidking.book.entity.Admin;public class AdminLogicServiceTest &#123;	private AdminLogicService adminLogicService;	@Before	public void prepare()&#123;		ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;spring-persist.xml&quot;);		adminLogicService = ctx.getBean(AdminLogicService.class);	&#125;		@Test	public void testLogin() &#123;		Admin admin = new Admin(&quot;haojin&quot;,&quot;haojin&quot;);		System.err.println(this.adminLogicService.login(admin));	&#125;&#125;
å…¶ä»–æœåŠ¡ç±»çš„æµ‹è¯•ç”¨ä¾‹ï¼Œè‡ªè¡Œç¼–å†™ã€‚
æ³¨ï¼šæ‰“åŒ…jaræ–‡ä»¶æ—¶ï¼Œsrc/test/javaä¸‹çš„é…ç½®æ–‡ä»¶å’Œsrc/test/resourcesä¸‹çš„ç±»ï¼Œä¸ä¼šè¢«æ‰“åŒ…ã€‚
åè®°æ²¡æœ‰äººèƒ½éšéšä¾¿ä¾¿æˆåŠŸï¼Œè¸è¸å®å®ï¼Œä¸€ç‚¹ä¸€æ»´ã€‚ã€‚ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>maven</tag>
      </tags>
  </entry>
  <entry>
    <title>å›¾ä¹¦ç®¡ç†ç³»ç»Ÿä¹‹Spring JPA</title>
    <url>/dev-bookmanage-persist/</url>
    <content><![CDATA[å‰è¨€è¿™ä¸€ä¸ªå°ç³»åˆ—çš„é¡¹ç›®å®æˆ˜ï¼ŒéƒåŒå­¦ä¼šå°½å¯èƒ½è§£é‡Šæ¸…æ¥šæ¯ä¸€ä¸ªç»†èŠ‚ã€‚æœ‰äº›å†…å®¹åœ¨ä»¥å‰çš„æ–‡ç« ä¸­å·²ç»å†™è¿‡ï¼Œè¿™æ¬¡å°±å½“å¤ä¹ äº†ã€‚
Mavençˆ¶å·¥ç¨‹æ–°å»ºå·¥ç¨‹1ã€æ‰“å¼€Eclipseï¼ŒFileï¼ŒNewï¼ŒMaven Projectï¼Œå‹¾é€‰Create a simple projectï¼ŒNextã€‚


2ã€å¡«å†™Group Idå’ŒArtifact Idï¼ŒPackagingé€‰æ‹©pomã€‚å¦‚ä¸‹å›¾ï¼šè§£é‡Šï¼šMavenæ˜¯ä¸€ä¸ªå››ç»´çš„ä»“åº“ï¼Œé‡Œé¢å­˜åœ¨ç€æ— æ•°çš„jaråŒ…ã€‚å››ç»´å‘é‡åˆ†åˆ«æ˜¯GroupIdã€ArtifactIDã€Versionã€Packagingï¼Œåˆ›å»ºMavenå·¥ç¨‹çš„æ—¶å€™ï¼Œéœ€è¦è¾“å…¥è¿™å››ä¸ªå‚æ•°ï¼Œå…¶ä¸­Versioné»˜è®¤ä¸º0.0.1-SNAPSHOTï¼ŒPackagingé»˜è®¤ä¸ºjarã€‚ä¸Šå›¾ç›¸å½“äºå‘½ä»¤ï¼š
mvn archetype:create -DgroupId=com.voidking.book -DartifactId=book-persist 
ç„¶åæŠŠpom.xmlä¸­çš„packagingæ”¹æˆpomã€‚å…¶ä¸­éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ— æ³•ä½¿ç”¨mvnå‘½ä»¤ï¼Œæ¯”å¦‚â€œE:\â€ã€‚
pom.xmlè¯¦è§£pom.xmlæ–‡ä»¶ï¼Œæ˜¯Mavençš„æ ¸å¿ƒã€‚
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;	&lt;groupId&gt;com.voidking.book&lt;/groupId&gt;	&lt;artifactId&gt;book-parent&lt;/artifactId&gt;	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;	&lt;packaging&gt;pom&lt;/packaging&gt;		&lt;!--èšåˆæ¨¡å—ï¼Œä¸€æ¡å‘½ä»¤å°±èƒ½æ„å»ºä¸‰ä¸ªæ¨¡å—--&gt;	&lt;modules&gt;		&lt;!--moduleçš„å€¼æ˜¯ä»¥å½“å‰POMä¸ºä¸»ç›®å½•çš„ç›¸å¯¹è·¯å¾„--&gt;		&lt;module&gt;../book-persist&lt;/module&gt;		&lt;module&gt;../book-logic&lt;/module&gt;		&lt;module&gt;../book-ui&lt;/module&gt;		&lt;!--ä½¿ç”¨ç»§æ‰¿çš„è¯ï¼Œparentä¹Ÿè¦åŠ å…¥è¿™é‡Œ--&gt;		&lt;!--ï¼ˆä½†æ˜¯ä¸ªäººå®éªŒè¯æ˜ï¼Œä¸åŠ ä¹Ÿå¯ä»¥ï¼‰--&gt;		&lt;module&gt;book-parent&lt;/module&gt;	&lt;/modules&gt;		&lt;properties&gt;		&lt;!--è‡ªå®šä¹‰å±æ€§å€¼ï¼Œä¸€èˆ¬ç”¨äºç»Ÿä¸€ç‰ˆæœ¬--&gt;		&lt;struts.version&gt;2.3.1&lt;/struts.version&gt;		&lt;springframework.version&gt;3.2.4.RELEASE&lt;/springframework.version&gt;	&lt;/properties&gt;	&lt;!--dependencyManagementä¸­é…ç½®çš„å…ƒç´ æ—¢ä¸ä¼šç»™parentå¼•å…¥ä¾èµ–ï¼Œ--&gt;	&lt;!--ä¹Ÿä¸ä¼šç»™å®ƒçš„å­æ¨¡å—å¼•å…¥ä¾èµ–ï¼Œä»…ä»…æ˜¯å®ƒçš„é…ç½®æ˜¯å¯ç»§æ‰¿çš„ã€‚--&gt;	&lt;!--pluginManagementç±»ä¼¼ï¼Œå®ƒæ˜¯ç”¨æ¥è¿›è¡Œæ’ä»¶ç®¡ç†çš„ã€‚--&gt;	&lt;dependencyManagement&gt;		&lt;!--åœ¨çˆ¶POMä¸­å£°æ˜ä¾èµ–--&gt;		&lt;dependencies&gt;			&lt;!-- struts2æ¡†æ¶ --&gt;			&lt;dependency&gt;				&lt;groupId&gt;org.apache.struts&lt;/groupId&gt;				&lt;artifactId&gt;struts2-core&lt;/artifactId&gt;				&lt;version&gt;$&#123;struts.version&#125;&lt;/version&gt;			&lt;/dependency&gt;			&lt;dependency&gt;				&lt;groupId&gt;org.apache.struts&lt;/groupId&gt;				&lt;artifactId&gt;struts2-spring-plugin&lt;/artifactId&gt;				&lt;version&gt;$&#123;struts.version&#125;&lt;/version&gt;			&lt;/dependency&gt;			&lt;dependency&gt;				&lt;groupId&gt;org.apache.struts&lt;/groupId&gt;				&lt;artifactId&gt;struts2-json-plugin&lt;/artifactId&gt;				&lt;version&gt;$&#123;struts.version&#125;&lt;/version&gt;			&lt;/dependency&gt;			&lt;dependency&gt;				&lt;groupId&gt;org.apache.struts&lt;/groupId&gt;				&lt;artifactId&gt;struts2-convention-plugin&lt;/artifactId&gt;				&lt;version&gt;$&#123;struts.version&#125;&lt;/version&gt;			&lt;/dependency&gt;						&lt;!-- sql server é©±åŠ¨ --&gt;			&lt;dependency&gt;				&lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;				&lt;artifactId&gt;sqljdbc4&lt;/artifactId&gt;				&lt;version&gt;1.1.1&lt;/version&gt;			&lt;/dependency&gt;						&lt;!-- mysqlé©±åŠ¨ --&gt;			&lt;dependency&gt;				&lt;groupId&gt;mysql&lt;/groupId&gt;				&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;				&lt;version&gt;5.1.30&lt;/version&gt;			&lt;/dependency&gt;						&lt;!-- Oracleé©±åŠ¨ --&gt;			&lt;dependency&gt;				&lt;groupId&gt;com.oracle&lt;/groupId&gt;				&lt;artifactId&gt;ojdbc14&lt;/artifactId&gt;				&lt;version&gt;10.2.0.3.0&lt;/version&gt;			&lt;/dependency&gt;						&lt;!-- Hibernat 4 --&gt;			&lt;dependency&gt;				&lt;groupId&gt;org.hibernate&lt;/groupId&gt;				&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;				&lt;version&gt;4.2.7.Final&lt;/version&gt;			&lt;/dependency&gt;			&lt;dependency&gt;				&lt;groupId&gt;org.hibernate&lt;/groupId&gt;				&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;				&lt;version&gt;5.0.1.Final&lt;/version&gt;			&lt;/dependency&gt;			&lt;dependency&gt;				&lt;groupId&gt;org.hibernate&lt;/groupId&gt;				&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;				&lt;version&gt;4.2.6.Final&lt;/version&gt;			&lt;/dependency&gt;			&lt;dependency&gt;				&lt;groupId&gt;junit&lt;/groupId&gt;				&lt;artifactId&gt;junit&lt;/artifactId&gt;				&lt;version&gt;4.11&lt;/version&gt;				&lt;scope&gt;test&lt;/scope&gt;			&lt;/dependency&gt;			&lt;!-- Spring æ ¸å¿ƒåº“ --&gt;			&lt;dependency&gt;				&lt;groupId&gt;org.springframework&lt;/groupId&gt;				&lt;artifactId&gt;spring-context&lt;/artifactId&gt;				&lt;version&gt;$&#123;springframework.version&#125;&lt;/version&gt;			&lt;/dependency&gt;			&lt;dependency&gt;				&lt;groupId&gt;org.springframework&lt;/groupId&gt;				&lt;artifactId&gt;spring-core&lt;/artifactId&gt;				&lt;version&gt;$&#123;springframework.version&#125;&lt;/version&gt;			&lt;/dependency&gt;			&lt;dependency&gt;				&lt;groupId&gt;org.springframework&lt;/groupId&gt;				&lt;artifactId&gt;spring-beans&lt;/artifactId&gt;				&lt;version&gt;$&#123;springframework.version&#125;&lt;/version&gt;			&lt;/dependency&gt;			&lt;dependency&gt;				&lt;groupId&gt;org.springframework&lt;/groupId&gt;				&lt;artifactId&gt;spring-orm&lt;/artifactId&gt;				&lt;version&gt;$&#123;springframework.version&#125;&lt;/version&gt;			&lt;/dependency&gt;			&lt;dependency&gt;				&lt;groupId&gt;org.springframework&lt;/groupId&gt;				&lt;artifactId&gt;spring-aop&lt;/artifactId&gt;				&lt;version&gt;$&#123;springframework.version&#125;&lt;/version&gt;			&lt;/dependency&gt;			&lt;dependency&gt;				&lt;groupId&gt;org.springframework&lt;/groupId&gt;				&lt;artifactId&gt;spring-tx&lt;/artifactId&gt;				&lt;version&gt;$&#123;springframework.version&#125;&lt;/version&gt;			&lt;/dependency&gt;						&lt;!-- Spring MVC åº“ --&gt;			&lt;dependency&gt;				&lt;groupId&gt;org.springframework&lt;/groupId&gt;				&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;				&lt;version&gt;$&#123;springframework.version&#125;&lt;/version&gt;			&lt;/dependency&gt;			&lt;dependency&gt;				&lt;groupId&gt;org.springframework&lt;/groupId&gt;				&lt;artifactId&gt;spring-web&lt;/artifactId&gt;				&lt;version&gt;$&#123;springframework.version&#125;&lt;/version&gt;			&lt;/dependency&gt;			&lt;dependency&gt;				&lt;groupId&gt; org.aspectj&lt;/groupId&gt;				&lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;				&lt;version&gt; 1.6.11&lt;/version&gt;			&lt;/dependency&gt;			&lt;dependency&gt;				&lt;groupId&gt;org.springframework.data&lt;/groupId&gt;				&lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;				&lt;version&gt;1.4.1.RELEASE&lt;/version&gt;			&lt;/dependency&gt;			&lt;dependency&gt;				&lt;groupId&gt;org.slf4j&lt;/groupId&gt;				&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;				&lt;version&gt;1.7.5&lt;/version&gt;			&lt;/dependency&gt;			&lt;dependency&gt;				&lt;groupId&gt;log4j&lt;/groupId&gt;				&lt;artifactId&gt;log4j&lt;/artifactId&gt;				&lt;version&gt;1.2.17&lt;/version&gt;			&lt;/dependency&gt;			&lt;!-- æ•°æ®åº“è¿æ¥æ±  --&gt;			&lt;dependency&gt;				&lt;groupId&gt;commons-dbcp&lt;/groupId&gt;				&lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;				&lt;version&gt;1.4&lt;/version&gt;			&lt;/dependency&gt;			&lt;dependency&gt;				&lt;groupId&gt;javax.servlet&lt;/groupId&gt;				&lt;artifactId&gt;servlet-api&lt;/artifactId&gt;				&lt;version&gt;2.5&lt;/version&gt;			&lt;/dependency&gt;		&lt;/dependencies&gt;	&lt;/dependencyManagement&gt;&lt;/project&gt;

Persistå±‚å·¥ç¨‹æ–°å»ºå·¥ç¨‹1ã€Fileï¼ŒNewï¼ŒMaven Projectï¼Œå‹¾é€‰Create a simple projectï¼ŒNextã€‚
2ã€å¡«å†™Group Idå’ŒArtifact Idï¼ŒPackagingé€‰æ‹©jarã€‚
pom.xmlè¯¦è§£&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;	&lt;!--groupIdå’Œversionçœç•¥äº†ï¼Œå› ä¸ºä½¿ç”¨äº†ç»§æ‰¿ã€‚--&gt;	&lt;!--è¿˜æœ‰ä¸€äº›ç»§æ‰¿çš„å…ƒç´ ï¼Œè¯¦è§ä¹‹å‰æ€»ç»“çš„ã€ŠMavenä¹‹pom.xmlã€‹--&gt;	&lt;artifactId&gt;book-persist&lt;/artifactId&gt;		&lt;!--å†™å‡ºparentçš„åæ ‡å’Œç›¸å¯¹è·¯å¾„--&gt;	&lt;parent&gt;		&lt;groupId&gt;com.voidking.book&lt;/groupId&gt;		&lt;artifactId&gt;book-parent&lt;/artifactId&gt;		&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;		&lt;relativePath&gt;../book-parent/pom.xml&lt;/relativePath&gt;	&lt;/parent&gt;	&lt;!--çœŸå®ä¾èµ–--&gt;	&lt;dependencies&gt;		&lt;!--åªæœ‰å­æ¨¡å—é…ç½®äº†ç»§æ‰¿çš„å…ƒç´ ï¼Œæ‰ä¼šçœŸæ­£çš„æœ‰æ•ˆï¼Œå¦åˆ™ä¸åŠ è½½--&gt;		&lt;!--ä¸»è¦é…ç½®groupIdå’ŒartifactId--&gt;		&lt;dependency&gt;				&lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;			&lt;artifactId&gt;sqljdbc4&lt;/artifactId&gt;			&lt;!--è¿™é‡Œå¹¶æ²¡æœ‰æŒ‡å®šversionï¼Œå› ä¸ºç»§æ‰¿äº†parentçš„versionã€‚--&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;mysql&lt;/groupId&gt;			&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;!-- Oracleé©±åŠ¨ --&gt;		&lt;dependency&gt;			&lt;groupId&gt;com.oracle&lt;/groupId&gt;			&lt;artifactId&gt;ojdbc14&lt;/artifactId&gt;			&lt;!--å½“ç„¶ï¼Œä¹Ÿå¯ä»¥è¦†ç›–çˆ¶ç±»çš„versionã€‚--&gt;			&lt;version&gt;10.2.0.3.0&lt;/version&gt;		&lt;/dependency&gt;		&lt;!-- Hibernat 4 æ¡†æ¶ --&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.hibernate&lt;/groupId&gt;			&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.hibernate&lt;/groupId&gt;			&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.hibernate&lt;/groupId&gt;			&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;			&lt;scope&gt;provided&lt;/scope&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;junit&lt;/groupId&gt;			&lt;artifactId&gt;junit&lt;/artifactId&gt;			&lt;scope&gt;test&lt;/scope&gt;		&lt;/dependency&gt;		&lt;!-- Spring æ ¸å¿ƒåº“ --&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-context&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-core&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-beans&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-orm&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-aop&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-tx&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;!-- Spring MVC åº“ --&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework&lt;/groupId&gt;			&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.aspectj&lt;/groupId&gt;			&lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework.data&lt;/groupId&gt;			&lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;!-- æ—¥å¿—æ‰“å° --&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.slf4j&lt;/groupId&gt;			&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;log4j&lt;/groupId&gt;			&lt;artifactId&gt;log4j&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;!-- æ•°æ®åº“è¿æ¥æ±  --&gt;		&lt;dependency&gt;			&lt;groupId&gt;commons-dbcp&lt;/groupId&gt;			&lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;		&lt;/dependency&gt;	&lt;/dependencies&gt;&lt;/project&gt;
èšåˆå’Œç»§æ‰¿çš„å…³ç³»ä»ä¸Šé¢ä¸¤ä¸ªpom.xmlæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œæ¨¡å—èšåˆæ˜¯å†™åœ¨çˆ¶å·¥ç¨‹ä¸­çš„ï¼Œè€Œæ¨¡å—çš„ç»§æ‰¿åˆ™æ˜¯å†™åœ¨å­å·¥ç¨‹ä¸­çš„ã€‚
åŒºåˆ« ï¼š1ã€å¯¹äºèšåˆæ¨¡å—æ¥è¯´ï¼Œå®ƒçŸ¥é“æœ‰å“ªäº›è¢«èšåˆçš„æ¨¡å—ï¼Œä½†é‚£äº›è¢«èšåˆçš„æ¨¡å—ä¸çŸ¥é“è¿™ä¸ªèšåˆæ¨¡å—çš„å­˜åœ¨ã€‚2ã€å¯¹äºç»§æ‰¿å…³ç³»çš„çˆ¶POMæ¥è¯´ï¼Œå®ƒä¸çŸ¥é“æœ‰å“ªäº›å­æ¨¡å—ç»§æ‰¿äºå®ƒï¼Œä½†é‚£äº›å­æ¨¡å—éƒ½å¿…é¡»çŸ¥é“è‡ªå·±çš„çˆ¶POMæ˜¯ä»€ä¹ˆã€‚
å…±åŒç‚¹ ï¼š1ã€èšåˆPOMä¸ç»§æ‰¿å…³ç³»ä¸­çš„çˆ¶POMçš„packagingéƒ½æ˜¯pomã€‚2ã€èšåˆæ¨¡å—ä¸ç»§æ‰¿å…³ç³»ä¸­çš„çˆ¶æ¨¡å—é™¤äº†POMä¹‹å¤–éƒ½æ²¡æœ‰å®é™…çš„å†…å®¹ã€‚æ³¨ï¼šåœ¨ç°æœ‰çš„å®é™…é¡¹ç›®ä¸­ï¼Œä¸€ä¸ªPOMæ—¢æ˜¯èšåˆPOMï¼Œåˆæ˜¯çˆ¶POMï¼Œè¿™ä¹ˆåšä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿ã€‚
æ–°å»ºåŒ…æ–°å»ºåŒ…com.voidking.book.entityã€com.voidking.book.repositoryã€com.voidking.book.serviceã€com.voidking.book.service.implã€‚è¿™æ ·å‘½åï¼Œæ¯”è¾ƒè§„èŒƒã€‚
å…¶ä¸­ï¼Œentityæ˜¯æ•°æ®æ˜ å°„å±‚ï¼ˆæœ‰äººä¹ æƒ¯å‘½åä¸ºdomainï¼ŒéƒåŒå­¦è¿˜æ˜¯å–œæ¬¢entityï¼‰ï¼›repositoryæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å±‚ï¼Œä»‹äºé¢†åŸŸå±‚ä¸æ•°æ®æ˜ å°„å±‚ï¼ˆæ•°æ®è®¿é—®å±‚ï¼‰ä¹‹é—´ã€‚å®ƒçš„å­˜åœ¨è®©é¢†åŸŸå±‚æ„Ÿè§‰ä¸åˆ°æ•°æ®è®¿é—®å±‚çš„å­˜åœ¨ï¼Œå®ƒæä¾›ä¸€ä¸ªç±»ä¼¼é›†åˆçš„æ¥å£æä¾›ç»™é¢†åŸŸå±‚è¿›è¡Œé¢†åŸŸå¯¹è±¡çš„è®¿é—®ã€‚Repositoryæ˜¯ä»“åº“ç®¡ç†å‘˜ï¼Œé¢†åŸŸå±‚éœ€è¦ä»€ä¹ˆä¸œè¥¿åªéœ€å‘Šè¯‰ä»“åº“ç®¡ç†å‘˜ï¼Œç”±ä»“åº“ç®¡ç†å‘˜æŠŠä¸œè¥¿æ‹¿ç»™å®ƒï¼Œå¹¶ä¸éœ€è¦çŸ¥é“ä¸œè¥¿å®é™…æ”¾åœ¨å“ªï¼›serviceå¯¹ä¸šåŠ¡é€»è¾‘å±‚æä¾›çš„è®¿é—®æ¥å£ï¼›service.implæ˜¯å¯¹è®¿é—®æ¥å£çš„å®ç°ã€‚
entityåŒ…åœ¨entityåŒ…ä¸‹ï¼Œæ–°å»ºAdmin.javaæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ã€‚
package com.voidking.book.entity;import javax.persistence.Column;import javax.persistence.Entity;import javax.persistence.GeneratedValue;import javax.persistence.Id;import javax.persistence.Table;@Entity@Table(name=&quot;admin&quot;)public class Admin &#123;		@Id	@GeneratedValue	private Long id;		@Column(length=20,nullable=false)	private String name;		@Column(length=20,nullable=false)	private String pwd;	public Long getId() &#123;		return id;	&#125;	public void setId(Long id) &#123;		this.id = id;	&#125;	public String getName() &#123;		return name;	&#125;	public void setName(String name) &#123;		this.name = name;	&#125;	public String getPwd() &#123;		return pwd;	&#125;	public void setPwd(String pwd) &#123;		this.pwd = pwd;	&#125;		public Admin() &#123;		super();	&#125;	public Admin(String name, String pwd) &#123;		super();		this.name = name;		this.pwd = pwd;	&#125;	@Override	public int hashCode() &#123;		final int prime = 31;		int result = 1;		result = prime * result + ((id == null) ? 0 : id.hashCode());		return result;	&#125;	@Override	public boolean equals(Object obj) &#123;		if (this == obj)			return true;		if (obj == null)			return false;		if (getClass() != obj.getClass())			return false;		Admin other = (Admin) obj;		if (id == null) &#123;			if (other.id != null)				return false;		&#125; else if (!id.equals(other.id))			return false;		return true;	&#125;		&#125;
1ã€@Entityæ³¨è§£æ ‡è¯†å®ä½“Beanã€‚2ã€@Table(name=æ•°æ®åº“è¡¨å)æ³¨è§£ï¼Œæ ‡è¯†è¯¥å®ä½“Beanæ˜ å°„åˆ°å…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨å3ã€å¦‚æœä¸æŒ‡å®šåˆ™JPAå®ç°ä¼šè‡ªåŠ¨ç”Ÿæˆé»˜è®¤çš„è¡¨åç§°ã€‚4ã€@Idæ³¨è§£æ ‡è¯†ä¸»é”®ã€‚5ã€@GeneratedValueæ³¨è§£æ ‡è¯†ä¸»é”®ç”Ÿæˆç­–ç•¥ï¼Œ@GeneratedValue(strategy=GenerationType.AUTO)æ˜¯é»˜è®¤ç­–ç•¥ï¼Œç›¸å½“äº@GeneratedValueæˆ–è€…çœç•¥ã€‚

TABLEï¼šä½¿ç”¨ä¸€ä¸ªç‰¹å®šçš„æ•°æ®åº“è¡¨æ ¼æ¥ä¿å­˜ä¸»é”®ã€‚ 
SEQUENCEï¼šæ ¹æ®åº•å±‚æ•°æ®åº“çš„åºåˆ—æ¥ç”Ÿæˆä¸»é”®ï¼Œæ¡ä»¶æ˜¯æ•°æ®åº“æ”¯æŒåºåˆ—ã€‚ï¼ˆé€‚ç”¨äºoracleï¼‰ 
IDENTITYï¼šä¸»é”®ç”±æ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆï¼ˆä¸»è¦æ˜¯è‡ªåŠ¨å¢é•¿å‹ï¼Œé€‚ç”¨äºsqlserverï¼Œmysqlæ•°æ®åº“ä¸­ï¼‰
AUTOï¼šä¸»é”®ç”±ç¨‹åºæ§åˆ¶ã€‚ 

6ã€@Columnæ³¨è§£æœ‰nameã€uniqueã€nullableã€lengthå‚æ•°ã€‚è‹¥ä¸å†™@Columnæ³¨è§£ï¼Œåˆ™ä¸€åˆ‡ä½¿ç”¨@Columnæ³¨è§£çš„é»˜è®¤å€¼ã€‚
åœ¨entityä¸‹ï¼Œæ–°å»ºBookBase.javaã€BookKind.javaã€ReaderBase.javaã€ReaderKind.javaã€BorrowInfo.javaï¼Œå†…å®¹åˆ†åˆ«å¦‚ä¸‹ã€‚
package com.voidking.book.entity;/** * BookBase *  */@Entity@Table(name=&quot;bookbase&quot;)public class BookBase &#123;	@Id	@GeneratedValue(strategy=GenerationType.AUTO)	private Long id;		@Column(length=100,nullable=false)	private String name;		@Column(length=100,nullable=false)	private String author;		@Column(length=100,nullable=false)	private String press;		@Column(length=50,nullable=true)	private String publishdate;		private Float price;		private Integer page;	@Column(length=100,nullable=true)	private String keyword;		@Column(length=50,nullable=true)	private String registerdate;		@Column(length=2,nullable=false)	private String borrowed;		@Lob	private String notice;		@ManyToOne(cascade=CascadeType.REFRESH)	@JoinColumn(name=&quot;bookkind&quot;)	private BookKind bookkind;		//setterå’Œgetteræ–¹æ³•çœç•¥	&#125;
è¯¦ç»†ä»£ç è¯·ç§»æ­¥https://github.com/voidking/bookmanage.git
1ã€JPAå®šä¹‰äº†one-to-oneã€one-to-manyã€many-to-oneã€many-to-many 4ç§å…³ç³»ã€‚
å¯¹äºæ•°æ®åº“æ¥è¯´ï¼Œé€šå¸¸åœ¨ä¸€ä¸ªè¡¨ä¸­è®°å½•å¯¹å¦ä¸€ä¸ªè¡¨çš„å¤–é”®å…³è”ï¼›å¯¹åº”åˆ°å®ä½“å¯¹è±¡ï¼ŒæŒæœ‰å…³è”æ•°æ®çš„ä¸€æ–¹ç§°ä¸ºowning-sideï¼Œå¦ä¸€æ–¹ç§°ä¸ºinverse-sideã€‚
ä¸ºäº†ç¼–ç¨‹çš„æ–¹ä¾¿ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šå¸Œæœ›åœ¨inverse-sideä¹Ÿèƒ½å¼•ç”¨åˆ°owning-sideçš„å¯¹è±¡ï¼Œæ­¤æ—¶å°±æ„å»ºäº†åŒå‘å…³è”å…³ç³»ã€‚ åœ¨åŒå‘å…³è”ä¸­ï¼Œéœ€è¦åœ¨inverse-sideå®šä¹‰mappedByå±æ€§ï¼Œä»¥æŒ‡æ˜åœ¨owning-sideæ˜¯å“ªä¸€ä¸ªå±æ€§æŒæœ‰çš„å…³è”æ•°æ®ã€‚
å¯¹å…³è”å…³ç³»æ˜ å°„çš„è¦ç‚¹å¦‚ä¸‹ï¼š



å…³ç³»ç±»å‹
Owning-Side
Inverse-Side



one-to-one
@OneToOne
@OneToOne(mappedBy=â€othersideNameâ€)


one-to-many/many-to-one
@ManyToOne
@OneToMany(mappedBy=â€othersideNameâ€)


many-to-many
@ManyToMany
@ManyToMany(mappedBy=â€othersideNameâ€)


å…³è”å…³ç³»è¿˜å¯ä»¥å®šåˆ¶å»¶è¿ŸåŠ è½½å’Œçº§è”æ“ä½œçš„è¡Œä¸ºï¼ˆowning-sideå’Œinverse-sideå¯ä»¥åˆ†åˆ«è®¾ç½®ï¼‰ï¼šé€šè¿‡è®¾ç½®fetch=FetchType.LAZY æˆ– fetch=FetchType.EAGERæ¥å†³å®šå…³è”å¯¹è±¡æ˜¯å»¶è¿ŸåŠ è½½æˆ–ç«‹å³åŠ è½½ã€‚
é€šè¿‡è®¾ç½®cascade={options}å¯ä»¥è®¾ç½®çº§è”æ“ä½œçš„è¡Œä¸ºï¼Œå…¶ä¸­optionså¯ä»¥æ˜¯ä»¥ä¸‹ç»„åˆï¼š

CascadeType.MERGE çº§è”æ›´æ–°
CascadeType.PERSIST çº§è”ä¿å­˜
CascadeType.REFRESH çº§è”åˆ·æ–°
CascadeType.REMOVE çº§è”åˆ é™¤
CascadeType.ALL çº§è”ä¸Šè¿°4ç§æ“ä½œ

2ã€@JoinColumn(name=â€bookkindâ€)æ³¨é‡Šæœ¬è¡¨ä¸­æŒ‡å‘å¦ä¸€ä¸ªè¡¨çš„å¤–é”®ã€‚å¦‚æœä¸æŒ‡å®šnameï¼Œå®ƒä¼šè‡ªåŠ¨å¸®ä½ ç”Ÿæˆä½ æŒ‡å‘è¿™ä¸ªç±»çš„ç±»ååŠ ä¸Šä¸‹åˆ’çº¿å†åŠ ä¸Šidçš„åˆ—,ä¹Ÿå°±æ˜¯é»˜è®¤åˆ—åæ˜¯:bookkind_idã€‚
repositoryåŒ…åœ¨repositoryåŒ…ä¸‹ï¼Œæ–°å»ºAdminRepository.javaï¼Œå†…å®¹å¦‚ä¸‹ã€‚
package com.voidking.book.repository;import org.springframework.data.jpa.repository.JpaRepository;import org.springframework.stereotype.Repository;import com.voidking.book.entity.Admin;@Repositorypublic interface AdminRepository extends JpaRepository&lt;Admin,Long&gt;&#123;	Admin findByNameAndPwd(String name,String pwd);&#125;
Repositoryï¼ˆèµ„æºåº“ï¼‰ï¼šé€šè¿‡ç”¨æ¥è®¿é—®é¢†åŸŸå¯¹è±¡çš„ä¸€ä¸ªç±»ä¼¼é›†åˆçš„æ¥å£ï¼Œåœ¨é¢†åŸŸä¸æ•°æ®æ˜ å°„å±‚ä¹‹é—´è¿›è¡Œåè°ƒã€‚è¿™ä¸ªå«æ³•å°±ç±»ä¼¼äºæˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„DAOï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°±æŒ‰ç…§è¿™ä¸€ä¹ æƒ¯æŠŠæ•°æ®è®¿é—®å±‚å«RepositorySpring Dataç»™æˆ‘ä»¬æä¾›å‡ ä¸ªRepositoryï¼ŒåŸºç¡€çš„Repositoryæä¾›äº†æœ€åŸºæœ¬çš„æ•°æ®è®¿é—®åŠŸèƒ½ï¼Œå…¶å‡ ä¸ªå­æ¥å£åˆ™æ‰©å±•äº†ä¸€äº›åŠŸèƒ½ã€‚å®ƒä»¬çš„ç»§æ‰¿å…³ç³»å¦‚ä¸‹ï¼š

Repositoryï¼šä»…ä»…æ˜¯ä¸€ä¸ªæ ‡è¯†ï¼Œè¡¨æ˜ä»»ä½•ç»§æ‰¿å®ƒçš„å‡ä¸ºä»“åº“æ¥å£ç±»ï¼Œæ–¹ä¾¿Springè‡ªåŠ¨æ‰«æè¯†åˆ« 
CrudRepositoryï¼šç»§æ‰¿Repositoryï¼Œå®ç°äº†ä¸€ç»„CRUDç›¸å…³çš„æ–¹æ³• 
PagingAndSortingRepositoryï¼šç»§æ‰¿CrudRepositoryï¼Œå®ç°äº†ä¸€ç»„åˆ†é¡µæ’åºç›¸å…³çš„æ–¹æ³• 
JpaRepositoryï¼šç»§æ‰¿PagingAndSortingRepositoryï¼Œå®ç°ä¸€ç»„JPAè§„èŒƒç›¸å…³çš„æ–¹æ³• 
JpaSpecificationExecutorï¼šæ¯”è¾ƒç‰¹æ®Šï¼Œä¸å±äºRepositoryä½“ç³»ï¼Œå®ç°ä¸€ç»„JPA CriteriaæŸ¥è¯¢ç›¸å…³çš„æ–¹æ³• 
æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„XxxxRepositoryéœ€è¦ç»§æ‰¿JpaRepositoryï¼Œè¿™æ ·æˆ‘ä»¬çš„XxxxRepositoryæ¥å£å°±å…·å¤‡äº†é€šç”¨çš„æ•°æ®è®¿é—®æ§åˆ¶å±‚çš„èƒ½åŠ›ã€‚ 

1ã€CrudRepository&lt;T, ID extends Serializable&gt;ï¼šè¿™ä¸ªæ¥å£æä¾›äº†æœ€åŸºæœ¬çš„å¯¹å®ä½“ç±»çš„æ·»åˆ æ”¹æŸ¥æ“ä½œ 
T save(T entity);//ä¿å­˜å•ä¸ªå®ä½“ Iterable&lt;T&gt; save(Iterable&lt;? extends T&gt; entities);//ä¿å­˜é›†åˆ T findOne(ID id);//æ ¹æ®idæŸ¥æ‰¾å®ä½“ boolean exists(ID id);//æ ¹æ®idåˆ¤æ–­å®ä½“æ˜¯å¦å­˜åœ¨ Iterable&lt;T&gt; findAll();//æŸ¥è¯¢æ‰€æœ‰å®ä½“,ä¸ç”¨æˆ–æ…ç”¨! long count();//æŸ¥è¯¢å®ä½“æ•°é‡ void delete(ID id);//æ ¹æ®Idåˆ é™¤å®ä½“ void delete(T entity);//åˆ é™¤ä¸€ä¸ªå®ä½“ void delete(Iterable&lt;? extends T&gt; entities);//åˆ é™¤ä¸€ä¸ªå®ä½“çš„é›†åˆ void deleteAll();//åˆ é™¤æ‰€æœ‰å®ä½“,ä¸ç”¨æˆ–æ…ç”¨! 

2ã€PagingAndSortingRepository&lt;T, ID extends Serializable&gt;ï¼šè¿™ä¸ªæ¥å£æä¾›äº†åˆ†é¡µä¸æ’åºåŠŸèƒ½ 
Iterable&lt;T&gt; findAll(Sort sort);//æ’åº Page&lt;T&gt; findAll(Pageable pageable);//åˆ†é¡µæŸ¥è¯¢ï¼ˆå«æ’åºåŠŸèƒ½ï¼‰ 

3ã€JpaRepository&lt;T, ID extends Serializable&gt;ï¼šè¿™ä¸ªæ¥å£æä¾›äº†JPAçš„ç›¸å…³åŠŸèƒ½
List&lt;T&gt; findAll();//æŸ¥æ‰¾æ‰€æœ‰å®ä½“ List&lt;T&gt; findAll(Sort sort);//æ’åº æŸ¥æ‰¾æ‰€æœ‰å®ä½“ List&lt;T&gt; save(Iterable&lt;? extends T&gt; entities);//ä¿å­˜é›†åˆ void flush();//æ‰§è¡Œç¼“å­˜ä¸æ•°æ®åº“åŒæ­¥ T saveAndFlush(T entity);//å¼ºåˆ¶æ‰§è¡ŒæŒä¹…åŒ– void deleteInBatch(Iterable&lt;T&gt; entities);//åˆ é™¤ä¸€ä¸ªå®ä½“é›†åˆ 


1ã€ç®€å•æ¡ä»¶æŸ¥è¯¢:æŸ¥è¯¢æŸä¸€ä¸ªå®ä½“ç±»æˆ–è€…é›†åˆæŒ‰ç…§Spring data å®šä¹‰çš„è§„åˆ™ï¼ŒæŸ¥è¯¢æ–¹æ³•ä»¥find|read|getå¼€å¤´ 
2ã€æ¶‰åŠæ¡ä»¶æŸ¥è¯¢æ—¶ï¼Œæ¡ä»¶çš„å±æ€§ç”¨æ¡ä»¶å…³é”®å­—è¿æ¥ï¼Œè¦æ³¨æ„çš„æ˜¯ï¼šæ¡ä»¶å±æ€§ä»¥é¦–å­—æ¯å¤§å†™å…¶ä½™å­—æ¯å°å†™ä¸ºè§„å®šã€‚ä¾‹å¦‚ï¼šå®šä¹‰ä¸€ä¸ªEntityå®ä½“ç±»class Userï½›    private String firstname;    private String lastname;ï½ä½¿ç”¨Andæ¡ä»¶è¿æ¥æ—¶ï¼Œåº”è¿™æ ·å†™ï¼šfindByLastnameAndFirstname(String lastname,String firstname);æ¡ä»¶çš„å±æ€§åç§°ä¸ä¸ªæ•°è¦ä¸å‚æ•°çš„ä½ç½®ä¸ä¸ªæ•°ä¸€ä¸€å¯¹åº”ã€‚
æ–°å»ºBookBaseRepository.javaã€BookKindRepository.javaã€ReaderBaseRepository.javaã€ReaderKindRepository.javaã€BorrowInfoRepository.javaï¼Œè¯¦ç»†ä»£ç è¯·ç§»æ­¥https://github.com/voidking/bookmanage.git
serviceåŒ…åœ¨serviceåŒ…ä¸­ï¼Œæ–°å»ºBaseService.javaï¼Œå†…å®¹å¦‚ä¸‹ã€‚
package com.voidking.book.service.impl;import java.io.Serializable;import java.util.List;import org.springframework.data.domain.Page;import org.springframework.data.domain.Pageable;import org.springframework.data.jpa.repository.JpaRepository;public interface BaseService&lt;T,ID extends Serializable&gt; &#123;	public boolean isExists(ID id);		public T save(T t);		public void delete(ID id);		public void delete(T t);		public List&lt;T&gt; findAll();		public Page&lt;T&gt; findAll(Pageable pageable);		public Page&lt;T&gt; findAll(int page,int size);		public long count();		public T findOne(ID id);		void setJpaRepository(JpaRepository&lt;T, ID&gt; repository);&#125;
æ–°å»ºAdminService.javaï¼Œå†…å®¹å¦‚ä¸‹ã€‚
package com.voidking.book.service.impl;import com.voidking.book.entity.Admin;public interface AdminService extends BaseService&lt;Admin,Long&gt; &#123;		Admin findByNameAndPwd(String name,String pwd);&#125;
é—®ï¼šæˆ‘ä»¬åªè¦entityåŒ…ã€repositoryåŒ…ï¼Œå°±å¯ä»¥æä¾›å¯¹logicå±‚çš„æœåŠ¡äº†ï¼Œä¸ºä»€ä¹ˆåŠ ä¸€ä¸ªserviceåŒ…å‘¢ï¼Ÿç­”ï¼šä¿¡æ¯éšè—ï¼Œå°è£…å®ç°ç»†èŠ‚ï¼æœ‰äº†serviceè´Ÿè´£ç»™logicæä¾›æœåŠ¡ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬å°±ä¸çŸ¥é“åº•å±‚æ˜¯ç”¨repositoryè¿˜æ˜¯å…¶ä»–æ–¹æ³•å®ç°ã€‚
æ–°å»ºBookBaseService.javaã€BookKindService.javaã€ReaderBaseService.javaã€ReaderKindService.javaã€BorrowInfoService.javaï¼Œè¯¦ç»†ä»£ç è¯·ç§»æ­¥https://github.com/voidking/bookmanage.git
service.implåŒ…åœ¨service.implåŒ…ä¸‹ï¼Œæ–°å»ºBaseServiceImpl.javaï¼Œå†…å®¹å¦‚ä¸‹ã€‚
package com.voidking.book.service.impl;import java.io.Serializable;import java.util.List;import org.springframework.data.domain.Page;import org.springframework.data.domain.PageRequest;import org.springframework.data.domain.Pageable;import org.springframework.data.jpa.repository.JpaRepository;import com.voidking.book.service.BaseService;public class BaseServiceImpl&lt;T,ID extends Serializable&gt; implements BaseService&lt;T, ID&gt;&#123;	protected JpaRepository&lt;T, ID&gt; repository;		public boolean isExists(ID id) &#123;				return repository.exists(id);	&#125;	public T save(T t) &#123;				return repository.save(t);	&#125;	public void setJpaRepository(JpaRepository&lt;T, ID&gt; repository) &#123;				this.repository = repository;	&#125;	public void delete(ID id) &#123;				this.repository.delete(id);	&#125;	public void delete(T t) &#123;				this.repository.delete(t);			&#125;	public List&lt;T&gt; findAll() &#123;				return this.repository.findAll();	&#125;	public Page&lt;T&gt; findAll(Pageable pageable) &#123;				return this.repository.findAll(pageable);	&#125;	public long count() &#123;				return this.repository.count();	&#125;	public T findOne(ID id) &#123;				return this.repository.findOne(id);	&#125;	public Page&lt;T&gt; findAll(int page, int size) &#123;				return this.repository.findAll(new PageRequest(page, size));	&#125;&#125;
æ–°å»ºAdminServiceImpl.javaï¼Œå†…å®¹å¦‚ä¸‹ã€‚
package com.voidking.book.service.impl;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.data.jpa.repository.JpaRepository;import org.springframework.stereotype.Service;import com.voidking.book.entity.Admin;import com.voidking.book.repository.AdminRepository;import com.voidking.book.service.AdminService;@Servicepublic class AdminServiceImpl extends BaseServiceImpl&lt;Admin, Long&gt; implements AdminService&#123;	private AdminRepository adminRepository;	@Autowired	@Override	public void setJpaRepository(JpaRepository&lt;Admin, Long&gt; adminRepository) &#123;		super.repository = adminRepository;		this.adminRepository=(AdminRepository) adminRepository;	&#125;	public Admin findByNameAndPwd(String name, String pwd) &#123;		return this.adminRepository.findByNameAndPwd(name, pwd);	&#125;	&#125;
1ã€Spring2.5å¼•å…¥äº†@Autowiredæ³¨é‡Šï¼Œå®ƒå¯ä»¥å¯¹ç±»æˆå‘˜å˜é‡ã€æ–¹æ³•åŠæ„é€ å‡½æ•°è¿›è¡Œæ ‡æ³¨ï¼Œå®Œæˆè‡ªåŠ¨è£…é…çš„å·¥ä½œã€‚ä¸è¿‡ï¼Œç°åœ¨æ›´æ¨èä½¿ç”¨@Resourceã€‚
2ã€Springä¸ä½†æ”¯æŒè‡ªå·±å®šä¹‰çš„@Autowiredæ³¨è§£ï¼Œè¿˜æ”¯æŒå‡ ä¸ªç”±JSR-250è§„èŒƒå®šä¹‰çš„æ³¨è§£ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯@Resourceã€@PostConstructä»¥åŠ@PreDestroyã€‚@Resourceçš„ä½œç”¨ç›¸å½“äº@Autowiredï¼Œåªä¸è¿‡@AutowiredæŒ‰byTypeè‡ªåŠ¨æ³¨å…¥ï¼Œè€Œ@Resourceé»˜è®¤æŒ‰byNameè‡ªåŠ¨æ³¨å…¥ç½¢äº†ã€‚
æ–°å»ºBookBaseServiceImpl.javaã€BookKindServiceImpl.javaã€ReaderBaseServiceImpl.javaã€ReaderKindServiceImpl.javaã€BorrowInfoServiceImpl.javaï¼Œè¯¦ç»†ä»£ç è¯·ç§»æ­¥https://github.com/voidking/bookmanage.git
spring-persist.xmlåœ¨src/test/resourcesæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºspring-persist.xmlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ã€‚
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;	xmlns:cache=&quot;http://www.springframework.org/schema/cache&quot;	xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot;	xmlns:jpa=&quot;http://www.springframework.org/schema/data/jpa&quot; xmlns:task=&quot;http://www.springframework.org/schema/task&quot;	xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;	xsi:schemaLocation=&quot;http://www.springframework.org/schema/aop 	http://www.springframework.org/schema/aop/spring-aop-3.2.xsd    http://www.springframework.org/schema/task     http://www.springframework.org/schema/task/spring-task-3.2.xsd    http://www.springframework.org/schema/beans     http://www.springframework.org/schema/beans/spring-beans.xsd    http://www.springframework.org/schema/cache     http://www.springframework.org/schema/cache/spring-cache-3.2.xsd    http://www.springframework.org/schema/tx     http://www.springframework.org/schema/tx/spring-tx-3.2.xsd    http://www.springframework.org/schema/context     http://www.springframework.org/schema/context/spring-context-3.2.xsd 	http://www.springframework.org/schema/data/jpa	http://www.springframework.org/schema/data/jpa/spring-jpa.xsd&quot;&gt;	&lt;context:component-scan base-package=&quot;com.voidking.book&quot; /&gt;	&lt;!-- æ•°æ®åº“å±æ€§æ–‡ä»¶ --&gt;	&lt;bean id=&quot;propertyConfigure&quot;		class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;		&lt;property name=&quot;location&quot; value=&quot;classpath:database-conn.properties&quot; /&gt;	&lt;/bean&gt;	&lt;!-- é…ç½®MySQLæ•°æ®æº --&gt;	&lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;		destroy-method=&quot;close&quot;&gt;		&lt;property name=&quot;driverClassName&quot; value=&quot;$&#123;database.driver&#125;&quot; /&gt;		&lt;property name=&quot;url&quot; value=&quot;$&#123;database.uri&#125;&quot; /&gt;		&lt;property name=&quot;username&quot; value=&quot;$&#123;database.username&#125;&quot; /&gt;		&lt;property name=&quot;password&quot; value=&quot;$&#123;database.password&#125;&quot; /&gt;	&lt;/bean&gt;	&lt;!-- JPA é…ç½® --&gt;	&lt;jpa:repositories base-package=&quot;com.voidking.book.repository&quot;&gt;&lt;/jpa:repositories&gt;	&lt;bean id=&quot;entityManagerFactory&quot;		class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;		&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;		&lt;property name=&quot;packagesToScan&quot; value=&quot;com.voidking.book.entity&quot; /&gt;		&lt;property name=&quot;jpaVendorAdapter&quot;&gt;			&lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot;&gt;				&lt;property name=&quot;showSql&quot; value=&quot;$&#123;hibernate.show_sql&#125;&quot; /&gt;				&lt;property name=&quot;databasePlatform&quot; value=&quot;$&#123;hibernate.dialect&#125;&quot; /&gt;				&lt;!--  &lt;property name=&quot;database&quot; value=&quot;$&#123;database.name&#125;&quot; /&gt;--&gt;			&lt;/bean&gt;		&lt;/property&gt;		&lt;property name=&quot;jpaProperties&quot;&gt;			&lt;props&gt;				&lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/prop&gt;				&lt;prop key=&quot;hibernate.connection.useUnicode&quot;&gt;true&lt;/prop&gt;				&lt;prop key=&quot;hibernate.connection.characterEncoding&quot;&gt;UTF-8&lt;/prop&gt;				&lt;prop key=&quot;hibernate.connection.charSet&quot;&gt;UTF-8&lt;/prop&gt;			&lt;/props&gt;		&lt;/property&gt;	&lt;/bean&gt;	&lt;!-- äº‹åŠ¡å¤„ç† --&gt;	&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;&gt;		&lt;property name=&quot;entityManagerFactory&quot; ref=&quot;entityManagerFactory&quot; /&gt;		&lt;property name=&quot;jpaDialect&quot;&gt;			&lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaDialect&quot;&gt;&lt;/bean&gt;		&lt;/property&gt;	&lt;/bean&gt;	&lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;transactionManager&quot;&gt;		&lt;tx:attributes&gt;			&lt;!-- hibernate4å¿…é¡»é…ç½®ä¸ºå¼€å¯äº‹åŠ¡ å¦åˆ™ getCurrentSession()è·å–ä¸åˆ° --&gt;			&lt;tx:method name=&quot;find*&quot; propagation=&quot;REQUIRED&quot; read-only=&quot;true&quot; /&gt;			&lt;tx:method name=&quot;update*&quot; propagation=&quot;REQUIRED&quot; /&gt;			&lt;tx:method name=&quot;delete*&quot; propagation=&quot;REQUIRED&quot; /&gt;			&lt;tx:method name=&quot;save*&quot; propagation=&quot;REQUIRED&quot; /&gt;			&lt;tx:method name=&quot;*&quot; propagation=&quot;SUPPORTS&quot; /&gt;		&lt;/tx:attributes&gt;	&lt;/tx:advice&gt;	&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot; /&gt;	&lt;!-- äº‹åŠ¡å¤„ç†é…ç½®å®Œæ¯• --&gt;	&lt;aop:aspectj-autoproxy expose-proxy=&quot;true&quot; /&gt;	&lt;aop:config expose-proxy=&quot;true&quot;&gt;		&lt;aop:pointcut id=&quot;baseBizMethods&quot;			expression=&quot;execution(public * com.voidking.book.service.impl.*.*(..))&quot; /&gt;		&lt;aop:advisor pointcut-ref=&quot;baseBizMethods&quot; advice-ref=&quot;txAdvice&quot; /&gt;	&lt;/aop:config&gt;&lt;/beans&gt;
1ã€å¦‚æœé…ç½®äº†context:component-scané‚£ä¹ˆcontext:annotation-configæ ‡ç­¾å°±å¯ä»¥ä¸ç”¨åœ¨xmlä¸­é…ç½®äº†ï¼Œå› ä¸ºå‰è€…åŒ…å«äº†åè€…ã€‚åœ¨xmlé…ç½®äº†å‰è€…åï¼Œspringå¯ä»¥è‡ªåŠ¨å»æ‰«æbase-packä¸‹é¢æˆ–è€…å­åŒ…ä¸‹é¢çš„javaæ–‡ä»¶ï¼Œå¦‚æœæ‰«æåˆ°æœ‰@Componentã€@Controllerã€@Serviceç­‰è¿™äº›æ³¨è§£çš„ç±»ï¼Œåˆ™æŠŠè¿™äº›ç±»æ³¨å†Œä¸ºbeanã€‚
2ã€PropertyPlaceholderConfigurerç”¨äºSpringä»å¤–éƒ¨å±æ€§æ–‡ä»¶ä¸­è½½å…¥å±æ€§ï¼Œå¹¶ä½¿ç”¨è¿™äº›å±æ€§å€¼æ›¿æ¢Spring é…ç½®æ–‡ä»¶ä¸­çš„å ä½ç¬¦å˜é‡ï¼ˆ${varible}ï¼‰ã€‚ 
3ã€Springé…ç½®æ–‡ä»¶ä¸­å…³äºäº‹åŠ¡é…ç½®æ€»æ˜¯ç”±ä¸‰ä¸ªç»„æˆéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯DataSourceã€TransactionManagerå’Œä»£ç†æœºåˆ¶è¿™ä¸‰éƒ¨åˆ†ï¼Œæ— è®ºå“ªç§é…ç½®æ–¹å¼ï¼Œä¸€èˆ¬å˜åŒ–çš„åªæ˜¯ä»£ç†æœºåˆ¶è¿™éƒ¨åˆ†ã€‚
database-conn.propertiesåœ¨src/test/resourcesæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºdatabase-conn.propertiesæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ã€‚
database.name=MYSQLdatabase.driver=com.mysql.jdbc.Driverdatabase.uri=jdbc:mysql://localhost:3306/bookdatabase.username=rootdatabase.password=voidking #hibernatehibernate.dialect=org.hibernate.dialect.MySQL5Dialecthibernate.show_sql=true
åœ¨mysqlæ•°æ®åº“ä¸­ï¼Œæ–°å»ºbookæ•°æ®åº“ã€‚
log4j.propertiesåœ¨src/test/resourcesæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºlog4j.propertiesæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ã€‚
log4j.rootCategory=INFO, stdout###. \u5b9a\u4e49\u540d\u4e3a stdout \u7684\u8f93\u51fa\u7aef\u7684\u7c7b\u578b log4j.appender.stdout=org.apache.log4j.ConsoleAppender log4j.appender.stdout.layout=org.apache.log4j.PatternLayout log4j.appender.stdout.layout.ConversionPattern=[Project] %p [%t] %C.%M(%L) | %m%n log4j.appender.stdout.encoding=UTF-8### .spring \u914d\u7f6e log4j.logger.org.springframework=ERROR ### . hibernate \u914d\u7f6e log4j.logger.org.hibernate=ERROR
log4jå¯åŠ¨æ—¶ï¼Œé»˜è®¤ä¼šå¯»æ‰¾source folderä¸‹çš„log4j.xmlé…ç½®æ–‡ä»¶ï¼Œè‹¥æ²¡æœ‰ï¼Œä¼šå¯»æ‰¾log4j.propertiesæ–‡ä»¶ã€‚ç„¶ååŠ è½½é…ç½®ã€‚é…ç½®æ–‡ä»¶æ”¾ç½®ä½ç½®æ­£ç¡®ï¼Œä¸ç”¨åœ¨ç¨‹åºä¸­æ‰‹åŠ¨åŠ è½½log4jé…ç½®æ–‡ä»¶ã€‚å¦‚æœå°†é…ç½®æ–‡ä»¶æ”¾åˆ°äº†configæ–‡ä»¶å¤¹ä¸‹ï¼Œåœ¨build Pathä¸­è®¾ç½®ä¸‹å°±å¥½äº†ã€‚
å•å…ƒæµ‹è¯•åœ¨src/test/javaæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºåŒ…com.voidking.book.serviceï¼Œæ–°å»ºAdminServiceTest.javaæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ã€‚
package com.voidking.book.service;import org.junit.Before;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class AdminServiceTest &#123;	private AdminService adminService;	@Before	public void prepare()&#123;		ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;spring-persist.xml&quot;);		this.adminService = ctx.getBean(AdminService.class);			&#125;	@Test	public void testAdminService()&#123;			&#125;&#125;

ä¸Šé¢çš„æµ‹è¯•ï¼Œä¸»è¦ç”¨æ¥åŠ è½½é…ç½®æ–‡ä»¶ï¼Œæ£€éªŒé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®ï¼Œä»¥åŠæ•°æ®åº“çš„è¿æ¥æ˜¯å¦æ­£å¸¸ã€‚
åè®°@Repositoryã€@Serviceã€@Controllerå’Œ@Componentéƒ½å¯ä»¥ä¸ç”¨åœ¨xmlæ–‡ä»¶é‡Œè¿›è¡Œæ˜¾å¼é…ç½®ï¼Œä»–ä»¬éƒ½ä¼šè¢«é»˜è®¤æ³¨å†Œä¸ºSpring Beanã€‚
å‚è€ƒæ–‡æ¡£JPAå…¥é—¨ä¾‹å­(é‡‡ç”¨JPAçš„hibernateå®ç°ç‰ˆæœ¬)http://blog.csdn.net/hmk2011/article/details/6289151
Springå£°æ˜å¼äº‹åŠ¡é…ç½®ç®¡ç†æ–¹æ³•http://www.cnblogs.com/rushoooooo/archive/2155960.html
@Repositoryã€@Serviceã€@Controller å’Œ @Componenthttp://blog.csdn.net/ye1992/article/details/19971467
Springç»„ä»¶æ‰«æ&lt;context:component-scan/&gt;ä½¿ç”¨è¯¦è§£http://blog.csdn.net/a9529lty/article/details/8251003
 &lt;context:component-scan&gt;ä½¿ç”¨è¯´æ˜http://blog.csdn.net/chunqiuwei/article/details/16115135
ä½¿ç”¨æ³¨è§£æ¥æ„é€ IoCå®¹å™¨http://www.cnblogs.com/xdp-gacl/p/3495887.html
ä½¿ç”¨Spring Data JPA ç®€åŒ– JPA å¼€å‘http://www.ibm.com/developerworks/cn/opensource/os-cn-spring-jpa/
å®ç”¨çš„ä»£ç è§„èŒƒâ€“SpringSide Coding Standardshttp://blog.chinaunix.net/uid-9354-id-2425025.html
Repositoryï¼ˆèµ„æºåº“ï¼‰æ¨¡å¼http://blog.csdn.net/happinessmoon/article/details/7708785http://www.cnblogs.com/dudu/archive/repository_pattern.html
@GeneratedValuehttp://blog.csdn.net/fancylovejava/article/details/7438660
JPAå¸¸ç”¨æ³¨è§£http://1194867672-qq-com.iteye.com/blog/1730513
@JoinColumnè¯¦è§£http://blog.sina.com.cn/s/blog_64e8d29b0100z7hx.html
hibernateçš„æ³¨è§£å±æ€§mappedByè¯¦è§£http://shenyuc629.iteye.com/blog/1681225
JPAæ¦‚è¦http://www.cnblogs.com/holbrook/archive/2839842.html
ä¸»é”®ä¸­mappedByçš„å…·ä½“ä½¿ç”¨åŠå…¶å«ä¹‰http://blog.sina.com.cn/s/blog_697b968901016s7f.html
ç®€å•çš„Spring JPAå®ç°ä¾‹å­http://blog.csdn.net/kongxx/article/details/5653370
spring mvcçš„jpa JpaRepositoryæ•°æ®å±‚è®¿é—®æ–¹å¼æ±‡æ€»http://jishiweili.iteye.com/blog/2088265
Spring @Autowiredè¯¦è§£http://my.oschina.net/u/138995/blog/181626?fromerr=x1lK5xJq
Springæ³¨è§£http://www.360doc.cn/article/495229_37264450.html
Springæ³¨è§£è®²è§£http://www.douban.com/note/71602488/
SpringåŠspringmvcæ³¨è§£(annotation)ä½¿ç”¨è¯¦è§£http://www.360sdn.com/springmvc/2013/0627/407.html
context:component-scanä½¿ç”¨è¯´æ˜http://blog.csdn.net/chunqiuwei/article/details/16115135
Springé…ç½®ä¹‹PropertyPlaceholderConfigurerhttp://bjyzxxds.iteye.com/blog/427437
Springäº‹åŠ¡Transactioné…ç½®çš„äº”ç§æ³¨å…¥æ–¹å¼è¯¦è§£http://blog.csdn.net/yaerfeng/article/details/28390773
log4jï¼Œå¦‚ä½•â€œè‡ªåŠ¨åŠ è½½â€ï¼Ÿhttp://www.cnblogs.com/alipayhutu/archive/3028249.html
log4j.propertiesé…ç½®ä¸åŠ è½½åº”ç”¨http://blog.csdn.net/javaloveiphone/article/details/7994313
log4j.propertiesè·¯å¾„é—®é¢˜http://blog.csdn.net/caomiao2006/article/details/22062001
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>maven</tag>
        <tag>jpa</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring JPA</title>
    <url>/dev-spring-jpa/</url>
    <content><![CDATA[JPAä¾‹å­ï¼ˆh2databaseç‰ˆï¼‰è¿™ä¸ªä¾‹å­é«˜ä»¿ç…§æ¬Springå®˜ç½‘ç»™å‡ºçš„ä¾‹å­ï¼Œåªæ˜¯åŒ…ä¸åŒè€Œå·²ã€‚
æ–°å»ºå·¥ç¨‹Eclipseï¼ŒFileï¼ŒNewï¼ŒMaven Projectï¼ŒCreate a simple projectæ‰“ä¸Šå‹¾ï¼ŒNextã€‚
Group Idè¾“å…¥åå‘åŸŸååŠ ä¸Šå·¥ç¨‹åï¼ŒArtifact Idè¾“å…¥å­å·¥ç¨‹åï¼ŒPackagingå¤„é€‰æ‹©jarï¼ˆæ„æ€æ˜¯æ™®é€šå·¥ç¨‹ï¼›å¦‚æœæ˜¯webå·¥ç¨‹ï¼Œé€‰æ‹©warï¼›å¦‚æœç”¨æ¥å®šä¹‰çˆ¶å·¥ç¨‹ï¼Œé€‰æ‹©pomï¼‰ã€‚


pom.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;	&lt;groupId&gt;com.voidking.book&lt;/groupId&gt;	&lt;artifactId&gt;book-jpa&lt;/artifactId&gt;	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;	&lt;parent&gt;		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;		&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;		&lt;version&gt;1.2.5.RELEASE&lt;/version&gt;	&lt;/parent&gt;	&lt;properties&gt;		&lt;java.version&gt;1.8&lt;/java.version&gt;	&lt;/properties&gt;	&lt;dependencies&gt;		&lt;dependency&gt;			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;			&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;		&lt;/dependency&gt;		&lt;dependency&gt;			&lt;groupId&gt;com.h2database&lt;/groupId&gt;			&lt;artifactId&gt;h2&lt;/artifactId&gt;		&lt;/dependency&gt;	&lt;/dependencies&gt;	&lt;build&gt;		&lt;plugins&gt;			&lt;plugin&gt;				&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;				&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;			&lt;/plugin&gt;		&lt;/plugins&gt;	&lt;/build&gt;	&lt;repositories&gt;		&lt;repository&gt;			&lt;id&gt;spring-releases&lt;/id&gt;			&lt;name&gt;Spring Releases&lt;/name&gt;			&lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;		&lt;/repository&gt;		&lt;repository&gt;			&lt;id&gt;org.jboss.repository.releases&lt;/id&gt;			&lt;name&gt;JBoss Maven Release Repository&lt;/name&gt;			&lt;url&gt;https://repository.jboss.org/nexus/content/repositories/releases&lt;/url&gt;		&lt;/repository&gt;	&lt;/repositories&gt;	&lt;pluginRepositories&gt;		&lt;pluginRepository&gt;			&lt;id&gt;spring-releases&lt;/id&gt;			&lt;name&gt;Spring Releases&lt;/name&gt;			&lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;		&lt;/pluginRepository&gt;	&lt;/pluginRepositories&gt;&lt;/project&gt;

Customer.javasrc/main/java/com/voidking/book/entity/Customer.java
package com.voidking.book.entity;import javax.persistence.Entity;import javax.persistence.GeneratedValue;import javax.persistence.GenerationType;import javax.persistence.Id;@Entitypublic class Customer &#123;    @Id    @GeneratedValue(strategy=GenerationType.AUTO)    private long id;    private String firstName;    private String lastName;    protected Customer() &#123;&#125;    public Customer(String firstName, String lastName) &#123;        this.firstName = firstName;        this.lastName = lastName;    &#125;    @Override    public String toString() &#123;        return String.format(                &quot;Customer[id=%d, firstName=&#x27;%s&#x27;, lastName=&#x27;%s&#x27;]&quot;,                id, firstName, lastName);    &#125;&#125;

CustomerRepository.javasrc/main/java/com/voidking/book/repository/Customer.java
package com.voidking.book.repository;import java.util.List;import org.springframework.data.repository.CrudRepository;import com.voidking.book.entity.Customer;public interface CustomerRepository extends CrudRepository&lt;Customer, Long&gt; &#123;    List&lt;Customer&gt; findByLastName(String lastName);&#125;
Repositoryï¼ˆèµ„æºåº“ï¼‰ï¼šé€šè¿‡ç”¨æ¥è®¿é—®é¢†åŸŸå¯¹è±¡çš„ä¸€ä¸ªç±»ä¼¼é›†åˆçš„æ¥å£ï¼Œåœ¨é¢†åŸŸä¸æ•°æ®æ˜ å°„å±‚ä¹‹é—´è¿›è¡Œåè°ƒã€‚è¿™ä¸ªå«æ³•å°±ç±»ä¼¼äºæˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„DAOï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°±æŒ‰ç…§è¿™ä¸€ä¹ æƒ¯æŠŠæ•°æ®è®¿é—®å±‚å«Repository Spring Dataï¼ŒåŸºç¡€çš„Repositoryæä¾›äº†æœ€åŸºæœ¬çš„æ•°æ®è®¿é—®åŠŸèƒ½ï¼Œå…¶å‡ ä¸ªå­æ¥å£åˆ™æ‰©å±•äº†ä¸€äº›åŠŸèƒ½ã€‚å®ƒä»¬çš„ç»§æ‰¿å…³ç³»å¦‚ä¸‹ï¼šRepositoryï¼šä»…ä»…æ˜¯ä¸€ä¸ªæ ‡è¯†ï¼Œè¡¨æ˜ä»»ä½•ç»§æ‰¿å®ƒçš„å‡ä¸ºä»“åº“æ¥å£ç±»ï¼Œæ–¹ä¾¿Springè‡ªåŠ¨æ‰«æè¯†åˆ«CrudRepositoryï¼š ç»§æ‰¿Repositoryï¼Œå®ç°äº†ä¸€ç»„CRUDç›¸å…³çš„æ–¹æ³•PagingAndSortingRepositoryï¼š ç»§æ‰¿CrudRepositoryï¼Œå®ç°äº†ä¸€ç»„åˆ†é¡µæ’åºç›¸å…³çš„æ–¹æ³•JpaRepositoryï¼š ç»§æ‰¿PagingAndSortingRepositoryï¼Œå®ç°ä¸€ç»„JPAè§„èŒƒç›¸å…³çš„æ–¹æ³•JpaSpecificationExecutorï¼š æ¯”è¾ƒç‰¹æ®Šï¼Œä¸å±äºRepositoryä½“ç³»ï¼Œå®ç°ä¸€ç»„JPA CriteriaæŸ¥è¯¢ç›¸å…³çš„æ–¹æ³•æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„XxxxRepositoryéœ€è¦ç»§æ‰¿JpaRepositoryï¼Œè¿™æ ·æˆ‘ä»¬çš„XxxxRepositoryæ¥å£å°±å…·å¤‡äº†é€šç”¨çš„æ•°æ®è®¿é—®æ§åˆ¶å±‚çš„èƒ½åŠ›ã€‚ 
Application.javasrc/main/java/com/voidking/book/app/Application.java
package com.voidking.book.app;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.CommandLineRunner;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import com.voidking.book.entity.Customer;import com.voidking.book.repository.CustomerRepository;@SpringBootApplicationpublic class Application implements CommandLineRunner &#123;    @Autowired    CustomerRepository repository;    public static void main(String[] args) &#123;        SpringApplication.run(Application.class);    &#125;        @Override    public void run(String... strings) throws Exception &#123;        // save a couple of customers        repository.save(new Customer(&quot;Jack&quot;, &quot;Bauer&quot;));        repository.save(new Customer(&quot;Chloe&quot;, &quot;O&#x27;Brian&quot;));        repository.save(new Customer(&quot;Kim&quot;, &quot;Bauer&quot;));        repository.save(new Customer(&quot;David&quot;, &quot;Palmer&quot;));        repository.save(new Customer(&quot;Michelle&quot;, &quot;Dessler&quot;));        // fetch all customers        System.out.println(&quot;Customers found with findAll():&quot;);        System.out.println(&quot;-------------------------------&quot;);        for (Customer customer : repository.findAll()) &#123;            System.out.println(customer);        &#125;        System.out.println();        // fetch an individual customer by ID        Customer customer = repository.findOne(1L);        System.out.println(&quot;Customer found with findOne(1L):&quot;);        System.out.println(&quot;--------------------------------&quot;);        System.out.println(customer);        System.out.println();        // fetch customers by last name        System.out.println(&quot;Customer found with findByLastName(&#x27;Bauer&#x27;):&quot;);        System.out.println(&quot;--------------------------------------------&quot;);        for (Customer bauer : repository.findByLastName(&quot;Bauer&quot;)) &#123;            System.out.println(bauer);        &#125;    &#125;&#125;


mvn testå¼‚å¸¸æ‰§è¡Œå‘½ä»¤mvn testï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼š
Exception in thread &quot;main&quot; java.lang.UnsupportedClassVersionError:com/voidking/book/app/Application : Unsupported major.minor version 52.0
è¿™ä¸ªå¼‚å¸¸ï¼Œæ˜¯å› ä¸ºæœ¬æœºæ²¡æœ‰å®‰è£…jdk8ï¼Œæˆ‘å°±æŠŠProperties-&gt;java build path-&gt;Librariesä¸­çš„JVM8æ¢æˆJVM7ã€‚
è§£å†³æ–¹æ³•ï¼šå³å‡»é¡¹ç›®ï¼ŒPropertiesï¼ŒJava Compilerï¼ŒCompiler compliance levelä»1.8æ”¹æˆ1.7ï¼Œä¹‹åå°±å¯ä»¥è¿è¡Œäº†ã€‚
è¿è¡Œå¼‚å¸¸mvn spring-boot:runï¼Œå¼‚å¸¸ï¼š
org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#x27;application&#x27;: Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.voidking.book.repository.CustomerRepository com.voidking.book.app.Application.repository; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [com.voidking.book.repository.CustomerRepository] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: &#123;@org.springframework.beans.factory.annotation.Autowired(required=true)&#125;
å¯ä»¥çœ‹åˆ°ï¼Œå¼‚å¸¸å±‚å±‚è¿é”ï¼Œçœ‹èµ·æ¥é‚£ä¹ˆé•¿ï¼Œå®é™…ä¸Šé‡ç‚¹åœ¨åé¢ã€‚åŸæ¥æ˜¯ç¼ºå°‘CustomerRepositoryç±»å‹çš„beanï¼Œé‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆç¼ºå°‘å‘¢ï¼Ÿæ˜¯å¦æ˜¯å› ä¸ºéœ€è¦ä¸€ä¸ªç±»ä¼¼spring.xmlçš„é…ç½®æ–‡ä»¶ï¼Ÿ
Springå®˜æ–¹ä»£ç çœ‹çœ‹Springå®˜æ–¹ç»™å‡ºçš„ä¾‹å­ï¼Œç¡®å®æ²¡æœ‰é…ç½®æ–‡ä»¶ã€‚mvn spring-boot:runï¼Œç»“æœå¦‚ä¸‹ï¼šè¿è¡ŒæˆåŠŸï¼Œå¯è§ï¼Œè¿™ä¸ªä¾‹å­æ˜¯æ²¡æœ‰ä»»ä½•é—®é¢˜çš„ã€‚é‚£ä¹ˆï¼Œé—®é¢˜å‡ºåœ¨å“ªé‡Œï¼Ÿå› ä¸ºåˆ†äº†ä¸åŒçš„åŒ…ï¼Ÿ
è¯•ä¸€è¯•ï¼ŒæŠŠæ‰€æœ‰.javaç§»åŠ¨åˆ°ä¸€ä¸ªåŒ…ä¸­ï¼Œè¿è¡Œã€‚ã€‚ã€‚æˆåŠŸï¼
é†‰äº†ä»ä¸­åˆ12ç‚¹å¿™åˆ°æ™šä¸Š12ç‚¹ï¼Œæ­¤é—®é¢˜æ²¡æœ‰è§£å†³ï¼Œæˆ‘ä¹Ÿæ˜¯é†‰äº†ã€‚ã€‚ã€‚
spring-bootç¬¬äºŒå¤©ï¼Œç»§ç»­æŸ¥æ‰¾èµ„æ–™ï¼Œç»ˆäºæ˜ç™½äº†ï¼Œè¿™ä¸€åˆ‡éƒ½æ˜¯spring-bootæçš„é¬¼ã€‚
spring-bootä¼šè‡ªåŠ¨é…ç½®é€šè¿‡jpaè¿›è¡Œæ•°æ®è®¿é—®éœ€è¦çš„beanã€‚
spring-bootä¼šæ ¹æ®classpathåŒ…å«çš„å†…å®¹è‡ªåŠ¨æ¨æµ‹ç”¨æˆ·çš„éœ€æ±‚å¹¶è‡ªåŠ¨é…ç½®ã€‚ä¾‹å¦‚å¦‚æœåœ¨classpathåŒ…å«äº†hsqldbï¼Œå¹¶ä¸”ç”¨æˆ·æœªé…ç½®æ•°æ®åº“è¿æ¥ï¼Œspring-bootå°†ä¼šé…ç½®ä¸€ä¸ªhsqldbå†…å­˜æ•°æ®åº“å’Œæ•°æ®æºã€‚
spring-bootæ— ä»£ç ç”Ÿæˆï¼Œæ‰€æœ‰çš„é…ç½®å¯é€šè¿‡ä»£ç å®Œæˆï¼ˆspring çš„javaconfigï¼‰ï¼Œä¸éœ€è¦ä½¿ç”¨xmlï¼ˆè™½ç„¶å¯ä»¥ä½¿ç”¨ï¼‰ã€‚ 
JPAä¾‹å­ï¼ˆhsqlç‰ˆï¼‰h2databaseå’Œhsqléå¸¸ç±»ä¼¼ï¼Œé€‚åˆä½œä¸ºåµŒå…¥å¼æ•°æ®åº“ä½¿ç”¨ï¼Œå…¶å®ƒçš„æ•°æ®åº“å¤§éƒ¨åˆ†éƒ½éœ€è¦å®‰è£…ç‹¬ç«‹çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ã€‚é¡ºä¾¿æ¯”è¾ƒä¸€ä¸‹å„ä¸ªæ•°æ®åº“ï¼Œå¦‚ä¸‹å›¾ï¼š
nameå±æ€§ç”¨äºå®šä¹‰æŒä¹…åŒ–å•å…ƒçš„åå­—(nameå¿…é€‰,ç©ºå€¼ä¹Ÿåˆæ³•);transaction-typeæŒ‡å®šäº‹åŠ¡ç±»å‹(å¯é€‰)  
JPAä¾‹å­ï¼ˆMysqlç‰ˆï¼‰æºä»£ç åˆ†äº«Springå®˜æ–¹ä¾‹å­git clone https://github.com/spring-guides/gs-accessing-data-jpa.git
åè®°ä½¿ç”¨Springï¼Œå’Œå•çº¯çš„JPAæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

å¤šäº†ä¸€äº›æ ‡è®°ä¸ºBeançš„æ³¨è§£ï¼Œæ¯”å¦‚@Repositoryã€@Serviceã€@Controllerå’Œ@Componentã€‚

JAPæœ‰æŒä¹…åŒ–é…ç½®æ–‡ä»¶persistence.xmlï¼ˆsrc/META-INFï¼‰ï¼Œé»˜è®¤åŠ è½½ã€‚åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œå¯ä»¥é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼Œå®ä½“ç±»ç­‰ï¼›ä½¿ç”¨äº†Springï¼Œé™¤äº†persistence.xmlï¼Œè¿˜å¤šå‡ºäº†ä¸€ä¸ªæˆ–å¤šä¸ªSpringçš„é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶é—´å¯ä»¥é€šè¿‡&lt;import&gt;æ ‡ç­¾å¼•ç”¨ï¼›persistence.xmlä¸­çš„å†…å®¹ï¼Œå¯ä»¥æ”¹å†™åˆ°springçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå¦‚æœå†…å®¹å…¨éƒ¨æ”¹å†™ï¼Œæ­¤æ—¶persistence.xmlæ–‡ä»¶å¯ä»¥çœç•¥ã€‚


å‚è€ƒæ–‡æ¡£Accessing Data with JPAhttp://spring.io/guides/gs/accessing-data-jpa/
Spring Data JPA - Reference Documentationhttp://docs.spring.io/spring-data/data-jpa/docs/current/reference/html/
ä½¿ç”¨ Spring Data JPA ç®€åŒ– JPA å¼€å‘http://www.ibm.com/developerworks/cn/opensource/os-cn-spring-jpa/
ç®€å•çš„Spring JPAå®ç°ä¾‹å­http://blog.csdn.net/kongxx/article/details/5653370
spring mvc çš„jpa JpaRepositoryæ•°æ®å±‚ è®¿é—®æ–¹å¼æ±‡æ€»http://jishiweili.iteye.com/blog/2088265
ä½¿ç”¨spring-bootå¿«é€Ÿå¼€å‘springåº”ç”¨http://itindex.net/detail/49108-spring-boot-%E5%BC%80%E5%8F%91
JPA ä¸åœ¨ persistence.xml æ–‡ä»¶ä¸­é…ç½®æ¯ä¸ªEntityå®ä½“ç±»çš„2ç§è§£å†³åŠæ³•http://www.cnblogs.com/taven/archive/3351841.html
Jpaè§„èŒƒä¸­persistence.xml é…ç½®æ–‡ä»¶è§£æhttp://www.cnblogs.com/edwardlauxh/archive/2632292.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>spring</tag>
        <tag>jpa</tag>
      </tags>
  </entry>
  <entry>
    <title>JPAåŸºç¡€</title>
    <url>/dev-jpa-base/</url>
    <content><![CDATA[ç®€ä»‹JavaæŒä¹…åŒ–è§„èŒƒï¼Œæ˜¯ä»EJB2.xä»¥å‰çš„å®ä½“Bean(Entity bean)åˆ†ç¦»å‡ºæ¥çš„ï¼ŒEJB3ä»¥åä¸å†æœ‰å®ä½“beanï¼Œè€Œæ˜¯å°†å®ä½“beanæ”¾åˆ°JPAä¸­å®ç°ã€‚JPAæ˜¯sunæå‡ºçš„ä¸€ä¸ªå¯¹è±¡æŒä¹…åŒ–è§„èŒƒï¼Œå„JavaEEåº”ç”¨æœåŠ¡å™¨è‡ªä¸»é€‰æ‹©å…·ä½“å®ç°ï¼ŒJPAçš„è®¾è®¡è€…æ˜¯Hibernateæ¡†æ¶çš„ä½œè€…ï¼Œå› æ­¤Hibernateä½œä¸ºJbossæœåŠ¡å™¨ä¸­JPAçš„é»˜è®¤å®ç°ï¼ŒOracleçš„Weblogicä½¿ç”¨EclipseLink(ä»¥å‰å«TopLink)ä½œä¸ºé»˜è®¤çš„JPAå®ç°ï¼ŒIBMçš„Websphereå’ŒSunçš„Glassfishé»˜è®¤ä½¿ç”¨OpenJPA(Apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®)ä½œä¸ºå…¶é»˜è®¤çš„JPAå®ç°ã€‚
JPAçš„åº•å±‚å®ç°æ˜¯ä¸€äº›æµè¡Œçš„å¼€æºORM(å¯¹è±¡å…³ç³»æ˜ å°„)æ¡†æ¶ï¼Œå› æ­¤JPAå…¶å®ä¹Ÿå°±æ˜¯javaå®ä½“å¯¹è±¡å’Œå…³ç³»å‹æ•°æ®åº“å»ºç«‹èµ·æ˜ å°„å…³ç³»ï¼Œé€šè¿‡é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ€æƒ³æ“ä½œå…³ç³»å‹æ•°æ®åº“çš„è§„èŒƒã€‚


JPAçš„æŒä¹…åŒ–ç­–ç•¥æ–‡ä»¶æ ¹æ®JPAè§„èŒƒè¦æ±‚ï¼Œåœ¨å®ä½“beanåº”ç”¨ä¸­ï¼Œéœ€è¦åœ¨åº”ç”¨ç±»è·¯å¾„(classpath)çš„META-INFç›®å½•ä¸‹åŠ å…¥æŒä¹…åŒ–é…ç½®æ–‡ä»¶â€”â€”persistence.xmlï¼Œè¯¥æ–‡ä»¶å°±æ˜¯æŒä¹…åŒ–ç­–ç•¥æ–‡ä»¶ã€‚å…¶å†…å®¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;persistence version=&quot;1.0&quot; xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd&quot;&gt;	&lt;persistence-unit name=&quot;æŒä¹…åŒ–å•å…ƒå&quot; transaction-type=&quot;JTA&quot;&gt;		&lt;jta-data-source&gt;ä½¿ç”¨JCAéƒ¨ç½²åœ¨javaEEæœåŠ¡å™¨ä¸Šçš„æ•°æ®æºJNDI&lt;/jta-data-source&gt;        &lt;!--æŒ‡å®šJPAå®ç°æä¾›è€…ï¼Œä¸æŒ‡å®šå°±é‡‡ç”¨JavaEEæœåŠ¡å™¨é»˜è®¤çš„JPAæä¾›è€…ï¼Œè¿™é‡Œä»¥OpenJPAä¸ºä¾‹--&gt;	&lt;provider&gt;org.apache.openjpa.persistence.PersistenceProviderImpl&lt;/provider&gt;		&lt;class&gt;å®ä½“beanå…¨è·¯å¾„å&lt;/class&gt;		â€¦â€¦		&lt;properties&gt;            &lt;!--é…ç½®JPAå®ç°æä¾›è€…çš„ä¸€äº›ä¿¡æ¯--&gt;		&lt;/properties&gt;	&lt;/persistence-unit&gt;&lt;/persistence&gt;
æ³¨æ„ï¼šå¯ä»¥åœ¨æŒä¹…åŒ–ç­–ç•¥æ–‡ä»¶ä¸­é…ç½®å¤šä¸ªæŒä¹…åŒ–å•å…ƒpersistence-unitï¼Œåœ¨ä½¿ç”¨åˆ†å¸ƒå¼æ•°æ®åº“æ—¶ç»å¸¸é…ç½®å¤šä¸ªæŒä¹…åŒ–å•å…ƒã€‚
å®ä½“Beançš„å¼€å‘ï¼šJPAè§„èŒƒä¸­å®šä¹‰çš„å®ä½“beanå¼€å‘çš„åŸºæœ¬è§„èŒƒï¼š(1)åœ¨å®ä½“beanä¸Šæ·»åŠ â€@Entityâ€æ³¨è§£ï¼Œæ ‡è¯†è¯¥beanä¸ºå®ä½“beanã€‚(2)å®ä½“beanå¿…é¡»åºåˆ—åŒ–ã€‚(3)ä½¿ç”¨â€@Table(name=æ•°æ®åº“è¡¨å)â€æ³¨è§£ï¼Œæ ‡è¯†è¯¥å®ä½“beanæ˜ å°„åˆ°å…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨åï¼Œå¦‚æœä¸æŒ‡å®šåˆ™JPAå®ç°ä¼šè‡ªåŠ¨ç”Ÿæˆé»˜è®¤çš„è¡¨åç§°ã€‚(4)å¿…é¡»æœ‰ä¸€ä¸ªä½¿ç”¨â€@Idâ€æ³¨è§£æ ‡è¯†çš„ä¸»é”®ï¼Œå¦‚æŒ‡å®šè‡ªå¢ä¸»é”®çš„å†™æ³•ä¸ºï¼š
@Id@Column(name=â€åˆ—åâ€)@GeneratedValue(Strategy=GenerationType.Auto)private int id;
æ³¨æ„ï¼š@Idå’Œ@GeneratedValueä¸¤ä¸ªæ³¨è§£å¿…é¡»åŒæ—¶ä½¿ç”¨ï¼Œæ ‡è¯†äº†æ³¨è§£ä¹‹åï¼Œè¦ä¸»é”®çš„ç”Ÿæˆç­–ç•¥ã€‚(5)Beançš„å…¶ä»–å±æ€§ä½¿ç”¨â€@Column(name=åˆ—å)â€æ³¨è§£ï¼ŒæŒ‡å®šè¯¥å±æ€§æ˜ å°„åˆ°æ•°æ®åº“è¡¨ä¸­çš„åˆ—åï¼Œå¦‚æœä¸æŒ‡å®šåœ¨JPAå®ç°ä¼šè‡ªåŠ¨ç”Ÿæˆé»˜è®¤çš„åˆ—åã€‚(6)å®ä½“Beanå¿…é¡»ä¸¥æ ¼éµå¾ªJavaBeançš„è§„èŒƒï¼Œæä¾›æ— å‚çš„é»˜è®¤æ„é€ æ–¹æ³•ï¼Œå±æ€§æä¾›setå’Œgetæ–¹æ³•ã€‚(7)æœ€å¥½é‡å†™hashcode()å’Œequals()æ–¹æ³•ï¼Œå®ä½“beançš„å”¯ä¸€æ ‡è¯†æ˜¯ä¸»é”®ï¼Œå› æ­¤ï¼Œä½¿ç”¨å®ä½“beançš„ä¸»é”®æ¥æ¯”è¾ƒã€‚
å®ä½“beançš„ä¸»é”®ç”Ÿæˆç­–ç•¥å®ä½“beançš„æ³¨è§£ç”Ÿæˆç­–ç•¥ä½¿ç”¨â€@GeneratedValueâ€æ³¨è§£æ¥æŒ‡å®šä¸»é”®çš„ç”Ÿæˆç­–ç•¥ï¼Œé»˜è®¤ä½¿ç”¨Autoè‡ªå¢çš„ç­–ç•¥ï¼ŒJPAä¸æ”¯æŒHibernateçš„UUIDä¸»é”®ç”Ÿæˆç­–ç•¥ï¼Œè‹¥è¦ä½¿ç”¨Hibernateçš„UUIDåšä¸»é”®æ–¹å¼ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š(1)å°†Hibernate.annotation jaråŒ…åŠ å…¥åˆ°ç±»è·¯å¾„ä¸‹ã€‚(2)åœ¨ä½¿ç”¨â€@Idâ€çš„å­—æ®µä¸ŠåŒæ—¶åŠ å…¥å¦‚ä¸‹çš„æ³¨è§£ï¼š
@GeneratedValue(generator=â€UUIDä¸»é”®ç”Ÿæˆç­–ç•¥â€)@GenericGenerator(name=â€UUIDä¸»é”®ç”Ÿæˆç­–ç•¥â€, strategy=â€uuidâ€)

JPAå¼€å‘çš„æ³¨æ„äº‹é¡¹JPAæ”¯æŒxmlæ–¹å¼å’Œæ³¨è§£æ–¹å¼ï¼Œç›®å‰éšç€æ³¨è§£æ–¹å¼è¶Šæ¥è¶Šæˆç†Ÿå’Œæµè¡Œï¼Œå¼€å‘JPAæ—¶å€™ï¼ŒåŸºæœ¬éƒ½åªç”¨æ³¨è§£æ–¹å¼ï¼Œå› æ­¤å¿…é¡»åœ¨JavaEE5ä»¥ä¸Šç‰ˆæœ¬æ‰è¡Œï¼Œå› ä¸ºä»¥å‰çš„ç‰ˆæœ¬æ²¡æœ‰å¯¹æ³¨è§£çš„æ”¯æŒã€‚å’Œxmlæ–‡ä»¶ç›¸æ¯”ï¼Œjavaæ³¨è§£çš„ä¼˜ç¼ºç‚¹ï¼šä¼˜åŠ¿ï¼š(1)æè¿°ç¬¦å‡å°‘ï¼Œå¤§å¤§æé«˜å¼€å‘æ•ˆç‡ã€‚(2)ç¼–è¯‘æœŸæ ¡éªŒï¼Œé”™è¯¯çš„æ³¨è§£åœ¨ç¼–è¯‘æœŸé—´å°±ä¼šæŠ¥é”™ã€‚(3)æ³¨è§£åœ¨javaä»£ç ä¸­ï¼Œä»è€Œé¿å…äº†é¢å¤–çš„æ–‡ä»¶ç»´æŠ¤å·¥ä½œã€‚(4)æ³¨è§£è¢«ç¼–è¯‘æˆjavaå­—èŠ‚ç ï¼Œæ¶ˆè€—çš„å†…å­˜å°ï¼Œè¯»å–é€Ÿåº¦å¿«ï¼Œå¾€å¾€æ¯”xmlé…ç½®æ–‡ä»¶è§£æå¿«å‡ ä¸ªæ•°é‡çº§ï¼Œåˆ©ç”¨æµ‹è¯•å’Œç»´æŠ¤ã€‚ç¼ºç‚¹ï¼š(1)é…ç½®ä¿¡æ¯åˆ†æ•£ï¼Œä¸åˆ©äºé›†ä¸­ç»´æŠ¤ç®¡ç†ã€‚(2)æ”¹åŠ¨æ—¶æ¶‰åŠåˆ°äº†ç¨‹åºæºä»£ç ï¼Œéœ€è¦æ‰¾åˆ°ç±»çš„æºä»£ç æ‰å¯ä»¥ï¼Œè€Œä¸”å¿…é¡»é€šè¿‡ç¼–è¯‘è¿™ä¸€æ­¥ã€‚ç›¸æ¯”è¾ƒä¹‹ä¸‹xmlæ–‡ä»¶å¯èƒ½ä¸éœ€è¦æ‰¾åˆ°ç±»æºç ï¼ŒåŒæ—¶ä¹Ÿä¸éœ€è¦é‡æ–°ç¼–è¯‘ã€‚
JPAæ³¨è§£çš„ä½¿ç”¨æ³¨æ„äº‹é¡¹JPAçš„æ³¨è§£æ”¯æŒå­—æ®µæ³¨è§£ï¼Œä¹Ÿæ”¯æŒå±æ€§æ³¨è§£ã€‚å­—æ®µæ³¨è§£ï¼šç›´æ¥åœ¨å˜é‡ä¸ŠåŠ æ³¨è§£ã€‚å±æ€§æ³¨è§£ï¼šåœ¨set/getæ–¹æ³•ä¸ŠåŠ æ³¨è§£ã€‚æ³¨æ„ï¼šä¸ç®¡ä½¿ç”¨å“ªç§æ³¨è§£æ–¹å¼ï¼Œåœ¨ä¸€ä¸ªå®ä½“ç±»ä¸­ï¼Œä¸èƒ½æ··ç”¨ä¸¤ç§æ³¨è§£æ–¹å¼ã€‚
JPAå…¶ä»–çš„å¸¸ç”¨æ³¨è§£é™¤äº†@Entityã€@Idã€@Tableã€@Columnã€@GeneratedValueç­‰æ³¨è§£ä»¥å¤–ï¼ŒJPAè¿˜æœ‰ä»¥ä¸‹å¸¸ç”¨çš„æ³¨è§£ï¼š(1)@Temporalï¼šä¸»è¦ç”¨äºæ ‡æ³¨æ—¶é—´ç±»å‹ï¼Œåœ¨javax.persistence.TemporalTypeæšä¸¾ä¸­å®šä¹‰äº†3ç§æ—¶é—´ç±»å‹ï¼ša.DATEï¼šç­‰åŒäºjava.sql.Dateï¼›b.TIMEï¼šç­‰åŒäºjava.sql.Timeï¼›c.TIMESTAMPï¼šç­‰åŒäºjava.sql.Timestampï¼›(2)@Transientï¼šå®ä½“beanä¸­é»˜è®¤æ‰€æœ‰çš„å­—æ®µéƒ½ä¼šè¢«æ˜ å°„åˆ°æ•°æ®åº“ä¸­ï¼Œå¦‚æœæŸä¸ªå±æ€§ä¸æƒ³è¢«æ˜ å°„åˆ°æ•°æ®åº“ä¸­ï¼Œåˆ™éœ€è¦å¯¹å…¶åŠ è¯¥æ³¨è§£ã€‚(3)@Lobï¼šå°†å±æ€§æŒä¹…åŒ–ä¸ºBlobæˆ–è€…Clobç±»å‹ï¼Œä¸ºå¤§æ•°æ®ç±»å‹ã€‚(4)@Basicï¼šä¸€èˆ¬å¯ä»¥ç”¨æ¥æ§åˆ¶æ˜¯å¦è¿›è¡Œå»¶è¿ŸåŠ è½½ï¼Œç”¨æ³•ç¤ºä¾‹ï¼šå»¶è¿ŸåŠ è½½ï¼š@Basic(fetch=FetchType.Lazy)éå»¶è¿ŸåŠ è½½ï¼š@Basic(fetch=FetchType.EAGER)(5)@NamedQueryieså’Œ@NamedQueryï¼šåœ¨å®ä½“Beanä¸Šå®šä¹‰å‘½åæŸ¥è¯¢ã€‚åç§°æŸ¥è¯¢ç±»ä¼¼äºjdbcä¸­çš„PrepareStatementï¼Œæ˜¯åœ¨æ•°æ®åº“ä¸­é¢„ç¼–è¯‘çš„æŸ¥è¯¢ï¼Œå¯ä»¥å¤§å¤§æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š
@NamedQueries(&#123;       @NamedQuery(name=â€å‘½åæŸ¥è¯¢åå­—â€,query=JPQLæŸ¥è¯¢è¯­å¥),       â€¦â€¦&#125;)
(6)@OneToOneï¼šä¸€å¯¹ä¸€æ˜ å°„æ³¨è§£ï¼ŒåŒå‘çš„ä¸€å¯¹ä¸€å…³ç³»éœ€è¦åœ¨å…³ç³»ç»´æŠ¤ç«¯(owner side)çš„@OneToOneæ³¨è§£ä¸­æ·»åŠ mappedByå±æ€§ï¼Œå»ºè¡¨æ—¶åœ¨å…³ç³»è¢«ç»´æŠ¤ç«¯(inverse side)å»ºç«‹å¤–é”®æŒ‡å‘å…³ç³»ç»´æŠ¤ç«¯çš„ä¸»é”®åˆ—ã€‚ç”¨æ³•ï¼š@OneToOne(optional=true,casecade=CasecadeType.ALL,mappedBy=â€è¢«ç»´æŠ¤ç«¯å¤–é”®â€)(7)@OneToManyï¼šä¸€å¯¹å¤šæ˜ å°„æ³¨è§£ï¼ŒåŒå‘ä¸€å¯¹å¤šå…³ç³»ä¸­ï¼Œä¸€ç«¯æ˜¯å…³ç³»ç»´æŠ¤ç«¯(owner side)ï¼Œåªèƒ½åœ¨ä¸€ç«¯æ·»åŠ mappedå±æ€§ã€‚å¤šç«¯æ˜¯å…³ç³»è¢«ç»´æŠ¤ç«¯(inverse side)ã€‚å»ºè¡¨æ—¶åœ¨å…³ç³»è¢«ç»´æŠ¤ç«¯(å¤šç«¯)å»ºç«‹å¤–é”®æŒ‡å‘å…³ç³»ç»´æŠ¤ç«¯(ä¸€ç«¯)çš„ä¸»é”®åˆ—ã€‚ç”¨æ³•ï¼š@OneToMany(mappedBy = â€œç»´æŠ¤ç«¯(ä¸€ç«¯)ä¸»é”®â€, cascade=CascadeType.ALL)æ³¨æ„ï¼šåœ¨Hibernateä¸­æœ‰ä¸ªæœ¯è¯­å«åšç»´æŠ¤å…³ç³»åè½¬ï¼Œå³ç”±å¯¹æ–¹ç»´æŠ¤å…³è”å…³ç³»ï¼Œä½¿ç”¨inverse=falseæ¥è¡¨ç¤ºå…³ç³»ç»´æŠ¤æ”¾ï¼Œåœ¨JPAçš„æ³¨è§£ä¸­ï¼ŒmappedByå°±ç›¸å½“äºinverse=falseï¼Œå³ç”±mappedByæ¥ç»´æŠ¤å…³ç³»ã€‚(8)@ManyToOneï¼šå¤šå¯¹ä¸€æ˜ å°„æ³¨è§£ï¼Œåœ¨åŒå‘çš„ä¸€å¯¹å¤šå…³ç³»ä¸­ï¼Œä¸€ç«¯ä¸€æ–¹ä½¿ç”¨@OneToManyæ³¨è§£ï¼Œå¤šç«¯çš„ä¸€æ–¹ä½¿ç”¨@ManyToOneæ³¨è§£ã€‚å¤šå¯¹ä¸€æ³¨è§£ç”¨æ³•å¾ˆç®€å•ï¼Œå®ƒä¸ç”¨ç»´æŠ¤å…³ç³»ã€‚ç”¨æ³•ï¼š@ManyToOne(optional = false, fetch = FetchType.EAGER)(9)@ManyToManyï¼šå¤šå¯¹å¤šæ˜ å°„ï¼Œé‡‡å–ä¸­é—´è¡¨è¿æ¥çš„æ˜ å°„ç­–ç•¥ï¼Œå»ºç«‹çš„ä¸­é—´å…³ç³»è¡¨åˆ†åˆ«å¼•å…¥ä¸¤è¾¹çš„ä¸»é”®ä½œä¸ºå¤–é”®ï¼Œå½¢æˆä¸¤ä¸ªå¤šå¯¹ä¸€å…³ç³»ã€‚åŒå‘çš„å¤šå¯¹å¤šå…³ç³»ä¸­ï¼Œåœ¨å…³ç³»ç»´æŠ¤ç«¯(owner side)çš„@ManyToManyæ³¨è§£ä¸­æ·»åŠ mappedByå±æ€§ï¼Œå¦ä¸€æ–¹æ˜¯å…³ç³»çš„è¢«ç»´æŠ¤ç«¯(inverse side)ï¼Œå…³ç³»çš„è¢«ç»´æŠ¤ç«¯ä¸èƒ½åŠ mappedByå±æ€§ï¼Œå»ºè¡¨æ—¶ï¼Œæ ¹æ®ä¸¤ä¸ªå¤šç«¯çš„ä¸»é”®ç”Ÿæˆä¸€ä¸ªä¸­é—´è¡¨ï¼Œä¸­é—´è¡¨çš„å¤–é”®æ˜¯ä¸¤ä¸ªå¤šç«¯çš„ä¸»é”®ã€‚ç”¨æ³•ï¼šå…³ç³»ç»´æŠ¤ç«¯â€”â€”&gt;@ManyToMany(mappedBy=â€å¦ä¸€æ–¹çš„å…³ç³»å¼•ç”¨å±æ€§â€)å…³ç³»è¢«ç»´æŠ¤ç«¯â€”â€”&gt;@ManyToMany(cascade=CascadeType.ALL ,fetch = FetchType.Lazy)
JPAçš„ä¸€å¯¹ä¸€å…³è”æ˜ å°„åœ¨JPAä¸­ä¸¤ä¸ªå®ä½“ä¹‹é—´æ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ç§°ä¸ºä¸€å¯¹ä¸€å…³è”å…³ç³»æ˜ å°„ï¼Œå¦‚äººå’Œèº«ä»½è¯å·å…³ç³»ã€‚(1)ä¸€å¯¹ä¸€å•å‘å…³è”æ˜ å°„ï¼šåªèƒ½ä»æ˜ å°„ç«¯æŸ¥æ‰¾åˆ°éšå…³è”çš„ä¸€æ–¹ï¼Œè€Œä¸èƒ½åå‘æŸ¥æ‰¾ã€‚åœ¨å…³è”æ˜ å°„æ–¹å…³è”å±æ€§ä¸Šæ·»åŠ @OneToOneæ³¨è§£ã€‚(2)ä¸€å¯¹ä¸€åŒå‘å…³è”æ˜ å°„ï¼šå¯ä»¥åŒå‘æŸ¥æ‰¾å…³è”å…³ç³»çš„å®ä½“ã€‚å…³ç³»ç»´æŠ¤ç«¯ï¼šåœ¨å…³è”å±æ€§æˆ–å­—æ®µä¸Šæ·»åŠ @OneToOneæ³¨è§£ï¼ŒåŒæ—¶åˆ¶å®š@OneToOneæ³¨è§£çš„mappedByå±æ€§ã€‚å…³ç³»è¢«ç»´æŠ¤ç«¯ï¼šåœ¨å…³è”å±æ€§æˆ–å­—æ®µä¸Šæ·»åŠ @OneToOneæ³¨è§£ã€‚
ä¸€å¯¹ä¸€å…³è”æ˜ å°„ä¸¤ç§ç­–ç•¥(1)ä¸€å¯¹ä¸€ä¸»é”®å…³è”ï¼šä¸€å¯¹ä¸€å…³è”æ˜ å°„ä¸­ï¼Œä¸»é”®å…³è”ç­–ç•¥ä¸ä¼šåœ¨ä¸¤ä¸ªå…³è”å®ä½“å¯¹åº”çš„æ•°æ®åº“è¡¨ä¸­æ·»åŠ å¤–é”®å­—æ®µï¼Œä¸¤ä¸ªå®ä½“çš„è¡¨å…¬ç”¨åŒä¸€ä¸ªä¸»é”®(ä¸»é”®ç›¸åŒ)ï¼Œå…¶ä¸­ä¸€ä¸ªå®ä½“çš„ä¸»é”®æ—¢æ˜¯ä¸»é”®åˆæ˜¯å¤–é”®ã€‚ä¸»é”®å…³è”æ˜ å°„ï¼šåœ¨å®ä½“å…³è”å±æ€§æˆ–æ–¹æ³•ä¸Šæ·»åŠ @OneToOneæ³¨è§£çš„åŒæ—¶æ·»åŠ @PrimaryKeyJoinColumnæ³¨è§£(åœ¨ä¸€å¯¹ä¸€æ³¨è§£å…³è”æ˜ å°„çš„ä»»æ„ä¸€ç«¯å®ä½“æ·»åŠ å³å¯)ã€‚(2)ä¸€å¯¹ä¸€å”¯ä¸€å¤–é”®å…³è”ï¼šä¸€å¯¹ä¸€å…³è”å…³ç³»æ˜ å°„ä¸­ï¼Œå”¯ä¸€å¤–é”®å…³è”ç­–ç•¥ä¼šåœ¨å…¶ä¸­ä¸€ä¸ªå®ä½“å¯¹åº”æ•°æ®åº“è¡¨ä¸­æ·»åŠ å¤–é”®å­—æ®µæŒ‡å‘å¦ä¸€ä¸ªå®ä½“è¡¨çš„ä¸»é”®ï¼Œä¹Ÿæ˜¯ä¸€å¯¹ä¸€æ˜ å°„å…³ç³»ä¸­æœ€å¸¸ç”¨çš„æ˜ å°„ç­–ç•¥ã€‚å”¯ä¸€å¤–é”®å…³è”ï¼šåœ¨å…³è”å±æ€§æˆ–å­—æ®µä¸Šæ·»åŠ @OneToOneæ³¨è§£çš„åŒæ—¶æ·»åŠ @JoinColumn(name=â€æ•°æ®è¡¨åˆ—åâ€ï¼Œunique=true)æ³¨è§£ã€‚
ä¸€å¯¹å¤šå…³è”æ˜ å°„åœ¨JPAä¸­ä¸¤ä¸ªå®ä½“ä¹‹é—´æ˜¯ä¸€å¯¹å¤šå…³ç³»çš„ç§°ä¸ºä¸€å¯¹å¤šå…³è”å…³ç³»æ˜ å°„ï¼Œå¦‚ç­çº§å’Œå­¦ç”Ÿå…³ç³»ã€‚(1)ä¸€å¯¹å¤šå•å‘å…³è”æ˜ å°„ï¼šåœ¨ä¸€å¯¹å¤šå•å‘å…³è”æ˜ å°„ä¸­ï¼ŒJPAä¼šåœ¨æ•°æ®åº“ä¸­è‡ªåŠ¨ç”Ÿæˆå…¬æœ‰çš„ä¸­é—´è¡¨è®°å½•å…³è”å…³ç³»çš„æƒ…å†µã€‚åœ¨ä¸€ç«¯å…³è”é›†åˆå±æ€§æˆ–å­—æ®µä¸Šæ·»åŠ @OneToManyæ³¨è§£å³å¯ã€‚(2)ä¸€å¯¹å¤šåŒå‘å…³è”æ˜ å°„ï¼šåœ¨ä¸€å¯¹å¤šåŒå‘å…³è”æ˜ å°„ä¸­ï¼ŒJPAä¸ä¼šåœ¨æ•°æ®åº“ä¸­ç”Ÿæˆå…¬æœ‰ä¸­é—´è¡¨ã€‚åœ¨ä¸€ç«¯å…³è”é›†åˆå±æ€§æˆ–å­—æ®µä¸Šæ·»åŠ @OneToManyæ³¨è§£ï¼ŒåŒæ—¶æŒ‡å®šå…¶mappedByå±æ€§ã€‚åœ¨å¤šç«¯å…³è”å±æ€§æˆ–å­—æ®µä¸Šæ·»åŠ @ManyToOneæ³¨è§£ã€‚æ³¨æ„ï¼šä¸€å¯¹å¤šå…³ç³»æ˜ å°„ä¸­ï¼ŒmappedByåªèƒ½æ·»åŠ åœ¨OneToManyæ³¨è§£ä¸­ï¼Œå³åœ¨å¤šç«¯ç”Ÿæˆå¤–é”®ã€‚
å¤šå¯¹å¤šå…³è”æ˜ å°„åœ¨JPAä¸­ä¸¤ä¸ªå®ä½“ä¹‹é—´æ˜¯å¤šå¯¹å¤šå…³ç³»çš„ç§°ä¸ºå¤šå¯¹å¤šå…³è”å…³ç³»æ˜ å°„ï¼Œå¦‚å­¦ç”Ÿå’Œæ•™å¸ˆå…³ç³»ã€‚(1)å¤šå¯¹å¤šå•å‘æ˜ å°„ï¼šåœ¨å…¶ä¸­ä»»æ„å®ä½“ä¸€æ–¹å…³è”å±æ€§æˆ–å­—æ®µä¸Šæ·»åŠ @ManyToManyæ³¨è§£ã€‚(2)å¤šå¯¹å¤šåŒå‘æ˜ å°„ï¼šå…³ç³»ç»´æŠ¤ç«¯å…³è”å±æ€§æˆ–å­—æ®µä¸Šæ·»åŠ @ManyToManyæ³¨è§£ï¼ŒåŒæ—¶æŒ‡å®šè¯¥æ³¨è§£çš„mappedByå±æ€§ã€‚å…³ç³»è¢«ç»´æŠ¤ç«¯å…³è”å±æ€§æˆ–å­—æ®µä¸Šæ·»åŠ @ManyToManyæ³¨è§£ã€‚
JPAä¸­å®ä½“ç»§æ‰¿æ˜ å°„ç­–ç•¥åœ¨JPAä¸­ï¼Œå®ä½“ç»§æ‰¿å…³ç³»çš„æ˜ å°„ç­–ç•¥å…±æœ‰ä¸‰ç§ï¼šå•è¡¨ç»§æ‰¿ç­–ç•¥ã€Joinedç­–ç•¥å’ŒTable_PER_Classç­–ç•¥ã€‚(1)å•è¡¨ç»§æ‰¿ç­–ç•¥ï¼šå•è¡¨ç»§æ‰¿ç­–ç•¥ï¼Œçˆ¶ç±»å®ä½“å’Œå­ç±»å®ä½“å…±ç”¨ä¸€å¼ æ•°æ®åº“è¡¨ï¼Œåœ¨è¡¨ä¸­é€šè¿‡ä¸€åˆ—è¾¨åˆ«å­—æ®µæ¥åŒºåˆ«ä¸åŒç±»åˆ«çš„å®ä½“ã€‚å…·ä½“åšæ³•å¦‚ä¸‹ï¼ša.åœ¨çˆ¶ç±»å®ä½“çš„@Entityæ³¨è§£ä¸‹æ·»åŠ å¦‚ä¸‹çš„æ³¨è§£ï¼š
@Inheritance(Strategy=InheritanceType.SINGLE_TABLE)@DiscriminatorColumn(name=â€è¾¨åˆ«å­—æ®µåˆ—åâ€)@DiscriminatorValue(çˆ¶ç±»å®ä½“è¾¨åˆ«å­—æ®µåˆ—å€¼)
b.åœ¨å­ç±»å®ä½“çš„@Entityæ³¨è§£ä¸‹æ·»åŠ å¦‚ä¸‹çš„æ³¨è§£ï¼š
@DiscriminatorValue(å­ç±»å®ä½“è¾¨åˆ«å­—æ®µåˆ—å€¼)
(2)Joinedç­–ç•¥ï¼šJoinedç­–ç•¥ï¼Œçˆ¶ç±»å®ä½“å’Œå­ç±»å®ä½“åˆ†åˆ«å¯¹åº”æ•°æ®åº“ä¸­ä¸åŒçš„è¡¨ï¼Œå­ç±»å®ä½“çš„è¡¨ä¸­åªå­˜åœ¨å…¶æ‰©å±•çš„ç‰¹æ®Šå±æ€§ï¼Œçˆ¶ç±»çš„å…¬å…±å±æ€§ä¿å­˜åœ¨çˆ¶ç±»å®ä½“æ˜ å°„è¡¨ä¸­ã€‚å…·ä½“åšæ³•ï¼šåªéœ€åœ¨çˆ¶ç±»å®ä½“çš„@Entityæ³¨è§£ä¸‹æ·»åŠ å¦‚ä¸‹æ³¨è§£ï¼š
@Inheritance(Strategy=InheritanceType.JOINED)
å­ç±»å®ä½“ä¸éœ€è¦ç‰¹æ®Šè¯´æ˜ã€‚(3)Table_PER_Classç­–ç•¥ï¼šTable_PER_Classç­–ç•¥ï¼Œçˆ¶ç±»å®ä½“å’Œå­ç±»å®ä½“æ¯ä¸ªç±»åˆ†åˆ«å¯¹åº”ä¸€å¼ æ•°æ®åº“ä¸­çš„è¡¨ï¼Œå­ç±»è¡¨ä¸­ä¿å­˜æ‰€æœ‰å±æ€§ï¼ŒåŒ…æ‹¬ä»çˆ¶ç±»å®ä½“ä¸­ç»§æ‰¿çš„å±æ€§ã€‚å…·ä½“åšæ³•ï¼šåªéœ€åœ¨çˆ¶ç±»å®ä½“çš„@Entityæ³¨è§£ä¸‹æ·»åŠ å¦‚ä¸‹æ³¨è§£ï¼š
@Inheritance(Strategy=InheritanceType.TABLE_PER_CLASS)
å­ç±»å®ä½“ä¸éœ€è¦ç‰¹æ®Šè¯´æ˜ã€‚
å‚è€ƒæ–‡æ¡£JPAå­¦ä¹ ç¬”è®°1â€”â€”JPAåŸºç¡€http://blog.csdn.net/chjttony/article/details/6086298
JPAå­¦ä¹ ç¬”è®°2â€”â€”JPAé«˜çº§http://blog.csdn.net/chjttony/article/details/6086305
JPAå­¦ä¹ ç¬”è®°http://www.blogjava.net/luyongfa/archive/390572.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>jpa</tag>
      </tags>
  </entry>
  <entry>
    <title>å¤§ä¼—ç‚¹è¯„æå®¢å¤§èµ›</title>
    <url>/essay-dianping-geek/</url>
    <content><![CDATA[å‰è¨€å‰æ®µæ—¶é—´ï¼Œå‚åŠ äº†å¤§ä¼—ç‚¹è¯„çš„æå®¢å¤§èµ›åˆèµ›ã€‚çº¿ä¸Šç¼–ç¨‹æ’ä½èµ›ï¼Œæœ€åˆæ’åç¬¬å…­ï¼Œç¬¬äºŒæ¬¡æ’åæ‰åˆ°ç¬¬åï¼Œç¬¬ä¸‰æ¬¡æ’åæ˜å¤©å‡ºç»“æœã€‚æ²¡æœ‰å…³ç³»äº†ï¼Œä»Šå¤©æ”¶åˆ°å¤§ä¼—ç‚¹è¯„çš„å†³èµ›é€šçŸ¥ï¼Œçœ‹æ¥æ’ååº”è¯¥è¿›äº†å‰å…­åã€‚


å‡†å¤‡8æœˆ8æ—¥åˆ°8æœˆ10æ—¥ï¼Œä¸Šæµ·å¤§ä¼—ç‚¹è¯„æ€»éƒ¨ã€‚
å†³èµ›ç¬¬ä¸€åiPhone6 plusï¼Œç¬¬äºŒåiPad Airï¼Œè¿˜æœ‰å¤§ä¼—ç‚¹è¯„çš„å½•ç”¨æ„å‘ä¹¦ï¼Œå¾ˆæœ‰å¸å¼•åŠ›ï¼Œå¥½å¥½å‡†å¤‡ï¼
24å°æ—¶çš„ç¼–ç¨‹æ¯”èµ›ï¼Œç»„é˜Ÿåšä¸€ä¸ªDemoã€‚ä»¥å‰çš„é¡¹ç›®ç»éªŒï¼Œä¼°è®¡å¯ä»¥æ´¾ä¸Šç”¨åœºï¼Œä½†æ˜¯åŸºæœ¬ä¸Šéƒ½å¿˜è®°äº†ã€‚è¿™å‡ å¤©ï¼ŒAndroidæš‚æ—¶æ”¾ä¸‹ï¼Œå¤ä¹ ä¸€ä¸‹ä»¥å‰çš„é¡¹ç›®ï¼Œæä¸€æï¼
ä¸»è¦æœ‰ä¸‰ä¸ªé¡¹ç›®å€¼å¾—é‡åšï¼š

å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ
å›¢é˜Ÿåšå®¢
å¾®ä¿¡å…¬ä¼—å¹³å°iNJIT

åè®°ä¼°è®¡ï¼Œå¯ä»¥é‡åˆ°å¾ˆå¤šç‰›é€¼çš„å°ä¼™ä¼´ï¼ŒçœŸæ˜¯ä»¤äººæœŸå¾…ï¼
ç‚¹è¯„é“¾æ¥å¤§ä¼—ç‚¹è¯„æ ¡å›­æ‹›è˜http://campus.dianping.com/#!/index
ç‚¹è¯„æå®¢æŒ‘æˆ˜èµ›http://evt.dianping.com/event/campus15/pc.html
]]></content>
      <categories>
        <category>essay</category>
      </categories>
      <tags>
        <tag>éšç¬”</tag>
      </tags>
  </entry>
  <entry>
    <title>å¼€æºé•œåƒç«™</title>
    <url>/dev-open-source-mirror-site/</url>
    <content><![CDATA[å‰è¨€å¼€æºé•œåƒç«™æ˜¯ä¸€ä¸ªæ”¾ç½®å¼€æºç³»ç»Ÿé•œåƒæ–‡ä»¶çš„ç«™ç‚¹ï¼Œå…è´¹æä¾›é•œåƒæ–‡ä»¶ä¸‹è½½ã€‚


Linuxé•œåƒkernel é•œåƒç«™ï¼š http://mirrors.kernel.org/CentOS å®˜æ–¹é•œåƒç«™ï¼šhttp://mirror-status.centos.org/Fedora å®˜æ–¹é•œåƒç«™ï¼šhttp://mirrors.fedoraproject.org/publiclistDebian å…¨çƒé•œåƒç«™ï¼šhttp://www.debian.org/mirror/listUbuntu å®˜æ–¹é•œåƒç«™ï¼šhttp://releases.ubuntu.com/releases/http://cdimage.ubuntu.com/suseå®˜æ–¹é•œåƒç«™ï¼šhttp://download.opensuse.org/RedHaté•œåƒç«™ï¼šhttp://ftp.corbina.net/pub/Linux/redhat/Linuxè¿ç»´æ´¾å¼€æºé•œåƒç«™ï¼šhttp://mirrors.skyshe.cn/


ä¼ä¸šæœºæ„å¼€æºé•œåƒç«™é˜¿é‡Œäº‘å¼€æºé•œåƒç«™ï¼šhttp://mirrors.aliyun.com/ç½‘æ˜“å¼€æºé•œåƒç«™ï¼šhttp://mirrors.163.com/æœç‹å¼€æºé•œåƒç«™ï¼šhttp://mirrors.sohu.com/å¤©ç¿¼äº‘ï¼šhttp://mirrors.ctyun.cn/é¦–éƒ½åœ¨çº¿ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸ï¼šhttp://mirrors.yun-idc.com/å¼€æºä¸­å›½ï¼šhttp://mirrors.oschina.net/é˜¿é‡Œäº‘å¼€æºé•œåƒï¼šhttp://mirrors.aliyun.com/å¸¸å·è´ç‰¹åº·å§†è½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸(åŸcn99ï¼‰ï¼šhttp://centos.bitcomm.cn/å¼€æºä¸–ç•Œï¼šhttp://mirror.lupaworld.com/
å›½å†…å¤§å­¦å¼€æºé•œåƒç«™é¦™æ¸¯ä¸­æ–‡å¤§å­¦ ï¼šhttp://ftp.cuhk.edu.hk/pub/Linux/å°æ¹¾æ·¡æ±Ÿå¤§å­¦ï¼šhttp://ftp.tku.edu.tw/Linux/ç”µå­ç§‘æŠ€å¤§å­¦: http://ubuntu.uestc.edu.cn/å¦é—¨å¤§å­¦ï¼šhttp://mirrors.xmu.edu.cn/æµ™æ±Ÿå¤§å­¦ï¼šhttp://mirrors.zju.edu.cn/ä¸œè½¯ä¿¡æ¯å­¦é™¢ï¼šhttp://mirrors.neusoft.edu.cn/ä¸­å±±å¤§å­¦é•œåƒï¼šhttp://mirror.sysu.edu.cn/åä¸­ç§‘æŠ€å¤§å­¦ï¼š http://mirrors.hustunique.com/å¤§è¿ç†å·¥å¤§å­¦ï¼šhttp://mirror.dlut.edu.cn/å…°å·å¤§å­¦ï¼šhttp://mirror.lzu.edu.cn/é‡åº†å¤§å­¦ï¼šhttp://mirrors.cqu.edu.cn/åŒ—äº¬ç†å·¥å¤§å­¦ï¼šhttp://mirror.bit.edu.cn (IPv4 only)http://mirror.bit6.edu.cn (IPv6 only)åŒ—äº¬äº¤é€šå¤§å­¦ï¼šhttp://mirror.bjtu.edu.cn (IPv4 only)http://mirror6.bjtu.edu.cn (IPv6 only)http://debian.bjtu.edu.cn (IPv4+IPv6)ä¸Šæµ·äº¤é€šå¤§å­¦ï¼šhttp://ftp.sjtu.edu.cn/ (IPv4 only)http://ftp6.sjtu.edu.cn (IPv6 only)æ¸…åå¤§å­¦ï¼šhttp://mirrors.tuna.tsinghua.edu.cn/ (IPv4+IPv6)http://mirrors.6.tuna.tsinghua.edu.cn/ (IPv6 only)http://mirrors.4.tuna.tsinghua.edu.cn/ (IPv4 only)ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ï¼šhttp://mirrors.ustc.edu.cn/ (IPv4+IPv6)http://mirrors4.ustc.edu.cn/http://mirrors6.ustc.edu.cn/ä¸œåŒ—å¤§å­¦ï¼šhttp://mirror.neu.edu.cn/ (IPv4 only)http://mirror.neu6.edu.cn/ (IPv6 only)åä¸­ç§‘æŠ€å¤§å­¦ï¼šhttp://mirrors.hust.edu.cn/http://mirrors.hustunique.com/
å›½å¤–å¤§å­¦å¼€æºé•œåƒç«™åŒ—é™†å…ˆç«¯ç§‘å­¦æŠ€æœ¯å¤§å­¦é™¢å¤§å­¦JAIST: http://ftp.jaist.ac.jp/pub/å¡å†…åŸºæ¢…éš†å¤§å­¦CMU: http://www.club.cc.cmu.edu/pubéº»çœç†å·¥å­¦é™¢MIT: http://mirrors.mit.edu/å“¥ä¼¦æ¯”äºšå¤§å­¦: http://mirror.cc.columbia.edu/ä¿„å‹’å†ˆå·ç«‹å¤§å­¦: http://ftp.osuosl.org/pubä¼Šåˆ©è¯ºä¼Šå¤§å­¦å„å·´çº³-é¦™æ§Ÿåˆ†æ ¡: http://cosmos.cites.illinois.edu/æœå…‹å¤§å­¦: http://archive.linux.duke.edu/çº¦ç¿°Â·éœæ™®é‡‘æ–¯å¤§å­¦: http://mirrors.acm.jhu.edu/ä¿„ç½—æ–¯é•œåƒæœåŠ¡å™¨ï¼šhttp://ftp.kddilabs.jp/http://ftp.jaist.ac.jp/pub/http://ftp.kaist.ac.kr/http://mirror.karneval.cz/pub/http://ftp.gwdg.de/pub/http://ftp.estpak.ee/pub/
åˆ†ç±»é•œåƒæœåŠ¡å™¨PyPiè±†ç“£ï¼šhttp://pypi.douban.com/ä¸­å±±å¤§å­¦ï¼šhttp://mirror.sysu.edu.cn/pypi/
RubyGemsæ·˜å®ï¼šhttp://ruby.taobao.org/ä¸­å±±å¤§å­¦ï¼šhttp://mirror.sysu.edu.cn/rubygems/
npmcnpmjsï¼šhttp://cnpmjs.org/
ä¹¦ç­¾å›½å†…å¤–å¼€æºé•œåƒæœåŠ¡å™¨ç«™ç‚¹æ±‡æ€»http://www.douban.com/note/375227086/
å›½å†…å¼€æºé•œåƒç«™ç‚¹æ±‡æ€»http://segmentfault.com/a/1190000000375848
ä¸­å›½Linuxå¼€æºé•œåƒç«™å¤§å…¨http://www.centoscn.com/yunwei/news/2012/1227/131.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidå¼€å‘â€”â€”-Android Source&amp;SDKçš„å›½å†…é•œåƒ</title>
    <url>/dev-android-source-and-sdk/</url>
    <content><![CDATA[å‰è¨€è°·æ­Œè¢«å¢™ï¼Œåœ¨ä¸‹è½½å®‰å“æºç å’ŒSDKæ—¶ï¼Œå„ç§æ²¡æœ‰è¿›åº¦ã€‚è¿™æ—¶ï¼Œå°±è¦æ„Ÿè°¢å›½å†…é•œåƒç«™äº†ã€‚
Android Sourceæ¸…åå¤§å­¦TUNAé•œåƒæºhttps://aosp.tuna.tsinghua.edu.cn/https://wiki.tuna.tsinghua.edu.cn/MirrorUsage/android
ä¸ºä»€ä¹ˆè¦ä¸‹è½½Android Sourceç ”ç©¶Androidå°¤å…¶æ˜¯Androidç³»ç»Ÿæ ¸å¿ƒæˆ–è€…æ˜¯é©±åŠ¨çš„å¼€å‘ï¼Œé¦–å…ˆéœ€è¦åšçš„å°±æ˜¯å…‹éš†å»ºç«‹æœ¬åœ°Android Sourceç‰ˆæœ¬åº“ã€‚


AOSPã€AOKPã€CMAOSPæ˜¯â€œAndroid Open-Source Projectâ€çš„ç¼©å†™ï¼Œä¸­æ–‡åç§°ä¸ºAndroidå¼€æ”¾æºä»£ç é¡¹ç›®ã€‚å¤§å®¶éƒ½çŸ¥é“Androidæ˜¯å¼€æºæ“ä½œç³»ç»Ÿï¼Œæ‰€ä»¥Googleæ¯å‘å¸ƒä¸€ä¸ªAndroidç‰ˆæœ¬ï¼Œéƒ½ä¼šç»™å¼€æºç¤¾åŒºå‘æ”¾å¯¹åº”ç‰ˆæœ¬çš„æºä»£ç ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„AOSP ROMï¼Œè¿™å¯ä»¥ç§°å¾—ä¸Šæ˜¯æœ€ä¸ºçº¯å‡€çš„Androidç³»ç»Ÿã€‚å¯ä»¥ç”¨ç±»æ¯”æ¥è®©å¤§å®¶æ›´æ¸…æ¥šä¸€äº›ï¼Œä¾‹å¦‚å›½å†…å¤šæ•°ç›—ç‰ˆçš„Windowsç³»ç»Ÿï¼Œå‡ ä¹éƒ½æ˜¯åŸºäºå¾®è½¯çš„MSDNåˆ¶ä½œï¼ŒAOSP ROMå³ç­‰ç›¸å½“äºå¾®è½¯MSDNæ¯ç›˜çš„è§’è‰²ã€‚
AOKPæ˜¯â€œAndroid Open-Source Kang Projectâ€ï¼Œæ¯”AOSPå¤šäº†ä¸€ä¸ªâ€œKangâ€ã€‚åœ¨Androidç¤¾åŒºä¸­ï¼ŒKangè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè¢«åˆ«äººå®šåˆ¶è¿‡çš„ROMï¼Œæ˜¯ä¸€ä¸ªæ¥è‡ªæ°‘é—´çš„ROMã€‚
CMæ˜¯CyanogenModçš„ç®€ç§°ï¼ŒCyanogenå›¢é˜Ÿæ˜¯å…¨çƒæœ€å¤§çš„ç¬¬ä¸‰æ–¹ROMç¼–è¯‘å›¢é˜Ÿï¼Œè¦†ç›–æœºå‹èŒƒå›´ç‰¹åˆ«å¹¿ï¼Œå›½å†…çŸ¥åçš„ROMä¾‹å¦‚MIUIã€é”¤å­ROMéƒ½æ˜¯åŸºäºCMå®ç°çš„ã€‚ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´ï¼ŒCM ROMå±äºAOKPçš„èŒƒç•´ã€‚CM ROMè™½ç„¶ä¸€ç›´éµä»åŸç”ŸAndroidï¼Œä½†åªæœ‰Googleå®˜æ–¹çš„æ‰ç®—çœŸæ­£çš„AOSPã€‚
ä¸ºä»€ä¹ˆä½¿ç”¨RepoAndroidä½¿ç”¨Gitä½œä¸ºä»£ç ç®¡ç†å·¥å…·ï¼Œå¼€å‘äº†Gerritè¿›è¡Œä»£ç å®¡æ ¸ä»¥ä¾¿æ›´å¥½çš„å¯¹ä»£ç è¿›è¡Œé›†ä¸­å¼ç®¡ç†ï¼Œè¿˜å¼€å‘äº†Repoå‘½ä»¤è¡Œå·¥å…·ï¼Œå¯¹Gitéƒ¨åˆ†å‘½ä»¤å°è£…ï¼Œå°†ç™¾å¤šä¸ªGitåº“æœ‰æ•ˆçš„è¿›è¡Œç»„ç»‡ã€‚
AOSPæ˜¯ç”±è®¸è®¸å¤šå¤šæœ‰Gitç®¡ç†çš„é¡¹ç›®ç»„æˆçš„ï¼Œä¾‹å¦‚ï¼Œåœ¨Android4.2ä¸­ï¼Œå°±åŒ…å«äº†329ä¸ªé¡¹ç›®ï¼Œæ¯ä¸€ä¸ªé¡¹ç›®éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„Gitä»“åº“ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœæˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªAOSPåˆ†æ”¯æ¥åšæ–°çš„featureå¼€å‘ï¼Œé‚£ä¹ˆå°±éœ€è¦åˆ°æ¯ä¸€ä¸ªå­é¡¹ç›®å»åˆ›å»ºå¯¹åº”çš„åˆ†æ”¯ã€‚è¿™æ˜¾ç„¶ä¸èƒ½æ‰‹åŠ¨åœ°åˆ°æ¯ä¸€ä¸ªå­é¡¹ç›®é‡Œé¢å»åˆ›å»ºåˆ†æ”¯ï¼Œå¿…é¡»è¦é‡‡ç”¨ä¸€ç§è‡ªåŠ¨åŒ–çš„æ–¹å¼æ¥å¤„ç†ã€‚è¿™äº›è‡ªåŠ¨åŒ–å¤„ç†å·¥ä½œå°±æ˜¯ç”±Repoå·¥å…·æ¥å®Œæˆçš„ã€‚å½“ç„¶ï¼ŒRepoå·¥å…·æ‰€è´Ÿè´£çš„è‡ªåŠ¨åŒ–å·¥ä½œä¸åªæ˜¯åˆ›å»ºåˆ†æ”¯é‚£ä¹ˆç®€å•ï¼ŒæŸ¥çœ‹åˆ†æ”¯çŠ¶æ€ã€æäº¤ä»£ç ã€æ›´æ–°ä»£ç ç­‰åŸºç¡€çš„Gitæ“ä½œéƒ½å¯ä»¥ç”¨Repoæ¥æ›¿ä»£å®Œæˆã€‚
ä¸‹è½½å®‰è£…é…ç½®Repoå‡è®¾åœ¨VirtualBox Ubuntuç¯å¢ƒä¸‹ï¼Œæ‰“å¼€ç»ˆç«¯ï¼šmkdir ~/binPATH=~/bin:$PATHgit clone git://aosp.tuna.tsinghua.edu.cn/android/git-repo.gitcp git-repo/repo ~/bin/gedit ~/bin/repoåœ¨è¯¥æ–‡ä»¶ä¸­ä¿®æ”¹
REPO_URL = &#x27;git://aosp.tuna.tsinghua.edu.cn/android/git-repo&#x27;

åˆå§‹åŒ–Repomkdir anroidcd androidgit config --global user.email &quot;voidking@qq.com&quot;git config --global user.name &quot;voidking&quot;repo init -u git://aosp.tuna.tsinghua.edu.cn/android/platform/manifest -b android-5.0.2_r1è¿™ä¸€æ­¥å¤§æ¦‚æœ‰ä¸€åˆ†å¤šé’Ÿå°±å®Œæˆäº†ã€‚å¦‚æœéœ€è¦ä¸‹è½½å…¶ä»–åˆ†æ”¯å°†android-5.0.2_r1æ”¹æˆå…¶ä»–åˆ†æ”¯åç§°å°±å¯ä»¥äº†ã€‚
Androidå®˜ç½‘è¯¦ç»†åœ°ä»‹ç»äº†å½“å‰Androidçš„å„ä¸ªç‰ˆæœ¬åç§°ã€Versionã€å¯¹åº”çš„API Levelã€Branch TAGã€ä»¥åŠSupported devicesï¼Œè¯¥é“¾æ¥åœ°å€å¦‚ä¸‹ï¼šhttp://source.android.com/source/build-numbers.html
å¦‚æœè°·æ­ŒåŒ—å¢™ï¼Œè¯·æŸ¥çœ‹https://github.com/Jhuster/AOSP/tree/master/documents çš„build-numbers.htmlï¼Œé›·é”‹å“¥å“¥åœ¨è¿™é‡Œå¤‡ä»½äº†ä¸€ä»½ã€‚
å¼€å§‹ä¸‹è½½repo syncç„¶åå°±æ˜¯æ¼«é•¿çš„ç­‰å¾…äº†ï¼Œå¤§çº¦32Gçš„æ•°æ®ï¼Œæœ‰ç‚¹å¤§ï¼
ä½¿ç”¨1ã€æŸ¥çœ‹æºç 

åœ¨Ubuntuä¸‹ï¼ŒæŸ¥çœ‹æ²¡æœ‰é—®é¢˜ã€‚
å¦‚æœæƒ³è¦åœ¨Windowsä¸‹æŸ¥çœ‹ï¼Œé‚£ä¹ˆä¸å¦¨å»ºç«‹ä¸€ä¸ªUbuntuå’ŒWindowsçš„å…±äº«æ–‡ä»¶å¤¹ï¼Œå…·ä½“æ–¹æ³•è§ã€ŠVirtualBox Ubuntuå…±äº«æ–‡ä»¶å¤¹ã€‹ã€‚

2ã€å¼€å‘æŒ‰ç…§æ›¾ç»ä¿®æ”¹Linuxå†…æ ¸çš„ç»éªŒï¼ŒéƒåŒå­¦æ¨æµ‹ï¼ŒAndroidçš„å†…æ ¸å¼€å‘æœ€å¥½åœ¨Linuxä¸‹è¿›è¡Œï¼›Macæ˜¯ç¨‹åºçŒ¿çš„æœ€çˆ±ï¼Œä¼°è®¡ä¹Ÿå¯ä»¥ï¼›å„ç§ç¼–è¯‘å·¥å…·å’Œä¾èµ–åŒ…ï¼ŒWindowsæŠ˜è…¾ä¸èµ·å“‡ï¼
Android SDKåŒ—äº¬åŒ–å·¥å¤§å­¦é•œåƒç«™http://ubuntu.buct.edu.cn/http://ubuntu.buct.edu.cn/android/repository/
We - å¼€æºé•œåƒç«™http://mirrors.neusoft.edu.cn/http://mirrors.neusoft.edu.cn/android/repository/
é…ç½®1ã€å¯åŠ¨Android SDK Managerï¼ŒToolsï¼ŒOptionsã€‚2ã€åœ¨å¼¹å‡ºçš„Android SDK Manager-Settingsä¸­

HTTP Proxy Serverå¡«å…¥mirrors.neusoft.edu.cn
HTTP Proxy Portå¡«å…¥80
é€‰ä¸­Force https://... sources to be fetched using http://...å¤é€‰æ¡†ã€‚

3ã€å•å‡»Closeè¿”å›ä¸»ç•Œé¢ï¼ŒPackagesï¼ŒReloadã€‚
åè®°Android Sourceï¼Œå‰æœŸç”¨ä¸ä¸Šï¼ŒéƒåŒå­¦è¿˜æ²¡æœ‰æ·±å…¥åº•å±‚çš„æ‰“ç®—ã€‚Androidçš„SDKï¼Œè¿™æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼æœ€å–œæ¬¢é‡Œé¢çš„å®˜æ–¹æ–‡æ¡£å’Œä¾‹å­ï¼Œå®åœ¨æ˜¯å­¦ä¹ Androidçš„æœ€å¥½èµ„æ–™å•Šï¼
å‚è€ƒæ–‡æ¡£åŒæ­¥ã€æ›´æ–°ã€ä¸‹è½½Android Source &amp; SDK from å›½å†…é•œåƒç«™http://www.cnblogs.com/bluestorm/p/4419051.html
Android A to Z: What is the AOSP?http://www.androidcentral.com/android-z-what-aosp
Androidæºä»£ç ä»“åº“åŠå…¶ç®¡ç†å·¥å…·Repoåˆ†æhttp://blog.csdn.net/luoshengyang/article/details/18195205
Androidæºç ä»“åº“å’ŒRepoå·¥å…·ä½¿ç”¨http://www.2cto.com/kf/201409/336722.html
windowsç³»ç»Ÿä¸­å›½å›½å†…é•œåƒç½‘ç«™ä¸Šç”¨repoä¸‹è½½Android5.0æºç http://jileniao.net/post-156.html
repoç”¨æ³•è¯¦è§£http://blog.csdn.net/sunweizhong1024/article/details/8055372
å…³äºAndroid Repohttp://www.cnblogs.com/hongzg1982/articles/2101980.html
Androidå†…æ ¸å¼€å‘ï¼šæºç çš„ç‰ˆæœ¬ä¸åˆ†æ”¯è¯¦è§£http://ticktick.blog.51cto.com/823160/1654759http://www.tuicool.com/articles/RjeEZb
]]></content>
      <categories>
        <category>engineering</category>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidå¼€å‘â€”â€”å¸¸è§å¼€æºé¡¹ç›®</title>
    <url>/dev-android-open-sourse/</url>
    <content><![CDATA[å‰è¨€è§å¤šè¯†å¹¿ï¼Œæ–¹ä¾¿æ¨¡ä»¿ã€‚
çœ‹çš„å¤šäº†ï¼Œå†™çš„å¤šäº†ï¼Œæ‡‚çš„å¤šäº†ã€‚ä¹Ÿå°±æ€•çš„å°‘äº†ï¼Œæ€è·¯å¹¿äº†ï¼Œå¢ƒç•Œé«˜äº†ã€‚ã€‚ã€‚
ä»Šå¤©æˆ‘ä»¬æ¥èŠèŠæ‹“å®½ä¸–ç•Œçš„é€”å¾„ä¹‹ä¸€ï¼Œå­¦ä¹ é‚£äº›ç‰›é€¼çš„å¼€æºé¡¹ç›®ï¼
é›¨è¾°æ¨è
ActionBarSherlock
HoloEverywhere
ViewPagerIndicator




Android-Universal-Image-Loader
Sliding Menu
Android-PullToRefresh
ViewBader
Progress Wheel
Cards UI
SmoothProgressBar
SataliteMenu
Radial Menu Widget
Indexable ListView
Sticky ListHeaders
Slide ExpandableListView
Jazzy ListView
PinterestListView
SwipeListView

åè®°åˆå…¥Androidä¸–ç•Œï¼Œä¾¿çœ‹åˆ°é«˜å±±æ™¯è¡Œï¼Œçªç„¶æ„Ÿè§‰çƒ­è¡€è¢«ç‚¹ç‡ƒï¼ä¹Ÿè®¸ï¼Œæˆ‘ä¼šåœ¨è¿™æ¡è·¯ä¸Šèµ°å¾ˆè¿œã€‚ã€‚ã€‚
å‚è€ƒèµ„æº7å¤©å­¦ä¼šAndroidhttp://www.duobei.com/room/trial/9118721751
ç›´æ¥æ‹¿æ¥ç”¨ï¼æœ€ç«çš„Androidå¼€æºé¡¹ç›®ï¼ˆä¸€ï¼‰http://www.csdn.net/article/2013-05-03/2815127-Android-open-source-projects
ç›´æ¥æ‹¿æ¥ç”¨ï¼æœ€ç«çš„Androidå¼€æºé¡¹ç›®ï¼ˆäºŒï¼‰http://www.csdn.net/article/2013-05-06/2815145-Android-open-source-projects-two
ç›´æ¥æ‹¿æ¥ç”¨ï¼æœ€ç«çš„Androidå¼€æºé¡¹ç›®ï¼ˆå®Œç»“ç¯‡ï¼‰http://www.csdn.net/article/1970-01-01/2815370
ç›´æ¥æ‹¿æ¥ç”¨ï¼æœ€ç«çš„Androidå¼€æºé¡¹ç›®æ•´ç†http://blog.csdn.net/djun100/article/details/13776005
ç›´æ¥æ‹¿æ¥ç”¨ï¼åå¤§Material Designå¼€æºé¡¹ç›®http://www.csdn.net/article/2014-11-21/2822753-material-design-libs
Androidå¼€æºé¡¹ç›®åˆ†ç±»æ±‡æ€»ã€è€å¤–æ±‡æ€»ç‰ˆæœ¬ã€‘http://blog.csdn.net/forlong401/article/details/26848951
å®‰å“å·´å£«æ€»ç»“äº†è¿‘ç™¾ä¸ªAndroidä¼˜ç§€å¼€æºé¡¹ç›®http://www.apkbus.com/android-17627-1-1.html
GitHub ä¼˜ç§€çš„ Android å¼€æºé¡¹ç›®http://blog.csdn.net/shulianghan/article/details/18046021http://www.cnblogs.com/hawkon/p/3593709.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>git branch</title>
    <url>/dev-git-branch/</url>
    <content><![CDATA[å‰è¨€Branches in Git are incredibly lightweight as well. They are simply pointers to a specific commit â€“ nothing more. This is why many Git enthusiasts chant the mantra:

branch early, and branch often.

Because there is no storage / memory overhead with making many branches, itâ€™s easier to logically divide up your work than have big beefy branches.
When we start mixing branches and commits, we will see how these two features combine. For now though, just remember that a branch essentially says â€œI want to include the work of this commit and all parent commits.â€


gitåˆ†æ”¯è§„èŒƒå‚è€ƒæ–‡æ¡£ï¼š

A successful Git branching model
å›¾è§£git flowå¼€å‘æµç¨‹

åˆ›å»ºåˆ†æ”¯1ã€åˆ›å»ºæœ¬åœ°bugfixåˆ†æ”¯git branch bugfix
2ã€åˆ‡æ¢åˆ°bugfixåˆ†æ”¯
git branch -agit checkout bugfix

3ã€åˆ›å»ºè¿œç¨‹bugfixåˆ†æ”¯git push origin HEAD:bugfixåˆ›å»ºè¿œç¨‹bugfix2åˆ†æ”¯git push origin HEAD:bugfix2
4ã€ä¸‹è½½ååˆ‡æ¢åˆ°bugfixåˆ†æ”¯git checkout origin/bugfix
ä¸Šä¼ åˆ†æ”¯åœ¨bugfixåˆ†æ”¯ä¸‹è¿›è¡Œäº†ä¿®æ”¹ï¼Œç„¶åæäº¤ä¿®æ”¹ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š
git add .git commit -m &quot;something&quot;git push origin HEAD:bugfix

åˆ é™¤åˆ†æ”¯1ã€åˆ é™¤æœ¬åœ°åˆ†æ”¯git branch -D bugfix
2ã€åˆ é™¤çº¿ä¸Šåˆ†æ”¯git push --delete origin bugfix
æ¢å¤å·²åˆ é™¤åˆ†æ”¯1ã€æŸ¥çœ‹å…¨å±€æ—¥å¿—git reflogæˆ–è€…git log -g
2ã€æ–°å»ºåˆ†æ”¯git branch bugfix 3eac14d
3ã€ä¸Šä¼ åˆ†æ”¯git checkout bugfixgit push origin HEAD:bugfix
åˆå¹¶åˆ†æ”¯åˆå¹¶åˆ†æ”¯ï¼Œå¯ä»¥ä½¿ç”¨mergeï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨rebaseã€‚å®ƒä»¬ä¿©æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿä¸»è¦æ˜¯é€‚ç”¨åœºæ™¯ä¸åŒï¼š
åœºæ™¯ä¸€ï¼šåŸºäº master æ‹‰å‡ºæ¥ä¸€ä¸ªå¼€å‘åˆ†æ”¯ devï¼Œåœ¨ dev åˆ†æ”¯å¼€å‘å®Œæˆäº†ä¹‹åï¼Œè¦åˆå¹¶åˆ° master ä¸Šã€‚æ“ä½œï¼šåˆ‡æ¢åˆ° master åˆ†æ”¯ï¼Œä½¿ç”¨ git merge devPSï¼šå¯¹äºgitæœåŠ¡å™¨ç«¯çš„mergeåˆå¹¶ï¼Œå¾€å¾€è¦å‘èµ·MRï¼Œä¹Ÿå°±æ˜¯Merge Requestä¸ºä»€ä¹ˆä¸ä½¿ç”¨git rebase devï¼Ÿå› ä¸ºmasteræ˜¯ä¸»å¹²ï¼Œrebaseçš„è¯ï¼Œä¸»å¹²å°±é•¿æ­ªäº†ã€‚ä¸ºäº†ä¿è¯masteræäº¤è®°å½•æ˜¯ç¬”ç›´çš„ä¸»å¹²ï¼Œæ˜¯ä¸€æ¡ç›´çº¿ï¼Œæ‰€ä»¥ä½¿ç”¨mergeã€‚
åœºæ™¯äºŒï¼šåŸºäº master æ‹‰å‡ºæ¥ä¸€ä¸ªå¼€å‘åˆ†æ”¯ devï¼Œåœ¨ dev ä¸Šå¼€å‘äº†ä¸€æ®µæ—¶é—´åï¼Œmasteråˆ†æ”¯ä¹Ÿæœ‰äº†æ–°çš„å˜æ›´ã€‚ä¸ºäº†ä¿è¯æˆ‘ä»¬åœ¨æœ€æ–°çš„ç‰ˆæœ¬åŸºç¡€ä¸Šè¿›è¡Œå¼€å‘ï¼Œè¿™æ—¶éœ€è¦æŠŠ master åˆ†æ”¯æäº¤çš„æ–°å†…å®¹æ›´æ–°åˆ° dev åˆ†æ”¯ã€‚æ“ä½œï¼šåˆ‡æ¢åˆ° dev åˆ†æ”¯ï¼Œä½¿ç”¨ git rebase masterä¸ºä»€ä¹ˆä¸ä½¿ç”¨git merge masterï¼Ÿå› ä¸ºdevæœ€ç»ˆæ˜¯è¦mergeåˆ°masterçš„ï¼Œå¦‚æœmasterå…ˆmergeåˆ°devï¼Œå¼€å‘ä¸€æ®µæ—¶é—´ådevæœ€ååˆmergeåˆ°masterï¼Œæ•´ä¸ªæäº¤æ ‘ä¼šå¾ˆæ··ä¹±ã€‚ä¸ºäº†ä¿è¯æäº¤è®°å½•çš„æ¸…æ™°æ˜äº†ï¼Œæ‰€ä»¥ä½¿ç”¨rebaseã€‚
æŸ¥çœ‹æäº¤æ ‘å‘½ä»¤ï¼šgit log --graph --pretty=oneline
æ¨¡æ‹Ÿåˆ†æ”¯å˜æ›´1ã€åˆå§‹åŒ–ä»“åº“å’Œåˆ†æ”¯
mkdir testcd testgit inittouch test.txtgit add .git commit -m &quot;first commit&quot;git checkout -b bugfix

2ã€bugfixåˆ†æ”¯ä¸Šï¼Œæ–°å»ºtest.txtæ–‡ä»¶ï¼Œæäº¤
echo &quot;hello bugfix&quot; &gt; test.txtgit add .git commit -m &quot;update file in bugfix branch&quot;

3ã€åˆ‡åˆ°masteråˆ†æ”¯ï¼Œæ–°å»ºtest.txtæ–‡ä»¶ï¼Œæäº¤
git checkout masterecho &quot;hello master&quot; &gt; test.txtgit add .git commit -m &quot;update file in master branch&quot;

merge1ã€é€šè¿‡mergeå‘½ä»¤åˆå¹¶bugfixåˆ†æ”¯åˆ°master
git merge bugfix

æç¤ºå†²çªï¼š
Auto-merging test.txtCONFLICT (content): Merge conflict in test.txtAutomatic merge failed; fix conflicts and then commit the result.

2ã€æŸ¥çœ‹å†²çªgit statusï¼Œæç¤ºtest.txtæ–‡ä»¶å†²çªã€‚æ‰“å¼€test.txtï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹å†²çªï¼š
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEADhello master=======hello bugfix&gt;&gt;&gt;&gt;&gt;&gt;&gt; update file in bugfix branch
å…¶ä¸­ ======= éš”å¼€çš„ä¸ŠåŠéƒ¨åˆ†ï¼Œæ˜¯ HEADï¼ˆå³ master åˆ†æ”¯ï¼Œåœ¨è¿è¡Œ merge å‘½ä»¤æ—¶æ£€å‡ºçš„åˆ†æ”¯ï¼‰ä¸­çš„å†…å®¹ï¼Œä¸‹åŠéƒ¨åˆ†æ˜¯åœ¨bugfixåˆ†æ”¯ä¸­çš„å†…å®¹ã€‚è§£å†³å†²çªçš„åŠæ³•æ— éæ˜¯äºŒè€…é€‰å…¶ä¸€æˆ–è€…ç”±ä½ äº²è‡ªæ•´åˆåˆ°ä¸€èµ·ã€‚
3ã€è§£å†³å†²çªä¿®æ”¹test.txtå¦‚ä¸‹ï¼š
hello master

4ã€æäº¤
git add test.txtgit commit -m &quot;merge bugfix into master&quot;

5ã€æŸ¥çœ‹æäº¤è®°å½•git log
rebase1ã€é€šè¿‡rebaseå‘½ä»¤åˆå¹¶masteråˆ†æ”¯åˆ°bugfix
git checkout bugfixgit rebase master
æç¤ºå†²çªï¼š
First, rewinding head to replay your work on top of it...Applying: update file in bugfix branchUsing index info to reconstruct a base tree...M   test.txtFalling back to patching base and 3-way merge...Auto-merging test.txtCONFLICT (content): Merge conflict in test.txterror: Failed to merge in the changes.Patch failed at 0001 update file in bugfix branchhint: Use &#x27;git am --show-current-patch&#x27; to see the failed patchResolve all conflicts manually, mark them as resolved with&quot;git add/rm &lt;conflicted_files&gt;&quot;, then run &quot;git rebase --continue&quot;.You can instead skip this commit: run &quot;git rebase --skip&quot;.To abort and get back to the state before &quot;git rebase&quot;, run &quot;git rebase --abort&quot;
æ­¤æ—¶æˆ‘ä»¬è¿›å…¥äº†ä¸€ä¸ªä¸´æ—¶åˆ†æ”¯ã€‚
2ã€æŸ¥çœ‹å†²çªgit statusï¼Œæç¤ºtest.txtæ–‡ä»¶å†²çªã€‚æ‰“å¼€test.txtï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹å†²çªï¼š
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEADhello master=======hello bugfix&gt;&gt;&gt;&gt;&gt;&gt;&gt; update file in bugfix branch

3ã€è§£å†³å†²çªä¿®æ”¹test.txtå¦‚ä¸‹ï¼š
hello master bugfix

4ã€æäº¤
git add test.txtgit rebase --continue

5ã€æŸ¥çœ‹æäº¤è®°å½•git logå¯ä»¥çœ‹åˆ°ä¸‰æ¡è®°å½•ï¼š
update file in bugfix branchupdate file in master branchfirst commit


å¦‚æœtext.txtä¿®æ”¹ä¸ºï¼š
hello master

è¿™ä¸ªä¿®æ”¹å¯ä»¥æ‰‹åŠ¨æ“ä½œï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤git checkout --ours test.txtã€‚
é‚£ä¹ˆæäº¤å‘½ä»¤ä¸ºï¼š
git add test.txtgit rebase --skip
æ­¤æ—¶åªä¼šæœ‰ä¸¤ä¸ªæäº¤è®°å½•ï¼š
update file in master branchfirst commit


rebaseè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥éšæ—¶æ”¾å¼ƒrebasegit rebase --abort
è§£å†³å†²çªå°ç»“åˆå¹¶æ—¶éš¾å…ä»£ç å†²çªï¼Œgitä¼šå°†å†²çªçš„ä»£ç ç”¨ &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD ======= &gt;&gt;&gt;&gt;&gt;&gt;&gt; xxx æ ‡è¯†å‡ºæ¥ï¼Œå…¶ä¸­=======ä¹‹å‰è¡¨ç¤ºçš„æ˜¯oursåˆ†æ”¯ï¼Œä¹‹åè¡¨ç¤ºtheirsåˆ†æ”¯ã€‚
è§£å†³å†²çªåŠæ³•ï¼šé¦–å…ˆç¡®å®šä¿ç•™å“ªä¸€éƒ¨åˆ†ä»£ç ï¼Œç„¶åæ‰‹åŠ¨åˆ é™¤æ ‡å¿— &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD ======= &gt;&gt;&gt;&gt;&gt;&gt;&gt; xxxï¼Œæœ€åcommitã€‚
å¦‚æœæƒ³è¦ä¿ç•™ä¸¤ä¸ªåˆ†æ”¯ä¸­çš„æŸä¸€ä¸ªï¼Œå¯ä»¥ä½¿ç”¨ git chekout --ours &lt;fileName&gt; æˆ–è€… git checkout --theirs &lt;fileName&gt;ã€‚
å¯¹äºmergeå’Œrebaseæ¥è¯´ï¼Œè¿™ä¸¤ä¸ªé€‰é¡¹å¯¹åº”çš„åˆ†æ”¯æ­£å¥½æ˜¯ç›¸åçš„ã€‚åœ¨ä½¿ç”¨ merge æ—¶ï¼ŒoursæŒ‡çš„æ˜¯å½“å‰åˆ†æ”¯ï¼ˆmasterï¼‰ï¼ŒtheirsæŒ‡çš„æ˜¯è¦è¢«åˆå¹¶çš„åˆ†æ”¯ï¼ˆdevï¼‰ã€‚è€Œåœ¨ rebase æ—¶ï¼ŒtheirsæŒ‡çš„æ˜¯å½“å‰åˆ†æ”¯ï¼ˆdevï¼‰ï¼ŒoursæŒ‡å‘ï¼ˆmasterï¼‰ã€‚
ä¹¦ç­¾
Learn Git Branching
git mergeç®€ä»‹
Git Book - rebase

]]></content>
      <categories>
        <category>engineering</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>gitignoreç”¨æ³•</title>
    <url>/dev-gitignore/</url>
    <content><![CDATA[å‰è¨€æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬å¿…é¡»æŠŠæŸäº›æ–‡ä»¶æ”¾åˆ°Gitå·¥ä½œç›®å½•ä¸­ï¼Œä½†åˆä¸èƒ½æäº¤å®ƒä»¬ï¼Œæ¯”å¦‚ä¿å­˜äº†æ•°æ®åº“å¯†ç çš„é…ç½®æ–‡ä»¶ã€é¡¹ç›®è¿è¡Œæ—¶ç”Ÿæˆçš„ä¸´æ—¶æ–‡ä»¶ç­‰ç­‰ï¼Œæ¯æ¬¡git statuséƒ½ä¼šæ˜¾ç¤ºUntracked files ...ï¼Œè®©äººä¸çˆ½ã€‚
å¥½åœ¨Gitè€ƒè™‘åˆ°äº†å¤§å®¶çš„æ„Ÿå—ï¼Œåœ¨Gitå·¥ä½œåŒºçš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªç‰¹æ®Šçš„.gitignoreæ–‡ä»¶ï¼Œç„¶åæŠŠè¦å¿½ç•¥çš„æ–‡ä»¶åå¡«è¿›å»ï¼ŒGitå°±ä¼šè‡ªåŠ¨å¿½ç•¥è¿™äº›æ–‡ä»¶ã€‚


gitignoreè§„åˆ™åŸºæœ¬è¯­æ³•
ä»¥æ–œæ /å¼€å¤´è¡¨ç¤ºç›®å½•
ä»¥æ˜Ÿå·*é€šé…å¤šä¸ªå­—ç¬¦ï¼›
ä»¥é—®å·?é€šé…å•ä¸ªå­—ç¬¦
ä»¥æ–¹æ‹¬å·[]åŒ…å«å•ä¸ªå­—ç¬¦çš„åŒ¹é…åˆ—è¡¨
ä»¥å¹å·!è¡¨ç¤ºä¸å¿½ç•¥(è·Ÿè¸ª)åŒ¹é…åˆ°çš„æ–‡ä»¶æˆ–ç›®å½•

ç¤ºä¾‹# è¿™æ˜¯æ³¨é‡Šè¡Œï¼Œå°†è¢«å¿½ç•¥.DS_Store # å¿½ç•¥æ‰€æœ‰çš„.DS_Store*.a       # å¿½ç•¥æ‰€æœ‰ä»¥.aä¸ºæ‰©å±•åçš„æ–‡ä»¶    !lib.a    # ä½†æ˜¯åä¸ºlib.açš„æ–‡ä»¶æˆ–ç›®å½•ä¸è¦å¿½ç•¥ï¼Œå³ä½¿å‰é¢è®¾ç½®äº†å¯¹*.açš„å¿½ç•¥/TODO     # åªå¿½ç•¥æ ¹ç›®å½•ä¸‹çš„TODOæ–‡ä»¶ï¼Œå­ç›®å½•ä¸­çš„TODOæ–‡ä»¶ä¸å¿½ç•¥/target/ # åªå¿½ç•¥æ ¹ç›®å½•ä¸‹çš„targetç›®å½•ä¸­çš„å…¨éƒ¨æ–‡ä»¶target/  # å¿½ç•¥æ‰€æœ‰targetç›®å½•ä¸­çš„æ–‡ä»¶doc/*.txt # å¿½ç•¥æ–‡ä»¶å¦‚doc/notes.txtï¼Œä½†æ˜¯æ–‡ä»¶å¦‚doc/server/arch.txtä¸å¿½ç•¥

pushä¹‹åæ·»åŠ gitignoregitignoreåªèƒ½ä½œç”¨äº Untracked Filesï¼Œå¦‚æœæŸäº›æ–‡ä»¶ï¼ˆaddå’Œcommitè¿‡çš„æ–‡ä»¶ï¼‰å·²ç»è¢«çº³å…¥äº†ç‰ˆæœ¬ç®¡ç†ä¸­ï¼Œåˆ™ä¿®æ”¹gitignoreæ˜¯æ— æ•ˆçš„ã€‚è§£å†³æ–¹æ³•å°±æ˜¯å…ˆæŠŠæœ¬åœ°ç¼“å­˜åˆ é™¤ï¼ˆæ”¹å˜æˆUntrackedçŠ¶æ€ï¼‰ï¼Œç„¶åå†æäº¤ã€‚
git pullgit rm -r --cached .git add .git commit -m &#x27;update .gitignore&#x27;git push

å¦‚æœæ˜¯å•ä¸ªæ–‡ä»¶éœ€è¦Untrackï¼Œgit rm -r --cached .å»ºè®®æ”¹æˆgit rm -r --cached path/filenameã€‚
æ·»åŠ gitignoreåpullé”™è¯¯pushä¹‹åæ·»åŠ äº†gitignoreï¼Œä¹Ÿå°±æ˜¯ä¸€éƒ¨åˆ†çš„Tracked Filesï¼Œç°åœ¨ä¸å†Trackã€‚è¿™æ—¶ï¼Œå…¶ä»–ç”¨æˆ·åœ¨pullä»£ç çš„æ—¶å€™ï¼Œä¼šå‡ºç°é”™è¯¯ï¼šâ€œThe following untracked working tree files would be overwritten by mergeâ€
è§£å†³åŠæ³•ï¼š
git reset --hard HEAD    git clean -f -d    git pull

è‡ªåŠ¨ç”Ÿæˆgitignore1ã€è®¿é—®ç½‘å€ï¼šgitignore.io
2ã€è¾“å…¥æ“ä½œç³»ç»Ÿã€IDEã€ç¼–ç¨‹è¯­è¨€ç­‰ï¼Œå°±èƒ½è‡ªåŠ¨ç”Ÿæˆé€šç”¨çš„gitignoreæ–‡ä»¶ã€‚
3ã€æ ¹æ®è‡ªå·±çš„å®é™…éœ€è¦ï¼Œå¢åˆ ä¸€äº›é…ç½®ã€‚
ä¸€ä¸ªDemo### macOS #### General.DS_Store.AppleDouble.LSOverride# Thumbnails._*# Files that might appear in the root of a volume.DocumentRevisions-V100.fseventsd.Spotlight-V100.TemporaryItems.Trashes.VolumeIcon.icns.com.apple.timemachine.donotpresent# Directories potentially created on remote AFP share.AppleDB.AppleDesktopNetwork Trash FolderTemporary Items.apdisk### End of macOS ###### Intellij #### Covers JetBrains IDEs: IntelliJ, RubyMine, PhpStorm, AppCode, PyCharm, CLion, Android Studio, WebStorm and Rider# Reference: https://intellij-support.jetbrains.com/hc/en-us/articles/206544839# General.idea/# mpeltonen/sbt-idea plugin.idea_modules/# File-based project format*.iws# IntelliJout/# CMakecmake-build-*/# Crashlytics plugin (for Android Studio and IntelliJ)com_crashlytics_export_strings.xmlcrashlytics.propertiescrashlytics-build.propertiesfabric.properties### End of Intellij ###

ä¹¦ç­¾A collection of useful .gitignore templates
Githubä½¿ç”¨.gitignoreæ–‡ä»¶å¿½ç•¥ä¸å¿…è¦ä¸Šä¼ çš„æ–‡ä»¶
Gitå¿½ç•¥è§„åˆ™
å¿½ç•¥ç‰¹æ®Šæ–‡ä»¶
è§£å†³Gitåœ¨æ·»åŠ ignoreæ–‡ä»¶ä¹‹å‰å°±æäº¤äº†é¡¹ç›®æ— æ³•å†è¿‡æ»¤é—®é¢˜
]]></content>
      <categories>
        <category>engineering</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>gitignore</tag>
      </tags>
  </entry>
  <entry>
    <title>git tagä½¿ç”¨è¯´æ˜</title>
    <url>/dev-git-tag/</url>
    <content><![CDATA[æ‰“æ ‡ç­¾æ‰€è°“æ‰“æ ‡ç­¾ï¼Œå°±æ˜¯å¯¹æŸä¸€æ—¶é—´ç‚¹ä¸Šçš„ç‰ˆæœ¬æ‰“ä¸Šæ ‡ç­¾ã€‚Gitä½¿ç”¨çš„æ ‡ç­¾æœ‰ä¸¤ç§ç±»å‹ï¼šè½»é‡çº§çš„ï¼ˆlightweightï¼‰å’Œå«é™„æ³¨çš„ï¼ˆannotatedï¼‰ã€‚è½»é‡çº§æ ‡ç­¾å°±åƒæ˜¯ä¸ªä¸ä¼šå˜åŒ–çš„åˆ†æ”¯ï¼Œå®é™…ä¸Šå®ƒå°±æ˜¯ä¸ªæŒ‡å‘ç‰¹å®šæäº¤å¯¹è±¡çš„å¼•ç”¨ã€‚è€Œå«é™„æ³¨æ ‡ç­¾ï¼Œå®é™…ä¸Šæ˜¯å­˜å‚¨åœ¨ä»“åº“ä¸­çš„ä¸€ä¸ªç‹¬ç«‹å¯¹è±¡ï¼Œå®ƒæœ‰è‡ªèº«çš„æ ¡éªŒå’Œä¿¡æ¯ï¼ŒåŒ…å«ç€æ ‡ç­¾çš„åå­—ï¼Œç”µå­é‚®ä»¶åœ°å€å’Œæ—¥æœŸï¼Œä»¥åŠæ ‡ç­¾è¯´æ˜ï¼Œæ ‡ç­¾æœ¬èº«ä¹Ÿå…è®¸ä½¿ç”¨ GNU Privacy Guard (GPG) æ¥ç­¾ç½²æˆ–éªŒè¯ã€‚ä¸€èˆ¬æˆ‘ä»¬éƒ½å»ºè®®ä½¿ç”¨å«é™„æ³¨å‹çš„æ ‡ç­¾ï¼Œä»¥ä¾¿ä¿ç•™ç›¸å…³ä¿¡æ¯ï¼›å½“ç„¶ï¼Œå¦‚æœåªæ˜¯ä¸´æ—¶æ€§åŠ æ³¨æ ‡ç­¾ï¼Œæˆ–è€…ä¸éœ€è¦æ—æ³¨é¢å¤–ä¿¡æ¯ï¼Œç”¨è½»é‡çº§æ ‡ç­¾ä¹Ÿæ²¡é—®é¢˜ã€‚



è½»é‡æ ‡ç­¾ã€‚åˆ›å»ºè½»é‡æ ‡ç­¾ä¸éœ€è¦ä¼ é€’å‚æ•°ï¼Œç›´æ¥æŒ‡å®šæ ‡ç­¾åç§°å³å¯ã€‚git tag v1.0.0_light

é™„æ³¨æ ‡ç­¾ã€‚å‚æ•°aå³annotatedçš„ç¼©å†™ï¼ŒæŒ‡å®šæ ‡ç­¾åã€‚å‚æ•°mæŒ‡å®šæ ‡ç­¾è¯´æ˜ï¼Œè¯´æ˜ä¿¡æ¯ä¼šä¿å­˜åœ¨æ ‡ç­¾å¯¹è±¡ä¸­ã€‚git tag -a v1.0.0 -m &quot;v1.0.0&quot;


æŸ¥çœ‹æœ¬åœ°æ ‡ç­¾git taggit tag -l &#39;v1.0.*&#39;git show v1.0.0
åˆ é™¤æœ¬åœ°æ ‡ç­¾git tag -d &lt;tagname&gt;
åˆ‡æ¢åˆ°æ ‡ç­¾git checkout &lt;tagname&gt;
ç»™æŒ‡å®šçš„commitæ‰“æ ‡ç­¾git logï¼Œæˆ‘ä»¬çœ‹åˆ°çš„commitæ˜¯ä¸€é•¿ä¸²åå…­è¿›åˆ¶æ•°ï¼Œæ¯”å¦‚759f084c094a2e3930224b2dad389349e36ab083ï¼Œæˆ‘ä»¬è¦ç”¨åˆ°è‡³å°‘å‰4ä½ã€‚
git tag -a v0.0.0 759f -m &quot;v0.0.0&quot;ï¼Œè€Œä¸”ï¼Œæ¯ä¸ªcommitå¯ä»¥æ‰“å¤šä¸ªæ ‡ç­¾ã€‚
æ·»åŠ æœåŠ¡å™¨ç«¯æ ‡ç­¾é»˜è®¤æƒ…å†µä¸‹ï¼Œgit push å¹¶ä¸ä¼šæŠŠæ ‡ç­¾ä¼ é€åˆ°è¿œç«¯æœåŠ¡å™¨ä¸Šï¼Œåªæœ‰é€šè¿‡æ˜¾å¼å‘½ä»¤æ‰èƒ½åˆ†äº«æ ‡ç­¾åˆ°è¿œç«¯ä»“åº“ã€‚git push origin &lt;tagname&gt;git push origin --tag
åˆ é™¤æœåŠ¡å™¨ç«¯æ ‡ç­¾æ–¹æ³•ä¸€ï¼šgit push --delete origin tag &lt;tagname&gt;
æ–¹æ³•äºŒï¼šgit tag -d &lt;tagname&gt;git push origin :refs/tags/&lt;tagname&gt;
å®Œæ•´ä¾‹å­æ‰“æ ‡ç­¾çš„æ“ä½œå‘ç”Ÿåœ¨æˆ‘ä»¬commitä¿®æ”¹åˆ°æœ¬åœ°ä»“åº“ä¹‹åã€‚git add .git commit -m &quot;fixed some bugs&quot;git tag -a 0.1.3 -m &quot;Release version 0.1.3&quot;
åˆ†äº«æäº¤æ ‡ç­¾åˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šgit pushgit push --tagsâ€“tagså‚æ•°è¡¨ç¤ºæäº¤æ‰€æœ‰tagè‡³æœåŠ¡å™¨ç«¯ï¼Œæ™®é€šçš„git pushæ“ä½œä¸ä¼šæ¨é€æ ‡ç­¾åˆ°æœåŠ¡å™¨ç«¯ã€‚
åˆ é™¤æœ¬åœ°æ ‡ç­¾git tag -d 0.1.3
åˆ é™¤è¿œç«¯æœåŠ¡å™¨æ ‡ç­¾git push origin :refs/tags/0.1.3
å‚è€ƒæ–‡æ¡£Git åŸºç¡€ - æ‰“æ ‡ç­¾http://git-scm.com/book/zh/v1/Git-%E5%9F%BA%E7%A1%80-%E6%89%93%E6%A0%87%E7%AD%BE
gitå‘½ä»¤ä¹‹git tag ç»™å½“å‰åˆ†æ”¯æ‰“æ ‡ç­¾http://blog.csdn.net/wangjia55/article/details/8793577
git tagç®€ä»‹http://blog.csdn.net/hudashi/article/details/7664468
tagæ‰“æ ‡ç­¾http://blog.csdn.net/wh_19910525/article/details/7470850
git tagæ“ä½œæ•™ç¨‹http://blog.csdn.net/waterforest_pang/article/details/9762863
]]></content>
      <categories>
        <category>engineering</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>githubä¸‹è½½åŠ é€Ÿ</title>
    <url>/dev-github-download-speedup/</url>
    <content><![CDATA[æ›¿æ¢åŠ é€Ÿç½‘å€1ã€github.com æ›¿æ¢ä¸º hub.fastgit.org2ã€raw.githubusercontent.com æ›¿æ¢ä¸º raw.staticdn.net
ä»¥macoså®‰è£…brewä¸ºä¾‹ï¼š
curl -L https://raw.staticdn.net/Homebrew/install/HEAD/install.sh -o brew.shsed -i &#x27;s#https://github.com/#https://hub.fastgit.org/#g&#x27; brew.shsh brew.sh



ä½¿ç”¨giteeåŠ é€Ÿä½¿ç”¨giteeå¯¼å…¥githubä¸Šçš„é¡¹ç›®ï¼Œç„¶åä»giteeä¸‹è½½ã€‚
ä»¥ä¸‹è½½kubernetesé¡¹ç›®ä¸ºä¾‹ï¼šç™»å½•gitee-&gt; æ–°å»ºä»“åº“-&gt; ç‚¹å‡»å¯¼å…¥-&gt; è¾“å…¥githubä¸Škubernetes Gitä»“åº“URLï¼Œhttps://github.com/kubernetes/kubernetes-&gt; è¾“å…¥ä»“åº“åç§°ï¼Œkubernetes-&gt; å¯¼å…¥-&gt; ä»giteeä¸‹è½½kubernetesï¼Œgit clone https://gitee.com/voidking/kubernetes
ä½¿ç”¨é•œåƒç«™åŠ é€Ÿgithub.comåŸŸåæ›¿æ¢ä¸ºgitcode.net/mirrors
ä¾‹å¦‚ï¼šæºç«™ä¸º https://github.com/kubernetes/kuberneteså¯¹åº”é•œåƒç«™ https://gitcode.net/mirrors/kubernetes/kubernetes
ç§‘å­¦ä¸Šç½‘ç»ˆæè§£å†³åŠæ³•ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>Gitå®ç”¨å‘½ä»¤</title>
    <url>/dev-git-command/</url>
    <content><![CDATA[Gitç®€ä»‹
Git is a free and open source distributed version control system designed to handle everything from small to very large projects with speed and efficiency.

Gitæ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æºåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ—¨åœ¨å¿«é€Ÿé«˜æ•ˆåœ°ç®¡ç†é¡¹ç›®çš„æ‰€æœ‰æ–‡ä»¶ã€‚Gitä¸­çš„é¡¹ç›®è¢«ç§°ä¸ºä»“åº“(repository)ï¼Œæˆ–è€…æ˜¯ä»£ç åº“ã€‚
å­¦ä¹ å·¥ä½œä¸­ï¼Œè¶Šæ¥è¶Šä¹ æƒ¯ä½¿ç”¨Gitï¼Œæœ¬æ–‡è®°å½•ä¸€ä¸‹å¸¸ç”¨çš„Gitå‘½ä»¤ï¼Œæ–¹ä¾¿ä»¥åæŸ¥é˜…ã€‚å‚è€ƒæ–‡æ¡£ï¼š

Git - Documentation
é˜®ä¸€å³° Git æ•™ç¨‹
å¸¸ç”¨ Git å‘½ä»¤æ¸…å•
Gitè¿œç¨‹æ“ä½œè¯¦è§£



åˆå§‹é…ç½®ç”¨æˆ·åå’Œé‚®ç®±1ã€å…¨å±€é…ç½®
git config --global --listgit config --global user.name &quot;voidking&quot;git config --global user.email &quot;voidking@qq.com&quot;git config --global core.quotepath false # git statusçœ‹åˆ°çš„ä¸­æ–‡æ–‡ä»¶åï¼Œä¸è¦è½¬ä¹‰

2ã€é’ˆå¯¹å•ç‹¬é¡¹ç›®é…ç½®
git config --listgit config user.name &quot;haojin&quot;git config user.email &quot;voidking@vip.qq.com&quot;
æäº¤çš„æ—¶å€™ï¼Œå¦‚æœé¡¹ç›®è‡ªèº«æ²¡æœ‰é…ç½®ä¿¡æ¯å°±ä¼šä½¿ç”¨å…¨å±€é…ç½®ï¼Œæœ‰é…ç½®å°±ä¼šä½¿ç”¨å•ç‹¬çš„é…ç½®ä¿¡æ¯ã€‚
å…å¯†ä¸Šä¼ ä¸‹è½½æœ¬èŠ‚ä»¥githubä¸ºä¾‹ï¼Œgitlabçš„é…ç½®æ–¹æ³•ç±»ä¼¼ã€‚
ä½¿ç”¨sshå¯†é’¥1ã€ç”Ÿæˆsshå¯†é’¥
ssh-keygen -t rsa -C &quot;voidking@qq.com&quot;
æŒ‰3ä¸ªå›è½¦ï¼Œå¯†ç ä¸ºç©ºã€‚
åœ¨C:\Users\Administrator\.sshä¸‹ï¼Œå¾—åˆ°ä¸¤ä¸ªæ–‡ä»¶id_rsaå’Œid_rsa.pubã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‘½ä»¤ä¸­çš„-Cå‚æ•°ï¼Œåé¢è·Ÿçš„å†…å®¹æ˜¯æ³¨é‡Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå†…å®¹éšæ„ï¼Œä¸githubå®Œå…¨æ— å…³ã€‚
2ã€åœ¨githubä¸Šæ·»åŠ sshå…¬é’¥æ‰“å¼€id_rsa.pubï¼Œå¤åˆ¶å…¨æ–‡ã€‚è®¿é—®githubçš„ settings-ssh é¡µé¢ï¼ŒNew SSH keyï¼Œç²˜è´´è¿›å»ã€‚
3ã€æµ‹è¯•
ssh git@github.com

æç¤ºï¼š
The authenticity of host &#x27;github.com (192.30.252.128)&#x27; can&#x27;t be established.RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.Are you sure you want to continue connecting (yes/no)? yesWarning: Permanently added &#x27;github.com,192.30.252.128&#x27; (RSA) to the list of known hosts.Hi voidking! You&#x27;ve successfully authenticated, but GitHub does not provide shell access.Connection to github.com closed.

4ã€æŒ‡å®šsshç§é’¥æ–¹æ³•ä¸€ï¼šä¿®æ”¹ ~/.ssh/config æ–‡ä»¶ï¼Œæ·»åŠ ï¼š
host github.com  HostName github.com  IdentityFile ~/.ssh/id_rsa_github  User git

æ–¹æ³•äºŒï¼šä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œæ¯”å¦‚ï¼š
GIT_SSH_COMMAND=&quot;ssh -i ~/.ssh/id_rsa_github -F /dev/null&quot; git clone https://github.com/voidking/wecms.git

ä½¿ç”¨ access token1ã€ç”Ÿæˆaccess tokenè®¿é—®githubçš„ Personal access tokens é¡µé¢ï¼ŒGenerate new tokenã€‚Noteè¾“å…¥ voidking-pc ï¼ŒSelect scopeé€‰æ‹©repoï¼Œç„¶åç‚¹å‡»Generate tokenã€‚ç”Ÿæˆäº†ä¸€ä¸ªtokenï¼Œä¿å­˜å®ƒã€‚
2ã€å¼€å¯å¯†ç è®°å½•
git config --global credential.helper store

ç”¨æˆ·å®¶ç›®å½•ä¸‹çš„ .gitconfig æ–‡ä»¶æœ«å°¾ä¼šæ·»åŠ ï¼š
[credential]    helper = store

3ã€è®°ä½å¯†ç å†æ¬¡ä½¿ç”¨git pullæˆ–è€…git pushï¼Œç³»ç»Ÿä¼šæç¤ºè¾“å…¥gitç”¨æˆ·åå’Œå¯†ç ï¼Œè¿™é‡Œçš„å¯†ç è¾“å…¥access tokenå³å¯ï¼Œä¸è¦ä½¿ç”¨çœŸå®å¯†ç ã€‚ç³»ç»Ÿä¼šè®°ä½ç”¨æˆ·çš„access tokenï¼Œå­˜å‚¨åœ¨ç”¨æˆ·å®¶ç›®å½•ä¸‹çš„ .git-credentials æ–‡ä»¶ä¸­ã€‚ä¹‹åå°±ä¸å†éœ€è¦è¾“å…¥gitå¯†ç äº†ã€‚
ä¿®æ”¹ access tokenå¦‚æœaccess tokenè¿‡æœŸéœ€è¦æ›¿æ¢ï¼Œé‚£ä¹ˆéœ€è¦æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š1ã€æ¸…é™¤å½“å‰token
git credential rejectprotocol=httpshost=github.com

2ã€ä½¿ç”¨æ–°tokenå†æ¬¡ä½¿ç”¨git pullæˆ–è€…git pushï¼Œç³»ç»Ÿä¼šæç¤ºè¾“å…¥gitç”¨æˆ·åå’Œå¯†ç ï¼Œè¿™é‡Œçš„å¯†ç è¾“å…¥access tokenå³å¯ã€‚
æˆ–è€…ï¼Œä½¿ç”¨å‘½ä»¤è®¾ç½®æ–°tokenï¼ˆä¸å»ºè®®ï¼Œmacosä¸Šç»å°è¯•æ— æ•ˆï¼‰ã€‚
git credential fillprotocol=httpshost=github.com
è¿™æ—¶ Git ä¼šæç¤ºè¾“å…¥æ–°çš„å¯†ç ã€‚è¾“å…¥åä¿å­˜å³å¯ã€‚
ä½¿ç”¨ä»£ç†å¦‚æœå…‹éš†é¡¹ç›®ç‰¹åˆ«æ…¢ï¼Œè‡ªå·±åˆæœ‰ç§‘å­¦ä¸Šç½‘çš„ssrï¼Œé‚£ä¹ˆå¯ä»¥å¼€å¯ä»£ç†ã€‚
git config --global http.proxy &#x27;socks5://127.0.0.1:1080&#x27; git config --global https.proxy &#x27;socks5://127.0.0.1:1080&#x27;

å…³é—­ä»£ç†ï¼š
git config --global --unset http.proxygit config --global --unset https.proxy

cloneä»£ç # æ™®é€šå…‹éš†git clone https://github.com/voidking/voidking.git# å…‹éš†å¹¶é‡å‘½åä¸ºvkgit clone https://github.com/voidking/voidking.git vk# ä½¿ç”¨access tokenå…‹éš†é¡¹ç›®git clone https://&lt;gh_token&gt;@github.com/voidking/voidking.git

PSï¼šä¸‹è½½å¤±è´¥é—®é¢˜è§£å†³ SSL certificate problem
git config --global http.sslVerify false

pullä»£ç pullç›¸å…³é…ç½®.git/configæ–‡ä»¶é‡Œï¼Œé…ç½®äº†remoteå’Œbranchï¼Œä»¥ä¸‹ä¸ºä¾‹ã€‚
[core]    repositoryformatversion = 0    filemode = false    bare = false    logallrefupdates = true    symlinks = false    ignorecase = true[remote &quot;origin&quot;]    url = https://github.com/voidking/voidking.git    fetch = +refs/heads/*:refs/remotes/origin/*[branch &quot;master&quot;]    remote = origin    merge = refs/heads/master
æ‹‰å–é¡¹ç›®çš„æ—¶å€™ï¼Œä¼šæ ¹æ®è¿™ä¸ªé…ç½®æ¥æ‹‰å–ã€‚
pullç›¸å…³å‘½ä»¤# æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯è¿½è¸ªçš„è¿œç¨‹åˆ†æ”¯# ä¸€ä¸ªæœ¬åœ°åˆ†æ”¯å¯ä»¥è¿½è¸ªå¤šä¸ªè¿œç¨‹åˆ†æ”¯git branch -vv# æ ¼å¼è¯´æ˜git pull &lt;è¿œç¨‹ä»“åº“å&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt;:&lt;æœ¬åœ°åˆ†æ”¯å&gt;# æ‹‰å–å½“å‰åˆ†æ”¯è¿½è¸ªçš„å”¯ä¸€è¿œç¨‹åˆ†æ”¯git pull# æ‹‰å–å½“å‰åˆ†æ”¯è¿½è¸ªçš„origin/masteråˆ†æ”¯git pull origin mastergit pull origin# æ‹‰å–remote originçš„nextåˆ†æ”¯ï¼Œä¸æœ¬åœ°masteråˆå¹¶git pull origin next:master# æ‹‰å–originä¸»æœºçš„nextåˆ†æ”¯ï¼Œä¸å½“å‰åˆ†æ”¯åˆå¹¶git pull origin next

è§£å†³å†²çªé—®é¢˜æè¿°ï¼šgit pull ä¹‹åï¼Œå‡ºç°å†²çªã€‚å†²çªæ–‡ä»¶ä¸­ï¼ŒåŒ…å«ï¼š
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEADxxx=======yyy&gt;&gt;&gt;&gt;&gt;&gt;&gt; f406c5e398760c7d9116c8af31ea5748bd344abe
å…¶ä¸­ï¼Œ&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD å’Œ ======= ä¸­é—´çš„æ˜¯è‡ªå·±çš„ä»£ç ï¼›======= å’Œ &gt;&gt;&gt;&gt;&gt;&gt;&gt; f406c5e398760c7d9116c8af31ea5748bd344abe ä¸­é—´çš„æ˜¯å…¶ä»–äººä¿®æ”¹çš„ä»£ç ã€‚
è§£å†³å†²çªåŠæ³•ï¼šç¡®å®šä¿ç•™å“ªä¸€éƒ¨åˆ†ä»£ç ï¼Œç„¶ååˆ é™¤æ ‡å¿— &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD ï¼Œ=======  ï¼Œ&gt;&gt;&gt;&gt;&gt;&gt;&gt; f406c5e398760c7d9116c8af31ea5748bd344abe
è¯¦æƒ…å¯ä»¥å‚è€ƒã€Šgit branchã€‹ä¸­çš„ä»£ç åˆå¹¶éƒ¨åˆ†ï¼ŒåŸç†æ˜¯ä¸€æ ·çš„ã€‚
åˆ†æ”¯æ“ä½œ1ã€æŸ¥çœ‹åˆ†æ”¯
git branch -a

2ã€åˆ‡æ¢åˆ†æ”¯å’Œæ–°å»ºåˆ†æ”¯
# åˆ‡æ¢è¿œç¨‹åˆ†æ”¯git checkout origin/branch_name# æ–°å»ºä¸å½“å‰åˆ†æ”¯ç›¸åŒçš„åˆ†æ”¯git checkout -b new_branch# æ–°å»ºä¸è¿œç¨‹åˆ†æ”¯ç›¸åŒçš„åˆ†æ”¯git checkout -b new_branch origin/branch_name

commitä»£ç å•è¡Œcommitgit add .git commit -m &quot;something&quot;

å¤šè¡Œcommitgit add .git commit -m &quot;dquote&gt; &lt;ç±»å‹&gt;[å¯é€‰çš„ä½œç”¨åŸŸ]: &lt;æè¿°&gt;dquote&gt;dquote&gt; [å¯é€‰çš„æ­£æ–‡]dquote&gt;dquote&gt; [å¯é€‰çš„è„šæ³¨]dquote&gt; &quot;

æŸ¥çœ‹commitè®°å½•1ã€æœ€å¸¸ç”¨æŸ¥çœ‹commitè®°å½•
git log
åªå¯ä»¥æŸ¥çœ‹åˆ°å½“å‰åˆ†æ”¯çš„commitæ—¥å¿—ï¼Œè€Œä¸”ä¸èƒ½æŸ¥çœ‹å·²ç»åˆ é™¤äº†çš„commitæ“ä½œã€‚
2ã€æŸ¥çœ‹å•ä¸ªæ–‡ä»¶commitè®°å½•
git log filename

3ã€æŸ¥çœ‹å…¨å±€æ—¥å¿—
git refloggit log -g
å¯ä»¥æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯çš„æ‰€æœ‰æ“ä½œè®°å½•ï¼ŒåŒ…æ‹¬resetæ“ä½œã€checkoutæ“ä½œã€å·²ç»åˆ é™¤äº†çš„commitæ“ä½œç­‰ç­‰ã€‚
4ã€æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯çš„commit
git log --graph --pretty=oneline --abbrev-commit

æŸ¥çœ‹å˜æ›´commitä¹‹å‰æ‰§è¡Œcommitä¹‹å‰ï¼ŒæŸ¥çœ‹ä¿®æ”¹äº†å“ªäº›æ–‡ä»¶ã€‚
git status

commitä¹‹åæ‰§è¡Œcommitä¹‹åï¼Œè·å–æœ€è¿‘ä¸€æ¬¡ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨
git diff --name-only HEAD~ HEAD

æŸ¥çœ‹ä¸¤æ¬¡commitä¹‹é—´ä¿®æ”¹çš„æ–‡ä»¶
git diff --name-only &lt;commit-1&gt; &lt;commit-2&gt;

pushä»£ç pushåˆ†æ”¯pushå‘½ä»¤æ ¼å¼ï¼š
git push &lt;è¿œç¨‹ä»“åº“å&gt; &lt;æœ¬åœ°åˆ†æ”¯å&gt;:&lt;è¿œç¨‹åˆ†æ”¯å&gt;

ä¸Šä¼ ä»£ç åˆ°å”¯ä¸€è¿œç¨‹è¿½è¸ªåˆ†æ”¯
git push

ä¸Šä¼ åˆ°æŒ‡å®šè¿œç¨‹è¿½è¸ªåˆ†æ”¯
git push origin HEAD:branch_name

åŒæ—¶pushå¤šä¸ªgitä»“åº“1ã€ç¼–è¾‘ .git/configï¼Œæ·»åŠ 
[remote &quot;all&quot;]    url = https://github.com/voidking/hexo-backup    url = https://gitee.com/voidking/hexo-backup

2ã€pushä»£ç 
git push all

pushåˆ°å…¶ä»–gitä»“åº“éœ€æ±‚ï¼šå·²æœ‰ä»“åº“voidkingï¼ŒåŒ…å«å¤šä¸ªåˆ†æ”¯ã€‚ç°åœ¨æƒ³è¦æŠŠè¯¥ä»“åº“æ ¹æ®ä¸åŒçš„åˆ†æ”¯æ‹†åˆ†æˆå¤šä¸ªé¡¹ç›®ï¼Œäºæ˜¯åˆ›å»ºé¡¹ç›®voidkingAå’ŒvoidkingBã€‚æ¥ä¸‹æ¥ï¼Œè¯¥æ€ä¹ˆæŠŠvoidkingçš„ä¸åŒåˆ†æ”¯ï¼Œpushåˆ°voidkingAå’ŒvoidkingBå‘¢ï¼Ÿ
cd voidkinggit checkout -b voidkingA origin/branchAgit push --force --quiet &quot;https://voidking:xxxxxx@github.com/voidking/voidkingA&quot; voidkingA:maingit checkout -b voidkingB origin/branchBgit push --force --quiet &quot;https://voidking:xxxxxx@github.com/voidking/voidkingB&quot; voidkingB:main

git push 403å…¬å¸ç”µè„‘ï¼ˆwin10ç³»ç»Ÿï¼‰ä»¥å‰æœ‰ä¸€ä¸ªç”¨æˆ·ï¼Œgithubè´¦å·æ˜¯haojinã€‚ç°åœ¨ç”µè„‘åˆ†é…ç»™æˆ‘ä½¿ç”¨ï¼Œä½†æ˜¯ï¼Œæˆ‘çš„githubè´¦å·æ˜¯voidkingï¼Œåœ¨æˆ‘git pushçš„æ—¶å€™æŠ¥é”™403ã€‚
$ git pushremote: Permission to voidking/hexo-back-up.git denied to haojin.fatal: unable to access &#x27;https://github.com/voidking/hexo-back-up.git/&#x27;: The requested URL returned error: 403
å“ªæ€•é‡ç½®äº†å…¨å±€è®¾ç½®çš„user.nameå’Œuser.emailï¼Œä¾ç„¶ä¼šæŠ¥é”™ã€‚åŸå› ï¼šwin10ç³»ç»Ÿè‡ªåŠ¨ä¿å­˜ç”¨æˆ·å‡­æ®ï¼Œgitpushçš„æ—¶å€™é»˜è®¤ä½¿ç”¨ä»¥å‰çš„ç”¨æˆ·å‡­æ®ã€‚è§£å†³åŠæ³•ï¼šWin+Xï¼Œæœç´¢ï¼Œæ§åˆ¶é¢æ¿ï¼Œç”¨æˆ·è´¦æˆ·ï¼Œå‡­æ®ç®¡ç†å™¨ï¼Œç®¡ç†Windowså‡­æ®ï¼Œæ™®é€šå‡­æ®ï¼Œåˆ é™¤githubçš„å‡­æ®å³å¯ã€‚
ç‰ˆæœ¬å›é€€ç‰ˆæœ¬å›é€€å¸¸ç”¨git resetå’Œgit revertå‘½ä»¤ï¼Œè¿™ä¸¤ä¸ªå‘½ä»¤éƒ½æ˜¯ä½œç”¨äºå½“å‰åˆ†æ”¯ï¼ˆHEADæ‰€åœ¨çš„åˆ†æ”¯ï¼‰ã€‚git reset æ˜¯æŠŠHEADå‘åç§»åŠ¨äº†ä¸€ä¸‹ï¼Œè€Œgit revertæ˜¯HEADç»§ç»­å‰è¿›ï¼Œåªæ˜¯æ–°çš„commitçš„å†…å®¹å’Œè¦revertçš„å†…å®¹æ­£å¥½ç›¸åï¼Œèƒ½å¤ŸæŠµæ¶ˆè¦è¢«revertçš„å†…å®¹ã€‚
reset1ã€æ¯ä¸ªæ–‡ä»¶å•ç‹¬ç‰ˆæœ¬å›é€€
git statusgit loggit reset  1fe37e1bcbb894a1b594cf405ae31880cbaa6cd7 filepath/filenamegit checkout filepath/filename

2ã€å…¨éƒ¨æ–‡ä»¶ç‰ˆæœ¬å›é€€
git reset --hard 1fe37e1bcbb894a1b594cf405ae31880cbaa6cd7

3ã€è¿œç¨‹ä»“åº“å›é€€
git reset --hard 1fe37e1bcbb894a1b594cf405ae31880cbaa6cd7git push -f

4ã€å›é€€åå›é€€resetåï¼Œå›é€€ç‰ˆæœ¬ä¹‹åçš„commitæ“ä½œè®°å½•ï¼Œéƒ½è¢«åˆ é™¤æ‰äº†ã€‚å¦‚æœå›é€€è¿‡ä¹‹ååˆåæ‚”äº†ï¼Œé‚£ä¹ˆï¼Œéœ€è¦æŸ¥çœ‹å…¨å±€æ—¥å¿—ï¼Œç„¶åå†æ¬¡æ‰§è¡Œresetæ“ä½œã€‚
git refloggit reset a246dcd --hard

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç‰ˆæœ¬å›é€€ï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨git checkoutã€‚å‡è®¾å½“å‰åœ¨bugFixåˆ†æ”¯ï¼Œä½¿ç”¨git checkoutï¼Œç†è®ºä¸Šè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š
git refloggit checkout a246dcd

è¿™æ—¶ï¼Œè¾“å…¥git logï¼Œå‘ç°ç‰ˆæœ¬å®Œç¾å›é€€äº†ã€‚ä½†æ˜¯ï¼Œè¿™åªæ˜¯å‡è±¡ï¼Œè¾“å…¥git branch -aï¼Œå‘ç°HEADä»bugFixåˆ†æ”¯åˆ‡æ¢åˆ°äº†a246dcdé‚£ä¸ªcommitã€‚è€ŒbugFixåˆ†æ”¯ï¼Œæ²¡æœ‰è¿›è¡Œä»»ä½•æ”¹å˜ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨git checkoutè¿›è¡Œç‰ˆæœ¬å›é€€ï¼Œè€Œæ˜¯ä½¿ç”¨å®ƒè¿›è¡Œå†å²ç‰ˆæœ¬çš„æŸ¥çœ‹ã€‚
revert1ã€å…¨éƒ¨æ–‡ä»¶ç‰ˆæœ¬å›é€€
git revert cf000

2ã€è¿œç¨‹ä»“åº“å›é€€
git push origin HEAD:branch_name

å›é€€è¿‡ä¹‹ååˆåæ‚”äº†ï¼Œé‚£ä¹ˆï¼Œæ‰§è¡Œresetæ“ä½œå³å¯ã€‚
git loggit reset a246dcd --hard

git stashæœ¬åœ°æœ‰ä¿®æ”¹ï¼Œä½†æ˜¯æƒ³æ‹‰å–è¿œç«¯ä»“åº“ä¸Šçš„æœ€æ–°ä»£ç åˆ°æœ¬åœ°ã€‚
# ä¿å­˜stashgit stashgit stash save &quot;something&quot;# æ‹‰å–æœ€æ–°ä»£ç git pull# æŸ¥çœ‹stashgit stash list# å¼¹å‡ºä¹‹å‰çš„ä¿®æ”¹git stash pop# å¼¹å‡ºä¹‹å‰çš„ä¿®æ”¹ï¼ˆåªèƒ½æ¢å¤ä¸€æ¬¡ï¼‰git stash pop stash@&#123;num&#125;# å¼¹å‡ºä¹‹å‰çš„ä¿®æ”¹ï¼ˆå¯æ¢å¤å¤šæ¬¡ï¼‰git stash apply stash@&#123;num&#125;# åˆ é™¤stashgit stash drop stash@&#123;num&#125;# åˆ é™¤æ‰€æœ‰stashgit stash clear

ç»Ÿè®¡# ç»Ÿè®¡ä¸ªäººä»£ç é‡git log --author=&quot;voidking&quot; --pretty=tformat: --numstat | awk &#x27;&#123; add += $1; subs += $2; loc += $1 - $2 &#125; END &#123; printf &quot;added lines: %s, removed lines: %s, total lines: %s\n&quot;, add, subs, loc &#125;&#x27; -# ç»Ÿè®¡æ¯ä¸ªäººä»£ç é‡git log --format=&#x27;%aN&#x27; | sort -u | while read name; do echo -en &quot;$name\t&quot;; git log --author=&quot;$name&quot; --pretty=tformat: --numstat | awk &#x27;&#123; add += $1; subs += $2; loc += $1 - $2 &#125; END &#123; printf &quot;added lines: %s, removed lines: %s, total lines: %s\n&quot;, add, subs, loc &#125;&#x27; -; done# ç»Ÿè®¡æäº¤è€…å‰äº”git log --pretty=&#x27;%aN&#x27; | sort | uniq -c | sort -k1 -n -r | head -n 5# ç»Ÿè®¡æäº¤è€…æ•°é‡git log --pretty=&#x27;%aN&#x27; | sort -u | wc -l# ç»Ÿè®¡æäº¤æ•°git log --oneline | wc -l# æ·»åŠ æˆ–ä¿®æ”¹çš„ä»£ç è¡Œæ•°git log --stat|perl -ne &#x27;END &#123; print $c &#125; $c += $1 if /(\d+) insertions/&#x27;


]]></content>
      <categories>
        <category>engineering</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>è½¯ä»¶ç‰ˆæœ¬å·å‘½åè§„åˆ™</title>
    <url>/dev-software-version-name/</url>
    <content><![CDATA[è½¯ä»¶ç‰ˆæœ¬å·æœ‰æ²¡æœ‰ä»€ä¹ˆæ ‡å‡†ï¼Ÿé¡¹ç›®åœ¨å‘è¡Œæ—¶ï¼Œè‚¯å®šéœ€è¦ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œé‚£ä¹ˆè¿™ä¸ªç‰ˆæœ¬å·åº”è¯¥éµå¾ªä»€ä¹ˆæ ·çš„æ ‡å‡†å‘¢ï¼Ÿè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemantic Versioning semverï¼‰ç‰ˆæœ¬å·ï¼Œæ˜¯ä¸€ä¸ªåœ¨å¼€æºç¤¾åŒºä¸­å¹¿æ³›æ¥å—çš„æ ‡å‡†ï¼Œè¯¦æƒ…å‚è€ƒSemantic Versioning Specificationã€‚


SemVer çš„ç‰ˆæœ¬æ ¼å¼ç‰ˆæœ¬æ ¼å¼ï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·ï¼ˆMAJOR.MINOR.PATCHï¼‰ï¼Œç‰ˆæœ¬å·é€’å¢è§„åˆ™å¦‚ä¸‹ï¼š
ä¸»ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†ä¸å…¼å®¹çš„ API ä¿®æ”¹æ¬¡ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢ä¿®è®¢å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£
å…ˆè¡Œç‰ˆæœ¬å·åŠç‰ˆæœ¬ç¼–è¯‘ä¿¡æ¯å¯ä»¥åŠ åˆ°â€œä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·â€çš„åé¢ï¼Œä½œä¸ºå»¶ä¼¸ã€‚
è¡¥å……æ­¤å¤–ï¼Œç™¾åº¦ç»éªŒä¸­æœ‰ä¸€ç¯‡è½¯ä»¶ç‰ˆæœ¬å‘½åè§„èŒƒçš„æ–‡ç« ï¼Œå†™çš„ä¹Ÿå¾ˆä¸é”™ï¼Œæ‘˜å½•å¦‚ä¸‹ã€‚
è½¯ä»¶ç‰ˆæœ¬å·æœ‰å››éƒ¨åˆ†ç»„æˆï¼Œç¬¬ä¸€éƒ¨åˆ†ä¸ºä¸»ç‰ˆæœ¬å·ï¼Œç¬¬äºŒéƒ¨åˆ†ä¸ºæ¬¡ç‰ˆæœ¬å·ï¼Œç¬¬ä¸‰éƒ¨åˆ†ä¸ºä¿®è®¢ç‰ˆæœ¬å·ï¼Œç¬¬å››éƒ¨åˆ†ä¸ºæ—¥æœŸç‰ˆæœ¬å·åŠ å¸Œè…Šå­—æ¯ç‰ˆæœ¬å·ï¼Œå¸Œè…Šå­—æ¯ç‰ˆæœ¬å·å…±æœ‰äº”ç§ï¼Œåˆ†åˆ«ä¸ºbaseã€alphaã€beta ã€RC ã€ releaseã€‚
ç‰ˆæœ¬å·ä¿®æ”¹è§„åˆ™ï¼š

ä¸»ç‰ˆæœ¬å·ï¼šå½“åŠŸèƒ½æ¨¡å—æœ‰è¾ƒå¤§çš„å˜åŠ¨ï¼Œæ¯”å¦‚å¢åŠ æ¨¡å—æˆ–æ˜¯æ•´ä½“æ¶æ„å‘ç”Ÿå˜åŒ–ã€‚æ­¤ç‰ˆæœ¬å·ç”±é¡¹ç›®å†³å®šæ˜¯å¦ä¿®æ”¹ã€‚

æ¬¡ç‰ˆæœ¬å·ï¼šç›¸å¯¹äºä¸»ç‰ˆæœ¬å·è€Œè¨€ï¼Œæ¬¡ç‰ˆæœ¬å·çš„å‡çº§å¯¹åº”çš„åªæ˜¯å±€éƒ¨çš„å˜åŠ¨ï¼Œä½†è¯¥å±€éƒ¨çš„å˜åŠ¨é€ æˆç¨‹åºå’Œä»¥å‰ç‰ˆæœ¬ä¸èƒ½å…¼å®¹ï¼Œæˆ–è€…å¯¹è¯¥ç¨‹åºä»¥å‰çš„åä½œå…³ç³»äº§ç”Ÿäº†ç ´åï¼Œæˆ–è€…æ˜¯åŠŸèƒ½ä¸Šæœ‰å¤§çš„æ”¹è¿›æˆ–å¢å¼ºã€‚æ­¤ç‰ˆæœ¬å·ç”±é¡¹ç›®å†³å®šæ˜¯å¦ä¿®æ”¹ã€‚

ä¿®è®¢ç‰ˆæœ¬å·ï¼šä¸€èˆ¬æ˜¯Bugçš„ä¿®å¤æˆ–æ˜¯ä¸€äº›å°çš„å˜åŠ¨æˆ–æ˜¯ä¸€äº›åŠŸèƒ½çš„æ‰©å……ï¼Œè¦ç»å¸¸å‘å¸ƒä¿®è®¢ç‰ˆï¼Œä¿®å¤ä¸€ä¸ªä¸¥é‡ Bug å³å¯å‘å¸ƒä¸€ä¸ªä¿®è®¢ç‰ˆã€‚æ­¤ç‰ˆæœ¬å·ç”±é¡¹ç›®ç»ç†å†³å®šæ˜¯å¦ä¿®æ”¹ã€‚

æ—¥æœŸç‰ˆæœ¬å·ï¼šç”¨äºè®°å½•ä¿®æ”¹é¡¹ç›®çš„å½“å‰æ—¥æœŸï¼Œæ¯å¤©å¯¹é¡¹ç›®çš„ä¿®æ”¹éƒ½éœ€è¦æ›´æ”¹æ—¥æœŸç‰ˆæœ¬å·ã€‚æ­¤ç‰ˆæœ¬å·ç”±å¼€å‘äººå‘˜å†³å®šæ˜¯å¦ä¿®æ”¹ã€‚

å¸Œè…Šå­—æ¯ç‰ˆæœ¬å·ï¼šæ­¤ç‰ˆæœ¬å·ç”¨äºæ ‡æ³¨å½“å‰ç‰ˆæœ¬çš„è½¯ä»¶å¤„äºå“ªä¸ªå¼€å‘é˜¶æ®µï¼Œå½“è½¯ä»¶è¿›å…¥åˆ°å¦ä¸€ä¸ªé˜¶æ®µæ—¶éœ€è¦ä¿®æ”¹æ­¤ç‰ˆæœ¬å·ã€‚æ­¤ç‰ˆæœ¬å·ç”±é¡¹ç›®å†³å®šæ˜¯å¦ä¿®æ”¹ã€‚



ä¸Šä¸€çº§æœ‰å˜åŠ¨æ—¶ï¼Œä¸‹çº§è¦å½’é›¶ã€‚

è½¯ä»¶ç‰ˆæœ¬é˜¶æ®µè¯´æ˜ï¼š

Baseï¼šæ­¤ç‰ˆæœ¬è¡¨ç¤ºè¯¥è½¯ä»¶ä»…ä»…æ˜¯ä¸€ä¸ªå‡é¡µé¢é“¾æ¥ï¼Œé€šå¸¸åŒ…æ‹¬æ‰€æœ‰çš„åŠŸèƒ½å’Œé¡µé¢å¸ƒå±€ï¼Œä½†æ˜¯é¡µé¢ä¸­çš„åŠŸèƒ½éƒ½æ²¡æœ‰åšå®Œæ•´çš„å®ç°ï¼Œåªæ˜¯åšä¸ºæ•´ä½“ç½‘ç«™çš„ä¸€ä¸ªåŸºç¡€æ¶æ„ã€‚

Alphaï¼šè½¯ä»¶çš„åˆçº§ç‰ˆæœ¬ï¼Œè¡¨ç¤ºè¯¥è½¯ä»¶åœ¨æ­¤é˜¶æ®µä»¥å®ç°è½¯ä»¶åŠŸèƒ½ä¸ºä¸»ï¼Œé€šå¸¸åªåœ¨è½¯ä»¶å¼€å‘è€…å†…éƒ¨äº¤æµï¼Œä¸€èˆ¬è€Œè¨€ï¼Œè¯¥ç‰ˆæœ¬è½¯ä»¶çš„Bugè¾ƒå¤šï¼Œéœ€è¦ç»§ç»­ä¿®æ”¹ï¼Œæ˜¯æµ‹è¯•ç‰ˆæœ¬ã€‚æµ‹è¯•äººå‘˜æäº¤Bugç»å¼€å‘äººå‘˜ä¿®æ”¹ç¡®è®¤ä¹‹åï¼Œå‘å¸ƒåˆ°æµ‹è¯•ç½‘å€è®©æµ‹è¯•äººå‘˜æµ‹è¯•ï¼Œæ­¤æ—¶å¯å°†è½¯ä»¶ç‰ˆæœ¬æ ‡æ³¨ä¸ºalphaç‰ˆã€‚

Betaï¼šè¯¥ç‰ˆæœ¬ç›¸å¯¹äºAlphaç‰ˆå·²ç»æœ‰äº†å¾ˆå¤§çš„è¿›æ­¥ï¼Œæ¶ˆé™¤äº†ä¸¥é‡é”™è¯¯ï¼Œä½†è¿˜éœ€è¦ç»è¿‡å¤šæ¬¡æµ‹è¯•æ¥è¿›ä¸€æ­¥æ¶ˆé™¤ï¼Œæ­¤ç‰ˆæœ¬ä¸»è¦çš„ä¿®æ”¹å¯¹è±¡æ˜¯è½¯ä»¶çš„UIã€‚ä¿®æ”¹çš„Bugç»æµ‹è¯•äººå‘˜æµ‹è¯•ç¡®è®¤åå¯å‘å¸ƒåˆ°å¤–ç½‘ä¸Šï¼Œæ­¤æ—¶å¯å°†è½¯ä»¶ç‰ˆæœ¬æ ‡æ³¨ä¸º betaç‰ˆã€‚

RCï¼šè¯¥ç‰ˆæœ¬å·²ç»ç›¸å½“æˆç†Ÿäº†ï¼ŒåŸºæœ¬ä¸Šä¸å­˜åœ¨å¯¼è‡´é”™è¯¯çš„Bugï¼Œä¸å³å°†å‘è¡Œçš„æ­£å¼ç‰ˆæœ¬ç›¸å·®æ— å‡ ã€‚

Releaseï¼šè¯¥ç‰ˆæœ¬æ„å‘³â€œæœ€ç»ˆç‰ˆæœ¬â€ï¼Œåœ¨å‰é¢ç‰ˆæœ¬çš„ä¸€ç³»åˆ—æµ‹è¯•ç‰ˆä¹‹åï¼Œç»ˆå½’ä¼šæœ‰ä¸€ä¸ªæ­£å¼çš„ç‰ˆæœ¬ï¼Œæ˜¯æœ€ç»ˆäº¤ä»˜ç”¨æˆ·ä½¿ç”¨çš„ä¸€ä¸ªç‰ˆæœ¬ã€‚è¯¥ç‰ˆæœ¬æœ‰æ—¶ä¹Ÿç§°æ ‡å‡†ç‰ˆã€‚


]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>android</tag>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>Java APIæ¦‚è§ˆ</title>
    <url>/dev-java-api/</url>
    <content><![CDATA[å‰è¨€ä»Šå¤©ï¼Œåœ¨å¼€å‘Androidçš„æ—¶å€™ï¼Œå‘ç°è‡ªå·±å¯¹Androidç¼ºä¹å…¨å±€æŒæ§çš„æ„Ÿè§‰ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿæ¯”å¦‚ï¼Œè¦å®ç°çš„åŠŸèƒ½æ˜¯å¸§åŠ¨ç”»ï¼Œæˆ‘æ ¹æœ¬ä¸çŸ¥é“Androidæä¾›äº†ä¸€ä¸ªAnimationDrawableç±»ã€‚
æ˜¯å› ä¸ºJavaæ²¡å­¦å¥½ï¼Ÿä¸æ˜¯ï¼Œä½†æ˜¯Javaç¡®å®è¿˜æœ‰å¾ˆå¤§çš„è¿›æ­¥ç©ºé—´ã€‚å€Ÿæ­¤æœºä¼šï¼Œæ‹ä¸€æ‹Javaå„ä¸ªåŒ…å’Œç±»çš„ä½œç”¨ï¼


javajavaç±»åº“æ˜¯javaå‘å¸ƒä¹‹åˆå°±ç¡®å®šäº†çš„åŸºç¡€åº“ï¼Œæ˜¯æ ¸å¿ƒåŒ…ã€‚
appletæä¾›åˆ›å»º applet æ‰€å¿…éœ€çš„ç±»å’Œ applet ç”¨æ¥ä¸å…¶ applet ä¸Šä¸‹æ–‡é€šä¿¡çš„ç±»ã€‚ 
applet æ¡†æ¶åŒ…æ‹¬ä¸¤ç§å®ä½“ï¼šapplet å’Œ applet ä¸Šä¸‹æ–‡ã€‚applet æ˜¯ä¸€ç§å¯åµŒå…¥çš„çª—ä½“ï¼ˆå‚è§ Panel ç±»ï¼‰ï¼Œå®ƒå¸¦æœ‰å‡ ä¸ª applet ä¸Šä¸‹æ–‡ç”¨æ¥åˆå§‹åŒ–ã€å¯åŠ¨å’Œç»ˆæ­¢ applet çš„é¢å¤–æ–¹æ³•ã€‚ 
applet ä¸Šä¸‹æ–‡æ˜¯è´Ÿè´£åŠ è½½å’Œè¿è¡Œ applet çš„åº”ç”¨ç¨‹åºã€‚ä¾‹å¦‚ï¼Œapplet ä¸Šä¸‹æ–‡å¯èƒ½æ˜¯ Web æµè§ˆå™¨æˆ– applet å¼€å‘ç¯å¢ƒã€‚ 
awtåŒ…å«ç”¨äºåˆ›å»ºç”¨æˆ·ç•Œé¢å’Œç»˜åˆ¶å›¾å½¢å›¾åƒçš„æ‰€æœ‰ç±»ã€‚åœ¨ AWT æœ¯è¯­ä¸­ï¼Œè¯¸å¦‚æŒ‰é’®æˆ–æ»šåŠ¨æ¡ä¹‹ç±»çš„ç”¨æˆ·ç•Œé¢å¯¹è±¡ç§°ä¸ºç»„ä»¶ã€‚Component ç±»æ˜¯æ‰€æœ‰ AWT ç»„ä»¶çš„æ ¹ã€‚æœ‰å…³æ‰€æœ‰ AWT ç»„ä»¶çš„å…¬å…±å±æ€§çš„è¯¦ç»†æè¿°ï¼Œè¯·å‚è§ Componentã€‚ 
å½“ç”¨æˆ·ä¸ç»„ä»¶äº¤äº’æ—¶ï¼Œä¸€äº›ç»„ä»¶ä¼šæ¿€å‘äº‹ä»¶ã€‚AWTEvent ç±»åŠå…¶å­ç±»ç”¨äºè¡¨ç¤º AWT ç»„ä»¶èƒ½å¤Ÿæ¿€å‘çš„äº‹ä»¶ã€‚æœ‰å…³ AWT äº‹ä»¶æ¨¡å‹çš„æè¿°ï¼Œè¯·å‚è§ AWTEventã€‚ 
å®¹å™¨æ˜¯ä¸€ä¸ªå¯ä»¥åŒ…å«ç»„ä»¶å’Œå…¶ä»–å®¹å™¨çš„ç»„ä»¶ã€‚å®¹å™¨è¿˜å¯ä»¥å…·æœ‰å¸ƒå±€ç®¡ç†å™¨ï¼Œç”¨æ¥æ§åˆ¶å®¹å™¨ä¸­ç»„ä»¶çš„å¯è§†åŒ–å¸ƒå±€ã€‚AWT åŒ…å¸¦æœ‰å‡ ä¸ªå¸ƒå±€ç®¡ç†å™¨ç±»å’Œä¸€ä¸ªæ¥å£ï¼Œæ­¤æ¥å£å¯ç”¨äºæ„å»ºè‡ªå·±çš„å¸ƒå±€ç®¡ç†å™¨ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ Container å’Œ LayoutManagerã€‚
colordnddatatransfereventfontgeomimimageprintdoc-filesbeansåŒ…å«ä¸å¼€å‘ beans æœ‰å…³çš„ç±»ï¼Œå³åŸºäº JavaBeansâ„¢ æ¶æ„çš„ç»„ä»¶ã€‚å°‘æ•°ç±»å¯ç”± bean ä½¿ç”¨ï¼Œä¹Ÿèƒ½ä»¥åº”ç”¨ç¨‹åºçš„å½¢å¼è¿è¡Œã€‚ä¾‹å¦‚ï¼Œevent ç±»ç”±æ¿€å‘å±æ€§å’Œç¦æ­¢æ›´æ”¹äº‹ä»¶çš„ bean ä½¿ç”¨ï¼ˆå‚è§ PropertyChangeEventï¼‰ã€‚ä¸è¿‡ï¼Œæ­¤åŒ…ä¸­çš„å¤§å¤šæ•°ç±»ç”± bean ç¼–è¾‘å™¨ï¼ˆå³è‡ªå®šä¹‰ bean å¹¶å°†å…¶æ±‡é›†èµ·æ¥ä»¥åˆ›å»ºåº”ç”¨ç¨‹åºçš„å¼€å‘ç¯å¢ƒï¼‰ä½¿ç”¨ã€‚ç‰¹åˆ«è¦æŒ‡å‡ºçš„æ˜¯ï¼Œè¿™äº›ç±»å¸®åŠ© bean ç¼–è¾‘å™¨åˆ›å»ºç”¨æˆ·å¯ä»¥ç”¨æ¥è‡ªå®šä¹‰ bean çš„ç”¨æˆ·ç•Œé¢ã€‚ä¾‹å¦‚ï¼Œbean å¯èƒ½åŒ…å« bean ç¼–è¾‘å™¨ä¹Ÿè®¸ä¸çŸ¥é“å¦‚ä½•å¤„ç†çš„ç‰¹æ®Šç±»å‹çš„å±æ€§ã€‚é€šè¿‡ä½¿ç”¨ PropertyEditor æ¥å£ï¼Œbean å¼€å‘äººå‘˜å¯ä»¥ä¸ºæ­¤ç‰¹æ®Šç±»å‹æä¾›ä¸€ä¸ªç¼–è¾‘å™¨ã€‚ 
ä¸ºäº†æœ€å¤§é™åº¦åœ°å‡å°‘ bean ä½¿ç”¨çš„èµ„æºï¼Œåªåœ¨è¦ç¼–è¾‘ bean æ—¶åŠ è½½ bean ç¼–è¾‘å™¨ä½¿ç”¨çš„ç±»ã€‚å½“ bean ä»¥åº”ç”¨ç¨‹åºçš„å½¢å¼è¿è¡Œæ—¶ï¼Œä¸éœ€è¦è¿™äº›ç±»ï¼Œæ‰€ä»¥ä¸ç”¨åŠ è½½å®ƒä»¬ã€‚æ­¤ä¿¡æ¯åœ¨ç§°ä¸º bean-info çš„ç±»ä¸­ï¼ˆå‚è§ BeanInfoï¼‰ã€‚ 
é™¤éæ˜¾å¼å£°æ˜ï¼Œå¦åˆ™ null å€¼æˆ–ç©º String å¯¹äºæ­¤åŒ…ä¸­çš„æ–¹æ³•æ˜¯æ— æ•ˆå‚æ•°ã€‚å¦‚æœä½¿ç”¨è¿™äº›å‚æ•°ï¼Œå¯èƒ½å°†å¼•å‘å¼‚å¸¸ã€‚
beancontextioé€šè¿‡æ•°æ®æµã€åºåˆ—åŒ–å’Œæ–‡ä»¶ç³»ç»Ÿæä¾›ç³»ç»Ÿè¾“å…¥å’Œè¾“å‡ºã€‚ é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™å‘æ­¤åŒ…çš„ä»»ä½•ç±»æˆ–æ¥å£ä¸­çš„æ„é€ æ–¹æ³•æˆ–æ–¹æ³•ä¼ é€’ null å‚æ•°æ—¶ï¼Œéƒ½å°†æŠ›å‡º NullPointerExceptionã€‚ 
langæä¾›åˆ©ç”¨ Java ç¼–ç¨‹è¯­è¨€è¿›è¡Œç¨‹åºè®¾è®¡çš„åŸºç¡€ç±»ã€‚æœ€é‡è¦çš„ç±»æ˜¯ Objectï¼ˆå®ƒæ˜¯ç±»å±‚æ¬¡ç»“æ„çš„æ ¹ï¼‰å’Œ Classï¼ˆå®ƒçš„å®ä¾‹è¡¨ç¤ºæ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºä¸­çš„ç±»ï¼‰ã€‚ 
æŠŠåŸºæœ¬ç±»å‹çš„å€¼å½“æˆä¸€ä¸ªå¯¹è±¡æ¥è¡¨ç¤ºé€šå¸¸å¾ˆæœ‰å¿…è¦ã€‚åŒ…è£…å™¨ç±» Booleanã€Characterã€Integerã€Longã€Float å’Œ Double å°±æ˜¯ç”¨äºè¿™ä¸ªç›®çš„ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª Double ç±»å‹çš„å¯¹è±¡åŒ…å«äº†ä¸€ä¸ªç±»å‹ä¸º double çš„å­—æ®µï¼Œè¿™è¡¨ç¤ºå¦‚æœå¼•ç”¨æŸä¸ªå€¼ï¼Œåˆ™å¯ä»¥å°†è¯¥å€¼å­˜å‚¨åœ¨å¼•ç”¨ç±»å‹çš„å˜é‡ä¸­ã€‚è¿™äº›ç±»è¿˜æä¾›äº†å¤§é‡ç”¨äºè½¬æ¢åŸºå€¼çš„æ–¹æ³•ï¼Œå¹¶æ”¯æŒä¸€äº›æ ‡å‡†æ–¹æ³•ï¼Œæ¯”å¦‚ equals å’Œ hashCodeã€‚Void ç±»æ˜¯ä¸€ä¸ªéå®ä¾‹åŒ–çš„ç±»ï¼Œå®ƒä¿æŒä¸€ä¸ªå¯¹è¡¨ç¤ºåŸºæœ¬ç±»å‹ void çš„ Class å¯¹è±¡çš„å¼•ç”¨ã€‚ 
ç±» Math æä¾›äº†å¸¸ç”¨çš„æ•°å­¦å‡½æ•°ï¼Œæ¯”å¦‚æ­£å¼¦ã€ä½™å¼¦å’Œå¹³æ–¹æ ¹ã€‚ç±»ä¼¼åœ°ï¼Œç±» String å’Œ StringBuffer æä¾›äº†å¸¸ç”¨çš„å­—ç¬¦ä¸²æ“ä½œã€‚ 
ç±» ClassLoaderã€Processã€Runtimeã€SecurityManager å’Œ System æä¾›äº†ç®¡ç†ç±»çš„åŠ¨æ€åŠ è½½ã€å¤–éƒ¨è¿›ç¨‹åˆ›å»ºã€ä¸»æœºç¯å¢ƒæŸ¥è¯¢ï¼ˆæ¯”å¦‚æ—¶é—´ï¼‰å’Œå®‰å…¨ç­–ç•¥å®æ–½ç­‰â€œç³»ç»Ÿæ“ä½œâ€ã€‚ 
ç±» Throwable åŒ…å«äº†å¯èƒ½ç”± throw è¯­å¥æŠ›å‡ºçš„å¯¹è±¡(Â§14.16)ã€‚Throwable çš„å­ç±»è¡¨ç¤ºé”™è¯¯å’Œå¼‚å¸¸ã€‚
annotationinstrumentmanagementrefreflectmathæä¾›ç”¨äºæ‰§è¡Œä»»æ„ç²¾åº¦æ•´æ•°ç®—æ³• (BigInteger) å’Œä»»æ„ç²¾åº¦å°æ•°ç®—æ³• (BigDecimal) çš„ç±»ã€‚BigInteger é™¤æä¾›ä»»æ„ç²¾åº¦ä¹‹å¤–ï¼Œå®ƒç±»ä¼¼äº Java çš„åŸºæœ¬æ•´æ•°ç±»å‹ï¼Œå› æ­¤åœ¨ BigInteger ä¸Šæ‰§è¡Œçš„æ“ä½œä¸äº§ç”Ÿæº¢å‡ºï¼Œä¹Ÿä¸ä¼šä¸¢å¤±ç²¾åº¦ã€‚é™¤æ ‡å‡†ç®—æ³•æ“ä½œå¤–ï¼ŒBigInteger è¿˜æä¾›æ¨¡ (modular) ç®—æ³•ã€GCD è®¡ç®—ã€åŸºæœ¬ (primality) æµ‹è¯•ã€ç´ æ•°ç”Ÿæˆã€ä½å¤„ç†ä»¥åŠä¸€äº›å…¶ä»–æ“ä½œã€‚ BigDecimal æä¾›é€‚ç”¨äºè´§å¸è®¡ç®—å’Œç±»ä¼¼è®¡ç®—çš„ä»»æ„ç²¾åº¦çš„æœ‰ç¬¦å·åè¿›åˆ¶æ•°å­—ã€‚BigDecimal å…è®¸ç”¨æˆ·å¯¹èˆå…¥è¡Œä¸ºè¿›è¡Œå®Œå…¨æ§åˆ¶ï¼Œå¹¶å…è®¸ç”¨æˆ·é€‰æ‹©æ‰€æœ‰å…«ä¸ªèˆå…¥æ¨¡å¼ã€‚ 
netä¸ºå®ç°ç½‘ç»œåº”ç”¨ç¨‹åºæä¾›ç±»ã€‚ 
java.net åŒ…å¯ä»¥å¤§è‡´åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š
1ã€ä½çº§ APIï¼Œç”¨äºå¤„ç†ä»¥ä¸‹æŠ½è±¡ï¼š

åœ°å€ï¼Œä¹Ÿå°±æ˜¯ç½‘ç»œæ ‡è¯†ç¬¦ï¼Œå¦‚ IP åœ°å€ã€‚

å¥—æ¥å­—ï¼Œä¹Ÿå°±æ˜¯åŸºæœ¬åŒå‘æ•°æ®é€šä¿¡æœºåˆ¶ã€‚

æ¥å£ï¼Œç”¨äºæè¿°ç½‘ç»œæ¥å£ã€‚ 


2ã€é«˜çº§ APIï¼Œç”¨äºå¤„ç†ä»¥ä¸‹æŠ½è±¡ï¼š

URIï¼Œè¡¨ç¤ºç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ã€‚

URLï¼Œè¡¨ç¤ºç»Ÿä¸€èµ„æºå®šä½ç¬¦ã€‚

è¿æ¥ï¼Œè¡¨ç¤ºåˆ° URL æ‰€æŒ‡å‘èµ„æºçš„è¿æ¥ã€‚


nioå®šä¹‰ä½œä¸ºæ•°æ®å®¹å™¨çš„ç¼“å†²åŒºï¼Œå¹¶æä¾›å…¶ä»– NIO åŒ…çš„æ¦‚è¿°ã€‚ 
NIO API çš„é›†ä¸­æŠ½è±¡ä¸ºï¼š 

ç¼“å†²åŒºï¼Œå®ƒä»¬æ˜¯æ•°æ®å®¹å™¨ï¼› 

å­—ç¬¦é›†åŠå…¶ç›¸å…³è§£ç å™¨å’Œç¼–ç å™¨ï¼Œå®ƒä»¬åœ¨å­—èŠ‚å’Œ Unicode å­—ç¬¦ä¹‹é—´è¿›è¡Œè½¬æ¢ï¼›

å„ç§ç±»å‹çš„é€šé“ï¼Œå®ƒä»¬è¡¨ç¤ºåˆ°èƒ½å¤Ÿæ‰§è¡ŒIOæ“ä½œçš„å®ä½“çš„è¿æ¥ï¼›ä»¥åŠé€‰æ‹©å™¨å’Œé€‰æ‹©é”®ï¼Œå®ƒä»¬ä¸å¯é€‰æ‹©ä¿¡é“ ä¸€èµ·å®šä¹‰äº†å¤šè·¯çš„ã€æ— é˜»å¡çš„ I/O è®¾æ–½ã€‚ 


channelcharsetrmiæä¾› RMI åŒ…ã€‚RMI æŒ‡çš„æ˜¯è¿œç¨‹æ–¹æ³•è°ƒç”¨ (Remote Method Invocation)ã€‚å®ƒæ˜¯ä¸€ç§æœºåˆ¶ï¼Œèƒ½å¤Ÿè®©åœ¨æŸä¸ª Java è™šæ‹Ÿæœºä¸Šçš„å¯¹è±¡è°ƒç”¨å¦ä¸€ä¸ª Java è™šæ‹Ÿæœºä¸­çš„å¯¹è±¡ä¸Šçš„æ–¹æ³•ã€‚å¯ä»¥ç”¨æ­¤æ–¹æ³•è°ƒç”¨çš„ä»»ä½•å¯¹è±¡å¿…é¡»å®ç°è¯¥è¿œç¨‹æ¥å£ã€‚è°ƒç”¨è¿™æ ·ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå…¶å‚æ•°ä¸º â€œmarshalledâ€ å¹¶å°†å…¶ä»æœ¬åœ°è™šæ‹Ÿæœºå‘é€åˆ°è¿œç¨‹è™šæ‹Ÿæœºï¼ˆè¯¥è¿œç¨‹è™šæ‹Ÿæœºçš„å‚æ•°ä¸º â€œunmarshalledâ€ï¼‰ä¸Šã€‚è¯¥æ–¹æ³•ç»ˆæ­¢æ—¶ï¼Œå°†ç¼–ç»„æ¥è‡ªè¿œç¨‹æœºçš„ç»“æœå¹¶å°†ç»“æœå‘é€åˆ°è°ƒç”¨æ–¹çš„è™šæ‹Ÿæœºã€‚å¦‚æœæ–¹æ³•è°ƒç”¨å¯¼è‡´æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™è¯¥å¼‚å¸¸å°†æŒ‡ç¤ºç»™è°ƒç”¨æ–¹ã€‚ 
activationdgcregistryserversecurityä¸ºå®‰å…¨æ¡†æ¶æä¾›ç±»å’Œæ¥å£ã€‚åŒ…æ‹¬é‚£äº›å®ç°äº†å¯æ–¹ä¾¿é…ç½®çš„ã€ç»†ç²’åº¦çš„è®¿é—®æ§åˆ¶å®‰å…¨æ¶æ„çš„ç±»ã€‚æ­¤åŒ…ä¹Ÿæ”¯æŒå¯†ç å…¬é’¥å¯¹çš„ç”Ÿæˆå’Œå­˜å‚¨ï¼Œä»¥åŠåŒ…æ‹¬ä¿¡æ¯æ‘˜è¦å’Œç­¾åç”Ÿæˆåœ¨å†…çš„å¯è¾“å‡ºå¯†ç æ“ä½œã€‚æœ€åï¼Œæ­¤åŒ…æä¾›æ”¯æŒ signed/guarded å¯¹è±¡å’Œå®‰å…¨éšæœºæ•°ç”Ÿæˆçš„å¯¹è±¡ã€‚æ­¤åŒ…ä¸­æä¾›çš„è®¸å¤šç±»ï¼ˆç‰¹åˆ«æ˜¯å¯†ç å’Œå®‰å…¨éšæœºæ•°ç”Ÿæˆå™¨ç±»ï¼‰æ˜¯åŸºäºæä¾›å•†çš„ã€‚è¯¥ç±»æœ¬èº«å®šä¹‰äº†åº”ç”¨ç¨‹åºå¯ä»¥å†™å…¥çš„ç¼–ç¨‹æ¥å£ã€‚å®ç°æœ¬èº«å¯ç”±ç‹¬ç«‹çš„ç¬¬ä¸‰æ–¹å‚å•†æ¥å†™ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œæ— ç¼çš„æ’å…¥ã€‚å› æ­¤ï¼Œåº”ç”¨ç¨‹åºå¼€å‘äººå‘˜å¯ä»¥åˆ©ç”¨ä»»ä½•æ•°é‡çš„åŸºäºæä¾›å•†çš„å®ç°è€Œä¸å¿…æ·»åŠ æˆ–é‡å†™ä»£ç ã€‚ 
aclcertinterfacesspecsqlæä¾›ä½¿ç”¨Javaâ„¢ç¼–ç¨‹è¯­è¨€è®¿é—®å¹¶å¤„ç†å­˜å‚¨åœ¨æ•°æ®æºï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå…³ç³»æ•°æ®åº“ï¼‰ä¸­çš„æ•°æ®çš„ APIã€‚æ­¤ API åŒ…æ‹¬ä¸€ä¸ªæ¡†æ¶ï¼Œå‡­å€Ÿæ­¤æ¡†æ¶å¯ä»¥åŠ¨æ€åœ°å®‰è£…ä¸åŒé©±åŠ¨ç¨‹åºæ¥è®¿é—®ä¸åŒæ•°æ®æºã€‚å°½ç®¡ JDBCâ„¢ API ä¸»è¦ç”¨äºå°† SQL è¯­å¥ä¼ é€’ç»™æ•°æ®åº“ï¼Œä½†å®ƒè¿˜å¯ä»¥ç”¨äºä»¥è¡¨æ ¼æ–¹å¼ä»ä»»ä½•æ•°æ®æºä¸­è¯»å†™æ•°æ®ã€‚é€šè¿‡æ¥å£çš„ javax.sql.RowSet ç»„å¯ä»¥ä½¿ç”¨çš„ reader/writer å®ç”¨ç¨‹åºï¼Œå¯ä»¥è¢«å®šåˆ¶ä»¥ä½¿ç”¨å’Œæ›´æ–°æ¥è‡ªç”µå­è¡¨æ ¼ã€çº¯æ–‡æœ¬æ–‡ä»¶æˆ–å…¶ä»–ä»»ä½•è¡¨æ ¼å¼æ•°æ®æºçš„æ•°æ®ã€‚
textæä¾›ä»¥ä¸è‡ªç„¶è¯­è¨€æ— å…³çš„æ–¹å¼æ¥å¤„ç†æ–‡æœ¬ã€æ—¥æœŸã€æ•°å­—å’Œæ¶ˆæ¯çš„ç±»å’Œæ¥å£ã€‚è¿™æ„å‘³ç€æ‰€ç¼–å†™çš„ä¸»ç¨‹åºæˆ– applet æ˜¯ä¸è¯­è¨€æ— å…³çš„ï¼Œå¹¶ä¸”å®ƒå¯ä»¥ä¾é ç‹¬ç«‹çš„ã€åŠ¨æ€é“¾æ¥çš„æœ¬åœ°åŒ–èµ„æºã€‚è¿™å®ç°äº†éšæ—¶ä¸ºæ–°æœ¬åœ°åŒ–æ·»åŠ æœ¬åœ°åŒ–çš„çµæ´»æ€§ã€‚ 
è¿™äº›ç±»èƒ½å¤Ÿæ ¼å¼åŒ–æ—¥æœŸã€æ•°å­—å’Œæ¶ˆæ¯ã€è§£æã€æœç´¢å’Œæ’åºå­—ç¬¦ä¸²ï¼Œä»¥åŠè¿­ä»£å­—ç¬¦ã€å•è¯ã€è¯­å¥å’Œæ¢è¡Œç¬¦ã€‚æ­¤åŒ…åŒ…å«ç±»å’Œæ¥å£çš„ä¸‰å¤§ä¸»è¦ç»„ï¼š 

ç”¨äºè¿­ä»£æ–‡æœ¬çš„ç±» 
ç”¨äºæ ¼å¼åŒ–å’Œåˆ†æçš„ç±» 
ç”¨äºæ•´ç†å­—ç¬¦ä¸²çš„ç±» spi

utilåŒ…å« collection æ¡†æ¶ã€é—ç•™çš„ collection ç±»ã€äº‹ä»¶æ¨¡å‹ã€æ—¥æœŸå’Œæ—¶é—´è®¾æ–½ã€å›½é™…åŒ–å’Œå„ç§å®ç”¨å·¥å…·ç±»ï¼ˆå­—ç¬¦ä¸²æ ‡è®°ç”Ÿæˆå™¨ã€éšæœºæ•°ç”Ÿæˆå™¨å’Œä½æ•°ç»„ï¼‰ã€‚ 
concurrentjarloggingprefsregexspizipjavaxjavaxçš„xæ˜¯extensionçš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯æ‰©å±•åŒ…ã€‚javaxç±»åº“æ˜¯åœ¨javaç±»åº“ä¸Šé¢å¢åŠ çš„ä¸€å±‚ä¸œè¥¿ï¼Œå°±æ˜¯ä¸ºäº†ä¿æŒç‰ˆæœ¬å…¼å®¹è¦ä¿å­˜åŸæ¥çš„ï¼Œä½†æœ‰äº›ä¸œè¥¿æœ‰äº†æ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œæ‰€ä»¥ï¼Œå°±åŠ ä¸Šäº›ï¼Œå…¸å‹çš„å°±æ˜¯awt(Abstract Windowing ToolKit) å’Œswingã€‚
accessibilityå®šä¹‰äº†ç”¨æˆ·ç•Œé¢ç»„ä»¶ä¸æä¾›å¯¹è¿™äº›ç»„ä»¶è¿›è¡Œè®¿é—®çš„è¾…åŠ©æŠ€æœ¯ä¹‹é—´çš„åå®šã€‚å¦‚æœ Java åº”ç”¨ç¨‹åºå®Œå…¨æ”¯æŒ Java Accessibility APIï¼Œåˆ™å®ƒåº”è¯¥ä¸å±å¹•è¯»å–å™¨ã€å±å¹•æ”¾å¤§å™¨è¿™æ ·çš„è¾…åŠ©æŠ€æœ¯ä¿æŒå…¼å®¹å’Œå‹å¥½ã€‚ä½¿ç”¨å®Œå…¨æ”¯æŒ Java Accessibility API çš„ Java åº”ç”¨ç¨‹åºï¼Œå°†ä¸å†éœ€è¦ç¦»å±æ¨¡å‹çš„å±å¹•è¯»å–å™¨ ï¼Œå› ä¸ºè¯¥ API æä¾›äº†ç¦»å±æ¨¡å‹ä¸­é€šå¸¸æ‰€åŒ…å«çš„æ‰€æœ‰ä¿¡æ¯ã€‚ 
activationprocessingactivityåŒ…å«è§£ç»„æœŸé—´é€šè¿‡ ORB æœºåˆ¶æŠ›å‡ºçš„ä¸ Activity æœåŠ¡æœ‰å…³çš„å¼‚å¸¸ã€‚ 
annotationcryptoä¸ºåŠ å¯†æ“ä½œæä¾›ç±»å’Œæ¥å£ã€‚åœ¨æ­¤åŒ…ä¸­å®šä¹‰çš„åŠ å¯†æ“ä½œåŒ…æ‹¬åŠ å¯†ã€å¯†é’¥ç”Ÿæˆå’Œå¯†é’¥åå•†ï¼Œä»¥åŠæ¶ˆæ¯éªŒè¯ç ï¼ˆMessage Authentication Codeï¼ŒMACï¼‰ç”Ÿæˆã€‚ 
åŠ å¯†æ”¯æŒåŒ…æ‹¬å¯¹ç§°å¯†ç ã€ä¸å¯¹ç§°å¯†ç ã€å—å¯†ç å’Œæµå¯†ç ã€‚æ­¤åŒ…è¿˜æ”¯æŒå®‰å…¨æµå’Œå¯†å°çš„å¯¹è±¡ã€‚ 
æ­¤åŒ…ä¸­æä¾›çš„è®¸å¤šç±»éƒ½æ˜¯åŸºäºæä¾›è€…çš„ã€‚è¯¥ç±»æœ¬èº«å®šä¹‰å¯ä»¥å†™å…¥åº”ç”¨ç¨‹åºçš„ç¼–ç¨‹æ¥å£ã€‚ç„¶åå¯ç”±ç‹¬ç«‹çš„ç¬¬ä¸‰æ–¹ä¾›åº”å•†ç¼–å†™å®ç°æœ¬èº«ï¼Œå¹¶æ ¹æ®éœ€è¦æ— ç¼åµŒå…¥ã€‚å› æ­¤ï¼Œåº”ç”¨ç¨‹åºå¼€å‘äººå‘˜å¯ä»¥åˆ©ç”¨ä»»æ„æ•°é‡çš„åŸºäºæä¾›è€…çš„å®ç°ï¼Œè€Œæ— éœ€æ·»åŠ æˆ–é‡å†™ä»£ç ã€‚ 
interfacesspecimageioJava Image I/O API çš„ä¸»è¦åŒ…ã€‚ 
ä½¿ç”¨ ImageIO ç±»çš„é™æ€æ–¹æ³•å¯ä»¥æ‰§è¡Œè®¸å¤šå¸¸è§çš„å›¾åƒ I/O æ“ä½œã€‚ 
æ­¤åŒ…åŒ…å«ä¸€äº›åŸºæœ¬ç±»å’Œæ¥å£ï¼Œæœ‰çš„ç”¨æ¥æè¿°å›¾åƒæ–‡ä»¶å†…å®¹ï¼ˆåŒ…æ‹¬å…ƒæ•°æ®å’Œç¼©ç•¥å›¾ï¼‰(IIOImage)ï¼›æœ‰çš„ç”¨æ¥æ§åˆ¶å›¾åƒè¯»å–è¿‡ç¨‹ï¼ˆImageReaderã€ImageReadParam å’Œ ImageTypeSpecifierï¼‰å’Œå›¾åƒå†™å…¥è¿‡ç¨‹ï¼ˆImageWriter å’Œ ImageWriteParamï¼‰ï¼›è¿˜æœ‰çš„ç”¨æ¥æ‰§è¡Œæ ¼å¼ä¹‹é—´çš„ä»£ç è½¬æ¢ (ImageTranscoder) å’ŒæŠ¥å‘Šé”™è¯¯ (IIOException)ã€‚ 
enventmetadatapluginsspistreamjwssoaplangmodelmanagementæä¾› Java Management Extensions çš„æ ¸å¿ƒç±»ã€‚
Java Management Extensions (JMXTM) API æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†å’Œç›‘è§†çš„æ ‡å‡† APIã€‚å…¸å‹ç”¨é€”åŒ…æ‹¬ï¼š

æŸ¥è¯¢å¹¶æ›´æ”¹åº”ç”¨ç¨‹åºé…ç½® 
ç´¯ç§¯æœ‰å…³åº”ç”¨ç¨‹åºè¡Œä¸ºçš„ç»Ÿè®¡æ•°æ®å¹¶ä½¿å…¶å¯ç”¨ 
é€šçŸ¥çŠ¶æ€æ›´æ”¹åŠé”™è¯¯çŠ¶å†µã€‚

JMX API è¿˜å¯ä»¥ä½œä¸ºè§£å†³æ–¹æ¡ˆçš„ä¸€éƒ¨åˆ†æ¥ç®¡ç†ç³»ç»Ÿã€ç½‘ç»œç­‰ã€‚
API åŒ…æ‹¬è¿œç¨‹è®¿é—®ï¼Œå› æ­¤ï¼Œè¿œç¨‹ç®¡ç†ç¨‹åºå¯ä»¥åŸºäºè¿™äº›ç›®çš„ä¸æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’ã€‚
loadingmonitortimerrelationopenmbeanmodelmbeanremotenamingä¸ºè®¿é—®å‘½åæœåŠ¡æä¾›ç±»å’Œæ¥å£ã€‚ 
æ­¤åŒ…å®šä¹‰ Java Naming and Directory InterfaceTM (JNDI) çš„å‘½åæ“ä½œã€‚  JNDI å‘ä½¿ç”¨ Java ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„åº”ç”¨ç¨‹åºæä¾›å‘½åå’Œç›®å½•åŠŸèƒ½ã€‚å®ƒè¢«è®¾è®¡æˆä¸ä»»ä½•ç‰¹å®šçš„å‘½åæˆ–ç›®å½•æœåŠ¡å®ç°æ— å…³ã€‚å› æ­¤å¯ä»¥ä½¿ç”¨å…±åŒçš„æ–¹å¼å¯¹å¤šç§æœåŠ¡ï¼ˆæ–°çš„ã€æ–°å‡ºç°çš„åŠå·²ç»éƒ¨ç½²çš„æœåŠ¡ï¼‰è¿›è¡Œè®¿é—®ã€‚
directoryeventldapspinetæä¾›ç”¨äºç½‘ç»œåº”ç”¨ç¨‹åºçš„ç±»ã€‚è¿™äº›ç±»åŒ…æ‹¬ç”¨äºåˆ›å»ºå¥—æ¥å­—çš„å·¥å‚ã€‚ä½¿ç”¨å¥—æ¥å­—å·¥å‚å¯ä»¥å°è£…å¥—æ¥å­—çš„åˆ›å»ºå’Œé…ç½®è¡Œä¸ºã€‚ 
sslprintä¸º Javaâ„¢ Print Service API æä¾›äº†ä¸»è¦ç±»å’Œæ¥å£ã€‚Java Print Service API å…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åº”ç”¨ç¨‹åºå…·å¤‡å¦‚ä¸‹åŠŸèƒ½ï¼š 

æ ¹æ®å…¶æ€§èƒ½å‘ç°å¹¶é€‰æ‹© PrintServiceã€‚ 
æŒ‡å®šæ‰“å°æ•°æ®çš„æ ¼å¼ã€‚ 
å‘æ”¯æŒæ‰€æ‰“å°æ–‡æ¡£ç±»å‹çš„æœåŠ¡æäº¤ PrintJobã€‚ 

attributeeventrmiåŒ…å« RMI-IIOP çš„ç”¨æˆ· APIã€‚è¿™äº› API ä¾› RMI-IIOP åº”ç”¨ç¨‹åºä½¿ç”¨ï¼Œå¹¶åœ¨ IIOP æˆ– JRMP ä¸Šè¿è¡Œæ—¶æç­‰æ•ˆçš„è¯­æ³•ã€‚å¦è¯·å‚é˜… javax.rmi.CORBA åŒ…ã€‚ 
CORBAsslscriptè„šæœ¬ API ç”±å®šä¹‰ Javaâ„¢ Scripting Engines çš„æ¥å£å’Œç±»ç»„æˆï¼Œå¹¶ä¸ºå®ƒä»¬åœ¨ Java åº”ç”¨ç¨‹åºä¸­çš„ä½¿ç”¨æä¾›æ¡†æ¶ã€‚æ­¤ API ä¾›é‚£äº›å¸Œæœ›åœ¨å…¶ Java åº”ç”¨ç¨‹åºä¸­æ‰§è¡Œç”¨è„šæœ¬è¯­è¨€ç¼–å†™çš„ç¨‹åºçš„åº”ç”¨ç¨‹åºç¼–ç¨‹äººå‘˜ä½¿ç”¨ã€‚è„šæœ¬è¯­è¨€ç¨‹åºé€šå¸¸ç”±åº”ç”¨ç¨‹åºçš„ç»ˆç«¯ç”¨æˆ·æä¾›ã€‚ 
securityauthcertsaslsoundsampledmidisqlä¸ºé€šè¿‡ Javaâ„¢ ç¼–ç¨‹è¯­è¨€è¿›è¡ŒæœåŠ¡å™¨ç«¯æ•°æ®æºè®¿é—®å’Œå¤„ç†æä¾› APIã€‚æ­¤åŒ…è¡¥å……äº† java.sql åŒ…ï¼Œå®ƒä» 1.4 ç‰ˆæœ¬å¼€å§‹åŒ…å«åœ¨ Java å¹³å°ã€æ ‡å‡†ç‰ˆ (Java SETM) ä¸­ã€‚å®ƒä¿ç•™äº† Java å¹³å°ã€ä¼ä¸šç‰ˆ (Java EETM) ä¸­çš„ç²¾åéƒ¨åˆ†ã€‚ 
java.sql åŒ…ä¸­æä¾›ä»¥ä¸‹å†…å®¹ï¼š 

DataSource æ¥å£ï¼Œç”¨äºå»ºç«‹åˆ°æ•°æ®æºçš„è¿æ¥ï¼Œæ˜¯ DriverManager çš„æ›¿ä»£é¡¹ã€‚ 
è¿æ¥æ± å’Œè¯­å¥æ±  
åˆ†å¸ƒå¼äº‹åŠ¡ 
Rowset 

åº”ç”¨ç¨‹åºç›´æ¥ä½¿ç”¨ DataSource å’Œ RowSet APIï¼Œä½†è¿æ¥æ± å’Œåˆ†å¸ƒå¼äº‹åŠ¡ API åªèƒ½ç”±ä¸­é—´å±‚åŸºç¡€è®¾æ–½åœ¨å†…éƒ¨ä½¿ç”¨ã€‚
rowsetswingæä¾›ä¸€ç»„â€œè½»é‡çº§â€ï¼ˆå…¨éƒ¨æ˜¯ Java è¯­è¨€ï¼‰ç»„ä»¶ï¼Œå°½é‡è®©è¿™äº›ç»„ä»¶åœ¨æ‰€æœ‰å¹³å°ä¸Šçš„å·¥ä½œæ–¹å¼éƒ½ç›¸åŒã€‚æœ‰å…³ä½¿ç”¨è¿™äº›ç»„ä»¶çš„ç¨‹åºå‘˜æŒ‡å—ï¼Œè¯·å‚é˜… Creating a GUI with JFC/Swingï¼Œè¯¥å†…å®¹åœ¨ The Java Tutorial çš„ç»“å°¾å¤„ã€‚æœ‰å…³å…¶ä»–å‚è€ƒèµ„æ–™ï¼Œè¯·å‚é˜…ç›¸å…³æ–‡æ¡£ã€‚
bordercolorchooserfilechoosereventtabletexttreeundoplaftoolsä¸ºèƒ½å¤Ÿä»ç¨‹åºï¼ˆä¾‹å¦‚ï¼Œç¼–è¯‘å™¨ï¼‰ä¸­è°ƒç”¨çš„å·¥å…·æä¾›æ¥å£ã€‚ 
è¦æ±‚è¿™äº›æ¥å£å’Œç±»ä½œä¸º Javaâ„¢ Platform, Standard Edition (Java SE) çš„ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯ä¸è¦æ±‚æä¾›ä»»ä½•å®ç°å®ƒä»¬çš„å·¥å…·ã€‚ 
é™¤éæ˜ç¡®å…è®¸ï¼Œå¦åˆ™åªè¦ç»™å®š null å‚æ•°æˆ–ç»™å®šåŒ…å« null å…ƒç´ çš„åˆ—è¡¨æˆ–é›†åˆï¼Œæ­¤åŒ…ä¸­çš„æ‰€æœ‰æ–¹æ³•éƒ½å°†æŠ›å‡º NullPointerExceptionã€‚ç±»ä¼¼åœ°ï¼Œé™¤éæ˜ç¡®å…è®¸ï¼Œå¦åˆ™æ‰€æœ‰æ–¹æ³•éƒ½ä¸å¯ä»¥è¿”å› nullã€‚ 
æ­¤åŒ…æ˜¯ Java ç¼–ç¨‹è¯­è¨€ç¼–è¯‘å™¨æ¡†æ¶çš„ä¸»è¦éƒ¨åˆ†ã€‚æ­¤æ¡†æ¶å…è®¸æ¡†æ¶çš„å®¢æˆ·ç«¯æŸ¥æ‰¾å¹¶è¿è¡Œç¨‹åºä¸­çš„ç¼–è¯‘å™¨ã€‚è¯¥æ¡†æ¶è¿˜ä¸ºç»“æ„åŒ–è®¿é—®è¯Šæ–­ï¼ˆDiagnosticListenerï¼‰æä¾›æœåŠ¡æä¾›è€…æ¥å£ï¼ˆSPIï¼‰ï¼Œä¸ºé‡å†™æ–‡ä»¶è®¿é—®æä¾›æ–‡ä»¶æŠ½è±¡ï¼ˆJavaFileManager å’Œ JavaFileObjectï¼‰ã€‚æœ‰å…³ä½¿ç”¨ SPI çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… JavaCompilerã€‚ 
transactionåŒ…å«è§£ç»„æœŸé—´é€šè¿‡ ORB æœºåˆ¶æŠ›å‡ºçš„ä¸‰ä¸ªå¼‚å¸¸ã€‚ 
xaxmlæ ¹æ® XML è§„èŒƒå®šä¹‰æ ¸å¿ƒ XML å¸¸é‡å’ŒåŠŸèƒ½ã€‚
parsersbindsoapwstransformcryptodatatypevalidationnamespacexpathstreamorgJavaçš„orgåŒ…æ˜¯ç”±ä¼ä¸šæˆ–è€…ç»„ç»‡æä¾›çš„javaç±»åº“ã€‚é›†æˆåˆ°jdkä¸­ä½†å¤§éƒ¨åˆ†ä¸æ˜¯sunå…¬å¸çš„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚å…¶ä¸­æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯w3cæä¾›çš„å¯¹XMLã€ç½‘é¡µã€æœåŠ¡å™¨çš„ç±»å’Œæ¥å£ã€‚
ietfigssomgCORBAstubCORBA_2_3CosNamingSendingContextPortableServerPOrtableInterceptorMessagingIOPDynamicDynamicAnyw3cdomxmlsaxåè®°åªå±•å¼€åˆ°äº†ç¬¬äºŒçº§ï¼Œä»Šåå¦‚æœæœ‰éœ€è¦ï¼Œå†å¾€ä¸‹å±•å¼€ã€‚
é™„ä¸ŠAndroid APIæ¦‚è§ˆï¼šhttp://www.android-doc.com/reference/packages.html
å‚è€ƒæ–‡æ¡£ã€ŠJDK API 1.6.0 ä¸­æ–‡ç‰ˆã€‹
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidå¼€å‘â€”â€”ç‰ˆæœ¬æ§åˆ¶å’Œä»£ç åˆ†äº«</title>
    <url>/dev-android-version-control/</url>
    <content><![CDATA[å‰è¨€å¾ˆè‡ªç„¶çš„ï¼Œè§‰å¾—è‡ªå·±è¯¥ä½¿ç”¨ä¸€äº›ç‰ˆæœ¬æ§åˆ¶å·¥å…·äº†ã€‚è™½ç„¶ä»¥å‰ä¹Ÿä½¿ç”¨è¿‡ï¼Œä½†ä¸€ç›´æ²¡æœ‰ç³»ç»Ÿå­¦ä¹ ï¼Œç°åœ¨ï¼Œæä¸€æå§ï¼
ä»¥ã€ŠAndroidå¼€å‘â€”â€”å¸§åŠ¨ç”»ã€‹ä¸­çš„Demoä¸ºä¾‹ã€‚
gitä½œä¸ºä¸€åç¨‹åºå‘˜ï¼Œä¸ä½¿ç”¨gitï¼Œéƒ½ä¸å¥½æ„æ€å’Œåˆ«äººè®²è¯ã€‚gitçš„å®‰è£…è¿‡ç¨‹è‡ªè¡Œç™¾åº¦ï¼Œæˆ–è€…å‚è€ƒéƒåŒå­¦çš„ã€ŠHexoç¯å¢ƒæ­å»ºã€‹ã€‚


åœ¨githubæ–°å»ºrepositoryæ–°å»ºrepositoryï¼Œå‘½åä¸ºdemoã€‚å¯ä»¥çœ‹åˆ°ï¼Œrepositoryçš„åœ°å€https://github.com/voidking/demo.git
é…ç½®gitç¯å¢ƒASä¸­ï¼ŒSettingsï¼ŒVersion Controlï¼ŒGitã€‚é…ç½®Path to Git executableï¼Œç„¶åTestã€‚
git initASä¸­ï¼ŒVCSï¼ŒImport into Version Cotrolï¼ŒCreate Git Repositoryã€‚OKä¹‹åï¼Œå‘ç°Projecté‡Œçš„æ–‡ä»¶å˜æˆäº†çº¢è‰²ã€‚

git initï¼Œå…¶å®å°±æ˜¯æ–°å»ºäº†ä¸€ä¸ªæœ¬åœ°ä»“åº“.gitï¼Œç›¸å½“äºhexoé‡Œçš„.deploy_gitã€‚

git addå•å‡»ProjectåDemoï¼ŒVCSï¼ŒGitï¼ŒAddã€‚å‘ç°Projecté‡Œçš„æ–‡ä»¶å˜æˆäº†ç»¿è‰²ã€‚

git addï¼Œå…¶å®å°±æ˜¯æŠŠç›®æ ‡æ–‡ä»¶å¿«ç…§æ”¾å…¥æš‚å­˜åŒºåŸŸï¼ŒåŒæ—¶æœªæ›¾è·Ÿè¸ªè¿‡çš„æ–‡ä»¶æ ‡è®°ä¸ºéœ€è¦è·Ÿè¸ªã€‚

git commitVCSï¼ŒGitï¼ŒCommit Directoryã€‚å•å‡»Commitã€‚

git commitï¼Œæäº¤æ—¶è®°å½•çš„æ˜¯æ”¾åœ¨æš‚å­˜åŒºåŸŸçš„å¿«ç…§ï¼Œä»»ä½•è¿˜æœªæš‚å­˜çš„ä»ç„¶ä¿æŒå·²ä¿®æ”¹çŠ¶æ€ï¼Œå¯ä»¥åœ¨ä¸‹æ¬¡æäº¤æ—¶çº³å…¥ç‰ˆæœ¬ç®¡ç†ã€‚æ¯ä¸€æ¬¡è¿è¡Œæäº¤æ“ä½œï¼Œéƒ½æ˜¯å¯¹ä½ é¡¹ç›®ä½œä¸€æ¬¡å¿«ç…§ï¼Œä»¥åå¯ä»¥å›åˆ°è¿™ä¸ªçŠ¶æ€ï¼Œæˆ–è€…è¿›è¡Œæ¯”è¾ƒã€‚

æŒ‡å®šè¿æ¥ç›®æ ‡æŒ‡å®šæœ¬åœ°åº“ä¸githubçš„repositoryç›¸è¿ã€‚
æ–¹æ³•ä¸€ï¼ˆæ¨èï¼‰ï¼šåœ¨Demoç›®å½•ä¸‹ï¼Œå³é”®ï¼ŒGit Bash Heregit remote add origin https://github.com/voidking/demo.git
æ–¹æ³•äºŒï¼šVCSï¼ŒGitï¼ŒPushã€‚å¦‚æœæ²¡æœ‰æ‰§è¡Œæ–¹æ³•ä¸€ï¼Œè¿™æ—¶å¯ä»¥çœ‹åˆ°Define Remoteã€‚å¡«å…¥https://github.com/voidking/demo.gitï¼Œä¼šæŠ¥é”™ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆã€‚
Remote URL is invalid: unable to access &#x27;https://github.com/voidking/demo.git&#x27;

git pushVCSï¼ŒGitï¼ŒPushã€‚
å¡«å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚ä¹‹åï¼Œå¯ä»¥çœ‹åˆ°çª—å£æœ€ä¸‹é¢æœ‰ä¸ªpushè¿›åº¦æ¡åœ¨è·‘ã€‚
å¦‚æœå¼¹å‡ºæç¤ºï¼šæˆ‘ä»¬å‹¾é€‰Encrypt with OS user credentialsï¼Œæ„æ€æ˜¯ä½¿ç”¨æœ¬æœºçš„SSH keyã€‚ä¸æ˜ç™½çš„åœ°æ–¹è¯·è§éƒåŒå­¦å¦ä¸€ç¯‡æ–‡ç« ï¼Œã€ŠHexoç¯å¢ƒæ­å»ºã€‹ã€‚
è¿‡ä¸€ä¼šå„¿ï¼Œä¾¿å¯ä»¥çœ‹åˆ°æˆåŠŸçš„æç¤ºï¼
githubæˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹githubä¸Šçš„repositoryã€‚è‡³æ­¤ï¼Œå¤§åŠŸå‘Šæˆï¼

ASé›†æˆäº†GitHubæ’ä»¶ï¼Œé…ç½®èµ·æ¥æ¯”ä¸Šé¢çš„gité…ç½®è¦ç®€å•çš„å¤šï¼Œé’Ÿçˆ±GitHubçš„å°ä¼™ä¼´ä¸å¦¨ç™¾åº¦å­¦ä¹ ä¸€ä¸‹ã€‚

svnåœ¨å®ä¹ çš„æ—¶å€™ï¼Œä½¿ç”¨è¿‡ä¸€æ®µæ—¶é—´çš„svnã€‚ä¸ªäººæ„Ÿè§‰ï¼Œsvnåœ¨å›¢é˜Ÿå¼€å‘ä¸­å¾ˆå¥½ç”¨ã€‚ä½†æ˜¯ï¼Œå½“æ—¶åœ¨å±€åŸŸç½‘ä½¿ç”¨ï¼Œæœ‰äº›å±€é™æ€§ã€‚å¦‚æœsvnæœåŠ¡å™¨æ­åœ¨å…¬ç½‘æœåŠ¡å™¨ä¸Šï¼ˆæ¯”å¦‚é˜¿é‡Œäº‘ï¼‰ï¼Œåº”è¯¥æ˜¯æå¥½çš„ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåˆ©ç”¨svnå‘saeçš„é¡¹ç›®ä¸­ä¸Šä¼ æ–‡ä»¶ï¼Œéå¸¸æ–¹ä¾¿ã€‚
å…è´¹SVNæœåŠ¡å™¨æ¯”èµ·è‡ªå·±æ­å»ºæœåŠ¡å™¨ï¼ŒæŠ é—¨çš„éƒåŒå­¦æ›´æ„¿æ„ä½¿ç”¨å…è´¹svnæœåŠ¡å™¨ã€‚ä½†æ˜¯ï¼Œè¿™ç§å…è´¹svnæœåŠ¡å™¨æå°‘ï¼Œæ‰¾äº†å¾ˆä¹…ï¼Œåªæ‰¾åˆ°ä¸€ä¸ªTaoCodeã€‚
http://code.taobao.org/
å®‰è£…svnsvnï¼Œåˆ†ä¸ºæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ï¼Œå› ä¸ºæœåŠ¡å™¨ä½¿ç”¨TaoCodeï¼Œæ‰€ä»¥æˆ‘ä»¬åªå®‰è£…å®¢æˆ·ç«¯å°±å¯ä»¥äº†ã€‚
1ã€æœåŠ¡å™¨ä¸‹è½½åœ°å€https://subversion.apache.org/download/
2ã€å®¢æˆ·ç«¯ä¸‹è½½åœ°å€http://tortoisesvn.net/downloads.html
3ã€æœåŠ¡å™¨å®‰è£…ç•¥ã€‚ï¼ˆçªç„¶æ„Ÿè§‰ä¸€ä¸ªç•¥å­—å¤§æ°”ç£…ç¤´ï¼Œç¬é—´çœäº†å¥½å¤šå­—ï¼‰
4ã€å®¢æˆ·ç«¯å®‰è£…éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®‰è£…æ—¶é€‰æ‹©å®‰è£…command lineï¼ˆé»˜è®¤ä¸å®‰è£…ï¼‰ï¼Œä¸ºäº†åœ¨ASä¸­ä½¿ç”¨ã€‚
åœ¨TaoCodeæ–°å»ºé¡¹ç›®æ–°å»ºé¡¹ç›®ï¼Œå‘½åä¸ºvkdemoã€‚å¯ä»¥çœ‹åˆ°ï¼Œsvn repoåœ°å€ä¸ºhttp://code.taobao.org/svn/vkdemo/ 
Checkout from Subversion1ã€æ‰“å¼€ASï¼ŒVCSï¼ŒCheckout from Version Controlï¼ŒSubversionã€‚2ã€ç‚¹å‡»åŠ å·ï¼ˆAdd Repository Locationï¼‰ã€‚3ã€æ·»åŠ Repository URLã€‚æ­¤æ—¶Repositoryé‡Œå•¥ä¹Ÿæ²¡æœ‰ï¼Œå’±ä»¬å°±ä¸Checkoutäº†ã€‚
Import into Subversion1ã€æ‰“å¼€ASï¼ŒVCSï¼ŒImport from Version Controlï¼ŒImport into Subversionã€‚2ã€é€‰ä¸­URLï¼ŒImportã€‚3ã€é€‰ä¸­éœ€è¦Importçš„ç›®å½•ï¼ŒOKã€‚
ç‚¹å‡»OKï¼Œå•Šå˜ï¼ŒæŠ¥é”™äº†ï¼
å“¥å“¥æ˜¯è§è¿‡å¤§ä¸–é¢çš„äººï¼Œè¿™ç‚¹å°é”™ç®—ä»€ä¹ˆï¼Settingsï¼ŒVersion Controlï¼ŒSubversionï¼Œå»æ‰Generalé€‰é¡¹å¡ä¸­æ‰€æœ‰å‹¾ã€‚å†æ¬¡importï¼ŒæˆåŠŸï¼ä¸è¿‡ï¼Œç”±äºæ˜¯æ•´ä¸ªé¡¹ç›®ä¸Šä¼ ï¼ŒåŒ…æ‹¬ç¼–è¯‘æ–‡ä»¶ç­‰ï¼Œä¸Šä¼ è¿‡ç¨‹ä¼šå¾ˆæ…¢ã€‚
æµè§ˆsvnæ–‡ä»¶å¤¹æ‰“å¼€ASï¼ŒVCSï¼ŒBrowse VCS Repositoryï¼ŒBrowse Subversion Repositoryï¼Œé€‰æ‹©URLã€‚
å†çœ‹Projectç›®å½•ï¼š

æ–‡ä»¶çº¢è‰²ï¼šè¡¨ç¤ºæ–‡ä»¶æ²¡æœ‰æ·»åŠ åˆ°æœåŠ¡å™¨

ç»¿è‰²ï¼šè¡¨ç¤ºæ²¡æœ‰æ›´æ–°æ–°çš„ä¿®æ”¹åˆ°æœåŠ¡å™¨

æ™®é€šé»‘è‰²ï¼šè¡¨ç¤ºå’ŒæœåŠ¡å™¨åŒæ­¥


æ–‡ä»¶å¤¹ç¬¦å·è¯´æ˜
é»„è‰²æ„Ÿå¹å·(æœ‰å†²çª)ï¼šè¿™æ˜¯æœ‰å†²çªäº†ï¼Œå†²çªå°±æ˜¯è¯´ä½ å¯¹æŸä¸ªæ–‡ä»¶è¿›è¡Œäº†ä¿®æ”¹ï¼Œåˆ«äººä¹Ÿå¯¹è¿™ä¸ªæ–‡ä»¶è¿›è¡Œäº†ä¿®æ”¹ï¼Œåˆ«äººæŠ¢åœ¨ä½ æäº¤ä¹‹å‰å…ˆæäº¤äº†ï¼Œè¿™æ—¶ä½ å†æäº¤å°±ä¼šè¢«æç¤ºå‘ç”Ÿå†²çªï¼Œè€Œä¸å…è®¸ä½ æäº¤ï¼Œé˜²æ­¢ä½ çš„æäº¤è¦†ç›–äº†åˆ«äººçš„ä¿®æ”¹ã€‚è¦è§£å†³å†²çªï¼Œå¦‚æœä½ ç¡®è®¤ä½ çš„ä¿®æ”¹æ˜¯æ— æ•ˆçš„ï¼Œåˆ™ç”¨TSVNè¿˜åŸä½ çš„ä¿®æ”¹å°±è¡Œäº†ï¼›å¦‚æœè®¤ä¸ºä½ çš„ä¿®æ”¹æ˜¯æ­£ç¡®çš„ï¼Œåˆ«äººçš„æäº¤æ˜¯æ— æ•ˆçš„ï¼Œé‚£ä¹ˆç”¨TSVNå…ˆæ ‡è®°ä¸ºâ€œè§£å†³å†²çªâ€ï¼Œç„¶åå°±å¯ä»¥æäº¤äº†ï¼›å¦‚æœä½ è®¤ä¸ºä½ çš„ä¿®æ”¹å’Œåˆ«äººçš„ä¿®æ”¹éƒ½æœ‰ä¸€éƒ¨åˆ†æ˜¯æœ‰æ•ˆçš„ï¼Œé‚£ä¹ˆä½ å°±æŠŠåˆ«äººçš„ä¿®æ”¹æ‰‹åŠ¨åˆå¹¶åˆ°ä½ çš„ä¿®æ”¹ä¸­ï¼Œç„¶åä½¿ç”¨TSVNæ ‡æ³¨ä¸ºâ€œè§£å†³å†²çªâ€ï¼Œç„¶åå°±å¯ä»¥æäº¤äº†ã€‚
ç±³å­—å·(æœ‰æœ¬åœ°ä¿®æ”¹ä»£ç )ï¼šè¿™æ˜¯è¯´æ˜ä½ æœ‰æœªæäº¤çš„æœ¬åœ°ä»£ç ã€‚ 
é—®å·(æ–°åŠ å…¥çš„èµ„æº)ï¼šè¿™è¯´æ˜è¯¥æ–‡ä»¶æ˜¯é¡¹ç›®ä¸­æ–°å¢æ–‡ä»¶èµ„æºï¼Œæ–°å¢èµ„æºå¯ä»¥æ˜¯æ–‡ä»¶ã€å›¾ç‰‡ã€ä»£ç ç­‰ã€‚
çº¢è‰²æ„Ÿå¹å·(æœ¬åœ°ä»£ç ä¸åº“æ²¡æœ‰ä¿æŒä¸€è‡´)ï¼šè¿™è¯´æ˜æœ¬åœ°ä»£ç è·Ÿåº“ä¸Šæ²¡æœ‰ä¿æŒä¸€è‡´ï¼Œå¦‚æœç”¨æˆ·æƒ³ä¿®å¤ï¼Œå¯ä»¥å°†å¸¦çº¢è‰²æ„Ÿå¹å·å›¾æ ‡æ–‡ä»¶åˆ é™¤ï¼Œç›´æ¥updateå³å¯ã€‚ 
ç°è‰²å‘å³ç®­å¤´(æœ¬åœ°ä¿®æ”¹è¿‡)ï¼šæœ¬åœ°ä»£ç æ²¡æœ‰åŠæ—¶ä¸Šåº“ã€‚
è“è‰²å‘å·¦ç®­å¤´(SVNä¸Šä¿®æ”¹è¿‡)ï¼šè®°å¾—æ›´æ–°ä»£ç åä¿®æ”¹ï¼Œæäº¤å‰è·Ÿsvnå¯¹æ¯”ä¹ æƒ¯ã€‚
ç°è‰²å‘å³ä¸”ä¸­é—´æœ‰ä¸ªåŠ å·çš„ç®­å¤´(æœ¬åœ°æ¯”SVNä¸Šå¤šå‡ºçš„æ–‡ä»¶)ï¼šä¿®æ”¹å®Œè®°å¾—è·Ÿsvnä¿æŒä¸€è‡´ã€‚
è“è‰²å‘å·¦ä¸”ä¸­é—´æœ‰ä¸ªåŠ å·çš„ç®­å¤´(SVNä¸Šæ¯”æœ¬åœ°å¤šå‡ºçš„æ–‡ä»¶)ï¼šåˆ é™¤è¯¥æ–‡ä»¶åï¼Œå†æ¬¡æ›´æ–°ï¼Œå°†svnä¸Šæ–‡ä»¶å…¨éƒ¨æ›´æ–°ä¸‹æ¥ã€‚ 
ç°è‰²å‘å³ä¸”ä¸­é—´æœ‰ä¸ªå‡å·çš„ç®­å¤´(æœ¬åœ°åˆ é™¤äº†,è€ŒSVNä¸Šæœªåˆ é™¤çš„æ–‡ä»¶)ï¼šä¹Ÿå°±æ˜¯è¯´ä½ åˆ é™¤ç¡®è®¤åï¼Œä¸€å®šè¦è®°å¾—ä¸Šåº“ï¼Œè·Ÿsvnä¿æŒä¸€è‡´ 
è“è‰²å‘å·¦ä¸”ä¸­é—´æœ‰ä¸ªå‡å·çš„ç®­å¤´(SVNä¸Šåˆ é™¤äº†,è€Œæœ¬åœ°æœªåˆ é™¤çš„æ–‡ä»¶)ï¼šæ¯”å¯¹svnåº“ä¸Šä»£ç ï¼Œç¡®å®šéœ€è¦åˆ é™¤åï¼Œæ›´æ–°svn(åˆ é™¤æ— ç”¨ä»£ç )ã€‚
çº¢è‰²åŒå‘ç®­å¤´(SVNä¸Šä¿®æ”¹è¿‡,æœ¬åœ°ä¹Ÿä¿®æ”¹è¿‡çš„æ–‡ä»¶)ï¼šè¿™ä¸ªè¡¨ç¤ºæœ¬åœ°å’Œsvnä¸Šéƒ½ä¿®æ”¹è¿‡ï¼Œæœ€å¥½å°±æ˜¯æŠŠæœ¬åœ°ä¿®æ”¹åˆå¹¶åˆ°svnï¼Œä¿®æ”¹ä»£ç å‰æœ€åå…ˆæ›´æ–°ã€‚
å•ä¸ªæ–‡ä»¶ç­¾å…¥ç­¾å‡ºå³é”®subversionAddï¼šæ·»åŠ åˆ°æœåŠ¡å™¨
Commitï¼šæäº¤
Updateï¼šæ›´æ–°ï¼Œè·å–æ–°ç‰ˆæœ¬
Integrateï¼šåˆå¹¶
åè®°å¯¹äºgitå’Œsvnçš„åŒºåˆ«ï¼Œå“¥åªæƒ³è¯´â€”â€”å•¥ï¼Œå•¥ï¼Œè¿™éƒ½æ˜¯å•¥ï¼ã€‚ã€‚ã€‚è¿˜æ˜¯ç¨å¾®æ€»ç»“ä¸€ä¸‹å§ï¼
1ã€gitæ˜¯åˆ†å¸ƒå¼çš„ï¼Œsvnä¸æ˜¯ã€‚

svnè²Œä¼¼è¿›åŒ–äº†ï¼Œå®ƒæä¾›çš„å‘½ä»¤svnsyncå°±å¯ä»¥checkoutæ‰€æœ‰ç‰ˆæœ¬åˆ°æœ¬åœ°ï¼Œè¿™æ˜¯åˆ†å¸ƒå¼çš„ç‰¹ç‚¹å“‡ï¼

2ã€gitç›´æ¥è®°å½•å¿«ç…§ï¼Œè€Œéå·®å¼‚æ¯”è¾ƒã€‚
3ã€gitå‡ ä¹æ‰€æœ‰æ“ä½œéƒ½æ˜¯æœ¬åœ°æ‰§è¡Œï¼ˆå› ä¸ºåŒºåˆ«1ï¼‰ã€‚
çŸ¥é“äº†è¿™ä¸‰æ¡ï¼Œå¹³æ—¶å¹å¹ç‰›é€¼åº”è¯¥å¤Ÿäº†ï¼Œä¸æ»¡è¶³çš„å°ä¼™ä¼´è¯·ç§»æ­¥å‚è€ƒèµ„æ–™ã€‚
å‚è€ƒèµ„æ–™ã€ŠPro Gitã€‹http://git-scm.com/book/zh/v1
Learn Git Branchinghttp://learngitbranching.js.org/
git-ä½¿ç”¨ç®€æ˜“æŒ‡å—http://www.bootcss.com/p/git-guide/
Android Studioä¹‹ç‰ˆæœ¬ç®¡ç†å·¥å…·Githttp://www.wfuyu.com/technology/22499.html
Android studio -VSN ä½¿ç”¨ç¬”è®°http://www.cnblogs.com/shaocm/p/4182380.html
GITå’ŒSVNä¹‹é—´çš„äº”ä¸ªåŸºæœ¬åŒºåˆ«http://www.oschina.net/news/12542/git-and-svn
Gitä¸svnçš„åŒºåˆ«http://blog.csdn.net/huacuilaifa/article/details/19124635
ä¸ºä»€ä¹ˆè¯´ Git æ¯” SVN æ›´å¥½http://www.oschina.net/news/29214/why-git-is-better-than-svn
åˆ†å¸ƒå¼å’Œé›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·-svn,git,mercurialæ¯”è¾ƒåˆ†æhttp://blog.csdn.net/augusdi/article/details/29846253
]]></content>
      <categories>
        <category>engineering</category>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidå¼€å‘â€”â€”å¸§åŠ¨ç”»</title>
    <url>/dev-android-frameanimation/</url>
    <content><![CDATA[å‰è¨€è·å¾—æˆå°±æ„Ÿæ˜¯å­¦ä¹ çš„çµé­‚ï¼å¯¹äºç¼–ç¨‹ï¼Œå°¤å…¶å¦‚æ­¤ã€‚æ¨¡ä»¿ç€åšä¸€äº›ç®€å•çš„åº”ç”¨å…ˆï¼Œä¹‹åå†è¡¥å……çŸ¥è¯†ç‚¹ã€‚This is the plan !
åº”ç”¨ç®€ä»‹å•å‡»æ‰‹æœºå±å¹•ï¼Œæ’­æ”¾åŠ¨ç”»ã€‚
è®¾è®¡æ€è·¯1ã€æ‹·è´å…³é”®å¸§ï¼ˆå›¾ç‰‡ï¼‰åˆ°èµ„æºæ–‡ä»¶å¤¹ã€‚2ã€åœ¨xmlæ–‡ä»¶ä¸­å®šä¹‰å…³é”®å¸§ã€å¸§é¡ºåºã€åˆ‡æ¢æ—¶é—´ã€‚PSï¼šä¸€èˆ¬åˆ‡æ¢æ—¶é—´ä¸º1/24ç§’ï¼Œæˆ‘ä»¬è¿™é‡Œç”¨0.1ç§’ã€‚3ã€å›¾ç‰‡æ˜¾ç¤ºåœ¨ImageViewã€‚4ã€å“åº”å•å‡»äº‹ä»¶ã€‚5ã€ä½¿ç”¨AnimationDrawableç»˜åˆ¶åŠ¨ç”»ã€‚


å®ç°æµç¨‹æ–°å»ºProjectæ–°å»ºProjectï¼Œå‘½åä¸ºDemoã€‚
é‡å‘½åappappé‡å‘½åä¸ºframeanimationï¼Œæˆ–è€…åˆ é™¤appï¼Œæ–°å»ºModuleï¼Œå‘½åä¸ºframeanimationã€‚
å‡†å¤‡ç´ æ1ã€ç™¾åº¦â€œå¸§å›¾ç‰‡ç´ æâ€ï¼Œæ‰¾åˆ°ä¸€å¥—è‡ªå·±å–œæ¬¢çš„å¸§å›¾ç‰‡ã€‚2ã€å›¾ç‰‡é‡å‘½åä¸ºä»¥å­—æ¯å¼€å¤´ï¼Œè¿™é‡ŒéƒåŒå­¦å‡†å¤‡çš„å›¾ç‰‡åç§°ä¸ºfight_01.pngåˆ°fight_16.pngã€‚3ã€å°†å›¾ç‰‡æ‹·è´åˆ°src/main/res/drawableæ–‡ä»¶å¤¹ã€‚PSï¼šéƒåŒå­¦å°è¯•åœ¨resæ–°å»ºimageæ–‡ä»¶å¤¹ï¼Œç»“æœä¸å¯ä»¥ä½¿ç”¨ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆã€‚
æ–°å»ºxmlæ–‡ä»¶å³å‡»drawableæ–‡ä»¶å¤¹ï¼ŒNewï¼ŒDrawable resource fileï¼ŒFile nameéšæ„ï¼ˆéƒåŒå­¦èµ·åä¸ºframeanimation.xmlï¼‰ï¼ŒRoot elementé€‰æ‹©animation-listã€‚frameanimation.xmlå†…å®¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;animation-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;    android:oneshot=&quot;true&quot;&gt;    &lt;item android:drawable=&quot;@drawable/fight_01&quot; android:duration=&quot;100&quot; /&gt;    &lt;item android:drawable=&quot;@drawable/fight_02&quot; android:duration=&quot;100&quot; /&gt;    &lt;item android:drawable=&quot;@drawable/fight_03&quot; android:duration=&quot;100&quot; /&gt;    &lt;item android:drawable=&quot;@drawable/fight_04&quot; android:duration=&quot;100&quot; /&gt;    &lt;item android:drawable=&quot;@drawable/fight_05&quot; android:duration=&quot;100&quot; /&gt;    &lt;item android:drawable=&quot;@drawable/fight_06&quot; android:duration=&quot;100&quot; /&gt;    &lt;item android:drawable=&quot;@drawable/fight_07&quot; android:duration=&quot;100&quot; /&gt;    &lt;item android:drawable=&quot;@drawable/fight_08&quot; android:duration=&quot;100&quot; /&gt;    &lt;item android:drawable=&quot;@drawable/fight_09&quot; android:duration=&quot;100&quot; /&gt;    &lt;item android:drawable=&quot;@drawable/fight_10&quot; android:duration=&quot;100&quot; /&gt;    &lt;item android:drawable=&quot;@drawable/fight_11&quot; android:duration=&quot;100&quot; /&gt;    &lt;item android:drawable=&quot;@drawable/fight_12&quot; android:duration=&quot;100&quot; /&gt;    &lt;item android:drawable=&quot;@drawable/fight_13&quot; android:duration=&quot;100&quot; /&gt;    &lt;item android:drawable=&quot;@drawable/fight_14&quot; android:duration=&quot;100&quot; /&gt;    &lt;item android:drawable=&quot;@drawable/fight_15&quot; android:duration=&quot;100&quot; /&gt;    &lt;item android:drawable=&quot;@drawable/fight_16&quot; android:duration=&quot;100&quot; /&gt;&lt;/animation-list&gt;

ä¸€èµ·æ¥åˆ†æä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶ï¼š

android:oneshot=â€trueâ€ï¼Œé»˜è®¤å¾ªç¯æ’­æ”¾ï¼ŒåŠ ä¸Šè¿™ä¸ªå±æ€§ï¼Œåªæ’­æ”¾ä¸€éã€‚

android:drawable=â€@drawable/fight_01â€ï¼ŒåŸæ¥ï¼Œ.pngæ˜¯éœ€è¦çœç•¥æ‰çš„ã€‚

android:duration=â€100â€ï¼Œåˆ‡æ¢é—´éš”æ—¶é—´100msã€‚


æ·»åŠ ImageViewæ§ä»¶1ã€æ‰“å¼€activity_main.xmlï¼ŒDesignï¼Œåœ¨Widgetsä¸­é€‰ä¸­ImageViewæ”¾åˆ°å¸ƒå±€ä¸­ã€‚2ã€åŒå‡»ï¼Œåœ¨srcä¸­é€‰æ‹©Project&gt;Drawable&gt;frameanimationï¼ŒOKã€‚3ã€æŒ‡å®šä¸€ä¸ªidï¼Œæ·»åŠ çš„ç¬¬ä¸€ä¸ªImageViewé»˜è®¤ä¸ºimageViewï¼Œç¬¬äºŒä¸ªé»˜è®¤ä¸ºimageView2ï¼Œä¾æ¬¡ç±»æ¨ã€‚4ã€æ‹–æ‹‰ä¸€ä¸‹ï¼Œä¿®æ”¹ä¸€ä¸‹é•¿å®½å’Œå¤§å°ã€‚
ä¿®æ”¹activity_main.xml&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;    xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:layout_width=&quot;match_parent&quot;    android:layout_height=&quot;match_parent&quot; android:paddingLeft=&quot;0dp&quot;    android:paddingRight=&quot;0dp&quot;    android:paddingTop=&quot;0dp&quot;    android:paddingBottom=&quot;0dp&quot; tools:context=&quot;.MainActivity&quot;&gt;    &lt;ImageView        android:layout_width=&quot;match_parent&quot;        android:layout_height=&quot;match_parent&quot;        android:scaleType=&quot;fitXY&quot;        android:id=&quot;@+id/imageView&quot;        android:src=&quot;@drawable/frameanimation&quot;        android:layout_alignParentLeft=&quot;true&quot;        android:layout_alignParentStart=&quot;true&quot;        android:layout_alignParentRight=&quot;true&quot;        android:layout_alignParentEnd=&quot;true&quot;        android:layout_alignParentBottom=&quot;true&quot;        android:layout_alignParentTop=&quot;true&quot; /&gt;&lt;/RelativeLayout&gt;
è¿™ä¸€æ­¥ä¸»è¦ä¿®æ”¹äº†ä¸€ä¸‹ImageViewçš„å¸ƒå±€ï¼Œä½¿å…¶å¡«å……æ•´ä¸ªç•Œé¢ï¼Œçœ‹èµ·æ¥æ•ˆæœæ¯”è¾ƒå¥½ã€‚éå¿…è¦æ­¥éª¤ï¼Œå¯ä¸åšã€‚
ä¿®æ”¹MainActivity.javapackage com.voidking.android.demo;import android.graphics.drawable.AnimationDrawable;import android.support.v7.app.ActionBarActivity;import android.os.Bundle;import android.view.Menu;import android.view.MenuItem;import android.view.View;import android.widget.ImageView;public class MainActivity extends ActionBarActivity &#123;    @Override    protected void onCreate(Bundle savedInstanceState) &#123;        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main);        ImageView imageView = (ImageView) findViewById(R.id.imageView);        final AnimationDrawable animationDrawable = (AnimationDrawable)imageView.getDrawable();        imageView.setOnClickListener(new View.OnClickListener() &#123;            @Override            public void onClick(View v) &#123;                animationDrawable.stop();                animationDrawable.start();            &#125;        &#125;);    &#125;    @Override    public boolean onCreateOptionsMenu(Menu menu) &#123;        // Inflate the menu; this adds items to the action bar if it is present.        getMenuInflater().inflate(R.menu.menu_main, menu);        return true;    &#125;    @Override    public boolean onOptionsItemSelected(MenuItem item) &#123;        // Handle action bar item clicks here. The action bar will        // automatically handle clicks on the Home/Up button, so long        // as you specify a parent activity in AndroidManifest.xml.        int id = item.getItemId();        //noinspection SimplifiableIfStatement        if (id == R.id.action_settings) &#123;            return true;        &#125;        return super.onOptionsItemSelected(item);    &#125;&#125;
æˆ‘ä»¬ä¿®æ”¹çš„ï¼Œå…¶å®åªæœ‰OnCreateå‡½æ•°ï¼Œåœ¨é‡Œé¢æ·»åŠ äº†å¯¹ImageViewçš„å•å‡»äº‹ä»¶çš„ç›‘å¬å’ŒåŠ¨ä½œã€‚ä¹‹æ‰€ä»¥å…ˆstopå†startï¼Œæ˜¯å› ä¸ºanimationDrawable.start()ä¹‹åï¼Œæ˜¾ç¤ºåˆ°äº†æœ€åä¸€ä¸ªå¸§ï¼Œåœç•™åœ¨æœ€åä¸€ä¸ªå¸§ï¼Œä½†æ˜¯ï¼Œè¿™æ—¶å€™animationDrawableçš„è¿è¡Œå¹¶æ²¡æœ‰ç»“æŸï¼Œå¿…é¡»stopä¹‹åï¼Œæ‰èƒ½å¼€å§‹æ–°ä¸€è½®åŠ¨ç”»æ’­æ”¾ã€‚
è¿è¡Œå•å‡»å·¥å…·æ ä¸Šçš„ç»¿è‰²ä¸‰è§’å½¢ï¼Œé€‰æ‹©ä¸€ä¸ªAVDï¼Œè¿è¡Œå³å¯ã€‚
æ•ˆæœå±•ç¤º
ä»£ç åˆ†äº«https://github.com/voidking/android-frameanimation ï¼Œéœ€è¦çš„åŒå­¦ç§»æ­¥è‡ªå–ã€‚
åè®°ä¸€æ­¥ä¸€æ­¥ï¼Œä¸æ€•æ…¢ï¼Œèƒœåœ¨ä¸æ­¢ï¼
å‚è€ƒèµ„æ–™7å¤©å­¦ä¼šAndroidhttp://www.duobei.com/room/trial/9152038430
]]></content>
      <categories>
        <category>engineering</category>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidå¼€å‘â€”â€”Android Studio</title>
    <url>/dev-android-as/</url>
    <content><![CDATA[ç®€ä»‹Android Studio æ˜¯ä¸€ä¸ªAndroidå¼€å‘ç¯å¢ƒï¼ŒåŸºäºIntelliJ IDEA. ç±»ä¼¼ Eclipse ADTï¼ŒAndroid Studio æä¾›äº†é›†æˆçš„ Android å¼€å‘å·¥å…·ç”¨äºå¼€å‘å’Œè°ƒè¯•ã€‚
åœ¨IDEAçš„åŸºç¡€ä¸Šï¼ŒAndroid Studio æä¾›ï¼š

åŸºäºGradleçš„æ„å»ºæ”¯æŒ
Android ä¸“å±çš„é‡æ„å’Œå¿«é€Ÿä¿®å¤
æç¤ºå·¥å…·ä»¥æ•è·æ€§èƒ½ã€å¯ç”¨æ€§ã€ç‰ˆæœ¬å…¼å®¹æ€§ç­‰é—®é¢˜
æ”¯æŒProGuard å’Œåº”ç”¨ç­¾å
åŸºäºæ¨¡æ¿çš„å‘å¯¼æ¥ç”Ÿæˆå¸¸ç”¨çš„ Android åº”ç”¨è®¾è®¡å’Œç»„ä»¶
åŠŸèƒ½å¼ºå¤§çš„å¸ƒå±€ç¼–è¾‘å™¨ï¼Œå¯ä»¥è®©ä½ æ‹–æ‹‰ UI æ§ä»¶å¹¶è¿›è¡Œæ•ˆæœé¢„è§ˆ



ç•Œé¢1ã€Project é¢æ¿ç”¨äºæµè§ˆé¡¹ç›®æ–‡ä»¶ã€‚ Projecté¢æ¿ä¼šæ˜¾ç¤ºå½“å‰çš„æ‰€æœ‰çš„module ã€‚
2ã€Build Variants é¢æ¿ç”¨äºè®¾ç½®å½“å‰é¡¹ç›®çš„Build Variantsã€‚
3ã€Android é¢æ¿åŠŸèƒ½ç±»ä¼¼äºEclipseä¸­çš„Logcatï¼Œä½†æ˜¯æ¯”å…¶å¤šäº†ä¸€äº›å¸¸ç”¨åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼šæˆªå›¾ï¼ŒæŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯ç­‰ã€‚
4ã€ç¼–è¾‘åŒºç”¨äºç¼–è¾‘æ–‡ä»¶ã€‚
5ã€Gradle é¢æ¿Gradleä»»åŠ¡åˆ—è¡¨ï¼ŒåŒå‡»å¯æ‰§è¡ŒGradleä»»åŠ¡ã€‚å¸¸ç”¨ä»»åŠ¡ï¼š build ã€ clean ã€ assemble ã€ assembleRelease ã€ assembleDebug ã€ lint ã€‚
é¡¹ç›®ç»“æ„Androidæ¨¡å¼æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œé»˜è®¤é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼šå¯ä»¥çœ‹åˆ°å’ŒEclipseçš„ç›®å½•ç»“æ„æœ‰å¾ˆå¤§åŒºåˆ«ï¼ŒASä¸€ä¸ªçª—å£åªèƒ½æœ‰ä¸€ä¸ªé¡¹ç›®ï¼Œè€ŒEclipseåˆ™å¯ä»¥åŒæ—¶å­˜åœ¨å¾ˆå¤šé¡¹ç›®ã€‚
Projectæ¨¡å¼
ç›®å½•ç»“æ„ä¸­å°†javaä»£ç å’Œèµ„æºæ–‡ä»¶ï¼ˆå›¾ç‰‡ã€å¸ƒå±€æ–‡ä»¶ç­‰ï¼‰å…¨éƒ¨å½’ç»“ä¸ºsrcï¼Œåœ¨src/mainä¸‹ï¼Œæœ‰javaå’Œresä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œjavaæ–‡ä»¶å¤¹åˆ™ç›¸å½“äºEclipseä¸‹çš„srcæ–‡ä»¶å¤¹ï¼Œresç›®å½•ç»“æ„åˆ™ä¸€æ ·ã€‚
ä¸‹é¢è¯¦è§£ä¸€ä¸‹Projectæ¨¡å¼ä¸‹çš„ç›®å½•ç»“æ„ï¼š
.gradleå®˜ç½‘www.gradle.orgä¸Šä»‹ç»Gradleæ˜¯å‡çº§ç‰ˆ(evolved)çš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ã€‚å®ƒå¯ä»¥è‡ªåŠ¨æ„å»ºï¼Œæµ‹è¯•ï¼Œå‘å¸ƒï¼Œéƒ¨ç½²ï¼ŒåŒæ—¶ä½¿æ›´å¤šçš„è½¯ä»¶åŒ…æˆ–å…¶ä»–ç±»å‹è¯¸å¦‚ç”Ÿæˆé™æ€ç½‘ç«™ï¼Œæ–‡æ¡£ç­‰é¡¹ç›®è‡ªåŠ¨åŒ–ã€‚
è¯´ç™½äº†ï¼Œgradleæ˜¯mavençš„åŒç±»å·¥å…·ï¼Œè€Œä¸”æ¯”mavenæ›´å¥½ç”¨ã€‚
æ‰“å¼€.gradleæ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œé‡Œé¢é™¤äº†æœ‰é…ç½®æ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€äº›äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ç”±æ­¤ï¼ŒéƒåŒå­¦æ¨æµ‹ï¼Œè¿™ä¸ªç›®å½•ä¸­å­˜æ”¾çš„å°±æ˜¯gracleè¿™æ¬¾å·¥å…·ã€‚
.ideaProjectçš„é…ç½®æ–‡ä»¶ç›®å½•ï¼Œç±»ä¼¼Eclipseä¸­çš„project.propertiesã€‚
appä¸€ä¸ªModuleï¼ŒåŸºæœ¬å¼€å‘å•ä½ã€‚

buildæ„å»ºç›®å½•ï¼Œç›¸å½“äºEclipseä¸­é»˜è®¤Javaå·¥ç¨‹çš„binç›®å½•ã€‚ 

libsä¾èµ–åŒ…ã€‚

src/main/javaJavaä»£ç ã€‚

src/main/res/layoutAppå¸ƒå±€åŠç•Œé¢å…ƒç´ é…ç½®ã€‚

src/main/res/menuAppèœå•é…ç½®ã€‚

src/main/res/valuesdimens.xml å®šä¹‰cssçš„é…ç½®æ–‡ä»¶ï¼›strings.xml å®šä¹‰å­—ç¬¦ä¸²çš„é…ç½®æ–‡ä»¶ï¼›styles.xml å®šä¹‰styleçš„é…ç½®æ–‡ä»¶ã€‚

src/main/res/mipmap-*Appå›¾æ ‡ã€‚

src/main/AndroidMainfest.xmlAppåŸºæœ¬ä¿¡æ¯ï¼ˆåç§°ã€ç‰ˆæœ¬ã€SDKã€æƒé™ç­‰ç­‰ï¼‰ã€‚

src/.gitignoreé¡¾åæ€ä¹‰ï¼ŒéƒåŒå­¦çŒœæµ‹è¿™ä¸ªæ–‡ä»¶æ˜¯ç”¨æ¥é…ç½®ä¸Šä¼ åˆ°githubæ—¶å¿½ç•¥çš„æ–‡ä»¶å¤¹ã€‚

src/app.iml.imlæ–‡ä»¶æ˜¯ASè¯†åˆ«é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œè·ŸEclipseé‡Œé¢çš„.projectæ–‡ä»¶ä½œç”¨ç±»ä¼¼

src/build.gradlegradleæ„å»ºè„šæœ¬ã€‚

src/proguard-rules.proæ··æ·†è§„åˆ™çš„å£°æ˜ã€‚æ··æ·†ä»£ç ï¼Œå¯ä»¥ä¿æŠ¤è‡ªå·±çš„ä½œå“ä¸è¢«åˆ«äººç ´è§£ã€‚


build
gradle
.gitignoreç­‰.gitignoreã€build.gradleã€First.imlä¸‰ä¸ªæ–‡ä»¶ï¼Œåœ¨Moduleä¸­ä¹Ÿå­˜åœ¨ï¼Œåªä¸è¿‡ä½œç”¨èŒƒå›´ä¸ä¸€æ ·ã€‚
gradle.propertiesProject-wide Gradle settingsã€‚
gradlewå’Œgradlew.batgradlewæ˜¯ä¸€ä¸ªshellè„šæœ¬ï¼Œé€‚ç”¨äºLinuxï¼›gradlew.batæ˜¯ä¸€ä¸ªæ‰¹å¤„ç†æ–‡ä»¶ï¼Œé€‚ç”¨äºwindowsã€‚
gradlewï¼Œæ˜¯å¯¹gradleçš„ä¸€ä¸ªå°è£…ï¼Œåœ¨ä½¿ç”¨è¿™ä¸ªå‘½ä»¤æ—¶ä¼šè‡ªåŠ¨å»ä¸‹è½½gradleï¼Œå¦‚æœå·²ç»å®‰è£…äº†gradleåˆ™åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä½¿ç”¨çš„gradlewå‘½ä»¤åº”è¯¥éƒ½å¯ä»¥æ›¿æ¢æˆgradleã€‚è‡ªåŠ¨ä¸‹è½½gradleæ˜¯æ ¹æ®gradle\wrapperç›®å½•ä¸­çš„gradle-wrapper.propertiesä¸­é…ç½®çš„ï¼ŒdistributionUrl=https\://services.gradle.org/distributions/gradle-2.2.1-all.zip
local.propertiesThis file is automatically generated by Android Studioã€‚
setting.gradleé…ç½®Projectä¸­åŒ…å«çš„Moduleã€‚åœ¨å®Œå…¨åˆ é™¤æŸä¸ªModuleä¹‹å‰,å¦‚æœè¿˜æƒ³è¦æŠŠå®ƒæ·»åŠ åˆ°å½“å‰projectä¸­,ç›´æ¥setting.gradleä¸­æ·»åŠ è¯¥Moduleçš„åç§°å³å¯ã€‚

ASä¸­æœ‰Projectå’ŒModuleçš„æ¦‚å¿µï¼šproject in Android Studio is like a workspace in Eclipseã€‚module in Android Studio is like a project in Eclipseã€‚

å¢åˆ é¡¹ç›®æ–°å»ºProjectæ–°å»ºProjectçš„æ—¶å€™ï¼Œä¼šåŒæ—¶æ–°å»ºä¸€ä¸ªé»˜è®¤Moduleï¼Œnameä¸ºappï¼Œå¯ä»¥é‡å‘½åã€‚æ–°å»ºProjectå’Œæ‰“å¼€Projectï¼Œéƒ½ä¼šæ‰“å¼€ä¸€ä¸ªæ–°çš„ASçª—å£ï¼Œå¯ä»¥åœ¨èœå•æ Windowä¸­åˆ‡æ¢Projectã€‚
åˆ é™¤Projectåœ¨å·¥ä½œè·¯å¾„ä¸‹ï¼Œåˆ é™¤Projectæ–‡ä»¶å¤¹ã€‚
æ–°å»ºModuleæ–°å»ºModuleï¼Œå­˜æ”¾åœ¨å½“å‰çš„Projectä¸‹ï¼Œå…±äº«å½“å‰Projectçš„ä¸€äº›èµ„æºï¼Œæ¯”å¦‚External Librarieså’Œéƒ¨åˆ†é…ç½®æ–‡ä»¶ã€‚
åˆ é™¤Module1ã€Fileï¼ŒProject Structureï¼›æˆ–è€…å³å‡»é¡¹ç›®ï¼ŒOpen Module Settingsã€‚2ã€é€‰ä¸­Moduleï¼Œå•å‡»å³ä¸Šè§’çš„â€œ-â€å·ã€‚3ã€å³å‡»Moduleï¼ˆæ­¤æ—¶Moduleä¸Šçš„æ‰‹æœºç¬¦å·å·²ç»æ²¡æœ‰äº†ï¼‰ï¼Œdeleteã€‚
ä¸ªæ€§è®¾ç½®ç¼–è¾‘å™¨å­—ä½“1ã€Fileï¼ŒSettingsï¼›æˆ–è€…ç›´æ¥ç‚¹å‡»å·¥å…·æ çš„Settingsã€‚2ã€Editorï¼ŒColor&amp;Fontsï¼ŒFontã€‚3ã€æŠŠDarculaä¸»é¢˜sava asä¸ºè‡ªå·±çš„ä¸»é¢˜ï¼Œç„¶åè¿›è¡Œè®¾ç½®ã€‚
ç¼–ç æ ¼å¼é»˜è®¤ç¼–ç æ ¼å¼ï¼šFileï¼ŒOther Settingsï¼ŒDefault Settingsï¼ŒEditorï¼ŒFile Encodingsã€‚
å½“å‰Projectç¼–ç æ ¼å¼ï¼šFileï¼ŒSettingsï¼ŒEditorï¼ŒFile Encodingsã€‚
ä»£ç æç¤ºSettingsï¼ŒEditorï¼ŒGeneralï¼ŒCode Completionï¼ŒCase sensitive completionæ”¹ä¸ºNoneã€‚
æ‚¬åœæç¤ºSettingsï¼ŒEditorï¼ŒGeneralï¼ŒShow quick doc on mouse moveå‰æ‰“å‹¾ã€‚
Lintå·¥å…·å¯¹ä»£ç è¿›è¡Œæµ‹è¯•æ˜¯ä¸€å›äº‹ï¼Œä½†åŒæ ·é‡è¦çš„æ˜¯ã€æˆ‘ä»¬è¿˜éœ€è¦åœ¨ç¼–å†™ä»£ç çš„åŒæ—¶å¼•å…¥å„ç§æœ€ä½³å®è·µã€‚è¿™ä¸ä»…èƒ½å¤Ÿæ˜¾è‘—æ”¹è¿›æ€§èƒ½è¡¨ç°ï¼Œä¹Ÿèƒ½å¢åŠ åº”ç”¨ç¨‹åºçš„æ•´ä½“ç¨³å®šæ€§ã€‚å¦å¤–ï¼Œç»è¿‡åˆç†ç»“æ„è°ƒæ•´çš„é¡¹ç›®åœ¨ç»´æŠ¤æ–¹é¢ä¹Ÿæ›´ä¸ºè½»æ¾ã€‚
Android Studioä¸­æä¾›çš„Android Lintæ˜¯ä¸€æ¬¾é™æ€åˆ†æå·¥å…·ï¼Œå®ƒè´Ÿè´£å¯¹é¡¹ç›®æºä»£ç åŠ ä»¥åˆ†æã€‚å®ƒèƒ½å¤Ÿæ£€æµ‹å‡ºåº”ç”¨ç¨‹åºä¸­çš„æ½œåœ¨æ¼æ´ä»¥åŠå…¶å®ƒå¯èƒ½è¢«ç¼–è¯‘å™¨æ‰€å¿½ç•¥çš„å…¶å®ƒä»£ç é—®é¢˜ã€‚
å°±ä»¥ä¸‹é¢è¿™å¹…æˆªå›¾ä¸ºä¾‹ï¼Œå¤§å®¶å¯ä»¥çœ‹åˆ°è¯¥å¸ƒå±€ä¸­çš„LinearLayoutå¹¶æœªå¾—åˆ°å®é™…ä½¿ç”¨ã€‚Android Lintçš„ä¼˜åŠ¿åœ¨äºï¼Œå®ƒèƒ½å¸®åŠ©æˆ‘ä»¬é‡è§†è­¦å‘Šæˆ–æŠ¥é”™ä¿¡æ¯çš„å‡ºç°åŸå› ï¼Œä»è€Œæ›´è½»æ¾åœ°ä¿®å¤æˆ–è€…è§£å†³è¿™äº›é—®é¢˜ã€‚
è¯·å¤§å®¶å…»æˆé‡å¤ä½¿ç”¨Android Studio Lintå·¥å…·çš„å¥½ä¹ æƒ¯ï¼Œè¿™èƒ½å¸®åŠ©æˆ‘ä»¬å‡†ç¡®æ£€æµ‹åˆ°é¡¹ç›®å½“ä¸­å­˜åœ¨çš„æ½œåœ¨é—®é¢˜ã€‚Lintå·¥å…·ç”šè‡³èƒ½å‘Šè¯‰æˆ‘ä»¬åº”ç”¨ç¨‹åºä¸­æ˜¯å¦å­˜åœ¨é‡å¤çš„å›¾ç‰‡æˆ–è€…ç¼–è¯‘å†…å®¹ã€‚
è¦è¿è¡ŒLintå·¥å…·ï¼Œå¤§å®¶é¦–å…ˆéœ€è¦åœ¨Android Studioçš„â€œAnalyzeâ€èœå•ä¸­é€‰æ‹©â€œInspect Codeâ€¦â€ã€‚å½“Android Studioå®Œæˆäº†å¯¹é¡¹ç›®çš„æ£€æµ‹ä¹‹åï¼Œå®ƒä¼šåœ¨çª—å£åº•éƒ¨æ˜¾ç¤ºå‡ºåˆ†æç»“æœã€‚è¯·æ³¨æ„ï¼Œé™¤äº†Android Lintä¹‹å¤–ï¼ŒAndroid Studioè¿˜æä¾›ä¸€ç³»åˆ—å…¶å®ƒæ£€æŸ¥åŠŸèƒ½ã€‚åªéœ€åŒå‡»æŸä¸ªå·²ç»å‘ç°çš„é—®é¢˜ï¼Œç³»ç»Ÿå°±ä¼šå¸®åŠ©å¤§å®¶å®šä½åˆ°å¯¹åº”æ–‡ä»¶ä¸­å­˜åœ¨é—®é¢˜çš„ä½ç½®ã€‚
å¯Œå¸ƒå±€ç¼–è¾‘å™¨ASæä¾›ä¸€å¥—å¯Œå¸ƒå±€ç¼–è¾‘å™¨ï¼Œå¤§å®¶å¯ä»¥åœ¨å…¶ä¸­éšæ„æ‹–æ‹½å„ç±»ç”¨æˆ·ç•Œé¢ç»„ä»¶ã€‚å¤§å®¶è¿˜å¯ä»¥åœ¨å¤šå±å¹•é…ç½®ä¸­åŒæ—¶æŸ¥çœ‹å¤šç§å¸ƒå±€çš„æ˜¾ç¤ºæ•ˆæœï¼Œè¿™ä¸€ç‚¹æˆ‘ä»¬åœ¨å‰æ–‡ä¸­å·²ç»æåˆ°è¿‡ã€‚
è¿™æ¬¾å¯Œå¸ƒå±€ç¼–è¾‘å™¨åœ¨ä½¿ç”¨æ–¹é¢éå¸¸ç›´è§‚ç®€å•ã€‚æˆ‘ä»¬é¦–å…ˆéœ€è¦ä¸€å¥—è¦å¤„ç†çš„å¸ƒå±€æ–¹æ¡ˆã€‚æµè§ˆåˆ°é¡¹ç›®ä¸­resæ–‡ä»¶å¤¹ä¸‹çš„layoutæ–‡ä»¶å¤¹ï¼Œå³é”®ç‚¹å‡»layoutæ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨å¼¹å‡ºçš„èœå•ä¸­é€‰æ‹©New&gt;Layout resource fileã€‚
ä¸‹é¢ä¸ºæ–°å¸ƒå±€è®¾å®šä¸€ä¸ªåç§°ä¸rootå…ƒç´ ï¼Œè€Œåç‚¹å‡»â€œOKâ€ã€‚ASä¼šè‡ªåŠ¨åœ¨çª—å£å³ä¾§çš„ç¼–è¾‘å™¨å½“ä¸­æ‰“å¼€è¯¥å¸ƒå±€ã€‚
åœ¨ç¼–è¾‘å™¨çš„åº•éƒ¨ï¼Œå¤§å®¶ä¼šçœ‹åˆ°ä¸¤ä¸ªæ ‡ç­¾ï¼Œåˆ†åˆ«æ˜¯Designä¸Textã€‚ç‚¹å‡»Textæ ‡ç­¾åç¼–è¾‘å™¨å°†è¢«æ¿€æ´»ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å¯¹å½“å‰é€‰å®šçš„å¸ƒå±€æ–¹æ¡ˆä½œå‡ºå˜æ›´ã€‚
ç‚¹å‡»Designæ ‡ç­¾åˆ™ä¼šæ¿€æ´»å¦ä¸€å¥—ç¼–è¾‘å™¨å†…å®¹ï¼Œå…¶ä¸­æ˜¾ç¤ºå‡ºå¸ƒå±€çš„é¢„è§ˆæ•ˆæœã€‚è¦å‘å¸ƒå±€å½“ä¸­æ·»åŠ å…¶å®ƒåŠŸèƒ½æ€§ç»„ä»¶ï¼Œæˆ‘ä»¬åªéœ€å°†å…¶ä»å¸ƒå±€å·¦ä¾§çš„ç»„ä»¶åˆ—è¡¨ä¸­æ‹–å‡ºå¹¶æ”¾å…¥å¸ƒå±€å†…å³å¯ã€‚æ˜¯çš„ï¼Œå°±è¿™ä¹ˆç®€å•ã€‚

å¿«æ·é”®Settingsï¼ŒKeymapï¼Œé€‰æ‹©ä¸€ä¸ªKeymapsã€‚å¦‚æœä¹ æƒ¯ç”¨Eclipseï¼Œé‚£ä¹ˆä¸å¦¨é€‰æ‹©Eclipseã€‚è°·æ­Œå»ºè®®ä½¿ç”¨é»˜è®¤å¿«æ·é”®ï¼Œå› ä¸ºæ¯”Eclipseè¦ä¸°å¯Œã€‚å¦‚æœä½¿ç”¨é»˜è®¤å¿«æ·é”®ï¼Œä¸‹é¢çš„å‡ ä¸ªå¿«æ·é”®æœ€å¥½è®°ä½ã€‚
ctrl+shift+enterä»£ç è‡ªåŠ¨è¡¥å…¨ã€‚
alt+enterä»£ç æç¤ºã€‚
ctrl+alt+oå¼•å…¥åŒ…ç®¡ç†ã€‚
ctrl+qæŸ¥çœ‹å®šä¹‰ã€‚
ctrl+alt+tå¼¹å‡ºåŒ…å›´ç»“æ„ã€‚
ctrl+jæ¨¡æ¿æç¤ºã€‚
åè®°ASå¾ˆå¼ºå¤§ï¼Œä¸å¯èƒ½é¢é¢ä¿±åˆ°ï¼Œå…ˆå°±è¿™äº›å§ã€‚æ— è®ºä½¿ç”¨ä»€ä¹ˆå·¥å…·ï¼Œå½“ä½ å¼€å§‹ä½¿ç”¨å®ƒï¼Œä¸€åˆ‡éƒ½ä¼šå˜å¾—ç®€å•ï¼
å‚è€ƒæ–‡æ¡£ä¸Android Studioçš„ç¬¬ä¸€æ¬¡äº²å¯†æ¥è§¦http://www.imooc.com/learn/206
Android Studio å¸¸ç”¨åŠŸèƒ½ä»‹ç»http://ask.android-studio.org/?/article/23
Android Studioç³»åˆ—æ•™ç¨‹äºŒâ€“åŸºæœ¬è®¾ç½®ä¸è¿è¡Œhttp://stormzhang.com/devtools/android-studio-tutorial2/
Androidå­¦ä¹ ç³»åˆ—(41)â€“Android Studioç®€å•ä½¿ç”¨http://www.cnblogs.com/qianxudetianxia/p/3848272.html
æœ€å…¨é¢çš„Android Studioä½¿ç”¨æ•™ç¨‹http://www.open-open.com/lib/view/open1416883124753.html
GradleåŸºç¡€http://segmentfault.com/a/1190000002439306
]]></content>
      <categories>
        <category>engineering</category>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidå¼€å‘â€”â€”helloworld</title>
    <url>/dev-android-helloworld/</url>
    <content><![CDATA[å‰è¨€Androidçš„å­¦ä¹ ï¼Œæ‹–æ‹‰äº†å¤ªä¹…å¤ªä¹…ï¼Œè¿™ä¸ªå¤å¤©ï¼Œæä¸ªä½œå“å‡ºæ¥å§ï¼ä»0å¼€å§‹ï¼Œç”¨åšå®¢è®°å½•è¿›åº¦ï¼
å·¥å…·ä¹‹å‰ä½¿ç”¨adtï¼Œæ–­æ–­ç»­ç»­å­¦ä¹ è¿‡å®‰å“å¼€å‘ã€‚ä»Šå¹´è°·æ­Œå®£å¸ƒAndroid Studioå°†å–ä»£Eclipseï¼Œæ­£å¼æˆä¸ºå®˜æ–¹é›†æˆå¼€å‘è½¯ä»¶ï¼Œä¸­æ­¢å¯¹åè€…æ”¯æŒã€‚éƒåŒå­¦ä¹Ÿç´§è·Ÿæ½®æµï¼Œæ¢ç”¨Android Studioï¼ˆä»¥åç®€ç§°ASï¼‰ã€‚


æ­¥éª¤ä¸‹è½½å®‰è£…1ã€Android Studioä¸­æ–‡ç¤¾åŒºhttp://www.android-studio.org/
2ã€ç™¾åº¦â€œAndroid Studioâ€ï¼Œä»ç™¾åº¦è½¯ä»¶ä¸­å¿ƒä¸‹è½½å³å¯ã€‚
æ–°å»ºå·¥ç¨‹æ‰“å¼€ASï¼Œé€‰æ‹©å·¥ä½œè·¯å¾„ï¼Œè¾“å…¥å·¥ç¨‹åï¼ˆé¦–å­—æ¯ä¹ æƒ¯å¤§å†™ï¼‰ï¼Œé€‰æ‹©sdkç‰ˆæœ¬ï¼Œé€‰æ‹©ä¸€ä¸ªæ¨¡æ¿ï¼Œfinishå³å¯ã€‚ï¼ˆå’ŒEclipseéå¸¸ç±»ä¼¼ï¼‰
æ–°å»ºæ¨¡æ‹Ÿå™¨ç‚¹å‡»AVD Managerï¼ŒCreate Virtual Deviceï¼Œé€‰æ‹©ä¸€æ¬¾æ¨¡æ‹Ÿå™¨ï¼Œnextï¼Œè¾“å…¥æ¨¡æ‹Ÿå™¨åç§°ï¼Œfinishå³å¯ã€‚
è¿è¡Œç‚¹å‡»Run â€˜appâ€™ï¼ŒChoose Deviceï¼ŒOKã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥çœ‹åˆ°ç»å…¸çš„â€œhelloworldâ€äº†ã€‚éƒåŒå­¦åœ¨å¯åŠ¨AVDçš„æ—¶å€™å‡ºç°äº†ç«¯å£å†²çªï¼Œä¸‹é¢æ˜¯è§£å†³åŠæ³•ã€‚
ç«¯å£å†²çªè¯¦ç»†æè¿°å¯åŠ¨AVDæŠ¥é”™ï¼š
è§£å†³åŠæ³•æŸ¥çœ‹ç«¯å£netstat -ano|findstr &quot;5037&quot;çœ‹åˆ°PIDä¸º20968ã€‚
killè¿›ç¨‹ctrl+shift+escï¼Œæ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œè¯¦ç»†ä¿¡æ¯ï¼Œæ‰¾åˆ°PIDä¸º20968çš„è¿›ç¨‹ï¼Œç»“æŸè¿›ç¨‹ã€‚
è¿è¡Œç»“æœè§£å†³å®Œä¸Šè¿°é”™è¯¯ï¼Œå†æ¬¡Run â€˜appâ€™ï¼Œå°±å¯ä»¥çœ‹åˆ°ï¼š
åè®°å®‰å“å¼€å‘ï¼Œå°±å½“åšå¨±ä¹æ¥æå§ã€‚ç™½å¤©å¤ä¹ å¤‡è€ƒï¼Œæ™šä¸Šææå¼€å‘ï¼Œä¹Ÿæ˜¯ä¸€ä»¶å¾ˆæœ‰æ„æ€çš„äº‹æƒ…ã€‚è´µåœ¨åšæŒï¼Œä¸å‡ºä½œå“ä¸æ­¢ï¼
]]></content>
      <categories>
        <category>engineering</category>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdownæ–‡æ¡£å¯¼å‡ºä¸ºpdf</title>
    <url>/hobby-markdown-to-pdf/</url>
    <content><![CDATA[ä¸€ç›´éå¸¸çœ¼çƒ­Macä¸‹çš„Mouï¼Œä»Markdownå¯¼å‡ºpdféå¸¸æ–¹ä¾¿ï¼Œè€Œä¸”æ ¼å¼è‰¯å¥½ã€‚
æ²¡æœ‰Macï¼Œåªèƒ½æ‰¾ä¸€äº›Windowsä¸‹å¯ä»¥ä½¿ç”¨çš„å·¥å…·ã€‚ä¹‹å‰ä¸€ç›´ä½¿ç”¨MarkdownPad2ï¼Œè¿™è´§å¯¼å‡ºæ ¼å¼ç‰¹åˆ«éš¾çœ‹å°±ç®—äº†ï¼Œè€Œä¸”ï¼Œæ”¶è´¹ï¼
ä»Šå¤©æ‰¾åˆ°äº†å¦ä¸€ç§æ–¹å¼ï¼Œè™½ç„¶éº»çƒ¦äº†ä¸€ç‚¹ç‚¹ï¼Œä½†æ˜¯æ ¼å¼å¾ˆä¸é”™ã€‚ç°è®°å½•å¦‚ä¸‹ï¼š1ã€ä½¿ç”¨åœ¨çº¿ç¼–è¾‘å™¨StackEditï¼šhttps://stackedit.io/editor
2ã€é¢„è§ˆ
3ã€æ‰“å°æ‰“å°æ—¶ä¿å­˜ä¸ºpdfã€‚
4ã€æ·»åŠ ä¹¦ç­¾ä½¿ç”¨ç¦æ˜•PDFé˜…è¯»å™¨æ·»åŠ ä¹¦ç­¾ï¼ˆåŒ…æ‹¬å­ç›®å½•ä¹¦ç­¾ï¼‰ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxå¤ä¹ æ•´ç†</title>
    <url>/dev-linux-review/</url>
    <content><![CDATA[é¢˜å‹1ã€å¡«ç©ºï¼ˆ10*1â€™)2ã€é€‰æ‹©ï¼ˆ10*1â€™ï¼‰3ã€ç®€å•æ“ä½œé¢˜ï¼ˆå†™å‘½ä»¤ï¼‰(5*2â€™)4ã€ç®€ç­”é¢˜ï¼ˆ6*5â€™ï¼‰5ã€ç»¼åˆé¢˜ï¼ˆ2*20â€™ï¼‰ï¼ˆç¨‹åºæˆ–è€…æµç¨‹å›¾ï¼‰
è€ƒçº²å‘½ä»¤é¢˜å®šæ—¶ä»»åŠ¡å¦‚ä½•è®¾è®¡å°æ˜æ˜¯ä¸ªç½‘ç®¡ï¼Œè€æ¿è¦æ±‚ä»–æ¯å¤©æ—©æ™¨3ç‚¹èµ·æ¥çœ‹çœ‹ç£ç›˜ç©ºé—´æ»¡ä¸æ»¡ï¼Œè¯·é—®ä½ å¦‚ä½•ç”¨å­¦è¿‡çš„çŸ¥è¯†ä¸ºå°æ˜è§£å†³è¿™ä¸€ç—›è‹¦çš„é—®é¢˜ã€‚


ç¼–å†™è„šæœ¬æ–‡ä»¶å‡è®¾åœ¨/rootç›®å½•ä¸‹ï¼švim diskfree.shï¼Œå†…å®¹å¦‚ä¸‹ï¼š
#!/bin/bash#å–å¾—æ¯ä¸ªåˆ†åŒºçš„ä½¿ç”¨ç™¾åˆ†æ¯”ï¼ˆä¸è¦ç™¾åˆ†å·ï¼‰percent=`df -h | grep -v Filesystem| awk &#x27;&#123;print int($5)&#125;&#x27;`#å¾ªç¯åˆ¤æ–­åˆ†åŒºä½¿ç”¨ç‡æ˜¯å¦è¶…è¿‡90%for each_one in $percentdo		#åˆ¤æ–­ä½¿ç”¨ç‡æ˜¯å¦è¶…è¿‡90%        if [ $each_one -ge 90 ];then				#å¦‚æœè¶…è¿‡90 åˆ™æŠŠä½¿ç”¨æƒ…å†µå‘ç»™mail_address                df | mail -s &quot;Disk Critical&quot; mail_address        fidone
ç¨å¾®è§£é‡Šä¸€ä¸‹ä»£ç ï¼šdfï¼Œæ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ç©ºé—´å ç”¨æƒ…å†µï¼›-hï¼Œä»¥æ–¹ä¾¿é˜…è¯»æ–¹å¼å±•ç¤ºï¼Œè¿™ä¸ªå‚æ•°å¯ä¸åŠ ã€‚|ï¼Œç®¡é“å‘½ä»¤ï¼Œå·¦ä¾§å‘½ä»¤çš„å¤„ç†ç»“æœä¼ é€’ç»™å³ä¾§ã€‚grep -vï¼Œå¿½ç•¥å«æœ‰Filesystemçš„è¿™ä¸€è¡Œã€‚awk â€˜{print int($5)}â€™ï¼Œé€è¡Œè¯»å…¥æ–‡ä»¶æµï¼Œä»¥ç©ºæ ¼æˆ–TABä¸ºé»˜è®¤åˆ†éš”ç¬¦å°†æ¯è¡Œåˆ‡ç‰‡ï¼Œåˆ‡å¼€çš„éƒ¨åˆ†å†è¿›è¡Œå„ç§åˆ†æå¤„ç†ã€‚è¿™é‡Œå®ç°çš„æ•ˆæœæ˜¯ï¼ŒæŠŠç¬¬5ä¸ªåŸŸï¼ˆUse%ï¼‰çš„æ•°æ®è½¬æ¢ä¸ºintç±»å‹ã€‚-geï¼Œå¤§äºæˆ–ç­‰äºï¼Œå¯ä»¥æ¢æˆ-gtï¼Œè¡¨ç¤ºå¤§äºã€‚mail -sï¼Œä¹‹åè·Ÿçš„æ˜¯æ ‡é¢˜å’Œæ”¶ä»¶äººé‚®ç®±ï¼Œç®¡é“ä¹‹å‰çš„æ˜¯å†…å®¹ã€‚
æ·»åŠ æ‰§è¡Œæƒé™chmod +x diskfree.sh
æ·»åŠ è‡ªåŠ¨æ‰§è¡Œvim /etc/crontabï¼Œè¿½åŠ å¦‚ä¸‹ä¸€å¥ï¼š
0 3 * * * root /root/diskfree.sh &gt; /dev/null 2&gt;&amp;1
ä¸Šé¢çš„ä»£ç ä¾æ¬¡å¯¹åº”ï¼š
mï¼ˆåˆ†ï¼‰ï¼š1ï½59 æ¯åˆ†é’Ÿç”¨*æˆ–è€… */1è¡¨ç¤ºhï¼ˆæ—¶ï¼‰ï¼š1ï½23ï¼ˆ0è¡¨ç¤º0ç‚¹ï¼‰domï¼ˆæ—¥ï¼‰ï¼š1ï½31monï¼ˆæœˆï¼‰ï¼š1ï½12dowï¼ˆå‘¨ï¼‰ï¼š0ï½6ï¼ˆ0è¡¨ç¤ºæ˜ŸæœŸå¤©ï¼‰userï¼ˆç”¨æˆ·ï¼‰ï¼šç”¨æˆ·commandï¼ˆå‘½ä»¤ï¼‰ï¼šå‘½ä»¤
ä¸‹é¢æ˜¯ä¸€äº›æ—¶é—´ä¾‹å­ï¼š1ã€æ¯å¤©æ—©ä¸Š6ç‚¹10åˆ†2ã€æ¯ä¸¤ä¸ªå°æ—¶3ã€æ™šä¸Š11ç‚¹åˆ°æ—©ä¸Š8ç‚¹ä¹‹é—´æ¯ä¸¤ä¸ªå°æ—¶ï¼Œæ—©ä¸Š8ç‚¹4ã€æ¯ä¸ªæœˆçš„4å·å’Œæ¯ä¸ªç¤¼æ‹œçš„ç¤¼æ‹œä¸€åˆ°ç¤¼æ‹œä¸‰çš„æ—©ä¸Š11ç‚¹5ã€1æœˆä»½æ—¥æ—©ä¸Š4ç‚¹ 
10 6 * * * 0 */2 * * * 0 23-7/2ï¼Œ8 * * * 0 11 4 * mon-wed 0 4 1 jan * 


&gt; /dev/null 2&gt;&amp;1ï¼Œè¿™ä¸€å¥å¯ä»¥çœç•¥ã€‚å¦‚æœä¸åŠ è¿™ä¸€å¥ï¼Œå½“ç¨‹åºåœ¨ä½ æ‰€æŒ‡å®šçš„æ—¶é—´æ‰§è¡Œåï¼Œç³»ç»Ÿä¼šå‘ä¸€ä»½é‚®ä»¶åˆ°ä½ çš„mailé‡Œé¢(/usr/spool/mail/ç”¨æˆ·å)ï¼Œæ˜¾ç¤ºè¯¥ç¨‹åºæ‰§è¡Œçš„å†…å®¹ã€‚

å‘½ä»¤ä½¿ç”¨mvæŸé¢†å¯¼è¦æ±‚å°åˆšæŠŠbinç›®å½•ä¸‹åç¼€åä¸ºâ€œ.tx.htmâ€çš„æ–‡ä»¶é‡å‘½åä¸ºâ€œ.htmlâ€å‡è®¾å½“å‰ç›®å½•ä¸ºbinï¼Œåˆ™ï¼š1ã€å•ä¸ªæ–‡ä»¶é‡å‘½åmv test.tx.htm test.html2ã€æ‰¹é‡é‡å‘½årename &#39;s/\.tx\.htm$/\.html/&#39; *.tx.htmPSï¼šç§»åŠ¨æ–‡ä»¶mv test.tx.htm ..ï¼ŒæŠŠtest.tx.htmç§»åŠ¨åˆ°ä¸Šä¸€å±‚ç›®å½•ã€‚
mountæŠŠ/dev/sdb1æŒ‚è½½åˆ°/mnt/sdb1ã€‚mkdir /mnt/sdb1ï¼Œæ–°å»ºæ–‡ä»¶å¤¹sdb1ã€‚mount /dev/sdb1 /mnt/sdb1ï¼ŒæŒ‚è½½ã€‚umount /mnt/sdb1ï¼Œå¸è½½ã€‚
cpç™»å½•åˆ°ç”µä¿¡æœºæˆ¿ï¼Œå‘ç°æœ¨æœ‰æ˜¾ç¤ºå±ï¼Œè¯·é—®å¦‚ä½•æŠŠcanç›®å½•åº•ä¸‹æ‰€æœ‰åç¼€åä¸ºâ€œtxtâ€çš„æ–‡ä»¶æ‹·è´åˆ°Uç›˜ä¸­ï¼Œå‡è®¾Uç›˜çš„ç›®å½•æ˜¯/udskï¼Œå½“å‰æ‰€åœ¨ç›®å½•ä¸ºcanã€‚cp *.txt /udsk
passwdç»™æ–°å‘˜å·¥å°æ˜åˆ†é…ä¸€ä¸ªè´¦æˆ·å¹¶è®¾ç½®é»˜è®¤å¯†ç â€œ12345678â€ã€‚useradd xiaomingpasswd xiaomingï¼Œä¹‹åä¸¤æ¬¡è¾“å…¥å¯†ç 12345678
ifconfigå°æ˜å‘ç°ç½‘ç»œä¸é€šï¼Œä»–æƒ³çœ‹çœ‹ç¬¬äºŒå—ç½‘å¡æ˜¯å¦åˆ†æ­£å¸¸åˆ†é…äº†IPåœ°å€ï¼Œä»–å¦‚ä½•ä¸ºç¬¬äºŒå—ç½‘å¡åˆ†é…192.168.1.1ã€‚ifconfig eth1ifconfig eth1 192.168.1.1 netmask 255.255.255.0
netstatæŸwebæœåŠ¡å™¨éƒ¨ç½²åœ¨linuxä¸Šï¼Œå½“è¿œç¨‹ç™»å½•æ—¶å‘ç°è¯¥åº”ç”¨ä¸é€šã€‚è¯·é—®å¦‚ä½•æ£€æŸ¥è¯¥åº”ç”¨æ˜¯å¦èµ·åŠ¨ï¼Œå‡è®¾è¯¥åº”ç”¨çš„æœåŠ¡ç«¯å£å·æ˜¯â€œ8181â€ã€‚netstat -anp | grep 8181

a ï¼šallï¼Œè¡¨ç¤ºåˆ—å‡ºæ‰€æœ‰çš„è¿æ¥ï¼ŒæœåŠ¡ç›‘å¬ï¼ŒSocketèµ„æ–™
t ï¼štcpï¼Œåˆ—å‡ºtcpåè®®çš„æœåŠ¡
u ï¼šudpï¼Œåˆ—å‡ºudpåè®®çš„æœåŠ¡
n ï¼šport numberï¼Œ ç”¨ç«¯å£å·æ¥æ˜¾ç¤º
l ï¼šlisteningï¼Œåˆ—å‡ºå½“å‰ç›‘å¬æœåŠ¡
p ï¼šprogramï¼Œåˆ—å‡ºæœåŠ¡ç¨‹åºçš„PID

pwdå¦‚ä½•çŸ¥é“å·¥ä½œç›®å½•ï¼Ÿpwd
-Pï¼šå¦‚æœå½“å‰çš„å·¥ä½œè·¯å¾„æ˜¯é“¾æ¥çš„è¯ï¼Œæ˜¾ç¤ºé“¾æ¥çš„åŸå§‹è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯å®é™…è·¯å¾„ã€‚
whoå½“å‰ç»ˆç«¯ç™»å½•çš„ç”¨æˆ·æ˜¯è°ï¼Ÿwho am i
lsæŸ¥çœ‹å½“å‰æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…å«éšè—æ–‡ä»¶å’Œå±æ€§ls -la
ç®€ç­”é¢˜Linuxæœ‰å“ªäº›è¿è¡Œçº§åˆ«ï¼ŸLinuxç³»ç»Ÿæœ‰7ä¸ªè¿è¡Œçº§åˆ«(runlevel)ã€‚è¿è¡Œçº§åˆ«0ï¼šç³»ç»ŸåœæœºçŠ¶æ€ï¼Œç³»ç»Ÿé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º0ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨è¿è¡Œçº§åˆ«1ï¼šå•ç”¨æˆ·å·¥ä½œçŠ¶æ€ï¼Œrootæƒé™ï¼Œç”¨äºç³»ç»Ÿç»´æŠ¤ï¼Œç¦æ­¢è¿œç¨‹ç™»é™†è¿è¡Œçº§åˆ«2ï¼šå¤šç”¨æˆ·çŠ¶æ€(æ²¡æœ‰NFS)è¿è¡Œçº§åˆ«3ï¼šå®Œå…¨çš„å¤šç”¨æˆ·çŠ¶æ€(æœ‰NFS)ï¼Œç™»é™†åè¿›å…¥æ§åˆ¶å°å‘½ä»¤è¡Œæ¨¡å¼è¿è¡Œçº§åˆ«4ï¼šç³»ç»Ÿæœªä½¿ç”¨ï¼Œä¿ç•™è¿è¡Œçº§åˆ«5ï¼šX11æ§åˆ¶å°ï¼Œç™»é™†åè¿›å…¥å›¾å½¢GUIæ¨¡å¼è¿è¡Œçº§åˆ«6ï¼šç³»ç»Ÿæ­£å¸¸å…³é—­å¹¶é‡å¯ï¼Œé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º6ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨
PSï¼š1ã€æŸ¥çœ‹å½“å‰è¿è¡Œçº§åˆ«runlevel2ã€åˆ‡æ¢è¿è¡Œçº§åˆ«init Nï¼ŒNçš„å€¼ä¸º0åˆ°6ï¼Œå…¶ä¸­ï¼Œ0ä¸ºå…³æœºï¼Œ6ä¸ºé‡å¯ã€‚
å¦‚ä½•åˆ›å»ºä¸€ä¸ªç”¨æˆ·ï¼Ÿ1ã€suï¼Œåˆ‡æ¢åˆ°rootç”¨æˆ·ã€‚2ã€useradd testuserï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºtestuserçš„ç”¨æˆ·ã€‚

cï¼š commentï¼ŒæŒ‡å®šä¸€æ®µæ³¨é‡Šæ€§æè¿°ã€‚
dï¼šç›®å½•ï¼ŒæŒ‡å®šç”¨æˆ·ä¸»ç›®å½•ï¼Œå¦‚æœæ­¤ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åŒæ—¶ä½¿ç”¨-mé€‰é¡¹ï¼Œå¯ä»¥åˆ›å»ºä¸»ç›®å½•ã€‚
gï¼šç”¨æˆ·ç»„ï¼ŒæŒ‡å®šç”¨æˆ·æ‰€å±çš„ç”¨æˆ·ç»„ã€‚

3ã€passwd testuserï¼Œä¹‹åå›è½¦ï¼Œä¸ºtestuserè®¾ç½®å¯†ç ã€‚
æ–‡ä»¶ç³»ç»Ÿlinuxæœ‰å“ªäº›å¸¸è§çš„æ–‡ä»¶ç³»ç»Ÿï¼Ÿlinuxç®¡ç†Windowsä¸‹çš„æ–‡ä»¶ç³»ç»Ÿï¼Ÿ
linuxå¸¸è§çš„æ–‡ä»¶ç³»ç»Ÿæœ‰extã€ext2ã€ext3ã€ext4ã€JFSã€XFSã€ReiserFSç­‰ã€‚å‡è®¾linuxä¸‹æœ‰ä¸€ä¸ªç›˜hda1çš„æ–‡ä»¶ç³»ç»Ÿä¸ºfat32ï¼Œé‚£ä¹ˆï¼šmkdir /mnt/win1mount -t vfat /dev/hda1 /mnt/win1å‡è®¾linuxä¸‹æœ‰ä¸€ä¸ªç›˜hda2çš„æ–‡ä»¶ç³»ç»Ÿä¸ºntfsï¼Œå¦‚æœå†…æ ¸æ”¯æŒntfsï¼Œé‚£ä¹ˆï¼šmkdir /mnt/win2mount -t ntfs /dev/hda2 /mnt/win2å‡è®¾linuxä¸‹æœ‰ä¸€ä¸ªç›˜hda2çš„æ–‡ä»¶ç³»ç»Ÿä¸ºntfsï¼Œå¦‚æœå†…æ ¸ä¸æ”¯æŒntfsï¼Œé‚£ä¹ˆï¼šapt-get intall ntfs-3gï¼Œæ­¤å‘½ä»¤é€‚åˆUbuntuç³»ç»Ÿmkdir /mnt/win2ntfs-3g /dev/hda2 /mnt/win2
gcc/g++gccç¼–è¯‘çš„æ­¥éª¤æœ‰å“ªäº›ï¼Ÿä¼šç”Ÿæˆå“ªäº›æ–‡ä»¶ï¼Ÿ
gcc/g++åœ¨æ‰§è¡Œç¼–è¯‘å·¥ä½œçš„æ—¶å€™ï¼Œæ€»å…±éœ€è¦4æ­¥ã€‚1ã€é¢„å¤„ç†ï¼Œç”Ÿæˆ.içš„æ–‡ä»¶ã€‚ï¼ˆé¢„å¤„ç†å™¨cppï¼‰2ã€å°†é¢„å¤„ç†åçš„æ–‡ä»¶è½¬æ¢æˆæ±‡ç¼–ä»£ç ï¼Œç”Ÿæˆæ–‡ä»¶.sã€‚ï¼ˆç¼–è¯‘å™¨egcsï¼‰3ã€å°†æ±‡ç¼–ä»£ç å˜ä¸ºç›®æ ‡ä»£ç (æœºå™¨ä»£ç )ç”Ÿæˆ.oçš„æ–‡ä»¶ã€‚ï¼ˆæ±‡ç¼–å™¨asï¼‰4ã€è¿æ¥ç›®æ ‡ä»£ç ï¼Œç”Ÿæˆå¯æ‰§è¡Œç¨‹åºã€‚ï¼ˆé“¾æ¥å™¨ldï¼‰
å‡è®¾hello.cä¸ºæœ€åˆçš„æºä»£ç ï¼šgcc -E hello.c -o hello.iï¼Œç”Ÿæˆç»è¿‡é¢„å¤„ç†çš„ä»£ç ï¼›gcc -S hello.i -o hello.sï¼Œç”Ÿæˆæ±‡ç¼–å¤„ç†åçš„æ±‡ç¼–ä»£ç ï¼›gcc -c hello.s -o hello.oï¼Œç”Ÿæˆç¼–è¯‘åçš„ç›®æ ‡æ–‡ä»¶ï¼Œå«æœ‰æœ€ç»ˆç¼–è¯‘å‡ºçš„æœºå™¨ç ï¼Œä½†å®ƒé‡Œé¢æ‰€å¼•ç”¨çš„å…¶ä»–æ–‡ä»¶ä¸­å‡½æ•°çš„å†…å­˜ä½ç½®å°šæœªå®šä¹‰ï¼›gcc hello.o -o helloï¼Œå¯æ‰§è¡Œç¨‹åºã€‚ä¸Šé¢çš„å››ä¸ªå‘½ä»¤ï¼Œå¯ä»¥åˆæˆä¸€ä¸ªgcc hello.c -o helloã€‚
viçš„ä½¿ç”¨viæœ‰å“ªäº›ä½¿ç”¨æ–¹æ³•æœ‰å“ªäº›æ¨¡å¼ï¼Ÿæ¨¡å¼ä¸‹æœ‰æ€æ ·çš„ç¼–è¾‘ï¼Ÿå¦‚ä½•ä¸ºviå½“ä¸­å¢åŠ è¡Œå·ï¼Ÿ
ä¸‰ç§æ¨¡å¼ï¼š

å‘½ä»¤è¡Œæ¨¡å¼ï¼ˆcommand modeï¼‰ï¼šæ§åˆ¶å±å¹•å…‰æ ‡çš„ç§»åŠ¨ï¼Œå­—ç¬¦ã€å­—æˆ–è¡Œçš„åˆ é™¤ï¼Œç§»åŠ¨å¤åˆ¶æŸåŒºæ®µç­‰ã€‚æŒ‰ä¸‹â€œiâ€ï¼Œè¿›å…¥æ’å…¥æ¨¡å¼ï¼›æŒ‰ä¸‹â€œ:â€ï¼Œè¿›å…¥åº•è¡Œæ¨¡å¼ã€‚

æ’å…¥æ¨¡å¼ï¼ˆInsert modeï¼‰ï¼šåªæœ‰åœ¨Insert modeä¸‹ï¼Œæ‰å¯ä»¥åšæ–‡å­—è¾“å…¥ï¼ŒæŒ‰ã€ŒESCã€é”®å¯å›åˆ°å‘½ä»¤è¡Œæ¨¡å¼ã€‚

åº•è¡Œæ¨¡å¼ï¼ˆlast line modeï¼‰ï¼šå°†æ–‡ä»¶ä¿å­˜æˆ–é€€å‡ºviï¼Œä¹Ÿå¯ä»¥è®¾ç½®ç¼–è¾‘ç¯å¢ƒï¼Œå¦‚å¯»æ‰¾å­—ç¬¦ä¸²ã€åˆ—å‡ºè¡Œå·â€¦â€¦ç­‰ã€‚


å¢åŠ è¡Œå·ï¼šåœ¨åº•è¡Œæ¨¡å¼ä¸­ï¼Œè¾“å…¥set number
åŸºæœ¬æ“ä½œï¼š1ã€è¿›å…¥vivi filenameè¿›å…¥viä¹‹åï¼Œæ˜¯å¤„äºå‘½ä»¤è¡Œæ¨¡å¼ã€‚è¾“å…¥â€œiâ€ï¼Œåˆ‡æ¢åˆ°æ’å…¥æ¨¡å¼ã€‚ 
2ã€åœ¨æ’å…¥æ¨¡å¼ç¼–è¾‘æ–‡ä»¶ç¼–è¾‘æ–‡ä»¶ï¼Œç¼–è¾‘å®Œæˆç‚¹å‡»ã€ŒESCã€ï¼Œå›åˆ°å‘½ä»¤è¡Œæ¨¡å¼ã€‚
3ã€é€€å‡ºviåŠä¿å­˜æ–‡ä»¶åœ¨å‘½ä»¤è¡Œæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸€ä¸‹â€œ:â€è¿›å…¥åº•è¡Œæ¨¡å¼ï¼š 

wq (å­˜ç›˜å¹¶é€€å‡ºvi) 
q! (ä¸å­˜ç›˜å¼ºåˆ¶é€€å‡ºvi) 

ç»¼åˆé¢˜shellç¼–ç¨‹æ¥æ”¶ç”¨æˆ·ä»é”®ç›˜è¾“å…¥çš„åä¸ªæ•´æ•°ï¼Œç„¶åæ±‚å‡ºå…¶æ€»å’Œã€æœ€å¤§å€¼ã€æœ€å°å€¼ï¼Œä»å°åˆ°å¤§æ’åºã€‚
#!/bin/shfor i in `seq 10`do  read  var  echo $var &gt;&gt; tempfile.tmpdone echo &quot;min number is :&quot;`sort -n  tempfile.tmp |head -n1 `echo &quot;max number is :&quot;`sort -rn  tempfile.tmp |head -n1 `echo &quot;sum of all number:&quot;`awk &#x27;&#123; a+=$0&#125;END&#123; print a&#125;&#x27; tempfile.tmp `echo &quot;the order is:&quot;`sort -n tempfile.tmp`rm tempfile.tmp

æ“ä½œç³»ç»Ÿæœ€åäº”ä¸ªå®éªŒLiunxå½“ä¸­çš„lsï¼Œmaoï¼Œpwdï¼Œç¡¬ç›˜å¼•å¯¼ï¼Œå†…æ ¸ç¼–è¯‘ã€‚é‡ç‚¹å…³æ³¨å†…æ ¸å¼•å¯¼ï¼Œå†…æ ¸ç¼–è¯‘ï¼Œpwdã€‚
è€ƒçº²å‡çº§ç‰ˆåŸºæœ¬æ¦‚å¿µç™»é™†æç¤ºç¬¦è¶…çº§ç”¨æˆ·å’Œæ™®é€šç”¨æˆ·çš„ç™»å½•æç¤ºç¬¦æ˜¯ä»€ä¹ˆï¼Ÿè¶…çº§ç”¨æˆ·rootçš„æç¤ºç¬¦æ˜¯#ï¼Œæ™®é€šç”¨æˆ·çš„æç¤ºç¬¦æ˜¯$ã€‚
æ¡Œé¢ç¯å¢ƒLinuxç³»ç»Ÿä¸‹ç»å¸¸ä½¿ç”¨çš„ä¸¤ç§æ¡Œé¢ç¯å¢ƒæ˜¯ä»€ä¹ˆï¼Ÿï¼ˆ1ï¼‰GNOMEï¼Œæœ€å¸¸è§ï¼ˆ2ï¼‰KDE
Linuxç³»ç»Ÿå¦‚ä½•æ ‡è¯†ç¡¬ç›˜Linuxä¸‹ç¡¬ç›˜åˆ†åŒºçš„æ ‡è¯†åœ¨Linuxä¸‹ç”¨hdaã€hdbç­‰æ¥æ ‡è¯†ä¸åŒçš„ç¡¬ç›˜ï¼›ç”¨hda1ã€hda2ã€hda5ã€hda6 æ¥æ ‡è¯†ä¸åŒçš„åˆ†åŒºã€‚
å‰ä¸¤ä¸ªå­—æ¯ï¼šhdxï¼ˆxä¸ºa-dï¼‰ä»£è¡¨IDEç¡¬ç›˜ï¼Œsdxï¼ˆxä¸ºa-zï¼‰ä»£è¡¨SCSIã€SATAã€USBç¡¬ç›˜ã€‚ç¬¬ä¸‰ä¸ªå­—æ¯ï¼ša\b\câ€¦â€¦ä»£è¡¨çš„æ˜¯1ã€2ã€3â€¦â€¦çš„æ„æ€ã€‚hdaä»£è¡¨ç¬¬ä¸€å—IDEç¡¬ç›˜ï¼Œsdbä»£è¡¨ç¬¬äºŒå—SCSIç¡¬ç›˜ã€‚
ç¬¬å››ä½æ•°å­—ï¼šå¯ä»¥ç†è§£ä¸ºWindowsç›˜ä¸‹çš„C\D\Eç›˜ç¬¦ã€‚hda1ä»£è¡¨ç¬¬ä¸€ä¸ªIDEç¡¬ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒºï¼Œsdb2ä»£è¡¨ç¬¬äºŒä¸ªSCSIç¡¬ç›˜çš„ç¬¬äºŒä¸ªåˆ†åŒºã€‚
Linuxåœ¨I386ä½“ç³»ç»“æ„ä¸­çš„åˆ†é¡µæ”¯æŒå‡ çº§ï¼Ÿi386é‡‡ç”¨äºŒçº§åˆ†é¡µï¼Œå…¶çº¿æ€§åœ°å€çš„ç»“æ„å¦‚ä¸‹ï¼šDiræœ‰10ä½ï¼Œè¡¨ç¤ºé¡µè¡¨ç›®å½•é¡¹çš„ä¸‹æ ‡ï¼ŒæŒ‡å‘ä¸€ä¸ªé¡µè¡¨ï¼›Pageæœ‰10ä½ï¼Œè¡¨ç¤ºä¸€ä¸ªå…·ä½“é¡µè¡¨ä¸­çš„ç›®å½•é¡¹çš„ä¸‹æ ‡ï¼ŒæŒ‡å‘ä¸€ä¸ªç‰©ç†é¡µé¢ï¼›Offsetæœ‰12ä½ï¼Œè¡¨ç¤ºåœ¨ç‰©ç†é¡µé¢ä¸­çš„åç§»é‡ï¼ˆå•ä½ä¸ºå­—èŠ‚ï¼‰ã€‚
ä»€ä¹ˆæ—¶å€™éœ€è¦ç¼–è¯‘å†…æ ¸ï¼Ÿ1ã€å°é²œï¼Œlinuxå†…æ ¸å‘è¡Œäº†æ–°ç‰ˆæœ¬ï¼Œæƒ³åœ¨ç¬¬ä¸€æ—¶é—´ä½¿ç”¨æ–°åŠŸèƒ½ã€‚
2ã€ä½¿ç”¨ä¸€äº›å·¥å…·ï¼Œéœ€è¦ä½¿ç”¨åŒ…å«debuginfoçš„å†…æ ¸ï¼Œè€Œä¸€èˆ¬çš„å‘è¡Œç‰ˆæœ¬ä¸åŒ…å«debuginfoã€‚
3ã€ä¿®æ”¹äº†å†…æ ¸ä»£ç ï¼Œæ¯”å¦‚æ·»åŠ äº†ç³»ç»Ÿè°ƒç”¨ã€‚
4ã€åšarmçš„åµŒå…¥å¼å¼€å‘ï¼Œå°†å…¶çƒ§åˆ¶åˆ°ä¸»æ¿ä¸Šã€‚
å‘½ä»¤æ“ä½œæ‰§è¡Œå®šæ—¶ä»»åŠ¡1ã€æ‰§è¡Œä¸€æ¬¡è¯­æ³•ï¼š
at [å‚æ•°] [æ—¶é—´]at&gt; æ‰§è¡Œçš„æŒ‡ä»¤
é€€å‡ºatå‘½ä»¤ ctrl+dã€‚atqï¼ŒæŸ¥è¯¢å½“å‰çš„ç­‰å¾…ä»»åŠ¡ï¼Œè¢«æ‰§è¡Œä¹‹åå°±ä¸ä¼šæ˜¾ç¤ºã€‚atrm ä»»åŠ¡çš„å·¥ä½œå·ï¼Œåˆ é™¤ç³»ç»Ÿä¸­ç”±atå»ºç«‹çš„æ­£åœ¨ç­‰å¾…è¢«æ‰§è¡Œçš„ä»»åŠ¡ã€‚
atå‘½ä»¤çš„å‚æ•°ï¼š-m ï¼šå½“æŒ‡å®šçš„ä»»åŠ¡è¢«å®Œæˆä¹‹åï¼Œå°†ç»™ç”¨æˆ·å‘é€é‚®ä»¶ï¼Œå³ä½¿æ²¡æœ‰æ ‡å‡†è¾“å‡º-I ï¼šatqçš„åˆ«å-d ï¼šatrmçš„åˆ«å-v ï¼šæ˜¾ç¤ºä»»åŠ¡å°†è¢«æ‰§è¡Œçš„æ—¶é—´-c ï¼šæ‰“å°ä»»åŠ¡çš„å†…å®¹åˆ°æ ‡å‡†è¾“å‡º-V ï¼šæ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯-q ï¼šåé¢åŠ &lt;åˆ—é˜Ÿ&gt; ä½¿ç”¨æŒ‡å®šçš„åˆ—é˜Ÿ-f ï¼šåé¢åŠ &lt;æ–‡ä»¶&gt; ä»æŒ‡å®šæ–‡ä»¶è¯»å…¥ä»»åŠ¡è€Œä¸æ˜¯ä»æ ‡å‡†è¾“å…¥è¯»å…¥-t ï¼šåé¢&lt;æ—¶é—´å‚æ•°&gt; ä»¥æ—¶é—´å‚æ•°çš„å½¢å¼æäº¤è¦è¿è¡Œçš„ä»»åŠ¡ 
ä¾‹å­ï¼šæ˜å¤©17:20ï¼Œè¾“å‡ºæ—¶é—´åˆ°æŒ‡å®šæ–‡ä»¶å†…
at 17:20 tomorrowat&gt; date &gt; /home/voidking/date.txtat&gt; &lt;EOT&gt;


2ã€å®šæœŸæ‰§è¡Œè¯¦æƒ…è¯·è§ï¼šå°æ˜æ˜¯ä¸ªç½‘ç®¡ï¼Œè€æ¿è¦æ±‚ä»–æ¯å¤©æ—©æ™¨3ç‚¹èµ·æ¥çœ‹çœ‹ç£ç›˜ç©ºé—´æ»¡ä¸æ»¡ã€‚ã€‚ã€‚
é‡å‘½åæ–‡ä»¶1ã€å•ä¸ªæ–‡ä»¶é‡å‘½åmv test.tx.htm test.html2ã€æ‰¹é‡é‡å‘½årename &#39;s/\.tx\.htm$/\.html/&#39; *.tx.htm
åŠ è½½å…‰é©±ls -l /dev | grep cdromï¼Œå‡è®¾çœ‹åˆ°å…‰é©±å…¨åä¸ºcdrom1ã€‚mount /dev/cdrom1 /mnt/ï¼ŒæŠŠå…‰ç›˜æŒ‚è½½åˆ°/mntç›®å½•ä¸‹ã€‚
å¦‚ä½•ä¿®æ”¹å¯†ç 1ã€ä¿®æ”¹è‡ªå·±çš„å¯†ç passwdï¼Œè¾“å…¥å½“å‰å¯†ç ï¼Œè¾“å…¥æ–°å¯†ç ã€‚2ã€rootç”¨æˆ·ä¿®æ”¹å…¶ä»–ç”¨æˆ·çš„å¯†ç passwd usernameï¼Œè¾“å…¥æ–°å¯†ç ã€‚
å¦‚ä½•çœ‹æœ¬æœºç½‘å€1ã€æŸ¥çœ‹æœ¬æœºIPåœ°å€ifconfig2ã€è®¾ç½®IPåœ°å€ifconfig eth1 192.168.1.1 netmask 255.255.255.0
PSï¼šæŸ¥çœ‹ä¸»æœºåhostname
å¦‚ä½•åˆå¹¶æ–‡ä»¶cat file1.txt file2.txt &gt; file.txtï¼Œfile1.txtå’Œfile2.txtåˆæˆfile.txtã€‚cat file1.txt &gt;&gt; file.txtï¼Œfile1.txtä¸­çš„å†…å®¹æ·»åŠ åˆ°file.txtçš„æœ€åã€‚
å¦‚ä½•åˆ›å»ºç”¨æˆ·1ã€suï¼Œåˆ‡æ¢åˆ°rootç”¨æˆ·ã€‚2ã€useradd testuserï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºtestuserçš„ç”¨æˆ·ã€‚3ã€passwd testuserï¼Œä¹‹åå›è½¦ï¼Œä¸ºtestuserè®¾ç½®å¯†ç ã€‚
å¦‚ä½•åˆ é™¤æ–‡ä»¶rm filename-f, â€“force    å¿½ç•¥ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œä»ä¸ç»™å‡ºæç¤ºã€‚-i, â€“interactive è¿›è¡Œäº¤äº’å¼åˆ é™¤-r, -R, â€“recursive   æŒ‡ç¤ºrmå°†å‚æ•°ä¸­åˆ—å‡ºçš„å…¨éƒ¨ç›®å½•å’Œå­ç›®å½•å‡é€’å½’åœ°åˆ é™¤ã€‚-v, â€“verbose    è¯¦ç»†æ˜¾ç¤ºè¿›è¡Œçš„æ­¥éª¤
å¦‚ä½•æŸ¥çœ‹å½“å‰è·¯å¾„pwd-Pï¼šå¦‚æœå½“å‰çš„å·¥ä½œè·¯å¾„æ˜¯é“¾æ¥çš„è¯ï¼Œæ˜¾ç¤ºé“¾æ¥çš„åŸå§‹è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯å®é™…è·¯å¾„ã€‚
ç»¼åˆlinuxçš„è¿è¡Œçº§åˆ«Linuxç³»ç»Ÿæœ‰7ä¸ªè¿è¡Œçº§åˆ«(runlevel)ã€‚è¿è¡Œçº§åˆ«0ï¼šç³»ç»ŸåœæœºçŠ¶æ€ï¼Œç³»ç»Ÿé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º0ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨è¿è¡Œçº§åˆ«1ï¼šå•ç”¨æˆ·å·¥ä½œçŠ¶æ€ï¼Œrootæƒé™ï¼Œç”¨äºç³»ç»Ÿç»´æŠ¤ï¼Œç¦æ­¢è¿œç¨‹ç™»é™†è¿è¡Œçº§åˆ«2ï¼šå¤šç”¨æˆ·çŠ¶æ€(æ²¡æœ‰NFS)è¿è¡Œçº§åˆ«3ï¼šå®Œå…¨çš„å¤šç”¨æˆ·çŠ¶æ€(æœ‰NFS)ï¼Œç™»é™†åè¿›å…¥æ§åˆ¶å°å‘½ä»¤è¡Œæ¨¡å¼è¿è¡Œçº§åˆ«4ï¼šç³»ç»Ÿæœªä½¿ç”¨ï¼Œä¿ç•™è¿è¡Œçº§åˆ«5ï¼šX11æ§åˆ¶å°ï¼Œç™»é™†åè¿›å…¥å›¾å½¢GUIæ¨¡å¼è¿è¡Œçº§åˆ«6ï¼šç³»ç»Ÿæ­£å¸¸å…³é—­å¹¶é‡å¯ï¼Œé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º6ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨
PSï¼š1ã€æŸ¥çœ‹å½“å‰è¿è¡Œçº§åˆ«runlevel2ã€åˆ‡æ¢è¿è¡Œçº§åˆ«init Nï¼ŒNçš„å€¼ä¸º0åˆ°6ï¼Œå…¶ä¸­ï¼Œ0ä¸ºå…³æœºï¼Œ6ä¸ºé‡å¯ã€‚
linuxçš„æ–‡ä»¶æƒé™å¦‚å›¾ï¼Œ-rwxrwxr-xï¼Œè¿™10ä½è¡¨ç¤ºæ–‡ä»¶çš„æƒé™ï¼Œç¬¬2ï½10ä¸ªå­—ç¬¦ä¸­æ¯3ä¸ªä¸ºä¸€ç»„ã€‚
å·¦è¾¹ä¸‰ä¸ªå­—ç¬¦ï¼ˆrwxï¼‰è¡¨ç¤ºæ‰€æœ‰è€…æƒé™ï¼Œä¸­é—´3ä¸ªå­—ç¬¦ï¼ˆrwxï¼‰è¡¨ç¤ºä¸æ‰€æœ‰è€…åŒä¸€ç»„çš„ç”¨æˆ·çš„æƒé™ï¼Œå³è¾¹3ä¸ªå­—ç¬¦ï¼ˆr-xï¼‰æ˜¯å…¶ä»–ç”¨æˆ·çš„æƒé™ã€‚
r(Readï¼Œè¯»å–)ï¼šå¯¹æ–‡ä»¶è€Œè¨€ï¼Œå…·æœ‰è¯»å–æ–‡ä»¶å†…å®¹çš„æƒé™ï¼›å¯¹ç›®å½•æ¥è¯´ï¼Œå…·æœ‰æµè§ˆç›®å½•çš„æƒw(Write,å†™å…¥)ï¼šå¯¹æ–‡ä»¶è€Œè¨€ï¼Œå…·æœ‰æ–°å¢ã€ä¿®æ”¹æ–‡ä»¶å†…å®¹çš„æƒé™ï¼›å¯¹ç›®å½•æ¥è¯´ï¼Œå…·æœ‰åˆ é™¤ã€ç§»åŠ¨ç›®å½•å†…æ–‡ä»¶çš„æƒé™ã€‚x(eXecuteï¼Œæ‰§è¡Œ)ï¼šå¯¹æ–‡ä»¶è€Œè¨€ï¼Œå…·æœ‰æ‰§è¡Œæ–‡ä»¶çš„æƒé™ï¼›å¯¹ç›®å½•äº†æ¥è¯´è¯¥ç”¨æˆ·å…·æœ‰è¿›å…¥ç›®å½•çš„æƒé™ã€‚
æ”¹å˜æ–‡ä»¶æƒé™ï¼šchmod [options] [who][opcode]mode files
optionsï¼š

-Rï¼Œâ€“recursiveå¯é€’å½’éå†å­ç›®å½•ï¼ŒæŠŠä¿®æ”¹åº”åˆ°ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•

whoï¼š

aï¼Œé»˜è®¤å€¼ï¼Œæ‰€æœ‰ç”¨æˆ·
uï¼Œæ‹¥æœ‰è€…
gï¼ŒåŒç»„ç”¨æˆ·
oï¼Œå…¶ä»–ç”¨æˆ·ã€‚

opcode:

 +ï¼Œå¢åŠ æƒé™
 -ï¼Œåˆ é™¤æƒé™
=ï¼Œé‡æ–°åˆ†é…æƒé™

modeï¼š

r=4ï¼Œè¯»
w=2ï¼Œå†™
x=1ï¼Œæ‰§è¡Œ

è¿˜å¯è®¾ç½®ç¬¬å››ä½ï¼Œå®ƒä½äºä¸‰ä½æƒé™åºåˆ—çš„å‰é¢ï¼š

4ï¼Œæ‰§è¡Œæ—¶è®¾ç½®ç”¨æˆ·IDï¼Œç”¨äºæˆæƒç»™åŸºäºæ–‡ä»¶å±ä¸»çš„è¿›ç¨‹ï¼Œè€Œä¸æ˜¯ç»™åˆ›å»ºæ­¤è¿›ç¨‹çš„ç”¨æˆ·ã€‚
2ï¼Œæ‰§è¡Œæ—¶è®¾ç½®ç”¨æˆ·ç»„IDï¼Œç”¨äºæˆæƒç»™åŸºäºæ–‡ä»¶æ‰€åœ¨ç»„çš„è¿›ç¨‹ï¼Œè€Œä¸æ˜¯åŸºäºåˆ›å»ºæ­¤è¿›ç¨‹çš„ç”¨æˆ·ã€‚
1ï¼Œè®¾ç½®ç²˜è´´ä½ã€‚

å®ä¾‹ï¼š
chmod u+x file	ç»™å±ä¸»å¢åŠ æ‰§è¡Œæƒé™chmod 751 file	ç»™å±ä¸»æ‰€æœ‰æƒé™ï¼Œç»™ç»„åˆ†é…è¯»å’Œæ‰§è¡Œæƒé™ï¼Œç»™å…¶ä»–ç”¨æˆ·æ‰§è¡Œæƒé™chmod u=rwx,g=rx,o=x file	ä¸Šä¾‹çš„å¦ä¸€ç§å½¢å¼chmod =r file	ä¸ºæ‰€æœ‰ç”¨æˆ·åˆ†é…è¯»æƒé™chmod 444 file	åŒä¸Šä¾‹chmod a-wx,a+r file	åŒä¸Šä¾‹chmod -R u+r directory	directoryç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•åˆ†é…è¯»çš„æƒé™chmod 4755	è®¾ç½®ç”¨IDï¼Œç»™å±ä¸»åˆ†é…è¯»ã€å†™å’Œæ‰§è¡Œæƒé™ï¼Œç»™ç»„å’Œå…¶ä»–ç”¨æˆ·åˆ†é…è¯»ã€æ‰§è¡Œçš„æƒé™ã€‚

å¦‚ä½•åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿå‡è®¾æ–°æ·»åŠ äº†ä¸€å—ç¡¬ç›˜sdbï¼Œæƒ³è¦æŠŠè¿™å—ç¡¬ç›˜çš„æ‰€æœ‰ç©ºé—´åˆ†ç»™ç¬¬ä¸€ä¸ªåˆ†åŒºï¼Œè€Œä¸”è¯¥åˆ†åŒºæ–‡ä»¶ç³»ç»Ÿä¸ºext4ã€‚1ã€cd /dev2ã€fdisk sdb3ã€å‘½ä»¤pï¼šæŸ¥çœ‹å½“å‰æ–°ç›˜çŠ¶æ€ã€‚4ã€å‘½ä»¤nï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†åŒºã€‚5ã€ä¸¤ä¸ªé€‰é¡¹eï¼ˆæ‰©å±•åˆ†åŒºï¼‰å’Œpï¼ˆä¸»åˆ†åŒºï¼‰ï¼Œé€‰æ‹©pã€‚6ã€è¿ç»­ä¸¤æ¬¡å›è½¦ï¼Œä½¿ç”¨é»˜è®¤çš„èµ·å§‹å’Œç»“æŸsectorã€‚7ã€åˆ›å»ºäº†ä¸€ä¸ªsdb1ï¼Œå¤§å°ä¸ºæ•´å—è™šæ‹Ÿç¡¬ç›˜ã€‚8ã€å‘½ä»¤wï¼šä¿å­˜é€€å‡ºã€‚9ã€mkfs -t ext4 sdb1ï¼Œæ ¼å¼åŒ–ä¸ºext4æ–‡ä»¶ç³»ç»Ÿã€‚
å¦‚ä½•ç”¨GCCç¼–è¯‘æ–‡ä»¶ï¼Ÿgccç¼–è¯‘çš„æ­¥éª¤æœ‰å“ªäº›ï¼Ÿä¼šç”Ÿæˆå“ªäº›æ–‡ä»¶ï¼Ÿ
gcc/g++åœ¨æ‰§è¡Œç¼–è¯‘å·¥ä½œçš„æ—¶å€™ï¼Œæ€»å…±éœ€è¦4æ­¥ã€‚1ã€é¢„å¤„ç†ï¼Œç”Ÿæˆ.içš„æ–‡ä»¶ã€‚ï¼ˆé¢„å¤„ç†å™¨cppï¼‰2ã€å°†é¢„å¤„ç†åçš„æ–‡ä»¶è½¬æ¢æˆæ±‡ç¼–ä»£ç ï¼Œç”Ÿæˆæ–‡ä»¶.sã€‚ï¼ˆç¼–è¯‘å™¨egcsï¼‰3ã€å°†æ±‡ç¼–ä»£ç å˜ä¸ºç›®æ ‡ä»£ç (æœºå™¨ä»£ç )ç”Ÿæˆ.oçš„æ–‡ä»¶ã€‚ï¼ˆæ±‡ç¼–å™¨asï¼‰4ã€è¿æ¥ç›®æ ‡ä»£ç ï¼Œç”Ÿæˆå¯æ‰§è¡Œç¨‹åºã€‚ï¼ˆé“¾æ¥å™¨ldï¼‰
å‡è®¾hello.cä¸ºæœ€åˆçš„æºä»£ç ï¼šgcc -E hello.c -o hello.iï¼Œç”Ÿæˆç»è¿‡é¢„å¤„ç†çš„ä»£ç ï¼›gcc -S hello.i -o hello.sï¼Œç”Ÿæˆæ±‡ç¼–å¤„ç†åçš„æ±‡ç¼–ä»£ç ï¼›gcc -c hello.s -o hello.oï¼Œç”Ÿæˆç¼–è¯‘åçš„ç›®æ ‡æ–‡ä»¶ï¼Œå«æœ‰æœ€ç»ˆç¼–è¯‘å‡ºçš„æœºå™¨ç ï¼Œä½†å®ƒé‡Œé¢æ‰€å¼•ç”¨çš„å…¶ä»–æ–‡ä»¶ä¸­å‡½æ•°çš„å†…å­˜ä½ç½®å°šæœªå®šä¹‰ï¼›gcc hello.o -o helloï¼Œå¯æ‰§è¡Œç¨‹åºã€‚ä¸Šé¢çš„å››ä¸ªå‘½ä»¤ï¼Œå¯ä»¥åˆæˆä¸€ä¸ªgcc hello.c -o helloã€‚
viçš„3ç§æ¨¡å¼ä¸‰ç§æ¨¡å¼ï¼š

å‘½ä»¤è¡Œæ¨¡å¼ï¼ˆcommand modeï¼‰ï¼šæ§åˆ¶å±å¹•å…‰æ ‡çš„ç§»åŠ¨ï¼Œå­—ç¬¦ã€å­—æˆ–è¡Œçš„åˆ é™¤ï¼Œç§»åŠ¨å¤åˆ¶æŸåŒºæ®µç­‰ã€‚æŒ‰ä¸‹â€œiâ€ï¼Œè¿›å…¥æ’å…¥æ¨¡å¼ï¼›æŒ‰ä¸‹â€œ:â€ï¼Œè¿›å…¥åº•è¡Œæ¨¡å¼ã€‚

æ’å…¥æ¨¡å¼ï¼ˆInsert modeï¼‰ï¼šåªæœ‰åœ¨Insert modeä¸‹ï¼Œæ‰å¯ä»¥åšæ–‡å­—è¾“å…¥ï¼ŒæŒ‰ã€ŒESCã€é”®å¯å›åˆ°å‘½ä»¤è¡Œæ¨¡å¼ã€‚

åº•è¡Œæ¨¡å¼ï¼ˆlast line modeï¼‰ï¼šå°†æ–‡ä»¶ä¿å­˜æˆ–é€€å‡ºviï¼Œä¹Ÿå¯ä»¥è®¾ç½®ç¼–è¾‘ç¯å¢ƒï¼Œå¦‚å¯»æ‰¾å­—ç¬¦ä¸²ã€åˆ—å‡ºè¡Œå·â€¦â€¦ç­‰ã€‚


å¢åŠ è¡Œå·ï¼šåœ¨åº•è¡Œæ¨¡å¼ä¸­ï¼Œè¾“å…¥set number
åŸºæœ¬æ“ä½œï¼š1ã€è¿›å…¥vivi filenameè¿›å…¥viä¹‹åï¼Œæ˜¯å¤„äºå‘½ä»¤è¡Œæ¨¡å¼ã€‚è¾“å…¥â€œiâ€ï¼Œåˆ‡æ¢åˆ°æ’å…¥æ¨¡å¼ã€‚ 
2ã€åœ¨æ’å…¥æ¨¡å¼ç¼–è¾‘æ–‡ä»¶ç¼–è¾‘æ–‡ä»¶ï¼Œç¼–è¾‘å®Œæˆç‚¹å‡»ã€ŒESCã€ï¼Œå›åˆ°å‘½ä»¤è¡Œæ¨¡å¼ã€‚
3ã€é€€å‡ºviåŠä¿å­˜æ–‡ä»¶åœ¨å‘½ä»¤è¡Œæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸€ä¸‹â€œ:â€è¿›å…¥åº•è¡Œæ¨¡å¼ï¼š 

wq (å­˜ç›˜å¹¶é€€å‡ºvi) 
q! (ä¸å­˜ç›˜å¼ºåˆ¶é€€å‡ºvi) 

ä½¿ç”¨shellå®Œæˆé«˜æ–¯æ±‚å’Œæ‰€è°“é«˜æ–¯æ±‚å’Œï¼Œå°±æ˜¯ç­‰å·®æ•°åˆ—æ±‚å’Œï¼Œè¿™é‡Œåˆ†åˆ«è¾“å…¥å¼€å§‹å€¼ã€ç»“æŸå€¼ã€ç­‰å·®ï¼š
#!/bin/shread -p &quot;Input value of start: &quot; startread -p &quot;Input value of end: &quot; endread -p &quot;Input value of diff: &quot; diffcount=$(($(($(($end-$start))/$diff))+1))sum=$(($(($end+$start))*$count/2))echo &quot;SUM is $sum&quot;


ç”¨æ±‡ç¼–è¯­è¨€å®ç°æ“ä½œç³»ç»Ÿå¼•å¯¼ç¬¬ä¸€ç§æ€è·¯CODES	SEGMENT		ORG 07C00H		; å°†æ­¤æ®µåŠ è½½åˆ°å†…å­˜0x0000:7C00å¤„start:		MOV AX, CODES		MOV ES, AX		MOV AX, OFFSET msg		; å°†å­—ç¬¦ä¸²æ‹·è´åˆ°ax		MOV BP, AX		; es:bp = ä¸²åœ°å€		MOV CX, OFFSET strend              		MOV DX, OFFSET msg		SUB CX, DX		; cl= ä¸²é•¿åº¦ 		MOV len, CXnext:	INC color		AND color, 0FH		MOV AX, 1301H		; ah = 13 TELTYPE æ˜¾ç¤ºå­—ç¬¦ä¸², al = 00h 		MOV BH, 00H		; é¡µå·ä¸º0ï¼ˆbh = 0ï¼‰ 		MOV BL, color		;é»‘åº•çº¢å­—ï¼ˆbl = 0chï¼Œé«˜äº®ï¼‰		MOV CX, len		MOV DX, 0815H	;ç¬¬0hè¡Œ15håˆ—ï¼ˆdh = 0 dl = 15hï¼‰		INT 10H		; 10hå·ä¸­æ–­		JMP nextover:	RET				color	DB 00H		len		DW 0000H 		msg		DB &quot;Hello World!&quot;		strend	DB &#x27;$&#x27;		ORG 07C00H+200H-2H	;æŠŠç»“å°¾æ ‡å¿—åŠ è½½åˆ°(07c00h+200h-2h)å¤„     		DW 0AA55H (07c00h+512d-2d)CODES	ENDS    		END	start
å‚è€ƒæ–‡æ¡£ï¼šç®€å•OSå¼€å‘å‰å¥(ä¸‰)http://blog.csdn.net/otishiono/article/details/5906119ç”¨æ±‡ç¼–è¯­è¨€ç¼–å†™ä¸€ä¸ªBoot Sectorhttp://blog.csdn.net/misskissc/article/details/8702337
æ„Ÿè§‰æœ‰ç‚¹éš¾ï¼Œè€ƒè¯•æ—¶è¿˜æ˜¯ç”»æµç¨‹å›¾å§ï¼â•®(â•¯â–½â•°)â•­
ç¬¬äºŒç§æ€è·¯ç¬¬ä¸€ç§æ€è·¯æœ‰é—®é¢˜ï¼Œè™½ç„¶å®ç°äº†é¢˜ç›®è¦æ±‚ï¼Œä½†æ˜¯å’ŒLinuxè¿™é—¨è¯¾æ²¡å•¥å…³ç³»ï¼Œæä¾›ç¬¬äºŒç§æ€è·¯å¦‚ä¸‹ã€‚
é¦–å…ˆè¯´ä¸€ä¸‹æ“ä½œç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹ï¼šPOST-&gt;BIOS-&gt;Bootloader-&gt;Linux kernel-&gt;init-&gt;system readyã€‚
æˆ‘ä»¬è¦å®Œæˆçš„ï¼Œå°±æ˜¯Bootloaderä¸­çš„å¯åŠ¨ä»£ç ã€‚Bootloaderçš„å·¥ä½œæœ‰ï¼š

åˆå§‹åŒ–RAM 
åˆå§‹åŒ–ä¸²å£  
æ£€æµ‹å¤„ç†å™¨ç±»å‹ 
è®¾ç½®Linuxå¯åŠ¨å‚æ•° 
è°ƒç”¨Linuxå†…æ ¸æ˜ åƒ

æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„å‚è€ƒä»£ç ï¼Œå°ä¼™ä¼´ä»¬æ‰¾åˆ°äº†è®°å¾—åœ¨ç¾¤é‡Œåˆ†äº«ä¸€ä¸‹ã€‚
å‚è€ƒæ–‡æ¡£ï¼šlinux bootloaderhttp://blog.chinaunix.net/uid-28440799-id-3484616.htmlBootloaderåˆ†æhttp://blog.csdn.net/xiaomt_rush/article/details/6582337Boot Linuxhttp://www.almesberger.net/cv/papers/ols2k-9.pdfLinux å¼•å¯¼è¿‡ç¨‹å†…å¹•http://www.ibm.com/developerworks/cn/linux/l-linuxboot/å¼•å¯¼åŠ è½½ç¨‹åºä¹‹äº‰ï¼šäº†è§£ LILO å’Œ GRUBhttp://www.ibm.com/developerworks/cn/linux/l-bootload.htmlLinuxç³»ç»Ÿå¼•å¯¼è¿‡ç¨‹ï¼ˆBIOSå’ŒBootloaderéƒ¨åˆ†ï¼‰http://blog.csdn.net/keminlau/article/details/4523973
è€å¸ˆèµ è¨€å¤§é¢˜ç›®éƒ½ç»™å¤§å®¶äº†ï¼Œå°é¢˜ç›®çœ‹ä¸Šè¯¾çš„å¬è®²æƒ…å†µäº†ï¼Œå°½é‡ä¸è¦ç©ºç€è¯•å·ï¼Œè€ƒè¯•ä¸ä¼šéš¾ä¸ºå¤§å®¶ã€‚ 
åè®°ä¸ä¿è¯æ­£ç¡®æ€§ï¼Œä»…ä¾›å‚è€ƒã€‚å¯¼å‡ºçš„pdfæ–‡æ¡£æ ¼å¼ä¸å‹å¥½ï¼Œç»™å‡ºæœ¬æ–‡é“¾æ¥ï¼šhttp://www.voidking.com/dev-linux-review/
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu Kylinç¼–è¯‘å†…æ ¸å’Œæ·»åŠ ç³»ç»Ÿè°ƒç”¨</title>
    <url>/dev-ubuntu-kylin-compile-kernel-and-add-systemcall/</url>
    <content><![CDATA[ä¸‹è½½å†…æ ¸æŸ¥çœ‹å½“å‰å†…æ ¸ç‰ˆæœ¬uname -aå¯ä»¥çœ‹åˆ°ï¼Œå½“å‰å†…æ ¸ç‰ˆæœ¬ä¸º3.16.0ã€‚


è·å–å½“å‰ç‰ˆæœ¬å†…æ ¸æºç sudo apt-get install linux-sourceå†…æ ¸æºç é»˜è®¤ä¸‹è½½åˆ°/usr/srcæ–‡ä»¶å¤¹ä¸‹ï¼Œè¿™é‡Œï¼Œæˆ‘ä»¬å°±ä½¿ç”¨è¿™å¥—æºç ã€‚
å®˜æ–¹ä¸‹è½½åœ°å€https://www.kernel.org/è¿™ä¸ªç½‘ç«™ï¼Œä½ å¯ä»¥æ‰¾åˆ°æœ€æ–°çš„å†…æ ¸ç‰ˆæœ¬ï¼Œå¦‚æœè¦æƒ³è¦ç»™å†…æ ¸å‡çº§ï¼Œå¯ä»¥æ¥è¿™é‡Œä¸‹è½½ã€‚
è§£å‹å†…æ ¸cd /usr/src/tar -jvf linux-source-3.16.0.tar.bz2è§£å‹å¤±è´¥ï¼š
tar: You must specify one of the &#x27;-Acdtrux&#x27;, &#x27;--delete&#x27; or &#x27;--test-label&#x27; optionsTry &#x27;tar --help&#x27; or &#x27;tar --usage&#x27; for more information.

æ·»åŠ ä¸€ä¸ªå‚æ•°xï¼štar -xjvf linux-source-3.16.0.tar.bz2å†æ¬¡å¤±è´¥ï¼Œå„ç§Permission deniedã€‚
sutar -xjvf linux-source-3.16.0.tar.bz2è™½ç„¶é€Ÿåº¦å¾ˆæ…¢ï¼ˆ3åˆ†é’Ÿå·¦å³ï¼‰ï¼Œä½†æ˜¯å¥½æ­¹è§£å‹æˆåŠŸäº†ã€‚
æ·»åŠ ç³»ç»Ÿè°ƒç”¨ä¿®æ”¹sys.ccd linux-source-3.16.0/kernel/gedit sys.cæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š
/* *new systemcall added by voidking */asmlinkage int sys_callvoidking(void)&#123;	printk(&quot;You are handsome,VoidKing!&quot;);	return 0;&#125;

ä¿®æ”¹syscall_32.tblcd /usr/src/linux-source-3.16.0/arch/x86/syscallsgedit syscall_32.tblåœ¨æœ€åä¸€è¡Œæ’å…¥
355	i386	callvoidking		sys_callvoidking

ä¿®æ”¹syscalls.hcd /usr/src/linux-source-3.16.0/include/linux/gedit syscalls.håœ¨#endifå‰æ·»åŠ ï¼š
asmlinkage int sys_callvoidking(void);

ç¼–è¯‘å‡†å¤‡libncurses5-devå®‰è£…nucursesåº“ï¼Œä¸ºäº†make menuconfigè°ƒç”¨ã€‚apt-get install libncurses5-dev
é…ç½®æ–‡ä»¶æŠŠåŸå…ˆç³»ç»Ÿçš„é…ç½®æ–‡ä»¶æ‹·è´åˆ°å½“å‰æºç ç›®å½•ã€‚cp /boot/config-\uname -r` .config`
åŠ è½½é…ç½®æ–‡ä»¶make menuconfigï¼Œæ‰“å¼€ç¼–è¯‘é…ç½®ç•Œé¢ï¼Œloadï¼Œokï¼Œsaveï¼Œexitã€‚
ç¼–è¯‘å‘½ä»¤ç¼–è¯‘å†…æ ¸make -j8æˆ–è€…make bzImageï¼Œå‰è€…æ›´å¿«ä¸€ç‚¹ã€‚
æœ‰äº›åŒå­¦è¦ä¸¤ä¸ªå°æ—¶æ‰èƒ½ç¼–è¯‘å®Œæˆï¼ŒéƒåŒå­¦ä½¿ç”¨VirtualBoxï¼Œåªç”¨äº†20åˆ†é’Ÿï¼Œç”µè„‘é…ç½®ä¹‹ç‰›é€¼å¯è§ä¸€æ–‘ï¼å“‡å“ˆå“ˆå“ˆï¼
ç¼–è¯‘æ¨¡å—make modulesï¼Œç¼–è¯‘æ¨¡å—æ—¶ï¼ŒéƒåŒå­¦è‡ªå·±æ·»åŠ çš„ç³»ç»Ÿè°ƒç”¨å‡ºç°äº†è­¦å‘Šï¼Œä¸è¿‡ä¸å½±å“æ¥ä¸‹æ¥çš„ç¼–è¯‘ã€‚ä¸€ä¸ªå°æ—¶ä¹‹åã€‚ã€‚ã€‚å™—ï¼è¦åè¡€äº†ï¼Œä¹‹å‰åˆ†ç»™è™šæ‹Ÿæœº8Gå­˜å‚¨ç©ºé—´ï¼Œæ²¡æƒ³åˆ°ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œç©ºé—´ä¸è¶³äº†ï¼Œæ²¡æ³•ç»§ç»­ç¼–è¯‘ã€‚ã€‚ã€‚
æ‰©å±•Ubuntuç©ºé—´1ã€é¦–å…ˆå…³é—­è™šæ‹Ÿæœºï¼Œåœ¨è®¾ç½®ä¸­ç»™Ubuntuå†æ·»åŠ ä¸€å—è™šæ‹Ÿç¡¬ç›˜ã€‚2ã€æ‰“å¼€è™šæ‹Ÿæœºï¼Œcd /dev3ã€fdisk sdb4ã€å‘½ä»¤pï¼šæŸ¥çœ‹å½“å‰æ–°ç›˜çŠ¶æ€ã€‚5ã€å‘½ä»¤nï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†åŒºã€‚6ã€ä¸¤ä¸ªé€‰é¡¹eï¼ˆæ‰©å±•åˆ†åŒºï¼‰å’Œpï¼ˆä¸»åˆ†åŒºï¼‰ï¼Œé€‰æ‹©pã€‚7ã€è¿ç»­ä¸¤æ¬¡å›è½¦ï¼Œä½¿ç”¨é»˜è®¤çš„èµ·å§‹å’Œç»“æŸsectorã€‚8ã€åˆ›å»ºäº†ä¸€ä¸ªsdb1ï¼Œå¤§å°ä¸ºæ•´å—è™šæ‹Ÿç¡¬ç›˜ã€‚9ã€å‘½ä»¤wï¼šä¿å­˜é€€å‡ºã€‚10ã€mkfs -t ext4 sdb1ï¼Œæ ¼å¼åŒ–ã€‚11ã€cd /mntï¼Œmkdir sdb1ï¼Œmount /dev/sdb1 sdb112ã€cd sdb1ï¼Œcp -rv /usr/src/linux-source-3.16.0 .13ã€umount sdb1ï¼Œmount /dev/sdb1 /usr/src
é‡æ–°ç¼–è¯‘æ¨¡å—cd /usr/src/linux-source-3.16.0ï¼Œmake modulesç­‰ã€‚ã€‚ã€‚å†ç­‰ã€‚ã€‚ã€‚ç»§ç»­ç­‰ã€‚ã€‚ã€‚å››ä¸ªå°æ—¶ä¹‹åï¼Œæç¤ºç©ºé—´ä¸è¶³ã€‚ã€‚ã€‚æˆ‘é ï¼Œä½ ä¸«åˆ°åº•éœ€è¦å¤šå¤§ç©ºé—´ï¼Ÿ8Gçš„ç©ºé—´ä¸å¤Ÿä½ ç¼–è¯‘ç¨‹åºç”¨çš„ï¼ï¼ï¼å“­äº†ã€‚ã€‚ã€‚
åŠ é€Ÿç¼–è¯‘å¯»æ‰¾åŠ é€Ÿç¼–è¯‘å†…æ ¸çš„åŠæ³•ï¼Œå‘ç°ï¼Œä¼¼ä¹make -j8ç­‰äºmake bzImageåŠ make modulesã€‚å»æ‰ç¼–è¯‘æ¨¡å—è¿™ä¸ªæ­¥éª¤è¯•è¯•ï¼šmake mrproperï¼Œmake cleanï¼Œmake -j8ï¼Œç„¶åmake modules_installã€‚æŠ¥é”™ï¼š
  INSTALL arch/x86/crypto/aes-x86_64.kocp: cannot stat â€˜arch/x86/crypto/aes-x86_64.koâ€™: No such file or directoryCan&#x27;t read private keyscripts/Makefile.modinst:30: recipe for target &#x27;arch/x86/crypto/aes-x86_64.ko&#x27; failedmake[1]: *** [arch/x86/crypto/aes-x86_64.ko] Error 2Makefile:1089: recipe for target &#x27;_modinst_&#x27; failedmake: *** [_modinst_] Error 2
çŒœæµ‹æ˜¯é…ç½®æ–‡ä»¶.configæ–‡ä»¶æœ‰é—®é¢˜ï¼Œæ¢æˆ/usr/src/linux-headers-3.16.0-23-genericç›®å½•ä¸‹çš„.configæ–‡ä»¶ã€‚é‡æ–°ç¼–è¯‘ï¼Œå®‰è£…ï¼Œè¿˜æ˜¯æŠ¥åŒæ ·é”™è¯¯ã€‚é‚£å°±å†åŠ ä¸Šç¼–è¯‘æ¨¡å—è¿™ä¸ªæ­¥éª¤å§ï¼
ç¬¬ä¸‰æ¬¡ç¼–è¯‘æ¨¡å—make -j8 modulesï¼Œå¤§æ¦‚å››ä¸ªå°æ—¶ä¹‹åï¼Œç»ˆäºç¼–è¯‘å®Œæˆã€‚å®‰è£…æ¨¡å—æŠ¥é”™ï¼Œå’Œmake -j8ç¼–è¯‘åç›´æ¥å®‰è£…æ¨¡å—æŠ¥é”™ç›¸åŒã€‚ç»™è·ªäº†ï¼Œèƒ½ä¸èƒ½æ„‰å¿«åœ°ç©è€äº†ï¼
æ‰¾åˆ°é”™è¯¯åæ¥ï¼Œä»”ç»†æ£€æŸ¥äº†å‰é¢çš„æ­¥éª¤ã€‚å‘ç°ä¿®æ”¹syscalls.hçš„æ—¶å€™ï¼Œå£°æ˜ç±»å‹å†™é”™äº†ï¼Œæœ¬è¯¥æ˜¯intï¼Œå´å†™æˆäº†longç±»å‹ã€‚ä¿®æ”¹æˆintï¼Œä¸€è·¯é¡ºåˆ©ã€‚å®è·µè¯æ˜ï¼Œmake -j8ç­‰äºmake bzImageåŠ make modulesã€‚
å®‰è£…æ¨¡å—make modules_install
å»ºç«‹æ˜ åƒæ–‡ä»¶å»ºç«‹è¦è½½å…¥ramdiskçš„æ˜ åƒæ–‡ä»¶mkinitramfs -o /boot/initrd-mylinux.imgcd /bootï¼Œll
å®‰è£…å†…æ ¸make install
æ›´æ–°grubå¼•å¯¼update-grub
æµ‹è¯•é€‰æ‹©æ–°å†…æ ¸å¼€æœºæ—¶ï¼Œé€‰æ‹©æ–°å†…æ ¸å¼•å¯¼ç³»ç»Ÿã€‚
voidking.cæ–°å»ºæ–‡ä»¶voidking.cï¼Œå†…å®¹å¦‚ä¸‹ï¼š
#include &lt;unistd.h&gt;#include &lt;stdio.h&gt;#define callvoidking 355int main()&#123;	syscall(callvoidking);	return 0;&#125;
ç¼–è¯‘æ‰§è¡Œgcc -o voidking voidking.c./voidkingæœ€ç»ˆä»€ä¹ˆéƒ½æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ï¼Œä¸çŸ¥é“é”™åœ¨å“ªé‡Œã€‚ã€‚ã€‚ä¹Ÿè®¸æ˜¯sys.cä¸­çš„å‡½æ•°æ²¡æœ‰å†™å¥½ï¼Œä¸é‡åšäº†ï¼Œæ•´ä¸ªæµç¨‹è€—æ—¶å¤ªä¹…ï¼Œé¢†ä¼šç²¾ç¥å°±å¤Ÿäº†ã€‚
å°ç»“ä¸ºLinuxæ·»åŠ æ–°çš„ç³»ç»Ÿè°ƒç”¨ï¼Œä¸»è¦åŒ…æ‹¬æœ‰4ä¸ªæ­¥éª¤ï¼šç¼–å†™ç³»ç»Ÿè°ƒç”¨æœåŠ¡ä¾‹ç¨‹ï¼›æ·»åŠ ç³»ç»Ÿè°ƒç”¨å·ï¼›ä¿®æ”¹ç³»ç»Ÿè°ƒç”¨è¡¨ï¼›é‡æ–°ç¼–è¯‘å†…æ ¸å¹¶æµ‹è¯•æ–°æ·»åŠ çš„ç³»ç»Ÿè°ƒç”¨ã€‚
è™½ç„¶è¿™æ¬¡å®éªŒæœ€ç»ˆå¤±è´¥äº†ï¼Œä½†æ˜¯ï¼Œæˆ‘æŒæ¡äº†æ·»åŠ ç³»ç»Ÿè°ƒç”¨å’Œç¼–è¯‘å†…æ ¸çš„æµç¨‹ï¼ŒåŸ¹å…»äº†è€å¿ƒä»¥åŠåˆ†æè§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚ä¹Ÿç®—æ˜¯æ”¶è·é¢‡ä¸°ï¼Œå¼å¼ï¼
å‚è€ƒæ–‡æ¡£Ubuntu 14.04 TLS å†…æ ¸å‡çº§å’Œæ·»åŠ ç³»ç»Ÿè°ƒç”¨http://yunpan.cn/cQtsTfkbeTPvG  è®¿é—®å¯†ç  adce

å¦‚ä½•å®ç°ä¸€ä¸ªæ–°çš„ç³»ç»Ÿè°ƒç”¨http://book.51cto.com/art/201007/213651.htm

ubuntuä¸‹é‡æ–°ç¼–è¯‘å†…æ ¸http://m.blog.csdn.net/blog/chen_jianjian/42168449

Ubuntu Linuxå†…æ ¸ç¼–è¯‘æ­¥éª¤http://www.linuxidc.com/Linux/2012-03/57303.htm

Add a system call to the linux kernel in Ubuntuhttp://www.franksthinktank.com/howto/addsyscall/

Ubuntuæ·»åŠ ç³»ç»Ÿè°ƒç”¨http://gnodsy.blog.163.com/blog/static/17754713320112135352447/

Ubuntuå†…æ ¸çš„é‡æ–°ç¼–è¯‘å®‰è£…http://www.linuxidc.com/Linux/2009-12/23721.htm
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>VirtualBox Ubuntuå…±äº«æ–‡ä»¶å¤¹</title>
    <url>/dev-virtualbox-ubuntu-share/</url>
    <content><![CDATA[æŒ‚è½½å…±äº«æ–‡ä»¶å¤¹1ã€è®¾ç½®ï¼Œå…±äº«æ–‡ä»¶å¤¹ï¼Œæ·»åŠ ï¼Œé€‰æ‹©å…±äº«æ–‡ä»¶å¤¹è·¯å¾„ï¼ˆå‡è®¾ä¸ºE:\VirtualBoxShareï¼Œå¯¹åº”å…±äº«æ–‡ä»¶å¤¹åç§°ä¸ºVirtualBoxShareï¼‰ï¼Œæ³¨æ„æ­¤æ—¶ä¸è¦å‹¾é€‰è‡ªåŠ¨æŒ‚è½½ã€‚
2ã€å¯åŠ¨Ubuntuï¼Œæ‰“å¼€Terminalã€‚
3ã€æŒ‚è½½å…±äº«æ–‡ä»¶å¤¹
cd /mnt/sudo mkdir sharedsudo mount -t vboxsf VirtualBoxShare /mnt/shared/cd sharedll



å…±äº«æ–‡ä»¶å¤¹å¦‚æœæƒ³å¸è½½ï¼Œå¯è¿è¡Œå‘½ä»¤ï¼šsudo umount -f /mnt/shared
å‚è€ƒæ–‡æ¡£virtualbox+ubuntuè®¾ç½®å…±äº«æ–‡ä»¶å¤¹
virtualboxä¸­ubuntuå’Œwindowså…±äº«æ–‡ä»¶å¤¹è®¾ç½®
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
        <tag>virtualbox</tag>
      </tags>
  </entry>
  <entry>
    <title>æ–°æµªåšå®¢æ‰‹æœºç‰ˆè½¬ç½‘é¡µç‰ˆ</title>
    <url>/hobby-sina-blog-mobile-to-page/</url>
    <content><![CDATA[ç”¨æ‰‹æœºè®¿é—®æ–°æµªåšå®¢çš„æ—¶å€™ï¼Œè®¿é—®åˆ°çš„æ˜¯æ‰‹æœºç‰ˆã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘æƒ³è¦æŸ¥çœ‹PCç½‘é¡µç‰ˆï¼Œåº”è¯¥æ€ä¹ˆåŠï¼Ÿ
ä»¥ä¸‹é¢çš„æ‰‹æœºç‰ˆurlä¸ºä¾‹ï¼šhttp://blog.sina.cn/dpool/blog/s/blog_675cc1ad0100zegv.html
ç›´æ¥è®¿é—®è¯¥urlï¼Œåœ¨PCç«¯ï¼Œçœ‹åˆ°çš„ä¹Ÿæ˜¯æ‰‹æœºç‰ˆçš„å†…å®¹ã€‚
ç»è¿‡å¯¹æ¯”ç½‘é¡µç‰ˆçš„urlï¼ŒéƒåŒå­¦æ‰¾åˆ°äº†æ–¹æ³•ï¼Œä¿®æ”¹urlå¦‚ä¸‹ï¼šhttp://blog.sina.com.cn/s/blog_675cc1ad0100zegv.html
ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨sinaåé¢åŠ ä¸Š.comï¼ŒåŒæ—¶åˆ æ‰/dpool/blogå°±å¯ä»¥äº†ï¼
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxæ¼”è®²</title>
    <url>/dev-linux-speech/</url>
    <content><![CDATA[å‰è¨€æ•™æˆLinuxçš„ä¸å®‹æ¶›è€å¸ˆï¼Œå®‰æ’å¤§å®¶è½®æµè®²è¯¾ï¼Œ6æœˆ4å·å°±åˆ°æˆ‘äº†ï¼Œèµ¶ç´§å¤‡è¯¾ï¼æˆ‘ä»¬ç»„è¦è®²çš„å†…å®¹æœ‰ï¼šLinuxç¬¬9é¢˜ï¼š

åˆ©ç”¨dumpe2fsæŠŠlinuxä¸€ä¸ªext2(ext3ä¹Ÿå¯)åˆ†åŒºçš„ä¿¡æ¯dumpå‡ºæ¥ï¼Œè§£é‡Šdumpå‡ºæ¥çš„ä¿¡æ¯ã€‚
ç»“åˆè¯¾ç¨‹çš„çŸ¥è¯†å’Œext2çš„ç›®å½•ç»“æ„ï¼Œè§£ææ–‡ä»¶æ‰“å¼€çš„è¿‡ç¨‹ã€‚

è¯¾æœ¬ç¬¬11ç« ï¼š

è¿›ç¨‹é—´é€šä¿¡ã€‚

æœ¬æ¥æƒ³æŠŠè¿™ä¸¤éƒ¨åˆ†å†…å®¹éƒ½åšä¸€ä¸‹ï¼Œåæ¥å‘ç°ï¼Œå†…å®¹å®åœ¨å¤ªå¤šï¼Œæä¸å®šï¼Œè¿˜æ˜¯å¤§å®¶å‡æ‘Šå§ï¼é¢˜ç›®æˆ‘æ¥ï¼Œè¯¾æœ¬éƒ¨åˆ†äº¤ç»™å°ä¼™ä¼´ä»¬ï¼PPTæ˜¯æˆ‘å·²ç»ä»ç™¾åº¦æ–‡åº“Downå¥½äº†ï¼ŒåŒå¿—ä»¬ï¼Œå‰©ä¸‹çš„çœ‹ä½ ä»¬çš„äº†ï¼


Linuxç¬¬9é¢˜ç¬¬ä¸€å°é—®åˆ©ç”¨dumpe2fsæŠŠlinuxä¸€ä¸ªext2(ext3ä¹Ÿå¯)åˆ†åŒºçš„ä¿¡æ¯dumpå‡ºæ¥ï¼Œè§£é‡Šdumpå‡ºæ¥çš„ä¿¡æ¯ã€‚
å‘½ä»¤mountæˆ–è€…df -lhTï¼ŒæŸ¥çœ‹æœ‰å“ªäº›æ–‡ä»¶ç³»ç»Ÿã€‚dumpe2fs /dev/sda1 &gt; dump.txtï¼ŒæŠŠåˆ†åŒºä¿¡æ¯å†™å…¥dump.txtã€‚ç”±äºéƒåŒå­¦åœ¨ä½¿ç”¨è™šæ‹Ÿæœºå®‰è£…Ubuntuçš„æ—¶å€™ï¼Œé€‰æ‹©äº†è®©ç³»ç»Ÿè‡ªåŠ¨åˆ†åŒºï¼Œæ‰€ä»¥ï¼Œæ²¡æœ‰æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨ext2æˆ–è€…ext3ã€‚æœ€ç»ˆå¯¼å‡ºçš„ï¼Œæ˜¯ä¸€ä¸ªext4ç³»ç»Ÿçš„åˆ†åŒºä¿¡æ¯ã€‚ä¸å†æ›´æ”¹åˆ†åŒºäº†ï¼Œåˆ†åŒºå‘½ä»¤ä¹Ÿå¿˜å¾—å·®ä¸å¤šäº†ã€‚ã€‚ã€‚
dump.txtFilesystem volume name:   &lt;none&gt;Last mounted on:          /Filesystem UUID:          56f9c6d7-9968-4c57-b2e5-c63d82738033Filesystem magic number:  0xEF53Filesystem revision #:    1 (dynamic)Filesystem features:      has_journal ext_attr resize_inode dir_index filetype needs_recovery extent flex_bg sparse_super large_file huge_file uninit_bg dir_nlink extra_isizeFilesystem flags:         signed_directory_hash Default mount options:    user_xattr aclFilesystem state:         cleanErrors behavior:          ContinueFilesystem OS type:       LinuxInode count:              458752Block count:              1834752Reserved block count:     91737Free blocks:              738375Free inodes:              287057First block:              0Block size:               4096Fragment size:            4096Reserved GDT blocks:      447Blocks per group:         32768Fragments per group:      32768Inodes per group:         8192Inode blocks per group:   512Flex block group size:    16Filesystem created:       Tue Jun  2 13:05:17 2015Last mount time:          Tue Jun  2 13:47:14 2015Last write time:          Tue Jun  2 13:47:14 2015Mount count:              3Maximum mount count:      -1Last checked:             Tue Jun  2 13:05:17 2015Check interval:           0 (&lt;none&gt;)Lifetime writes:          5791 MBReserved blocks uid:      0 (user root)Reserved blocks gid:      0 (group root)First inode:              11Inode size:	          256Required extra isize:     28Desired extra isize:      28Journal inode:            8First orphan inode:       7969Default directory hash:   half_md4Directory Hash Seed:      04a70c20-f9ac-430b-9b6b-4179feaa85c6Journal backup:           inode blocksJournal features:         journal_incompat_revokeJournal size:             128MJournal length:           32768Journal sequence:         0x00000a4fJournal start:            1Group 0: (Blocks 0-32767) [ITABLE_ZEROED]  Checksum 0xdf8b, unused inodes 0  Primary superblock at 0, Group descriptors at 1-1  Reserved GDT blocks at 2-448  Block bitmap at 449 (+449), Inode bitmap at 465 (+465)  Inode table at 481-992 (+481)  19210 free blocks, 56 free inodes, 1061 directories  Free blocks: 9640-9649, 9652-9661, 10382, 10388, 10499, 10669, 10755, 10786, 10892-10893, 10899, 13400, 13572-13573, 13579, 13591-32767  Free inodes: 7970-7975, 7977-8025, 8032Group 1: (Blocks 32768-65535) [ITABLE_ZEROED]  Checksum 0xd97d, unused inodes 0  Backup superblock at 32768, Group descriptors at 32769-32769  Reserved GDT blocks at 32770-33216  Block bitmap at 450 (bg #0 + 450), Inode bitmap at 466 (bg #0 + 466)  Inode table at 993-1504 (bg #0 + 993)  0 free blocks, 15 free inodes, 961 directories  Free blocks:   Free inodes: 9270, 9272, 9317, 11214, 11246, 15869, 15878, 15883, 15931, 15937, 16048, 16218, 16304, 16349-16350Group 2: (Blocks 65536-98303) [ITABLE_ZEROED]  Checksum 0x2380, unused inodes 0  Block bitmap at 451 (bg #0 + 451), Inode bitmap at 467 (bg #0 + 467)  Inode table at 1505-2016 (bg #0 + 1505)  0 free blocks, 33 free inodes, 58 directories  Free blocks:   Free inodes: 16416-16418, 16436-16441, 16627-16630, 16647-16651, 17142-17146, 17871-17872, 18189-18190, 18887, 18906, 18908, 19092-19094..................Group 55: (Blocks 1802240-1834751) [INODE_UNINIT, ITABLE_ZEROED]  Checksum 0x182b, unused inodes 8192  Block bitmap at 1572871 (bg #48 + 7), Inode bitmap at 1572887 (bg #48 + 23)  Inode table at 1576480-1576991 (bg #48 + 3616)  32512 free blocks, 8192 free inodes, 0 directories, 8192 unused inodes  Free blocks: 1802240-1834751  Free inodes: 450561-458752

ext2æ–‡ä»¶ç³»ç»Ÿåˆ†åŒºä¿¡æ¯Filesystem volume name:   /                                 æ–‡ä»¶ç³»ç»Ÿæ ‡ç­¾Last mounted on:          &lt;not available&gt;Filesystem UUID:          a5d248ed-850b-4392-929d-b86e2b4d65b8Filesystem magic number:  0xEF53Filesystem revision #:    1 (dynamic)Filesystem features:      has_journal ext_attr resize_inode dir_index filetype needs_recovery sparse_super large_file        ext2æ–‡ä»¶ç³»ç»Ÿå¯ä»¥åŒ…å«çš„å‡ ç§åŠŸèƒ½Default mount options:    user_xattr aclFilesystem state:         cleanErrors behavior.:          ContinueFilesystem OS type:       LinuxInode count:              2097152                            æ–‡ä»¶ç³»ç»Ÿä¸­inodeèŠ‚ç‚¹çš„æ•°ç›®Block count:              2096474                            æ–‡ä»¶ç³»ç»Ÿä¸­å—çš„æ•°ç›®Reserved block count:     104823Free blocks:              1910125Free inodes:              2091098First block:              0Block size:               4096                                       å—å¤§å°Fragment size:            4096Reserved GDT blocks:      511Blocks per group:         32768Fragments per group:      32768Inodes per group:         32768Inode blocks per group:   1024Filesystem created:       Sat Nov 20 00:27:31 2010Last mount time:          Sat Nov 20 23:53:31 2010Last write time:          Sat Nov 20 23:53:31 2010Mount count:              10Maximum mount count:      -1Last checked:             Sat Nov 20 00:27:31 2010Check interval:           0 (&lt;none&gt;)Reserved blocks uid:      0 (user root)Reserved blocks gid:      0 (group root)First inode:              11Inode size:               128Journal inode:            8Default directory hash:   teaDirectory Hash Seed:      3302e23c-fc75-4a98-b9d1-9660c335988cJournal backup:           inode blocksJournal size:             128MGroup 0: (Blocks 0-32767)  Primary superblock at 0, Group descriptors at 1-1  Reserved GDT blocks at 2-512  Block bitmap at 513 (+513), Inode bitmap at 514 (+514)  Inode table at 515-1538 (+515)  0 free blocks, 32757 free inodes, 2 directories  Free blocks:   Free inodes: 12-32768Group 1: (Blocks 32768-65535)  Backup superblock at 32768, Group descriptors at 32769-32769  Reserved GDT blocks at 32770-33280  Block bitmap at 33281 (+513), Inode bitmap at 33282 (+514)  Inode table at 33283-34306 (+515)  26899 free blocks, 32592 free inodes, 44 directories  Free blocks: 35887-55295, 58045, 58047-65535  Free inodes: 32944, 32946-65536Group 2: (Blocks 65536-98303)  Block bitmap at 65536 (+0), Inode bitmap at 65537 (+1)  Inode table at 65538-66561 (+2)  31742 free blocks, 32768 free inodes, 0 directories  Free blocks: 66562-98303  Free inodes: 65537-98304..................Group 63: (Blocks 2064384-2096473)  Block bitmap at 2064384 (+0), Inode bitmap at 2064385 (+1)  Inode table at 2064386-2065409 (+2)  22114 free blocks, 32187 free inodes, 113 directories  Free blocks: 2065411-2086911, 2095861-2096473  Free inodes: 2064966-2097152

dump.txtè¯¦è§£Filesystem volume name:   &lt;none&gt;	æ–‡ä»¶ç³»ç»Ÿ volume åç§°Last mounted on:          /			ä¸Šä¸€æ¬¡æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ç‚¹è·¯å¾„Filesystem UUID:          56f9c6d7-9968-4c57-b2e5-c63d82738033	ç”±ä¹±æ•°äº§ç”Ÿçš„è¯†åˆ«ç ï¼Œå¯ä»¥ç”¨æ¥è¯†åˆ«æ–‡ä»¶ç³»ç»Ÿã€‚Filesystem magic number:  0xEF53	ç”¨æ¥è¯†åˆ«æ­¤æ–‡æ¡£ç³»ç»Ÿä¸º Ext2/Ext3/Ext4 çš„ç­¾åï¼Œä½ç½®åœ¨æ–‡æ¡£ç³»ç»Ÿçš„ 0x0438 - 0x0439 (Superblock çš„ 0x38-0x39)ï¼Œå¿…å®šæ˜¯ 0xEF53ã€‚Filesystem revision #:    1 (dynamic)	æ–‡ä»¶ç³»ç»Ÿç‰ˆæœ¬ç¼–å·Filesystem features:      has_journal ext_attr resize_inode dir_index filetype needs_recovery extent flex_bg sparse_super large_file huge_file uninit_bg dir_nlink extra_isizeå¼€å¯äº†çš„æ–‡ä»¶ç³»ç»Ÿçš„åŠŸèƒ½has_journal - æœ‰æ—¥å¿— (journal)ï¼Œäº¦ä»£è¡¨æ­¤æ–‡ä»¶ç³»ç»Ÿå¿…ä¸º Ext3 æˆ– Ext4ext_attr - æ”¯æŒ extended attributeresize_inode - resize2fs å¯ä»¥æ”¹å˜æ–‡ä»¶ç³»ç»Ÿå¤§å°dir_index - æ”¯æŒç›®å½•ç´¢å¼•ï¼Œå¯ä»¥åŠ å¿«åœ¨å¤§ç›®å½•ä¸­æœç´¢æ–‡ä»¶ã€‚filetype - ç›®å½•é¡¹ç›®ä¸ºå¦è®°å½•æ–‡ä»¶ç±»å‹needs_recovery - e2fsck æ£€æŸ¥ Ext3/Ext4 æ–‡ä»¶ç³»ç»Ÿæ—¶ç”¨æ¥å†³å®šæ˜¯å¦éœ€è¦å®Œæˆæ—¥å¿—è®°å½•ä¸­æœªå®Œæˆçš„å·¥ä½œï¼Œå¿«é€Ÿè‡ªåŠ¨ä¿®å¤æ–‡ä»¶ç³»ç»Ÿextent - æ”¯æŒ Ext4 extent åŠŸèƒ½ï¼Œå¯ä»¥åŠ å¿«æ–‡ä»¶ç³»ç»Ÿæ•ˆèƒ½å’Œå‡å°‘ external fragmentationflex_bgsparse_super - åªæœ‰å°‘æ•° superblock å¤‡ä»½ï¼Œè€Œä¸æ˜¯æ¯ä¸ªåŒºå—ç»„éƒ½æœ‰ superblock å¤‡ä»½ï¼ŒèŠ‚çœç©ºé—´ã€‚large_file - æ”¯æŒå¤§äº 2G çš„æ¡£æ¡ˆhuge_fileuninit_bgdir_nlinkextra_isizeFilesystem flags:         signed_directory_hash 	æ–‡ä»¶ç³»ç»Ÿæ——å·Default mount options:    user_xattr acl	é»˜è®¤æŒ‚è½½é€‰é¡¹Filesystem state:         clean		æ–‡ä»¶ç³»ç»ŸçŠ¶æ€ï¼Œå¯ä»¥ä¸º clean(æ–‡ä»¶ç³»ç»Ÿå·²æˆåŠŸåœ°è¢«å¸è½½)ã€not-clean(è¡¨ç¤ºæ–‡ä»¶ç³»ç»ŸæŒ‚è½½æˆè¯»å†™æ¨¡å¼åï¼Œä»æœªè¢«å¸è½½)æˆ– erroneous (æ–‡ä»¶ç³»ç»Ÿè¢«å‘ç°æœ‰é—®é¢˜)Errors behavior:          Continue		æ–‡ä»¶ç³»ç»Ÿå‘ç”Ÿé—®é¢˜æ—¶çš„å¤„ç†æ–¹æ¡ˆï¼Œå¯ä»¥ä¸º continue (ç»§ç»­æ­£å¸¸è¿ä½œ) ã€remount-ro (é‡æ–°æŒ‚è½½æˆåªè¯»æ¨¡å¼) æˆ– panic (å³æ—¶å½“æ‰ç³»ç»Ÿ)ã€‚å¯ä»¥ä½¿ç”¨ tune2fs -e æ”¹å˜ã€‚Filesystem OS type:       Linux		å»ºç«‹æ–‡ä»¶ç³»ç»Ÿçš„ä½œä¸šç³»ç»Ÿï¼Œå¯ä»¥ä¸º Linux/Hurd/MASIX/FreeBSD/LitesInode count:              458752	æ–‡ä»¶ç³»ç»Ÿçš„æ€»inode æ•°ç›®ï¼Œäº¦æ˜¯æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿæ‰€å¯èƒ½æ‹¥æœ‰æ–‡ä»¶æ•°ç›®çš„ä¸Šé™Block count:              1834752	æ–‡ä»¶ç³»ç»Ÿçš„æ€»åŒºå—æ•°ç›®Reserved block count:     91737		ä¿ç•™ç»™ç³»ç»Ÿç®¡ç†å‘˜å·¥ä½œä¹‹ç”¨çš„åŒºå—æ•°ç›®Free blocks:              738375	æœªä½¿ç”¨åŒºå—æ•°ç›®Free inodes:              287057	æœªä½¿ç”¨ inode æ•°ç›®First block:              0			Superblock æˆ–ç¬¬ä¸€ä¸ªåŒºå—ç»„å¼€å§‹çš„åŒºå—ç¼–æ•°ã€‚æ­¤å€¼åœ¨ 1 KiB åŒºå—å¤§å°çš„æ–‡ä»¶ç³»ç»Ÿä¸º 1ï¼Œå¤§äº1 KiB åŒºå—å¤§å°çš„æ–‡ä»¶ç³»ç»Ÿä¸º 0ã€‚(Superblock/ç¬¬ä¸€ä¸ªåŒºå—ç»„ä¸€èˆ¬éƒ½åœ¨æ–‡ä»¶ç³»ç»Ÿ 0x0400 (1024) å¼€å§‹)Block size:               4096		åŒºå—å¤§å°ï¼Œå¯ä»¥ä¸º 1024, 2048 æˆ– 4096 å­—èŠ‚ (Compaq Alpha ç³»ç»Ÿå¯ä»¥ä½¿ç”¨ 8192 å­—èŠ‚çš„åŒºå—)Fragment size:            4096		Fragmentå¤§å°ï¼Œå®é™…ä¸ŠExt2/Ext3/Ext4å¹¶ä¸æ”¯æŒFragmentï¼Œæ‰€ä»¥æ­¤å€¼ä¸€èˆ¬å’ŒåŒºå—å¤§å°ä¸€æ ·Reserved GDT blocks:      447	ä¿ç•™GDTåŒºå—æ•°ç›®ï¼Œä¿ç•™ä½œåœ¨çº¿æ”¹å˜æ–‡ä»¶ç³»ç»Ÿå¤§å°çš„åŒºå—æ•°ç›®ã€‚è‹¥æ­¤å€¼ä¸º0ï¼Œåªå¯ä»¥å…ˆå¸è½½æ‰å¯è„±æœºæ”¹å˜æ–‡ä»¶ç³»ç»Ÿå¤§å°Blocks per group:         32768		æ¯ä¸ªåŒºå—ç»„çš„åŒºå—æ•°ç›®Fragments per group:      32768		æ¯ä¸ªåŒºå—ç»„çš„ç‰‡æ®µæ•°ç›®ï¼Œäº¦ç”¨æ¥è®¡ç®—æ¯ä¸ªåŒºå—ç»„ä¸­ block bitmap çš„å¤§å°Inodes per group:         8192		æ¯ä¸ªåŒºå—ç»„çš„inodeæ•°ç›®Inode blocks per group:   512		æ¯ä¸ªåŒºå—ç»„çš„inodeåŒºå—æ•°ç›®Flex block group size:    16		Filesystem created:       Tue Jun  2 13:05:17 2015	æ–‡ä»¶ç³»ç»Ÿå»ºç«‹æ—¶é—´Last mount time:          Tue Jun  2 13:47:14 2015	ä¸Šä¸€æ¬¡æŒ‚è½½æ­¤æ–‡ä»¶ç³»ç»Ÿçš„æ—¶é—´Last write time:          Tue Jun  2 13:47:14 2015	ä¸Šä¸€æ¬¡æ”¹å˜æ­¤æ–‡ä»¶ç³»ç»Ÿå†…å®¹çš„æ—¶é—´Mount count:              3		æŒ‚è½½æ¬¡æ•°ã€‚è·ä¸Šä¸€æ¬¡ä½œå®Œæ•´æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥åæ–‡ä»¶ç³»ç»Ÿè¢«æŒ‚è½½çš„æ¬¡æ•°ï¼Œè®©fsckå†³å®šæ˜¯å¦åº”è¿›è¡Œå¦ä¸€æ¬¡å®Œæ•´æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥Maximum mount count:      -1	æœ€å¤§æŒ‚è½½æ¬¡æ•°ã€‚æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œå¦ä¸€æ¬¡å®Œæ•´æ£€æŸ¥å¯ä»¥è¢«æŒ‚è½½çš„æ¬¡æ•°ï¼Œè‹¥æŒ‚è½½æ¬¡æ•°(Mount count)å¤§äºæ­¤å€¼ï¼Œfsck ä¼šè¿›è¡Œå¦ä¸€æ¬¡å®Œæ•´æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥Last checked:             Tue Jun  2 13:05:17 2015	ä¸Šä¸€æ¬¡æ–‡ä»¶ç³»ç»Ÿä½œå®Œæ•´æ£€æŸ¥çš„æ—¶é—´Check interval:           0 (&lt;none&gt;)	æ–‡ä»¶ç³»ç»Ÿåº”è¯¥è¿›è¡Œå¦ä¸€æ¬¡å®Œæ•´æ£€æŸ¥çš„æœ€å¤§æ—¶é—´è·Lifetime writes:          5791 MBReserved blocks uid:      0 (user root)		ä¿ç•™åŒºå—ä½¿ç”¨è€…è¯†åˆ«ç  Reserved blocks gid:      0 (group root)	ä¿ç•™åŒºå—ç¾¤ç»„è¯†åˆ«ç First inode:              11		ç¬¬ä¸€ä¸ªå¯ä»¥ç”¨ä½œå­˜æ”¾æ­£å¸¸æ–‡ä»¶å±æ€§çš„inodeç¼–å·ï¼Œåœ¨åŸæ ¼å¼æ­¤å€¼ä¸€å®šä¸º11ï¼ŒV2æ ¼å¼å¯ä»¥æ”¹å˜æ­¤å€¼Inode size:	          256	Inode å¤§å°ï¼Œä¼ ç»Ÿä¸º 128 å­—èŠ‚ï¼Œæ–°ç³»ç»Ÿä¼šä½¿ç”¨ 256 å­—èŠ‚çš„ inode ä»¤æ‰©å……åŠŸèƒ½æ›´æ–¹ä¾¿Required extra isize:     28	å¿…é¡»çš„é¢å¤–isizeDesired extra isize:      28	è¯·æ±‚çš„é¢å¤–isizeJournal inode:            8		æ—¥å¿—æ–‡ä»¶çš„ inode ç¼–å·First orphan inode:       7969Default directory hash:   half_md4		ç¼ºçœç›®å½• hash ç®—æ³•Directory Hash Seed:      04a70c20-f9ac-430b-9b6b-4179feaa85c6		ç›®å½• hash ç§å­Journal backup:           inode blocks		æ—¥å¿—å¤‡ä»½Journal features:         journal_incompat_revoke	æ—¥å¿—ç‰¹ç‚¹Journal size:             128M		æ—¥å¿—æ–‡ä»¶çš„å¤§å°Journal length:           32768		æ—¥å¿—é•¿åº¦Journal sequence:         0x00000a4f	æ—¥å¿—åºåˆ—Journal start:            1		æ—¥å¿—å¼€å§‹ä½ç½®Group 0: (Blocks 0-32767) [ITABLE_ZEROED]  Checksum 0xdf8b, unused inodes 0  Primary superblock at 0, Group descriptors at 1-1  Reserved GDT blocks at 2-448  Block bitmap at 449 (+449), Inode bitmap at 465 (+465)  Inode table at 481-992 (+481)  19210 free blocks, 56 free inodes, 1061 directories  Free blocks: 9640-9649, 9652-9661, 10382, 10388, 10499, 10669, 10755, 10786, 10892-10893, 10899, 13400, 13572-13573, 13579, 13591-32767  Free inodes: 7970-7975, 7977-8025, 8032

ç¬¬äºŒå°é—®ç»“åˆè¯¾ç¨‹çš„çŸ¥è¯†å’Œext2çš„ç›®å½•ç»“æ„ï¼Œè§£ææ–‡ä»¶æ‰“å¼€çš„è¿‡ç¨‹ã€‚
ext2æ–‡ä»¶ç³»ç»Ÿ
æ–‡ä»¶ç³»ç»Ÿä¸­å­˜å‚¨çš„æœ€å°å•ä½æ˜¯å—ï¼ˆBlockï¼‰ï¼Œä¸€ä¸ªå—ç©¶ç«Ÿå¤šå¤§æ˜¯åœ¨æ ¼å¼åŒ–æ—¶ç¡®å®šçš„ï¼Œä¾‹å¦‚mke2fsçš„-bé€‰é¡¹å¯ä»¥è®¾å®šå—å¤§å°ä¸º1024ã€2048æˆ–4096å­—èŠ‚ã€‚è€Œä¸Šå›¾ä¸­å¯åŠ¨å—ï¼ˆBoot Blockï¼‰çš„å¤§å°æ˜¯ç¡®å®šçš„ï¼Œå°±æ˜¯1KBï¼Œå¯åŠ¨å—æ˜¯ç”±PCæ ‡å‡†è§„å®šçš„ï¼Œç”¨æ¥å­˜å‚¨ç£ç›˜åˆ†åŒºä¿¡æ¯å’Œå¯åŠ¨ä¿¡æ¯ï¼Œä»»ä½•æ–‡ä»¶ç³»ç»Ÿéƒ½ä¸èƒ½ä½¿ç”¨å¯åŠ¨å—ã€‚å¯åŠ¨å—ä¹‹åæ‰æ˜¯ext2æ–‡ä»¶ç³»ç»Ÿçš„å¼€å§‹ï¼Œext2æ–‡ä»¶ç³»ç»Ÿå°†æ•´ä¸ªåˆ†åŒºåˆ’æˆè‹¥å¹²ä¸ªåŒæ ·å¤§å°çš„å—ç»„ï¼ˆBlock Groupï¼‰ï¼Œæ¯ä¸ªå—ç»„éƒ½ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆã€‚
è¶…çº§å—ï¼ˆSuper Blockï¼‰æè¿°æ•´ä¸ªåˆ†åŒºçš„æ–‡ä»¶ç³»ç»Ÿä¿¡æ¯ï¼Œä¾‹å¦‚å—å¤§å°ã€æ–‡ä»¶ç³»ç»Ÿç‰ˆæœ¬å·ã€ä¸Šæ¬¡mountçš„æ—¶é—´ç­‰ç­‰ã€‚è¶…çº§å—åœ¨æ¯ä¸ªå—ç»„çš„å¼€å¤´éƒ½æœ‰ä¸€ä»½æ‹·è´ã€‚
å—ç»„æè¿°ç¬¦è¡¨ï¼ˆGDTï¼ŒGroup Descriptor Tableï¼‰ç”±å¾ˆå¤šå—ç»„æè¿°ç¬¦ç»„æˆï¼Œæ•´ä¸ªåˆ†åŒºåˆ†æˆå¤šå°‘ä¸ªå—ç»„å°±å¯¹åº”æœ‰å¤šå°‘ä¸ªå—ç»„æè¿°ç¬¦ã€‚æ¯ä¸ªå—ç»„æè¿°ç¬¦ï¼ˆGroup Descriptorï¼‰å­˜å‚¨ä¸€ä¸ªå—ç»„çš„æè¿°ä¿¡æ¯ï¼Œä¾‹å¦‚åœ¨è¿™ä¸ªå—ç»„ä¸­ä»å“ªé‡Œå¼€å§‹æ˜¯inodeè¡¨ï¼Œä»å“ªé‡Œå¼€å§‹æ˜¯æ•°æ®å—ï¼Œç©ºé—²çš„inodeå’Œæ•°æ®å—è¿˜æœ‰å¤šå°‘ä¸ªç­‰ç­‰ã€‚å’Œè¶…çº§å—ç±»ä¼¼ï¼Œå—ç»„æè¿°ç¬¦è¡¨åœ¨æ¯ä¸ªå—ç»„çš„å¼€å¤´ä¹Ÿéƒ½æœ‰ä¸€ä»½æ‹·è´ï¼Œè¿™äº›ä¿¡æ¯æ˜¯éå¸¸é‡è¦çš„ï¼Œä¸€æ—¦è¶…çº§å—æ„å¤–æŸåå°±ä¼šä¸¢å¤±æ•´ä¸ªåˆ†åŒºçš„æ•°æ®ï¼Œä¸€æ—¦å—ç»„æè¿°ç¬¦æ„å¤–æŸåå°±ä¼šä¸¢å¤±æ•´ä¸ªå—ç»„çš„æ•°æ®ï¼Œå› æ­¤å®ƒä»¬éƒ½æœ‰å¤šä»½æ‹·è´ã€‚é€šå¸¸å†…æ ¸åªç”¨åˆ°ç¬¬0ä¸ªå—ç»„ä¸­çš„æ‹·è´ï¼Œå½“æ‰§è¡Œe2fsckæ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿä¸€è‡´æ€§æ—¶ï¼Œç¬¬0ä¸ªå—ç»„ä¸­çš„è¶…çº§å—å’Œå—ç»„æè¿°ç¬¦è¡¨å°±ä¼šæ‹·è´åˆ°å…¶å®ƒå—ç»„ï¼Œè¿™æ ·å½“ç¬¬0ä¸ªå—ç»„çš„å¼€å¤´æ„å¤–æŸåæ—¶å°±å¯ä»¥ç”¨å…¶å®ƒæ‹·è´æ¥æ¢å¤ï¼Œä»è€Œå‡å°‘æŸå¤±ã€‚
å—ä½å›¾ï¼ˆBlock Bitmapï¼‰ä¸€ä¸ªå—ç»„ä¸­çš„å—æ˜¯è¿™æ ·åˆ©ç”¨çš„ï¼šæ•°æ®å—ï¼ˆData Blockï¼‰å­˜å‚¨æ‰€æœ‰æ–‡ä»¶çš„æ•°æ®ï¼Œæ¯”å¦‚æŸä¸ªåˆ†åŒºçš„å—å¤§å°æ˜¯1024å­—èŠ‚ï¼ŒæŸä¸ªæ–‡ä»¶æ˜¯2049å­—èŠ‚ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸‰ä¸ªæ•°æ®å—æ¥å­˜ï¼Œå³ä½¿ç¬¬ä¸‰ä¸ªå—åªå­˜äº†ä¸€ä¸ªå­—èŠ‚ä¹Ÿéœ€è¦å ç”¨ä¸€ä¸ªæ•´å—ï¼›è¶…çº§å—ã€å—ç»„æè¿°ç¬¦è¡¨ã€å—ä½å›¾ã€inodeä½å›¾ã€inodeè¡¨è¿™å‡ éƒ¨åˆ†å­˜å‚¨è¯¥å—ç»„çš„æè¿°ä¿¡æ¯ã€‚é‚£ä¹ˆå¦‚ä½•çŸ¥é“å“ªäº›å—å·²ç»ç”¨æ¥å­˜å‚¨æ–‡ä»¶æ•°æ®æˆ–å…¶å®ƒæè¿°ä¿¡æ¯ï¼Œå“ªäº›å—ä»ç„¶ç©ºé—²å¯ç”¨å‘¢ï¼Ÿå—ä½å›¾å°±æ˜¯ç”¨æ¥æè¿°æ•´ä¸ªå—ç»„ä¸­å“ªäº›å—å·²ç”¨å“ªäº›å—ç©ºé—²çš„ï¼Œå®ƒæœ¬èº«å ä¸€ä¸ªå—ï¼Œå…¶ä¸­çš„æ¯ä¸ªbitä»£è¡¨æœ¬å—ç»„ä¸­çš„ä¸€ä¸ªå—ï¼Œè¿™ä¸ªbitä¸º1è¡¨ç¤ºè¯¥å—å·²ç”¨ï¼Œè¿™ä¸ªbitä¸º0è¡¨ç¤ºè¯¥å—ç©ºé—²å¯ç”¨ã€‚
ä¸ºä»€ä¹ˆç”¨dfå‘½ä»¤ç»Ÿè®¡æ•´ä¸ªç£ç›˜çš„å·²ç”¨ç©ºé—´éå¸¸å¿«å‘¢ï¼Ÿå› ä¸ºåªéœ€è¦æŸ¥çœ‹æ¯ä¸ªå—ç»„çš„å—ä½å›¾å³å¯ï¼Œè€Œä¸éœ€è¦æœéæ•´ä¸ªåˆ†åŒºã€‚ç›¸åï¼Œç”¨duå‘½ä»¤æŸ¥çœ‹ä¸€ä¸ªè¾ƒå¤§ç›®å½•çš„å·²ç”¨ç©ºé—´å°±éå¸¸æ…¢ï¼Œå› ä¸ºä¸å¯é¿å…åœ°è¦æœéæ•´ä¸ªç›®å½•çš„æ‰€æœ‰æ–‡ä»¶ã€‚
ä¸æ­¤ç›¸è”ç³»çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šåœ¨æ ¼å¼åŒ–ä¸€ä¸ªåˆ†åŒºæ—¶ç©¶ç«Ÿä¼šåˆ’å‡ºå¤šå°‘ä¸ªå—ç»„å‘¢ï¼Ÿä¸»è¦çš„é™åˆ¶åœ¨äºå—ä½å›¾æœ¬èº«å¿…é¡»åªå ä¸€ä¸ªå—ã€‚ç”¨mke2fsæ ¼å¼åŒ–æ—¶é»˜è®¤å—å¤§å°æ˜¯1024å­—èŠ‚ï¼Œå¯ä»¥ç”¨-bå‚æ•°æŒ‡å®šå—å¤§å°ï¼Œç°åœ¨è®¾å—å¤§å°æŒ‡å®šä¸ºbå­—èŠ‚ï¼Œé‚£ä¹ˆä¸€ä¸ªå—å¯ä»¥æœ‰8bä¸ªbitï¼Œè¿™æ ·å¤§å°çš„ä¸€ä¸ªå—ä½å›¾å°±å¯ä»¥è¡¨ç¤º8bä¸ªå—çš„å ç”¨æƒ…å†µï¼Œå› æ­¤ä¸€ä¸ªå—ç»„æœ€å¤šå¯ä»¥æœ‰8bä¸ªå—ï¼Œå¦‚æœæ•´ä¸ªåˆ†åŒºæœ‰sä¸ªå—ï¼Œé‚£ä¹ˆå°±å¯ä»¥æœ‰s/(8b)ä¸ªå—ç»„ã€‚æ ¼å¼åŒ–æ—¶å¯ä»¥ç”¨-gå‚æ•°æŒ‡å®šä¸€ä¸ªå—ç»„æœ‰å¤šå°‘ä¸ªå—ï¼Œä½†æ˜¯é€šå¸¸ä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®šï¼Œmke2fså·¥å…·ä¼šè®¡ç®—å‡ºæœ€ä¼˜çš„æ•°å€¼ã€‚
inodeä½å›¾ï¼ˆinode Bitmapï¼‰å’Œå—ä½å›¾ç±»ä¼¼ï¼Œæœ¬èº«å ä¸€ä¸ªå—ï¼Œå…¶ä¸­æ¯ä¸ªbitè¡¨ç¤ºä¸€ä¸ªinodeæ˜¯å¦ç©ºé—²å¯ç”¨ã€‚
inodeè¡¨ï¼ˆinode Tableï¼‰æˆ‘ä»¬çŸ¥é“ï¼Œä¸€ä¸ªæ–‡ä»¶é™¤äº†æ•°æ®éœ€è¦å­˜å‚¨ä¹‹å¤–ï¼Œä¸€äº›æè¿°ä¿¡æ¯ä¹Ÿéœ€è¦å­˜å‚¨ï¼Œä¾‹å¦‚æ–‡ä»¶ç±»å‹ï¼ˆå¸¸è§„ã€ç›®å½•ã€ç¬¦å·é“¾æ¥ç­‰ï¼‰ï¼Œæƒé™ï¼Œæ–‡ä»¶å¤§å°ï¼Œåˆ›å»º/ä¿®æ”¹/è®¿é—®æ—¶é—´ç­‰ï¼Œä¹Ÿå°±æ˜¯ls -lå‘½ä»¤çœ‹åˆ°çš„é‚£äº›ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å­˜åœ¨inodeä¸­è€Œä¸æ˜¯æ•°æ®å—ä¸­ã€‚æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªinodeï¼Œä¸€ä¸ªå—ç»„ä¸­çš„æ‰€æœ‰inodeç»„æˆäº†inodeè¡¨ã€‚
inodeè¡¨å å¤šå°‘ä¸ªå—åœ¨æ ¼å¼åŒ–æ—¶å°±è¦å†³å®šå¹¶å†™å…¥å—ç»„æè¿°ç¬¦ä¸­ï¼Œmke2fsæ ¼å¼åŒ–å·¥å…·çš„é»˜è®¤ç­–ç•¥æ˜¯ä¸€ä¸ªå—ç»„æœ‰å¤šå°‘ä¸ª8KBå°±åˆ†é…å¤šå°‘ä¸ªinodeã€‚ç”±äºæ•°æ®å—å äº†æ•´ä¸ªå—ç»„çš„ç»å¤§éƒ¨åˆ†ï¼Œä¹Ÿå¯ä»¥è¿‘ä¼¼è®¤ä¸ºæ•°æ®å—æœ‰å¤šå°‘ä¸ª8KBå°±åˆ†é…å¤šå°‘ä¸ªinodeï¼Œæ¢å¥è¯è¯´ï¼Œå¦‚æœå¹³å‡æ¯ä¸ªæ–‡ä»¶çš„å¤§å°æ˜¯8KBï¼Œå½“åˆ†åŒºå­˜æ»¡çš„æ—¶å€™inodeè¡¨ä¼šå¾—åˆ°æ¯”è¾ƒå……åˆ†çš„åˆ©ç”¨ï¼Œæ•°æ®å—ä¹Ÿä¸æµªè´¹ã€‚å¦‚æœè¿™ä¸ªåˆ†åŒºå­˜çš„éƒ½æ˜¯å¾ˆå¤§çš„æ–‡ä»¶ï¼ˆæ¯”å¦‚ç”µå½±ï¼‰ï¼Œåˆ™æ•°æ®å—ç”¨å®Œçš„æ—¶å€™inodeä¼šæœ‰ä¸€äº›æµªè´¹ï¼Œå¦‚æœè¿™ä¸ªåˆ†åŒºå­˜çš„éƒ½æ˜¯å¾ˆå°çš„æ–‡ä»¶ï¼ˆæ¯”å¦‚æºä»£ç ï¼‰ï¼Œåˆ™æœ‰å¯èƒ½æ•°æ®å—è¿˜æ²¡ç”¨å®Œinodeå°±å·²ç»ç”¨å®Œäº†ï¼Œæ•°æ®å—å¯èƒ½æœ‰å¾ˆå¤§çš„æµªè´¹ã€‚å¦‚æœç”¨æˆ·åœ¨æ ¼å¼åŒ–æ—¶èƒ½å¤Ÿå¯¹è¿™ä¸ªåˆ†åŒºä»¥åè¦å­˜å‚¨çš„æ–‡ä»¶å¤§å°åšä¸€ä¸ªé¢„æµ‹ï¼Œä¹Ÿå¯ä»¥ç”¨mke2fsçš„-iå‚æ•°æ‰‹åŠ¨æŒ‡å®šæ¯å¤šå°‘ä¸ªå­—èŠ‚åˆ†é…ä¸€ä¸ªinodeã€‚
æ•°æ®å—æ ¹æ®ä¸åŒçš„æ–‡ä»¶ç±»å‹æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µ
å¯¹äºå¸¸è§„æ–‡ä»¶ï¼Œæ–‡ä»¶çš„æ•°æ®å­˜å‚¨åœ¨æ•°æ®å—ä¸­ã€‚

å¯¹äºç›®å½•ï¼Œè¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åå’Œç›®å½•åå­˜å‚¨åœ¨æ•°æ®å—ä¸­ï¼Œæ³¨æ„æ–‡ä»¶åä¿å­˜åœ¨å®ƒæ‰€åœ¨ç›®å½•çš„æ•°æ®å—ä¸­ï¼Œé™¤æ–‡ä»¶åä¹‹å¤–ï¼Œls -lå‘½ä»¤çœ‹åˆ°çš„å…¶å®ƒä¿¡æ¯éƒ½ä¿å­˜åœ¨è¯¥æ–‡ä»¶çš„inodeä¸­ã€‚æ³¨æ„è¿™ä¸ªæ¦‚å¿µï¼šç›®å½•ä¹Ÿæ˜¯ä¸€ç§æ–‡ä»¶ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„æ–‡ä»¶ã€‚

å¯¹äºç¬¦å·é“¾æ¥ï¼Œå¦‚æœç›®æ ‡è·¯å¾„åè¾ƒçŸ­åˆ™ç›´æ¥ä¿å­˜åœ¨inodeä¸­ä»¥ä¾¿æ›´å¿«åœ°æŸ¥æ‰¾ï¼Œå¦‚æœç›®æ ‡è·¯å¾„åè¾ƒé•¿åˆ™åˆ†é…ä¸€ä¸ªæ•°æ®å—æ¥ä¿å­˜ã€‚

è®¾å¤‡æ–‡ä»¶ã€FIFOå’Œsocketç­‰ç‰¹æ®Šæ–‡ä»¶æ²¡æœ‰æ•°æ®å—ï¼Œè®¾å¤‡æ–‡ä»¶çš„ä¸»è®¾å¤‡å·å’Œæ¬¡è®¾å¤‡å·ä¿å­˜åœ¨inodeä¸­ã€‚


inode tableinodeè®°å½•çš„æ–‡ä»¶æ•°æ®è‡³å°‘æœ‰ï¼š1ã€è¯¥æ–‡ä»¶çš„è®¿é—®æ¨¡å¼ï¼›ï¼ˆrwxï¼‰2ã€è¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…ä¸ç»„ï¼ˆower/groupï¼‰ï¼›3ã€è¯¥æ–‡ä»¶çš„å¤§å°ï¼›4ã€è¯¥æ–‡ä»¶åˆ›å»ºæˆ–çŠ¶æ€æ”¹å˜çš„æ—¶é—´ï¼ˆctimeï¼‰ï¼›5ã€æœ€è¿‘ä¸€æ¬¡è¯»çš„æ—¶é—´ï¼ˆatimeï¼‰ï¼›6ã€æœ€è¿‘ä¿®æ”¹çš„æ—¶é—´ï¼ˆmtimeï¼‰ï¼›7ã€è¯¥æ–‡ä»¶çš„ç‰¹æ€§çš„æ ‡å¿—ï¼ˆflagï¼‰ï¼›8ã€è¯¥æ–‡ä»¶çœŸæ­£å†…å®¹çš„æŒ‡å‘ï¼ˆpointerï¼‰ï¼›
è€Œæœ‰è¿™ä¹ˆå¼ºå¤§åŠŸèƒ½çš„inodeçš„å¤§å°å‡å›ºå®šä¸ºæ¯ä¸ª128Bã€‚inodeé™¤äº†æ–‡ä»¶æƒé™å±æ€§è®°å½•åŒºåŸŸå¤–ï¼Œè¿˜æœ‰12ä¸ªç›´æ¥ï¼Œ1ä¸ªé—´æ¥ï¼Œä¸€ä¸ªåŒé—´æ¥ä¸ä¸€ä¸ªä¸‰é—´æ¥è®°å½•åŒºã€‚12ä¸ªç›´æ¥æŒ‡å‘å·ç çš„å¯¹ç…§ï¼Œè¿™12ä¸ªè®°å½•å°±èƒ½å¤Ÿç›´æ¥å–å¾—blockå·ç ï¼Œè‡³äºæ‰€è°“çš„é—´æ¥å°±æ˜¯å†æ‹¿ä¸€ä¸ªblockæ¥å½“ä½œblockå·ç çš„è®°å½•åŒºï¼Œå¦‚æœæ–‡ä»¶å¤ªå¤§ï¼Œå°±ä¼šä½¿ç”¨é—´æ¥çš„blockæ¥è®°å½•ç¼–å·ã€‚åŒç†ï¼Œå¦‚æœæ–‡ä»¶æŒç»­é•¿å¤§ï¼Œé‚£ä¹ˆå°±å¤ç”¨æ‰€è°“çš„åŒé—´æ¥ï¼Œç¬¬ä¸€ä¸ªä»…å†æŒ‡å‡ºä¸‹ä¸€ä¸ªè®°å½•ç¼–å·çš„blockåœ¨å“ªé‡Œï¼Œå®é™…è®°å½•åœ¨ç¬¬äºŒä¸ªblockå½“ä¸­ã€‚ä¾æ­¤ç±»æ¨ï¼Œä¸‰é—´æ¥å°±æ˜¯å¤ç”¨ç¬¬ä¸‰å±‚blockæ¥è®°å½•ç¼–å·ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

æ‰“å¼€/opt/fileæ‰“å¼€/opt/fileï¼ŒæŸ¥æ‰¾çš„é¡ºåºæ˜¯ï¼š
1ã€è¯»å‡ºinodeè¡¨ä¸­ç¬¬2é¡¹ï¼Œä¹Ÿå°±æ˜¯æ ¹ç›®å½•çš„inodeï¼Œä»ä¸­æ‰¾å‡ºæ ¹ç›®å½•æ•°æ®å—çš„ä½ç½®
2ã€ä»æ ¹ç›®å½•çš„æ•°æ®å—ä¸­æ‰¾å‡ºæ–‡ä»¶åä¸ºoptçš„è®°å½•ï¼Œä»è®°å½•ä¸­è¯»å‡ºå®ƒçš„inodeå·
3ã€è¯»å‡ºoptç›®å½•çš„inodeï¼Œä»ä¸­æ‰¾å‡ºå®ƒçš„æ•°æ®å—çš„ä½ç½®
4ã€ä»optç›®å½•çš„æ•°æ®å—ä¸­æ‰¾å‡ºæ–‡ä»¶åä¸ºfileçš„è®°å½•ï¼Œä»è®°å½•ä¸­è¯»å‡ºå®ƒçš„inodeå·
5ã€è¯»å‡ºfileæ–‡ä»¶çš„inodeï¼Œæ‰¾åˆ°å®ƒçš„æ•°æ®å—çš„ä½ç½®
6ã€è¯»å‡ºfileæ–‡ä»¶çš„å†…å®¹
lsã€cpã€mvç­‰å‘½ä»¤å®ç°ä¸ä¼šã€‚
è¯¾ä»¶åˆ†äº«è¿›ç¨‹é—´é€šä¿¡PPTï¼šhttp://yunpan.cn/cQTqJ2t3fPeCF  è®¿é—®å¯†ç  a5c9
å‚è€ƒæ–‡æ¡£ã€ŠUNIX/Linuxç¨‹åºè®¾è®¡æ•™ç¨‹ã€‹ï¼Œèµµå…‹ä½³ æ²ˆå¿—å®‡ ç¼–è‘—ï¼Œæœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾

linuxä¸­ä½¿ç”¨dumpe2fsæŸ¥çœ‹EXT2(æˆ–EXT3)æ–‡ä»¶ç³»ç»Ÿä¿¡æ¯http://blog.itpub.net/8183550/viewspace-678589/

åˆçª¥Linux ä¹‹ ext2/ext3æ–‡ä»¶ç³»ç»Ÿhttp://blog.csdn.net/ljianhui/article/details/8604140

Linuxè¿›ç¨‹é—´é€šä¿¡http://www.cnblogs.com/linshui91/archive/1838770.htmlhttp://blog.csdn.net/chen_shiyang/article/details/8011887

Linuxä¸‹çš„è¿›ç¨‹é—´é€šä¿¡-è¯¦è§£http://www.cnblogs.com/skyofbitbit/p/3651750.html

ext4 ç¬”è®°äºŒï¼ˆdumpe2fsï¼‰http://blog.csdn.net/lishuanglin131/article/details/8258447

ext2æ–‡ä»¶ç³»ç»Ÿhttp://docs.linuxtone.org/ebooks/C&amp;CPP/c/ch29s02.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>hexoä¸»é¢˜ä¼˜åŒ–</title>
    <url>/dev-hexo-theme-optimize/</url>
    <content><![CDATA[å‰è¨€å¤§æ¦‚ä¸€å¹´å‰å¼€å§‹ä½¿ç”¨hexoï¼Œä¸»é¢˜ä¸€ç›´ä½¿ç”¨jacmanã€‚åæ¥Hexoæ›´æ–°åˆ°3.0ï¼Œä¸»é¢˜ä¹Ÿè·Ÿç€æ›´æ–°ï¼Œä½†æ˜¯ï¼Œæ‡’æƒ°çš„éƒåŒå­¦å¹¶æ²¡æœ‰å‚ä¸è¿™ä¸€æ›´æ–°æ´»åŠ¨ã€‚å¦‚ä»Šï¼Œå®‰è£…äº†hexo3.0ï¼Œé—®é¢˜æ¥äº†â€”â€”ä¸»é¢˜ä¸åŒ¹é…ã€‚å½“å¹´åƒè¾›ä¸‡è‹¦ä¼˜åŒ–è¿‡çš„ä¸»é¢˜ï¼Œåˆè¦é‡æ–°æèµ·ï¼
é€‰æ‹©ä¸»é¢˜å•Šå˜ï¼Œå‡ ä¸ªæœˆä¸è§ï¼Œhexoå·²ç»å¦‚æ­¤ç‰›é€¼ï¼ä¸ä»…å®˜ç½‘æ›´åŠ é«˜ç«¯å¤§æ°”ä¸Šæ¡£æ¬¡ï¼Œè€Œä¸”ä¸»é¢˜æ•°é‡ç¿»äº†å‡ ç¿»ï¼https://github.com/hexojs/hexo/wiki/Themes ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œç¾¤ä¼—çš„åŠ›é‡æ˜¯å·¨å¤§çš„ï¼æ¢ä¸ªä¸»é¢˜ï¼Œæ¢ä¸ªå¿ƒæƒ…ï¼Œè¿™æ¬¡æˆ‘é€‰æ‹©äº†yiliaï¼Œç®€æ´å¤§æ°”ï¼
æ·»åŠ â€œå…³äºâ€hexo new page &quot;about&quot;ï¼Œç¼–è¾‘hexo/source/about/index.mdï¼Œç¼–è¾‘hexo/themes/yilia/_config.ymlï¼Œæ·»åŠ å¦‚ä¸‹ï¼š
menu:  å…³äº: /about

æ·»åŠ RSSnpm install hexo-generator-feed --saveï¼Œ
æ³¨æ„ï¼Œåé¢çš„å‚æ•°--saveç»å¯¹ä¸èƒ½çœï¼Œå¦åˆ™è¯¥æ’ä»¶ä¿¡æ¯ä¸ä¼šå†™å…¥package.jsonã€‚hexo cleanï¼Œhexo gï¼ŒæŸ¥çœ‹publicæ–‡ä»¶å¤¹ï¼Œå¯ä»¥çœ‹åˆ°atom.xmlæ–‡ä»¶ã€‚
æ·»åŠ sitemapnpm install hexo-generator-sitemap --saveã€‚hexo cleanï¼Œhexo gï¼ŒæŸ¥çœ‹publicæ–‡ä»¶å¤¹ï¼Œå¯ä»¥çœ‹åˆ°sitemap.xmlæ–‡ä»¶ã€‚sitemapçš„åˆè¡·æ˜¯ç»™æœç´¢å¼•æ“çœ‹çš„ï¼Œä¸ºäº†æé«˜æœç´¢å¼•æ“å¯¹è‡ªå·±ç«™ç‚¹çš„æ”¶å½•æ•ˆæœï¼Œæˆ‘ä»¬æœ€å¥½æ‰‹åŠ¨åˆ°googleå’Œç™¾åº¦ç­‰æœç´¢å¼•æ“æäº¤sitemap.xmlã€‚
æ·»åŠ å¤šè¯´http://duoshuo.com/ ï¼Œæ³¨å†Œä¸€ä¸ªè´¦å·ã€‚ç™»å½•ï¼Œæ·»åŠ æ–°ç«™ç‚¹voidkingã€‚åœ¨å·¥å…·ï¼Œè·å–ä»£ç ç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°é€šç”¨ä»£ç ï¼š
&lt;!-- å¤šè¯´è¯„è®ºæ¡† start --&gt;	&lt;div class=&quot;ds-thread&quot; data-thread-key=&quot;è¯·å°†æ­¤å¤„æ›¿æ¢æˆæ–‡ç« åœ¨ä½ çš„ç«™ç‚¹ä¸­çš„ID&quot; data-title=&quot;è¯·æ›¿æ¢æˆæ–‡ç« çš„æ ‡é¢˜&quot; data-url=&quot;è¯·æ›¿æ¢æˆæ–‡ç« çš„ç½‘å€&quot;&gt;&lt;/div&gt;&lt;!-- å¤šè¯´è¯„è®ºæ¡† end --&gt;&lt;!-- å¤šè¯´å…¬å…±JSä»£ç  start (ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡) --&gt;&lt;script type=&quot;text/javascript&quot;&gt;var duoshuoQuery = &#123;short_name:&quot;voidking&quot;&#125;;	(function() &#123;		var ds = document.createElement(&#x27;script&#x27;);		ds.type = &#x27;text/javascript&#x27;;ds.async = true;		ds.src = (document.location.protocol == &#x27;https:&#x27; ? &#x27;https:&#x27; : &#x27;http:&#x27;) + &#x27;//static.duoshuo.com/embed.js&#x27;;		ds.charset = &#x27;UTF-8&#x27;;		(document.getElementsByTagName(&#x27;head&#x27;)[0] 		 || document.getElementsByTagName(&#x27;body&#x27;)[0]).appendChild(ds);	&#125;)();	&lt;/script&gt;&lt;!-- å¤šè¯´å…¬å…±JSä»£ç  end --&gt;

var duoshuoQuery = &#123;short_name:&quot;voidking&quot;&#125;;ä¸­çš„voidkingï¼Œå°±æ˜¯æˆ‘ä»¬è¦ç”¨åˆ°çš„duoshuo-keyï¼Œä¹Ÿæœ‰äººç§°ä¹‹ä¸ºduoshuo_shortnameã€‚æ‰“å¼€hexo/themes/yilia/layout/_partial/post/duoshuo.ejsï¼Œå¯ä»¥çœ‹åˆ°ï¼š
&lt;div class=&quot;duoshuo&quot;&gt;	&lt;!-- å¤šè¯´è¯„è®ºæ¡† start --&gt;	&lt;div class=&quot;ds-thread&quot; data-thread-key=&quot;&lt;%=key%&gt;&quot; data-title=&quot;&lt;%=title%&gt;&quot; data-url=&quot;&lt;%=url%&gt;&quot;&gt;&lt;/div&gt;	&lt;!-- å¤šè¯´è¯„è®ºæ¡† end --&gt;	&lt;!-- å¤šè¯´å…¬å…±JSä»£ç  start (ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡) --&gt;	&lt;script type=&quot;text/javascript&quot;&gt;	var duoshuoQuery = &#123;short_name:&quot;&lt;%=theme.duoshuo%&gt;&quot;&#125;;	(function() &#123;		var ds = document.createElement(&#x27;script&#x27;);		ds.type = &#x27;text/javascript&#x27;;ds.async = true;		ds.src = (document.location.protocol == &#x27;https:&#x27; ? &#x27;https:&#x27; : &#x27;http:&#x27;) + &#x27;//static.duoshuo.com/embed.js&#x27;;		ds.charset = &#x27;UTF-8&#x27;;		(document.getElementsByTagName(&#x27;head&#x27;)[0] 		 || document.getElementsByTagName(&#x27;body&#x27;)[0]).appendChild(ds);	&#125;)();	&lt;/script&gt;	&lt;!-- å¤šè¯´å…¬å…±JSä»£ç  end --&gt;&lt;/div&gt;
æˆ‘ä»¬éœ€è¦å¡«å…¥çš„ï¼Œæ˜¯&lt;%=theme.duoshuo%&gt;çš„å€¼ï¼Œé‚£ä¹ˆï¼Œåœ¨å“ªé‡Œå¡«å…¥å‘¢ï¼Ÿåœ¨hexo/themes/yilia/_config.ymlæ–‡ä»¶ä¸­ã€‚æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºï¼Œ_config.ymlå°±æ˜¯themeï¼Œè€Œåœ¨_config.ymlä¸­å†™å…¥duoshuo: voidkingï¼Œå°±æ˜¯ç»™duoshuoèµ‹å€¼ä¸ºvoidkingã€‚
å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥åœ¨duoshuo.ejsä¸­æŠŠ&lt;%=theme.duoshuo%&gt;æ›¿æ¢ä¸ºvoidkingã€‚ä½†æ˜¯ä¸å»ºè®®è¿™ä¹ˆåšï¼Œå› ä¸ºè¿™æ ·ç ´åäº†ä½œè€…å¯å¤ç”¨æ€§è®¾è®¡ã€‚
æ·»åŠ å¤´åƒåœ¨hexo/themes/yilia/source/imgä¸­æ·»åŠ ä¸€ä¸ªå›¾ç‰‡headportrait.jpgï¼Œç„¶åç¼–è¾‘hexo/themes/yilia/_config.ymlï¼š
#ä½ çš„å¤´åƒurlavatar: &quot;img/headportrait.jpg&quot;

æ·»åŠ faviconä½¿ç”¨Axialis IconWorkshopï¼Œåˆ¶ä½œä¸€ä¸ª16X16çš„favicon.pngã€‚æ”¾ç½®åˆ°hexo/themes/yilia/sourceä¸­ï¼Œç„¶åç¼–è¾‘hexo/themes/yilia/_config.ymlï¼š
favicon: /favicon.png

æ·»åŠ å¥½ä¹‹åï¼Œæœ¬åœ°æµ‹è¯•ï¼Œåªæœ‰ä¸»é¡µä¼šæ˜¾ç¤ºfaviconï¼Œå…¶ä»–é¡µé¢ä¸æ˜¾ç¤ºï¼Œä¸çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› ã€‚
æ‰¾äº†å¾ˆä¹…æ²¡æ‰¾åˆ°è§£å†³åŠæ³•ï¼Œç‹ äº†ç‹ å¿ƒï¼Œç›´æ¥ä¸Šä¼ ã€‚æƒŠå¥‡åœ°å‘ç°ï¼Œä¸Šä¼ åˆ°gitcafeä¹‹åï¼Œæ‰€æœ‰é¡µé¢éƒ½å¯ä»¥æ˜¾ç¤ºfaviconã€‚
archievesæ•°é‡è¦ä¿®æ”¹hexoä¸»é¢˜ï¼Œå¤šå°‘è¦æ‡‚å¾—ä¸€ç‚¹hexoçš„ç»“æ„å’ŒåŸç†ã€‚å…¨å±€é…ç½®æ–‡ä»¶hexo/_config.ymlä¸­æœ‰è¿™ä¹ˆä¸€æ®µï¼š
per_page: 5pagination_dir: page

è¿™é‡Œçš„per_pageï¼ŒåŒæ—¶è®¾ç½®indexã€archiveã€tagã€categoriyã€‚å¦‚æœæƒ³è¦å•ç‹¬è®¾ç½®ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š
index_generator:  per_page: 5archive_generator:  per_page: 200  yearly: true    monthly: true tag_generator:  per_page: 10 category_generator:   per_page: 10 

CategoriesLittenå¤§å“¥ï¼Œä½ è¿™ä¸è¦Categoriesæ˜¯ä»€ä¹ˆèŠ‚å¥ï¼Ÿä¿®æ”¹èµ·æ¥ï¼Œéå¸¸ä¸å®¹æ˜“å“‡ï¼éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶æœ‰hexo/themes/yilia/source/js/main.jsï¼Œhexo/themes/yilia/source/css/_partial/main.stylï¼Œhexo/themes/yilia/layout/_partial/left-col.ejsã€‚ä¹Ÿè®¸è¿˜æœ‰åˆ«çš„æ–‡ä»¶ï¼Œä¿®æ”¹äº†ä¸€ä¸‹åˆï¼Œä»¥å¤±è´¥å‘Šç»ˆã€‚ã€‚ã€‚æ€»ä¹‹ï¼Œè¿˜æ˜¯èƒ½åŠ›ä¸å¤Ÿï¼Œçœ‹æ¥å¾—æ‰¾æ—¶é—´ç³»ç»Ÿå­¦ä¹ ä¸€ä¸‹hexoä¸»é¢˜çš„åˆ¶ä½œäº†ã€‚ã€‚ã€‚å…ˆæ”¾ç€å§ï¼
æ·»åŠ æ–‡ç« ç›®å½•TOC (Table of contents) ï¼Œä¸­æ–‡ç¿»è¯‘åšç›®å½•ã€‚ä¹‹å‰ç”¨jacmanï¼Œæ„Ÿè§‰ç›®å½•å¾ˆæ–¹ä¾¿ï¼Œå¯ä»¥å¾ˆå¿«å®šä½æ–‡ç« å†…å®¹ï¼Œå°¤å…¶å¯¹äºé•¿æ–‡ç« æ¥è¯´ã€‚ä½†æ˜¯ï¼Œyiliaè²Œä¼¼æ²¡æœ‰é›†æˆï¼Œé‚£å°±è‡ªå·±æ·»åŠ å§ï¼æŸ¥æ‰¾èµ„æ–™ï¼Œå±…ç„¶æ‰¾åˆ°äº†å¥½å‹twiceYuançš„å†™çš„æ•™ç¨‹ï¼Œä¸–ç•ŒçœŸå°å“‡ï¼è¯¦æƒ…è¯·è®¿é—®å‚è€ƒæ–‡æ¡£ï¼Œæ‘˜å½•twiceYuançš„æ•™ç¨‹å¦‚ä¸‹ï¼š
ä¿®æ”¹article.ejsæ‰“å¼€hexo/themes/yilia/layout/_partial/article.ejsï¼Œåœ¨&lt;%- post.content %&gt;å‰é¢æ’å…¥ï¼š
&lt;% if(post.toc !== false)&#123; %&gt;	&lt;div id=&quot;toc&quot; class=&quot;toc-article&quot;&gt;	  &lt;strong class=&quot;toc-title&quot;&gt;æ–‡ç« ç›®å½•&lt;/strong&gt;	  &lt;%- toc(post.content) %&gt;	&lt;/div&gt;&lt;%&#125;%&gt;

è¿™é‡ŒåŠ äº†ä¸€ä¸ªpost.tocçš„åˆ¤æ–­ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰åœ¨å¯ç”¨tocçš„postä¼šå‡ºç°ç›®å½•ï¼Œè€Œä¸æ˜¯æ¯ç¯‡æ–‡ç« éƒ½å‡ºç°ã€‚
ä¿®æ”¹article.ymlæ‰“å¼€hexo/themes/yilia/layout/source/css/_partial/article.ymlï¼Œåœ¨æœ€åæ’å…¥ï¼š
/*toc*/.toc-article  background #eeeeee  margin 2em 0 0 0.2em  padding 1em  border-radius 5px  .toc-title    font-size 120%  strong    padding 0.3em 1ol.toc  width 100%  margin 1em 2em 0 0#toc  line-height 1em  font-size 0.8em  float right  .toc    padding 0     li      list-style-type none  .toc-child     padding-left 0em#toc.toc-aside  display none  width 13%  position fixed  right 2%  top 320px  overflow hidden  line-height 1.5em  font-size 1em  color color-heading  opacity .6  transition opacity 1s ease-out  strong    padding 0.3em 0    color color-font  &amp;:hover    transition opacity .3s ease-out    opacity 1  a    transition color 1s ease-out    &amp;:hover      color color-theme      transition color .3s ease-out

ä½¿ç”¨ç¼–è¾‘.mdæ–‡æ¡£ï¼Œå¦‚æœè¦ä½¿ç”¨æ–‡ç« ç›®å½•ï¼Œå°±è¦æ–‡ç« å¼€å¤´æ·»åŠ tocå±æ€§å¹¶ä¸”è®¾ç½®ä¸ºtrueã€‚
title: hexoä¸»é¢˜ä¼˜åŒ–date: 2015-05-31 16:22:12updated: 2015-05-31 16:22:12tags:categories: ä¸“ä¸štoc: true

æ–°çš„é—®é¢˜å°ä¼™ä¼´å¾ˆé è°±ï¼Œè¿™ä¸ªæ–¹æ³•å¯ç”¨ï¼ä½†æ˜¯ï¼Œæ–°çš„é—®é¢˜æ¥äº†ï¼Œæ–‡ç« ç›®å½•ç‰¹åˆ«ç´§å‡‘ï¼Œä¸å¤Ÿäººæ€§åŒ–ï¼Œåº”è¯¥æ˜¯å› ä¸ºä¸»é¢˜å·®åˆ«ã€‚äºæ˜¯ï¼Œå‚è€ƒæ ¼å¼è‰¯å¥½çš„cssæ–‡ä»¶ï¼Œæ”¹å†™äº†article.stylçš„/*toc*/éƒ¨åˆ†ï¼š
/*toc*/.toc-article&#123;  background #eee  margin 0 0 0 0.2em  padding 1em  border-radius 5px  -webkit-border-radius 5px  strong&#123;	padding 0.3em 0  &#125;&#125;  #toc&#123;  line-height 1.5em  font-size 1em  float right  ol&#123;	margin-left: 0  &#125;	  .toc&#123;	padding 0	li&#123;	  list-style-type none	&#125;    &#125;      .toc-child&#123;	padding-left 1.5em  &#125;&#125; 
é—®é¢˜å®Œç¾è§£å†³ï¼Œçœ‹æ¥ï¼Œä¸åŒçš„themeï¼Œæ·»åŠ TOCçš„æ—¶å€™ï¼Œç¡®å®éœ€è¦ä¸ªæ€§å®šåˆ¶ã€‚
å¥‡æ€ªç°è±¡æ·»åŠ ç›®å½•åï¼Œå‡ºç°äº†ä¸€ä¸ªå¥‡æ€ªçš„ç°è±¡ï¼šå¦‚æœä¸€ç¯‡æ–‡ç« åœ¨ä¸»é¡µå±•ç¤ºå…¨éƒ¨å†…å®¹ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰æ·»åŠ &lt;!--more--&gt;ï¼Œé‚£ä¹ˆï¼Œè¯¥æ–‡ç« å°±ä¼šè‡ªåŠ¨ç”Ÿæˆç›®å½•ï¼Œæ— è®ºæ–‡ç« ä¸­æœ‰æ²¡æœ‰æ·»åŠ tocå±æ€§ã€‚ä¸”ä¸å»ç®¡å®ƒï¼Œç­‰åˆ°æŠ€æœ¯æ›´åŠ ç‰›é€¼äº†å†æ¥å¤„ç†ã€‚â€¦â€¦ç­‰ä¸€ä¸‹ï¼Œè²Œä¼¼æœ‰äº†çµæ„Ÿï¼Œä¿®æ”¹article.ejså¦‚ä¸‹ï¼š
&lt;% if(post.toc &amp;&amp; post.toc !== false)&#123; %&gt;	&lt;div id=&quot;toc&quot; class=&quot;toc-article&quot;&gt;	  &lt;strong class=&quot;toc-title&quot;&gt;æ–‡ç« ç›®å½•&lt;/strong&gt;	  &lt;%- toc(post.content) %&gt;	&lt;/div&gt;&lt;%&#125;%&gt;


ä¿®æ”¹å®Œæˆï¼Œæ‰§è¡Œå‘½ä»¤ï¼š
hexo cleanï¼Œhexo gï¼Œhexo sã€‚
æŸ¥çœ‹æ•ˆæœï¼Œä¸»é¡µç›®å½•æ²¡æœ‰äº†ï¼ŒPerfectï¼
ä¹¦å†™ä»£ç å—ä¸€ç›´ä»¥æ¥ï¼Œå†™åšå®¢çš„æ—¶å€™ï¼Œå¦‚æœç”¨åˆ°ä»£ç å—ï¼Œéƒ½æ˜¯ç”¨ä¸‰ä¸ªåå¼•å·åŒ…å›´ã€‚ç°åœ¨å‘ç°ï¼Œä¼¼ä¹å‡ºç°äº†é—®é¢˜ã€‚å¦‚æœè¿ç»­ä¸¤ä¸ªä»£ç å—ï¼Œé‚£ä¹ˆï¼Œç»å¸¸å‡ºç°ä¸€ç§æƒ…å†µï¼šåˆ¤æ–­ä»£ç å—ä¸å‡†ç¡®ï¼Œä¸¤ä¸ªä»£ç å—è¢«å½“æˆäº†ä¸€ä¸ªä»£ç å—ã€‚è€Œå¦‚æœä»£ç å—ä½¿ç”¨ç¼©è¿›ä¸€ä¸ªTABçš„æ–¹æ³•ï¼Œé‚£ä¹ˆï¼Œä»£ç å—å‰é¢å°±ä¼šæ²¡æœ‰è¡Œå·ã€‚ã€‚ã€‚ã€‚éº»çƒ¦çš„é—®é¢˜ï¼Œä¸”ä¸å»ç®¡å®ƒã€‚ã€‚ã€‚
æ–‡ç« æ¨¡æ¿æ‰“å¼€hexo/scaffolds/post.mdï¼Œå¯ä»¥çœ‹åˆ°ï¼š
title: &#123;&#123; title &#125;&#125;date: &#123;&#123; date &#125;&#125;tags:---
å¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨æ¯æ¬¡ç”Ÿæˆ.mdæ–‡ä»¶çš„æ—¶å€™ï¼Œè‡ªåŠ¨ç”Ÿæˆcategorieså’Œtocï¼Œå¯ä»¥ä¿®æ”¹å¦‚ä¸‹ï¼š
title: &#123;&#123; title &#125;&#125;date: &#123;&#123; date &#125;&#125;tags:categories: toc: true---
å‚è€ƒæ–‡æ¡£hexoåšå®¢çš„ä¼˜åŒ–æŠ€å·§ç»­http://zipperary.com/hexo-guide-5/

å¦‚ä½•åœ¨è°·æ­Œç«™é•¿å·¥å…·æäº¤ç½‘ç«™åœ°å›¾sitemap.xmlhttp://jingyan.baidu.com/article/066074d669a958c3c31cb076.html

Hexo 3.0 é™æ€åšå®¢ä½¿ç”¨æŒ‡å—http://segmentfault.com/a/1190000002592993

hexoä½ çš„åšå®¢http://ibruce.info/hexo-your-blog/

twiceYuanï¼šä¸ºHexoæ·»åŠ æ–‡ç« ç›®å½•

]]></content>
      <categories>
        <category>engineering</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>hexoæ‰˜ç®¡åˆ°gitcafe</title>
    <url>/dev-hexo-deposit-to-gitcafe/</url>
    <content><![CDATA[å‰è¨€gitcafeä½œä¸ºå›½å†…çš„ä»£ç æ‰˜ç®¡ç½‘ç«™ï¼Œè®¿é—®é€Ÿåº¦è¿œå¿«äºgithubï¼Œèªæ˜çš„åŒå­¦ï¼ˆæ¯”å¦‚äººå®¶æˆ‘ï¼‰ï¼Œè‚¯å®šéƒ½ä¼šé€‰æ‹©gitcafeå§ï¼åœ¨ã€ŠHexoç¯å¢ƒæ­å»ºã€‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»è®²è¿‡äº†SSH keyçš„ç”Ÿæˆå’Œä½¿ç”¨æ–¹æ³•ã€‚ä¸‹é¢è¿˜è¦ç”¨åˆ°SSH keyï¼Œæ²¡å­¦ä¼šå°ä¼™ä¼´çš„è‡ªè¡Œç™¾åº¦ã€‚
æ³¨å†Œå®˜ç½‘ï¼šhttp://www.gitcafe.com
åˆ›å»ºProjecthttps://gitcafe.com/projects/new ï¼Œåˆ›å»ºå’Œç”¨æˆ·åç›¸åŒçš„projectï¼Œæ¯”å¦‚æˆ‘çš„ç”¨æˆ·åä¸ºvoidkingï¼Œé‚£ä¹ˆprojectåç§°å°±ä¸ºvoidkingã€‚
æ·»åŠ SSH keyhttps://gitcafe.com/account/public_keys ï¼ŒAdd a new public keyï¼Œå¤åˆ¶id_rsa.pubä¸­çš„å†…å®¹ï¼Œç²˜è´´è¿›å»å³å¯ã€‚
æµ‹è¯•è¿æ¥ssh git@gitcafe.com
Hi voidking! You&#x27;ve successfully authenticated, but GitCafe does not provide shell access.Connection to gitcafe.com closed.

å°ç»“é€šè¿‡è¿æ¥githubå’Œgitcafeï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼šåœ¨æœ¬åœ°ç”Ÿæˆå¯†é’¥çš„æ—¶å€™ï¼Œæ ¹æœ¬ä¸ç”¨è€ƒè™‘ä»Šåçš„æœåŠ¡å™¨ã€‚githubè¿˜æ˜¯gitcafeï¼Œæˆ–è€…ä»»ä½•å…¶ä»–ä½¿ç”¨gitçš„æœåŠ¡å™¨ï¼Œéƒ½æ²¡æœ‰å…³ç³»ã€‚åœ¨éœ€è¦ä½¿ç”¨æŸä¸ªæœåŠ¡å™¨æ—¶ï¼Œåªéœ€è¦æŠŠå¯†é’¥æ·»åŠ åˆ°è¯¥æœåŠ¡å™¨ä¸Šé¢ï¼Œå°±å®Œæˆäº†é…ç½®å·¥ä½œã€‚
ä¿®æ”¹_config.ymlç¼–è¾‘E:\hexoä¸‹çš„_config.ymlï¼Œä¿®æ”¹Deploymentéƒ¨åˆ†ï¼š
deploy:  type: git  repository: git@gitcafe.com:voidking/voidking.git  branch: gitcafe-pages

éƒ¨ç½²deploy dï¼Œä¸éœ€è¦è¾“å…¥å¯†ç ï¼Œç›´æ¥å°±å¯ä»¥ä¸Šä¼ åˆ°gitcafeã€‚
è®¿é—®æµ‹è¯•è®¿é—®ï¼šhttp://voidking.gitcafe.ioæˆ–è€…ï¼šhttp://voidking.comæˆ–è€…ï¼šhttp://www.voidking.com
å‚è€ƒæ–‡æ¡£æ‰˜ç®¡åšå®¢åˆ°gitcafehttp://zipperary.com/hexo-to-gitcafe/
]]></content>
      <categories>
        <category>engineering</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>ç½‘ç«™</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoç¯å¢ƒæ­å»º</title>
    <url>/dev-hexo-build-environment/</url>
    <content><![CDATA[å‰è¨€é‡è£…äº†ç³»ç»Ÿï¼ŒHexoæ²¡æ³•ä½¿ç”¨äº†ã€‚ç¬¬ä¸€æ¬¡å®‰è£…çš„æ—¶å€™ï¼Œæ²¡æœ‰åšä»»ä½•è®°å½•ï¼Œè¿™æ¬¡åˆšå¥½è®°å½•ä¸€ä¸‹ã€‚
hexoå®˜ç½‘http://hexo.io/
ä¸‹è½½å®‰è£…gitgitå®˜æ–¹ä¸‹è½½åœ°å€ï¼šhttp://git-scm.com/download/åˆ†äº«ä¸€ä¸ª14å¹´ç‰ˆæœ¬ï¼šhttp://yunpan.cn/cwqWapRIyFWrA  è®¿é—®å¯†ç  8f1bä¸‹è½½å¥½ä¹‹åï¼ŒåŒå‡»å®‰è£…ï¼Œä¸€è·¯nextå³å¯ã€‚å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨Select Componentsç•Œé¢ï¼Œç‚¹é€‰Simple context menuã€‚
ä¸‹è½½å®‰è£…Node.jsNode.jså®˜æ–¹ä¸‹è½½åœ°å€ï¼šhttps://nodejs.org/ ï¼ŒCurrent version: v0.12.4åˆ†äº«ä¸€ä¸ªv0.10.31ï¼šhttp://yunpan.cn/cwqtqY8FCpdZc  è®¿é—®å¯†ç  951eä¸‹è½½å¥½ä¹‹åï¼ŒåŒå‡»å®‰è£…ï¼Œä¸€è·¯nextå³å¯ã€‚
å®‰è£…Hexoå³å‡»ä»»æ„ä½ç½®ï¼Œé€‰æ‹©Git Bash Hereã€‚æ‰§è¡Œå‘½ä»¤ï¼šnpm install -g hexoï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š
npm ERR! Error: shasum check failed for C:\Users\ADMINI~1\AppData\Local\Temp\npm-30024-KDJHJzgP\registry.npmjs.org\hexo-cli\-\hexo-cli-0.1.6.tgznpm ERR! Expected: 7dc3ab939d0889c4bed6a961605ff3e2d67f67a2npm ERR! Actual:   41de7d67a9b764352eb07c49c32fc38dd7f479b9npm ERR! From:     https://registry.npmjs.org/hexo-cli/-/hexo-cli-0.1.6.tgznpm ERR!     at d:\Program Files\nodejs\node_modules\npm\node_modules\sha\index.js:38:8npm ERR!     at ReadStream.&lt;anonymous&gt; (d:\Program Files\nodejs\node_modules\npm\node_modules\sha\index.js:85:7)npm ERR!     at ReadStream.emit (events.js:117:20)npm ERR!     at _stream_readable.js:943:16npm ERR!     at process._tickCallback (node.js:419:13)npm ERR! If you need help, you may report this *entire* log,npm ERR! including the npm and node versions, at:npm ERR!     &lt;http://github.com/npm/npm/issues&gt;npm ERR! System Windows_NT 6.2.9200npm ERR! command &quot;d:\\Program Files\\nodejs\\node.exe&quot; &quot;d:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js&quot; &quot;install&quot; &quot;-g&quot; &quot;hexo&quot;npm ERR! cwd C:\Users\Administrator\Desktopnpm ERR! node -v v0.10.31npm ERR! npm -v 1.4.23npm ERR! registry error parsing jsonnpm ERR!npm ERR! Additional logging details can be found in:npm ERR!     C:\Users\Administrator\Desktop\npm-debug.lognpm ERR! not ok code 0
è«éæ˜¯å› ä¸ºè¢«å¢™äº†ï¼Ÿæ¢å›½å†…é•œåƒæºè¯•è¯•ã€‚npm config set registry=&quot;http://registry.cnpmjs.org&quot;ï¼Œç„¶åå†æ¬¡æ‰§è¡Œnpm install -g hexoï¼ŒæˆåŠŸï¼

åˆ›å»ºhexoæ–‡ä»¶å¤¹åœ¨ä»»æ„æ–‡ä»¶å¤¹ä¸‹ï¼ˆå¦‚E:\hexoï¼‰ï¼Œæ‰“å¼€Git Bashï¼Œæ‰§è¡Œå‘½ä»¤ï¼šhexo initï¼ŒHexo å³ä¼šåœ¨ç›®æ ‡æ–‡ä»¶å¤¹å»ºç«‹ç½‘ç«™æ‰€éœ€è¦çš„æ‰€æœ‰æ–‡ä»¶ã€‚
å®‰è£…ä¾èµ–åŒ…npm install
å‘½ä»¤ç¼©å†™hexo generate = hexo ghexo server = hexo shexo deploy = hexo dhexo new = hexo n
æœ¬åœ°æŸ¥çœ‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼šhexo gï¼Œhexo sï¼Œç„¶ååˆ°æµè§ˆå™¨è¾“å…¥http://localhost:4000æŸ¥çœ‹æ•ˆæœã€‚è‡³æ­¤ï¼Œæœ¬åœ°åšå®¢å·²ç»æ­å»ºèµ·æ¥äº†ï¼Œåˆ«äººçœ‹ä¸åˆ°çš„ã€‚
éƒ¨ç½²åˆ°GitHubæ³¨å†ŒGitHubå®˜ç½‘ï¼šhttp://www.github.com
åˆ›å»ºrepositorycreat new repositoryï¼ŒRepository nameå’Œè‡ªå·±çš„ç”¨æˆ·åç›¸åŒã€‚æ¯”å¦‚æˆ‘çš„ç”¨æˆ·åä¸ºvoidkingï¼Œé‚£ä¹ˆRepository nameå°±å¡«voidking.github.ioã€‚
_config.ymlç¼–è¾‘E:\hexoä¸‹çš„_config.ymlï¼Œä¿®æ”¹Deploymentéƒ¨åˆ†ï¼š
# Deployment## Docs: http://hexo.io/docs/deployment.htmldeploy:  type: git  repository: https://github.com/voidking/voidking.github.io.git  branch: master

éƒ¨ç½²hexo dï¼Œæ‰§è¡Œè¯¥å‘½ä»¤ï¼ŒæŠ¥é”™ï¼š
ERROR Deployer not found: git
æ‰§è¡Œå‘½ä»¤ï¼šnpm install hexo-deployer-git --saveï¼Œå†æ¬¡æ‰§è¡Œhexo d,æŠ¥é”™ï¼š
INFO  Deploying: gitINFO  Clearing .deploy folder...INFO  Copying files from public folder...warning: LF will be replaced by CRLF in hello-world/index.html.The file will have its original line endings in your working directory.......*** Please tell me who you are.Run  git config --global user.email &quot;you@example.com&quot;  git config --global user.name &quot;Your Name&quot;to set your account&#x27;s default identity.Omit --global to set the identity only in this repository.fatal: unable to auto-detect email address (got &#x27;Administrator@PC-201505290750.(none)&#x27;)Username for &#x27;https://github.com&#x27;: voidkingPassword for &#x27;https://voidking@github.com&#x27;:error: src refspec master does not match any.error: failed to push some refs to &#x27;https://github.com/voidking/voidking.github.io.git&#x27;FATAL Something&#x27;s wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.htmlError: error: src refspec master does not match any.error: failed to push some refs to &#x27;https://github.com/voidking/voidking.github.io.git&#x27;    at ChildProcess.&lt;anonymous&gt; (E:\hexo\node_modules\hexo-deployer-git\node_modules\hexo-util\lib\spawn.js:42:17)    at ChildProcess.emit (events.js:98:17)    at maybeClose (child_process.js:756:16)    at Process.ChildProcess._handle.onexit (child_process.js:823:5)
ä¼°è®¡å¿…é¡»è¦å…ˆé…ç½®SSHï¼Œç„¶åæ‰å¯ä»¥ä¸Šä¼ æ–‡ä»¶ã€‚
GitHubä¹‹SSH key1ã€è®¾ç½®Gitçš„user.nameå’Œuser.emailåœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨Gitæ—¶ï¼Œä½ éœ€è¦å‘Šè¯‰ä½ çš„ååŒå¼€å‘è€…ï¼Œä½ æ˜¯è°ä»¥åŠä½ çš„é‚®ç®±ï¼Œåœ¨ä½ æäº¤çš„æ—¶å€™ï¼ŒGitéœ€è¦è¿™ä¸¤ä¸ªä¿¡æ¯ã€‚å…·ä½“é€šè¿‡ä»¥ä¸‹å‘½ä»¤è®¾ç½®ï¼šgit config --global user.name &quot;voidking&quot;git config --global user.email &quot;voidking@qq.com&quot;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„nameéšæ„ï¼Œé‚®ç®±æ˜¯ä½ çš„è”ç³»é‚®ç®±ï¼Œä¸githubå®Œå…¨æ— å…³ã€‚æŸ¥çœ‹é…ç½®å‘½ä»¤ï¼šgit config --list
2ã€ç”ŸæˆSSHå¯†é’¥ssh-keygen -t rsa -C &quot;voidking@qq.com&quot;ï¼ŒæŒ‰3ä¸ªå›è½¦ï¼Œå¯†ç ä¸ºç©ºã€‚
Generating public/private rsa key pair.Enter file in which to save the key (/c/Users/Administrator/.ssh/id_rsa):Created directory &#x27;/c/Users/Administrator/.ssh&#x27;.Enter passphrase (empty for no passphrase):Enter same passphrase again:Your identification has been saved in /c/Users/Administrator/.ssh/id_rsa.Your public key has been saved in /c/Users/Administrator/.ssh/id_rsa.pub.The key fingerprint is:e6:9e:e7:ae:ad:ee:9f:f0:e5:6b:60:63:85:e8:cd:ae voidking@qq.com

åœ¨C:\Users\Administrator\.sshä¸‹ï¼Œå¾—åˆ°ä¸¤ä¸ªæ–‡ä»¶id_rsaå’Œid_rsa.pubã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‘½ä»¤ä¸­çš„-Cå‚æ•°ï¼Œåé¢è·Ÿçš„å†…å®¹æ˜¯æ³¨é‡Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå†…å®¹éšæ„ï¼Œä¸githubå®Œå…¨æ— å…³ã€‚
3ã€åœ¨GitHubä¸Šæ·»åŠ SSHå¯†é’¥æ‰“å¼€id_rsa.pubï¼Œå¤åˆ¶å…¨æ–‡ã€‚https://github.com/settings/ssh ï¼ŒAdd SSH keyï¼Œç²˜è´´è¿›å»ã€‚
4ã€æµ‹è¯•ssh git@github.comï¼Œæç¤ºï¼š
The authenticity of host &#x27;github.com (192.30.252.128)&#x27; can&#x27;t be established.RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.Are you sure you want to continue connecting (yes/no)? yesWarning: Permanently added &#x27;github.com,192.30.252.128&#x27; (RSA) to the list of known hosts.Hi voidking! You&#x27;ve successfully authenticated, but GitHub does not provide shell access.Connection to github.com closed.

å†æ¬¡éƒ¨ç½²hexo dï¼Œæ ¹æ®æç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œç­‰å¾…ä¸€ä¼šå„¿ä¾¿æˆåŠŸäº†ï¼
INFO  Deploying: gitINFO  Clearing .deploy folder...INFO  Copying files from public folder...warning: LF will be replaced by CRLF in hello-world/index.html.The file will have its original line endings in your working directory.......[master (root-commit) 7124e90] Site updated: 2015-05-30 23:04:14 28 files changed, 5746 insertions(+) create mode 100644 hello-world/index.html ......warning: LF will be replaced by CRLF in hello-world/index.html.The file will have its original line endings in your working directory.......Username for &#x27;https://github.com&#x27;: voidkingPassword for &#x27;https://voidking@github.com&#x27;:Branch master set up to track remote branch master from https://github.com/voidking/voidking.github.io.git.To https://github.com/voidking/voidking.github.io.git * [new branch]      master -&gt; masterINFO  Deploy done: git

è®¿é—®æµ‹è¯•è®¿é—®ï¼šhttp://voidking.github.io/ ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒHexoå·²ç»æ­å»ºæˆåŠŸï¼
å‚è€ƒæ–‡æ¡£å®˜æ–¹æ–‡æ¡£ï¼šhttp://hexo.io/docs/
GitHub Pageshttps://pages.github.com/
hexoç³»åˆ—æ•™ç¨‹ï¼šï¼ˆäºŒï¼‰æ­å»ºhexoåšå®¢http://zipperary.com/hexo-guide-2/
Git SSH Key ç”Ÿæˆæ­¥éª¤http://blog.csdn.net/hustpzb/article/details/8230454/
Getting Started - First-Time Git Setuphttp://git-scm.com/book/en/v2/Getting-Started-First-Time-Git-Setup
git-scmhttp://git-scm.com/
]]></content>
      <categories>
        <category>engineering</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>git</tag>
        <tag>ssh</tag>
      </tags>
  </entry>
  <entry>
    <title>Win8+UbuntuKylinæ³¨æ„äº‹é¡¹</title>
    <url>/dev-win8-ubuntukylin-notice/</url>
    <content><![CDATA[å‰è¨€æ¥è¿‘ä¸€å¹´åŠæ²¡æœ‰æ¢è¿‡æ“ä½œç³»ç»Ÿï¼ˆWin7ï¼‰ï¼Œå„ç§å¤§å‹è½¯ä»¶ï¼Œå„ç§ç³»ç»Ÿåå°æœåŠ¡ï¼Œæ€ä¸€ä¸ªç‰›é€¼äº†å¾—ï¼è¿‘æœŸå®‰è£…çš„Oracleï¼ŒæˆåŠŸåœ°å†æ¬¡æ‹–æ…¢äº†ç³»ç»Ÿé€Ÿåº¦ï¼Œç»ˆäºè¾¾åˆ°äº†éƒåŒå­¦çš„å¿è€æé™ï¼åšå®Œäº†æ‰€æœ‰å®éªŒï¼Œæœæ–­æ¢ä¸ªç³»ç»Ÿï¼
å¿™ç¢Œäº†ä¸€å¤©ï¼Œå®‰è£…äº†Win8+Ubuntu Kylinï¼Œå¹¶ä¸”å¯¹å®ƒä»¬è¿›è¡Œäº†åŸºæœ¬é…ç½®å’Œç®€å•ä¼˜åŒ–ã€‚åœ¨æ­¤ç®€å•è®°å½•ä¸‹è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œä»¥åŠè§£å†³åŠæ³•ï¼Œåˆ†äº«ç»™å¤§å®¶ã€‚


å®‰è£…æ–¹æ³•è¯¦ç»†æ–¹æ³•è¯·è§ã€Šå®‰è£…ç³»ç»Ÿã€‹ç³»åˆ—ï¼Œè¿™é‡Œç®€å•å™è¿°ä¸€ä¸‹ã€‚1ã€å‡†å¤‡ä¸¤ä¸ªUç›˜ï¼Œä¸€ä¸ªä½¿ç”¨Uå¤§å¸ˆåšæˆå¯åŠ¨ç›˜ï¼ˆUç›˜1ï¼‰ï¼Œå¦ä¸€ä¸ªåˆ©ç”¨Universal-USB-Installer-*.exeåšæˆUbuntuå®‰è£…ç›˜ï¼ˆUç›˜2ï¼‰ã€‚2ã€ä½¿ç”¨Uç›˜1å¯åŠ¨ï¼Œè¿›å…¥WinPeã€‚3ã€åˆ†åŒºï¼Œåˆ†æˆå››ä¸ªï¼Œç„¶ååˆ é™¤æœ€åä¸€ä¸ªåˆ†åŒºï¼ˆç­‰ä¼šå„¿å®‰è£…Ubuntuï¼‰ã€‚4ã€å®‰è£…Win8ã€‚5ã€ä½¿ç”¨Uç›˜2å¯åŠ¨ï¼Œè¿›å…¥Ubuntuçš„å®‰è£…ç•Œé¢ã€‚6ã€åœ¨ç©ºç™½åˆ†åŒºä¸Šåˆ†åŒºï¼Œswapåˆ†åŒº4096MBï¼ˆLogicalï¼‰ï¼Œ/åˆ†åŒºå ç”¨å‰©ä¸‹çš„å…¨éƒ¨ç©ºé—´ï¼ˆPrimaryï¼‰ã€‚7ã€å®‰è£…Ubuntuã€‚
Win8ä¸è§äº†å®‰è£…å®Œæˆï¼ŒéƒåŒå­¦å‘ç°ï¼Œå¼€æœºä¸ä¼šå‡ºç°å¯åŠ¨é€‰é¡¹ï¼Œç›´æ¥è¿›å…¥Ubuntuã€‚åº”è¯¥æ˜¯å› ä¸ºå®‰è£…Ubuntuæ—¶é‡å†™äº†å¼•å¯¼æ‰‡åŒºï¼Œæ²¡å…³ç³»ï¼Œæˆ‘ä»¬åªè¦åœ¨Ubuntuç³»ç»Ÿä¸‹æ‰§è¡Œsudo update-grubã€‚è¯¥å‘½ä»¤ä¼šè‡ªåŠ¨æ£€æµ‹å¯åŠ¨é¡¹ï¼Œé‡æ–°ç”Ÿæˆ/boot/grub/grub.cfgæ–‡ä»¶ã€‚é‡æ–°å¯åŠ¨ï¼Œå·²ç»å¤šå‡ºäº†Win8çš„å¯åŠ¨é€‰é¡¹ã€‚
å¾ˆå¤šå°ä¼™ä¼´è®¤ä¸ºï¼Œå¿…é¡»è¦GPTåˆ†åŒºï¼Œå¿…é¡»è¦EFIåˆ†åŒºã€‚å…¶å®æ²¡å¿…è¦ï¼ŒéƒåŒå­¦å°±æ˜¯ä¼ ç»Ÿçš„MBRåˆ†åŒºï¼Œæ¯«æ— é—®é¢˜ã€‚
Win8åˆå§‹è½¯ä»¶å¸è½½å®Œè‡ªå¸¦çš„è½¯ä»¶ï¼Œæ¥ä¸‹æ¥å°±è¦ä¸ªæ€§åŒ–å®šåˆ¶äº†ã€‚å…ˆç¾åŒ–ä¸€ä¸‹æ¡Œé¢ï¼Œè®¾ç½®ä¸€ä¸‹å¤´åƒå¯†ç ç­‰ï¼Œéœ€è¦çš„è½¯ä»¶æœ‰ï¼š

æœç‹—è¾“å…¥æ³•
Notepad++
JDK
Eclipse
WPS
FastStone Capture
Photoshop
360å®‰å…¨å«å£«
360æé€Ÿæµè§ˆå™¨ï¼ˆIEä¸å¥½ç”¨ï¼ŒFirefoxç¬¨é‡ä¸”å†å²è®°å½•å¤ªä¸‘ï¼ŒChromeæ’ä»¶å—é™ï¼ŒUCè¿ä¸»é¡µéƒ½å¯ä»¥è®¾ç½®ï¼‰
360äº‘ç›˜
ç™¾åº¦äº‘ç›˜
QQ
QQé£è½¦
ADSafe
å…¶ä»–ã€‚ã€‚ã€‚

Ubuntuåˆå§‹è½¯ä»¶
æœç‹—è¾“å…¥æ³•
JDK
Eclipse
WPS
vimã€‚vimè¾“å…¥æ³•éœ€è¦æ›´æ–°ï¼Œå¦åˆ™ä¸Šä¸‹å·¦å³é”®ä¸å¯ç”¨ï¼Œæ›´æ–°å‘½ä»¤ï¼šsudo apt-get remove vim-commonï¼Œsudo apt-get install vimã€‚

Ubuntuä¸­æ–‡æ–‡ä»¶å¤¹è½¬è‹±æ–‡æƒ³åˆ°ä»¥å‰ä½¿ç”¨Ubuntuçš„ç—›è‹¦ç»å†ï¼ŒéƒåŒå­¦å†³å®šç›´æ¥å®‰è£…è‹±æ–‡ç‰ˆã€‚å®‰è£…å¥½ä¹‹åï¼Œåœ¨Languageè®¾ç½®ä¸­é€‰æ‹©ä¸­æ–‡ï¼Œé‡å¯ã€‚å¯åŠ¨åï¼Œç³»ç»Ÿä¼šè¯¢é—®æ˜¯å¦æŠŠHomeæ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶å¤¹è½¬æ¢ä¸ºä¸­æ–‡ï¼Œé€‰æ‹©å¦ã€‚å¦‚æ­¤ï¼Œä¾¿å¯ä»¥ä¿æŒä¸­æ–‡ç•Œé¢ï¼ŒåŒæ—¶åœ¨ä½¿ç”¨å‘½ä»¤çš„æ—¶å€™ï¼Œä¸ç”¨ä¸­è‹±æ–‡è¾“å…¥æ³•æ¥å›åˆ‡æ¢ã€‚
Win8æ¯”Ubuntuæ…¢8å°æ—¶è®¾ç½®å¥½Ubuntuï¼Œé‡å¯åˆ‡æ¢åˆ°Win8ï¼Œå‘ç°Win8æ—¶é—´è¦æ¯”Ubuntuçš„æ—¶é—´æ…¢8ä¸ªå°æ—¶ï¼
åŸå› ï¼šWindowsæŠŠç³»ç»Ÿç¡¬ä»¶æ—¶é—´å½“ä½œæœ¬åœ°æ—¶é—´ï¼ˆlocal timeï¼‰ï¼Œå³æ“ä½œç³»ç»Ÿä¸­æ˜¾ç¤ºçš„æ—¶é—´è·ŸBIOSä¸­æ˜¾ç¤ºçš„æ—¶é—´æ˜¯ä¸€æ ·çš„ã€‚Linux/Unix/MacæŠŠç¡¬ä»¶æ—¶é—´å½“ä½œUTCï¼Œæ“ä½œç³»ç»Ÿä¸­æ˜¾ç¤ºçš„æ—¶é—´æ˜¯ç¡¬ä»¶æ—¶é—´ç»è¿‡æ¢ç®—å¾—æ¥çš„ï¼Œæ¯”å¦‚è¯´åŒ—äº¬æ—¶é—´æ˜¯GMT+8ï¼Œåˆ™ç³»ç»Ÿä¸­æ˜¾ç¤ºæ—¶é—´æ˜¯ç¡¬ä»¶æ—¶é—´+8ã€‚
è§£å†³åŠæ³•ï¼šä¿®æ”¹ubuntuæ—¶é—´å¦‚ä¸‹ï¼šsudo gedit /etc/default/rcSæ‰¾åˆ°è¿™ä¸€è¡Œï¼š UTC=yesæŠŠ yes æ”¹ä¸º no ã€‚
è®¾ç½®Win8ä¸ºé»˜è®¤å¯åŠ¨é¡¹1ã€åœ¨Ubuntuä¸‹ï¼Œè¿›å…¥/etc/grub.d2ã€sudo mv 30_os-prober 06_os_prober3ã€sudo update-grub
å‚è€ƒæ–‡æ¡£win8å’Œubuntu13.10 åŒç³»ç»Ÿæ—¶é—´é”™è¯¯http://blog.csdn.net/flywindmouse/article/details/13025017

å°†Ubuntuä¸»æ–‡ä»¶å¤¹é‡Œçš„ä¸­æ–‡æ–‡ä»¶å¤¹åç§°æ”¹æˆè‹±æ–‡http://blog.csdn.net/l0605020112/article/details/20285239

Windowsä¸UbuntuåŒç³»ç»Ÿå¯åŠ¨èœå•ç®¡ç†å’Œé…ç½®ï¼ˆè¡¥å……win8ï¼‰http://blog.chinaunix.net/uid-23586172-id-3075207.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>ubuntu</tag>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title>SQL Serverè¿ç§»åˆ°Oracleé—®é¢˜</title>
    <url>/dev-sqlserver-to-oracle/</url>
    <content><![CDATA[å‰è¨€Oracleæœ€åä¸€æ¬¡å®éªŒï¼ŒéƒåŒå­¦æ‰“ç®—ç§»æ¤SQL Serverä¸Šçš„ä¸€ä¸ªé¡¹ç›®åˆ°Oracleã€‚å› ä¸ºä½¿ç”¨äº†Maven+JPA+Spring+Struts2+AngularJsï¼Œæ‰€ä»¥ï¼Œè™½ç„¶å¤æ‚äº†ä¸€ç‚¹ï¼Œä½†æ˜¯å¯ç§»æ¤æ€§éå¸¸å¥½ã€‚ä¿®æ”¹ä¸€ä¸ªdatabase-conn.propertiesé…ç½®æ–‡ä»¶ï¼Œåœ¨pom.xmlä¸­æ·»åŠ Oracleé©±åŠ¨å³å¯ã€‚
database-conn.propertiesåŸæ–‡ä»¶ï¼š
database.driver=com.microsoft.sqlserver.jdbc.SQLServerDriverdatabase.uri=jdbc:sqlserver://localhost:1433;databaseName=design;integratedSecurity=falsedatabase.username=sadatabase.password=123#hibernatehibernate.dialect=org.hibernate.dialect.SQLServer2008Dialecthibernate.show_sql=true



database-conn.propertiesä¿®æ”¹åæ–‡ä»¶ï¼š
database.name=Oracledatabase.driver=oracle.jdbc.OracleDriverdatabase.uri=jdbc:oracle:thin:@localhost:1521:orcldatabase.username=scottdatabase.password=tiger #hibernatehibernate.dialect=org.hibernate.dialect.OracleDialecthibernate.show_sql=true

ä½¿ç”¨MavenæŠŠojdbc14.jarå®‰è£…åˆ°æœ¬åœ°ä»“åº“ï¼Œpom.xmlæ·»åŠ ï¼š
&lt;!-- Oracleé©±åŠ¨ --&gt;&lt;dependency&gt;	&lt;groupId&gt;com.oracle&lt;/groupId&gt;	&lt;artifactId&gt;ojdbc14&lt;/artifactId&gt;	&lt;version&gt;10.2.0.3.0&lt;/version&gt;&lt;/dependency&gt;
å¤§åŠŸå‘Šæˆï¼Œclean installï¼Œjetty:runã€‚
é—®é¢˜æè¿°åŠè§£ç­”åœ¨Oracleçš„adminbaseä¸­æ’å…¥ä¸€æ¡æ•°æ®ï¼š
insert into adminbase values(1,&#x27;voidking&#x27;,&#x27;voidking&#x27;);select * from adminbase;
ä¸¤æ¡å‘½ä»¤éƒ½æ­£å¸¸ã€‚ç„¶ååœ¨ç½‘é¡µä¸Šä½¿ç”¨è´¦å·å¯†ç ç™»å½•ï¼Œç»“æœæç¤ºï¼Œç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ã€‚å•Šå‹’ï¼Œæ€ä¹ˆå›äº‹ï¼Ÿè«éæ˜¯å› ä¸ºOracleçš„ç¼–ç æ–¹å¼ä¸å¯¹ï¼Ÿä¿®æ”¹å®Œå­—ç¬¦ç¼–ç æ–¹å¼ï¼Œé—®é¢˜æ²¡æœ‰è§£å†³ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»ç„¶å€”å¼ºçš„è®¤ä¸ºï¼Œåº”è¯¥æ˜¯ç¼–ç æ–¹å¼çš„é—®é¢˜ï¼Œå› ä¸ºä»¥å‰åœ¨è¿™æ–¹é¢åƒçš„äºå¤ªå¤šäº†ã€‚
ä¸Šé¢çš„å‘½ä»¤éƒ½æ˜¯åœ¨sqldeveloperä¸­æ‰§è¡Œçš„ï¼Œæ¢åˆ°sql plusè¯•è¯•ã€‚
select * from adminbase;
æˆ‘é ï¼Œé—®é¢˜æ¥äº†ï¼ç»“æœæ˜¾ç¤ºæœªé€‰å®šè¡Œï¼è¿™æ˜¯è‚¿ä¹ˆå›äº‹ï¼Ÿæˆ‘å¥½åƒçŸ¥é“ä¸ºä»€ä¹ˆæ— æ³•ç™»å½•äº†ï¼Œå› ä¸ºæ ¹æœ¬æ‰¾ä¸åˆ°æ•°æ®å“‡ï¼
ç»è¿‡æŸ¥æ‰¾èµ„æ–™ï¼Œç»ˆäºæ˜ç™½ï¼Œåœ¨pl/sql developeræ’å…¥æ•°æ®åï¼Œéœ€è¦commitï¼ˆæäº¤ï¼‰ã€‚åœ¨SQL Plusä¸­æ‰èƒ½çœ‹åˆ°è¿™ç§æ”¹å˜ï¼Œå› ä¸ºäºŒè€…å¤„äºä¸¤ä¸ªä¸åŒçš„ä¼šè¯ä¸­ã€‚
åœ¨sqldeveloperä¸­æ‰§è¡Œcommitï¼Œå†æ¬¡ç™»å½•ï¼Œæœç„¶æˆåŠŸï¼
PSï¼šå­—ç¬¦ç¼–ç æŸ¥çœ‹å‘½ä»¤ï¼š
select userenv(&#x27;language&#x27;) from dual;select * from nls_database_parameters;

æ–°çš„é—®é¢˜ä¸æŠ¥é”™ï¼Œä½†æ˜¯ä¸å¯ä»¥æ’å…¥æ•°æ®ã€‚æ¯”å¦‚æ·»åŠ ä¹¦ç±ç§ç±»ï¼Œè¾“å…¥ä¿¡æ¯åï¼Œç‚¹å‡»â€œæ·»åŠ â€ï¼Œä¹‹åä¾¿æ²¡æœ‰ååº”äº†ã€‚ç†æƒ³çš„æ•ˆæœæ˜¯ï¼Œç•Œé¢å‡ºç°æ·»åŠ æˆåŠŸçš„ä¿¡æ¯ã€‚æ§åˆ¶å°å¹¶æ²¡æœ‰æŠ¥é”™ä¿¡æ¯ï¼Œåªæ˜¯æç¤ºï¼š
Hibernate: select hibernate_sequence.nextval from dualHibernate: insert into readerkind (enddate, name, notice, quantity, validity, id) values (?, ?, ?, ?, ?, ?)
ä¸çŸ¥é“å“ªé‡Œå‡ºç°äº†é—®é¢˜ï¼Œä¹Ÿè®¸ï¼Œä»SQLServerç§»æ¤åˆ°Oracleï¼Œæ²¡æœ‰æƒ³è±¡çš„é‚£ä¹ˆç®€å•ã€‚ã€‚ã€‚é—®é¢˜å¾…è§£å†³ã€‚ã€‚ã€‚
å‚è€ƒæ–‡æ¡£Oracle å­—ç¬¦é›†çš„æŸ¥çœ‹å’Œä¿®æ”¹http://www.cnblogs.com/rootq/articles/2049324.htmlhttp://blog.chinaunix.net/uid-25492475-id-3140218.html

ä½¿ç”¨pl/sqldeveloperå’Œä½¿ç”¨sql*pluså¾—åˆ°çš„ç»“æœä¸åŒhttp://www.educity.cn/wenda/410219.html

]]></content>
      <categories>
        <category>engineering</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>oracle</tag>
        <tag>sqlserver</tag>
      </tags>
  </entry>
  <entry>
    <title>æ„Ÿå†’åä¸ºä»€ä¹ˆå’³å—½ä¸æ­¢</title>
    <url>/essay-cold-cough/</url>
    <content><![CDATA[ä¸€èˆ¬æ„Ÿå†’åªæŒç»­3ï½5å¤©ï¼Œé•¿çš„ä¹Ÿå°±7ï½10å¤©ã€‚æœ‰äº›æ‚£è€…æ„Ÿå†’çš„å…¶ä»–ç—‡çŠ¶éƒ½æ¶ˆå¤±äº†ï¼Œåªæœ‰å’³å—½è¿˜æŒç»­ä¸æ–­ï¼Œç”šè‡³1ä¸ªå¤šæœˆæ‰å¥½ï¼Œè¿™å«åšæ„Ÿå†’åæ…¢æ€§å’³å—½ã€‚è¿™ç§å’³å—½çš„ç‰¹ç‚¹æ˜¯ä¸€å£°å£°æˆ–ä¸€é˜µé˜µï¼Œä¸ºåˆºæ¿€æ€§å¹²å’³ã€‚å¤œé—´é‡ï¼Œé‡åˆ°å¯’å†·ã€ç°å°˜ç¯å¢ƒã€åˆºæ¿€æ€§æ°”ä½“ã€è¿åŠ¨ã€çƒŸé›¾æˆ–å†æ¬¡æ„Ÿå†’ï¼Œéƒ½å¯è¯±å‘åŠ é‡ã€‚éšç€æ—¶é—´æ¨ç§»ï¼Œä¸æ²»ä¹Ÿèƒ½ç—Šæ„ˆã€‚ä¸ºä»€ä¹ˆå¤šæ•°äººå¾—äº†æ„Ÿå†’å¾ˆå¿«å°±å¥½äº†ï¼Œè€Œæœ‰äº›äººæ„Ÿå†’ä¹‹åå’³å—½ä¸æ–­å‘¢?


ä»ç—…åŸä½“æ¥è¯´ï¼Œæ„Ÿå†’å¤šç”±ç—…æ¯’å¼•èµ·ï¼Œå¦‚é¼»ç—…æ¯’ã€å† çŠ¶ç—…æ¯’ã€æµæ„Ÿç—…æ¯’ã€å‰¯æµæ„Ÿç—…æ¯’ã€åˆèƒç—…æ¯’ç­‰ï¼Œä¹Ÿæœ‰å°‘æ•°æ˜¯ç”±æ”¯åŸä½“ã€è¡£åŸä½“åŠç™¾æ—¥å’³æ†èŒå¼•èµ·ã€‚è¿™äº›ç—…åŸä½“ä¾µçŠ¯äº†å‘¼å¸é“ä¸Šçš®ï¼Œå¼•èµ·æŸä¼¤ï¼Œä¸Šçš®åæ­»è£¸éœ²ï¼Œå¸¸è¾¾åŸºåº•è†œã€‚æœ‰ä¸€å°éƒ¨åˆ†äººå› ä¸ºè¿‡æ•ä½“è´¨ï¼Œä¸Šè¿°æŸå®³é€šè¿‡è¿·èµ°ç¥ç»åå°„å¼•èµ·æ°”é“æ”¶ç¼©ï¼ŒåŠ é‡å’³å—½ï¼Œä¸Šå‘¼å¸é“æ„ŸæŸ“å¼•èµ·çš„æ”¯æ°”ç®¡é«˜ååº”ï¼ˆè¿‡æ•ååº”ï¼‰ï¼Œå¯æŒç»­5ï½7å‘¨ã€‚ä»æœ¬è´¨æ¥è¯´ï¼Œç—…æ¯’æ„ŸæŸ“å¼•èµ·çš„å‘¼å¸é“æ„ŸæŸ“ï¼Œå¯è¯±å¯¼å…ç–«ç»†èƒåˆ†æ³Œä¸€äº›ä»‹è´¨ï¼Œå¦‚æ¿€è‚½ã€ç™½ä¸‰çƒ¯ã€ç»„èƒºã€ç™½ä»‹ç´ 1ã€6ã€8ã€å·¨å™¬ç»†èƒã€Tç»†èƒç­‰ï¼Œè¿™äº›å…ç–«ç»†èƒä¿ƒä½¿å±€éƒ¨æ°”é“è¿‡æ•ã€‚ä»ç—…ç†å­¦ä¸Šç¬¦åˆç‚ç—‡è¡¨ç°ï¼ˆç—…ç†å­¦ä¸Šå‡¡å…·æœ‰æ¸—å‡ºã€å˜æ€§åæ­»åŠå¢ç”Ÿå½¢æˆçš„å°±å«ç‚ç—‡ï¼‰ï¼Œå¯¹æ°”é“è¿›ä¸€æ­¥å½¢æˆæŸå®³ã€‚è¿™ç§æ°”é“ç‚ç—‡å¯¹æ¿€ç´ æ²»ç–—æœ€æ•æ„Ÿã€‚
å› ä¸ºæ„Ÿå†’åæ…¢æ€§å’³å—½æ˜¯ä¸€ç§è‡ªé™æ€§ç–¾ç—…ï¼Œä¸æ²»è‡ªå·±ä¹Ÿèƒ½å¥½ï¼Œæ‰€ä»¥åŒ»ç”Ÿæ²»ç–—èµ·æ¥å¤šåŠä¸å¤ªç§¯æï¼Œä¸ä¹±ç”¨è¯ã€‚å…·ä½“æ²»ç–—æ–¹æ³•ï¼š1ï¼å…ˆç»™äºˆæ­¢å’³è¯å³ç¾æ²™èŠ¬ï¼Œå…¶æ­¢å’³ä½œç”¨ä¸å¯å¾…å› ç›¸å½“ï¼Œä½†æ— æˆç˜¾æ€§ï¼Œå¯¹å‘¼å¸ä¸­æ¢ä¹Ÿæ— æŠ‘åˆ¶ï¼Œå£æœæ¯æ¬¡15ï½30æ¯«å…‹ï¼Œæ¯å¤©3ï½4æ¬¡ï¼›æˆ–ç”¨å–·å¦¥ç»´æ—ï¼Œä½œç”¨ç›¸å½“äºå¯å¾…å› çš„1ï¼3ï¼Œå£æœæ¯æ¬¡25æ¯«å…‹ï¼Œæ¯æ—¥3æ¬¡ã€‚2ï¼è‹¥ä¸Šæ³•æ— æ•ˆå¯å¸å…¥ä¸™é…¸å€æ°¯ç¾æ¾ï¼ˆå¿…å¯é…®ï¼‰ï¼Œç»é¼»å¸å…¥ï¼Œæ¯æ¬¡2å–·ï¼Œæ¯å¤©3æ¬¡ï¼Œå…±ç”¨3ï½7å¤©ï¼Œä¹Ÿå¯å£æœæ³¼å°¼æ¾ï¼ˆå¼ºçš„æ¾ï¼‰ï¼Œæ¯æ¬¡10ï½20æ¯«å…‹ï¼Œæ¯æ—¥1æ¬¡ï¼Œå…±ç”¨3ï½7å¤©ã€‚3ï¼ä¸æ„¿æ„ç”¨æ¿€ç´ è€…ä¹Ÿå¯å¸å…¥æº´åŒ–å¼‚ä¸™æ‰˜å“ï¼Œæ¯å¤©å¸äºº320æ¯«å…‹ï¼Œå…±ç”¨3ï½7å¤©ï¼Œæœ¬è¯å¯¹å¸çƒŸè€…ç–—æ•ˆå·®ã€‚4ï¼é€šå¸¸ä¸ç”¨æŠ—ç”Ÿç´ ï¼Œå¦‚ç–‘ä¸ºæ”¯åŸä½“ã€è¡£åŸä½“æˆ–ç™¾æ—¥å’³æ†èŒå¼•èµ·è€…ï¼Œå¯åº”ç”¨å¤§ç¯å†…é…¯ç±»æŠ—ç”Ÿç´ ï¼Œå¦‚ç½—çº¢éœ‰ç´ ï¼Œæ¯æ¬¡100æ¯«å…‹ï¼Œå£æœï¼Œæ¯å¤©2æ¬¡ï¼Œå…±ç”¨3ï½7å¤©ã€‚ï¼ˆé‚µã€€è£ï¼‰
æœ¬æ–‡è½¬è½½è‡ªï¼šhttp://blog.sina.com.cn/s/blog_4d25c4f40100gyg3.html
]]></content>
      <categories>
        <category>essay</category>
      </categories>
      <tags>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>åŠ å¿«Androidç¦»çº¿æ–‡æ¡£çš„è®¿é—®é€Ÿåº¦</title>
    <url>/dev-quickly-open-android-offline-document/</url>
    <content><![CDATA[å‰è¨€å­¦ä¹ ç¼–ç¨‹ä¸‰å¹´ï¼Œå·²ç»ç¡®ä¿¡ï¼Œå­¦ä¹ ä¸€é—¨æŠ€æœ¯æœ€å¥½çš„èµ„æ–™å°±æ˜¯å®˜æ–¹æ–‡æ¡£ã€‚å¦‚ä»Šï¼Œæ‹–æ²“äº†å¾ˆä¹…çš„Androidå­¦ä¹ è®¡åˆ’ï¼Œç»ˆäºå¯åŠ¨ã€‚å­¦ä¹ èµ„æ–™ï¼šAndroidå®˜æ–¹æ–‡æ¡£ï¼›å­¦ä¹ æ–¹æ³•ï¼šå†™demoå†™åšå®¢ï¼ˆæ€»ç»“ï¼‰ã€‚
é˜…è¯»é€”å¾„å®˜ç½‘http://developer.android.com/index.htmlä¸å¹¸çš„æ˜¯ï¼Œè¿™ä¸ªç½‘ç«™çš„å›½å†…è®¿é—®é€Ÿåº¦ï¼Œæ…¢åˆ°ä»¤äººå‘æŒ‡ã€‚å¾ˆå¤šæ—¶å€™ï¼Œæ ¹æœ¬æ‰“ä¸å¼€ã€‚å½“ç„¶ï¼Œå¦‚æœä½ å–œæ¬¢ç¿»å¢™ç©ï¼Œå°±å¦å½“åˆ«è®ºã€‚
å›½å†…é•œåƒç«™ä¸å¾—ä¸è¯´ï¼Œå’±ä»¬å›½å®¶æœ‰å¾ˆå¤šé›·é”‹ã€‚å›½å¤–çš„ç½‘ç«™ä¸å¥½è®¿é—®ï¼Œé‚£å°±åœ¨å›½å†…æ­å»ºä¸€ä¸ªé•œåƒç«™ï¼Œæ–¹ä¾¿å¤§å®¶è®¿é—®ã€‚è¿™é‡ŒéƒåŒå­¦æ¨èå‡ ä¸ªå›½å†…é•œåƒç«™ä¾›å¤§å®¶ä½¿ç”¨ï¼š1ã€è¸å¾—ç½‘http://wear.techbrood.com/training/index.html
2ã€Androidä¸­æ–‡APIhttp://www.android-doc.comhttp://www.android-doc.com/reference/packages.htmlhttp://www.android-doc.com/guide/components/activities.html
3ã€Androidå®˜æ–¹åŸ¹è®­è¯¾ç¨‹ä¸­æ–‡ç‰ˆ(v0.9.2)http://hukai.me/android-training-course-in-chinese/index.html


ç¦»çº¿æ–‡æ¡£æ‰“å¼€adtä¸­çš„SDK Managerï¼Œå®‰è£…Documentation for Android SDKã€‚å®‰è£…å¥½ä¹‹åï¼Œåœ¨adt/sdk/docsç›®å½•ä¸‹ï¼Œå°±æ˜¯å®˜æ–¹æ–‡æ¡£äº†ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ä¸‹è½½åˆ«äººä¸‹è½½æ‰“åŒ…å¥½çš„å®˜æ–¹æ–‡æ¡£ï¼Œé€Ÿåº¦ä¼šå¿«å¾ˆå¤šã€‚
è¿™æ—¶å€™é—®é¢˜æ¥äº†ï¼Œdocsé‡Œçš„å¾ˆå¤šæ–‡ä»¶ï¼Œä¼šåŠ è½½è°·æ­Œçš„å­—ä½“å’Œjsã€‚è¿™æ ·ï¼Œä¸¥é‡æ‹–æ…¢äº†æ‰“å¼€é€Ÿåº¦ã€‚
è§£å†³åŠæ³•ä¿®æ”¹index.htmlæ‰“å¼€index.htmlï¼Œç„¶åæ³¨é‡Šæ‰stylesheetå’Œjsä¸¤ä¸ªåœ°æ–¹ï¼š
&lt;!--&lt;link rel=&quot;stylesheet&quot; href=&quot;http://fonts.googleapis.com/css?family=Roboto:regular,medium,thin,italic,mediumitalic,bold&quot; title=&quot;roboto&quot;&gt;--&gt;&lt;!--&lt;script src=&quot;http://www.google.com/jsapi&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;--&gt;
ä¿®æ”¹æœ¬æœºhostsæ–‡ä»¶C:\Windows\System32\drivers\etc\hostså¢åŠ å¦‚ä¸‹éƒ¨åˆ†ï¼š
127.0.0.1 fonts.googleapis.com127.0.0.1 www.google.com
Javaå®ç°æ‰¹é‡æ³¨é‡Š/* * å»æ‰Androidæ–‡æ¡£ä¸­éœ€è¦è”ç½‘çš„javascriptä»£ç  */import java.io.BufferedReader;import java.io.BufferedWriter;import java.io.File;import java.io.FileNotFoundException;import java.io.FileReader;import java.io.FileWriter;import java.io.IOException;public class FormatDoc &#123;    public static int j=1;    /**     * @param args     */    public static void main(String[] args) &#123;                File file = new File(&quot;D:/android/android-sdk-windows/docs/&quot;);        searchDirectory(file, 0);        System.out.println(&quot;OVER&quot;);    &#125;    public static void searchDirectory(File f, int depth) &#123;        if (!f.isDirectory()) &#123;            String fileName = f.getName();            if (fileName.matches(&quot;.*.&#123;1&#125;html&quot;)) &#123;                String src= &quot;&lt;(link rel)[=]\&quot;(stylesheet)\&quot;\n(href)[=]\&quot;(http)://(fonts.googleapis.com/css)[?](family)[=](Roboto)[:](regular,medium,thin,italic,mediumitalic,bold)\&quot;( title)[=]\&quot;roboto\&quot;&gt;&quot;;                String src1 = &quot;&lt;script src=\&quot;http://www.google.com/jsapi\&quot; type=\&quot;text/javascript\&quot;&gt;&lt;/script&gt;&quot;;                String dst = &quot;&quot;;                //å¦‚æœæ˜¯htmlæ–‡ä»¶åˆ™æ³¨é‡Šæ‰å…¶ä¸­çš„ç‰¹å®šjavascriptä»£ç                 annotation(f, src, dst);                annotation(f, src1, dst);            &#125;        &#125; else &#123;            File[] fs = f.listFiles();            depth++;            for (int i = 0; i &lt; fs.length; ++i) &#123;                File file = fs[i];                searchDirectory(file, depth);            &#125;        &#125;    &#125;    /*     * f å°†è¦ä¿®æ”¹å…¶ä¸­ç‰¹å®šå†…å®¹çš„æ–‡ä»¶      * src å°†è¢«æ›¿æ¢çš„å†…å®¹      * dst å°†è¢«æ›¿æ¢å±‚çš„å†…å®¹     */    public static void annotation(File f, String src, String dst) &#123;        String content = FormatDoc.read(f);        content = content.replaceFirst(src, dst);        int ll=content.lastIndexOf(src);        System.out.println(ll);        FormatDoc.write(content, f);        System.out.println(j++);        return;    &#125;    public static String read(File src) &#123;        StringBuffer res = new StringBuffer();        String line = null;        try &#123;            BufferedReader reader = new BufferedReader(new FileReader(src));            int i=0;            while ((line = reader.readLine()) != null) &#123;                if (i!=0) &#123;                    res.append(&#x27;\n&#x27;);                &#125;                res.append(line);                i++;            &#125;            reader.close();        &#125; catch (FileNotFoundException e) &#123;            e.printStackTrace();        &#125; catch (IOException e) &#123;            e.printStackTrace();        &#125;        return res.toString();    &#125;    public static boolean write(String cont, File dist) &#123;        try &#123;            BufferedWriter writer = new BufferedWriter(new FileWriter(dist));            writer.write(cont);            writer.flush();            writer.close();            return true;        &#125; catch (IOException e) &#123;            e.printStackTrace();            return false;        &#125;    &#125;&#125;

C++å®ç°æ‰¹é‡æ³¨é‡Šè¯¦è§å‚è€ƒæ–‡æ¡£ï¼šä¼˜åŒ–Androidç¦»çº¿æ–‡æ¡£çš„è®¿é—®é€Ÿåº¦ã€‚velableå…„å¾ˆç‰›é€¼ï¼Œæ„Ÿè°¢ä»–åˆ†äº«ç»™æˆ‘ä»¬çš„ä»£ç å’Œæ–‡æ¡£ï¼éƒåŒå­¦å­˜å…¥äº†ç½‘ç›˜ä¸€ä»½ï¼Œæ–¹ä¾¿å¤§å®¶ä¸‹è½½ã€‚æºä»£ç ï¼šhttp://yunpan.cn/cj7VgRg9tUS6e  è®¿é—®å¯†ç  edb4æ–‡æ¡£ï¼šhttp://yunpan.cn/cj7Vsaavmey62  è®¿é—®å¯†ç  4e38
å‚è€ƒæ–‡æ¡£Androidå¸®åŠ©æ–‡æ¡£æœ¬åœ°æ‰“å¼€æ…¢çš„è§£å†³æ–¹æ¡ˆhttp://blog.csdn.net/wc0077/article/details/39669885

ä¼˜åŒ–Androidç¦»çº¿æ–‡æ¡£çš„è®¿é—®é€Ÿåº¦http://git.oschina.net/velable/OptAndroidDocs

Androidç¦»çº¿æ–‡æ¡£ï¼Œæ€¥é€Ÿè®¿é—®+æœç´¢åŠŸèƒ½æ­£å¸¸ã€‚http://git.oschina.net/velable/Android_Offline_Docs

]]></content>
      <categories>
        <category>engineering</category>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracleå®éªŒè®°å½•â€”â€”å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°</title>
    <url>/dev-oracle-experiment-store-procedure-and-function/</url>
    <content><![CDATA[åˆ›å»ºã€ç¼–è¯‘å¹¶è¿è¡ŒPL/SQLå­˜å‚¨è¿‡ç¨‹åœ¨SQL Developerä¸­ï¼Œåˆ›å»ºã€ç¼–è¯‘å¹¶è¿è¡ŒPL/SQLå­˜å‚¨è¿‡ç¨‹1ã€å³å‡»è¿‡ç¨‹ï¼Œåˆ›å»ºè¿‡ç¨‹2ã€è¾“å…¥è¿‡ç¨‹åâ€œemp_listâ€3ã€æ·»åŠ å‚æ•°



Name
Type
Mode
Default Value



v_empno
VARCHAR2
IN



v_ename
VARCHAR2
OUT



4ã€æ˜¾ç¤ºæŒ‡å®šå‚æ•°çš„è¿‡ç¨‹çš„æ¡†æ¶
CREATE OR REPLACEPROCEDURE EMP_LIST( v_empno IN VARCHAR2, v_ename OUT VARCHAR2) ASBEGIN  NULL;END EMP_LIST;
5ã€æ›¿æ¢NULLä¸ºï¼š
select ename into v_ename from emp where empno = v_empno;
å•å‡»å·¥å…·æ çš„saveæŒ‰é’®ï¼Œç¼–è¯‘PL/SQLå­ç¨‹åºã€‚
6ã€è¿è¡ŒPL/SQLè¿‡ç¨‹å•å‡»ç¼–è¯‘å›¾æ ‡ï¼Œè¿‡ç¨‹æˆåŠŸç¼–è¯‘ã€‚å³å‡»emp_listï¼Œé€‰æ‹©è¿è¡Œã€‚è¯¥æ“ä½œå°†è°ƒç”¨â€œè¿è¡ŒPL/SQLâ€å¯¹è¯æ¡†ã€‚è¿è¡ŒPL/SQLå¯¹è¯æ¡†å…è®¸é€‰æ‹©è¦è¿è¡Œçš„ç›®æ ‡è¿‡ç¨‹æˆ–å‡½æ•°ï¼ˆå¯¹ç¨‹åºåŒ…æœ‰ç”¨ï¼‰ï¼Œå¹¶æ˜¾ç¤ºæ‰€é€‰ç›®æ ‡çš„å‚æ•°åˆ—è¡¨ã€‚PL/SQLå—æ–‡æœ¬åŒºåŸŸä¸­åŒ…å«çš„SQL Developerç”¨æ¥è°ƒç”¨æ‰€é€‰ç¨‹åºçš„ç”Ÿæˆä»£ç ã€‚ä½¿ç”¨è¯¥åŒºåŸŸå¡«å……è¦ä¼ é€åˆ°ç¨‹åºå•å…ƒçš„å‚æ•°åŠå¤„ç†å¤æ‚çš„è¿”å›ç±»å‹ã€‚å°† â€œV_EMPNO:=NULL;â€æ›´æ”¹ä¸ºâ€œV_EMPNO:=7369;â€ï¼Œç„¶åå•å‡»ç¡®å®šã€‚å¯ä»¥çœ‹åˆ°è¿è¡Œæ—¥å¿—ï¼š
è¿æ¥åˆ°æ•°æ®åº“ scottã€‚V_ENAME = SMITHè¿›ç¨‹å·²é€€å‡ºã€‚ä»æ•°æ®åº“ scott æ–­å¼€è¿æ¥ã€‚

æ— å‚æ•°çš„å­˜å‚¨è¿‡ç¨‹åˆ›å»ºä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹ï¼Œä½¿ç”¨æ¸¸æ ‡å®ç°ï¼Œæ¯è¾“å‡ºdeptè¡¨çš„ä¸€æ¡è®°å½•ï¼ˆdeptnoã€dnameã€locï¼‰åï¼Œè¯‰åè¾“å‡ºè¯¥éƒ¨é—¨çš„å‘˜å·¥è®°å½•ï¼ˆempnoã€enameã€salï¼‰ã€‚
create or replace procedure query_dept_emp is  type sp_emp_cursor is ref cursor;  test_cursor1 sp_emp_cursor;  test_cursor2 sp_emp_cursor;  v_deptno dept.Deptno%type;  v_dname dept.dname%type;  v_loc dept.loc%type;  v_empno emp.empno%type;  v_ename emp.ename%type;  v_sal emp.sal%type;begin  open test_cursor1 for select deptno,dname,loc from dept;  loop    fetch test_cursor1 into v_deptno, v_dname, v_loc;    exit when test_cursor1%notfound;    dbms_output.put_line(&#x27;éƒ¨é—¨ç¼–å·ï¼š&#x27;||v_deptno||&#x27;éƒ¨é—¨åç§°ï¼š&#x27;||v_dname||&#x27;éƒ¨é—¨ä½ç½®ï¼š&#x27;|| v_loc);    dbms_output.put_line(&#x27;-----------------------------------------------&#x27;);    open test_cursor2 for select empno,ename,sal from emp where deptno = v_deptno;    loop      fetch test_cursor2 into v_empno, v_ename, v_sal;      exit when test_cursor2%notfound;      dbms_output.put_line(v_empno||&#x27;          &#x27;|| v_ename||&#x27;         &#x27;|| v_sal);    end loop;  end loop;  close test_cursor1;  close test_cursor2;end;exec query_dept_emp;

å¸¦inå‚æ•°çš„å­˜å‚¨è¿‡ç¨‹åˆ›å»ºä¸€ä¸ªPL/SQLå—ï¼Œæ ¹æ®è¾“å…¥çš„éƒ¨é—¨ç¼–å·ï¼Œç”¨æ¸¸æ ‡å®ç°é€æ¡è¾“å‡ºempè¡¨ä¸­è¯¥éƒ¨é—¨æ¯ä½å‘˜å·¥çš„ç¼–å·ï¼ˆempnoï¼‰ã€å§“åï¼ˆenameï¼‰å’Œå·¥èµ„ï¼ˆsalï¼‰ä¿¡æ¯ã€‚
create or replace procedure query_by_deptno(v_deptno in emp.Deptno%type) is  type sp_emp_cursor is ref cursor;  test_cursor sp_emp_cursor;  v_empno emp.empno%type;  v_ename emp.ename%type;  v_sal emp.sal%type;begin  open test_cursor for select empno,ename,sal from emp where deptno = v_deptno;  dbms_output.put_line(&#x27;å‘˜å·¥ç¼–å·    å§“å    å·¥èµ„&#x27;);  loop    fetch test_cursor into v_empno, v_ename, v_sal;    exit when test_cursor%notfound;    dbms_output.put_line(v_empno||&#x27;    &#x27;|| v_ename||&#x27;    &#x27;|| v_sal);  end loop;  close test_cursor;end;exec query_by_deptno(10);
å¸¦è¾“å…¥inã€è¾“å‡ºoutå‚æ•°çš„å­˜å‚¨è¿‡ç¨‹æŸ¥è¯¢empä¸­ç»™å®šèŒå·¥å·çš„å§“åã€å·¥èµ„å’Œä½£é‡‘ã€‚
create or replaceprocedure query_emp  (v_emp_no in emp.empno%type,   v_emp_name out emp.ename%type,  v_emp_sal out emp.sal%type,  v_emp_comm out emp.comm%type  )is  begin    select ename,sal,comm    into v_emp_name, v_emp_sal, v_emp_comm    from emp     where empno = v_emp_no;end query_emp;variable emp_name varchar2(15);variable emp_sal number;variable emp_comm number;execute query_emp(7369,:emp_name,:emp_sal,:emp_comm);print emp_name;
ä½¿ç”¨éšå¼æ¸¸æ ‡SQL%NOTFOUNDçš„å­˜å‚¨è¿‡ç¨‹è§£é›‡ç»™å®šèŒå·¥å·çš„èŒå·¥ã€‚å¦‚æœèŒå·¥å·7654çš„èŒå·¥ä¸å­˜åœ¨åˆ™å‡ºé”™ã€‚ä¸ºäº†é¿å…å‡ºé”™å¯ä½¿ç”¨éšå¼æ¸¸æ ‡SQL%NOTFOUNDè¯­å¥ã€‚
create or replace procedure fire_emp(v_emp_no in emp.empno%type)isbegin  delete from emp where empno = v_emp_no;  if sql%notfound then    dbms_output.put_line(&#x27;é›‡å‘˜å·ä¸ºï¼š&#x27;||v_emp_no||&#x27;çš„å‘˜å·¥ä¸å­˜åœ¨ï¼&#x27;);  else     dbms_output.put_line(&#x27;å·²åˆ é™¤é›‡å‘˜å·ä¸ºï¼š&#x27;|| v_emp_no || &#x27;çš„å‘˜å·¥ã€‚&#x27;);  end if;end fire_emp;execute fire_emp(7654);

è‡ªå®šä¹‰å‡½æ•°ç”¨FunctionæŸ¥è¯¢å‡ºEMPä¸­ç»™å®šèŒå·¥å·çš„å·¥èµ„ã€‚
create or replace function get_sal  (v_emp_no in emp.empno%type)  return number is   v_emp_sal emp.sal%type:=0;begin  select sal into v_emp_sal  from emp where empno = v_emp_no;  return (v_emp_sal);end get_sal;variable emp_sal number;execute:emp_sal:=get_sal(&#x27;7900&#x27;);print emp_sal;
å°ç»“è¿™ä¸ªå®éªŒè‚¯å®šæ˜¯å’ŒPL/SQLç¨‹åºè®¾è®¡ä¸€ä¼™çš„ï¼æ„Ÿè§‰åœ¨ä¸“ä¸šä¸­åŸºæœ¬ç”¨ä¸åˆ°ã€‚æœ¬ç¯‡æ˜¯Oracleå®éªŒè®°å½•çš„çš„æœ€åä¸€ç¯‡ï¼Œä¹¦ä¸Šè¿˜æœ‰ä¸€äº›å†…å®¹ï¼Œä»€ä¹ˆåˆ†åŒºè¡¨çš„åˆ›å»ºå’Œä½¿ç”¨ã€ä½¿ç”¨RMANå·¥å…·ã€é—ªå›æŠ€æœ¯ç­‰ç­‰ï¼Œéœ€è¦æ—¶å†å»å­¦ä¹ ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracleå®éªŒè®°å½•â€”â€”PL/SQLç¨‹åºè®¾è®¡</title>
    <url>/dev-oracle-experiment-plsql-design/</url>
    <content><![CDATA[PL/SQLå—åˆ›å»ºä¸€ä¸ªPL/SQLå—ï¼Œåˆ©ç”¨æ›¿æ¢å˜é‡è¾“å…¥èŒå·¥å·ï¼ŒæŸ¥è¯¢è¯¥èŒå·¥çš„å·¥èµ„ï¼Œå¦‚æœå·¥èµ„å°äº300å…ƒï¼Œé‚£ä¹ˆæŠŠå·¥èµ„æ›´æ”¹ä¸ºåŠ 200å…ƒã€‚å¦‚æœæ²¡æœ‰è¯¥å‘˜å·¥ï¼Œåˆ™æ˜¾ç¤ºâ€œæ²¡æœ‰è¯¥å‘˜å·¥ï¼â€
select empno from emp;
è®°ä½ä¸€äº›empnoï¼Œæ–¹ä¾¿æ¥ä¸‹æ¥çš„è¾“å…¥ã€‚
undefine å‘˜å·¥å·;declare  v_sal emp.sal%type;begin  select sal into v_sal from emp where empno = &amp;&amp;å‘˜å·¥å·;  if v_sal &lt; 3000 then  update emp set sal = sal + 200 where empno = &amp;&amp;å‘˜å·¥å·;  end if;  dbms_output.put_line(&#x27;å·¥èµ„ä¸ºï¼š&#x27;||v_sal);  exception when no_data_found then    dbms_output.put_line(&#x27;æ²¡æœ‰è¯¥å‘˜å·¥ï¼&#x27;);end;
è¿è¡Œä¸Šè¿°ä»£ç ï¼Œè¾“å…¥ä¸€ä¸ªempnoï¼Œæ¯”å¦‚7369ï¼Œå°±å¯ä»¥åœ¨DBMSè¾“å‡ºä¸­çœ‹åˆ°ç»“æœï¼Œæ³¨æ„ï¼Œéœ€è¦å…ˆå¯ç”¨DBMSè¾“å‡ºã€‚

ä½¿ç”¨æ¸¸æ ‡ä¸ºäº†å¤„ç†selectè¯­å¥è¿”å›çš„å¤šè¡Œæ•°æ®ï¼Œå¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨æ˜¾å¼æ¸¸æ ‡ã€‚ä½¿ç”¨æ˜¾å¼æ¸¸æ ‡è¡¨å“­å®šä¹‰æ¸¸æ ‡ã€æ‰“å¼€æ¸¸æ ‡ã€æå–æ¸¸æ ‡å’Œå…³é—­æ¸¸æ ‡ã€‚
1ã€æ¸¸æ ‡çš„ä½¿ç”¨
declare  cursor emp_cursor is select ename,sal from emp where deptno=10;  v_ename emp.ename%type;  v_sal emp.sal%type;begin  open emp_cursor;  loop    fetch emp_cursor into v_ename,v_sal;    exit when emp_cursor%notfound;    dbms_output.put_line(&#x27;å§“åï¼š&#x27;||v_ename||&#x27;ï¼Œå·¥èµ„ï¼š&#x27;||v_sal);  end loop;  close emp_cursor;end;

2ã€åœ¨æ¸¸æ ‡ä¸­ï¼Œä½¿ç”¨fetchâ€¦bulk collect intoè¯­å¥æå–æ‰€æœ‰æ•°æ®
declare  cursor emp_cursor is    select ename from emp where deptno=10;  type ename_table_type is table of emp.ename%type;  ename_table ename_table_type;begin  open emp_cursor;  fetch emp_cursor bulk collect into ename_table;  for i in 1..ename_table.count loop    dbms_output.put_line(ename_table(i));  end loop;  close emp_cursor;end;

3ã€ä½¿ç”¨æ¸¸æ ‡å±æ€§
declare   cursor emp_cursor is    select ename from emp where deptno=10;  type ename_table_type is table of emp.ename%type;  ename_table ename_table_type;begin  if not emp_cursor%isopen then    open emp_cursor;  end if;  fetch emp_cursor bulk collect into ename_table;  dbms_output.put_line(&#x27;æå–çš„æ€»è¡Œæ•°ï¼š&#x27;||emp_cursor%rowcount);  close emp_cursor;end;
4ã€åŸºäºæ¸¸æ ‡å®šä¹‰è®°å½•å˜é‡5ã€å¸¦å‚æ•°çš„æ¸¸æ ‡6ã€ä½¿ç”¨æ¸¸æ ‡æ›´æ–°æ•°æ®7ã€ä½¿ç”¨æ¸¸æ ‡åˆ é™¤æ•°æ®8ã€ä½¿ç”¨æ¸¸æ ‡forå¾ªç¯9ã€è‹¥ç±»å‹REFæ¸¸æ ‡10ã€å¼ºç±»å‹REFæ¸¸æ ‡
å°ç»“PL/SQLç¨‹åºè®¾è®¡æœ‰ä»€ä¹ˆç”¨å¤„ï¼Ÿä¸çŸ¥é“ã€‚åªæ˜¯æ„Ÿè§‰å¾ˆå¤æ‚ï¼Œä¹Ÿæ²¡æœ‰å­¦ä¹ çš„æ¬²æœ›ï¼Œç­‰åˆ°ç¡®å®æœ‰éœ€æ±‚äº†å†æ¥å­¦ä¹ å§ï¼
]]></content>
      <categories>
        <category>engineering</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>äººè„‰ç®¡ç†ç³»ç»ŸåŠŸèƒ½éœ€æ±‚ï¼ˆäºŒï¼‰</title>
    <url>/dev-connection-management-system-feature-request-2/</url>
    <content><![CDATA[åç‰‡1ã€æ‰«æçº¸è´¨åç‰‡ï¼Œç”Ÿæˆç”µå­åç‰‡
2ã€è¾“å…¥ä¿¡æ¯ï¼Œåˆ¶ä½œç”µå­åç‰‡
3ã€åç‰‡å¯ä»¥å‘é€ç»™ä»–äººï¼Œå½“ä¸¤ä¸ªäººæˆ–è€…æ›´å¤šäººè·ç¦»æ¯”è¾ƒè¿‘æ—¶ï¼Œä¸€ä¸ªäººç‚¹å‡»å‘é€åç‰‡ï¼Œå…¶ä»–äººä¿æŒæ¥æ”¶åç‰‡çŠ¶æ€ï¼Œå°±å¯ä»¥å®ç°åç‰‡çš„å‘é€ã€‚
4ã€åç‰‡åŒæ­¥ã€‚å½“ä»–äººçš„åç‰‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç”¨æˆ·ç‚¹å‡»åç‰‡åŒæ­¥åˆ°æœ¬åœ°ï¼Œå°±å¯ä»¥ä»æœåŠ¡å™¨è·å–æœ€æ–°çš„åç‰‡ä¿¡æ¯ï¼›å½“è‡ªå·±çš„åç‰‡ã€è‡ªå·±åˆ¶ä½œçš„åç‰‡ã€è‡ªå·±æ·»åŠ çš„åç‰‡é™„åŠ ä¿¡æ¯å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç”¨æˆ·ç‚¹å‡»åç‰‡åŒæ­¥åˆ°äº‘ç«¯ï¼Œå°±å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯å˜æ›´æ•°æ®ã€‚PSï¼šæ¯ä¸ªç”¨æˆ·IDå’Œè‡ªå·±çš„åç‰‡IDç›¸åŒã€‚

5ã€åç‰‡é™„åŠ ä¿¡æ¯ã€‚æœ‹å‹çš„ç”Ÿæ—¥ã€æœ‹å‹çš„çºªå¿µæ—¥ã€ä¸‹æ¬¡åº”è¯¥å’Œä»–è”ç³»çš„æ—¶é—´ã€æ¯•ä¸šçš„å­¦æ ¡ã€æ‰€å±çš„åœˆå­ï¼ˆé«˜å°”å¤«ã€åŒå­¦ç­‰ï¼‰ã€çˆ±å¥½ã€ç…§ç‰‡ã€åˆä½œå…³ç³»ã€‚ã€‚ã€‚è¿™äº›ï¼Œéƒ½å¯ä»¥æ‰‹åŠ¨è¾“å…¥åˆ°åç‰‡é™„åŠ ä¿¡æ¯ä¸­ã€‚éƒ¨åˆ†ä¿¡æ¯å…³è”åˆ°æ—¥ç¨‹ï¼Œæ¯”å¦‚å¥½å‹ç”Ÿæ—¥ï¼Œè”ç³»æ—¶é—´ç­‰ã€‚
6ã€åç‰‡æœç´¢
7ã€æ—¶é—´è½´ã€‚é€‰æ‹©æ—¥æœŸï¼Œäº‹ä»¶ï¼ˆä¼šé¢ã€åƒé¥­ã€æ¸¸ç©ï¼‰ï¼Œåœ°ç‚¹ï¼Œåç‰‡ï¼ˆä¸€å¼ æˆ–å¤šå¼ ï¼‰ç­‰ä¿¡æ¯ï¼Œä¿å­˜è®°å½•ã€‚ä¸€æ®µæ—¶é—´ä¹‹åï¼Œå°±å’Œåç‰‡ä¸Šçš„æœ‹å‹æœ‰äº†ç”¨æ¥è®°å½•äº¤å¾€è¿‡ç¨‹æ—¶é—´è½´ã€‚
çŸ­ä¿¡ç¾¤å‘1ã€å§“åæ›¿æ¢ã€‚çŸ­ä¿¡ç¾¤å‘ï¼Œåˆ«äººä¼šæ„Ÿè§‰ä½ ä¸å¤Ÿç”¨å¿ƒã€‚å¦‚æœåœ¨çŸ­ä¿¡ä¸­ä½¿ç”¨åˆ°äº†å¯¹æ–¹çš„åå­—ï¼Œè¿™æ¡çŸ­ä¿¡çš„æ„ä¹‰ï¼Œå°±å®Œå…¨ä¸ä¸€æ ·äº†ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å†™ä¸€æ¡çŸ­ä¿¡ï¼šâ€œ[å§“å]ï¼Œå¤©å†·åŠ è¡£ï¼â€ç‚¹å‡»ç¾¤å‘ï¼Œæ¯ä¸ªè”ç³»äººæ”¶åˆ°çš„éƒ½æ˜¯æ›¿æ¢è¿‡å§“åçš„çŸ­ä¿¡ã€‚å¼ ä¸‰åŒå­¦æ”¶åˆ°çš„çŸ­ä¿¡å°±æ˜¯â€œå¼ ä¸‰ï¼Œå¤©å†·åŠ è¡£ï¼â€ï¼Œæå››åŒå­¦æ”¶åˆ°çš„å°±æ˜¯â€œæå››ï¼Œå¤©å†·åŠ è¡£ï¼â€ã€‚
æ—¥ç¨‹1ã€å¥½å‹ç”Ÿæ—¥æé†’
2ã€è”ç³»æé†’
3ã€ä¼šé¢æé†’
4ã€ä»»åŠ¡æé†’
ç›®æ ‡è§„åˆ’1ã€åˆ¶è®¢ç›®æ ‡ä¾‹ï¼šæ‹‰åˆ°100ä¸‡æŠ•èµ„ã€‚
2ã€ä¸ºç›®æ ‡åˆ¶è®¢ä»»åŠ¡
3ã€å®‰æ’ä»»åŠ¡åˆ°æ—¥ç¨‹
ç¤¾äº¤æŠ€èƒ½1ã€è°ˆèµ„è¯é¢˜
2ã€ç¤¾äº¤ç¤¼ä»ª
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
  </entry>
  <entry>
    <title>äººè„‰ç®¡ç†ç³»ç»ŸåŠŸèƒ½éœ€æ±‚ï¼ˆä¸€ï¼‰</title>
    <url>/dev-connection-management-system-feature-request-1/</url>
    <content><![CDATA[å‰è¨€æœ¬é¡¹ç›®æ¥è‡ªç¬¬å…­å±Šä¸­å›½å¤§å­¦ç”ŸæœåŠ¡å¤–åŒ…åˆ›æ–°åˆ›ä¸šå¤§èµ›ã€‚
é¡¹ç›®è¯´æ˜é—®é¢˜è¯´æ˜ä¸æŸäººçš„è”ç³»ç¨‹åº¦ï¼Œä»¥åŠäº²å¯†åº¦ä¸æ˜¯ååˆ†å®¹æ˜“ç»Ÿè®¡ï¼Œé€šè¿‡äººè„‰ç®¡ç†ç³»ç»Ÿå¯ä»¥æ¸…é™¤äº†è§£å’ŒæŸäººçš„äº²å¯†åº¦ã€‚
ç”¨æˆ·æœŸæœ›æ™ºç¿”é›†å›¢æœŸæœ›ï¼šå¯¹äººè„‰çš„ç‰¹å¾è¿›è¡ŒåŒ¹é…æ€§çš„å…³æ€€ï¼Œæå¤§æå‡å…³æ€€æ•ˆæœ,æå¤§é™ä½ä¸ºå®æ–½å…³æ€€æ‰€ä»˜å‡ºçš„æ—¶é—´ç²¾åŠ›æˆæœ¬ï¼Œä»è€Œç»´æŠ¤ã€æ¨åŠ¨äººè„‰å…³ç³»çš„å‘å±•ã€‚
è¯¥å¹³å°è§„åˆ’ä¸ºå¼€æ”¾å¼å¹³å°ï¼Œå¹³å°æ”¯æŒä¸ªäººå¯¹äººè„‰è¿›è¡Œæ’ç¨‹ï¼Œäº’åŠ¨å»ºè®®ï¼Œè°ˆèµ„è¯é¢˜æœé›†ï¼ŒçŸ­ä¿¡ç¾¤å‘ï¼Œäººè„‰å¾®åšç›‘æ§ç­‰ç­‰ã€‚


ä»»åŠ¡è¦æ±‚å‚èµ›è€…ï¼Œè®¾è®¡ä¸€å¥—åŸºäºäº’è”ç½‘ï¼Œä»¥äººè„‰ç®¡ç†ä¸ºæ ¸å¿ƒçš„è§£å†³æ–¹æ¡ˆï¼Œè¯¥è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ä»¥ä¸‹è¦æ±‚ï¼š
ç­–åˆ’æ–¹æ¡ˆé¡¹ç›®éœ€æ±‚åˆ†æã€‚é¡¹ç›®è®¡åˆ’ã€‚åŸå‹å›¾è®¾è®¡ã€‚æœªæ¥çš„å¸‚åœºæ¨å¹¿æ–¹æ¡ˆåŠè®¡åˆ’ã€‚
ä¸šåŠ¡æ¨¡å‹ç”¨æˆ·çš„ç™»é™†ï¼Œé€€å‡ºä¸æ³¨å†Œã€‚
ç”¨æˆ·å¯¹è‡ªå·±çš„äººè„‰è¿›è¡Œç‰¹ç‚¹åˆ†æï¼Œå¹¶è¿›è¡Œé’ˆå¯¹æ€§çš„äººè„‰äº’åŠ¨ï¼Œä»¥è¾¾åˆ°äººè„‰å…³ç³»ä¿ƒè¿›çš„ä½œç”¨ã€‚
ä¸ºç”¨æˆ·å¯¹äººè„‰è¿›è¡Œæ’ç¨‹ï¼Œäº’åŠ¨å»ºè®®ï¼Œè°ˆèµ„è¯é¢˜æœé›†ï¼ŒçŸ­ä¿¡ç¾¤å‘ï¼Œäººè„‰å¾®åšç›‘æ§ç”¨æˆ·ä¸å…¶ä»–ç”¨æˆ·è¿›è¡Œåˆ†äº«æˆ–äº’åŠ¨ï¼Œæ”¶é›†ç”¨æˆ·å¯¹äº§å“ä½¿ç”¨çš„å„ç§å¿ƒå¾—ã€æ„è§ã€æƒ³æ³•ç­‰ã€‚
ä¸ºç”¨æˆ·æä¾›åç‰‡è¯†åˆ«ã€åç‰‡è®¾è®¡ã€åç‰‡äº¤æ¢ã€äº‘åç‰‡ç®¡ç†ã€å¤‡ä»½ã€åŒæ­¥ã€åˆ†äº«ä»¥åŠäººè„‰äº‘ç«¯ç®¡ç†ç­‰ç­‰åŠŸèƒ½ï¼›å…·æœ‰ä¼˜è¶Šçš„ç”¨æˆ·ä½“éªŒï¼Œä¾¿æ·çš„æ‰‹åŠ¿æ“ä½œï¼Œç»™æ‰‹æœºç”¨æˆ·ä»¥å…¨æ–°ã€æ„‰æ‚¦çš„ä½¿ç”¨ä½“éªŒã€‚
ä¸ºç”¨æˆ·æä¾›ç›¸é‡ä¿¡æ¯ï¼Œä»–ä»¬å¯äº¤æ¢ç…§ç‰‡å¹¶è¿…é€Ÿåˆ›å»ºä¸€ä»½åŸºæœ¬æ¡£æ¡ˆã€‚ä¹‹åå†ç‚¹å‡»æŸäººç…§ç‰‡ï¼Œä¾¿ä¼šæ˜¾ç¤ºä¸¤äººçš„é‚‚é€…å†å²ï¼Œä»¥åŠè§é¢æ—¶çš„æ—¶é—´ã€åœ°ç‚¹ã€é€šè®¯å½•ã€è¯é¢˜ã€ç…§ç‰‡ç”šè‡³å½“æ—¶çš„ç¬”è®°ç­‰ã€‚
æŠ€æœ¯æ–¹æ¡ˆåŠäº§å“åŸå‹åŸºäºä¸»æµæµè§ˆå™¨ PC ç«¯ã€æ‰‹æœºç«¯ã€‚
æä¾›æ•´ä½“æŠ€æœ¯æ¶æ„è§£å†³æ–¹æ¡ˆï¼Œæ–¹æ¡ˆçªå‡ºå¤§è§„æ¨¡è®¿é—®åŠæµ·é‡æ•°æ®å­˜å‚¨çš„ç³»ç»Ÿè§„åˆ’è§£å†³æ–¹æ¡ˆã€‚
å®ç°è¯¥äº§å“çš„åŸå‹ç³»ç»Ÿã€‚
å®æ–½æ–¹æ¡ˆè¯·æä¾›è¯¥è§£å†³æ–¹æ¡ˆçš„å®æ–½è®¡åˆ’ã€‚
æäº¤å†…å®¹éœ€æ±‚æ–‡æ¡£ã€‚åŸå‹è®¾è®¡ã€‚é¡¹ç›®æºä»£ç ã€‚
åŠŸèƒ½éœ€æ±‚åˆç¨¿å¥½å‹å¥½å‹åˆ—è¡¨1ã€å¥½å‹åˆ—è¡¨ç±»ä¼¼äºæ‰‹æœºçš„é€šè®¯å½•ï¼Œåœ¨å§“ååé¢ç´§è·Ÿç€äº²å¯†åº¦ï¼ˆæ¡å½¢æ˜¾ç¤ºï¼‰ï¼Œå¯ä»¥é€šè¿‡å³ä¾§çš„äº²å¯†åº¦è¿…é€Ÿå®šä½ã€‚2ã€å¯ä»¥é€‰æ‹©æ’åºæ–¹å¼ï¼Œæ¯”å¦‚æŒ‰äº²å¯†åº¦å‡åºï¼ŒæŒ‰äº²å¯†åº¦é™åºã€‚3ã€å¯ä»¥é€‰æ‹©æ˜¾ç¤ºæ–¹å¼ï¼Œä½¿ç”¨æ­¤åº”ç”¨çš„å¥½å‹æˆ–è€…æœªä½¿ç”¨æ­¤åº”ç”¨çš„å¥½å‹ã€‚4ã€å¯¹äºæœªä½¿ç”¨æ­¤åº”ç”¨çš„å¥½å‹ï¼Œå¯ä»¥é€šè¿‡å‘çŸ­ä¿¡çš„æ–¹å¼é‚€è¯·ä½¿ç”¨ã€‚5ã€ç‚¹å¼€ä¸€ä¸ªå¥½å‹ï¼Œå¯ä»¥çœ‹åˆ°å¥½å‹çš„åŸºæœ¬ä¿¡æ¯ã€åç‰‡ï¼ˆå¦‚æœå·²ç»è·å¾—ï¼‰ã€æ—¶é—´è½´ã€äºŒåº¦äººè„‰ç­‰ã€‚ä¹Ÿå¯ä»¥é€‰æ‹©é€šè¯ã€çŸ­ä¿¡ã€å‘æ¶ˆæ¯ã€‚6ã€å¯ä»¥ç‰¹åˆ«å…³å¿ƒæŸå¥½å‹ã€‚
å³æ—¶é€šè®¯ï¼ˆèŠå¤©ï¼‰å’Œå¥½å‹èŠå¤©çš„æ—¶å€™ï¼Œä¹Ÿè®¸ä¼šå‡ºç°æ²¡æœ‰è¯é¢˜èŠçš„åœºé¢ã€‚è¿™æ—¶å€™ï¼Œé€‰æ‹©èŠå¤©ç•Œé¢çš„èŠå¤©å¸®åŠ©ï¼Œé€‰æ‹©éšæœºæ¨èè¯é¢˜ã€åˆ†ç±»æŸ¥çœ‹è¯é¢˜ã€æ ¹æ®èŠå¤©è®°å½•æ™ºèƒ½æ¨èè¯é¢˜ï¼Œå‡ºç°ç›¸å…³è¯é¢˜ã€‚
æ—¶é—´è½´ç‚¹å¼€æ—¶é—´è½´ï¼Œå¯ä»¥çœ‹åˆ°æ˜¾ç¤ºä¸¤äººçš„é‚‚é€…å†å²ï¼Œä»¥åŠè§é¢æ—¶çš„æ—¶é—´ã€åœ°ç‚¹ã€é€šè®¯å½•ã€è¯é¢˜ã€ç…§ç‰‡ç”šè‡³å½“æ—¶çš„ç¬”è®°ç­‰ã€‚
æŸ¥çœ‹äºŒåº¦äººè„‰ç‚¹å¼€äºŒåº¦äººè„‰ï¼Œå¯ä»¥çœ‹åˆ°å¥½å‹çš„å¥½å‹çš„ä¿¡æ¯ï¼ˆå¦‚æœå¯¹æ–¹è®¾ç½®å…è®¸ï¼‰ã€‚å¯ä»¥é€‰æ‹©å‘é€å¥½å‹è¯·æ±‚ï¼Œå‘é€åç‰‡è¯·æ±‚ã€‚
çŸ­ä¿¡ç¾¤å‘ï¼Œåç‰‡ç¾¤å‘é€‰æ‹©ä¸€äº›å¥½å‹ï¼Œç¾¤å‘çŸ­ä¿¡ï¼Œç¾¤å‘åç‰‡ã€‚å¯ä»¥é€‰æ‹©å®šæ—¶å‘é€ã€‚ï¼ˆå’Œæ‰‹æœºè‡ªå¸¦çš„çŸ­ä¿¡åŠŸèƒ½ä¹Ÿæ²¡å•¥å·®åˆ«ã€‚ã€‚ã€‚ï¼‰
å‘å¥½å‹æ¨èå¥½å‹è‡ªå·±æ‹¥æœ‰å¥½å‹Aå’ŒBï¼Œä½†æ˜¯Aå’ŒBä¸æ˜¯å¥½å‹ï¼Œè¿™æ—¶å¯ä»¥ç‚¹å‡»å¥½å‹æ¨èï¼Œé€‰æ‹©é€šè¿‡ä¸ªäººä¿¡æ¯æˆ–è€…åç‰‡ï¼Œç„¶åé€‰æ‹©Aå’ŒBã€‚Açš„ä¸ªäººä¿¡æ¯æˆ–è€…åç‰‡å°±å‘é€ç»™Bï¼ŒBçš„ä¸ªäººä¿¡æ¯æˆ–è€…åç‰‡å°±å‘é€ç»™Aã€‚åŒæ ·çš„æ–¹å¼ï¼Œå¯ä»¥é€‰æ‹©æ›´å¤šçš„å¥½å‹ã€‚
æœç´¢å¥½å‹1ã€æ¡ä»¶æœç´¢ã€‚é€‰æ‹©æ˜µç§°ã€æ€§åˆ«ã€è¡Œä¸šã€èŒä½ã€èŒƒå›´ï¼ˆæ‰€æœ‰äººæˆ–è€…åœˆå­å†…çš„äººï¼‰ç­‰ï¼Œæœç´¢åˆ°ç¬¦åˆæ¡ä»¶çš„ç”¨æˆ·ï¼Œè¿›è¡Œå¥½å‹è¯·æ±‚ã€‚
2ã€ç²¾ç¡®æœç´¢ã€‚è¾“å…¥å¯¹æ–¹è´¦å·è¿›è¡Œæœç´¢ã€‚
å¶é‡è®¾ç½®å¶é‡çš„æ¡ä»¶ï¼Œæ¯”å¦‚è·ç¦»ã€å¹´é¾„ã€èŒä¸šç­‰ï¼Œå½“å‡ºç°ç¬¦åˆæ¡ä»¶çš„ç”¨æˆ·æ—¶ï¼Œä¼šæé†’ç”¨æˆ·æ˜¯å¦æ·»åŠ å¥½å‹ï¼Œæ˜¯å¦å»è§é¢ã€‚ï¼ˆå¶é‡æ’é™¤å¥½å‹ï¼‰
å¥½å‹åç‰‡ç®¡ç†1ã€åŒ…å«åœ¨åº”ç”¨å†…ä¸æ˜¯å¥½å‹çš„åç‰‡2ã€åç‰‡çš„æ·»åŠ ã€åˆ é™¤ã€æœç´¢
äº²å¯†åº¦ç»Ÿè®¡1ã€ä½¿ç”¨æ­¤åº”ç”¨çš„äººå’Œæœªä½¿ç”¨æ­¤åº”ç”¨çš„äººåˆ†å¼€ç»Ÿè®¡ã€‚2ã€å¯¹äºä½¿ç”¨è€…ï¼Œæ ¹æ®é€šè¯è®°å½•ã€çŸ­ä¿¡ã€æœ¬åº”ç”¨å†…è”ç³»ä¿¡æ¯ã€å¾®åšæ¥ç»Ÿè®¡ã€‚3ã€å¯¹äºæœªä½¿ç”¨è€…ï¼Œæ ¹æ®é€šè¯è®°å½•ã€çŸ­ä¿¡æ¥ç»Ÿè®¡ã€‚4ã€æ ¹æ®è”ç³»æ¬¡æ•°ã€è”ç³»æ—¶é—´ã€è”ç³»æ–¹å¼ç»˜åˆ¶ç›´è§‚çš„å›¾è¡¨ã€‚æ¯”å¦‚æœ€è¿‘ä¸€å¹´å’ŒæŸä¸ªå¥½å‹çš„ç”µè¯è”ç³»æ¬¡æ•°èµ°åŠ¿å›¾ã€‚
ä¸ªäººåŸºæœ¬ä¿¡æ¯æ˜µç§°ï¼Œç­‰çº§ï¼Œç§¯åˆ†ï¼Œæ€§åˆ«ï¼ŒèŒä¸šï¼Œç­¾åï¼Œç”Ÿæ—¥ï¼Œæ‰‹æœºï¼Œé‚®ç®±ç­‰ã€‚
ä¸ªäººåç‰‡ç®¡ç†ç³»ç»Ÿæä¾›ä¸€äº›åç‰‡æ¨¡æ¿ï¼Œç”¨æˆ·é€šè¿‡é€‰æ‹©è¿™äº›æ¨¡æ¿ï¼Œå¡«å†™ç›¸åº”ä¿¡æ¯ï¼Œç”Ÿæˆåç‰‡ã€‚åç‰‡å¯ä»¥é€šè¿‡æ‰«äºŒç»´ç çš„æ–¹å¼æ·»åŠ ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‘é€åç‰‡çš„æ–¹å¼å‘é€ç»™å¥½å‹æˆ–äºŒåº¦äººè„‰ã€‚
ç©ºé—´ï¼ˆä¸ªäººåœˆå­ï¼‰1ã€ä¸ªäººæœ‰è‡ªå·±çš„è°ˆèµ„è¯é¢˜ï¼Œå³å¥½å‹çš„è°ˆè®ºã€‚2ã€å‘èµ·æ´»åŠ¨ï¼Œå¥½å‹å¯ä»¥çœ‹åˆ°ã€‚
åŸºæœ¬è®¾ç½®1ã€æ˜¯å¦å¼€å¯å¥½å‹ç”Ÿæ—¥æé†’åŠŸèƒ½2ã€æ˜¯å¦å¼€å¯è”ç³»æé†’ã€‚3ã€æ˜¯å¦å¼€å¯é™„è¿‘å¥½å‹æé†’ã€‚4ã€æ˜¯å¦å¼€å¯å¶é‡ã€‚
éšç§è®¾ç½®1ã€æ˜¯å¦å…è®¸å¥½å‹å‘é€è‡ªå·±çš„åç‰‡ç»™äºŒåº¦äººè„‰2ã€æ˜¯å¦å…è®¸å¥½å‹å‘é€è‡ªå·±çš„åç‰‡ç»™é™Œç”Ÿäºº3ã€æ˜¯å¦æ¥æ”¶äºŒåº¦äººè„‰çš„åç‰‡4ã€æ˜¯å¦æ¥æ”¶é™Œç”Ÿäººçš„åç‰‡5ã€æ˜¯å¦å¯ä»¥é€šè¿‡äºŒåº¦äººè„‰çœ‹åˆ°è‡ªå·±çš„ä¿¡æ¯6ã€æ˜¯å¦éšæ—¶å®šä½è‡ªå·±çš„ä½ç½®ã€‚7ã€æ˜¯å¦å…è®¸è¢«é™Œç”Ÿäººæœç´¢ã€‚8ã€æ˜¯å¦å…è®¸ç³»ç»ŸæŸ¥çœ‹èŠå¤©è®°å½•ã€‚
åŒæ­¥ç®¡ç†1ã€åŒæ­¥åç‰‡åˆ°äº‘ç«¯ï¼ŒåŒæ­¥åç‰‡åˆ°æœ¬åœ°ã€‚2ã€åŒæ­¥é€šè®¯å½•åˆ°äº‘ç«¯ï¼ŒåŒæ­¥é€šè®¯å½•åˆ°æœ¬åœ°ã€‚3ã€åŒæ­¥çŸ­ä¿¡åˆ°äº‘ç«¯ï¼ŒåŒæ­¥çŸ­ä¿¡åˆ°æœ¬åœ°ã€‚
æé†’1ã€è”ç³»æé†’ä¸€å‘¨ã€ä¸€æœˆã€ä¸€å¹´æ²¡æœ‰è”ç³»è¿‡çš„å¥½å‹ï¼Œè®¾ç½®é˜¶æ®µæ€§æé†’ã€‚
2ã€é™„è¿‘å¥½å‹æé†’å¦‚æœå’ŒæŸå¥½å‹è·ç¦»åœ¨100ç±³ä¹‹å†…ï¼Œå°±å‘å‡ºæé†’ï¼Œè¯¢é—®æ˜¯å¦å»è§é¢ã€‚
æ—¥ç¨‹1ã€ç”Ÿæ—¥å¥½å‹çš„ç”Ÿæ—¥ä¼šè‡ªåŠ¨åŒæ­¥åˆ°è‡ªå·±çš„æ—¥ç¨‹è¡¨ä¸­ï¼Œç”Ÿæ—¥å‰ä¸€å¤©æˆ–è€…å½“å¤©ä¼šæœ‰é—¹é’Ÿæé†’ã€‚2ã€çº¦ä¼šç‚¹å¼€æ—¥ç¨‹è¡¨ï¼Œè¾“å…¥çº¦ä¼šä¿¡æ¯ï¼Œå‰ä¸€å¤©æˆ–è€…å½“å¤©ä¼šæœ‰é—¹é’Ÿæé†’ã€‚3ã€åœˆå­èšä¼šåœˆå­ç®¡ç†å‘˜å‘èµ·äº†æ´»åŠ¨ï¼Œå¦‚æœç”¨æˆ·ç¡®è®¤å‚åŠ ï¼Œèšä¼šçš„æ—¶é—´åœ°ç‚¹ä¿¡æ¯ä¼šå‡ºç°åœ¨æ—¥ç¨‹ä¸­ï¼Œå‰ä¸€å¤©æˆ–è€…å½“å¤©ä¼šæœ‰é—¹é’Ÿæé†’ã€‚
è¯é¢˜é€‰æ‹©æ„Ÿå…´è¶£çš„è¯é¢˜åˆ†ç±»ï¼Œç§¯ç´¯èŠå¤©è¯é¢˜ï¼Œé¿å…æ²¡æœ‰è¯é¢˜èŠçš„å°´å°¬ã€‚æ­¤åŠŸèƒ½å¯ä»¥å’Œå³æ—¶é€šè®¯ï¼ˆèŠå¤©ï¼‰åŠŸèƒ½ç»“åˆã€‚
äººè„‰åœˆç®¡ç†1ã€æ¯ä¸ªç”¨æˆ·éƒ½æœ‰æƒåˆ©åˆ›å»ºäººè„‰åœˆï¼Œåˆ›å»ºäººè„‰åœˆä¹‹åï¼Œè¯¥ç”¨æˆ·è‡ªåŠ¨æˆä¸ºè¯¥äººè„‰åœˆçš„ç®¡ç†å‘˜ï¼Œä»–å¯ä»¥é‚€è¯·è‡ªå·±çš„å¥½å‹åŠ å…¥è‡ªå·±çš„äººè„‰åœˆï¼Œä»»å‘½å…¶ä»–çš„äººä¸ºç®¡ç†å‘˜ã€‚
2ã€ç®¡ç†å‘˜å¯ä»¥è®¾ç½®äººè„‰åœˆçš„ä¸»é¢˜ï¼Œå¦‚äº²å‹åœˆï¼Œæœ‹å‹åœˆï¼ŒåŒäº‹åœˆç­‰ã€‚
3ã€ç®¡ç†å‘˜å¯ä»¥è®¾ç½®äººè„‰åœˆçš„ç®¡ç†åˆ¶åº¦ï¼Œå¯ä»¥æ˜¯â€œç‹¬è£åˆ¶â€ï¼Œâ€œæ°‘ä¸»é€‰ä¸¾åˆ¶â€,â€œç‹¬è£åˆ¶â€æš¨ç®¡ç†å§‹ç»ˆä¸å˜ï¼Œâ€œæ°‘ä¸»é€‰ä¸¾åˆ¶â€æš¨ç®¡ç†å‘˜å®šæœŸé€‰ä¸¾äº§ç”Ÿã€‚
4ã€ç®¡ç†å‘˜å¯ä»¥å‘èµ·æ´»åŠ¨ï¼Œå¯ä»¥æ˜¯çº¿ä¸‹çš„èšä¼šç­‰æ´»åŠ¨ï¼Œèšä¼šç°åœºå¯ä»¥äºŒç»´ç ç­¾åˆ°ï¼›ä¹Ÿå¯ä»¥æ˜¯çº¿ä¸Šçš„æ¸¸æˆæˆ–è®¨è®ºã€‚æˆ‘ä»¬é¼“åŠ±ç®¡ç†å‘˜è®°å½•äººè„‰åœˆä¸­æ´»åŠ¨æƒ…å†µï¼Œå¦‚ï¼šèšä¼šçš„ç…§ç‰‡ï¼Œå‚ä¸çš„äººå‘˜ï¼Œå‘ç”Ÿçš„ä¸»è¦äº‹ä»¶ï¼Œä»è€Œç”Ÿæˆäººè„‰åœˆçš„å†å²ã€‚
5ã€ç®¡ç†å‘˜å¯¹äººè„‰åœˆçš„éšç§ä¿¡æ¯æœ‰è®¾ç½®å’Œä¿®æ”¹çš„æƒåŠ›ï¼Œå¦‚ï¼šäººè„‰åœˆæ˜¯å¦å…¬å¼€ç­‰ã€‚
è°ˆèµ„è¯é¢˜1ã€æ¯ä¸ªäººè„‰åœˆéƒ½æœ‰å„è‡ªçš„è°ˆèµ„è¯é¢˜æ¨¡å—ï¼Œäººè„‰åœˆä¸­çš„æ‰€æœ‰çš„éƒ½å¯ä»¥åœ¨å…¶ä¸­å‘è¡¨å„è‡ªå…³äºè¯¥äººè„‰åœˆçš„è¯é¢˜ï¼Œå…¶ä»–ç”¨æˆ·å¯ä»¥ç‚¹èµï¼Œè¯„è®ºï¼Œ@ã€‚2ã€ç®¡ç†å‘˜å¯¹äºäººè„‰åœˆè°ˆèµ„è¯é¢˜æœ‰ç®¡ç†æƒåˆ©ã€‚3ã€äººè„‰åœˆä¸­ç”¨æˆ·å¯ä»¥é’ˆå¯¹è‡ªå·±çš„éœ€æ±‚å¯¹è°ˆèµ„è¯é¢˜è¿›è¡Œæœç´¢ã€‚4ã€ç”¨æˆ·çš„è¯é¢˜è¢«è¯„è®ºæœ‰ç›¸å…³çš„æ¨é€æç¤ºã€‚
åœˆå­æ‹“å±•1ã€æ¯ä¸ªç”¨æˆ·éƒ½å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½æœç´¢ç›¸å…³çš„äººè„‰åœˆï¼Œå¦‚æœè¯¥äººè„‰åœˆä¸ºå…¬å¼€çš„ï¼Œç”¨æˆ·å°±å¯ä»¥æµè§ˆåœˆå­çš„ç›¸å…³ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹åœˆå­ä¸­çš„äººå‘˜ç»„æˆã€‚2ã€äººè„‰åœˆçš„ç®¡ç†å‘˜ï¼Œå¯ä»¥å‘å…¶ä»–çš„äººè„‰åœˆå‘å‡ºè”ç»“ç”³è¯·ï¼Œè‹¥ä¸¤ä¸ªäººè„‰åœˆæˆä¸ºè”ç»“å…³ç³»ï¼ŒåŒæ–¹çš„ç®¡ç†å‘˜å¯ä»¥è‡ªç”±äº¤æµã€‚3ã€ç®¡ç†å‘˜å¯ä»¥å¼•èè‡ªå·±åœˆå­é‡Œçš„äººç»™è”ç»“åœˆå­çš„äººï¼Œå¼•èçš„ç”¨æˆ·ä¸ä¼šç«‹å³æˆä¸ºè”ç»“åœˆå­çš„æˆå‘˜ï¼Œè€Œæ˜¯å°†ä¿¡æ¯å…¬å¸ƒç»™è”ç»“åœˆå­çš„æˆå‘˜ï¼Œä¾›è”ç»“åœˆå­çš„ç”¨æˆ·æ‹“å®½è‡ªå·±çš„äººè„‰ï¼ˆæœ‰éœ€æ±‚çš„ç”¨æˆ·å¯ä»¥è‡ªå·±è”ç³»ä»–æˆä¸ºè‡ªå·±çš„å¥½å‹ï¼‰ï¼Œèƒ½å¦æˆä¸ºåœˆå­çš„æˆå‘˜å†³å®šæƒåœ¨äºç®¡ç†è€…ã€‚4ã€ä¸¤ä¸ªåœˆå­å‘èµ·å…±åŒæ´»åŠ¨ï¼Œè®¾ç½®å¯ä»¥ä¸¤ä¸ªäººè„‰åœˆåˆå¹¶æˆä¸ºä¸€ä¸ªæ–°çš„äººè„‰åœˆã€‚5ã€åœ¨åœˆå­ä¸­å¯ä»¥éšæ„ç§èŠï¼Œæ·»åŠ å¥½å‹ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
  </entry>
  <entry>
    <title>Oracleå®éªŒè®°å½•â€”â€”æ¨¡å¼å¯¹è±¡</title>
    <url>/dev-oracle-experiment-pattern-object/</url>
    <content><![CDATA[è¡¨è¡¨ç¤ºæ•°æ®åº“ä¸­æœ€å¸¸ç”¨çš„æ¨¡å¼å¯¹è±¡ï¼Œç”¨æˆ·çš„æ•°æ®åœ¨æ•°æ®åº“ä¸­æ˜¯ä»¥è¡¨çš„å½¢å¼å­˜å‚¨çš„ã€‚è¡¨é€šå¸¸ç”±ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—ç»„æˆï¼Œæ¯ä¸ªåˆ—è¡¨ç¤ºä¸€ä¸ªå±æ€§ï¼Œè€Œè¡¨ä¸­çš„ä¸€è¡Œåˆ™è¡¨ç¤ºä¸€æ¡è®°å½•ã€‚
åœ¨åˆ›å»ºè¡¨æ—¶å¯ä»¥ä¸ºè¡¨æŒ‡å®šå­˜å‚¨ç©ºé—´ï¼Œå¦‚æœä¸æŒ‡å®šï¼ŒOracleä¼šå°†è¯¥è¡¨å­˜å‚¨åˆ°é»˜è®¤è¡¨ç©ºé—´ä¸­ã€‚æ ¹æ®éœ€è¦å¯ä»¥å°†è¡¨ä»ä¸€ä¸ªè¡¨ç©ºé—´ç§»åŠ¨åˆ°å¦ä¸€ä¸ªè¡¨ç©ºé—´ã€‚create table userbase(username varchar2(16),passwd varchar2(16));alter table userbase move tablespace user_data;
é‡å‘½åè¡¨alter table userbase rename to newuserbase;æˆ–è€…rename userbase to newuserbase;


ç´¢å¼•ç´¢å¼•æ˜¯æ•°æ®åº“ä¸­ç”¨äºå­˜æ”¾è¡¨çš„æ¯ä¸€æ¡è®°å½•çš„ä½ç½®çš„ä¸€ç§å¯¹è±¡ï¼Œå…¶ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†åŠ å¿«æ•°æ®çš„è¯»å–é€Ÿåº¦å’Œå®Œæ•´æ€§æ£€æŸ¥ã€‚ä¸è¿‡ï¼Œåˆ›å»ºç´¢å¼•éœ€è¦å ç”¨è®¸å¤šå­˜å‚¨ç©ºé—´ï¼Œè€Œä¸”åœ¨å‘è¡¨ä¸­æ·»åŠ å’Œåˆ é™¤è®°å½•æ—¶ï¼Œæ•°æ®åº“éœ€è¦èŠ±è´¹é¢å¤–çš„å¼€é”€æ¥æ›´æ–°ç´¢å¼•ã€‚åˆ›å»ºç´¢å¼•ï¼šcreate index index_username on userbase(username) tablespace user_data;åˆ é™¤ç´¢å¼•ï¼šdrop index index_username;åˆ›å»ºå”¯ä¸€ç´¢å¼•ï¼šcreate unique index unique_index_username on userbase(username) tablespace user_data;åˆ›å»ºç»„åˆç´¢å¼•ï¼šcreate index complex_index_username on userbase(username,passwd) tablespace user_data;åˆ›å»ºåå‘é”®ç´¢å¼•ï¼šcreate index reverse_index_username on userbase(username) reverse tablespace user_data;
è§†å›¾è§†å›¾æ˜¯ä¸€ä¸ªè™šæ‹Ÿè¡¨ï¼Œå®ƒå¹¶ä¸å­˜å‚¨çœŸå®çš„æ•°æ®ï¼Œå®ƒçš„è¡Œå’Œåˆ—çš„æ•°æ®æ¥è‡ªäºå®šä¹‰è§†å›¾çš„å­æŸ¥è¯¢è¯­å¥ä¸­æ‰€å¼•ç”¨çš„è¡¨ï¼Œè¿™äº›è¡¨é€šå¸¸ä¹Ÿç§°ä¸ºè§†å›¾çš„åŸºè¡¨ã€‚è§†å›¾å¯ä»¥å»ºç«‹åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ï¼ˆæˆ–å…¶ä»–è§†å›¾ï¼‰ä¸Šï¼Œå®ƒä¸å ç”¨å®é™…çš„å­˜å‚¨ç©ºé—´ï¼Œåªæ˜¯åœ¨æ•°æ®å­—å…¸ä¸­ä¿å­˜å®ƒçš„å®šä¹‰ä¿¡æ¯ã€‚
create table userdetail(username varchar2(16),realname varchar2(16));åˆ›å»ºè§†å›¾è¯­æ³•å¦‚ä¸‹ï¼š
create or replace view view_user(v_username,v_passwd,v_realname) as select b.username,b.passwd,d.realnamefrom userbase b,userdetail dwhere b.username=d.username;
ä»¥ä¸Šå‘½ä»¤å¦‚æœæç¤ºæ²¡æœ‰åˆ›å»ºè§†å›¾æƒé™ï¼Œè¯·ä½¿ç”¨systemç™»é™†ï¼Œæ‰§è¡Œgrant create view to scott;
åºåˆ—åœ¨Oracleä¸­ï¼Œå¯ä»¥ä½¿ç”¨åºåˆ—è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ•´æ•°åºåˆ—ï¼Œä¸»è¦ç”¨æ¥è‡ªåŠ¨ä¸ºè¡¨ä¸­çš„æ•°æ®ç±»å‹çš„ä¸»é”®åˆ—æä¾›æœ‰åºçš„å”¯ä¸€å€¼ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…åœ¨å‘è¡¨ä¸­æ·»åŠ æ•°æ®æ—¶ï¼Œæ‰‹å·¥æŒ‡å®šä¸»é”®å€¼ã€‚åºåˆ—å’Œè¡¨æ²¡æœ‰å…³ç³»ã€‚
è€Œä¸”ä½¿ç”¨æ‰‹å·¥æŒ‡å®šä¸»é”®å€¼è¿™ç§æ–¹å¼æ—¶ï¼Œç”±äºä¸»é”®å€¼ä¸å…è®¸é‡å¤ï¼Œå› æ­¤å®ƒè¦æ±‚æ“ä½œäººå‘˜åœ¨æŒ‡å®šä¸»é”®å€¼æ—¶è‡ªå·±åˆ¤æ–­æ–°æ·»åŠ çš„å€¼æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸å¯å–çš„ã€‚
åˆ›å»ºåºåˆ—è¯­æ³•å¦‚ä¸‹ï¼š
create sequence userbase_sequenceminvalue 1maxvalue 1024start with 1increment by 1cache 10;
åˆ é™¤åºåˆ—ï¼šdrop sequence userbase_sequence;
æ·»åŠ idåˆ—ï¼šalter table add id int;
æ’å…¥æ•°æ®ï¼šinsert into userbase values(&#39;voidking&#39;,&#39;voidking&#39;,userbase_sequence.nextval);
åŒä¹‰è¯Oracleæ”¯æŒä¸ºè¡¨ã€ç´¢å¼•æˆ–è§†å›¾ç­‰æ¨¡å¼å¯¹è±¡å®šä¹‰åˆ«åï¼Œä¹Ÿå°±æ˜¯ä¸ºè¿™äº›å¯¹è±¡åˆ›å»ºåŒä¹‰è¯ã€‚Oracleä¸­çš„åŒä¹‰è¯ä¸»è¦åˆ†ä¸ºå¦‚ä¸‹ä¸¤ç±»ã€‚1ã€å…¬æœ‰åŒä¹‰è¯ï¼šåœ¨æ•°æ®åº“ä¸­æ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨ã€‚2ã€ç§æœ‰åŒä¹‰è¯ï¼šç”±åˆ›å»ºå®ƒçš„ç”¨æˆ·ç§äººæ‹¥æœ‰ã€‚ä¸è¿‡ï¼Œç”¨æˆ·å¯ä»¥æ§åˆ¶å…¶ä»–ç”¨æˆ·æ˜¯å¦æœ‰æƒä½¿ç”¨è‡ªå·±çš„åŒä¹‰è¯ã€‚
åˆ›å»ºåŒä¹‰è¯è¯­æ³•ï¼šcreate public synonym synonym_userbase for userbase;
æƒé™ä¸å¤Ÿï¼Œä½¿ç”¨systemç”¨æˆ·ç™»å½•ï¼Œæ‰§è¡Œgrant create synonym to scott;
]]></content>
      <categories>
        <category>engineering</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracleå®éªŒè®°å½•â€”â€”æ•°æ®æŸ¥è¯¢å’Œå‡½æ•°çš„ä½¿ç”¨</title>
    <url>/dev-oracle-experiment-data-query-and-function/</url>
    <content><![CDATA[æˆ‘ä»¬ä½¿ç”¨scottç”¨æˆ·çš„å‡ å¼ è¡¨æ¥æ¼”ç¤ºã€‚
æŸ¥çœ‹è¡¨ç»“æ„desc emp;
æŸ¥è¯¢æ‰€æœ‰åˆ—select * from dept;
æŸ¥è¯¢æŒ‡å®šåˆ—select ename, sal, job, deptno from emp;

å–æ¶ˆé‡å¤è¡Œselect distinct deptno, job from emp; 
ç»Ÿè®¡è¡Œæ•°select count(*) from emp;
æ¡ä»¶æŸ¥è¯¢1ã€æŸ¥è¯¢SMITHæ‰€åœ¨éƒ¨é—¨ï¼Œå·¥ä½œï¼Œè–ªæ°´select deptno,job,sal from emp where ename = &#39;SMITH&#39;; 2ã€æŸ¥è¯¢è–ªæ°´å¤§äº3000çš„å‘˜å·¥ä¿¡æ¯select * from emp where sal &gt; 3000;
æ˜¾ç¤ºæ¯ä¸ªé›‡å‘˜çš„å¹´å·¥èµ„select sal*13+nvl(comm, 0)*13 &quot;å¹´è–ª&quot; , ename, comm from emp;
æ˜¾ç¤ºåˆ—åˆ«åselect ename &quot;å§“å&quot;, sal*12 as &quot;å¹´æ”¶å…¥&quot; from emp; 
||select ename || &#39; is a &#39; || job from emp;
like%è¡¨ç¤º0åˆ°å¤šä¸ªå­—ç¬¦ï¼Œ_è¡¨ç¤ºä»»æ„å•ä¸ªå­—ç¬¦ã€‚1ã€æ˜¾ç¤ºé¦–å­—ç¬¦ä¸ºSçš„å‘˜å·¥å§“åå’Œå·¥èµ„ï¼Ÿselect ename,sal from emp where ename like &#39;S%&#39;;
2ã€æ˜¾ç¤ºç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸ºå¤§å†™Oçš„æ‰€æœ‰å‘˜å·¥çš„å§“åå’Œå·¥èµ„select ename,sal from emp where ename like &#39;__O%&#39;;
inselect * from emp where empno in (7844, 7839,123,456);
is nullselect * from emp where mgr is null; 
é€»è¾‘æ“ä½œç¬¦æŸ¥è¯¢å·¥èµ„é«˜äº500æˆ–è€…æ˜¯å²—ä½ä¸º MANAGER çš„é›‡å‘˜ï¼ŒåŒæ—¶è¿˜è¦æ»¡è¶³ä»–ä»¬çš„å§“åé¦–å­—æ¯ä¸ºå¤§å†™çš„Jã€‚select * from emp where (sal &gt;500 or job = &#39;MANAGER&#39;) and ename like &#39;J%&#39;;
order by1ã€æŒ‰ç…§å·¥èµ„çš„ä»ä½åˆ°é«˜çš„é¡ºåºæ˜¾ç¤ºé›‡å‘˜çš„ä¿¡æ¯select * from emp order by sal;2ã€æŒ‰ç…§éƒ¨é—¨å·å‡åºè€Œé›‡å‘˜çš„å·¥èµ„é™åºæ’åˆ—select * from emp order by deptno,sal desc;3ã€æŒ‰å¹´è–ªæ’åºselect ename, (sal+nvl(comm,0))*12 &quot;å¹´è–ª&quot; from emp order by &quot;å¹´è–ª&quot; asc;
åˆ†ç»„å‡½æ•°1ã€æ˜¾ç¤ºæ‰€æœ‰å‘˜å·¥ä¸­çš„æœ€é«˜å·¥èµ„å’Œæœ€ä½å·¥èµ„select max(sal),min(sal) from emp;
2ã€æœ€é«˜å·¥èµ„é‚£ä¸ªäººselect ename,sal from emp where sal=(select max(sal) from emp);
3ã€æ˜¾ç¤ºæ‰€æœ‰å‘˜å·¥çš„å¹³å‡å·¥èµ„å’Œå·¥èµ„æ€»å’Œselect avg(sal),sum(sal) from emp;
4ã€è®¡ç®—æ€»å…±æœ‰å¤šå°‘å‘˜å·¥select count(*) from emp;
group by1ã€æ˜¾ç¤ºæ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„å’Œæœ€é«˜å·¥èµ„select avg(sal),max(sal),deptno from emp group by deptno;
2ã€æ˜¾ç¤ºæ¯ä¸ªéƒ¨é—¨çš„æ¯ç§å²—ä½çš„å¹³å‡å·¥èµ„å’Œæœ€ä½å·¥èµ„select min(sal), avg(sal), deptno, job from emp group by deptno, job;
havingæ˜¾ç¤ºå¹³å‡å·¥èµ„ä½äº 2000çš„éƒ¨é—¨å·å’Œå®ƒçš„å¹³å‡å·¥èµ„select avg(sal), max(sal), deptno from emp group by deptno having avg(sal) &lt; 2000;
å¤šè¡¨æŸ¥è¯¢1ã€æ˜¾ç¤ºé›‡å‘˜åï¼Œé›‡å‘˜å·¥èµ„åŠæ‰€åœ¨éƒ¨é—¨çš„åå­—select e.ename, e.sal, d.dname from emp e, dept d where e.deptno = d.deptno;
2ã€æ˜¾ç¤ºéƒ¨é—¨å·ä¸º 10 çš„éƒ¨é—¨åã€å‘˜å·¥åå’Œå·¥èµ„select d.dname, e.ename, e.sal from emp e, dept d where e.deptno = d.deptno and e.deptno = 10;
3ã€æ˜¾ç¤ºå„ä¸ªå‘˜å·¥çš„å§“åï¼Œå·¥èµ„åŠå·¥èµ„çš„çº§åˆ«select e.ename, e.sal, s.grade from emp e, salgrade s where e.sal between s.losal and s.hisal;
4ã€æ˜¾ç¤ºé›‡å‘˜åï¼Œé›‡å‘˜å·¥èµ„åŠæ‰€åœ¨éƒ¨é—¨çš„åå­—ï¼Œå¹¶æŒ‰éƒ¨é—¨æ’åºselect e.ename, e.sal, d.dname from emp e, dept d where e.deptno = d.deptno order by e.deptno;
è‡ªè¿æ¥æ˜¾ç¤ºæŸä¸ªå‘˜å·¥çš„ä¸Šçº§é¢†å¯¼çš„å§“åselect worker.ename, boss.ename from emp worker,emp boss where worker.mgr = boss.empno and worker.ename = &#39;FORD&#39;;
å•è¡Œå­æŸ¥è¯¢1ã€æŸ¥è¯¢å‡ºSMITHçš„éƒ¨é—¨å·select deptno from emp where ename = &#39;SMITH&#39;;
2ã€æ˜¾ç¤ºä¸SMITHåŒéƒ¨é—¨çš„æ‰€æœ‰å‘˜å·¥select * from emp where deptno = (select deptno from emp where ename = &#39;SMITH&#39;);
å¤šè¡Œå­æŸ¥è¯¢æŸ¥è¯¢å’Œéƒ¨é—¨10çš„å·¥ä½œç›¸åŒçš„é›‡å‘˜çš„åå­—ã€å²—ä½ã€å·¥èµ„ã€éƒ¨é—¨å·select distinct job from emp where deptno = 10; select * from emp where job in (select distinct job from emp where deptno = 10);
allæ˜¾ç¤ºå·¥èµ„æ¯”éƒ¨é—¨ 30çš„æ‰€æœ‰å‘˜å·¥çš„å·¥èµ„é«˜çš„å‘˜å·¥çš„å§“åã€å·¥èµ„å’Œéƒ¨é—¨å·select ename, sal, deptno from emp where sal &gt; all (select sal from emp where deptno = 30);select ename, sal, deptno from emp where sal &gt; (select max(sal) from emp where deptno = 30);
anyæ˜¾ç¤ºå·¥èµ„æ¯”éƒ¨é—¨30çš„ä»»æ„ä¸€ä¸ªå‘˜å·¥çš„å·¥èµ„é«˜çš„å‘˜å·¥å§“åã€å·¥èµ„å’Œéƒ¨é—¨å·select ename, sal, deptno from emp where sal &gt; any (select sal from emp where deptno = 30);select ename, sal, deptno from emp where sal &gt; (select min(sal) from emp where deptno = 30);
å¤šåˆ—å­æŸ¥è¯¢æŸ¥è¯¢ä¸ SMITH çš„éƒ¨é—¨å’Œå²—ä½å®Œå…¨ç›¸åŒçš„æ‰€æœ‰é›‡å‘˜select deptno, job from emp where ename = &#39;SMITH&#39;;select * from emp where (deptno, job) = (select deptno, job from emp where ename = &#39;SMITH&#39;);
fromå­å¥ä¸­ä½¿ç”¨å­æŸ¥è¯¢æ˜¾ç¤ºé«˜äºè‡ªå·±éƒ¨é—¨å¹³å‡å·¥èµ„çš„å‘˜å·¥çš„ä¿¡æ¯select deptno, avg(sal) mysal from emp group by deptno;
select e.ename, e.deptno, e.sal, ds.mysal from emp e, (select deptno, avg(sal) mysal from emp group by deptno) ds where e.deptno = ds.deptno and e.sal &gt; ds.mysal;
]]></content>
      <categories>
        <category>engineering</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracleå®éªŒè®°å½•â€”â€”æ•°æ®åº“çš„å®‰å…¨æ€§</title>
    <url>/dev-oracle-experiment-database-safety/</url>
    <content><![CDATA[åˆ›å»ºæ•°æ®åº“è¡¨ç©ºé—´ï¼ˆæ°¸ä¹…è¡¨ç©ºé—´ï¼‰create tablespace test datafile &#x27;D:\oracle\oradata\test.dbf&#x27;size 100mautoextend on next 100mmaxsize unlimited;

åˆ›å»ºä¸´æ—¶è¡¨ç©ºé—´create temporary tablespace test_temp tempfile &#x27;D:\oracle\oradata\test_temp.dbf&#x27;size 100mautoextend on next 32mmaxsize 1024m;


åˆ›å»ºç”¨æˆ·create user user1 identified by user1default tablespace test quota 10m  on users account lock;
PS:åˆ›å»ºç”¨æˆ·æ—¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šé»˜è®¤è¡¨ç©ºé—´å’Œä¸´æ—¶è¡¨ç©ºé—´ï¼Œåˆ™è¯¥ç”¨æˆ·å°†ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„usersè¡¨ç©ºé—´ä½œä¸ºé»˜è®¤è¡¨ç©ºé—´ï¼Œè‡ªå¸¦çš„tempè¡¨ç©ºé—´ä½œä¸ºä¸´æ—¶è¡¨ç©ºé—´ã€‚
è§£é”ç”¨æˆ·alter user user1 account unlock;
æˆäºˆç³»ç»Ÿæƒé™grant create session to user1;grant create table to user1;grant unlimited tablespace to user1;
æˆäºˆå¯¹è±¡æƒé™conn scott/tiger;grant select on emp to user1;grant update(ename) on emp to user1;
åˆ›å»ºè§’è‰²Oracleä¸‰ä¸ªæ ‡å‡†è§’è‰²ï¼š1ã€Connectï¼šæ‹¥æœ‰CONNECTè§’è‰²çš„ç”¨æˆ·ï¼Œå¯ä»¥ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ä¼šè¯ï¼Œä¸å¯ä»¥åˆ›å»ºè¡¨ã€‚2ã€Resourceï¼šRESOURCEè§’è‰²å…è®¸ç”¨æˆ·åˆ›å»ºè¡¨ã€è¿‡ç¨‹ã€è§¦å‘å™¨ã€åºåˆ—ç­‰æƒé™ã€‚3ã€DBAï¼šDBAè§’è‰²æ‹¥æœ‰æ‰€æœ‰çš„ç³»ç»Ÿæƒé™â€”â€”åŒ…æ‹¬æ— é™åˆ¶çš„ç©ºé—´é™é¢å’Œç»™å…¶ä»–ç”¨æˆ·æˆäºˆå„ç§æƒé™çš„èƒ½åŠ›ã€‚PSï¼šå¦‚æœæ–°åˆ›å»ºçš„ç”¨æˆ·éœ€è¦ç™»å½•åˆ°OEMï¼Œåˆ™å¿…é¡»ç»™ç”¨æˆ·æˆäºˆselect_catalog_roleè§’è‰²åæ‰å¯ä»¥ç™»å½•ï¼Œå¦åˆ™åªæœ‰ç®¡ç†å‘˜èº«ä»½çš„ç”¨æˆ·æ‰å¯ä»¥ç™»å½•åˆ°OEMã€‚
conn system/voidkingcreate role myrole;grant create session to myrole;grant create table to myrole;grant myrole to user1;
PSï¼šæœ‰äº›ç³»ç»Ÿæƒé™æ¯”è¾ƒç‰¹æ®Šï¼Œæ˜¯ä¸èƒ½æ”¾åˆ°è§’è‰²ä¸­çš„ï¼Œå¦‚ï¼šunlimited tablaspaceï¼›è¿™äº›æƒé™å¾ˆé«˜ã€å¾ˆç‰¹æ®Šï¼Œå¿…é¡»ç›´æ¥èµ‹äºˆç»™ç”¨æˆ·ã€‚
å›æ”¶ç”¨æˆ·çš„æƒé™revoke create table from user1;
åˆ é™¤ç”¨æˆ·drop user user1;drop user user1 cascade;//ç”¨æˆ·å¦‚æœæœ‰å…¶ä»–å¯¹è±¡ï¼ŒåŠ ä¸Šcascadeè¿åŒè¯¥ç”¨æˆ·çš„æ‰€æœ‰å¯¹è±¡ä¸€å¹¶åˆ é™¤ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracleå®éªŒè®°å½•â€”â€”åˆ›å»ºå’Œç®¡ç†è¡¨ç©ºé—´</title>
    <url>/dev-oracle-experiment-create-and-manage-table-space/</url>
    <content><![CDATA[åˆ›å»ºä¸´æ—¶è¡¨ç©ºé—´create temporary tablespace user_temp  tempfile &#x27;D:\oracle\oradata\user_temp.dbf&#x27; size 10m  autoextend on  next 5m maxsize 50m  extent management local;  

PSï¼šä¸´æ—¶è¡¨ç©ºé—´ä¸»è¦ç”¨äºå­˜å‚¨ç”¨æˆ·åœ¨æ‰§è¡Œorder byç­‰è¯­å¥è¿›è¡Œæ’åºæˆ–æ±‡æ€»æ—¶äº§ç”Ÿçš„ä¸´æ—¶æ•°æ®ï¼Œå®ƒæ˜¯æ‰€æœ‰ç”¨æˆ·å…¬æœ‰çš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ç”¨æˆ·éƒ½ä½¿ç”¨tempä½œä¸ºä¸´æ—¶è¡¨ç©ºé—´ã€‚ä½†æ˜¯ä¹Ÿå…è®¸ä½¿ç”¨å…¶ä»–è¡¨ç©ºé—´ä½œä¸ºä¸´æ—¶è¡¨ç©ºé—´ï¼Œè¿™éœ€è¦åœ¨åˆ›å»ºç”¨æˆ·æ—¶è¿›è¡ŒæŒ‡å®šã€‚


åˆ›å»ºæ•°æ®è¡¨ç©ºé—´åˆ›å»ºæ•°æ®è¡¨ç©ºé—´ user_data
create tablespace user_data  datafile &#x27;D:\oracle\oradata\user_data.dbf&#x27; logging size 10m  autoextend on  next 5m maxsize 50m  extent management local; 

åˆ›å»ºç”¨æˆ·å¹¶æŒ‡å®šè¡¨ç©ºé—´åˆ›å»ºç”¨æˆ· voidkingï¼Œå¯†ç ä¸º voidkingï¼ŒæŒ‡å®šè¡¨ç©ºé—´ä¸ºuser_data 
create user voidking identified by voidkingdefault tablespace user_data  temporary tablespace user_temp; 

ä¿®æ”¹ç”¨æˆ·çš„é»˜è®¤è¡¨ç©ºé—´ä¿®æ”¹ç”¨æˆ· voidking çš„é»˜è®¤è¡¨ç©ºé—´ä¸º user_dataalter user voidking default tablespace user_data;
ç»™ç”¨æˆ·æˆäºˆæƒé™ç»™ voidking ç”¨æˆ·æˆæƒgrant connect,resource,dba to voidking;
é‡å‘½åè¡¨ç©ºé—´é‡å‘½åè¡¨ç©ºé—´ user_data ä¸º new_user_dataalter tablespace user_data rename to new_user_data;
å¢åŠ æ–°çš„æ•°æ®æ–‡ä»¶åœ¨ user_data è¡¨ç©ºé—´ä¸‹æ–°å¢æ•°æ®æ–‡ä»¶
alter tablespace user_dataadd datafile &#x27;D:\oracle\oradata\user_data2.dbf&#x27;size 2m autoextend on next 1m maxsize unlimited;

åˆ é™¤è¡¨ç©ºé—´çš„æ•°æ®æ–‡ä»¶åˆ é™¤ user_data è¡¨ç©ºé—´ä¸‹çš„æ•°æ®æ–‡ä»¶alter tablespace user_data drop datafile &#39;D:\oracle\oradata\user_data2.dbf&#39;;
è®¾ç½®æ•°æ®æ–‡ä»¶çš„çŠ¶æ€æ•°æ®æ–‡ä»¶ä¸»è¦æœ‰ä¸‰ç§çŠ¶æ€ï¼šonlineã€offlineã€offline dropã€‚alter database datafile &#39;D:\oracle\oradata\user_data.dbf&#39; online;
åˆ é™¤è¡¨ç©ºé—´//åˆ é™¤è¡¨ç©ºé—´drop tablespace user_data including contents and datafiles;//æ— æ³•åˆ é™¤ï¼Œè¡¨ç©ºé—´è¢«å ç”¨drop tablespace user_temp including contents and datafiles;//æŸ¥çœ‹user_tempæ˜¯ä¸æ˜¯æŸäº›ç”¨æˆ·çš„é»˜è®¤ä¸´æ—¶è¡¨ç©ºé—´select username,temporary_tablespace from dba_users;alter user voidking temporary tablespace user_temp2;alter database default temporary tablespace user_temp2;//æˆåŠŸåˆ é™¤drop tablespace user_temp including contents and datafiles;


è®¾ç½®é»˜è®¤è¡¨ç©ºé—´//è®¾ç½®é»˜è®¤ä¸´æ—¶è¡¨ç©ºé—´alter database default temporary tablespace user_temp;//è®¾ç½®é»˜è®¤æ°¸ä¹…è¡¨ç©ºé—´alter database default tablespace user_data;

æŸ¥çœ‹è¡¨ç©ºé—´1ã€æŸ¥çœ‹è¡¨ç©ºé—´çš„åç§°å’Œå¤§å°
SELECT t.tablespace_name, round(SUM(bytes / (1024 * 1024)), 0) ts_size FROM dba_tablespaces t, dba_data_files d WHERE t.tablespace_name = d.tablespace_name GROUP BY t.tablespace_name; // orselect tablespace_name ,sum(bytes) / 1024 / 1024 as MBã€€from dba_data_files group by tablespace_name;


2ã€æŸ¥çœ‹è¡¨ç©ºé—´ç‰©ç†æ–‡ä»¶çš„åç§°åŠå¤§å° 
SELECT tablespace_name, file_id, file_name, round(bytes / (1024 * 1024), 0) total_space FROM dba_data_files ORDER BY tablespace_name; 

3ã€æŸ¥çœ‹æ‰€æœ‰è¡¨ç©ºé—´å¯¹åº”çš„æ–‡ä»¶
select tablespace_name,file_name from dba_data_files;

4ã€æŸ¥çœ‹å›æ»šæ®µåç§°å’Œå¤§å°
SELECT segment_name, tablespace_name, r.status, (initial_extent / 1024) initialextent, (next_extent / 1024) nextextent, max_extents, v.curext curextent FROM dba_rollback_segs r, v$rollstat v WHERE r.segment_id = v.usn(+) ORDER BY segment_name; 

5ã€æŸ¥çœ‹æ§åˆ¶æ–‡ä»¶
SELECT NAME FROM v$controlfile; 

6ã€æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶
SELECT MEMBER FROM v$logfile; 

7ã€æŸ¥çœ‹è¡¨ç©ºé—´çš„ä½¿ç”¨æƒ…å†µ 
SELECT SUM(bytes) / (1024 * 1024) AS free_space, tablespace_name FROM dba_free_space GROUP BY tablespace_name; SELECT a.tablespace_name, a.bytes total, b.bytes used, c.bytes free, (b.bytes * 100) / a.bytes &quot;% USED &quot;, (c.bytes * 100) / a.bytes &quot;% FREE &quot; FROM sys.sm$ts_avail a, sys.sm$ts_used b, sys.sm$ts_free c WHERE a.tablespace_name = b.tablespace_name AND a.tablespace_name = c.tablespace_name; 

8ã€æŸ¥çœ‹æ•°æ®åº“åº“å¯¹è±¡
SELECT owner, object_type, status, COUNT(*) count# FROM all_objects GROUP BY owner, object_type, status; 

9ã€æŸ¥çœ‹æ•°æ®åº“çš„ç‰ˆæœ¬
SELECT version FROM product_component_version WHERE substr(product, 1, 6) = &#x27;Oracle&#x27;; 

10ã€æŸ¥çœ‹æ•°æ®åº“çš„åˆ›å»ºæ—¥æœŸå’Œå½’æ¡£æ–¹å¼ 
SELECT created, log_mode, log_mode FROM v$database; 

ä¿®æ”¹æ•°æ®æ–‡ä»¶å¤§å°ä¿®æ”¹æ•°æ®æ–‡ä»¶å¤§å°ä¸º 20Malter database datafile &#39;D:\oracle\oradata\user_data.dbf&#39;  resize 20m;
ä½¿ç”¨OEMç®¡ç†è¡¨ç©ºé—´å¼€å§‹ï¼Œæ‰€æœ‰ç¨‹åºï¼ŒOracle-OraDb11g_home1ï¼ŒDatabase Control-orclã€‚ä½¿ç”¨sysç™»é™†ï¼Œè¿æ¥èº«ä»½sysdbaã€‚æœåŠ¡å™¨ï¼Œå­˜å‚¨ï¼Œè¡¨ç©ºé—´ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracleå®éªŒè®°å½•â€”â€”åˆ©ç”¨SQLå‘½ä»¤åˆ›å»ºè¡¨</title>
    <url>/dev-oracle-experiment-sql-commond-create-table/</url>
    <content><![CDATA[åˆ›å»ºè¡¨create table userbase(username varchar2(8),passwd varchar2(16));
æ’å…¥ä¸€è¡Œinsert into userbase values(&#39;voidking&#39;,&#39;voidking&#39;);
æŸ¥çœ‹æ•°æ®select * from userbase;


ä¿®æ”¹è¡¨1ã€è¿½åŠ æ–°çš„åˆ—alter table userbase add(realname varchar2(8));
2ã€ä¿®æ”¹ç°æœ‰çš„åˆ—ã€ä¸ºæ–°è¿½åŠ çš„åˆ—å®šä¹‰é»˜è®¤å€¼alter table userbase modify(realname varchar2(8) default &#39;haojin&#39;);insert into userbase(username, passwd) values(&#39;voidking&#39;,&#39;voidking&#39;);select * from userbase;
3ã€åˆ é™¤ä¸€ä¸ªåˆ—alter table userbase drop column realname;
4ã€ç¦ç”¨åˆ—alter table userbase set unused column passwd;
5ã€é‡å‘½ååˆ—alter table userbase rename column username to name;
æ¸…ç©ºè¡¨truncate table userbase;
åˆ é™¤è¡¨drop table userbase;
æ·»åŠ æ³¨é‡Šcomment on table userbase is &#39;è¿™å¼ è¡¨ç”¨æ¥æµ‹è¯•&#39;;
å®šä¹‰å’Œç®¡ç†æ•°æ®å®Œæ•´æ€§çº¦æŸ1ã€éç©ºçº¦æŸcreate table userbase(username varchar2(8) not null,passwd varchar2(16));
2ã€ä¸»é”®çº¦æŸcreate table userbase(username varchar2(8) primary key,passwd varchar2(16));alter table userbase add constraint primary_key primary key(username);
3ã€å”¯ä¸€æ€§çº¦æŸcreate table userbase(username varchar2(8) primary key not null ,passwd varchar2(16) unique);alter table userbase add constraint unique_value unique(passwd);
4ã€å¤–é”®çº¦æŸcreate table userdetail(username varchar2(8) primary key not null ,realname varchar2(8));alter table userbase add constraint fk_username foreign key(username) references userdetail(username);
insert into userdetail values(&#39;voidking&#39;,&#39;haojin&#39;);insert into userbase values(&#39;voidking&#39;,&#39;voidking&#39;);
delete from userbase where username=&#39;voidking&#39;;//ä¸ä¼šåˆ é™¤userdetailçš„å†…å®¹delete from userdetail where username=&#39;voidking&#39;;//çº¦æŸé™åˆ¶ï¼Œæ— æ³•åˆ é™¤
alter table userbase add constraint fk_username foreign key(username) references userdetail(username) on delete cascade;delete from userbase where username=&#39;voidking&#39;;//ä¸ä¼šåˆ é™¤userdetailçš„å†…å®¹delete from userdetail where username=&#39;voidking&#39;;//userdetailå’Œuserbaseé‡Œçš„å†…å®¹éƒ½è¢«åˆ é™¤äº†
5ã€æ£€æŸ¥çº¦æŸalter table userdetail add(sex varchar(4) default &#39;ç”·&#39; check(sex=&#39;ç”·&#39; or sex=&#39;å¥³&#39;));alter table userdetail add(sex varchar(4));alter table userdetail modify(sex check(sex=&#39;ç”·&#39; or sex=&#39;å¥³&#39;));
6ã€ç¦ç”¨å’Œæ¿€æ´»çº¦æŸinsert into userbase values(&#39;test&#39;,&#39;voidking&#39;);//æ‰§è¡Œå¤±è´¥alter table userbase disable constraint fk_username;insert into userbase values(&#39;test&#39;,&#39;voidking&#39;);//æ‰§è¡ŒæˆåŠŸalter table userbase enable constraint fk_username;
7ã€åˆ é™¤çº¦æŸalter table userdetail drop primary key;//åˆ é™¤å¤±è´¥alter table userdetail drop primary key cascade;//åˆ é™¤æˆåŠŸï¼ŒåŒæ—¶åˆ é™¤äº†fk_usernamealter table userbase disable constraint fk_username;
8ã€æŸ¥çœ‹çº¦æŸä¿¡æ¯select constraint_name,constraint_type,status,validated from user_constraints where table_name=&#39;USERBASE&#39;;select * from user_cons_columns where table_name=&#39;USERBASE&#39;;
åœ¨sqldeveloperä¸­åˆ›å»ºè¡¨å¼€å§‹ï¼Œæ‰€æœ‰ç¨‹åºï¼ŒOracle-OraDb11g_home1ï¼Œåº”ç”¨ç¨‹åºå¼€å‘ï¼ŒSQL Developerã€‚
åœ¨OEMä¸­åˆ›å»ºè¡¨å¼€å§‹ï¼Œæ‰€æœ‰ç¨‹åºï¼ŒOracle-OraDb11g_home1ï¼ŒDatabase Control-orclã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>64ä½Oracle11gR2æ— æ³•å¯åŠ¨sqldeveloper</title>
    <url>/dev-64bit-oracle-r2-cannot-start-sqldeveloper/</url>
    <content><![CDATA[è¯¦ç»†é—®é¢˜æè¿°å®‰è£…å¥½Oracle11gR2ä¹‹åï¼Œå¯åŠ¨SOL Developerï¼šå¼€å§‹ï¼Œæ‰€æœ‰ç¨‹åºï¼ŒOracle-OraDb11g_home1ï¼Œåº”ç”¨ç¨‹åºå¼€å‘ï¼ŒSQL Developerã€‚ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œéœ€è¦é€‰æ‹©ä¸Oracleé…å¥—å®‰è£…çš„jave.exeçš„è·¯å¾„ï¼ŒéƒåŒå­¦çš„å®‰è£…è·¯å¾„ä¸ºD:\Oracle\dbhome\jdk\bin\java.exeã€‚æ­¤æ—¶ï¼Œé”™è¯¯å‡ºç°äº†ï¼ŒUnable to find a java Virtual Machineto point to a location of a java virtual machine,please refer to the oracle9i Jdeveloper Install guide(jdev\install.html)


è§£å†³æ€è·¯ç»ç™¾åº¦ï¼ŒåŸæ¥Oracleåœ¨åˆ¶é€ 64ä½ç‰ˆçš„æ—¶å€™æ²¡æ³¨æ„Oracle11gR2æ‰€å¸¦çš„SQL Developeræ˜¯1.5.5.59.69ç‰ˆï¼Œä¸æ”¯æŒ64ä½ç‰ˆçš„JDKï¼Œæ°å¥½64ä½Oracleå¸¦çš„JDKæ˜¯64ä½çš„ã€‚
çŸ¥é“äº†è¿™ä¸ªå°±å¥½åŠäº†ï¼Œä¸‹è½½å®‰è£…ä¸€ä¸ª32ä½çš„jdkï¼Œé‡æ–°è®¾ç½®ä¸€ä¸‹è·¯å¾„ã€‚
æˆ‘çš„å®é™…æ“ä½œåœ¨ä½¿ç”¨32ä½Oracleçš„å°ä¼™ä¼´é‚£é‡Œï¼Œä»dbhomeç›®å½•ä¸‹ï¼ŒæŠŠæ•´ä¸ªjdkæ–‡ä»¶å¤¹æ‹·è´å‡ºæ¥ï¼Œé‡å‘½åä¸ºjdk32ã€‚æ‹·è´åˆ°è‡ªå·±ç”µè„‘ä¸Šçš„dbhomeæ–‡ä»¶å¤¹ä¸‹ã€‚ç„¶åï¼Œæ‰“å¼€sqldeveloper.confï¼ˆè·¯å¾„ä¸ºD:\Oracle\dbhome\sqldeveloper\sqldeveloper\bin\sqldeveloper.confï¼‰ï¼Œä¿®æ”¹SetJavaHome D:\Oracle\dbhome\jdkï¼Œä¸ºSetJavaHome D:\Oracle\dbhome\jdk32ã€‚è‡³æ­¤ï¼ŒSQL Developerå·²ç»å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚
ä½†æ˜¯ï¼Œåˆå§‹çš„å¼€å§‹èœå•ä¸­çš„SQL Developerï¼Œé“¾æ¥åˆ°çš„æ˜¯ä¸€ä¸ªbatæ–‡ä»¶ï¼Œè¿™ä¸ªbatæ–‡ä»¶ï¼Œåˆæ‰“å¼€äº†sqldeveloper.exeã€‚éƒåŒå­¦çªƒä»¥ä¸ºæ­¤æ­¥ç”»è›‡æ·»è¶³ï¼Œè€Œä¸”æ‰“å¼€äº†ä¸¤ä¸ªçª—å£ï¼Œè®©æˆ‘å¾ˆä¸çˆ½ã€‚äºæ˜¯ï¼ŒéƒåŒå­¦æœæ–­åˆ æ‰äº†å¼€å§‹èœå•ä¸­çš„SQL Developerè¿™ä¸ªè¶…é“¾ï¼Œç„¶åå³å‡»Oracle-OraDb11g_home1ä¸‹çš„åº”ç”¨ç¨‹åºå¼€å‘ï¼Œå±æ€§ï¼Œå¤åˆ¶ä¸‹ä½ç½®ï¼Œæ‰“å¼€æ­¤ä½ç½®ï¼ˆC:\ProgramData\Microsoft\Windows\Start Menu\Programs\Oracle - OraDb11g_home1ï¼‰ï¼Œè¿›å…¥åº”ç”¨ç¨‹åºå¼€å‘æ–‡ä»¶å¤¹ã€‚ç„¶åï¼ŒæŠŠsqldeveloper.exeçš„å¿«æ·æ–¹å¼æ‹·è´è¿›åˆšæ‰æ‰“å¼€çš„åº”ç”¨ç¨‹åºå¼€å‘æ–‡ä»¶å¤¹ã€‚
é¢˜å¤–è®°Oracle11gçš„å®‰è£…åŒ…å‹ç¼©æ–‡ä»¶æœ‰ä¸¤ä¸ªï¼Œwin64_11gR2_database_1of2.zipå’Œwin64_11gR2_database_2of2.zipï¼Œå®‰è£…æ—¶ï¼Œè¦æŠŠå®ƒä»¬è§£å‹åˆ°åŒä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚è§£å‹å®Œæˆï¼Œç‚¹å‡»setup.exeï¼Œæ ¹æ®å–œå¥½è®¾ç½®ä¸€ä¸‹ï¼Œç­‰å¾…ä¸€ä¼šå„¿å°±å®‰è£…æˆåŠŸäº†ã€‚
å½“å¹´ï¼Œç¬¬ä¸€æ¬¡æ¥è§¦Oracleï¼Œä½¿ç”¨çš„æ˜¯Oracle10gï¼Œå„ç§å®‰è£…æŠ¥é”™ï¼Œæ³ªæµæ»¡é¢ã€‚å¹´è½»ä¸æ‡‚äº‹ï¼Œä¸æ­¢å®‰è£…äº†databaseï¼Œè¿˜å®‰è£…äº†clientã€‚æƒ³æƒ³çœŸæ˜¯å¤šä½™ï¼Œç”¨æ¥å­¦ä¹ ï¼Œå®‰è£…databaseå°±å¤Ÿäº†ï¼Œå’±åˆä¸è¿æ¥è¿œç¨‹æœåŠ¡å™¨ã€‚å“ªæ€•è¿æ¥è¿œç¨‹æœåŠ¡å™¨ï¼Œä½¿ç”¨databaseé‡Œçš„å·¥å…·ä¹Ÿè¶³å¤Ÿäº†ï¼Œæ¯”å¦‚sqldeveloperã€‚å½“å¹´ï¼Œè¿˜ç‹¬ç«‹å®‰è£…äº†ä¸€æ¬¾PL/SQL Developerï¼Œè§£å†³å®Œå„ç§æŠ¥é”™ï¼Œå¾®å¾®ä¸€ç¬‘ï¼Œè¿™ä¸ªå·¥å…·çœŸä¸é”™ï¼å¦‚ä»Šï¼ŒéƒåŒå­¦ä¼šæ¯«ä¸çŠ¹è±«åœ°ä¼šé€‰æ‹©databaseé‡Œçš„è‡ªå¸¦å·¥å…·ï¼ä¸€è¨€ä»¥è”½ä¹‹ï¼ŒOracleçš„å®‰è£…å’Œä½¿ç”¨æ›´ç®€å•äº†ã€‚ï¼ˆä¾§é¢åæ˜ äº†éƒåŒå­¦å¯¹äºOracleçš„ä½¿ç”¨æ›´åŠ å¾—å¿ƒåº”æ‰‹ï¼Œå“‡å“ˆå“ˆå“ˆï¼‰
å‚è€ƒæ–‡æ¡£http://caogenit.com/caogenxueyuan/yingyongfangxiang/shujuku/2343.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracleå®éªŒè®°å½•â€”â€”æ•°æ®çš„å¯¼å…¥å’Œå¯¼å‡º</title>
    <url>/dev-oracle-experiment-data-in-and-out/</url>
    <content><![CDATA[ä»¥ä¸‹å‘½ä»¤ï¼Œéƒ½æ˜¯åœ¨æ“ä½œç³»ç»Ÿå‘½ä»¤è¡Œä¸­ä½¿ç”¨ã€‚
EXPæ•°æ®å¯¼å‡º1ã€fullæ–¹å¼ï¼šå¯¼å‡ºæ•´ä¸ªæ•°æ®åº“exp system/Admin123 file=d:/test_1.dmp full=y
2ã€owneræ–¹å¼ï¼šå¯¼å‡ºæŒ‡å®šçš„ç”¨æˆ·æ¨¡å¼exp scott/tiger file=d:/test_2.dmp owner=scott
3ã€tablesæ–¹å¼ï¼šå¯¼å‡ºæŒ‡å®šçš„è¡¨exp scott/tiger file=d:/test_3.dmp tables=(emp,dept)

IMPæ•°æ®å¯¼å…¥1ã€fullæ–¹å¼ï¼šå¯¼å…¥æ•´ä¸ªæ•°æ®åº“imp system/Admin123 file=d:/test_1.dmp full=y
2ã€owneræ–¹å¼ï¼šå¯¼å…¥æŒ‡å®šçš„ç”¨æˆ·æ¨¡å¼imp scott/tiger file=d:/test_2.dmp owner=scott
3ã€tablesæ–¹å¼ï¼šå¯¼å…¥æŒ‡å®šçš„è¡¨imp scott/tiger file=d:/test_3.dmp tables=emp,dept
EXPDPæ•°æ®æ³µå¯¼å‡ºæ•°æ®æ³µå·¥å…·å¯¼å‡ºçš„æ­¥éª¤1ã€å¯åŠ¨sql plusï¼Œä»¥system/manager ç™»é™†conn system/manager as sysdba
2ã€åˆ›å»ºç›®å½•å¯¹è±¡ï¼ˆTipsï¼šæ‰‹åŠ¨åœ¨Dç›˜ä¸‹åˆ›å»ºä¸€ä¸ªtempæ–‡ä»¶å¤¹ï¼‰create directory mypump as &#39;D:\temp&#39;;
3ã€æˆæƒgrant read,write on directory mypump to scott;
4ã€åœ¨æ“ä½œç³»ç»Ÿå‘½ä»¤è¡Œä¸­ï¼Œæ‰§è¡Œå¯¼å‡ºexpdp scott/tiger schemas=scott directory=mypump dumpfile=expdp_test1.dmp;
æ•°æ®æ³µå¯¼å‡ºçš„å„ç§æ¨¡å¼1ã€tablesï¼šæŒ‡å®šè¡¨æ¨¡å¼å¯¼å‡ºexpdp scott/tiger tables=emp,dept directory=mypump dumpfile=expdp_test2.dmp
2ã€æŒ‰æ¡ä»¶æŸ¥è¯¢å¯¼å‡ºexpdp scott/tiger tables=emp directory=mypump dumpfile=exopdp_test3.dmp query=&#39;&quot;where sal &lt; 2000&quot;&#39;
3ã€tablespacesï¼šæŒ‡å®šè¦å¯¼å‡ºè¡¨ç©ºé—´åˆ—è¡¨expdp system/Admin123 directory=mypump dumpfile=expdp_tablespace.dmp tablespaces=users
4ã€schemasï¼šæŒ‡å®šç”¨æˆ·æ¨¡å¼å¯¼å‡ºexpdp scott/tiger schemas=scott directory=mypump dumpfile=expdp_test1.dmp
5ã€fullï¼šæŒ‡å®šæ•´ä¸ªæ•°æ®åº“æ¨¡å¼å¯¼å‡ºexpdp system/Admin123 directory=mypump dumpfile=full.dmp full=y
6ã€ä½¿ç”¨excludeï¼Œincludeå¯¼å‡ºæ•°æ®ä½¿ç”¨includeé€‰é¡¹ï¼Œå¯¼å‡ºç”¨æˆ·ä¸­åŒ…æ‹¬æŒ‡å®šç±»å‹çš„æŒ‡å®šå¯¹è±¡å¯¼å‡ºscottç”¨æˆ·ä¸‹ä»¥Bå¼€å¤´çš„æ‰€æœ‰è¡¨expdp scott/tiger directory=mypump dumpfile=include_1.dmp include=table:\&quot;like\&#39;B%\&#39;\&quot;
å¯¼å‡ºscottç”¨æˆ·ä¸‹çš„æ‰€æœ‰å­˜å‚¨è¿‡ç¨‹expdp scott/tiger directory=mypump dumpfile=include_2.dmp schemas=scott include=procedure
excludeå¯¼å‡ºç”¨æˆ·ä¸­æ’é™¤æŒ‡å®šç±»å‹çš„æŒ‡å®šå¯¹è±¡å¯¼å‡ºscottç”¨æˆ·ä¸‹é™¤viewç±»å‹ä»¥å¤–çš„æ‰€æœ‰å¯¹è±¡expdp scott/tiger directory=mypump dumpfile=exclude_1.dmp schemas=scott exclude=view
IMPDPæ•°æ®æ³µå¯¼å…¥1ã€tablesï¼šæŒ‡å®šè¡¨æ¨¡å¼å¯¼å…¥impdp scott/tiger tables=emp,dept directory=mypump dumpfile=expdp_test2.dmp
2ã€schemasï¼šæŒ‡å®šç”¨æˆ·æ¨¡å¼å¯¼å…¥impdp scott/tiger schemas=scott directory=mypump dumpfile=expdp_test1.dmp
]]></content>
      <categories>
        <category>engineering</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracleå®éªŒè®°å½•â€”â€”åŸºæœ¬å‘½ä»¤</title>
    <url>/dev-oracle-experiment-base-command/</url>
    <content><![CDATA[1ã€æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯è¡¨empçš„å†…å®¹select * from emp;
2ã€å°†sqlå‘½ä»¤å­˜å…¥emp.sqlæ–‡ä»¶save d:\emp.sql
3ã€æ¸…ç©ºç¼“å­˜åŒºdel
4ã€è°ƒå…¥emp.sqlæ–‡ä»¶get d:\emp.sql
5ã€å†æ¬¡æ‰§è¡ŒåŒæ ·çš„sqlå‘½ä»¤@ d:\emp.sqlæˆ–è€…start d:\emp.sql


6ã€åˆ©ç”¨æ›¿æ¢å˜é‡æ¥å—é›‡å‘˜çš„å§“åselect * from emp where ename=&amp;cont_name;
7ã€åˆ©ç”¨æ›¿æ¢å˜é‡æ¥å—é›‡å‘˜çš„é›‡ä½£æ—¥æœŸï¼ˆæ ¼å¼ï¼š03-12æœˆ-81ï¼‰select * from emp where hiredate=&#39;&amp;d&#39;;
8ã€å®šä¹‰æ›¿æ¢å˜é‡ï¼Œåœ¨sqlè¯­å¥é‡Œä½¿ç”¨è¯¥æ›¿æ¢å˜é‡ï¼Œä½¿ç”¨å®Œåå°†è¯¥å˜é‡åˆ é™¤define salary=1800;select * from emp where sal&gt;&amp;salary;undefine salary
9ã€å°†æŸ¥è¯¢ç»“æœå‡è„±æœºè¾“å‡ºåˆ°æ–‡ä»¶d:\spool_temp.txtä¸­spool d:\spool_temp.txtselect * from emp;select * from dept;spool off
10ã€ä¸ºåˆ—deptnoè®¾ç½®æ ‡é¢˜ä¸ºâ€œéƒ¨é—¨ä»£ç â€column deptno heading &#39;éƒ¨é—¨ä»£ç &#39;select * from emp;
11ã€ä¸ºsalåˆ—å®šåˆ¶æ ¼å¼ã€‚è¦æ±‚åœ¨æ¯ä¸ªå€¼å‰åŠ $ç¬¦å·ä½œä¸ºå‰ç¼€ï¼Œå¹¶ä¿ç•™ä¸€ä¸ªå°æ•°ä½column sal format $99,999.0select * from emp;
12ã€ç”¨â€œ/â€æ›¿æ¢æ‰€æœ‰ç©ºå€¼column comm null &#39;/&#39;select * from emp;
13ã€æ˜¾ç¤ºæ‰€æœ‰åˆ—çš„å½“å‰è®¾ç½®column
14ã€æ¸…é™¤æ‰€æœ‰åˆ—çš„è®¾ç½®clear column
15ã€é™åˆ¶é‡å¤è¡Œselect * from emp;select * from emp order by deptno;
å¯èƒ½æœ‰è®¸å¤šé›‡å‘˜å±äºåŒä¸€ä¸ªéƒ¨é—¨ï¼Œå› æ­¤åœ¨DepartmentIDåˆ—å°†æœ‰é‡å¤å€¼å‡ºç°break on deptno;select * from emp order by deptno;
æ˜¾ç¤ºbreakçš„è®¾ç½®break
æ¸…é™¤breakçš„è®¾ç½®clear break
]]></content>
      <categories>
        <category>engineering</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracleå®éªŒè®°å½•â€”â€”ç™»é™†è§£é”</title>
    <url>/dev-oralce-experiment-login-unlock/</url>
    <content><![CDATA[1ã€ä½¿ç”¨SYSTEMç™»é™†SQL Plus
2ã€é€šè¿‡æ•°æ®å­—å…¸dba_usersï¼ŒæŸ¥çœ‹Oracleè´¦æˆ·çš„é”å®šçŠ¶æ€select username,account_status from dba_users;
3ã€ä¸ºscottè´¦æˆ·è§£é”alter user scott account unlock;
4ã€ä¸ºscottè´¦æˆ·è®¾ç½®å£ä»¤alter user scott identified by tiger;
5ã€æŸ¥çœ‹ç°åœ¨scottçš„çŠ¶æ€select username,account_status from dba_users where username=&#39;SCOTT&#39;;
6ã€åœ¨SQL Plusä¸­ä½¿ç”¨scottè´¦æˆ·è¿æ¥æ•°æ®åº“conn scott/tiger;
7ã€æ˜¾ç¤ºå½“å‰ç”¨æˆ·show user;
8ã€æŸ¥çœ‹è¡¨ä¿¡æ¯select empno,ename,job,sal from emp where sal&lt;2500;
9ã€åˆ—å‡ºç¼“å†²åŒºå†…å®¹listæˆ–è€…l
10ã€ç¼–è¾‘å½“å‰è¡Œchange /epno/empno

11ã€è¿è¡Œå½“å‰å‘½ä»¤runæˆ–è€…/
12ã€å¢åŠ ä¸€è¡Œinputorder by sal
13ã€åœ¨ä¸€è¡Œä¸Šå¢åŠ å†…å®¹append  descæ³¨æ„ï¼Œä¸¤ä¸ªå•è¯ä¹‹é—´æœ‰ä¸¤ä¸ªç©ºæ ¼
14ã€åˆ é™¤ä¸€è¡Œdel
15ã€ç”¨ç³»ç»Ÿç¼–è¾‘å™¨ç¼–è¾‘å‘½ä»¤edit
16ã€ä¿å­˜å‘½ä»¤ï¼ˆsqlæ–‡ä»¶ï¼‰save d:\hello.sql
17ã€è¿è¡Œå‘½ä»¤ï¼ˆsqlæ–‡ä»¶ï¼‰start d:\hello.sqlæˆ–è€…@ d:\hello.sql
18ã€æ¸…ç©ºç¼“å†²åŒºclear buffer
19ã€åˆ—å‡ºè¡¨ç»“æ„desc emp
]]></content>
      <categories>
        <category>engineering</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ¡å†…ç½‘æœåŠ¡å™¨IPé—®é¢˜</title>
    <url>/dev-school-network-host-ip/</url>
    <content><![CDATA[å¸®åŠ©å¶è€å¸ˆåšç²¾å“è¯¾ç¨‹ç½‘ç«™çš„æ—¶å€™ï¼Œä½¿ç”¨è¿‡ä¸¤ä¸ªæœåŠ¡å™¨ï¼ŒIPå…ˆååˆ†åˆ«æ˜¯202.119.160.48å’Œ202.119.160.253ã€‚ä¸æ­¢å¦‚æ­¤ï¼Œå­¦æ ¡é‡Œè¿˜æœ‰å¾ˆå¤šæœåŠ¡å™¨ï¼Œæ¯ä¸ªéƒ½æœ‰ä¸åŒçš„IPï¼Œè€Œä¸”éƒ½å¯ä»¥é€šè¿‡å…¬ç½‘è®¿é—®ï¼
è¿™é‡Œçš„é—®é¢˜æ˜¯ï¼šå…¬ç½‘IPåœ°å€ä¸æ˜¯å¾ˆç´§å¼ å—ï¼Ÿä¸ºå•¥èƒ½åˆ†åˆ°é‚£ä¹ˆå¤šå…¬ç½‘IPï¼Ÿæˆ–è€…æ˜¯ä½¿ç”¨äº†ä»€ä¹ˆæŠ€æœ¯è®©IPåœ°å€å¢åŠ ï¼Ÿ
è§£ç­”ï¼šæ²¡æœ‰ä½¿ç”¨å•¥é«˜æ·±çš„æŠ€æœ¯ï¼ŒIPåœ°å€å¹¶æ²¡æœ‰æƒ³è±¡çš„é‚£ä¹ˆç´§å¼ ï¼Œè¿™äº›ç¡®å®éƒ½æ˜¯å…¬ç½‘IPã€‚å®½å¸¦æ¥å…¥æ—¶å¯ä»¥ç”³è¯·ç‹¬ç«‹IPï¼Œåœ¨é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰äº‘å‚å•†è´­ä¹°æœåŠ¡å™¨æ—¶ä¹Ÿå¯ä»¥åŒæ—¶è´­ä¹°å…¬ç½‘IPã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxçš„12ä¸ªé—®é¢˜</title>
    <url>/dev-linux-12-question/</url>
    <content><![CDATA[é—®é¢˜11.ä¸‹è½½linux2.6.18çš„å†…æ ¸2.å®‰è£…é˜…è¯»å†…æ ¸çš„è½¯ä»¶soure insight3.ç¼–è¯‘å†…æ ¸4.å†™æ€»ç»“è®²è®²ä¸‹è½½ç¼–è¯‘è¿‡ç¨‹çš„é—®é¢˜å’Œè§£å†³æ–¹å¼ã€‚
é—®é¢˜2ä»å†…æ ¸ä¸­å¯»æ‰¾å„ç§æ•°æ®ç»“æ„çš„åº”ç”¨ï¼Œæ¯ä¸ªæ‰¾ä¸€ä¸ªä¾‹å­ã€‚ä»å†…æ ¸ä¸­å¯»æ‰¾åŒæ­¥æœºåˆ¶çš„åº”ç”¨ï¼Œæ¯ä¸ªæ‰¾ä¸€ä¸ªä¾‹å­ã€‚å­¦ä¹ dead  lineè°ƒåº¦ç®—æ³•ï¼ˆdeadline-iosched.cï¼‰ä¸­çº¢é»‘æ ‘çš„åº”ç”¨,é‡ç‚¹deadline_add_requestä»dead lineè°ƒåº¦ç®—æ³•å­¦ä¹ åŒå‘é“¾è¡¨ã€hashé“¾è¡¨çš„åº”ç”¨ã€‚


é—®é¢˜31.ä»å†…æ ¸ä¸­å¯»æ‰¾kmallocçš„ä¾‹å­å¹¶åˆ†æ2.ä»å†…æ ¸ä¸­å¯»æ‰¾wait_eventå’Œå·¥ä½œé˜Ÿåˆ—çš„ä¾‹å­å¹¶åˆ†æ
é—®é¢˜4æ–‡ä»¶ç³»ç»Ÿè¶…çº§å—çš„åˆ›å»ºè¿‡ç¨‹æ–‡ä»¶ç³»ç»Ÿå†…åˆ›å»ºä¸€ä¸ªæ–‡ä»¶çš„è¿‡ç¨‹
é—®é¢˜5é˜…è¯»æ–‡ä»¶æ‰“å¼€çš„è¿‡ç¨‹ï¼Œé‡ç‚¹å…³æ³¨dentry,inodeçš„å¤„ç†è¿‡ç¨‹ã€‚
é—®é¢˜6åˆ†æpciæ€»çº¿æä¾›çš„è®¾å¤‡å±æ€§å¦‚ä½•åº”ç”¨åˆ°sysæ–‡ä»¶ç³»ç»Ÿï¼Ÿï¼ˆpci_bus_type.pci_dev_attrsï¼‰å†™ä¸ªå°ç¨‹åºï¼Œåœ¨sysfsæ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºä¸€ä¸ªç›®å½•å’Œæ–‡ä»¶
é—®é¢˜71.å¦‚æœæ–‡ä»¶èµ·ç‚¹ä½äºç¡¬ç›˜ç‰©ç†æ‰‡åŒº10000ï¼Œé‚£ä¹ˆä»æ–‡ä»¶ä½ç½®4096+1000å­—èŠ‚å¤„è¯»7000ä¸ªå­—èŠ‚ï¼Œå¯¹åº”çš„é¡µç¼“å­˜åˆ†åˆ«æ˜¯é‚£å‡ ä¸ªé¡µé¢ï¼Ÿå¯¹åº”å—çš„ç‰©ç†å—å·æ˜¯å¤šå°‘ï¼Ÿ2.å¦‚æœä¸€ä¸ªè¿›ç¨‹è¯»æ–‡ä»¶ï¼Œè¯»çš„æ•°æ®æ˜¯æ–‡ä»¶å†…ç¬¬ä¸€ä¸ªé¡µé¢çš„å†…å®¹ï¼Œè¯»å°šæœªå®Œæˆæœ‰å¦ä¸€ä¸ªè¿›ç¨‹åŒæ—¶å‡†å¤‡å†™ç¬¬ä¸€ä¸ªé¡µé¢çš„å†…å®¹ï¼Œ  é‚£ä¹ˆå†…æ ¸å¦‚ä½•ä¿è¯å‰ä¸€ä¸ªè¿›ç¨‹è¯»åˆ°æ­£ç¡®çš„å†…å®¹ï¼Ÿ
é—®é¢˜81.ç®€è¦æè¿°ioä»ä¸­æ–­ä¸­è¿”å›ï¼Œç»è¿‡é€šç”¨å—å±‚è¿”å›åˆ°ç”¨æˆ·æ€è¿›ç¨‹çš„å‡½æ•°è°ƒç”¨å…³ç³»ã€‚éœ€è¦åŒ…æ‹¬ioçš„è½¯ä¸­æ–­å¤„ç†ï¼Œscsiå‘½ä»¤çš„è¿”å›å‡½æ•°ï¼Œbioçš„è¿”å›å‡½æ•°å’Œé¡µé¢çš„è§£é”ã€‚2.å—è®¾å¤‡çš„é˜Ÿåˆ—request-queuæä¾›äº†ä¸€ç³»åˆ—çš„è°ƒç”¨å‡½æ•°ï¼Œç®€è¦æè¿°å®ƒä»¬å„è‡ªçš„ä½œç”¨ã€‚
é—®é¢˜91.åˆ©ç”¨dumpe2fsæŠŠlinuxä¸€ä¸ªext2(ext3ä¹Ÿå¯)åˆ†åŒºçš„ä¿¡æ¯dumpå‡ºæ¥ï¼Œè§£é‡Šdumpå‡ºæ¥çš„ä¿¡æ¯ã€‚2.ç»“åˆè¯¾ç¨‹çš„çŸ¥è¯†å’Œext2çš„ç›®å½•ç»“æ„ï¼Œè§£ææ–‡ä»¶æ‰“å¼€çš„è¿‡ç¨‹
é—®é¢˜101.è®¾å¤‡dmaåœ°å€æ¥è‡ªå“ªé‡Œï¼Ÿ2å¦‚ä½•è¯»å–pciè®¾å¤‡é…ç½®ç©ºé—´çš„ä¿¡æ¯ï¼Ÿ3æè¿°pciæ€»çº¿æ‰«æè®¾å¤‡çš„è¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ¡¥çš„å¤„ç†ä»¥åŠè®¾å¤‡ä¿¡æ¯çš„è·å–.
é—®é¢˜111.åˆ†ækobj_lookupå‡½æ•°å¦‚ä½•æ‰¾åˆ°å­—ç¬¦è®¾å¤‡çš„å¯¹è±¡cdev?2.åˆ†æå†…æ ¸çš„ext2æ–‡ä»¶ç³»ç»Ÿæ‰“å¼€å­—ç¬¦è®¾å¤‡æ–‡ä»¶çš„æ•´ä¸ªè¿‡ç¨‹ï¼Ÿï¼ˆå‡å®šæ ¹ç›®å½•ä¸‹æœ‰ä¸ªå­—ç¬¦è®¾å¤‡æ–‡ä»¶chdevï¼Œæ–‡ä»¶ç³»ç»Ÿå¦‚ä½•è¯»åˆ°inodeä¿¡æ¯ï¼Œå¯¹è®¾å¤‡æ–‡ä»¶èµ‹å€¼çš„è¿‡ç¨‹ï¼Œæ‰“å¼€å­—ç¬¦è®¾å¤‡openå‡½æ•°çš„è¿‡ç¨‹ï¼Œæ‰“å¼€input_handleræä¾›çš„openå‡½æ•°ï¼‰
é—®é¢˜12æè¿°ç‰©ç†é”®ç›˜åŠ å…¥ç³»ç»Ÿçš„è¿‡ç¨‹åˆ†æã€‚åˆ†ä¸ºplatformæ€»çº¿çš„è®¾å¤‡å’Œé©±åŠ¨åŒ¹é…çš„è¿‡ç¨‹ï¼Œserioæ€»çº¿è®¾å¤‡å’Œé©±åŠ¨åŒ¹é…çš„è¿‡ç¨‹ï¼Œinputæ¡†æ¶è®¾å¤‡å’Œé©±åŠ¨åŒ¹é…çš„è¿‡ç¨‹ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>ç§‘ç›®äºŒ</title>
    <url>/essay-driving-license-subject-two/</url>
    <content><![CDATA[å‰è¨€åŒå­¦ä»¬éƒ½è¯´ï¼šâ€œè€ƒè¿‡ç§‘ç›®äºŒï¼Œé©¾ç…§å°±ç®—åˆ°æ‰‹äº†ã€‚â€å¯è§ç§‘ç›®äºŒçš„é‡è¦æ€§ä»¥åŠéš¾åº¦ã€‚3æœˆ4æ—¥å¼€å§‹å­¦ç§‘ç›®äºŒï¼Œè¿‘ä¸€å‘¨äº†ï¼Œæ”¶è·éå¸¸å¤šï¼Œåœ¨æ­¤æ€»ç»“ä¸€ä¸‹ï¼Œæ–¹ä¾¿è‡ªå·±å’Œåæ¥çš„å°ä¼™ä¼´ã€‚æœ¬æ–‡ä¼šåœ¨å­¦è½¦çš„è¿‡ç¨‹ä¸­ä¸æ–­æ›´æ–°ï¼Œæ›´æ–°æ—¶é—´è¯·çœ‹åè®°ã€‚
åæ§½å­¦è½¦æœ‰é£é™©ï¼Œç¬¨è›‹éœ€è°¨æ…ã€‚
ç¬¬ä¸€å¤©ï¼ˆ3æœˆ4æ—¥ï¼Œå‘¨ä¸‰ï¼‰ï¼Œå­¦äº†æ›²çº¿è¡Œé©¶ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„Så¼¯ï¼‰å’Œç›´è§’è½¬å¼¯ã€‚ç¬¬ä¸€æ¬¡ï¼Œå¼€è¿›äº†è‰åœ°ï¼Œè¢«éª‚çš„æ²¡æœ‰äººæ ·ï¼›ç¬¬äºŒæ¬¡ï¼Œåˆå¼€è¿›äº†è‰åœ°ï¼Œæ²¡æœ‰è¢«éª‚ï¼Œç›´æ¥è¢«è¸¹äº†ä¸‹å»ã€‚å’³å’³ï¼ŒçœŸçš„æ˜¯è¢«â€œè¸¹â€äº†ä¸‹å»ã€‚ã€‚ã€‚è¿™ä¸€å¤©ï¼Œå°è±¡æœ€æ·±çš„ä¸€å¥è¯æ˜¯ï¼šâ€œä½ æ˜¯æˆ‘è§è¿‡æœ€ç¬¨çš„å­¦å‘˜ï¼â€è¿˜æœ‰ä»€ä¹ˆ!@#$%^&amp;*å¦å¤–ä¸¤ä¸ªå­¦å‘˜å®‰æ…°æˆ‘ï¼šâ€œåˆ«æ”¾åœ¨å¿ƒä¸Šï¼Œä»–å°±éšå£ä¸€è¯´ï¼Œç¬¬ä¸€å¤©æˆ‘ä»¬éƒ½è¢«éª‚å“­äº†ï¼â€
ç¬¬äºŒå¤©ï¼ˆ3æœˆ5æ—¥ï¼Œå‘¨å››ï¼‰ï¼Œå­¦äº†å€’è½¦å…¥åº“ï¼ˆåªå­¦äº†å³å€’åº“ã€‚å·¦å€’åº“è€ƒå‰å­¦ï¼Œæ®è¯´æ¯”è¾ƒç®€å•ï¼‰ã€‚å¥‡è¿¹èˆ¬çš„ï¼Œæˆ‘å±…ç„¶å€’è½¦å€’å¾—ä¸é”™ï¼å•Šå‹’ï¼Œæˆ‘éƒ½ä½©æœæˆ‘è‡ªå·±äº†ï¼ä¾ç„¶è¢«éª‚ï¼Œä½†æ¯”ç¬¬ä¸€å¤©å¥½äº†å¤ªå¤šå¤ªå¤šï¼ç¡®å®ï¼Œè¡¨ç°çš„å¥½åï¼Œä¼šå½±å“æ•™ç»ƒå¯¹ä½ çš„æ€åº¦ã€‚å’Œä¸€ä¸ªå­¦å‘˜èŠå¤©ï¼Œä»–å‘æˆ‘å€¾è¯‰ï¼šâ€œå”‰ï¼Œä»Šå¤©å¯æƒ¨äº†ï¼Œæ•™ç»ƒè¯´æ²¡è§è¿‡æˆ‘è¿™ä¹ˆç¬¨çš„å­¦å‘˜ï¼è¿˜æœ‰!@#$%^&amp;*â€æˆ‘ç´§ç´§åœ°æ¡ä½äº†ä»–çš„æ‰‹ï¼šâ€œæ•™ç»ƒæ˜¨å¤©ä¹Ÿæ˜¯å’Œæˆ‘è¿™ä¹ˆè¯´çš„ï¼ï¼ï¼â€ä»è¿™ä¸€å¤©å¼€å§‹ï¼Œèå…¥äº†åŒå­¦ä»¬å½“ä¸­ï¼Œå¼€å§‹å’Œå¤§å®¶å˜»å˜»å“ˆå“ˆï¼Œäº’ç›¸å¸®åŠ©ã€‚

ç¬¬ä¸‰å¤©ï¼ˆ3æœˆ7æ—¥ï¼Œå‘¨å…­ï¼‰ï¼Œå­¦äº†ä¾§æ–¹åœè½¦ã€‚è¡¨ç°ä¾ç„¶ä¸é”™ï¼è€Œä¸”ï¼Œæˆ‘ä»¬æ•™ç»ƒæœ‰ä¸¤è¾†è½¦ï¼Œä»Šå¤©ä»–åœ¨å¦ä¸€è¾†è½¦ä¸Šæ•™æ–°å­¦å‘˜ã€‚æˆ‘ä»¬è‡ªç”±ç»ƒä¹ ï¼Œæ— äººçœ‹ç®¡ï¼Œå¼€æ£®çš„ä¸å¾—äº†ï¼å’ŒåŒå­¦ä»¬å§å•¦å§å•¦å§å•¦ã€‚ã€‚ã€‚
ç¬¬å››å¤©ï¼ˆ3æœˆ8æ—¥ï¼Œå‘¨æ—¥ï¼‰ï¼Œå­¦äº†å¡é“å®šç‚¹ã€‚è¡¨ç°ä¾æ—§æƒŠè‰³ï¼ä¹Ÿå¼€äº†å‡ åœˆSå¼¯ï¼Œè™½ç„¶ä¸å¤Ÿå®Œç¾ï¼Œä½†æ˜¯ï¼Œä¸ä¼šå¼€è¿›è‰åœ°äº†ï¼è¿›æ­¥æ˜¯å·¨å¤§çš„ï¼è‡ªæˆ‘æ„Ÿè§‰ï¼Œå­¦å®Œå€’è½¦å…¥åº“ï¼Œå…¶ä»–å‡ é¡¹éƒ½æœ‰è¿›æ­¥ï¼å¼€å§‹æ‰“å¡äº†ï¼Œ4ä¸ªå°æ—¶ã€‚å½“ç„¶ï¼Œå’ŒåŒå­¦ä»¬åœ¨ä¸€èµ·åæ§½å¹ç‰›ä¹Ÿæ˜¯å¿…é¡»çš„ã€‚
ç¬¬äº”å¤©ï¼ˆ3æœˆ9æ—¥ï¼Œå‘¨ä¸€ï¼‰ï¼Œäº”é¡¹ï¼Œç»ƒä¹ ã€‚è¿›æ­¥ä¸­ï¼Œå¯ä»¥æ„Ÿè§‰åˆ°ã€‚ä»Šå¤©æˆ‘ä»¬èŠå¾—æœ€å¤šçš„æ˜¯ï¼šç”²ï¼šâ€œè¯¶ï¼Ÿæ•™ç»ƒä»Šå¤©æ€ä¹ˆæ²¡æœ‰éª‚æˆ‘ï¼Ÿâ€ä¹™ï¼šâ€œä»–æ˜¨å¤©å°±æ²¡æœ‰éª‚æˆ‘ï¼â€ç”²ï¼šâ€œå¯¹å¯¹å¯¹ï¼Œä»æ˜¨å¤©å°±ä¸å¯¹åŠ²äº†ï¼â€ä¸™ï¼šâ€œå…¶å®ï¼Œä»å‰å¤©å¼€å§‹ï¼Œæ•™ç»ƒå¿ƒæƒ…å°±ä¸é”™ï¼â€ä¸ï¼šâ€œæˆ‘ä¹Ÿå‘ç°äº†ï¼â€æˆŠï¼šâ€œè¿˜çœŸæœ‰ç‚¹ä¸ä¹ æƒ¯ï¼â€ã€‚ã€‚ã€‚
åè§†é•œè°ƒæ•´å€’è½¦å…¥åº“å³è¾¹ï¼šåé—¨æŠŠæ‰‹çœ‹åˆ°åç«¯å·¦è¾¹ï¼šåé—¨æŠŠæ‰‹çœ‹åˆ°åç«¯
ä¾§æ–¹åœè½¦å³è¾¹ï¼šå‰é—¨æŠŠæ‰‹ä¸­é—´åå·¦ï¼Œåé—¨æŠŠæ‰‹çœ‹åˆ°å‰ç«¯å·¦è¾¹ï¼šçœ‹åˆ°å‰é—¨æŠŠæ‰‹
é‡ç‚¹é€Ÿåº¦æ§åˆ¶å¥½é€Ÿåº¦ï¼Œç§‘ç›®äºŒä½ å°±å­¦å¥½äº†ä¸€åŠï¼æœ€é‡è¦çš„åœ¨äºè¸©ç¦»åˆï¼šå‘ä¸‹å‹å‡é€Ÿï¼Œå‘ä¸ŠæŠ¬åŠ é€Ÿï¼›å·¦å³æ‰“æ–¹å‘ç›˜å‡é€Ÿï¼Œå›æ­£æ–¹å‘ç›˜åŠ é€Ÿã€‚ç›®æ ‡æ˜¯ï¼šæ— è®ºæ€æ ·æ‰“æ–¹å‘ç›˜ï¼Œæˆ‘ä»¬é€šè¿‡å‹å’ŒæŠ¬æ–¹å‘ç›˜ï¼Œä½¿é€Ÿåº¦å§‹ç»ˆä¿æŒï¼ˆæ…¢ï¼‰åŒ€é€Ÿã€‚
æ–¹å‘ç›˜æ‰“æ–¹å‘ï¼Œå€¼å¾—èŠ±æ—¶é—´ç»ƒä¹ ï¼ä¸ºä»€ä¹ˆï¼Ÿæ‰“æ–¹å‘ç›˜ä¹Ÿå¯ä»¥å¾ˆå¸…å¾ˆæ‹‰é£ï¼ä¸ä¸ï¼Œä¸»è¦åŸå› æ˜¯ï¼Œæ–¹å‘ç›˜çš„æ§åˆ¶ï¼Œç›´æ¥å†³å®šå„ä¸ªç‚¹æ˜¯å¦æ‰“çš„å¥½ï¼
å€’è½¦å…¥åº“å¤šç»ƒå€’è½¦å…¥åº“ï¼æ„Ÿè§‰ç”¨å€’è½¦å…¥åº“æ¥æ‰“åŸºç¡€éå¸¸å¥½ï¼ç»ƒå‡ºæ‰‹æ„Ÿï¼Œå®Œè™å…¶ä»–å››é¡¹ï¼
å‹¤å¥‹æ—©ä¸Š7ç‚¹åŠåˆ°é©¾æ ¡ï¼Œæˆ‘è§‰å¾—å·²ç»å¾ˆæ—©äº†ã€‚ä½†æ˜¯ï¼Œé‚£äº›å‹¤å¥‹çš„åŒå­¦ï¼Œæ¯å¤©æ—©ä¸Š6ç‚¹åŠå·¦å³å°±åˆ°äº†ï¼æ—©å»ï¼Œæ²¡æœ‰äººï¼Œå°±å¯ä»¥å¤šå­¦ä¸€å°æ—¶ç”šè‡³ä¸€ä¸ªåŠå°æ—¶ã€‚å¤šå­¦ä¸€å°æ—¶æœ‰ä»€ä¹ˆç”¨ï¼Ÿæˆ‘èƒ½è¯´çš„åªæ˜¯ï¼Œä¸€æ•´å¤©ï¼ˆä¸Šåˆ8ç‚¹åˆ°ä¸‹åˆ5ç‚¹ï¼‰ï¼Œä½ èƒ½ç»ƒä¹ çš„æ—¶é—´ï¼Œæ»¡æ‰“æ»¡ç®—ä¸€å°æ—¶å°±ä¸é”™äº†ï¼
äº”é¡¹è¦ç‚¹Tipsï¼šä»¥ä¸‹è¦ç‚¹ï¼Œä¸æ˜¯ç¡¬æ€§è§„å®šã€‚å…·ä½“æ“ä½œçš„æ—¶å€™ï¼Œæ ¹æ®å½“æ—¶æƒ…å†µè‡ªå·±è°ƒæ•´ã€‚
æ›²çº¿è¡Œé©¶å£è¯€ï¼šæå‰è½¬ï¼Œå…ˆå°‘è½¬ï¼Œè¿½ç€å¼¯é“è½¬ï¼›æ—©ç‚¹å›ï¼Œå…ˆå°‘å›ï¼Œè¿½ç€å¼¯é“å›ã€‚
è¯¦è§£ï¼šå…¥å¼¯æ—¶ï¼Œé å³è¡Œé©¶ï¼›å½“å³è¾¹çº¿ä¸è½¦å¤´ç›¸äº¤ï¼Œäº¤ç‚¹ç§»åŠ¨åˆ°è½¦å¤´å·¦ä¾§ä¸‰åˆ†ä¹‹ä¸€å¤„æ—¶ï¼Œæ–¹å‘ç›˜å‘å·¦æ‰“ä¸€åœˆï¼Œç„¶ååœ¨å·¦å³90åº¦ä¹‹å†…è°ƒæ•´æ–¹å‘ç›˜ï¼Œä½¿å·¦è½¦å¤´å’Œå³è¾¹çº¿å§‹ç»ˆé‡åˆï¼›å½“å·¦è½¦å¤´å¿«è¦ç¢°åˆ°å·¦è¾¹çº¿æ—¶ï¼Œå›æ­£æ–¹å‘ç›˜ï¼›å½“å·¦è¾¹çº¿ä¸è½¦å¤´ç›¸äº¤ï¼Œäº¤ç‚¹ç§»åŠ¨åˆ°è½¦å¤´å³ä¾§ä¸‰åˆ†ä¹‹ä¸€å¤„æ—¶ï¼Œæ–¹å‘ç›˜å‘å³æ‰“ä¸€åœˆï¼Œç„¶ååœ¨å·¦å³90åº¦ä¹‹å†…è°ƒæ•´æ–¹å‘ç›˜ï¼Œä½¿å³è½¦å¤´å’Œå·¦è¾¹çº¿å§‹ç»ˆé‡åˆã€‚
ç›´è§’è½¬å¼¯è¯¦è§£ï¼šå…¥å¼¯æ—¶ï¼Œé å³è¡Œé©¶ï¼›å½“è½¦å¤´å®Œå…¨ç›–ä½å‰æ–¹è¾¹çº¿ï¼ˆæˆ–æ°´ç®¡ï¼‰æ—¶ï¼Œå‘å·¦æ‰“æ­»æ–¹å‘ç›˜ï¼›å½“æ–¹å‘å¿«è¦å›æ­£æ—¶ï¼Œå›æ­£æ–¹å‘ç›˜ã€‚
å€’è½¦å…¥åº“è¯¦è§£ï¼šæ­£æ‰‹å…¥åº“æ—¶ï¼Œå½“å³åè½¦é—¨ä¸Šçš„ç«–ç›´æ å’Œè½¦åº“çš„å³è§’é‡åˆæ—¶ï¼Œå‘å³æ‰“æ­»æ–¹å‘ç›˜ï¼›çœ‹å³åè§†é•œï¼Œå½“è½¦èº«ä¸ç™½çº¿çš„å¤¹è§’å¤§æ¦‚åˆ°30åº¦çš„æ—¶å€™ï¼Œæ–¹å‘ç›˜å›ä¸€åœˆï¼›å½“å³åè§†é•œç›–è¿‡è½¦èº«ä¸ç™½çº¿çš„å¤¹è§’æ—¶ï¼Œå‘å³æ‰“æ­»æ–¹å‘ç›˜ï¼›å½“å³åè§†é•œä¸­è½¦èº«ä¸è½¦åº“å³è¾¹çº¿é©¬ä¸Šå°±è¦å¹³è¡Œæ—¶ï¼Œå›æ­£æ–¹å‘ç›˜ï¼›çœ‹å·¦åè§†é•œï¼Œæ‰¾åœè½¦ç‚¹ï¼Œè¸©ä¸‹åˆ¹è½¦ï¼›
åæ‰‹å‡ºåº“æ—¶ï¼Œæ–¹å‘ç›˜å‘å·¦æ‰“90åº¦ï¼Œå‰è¿›ï¼Œæ•°2æˆ–3æˆ–6ç§’ï¼ˆè§†å·¦è¾¹è·ç¦»è€Œå®šï¼‰ï¼Œå›æ­£æ–¹å‘ç›˜ï¼›å½“è½¦å¤´ç›–ä½è½¦åº“å‰æ–¹é»„çº¿æ—¶ï¼Œå‘å·¦æ‰“æ­»æ–¹å‘ç›˜ï¼›å½“è½¦èº«ä¸è½¦åº“å‰æ–¹é»„çº¿å‘ˆ45åº¦è§’æ—¶ï¼Œè¸©ä¸‹åˆ¹è½¦ï¼›
åæ‰‹å…¥åº“æ—¶ï¼Œçœ‹å·¦åè§†é•œæˆ–è€…å³åè§†é•œï¼Œå½“è½¦èº«ä¸è½¦åº“å·¦å³è¾¹çº¿å°†è¦å¹³è¡Œæ—¶ï¼Œå›æ­£æ–¹å‘ç›˜ï¼Œæ‰¾åœè½¦ç‚¹ï¼Œè¸©ä¸‹åˆ¹è½¦ï¼›
æ­£æ‰‹å‡ºåº“æ—¶ï¼Œå½“è½¦å¤´ç›–è¿‡è½¦åº“å‰æ–¹é»„çº¿æ—¶ï¼Œå‘å³æ‰“æ­»æ–¹å‘ç›˜ï¼›å½“è½¦èº«ä¸è½¦åº“å‰æ–¹é»„çº¿å¹³è¡Œæ—¶ï¼Œå›æ­£æ–¹å‘ç›˜ã€‚
ä¾§æ–¹åœè½¦è¯¦è§£ï¼šå‰è¿›æ—¶ï¼Œæ§åˆ¶è½¦å¤´ä¸è½¦åº“å·¦è¾¹çº¿çš„äº¤ç‚¹åœ¨è½¦å¤´å³ä¾§ä¸‰åˆ†ä¹‹ä¸€å¤„ï¼›çœ‹å³åè§†é•œï¼Œå½“å³åè§†é•œä¸­å¯ä»¥çœ‹åˆ°è½¦åº“å‰è¾¹çº¿æ—¶ï¼Œå†å‰è¿›ä¸¤ç§’ï¼›
å…¥åº“æ—¶ï¼Œçœ‹å³åè§†é•œï¼Œå½“å³åè§†é•œç›–è¿‡è½¦åº“å‰è¾¹çº¿æ—¶ï¼Œå‘å³æ‰“æ­»æ–¹å‘ç›˜ï¼›çœ‹å·¦åè§†é•œï¼Œå·¦è½¦èº«åä¿é™©æ ä¸è½¦åº“å·¦è¾¹çº¿æœ‰ä¸€ä¸ªäº¤ç‚¹ï¼Œå½“è¿™ä¸ªäº¤ç‚¹ç§»åŠ¨åˆ°ä¿é™©æ ä¸­ç‚¹æ—¶ï¼Œå›æ­£æ–¹å‘ç›˜ï¼›ç»§ç»­çœ‹å·¦åè§†é•œï¼Œå½“å·¦åè½¦è½®å‹åˆ°è½¦åº“å·¦è¾¹çº¿æ—¶ï¼Œå‘å·¦æ‰“æ­»æ–¹å‘ç›˜ï¼›ç»§ç»­çœ‹å·¦åè§†é•œï¼Œå½“è½¦èº«ä¸è½¦åº“å·¦è¾¹çº¿å¹³è¡Œæ—¶ï¼Œè¸©ä¸‹åˆ¹è½¦ï¼›
å‡ºåº“æ—¶ï¼Œå½“è½¦å¤´ä¸é“è·¯å·¦è¾¹çº¿çš„äº¤ç‚¹ä½äºè½¦å¤´ä¸­ç‚¹æ—¶ï¼Œå‘å³æ‰“æ­»æ–¹å‘ç›˜ï¼›å½“è½¦èº«ä¸é“è·¯å¹³è¡Œæ—¶ï¼Œå›æ­£æ–¹å‘ç›˜ã€‚
å¡é“å®šç‚¹è¯¦è§£ï¼šä¸Šå¡æ—¶ï¼Œè°ƒæ•´è½¦å¤´ï¼Œä½¿è½¦å¤´ä¸­ç‚¹åå³å¤„ä¸å†…ä¾§é»„çº¿ç›¸äº¤ï¼›å½“è½¦å¤´å³è§’å°åè§†é•œä¸æ¡©æ†å¿«è¦å¹³è¡Œæ—¶ï¼Œè¸©ä¸‹åˆ¹è½¦ï¼›æ…¢æ…¢æ¾å¼€ç¦»åˆï¼Œå½“è½¦èº«æŠ–åŠ¨æ—¶ï¼Œæ¾å¼€åˆ¹è½¦ï¼›å½“è½¦å­è¡Œé©¶è¿‡å¡é“æœ€é«˜ç‚¹ï¼Œå¼€å§‹ä¸‹å¡æ—¶ï¼Œå¯ä»¥æ¾å¼€ç¦»åˆã€‚
è€ƒè¯•ç§‘ç›®äºŒå’Œç§‘ç›®ä¸‰å„æœ‰äº”æ¬¡é¢„çº¦æœºä¼šï¼Œæ¯æ¬¡é¢„çº¦é—´éš”åå¤©ã€‚æ¯æ¬¡é¢„çº¦è€ƒè¯•ï¼Œä¸è¿‡çš„è¯ï¼Œå½“å¤©å¯ä»¥è¡¥è€ƒä¸€æ¬¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç§‘ç›®äºŒå’Œç§‘ç›®ä¸‰å„æœ‰åæ¬¡è€ƒè¯•æœºä¼šã€‚
ç§‘ç›®äºŒè€ƒè¯•æ—¶ï¼Œæ›²çº¿è¡Œé©¶ã€ç›´è§’è½¬å¼¯ã€ä¾§æ–¹åœè½¦ã€å¡é“å®šç‚¹ï¼Œè¿™å››é¡¹ä¸€èµ·è€ƒï¼Œè¢«ç§°ä¸ºç”µå­è·¯ï¼›å€’è½¦å…¥åº“å•ç‹¬è€ƒï¼Œæ•™ç»ƒä¹ æƒ¯è¯´æ­£åæ‰‹ã€‚
ç”µå­è·¯å’Œå€’è½¦å…¥åº“ï¼Œå…¨éƒ¨é€šè¿‡ï¼Œåˆ™é€šè¿‡ã€‚æœ‰ä¸€ä¸ªä¸é€šè¿‡ï¼Œåˆ™éœ€è¦è¡¥è€ƒç”µå­è·¯å’Œå€’è½¦å…¥åº“ã€‚
ç­‰å¾…æ—¶é—´å­¦è½¦ï¼Œç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œéƒ½ä¸åªæœ‰ä½ ä¸€ä¸ªäººï¼Œæ˜¯å¤§å®¶ä¸€èµ·å­¦ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå°±è¦æ’é˜Ÿï¼Œæ¯äººå¼€å‡ æ¬¡ã€‚é‚£ä¹ˆï¼Œç­‰å¾…æ—¶é—´å¹²å•¥å‘¢ï¼Ÿå¹ç‰›å•Šï¼å“ˆå“ˆï¼Œå¼€ä¸ªç©ç¬‘ï¼ŒèŠå¤©å•Šï¼å¯å¥½ç©äº†ï¼Œç‰¹åˆ«æœ‰æ„æ€ï¼å¤§å®¶ä¸€èµ·åæ§½æ•™ç»ƒï¼Œæ€ä¸€ä¸ªæš—çˆ½äº†å¾—ï¼è¿˜æœ‰ï¼Œå¤§å®¶äº¤æµä¸€ä¸‹ç»éªŒï¼Œè®¨è®ºä¸€ä¸‹ä¸æ˜ç™½çš„åœ°æ–¹ã€‚ç‰›é€¼çš„å­¦å‘˜ä¹Ÿä¼šä¼ æˆä¸€äº›ç»éªŒï¼Œä¸æ­¢æ˜¯å…³äºæ‰“æ–¹å‘çš„å„ä¸ªç‚¹ï¼Œè¿˜æœ‰å…³äºè€ƒè¯•çš„æ³¨æ„äº‹é¡¹ã€å…³äºè€ƒåœºçš„é€‰æ‹©ï¼ˆæ¯”å¦‚11å·è€ƒåœºæ˜¯æ­»äº¡è€ƒåœºï¼‰ã€å…³äºæ‰“å¡ã€å…³äºé€ç¤¼ã€å…³äºé©¾æ ¡çš„å†…å¹•ã€‚ã€‚ã€‚
å†ä¸æµï¼Œè¿˜å¯ä»¥ç©æ‰‹æœºå•Šã€‚æ³¨æ„ï¼Œè¦è¶æ•™ç»ƒä¸åœ¨çš„æ—¶å€™çœ‹ï¼Œå¦åˆ™ï¼Œå‡†å¤‡è¿æ¥æ•™ç»ƒçš„æ€’å¼å§ï¼å¦‚æœå¸¦æœ¬æ‰˜ç¦é›…æ€å•¥çš„ï¼Œåº”è¯¥æ²¡äº‹å§ã€‚ã€‚ã€‚
åè®°3æœˆ31æ—¥ï¼Œæ¨¡æ‹Ÿè€ƒè¯•ã€‚å€’è½¦å…¥åº“ä¸‰æ¬¡ï¼ˆ3å·åº“ï¼‰ï¼ŒæŒ‚ä¸¤æ¬¡ï¼›ç”µå­è·¯å…­æ¡çº¿ï¼ˆ7å·åˆ°12å·ï¼‰ï¼ŒæŒ‚ä¸¤æ¡çº¿ï¼›åŠ æ¨¡å€’è½¦å…¥åº“ä¸¤æ¬¡ï¼Œå…¨è¿‡ã€‚
4æœˆ1æ—¥ï¼Œæ­£å¼è€ƒè¯•ã€‚10å·çº¿ï¼Œå®Œç¾é€šè¿‡ï¼›å€’è½¦å…¥åº“ï¼ˆ6å·åº“ï¼‰ï¼Œåæ‰‹å¿˜å¸¦90åº¦ï¼Œé™©é™©é€šè¿‡ã€‚
å“ˆå“ˆï¼Œç»ˆäºè€ƒå®Œäº†ç§‘ç›®äºŒï¼Œä»Šå¤©çº¦äº†ç§‘ç›®ä¸‰çš„ç»ƒä¹ æ—¶é—´ï¼Œé©¾ç…§æŒ‡æ—¥å¯å¾…ï¼å¼å¼~
æœ€åä¸€æ¬¡æ›´æ–°æ—¶é—´ï¼š2015-04-02
]]></content>
      <categories>
        <category>essay</category>
      </categories>
      <tags>
        <tag>ç¬”è®°</tag>
        <tag>éšç¬”</tag>
      </tags>
  </entry>
  <entry>
    <title>DNSå…¥é—¨ç¯‡</title>
    <url>/dev-dns-start/</url>
    <content><![CDATA[DNSç®€ä»‹
ç½‘åŸŸåç§°ï¼ˆè‹±è¯­ï¼šDomain Nameï¼Œç®€ç§°ï¼šDomainï¼‰ï¼Œç®€ç§°åŸŸåã€ç½‘åŸŸï¼Œæ˜¯ç”±ä¸€ä¸²ç”¨ç‚¹åˆ†éš”çš„å­—ç¬¦ç»„æˆçš„äº’è”ç½‘ä¸ŠæŸä¸€å°è®¡ç®—æœºæˆ–è®¡ç®—æœºç»„çš„åç§°ï¼Œç”¨äºåœ¨æ•°æ®ä¼ è¾“æ—¶æ ‡è¯†è®¡ç®—æœºçš„ç”µå­æ–¹ä½ã€‚åŸŸåå¯ä»¥è¯´æ˜¯ä¸€ä¸ªIPåœ°å€çš„ä»£ç§°ï¼Œç›®çš„æ˜¯ä¸ºäº†ä¾¿äºè®°å¿†åè€…ã€‚ä¾‹å¦‚ï¼Œwikipedia.orgæ˜¯ä¸€ä¸ªåŸŸåã€‚äººä»¬å¯ä»¥ç›´æ¥è®¿é—®wikipedia.orgæ¥ä»£æ›¿IPåœ°å€ï¼Œç„¶ååŸŸåç³»ç»Ÿï¼ˆDNSï¼‰å°±ä¼šå°†å®ƒè½¬åŒ–æˆä¾¿äºæœºå™¨è¯†åˆ«çš„IPåœ°å€ã€‚è¿™æ ·ï¼Œäººä»¬åªéœ€è¦è®°å¿†wikipedia.orgè¿™ä¸€ä¸²å¸¦æœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦ï¼Œè€Œä¸éœ€è¦è®°å¿†æ²¡æœ‰å«ä¹‰çš„æ•°å­—ã€‚


åŸŸåçš„æ ¸å¿ƒæ˜¯åŸŸåç³»ç»Ÿï¼ˆè‹±è¯­ï¼šDomain Name Systemï¼Œç¼©å†™ï¼šDNSï¼‰ï¼ŒåŸŸåç³»ç»Ÿä¸­çš„ä»»ä½•åç§°éƒ½æ˜¯åŸŸåã€‚åœ¨åŸŸåç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„ä¸­ï¼Œå„ç§åŸŸåéƒ½éš¶å±äºåŸŸåç³»ç»Ÿæ ¹åŸŸçš„ä¸‹çº§ã€‚åŸŸåçš„ç¬¬ä¸€çº§æ˜¯é¡¶çº§åŸŸï¼Œå®ƒåŒ…æ‹¬é€šç”¨é¡¶çº§åŸŸï¼Œä¾‹å¦‚.comã€.netå’Œ.orgï¼›ä»¥åŠå›½å®¶å’Œåœ°åŒºé¡¶çº§åŸŸï¼Œä¾‹å¦‚.usã€.cnå’Œ.tkã€‚é¡¶çº§åŸŸåä¸‹ä¸€å±‚æ˜¯äºŒçº§åŸŸåï¼Œä¸€çº§ä¸€çº§åœ°å¾€ä¸‹ã€‚ç°åœ¨ï¼Œè¿˜æœ‰ä¸€äº›æ–°å…´çš„ä¸­æ–‡åŸŸåï¼Œä¾‹å¦‚.åœ¨çº¿ç­‰ã€‚è¿™äº›åŸŸåå‘äººä»¬æä¾›æ³¨å†ŒæœåŠ¡ï¼Œäººä»¬å¯ä»¥ç”¨å®ƒåˆ›å»ºå…¬å¼€çš„äº’è”ç½‘èµ„æºæˆ–è¿è¡Œç½‘ç«™ã€‚é¡¶çº§åŸŸåçš„ç®¡ç†æœåŠ¡ç”±å¯¹åº”çš„åŸŸåæ³¨å†Œç®¡ç†æœºæ„ï¼ˆåŸŸåæ³¨å†Œå±€ï¼‰è´Ÿè´£ï¼Œæ³¨å†ŒæœåŠ¡é€šå¸¸ç”±åŸŸåæ³¨å†Œå•†è´Ÿè´£ã€‚


åŸŸåç³»ç»Ÿï¼ˆè‹±è¯­ï¼šDomain Name Systemï¼Œç¼©å†™ï¼šDNSï¼‰æ˜¯äº’è”ç½‘çš„ä¸€é¡¹æœåŠ¡ã€‚å®ƒä½œä¸ºå°†åŸŸåå’ŒIPåœ°å€ç›¸äº’æ˜ å°„çš„ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œèƒ½å¤Ÿä½¿äººæ›´æ–¹ä¾¿åœ°è®¿é—®äº’è”ç½‘ã€‚DNSä½¿ç”¨TCPå’ŒUDPç«¯å£53ã€‚å½“å‰ï¼Œå¯¹äºæ¯ä¸€çº§åŸŸåé•¿åº¦çš„é™åˆ¶æ˜¯63ä¸ªå­—ç¬¦ï¼ŒåŸŸåæ€»é•¿åº¦åˆ™ä¸èƒ½è¶…è¿‡253ä¸ªå­—ç¬¦ã€‚

å‚è€ƒæ–‡æ¡£ï¼š

åŸŸå
Domain Name System
åŸŸåç³»ç»Ÿ
DNS åŸç†å…¥é—¨



DNSè®°å½•ç±»å‹åŸŸåä¸IPä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Œç§°ä¸ºâ€è®°å½•â€ï¼ˆrecordï¼‰ã€‚æ ¹æ®ä½¿ç”¨åœºæ™¯ï¼Œâ€è®°å½•â€å¯ä»¥åˆ†æˆä¸åŒçš„ç±»å‹ï¼ˆtypeï¼‰ã€‚å¸¸è§çš„DNSè®°å½•ç±»å‹å¦‚ä¸‹ï¼š

Aï¼šåœ°å€è®°å½•ï¼ˆAddressï¼‰ï¼Œè¿”å›åŸŸåæŒ‡å‘çš„IPåœ°å€ã€‚
NSï¼šåŸŸåæœåŠ¡å™¨è®°å½•ï¼ˆName Serverï¼‰ï¼Œè¿”å›ä¿å­˜ä¸‹ä¸€çº§åŸŸåä¿¡æ¯çš„æœåŠ¡å™¨åœ°å€ã€‚è¯¥è®°å½•åªèƒ½è®¾ç½®ä¸ºåŸŸåï¼Œä¸èƒ½è®¾ç½®ä¸ºIPåœ°å€ã€‚
MXï¼šé‚®ä»¶è®°å½•ï¼ˆMail eXchangeï¼‰ï¼Œè¿”å›æ¥æ”¶ç”µå­é‚®ä»¶çš„æœåŠ¡å™¨åœ°å€ã€‚
CNAMEï¼šè§„èŒƒåç§°è®°å½•ï¼ˆCanonical Nameï¼‰ï¼Œè¿”å›å¦ä¸€ä¸ªåŸŸåï¼Œå³å½“å‰æŸ¥è¯¢çš„åŸŸåæ˜¯å¦ä¸€ä¸ªåŸŸåçš„è·³è½¬ï¼Œè¯¦è§ä¸‹æ–‡ã€‚
PTRï¼šé€†å‘æŸ¥è¯¢è®°å½•ï¼ˆPointer Recordï¼‰ï¼Œåªç”¨äºä»IPåœ°å€æŸ¥è¯¢åŸŸåï¼Œè¯¦è§ä¸‹æ–‡ã€‚

ä¸€èˆ¬æ¥è¯´ï¼Œä¸ºäº†æœåŠ¡çš„å®‰å…¨å¯é ï¼Œè‡³å°‘åº”è¯¥æœ‰ä¸¤æ¡NSè®°å½•ï¼Œè€ŒAè®°å½•å’ŒMXè®°å½•ä¹Ÿå¯ä»¥æœ‰å¤šæ¡ï¼Œè¿™æ ·å°±æä¾›äº†æœåŠ¡çš„å†—ä½™æ€§ï¼Œé˜²æ­¢å‡ºç°å•ç‚¹å¤±è´¥ã€‚
DNSè§£ææµç¨‹
DNSè§£ææµç¨‹ï¼Œç®€å•æ¥è¯´å°±æ˜¯åˆ†çº§æŸ¥è¯¢ã€‚

ç”¨æˆ·è¯·æ±‚æœ¬åœ°åŸŸåæœåŠ¡å™¨ï¼Œå¦‚æœæœ‰ç»“æœå°±ç›´æ¥è¿”å›ï¼›å¦‚æœæ²¡æœ‰ç»“æœï¼Œå°±è¯·æ±‚æ ¹åŸŸåæœåŠ¡å™¨
è¯·æ±‚æ ¹åŸŸåæœåŠ¡å™¨ï¼Œæ‹¿åˆ°é¡¶çº§åŸŸåï¼ˆä¸€çº§åŸŸåï¼‰æœåŠ¡å™¨çš„NSè®°å½•å’ŒAè®°å½•
è¯·æ±‚é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼Œæ‹¿åˆ°äºŒçº§åŸŸåæœåŠ¡å™¨çš„NSè®°å½•å’ŒAè®°å½•
è¯·æ±‚äºŒçº§åŸŸåæœåŠ¡å™¨ï¼Œæ‹¿åˆ°ä¸‰çº§æˆ–å››çº§åŸŸåçš„NSè®°å½•å’ŒAè®°å½•

DNSé…ç½®é…ç½®æ–‡ä»¶ä¸»æœºä¸Šï¼Œæˆ‘ä»¬é€šè¿‡é…ç½®æ–‡ä»¶ /etc/resolv.conf æŒ‡å®šDNSæœåŠ¡å™¨ã€‚ä¾‹å¦‚ï¼š
nameserver 10.96.0.10

searchå’Œndotsä¸¾ä¸ªä¾‹å­ï¼š
nameserver 10.96.0.10search svc.cluster.local cluster.localndots 5

å½“åŸŸåçš„ç‚¹çš„æ•°é‡å°äºndotsçš„æ•°é‡æ—¶ä¼šä¾æ¬¡åŠ ä¸Šåç¼€ï¼ˆsearchï¼‰å»DNSæœåŠ¡å™¨æŸ¥æ‰¾ï¼Œå¦‚æœéƒ½æ‰¾ä¸åˆ°å†ç›´æ¥å»DNSæœåŠ¡å™¨æŸ¥æ‰¾åŸŸåã€‚
nsswitch.confnsswitchå…¨ç§°ä¸º: network service switchï¼Œæ˜¯ä¸€ä¸ªé€šç”¨æ¡†æ¶ï¼Œæ˜¯å„ç§ç±»å‹å­˜å‚¨äº¤äº’çš„å…¬å…±å®ç°ï¼Œå®ç°åç§°è§£ææœåŠ¡ã€‚nsswitch.conf å†³å®šç³»ç»Ÿè·å–è§£æçš„é¡ºåºã€‚ä¾‹å¦‚ï¼š
hosts:      files dns
ä»¥ä¸Šé…ç½®ï¼Œåœ¨åŸŸåè§£ææ—¶ï¼Œå°±ä¼šå…ˆè¯»å–æœ¬åœ° /etc/hosts ï¼Œå†è¯·æ±‚dnsæœåŠ¡å™¨ã€‚
ubuntu20å¯¹äºubuntu20ï¼Œdnsçš„é…ç½®æ–¹æ³•æ˜¯æ¯”è¾ƒç‰¹æ®Šçš„ã€‚å‚è€ƒæ–‡æ¡£Ubuntu20.04 ç³»ç»Ÿä¸­è®¾ç½®dnså¹¶ç”Ÿæ•ˆ
1ã€ä¿®æ”¹dnsçš„é…ç½®/etc/systemd/resolved.conf ä¸­ä¿®æ”¹
DNS=180.76.76.76 114.114.114.114

2ã€é‡å¯systemd-resolved
systemctl enable systemd-resolvedsystemctl restart systemd-resolved

3ã€ä½¿ç”¨æ–°çš„resolv.conf
cat /run/systemd/resolve/resolv.confmv /etc/resolv.conf&#123;,.bak&#125;ln -s /run/systemd/resolve/resolv.conf /etc/resolv.conf

DNSè§£ææŸ¥è¯¢å‘½ä»¤æŸ¥è¯¢é¡ºåºè¯´æ˜
nslookup/digä¼šç›´æ¥æŸ¥è¯¢DNSæœåŠ¡å™¨
pingã€hostã€curlç­‰å‘½ä»¤å®é™…ä¸Šä¼šæŸ¥çœ‹æœ¬åœ°hostsï¼Œå†æ ¹æ®resolv.confä¸­çš„é…ç½®æŸ¥è¯¢åŸŸåã€‚

digæŸ¥çœ‹åŸŸåè§£æè®°å½•
dig www.voidking.com

æŸ¥çœ‹æ¯ä¸€çº§åŸŸåçš„NSè®°å½•
dig ns comdig ns voidking.com

nslookupæŸ¥çœ‹åŸŸåè§£æè®°å½•
nslookup www.voidking.com

hostæŸ¥çœ‹åŸŸåè§£æè®°å½•
host www.voidking.com

å…¬å…±DNSæœåŠ¡å™¨ç™¾åº¦DNS180.76.76.76114.114.114.114

GoogleDNS8.8.8.88.8.4.4

114DNS114.114.114.114114.114.115.115

é˜¿é‡ŒDNS223.5.5.5223.6.6.6

OneDNS112.124.47.27114.215.126.16

DNSæ´¾101.226.4.6123.125.81.6

OpenDNS208.67.222.222208.67.220.220



]]></content>
      <categories>
        <category>engineering</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œ</tag>
        <tag>dns</tag>
      </tags>
  </entry>
  <entry>
    <title>å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼</title>
    <url>/dev-common-regular-expression/</url>
    <content><![CDATA[æ­£åˆ™è¡¨è¾¾å¼ç”¨äºå­—ç¬¦ä¸²å¤„ç†ã€è¡¨å•éªŒè¯ç­‰åœºåˆï¼Œå®ç”¨é«˜æ•ˆã€‚ç°å°†ä¸€äº›å¸¸ç”¨çš„è¡¨è¾¾å¼æ”¶é›†äºæ­¤ï¼Œä»¥å¤‡ä¸æ—¶ä¹‹éœ€ã€‚
åŒ¹é…ä¸­æ–‡å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š [\u4e00-\u9fa5]
åŒ¹é…åŒå­—èŠ‚å­—ç¬¦(åŒ…æ‹¬æ±‰å­—åœ¨å†…)ï¼š[^\x00-\xff]
åº”ç”¨ï¼šè®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦ï¼ˆä¸€ä¸ªåŒå­—èŠ‚å­—ç¬¦é•¿åº¦è®¡2ï¼ŒASCIIå­—ç¬¦è®¡1ï¼‰
String.prototype.len=function()&#123;return this.replace([^\x00-\xff]/g,&quot;aa&quot;).length;&#125;

åŒ¹é…ç©ºè¡Œçš„æ­£åˆ™è¡¨è¾¾å¼ï¼š\n[\s| ]*\r
åŒ¹é…HTMLæ ‡è®°çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š/&lt;(.*)&gt;.*&lt;\/\1&gt;|&lt;(.*) \/&gt;/
åŒ¹é…é¦–å°¾ç©ºæ ¼çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š(^\s*)|(\s*$)


åŒ¹é…ä¸­æ–‡å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š[\u4e00-\u9fa5]è¯„æ³¨ï¼šåŒ¹é…ä¸­æ–‡è¿˜çœŸæ˜¯ä¸ªå¤´ç–¼çš„äº‹ï¼Œæœ‰äº†è¿™ä¸ªè¡¨è¾¾å¼å°±å¥½åŠäº†
åŒ¹é…åŒå­—èŠ‚å­—ç¬¦(åŒ…æ‹¬æ±‰å­—åœ¨å†…)ï¼š[^\x00-\xff]è¯„æ³¨ï¼šå¯ä»¥ç”¨æ¥è®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦ï¼ˆä¸€ä¸ªåŒå­—èŠ‚å­—ç¬¦é•¿åº¦è®¡2ï¼ŒASCIIå­—ç¬¦è®¡1ï¼‰
åŒ¹é…ç©ºç™½è¡Œçš„æ­£åˆ™è¡¨è¾¾å¼ï¼š\n\s*\rè¯„æ³¨ï¼šå¯ä»¥ç”¨æ¥åˆ é™¤ç©ºç™½è¡Œ
åŒ¹é…HTMLæ ‡è®°çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š&lt;(\S*?)[^&gt;]*&gt;.*?&lt;/\1&gt;|&lt;.*? /&gt;è¯„æ³¨ï¼šç½‘ä¸Šæµä¼ çš„ç‰ˆæœ¬å¤ªç³Ÿç³•ï¼Œä¸Šé¢è¿™ä¸ªä¹Ÿä»…ä»…èƒ½åŒ¹é…éƒ¨åˆ†ï¼Œå¯¹äºå¤æ‚çš„åµŒå¥—æ ‡è®°ä¾æ—§æ— èƒ½ä¸ºåŠ›
åŒ¹é…é¦–å°¾ç©ºç™½å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š^\s*|\s*$è¯„æ³¨ï¼šå¯ä»¥ç”¨æ¥åˆ é™¤è¡Œé¦–è¡Œå°¾çš„ç©ºç™½å­—ç¬¦(åŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰)ï¼Œéå¸¸æœ‰ç”¨çš„è¡¨è¾¾å¼
åŒ¹é…Emailåœ°å€çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*è¯„æ³¨ï¼šè¡¨å•éªŒè¯æ—¶å¾ˆå®ç”¨
åŒ¹é…ç½‘å€URLçš„æ­£åˆ™è¡¨è¾¾å¼ï¼š[a-zA-z]+://[^\s]*è¯„æ³¨ï¼šç½‘ä¸Šæµä¼ çš„ç‰ˆæœ¬åŠŸèƒ½å¾ˆæœ‰é™ï¼Œä¸Šé¢è¿™ä¸ªåŸºæœ¬å¯ä»¥æ»¡è¶³éœ€æ±‚
åŒ¹é…å¸å·æ˜¯å¦åˆæ³•(å­—æ¯å¼€å¤´ï¼Œå…è®¸5-16å­—èŠ‚ï¼Œå…è®¸å­—æ¯æ•°å­—ä¸‹åˆ’çº¿)ï¼š^[a-zA-Z][a-zA-Z0-9_]&#123;4,15&#125;$è¯„æ³¨ï¼šè¡¨å•éªŒè¯æ—¶å¾ˆå®ç”¨
åŒ¹é…å›½å†…ç”µè¯å·ç ï¼š\d&#123;3&#125;-\d&#123;8&#125;|\d&#123;4&#125;-\d&#123;7&#125;è¯„æ³¨ï¼šåŒ¹é…å½¢å¼å¦‚ 0511-4405222 æˆ– 021-87888822
åŒ¹é…è…¾è®¯QQå·ï¼š[1-9][0-9]&#123;4,&#125;è¯„æ³¨ï¼šè…¾è®¯QQå·ä»10000å¼€å§‹
åŒ¹é…ä¸­å›½é‚®æ”¿ç¼–ç ï¼š[1-9]\d&#123;5&#125;(?!\d)è¯„æ³¨ï¼šä¸­å›½é‚®æ”¿ç¼–ç ä¸º6ä½æ•°å­—
åŒ¹é…èº«ä»½è¯ï¼š\d&#123;15&#125;|\d&#123;18&#125;è¯„æ³¨ï¼šä¸­å›½çš„èº«ä»½è¯ä¸º15ä½æˆ–18ä½
åŒ¹é…ipåœ°å€ï¼š\d+\.\d+\.\d+\.\d+è¯„æ³¨ï¼šæå–ipåœ°å€æ—¶æœ‰ç”¨
åŒ¹é…ç‰¹å®šæ•°å­—ï¼š^[1-9]\d*$ã€€ ã€€ //åŒ¹é…æ­£æ•´æ•°^-[1-9]\d*$ ã€€ //åŒ¹é…è´Ÿæ•´æ•°^-?[1-9]\d*$ã€€ã€€ //åŒ¹é…æ•´æ•°^[1-9]\d*|0$ã€€ //åŒ¹é…éè´Ÿæ•´æ•°ï¼ˆæ­£æ•´æ•° + 0ï¼‰^-[1-9]\d*|0$ã€€ã€€ //åŒ¹é…éæ­£æ•´æ•°ï¼ˆè´Ÿæ•´æ•° + 0ï¼‰^[1-9]\d*\.\d*|0\.\d*[1-9]\d*$ã€€ã€€ //åŒ¹é…æ­£æµ®ç‚¹æ•°^-([1-9]\d*\.\d*|0\.\d*[1-9]\d*)$ã€€ //åŒ¹é…è´Ÿæµ®ç‚¹æ•°^-?([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0)$ã€€ //åŒ¹é…æµ®ç‚¹æ•°^[1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0$ã€€ã€€ //åŒ¹é…éè´Ÿæµ®ç‚¹æ•°ï¼ˆæ­£æµ®ç‚¹æ•° + 0ï¼‰^(-([1-9]\d*\.\d*|0\.\d*[1-9]\d*))|0?\.0+|0$ã€€ã€€//åŒ¹é…éæ­£æµ®ç‚¹æ•°ï¼ˆè´Ÿæµ®ç‚¹æ•° + 0ï¼‰è¯„æ³¨ï¼šå¤„ç†å¤§é‡æ•°æ®æ—¶æœ‰ç”¨ï¼Œå…·ä½“åº”ç”¨æ—¶æ³¨æ„ä¿®æ­£
åŒ¹é…ç‰¹å®šå­—ç¬¦ä¸²ï¼š^[A-Za-z]+$ã€€ã€€//åŒ¹é…ç”±26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²^[A-Z]+$ã€€ã€€//åŒ¹é…ç”±26ä¸ªè‹±æ–‡å­—æ¯çš„å¤§å†™ç»„æˆçš„å­—ç¬¦ä¸²^[a-z]+$ã€€ã€€//åŒ¹é…ç”±26ä¸ªè‹±æ–‡å­—æ¯çš„å°å†™ç»„æˆçš„å­—ç¬¦ä¸²^[A-Za-z0-9]+$ã€€ã€€//åŒ¹é…ç”±æ•°å­—å’Œ26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²^\w+$ã€€ã€€//åŒ¹é…ç”±æ•°å­—ã€26ä¸ªè‹±æ–‡å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
  </entry>
  <entry>
    <title>JavaScriptæ­£åˆ™è¡¨è¾¾å¼</title>
    <url>/dev-javascript-regex/</url>
    <content><![CDATA[å‰è¨€æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegular Expressionï¼‰ä¸»è¦æ˜¯ç”¨æ¥æè¿°ä¸€ä¸ªå¥æ³•è§„åˆ™çš„æ¨¡å¼ã€‚å…¶å®è¯´çš„é€šä¿—ä¸€ç‚¹ï¼Œå°±æ˜¯åˆ©ç”¨å­—ç¬¦å’Œå…ƒå­—ç¬¦çš„ç»„åˆï¼Œå¯¹ä¸€äº›ç¬¦åˆæ—¢å®šå¥æ³•çš„æ¨¡å¼è¿›è¡Œæ¨¡ç³ŠåŒ¹é…ã€‚å®ƒçš„ä¸»è¦åŠŸèƒ½æ˜¯æ–‡æœ¬æŸ¥è¯¢å’Œå­—ç¬¦ä¸²æ“ä½œã€‚æœ¬æ–‡è®¨è®ºä¸€ä¸‹JavaScriptä¸­çš„æ­£åˆ™è¡¨è¾¾å¼ç”¨æ³•ã€‚


å®šä¹‰æ­£åˆ™è¡¨è¾¾å¼1ã€å®šä¹‰æ­£åˆ™è¡¨è¾¾å¼æœ‰ä¸¤ç§å½¢å¼ï¼Œä¸€ç§æ˜¯æ™®é€šæ–¹å¼ï¼Œä¸€ç§æ˜¯æ„é€ å‡½æ•°æ–¹å¼ã€‚2ã€æ™®é€šæ–¹å¼ï¼švar reg=/è¡¨è¾¾å¼/é™„åŠ å‚æ•°è¡¨è¾¾å¼ï¼šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»£è¡¨äº†æŸç§è§„åˆ™ï¼Œå…¶ä¸­å¯ä»¥ä½¿ç”¨æŸäº›ç‰¹æ®Šå­—ç¬¦ï¼Œæ¥ä»£è¡¨ç‰¹æ®Šçš„è§„åˆ™ï¼Œåé¢ä¼šè¯¦ç»†è¯´æ˜ã€‚é™„åŠ å‚æ•°ï¼šç”¨æ¥æ‰©å±•è¡¨è¾¾å¼çš„å«ä¹‰ï¼Œç›®å‰ä¸»è¦æœ‰ä¸‰ä¸ªå‚æ•°ï¼šgï¼šä»£è¡¨å¯ä»¥è¿›è¡Œå…¨å±€åŒ¹é…ã€‚iï¼šä»£è¡¨ä¸åŒºåˆ†å¤§å°å†™åŒ¹é…ã€‚mï¼šä»£è¡¨å¯ä»¥è¿›è¡Œå¤šè¡ŒåŒ¹é…ã€‚ä¸Šé¢ä¸‰ä¸ªå‚æ•°ï¼Œå¯ä»¥ä»»æ„ç»„åˆï¼Œä»£è¡¨å¤åˆå«ä¹‰ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¸åŠ å‚æ•°ã€‚ä¾‹å­ï¼š
var reg=/a*b/;var reg=/abc+f/g;
3ã€æ„é€ å‡½æ•°æ–¹å¼ï¼švar reg=new RegExp(â€œè¡¨è¾¾å¼â€,â€é™„åŠ å‚æ•°â€);å…¶ä¸­â€œè¡¨è¾¾å¼â€ä¸â€œé™„åŠ å‚æ•°â€çš„å«ä¹‰ä¸ä¸Šé¢é‚£ç§å®šä¹‰æ–¹å¼ä¸­çš„å«ä¹‰ç›¸åŒã€‚ä¾‹å­ï¼š
var reg=new RegExp(&quot;a*b&quot;);var reg=new RegExp(&quot;abc+f&quot;,&quot;g&quot;);
4ã€æ™®é€šæ–¹å¼ä¸æ„é€ å‡½æ•°æ–¹å¼çš„åŒºåˆ«æ™®é€šæ–¹å¼ä¸­çš„è¡¨è¾¾å¼å¿…é¡»æ˜¯ä¸€ä¸ªå¸¸é‡å­—ç¬¦ä¸²ï¼Œè€Œæ„é€ å‡½æ•°ä¸­çš„è¡¨è¾¾å¼å¯ä»¥æ˜¯å¸¸é‡å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªjså˜é‡ï¼Œä¾‹å¦‚æ ¹æ®ç”¨æˆ·çš„è¾“å…¥æ¥ä½œä¸ºè¡¨è¾¾å¼å‚æ•°ç­‰ç­‰ï¼š
var reg=new RegExp(document.forms[0].exprfiled.value,&quot;g&quot;);

è¡¨è¾¾å¼æ¨¡å¼1ã€è¡¨è¾¾å¼æ¨¡å¼ï¼Œæ˜¯æŒ‡è¡¨è¾¾å¼çš„è¡¨è¾¾æ–¹å¼ä¸æ ·å¼ï¼Œ å³ var reg=/è¡¨è¾¾å¼/é™„åŠ å‚æ•° ä¸­çš„â€œè¡¨è¾¾å¼â€æ€æ ·å»æè¿°ï¼Ÿ2ã€ä»è§„èŒƒä¸Šè®²ï¼Œè¡¨è¾¾å¼æ¨¡å¼åˆ†ä¸ºç®€å•æ¨¡å¼å’Œå¤åˆæ¨¡å¼ã€‚3ã€ç®€å•æ¨¡å¼ï¼šæ˜¯æŒ‡é€šè¿‡æ™®é€šå­—ç¬¦çš„ç»„åˆæ¥è¡¨è¾¾çš„æ¨¡å¼ï¼Œä¾‹å¦‚
var reg=/abc0d/;
å¯è§ç®€å•æ¨¡å¼åªèƒ½è¡¨ç¤ºå…·ä½“çš„åŒ¹é…ã€‚4ã€å¤åˆæ¨¡å¼ï¼šæ˜¯æŒ‡å«æœ‰é€šé…ç¬¦æ¥è¡¨è¾¾çš„æ¨¡å¼ï¼Œä¾‹å¦‚ï¼š
var reg=/a+b?\w/;
å…¶ä¸­çš„+ã€?å’Œ\wéƒ½å±äºé€šé…ç¬¦ï¼Œä»£è¡¨ç€ç‰¹æ®Šçš„å«ä¹‰ã€‚å› æ­¤å¤åˆæ¨¡å¼å¯ä»¥è¡¨è¾¾æ›´ä¸ºæŠ½è±¡åŒ–çš„é€»è¾‘ã€‚å¤åˆæ¨¡å¼ä¸­å„ä¸ªé€šé…ç¬¦çš„å«ä¹‰åŠå…¶ä½¿ç”¨è¯·é˜…è¯»ä¸‹æ–‡ç»™å‡ºçš„å‚è€ƒæ–‡æ¡£ã€‚
è¡¨è¾¾å¼æ“ä½œ1ã€è¡¨è¾¾å¼æ“ä½œï¼Œåœ¨è¿™é‡Œæ˜¯æŒ‡å’Œè¡¨è¾¾å¼ç›¸å…³çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å°†ä»‹ç»å…­ä¸ªæ–¹æ³•ã€‚2ã€è¡¨è¾¾å¼å¯¹è±¡ï¼ˆRegExpï¼‰æ–¹æ³•ï¼š
ï¼ˆ1ï¼‰exec(str)ï¼Œè¿”å›strä¸­ä¸è¡¨è¾¾å¼ç›¸åŒ¹é…çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸”ä»¥æ•°ç»„çš„å½¢å¼è¡¨ç°ï¼Œå½“ç„¶å¦‚æœè¡¨è¾¾å¼ä¸­å«æœ‰æ•æ‰ç”¨çš„å°æ‹¬å·ï¼Œåˆ™è¿”å›çš„æ•°ç»„ä¸­ä¹Ÿå¯èƒ½å«æœ‰()ä¸­çš„åŒ¹é…å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š
var regx=/\d+/;var rs=regx.exec(&quot;3432ddf53&quot;);
è¿”å›çš„rså€¼ä¸ºï¼š{3432}
var regx2=new RegExp(&quot;ab(\d+)c&quot;);var rs2=regx2.exec(&quot;ab234c44&quot;);
è¿”å›çš„rs2å€¼ä¸ºï¼š{ab234c,234}å¦å¤–ï¼Œå¦‚æœæœ‰å¤šä¸ªåˆé€‚çš„åŒ¹é…ï¼Œåˆ™ç¬¬ä¸€æ¬¡æ‰§è¡Œexecè¿”å›ä¸€ä¸ªç¬¬ä¸€ä¸ªåŒ¹é…ï¼Œæ­¤æ—¶ç»§ç»­æ‰§è¡Œexecï¼Œåˆ™ä¾æ¬¡è¿”å›ç¬¬äºŒä¸ªç¬¬ä¸‰ä¸ªåŒ¹é…ã€‚ä¾‹å¦‚ï¼š
var regx=/user\d/g;var rs=regx.exec(&quot;ddduser1dsfuser2dd&quot;);var rs1=regx.exec(&quot;ddduser1dsfuser2dd&quot;);
åˆ™rsçš„å€¼ä¸º{user1}ï¼Œrs1çš„å€¼ä¸º{user2}ï¼Œå½“ç„¶æ³¨æ„regxä¸­çš„gå‚æ•°æ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™æ— è®ºexecæ‰§è¡Œå¤šå°‘æ¬¡ï¼Œéƒ½è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…ã€‚åé¢è¿˜æœ‰ç›¸å…³å†…å®¹æ¶‰åŠåˆ°å¯¹æ­¤æƒ³è±¡çš„è§£é‡Šã€‚
ï¼ˆ2ï¼‰test(str)ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²stræ˜¯å¦åŒ¹é…è¡¨è¾¾å¼ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ä¾‹å¦‚ï¼š
var regx=/user\d+/g;var flag=regx.test(&quot;user12dd&quot;);
flagçš„å€¼ä¸ºtrueã€‚
3ã€Stringå¯¹è±¡æ–¹æ³•
ï¼ˆ1ï¼‰match(expr)ï¼Œè¿”å›ä¸exprç›¸åŒ¹é…çš„ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œå¦‚æœæ²¡æœ‰åŠ å‚æ•°gï¼Œåˆ™è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…ï¼ŒåŠ å…¥å‚æ•°gåˆ™è¿”å›æ‰€æœ‰çš„åŒ¹é…ä¾‹å­ï¼š
var regx=/user\d/g;var str=&quot;user13userddduser345&quot;;var rs=str.match(regx);
rsçš„å€¼ä¸ºï¼š{user1,user3}
ï¼ˆ2ï¼‰search(expr)ï¼Œè¿”å›å­—ç¬¦ä¸²ä¸­ä¸exprç›¸åŒ¹é…çš„ç¬¬ä¸€ä¸ªåŒ¹é…çš„indexå€¼ã€‚ä¾‹å­ï¼š
var regx=/user\d/g;var str=&quot;user13userddduser345&quot;;var rs=str.search(regx);
rsçš„å€¼ä¸ºï¼š0
ï¼ˆ3ï¼‰replace(expr,str)ï¼Œå°†å­—ç¬¦ä¸²ä¸­åŒ¹é…exprçš„éƒ¨åˆ†æ›¿æ¢ä¸ºstrã€‚å¦å¤–åœ¨replaceæ–¹æ³•ä¸­ï¼Œsträ¸­å¯ä»¥å«æœ‰ä¸€ç§å˜é‡ç¬¦å·$ï¼Œæ ¼å¼ä¸º$nï¼Œä»£è¡¨åŒ¹é…ä¸­è¢«è®°ä½çš„ç¬¬nçš„åŒ¹é…å­—ç¬¦ä¸²ï¼ˆæ³¨æ„å°æ‹¬å·å¯ä»¥è®°å¿†åŒ¹é…ï¼‰ã€‚ä¾‹å­ï¼š
var regx=/user\d/g;var str=&quot;user13userddduser345&quot;;var rs=str.replace(regx,&quot;00&quot;);
rsçš„å€¼ä¸ºï¼š003userddd0045ä¾‹å­2ï¼š
var regx=/u(se)r\d/g;var str=&quot;user13userddduser345&quot;;var rs=str.replace(regx,&quot;$1&quot;);
rsçš„å€¼ä¸ºï¼šse3userdddse45å¯¹äºreplace(expr,str)æ–¹æ³•è¿˜è¦ç‰¹åˆ«æ³¨æ„ä¸€ç‚¹ï¼Œå¦‚æœexpræ˜¯ä¸€ä¸ªè¡¨è¾¾å¼å¯¹è±¡åˆ™ä¼šè¿›è¡Œå…¨å±€æ›¿æ¢ï¼ˆæ­¤æ—¶è¡¨è¾¾å¼å¿…é¡»é™„åŠ å‚æ•°gï¼Œå¦åˆ™ä¹Ÿåªæ˜¯æ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…ï¼‰ï¼Œå¦‚æœexpræ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œåˆ™åªä¼šæ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…çš„éƒ¨åˆ†ï¼Œä¾‹å¦‚ï¼š
var regx=&quot;user&quot;var str=&quot;user13userddduser345&quot;;var rs=str.replace(regx,&quot;00&quot;);
rsçš„å€¼ä¸ºï¼š 0013userddduser345
ï¼ˆ4ï¼‰split(expr)ï¼Œå°†å­—ç¬¦ä¸²ä»¥åŒ¹é…exprçš„éƒ¨åˆ†åšåˆ†å‰²ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè€Œä¸”è¡¨è¾¾å¼æ˜¯å¦é™„åŠ å‚æ•°géƒ½æ²¡æœ‰å…³ç³»ï¼Œç»“æœæ˜¯ä¸€æ ·çš„ã€‚ä¾‹å­ï¼š
var regx=/user\d/g;var str=&quot;user13userddduser345&quot;;var rs=str.split(regx);
rsçš„å€¼ä¸ºï¼š{3userddd,45}
è¡¨è¾¾å¼ç›¸å…³å±æ€§1ã€è¡¨è¾¾å¼ç›¸å…³å±æ€§ï¼Œæ˜¯æŒ‡å’Œè¡¨è¾¾å¼ç›¸å…³çš„å±æ€§ï¼Œå¦‚ä¸‹é¢çš„å½¢å¼ï¼š
var regx=/myexpr/;var rs=regx.exec(str);
å…¶ä¸­ï¼Œå’Œè¡¨è¾¾å¼è‡ªèº«regxç›¸å…³çš„å±æ€§æœ‰ä¸¤ä¸ªï¼Œå’Œè¡¨è¾¾å¼åŒ¹é…ç»“æœrsç›¸å…³çš„å±æ€§æœ‰ä¸‰ä¸ªï¼Œä¸‹é¢å°†é€ä¸€ä»‹ç»ã€‚2ã€å’Œè¡¨è¾¾å¼è‡ªèº«ç›¸å…³çš„ä¸¤ä¸ªå±æ€§ï¼š
ï¼ˆ1ï¼‰lastIndexï¼Œè¿”å›å¼€å§‹ä¸‹ä¸€ä¸ªåŒ¹é…çš„ä½ç½®ï¼Œæ³¨æ„å¿…é¡»æ˜¯å…¨å±€åŒ¹é…ï¼ˆè¡¨è¾¾å¼ä¸­å¸¦æœ‰gå‚æ•°ï¼‰æ—¶ï¼ŒlastIndexæ‰ä¼šæœ‰ä¸æ–­è¿”å›ä¸‹ä¸€ä¸ªåŒ¹é…å€¼ï¼Œå¦åˆ™è¯¥å€¼ä¸ºæ€»æ˜¯è¿”å›ç¬¬ä¸€ä¸ªä¸‹ä¸€ä¸ªåŒ¹é…ä½ç½®ï¼Œä¾‹å¦‚ï¼š
var regx=/user\d/;var rs=regx.exec(&quot;sdsfuser1dfsfuser2&quot;);var lastIndex1=regx.lastIndex;rs=regx.exec(&quot;sdsfuser1dfsfuser2&quot;);var lastIndex2=regx.lastIndex;rs=regx.exec(&quot;sdsfuser1dfsfuser2&quot;);var lastIndex3=regx.lastIndex; 
ä¸Šé¢lastIndex1ä¸º9ï¼Œç¬¬äºŒä¸ªlastIndex2ä¹Ÿä¸º9ï¼Œç¬¬ä¸‰ä¸ªä¹Ÿæ˜¯9ï¼›å¦‚æœregx=/user/d/gï¼Œåˆ™ç¬¬ä¸€ä¸ªä¸º9ï¼Œç¬¬äºŒä¸ªä¸º18ï¼Œç¬¬ä¸‰ä¸ªä¸º0ã€‚
ï¼ˆ2ï¼‰sourceï¼Œè¿”å›è¡¨è¾¾å¼å­—ç¬¦ä¸²è‡ªèº«ã€‚ä¾‹å¦‚ï¼š
var regx=/user\d/;var rs=regx.exec(&quot;sdsfuser1dfsfuser2&quot;);var source=regx.source;
sourceçš„å€¼ä¸ºuser\d3ã€å’ŒåŒ¹é…ç»“æœç›¸å…³çš„ä¸‰ä¸ªå±æ€§ï¼š
ï¼ˆ1ï¼‰indexï¼Œè¿”å›å½“å‰åŒ¹é…çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼š
var regx=/user\d/;var rs=regx.exec(&quot;sdsfuser1dfsfuser2&quot;);var index1=rs.index;rs=regx.exec(&quot;sdsfuser1dfsfuser2&quot;);var index2=rs.index; rs=regx.exec(&quot;sdsfuser1dfsfuser2&quot;);var index3=rs.index; 
index1ä¸º4ï¼Œindex2ä¸º4ï¼Œindex3ä¸º4ï¼Œå¦‚æœè¡¨è¾¾å¼åŠ å…¥å‚æ•°gï¼Œåˆ™index1ä¸º4ï¼Œindex2ä¸º13ï¼Œindex3ä¼šæŠ¥é”™ï¼ˆindexä¸ºç©ºæˆ–ä¸æ˜¯å¯¹è±¡ï¼‰ã€‚
ï¼ˆ2ï¼‰inputï¼Œç”¨äºåŒ¹é…çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼š
var regx=/user\d/;var rs=regx.exec(&quot;sdsfuser1dfsfuser2&quot;);var input=rs.input;
inputçš„å€¼ä¸ºsdsfuser1dfsfuser2ã€‚
ï¼ˆ3ï¼‰[0]ï¼Œè¿”å›åŒ¹é…ç»“æœä¸­çš„ç¬¬ä¸€ä¸ªåŒ¹é…å€¼ï¼Œå¯¹äºmatchè€Œè¨€å¯èƒ½è¿”å›ä¸€ä¸ªå¤šå€¼çš„æ•°å­—ï¼Œåˆ™é™¤äº†[0]å¤–ï¼Œè¿˜å¯ä»¥å–[1]ã€[2]ç­‰ç­‰ã€‚ä¾‹å¦‚ï¼š
var regx=/user\d/;var rs=regx.exec(&quot;sdsfuser1dfsfuser2&quot;);var value1=rs[0];rs=regx.exec(&quot;sdsfuser1dfsfuser2&quot;);var value2=rs[0]; 
value1çš„å€¼ä¸ºuser1,value2çš„å€¼ä¸ºuser2
å®é™…åº”ç”¨1ã€å®é™…åº”ç”¨ä¸€æè¿°ï¼šæœ‰ä¸€è¡¨å•ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªâ€œç”¨æˆ·åâ€inputåŸŸè¦æ±‚ï¼šæ±‰å­—ï¼Œè€Œä¸”ä¸èƒ½å°‘äº2ä¸ªæ±‰å­—ï¼Œä¸èƒ½å¤šäº4ä¸ªæ±‰å­—ã€‚å®ç°ï¼š
&lt;script&gt;function checkForm(obj)&#123;     var username=obj.username.value;     var regx=/^[\u4e00-\u9fa5]&#123;2,4&#125;$/g;     if(!regx.test(username))&#123;               alert(&quot;Invalid username!&quot;);               return false;      &#125;     return true;&#125;&lt;/script&gt;&lt;form name=&quot;myForm&quot; onSubmit=&quot;return checkForm(this)&quot;&gt;    &lt;input type=&quot;text&quot; name=&quot;username&quot;/&gt;    &lt;input type=&quot;submit&quot; vlaue=&quot;submit&quot;/&gt;&lt;/form&gt;
2ã€å®é™…åº”ç”¨äºŒæè¿°ï¼šç»™å®šä¸€ä¸ªå«æœ‰htmlæ ‡è®°çš„å­—ç¬¦ä¸²ï¼Œè¦æ±‚å°†å…¶ä¸­çš„htmlæ ‡è®°å»æ‰ã€‚å®ç°ï¼š
&lt;script&gt;function toPlainText(htmlStr)&#123;   var regx=/&lt;[^&gt;]*&gt;|&lt;\/[^&gt;]*&gt;/gm;   var str=htmlStr.replace(regx,&quot;&quot;);   return str;&#125;&lt;/script&gt;&lt;form name=&quot;myForm&quot;&gt;    &lt;textarea id=&quot;htmlInput&quot;&gt;&lt;/textarea&gt;    &lt;input type=&quot;button&quot; value=&quot;submit&quot; onclick=&quot;toPlainText(document.getElementById(&#x27;htmlInput&#x27;).value&quot;/&gt;&lt;/form&gt;

å‚è€ƒæ–‡æ¡£jsæ­£åˆ™è¡¨è¾¾å¼è¯­æ³•http://blog.csdn.net/zaifendou/article/details/5746988
æ­£åˆ™è¡¨è¾¾å¼30åˆ†é’Ÿå…¥é—¨æ•™ç¨‹http://demo.voidking.com/reprint/æ­£åˆ™è¡¨è¾¾å¼/æ­£åˆ™è¡¨è¾¾å¼30åˆ†é’Ÿå…¥é—¨æ•™ç¨‹.htm
å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼http://demo.voidking.com/reprint/æ­£åˆ™è¡¨è¾¾å¼/å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼.htm
æ­£åˆ™è¡¨è¾¾å¼é€ŸæŸ¥è¡¨http://demo.voidking.com/reprint/æ­£åˆ™è¡¨è¾¾å¼/æ­£åˆ™è¡¨è¾¾å¼é€ŸæŸ¥è¡¨.htm
æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•å™¨http://demo.voidking.com/reprint/æ­£åˆ™è¡¨è¾¾å¼/æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•å™¨.htm
æ­£åˆ™è¡¨è¾¾å¼åœ¨çº¿æµ‹è¯•å™¨è¯¦æƒ…è¯·è§ï¼šhttp://demo.voidking.com/reprint/regexpal/
deerchaoå¤§ä¾ æ­£åˆ™è¡¨è¾¾å¼åŸæ–‡åœ°å€http://www.jb51.net/tools/zhengze.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>wordé€šé…ç¬¦çš„ä½¿ç”¨</title>
    <url>/hobby-word-wildcard/</url>
    <content><![CDATA[å¸¸è§çš„å‡ ç§é€šé…ç¬¦çš„ä½¿ç”¨æ–¹æ³•ä»»æ„å•ä¸ªå­—ç¬¦ï¼šâ€œ?â€å¯ä»¥ä»£è¡¨ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œè¾“å…¥å‡ ä¸ªâ€œ?â€å°±ä»£è¡¨å‡ ä¸ªæœªçŸ¥å­—ç¬¦ã€‚å¦‚ï¼šè¾“å…¥â€œ? å›½â€å°±å¯ä»¥æ‰¾åˆ°è¯¸å¦‚â€œä¸­å›½â€ã€â€œç¾å›½â€ã€â€œå¾·å›½â€ç­‰å­—ç¬¦ï¼›è¾“å…¥â€œ???å›½â€å¯ä»¥æ‰¾åˆ°â€œå­ŸåŠ æ‹‰å›½â€ç­‰å­—ç¬¦ã€‚
ä»»æ„å¤šä¸ªå­—ç¬¦ï¼šâ€œ*â€å¯ä»¥ä»£è¡¨ä»»æ„å¤šä¸ªå­—ç¬¦ã€‚å¦‚ï¼šè¾“å…¥â€œ*å›½â€å°±å¯ä»¥æ‰¾åˆ°â€œä¸­å›½â€ã€â€œç¾å›½â€ã€ â€œå­ŸåŠ æ‹‰å›½â€ç­‰å­—ç¬¦ã€‚
æŒ‡å®šå­—ç¬¦ä¹‹ä¸€ï¼šâ€œ[]â€æ¡†å†…çš„å­—ç¬¦å¯ä»¥æ˜¯æŒ‡å®šè¦æŸ¥æ‰¾çš„å­—ç¬¦ä¹‹ä¸€ï¼Œå¦‚ï¼šè¾“å…¥â€œ[ä¸­ç¾]å›½â€å°±å¯ä»¥æ‰¾åˆ°â€œä¸­å›½â€ã€â€œç¾å›½â€ã€‚ åˆå¦‚ï¼šè¾“å…¥â€œth[iu]gâ€ï¼Œå°±å¯æŸ¥æ‰¾åˆ°â€œthighâ€å’Œâ€œthugâ€ã€‚ è¾“å…¥â€œ[å­¦ç¡•åš]å£«â€ï¼ŒæŸ¥æ‰¾åˆ°çš„å°†ä¼šæ˜¯å­¦å£«ã€å£«ã€ç¡•å£«ã€åšå£«ã€‚


æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å•ä¸ªå­—ç¬¦ï¼šâ€œ[x-x]â€å¯ä»¥æŒ‡å®šæŸä¸€èŒƒå›´å†…çš„ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œå¦‚ï¼šè¾“å…¥â€œ[a-c]mendâ€çš„è¯ï¼ŒWordæŸ¥æ‰¾å·¥å…·å°±å¯ä»¥æ‰¾åˆ°â€œamendâ€ã€â€œbmendâ€ã€â€œcmendâ€ç­‰å­—ç¬¦å†…å®¹ã€‚
æ’é™¤æŒ‡å®šèŒƒã€æ’é™¤æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å•ä¸ªå­—ç¬¦ï¼š â€œ[!x-x]â€å¯ä»¥ç”¨æ¥æ’é™¤æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œå¦‚ï¼šè¾“å…¥â€œ[!a-c]â€çš„è¯ï¼Œwordç¨‹åºå°±å¯ä»¥æ‰¾åˆ°â€œgoodâ€ã€â€œseeâ€ã€â€œtheseâ€ç­‰ç›®æ ‡å­—ç¬¦ï¼Œè€Œæ‰€æœ‰åŒ…å«å­—ç¬¦aã€bã€cä¹‹ç±»çš„å†…å®¹éƒ½ä¸ä¼šåœ¨æŸ¥æ‰¾ç»“æœä¸­å‡ºç°ã€‚
æŒ‡å®šå‰ä¸€å­—ç¬¦çš„ä¸ªæ•°ï¼šâ€œ{n}â€å¯ä»¥ç”¨æ¥æŒ‡å®šè¦æŸ¥æ‰¾çš„å­—ç¬¦ä¸­åŒ…å«å‰ä¸€å­—ç¬¦çš„ä¸ªæ•°ï¼Œå¦‚ï¼šè¾“å…¥â€œcho{1} seâ€å°±æ˜¯è¯´åŒ…å«1ä¸ªå‰ä¸€å­—ç¬¦â€œoâ€ï¼Œå¯ä»¥æ‰¾åˆ°â€œchoseâ€ï¼Œè¾“å…¥â€œcho{2}seâ€å°±æ˜¯è¯´åŒ…å«2ä¸ªå‰ä¸€å­—ç¬¦â€œoâ€ï¼Œå¯ä»¥æ‰¾åˆ°ï¼Œ â€œchooseâ€ã€‚
æŒ‡å®šå‰ä¸€å­—ç¬¦ã€æŒ‡å®šå‰ä¸€å­—ç¬¦æ•°èŒƒå›´ï¼šâ€œ{x,x}â€å¯ä»¥ç”¨æŒ‡å®šè¦æŸ¥æ‰¾å­—ç¬¦ä¸­å‰ä¸€å­—ç¬¦æ•°èŒƒå›´ï¼Œå¦‚ï¼šè¾“å…¥â€œcho{1,2}â€ï¼Œåˆ™è¯´æ˜åŒ…å«å‰ä¸€å­—ç¬¦â€œoâ€æ•°ç›®èŒƒå›´æ˜¯1-2ä¸ªï¼Œåˆ™å¯ä»¥æ‰¾åˆ°â€œchoseâ€ã€â€œchooseâ€ã€‚
ä¸€ä¸ªä»¥ä¸Šçš„å‰ä¸€å­—ç¬¦ï¼šâ€œ@â€å¯ä»¥ç”¨æ¥æŒ‡å®šè¦æŸ¥æ‰¾å­—ç¬¦ä¸­åŒ…å«ä¸€ä¸ªä»¥ä¸Šçš„å‰ä¸€å­—ç¬¦ï¼Œå¦‚ï¼šè¾“å…¥â€ï¼Œå°±å¯ä»¥æ‰¾åˆ°ï¼Œ â€œchoseâ€ã€â€œchooseâ€ç­‰å­—ç¬¦ã€‚
æŒ‡å®šèµ·å§‹å­—ç¬¦ä¸²ï¼šâ€œ&lt;â€å¯ä»¥ç”¨æ¥æŒ‡å®šè¦æŸ¥æ‰¾å­—ç¬¦ä¸­çš„èµ·å§‹å­—ç¬¦ä¸²ï¼Œå¦‚ï¼šè¾“å…¥â€œ&lt;agâ€ï¼Œå°±è¯´æ˜è¦æŸ¥æ‰¾çš„å­—ç¬¦çš„èµ·å§‹å­—ç¬¦ä¸ºâ€œagâ€ï¼Œå¯ä»¥æ‰¾åˆ° â€œagoâ€ã€â€œagreeâ€ã€â€œagainâ€ç­‰å­—ç¬¦ã€‚è¾“å…¥â€œ&lt;teâ€çš„è¯ï¼Œå¯èƒ½æŸ¥åˆ°â€œtenâ€ã€â€œteaâ€ç­‰ã€‚
æŒ‡å®šç»“å°¾å­—ç¬¦ä¸²ï¼š â€œ&gt;â€å¯ä»¥ç”¨æ¥æŒ‡å®šè¦æŸ¥æ‰¾å­—ç¬¦ä¸­çš„ç»“å°¾å­—ç¬¦ä¸²ï¼Œå¦‚ï¼šè¾“å…¥â€œer&gt;â€ï¼Œå°±è¯´æ˜è¦æŸ¥æ‰¾çš„å­—ç¬¦çš„ç»“å°¾å­—ç¬¦ä¸ºâ€œerâ€ï¼Œå¯ä»¥æ‰¾åˆ° â€œverâ€ã€â€œherâ€ã€â€œloverâ€ç­‰ç­‰ã€‚è¾“å…¥â€œen&gt;â€ï¼Œ å°±è¯´æ˜è¦æŸ¥æ‰¾åˆ°ä»¥â€œenâ€ç»“å°¾çš„æ‰€æœ‰ç›®æ ‡å¯¹è±¡ï¼Œå¯èƒ½æ‰¾åˆ°â€œtenâ€ã€â€œpenâ€ã€â€œmenâ€ï¼›è¾“å…¥â€œup&gt;â€ï¼Œå°±è¯´æ˜è¦æŸ¥æ‰¾åˆ°ä»¥â€œupâ€ç»“å°¾çš„æ‰€æœ‰ç›®æ ‡å¯¹è±¡ï¼Œä¾‹å¦‚ä¼šæ‰¾åˆ°â€œsetupâ€ã€â€œcupâ€ç­‰ç­‰ã€‚
å»é™¤å›è½¦æƒ³å¿…å¤§å®¶éƒ½æœ‰è¿‡è¿™ç§ç»å†ï¼Œä»ç½‘é¡µä¸Šæˆ–è€…txtæ–‡æ¡£ä¸Šå¤åˆ¶ä¸€æ®µæ–‡å­—åˆ°Wordä¸­ï¼Œæœ¬è¯¥æ˜¯ä¸€æ®µå®Œæ•´å†…å®¹çš„æ–‡å­—ï¼Œè¢«å›è½¦åˆ†æˆäº†ä¸€è¡Œè¡Œçš„ï¼ˆå¦‚ä¸‹å›¾ï¼‰ï¼Œç¼–è¾‘èµ·æ¥éå¸¸ä¸æ–¹ä¾¿ï¼Œä¸€ä¸ªä¸ªçš„åˆ é™¤åˆå¤ªéº»çƒ¦ï¼Œå¤ªæµªè´¹æ—¶é—´ï¼Œè¿™ä¸ªæ—¶å€™å¤§å®¶ä¸å¦¨æ¥è¯•è¯•ä¸‹é¢çš„æ–¹æ³•ã€‚1ã€é€‰ä¸­è¯¥æ®µæ–‡å­—ï¼ŒCtrl + H ï¼Œæ‰“å¼€æŸ¥æ‰¾æ›¿æ¢çª—å£ï¼›2ã€å•å‡»â€œæ›´å¤šâ€æŒ‰é’®ï¼Œåœ¨ä½¿ç”¨é€šé…ç¬¦å‰é¢é€‰ä¸­ï¼›3ã€åœ¨æŸ¥æ‰¾å†…å®¹å¤„è¾“å…¥([!ã€‚ï¼šâ€¦â€¦ï¼Ÿï¼ï¼‰])^13{1,}ï¼Œåœ¨æ›¿æ¢ä¸ºå¤„è¾“å…¥\1ï¼Œå•å‡»å…¨éƒ¨æ›¿æ¢ï¼›4ã€å…³é—­æŸ¥æ‰¾æ›¿æ¢çª—å£ï¼Œæˆ‘ä»¬å°±ä¼šå¥‡è¿¹èˆ¬åœ°å‘ç°ï¼ŒåŸå…ˆè¢«å›è½¦ä¹±ä¸ƒå…«ç³Ÿçš„å†…å®¹ï¼Œå˜ä¸ºäº†å®Œæ•´çš„ä¸€æ®µã€‚
ä¸ºå®Œå½¢å¡«ç©ºä¸­æ·»åŠ ä¸‹åˆ’çº¿åœ¨åˆ¶ä½œè‹±è¯­è¯•å·çš„é˜…è¯»ç†è§£æ—¶ï¼Œæœ€éº»çƒ¦çš„å°±æ˜¯åœ¨è‹±è¯­çš„æ–‡ç« ä¸­è¾“å…¥å¸¦ä¸‹åˆ’çº¿çš„æ•°å­—äº†ã€‚å¸¸è§„çš„æ–¹æ³•æ˜¯ç”¨â€œæ ¼å¼åˆ·â€å·¥å…·ä¸€ä¸ªä¸€ä¸ªåœ°å¤åˆ¶æ ¼å¼ï¼Œèƒ½ä¸èƒ½ç”¨æ ¼å¼æ›¿æ¢çš„æ–¹æ³•æ¥å®ç°å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚
åœ¨è¾“å…¥è¿™äº›å¸¦æœ‰ä¸‹åˆ’çº¿çš„æ•°å­—æ—¶æ— éœ€è®¾ç½®ä»»ä½•æ ¼å¼æˆ–åœ¨å…¶å·¦å³æ·»åŠ è¿‡å¤šçš„ç©ºæ ¼ï¼Œè¾“å…¥å®Œæˆåé€‰ä¸­è¯¥æ®µæ–‡æœ¬ï¼ŒæŒ‰â€œCtrl+Hâ€ç»„åˆé”®æ‰“å¼€â€œæŸ¥æ‰¾å’Œæ›¿æ¢â€å¯¹è¯æ¡†ï¼Œåˆ‡æ¢åˆ°â€œæ›¿æ¢â€é€‰é¡¹å¡ï¼Œå•å‡»â€œé«˜çº§â€æŒ‰é’®ï¼Œå‹¾é€‰â€œä½¿ç”¨é€šé…ç¬¦â€å¤é€‰æ¡†ï¼Œåœ¨â€œæŸ¥æ‰¾å†…å®¹â€æ¡†ä¸­è¾“å…¥â€œ[0-9]{1ï¼Œ}â€(å…¶ä¸­â€œ[0-9]{1ï¼Œ}â€è¡¨ç¤º1ä¸ªä»¥ä¸Šçš„æ•°å­—);åœ¨â€œæ›¿æ¢ä¸ºâ€æ¡†ä¸­è¾“å…¥â€œ^32^&amp;^32â€(å³åœ¨æŸ¥æ‰¾åˆ°çš„æ•°å­—å‰åå„åŠ ä¸€ä¸ªåŠè§’ç©ºæ ¼ï¼Œå…¶ä¸­â€œ^32â€ä¸ºåŠè§’ç©ºæ ¼ï¼Œâ€œ^&amp;â€ä¸ºæŸ¥æ‰¾åˆ°çš„æ•°å­—ï¼Œå¦‚å›¾1)ã€‚
å•å‡»å¯¹è¯æ¡†ä¸‹æ–¹çš„â€œæ ¼å¼â€æŒ‰é’®ï¼Œé€‰ä¸­â€œå­—ä½“â€å‘½ä»¤ï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©éœ€è¦çš„â€œä¸‹åˆ’çº¿çº¿å½¢â€ï¼Œç¡®å®šåè¿”å›æ›¿æ¢å¯¹è¯æ¡†ä¸­ï¼Œå•å‡»â€œå…¨éƒ¨æ›¿æ¢â€æŒ‰é’®å¯ä»¥çœ‹åˆ°æ›¿æ¢åçš„æ•ˆæœäº†(å¦‚å›¾2)ã€‚
å°æç¤ºï¼šå½“å‰æ“ä½œæ˜¯å¯¹é€‰ä¸­çš„æ–‡æœ¬è¿›è¡Œæ“ä½œçš„ï¼Œåœ¨æ›¿æ¢å®Œæ¯•åç³»ç»Ÿä¼šæç¤ºè¦ä¸è¦æŸ¥æ‰¾æ–‡æ¡£çš„å…¶ä½™éƒ¨åˆ†ï¼Œæ­¤æ—¶åº”é€‰â€œå¦â€ã€‚
å°†æ•°å­—é—´çš„å¥å·æ”¹ä¸ºå°æ•°ç‚¹åœ¨æ–‡æœ¬å½•å…¥æ—¶ç»å¸¸ä¼šé‡åˆ°å°†æ•°å­—é—´çš„å°æ•°ç‚¹è¯¯è¾“å…¥æˆå¥å·â€œã€‚â€çš„æƒ…å†µï¼Œåœ¨æ›¿æ¢æ—¶è¦æ³¨æ„å¦‚æœå¥å·å‡ºç°åœ¨æ•°å­—ä¸­é—´é‚£å°±éœ€è¦å°†å…¶è½¬æ¢ä¸ºå°æ•°ç‚¹å³â€œ.â€;å¦‚æœå¥å·å‡ºç°åœ¨æ•°å­—çš„æœ«å°¾å°±æ— éœ€æ›¿æ¢ï¼Œæ‰€ä»¥ä¸èƒ½ç®€å•åœ°æŸ¥æ‰¾å¥å·ç„¶åå†æ›¿æ¢ä¸ºå°æ•°ç‚¹ã€‚
ä½¿ç”¨é€šé…ç¬¦æŸ¥æ‰¾çš„æ–¹æ³•å°±å¯ä»¥è½»æ¾è§£å†³è¿™ä¸ªé—®é¢˜äº†ã€‚æ‰“å¼€æ›¿æ¢å¯¹è¯æ¡†ï¼Œå‹¾é€‰â€œä½¿ç”¨é€šé…ç¬¦â€å¤é€‰æ¡†ï¼Œåœ¨â€œæŸ¥æ‰¾å†…å®¹â€æ¡†ä¸­è¾“å…¥â€œ([0-9]{1ï¼Œ})ã€‚([0-9]{1ï¼Œ})â€ï¼Œå…¶å«ä¹‰æ˜¯æŸ¥æ‰¾æ•°å­—ä¸­é—´å«æœ‰â€œã€‚â€çš„å­—ç¬¦ä¸²;åœ¨â€œæ›¿æ¢ä¸ºâ€æ¡†ä¸­è¾“å…¥â€œ\1.\2â€(å…¶ä¸­â€œ\1â€å’Œâ€œ\2â€åˆ†åˆ«ä»£è¡¨åŸæ•°å­—å­—ç¬¦ä¸²ä¸­â€œã€‚â€å·¦å³çš„ä¸¤ä¸ªæ•°å­—è¡¨è¾¾å¼ï¼Œå¦‚å›¾3)ï¼Œå•å‡»â€œå…¨éƒ¨æ›¿æ¢â€æŒ‰é’®ï¼Œæ•°å­—é—´çš„â€œã€‚â€å°±å…¨éƒ¨æ›¿æ¢ä¸ºå°æ•°ç‚¹äº†ã€‚
åˆ é™¤ä¸­è‹±æ–‡æ··æ’ä¸­çš„ç©ºæ ¼å¦‚æœé‡åˆ°ä¸­è‹±æ–‡æ··æ’çš„æ–‡æ¡£ä¸­æœ‰è®¸å¤šçš„ç©ºæ ¼ï¼Œæœ‰æ—¶è¿ç»­çš„ç©ºæ ¼è¿˜ä¸æ­¢ä¸€ä¸ªï¼Œå¦‚ä½•å»æ‰ä¸­æ–‡ä¸­çš„ç©ºæ ¼åŒæ—¶ä¿ç•™è‹±è¯­å•è¯é—´çš„ç©ºæ ¼å‘¢ï¼Ÿç”±äºæ¶‰åŠçš„æ¡ä»¶æ¯”è¾ƒå¤æ‚ï¼Œä¸€æ¬¡æ›¿æ¢çš„ç¡®æœ‰äº›å›°éš¾ï¼Œæ‰€ä»¥åœ¨å¤šæ¬¡å°è¯•åå‘ç°ç”¨ä¸‹é¢çš„ä¸¤æ­¥æ›¿æ¢å°±å¯ä»¥å®ç°äº†ã€‚
é¦–å…ˆè¦å°†æ–‡æ¡£ä¸­çš„å¤šä¸ªè¿ç»­çš„ç©ºæ ¼å˜æˆä¸€ä¸ªåŠè§’ç©ºæ ¼ï¼Œæ–¹æ³•æ˜¯åœ¨å‹¾é€‰â€œä½¿ç”¨é€šé…ç¬¦â€çš„æ›¿æ¢å¯¹è¯æ¡†ä¸­æŸ¥æ‰¾â€œ^32{1ï¼Œ}â€(å…¶å«ä¹‰æ˜¯ä¸€ä¸ªä»¥ä¸Šçš„ç©ºæ ¼)ï¼Œåœ¨â€œæ›¿æ¢ä¸ºâ€æ¡†ä¸­è¾“å…¥â€œ^32â€ï¼Œè¿™æ ·æ›¿æ¢åè¿ç»­çš„å¤šä¸ªç©ºæ ¼å°±æ›¿æ¢ä¸ºä¸€ä¸ªåŠè§’ç©ºæ ¼äº†ã€‚
ç„¶åå°†â€œæŸ¥æ‰¾å†…å®¹â€æ›´æ”¹ä¸ºâ€œ([!a-zA-Z])( )([!a-zï¼ŒA-Z])â€(å³æŸ¥æ‰¾éè‹±æ–‡å­—ç¬¦é—´çš„ç©ºæ ¼ï¼Œå…¶ä¸­â€œ[!a-zA-Z]â€çš„å«ä¹‰æ˜¯é™¤å¤§å°å†™å­—æ¯ä»¥å¤–çš„å…¶ä»–ä»»æ„å­—ç¬¦)ï¼Œåœ¨â€œæ›¿æ¢ä¸ºâ€æ¡†ä¸­è¾“å…¥â€œ\1\3â€ï¼Œå•å‡»â€œå…¨éƒ¨æ›¿æ¢â€æŒ‰é’®åå°±å¯ä»¥çœ‹åˆ°é™¤è‹±æ–‡é—´çš„ç©ºæ ¼ä¿ç•™ä¹‹å¤–ï¼Œå…¶ä½™å¤šä½™çš„ç©ºæ ¼éƒ½è¢«åˆ é™¤äº†(å¦‚å›¾4)ã€‚
å°ç»“wordä¸­çš„é€šé…ç¬¦æ›¿æ¢åŠŸèƒ½çš„ç¡®å¼ºå¤§ï¼Œç”¨å¥½å®ƒå¯ä»¥å¸®æˆ‘ä»¬è§£å†³æ—¥å¸¸åŠå…¬ä¸­çš„è®¸å¤šéš¾é¢˜ã€‚
è¯´åˆ°é€šé…ç¬¦ï¼Œä¸å¾—ä¸æåˆ°æ­£åˆ™è¡¨è¾¾å¼ã€‚åŸºæœ¬åŒºåˆ«ï¼Œå°±æ˜¯é€šé…ç¬¦æ˜¯ç³»ç»Ÿå‘½ä»¤ä½¿ç”¨ï¼Œä¸€èˆ¬ç”¨æ¥åŒ¹é…æ–‡ä»¶åï¼›è€Œæ­£åˆ™è¡¨è¾¾å¼æ˜¯æ“ä½œå­—ç¬¦ä¸²ï¼Œä»¥è¡Œä¸ºå•ä½æ¥åŒ¹é…å­—ç¬¦ä¸²ä½¿ç”¨çš„ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªåŒºåˆ«ï¼Œæ”¾åœ¨windowsä¸­ä¼¼ä¹ä¸å¤ªåˆé€‚ï¼Œå› ä¸ºwordæ°æ°ä½¿ç”¨é€šé…ç¬¦æ¥å¤„ç†å­—ç¬¦ä¸²ã€‚
linuxä¸­ï¼Œé€šé…ç¬¦å¤šç”¨åœ¨æ–‡ä»¶åä¸Šï¼Œæ¯”å¦‚æŸ¥æ‰¾findã€lsã€cpï¼›åœ¨æ–‡æœ¬è¿‡æ»¤å·¥å…·é‡Œï¼Œéƒ½æ˜¯ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ¯”å¦‚grepã€awkã€sedï¼Œæ˜¯é’ˆå¯¹æ–‡ä»¶çš„å†…å®¹çš„ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>windows</tag>
        <tag>word</tag>
      </tags>
  </entry>
  <entry>
    <title>å…³äºQQçš„é—®é¢˜</title>
    <url>/hobby-qq-question/</url>
    <content><![CDATA[1ã€QQç¾¤å…±äº«æ— æ³•æ‰“å¼€è§£å†³åŠæ³•ï¼šå‡çº§QQã€‚
2ã€qqéŸ³ä¹æ’­æ”¾æ­Œçš„æ—¶å€™ï¼ŒQQæ¥äº†æ¶ˆæ¯å£°éŸ³å°±å˜å°è§£å†³åŠæ³•ï¼šæ‰“å¼€ æ§åˆ¶é¢æ¿-&gt;é€‰æ‹©â€˜å£°éŸ³â€™-&gt;é€‰æ‹©â€˜é€šä¿¡â€™-&gt;é€‰æ‹©â€˜ä¸æ‰§è¡Œä»»ä½•æ“ä½œâ€™ã€‚
3ã€å»æ‰è…¾è®¯ç½‘è¿·ä½ ç‰ˆå°çª—å£ç³»ç»Ÿè®¾ç½®ï¼Œèµ„è®¯æé†’ï¼Œå»æ‰å‹¾
]]></content>
      <categories>
        <category>computer</category>
      </categories>
  </entry>
  <entry>
    <title>wordæ ¼å¼åˆ·</title>
    <url>/hobby-word-format-brush/</url>
    <content><![CDATA[å‰è¨€æ ¼å¼åˆ·ä½äºâ€œæ ¼å¼â€å·¥å…·æ ä¸Šï¼Œç›¸å½“å¥½è®¤ï¼Œå°±æ˜¯ä¸€æŠŠâ€œåˆ·å­â€ã€‚ç”¨å®ƒâ€œåˆ·â€æ ¼å¼ï¼Œå¯ä»¥å¿«é€Ÿå°†æŒ‡å®šæ®µè½æˆ–æ–‡æœ¬çš„æ ¼å¼å»¶ç”¨åˆ°å…¶ä»–æ®µè½æˆ–æ–‡æœ¬ä¸Šï¼Œè®©æˆ‘ä»¬å…å—é‡å¤è®¾ç½®ä¹‹è‹¦ã€‚ 
å¤åˆ¶æ–‡å­—æ ¼å¼1ï¼é€‰ä¸­è¦å¼•ç”¨æ ¼å¼çš„æ–‡æœ¬ã€‚ 
2ï¼å•å‡»â€œæ ¼å¼â€å·¥å…·æ ä¸Šçš„â€œæ ¼å¼åˆ·â€æŒ‰é’®ï¼Œæ­¤æ—¶é¼ æ ‡æŒ‡é’ˆæ˜¾ç¤ºä¸ºâ€œIâ€å½¢æ—ä¸€ä¸ªåˆ·å­å›¾æ¡ˆã€‚ 
3ï¼æŒ‰ä½å·¦é”®åˆ·ï¼ˆå³æ‹–é€‰ï¼‰è¦åº”ç”¨æ–°æ ¼å¼çš„æ–‡å­—ã€‚ 


å¤åˆ¶æ®µè½æ ¼å¼1ï¼é€‰ä¸­è¦å¼•ç”¨æ ¼å¼çš„æ•´ä¸ªæ®µè½ï¼ˆå¯ä»¥ä¸åŒ…æ‹¬æœ€åçš„æ®µè½æ ‡è®°ï¼‰ï¼Œæˆ–å°†æ’å…¥ç‚¹å®šä½åˆ°æ­¤æ®µè½å†…ï¼Œä¹Ÿå¯ä»¥ä»…é€‰ä¸­æ­¤æ®µè½æœ«å°¾çš„æ®µè½æ ‡è®°ã€‚ 
2ï¼å•å‡»â€œæ ¼å¼â€å·¥å…·æ ä¸Šçš„â€œæ ¼å¼åˆ·â€æŒ‰é’®ã€‚
3ï¼åœ¨åº”ç”¨è¯¥æ®µè½æ ¼å¼çš„æ®µè½ä¸­å•å‡»ï¼Œå¦‚æœåŒæ—¶è¦å¤åˆ¶æ®µè½æ ¼å¼å’Œæ–‡æœ¬æ ¼å¼ï¼Œåˆ™éœ€æ‹–é€‰æ•´ä¸ªæ®µè½ï¼ˆå¯ä»¥ä¸åŒ…æ‹¬æœ€åçš„æ®µè½æ ‡è®°ï¼‰ã€‚ 
æç¤º1ï¼å•å‡»â€œæ ¼å¼åˆ·â€æŒ‰é’®ï¼Œä½¿ç”¨ä¸€æ¬¡åï¼ŒæŒ‰é’®å°†è‡ªåŠ¨å¼¹èµ·ï¼Œä¸èƒ½ç»§ç»­ä½¿ç”¨ï¼›å¦‚è¦è¿ç»­å¤šæ¬¡ä½¿ç”¨ï¼Œå¯åŒå‡»â€œæ ¼å¼åˆ·â€æŒ‰é’®ã€‚å¦‚è¦åœæ­¢ä½¿ç”¨ï¼Œå¯æŒ‰é”®ç›˜ä¸Šçš„Escé”®ï¼Œæˆ–å†æ¬¡å•å‡»â€œæ ¼å¼åˆ·â€æŒ‰é’®ã€‚æ‰§è¡Œå…¶ä»–å‘½ä»¤æˆ–æ“ä½œï¼ˆå¦‚â€œå¤åˆ¶â€ï¼‰ï¼Œä¹Ÿå¯ä»¥è‡ªåŠ¨åœæ­¢ä½¿ç”¨æ ¼å¼åˆ·ã€‚ 
2ï¼å¤åˆ¶æ ¼å¼çš„ç»„åˆé”®ï¼šCtrl+Shift+Cã€Ctrl+Shift+Vã€‚è€Œä¸”Ctrl+Shift+Vè¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œåªè¦æ›¾ç»å¤åˆ¶è¿‡æŸç§æ ¼å¼ï¼Œå°±å¯ä»¥åå¤ä½¿ç”¨æ­¤å¿«æ·é”®å°†æ­¤æ ¼å¼åº”ç”¨åˆ°å…¶ä»–æ®µè½æˆ–æ–‡å­—ä¸Šï¼Œä¸å—å…¶é—´å…¶ä»–æ“ä½œçš„å½±å“ï¼Œç›´åˆ°å¤åˆ¶äº†ä¸€ç§æ–°çš„æ ¼å¼ã€‚ 
3ï¼ä½¿ç”¨ä¸Šè¿°æ–¹æ³•ï¼Œå¯ä»¥åœ¨ä¸åŒçš„Wordæ–‡æ¡£é—´è¿›è¡Œæ ¼å¼å¤åˆ¶ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>windows</tag>
        <tag>word</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¡Œé¢ç¾åŒ–</title>
    <url>/hobby-desktop-beautify/</url>
    <content><![CDATA[å‰è¨€çˆ±æ‹‰é£çš„å°ä¼™ä¼´ï¼Œæ€»å–œæ¬¢æŠŠç”µè„‘é¼“æ£çš„èŠ±é‡Œèƒ¡å“¨ã€‚éƒåŒå­¦ä¹Ÿç ”ç©¶è¿‡ä¸€æ®µæ—¶é—´ï¼Œç¾å…¶åæ›°â€œä¸ªæ€§â€ï¼Œä»Šå¤©å’Œå¤§å®¶æ¢è®¨ä¸€ä¸‹ï¼ˆwin7ä¸ºä¾‹ï¼‰ã€‚
æˆ‘çš„æ¡Œé¢éƒåŒå­¦çš„æ¡Œé¢ç»å†è¿‡å‡ æ¬¡å˜é©ï¼Œä¸‹é¢è¿™å¼ å›¾ï¼Œæ˜¯ç°åœ¨çš„æ ·å­ï¼ˆä½¿ç”¨rainmeteråˆ¶ä½œï¼‰ã€‚
å¾®è½¯ä¸»é¢˜åœ¨æ¡Œé¢ä¸Šå³å‡»ï¼Œä¸ªæ€§åŒ–ï¼Œè”æœºè·å–æ›´å¤šä¸»é¢˜ã€‚ä¸‹è½½å®‰è£…æ›¿æ¢å³å¯ã€‚
è¿™ç§ä¸»é¢˜ï¼Œå…¶å®åªæ˜¯æ¡Œé¢èƒŒæ™¯çš„æ›¿æ¢ï¼Œç¾åŒ–æ•ˆæœä¸æ˜¯å¾ˆæ˜æ˜¾ã€‚
ç¬¬ä¸‰æ–¹ä¸»é¢˜å®‰è£…ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œæ˜¯æœ€ç®€ä¾¿çš„ä¸€ç§ç¾åŒ–æ¡Œé¢çš„æ–¹å¼ã€‚ç”¨æ—¶å°‘ï¼Œè§æ•ˆå¥½ï¼Œå¤§éƒ¨åˆ†å°ä¼™ä¼´å–œé—»ä¹è§ã€‚
å®‰è£…1ã€ç™¾åº¦â€œwin7ä¸»é¢˜â€ï¼Œé€‰æ‹©ä¸€ä¸ªä¸»é¢˜ä¸‹è½½ç½‘ç«™è¿›å…¥ã€‚2ã€æŒ‘é€‰å–œæ¬¢çš„ä¸»é¢˜ï¼Œä¸‹è½½ã€‚ä¸€èˆ¬æ˜¯å‹ç¼©åŒ…ï¼Œè§£å‹åä¼šæœ‰ä¸€ä¸ªä»¥â€œ.exeâ€ç»“å°¾çš„æ–‡ä»¶ï¼Œå®‰è£…å³å¯ã€‚
å…å®‰è£…â€œå®‰è£…â€å°±æ„å‘³ç€ï¼Œå¾€æ³¨å†Œè¡¨å†™å…¥ä¸œè¥¿ï¼Œè¿˜è¦åˆ›å»ºå¾ˆå¤šä¸å¿…è¦çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚æ‰€ä»¥ï¼Œåªè¦æ¡ä»¶å…è®¸ï¼ŒéƒåŒå­¦å–œæ¬¢ä½¿ç”¨ç»¿è‰²è½¯ä»¶ï¼Œä¹Ÿå°±æ˜¯å…å®‰è£…è½¯ä»¶ã€‚ä¸»é¢˜ä¹Ÿæœ‰åŠæ³•è·³è¿‡å®‰è£…å®ç°ç¾åŒ–æ¡Œé¢ã€‚
åŸç†ï¼šä¸»é¢˜å®‰è£…ï¼Œå®é™…ä¸Šä¹Ÿå°±æ˜¯å¾€Themesã€Wallpaperå’ŒCursorsæ–‡ä»¶å¤¹é‡Œé¢å†™å…¥æ–‡ä»¶ï¼Œç„¶åæ›´æ”¹è®¾ç½®ã€‚æˆ‘ä»¬åªè¦è·å¾—win7ä¸»é¢˜ä¸­å†™å…¥è¿™ä¸‰ä¸ªæ–‡ä»¶å¤¹çš„æ–‡ä»¶ï¼Œå°±å¯ä»¥å®ç°å…å®‰è£…ã€‚æ€ä¹ˆæï¼Ÿè™šæ‹Ÿæœºå®‰è£…win7ä¸»é¢˜ï¼Œç„¶åä»è¿™ä¸‰ä¸ªæ–‡ä»¶å¤¹æŠŠæ–‡ä»¶æ‹·è´å‡ºæ¥ï¼Œæ”¾å…¥å®¢æˆ·æœºå¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œç¨åŠ è®¾ç½®å³å¯ã€‚
ä¸»é¢˜å­˜æ”¾ç›®å½•ï¼šC:\Windows\Rsources\ThemesC:\Windows\Web\WallpaperC:\Windows\Cursors
ä¸‹é¢æ˜¯éƒåŒå­¦ä½¿ç”¨è¿‡çš„ä¸»é¢˜ï¼Œå…å®‰è£…ç‰ˆï¼Œåˆ†äº«ç»™å¤§å®¶ï¼šhttp://yunpan.cn/cKDN8aRdgqEtX  è®¿é—®å¯†ç  15ce
è¿™æ¬¡åˆ†äº«ä¸åŒ…å«é¼ æ ‡å…‰æ ‡ï¼Œå…³äºé¼ æ ‡å…‰æ ‡çš„ä½¿ç”¨å’Œåˆ¶ä½œï¼Œå°†ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« è¯¦ç»†è®¨è®ºã€‚

é—®é¢˜ä½¿ç”¨ghosté•œåƒå®‰è£…çš„ç³»ç»Ÿï¼Œå®‰è£…ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œä¸€èˆ¬æ²¡æœ‰é—®é¢˜ã€‚ä½†æ˜¯ï¼Œæ­£ç‰ˆWin7ç³»ç»Ÿï¼ˆçº¯å‡€ç‰ˆç³»ç»Ÿï¼‰ï¼Œå®‰è£…äº†win7ä¸»é¢˜ä¹‹åï¼Œä»»åŠ¡æ å’Œå¼€å§‹èœå•éƒ½å˜æˆç™½è‰²çš„ï¼Œå¾ˆéš¾çœ‹ï¼Œä¸ä¸»é¢˜é¢„è§ˆå›¾ä¸ä¸€æ ·,çª—å£é¢œè‰²é‚£é‡Œæ˜¾ç¤ºæ˜¯Windowsç»å…¸ã€‚è§£å†³åŠæ³•æ˜¯ï¼šä¸»é¢˜ç ´è§£ã€‚
åœ¨æ­¤é™„ä¸Šwin7ä¸»é¢˜ç ´è§£å·¥å…·ï¼šhttp://yunpan.cn/cKDN59AfDPUqR  è®¿é—®å¯†ç  ce5e
rainmeterrainmeterï¼ˆé›¨æ»´ï¼‰ï¼Œä¸ªäººæ¯”è¾ƒæ»¡æ„çš„ä¸€æ¬¾æ¡Œé¢ç¾åŒ–å·¥å…·ï¼Œæˆ‘ä»¬æ¥ç ”ç©¶ä¸€ä¸‹å®ƒçš„ä½¿ç”¨æ–¹æ³•ã€‚ä»¥ä¸‹éƒ¨åˆ†å†…å®¹æ¥è‡ªç™¾åº¦è´´å§ã€‚
æ­¥éª¤ä¸€ï¼šä¸‹è½½å®‰è£…å®˜ç½‘åœ°å€ï¼šhttp://rainmeter.cn/cms/ ï¼Œä¸‹è½½å®‰è£…å³å¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ€å¥½å‹¾é€‰å¼€æœºå¯åŠ¨ã€‚
æ­¥éª¤äºŒï¼šå…³é—­çš®è‚¤è¿è¡ŒRainmeterï¼ŒRainmeterä¼šè‡ªåŠ¨åŠ è½½è½¯ä»¶è‡ªå¸¦çš„çš®è‚¤ï¼Œå°±æ˜¯å››ä¸ªé»‘ä¸æºœä¸¢çš„çš®è‚¤ã€‚ä¸€èˆ¬äººæ˜¯ä¸ä¼šå–œæ¬¢è¿™å››ä¸ªçš®è‚¤çš„ï¼Œåªè¦åœ¨è¿™å››ä¸ªé»‘ä¸æºœä¸¢çš„çš®è‚¤ä¸Šç‚¹å‡»é¼ æ ‡å³é”®ã€‚æ‰¾åˆ°â€œå…³é—­çš®è‚¤â€ã€é€ä¸€å…³æ‰å³å¯ã€‚
çš®è‚¤åˆ†äº«ä»¥ä¸‹æ˜¯éƒåŒå­¦å½“å¹´æœé›†çš„ä¸€äº›rainmeterçš®è‚¤ï¼Œåˆ†äº«ç»™å¤§å®¶ï¼šhttp://yunpan.cn/cKDh9Hcmuy6qK  è®¿é—®å¯†ç  2bba
æ­¥éª¤ä¸‰ï¼šä½¿ç”¨çš®è‚¤å‡è®¾å¤§å®¶å·²ç»ä¸‹è½½å¥½äº†è‡ªå·±å–œæ¬¢çš„çš®è‚¤ï¼Œè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨çš®è‚¤äº†ã€‚1ã€å‡è®¾ä½ çš„ç³»ç»Ÿç”¨æˆ·åæ˜¯Administratorï¼Œé‚£ä¹ˆæ‰“å¼€C:\Users\Administrator\Documents\Rainmeter\Skinsï¼ŒæŠŠä¸‹è½½å¥½çš„çš®è‚¤ï¼ˆåŒ…æ‹¬æ–‡ä»¶å¤¹ï¼‰å¤åˆ¶è¿›è¿™ä¸ªæ–‡ä»¶å¤¹ã€‚æˆ‘ä»¬å‡è®¾ä½ ä»¬ä¸‹è½½äº†éƒåŒå­¦åˆ†äº«çš„çš®è‚¤ï¼Œé‚£ä¹ˆï¼Œå°±æŠŠâ€œæˆ‘çš„rainmeterâ€æ–‡ä»¶å¤¹å¤åˆ¶åˆ°Skinsæ–‡ä»¶å¤¹ä¸‹ã€‚
2ã€æ‰“å¼€rainmeterï¼Œå°±å¯ä»¥çœ‹åˆ°åˆšæ‰å¤åˆ¶åˆ°Skinsçš„çš®è‚¤ï¼Œå¦‚æœæ²¡æœ‰ï¼Œè¯·åˆ·æ–°ã€‚
3ã€åŒå‡»é‚£äº›â€œ*.iniâ€æ–‡ä»¶ï¼Œçš®è‚¤å°±ä¼šå‡ºç°åœ¨æ¡Œé¢ä¸Šï¼Œå†æ¬¡åŒå‡»ï¼Œæ¶ˆå¤±ã€‚
4ã€é€‰ä¸­ä¸€ä¸ªâ€œ*.iniâ€æ–‡ä»¶ï¼Œç¼–è¾‘ï¼Œè‡ªå®šä¹‰çš®è‚¤çš„å„é¡¹å±æ€§ã€‚æˆ‘ä»¬ä»¥â€œçº¿æ¡0.INIâ€ä¸ºä¾‹ï¼Œä¿®æ”¹ä¸€ä¸‹åç§°å’Œè·¯å¾„ï¼Œå°±å¯ä»¥æˆä¸ºé€‚ç”¨äºè‡ªå·±ç”µè„‘çš„å¿«æ·æ–¹å¼ã€‚
è¿›é˜¶ä»Šå¤©æˆ‘ä»¬ä¸»è¦è®¨è®ºçš„ï¼Œåªæ˜¯rainmeterçš„ä½¿ç”¨ã€‚å¦‚æœä½ æƒ³æ·±å…¥å­¦ä¹ ï¼Œæ¯”å¦‚çš®è‚¤çš„åˆ¶ä½œç­‰ï¼Œå°±éœ€è¦ç³»ç»Ÿçš„å­¦ä¹ äº†ã€‚è¿™é‡Œåˆ†äº«ä¸€æœ¬ã€Šrainmeterä¸­æ–‡æ‰‹å†Œç¬¬ä¸‰ç‰ˆã€‹ï¼šhttp://yunpan.cn/cKzsFRKGVKDcX  è®¿é—®å¯†ç  b570
å°ç»“ç¾æ— æ­¢å¢ƒï¼Œæ›´å¤šæ–¹æ³•å’Œå·¥å…·ï¼Œç­‰å¾…æˆ‘ä»¬å»å‘ç°ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title>wordæ’ç‰ˆé«˜çº§è¿›é˜¶</title>
    <url>/hobby-word-senior/</url>
    <content><![CDATA[å‰è¨€åœ¨å…¬å¸å®ä¹ çš„æ—¶å€™ï¼Œå†™è¿‡éœ€æ±‚åˆ†ææ–‡æ¡£ã€æ¦‚è¦è®¾è®¡æ–‡æ¡£ã€è¯¦ç»†è®¾è®¡æ–‡æ¡£ã€‚å‰äº›å¤©ï¼Œå¸®åŠ©å°ä¼™ä¼´æ•´ç†äº†ä¸€ä¸‹æ¯•ä¸šè®¾è®¡è®ºæ–‡ã€‚è€Œè¿™äº›é•¿ç¯‡æ–‡æ¡£ï¼Œéƒ½éœ€è¦ç”¨åˆ°ä¸€äº›é«˜çº§çš„wordæŠ€å·§ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬ä»¥æ¯•ä¸šè®¾è®¡è®ºæ–‡ä¸ºä¾‹ï¼Œä¸€èµ·æ¥å­¦ä¹ ä¸€ä¸‹ã€‚éƒåŒå­¦ä½¿ç”¨çš„WPSï¼ŒOfficeåŸºæœ¬ç›¸åŒã€‚æœ¬æ–‡ä¸ºå›¾æ–‡æ•™ç¨‹ï¼ŒåŠ è½½ä¼šæ¯”è¾ƒæ…¢ï¼Œè¯·å°ä¼™ä¼´ç¨ç­‰ä¸€ä¼šã€‚
è¦æ±‚
ç›®å½•çš„å†…å®¹å’Œç¼–æ’ç›®å½•åªéœ€ç¼–æ’åˆ°äºŒçº§æ ‡é¢˜ï¼Œä¸‰çº§æ ‡é¢˜åŠä»¥ä¸‹å†…å®¹å¯ä¸ç¼–å…¥ç›®å½•ç›®å½•é¢˜å¤´ï¼ˆæ ¼å¼ï¼šä¸‰å·é»‘ä½“å±…ä¸­ï¼Œå­—é—´ç©ºä¸€æ ¼ï¼‰ç›®å½•å†…å®¹ï¼ˆæ ¼å¼ï¼šå››å·å®‹ä½“ï¼Œè¡Œè·24ç£…ï¼‰

æ‘˜è¦ï¼ˆ1ï¼‰ä¸­æ–‡é¢˜ç›®ï¼šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰é¢˜ç›®ï¼ˆæ ¼å¼ï¼šå°äºŒå·é»‘ä½“å±…ä¸­ï¼‰å‰¯æ ‡é¢˜ï¼ˆæ ¼å¼ï¼šå°ä¸‰å·é»‘ä½“ï¼‰é¢˜ç›®å¯ä»¥åˆ†ä¸º1æˆ–2è¡Œå±…ä¸­æ‰“å°ï¼ˆ2ï¼‰ä¸­æ–‡æ‘˜è¦å’Œä¸­æ–‡å…³é”®è¯ï¼šæ‘˜è¦é¢˜å¤´ï¼ˆæ ¼å¼ï¼šä¸‰å·é»‘ä½“å±…ä¸­ï¼Œå­—é—´ç©ºä¸€æ ¼ï¼‰æ‘˜è¦å†…å®¹ï¼ˆæ ¼å¼ï¼šå°å››å·æ¥·ä½“ï¼Œ1.5å€è¡Œè·ï¼‰å…³é”®è¯ï¼ˆæ ¼å¼ï¼šå››å·é»‘ä½“ï¼‰å…³é”®è¯å†…å®¹ï¼ˆæ ¼å¼ï¼šå°å››å·æ¥·ä½“ï¼‰æ‘˜è¦é¢˜å¤´ä¸ä¸­æ–‡é¢˜ç›®ä¹‹é—´ç©ºä¸€è¡Œï¼Œå…³é”®è¯ä¸æ‘˜è¦å†…å®¹ä¹‹é—´ç©ºä¸€è¡Œã€‚ï¼ˆ3ï¼‰è‹±æ–‡é¢˜ç›®ï¼šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰è‹±æ–‡é¢˜ç›®ï¼ˆæ ¼å¼ï¼šå°äºŒå·æ–°ç½—é©¬ä½“ï¼ˆåŠ ç²—ï¼‰å±…ä¸­ï¼‰å‰¯æ ‡é¢˜ï¼ˆæ ¼å¼ï¼šä¸‰å·æ–°ç½—é©¬ä½“åŠ ç²—ï¼‰é¢˜ç›®å¯ä»¥åˆ†ä¸º1æˆ–2è¡Œå±…ä¸­æ‰“å°ã€‚ï¼ˆ4ï¼‰è‹±æ–‡æ‘˜è¦å’Œè‹±æ–‡å…³é”®è¯ï¼šè‹±æ–‡æ‘˜è¦é¢˜å¤´â€”â€œAbstractâ€ï¼ˆæ ¼å¼ï¼šä¸‰å·æ–°ç½—é©¬ä½“ï¼ˆåŠ ç²—ï¼‰å±…ä¸­ï¼‰è‹±æ–‡æ‘˜è¦å†…å®¹ï¼ˆæ ¼å¼ï¼šå°å››å·æ–°ç½—é©¬ä½“ï¼Œ 1.5å€è¡Œè·ï¼‰è‹±æ–‡å…³é”®è¯â€”â€œKey wordsâ€ï¼ˆæ ¼å¼ï¼šå››å·æ–°ç½—é©¬ä½“åŠ ç²—ï¼‰è‹±æ–‡å…³é”®è¯å†…å®¹ï¼ˆæ ¼å¼ï¼šå°å››å·æ–°ç½—é©¬ä½“ï¼Œ1.5å€è¡Œè·ï¼‰è‹±æ–‡æ‘˜è¦é¢˜å¤´ä¸è‹±æ–‡é¢˜ç›®ä¹‹é—´ç©ºä¸€è¡Œï¼Œè‹±æ–‡å…³é”®è¯ä¸è‹±æ–‡æ‘˜è¦å†…å®¹ä¹‹é—´ç©ºä¸€è¡Œã€‚ï¼ˆ5ï¼‰ä¸­ã€è‹±æ–‡æ‘˜è¦åˆ†ä¸ºä¸¤é¡µã€‚

æ­£æ–‡å­—ä½“ï¼ˆ1ï¼‰æ­£æ–‡ï¼šæ‰“å°ä¸­æ–‡ç”¨å®‹ä½“å°å››å·å­—ï¼Œè‹±æ–‡ç”¨æ–°ç½—é©¬ä½“12å·å­—ï¼Œè¡Œè·ä¸ºå›ºå®šå€¼20ç£…ï¼Œé¦–è¡Œç¼©è¿›ã€‚ç‰ˆé¢ä¸Šç©º2.5cmï¼Œä¸‹ç©º2cmï¼Œå·¦ç©º2.5cmï¼Œå³ç©º2cmã€‚ï¼ˆ2ï¼‰ä¸€çº§æ ‡é¢˜ï¼ˆç« ï¼Œå¦‚â€œ1â€ï¼Œä¹Ÿå¯ç”¨â€œä¸€â€ï¼‰ï¼ˆæ ¼å¼ï¼šä¸‰å·é»‘ä½“å±…ä¸­ï¼‰ï¼ˆ3ï¼‰äºŒçº§æ ‡é¢˜ï¼ˆèŠ‚ï¼Œå¦‚â€œ1.1â€ï¼Œä¹Ÿå¯ç”¨â€œï¼ˆä¸€ï¼‰â€ï¼‰ï¼ˆæ ¼å¼ï¼šå°ä¸‰å·é»‘ä½“å±…å·¦ï¼‰ï¼ˆ4ï¼‰ä¸‰çº§æ ‡é¢˜ï¼ˆå°èŠ‚ï¼Œå¦‚â€œ1.1.1â€ï¼Œä¹Ÿå¯ç”¨â€œ1â€ï¼‰ï¼ˆæ ¼å¼ï¼šå››å·é»‘ä½“å±…å·¦ï¼‰ï¼ˆ5ï¼‰å››çº§æ ‡é¢˜ï¼ˆèŠ‚å†…å°èŠ‚ï¼Œå¦‚â€œ1.1.1.1â€ï¼Œä¹Ÿå¯ç”¨â€œï¼ˆ1ï¼‰â€ï¼‰ï¼ˆæ³¨ï¼šå°å››å·å®‹ä½“å±…å·¦ï¼‰å»ºè®®æ ‡é¢˜æœ€å¥½ä¸è¦è¶…è¿‡ä¸‰çº§ï¼Œå¦åˆ™é€‚å¾—å…¶åï¼Œä¼šå¼•èµ·æ ¼å¼æ··ä¹±ã€‚

é¡µçœ‰å’Œé¡µè„šï¼ˆ1ï¼‰é¡µçœ‰é¡µçœ‰é‡‡ç”¨ä¸‹åˆ—å½¢å¼ï¼š


ï¼ˆ2ï¼‰é¡µè„šç›®å½•å’Œæ‘˜è¦ç­‰å†…å®¹çš„é¡µè„šä¸ºå±…ä¸­ã€è¿ç»­çš„å¤§å†™ç½—é©¬æ•°å­—é¡µç ï¼ˆâ… ã€â…¡ã€â…¢ã€â…£ â€¦â€¦ï¼‰ã€‚æ­£æ–‡åŠå…¶ä»¥åéƒ¨åˆ†ï¼Œå…¶é¡µè„šä¸ºå±…ä¸­ã€è¿ç»­çš„é˜¿æ‹‰ä¼¯æ•°å­—é¡µç ï¼ˆ1ã€2ã€3 â€¦â€¦ï¼‰ã€‚ä¸å®œé‡‡ç”¨åˆ†ç« çš„éè¿ç»­é¡µç ã€‚ï¼ˆ3ï¼‰åˆ†ç« èŠ‚æ˜¾ç¤ºé¡µçœ‰é¡µè„šçš„æ–¹æ³•ï¼Œè§ã€Šæ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰æ’°å†™è§„èŒƒæ¨¡æ¿ã€‹ã€‚

å›¾ã€è¡¨ã€å…¬å¼ã€è®¡é‡å•ä½å’Œæ•°å­—ç”¨æ³•çš„è§„å®šï¼ˆ1ï¼‰å›¾ï¼šæ¯å¹…å›¾åº”æœ‰â€œå›¾åºâ€å’Œâ€œå›¾é¢˜â€ï¼Œâ€œå›¾åºâ€å’Œâ€œå›¾é¢˜â€åº”æ”¾åœ¨å›¾ä½ä¸‹æ–¹å±…ä¸­å¤„ã€‚æ’å›¾ä¸€èˆ¬æŒ‰å…¨æ–‡ç¼–æ’ï¼Œå¦‚å›¾1ã€å›¾2â€¦â€¦ï¼Œæ’å›¾è¾ƒå¤šæ—¶å¯æŒ‰ç« æ’åºï¼Œå¦‚å›¾1.1ã€å›¾1.2â€¦â€¦ã€‚â€œå›¾é¢˜â€ã€â€œå›¾å·â€å­—ä½“ç”¨å°äº”å·é»‘ä½“ã€‚ï¼ˆ2ï¼‰è¡¨æ ¼ï¼šæ¯ä¸ªè¡¨æ ¼åº”æœ‰è‡ªå·±çš„â€œè¡¨åºâ€å’Œâ€œè¡¨é¢˜â€ï¼Œâ€œè¡¨åºâ€å’Œâ€œè¡¨é¢˜â€åº”å†™åœ¨è¡¨æ ¼ä¸Šæ–¹å±…ä¸­æ’æ”¾ï¼Œè¡¨åºåç©ºä¸€æ ¼ä¹¦å†™â€œè¡¨é¢˜â€ã€‚â€œè¡¨åºâ€é‡‡ç”¨é˜¿æ‹‰ä¼¯æ•°å­—ç¼–æ’åºå·ï¼Œå¦‚è¡¨1ï¼Œè¡¨2ç­‰ï¼Œè¡¨æ ¼è¾ƒå¤šæ—¶å¯æŒ‰ç« æ’åºï¼Œå¦‚è¡¨1.1ï¼Œè¡¨2.3ç­‰ã€‚è¡¨æ ¼å…è®¸ä¸‹é¡µç»­å†™ï¼Œç»­å†™è¡¨é¢˜å¯çœç•¥ï¼Œä½†â€œè¡¨å¤´â€åº”é‡å¤å†™ï¼Œå¹¶åœ¨å³ä¸Šæ–¹å†™â€œç»­è¡¨Ã—Ã—â€ã€‚è¡¨å†…åŒä¸€æ çš„æ•°å­—å¿…é¡»ä¸Šä¸‹å¯¹é½ã€‚è¡¨å†…å¿…é¡»æŒ‰è§„å®šçš„ç¬¦å·æ³¨æ˜å•ä½ã€‚â€œè¡¨åºâ€ã€â€œè¡¨é¢˜â€å­—ä½“ç”¨å°äº”å·é»‘ä½“ã€‚ï¼ˆ3ï¼‰å…¬å¼ï¼šå…¬å¼ä¹¦å†™åº”åœ¨æ–‡ä¸­å¦èµ·ä¸€è¡Œï¼Œå±…ä¸­ä¹¦å†™ï¼Œå…¬å¼çš„ç¼–å·ç”¨åœ†æ‹¬å·æ‹¬èµ·æ”¾åœ¨å…¬å¼å³è¾¹è¡Œæœ«ï¼ŒæŒ‰ç« é¡ºåºç¼–æ’ï¼Œå…¬å¼ä¸ç¼–å·ä¹‹é—´ä¸åŠ è™šçº¿ã€‚ï¼ˆ4ï¼‰è®¡é‡å•ä½å’Œæ•°å­—ï¼šæ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ ï¼‰ä¸­çš„é‡å’Œå•ä½å¿…é¡»ç¬¦åˆä¸­åäººæ°‘å…±å’Œå›½çš„å›½å®¶æ ‡å‡†GB3100ï½GB3102-93ã€‚æ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ ï¼‰ä¸­çš„æµ‹é‡ã€ç»Ÿè®¡æ•°æ®ä¸€å¾‹ç”¨é˜¿æ‹‰ä¼¯æ•°å­—ï¼›åœ¨å™è¿°ä¸­ï¼Œä¸€èˆ¬ä¸å®œç”¨é˜¿æ‹‰ä¼¯æ•°å­—ã€‚

æ³¨é‡Šæ³¨é‡Šæ˜¯å¯¹è®ºè‘—ä¸­æŸä¸€ç‰¹å®šå†…å®¹æ‰€ä½œçš„è¡¥å……è¯´æ˜æˆ–è¿›ä¸€æ­¥è§£é‡Šã€‚æ³¨é‡Šä¸€èˆ¬ç”¨é¡µæœ«æ³¨å³å°†æ³¨æ–‡æ”¾äºåŠ æ³¨é¡µä¸‹ç«¯ï¼Œä¸å¯ç”¨ä¸­æ³¨ï¼ˆå¤¹åœ¨æ­£æ–‡ä¸­æ³¨ï¼‰ã€‚æ³¨é‡Šåªé™äºå†™åœ¨æ³¨é‡Šç¬¦å·å‡ºç°çš„åŒé¡µã€‚æ³¨é‡Šæ ¼å¼è§ä¸‹ä¾‹ã€‚ä¾‹å¦‚ï¼š



å‚è€ƒæ–‡çŒ®å‚è€ƒæ–‡çŒ®åº”æŒ‰æ–‡ä¸­å¼•ç”¨çš„å…ˆåé¡ºåºï¼Œä»¥é˜¿æ‹‰ä¼¯æ•°å­—è¿ç»­ç¼–å·ï¼Œåœ¨æ­£æ–‡å¼•ç”¨çš„ç›¸åº”ä½ç½®å³ä¸Šè§’ï¼Œç”¨[ ]åŠ åºå·æ ‡å‡ºã€‚å‚è€ƒæ–‡çŒ®çš„æœ‰å…³ä¿¡æ¯ç½®äºæ–‡æœ«ã€‚å‚è€ƒæ–‡çŒ®æ–‡æœ«è‘—å½•æ ¼å¼ä¸ºï¼šä¸“è‘—: [åºå·]ä½œè€….ä¹¦å[M].å‡ºç‰ˆåœ°:å‡ºç‰ˆè€…ï¼Œå‡ºç‰ˆå¹´.è¯‘è‘—: [åºå·]å›½åæˆ–åœ°åŒºï¼ˆåŠ åœ†æ‹¬å¼§ï¼‰åŸä½œè€….ä¹¦å[M].è¯‘è€….å‡ºç‰ˆåœ°:å‡ºç‰ˆç¤¾,å‡ºç‰ˆå¹´.æœŸåˆŠæ–‡ç« : [åºå·]ä½œè€….ç¯‡å[J].æœŸåˆŠå,å‡ºç‰ˆå¹´,å·ï¼ˆæœŸï¼‰.æŠ¥çº¸æ–‡ç« : [åºå·]ä½œè€….ç¯‡å[N].æŠ¥çº¸å,å¹´-æœˆ-æ—¥ï¼ˆç‰ˆæ¬¡ï¼‰.è®ºæ–‡é›†: [åºå·]ä½œè€….ç¯‡å[A].ç¼–è‘—è€….è®ºæ–‡é›†å[C].å‡ºç‰ˆåœ°:å‡ºç‰ˆè€…,å‡ºç‰ˆå¹´.å­¦ä½è®ºæ–‡: [åºå·]ä½œè€….é¢˜å[D].ä¿å­˜åœ°:ä¿å­˜å•ä½,å¹´ä»½.å›½é™…ã€å›½å®¶æ ‡å‡†: [åºå·]æ ‡å‡†ç¼–å·-å‘å¸ƒå¹´,æ ‡å‡†åç§°[S].ç”µå­æ–‡çŒ®ï¼š[åºå·]ä½œè€….ç”µå­æ–‡çŒ®å.[ç”µå­æ–‡çŒ®åŠè½½ä½“ç±»å‹æ ‡è¯†[ç”µå­æ–‡çŒ®åŠè½½ä½“ç±»å‹è¯´æ˜ï¼š
ç”µå­æ–‡çŒ®ç±»å‹åŠå…¶æ ‡è¯†ï¼šæ•°æ®åº“â€”DBï¼Œè®¡ç®—æœºç¨‹åºâ€”CPï¼Œç”µå­å…¬å‘Šâ€”EB
ç”µå­æ–‡çŒ®è½½ä½“ç±»å‹åŠå…¶æ ‡è¯†ï¼šç£å¸¦(magnetic tape)â€”MTï¼Œç£ç›˜(disk)â€”DKï¼Œå…‰ç›˜(CD-ROM)â€”CDï¼Œè”æœºç½‘ç»œ(online)â€”OL
ä¸¾ä¾‹ï¼š[DB/OL]â€”è”æœºç½‘ä¸Šæ•°æ®åº“(database online)[DB/MT]â€”ç£å¸¦æ•°æ®åº“(database on magnetic tape)[M/CD]â€”å…‰ç›˜å›¾ä¹¦(monograph on CD-ROM)[CP/DK]â€”ç£ç›˜è½¯ä»¶(computer program on disk)[J/OL]â€”ç½‘ä¸ŠæœŸåˆŠ(serial online)[EB/OL]â€”ç½‘ä¸Šç”µå­å…¬å‘Š(electronic bulletin board online)]].ç”µå­æ–‡çŒ®å‡ºå¤„æˆ–å¯è·å¾—åœ°å€.

æ•ˆæœå›¾æœ‰å›¾æœ‰çœŸç›¸ï¼Œå…ˆä¸Šå‡ å¹…å›¾ï¼Œç»™å¤§å®¶çœ‹çœ‹æœ€ç»ˆçš„æ•ˆæœã€‚
æ ·å¼æ ·å¼ï¼Œå…¶å®å°±æ˜¯æ¨¡æ¿ã€‚éƒåŒå­¦è®¤ä¸ºï¼Œæ ·å¼æ˜¯wordæ’ç‰ˆæœ€é‡è¦çš„ä¸€ä¸ªæŠ€å·§ã€‚å­¦ä¼šæ ·å¼ï¼Œå¤©ä¸‹æ— æ•Œï¼é€šè¿‡ä¸Šé¢çš„å‡ å¹…å›¾ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œæ–‡æ¡£ä¸­å‡ºç°äº†ä¸‰çº§æ ‡é¢˜ï¼Œæ ‡é¢˜å‰é¢æœ‰ç¼–å·ã€‚â€œ1â€ã€â€œ1.1â€ã€â€œ1.1.1â€ç­‰ç­‰ï¼Œè¿™äº›éƒ½æ˜¯è‡ªå·±æ•²ï¼Ÿåˆ«å‚»äº†ï¼ä¸€ä¸ªä¸ªæ•²ï¼Œä¸€ä¸ªä¸ªè®¾ç½®ï¼Œå´©æºƒæ˜¯æ—©æ™šçš„ã€‚ã€‚ã€‚è¿™æ—¶å€™ï¼Œå°±éœ€è¦æ ·å¼å‡ºé©¬äº†ï¼è€Œä¸”ï¼Œè®¾ç½®å¥½äº†æ ·å¼ï¼Œå¾…ä¼šæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”Ÿæˆç›®å½•ã€‚
æ­¥éª¤ä¸€ï¼šæ ·å¼è®¾ç½®çš„ä½ç½®æ‰“å¼€wordæ–‡æ¡£ï¼Œå¼€å§‹ï¼Œçœ‹å³ä¸Šè§’ã€‚å¦‚ä¸‹å›¾ï¼š
æ­¥éª¤äºŒï¼šç¼–å·è®¾ç½®1ã€å³å‡»â€œæ ‡é¢˜1â€ï¼Œå•å‡»â€œä¿®æ”¹æ ·å¼â€2ã€å•å‡»â€œæ ·å¼â€ï¼Œå•å‡»â€œç¼–å·â€3ã€å•å‡»â€œå¤šçº§ç¼–å·â€ï¼Œå‘ç°ï¼Œæ²¡æœ‰è‡ªå·±éœ€è¦çš„ç¼–å·æ ·å¼ã€‚è¿™æ—¶ï¼Œé€‰ä¸­ä¸€ä¸ªæ¥è¿‘ç›®æ ‡æ ·å¼çš„æ ·å¼ï¼Œå•å‡»â€œè‡ªå®šä¹‰â€ã€‚4ã€åˆå§‹æ ·å¼å¦‚ä¸‹ã€‚5ã€æŠŠç¼–å·è®¾ç½®åé¢çš„ç‚¹å»æ‰ï¼Œç¼–å·ä¹‹åæ¥ç©ºæ ¼ã€‚è®¾ç½®å¥½1çº§ç¼–å·æ ·å¼ä¹‹åï¼Œæˆ‘ä»¬é€‰ä¸­2çº§ç¼–å·æ ·å¼ï¼Œè®¾ç½®ç±»ä¼¼ã€‚ä¹‹åè®¾ç½®3çº§ç¼–å·æ ·å¼ã€‚6ã€3çº§ç¼–å·æ ·å¼éƒ½è®¾ç½®å¥½äº†ï¼Œå¦‚å›¾ã€‚
æ­¥éª¤ä¸‰ï¼šæ ¼å¼è®¾ç½®ä»€ä¹ˆé»‘ä½“ï¼Œå±…ä¸­å•¥çš„ï¼Œä¿®æ”¹æ ·å¼å³å¯ã€‚
æ­¥éª¤å››ï¼šä½¿ç”¨é€šè¿‡å‰ä¸‰ä¸ªæ­¥éª¤ï¼Œæˆ‘ä»¬å·²ç»è®¾ç½®å¥½äº†æ ·å¼ã€‚ä½¿ç”¨çš„æ—¶å€™ï¼Œåªéœ€è¦æŠŠå…‰æ ‡ç§»åŠ¨åˆ°éœ€è¦è®¾ç½®æ ·å¼çš„é‚£ä¸€è¡Œï¼Œç„¶åå•å‡»æ ·å¼å³å¯ã€‚
é¡µçœ‰é¡µè„šæœ‰äº†é¡µçœ‰é¡µè„šçš„æ–‡æ¡£ï¼Œçœ‹èµ·æ¥ä¸Šæ¡£æ¬¡ã€‚
æ­¥éª¤ä¸€ï¼šæ’å…¥é¡µçœ‰é¡µè„šç« èŠ‚ï¼Œé¡µçœ‰å’Œé¡µè„šï¼Œç„¶åå°±å¯ä»¥ç»™é¡µé¢æ’å…¥é¡µçœ‰å’Œé¡µè„šäº†ã€‚
æ­¥éª¤äºŒï¼šæ’å…¥åˆ†èŠ‚ç¬¦1ã€æ‰¾åˆ°é¡µçœ‰æˆ–è€…é¡µè„šéœ€è¦ä¸åŒæ ·å¼çš„é¡µé¢ï¼Œå…‰æ ‡ç§»åŠ¨åˆ°é¡µé¢å°¾éƒ¨ã€‚2ã€ç« èŠ‚ï¼Œæ‹†åˆ†ç« èŠ‚ï¼Œä¸‹ä¸€é¡µåˆ†èŠ‚ç¬¦ã€‚ï¼ˆæˆ–è€…ï¼šæ’å…¥ï¼Œåˆ†éš”ç¬¦ï¼Œä¸‹ä¸€é¡µåˆ†èŠ‚ç¬¦ï¼‰3ã€é€‰æ‹©æ˜¯å¦å–æ¶ˆå„èŠ‚ä¹‹é—´çš„å…³è”ï¼Œå°±å¯ä»¥æŒ‰è‡ªå·±éœ€è¦è®¾ç½®å„èŠ‚é¡µçœ‰å’Œé¡µè„šä»¥åŠé¡µç ç­‰æ ¼å¼ã€‚åŒå‡»é¡µçœ‰æˆ–è€…é¡µè„šï¼Œå•å‡»â€œé¡µçœ‰é¡µè„šé€‰é¡¹â€ï¼Œå»æ‰å’Œå‰èŠ‚ç›¸å…³è”çš„å‹¾ã€‚
æ­¥éª¤ä¸‰ï¼šè®¾ç½®ç»™ä¸åŒçš„èŠ‚åˆ†åˆ«è®¾ç½®é¡µçœ‰å’Œé¡µè„šã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œé¡µçœ‰è¾“å…¥æ–‡å­—ï¼Œé¡µè„šæ’å…¥é¡µç ã€‚
ç›®å½•æ²¡æœ‰ç›®å½•çš„æ–‡æ¡£ä¸æ˜¯å¥½æ–‡æ¡£ï¼
æ­¥éª¤ä¸€ï¼šæ’å…¥ç›®å½•åœ¨å°é¢é¡µåé¢ï¼Œæ’å…¥ä¸€ä¸ªç©ºç™½é¡µã€‚å¼•ç”¨ï¼Œæ’å…¥ç›®å½•ï¼Œæ ¹æ®éœ€è¦è®¾ç½®ç›®å½•é€‰é¡¹ã€‚
æ­¥éª¤äºŒï¼šç›®å½•çº§åˆ«ç”±æ­¥éª¤ä¸€ï¼Œæˆ‘ä»¬çœ‹å‡ºï¼Œç›®å½•æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å‘ç°ï¼Œåªæœ‰é‚£äº›åˆ†çº§æ ‡é¢˜å¯ä»¥ç”Ÿæˆç›®å½•ï¼Œåƒæ‘˜è¦ã€å¼•è¨€ç­‰å¹¶ä¸ä¼šå‡ºç°åœ¨ç›®å½•ä¸­ã€‚æ€ä¹ˆæï¼Ÿ
åœ¨å¼•ç”¨é¡µï¼Œæ’å…¥ç›®å½•çš„æ—è¾¹ï¼Œæœ‰ä¸€ä¸ªç›®å½•çº§åˆ«é€‰é¡¹ã€‚å¦‚æœæˆ‘ä»¬æƒ³æŠŠæ‘˜è¦æ·»åŠ åˆ°ç›®å½•ï¼Œåªéœ€è¦æŠŠå…‰æ ‡ç§»åŠ¨åˆ°æ‘˜è¦è¿™ä¸€è¡Œï¼Œç„¶åå•å‡»â€œç›®å½•çº§åˆ«â€ï¼Œé€‰ä¸­â€œ1çº§ç›®å½•ï¼ˆ1ï¼‰â€ï¼Œå°±å¯ä»¥äº†ã€‚
æ­¥éª¤ä¸‰ï¼šæ›´æ–°ç›®å½•æ­¥éª¤äºŒå®Œæˆåï¼Œç›®å½•ä¸ä¼šå˜åŒ–ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬ç‚¹å‡»â€œæ›´æ–°ç›®å½•â€ï¼Œâ€œæ›´æ–°æ•´ä¸ªç›®å½•â€ï¼Œâ€œæ‘˜è¦â€å°±å‡ºç°åœ¨äº†ç›®å½•é‡Œã€‚è™½ç„¶æœ€ç†æƒ³çš„æ­¥éª¤æ˜¯ï¼šæ­¥éª¤äºŒã€æ­¥éª¤ä¸€ï¼Œä¸ç”¨æ­¥éª¤ä¸‰ã€‚ä½†æ˜¯é€šå¸¸ï¼Œæˆ‘ä»¬éƒ½ä¼šç”¨åˆ°æ­¥éª¤ä¸‰ã€‚
å°ç»“ä¸è¦é—®éƒåŒå­¦ï¼Œé»‘ä½“æ€ä¹ˆè®¾ç½®ï¼Ÿå±…ä¸­æ€ä¹ˆè®¾ç½®ï¼Ÿå­—ä½“å¤§å°æ€ä¹ˆè®¾ç½®ï¼Ÿã€‚ã€‚ã€‚è¿™äº›ç®€å•çš„ä¸œè¥¿ï¼Œé»˜è®¤å¤§å®¶å·²ç»æŒæ¡ã€‚åŠ ä¸Šä¸Šé¢ä¸‰ä¸ªæŠ€å·§ï¼Œç›¸ä¿¡ä½ è·ç¦»é«˜æ‰‹æ›´è¿‘äº†ä¸€æ­¥ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>word</tag>
      </tags>
  </entry>
  <entry>
    <title>å®‰è£…ç³»ç»Ÿä¹‹å¸¸è§é—®é¢˜</title>
    <url>/hobby-install-os-common-question/</url>
    <content><![CDATA[åŒå‡»autorun.exeæ— æ•ˆç³»ç»Ÿä¸å…¼å®¹ï¼Œæ¯”å¦‚ï¼Œåœ¨win8ç³»ç»Ÿä¸‹ï¼Œå®‰è£…win7ï¼Œå¤§éƒ¨åˆ†éƒ½ä¼šå¤±è´¥ã€‚è§£å†³åŠæ³•ï¼šç›´æ¥åŒå‡»ghost.exeæ–‡ä»¶ï¼Œå¦‚æœè¿˜æ˜¯æŠ¥é”™ï¼Œå°±æ¢Uç›˜å®‰è£…æˆ–è€…å…‰ç›˜å®‰è£…ã€‚
æ— æ³•ä»Uç›˜å¯åŠ¨è§£å†³åŠæ³•ï¼šç™¾åº¦å½“å‰æœºå‹çš„BIOSè®¾ç½®æ–¹æ³•ï¼Œä¸æ–­å°è¯•ã€‚
åœ¨winpeä¸‹æ— æ³•æ‰“å¼€ghostè§£å†³åŠæ³•ï¼šæ¢å…¶ä»–winpeç³»ç»Ÿã€‚è¿˜æ˜¯ä¸è¡Œï¼Œå°±æ¢ä¸€ä¸ªå¯åŠ¨ç›˜åˆ¶ä½œè½¯ä»¶ï¼Œæ¯”å¦‚è€æ¯›æ¡ƒã€‚
å®‰è£…ç³»ç»Ÿè¿›åº¦æ¡ç»ˆæ­¢è§£å†³åŠæ³•ï¼šæ¢ä¸€ä¸ªç³»ç»Ÿé•œåƒã€‚å¦‚æœè¿˜æ˜¯å®‰è£…å¤±è´¥ï¼Œæ¢ä¸€ä¸ªUç›˜ï¼Œé‡æ–°åˆ¶ä½œå¯åŠ¨ç›˜ã€‚
å°ç»“å®‰è£…ç³»ç»Ÿçš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°çš„é—®é¢˜ä¼šå¾ˆå¤šã€‚ç™¾åº¦å§ï¼Œå“ªæ€•ä¸èƒ½æ‰¾åˆ°ç­”æ¡ˆï¼Œä¹Ÿä¼šå¸¦ç»™æˆ‘ä»¬å¾ˆå¤šå¯å‘ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>å®‰è£…ç³»ç»Ÿä¹‹åŒç³»ç»Ÿ</title>
    <url>/hobby-install-os-double-os/</url>
    <content><![CDATA[å‰è¨€å®‰è£…åŒç³»ç»Ÿï¼Œå’Œå®‰è£…å•ä¸€ç³»ç»Ÿç±»ä¼¼ã€‚æœ‰æ—¶å€™ä¼šå¤±è´¥ï¼Œå¦‚æœå®åœ¨æ²¡åŠæ³•äº†ï¼Œå°±å®‰è£…è™šæ‹Ÿæœºå§ï¼Œä¹Ÿæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚
windowsä¸‹å®‰è£…windowswindowsä¸‹å®‰è£…windowsï¼Œå‰æï¼Œè¦æœ‰ä¸¤ä¸ªä»¥ä¸Šä¸»åˆ†åŒºï¼Œè€Œä¸”éƒ½æ˜¯æ´»åŠ¨çš„ã€‚å®‰è£…æˆåŠŸåï¼Œåœ¨å½“å‰ç³»ç»Ÿä¸‹ã€‚å•å‡»è®¡ç®—æœºï¼Œå³å‡»ï¼Œå±æ€§ï¼Œé«˜çº§ç³»ç»Ÿè®¾ç½®ï¼Œé«˜çº§ï¼Œå¯åŠ¨å’Œæ•…éšœæ¢å¤ä¸‹çš„è®¾ç½®ã€‚è®¾ç½®é»˜è®¤æ“ä½œç³»ç»Ÿå’Œæ“ä½œç³»ç»Ÿåˆ—è¡¨æ˜¾ç¤ºæ—¶é—´ã€‚
windowsä¸‹å®‰è£…linuxåœ¨ç¡¬ç›˜ä¸Šåˆ’åˆ†å‡ºä¸€å—ç©ºç™½åŒºåŸŸï¼Œä¸è¦æ ¼å¼åŒ–ã€‚ç„¶åï¼Œä»å¯åŠ¨ç›˜å¼€å§‹å®‰è£…linuxï¼Œå®‰è£…åˆ°é‚£ä¸€å—ç©ºç™½åŒºåŸŸã€‚
windowsä¸‹å®‰è£…macè¿™ä¸ªï¼Œæœ‰éš¾åº¦ã€‚å°¤å…¶æ˜¯éIntelå¤„ç†å™¨ï¼ŒåŸºæœ¬éƒ½ä¼šå¤±è´¥ã€‚Intelå¤„ç†å™¨çš„å°ä¼™ä¼´ï¼Œå¯ä»¥æä¸€æã€‚è¯è¯´éƒåŒå­¦å‰å‰ååèŠ±è´¹äº†ä¸€å‘¨å·¦å³ï¼Œä¹Ÿæ²¡æœ‰å®‰è£…æˆåŠŸï¼Œæƒ­æ„§æƒ­æ„§ï¼Œç»§ç»­åŠªåŠ›ã€‚ã€‚ã€‚
linuxä¸‹å®‰è£…linuxå…³é”®åœ¨äºå¯åŠ¨é…ç½®æ–‡ä»¶çš„ä¿®æ”¹ã€‚
linuxä¸‹å®‰è£…windowsæŒ‚è½½ã€åˆ†åŒºã€å¼•å¯¼ç­‰ç­‰ï¼Œæ€»ä¹‹å¾ˆå¤æ‚ã€‚å»ºè®®ä½¿ç”¨wineï¼Œæ¨¡æ‹Ÿwindowsç¯å¢ƒï¼Œç„¶åå°±å¯ä»¥ä¸€æ­¥æ­¥å¾€ä¸‹å®‰è£…äº†ã€‚
Macä¸‹å®‰è£…windowsmacä¸‹å®‰è£…windowsæ¯”è¾ƒç®€å•ï¼Œçœ‹æ¥è‹¹æœå…¬å¸éå¸¸äººæ€§åŒ–ã€‚å‰æï¼Œå‡†å¤‡å¥½çº¯å‡€ç³»ç»Ÿé•œåƒã€‚ä»¥ä¸‹å†…å®¹æ‘˜è‡ªç™¾åº¦ç»éªŒï¼Œäº²æµ‹å¯ç”¨ã€‚
æ­¥éª¤ä¸€ï¼šè¿›å…¥è‹¹æœç³»ç»Ÿï¼Œå·¦ä¸Šè§’ï¼Œå‰å¾€ï¼Œå®ç”¨å·¥å…·ï¼ŒBootCamp åŠ©ç†ï¼Œç»§ç»­

æ­¥éª¤äºŒï¼š1.é€‰ç¬¬ä¸€é¡¹ï¼Œåˆ›å»ºwin7æˆ–æ›´é«˜ç‰ˆæœ¬çš„å®‰è£…ç£ç›˜ï¼Œè¿™æ˜¯ç”¨è‹¹æœè‡ªå¸¦å·¥å…·åšUç›˜å¯åŠ¨ã€‚éœ€è¦æŠŠwin7 64ä½çº¯å‡€ç‰ˆISOé•œåƒæ–‡ä»¶æ”¾åœ¨æ¡Œé¢ï¼Œæ’å…¥Uç›˜ï¼ˆæœ€å¥½æ˜¯2.0çš„Uç›˜ï¼‰å¤§æ¦‚éœ€è¦15åˆ†é’Ÿå·¦å³ï¼ˆä¸è¦ä»¥ä¸ºå¡æ­»äº†ï¼Œç­‰ç€å°±å¥½ï¼Œä¸€æ¬¡æ²¡æœ‰åšå¥½çš„è¯é‡æ–°åšå°±å¯ä»¥äº†ï¼ŒåšUç›˜å¯åŠ¨ä¼šæ ¼å¼åŒ–Uç›˜ï¼Œæ³¨æ„å¤‡ä»½ï¼‰Uç›˜å¯åŠ¨åšå¥½ä¹‹åé€‰ç¬¬äºŒé¡¹
2.ç¬¬äºŒé¡¹ï¼Œä»Appleä¸‹è½½æœ€æ–°çš„windowsæ”¯æŒè½¯ä»¶æ­¤ä¸ºè‹¹æœç”µè„‘çš„win7é©±åŠ¨ï¼Œæ ¹æ®ç½‘é€Ÿå¤§æ¦‚20åˆ†é’Ÿï¼Œåˆ«ç€æ€¥ï¼Œæ³¨æ„è·¯å¾„ï¼ˆè£…å¥½win7åè¦å®‰è£…æ­¤é©±åŠ¨ï¼Œå¯ä»¥ä¸‹åˆ°Uç›˜ä¸Šï¼‰ï¼›ï¼ˆæ³¨æ„ï¼š13æ¬¾çš„airè£…win7å¿…é¡»æŠŠé©±åŠ¨ä¸‹è½½åˆ°åšUç›˜å¯åŠ¨çš„Uç›˜å†…ï¼Œå¦åˆ™è¿›å…¥win7åè§¦æ‘¸æ¿å’Œé¼ æ ‡å°†ä¸èƒ½ä½¿ç”¨ï¼Œæˆ–è€…ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè§é“¾æ¥æ•™ç¨‹ï¼šhttp://www.macx.cn/thread-2098963-1-1.htmlï¼‰é©±åŠ¨ä¸‹è½½å¥½ä¹‹åé€‰ç¬¬ä¸‰é¡¹
3.ç¬¬ä¸‰é¡¹ï¼Œå®‰è£…win7æˆ–è€…æ›´é«˜ç‰ˆæœ¬ï¼Œä¸‹ä¸€æ­¥ï¼›
4.åˆ’åˆ†win7ç³»ç»Ÿå’Œmacç³»ç»Ÿç©ºé—´å¤§å°ï¼Œå¯ä»¥å‡ç­‰åˆ†å‰²ï¼Œä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„ä½¿ç”¨ä¹ æƒ¯åˆ†ï¼›
5.ç‚¹å‡»å®‰è£…ï¼Œç³»ç»Ÿä¼šåˆ†åŒºï¼Œç„¶åç³»ç»Ÿä¼šè‡ªåŠ¨é‡å¯ï¼Œè¿›å…¥win7å®‰è£…ç•Œé¢ï¼Œæ ¹æ®æç¤ºæ“ä½œï¼ˆå¦‚æœæç¤ºï¼šè¯·ä½¿ç”¨64ä½å®‰è£…ç³»ç»Ÿã€æˆ–è€…é‡å¯åæ˜¾ç¤ºno bootable deviceâ€“insert boot disk and press any keyï¼Œè¯´æ˜å¯èƒ½åˆšæ‰åšçš„Uç›˜å¯åŠ¨ä¸è¯†åˆ«ï¼Œé‡æ–°åšä¸€æ¬¡ï¼Œå¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œæ¢Uç›˜é‡æ–°åšï¼‰
æ­¥éª¤ä¸‰ï¼šé€‰æ‹©è‡ªå®šä¹‰â€”â€”é€‰æ‹©åˆ†åŒºBOOTCAMPï¼ˆåƒä¸‡é€‰å¯¹äº†ï¼Œåƒä¸‡åˆ«æŠŠmacç³»ç»Ÿç»™æ ¼å¼åŒ–äº†ï¼‰â€”â€”é©±åŠ¨å™¨é€‰é¡¹ é«˜çº§â€”â€”æ ¼å¼åŒ–â€”â€”ç¡®å®š
ç„¶åå°±å¼€å§‹è£…ç³»ç»Ÿäº†ï¼Œå¤§æ¦‚éœ€è¦30åˆ†é’Ÿï¼Œä¹‹é—´ä¼šé‡å¯å¤šæ¬¡ï¼Œç„¶åå°±è¿›å…¥ç³»ç»Ÿäº†ï¼Œwin7å°±è£…å¥½äº†
æ­¥éª¤å››ï¼šå®‰è£…win7é©±åŠ¨ï¼Œåœ¨win7ç³»ç»Ÿä¸‹æ‰¾åˆ°åˆšæ‰çš„ä¸‹è½½çš„é©±åŠ¨ï¼ˆåº”è¯¥æ˜¯ä¸ªæ–‡ä»¶å¤¹BootCampï¼‰ï¼Œæ‰“å¼€ï¼Œæœ‰ä¸ªsetup.exeç¨‹åºï¼ŒåŒå‡»æ ¹æ®æç¤ºå®‰è£…å°±å¯ä»¥äº†ï¼Œå¤§æ¦‚5åˆ†é’Ÿ
å°ç»“ä¸Šé¢å·²ç»æŠŠå®‰è£…åŒç³»ç»Ÿçš„é‡ç‚¹ç‚¹æ˜äº†ï¼Œæä¸å®šçš„è¯ï¼Œç™¾åº¦æ›´è¯¦ç»†çš„æ•™ç¨‹å§ã€‚è¿™æ¬¡ï¼ŒéƒåŒå­¦å°±ä¸å±•å¼€äº†ï¼Œå†…å®¹å®åœ¨å¤ªå¤šã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>å®‰è£…ç³»ç»Ÿä¹‹ä¸åŒå¹³å°</title>
    <url>/hobby-install-os-various-platform/</url>
    <content><![CDATA[å‰è¨€Windowsã€Linuxã€MacOSã€æ‰‹æœºromï¼Œä¸åŒçš„å¹³å°ï¼Œå®‰è£…æ–¹å¼æœ‰ä¸€äº›å·®åˆ«ã€‚
Windowsè¿™å‡ ç¯‡å…³äºå®‰è£…ç³»ç»Ÿçš„çŸ­æ–‡ï¼Œå¤§éƒ½æ˜¯å…³äºwindowsçš„ã€‚
LinuxLinuxçš„ç‰ˆæœ¬éå¸¸å¤šï¼Œä¸»æµçš„ç‰ˆæœ¬ï¼ŒéƒåŒå­¦éƒ½è¯•ç”¨è¿‡ã€‚ä¸ªäººæ¯”è¾ƒå–œæ¬¢çš„æœ‰CentOSã€Ubuntuã€Fedoraã€‚å¾ˆå¤šæ•™ç¨‹å–œæ¬¢ç”¨RetHatï¼ŒéƒåŒå­¦æƒ³è¯´ï¼Œä½œä¸ºä¸€ä¸ªå•†ä¸šç‰ˆlinuxï¼ŒRedHatçš„å„ç§é™åˆ¶ä¼šè®©ä½ åè¡€ã€‚ã€‚ã€‚å¦‚æœæƒ³å­¦ä¹ linuxï¼Œä»CentOSå…¥é—¨å§ï¼è‡³äºæ•™ç¨‹ï¼ŒåŠ›èã€Šé¸Ÿå“¥çš„linuxç§æˆ¿èœã€‹ã€‚
é•œåƒä¸‹è½½ä¸åŒç‰ˆæœ¬çš„linuxé•œåƒï¼Œåœ¨å„è‡ªçš„å®˜ç½‘ä¸Šå°±å¯ä»¥ä¸‹è½½åˆ°ã€‚ä¹Ÿæ˜¯ä»¥â€œ.isoâ€ç»“å°¾çš„æ–‡ä»¶ã€‚
ç¡¬ç›˜å®‰è£…ä½¿ç”¨é¢‘ç‡è¾ƒä½ï¼Œå¦‚æœä½ ç°åœ¨ä½¿ç”¨çš„ç³»ç»Ÿæ˜¯linuxï¼Œæƒ³è¦å®‰è£…åŒç³»ç»Ÿæˆ–è€…å®‰è£…æ–°çš„linuxï¼Œå¯ä»¥ä»ç¡¬ç›˜å®‰è£…ã€‚
Uç›˜å®‰è£…ä»Uç›˜å®‰è£…ï¼Œæ˜¯linuxæœ€ä¸»æµçš„å®‰è£…æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•çš„é‡ç‚¹åœ¨äºå¯åŠ¨ç›˜çš„åˆ¶ä½œï¼Œç»™å‡ºä¸€ä¸ªè½¯ä»¶ï¼Œä¸è¦å‘Šè¯‰åˆ«äººã€‚ç§˜å¯†å…¥å£ï¼šUniversal USB Installerä½¿ç”¨è¿™ä¸ªè½¯ä»¶ï¼ŒæŠŠä¸‹è½½çš„linuxé•œåƒåˆ»å½•åˆ°Uç›˜ï¼Œå°±åšæˆäº†å¯åŠ¨ç›˜ã€‚
å…‰ç›˜å®‰è£…ä»å…‰ç›˜å®‰è£…ï¼Œæ˜¯æˆåŠŸç‡æœ€é«˜çš„linuxå®‰è£…æ–¹æ³•ã€‚ç”¨UltraISOæˆ–å…¶ä»–è½¯ä»¶ï¼ŒæŠŠä¸‹è½½çš„linuxé•œåƒåˆ»å½•åˆ°å…‰ç›˜ï¼Œå°±åšæˆäº†å¯åŠ¨ç›˜ã€‚
MacOSéƒåŒå­¦åªåœ¨è™šæ‹Ÿæœºä¸Šç©è¿‡Macã€‚
å½“æ—¶ï¼Œç½‘ä¸Šå¾ˆéš¾æ‰¾åˆ°â€œ*.isoâ€çš„macé•œåƒï¼Œèƒ½æ‰¾åˆ°çš„ï¼Œéƒ½æ˜¯â€œ*.dmgâ€ï¼Œè¿™æ—¶å€™ï¼Œé‡ç‚¹æ¥äº†ï¼æŠŠdmgæ ¼å¼çš„é•œåƒè½¬æ¢æˆisoé•œåƒï¼ä½¿ç”¨çš„è½¯ä»¶ï¼Œè¿˜æ˜¯UltraISOï¼æ€ä¹ˆæ ·ï¼Ÿå‘ç°è¿™ä¸ªè½¯ä»¶çš„å¼ºå¤§äº†å§ï¼

æ‰‹æœºromæˆ‘ä»¬ç»å¸¸å¯ä»¥å¬åˆ°â€œåˆ·æœºâ€è¿™ä¸ªè¯ï¼Œå…¶å®åˆ·æœºï¼Œå°±æ˜¯ç»™æ‰‹æœºé‡è£…ç³»ç»Ÿã€‚ç”µè„‘å®‰è£…ç³»ç»Ÿï¼Œæˆ‘ä»¬ä½¿ç”¨é•œåƒï¼›æ‰‹æœºå®‰è£…ç³»ç»Ÿï¼Œæˆ‘ä»¬ä½¿ç”¨romã€‚
é—®é¢˜æ¥äº†ï¼Œromåˆ°åº•æ˜¯ä¸ªå•¥ç©æ„ï¼Ÿå®ƒçš„å…¨ç§°æ˜¯å•¥ï¼Ÿ
ROMæ˜¯åªè¯»å†…å­˜ï¼ˆRead-Only Memoryï¼‰çš„ç®€ç§°ï¼Œæ˜¯ä¸€ç§åªèƒ½è¯»å‡ºäº‹å…ˆæ‰€å­˜æ•°æ®çš„å›ºæ€åŠå¯¼ä½“å­˜å‚¨å™¨ã€‚å…¶ç‰¹æ€§æ˜¯ä¸€æ—¦å‚¨å­˜èµ„æ–™å°±æ— æ³•å†å°†ä¹‹æ”¹å˜æˆ–åˆ é™¤ã€‚é€šå¸¸ç”¨åœ¨ä¸éœ€ç»å¸¸å˜æ›´èµ„æ–™çš„ç”µå­æˆ–ç”µè„‘ç³»ç»Ÿä¸­ï¼Œèµ„æ–™å¹¶ä¸”ä¸ä¼šå› ä¸ºç”µæºå…³é—­è€Œæ¶ˆå¤±ã€‚
æ‰‹æœºä¸­ï¼ŒROMç»“æ„æ˜¯ç”±ï¼šç³»ç»Ÿç©ºé—´+ç”¨æˆ·å®‰è£…ç¨‹åºç©ºé—´+ç”¨æˆ·å­˜å‚¨ç©ºé—´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰‹æœºç³»ç»Ÿå­˜å‚¨åœ¨romå½“ä¸­ï¼Œåˆ·romï¼Œå°±æ˜¯æ”¹å˜romä¸­çš„ç³»ç»Ÿã€‚è€Œå¾ˆå¤šäººæŠŠå¾…åˆ·ç³»ç»Ÿçš„å®‰è£…åŒ…ç§°ä¸ºromï¼Œç®—æ˜¯ä¸€ä¸ªè¯ä¹‰çš„å»¶ä¼¸ï¼Œç›¸å½“äºé•œåƒã€‚
åˆ·æœºæ¯”é‡è£…ç³»ç»Ÿå±é™©ï¼Œå› ä¸ºæ‰‹æœºæœ‰å¯èƒ½ä¼šå˜ç –ï¼è™½ç„¶ç½‘ä¸Šæœ‰å¾ˆå¤šæ•‘ç –æ•™ç¨‹ï¼Œä½†æ˜¯ï¼Œè€ƒè™‘åˆ°æ‰‹æœºå‹å·å¤šå¦‚ç¹æ˜Ÿï¼ŒçœŸçš„ä¸æ•¢ä¿è¯ä½ çš„æ‰‹æœºä¸€å®šèƒ½æ•‘å›æ¥ã€‚
åˆ·æœºæ–¹æ³•å¾ˆå¤šï¼Œè¿™é‡ŒéƒåŒå­¦å†™ä¸€ä¸ªé€šç”¨çš„æ–¹æ³•ï¼šå¡åˆ·ï¼1ã€ä¸‹è½½éœ€è¦çš„romï¼Œä¸€èˆ¬æ˜¯*.zipæ–‡ä»¶ã€‚2ã€æ‹·è´romåˆ°æ‰‹æœºå¤–ç½®å†…å­˜å¡ã€‚3ã€å¼€æœºæ—¶ï¼ŒæŒ‰ä½å¼€æœºé”®+éŸ³é‡å‡/å¼€æœºé”®+éŸ³é‡åŠ /å¼€æœºé”®+éŸ³é‡å‡+éŸ³é‡åŠ ï¼Œè¿›å…¥recoveryæ¨¡å¼ã€‚4ã€é€‰æ‹©romï¼Œå¼€å§‹åˆ·æœºã€‚PSï¼šåˆ·ç¬¬ä¸‰æ–¹çš„romçš„æ—¶å€™ï¼Œå¤§éƒ½éœ€è¦å…ˆåˆ·recoveryã€‚
å°ç»“ä¸åŒå¹³å°ï¼Œå®‰è£…ç³»ç»Ÿæœ‰å·®åˆ«ï¼Œå¸¸ç”¨çš„ä¹Ÿéƒ½æ˜¯é‚£ä¸‰ç§æ–¹å¼ã€‚æ‰€è°“è§å¾®çŸ¥è‘—ï¼Œä¸¾ä¸€åä¸‰ï¼Œä¸€é€šç™¾é€šã€‚ã€‚ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>å®‰è£…ç³»ç»Ÿä¹‹æ¿€æ´»</title>
    <url>/hobby-install-os-active/</url>
    <content><![CDATA[å‰è¨€çº¯å‡€ç³»ç»Ÿå®‰è£…åè‚¯å®šéœ€è¦æ¿€æ´»ï¼Œé™¤éæ˜¯å‡çº§ç³»ç»Ÿï¼›ghostç³»ç»Ÿå®‰è£…åï¼Œä¸€èˆ¬ä¸éœ€è¦æ¿€æ´»ï¼Œä¸ªåˆ«æƒ…å†µä¸‹éœ€è¦æ¿€æ´»ã€‚
winXPç°åœ¨ï¼Œå®‰è£…winXPçš„å°ä¼™ä¼´å·²ç»æå°‘æå°‘ã€‚è€ƒè™‘åˆ°ä½¿ç”¨è™šæ‹Ÿæœºçš„æƒ…å†µï¼Œè¿˜æ˜¯åˆ†äº«ä¸€ä¸‹æ¿€æ´»å¯†é’¥å’Œæ¿€æ´»å·¥å…·å§ã€‚
æ­£ç‰ˆå¯†é’¥ï¼šMRX3F-47B9T-2487J-KWKMF-RPWBYHTXH6-2JJC4-CDB6C-X38B4-C3GF3 RT4H2-8WYHG-QKK6K-WWHJ2-9427X DYPVX-43TRT-YDBGB-7YQJX-CWXW7 HGM7B-YF7T7-8R7RF-Y6RPY-XTQ77 Windows XPä¸“ä¸šç‰ˆæœ€æ–°æ³¨å†Œç  DJQJB-PC83T-FTGJC-CQTCK-RJD8D VMMBM-8WK8W-H44YH-37B4M-KX8QR XRCTF-Y68KJ-VVFTR-7BDFP-4PW7G 6RV7B-FYWR2-PW3C6-DDWDR-68X9C KYMTD-BV7KP-RRM33-P3XKJ-RDKVD X3WYK-H7CR8-KQBMV-7DP6X-W6YQQ CQWK3-CCYJY-TQDFV-2HJDR-W3B2M 2RXYJ-VQWXM-J2V2R-CVXQT-Y6MPY X7TVH-VJTFG-BK22B-XXG6D-27326 VYGXV-YM8VB-4RVQX-QXBMX-G3WV7 4DP2D-CXW4C-TRYDH-CW4CT-PT23X R6M6K-HT7G7-XG4K4-66PGK-9V2RM 86VYW-4RHCG-CCC7Y-64MWM-V8B68 VPM77-Y3YJW-W4MFC-CQTCK-D2XGK K3JD6-DK6G4-YH32B-QT7VP-R8WC7 JRMCK-J3V37-YVCYH-MDJ37-94BHP KJ3XK-3B6KW-XK62M-VDC7W-DJ6V9 WindowsXPå¯ä»¥æ— é™æ¬¡æ¿€æ´»çš„å·ç  CXGDD-GP2B2-RKWWD-HG3HY-VDJ7J RK7J8-2PGYQ-P47VV-V6PMB-F6XPQ
æ¿€æ´»å·¥å…·åˆ†äº«ï¼šhttp://yunpan.cn/cKvVDSmX7xBJU  æå–ç  788e


win7ä¸‹é¢è¿™ä¸ªå·¥å…·ï¼Œæ˜¯éƒåŒå­¦ç”¨è¿‡çš„æœ€å¥½ç”¨çš„win7æ¿€æ´»å·¥å…·ï¼Œå±¡è¯•ä¸çˆ½ï¼æ¿€æ´»å·¥å…·åˆ†äº«ï¼šhttp://yunpan.cn/cKvjwPMn4NCDA  æå–ç  a281
win8win8æ˜¯ä»Šåçš„è¶‹åŠ¿ç³»ç»Ÿï¼Œä¸‹é¢è¿™ä¸ªå·¥å…·ï¼Œæ˜¯éƒåŒå­¦è®¤ä¸ºæœ€å¥½ç”¨çš„win8/win8.1æ¿€æ´»å·¥å…·ï¼æ¿€æ´»å·¥å…·åˆ†äº«ï¼šhttp://yunpan.cn/cKvxrq86aFTkX  æå–ç  8b0b
å°ç»“æ¿€æ´»æ–¹æ³•ä¸æ­¢ä¸€ç§ï¼Œä»¥ä¸Šæä¾›çš„å·¥å…·ï¼Œéƒ½æ˜¯éƒåŒå­¦äº²æµ‹å¯ç”¨çš„ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>å®‰è£…ç³»ç»Ÿä¹‹çº¯å‡€ç³»ç»Ÿå’Œghostç³»ç»Ÿ</title>
    <url>/hobby-install-os-pureos-and-ghostos/</url>
    <content><![CDATA[å‰è¨€å¾®è½¯çš„åŸç”Ÿç³»ç»Ÿï¼Œè¢«ç§°ä¸ºçº¯å‡€ç³»ç»Ÿï¼›ä»€ä¹ˆä¸­å…³æ‘ã€é›¨æ—æœ¨é£ã€ç»¿èŒ¶ç³»ç»Ÿã€æ–°èåœå®¶å›­ã€æ·±åº¦æŠ€æœ¯ç­‰ç­‰ï¼Œå‡ºå“çš„ç³»ç»Ÿï¼Œéƒ½æ˜¯ghostç³»ç»Ÿã€‚
çº¯å‡€ç³»ç»Ÿçº¯å‡€ç³»ç»Ÿï¼Œé‡Œé¢æ²¡æœ‰QQã€è¿…é›·ã€é…·ç‹—ç­‰è½¯ä»¶ã€‚å®‰è£…å®Œæˆä¹‹åï¼Œæ¡Œé¢ä¸Šåªæœ‰ä¸€ä¸ªå›¾æ ‡â€”â€”å›æ”¶ç«™ã€‚çº¯å‡€ç³»ç»Ÿçš„å®‰è£…ï¼Œå’Œghostç³»ç»Ÿç±»ä¼¼ï¼Œä¹Ÿæœ‰ä¸‰ç§æ–¹å¼ã€‚
ç¡¬ç›˜å®‰è£…ä¸‹è½½çº¯å‡€ç³»ç»Ÿé•œåƒï¼Œè§£å‹ï¼ŒåŒå‡»setup.exeï¼ŒæŒ‰ç…§æç¤ºå®‰è£…ã€‚
Uç›˜å®‰è£…åœ¨winpeä¸‹åŒå‡»setup.exeï¼ŒæŒ‰ç…§æç¤ºå®‰è£…ã€‚

å…‰ç›˜å®‰è£…ä»å…‰ç›˜å¯åŠ¨åï¼ŒæŒ‰ç…§æç¤ºå®‰è£…ã€‚
ghostç³»ç»Ÿghostç³»ç»Ÿï¼Œé‡Œé¢æœ‰å¾ˆå¤šè‡ªå¸¦çš„è½¯ä»¶ã€‚ç½‘ä¸Šç»™çš„æ•™ç¨‹ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ghostç³»ç»Ÿçš„å®‰è£…æ•™ç¨‹ã€‚éƒåŒå­¦ä¹Ÿå†™äº†ä¸€ç¯‡ï¼Œè¯·ç§»æ­¥http://voidking.com/ã€ä¸“ä¸šã€‘å®‰è£…ç³»ç»Ÿä¹‹ä¸‰ç§æ–¹å¼/
å°ç»“å¦‚æœæ²¡æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œå»ºè®®å®‰è£…ghostç³»ç»Ÿï¼Œç®€å•æ–¹ä¾¿ã€‚éƒåŒå­¦ä¹Ÿåˆ¶ä½œè¿‡ghostç³»ç»Ÿï¼Œåˆ¶ä½œæ–¹æ³•å¾ˆç®€å•ã€‚ä½†æ˜¯ï¼Œå¦‚æœæƒ³è¦åˆ¶ä½œå‡ºæƒ³é›¨æ—æœ¨é£é‚£æ ·çš„ç³»ç»Ÿé•œåƒï¼Œè¿˜æ˜¯æœ‰éš¾åº¦çš„ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>å®‰è£…ç³»ç»Ÿä¹‹é©±åŠ¨</title>
    <url>/hobby-install-os-drive/</url>
    <content><![CDATA[åŸºæœ¬æ¦‚å¿µè®¾å¤‡é©±åŠ¨ç¨‹åºï¼Œæ˜¯ä¸€ç§å¯ä»¥ä½¿è®¡ç®—æœºå’Œè®¾å¤‡é€šä¿¡çš„ç‰¹æ®Šç¨‹åºï¼Œæ˜¯ç¡¬ä»¶å‚å•†æ ¹æ®æ“ä½œç³»ç»Ÿç¼–å†™çš„é…ç½®æ–‡ä»¶ã€‚ç›¸å½“äºç¡¬ä»¶çš„æ¥å£ï¼Œæ“ä½œç³»ç»Ÿåªæœ‰é€šè¿‡è¿™ä¸ªæ¥å£ï¼Œæ‰èƒ½æ§åˆ¶ç¡¬ä»¶è®¾å¤‡çš„å·¥ä½œï¼Œå‡å¦‚æŸè®¾å¤‡çš„é©±åŠ¨ç¨‹åºæœªèƒ½æ­£ç¡®å®‰è£…ï¼Œä¾¿ä¸èƒ½æ­£å¸¸å·¥ä½œã€‚
å› æ­¤ï¼Œé©±åŠ¨ç¨‹åºè¢«æ¯”ä½œâ€œ ç¡¬ä»¶çš„çµé­‚â€ã€â€œç¡¬ä»¶çš„ä¸»å®°â€ã€å’Œâ€œç¡¬ä»¶å’Œç³»ç»Ÿä¹‹é—´çš„æ¡¥æ¢â€ç­‰ã€‚
å¸¸è§é©±åŠ¨é—®é¢˜ç•Œé¢å˜ä¸‘è¿˜è®°å¾—ç¬¬ä¸€æ¬¡å®‰è£…å®Œç³»ç»Ÿï¼Œå¼€æœºä¹‹åï¼Œæˆ‘é ï¼Œé‚£äº›åˆå¤§åˆæ¨¡ç³Šçš„å›¾æ ‡æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿï¼åˆ†è¾¨ç‡æ— æ³•è°ƒèŠ‚æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿï¼åæ¥ç»ˆäºæ‡‚å¾—ï¼Œæ˜¾å¡é©±åŠ¨æ²¡è£…å¥½ã€‚
æ— æ³•ä½¿ç”¨ç½‘çº¿è”ç½‘ç½‘å¡é©±åŠ¨æ²¡æœ‰å®‰è£…å¥½ã€‚
æ— æ³•ä½¿ç”¨æ— çº¿è”ç½‘æ— çº¿ç½‘å¡é©±åŠ¨æ²¡æœ‰å®‰è£…å¥½ã€‚

é©±åŠ¨å®‰è£…å·¥å…·windowså’Œlinuxçš„é©±åŠ¨å®‰è£…æ–¹æ³•ä¸åŒï¼Œlinuxæ›´åŠ å¤æ‚ã€‚ä»¥ä¸‹å·¥å…·é€‚ç”¨äºwindowsã€‚
ç³»ç»Ÿè‡ªå¸¦å•å‡»è®¡ç®—æœºï¼Œå³å‡»ï¼Œç®¡ç†ï¼Œè®¾å¤‡ç®¡ç†å™¨ã€‚
é©±åŠ¨ç²¾çµæ„Ÿè§‰æœ€é¡ºæ‰‹çš„ä¸€ä¸ªé©±åŠ¨ç®¡ç†è½¯ä»¶ã€‚
é©±åŠ¨äººç”Ÿä¹Ÿæ˜¯å¾ˆå¥½ç”¨çš„ä¸€ä¸ªé©±åŠ¨ç®¡ç†è½¯ä»¶ã€‚
å°ç»“åœ¨å­¦ä¹ æ±‡ç¼–çš„æ—¶å€™ï¼Œæ›¾ç»æƒ³è¦å¼€å‘é©±åŠ¨ç¨‹åºï¼Œåæ¥å‘ç°ï¼Œå¤ªéš¾äº†ï¼ï¼ï¼é©±åŠ¨ï¼Œä¼šå®‰è£…å°±å¤Ÿäº†ï¼
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>å®‰è£…ç³»ç»Ÿä¹‹åˆ†åŒº</title>
    <url>/hobby-install-os-partition/</url>
    <content><![CDATA[åˆå­¦è€…å¾ˆå®¹æ˜“æŠŠé‡æ–°åˆ†åŒºå’Œé‡è£…ç³»ç»Ÿææ··ï¼Œè¿™é‡Œç®€è¦è¯´æ˜ä¸€ä¸‹ã€‚å¤§éƒ¨åˆ†å†…å®¹æ‘˜è‡ªç™¾åº¦ç™¾ç§‘ã€‚
åŸºæœ¬æ¦‚å¿µMBRï¼ˆMaster Boot Recordï¼‰ä¸‹çš„ç¡¬ç›˜åˆ†åŒºæœ‰ä¸‰ç§ï¼Œä¸»åˆ†åŒºã€æ‰©å±•åˆ†åŒºã€é€»è¾‘åˆ†åŒºã€‚
ä¸€ä¸ªç¡¬ç›˜ï¼Œä¸»åˆ†åŒºè‡³å°‘æœ‰1ä¸ªï¼Œæœ€å¤š4ä¸ªï¼Œæ‰©å±•åˆ†åŒºå¯ä»¥æ²¡æœ‰ï¼Œæœ€å¤š1ä¸ªã€‚ä¸”ä¸»åˆ†åŒº+æ‰©å±•åˆ†åŒºæ€»å…±ä¸èƒ½è¶…è¿‡4ä¸ªã€‚
æ‰©å±•åˆ†åŒºä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œæ‰©å±•åˆ†åŒºå¯ä»¥åˆ†ä¸ºè‹¥å¹²ä¸ªé€»è¾‘åˆ†åŒºï¼Œæœ€å¤šåˆ†ä¸º23ä¸ªé€»è¾‘åˆ†åŒºã€‚
é€»è¾‘åˆ†åŒºçš„ä¿¡æ¯éƒ½è¢«ä¿å­˜åœ¨æ‰©å±•åˆ†åŒºå†…ï¼Œè€Œä¸»åˆ†åŒºå’Œæ‰©å±•åˆ†åŒºçš„ä¿¡æ¯è¢«ä¿å­˜åœ¨ç¡¬ç›˜çš„MBRå†…ã€‚
åœ¨windowsä¸‹ï¼Œæ¿€æ´»çš„ä¸»åˆ†åŒºæ˜¯ç¡¬ç›˜çš„å¯åŠ¨åˆ†åŒºï¼Œä»–æ˜¯ç‹¬ç«‹çš„ï¼Œä¹Ÿæ˜¯ç¡¬ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒºï¼Œæ­£å¸¸åˆ†çš„è¯å°±æ˜¯CåŒºã€‚ 
åœ¨linuxä¸‹ï¼Œä¸»åˆ†åŒºå’Œé€»è¾‘åˆ†åŒºéƒ½å¯ä»¥ç”¨æ¥æ”¾ç³»ç»Ÿï¼Œå¼•å¯¼oså¼€æœºï¼Œgrubä¼šå…¼å®¹windowsç³»ç»Ÿå¼€æœºå¯åŠ¨ã€‚åœ¨linuxä¸­ï¼Œç¬¬ä¸€å—ç¡¬ç›˜åˆ†åŒºä¸ºhdaåˆ†åŒºï¼Œä¸»åˆ†åŒºç¼–å·ä¸ºhda1-4ï¼Œé€»è¾‘åˆ†åŒºä»5å¼€å§‹ã€‚

åˆ†åŒºæ ¼å¼windowsFAT16ã€FAT32ã€NTFSã€exFATç­‰ã€‚åº”ç”¨æœ€å¹¿æ³›çš„æ˜¯NTFSï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ç”µè„‘åˆ†åŒºï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯è¿™ä¸ªæ ¼å¼çš„ã€‚FAT32æ ¼å¼ä¹Ÿå¾ˆå¸¸ç”¨ï¼Œå¸¸ç”¨äºåšå¯åŠ¨ç›˜ï¼Œä½†æ˜¯å•ä¸ªæ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡4Gã€‚
å®‰è£…linuxçš„æ—¶å€™ï¼Œå‰äº›å¹´ï¼Œå¿…é¡»ä»FAT32åˆ†åŒºæˆ–è€…linuxä¸“ç”¨åˆ†åŒºè¯»å–å®‰è£…æ•°æ®ï¼Œå¦åˆ™æ— æ³•è¯†åˆ«ã€‚4Gçš„é™åˆ¶ï¼Œå¯¼è‡´å¾ˆå¤šlinuxå®‰è£…èµ·æ¥å¾ˆè´¹åŠ²ã€‚è¿‘ä¸¤å¹´ï¼Œä¸å°‘linuxç‰ˆæœ¬ï¼Œå·²ç»å¯ä»¥æ”¯æŒè¯»å–NTFSåˆ†åŒºä¸Šçš„æ•°æ®ï¼Œæ›´åŠ äººæ€§åŒ–äº†ã€‚
linuxExt2ã€Ext3ã€Linux swapã€VFATã€Ext4ç­‰ã€‚æœ€å¼€å§‹ælinuxçš„æ—¶å€™ï¼Œæ¯ç§ç±»å‹çš„åˆ†åŒºåº”è¯¥åˆ†å¤šå¤§ï¼Œå¯¹ç³»ç»Ÿè¿è¡Œæœ‰å¾ˆå¤§çš„å½±å“ï¼Œä¸èƒ½é©¬è™ã€‚ç°åœ¨å¥½äº†ï¼Œå®‰è£…linuxçš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šç»™å‡ºå»ºè®®åˆ†åŒºå¤§å°ï¼ŒåŸºæœ¬ä¸éœ€è¦ä¿®æ”¹ï¼Œæ›´åŠ å¹³æ°‘åŒ–ã€‚
åˆå§‹åˆ†åŒºæ–°ä¹°çš„ç”µè„‘ï¼Œå¤§éƒ½æœ‰è‡ªå¸¦çš„ç³»ç»Ÿï¼Œå¸¸è§çš„æœ‰win8å’Œlinuxã€‚è¿™äº›ç”µè„‘ï¼Œéƒ½æ˜¯åˆ†å¥½åŒºçš„ï¼Œä½†æ˜¯ï¼Œåˆ†åŒºçš„æ–¹å¼ä¸ä¸€å®šæ˜¯è‡ªå·±æ»¡æ„çš„ã€‚
æ¯”å¦‚ï¼Œwin8ä¸‹ï¼Œä½ æƒ³è¦Dç›˜200Gï¼Œä½†æ˜¯ï¼Œè‡ªå¸¦ç³»ç»Ÿåˆ†äº†100Gã€‚è¿™æ—¶ï¼Œå¯ä»¥åœ¨å½“å‰ç³»ç»Ÿä¸‹ä¿®æ”¹åˆ†åŒºï¼Œä¹Ÿå¯ä»¥è¿›å»winpeä¹‹åä¿®æ”¹åˆ†åŒºã€‚
æ¯”å¦‚ï¼Œlinuxä¸‹ï¼Œä½ æƒ³æ”¹æˆwin8ç³»ç»Ÿã€‚è¿™æ—¶ï¼Œå¯ä»¥é€šè¿‡winpeé‡æ–°åˆ†åŒºï¼Œç„¶åå®‰è£…win8ç³»ç»Ÿã€‚

åˆ†åŒºæ–¹å¼åˆ†åŒºåˆ†ä¸ºä¸¤ç§ï¼šæœ‰æŸåˆ†åŒºå’Œæ— æŸåˆ†åŒºã€‚
æœ‰æŸåˆ†åŒºæˆ‘ä»¬å¸¸è¯´çš„åˆ†åŒºï¼Œä¸€èˆ¬æŒ‡çš„æ˜¯æœ‰æŸåˆ†åŒºã€‚æœ‰æŸåˆ†åŒºä¼šæ¸…é™¤æ‰ç¡¬ç›˜ä¸Šæ‰€æœ‰çš„æ•°æ®ï¼Œæ‰€ä»¥ï¼Œåˆ†åŒºä¹‹å‰ï¼Œè¯·å¤‡ä»½å¥½æ•°æ®ã€‚
æ— æŸåˆ†åŒºæ— æŸåˆ†åŒºæŒ‡çš„æ˜¯ï¼Œåœ¨åˆ†åŒºè¿‡ç¨‹ä¸­ä¸ä¼šæŸå¤±æ•°æ®çš„åˆ†åŒºæ–¹å¼ã€‚å‡è®¾ï¼Œæˆ‘ä»¬æƒ³æŠŠFç›˜åˆ†æˆä¸¤ä¸ªç›˜ï¼šFç›˜å’ŒZç›˜ã€‚è¿™æ—¶å€™ï¼Œå¯ä»¥æŠŠæ•°æ®é›†ä¸­åœ¨Fç›˜ï¼Œç©ºé—²çš„éƒ¨åˆ†åˆ†å‡ºæ¥ï¼Œæˆä¸ºZç›˜ã€‚
åˆ†åŒºå·¥å…·ä»¥ä¸‹å·¥å…·é€‚ç”¨äºwindowsã€‚linuxä¸‹ï¼Œéœ€è¦åˆ†åŒºæ—¶æŸ¥æ‰¾ä¸€ä¸‹åˆ†åŒºå‘½ä»¤å°±å¥½ã€‚
ç³»ç»Ÿè‡ªå¸¦åˆ†åŒºå·¥å…·å•å‡»è®¡ç®—æœºï¼Œå³å‡»ï¼Œç®¡ç†ï¼Œç£ç›˜ç®¡ç†ã€‚è¿™ä¸ªå·¥å…·æ”¯æŒæ— æŸåˆ†åŒºã€‚
DiskGeniuséƒåŒå­¦æœ€å–œæ¬¢çš„ä¸€æ¬¾åˆ†åŒºå·¥å…·ï¼Œéå¸¸å¼ºå¤§ã€‚ä¸“ä¸šç‰ˆæ”¯æŒç¡¬ç›˜æ ¼å¼è½¬æ¢ï¼Œç‰›é€¼çš„æ‰æ¸£ã€‚æœ€é€‚åˆåœ¨winpeä¸‹ä½¿ç”¨ã€‚
æ— æŸåˆ†åŒºåŠ©æ‰‹é¡¾åæ€ä¹‰ï¼Œè¿™æ¬¾è½¯ä»¶è½¯ä»¶é€‚ç”¨äºæ— æŸåˆ†åŒºã€‚
å°ç»“åˆ†åŒºï¼Œå¾ˆæœ‰å­¦é—®ï¼Œç»†èŠ‚ä¸Šçš„ä¸œè¥¿ï¼ŒéƒåŒå­¦ä¸å†å±•å¼€ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´è‡ªè¡Œç™¾åº¦ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>å®‰è£…ç³»ç»Ÿä¹‹ä¸‰ç§æ–¹å¼</title>
    <url>/hobby-install-os-three-method/</url>
    <content><![CDATA[å‰è¨€å®‰è£…ç³»ç»Ÿçš„æ•™ç¨‹æœ‰å¾ˆå¤šï¼Œæœ€å¸¸ç”¨ä¸‰ç§æ–¹å¼ï¼šç¡¬ç›˜å®‰è£…ï¼ŒUç›˜å®‰è£…ï¼Œå…‰ç›˜å®‰è£…ã€‚
ç¡¬ç›˜å®‰è£…ä»ç¡¬ç›˜å®‰è£…ç³»ç»Ÿï¼Œæ˜¯æœ€ç®€å•çš„ä¸€ç§æ–¹å¼ã€‚è¿™ç§æ–¹å¼ï¼Œå‰ææ˜¯åŸç³»ç»Ÿå¯ä»¥æ­£å¸¸å¼€æœºã€‚
æ­¥éª¤ä¸€ï¼šä¸‹è½½é•œåƒæˆ‘ä»¬ä»¥å®‰è£…win8ä¸ºä¾‹ã€‚1ã€æ‰“å¼€æµè§ˆå™¨ï¼Œç„¶ååœ¨åœ°å€æ è¾“å…¥ä¸€ä¸ªæœç´¢å¼•æ“ç½‘å€ï¼Œæ¯”å¦‚ç™¾åº¦ã€‚2ã€åœ¨æœç´¢æ¡†è¾“å…¥â€œwin8é•œåƒâ€ï¼Œå•å‡»ç¬¬ä¸€ä¸ªæœç´¢ç»“æœã€‚3ã€é€‰æ‹©ä¸€ä¸ªé•œåƒï¼Œè¿›å…¥ä¸‹è½½é¡µ4ã€æ‰¾åˆ°ä¸‹è½½é“¾æ¥ï¼Œä¸‹è½½é•œåƒï¼Œå¤§å°ä¸€èˆ¬åœ¨2gåˆ°4gï¼Œæ–‡ä»¶åç§°ä¸º*.isoã€‚5ã€è§£å‹ä¸‹è½½å¥½çš„é•œåƒã€‚

æ­¥éª¤äºŒï¼šå®‰è£…ç³»ç»Ÿ1ã€åŒå‡»autorun.exeï¼Œé€‰æ‹©æ‰“å¼€ghostå®‰è£…å™¨ã€‚2ã€åœ¨ghostå®‰è£…å™¨ç•Œé¢ï¼Œé€‰ä¸­éœ€è¦å®‰è£…ç³»ç»Ÿçš„ç›˜ç¬¦ï¼Œä»¥åŠåˆšæ‰è§£å‹å‡ºæ¥çš„win8.ghoæ˜ åƒã€‚å•å‡»â€œæ‰§è¡Œâ€ï¼Œå®‰è£…ç³»ç»Ÿå°±å¼€å§‹äº†ã€‚3ã€ç³»ç»Ÿé‡å¯å‡ æ¬¡åï¼Œç³»ç»Ÿå®‰è£…å®Œæˆã€‚è¿™ä¸ªè¿‡ç¨‹ï¼Œ10åˆ°30åˆ†é’Ÿã€‚
Uç›˜å®‰è£…ä»Uç›˜å®‰è£…ç³»ç»Ÿï¼Œæ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§æ–¹å¼ã€‚å¦‚æœä½ çš„ç³»ç»Ÿå½»åº•å´©æºƒäº†ï¼Œæˆ–è€…ä½ æƒ³åˆ†åŒºåå†é‡è£…ç³»ç»Ÿï¼Œè¿™ç§æ–¹å¼æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚
æ­¥éª¤ä¸€ï¼šä¸‹è½½é•œåƒè¿™ä¸ªæ­¥éª¤çš„æ“ä½œæ–¹æ³•å’Œç¡¬ç›˜å®‰è£…æ­¥éª¤ä¸€ç›¸åŒã€‚
æ­¥éª¤äºŒï¼šåˆ¶ä½œå¯åŠ¨ç›˜1ã€å°†Uç›˜æ’å…¥USBæ¥å£ã€‚2ã€ä¸‹è½½å¯åŠ¨ç›˜åˆ¶ä½œå·¥å…·ï¼Œæˆ‘ä»¬ä»¥Uå¤§å¸ˆä¸ºä¾‹ã€‚è¿›å…¥Uå¤§å¸ˆå®˜ç½‘ï¼Œç„¶åä¸‹è½½Uå¤§å¸ˆã€‚
3ã€å®‰è£…Uå¤§å¸ˆï¼Œå¹¶å¯åŠ¨ã€‚4ã€åˆ¶ä½œå¯åŠ¨ç›˜ã€‚
æ­¥éª¤ä¸‰ï¼šæ‹·è´æ˜ åƒæ­¥éª¤ä¸€ä¸­ï¼Œæˆ‘ä»¬è§£å‹å‡ºçš„æ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªwin8.ghoï¼Œå¤åˆ¶win8.ghoæ˜ åƒåˆ°Uç›˜ã€‚
æ­¥éª¤å››ï¼šä»Uç›˜å¯åŠ¨1ã€å°†åšå¥½çš„å¯åŠ¨ç›˜æ’å…¥USBæ¥å£ã€‚2ã€ç‚¹å®Œå¼€æœºé”®ï¼Œç‹‚æŒ‰F12ï¼ˆä¸€èˆ¬çš„å“ç‰Œæœºï¼Œé€‰æ‹©å¯åŠ¨é¡¹çš„é”®éƒ½æ˜¯F12ï¼‰ã€‚å‡ºç°å¯åŠ¨é¡¹é€‰æ‹©ç•Œé¢ï¼Œä¸€èˆ¬å¯ä¾›é€‰æ‹©çš„æœ‰å…‰é©±ã€ç¡¬ç›˜ã€ç½‘ç»œã€å¯ç§»åŠ¨ç£ç›˜ï¼ˆUç›˜ï¼‰ã€‚è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä»Uç›˜å¯åŠ¨ã€‚3ã€å¦‚æœæŒ‰F12æ²¡æœ‰å‡ºç°å¯åŠ¨é¡¹é€‰æ‹©ç•Œé¢ï¼Œè¯·å‚è€ƒä¸‹åˆ—å¯åŠ¨æŒ‰é”®ã€‚4ã€å¦‚æœè¿˜æ˜¯æ²¡æœ‰å‡ºç°å¯åŠ¨é¡¹é€‰æ‹©ç•Œé¢ï¼Œæˆ–è€…å‡ºç°äº†å¯åŠ¨é¡¹é€‰æ‹©ç•Œé¢ï¼Œä½†æ˜¯æ²¡æœ‰ä»Uç›˜å¯åŠ¨è¿™ä¸ªé€‰é¡¹ã€‚è¿™æ—¶ï¼Œå°±éœ€è¦è®¾ç½®BIOSã€‚ä¸åŒæœºå™¨çš„BIOSå·®åˆ«è¾ƒå¤§ï¼Œä¸å±•å¼€è®²äº†ï¼Œç»™å‡ºä¸¤ä¸ªå‚è€ƒï¼Œåˆ†åˆ«æ¥è‡ªç™¾åº¦ç»éªŒå’ŒUå¤§å¸ˆã€‚
æ­¥éª¤äº”ï¼šè¿›å…¥winpe1ã€å‡å®šæ­¥éª¤å››æˆ‘ä»¬å·²ç»æˆåŠŸå®Œæˆï¼Œè¿™æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä¸‹é¢çš„ç•Œé¢ã€‚
2ã€æœ‰æ—¶é—´çš„è¯ï¼Œè¿™ä¸Šé¢çš„é€‰é¡¹ä½ å¯ä»¥æŒ¨ä¸ªè¯•è¯•ã€‚è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ã€01ã€‘è¿›å…¥ã€‚
æ­¥éª¤å…­ï¼šå®‰è£…ç³»ç»Ÿ1ã€winpeç³»ç»Ÿä¼šè‡ªåŠ¨å¼¹å‡ºä¸€ä¸ªè½¯ä»¶â€”â€”Uå¤§å¸ˆæ™ºèƒ½å¿«é€Ÿè£…æœºã€‚å®‰è£…æºæˆ‘ä»¬é€‰æ‹©Uç›˜é‡Œçš„win8.ghoã€‚
2ã€å•å‡»ä¸Šå›¾ä¸­çš„å¼€å§‹ï¼Œå®‰è£…ç³»ç»Ÿå¼€å§‹ã€‚
3ã€ç³»ç»Ÿé‡å¯å‡ æ¬¡åï¼Œç³»ç»Ÿå®‰è£…å®Œæˆã€‚è¿™ä¸ªè¿‡ç¨‹ï¼Œ10åˆ°30åˆ†é’Ÿã€‚
å…‰ç›˜å®‰è£…ä»å…‰ç›˜å®‰è£…ç³»ç»Ÿï¼Œæ˜¯æœ€ä¼ ç»Ÿçš„ä¸€ç§æ–¹å¼ã€‚è¿™ç§æ–¹å¼çš„å‰ææ˜¯ï¼Œä½ çš„ç”µè„‘è¦æœ‰å…‰é©±ã€‚
å¦‚æœï¼Œä½ æœ‰ç³»ç»Ÿç›˜ï¼ˆæ— è®ºæ˜¯è‡ªå·±åšçš„ï¼Œè¿˜æ˜¯ä»å•†åº—ä¹°çš„ï¼‰ï¼Œé‚£ä¹ˆç›´æ¥æ’å…¥å…‰é©±ï¼Œç„¶åä»æ­¥éª¤ä¸‰å¼€å§‹å¾€ä¸‹çœ‹ã€‚æˆ‘ä»¬è¿™é‡Œå‡è®¾ä½ æ²¡æœ‰ç³»ç»Ÿç›˜ï¼Œæœ‰ä¸€å¼ 4gçš„ç©ºç™½å…‰ç›˜ã€‚
æ­¥éª¤ä¸€ï¼šä¸‹è½½é•œåƒè¿™ä¸ªæ­¥éª¤çš„æ“ä½œæ–¹æ³•å’Œç¡¬ç›˜å®‰è£…æ­¥éª¤ä¸€ç›¸åŒï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œä¸éœ€è¦è§£å‹ã€‚
æ­¥éª¤äºŒï¼šåˆ¶ä½œç³»ç»Ÿç›˜1ã€å°†ç©ºç™½ç›˜æ’å…¥å…‰é©±ã€‚2ã€ä¸‹è½½å®‰è£…å…‰ç›˜åˆ»å½•è½¯ä»¶ï¼Œè¿™é‡ŒéƒåŒå­¦ä½¿ç”¨çš„æ˜¯UltraISOã€‚3ã€æ‰“å¼€UltraISOï¼Œå°†ä¸‹è½½çš„é•œåƒæ–‡ä»¶*.isoåˆ»å½•åˆ°ç©ºç™½å…‰ç›˜ã€‚4ã€åˆ»å½•å®Œæˆåï¼Œç³»ç»Ÿç›˜ä¹Ÿå°±åˆ¶ä½œå®Œæˆäº†ã€‚
æ­¥éª¤ä¸‰ï¼šä»å…‰ç›˜å¯åŠ¨1ã€å°†ç³»ç»Ÿç›˜æ’å…¥å…‰é©±ã€‚2ã€ç‚¹å®Œå¼€æœºé”®ï¼Œç‹‚æŒ‰F12ã€‚å‡ºç°å¯åŠ¨é¡¹é€‰æ‹©ç•Œé¢ï¼Œæˆ‘ä»¬é€‰æ‹©ä»CD-ROMå¯åŠ¨ã€‚
æ­¥éª¤å››ï¼šå®‰è£…ç³»ç»Ÿé€‰æ‹©â€œå®‰è£…win8ç³»ç»Ÿåˆ°Cç›˜â€ï¼Œå¼€å§‹å®‰è£…ç³»ç»Ÿã€‚ç³»ç»Ÿè‡ªåŠ¨é‡å¯å‡ æ¬¡ï¼Œå®‰è£…å®Œæˆã€‚åœ¨è¿™ä¸ªç•Œé¢ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¿›å…¥winpeï¼Œç„¶ååˆ†åŒºæˆ–è€…å®‰è£…ç³»ç»Ÿã€‚
å°ç»“æ‰€è°“çš„ä¸åŒæ–¹å¼ï¼Œè¯´ç™½äº†ï¼Œä¸è¿‡æ˜¯å®‰è£…æºçš„å­˜å‚¨ä»‹è´¨çš„åŒºåˆ«ã€‚
è¿˜æœ‰å…¶ä»–çš„å®‰è£…æ–¹å¼ï¼Œä¸‹é¢å†ç»™å‡ºä¸¤ä¸ªï¼š1ã€ç§»åŠ¨ç¡¬ç›˜è¿™ç§å®‰è£…æ–¹å¼å’Œä»Uç›˜å®‰è£…ç±»ä¼¼ï¼Œç”šè‡³ï¼Œä½ å¯ä»¥æŠŠç³»ç»Ÿå®‰è£…åœ¨ç§»åŠ¨ç¡¬ç›˜ï¼Œéšèº«æºå¸¦ã€‚
2ã€ç½‘ç»œåœ¨å®‰è£…linuxçš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡ç½‘ç»œè·å–æœ€æ–°ç‰ˆã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>å®‰è£…ç³»ç»Ÿä¹‹æ¦‚è¿°</title>
    <url>/hobby-install-os-start/</url>
    <content><![CDATA[å‰è¨€12å¹´ï¼Œå¼€å§‹æ¥è§¦å®‰è£…ç³»ç»Ÿã€‚ä¸‰ä¸ªå¹´å¤´äº†ï¼Œå®‰è£…çš„ç³»ç»Ÿï¼Œæ•°é‡è¿‡ç™¾æ˜¯è‚¯å®šçš„ã€‚é‡åˆ°çš„å„ç§å¥‡è‘©é—®é¢˜ï¼Œæ•°ä¸èƒœæ•°ã€‚winXPï¼Œwin7ï¼Œwin8ï¼Œå„ç§ç‰ˆæœ¬çš„Linuxï¼ŒMacOSï¼Œå®‰å“æ‰‹æœºç¬¬ä¸‰æ–¹româ€¦â€¦éƒ½ç ”ç©¶è¿‡ä¸€æ®µæ—¶é—´ã€‚ä»Šå¤©ï¼Œç®€å•æ€»ç»“ä¸€ä¸‹å®‰è£…ç³»ç»Ÿçš„æ–¹æ³•ï¼Œå¸Œæœ›å¯¹æƒ³å­¦ä¹ çš„å°ä¼™ä¼´æœ‰ç‚¹å¸®åŠ©ã€‚


æ“ä½œç³»ç»Ÿç†è§£
ä¸‰ç§æ–¹å¼å®‰è£…ç³»ç»Ÿçš„æ•™ç¨‹æœ‰å¾ˆå¤šï¼Œæœ€å¸¸ç”¨çš„æœ‰ä¸‰ç§æ–¹å¼ï¼šç¡¬ç›˜å®‰è£…ï¼ŒUç›˜å®‰è£…ï¼Œå…‰ç›˜å®‰è£…ã€‚æ›´å¤šå†…å®¹å‚è€ƒå®‰è£…ç³»ç»Ÿä¹‹ä¸‰ç§æ–¹å¼
åˆ†åŒºåˆå­¦è€…å¾ˆå®¹æ˜“æŠŠé‡æ–°åˆ†åŒºå’Œé‡è£…ç³»ç»Ÿææ··ï¼Œå®é™…ä¸Šï¼Œå®ƒä»¬æ˜¯ç›¸å…³ä½†å®Œå…¨ä¸åŒçš„ä¸¤ä»¶äº‹ã€‚æ›´å¤šå†…å®¹å‚è€ƒå®‰è£…ç³»ç»Ÿä¹‹åˆ†åŒº
é©±åŠ¨é©±åŠ¨æ˜¯è¿æ¥æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶çš„ç¨‹åºã€‚é©±åŠ¨å®‰è£…ä¸å¥½ï¼Œè®¡ç®—æœºä¼šå‡ºç°å„ç§é—®é¢˜ã€‚æ›´å¤šå†…å®¹å‚è€ƒå®‰è£…ç³»ç»Ÿä¹‹é©±åŠ¨
çº¯å‡€ç³»ç»Ÿå’Œghostç³»ç»Ÿå¾®è½¯çš„åŸç”Ÿç³»ç»Ÿï¼Œè¢«ç§°ä¸ºçº¯å‡€ç³»ç»Ÿï¼›ä»€ä¹ˆä¸­å…³æ‘ã€é›¨æ—æœ¨é£ã€ç»¿èŒ¶ç³»ç»Ÿã€æ–°èåœå®¶å›­ã€æ·±åº¦æŠ€æœ¯ç­‰ç­‰ï¼Œå‡ºå“çš„ç³»ç»Ÿï¼Œéƒ½æ˜¯ghostç³»ç»Ÿã€‚æ›´å¤šå†…å®¹å‚è€ƒå®‰è£…ç³»ç»Ÿä¹‹çº¯å‡€ç³»ç»Ÿå’Œghostç³»ç»Ÿ
æ¿€æ´»çº¯å‡€ç³»ç»Ÿå®‰è£…åè‚¯å®šéœ€è¦æ¿€æ´»ï¼Œé™¤éæ˜¯å‡çº§ç³»ç»Ÿï¼›ghostç³»ç»Ÿå®‰è£…åï¼Œä¸€èˆ¬ä¸éœ€è¦æ¿€æ´»ã€‚æ›´å¤šå†…å®¹å‚è€ƒå®‰è£…ç³»ç»Ÿä¹‹æ¿€æ´»
ä¸åŒå¹³å°Windowsã€Linuxã€MacOSã€æ‰‹æœºromï¼Œä¸åŒçš„å¹³å°ï¼Œå®‰è£…æ–¹å¼æœ‰ä¸€äº›å·®åˆ«ã€‚æ›´å¤šå†…å®¹å‚è€ƒå®‰è£…ç³»ç»Ÿä¹‹ä¸åŒå¹³å°
åŒç³»ç»Ÿå®‰è£…åŒç³»ç»Ÿï¼Œå’Œå®‰è£…å•ä¸€ç³»ç»Ÿç±»ä¼¼ã€‚æ›´å¤šå†…å®¹å‚è€ƒå®‰è£…ç³»ç»Ÿä¹‹åŒç³»ç»Ÿ
å¸¸è§é—®é¢˜å®‰è£…ç³»ç»Ÿï¼Œéš¾å¾—ä¸€å¸†é£é¡ºã€‚é‡è§é—®é¢˜ï¼Œè§£å†³é—®é¢˜ï¼æ›´å¤šå†…å®¹å‚è€ƒå®‰è£…ç³»ç»Ÿä¹‹å¸¸è§é—®é¢˜
ç»“æŸè¯­å‡ ç¯‡çŸ­æ–‡ï¼Œä¸å¯èƒ½é¢é¢ä¿±åˆ°ï¼Œæœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿ç»™éƒåŒå­¦ç•™è¨€ã€‚
å¦‚æœæƒ³æ¢ç³»ç»Ÿäº†ï¼Œé‚£ä¹ˆï¼Œå¤‡ä»½æ–‡ä»¶ï¼Œç„¶åå¤§èƒ†åœ°å»æŠ˜è…¾å§ï¼é‡è£…ç³»ç»Ÿåï¼Œä¹Ÿè®¸ï¼Œä½ çš„ç”µè„‘æ— æ³•å¼€æœºäº†ï¼›æˆ–è€…ï¼Œä½ çš„ç”µè„‘æ²¡æœ‰å£°éŸ³äº†ï¼›æˆ–è€…ï¼Œä½ çš„ç”µè„‘æ— æ³•è”ç½‘äº†ï¼›æˆ–è€…ï¼Œä½ çš„ç”µè„‘åˆ†åŒºå˜å¥‡æ€ªäº†â€¦â€¦ä¹Ÿè®¸ï¼Œä½ çš„æ‰‹æœºæ— æ³•æ‹ç…§äº†ï¼›æˆ–è€…ï¼Œä½ çš„æ‰‹æœºæ— æ³•æ‰“ç”µè¯äº†ï¼›æˆ–è€…ï¼Œä½ çš„æ‰‹æœºä¼šè‡ªåŠ¨å…³æœºâ€¦â€¦è¿™éƒ½æ²¡ä»€ä¹ˆï¼ŒéƒåŒå­¦é‡åˆ°è¿‡æ›´å¤šå¥‡è‘©çš„é—®é¢˜ï¼Œæœ‰äº›å‡ ä¹æ— æ³•ç”¨è¯­è¨€æè¿°ï¼è§£å†³è¿™äº›é—®é¢˜çš„è¿‡ç¨‹ï¼Œä½ ä¼šå­¦åˆ°çš„ä¸œè¥¿ä¸æ­¢å¯ä»¥è§£å†³è¿™äº›é—®é¢˜ã€‚
ä¸ä¸‹æ°´ï¼Œæ˜¯æ°¸è¿œæ— æ³•å­¦ä¼šæ¸¸æ³³çš„ã€‚ä¹Ÿè®¸ä¼šè¢«å‘›åˆ°ï¼Œä¹Ÿè®¸ä¼šå–å‡ å£æ± æ°´ï¼Œä¹Ÿè®¸ä¼šè¢«äººç¬‘è¯â€¦â€¦æ²¡å…³ç³»ï¼Œæœ€åï¼Œæˆ‘ä»¬è·å¾—çš„æŠ€èƒ½å¿…ç„¶æ˜¯ç‰›é€¼çš„ï¼Œä¸€åˆ‡éƒ½æ˜¯å€¼å¾—çš„ï¼
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>Axureå…¥é—¨ç¯‡</title>
    <url>/dev-axure-start/</url>
    <content><![CDATA[å‰è¨€å¯’å‡ï¼Œæ‰“ç®—åšä¸€ä¸ªè‡ªå·±ä½¿ç”¨çš„å®‰å“appã€‚é‚£å°±å­¦ä¹ å®‰å“å§ï¼Ÿè¿™ä¸ªæ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯é¦–å…ˆï¼Œæˆ‘è¦æ˜ç¡®éœ€æ±‚ã€‚è¯´çš„é€šä¿—ä¸€ç‚¹ï¼Œæˆ‘è¦å…ˆæ˜ç¡®ä¸€ä¸‹ï¼Œå®Œæˆåçš„äº§å“å¤§æ¦‚æ˜¯ä»€ä¹ˆæ ·å­ã€‚
ç”¨è½¯ä»¶å·¥ç¨‹çš„æ€æƒ³æ¥è§£é‡Šï¼Œå°±æ˜¯ä½¿ç”¨åŸå‹å¼€å‘æ–¹æ³•ã€‚åˆ©ç”¨å¿«é€Ÿå¼€å‘å·¥å…·æ„å»ºä¸€ä¸ªç³»ç»ŸåŸå‹ï¼Œä»¥ä¾¿åˆ†æç”¨æˆ·éœ€æ±‚å’Œç•Œé¢éœ€æ±‚ã€‚
è€ŒAxureï¼Œå°±æ˜¯ä¸€ä¸ªå¿«é€Ÿå¼€å‘å·¥å…·ã€‚ä¸€å‘¨å·¦å³ï¼Œåˆ©ç”¨Axureå®Œæˆäº†è‡ªå·±çš„åŸå‹è®¾è®¡ï¼Œåœ¨æ­¤æ€»ç»“ä¸€ä¸‹ã€‚
Axureå…¥é—¨è¿™æ¬¾è½¯ä»¶çš„ç•Œé¢å¦‚ä¸‹ï¼š
èœå•æ å’Œå·¥å…·æ ä¸å¤šè§£é‡Šï¼Œä¼šä½¿ç”¨wordï¼Œè¿™ä¸¤æ ä¸€çœ‹å°±æ‡‚ã€‚


é¡µé¢å¯¼èˆªé¡µé¢çš„ç›®å½•ï¼Œæ–¹ä¾¿æˆ‘ä»¬æ‰¾åˆ°é¡µé¢ã€‚
å·¥ä½œåŒºæ¯ä¸ªé¡µé¢å¯¹åº”ä¸€ä¸ªå·¥ä½œåŒºï¼Œæˆ‘ä»¬åœ¨å·¥ä½œåŒºè¿›è¡Œè®¾è®¡ã€‚
ç»„ä»¶ç»„ä»¶æ˜¯æˆ‘ä»¬è¿›è¡Œè®¾è®¡çš„â€œåŸæ–™â€ã€‚å’Œåšèœä¸€æ ·ï¼Œå„ç§åŸæ–™ç»è¿‡å¤„ç†æˆä¸ºä¸€é“èœï¼Œå„ç§ç»„ä»¶ç»è¿‡ç»„åˆæˆä¸ºä¸€ä¸ªé¡µé¢ã€‚
æ¯ç‰ˆå‡è®¾æ¯ä¸ªé¡µé¢éƒ½æœ‰ä¸€ä¸ªlogoï¼Œä¸Šé¢å†™ç€â€œvoidkingâ€ã€‚ç­‰åˆ°å®Œæˆä¹‹åï¼Œçªç„¶è§‰å¾—ä¸åˆé€‚ï¼Œæƒ³æ”¹æˆâ€œå¸…å“¥â€ï¼Œè¿™æ—¶å€™å·¥ä½œé‡å¤ªå¤§äº†ï¼
é‚£ä¹ˆæ€ä¹ˆé¿å…è¿™ä¸ªé—®é¢˜ï¼Ÿå¾ˆç®€å•ï¼ŒæŠŠè¿™ä¸ªlogoä½œä¸ºæ¯ç‰ˆï¼åªè¦ä¿®æ”¹äº†æ¯ç‰ˆï¼Œé‚£ä¹ˆï¼Œæ‰€æœ‰ä½¿ç”¨äº†è¿™ä¸ªæ¯ç‰ˆçš„é¡µé¢ï¼Œlogoå†…å®¹éƒ½ä¼šè¢«ä¿®æ”¹ã€‚
é¡µé¢äº¤äº’ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æƒ³è¦æŸä¸ªé¡µé¢ä¸€é—ªè€Œè¿‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸éœ€è¦ç”¨æˆ·å¯¹è¿™ä¸ªé¡µé¢è¿›è¡Œä»»ä½•æ“ä½œï¼Œå°±è·³è½¬åˆ°ä¸‹ä¸€ä¸ªé¡µé¢ã€‚è¿™æ—¶å€™ï¼Œå°±éœ€è¦åœ¨é¡µé¢äº¤äº’è¿™é‡Œè¿›è¡Œè®¾ç½®ã€‚
ç»„ä»¶äº¤äº’ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æƒ³è¦é€šè¿‡å•å‡»æ“ä½œè·³è½¬åˆ°å¦ä¸€ä¸ªé¡µé¢ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå°±éœ€è¦åœ¨ç»„ä»¶äº¤äº’è¿™é‡Œè¿™é‡Œè¿›è¡Œè®¾ç½®ã€‚
Axureå®è·µç»†è‡´ç¨‹åº¦ç»†è‡´ç¨‹åº¦åˆ†ä¸ºè‰å›¾ã€ä½ä¿çœŸåŸå‹ã€é«˜ä¿çœŸåŸå‹ã€‚è¿™æ¬¡åŸå‹è®¾è®¡ï¼Œåªæ˜¯åšäº†ä¸€ä¸ªä½ä¿çœŸåŸå‹ã€‚
é¢å¤–æŠ€èƒ½é¦–å…ˆï¼Œä½ è¦å­¦ä¼šPSã€‚å¦åˆ™ï¼Œä½ ä¼šå‘ç°ï¼Œå¯¸æ­¥éš¾è¡Œï¼å…¶æ¬¡ï¼Œä½ è¦å­¦ä¼šå¯»æ‰¾èµ„æºã€‚æ— è®ºæ˜¯å®‰å“ç»„ä»¶ï¼Œè¿˜æ˜¯éœ€è¦çš„å›¾ç‰‡ç´ æï¼Œéƒ½æ˜¯éœ€è¦å¯»æ‰¾çš„ã€‚æ‰€ä»¥ï¼Œå­¦ä¼šä½¿ç”¨æœç´¢å¼•æ“ï¼Œå—ç›Šä¸€ç”Ÿã€‚æœ€åï¼Œä½ è¦å­¦ä¼šå­¦ä¹ ã€‚åœ¨åšåŸå‹çš„è¿‡ç¨‹ä¸­ï¼Œè‚¯å®šæœ‰æŸäº›åŠŸèƒ½ï¼Œä½ ä¸çŸ¥é“å¦‚ä½•å®ç°ï¼Œè¿™æ—¶å€™ï¼Œå°±éœ€è¦ä½ å»å­¦ä¹ ã€‚
éƒ¨åˆ†æˆæœä¸è¦è®¤ä¸ºè‡ªå·±ä¸ä¼šï¼Œå¤§èƒ†å»ä½¿ç”¨å§ï¼Œç”¨ä¸äº†å‡ ä¸ªå°æ—¶ï¼Œä½ å°±ä¼šæŒæ¡è¿™æ¬¾å·¥å…·ã€‚å…·ä½“æ“ä½œè¿‡ç¨‹çœç•¥ï¼Œç»™å¤§å®¶å±•ç¤ºå‡ å¼ å›¾ç‰‡ã€‚
Axureé«˜çº§åº”ç”¨å­¦ä¼šä½¿ç”¨Axureå¾ˆç®€å•ï¼Œä½†æ˜¯ï¼Œè¦å®ç°æŸäº›ç»†èŠ‚çš„æ•ˆæœï¼ˆé«˜ä¿çœŸåŸå‹ï¼‰ï¼Œå°±éœ€è¦é«˜çº§çš„æŠ€å·§äº†ã€‚æ¯”å¦‚å®Œå…¨æ¨¡æ‹ŸiPhoneå‘é€çŸ­ä¿¡çš„è¿‡ç¨‹ï¼Œæ¯”å¦‚å®Œå…¨æ¨¡æ‹Ÿå¾®ä¿¡èŠå¤©çš„è¿‡ç¨‹ç­‰ç­‰ã€‚é«˜çº§çš„å†…å®¹ï¼Œè¿˜æ²¡æœ‰å­¦ä¹ ã€‚ç»™å¤§å®¶æ¨èå‡ ä¸ªå­¦ä¹ æ•™ç¨‹ï¼šç½‘æ˜“äº‘è¯¾å ‚Axureæ•™ç¨‹ç³»åˆ—å¤šè´å…¬å¼€è¯¾Axureæ•™ç¨‹ç³»åˆ—ã€ŠAxureå¿«é€ŸåŸå‹è®¾è®¡ã€‹ï¼Œæå–ç  f77c
å°ç»“ç±»ä¼¼Axureè¿™æ ·çš„å·¥å…·æœ‰å¾ˆå¤šï¼Œé‡è¦çš„ä¸æ˜¯å­¦ä¼šä½¿ç”¨Axureï¼Œè€Œæ˜¯æŒæ¡è®¾è®¡çš„æ€è·¯ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>android</category>
      </categories>
      <tags>
        <tag>android</tag>
        <tag>axure</tag>
      </tags>
  </entry>
  <entry>
    <title>æ­å»ºä¸ªäººç½‘ç«™ä¹‹æ¦‚è¿°</title>
    <url>/dev-build-personal-website-start/</url>
    <content><![CDATA[æ­å»ºä¸ªäººç½‘ç«™ä¹‹æ¦‚è¿°æ¯ä¸ªå­¦è®¡ç®—æœºçš„å°ä¼™ä¼´ï¼Œéƒ½æƒ³è¿‡æ­å»ºä¸ªäººç½‘ç«™å§ï¼Ÿæ¯•ç«Ÿï¼Œè¿™æ˜¯ä¸€ä»¶æ‹‰é£çš„äº‹æƒ…ã€‚ä¹Ÿæœ‰å‡ ä¸ªå­¦å¼Ÿå‘æˆ‘è¯·æ•™è¿‡ï¼Œä¸€ä¸ªä¸ªæ•™ï¼Œå¾ˆéº»çƒ¦ã€‚åœ¨æ­¤ï¼Œå†™ä¸€ç¯‡çŸ­æ–‡ï¼Œç»™åæ¥è€…æ‰«å¹³ä¸€äº›éšœç¢ã€‚
ä¸å–œæ¬¢ä½¿ç”¨å„ç§æ‹—å£çš„æœ¯è¯­ï¼Œå°½é‡ä¸¾ä¾‹ã€ç±»æ¯”ã€æ¯”å–»ã€ç”»å›¾ï¼Œè¯´çš„ä¸å¤Ÿä¸“ä¸šçš„åœ°æ–¹ï¼Œå°ä¼™ä¼´ä»¬è§è°…ï¼
åŸŸåvoidking.comã€baidu.comã€qq.comã€jd.comã€csdn.netç­‰ç­‰ï¼Œè¿™äº›ï¼Œå°±æ˜¯æ‰€è°“çš„åŸŸåï¼ˆäºŒçº§åŸŸåï¼‰ã€‚åœ¨æµè§ˆå™¨åœ°å€æ ï¼Œè¾“å…¥è¿™äº›åŸŸåï¼Œå°±èƒ½è®¿é—®åˆ°ç›¸åº”çš„ç½‘ç«™ã€‚ç®€å•ä»‹ç»ä¸€ä¸‹åŸç†ï¼šè®¿é—®è¯·æ±‚å…ˆè¢«å‘é€åˆ°DNSæœåŠ¡å™¨ï¼Œç„¶åè¿™äº›åŸŸåä¼šè¢«è§£ææˆIPåœ°å€ï¼Œå®é™…è®¿é—®çš„ï¼Œå°±æ˜¯IPåœ°å€ã€‚


æ²¡æœ‰åŸŸåå¯ä¸å¯ä»¥åšç½‘ç«™ï¼Ÿå¯ä»¥ï¼ä½†æ˜¯ï¼Œè®¿é—®çš„æ—¶å€™å°±éº»çƒ¦äº†ã€‚ä¸€äº›æœåŠ¡å™¨ï¼Œä¼šæä¾›ç»™ä½ ä¸‰çº§åŸŸåï¼Œæ¯”å¦‚voidking.gitcafe.comï¼›è€Œå¦å¤–ä¸€äº›ï¼Œåªèƒ½é€šè¿‡IPåœ°å€è®¿é—®ï¼Œéå¸¸ä¸äººé“ï¼æ‰€ä»¥ï¼Œæƒ³åšç½‘ç«™çš„å°ä¼™ä¼´ï¼Œå…ˆæ³¨å†Œä¸ªåŸŸåå§ï¼Œè¿™ç¬”æŠ•èµ„ä¸è¦çœï¼ä¹Ÿè®¸è‹¥å¹²å¹´åï¼Œä½ çš„åŸŸåä¼šè¢«åå€ç™¾å€çš„ä»·æ ¼æ”¶è´­ï¼Œæˆ–è€…æˆä¸ºä¸€ä¸ªå“ç‰Œï¼
æ³¨å†ŒåŸŸåçš„ç½‘ç«™å¾ˆå¤šï¼Œå›½å†…ï¼Œæœ€æ¬£èµä¸‡ç½‘ï¼›å›½å¤–ï¼Œæœ€æ¬£èµgodaddyã€‚è¿™ä¸¤ä¸ªç½‘ç«™ï¼Œéƒ½ä½¿ç”¨è¿‡ï¼Œç›¸è¾ƒè€Œè¨€ï¼Œè¿˜æ˜¯ä¸‡ç½‘æ›´é€‚åˆå›½å†…ç”¨æˆ·ã€‚
å‰äº›å¹´ï¼Œä¸‡ç½‘çš„é—®é¢˜è¾ƒå¤šï¼Œæˆ‘å¯¹å®ƒä¹Ÿå­˜åœ¨ä¸€äº›è´¨ç–‘ã€‚ä½†æ˜¯ï¼Œç°åœ¨ï¼Œä¸‡ç½‘åœ¨é˜¿é‡Œæ——ä¸‹ï¼Œæ— è®ºæ˜¯å…¶è®¿é—®é€Ÿåº¦ã€å®‰å…¨æ€§ã€è§£æé€Ÿåº¦ã€è¿ç§»ã€å®¢æœç­‰æ–¹é¢ï¼Œéƒ½åšçš„éå¸¸å¥½ã€‚
godaddyçš„å£ç¢‘éå¸¸å¥½ï¼Œå¾ˆå¤šå‰è¾ˆéƒ½æ¨èã€‚ä½†æ˜¯ä¸ªäººä½“éªŒå‘ç°ï¼Œgodaddyçš„è®¿é—®é€Ÿåº¦å’Œä¸‡ç½‘ç›¸æ¯”å°±æ˜¯ä¸ªæ¸£ï¼Œè¿™è®©å›½å†…çš„æˆ‘éš¾ä»¥å¿å—ã€‚å¦å¤–ï¼ŒåŸŸåè§£æç•Œé¢çœŸå¿ƒéš¾æ‰¾ï¼Œè§£æé€Ÿåº¦ä¹Ÿæ²¡æœ‰ä¸‡ç½‘å¿«ã€‚å€¼å¾—å¤¸å¥–çš„æ˜¯ï¼Œå®¢æœå¾ˆæœ‰æ°´å¹³ã€‚è¿˜è®°å¾—ï¼Œæ›¾ç»é‡åˆ°åŸŸåæ¶ˆå¤±é—®é¢˜ï¼Œåœ¨æˆ‘çš„poor Englishæè¿°ä¸‹ï¼Œå®¢æœå¸®åŠ©æˆ‘å®Œç¾è§£å†³äº†é—®é¢˜ï¼
æ€»è€Œè¨€ä¹‹ï¼Œåœ¨å“ªæ³¨å†ŒåŸŸåéƒ½å¯ä»¥ï¼Œä¸ªäººæ¨èä¸‡ç½‘ã€‚
æœåŠ¡å™¨æ²¡æœ‰åŸŸåï¼Œåˆ«äººå¯ä»¥è®¿é—®åˆ°ä½ çš„ç½‘ç«™ï¼Œä½†æ˜¯æ²¡æœ‰æœåŠ¡å™¨ï¼Œå°±çœŸçš„ä¸è¡Œäº†ï¼é™¤éä½ æ‰“ç®—åªæ˜¯å±€åŸŸç½‘ä½¿ç”¨ï¼æœåŠ¡å™¨çš„ç”¨é€”ï¼Œé™¤äº†éƒ¨ç½²ä½ çš„ç½‘ç«™å¤–ï¼Œè¿˜å¯ä»¥éƒ¨ç½²å¾ˆå¤šå…¶ä»–æœåŠ¡ã€‚
ä½¿ç”¨è¿‡å¾ˆå¤šæœåŠ¡å™¨ï¼Œç®€å•æè¿°ä¸€ä¸‹å®ƒä»¬ï¼
å…è´¹æœåŠ¡å™¨BAEã€CAEã€GAEã€JAEã€SAEç­‰ç­‰ï¼Œä¹‹å‰éƒ½æ˜¯å…è´¹çš„ï¼Œç°åœ¨ï¼Œåªæœ‰GAEã€JAEã€SAEè¿˜ç®—å¾—ä¸Šå…è´¹ã€‚ä»–ä»¬çš„ç”¨æ³•æ¯”è¾ƒæ­»æ¿ï¼ŒåŸºæœ¬éƒ½æ˜¯å»ºç«‹æŸä¸ªç±»å‹çš„åº”ç”¨ï¼Œç„¶åæŠŠä»£ç éƒ¨ç½²ä¸Šå»ã€‚é‡ç‚¹åœ¨äºå…è´¹ï¼Œæˆ–è€…å…è´¹ä¸€æ®µæ—¶é—´ï¼Œå¯¹äºå­¦ç”Ÿå…šï¼Œè¿˜æ˜¯å€¼å¾—èŠ±æ—¶é—´ç ”ç©¶ä¸€ä¸‹çš„ã€‚
æ­¤å¤–ï¼Œopenshiftç©ºé—´ä¹Ÿä¸é”™ï¼Œä½†æ˜¯å›½å†…çš„è®¿é—®é€Ÿåº¦ï¼Œå®åœ¨æ˜¯æ— æ³•å¿å—ï¼æ›¾ç»æ­å»ºè¿‡ä¸€ä¸ªwordpressé¡¹ç›®ï¼Œé‚£é€Ÿåº¦ã€‚ã€‚ã€‚è¿˜æ˜¯å…ˆå»æ³¡æ¯èŒ¶å§ã€‚ã€‚ã€‚
è¿˜æœ‰herokuã€appfogã€mongolabç­‰ç­‰ã€‚
æ”¶è´¹æœåŠ¡å™¨æ”¶è´¹çš„æœåŠ¡å™¨ï¼Œé‚£å°±å¤šäº†å»äº†ã€‚æ¨èé˜¿é‡Œäº‘ï¼Œä½¿ç”¨ä¸­ï¼Œå„é¡¹æ€§èƒ½éƒ½å¾ˆæ»¡æ„ã€‚å„ç§é›†æˆç³»ç»Ÿé•œåƒå¯ä¾›é€‰æ‹©ï¼Œå®‰å…¨æ€§ä¹Ÿå¾ˆå¥½ã€‚è€Œä¸”ï¼Œå¤‡æ¡ˆæœåŠ¡åšå¾—éå¸¸å¥½ï¼çªç„¶æ„Ÿè§‰è‡ªå·±æœ‰åšå¹¿å‘Šçš„å«Œç–‘ï¼Œé˜¿é‡Œäº‘æ²¡ç»™æˆ‘é’±ï¼Œæˆ‘æ˜¯ä¸æ˜¯åƒäºäº†ï¼Ÿ
å¤‡æ¡ˆä¸ºä»€ä¹ˆéœ€è¦å¤‡æ¡ˆï¼Ÿè¯æ˜ä½ çš„ç½‘ç«™æ˜¯åˆæ³•çš„ï¼ä¸‡ä¸€çŠ¯äº†äº‹ï¼Œæ–¹ä¾¿æŠ“æ•ã€‚ã€‚ã€‚æˆ‘ä¸ä¼šå‘Šè¯‰ä½ ï¼Œä½¿ç”¨å›½å¤–ç©ºé—´ä¸è¦å¤‡æ¡ˆï¼›æˆ‘æ›´ä¸ä¼šå‘Šè¯‰ä½ ï¼Œå›½å†…ç©ºé—´æƒ³è¦ä½¿ç”¨åŸŸåï¼Œå¿…é¡»å¤‡æ¡ˆï¼
ä¸ä¹…å‰ï¼Œä¸‡ç½‘å¤‡æ¡ˆç³»ç»Ÿå’Œé˜¿é‡Œäº‘å¤‡æ¡ˆç³»ç»Ÿåˆä¸€ï¼Œå¤‡æ¡ˆè¦æ±‚ä¹Ÿæ›´åŠ ä¸¥æ ¼ã€‚æ›¾ç»å¤‡æ¡ˆè¿‡ä¸¤æ¬¡ï¼Œæ¯æ¬¡éœ€è¦çš„æ—¶é—´ï¼Œå‰å‰ååå¤§æ¦‚åŠä¸ªæœˆã€‚
æŠ€æœ¯éš¾åº¦ç³»æ•°ä»é«˜åˆ°ä½ï¼šå…¨éƒ¨è‡ªå·±åš &gt; hexo &gt; octopress &gt; wordpressã€‚
å…¨éƒ¨è‡ªå·±åšè‡ªå·±åšç½‘ç«™ï¼Œå¯ä»¥é€‰å„ç§è¯­è¨€ï¼Œåå°Jave EEã€JSPã€ASPã€PHPã€Node.jsç­‰ç­‰ï¼Œå‰å°Html/XHtmlã€CSSã€JavaScriptã€JQueryã€AngularJsç­‰ç­‰ã€‚è‡ªå·±åšç½‘ç«™ï¼Œé€‚åˆè®¡ç®—æœºä¸“ä¸šçš„å°ä¼™ä¼´ã€‚
hexoè¿™æ˜¯ä¸€ä¸ªé™æ€åŒ–åšå®¢ç³»ç»Ÿï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒçš„é¡µé¢åªéœ€è¦htmlï¼Œä¸éœ€è¦æœåŠ¡å™¨çš„ç¼–è¯‘ï¼Œä¸éœ€è¦æ•°æ®åº“ç­‰ã€‚ç°åœ¨ä½ çœ‹åˆ°çš„è¿™ç¯‡å°æ–‡ï¼Œå°±æ˜¯ä½¿ç”¨hexoåšçš„ã€‚å‡†ç¡®çš„è¯´ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªç½‘ç«™ï¼Œåªæ˜¯ä¸€ä¸ªä¸ªäººä¸»é¡µã€‚å¯ä»¥å­˜å‚¨åœ¨githubã€gitcafeï¼Œæˆ–è€…ä»»ä½•å¯è®¿é—®çš„ç©ºé—´ã€‚
octopressè¿™ä¹Ÿæ˜¯ä¸€ä¸ªé™æ€åŒ–åšå®¢ç³»ç»Ÿã€‚å¹¶æ²¡æœ‰ä½¿ç”¨è¿‡è¿™ä¸ªåšå®¢ç³»ç»Ÿï¼Œä½†æ˜¯ç½‘ä¸Šæ•™ç¨‹å¾ˆå¤šï¼Œå£ç¢‘ä¸é”™å“¦ï¼ä¹Ÿå¯ä»¥å­˜å‚¨åœ¨ä»»ä½•å¯è®¿é—®çš„ç©ºé—´ã€‚
wordpresséå¸¸å¼ºå¤§çš„ä¸€ä¸ªåšå®¢ç³»ç»Ÿï¼Œä¸»é¢˜éå¸¸å¤šï¼Œæ€»æœ‰ä¸€æ¬¾é€‚åˆä½ ã€‚ç”šè‡³ï¼Œå¯ä»¥åšä¼ä¸šå®˜ç½‘ï¼
å°ç»“è¿™ç¯‡æ–‡ç« ï¼Œæ²¡æœ‰å±•å¼€è®ºè¿°æ¯ä¸€ä¸ªç‚¹ï¼Œæœ‰ä¸æ‡‚çš„åœ°æ–¹ï¼Œç™¾åº¦ä¼šå‘Šè¯‰ä½ ç­”æ¡ˆã€‚åŒæ—¶æ¬¢è¿å¤§å®¶ç•™è¨€è®¨è®ºï¼Œä¸€å®šå°½å¿«å›å¤ï¼
å‚è€ƒæ–‡æ¡£
2014å¹´åå¤§ä¼˜ç§€å…è´¹ç©ºé—´æ’è¡Œ
ä½¿ç”¨github + Octopress æ­å»ºå…è´¹åšå®¢

]]></content>
      <categories>
        <category>engineering</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>ç½‘ç«™</tag>
        <tag>åŸŸå</tag>
        <tag>æœåŠ¡å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>ç½‘é¡µæ ‡ç­¾æ·»åŠ å›¾æ ‡</title>
    <url>/dev-page-label-add-icon/</url>
    <content><![CDATA[å‰è¨€è¿™ä¸ªæ ‡é¢˜æ˜¯å•¥æ„æ€ï¼Ÿå¦‚ä¸‹å›¾ï¼Œæ¯ä¸ªç½‘ç«™éƒ½æœ‰è‡ªå·±çš„æ ‡ç­¾å›¾æ ‡ï¼š


åˆ¶ä½œå›¾æ ‡å›¾æ ‡ï¼Œå€¼å¾—ä½ èŠ±è´¹æ—¶é—´ç”¨å¿ƒé€‰æ‹©ã€è®¾è®¡ã€‚æ¯å½“ä½ çœ‹åˆ°é‚£ä¸ªè“è‰²çš„è„šå°ï¼Œéƒ½ä¼šæƒ³èµ·ç™¾åº¦ï¼æˆ‘ä»¬éš¾ä»¥è¶…è¶Šç™¾åº¦ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½æ‹¥æœ‰è‡ªå·±çš„â€œå“ç‰Œâ€ï¼Œå“ªæ€•æ²¡äººçŸ¥é“ï¼Œä¹Ÿå¾ˆçˆ½ï¼Œä¸æ˜¯å—ï¼Ÿ
åœ¨çº¿ç”Ÿæˆç™¾åº¦åœ¨çº¿faviconç”Ÿæˆï¼Œä½ ä¼šæ‰¾åˆ°å¾ˆå¤šåœ¨çº¿åˆ¶ä½œfaviconå›¾æ ‡çš„ç½‘ç«™ã€‚ä¸Šä¼ ä¸€å¼ å›¾ç‰‡ï¼Œå°±å¯ä»¥è‡ªåŠ¨ç”Ÿæˆä½ æƒ³è¦çš„favicon.icoå›¾æ ‡ï¼Œä¸‹è½½å³å¯ã€‚
è½¯ä»¶ç”Ÿæˆåˆ¶ä½œfaviconçš„è½¯ä»¶æœ‰å¾ˆå¤šï¼Œè¿™é‡Œæ¨èä¸€æ¬¾é­”æ³•ICO v2.00ã€‚
ä½¿ç”¨æ–¹æ³•å‡è®¾æˆ‘ä»¬å·²ç»å¾—åˆ°äº†faviconå›¾æ ‡ï¼Œè¿™æ—¶ï¼Œåº”è¯¥æ€æ ·ä½¿ç”¨å®ƒå‘¢ï¼Ÿ
æŠŠfavicon.icoä¸Šä¼ åˆ°æœåŠ¡å™¨æ”¾åœ¨ç½‘ç«™æ ¹ç›®å½•ä¸‹ï¼Œç„¶ååœ¨é¦–é¡µæ–‡ä»¶ä¸­æ®µæ’å…¥ï¼š
&lt;link rel=&quot;shortcut icon&quot; href=&quot;favicon.ico&quot;&gt;&lt;link rel=&quot;Bookmark&quot; href=&quot;favicon.ico&quot;&gt;

ç¬¬ä¸€å¥ç”¨æ¥æ­£å¸¸æ˜¾ç¤ºå›¾æ ‡ï¼Œç¬¬äºŒå¥ç”¨æ¥æ·»åŠ ä¹¦ç­¾æ—¶æ˜¾ç¤ºå›¾æ ‡ã€‚

å¦‚æœä½ å¸Œæœ›å‡ºç°åŠ¨ç”»æ•ˆæœçš„faviconå›¾æ ‡ï¼Œé‚£å°±ä¸Šä¼ animated_favicon1.gifï¼ˆåŠ¨ç”»å›¾æ ‡ï¼‰å¹¶ä¸”æ·»åŠ å¦‚ä¸‹çš„HTMLæ ‡ç­¾ï¼š
&lt;link rel=&quot;shortcut icon&quot; href=&quot;favicon.ico&quot; &gt;&lt;link rel=&quot;icon&quot; href=&quot;animated_favicon1.gif&quot; type=&quot;image/gif&quot; &gt;
å°ç»“æ•´ä¸ªè¿‡ç¨‹è¿˜æ˜¯å¾ˆç®€å•ï¼Œè®°å½•ä¸€ä¸‹ï¼Œå¸Œæœ›å¯¹ä¸ç†Ÿæ‚‰çš„å°ä¼™ä¼´æœ‰ç‚¹å¸®åŠ©ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title>æ“ä½œç³»ç»Ÿè¯¾è®¾</title>
    <url>/dev-os-curriculum-design/</url>
    <content><![CDATA[é€‰é¢˜ï¼šæ–‡ä»¶ç®¡ç†ç³»ç»Ÿæ¯ä¸ªåŒå­¦ï¼Œå¿…é¡»å®Œæˆä¸¤ä¸ªé¢˜ç›®ï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„ä¸¤ä¸ªé€‰é¢˜ã€‚
1ã€é“¶è¡Œå®¶ç®—æ³•çš„æ¨¡æ‹ŸæŒæ¡æ­»é”ç›¸å…³çš„æ¦‚å¿µå’Œè§£å†³æ–¹æ¡ˆï¼Œç†è§£é“¶è¡Œå®¶ç®—æ³•çš„å·¥ä½œåŸç†ï¼Œè®¾è®¡åˆé€‚çš„æ•°æ®ç»“æ„å’Œç®—æ³•ï¼Œæ¨¡æ‹Ÿå®ç°é“¶è¡Œå®¶ç®—æ³•ã€‚
2ã€ä¸€ä¸ªç®€å•æ–‡ä»¶ç®¡ç†å™¨çš„å®ç°æŒæ¡æ“ä½œç³»ç»Ÿå…³äºæ–‡ä»¶ç®¡ç†çš„å„ç§åŸç†ï¼Œç†Ÿæ‚‰å¸¸ç”¨çš„æ–‡ä»¶æ“ä½œï¼Œç¼–å†™ç¨‹åºå®ç°æ–‡ä»¶çš„å¸¸è§„æ“ä½œã€‚
å¯¹äºé€‰é¢˜1ï¼Œæ‰¾åˆ°äº†å‰è¾ˆçš„ä½œå“ï¼Œæ”¹ä¸€æ”¹ï¼ŒéªŒæ”¶ï¼å½“ç„¶ï¼Œè¢«è€å¸ˆåæ§½ä¸€é¡¿æ˜¯éš¾å…çš„ã€‚
å¯¹äºé€‰é¢˜2ï¼Œæ–‡ä»¶ç®¡ç†ç³»ç»Ÿï¼Œè¿™ä¸ªå°±æœ‰æ„æ€äº†ï¼Œå€Ÿé‰´äº†å¤§ç¥cattong çš„æ€è·¯ï¼Œä¸‹é¢å’Œå¤§å®¶è®¨è®ºä¸‹ã€‚

è¯­è¨€ï¼šJavaç¼–ç¨‹ä¸‰å¹´ï¼Œä¸ªäººæ„Ÿè§‰ï¼Œæœ€å‹å¥½çš„è¯­è¨€å°±æ˜¯Javaäº†ã€‚æœ¬æ¬¡è¯¾è®¾ï¼Œæ¯«æ— äº‰è®®é€‰æ‹©äº†Javaã€‚
è®¾è®¡æ€è·¯ç•Œé¢å¾ˆç®€æ´çš„ç•Œé¢ï¼Œä¸Šé¢è¾“å…¥å‘½ä»¤ï¼Œä¸‹é¢æ˜¾ç¤ºç»“æœã€‚åºŸè¯ä¸å¤šè¯´ï¼Œä¸Šä»£ç ï¼
package com.voidking.file;import java.awt.BorderLayout;import java.awt.FlowLayout;import javax.swing.JFrame;import javax.swing.JLabel;import javax.swing.JPanel;import javax.swing.JScrollPane;import javax.swing.JTextArea;import javax.swing.JTextField;public class MainFrame extends JFrame &#123;	public static void main(String[] args) &#123;				MainFrame thisClass = new MainFrame();		thisClass.setVisible(true);	&#125;		public MainFrame() &#123;		super();		initialize();	&#125;		private void initialize() &#123;		this.setTitle(&quot;èµ„æºç®¡ç†&quot;);		this.setSize(500, 400);		this.setLocationRelativeTo(null);		this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);		contentPane = new JPanel();		contentPane.setLayout(new BorderLayout());		contentPane.add(getCmdPane(), BorderLayout.NORTH);		contentPane.add(getEchoArea(), BorderLayout.CENTER);		this.add(contentPane);		cmd = new Command(this);		display(&quot;C:&gt;&quot;);	&#125;	private static final long serialVersionUID = 1L;	private JPanel contentPane = null;	private JPanel cmdPane = null;	private JLabel jLabel = null;	private JTextField cmdText = null;	private JTextArea echoArea = null;	private JScrollPane areaScroll = null;	private Command cmd = null;	private JPanel getCmdPane() &#123;		if (cmdPane == null) &#123;			jLabel = new JLabel();			jLabel.setText(&quot;å‘½ ä»¤ è¡Œ:&quot;);			cmdPane = new JPanel();			cmdPane.setLayout(new FlowLayout());			cmdPane.add(jLabel, null);			cmdPane.add(getCmdText(), null);		&#125;		return cmdPane;	&#125;	private JTextField getCmdText() &#123;		if (cmdText == null) &#123;			cmdText = new JTextField();			cmdText.setColumns(25);			// æ·»åŠ é”®ç›˜ç›‘å¬äº‹ä»¶;			cmdText.addKeyListener(new java.awt.event.KeyAdapter() &#123;				public void keyTyped(java.awt.event.KeyEvent e) &#123;				&#125;								public void keyPressed(java.awt.event.KeyEvent e) &#123;					if (e.getKeyCode() == 10) &#123;						// å¯¹æ–‡æœ¬è¿›è¡Œå¤„ç†;						cmd.operate(cmdText.getText().trim());					&#125;				&#125;			&#125;);		&#125;		return cmdText;	&#125;	private JScrollPane getEchoArea() &#123;		if (echoArea == null) &#123;			echoArea = new JTextArea();			echoArea.setEditable(false);			areaScroll = new JScrollPane();			areaScroll.setViewportView(echoArea);		&#125;		return areaScroll;	&#125;	// åœ¨å›æ˜¾æ¡†æ˜¾ç¤ºç»“æœ;	public void display(String str) &#123;		echoArea.append(str + &quot;\n&quot;);		echoArea.setCaretPosition(echoArea.getText().length());		cmdText.setText(&quot;&quot;);	&#125;&#125;
å‘½ä»¤å¤„ç†åœ¨ç•Œé¢åˆå§‹åŒ–å‡½æ•°initialize()ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªCommandç±»çš„å®ä¾‹ï¼šcmdå¯¹è±¡ã€‚ç„¶åï¼Œåœ¨getCmdText()å‡½æ•°ä¸­ç›‘å¬æ–‡æœ¬æ¡†ä¸­çš„å†…å®¹ï¼Œè°ƒç”¨cmdå¯¹è±¡çš„å‡½æ•°è¿›è¡Œå¤„ç†ã€‚
Commandç±»ï¼Œå°è£…äº†æ‰€æœ‰çš„å‘½ä»¤å¤„ç†å‡½æ•°ã€‚ç»“æ„ç®€å•æ˜äº†ï¼Œä¸å¤šè§£é‡Šï¼Œç›´æ¥ä¸Šä»£ç ï¼
package com.voidking.file;import java.awt.Desktop;import java.io.File;public class Command &#123;	private String currentPath;	private MainFrame mainFrame = null;	private final String cmd[] = &#123; &quot;cd&quot;, &quot;dir&quot;, &quot;mkdir&quot;, &quot;rmdir&quot;, &quot;mkfile&quot;, &quot;rmfile&quot;,			&quot;exit&quot; ,&quot;mkpath&quot;,&quot;open&quot;&#125;;	private final int cmdInt[] = &#123; 1, 2, 3, 4, 5, 6, 7 ,8,9&#125;;	Command(MainFrame mainFrame) &#123;		currentPath = &quot;C:&quot;;		this.mainFrame = mainFrame;	&#125;	public String[] separate(String operation) &#123;		String[] str = operation.split(&quot; &quot;);		//ä¸»è¦è§£å†³æ–‡ä»¶å¤¹æˆ–æ–‡ä»¶ä¸­å«æœ‰ç©ºæ ¼çš„æƒ…å†µ;		if(str.length&gt;2)&#123;			String[] tempStr=new String[2];			tempStr[0]=str[0];			tempStr[1]=str[1];			for(int i=2;i&lt;str.length;i++)				tempStr[1]+=&quot; &quot;+str[i];			return tempStr;		&#125;		return str;	&#125;	/*	 * æ ¹æ®å‚æ•°operationæ‰§è¡Œç›¸åº”çš„æ“ä½œ;	 */	public void operate(String operation) &#123;		String[] str = separate(operation);		String mycmd = &quot;&quot;;		int mycmdInt = 0;		String path = &quot;&quot;;		if (str.length == 1) &#123;			mycmd = str[0];			//åˆ‡æ¢ç›˜ç¬¦			if (mycmd.indexOf(&quot;:&quot;) != -1) &#123;				File newFile = new File(mycmd);				if (newFile.exists()) &#123;					currentPath = mycmd;					mainFrame.display(getPath());					return;				&#125;			&#125;		&#125;		if (str.length &gt;= 2) &#123;			mycmd = str[0];			path = str[1];		&#125;		for (int i = 0; i &lt; cmd.length; i++) &#123;			if (mycmd.equalsIgnoreCase(cmd[i])) &#123;				mycmdInt = cmdInt[i];			&#125;		&#125;				switch (mycmdInt) &#123;		case 1:			cd(currentPath, path);			break;		case 2:			dir(currentPath);			break;		case 3:			mkdir(path);			break;		case 4:			rmdir(path);			break;		case 5:			mkfile(path);			break;		case 6:			rmfile(path);			break;		case 7:			exit();			break;		case 8:			mkpath(path);			break;		case 9:			open(path);			break;					default:			mainFrame.display(&quot;æ— æ•ˆçš„å‘½ä»¤!&quot;);		&#125;		mainFrame.display(getPath());	&#125;	/*	 * è·å¾—å½“å‰æ‰€åœ¨ç›®å½•;	 */	public String getPath() &#123;		return currentPath + &quot;&gt;&quot;;	&#125;	/*	 * è·å¾—è·¯å¾„pathä¸‹çš„æ–‡ä»¶;	 */	public String[] listAll(String path) &#123;				try &#123;			File f = new File(path);			String[] fileName;			if (f.isDirectory()) &#123;				fileName = f.list();				mainFrame.display(&quot;å…±æœ‰&quot; + fileName.length + &quot;ä¸ªæ–‡ä»¶&quot;);				for (int i = 0; i &lt; fileName.length; i++)					mainFrame.display(&quot;    &quot; + fileName[i]);				return fileName;			&#125; else if (f.isFile()) &#123;				mainFrame.display(&quot;è¿™æ˜¯ä¸€ä¸ªæ–‡ä»¶&quot;);				return null;			&#125; else &#123;				//System.out.println(path);				return null;			&#125;		&#125; catch (Exception e) &#123;			return null;		&#125;	&#125;    public String[] listDirectory(String path)&#123;    	File f = new File(path);		String[] fileName;		if (f.isDirectory()) &#123;			fileName = f.list();			//for (int i = 0; i &lt; fileName.length; i++)				//System.out.println(&quot;/&quot;+fileName[i]);			return fileName;		&#125; else &#123;			//System.out.println(path+&quot;æ˜¯æ–‡ä»¶&quot;);			return null;		&#125;    &#125;	/*	 * åˆ¤æ–­è¿™ä¸ªè·¯å¾„æ˜¯å¦æ­£ç¡®;	 */	public boolean isRightPath(String path) &#123;		File file = new File(path);		if (file.isDirectory() || file.isFile())			return true;		else			return false;	&#125;	/*	 * è¿›è¡Œcdæ“ä½œ;cd&lt;ç›®å½•å&gt; åŠŸèƒ½:è¿›å…¥ä¸‹ä¸€ä¸ªç›®å½•;	 */	public void cd(String path, String file) &#123;		String temp = path + &quot;\\&quot; + file;		if (!isRightPath(temp)) &#123;			mainFrame.display(&quot;æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹&quot;);		&#125; else &#123;			if (!file.equals(&quot;&quot;))				currentPath += &quot;\\&quot; + file;		&#125;	&#125;	/*	 * è¿›è¡Œdiræ“ä½œ;dir [&lt;ç›®å½•å&gt;] åŠŸèƒ½:ï® æ˜¾ç¤ºç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶;	 */	public void dir(String path) &#123;		if (path != null)			listAll(path);	&#125;	/*	 * mkdir &lt;ç›®å½•å&gt; åŠŸèƒ½:ï® åˆ›å»ºæ–°ç›®å½•	 */	public void mkdir(String directory) &#123;		if (!currentPath.equals(&quot;&quot;)) &#123;			String temp = currentPath + &quot;\\&quot; + directory;			File newFile = new File(temp);			if (!newFile.exists()) &#123;				try &#123;					if (newFile.isDirectory() == false) &#123;						newFile.mkdirs();						mainFrame.display(&quot;æ–‡ä»¶å¤¹åˆ›å»ºæˆåŠŸ!&quot;);					&#125; else &#123;						mainFrame.display(&quot;æ–‡ä»¶å¤¹åˆ›å»ºå‡ºé”™!&quot;);					&#125;				&#125; catch (Exception e) &#123;					mainFrame.display(&quot;å‡ºé”™ä¿¡æ¯:&quot; + e.getMessage());				&#125;			&#125; else &#123;				mainFrame.display(&quot;æ–‡ä»¶å¤¹å·²ç»å­˜åœ¨&quot;);			&#125;		&#125;	&#125;	/*	 * rmdir &lt;ç›®å½•å&gt; åŠŸèƒ½:ï® åˆ é™¤ç›®å½•;	 */	public void rmdir(String directory) &#123;		if (!currentPath.equals(&quot;&quot;)) &#123;			String temp = currentPath + &quot;\\&quot; + directory;			File file = new File(temp);			if (file.exists()) &#123;				if (file.delete()) &#123;					mainFrame.display(&quot;æ–‡ä»¶å¤¹åˆ é™¤æˆåŠŸ!&quot;);				&#125; else &#123;					mainFrame.display(&quot;æ–‡ä»¶å¤¹åˆ é™¤æ“ä½œå‡ºé”™!&quot;);				&#125;			&#125; else &#123;				mainFrame.display(&quot;æ–‡ä»¶å¤¹ä¸å­˜åœ¨&quot;);			&#125;		&#125;	&#125;	/*	 * mkfile &lt;æ–‡ä»¶å&gt; åŠŸèƒ½:ï® æ–°å»ºæ–‡ä»¶	 */	public void mkfile(String file) &#123;		if (!currentPath.equals(&quot;&quot;)) &#123;			String temp = currentPath + &quot;\\&quot; + file;			File newFile = new File(temp);			if (newFile.exists()) &#123;				mainFrame.display(&quot;æ–‡ä»¶å·²ç»å­˜åœ¨!&quot;);			&#125; else &#123;				try &#123;					newFile.createNewFile();					mainFrame.display(&quot;æ–‡ä»¶åˆ›å»ºæˆåŠŸ!&quot;);				&#125; catch (Exception e) &#123;					mainFrame.display(&quot;æ–‡ä»¶åˆ›å»ºå¤±è´¥:&quot; + e.getMessage());				&#125;			&#125;		&#125;	&#125;	/*	 * rmfile &lt;æ–‡ä»¶å&gt; åŠŸèƒ½:åˆ é™¤æ–‡ä»¶;	 */	public void rmfile(String file) &#123;		if (!file.equals(&quot;&quot;)) &#123;			String temp = currentPath + &quot;\\&quot; + file;			File dfile = new File(temp);			if (dfile.exists()) &#123;				if (dfile.delete()) &#123;					mainFrame.display(&quot;æ–‡ä»¶åˆ é™¤æˆåŠŸ!&quot;);				&#125; else &#123;					mainFrame.display(&quot;æ–‡ä»¶åˆ é™¤æ“ä½œå‡ºé”™!&quot;);				&#125;			&#125; else &#123;				mainFrame.display(&quot;æ–‡ä»¶ä¸å­˜åœ¨&quot;);			&#125;		&#125;	&#125;	/*	 * è¿›è¡Œexitæ“ä½œ; åŠŸèƒ½:é€€å‡ºæ–‡ä»¶ç³»ç»Ÿ;	 */	public void exit() &#123;		mainFrame.display(&quot;é€€å‡ºç³»ç»Ÿ&quot;);		System.exit(1);	&#125;		/*	 * æ–°å»ºæ–‡ä»¶ï¼Œä½¿ç”¨ç»å¯¹è·¯å¾„	 */	public void mkpath(String file)&#123;				if (!currentPath.equals(&quot;&quot;)) &#123;			String temp = file;			File newFile = new File(temp);			if (newFile.exists()) &#123;				mainFrame.display(&quot;æ–‡ä»¶å·²ç»å­˜åœ¨!&quot;);			&#125; else &#123;				try &#123;					newFile.createNewFile();					mainFrame.display(&quot;æ–‡ä»¶åˆ›å»ºæˆåŠŸ!&quot;);				&#125; catch (Exception e) &#123;					mainFrame.display(&quot;æ–‡ä»¶åˆ›å»ºå¤±è´¥:&quot; + e.getMessage());				&#125;			&#125;		&#125;	&#125;		/*	 * ä½¿ç”¨ç³»ç»Ÿé»˜è®¤è½¯ä»¶æ‰“å¼€æŒ‡å®šæ–‡ä»¶	 */	public void open(String file)&#123;				if (!currentPath.equals(&quot;&quot;)) &#123;			String temp = currentPath + &quot;\\&quot; + file;			File newFile = new File(temp);			if (newFile.exists()) &#123;				try &#123;					Desktop.getDesktop().open(newFile);				&#125; catch (Exception e) &#123;					e.printStackTrace();				&#125;				mainFrame.display(&quot;æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼&quot;);			&#125; else &#123;				mainFrame.display(&quot;æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ— æ³•æ‰“å¼€&quot;);			&#125;		&#125;	&#125;&#125;

å°ç»“æ€ä¹ˆè¿™ä¹ˆç®€å•ï¼Ÿæ²¡é”™ï¼Œä»£ç æ˜¯å¾ˆç®€å•ï¼Œä½†æ˜¯ï¼Œæƒ³åˆ°è¿™ä¸ªæ€è·¯ä¸å®¹æ˜“ï¼Œå†æ¬¡æ„Ÿè°¢cattongå‰è¾ˆã€‚
æºä»£ç åˆ†äº«http://yunpan.cn/cjqdEABf3dxkj  è®¿é—®å¯†ç  7159http://yunpan.cn/cjqdWLKJk4TQL  è®¿é—®å¯†ç  63de
å‚è€ƒæ–‡æ¡£http://www.oschina.net/project/tag/193?lang=19&amp;show=hotshttp://blog.csdn.net/cattong/article/details/1844916
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>XMPPå­¦ä¹ ç¬”è®°â€”â€”è°ƒè¯•æ§åˆ¶å°</title>
    <url>/dev-xmpp-note-debug-console/</url>
    <content><![CDATA[å‰è¨€å¼€å‘äººå‘˜æ€»æ˜¯å–œæ¬¢ä¸æ–­åœ°åŠ å·¥å¹¶å®Œå–„è‡ªå·±çš„å·¥å…·ï¼Œåœ¨å¼€å‘XMPPåº”ç”¨ç¨‹åºçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†éœ€è¦ä¸€æ¬¾å·¥å…·æ¥è¾…åŠ©ç ”ç©¶å’ŒæŸ¥çœ‹åè®®æµé‡ã€‚è¦æ˜¯ä¸ä½¿ç”¨æŸ¥çœ‹æºä»£ç å‘½ä»¤ï¼Œæˆ–è€…ä¸èƒ½è½»æ˜“åŠ å·¥URLæ¥æµ‹è¯•è¿œç¨‹ç«™ç‚¹çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆå¾ˆå°‘æœ‰Webå¼€å‘äººå‘˜èƒ½å¤Ÿè½»æ¾å·¥ä½œã€‚
å¯¹äºXMPPèŠ‚ï¼Œè¿™æ ·çš„å·¥å…·å¯ç”¨æ¥æŸ¥çœ‹åè®®æµé‡å¹¶è½»æ˜“åœ°åˆ›å»ºè¦å‘é€çš„èŠ‚ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°±æ¥åšä¸€ä¸ªè¿™æ ·çš„å·¥å…·ã€‚
Peekå¯ç”¨æ¥å¸®åŠ©æˆ‘ä»¬ç ”ç©¶XMPPæ‰©å±•å¦‚ä½•è¿è½¬ä»¥åŠä¸ºä½•æœ‰äº›æ‰©å±•å¹¶ä¸èƒ½æŒ‰ç…§é¢„æœŸæ‰§è¡Œæ“ä½œã€‚æˆ‘ä»¬å¯ä»¥ä»åº”ç”¨ç¨‹åºä¸­å‰ªåˆ‡å¹¶ç²˜è´´XMPPèŠ‚æ„å»ºä»£ç ï¼Œçœ‹çœ‹æœåŠ¡å™¨å“åº”ç©¶ç«Ÿæ˜¯ä»€ä¹ˆã€‚å¦‚æœä¸ç†Ÿæ‚‰ç‰¹å®šçš„åè®®æ‰©å±•ï¼Œé‚£ä¹ˆå¯ä»¥è¾“å…¥å®ä¾‹ï¼Œçœ‹çœ‹æœåŠ¡å™¨å¦‚ä½•å“åº”ä¸åŒçš„è¾“å…¥ã€‚


æ“ä½œæ­¥éª¤å…¶å®è¿™ä¸ªç¨‹åºå’Œä¹‹å‰çš„Helloå¾ˆåƒï¼Œæ­¥éª¤ç±»ä¼¼ã€‚
peek.htmlæ–°å»ºpeek.htmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;!DOCTYPE HTML&gt;&lt;html&gt;  &lt;head&gt;    &lt;meta http-equiv=&quot;Content-type&quot; content=&quot;text/html;charset=UTF-8&quot;&gt;    &lt;title&gt;Peek&lt;/title&gt;    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;./style/jquery-ui.css&quot; &gt;	&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;./style/jquery-ui.theme.css&quot; &gt;		&lt;script type=&quot;text/javascript&quot; src=&quot;./js/jquery.js&quot;&gt;&lt;/script&gt;	&lt;script type=&quot;text/javascript&quot; src=&quot;./js/jquery-ui.js&quot;&gt;&lt;/script&gt;	    &lt;script type=&quot;text/javascript&quot; src=&quot;./js/strophe.js&quot;&gt;&lt;/script&gt;       &lt;script type=&quot;text/javascript&quot; src=&#x27;./js/strophe.flxhr.js&#x27;&gt;&lt;/script&gt;	&lt;script type=&quot;text/javascript&quot; src=&#x27;./js/flXHR.js&#x27;&gt;&lt;/script&gt;    &lt;link rel=&#x27;stylesheet&#x27; type=&#x27;text/css&#x27; href=&#x27;./style/peek.css&#x27;&gt;    &lt;script src=&#x27;./js/peek.js&#x27;&gt;&lt;/script&gt;  &lt;/head&gt;  &lt;body&gt;    &lt;h1&gt;Peek&lt;/h1&gt;    &lt;div id=&#x27;console&#x27;&gt;&lt;/div&gt;    &lt;textarea id=&#x27;input&#x27; class=&#x27;disabled&#x27;              disabled=&#x27;disabled&#x27;&gt;	&lt;/textarea&gt;    &lt;div id=&#x27;buttonbar&#x27;&gt;      &lt;input id=&#x27;send_button&#x27; type=&#x27;button&#x27; value=&#x27;Send Data&#x27;             disabled=&#x27;disabled&#x27; class=&#x27;button&#x27;&gt;      &lt;input id=&#x27;disconnect_button&#x27; type=&#x27;button&#x27; value=&#x27;Disconnect&#x27;             disabled=&#x27;disabled&#x27; class=&#x27;button&#x27;&gt;    &lt;/div&gt;    &lt;!-- login dialog --&gt;    &lt;div id=&#x27;login_dialog&#x27; class=&#x27;hidden&#x27;&gt;      &lt;label&gt;JID:&lt;/label&gt;&lt;input type=&#x27;text&#x27; id=&#x27;jid&#x27;&gt;      &lt;label&gt;Password:&lt;/label&gt;&lt;input type=&#x27;password&#x27; id=&#x27;password&#x27;&gt;    &lt;/div&gt;  &lt;/body&gt;&lt;/html&gt;

peek.cssæ–°å»ºpeek.cssï¼Œå†…å®¹å¦‚ä¸‹ï¼š
body &#123;    font-family: Helvetica;&#125;h1 &#123;    text-align: center;&#125;#console &#123;    padding: 10px;    height: 300px;    border: solid 1px #aaa;    background-color: #000;    color: #eee;    font-family: monospace;    overflow: auto;&#125;#input &#123;    width: 100%;    height: 100px;    font-family: monospace;&#125;.incoming &#123;    background-color: #111;&#125;textarea.disabled &#123;    background-color: #bbb;&#125;#buttonbar &#123;    margin: 10px;&#125;#disconnect_button &#123;    float: left;    width: 100px;&#125;#send_button &#123;    float: right;    width: 100px;&#125;/* xml styles */.xml_punc &#123; color: #888; &#125;.xml_tag &#123; color: #e77; &#125;.xml_aname &#123; color: #55d; &#125;.xml_avalue &#123; color: #77f; &#125;.xml_text &#123; color: #aaa &#125;.xml_level0 &#123; padding-left: 0; &#125;.xml_level1 &#123; padding-left: 1em; &#125;.xml_level2 &#123; padding-left: 2em; &#125;.xml_level3 &#123; padding-left: 3em; &#125;.xml_level4 &#123; padding-left: 4em; &#125;.xml_level5 &#123; padding-left: 5em; &#125;.xml_level6 &#123; padding-left: 6em; &#125;.xml_level7 &#123; padding-left: 7em; &#125;.xml_level8 &#123; padding-left: 8em; &#125;.xml_level9 &#123; padding-left: 9em; &#125;

peek.jsæ–°å»ºpeek.jsï¼Œå†…å®¹å¦‚ä¸‹ï¼š
var Peek = &#123;    connection: null,    show_traffic: function (body, type) &#123;        if (body.childNodes.length &gt; 0) &#123;            var console = $(&#x27;#console&#x27;).get(0);            var at_bottom = console.scrollTop &gt;= console.scrollHeight -                 console.clientHeight;;            $.each(body.childNodes, function () &#123;                $(&#x27;#console&#x27;).append(&quot;&lt;div class=&#x27;&quot; + type + &quot;&#x27;&gt;&quot; +                                      Peek.pretty_xml(this) +                                     &quot;&lt;/div&gt;&quot;);            &#125;);            if (at_bottom) &#123;                console.scrollTop = console.scrollHeight;            &#125;        &#125;    &#125;,    pretty_xml: function (xml, level) &#123;        var i, j;        var result = [];        if (!level) &#123;             level = 0;        &#125;        result.push(&quot;&lt;div class=&#x27;xml_level&quot; + level + &quot;&#x27;&gt;&quot;);        result.push(&quot;&lt;span class=&#x27;xml_punc&#x27;&gt;&amp;lt;&lt;/span&gt;&quot;);        result.push(&quot;&lt;span class=&#x27;xml_tag&#x27;&gt;&quot;);        result.push(xml.tagName);        result.push(&quot;&lt;/span&gt;&quot;);        // attributes        var attrs = xml.attributes;        var attr_lead = []        for (i = 0; i &lt; xml.tagName.length + 1; i++) &#123;            attr_lead.push(&quot;&amp;nbsp;&quot;);        &#125;        attr_lead = attr_lead.join(&quot;&quot;);        for (i = 0; i &lt; attrs.length; i++) &#123;            result.push(&quot; &lt;span class=&#x27;xml_aname&#x27;&gt;&quot;);            result.push(attrs[i].nodeName);            result.push(&quot;&lt;/span&gt;&lt;span class=&#x27;xml_punc&#x27;&gt;=&#x27;&lt;/span&gt;&quot;);            result.push(&quot;&lt;span class=&#x27;xml_avalue&#x27;&gt;&quot;);            result.push(attrs[i].nodeValue);            result.push(&quot;&lt;/span&gt;&lt;span class=&#x27;xml_punc&#x27;&gt;&#x27;&lt;/span&gt;&quot;);            if (i !== attrs.length - 1) &#123;                result.push(&quot;&lt;/div&gt;&lt;div class=&#x27;xml_level&quot; + level + &quot;&#x27;&gt;&quot;);                result.push(attr_lead);            &#125;        &#125;        if (xml.childNodes.length === 0) &#123;            result.push(&quot;&lt;span class=&#x27;xml_punc&#x27;&gt;/&amp;gt;&lt;/span&gt;&lt;/div&gt;&quot;);        &#125; else &#123;            result.push(&quot;&lt;span class=&#x27;xml_punc&#x27;&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&quot;);            // children            $.each(xml.childNodes, function () &#123;                if (this.nodeType === 1) &#123;                    result.push(Peek.pretty_xml(this, level + 1));                &#125; else if (this.nodeType === 3) &#123;                    result.push(&quot;&lt;div class=&#x27;xml_text xml_level&quot; +                                 (level + 1) + &quot;&#x27;&gt;&quot;);                    result.push(this.nodeValue);                    result.push(&quot;&lt;/div&gt;&quot;);                &#125;            &#125;);                        result.push(&quot;&lt;div class=&#x27;xml xml_level&quot; + level + &quot;&#x27;&gt;&quot;);            result.push(&quot;&lt;span class=&#x27;xml_punc&#x27;&gt;&amp;lt;/&lt;/span&gt;&quot;);            result.push(&quot;&lt;span class=&#x27;xml_tag&#x27;&gt;&quot;);            result.push(xml.tagName);            result.push(&quot;&lt;/span&gt;&quot;);            result.push(&quot;&lt;span class=&#x27;xml_punc&#x27;&gt;&amp;gt;&lt;/span&gt;&lt;/div&gt;&quot;);        &#125;                return result.join(&quot;&quot;);    &#125;,    text_to_xml: function (text) &#123;        var doc = null;        if (window[&#x27;DOMParser&#x27;]) &#123;            var parser = new DOMParser();            doc = parser.parseFromString(text, &#x27;text/xml&#x27;);        &#125; else if (window[&#x27;ActiveXObject&#x27;]) &#123;            var doc = new ActiveXObject(&quot;MSXML2.DOMDocument&quot;);            doc.async = false;            doc.loadXML(text);        &#125; else &#123;            throw &#123;                type: &#x27;PeekError&#x27;,                message: &#x27;No DOMParser object found.&#x27;            &#125;;        &#125;        var elem = doc.documentElement;        if ($(elem).filter(&#x27;parsererror&#x27;).length &gt; 0) &#123;            return null;        &#125;        return elem;    &#125;&#125;;$(document).ready(function () &#123;    $(&#x27;#login_dialog&#x27;).dialog(&#123;        autoOpen: true,        draggable: false,        modal: true,        title: &#x27;Connect to XMPP&#x27;,        buttons: &#123;            &quot;Connect&quot;: function () &#123;                $(document).trigger(&#x27;connect&#x27;, &#123;                    jid: $(&#x27;#jid&#x27;).val(),                    password: $(&#x27;#password&#x27;).val()                &#125;);                                $(&#x27;#password&#x27;).val(&#x27;&#x27;);                $(this).dialog(&#x27;close&#x27;);            &#125;        &#125;    &#125;);    $(&#x27;#disconnect_button&#x27;).click(function () &#123;        Peek.connection.disconnect();    &#125;);    $(&#x27;#send_button&#x27;).click(function () &#123;        var input = $(&#x27;#input&#x27;).val();        var error = false;        if (input.length &gt; 0) &#123;            if (input[0] === &#x27;&lt;&#x27;) &#123;                var xml = Peek.text_to_xml(input);                if (xml) &#123;                    Peek.connection.send(xml);                    $(&#x27;#input&#x27;).val(&#x27;&#x27;);                &#125; else &#123;                    error = true;                &#125;            &#125; else if (input[0] === &#x27;$&#x27;) &#123;                try &#123;                    var builder = eval(input);                    Peek.connection.send(builder);                    $(&#x27;#input&#x27;).val(&#x27;&#x27;);                &#125; catch (e) &#123;                    console.log(e);                    error = true;                &#125;            &#125; else &#123;                error = true;            &#125;        &#125;        if (error) &#123;            $(&#x27;#input&#x27;).animate(&#123;backgroundColor: &quot;#faa&quot;&#125;);        &#125;    &#125;);    $(&#x27;#input&#x27;).keypress(function () &#123;        $(this).css(&#123;backgroundColor: &#x27;#fff&#x27;&#125;);    &#125;);&#125;);$(document).bind(&#x27;connect&#x27;, function (ev, data) &#123;    var conn = new Strophe.Connection(        &quot;http://bosh.metajack.im:5280/xmpp-httpbind&quot;);    conn.xmlInput = function (body) &#123;        Peek.show_traffic(body, &#x27;incoming&#x27;);    &#125;;    conn.xmlOutput = function (body) &#123;        Peek.show_traffic(body, &#x27;outgoing&#x27;);    &#125;;    conn.connect(data.jid, data.password, function (status) &#123;        if (status === Strophe.Status.CONNECTED) &#123;            $(document).trigger(&#x27;connected&#x27;);        &#125; else if (status === Strophe.Status.DISCONNECTED) &#123;            $(document).trigger(&#x27;disconnected&#x27;);        &#125;    &#125;);    Peek.connection = conn;&#125;);$(document).bind(&#x27;connected&#x27;, function () &#123;    $(&#x27;.button&#x27;).removeAttr(&#x27;disabled&#x27;);    $(&#x27;#input&#x27;).removeClass(&#x27;disabled&#x27;).removeAttr(&#x27;disabled&#x27;);&#125;);$(document).bind(&#x27;disconnected&#x27;, function () &#123;    $(&#x27;.button&#x27;).attr(&#x27;disabled&#x27;, &#x27;disabled&#x27;);    $(&#x27;#input&#x27;).addClass(&#x27;disabled&#x27;).attr(&#x27;disabled&#x27;, &#x27;disabled&#x27;);&#125;);

è¾“å…¥æµ‹è¯•åŠè¿è¡Œç»“æœ
æ§åˆ¶å‡ºå¸­æ‰“å¼€Peekåº”ç”¨ç¨‹åºï¼Œç™»é™†åˆ°XMPPæœåŠ¡å™¨ï¼Œè¾“å…¥&lt;presence/&gt;ï¼Œç„¶åç‚¹å‡»SendæŒ‰é’®ã€‚
è®¾ç½®çŠ¶æ€ä¸ºå·²ç¦»å¼€$pres().c(&#x27;show&#x27;).t(&quot;away&quot;).up().c(&#x27;status&#x27;).t(&quot;reading&quot;);

æ¢æµ‹ç‰ˆæœ¬$iq(&#123;type:&quot;get&quot;,id:&quot;version&quot;,to:&quot;jabber.org&quot;&#125;).c(&quot;query&quot;,&#123;xmlns:&quot;jabber:iq:version&quot;&#125;);
æˆ–è€…
&lt;iq type=&#x27;get&#x27; id=&#x27;version1&#x27; to=&#x27;jabber.org&#x27;&gt;&lt;query xmlns=&#x27;jabber:iq:version&#x27;/&gt;&lt;/iq&gt;

æ²¡æœ‰ååº”ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆã€‚
iqèŠ‚é”™è¯¯$iq(&#123;type:&quot;get&quot;,id:&quot;version2&quot;,to:&quot;gmail.com&quot;&#125;).c(&quot;query&quot;,&#123;xmlns:&quot;jabber:iq:version&quot;&#125;);

&lt;iq type=&#x27;get&#x27; id=&#x27;info1&#x27; to=&#x27;bad-room-123@conference.jabber.org&#x27;&gt;	&lt;query xmlns=&#x27;http://jabber.org/protocol/disco#info&#x27; /&gt;&lt;/iq&gt;

messageèŠ‚é”™è¯¯$msg(&#123;to:&#x27;voidking@voidking.lit&#x27;,type:&#x27;chat&#x27;&#125;).c(&#x27;body&#x27;).t(&#x27;What think you of books ?&#x27;);

presenceèŠ‚é”™è¯¯ä¸çŸ¥é“æ€ä¹ˆå‘é€presenceèŠ‚é”™è¯¯ä¿¡æ¯ï¼Œçœç•¥å…ˆã€‚
ç»“æŸè¯­è¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯æ‘˜è‡ªã€ŠXMPPé«˜çº§ç¼–ç¨‹ã€‹ï¼Œvoidä¹Ÿä¸è¯¦ç»†è§£é‡Šä»£ç äº†ï¼Œçœ‹ä¸æ‡‚çš„åœ°æ–¹ï¼Œè¯·å°ä¼™ä¼´å‚è€ƒè¿™æœ¬ä¹¦ã€‚
å‚è€ƒæ–‡æ¡£ã€ŠXMPPé«˜çº§ç¼–ç¨‹ï¼ˆä½œè€…Jack Moffittï¼‰ã€‹ã€ŠXMPP The Definitive Guideï¼ˆä½œè€…Peter Saint-Andre, Kevin Smith, and Remko Tron?onï¼‰ã€‹å‰è¾ˆä»¬çš„æŠ€æœ¯åšå®¢â€¦â€¦
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>jquery</tag>
        <tag>xmpp</tag>
      </tags>
  </entry>
  <entry>
    <title>XMPPå­¦ä¹ ç¬”è®°â€”â€”Hello</title>
    <url>/dev-xmpp-note-hello/</url>
    <content><![CDATA[å‰è¨€é¦–å…ˆå£°æ˜ï¼Œæˆ‘ä»¬å°†è¦å†™çš„è¿™ä¸ªå°ç¨‹åºï¼Œæ˜¯å±äºXMPPå®¢æˆ·ç«¯çš„ã€‚ä»¥åè¦å†™çš„ç¨‹åºï¼Œä¹Ÿéƒ½æ˜¯XMPPå®¢æˆ·ç«¯çš„ã€‚
é©¬ä¸Šå¼€å§‹ç¬¬ä¸€ä¸ªXMPPç¨‹åºäº†ï¼ŒçœŸæœ‰ç‚¹å°æ¿€åŠ¨å‘¢ï¼æ¥ä¸‹æ¥ï¼Œå„ä½åŒå­¦å’Œvoidä¸€èµ·è¯•è¯•æ‰‹å§ï¼
å‡†å¤‡ç¼–ç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡å¥½ç¯å¢ƒå’Œä¾èµ–çš„å·¥å…·ã€‚
è¿™ä¸ªç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦TomcatæœåŠ¡å™¨ã€jquery.jsã€jquery-ui.jsã€jquery-ui.cssã€jquery-ui.theme.cssã€strophe.jsã€strophe.flxhr.jsã€flXHR.jsä»¥åŠä¾èµ–çš„æ–‡ä»¶ã€‚å“¦ï¼Œè¿˜æœ‰ä¸€ä¸ªXMPPè´¦å·ã€‚
ä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹ç¯å¢ƒçš„å‡†å¤‡å’Œä¾èµ–å·¥å…·çš„ä¸‹è½½ï¼Œæœ€åæä¾›æ‰“åŒ…å¥½çš„å·¥å…·ã€‚

æœ¬åœ°æœåŠ¡å™¨å› ä¸ºHelloç¨‹åºæ˜¯ä¸€ä¸ªä»…ç”±HTMLã€CSSå’ŒJavaScriptä»£ç ç»„æˆçš„Webåº”ç”¨ç¨‹åºï¼Œæ‰€ä»¥è¿è¡Œå’Œæµ‹è¯•å®ƒæ˜¯éå¸¸ç®€å•çš„ã€‚
å°½ç®¡flXHRåº“å¯ç”¨æ¥æ‰§è¡Œè·¨åŸŸè¯·æ±‚è€Œæ— éœ€ä»»ä½•æœåŠ¡å™¨è®¾ç½®ï¼Œä½†å®ƒå¹¶ä¸å…è®¸æˆ‘ä»¬åœ¨file://è¿™æ ·çš„URLä¸‹é¢è¿è¡Œï¼Œå´è¯·æ±‚http://URL çš„åº”ç”¨ç¨‹åºã€‚è¿™æ„å‘³ç€æˆ‘ä»¬è¦ä½¿ç”¨WebæœåŠ¡å™¨é€šè¿‡HTTPæ¥è®¿é—®Helloç¨‹åºã€‚
è¿™é‡Œï¼Œvoidä½¿ç”¨çš„æ˜¯tomcatï¼Œä»»ä½•å…¶ä»–WebæœåŠ¡å™¨ä¹Ÿå¯ä»¥èƒœä»»ã€‚æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥å°†ä»£ç ä¸Šä¼ åˆ°ä½ çš„å…¬ç½‘æœåŠ¡å™¨ã€‚
jQueryjQueryåº“ä½¿å¾—HTMLå’ŒCSSçš„å¤„ç†å˜å¾—å¼‚å¸¸ç®€å•ï¼Œå®ƒåœ¨XMLï¼ˆXMPPèŠ‚ï¼‰çš„æ“ä½œæ–¹é¢ä¹Ÿéå¸¸æ–¹ä¾¿ã€‚
æœ€æ–°ç‰ˆæœ¬è¯·åˆ°jQueryå®˜ç½‘ä¸‹è½½ã€‚
jQuery UIjQuery UIåº“æä¾›äº†æˆ‘ä»¬æ‰€éœ€è¦çš„ä¸€äº›å¸¸è§çš„ç”¨æˆ·ç•Œé¢æ„é€ å—ï¼ŒåŒ…æ‹¬å¯¹è¯æ¡†å’Œæ ‡ç­¾é¡µã€‚
æœ€æ–°ç‰ˆæœ¬è¯·åˆ°jQuery UIå®˜ç½‘ä¸‹è½½ã€‚
PSï¼šæœ€æ–°çš„jquery.jså’Œæœ€æ–°çš„jquery-ui.jså¯èƒ½ä¼šæœ‰å…¼å®¹æ€§é—®é¢˜ï¼Œä¿é™©èµ·è§ï¼Œæœ€å¥½ä½¿ç”¨jQuery UIå®˜ç½‘æä¾›çš„jquery.jsã€‚
StropheStropheåº“ä½¿å¾—ç¼–å†™XMPPå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºå˜å¾—æå…¶ç®€å•ï¼Œè€Œä¸”å®ƒå·²æœ‰å¤šç§ç¼–ç¨‹è¯­è¨€ç‰ˆæœ¬ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Javascriptç‰ˆæœ¬ã€‚
æœ€æ–°ç‰ˆæœ¬è¯·åˆ°Stropheå®˜ç½‘ä¸‹è½½ã€‚
flXHRStropheèƒ½å¤Ÿä½¿ç”¨flXHRï¼ˆæ ‡å‡† XMLHttpRequest APIçš„Flashæ›¿ä»£æŠ€æœ¯ï¼‰æ¥ç®€åŒ–JavascriptåŒæºç­–ç•¥çš„å¤„ç†ã€‚é€šå¸¸ï¼ŒJavascriptåº”ç”¨ç¨‹åºä¸èƒ½ä¸å¤–éƒ¨æœåŠ¡å™¨é€šä¿¡ï¼Œä½†å€ŸåŠ©Flashå’ŒflXHRï¼ŒStropheèƒ½å¤Ÿå…‹æœè¿™ä¸ªé™åˆ¶ã€‚
æœ€æ–°ç‰ˆæœ¬è¯·åˆ°flXHRå®˜ç½‘ä¸‹è½½ã€‚ä½†æ˜¯ï¼Œvoidç™»ä¸ä¸Šå»è¿™ä¸ªç½‘ç«™ï¼Œä¹Ÿpingä¸åˆ°å®ƒçš„æœåŠ¡å™¨ï¼Œä¸çŸ¥é“æ˜¯è¢«å±è”½äº†è¿˜æ˜¯ä¸‹çº¿äº†ã€‚
è¿™é‡Œæä¾›flXHRå¼€æºé¡¹ç›®ä¸‹è½½åœ°å€ï¼Œå¾ˆå¤è€ï¼Œä¸‰å¹´å‰çš„ï¼Œè«éè¿™ä¸ªé¡¹ç›®æœ‰äº†æ›´å¥½çš„æ›¿ä»£å“ï¼Ÿä¸å†æ›´æ–°äº†ï¼Ÿä¸ç®¡äº†ï¼Œæˆ‘ä»¬å…ˆç”¨ç€ã€‚ç»è¿‡æµ‹è¯•ï¼Œè¿™ä¸ªé¡¹ç›®è¿˜æ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚
å›½å†…githubçš„ä¸‹è½½é€Ÿåº¦çœŸçš„è®©äººç»æœ›ï¼Œå°¤å…¶ä¸‹è½½ç¨å¤§çš„é¡¹ç›®ï¼Œçœ‹ç€å‡ Kçš„ä¸‹è½½é€Ÿåº¦ï¼Œå“­çš„å¿ƒéƒ½æœ‰äº†ï¼šå¤§å“¥ï¼Œä½ æ˜¯è¦æˆ‘ç­‰åˆ°å¤©è’åœ°è€å—ï¼Ÿ
voidé€šè¿‡ç½‘ç›˜ç¦»çº¿ä¸‹è½½æˆåŠŸï¼Œéœ€è¦çš„åŒå­¦è‡ªå·±å–å§ï¼Œä¸‹è½½åœ°å€http://yunpan.cn/cAtFDZVWCJ6QX ï¼ˆæå–ç ï¼š1429ï¼‰ã€‚
flXHR.jsä¾èµ–çš„æ–‡ä»¶è¾ƒå¤šï¼Œè¿™ä¸ªç¨‹åºä¸­å…·ä½“ç”¨åˆ°çš„æœ‰flensed.jsã€checkplayer.jsã€flXHR.swfã€flXHR.vbsã€swfobject.jsã€updateplayer.swfã€‚
XMPPè´¦å·å‡è®¾ï¼Œqqå¼€æºï¼Œä½ è¦å†™ä¸€ä¸ªqqå®¢æˆ·ç«¯ï¼Œæƒ³è¦æµ‹è¯•èƒ½å¦è¿æ¥åˆ°qqçš„æœåŠ¡å™¨ï¼Œé¦–å…ˆè¦æœ‰ä¸ªqqå·å§ï¼Ÿä¸€ä¸ªé“ç†ï¼Œåšæµ‹è¯•ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆæœ‰ä¸€ä¸ªXMPPè´¦å·ã€‚
è™½ç„¶http://register.jabber.org å·²ç»ä¸‹çº¿ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°å¾ˆå¤šå…¶ä»–å…è´¹çš„å…¬å…±XMPPæœåŠ¡å™¨ï¼Œè¿™é‡Œç»™å‡ºä¸€ä¸ªåˆ—è¡¨https://xmpp.net/directory.php ã€‚
è¿™é‡Œç»å¤§éƒ¨åˆ†æœåŠ¡å™¨æ˜¯å›½å¤–çš„ï¼Œé€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œäºæ˜¯voidåœ¨è‡ªå·±çš„é˜¿é‡Œäº‘ä¸Šæ­å»ºäº†ä¸€ä¸ªopenfireæœåŠ¡å™¨ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æœ¬åœ°æ­å»ºæœåŠ¡å™¨ï¼Œç„¶åé€šè¿‡å±€åŸŸç½‘è®¿é—®ã€‚
æ‰¾åˆ°æˆ–è€…æ­å»ºå¥½XMPPæœåŠ¡å™¨ï¼Œç„¶åï¼Œä¸‹è½½å®‰è£…sparkï¼Œçœ‹çœ‹èƒ½å¦æ³¨å†Œå’Œç™»é™†ï¼Œæµ‹è¯•æ˜¯å¦å¯ç”¨ã€‚
è‡³æ­¤ï¼Œå‡è®¾æˆ‘ä»¬å·²ç»æ‹¥æœ‰äº†ä¸€ä¸ªXMPPè´¦å·ã€‚æ²¡æœ‰æå®šçš„å°ä¼™ä¼´è¯·ç•™è¨€ã€‚
å·¥å…·æ‰“åŒ…ä¸‹è½½ä¸Šé¢æåˆ°çš„å·¥å…·ï¼Œä»¥åŠHelloç¨‹åºçš„ä»£ç ï¼Œæ‰“åŒ…åˆ°360ç½‘ç›˜äº†ï¼Œéœ€è¦çš„å°ä¼™ä¼´è‡ªå–http://yunpan.cn/cAnXNmvewvGme  ï¼ˆæå–ç  baafï¼‰
å…·ä½“æ­¥éª¤è¿™ä¸ªç¨‹åºçš„åŠŸèƒ½æ˜¯ï¼šå‘XMPPæœåŠ¡å™¨å‘é€ä¸€æ¡ä¿¡æ¯å¹¶å°†å“åº”æ˜¾ç¤ºå‡ºæ¥ã€‚ä¸‹é¢æˆ‘ä»¬æ¥ä¸€æ­¥ä¸€æ­¥å®Œæˆå®ƒï¼
ç›®å½•ç»“æ„æ¥ä¸‹æ¥çš„æ–‡ä»¶æ”¾ç½®ä½ç½®ï¼Œè¯·ä¸‹è½½â€œå·¥å…·æ‰“åŒ…ä¸‹è½½â€ä¸€èŠ‚çš„å‹ç¼©æ–‡ä»¶ï¼Œç”¨ä½œå‚è€ƒã€‚æ–‡ä»¶ä½ç½®ä¸å¯¹çš„è¯ï¼Œéœ€è¦ä¿®æ”¹ä»£ç ï¼Œç›¸ä¿¡ä½ ä»¬éƒ½æ‡‚å¾—ã€‚
hello.htmlæ–°å»ºæ–‡ä»¶hello.htmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;!DOCTYPE HTML&gt;&lt;html&gt;  &lt;head&gt;    &lt;title&gt;Hello&lt;/title&gt;        &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;./style/jquery-ui.css&quot; &gt;	&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;./style/jquery-ui.theme.css&quot; &gt;		&lt;script type=&quot;text/javascript&quot; src=&quot;./js/jquery.js&quot;&gt;&lt;/script&gt;	&lt;script type=&quot;text/javascript&quot; src=&quot;./js/jquery-ui.js&quot;&gt;&lt;/script&gt;	    &lt;script type=&quot;text/javascript&quot; src=&quot;./js/strophe.js&quot;&gt;&lt;/script&gt;       &lt;script type=&quot;text/javascript&quot; src=&#x27;./js/strophe.flxhr.js&#x27;&gt;&lt;/script&gt;	&lt;script type=&quot;text/javascript&quot; src=&#x27;./js/flXHR.js&#x27;&gt;&lt;/script&gt;    &lt;link rel=&#x27;stylesheet&#x27; type=&quot;text/css&quot; href=&#x27;./style/hello.css&#x27;&gt;    &lt;script type=&quot;text/javascript&quot; src=&#x27;./js/hello.js&#x27;&gt;&lt;/script&gt;  &lt;/head&gt;  &lt;body&gt;    &lt;h1&gt;Hello&lt;/h1&gt;    &lt;div id=&#x27;log&#x27;&gt;    &lt;/div&gt;    &lt;!-- login dialog --&gt;    &lt;div id=&#x27;login_dialog&#x27; class=&#x27;hidden&#x27;&gt;      &lt;label&gt;JID:&lt;/label&gt;&lt;input type=&#x27;text&#x27; id=&#x27;jid&#x27;&gt;      &lt;label&gt;Password:&lt;/label&gt;&lt;input type=&#x27;password&#x27; id=&#x27;password&#x27;&gt;    &lt;/div&gt;  &lt;/body&gt;&lt;/html&gt;

hello.cssæ–°å»ºhello.cssæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
body &#123;    font-family: Helvetica;&#125;h1 &#123;    text-align: center;&#125;.hidden &#123;    display: none;&#125;#log &#123;    padding: 10px;&#125;

hello.jsæ–°å»ºhello.jsæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
var Hello = &#123;    connection: null,    start_time: null,    log: function (msg) &#123;        $(&#x27;#log&#x27;).append(&quot;&lt;p&gt;&quot; + msg + &quot;&lt;/p&gt;&quot;);    &#125;,    send_ping: function (to) &#123;        var ping = $iq(&#123;            to: to,            type: &quot;get&quot;,            id: &quot;ping1&quot;&#125;).c(&quot;ping&quot;, &#123;xmlns: &quot;urn:xmpp:ping&quot;&#125;);        Hello.log(&quot;Sending ping to &quot; + to + &quot;.&quot;);        Hello.start_time = (new Date()).getTime();        Hello.connection.send(ping);    &#125;,    handle_pong: function (iq) &#123;        var elapsed = (new Date()).getTime() - Hello.start_time;        Hello.log(&quot;Received pong from server in &quot; + elapsed + &quot;ms.&quot;);        Hello.connection.disconnect();                return false;    &#125;&#125;;$(document).ready(function () &#123;    $(&#x27;#login_dialog&#x27;).dialog(&#123;        autoOpen: true,        draggable: false,        modal: true,        title: &#x27;Connect to XMPP&#x27;,        buttons: &#123;            &quot;Connect&quot;: function () &#123;                $(document).trigger(&#x27;connect&#x27;, &#123;                    jid: $(&#x27;#jid&#x27;).val(),                    password: $(&#x27;#password&#x27;).val()                &#125;);                                $(&#x27;#password&#x27;).val(&#x27;&#x27;);                $(this).dialog(&#x27;close&#x27;);            &#125;        &#125;    &#125;);&#125;);$(document).bind(&#x27;connect&#x27;, function (ev, data) &#123;    var conn = new Strophe.Connection(        &quot;http://bosh.metajack.im:5280/xmpp-httpbind&quot;);    conn.connect(data.jid, data.password, function (status) &#123;        if (status === Strophe.Status.CONNECTED) &#123;            $(document).trigger(&#x27;connected&#x27;);        &#125; else if (status === Strophe.Status.DISCONNECTED) &#123;            $(document).trigger(&#x27;disconnected&#x27;);        &#125;    &#125;);    Hello.connection = conn;&#125;);$(document).bind(&#x27;connected&#x27;, function () &#123;    // inform the user    Hello.log(&quot;Connection established.&quot;);    Hello.connection.addHandler(Hello.handle_pong, null, &quot;iq&quot;, null, &quot;ping1&quot;);    var domain = Strophe.getDomainFromJid(Hello.connection.jid);        Hello.send_ping(domain);&#125;);$(document).bind(&#x27;disconnected&#x27;, function () &#123;    Hello.log(&quot;Connection terminated.&quot;);    // remove dead connection object    Hello.connection = null;&#125;);
ä¸Šé¢Javascriptçš„ä»£ç ç”±ä¸‰ä¸ªåŸºæœ¬éƒ¨åˆ†ç»„æˆã€‚é¦–å…ˆæ˜¯åº”ç”¨ç¨‹åºçš„å‘½åç©ºé—´å¯¹è±¡ï¼Œåº”ç”¨ç¨‹åºçš„çŠ¶æ€å’Œå‡½æ•°éƒ½åœ¨æ­¤å®šä¹‰ã€‚ä½äºå‘½åç©ºé—´å¯¹è±¡ä¹‹åçš„æ˜¯æ–‡æ¡£å‡†å¤‡å°±ç»ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œä¸€æ—¦æµè§ˆå™¨å‡†å¤‡å°±ç»ªå®ƒå°±ä¼šåˆå§‹åŒ–åº”ç”¨ç¨‹åºã€‚æœ€åæ˜¯è‡ªå®šä¹‰äº‹ä»¶å¤„ç†ç¨‹åºï¼Œå®ƒè´Ÿè´£å¤„ç†é‚£äº›ä¸æ˜¯ç”±å…ƒç´ æˆ–ç”¨æˆ·äº¤äº’è§¦å‘çš„ç¨‹åºã€‚
å‘½åç©ºé—´å¯¹è±¡æˆ‘ä»¬ä½¿ç”¨å‘½åç©ºé—´å¯¹è±¡ï¼Œå°½å¯èƒ½é¿å…ä½¿ç”¨å…¨å±€å˜é‡ï¼Œè¿™æ ·å¯ä»¥å°†é—®é¢˜é™åˆ°æœ€å°‘ã€‚ä¸Šé¢ä»£ç ä¸­çš„Helloå¯¹è±¡å°±æ˜¯ä¸€ä¸ªä¾‹å­ã€‚
æ–‡æ¡£å°±ç»ªäº‹ä»¶å¤„ç†ç¨‹åºä¸€æ—¦DOMå¯ä¾›JavaScriptä»£ç ä½¿ç”¨ï¼Œå°±ä¼šç«‹å³å¼•å‘æ–‡æ¡£å‡†å¤‡å°±ç»ªäº‹ä»¶ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œæœ€å¥½å°†åˆå§‹åŒ–ä»£ç æ”¾åœ¨è¿™é‡Œã€‚
è‡ªå®šä¹‰äº‹ä»¶å¤„ç†ç¨‹åºjQueryåº“æ˜¯çš„åˆ›å»ºå’Œä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶å˜å¾—éå¸¸å®¹æ˜“ï¼Œè¿™äº›è‡ªå®šä¹‰äº‹ä»¶é€šå¸¸ç”¨æ¥æé«˜ä»£ç çš„å¯è¯»æ€§å¹¶å‡å°‘ç»„ä»¶ä¹‹é—´çš„è€¦åˆåº¦ã€‚
å‘å¸ƒä¸Šé¢ä¸‰ä¸ªæ–‡ä»¶ï¼Œè¯¦è§£è¯·è¯»ä¹¦ã€ŠXMPPé«˜çº§ç¼–ç¨‹ã€‹ï¼ˆæå–ç  20fbï¼‰ï¼Œå†…å®¹å¤ªå¤šï¼Œä¸ç å­—äº†ã€‚
å®Œæˆä¹‹åï¼ŒæŠŠæ•´ä¸ªå·¥ç¨‹æ–‡ä»¶å¤¹æ‹·è´åˆ°tomcatçš„webappæ–‡ä»¶å¤¹ä¸‹ã€‚ç„¶åï¼Œå¯åŠ¨tomcatï¼Œå°±å¯ä»¥è®¿é—®äº†ã€‚
æœ€ç»ˆæ•ˆæœ
ç»“æŸè¯­å¦‚æœæœ€ç»ˆæ•ˆæœæ˜¯ä½ æœŸæœ›çš„ï¼Œæ­å–œä½ ï¼Œè‡³å°‘ä½ å·²ç»çŸ¥å…¶ç„¶äº†ï¼
å‚è€ƒæ–‡æ¡£ã€ŠXMPPé«˜çº§ç¼–ç¨‹ï¼ˆä½œè€…Jack Moffittï¼‰ã€‹ã€ŠXMPP The Definitive Guideï¼ˆä½œè€…Peter Saint-Andre, Kevin Smith, and Remko Tron?onï¼‰ã€‹å‰è¾ˆä»¬çš„æŠ€æœ¯åšå®¢â€¦â€¦
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>jquery</tag>
        <tag>xmpp</tag>
      </tags>
  </entry>
  <entry>
    <title>XMPPå­¦ä¹ ç¬”è®°â€”â€”æ¦‚è¿°ç¯‡</title>
    <url>/dev-xmpp-note-start/</url>
    <content><![CDATA[XMPPæ˜¯ä»€ä¹ˆï¼ŸXMPPï¼Œå¯æ‰©å±•æ¶ˆæ¯å’Œå‡ºå¸­ï¼ˆå­˜åœ¨ï¼‰åè®®ï¼ˆeXtensible Messageing and Presence Protocolï¼‰ã€‚é¡¾åæ€ä¹‰ï¼Œè¿™æ˜¯ä¸€ä¸ªå…³äºæ”¶å‘æ¶ˆæ¯çš„è§„èŒƒã€‚
æœ€åˆç ”å‘IMPPï¼ˆå³æ—¶ä¿¡æ¯å’Œå‡ºå¸­åè®®ï¼ŒInstant Messaging and Presence Protocolï¼‰æ˜¯ä¸ºäº†åˆ›å»ºä¸€ç§æ ‡å‡†åŒ–çš„åè®®ï¼Œä½†æ˜¯ä»Šå¤©ï¼ŒIMPPå·²ç»å‘å±•æˆä¸ºåŸºæœ¬åè®®å•å…ƒï¼Œå®šä¹‰æ‰€æœ‰å³æ—¶é€šä¿¡åè®®åº”è¯¥æ”¯æŒçš„æ ¸å¿ƒåŠŸèƒ½é›†ã€‚
XMPPå’ŒSIMPLEï¼ˆé’ˆå¯¹å³æ—¶ä¿¡æ¯å’Œå‡ºå¸­æ‰©å±•çš„ä¼šè¯å‘èµ·åè®®ï¼ŒSession Initiation Protocol for Instant Messaging and Presence Leveraging Extensionsï¼‰ä¸¤ç§åè®®æ˜¯æ¶æ„ï¼Œæœ‰åŠ©äºå®ç°IMPPåè®®æ‰€æè¿°çš„è§„èŒƒã€‚
PRIMï¼ˆå‡ºå¸­å’Œå³æ—¶ä¿¡æ¯åè®®ï¼ŒPresence and Instant Messaging Protocolï¼‰æœ€åˆæ˜¯åŸºäºå³æ—¶é€šä¿¡çš„åè®®ï¼Œä¸XMPP å’ŒSIMPLE ç±»ä¼¼ï¼Œä½†æ˜¯å·²ç»ä¸å†ä½¿ç”¨ã€‚

XMPPç®€å²1996å¹´ä¹‹åï¼ŒMirabilisã€AOLã€Yahooã€å¾®è½¯ç­‰äº’è”ç½‘å…¬å¸é™†ç»­æ¨å‡ºäº†ä¸ªäººé€šä¿¡äº§å“ã€‚ä½†æ˜¯ï¼Œè¿™äº›äº§å“å„è‡ªç»‘å®šåˆ°å„è‡ªä¸“ç”¨çš„åè®®å’Œç½‘ç»œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒICQçš„ç”¨æˆ·ä¸èƒ½å’ŒMSNçš„ç”¨æˆ·äº¤è°ˆã€‚
å¾ˆå¤šå¼€å‘äººå‘˜å¸Œæœ›æ•´åˆå®¢æˆ·ç«¯ï¼Œä½†æ˜¯å±¡å±¡å—æŒ«ã€‚å¼€æ”¾çš„ã€å»ä¸­å¿ƒåŒ–çš„IMç½‘ç»œå’Œåè®®æ€æƒ³åœ¨è¿™ä¸ªæ—¶å€™å°±è¯ç”Ÿäº†ï¼Œç»è¿‡å‘å±•ï¼Œåæ¥ä¾¿æœ‰äº†XMPPã€‚
XMPPç½‘ç»œä»»ä½•XMPPç½‘ç»œéƒ½æ˜¯ç”±è‹¥å¹²è§’è‰²ç»„æˆçš„ï¼Œè¿™äº›è§’è‰²å¯ä»¥åˆ†ä¸ºæœåŠ¡å™¨ã€å®¢æˆ·ç«¯ã€ç»„ä»¶å’ŒæœåŠ¡å™¨æ’ä»¶ã€‚
æœåŠ¡å™¨XMPPæœåŠ¡å™¨æ˜¯XMPPç½‘ç»œçš„äº¤é€šç³»ç»Ÿï¼Œå®ƒçš„ä»»åŠ¡å°±æ˜¯ä¸ºXMPPèŠ‚æä¾›è·¯ç”±ã€‚
å¸¸è§çš„XMPPæœåŠ¡å™¨æœ‰Openfireã€Ejabberdã€Tigaseã€M-Linkã€Jabber-XCPç­‰ã€‚
å®¢æˆ·ç«¯å¤§å¤šæ•°çš„XMPPå®ä½“æ˜¯å®¢æˆ·ç«¯ï¼Œå®ƒä»¬é€šè¿‡å®¢æˆ·ç«¯-æœåŠ¡å™¨åè®®è¿æ¥åˆ°XMPPæœåŠ¡å™¨ã€‚
ç»„ä»¶å¹¶ä¸åªæ˜¯å®¢æˆ·ç«¯èƒ½è¿æ¥åˆ°XMPPæœåŠ¡å™¨ï¼Œå¤§å¤šæ•°æœåŠ¡å™¨è¿˜æ”¯æŒå¤–éƒ¨æœåŠ¡å™¨ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶é€šè¿‡æ·»åŠ æŸç§æ–°æœåŠ¡æ¥å¢å¼ºæœåŠ¡å™¨çš„è¡Œä¸ºã€‚åœ¨å¤–ç•Œçœ‹æ¥ï¼Œç»„ä»¶å°±åƒä¸€ä¸ªå­æœåŠ¡å™¨ã€‚

æ’ä»¶è®¸å¤šXMPPæœåŠ¡å™¨æ”¯æŒæ’ä»¶æ‰©å±•ï¼Œè¿™äº›æ’ä»¶é€šå¸¸ä½¿ç”¨ä¸æœåŠ¡å™¨è‡ªèº«ç›¸åŒçš„è¯­è¨€ç¼–å†™ï¼Œå¹¶åœ¨æœåŠ¡å™¨çš„è¿›ç¨‹å†…è¿è¡Œã€‚ä»–ä»¬çš„ä½œç”¨å¾ˆå¤§ç¨‹åº¦ä¸Šä¸å¤–éƒ¨ç»„ä»¶é‡å ï¼Œä½†æ’ä»¶è¿˜èƒ½å¤Ÿè®¿é—®å†…éƒ¨æœåŠ¡å™¨æ•°æ®ç»“æ„å¹¶æ”¹å˜æ ¸å¿ƒæœåŠ¡å™¨è¡Œä¸ºã€‚
XMPPå¯»å€XMPPç½‘ç»œä¸Šæ¯ä¸ªå®ä½“éƒ½æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªåœ°å€ï¼ˆJIDï¼Œjabber identifierï¼‰ã€‚JIDæœ‰å¤šç§ä¸åŒå½¢å¼ï¼Œä½†å®ƒä»¬é€šå¸¸çœ‹ä¸Šå»å°±åƒæ˜¯ç”µå­é‚®ä»¶ã€‚
JIDæœ‰ä¸¤ç§ç±»å‹ï¼Œè£¸JIDå’Œå®Œæ•´JIDï¼Œè€Œè£¸JIDæ˜¯å®Œæ•´JIDå»é™¤èµ„æºéƒ¨åˆ†åçš„åœ°å€ã€‚ä¾‹å¦‚ï¼ŒæŸä¸ªå®¢æˆ·ç«¯çš„å®Œæ•´JIDæ˜¯&#x76;&#x6f;&#x69;&#100;&#x6b;&#x69;&#x6e;&#x67;&#x40;&#x76;&#x6f;&#105;&#100;&#x6b;&#x69;&#110;&#103;&#x2e;&#108;&#x69;&#x74;/libraryï¼Œé‚£ä¹ˆå®ƒçš„è£¸JIDå°±æ˜¯&#118;&#x6f;&#x69;&#100;&#x6b;&#105;&#x6e;&#x67;&#x40;&#x76;&#111;&#x69;&#x64;&#107;&#105;&#x6e;&#x67;&#x2e;&#108;&#105;&#116;ã€‚
èŠ‚åœ¨XMPPä¸­ï¼Œå„é¡¹å·¥ä½œéƒ½æ˜¯é€šè¿‡åœ¨ä¸€ä¸ªXMPPæµä¸Šå‘é€å’Œæ¥æ”¶XMPPèŠ‚æ¥å®Œæˆçš„ã€‚æ ¸å¿ƒXMPPå·¥å…·é›†ç”±ä¸‰ç§åŸºæœ¬èŠ‚ç»„æˆï¼Œè¿™ä¸‰ç§èŠ‚åˆ†åˆ«ä¸º&lt;presence&gt;ã€&lt;message&gt;ã€&lt;iq&gt;ã€‚
XMPPæµç”±ä¸¤ä»½XMLæ–‡æ¡£ç»„æˆï¼Œé€šä¿¡çš„æ¯ä¸ªæ–¹å‘å‡æœ‰ä¸€ä»½æ–‡æ¡£ã€‚è¿™ä»½æ–‡æ¡£æœ‰ä¸€ä¸ªæ ¹å…ƒç´ &lt;stream:stream&gt;ï¼Œè¿™ä¸ªæ ¹å…ƒç´ çš„å­å…ƒç´ ç”±å¯è·¯ç”±çš„èŠ‚ä»¥åŠä¸æµç›¸å…³çš„é¡¶çº§å­å…ƒç´ æ„æˆã€‚ä¸‹é¢ç»™å‡ºä¸€æ®µç®€çŸ­çš„XMPPä¼šè¯ï¼š
&lt;stream:stream&gt;	&lt;iq type=&#x27;get&#x27;&gt;		&lt;query xmlns=&#x27;jabber:iq:roster&#x27;/&gt;	&lt;/iq&gt;		&lt;presence/&gt;		&lt;message to=&#x27;voidking@voidking.lit&#x27; from=&#x27;haojin@gmail.com/ballroom&#x27; type=&#x27;chat&#x27;&gt;		&lt;body&gt;I cannot talk of books in a ball-room; my head is always full of something else.&lt;/body&gt;	&lt;/message&gt;		&lt;presence type=&#x27;unavailable&#x27;/&gt;&lt;/stream:stream&gt;
ç®€å•è§£é‡Šä¸‹ï¼šï¼ˆ1ï¼‰haojinç™»é™†åï¼Œå°†è‡ªå·±çš„ç¬¬ä¸€èŠ‚ï¼ˆä¸€ä¸ª&lt;iq&gt;å…ƒç´ ï¼‰å‘é€å‡ºå»ï¼Œè¿™ä¸ª&lt;iq&gt;å…ƒç´ è¯·æ±‚haojinçš„è”ç³»äººåˆ—è¡¨ã€‚ï¼ˆ2ï¼‰æ¥ä¸‹æ¥ï¼Œä»–ä½¿ç”¨&lt;presence&gt;èŠ‚é€šçŸ¥æœåŠ¡å™¨ä»–åœ¨çº¿å¹¶ä¸”å¯ä»¥è®¿é—®ã€‚ï¼ˆ3ï¼‰å½“haojinæ³¨æ„åˆ°voidkingä¹Ÿåœ¨çº¿æ—¶ï¼Œä»–å‘é€äº†ä¸€æ¡&lt;message&gt;èŠ‚ç»™voidkingã€‚ï¼ˆ4ï¼‰æœ€åï¼Œhaojinå‘é€äº†ä¸€ä¸ª&lt;presence&gt;èŠ‚å‘Šè¯‰æœåŠ¡å™¨è‡ªå·±ä¸å¯è®¿é—®å¹¶å…³é—­&lt;stream:stream&gt;å…ƒç´ ï¼Œç„¶åç»“æŸä¼šè¯ã€‚
é€šç”¨å±æ€§æ‰€æœ‰ä¸‰ç§èŠ‚éƒ½æ”¯æŒä¸€ç»„é€šç”¨çš„å±æ€§ï¼šï¼ˆ1ï¼‰fromï¼ˆ2ï¼‰toï¼ˆ3ï¼‰typeï¼ˆ4ï¼‰id
presenceèŠ‚&lt;presence&gt;èŠ‚æ§åˆ¶å¹¶æŠ¥å‘Šå®ä½“çš„å¯è®¿é—®æ€§ï¼Œâ€œåœ¨çº¿â€ã€â€œç¦»çº¿â€ã€â€œç¦»å¼€â€ã€â€œè¯·å‹¿æ‰“æ‰°â€ã€‚æ­¤å¤–ï¼Œè¿™ä¸ªèŠ‚è¿˜ç”¨æ¥å»ºç«‹å’Œç»ˆæ­¢å‘å…¶ä»–å®ä½“å‘å¸ƒå‡ºå¸­è®¢é˜…ã€‚
æ™®é€špresenceèŠ‚æ™®é€š&lt;presence&gt;èŠ‚ä¸å«typeå±æ€§ï¼Œæˆ–è€…typeå±æ€§å€¼ä¸ºunavailableæˆ–errorã€‚typeå±æ€§æ²¡æœ‰availableå€¼ï¼Œå› ä¸ºå¯ä»¥é€šè¿‡ç¼ºå°‘typeå±æ€§æ¥æŒ‡å‡ºè¿™ç§æƒ…å†µã€‚
ç”¨æˆ·é€šè¿‡å‘é€ä¸å¸¦toå±æ€§ï¼Œç›´æ¥å‘å¾€æœåŠ¡å™¨çš„&lt;presence&gt;èŠ‚æ¥æ“çºµè‡ªå·±çš„å‡ºå¸­çŠ¶æ€ã€‚
&lt;presence/&gt;&lt;presence type=&#x27;unavailable&#x27;/&gt;&lt;presence&gt;	&lt;show&gt;away&lt;/show&gt;	&lt;status&gt;at the ball&lt;/status&gt;&lt;presence/&gt;&lt;presence&gt;	&lt;status&gt;touring the countryside&lt;/status&gt;	&lt;priority&gt;10&lt;/priority&gt;&lt;/presence&gt;&lt;presence&gt;	&lt;priority&gt;10&lt;/priority&gt;&lt;/presence&gt;
ç®€å•è§£é‡Šï¼šï¼ˆ1ï¼‰&lt;show&gt;å…ƒç´ ç”¨æ¥ä¼ è¾¾ç”¨æˆ·çš„å¯è®¿é—®æ€§ï¼Œåªèƒ½å‡ºç°åœ¨&lt;presence&gt;èŠ‚ä¸­ã€‚è¯¥å…ƒç´ çš„å€¼å¯ä»¥ä¸ºï¼šawayã€chatã€dndå’Œxaï¼Œåˆ†åˆ«è¡¨ç¤ºç¦»å¼€ã€æœ‰æ„èŠå¤©ã€ä¸å¸Œæœ›è¢«æ‰“æ‰°å’Œé•¿æœŸç¦»å¼€ã€‚ï¼ˆ2ï¼‰&lt;status&gt;å…ƒç´ æ—¶ä¸€ä¸ªäººç±»å¯è¯»çš„å­—ç¬¦ä¸²ï¼Œåœ¨æ¥æ”¶è€…çš„èŠå¤©å®¢æˆ·ç«¯ä¸­ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²ä¸€èˆ¬ä¼šç´§æŒ¨ç€è”ç³»äººåå­—æ˜¾ç¤ºã€‚ï¼ˆ3ï¼‰&lt;priority&gt;å…ƒç´ ç”¨æ¥æŒ‡æ˜è¿æ¥èµ„æºçš„ä¼˜å…ˆçº§ï¼Œä»‹äº-128~127ï¼Œé»˜è®¤å€¼ä¸º0ã€‚
æ‰©å±•presenceèŠ‚å¼€å‘äººå‘˜å¸Œæœ›èƒ½å¤Ÿæ‰©å±•&lt;presence&gt;èŠ‚ä»¥åŒ…å«æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ç”¨æˆ·å½“å‰å¬çš„æ­Œæˆ–ä¸ªäººçš„æƒ…ç»ªã€‚å› ä¸º&lt;presence&gt;èŠ‚ä¼šå¹¿æ’­ç»™æ‰€æœ‰è”ç³»äººï¼Œå¹¶ä¸”åœ¨XMPPç½‘ç»œæµé‡ä¸­å æ®äº†å¾ˆå¤§çš„ä»½é¢ï¼Œæ‰€ä»¥ä¸é¼“åŠ±è¿™ç§åšæ³•ã€‚è¿™ç±»æ‰©å±•åº”è¯¥äº¤ç»™é¢å¤–ä¿¡æ¯ä¼ é€åè®®æ¥å¤„ç†ã€‚
å‡ºå¸­è®¢é˜…ç”¨æˆ·çš„æœåŠ¡å™¨ä¼šè‡ªåŠ¨åœ°å°†å‡ºå¸­ä¿¡æ¯å¹¿æ’­ç»™é‚£äº›è®¢é˜…è¯¥ç”¨æˆ·å‡ºå¸­ä¿¡æ¯çš„è”ç³»äººã€‚ç±»ä¼¼çš„ï¼Œç”¨æˆ·ä»æ‰€æœ‰ä»–å·²ç»å‡ºå¸­è®¢é˜…çš„è”ç³»äººé‚£é‡Œæ¥æ”¶åˆ°å‡ºå¸­æ›´æ–°ä¿¡æ¯ã€‚ä¸ä¸€äº›ç¤¾äº¤ç½‘ç»œå’ŒIMç³»ç»Ÿä¸åŒï¼Œåœ¨XMPPä¸­ï¼Œå‡ºå¸­è®¢é˜…æ˜¯æœ‰æ–¹å‘çš„ã€‚æˆ‘è®¢é˜…äº†ä½ çš„å‡ºå¸­ä¿¡æ¯ï¼Œä½†æ˜¯ä½ å¹¶ä¸ä¸€å®šè®¢é˜…äº†æˆ‘çš„å‡ºå¸­ä¿¡æ¯ã€‚å¯ä»¥é€šè¿‡è®¾ç½®typeçš„å€¼æ¥è¯†åˆ«å‡ºå¸­è®¢é˜…èŠ‚ï¼šsubscribeã€unsubscribeã€subscribedã€unsubscribedã€‚
å®šå‘å‡ºå¸­å®šå‘å‡ºå¸­æ˜¯ä¸€ç§ç›´æ¥å‘ç»™å¦ä¸€ä¸ªç”¨æˆ·æˆ–å…¶ä»–å®ä½“çš„æ™®é€š&lt;presence&gt;èŠ‚ï¼Œè¿™ç§èŠ‚ç”¨æ¥å‘é‚£äº›æ²¡æœ‰è¿›è¡Œå‡ºå¸­è®¢é˜…ï¼ˆé€šå¸¸å› ä¸ºåªæ˜¯ä¸´æ—¶éœ€è¦å‡ºå¸­ä¿¡æ¯ï¼‰çš„å®ä½“ä¼ è¾¾å‡ºå¸­çŠ¶æ€ä¿¡æ¯ã€‚
messageèŠ‚&lt;message&gt;èŠ‚ç”¨æ¥ä»ä¸€ä¸ªå®ä½“å‘å¦ä¸€ä¸ªå®ä½“å‘é€æ¶ˆæ¯ã€‚è¿™äº›å¯ä»¥æ˜¯ç®€å•çš„èŠå¤©ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥æ˜¯ä»»ä½•ç»“æ„åŒ–ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œç»˜åˆ¶æŒ‡ä»¤ã€æ¸¸æˆçŠ¶æ€å’Œæ–°æ¸¸æˆå˜åŠ¨çŠ¶å†µã€‚
&lt;message&gt;å±äºå‘é€åä¸ç®¡çš„ç±»å‹ï¼Œæ²¡æœ‰å†…åœ¨çš„å¯é æ€§ï¼Œå°±åƒç”µå­é‚®ä»¶ä¸€æ ·ã€‚åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼ˆæ¯”å¦‚å‘ä¸å­˜åœ¨çš„æœåŠ¡å™¨å‘é€ä¿¡æ¯ï¼‰ï¼Œå‘é€è€…å¯èƒ½ä¼šæ”¶åˆ°ä¸€ä¸ªé”™è¯¯æç¤ºèŠ‚ï¼Œä»ä¸­äº†è§£å‡ºç°çš„é—®é¢˜ã€‚å¯ä»¥é€šè¿‡åœ¨åº”ç”¨ç¨‹åºåè®®ä¸­å¢åŠ ç¡®è®¤æœºåˆ¶æ¥å®ç°å¯é ä¼ é€ã€‚
æ¶ˆæ¯ç±»å‹&lt;message&gt;èŠ‚æœ‰å‡ ç§ä¸åŒçš„ç±»å‹ï¼Œè¿™äº›ç±»å‹ç”±typeå±æ€§æŒ‡å‡ºï¼Œå¯å–çš„å€¼æœ‰ï¼šchatã€errorã€normalã€groupchatå’Œheadlineã€‚è¯¥å±æ€§æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®štypeå€¼ï¼Œé»˜è®¤ä¸ºnormalã€‚
æ¶ˆæ¯å†…å®¹å°½ç®¡&lt;message&gt;èŠ‚å¯ä»¥åŒ…å«ä»»æ„æ‰©å±•å…ƒç´ ï¼Œä½†&lt;body&gt;å’Œ&lt;thread&gt;å…ƒç´ æ˜¯ä¸ºå‘æ¶ˆæ¯ä¸­æ·»åŠ å†…å®¹æä¾›çš„æ­£å¸¸æœºåˆ¶ã€‚è¿™ä¸¤ç§å­å…ƒç´ å‡æ˜¯å¯é€‰çš„ã€‚
IQèŠ‚&lt;iq&gt;èŠ‚è¡¨ç¤ºçš„æ˜¯Info/Queryï¼Œå®ƒä¸ºXMPPé€šä¿¡æä¾›è¯·æ±‚å’Œå“åº”æœºåˆ¶ã€‚å®ƒä¸HTTPåè®®çš„åŸºæœ¬å·¥ä½œåŸç†éå¸¸ç›¸ä¼¼ï¼Œå…è®¸è·å–å’Œè®¾ç½®æŸ¥è¯¢ï¼Œä¸HTTPçš„GETå’ŒPOSTåŠ¨ä½œç±»ä¼¼ã€‚&lt;iq&gt;èŠ‚æœ‰å››ç§ï¼Œé€šè¿‡typeå±æ€§åŒºåˆ†ï¼Œå…¶ä¸­ä¸¤ç§è¯·æ±‚getå’Œsetï¼Œä¸¤ç§å“åº”resultå’Œerrorã€‚æ¯ä¸€ä¸ªIQ-getæˆ–IQ-setèŠ‚å‡å¿…é¡»æ¥æ”¶å“åº”çš„IQ-resultå’ŒIQ-errorèŠ‚ã€‚æ­¤å¤–ï¼Œæ¯ä¸€å¯¹&lt;iq&gt;å¿…é¡»åŒ¹é…idå±æ€§ã€‚
errorèŠ‚æ‰€æœ‰ä¸‰ç§XMPPèŠ‚éƒ½æœ‰ä¸€ä¸ªerrorç±»å‹ï¼Œè€Œä¸”é”™è¯¯æç¤ºèŠ‚çš„æ¯ç§ç±»å‹çš„å†…å®¹éƒ½æ˜¯æŒ‰ç…§åŒä¸€æ¨¡å¼æ’åˆ—ã€‚é”™è¯¯æç¤ºèŠ‚å…·æœ‰å®šä¹‰æ˜ç¡®çš„çš„ç»“æ„ï¼Œé€šå¸¸åŒ…å«åŸèŠ‚ï¼ˆè‚‡äº‹èŠ‚ï¼‰çš„å†…å®¹ã€é€šç”¨é”™è¯¯ä¿¡æ¯ä»¥åŠåº”ç”¨ç¨‹åºç‰¹æœ‰çš„é”™è¯¯æ¡ä»¶å’Œä¿¡æ¯ï¼ˆå¯é€‰ï¼‰ã€‚
è¿æ¥ç”Ÿå‘½å‘¨æœŸé€šè¿‡ä¸‰ç§åŸºæœ¬èŠ‚ï¼Œå®é™…ä¸Šå¯ä»¥å®ŒæˆXMPPä¸­ä»»ä½•ä»»åŠ¡ï¼Œä½†å‘é€XMPPèŠ‚é€šå¸¸éœ€è¦å»ºç«‹ä¸€ä¸ªç»è¿‡èº«ä»½éªŒè¯çš„XMPPä¼šè¯ã€‚
è¿æ¥åœ¨å‘é€ä»»ä½•èŠ‚ä¹‹å‰ï¼Œéœ€è¦å»ºç«‹XMPPæµã€‚åœ¨XMPPæµå­˜åœ¨ä¹‹å‰ï¼Œå¿…é¡»å»ºç«‹é€šå¾€XMPPæœåŠ¡å™¨çš„è¿æ¥ã€‚
æµçš„å»ºç«‹ä¸€æ—¦å»ºç«‹é€šå¾€XMPPæœåŠ¡å™¨çš„è¿æ¥ï¼ŒXMPPæµå°±å¯åŠ¨äº†ã€‚é€šè¿‡å‘æœåŠ¡å™¨å‘é€èµ·å§‹å…ƒç´ &lt;stream:stream&gt;ï¼Œå°±å¯æ‰“å¼€XMPPæµã€‚æœåŠ¡å™¨é€šè¿‡å‘é€å“åº”æµèµ·å§‹æ ‡è®°&lt;stream:stream&gt;è¿›è¡Œç›¸åº”ã€‚ä¸€æ—¦åŒå‘å»ºç«‹XMPPæµï¼Œå°±å¯ä»¥æ¥å›å‘é€å„ç§å…ƒç´ ã€‚
èº«ä»½éªŒè¯XMPPå…è®¸è¿›è¡ŒTLSï¼ˆTransport Layer Securityï¼Œä¼ è¾“å±‚å®‰å…¨ï¼‰åŠ å¯†ï¼Œè€Œä¸”å¤§å¤šæ•°å®¢æˆ·ç«¯é»˜è®¤ä½¿ç”¨è¯¥åŠŸèƒ½ã€‚ä¸€æ—¦æœåŠ¡å™¨é€šå‘ŠTLSæ”¯æŒåï¼Œå®¢æˆ·ç«¯å°±å¯åŠ¨TLSè¿æ¥å¹¶å°†å½“å‰å¥—æ¥å­—å‡çº§ä¸ºä¸€ä¸ªåŠ å¯†å¥—æ¥å­—è€Œä¸æ–­å¼€è¿æ¥ã€‚ä¸€æ—¦TLSåŠ å¯†ç¡®ç«‹ï¼Œå°±ä¼šåˆ›å»ºä¸€å¯¹æ–°çš„XMPPæµã€‚
è¿æ¥æ–­å¼€å½“ç”¨æˆ·ç»“æŸXMPPä¼šè¯æ—¶ï¼Œä¼šç»ˆæ­¢ä¼šè¯å¹¶æ–­å¼€è¿æ¥ã€‚ä¸€èˆ¬ç»ˆæ­¢ä¼šè¯æ–¹å¼æ˜¯ï¼Œé¦–å…ˆå‘é€æ— æ•ˆå‡ºå¸­ä¿¡æ¯ï¼Œç„¶åå…³é—­&lt;stream:stream&gt;å…ƒç´ ã€‚
XMPPé€šä¿¡æµç¨‹(1)èŠ‚ç‚¹è¿æ¥åˆ°æœåŠ¡å™¨ï¼›(2)æœåŠ¡å™¨åˆ©ç”¨æœ¬åœ°ç›®å½•ç³»ç»Ÿä¸­çš„è¯ä¹¦å¯¹å…¶è®¤è¯ï¼›(3)èŠ‚ç‚¹æŒ‡å®šç›®æ ‡åœ°å€ï¼Œè®©æœåŠ¡å™¨å‘ŠçŸ¥ç›®æ ‡çŠ¶æ€ï¼›(4)æœåŠ¡å™¨æŸ¥æ‰¾ã€è¿æ¥å¹¶è¿›è¡Œç›¸äº’è®¤è¯ï¼›(5)èŠ‚ç‚¹ä¹‹é—´è¿›è¡Œäº¤äº’ï¼
XMPPä¼˜åŠ¿ä¸HTTPç›¸æ¯”ï¼ŒXMPPå…·æœ‰å¦‚ä¸‹çš„ä¼˜åŠ¿ï¼šï¼ˆ1ï¼‰èƒ½å¤Ÿâ€œæ¨é€â€æ•°æ®ï¼Œè€Œä¸æ˜¯â€œæ‹‰â€ã€‚ï¼ˆ2ï¼‰é˜²ç«å¢™å‹å¥½ï¼ˆ3ï¼‰ç‰¢å›ºçš„èº«ä»½éªŒè¯å’Œå®‰å…¨æœºåˆ¶ï¼ˆ4ï¼‰ä¸ºè®¸å¤šä¸åŒçš„é—®é¢˜æä¾›å¤§é‡å³å¼€å³ç”¨çš„å·¥å…·
XMPPä¸è¶³æ¯ç§åè®®éƒ½æœ‰å„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œåœ¨è®¸å¤šåœºåˆä¸­XMPPå¹¶ä¸æ˜¯å®Œæˆä»»åŠ¡çš„æœ€ä½³å·¥å…·æˆ–å—åˆ°æŸç§é™åˆ¶ã€‚ï¼ˆ1ï¼‰æœ‰çŠ¶æ€åè®®ï¼ˆ2ï¼‰ç¤¾åŒºå’Œéƒ¨ç½²ä¸åŠHTTPå¹¿æ³›ï¼ˆ3ï¼‰å¯¹äºç®€å•çš„è¯·æ±‚ï¼Œå…¶å¼€é”€æ¯”HTTPå¤§ï¼ˆ4ï¼‰ä»ç„¶éœ€è¦ä¸“é—¨çš„å®ç°
æ¡¥æ¥XMPPå’ŒWebè™½ç„¶æœ‰å‡ æ¬¾æµè§ˆå™¨æ­£åœ¨è¯•éªŒä¸€äº›åŠŸèƒ½ä»¥åˆ©ç”¨XMPPï¼Œä½†ä¸»æµæµè§ˆå™¨ç›®å‰è¿˜æ²¡æœ‰å†…ç½®XMPPåè®®æ”¯æŒã€‚ä½†é€šè¿‡æŸç§å·§å¦™çš„ç¼–ç¨‹å’Œä¸€äº›æœåŠ¡å™¨ç«¯çš„å¸®åŠ©ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨HTTPè¿æ¥ä¹‹ä¸Šå»ºç«‹é«˜æ•ˆçš„XMPPä¼šè¯é€šé“ã€‚
æ˜¯è¿™ç§é«˜æ•ˆé€šé“æˆä¸ºå¯èƒ½çš„æ˜¯ä¸€é¡¹åä¸ºHTTPé•¿è½®è¯¢çš„æŠ€æœ¯ã€‚é€šè¿‡è”åˆä½¿ç”¨ä¸€ä¸ªç®€å•çš„åŸºäºHTTPçš„ç®¡ç†åè®®ä»¥åŠXMPPè¿æ¥ç®¡ç†å™¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†XMPPï¼ˆä»¥åŠå®ƒçš„æ‰€æœ‰åŠŸèƒ½ï¼‰å¸¦å…¥åˆ°HTTPåº”ç”¨ç¨‹åºä¸­ã€‚
é•¿è½®è¯¢å¦‚æœè¯»è€…æ›¾åœ¨ä¸€ä¸ªä¸“æ¨ªçš„è€æ¿ä¸‹é¢å·¥ä½œï¼Œä»–ä¼šä¸åœåœ°é—®ï¼šâ€œè½¯ä»¶è¿˜æ²¡æœ‰å†™å®Œå—ï¼Ÿâ€è¿™å…¶å®å°±æ˜¯è½®è¯¢ã€‚
å°½ç®¡æœåŠ¡å™¨ä¸ä¼šè¢«æ¿€æ€’ï¼Œä½†æ˜¯å¦‚æœå¤ªå¤šå®¢æˆ·ç«¯è¿‡å¿«åœ°è½®è¯¢ï¼ŒæœåŠ¡å™¨ä¹Ÿå¯èƒ½å˜å¾—ç¼“æ…¢ã€‚å¦‚æœä¸åœåœ°è¢«æ‰“æ‰°ï¼Œé‚£ä¹ˆå®Œæˆçš„å·¥ä½œé‡å°±ä¼šå‡å°‘ã€‚ä½†æ˜¯ä¸ºäº†è·å–å¿«é€Ÿæ›´æ–°ï¼Œè½®è¯¢çš„é—´éš”å¿…é¡»ç›¸å½“çŸ­ï¼Œæœ€ä½çš„å»¶è¿Ÿå°±æ˜¯è½®è¯¢é—´éš”çš„é•¿åº¦ã€‚
è½®è¯¢çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯å¤§å¤šæ•°è½®è¯¢è¯·æ±‚å¹¶æ²¡æœ‰æ¥æ”¶åˆ°æ–°æ•°æ®ï¼Œå°±åƒç»™ä¸“æ¨ªé›‡ä¸»çš„ç­”å¤ä¸€æ ·ï¼ŒæœåŠ¡å™¨å¯¹â€œè½¯ä»¶è¿˜æ²¡æœ‰å†™å®Œå—ï¼Ÿâ€é—®é¢˜çš„ç­”æ¡ˆæ€»æ˜¯â€œè¿˜æ²¡æœ‰â€ã€‚
ä¸€äº›èªæ˜çš„å®¶ä¼™ï¼Œå‘æ˜äº†ä¸€ç§å·§å¦™çš„æŠ€æœ¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®ƒä»¬å¹¶ä¸ç«‹å³å“åº”è¯¥è¯·æ±‚ï¼Œè€Œæ˜¯åœ¨æ–°æ•°æ®æ²¡æœ‰å‡†å¤‡å¥½æ—¶å°†å…¶æŒ‚èµ·ä¸€æ®µæ—¶é—´ã€‚
ä¾‹å¦‚ï¼Œå¦‚æœæœåŠ¡å™¨ä¸Šæ–°æ•°æ®å·²ç»å‡†å¤‡å°±ç»ªï¼Œé‚£ä¹ˆæœåŠ¡å™¨ä¼šç«‹å³åº”ç­”ã€‚å¦‚æœå°šæ— æ–°æ•°æ®ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°†ä¿æŒè¿æ¥çš„æ‰“å¼€çŠ¶æ€ï¼Œå¹¶æŒæœ‰æ‰€æœ‰åº”ç­”ã€‚ä¸€æ—¦æ–°æ•°æ®åˆ°è¾¾ï¼Œå®ƒæœ€ç»ˆä¼šå“åº”è¯¥è¯·æ±‚ã€‚å¦‚æœåœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ–°æ•°æ®åˆ°è¾¾ï¼ŒæœåŠ¡å™¨å¯ä»¥å‘å›ä¸€ä¸ªç©ºçš„å“åº”ï¼Œè¿™æ ·å°±ä¸ä¼šä¸€æ¬¡æ€§é”ä½è¿‡å¤šæ‰“å¼€çš„è¿æ¥ã€‚ä¸€æ—¦ä¸€ä¸ªè¯·æ±‚è¿”å›ï¼Œå®¢æˆ·ç«¯å°±ä¼šç«‹å³å‘é€ä¸€ä¸ªæ–°çš„è¯·æ±‚ï¼Œæ•´ä¸ªè¿‡ç¨‹é‡æ–°å¼€å§‹ã€‚
å› ä¸ºæ¯ä¸ªè½®è¯¢è¯·æ±‚éƒ½å¯èƒ½æ‰“å¼€è¾ƒé•¿çš„æ—¶é—´ï¼Œæ‰€ä»¥è¿™ç§æŠ€æœ¯è¢«ç§°ä¸ºé•¿è½®è¯¢ã€‚
è½®è¯¢å’Œé•¿è½®è¯¢çš„å”¯ä¸€çœŸæ­£æ”¹å˜ä¹‹å¤„æ˜¯ï¼Œä¸è®©å®¢æˆ·ç«¯ç­‰å¾…é‡æ–°å‘é€è¯·æ±‚ï¼Œè€Œæ˜¯è®©æœåŠ¡å™¨ç­‰å¾…ç›´åˆ°å…¶æœ‰æ–°æ•°æ®éœ€è¦é€šå‘Šæ‰å“åº”è¯·æ±‚ã€‚
è¯¥æŠ€æœ¯çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯æœåŠ¡å™¨éœ€è¦æ›´èªæ˜æ‰å¯ä»¥å¤„ç†è¿™äº›é•¿è½®è¯¢è¯·æ±‚ï¼Œè€Œè¿™æ­£æ˜¯è¿æ¥ç®¡ç†å™¨çš„ä½œç”¨æ‰€åœ¨ã€‚
ç®¡ç†è¿æ¥XMPPè¿æ¥å¯ä»¥æŒç»­ä»»æ„é•¿çš„æ—¶é—´ï¼Œä½†HTTPè¯·æ±‚å´ç›¸å½“çŸ­å‘½ã€‚è¿æ¥ç®¡ç†å™¨è´Ÿè´£ç»´æŠ¤ç¬¬ä¸‰æ–¹çš„XMPPè¿æ¥å¹¶é€šè¿‡HTTPé•¿è½®è¯¢æŠ€æœ¯æ¥æä¾›å¯¹è¿æ¥çš„è®¿é—®ã€‚
æµè§ˆå™¨å’Œè¿æ¥ç®¡ç†å™¨ä½¿ç”¨ä¸€ç§åä¸ºBOSHçš„ç®€å•åè®®é€šè¿‡HTTPè¿›è¡Œé€šä¿¡ã€‚å®é™…ä¸Šï¼ŒBOSHå¸®åŠ©HTTPå®¢æˆ·ç«¯å»ºç«‹ä¸€ä¸ªæ–°çš„XMPPä¼šè¯ï¼Œç„¶åå°†XMPPèŠ‚åŒ…è£…åˆ°ä¸€ä¸ªç‰¹æ®Šçš„&lt;body&gt;å…ƒç´ ä¸­é€šè¿‡HTTPæ¥å›ä¼ é€ã€‚å®ƒè¿˜æä¾›äº†ä¸€äº›å®‰å…¨åŠŸèƒ½ä»¥ç¡®ä¿XMPPä¼šè¯ä¸ä¼šè½»æ˜“åœ°è¢«åŠ«æŒã€‚è¿æ¥ç®¡ç†å™¨å’ŒXMPPæœåŠ¡å™¨é€šä¿¡å°±åƒå®ƒæ˜¯ä¸€ä¸ªæ™®é€šçš„å®¢æˆ·ç«¯ä¸€æ ·ã€‚
è¿™æ ·ä¸€æ¥ï¼ŒHTTPåº”ç”¨ç¨‹åºå°±èƒ½å¤Ÿæ§åˆ¶ä¸€ä¸ªçœŸæ­£çš„XMPPä¼šè¯ã€‚ç”±äºé•¿è½®è¯¢åŠæ—¶æä¾›çš„é«˜æ•ˆç‡å’Œä½å»¶è¿Ÿï¼Œå› æ­¤å®ƒçš„æ€§èƒ½ç›¸å½“å¥½ï¼Œè¶³çŸ£åŒ¹æ•ŒåŸç”Ÿè¿æ¥ã€‚
è®©Javascriptç†è§£XMPPåè®®åˆ©ç”¨HTTPé•¿è½®è¯¢ï¼Œæˆ‘ä»¬å°±æ‹¥æœ‰äº†ä»æœåŠ¡å™¨è·å–ä½å»¶è¿Ÿæ•°æ®æ›´æ–°çš„æŠ€æœ¯ã€‚å°†è¯¥æŠ€æœ¯ä¸è¿æ¥ç®¡ç†å™¨ç»„åˆèµ·æ¥ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿé€šè¿‡ä¸€ç³»åˆ—HTTPè¯·æ±‚æ¥å‘é€å’Œæ¥å—XMPPæ•°æ®ã€‚æœ€åï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç®€åŒ–è¯¥æŠ€æœ¯åœ¨Webçš„åŸç”Ÿç¼–ç¨‹è¯­è¨€Javascriptä¸­çš„å®ç°ã€‚
Stropheåº“çš„åˆ›å»ºå®—æ—¨ï¼Œå°±æ˜¯ä¸ºäº†è®©ä½¿ç”¨Javascriptç¼–å†™XMPPåº”ç”¨ç¨‹åºï¼Œèƒ½å¤Ÿæƒ³é‡‡ç”¨ä»»ä½•å…¶ä»–è¯­è¨€ä¸€æ ·ç®€å•ï¼Œå°†æ‰˜ç®¡è¿æ¥çš„åº•å±‚ç»†èŠ‚å…¨éƒ¨éšè—èµ·æ¥ã€‚å°±Stropheçš„ç”¨æˆ·è€Œè¨€ï¼Œå®ƒçœ‹ä¸Šå»å°±è·Ÿåœ¨ä»»ä½•å…¶ä»–ç¯å¢ƒä¸­æ‰€ä½¿ç”¨çš„åŸç”ŸXMPPè¿æ¥ä¸€æ ·ã€‚
æ„å»ºXMPPåº”ç”¨ç¨‹åºæµè§ˆå™¨å¹³å°Webæµè§ˆå™¨å¯èƒ½æ˜¯æœ‰å²ä»¥æ¥éƒ¨ç½²æœ€å¹¿æ³›ã€ä½¿ç”¨æœ€å¤šçš„åº”ç”¨ç¨‹åºå¹³å°ã€‚XMPPä¸ºWebåº”ç”¨ç¨‹åºå¸¦æ¥äº†ä¸€å¥—æ–°æŠ€æœ¯å’ŒæŠ½è±¡æ¦‚å¿µï¼ŒåŒæ—¶å¸¦æ¥çš„æ˜¯å®æ—¶ã€äº¤äº’å¼å’Œåä½œå¼åº”ç”¨ç¨‹åºçš„å·¨å¤§æ½œåŠ›ã€‚
å¯¹äºXMPPå¼€å‘äººå‘˜æ¥è¯´ï¼Œå°†Webæµè§ˆå™¨å®šä½ä¸ºç›®æ ‡å¹³å°æœ‰ç€å·¨å¤§çš„æ„ä¹‰ã€‚Webåº”ç”¨ç¨‹åºè·¨å¹³å°ã€æ˜“äºéƒ¨ç½²ï¼Œè€Œä¸”æœ‰ç€å·¨å¤§çš„ç”¨æˆ·åŸºç¡€ã€‚æ­¤å¤–ï¼ŒWebæŠ€æœ¯å¤§é‡ä½¿ç”¨HTMLï¼Œè€Œç”¨äºHTMLçš„å·¥å…·é€šå¸¸ä¹Ÿéƒ½èƒ½å¾ˆå¥½åœ°ç”¨äºXMLï¼Œå› è€Œä¹Ÿèƒ½ç”¨äºXMPPã€‚
åŸºç¡€è®¾æ–½å°±åƒWebé€šå¸¸éœ€è¦ä¸€ä¸ªWebæœåŠ¡å™¨å’Œåº”ç”¨ç¨‹åºæœåŠ¡å™¨æˆ–æ¡†æ¶ï¼ŒXMPPåº”ç”¨ç¨‹åºä¹Ÿéœ€è¦ä¸€äº›åŸºç¡€è®¾æ–½ã€‚
XMPPè¿æ¥è¦æ±‚æœ‰ä¸€å°XMPPæœåŠ¡å™¨ï¼Œè€Œä¸”é€šå¸¸åœ¨è¯¥æœåŠ¡å™¨ä¸Šä¼šæœ‰ä¸€ä¸ªè´¦æˆ·ã€‚XMPPåº”ç”¨ç¨‹åºè¿˜éœ€è¦ä¸è¿æ¥ç®¡ç†å™¨è¿›è¡Œé€šä¿¡ï¼Œè¿™æ˜¯å› ä¸ºæµè§ˆå™¨ç›®å‰è¿˜æ— æ³•åŸç”Ÿåœ°ç†è§£XMPPåè®®ã€‚æœ€åï¼Œåº”ç”¨ç¨‹åºä½¿ç”¨çš„ä»»ä½•æœåŠ¡ä¹Ÿå¿…é¡»ç”±XMPPæœåŠ¡å™¨æä¾›ã€‚
åè®®è®¾è®¡å¦‚æœä¸æ˜¯åœ¨åˆ›å»ºç°æœ‰XMPPæœåŠ¡ï¼ˆæ¯”å¦‚å¤šäººèŠå¤©æˆ–ä¼ ç»ŸIMåŠŸèƒ½ï¼‰ï¼Œé‚£ä¹ˆç”¨æˆ·å¯èƒ½åœ¨è¿›è¡ŒæŸç§åè®®æ¶‰åŠæ¥å®ç°è‡ªå·±çš„æ¢¦æƒ³ã€‚XMPPæä¾›äº†å¤§é‡çš„å·¥å…·å¯ä½œä¸ºå·¥ä½œåŸºç¡€ï¼Œè€Œä¸”é€šå¸¸ï¼Œå°†è¿™äº›å·¥å…·è¿›è¡Œç®€å•ç»„åˆï¼Œå°±è¶³å¤Ÿæ»¡è¶³å¤§å¤šæ•°åº”ç”¨ç¨‹åºçš„éœ€è¦ã€‚ä¸‹é¢æœ‰å‡ æ¡æŒ‡å—ï¼šï¼ˆ1ï¼‰ç»„åˆç°æœ‰åè®®ã€‚ï¼ˆ2ï¼‰ä¿æŒç®€æ´ã€‚ï¼ˆ3ï¼‰é¿å…æ‰©å±•å‡ºå¸­ã€‚ï¼ˆ4ï¼‰å‚ä¸ç¤¾åŒºã€‚
å‚è€ƒæ–‡æ¡£ã€ŠXMPPé«˜çº§ç¼–ç¨‹ï¼ˆä½œè€…Jack Moffittï¼‰ã€‹ã€ŠXMPP The Definitive Guideï¼ˆä½œè€…Peter Saint-Andre, Kevin Smith, and Remko Tron?onï¼‰ã€‹å‰è¾ˆä»¬çš„æŠ€æœ¯åšå®¢â€¦â€¦
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>jquery</tag>
        <tag>xmpp</tag>
      </tags>
  </entry>
  <entry>
    <title>jQueryå­¦ä¹ ç¬”è®°â€”â€”Ajaxç¯‡</title>
    <url>/dev-jquery-ajax/</url>
    <content><![CDATA[æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯Ajaxçš„ä¼˜ç‚¹æˆ‘ä»¬å·²ç»è¯´è¿‡äº†ï¼Œä¸Šä¸ªä¾‹å­å…ˆï¼
&lt;!--æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯.html--&gt;&lt;html&gt;	&lt;head&gt;	&lt;title&gt;æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯&lt;/title&gt;	&lt;meta charset=&quot;UTF-8&quot;&gt;	&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.11.1.js&quot;&gt;&lt;/script&gt;	&lt;script type=&quot;text/javascript&quot;&gt;		$(function()&#123;			$(&quot;#submit&quot;).click(function()&#123;				var name = $(&quot;.uname&quot;).val();				var data = &quot;uname=&quot; + name;				$.ajax(&#123;					type:&quot;POST&quot;,					url:&quot;http://demo.voidking.com/welcome.php&quot;,					data:data,					success: function(html)&#123;						$(&quot;#message&quot;).html(html);					&#125;				&#125;);				return false;			&#125;);		&#125;);	&lt;/script&gt;	&lt;/head&gt;	&lt;body&gt;		&lt;form&gt;			&lt;label&gt;Enter your name&lt;/label&gt;			&lt;input type=&quot;text&quot; name=&quot;uname&quot; class=&quot;uname&quot; /&gt;&lt;br/&gt;			&lt;input type=&quot;submit&quot; id=&quot;submit&quot;/&gt;		&lt;/form&gt;		&lt;div id=&quot;message&quot;&gt;		&lt;/div&gt;	&lt;/body&gt;&lt;/html&gt;

&lt;!--welcome.php--&gt;&lt;?php	$name = $_POST[&#x27;uname&#x27;];	echo &quot;welcome &quot;.$name;?&gt;
æŠŠajaxå®ä¾‹01.htmlã€welcome.phpã€jquery-1.11.1.jsä¸Šä¼ åˆ°è‡ªå·±çš„æœåŠ¡å™¨ã€‚æ‰“å¼€æµè§ˆå™¨è®¿é—®â€œæ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯.htmlâ€ï¼Œè¾“å…¥ä¸€ä¸ªåå­—ï¼Œå°±èƒ½çœ‹åˆ°æ•ˆæœäº†ã€‚
ä¸ºä»€ä¹ˆè¦ä¸Šä¼ æœåŠ¡å™¨ï¼Œæçš„è¿™ä¹ˆéº»çƒ¦ï¼Ÿå¤§å“¥ï¼Œajaxä¸»è¦å°±æ˜¯ç”¨æ¥å’ŒæœåŠ¡å™¨äº¤äº’çš„å¥½ä¸å¥½ï¼Ÿå¦‚æœä½ è§‰å¾—éº»çƒ¦ï¼Œå¯ä»¥ç›´æ¥è®¿é—®æˆ‘çš„æœåŠ¡å™¨æŸ¥çœ‹æ•ˆæœ:VoidKingç¼–ç¨‹å®ä¾‹ï¼Œæ¥ä¸‹æ¥çš„ä¾‹å­ä¹Ÿå¯ä»¥åœ¨è¿™ä¸ªç½‘é¡µæ‰¾åˆ°ã€‚
å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥æœ¬åœ°æ‰“å¼€â€œæ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯.htmlâ€ï¼Œä½†æ˜¯æäº¤æ•°æ®æ²¡æœ‰ååº”ï¼Œå› ä¸ºåŒæºç­–ç•¥é™åˆ¶äº¤äº’ã€‚æ€ä¹ˆç ´ï¼Ÿç®€å•ç‚¹ï¼Œæœ¬åœ°æ­å»ºä¸€ä¸ªphpæœåŠ¡å™¨ï¼é«˜å¤§ä¸Šç‚¹ï¼Œè‡ªè¡Œç™¾åº¦ï¼Œä¿®æ”¹ä»£ç ï¼


æ‰§è¡Œè®¤è¯&lt;!DOCTYPE html&gt;&lt;html&gt;	&lt;head&gt;        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;/&gt;        &lt;title&gt;ajaxå®ä¾‹02&lt;/title&gt;        &lt;script src=&quot;jquery-1.11.1.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;          &lt;script type=&quot;text/javascript&quot;&gt;			$(function() &#123;   				$(&#x27;#submit&#x27;).click(function () &#123;           					var name = $(&#x27;.uname&#x27;).val();							var pwd = $(&#x27;.passwd&#x27;).val();						var data=&#x27;uname=&#x27;+name+&#x27;&amp;password=&#x27;+pwd;					$.ajax(&#123;						type:&quot;GET&quot;,						url:&quot;logincheck.php&quot;, 						data:data,             						success:function(html) &#123;										$(&quot;#message&quot;).html(html);								&#125;					&#125;);							return false;					&#125;);			&#125;);		&lt;/script&gt;	&lt;/head&gt;	&lt;body&gt;		&lt;p&gt;ç”¨æˆ·åè¾“å…¥guestï¼Œå¯†ç è¾“å…¥jqueryï¼Œä¼šå‡ºç°æ¬¢è¿ä¿¡æ¯ï¼Œå¦åˆ™æ˜¾ç¤ºæœªæ³¨å†Œ&lt;/p&gt;&lt;br/&gt;		&lt;form&gt;  		&lt;label&gt;Enter your Name&lt;/label&gt;  		&lt;input type=&quot;text&quot;  name=&quot;uname&quot; class=&quot;uname&quot;/&gt;  &lt;br/&gt;		&lt;label&gt;Enter your Password&lt;/label&gt;  		&lt;input type=&quot;password&quot;  name=&quot;password&quot; class=&quot;passwd&quot;/&gt;  &lt;br/&gt;		&lt;input type=&quot;submit&quot; id=&quot;submit&quot;/&gt;  		&lt;/form&gt;  		&lt;div id=&quot;message&quot;&gt;&lt;/div&gt;	&lt;/body&gt;&lt;/html&gt;
&lt;!--logincheck.php--&gt;&lt;?php   $name = trim($_GET[&#x27;uname&#x27;]); $pswd = trim($_GET[&#x27;password&#x27;]);    if(($name==&quot;guest&quot;) &amp;&amp; ($pswd==&quot;jquery&quot;))  echo &quot;Welcome &quot;.  $name;else  echo &quot;Sorry you are not authorized&quot;;?&gt;  

éªŒè¯ç”¨æˆ·å&lt;html&gt;	&lt;head&gt;		&lt;meta charset=&quot;UTF-8&quot;&gt;		&lt;title&gt;éªŒè¯ç”¨æˆ·å&lt;/title&gt;		&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.11.1.js&quot;&gt;&lt;/script&gt;		&lt;script type=&quot;text/javascript&quot;&gt;			$(function() &#123;   				$(&#x27;.error&#x27;).hide();				$(&#x27;#submit&#x27;).click(function () &#123;           					var name = $(&#x27;.uname&#x27;).val();							var data=&#x27;uname=&#x27;+name;					$.ajax(&#123;						type:&quot;POST&quot;,						url:&quot;validateuser.php&quot;, 						data:data,             						success:function(html) &#123;							$(&#x27;.error&#x27;).show();									$(&#x27;.error&#x27;).text(html);										&#125;					&#125;);							return false;					&#125;);			&#125;);		&lt;/script&gt;		&lt;/head&gt;	&lt;body&gt;		&lt;p&gt;éªŒè¯ç”¨æˆ·åï¼Œåªèƒ½æ˜¯æ•°å­—ã€å­—æ¯å’Œä¸‹åˆ’çº¿&lt;/p&gt;&lt;br/&gt;		&lt;form&gt;  			&lt;span class=&quot;label&quot;&gt;Enter your Name&lt;/span&gt;  			&lt;input type=&quot;text&quot;  name=&quot;uname&quot; class=&quot;uname&quot;/&gt;  &lt;span class=&quot;error&quot;&gt; &lt;/span&gt;&lt;br&gt;			&lt;input type=&quot;submit&quot; id=&quot;submit&quot;/&gt;  		&lt;/form&gt;  	&lt;/body&gt;&lt;/html&gt;
&lt;!--validateuser.php--&gt;&lt;?php   $name = $_POST[&#x27;uname&#x27;]; if (!eregi(&quot;^[a-zA-Z0-9_]+$&quot;, $name)) &#123;	echo &quot;Invalid User name!&quot;;&#125;else&#123;	echo &quot;Great user name!&quot;;&#125;?&gt;  

ä½¿ç”¨è‡ªåŠ¨å®Œæˆ&lt;html&gt;	&lt;head&gt;		&lt;meta charset=&quot;UTF-8&quot;&gt;		&lt;title&gt;ä½¿ç”¨è‡ªåŠ¨å®Œæˆ&lt;/title&gt;				&lt;style type=&quot;text/css&quot;&gt;			.listbox &#123;				position: relative;				left: 10px;				margin: 10px;				width: 200px;				background-color: #000;				color: #fff;				border: 2px solid #000;			&#125;			.nameslist &#123;				margin: 0px;				padding: 0px;			list-style:none;			&#125;			.hover &#123;				background-color: cyan;				color: blue;			&#125;		&lt;/style&gt;				&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.11.1.js&quot;&gt;&lt;/script&gt;		&lt;script type=&quot;text/javascript&quot;&gt;			$(function() &#123;  				$(&#x27;.listbox&#x27;).hide(); 				$(&#x27;.userid&#x27;).keyup(function () &#123;       					var uid = $(&#x27;.userid&#x27;).val();						var data=&#x27;userid=&#x27;+uid;					$.ajax(&#123;						type:&quot;POST&quot;,						url:&quot;autocomplete.php&quot;, 						data:data,             						success:function(html) &#123;							$(&#x27;.listbox&#x27;).show();							$(&#x27;.nameslist&#x27;).html(html);							$(&#x27;li&#x27;).hover(function()&#123;								$(this).addClass(&#x27;hover&#x27;);							&#125;,							function()&#123;								$(this).removeClass(&#x27;hover&#x27;);							&#125;);							$(&#x27;li&#x27;).click(function()&#123;								$(&#x27;.userid&#x27;).val($(this).text());								$(&#x27;.listbox&#x27;).hide(); 							&#125;);						&#125;					&#125;);						return false;					&#125;);			&#125;);		&lt;/script&gt;		&lt;/head&gt;	&lt;body&gt;		&lt;p&gt;è¾“å…¥åå­—çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ—¶ï¼Œå¼¹å‡ºå»ºè®®æ¡†ã€‚&lt;/p&gt;&lt;br/&gt;		&lt;form&gt;  			&lt;span class=&quot;label&quot;&gt;Enter user id&lt;/span&gt;  			&lt;input type=&quot;text&quot;  name=&quot;userid&quot; class=&quot;userid&quot;/&gt; 			&lt;div class=&quot;listbox&quot;&gt;				&lt;div class=&quot;nameslist&quot;&gt;				&lt;/div&gt;			&lt;/div&gt;		&lt;/form&gt;   	&lt;/body&gt;&lt;/html&gt;

&lt;?php   	$name = $_POST[&#x27;userid&#x27;]; 	$connect = mysql_connect(&quot;localhost&quot;, &quot;demo&quot;, &quot;voidking&quot;) or die(&quot;Please, check your server connection.&quot;);	mysql_select_db(&quot;demo&quot;);	$query = &quot;SELECT name from user where name like &#x27;$name%&#x27;&quot;;	$results = mysql_query($query) or die(mysql_error());	if($results)	&#123;		while ($row = mysql_fetch_array($results)) &#123;			extract($row);			echo &#x27;&lt;li&gt;&#x27; . $name. &#x27;&lt;/li&gt;&#x27;;		&#125;	&#125;?&gt;  

å¯¼å…¥HTML&lt;!--å¯¼å…¥HTML--&gt;&lt;html&gt;	&lt;head&gt;		&lt;meta charset=&quot;UTF-8&quot;&gt;		&lt;title&gt;å¯¼å…¥HTML&lt;/title&gt;		&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.11.1.js&quot;&gt;&lt;/script&gt;		&lt;script type=&quot;text/javascript&quot;&gt;			$(function() &#123;   				$(&#x27;.list&#x27;).click(function () &#123;           					$(&#x27;#message&#x27;).load(&#x27;namesinfo.html&#x27;);					return false;   				&#125;);			&#125;);		&lt;/script&gt;		&lt;/head&gt;	&lt;body&gt;		&lt;p&gt;å•å‡»è¶…é“¾æ¥ï¼Œä»å¦ä¸€ä¸ªæ–‡ä»¶ä¸­å¯¼å…¥ä¸€äº›HTMLå†…å®¹åˆ°å½“å‰ç½‘é¡µä¸­ã€‚&lt;/p&gt;&lt;br/&gt;		&lt;p&gt;We are going to organize the Conference on IT on 2nd Feb 2010&lt;/p&gt;		&lt;a href=&quot;http://demo.voidking.com&quot; class=&quot;list&quot;&gt;Participants&lt;/a&gt;		&lt;div id=&quot;message&quot;&gt;&lt;/div&gt;	&lt;/body&gt;&lt;/html&gt;

&lt;!--namesinfo.html--&gt;&lt;p&gt;The list of the persons taking part in conference &lt;/p&gt;&lt;ul&gt;&lt;li&gt;Jackub&lt;/li&gt;&lt;li&gt;Jenny&lt;/li&gt;&lt;li&gt;Jill&lt;/li&gt;&lt;li&gt;John&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;We wish them All the Best&lt;/p&gt;

å–å¾—JSONæ•°æ®&lt;!--å–å¾—JSONæ•°æ®--&gt;&lt;html&gt;	&lt;head&gt;		&lt;meta charset=&quot;UTF-8&quot;&gt;		&lt;title&gt;å–å¾—JSONæ•°æ®&lt;/title&gt;		&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.11.1.js&quot;&gt;&lt;/script&gt;		&lt;script type=&quot;text/javascript&quot;&gt;			$(function() &#123;   				$(&#x27;#submit&#x27;).click(function () &#123;      					$.ajax(&#123;						type:&quot;GET&quot;,						url:&quot;drinkinfo.json&quot;,    						dataType:&quot;json&quot;,						success: function (data) &#123;   							var drinks=&quot;&lt;ul&gt;&quot;;							$.each(data, function(i,n)&#123;								drinks+=&quot;&lt;li&gt;&quot;+n[&quot;optiontext&quot;]+&quot;&lt;/li&gt;&quot;;							&#125;);							drinks+=&quot;&lt;/ul&gt;&quot;;              							$(&#x27;#message&#x27;).append(drinks);							&#125;					&#125;);   					return false;					&#125;);					&#125;);		&lt;/script&gt;		&lt;/head&gt;	&lt;body&gt;		&lt;p&gt;ä»JSONæ–‡ä»¶ä¸­å¼‚æ­¥åœ°å¯¼å…¥ä¿¡æ¯åˆ°å½“å‰çš„ç½‘é¡µä¸­ã€‚&lt;/p&gt;&lt;br/&gt;		&lt;p&gt;For information from JSON file click the button given below :&lt;br&gt;		&lt;input type=&quot;submit&quot; id=&quot;submit&quot;/&gt;  		&lt;div id=&quot;message&quot;&gt;&lt;/div&gt;  	&lt;/body&gt;&lt;/html&gt;
drinkinfo.jsonæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
[	&#123;&quot;optiontext&quot; : &quot;Tea&quot;, &quot;optionvalue&quot; : &quot;Tea&quot;&#125;,	&#123;&quot;optiontext&quot; : &quot;Coffee&quot;, &quot;optionvalue&quot; : &quot;Coffee&quot;&#125;,	&#123;&quot;optiontext&quot; : &quot;Juice&quot;, &quot;optionvalue&quot; : &quot;Juice&quot;&#125;]
çŸ®æ²¹æˆ‘é ï¼Œåœ¨æœåŠ¡å™¨ä¸Šæ‰“å¼€æµè§ˆå™¨ï¼Œè¯»å–æ­£å¸¸ï¼›åœ¨æœ¬åœ°æ‰“å¼€æµè§ˆå™¨ï¼Œå±…ç„¶æ— æ³•è¯»å–ï¼Œ404é”™è¯¯ï¼
ç»è¿‡æµ‹è¯•ï¼Œåªè¦æŠŠæ–‡ä»¶åæ›´æ”¹ä¸€ä¸‹å°±å¥½äº†ã€‚å³æŠŠdrinkinfo.jsonæ”¹æˆdrinkinfo.txtã€‚çœŸæ˜¯ä¸ªå¥‡è‘©é—®é¢˜ï¼Œä¸ªäººçŒœæµ‹æ˜¯æµè§ˆå™¨ä¼ è¾“æ–‡ä»¶æœ‰æ ¼å¼é™åˆ¶ã€‚
å–å¾—XMLæ•°æ®&lt;html&gt;	&lt;head&gt;		&lt;meta charset=&quot;UTF-8&quot;&gt;		&lt;title&gt;å–å¾—XMLæ•°æ®&lt;/title&gt;		&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.11.1.js&quot;&gt;&lt;/script&gt;		&lt;script type=&quot;text/javascript&quot;&gt;			$(document).ready(function() &#123;   				$(&#x27;#submit&#x27;).click(function () &#123;      					$.ajax(&#123;						type:&quot;GET&quot;,						url:&quot;student.xml&quot;,    						dataType:&quot;xml&quot;,						success: function (sturec) &#123;    							var stud=&quot;&lt;ul&gt;&quot;;							$(sturec).find(&#x27;student&#x27;).each(function()&#123;								var name = $(this).find(&#x27;first-name&#x27;).text()								stud+=&quot;&lt;li&gt;&quot;+name+&quot;&lt;/li&gt;&quot;;							&#125;);							stud+=&quot;&lt;/ul&gt;&quot;; 							$(&#x27;#message&#x27;).append(stud);						&#125;					&#125;);   					return false;					&#125;);					&#125;);		&lt;/script&gt;		&lt;/head&gt;	&lt;body&gt;		&lt;p&gt;ä»student.xmlæ–‡ä»¶ä¸­å¼‚æ­¥å¯¼å…¥ä¿¡æ¯åˆ°å½“å‰çš„ç½‘é¡µä¸­ã€‚&lt;/p&gt;&lt;br/&gt;		&lt;p&gt;To see the Names of the students extracted from XML file click the button given below :&lt;/p&gt;		&lt;input type=&quot;submit&quot; id=&quot;submit&quot;/&gt;  		&lt;div id=&quot;message&quot;&gt;&lt;/div&gt;	&lt;/body&gt;&lt;/html&gt;
student.xmlæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;&lt;school&gt;  &lt;student&gt;    &lt;roll&gt;101&lt;/roll&gt;    &lt;name&gt;      &lt;first-name&gt;Anil&lt;/first-name&gt;      &lt;last-name&gt;Sharma&lt;/last-name&gt;    &lt;/name&gt;    &lt;address&gt;      &lt;street&gt;        22/10 Sri Nagar Road      &lt;/street&gt;      &lt;city&gt;        Ajmer      &lt;/city&gt;      &lt;state&gt;        Rajasthan      &lt;/state&gt;    &lt;/address&gt;    &lt;marks&gt;      85    &lt;/marks&gt;   &lt;/student&gt;    &lt;student&gt;    &lt;roll&gt;102&lt;/roll&gt;    &lt;name&gt;      &lt;first-name&gt;Manoj&lt;/first-name&gt;      &lt;last-name&gt;Arora&lt;/last-name&gt;    &lt;/name&gt;    &lt;address&gt;      &lt;street&gt;        H.No 11-B Alwar Gate      &lt;/street&gt;      &lt;city&gt;        Ajmer      &lt;/city&gt;      &lt;state&gt;        Rajasthan      &lt;/state&gt;    &lt;/address&gt;    &lt;marks&gt;      92    &lt;/marks&gt;  &lt;/student&gt;&lt;/school&gt;

ç»“æŸè¯­ä»¥ä¸Šä¾‹å­ï¼Œå…¨éƒ¨æ‘˜è‡ªã€ŠjQueryæ”»ç•¥ã€‹ï¼Œä¸è¯¦è§£ï¼Œçœ‹ä»£ç ï¼
å‚è€ƒæ–‡æ¡£æç‚æ¢çš„jQueryè§†é¢‘æ•™ç¨‹ã€ŠjQueryæ”»ç•¥ï¼ˆä½œè€…B.M.Harwaniï¼‰ã€‹ã€ŠjQueryå®æˆ˜ï¼ˆä½œè€…Bear Bibeaultã€Yehuda Katzï¼‰ã€‹ã€ŠjQueryé«˜çº§ç¼–ç¨‹ï¼ˆä½œè€… Cesar Oteroã€Rob Larsenï¼‰ã€‹ã€ŠjQuery Javascript ä¸CSSå¼€å‘å…¥é—¨ç»å…¸ï¼ˆä½œè€…Richard Yorkï¼‰ã€‹
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>javascript</tag>
        <tag>jquery</tag>
        <tag>ajax</tag>
      </tags>
  </entry>
  <entry>
    <title>jQueryå­¦ä¹ ç¬”è®°â€”â€”äº‹ä»¶ç¯‡</title>
    <url>/dev-jquery-event/</url>
    <content><![CDATA[å‰è¨€ä»»ä½•åŸºäºGUIçš„ç°ä»£åº”ç”¨ç¨‹åºéƒ½æ˜¯åŸºäºäº‹ä»¶é©±åŠ¨çš„ï¼ŒWebåº”ç”¨ç¨‹åºä¹Ÿä¸ä¾‹å¤–ã€‚
æ‰€æœ‰äº‹ä»¶é©±åŠ¨çš„åº”ç”¨ç¨‹åºéƒ½é‡‡ç”¨ç›¸åŒçš„å·¥ä½œæ¨¡å¼ï¼šå»ºç«‹äº‹ä»¶æœºåˆ¶ã€ç­‰å¾…ç›¸å…³äº‹ä»¶å‘ç”Ÿï¼ˆæ¯”å¦‚é¼ æ ‡å•å‡»ï¼‰ã€å¯¹è¯¥äº‹ä»¶åšå‡ºç›¸åº”ã€‚
æµè§ˆå™¨äº‹ä»¶æ¨¡å‹å¿†è‹¦æ€ç”œï¼Œå…ˆäº†è§£ä¸€ä¸‹ä¼ ç»Ÿçš„äº‹ä»¶æ¨¡å‹çš„ç¼ºç‚¹ï¼Œæˆ‘ä»¬æ‰èƒ½æ˜ç™½æ”¹é©å¼€æ”¾æ˜¯å¤šä¹ˆå¥½çš„æ”¿ç­–ï¼
DOMç¬¬0çº§äº‹ä»¶æ¨¡å‹ä¹Ÿè®¸ä½ å¬è¯´è¿‡ç½‘æ™¯äº‹ä»¶æ¨¡å‹ã€åŸºæœ¬äº‹ä»¶æ¨¡å‹ã€æµè§ˆå™¨äº‹ä»¶æ¨¡å‹ï¼Œä½†æ˜¯å¤§å¤šæ•°äººç§°å…¶ä¸ºDOMç¬¬0çº§äº‹ä»¶æ¨¡å‹ã€‚
ä¸ºä»€ä¹ˆç§°å…¶ä¸ºç¬¬0çº§äº‹ä»¶æ¨¡å‹å‘¢ï¼Ÿå› ä¸ºï¼Œè™½ç„¶è¯¥æ¨¡å‹å¹¶ä¸æ˜¯ä¸€ä¸ªæ­£å¼çš„æ ‡å‡†ï¼Œä½†æ˜¯æ‰€æœ‰ä¸»æµçš„æµè§ˆå™¨éƒ½ä¸ä¹‹å…¼å®¹ã€‚è€Œä¸”ï¼Œæ‰€æœ‰çš„ç°ä»£æµè§ˆå™¨ä¾ç„¶æ”¯æŒè¿™ç§æ¨¡å‹ã€‚


æ’æ’­å¹¿å‘Šå‡ ä¹æ‰€æœ‰çš„æ ‡å‡†ã€åè®®ã€è§„èŒƒï¼Œéƒ½æ˜¯åœ¨ä¸€é—¨æŠ€æœ¯å‡ºç°ç”šè‡³æˆç†Ÿä¹‹åï¼Œæ‰ä¼šå½¢æˆã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½è´£æ€ªW3Cç»„ç»‡ï¼Œæ²¡æœ‰åŠæ—¶ç»™ç½‘æ™¯æ¨å‡ºçš„äº‹ä»¶æ¨¡å‹ä¸€ä¸ªååˆ†ï¼Œæ¯•ç«ŸæŠ€æœ¯è¦é¢†å…ˆäºæ ‡å‡†ã€‚
DOMç¬¬2çº§äº‹ä»¶æ¨¡å‹ç­‰ä¸€ä¸‹ï¼Ÿvoidï¼Œä½ æ˜¯ä¸æ˜¯æŠŠDOMç¬¬1çº§äº‹ä»¶æ¨¡å‹æ¼æ‰äº†ï¼Ÿæ²¡æœ‰æ¼æ‰ï¼Œå› ä¸ºæ²¡æœ‰DOMç¬¬1çº§äº‹ä»¶æ¨¡å‹ã€‚DOMçº§åˆ«1äº1998å¹´10æœˆæˆä¸ºW3Cæ¨èæ ‡å‡†ï¼Œä½†æ˜¯ï¼Œè¯¥æ ‡å‡†ä¸­å¹¶æ²¡æœ‰å®šä¹‰äº‹ä»¶ç›¸å…³çš„å†…å®¹ã€‚ç›´åˆ°2000å¹´11æœˆï¼ŒDOMçº§åˆ«2è¢«å¼•å…¥æ—¶ï¼ŒW3Cæ‰çœŸæ­£ä¸ºäº‹ä»¶å¤„ç†å»ºç«‹äº†æ ‡å‡†æ¨¡å‹ã€‚
è¿™ä¸ªæ¨¡å‹å¾—åˆ°äº†æ‰€æœ‰æ ‡å‡†å…¼å®¹çš„ç°ä»£æµè§ˆå™¨çš„æ”¯æŒï¼Œæ¯”å¦‚Firefoxã€Safariã€Operaç­‰ã€‚IEæµè§ˆå™¨ç‰¹ç«‹ç‹¬è¡Œï¼Œå®ƒæ”¯æŒDOMç¬¬2çº§äº‹ä»¶æ¨¡å‹çš„ä¸€ä¸ªåŠŸèƒ½å­é›†ã€‚
IEäº‹ä»¶æ¨¡å‹åˆšæ‰è¯´åˆ°ï¼ŒIEä¸æ”¯æŒDOMç¬¬2çº§äº‹ä»¶æ¨¡å‹ã€‚IEä¸ºæ¯ä¸ªDOMå…ƒç´ å®šä¹‰äº†ä¸€ä¸ªåä¸ºattachEvent()çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯addEventListener()ã€‚
å°ç»“ä»¥ä¸Šä½ å¯ä»¥è®¤ä¸ºæ˜¯åºŸè¯â€¦â€¦æ€»è€Œè¨€ä¹‹ï¼Œæƒ³è¦ä½¿ç”¨äº‹ä»¶æ¨¡å‹ï¼Œä¸å¾—ä¸è€ƒè™‘åˆ°å…¼å®¹é—®é¢˜ï¼Œéå¸¸éº»çƒ¦ï¼è¿™æ—¶ï¼Œæˆ‘ä»¬çš„jQueryäº‹ä»¶æ¨¡å‹åä¸½ç™»åœºï¼
jQueryäº‹ä»¶æ¨¡å‹ï¼ŒjQueryæŠŠä¸ä¸€è‡´çš„ä»£ç ä»é¡µé¢ä»£ç ä¸­æå–å‡ºæ¥ï¼Œå°†å…¶éšè—åœ¨APIä¸­ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ç»ˆäºä¸ç”¨å†å»è€ƒè™‘å…¼å®¹æ€§é—®é¢˜ï¼
ä½¿ç”¨jQueryç»‘å®šäº‹ä»¶å¤„ç†å™¨&lt;html&gt;	&lt;head&gt;			&lt;meta charset=&quot;UTF-8&quot;&gt;		&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.10.2.js&quot;&gt;&lt;/script&gt;		&lt;script type=&quot;text/javascript&quot;&gt;			$(function()&#123;				$(&quot;img&quot;).bind(&quot;click&quot;,function()&#123;alert(&quot;hello voidking&quot;);&#125;);			&#125;);		&lt;/script&gt;	&lt;/head&gt;	&lt;body&gt;		&lt;img src=&quot;./head.jpg&quot; alt=&quot;å¤´åƒ&quot;/&gt;			&lt;/body&gt;&lt;/html&gt;
&lt;html&gt;	&lt;head&gt;			&lt;meta charset=&quot;UTF-8&quot;&gt;		&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.10.2.js&quot;&gt;&lt;/script&gt;		&lt;script type=&quot;text/javascript&quot;&gt;			$(function()&#123;				$(&quot;#voidking&quot;)				.bind(&quot;click&quot;,function()&#123;					alert(&quot;hello voidking once!&quot;);				&#125;)				.bind(&quot;click&quot;,function()&#123;					alert(&quot;hello voidking twice!&quot;);				&#125;)				.bind(&quot;click&quot;,function()&#123;					alert(&quot;hello voidking three times!&quot;);				&#125;);			&#125;);		&lt;/script&gt;	&lt;/head&gt;	&lt;body&gt;		&lt;img id=&quot;voidking&quot; src=&quot;./head.jpg&quot; alt=&quot;å¤´åƒ&quot;/&gt;			&lt;/body&gt;&lt;/html&gt;
ç”±ä¸Šé¢ä¸¤æ®µä»£ç æˆ‘ä»¬å‘ç°ï¼Œç»‘å®šäº‹ä»¶å¾ˆç®€å•ï¼Œåªéœ€è¦ä¸€ä¸ªbind()å‡½æ•°ã€‚è€Œä¸”ï¼Œä¸€ä¸ªäº‹ä»¶å¯ä»¥å¯¹åº”å¤šä¸ªå¤„ç†å™¨ã€‚é™¤äº†bind()å‡½æ•°ï¼ŒjQueryè¿˜ä¸ºåˆ›å»ºç‰¹å®šçš„äº‹ä»¶å¤„ç†å™¨æä¾›äº†ä¸€äº›ä¾¿æ·æ–¹æ³•ã€‚æ¯”å¦‚oneã€focusinã€focusoutç­‰ã€‚
åˆ é™¤äº‹ä»¶å¤„ç†å™¨åˆ›å»ºäº†ä¸€ä¸ªäº‹ä»¶å¤„ç†å™¨ï¼Œé‚£ä¹ˆå®ƒåœ¨é¡µé¢å‰©ä½™çš„ç”Ÿå‘½å‘¨æœŸé‡Œå°±æ˜¯æœ‰æ•ˆçš„ã€‚ä½†æ˜¯ä¸€äº›ç‰¹æ®Šçš„äº¤äº’ï¼Œè¦æ±‚æ ¹æ®ä¸€å®šæ ‡å‡†åˆ é™¤å¤„ç†å™¨ã€‚è¿™æ—¶æˆ‘ä»¬å°±è¦ç”¨åˆ°unbind()å‡½æ•°ï¼ŒjQueryè€ƒè™‘çš„å¾ˆå‘¨åˆ°å•Šï¼
&lt;html&gt;	&lt;head&gt;			&lt;meta charset=&quot;UTF-8&quot;&gt;		&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.10.2.js&quot;&gt;&lt;/script&gt;		&lt;script type=&quot;text/javascript&quot;&gt;			$(function()&#123;				$(&quot;#voidking1&quot;).bind(&quot;click.voidking&quot;,function()&#123;					alert(&quot;hello voidking1&quot;);					$(&quot;*&quot;).unbind(&#x27;click.voidking&#x27;);				&#125;);								$(&quot;#voidking2&quot;).bind(&quot;click.voidking&quot;,function()&#123;					alert(&quot;hello voidking2&quot;);					$(&quot;*&quot;).unbind(&#x27;click.voidking&#x27;);				&#125;);							&#125;);		&lt;/script&gt;	&lt;/head&gt;	&lt;body&gt;		&lt;img id=&quot;voidking1&quot; src=&quot;./head.jpg&quot; alt=&quot;å¤´åƒ&quot;/&gt;		&lt;img id=&quot;voidking2&quot; src=&quot;./head.jpg&quot; alt=&quot;å¤´åƒ&quot;/&gt;			&lt;/body&gt;&lt;/html&gt;
ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªæ•ˆæœï¼šæœ‰ä»»ä½•ä¸€å¼ å›¾ç‰‡è¢«ç‚¹å‡»äº†ä¸€æ¬¡ï¼Œé‚£ä¹ˆä¸¤å¼ å›¾éƒ½ä¸å¯ä»¥å†è¢«ç‚¹å‡»ã€‚
Eventå®ä¾‹ä½¿ç”¨bind()æ–¹æ³•ï¼Œæ— è®ºæ˜¯ä»€ä¹ˆæµè§ˆå™¨ï¼ŒEventå®ä¾‹éƒ½ä¼šä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥å‡½æ•°ã€‚
é‚£ä¹ˆï¼Œæ€ä¹ˆå¤„ç†ä¸åŒæµè§ˆå™¨ä¸­Eventå®ä¾‹ä¸­å±æ€§çš„å·®å¼‚å‘¢ï¼ŸåŸæ¥ï¼ŒjQueryå®šä¹‰äº†ä¸€ä¸ªjQuery.Eventå¯¹è±¡ï¼ŒçœŸæ­£ä¼ å…¥çš„å‡½æ•°çš„ï¼Œæ˜¯è¿™ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡å¤åˆ¶äº†å¤§éƒ¨åˆ†åŸå§‹Eventçš„å±æ€§ï¼Œå¿½ç•¥äº†Eventå®ä¾‹çš„å·®å¼‚æ€§ã€‚å°±åƒæ˜¯ä¸€ä¸ªæ¥å£ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç®¡å®ƒæ€ä¹ˆå®ç°ï¼Œåªè¦è°ƒç”¨å°±å¥½äº†ï¼
é¢„å…ˆç®¡ç†äº‹ä»¶å¤„ç†å™¨å½“æ··åˆä½¿ç”¨Ajaxæ—¶ï¼Œæˆ‘ä»¬å¯èƒ½åœ¨é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸå†…é¢‘ç¹å¼•å…¥DOMå…ƒç´ æˆ–åˆ é™¤å®ƒä»¬ã€‚åœ¨ç®¡ç†è¿™äº›åŠ¨æ€å…ƒç´ çš„äº‹ä»¶å¤„ç†å™¨æ—¶ï¼Œå°±ç»ªå¤„ç†å™¨å°±èµ·ä¸åˆ°å¤šå¤§ä½œç”¨äº†ï¼Œå› ä¸ºè¿™äº›åŠ¨æ€å…ƒç´ åœ¨å°±ç»ªå¤„ç†å™¨æ‰§è¡Œæ—¶è¿˜ä¸å­˜åœ¨ã€‚
jQueryæä¾›äº†live()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å…è®¸é¢„å…ˆä¸ºé‚£äº›ä¸å­˜åœ¨çš„å…ƒç´ åˆ›å»ºäº‹ä»¶å¤„ç†å™¨ã€‚å®ƒçš„è¯­æ³•å’Œbind()éå¸¸ç›¸ä¼¼ï¼Œçœ‹ä¸Šå»ä¼¼ä¹æ¯”bind()æ›´åŠ å¼ºå¤§ï¼Œé‚£ä¹ˆï¼Œç”¨live()ä»£æ›¿bind()ä¸å°±å¥½äº†å—ï¼Ÿä¸æ˜¯çš„ï¼Œé¦–å…ˆï¼Œâ€œliveâ€äº‹ä»¶ä¸æ˜¯åŸç”Ÿçš„â€œæ™®é€šâ€äº‹ä»¶ã€‚å…¶æ¬¡ï¼Œlive()æ–¹æ³•åªèƒ½åº”ç”¨äºé€‰æ‹©å™¨ï¼Œä¸èƒ½åº”ç”¨äºè¡ç”Ÿè€Œæ¥çš„åŒ…è£…é›†ã€‚
è¿™é‡Œä¸å†ä¸¾ä¾‹ï¼Œä¸‹é¢çš„Ajaxä¼šè¯¦ç»†æ¢è®¨ã€‚
live()åˆ›å»ºçš„é€‰æ‹©å™¨å¯ä»¥ä½¿ç”¨die()æ–¹æ³•æ¥è§£é™¤ç»‘å®šï¼Œè¯­æ³•å’Œunbind()ç›¸ä¼¼ã€‚
è§¦å‘äº‹ä»¶å¤„ç†å™¨è§¦å‘äº‹ä»¶ï¼Œå¬èµ·æ¥å°±å¾ˆéš¾æ‡‚çš„æ ·å­ï¼Œæˆ‘ä»¬æ¢ä¸ªè¯´æ³•ï¼šæ¨¡æ‹Ÿç”¨æˆ·åŠ¨ä½œã€‚æ¯”å¦‚ç‚¹å‡»ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä»£ç å»æ¨¡æ‹Ÿç”¨æˆ·ç‚¹å‡»ï¼Œè¾¾åˆ°çš„æ•ˆæœä¸çœŸå®çš„é¼ æ ‡ç‚¹å‡»æ˜¯ä¸€æ ·çš„ã€‚
&lt;html&gt;	&lt;head&gt;			&lt;meta charset=&quot;UTF-8&quot;&gt;		&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.10.2.js&quot;&gt;&lt;/script&gt;		&lt;script type=&quot;text/javascript&quot;&gt;			$(function()&#123;				$(&quot;#voidking&quot;).bind(&quot;click&quot;,function()&#123;					alert(&quot;hello voidking&quot;);				&#125;);									$(&quot;#voidking&quot;).click();//æ¨¡æ‹Ÿç”¨æˆ·å•å‡»äº‹ä»¶				$(&quot;#voidking&quot;).trigger(&quot;click&quot;);//æ¨¡æ‹Ÿç”¨æˆ·å•å‡»äº‹ä»¶				$(&quot;p&quot;).bind(&quot;myEvent&quot;, function (event, message1, message2) &#123;					alert(message1 + &#x27; &#x27; + message2);				&#125;);				$(&quot;p&quot;).trigger(&quot;myEvent&quot;, [&quot;hello&quot;,&quot;trigger&quot;]);	//å¼¹å‡ºä¸¤æ¬¡						$(&#x27;p&#x27;).triggerHandler(&quot;myEvent&quot;,[&quot;hello&quot;,&quot;triggerHandler&quot;]); //å¼¹å‡ºä¸€æ¬¡ï¼Œåªè§¦å‘ç¬¬ä¸€ä¸ªpå…ƒç´ 								$(&quot;input&quot;).select(function()&#123;								&#125;);				$(&quot;#trigger&quot;).click(function()&#123;					$(&quot;input&quot;).trigger(&quot;select&quot;);//è§¦å‘selectäº‹ä»¶ï¼Œæ‰§è¡Œselecté»˜è®¤æ“ä½œå’Œselectå¤„ç†å™¨å†…æ“ä½œ				&#125;);				$(&quot;#triggerHandler&quot;).click(function()&#123;					$(&quot;input&quot;).triggerHandler(&quot;select&quot;);//è§¦å‘selectäº‹ä»¶ï¼Œä½†æ˜¯ä¸ä¼šæ‰§è¡Œselecté»˜è®¤æ“ä½œ				&#125;);			&#125;);			&lt;/script&gt;	&lt;/head&gt;	&lt;body&gt;		&lt;img id=&quot;voidking&quot; src=&quot;./head.jpg&quot; alt=&quot;å¤´åƒ&quot;/&gt;			&lt;p&gt;&lt;/p&gt;		&lt;p&gt;&lt;/p&gt;		&lt;input type=&quot;text&quot;  value=&quot;hello voidking&quot; /&gt;		&lt;br /&gt;		&lt;button id=&quot;trigger&quot;&gt;æ¿€æ´»selectäº‹ä»¶ï¼ŒåŒæ—¶é€‰ä¸­æ–‡æœ¬&lt;/button&gt;&lt;/br&gt;		&lt;button id=&quot;triggerHandler&quot;&gt;æ¿€æ´»selectäº‹ä»¶ï¼Œä¸é€‰ä¸­æ–‡æœ¬&lt;/button&gt;	&lt;/body&gt;&lt;/html&gt;
ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼ŒåŸºæœ¬ä¸Šæ¶µç›–äº†è§¦å‘äº‹ä»¶ç®¡ç†å™¨çš„æ‰€æœ‰çŸ¥è¯†ç‚¹ã€‚è¿™é‡Œä¸è¯¦ç»†è§£é‡Šäº†ï¼Œè‡ªå·±çœ‹æ³¨é‡Šï¼Œä¸æ‡‚çš„è¯·ç™¾åº¦æˆ–ç•™è¨€ã€‚
æ›´å¤štoggle: è¿™ä¸ªæ–¹æ³•åœ¨jQuery 1.8ä¸­å®£å‘Šè¿‡æ—¶ï¼Œåœ¨jQuery 1.9ä¸­å·²ç»ç§»é™¤ã€‚ä¸ºäº†å†™å‡ºä¸€ä¸ªå›¾ç‰‡å¤§ä¸­å°åˆ‡æ¢æ•ˆæœï¼Œå„ç§ç™¾åº¦è°·æ­Œï¼Œæœ€ç»ˆæ²¡æå‡ºæ¥ã€‚å¼€å§‹æ€€ç–‘ï¼Œtoggleè¿‡æ—¶äº†ï¼Œç»è¿‡æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œæœç„¶ï¼æˆ‘é ï¼Œå„ä½å¤§ç¥ï¼Œä½ ä»¬13ã€14å¹´å†™çš„æ•™ç¨‹ï¼Œå±…ç„¶ä½¿ç”¨è¿‡æ—¶çš„ä»£ç â€¦â€¦è¿˜æœ‰ä½ ï¼Œw3schoolï¼Œè¯¥æ›´æ–°äº†å¤§å“¥ï¼
ç»“æŸè¯­ä»¥ä¸Šæ€»ç»“ä¸å¯èƒ½é¢é¢ä¿±åˆ°ï¼Œå·®ä¸å¤šäº†ï¼Œå°±å†™åˆ°è¿™å„¿å§ï¼
å‚è€ƒæ–‡æ¡£æç‚æ¢çš„jQueryè§†é¢‘æ•™ç¨‹ã€ŠjQueryæ”»ç•¥ï¼ˆä½œè€…B.M.Harwaniï¼‰ã€‹ã€ŠjQueryå®æˆ˜ï¼ˆä½œè€…Bear Bibeaultã€Yehuda Katzï¼‰ã€‹ã€ŠjQueryé«˜çº§ç¼–ç¨‹ï¼ˆä½œè€… Cesar Oteroã€Rob Larsenï¼‰ã€‹ã€ŠjQuery Javascript ä¸CSSå¼€å‘å…¥é—¨ç»å…¸ï¼ˆä½œè€…Richard Yorkï¼‰ã€‹
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>javascript</tag>
        <tag>jquery</tag>
      </tags>
  </entry>
  <entry>
    <title>jQueryå­¦ä¹ ç¬”è®°â€”â€”é€‰æ‹©å™¨ç¯‡</title>
    <url>/dev-jquery-selector/</url>
    <content><![CDATA[é€‰æ‹©å™¨è¯­æ³•jQueryé€‰æ‹©å…ƒç´ çš„è¯­æ³•ä¸ºï¼š$(selector,[content]);
å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é€‰æ‹©å™¨ï¼Œé‚£ä¹ˆç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯æŒ‡ç¤ºè¯¥æ“ä½œçš„ä¸Šä¸‹æ–‡ï¼Œé»˜è®¤ä¸ºæ•´ä¸ªDOMæ–‡æ¡£ã€‚ä¸Šä¸‹æ–‡å‚æ•°å¯ä»¥æ˜¯DOMå…ƒç´ çš„å¼•ç”¨ï¼Œä¹Ÿå¯ä»¥åŒ…å«jQueryé€‰æ‹©å™¨çš„å­—ç¬¦ä¸²ï¼Œæˆ–è€…æ˜¯DOMå…ƒç´ åŒ…è£…é›†ã€‚
ä¸Šæ–‡hello voidkingä¸­çš„htmlæ–‡ä»¶å†…å®¹ä¿®æ”¹ä¸ºï¼š
&lt;html&gt;&lt;head&gt;		&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.10.2.js&quot;&gt;&lt;/script&gt;	&lt;script type=&quot;text/javascript&quot;&gt;		$(function()&#123;			$(&quot;p&quot;,&quot;div#voidking&quot;).css(&quot;color&quot;,&quot;red&quot;);		&#125;);	&lt;/script&gt;&lt;/head&gt;&lt;body&gt;	&lt;div id=&quot;voidking&quot;&gt;		&lt;p&gt;			welcome to jQuery world !		&lt;/p&gt;	&lt;/div&gt;	&lt;p&gt;		welcome to jQuery world !	&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œæˆ‘ä»¬å‘ç°ï¼Œåªæœ‰ç¬¬ä¸€è¡Œæ˜¯çº¢è‰²çš„ã€‚è¿™æ˜¯å› ä¸ºï¼Œ$(â€œpâ€,â€div#voidkingâ€)æŒ‡å®šçš„èŒƒå›´æ˜¯ï¼šidå€¼ä¸ºvoidkingçš„å…ƒç´ å†…ã€‚
CSSåŸºæœ¬é€‰æ‹©å™¨idé€‰æ‹©å™¨è·å–ä¸€ä¸ªidä¸ºvoidkingçš„å…ƒç´ ã€‚
åœ¨CSSä¸­ï¼š
#voidking&#123;	color:red;&#125;
åœ¨jQueryä¸­ï¼š
$(&quot;#voidking&quot;).css(&quot;color&quot;,&quot;red&quot;);
classé€‰æ‹©å™¨è·å–æ‰€æœ‰classä¸ºvoidkingçš„å…ƒç´ ã€‚
åœ¨CSSä¸­ï¼š
.voidking&#123;	color:red;&#125;
åœ¨jQueryä¸­ï¼š
$(&quot;.voidking&quot;).css(&quot;color&quot;,&quot;red&quot;);
æ ‡ç­¾é€‰æ‹©å™¨è·å–æ‰€æœ‰æ ‡ç­¾åä¸ºdivçš„å…ƒç´ ã€‚
åœ¨CSSä¸­ï¼š
div&#123;	color:red;&#125;
åœ¨jQueryä¸­ï¼š
$(&quot;div&quot;).css(&quot;color&quot;,&quot;red&quot;);
ç¾¤ç»„é€‰æ‹©å™¨è·å–æ ‡ç­¾åä¸ºspanã€emå’Œclassä¸ºvoidkingçš„æ‰€æœ‰å…ƒç´ ã€‚
åœ¨CSSä¸­ï¼š
span,em,.voidking&#123;	color:red;&#125;
åœ¨jQueryä¸­ï¼š
$(&quot;span,em,.voidking&quot;).css(&quot;color&quot;,&quot;red&quot;);

åä»£é€‰æ‹©å™¨è·å–æ ‡ç­¾åä¸ºulä¸‹çš„æ ‡ç­¾åä¸ºliä¸‹çš„æ ‡ç­¾åä¸ºaçš„æ‰€æœ‰å…ƒç´ ã€‚
åœ¨CSSä¸­ï¼š
ul li a&#123;	color:red;&#125;
åœ¨jQueryä¸­ï¼š
$(&quot;ul li a&quot;).css(&quot;color&quot;,&quot;red&quot;);
æˆ–è€…
$(&quot;ul&quot;).find(&quot;li&quot;).find(&quot;a&quot;).css(&quot;color&quot;, &quot;red&quot;);

é€šé…é€‰æ‹©å™¨è·å–æ‰€æœ‰å…ƒç´ ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨ã€‚
åœ¨CSSä¸­ï¼š
*&#123;	color:red;&#125;
åœ¨jQueryä¸­ï¼š
$(&quot;*&quot;).css(&quot;color&quot;,&quot;red&quot;);

ç»„åˆä¸Šé¢çš„å…­ç§é€‰æ‹©å™¨ï¼Œå·²ç»å¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†çš„é€‰æ‹©éœ€è¦ã€‚è€Œå®ƒä»¬è¿˜å¯ä»¥ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚
$(&quot;div.voidking,ul li a&quot;).css(&quot;color&quot;,&quot;red&quot;);

CSSé«˜çº§é€‰æ‹©å™¨å­é€‰æ‹©å™¨é€‰æ‹©idä¸ºvoidkingçš„å…ƒç´ ä¸‹ï¼Œå­æ ‡ç­¾ä¸ºpçš„å…ƒç´ ã€‚
åœ¨CSSä¸­ï¼š
#voidking &gt; p&#123;	color:red;&#125;
åœ¨jQueryä¸­ï¼š
$(&quot;#voidking &gt; p&quot;).css(&quot;color&quot;,&quot;red&quot;);
æˆ–è€…
$(&quot;#voidking&quot;).children(&quot;p&quot;).css(&quot;color&quot;, &quot;red&quot;);

åŒçº§ä¸‹ä¸€ä¸ªé€‰æ‹©å™¨é€‰æ‹©å’Œidä¸ºvoidkingçš„å…ƒç´ åŒçº§çš„ï¼Œä¸‹ä¸€ä¸ªæ ‡ç­¾ä¸ºpçš„å…ƒç´ ã€‚
åœ¨CSSä¸­ï¼š
#voidking + p&#123;	color:red;&#125;
åœ¨jQueryä¸­ï¼š
$(&quot;#voidking + p&quot;).css(&quot;color&quot;,&quot;red&quot;);
æˆ–è€…
$(&quot;#voidking&quot;).next(&quot;p&quot;).css(&quot;color&quot;, &quot;red&quot;);

åŒçº§æ‰€æœ‰ä¸‹é¢é€‰æ‹©å™¨é€‰æ‹©å’Œidä¸ºvoidkingçš„å…ƒç´ åŒçº§çš„ï¼Œä¸‹é¢æ‰€æœ‰æ ‡ç­¾ä¸ºpçš„å…ƒç´ ã€‚
åœ¨CSSä¸­ï¼š
#voidking ~ p&#123;	color:red;&#125;
åœ¨jQueryä¸­ï¼š
$(&quot;#voidking ~ p&quot;).css(&quot;color&quot;,&quot;red&quot;);
æˆ–è€…
$(&quot;#voidking&quot;).nextAll(&quot;p&quot;).css(&quot;color&quot;, &quot;red&quot;);
PSåœ¨find()ã€children()ã€next()ã€nextAll()å››ä¸ªå‡½æ•°ä¸­ï¼Œå¦‚æœä¸ä¼ å…¥å‚æ•°ï¼Œé»˜è®¤ä¸ºâ€*â€ã€‚
å»ºè®®ä½¿ç”¨æ–¹æ³•è€Œä¸æ˜¯ç¬¦å·ï¼Œç†è®ºä¸Šè®²ï¼Œä½¿ç”¨æ–¹æ³•çš„æ•ˆç‡é«˜äºä½¿ç”¨ç¬¦å·ï¼Œè€Œä¸”ï¼Œä½¿ç”¨æ–¹æ³•æ›´åŠ æ˜“è¯»æ˜“æ‡‚ã€‚
æ¥ä¸‹æ¥çš„é€‰æ‹©å™¨å°±æ²¡æœ‰ç±»ä¼¼äºâ€ â€œã€â€&gt;â€ã€â€+â€ã€â€~â€è¿™æ ·çš„ç¬¦å·äº†ï¼Œå…¨éƒ¨ç”±å‡½æ•°æ¥å®Œæˆã€‚
åŒçº§ä¸Šä¸€ä¸ªé€‰æ‹©å™¨é€‰æ‹©å’Œidä¸ºvoidkingçš„å…ƒç´ åŒçº§çš„ï¼Œä¸Šä¸€ä¸ªæ ‡ç­¾ä¸ºpçš„å…ƒç´ ã€‚
$(&quot;#voidking&quot;).prev(&quot;p&quot;).css(&quot;color&quot;, &quot;red&quot;);
åŒçº§æ‰€æœ‰ä¸Šé¢é€‰æ‹©å™¨é€‰æ‹©å’Œidä¸ºvoidkingçš„å…ƒç´ åŒçº§çš„ï¼Œä¸Šé¢æ‰€æœ‰æ ‡ç­¾ä¸ºpçš„å…ƒç´ ã€‚
$(&quot;#voidking&quot;).prevAll(&quot;p&quot;).css(&quot;color&quot;, &quot;red&quot;);
åŒçº§ä¸Šä¸‹æ‰€æœ‰é€‰æ‹©å™¨$(&quot;#voidking&quot;).siblings(&quot;p&quot;).css(&quot;color&quot;, &quot;red&quot;);
ç­‰ä»·äº
$(&quot;#voidking&quot;).prevAll(&quot;p&quot;).css(&quot;color&quot;, &quot;red&quot;);$(&quot;#voidking&quot;).nextAll(&quot;p&quot;).css(&quot;color&quot;, &quot;red&quot;);
éæŒ‡å®šé€‰æ‹©å™¨åŒçº§ä¸Šã€ä¸‹éæŒ‡å®šå…ƒç´ é€‰å®šï¼Œé‡åˆ°åˆ™åœæ­¢ã€‚
$(&quot;#voidking&quot;).prevUntil(&quot;p&quot;).css(&quot;color&quot;, &quot;red&quot;);$(&quot;#voidking&quot;).nextUntil(&quot;p&quot;).css(&quot;color&quot;, &quot;red&quot;);

å±æ€§é€‰æ‹©å™¨ç²¾ç¡®åŒ¹é…$(&#x27;[id=&#x27;voidking&#x27;]&#x27;).css(&quot;color&quot;,&#x27;red&#x27;);
$(&#x27;div[id=&#x27;voidking&#x27;]&#x27;).css(&quot;color&quot;,&#x27;red&#x27;);

ç²¾ç¡®ä¸åŒ¹é…$(&quot;p[class != &#x27;voidking&#x27;]&quot;).css(&quot;color&quot;,&#x27;red&#x27;);

åŒ¹é…å¼€å¤´$(&quot;[id ^= &#x27;void&#x27;]&quot;).css(&quot;color&quot;,&quot;red&quot;);

åŒ¹é…ç»“å°¾$(&quot;[id $= &#x27;king&#x27;]&quot;).css(&quot;color&quot;,&quot;red&quot;);

å…¶ä»–


CSSé€‰æ‹©å™¨
jQueryé€‰æ‹©å™¨
æè¿°



elem[id]
$(â€œelem[id]â€)
é€‰æ‹©å…·æœ‰idå±æ€§çš„å…ƒç´ 


elem[id |= â€˜voidâ€™]
$(â€œelem[id\
= â€˜voidâ€™]â€)


elem[class ~= â€˜voidkingâ€™]
$(â€œelem[id ~= â€˜voidkingâ€™]â€)
é€‰æ‹©å…·æœ‰classå±æ€§ï¼Œä¸”å±æ€§å€¼æ˜¯ä¸€ä¸ªä»¥ç©ºæ ¼åˆ†æ ¼çš„åˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«voidkingçš„å…ƒç´ 


elem[id *= â€˜oidkiâ€™]
$(â€œelem[id *= â€˜oidkiâ€™]â€)
é€‰æ‹©å…·æœ‰idå±æ€§,ä¸”å±æ€§å€¼ä¸­åŒ…å«â€oidkiâ€å­—ä¸²çš„å…ƒç´ 


è¿‡æ»¤é€‰æ‹©å™¨ä½ç½®é€‰æ‹©å™¨


jQueryé€‰æ‹©å™¨
æè¿°



$(â€œli:firstâ€)
è¿”å›åŒ¹é…é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ 


$(â€œli:lastâ€)
è¿”å›åŒ¹é…é›†åˆçš„æœ€åä¸€ä¸ªå…ƒç´ 


$(â€œli:oddâ€)
è¿”å›åŒ¹é…é›†åˆçš„å¥‡æ•°æˆå‘˜


$(â€œli:evenâ€)
è¿”å›åŒ¹é…é›†åˆçš„å¶æ•°æˆå‘˜


$(â€œli:eq(3)â€)
è¿”å›åŒ¹é…é›†åˆçš„ç´¢å¼•å€¼ç­‰äº3çš„å…ƒç´ ï¼ˆç¬¬4ä¸ªå…ƒç´ ï¼‰


$(â€œli:not(3)â€)
è¿”å›åŒ¹é…é›†åˆçš„ç´¢å¼•å€¼ä¸ç­‰äº3çš„æ‰€æœ‰å…ƒç´ 


$(â€œli:gt(2)â€)
è¿”å›åŒ¹é…é›†åˆçš„ç´¢å¼•å€¼å¤§äº2çš„æ‰€æœ‰å…ƒç´ 


$(â€œli:lt(3)â€)
è¿”å›åŒ¹é…é›†åˆçš„ç´¢å¼•å€¼å°äº3çš„æ‰€æœ‰å…ƒç´ 


åŸºæœ¬è¿‡æ»¤é€‰æ‹©å™¨åŸºæœ¬è¿‡æ»¤é€‰æ‹©å™¨åŒ…æ‹¬ä½ç½®é€‰æ‹©å™¨ï¼Œæ¯”ä½ç½®é€‰æ‹©å™¨å¤šäº†ä¸€äº›ä¸œä¸œï¼š| è¿‡æ»¤å™¨ |  æè¿° || â€”â€”-  | â€”â€”- || :animated |  é€‰æ‹©å½“å‰æ­£åœ¨æ‰§è¡ŒåŠ¨ç”»çš„æ‰€æœ‰å…ƒç´  || :header |  é€‰æ‹©æ‰€æœ‰çš„æ ‡é¢˜å…ƒç´ ï¼Œæ¯”å¦‚h1ã€h2ã€h3ç­‰ |
è¿‡æ»¤è¡¨å•å…ƒç´ 


è¿‡æ»¤å™¨
æè¿°



:text
é€‰æ‹©æ‰€æœ‰ç±»å‹ä¸ºtextçš„å…ƒç´ 


:password
é€‰æ‹©æ‰€æœ‰ç±»å‹ä¸ºpasswordçš„å…ƒç´ 


:radio
é€‰æ‹©æ‰€æœ‰ç±»å‹ä¸ºradioçš„å…ƒç´ 


:checkbox
é€‰æ‹©æ‰€æœ‰ç±»å‹ä¸ºcheckboxçš„å…ƒç´ 


:checked
åŒ¹é…æ‰€æœ‰å·²è¢«é€‰ä¸­çš„å…ƒç´ 


:image
é€‰æ‹©æ‰€æœ‰ç±»å‹ä¸ºimageçš„å…ƒç´ 


:file
é€‰æ‹©æ‰€æœ‰ç±»å‹ä¸ºfileçš„å…ƒç´ 


:submit
é€‰æ‹©æ‰€æœ‰ç±»å‹ä¸ºsubmitçš„å…ƒç´ 


:reset
é€‰æ‹©æ‰€æœ‰ç±»å‹ä¸ºresetçš„å…ƒç´ 


:button
é€‰æ‹©æ‰€æœ‰buttonå…ƒç´ å’Œç±»å‹ä¸ºbottonçš„å…ƒç´ 


:input
é€‰æ‹©æ‰€æœ‰inputã€textareaã€selectå’Œbuttonå…ƒç´ 


:selected
é€‰æ‹©æ‰€æœ‰ç±»å‹å·²é€‰ä¸­çš„å…ƒç´ 


:enabled
é€‰æ‹©æ‰€æœ‰å¯ç”¨å…ƒç´ 


:disabled
é€‰æ‹©æ‰€æœ‰ä¸å¯ç”¨å…ƒç´ 


å¯è§æ€§è¿‡æ»¤å™¨


è¿‡æ»¤å™¨
æè¿°



:visible
é€‰æ‹©æ‰€æœ‰å¯è§å…ƒç´ 


:hidden
é€‰æ‹©æ‰€æœ‰éšè—å…ƒç´ 


å†…å®¹è¿‡æ»¤å™¨


è¿‡æ»¤å™¨
æè¿°



:contains()
é€‰æ‹©æ‰€æœ‰åŒ…å«ç‰¹å®šæ–‡æœ¬å†…å®¹çš„å…ƒç´ 


:has()
é€‰æ‹©è‡³å°‘å«æœ‰ä¸€ä¸ªå…ƒç´ ä¸åˆ¶å®šé€‰æ‹©å™¨åŒ¹é…çš„å…ƒç´ 


:empty
é€‰æ‹©æ‰€æœ‰ä¸åŒ…å«å­å…ƒç´ æˆ–æ–‡æœ¬çš„ç©ºå…ƒç´ 


:parent
é€‰æ‹©æ‰€æœ‰å«æœ‰å­å…ƒç´ æˆ–æ–‡æœ¬èŠ‚ç‚¹çš„å…ƒç´ 


å…³ç³»è¿‡æ»¤å™¨


è¿‡æ»¤å™¨
æè¿°



:first-child
é€‰æ‹©æ¯ä¸ªçˆ¶å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ 


:last-child
é€‰æ‹©æ¯ä¸ªçˆ¶å…ƒç´ çš„æœ€åä¸€ä¸ªå­å…ƒç´ 


:nth-child
é€‰æ‹©æ¯ä¸ªçˆ¶å…ƒç´ çš„ç¬¬nth-child()ä¸ªå­å…ƒç´ 


:only-child
é€‰æ‹©å…·æœ‰å”¯ä¸€ä¸€ä¸ªå­å…ƒç´ çš„å…ƒç´ 


è‡ªå®šä¹‰é€‰æ‹©å™¨æœ‰äº›æ—¶å€™ï¼ŒjQueryæä¾›çš„é€‰æ‹©å™¨ä¸å¤Ÿç”¨ï¼Œæˆ‘ä»¬å°±éœ€è¦è‡ªå·±åˆ›å»ºé€‰æ‹©å™¨ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬éœ€è¦é€‰æ‹©å…·æœ‰ç»¿è‰²èƒŒæ™¯çš„å…ƒç´ ï¼š
&lt;html&gt;&lt;head&gt;		&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.10.2.js&quot;&gt;&lt;/script&gt;	&lt;script type=&quot;text/javascript&quot;&gt;		$(function()&#123;			//é€šè¿‡æ‰©å±•$.expr[&quot;:&quot;]å®ç°è‡ªå®šä¹‰é€‰æ‹©å™¨			$.expr[&quot;:&quot;].greenbg = function(element)&#123;				return $(element).css(&quot;background-color&quot;) === &quot;green&quot;;			&#125;;				//æ­¤å¤„å…¼å®¹æ€§é—®é¢˜ã€‚è¾“å‡ºåœ¨Firefoxå’ŒIEä¸­æœ‰æ‰€ä¸åŒï¼ŒFirefoxå€¼ä¸º0ï¼ŒIEå€¼ä¸º1ã€‚			alert($(&quot;:greenbg&quot;).length);			$(&quot;:greenbg&quot;).text(&quot;hello voidking&quot;);		&#125;);	&lt;/script&gt;&lt;/head&gt;&lt;body&gt;	&lt;div style=&quot;width:200 ; height:200 ; background-color:green;&quot; &gt;&lt;/div&gt;	&lt;div style=&quot;width:200 ; height:200 ; background-color:red;&quot; &gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
ç»“æŸè¯­æˆ‘é ï¼Œé€‰æ‹©å™¨è¿™å—å®åœ¨æ˜¯å¤ªéš¾æäº†ï¼ä¸€å¤©ä¸€å¤œæ‰å®Œæˆè¿™ä»½æ€»ç»“ã€‚å†…å®¹çº¯æ‰‹æ‰“ï¼Œä»£ç æµ‹è¯•é€šè¿‡ï¼
å‚è€ƒæ–‡æ¡£æç‚æ¢çš„jQueryè§†é¢‘æ•™ç¨‹ã€ŠjQueryæ”»ç•¥ï¼ˆä½œè€…B.M.Harwaniï¼‰ã€‹ã€ŠjQueryå®æˆ˜ï¼ˆä½œè€…Bear Bibeaultã€Yehuda Katzï¼‰ã€‹ã€ŠjQueryé«˜çº§ç¼–ç¨‹ï¼ˆä½œè€… Cesar Oteroã€Rob Larsenï¼‰ã€‹ã€ŠjQuery Javascript ä¸CSSå¼€å‘å…¥é—¨ç»å…¸ï¼ˆä½œè€…Richard Yorkï¼‰ã€‹
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>javascript</tag>
        <tag>jquery</tag>
      </tags>
  </entry>
  <entry>
    <title>jQueryå­¦ä¹ ç¬”è®°â€”â€”æ¦‚è¿°ç¯‡</title>
    <url>/dev-jquery-start/</url>
    <content><![CDATA[jQueryæ˜¯ä»€ä¹ˆjQueryæ˜¯ä¸€ä¸ªå…¼å®¹å¤šæµè§ˆå™¨çš„Javascriptåº“ï¼Œç±»ä¼¼äºCè¯­è¨€ä¸­çš„â€.hâ€æ–‡ä»¶å’ŒJavaä¸­çš„â€.jarâ€ æ–‡ä»¶ã€‚
æ ¸å¿ƒç†å¿µæ˜¯write less,do more(å†™å¾—æ›´å°‘,åšå¾—æ›´å¤š)ã€‚
jQueryæ˜¯å…è´¹ã€å¼€æºçš„ï¼Œä½¿ç”¨MITè®¸å¯åè®®ã€‚jQueryçš„è¯­æ³•è®¾è®¡å¯ä»¥ä½¿å¼€å‘è€…æ›´åŠ ä¾¿æ·ï¼Œä¾‹å¦‚æ“ä½œæ–‡æ¡£å¯¹è±¡ã€é€‰æ‹©DOMå…ƒç´ ã€åˆ¶ä½œåŠ¨ç”»æ•ˆæœã€äº‹ä»¶å¤„ç†ã€ä½¿ç”¨Ajaxä»¥åŠå…¶ä»–åŠŸèƒ½ã€‚é™¤æ­¤ä»¥å¤–ï¼ŒjQueryæä¾›APIè®©å¼€å‘è€…ç¼–å†™æ’ä»¶ã€‚å…¶æ¨¡å—åŒ–çš„ä½¿ç”¨æ–¹å¼ä½¿å¼€å‘è€…å¯ä»¥å¾ˆè½»æ¾çš„å¼€å‘å‡ºåŠŸèƒ½å¼ºå¤§çš„é™æ€æˆ–åŠ¨æ€ç½‘é¡µã€‚
jQueryèƒ½å¤Ÿåšä»€ä¹ˆ1ã€ç®€åŒ–ç¼–ç¨‹ã€‚jQueryæœ€å¤§çš„ä¼˜ç‚¹ï¼Œæ˜¯ç®€åŒ–äº†Javascriptç¼–ç¨‹ã€‚æœ¬æ¥éœ€è¦å¾ˆå¤šè¡Œä»£ç æ‰èƒ½å®Œæˆçš„åŠŸèƒ½ï¼Œä½¿ç”¨jQueryï¼Œæ—¶å¸¸ä¸€ä¸¤è¡Œå°±å¤Ÿäº†ã€‚
2ã€è·¨å¹³å°ã€‚ä½¿ç”¨Javascriptå¼€å‘ï¼Œæ˜¯ä¸€ä»¶ç—›è‹¦çš„äº‹æƒ…ï¼Œå› ä¸ºä½ ä¸å¾—ä¸è€ƒè™‘åˆ°å„ç§æµè§ˆå™¨çš„å…¼å®¹é—®é¢˜ã€‚è€Œä½¿ç”¨jQueryï¼Œä½ ç¼–å†™çš„ç¨‹åºå¯ä»¥å¾ˆå®¹æ˜“åœ°å®ç°è·¨æµè§ˆå™¨å¹³å°ã€‚

jQueryç®€å²jQueryåœ¨2006å¹´1æœˆç”±ç¾å›½äººJohn Resigåœ¨çº½çº¦çš„barcampå‘å¸ƒï¼Œå¸å¼•äº†æ¥è‡ªä¸–ç•Œå„åœ°çš„ä¼—å¤šJavaScripté«˜æ‰‹åŠ å…¥ï¼Œç”±Dave Methvinç‡é¢†å›¢é˜Ÿè¿›è¡Œå¼€å‘ã€‚
å¦‚ä»Šï¼ŒjQueryå·²ç»æˆä¸ºæœ€æµè¡Œçš„javascriptåº“ï¼Œåœ¨ä¸–ç•Œå‰10000ä¸ªè®¿é—®æœ€å¤šçš„ç½‘ç«™ä¸­ï¼Œæœ‰è¶…è¿‡55%åœ¨ä½¿ç”¨jQueryã€‚
åœ¨å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œåœ¨è°·æ­Œæœç´¢jQueryï¼Œè¿”å›å¤§çº¦ 85,900,000æ¡ç»“æœã€‚jQueryæ¯å¤©éƒ½æœ‰æ–°çš„å®˜æ–¹æ’ä»¶å’Œç¬¬ä¸‰æ–¹æ’ä»¶äº§ç”Ÿï¼Œå®ƒä»¬ä¸æ–­æ‰©å±•jQueryçš„æ ¸å¿ƒåŠŸèƒ½ã€‚
hello voidkingCè¯­è¨€å†™çš„ç¬¬ä¸€ä¸ªç¨‹åºæ˜¯helloworldï¼Œä»Šå¤©ï¼Œvoidè‡ªæ‹ä¸€æŠŠï¼Œç¬¬ä¸€ä¸ªç¨‹åºå°±å’Œè‡ªå·±æ‰“æ‹›å‘¼äº†ï¼
1ã€å®˜ç½‘ä¸‹è½½jQueryæ–‡ä»¶ï¼ˆè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯jquery-1.10.2.jsï¼‰ã€‚
2ã€æ–°å»ºindex.htmlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;html&gt;&lt;head&gt;		&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.10.2.js&quot;&gt;&lt;/script&gt;	&lt;script type=&quot;text/javascript&quot;&gt;		$(function()&#123;			alert(&quot;hello voidking&quot;);			$(&quot;p&quot;).css(&quot;color&quot;,&quot;red&quot;);		&#125;);	&lt;/script&gt;&lt;/head&gt;&lt;body&gt;	&lt;p&gt;		welcome to jQuery world !	&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;

3ã€æ‰“å¼€æµè§ˆå™¨ï¼Œçœ‹åˆ°å¼¹å‡ºçš„å¯¹è¯æ¡†äº†å§ï¼Ÿå¤§åŠŸå‘Šæˆï¼ä¸‹é¢çš„å†…å®¹ï¼Œä¼šå¯¹æ­¤ç¨‹åºä½œå‡ºè§£é‡Šã€‚
$jQueryçš„ä¸€åˆ‡åŠŸèƒ½éƒ½æºè‡ªâ€$â€å¯¹è±¡ï¼Œå³ä¸€ä¸ªç¾å…ƒç¬¦å·å¯¹è±¡ï¼ˆæˆ–ç¾å…ƒç¬¦å·æ–¹æ³•ï¼‰ï¼Œå®ƒå¯ä»¥ç”¨â€jQueryâ€æ¥ä»£æ›¿ã€‚
ç¾å…ƒç¬¦å·æ—¢æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ–¹æ³•ã€‚è¿™æ˜¯å› ä¸ºå®ƒå…·æœ‰å¾ˆå¤šæˆå‘˜å±æ€§å’Œæ–¹æ³•å¯ä»¥è°ƒç”¨ï¼ŒåŒæ—¶å¯ä»¥æŠŠå®ƒå½“æˆä¸€ä¸ªå‡½æ•°æ¥è°ƒç”¨ã€‚
å»¶è¿ŸåŠ è½½æˆ‘ä»¬åœ¨hellovoidkingçš„ä»£ç ä¸­ï¼Œä½¿ç”¨$(function(){});è¿›è¡Œé¦–å°¾åŒ…è£¹ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¦åŒ…è£¹è¿™æ®µä»£ç å‘¢ï¼ŸåŸå› æ˜¯ï¼ŒjQueryåº“æ–‡ä»¶æ˜¯åœ¨bodyå…ƒç´ ä¹‹å‰åŠ è½½çš„ï¼Œæˆ‘ä»¬å¿…é¡»ç­‰å¾…æ‰€æœ‰çš„DOMå…ƒç´ åŠ è½½åï¼Œå»¶è¿Ÿæ”¯æŒDOMæ“ä½œï¼Œå¦åˆ™å°±æ— æ³•è·å–åˆ°ã€‚
ä¸ºäº†å»¶è¿Ÿç­‰å¾…åŠ è½½ï¼ŒJavaScriptæä¾›äº†ä¸€ä¸ªäº‹ä»¶ä¸ºloadï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š
window.onload = function()&#123;&#125;; 
è€ŒjQueryæä¾›çš„æ–¹æ³•å¦‚ä¸‹ï¼š
$(document).ready(function()&#123;&#125;); 
ä»€ä¹ˆä¸œä¸œï¼Ÿå’Œhello voidkingä¸­çš„ä»£ç ä¸ä¸€æ ·å•Šï¼ŸåŸæ¥ï¼ŒjQueryçš„å»¶è¿ŸåŠ è½½æ–¹æ³•å¯ä»¥ç®€å†™ä¸ºï¼š
$(function()&#123;&#125;);

jQueryé€‰æ‹©å™¨jQueryæœ€æ ¸å¿ƒçš„ç»„æˆéƒ¨åˆ†å°±æ˜¯ï¼šé€‰æ‹©å™¨å¼•æ“ã€‚ç”¨iPhoneå¼çš„æ ¼è¨€æ¥è¯´ï¼Œâ€œè®©é€‰æ‹©å™¨å®Œæˆä¸€åˆ‡â€å°±æ˜¯jQueryçš„åº§å³é“­ã€‚
åœ¨ä½¿ç”¨jQueryçš„ä»»ä½•æ–¹æ³•æ—¶ï¼Œé¦–å…ˆè¦åšçš„å°±æ˜¯é€‰æ‹©é¡µé¢ä¸­è¦æ“ä½œçš„é‚£äº›å…ƒç´ ã€‚
jQueryé€‰æ‹©å™¨ç»§æ‰¿äº†CSSçš„è¯­æ³•ï¼Œå¯ä»¥å¯¹DOMå…ƒç´ çš„æ ‡ç­¾åã€å±æ€§åã€çŠ¶æ€ç­‰è¿›è¡Œå¿«é€Ÿå‡†ç¡®çš„é€‰æ‹©ï¼Œå¹¶ä¸”ä¸å¿…æ‹…å¿ƒæµè§ˆå™¨çš„å…¼å®¹æ€§ã€‚jQueryé€‰æ‹©å™¨å®ç°äº†CSS1~CSS3çš„å¤§éƒ¨åˆ†è§„åˆ™ä¹‹å¤–ï¼Œè¿˜å®ç°äº†ä¸€äº›è‡ªå®šä¹‰çš„é€‰æ‹©å™¨ï¼Œç”¨äºå„ç§ç‰¹æ®ŠçŠ¶æ€çš„é€‰æ‹©ã€‚
é€‰æ‹©å™¨éƒ¨åˆ†å†…å®¹å¾ˆå¤šï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­è¯¦ç»†ç ”ç©¶æ¢è®¨ã€‚
äº‹ä»¶å¤„ç†å¯¹äºäº‹ä»¶çš„æ¦‚å¿µï¼Œæˆ‘åœ¨ã€ŠJavascriptå­¦ä¹ ç¬”è®°â€”â€”åŸºç¡€ç¯‡ã€‹ä¸­å·²ç»è§£é‡Šè¿‡ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚jQueryçš„äº‹ä»¶å¤„ç†ï¼Œå†…å®¹ä¹Ÿå¾ˆå¤šï¼Œæˆ‘ä¼šåœ¨æ¥ä¸‹æ¥çš„æ–‡ç« ä¸­æ¢ç©¶ã€‚
AjaxjQueryçš„Ajaxä¹Ÿæ˜¯é‡ç‚¹ï¼Œå¿…é¡»çš„å±•å¼€ã€‚æˆ‘é ï¼Œè‚¿ä¹ˆè¿™ä¹ˆå¤šï¼åˆ«åæ§½äº†å¸…å“¥ï¼Œå†™æ•™ç¨‹çš„voidéƒ½å¿«å“­äº†ï¼Œèµ¶ç€å»æXMPPå‘¢ï¼
è°ƒè¯•ä¸ªäººå–œæ¬¢çš„å·¥å…·æ˜¯ï¼šç«ç‹æµè§ˆå™¨ + firebugã€‚
ç»“æŸè¯­jQueryåšå¤§ç²¾æ·±ï¼Œè¿˜æœ‰ä»€ä¹ˆå•å…ƒæµ‹è¯•ã€æ’ä»¶ã€ç‰¹æ•ˆåˆ¶ä½œå•¥çš„ï¼Œvoidå°±ä¸å¤šè¯´äº†ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´è‡ªå·±æŸ¥æ‰¾èµ„æ–™å§ï¼
å‚è€ƒæ–‡æ¡£æç‚æ¢çš„jQueryè§†é¢‘æ•™ç¨‹ã€ŠjQueryæ”»ç•¥ï¼ˆä½œè€…B.M.Harwaniï¼‰ã€‹ã€ŠjQueryå®æˆ˜ï¼ˆä½œè€…Bear Bibeaultã€Yehuda Katzï¼‰ã€‹ã€ŠjQueryé«˜çº§ç¼–ç¨‹ï¼ˆä½œè€… Cesar Oteroã€Rob Larsenï¼‰ã€‹ã€ŠjQuery Javascript ä¸CSSå¼€å‘å…¥é—¨ç»å…¸ï¼ˆä½œè€…Richard Yorkï¼‰ã€‹
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>javascript</tag>
        <tag>jquery</tag>
      </tags>
  </entry>
  <entry>
    <title>Javascriptå­¦ä¹ ç¬”è®°â€”â€”å®è·µç¯‡</title>
    <url>/dev-jquery-practice/</url>
    <content><![CDATA[æ³¨é‡Šæœ¬æ–‡ä¸­çš„æ–‡ä»¶åï¼Œå†™åœ¨äº†ä»£ç æ³¨é‡Šä¸­ã€‚æ—¢ç„¶ç”¨åˆ°äº†ä¸‰ç§æ–‡ä»¶ï¼Œå°±æŠŠè¿™ä¸‰ç§æ–‡ä»¶çš„æ³¨é‡Šæ–¹æ³•å…ˆè¯´æ˜ä¸€ä¸‹ã€‚
HTMLæ³¨é‡Šè¯­æ³•&lt;!--æ³¨é‡Šçš„å†…å®¹--&gt;,ç¤ºä¾‹å¦‚ä¸‹ï¼š
&lt;!--æ¬¢è¿æ¥åˆ°VoidKingçš„ä¸»é¡µ--&gt;

CSSæ³¨é‡Šè¯­æ³•/*æ³¨é‡Šçš„å†…å®¹*/ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š
/*è¿™æ˜¯æ³¨é‡Š*//*è¿™ä¹Ÿæ˜¯æ³¨é‡Šå¯ä»¥åˆ†æ®µ*/

Javascriptæ³¨é‡Šå’ŒCè¯­è¨€ç›¸åŒï¼Œè¯­æ³•//æ³¨é‡Šçš„å†…å®¹æˆ–è€…/*æ³¨é‡Šçš„å†…å®¹*/ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š
//è¿™æ˜¯æ³¨é‡Š/*è¿™ä¹Ÿæ˜¯æ³¨é‡Š*/
ä½¿ç”¨Javascriptåœ¨htmlé¡µé¢ä¸­ä½¿ç”¨Javascriptï¼Œæœ‰ä¸‰ç§æ–¹æ³•ï¼š
bodyä¸­bodyä¸­çš„Javascriptä»£ç ï¼Œç›¸å½“äºCè¯­è¨€ä¸­ä½äºmainå‡½æ•°å†…ä»£ç ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
&lt;!--index.html--&gt;&lt;html&gt;	&lt;head&gt;	&lt;/head&gt;	&lt;body&gt;		&lt;script type=&quot;text/javascript&quot;&gt;		document.write(&quot;voidking.com&quot;);		alert(&quot;voidking.com&quot;);		&lt;/script&gt;	&lt;/body&gt;&lt;/html&gt;
headä¸­headä¸­çš„Javascriptä»£ç ï¼Œç›¸å½“äºCè¯­è¨€ä¸­ä½äºmainå‡½æ•°å¤–çš„ä»£ç ï¼Œä¸€èˆ¬æ˜¯å°è£…å¥½çš„å‡½æ•°ã€‚æ ¼å¼å¦‚ä¸‹ï¼š
&lt;!--index.html--&gt;&lt;html&gt;	&lt;head&gt;		&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;charset=utf-8&quot; /&gt;		&lt;script type=&quot;text/javascript&quot;&gt;		function hello()&#123;			var str=prompt(&quot;VoidKingçš„ç½‘å€æ˜¯ä»€ä¹ˆï¼Ÿ&quot;,&quot;è¯·åœ¨è¿™é‡Œè¾“å…¥&quot;);			if(str!=null &amp;&amp; str!=&quot;&quot;)			&#123;				alert(&quot;ä½ è¾“å…¥çš„æ˜¯ï¼š&quot;+str);			&#125;			else			&#123;				alert(&quot;ä½ ä»€ä¹ˆä¹Ÿæ²¡æœ‰è¾“å…¥ï¼&quot;);			&#125;		&#125;		&lt;/script&gt;	&lt;/head&gt;	&lt;body&gt;		&lt;script type=&quot;text/javascript&quot;&gt;			hello();		&lt;/script&gt;	&lt;/body&gt;&lt;/html&gt;
å¤–éƒ¨headä¸­çš„Javascriptä»£ç ä¸æ˜“ç»´æŠ¤ï¼Œæ‰€ä»¥å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬ä¼šä½¿ç”¨å¤–éƒ¨å¼•ç”¨æ¥ä»£æ›¿ã€‚æ ¼å¼å¦‚ä¸‹ï¼š
&lt;!--index.html--&gt;&lt;html&gt;	&lt;head&gt;		&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;charset=utf-8&quot; /&gt;		&lt;script type=&quot;text/javascript&quot; src=&quot;javascript.js&quot;&gt;&lt;/script&gt;	&lt;/head&gt;	&lt;body&gt;		&lt;script type=&quot;text/javascript&quot;&gt;			hello();		&lt;/script&gt;	&lt;/body&gt;&lt;/html&gt;
//javascript.jsfunction hello()&#123;			var str=prompt(&quot;VoidKingçš„ç½‘å€æ˜¯ä»€ä¹ˆï¼Ÿ&quot;,&quot;è¯·åœ¨è¿™é‡Œè¾“å…¥&quot;);			if(str!=null &amp;&amp; str!=&quot;&quot;)			&#123;				alert(&quot;ä½ è¾“å…¥çš„æ˜¯ï¼š&quot;+str);			&#125;			else			&#123;				alert(&quot;ä½ ä»€ä¹ˆä¹Ÿæ²¡æœ‰è¾“å…¥ï¼&quot;);			&#125;		&#125;
ä½¿ç”¨CSSä¸Šé¢æˆ‘ä»¬å·²ç»è¯´å®Œäº†ä½¿ç”¨Javascriptçš„ä¸‰ç§æ–¹å¼ï¼Œçˆ±æ€è€ƒçš„å°ä¼™ä¼´è‚¯å®šæƒ³åˆ°äº†CSSçš„ä½¿ç”¨æ–¹æ³•ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä¹Ÿæ€»ç»“ä¸€ä¸‹ã€‚
å†…è”æ ·å¼å½“ç‰¹æ®Šçš„æ ·å¼éœ€è¦åº”ç”¨åˆ°ä¸ªåˆ«å…ƒç´ æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨å†…è”æ ·å¼ã€‚æ ¼å¼å¦‚ä¸‹ï¼š
&lt;!--index.html--&gt;&lt;html&gt;	&lt;head&gt;	&lt;/head&gt;	&lt;body&gt;		&lt;p style=&quot;color:red;margin-left:20px&quot;&gt;		This is a paragraph.		&lt;/p&gt;	&lt;/body&gt;&lt;/html&gt;

å†…éƒ¨æ ·å¼å½“å•ä¸ªæ–‡ä»¶éœ€è¦ç‰¹åˆ«æ ·å¼çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä½¿ç”¨å†…éƒ¨æ ·å¼è¡¨ã€‚æ ¼å¼å¦‚ä¸‹:
&lt;!--index.html--&gt;&lt;html&gt;	&lt;head&gt;		&lt;style type=&quot;text/css&quot;&gt;		body&#123;background-color:red&#125;		p&#123;margin-left:20px&#125;		&lt;/style&gt;	&lt;/head&gt;	&lt;body&gt;		&lt;p&gt;		This is a paragraph.		&lt;/p&gt;	&lt;/body&gt;&lt;/html&gt;
å¤–éƒ¨æ ·å¼å½“æ ·å¼éœ€è¦è¢«åº”ç”¨åˆ°å¾ˆå¤šé¡µé¢çš„æ—¶å€™ï¼Œå¤–éƒ¨æ ·å¼è¡¨æœ€é€‚åˆã€‚æ ¼å¼å¦‚ä¸‹ï¼š
&lt;!--index.html--&gt;&lt;html&gt;	&lt;head&gt;		&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;/&gt;	&lt;/head&gt;	&lt;body&gt;		&lt;p&gt;		This is a paragraph.		&lt;/p&gt;	&lt;/body&gt;&lt;/html&gt;
/*style.css*/body&#123;background-color:red&#125;p&#123;margin-left:20px&#125;

å€ŸèŠ±çŒ®ä½›æœ¬æ¥æƒ³è‡ªå·±æ•´ç†å‡ºä¸€æ‰¹å¥½çš„ä¾‹å­ï¼Œä½†æ˜¯ï¼Œæ— æ„ä¸­å‘ç°äº†ä¸€ä¸ªç½‘ç«™ï¼Œå·²ç»åšå¾—éå¸¸å¥½äº†ã€‚æ‰€ä»¥ï¼Œvoidåœ¨è¿™é‡Œå°±å·æ‡’ä¸€ä¸‹ã€‚ä¾‹å­ç²¾å“ï¼Œè¿˜é™„æœ‰æ•™ç¨‹è®²è§£ï¼Œåˆ†äº«ç»™å¤§å®¶â€”â€”æ¢¦ä¹‹éƒ½ï¼
ç»“æŸè¯­è¿™ç¯‡æ–‡ç« æ¯”é¢„æœŸçš„ç”¨æ—¶è¦çŸ­ä¸Šå¾ˆå¤šï¼Œä¸»è¦å› ä¸ºï¼Œæˆ‘æŠŠç—›è‹¦çš„å·¥ä½œå…¨éƒ¨äº¤ç»™æ¢¦ä¹‹éƒ½äº†ï¼Œå¥½æœºæ™ºåœ°è¯´ï¼è¿˜æƒ³å†™ä¸ªæé«˜ç¯‡æ¥ç€ï¼Œä½†æ˜¯èƒ½åŠ›æœ‰é™ï¼Œä¸èƒ½è¯¯äººå­å¼Ÿå•Šï¼æ‰€ä»¥ï¼ŒJavascriptç¬”è®°è‡³æ­¤ç»“æŸï¼Œæ¥ä¸‹æ¥ï¼Œè¯¥æ˜¯jQueryäº†ï¼
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>Javascriptå­¦ä¹ ç¬”è®°â€”â€”åŸºç¡€ç¯‡</title>
    <url>/dev-javascript-base/</url>
    <content><![CDATA[ä»€ä¹ˆæ˜¯JavascriptJavascriptæ˜¯ä¸€ç§åŸºäºå¯¹è±¡çš„è„šæœ¬è¯­è¨€ã€‚
åŸºäºå¯¹è±¡ï¼ˆObject-Basedï¼‰ä¸æä¾›æŠ½è±¡ã€ç»§æ‰¿ã€é‡è½½ç­‰æœ‰å…³é¢å‘å¯¹è±¡è¯­è¨€çš„åŠŸèƒ½ã€‚è€Œæ˜¯æŠŠå…¶ä»–è¯­è¨€åˆ›å»ºçš„å¯¹è±¡ç»Ÿä¸€èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªå¯¹è±¡ç³»ç»Ÿï¼Œä»¥ä¾›ä½¿ç”¨ã€‚
è„šæœ¬è¯­è¨€æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯ä¸éœ€è¦ç¼–è¯‘å’Œé“¾æ¥ã€‚ä¼ ç»Ÿç¼–ç¨‹è¯­è¨€æœ‰å››ä¸ªæ­¥éª¤â€œç¼–å†™-&gt;ç¼–è¯‘-&gt;é“¾æ¥-&gt;è¿è¡Œâ€ï¼Œè€Œè„šæœ¬è¯­è¨€åªæœ‰ä¸¤ä¸ªæ­¥éª¤â€œç¼–å†™ -&gt; è¿è¡Œâ€ã€‚
è„šæœ¬è¯­è¨€æ˜¯è§£é‡Šæ‰§è¡Œè€Œéç¼–è¯‘æ‰§è¡Œã€‚windowsä¸‹ï¼Œå‘½ä»¤æç¤ºç¬¦ç•Œé¢ï¼Œå°±æ˜¯è¾“å…¥è„šæœ¬è¯­è¨€çš„shellï¼›ç»å¸¸è§åˆ°çš„â€œ*.batâ€æ‰¹å¤„ç†æ–‡ä»¶ï¼Œå°±æ˜¯è„šæœ¬æ–‡ä»¶ã€‚è€Œåœ¨linuxç³»ç»Ÿé‡Œé¢ï¼Œè„šæœ¬ã€è„šæœ¬ç¼–ç¨‹çš„æ¦‚å¿µæ›´æ˜¯å¸¸è§ã€‚
shellï¼Œæä¾›ç”¨æˆ·ä½¿ç”¨ç•Œé¢çš„è½¯ä»¶ã€‚åœ¨windowsä¸­ï¼Œwin+Rï¼Œè¾“å…¥cmdï¼Œå‡ºç°çš„é‚£ä¸ªé»‘é»é»çš„çª—å£å°±æ˜¯ä¸€ä¸ªshellï¼›æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œçœ‹åˆ°çš„é‚£ä¸ªexplorer.exeç¨‹åºï¼Œä¹Ÿæ˜¯ä¸€ä¸ªshellï¼Œå®ƒå«åšGUI shellã€‚åœ¨linuxä¸­ï¼Œå¦‚æœä¸ä½¿ç”¨å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼Œé‚£ä¹ˆï¼Œä½ æ‰€çœ‹åˆ°çš„ï¼Œå°±æ˜¯ä¸€ä¸ªshellï¼Œä¸€èˆ¬çš„linuxç³»ç»Ÿéƒ½ä¼šæä¾›å‡ ç§shellä¾›ä½ é€‰æ‹©ï¼›è€Œå¦‚æœä½¿ç”¨å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼Œä½ çœ‹åˆ°çš„ç•Œé¢ï¼Œå°±æ˜¯ä¸€ä¸ªGUI shellã€‚

ä»€ä¹ˆæ˜¯å¯¹è±¡ä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ã€‚æ¯”å¦‚â€œä½ â€å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½ æ‹¥æœ‰å§“åã€æ€§åˆ«ã€èº«é«˜ã€ä½“é‡ç­‰ç­‰å±æ€§ä¿¡æ¯ï¼Œä¹Ÿæœ‰è·³è·ƒã€å¥”è·‘ã€åƒé¥­ã€ç¡è§‰ç­‰ç­‰æ–¹æ³•ã€‚
Javascriptä¸­ä½¿ç”¨çš„å¯¹è±¡ï¼Œåˆ†ä¸ºå†…ç½®å¯¹è±¡å’Œè‡ªå®šä¹‰å¯¹è±¡ã€‚
å¸¸è§çš„å†…ç½®å¯¹è±¡æœ‰Arrayã€Stringã€Mathã€Dateã€Documentã€Formã€Anchorã€Linkã€Imageã€Windowsã€Screenã€Navigatorã€Locationã€Historyã€Frameã€DOMã€RegExpã€StyleSheetã€Eventã€FileSystemObjectã€Driveã€Folderã€Fileã€XMLHttpRequestã€Errorâ€¦â€¦
Javascriptå‡ºç°çš„åŸå› 1ã€è¡¨å•éªŒè¯ã€‚æ—©æœŸçš„éªŒè¯å…¨éƒ¨åœ¨æœåŠ¡ç«¯ï¼Œæ¯”å¦‚æ³¨å†Œæ—¶éœ€è¦è¾“å…¥é‚®ç®±ï¼Œè€Œé‚®ç®±æœ‰å›ºå®šæ ¼å¼ï¼Œä¸­é—´æœ‰ä¸€ä¸ªâ€œ@â€ã€‚ä¸ºäº†éªŒè¯ä¸€ä¸ªé‚®ç®±æ ¼å¼ï¼Œå°±éœ€è¦å‘é€è¯·æ±‚ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯çš„å‹åŠ›å¾ˆå¤§ï¼Œå¤šä¹ˆä»¤äººè›‹ç–¼ã€‚ä¸ºäº†å‡è½»æœåŠ¡å™¨çš„å‹åŠ›ï¼Œéœ€è¦ä¸€ç§å¯ä»¥è¿è¡Œåœ¨å®¢æˆ·ç«¯çš„ç²¾å°é«˜æ•ˆçš„è¯­è¨€ã€‚
2ã€ç½‘é¡µäº¤äº’æ€§ã€‚éšç€äº’è”ç½‘çš„å‘å±•ï¼Œå•çº¯çš„ç½‘é¡µæµè§ˆå·²ç»æ— æ³•æ»¡è¶³ç”¨æˆ·çš„éœ€æ±‚ï¼Œè¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·æ¸´æœ›ä¸ç½‘é¡µè¿›è¡Œäº¤äº’ã€‚ä¸ºäº†æ”¹å–„ç”¨æˆ·çš„äº¤äº’ä½“éªŒï¼Œéœ€è¦å¼€å‘ä¸€ç§è¯­è¨€ï¼Œè€Œè¿™ç§è¯­è¨€è¿è¡Œåœ¨æœåŠ¡ç«¯æ˜¯ä¸åˆé€‚çš„ã€‚
ç«è¯çš„å‘æ˜ï¼Œæœ€åˆå¹¶æ²¡æœ‰æƒ³åˆ°å¯ä»¥ç”¨æ¥æ‰“ä»—ã€‚Javascriptçš„ä½œè€…ä¹Ÿæ²¡æƒ³åˆ°ï¼ŒJavascriptèƒ½å¤Ÿå‘å±•åˆ°ç°åœ¨è¿™ä¹ˆå¼ºå¤§ï¼šï¼ˆ1ï¼‰åœ¨æµè§ˆå™¨çš„çŠ¶æ€æ æˆ–è€…è­¦å‘Šæ¡†é‡Œï¼Œå‘è®¿é—®è€…æ˜¾ç¤ºä¿¡æ¯ã€‚ï¼ˆ2ï¼‰éªŒè¯è¡¨å•å†…å®¹ã€‚ï¼ˆ3ï¼‰å½“è®¿é—®è€…å°†é¼ æ ‡æŒ‡é’ˆç§»åŠ¨åˆ°å›¾åƒä¸Šé¢æ—¶ï¼Œè‡ªåŠ¨æ›¿æ¢å›¾åƒã€‚ï¼ˆ4ï¼‰åˆ›å»ºä¸è®¿é—®è€…äº¤äº’çš„å¹¿å‘Šæ ï¼Œè€Œä¸ä»…ä»…æ˜¯æ˜¾ç¤ºä¸€å¹…å›¾åƒã€‚ï¼ˆ5ï¼‰æ£€æµ‹å¯ç”¨æµè§ˆå™¨æˆ–å…¶å±æ€§ï¼Œå¹¶ä¸”åªåœ¨æ”¯æŒå®ƒä»¬çš„æµè§ˆå™¨ä¸Šè¿è¡Œé«˜çº§åŠŸèƒ½ã€‚ï¼ˆ6ï¼‰æ£€æµ‹å·²å®‰è£…çš„æ’ä»¶ï¼Œå¹¶åœ¨éœ€è¦æŸä¸€æ’ä»¶æ—¶é€šçŸ¥è®¿é—®è€…ã€‚ï¼ˆ7ï¼‰åœ¨ä¸éœ€è¦è®¿é—®è€…é‡æ–°åŠ è½½ç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œä¿®æ”¹æ•´ä¸ªæˆ–éƒ¨åˆ†ç½‘é¡µã€‚ï¼ˆ8ï¼‰æ˜¾ç¤ºä»è¿œç¨‹æœåŠ¡å™¨æ£€ç´¢åˆ°çš„æ•°æ®ï¼Œæˆ–è€…ä¸è¿œç¨‹æœåŠ¡å™¨äº¤äº’æ•°æ®ã€‚â€¦â€¦æ€»ç»“ä¸€ä¸‹ï¼Œå¤§è‡´åˆ†ä¸ºè¡¨å•éªŒè¯ã€ç½‘é¡µç‰¹æ•ˆã€æµè§ˆå™¨æ£€æµ‹ã€‚
è¯­æ³•æ±‰è¯­æœ‰è¯­æ³•ï¼Œè‹±è¯­æœ‰è¯­æ³•ï¼Œç¼–ç¨‹è¯­è¨€ä¹Ÿæœ‰è¯­æ³•ï¼ŒJavascriptä¹Ÿä¸ä¾‹å¤–ã€‚
è¯­æ³•ï¼Œç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯è¯­è¨€è¡¨è¾¾çš„è§„åˆ™ã€‚ä½ è¯´â€œæˆ‘çœŸå¸…ï¼â€ï¼Œå¤§å®¶ç†è§£ä½ çš„æ„æ€ï¼Œä½†æ˜¯ä½ è¯´â€œå¸…çœŸæˆ‘ï¼â€ï¼Œå°±æ²¡æœ‰äººæ˜ç™½äº†ï¼åŒæ ·çš„ï¼Œåªæœ‰éµå¾ªä¸€å®šçš„è§„åˆ™ï¼Œæµè§ˆå™¨æ‰èƒ½æ˜ç™½ä½ å†™çš„æŸå¥ä»£ç çš„æ„æ€ã€‚
æ•°æ®ç±»å‹æ•°å€¼å‹ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å‹ã€nullã€undefinedã€å¯¹è±¡ã€æ•°ç»„
å˜é‡å’Œå¸¸é‡å’ŒCã€JavaåŸºæœ¬ç›¸åŒï¼Œä¸å¤šè§£é‡Šï¼Œå¦‚æœä½ æ²¡æœ‰å­¦è¿‡ç¼–ç¨‹ï¼Œå°±æŒ‰ç…§æ•°å­¦ä¸­çš„ç†è§£å°±å¥½äº†ã€‚
è¿ç®—ç¬¦å’Œè¡¨è¾¾å¼å’ŒCã€JavaåŸºæœ¬ç›¸åŒï¼Œä¸æ‡‚çš„åŒå­¦è¯·è‡ªè¡Œç™¾åº¦ã€è¯»ä¹¦ï¼Œæ­¤å¤„ä¸å±•å¼€äº†ã€‚
æµç¨‹å’ŒCã€JavaåŸºæœ¬ç›¸åŒï¼Œå­¦è¿‡Cã€Javaçš„åŒå­¦è¯·è‡ªè¡Œè·³è¿‡æœ¬èŠ‚ã€‚
å…¶å®æ‰€æœ‰çš„ç¼–ç¨‹è¯­è¨€çš„æ‰§è¡Œæµç¨‹éƒ½å¯ä»¥åˆ†ä¸ºå››ç§ï¼šï¼ˆ1ï¼‰é¡ºåºã€‚æ’é˜Ÿä¹°é¥­ï¼Œå°±æ˜¯ä¸€ä¸ªé¡ºåºæµç¨‹ã€‚
ï¼ˆ2ï¼‰æ¡ä»¶ã€‚å‡è®¾æœ‰ä¸¤ä¸ªçª—å£ï¼Œçª—å£ä¸€å–é¥­ï¼Œçª—å£äºŒå–æ±¤ã€‚å¦‚æœä½ æƒ³æ‰“é¥­ï¼Œå°±å»çª—å£ä¸€ï¼›å¦‚æœä½ æƒ³æ‰“æ±¤ï¼Œå°±å»çª—å£äºŒã€‚è¿™é‡Œçš„â€œæƒ³æ‰“é¥­â€å’Œâ€œæƒ³æ‰“æ±¤â€å°±æ˜¯æ¡ä»¶ã€‚
ï¼ˆ3ï¼‰å¾ªç¯ã€‚æ’é˜Ÿä¹°é¥­ï¼Œç»ˆäºæ’åˆ°æˆ‘äº†ï¼Œè¿™æ—¶æˆ‘å‘ç°é’±ä¸å¤Ÿï¼Œäºæ˜¯æˆ‘å›å®¿èˆæ‹¿é’±ï¼›ä¹‹åå›æ¥æ’é˜Ÿï¼Œç»ˆäºåˆæ’åˆ°æˆ‘äº†ï¼Œé’±è¿˜æ˜¯ä¸å¤Ÿï¼Œäºæ˜¯æˆ‘åˆå›å®¿èˆæ‹¿é’±â€¦â€¦è¿™ä¸ªè¿‡ç¨‹ï¼Œå°±æ˜¯å¾ªç¯ã€‚ç»ˆäºæœ‰ä¸€æ¬¡ï¼Œæˆ‘çš„é’±æ‹¿å¤Ÿäº†ï¼Œä¹°åˆ°äº†é¥­ï¼Œè¿™ä¸ªå¾ªç¯å°±ç»“æŸäº†ã€‚
ï¼ˆ4ï¼‰å…¶ä»–ã€‚æ¯”å¦‚continueã€breakã€å¼‚å¸¸å¤„ç†ç­‰ã€‚continueï¼Œæ’é˜Ÿä¹°é¥­ï¼Œè¿˜æ²¡æœ‰æ’åˆ°æˆ‘ï¼Œæˆ‘å‘ç°é’±æ²¡å¸¦ï¼Œäºæ˜¯æå‰ç»“æŸæœ¬æ¬¡æ’é˜Ÿï¼Œå›å®¿èˆæ‹¿é’±ï¼Œå›æ¥åé‡æ–°æ’é˜Ÿã€‚breakï¼Œæ’é˜Ÿä¹°é¥­ï¼Œè¿˜æ²¡æœ‰æ’åˆ°æˆ‘ï¼Œçªç„¶ä¸æƒ³ä¹°äº†ï¼Œäºæ˜¯ç»“æŸæ’é˜Ÿã€‚å¼‚å¸¸å¤„ç†ï¼Œæ’é˜Ÿä¹°é¥­ï¼Œçªç„¶æ”¶åˆ°ä¸€ä¸ªç´§æ€¥ç”µè¯ï¼Œå¿…é¡»å»è·‘1000ç±³ã€‚è¿™ä¸ªç´§æ€¥ç”µè¯ï¼Œå°±æ˜¯ä¸€ä¸ªå¼‚å¸¸ï¼Œè·‘1000ç±³ï¼Œå°±æ˜¯å¤„ç†ã€‚
å‡½æ•°å’Œç¨‹åºå‡½æ•°æ˜¯ç”¨æ¥å®ç°ä¸€ä¸ªåŠŸèƒ½çš„ç¨‹åºå—ã€‚
ä¸¾ä¸ªä¾‹å­ï¼Œæ‰“ç”µè¯å‘Šè¯‰è€çˆ¸ç¼ºé’±äº†ã€‚è¿™ä¸ªè¿‡ç¨‹ï¼Œæœ‰ä¸¤ä¸ªåŠ¨ä½œï¼Œâ€œæ‰“ç”µè¯â€å’Œâ€œå‘Šè¯‰â€ã€‚è¿™é‡Œçš„â€œæ‰“ç”µè¯â€å’Œâ€œå‘Šè¯‰â€å°±æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªç¨‹åºå—ã€‚
ç¨‹åºå—æ˜¯ä»€ä¹ˆï¼Ÿé‚£äº›ç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥çš„ä»£ç å°±æ˜¯ç¨‹åºå—ã€‚
ç¨‹åºå‘¢ï¼Ÿç¨‹åºå°±æ˜¯å‘½ä»¤åºåˆ—çš„é›†åˆã€‚é€šä¿—ä¸€ç‚¹è¯´ï¼Œç¨‹åºå°±æ˜¯åšä¸€ä»¶äº‹æƒ…çš„æ­¥éª¤çš„é›†åˆã€‚
â€œæ‰“ç”µè¯â€æ˜¯ä¸€ä¸ªç¨‹åºï¼Œå¯ä»¥åˆ†ä¸ºè¿™æ ·å‡ ä¸ªæ­¥éª¤ï¼šæå‡ºæ‰‹æœºï¼Œæ‰¾åˆ°å·ç ï¼Œæ‹¨å·ï¼Œç­‰å¾…æ¥é€šã€‚
å½“ç„¶ä½ å¯ä»¥åˆ†çš„æ›´ç»†ï¼Œæ¯”å¦‚â€œæå‡ºæ‰‹æœºâ€ä¹Ÿå¯ä»¥çœ‹æˆä¸€ä¸ªç¨‹åºï¼Œåˆ†ä¸ºè¿™æ ·å‡ ä¸ªæ­¥éª¤ï¼šä¼¸æ‰‹æ‹¿åˆ°æ‰‹æœºï¼Œæé«˜ä¸€å˜ç±³ï¼Œæé«˜ä¸€å˜ç±³ï¼Œæé«˜ä¸€å˜ç±³â€¦â€¦
é—­åŒ…é—­åŒ…æ˜¯å•¥ç©æ„ï¼Ÿå„ç§ä¸“ä¸šæ–‡æ¡£ä¸­ç»™å‡ºäº†voidæ ¹æœ¬çœ‹ä¸æ‡‚çš„å®šä¹‰ã€‚è¿™é‡Œå€Ÿç”¨é˜®ä¸€å³°çš„ç†è§£ï¼šé—­åŒ…å°±æ˜¯èƒ½å¤Ÿè¯»å–å’Œä¿æŒå…¶ä»–å‡½æ•°å†…éƒ¨å˜é‡çš„å‡½æ•°ã€‚
1ã€ä½œç”¨åŸŸè¦ç†è§£é—­åŒ…ï¼Œé¦–å…ˆå¿…é¡»ç†è§£Javascriptçš„å˜é‡ä½œç”¨åŸŸã€‚å˜é‡ä½œç”¨åŸŸæ— éä¸¤ç§ï¼šå…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ã€‚
Javascriptç‰¹æœ‰â€œé“¾å¼ä½œç”¨åŸŸâ€ç»“æ„ã€‚jså¯»æ‰¾å˜é‡çš„å®šä¹‰ä¼šä»æœ€è¿‘çš„åŒºåŸŸå¼€å§‹ï¼Œæœ¬åœ°æ‰¾ä¸åˆ°å°±å¾€ä¸Šä¸€å±‚åŒºåŸŸï¼Œç›´åˆ°æ‰¾åˆ°å‘½åç©ºé—´çš„é¡¶ç«¯ï¼Œåœ¨æµè§ˆå™¨çš„ä¸–ç•Œé‡Œé¡¶ç«¯å°±æ˜¯windowå¯¹è±¡äº†ã€‚æ‰€ä»¥ï¼Œçˆ¶å¯¹è±¡çš„æ‰€æœ‰å˜é‡ï¼Œå¯¹å­å¯¹è±¡éƒ½æ˜¯å¯è§çš„ï¼Œåä¹‹åˆ™ä¸æˆç«‹ã€‚
2ã€ä¸€ä¸ªä¾‹å­
&lt;html&gt;	&lt;head&gt;		&lt;/head&gt;	&lt;body&gt;		&lt;script &gt;		function f1()&#123;				var n = &quot;hello voidking&quot;;				function f2()&#123;					alert(n);				&#125;				return f2;				&#125;				var result = f1();				result();		&lt;/script&gt;	&lt;/body&gt;&lt;/html&gt;
è¿è¡Œè¿™æ®µä»£ç ï¼Œæµè§ˆå™¨å¼¹å‡ºäº†â€œhello voidkingâ€å¯¹è¯æ¡†ã€‚
è¿™æ®µä»£ç ä¸­çš„f2ï¼Œå°±æ˜¯ä¸€ä¸ªé—­åŒ…ã€‚
è™½ç„¶å¤–éƒ¨å‡½æ•°å·²ç»è¿”å›ï¼Œä½†æ˜¯å†…éƒ¨å‡½æ•°ä»ç„¶è®°å¾—å¤–éƒ¨å‡½æ•°å®šä¹‰çš„å˜é‡ã€‚
ç”±äºåœ¨Javascriptä¸­ï¼Œåªæœ‰å‡½æ•°å†…éƒ¨çš„å­å‡½æ•°æ‰èƒ½è¯»å–å±€éƒ¨å˜é‡ï¼Œå› æ­¤å¯ä»¥æŠŠé—­åŒ…ç®€å•ç†è§£æˆâ€œå®šä¹‰åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨çš„å‡½æ•°â€ã€‚
åœ¨æœ¬è´¨ä¸Šï¼Œé—­åŒ…å°±æ˜¯å°†å‡½æ•°å†…éƒ¨å’Œå‡½æ•°å¤–éƒ¨è¿æ¥èµ·æ¥çš„ä¸€åº§æ¡¥æ¢ã€‚åŠŸèƒ½ç±»ä¼¼äºJavaå¯¹è±¡ä¸­çš„setå’Œgetå‡½æ•°ã€‚
3ã€ä¼ å¼•ç”¨é—­åŒ…å¯ä»¥æ›´æ–°å¤–éƒ¨å˜é‡çš„å€¼ã€‚
Javascriptä¸­å‡½æ•°çš„ä¼ å‚æ˜¯ä¼ å€¼ï¼Œè€Œä¸æ˜¯ä¼ å¼•ç”¨ã€‚è€Œåœ¨é—­åŒ…ä¸­ï¼Œå…¶å­˜å‚¨çš„æ˜¯ä¸€ä¸ªå¯¹å¤–éƒ¨å˜é‡çš„å¼•ç”¨ã€‚
æ­£åˆ™è¡¨è¾¾å¼è¯´åˆ°æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¾ˆå¤šäººä¼šæƒ³åˆ°é€šé…ç¬¦ã€‚æ­£åˆ™è¡¨è¾¾å¼å’Œé€šé…ç¬¦çš„ä¸åŒåœ¨å“ªé‡Œå‘¢ï¼Ÿ
1ã€é€šé…ç¬¦æ˜¯ç³»ç»Ÿçº§çš„ï¼Œåœ¨bash shellç•Œé¢ä¸‹å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼›æ­£åˆ™è¡¨è¾¾å¼æ˜¯éœ€è¦å·¥å…·æ”¯æŒçš„ï¼Œæ¯”å¦‚grepã€sedã€awkç­‰å·¥å…·ã€‚2ã€é€šé…ç¬¦ä¸€èˆ¬ç”¨æ¥æŸ¥æ‰¾æ–‡ä»¶ã€æ–‡ä»¶å¤¹ï¼›æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æ›´åŠ ç²¾ç¡®ï¼Œä¸»è¦ç”¨æ¥æ–‡æœ¬è¿‡æ»¤å’Œå­—ç¬¦ä¸²çš„æ“ä½œã€‚
Javascriptå¯¹äºæ­£åˆ™è¡¨è¾¾å¼æœ‰å¾ˆå¥½çš„æ”¯æŒï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œæ–‡æœ¬è¿‡æ»¤å’Œå­—ç¬¦ä¸²æ“ä½œã€‚æ¯”å¦‚å¼€ç¯‡æåˆ°çš„é‚®ç®±æ ¼å¼éªŒè¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥å®ç°ã€‚
DOMDOMï¼Œæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼ˆDocument Object Modelï¼‰ã€‚
DOMç‹¬ç«‹äºè¯­è¨€å’Œå¹³å°ï¼Œæ˜¯ä¸€å¥—æ ‡å‡†æ¥å£ï¼Œç”¨æ¥å¯¹XMLå’ŒHTMLæ–‡æ¡£è¿›è¡Œå¢åˆ æŸ¥æ”¹ã€‚
DOMè§„èŒƒçš„æ ¸å¿ƒå°±æ˜¯æ ‘æ¨¡å‹ï¼Œå¯¹äºè¦è§£æçš„HTMLæ–‡æ¡£ï¼Œè§£æå™¨ä¼šæŠŠHTMLæ–‡æ¡£åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œåœ¨å†…å­˜ä¸­ä¸ºHTMLæ–‡ä»¶å»ºç«‹é€»è¾‘å½¢å¼çš„èŠ‚ç‚¹æ ‘ã€‚è€Œæ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä»£è¡¨ä¸€ä¸ªå¯ä»¥è¿›è¡Œäº¤äº’çš„å¯¹è±¡ã€‚
XMLXMLï¼Œå¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼ˆeXtensible Markup Languageï¼‰ã€‚
å®ƒçš„æ ¼å¼å¾ˆHTMLå¾ˆåƒï¼Œä½†æ˜¯ï¼ŒHTMLçš„æ ‡è®°æ˜¯å›ºå®šçš„ï¼Œä¸åŒºåˆ†å¤§å°å†™ï¼›è€ŒXMLçš„æ ‡è®°æ˜¯è‡ªå®šä¹‰çš„ï¼ŒåŒºåˆ†å¤§å°å†™çš„ã€‚
XMLæ–‡æ¡£ç»“æ„åˆ†ä¸º3ä¸ªéƒ¨åˆ†ï¼šåºè¨€ã€ä¸»ä½“å’Œå°¾å£°ã€‚å…¶ä¸­å°¾å£°å¯æœ‰å¯æ— ã€‚å¦‚æœæŠŠä¸€ä¸ªHTMLæ–‡æ¡£çœ‹åšæ˜¯ä¸€ä¸ªä¸»ä½“ï¼ˆä¸€æ£µæ ‘ï¼‰ï¼Œé‚£ä¹ˆï¼ŒXMLå’ŒHTMLæ–‡æ¡£ç»“æ„çš„ä¸åŒï¼Œå°±åœ¨äºXMLå¤šäº†ä¸€ä¸ªåºè¨€ï¼Œè€Œä¸”ï¼Œä¸»ä½“å¯èƒ½ä¸æ­¢ä¸€æ£µæ ‘ã€‚
äº‹ä»¶ç¼–ç¨‹è¯­è¨€ä¸­çš„äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£ä¸ºäº‹æƒ…ã€‚
å½“ä¸€ä»¶äº‹æƒ…å‘ç”Ÿï¼Œæˆ‘ä»¬å¯èƒ½ä¼šäº§ç”Ÿååº”ï¼Œä¹Ÿè®¸ä¸ä¼šã€‚
æ¯”å¦‚ï¼Œä½ ä»¬çš„è€å¸ˆè®©ä½ ä»¬å†™ä¸€ç¯‡å®éªŒæŠ¥å‘Šï¼Œè¿™å°±æ˜¯ä¸€ä¸ªäº‹ä»¶ã€‚è¿™ä¸ªäº‹ä»¶å‘ç”Ÿåï¼Œä½ å°±ä¼šå»å†™å®éªŒæŠ¥å‘Šï¼Œè¿™å°±æ˜¯ååº”ã€‚ä¹Ÿè®¸ä½ ä¼šåæ§½ï¼Œå‘Šè¯‰è¿œæ–¹çš„æŸä½å§‘å¨˜ï¼Œè€å¸ˆå¤šä¹ˆæ— èŠï¼Œè®©ä½ ä»¬å†™å®éªŒæŠ¥å‘Šã€‚è¿™æ—¶ï¼Œè™½ç„¶å§‘å¨˜ä¹ŸçŸ¥é“äº†è¿™ä»¶äº‹ï¼Œä½†æ˜¯å¾®å¾®ä¸€ç¬‘ï¼ˆæ²¡æœ‰å»å†™æŠ¥å‘Šå§ï¼‰ï¼Œæˆ–è€…è¿ååº”éƒ½æ²¡æœ‰ã€‚è€Œæ›´å¤šçš„ä¸çŸ¥é“è¿™ä¸ªäº‹ä»¶çš„äººï¼Œå½“ç„¶å°±å½“åšæ²¡å‘ç”Ÿã€‚
Javascriptä¸­çš„äº‹ä»¶ï¼Œæä¾›äº†ä¸çª—å£ä»¥åŠå½“å‰åŠ è½½æ–‡æ¡£äº¤äº’çš„åŸºç¡€ã€‚è€ŒJavascriptå¯¹äº‹ä»¶çš„å¤„ç†ï¼Œä¹Ÿå°±æ˜¯é€šå¸¸æ‰€è¯´çš„ååº”ã€‚
CookieCookieï¼ˆå°ç”œé¥¼ï¼‰æ˜¯ç”±æµè§ˆå™¨å­˜å‚¨åœ¨å®¢æˆ·ç«¯ç³»ç»Ÿçš„æ–‡æœ¬ï¼Œè€Œä¸”ä¸æµè§ˆå™¨çš„æ¯æ¬¡è¯·æ±‚ä¸€åŒå‘é€åˆ°æœåŠ¡å™¨ã€‚ä½¿ç”¨Cookieå¯ä»¥æ–¹ä¾¿åœ°å¸®åŠ©WebæœåŠ¡å™¨ä¿å­˜æœ‰å…³è®¿å®¢çš„ä¿¡æ¯ã€‚
Cookieå¸¸ç”¨äºä»¥ä¸‹åœºåˆï¼šï¼ˆ1ï¼‰ä¿å­˜ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼ˆ2ï¼‰è·Ÿè¸ªç”¨æˆ·è¡Œä¸ºï¼ˆ3ï¼‰å®šåˆ¶ç•Œé¢ï¼ˆ4ï¼‰åˆ›å»ºè´­ç‰©è½¦
AjaxAjaxï¼Œå¼‚æ­¥Javascriptå’ŒXMLï¼ˆAsynchronous Javascript and XMLï¼‰ï¼Œè¢«ç§°ä¸ºè¿œç¨‹è„šæœ¬æŠ€æœ¯ã€‚
Javascriptåœ¨æ—©æœŸï¼Œå’ŒæœåŠ¡å™¨é€šä¿¡çš„æ–¹æ³•åªæœ‰ä¸€ä¸ªâ€”â€”æäº¤è¡¨å•ï¼Œè¿œç¨‹è„šæœ¬æŠ€æœ¯ä½¿ä¸¤è€…ä¹‹é—´çš„é€šä¿¡å˜å¾—æ›´åŠ ä¸°å¯Œã€‚å®ƒå¯ä»¥ä½¿Javascriptè¶…è¶Šå®¢æˆ·ç«¯çš„ç•Œé™ï¼Œä½¿å…¶èƒ½å¤Ÿå¤„ç†WebæœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ã€‚
ç‰¹ç‚¹ï¼šå±€éƒ¨æ›´æ–°ï¼ŒèŠ‚çœå¸¦å®½ï¼Œæé«˜åŠ è½½é€Ÿåº¦ã€‚
ç»“æŸè¯­çœ‹å®Œä¸Šé¢çš„æ¦‚å¿µï¼Œæ˜¯ä¸æ˜¯åœ¨æƒ³ï¼šä»€ä¹ˆç©æ„å„¿ï¼Ÿçœ‹ä¸æ‡‚æ²¡å…³ç³»ï¼ŒçŸ¥é“æœ‰é‚£ä¹ˆä¸€å›äº‹å°±è¡Œï¼Œä¸‹ä¸€ç¯‡å®è·µç¯‡å°†ä¼šå‘Šè¯‰ä½ Javascriptåˆ°åº•æ€ä¹ˆç©ã€‚ä»¥ä¸Šå†…å®¹ä¹Ÿè®¸ç†è§£å¤±è¯¯çš„åœ°æ–¹ï¼Œæ„Ÿè°¢å¤§å®¶ç•™è¨€æŒ‡æ­£ã€‚
å‚è€ƒæ–‡æ¡£æç‚æ¢çš„Javascriptè§†é¢‘æ•™ç¨‹ã€ŠJavascriptå®Œå…¨å­¦ä¹ æ‰‹å†Œï¼ˆä½œè€…å¼ é“¶é¹¤ç­‰ï¼‰ã€‹ã€ŠJavascriptåŸºç¡€æ•™ç¨‹ï¼ˆç¬¬ä¸ƒç‰ˆï¼Œä½œè€…Tom Negrinoã€Dori Smithï¼‰ã€‹ã€ŠJavascriptå¼€å‘æŠ€æœ¯è¯¦è§£ï¼ˆä½œè€…æå³°ã€æ™é˜³ï¼‰ã€‹ä¸€äº›æŠ€æœ¯å¤§ç‰›çš„åšå®¢â€¦â€¦
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Šè¶…è¶ŠJavaã€‹</title>
    <url>/dev-beyond-java/</url>
    <content><![CDATA[

é¢˜è®°ï¼šæ²¡æœ‰è¯­è¨€å¯ä»¥æ°¸è¿œä¿æŒé¢†å…ˆåœ°ä½ï¼ŒJavaç»Ÿæ²»çš„æ—¶ä»£å°†ä¼šç»“æŸï¼Œè¿™ä¸æ˜¯â€œä¼šä¸ä¼šâ€çš„é—®é¢˜ï¼Œè€Œæ˜¯â€œä»€ä¹ˆæ—¶å€™â€çš„é—®é¢˜ã€‚

ä¸ä¹…å‰ï¼Œæˆ‘ä»¥ä¸ºï¼ŒJavaä¼šæ˜¯æœ€æœ‰å‰é€”çš„ç¼–ç¨‹è¯­è¨€ï¼ä¸ä¹…å‰ï¼Œæˆ‘ä»¥ä¸ºï¼ŒNode.jséå¸¸å¼ºå¤§ï¼ä¸ä¹…å‰ï¼Œæˆ‘ä»¥ä¸ºï¼Œç¼–ç¨‹å¾ˆè‹¦ï¼
ç°åœ¨ï¼Œæˆ‘å‘ç°ï¼ŒJavaå¯ä»¥è¶…è¶Šï¼ç°åœ¨ï¼Œæˆ‘å‘ç°ï¼ŒNode.jsåœ¨å¾ˆå¤šæ–¹é¢æ¯”ä¸ä¸ŠFib.jsï¼ç°åœ¨ï¼Œæˆ‘å‘ç°ï¼Œç¼–ç¨‹ä¾æ—§å¾ˆè‹¦ï¼
ä¹‹å‰å†™è¿‡ä¸€ç¯‡ã€Šå‘å±•æ–¹å‘çš„æ€è€ƒã€‹ï¼Œç°åœ¨çœ‹æ¥ï¼Œå¦‚æ­¤å¹¼ç¨šã€‚é‚£ä¹ˆï¼Œæˆ‘çš„å‘å±•æ–¹å‘åˆåœ¨å“ªé‡Œå‘¢ï¼Ÿä¸å†å®šä¸‹ä»€ä¹ˆå…·ä½“çš„è¯­è¨€ï¼Œæˆ–è€…å‰ç«¯åç«¯ä¹‹ç±»ã€‚æˆ‘çš„å‘å±•æ–¹å‘ï¼Œåœ¨äºæŒæ¡å­¦ä¹ çš„èƒ½åŠ›ï¼æ²¡æœ‰ä»€ä¹ˆè¯­è¨€å’ŒæŠ€æœ¯æ˜¯ä¸ä¼šè¿‡æ—¶çš„ï¼Œæˆ‘è¦æŒæ¡çš„ï¼Œæ˜¯ä¸€ç§å¿«é€Ÿæœ‰æ•ˆå­¦ä¹ çš„èƒ½åŠ›ï¼æ¯”å¦‚ï¼Œæ¥è§¦ä¸€é—¨æ–°çš„è¯­è¨€ã€æ–°çš„å·¥å…·ï¼Œèƒ½å¤Ÿåœ¨ä¸€å‘¨æˆ–è€…æ›´çŸ­çš„æ—¶é—´å†…ä¸Šæ‰‹ï¼
ç®€è€Œè¨€ä¹‹å››ä¸ªå­—ï¼šå­¦ä¼šå­¦ä¹ ï¼


Javaä»å“ªé‡Œæ¥ï¼Ÿåˆ°å“ªé‡Œå»ï¼Ÿ1991å¹´ï¼Œsunå…¬å¸çš„James Goslingé¢†å¯¼çš„ç»¿è‰²è®¡åˆ’ï¼Œç€åŠ›å¼€å‘ä¸€ç§åˆ†å¸ƒå¼ç³»ç»Ÿç»“æ„ï¼Œä½¿å…¶èƒ½å¤Ÿåœ¨å„ç§æ¶ˆè´¹æ€§ç”µå­äº§å“ä¸Šè¿è¡Œï¼Œæ¯”å¦‚æœºé¡¶ç›’ã€‚åˆšå¼€å§‹çš„æ—¶å€™ä½¿ç”¨C++ï¼Œåæ¥å‘ç°C++çš„å„ç§ä¸è¶³ï¼Œéå¸¸è›‹ç–¼ï¼Œäºæ˜¯ç ”å‘äº†Oakï¼ˆæ©¡æ ‘ï¼‰æ¥ä»£æ›¿C++ã€‚
1994å¹´ï¼Œå› ç‰¹ç½‘è¿…é€Ÿå‘å±•ï¼Œå·¥ä¸šç•Œå¯¹é€‚åˆåœ¨ç½‘ç»œå¼‚æ„ç¯å¢ƒä¸‹ä½¿ç”¨çš„è¯­è¨€æœ‰ä¸€ç§éå¸¸æ€¥è¿«çš„éœ€æ±‚ã€‚è¿™æ—¶Jameså†³å®šå¯¹Oakè¿›è¡Œå°è§„æ¨¡çš„æ”¹é€ ï¼Œäºæ˜¯ï¼Œ1995å¹´Javaè¯ç”Ÿã€‚ï¼ˆåå­—å–ä¹‰è‡ªå¼€å‘å›¢é˜Ÿæœ€å–œæ¬¢å–çš„å’–å•¡äº§åœ°â€”â€”Javaã€‚ï¼‰
Javaæ‹¥æœ‰å·¨å¤§æ½œåŠ›ï¼Œå‘å±•è‡³ä»Šï¼Œå·²ç»æˆä¸ºå…¨ä¸–ç•Œæœ€æµè¡Œçš„ç¼–ç¨‹è¯­è¨€ï¼Œæœªæ¥ä¹Ÿå°†æ— å¤„ä¸åœ¨ã€‚ä½†æ˜¯ï¼Œå®ƒä¸å¯èƒ½ä¸€ç›´ä¿æŒé¢†å…ˆåœ°ä½ï¼Œç»ˆç©¶ä¼šè¢«å…¶ä»–æ›´ä¼˜ç§€çš„è¯­è¨€å–ä»£ã€‚
Javaçš„ç°çŠ¶1ã€Javaå·²ç»ç»“æŸäº†é¢†å¯¼è¶‹åŠ¿ï¼ˆå¤§æ¦‚åœ¨2005å¹´ï¼‰ï¼Œä¸å†æ˜¯åˆ›æ–°çš„æºå¤´ã€‚2ã€Javaä¸æ­¢ä¸€ä¸ªæ¥ç­è€…ï¼Œæœªæ¥Javaä»ç„¶æ˜¯æ— å¤„ä¸åœ¨çš„è¯­è¨€ã€‚3ã€Javaå·²ç»è¿œç¦»å®ƒçš„åŸºç¡€ï¼Œå¤§å‹ä¼ä¸šçš„é—®é¢˜è·å–å¾ˆå®¹æ˜“è§£å†³ï¼Œä½†æ˜¯ç®€å•çš„é—®é¢˜åè€Œå¾ˆéš¾è§£å†³ã€‚Ruby on Rails åœ¨æŸäº›ä¾‹å­ä¸­ï¼Œæ•ˆç‡è¿œè¿œé«˜äºJavaã€‚4ã€å¤æ‚ï¼Œé—¨æ§›é«˜ã€‚å»ºç«‹ä¸€ä¸ªç®€å•çš„webåº”ç”¨ç¨‹åºï¼Œä½¿ç”¨æœ€æ™®éçš„æ¡†æ¶ï¼Œä½ å¿…é¡»å­¦ä¼šä¸€ç®©ç­çš„çŸ¥è¯†ã€‚5ã€ä¸è‡ªç„¶çš„å»¶ä¼¸ï¼Œæ¯”å¦‚AOPæˆ–ä¾èµ–æ³¨å…¥ã€‚6ã€Javaæ³›å‹çš„å®ç°ä¸è¶³å–ã€‚
1ã€Javaç¤¾åŒºå¾ˆå¤šå¾ˆæ´»è·ƒã€‚2ã€æ‹¥æœ‰æœ€å¤šçš„å•†ä¸šå‚å•†å’Œé¡¹ç›®ã€‚3ã€å¼€æºé¡¹ç›®éå¸¸å¤šã€‚4ã€å¯ç§»æ¤æ€§å¥½ã€‚ï¼ˆJVMæ¯”Javaæ›´é‡è¦ï¼‰
ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Ÿâ€œåˆ†å¸ƒå¼çš„â€æ„å‘³ç€è®¡ç®—çš„æˆæœ¬æˆ–æ€§èƒ½å–å†³äºæ•°æ®å’Œæ§åˆ¶çš„é€šä¿¡ã€‚
å¦‚æœä¸€ä¸ªç³»ç»Ÿçš„éƒ¨ä»¶å±€é™åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œå®ƒå°±æ˜¯é›†ä¸­å¼çš„ï¼šå¦‚æœå®ƒçš„éƒ¨ä»¶åœ¨ä¸åŒåœ°æ–¹ï¼Œéƒ¨ä»¶ä¹‹é—´è¦ä¹ˆä¸å­˜åœ¨æˆ–ä»…å­˜åœ¨æœ‰é™çš„åˆä½œï¼Œè¦ä¹ˆå­˜åœ¨ç´§å¯†çš„åˆä½œï¼Œå®ƒæ˜¯åˆ†æ•£å¼çš„ã€‚
å½“ä¸€ä¸ªåˆ†æ•£å¼ç³»ç»Ÿä¸å­˜åœ¨æˆ–ä»…å­˜åœ¨æœ‰é™çš„åˆä½œæ—¶ï¼Œå®ƒå°±è¢«ç§°ä½œç½‘ç»œçš„ï¼›å¦åˆ™å®ƒå°±è¢«ç§°ä½œåˆ†å¸ƒå¼çš„ï¼Œè¡¨ç¤ºåœ¨ä¸åŒåœ°æ–¹çš„éƒ¨ä»¶ä¹‹é—´å­˜åœ¨ç´§å¯†çš„åˆä½œã€‚åœ¨ç»™å‡ºåˆ†å¸ƒå¼ç³»ç»Ÿå…·ä½“å®šä¹‰çš„æ¨¡å‹ä¸­ï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿå¯ä»¥ç”¨ç¡¬ä»¶ã€æ§åˆ¶ã€æ•°æ®è¿™ä¸‰ä¸ªç»´åº¦åŠ ä»¥æ£€éªŒã€‚
åˆ†å¸ƒå¼ç³»ç»Ÿ=åˆ†å¸ƒå¼ç¡¬ä»¶+åˆ†å¸ƒå¼æ§åˆ¶+åˆ†å¸ƒå¼æ•°æ®
åˆ†å¸ƒå¼ç³»ç»Ÿæœ‰å¾ˆå¤šä¸åŒçš„å®šä¹‰ï¼Œä½†å…¶ä¸­æ²¡æœ‰ä¸€ä¸ªæ˜¯ä»¤äººæ»¡æ„æˆ–è€…èƒ½å¤Ÿè¢«æ‰€æœ‰äººæ¥å—çš„ã€‚ä»‹ç»åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¯¹å®ƒçš„ç‰¹ç‚¹çš„ä¸‹åˆ—å¤§è‡´çš„æè¿°è¶³å¤Ÿäº†ï¼š
ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯ä¸€äº›ç‹¬ç«‹çš„è®¡ç®—æœºçš„é›†åˆï¼Œä½†æ˜¯å¯¹è¿™ä¸ªç³»ç»Ÿçš„ç”¨æˆ·æ¥è¯´ï¼Œç³»ç»Ÿå°±è±¡ä¸€å°è®¡ç®—æœºä¸€æ ·ã€‚
è¿™ä¸ªå®šä¹‰æœ‰ä¸¤ä¸ªæ–¹é¢çš„å«ä¹‰ï¼šç¬¬ä¸€ï¼Œä»ç¡¬ä»¶è§’åº¦æ¥è®²ï¼Œå„ä¸ªè®¡ç®—æœºéƒ½æ˜¯è‡ªæ²»çš„ï¼›ç¬¬äºŒï¼Œä»è½¯ä»¶è§’åº¦æ¥è®²ï¼Œç”¨æˆ·å°†æ•´ä¸ªç³»ç»Ÿçœ‹ä½œæ˜¯ä¸€å°è®¡ç®—æœºã€‚è¿™ä¸¤è€…éƒ½æ˜¯å¿…éœ€çš„ï¼Œç¼ºä¸€ä¸å¯ã€‚
POJOå’ŒEJBPOJOï¼ˆPlain Old Java Objectsï¼‰ç®€å•çš„Javaå¯¹è±¡ï¼Œå®é™…å°±æ˜¯æ™®é€šJavaBeansï¼Œæ˜¯ä¸ºäº†é¿å…å’ŒEJBæ··æ·†æ‰€åˆ›é€ çš„ç®€ç§°ã€‚
ä½¿ç”¨POJOåç§°æ˜¯ä¸ºäº†é¿å…å’ŒEJBæ··æ·†èµ·æ¥, è€Œä¸”ç®€ç§°æ¯”è¾ƒç›´æ¥. å…¶ä¸­æœ‰ä¸€äº›å±æ€§åŠå…¶getter setteræ–¹æ³•çš„ç±»,æ²¡æœ‰ä¸šåŠ¡é€»è¾‘ï¼Œæœ‰æ—¶å¯ä»¥ä½œä¸ºVO(value -object)æˆ–dto(Data Transform Object)æ¥ä½¿ç”¨.å½“ç„¶,å¦‚æœä½ æœ‰ä¸€ä¸ªç®€å•çš„è¿ç®—å±æ€§ä¹Ÿæ˜¯å¯ä»¥çš„,ä½†ä¸å…è®¸æœ‰ä¸šåŠ¡æ–¹æ³•,ä¹Ÿä¸èƒ½æºå¸¦æœ‰connectionä¹‹ç±»çš„æ–¹æ³•ã€‚
JavaBeanå®šä¹‰ï¼šä¸€ç§ç”¨Javaè¯­è¨€å†™çš„å¯é‡ç”¨ç»„ä»¶ï¼ˆæ˜¯å…·æœ‰æŸç§åŠŸèƒ½ï¼Œæˆ–è€…å¤„ç†æŸä¸ªä¸šåŠ¡çš„å¯¹è±¡ï¼‰ã€‚
ç‰¹ç‚¹ï¼šå…±æœ‰ç±»ã€æ— å‚æ„é€ ã€ç§æœ‰å±æ€§ï¼ˆå…±æœ‰çš„getã€setæ–¹æ³•ï¼‰ã€å¯ä»¥æœ‰æ–¹æ³•ï¼Œä½†ä¸ä½œä¸ºä¸šåŠ¡é€»è¾‘
ä¼˜ç‚¹ï¼šWrite onceï¼Œrun anywhereï¼Œreuse everywhereã€‚ï¼ˆWORAï¼‰
EJBï¼ˆEnterprise JavaBeanï¼‰å®šä¹‰ï¼šEJB ä»æŠ€æœ¯ä¸Šè€Œè¨€ä¸æ˜¯ä¸€ç§â€äº§å“â€ï¼Œè€Œæ˜¯ä¸€ç§æè¿°äº†æ„å»ºåº”ç”¨ç»„ä»¶è¦è§£å†³çš„æ ‡å‡†ã€‚å¯æ‰©å±• (Scalable)ã€åˆ†å¸ƒå¼ (Distributed)ã€äº‹åŠ¡å¤„ç† (Transactional)ã€æ•°æ®å­˜å‚¨ (Persistent)ã€å®‰å…¨æ€§ (Secure)ã€‚EJBæœ‰EntityBeanã€SessionBeanã€MessageDrivernBeanä¸‰ç§ã€‚
EJBçš„è¯¦è§£å‚è§ç‚¹æ»´ä¹‹æ°´çš„åšå®¢ï¼Œè®²çš„éå¸¸å¥½ã€‚
Javaçº¯é¢å‘å¯¹è±¡ï¼ŸJavaçš„åŸºæœ¬ç±»å‹å¹¶éç»§æ‰¿è‡ªObjectï¼Œæ‰€ä»¥Javaæ˜¯æ··ç§è¯­è¨€ï¼Œè€Œéçº¯é¢å‘å¯¹è±¡è¯­è¨€ã€‚å½“åˆåŸºæœ¬ç±»å‹çš„å¼•å…¥ï¼Œå®Œå…¨æ˜¯ä¸ºäº†å¸å¼•C++å¼€å‘è€…ã€‚
ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªè¯­è¨€å’Œæ“ä½œç³»ç»Ÿè”ç³»å¾ˆå¯†åˆ‡ã€‚æ¯”å¦‚C++ï¼Œå®ƒå¯ä»¥ç²¾ç¡®çš„æ§åˆ¶æ¯ä¸ªå†…å­˜å•å…ƒã€‚ä½†æ˜¯åœ¨åº”ç”¨ç¨‹åºçš„å¼€å‘ä¸­ï¼Œæ ¹æœ¬ä¸éœ€è¦å¤„ç†è¿™äº›åº•å±‚çš„ç»†èŠ‚ï¼Œæ¯”å¦‚ä½¿ç”¨Javaå¼€å‘ä¸€ä¸ªè¶…çº§ç›ä¸½æ¸¸æˆã€‚å› æ­¤ï¼ŒæŒ‰ç…§æˆ‘çš„ç†è§£ï¼Œç³»ç»Ÿç¼–ç¨‹è¯­è¨€æ˜¯å¯ä»¥å¤„ç†æ“ä½œç³»ç»Ÿç»†èŠ‚çš„ç¼–ç¨‹è¯­è¨€ã€‚
é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸‰å¤§ç‰¹ç‚¹å°è£…ã€ç»§æ‰¿å’Œå¤šæ€ã€‚ä¸ºä»€ä¹ˆæ˜¯è¿™ä¸‰å¤§ç‰¹ç‚¹ï¼Œè€Œä¸æ˜¯åˆ«çš„ï¼Ÿæˆ‘æƒ³ï¼Œæ˜¯å› ä¸ºï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€å…ˆå‡ºç°ï¼Œä¹‹åå¤§å®¶æ‰æ€»ç»“å‡ºæ¥è¿™ä¸‰å¤§ç‰¹ç‚¹ã€‚è€Œä¸æ˜¯å®šå¥½äº†ä¸‰å¤§ç‰¹ç‚¹ï¼Œæ‰å¼€å§‹è®¾è®¡é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ã€‚
ä»¥ä¸‹å†…å®¹å¼•ç”¨è‡ªVedaåŸå‹
å°è£…å°è£…æ˜¯å¯¹è±¡å’Œç±»æ¦‚å¿µçš„ä¸»è¦ç‰¹æ€§ã€‚
å°è£…ï¼Œä¹Ÿå°±æ˜¯æŠŠå®¢è§‚äº‹ç‰©å°è£…æˆæŠ½è±¡çš„ç±»ï¼Œå¹¶ä¸”ç±»å¯ä»¥æŠŠè‡ªå·±çš„æ•°æ®å’Œæ–¹æ³•åªè®©å¯ä¿¡çš„ç±»æˆ–è€…å¯¹è±¡æ“ä½œï¼Œå¯¹ä¸å¯ä¿¡çš„è¿›è¡Œä¿¡æ¯éšè—ã€‚
ç»§æ‰¿é¢å‘å¯¹è±¡ç¼–ç¨‹(OOP)è¯­è¨€çš„ä¸€ä¸ªä¸»è¦åŠŸèƒ½å°±æ˜¯â€œç»§æ‰¿â€ã€‚ç»§æ‰¿æ˜¯æŒ‡è¿™æ ·ä¸€ç§èƒ½åŠ›ï¼šå®ƒå¯ä»¥ä½¿ç”¨ç°æœ‰ç±»çš„æ‰€æœ‰åŠŸèƒ½ï¼Œå¹¶åœ¨æ— éœ€é‡æ–°ç¼–å†™åŸæ¥çš„ç±»çš„æƒ…å†µä¸‹å¯¹è¿™äº›åŠŸèƒ½è¿›è¡Œæ‰©å±•ã€‚
é€šè¿‡ç»§æ‰¿åˆ›å»ºçš„æ–°ç±»ç§°ä¸ºâ€œå­ç±»â€æˆ–â€œæ´¾ç”Ÿç±»â€ï¼Œè¢«ç»§æ‰¿çš„ç±»ç§°ä¸ºâ€œåŸºç±»â€ã€â€œçˆ¶ç±»â€æˆ–â€œè¶…ç±»â€ã€‚ç»§æ‰¿çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ä»ä¸€èˆ¬åˆ°ç‰¹æ®Šçš„è¿‡ç¨‹ã€‚
è¦å®ç°ç»§æ‰¿ï¼Œå¯ä»¥é€šè¿‡â€œç»§æ‰¿â€ï¼ˆInheritanceï¼‰å’Œâ€œç»„åˆâ€ï¼ˆCompositionï¼‰æ¥å®ç°ã€‚åœ¨æŸäº›OOPè¯­è¨€ä¸­ï¼Œä¸€ä¸ªå­ç±»å¯ä»¥ç»§æ‰¿å¤šä¸ªåŸºç±»ã€‚ä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå­ç±»åªèƒ½æœ‰ä¸€ä¸ªåŸºç±»ï¼Œè¦å®ç°å¤šé‡ç»§æ‰¿ï¼Œå¯ä»¥é€šè¿‡å¤šçº§ç»§æ‰¿æ¥å®ç°ã€‚
ç»§æ‰¿æ¦‚å¿µçš„å®ç°æ–¹å¼æœ‰ä¸‰ç±»ï¼šå®ç°ç»§æ‰¿ã€æ¥å£ç»§æ‰¿å’Œå¯è§†ç»§æ‰¿ã€‚1ã€å®ç°ç»§æ‰¿æ˜¯æŒ‡ä½¿ç”¨åŸºç±»çš„å±æ€§å’Œæ–¹æ³•è€Œæ— éœ€é¢å¤–ç¼–ç çš„èƒ½åŠ›ï¼›2ã€æ¥å£ç»§æ‰¿æ˜¯æŒ‡ä»…ä½¿ç”¨å±æ€§å’Œæ–¹æ³•çš„åç§°ã€ä½†æ˜¯å­ç±»å¿…é¡»æä¾›å®ç°çš„èƒ½åŠ›ï¼›3ã€å¯è§†ç»§æ‰¿æ˜¯æŒ‡å­çª—ä½“ï¼ˆç±»ï¼‰ä½¿ç”¨åŸºçª—ä½“ï¼ˆç±»ï¼‰çš„å¤–è§‚å’Œå®ç°ä»£ç çš„èƒ½åŠ›ã€‚
åœ¨è€ƒè™‘ä½¿ç”¨ç»§æ‰¿æ—¶ï¼Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œé‚£å°±æ˜¯ä¸¤ä¸ªç±»ä¹‹é—´çš„å…³ç³»åº”è¯¥æ˜¯â€œå±äºâ€å…³ç³»ã€‚ä¾‹å¦‚ï¼ŒEmployee æ˜¯ä¸€ä¸ªäººï¼ŒManager ä¹Ÿæ˜¯ä¸€ä¸ªäººï¼Œå› æ­¤è¿™ä¸¤ä¸ªç±»éƒ½å¯ä»¥ç»§æ‰¿ Person ç±»ã€‚ä½†æ˜¯ Leg ç±»å´ä¸èƒ½ç»§æ‰¿ Person ç±»ï¼Œå› ä¸ºè…¿å¹¶ä¸æ˜¯ä¸€ä¸ªäººã€‚
æŠ½è±¡ç±»ä»…å®šä¹‰å°†ç”±å­ç±»åˆ›å»ºçš„ä¸€èˆ¬å±æ€§å’Œæ–¹æ³•ï¼ŒOOå¼€å‘èŒƒå¼å¤§è‡´ä¸ºï¼šåˆ’åˆ†å¯¹è±¡â†’æŠ½è±¡ç±»â†’å°†ç±»ç»„ç»‡æˆä¸ºå±‚æ¬¡åŒ–ç»“æ„(ç»§æ‰¿å’Œåˆæˆ) â†’ç”¨ç±»ä¸å®ä¾‹è¿›è¡Œè®¾è®¡å’Œå®ç°å‡ ä¸ªé˜¶æ®µã€‚
å¤šæ€å¤šæ€æ€§ï¼ˆpolymorphismï¼‰æ˜¯å…è®¸ä½ å°†çˆ¶å¯¹è±¡è®¾ç½®æˆä¸ºå’Œä¸€ä¸ªæˆ–æ›´å¤šçš„ä»–çš„å­å¯¹è±¡ç›¸ç­‰çš„æŠ€æœ¯ï¼Œèµ‹å€¼ä¹‹åï¼Œçˆ¶å¯¹è±¡å°±å¯ä»¥æ ¹æ®å½“å‰èµ‹å€¼ç»™å®ƒçš„å­å¯¹è±¡çš„ç‰¹æ€§ä»¥ä¸åŒçš„æ–¹å¼è¿ä½œã€‚ç®€å•çš„è¯´ï¼Œå°±æ˜¯ä¸€å¥è¯ï¼šå…è®¸å°†å­ç±»ç±»å‹çš„æŒ‡é’ˆèµ‹å€¼ç»™çˆ¶ç±»ç±»å‹çš„æŒ‡é’ˆã€‚
å®ç°å¤šæ€ï¼Œæœ‰äºŒç§æ–¹å¼ï¼Œè¦†ç›–ï¼Œé‡è½½ã€‚1ã€è¦†ç›–(override)ï¼Œæ˜¯æŒ‡å­ç±»é‡æ–°å®šä¹‰çˆ¶ç±»çš„è™šå‡½æ•°çš„åšæ³•ã€‚2ã€é‡è½½(overload)ï¼Œæ˜¯æŒ‡å…è®¸å­˜åœ¨å¤šä¸ªåŒåå‡½æ•°ï¼Œè€Œè¿™äº›å‡½æ•°çš„å‚æ•°è¡¨ä¸åŒï¼ˆæˆ–è®¸å‚æ•°ä¸ªæ•°ä¸åŒï¼Œæˆ–è®¸å‚æ•°ç±»å‹ä¸åŒï¼Œæˆ–è®¸ä¸¤è€…éƒ½ä¸åŒï¼‰ã€‚
å…¶å®ï¼Œé‡è½½çš„æ¦‚å¿µå¹¶ä¸å±äºâ€œé¢å‘å¯¹è±¡ç¼–ç¨‹â€ï¼Œé‡è½½çš„å®ç°æ˜¯ï¼šç¼–è¯‘å™¨æ ¹æ®å‡½æ•°ä¸åŒçš„å‚æ•°è¡¨ï¼Œå¯¹åŒåå‡½æ•°çš„åç§°åšä¿®é¥°ï¼Œç„¶åè¿™äº›åŒåå‡½æ•°å°±æˆäº†ä¸åŒçš„å‡½æ•°ï¼ˆè‡³å°‘å¯¹äºç¼–è¯‘å™¨æ¥è¯´æ˜¯è¿™æ ·çš„ï¼‰ã€‚
æ¯”å¦‚æœ‰ä¸¤ä¸ªåŒåå‡½æ•°ï¼šfunction func(p:integer):integer;å’Œfunction func(p:string):integer;ã€‚é‚£ä¹ˆç¼–è¯‘å™¨åšè¿‡ä¿®é¥°åçš„å‡½æ•°åç§°å¯èƒ½æ˜¯è¿™æ ·çš„ï¼šint_funcã€str_funcã€‚å¯¹äºè¿™ä¸¤ä¸ªå‡½æ•°çš„è°ƒç”¨ï¼Œåœ¨ç¼–è¯‘å™¨é—´å°±å·²ç»ç¡®å®šäº†ï¼Œæ˜¯é™æ€çš„ï¼ˆè®°ä½ï¼šæ˜¯é™æ€ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬çš„åœ°å€åœ¨ç¼–è¯‘æœŸå°±ç»‘å®šäº†ï¼ˆæ—©ç»‘å®šï¼‰ï¼Œå› æ­¤ï¼Œé‡è½½å’Œå¤šæ€æ— å…³ï¼çœŸæ­£å’Œå¤šæ€ç›¸å…³çš„æ˜¯â€œè¦†ç›–â€ã€‚å½“å­ç±»é‡æ–°å®šä¹‰äº†çˆ¶ç±»çš„è™šå‡½æ•°åï¼Œçˆ¶ç±»æŒ‡é’ˆæ ¹æ®èµ‹ç»™å®ƒçš„ä¸åŒçš„å­ç±»æŒ‡é’ˆï¼ŒåŠ¨æ€ï¼ˆè®°ä½ï¼šæ˜¯åŠ¨æ€ï¼ï¼‰çš„è°ƒç”¨å±äºå­ç±»çš„è¯¥å‡½æ•°ï¼Œè¿™æ ·çš„å‡½æ•°è°ƒç”¨åœ¨ç¼–è¯‘æœŸé—´æ˜¯æ— æ³•ç¡®å®šçš„ï¼ˆè°ƒç”¨çš„å­ç±»çš„è™šå‡½æ•°çš„åœ°å€æ— æ³•ç»™å‡ºï¼‰ã€‚å› æ­¤ï¼Œè¿™æ ·çš„å‡½æ•°åœ°å€æ˜¯åœ¨è¿è¡ŒæœŸç»‘å®šçš„ï¼ˆæ™šç»‘å®šï¼‰ã€‚ç»“è®ºå°±æ˜¯ï¼šé‡è½½åªæ˜¯ä¸€ç§è¯­è¨€ç‰¹æ€§ï¼Œä¸å¤šæ€æ— å…³ï¼Œä¸é¢å‘å¯¹è±¡ä¹Ÿæ— å…³ï¼å¼•ç”¨ä¸€å¥Bruce Eckelçš„è¯ï¼šâ€œä¸è¦çŠ¯å‚»ï¼Œå¦‚æœå®ƒä¸æ˜¯æ™šç»‘å®šï¼Œå®ƒå°±ä¸æ˜¯å¤šæ€ã€‚â€
é‚£ä¹ˆï¼Œå¤šæ€çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œå°è£…å¯ä»¥éšè—å®ç°ç»†èŠ‚ï¼Œä½¿å¾—ä»£ç æ¨¡å—åŒ–ï¼›ç»§æ‰¿å¯ä»¥æ‰©å±•å·²å­˜åœ¨çš„ä»£ç æ¨¡å—ï¼ˆç±»ï¼‰ï¼›å®ƒä»¬çš„ç›®çš„éƒ½æ˜¯ä¸ºäº†â€”â€”ä»£ç é‡ç”¨ã€‚è€Œå¤šæ€åˆ™æ˜¯ä¸ºäº†å®ç°å¦ä¸€ä¸ªç›®çš„â€”â€”æ¥å£é‡ç”¨ï¼å¤šæ€çš„ä½œç”¨ï¼Œå°±æ˜¯ä¸ºäº†ç±»åœ¨ç»§æ‰¿å’Œæ´¾ç”Ÿçš„æ—¶å€™ï¼Œä¿è¯ä½¿ç”¨â€œå®¶è°±â€ä¸­ä»»ä¸€ç±»çš„å®ä¾‹çš„æŸä¸€å±æ€§æ—¶çš„æ­£ç¡®è°ƒç”¨ã€‚
é¢å‘å¯¹è±¡å’ŒåŸºäºå¯¹è±¡çš„åŒºåˆ«å®ƒä»¬æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼šåŸºäºå¯¹è±¡ï¼Œæ²¡æœ‰ç»§æ‰¿ï¼
OOPå’ŒAOPä»¥ä¸‹å†…å®¹æ¥è‡ªä¸æˆäº‘çš„åšå®¢
é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ï¼ˆOOPï¼‰æ–¹æ³•æ˜¯åœ¨é¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹æ–¹æ³•åŸºç¡€ä¸Šè¿›è¡Œçš„æ”¹è¿›ï¼Œè€Œé¢å‘æ–¹é¢ç¼–ç¨‹ï¼ˆAOPï¼‰æ–¹æ³•åˆæ˜¯åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰æ–¹æ³•çš„åŸºç¡€ä¸Šè¿›è¡Œæ”¹è¿›è€Œæ¥çš„ä¸€ç§åˆ›æ–°çš„è½¯ä»¶å¼€å‘æ–¹æ³•ã€‚
åŒºåˆ«ï¼šé¢å‘é¢†åŸŸä¸åŒã€‚AOPå’ŒOOPæ˜¯é¢å‘ä¸åŒé¢†åŸŸçš„ä¸¤ç§è®¾è®¡æ€æƒ³ã€‚
OOPï¼ˆé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼‰é’ˆå¯¹é—®é¢˜é¢†åŸŸä¸­ä»¥åŠä¸šåŠ¡å¤„ç†è¿‡ç¨‹ä¸­å­˜åœ¨çš„å®ä½“åŠå…¶å±æ€§å’Œæ“ä½œè¿›è¡ŒæŠ½è±¡å’Œå°è£…ï¼Œé¢å‘å¯¹è±¡çš„æ ¸å¿ƒæ¦‚å¿µæ˜¯çºµå‘ç»“æ„çš„ï¼Œå…¶ç›®çš„æ˜¯è·å¾—æ›´åŠ æ¸…æ™°é«˜æ•ˆçš„é€»è¾‘å•å…ƒåˆ’åˆ†ã€‚
è€ŒAOPåˆ™æ˜¯é’ˆå¯¹ä¸šåŠ¡å¤„ç†è¿‡ç¨‹ä¸­çš„åˆ‡é¢è¿›è¡Œæå–ï¼Œä¾‹å¦‚ï¼Œä¼ä¸šå¼€å‘ä¸­ç»å¸¸ä¼šé¢ä¸´çš„ç§ç§éåŠŸèƒ½æ€§éœ€æ±‚ï¼ˆæ“ä½œæ—¥å¿—ã€æƒé™æ§åˆ¶ã€æ€§èƒ½ç›‘æµ‹ç­‰ç­‰ï¼‰ï¼Œç”¨é¢å‘å¯¹è±¡çš„æ€è·¯ï¼Œå°†ä¸šåŠ¡æ“ä½œå¯¹è±¡çš„æ ¸å¿ƒåŠŸèƒ½å’Œå¯¹å®ƒçš„å…¶ä»–æœåŠ¡æ€§åŠŸèƒ½ä»£ç åˆ†ç¦»ï¼Œå³æŸä¸€ä¸ªæ“ä½œåœ¨å„ä¸ªæ¨¡å—ä¸­éƒ½æœ‰æ¶‰åŠï¼Œè¿™ä¸ªæ“ä½œå°±å¯ä»¥çœ‹æˆâ€œæ¨ªåˆ‡â€å­˜åœ¨äºç³»ç»Ÿå½“ä¸­ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè¿™äº›æ“ä½œéƒ½æ˜¯ä¸ä¸šåŠ¡é€»è¾‘ç›¸å…³æ€§ä¸å¼ºæˆ–è€…ä¸å±äºé€»è¾‘æ“ä½œçš„å¿…é¡»éƒ¨åˆ†ï¼Œè€Œé¢å‘å¯¹è±¡çš„æ–¹æ³•å¾ˆéš¾å¯¹è¿™ç§æƒ…å†µåšå‡ºå¤„ç†ã€‚ 
AOPåˆ™å°†è¿™äº›æ“ä½œä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ï¼Œä½¿ç¨‹åºå‘˜åœ¨ç¼–å†™ç¨‹åºæ—¶å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘çš„å¤„ç†ï¼Œè€Œåˆ©ç”¨AOPå°†è´¯ç©¿äºå„ä¸ªæ¨¡å—é—´çš„æ¨ªåˆ‡å…³æ³¨ç‚¹è‡ªåŠ¨è€¦åˆè¿›æ¥ã€‚ 
AOPæ‰€é¢å¯¹çš„æ˜¯å¤„ç†è¿‡ç¨‹ä¸­çš„æŸä¸ªæ­¥éª¤æˆ–é˜¶æ®µï¼Œå¯¹ä¸åŒçš„é˜¶æ®µé¢†åŸŸåŠ ä»¥éš”ç¦»ï¼Œå·²è·å¾—é€»è¾‘è¿‡ç¨‹ä¸­å„éƒ¨åˆ†ä¹‹é—´ä½è€¦åˆæ€§çš„éš”ç¦»æ•ˆæœï¼Œå…¶ä¸é¢å‘æ–¹é¢ç¼–ç¨‹åœ¨ç›®æ ‡ä¸Šæœ‰ç€æœ¬è´¨çš„å·®å¼‚ã€‚ 
AOPçš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯å°†åº”ç”¨ç¨‹åºä¸­çš„ä¸šåŠ¡é€»è¾‘å¤„ç†éƒ¨åˆ†åŒå¯¹å…¶æä¾›æ”¯æŒçš„é€šç”¨æœåŠ¡ï¼Œå³æ‰€è°“çš„â€œæ¨ªåˆ‡å…³æ³¨ç‚¹â€è¿›è¡Œåˆ†ç¦»ï¼Œè¿™äº›â€œæ¨ªåˆ‡å…³æ³¨ç‚¹â€è´¯ç©¿äº†ç¨‹åºä¸­çš„å¤šä¸ªçºµå‘æ¨¡å—çš„éœ€æ±‚ã€‚
å…³ç³»ï¼šAOPæ˜¯OOPçš„å»¶ç»­å’Œè¡¥å……ã€‚
AOPä¸OOPå¹¶ä¸æ˜¯ç›¸äº’ç«äº‰çš„ä¸¤ç§æŠ€æœ¯,äººä»¬ä¸æ˜¯ä¸ºäº†ä»£æ›¿OOPè€Œæå‡ºAOP,äº‹å®ä¸ŠAOPä¸OOPä¸¤è€…äº’ç›¸ä¹‹é—´æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è¡¥å……å’Œå®Œå–„ã€‚
OOPé¢å‘å¯¹è±¡ç¼–ç¨‹å…³æ³¨çš„æ˜¯å°†éœ€æ±‚åŠŸèƒ½â€œå‚ç›´â€åˆ’åˆ†ä¸ºä¸åŒçš„å¹¶ä¸”ç›¸å¯¹ç‹¬ç«‹,å°è£…è‰¯å¥½çš„ç±»,å¹¶è®©å®ƒä»¬æœ‰ç€å±äºè‡ªå·±çš„è¡Œä¸ºã€‚è‡³äºå¯¹è±¡é—´çš„å…³ç³»åˆ™ä¾é ç»§æ‰¿å’Œå¤šæ€ç­‰æ¥å®šä¹‰ï¼Œå³OOPå¼•å…¥å°è£…ã€ç»§æ‰¿å’Œå¤šæ€æ€§ç­‰æ¦‚å¿µæ¥å»ºç«‹ä¸€ç§å¯¹è±¡å±‚æ¬¡ç»“æ„ï¼Œç”¨ä»¥æ¨¡æ‹Ÿå…¬å…±è¡Œä¸ºçš„ä¸€ä¸ªé›†åˆã€‚å½“æˆ‘ä»¬éœ€è¦ä¸ºåˆ†æ•£çš„å¯¹è±¡å¼•å…¥å…¬å…±è¡Œä¸ºçš„æ—¶å€™ï¼ŒOOPåˆ™æ˜¾å¾—æ— èƒ½ä¸ºåŠ›ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒOOPå…è®¸ä½ å®šä¹‰ä»ä¸Šåˆ°ä¸‹çš„å…³ç³»ï¼Œä½†å¹¶ä¸é€‚åˆå®šä¹‰ä»å·¦åˆ°å³çš„å…³ç³»ã€‚ä¾‹å¦‚æ—¥å¿—åŠŸèƒ½ã€‚æ—¥å¿—ä»£ç å¾€å¾€æ°´å¹³åœ°æ•£å¸ƒåœ¨æ‰€æœ‰å¯¹è±¡å±‚æ¬¡ä¸­ï¼Œè€Œä¸å®ƒæ‰€æ•£å¸ƒåˆ°çš„å¯¹è±¡çš„æ ¸å¿ƒåŠŸèƒ½æ¯«æ— å…³ç³»ã€‚å¯¹äºå…¶ä»–ç±»å‹çš„ä»£ç ï¼Œå¦‚å®‰å…¨æ€§ã€å¼‚å¸¸å¤„ç†å’Œé€æ˜çš„æŒç»­æ€§ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™ç§æ•£å¸ƒåœ¨å„å¤„çš„æ— å…³çš„ä»£ç è¢«ç§°ä¸ºæ¨ªåˆ‡ï¼ˆcross-cuttingï¼‰ä»£ç ï¼Œåœ¨OOPè®¾è®¡ä¸­ï¼Œå®ƒå¯¼è‡´äº†å¤§é‡ä»£ç çš„é‡å¤ï¼Œè€Œä¸åˆ©äºå„ä¸ªæ¨¡å—çš„é‡ç”¨ã€‚
è€ŒAOPæŠ€æœ¯åˆ™æ°æ°ç›¸åï¼Œå®ƒåˆ©ç”¨ä¸€ç§ç§°ä¸ºâ€œæ¨ªåˆ‡â€çš„æŠ€æœ¯ï¼Œå°†OOPæ„å»ºçš„åºå¤§çš„ç±»ä½“ç³»ç»“æ„è¿›è¡Œè¿›ä¸€æ­¥çš„â€œæ°´å¹³â€åˆ‡å‰²ï¼Œå¹¶å°†é‚£äº›å½±å“äº†å¤šä¸ªç±»çš„å…¬å…±è¡Œä¸ºå°è£…åˆ°ä¸€ä¸ªå¯é‡ç”¨æ¨¡å—ï¼Œå°è£…æˆâ€œAspectâ€ï¼Œå³æ–¹é¢ã€‚æ‰€è°“â€œæ–¹é¢â€ï¼Œç®€å•åœ°è¯´ï¼Œå°±æ˜¯å°†é‚£äº›ä¸ä¸šåŠ¡æ— å…³ï¼Œå´ä¸ºä¸šåŠ¡æ¨¡å—æ‰€å…±åŒè°ƒç”¨çš„é€»è¾‘æˆ–è´£ä»»å°è£…èµ·æ¥ï¼Œä¾¿äºå‡å°‘ç³»ç»Ÿçš„é‡å¤ä»£ç ï¼Œé™ä½æ¨¡å—é—´çš„è€¦åˆåº¦ï¼Œå¹¶æœ‰åˆ©äºæœªæ¥çš„å¯æ“ä½œæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ 
AOPä»£è¡¨çš„æ˜¯ä¸€ä¸ªæ¨ªå‘çš„å…³ç³»ï¼Œå¦‚æœè¯´â€œå¯¹è±¡â€æ˜¯ä¸€ä¸ªç©ºå¿ƒçš„åœ†æŸ±ä½“ï¼Œå…¶ä¸­å°è£…çš„æ˜¯å¯¹è±¡çš„å±æ€§å’Œè¡Œä¸ºï¼›é‚£ä¹ˆé¢å‘æ–¹é¢ç¼–ç¨‹çš„æ–¹æ³•ï¼Œå°±ä»¿ä½›ä¸€æŠŠåˆ©åˆƒï¼Œå°†è¿™äº›ç©ºå¿ƒåœ†æŸ±ä½“å‰–å¼€ï¼Œä»¥è·å¾—å…¶å†…éƒ¨çš„æ¶ˆæ¯ã€‚è€Œå‰–å¼€çš„åˆ‡é¢ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„â€œæ–¹é¢â€äº†ã€‚ç„¶åå®ƒåˆä»¥å·§å¤ºå¤©åŠŸçš„å¦™æ‰‹å°†è¿™äº›å‰–å¼€çš„åˆ‡é¢å¤åŸï¼Œä¸ç•™ç—•è¿¹ã€‚
é¢å‘æ–¹é¢ç¼–ç¨‹åˆ™æ˜¯å¸Œæœ›èƒ½å¤Ÿå°†OOPæ„å»ºçš„åºå¤§çš„ç±»ä½“ç³»ç»“æ„è¿›è¡Œè¿›ä¸€æ­¥çš„â€œæ°´å¹³â€åˆ‡å‰²,å°†é€šç”¨éœ€æ±‚åŠŸèƒ½ä»ä¸ç›¸å…³çš„ç±»å½“ä¸­åˆ†ç¦»å‡ºæ¥, å°è£…æˆæ–¹é¢ã€‚
SOAé¢å‘æœåŠ¡æ¶æ„ã€‚
RESTè¡¨è¿°æ€§çŠ¶æ€è½¬ç§»ï¼ˆè‹±æ–‡ï¼šRepresentational State Transferï¼Œç®€ç§°RESTï¼‰æ˜¯Roy Fieldingåšå£«åœ¨2000å¹´ä»–çš„åšå£«è®ºæ–‡ä¸­æå‡ºæ¥çš„ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ã€‚å®ƒæ˜¯ä¸€ç§é’ˆå¯¹ç½‘ç»œåº”ç”¨çš„è®¾è®¡å’Œå¼€å‘æ–¹å¼ï¼Œå¯ä»¥é™ä½å¼€å‘çš„å¤æ‚æ€§ï¼Œæé«˜ç³»ç»Ÿçš„å¯ä¼¸ç¼©æ€§ã€‚
å¤æ‚çš„é—®é¢˜é©±åŠ¨æ›´é«˜çš„æŠ½è±¡æœºå™¨è¯­è¨€ -&gt;  æ±‡ç¼– -&gt; ç»“æ„åŒ–ç¼–ç¨‹ï¼ˆCï¼‰ -&gt; é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆJavaï¼‰ -&gt; ?
å…ƒç¼–ç¨‹å…ƒç¼–ç¨‹ï¼ˆMetaprogrammingï¼‰æ˜¯æŒ‡æŸç±»è®¡ç®—æœºç¨‹åºçš„ç¼–å†™ï¼Œè¿™ç±»è®¡ç®—æœºç¨‹åºç¼–å†™æˆ–è€…æ“çºµå…¶ä»–ç¨‹åºï¼ˆæˆ–è€…è‡ªèº«ï¼‰ä½œä¸ºå®ƒä»¬çš„æ•°æ®ï¼Œæˆ–è€…åœ¨è¿è¡Œæ—¶å®Œæˆéƒ¨åˆ†æœ¬åº”åœ¨ç¼–è¯‘æ—¶å®Œæˆçš„å·¥ä½œã€‚å¾ˆå¤šæƒ…å†µä¸‹æ¯”æ‰‹å·¥ç¼–å†™å…¨éƒ¨ä»£ç ç›¸æ¯”å·¥ä½œæ•ˆç‡æ›´é«˜ã€‚ç¼–å†™å…ƒç¨‹åºçš„è¯­è¨€ç§°ä¹‹ä¸ºå…ƒè¯­è¨€ï¼Œè¢«æ“ä½œçš„è¯­è¨€ç§°ä¹‹ä¸ºç›®æ ‡è¯­è¨€ã€‚ä¸€é—¨è¯­è¨€åŒæ—¶ä¹Ÿæ˜¯è‡ªèº«çš„å…ƒè¯­è¨€çš„èƒ½åŠ›ç§°ä¹‹ä¸ºåå°„ã€‚
æ³›å‹ç¼–ç¨‹æ³›å‹ç¼–ç¨‹ï¼ˆGeneric Programmingï¼‰æœ€åˆæå‡ºæ—¶çš„åŠ¨æœºå¾ˆç®€å•ç›´æ¥ï¼šå‘æ˜ä¸€ç§è¯­è¨€æœºåˆ¶ï¼Œèƒ½å¤Ÿå¸®åŠ©å®ç°ä¸€ä¸ªé€šç”¨çš„æ ‡å‡†å®¹å™¨åº“ã€‚
å››ä¸ªå‡†åˆ™ä¸‹ä¸€ä¸ªæˆåŠŸçš„ç¼–ç¨‹è¯­è¨€å¿…é¡»æ»¡è¶³å››ä¸ªä¸»è¦çš„å››ä¸ªå‡†åˆ™ï¼š1ã€éœ€è¦å»ºç«‹ä¸€ä¸ªæ˜æ˜¾çš„ç¤¾åŒºã€‚åªæœ‰è®©é‡‡ç”¨è€…å®‰å¿ƒï¼Œä»–æ‰ä¼šå»ä½¿ç”¨æ­¤æŠ€æœ¯ã€‚2ã€éœ€è¦å…·å¤‡å¯ç§»æ¤æ€§ï¼ŒJavaè™šæ‹Ÿæœºå·²ç»æé«˜äº†åç»§è¯­è¨€çš„é—¨æ§›ã€‚3ã€éœ€è¦æä¾›ç»æµä¸Šçš„åŠ¨åŠ›ã€‚ç›®å‰ï¼Œç”Ÿäº§åŠ›å¯¹æˆ‘æ¥è¯´ï¼Œçœ‹èµ·æ¥å°±åƒæ˜¯ç»æµä¸Šçš„åŠ¨æœºï¼Œä½†è¿˜æ˜¯æœ‰ä¸€äº›å…¶ä»–çš„åŠ¨æœºåœ¨å¼•è¯±ç€æˆ‘ï¼Œåƒæ— çº¿è¿ç®—ä»¥åŠæ•°æ®æœç´¢ã€‚4ã€å®ƒéœ€è¦å±•ç¤ºæŠ€æœ¯ä¼˜ç‚¹ï¼Œè¿™æ‰æ˜¯æœ€é‡è¦çš„ä¸€ç‚¹ã€‚
çŸ¥è¯†æ¬ ç¼ºRubyã€Perlã€AOPï¼ˆaspect-oriented programmingï¼‰ã€Ruby on Railsã€Pythonã€Smalltalkã€ObjCã€Subversionâ€¦â€¦
ç»“æŸè¯­è¿™æ˜¯ä¸€æœ¬å†²å‡»æ€ç»´ï¼Œå¼€å¯ä¸–ç•Œçš„ä¹¦ï¼ä¸Šé¢çš„æ‘˜å½•ï¼Œæ— æ³•å±•ç°æœ¬ä¹¦çš„åä¹‹ä¸€äºŒã€‚
æœ¬ä¹¦å¹¶éæ˜¯è¯„åˆ¤javaçš„ä¸è¶³ï¼Œè€Œæ˜¯ä»æŸç§é«˜åº¦ä¸Šè®²è¿°äº†javaä»¥åŠå¦å¤–å‡ ç§è¯­è¨€çš„ä¼˜ç¼ºç‚¹ã€é€‚åˆé¢†åŸŸï¼Œå¹¶è°ˆäº†ä¸‹ä¸€ä»£è¯­è¨€è¦å…·å¤‡ä»€ä¹ˆç‰¹ç‚¹ã€‚å€¼å¾—æ¯ä¸ªç¨‹åºå‘˜è®¤çœŸè¯»ä¸€ä¸‹ï¼
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>IoC-DIçš„Javaç¼–ç¨‹å®ç°</title>
    <url>/dev-ioc-di-experiment/</url>
    <content><![CDATA[å®éªŒè¦æ±‚åŠ æ·±å¯¹æ§åˆ¶åè½¬å’Œä¾èµ–æ³¨å…¥çš„ç†è§£ï¼Œä½¿ç”¨Springæ¡†æ¶å®ç°ä¸€ä¸ªå°çš„demoã€‚
å®éªŒé¢˜ç›®IoC-DIçš„Javaç¼–ç¨‹å®ç°åŠSpringç¨‹åºè®¾è®¡ä¸å®ç°
å®éªŒåŸç†IoCï¼ˆæ§åˆ¶åè½¬ï¼‰æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œéµä»äº†DIPï¼ˆä¾èµ–å€’ç½®åŸåˆ™ï¼‰ã€‚DIï¼ˆä¾èµ–æ³¨å…¥ï¼‰ï¼Œæ˜¯IoCçš„å®ç°æ–¹å¼ã€‚å®ƒæä¾›ä¸€ç§æœºåˆ¶ï¼Œå°†éœ€è¦ä¾èµ–ï¼ˆä½å±‚æ¨¡å—ï¼‰å¯¹è±¡çš„å¼•ç”¨ä¼ é€’ç»™è¢«ä¾èµ–ï¼ˆé«˜å±‚æ¨¡å—ï¼‰å¯¹è±¡ã€‚IoCå®¹å™¨ï¼šä¾èµ–æ³¨å…¥çš„æ¡†æ¶ï¼Œç”¨æ¥æ˜ å°„ä¾èµ–ï¼Œç®¡ç†å¯¹è±¡åˆ›å»ºå’Œç”Ÿå­˜å‘¨æœŸï¼ˆDIæ¡†æ¶ï¼‰ã€‚Springæ¡†æ¶ï¼šIoCå®¹å™¨ã€‚Springçš„IOCå®¹å™¨ä¸»è¦ä½¿ç”¨DIæ–¹å¼å®ç°çš„ã€‚ä¸éœ€è¦ä¸»åŠ¨æŸ¥æ‰¾ï¼Œå¯¹è±¡çš„æŸ¥æ‰¾ã€å®šä½å’Œåˆ›å»ºå…¨éƒ¨ç”±å®¹å™¨ç®¡ç†ã€‚

è®¾è®¡å¦‚ä¸‹ï¼šæ•°æ®å±‚æä¾›æ¥å£IPersonDaoï¼Œä¸šåŠ¡é€»è¾‘å±‚æä¾›æ¥å£IPersonServiceã€‚IPersonServiceçš„å®ç°PersonServiceä¸­é€šè¿‡Springå®¹å™¨è°ƒç”¨IPersonDaoã€‚æµ‹è¯•ç±»PersonServiceTestï¼Œé€šè¿‡Springå®¹å™¨è°ƒç”¨IPersonServiceã€‚
ç›®å½•ç»“æ„ï¼š
å®éªŒä»£ç //IPersonDao.javapackage com.voidking.ioc.dao;public interface IPersonDao &#123;		public void save();	&#125;

//PersonDaopackage com.voidking.ioc.dao.impl;import com.voidking.ioc.dao.IPersonDao;public class PersonDao implements IPersonDao &#123;	@Override	public void save() &#123;		System.out.println(&quot;------------from PersonDao.save()&quot;);	&#125;&#125;

//IPersonService.javapackage com.voidking.ioc.service;public interface IPersonService &#123;		public void processSave();&#125;

//PersonServiceTest.javapackage com.voidking.ioc.service;import org.junit.Before;import org.junit.Test;import org.springframework.beans.factory.BeanFactory;import org.springframework.context.support.ClassPathXmlApplicationContext;public class PersonServiceTest &#123;	private BeanFactory factory = null;		@Before	public void before() &#123;		factory = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);	&#125;		@Test	public void testSpring() &#123;		IPersonService personService = (IPersonService) factory.getBean(&quot;personService&quot;);		personService.processSave();	&#125;&#125;

//PersonService.javapackage com.voidking.ioc.service.impl;import com.voidking.ioc.dao.IPersonDao;import com.voidking.ioc.service.IPersonService;public class PersonService implements IPersonService &#123;	private IPersonDao personDao;		public void setPersonDao(IPersonDao personDao) &#123;		this.personDao = personDao;	&#125;	@Override	public void processSave() &#123;		System.out.println(&quot;-------------from PersonService.processSave()&quot;);				personDao.save();	&#125;&#125;


applicationContext.xmlé…ç½®æ–‡ä»¶å†…å®¹ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;	xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;	xsi:schemaLocation=&quot;     http://www.springframework.org/schema/beans      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd     http://www.springframework.org/schema/tx      http://www.springframework.org/schema/tx/spring-tx-3.0.xsd     http://www.springframework.org/schema/aop      http://www.springframework.org/schema/aop/spring-aop-3.0.xsd     http://www.springframework.org/schema/context     http://www.springframework.org/schema/context/spring-context-3.0.xsd&quot;&gt;	&lt;bean id=&quot;personDao&quot; class=&quot;com.voidking.ioc.dao.impl.PersonDao&quot;&gt;&lt;/bean&gt;		&lt;bean id=&quot;personService&quot; class=&quot;com.voidking.ioc.service.impl.PersonService&quot;&gt;		&lt;property name=&quot;personDao&quot; ref=&quot;personDao&quot;&gt;&lt;/property&gt;	&lt;/bean&gt;	&lt;/beans&gt;

pom.xmlé…ç½®æ–‡ä»¶å†…å®¹ï¼š
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;  &lt;groupId&gt;com.voidking.ioc&lt;/groupId&gt;  &lt;artifactId&gt;ioc&lt;/artifactId&gt;  &lt;packaging&gt;war&lt;/packaging&gt;  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;  &lt;name&gt;ioc Maven Webapp&lt;/name&gt;  &lt;url&gt;http://maven.apache.org&lt;/url&gt;    &lt;dependencies&gt;    &lt;dependency&gt;      &lt;groupId&gt;junit&lt;/groupId&gt;      &lt;artifactId&gt;junit&lt;/artifactId&gt;      &lt;version&gt;4.11&lt;/version&gt;    &lt;/dependency&gt;        &lt;!-- æ·»åŠ Springä¾èµ– --&gt;    &lt;dependency&gt;		&lt;groupId&gt;org.springframework&lt;/groupId&gt;		&lt;artifactId&gt;spring-core&lt;/artifactId&gt;		&lt;version&gt;3.1.1.RELEASE&lt;/version&gt;	&lt;/dependency&gt;		&lt;dependency&gt;		&lt;groupId&gt;org.springframework&lt;/groupId&gt;		&lt;artifactId&gt;spring-beans&lt;/artifactId&gt;		&lt;version&gt;3.1.1.RELEASE&lt;/version&gt;	&lt;/dependency&gt;		&lt;dependency&gt;		&lt;groupId&gt;org.springframework&lt;/groupId&gt;		&lt;artifactId&gt;spring-context&lt;/artifactId&gt;		&lt;version&gt;3.1.1.RELEASE&lt;/version&gt;	&lt;/dependency&gt;        &lt;dependency&gt;		&lt;groupId&gt;org.springframework&lt;/groupId&gt;		&lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;		&lt;version&gt;3.1.1.RELEASE&lt;/version&gt;	&lt;/dependency&gt;	  &lt;/dependencies&gt;  &lt;build&gt;    &lt;finalName&gt;ioc&lt;/finalName&gt;  &lt;/build&gt;&lt;/project&gt;

æºä»£ç ä¸‹è½½https://github.com/voidking/ioc.git
å‚è€ƒæ–‡æ¡£http://www.cnblogs.com/niuniu1985/archive/1646375.htmlhttp://www.cnblogs.com/liuhaorain/p/3747470.htmlhttp://blog.csdn.net/m13666368773/article/details/8053138
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Notepad++ä½¿ç”¨æŠ€å·§</title>
    <url>/hobby-notepadpp-skill/</url>
    <content><![CDATA[Notepad++æ¯”è¾ƒæ–‡æœ¬å†…å®¹å‚è€ƒæ–‡æœ¬å†…å®¹æ¯”è¾ƒ Notepad++ã€‚
æ’ä»¶ï¼ŒPlugin Managerï¼ŒShow Plugin Managerï¼Œæ‰¾åˆ°Compareï¼ŒInstallã€‚
æ‰“å¼€éœ€è¦å¯¹æ¯”çš„ä¸¤ä¸ªæ–‡ä»¶ï¼Œæ’ä»¶ï¼ŒCompareï¼ŒCompareã€‚æˆ–è€…ç›´æ¥ä½¿ç”¨Alt+Dã€‚


NotePad++é«˜äº®Markdownå‚è€ƒå†™äº†ä¸€ä¸ªNotepad++çš„markdownæ’ä»¶ã€notepad++å®‰è£…markdownæ’ä»¶å’ŒHow to use markdown in notepad++ï¼Œå®‰è£…markdownæ’ä»¶ã€‚
1ã€è®¿é—®Edditoriaçš„githubï¼Œä¸‹è½½markdown-plus-plusã€‚
2ã€æ‹·è´userDefineLang.xmlåˆ°Notepad++çš„å®‰è£…ç›®å½•ï¼ˆéƒåŒå­¦çš„æ˜¯D:\Program Files\Notepad++ï¼‰ï¼Œé‡å¯Notepad++ã€‚å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è¯­è¨€é€‰é¡¹ä¸­ï¼Œå¤šå‡ºäº†Markdownã€‚
3ã€å‡ºç°äº†é—®é¢˜ï¼Œå®‰è£…å®Œæˆæ²¡æœ‰æ•ˆæœï¼Œé‡å¯ä¹Ÿæ— æ•ˆã€‚åŸæ¥ï¼Œnotepad++æœ‰ä¸€ä¸ªç¼“å­˜æ–‡ä»¶å¤¹ï¼šC:\Users\Administrator\AppData\Roaming\Notepad++ï¼Œç›´æ¥åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­æ›¿æ¢userDefineLang.xmlï¼Œå†æ¬¡æ‰“å¼€ä¸€ä¸ª.mdæ–‡ä»¶æŸ¥çœ‹ï¼Œæ ¼å¼æœç„¶å‡ºç°äº†å˜åŒ–ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ è¦æ›¿æ¢è‡ªå®šä¹‰çš„markdownè¯­è¨€æ ¼å¼ï¼Œå»ºè®®ä½ åŒæ—¶æ›¿æ¢ä¸Šè¿°ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>markdown</tag>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸ºä»€ä¹ˆMVCä¸æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Ÿ</title>
    <url>/dev-mvc-design-pattern/</url>
    <content><![CDATA[GoF (Gang of Fourï¼Œå››äººç»„ï¼Œã€ŠDesign Patterns: Elements of Reusable Object-Oriented Softwareã€‹/ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦çš„ä½œè€…ï¼šErich Gammaã€Richard Helmã€Ralph Johnsonã€John Vlissides)å¹¶æ²¡æœ‰æŠŠMVCæåŠä¸ºä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œè€Œæ˜¯æŠŠå®ƒå½“åšâ€œä¸€ç»„ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ç±»é›†åˆâ€ã€‚
åœ¨ä»–ä»¬çœ‹æ¥ï¼Œå®ƒå…¶å®æ˜¯å…¶å®ƒä¸‰ä¸ªç»å…¸çš„è®¾è®¡æ¨¡å¼çš„æ¼”å˜ï¼šè§‚å¯Ÿè€…æ¨¡å¼(Observer)(Pub/Sub),ç­–ç•¥æ¨¡å¼(Strategy)å’Œç»„åˆæ¨¡å¼(Composite)ã€‚
æ ¹æ®MVCåœ¨æ¡†æ¶ä¸­çš„å®ç°ä¸åŒå¯èƒ½è¿˜ä¼šç”¨åˆ°å·¥å‚æ¨¡å¼(Factory)å’Œè£…é¥°å™¨(Decorator)æ¨¡å¼ã€‚
modelsè¡¨ç¤ºåº”ç”¨çš„æ•°æ®ï¼Œè€Œviewså¤„ç†å±å¹•ä¸Šå±•ç°ç»™ç”¨æˆ·çš„å†…å®¹ã€‚ä¸ºæ­¤ï¼ŒMVCåœ¨æ ¸å¿ƒé€šè®¯ä¸ŠåŸºäºæ¨é€/è®¢é˜…æ¨¡å‹(æƒŠè®¶çš„æ˜¯åœ¨å¾ˆå¤šå…³äºMVCçš„æ–‡ç« ä¸­å¹¶æ²¡æœ‰æåŠåˆ°)ã€‚å½“ä¸€ä¸ªmodelå˜åŒ–æ—¶å®ƒå¯¹åº”ç”¨å…¶å®ƒæ¨¡å—å‘å‡ºæ›´æ–°é€šçŸ¥(â€œpublishesâ€)ï¼Œè®¢é˜…è€…(subscriber)â€”â€”é€šå¸¸æ˜¯ä¸€ä¸ªControllerï¼Œç„¶åæ›´æ–°å¯¹åº”çš„viewã€‚è§‚å¯Ÿè€…â€”â€”è¿™ç§è‡ªç„¶çš„è§‚å¯Ÿå…³ç³»ä¿ƒè¿›äº†å¤šä¸ªviewå…³è”åˆ°åŒä¸€ä¸ª modelã€‚
å¯¹äºæ„Ÿå…´è¶£çš„å¼€å‘äººå‘˜æƒ³æ›´å¤šçš„äº†è§£è§£è€¦æ€§çš„MVC(æ ¹æ®ä¸åŒçš„å®ç°)ï¼Œè¿™ç§æ¨¡å¼çš„ç›®æ ‡ä¹‹ä¸€å°±æ˜¯åœ¨ä¸€ä¸ªä¸»é¢˜å’Œå®ƒçš„è§‚å¯Ÿè€…ä¹‹é—´å»ºç«‹ä¸€å¯¹å¤šçš„å…³ç³»ã€‚å½“è¿™ä¸ªä¸»é¢˜æ”¹å˜çš„æ—¶å€™ï¼Œå®ƒçš„è§‚å¯Ÿè€…ä¹Ÿä¼šå¾—åˆ°æ›´æ–°ã€‚Viewså’Œcontrollersçš„å…³ç³»ç¨å¾®æœ‰ç‚¹ä¸åŒã€‚Controllerså¸®åŠ©viewså¯¹ä¸åŒç”¨æˆ·çš„è¾“ å…¥åšä¸åŒçš„å“åº”ï¼Œæ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ç­–ç•¥æ¨¡å¼åˆ—å­ã€‚
æ‘˜è‡ªæ–‡æ¡£ï¼šhttp://damoqiongqiu.iteye.com/blog/1949256
]]></content>
      <categories>
        <category>engineering</category>
        <category>architecture</category>
      </categories>
  </entry>
  <entry>
    <title>å›¢é˜Ÿåšå®¢é¡¹ç›®ï¼ˆäºŒï¼‰</title>
    <url>/dev-team-blog-project-2-hello/</url>
    <content><![CDATA[hello voidkingæŸ¥çœ‹æ•ˆæœ1ã€å•å‡»webstormå³ä¸Šè§’çš„ç»¿è‰²ä¸‰è§’å½¢ï¼ˆæˆ–è€…shift+f10ï¼‰ï¼Œè¿è¡Œé¡¹ç›®ã€‚
2ã€æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥localhost:3000ï¼Œæœ‰æ²¡æœ‰çœ‹åˆ°welcome to express ï¼Ÿ
ä¿®æ”¹æ–‡å­—ä¸‹é¢æˆ‘ä»¬æŠŠwelcome to expressä¿®æ”¹ä¸ºhello voidkingï¼1ã€æ‰“å¼€viewsæ–‡ä»¶å¤¹ä¸‹çš„index.ejsï¼Œè¯¶ï¼Ÿè¿™ä¸æ˜¯htmlä»£ç å—ï¼Ÿå‘ç°æœ‰ä¸ª&lt;%= title%&gt;ï¼Œè¿™æ˜¯ä¸ªå•¥ç©æ„ï¼Ÿè¿™æ—¶ï¼Œæˆ‘ä»¬å°±è¦è§£é‡Šä¸€ä¸‹æ¨¡æ¿å¼•æ“äº†ã€‚ä¸“ä¸šä¸€ç‚¹è¯´ï¼Œæ¨¡æ¿å¼•æ“æ˜¯ä¸€ä¸ªå¯ä»¥æ ¹æ®æ¨¡æ¿ç”Ÿæˆhtmlä»£ç çš„å·¥å…·ã€‚é€šä¿—ä¸€ç‚¹è®²ï¼Œæ¨¡æ¿å¼•æ“å°±åƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸åŒçš„xå€¼å¯¹åº”ä¸åŒçš„yå€¼ã€‚æ¯”å¦‚y=x+1ï¼Œå½“x=1æ—¶y=2ã€‚è¿™é‡Œçš„xå°±ç›¸å½“äº&lt;%= title%&gt;ï¼Œyå°±ç›¸å½“äºhtmlé¡µé¢ã€‚æ‡‚äº†ï¼Ÿä¸æ‡‚æ‹‰å€’ï¼Œè‡ªå·±æ…¢æ…¢æƒ³ï¼Œè¿™ä¸æ˜¯é‡ç‚¹ã€‚2ã€çŸ¥é“äº†åŸç†ï¼Œä¿®æ”¹å°±ç®€å•äº†ï¼Œä¸å°±æ˜¯ç»™xèµ‹å€¼å˜›ï¼æ‰“å¼€routesæ–‡ä»¶å¤¹ä¸‹çš„index.jsæ–‡ä»¶ï¼Œçœ‹åˆ°è¿™æ®µä»£ç ï¼š
router.get(&#x27;/&#x27;, function(req, res) &#123;  res.render(&#x27;index&#x27;, &#123; title: &#x27;Express&#x27; &#125;);&#125;);
ä¿®æ”¹å¦‚ä¸‹ï¼š
router.get(&#x27;/&#x27;, function(req, res) &#123;  res.render(&#x27;index&#x27;, &#123; title: &#x27;voidking&#x27; &#125;);&#125;);
çœ‹æ‡‚äº†å§ï¼ŒæŠŠâ€œvoidkingâ€èµ‹å€¼ç»™äº†titleï¼Œä»…æ­¤è€Œå·²ã€‚

3ã€è¿è¡Œï¼Œçœ‹åˆ°æ•ˆæœæ²¡ï¼Ÿâ€œwelcome to voidkingâ€ï¼Œæ€ä¹ˆæ”¹æˆâ€œhello voidkingâ€ï¼Ÿå½“ç„¶æ˜¯ä¿®æ”¹index.ejsæ–‡ä»¶äº†ï¼â€œwelcome toâ€ å°±ç›¸å½“äºy=x+1ä¸­çš„1ï¼Œæ˜¯å›ºå®šçš„ã€‚
ä¸€ç‚¹è§£é‡Šä¹Ÿè®¸ä½ å·²ç»è¿è¡ŒæˆåŠŸäº†ï¼Œä½†æ˜¯ä½ è¿˜æ˜¯ä¸ç†è§£è¿™äº›ä»£ç ã€‚ä¸‹é¢æˆ‘ç®€å•è§£é‡Šä¸‹ï¼Œä¸æ‡‚æ²¡å…³ç³»ï¼Œæˆ‘ä¼šåœ¨æ¥ä¸‹æ¥çš„æ•™ç¨‹ä¸­è¯¦ç»†è§£é‡Šã€‚1ã€binæ–‡ä»¶å¤¹ï¼Œä¸ç”¨ç®¡ã€‚
2ã€node_modulesæ–‡ä»¶å¤¹ï¼Œå­˜æ”¾åŒ…ã€‚åŒ…åˆæ˜¯å•¥ç©æ„ï¼Ÿç±»æ¯”å§ï¼Œnode.jsä¸­çš„åŒ…ï¼ˆæ–‡ä»¶å¤¹ï¼‰ = javaä¸­çš„åŒ…ï¼ˆjaræ–‡ä»¶ï¼‰ã€‚
3ã€publicæ–‡ä»¶å¤¹ï¼Œå­˜æ”¾å›¾ç‰‡ç­‰èµ„æºæ–‡ä»¶ã€‚
4ã€routesæ–‡ä»¶å¤¹ï¼Œå­˜æ”¾è·¯ç”±æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸šåŠ¡å±‚å¤„ç†çš„æ–‡ä»¶ã€‚
5ã€viewsæ–‡ä»¶å¤¹ï¼Œå­˜æ”¾äº¤äº’å±‚æ–‡ä»¶ï¼Œè¿™æ¬¡é¡¹ç›®ä¸­ï¼Œä¹Ÿå°±æ˜¯ejsæ¨¡æ¿æ–‡ä»¶ã€‚
6ã€app.jsæ–‡ä»¶ï¼Œç¨‹åºå…¥å£ã€‚ä¸è¦è´¹å¿ƒå»æ‰¾â€œmainâ€å‡½æ•°äº†ï¼Œå®ƒå°±æ˜¯ï¼
7ã€package.jsonæ–‡ä»¶ï¼ŒåŒ…çš„é…ç½®æ–‡ä»¶ï¼Œç›¸å½“äºjavaçš„mavenå·¥ç¨‹ä¸­çš„pom.xmlæ–‡ä»¶ã€‚ä¹Ÿè®¸å’±ä»¬è¿™ä¸ªé¡¹ç›®ç”¨äº†å¾ˆå¤šç¬¬ä¸‰æ–¹çš„åŒ…ï¼Œé‚£ä¹ˆï¼Œåˆ«äººè¦è¿è¡Œè¿™ä¸ªé¡¹ç›®ï¼Œå¿…é¡»ä¹Ÿå®‰è£…äº†è¿™äº›åŒ…ã€‚æ‰€ä»¥ï¼Œpackage.jsonæ–‡ä»¶çš„ä¸»è¦ç›®çš„ï¼Œå°±æ˜¯è®°å½•ä¾èµ–çš„ç¬¬ä¸‰æ–¹åŒ…ã€‚è¿™æ ·ï¼Œä»£ç æ˜¯ä¸æ˜¯å¾ˆå®¹æ˜“è¿ç§»ï¼Ÿæ²¡é”™ï¼å…·ä½“å†™æ³•è¿™é‡Œä¸å±•å¼€äº†ï¼Œä¸‹æ¬¡ä¸“é—¨è¯´ä¸€ä¸‹ã€‚
8ã€ç»†å¿ƒçš„æœ‹å‹å¯èƒ½å‘ç°äº†ï¼Œä¸šåŠ¡å±‚å’Œäº¤äº’å±‚éƒ½æœ‰äº†ï¼Œé‚£ä¹ˆæ•°æ®å±‚åœ¨å“ªï¼Ÿåˆ«ç€æ€¥ï¼Œé©¬ä¸Šæˆ‘ä»¬ä¼šæ–°å»ºä¸€ä¸ªmodelsæ–‡ä»¶å¤¹ï¼Œå­˜æ”¾æ•°æ®å±‚æ–‡ä»¶ã€‚
è¡¨è¾¾çš„ä¸å¥½ï¼Œè¯·è§è°…ã€‚æ¨èä¸€æœ¬å¥½ä¹¦â€”â€”ã€Šnode.jså¼€å‘æŒ‡å—ã€‹ï¼Œbyvoidå†™çš„ï¼Œè¿™æ¬¡é¡¹ç›®æˆ‘ä¸»è¦å‚è€ƒçš„å°±æ˜¯è¿™æœ¬ä¹¦ã€‚ä¸æ‡‚çš„åœ°æ–¹ï¼Œçœ‹ä¹¦å§ï¼
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title>å›¢é˜Ÿåšå®¢é¡¹ç›®ï¼ˆä¸€ï¼‰â€”â€”åŸºç¡€æ¡†æ¶çš„æ­å»º</title>
    <url>/dev-team-blog-project-1-basic-frame/</url>
    <content><![CDATA[å¼€å‘ç¯å¢ƒä¸‹è½½å®‰è£…node.jsã€‚å®‰è£…å®Œæˆåï¼Œè¿›å…¥å‘½ä»¤æç¤ºç¬¦ç•Œé¢ï¼Œè¾“å…¥node --versionï¼Œå¦‚æœèƒ½å‡ºç°nodeçš„ç‰ˆæœ¬å·ï¼Œåˆ™è¯´æ˜å®‰è£…æˆåŠŸã€‚
å¼€å‘å·¥å…·çš„é€‰ç”¨javaç¨‹åºå¼€å‘ï¼Œæˆ‘å–œæ¬¢eclipseï¼›node.jsç¨‹åºå¼€å‘ï¼Œæˆ‘é€‰æ‹©çš„å·¥å…·æ˜¯webstormã€‚è‡³äºè½¯ä»¶ä¸‹è½½ç ´è§£å•¥çš„ï¼Œéƒ½æ˜¯åŸºæœ¬åŠŸï¼Œåœ¨æ­¤ä¸èµ˜è¿°ã€‚
ç”ŸæˆåŸºæœ¬ç›®å½•å’Œæ–‡ä»¶1ã€æ‰“å¼€webstormï¼Œfile -&gt; new project
2ã€è¾“å…¥project nameï¼Œé€‰æ‹©locationï¼Œproject typeé€‰æ‹©node.js express app
3ã€node.js interpreterå’Œnpm excutableçš„ä½ç½®é»˜è®¤å°±å¥½ï¼ˆè‡ªåŠ¨è¯»å–ï¼‰ï¼Œversion of express-generatoré€‰æ‹©æœ€æ–°ç‰ˆ4.9.0ï¼Œtemplate engineé€‰æ‹©ejsï¼Œcss engineé€‰æ‹©plain cssã€‚
4ã€okï¼Œthis windowï¼Œå¦‚æœæ¥ä¸‹æ¥å¼¹å‡ºconfigure node.js v0.10.31 core modules sourcesï¼Œç›´æ¥ç‚¹cancelå°±å¥½ï¼Œç”¨ä¸åˆ°ã€‚
5ã€å¥½äº†ï¼Œé¡¹ç›®åŸºç¡€æ¡†æ¶æ­å»ºå¥½äº†ï¼Œçœ‹ä¸‹æ•ˆæœï¼š
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title>å›¢é˜Ÿåšå®¢é¡¹ç›®æ€»ç»“</title>
    <url>/dev-team-blog-project-summary/</url>
    <content><![CDATA[20å¤©è¿™æ¬¡é¡¹ç›®çš„ä»»åŠ¡æ˜¯ï¼šå¼€å‘ä¸€ä¸ªé€‚ç”¨äºå›¢é˜Ÿçš„åšå®¢ã€‚ä»9æœˆ27æ¥æ‰‹ä»»åŠ¡ï¼Œåˆ°10æœˆ17é¡¹ç›®ä¸Šçº¿ï¼Œ20å¤©å·¦å³ã€‚åŠ ç­åŠ ç‚¹ï¼Œä¸€è·¯èµ°è¿‡ï¼Œæ”¶è·é¢‡ä¸°ã€‚ç°åœ¨ï¼Œé¡¹ç›®éªŒæ”¶å®Œæ¯•ï¼Œæ˜¯æ—¶å€™å¹å¹ç‰›äº†ï¼
node.js + express + ejs + mongodb + bootstrapèµ·åˆï¼Œæœ‰ç»„å‘˜æå‡ºä½¿ç”¨Java EEï¼Œå› ä¸ºæˆ‘ä»¬ä¹‹å‰ç”¨å®ƒå¼€å‘äº†å¤åˆäººæ‰ç½‘ï¼Œæ¯”è¾ƒç†Ÿæ‚‰ã€‚è¿™ä¸ªæè®®è¢«æˆ‘å¦å®šäº†ï¼Œç†ç”±æ˜¯æ€é¸¡ç”¨ç‰›åˆ€ã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬å†³å®šä½¿ç”¨ä»æ¥éƒ½æ²¡æœ‰æ¥è§¦è¿‡çš„node.jsï¼Œè¾¹å­¦è¾¹åšï¼Œè¿™ä¹Ÿç¬¦åˆæˆ‘ä»¬åšå¼€å‘çš„æœ€ç»ˆç›®çš„â€”â€”å­¦ä¹ ã€‚

ä»€ä¹ˆéƒ½ä¸æ‡‚ï¼Œæ ¹æœ¬æ— ä»ä¸‹æ‰‹ï¼Œé‚£å°±å­¦ä¹ å§ï¼æ‰¾äº†å¾ˆå¤šèµ„æ–™æ¥çœ‹ï¼Œæ¥è§¦åˆ°äº†å¾ˆå¤šæœ‰è¶£çš„ä¸œè¥¿ã€‚å¤§æ¦‚ä¸€å‘¨åï¼Œæˆ‘æ‰å¯¹node.jsæœ‰äº†æ¯”è¾ƒæ¸…æ™°çš„è®¤è¯†ã€‚
å­¦ä¸€ç‚¹ï¼Œç”¨ä¸€ç‚¹ï¼Œç»è¿‡è‰°è¾›çš„æ¢ç´¢ã€æµ‹è¯•ï¼Œæˆ‘ä»¬æ‰é€‰å‡ºäº†æœ€ç»ˆçš„æ¡†æ¶â€”â€”node.js + express + ejs + mongodb + bootstrapã€‚
ä¾‹ä¼šä¸‰å¤©ä¸€æ¬¡ï¼Œäº¤æµç»éªŒï¼Œåˆ†é…ä»»åŠ¡ï¼Œäº¤æµç»éªŒï¼Œåˆ†é…ä»»åŠ¡â€¦â€¦äº’ç›¸å€Ÿé‰´å½¼æ­¤å®ç°çš„åŠŸèƒ½æ¨¡å—ï¼Œä¸¤æ¡çº¿ï¼ŒåŸºæœ¬ä¸Šéƒ½å·²ç»å®Œæˆã€‚
æ”¶è·æœ€å¤§çš„æ”¶è·ï¼Œåœ¨äºæ‰©å®½äº†çœ¼ç•Œï¼Œå¯¹äºç¼–ç¨‹å·¥å…·çš„é€‰ç”¨ï¼Œæœ‰äº†æ›´å¤šçš„æ€è·¯ã€‚
å…¶ä»–æˆ‘åœ¨è€ƒè™‘ï¼Œæ˜¯å¦è¦æŠŠåšé¡¹ç›®çš„æ­¥éª¤å†™ä¸‹æ¥ï¼Œæ¯•ç«Ÿè¿™æ˜¯ä¸€ç¬”å®è´µçš„ç»éªŒã€‚ä½†æ˜¯éƒåŒå­¦å®åœ¨æ˜¯æ‡’åˆ°ä¸è¡Œï¼Œä¸èƒ½ç¡®å®šæ˜¯å¦å¯ä»¥åšæŒä¸‹æ¥ï¼Œå†™æ•™ç¨‹å¤ªç´¯äº†ã€‚ï¼ˆ10åˆ†é’Ÿåâ€¦â€¦ï¼‰å†³å®šäº†ï¼Œå†™ï¼ï¼ï¼æƒå½“å¤ä¹ äº†ï¼Œä¹Ÿä¸ºåæ¥è€…æä¾›ä¸€ç‚¹ç‚¹å¸®åŠ©ã€‚æ…¢æ…¢å†™ï¼Œä¸ç€æ€¥ï¼Œæ¬§è€¶ï¼

æœ€åï¼Œé™„ä¸Šå‡ å¼ æ•ˆæœå›¾å§ï¼
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title>é‚£äº›å¹´é‡åˆ°çš„å¥‡è‘©é—®é¢˜</title>
    <url>/hobby-strange-questions/</url>
    <content><![CDATA[1ã€æˆ‘çš„æ–‡æ¡£ç§»åŠ¨åˆ°â€œD:\â€ï¼Œç„¶åå†ä¹Ÿç§»åŠ¨ä¸å›å»äº†â€¦â€¦å› ä¸ºæ–‡ä»¶å¤¹å±æ€§é‡Œçš„â€œä½ç½®â€æ²¡æœ‰äº†ã€‚
2ã€VM9ç¨‹åºå¯åŠ¨ç‰¹åˆ«æ…¢ï¼ˆä¸Šä¸ªç³»ç»Ÿæ—¶æŒºå¿«çš„ï¼‰ï¼Œä¼°è®¡30ç§’å·¦å³ã€‚
3ã€windows media centreæ€ä¹ˆè®¾ç½®éƒ½å¤±è´¥ã€‚
4ã€å®‰è£…office2010å’Œvc2008ï¼Œé”™è¯¯1317,.å°è¯•åˆ›å»ºç›®å½•c:\programdata\microsoft\windows\star menuæ—¶å‘ç”Ÿé”™è¯¯ï¼Œé”™è¯¯1303ã€‚
5ã€pptæ— æ³•è¾“å…¥ä¸­æ–‡ï¼ŒæŒ‰ç…§ç½‘ä¸Šæ–¹æ³•å†™å…¥æ³¨å†Œè¡¨ä¸œè¥¿è¿˜æ˜¯ä¸è¡Œã€‚
6ã€æ¡Œé¢æ–‡ä»¶é‡å‘½åæ— æ³•å…¨é€‰ã€‚
6ã€å®‰å“å„ä¸ªé•œåƒç‰ˆæœ¬çš„åŒºåˆ«

7ã€C++é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡æ‰¾ä¸åˆ°pdfæ ¼å¼çš„ç”µå­ä¹¦
8ã€360æ‰‹æœºåŠ©æ‰‹æ¯æ¬¡è¿æ¥æ‰‹æœºéƒ½ä¼šè“å±
9ã€oracleå®‰è£…æŠ¥é”™æ£€æŸ¥æ“ä½œç³»ç»Ÿç‰ˆæœ¬: å¿…é¡»æ˜¯5.1 or 5.2ã€‚å®é™…ä¸º 6.1æœªé€šè¿‡
10ã€æŠŠä¸€ç¯‡pdfè½¬æˆwordä¹‹åï¼Œåœ¨æ¯è¡Œçš„æœ«å°¾å‡ºç°äº†å¾ˆå¤šçš„å›è½¦ç¬¦
11ã€å°ç”²é±¼çš„TABé”®
12ã€è™šæ‹ŸæœºXPçªç„¶ä¸èƒ½ä¸Šç½‘äº†ï¼Œç™¾åº¦æç¤ºDNSé”™è¯¯ï¼Œæ€ä¹ˆä¹Ÿå¼„ä¸å¥½
14ã€çº¢å¸½linuxä¸­viç¼–è¾‘å™¨æ— æ³•æ˜¾ç¤ºé¢œè‰²
15ã€åœ¨æˆ‘çš„ç”µè„‘ä¸Šï¼Œmyeclipseæ— è®ºå¦‚ä½•éƒ½æ— æ³•ç ´è§£ï¼
16ã€2010excelå‘ç°ä¸å¯è¯»å–çš„å†…å®¹,æ˜¯å¦æ¢å¤æ­¤å·¥ä½œè–„çš„å†…å®¹
17ã€pl/sqlåœ¨64ä½win7ä¸‹ä¸å¯ä»¥ä½¿ç”¨
18ã€ubuntuä¸èƒ½ç”¨rootç”¨æˆ·ç™»å½•
19ã€è¯„è®ºæ¡†ç”±Dengluæä¾›
20ã€voidking.gitcafe.comä¸å¯ä»¥è®¿é—®ï¼Œä½†æ˜¯å®ƒè§£æçš„å…¶ä»–ç½‘å€å´å¯ä»¥è®¿é—®ï¼
21ã€å›¾ä¹¦ç®¡ç†ç³»ç»Ÿä½¿ç”¨mysqlæ•°æ®åº“ï¼Œå­˜å…¥ä¸­æ–‡æ•°æ®å˜æˆä¹±ç ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
  </entry>
  <entry>
    <title>å¼•æ“æ˜¯ä»€ä¹ˆï¼Ÿ</title>
    <url>/hobby-what-is-engine/</url>
    <content><![CDATA[å…³äºå¼•æ“çš„æ€è€ƒç»å¸¸çœ‹åˆ°å¼•æ“è¿™ä¸ªè¯ï¼Œæ¯”å¦‚æœç´¢å¼•æ“ï¼Œæ¸¸æˆå¼•æ“ï¼Œæµè§ˆå™¨å¼•æ“ï¼Œjavascriptå¼•æ“ï¼Œnode.jsçš„javascriptå¼•æ“æ˜¯V8â€¦â€¦ç™¾åº¦ä¹‹ï¼Œæœåˆ°çš„éƒ½æ˜¯æœºæ¢°ä¸Šçš„å¼•æ“è§£é‡Šã€‚é‚£ä¹ˆï¼Œåœ¨çŒ¿ç±»çš„ä¸–ç•Œé‡Œï¼Œå¼•æ“åˆ°åº•æ˜¯å•¥ä¸œè¥¿ï¼Ÿ
ç»“è®ºä¸ªäººè®¤åŒæœ€ä½³è§£é‡Šï¼šå¼•æ“æ˜¯æœ€æ ¸å¿ƒçš„æ–¹æ³•ã€ç»„ä»¶æˆ–è€…æ¨¡å—ã€‚
ç†ç”±ç»è¿‡å‘å¤§ç¥è¯·æ•™ï¼Œä»¥åŠç¾¤ç»„è®¨è®ºï¼Œå¾—åˆ°äº†å¾ˆå¤šè§è§£ã€‚ä¸ä¿è¯æ­£ç¡®æ€§ï¼Œä¸‹é¢è®°å½•ä¸€äº›ä¸ªäººè®¤åŒçš„è§‚ç‚¹ã€‚

æœ€æ ¸å¿ƒçš„æ–¹æ³•ï¼Œæ¯”å¦‚æœç´¢å¼•æ“å°±è¡¨ç¤ºä½ æ˜¯ç”¨çš„ä»€ä¹ˆæœç´¢æ–¹å¼ï¼Œä¼—æ‰€å‘¨çŸ¥ï¼ŒGOOGLEçš„æœç´¢è¦æ¯”ç™¾åº¦å¥½ï¼Œå°±æ˜¯å¼•æ“åšå¾—å¥½ã€‚


æœ€æ ¸å¿ƒçš„ç»„ä»¶ï¼Œæ¯”å¦‚æ¸¸æˆå¼•æ“æ˜¯ç›´æ¥å½±å“ç€ä½ æ˜¯3Dè¿˜æ˜¯2Dã€‚çœ‹ä¸€æ¬¾æ¸¸æˆå¥½ä¸å¥½ï¼Œå…¶å®å¼•æ“å°±å†³å®šäº†ã€‚QQæ–—åœ°ä¸»å’Œé­”å…½ä¸–ç•Œå°±å®Œå…¨ä¸åŒï¼Œè™½ç„¶ä¸¤è€…éƒ½å«æ¸¸æˆï¼›æŸäº›ç½‘æ¸¸åŸºæœ¬éƒ½ä¸€æ ·ç©æ³•ï¼Œå°±æ˜¯å¼•æ“ä¸€æ ·ã€‚


linuxç³»ç»Ÿå¾ˆå¤šï¼Œä½†æ˜¯ä½¿ç”¨çš„linuxå†…æ ¸ä¸€æ ·ï¼Œå†…æ ¸å°±ç›¸å½“äºå¼•æ“ã€‚è®¡ç®—æœºç§ç±»å¾ˆå¤šï¼Œä½†æ˜¯å¾ˆå¤šè®¡ç®—æœºéƒ½ä½¿ç”¨Intelçš„CPUï¼ŒCPUå°±ç›¸å½“äºå¼•æ“ã€‚æ±½è½¦ç§ç±»å¾ˆå¤šï¼Œä½†æ˜¯å¾ˆå¤šæ±½è½¦éƒ½æ˜¯ç”¨çš„åŒæ ·çš„å‘åŠ¨æœºï¼ˆå¼•æ“ï¼‰ã€‚æ±½è½¦çš„è´¨é‡ä¹Ÿæ˜¯çœ‹å‘åŠ¨æœºï¼Œå·®çš„å‘åŠ¨æœºè‚¯å®šæ˜¯åšä¸å‡ºæ¥æ³•æ‹‰åˆ©èµ›è½¦çš„ã€‚

é™„å½•
å¼•æ“ä¸€èˆ¬ç”¨C++ç¼–å†™ã€‚


å¼•æ“æ›´é‡è¦çš„æ˜¯æ–¹æ³•å’Œç†å¿µã€‚

2016.11.08æ›´æ–°ä¸€ä½è€å¸ˆç»™å‡ºçš„è§£é‡Šï¼šç»™å‡ºä¸€äº›ä¸œè¥¿ï¼Œè¿”å›å¦ä¸€äº›ä¸œè¥¿ï¼Œè¿™å°±æ˜¯å¼•æ“ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>æ€è€ƒ</tag>
      </tags>
  </entry>
  <entry>
    <title>Node.jså­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰</title>
    <url>/dev-nodejs-note-2/</url>
    <content><![CDATA[æ•´ç†è‡ªï¼šæ…•è¯¾ç½‘
ä¼ªé€ æ¨¡æ¿æ•°æ®è·‘é€šå‰åç«¯äº¤äº’æµç¨‹æœ¬ç¯‡åšå®¢ç”¨åˆ°çš„ä»£ç ï¼Œå°ä¼™ä¼´ä»¬ç›´æ¥å¤åˆ¶ç²˜è´´å°±å¯ä»¥äº†ï¼Œä½ ä»¬å¯çŸ¥é“éƒåŒå­¦ä¸€è¡Œè¡Œæ•²å¾—å¤šä¹ˆè¾›è‹¦T_Tï¼Œå¤åˆ¶ç²˜è´´å‰ç»™ä¸ªèµå•Šï¼
å·¥ç¨‹ç»“æ„helloworld/  -bower_components/  -node_modules/  -views/    -includes/      -head.jade      -header.jade    -pages/      -index.jade      -detail.jade      -admin.jade      -list.jade    -layout.jade  -app.js

æ“ä½œæ­¥éª¤æˆ‘ä»¬åœ¨ä¸Šæ¬¡helloworldå·¥ç¨‹çš„åŸºç¡€ä¸Šæ¥ç€åšï¼1ã€åœ¨viewsæ–‡ä»¶å¤¹ä¸‹æ–°å»ºæ–‡ä»¶å¤¹includeså’Œpages2ã€åœ¨viewsæ–‡ä»¶å¤¹ä¸‹ï¼Œåˆ é™¤index.jadeï¼Œæ–°å»ºlayout.jadeï¼Œè¾“å…¥å†…å®¹ï¼š
doctypehtml	head		meta(charset=&quot;utf-8&quot;)		title #&#123;title&#125;		include ./includes/head	body		include ./includes/header		block content
3ã€åœ¨includesæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºæ–‡ä»¶head.jadeå’Œheader.jadeï¼Œåˆ†åˆ«è¾“å…¥å†…å®¹ï¼š
link(href=&quot;/bootstrap/dist/css/bootstrap.min.css&quot;,rel=&quot;stylesheet&quot;)script(src=&quot;/jquery/dist/jquery.min.js&quot;)script(src=&quot;/bootstrap/dist/js/bootstrap.min.js&quot;)
.container	.row		.page-header			h1 #&#123;title&#125;			small å¤©å°ç”µå½±
4ã€åœ¨pagesæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºæ–‡ä»¶index.jadeã€detail.jadeã€admin.jadeå’Œlist.jadeï¼Œåˆ†åˆ«è¾“å…¥å†…å®¹ï¼š
extends ../layoutblock content	.container		.row			each item in movies				.col-md-2					.thumbnail						a(href=&quot;/movie/#&#123;item._id&#125;&quot;)							img(src=&quot;#&#123;item.poster&#125;&quot;,alt=&quot;#&#123;item.title&#125;&quot;)						.caption							h3 #&#123;item.title&#125;							p: a.btn.btn-primary(href=&quot;/movie/#&#123;item._id&#125;&quot;,role=&quot;button&quot;)								è§‚çœ‹é¢„å‘Šç‰‡
extends ../layoutblock content	.container		.row			.col-md-7				embed(src=&quot;#&#123;movie.flash&#125;&quot;,allowFullScreen=&quot;true&quot;,quality=&quot;high&quot;,width=&quot;720&quot;,height=&quot;500&quot;,align=&quot;middle&quot;,type=&quot;application/x-shock&quot;)			.col-md-5				dl.dl-horizontal					dt ç”µå½±åå­—					dd= movie.title					dt å¯¼æ¼”					dd= movie.doctor					dt å›½å®¶					dd= movie.country					dt è¯­è¨€					dd= movie.language					dt ä¸Šæ˜ å¹´ä»½					dd= movie.year					dt ç®€ä»‹					dd= movie.summary
extends ../layoutblock content	.container		.row			form.form-horizontal(method=&quot;post&quot;,action=&quot;/admin/movie/new&quot;)				.form-group					label.col-sm-3.control-label(for=&quot;inputTitle&quot;) ç”µå½±åå­—					.col-sm-10						input#inputTitle.form-control(type=&quot;text&quot;,name=&quot;movie[title]&quot;,value=&quot;#&#123;movie.title&#125;&quot;)				.form-group					label.col-sm-3.control-label(for=&quot;inputDoctor&quot;) å¯¼æ¼”					.col-sm-10						input#inputTitle.form-control(type=&quot;text&quot;,name=&quot;movie[doctor]&quot;,value=&quot;#&#123;movie.doctor&#125;&quot;)				.form-group					label.col-sm-3.control-label(for=&quot;inputCountry&quot;) å›½å®¶					.col-sm-10						input#inputTitle.form-control(type=&quot;text&quot;,name=&quot;movie[country]&quot;,value=&quot;#&#123;movie.country&#125;&quot;)				.form-group					label.col-sm-3.control-label(for=&quot;inputLanguage&quot;) è¯­è¨€					.col-sm-10						input#inputTitle.form-control(type=&quot;text&quot;,name=&quot;movie[language]&quot;,value=&quot;#&#123;movie.language&#125;&quot;)				.form-group					label.col-sm-3.control-label(for=&quot;inputYear&quot;) ä¸Šæ˜ å¹´ä»½					.col-sm-10						input#inputTitle.form-control(type=&quot;text&quot;,name=&quot;movie[year]&quot;,value=&quot;#&#123;movie.year&#125;&quot;)				.form-group					label.col-sm-3.control-label(for=&quot;inputSummary&quot;) ç®€ä»‹					.col-sm-10						input#inputTitle.form-control(type=&quot;text&quot;,name=&quot;movie[summary]&quot;,value=&quot;#&#123;movie.summary&#125;&quot;)										.form-group					label.col-sm-3.control-label(for=&quot;inputPoster&quot;) æµ·æŠ¥åœ°å€					.col-sm-10						input#inputTitle.form-control(type=&quot;text&quot;,name=&quot;movie[poster]&quot;,value=&quot;#&#123;movie.poster&#125;&quot;)				.form-group					label.col-sm-3.control-label(for=&quot;inputFlash&quot;) ç‰‡æºåœ°å€					.col-sm-10						input#inputTitle.form-control(type=&quot;text&quot;,name=&quot;movie[flash]&quot;,value=&quot;#&#123;movie.flash&#125;&quot;)																.form-group					.col-sm-offset-2.col-sum-10					button.btn.btn-default(type=&quot;submit&quot;) å½•å…¥
extends ../layoutblock content	.container		.row			table.table.table-hover.table-bordered				thead					tr						th ç”µå½±åç§°						th å¯¼æ¼”						th å›½å®¶						th ä¸Šæ˜ å¹´ä»½						//- th å½•å…¥æ—¶é—´						th æŸ¥çœ‹						th ä¿®æ”¹						th åˆ é™¤				tbody					each item in movies						tr(class=&quot;item-id-#&#123;item._id&#125;&quot;)							td #&#123;item.title&#125;							td #&#123;item.doctor&#125;							td #&#123;item.country&#125;							td #&#123;item.year&#125;							//- td #&#123;moment(item.meta.createdAt).format(&#x27;MM/DD/YYYY&#x27;)&#125;							td: a(target=&quot;_blank&quot;,href=&quot;../movie/#&#123;item._id&#125;&quot;) æŸ¥çœ‹							td: a(target=&quot;_blank&quot;,href=&quot;../admin/update/#&#123;item._id&#125;&quot;) ä¿®æ”¹							td								button.btn.btn-danger.del(type=&quot;button&quot;,data-id=&quot;#&#123;item._id&#125;&quot;) åˆ é™¤													
5ã€ä¿®æ”¹helloworldæ–‡ä»¶å¤¹ä¸‹app.jsï¼Œä¸»è¦æ˜¯åŠ å…¥æ¨¡æ‹Ÿæ•°æ®ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
var express = require(&#x27;express&#x27;);var path = require(&#x27;path&#x27;);var port = process.env.PORT || 3000 ;var app = express();app.set(&#x27;views&#x27;,&#x27;./views/pages&#x27;);app.set(&#x27;view engine&#x27;,&#x27;jade&#x27;);app.use(express.bodyParser());app.use(express.static(path.join(__dirname, &#x27;bower_components&#x27;)));app.listen(port);console.log(&#x27;helloworld started on port &#x27; + port);app.get(&#x27;/&#x27;, function(req, res)&#123;  res.render(&#x27;index&#x27;,&#123;  title:&#x27;é¦–é¡µ&#x27;,  movies: [	  &#123;		title: &#x27;æœºæ¢°æˆ˜è­¦&#x27;,		_id: 1,		poster: &#x27;http://ihelloworld.qiniudn.com/%40%2Fimgs%2FiNJIT.jpg&#x27;,	  &#125;,	  &#123;		title: &#x27;æœºæ¢°æˆ˜è­¦&#x27;,		_id: 2,		poster: &#x27;http://ihelloworld.qiniudn.com/%40%2Fimgs%2FiNJIT.jpg&#x27;,	  &#125;    ]  &#125;)&#125;)app.get(&#x27;/movie/:id&#x27;, function(req, res)&#123;  res.render(&#x27;detail&#x27;,&#123;  title:&#x27;è¯¦æƒ…é¡µ&#x27;,  movie: &#123;	doctor: &#x27;æœªçŸ¥&#x27;,	country: &#x27;ç¾å›½&#x27;,	title: &#x27;æœºæ¢°æˆ˜è­¦&#x27;,	year: &#x27;2014&#x27;,	poster: &#x27;http://ihelloworld.qiniudn.com/%40%2Fimgs%2FiNJIT.jpg&#x27;,	language: &#x27;è‹±è¯­&#x27;,	flash: &#x27;http://player.youku.com/player.php/sid/XNjM3Njc3MTY4/v.swf&#x27;,	summary: &#x27;æ— &#x27;,  &#125;  &#125;)&#125;)app.get(&#x27;/admin/movie&#x27;, function(req, res)&#123;  res.render(&#x27;admin&#x27;,&#123;  title:&#x27;åå°å½•å…¥é¡µ&#x27;,  movie: &#123;	doctor: &#x27;&#x27;,	country: &#x27;&#x27;,	title: &#x27;&#x27;,	year: &#x27;&#x27;,	poster: &#x27;&#x27;,	language: &#x27;&#x27;,	flash: &#x27;&#x27;,	summary: &#x27;&#x27;,  &#125;  &#125;)&#125;)app.get(&#x27;/admin/list&#x27;, function(req, res)&#123;  res.render(&#x27;list&#x27;,&#123;  title:&#x27;åˆ—è¡¨é¡µ&#x27;,  movies: [	  &#123;		_id: 1,		doctor: &#x27;æœªçŸ¥&#x27;,		country: &#x27;ç¾å›½&#x27;,		title: &#x27;æœºæ¢°æˆ˜è­¦&#x27;,		year: &#x27;2014&#x27;,		poster: &#x27;http://ihelloworld.qiniudn.com/%40%2Fimgs%2FiNJIT.jpg&#x27;,		language: &#x27;è‹±è¯­&#x27;,		flash: &#x27;http://player.youku.com/player.php/sid/XNjM3Njc3MTY4/v.swf&#x27;,		summary: &#x27;æ— &#x27;,	  &#125;,	  &#123;		_id: 2,		doctor: &#x27;æœªçŸ¥&#x27;,		country: &#x27;ç¾å›½&#x27;,		title: &#x27;æœºæ¢°æˆ˜è­¦&#x27;,		year: &#x27;2014&#x27;,		poster: &#x27;http://ihelloworld.qiniudn.com/%40%2Fimgs%2FiNJIT.jpg&#x27;,		language: &#x27;è‹±è¯­&#x27;,		flash: &#x27;http://player.youku.com/player.php/sid/XNjM3Njc3MTY4/v.swf&#x27;,		summary: &#x27;æ— &#x27;,	  &#125;  ]  &#125;)&#125;)
æŠ¥é”™å¤„ç†è‡³æ­¤ï¼Œå·²ç»æ•²å®Œäº†Scottå¤§ç¥ç»™çš„ä»£ç ï¼Œé©¬ä¸Šå°±èƒ½çœ‹åˆ°æ•ˆæœäº†ï¼Œå¥½æ¿€åŠ¨ï¼å“å‘¦æˆ‘é ï¼æŠ¥é”™ï¼Œæˆ‘æ”¹ï¼åˆæŠ¥é”™ï¼Œæˆ‘å†æ”¹ï¼è¿˜æŠ¥é”™â€¦â€¦è¯¶ï¼Ÿåäº†ï¼Œæ”¹ä¸å‡ºæ¥äº†ï¼è®°å½•é”™è¯¯å¦‚ä¸‹ï¼šç™¾åº¦â€œnodejsä½¿ç”¨app.use(express.bodyParser());å‡ºé”™â€ï¼Œå¾—åˆ°å¦‚ä¸‹ç»“è®ºï¼š1ã€node.jså’Œwindowsçš„å…¼å®¹æ€§ä¸å¦‚POSIXæ“ä½œç³»ç»Ÿï¼Œå› æ­¤npmæä¾›ç»™windowsçš„ç¬¬ä¸‰æ–¹æ¨¡å—è¾ƒå°‘ã€‚2ã€bodyParserä»¥å‰æ˜¯é›†æˆåœ¨expressä¸­çš„ï¼Œç°åœ¨éœ€è¦å•ç‹¬å®‰è£…ã€‚æ— è®ºå“ªä¸ªç»“è®ºï¼Œè§£å†³åŠæ³•éƒ½æ˜¯å®‰è£…body-parserï¼š
npm install body-parser
ç„¶ååœ¨ä»£ç ä¸­å¦‚ä¸‹ä½¿ç”¨ï¼š

var bodyParser = require(â€˜body-parserâ€™);app.use(bodyParser.urlencoded({ extended: false }))app.use(bodyParser.json());

å³æŠŠapp.jsçš„å†…å®¹ä¿®æ”¹ä¸ºå¦‚ä¸‹å†…å®¹ï¼š
var express = require(&#x27;express&#x27;);var path = require(&#x27;path&#x27;);var port = process.env.PORT || 3000 ;var app = express();var bodyParser = require(&#x27;body-parser&#x27;);app.set(&#x27;views&#x27;,&#x27;./views/pages&#x27;);app.set(&#x27;view engine&#x27;,&#x27;jade&#x27;);app.use(bodyParser.urlencoded(&#123; extended: false &#125;))app.use(bodyParser.json());app.use(express.static(path.join(__dirname, &#x27;bower_components&#x27;)));app.listen(port);console.log(&#x27;helloworld started on port &#x27; + port);app.get(&#x27;/&#x27;, function(req, res)&#123;  res.render(&#x27;index&#x27;,&#123;  title:&#x27;é¦–é¡µ&#x27;,  movies: [	  &#123;		title: &#x27;æœºæ¢°æˆ˜è­¦&#x27;,		_id: 1,		poster: &#x27;http://ihelloworld.qiniudn.com/%40%2Fimgs%2FiNJIT.jpg&#x27;,	  &#125;,	  &#123;		title: &#x27;æœºæ¢°æˆ˜è­¦&#x27;,		_id: 2,		poster: &#x27;http://ihelloworld.qiniudn.com/%40%2Fimgs%2FiNJIT.jpg&#x27;,	  &#125;    ]  &#125;)&#125;)app.get(&#x27;/movie/:id&#x27;, function(req, res)&#123;  res.render(&#x27;detail&#x27;,&#123;  title:&#x27;è¯¦æƒ…é¡µ&#x27;,  movie: &#123;	doctor: &#x27;æœªçŸ¥&#x27;,	country: &#x27;ç¾å›½&#x27;,	title: &#x27;æœºæ¢°æˆ˜è­¦&#x27;,	year: &#x27;2014&#x27;,	poster: &#x27;http://ihelloworld.qiniudn.com/%40%2Fimgs%2FiNJIT.jpg&#x27;,	language: &#x27;è‹±è¯­&#x27;,	flash: &#x27;http://player.youku.com/player.php/sid/XNjM3Njc3MTY4/v.swf&#x27;,	summary: &#x27;æ— &#x27;,  &#125;  &#125;)&#125;)app.get(&#x27;/admin/movie&#x27;, function(req, res)&#123;  res.render(&#x27;admin&#x27;,&#123;  title:&#x27;åå°å½•å…¥é¡µ&#x27;,  movie: &#123;	doctor: &#x27;&#x27;,	country: &#x27;&#x27;,	title: &#x27;&#x27;,	year: &#x27;&#x27;,	poster: &#x27;&#x27;,	language: &#x27;&#x27;,	flash: &#x27;&#x27;,	summary: &#x27;&#x27;,  &#125;  &#125;)&#125;)app.get(&#x27;/admin/list&#x27;, function(req, res)&#123;  res.render(&#x27;list&#x27;,&#123;  title:&#x27;åˆ—è¡¨é¡µ&#x27;,  movies: [	  &#123;		_id: 1,		doctor: &#x27;æœªçŸ¥&#x27;,		country: &#x27;ç¾å›½&#x27;,		title: &#x27;æœºæ¢°æˆ˜è­¦&#x27;,		year: &#x27;2014&#x27;,		poster: &#x27;http://ihelloworld.qiniudn.com/%40%2Fimgs%2FiNJIT.jpg&#x27;,		language: &#x27;è‹±è¯­&#x27;,		flash: &#x27;http://player.youku.com/player.php/sid/XNjM3Njc3MTY4/v.swf&#x27;,		summary: &#x27;æ— &#x27;,	  &#125;,	  &#123;		_id: 2,		doctor: &#x27;æœªçŸ¥&#x27;,		country: &#x27;ç¾å›½&#x27;,		title: &#x27;æœºæ¢°æˆ˜è­¦&#x27;,		year: &#x27;2014&#x27;,		poster: &#x27;http://ihelloworld.qiniudn.com/%40%2Fimgs%2FiNJIT.jpg&#x27;,		language: &#x27;è‹±è¯­&#x27;,		flash: &#x27;http://player.youku.com/player.php/sid/XNjM3Njc3MTY4/v.swf&#x27;,		summary: &#x27;æ— &#x27;,	  &#125;  ]  &#125;)&#125;)
æ•ˆæœå›¾å¼å¼ï¼Œç»ˆäºæå®šäº†ï¼æœ‰å›¾æœ‰çœŸç›¸ï¼
ç»“æŸæ“ä½œè¿‡ç¨‹ä¸­çš„å…¶ä»–å°é”™è¯¯ï¼Œåœ¨æ­¤ä¸ä½œè®°å½•ï¼Œæœ‰ä»»ä½•é—®é¢˜æ¬¢è¿ç•™è¨€ï¼
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title>Node.jså­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰</title>
    <url>/dev-nodejs-note-1/</url>
    <content><![CDATA[æ•´ç†è‡ªï¼šæ…•è¯¾ç½‘
helloworldå·¥ç¨‹çš„æ­å»ºæŠ€æœ¯åŠå·¥å…·
node.js + mongodb(å·¥å…·mongoose) + express + jade + moment.js + npm + jquery + bootstrap + grunt

æˆ‘é ï¼Œé‚£ä¹ˆå¤šï¼æ·¡å®šï¼Œæš‚æ—¶ï¼Œå’±ä»¬è¿™ä¸ªå·¥ç¨‹åªè¦ node.js + express + jade ã€‚
å‡†å¤‡å·¥ä½œä¸‹è½½å®‰è£…node.jsã€‚
å·¥ç¨‹ç»“æ„helloworld/  -node_modules/  -bower_components/  -views/    -index.jade  -app.js
ä¸Šä¸¤å¼ å›¾ï¼Œç›´è§‚æ„Ÿå—ä¸‹ï¼š![å·¥ç¨‹ç»“æ„][1]![å·¥ç¨‹ç»“æ„][2]

å…·ä½“æ“ä½œæ–°å»ºhelloworldæ–‡ä»¶å¤¹åœ¨Fç›˜ä¸‹æ–°å»ºä¸ªæ–‡ä»¶å¤¹å«åšâ€œ helloworld â€ï¼Œç„¶åæ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œcdå‘½ä»¤è¿›å…¥Fç›˜ä¸‹çš„helloworldæ–‡ä»¶å¤¹ã€‚
æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼šnpm install expressnpm install jadenpm install mongodbnpm install bower -gbower install bootstrap
æŸ¥çœ‹æ–‡ä»¶å¤¹çœ‹çœ‹helloworldæ–‡ä»¶å¤¹ï¼Œè¯¶ï¼Ÿç»“æ„å’Œä½ ç»™çš„ä¸ä¸€æ ·å•Šï¼é‚£å°±å¯¹äº†ï¼Œå’±æ¥ç€æï¼
æ–°å»ºæ–‡ä»¶åœ¨helloworldæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºæ–‡ä»¶app.jsï¼Œè¾“å…¥å†…å®¹å¦‚ä¸‹ï¼š
var express = require(&#x27;express&#x27;);var port = process.env.PORT || 3000 ;var app = express();app.set(&#x27;views&#x27;,&#x27;./views&#x27;);app.set(&#x27;view engine&#x27;,&#x27;jade&#x27;);app.listen(port);console.log(&#x27;helloworld started on port &#x27; + port);app.get(&#x27;/&#x27;, function(req, res)&#123;  res.render(&#x27;index&#x27;,&#123;title:&#x27;helloworld&#x27;&#125;);&#125;);
è‡³äºè¿™æ®µä»£ç çš„æ„æ€ï¼Œè¯·è‡ªè¡Œè§‚çœ‹è§†é¢‘å“ˆï¼åœ¨viewsæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºæ–‡ä»¶index.jadeï¼ˆè¿™ä¸ªæ–‡ä»¶å°±ç›¸å½“äºhtmlæ–‡ä»¶ï¼‰ï¼Œè¾“å…¥å†…å®¹å¦‚ä¸‹ï¼š
doctypehtml	head		meta(charset=&quot;utf-8&quot;)		title #&#123;title&#125;	body		h1 #&#123;title&#125;
è‡³æ­¤ï¼Œå¤§åŠŸå‘Šæˆï¼
æŸ¥çœ‹æ•ˆæœåœ¨helloworldæ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œå‘½ä»¤ï¼š
node app.js
åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼šhttp://localhost:3000æœ‰æ²¡æœ‰çœ‹åˆ°â€œhelloworldâ€è¿™ä¸ªå‡ºç°åœ¨äº†æµè§ˆå™¨ä¸Šï¼Ÿæ²¡çœ‹åˆ°ï¼Ÿè¯·ç•™è¨€ï¼PSï¼šä½ ä¹Ÿå¯ä»¥æ–°å»ºadmin.jadeï¼Œä¹Ÿè¾“å…¥å’Œindex.jadeç›¸åŒçš„ä»£ç ã€‚ç„¶ååœ¨app.jsæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š
app.get(&#x27;/admin/&#x27;, function(req, res)&#123;  res.render(&#x27;admin&#x27;,&#123;title:&#x27;admin&#x27;&#125;);&#125;);
è®¿é—®åœ°å€ï¼šhttp://localhost:3000/admin/è¿™æ—¶ä½ ä¼šçœ‹åˆ°â€œadminâ€å‡ºç°åœ¨äº†æµè§ˆå™¨ä¸Šï¼
ç»“æŸå¥½äº†ï¼Œä»Šå¤©çš„ç¬”è®°å°±å†™åˆ°è¿™é‡Œï¼æœ‰ä»»ä½•é—®é¢˜æ¬¢è¿ç•™è¨€ã€‚  [1]: http://ihelloworld.qiniudn.com/@/imgs/nodejs%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.jpg  [2]: http://ihelloworld.qiniudn.com/@/imgs/nodejs%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E5%88%86%E6%94%AF.jpg
]]></content>
      <categories>
        <category>engineering</category>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦‚ä½•å¼•å…¥å¦ä¸€ä¸ªhtmlæ–‡ä»¶</title>
    <url>/dev-how-to-load-in-another-html-file/</url>
    <content><![CDATA[iframeæ–¹å¼&lt;iframe name=&quot;content_frame&quot; width=100% height=30 marginwidth=0 marginheight=0 src=&quot;import.htm&quot; mce_src=&quot;import.htm&quot; &gt;&lt;/iframe&gt;

ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªå¤–éƒ¨å¼•å…¥çš„æ–‡ä»¶ï¼Œä½†ä¼šå‘ç°æœ‰ä¸€ä¸ªç±»ä¼¼å¤–æ¡†çš„ä¸œè¥¿å°†å…¶åŒ…å›´ï¼Œå¯ä½¿ç”¨
&lt;iframe name=&quot;content_frame&quot; marginwidth=0 marginheight=0 width=100% height=30 src=&quot;import.htm&quot; mce_src=&quot;import.htm&quot; frameborder=0&gt;&lt;/iframe&gt;

ä½†ä½ ä¼šå‘ç°è¿˜ä¼šæœ‰ç‚¹é—®é¢˜ï¼Œå°±æ˜¯èƒŒæ™¯è‰²ä¸åŒï¼Œä½ åªè¦åœ¨å¼•å…¥çš„æ–‡ä»¶import.htmä¸­ä½¿ç”¨ç›¸åŒçš„èƒŒæ™¯è‰²ä¹Ÿå¯ä»¥å¦‚æœæƒ³å¼•å…¥çš„æ–‡ä»¶è¿‡é•¿æ—¶ä¸å‡ºç°æ»šåŠ¨æ¡çš„è¯åœ¨import.htmä¸­çš„bodyä¸­åŠ å…¥scroll=no
objectæ–¹å¼&lt;object style=&quot;border:0px&quot; type=&quot;text/x-scriptlet&quot; data=&quot;import.htm&quot; width=100% height=30&gt;&lt;/object&gt;

behaviorçš„downloadæ–¹å¼&lt;span id=showImport&gt;&lt;/span&gt;&lt;IE:Download ID=&quot;oDownload&quot; STYLE=&quot;behavior:url(#default#download)&quot; /&gt;&lt;script&gt;function onDownloadDone(downDate)&#123;	showImport.innerHTML=downDate&#125;oDownload.startDownload(@#import.htm@#,onDownloadDone)&lt;/script&gt;
]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title>jQueryæœ¬åœ°æ— æ³•åŠ è½½è§£å†³åŠæ³•</title>
    <url>/dev-jquery-cannot-local-load/</url>
    <content><![CDATA[é—®é¢˜æè¿°ç¯å¢ƒï¼šwin7+apache2.2+php5.2
ç—‡çŠ¶ï¼šjqueryåŒ…æ–‡ä»¶(jquery-1.4.2.min.js)åœ¨æœ¬åœ°æµ‹è¯•çš„æ—¶å€™åŠ è½½å¤±è´¥ï¼Œé€šè¿‡firebugæŸ¥çœ‹ï¼Œå‘ç°æ–‡ä»¶è¢«åŠ è½½äº†ä¸¤æ¬¡ï¼Œä½†æ¯æ¬¡éƒ½åŠ è½½ä¸å®Œå…¨ã€‚ç›´æ¥å¼•ç”¨å¤–éƒ¨çš„jqueryåŒ…å°±OKï¼Œæ¯”å¦‚http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js


è§£å†³åŠæ³•å‚è€ƒCanâ€™t load jquery on Apacheï¼Œå°†httpd.confä¸­çš„
#EnableMMAP off#EnableSendfile off
æ³¨é‡Šå»æ‰ï¼Œé‡å¯apacheï¼Œåœ¨firefoxä¸‹é©¬ä¸Šå°±ç”Ÿæ•ˆäº†ï¼Œåœ¨ieä¸‹éœ€è¦åˆ é™¤ä¸‹ç¼“å­˜ã€‚
è¿™ä¸¤ä¸ªå‚æ•°åœ¨httpd.confæœ‰ä½œäº†ä¸€äº›æ³¨é‡Š
## EnableMMAP and EnableSendfile: On systems that support it, # memory-mapping or the sendfile syscall is used to deliver# files.Â  This usually improves server performance, but must# be turned off when serving from networked-mounted # filesystems or if support for these functions is otherwise# broken on your system.#

]]></content>
      <categories>
        <category>engineering</category>
        <category>frontend</category>
      </categories>
      <tags>
        <tag>jquery</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆè§Markdown</title>
    <url>/dev-first-see-markdown/</url>
    <content><![CDATA[ä»€ä¹ˆæ˜¯ MarkdownMarkdown æ˜¯ä¸€ç§æ–¹ä¾¿è®°å¿†ã€ä¹¦å†™çš„çº¯æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨è¿™äº›æ ‡è®°ç¬¦å·ä»¥æœ€å°çš„è¾“å…¥ä»£ä»·ç”Ÿæˆæå¯Œè¡¨ç°åŠ›çš„æ–‡æ¡£ï¼šè­¬å¦‚æ‚¨æ­£åœ¨é˜…è¯»çš„è¿™ä»½æ–‡æ¡£ã€‚å®ƒä½¿ç”¨ç®€å•çš„ç¬¦å·æ ‡è®°ä¸åŒçš„æ ‡é¢˜ï¼Œåˆ†å‰²ä¸åŒçš„æ®µè½ï¼Œç²—ä½“ æˆ–è€… æ–œä½“ æŸäº›æ–‡å­—ï¼Œæ›´æ£’çš„æ˜¯ï¼Œå®ƒè¿˜å¯ä»¥
ä¹¦å†™ä¸€ä¸ªè´¨èƒ½å®ˆæ’å…¬å¼[^LaTeX]$$E=mc^2$$
é«˜äº®ä¸€æ®µä»£ç [^code]@requires_authorizationclass SomeClass:    passif __name__ == &#x27;__main__&#x27;:    # A comment    print &#x27;hello world&#x27;

é«˜æ•ˆç»˜åˆ¶ æµç¨‹å›¾st=&gt;start: Startop=&gt;operation: Your Operationcond=&gt;condition: Yes or No?e=&gt;endst-&gt;op-&gt;condcond(yes)-&gt;econd(no)-&gt;op

é«˜æ•ˆç»˜åˆ¶ åºåˆ—å›¾Alice-&gt;Bob: Hello Bob, how are you?Note right of Bob: Bob thinksBob--&gt;Alice: I am good thanks!

ç»˜åˆ¶è¡¨æ ¼


é¡¹ç›®
ä»·æ ¼
æ•°é‡



è®¡ç®—æœº
$1600
5


æ‰‹æœº
$12
12


ç®¡çº¿
$1
234


æ›´è¯¦ç»†è¯­æ³•è¯´æ˜æƒ³è¦æŸ¥çœ‹æ›´è¯¦ç»†çš„è¯­æ³•è¯´æ˜ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä»¬å‡†å¤‡çš„ Cmd Markdown ç®€æ˜è¯­æ³•æ‰‹å†Œï¼Œè¿›é˜¶ç”¨æˆ·å¯ä»¥å‚è€ƒ Cmd Markdown é«˜é˜¶è¯­æ³•æ‰‹å†Œ äº†è§£æ›´å¤šé«˜çº§åŠŸèƒ½ã€‚
æ€»è€Œè¨€ä¹‹ï¼Œä¸åŒäºå…¶å®ƒ æ‰€è§å³æ‰€å¾— çš„ç¼–è¾‘å™¨ï¼šä½ åªéœ€ä½¿ç”¨é”®ç›˜ä¸“æ³¨äºä¹¦å†™æ–‡æœ¬å†…å®¹ï¼Œå°±å¯ä»¥ç”Ÿæˆå°åˆ·çº§çš„æ’ç‰ˆæ ¼å¼ï¼Œçœå´åœ¨é”®ç›˜å’Œå·¥å…·æ ä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œè°ƒæ•´å†…å®¹å’Œæ ¼å¼çš„éº»çƒ¦ã€‚Markdown åœ¨æµç•…çš„ä¹¦å†™å’Œå°åˆ·çº§çš„é˜…è¯»ä½“éªŒä¹‹é—´æ‰¾åˆ°äº†å¹³è¡¡ã€‚ ç›®å‰å®ƒå·²ç»æˆä¸ºä¸–ç•Œä¸Šæœ€å¤§çš„æŠ€æœ¯åˆ†äº«ç½‘ç«™ GitHub å’Œ æŠ€æœ¯é—®ç­”ç½‘ç«™ StackOverFlow çš„å¾¡ç”¨ä¹¦å†™æ ¼å¼ã€‚

ä»€ä¹ˆæ˜¯ Cmd Markdownæ‚¨å¯ä»¥ä½¿ç”¨å¾ˆå¤šå·¥å…·ä¹¦å†™ Markdownï¼Œä½†æ˜¯ Cmd Markdown æ˜¯è¿™ä¸ªæ˜Ÿçƒä¸Šæˆ‘ä»¬å·²çŸ¥çš„ã€æœ€å¥½çš„ Markdown å·¥å…·â€”â€”æ²¡æœ‰ä¹‹ä¸€ ï¼šï¼‰å› ä¸ºæ·±ä¿¡æ–‡å­—çš„åŠ›é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬å’Œä½ ä¸€æ ·ï¼Œå¯¹æµç•…ä¹¦å†™ï¼Œåˆ†äº«æ€æƒ³å’ŒçŸ¥è¯†ï¼Œä»¥åŠé˜…è¯»ä½“éªŒæœ‰æè‡´çš„è¿½æ±‚ï¼Œæˆ‘ä»¬æŠŠå¯¹äºè¿™äº›è¯‰æ±‚çš„å›åº”æ•´åˆåœ¨ Cmd Markdownï¼Œå¹¶ä¸”ä¸€æ¬¡ï¼Œä¸¤æ¬¡ï¼Œä¸‰æ¬¡ï¼Œä¹ƒè‡³æ— æ•°æ¬¡åœ°æå‡è¿™ä¸ªå·¥å…·çš„ä½“éªŒï¼Œæœ€ç»ˆå°†å®ƒæ¼”åŒ–æˆä¸€ä¸ª ç¼–è¾‘/å‘å¸ƒ/é˜…è¯» Markdown çš„åœ¨çº¿å¹³å°â€”â€”æ‚¨å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ï¼Œä»»ä½•ç³»ç»Ÿ/è®¾å¤‡ä¸Šç®¡ç†è¿™é‡Œçš„æ–‡å­—ã€‚
1. å®æ—¶åŒæ­¥é¢„è§ˆæˆ‘ä»¬å°† Cmd Markdown çš„ä¸»ç•Œé¢ä¸€åˆ†ä¸ºäºŒï¼Œå·¦è¾¹ä¸ºç¼–è¾‘åŒºï¼Œå³è¾¹ä¸ºé¢„è§ˆåŒºï¼Œåœ¨ç¼–è¾‘åŒºçš„æ“ä½œä¼šå®æ—¶åœ°æ¸²æŸ“åˆ°é¢„è§ˆåŒºæ–¹ä¾¿æŸ¥çœ‹æœ€ç»ˆçš„ç‰ˆé¢æ•ˆæœï¼Œå¹¶ä¸”å¦‚æœä½ åœ¨å…¶ä¸­ä¸€ä¸ªåŒºæ‹–åŠ¨æ»šåŠ¨æ¡ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå·§å¦™çš„ç®—æ³•æŠŠå¦ä¸€ä¸ªåŒºçš„æ»šåŠ¨æ¡åŒæ­¥åˆ°ç­‰ä»·çš„ä½ç½®ï¼Œè¶…é…·ï¼
2. ç¼–è¾‘å·¥å…·æ ä¹Ÿè®¸æ‚¨è¿˜æ˜¯ä¸€ä¸ª Markdown è¯­æ³•çš„æ–°æ‰‹ï¼Œåœ¨æ‚¨å®Œå…¨ç†Ÿæ‚‰å®ƒä¹‹å‰ï¼Œæˆ‘ä»¬åœ¨ ç¼–è¾‘åŒº çš„é¡¶éƒ¨æ”¾ç½®äº†ä¸€ä¸ªå¦‚ä¸‹å›¾æ‰€ç¤ºçš„å·¥å…·æ ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é¼ æ ‡åœ¨å·¥å…·æ ä¸Šè°ƒæ•´æ ¼å¼ï¼Œä¸è¿‡æˆ‘ä»¬ä»æ—§é¼“åŠ±ä½ ä½¿ç”¨é”®ç›˜æ ‡è®°æ ¼å¼ï¼Œæé«˜ä¹¦å†™çš„æµç•…åº¦ã€‚

3. ç¼–è¾‘æ¨¡å¼å®Œå…¨å¿ƒæ— æ—éª›çš„æ–¹å¼ç¼–è¾‘æ–‡å­—ï¼šç‚¹å‡» ç¼–è¾‘å·¥å…·æ  æœ€å³æµ‹çš„æ‹‰ä¼¸æŒ‰é’®æˆ–è€…æŒ‰ä¸‹ Ctrl + Mï¼Œå°† Cmd Markdown åˆ‡æ¢åˆ°ç‹¬ç«‹çš„ç¼–è¾‘æ¨¡å¼ï¼Œè¿™æ˜¯ä¸€ä¸ªæåº¦ç®€æ´çš„å†™ä½œç¯å¢ƒï¼Œæ‰€æœ‰å¯èƒ½ä¼šå¼•èµ·åˆ†å¿ƒçš„å…ƒç´ éƒ½å·²ç»è¢«æŒªé™¤ï¼Œè¶…æ¸…çˆ½ï¼
4. å®æ—¶çš„äº‘ç«¯æ–‡ç¨¿ä¸ºäº†ä¿éšœæ•°æ®å®‰å…¨ï¼ŒCmd Markdown ä¼šå°†æ‚¨æ¯ä¸€æ¬¡å‡»é”®çš„å†…å®¹ä¿å­˜è‡³äº‘ç«¯ï¼ŒåŒæ—¶åœ¨ ç¼–è¾‘å·¥å…·æ  çš„æœ€å³ä¾§æç¤º å·²ä¿å­˜ çš„å­—æ ·ã€‚æ— éœ€æ‹…å¿ƒæµè§ˆå™¨å´©æºƒï¼Œæœºå™¨æ‰ç”µæˆ–è€…åœ°éœ‡ï¼Œæµ·å•¸â€”â€”åœ¨ç¼–è¾‘çš„è¿‡ç¨‹ä¸­éšæ—¶å…³é—­æµè§ˆå™¨æˆ–è€…æœºå™¨ï¼Œä¸‹ä¸€æ¬¡å›åˆ° Cmd Markdown çš„æ—¶å€™ç»§ç»­å†™ä½œã€‚
5. ç¦»çº¿æ¨¡å¼åœ¨ç½‘ç»œç¯å¢ƒä¸ç¨³å®šçš„æƒ…å†µä¸‹è®°å½•æ–‡å­—ä¸€æ ·å¾ˆå®‰å…¨ï¼åœ¨æ‚¨å†™ä½œçš„æ—¶å€™ï¼Œå¦‚æœç”µè„‘çªç„¶å¤±å»ç½‘ç»œè¿æ¥ï¼ŒCmd Markdown ä¼šæ™ºèƒ½åˆ‡æ¢è‡³ç¦»çº¿æ¨¡å¼ï¼Œå°†æ‚¨åç»­é”®å…¥çš„æ–‡å­—ä¿å­˜åœ¨æœ¬åœ°ï¼Œç›´åˆ°ç½‘ç»œæ¢å¤å†å°†ä»–ä»¬ä¼ é€è‡³äº‘ç«¯ï¼Œå³ä½¿åœ¨ç½‘ç»œæ¢å¤å‰å…³é—­æµè§ˆå™¨æˆ–è€…ç”µè„‘ï¼Œä¸€æ ·æ²¡æœ‰é—®é¢˜ï¼Œç­‰åˆ°ä¸‹æ¬¡å¼€å¯ Cmd Markdown çš„æ—¶å€™ï¼Œå¥¹ä¼šæé†’æ‚¨å°†ç¦»çº¿ä¿å­˜çš„æ–‡å­—ä¼ é€è‡³äº‘ç«¯ã€‚ç®€è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬å°½æœ€å¤§çš„åŠªåŠ›ä¿éšœæ‚¨æ–‡å­—çš„å®‰å…¨ã€‚
6. ç®¡ç†å·¥å…·æ ä¸ºäº†ä¾¿äºç®¡ç†æ‚¨çš„æ–‡ç¨¿ï¼Œåœ¨ é¢„è§ˆåŒº çš„é¡¶éƒ¨æ”¾ç½®äº†å¦‚ä¸‹æ‰€ç¤ºçš„ ç®¡ç†å·¥å…·æ ï¼š

é€šè¿‡ç®¡ç†å·¥å…·æ å¯ä»¥ï¼š
 å‘å¸ƒï¼šå°†å½“å‰çš„æ–‡ç¨¿ç”Ÿæˆå›ºå®šé“¾æ¥ï¼Œåœ¨ç½‘ç»œä¸Šå‘å¸ƒï¼Œåˆ†äº« æ–°å»ºï¼šå¼€å§‹æ’°å†™ä¸€ç¯‡æ–°çš„æ–‡ç¨¿ åˆ é™¤ï¼šåˆ é™¤å½“å‰çš„æ–‡ç¨¿ å¯¼å‡ºï¼šå°†å½“å‰çš„æ–‡ç¨¿è½¬åŒ–ä¸º Markdown æ–‡æœ¬æˆ–è€… Html æ ¼å¼ï¼Œå¹¶å¯¼å‡ºåˆ°æœ¬åœ° åˆ—è¡¨ï¼šæ‰€æœ‰æ–°å¢å’Œè¿‡å¾€çš„æ–‡ç¨¿éƒ½å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹ã€æ“ä½œ æ¨¡å¼ï¼šåˆ‡æ¢ æ™®é€š/Vim/Emacs ç¼–è¾‘æ¨¡å¼
7. é˜…è¯»å·¥å…·æ 
é€šè¿‡ é¢„è§ˆåŒº å³ä¸Šè§’çš„ é˜…è¯»å·¥å…·æ ï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰æ–‡ç¨¿çš„ç›®å½•å¹¶å¢å¼ºé˜…è¯»ä½“éªŒã€‚
å·¥å…·æ ä¸Šçš„äº”ä¸ªå›¾æ ‡ä¾æ¬¡ä¸ºï¼š
 ç›®å½•ï¼šå¿«é€Ÿå¯¼èˆªå½“å‰æ–‡ç¨¿çš„ç›®å½•ç»“æ„ä»¥è·³è½¬åˆ°æ„Ÿå…´è¶£çš„æ®µè½ è§†å›¾ï¼šäº’æ¢å·¦è¾¹ç¼–è¾‘åŒºå’Œå³è¾¹é¢„è§ˆåŒºçš„ä½ç½® ä¸»é¢˜ï¼šå†…ç½®äº†é»‘ç™½ä¸¤ç§æ¨¡å¼çš„ä¸»é¢˜ï¼Œè¯•è¯• é»‘è‰²ä¸»é¢˜ï¼Œè¶…ç‚«ï¼ é˜…è¯»ï¼šå¿ƒæ— æ—éª›çš„é˜…è¯»æ¨¡å¼æä¾›è¶…ä¸€æµçš„é˜…è¯»ä½“éªŒ å…¨å±ï¼šç®€æ´ï¼Œç®€æ´ï¼Œå†ç®€æ´ï¼Œä¸€ä¸ªå®Œå…¨æ²‰æµ¸å¼çš„å†™ä½œå’Œé˜…è¯»ç¯å¢ƒ
8. é˜…è¯»æ¨¡å¼åœ¨ é˜…è¯»å·¥å…·æ  ç‚¹å‡»  æˆ–è€…æŒ‰ä¸‹ Ctrl+Alt+M éšå³è¿›å…¥ç‹¬ç«‹çš„é˜…è¯»æ¨¡å¼ç•Œé¢ï¼Œæˆ‘ä»¬åœ¨ç‰ˆé¢æ¸²æŸ“ä¸Šçš„æ¯ä¸€ä¸ªç»†èŠ‚ï¼šå­—ä½“ï¼Œå­—å·ï¼Œè¡Œé—´è·ï¼Œå‰èƒŒæ™¯è‰²éƒ½å€¾æ³¨äº†å¤§é‡çš„æ—¶é—´ï¼ŒåŠªåŠ›æå‡é˜…è¯»çš„ä½“éªŒå’Œå“è´¨ã€‚
9. æ ‡ç­¾ã€åˆ†ç±»å’Œæœç´¢åœ¨ç¼–è¾‘åŒºä»»æ„è¡Œé¦–ä½ç½®è¾“å…¥ä»¥ä¸‹æ ¼å¼çš„æ–‡å­—å¯ä»¥æ ‡ç­¾å½“å‰æ–‡æ¡£ï¼š
æ ‡ç­¾ï¼š æœªåˆ†ç±»
æ ‡ç­¾ä»¥åçš„æ–‡ç¨¿åœ¨ã€æ–‡ä»¶åˆ—è¡¨ã€‘ï¼ˆCtrl+Alt+Fï¼‰é‡Œä¼šæŒ‰ç…§æ ‡ç­¾åˆ†ç±»ï¼Œç”¨æˆ·å¯ä»¥åŒæ—¶ä½¿ç”¨é”®ç›˜æˆ–è€…é¼ æ ‡æµè§ˆæŸ¥çœ‹ï¼Œæˆ–è€…åœ¨ã€æ–‡ä»¶åˆ—è¡¨ã€‘çš„æœç´¢æ–‡æœ¬æ¡†å†…æœç´¢æ ‡é¢˜å…³é”®å­—è¿‡æ»¤æ–‡ç¨¿ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

10. æ–‡ç¨¿å‘å¸ƒå’Œåˆ†äº«åœ¨æ‚¨ä½¿ç”¨ Cmd Markdown è®°å½•ï¼Œåˆ›ä½œï¼Œæ•´ç†ï¼Œé˜…è¯»æ–‡ç¨¿çš„åŒæ—¶ï¼Œæˆ‘ä»¬ä¸ä»…å¸Œæœ›å®ƒæ˜¯ä¸€ä¸ªæœ‰åŠ›çš„å·¥å…·ï¼Œæ›´å¸Œæœ›æ‚¨çš„æ€æƒ³å’ŒçŸ¥è¯†é€šè¿‡è¿™ä¸ªå¹³å°ï¼Œè¿åŒä¼˜è´¨çš„é˜…è¯»ä½“éªŒï¼Œå°†ä»–ä»¬åˆ†äº«ç»™æœ‰ç›¸åŒå¿—è¶£çš„äººï¼Œè¿›è€Œé¼“åŠ±æ›´å¤šçš„äººæ¥åˆ°è¿™é‡Œè®°å½•åˆ†äº«ä»–ä»¬çš„æ€æƒ³å’ŒçŸ¥è¯†ï¼Œå°è¯•ç‚¹å‡»  (Ctrl+Alt+P) å‘å¸ƒè¿™ä»½æ–‡æ¡£ç»™å¥½å‹å§ï¼

å†ä¸€æ¬¡æ„Ÿè°¢æ‚¨èŠ±è´¹æ—¶é—´é˜…è¯»è¿™ä»½æ¬¢è¿ç¨¿ï¼Œç‚¹å‡»  (Ctrl+Alt+N) å¼€å§‹æ’°å†™æ–°çš„æ–‡ç¨¿å§ï¼ç¥æ‚¨åœ¨è¿™é‡Œè®°å½•ã€é˜…è¯»ã€åˆ†äº«æ„‰å¿«ï¼
ä½œè€… @ghosert2014 å¹´ 07æœˆ 07æ—¥    
[^LaTeX]: æ”¯æŒ LaTeX ç¼–è¾‘æ˜¾ç¤ºæ”¯æŒï¼Œä¾‹å¦‚ï¼š$\sum_{i=1}^n a_i=0$ï¼Œ è®¿é—® MathJax å‚è€ƒæ›´å¤šä½¿ç”¨æ–¹æ³•ã€‚
[^code]: ä»£ç é«˜äº®åŠŸèƒ½æ”¯æŒåŒ…æ‹¬ Java, Python, JavaScript åœ¨å†…çš„ï¼Œå››åä¸€ç§ä¸»æµç¼–ç¨‹è¯­è¨€ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>hexoå‚è€ƒæ–‡æ¡£</title>
    <url>/dev-hexo-document/</url>
    <content><![CDATA[hexoç³»åˆ—æ•™ç¨‹ï¼šï¼ˆä¸€ï¼‰hexoä»‹ç»http://zipperary.com/hexo-guide-1/

hexoç³»åˆ—æ•™ç¨‹ï¼šï¼ˆäºŒï¼‰æ­å»ºhexoåšå®¢http://zipperary.com/hexo-guide-2/

hexoç³»åˆ—æ•™ç¨‹ï¼šï¼ˆä¸‰ï¼‰hexoåšå®¢çš„é…ç½®ã€ä½¿ç”¨http://zipperary.com/hexo-guide-3/

hexoç³»åˆ—æ•™ç¨‹ï¼šï¼ˆå››ï¼‰hexoåšå®¢çš„ä¼˜åŒ–æŠ€å·§http://zipperary.com/hexo-guide-4/



hexoç³»åˆ—æ•™ç¨‹ï¼šï¼ˆäº”ï¼‰hexoåšå®¢çš„ä¼˜åŒ–æŠ€å·§ç»­http://zipperary.com/hexo-guide-5/

hexo ä¸»é¢˜ä¼˜åŒ–http://zipperary.com/hexo-theme-alteration/

æŠŠflickrç›¸å†ŒåµŒå…¥ç½‘é¡µhttp://zipperary.com/flickr-on-page/

æ€æ ·åœ¨åšæ–‡ä¸­åµŒå…¥å›¾ç‰‡ã€éŸ³ä¹ã€è§†é¢‘ï¼Ÿhttp://zipperary.com/media-on-hexo/

å‰ç«¯ä¹‹drop-shadowæ•ˆæœhttp://zipperary.com/box-and-shadow-effect/

ä¸ºHexoæ·»åŠ å¤šè¯´è¯„è®ºåŠŸèƒ½(æ­£æ–‡è¯„è®ºå’Œåˆ—è¡¨è¯„è®ºæ•°)http://blog.csdn.net/jelope/article/details/19678633

MarkdownæŒ‡å—http://zipperary.com/introduction-to-markdown/

è½»æ¾æå®šMarkdownhttp://zipperary.com/easy-markdown/

åˆè¯†node.jshttp://zipperary.com/learn-nodejs/

è´­ä¹°åŸŸåã€è®¾ç½®DNShttp://zipperary.com/domain-name-and-dns/

å¦‚ä½•ç»‘å®šäºŒçº§åŸŸåhttp://zipperary.com/secondary-dns/

æ‰˜ç®¡åšå®¢åˆ°gitcafehttp://zipperary.com/hexo-to-gitcafe/

æ‰˜ç®¡åšå®¢åˆ°STDYUNhttp://zipperary.com/blog-to-stdyun/

å°†hexoåšå®¢éƒ¨ç½²åˆ°baehttp://zipperary.com/hexo-on-bae/

hexoä½ çš„åšå®¢http://ibruce.info/hexo-your-blog/?utm_source=tuicoolhttp://www.tuicool.com/articles/AfQnQjy

åˆè¯†hexoï¼Œå®‰è£…åŠé…ç½®http://md5sum.cc/2014-05-05/first-met-hexo/

ä½¿ç”¨hexoæ­å»ºé™æ€åšå®¢http://m.chinaz.com/article/354945.shtml

googleå­—åº“å¯¼è‡´hexo modernisté¦–é¡µåŠ è½½å˜æ…¢http://ibruce.info/fonts-googleapis-lead-to-slow/?utm_source=tuicoolhttp://www.tuicool.com/articles/iAVjE3

é€šè¿‡æœ¬åœ°åŠ è½½ga.jsæ–‡ä»¶æé«˜Google Anlyticsæ€§èƒ½http://www.jb51.net/yunying/70962.html

å¼•ç”¨æ–°æµªå¾®è½¯è°·æ­Œçš„CDNåŠ è½½jQueryhttp://www.hicc.cc/quote-sina-microsoft-googles-cdn-load-jquery.html

]]></content>
      <categories>
        <category>engineering</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>iNJITå¾®ä¿¡å…¬ä¼—å¹³å°</title>
    <url>/dev-injit-wechat/</url>
    <content><![CDATA[å—å·¥ç¨‹å¤§è®¡é™¢ç§‘æŠ€ç«‹é¡¹ï¼Œçº¯æœåŠ¡æ€§è´¨å¾®ä¿¡å¹³å°ï¼ŒåŠŸèƒ½å†…æµ‹ä¸­ï¼Œæ„Ÿè°¢äº²çš„å®è´µæ„è§ï¼
æŸ¥è¯¾è¡¨ã€æŸ¥å­¦ç§‘æˆç»©ã€æŸ¥CETæˆç»©ã€æŸ¥ç©ºæ•™å®¤ã€æŸ¥é¦†è—å›¾ä¹¦ï¼Œä¸€ä¸ªéƒ½ä¸èƒ½å°‘ï¼
å·¥ç¨‹å¤–å–ã€æ¯æ—¥æŒ–å®ã€å¤±ç‰©æ‹›é¢†ã€åœˆé‡Œçº¦TAã€äºŒæ‰‹äº¤æ˜“ï¼Œåƒå–ç©ä¹æ ·æ ·æœ‰ï¼
å·¥ç¨‹è”ç›Ÿã€è¡¨ç™½å¢™ã€å¾®ä¿¡å°æ¸¸æˆï¼ˆæ— éœ€ä¸‹è½½ï¼‰ã€åæ§½çŒæ°´ï¼Œæ— èŠçš„æ—¥å­çœŸæ— èŠï¼
ç”·ç¥å¥³ç¥ã€æˆ‘çˆ±æŠ½å¥–ã€è®²åº§æŠ¥åã€è¹­è¯¾ã€æ­è®ªã€å¤§å­¦ç”Ÿæ´»ã€æ ¡å†…æ´»åŠ¨ã€æ–‡å­—æ§ã€è¿‘æœŸå½±è®¯ã€å¾®æ‹›è˜â€¦â€¦å¼€å‘è¿›è¡Œä¸­ï¼
å°ä¼™ä¼´ä»¬æœ‰ä»€ä¹ˆå¥½çš„å»ºè®®ï¼Œæ¬¢è¿ç»™æˆ‘ä»¬ç•™è¨€!æ‰«ä¸€æ‰«å…³æ³¨iNJITï¼Œå…¬ä¼—å·æœç´¢injitiï¼Œæ›´å¤šå¥½ç©åŠŸèƒ½ï¼Œç­‰ä½ æ¥å‘ç°ï¼


]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡</tag>
      </tags>
  </entry>
  <entry>
    <title>7ä¸ªæºç æœç´¢ç½‘ç«™</title>
    <url>/hobby-7-source-code-search-engine-website/</url>
    <content><![CDATA[ä¸ç®¡ä½ æ˜¯åˆå­¦ä¸€é—¨è®¡ç®—æœºè¯­è¨€æˆ–æŠ€æœ¯ï¼Œè¿˜æ˜¯æƒ³å­¦ä¹ åˆ«äººçš„ç»éªŒå’Œåˆ›æ„ã€‚åšä¸ºä¸€ä¸ªå¼€å‘äººå‘˜ï¼Œéƒ½ä¼šç»å¸¸éœ€è¦åˆ°æœç´¢ä¸€äº›ä»£ç ï¼Œä¸‹é¢æ˜¯7ä¸ªåœ°æ–¹å¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿå¯»æ‰¾åˆ°ä½ éœ€è¦çš„ä»£ç ã€‚åŸæ–‡7 Places to Find the Code You Needã€‚


GitHub Code Searchçƒ­é—¨çš„å¼€æºä»£ç åº“å’Œå’Œç‰ˆæœ¬æ§åˆ¶æœåŠ¡ã€‚ GitHub åœ¨æœ€è¿‘å¯åŠ¨äº† Code Search.å³ä½¿å®ƒæ‰å¯åŠ¨ä¸ä¹…ï¼Œä½†å‡­å€ŸGitHub çš„å—æ¬¢è¿åº¦å’Œæˆåƒä¸Šä¸‡çš„ä»£ç åº“ï¼ŒGitHubçš„è¿™é¡¹ä»£ç æœç´¢æœåŠ¡å·²ç»éå¸¸å—æ¬¢è¿ã€‚
KrugleKrugleæ˜¯ä¸€ä¸ªä¸ºå¼€å‘äººå‘˜é‡èº«å®šåšçš„ä»£ç æœç´¢å¼•æ“ï¼Œä»–ä»¬å®£ç§°å¯æœç´¢è¶…è¿‡25äº¿è¡Œçš„å¼€æ”¾æºä»£ç ï¼Œæ˜¯äº’è”ç½‘æœ€å¤§çš„æºä»£ç æœç´¢å¼•æ“ä¹‹ä¸€ã€‚
å’Œä¼ ç»Ÿæœç´¢å¼•æ“ä¸åŒï¼ŒKrugleä¸“é—¨ç”¨æ¥æœç´¢ä»£ç ï¼Œä¸ç®¡æ˜¯å‹ç¼©åŒ…æ–‡ä»¶ï¼Œè¿˜æ˜¯å±•ç¤ºåœ¨blogã€ç½‘é¡µä¸Šçš„ä»£ç ï¼Œåªè¦æ˜¯åœ¨ç½‘ç»œå¼€æ”¾çš„ç©ºé—´å†…ï¼ŒKrugleéƒ½èƒ½æ‰¾åˆ°ï¼Œå¹¶ä¸”Krugleè¿˜å¯ä»¥è‡ªåŠ¨ç”ŸæˆæŸä¸ªç‰¹å®šä»£ç çš„APIæŠ¥å‘Š ( å°šå¤„å®éªŒé˜¶æ®µ ) ã€‚
Krugle èƒ½æä¾›å’Œä»£ç ç›¸å…³é—®é¢˜çš„è§£ç­”ã€‚ 
å…è®¸å¼€å‘äººå‘˜å¯¹æœç´¢ç»“æœè¿›è¡Œè¯„è®ºï¼Œå¹¶é€šè¿‡åˆ›å»ºtagçš„æ–¹å¼æ¥å¸®åŠ©å…¶ä»–äººæ›´å¥½çš„æ‰¾åˆ°æ‰€éœ€çš„ä»£ç ï¼Œå®ç°å…±äº«ã€‚
Krugleå…·æœ‰è¾ƒå¿«çš„æœç´¢é€Ÿåº¦ï¼Œèƒ½å¯¹å’Œä»£ç ç›¸å…³çš„ä¾‹å¦‚å„ç§æŠ€æœ¯ä¸»é¢˜ã€ API ã€ç¤ºä¾‹ã€æ–‡æ¡£è¿›è¡Œå¿«é€Ÿæœç´¢ã€‚
KodersKodersæ˜¯ä¸€ä¸ªä¸“ä¸ºå¼€æ”¾ä»£ç çš„æœç´¢å¼•æ“ã€‚ç›®å‰å¯ä»¥æœç´¢åˆ°424,227,372å¥—ç¨‹åºä»£ç ï¼Œå¹¶æä¾›äº†å…¨ç«™æ›´æ–°è®¢é˜…ã€‚ä½ è¿˜å¯ä»¥åœ¨ä½ çš„ç½‘ç«™ä¸Šå…±äº«å®ƒçš„ä»£ç æœç´¢æœåŠ¡ã€‚æ¯å¤©æœ‰30000å¤šå¼€å‘è€…åœ¨Kodersä¸Šæœç´¢766000000è¡Œçš„ä»£ç ï¼ŒåŒ…æ‹¬é«˜è¾¾30ç§ç¼–ç¨‹è¯­è¨€å’Œ28ç§è½¯ä»¶licenseã€‚
CodaseHuihong Luo ç­‰äººåœ¨ç¡…è°·åˆ›åŠä¸€å®¶åä¸º Codase.com çš„ç¨‹åºæºç æœç´¢å¼•æ“ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡é¡¹ç›®ã€ç±»ã€æ–¹æ³•åŠå­—æ®µç­‰æ¥æœç´¢ç¨‹åºæºä»£ç ï¼›æœ€åˆåªé’ˆå¯¹ Linux å¹³å°çš„ C/C++ å¼€æºé¡¹ç›®æºç æœç´¢ï¼Œç›®å‰å·²åŒ…å«äº† Windows å¹³å°åŠ Java è¯­è¨€ç›¸å…³çš„æºç æœç´¢ï¼Œè®¡åˆ’ä¸ä¹…å°†æä¾›å¯¹ C#ã€Visual Basicã€Perlã€PHPã€Pythonã€Ruby ç­‰ç¨‹åºè®¾è®¡è¯­è¨€çš„æ”¯æŒï¼›æ® Codase ç§°ç°åœ¨å·²å¯æœç´¢è¶…è¿‡ 250,000,000 è¡Œçš„æºä»£ç ï¼Œå¹¶è‡´åŠ›æˆä¸ºæœ€ä¸ºä¸“ä¸šçš„æºç æœç´¢å¼•æ“ã€‚
SnipplrSnipplræ˜¯ä¸€ä¸ªå¼€æ”¾çš„æºä»£ç æŠ€å·§åˆ†äº«ç¤¾åŒºï¼Œå·ç§°Code2.0ã€‚å’Œä¸€èˆ¬çš„æºç åˆ†äº«ç½‘ç«™ä¸åŒï¼Œå®ƒé’ˆå¯¹çš„å¹¶ä¸æ˜¯å¤§å‹ç½‘ç«™æºç ï¼Œè€Œæ˜¯ä¸€äº›ç¼–ç¨‹çš„ä»£ç æŠ€å·§ã€‚æ¯”å¦‚é’ˆå¯¹IEçš„CSSä»£ç Hackï¼Œjavascriptçš„éšè—å’Œæ˜¾ç¤ºæ•ˆæœä»£ç ï¼ŒCSSåœ†è§’æ•ˆæœä»£ç ç­‰ç­‰ã€‚å…·æœ‰åˆ†ç±»å’ŒTagæ”¯æŒï¼Œä»¥åŠæœç´¢ï¼Œè¯„è®ºå’Œæ”¶è—ç­‰ç­‰åŠŸèƒ½ã€‚
DZone Snippetsæ‹¥æœ‰è¶…è¿‡13,000 ç”¨æˆ·æä¾›çš„ 5,000å¤šä»£ç æ‘˜å½•, DZone Snippets æ˜¯ä¸€ä¸ªå¯»æ‰¾ä»£ç ç¤ºä¾‹çš„å¥½åœ°æ–¹.
Google Code Searchè¿™ä¸ªå°±ä¸ç”¨å¤šåšä»‹ç»äº†ã€‚
å…¶ä»–https://searchcode.com/
]]></content>
      <categories>
        <category>computer</category>
      </categories>
  </entry>
  <entry>
    <title>Windowsçš„ä¸€äº›æŠ€å·§</title>
    <url>/hobby-windows-skill/</url>
    <content><![CDATA[realteké«˜æ¸…æ™°éŸ³é¢‘ç®¡ç†å™¨ï¼Œå…³é—­å›¾æ ‡å¼€å§‹&gt;è¿è¡Œ&gt;è¾“å…¥msconfig&gt;å¯åŠ¨&gt;å–æ¶ˆå‹¾é€‰â€realteké«˜æ¸…æ™°éŸ³é¢‘ç®¡ç†å™¨â€çš„å¼€æœºè‡ªå¯åŠ¨é¡¹&gt;OK&gt;é‡å¯ç”Ÿæ•ˆ
èœå•æ æ¶ˆå¤±æ§åˆ¶é¢æ¿-å¤–è§‚å’Œä¸ªæ€§åŒ–-æ–‡ä»¶å¤¹é€‰é¡¹-æŸ¥çœ‹-å§‹ç»ˆæ˜¾ç¤ºèœå•
åˆ é™¤ç”¨æˆ·å¼€å§‹-æ§åˆ¶é¢æ¿-æ€§èƒ½å’Œç»´æŠ¤-ç®¡ç†å·¥å…·-è®¡ç®—æœºç®¡ç†-æœ¬åœ°ç”¨æˆ·å’Œç»„-ç”¨æˆ·åˆ æ‰ä½ ä¸æƒ³è¦çš„ç”¨æˆ·ã€‚
åˆ‡æ¢ç®¡ç†å‘˜è´¦æˆ·è®¡ç®—æœºå³å‡»-ç®¡ç†-æœ¬åœ°ç”¨æˆ·å’Œç»„-ç”¨æˆ·-administrator-å¸æˆ·å·²ç¦ç”¨å»æ‰å‹¾-å…³æœºæ—çš„åˆ‡æ¢ç”¨æˆ·


è®¾ç½®è‡ªåŠ¨å…³æœºè¿›å…¥å‘½ä»¤æç¤ºç¬¦ç•Œé¢ï¼Œè¾“å…¥â€œat 18:30 shutdown -sâ€ï¼Œè¡¨ç¤ºè®¾ç½®åœ¨18:30è‡ªåŠ¨å…³æœºã€‚è¾“å…¥â€œatâ€å¯ä»¥æŸ¥çœ‹å½“å‰ä»»åŠ¡ã€‚å–æ¶ˆè‡ªåŠ¨å…³æœºï¼Œâ€œat /delâ€æˆ–è€…â€œat 1 /delâ€ã€‚
ä¿®æ”¹ç›˜ç¬¦è®¡ç®—æœºå³å‡»ï¼Œç®¡ç†ï¼Œç£ç›˜ç®¡ç†ï¼Œé€‰ä¸­éœ€è¦ä¿®æ”¹çš„å·ï¼Œå³å‡»ï¼Œæ›´æ”¹é©±åŠ¨å™¨å·å’Œè·¯å¾„ã€‚
å»é™¤ç”¨æˆ·è´¦æˆ·æ§åˆ¶æ§åˆ¶é¢æ¿ï¼Œç”¨æˆ·è´¦æˆ·ï¼ˆå¤§å›¾æ ‡ï¼‰ï¼Œæ›´æ”¹ç”¨æˆ·è´¦æˆ·æ§åˆ¶è®¾ç½®ï¼Œå°†æŒ‰é’®è°ƒåˆ°æœ€ä½ï¼ˆä»ä¸é€šçŸ¥ï¼‰ã€‚
éšè—NVIDIA æ§åˆ¶é¢æ¿åŒå‡»ï¼ˆæˆ–è€…å³å‡»ï¼‰æ‰“å¼€â€œNVIDIAæ§åˆ¶é¢æ¿â€ï¼Œï¼ˆä¸è¡Œçš„è¯å°±åœ¨æ§åˆ¶é¢æ¿é‡Œé¢æ‰“å¼€ï¼‰ç„¶åç‚¹â€œæ¡Œé¢â€ï¼Œå»æ‰é‚£äº›å‹¾ã€‚æœ‰ä¸ªå³ä¸‹è§’çš„ï¼Œè¿˜æœ‰ä¸ªæ¡Œé¢çš„ï¼Œå»æ‰å°±å¯ä»¥äº†ã€‚
ç§»åŠ¨æ¡Œé¢Cç›˜ï¼ŒUsersï¼ˆæˆ–è€…ç”¨æˆ·ï¼‰ï¼Œå½“å‰ç”¨æˆ·æ–‡ä»¶å¤¹ï¼ˆä¸€èˆ¬æ˜¯Administratorï¼‰ï¼Œæ‰¾åˆ°æ¡Œé¢æ–‡ä»¶å¤¹ã€‚å³é”®ï¼Œå±æ€§ï¼Œä½ç½®ï¼ŒæŠŠâ€œC:\Users\Administrator\Desktopâ€æ”¹ä¸ºä½ æƒ³å­˜æ”¾çš„ä½ç½®ï¼Œæ¯”å¦‚â€œD:\æ¡Œé¢â€ï¼Œç„¶åç‚¹ç§»åŠ¨å°±OKã€‚
èƒ½ä¸ŠQQä¸èƒ½æ‰“å¼€ç½‘é¡µDNSæœåŠ¡å™¨é…ç½®é”™è¯¯ã€‚
win7ä¿®æ”¹æ–‡ä»¶åä¸èƒ½ä½¿ç”¨æœç‹—è¾“å…¥æ³•ä¿®æ”¹å®Œhostsæ–‡ä»¶åï¼Œå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚è§£å†³åŠæ³•ï¼šé‡å¯ã€‚
ISOé•œåƒåˆ¶ä½œä½¿ç”¨UltraISO
pagefile.sysè½¬ç§»å³å‡»è®¡ç®—æœºï¼Œå±æ€§ï¼Œé«˜çº§ç³»ç»Ÿè®¾ç½®ï¼Œé«˜çº§ï¼Œæ€§èƒ½è®¾ç½®ã€‚æ€§èƒ½é€‰é¡¹çª—å£ä¸­ï¼Œé«˜çº§ï¼Œè™šæ‹Ÿå†…å­˜æ›´æ”¹ã€‚
hiberfil.sysåˆ é™¤å‘½ä»¤æç¤ºç¬¦ä¸‹ï¼špowercfg -h off
å³å‡»æ–‡ä»¶å¤¹å‡ºç°Runtime Errorwinmountè¿™æ¬¾è½¯ä»¶çš„é—®é¢˜ï¼Œå¸è½½äº†å°±OKäº†ï¼Œæˆ–è€…è®¾ç½®å»æ‰å³é”®èœå•ã€‚è¿·ä½ ç‰ˆçš„mini winmountï¼Œå®˜æ–¹ä»‹ç»è¯´åŠŸèƒ½è·Ÿæ ‡å‡†ç‰ˆä¸€æ ·ã€‚
åœ¨cmdé‡Œç»“æŸè¿›ç¨‹tasklisttaskkill /f /t /im firefox.exe
ç½‘ç»œç®¡ç†å‘½ä»¤ping/?nslookup
ä½¿ç”¨SYSTEMè¶…çº§ç®¡ç†å‘˜è´¦æˆ·ï¼ˆæœ€é«˜æƒé™ï¼‰taskkill /f /im explorer.exeat 20:00 /interactive %systemroot%\explorer.exe
æ‰¹é‡ä¿®æ”¹æ–‡ä»¶ådir /b&gt;rename.xlsä½¿ç”¨wpsæ‰“å¼€rename.xlsï¼Œåœ¨B1å•å…ƒæ ¼è¾“å…¥1.jpgï¼Œå…¶ä½™è¡Œè‡ªåŠ¨ç”Ÿæˆã€‚åœ¨C1å•å…ƒæ ¼è¾“å…¥å…¬å¼=â€ren â€œ&amp;A1&amp;â€ â€œ&amp;B1ï¼Œå…¶ä½™è¡Œè‡ªåŠ¨ç”Ÿæˆã€‚å¤åˆ¶Cåˆ—ï¼Œç²˜è´´åˆ°è®°äº‹æœ¬ï¼Œé‡å‘½åä¸º.batæ–‡ä»¶ã€‚åŒå‡».batæ–‡ä»¶ã€‚
åˆ©ç”¨ç³»ç»ŸåŠ å¯†æ–‡ä»¶å¤¹(é€‚ç”¨XP)md f:\my..start f:\my..\
win7åº“çš„ä½¿ç”¨è®¡ç®—æœºï¼Œåº“ï¼ŒéŸ³ä¹åº“ï¼Œç‚¹å‡»è“è‰²çš„nä¸ªä½ç½®ã€‚è®¡ç®—æœºï¼Œåº“ï¼Œå³å‡»éŸ³ä¹åº“ï¼Œå±æ€§ã€‚
è±†ä¸æ–‡æ¡£å…è´¹ä¸‹è½½ã€‚ç™¾åº¦å¿«ç…§æˆ–è€…è±†ä¸æ–‡æ¡£ä¸‹è½½å™¨
æ‰å¼„äººçš„é«˜æ‹›æˆªå±ï¼Œè®¾ç½®ä¸ºæ¡Œé¢
å¦‚ä½•åœ¨pptä¸­æ‰¹é‡æ’å…¥å›¾ç‰‡æ’å…¥ï¼Œå›¾ç‰‡ï¼Œåˆ†é¡µæ’å…¥å›¾ç‰‡
æ ¡å›­è§†é¢‘ç½‘ç ´è§£äº‘çª—(æ ¡å›­è§†é¢‘ç½‘)ç ´è§£ç‰ˆï¼Œå®‰å¾½å¸ˆèŒƒå¤§å­¦2010çº§è®¡ç®—æœºç‹å®‡è¾‰å¼€å‘ã€‚http://wangyuhui.com.cn
æ–‡ä»¶åˆæˆcopy /b test.jpg + test.rar finish.jpg
win7è¿è¡Œewbæ—¶ï¼Œæ‹–åŠ¨åŸä»¶ä»¥åèƒŒæ™¯ä¼šå˜æˆæŸä¸€æ—¶åˆ»çš„æ¡Œé¢èƒŒæ™¯è§£å†³åŠæ³•ï¼šåœ¨exeä¸Šå³é”®ï¼Œå±æ€§ï¼Œå…¼å®¹æ€§ï¼Œä¸¤ä¸ªç¦ç”¨é€‰ä¸€ä¸‹ï¼Œç‚¹åº”ç”¨ã€‚
è¯¥æ–‡ä»¶æ²¡æœ‰ä¸ä¹‹å…³è”çš„ç¨‹åºæ¥æ‰§è¡Œè¯¥æ“ä½œwin10å³é”®æ˜¾ç¤ºè®¾ç½®å’Œä¸ªæ€§åŒ–ï¼Œå‡ºç°â€œè¯¥æ–‡ä»¶æ²¡æœ‰ä¸ä¹‹å…³è”çš„ç¨‹åºæ¥æ‰§è¡Œè¯¥æ“ä½œâ€¦â€¦â€ã€‚è§£å†³åŠæ³•ï¼šWIN+Ræ‰“å¼€è¿è¡Œï¼Œè¾“å…¥regeditï¼Œåœ°å€æ è¾“å…¥HKEY_CURRENT_USER\Software\Classes\ms-settingsï¼ŒæŠŠms-settingsé‡å‘½åä¸ºms-settings1ã€‚
å°†æ–‡ä»¶å¤¹å–æ¶ˆä¸SVNå…³è”Windows Registry Editor Version 5.00[HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Folder\shell\DeleteSVN]@=&quot;åˆ é™¤è¯¥ç›®å½•ä¸‹é¢.svnæ–‡ä»¶&quot;[HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Folder\shell\DeleteSVN\command]@=&quot;cmd.exe /c \&quot;TITLE Removing SVN Folders in %1 &amp;&amp; COLOR 9A &amp;&amp; FOR /r \&quot;%1\&quot; %%f IN (.svn) DO RD /s /q \&quot;%%f\&quot; \&quot;&quot; 

ï¼ˆ1ï¼‰æŠŠä¸Šé¢è¿™æ®µæ–‡å­—ä¿å­˜ä¸ºâ€œå–æ¶ˆSVNæ–‡ä»¶å¤¹.regâ€æ–‡ä»¶ã€‚ï¼ˆ2ï¼‰åŒå‡»è¿™ä¸ªæ–‡ä»¶,å¯¼å…¥åˆ°æ³¨å†Œè¡¨ã€‚ï¼ˆ3ï¼‰å³é”®ä¸€ä¸ªæ–‡ä»¶å¤¹çš„æ—¶å€™ï¼Œä¼šå¤šå‡ºæ¥ä¸€ä¸ªèœå•â€åˆ é™¤è¯¥ç›®å½•ä¸‹é¢.svnæ–‡ä»¶â€ï¼Œæ‰§è¡Œè¯¥å‘½ä»¤å³å¯ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>åŠ å¯†</tag>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Eclipseé…ç½®Maven</title>
    <url>/dev-maven-eclipse-setting/</url>
    <content><![CDATA[å‰è¨€Eclipseçš„è‡ªå¸¦Mavenï¼Œåœ¨ä¸€èˆ¬æƒ…å†µä¸‹å°±å¤Ÿç”¨äº†ã€‚ä½†æ˜¯ï¼Œç”±äºç‰ˆæœ¬è¦æ±‚æˆ–è€…é«˜çº§åŠŸèƒ½è¦æ±‚ï¼Œæˆ‘ä»¬ä¸å¾—ä¸è‡ªå·±å®‰è£…é…ç½®Mavenã€‚
ä¸‹è½½å®‰è£…è¯¦è§ã€ŠMavenæœ¬åœ°å®‰è£…jaræ–‡ä»¶ã€‹
Eclipseé…ç½®Eclipseï¼ŒWindowï¼ŒPreferencesã€‚


1ã€Mavenï¼ŒInstallationsï¼ŒAddï¼Œç„¶åé€‰æ‹©Mavençš„å®‰è£…è·¯å¾„ã€‚
2ã€Mavenï¼ŒUser Settingsï¼ŒUser Settingsé€‰æ‹©Mavenä¸‹çš„setting.xmlã€‚
3ã€ç¼–è¾‘settings.xmlï¼Œé‡Šæ”¾&lt;localRepository&gt;&lt;/localRepository&gt;èŠ‚ç‚¹ï¼Œä¸­é—´åŠ ä¸Šæœ¬åœ°Repositoryè·¯å¾„ã€‚
4ã€Javaï¼ŒInstalled JREsï¼ŒEditï¼Œåœ¨Default VM argumentsä¸­è®¾ç½®-Dmaven.multiModuleProjectDirectory=$M2_HOME
åè®°åœ¨ä½¿ç”¨Eclipseè‡ªå¸¦Mavençš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‡ºç°äº†ä¸€äº›æ— æ³•ç†è§£çš„é”™è¯¯ï¼Œä¸å¦¨è¯•è¯•è‡ªå·±é…ç½®ä¸€ä¸ªMavenã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>maven</tag>
      </tags>
  </entry>
  <entry>
    <title>Mavené¡¹ç›®æ˜¾ç¤ºå‰å·</title>
    <url>/dev-maven-project-fork/</url>
    <content><![CDATA[é—®é¢˜æè¿°æ˜æ˜æ²¡æœ‰é”™è¯¯çš„Mavené¡¹ç›®ï¼Œå¯¼å…¥åˆ°Eclipseä¹‹åï¼Œé¡¹ç›®åçš„æ—è¾¹ä¼šå‡ºç°ä¸€ä¸ªå‰å·ã€‚è™½ç„¶ä¸å½±å“é¡¹ç›®çš„ä½¿ç”¨ï¼Œä½†æ˜¯ï¼Œçœ‹èµ·æ¥æ€»æœ‰ä¸€ç‚¹ä¸çˆ½ã€‚
è§£å†³åŠæ³•å•å‡»é¡¹ç›®ï¼Œç„¶åalt+F5ï¼ŒUpdate Maven Projectã€‚å¤§éƒ¨åˆ†çš„é¡¹ç›®ï¼Œéƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹æ³•å»æ‰å‰å·ã€‚æš‚æ—¶ä¸æ‡‚å¾—åŸç†ï¼Œéšç€å­¦ä¹ çš„æ·±å…¥ï¼Œä¼šæ‡‚å¾—çš„ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>maven</tag>
      </tags>
  </entry>
  <entry>
    <title>Mavenæœ¬åœ°å®‰è£…jaræ–‡ä»¶</title>
    <url>/dev-maven-local-install-jar/</url>
    <content><![CDATA[ä¸‹è½½å®‰è£…Mavenå¹³æ—¶ä½¿ç”¨çš„ï¼Œæ˜¯Eclipseçš„Eclipse IDE for Java EE Developers ç‰ˆæœ¬ï¼Œè‡ªå¸¦Mavenã€‚ä½†æ˜¯ï¼Œæƒ³è¦ä½¿ç”¨Mavenæœ¬åœ°å®‰è£…jaræ–‡ä»¶ï¼Œå°±éœ€è¦è‡ªå·±å®‰è£…Mavenã€‚
ä¸‹è½½åœ°å€ï¼š http://maven.apache.org/download.cgi
1ã€è§£å‹åˆ°è‡ªå·±å–œæ¬¢çš„ç›®å½•ï¼ˆè¿™é‡ŒéƒåŒå­¦æ”¾åˆ°D:\Serverè·¯å¾„ä¸‹ï¼‰ã€‚2ã€æ·»åŠ ç¯å¢ƒå˜é‡M2_HOMEï¼Œå€¼ä¸ºD:\Server\apache-maven-3.3.33ã€åœ¨Pathä¸­æ·»åŠ ;%M2_HOME%\bin;ã€‚
æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œè¾“å…¥mvn -vï¼Œå¦‚æœèƒ½å¤Ÿçœ‹åˆ°mavenç‰ˆæœ¬å·ï¼Œè¯´æ˜å®‰è£…æˆåŠŸã€‚
Oracleé©±åŠ¨jaråŒ…å®‰è£…ä»¥å®‰è£…Oracleé©±åŠ¨jaråŒ…ä¸ºä¾‹ã€‚ç”±äºOracleæˆæƒé—®é¢˜ï¼ŒMavenä¸æä¾›Oracle JDBC Driverï¼Œä¸ºäº†åœ¨Mavené¡¹ç›®ä¸­åº”ç”¨Oracle JDBC driver,å¿…é¡»æ‰‹åŠ¨æ·»åŠ åˆ°æœ¬åœ°ä»“åº“ã€‚
ä¸‹è½½jaråŒ…JDBCã€SQLJã€Oracle JPublisher å’Œé€šç”¨è¿æ¥æ±  (UCP)JDBC and Universal Connection Pool (UCP)
éƒåŒå­¦ä½¿ç”¨çš„æ˜¯Oracle11gï¼Œä¸‹è½½ä¸‹æ¥çš„jaråŒ…åä¸ºojdbc14.jarã€‚é€šè¿‡è§£å‹ç¼©è½¯ä»¶çœ‹åˆ°ï¼ŒjaråŒ…ä¸­æœ‰ä¸€ä¸ªMETA-INF/MANIFEST.MFæ–‡ä»¶ã€‚æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬çœ‹åˆ°
Manifest-Version: 1.0Specification-Title:    Oracle JDBC driver classes for use with JDK14Sealed: trueCreated-By: 1.4.2_08 (Sun Microsystems Inc.)Implementation-Title:   ojdbc14.jarSpecification-Vendor:   Oracle CorporationSpecification-Version:  Oracle JDBC Driver version - &quot;10.2.0.3.0&quot;Implementation-Version: Oracle JDBC Driver version - &quot;10.2.0.3.0&quot;Implementation-Vendor:  Oracle CorporationImplementation-Time:    Tue Feb 27 15:23:24 2007Name: oracle/sql/converter/Sealed: falseName: oracle/sql/Sealed: falseName: oracle/sql/converter_xcharset/Sealed: false
ç­‰ä¸‹æˆ‘ä»¬è¦ç”¨åˆ°versionä¿¡æ¯ï¼š10.2.0.3.0ã€‚

å®‰è£…å‘½ä»¤æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œè¿›å…¥åˆ°ojdbc.jaræ‰€åœ¨çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
mvn install:install-file -DgroupId=com.oracle -DartifactId=ojdbc14 -Dversion=10.2.0.3.0 -Dpackaging=jar -Dfile=ojdbc14.jar
çœ‹åˆ°BUILD SECCESSå°±è¯´æ˜å¤§åŠŸå‘Šæˆäº†ï¼
ä¹Ÿè®¸ä½ ä¼šé—®ï¼ŒDfileå‚æ•°å¯ä¸å¯ä»¥ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Ÿç­”ï¼šä¸å¯ä»¥ã€‚æˆ‘åœ¨ä½¿ç”¨ç»å¯¹è·¯å¾„çš„æ—¶å€™å¤±è´¥äº†ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆã€‚
å…¶å®ï¼Œä¸Šé¢çš„DgroupIdã€DartifactIdã€Dversionå…¨éƒ¨å¯ä»¥æŒ‰ç…§è‡ªå·±å–œå¥½æ¥å®šä¹‰ï¼Œåªæ˜¯ï¼Œåœ¨é…ç½®pom.xmlçš„æ—¶å€™ä¼šç”¨åˆ°ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¿˜æ˜¯å°½å¯èƒ½è§„èŒƒä¸€äº›ã€‚
æœ¬åœ°ä»“åº“è·¯å¾„é»˜è®¤ä¸ºC:\Users\Administrator\.m2\repositoryï¼Œåœ¨è¿™ä¸ªè·¯å¾„ä¸‹ï¼Œä½ å¯ä»¥çœ‹åˆ°æœ¬åœ°å·²ç»å®‰è£…çš„jaråŒ…ã€‚
pom.xmlä¸­é…ç½®&lt;!-- Oracleé©±åŠ¨ --&gt;&lt;dependency&gt;	&lt;groupId&gt;com.oracle&lt;/groupId&gt;	&lt;artifactId&gt;ojdbc14&lt;/artifactId&gt;	&lt;version&gt;10.2.0.3.0&lt;/version&gt;&lt;/dependency&gt;

SQLServeré©±åŠ¨jaråŒ…å®‰è£…ç±»ä¼¼äºOracleé©±åŠ¨jaråŒ…å®‰è£…ï¼Œè®°å½•å‘½ä»¤å¦‚ä¸‹ï¼š
mvn install:install-file -DgroupId=com.microsoft.sqlserver -DartifactId=jdbc -Dversion=1.1.1 -Dpackaging=jar -Dfile=sqljdbc4.jar
pom.xmlé…ç½®å¦‚ä¸‹ï¼š
&lt;dependency&gt;	&lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;	&lt;artifactId&gt;sqljdbc4&lt;/artifactId&gt;	&lt;version&gt;1.1.1&lt;/version&gt;&lt;/dependency&gt;

å‚è€ƒæ–‡æ¡£åœ¨Mavenä»“åº“ä¸­æ·»åŠ Oracle JDBCé©±åŠ¨
maven3 æ‰‹åŠ¨å®‰è£…æœ¬åœ°jaråˆ°ä»“åº“
MAVENå®‰è£…JARæ–‡ä»¶åˆ°æœ¬åœ°ä»“åº“
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>maven</tag>
      </tags>
  </entry>
  <entry>
    <title>Mavenä¹‹pom.xml</title>
    <url>/dev-maven-pom/</url>
    <content><![CDATA[pom.xmlé€Ÿè§ˆ&lt;project&gt;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;    &lt;groupId&gt;...&lt;/groupId&gt;    &lt;artifactId&gt;...&lt;/artifactId&gt;    &lt;version&gt;...&lt;/version&gt;    &lt;packaging&gt;...&lt;/packaging&gt;    &lt;dependencies&gt;...&lt;/dependencies&gt;    &lt;parent&gt;...&lt;/parent&gt;    &lt;dependencyManagement&gt;...&lt;/dependencyManagement&gt;    &lt;modules&gt;...&lt;/modules&gt;    &lt;properties&gt;...&lt;/properties&gt;      &lt;build&gt;...&lt;/build&gt;    &lt;reporting&gt;...&lt;/reporting&gt;      &lt;name&gt;...&lt;/name&gt;    &lt;description&gt;...&lt;/description&gt;    &lt;url&gt;...&lt;/url&gt;    &lt;inceptionYear&gt;...&lt;/inceptionYear&gt;    &lt;licenses&gt;...&lt;/licenses&gt;    &lt;organization&gt;...&lt;/organization&gt;    &lt;developers&gt;...&lt;/developers&gt;    &lt;contributors&gt;...&lt;/contributors&gt;      &lt;issueManagement&gt;...&lt;/issueManagement&gt;    &lt;ciManagement&gt;...&lt;/ciManagement&gt;    &lt;mailingLists&gt;...&lt;/mailingLists&gt;    &lt;scm&gt;...&lt;/scm&gt;    &lt;prerequisites&gt;...&lt;/prerequisites&gt;    &lt;repositories&gt;...&lt;/repositories&gt;    &lt;pluginRepositories&gt;...&lt;/pluginRepositories&gt;    &lt;distributionManagement&gt;...&lt;/distributionManagement&gt;    &lt;profiles&gt;...&lt;/profiles&gt;  &lt;/project&gt;  

POMåŒ…æ‹¬äº†æ‰€æœ‰çš„é¡¹ç›®ä¿¡æ¯ï¼š

groupIdï¼šé¡¹ç›®æˆ–è€…ç»„ç»‡çš„å”¯ä¸€æ ‡å¿—ï¼Œå¹¶ä¸”é…ç½®æ—¶ç”Ÿæˆçš„è·¯å¾„ä¹Ÿæ˜¯ç”±æ­¤ç”Ÿæˆï¼Œå¦‚org.codehaus.mojoç”Ÿæˆçš„ç›¸å¯¹è·¯å¾„ä¸ºï¼š/org/codehaus/mojo
artifactIdï¼šé¡¹ç›®çš„é€šç”¨åç§°
versionï¼šé¡¹ç›®çš„ç‰ˆæœ¬
packagingï¼šæ‰“åŒ…çš„æœºåˆ¶ï¼Œå¦‚pom, jar, maven-plugin, ejb, war, ear, rar, par
classifierï¼šåˆ†ç±»



POMå…³ç³»ä¾èµ–&lt;dependencies&gt;      &lt;dependency&gt;        &lt;groupId&gt;junit&lt;/groupId&gt;        &lt;artifactId&gt;junit&lt;/artifactId&gt;        &lt;version&gt;4.0&lt;/version&gt;        &lt;type&gt;jar&lt;/type&gt;        &lt;scope&gt;test&lt;/scope&gt;        &lt;optional&gt;true&lt;/optional&gt;      &lt;/dependency&gt;      ...  &lt;/dependencies&gt;  


groupId, artifactId, version:æè¿°äº†ä¾èµ–çš„é¡¹ç›®å”¯ä¸€æ ‡å¿—
type:ç›¸åº”çš„ä¾èµ–äº§å“åŒ…å½¢å¼ï¼Œå¦‚jarï¼Œwar
scope:ç”¨äºé™åˆ¶ç›¸åº”çš„ä¾èµ–èŒƒå›´ï¼ŒåŒ…æ‹¬ä»¥ä¸‹çš„å‡ ç§å˜é‡ï¼š


compile ï¼šé»˜è®¤èŒƒå›´ï¼Œç”¨äºç¼–è¯‘providedï¼šç±»ä¼¼äºç¼–è¯‘ï¼Œä½†æ”¯æŒä½ æœŸå¾…jdkæˆ–è€…å®¹å™¨æä¾›ï¼Œç±»ä¼¼äºclasspathruntime:åœ¨æ‰§è¡Œæ—¶ï¼Œéœ€è¦ä½¿ç”¨test:ç”¨äºtestä»»åŠ¡æ—¶ä½¿ç”¨system:éœ€è¦å¤–åœ¨æä¾›ç›¸åº”å¾—å…ƒç´ ã€‚é€šè¿‡systemPathæ¥å–å¾—


systemPath: ä»…ç”¨äºèŒƒå›´ä¸ºsystemã€‚æä¾›ç›¸åº”çš„è·¯å¾„
optional: æ ‡æ³¨å¯é€‰ï¼Œå½“é¡¹ç›®è‡ªèº«ä¹Ÿæ˜¯ä¾èµ–æ—¶ã€‚ç”¨äºè¿ç»­ä¾èµ–æ—¶ä½¿ç”¨

ç‹¬å æ€§å¤–åœ¨å‘Šè¯‰mavenä½ åªåŒ…æ‹¬æŒ‡å®šçš„é¡¹ç›®ï¼Œä¸åŒ…æ‹¬ç›¸å…³çš„ä¾èµ–ã€‚æ­¤å› ç´ ä¸»è¦ç”¨äºè§£å†³ç‰ˆæœ¬å†²çªé—®é¢˜ã€‚
&lt;dependencies&gt;      &lt;dependency&gt;        &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;        &lt;artifactId&gt;maven-embedder&lt;/artifactId&gt;        &lt;version&gt;2.0&lt;/version&gt;        &lt;exclusions&gt;          &lt;exclusion&gt;            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;            &lt;artifactId&gt;maven-core&lt;/artifactId&gt;          &lt;/exclusion&gt;        &lt;/exclusions&gt;      &lt;/dependency&gt; &lt;/dependencies&gt;
è¡¨ç¤ºé¡¹ç›®maven-embedderéœ€è¦é¡¹ç›®maven-coreï¼Œä½†æˆ‘ä»¬ä¸æƒ³å¼•ç”¨maven-coreã€‚
èšåˆä¸ºäº†èƒ½å¤Ÿä½¿ç”¨ä¸€æ¡å‘½ä»¤å°±èƒ½æ„å»ºaccount-emailå’Œaccount-persistä¸¤ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€ä¸ªé¢å¤–çš„åä¸ºaccount-aggregatorçš„æ¨¡å—ï¼Œç„¶åé€šè¿‡è¯¥æ¨¡å—æ„å»ºæ•´ä¸ªé¡¹ç›®çš„æ‰€æœ‰æ¨¡å—ã€‚account-aggregatoræœ¬èº«ä¹Ÿæ˜¯ä¸ª Mavené¡¹ç›®ï¼Œå®ƒçš„ POMå¦‚ä¸‹
&lt;project&gt;	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;	&lt;groupId&gt;com.juvenxu.mvnbook.account&lt;/groupId&gt;	&lt;artifactId&gt;account-aggregator&lt;/artifactId&gt;	&lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;	&lt;packaging&gt; pom &lt;/packaging&gt;	&lt;name&gt;Account Aggregator&lt;/name&gt;	 &lt;modules&gt;		&lt;module&gt;account-email&lt;/module&gt;		&lt;module&gt;account-persist&lt;/module&gt;	 &lt;/modules&gt;&lt;/project&gt;

æ³¨æ„ï¼špackagingçš„ç±»å‹ä¸ºpom ï¼Œmoduleçš„å€¼æ˜¯ä¸€ä¸ªä»¥å½“å‰POMä¸ºä¸»ç›®å½•çš„ç›¸å¯¹è·¯å¾„ã€‚
ç»§æ‰¿çˆ¶æ¨¡å—é…ç½®&lt;project&gt;	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;	&lt;groupId&gt;com.juvenxu.mvnbook.account&lt;/groupId&gt;	&lt;artifactId&gt; account-parent &lt;/artifactId&gt;	&lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;	&lt;packaging&gt;pom&lt;/packaging&gt;	&lt;name&gt;Account Parent&lt;/name&gt;		&lt;dependencyManagement&gt;...&lt;/dependencyManagement&gt;  &lt;/project&gt;



å­æ¨¡å—é…ç½®&lt;project&gt;	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;		&lt; parent &gt;		&lt;groupId&gt;com.juvenxu.mvnbook.account&lt;/groupId&gt;		&lt;artifactId&gt; account-parent &lt;/artifactId&gt;		&lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;		&lt; relativePath &gt;../account-parent/pom.xml&lt;/ relativePath&gt;	&lt;/ parent &gt;		&lt;artifactId&gt; account-email &lt;/artifactId&gt;	&lt;name&gt;Account Email&lt;/name&gt;  ...&lt;/project&gt;

æ³¨æ„ï¼š1ã€å­æ¨¡å—æ²¡æœ‰å£°æ˜groupIdå’Œversionï¼Œè¿™ä¸¤ä¸ªå±æ€§ç»§æ‰¿è‡³çˆ¶æ¨¡å—ã€‚ä½†å¦‚æœå­æ¨¡å—æœ‰ä¸åŒä¸çˆ¶æ¨¡å—çš„ groupIdã€version ï¼Œä¹Ÿå¯æŒ‡å®šï¼›2ã€ä¸åº”è¯¥ç»§æ‰¿artifactId,å¦‚æœgroupId ï¼Œversionï¼ŒartifactId å®Œå…¨ç»§æ‰¿çš„è¯ä¼šé€ æˆåæ ‡å†²çªï¼›å¦å¤–å³ä½¿ä½¿ç”¨ä¸åŒçš„ groupIdæˆ–versionï¼ŒåŒæ ·çš„ artifactIdä¹Ÿå®¹æ˜“äº§ç”Ÿæ··æ·†ã€‚
èšåˆä½¿ç”¨ç»§æ‰¿åï¼Œparentä¹Ÿå¿…é¡»åƒå­æ¨¡å—ä¸€æ ·åŠ å…¥åˆ°èšåˆæ¨¡å—ä¸­ã€‚ä¹Ÿå°±æ˜¯åœ¨åœ¨èšåˆæ¨¡å—çš„ pomä¸­åŠ å…¥&lt;module&gt;account-parent&lt;/module&gt;ã€‚èšåˆçš„ POMå¦‚ä¸‹ï¼š
&lt;project&gt;	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;	&lt;groupId&gt;com.juvenxu.mvnbook.account&lt;/groupId&gt;	&lt;artifactId&gt;account-aggregator&lt;/artifactId&gt;	&lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;	&lt;packaging&gt; pom &lt;/packaging&gt;	&lt;name&gt;Account Aggregator&lt;/name&gt;	&lt;modules&gt;		&lt;module&gt;account-email&lt;/module&gt;		&lt;module&gt;account-persist&lt;/module&gt;		&lt;module&gt; account-parent&lt;/module&gt;	&lt;/modules&gt;&lt;/project&gt;

å¯ç»§æ‰¿çš„å…ƒç´ groupId ï¼šé¡¹ç›®ç»„ ID ï¼Œé¡¹ç›®åæ ‡çš„æ ¸å¿ƒå…ƒç´ ï¼›version ï¼šé¡¹ç›®ç‰ˆæœ¬ï¼Œé¡¹ç›®åæ ‡çš„æ ¸å¿ƒå…ƒç´ ï¼›description ï¼šé¡¹ç›®çš„æè¿°ä¿¡æ¯ï¼›organization ï¼šé¡¹ç›®çš„ç»„ç»‡ä¿¡æ¯ï¼›inceptionYear ï¼šé¡¹ç›®çš„åˆ›å§‹å¹´ä»½ï¼›url ï¼šé¡¹ç›®çš„ url åœ°å€develoers ï¼šé¡¹ç›®çš„å¼€å‘è€…ä¿¡æ¯ï¼›contributors ï¼šé¡¹ç›®çš„è´¡çŒ®è€…ä¿¡æ¯ï¼›distributionManagerment ï¼šé¡¹ç›®çš„éƒ¨ç½²ä¿¡æ¯ï¼›issueManagement ï¼šç¼ºé™·è·Ÿè¸ªç³»ç»Ÿä¿¡æ¯ï¼›ciManagement ï¼šé¡¹ç›®çš„æŒç»­ç»§æ‰¿ä¿¡æ¯ï¼›scm ï¼šé¡¹ç›®çš„ç‰ˆæœ¬æ§åˆ¶ä¿¡æ¯ï¼›mailingListserv ï¼šé¡¹ç›®çš„é‚®ä»¶åˆ—è¡¨ä¿¡æ¯ï¼›properties ï¼šè‡ªå®šä¹‰çš„ Maven å±æ€§ï¼›dependencies ï¼šé¡¹ç›®çš„ä¾èµ–é…ç½®ï¼›dependencyManagement ï¼šé†’ç›®çš„ä¾èµ–ç®¡ç†é…ç½®ï¼›repositories ï¼šé¡¹ç›®çš„ä»“åº“é…ç½®ï¼›build ï¼šåŒ…æ‹¬é¡¹ç›®çš„æºç ç›®å½•é…ç½®ã€è¾“å‡ºç›®å½•é…ç½®ã€æ’ä»¶é…ç½®ã€æ’ä»¶ç®¡ç†é…ç½®ç­‰ï¼›reporting ï¼šåŒ…æ‹¬é¡¹ç›®çš„æŠ¥å‘Šè¾“å‡ºç›®å½•é…ç½®ã€æŠ¥å‘Šæ’ä»¶é…ç½®ç­‰ã€‚

æˆ‘ä»¬çŸ¥é“dependenciesæ˜¯å¯ä»¥è¢«ç»§æ‰¿çš„ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±æƒ³åˆ°è®©æˆ‘ä»¬çš„å‘ç”Ÿäº†å…±ç”¨çš„ä¾èµ–å…ƒç´ è½¬ç§»åˆ°parentä¸­ï¼Œè¿™æ ·æˆ‘ä»¬åˆè¿›ä¸€æ­¥çš„ä¼˜åŒ–äº†é…ç½®ã€‚å¯æ˜¯é—®é¢˜ä¹Ÿéšä¹‹è€Œæ¥ï¼Œå¦‚æœæœ‰ä¸€å¤©æˆ‘åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„æ¨¡å—ï¼Œä½†æ˜¯è¿™ä¸ªæ¨¡å—ä¸éœ€è¦è¿™äº›parentçš„ä¾èµ–ï¼Œè¿™æ—¶å€™å¦‚ä½•å¤„ç†ï¼Ÿ
æ˜¯çš„ï¼Œmavençš„ä¾èµ–ç®¡ç†å°±æ˜¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼šdependencyManagementã€‚ä»ä¸Šé¢çš„åˆ—è¡¨ä¸­æˆ‘ä»¬å‘ç°dependencyManagementä¹Ÿæ˜¯å¯ä»¥è¢«ç»§æ‰¿çš„ï¼Œè¿™æ°æ°æ»¡è¶³äº†æˆ‘ä»¬çš„éœ€è¦ï¼Œå®ƒæ—¢èƒ½å¤Ÿè®©å­æ¨¡å—ç»§æ‰¿åˆ°çˆ¶æ¨¡å—çš„ä¾èµ–é…ç½®ï¼Œåˆèƒ½ä¿è¯å­æ¨¡å—ä¾èµ–ä½¿ç”¨çš„çµæ´»æ€§ã€‚
dependencyManagementçš„ç‰¹æ€§ï¼šåœ¨dependencyManagementä¸­é…ç½®çš„å…ƒç´ æ—¢ä¸ä¼šç»™parentå¼•å…¥ä¾èµ–ï¼Œä¹Ÿä¸ä¼šç»™å®ƒçš„å­æ¨¡å—å¼•å…¥ä¾èµ–ï¼Œä»…ä»…æ˜¯å®ƒçš„é…ç½®æ˜¯å¯ç»§æ‰¿çš„ã€‚
æœ€ä½³å®è·µï¼šè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥åœ¨çˆ¶POMä¸­å£°æ˜è¿™äº›ä¾èµ–ï¼š
&lt;properties&gt;	&lt;target.version&gt;2.5.6&lt;/target.version&gt;&lt;/properties&gt;&lt;dependencyManagement&gt;	&lt;dependencies&gt;		&lt;dependency&gt;			&lt;groupId&gt;your groupId&lt;/groupId&gt;			&lt;artifactId&gt;your artifactId&lt;/artifactId&gt;			&lt;version&gt;$&#123;target.version&#125;&lt;/version&gt;		&lt;/dependency&gt;	&lt;/dependencies&gt;&lt;/dependencyManagement&gt;

å­æ¨¡å—çš„POMç»§æ‰¿è¿™äº›é…ç½®ï¼šå­æ¨¡å—ç»§æ‰¿è¿™äº›é…ç½®çš„æ—¶å€™ï¼Œä»ç„¶è¦å£°æ˜groupIdå’ŒartifactIdï¼Œè¡¨ç¤ºå½“å‰é…ç½®æ˜¯ç»§æ‰¿äºçˆ¶POMçš„ï¼Œä»è€Œç›´æ¥ä½¿ç”¨çˆ¶POMçš„ç‰ˆæœ¬å¯¹åº”çš„èµ„æºã€‚
&lt;dependencies&gt;	&lt;dependency&gt;		&lt;groupId&gt;your groupId&lt;/groupId&gt;		&lt;artifactId&gt;your artifactId&lt;/artifactId&gt;	&lt;/dependency&gt;&lt;/dependencies&gt;
è¿™ä¸ªå¯ä»¥æœ‰æ•ˆçš„é¿å…å¤šä¸ªå­æ¨¡å—ä½¿ç”¨ä¾èµ–ç‰ˆæœ¬ä¸ä¸€è‡´çš„æƒ…å†µï¼Œæœ‰åŠ©äºé™ä½ä¾èµ–å†²çªçš„å‡ ç‡ã€‚
æ³¨ï¼šåªæœ‰å­æ¨¡å—é…ç½®äº†ç»§æ‰¿çš„å…ƒç´ ï¼Œæ‰ä¼šçœŸæ­£çš„æœ‰æ•ˆï¼Œå¦åˆ™mavenæ˜¯ä¸ä¼šåŠ è½½çˆ¶æ¨¡å—ä¸­å£°æ˜çš„å…ƒç´ ã€‚
pluginManagementå’ŒdependencyManagementç›¸ç±»ä¼¼ï¼Œå®ƒæ˜¯ç”¨æ¥è¿›è¡Œæ’ä»¶ç®¡ç†çš„ã€‚
èšåˆå’Œç»§æ‰¿çš„å…³ç³»åŒºåˆ« ï¼š1ã€å¯¹äºèšåˆæ¨¡å—æ¥è¯´ï¼Œå®ƒçŸ¥é“æœ‰å“ªäº›è¢«èšåˆçš„æ¨¡å—ï¼Œä½†é‚£äº›è¢«èšåˆçš„æ¨¡å—ä¸çŸ¥é“è¿™ä¸ªèšåˆæ¨¡å—çš„å­˜åœ¨ã€‚2ã€å¯¹äºç»§æ‰¿å…³ç³»çš„çˆ¶POMæ¥è¯´ï¼Œå®ƒä¸çŸ¥é“æœ‰å“ªäº›å­æ¨¡å—ç»§æ‰¿ä¸å®ƒï¼Œä½†é‚£äº›å­æ¨¡å—éƒ½å¿…é¡»çŸ¥é“è‡ªå·±çš„çˆ¶ POMæ˜¯ä»€ä¹ˆã€‚
å…±åŒç‚¹ ï¼š1.èšåˆ POMä¸ç»§æ‰¿å…³ç³»ä¸­çš„çˆ¶POMçš„packagingéƒ½æ˜¯pom2.èšåˆæ¨¡å—ä¸ç»§æ‰¿å…³ç³»ä¸­çš„çˆ¶æ¨¡å—é™¤äº† POMä¹‹å¤–éƒ½æ²¡æœ‰å®é™…çš„å†…å®¹ã€‚æ³¨ï¼šåœ¨ç°æœ‰çš„å®é™…é¡¹ç›®ä¸­ä¸€ä¸ª POMæ—¢æ˜¯èšåˆPOMï¼Œåˆæ˜¯çˆ¶ POMï¼Œè¿™ä¹ˆåšä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿ã€‚
å‚è€ƒæ–‡æ¡£Maven POM
mavenæ ¸å¿ƒï¼Œpom.xmlè¯¦è§£
maven é…ç½®ç¯‡ ä¹‹pom.xml(ä¸€ï¼‰
å²ä¸Šæœ€å…¨çš„maven pom.xmlæ–‡ä»¶æ•™ç¨‹è¯¦è§£
Mavenèšåˆä¸ç»§æ‰¿
Mavenè¯¦è§£ä¹‹èšåˆä¸ç»§æ‰¿
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>maven</tag>
      </tags>
  </entry>
  <entry>
    <title>Mavenæ¦‚è¿°</title>
    <url>/dev-maven-start/</url>
    <content><![CDATA[Mavenæ˜¯ä»€ä¹ˆMavenè¿™ä¸ªå•è¯æ¥è‡ªäºæ„ç¬¬ç»ªè¯­ï¼Œæ„ä¸ºçŸ¥è¯†çš„ç§¯ç´¯ï¼Œæœ€æ—©åœ¨Jakata Turbineé¡¹ç›®ä¸­å®ƒå¼€å§‹è¢«ç”¨æ¥è¯•å›¾ç®€åŒ–æ„å»ºè¿‡ç¨‹ã€‚
Mavenæ˜¯åŸºäºé¡¹ç›®å¯¹è±¡æ¨¡å‹(POMï¼ŒProject Object Model)ï¼Œå¯ä»¥é€šè¿‡ä¸€å°æ®µæè¿°ä¿¡æ¯æ¥ç®¡ç†é¡¹ç›®çš„æ„å»ºï¼ŒæŠ¥å‘Šå’Œæ–‡æ¡£çš„è½¯ä»¶é¡¹ç›®ç®¡ç†å·¥å…·ã€‚
Mavenèƒ½åšä»€ä¹ˆMavené‡‡ç”¨äº†ä¸€ç§è¢«ç§°ä¹‹ä¸ºPOMçš„æ¦‚å¿µæ¥ç®¡ç†é¡¹ç›®ï¼Œæ‰€æœ‰çš„é¡¹ç›®é…ç½®ä¿¡æ¯éƒ½è¢«å®šä¹‰åœ¨ä¸€ä¸ªå«åšpom.xmlçš„æ–‡ä»¶ä¸­ï¼Œé€šè¿‡è¯¥æ–‡ä»¶ï¼ŒMavenå¯ä»¥ç®¡ç†é¡¹ç›®çš„æ•´ä¸ªå£°æ˜å‘¨æœŸï¼ŒåŒ…æ‹¬ç¼–è¯‘ï¼Œæ„å»ºï¼Œæµ‹è¯•ï¼Œå‘å¸ƒï¼ŒæŠ¥å‘Šç­‰ç­‰ã€‚ç›®å‰Apacheä¸‹ç»å¤§å¤šæ•°é¡¹ç›®éƒ½å·²ç»é‡‡ç”¨Mavenè¿›è¡Œç®¡ç†ã€‚è€ŒMavenæœ¬èº«è¿˜æ”¯æŒå¤šç§æ’ä»¶ï¼Œå¯ä»¥æ–¹ä¾¿æ›´çµæ´»çš„æ§åˆ¶é¡¹ç›®ã€‚
éƒåŒå­¦ä½¿ç”¨Mavenï¼Œæœ€æ·±åˆ‡çš„ä½“ä¼šæ˜¯ï¼Œä¸ç”¨æ‰‹åŠ¨å¯¼å…¥jaråŒ…ï¼Œå†™å†™é…ç½®æ–‡ä»¶å°±æå®šäº†ï¼ŒçœŸæ–¹ä¾¿ï¼


jaråŒ…ä¾èµ–ä½¿ç”¨mavenä¸éœ€è¦ä¸Šç½‘å•ç‹¬ä¸‹è½½jaråŒ…ï¼Œåªéœ€è¦åœ¨é…ç½®æ–‡ä»¶pom.xmlä¸­é…ç½®jaråŒ…çš„ä¾èµ–å…³ç³»ï¼Œå°±å¯ä»¥è‡ªåŠ¨çš„ä¸‹è½½jaråŒ…åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­ã€‚è¿™æ ·ï¼Œåˆ«äººå¼€å‘æˆ–è€…ä½¿ç”¨è¿™ä¸ªå·¥ç¨‹æ—¶ï¼Œä¸éœ€è¦æ¥å›çš„æ‹·è´jaråŒ…ï¼Œåªéœ€è¦å¤åˆ¶è¿™ä¸ªpom.xmlå°±å¯ä»¥è‡ªåŠ¨çš„ä¸‹è½½è¿™äº›jaråŒ…ã€‚
è€Œä¸”ï¼Œæˆ‘ä»¬è‡ªå·±ä¸‹è½½jaråŒ…ï¼Œè¿˜æœ‰å¯èƒ½é€ æˆç‰ˆæœ¬çš„ä¸ä¸€è‡´ï¼Œè¿™æ ·åœ¨ååŒå¼€å‘çš„è¿‡ç¨‹ä¸­å°±æœ‰å¯èƒ½é€ æˆä»£ç è¿è¡Œçš„ä¸ä¸€è‡´ã€‚é€šè¿‡ä½¿ç”¨mavenç²¾ç¡®çš„åŒ¹é…jaråŒ…ï¼Œå°±ä¸ä¼šå‡ºç°è¿™ç§é—®é¢˜äº†ã€‚
é¡¹ç›®åæ ‡Mavené€šè¿‡ç‰¹å®šçš„æ ‡è¯†æ¥å®šä¹‰é¡¹ç›®åç§°ï¼Œè¿™æ ·æ—¢å¯ä»¥å”¯ä¸€çš„åŒ¹é…å…¶ä»–çš„jaråŒ…ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‘å¸ƒï¼Œä½¿åˆ«äººèƒ½ä½¿ç”¨è‡ªå·±çš„å‘å¸ƒäº§å“ã€‚è¿™ä¸ªæ ‡è¯†å°±è¢«å«åšåæ ‡ï¼Œé•¿çš„å…¶å®å¾ˆæ™®é€šï¼Œå°±æ˜¯ç®€å•çš„xmlè€Œå·²ï¼š
&lt;groupId&gt;com.voidking.pandawork&lt;/groupId&gt;&lt;artifactId&gt;pandawork-start&lt;/artifactId&gt;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&lt;packaging&gt;jar&lt;/packaging&gt;&lt;name&gt;pandawork-start&lt;/name&gt;&lt;url&gt;http://maven.apache.org&lt;/url&gt;
groupIdï¼šæ‰€è¿°çš„é¡¹ç›®åç§°ï¼Œç”±äºæœ‰çš„é¡¹ç›®å¹¶ä¸æ˜¯ä¸€ä¸ªjaråŒ…æ„æˆçš„ï¼Œè€Œæ˜¯ç”±å¾ˆå¤šçš„jaråŒ…ç»„æˆçš„ã€‚å› æ­¤è¿™ä¸ªgroupIdå°±æ˜¯æ•´ä¸ªé¡¹ç›®çš„åç§°ã€‚
artifactIdï¼šåŒ…çš„åç§°ã€‚
versionï¼šç‰ˆæœ¬å·ã€‚
packagingï¼šåŒ…çš„ç±»å‹ï¼Œä¸€èˆ¬éƒ½æ˜¯jarï¼Œä¹Ÿå¯ä»¥æ˜¯warä¹‹ç±»çš„ã€‚å¦‚æœä¸å¡«ï¼Œé»˜è®¤å°±æ˜¯jarã€‚
nameå’Œurlï¼Œä¸€ä¸ªæ˜¯åç§°ï¼Œä¸€ä¸ªæ˜¯mavençš„åœ°å€ã€‚ä¸»è¦å°±æ˜¯ä¸Šé¢çš„å‡ ä¸ªå‚æ•°ã€‚
å½“æƒ³è¦ä¾èµ–ä»€ä¹ˆjarçš„æ—¶å€™å°±å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼ä¾èµ–ï¼š
&lt;dependencies&gt;  &lt;dependency&gt;    &lt;groupId&gt;junit&lt;/groupId&gt;    &lt;artifactId&gt;junit&lt;/artifactId&gt;    &lt;version&gt;3.8.1&lt;/version&gt;    &lt;scope&gt;test&lt;/scope&gt;  &lt;/dependency&gt;&lt;/dependencies&gt;

å„ä¸ªå±æ€§çš„å†…å®¹åŸºæœ¬ä¸Šéƒ½æ˜¯ä¸€æ ·çš„ã€‚
è¿™é‡Œè¦æ³¨æ„çš„æ˜¯jaråŒ…çš„å‘½åè§„åˆ™ï¼š
artifactId-version[-classifier].packaging
æ¯”å¦‚ä¸Šé¢çš„pom.xmlç”Ÿæˆçš„jaråŒ…åå­—å°±æ˜¯ï¼špandawork-start-0.0.1-SNAPSHOT.jarã€‚
è¿™é‡Œçš„classifieræ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯æœ‰çš„é¡¹ç›®å¯èƒ½è¿˜éœ€è¦å¯¼å‡ºé™„å±çš„ä¸€äº›æ–‡ä»¶ï¼Œå¦‚javadocï¼Œsourceç­‰ç­‰ï¼Œé‚£ä¹ˆè¿™ä¸ªåœ°æ–¹å°±éœ€è¦é…ç½®ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ä¸€èˆ¬éƒ½æ˜¯JDKXXXä¹‹ç±»çš„ã€‚
æµ‹è¯•é©±åŠ¨Mavenæ˜¯æµ‹è¯•é©±åŠ¨çš„å¼€å‘æ€è·¯ï¼Œå› æ­¤å·¥ç¨‹åˆ›å»ºåˆæœŸï¼Œå°±åŒ…å«ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œmainå’Œtestã€‚ä¸€ä¸ªç”¨äºæ”¾ç½®å¼€å‘çš„javaæ–‡ä»¶ï¼Œä¸€ä¸ªç”¨äºå†™testå•å…ƒæµ‹è¯•ã€‚è¿™æ ·æ¯æ¬¡å¼€å‘çš„æ—¶å€™ï¼Œæå‰è®¾è®¡å•å…ƒæµ‹è¯•ï¼Œå°±èƒ½å¸®åŠ©å‡å°‘BUGã€‚
Mavenç”Ÿå‘½å‘¨æœŸMavenæœ‰ä¸‰å¥—ç›¸äº’ç‹¬ç«‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œè¯·æ³¨æ„è¿™é‡Œè¯´çš„æ˜¯â€œä¸‰å¥—â€ï¼Œè€Œä¸”â€œç›¸äº’ç‹¬ç«‹â€ã€‚è¿™ä¸‰å¥—ç”Ÿå‘½å‘¨æœŸåˆ†åˆ«æ˜¯ï¼š

Clean Lifecycle åœ¨è¿›è¡ŒçœŸæ­£çš„æ„å»ºä¹‹å‰è¿›è¡Œä¸€äº›æ¸…ç†å·¥ä½œã€‚
Default Lifecycle æ„å»ºçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œç¼–è¯‘ï¼Œæµ‹è¯•ï¼Œæ‰“åŒ…ï¼Œéƒ¨ç½²ç­‰ç­‰ã€‚
Site Lifecycle ç”Ÿæˆé¡¹ç›®æŠ¥å‘Šï¼Œç«™ç‚¹ï¼Œå‘å¸ƒç«™ç‚¹ã€‚

å†æ¬¡å¼ºè°ƒä¸€ä¸‹å®ƒä»¬æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä½ å¯ä»¥ä»…ä»…è°ƒç”¨cleanæ¥æ¸…ç†å·¥ä½œç›®å½•ï¼Œä»…ä»…è°ƒç”¨siteæ¥ç”Ÿæˆç«™ç‚¹ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥è¿è¡Œ mvn clean install site è¿è¡Œæ‰€æœ‰è¿™ä¸‰å¥—ç”Ÿå‘½å‘¨æœŸã€‚
Cleanæ¯å¥—ç”Ÿå‘½å‘¨æœŸéƒ½ç”±ä¸€ç»„é˜¶æ®µ(Phase)ç»„æˆï¼Œæˆ‘ä»¬å¹³æ—¶åœ¨å‘½ä»¤è¡Œè¾“å…¥çš„å‘½ä»¤æ€»ä¼šå¯¹åº”äºä¸€ä¸ªç‰¹å®šçš„é˜¶æ®µã€‚æ¯”å¦‚ï¼Œè¿è¡Œmvn clean ï¼Œè¿™ä¸ªçš„cleanæ˜¯Cleanç”Ÿå‘½å‘¨æœŸçš„ä¸€ä¸ªé˜¶æ®µã€‚Cleanç”Ÿå‘½å‘¨æœŸä¸€å…±åŒ…å«äº†ä¸‰ä¸ªé˜¶æ®µï¼š

pre-clean  æ‰§è¡Œä¸€äº›éœ€è¦åœ¨cleanä¹‹å‰å®Œæˆçš„å·¥ä½œ
clean  ç§»é™¤æ‰€æœ‰ä¸Šä¸€æ¬¡æ„å»ºç”Ÿæˆçš„æ–‡ä»¶
post-clean  æ‰§è¡Œä¸€äº›éœ€è¦åœ¨cleanä¹‹åç«‹åˆ»å®Œæˆçš„å·¥ä½œ

mvn cleanä¸­çš„cleanå°±æ˜¯ä¸Šé¢çš„cleanï¼Œåœ¨ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ï¼Œè¿è¡ŒæŸä¸ªé˜¶æ®µçš„æ—¶å€™ï¼Œå®ƒä¹‹å‰çš„æ‰€æœ‰é˜¶æ®µéƒ½ä¼šè¢«è¿è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œmvn clean ç­‰åŒäº mvn pre-clean clean ï¼Œå¦‚æœæˆ‘ä»¬è¿è¡Œ mvn post-clean ï¼Œé‚£ä¹ˆ pre-cleanï¼Œclean éƒ½ä¼šè¢«è¿è¡Œã€‚è¿™æ˜¯Mavenå¾ˆé‡è¦çš„ä¸€ä¸ªè§„åˆ™ï¼Œå¯ä»¥å¤§å¤§ç®€åŒ–å‘½ä»¤è¡Œçš„è¾“å…¥ã€‚
SiteSiteç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªé˜¶æ®µï¼š

pre-site     æ‰§è¡Œä¸€äº›éœ€è¦åœ¨ç”Ÿæˆç«™ç‚¹æ–‡æ¡£ä¹‹å‰å®Œæˆçš„å·¥ä½œ
site    ç”Ÿæˆé¡¹ç›®çš„ç«™ç‚¹æ–‡æ¡£
post-site     æ‰§è¡Œä¸€äº›éœ€è¦åœ¨ç”Ÿæˆç«™ç‚¹æ–‡æ¡£ä¹‹åå®Œæˆçš„å·¥ä½œï¼Œå¹¶ä¸”ä¸ºéƒ¨ç½²åšå‡†å¤‡
site-deploy     å°†ç”Ÿæˆçš„ç«™ç‚¹æ–‡æ¡£éƒ¨ç½²åˆ°ç‰¹å®šçš„æœåŠ¡å™¨ä¸Šè¿™é‡Œç»å¸¸ç”¨åˆ°çš„æ˜¯siteé˜¶æ®µå’Œsite-deployé˜¶æ®µï¼Œç”¨ä»¥ç”Ÿæˆå’Œå‘å¸ƒMavenç«™ç‚¹ï¼Œè¿™å¯æ˜¯Mavenç›¸å½“å¼ºå¤§çš„åŠŸèƒ½ï¼ŒManageræ¯”è¾ƒå–œæ¬¢ï¼Œæ–‡æ¡£åŠç»Ÿè®¡æ•°æ®è‡ªåŠ¨ç”Ÿæˆï¼Œå¾ˆå¥½çœ‹ã€‚

DefaultMavençš„æœ€é‡è¦çš„æ˜¯Defaultç”Ÿå‘½å‘¨æœŸï¼Œç»å¤§éƒ¨åˆ†å·¥ä½œéƒ½å‘ç”Ÿåœ¨è¿™ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ï¼Œè¿™é‡Œï¼Œæˆ‘åªè§£é‡Šä¸€äº›æ¯”è¾ƒé‡è¦å’Œå¸¸ç”¨çš„é˜¶æ®µï¼š

validate
generate-sources
process-sources
generate-resources
process-resources     å¤åˆ¶å¹¶å¤„ç†èµ„æºæ–‡ä»¶ï¼Œè‡³ç›®æ ‡ç›®å½•ï¼Œå‡†å¤‡æ‰“åŒ…ã€‚
compile     ç¼–è¯‘é¡¹ç›®çš„æºä»£ç ã€‚
process-classes
generate-test-sources 
process-test-sources 
generate-test-resources
process-test-resources     å¤åˆ¶å¹¶å¤„ç†èµ„æºæ–‡ä»¶ï¼Œè‡³ç›®æ ‡æµ‹è¯•ç›®å½•ã€‚
test-compile     ç¼–è¯‘æµ‹è¯•æºä»£ç ã€‚
process-test-classes
test     ä½¿ç”¨åˆé€‚çš„å•å…ƒæµ‹è¯•æ¡†æ¶è¿è¡Œæµ‹è¯•ã€‚è¿™äº›æµ‹è¯•ä»£ç ä¸ä¼šè¢«æ‰“åŒ…æˆ–éƒ¨ç½²ã€‚
prepare-package
package     æ¥å—ç¼–è¯‘å¥½çš„ä»£ç ï¼Œæ‰“åŒ…æˆå¯å‘å¸ƒçš„æ ¼å¼ï¼Œå¦‚ JAR ã€‚
pre-integration-test
integration-test
post-integration-test
verify
install     å°†åŒ…å®‰è£…è‡³æœ¬åœ°ä»“åº“ï¼Œä»¥è®©å…¶å®ƒé¡¹ç›®ä¾èµ–ã€‚
deploy     å°†æœ€ç»ˆçš„åŒ…å¤åˆ¶åˆ°è¿œç¨‹çš„ä»“åº“ï¼Œä»¥è®©å…¶å®ƒå¼€å‘äººå‘˜ä¸é¡¹ç›®å…±äº«ã€‚

åŸºæœ¬ä¸Šï¼Œæ ¹æ®åç§°æˆ‘ä»¬å°±èƒ½çŒœå‡ºæ¯ä¸ªé˜¶æ®µçš„ç”¨é€”ï¼Œå…³äºå…¶å®ƒé˜¶æ®µçš„è§£é‡Šï¼Œè¯·å‚è€ƒ http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html
è®°ä½ï¼Œè¿è¡Œä»»ä½•ä¸€ä¸ªé˜¶æ®µçš„æ—¶å€™ï¼Œå®ƒå‰é¢çš„æ‰€æœ‰é˜¶æ®µéƒ½ä¼šè¢«è¿è¡Œï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¿è¡Œmvn install çš„æ—¶å€™ï¼Œä»£ç ä¼šè¢«ç¼–è¯‘ï¼Œæµ‹è¯•ï¼Œæ‰“åŒ…ã€‚
Mavenå¸¸ç”¨å‘½ä»¤
mvn -hä¸ä¼šç”¨æ—¶ï¼Œå¯å¯»æ±‚å¸®åŠ©ã€‚

mvn archetype:create -DgroupId=packageName -DartifactId=projectNameåˆ›å»ºMavençš„æ™®é€šjavaé¡¹ç›®

mvn archetype:create -DgroupId=packageName -DartifactId=webappName -DarchetypeArtifactId=maven-archetype-webappåˆ›å»ºMavençš„Webé¡¹ç›®

mvn compileç¼–è¯‘æºä»£ç 

mvn test-compileç¼–è¯‘æµ‹è¯•ä»£ç 

mvn testè¿è¡Œæµ‹è¯•

mvn installåœ¨æœ¬åœ°Repositoryä¸­å®‰è£…jar

mvn clean install

mvn jetty:runè°ƒç”¨ Jetty æ’ä»¶çš„ Run ç›®æ ‡åœ¨ Jetty Servlet å®¹å™¨ä¸­å¯åŠ¨ web åº”ç”¨ 


å­¦ä¹ èµ„æ–™Mavenå®˜ç½‘
å°†mavenæºæ”¹ä¸ºå›½å†…é˜¿é‡Œäº‘é•œåƒ
Mavenæ•™ç¨‹
maven pom.xmlæ–‡ä»¶è¯¦è§£
Mavené‚£ç‚¹äº‹å„¿ï¼ˆEclipseç‰ˆï¼‰
Mavenç”Ÿå‘½å‘¨æœŸè¯¦è§£
mvnå¸¸ç”¨å‘½ä»¤
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>maven</tag>
      </tags>
  </entry>
  <entry>
    <title>SSHæ¦‚è¿°</title>
    <url>/dev-ssh-start/</url>
    <content><![CDATA[åè¯è§£é‡ŠSSHï¼šSSHä¸æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œè€Œæ˜¯å¤šä¸ªæ¡†æ¶ï¼ˆStruts+Spring+Hibernateï¼‰çš„é›†æˆï¼Œæ˜¯ç›®å‰è¾ƒæµè¡Œçš„ä¸€ç§Webåº”ç”¨ç¨‹åºå¼€æºé›†æˆæ¡†æ¶ï¼Œç”¨äºæ„å»ºçµæ´»ã€æ˜“äºæ‰©å±•çš„å¤šå±‚Webåº”ç”¨ç¨‹åºã€‚
Strutsï¼šå®ƒé€šè¿‡é‡‡ç”¨ Java Servlet/JSP æŠ€æœ¯ï¼Œå®ç°äº†åŸºäºJavaEE Webåº”ç”¨çš„MVCè®¾è®¡æ¨¡å¼çš„åº”ç”¨æ¡†æ¶ï¼Œæ˜¯MVCç»å…¸è®¾è®¡æ¨¡å¼ä¸­çš„ä¸€ä¸ªç»å…¸äº§å“ã€‚
Struts2ï¼šå®ƒæ˜¯Strutsçš„ä¸‹ä¸€ä»£äº§å“ï¼Œæ˜¯åœ¨Strutså’ŒWebWorkçš„æŠ€æœ¯åŸºç¡€ä¸Šè¿›è¡Œäº†åˆå¹¶çš„å…¨æ–°çš„Struts2æ¡†æ¶ã€‚å…¶å…¨æ–°çš„Struts2çš„ä½“ç³»ç»“æ„ä¸Strutsçš„ä½“ç³»ç»“æ„å·®åˆ«å·¨å¤§ã€‚Struts2ä»¥WebWorkä¸ºæ ¸å¿ƒï¼Œé‡‡ç”¨æ‹¦æˆªå™¨çš„æœºåˆ¶æ¥å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼Œè¿™æ ·çš„è®¾è®¡ä¹Ÿä½¿å¾—ä¸šåŠ¡é€»è¾‘æ§åˆ¶å™¨èƒ½å¤Ÿä¸ServletAPIå®Œå…¨è„±ç¦»å¼€ï¼Œæ‰€ä»¥Struts2å¯ä»¥ç†è§£ä¸ºWebWorkçš„æ›´æ–°äº§å“ã€‚
Springï¼šç®€å•æ¥è¯´ï¼ŒSpringæ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ§åˆ¶åè½¬ï¼ˆIoCï¼‰å’Œé¢å‘åˆ‡é¢ï¼ˆAOPï¼‰çš„å®¹å™¨æ¡†æ¶ã€‚

Hibernateï¼šå®ƒæ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„å¯¹è±¡å…³ç³»æ˜ å°„æ¡†æ¶ï¼Œå®ƒå¯¹JDBCè¿›è¡Œäº†éå¸¸è½»é‡çº§çš„å¯¹è±¡å°è£…ï¼Œä½¿å¾—Javaç¨‹åºå‘˜å¯ä»¥éšå¿ƒæ‰€æ¬²çš„ä½¿ç”¨å¯¹è±¡ç¼–ç¨‹æ€ç»´æ¥æ“çºµæ•°æ®åº“ã€‚ Hibernateå¯ä»¥åº”ç”¨åœ¨ä»»ä½•ä½¿ç”¨JDBCçš„åœºåˆï¼Œæ—¢å¯ä»¥åœ¨Javaçš„å®¢æˆ·ç«¯ç¨‹åºä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨Servlet/JSPçš„Webåº”ç”¨ä¸­ä½¿ç”¨ï¼Œæœ€å…·é©å‘½æ„ä¹‰çš„æ˜¯ï¼ŒHibernateå¯ä»¥åœ¨åº”ç”¨EJBçš„J2EEæ¶æ„ä¸­å–ä»£CMPï¼Œå®Œæˆæ•°æ®æŒä¹…åŒ–çš„é‡ä»»ã€‚
å±‚æ¬¡åˆ’åˆ†JavaEEçš„ä½“ç³»ç»“æ„æœ‰ä¸‰å±‚ï¼šè¡¨ç¤ºå±‚ã€ä¸šåŠ¡é€»è¾‘å±‚å’Œæ•°æ®æŒä¹…å±‚ã€‚å¼€å‘ä¸€ä¸ªSSHé¡¹ç›®ï¼Œè¦éµå¾ªè¿™ä¸‰å±‚æ¨¡å¼ã€‚ç”¨Hibernateæ¥å®Œæˆæ•°æ®çš„æŒä¹…å±‚åº”ç”¨ï¼Œç”¨Springçš„Beanæ¥ç®¡ç†ç»„ä»¶ï¼ˆä¸»è¦æ˜¯DAOã€ä¸šåŠ¡é€»è¾‘å’ŒStrutsçš„Actionï¼‰ï¼Œè€Œç”¨Strutsæ¥å®Œæˆé¡µé¢çš„æ§åˆ¶è·³è½¬ã€‚
å¼€å‘ä¸€ä¸ªé¡¹ç›®ï¼Œä¸€èˆ¬è¦å…ˆå®ŒæˆæŒä¹…å±‚æ•°æ®è¿æ¥ï¼Œç„¶åå®ç°DAOï¼Œæ¥ç€æ˜¯ä¸šåŠ¡é€»è¾‘ï¼Œæœ€åå®ç°é¡µé¢åŠé€»è¾‘æ§åˆ¶ã€‚
demoè®¾è®¡å¼€å‘ç¯å¢ƒEclipse IDE for Java EE Developers + Mysql + Tomcat
æ•°æ®åº“è®¾è®¡åˆ›å»ºä¸€ä¸ªWebé¡¹ç›®ï¼Œå‘½åä¸ºâ€œsshâ€ã€‚è¯¥é¡¹ç›®è¦å®ç°å­¦ç”Ÿã€è¯¾ç¨‹åŠæˆç»©çš„å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥æ‰¾åŠŸèƒ½ï¼Œéœ€è¦ä¸‰ä¸ªè¡¨ï¼Œå³XSBè¡¨ã€KCBè¡¨ã€CJBè¡¨ã€‚å…¶ä¸­XSBè¡¨ä¸­å«æœ‰è¯¥å­¦ç”Ÿæ‰€å±ä¸“ä¸šçš„IDï¼Œä¸”ä½œä¸ºå¤–é”®ï¼Œæ•…è¿˜åº”è¯¥æœ‰ä¸€ä¸ªZYBè¡¨ã€‚åœ¨ç™»é™†å­¦ç”Ÿæˆç»©ç®¡ç†ç³»ç»Ÿæ—¶ï¼Œå¦‚æœæ²¡æœ‰ç™»é™†æˆåŠŸï¼Œå°±å›åˆ°ç™»é™†ç•Œé¢ï¼Œç™»é™†æˆåŠŸåæ–¹å¯è¿›è¡Œå„ç§æ“ä½œï¼Œæ‰€ä»¥è¿˜è¦æœ‰ä¸ªDLBè¡¨ã€‚æ•°æ®åº“åä¸ºXSCJã€‚
XSB1ã€å­¦ç”Ÿä¿¡æ¯è¡¨ç»“æ„



é¡¹ç›®å
åˆ—å
æ•°æ®ç±»å‹
å¯ç©º
é»˜è®¤å€¼
è¯´æ˜



å­¦å·
XH
å®šé•¿å­—ç¬¦ä¸²å‹ï¼ˆchar6ï¼‰
Ã—
æ— 
ä¸»é”®


å§“å
XM
ä¸å®šé•¿å­—ç¬¦ä¸²å‹ï¼ˆvarchar8ï¼‰
Ã—
æ— 



æ€§åˆ«
XB
ä½å‹ï¼ˆbitï¼‰
Ã—
æ— 
å€¼çº¦æŸï¼š1/0ã€‚1è¡¨ç¤ºç”·ï¼Œ0è¡¨ç¤ºå¥³


å‡ºç”Ÿæ—¶é—´
CSSJ
æ—¥æœŸæ—¶é—´å‹ï¼ˆdatetimeï¼‰
âˆš
æ— 



ä¸“ä¸šId
ZY_ID
æ•´æ•°å‹ï¼ˆintï¼‰
Ã—
æ— 



æ€»å­¦åˆ†
ZXF
æ•´æ•°å‹ï¼ˆintï¼‰
âˆš
0
0&lt;=æ€»å­¦åˆ†&lt;160


å¤‡æ³¨
BZ
ä¸å®šé•¿å­—ç¬¦ä¸²å‹ï¼ˆvarchar500ï¼‰
âˆš
æ— 



ç…§ç‰‡
ZP
longblob
âˆš
æ— 



2ã€å­¦ç”Ÿä¿¡æ¯è¡¨æ ·æœ¬æ•°æ®



å­¦å·
å§“å
æ€§åˆ«
å‡ºç”Ÿæ—¶é—´
ä¸“ä¸š
æ€»å­¦åˆ†
å¤‡æ³¨



081101
ç‹æ—
ç”·
1990-2-10
1
50



081102
ç¨‹æ˜
ç”·
1991-2-01
1
50



081201
ç‹æ•
ç”·
1989-6-10
2
42



081202
å­™è‰³
å¥³
1989-12-29
2
40
æœ‰ä¸€é—¨åŠŸè¯¾ä¸åŠæ ¼ï¼Œå¾…è¡¥è€ƒ


081241
ç½—ç³ç³
å¥³
1990-1-30
2
50
è½¬ä¸“ä¸šå­¦ä¹ 


KCB1ã€è¯¾ç¨‹ä¿¡æ¯è¡¨ç»“æ„



é¡¹ç›®å
åˆ—å
æ•°æ®ç±»å‹
å¯ç©º
é»˜è®¤å€¼
è¯´æ˜



è¯¾ç¨‹å·
KCH
å®šé•¿å­—ç¬¦å‹ï¼ˆchar3ï¼‰
Ã—
æ— 
ä¸»é”®


è¯¾ç¨‹å
KCM
ä¸å®šé•¿å­—ç¬¦ä¸²å‹ï¼ˆvarchar12ï¼‰
âˆš
æ— 



å¼€å­¦å­¦æœŸ
KXXQ
æ•´æ•°å‹ï¼ˆsmallintï¼‰
âˆš
æ— 
åªèƒ½ä¸º1~8


å­¦æ—¶
XS
æ•´æ•°å‹ï¼ˆintï¼‰
âˆš
0



å­¦åˆ†
XF
æ•´æ•°å‹ï¼ˆintï¼‰
âˆš
0



2ã€è¯¾ç¨‹ä¿¡æ¯è¡¨æ ·æœ¬æ•°æ®



è¯¾ç¨‹å·
è¯¾ç¨‹å
å¼€å­¦å­¦æœŸ
å­¦æ—¶
å­¦åˆ†



101
è®¡ç®—æœºåŸºç¡€
1
80
5


102
ç¨‹åºè®¾è®¡è¯­è¨€
2
68
4


206
ç¦»æ•£æ•°å­¦
4
68
4


208
æ•°æ®ç»“æ„
5
68
4


CJB1ã€å­¦ç”Ÿæˆç»©è¡¨ç»“æ„



é¡¹ç›®å
åˆ—å
æ•°æ®ç±»å‹
å¯ç©º
é»˜è®¤å€¼
è¯´æ˜



å­¦å·
XH
å®šé•¿å­—ç¬¦å‹ï¼ˆchar6ï¼‰
Ã—
æ— 
ä¸»é”®


è¯¾ç¨‹å·
KCH
å®šé•¿å­—ç¬¦å‹ï¼ˆchar3ï¼‰
Ã—
æ— 
ä¸»é”®


æˆç»©
CJ
æ•´æ•°å‹ï¼ˆintï¼‰
âˆš
0



å­¦åˆ†
XF
æ•´æ•°å‹ï¼ˆintï¼‰
âˆš




2ã€å­¦ç”Ÿæˆç»©è¡¨æ ·æœ¬æ•°æ®



å­¦å·
è¯¾ç¨‹å·
æˆç»©



081101
101
80


081101
102
78


081101
206
76


ZYB1ã€ä¸“ä¸šä¿¡æ¯è¡¨ç»“æ„



é¡¹ç›®å
åˆ—å
æ•°æ®ç±»å‹
å¯ç©º
é»˜è®¤å€¼
è¯´æ˜



Id
ID
æ•´æ•°å‹ï¼ˆintï¼‰
Ã—
å¢1
ä¸»é”®


ä¸“ä¸šå
ZYM
å®šé•¿å­—ç¬¦å‹ï¼ˆchar12ï¼‰
Ã—




äººæ•°
RS
æ•´æ•°å‹ï¼ˆintï¼‰
âˆš
0



è¾…å¯¼å‘˜
FDY
å®šé•¿å­—ç¬¦å‹ï¼ˆchar8ï¼‰
Ã—




2ã€ä¸“ä¸šä¿¡æ¯è¡¨æ ·æœ¬æ•°æ®



ä¸“ä¸š
äººæ•°
è¾…å¯¼å‘˜



è®¡ç®—æœº
150
é»„æ—¥ç”Ÿ


é€šä¿¡å·¥ç¨‹
131
èµµçº¢


DLB1ã€ç™»é™†è¡¨ç»“æ„



é¡¹ç›®å
åˆ—å
æ•°æ®ç±»å‹
å¯ç©º
é»˜è®¤å€¼
è¯´æ˜



æ ‡å¿—
ID
æ•´æ•°å‹ï¼ˆintï¼‰
Ã—

ä¸»é”®ï¼Œæ˜¯æ ‡å¿—


ç™»é™†å·
XH
å®šé•¿å­—ç¬¦å‹ï¼ˆchar6ï¼‰
Ã—
æ— 
ä¸XSBè¡¨å­¦å·å…³è”


å£ä»¤
KL
å®šé•¿å­—ç¬¦å‹ï¼ˆchar20ï¼‰
âˆš
æ— 
å¯ä»¥åŠ å¯†ï¼Œé•¿åº¦ä¸º8~20


2ã€ç™»å½•è¡¨æ ·æœ¬æ•°æ®



æ ‡å¿—
ç™»é™†å·
å£ä»¤



1
081101
voidking


2
081102
voidking


XS_KCB1ã€è¿æ¥è¡¨ç»“æ„



é¡¹ç›®å
åˆ—å
æ•°æ®ç±»å‹
å¯ç©º
é»˜è®¤å€¼
è¯´æ˜



å­¦å·
XH
å®šé•¿å­—ç¬¦å‹ï¼ˆchar6ï¼‰
Ã—

ä¸»é”®


è¯¾ç¨‹å·
KCH
å®šé•¿å­—ç¬¦å‹ï¼ˆchar3ï¼‰
Ã—

ä¸»é”®










2ã€è¿æ¥è¡¨æ ·æœ¬æ•°æ®










å­¦å·
è¯¾ç¨‹å·



081101
101


081101
102


081101
206


åŒ…è®¾è®¡com.voidking.ssh.actionï¼šæ”¾ç½®å¯¹åº”çš„ç”¨æˆ·è‡ªå®šä¹‰çš„Actionç±»ã€‚ç”±Actionç±»è°ƒç”¨ä¸šåŠ¡é€»è¾‘æ¥å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œç„¶åæ§åˆ¶è·³è½¬ã€‚
com.voidking.ssh.daoï¼šæ”¾ç½®DAOï¼ˆæ•°æ®è®¿é—®å¯¹è±¡ï¼‰çš„æ¥å£ï¼Œæ¥å£ä¸­çš„æ–¹æ³•ç”¨æ¥å’Œæ•°æ®åº“è¿›è¡Œäº¤äº’ï¼Œè¿™äº›æ–¹æ³•ç”±å®ƒä»¬çš„ç±»æ¥å®ç°ã€‚
com.voidking.ssh.dao.impï¼šæ”¾ç½®å®ç°DAOæ¥å£çš„ç±»ã€‚
com.voidking.ssh.modelï¼šæ”¾ç½®è¡¨å¯¹åº”çš„POJOç±»åŠæ˜ å°„æ–‡ä»¶*.hbm.xmlã€‚
com.voidking.ssh.serviceï¼šæ”¾ç½®ä¸šåŠ¡é€»è¾‘æ¥å£ã€‚æ¥å£ä¸­çš„æ–¹æ³•ç”¨æ¥å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œè¿™äº›æ–¹æ³•ç”±å®ç°æ¥å£çš„ç±»æ¥å®ç°ã€‚
com.voidking.ssh.service.impï¼šæ”¾ç½®å®ç°ä¸šåŠ¡é€»è¾‘æ¥å£çš„ç±»ã€‚
com.voidking.ssh.toolï¼šæ”¾ç½®å…¬ç”¨çš„å·¥å…·ç±»ï¼Œå¦‚åˆ†é¡µç±»ã€‚
struts.propertiesï¼šå®ç°Struts2å’ŒSpringæ•´åˆã€‚
struts.xmlï¼šé…ç½®Actionã€‚
æ·»åŠ Springå¼€å‘å®ç°HibernateæŒä¹…å±‚å®ç°DAOå®ç°ä¸šåŠ¡é€»è¾‘å±‚å®ç°Webå±‚æºä»£ç åˆ†äº«æ”¹è¿›è®¾è®¡ä½¿ç”¨SSHè‡ªåŠ¨ç”Ÿæˆè¡¨ï¼Œæˆ–è€…é€šè¿‡è¡¨è‡ªåŠ¨ç”ŸæˆPOJOç±»ã€‚
å‚è€ƒæ–‡æ¡£ã€ŠJava EEåŸºç¡€å®ç”¨æ•™ç¨‹ã€‹ï¼Œéƒ‘é˜¿å¥‡ä¸»ç¼–SSHæ¡†æ¶æ€»ç»“ï¼šhttp://blog.csdn.net/shan9liang/article/details/8803989Struts1å’ŒStruts2ï¼šhttp://blog.csdn.net/bjyfb/article/details/8679523æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºSSHï¼šhttp://www.tuicool.com/articles/f2u6VrAhttp://blog.csdn.net/zhaolijing2012/article/details/39700187eclipseæ­å»ºSSHæ¡†æ¶è¯¦è§£ï¼šhttp://blog.csdn.net/aaaaaaaa0705/article/details/6288431
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>ssh</tag>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>hibernate</tag>
        <tag>spring</tag>
        <tag>struts2</tag>
      </tags>
  </entry>
  <entry>
    <title>Springä¸Hibernateæ•´åˆåº”ç”¨</title>
    <url>/dev-spring-hibernate-integration/</url>
    <content><![CDATA[åˆ›å»ºæ•°æ®åº“å’Œè¡¨å…¶å®æˆ‘ä»¬åœ¨ä¹‹å‰çš„ä¾‹å­ä¸­å·²ç»åˆ›å»ºè¿‡äº†ï¼Œæ•°æ®åº“åxscjï¼Œè¡¨ä¸ºdlbã€‚è¯¦æƒ…è¯·è§ã€ŠHibernateä¸Struts2æ•´åˆåº”ç”¨ã€‹ã€‚
åˆ›å»ºé¡¹ç›®åˆ›å»ºDynamic Web Projectï¼Œå‘½åä¸ºhibernate_springã€‚
åŠ è½½Springæ¡†æ¶å³å‡»é¡¹ç›®åï¼ŒPropertiesï¼ŒJava Build Pathï¼ŒLibrariesï¼ŒAdd Libraryâ€¦ï¼ŒUser Libraryï¼ŒNextï¼ŒUser Librariesâ€¦ï¼ŒNewâ€¦ï¼Œè¾“å…¥â€œspringâ€ï¼ŒOKï¼ŒAdd External JARsâ€¦ï¼Œé€‰ä¸­éœ€è¦çš„jaræ–‡ä»¶ï¼Œæ‰“å¼€ï¼ŒOKã€‚
åŠ è½½Hibernateæ¡†æ¶å³å‡»é¡¹ç›®åï¼ŒPropertiesï¼ŒJava Build Pathï¼ŒLibrariesï¼ŒAdd Libraryâ€¦ï¼ŒUser Libraryï¼ŒNextï¼ŒUser Librariesâ€¦ï¼ŒNewâ€¦ï¼Œè¾“å…¥â€œhibernateâ€ï¼ŒOKï¼ŒAdd External JARsâ€¦ï¼Œé€‰ä¸­éœ€è¦çš„jaræ–‡ä»¶ï¼Œæ‰“å¼€ï¼ŒOKã€‚

ç”ŸæˆPOJOç±»å’Œ*.hbm.xmlWindowï¼ŒOpen Perspectiveï¼ŒHibernateã€‚
Add Configurationâ€¦ï¼Œé€‰ä¸­Projectï¼ˆhibernate_springï¼‰ï¼Œé€‰æ‹©Database connectionï¼ŒSetupâ€¦ Propery fileï¼ŒSetupâ€¦ Configuration fileï¼ˆéœ€è¦è¿›è¡Œä¸€äº›é…ç½®ï¼‰ã€‚
è¿™æ—¶ï¼Œä¼šæç¤ºç¼ºå°‘MySQLé©±åŠ¨ï¼Œåœ¨Classpathé€‰é¡¹å¡ä¸­é…ç½®ä¸€ä¸‹å°±å¥½äº†ã€‚
Fileï¼ŒNewï¼ŒHibernate Reverse Engineering Fileï¼ˆreveng.xmlï¼‰ï¼Œé€‰ä¸­hibernate_springï¼ŒNextï¼Œé€‰æ‹©Console configurationï¼ŒRefreshï¼Œ
åœ¨å·¥å…·æ ä¸­ï¼Œæœ‰ä¸‰ä¸ªä¸‰è§’å·ï¼ˆç»¿è‰²åœ†åº•ï¼‰ï¼Œå…¶ä¸­ä¸€ä¸ªä¸‰è§’å·çš„å³ä¸‹è§’æœ‰Hibernateçš„å°æ ‡å¿—ã€‚ç‚¹å‡»å®ƒçš„ä¸‹æ‹‰èœå•ï¼ŒHibernate Code Generation Configurationsâ€¦ã€‚
Newï¼Œåœ¨Mainé€‰é¡¹å¡ä¸­é€‰æ‹©Console configurationï¼Œé€‰æ‹©Output directoryï¼Œå‹¾é€‰Reverse engineer from JDBC Connectionã€‚
åœ¨Exportersé€‰é¡¹å¡ä¸­å‹¾é€‰Domain codeï¼ˆ.javaï¼‰å’ŒHibernate XML Mappingsï¼ˆ.hbm.xmlï¼‰ã€‚Runã€‚
ç¼–å†™DlDaoæ¥å£package com.voidking.hibernate_spring.dao;import com.voidking.hibernate_spring.model.Dlb;public interface DlDao &#123;	public void save(Dlb dl);&#125;

ç¼–å†™DlDaoImpå®ç°ç±»package com.voidking.hibernate_spring.dao.imp;import org.hibernate.SessionFactory;import org.hibernate.Transaction;import org.hibernate.classic.Session;import com.voidking.hibernate_spring.dao.DlDao;import com.voidking.hibernate_spring.model.Dlb;public class DlDaoImp implements DlDao &#123;	// ä¾èµ–æ³¨å…¥SessionFactoryå¯¹è±¡ï¼Œsetæ–¹æ³•æ³¨å…¥	private SessionFactory sessionFactory;	public void setSessionFactory(SessionFactory sessionFactory) &#123;		this.sessionFactory = sessionFactory;	&#125;	@Override	public void save(Dlb dl) &#123;		try &#123;			Session session = sessionFactory.openSession();			Transaction ts = session.beginTransaction();			session.save(dl);			ts.commit();		&#125; catch (Exception e) &#123;			// TODO: handle exception			e.printStackTrace();		&#125;			&#125;&#125;

applicationContext.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!--  - Middle tier application context definition for the image database.  --&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;		xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;		xmlns:context=&quot;http://www.springframework.org/schema/context&quot;		xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;		xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd				http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd				http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;&gt;	&lt;!-- ç”¨Beanå®šä¹‰æ•°æ®æº --&gt;	&lt;bean id=&quot;datasource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;&gt;		&lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt;		&lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/xscj&quot;&gt;&lt;/property&gt;		&lt;property name=&quot;username&quot; value=&quot;scott&quot;&gt;&lt;/property&gt;		&lt;property name=&quot;password&quot; value=&quot;tiger&quot;&gt;&lt;/property&gt;	&lt;/bean&gt;		&lt;!-- å®šä¹‰Hibernateçš„SessionFactory --&gt;	&lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;&gt;		&lt;!-- å®šä¹‰SessionFactoryå¿…é¡»æ³¨å…¥DataSource --&gt;		&lt;property name=&quot;dataSource&quot;&gt;			&lt;ref bean=&quot;datasource&quot;/&gt;		&lt;/property&gt;				&lt;!-- å®šä¹‰Hibernateçš„SessionFactoryå±æ€§ --&gt;		&lt;property name=&quot;hibernateProperties&quot;&gt;			&lt;props&gt;				&lt;prop key=&quot;hibernate.dialect&quot;&gt;					org.hibernate.dialect.MySQLDialect				&lt;/prop&gt;			&lt;/props&gt;		&lt;/property&gt;				&lt;!-- å®šä¹‰POJOçš„æ˜ å°„æ–‡ä»¶ --&gt;		&lt;property name=&quot;mappingResources&quot;&gt;			&lt;list&gt;				&lt;value&gt;/com/voidking/hibernate_spring/model/Dlb.hbm.xml&lt;/value&gt;			&lt;/list&gt;		&lt;/property&gt;	&lt;/bean&gt;		&lt;!-- æ³¨å…¥dlDao --&gt;	&lt;bean id=&quot;dlDao&quot; class=&quot;com.voidking.hibernate_spring.dao.imp.DlDaoImp&quot;&gt;		&lt;property name=&quot;sessionFactory&quot;&gt;			&lt;ref bean=&quot;sessionFactory&quot;/&gt;		&lt;/property&gt;	&lt;/bean&gt;&lt;/beans&gt;
Springçš„Beanå¾ˆå¥½åœ°ç®¡ç†äº†ä»¥å‰åœ¨hibernate.cfg.xmlæ–‡ä»¶ä¸­åˆ›å»ºçš„SessionFactoryï¼Œä½¿æ–‡ä»¶æ›´æ˜“é˜…è¯»ã€‚
ç¼–å†™æµ‹è¯•ç±»package com.voidking.hibernate_spring.test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.FileSystemXmlApplicationContext;import com.voidking.hibernate_spring.dao.DlDao;import com.voidking.hibernate_spring.model.Dlb;public class Test &#123;	public static void main(String[] args) &#123;		Dlb dlb = new Dlb();		dlb.setXh(&quot;081109&quot;);		dlb.setKl(&quot;123456&quot;);		ApplicationContext context = new FileSystemXmlApplicationContext(&quot;src/applicationContext.xml&quot;);		DlDao dlDao = (DlDao)context.getBean(&quot;dlDao&quot;);		dlDao.save(dlb);			&#125;&#125;

è¿è¡ŒæŠ¥é”™Cannot find class [org.apache.commons.dbcp.BasicDataSource]
ç¼ºå°‘commons-dbcp.jarã€commons-pool.jarè¿™ä¸¤ä¸ªåŒ…ï¼Œåœ¨spring-framework-*/lib/jakarta-commonsç›®å½•ä¸‹å¯ä»¥æ‰¾åˆ°ï¼Œæ·»åŠ è¿›è·¯å¾„å³å¯ã€‚
ä¸Šè¿°é—®é¢˜è§£å†³ä¹‹åï¼Œè¿è¡ŒæˆåŠŸï¼Œæ•°æ®æ’å…¥æˆåŠŸã€‚ä½†æ˜¯ï¼Œå¹¶ä¸èƒ½è¿è¡Œç¬¬äºŒæ¬¡ï¼Œå› ä¸ºDuplicate entry &#39;0&#39; for key &#39;PRIMARY&#39;ï¼Œä¸”ä¸å»ç®¡å®ƒã€‚
æºä»£ç åˆ†äº«https://github.com/voidking/hibernate_spring.git
å°ç»“è¿™ä¸ªå·¥ç¨‹ä¸­ï¼Œå¹¶ä¸éœ€è¦hibernate.cfg.xmlã€hibernate.propertiesï¼Œå› ä¸ºå®ƒä»¬å®Œæˆçš„å·¥ä½œï¼ŒapplicationContextå¸®å®ƒä»¬å®Œæˆäº†ã€‚
å‚è€ƒæ–‡æ¡£ã€ŠJava EEåŸºç¡€å®ç”¨æ•™ç¨‹ã€‹ï¼Œéƒ‘é˜¿å¥‡ä¸»ç¼–

Cannot find class [org.apache.commons.dbcp.BasicDataSource]http://blog.csdn.net/a105421548/article/details/43016953

]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>hibernate</tag>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Springä¸Struts2æ•´åˆåº”ç”¨</title>
    <url>/dev-spring-struts2-integration/</url>
    <content><![CDATA[æ–°å»ºé¡¹ç›®æ–°å»ºDynamic Web Projectï¼Œå‘½åä¸ºstruts2_springã€‚
æ·»åŠ struts2æ¡†æ¶æ·»åŠ struts2äº”ä¸ªæ ¸å¿ƒjaråŒ…åˆ°libæ–‡ä»¶å¤¹ã€‚
web.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app id=&quot;WebApp_9&quot; version=&quot;2.4&quot; xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&gt;	&lt;welcome-file-list&gt;		&lt;welcome-file&gt;/login.jsp&lt;/welcome-file&gt;	&lt;/welcome-file-list&gt;    &lt;filter&gt;        &lt;filter-name&gt;struts2&lt;/filter-name&gt;        &lt;filter-class&gt;org.apache.struts2.dispatcher.FilterDispatcher&lt;/filter-class&gt;    &lt;/filter&gt;    &lt;filter-mapping&gt;        &lt;filter-name&gt;struts2&lt;/filter-name&gt;        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;    &lt;/filter-mapping&gt;&lt;/web-app&gt;


login.jsp&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;    pageEncoding=&quot;UTF-8&quot;%&gt;&lt;%@ taglib uri=&quot;/struts-tags&quot; prefix=&quot;s&quot; %&gt;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;&lt;title&gt;ç™»å½•ç•Œé¢&lt;/title&gt;&lt;/head&gt;&lt;body&gt;	&lt;s:form action=&quot;login.action&quot; method=&quot;post&quot;&gt;		&lt;s:textfield name=&quot;xh&quot; label=&quot;å­¦å·&quot;&gt;&lt;/s:textfield&gt;		&lt;s:password name=&quot;kl&quot; label=&quot;å£ä»¤&quot;&gt;&lt;/s:password&gt;	&lt;/s:form&gt;&lt;/body&gt;&lt;/html&gt;

LoginAction.javapackage com.voidking.struts2_spring.action;import com.opensymphony.xwork2.ActionSupport;public class LoginAction extends ActionSupport&#123;	private String xh;	private String kl;	public String getXh() &#123;		return xh;	&#125;	public void setXh(String xh) &#123;		this.xh = xh;	&#125;	public String getKl() &#123;		return kl;	&#125;	public void setKl(String kl) &#123;		this.kl = kl;	&#125;		public String execute() throws Exception&#123;		return SUCCESS;	&#125;&#125;

struts.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE struts PUBLIC    &quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;    &quot;http://struts.apache.org/dtds/struts-2.0.dtd&quot;&gt;&lt;struts&gt;	&lt;include file=&quot;struts-default.xml&quot;&gt;&lt;/include&gt;	&lt;package name=&quot;default&quot; extends=&quot;struts-default&quot;&gt;		&lt;action name=&quot;login&quot; class=&quot;com.voidking.struts2_spring.action.LoginAction&quot;&gt;			&lt;result name=&quot;success&quot;&gt;/login_success.jsp&lt;/result&gt;		&lt;/action&gt;	&lt;/package&gt;&lt;/struts&gt;

login_success.jsp&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;    pageEncoding=&quot;UTF-8&quot;%&gt;&lt;%@ taglib uri=&quot;/struts-tags&quot; prefix=&quot;s&quot; %&gt;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;&lt;title&gt;ç™»å½•æˆåŠŸ&lt;/title&gt;&lt;/head&gt;&lt;body&gt;	&lt;h2&gt;æ‚¨å¥½ï¼&lt;s:property value=&quot;xh&quot;/&gt; æ¬¢è¿æ‚¨ç™»å½•æˆåŠŸ&lt;/h2&gt;&lt;/body&gt;&lt;/html&gt;

éƒ¨ç½²è¿è¡Œåœ¨ç™»å½•æ¡†å’Œå¯†ç æ¡†è¾“å…¥ä»»æ„è¾“å…¥ï¼Œå•å‡»ç™»å½•æŒ‰é’®ï¼Œè½¬å‘ç™»å½•æˆåŠŸç•Œé¢ï¼Œå¹¶è¾“å‡ºç™»å½•åã€‚
æ·»åŠ Springæ¡†æ¶æ‹·è´Springçš„æ ¸å¿ƒjaråŒ…åˆ°libæ–‡ä»¶å¤¹ã€‚
æ·»åŠ Springæ”¯æŒåŒ…æ‹·è´struts2-spring-plugin.jaråˆ°libæ–‡ä»¶å¤¹ï¼Œè¯¥åŒ…ä½äºStruts2çš„libç›®å½•ä¸‹ã€‚
ä¿®æ”¹web.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app id=&quot;WebApp_9&quot; version=&quot;2.4&quot; xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&gt;	&lt;welcome-file-list&gt;		&lt;welcome-file&gt;/login.jsp&lt;/welcome-file&gt;	&lt;/welcome-file-list&gt;    &lt;filter&gt;        &lt;filter-name&gt;struts2&lt;/filter-name&gt;        &lt;filter-class&gt;org.apache.struts2.dispatcher.FilterDispatcher&lt;/filter-class&gt;    &lt;/filter&gt;    &lt;filter-mapping&gt;        &lt;filter-name&gt;struts2&lt;/filter-name&gt;        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;    &lt;/filter-mapping&gt;	&lt;listener&gt;		&lt;listener-class&gt;			org.springframework.web.context.ContextLoaderListener		&lt;/listener-class&gt;	&lt;/listener&gt;	&lt;context-param&gt;		&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;		&lt;param-value&gt;			/WEB-INF/classes/applicationContext.xml		&lt;/param-value&gt;	&lt;/context-param&gt;&lt;/web-app&gt;

struts.propertiesstruts.objectFactory=spring
è¯¥æ–‡ä»¶ä½äºsrcæ–‡ä»¶å¤¹ä¸‹ï¼Œè¿è¡Œè¿‡ç¨‹ä¸­ä¼šè¢«Struts2æ¡†æ¶åŠ è½½ï¼Œæ˜¯çš„Struts2çš„ç±»å¯¹è±¡çš„ç”Ÿæˆäº¤ç»™Springå®Œæˆã€‚
applicationContext.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!--  - Middle tier application context definition for the image database.  --&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;		xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;		xmlns:context=&quot;http://www.springframework.org/schema/context&quot;		xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;		xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd				http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd				http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;&gt;	&lt;bean id=&quot;loginAction&quot; class=&quot;com.voidking.struts2_spring.action.LoginAction&quot;&gt;&lt;/bean&gt;&lt;/beans&gt;

ä¿®æ”¹struts.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE struts PUBLIC    &quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;    &quot;http://struts.apache.org/dtds/struts-2.0.dtd&quot;&gt;&lt;struts&gt;	&lt;include file=&quot;struts-default.xml&quot;&gt;&lt;/include&gt;	&lt;package name=&quot;default&quot; extends=&quot;struts-default&quot;&gt;		&lt;!-- ä½¿ç”¨Springç”Ÿæˆçš„ç±»å¯¹è±¡ --&gt;		&lt;action name=&quot;login&quot; class=&quot;loginAction&quot;&gt;			&lt;result name=&quot;success&quot;&gt;/login_success.jsp&lt;/result&gt;		&lt;/action&gt;	&lt;/package&gt;&lt;/struts&gt;

å†æ¬¡éƒ¨ç½²è¿è¡Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å’Œç¬¬ä¸€æ¬¡éƒ¨ç½²è¿è¡ŒåŒæ ·çš„ç»“æœã€‚
æºä»£ç åˆ†äº«https://github.com/voidking/struts2_spring.git
å‚è€ƒæ–‡æ¡£ã€ŠJava EEåŸºç¡€å®ç”¨æ•™ç¨‹ã€‹ï¼Œéƒ‘é˜¿å¥‡ä¸»ç¼–
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>spring</tag>
        <tag>struts2</tag>
      </tags>
  </entry>
  <entry>
    <title>Springäº‹åŠ¡æ”¯æŒ</title>
    <url>/dev-spring-affair/</url>
    <content><![CDATA[æ¦‚è¿°Springçš„äº‹åŠ¡ç®¡ç†ä¸éœ€è¦ä¸ä»»ä½•ç‰¹å®šçš„äº‹åŠ¡APIè€¦åˆã€‚SpringåŒæ—¶æ”¯æŒç¼–ç¨‹å¼äº‹åŠ¡ç­–ç•¥å’Œå£°æ˜å¼äº‹åŠ¡ç­–ç•¥ï¼Œå¤§éƒ¨åˆ†æ—¶å€™éƒ½é‡‡ç”¨å£°æ˜å¼äº‹åŠ¡ç­–ç•¥ã€‚å£°æ˜å¼äº‹åŠ¡ç®¡ç†çš„ä¼˜åŠ¿éå¸¸æ˜æ˜¾ï¼šä»£ç ä¸­æ— éœ€å…³æ³¨äº‹åŠ¡é€»è¾‘ï¼Œè®©Springå£°æ˜å¼äº‹åŠ¡ç®¡ç†è´Ÿè´£äº‹åŠ¡é€»è¾‘ï¼Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†æ— éœ€ä¸å…·ä½“çš„äº‹åŠ¡é€»è¾‘è€¦åˆï¼Œå¯ä»¥æ–¹ä¾¿åœ°åœ¨ä¸åŒäº‹åŠ¡é€»è¾‘ä¹‹é—´åˆ‡æ¢ã€‚
å£°æ˜å¼äº‹åŠ¡é€»è¾‘çš„é…ç½®æ–¹å¼ï¼Œé€šå¸¸æœ‰ä»¥ä¸‹4ä¸­ï¼š1ã€ä½¿ç”¨TransactionProxyFactoryBeanä¸ºç›®æ ‡Beanç”Ÿæˆäº‹åŠ¡ä»£ç†çš„é…ç½®ã€‚æ­¤æ–¹å¼æ˜¯æœ€ä¼ ç»Ÿã€é…ç½®æ–‡ä»¶æœ€è‡ƒè‚¿ã€æœ€éš¾ä»¥é˜…è¯»çš„æ–¹å¼ã€‚2ã€é‡‡ç”¨Beanç»§æ‰¿çš„äº‹åŠ¡ä»£ç†é…ç½®æ–¹å¼ï¼Œæ¯”è¾ƒç®€æ´ï¼Œä½†ä»ç„¶æ˜¯å¢é‡å¼é…ç½®ã€‚3ã€é‡‡ç”¨BeanNameAutoProxyCreatorï¼Œæ ¹æ®Bean Nameè‡ªåŠ¨ç”Ÿæˆäº‹åŠ¡ä»£ç†çš„æ–¹å¼ã€‚è¿™æ˜¯ç›´æ¥åˆ©ç”¨Springçš„AOPæ¡†æ¶é…ç½®äº‹åŠ¡ä»£ç†çš„æ–¹å¼ï¼Œéœ€è¦å¯¹Springçš„AOPæ¡†æ¶æœ‰æ‰€ç†è§£ã€‚ä½†è¿™ç§æ–¹å¼é¿å…äº†å¢é‡å¼æ–¹å¼ï¼Œæ•ˆæœéå¸¸ä¸é”™ã€‚4ã€é‡‡ç”¨DefaultAdvisorAutoProxyCreatorï¼Œç›´æ¥åˆ©ç”¨Springçš„AOPæ¡†æ¶é…ç½®äº‹åŠ¡ä»£ç†çš„æ–¹å¼ï¼Œæ•ˆæœéå¸¸ä¸é”™ï¼Œåªæ˜¯è¿™ç§é…ç½®æ–¹å¼çš„å¯è¯»æ€§ä¸å¦‚ç¬¬3ç§æ–¹å¼ã€‚

å‚è€ƒæ–‡æ¡£ã€ŠJava EEåŸºç¡€å®ç”¨æ•™ç¨‹ã€‹ï¼Œéƒ‘é˜¿å¥‡ä¸»ç¼–
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring AOP</title>
    <url>/dev-spring-aop/</url>
    <content><![CDATA[ä»ä»£ç†æœºåˆ¶åˆæ¢AOPpackage com.voidking.aop;import java.util.logging.*;public class HelloSpeaker &#123;	private Logger logger = Logger.getLogger(this.getClass().getName());	public void hello(String name)	&#123;		logger.log(Level.INFO, &quot;hello method starts...&quot;);		System.out.println(&quot;hello,&quot;+name);		logger.log(Level.INFO, &quot;hello method ends...&quot;);	&#125;&#125;
åœ¨HelloSpeakerç±»ä¸­ï¼Œå½“æ‰§è¡Œhello()æ–¹æ³•æ—¶ï¼Œç¨‹åºå‘˜å¸Œæœ›è¯¥æ–¹æ³•æ‰§è¡Œå¼€å§‹ä¸æ‰§è¡Œå®Œæ¯•æ—¶éƒ½ç•™ä¸‹æ—¥å¿—ã€‚æœ€ç®€å•çš„åšæ³•æ˜¯ä¸Šé¢çš„ç¨‹åºè®¾è®¡ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå‰ååŠ ä¸Šæ—¥å¿—åŠ¨ä½œã€‚
ç„¶è€Œå¯¹äºHelloSpeakerç±»æ¥è¯´ï¼Œæ—¥å¿—çš„è¿™ç§åŠ¨ä½œå¹¶ä¸å±äºHelloSpeakerçš„é€»è¾‘ï¼Œè¿™ä½¿å¾—HelloSpeakerå¢åŠ äº†é¢å¤–çš„èŒè´£ã€‚

å¦‚æœç¨‹åºä¸­è¿™ç§æ—¥å¿—åŠ¨ä½œåˆ°å¤„éƒ½æœ‰ï¼Œä»¥ä¸Šçš„å†™æ³•åŠ¿å¿…é€ æˆç¨‹åºå‘˜å¿…é¡»åˆ°å¤„æ’°å†™è¿™äº›æ—¥å¿—åŠ¨ä½œçš„ä»£ç ã€‚è¿™å°†ä½¿å¾—ç»´æŠ¤æ—¥å¿—ä»£ç çš„å›°éš¾åŠ å¤§ã€‚å¦‚æœéœ€è¦çš„æœåŠ¡ä¸åªæ˜¯æ—¥å¿—åŠ¨ä½œï¼Œæœ‰ä¸€äº›éç±»æœ¬èº«èŒè´£çš„ç›¸å…³åŠ¨ä½œä¹Ÿæ··å…¥åˆ°ç±»ä¸­ï¼Œå¦‚æƒé™æ£€æŸ¥ã€äº‹åŠ¡ç®¡ç†ç­‰ï¼Œä¼šä½¿å¾—ç±»çš„è´Ÿæ‹…åŠ é‡ï¼Œç”šè‡³æ··æ·†ç±»æœ¬èº«çš„èŒè´£ã€‚
å¦ä¸€æ–¹é¢ï¼Œä½¿ç”¨ä»¥ä¸Šçš„å†™æ³•ï¼Œå¦‚æœæœ‰ä¸€å¤©ä¸å†éœ€è¦æ—¥å¿—ï¼ˆæˆ–æƒé™æ£€æŸ¥ã€äº¤æ˜“ç®¡ç†ç­‰ï¼‰æœåŠ¡ï¼Œå°†éœ€è¦ä¿®æ”¹æ‰€æœ‰ç•™ä¸‹æ—¥å¿—åŠ¨ä½œçš„ç¨‹åºï¼Œæ— æ³•ç®€å•åœ°å°†è¿™äº›ç›¸å…³æœåŠ¡ä»ç°æœ‰çš„ç¨‹åºä¸­ç§»é™¤ã€‚
å¯ä»¥ä½¿ç”¨ä»£ç†ï¼ˆProxyï¼‰æœºåˆ¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰ä¸¤ç§ä»£ç†æ–¹å¼ï¼šé™æ€ä»£ç†ï¼ˆstatic proxyï¼‰å’ŒåŠ¨æ€ä»£ç†ï¼ˆdynamic proxyï¼‰ã€‚
åœ¨é™æ€ä»£ç†çš„å®ç°ä¸­ï¼Œä»£ç†ç±»ä¸è¢«ä»£ç†çš„ç±»å¿…é¡»å®ç°åŒä¸€ä¸ªæ¥å£ã€‚åœ¨ä»£ç†ç±»ä¸­å¯ä»¥å®ç°è®°å½•ç­‰ç›¸å…³æœåŠ¡ï¼Œå¹¶åœ¨éœ€è¦çš„æ—¶å€™å†å‘¼å«è¢«ä»£ç†ç±»ã€‚è¿™æ ·è¢«ä»£ç†ç±»å°±å¯ä»¥ä»…ä»…ä¿ç•™ä¸šåŠ¡ç›¸å…³çš„èŒè´£äº†ã€‚
ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ªIHelloæ¥å£ï¼š
package com.voidking.aop;public interface IHello &#123;	public void hello(String name);&#125;

ç„¶åè®©å®ç°ä¸šåŠ¡é€»è¾‘çš„HelloSpeaker2ç±»å®ç°IHelloæ¥å£ï¼š
package com.voidking.aop;public class HelloSpeaker2 implements IHello &#123;		@Override	public void hello(String name) &#123;		// TODO Auto-generated method stub		System.out.println(&quot;hello,&quot;+name);	&#125;&#125;

ä»£ç†ç±»HelloProxyåŒæ ·è¦å®ç°IHelloæ¥å£ï¼š
package com.voidking.aop;import java.util.logging.Level;import java.util.logging.Logger;public class HelloProxy implements IHello &#123;	private Logger logger = Logger.getLogger(this.getClass().getName());	private IHello helloObject;	public  HelloProxy(IHello helloObject) &#123;		// TODO Auto-generated constructor stub		this.helloObject = helloObject;	&#125;			@Override	public void hello(String name) &#123;		// TODO Auto-generated method stub		log(&quot;hello method starts...&quot;);		helloObject.hello(name);		log(&quot;hello method ends...&quot;);	&#125;		private void log(String msg)	&#123;		logger.log(Level.INFO, msg);	&#125;&#125;
å†™ä¸€ä¸ªæµ‹è¯•ç¨‹åºæ¥çœ‹çœ‹æ•ˆæœï¼š
package com.voidking.aop;public class ProxyDemo &#123;	public static void main(String[] args) &#123;		IHello proxy = new HelloProxy(new HelloSpeaker2());		proxy.hello(&quot;Justin&quot;);	&#125;&#125;

è¿™æ˜¯é™æ€ä»£ç†çš„åŸºæœ¬ç¤ºä¾‹ï¼Œä½†æ˜¯å¯ä»¥çœ‹åˆ°ï¼Œä»£ç†ç±»çš„ä¸€ä¸ªæ¥å£åªèƒ½æœåŠ¡äºä¸€ç§ç±»å‹çš„ç±»ï¼Œè€Œä¸”å¦‚æœè¦ä»£ç†çš„æ–¹æ³•å¾ˆå¤šï¼ŒåŠ¿å¿…è¦ä¸ºæ¯ä¸ªæ–¹æ³•è¿›è¡Œä»£ç†ã€‚é™æ€ä»£ç†åœ¨ç¨‹åºè§„æ¨¡ç¨å¤§æ—¶å¿…å®šæ— æ³•èƒœä»»ã€‚
åŠ¨æ€ä»£ç†JDK1.3ä¹‹ååŠ å…¥äº†å¯ååŠ©å¼€å‘åŠ¨æ€ä»£ç†åŠŸèƒ½çš„APIç­‰ç›¸å…³ç±»åˆ«ï¼Œä¸éœ€è¦ä¸ºç‰¹å®šç±»å’Œæ–¹æ³•ç¼–å†™ç‰¹å®šä»£ç†ç±»ï¼Œä½¿ç”¨åŠ¨æ€ä»£ç†ã€‚ä½¿ç”¨åŠ¨æ€ä»£ç†å¯ä»¥ä½¿ä¸€ä¸ªå¤„ç†è€…ï¼ˆHandlerï¼‰ä¸ºå„ä¸ªç±»æœåŠ¡ã€‚
IHello.javaã€HelloSpeaker.javaã€LogHandler.javaã€ProxyDemo.javaä»£ç åˆ†åˆ«å¦‚ä¸‹ï¼š
package com.voidking.aop2;public interface IHello &#123;	public void hello(String name);&#125;

package com.voidking.aop2;public class HelloSpeaker implements IHello &#123;	@Override	public void hello(String name) &#123;		// TODO Auto-generated method stub		System.out.println(&quot;Hello,&quot;+name);	&#125;&#125;

package com.voidking.aop2;import java.lang.reflect.InvocationHandler;import java.lang.reflect.Method;public class LogHandler implements InvocationHandler &#123;	private Object sub;	public LogHandler() &#123;		// TODO Auto-generated constructor stub	&#125;	public LogHandler(Object obj)&#123;		sub=obj;	&#125;	@Override	public Object invoke(Object proxy, Method method, Object[] args)			throws Throwable &#123;		// TODO Auto-generated method stub		System.out.println(&quot;before you do thing&quot;);		method.invoke(sub, args);		System.out.println(&quot;after you do thing&quot;);		return null;	&#125;&#125;

package com.voidking.aop2;import java.lang.reflect.Proxy;public class ProxyDemo &#123;	public static void main(String[] args) &#123;		// TODO Auto-generated method stub		HelloSpeaker helloSpeaker = new HelloSpeaker();		LogHandler logHandler = new LogHandler(helloSpeaker);		Class cls = helloSpeaker.getClass();		IHello iHello = (IHello)Proxy.newProxyInstance(cls.getClassLoader(), cls.getInterfaces(), logHandler);		iHello.hello(&quot;Justin&quot;);	&#125;&#125;
HelloSpeakeræœ¬èº«çš„èŒè´£æ˜¯æ˜¾ç¤ºæ–‡å­—ï¼Œå´å¿…é¡»æ’å…¥æ—¥å¿—åŠ¨ä½œï¼Œè¿™æ˜¯çš„HelloSpeakerçš„èŒè´£åŠ é‡ã€‚æ—¥å¿—çš„ç¨‹åºä»£ç æ¨ªåˆ‡ï¼ˆcross-cuttingï¼‰åˆ°HelloSpeakerçš„ç¨‹åºæ‰§è¡Œæµç¨‹ä¸­ï¼Œæ—¥å¿—è¿™æ ·çš„åŠ¨ä½œåœ¨AOPæœ¯è¯­ä¸­è¢«ç§°ä¸ºæ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆcross-cutting concernsï¼‰ã€‚
ä½¿ç”¨ä»£ç†ç±»å°†è®°å½•ä¸ä¸šåŠ¡é€»è¾‘æ— å…³çš„åŠ¨ä½œæå–å‡ºæ¥ï¼Œè®¾è®¡ä¸ºä¸€ä¸ªæœåŠ¡ç±»ï¼Œå¦‚åŒå‰é¢çš„èŒƒä¾‹HelloProxyæˆ–è€…LogHandlerï¼Œè¿™æ ·çš„ç±»ç§°ä¸ºåˆ‡é¢ï¼ˆAspectï¼‰ã€‚
å°†æ—¥å¿—ç­‰åŠ¨ä½œï¼ˆcross-cutting concernsï¼‰è®¾è®¡ä¸ºé€šç”¨ï¼Œä¸ä»‹å…¥ç‰¹å®šä¸šåŠ¡ç±»çš„ä¸€ä¸ªèŒè´£æ¸…æ¥šçš„Aspectç±»ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„Aspect-Oriented Programmingï¼ŒAOPã€‚
é€šçŸ¥AdviceSpringæä¾›äº†5ç§é€šçŸ¥ï¼ˆAdviceï¼‰ç±»å‹ï¼š

Interception Around Adviceï¼šåœ¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•æ‰§è¡Œå‰åè¢«è°ƒç”¨ã€‚
Before Adviceï¼šåœ¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•æ‰§è¡Œå‰è¢«è°ƒç”¨ã€‚
After Returning Adviceï¼šåœ¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•æ‰§è¡Œåè¢«è°ƒç”¨ã€‚
Throw Adviceï¼šåœ¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•æŠ›å‡ºå¼‚å¸¸æ—¶è¢«è°ƒç”¨ã€‚
Introduction Adviceï¼šä¸€ç§ç‰¹æ®Šç±»å‹çš„æ‹¦æˆªé€šçŸ¥ï¼Œåªæœ‰åœ¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•è°ƒç”¨å®Œæ¯•åæ‰§è¡Œã€‚

åˆ‡å…¥ç‚¹PointcutPointcutå®šä¹‰äº†Adviceåº”ç”¨çš„æ—¶æœºã€‚åœ¨Springä¸­ï¼Œä½¿ç”¨PointcutAdvisoræŠŠPointcutä¸Adviceç»“åˆä¸ºä¸€ä¸ªå¯¹è±¡ã€‚Springä¸­å¤§éƒ¨åˆ†å†…å»ºçš„Pointcutéƒ½æœ‰å¯¹åº”çš„PointAdvisorã€‚é™æ€åˆ‡å…¥ç‚¹åªé™äºç»™å®šçš„æ–¹æ³•å’Œç›®æ ‡ç±»ï¼Œè€Œä¸è€ƒè™‘æ–¹æ³•çš„å‚æ•°ã€‚åŠ¨æ€åˆ‡å…¥ç‚¹ä¸é™æ€åˆ‡å…¥ç‚¹çš„åŒºåˆ«æ˜¯ï¼ŒåŠ¨æ€åˆ‡å…¥ç‚¹ä¸ä»…é™å®šäºç»™å®šçš„æ–¹æ³•å’Œç±»ï¼Œè¿˜å¯ä»¥æŒ‡å®šæ–¹æ³•çš„å‚æ•°ã€‚å¤§å¤šæ•°åˆ‡å…¥ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨é™æ€åˆ‡å…¥ç‚¹ï¼Œå¾ˆå°‘æœ‰æœºä¼šåˆ›å»ºåŠ¨æ€åˆ‡å…¥ç‚¹ã€‚
æºä»£ç åˆ†äº«https://github.com/voidking/aop.git
å°ç»“Adviceå’ŒPointcutåˆ°åº•å¹²å˜›ç”¨çš„ï¼Ÿä¹¦ä¸Šæ ¹æœ¬æ²¡æœ‰è®²æ¸…æ¥šå“‡ï¼ä¸å»æŸ¥èµ„æ–™äº†ï¼Œéœ€è¦çš„æ—¶å€™å†å»æ·±å…¥å­¦ä¹ ã€‚
å‚è€ƒæ–‡æ¡£ã€ŠJava EEåŸºç¡€å®ç”¨æ•™ç¨‹ã€‹ï¼Œéƒ‘é˜¿å¥‡ä¸»ç¼–
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Springæ¦‚è¿°</title>
    <url>/dev-spring-start/</url>
    <content><![CDATA[åè¯è§£é‡Šç®€å•æ¥è¯´ï¼ŒSpringæ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ§åˆ¶åè½¬ï¼ˆIoCï¼‰å’Œé¢å‘åˆ‡é¢ï¼ˆAOPï¼‰çš„å®¹å™¨æ¡†æ¶ã€‚
Springæ¡†æ¶æ˜¯Rod Johnsonå¼€å‘çš„ï¼Œ2003å¹´å‘å¸ƒäº†Springæ¡†æ¶çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ã€‚Springæ˜¯ä¸€ä¸ªä»å®é™…å¼€å‘ä¸­æŠ½å–å‡ºæ¥çš„æ¡†æ¶ï¼Œå› æ­¤å®ƒå®Œæˆäº†å¤§é‡å¼€å‘ä¸­çš„é€šç”¨æ­¥éª¤ï¼Œä»è€Œå¤§å¤§æé«˜äº†ä¼ä¸šåº”ç”¨çš„å¼€å‘æ•ˆç‡ã€‚
Springä¸ºä¼ä¸šåº”ç”¨çš„å¼€å‘æä¾›äº†ä¸€ä¸ªè½»é‡çº§çš„è§£å†³æ–¹æ¡ˆã€‚å…¶ä¸­ä¾èµ–æ³¨å…¥ã€åŸºäºAOPçš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†ã€å¤šç§æŒä¹…å±‚çš„æ•´åˆä¸ä¼˜ç§€çš„Web MVCæ¡†æ¶ç­‰æœ€ä¸ºäººä»¬å…³æ³¨ã€‚Springå¯ä»¥è´¯ç©¿ç¨‹åºçš„å„å±‚ä¹‹é—´ï¼Œä½†å®ƒå¹¶ä¸æ˜¯è¦å–ä»£é‚£äº›å·²æœ‰çš„æ¡†æ¶ï¼Œè€Œæ˜¯ä»¥é«˜åº¦çš„å¼€å‘æ€§ä¸å®ƒä»¬ç´§å¯†åœ°æ•´åˆï¼Œè¿™ä¹Ÿæ˜¯Springè¢«å¹¿æ³›åº”ç”¨çš„åŸå› ä¹‹ä¸€ã€‚
Springä½¿ç”¨æœ€åŸºæœ¬çš„JavaBeanæ¥å®Œæˆä»¥å‰åªå¯èƒ½ç”±EJBå®Œæˆçš„äº‹æƒ…ã€‚ç„¶è€Œï¼ŒSpringçš„ç”¨é€”ä¸ä»…é™äºæœåŠ¡å™¨ç«¯çš„å¼€å‘ã€‚ä»ç®€å•æ€§ã€å¯æµ‹è¯•æ€§å’Œæ¾è€¦åˆæ€§çš„è§’åº¦è€Œè¨€ï¼Œä»»ä½•Javaåº”ç”¨éƒ½å¯ä»¥ä»Springä¸­å—ç›Šã€‚
å®˜ç½‘http://spring.io

ä¸‹è½½æ–¹æ³•ä¸€http://repo.spring.ioæœç´¢spring-frameworkï¼Œé€‰æ‹©ä¸‹è½½å³å¯ã€‚
æ–¹æ³•äºŒ1)æ‰“å¼€eclipse-help-Install New Softwareâ€¦2)Addâ€¦ï¼Œå¼¹å‡ºAdd Repositoryã€‚4)å¯¹è¯æ¡†é‡ŒNameéšæ„ï¼ŒLocationè¾“å…¥ï¼šhttp://springide.org/updatesite/ ï¼Œç‚¹å‡»OKã€‚5)é€‰æ‹©Core/Spring IDEï¼ŒNextã€‚
å¯¼å…¥åŒ…Spring4çš„åŒ…ï¼Œå®˜æ–¹æ²¡æœ‰ç»™å‡ºä¸‹è½½ï¼Œåªç»™å‡ºäº†Mavençš„å¼•ç”¨æ–¹æ³•ï¼Œä¸ªäººæ„Ÿè§‰éå¸¸å¥½ã€‚Spring3åŠä»¥å‰çš„åŒ…ï¼Œå¯ä»¥ä½¿ç”¨Mavenå¼•ç”¨ï¼Œä¹Ÿå¯ä»¥ä¸‹è½½åå¯¼å…¥jaråŒ…ã€‚
spring-framework-**.zipè§£å‹å,å°†spring-framework-**æ–‡ä»¶å¤¹çš„distç›®å½•ä¸‹çš„jaråŒ…å¯¼å…¥å·¥ç¨‹ä¸­ã€‚
åˆ†å±‚æ¶æ„Springæ¡†æ¶çš„ä¸»è¦ä¼˜åŠ¿ä¹‹ä¸€æ˜¯å…¶åˆ†å±‚æ¶æ„ï¼Œåˆ†å±‚æ¶æ„å…è®¸é€‰æ‹©ä½¿ç”¨ä»»ä½•ä¸€ä¸ªç»„ä»¶ï¼ŒåŒæ—¶ä¸ºJ2EEåº”ç”¨ç¨‹åºå¼€å‘æä¾›é›†æˆçš„æ¡†æ¶ã€‚Springæ¡†æ¶çš„åŠŸèƒ½å¯ä»¥ç”¨åœ¨ä»»ä½•J2EEæœåŠ¡å™¨ä¸­ï¼Œå¤§å¤šæ•°åŠŸèƒ½ä¹Ÿé€‚ç”¨äºä¸å—ç®¡ç†çš„ç¯å¢ƒã€‚Springçš„æ ¸å¿ƒè¦ç‚¹æ˜¯ï¼šæ”¯æŒä¸ç»‘å®šåˆ°ç‰¹å®šJ2EEæœåŠ¡çš„å¯é‡ç”¨ä¸šåŠ¡å’Œæ•°æ®è®¿é—®å¯¹è±¡ã€‚è¿™æ ·çš„å¯¹è±¡å¯ä»¥åœ¨ä¸åŒJ2EEç¯å¢ƒï¼ˆWebæˆ–EJBï¼‰ã€ç‹¬ç«‹åº”ç”¨ç¨‹åºã€æµ‹è¯•ç¯å¢ƒä¹‹é—´é‡ç”¨ã€‚
ç»„æˆSpring æ¡†æ¶çš„æ¯ä¸ªæ¨¡å—ï¼ˆæˆ–ç»„ä»¶ï¼‰éƒ½å¯ä»¥å•ç‹¬å­˜åœ¨ï¼Œæˆ–è€…ä¸å…¶ä»–ä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡å—è”åˆå®ç°ã€‚æ¯ä¸ªæ¨¡å—çš„åŠŸèƒ½å¦‚ä¸‹ï¼š

æ ¸å¿ƒå®¹å™¨ï¼šæ ¸å¿ƒå®¹å™¨æä¾›Spring æ¡†æ¶çš„åŸºæœ¬åŠŸèƒ½ã€‚æ ¸å¿ƒå®¹å™¨çš„ä¸»è¦ç»„ä»¶æ˜¯BeanFactoryï¼Œå®ƒæ˜¯å·¥å‚æ¨¡å¼çš„å®ç°ã€‚BeanFactoryä½¿ç”¨æ§åˆ¶åè½¬ï¼ˆIOCï¼‰æ¨¡å¼å°†åº”ç”¨ç¨‹åºçš„é…ç½®å’Œä¾èµ–æ€§è§„èŒƒä¸å®é™…çš„åº”ç”¨ç¨‹åºä»£ç åˆ†å¼€ã€‚

Spring ä¸Šä¸‹æ–‡ï¼šSpring ä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå‘Spring æ¡†æ¶æä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚Spring ä¸Šä¸‹æ–‡åŒ…æ‹¬ä¼ä¸šæœåŠ¡ï¼Œä¾‹å¦‚JNDI ã€EJBã€ç”µå­é‚®ä»¶ã€å›½é™…åŒ–ã€æ ¡éªŒå’Œè°ƒåº¦åŠŸèƒ½ã€‚

Spring AOP ï¼šé€šè¿‡é…ç½®ç®¡ç†ç‰¹æ€§ï¼ŒSpring AOP æ¨¡å—ç›´æ¥å°†é¢å‘æ–¹é¢çš„ç¼–ç¨‹åŠŸ èƒ½é›†æˆåˆ°äº†Spring æ¡†æ¶ä¸­ã€‚æ‰€ä»¥ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°ä½¿Spring æ¡†æ¶ç®¡ç†çš„ä»»ä½•å¯¹è±¡æ”¯æŒAOP ã€‚Spring AOP æ¨¡å—ä¸ºåŸºäºSpring çš„åº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡æä¾›äº†äº‹åŠ¡ç®¡ç†æœåŠ¡ã€‚é€šè¿‡ä½¿ç”¨Spring AOP ï¼Œä¸ç”¨ä¾èµ–EJB ç»„ä»¶ï¼Œå°±å¯ä»¥å°†å£°æ˜æ€§äº‹åŠ¡ç®¡ç†é›†æˆåˆ°åº”ç”¨ç¨‹åºä¸­ã€‚

Spring DAO ï¼šJDBC DAOæŠ½è±¡å±‚æä¾›äº†æœ‰æ„ä¹‰çš„å¼‚å¸¸å±‚æ¬¡ç»“æ„ï¼Œå¯ç”¨è¯¥ç»“æ„æ¥ç®¡ç†å¼‚å¸¸å¤„ç†å’Œä¸åŒæ•°æ®åº“ä¾›åº”å•†æŠ›å‡ºçš„é”™è¯¯æ¶ˆæ¯ã€‚å¼‚å¸¸å±‚æ¬¡ç»“æ„ç®€åŒ–äº†é”™è¯¯å¤„ç†ï¼Œå¹¶ä¸”æå¤§åœ°é™ä½äº†éœ€è¦ç¼–å†™çš„å¼‚å¸¸ä»£ç æ•°é‡ï¼ˆä¾‹å¦‚æ‰“å¼€å’Œå…³é—­è¿æ¥ï¼‰ã€‚Spring DAO çš„é¢å‘JDBC çš„å¼‚å¸¸éµä»é€šç”¨çš„DAO å¼‚å¸¸å±‚æ¬¡ç»“æ„ã€‚

Spring ORM ï¼šSpring æ¡†æ¶æ’å…¥äº†è‹¥å¹²ä¸ªORM æ¡†æ¶ï¼Œä»è€Œæä¾›äº†ORM çš„å¯¹è±¡å…³ç³»å·¥å…·ï¼Œå…¶ä¸­åŒ…æ‹¬JDO ã€Hibernate å’ŒiBatisSQLMap ã€‚æ‰€æœ‰è¿™äº›éƒ½éµä»Spring çš„é€šç”¨äº‹åŠ¡å’ŒDAOå¼‚å¸¸å±‚æ¬¡ç»“æ„ã€‚

Spring Webï¼šä¸ºåŸºäºWebçš„åº”ç”¨ç¨‹åºæä¾›ä¸Šä¸‹æ–‡ã€‚å®ƒå»ºç«‹åœ¨åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡æ¨¡å—ä¹‹ä¸Šï¼Œç®€åŒ–äº†å¤„ç†å¤šä»½è¯·æ±‚åŠå°†è¯·æ±‚å‚æ•°ç»‘å®šåˆ°åŸŸå¯¹è±¡çš„å·¥ä½œã€‚Springæ¡†æ¶æ”¯æŒJakarta Strutsçš„é›†æˆã€‚

Spring Web MVCï¼šæ˜¯ä¸€ä¸ªå…¨åŠŸèƒ½Webåº”ç”¨ç¨‹åºçš„MVCå®ç°ã€‚é€šè¿‡ç­–ç•¥æ¥å£å®ç°é«˜åº¦å¯é…ç½®ï¼ŒMVCå®¹çº³äº†å¤§é‡è§†å›¾æŠ€æœ¯ï¼Œå…¶ä¸­åŒ…æ‹¬JSPã€Velocityã€Tilesã€iTextå’ŒPOIã€‚


ä¾èµ–æ³¨å…¥Springçš„æ ¸å¿ƒæœºåˆ¶æ˜¯ä¾èµ–æ³¨å…¥ï¼ˆDependency Inversionï¼‰ï¼Œä¹Ÿç§°ä¸ºæ§åˆ¶åè½¬ã€‚
å·¥å‚æ¨¡å¼Human.javapackage com.voidking.factory;public interface Human &#123;	void eat();	void walk();&#125;

Chinese.javapackage com.voidking.factory;public class Chinese implements Human &#123;	@Override	public void eat() &#123;		// TODO Auto-generated method stub		System.out.println(&quot;ä¸­å›½äººå¾ˆä¼šåƒï¼&quot;);	&#125;	@Override	public void walk() &#123;		// TODO Auto-generated method stub		System.out.println(&quot;ä¸­å›½äººå¥æ­¥å¦‚é£ï¼&quot;);	&#125;&#125;
American.javapackage com.voidking.factory;public class American implements Human &#123;	@Override	public void eat() &#123;		// TODO Auto-generated method stub		System.out.println(&quot;ç¾å›½äººåƒè¥¿é¤ï¼&quot;);	&#125;	@Override	public void walk() &#123;		// TODO Auto-generated method stub		System.out.println(&quot;ç¾å›½äººç»å¸¸åè½¦ï¼&quot;);	&#125;&#125;

Factory.javapackage com.voidking.factory;public class Factory &#123;	public Human getHuman(String name)	&#123;		if(name.equals(&quot;Chinese&quot;))		&#123;			return new Chinese();		&#125;else if (name.equals(&quot;American&quot;)) &#123;			return new American();		&#125;else &#123;			throw new IllegalArgumentException(&quot;å‚æ•°ä¸æ­£ç¡®&quot;);		&#125;	&#125;&#125;

Test.javapackage com.voidking.factory;public class Test &#123;	public static void main(String[] args) &#123;		Human human=null;		human= new Factory().getHuman(&quot;Chinese&quot;);		human.eat();		human.walk();				human= new Factory().getHuman(&quot;American&quot;);		human.eat();		human.walk();	&#125;&#125;

ä¾èµ–æ³¨å…¥åº”ç”¨ä¸Šé¢å·¥å‚æ¨¡å¼ä¸­ï¼Œç”²ç»„ä»¶éœ€è¦ä¹™ç»„ä»¶çš„å¯¹è±¡çš„æ—¶å€™ï¼Œæ— éœ€ç›´æ¥åˆ›å»ºå…¶å®ä¾‹ï¼Œè€Œæ˜¯é€šè¿‡å·¥å‚è·å¾—ï¼Œåªè¦åˆ›å»ºä¸€ä¸ªå·¥å‚å³å¯ã€‚è€ŒSpringå®¹å™¨åˆ™æä¾›äº†æ›´å¥½çš„åŠæ³•ï¼Œå¼€å‘äººå‘˜ä¸ç”¨åˆ›å»ºå·¥å‚ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨Springæä¾›çš„ä¾èµ–æ³¨å…¥æ–¹å¼ã€‚å¯ä»¥æŠŠä¸Šä¾‹ä¿®æ”¹ä¸ºä½¿ç”¨Springå®¹å™¨æ¥åˆ›å»ºå¯¹è±¡ã€‚
å¼•å…¥Springçš„jaråŒ…spring.jarã€spring-source.jarã€commons-logging.jarã€‚
applicationContext.xmlåœ¨srcæ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºæ–‡ä»¶applicationContext.xmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!--  - Middle tier application context definition for the image database.  --&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;		xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;		xmlns:context=&quot;http://www.springframework.org/schema/context&quot;		xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;		xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd				http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd				http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;&gt;	&lt;bean id=&quot;chinese&quot; class=&quot;com.voidking.factory.Chinese&quot;&gt;&lt;/bean&gt;	&lt;bean id=&quot;american&quot; class=&quot;com.voidking.factory.American&quot;&gt;&lt;/bean&gt;	&lt;/beans&gt;

ä¿®æ”¹Test.javapackage com.voidking.factory;import org.springframework.context.ApplicationContext;import org.springframework.context.support.FileSystemXmlApplicationContext;public class Test &#123;	public static void main(String[] args) &#123;		/*		Human human=null;		human= new Factory().getHuman(&quot;Chinese&quot;);		human.eat();		human.walk();				human= new Factory().getHuman(&quot;American&quot;);		human.eat();		human.walk();		*/				ApplicationContext ctx = new FileSystemXmlApplicationContext(&quot;src/applicationContext.xml&quot;);		Human human = null;		human =(Human)ctx.getBean(&quot;chinese&quot;);		human.eat();		human.walk();		human = (Human)ctx.getBean(&quot;american&quot;);		human.eat();		human.walk();	&#125;&#125;
æ‰€è°“ä¾èµ–æ³¨å…¥ï¼Œå°±æ˜¯åœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœéœ€è¦è°ƒç”¨å¦ä¸€ä¸ªå¯¹è±¡ååŠ©æ—¶ï¼Œæ— éœ€åœ¨ä»£ç ä¸­åˆ›å»ºè¢«è°ƒç”¨è€…ï¼Œè€Œæ˜¯ä¾èµ–äºå¤–éƒ¨çš„æ³¨å…¥ã€‚Springçš„ä¾èµ–æ³¨å…¥å¯¹è°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…å‡ ä¹æ²¡æœ‰ä»»ä½•è¦æ±‚ï¼Œå®Œå…¨æ”¯æŒPOJOä¹‹é—´ä¾èµ–å…³ç³»çš„ç®¡ç†ã€‚ä¾èµ–æ³¨å…¥é€šå¸¸æœ‰ä¸¤ç§ï¼š
è®¾ç½®æ³¨å…¥è®¾ç½®æ³¨å…¥æ˜¯é€šè¿‡setæ–¹æ³•æ³¨å…¥è¢«è°ƒç”¨è€…çš„å®ä¾‹ã€‚è¿™ç§æ–¹æ³•ç®€å•ã€ç›´è§‚ï¼Œå¾ˆå®¹æ˜“ç†è§£ï¼Œå› è€ŒSpringçš„ä¾èµ–æ³¨å…¥è¢«å¤§é‡ä½¿ç”¨ã€‚
Human.javapackage com.voidking.dependencyinversion;public interface Human &#123;	void speak();&#125;

Languige.javapackage com.voidking.dependencyinversion;public interface Languige &#123;	public String kind();&#125;

Chinese.javapackage com.voidking.dependencyinversion;public class Chinese implements Human &#123;		private Languige lan;	@Override	public void speak() &#123;		// TODO Auto-generated method stub		System.out.println(lan.kind());	&#125;	public void setLan(Languige lan) &#123;		this.lan = lan;	&#125;&#125;

English.javapackage com.voidking.dependencyinversion;public class English implements Languige &#123;	@Override	public String kind() &#123;		// TODO Auto-generated method stub		return &quot;ä¸­å›½äººä¹Ÿä¼šè¯´è‹±è¯­ï¼&quot;;	&#125;&#125;

applicationContext.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!--  - Middle tier application context definition for the image database.  --&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;		xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;		xmlns:context=&quot;http://www.springframework.org/schema/context&quot;		xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;		xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd				http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd				http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;&gt;	&lt;bean id=&quot;chinese&quot; class=&quot;com.voidking.dependencyinversion.Chinese&quot;&gt;		&lt;property name=&quot;lan&quot; ref=&quot;english&quot;&gt;&lt;/property&gt;	&lt;/bean&gt;		&lt;bean id=&quot;english&quot; class=&quot;com.voidking.dependencyinversion.English&quot;&gt;&lt;/bean&gt;&lt;/beans&gt;
å„ä¸ªBeanä¹‹é—´çš„ä¾èµ–å…³ç³»æ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­å®Œæˆï¼Œè€Œä¸æ˜¯ç”¨ä»£ç ä½“ç°ã€‚é€šè¿‡é…ç½®æ–‡ä»¶ï¼ŒSpringèƒ½ç²¾ç¡®åœ°ä¸ºæ¯ä¸ªBeanæ³¨å…¥å±æ€§ã€‚æ³¨æ„ï¼Œé…ç½®æ–‡ä»¶çš„Beançš„classå±æ€§å€¼ï¼Œä¸èƒ½æ˜¯æ¥å£ï¼Œå¿…é¡»æ˜¯çœŸæ­£çš„å®ç°ç±»ã€‚
Springä¼šè‡ªåŠ¨æ¥ç®¡æ¯ä¸ªBeanå®šä¹‰é‡Œçš„propertyå…ƒç´ å®šä¹‰ã€‚Springä¼šåœ¨æ‰§è¡Œæ— å‚æ•°çš„æ„é€ å™¨å¹¶åˆ›å»ºé»˜è®¤çš„Beanå®ä¾‹åï¼Œè°ƒç”¨å¯¹åº”çš„setæ–¹æ³•ä¸ºç¨‹åºæ³¨å…¥å±æ€§å€¼ã€‚
æ¯ä¸ªBeançš„idå±æ€§æ˜¯è¯¥Beançš„å”¯ä¸€æ ‡è¯†ï¼Œç¨‹åºé€šè¿‡idå±æ€§è®¿é—®Beanã€‚è€Œä¸”å„ä¸ªBeanä¹‹é—´çš„ä¾èµ–å…³ç³»ä¹Ÿé€šè¿‡idå±æ€§å…³è”ã€‚
Test.javapackage com.voidking.dependencyinversion;import org.springframework.context.ApplicationContext;import org.springframework.context.support.FileSystemXmlApplicationContext;public class Test &#123;	public static void main(String[] args) &#123;		ApplicationContext ctx = new FileSystemXmlApplicationContext(&quot;src/applicationContext.xml&quot;);		Human human = null;		human =(Human)ctx.getBean(&quot;chinese&quot;);		human.speak();	&#125;&#125;


æ„é€ æ³¨å…¥åœ¨æ„é€ å®ä¾‹æ—¶ï¼Œå·²ç»ä¸ºå…¶å®Œæˆäº†å±æ€§çš„åˆå§‹åŒ–ï¼Œåˆ©ç”¨æ„é€ å‡½æ•°æ¥è®¾ç½®ä¾èµ–æ³¨å…¥çš„æ–¹æ³•ï¼Œæˆä¸ºæ„é€ æ³¨å…¥ã€‚åœ¨å‰é¢dependencyinversionå·¥ç¨‹çš„åŸºç¡€ä¸Šä¿®æ”¹ã€‚
ä¿®æ”¹Chinese.javapackage com.voidking.dependencyinversion2;public class Chinese implements Human &#123;		private Languige lan;		public Chinese() &#123;		super();		// TODO Auto-generated constructor stub	&#125;	public Chinese(Languige lan) &#123;		super();		this.lan = lan;	&#125;	@Override	public void speak() &#123;		// TODO Auto-generated method stub		System.out.println(lan.kind());	&#125;&#125;

ä¿®æ”¹applicationContext.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!--  - Middle tier application context definition for the image database.  --&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;		xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;		xmlns:context=&quot;http://www.springframework.org/schema/context&quot;		xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;		xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd				http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd				http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;&gt;	&lt;bean id=&quot;chinese&quot; class=&quot;com.voidking.dependencyinversion2.Chinese&quot;&gt;		&lt;constructor-arg ref=&quot;english&quot;&gt;&lt;/constructor-arg&gt;	&lt;/bean&gt;		&lt;bean id=&quot;english&quot; class=&quot;com.voidking.dependencyinversion2.English&quot;&gt;&lt;/bean&gt;&lt;/beans&gt;
è®¾ç½®æ³¨å…¥å’Œæ„é€ æ³¨å…¥ï¼ŒåŒºåˆ«åœ¨äºåˆ›å»ºHumanå®ä¾‹ä¸­çš„Languigeå±æ€§çš„æ—¶é—´ä¸åŒã€‚ï¼ˆå‘ƒï¼Œå‰é¢å‘½åçš„æ—¶å€™æé”™äº†ï¼ŒLanguageå†™æˆäº†Languigeï¼Œé¢†ä¼šç²¾ç¥ã€‚ã€‚ã€‚ï¼‰è®¾ç½®æ³¨å…¥æ˜¯å…ˆåˆ›å»ºä¸€ä¸ªé»˜è®¤çš„Beanå®ä¾‹ï¼Œç„¶åè°ƒç”¨å¯¹åº”çš„setæ–¹æ³•æ³¨å…¥ä¾èµ–å…³ç³»ï¼›è€Œæ„é€ æ³¨å…¥åˆ™åœ¨åˆ›å»ºBeanå®ä¾‹æ—¶ï¼Œå·²ç»å®Œæˆäº†ä¾èµ–å…³ç³»çš„æ³¨å…¥ã€‚
Springæ ¸å¿ƒæ¥å£BeanFactoryBeanå·¥å‚ï¼Œç”±org.springframework.beans.factory.BeanFactoryæ¥å£å®šä¹‰ã€‚
BeanFactoryé‡‡ç”¨å·¥å‚è®¾è®¡æ¨¡å¼ã€‚è¿™ä¸ªæ¥å£è´Ÿè´£åˆ›å»ºå’Œåˆ†å‘Beanï¼Œä½†ä¸å…¶ä»–å·¥å‚æ¨¡å¼çš„å®ç°ä¸åŒï¼Œå®ƒä»¬åªåˆ†å‘ä¸€ç§ç±»å‹çš„å¯¹è±¡ã€‚BeanFactoryæ˜¯ä¸€ä¸ªé€šç”¨çš„å·¥å‚ï¼Œå¯ä»¥åˆ›å»ºå’Œåˆ†å‘å„ç§ç±»å‹çš„Beanã€‚
åœ¨Springä¸­æœ‰å‡ ç§BeanFactoryçš„å®ç°ï¼Œå…¶ä¸­æœ€å¸¸ç”¨çš„æ˜¯org.springframework.bean.factory.xml.XmlBeanFactoryã€‚å®ƒæ ¹æ®XMLæ–‡ä»¶ä¸­çš„å®šä¹‰è£…è½½Beanã€‚
è¦åˆ›å»ºXMLBeanFactoryï¼Œéœ€è¦ä¼ é€’ä¸€ä¸ªjava.io.InputStreamå¯¹è±¡ç»™æ„é€ å‡½æ•°ã€‚InputStreamå¯¹è±¡æä¾›XMLæ–‡ä»¶ç»™å·¥å‚ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä¾‹å­ä½¿ç”¨ä¸€ä¸ªjava.io.FileInputStreamå¯¹è±¡æŠŠBean XMLå®šä¹‰æ–‡ä»¶ç»™XMLBeanFactoryï¼š
BeanFactory factory = new XmlBeanFactory(new FileInputStream(&quot;applicationContext.xml&quot;));
è¿™è¡Œä»£ç å‘Šè¯‰BeanFactoryä»XMLæ–‡ä»¶ä¸­è¯»å–Beançš„å®šä¹‰ä¿¡æ¯ï¼Œä½†æ˜¯ç°åœ¨BeanFactoryæ²¡æœ‰å®ä¾‹åŒ–Beanï¼ŒBeanè¢«å»¶è¿ŸåŠ è½½åˆ°BeanFactoryä¸­ï¼Œå°±æ˜¯è¯´BeanFactoryä¼šç«‹å³æŠŠBeanå®šä¹‰ä¿¡æ¯åŠ è½½è¿›æ¥ï¼Œä½†æ˜¯Beanåªæœ‰åœ¨éœ€è¦çš„æ—¶å€™æ‰è¢«å®ä¾‹åŒ–ã€‚
ä¸ºäº†ä»BeanFactoryå¾—åˆ°Beanï¼Œåªè¦ç®€å•åœ°è°ƒç”¨getBean()æ–¹æ³•ï¼ŒæŠŠéœ€è¦çš„Beançš„åå­—å½“åšå‚æ•°ä¼ é€’è¿›å»å°±è¡Œäº†ã€‚ç”±äºå¾—åˆ°çš„æ˜¯Objectç±»å‹ï¼Œæ‰€ä»¥è¦è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬åŒ–ã€‚
MyBean myBean = (MyBean)factory.getBean(&quot;myBean&quot;);
å½“getBean()æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œå·¥å‚å°±ä¼šå®ä¾‹åŒ–Beanï¼Œå¹¶ä½¿ç”¨ä¾èµ–æ³¨å…¥å¼€å§‹è®¾ç½®Beançš„å±æ€§ã€‚è¿™æ ·å°±åœ¨Springå®¹å™¨ä¸­å¼€å§‹äº†Beançš„ç”Ÿå‘½å‘¨æœŸã€‚
ApplicationContextåº”ç”¨ä¸Šä¸‹æ–‡ï¼Œç”±org.springframework.context.ApplicationContextæ¥å£å®šä¹‰ï¼Œæ˜¯BeanFactoryçš„å­æ¥å£ã€‚
BeanFactoryå¯¹ç®€å•åº”ç”¨æ¥è¯´å·²ç»å¾ˆå¥½äº†ï¼Œä½†æ˜¯ä¸ºäº†è·å¾—Springæ¡†æ¶çš„å¼ºå¤§åŠŸèƒ½ï¼Œéœ€è¦ä½¿ç”¨Springæ›´é«˜çº§çš„å®¹å™¨â€”â€”ApplicationContextã€‚
è¡¨é¢ä¸Šï¼ŒApplicationContextå’ŒBeanFactoryå·®ä¸å¤šã€‚ä¸¤è€…éƒ½æ˜¯è½½å…¥Beanå®šä¹‰ä¿¡æ¯ï¼Œè£…é…Beanï¼Œæ ¹æ®éœ€è¦åˆ†å‘Beanã€‚ä½†æ˜¯ApplicationContextæä¾›äº†æ›´å¤šåŠŸèƒ½ï¼š1ã€åº”ç”¨ä¸Šä¸‹æ–‡æä¾›äº†æ–‡æœ¬è§£æå·¥å…·ï¼ŒåŒ…æ‹¬å¯¹å›½é™…åŒ–çš„æ”¯æŒã€‚2ã€åº”ç”¨ä¸Šä¸‹æ–‡æä¾›äº†è½½å…¥æ–‡æœ¬èµ„æºçš„é€šç”¨æ–¹æ³•ï¼Œå¦‚è½½å…¥å›¾ç‰‡ã€‚3ã€åº”ç”¨ä¸Šä¸‹æ–‡å¯ä»¥å‘æ³¨å†Œä¸ºç›‘å¬å™¨çš„Beanå‘é€äº‹ä»¶ã€‚
ç”±äºå®ƒæä¾›äº†é™„åŠ åŠŸèƒ½ï¼Œå‡ ä¹æ‰€æœ‰çš„åº”ç”¨ç³»ç»Ÿéƒ½é€‰æ‹©ApplicationContextï¼Œè€Œä¸æ˜¯BeanFactoryã€‚
åœ¨ApplicationContextçš„è¯¸å¤šå®ç°ä¸­æœ‰ä¸‰ä¸ªå¸¸ç”¨çš„å®ç°ï¼š
ApplicationContext context = new FileSystemXmlApplicationContext(&quot;c:/foo.xml&quot;);ApplicationContext context = new FileSystemXmlApplicationContext(&quot;foo.xml&quot;);ApplicationContext context = WebApplicationContextUtils.getWebApplicationContext(request.getSession().getServletContext());
FileSystemXmlApplicationContextåªèƒ½åœ¨æŒ‡å®šçš„è·¯å¾„ä¸­å¯»æ‰¾foo.xmlæ–‡ä»¶ï¼Œè€ŒFileSystemXmlApplicationContextå¯ä»¥åœ¨æ•´ä¸ªç±»è·¯å¾„ä¸­å¯»æ‰¾foo.xmlã€‚
ApplicationContextä¸BeanFactoryçš„å¦ä¸€ä¸ªé‡è¦åŒºåˆ«æ˜¯å•å®ä¾‹Beanå¦‚ä½•è¢«åŠ è½½ã€‚BeanFactoryå»¶è¿ŸåŠ è½½æ‰€æœ‰Beanï¼Œç›´åˆ°getBean()è¢«è°ƒç”¨æ—¶ï¼ŒBeanæ‰è¢«åˆ›å»ºã€‚ApplicationContextåˆ™èªæ˜ä¸€ç‚¹ï¼Œå®ƒä¼šåœ¨ä¸Šä¸‹æ–‡å¯åŠ¨åé¢„è½½å…¥æ‰€æœ‰çš„å•å®ä¾‹Beanã€‚é€šè¿‡é¢„è½½å…¥å•å®ä¾‹Beanï¼Œç¡®ä¿éœ€è¦çš„æ—¶å€™å®ƒä»¬å·²ç»å‡†å¤‡å¥½äº†ï¼Œåº”ç”¨ç¨‹åºä¸éœ€è¦ç­‰å¾…å®ƒä»¬è¢«åˆ›å»ºã€‚
SpringåŸºæœ¬é…ç½®åœ¨Springå®¹å™¨ä¸­æ‹¼æ¥Beanå«åšè£…é…ã€‚è£…é…Beanå®é™…ä¸Šæ˜¯å‘Šè¯‰å®¹å™¨éœ€è¦å“ªäº›Beanï¼Œä»¥åŠå®¹å™¨å¦‚ä½•ä½¿ç”¨ä¾èµ–æ³¨å…¥ï¼Œå°†å®ƒä»¬é…åˆèµ·æ¥ã€‚
ä½¿ç”¨XMLè£…é…ç†è®ºä¸Šï¼ŒBeanè£…é…å¯ä»¥ä»ä»»ä½•é…ç½®èµ„æºè·å¾—ã€‚ä½†å®é™…ä¸Šï¼ŒXMLæ˜¯æœ€å¸¸è§çš„Springåº”ç”¨ç³»ç»Ÿé…ç½®æºã€‚
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans...&gt;	&lt;bean id=&quot;chinese&quot; class=&quot;com.voidking.factory.Chinese&quot;&gt;&lt;/bean&gt;	&lt;bean id=&quot;american&quot; class=&quot;com.voidking.factory.American&quot;&gt;&lt;/bean&gt;	&lt;/beans&gt;
åœ¨XMLæ–‡ä»¶å®šä¹‰Beanï¼Œä¸Šä¸‹æ–‡å®šä¹‰æ–‡ä»¶çš„æ ¹å…ƒç´ æ˜¯ã€‚æœ‰å¤šä¸ªå­å…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ å®šä¹‰äº†ä¸€ä¸ªBeanï¼ˆä»»ä½•ä¸€ä¸ªJavaå¯¹è±¡ï¼‰å¦‚ä½•è¢«è£…é…åˆ°Springå®¹å™¨ä¸­ã€‚
æ·»åŠ ä¸€ä¸ªBeanåœ¨Springä¸­å¯¹ä¸€ä¸ªBeançš„æœ€åŸºæœ¬é…ç½®åŒ…æ‹¬Beançš„idå’Œå®ƒçš„å…¨ç§°ç±»åã€‚å‘Springå®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªBeanåªéœ€è¦å‘XMLæ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚
å½“é€šè¿‡Springå®¹å™¨åˆ›å»ºä¸€ä¸ªBeanæ—¶ï¼Œä¸ä»…å¯ä»¥å®ŒæˆBeanå®ä¾‹çš„å®ä¾‹åŒ–ï¼Œè¿˜å¯ä»¥ä¸ºBeanæŒ‡å®šç‰¹å®šçš„ä½œç”¨åŸŸã€‚
1ã€åŸå‹æ¨¡å¼ä¸å•å®ä¾‹æ¨¡å¼ï¼šSpringä¸­çš„Beané»˜è®¤æƒ…å†µä¸‹æ˜¯å•å®ä¾‹æ¨¡å¼ã€‚åœ¨å®¹å™¨åˆ†é…Beançš„æ—¶å€™ï¼Œå®ƒæ€»æ˜¯è¿”å›åŒä¸€ä¸ªå®ä¾‹ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ¯æ¬¡å‘ApplicationContextè¯·æ±‚ä¸€ä¸ªBeançš„æ—¶å€™éœ€è¦å¾—åˆ°ä¸€ä¸ªä¸åŒçš„å®ä¾‹ï¼Œéœ€è¦å°†Beanå®šä¹‰ä¸ºåŸå‹æ¨¡å¼ã€‚
&lt;bean id=&quot;chinese&quot; class=&quot;com.voidking.factory.Chinese&quot; singleton=&quot;false&quot;&gt;&lt;/bean&gt; //åŸå‹æ¨¡å¼Bean
2ã€requestæˆ–sessionï¼šå¯¹äºæ¯æ¬¡HTTPè¯·æ±‚æˆ–HttpSessionï¼Œä½¿ç”¨requestæˆ–sessionå®šä¹‰çš„Beanéƒ½å°†äº§ç”Ÿä¸€ä¸ªæ–°å®ä¾‹ï¼Œå³æ¯æ¬¡HTTPè¯·æ±‚æˆ–HttpSessionå°†ä¼šäº§ç”Ÿä¸åŒçš„Beanå®ä¾‹ã€‚åªæœ‰åœ¨Webåº”ç”¨ä¸­ä½¿ç”¨Springæ—¶ï¼Œè¯¥ä½œç”¨åŸŸæœ‰æ•ˆã€‚
3ã€golbal sessionï¼šæ¯ä¸ªå…¨å±€çš„HttpSessionå¯¹åº”ä¸€ä¸ªBeanå®ä¾‹ã€‚å…¸å‹æƒ…å†µä¸‹ï¼Œä»…åœ¨ä½¿ç”¨portlet contextçš„æ—¶å€™æœ‰æ•ˆã€‚åªæœ‰åœ¨Webåº”ç”¨ä¸­ä½¿ç”¨Springæ—¶ï¼Œè¯¥ä½œç”¨åŸŸæ‰æœ‰æ•ˆã€‚
å½“ä¸€ä¸ªBeanå®ä¾‹åŒ–çš„æ—¶å€™ï¼Œæœ‰äº‹éœ€è¦åšä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œï¼Œç„¶åæ‰èƒ½ä½¿ç”¨ã€‚åŒæ ·ï¼Œå½“Beanä¸å†éœ€è¦ï¼Œä»å®¹å™¨ä¸­åˆ é™¤æ—¶ï¼Œéœ€è¦æŒ‰é¡ºåºåšä¸€äº›æ¸…ç†å·¥ä½œã€‚å› æ­¤ï¼ŒSpringå¯ä»¥åœ¨åˆ›å»ºå’Œæ‹†å¸Beançš„æ—¶å€™è°ƒç”¨Beançš„ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚
åœ¨Beançš„å®šä¹‰ä¸­è®¾ç½®è‡ªå·±çš„init-methodï¼Œè¿™ä¸ªæ–¹æ³•åœ¨Beanè¢«å®ä¾‹åŒ–æ—¶é©¬ä¸Šè¢«è°ƒç”¨ã€‚åŒæ ·ï¼Œä¹Ÿå¯ä»¥è®¾ç½®è‡ªå·±çš„destroy-methodï¼Œè¿™ä¸ªæ–¹æ³•åœ¨Beanä»å®¹å™¨ä¸­åˆ é™¤ä¹‹å‰è°ƒç”¨ã€‚
ä¸€ä¸ªå…¸å‹çš„ä¾‹å­æ˜¯è¿æ¥æ± Beanï¼š
public class MyConnectionPool&#123;	...	public void initailize()&#123;&#125;	public void close()&#123;&#125;	....&#125;
Beançš„å®šä¹‰å¦‚ä¸‹ï¼š
&lt;bean id=&quot;connectionPool&quot; class=&quot;com.voidking.test.MyConnectionPool&quot; init-method=&quot;initialize&quot; destroy-method=&quot;close&quot;&gt;&lt;/bean&gt;
MyConnectionPoolè¢«å®ä¾‹åŒ–åï¼Œinitializeæ–¹æ³•é©¬ä¸Šè¢«è°ƒç”¨ï¼Œç»™Beanåˆå§‹åŒ–çš„æœºä¼šã€‚åœ¨Beanä»å®¹å™¨ä¸­åˆ é™¤å‰ï¼Œcloseæ–¹æ³•å°†é‡Šæ”¾æ•°æ®åº“è¿æ¥ã€‚
æºä»£ç åˆ†äº«https://github.com/voidking/factory.git
https://github.com/voidking/dependencyinversion.git
https://github.com/voidking/dependencyinversion2.git
å‚è€ƒæ–‡æ¡£ã€ŠJava EEåŸºç¡€å®ç”¨æ•™ç¨‹ã€‹ï¼Œéƒ‘é˜¿å¥‡ä¸»ç¼–

J2EE é¢†åŸŸçš„ä¸€äº›æŠ€æœ¯æ¡†æ¶ç»“æ„å›¾http://www.oschina.net/question/28_47106

Caused by:java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactoryhttp://blog.csdn.net/liuxilil/article/details/5734079

]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>spring</tag>
      </tags>
  </entry>
  <entry>
    <title>Hibernateä¸Struts2æ•´åˆåº”ç”¨</title>
    <url>/dev-hibernate-struts2-integration/</url>
    <content><![CDATA[åº”ç”¨å®ä¾‹ï¼šå­¦ç”Ÿé€‰è¯¾ç³»ç»Ÿã€‚è¦æ±‚ï¼šå­¦ç”Ÿç™»å½•ç³»ç»Ÿåï¼Œå¯ä»¥æŸ¥çœ‹ã€ä¿®æ”¹ä¸ªäººä¿¡æ¯ï¼ŒæŸ¥çœ‹ä¸ªäººé€‰è¯¾æƒ…å†µï¼Œé€‰å®šè¯¾ç¨‹åŠé€€é€‰è¯¾ç¨‹ã€‚
å»ºç«‹æ•°æ®åº“å’Œè¡¨éƒåŒå­¦ä»ç„¶ä½¿ç”¨MySQLæ•°æ®åº“ï¼Œscottç”¨æˆ·ã€‚åœ¨xscjæ•°æ®åº“ä¸­å»ºç«‹ç™»å½•è¡¨ã€å­¦ç”Ÿè¡¨ã€ä¸“ä¸šè¡¨ã€è¯¾ç¨‹è¡¨ï¼Œä»¥åŠå­¦ç”Ÿè¯¾ç¨‹è¡¨å³è¿æ¥è¡¨ã€‚
create table dlb(id int not null primary key,xh char(6) not null ,kl varchar(20));create table xsb(xh char(6) not null primary key,xm varchar(8) not null,xb bit not null check(xb=0 or xb=1),cssj datetime ,zy_id int,zxf int default 0 check(0&lt;=zxf&lt;160),bz varchar(500),zp longblob);create table zyb(id int not null auto_increment primary key,zym varchar(12) not null,rs int default 0,fdy varchar(8));create table kcb(kch char(3) not null primary key,kcm varchar(12),kxxq smallint check(kxxq&gt;=1 and kxxq&lt;=8),xs int default 0,xf int default 0);create table xs_kcb(xh char(6),kch char(6),primary key(xh,kch));

åˆ›å»ºWebé¡¹ç›®æ–°å»ºDynamic Web Projectï¼Œå‘½åä¸ºstruts2_hibernateã€‚
æ·»åŠ Hibernateå¼€å‘èƒ½åŠ›å³å‡»é¡¹ç›®åï¼ŒPropertiesï¼ŒJava Build Pathï¼ŒLibrariesï¼ŒAdd Libraryâ€¦ï¼ŒUser Libraryï¼ŒNextï¼ŒUser Librariesâ€¦ï¼ŒNewâ€¦ï¼Œè¾“å…¥â€œhibernateâ€ï¼ŒOKï¼ŒAdd External JARsâ€¦ï¼Œé€‰ä¸­éœ€è¦çš„jaræ–‡ä»¶ï¼Œæ‰“å¼€ï¼ŒOKã€‚
è‡ªåŠ¨ç”ŸæˆPOJOç±»å’Œæ˜ å°„æ–‡ä»¶æ–°å»ºJPAå·¥ç¨‹æ–°å»ºJPA Projectï¼Œè¾“å…¥ä¸€ä¸ªå·¥ç¨‹åï¼ŒNextï¼ŒNextï¼Œèµ°åˆ°ä¸€ä¸ªç•Œé¢ï¼Œæç¤ºAt least one user library must be selected.ã€‚å‹¾é€‰User Libraryä¸­hibernateä¹‹åï¼Œæ˜¾ç¤ºThe class &#39;javax.persistence.Convert&#39; is required to be in the selected libraries.è«éHibernateçš„æŸäº›åŒ…æ²¡åŒ…å«ï¼Ÿç ”ç©¶äº†æ‰€æœ‰çš„åŒ…ï¼Œå‘ç°ï¼Œç¡®å®æ²¡æœ‰å«æœ‰Convertè¿™ä¸ªç±»çš„ã€‚ä¼°è®¡åˆæ˜¯ç‰ˆæœ¬é—®é¢˜ï¼ŒçœŸéº»çƒ¦ï¼
Backï¼ŒBackï¼Œåœ¨JPA versionä¸­é€‰æ‹©v1.0ã€‚Nextï¼ŒNextï¼Œå‹¾é€‰hibernateï¼ŒFinishã€‚
å³å‡»å·¥ç¨‹åï¼ŒJPA Toolsï¼ŒGenerate Entities from Tablesâ€¦ã€‚é€‰æ‹©Connectionï¼Œæ¿€æ´»è¿æ¥ï¼Œå‹¾é€‰Tablesï¼ŒFinishï¼ˆæˆ–è€…ä¸€è·¯Nextï¼ŒFinishï¼‰ã€‚
æŸ¥çœ‹srcæ–‡ä»¶å¤¹ï¼Œå‘ç°éœ€è¦çš„POJOç±»å·²ç»ç”Ÿæˆï¼Œæ‹·è´åˆ°éœ€è¦çš„å·¥ç¨‹ä¸‹å³å¯ã€‚
ä½†æ˜¯ï¼Œé—®é¢˜æ¥äº†ï¼šPOJOç±»æœ‰äº†ï¼Œä½†æ˜¯æ²¡æœ‰*.hbm.xmlæ–‡ä»¶ï¼
èªæ˜çš„å°ä¼™ä¼´è‚¯å®šæƒ³åˆ°äº†ï¼Œä½¿ç”¨myeclipseç”ŸæˆPOJOå’Œ*.hbm.xmlï¼Œç„¶åå…¨éƒ¨æ‹·è´åˆ°eclipseçš„å·¥ç¨‹ä¸‹ã€‚æˆ‘åªæƒ³è¯´ï¼ŒåŒæ—¶å®‰è£…eclipseå’Œmyeclipseï¼Œè¿˜æ¢ç€ç”¨ï¼Œè¿™æ˜¯æœ‰å¤šæ— èŠï¼
è‡ªå·±å†™ï¼Ÿå½“ç„¶å¯ä»¥ï¼ä½†æ˜¯äººå®¶myeclipseçš„POJOç±»å’Œ*.hbm.xmléƒ½å¯ä»¥è‡ªåŠ¨ç”Ÿæˆï¼Œeclipseå‡­ä»€ä¹ˆä¸å¯ä»¥ï¼Ÿä¸‹é¢æˆ‘ä»¬å°±ç ”ç©¶ä¸€ä¸‹æ–¹æ³•ã€‚
Hibernate Toolsæ’ä»¶ç¬¬ä¸€æ‹›Helpï¼ŒEclipse Marketplaceâ€¦ï¼Œåœ¨findä¸­è¾“å…¥â€œHibernateâ€ï¼Œæœç´¢åˆ°çš„é€‰é¡¹ä¸­æœ‰Hibernate Toolsï¼ˆIndigoï¼‰3.4.Xï¼Œå•å‡»Installã€‚å®‰è£…è¿‡ç¨‹ä¸­ï¼ŒæŠ¥é”™ä¸­æ–­ï¼š
&#x27;Installing Software &#x27; has encountered a problem.An error occurred while collecting items to be installed
æœ¬äººçš„Eclipseæ˜¯Lunaç‰ˆæœ¬ï¼ˆå½“å‰æœ€æ–°ç‰ˆï¼‰ï¼Œæ€€ç–‘æ˜¯å…¼å®¹é—®é¢˜ã€‚é‡æ¥ï¼Œæœç´¢åˆ°çš„é€‰é¡¹ä¸­æœ‰JBoss Toolsï¼ˆLunaï¼‰ï¼Œå•å‡»Installã€‚å®‰è£…è¿‡ç¨‹ä¸­é€‰æ‹©Hibernate Toolså®‰è£…ï¼Œæœ€ç»ˆï¼Œä¾ç„¶æŠ¥é”™ï¼Œè¿˜èƒ½ä¸èƒ½æ„‰å¿«åœ°ç©è€äº†ï¼
ç¬¬äºŒæ‹›æˆ‘ä»¬æ¥åˆ°JBoss Toolså®˜ç½‘ï¼Œç„¶åæ‰¾åˆ°ä¸‹è½½ç•Œé¢ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå®˜æ–¹ç»™å‡ºäº†ä¸‰ç§ä¸‹è½½æ–¹å¼ï¼šEclipse Marketplaceï¼ŒUpdate Siteå’ŒArtifactsã€‚
åˆšæ‰æˆ‘ä»¬æ— æ„ä¸­ä½¿å‡ºç¬¬ä¸€æ‹›ï¼Œå¤±è´¥äº†ï¼Œè®©æˆ‘ä»¬è¯•è¯•ç¬¬äºŒæ‹›ã€‚
Help ï¼ŒInstall New Softwareâ€¦ ï¼ŒWork withï¼šhttp://download.jboss.org/jbosstools/updates/stable/luna/ ï¼Œç„¶åé€‰æ‹©Hibernate Toolsï¼ŒNextã€‚
æ…¢ï¼Œéå¸¸æ…¢ï¼Œå®Œå…¨å—ä¸äº†è¿™ä¸ªé€Ÿåº¦ã€‚ã€‚ã€‚
ç¬¬ä¸‰æ‹›ç¬¬ä¸‰æ‹›æ˜¯æˆ‘å–œæ¬¢çš„æ–¹å¼ï¼šç¦»çº¿å®‰è£…ã€‚æ„Ÿè§‰å¾ˆé è°±ï¼Œæ¥è¯•è¯•çœ‹ã€‚é¦–å…ˆä¸‹è½½æ‰€éœ€çš„zipæ–‡ä»¶ï¼Œè¿™é‡ŒéƒåŒå­¦é€‰æ‹©çš„æ˜¯Update site (including sources) bundle of all Hibernate Toolsã€‚ä¸‹è½½ä¸‹æ¥æ–‡ä»¶åä¸ºjbosstools-4.2.3.Final_2015-03-26_23-05-30-B264-updatesite-hibernatetools.zipã€‚
Help ï¼Œ Install New Softwareâ€¦ ï¼Œ Addâ€¦ ï¼Œ Archiveâ€¦ ã€‚é€‰ä¸­ä¸‹è½½çš„æ–‡ä»¶ï¼Œé€‰æ‹©éœ€è¦å®‰è£…çš„æ’ä»¶ï¼ŒNextã€‚å•Šå‹’ï¼Œæˆ‘é ï¼Œä¸ºä»€ä¹ˆè¿˜æ˜¯è¿™ä¹ˆæ…¢ï¼ä»”ç»†è§‚å¯Ÿä¸€ä¸‹è¿›åº¦æ¡çš„æç¤ºï¼Œåœ¨Fetchingä»€ä¹ˆç©æ„ï¼Œè²Œä¼¼æ˜ç™½äº†ä»€ä¹ˆã€‚ç‚¹å‡»åœæ­¢ï¼Œç„¶åæŠŠContact all update sites during install to find requred softwareå‰é¢çš„å‹¾å»æ‰ï¼Œå†æ¬¡Nextã€‚æœç„¶ï¼Œè¿›åº¦é©¬ä¸Šå°±è·‘èµ·æ¥äº†ï¼ä½†æ˜¯ï¼Œè·‘ç€è·‘ç€å°±åœäº†ï¼è¿›åº¦æ¡æç¤ºConnot perform operation.Computing alternate solutions,may take a while:ï¼Œè¿™ä¸ªa whileæœ‰ç‚¹é•¿å•Šï¼-_-|||ï¼Œè¿˜èƒ½æ€ä¹ˆåŠï¼Ÿæ”¾å¤§æ‹›å§ï¼ä¸‹è½½Update site (including sources) bundle of all JBoss Core Toolsï¼Œç„¶åå…¨éƒ¨å®‰è£…ã€‚æˆ‘å°±ä¸ä¿¡äº†ï¼Œå…¨éƒ¨çš„å·¥å…·éƒ½åœ¨è¿™ï¼Œä½ è¿˜ç¼ºå°‘ä¾èµ–ï¼Ÿ
æˆ‘å»ï¼Œè¿™ä¸‹æ›´ä¸å¾—äº†ï¼Œéœ€è¦ä¸‹è½½å¥½å¤šå¥½å¤šä¾èµ–çš„åŒ…ï¼Œå½»åº•é†‰äº†ã€‚ã€‚ã€‚
åªå‹¾é€‰Hibernate Toolsï¼Œè¯•ä¸€è¯•ï¼ŒæˆåŠŸï¼ä¸å®¹æ˜“å•Šï¼T_T
ä½¿ç”¨å®˜æ–¹æ•™ç¨‹ï¼šhttp://tools.jboss.org/features/hibernate.html
è¿™ç¯‡æ–‡ç« å†™å¾—æ›´è¯¦ç»†ï¼šStep by step auto code generation for POJO domain java classes and hbm using Eclipse Hibernate plugin
è¿™ç¯‡æ–‡ç« å†™å¾—ä¹Ÿä¸é”™ï¼šHow to generate Hibernate mapping files &amp; annotation with Hibernate Tools
Windowï¼ŒOpen Perspectiveï¼ŒHibernateã€‚
Add Configurationâ€¦ï¼Œé€‰ä¸­Projectï¼ŒDatabase connection ï¼ŒSetupâ€¦ Propery fileï¼ŒSetupâ€¦ Configuration fileï¼ˆå¹¶ä¸”è¿›è¡Œä¸€äº›é…ç½®ï¼‰ã€‚ç„¶åï¼Œç„¶åï¼Œç„¶åå°±å‡ºç°äº†é”™è¯¯ï¼ï¼ï¼[Classpath]: Could not parse configuration:/hibernate.cfg.xmlï¼Œè¯•äº†å„ç§æ–¹æ³•ï¼Œéƒ½æ²¡æ³•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ˜¯è¦é—¹å“ªæ ·å•Šï¼
å¤šä¹ˆå¥‡è‘©çš„é—®é¢˜ï¼Œæœ¬ä»¥ä¸ºè¿˜è¦èŠ±è´¹ä¸€ç•ªåŠŸå¤«ã€‚åŠå°æ—¶åï¼Œè«åå…¶å¦™çš„å¥½äº†ï¼å¥½äº†ã€‚ã€‚ã€‚
é‡æ–°æ¥ä¸€éï¼Œå®Œæ•´çš„ï¼š
Windowï¼ŒOpen Perspectiveï¼ŒHibernateã€‚
Add Configurationâ€¦ï¼Œé€‰ä¸­Projectï¼ˆstruts2_hibernateï¼‰ï¼Œé€‰æ‹©Database connectionï¼ŒSetupâ€¦ Propery fileï¼ŒSetupâ€¦ Configuration fileï¼ˆéœ€è¦è¿›è¡Œä¸€äº›é…ç½®ï¼‰ã€‚
è¿™æ—¶ï¼Œä¼šæç¤ºç¼ºå°‘MySQLé©±åŠ¨ï¼Œåœ¨Classpathé€‰é¡¹å¡ä¸­é…ç½®ä¸€ä¸‹å°±å¥½äº†ã€‚
Fileï¼ŒNewï¼ŒHibernate Reverse Engineering Fileï¼ˆreveng.xmlï¼‰ï¼Œé€‰ä¸­struts2_hibernateï¼ŒNextï¼Œé€‰æ‹©Console configurationï¼ŒRefreshï¼Œ
åœ¨å·¥å…·æ ä¸­ï¼Œæœ‰ä¸‰ä¸ªä¸‰è§’å·ï¼ˆç»¿è‰²åœ†åº•ï¼‰ï¼Œå…¶ä¸­ä¸€ä¸ªä¸‰è§’å·çš„å³ä¸‹è§’æœ‰Hibernateçš„å°æ ‡å¿—ã€‚ç‚¹å‡»å®ƒçš„ä¸‹æ‹‰èœå•ï¼ŒHibernate Code Generation Configurationsâ€¦ã€‚Newï¼Œåœ¨Mainé€‰é¡¹å¡ä¸­é€‰æ‹©Console configurationï¼Œé€‰æ‹©Output directoryï¼Œå‹¾é€‰Reverse engineer from JDBC Connectionã€‚åœ¨Exportersé€‰é¡¹å¡ä¸­å‹¾é€‰Domain codeï¼ˆ.javaï¼‰å’ŒHibernate XML Mappingsï¼ˆ.hbm.xmlï¼‰ã€‚Runã€‚
è§‚å¯Ÿstruts2_hibernateå·¥ç¨‹ä¸‹çš„æ–‡ä»¶ï¼Œå¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬éœ€è¦çš„POJOç±»å’Œ*.hbm.xmlæ–‡ä»¶éƒ½æœ‰äº†ï¼
æ–­ç½‘é…ç½®æœ¬åœ°dtdæ–‡ä»¶åˆšæ‰å®Œæ•´æ“ä½œçš„æ—¶å€™ï¼Œæ–­ç½‘äº†ï¼Œæ— æ³•è§£æhibernate.cfg.xmlæ–‡ä»¶ï¼Œçœ‹æ¥éœ€è¦é…ç½®ä¸ªæœ¬åœ°dtdæ–‡ä»¶æ‰å¯ä»¥ã€‚è¿™é‡Œéœ€è¦é…ç½®hibernate-configuration-3.0.dtdï¼Œæœ€å¥½ä¹Ÿé…ç½®ä¸€ä¸‹hibernate-mapping-3.0.dtdï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶åœ¨hibernate3.jarä¸­å¯ä»¥æ‰¾åˆ°ã€‚é…ç½®å¥½ä¹‹åï¼Œé—®é¢˜å®Œç¾è§£å†³ã€‚é€‰ä¸­ä¸€äº›è¡¨ï¼ŒIncludeâ€¦ï¼ŒFinishã€‚
ä¸‹é¢æ˜¯Struts2éªŒè¯æ¡†æ¶å‡ºç°åŒæ ·é—®é¢˜æ—¶çš„è§£å†³åŠæ³•ï¼Œä»ã€ŠStruts2æ¦‚è¿°ã€‹æ‘˜å½•ï¼Œæ–¹ä¾¿æŸ¥é˜…ï¼š
1ã€è§£å‹xwork-core-*.jaråŒ…ï¼Œæ‰¾åˆ°xwork-validator-1.0.dtdã€‚
2ã€eclipseï¼ŒWindowï¼ŒPreferencesï¼ŒXMLï¼ŒXML Catelogï¼ŒAddï¼ŒFile Systemâ€¦ï¼Œé€‰ä¸­åˆšæ‰è§£å‹çš„xwork-validator-1.0.dtdï¼Œæ‰“å¼€ï¼Œ
3ã€Locationå·²ç»é€‰å¥½D:\jar\struts2\xwork-validator-1.0.dtdï¼ŒKey typeé€‰æ‹©Public IDï¼ŒKeyå¡«-//OpenSymphony Group//XWork Validator Config 1.0//ENï¼ŒAlternative web addresså¡«http://struts.apache.org/dtds/xwork-validator-1.0.dtdã€‚ï¼ˆæœ¬åœ°dtdä¸å­˜åœ¨æ—¶å›å»webä¸Šå»æ‰¾dtdï¼‰
4ã€StrutsAction-validation.xmléœ€è¦ä¿®æ”¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE validators PUBLIC        &quot;-//OpenSymphony Group//XWork Validator Config 1.0//EN&quot;        &quot;D:\jar\struts2\xwork-validator-1.0.dtd&quot;&gt;&lt;validators&gt;&lt;!--éœ€è¦æ ¡éªŒçš„å­—æ®µçš„å­—æ®µå--&gt;	&lt;field name=&quot;name&quot;&gt;		&lt;field-validator type=&quot;requiredstring&quot;&gt;			&lt;!--å»ç©ºæ ¼--&gt;			&lt;param name=&quot;trim&quot;&gt;true&lt;/param&gt;			&lt;!--é”™è¯¯æç¤ºä¿¡æ¯--&gt;			&lt;message&gt;å§“åæ˜¯å¿…é¡»çš„&lt;/message&gt;		&lt;/field-validator&gt;	&lt;/field&gt;&lt;/validators&gt;

*.hbm.xmlæ–‡ä»¶ä¿®æ”¹Xsb.hbm.xml&lt;?xml version=&quot;1.0&quot;?&gt;&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;&quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot;&gt;&lt;!-- Generated 2015-5-23 0:27:57 by Hibernate Tools 3.4.0.CR1 --&gt;&lt;hibernate-mapping&gt;    &lt;class name=&quot;Xsb&quot; table=&quot;xsb&quot; catalog=&quot;xscj&quot;&gt;        &lt;id name=&quot;xh&quot; type=&quot;string&quot;&gt;            &lt;column name=&quot;xh&quot; length=&quot;6&quot; /&gt;            &lt;generator class=&quot;assigned&quot; /&gt;        &lt;/id&gt;        &lt;property name=&quot;xm&quot; type=&quot;string&quot;&gt;            &lt;column name=&quot;xm&quot; length=&quot;8&quot; not-null=&quot;true&quot; /&gt;        &lt;/property&gt;        &lt;property name=&quot;xb&quot; type=&quot;boolean&quot;&gt;            &lt;column name=&quot;xb&quot; not-null=&quot;true&quot; /&gt;        &lt;/property&gt;        &lt;property name=&quot;cssj&quot; type=&quot;timestamp&quot;&gt;            &lt;column name=&quot;cssj&quot; length=&quot;19&quot; /&gt;        &lt;/property&gt;        &lt;property name=&quot;zyId&quot; type=&quot;java.lang.Integer&quot;&gt;            &lt;column name=&quot;zy_id&quot; /&gt;        &lt;/property&gt;        &lt;property name=&quot;zxf&quot; type=&quot;java.lang.Integer&quot;&gt;            &lt;column name=&quot;zxf&quot; /&gt;        &lt;/property&gt;        &lt;property name=&quot;bz&quot; type=&quot;string&quot;&gt;            &lt;column name=&quot;bz&quot; length=&quot;500&quot; /&gt;        &lt;/property&gt;        &lt;property name=&quot;zp&quot; type=&quot;binary&quot;&gt;            &lt;column name=&quot;zp&quot; /&gt;        &lt;/property&gt;                &lt;many-to-one name=&quot;zyb&quot; class=&quot;com.voidking.struts2_hibernate.model.Zyb&quot; fetch=&quot;select&quot; cascade=&quot;all&quot; lazy=&quot;false&quot;&gt;        	&lt;column name=&quot;zy_id&quot;&gt;&lt;/column&gt;        &lt;/many-to-one&gt;                &lt;set name=&quot;kcs&quot; table=&quot;xs_kcb&quot; lazy=&quot;false&quot; cascade=&quot;save-update&quot;&gt;        	&lt;key column=&quot;xh&quot;&gt;&lt;/key&gt;        	&lt;many-to-many class=&quot;com.voidking.struts2_hibernate.model.Kcb&quot; column=&quot;kch&quot;&gt;&lt;/many-to-many&gt;        &lt;/set&gt;    &lt;/class&gt;&lt;/hibernate-mapping&gt;
Kcb.hbm.xml&lt;?xml version=&quot;1.0&quot;?&gt;&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;&quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot;&gt;&lt;!-- Generated 2015-5-23 0:27:57 by Hibernate Tools 3.4.0.CR1 --&gt;&lt;hibernate-mapping&gt;    &lt;class name=&quot;Kcb&quot; table=&quot;kcb&quot; catalog=&quot;xscj&quot;&gt;        &lt;id name=&quot;kch&quot; type=&quot;string&quot;&gt;            &lt;column name=&quot;kch&quot; length=&quot;3&quot; /&gt;            &lt;generator class=&quot;assigned&quot; /&gt;        &lt;/id&gt;        &lt;property name=&quot;kcm&quot; type=&quot;string&quot;&gt;            &lt;column name=&quot;kcm&quot; length=&quot;12&quot; /&gt;        &lt;/property&gt;        &lt;property name=&quot;kxxq&quot; type=&quot;java.lang.Short&quot;&gt;            &lt;column name=&quot;kxxq&quot; /&gt;        &lt;/property&gt;        &lt;property name=&quot;xs&quot; type=&quot;java.lang.Integer&quot;&gt;            &lt;column name=&quot;xs&quot; /&gt;        &lt;/property&gt;        &lt;property name=&quot;xf&quot; type=&quot;java.lang.Integer&quot;&gt;            &lt;column name=&quot;xf&quot; /&gt;        &lt;/property&gt;        &lt;set name=&quot;xss&quot; table=&quot;xs_kcb&quot; lazy=&quot;true&quot; inverse=&quot;true&quot;&gt;        	&lt;key column=&quot;kch&quot;&gt;&lt;/key&gt;        	&lt;many-to-many class=&quot;com.voidking.struts2_hibernate.model.Xsb&quot;&gt;&lt;/many-to-many&gt;        &lt;/set&gt;    &lt;/class&gt;&lt;/hibernate-mapping&gt;

Daoå±‚ç»„ä»¶å®ç°DlDao.javapackage com.voidking.struts2_hibernate.dao;import com.voidking.struts2_hibernate.model.Dlb;public interface DlDao &#123;	public Dlb validate(String xh,String kl);&#125;

DlDaoImp.javapackage com.voidking.struts2_hibernate.dao.imp;import org.hibernate.Query;import org.hibernate.Session;import org.hibernate.SessionFactory;import org.hibernate.Transaction;import org.hibernate.cfg.Configuration;import com.voidking.struts2_hibernate.dao.DlDao;import com.voidking.struts2_hibernate.model.Dlb;public class DlDaoImp implements DlDao &#123;	@Override	public Dlb validate(String xh, String kl) &#123;		// TODO Auto-generated method stub		try &#123;			Configuration cf = new Configuration();			SessionFactory sf = cf.buildSessionFactory();			Session session = sf.openSession();						Transaction ts = session.beginTransaction();			Query query = session.createQuery(&quot;from Dlb where xh=? and kl=?&quot;);			query.setParameter(0, xh);			query.setParameter(1, kl);			query.setMaxResults(1);			Dlb dlb =(Dlb)query.uniqueResult();						ts.commit();			session.close();			sf.close();						if(dlb!=null)&#123;				return dlb;			&#125;else&#123;				return null;			&#125;		&#125; catch (Exception e) &#123;			// TODO: handle exception			e.printStackTrace();		&#125;		return null;	&#125;&#125;

XsDao.javapackage com.voidking.struts2_hibernate.dao;import com.voidking.struts2_hibernate.model.Xsb;public interface XsDao &#123;	public Xsb getOneXs(String xh);		public void update(Xsb xs);&#125;

XsDaoImp.javapackage com.voidking.struts2_hibernate.dao.imp;import org.hibernate.Query;import org.hibernate.Session;import org.hibernate.SessionFactory;import org.hibernate.Transaction;import org.hibernate.cfg.Configuration;import com.voidking.struts2_hibernate.dao.XsDao;import com.voidking.struts2_hibernate.model.Xsb;public class XsDaoImp implements XsDao &#123;	@Override	public Xsb getOneXs(String xh) &#123;		// TODO Auto-generated method stub		try &#123;			Configuration cf = new Configuration();			SessionFactory sf = cf.buildSessionFactory();			Session session = sf.openSession();			Transaction ts = session.beginTransaction();			Query query = session.createQuery(&quot;from xsb where xh=?&quot;);			query.setParameter(0, xh);			query.setMaxResults(1);			Xsb xs = (Xsb)query.uniqueResult();			ts.commit();			session.close();			sf.close();					&#125; catch (Exception e) &#123;			// TODO: handle exception			e.printStackTrace();		&#125;		return null;	&#125;	@Override	public void update(Xsb xs) &#123;		// TODO Auto-generated method stub		try &#123;			Configuration cf = new Configuration();			SessionFactory sf = cf.buildSessionFactory();			Session session = sf.openSession();			Transaction ts = session.beginTransaction();						session.update(xs);						ts.commit();			session.close();			sf.close();		&#125; catch (Exception e) &#123;			// TODO: handle exception			e.printStackTrace();		&#125;	&#125;&#125;
å†™å®Œè¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘çªç„¶å‘ç°ï¼Œå†™ä¸€ä¸ªHibernateSessionFactoryç±»å½“åšå·¥å…·çœŸçš„å¤ªå¿…è¦äº†ï¼ä¸ç„¶çš„è¯ï¼Œæ¯æ¬¡æˆ‘æƒ³ç”¨Sessionçš„æ—¶å€™ï¼Œéƒ½è¦
Configuration cf = new Configuration();SessionFactory sf = cf.buildSessionFactory();Session session = sf.openSession();
æ¯æ¬¡éƒ½é‡æ–°newä¸€ä¸ªConfigurationï¼Œå»ºç«‹ä¸€ä¸ªSessionFactoryï¼Œä¸€å®šåŠ å¤§äº†ç³»ç»Ÿçš„å¼€é”€ã€‚è€Œä¸”ï¼Œä¸€ä¸ªæ•°æ®åº“å¯¹åº”ä¸€ä¸ªSessionFactoryå°±å¤Ÿäº†ï¼
myeclipseè‡ªåŠ¨ç”Ÿæˆçš„HibernateSessionFactoryç±»ï¼Œæ„Ÿè§‰æœ‰ç‚¹å¤æ‚ï¼Œè‡ªå·±å†™ä¸€ä¸ªå§ï¼
MySessionFactory.javapackage com.voidking.struts2_hibernate.util;import org.hibernate.SessionFactory;import org.hibernate.cfg.Configuration; //åœ¨ä½¿ç”¨hibernateå¼€å‘é¡¹ç›®ï¼Œè¯·ä¸€å®šä¿è¯åªæœ‰ä¸€ä¸ªSessionFactory//ä¸€ä¸ªæ•°æ®åº“å¯¹åº”ä¸€ä¸ªSessionFactory å¯¹è±¡.final public class MySessionFactory &#123;     private static SessionFactory sessionFactory=null;         private MySessionFactory()&#123;             &#125;         static&#123;                 sessionFactory =new Configuration().configure(&quot;/hibernate.cfg.xml&quot;).buildSessionFactory();     &#125;         public static SessionFactory getSessionFactory()&#123;        return sessionFactory;    &#125;     &#125;

é‡å†™DlDaoImp.javapackage com.voidking.struts2_hibernate.dao.imp;import org.hibernate.Query;import org.hibernate.Session;import org.hibernate.SessionFactory;import org.hibernate.Transaction;import org.hibernate.cfg.Configuration;import com.voidking.struts2_hibernate.dao.DlDao;import com.voidking.struts2_hibernate.model.Dlb;import com.voidking.struts2_hibernate.util.MySessionFactory;public class DlDaoImp implements DlDao &#123;	@Override	public Dlb validate(String xh, String kl) &#123;		// TODO Auto-generated method stub		try &#123;			Session session = MySessionFactory.getSessionFactory().openSession();						Transaction ts = session.beginTransaction();			Query query = session.createQuery(&quot;from Dlb where xh=? and kl=?&quot;);			query.setParameter(0, xh);			query.setParameter(1, kl);			query.setMaxResults(1);			Dlb dlb =(Dlb)query.uniqueResult();						ts.commit();			session.close();						if(dlb!=null)&#123;				return dlb;			&#125;else&#123;				return null;			&#125;		&#125; catch (Exception e) &#123;			// TODO: handle exception			e.printStackTrace();		&#125;		return null;	&#125;&#125;

é‡å†™XsDaoImp.javapackage com.voidking.struts2_hibernate.dao.imp;import org.hibernate.Query;import org.hibernate.Session;import org.hibernate.SessionFactory;import org.hibernate.Transaction;import org.hibernate.cfg.Configuration;import com.voidking.struts2_hibernate.dao.XsDao;import com.voidking.struts2_hibernate.model.Xsb;import com.voidking.struts2_hibernate.util.MySessionFactory;public class XsDaoImp implements XsDao &#123;	@Override	public Xsb getOneXs(String xh) &#123;		// TODO Auto-generated method stub		try &#123;			Session session = MySessionFactory.getSessionFactory().openSession();			Transaction ts = session.beginTransaction();			Query query = session.createQuery(&quot;from xsb where xh=?&quot;);			query.setParameter(0, xh);			query.setMaxResults(1);			Xsb xs = (Xsb)query.uniqueResult();			ts.commit();			session.close();					&#125; catch (Exception e) &#123;			// TODO: handle exception			e.printStackTrace();		&#125;		return null;	&#125;	@Override	public void update(Xsb xs) &#123;		// TODO Auto-generated method stub		try &#123;			Session session = MySessionFactory.getSessionFactory().openSession();			Transaction ts = session.beginTransaction();						session.update(xs);						ts.commit();			session.close();		&#125; catch (Exception e) &#123;			// TODO: handle exception			e.printStackTrace();		&#125;	&#125;&#125;
ZyDao.javapackage com.voidking.struts2_hibernate.dao;import java.util.List;import com.voidking.struts2_hibernate.model.Zyb;public interface ZyDao &#123;	public Zyb getOneZy(Integer zyId);	public List getAll();&#125;

ZyDaoImp.javapackage com.voidking.struts2_hibernate.dao.imp;import java.util.List;import org.hibernate.Query;import org.hibernate.Session;import org.hibernate.Transaction;import com.voidking.struts2_hibernate.dao.ZyDao;import com.voidking.struts2_hibernate.model.Zyb;import com.voidking.struts2_hibernate.util.MySessionFactory;public class ZyDaoImp implements ZyDao &#123;	@Override	public Zyb getOneZy(Integer zyId) &#123;		try &#123;			Session session = MySessionFactory.getSessionFactory().openSession();			Transaction ts = session.beginTransaction();						Query query = session.createQuery(&quot;from zyb where id=?&quot;);			query.setParameter(0, zyId);			query.setMaxResults(1);			Zyb zy = (Zyb)query.uniqueResult();						ts.commit();			session.close();						return zy;		&#125; catch (Exception e) &#123;			// TODO: handle exception			e.printStackTrace();		&#125;		return null;	&#125;	@Override	public List getAll() &#123;		// TODO Auto-generated method stub		try &#123;			Session session = MySessionFactory.getSessionFactory().openSession();			Transaction ts = session.beginTransaction();						List list = session.createQuery(&quot;from zyb&quot;).list();						ts.commit();			session.close();			return list;					&#125; catch (Exception e) &#123;			e.printStackTrace();		&#125;		return null;	&#125;&#125;

KcDao.javapackage com.voidking.struts2_hibernate.dao;import java.util.List;import com.voidking.struts2_hibernate.model.Kcb;public interface KcDao &#123;	public Kcb getOneKc(String kch);	public List getAll();&#125;

KcDaoImp.javapackage com.voidking.struts2_hibernate.dao.imp;import java.util.List;import org.hibernate.HibernateException;import org.hibernate.Query;import org.hibernate.Session;import org.hibernate.Transaction;import com.voidking.struts2_hibernate.dao.KcDao;import com.voidking.struts2_hibernate.model.Kcb;import com.voidking.struts2_hibernate.util.MySessionFactory;public class KcDaoImp implements KcDao &#123;	@Override	public Kcb getOneKc(String kch) &#123;		// TODO Auto-generated method stub		try &#123;			Session session = MySessionFactory.getSessionFactory().openSession();			Transaction ts = session.beginTransaction();						Query query = session.createQuery(&quot;from kcb where kch=?&quot;);			query.setParameter(0, kch);			query.setMaxResults(1);			Kcb kc = (Kcb)query.uniqueResult();						ts.commit();			session.close();			return kc;					&#125; catch (Exception e) &#123;			e.printStackTrace();		&#125;		return null;	&#125;	@Override	public List getAll() &#123;		// TODO Auto-generated method stub		try &#123;			Session session = MySessionFactory.getSessionFactory().openSession();			Transaction ts = session.beginTransaction();			List list = session.createQuery(&quot;from kcb order by kch&quot;).list();			ts.commit();			session.close();			return list;		&#125; catch (HibernateException e) &#123;			// TODO Auto-generated catch block			e.printStackTrace();		&#125;				return null;	&#125;&#125;

struts.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE struts PUBLIC    &quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;    &quot;http://struts.apache.org/dtds/struts-2.0.dtd&quot;&gt;&lt;struts&gt;	&lt;constant name=&quot;struts.multipart.saveDir&quot; value=&quot;/tmp&quot;/&gt;    &lt;package name=&quot;default&quot;  extends=&quot;struts-default&quot;&gt;    	&lt;action name=&quot;login&quot; class=&quot;com.voidking.struts2_hibernate.action.LoginAction&quot;&gt;			&lt;result name=&quot;success&quot;&gt;/main.jsp&lt;/result&gt;			&lt;result name=&quot;error&quot;&gt;/login.jsp&lt;/result&gt;		&lt;/action&gt;		&lt;action name=&quot;xsInfo&quot; class=&quot;org.action.XsAction&quot;&gt;			&lt;result name=&quot;success&quot;&gt;/xsInfo.jsp&lt;/result&gt;		&lt;/action&gt;		&lt;action name=&quot;getImage&quot; class=&quot;com.voidking.struts2_hibernate.action.XsAction&quot; method=&quot;getImage&quot;&gt;&lt;/action&gt;		&lt;action name=&quot;updateXsInfo&quot; class=&quot;com.voidking.struts2_hibernate.action.XsAction&quot; method=&quot;updateXsInfo&quot;&gt;			&lt;result name=&quot;success&quot;&gt;/updateXsInfo.jsp&lt;/result&gt;		&lt;/action&gt;		&lt;action name=&quot;updateXs&quot; class=&quot;com.voidking.struts2_hibernate.action.XsAction&quot; method=&quot;updateXs&quot;&gt;			&lt;result name=&quot;success&quot;&gt;/updateXs_success.jsp&lt;/result&gt;		&lt;/action&gt;		&lt;action name=&quot;getXsKcs&quot; class=&quot;com.voidking.struts2_hibernate.action.XsAction&quot; method=&quot;getXsKcs&quot;&gt;			&lt;result name=&quot;success&quot;&gt;/xsKcs.jsp&lt;/result&gt;		&lt;/action&gt;		&lt;action name=&quot;deleteKc&quot; class=&quot;com.voidking.struts2_hibernate.action.XsAction&quot; method=&quot;deleteKc&quot;&gt;			&lt;result name=&quot;success&quot;&gt;/deleteKc_success.jsp&lt;/result&gt;		&lt;/action&gt;		&lt;action name=&quot;getAllKc&quot; class=&quot;com.voidking.struts2_hibernate.action.KcAction&quot;&gt;			&lt;result name=&quot;success&quot;&gt;/allKc.jsp&lt;/result&gt;		&lt;/action&gt;		&lt;action name=&quot;selectKc&quot; class=&quot;com.voidking.struts2_hibernate.action.XsAction&quot; method=&quot;selectKc&quot;&gt;			&lt;result name=&quot;success&quot;&gt;/selectKc_success.jsp&lt;/result&gt;			&lt;result name=&quot;error&quot;&gt;/selectKc_fail.jsp&lt;/result&gt;		&lt;/action&gt;    &lt;/package&gt;&lt;/struts&gt;

web.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app id=&quot;WebApp_9&quot; version=&quot;2.4&quot; xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&gt;	&lt;welcome-file-list&gt;		&lt;welcome-file&gt;/login.jsp&lt;/welcome-file&gt;	&lt;/welcome-file-list&gt;    &lt;filter&gt;        &lt;filter-name&gt;struts2&lt;/filter-name&gt;        &lt;filter-class&gt;org.apache.struts2.dispatcher.FilterDispatcher&lt;/filter-class&gt;    &lt;/filter&gt;    &lt;filter-mapping&gt;        &lt;filter-name&gt;struts2&lt;/filter-name&gt;        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;    &lt;/filter-mapping&gt;&lt;/web-app&gt;

ç•Œé¢äº¤äº’Actionç±»å’Œjspç•Œé¢ï¼Œåœ¨æ­¤çœç•¥ã€‚è¯¦æƒ…è¯·è§æºä»£ç ã€‚
ä¸¥é‡é”™è¯¯éƒ¨ç½²ï¼Œè¿è¡Œï¼Œ404é”™è¯¯ã€‚è¿›å…¥Tomcatçš„Manager Appç•Œé¢ï¼Œstarté¡¹ç›®ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š
SEVERE:Exception starting filter struts2java.lang.ClassNotFoundException: org.apache.struts2.dispatcher.FilterDispatcher
æˆ‘å‹’ä¸ªå»ï¼Œæ€ä¹ˆå°±æ‰¾ä¸åˆ°è¿‡æ»¤å™¨äº†ï¼æ¢æˆorg.apache.struts2.dispatcher.ng.filter.StrutsPrepareFilterè¯•è¯•ï¼ŒæŠ¥åŒæ ·çš„é”™ï¼š
SEVERE:Exception starting filter struts2java.lang.ClassNotFoundException: org.apache.struts2.dispatcher.ng.filter.StrutsPrepareFilter
è¿™ä¸ªå·¥ç¨‹ï¼Œå’Œä¹‹å‰å†™çš„struts2å·¥ç¨‹æœ‰ä»€ä¹ˆå·®åˆ«ï¼Ÿstruts2ä¸­ï¼Œæˆ‘ç›´æ¥æŠŠjaråŒ…æ”¾åˆ°äº†WebContent/WEB-INF/libé‡Œé¢ï¼Œè€Œåœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘æŠŠjaråŒ…æ”¾åˆ°äº†WebContent/WEB-INF/lib/struts2é‡Œã€‚åˆ é™¤ä¸€å±‚ç›®å½•è¯•è¯•ï¼Œé—®é¢˜å®Œç¾è§£å†³ã€‚
å¾ˆå¤šé”™è¯¯è¾“å…¥å­¦å·ï¼Œå¯†ç ï¼Œç‚¹å‡»ç™»å½•ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š
HTTP Status 500 - type Exception reportmessage description The server encountered an internal error that prevented it from fulfilling this request.exception java.lang.reflect.InvocationTargetException	sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)	sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)	â€¦â€¦	root cause 	â€¦â€¦
root caoseä¸‹é¢çš„å†…å®¹æ˜¯é‡ç‚¹ï¼Œè¦ä¹ˆæ˜¯libä¸­ç¼ºå°‘jaræ–‡ä»¶ï¼Œè¦ä¹ˆæŸä¸ªç±»å†™é”™äº†ï¼Œè¦ä¹ˆé…ç½®æ–‡ä»¶é”™è¯¯â€¦â€¦æ€»ä¹‹å„ç§é”™è¯¯ï¼Œæ ¹æ®æç¤ºå®šä½ä¿®æ”¹å³å¯ã€‚
æºä»£ç åˆ†äº«https://github.com/voidking/struts2_hibernate.git
å°ç»“å¤ªå¤æ‚äº†ï¼Œæ ¹æœ¬æ²¡æ³•æ„‰å¿«çš„ç©è€ï¼æ”¹äº†å‡ åä¸ªé”™è¯¯ï¼ï¼ï¼å°¤å…¶æ˜¯Hibernateä¸­POJOç±»å’Œ*.hbm.xmlå¯¹åº”çš„éƒ¨åˆ†ï¼Œå¤ªéš¾æäº†ï¼è®°å¾—JPAä¼¼ä¹ç®€å•ä¸€ç‚¹ï¼Œç­‰åˆ°å¤ä¹ åˆ°é‚£éƒ¨åˆ†å†æ·±å…¥ç ”ç©¶ã€‚æœ€ç»ˆï¼Œç¨‹åºè·‘èµ·æ¥äº†ï¼Œä½†æ˜¯å¾ˆå¤šåŠŸèƒ½éƒ½æ²¡æ³•ç”¨ï¼Œå„ç§not mappedï¼Œå®åœ¨æä¸ä¸‹å»äº†ï¼Œèƒ½åŠ›æœ‰é™å•Šã€‚ã€‚ã€‚
å‘ç°ï¼šåœ¨JavaSEä¸­ï¼Œå¯ä»¥é€šè¿‡å¼•å…¥jaråŒ…çš„æ–¹å¼ä½¿ç”¨å¤–éƒ¨ç±»ã€‚ä½†æ˜¯åœ¨JavaEEä¸­ï¼Œä¹Ÿå°±æ˜¯Webå·¥ç¨‹ä¸­ï¼Œéœ€è¦æ‹·è´jaråŒ…åˆ°libæ–‡ä»¶å¤¹ä¸­æ‰å¯ä»¥ä½¿ç”¨å¤–éƒ¨ç±»ã€‚åˆ†æï¼šå‘å¸ƒåˆ°Tomcatä¸­çš„å·¥ç¨‹ï¼Œæ ¹æœ¬æ²¡æœ‰è®°å½•å¼•ç”¨å¤–éƒ¨ç±»çš„æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰¾ä¸åˆ°å¤–éƒ¨jaråŒ…ã€‚è€Œlibæ–‡ä»¶å¤¹ä¸­çš„jaråŒ…ï¼Œåº”è¯¥æ˜¯é»˜è®¤å¯»æ‰¾å¤–éƒ¨ç±»çš„åœ°æ–¹ã€‚
å‚è€ƒæ–‡æ¡£ã€ŠJava EEåŸºç¡€å®ç”¨æ•™ç¨‹ã€‹ï¼Œéƒ‘é˜¿å¥‡ä¸»ç¼–

åœ¨Eclipseä¸­ä»æ•°æ®åº“è¡¨è‡ªåŠ¨ç”Ÿæˆhibernateçš„javaå®ä½“ç±»http://www.shangxueba.com/jingyan/2453455.htmlhttp://blog.csdn.net/zheng2008hua/article/details/6274659

Hibernateåˆå§‹åŒ–æ—¶çš„Could not parse configurationhttp://blog.csdn.net/mydeman/article/details/6134820

å¦‚ä½•ç†è§£Hibernateä¸­çš„HibernateSessionFactoryç±»http://www.cnblogs.com/dyllove98/archive/3243769.html

org.hibernate.MappingException:An association from the table * refers to an unmapped class:http://blog.csdn.net/jayqean/article/details/5608330

org.hibernate.HibernateException: Unable to instantiate default tuplizerhttp://www.cnblogs.com/chuyuhuashi/archive/2423235.html

]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>hibernate</tag>
        <tag>struts2</tag>
      </tags>
  </entry>
  <entry>
    <title>Hibernateé«˜çº§åº”ç”¨</title>
    <url>/dev-hibernate-senior/</url>
    <content><![CDATA[Hibernateæ‰¹é‡å¤„ç†æ‰¹é‡æ’å…¥Hibernateç›´æ¥å¤„ç†é¦–å…ˆåœ¨hibernate.cfg.xmlä¸­è®¾ç½®æ‰¹é‡å°ºå¯¸å±æ€§hibernate.jdbc.batch_sizeï¼Œæœ€å¥½å…³é—­Hibernateçš„äºŒçº§ç¼“å­˜ä»¥æé«˜æ•ˆç‡ã€‚
&lt;hibernate-configuration&gt;	&lt;session-factory&gt;		&lt;property name=&quot;hibernate.jdbc.batch_size&quot;&gt;50&lt;/property&gt;		&lt;property name=&quot;hibernate.jdbc.use_second_level_cache&quot;&gt;false&lt;/property&gt;	&lt;/session-factory&gt;&lt;/hibernate-configuration&gt;
ä¸‹é¢æ‰¹é‡æ’å…¥500ä¸ªè¯¾ç¨‹åˆ°æ•°æ®åº“è¡¨ä¸­ï¼š
//KcbBatch.javapackage com.voidking.hibernate.test;import org.hibernate.Session;import org.hibernate.SessionFactory;import org.hibernate.Transaction;import org.hibernate.cfg.Configuration;import com.voidking.hibernate.model.Kcb;public class KcbBatch &#123;	public static void main(String[] args)&#123;		//åˆ›å»ºSessionå¯¹è±¡		Configuration cfg = new Configuration();        SessionFactory sf = cfg.configure().buildSessionFactory();		Session session = sf.openSession();				//åˆ›å»ºäº‹åŠ¡å¯¹è±¡		Transaction ts=session.beginTransaction();				for (int i = 0; i &lt; 500; i++) &#123;			Kcb kcb = new Kcb();			kcb.setKch(i+&quot;&quot;);			session.save(kcb);			if(i%50==0)			&#123;				session.flush();				session.clear();			&#125;		&#125;				ts.commit();				session.close();		sf.close();			&#125;&#125;



è°ƒç”¨JDBCç”±äºHibernateåªæ˜¯å¯¹JDBCè¿›è¡Œäº†è½»é‡çº§çš„å°è£…ï¼Œå› æ­¤å®Œå…¨å¯ä»¥ç»•è¿‡Hibernateç›´æ¥ç”¨JDBCè¿›è¡Œæ‰¹é‡æ’å…¥ã€‚å› æ­¤ä¸Šé¢çš„ä»£ç å¯ä»¥æ”¹æˆï¼š
//KcbBatch.javapackage com.voidking.hibernate.test;import java.sql.Connection;import java.sql.PreparedStatement;import org.hibernate.Session;import org.hibernate.SessionFactory;import org.hibernate.Transaction;import org.hibernate.cfg.Configuration;import com.voidking.hibernate.model.Kcb;public class KcbBatch2 &#123;	public static void main(String[] args)&#123;		//åˆ›å»ºSessionå¯¹è±¡		Configuration cfg = new Configuration();        SessionFactory sf = cfg.configure().buildSessionFactory();		Session session = sf.openSession();				//åˆ›å»ºäº‹åŠ¡å¯¹è±¡		Transaction ts=session.beginTransaction();				Connection conn = session.connection();				try &#123;			PreparedStatement stmt = conn.prepareStatement(&quot;insert into kcb(kch) values(?)&quot;);			for(int i=0;i&lt;500;i++)			&#123;				stmt.setString(1, i+&quot;&quot;);				stmt.addBatch();			&#125;		&#125; catch (Exception e) &#123;			e.printStackTrace();		&#125;				ts.commit();				session.close();		sf.close();			&#125;&#125;

å¯¹æ¯”åœ¨ç”¨Hibernateè¿›è¡Œæ“ä½œçš„æ—¶å€™æ“ä½œçš„æ˜¯è¡¨å¯¹åº”çš„ç±»ï¼Œè€Œåœ¨ç”¨JDBCè¿›è¡Œæ“ä½œæ—¶æ“ä½œçš„æ˜¯æ•°æ®åº“ä¸­çš„è¡¨ã€‚
æ‰¹é‡æ›´æ–°Hibernateç›´æ¥å¤„ç†ä¸ºäº†ä½¿Hibernateçš„HQLç›´æ¥æ”¯æŒupdate/deleteçš„æ‰¹é‡æ›´æ–°è¯­æ³•ï¼Œé¦–å…ˆè¦hibernate.cfg.xmlä¸­è®¾ç½®HQL/SQLæŸ¥è¯¢ç¿»è¯‘å™¨å±æ€§hibernate.query.factory_classã€‚
&lt;property name=&quot;hibernate.query.factory_class&quot;&gt;	org.hibernate.hql.ast.ASTQueryTranslatorFactory&lt;/property&gt;
ä¸ºäº†é˜²æ­¢ç±»åè¾“å…¥é”™è¯¯ï¼Œå¯ä»¥æŒ‰ä½Ctrlé”®ï¼ŒåŒæ—¶å•å‡»è¿™ä¸ªç±»åã€‚å¦‚æœå¯ä»¥è·³è½¬åˆ°.classæ–‡ä»¶ï¼Œè¯´æ˜è¾“å…¥æ­£ç¡®ï¼Œå¦åˆ™è¾“å…¥é”™è¯¯ã€‚ä¸‹é¢ä½¿ç”¨HQLæ‰¹é‡æ›´æ–°æŠŠè¯¾ç¨‹è¡¨ä¸­XSä¿®æ”¹ä¸º30ã€‚
Query query = session.createQuery(&quot;update kcb set xs=30&quot;);query.executeUpdate();


è°ƒç”¨JDBCtry&#123;	Statement stmt = conn.createStatement();	stmt.executeUpdate(&quot;update kcb set xs=30&quot;);&#125;catch(Exception)&#123;	e.printStackTrace();&#125;

æ‰¹é‡åˆ é™¤Hibernateç›´æ¥å¤„ç†åˆ é™¤è¯¾ç¨‹è¡¨ä¸­è¯¾ç¨‹å·å¤§äº200çš„è¯¾ç¨‹ã€‚
Query query = session.createQuery(&quot;delete kcb where kch &gt; 200&quot;);query.executeUpdate();
è°ƒç”¨JDBCtry&#123;	Statement stmt = conn.createStatement();	stmt.executeUpdate(&quot;delete from kcb where kch&gt;200&quot;);&#125;catch(Exception)&#123;	e.printStackTrace();&#125;

å®ä½“å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå®ä½“å¯¹è±¡ï¼Œç‰¹æŒ‡Hibernate O/Ræ˜ å°„å…³ç³»ä¸­çš„åŸŸå¯¹è±¡ï¼ˆå³O/Rä¸­çš„Oï¼‰ã€‚
transientï¼ˆç¬æ—¶æ€ï¼‰ç¬æ—¶æ€ï¼Œå³å®ä½“å¯¹è±¡åœ¨å†…å­˜ä¸­çš„å­˜åœ¨ï¼Œä¸æ•°æ®åº“ä¸­çš„è®°å½•æ— å…³ã€‚
Student stu = new Student();stu.setSnumber(&quot;081101&quot;);stu.setSname(&quot;ææ–¹æ–¹&quot;);stu.setSage(21);
è¿™é‡Œçš„stuå¯¹è±¡ï¼Œä¸æ•°æ®åº“ä¸­çš„è®°å½•æ²¡æœ‰ä»»ä½•å…³è”ã€‚
persisentï¼ˆæŒä¹…æ€ï¼‰Student stu = new Student();stu.setSnumber(&quot;081101&quot;);stu.setSname(&quot;ææ–¹æ–¹&quot;);stu.setSage(21);Student stu1 = new Student();stu1.setSnumber(&quot;081102&quot;);stu1.setSname(&quot;ç¨‹æ˜&quot;);stu1.setSage(22);Transaction ts = session.beginTransaction();session.save(stu);//stuå¯¹è±¡è½¬æ¢ä¸ºæŒä¹…æ€ï¼Œç”±Hibernateçº³å…¥å®ä½“ç®¡ç†å™¨ï¼›stu1ä»ç„¶å¤„äºç¬æ—¶æ€ts.commit();Transaction ts2 = session.beginTransaction();stu.setSname(&quot;ææ–¹&quot;);//è™½ç„¶è¿™ä¸ªäº‹åŠ¡æ²¡æœ‰æ˜¾å¼è°ƒç”¨session.sava()ä¿å­˜stuå¯¹è±¡ï¼Œä½†æ˜¯ç”±äºstuä¸ºæŒä¹…æ€ï¼Œå°†è‡ªåŠ¨è¢«å›ºåŒ–åˆ°æ•°æ®åº“stu1.setSname(&quot;ç¨‹æ˜æ˜&quot;);//stu1ä»æ˜¯ä¸€ä¸ªæ™®é€šJavaå¯¹è±¡ï¼Œå¯¹æ•°æ®åº“æœªäº§ç”Ÿä»»ä½•å½±å“ts2.commit();
å¤„äºç¬æ—¶æ€çš„å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡Sessionçš„save()æ–¹æ³•è½¬æ¢æˆæŒä¹…çŠ¶æ€ã€‚åŒæ ·ï¼Œå¦‚æœä¸€ä¸ªå®ä½“å¯¹è±¡ç”±HibernateåŠ è½½ï¼Œé‚£ä¹ˆï¼Œå®ƒä¹Ÿå¤„äºæŒä¹…çŠ¶æ€ã€‚
Student stu = (Student)session.load(Student.class,net Integer(1));
æŒä¹…å¯¹è±¡å¯¹åº”ç€æ•°æ®åº“ä¸­çš„ä¸€æ¡è®°å½•ï¼Œå¯ä»¥çœ‹åšæ˜¯æ•°æ®åº“è®°å½•çš„å¯¹è±¡åŒ–æ“ä½œæ¥å£ï¼Œå…¶çŠ¶æ€çš„å˜æ›´å°†å¯¹æ•°æ®åº“ä¸­çš„è®°å½•äº§ç”Ÿå½±å“ã€‚
Detachedï¼ˆè„±ç®¡çŠ¶æ€ï¼‰å¤„äºæŒä¹…åŒ–çš„å¯¹è±¡ï¼Œå…¶å¯¹åº”çš„Sessionå®ä¾‹å…³é—­ä¹‹åï¼Œæ­¤å¯¹è±¡å°±å¤„äºè„±ç®¡çŠ¶æ€ã€‚Sessionå®ä¾‹å¯ä»¥çœ‹åšæ˜¯æŒä¹…å¯¹è±¡çš„å®¿ä¸»ï¼Œä¸€æ—¦æ­¤å®¿ä¸»å¤±æ•ˆï¼Œå…¶ä»å±çš„æŒä¹…å¯¹è±¡è¿›å…¥è„±ç®¡çŠ¶æ€ã€‚
Student stu = new Student();//stuå¯¹è±¡ä¸ºç¬æ—¶æ€stu.setSnumber(&quot;081101&quot;);stu.setSname(&quot;ææ–¹æ–¹&quot;);stu.setSage(21);Transaction ts = session.beginTransaction();session.save(stu);//stuå¯¹è±¡ç”±Hibernateçº³å…¥ç®¡ç†å®¹å™¨ï¼Œå¤„äºæŒä¹…çŠ¶æ€ts.commit();session.close();//stuå¯¹è±¡ä¸ºè„±ç®¡çŠ¶æ€ï¼Œå› ä¸ºä¸å…¶å…³è”çš„sessionå·²ç»å…³é—­
æ‰˜ç®¡æ€å’Œç¬æ—¶æ€æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿç¬æ—¶çŠ¶æ€çš„stuå¯¹è±¡ä¸åº“è¡¨ä¸­çš„æ•°æ®ç¼ºä¹å¯¹åº”å…³ç³»ï¼Œè€Œè„±ç®¡çŠ¶æ€çš„stuå¯¹è±¡ï¼Œå´åœ¨åº“è¡¨ä¸­å­˜åœ¨ç›¸å¯¹åº”çš„è®°å½•ï¼Œåªä¸è¿‡ç”±äºè„±ç®¡å¯¹è±¡è„±ç¦»Sessionè¿™ä¸ªæ•°æ®æ“ä½œå¹³å°ï¼Œå…¶çŠ¶æ€çš„æ”¹å˜æ— æ³•æ›´æ–°åˆ°åº“è¡¨ä¸­å¯¹åº”çš„è®°å½•ã€‚
æœ‰æ—¶å€™ä¸ºäº†æ–¹ä¾¿ï¼Œå°†å¤„äºç¬æ—¶å’Œè„±ç®¡çŠ¶æ€çš„å¯¹è±¡ç»Ÿç§°ä¸ºå€¼å¯¹è±¡ï¼ˆValue Objectï¼ŒVOï¼‰ï¼Œå°†å¤„äºæŒä¹…æ€çš„å¯¹è±¡ç§°ä¸ºæŒä¹…å¯¹è±¡ï¼ˆPersistent Objectï¼ŒPOï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹Hibernateå®ä½“ç®¡ç†å®¹å™¨è€Œè¨€ï¼Œéç®¡ç†çš„å®ä½“å¯¹è±¡ç»Ÿç§°ä¸ºVOï¼Œè¢«ç®¡ç†çš„å¯¹è±¡ç§°ä¸ºPOã€‚
Hibernateäº‹åŠ¡ç®¡ç†äº‹åŠ¡æ˜¯æ•°æ®åº“å¹¶å‘æ§åˆ¶ä¸å¯åˆ†å‰²çš„åŸºæœ¬å·¥ä½œå•ä½ï¼Œå…·æœ‰åŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§å’ŒæŒä¹…æ€§çš„ç‰¹ç‚¹ã€‚
äº‹åŠ¡ï¼ˆTransactionï¼‰æ˜¯å·¥ä½œä¸­çš„åŸºæœ¬é€»è¾‘å•å…ƒï¼Œå¯ä»¥ç”¨äºç¡®ä¿æ•°æ®åº“èƒ½å¤Ÿè¢«æ­£ç¡®ä¿®æ”¹ï¼Œé¿å…æ•°æ®åªä¿®æ”¹ä¸€éƒ¨åˆ†è€Œå¯¼è‡´æ•°æ®ä¸å®Œæ•´ï¼Œæˆ–è€…åœ¨ä¿®æ”¹æ—¶å—åˆ°ç”¨æˆ·å¹²æ‰°ã€‚
åŸºäºJDBCçš„äº‹åŠ¡ç®¡ç†Hibernateæ˜¯JDBCçš„è½»é‡çº§å°è£…ï¼Œæœ¬èº«å¹¶ä¸å…·å¤‡äº‹åŠ¡ç®¡ç†èƒ½åŠ›ã€‚åœ¨äº‹åŠ¡ç®¡ç†å±‚ï¼ŒHibernateå°†å…¶å§”æ‰˜ç»™åº•å±‚çš„JDBCæˆ–JTAï¼Œä»¥å®ç°äº‹åŠ¡ç®¡ç†å’Œè°ƒåº¦åŠŸèƒ½ã€‚
åœ¨JDBCä¸­ï¼Œäº‹åŠ¡é»˜è®¤æ˜¯è‡ªåŠ¨æäº¤ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ¡å¯¹æ•°æ®åº“çš„æ›´æ–°è¡¨è¾¾å¼ä»£è¡¨ä¸€é¡¹äº‹åŠ¡æ“ä½œã€‚æ“ä½œæˆåŠŸåï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è°ƒç”¨commitæäº¤ã€‚å¦åˆ™ï¼Œå°†è°ƒç”¨rollbackå›æ»šã€‚
åœ¨JDBCä¸­ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨setAutoCommit(false)ç¦æ­¢è‡ªåŠ¨æäº¤ã€‚ä¹‹åå°±å¯ä»¥æŠŠå¤šä¸ªæ•°æ®åº“æ“ä½œçš„è¡¨è¾¾å¼ä½œä¸ºä¸€ä¸ªäº‹åŠ¡ï¼Œåœ¨æ“ä½œå®Œæˆåè°ƒç”¨commitè¿›è¡Œæ•´ä½“æäº¤ã€‚
å°†äº‹åŠ¡ç®¡ç†å§”æ‰˜ç»™JDBCè¿›è¡Œå¤„ç†æ˜¯æœ€ç®€å•çš„å®ç°æ–¹å¼ï¼ŒHibernateå¯¹äºJDBCäº‹åŠ¡çš„å°è£…ä¹Ÿæ¯”è¾ƒç®€å•ã€‚å¦‚ä¸‹é¢çš„ä»£ç ï¼š
//åˆ›å»ºSessionå¯¹è±¡Configuration cfg = new Configuration();SessionFactory sf = cfg.configure().buildSessionFactory();Session session = sf.openSession();//åˆ›å»ºäº‹åŠ¡å¯¹è±¡Transaction ts=session.beginTransaction();seesion.save(stu);ts.commit();session.close();sf.close();
ä»JDBCå±‚é¢è€Œè¨€ï¼Œä¸Šé¢çš„ä»£ç å®é™…å¯¹åº”ç€ï¼š
Connection cn = getConnection;cn.setAutoCommit(false);//JDBCè°ƒç”¨ç›¸å…³çš„SQLè¯­å¥cn.commit();

åœ¨sf.openSession()è¯­å¥ä¸­ï¼ŒHibernateä¼šåˆå§‹åŒ–æ•°æ®åº“è¿æ¥ã€‚ä¸æ­¤åŒæ—¶ï¼Œå°†å…¶AutoCommitè®¾ä¸ºå…³é—­çŠ¶æ€ï¼ˆfalseï¼‰ã€‚å³ä¸€å¼€å§‹è·å¾—çš„sessionï¼Œå…¶è‡ªåŠ¨æäº¤å±æ€§å·²ç»è¢«å…³é—­ã€‚ä¸‹é¢çš„ä»£ç ä¸ä¼šå¯¹æ•°æ®åº“äº§ç”Ÿä»»ä½•æ•ˆæœï¼š
//åˆ›å»ºSessionå¯¹è±¡Configuration cfg = new Configuration();SessionFactory sf = cfg.configure().buildSessionFactory();Session session = sf.openSession();seesion.save(stu);session.close();sf.close();
è¿™å®é™…ä¸Šç›¸å½“äºJDBC Connectionçš„AutoCommitå±æ€§è¢«è®¾ä¸ºfalseï¼Œæ‰§è¡Œäº†è‹¥å¹²JDBCæ“ä½œä¹‹åï¼Œæ²¡æœ‰è°ƒç”¨commitæ“ä½œã€‚
åŸºäºJTAçš„äº‹åŠ¡ç®¡ç†JTAï¼ˆJava Transaction APIï¼‰æ˜¯ç”±Java EE Transaction Managerå»ç®¡ç†çš„äº‹åŠ¡ã€‚å…¶æœ€å¤§çš„ç‰¹ç‚¹æ˜¯è°ƒç”¨UserTransactionæ¥å£çš„beginã€commitå’Œrollbackæ–¹æ³•æ¥å®Œæˆäº‹åŠ¡èŒƒå›´çš„ç•Œå®šã€äº‹åŠ¡çš„æäº¤å’Œå›æ»šã€‚JTAå¯ä»¥å®ç°ç»Ÿä¸€äº‹åŠ¡å¯¹åº”ä¸åŒçš„æ•°æ®åº“ã€‚
JTAä¸»è¦ç”¨äºåˆ†å¸ƒå¼çš„å¤šä¸ªæ•°æ®æºçš„ä¸¤é˜¶æ®µæäº¤çš„äº‹åŠ¡ï¼Œè€ŒJDBCçš„Connectionæä¾›å•ä¸ªæ•°æ®æºçš„äº‹åŠ¡ã€‚åè€…å› ä¸ºåªæ¶‰åŠä¸€ä¸ªæ•°æ®æºï¼Œæ‰€ä»¥å…¶äº‹åŠ¡å¯ä»¥ç”±æ•°æ®åº“è‡ªå·±å•ç‹¬å®ç°ã€‚è€ŒJTAäº‹åŠ¡å› ä¸ºå…¶åˆ†å¸ƒå¼å’Œå¤šæ•°æ®åº“çš„ç‰¹æ€§ï¼Œä¸å¯èƒ½ç”±ä»»ä½•ä¸€ä¸ªæ•°æ®æºå®ç°äº‹åŠ¡ã€‚å› æ­¤ï¼ŒJTAä¸­çš„äº‹åŠ¡æ˜¯ç”±â€œäº‹åŠ¡ç®¡ç†å™¨â€å®ç°çš„ã€‚å®ƒä¼šåœ¨å¤šä¸ªæ•°æ®æºä¹‹é—´ç»Ÿç­¹äº‹åŠ¡ï¼Œå…·ä½“ä½¿ç”¨çš„æŠ€æœ¯å°±æ˜¯æ‰€è°“çš„â€œä¸¤é˜¶æ®µæäº¤â€ã€‚
JTAæä¾›äº†è·¨Sessionçš„äº‹åŠ¡ç®¡ç†èƒ½åŠ›ã€‚è¿™ä¸€ç‚¹æ˜¯ä¸JDBC Transactionæœ€å¤§çš„å·®å¼‚ã€‚JDBCäº‹åŠ¡ç”±Connectionç®¡ç†ï¼Œå³äº‹åŠ¡ç®¡ç†å®é™…ä¸Šæ˜¯åœ¨JDBC Connectionä¸­å®ç°ã€‚äº‹åŠ¡å‘¨æœŸé™äºConnectionçš„ç”Ÿå‘½å‘¨æœŸä¹‹å†…ã€‚åŒæ ·ï¼Œå¯¹äºåŸºäºJDBC Transactionçš„Hibernateäº‹åŠ¡ç®¡ç†æœºåˆ¶è€Œè¨€ï¼Œäº‹åŠ¡ç®¡ç†åœ¨Sessionæ‰€ä¾æ‰˜çš„JDBC Connectionä¸­å®ç°ï¼Œäº‹åŠ¡å‘¨æœŸé™äºSessionçš„ç”Ÿå‘½å‘¨æœŸã€‚
JTAäº‹åŠ¡ç®¡ç†åˆ™ç”±JTAå®¹å™¨å®ç°ã€‚JTAå¯¹å½“å‰åŠ å…¥äº‹åŠ¡çš„ä¼—å¤šConnectionè¿›è¡Œè°ƒåº¦ï¼Œå®ç°äº‹åŠ¡æ€§è¦æ±‚ã€‚JTAçš„äº‹åŠ¡å‘¨æœŸå¯ä»¥æ¨ªè·¨å¤šä¸ªJDBC Connectionç”Ÿå‘½å‘¨æœŸã€‚åŒæ ·ï¼Œå¯¹äºåŸºäºJTAäº‹åŠ¡çš„Hibernateè€Œè¨€ï¼ŒJTAäº‹åŠ¡æ¨ªè·¨å¤šä¸ªSessionã€‚
é”Hibernateæ”¯æŒä¸¤ç§é”æœºåˆ¶ï¼Œæ‚²è§‚é”ï¼ˆPessimistic Lockingï¼‰å’Œä¹è§‚é”ï¼ˆOptimistic Lockingï¼‰ã€‚æ‚²è§‚é”æ˜¯æŒ‡å¯¹æ•°æ®è¢«å¤–ç•Œä¿®æ”¹ä¿æŒä¿å®ˆæ€åº¦ã€‚å‡å®šä»»ä½•æ—¶åˆ»å­˜å–æ•°æ®æ—¶ï¼Œéƒ½å¯èƒ½æœ‰ä¸€ä¸ªå®¢æˆ·ä¹Ÿæ­£åœ¨å­˜å–åŒä¸€æ•°æ®ã€‚ä¸ºäº†ä¿æŒæ•°æ®è¢«æ“ä½œçš„ç§»æ¤æ€§ï¼Œäºæ˜¯å¯¹æ•°æ®é‡‡å–äº†æ•°æ®åº“å±‚æ¬¡çš„é”å®šçŠ¶æ€ï¼Œä¾é æ•°æ®åº“æä¾›çš„é”æœºåˆ¶æ¥å®ç°ã€‚
ä¹è§‚é”åˆ™ä¹è§‚åœ°è®¤ä¸ºæ•°æ®å¾ˆå°‘å‘ç”ŸåŒæ—¶å­˜å–çš„é—®é¢˜ï¼Œå› æ­¤ä¸åšæ•°æ®åº“å±‚æ¬¡ä¸Šçš„é”å®šã€‚ä¸ºäº†ç»´æŠ¤æ­£ç¡®çš„æ•°æ®ï¼Œä¹è§‚é”é‡‡ç”¨åº”ç”¨ç¨‹åºä¸Šçš„é€»è¾‘å®ç°ç‰ˆæœ¬æ§åˆ¶çš„æ–¹æ³•ã€‚
æºä»£ç åˆ†äº«Hibernateæ¦‚è¿°ã€Hibernateå…³ç³»æ˜ å°„ã€Hibernateé«˜çº§åº”ç”¨ï¼Œä¸‰ç¯‡åšå®¢ä¸­ä½¿ç”¨çš„ä»£ç ï¼Œéƒ½åœ¨ä¸‹é¢è¿™ä¸ªå·¥ç¨‹ã€‚https://github.com/voidking/hibernate.git
å‚è€ƒæ–‡æ¡£ã€ŠJava EEåŸºç¡€å®ç”¨æ•™ç¨‹ã€‹ï¼Œéƒ‘é˜¿å¥‡ä¸»ç¼–
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>hibernate</tag>
      </tags>
  </entry>
  <entry>
    <title>Hibernateå…³ç³»æ˜ å°„</title>
    <url>/dev-hibernate-orm/</url>
    <content><![CDATA[å‰è¨€Hibernateå…³ç³»æ˜ å°„çš„ä¸»è¦ä»»åŠ¡æ˜¯å®ç°æ•°æ®åº“å…³ç³»è¡¨ä¸æŒä¹…åŒ–ç±»ä¹‹é—´çš„æ˜ å°„ã€‚
ä¸€å¯¹ä¸€å…³è”ï¼ˆå…±äº«ä¸»é”®æ–¹å¼ï¼‰åœ¨æ³¨å†ŒæŸä¸ªè®ºå›ä¼šå‘˜çš„æ—¶å€™ï¼Œå¾€å¾€ä¸ä½†è¦å¡«å†™ç™»å½•è´¦æˆ·å’Œå¯†ç ï¼Œè¿˜è¦å¡«å†™å…¶ä»–çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¿™ä¸¤éƒ¨åˆ†ä¿¡æ¯é€šå¸¸ä¼šæ”¾åœ¨ä¸åŒçš„è¡¨ä¸­ã€‚å…±äº«ä¸»é”®æ–¹å¼å°±æ˜¯é™åˆ¶ä¸¤ä¸ªæ•°æ®è¡¨çš„ä¸»é”®ä½¿ç”¨ç›¸åŒçš„å€¼ï¼Œé€šè¿‡ä¸»é”®å½¢æˆä¸€å¯¹ä¸€æ˜ å°„å…³ç³»ã€‚
å»ºç«‹è¡¨å‘½ä»¤å»ºç«‹loginè¡¨å’Œdetailè¡¨ï¼š
create table login(id int4 primary key not null,username varchar(20) not null,password varchar(20) not null);create table detail(id int4 primary key auto_increment not null,truename varchar(8),email varchar(50));

ç™»é™†è¡¨å’Œè¯¦ç»†ä¿¡æ¯è¡¨å±äºå…¸å‹çš„ä¸€å¯¹ä¸€å…³è”å…³ç³»ï¼Œå¯æŒ‰å…±äº«ä¸»é”®æ–¹å¼è¿›è¡Œã€‚åœ¨Hibernateæ¦‚è¿°ä¸­å®ä¾‹çš„åŸºç¡€ä¸Šï¼Œæ¥ç€å¼€å‘ã€‚

Login.javaåœ¨åŒ…com.voidking.hibernate.modelä¸­ï¼Œæ–°å»ºç±»Loginï¼Œä»£ç å¦‚ä¸‹ï¼š
package com.voidking.hibernate.model;public class Login implements java.io.Serializable &#123;	// Fields	private Integer id;	private String username;	private String password;	private Detail detail;			// Constructors	/** default constructor */	public Login() &#123;	&#125;	/** full constructor */	public Login(String username, String password, Detail detail) &#123;		this.username = username;		this.password = password;		this.detail = detail;		&#125;	// Property accessors	public Integer getId() &#123;		return this.id;	&#125;	public void setId(Integer id) &#123;		this.id = id;	&#125;	public String getUsername() &#123;		return this.username;	&#125;	public void setUsername(String username) &#123;		this.username = username;	&#125;	public String getPassword() &#123;		return this.password;	&#125;	public void setPassword(String password) &#123;		this.password = password;	&#125;		public Detail getDetail()&#123;		return this.detail;	&#125;	public void setDetail(Detail detail)&#123;		this.detail = detail;	&#125;&#125;
Login.hbm.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;&lt;hibernate-mapping&gt;    &lt;class name=&quot;com.voidking.hibernate.model.Login&quot; table=&quot;login&quot;&gt;        &lt;id name=&quot;id&quot; type=&quot;java.lang.Integer&quot;&gt;            &lt;column name=&quot;ID&quot; /&gt;            &lt;generator class=&quot;foreign&quot;&gt;            	&lt;param name=&quot;property&quot;&gt;detail&lt;/param&gt;            &lt;/generator&gt;        &lt;/id&gt;        &lt;property name=&quot;username&quot; type=&quot;java.lang.String&quot;&gt;            &lt;column name=&quot;USERNAME&quot; length=&quot;20&quot; not-null=&quot;true&quot; /&gt;        &lt;/property&gt;        &lt;property name=&quot;password&quot; type=&quot;java.lang.String&quot;&gt;            &lt;column name=&quot;PASSWORD&quot; length=&quot;20&quot; not-null=&quot;true&quot; /&gt;        &lt;/property&gt;		&lt;!--constrained=&quot;true&quot;è¡¨æ˜å½“å‰çš„ä¸»é”®ä¸Šå­˜åœ¨ä¸€ä¸ªå¤–é”®çº¦æŸ--&gt;        &lt;one-to-one name=&quot;detail&quot; class=&quot;com.voidking.hibernate.model.Detail&quot; constrained=&quot;true&quot;&gt;&lt;/one-to-one&gt;    &lt;/class&gt;&lt;/hibernate-mapping&gt;

Detail.javapackage com.voidking.hibernate.model;public class Detail implements java.io.Serializable &#123;	// Fields	private Integer id;	private String truename;	private String email;	private Login login;			// Constructors	/** default constructor */	public Detail() &#123;	&#125;	/** full constructor */	public Detail(String truename, String email, Login login) &#123;		this.truename = truename;		this.email = email;		this.login = login;			&#125;	// Property accessors	public Integer getId() &#123;		return this.id;	&#125;	public void setId(Integer id) &#123;		this.id = id;	&#125;	public String getTruename() &#123;		return this.truename;	&#125;	public void setTruename(String truename) &#123;		this.truename = truename;	&#125;	public String getEmail() &#123;		return this.email;	&#125;	public void setEmail(String email) &#123;		this.email = email;	&#125;		public Login getLogin()&#123;		return this.login;	&#125;	public void setLogin(Login login)&#123;		this.login = login;	&#125;&#125;

Detail.hbm.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;&lt;hibernate-mapping&gt;    &lt;class name=&quot;com.voidking.hibernate.model.Detail&quot; table=&quot;detail&quot;&gt;        &lt;id name=&quot;id&quot; type=&quot;java.lang.Integer&quot;&gt;            &lt;column name=&quot;ID&quot; /&gt;            &lt;generator class=&quot;identity&quot; /&gt;        &lt;/id&gt;        &lt;property name=&quot;truename&quot; type=&quot;java.lang.String&quot;&gt;            &lt;column name=&quot;TRUENAME&quot; length=&quot;8&quot; /&gt;        &lt;/property&gt;        &lt;property name=&quot;email&quot; type=&quot;java.lang.String&quot;&gt;            &lt;column name=&quot;EMAIL&quot; length=&quot;50&quot; /&gt;        &lt;/property&gt;		&lt;!--cascade=allï¼Œè¡¨ç¤ºä¸»æ§ç±»çš„æ‰€æœ‰æ“ä½œï¼Œå¯¹å…³è”ç±»ä¹Ÿæ‰§è¡ŒåŒæ ·æ“ä½œ--&gt;        &lt;one-to-one name=&quot;login&quot; class=&quot;com.voidking.hibernate.model.Login&quot; cascade=&quot;all&quot; lazy=&quot;false&quot;&gt;&lt;/one-to-one&gt;    &lt;/class&gt;&lt;/hibernate-mapping&gt;

hibernate.cfg.xml&lt;?xml version=&#x27;1.0&#x27; encoding=&#x27;utf-8&#x27;?&gt;&lt;!DOCTYPE hibernate-configuration PUBLIC        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;     &lt;hibernate-configuration&gt;    &lt;session-factory&gt;         &lt;!-- Database connection settings --&gt;    &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;    &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost/xscj&lt;/property&gt;    &lt;property name=&quot;connection.username&quot;&gt;scott&lt;/property&gt;    &lt;property name=&quot;connection.password&quot;&gt;tiger&lt;/property&gt;             &lt;!-- JDBC connection pool (use the built-in) --&gt;    &lt;!-- &lt;property name=&quot;connection.pool_size&quot;&gt;1&lt;/property&gt; --&gt;             &lt;!-- SQL dialect --&gt;    &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;             &lt;!-- Echo all executed SQL to stdout --&gt;    &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;             &lt;!-- Enable Hibernate&#x27;s automatic session context management --&gt;    &lt;!--&lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;--&gt;             &lt;!-- Drop and re-create the database schema on startup --&gt;    &lt;property name=&quot;hbm2ddl.auto&quot;&gt;create&lt;/property&gt;             &lt;!-- Disable the second-level cache --&gt;    &lt;property name=&quot;cache.provider_class&quot;&gt;org.hibernate.cache.NoCacheProvider&lt;/property&gt;         &lt;mapping resource=&quot;com/voidking/hibernate/model/Kcb.hbm.xml&quot;/&gt;    &lt;mapping resource=&quot;com/voidking/hibernate/model/Login.hbm.xml&quot;/&gt;    &lt;mapping resource=&quot;com/voidking/hibernate/model/Detail.hbm.xml&quot;/&gt;       &lt;/session-factory&gt;&lt;/hibernate-configuration&gt;

SharePrimaryKey.javapackage com.voidking.hibernate.test;import org.hibernate.Session;import org.hibernate.SessionFactory;import org.hibernate.Transaction;import org.hibernate.cfg.Configuration;import com.voidking.hibernate.model.Detail;import com.voidking.hibernate.model.Login;public class SharePrimaryKey&#123;	public static void main(String[] args) &#123;		Configuration cfg = new Configuration();        SessionFactory sf = cfg.configure().buildSessionFactory();		Session session = sf.openSession();				// åˆ›å»ºäº‹åŠ¡å¯¹è±¡		Transaction ts=session.beginTransaction();		//å…±äº«ä¸»é”®æ–¹å¼		Detail detail=new Detail();		Login login=new Login();		login.setUsername(&quot;yanhong&quot;);		login.setPassword(&quot;123&quot;);		detail.setTruename(&quot;ä¸¥çº¢&quot;);		detail.setEmail(&quot;yanhong@126.com&quot;);		//ç›¸äº’è®¾ç½®å…³è”		login.setDetail(detail);		detail.setLogin(login);		//è¿™æ ·å®Œæˆåå°±å¯ä»¥é€šè¿‡Sessionå¯¹è±¡è°ƒç”¨session.save(detail)æ¥æŒä¹…åŒ–è¯¥å¯¹è±¡		session.save(detail);				ts.commit();				session.close();		sf.close();	&#125;&#125;

è¿è¡Œä»¥Java Applicationè¿è¡Œï¼ŒæŸ¥çœ‹æ•°æ®åº“ï¼Œå¯ä»¥å‘ç°ï¼Œæ•°æ®æˆåŠŸæ’å…¥ã€‚
å”¯ä¸€å¤–é”®æ–¹å¼å”¯ä¸€å¤–é”®æ–¹å¼å°±æ˜¯ä¸€ä¸ªè¡¨çš„å¤–é”®å’Œå¦ä¸€ä¸ªè¡¨çš„å”¯ä¸€ä¸»é”®å½¢æˆä¸€å¯¹ä¸€çš„æ˜ å°„å…³ç³»ï¼Œè¿™ç§ä¸€å¯¹ä¸€çš„å…³ç³»å…¶å®å°±æ˜¯å¤šå¯¹ä¸€å…³è”å…³ç³»çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µè€Œå·²ã€‚
å”¯ä¸€å¤–é”®çš„æƒ…å†µå¾ˆå¤šï¼Œæ¯”å¦‚ï¼Œæ¯ä¸ªäººå¯¹åº”ä¸€ä¸ªæˆ¿é—´ã€‚å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå¯ä»¥æ˜¯å‡ ä¸ªäººä½åœ¨åŒä¸€ä¸ªæˆ¿é—´é‡Œé¢ï¼Œå°±æ˜¯å¤šå¯¹ä¸€çš„å…³ç³»ã€‚ä½†æ˜¯å¦‚æœè®©ä¸€ä¸ªäººä½ä¸€ä¸ªæˆ¿é—´ï¼Œå°±å˜æˆäº†ä¸€å¯¹ä¸€çš„å…³ç³»äº†ï¼Œè¿™å°±æ˜¯å‰é¢è¯´çš„ä¸€å¯¹ä¸€å…³ç³»å…¶å®æ˜¯å¤šå¯¹ä¸€å…³ç³»çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µã€‚
åˆ›å»ºè¡¨å‘½ä»¤åˆ›å»ºè¡¨personå’Œroomï¼š
create table person(id int primary key auto_increment not null ,name varchar(20) not null,room_id int(4) );create table room(id int(4) primary key auto_increment not null,address varchar(100) not null);

Person.javapackage com.voidking.hibernate.model;public class Person implements java.io.Serializable &#123;	// Fields	private Integer id;	private String name;	private Room room;				// Constructors	/** default constructor */	public Person() &#123;	&#125;	/** minimal constructor */	public Person(String name) &#123;		this.name = name;	&#125;	/** full constructor */	public Person(String name, Room room) &#123;		this.name = name;		//this.roomId = roomId;		this.room = room;			&#125;	// Property accessors	public Integer getId() &#123;		return this.id;	&#125;	public void setId(Integer id) &#123;		this.id = id;	&#125;	public String getName() &#123;		return this.name;	&#125;	public void setName(String name) &#123;		this.name = name;	&#125;		public Room getRoom()&#123;		return this.room;	&#125;	public void setRoom(Room room)&#123;		this.room = room;	&#125;&#125;

Person.hbm.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;&lt;hibernate-mapping&gt;    &lt;class name=&quot;com.voidking.hibernate.model.Person&quot; table=&quot;Person&quot;&gt;        &lt;id name=&quot;id&quot; type=&quot;java.lang.Integer&quot;&gt;            &lt;column name=&quot;id&quot; /&gt;            &lt;generator class=&quot;native&quot; /&gt;        &lt;/id&gt;        &lt;property name=&quot;name&quot; type=&quot;java.lang.String&quot;&gt;            &lt;column name=&quot;name&quot; length=&quot;20&quot; not-null=&quot;true&quot; /&gt;        &lt;/property&gt;        &lt;many-to-one name=&quot;room&quot; class=&quot;com.voidking.hibernate.model.Room&quot;  column=&quot;room_id&quot; cascade=&quot;all&quot; unique=&quot;true&quot;&gt;&lt;/many-to-one&gt;    &lt;/class&gt;&lt;/hibernate-mapping&gt;

Room.javapackage com.voidking.hibernate.model;public class Room implements java.io.Serializable &#123;	// Fields	private Integer id;	private String address;	private Person person;	// Constructors	/** default constructor */	public Room() &#123;	&#125;	/** full constructor */	public Room(String address) &#123;		this.address = address;		//this.person = person;	&#125;	// Property accessors	public Integer getId() &#123;		return this.id;	&#125;	public void setId(Integer id) &#123;		this.id = id;	&#125;	public String getAddress() &#123;		return this.address;	&#125;	public void setAddress(String address) &#123;		this.address = address;	&#125;		public Person getPerson()&#123;		return this.person;	&#125;	public void setPerson(Person person)&#123;		this.person = person;	&#125;&#125;

Room.hbm.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;&lt;hibernate-mapping&gt;    &lt;class name=&quot;com.voidking.hibernate.model.Room&quot; table=&quot;Room&quot;&gt;        &lt;id name=&quot;id&quot; type=&quot;java.lang.Integer&quot;&gt;            &lt;column name=&quot;id&quot; /&gt;            &lt;generator class=&quot;native&quot; /&gt;        &lt;/id&gt;        &lt;property name=&quot;address&quot; type=&quot;java.lang.String&quot;&gt;            &lt;column name=&quot;address&quot; length=&quot;100&quot; not-null=&quot;true&quot; /&gt;        &lt;/property&gt;        &lt;one-to-one name=&quot;person&quot; class=&quot;com.voidking.hibernate.model.Person&quot; property-ref=&quot;room&quot;/&gt;    &lt;/class&gt;&lt;/hibernate-mapping&gt;

hibernate.cfg.xml&lt;mapping resource=&quot;com/voidking/hibernate/model/Person.hbm.xml&quot;/&gt; &lt;mapping resource=&quot;com/voidking/hibernate/model/Room.hbm.xml&quot;/&gt;  

OneForeign.javapackage com.voidking.hibernate.test;import org.hibernate.Session;import org.hibernate.SessionFactory;import org.hibernate.Transaction;import org.hibernate.cfg.Configuration;import com.voidking.hibernate.model.Person;import com.voidking.hibernate.model.Room;public class OneForeign&#123;	public static void main(String[] args) &#123;		Configuration cfg = new Configuration();        SessionFactory sf = cfg.configure().buildSessionFactory();		Session session = sf.openSession();				// åˆ›å»ºäº‹åŠ¡å¯¹è±¡		Transaction ts=session.beginTransaction();		//å”¯ä¸€å¤–é”®æ–¹å¼		Person person=new Person();		person.setName(&quot;liumin&quot;);		Room room=new Room();		room.setAddress(&quot;NJ-S1-328&quot;);		person.setRoom(room);		session.save(person);				ts.commit();				session.close();		sf.close();	&#125;&#125;

è¿è¡Œä»¥Java Applicationè¿è¡Œï¼ŒæŸ¥çœ‹æ•°æ®åº“ï¼Œå¯ä»¥å‘ç°ï¼Œæ•°æ®æˆåŠŸæ’å…¥ã€‚
å…³äºå¤–é”®åœ¨åˆ›å»ºè¡¨personæ—¶ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰è®¾ç½®room_idä¸ºå¤–é”®ï¼Œä½†æ˜¯ï¼Œå½“æˆ‘ä»¬è¿è¡Œè¿™ä¸ªé¡¹ç›®çš„ä¹‹åã€‚ä½¿ç”¨desc person;å‘½ä»¤å¯ä»¥å‘ç°ï¼Œroom_idå˜æˆäº†å¤–é”®ã€‚å¯è§ï¼ŒHibernateä¸ä»…å¯ä»¥æ”¹å˜æ•°æ®åº“ä¸­è¡¨çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥æ”¹å˜æ•°æ®åº“ä¸­è¡¨çš„å±æ€§ã€‚ç†è®ºä¸Šï¼Œä¹Ÿå¯ä»¥åˆ›å»ºåˆ é™¤è¡¨ã€‚æ›¾ç»å¼€å‘æ—¶ï¼Œä½¿ç”¨JPAç›´æ¥ç”Ÿæˆè¡¨ï¼Œæ ¹æœ¬ä¸ç”¨æ“ä½œæ•°æ®åº“ï¼Œå¾ˆæ–¹ä¾¿ã€‚
å¤šå¯¹ä¸€å•å‘å…³è”åªè¦æŠŠä¸Šä¾‹ä¸­çš„ä¸€å¯¹ä¸€çš„å”¯ä¸€å¤–é”®å…³è”å®ä¾‹ç¨å¾®ä¿®æ”¹ï¼Œå°±å¯ä»¥å˜æˆå¤šå¯¹ä¸€ã€‚
Person.hbm.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;&lt;hibernate-mapping&gt;    &lt;class name=&quot;com.voidking.hibernate.model.Person&quot; table=&quot;Person&quot;&gt;        &lt;id name=&quot;id&quot; type=&quot;java.lang.Integer&quot;&gt;            &lt;column name=&quot;id&quot; /&gt;            &lt;generator class=&quot;native&quot; /&gt;        &lt;/id&gt;        &lt;property name=&quot;name&quot; type=&quot;java.lang.String&quot;&gt;            &lt;column name=&quot;name&quot; length=&quot;20&quot; not-null=&quot;true&quot; /&gt;        &lt;/property&gt;        &lt;many-to-one name=&quot;room&quot; class=&quot;com.voidking.hibernate.model.Room&quot;  column=&quot;room_id&quot; cascade=&quot;all&quot;&gt;&lt;/many-to-one&gt;    &lt;/class&gt;&lt;/hibernate-mapping&gt;

Room.javapackage com.voidking.hibernate.model;public class Room implements java.io.Serializable &#123;	private Integer id;	private String address;	//setterå’Œgetteræ–¹æ³•&#125;

Room.hbm.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;&lt;hibernate-mapping&gt;    &lt;class name=&quot;com.voidking.hibernate.model.Room&quot; table=&quot;Room&quot;&gt;        &lt;id name=&quot;id&quot; type=&quot;java.lang.Integer&quot;&gt;            &lt;column name=&quot;id&quot; /&gt;            &lt;generator class=&quot;native&quot; /&gt;        &lt;/id&gt;        &lt;property name=&quot;address&quot; type=&quot;java.lang.String&quot;&gt;            &lt;column name=&quot;address&quot; length=&quot;100&quot; not-null=&quot;true&quot; /&gt;        &lt;/property&gt;    &lt;/class&gt;&lt;/hibernate-mapping&gt;

ManyToOne.javapackage com.voidking.hibernate.test;import org.hibernate.Session;import org.hibernate.SessionFactory;import org.hibernate.Transaction;import org.hibernate.cfg.Configuration;import com.voidking.hibernate.model.Person;import com.voidking.hibernate.model.Room;public class ManyToOne&#123;	public static void main(String[] args) &#123;		Configuration cfg = new Configuration();        SessionFactory sf = cfg.configure().buildSessionFactory();		Session session = sf.openSession();				// åˆ›å»ºäº‹åŠ¡å¯¹è±¡		Transaction ts=session.beginTransaction();		Room room=new Room();		room.setAddress(&quot;NJ-S1-328&quot;);		Person person=new Person();		person.setName(&quot;liumin&quot;);				person.setRoom(room);		session.save(person);				ts.commit();				session.close();		sf.close();	&#125;&#125;

ä¸€å¯¹å¤šåŒå‘å…³è”ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¤šå¯¹ä¸€å•å‘å…³è”æ˜¯ä»å¤šæ§åˆ¶ä¸€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»å¤šå¯ä»¥çŸ¥é“ä¸€ï¼Œä½†ä»ä¸€ä¸çŸ¥é“å¤šã€‚å¦‚æœä¸€ä¹ŸåªçŸ¥é“å¤šï¼Œé‚£ä¹ˆå°±å˜æˆäº†åŒå‘ä¸€å¯¹å¤šï¼ˆæˆ–å¤šå¯¹ä¸€ï¼‰å…³è”ã€‚
Room.javapackage com.voidking.hibernate.model;import java.util.HashSet;import java.util.Set;public class Room implements java.io.Serializable &#123;	// Fields	private Integer id;	private String address;		private Set person = new HashSet();	// Constructors	/** default constructor */	public Room() &#123;	&#125;	/** full constructor */	public Room(String address) &#123;		this.address = address;		//this.person = person;	&#125;	// Property accessors	public Integer getId() &#123;		return this.id;	&#125;	public void setId(Integer id) &#123;		this.id = id;	&#125;	public String getAddress() &#123;		return this.address;	&#125;	public void setAddress(String address) &#123;		this.address = address;	&#125;	public Set getPerson() &#123;		return person;	&#125;	public void setPerson(Set person) &#123;		this.person = person;	&#125;&#125;

Room.hbm.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;&lt;hibernate-mapping&gt;    &lt;class name=&quot;com.voidking.hibernate.model.Room&quot; table=&quot;Room&quot;&gt;        &lt;id name=&quot;id&quot; type=&quot;java.lang.Integer&quot;&gt;            &lt;column name=&quot;id&quot; /&gt;            &lt;generator class=&quot;native&quot; /&gt;        &lt;/id&gt;        &lt;property name=&quot;address&quot; type=&quot;java.lang.String&quot;&gt;            &lt;column name=&quot;address&quot; length=&quot;100&quot; not-null=&quot;true&quot; /&gt;        &lt;/property&gt;		&lt;set name=&quot;person&quot; inverse=&quot;false&quot; cascade=&quot;all&quot;&gt;			&lt;key column=&quot;room_id&quot;&gt;&lt;/key&gt;			&lt;one-to-many class=&quot;com.voidking.hibernate.model.Person&quot;/&gt;		&lt;/set&gt;    &lt;/class&gt;&lt;/hibernate-mapping&gt;

cascadeå–å€¼
allï¼šè¡¨ç¤ºæ‰€æœ‰æ“ä½œåœ¨å…³è”å±‚çº§ä¸Šè¿›è¡Œè¿é”æ“ä½œã€‚
save-updateï¼šè¡¨ç¤ºåªæœ‰saveå’Œupdateæ“ä½œè¿›è¡Œè¿é”æ“ä½œã€‚
deleteï¼šè¡¨ç¤ºåªæœ‰deleteæ“ä½œè¿›è¡Œè¿é”æ“ä½œã€‚
all-delete-orphanï¼šåœ¨åˆ é™¤å½“å‰æŒä¹…åŒ–å¯¹è±¡æ—¶ï¼Œå®ƒç›¸å½“äºdeleteï¼›åœ¨ä¿å­˜æˆ–æ›´æ–°å½“å‰æŒä¹…åŒ–å¯¹è±¡æ—¶ï¼Œå®ƒç›¸å½“äºsave-updateã€‚å¦å¤–å®ƒè¿˜å¯ä»¥åˆ é™¤ä¸å½“å‰æŒä¹…åŒ–å¯¹è±¡æ–­å¼€å…³è”å…³ç³»çš„å…¶ä»–æŒä¹…åŒ–å¯¹è±¡ã€‚

OneToMany.javapackage com.voidking.hibernate.test;import org.hibernate.Session;import org.hibernate.SessionFactory;import org.hibernate.Transaction;import org.hibernate.cfg.Configuration;import com.voidking.hibernate.model.Person;import com.voidking.hibernate.model.Room;public class OneToMany&#123;	public static void main(String[] args) &#123;		Configuration cfg = new Configuration();        SessionFactory sf = cfg.configure().buildSessionFactory();		Session session = sf.openSession();				// åˆ›å»ºäº‹åŠ¡å¯¹è±¡		Transaction ts=session.beginTransaction();		Person person1=new Person(); 		Person person2=new Person();		Room room=new Room();		room.setAddress(&quot;NJ-S1-328&quot;);		person1.setName(&quot;ææ–¹æ–¹&quot;);		person2.setName(&quot;ç‹è‰³&quot;);		person1.setRoom(room);		person2.setRoom(room);		//è¿™æ ·å®Œæˆåå°±å¯ä»¥é€šè¿‡Sessionå¯¹è±¡		//è°ƒç”¨session.save(person1)å’Œsession.save(person)		//ä¼šè‡ªåŠ¨ä¿å­˜room		session.save(person1);		session.save(person2);				ts.commit();				session.close();		sf.close();	&#125;&#125;

å¤šå¯¹å¤šå•å‘å…³è”å­¦ç”Ÿå’Œè¯¾ç¨‹å°±æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ï¼Œä¸€ä¸ªå­¦ç”Ÿå¯ä»¥é€‰æ‹©å¤šé—¨è¯¾ç¨‹ï¼Œè€Œä¸€é—¨è¯¾ç¨‹åˆå¯ä»¥è¢«å¤šä¸ªå­¦ç”Ÿé€‰æ‹©ã€‚å¤šå¯¹å¤šå…³ç³»åœ¨å…³ç³»æ•°æ®åº“ä¸­ä¸èƒ½ç›´æ¥è¡¨ç°ï¼Œè¿˜å¿…é¡»ä¾èµ–ä¸€å¼ è¿æ¥è¡¨ã€‚ç”±äºæ˜¯å•å‘çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€æ–¹å¯ä»¥çŸ¥é“å¦ä¸€æ–¹ï¼Œåä¹‹ä¸è¡Œã€‚è¿™é‡Œä»¥ä»å­¦ç”ŸçŸ¥é“é€‰æ‹©äº†å“ªäº›è¯¾ç¨‹ä¸ºä¾‹å®ç°å¤šå¯¹å¤šå•å‘å…³è”ã€‚
åˆ›å»ºè¡¨å‘½ä»¤create table student(id int primary key auto_increment not null ,snumber varchar(10) not null,sname varchar(10),sage int);create table course(id int primary key auto_increment not null,cnumber varchar(10) not null,cname varchar(20));create table stu_cour(sid int not null,cid int not null,primary key (sid,cid));

Student.javapackage com.voidking.hibernate.model;import java.util.HashSet;import java.util.Set;public class Student implements java.io.Serializable &#123;	// Fields	private Integer id;	private String snumber;	private String sname;	private Integer sage;	private Set courses = new HashSet();	// Constructors	/** default constructor */	public Student() &#123;	&#125;	/** minimal constructor */	public Student(String snumber) &#123;		this.snumber = snumber;	&#125;	/** full constructor */	public Student(String snumber, String sname, Integer sage) &#123;		this.snumber = snumber;		this.sname = sname;		this.sage = sage;	&#125;	// Property accessors	public Integer getId() &#123;		return this.id;	&#125;	public void setId(Integer id) &#123;		this.id = id;	&#125;	public String getSnumber() &#123;		return this.snumber;	&#125;	public void setSnumber(String snumber) &#123;		this.snumber = snumber;	&#125;	public String getSname() &#123;		return this.sname;	&#125;	public void setSname(String sname) &#123;		this.sname = sname;	&#125;	public Integer getSage() &#123;		return this.sage;	&#125;	public void setSage(Integer sage) &#123;		this.sage = sage;	&#125;		public Set getCourses()&#123;		return courses;	&#125;	public void setCourses(Set courses)&#123;		this.courses = courses;	&#125;&#125;

Student.hbm.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;&lt;hibernate-mapping&gt;    &lt;class name=&quot;com.voidking.hibernate.model.Student&quot; table=&quot;student&quot;&gt;        &lt;id name=&quot;id&quot; type=&quot;java.lang.Integer&quot;&gt;            &lt;column name=&quot;ID&quot; /&gt;            &lt;generator class=&quot;identity&quot; /&gt;        &lt;/id&gt;        &lt;property name=&quot;snumber&quot; type=&quot;java.lang.String&quot;&gt;            &lt;column name=&quot;SNUMBER&quot; length=&quot;10&quot; not-null=&quot;true&quot; /&gt;        &lt;/property&gt;        &lt;property name=&quot;sname&quot; type=&quot;java.lang.String&quot;&gt;            &lt;column name=&quot;SNAME&quot; length=&quot;10&quot; /&gt;        &lt;/property&gt;        &lt;property name=&quot;sage&quot; type=&quot;java.lang.Integer&quot;&gt;            &lt;column name=&quot;SAGE&quot; /&gt;        &lt;/property&gt;        &lt;set name=&quot;courses&quot; table=&quot;stu_cour&quot; lazy=&quot;true&quot; cascade=&quot;all&quot;&gt;        	&lt;key column=&quot;SID&quot;&gt;&lt;/key&gt;        	&lt;many-to-many class=&quot;com.voidking.hibernate.model.Course&quot; column=&quot;CID&quot;/&gt;        &lt;/set&gt;    &lt;/class&gt;&lt;/hibernate-mapping&gt;

Course.javapackage com.voidking.hibernate.model;public class Course implements java.io.Serializable &#123;	// Fields	private Integer id;	private String cnumber;	private String cname;	// Constructors	/** default constructor */	public Course() &#123;	&#125;	/** minimal constructor */	public Course(String cnumber) &#123;		this.cnumber = cnumber;	&#125;	/** full constructor */	public Course(String cnumber, String cname) &#123;		this.cnumber = cnumber;		this.cname = cname;	&#125;	// Property accessors	public Integer getId() &#123;		return this.id;	&#125;	public void setId(Integer id) &#123;		this.id = id;	&#125;	public String getCnumber() &#123;		return this.cnumber;	&#125;	public void setCnumber(String cnumber) &#123;		this.cnumber = cnumber;	&#125;	public String getCname() &#123;		return this.cname;	&#125;	public void setCname(String cname) &#123;		this.cname = cname;	&#125;&#125;
Course.hbm.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;&lt;hibernate-mapping&gt;    &lt;class name=&quot;com.voidking.hibernate.model.Course&quot; table=&quot;course&quot;&gt;        &lt;id name=&quot;id&quot; type=&quot;java.lang.Integer&quot;&gt;            &lt;column name=&quot;ID&quot; /&gt;            &lt;generator class=&quot;identity&quot; /&gt;        &lt;/id&gt;        &lt;property name=&quot;cnumber&quot; type=&quot;java.lang.String&quot;&gt;            &lt;column name=&quot;CNUMBER&quot; length=&quot;10&quot; not-null=&quot;true&quot; /&gt;        &lt;/property&gt;        &lt;property name=&quot;cname&quot; type=&quot;java.lang.String&quot;&gt;            &lt;column name=&quot;CNAME&quot; length=&quot;20&quot; /&gt;        &lt;/property&gt;    &lt;/class&gt;&lt;/hibernate-mapping&gt;

hibernate.cfg.xml&lt;mapping resource=&quot;com/voidking/hibernate/model/Student.hbm.xml&quot;/&gt; &lt;mapping resource=&quot;com/voidking/hibernate/model/Course.hbm.xml&quot;/&gt;   

ManyToManySingle.javapackage com.voidking.hibernate.test;import java.util.HashSet;import java.util.Set;import org.hibernate.Session;import org.hibernate.SessionFactory;import org.hibernate.Transaction;import org.hibernate.cfg.Configuration;import com.voidking.hibernate.model.Course;import com.voidking.hibernate.model.Student;public class ManyToManySingle&#123;	public static void main(String[] args) &#123;		Configuration cfg = new Configuration();        SessionFactory sf = cfg.configure().buildSessionFactory();		Session session = sf.openSession();				// åˆ›å»ºäº‹åŠ¡å¯¹è±¡		Transaction ts=session.beginTransaction();		//å¤šå¯¹å¤šå•å‘å…³è”		Course cour1=new Course();		Course cour2=new Course();		Course cour3=new Course();		cour1.setCnumber(&quot;101&quot;);		cour1.setCname(&quot;è®¡ç®—æœºåŸºç¡€&quot;);		cour2.setCnumber(&quot;102&quot;);		cour2.setCname(&quot;æ•°æ®åº“åŸç†&quot;);		cour3.setCnumber(&quot;103&quot;);		cour3.setCname(&quot;è®¡ç®—æœºåŸç†&quot;);		Set courses=new HashSet();		courses.add(cour1);		courses.add(cour2);		courses.add(cour3);		Student stu=new Student();		stu.setSnumber(&quot;081101&quot;);		stu.setSname(&quot;ææ–¹æ–¹&quot;);		stu.setSage(21);		stu.setCourses(courses);		session.save(stu);		ts.commit();				session.close();		sf.close();	&#125;&#125;

å¤šå¯¹å¤šåŒå‘å…³è”å­¦ä¼šå¤šå¯¹å¤šå•å‘å…³è”åï¼Œåªè¦åŒæ—¶å®ç°ä¸¤ä¸ªäº’é€†çš„å¤šå¯¹å¤šå•å‘å…³è”ä¾¿å¯è½»è€Œæ˜“ä¸¾åœ°å®ç°å¤šå¯¹å¤šåŒå‘å…³è”ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­åªè¦ä¿®æ”¹è¯¾ç¨‹çš„ä»£ç å°±å¯ä»¥äº†ã€‚
Course.javapackage com.voidking.hibernate.model;import java.util.HashSet;import java.util.Set;public class Course implements java.io.Serializable &#123;	// Fields	private Integer id;	private String cnumber;	private String cname;	private Set stus = new HashSet();	// Constructors	/** default constructor */	public Course() &#123;	&#125;	/** minimal constructor */	public Course(String cnumber) &#123;		this.cnumber = cnumber;	&#125;	/** full constructor */	public Course(String cnumber, String cname) &#123;		this.cnumber = cnumber;		this.cname = cname;	&#125;	// Property accessors	public Integer getId() &#123;		return this.id;	&#125;	public void setId(Integer id) &#123;		this.id = id;	&#125;	public String getCnumber() &#123;		return this.cnumber;	&#125;	public void setCnumber(String cnumber) &#123;		this.cnumber = cnumber;	&#125;	public String getCname() &#123;		return this.cname;	&#125;	public void setCname(String cname) &#123;		this.cname = cname;	&#125;	public Set getStus() &#123;		return stus;	&#125;	public void setStus(Set stus) &#123;		this.stus = stus;	&#125;&#125;

Course.hbm.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;&lt;hibernate-mapping&gt;    &lt;class name=&quot;com.voidking.hibernate.model.Course&quot; table=&quot;course&quot;&gt;        &lt;id name=&quot;id&quot; type=&quot;java.lang.Integer&quot;&gt;            &lt;column name=&quot;ID&quot; /&gt;            &lt;generator class=&quot;identity&quot; /&gt;        &lt;/id&gt;        &lt;property name=&quot;cnumber&quot; type=&quot;java.lang.String&quot;&gt;            &lt;column name=&quot;CNUMBER&quot; length=&quot;10&quot; not-null=&quot;true&quot; /&gt;        &lt;/property&gt;        &lt;property name=&quot;cname&quot; type=&quot;java.lang.String&quot;&gt;            &lt;column name=&quot;CNAME&quot; length=&quot;20&quot; /&gt;        &lt;/property&gt;        &lt;set name=&quot;stus&quot; table=&quot;stu_cours&quot; lazy=&quot;true&quot; cascade=&quot;all&quot;&gt;        	&lt;key column=&quot;cid&quot;&gt;&lt;/key&gt;        	&lt;many-to-many class=&quot;com.voidking.hibernate.model.Student&quot; column=&quot;sid&quot;&gt;&lt;/many-to-many&gt;        &lt;/set&gt;    &lt;/class&gt;&lt;/hibernate-mapping&gt;

ManyToManyDouble.javapackage com.voidking.hibernate.test;import java.util.HashSet;import java.util.Set;import org.hibernate.Session;import org.hibernate.SessionFactory;import org.hibernate.Transaction;import org.hibernate.cfg.Configuration;import com.voidking.hibernate.model.Course;import com.voidking.hibernate.model.Student;public class ManyToManyDouble&#123;	public static void main(String[] args) &#123;		Configuration cfg = new Configuration();        SessionFactory sf = cfg.configure().buildSessionFactory();		Session session = sf.openSession();				// åˆ›å»ºäº‹åŠ¡å¯¹è±¡		Transaction ts=session.beginTransaction();		//å¤šå¯¹å¤šå•å‘å…³è”		Course cour1=new Course();		Course cour2=new Course();		Course cour3=new Course();		cour1.setCnumber(&quot;101&quot;);		cour1.setCname(&quot;è®¡ç®—æœºåŸºç¡€&quot;);		cour2.setCnumber(&quot;102&quot;);		cour2.setCname(&quot;æ•°æ®åº“åŸç†&quot;);		cour3.setCnumber(&quot;103&quot;);		cour3.setCname(&quot;è®¡ç®—æœºåŸç†&quot;);		Set courses=new HashSet();		courses.add(cour1);		courses.add(cour2);		courses.add(cour3);		Student stu=new Student();		stu.setSnumber(&quot;081101&quot;);		stu.setSname(&quot;ææ–¹æ–¹&quot;);		stu.setSage(21);		stu.setCourses(courses);		session.save(stu);		ts.commit();				session.close();		sf.close();	&#125;&#125;


å°ç»“æˆ‘é ï¼ŒHibernateå…³ç³»æ˜ å°„å¥½å¤æ‚ï¼æ ¹æœ¬æ²¡æœ‰æ˜æ˜¾è§„å¾‹ï¼Œèƒ½ä¸èƒ½æ„‰å¿«åœ°ç©è€äº†ï¼
å‚è€ƒæ–‡æ¡£ã€ŠJava EEåŸºç¡€å®ç”¨æ•™ç¨‹ã€‹ï¼Œéƒ‘é˜¿å¥‡ä¸»ç¼–
åˆè¯†Hibernateâ€”â€”å…³ç³»æ˜ å°„ï¼šhttp://blog.csdn.net/laner0515/article/details/12905711
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>hibernate</tag>
      </tags>
  </entry>
  <entry>
    <title>Hibernateæ¦‚è¿°</title>
    <url>/dev-hibernate-start/</url>
    <content><![CDATA[åè¯è§£é‡ŠHibernateæ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„å¯¹è±¡å…³ç³»æ˜ å°„æ¡†æ¶ï¼Œå®ƒå¯¹JDBCè¿›è¡Œäº†éå¸¸è½»é‡çº§çš„å¯¹è±¡å°è£…ï¼ˆæœªå®Œå…¨å°è£…ï¼‰ï¼Œä½¿å¾—Javaç¨‹åºå‘˜å¯ä»¥éšå¿ƒæ‰€æ¬²çš„ä½¿ç”¨å¯¹è±¡ç¼–ç¨‹æ€ç»´æ¥æ“çºµæ•°æ®åº“ã€‚ 
Hibernateå¯ä»¥åº”ç”¨åœ¨ä»»ä½•ä½¿ç”¨JDBCçš„åœºåˆï¼Œæ—¢å¯ä»¥åœ¨Javaçš„å®¢æˆ·ç«¯ç¨‹åºä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨Servlet/JSPçš„Webåº”ç”¨ä¸­ä½¿ç”¨ï¼Œæœ€å…·é©å‘½æ„ä¹‰çš„æ˜¯ï¼ŒHibernateå¯ä»¥åœ¨åº”ç”¨EJBçš„J2EEæ¶æ„ä¸­å–ä»£CMPï¼Œå®Œæˆæ•°æ®æŒä¹…åŒ–çš„é‡ä»»ã€‚
å¯¹ç›®å‰çš„JavaEEä¿¡æ¯åŒ–ç³»ç»Ÿè€Œè¨€ï¼Œé€šå¸¸é‡‡ç”¨é¢å‘å¯¹è±¡åˆ†æå’Œé¢å‘å¯¹è±¡è®¾è®¡çš„è¿‡ç¨‹ã€‚ç³»ç»Ÿä»éœ€æ±‚åˆ†æåˆ°ç³»ç»Ÿè®¾è®¡éƒ½æ˜¯æŒ‰é¢å‘å¯¹è±¡æ–¹å¼è¿›è¡Œã€‚ä½†æ˜¯åˆ°è¯¦ç»†è®¾è®¡é˜¶æ®µï¼Œç”±äºæ•°æ®æŒä¹…åŒ–éœ€è¦ä¿å­˜åˆ°å…³ç³»æ•°æ®åº“ï¼Œä¸å¾—ä¸è‡ªåº•å‘ä¸Šä¿®æ”¹è®¾è®¡æ–¹æ¡ˆï¼Œåˆå›åˆ°äº†æŒ‰ç…§è¿‡ç¨‹è¿›è¡Œç¼–ç¨‹çš„è€è·¯ä¸Šæ¥ï¼Œè¿™æ˜¯éå¸¸ä»¤äººæ²®ä¸§çš„ã€‚
ä½†äººä»¬çš„æ™ºæ…§æ˜¯æ— ç©·çš„ï¼Œé‡åˆ°é—®é¢˜æ€»ä¼šæƒ³åŠæ³•è§£å†³ï¼Œè€Œä¸æ˜¯ä¸ä¹‹å¦¥åæˆ–ç»•é“è€Œèµ°ã€‚Hibernateçš„é—®ä¸–è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼ŒHibernateæ˜¯ä¸€ä¸ªé¢å‘Javaç¯å¢ƒçš„å¯¹è±¡/å…³ç³»æ˜ å°„å·¥å…·ï¼Œå®ƒå¯å°†å¯¹è±¡æ¨¡å‹è¡¨ç¤ºçš„å¯¹è±¡æ˜ å°„åˆ°åŸºäºSQLçš„å…³ç³»æ•°æ®æ¨¡å‹ä¸­ã€‚è¿™æ ·å°±ä¸ç”¨å†ä¸ºæ€æ ·ç”¨é¢å‘å¯¹è±¡çš„æ–¹æ³•è¿›è¡Œæ•°æ®æŒä¹…åŒ–è€Œå¤§ä¼¤è„‘ç­‹äº†ã€‚

å®˜ç½‘http://hibernate.org
ä¸‹è½½http://sourceforge.net/projects/hibernate/files/hibernate3/
å¯¼å…¥åŒ…è§£å‹ç¼©hibernate-distribution-*.zipã€‚å¯¼å…¥hibernate-distribution-*GA/lib/requiredç›®å½•ä¸­çš„jaråŒ…ã€‚hibernate3.jar       æ ¸å¿ƒç±»åº“antlr-2.7.6.jar      ä»£ç æ‰«æå™¨,ç”¨æ¥ç¿»è¯‘HQLè¯­å¥commons-collections-3.1.jar    Apache CommonsåŒ…ä¸­çš„ä¸€ä¸ªï¼ŒåŒ…å«äº†ä¸€äº›Apacheå¼€å‘çš„é›†åˆç±»ï¼ŒåŠŸèƒ½æ¯”java.util.*å¼ºå¤§dom4j-1.6.1.jar      ä¸€ä¸ªJavaçš„XML APIï¼Œç±»ä¼¼äºjdomï¼Œç”¨æ¥è¯»å†™XMLæ–‡ä»¶çš„javassist-3.4.GA.jar    Javassist å­—èŠ‚ç è§£é‡Šå™¨jta-1.1.jar     æ ‡å‡†çš„JTA APIã€‚slf4j-api-1.5.2.jarslf4j-nop-1.5.2.jar 
ORMå¯¹è±¡/å…³ç³»æ˜ å°„ORMï¼ˆObject-Relation Mappingï¼‰æ˜¯ç”¨äºå°†å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„å…³ç³»å¯¹åº”åˆ°æ•°æ®åº“è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»ä¸€ç§æ¨¡å¼ã€‚
ç®€å•çš„è¯´ï¼ŒORMæ˜¯é€šè¿‡ä½¿ç”¨æè¿°å¯¹è±¡å’Œæ•°æ®åº“ä¹‹é—´æ˜ å°„çš„å…ƒæ•°æ®ï¼Œå°†Javaç¨‹åºä¸­çš„å¯¹è±¡è‡ªåŠ¨æŒä¹…åŒ–åˆ°å…³ç³»æ•°æ®åº“ä¸­ã€‚å¯¹è±¡å’Œå…³ç³»æ•°æ®æ˜¯ä¸šåŠ¡å®ç°çš„ä¸¤ç§è¡¨ç°å½¢å¼ï¼Œä¸šåŠ¡å®ä½“åœ¨å†…å­˜ä¸­è¡¨ç°ä¸ºå¯¹è±¡ï¼Œåœ¨æ•°æ®åº“ä¸­è¡¨ç°ä¸ºå…³ç³»æ•°æ®ã€‚å†…å­˜ä¸­çš„å¯¹è±¡ä¹‹é—´å­˜åœ¨ç€å…³è”å’Œç»§æ‰¿å…³ç³»ã€‚è€Œåœ¨æ•°æ®åº“ä¸­ï¼Œå…³ç³»æ•°æ®æ— æ³•ç›´æ¥è¡¨è¾¾å¤šå¯¹å¤šå…³è”å’Œç»§æ‰¿å…³ç³»ã€‚å› æ­¤ï¼ŒORMç³»ç»Ÿä¸€èˆ¬ä»¥ä¸­é—´ä»¶çš„å½¢å¼å­˜åœ¨ï¼Œä¸»è¦å®ç°ç¨‹åºå¯¹è±¡åˆ°å…³ç³»æ•°æ®åº“æ•°æ®çš„æ˜ å°„ã€‚
ä¸€èˆ¬çš„ORMåŒ…æ‹¬å››ä¸ªéƒ¨åˆ†ï¼šå¯¹æŒä¹…ç±»å¯¹è±¡è¿›è¡ŒCRUDæ“ä½œçš„APIã€ç”¨æ¥è§„å®šç±»å’Œç±»å±æ€§ç›¸å…³æŸ¥è¯¢çš„è¯­è¨€æˆ–APIã€è§„å®šmapping metadataçš„å·¥å…·ï¼Œä»¥åŠå¯ä»¥è®©ORMå®ç°åŒäº‹åŠ¡å¯¹è±¡ä¸€èµ·è¿›è¡Œdirty checkingã€lazy association fetchingå’Œå…¶ä»–ä¼˜åŒ–æ“ä½œçš„æŠ€æœ¯ã€‚
ç›®å‰ï¼Œå¾ˆå¤šå‚å•†å’Œå¼€æºç¤¾åŒºéƒ½æä¾›äº†æŒä¹…å±‚æ¡†æ¶çš„å®ç°ï¼Œä½†å…¶ä¸­Hibernateçš„è½»é‡çº§ORMæ¨¡å‹é€æ­¥ç¡®ç«‹äº†åœ¨Java ORMæ¶æ„ä¸­çš„é¢†å¯¼åœ°ä½ã€‚
Hibernateä½“ç³»ç»“æ„Hibernateä½œä¸ºæ¨¡å‹å±‚/æ•°æ®è®¿é—®å±‚ã€‚å®ƒé€šè¿‡é…ç½®æ–‡ä»¶ï¼ˆhibernate.cfg.xmlæˆ–hibernate.propertiesï¼‰å’Œæ˜ å°„æ–‡ä»¶ï¼ˆ*.hbm.xmlï¼‰æŠŠJavaå¯¹è±¡æˆ–æŒä¹…åŒ–å¯¹è±¡ï¼ˆPersistent Objectï¼ŒPOï¼‰æ˜ å°„åˆ°æ•°æ®åº“ä¸­çš„æ•°æ®è¡¨ï¼Œç„¶åé€šè¿‡æ“ä½œPOï¼Œå¯¹æ•°æ®åº“ä¸­çš„è¡¨è¿›è¡Œå„ç§æ“ä½œã€‚å®é™…ä¸Šï¼ŒPOç”±POJOå’Œæ˜ å°„æ–‡ä»¶ç”Ÿæˆã€‚
POJOã€JavaBeanå’ŒPOPOJO = pure old java object or plain ordinary java object or what everã€‚POJOä¸­æ–‡å¯ä»¥ç¿»è¯‘æˆï¼šæ™®é€šJavaç±»ï¼Œå…·æœ‰ä¸€éƒ¨åˆ†get/setæ–¹æ³•çš„é‚£ç§ç±»å°±å¯ä»¥ç§°ä½œPOJOã€‚
JavaBeanåˆ™æ¯”POJOå¤æ‚å¾ˆå¤šï¼ŒJavaBeanæ˜¯ä¸€ç§ç»„ä»¶æŠ€æœ¯ï¼Œå°±å¥½åƒä½ åšäº†ä¸€ä¸ªæ‰³å­ï¼Œè€Œè¿™ä¸ªæ‰³å­ä¼šåœ¨å¾ˆå¤šåœ°æ–¹è¢«æ‹¿å»ç”¨ï¼Œè¿™ä¸ªæ‰³å­ä¹Ÿæä¾›å¤šç§åŠŸèƒ½(ä½ å¯ä»¥æ‹¿è¿™ä¸ªæ‰³å­æ‰³ã€é”¤ã€æ’¬ç­‰ç­‰)ï¼Œè€Œè¿™ä¸ªæ‰³å­å°±æ˜¯ä¸€ä¸ªç»„ä»¶ã€‚å¾ˆæ˜¾ç„¶POJOä¹Ÿæ˜¯JavaBeançš„ä¸€ç§ã€‚ä¸€èˆ¬åœ¨webåº”ç”¨ç¨‹åºä¸­å»ºç«‹ä¸€ä¸ªæ•°æ®åº“çš„æ˜ å°„å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬åªèƒ½ç§°å®ƒä¸ºPOJOã€‚JavaBeanå¿…é¡»æ»¡è¶³å¦‚ä¸‹è§„èŒƒï¼š1ï¼‰å¿…é¡»æœ‰ä¸€ä¸ªé›¶å‚æ•°çš„é»˜è®¤æ„é€ å‡½æ•°2ï¼‰å¿…é¡»æœ‰getå’Œsetæ–¹æ³•ï¼Œç±»çš„å­—æ®µå¿…é¡»é€šè¿‡get/setæ–¹æ³•æ¥è®¿é—®ã€‚ 
PO = persisent object æŒä¹…å¯¹è±¡ã€‚å®é™…ä¸Šï¼ŒPOå¿…é¡»å¯¹åº”æ•°æ®åº“ä¸­çš„entityï¼Œæ‰€ä»¥å’ŒPOJOæœ‰æ‰€åŒºåˆ«ã€‚æ¯”å¦‚è¯´POJOæ˜¯ç”±newåˆ›å»ºï¼Œç”±GCå›æ”¶ã€‚ä½†æ˜¯POæ˜¯æ•°æ®åº“insertåˆ›å»ºï¼Œç”±æ•°æ®åº“deleteåˆ é™¤çš„ã€‚åŸºæœ¬ä¸ŠæŒä¹…å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå’Œæ•°æ®åº“å¯†åˆ‡ç›¸å…³ã€‚å¦å¤–æŒä¹…å¯¹è±¡å¾€å¾€åªèƒ½å­˜åœ¨ä¸€ä¸ªæ•°æ®åº“Connectionä¹‹ä¸­ï¼ŒConnnectionå…³é—­ä»¥åï¼ŒæŒä¹…å¯¹è±¡å°±ä¸å­˜åœ¨äº†ï¼Œè€ŒPOJOåªè¦ä¸è¢«GCå›æ”¶ï¼Œæ€»æ˜¯å­˜åœ¨çš„ã€‚ç”±äºå­˜åœ¨è¯¸å¤šå·®åˆ«ï¼Œå› æ­¤POåœ¨ä»£ç ä¸Šè‚¯å®šå’ŒPOJOä¸åŒï¼Œèµ·ç POç›¸å¯¹äºPOJOä¼šå¢åŠ ä¸€äº›ç”¨æ¥ç®¡ç†æ•°æ®åº“entityçŠ¶æ€çš„å±æ€§å’Œæ–¹æ³•ã€‚è€ŒORMè¿½æ±‚çš„ç›®æ ‡å°±æ˜¯è¦POåœ¨ä½¿ç”¨ä¸Šå°½é‡å’ŒPOJOä¸€è‡´ï¼Œå¯¹äºç¨‹åºå‘˜æ¥è¯´ï¼Œä»–ä»¬å¯ä»¥æŠŠPOå½“åšPOJOæ¥ç”¨ï¼Œè€Œæ„Ÿè§‰ä¸åˆ°POçš„å­˜åœ¨ã€‚æ‰€ä»¥æˆ‘ä»¬é¡¹ç›®ä¸­çš„entityå¯ä»¥çœ‹ä½œæ˜¯POJOï¼Œå…¶å®Hibernateæœ€åä½œæŒä¹…ï¼Œæ˜¯æŠŠPOæŒä¹…åŒ–çš„ï¼Œä¸»è¦çš„æœºåˆ¶æ˜¯ï¼š1ã€ç¼–å†™POJO2ã€ç¼–è¯‘POJO3ã€ç›´æ¥è¿è¡Œï¼Œåœ¨è¿è¡ŒæœŸï¼Œç”±Hibernateçš„CGLIBåŠ¨æ€æŠŠPOJOè½¬æ¢ä¸ºPOã€‚
åº”ç”¨å®ä¾‹Hibernateçš„é…ç½®æ–‡ä»¶æ˜¯å®ä½“å¯¹è±¡ä¸æ•°æ®åº“å…³ç³»è¡¨ä¹‹é—´ç›¸äº’è½¬æ¢çš„é‡è¦ä¾æ®ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œä¸€ä¸ªæ˜ å°„é…ç½®æ–‡ä»¶å¯¹åº”ç€æ•°æ®åº“ä¸­ä¸€ä¸ªå…³ç³»è¡¨ï¼Œå…³ç³»è¡¨ä¹‹é—´çš„å…³ç³»ä¹Ÿåœ¨æ˜ å°„æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ã€‚
å»ºç«‹æ•°æ®åº“å’Œè¡¨ä½¿ç”¨MySQLï¼Œscottç”¨æˆ·ã€‚åœ¨xscjæ•°æ®åº“ä¸­å»ºç«‹kcbï¼Œè¡¨ç»“æ„å¦‚ä¸‹ï¼š



é¡¹ç›®å
åˆ—å
æ•°æ®ç±»å‹
å¯ç©º
é»˜è®¤å€¼
è¯´æ˜



è¯¾ç¨‹å·
KCH
å®šé•¿å­—ç¬¦å‹ï¼ˆchar3ï¼‰
Ã—
æ— 
ä¸»é”®


è¯¾ç¨‹å
KCM
ä¸å®šé•¿å­—ç¬¦ä¸²å‹ï¼ˆvarchar12ï¼‰
âˆš
æ— 



å¼€å­¦å­¦æœŸ
KXXQ
æ•´æ•°å‹ï¼ˆsmallintï¼‰
âˆš
æ— 
åªèƒ½ä¸º1~8


å­¦æ—¶
XS
æ•´æ•°å‹ï¼ˆintï¼‰
âˆš
0



å­¦åˆ†
XF
æ•´æ•°å‹ï¼ˆintï¼‰
âˆš
0



create table kcb(kch char(3) not null primary key,kcm varchar(12),kxxq smallint check(kxxq&gt;=1 and kxxq&lt;=8),xs int default 0,xf int default 0);

æ–°å»ºé¡¹ç›®æ–°å»ºDynamic Web Projectï¼Œå‘½åä¸ºhibernateã€‚
æ·»åŠ hibernateå¼€å‘èƒ½åŠ›å³å‡»é¡¹ç›®åï¼ŒPropertiesï¼ŒJava Build Pathï¼ŒLibrariesï¼ŒAdd Libraryâ€¦ï¼ŒUser Libraryï¼ŒNextï¼ŒUser Librariesâ€¦ï¼ŒNewâ€¦ï¼Œè¾“å…¥â€œhibernateâ€ï¼ŒOKï¼ŒAdd External JARsâ€¦ï¼Œé€‰ä¸­éœ€è¦çš„jaræ–‡ä»¶ï¼Œæ‰“å¼€ï¼ŒOKã€‚
POJOå¯¹è±¡å’Œæ˜ å°„æ–‡ä»¶æ–°å»ºåŒ…com.voidking.hibernate.modelï¼Œåœ¨åŒ…ä¸­æ–°å»ºPOJOï¼Œå‘½åä¸ºKcbï¼Œä»£ç å¦‚ä¸‹ï¼š
package com.voidking.hibernate.model;public class Kcb &#123;	private String kch;	private String kcm;	private short kxxq;	private Integer xs;	private Integer xf;	public Kcb() &#123;	&#125;	public String getKch() &#123;		return kch;	&#125;	public void setKch(String kch) &#123;		this.kch = kch;	&#125;	public String getKcm() &#123;		return kcm;	&#125;	public void setKcm(String kcm) &#123;		this.kcm = kcm;	&#125;	public short getKxxq() &#123;		return kxxq;	&#125;	public void setKxxq(short kxxq) &#123;		this.kxxq = kxxq;	&#125;	public Integer getXs() &#123;		return xs;	&#125;	public void setXs(Integer xs) &#123;		this.xs = xs;	&#125;	public Integer getXf() &#123;		return xf;	&#125;	public void setXf(Integer xf) &#123;		this.xf = xf;	&#125;		&#125;
åœ¨åŒ…ä¸­æ–°å»ºæ–‡ä»¶Kcb.hbm.xmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE hibernate-mapping PUBLIC    &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;    &quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt; &lt;hibernate-mapping&gt;&lt;!-- nameæŒ‡å®šPOJOç±»ï¼ŒtableæŒ‡å®šå¯¹åº”æ•°æ®åº“çš„è¡¨ --&gt;    &lt;class name=&quot;com.voidking.hibernate.model.Kcb&quot; table=&quot;kcb&quot;&gt;    	&lt;!-- nameæŒ‡å®šä¸»é”®ï¼Œtypeä¸»é”®ç±»å‹ --&gt;        &lt;id name=&quot;kch&quot; type=&quot;java.lang.String&quot;&gt;        	&lt;column name=&quot;kch&quot; length=&quot;3&quot;&gt;&lt;/column&gt;        	&lt;!-- ä¸»é”®ç”Ÿæˆç­–ç•¥ --&gt;        	&lt;generator class=&quot;assigned&quot;&gt;&lt;/generator&gt;        &lt;/id&gt;                &lt;!-- POJOå±æ€§åŠè¡¨ä¸­å­—æ®µå¯¹åº”çš„å±æ€§ --&gt;        &lt;property name=&quot;kcm&quot; type=&quot;java.lang.String&quot;&gt;        	&lt;column name=&quot;kcm&quot; length=&quot;12&quot;&gt;&lt;/column&gt;        &lt;/property&gt;                &lt;property name=&quot;kxxq&quot; type=&quot;java.lang.Short&quot;&gt;        	&lt;column name=&quot;kxxq&quot;&gt;&lt;/column&gt;        &lt;/property&gt;                &lt;property name=&quot;xs&quot; type=&quot;java.lang.Integer&quot;&gt;        	&lt;column name=&quot;xs&quot;&gt;&lt;/column&gt;        &lt;/property&gt;                &lt;property name=&quot;xf&quot; type=&quot;java.lang.Integer&quot;&gt;        	&lt;column name=&quot;xf&quot;&gt;&lt;/column&gt;        &lt;/property&gt;    &lt;/class&gt;&lt;/hibernate-mapping&gt;

hibernate.cfg.xmlåœ¨srcä¸­æ–°å»ºhibernate.cfg.xmlæˆ–è€…hibernate.propertiesï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?xml version=&#x27;1.0&#x27; encoding=&#x27;utf-8&#x27;?&gt;&lt;!DOCTYPE hibernate-configuration PUBLIC        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;     &lt;hibernate-configuration&gt;    &lt;session-factory&gt;         &lt;!-- Database connection settings --&gt;    &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;    &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost/xscj&lt;/property&gt;    &lt;property name=&quot;connection.username&quot;&gt;scott&lt;/property&gt;    &lt;property name=&quot;connection.password&quot;&gt;tiger&lt;/property&gt;             &lt;!-- JDBC connection pool (use the built-in) --&gt;    &lt;!-- &lt;property name=&quot;connection.pool_size&quot;&gt;1&lt;/property&gt; --&gt;             &lt;!-- SQL dialect --&gt;    &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;             &lt;!-- Echo all executed SQL to stdout --&gt;    &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;             &lt;!-- Enable Hibernate&#x27;s automatic session context management --&gt;    &lt;!--&lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;--&gt;             &lt;!-- Drop and re-create the database schema on startup --&gt;    &lt;!-- &lt;property name=&quot;hbm2ddl.auto&quot;&gt;create&lt;/property&gt; --&gt;             &lt;!-- Disable the second-level cache --&gt;    &lt;property name=&quot;cache.provider_class&quot;&gt;org.hibernate.cache.NoCacheProvider&lt;/property&gt;         &lt;mapping resource=&quot;com/voidking/hibernate/model/Kcb.hbm.xml&quot;/&gt;             &lt;/session-factory&gt;&lt;/hibernate-configuration&gt;

åˆ›å»ºæµ‹è¯•ç±»æ–°å»ºåŒ…com.voidking.hibernate.testï¼Œæ–°å»ºç±»Testï¼Œä»£ç å¦‚ä¸‹ï¼š
package com.voidking.hibernate.test;import java.util.List;import org.hibernate.Query;import org.hibernate.Session;import org.hibernate.SessionFactory;import org.hibernate.Transaction;import org.hibernate.cfg.Configuration;import com.voidking.hibernate.model.Kcb;public class Test &#123;	public static void main(String[] args)&#123;		//åˆ›å»ºSessionå¯¹è±¡		Configuration cfg = new Configuration();        SessionFactory sf = cfg.configure().buildSessionFactory();		Session session = sf.openSession();				//åˆ›å»ºäº‹åŠ¡å¯¹è±¡		Transaction ts=session.beginTransaction();		Kcb kc = new Kcb();		kc.setKch(&quot;198&quot;);		kc.setKcm(&quot;æœºç”µ&quot;);		kc.setKxxq(new Short((short) 5));		kc.setXf(new Integer(5));		kc.setXs(new Integer(59));				//ä¿å­˜å¯¹è±¡		session.save(kc);		ts.commit();		Query query = session.createQuery(&quot;from Kcb where kch=198&quot;);		List list = query.list();		Kcb kcl=(Kcb)list.get(0);		System.out.println(kcl.getKcm());		session.close();		sf.close();			&#125;&#125;

å¯¼å…¥æ•°æ®åº“é©±åŠ¨å¯¼å…¥mysql-connector-java-*-bin.jarã€‚
è¿è¡Œé”™è¯¯è¿è¡ŒTest.javaä¸ºJava Applicationï¼Œå‡ºç°é”™è¯¯ã€‚Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax/persistence/EntityListenersåŸå› æ˜¯ç¼ºå°‘hibernate-jpa-*-api-*.Final.jarï¼Œå¯¼å…¥è¯¥åŒ…ï¼Œé—®é¢˜è§£å†³ã€‚
æç¤ºè¿è¡Œé”™è¯¯è§£å†³äº†ï¼Œä½†æ˜¯æ§åˆ¶å°ä»ç„¶æœ‰æç¤ºä¿¡æ¯ã€‚
SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.SLF4J: Defaulting to no-operation (NOP) logger implementationSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
ç»è¿‡æœç´¢ï¼Œè§£å†³åŠæ³•å¦‚ä¸‹ï¼š
Placing one (and only one) of slf4j-nop.jar, slf4j-simple.jar, slf4j-log4j12.jar, slf4j-jdk14.jar or logback-classic.jar on the class path should solve the problem.
ä¹‹å‰ä¸‹è½½çš„hibernateå‹ç¼©åŒ…é‡Œæ²¡æœ‰slf4j-nop.jarï¼Œå°±æ²¡æœ‰å¯¼å…¥ã€‚å•ç‹¬ä¸‹è½½è¯¥jaræ–‡ä»¶ï¼Œå¯¼å…¥ï¼Œé—®é¢˜è§£å†³ã€‚
å†æ¬¡è¿è¡Œé”™è¯¯å…¶å®ï¼ŒæŠ¥é”™æ˜¯åº”è¯¥çš„ï¼Œå› ä¸ºä¸¤æ¬¡æ’å…¥çš„æ•°æ®å®Œå…¨ç›¸åŒï¼Œè€Œä¸»é”®è¦æ±‚å”¯ä¸€ã€‚è¿™æ—¶ï¼Œåº”è¯¥æ€ä¹ˆé…ç½®ï¼Œæ‰èƒ½åœ¨ä¸æ”¹å˜ä»£ç çš„æƒ…å†µä¸‹ä¸æ–­è¿è¡Œå‘¢ï¼Ÿç»æµ‹è¯•ï¼Œåªè¦åœ¨hibernate.cfg.xmlé…ç½®æ–‡ä»¶ä¸­ï¼ŒæŠŠæ³¨é‡Šä¸­çš„è¿™ä¸€å¥é‡Šæ”¾å‡ºæ¥ï¼Œå°±å¯ä»¥äº†ã€‚
&lt;property name=&quot;hbm2ddl.auto&quot;&gt;create&lt;/property&gt;

å„æ–‡ä»¶çš„ä½œç”¨POJOå’Œæ˜ å°„é…ç½®æ–‡ä»¶POJOä¸­çš„å±æ€§å’Œè¡¨ä¸­çš„å­—æ®µæ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚é‚£ä¹ˆé€šè¿‡ä»€ä¹ˆæ–¹æ³•æŠŠå®ƒä»¬ä¸€ä¸€æ˜ å°„èµ·æ¥å‘¢ï¼Ÿå°±æ˜¯*.hbm.xmlæ˜ å°„æ–‡ä»¶ã€‚è¯¥é…ç½®æ–‡ä»¶å¤§è‡´åˆ†ä¸º3ä¸ªéƒ¨åˆ†ï¼š1ã€ç±»ã€è¡¨æ˜ å°„é…ç½®
&lt;class name=&quot;com.voidking.hibernate.model.Kcb&quot; table=&quot;kcb&quot;&gt;
2ã€idæ˜ å°„é…ç½®
&lt;id name=&quot;kch&quot; type=&quot;java.lang.String&quot;&gt;	&lt;column name=&quot;kch&quot; length=&quot;3&quot;&gt;&lt;/column&gt;	&lt;generator class=&quot;assigned&quot;&gt;&lt;/generator&gt;&lt;/id&gt;
Hibernateçš„ä¸»é”®ç”Ÿæˆç­–ç•¥åˆ†ä¸ºä¸‰å¤§ç±»ï¼šHibernateå¯¹ä¸»é”®idèµ‹å€¼ã€åº”ç”¨ç¨‹åºè‡ªèº«å¯¹idèµ‹å€¼ã€ç”±æ•°æ®åº“å¯¹idèµ‹å€¼ã€‚

assignedï¼šåº”ç”¨ç¨‹åºè‡ªèº«å¯¹idèµ‹å€¼ã€‚
nativeï¼šç”±æ•°æ®åº“å¯¹idèµ‹å€¼ã€‚
hiloï¼šé€šè¿‡hi/loç®—æ³•å®ç°çš„ä¸»é”®ç”Ÿæˆæœºåˆ¶ï¼Œéœ€è¦é¢å¤–çš„æ•°æ®åº“è¡¨ä¿å­˜ä¸»é”®ç”Ÿæˆå†å²çŠ¶æ€ã€‚
seqhiloï¼šä¸hi/loç±»ä¼¼ï¼Œé€šè¿‡hi/loç®—æ³•å®ç°çš„ä¸»é”®ç”Ÿæˆæœºåˆ¶ï¼Œåªæ˜¯ä¸»é”®å†å²çŠ¶æ€ä¿å­˜åœ¨sequenceä¸­ï¼Œé€‚ç”¨äºæ”¯æŒsequenceçš„æ•°æ®åº“ï¼Œæ¯”å¦‚Oracleã€‚
incrementï¼šä¸»é”®æŒ‰æ•°å€¼é¡ºåºé€’å¢ã€‚
identityï¼šé‡‡ç”¨æ•°æ®åº“æä¾›çš„ä¸»é”®ç”Ÿæˆæœºåˆ¶ï¼Œå¦‚SQL Serverã€MySQLä¸­çš„è‡ªå¢ä¸»é”®ç”Ÿæˆæœºåˆ¶ã€‚
sequenceï¼šé‡‡ç”¨æ•°æ®åº“æä¾›çš„sequenceæœºåˆ¶ç”Ÿæˆä¸»é”®ï¼Œå¦‚Oracle sequenceã€‚
uuid.hexï¼šç”±HibernateåŸºäº128ä½å”¯ä¸€å€¼äº§ç”Ÿç®—æ³•ï¼Œæ ¹æ®å½“å‰è®¾å¤‡IPã€æ—¶é—´ã€JVMå¯åŠ¨æ—¶é—´ã€å†…éƒ¨è‡ªå¢é‡ç­‰4ä¸ªå‚æ•°ç”Ÿæˆåå…­è¿›åˆ¶æ•°å€¼ï¼ˆç¼–ç é•¿åº¦ä¸º32ä½çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼‰ä½œä¸ºä¸»é”®ã€‚å³ä½¿æ˜¯åœ¨å¤šå®ä¾‹å¹¶å‘è¿è¡Œçš„æƒ…å†µä¸‹ï¼Œè¿™ç§ç®—æ³•åœ¨æœ€å¤§ç¨‹åº¦ä¸Šä¿è¯äº†äº§ç”Ÿidçš„å”¯ä¸€æ€§ã€‚
uuid.stringï¼šä¸uuid.hexç±»ä¼¼ï¼Œåªæ˜¯å¯¹ç”Ÿæˆçš„ä¸»é”®è¿›è¡Œç¼–ç ï¼ˆé•¿åº¦16ä½ï¼‰ã€‚åœ¨æŸäº›æ•°æ®åº“ä¸­å¯èƒ½å‡ºç°é—®é¢˜ã€‚
foreignï¼šä½¿ç”¨å¤–éƒ¨è¡¨çš„å­—æ®µä½œä¸ºä¸»é”®ã€‚
selectï¼šHibernate3å¼•å…¥çš„ä¸»é”®ç”Ÿæˆæœºåˆ¶ï¼Œä¸»è¦é’ˆå¯¹é—ç•™ç³»ç»Ÿçš„æ”¹é€ å·¥ç¨‹ã€‚

ç”±äºå¸¸ç”¨çš„æ•°æ®åº“ï¼Œå¦‚SQL Severã€MySQLç­‰ï¼Œéƒ½æä¾›äº†æ˜“ç”¨çš„ä¸»é”®ç”Ÿæˆæœºåˆ¶ï¼ˆå¦‚auto-increaseå­—æ®µï¼‰ã€‚å¯ä»¥åœ¨æ•°æ®åº“æä¾›çš„ä¸»é”®ç”Ÿæˆæœºåˆ¶ä¸Šï¼Œé‡‡ç”¨generator class=â€nativeâ€çš„ä¸»é”®ç”Ÿæˆæ–¹å¼ã€‚
3ã€å±æ€§ã€å­—æ®µæ˜ å°„é…ç½®
&lt;property name=&quot;kcm&quot; type=&quot;java.lang.String&quot;&gt;	&lt;column name=&quot;kcm&quot; length=&quot;12&quot;&gt;&lt;/column&gt;&lt;/property&gt;

4ã€å…³ç³»é…ç½®è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»ï¼Œä¼šè¢«æ˜ å°„æˆç±»ä¸ç±»ä¹‹é—´çš„å…³ç³»ï¼Œå®ƒä»¬çš„å…³ç³»çš„å…·ä½“ä½“ç°ä¹Ÿä¼šåœ¨è¯¥é…ç½®æ–‡ä»¶ä¸­é…ç½®ã€‚
hibernate.cfg.xmlHibernateé…ç½®æ–‡ä»¶ä¸»è¦ç”¨äºé…ç½®æ•°æ®åº“è¿æ¥å’ŒHibernateè¿è¡Œæ—¶æ‰€éœ€è¦çš„å„ç§å±æ€§ï¼Œé…ç½®æ–‡ä»¶ä¸€èˆ¬é»˜è®¤ä¸ºhibernate.cfg.xmlï¼ŒHibernateåˆå§‹åŒ–æœŸé—´ä¼šè‡ªåŠ¨åœ¨classpathä¸­å¯»æ‰¾è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶è¯»å–å…¶ä¸­çš„é…ç½®ä¿¡æ¯ï¼Œä¸ºåæœŸæ•°æ®åº“æ“ä½œåšå¥½å‡†å¤‡ã€‚
HibernateSessionFactorypackage com.voidking.hibernate.util;import org.hibernate.HibernateException;import org.hibernate.Session;import org.hibernate.cfg.Configuration;import org.hibernate.service.ServiceRegistry;import org.hibernate.service.ServiceRegistryBuilder;/** * Configures and provides access to Hibernate sessions, tied to the * current thread of execution.  Follows the Thread Local Session * pattern, see &#123;@link http://hibernate.org/42.html &#125;. */public class HibernateSessionFactory &#123;    /**      * Location of hibernate.cfg.xml file.     * Location should be on the classpath as Hibernate uses       * #resourceAsStream style lookup for its configuration file.      * The default classpath location of the hibernate config file is      * in the default package. Use #setConfigFile() to update      * the location of the configuration file for the current session.        */	private static final ThreadLocal&lt;Session&gt; threadLocal = new ThreadLocal&lt;Session&gt;();    private static org.hibernate.SessionFactory sessionFactory;	    private static Configuration configuration = new Configuration();    private static ServiceRegistry serviceRegistry; 	static &#123;    	try &#123;			configuration.configure();			serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();			sessionFactory = configuration.buildSessionFactory(serviceRegistry);		&#125; catch (Exception e) &#123;			System.err.println(&quot;%%%% Error Creating SessionFactory %%%%&quot;);			e.printStackTrace();		&#125;    &#125;    private HibernateSessionFactory() &#123;    &#125;		/**     * Returns the ThreadLocal Session instance.  Lazy initialize     * the &lt;code&gt;SessionFactory&lt;/code&gt; if needed.     *     *  @return Session     *  @throws HibernateException     */    public static Session getSession() throws HibernateException &#123;        Session session = (Session) threadLocal.get();		if (session == null || !session.isOpen()) &#123;			if (sessionFactory == null) &#123;				rebuildSessionFactory();			&#125;			session = (sessionFactory != null) ? sessionFactory.openSession()					: null;			threadLocal.set(session);		&#125;        return session;    &#125;	/**     *  Rebuild hibernate session factory     *     */	public static void rebuildSessionFactory() &#123;		try &#123;			configuration.configure();			serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();			sessionFactory = configuration.buildSessionFactory(serviceRegistry);		&#125; catch (Exception e) &#123;			System.err.println(&quot;%%%% Error Creating SessionFactory %%%%&quot;);			e.printStackTrace();		&#125;	&#125;	/**     *  Close the single hibernate session instance.     *     *  @throws HibernateException     */    public static void closeSession() throws HibernateException &#123;        Session session = (Session) threadLocal.get();        threadLocal.set(null);        if (session != null) &#123;            session.close();        &#125;    &#125;	/**     *  return session factory     *     */	public static org.hibernate.SessionFactory getSessionFactory() &#123;		return sessionFactory;	&#125;	/**     *  return hibernate configuration     *     */	public static Configuration getConfiguration() &#123;		return configuration;	&#125;&#125;
ä¸Šé¢çš„å®ä¾‹ä¸­ï¼Œæˆ‘å¹¶æ²¡æœ‰ä½¿ç”¨è¿™ä¸ªç±»ï¼Œå¦‚æœä½¿ç”¨å®ƒçš„è¯ï¼ŒTest.javaæ–‡ä»¶å¯ä»¥ä¿®æ”¹å¦‚ä¸‹ï¼š
package com.voidking.hibernate.test;import java.util.List;import org.hibernate.Query;import org.hibernate.Session;import org.hibernate.Transaction;import org.model.Kcb;import com.voidking.hibernate.util.HibernateSessionFactory;public class Test &#123;   public static void main(String[] args) &#123;	// è°ƒç”¨HibernateSessionFactoryçš„getSessionæ–¹æ³•åˆ›å»ºSessionå¯¹è±¡	Session session=HibernateSessionFactory.getSession();	// åˆ›å»ºäº‹åŠ¡å¯¹è±¡	Transaction ts=session.beginTransaction();	Kcb kc=new Kcb();                       	// åˆ›å»ºPOJOç±»å¯¹è±¡	kc.setKch(&quot;198&quot;);                        	// è®¾ç½®è¯¾ç¨‹å·	kc.setKcm(&quot;æœºç”µ&quot;);                       	// è®¾ç½®è¯¾ç¨‹å	kc.setKxxq(new Short((short) 5));			 	// è®¾ç½®å¼€å­¦å­¦æœŸ	kc.setXf(new Integer(5));				 	// è®¾ç½®å­¦åˆ†	kc.setXs(new Integer(59));				 	// è®¾ç½®å­¦æ—¶	// ä¿å­˜å¯¹è±¡	session.save(kc);	ts.commit();                             	// æäº¤äº‹åŠ¡	Query query=session.createQuery(&quot;from Kcb where kch=198&quot;);	List list=query.list();	Kcb kc1=(Kcb) list.get(0);	System.out.println(kc1.getKcm());	HibernateSessionFactory.closeSession();		 	// å…³é—­Session   &#125;&#125;
HibernateSessionFactoryç±»æ˜¯è‡ªå®šä¹‰çš„SessionFactoryï¼Œåå­—å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½æ¥å†³å®šã€‚åœ¨Hibernateä¸­ï¼ŒSessionè´Ÿè´£å®Œæˆå¯¹è±¡æŒä¹…åŒ–æ“ä½œã€‚è¯¥æ–‡ä»¶è´Ÿè´£åˆ›å»ºSessionå¯¹è±¡ï¼Œä»¥åŠå…³é—­Sessionå¯¹è±¡ã€‚ä»HibernateSessionFactoryæ–‡ä»¶å¯ä»¥çœ‹å‡ºï¼ŒSessionå¯¹è±¡çš„åˆ›å»ºå¤§è‡´éœ€è¦ä»¥ä¸‹3ä¸ªæ­¥éª¤ï¼š1ã€åˆå§‹åŒ–Hibernateé…ç½®ç®¡ç†ç±»Configurationã€‚2ã€é€šè¿‡Configurationç±»å®ä¾‹åˆ›å»ºSessionçš„å·¥å‚ç±»SessionFactoryã€‚3ã€é€šè¿‡SessionFactoryå¾—åˆ°Sessionå®ä¾‹ã€‚
Hibernateæ ¸å¿ƒæ¥å£Hibernateæ ¸å¿ƒæ¥å£ä¸€å…±æœ‰5ä¸ªï¼šConfigurationã€SessionFactoryã€Sessionã€Transactionå’ŒQueryã€‚è¿™5ä¸ªæ¥å£åœ¨ä»»ä½•å¼€å‘ä¸­éƒ½ä¼šç”¨åˆ°ã€‚é€šè¿‡è¿™äº›æ¥å£ï¼Œä¸ä»…å¯ä»¥å¯¹æŒä¹…åŒ–å¯¹è±¡è¿›è¡Œå­˜å–ï¼Œè¿˜èƒ½å¤Ÿè¿›è¡Œäº‹åŠ¡æ§åˆ¶ã€‚
ConfigurationConfigurationæ¥å£è´Ÿè´£Hibernateçš„é…ç½®ä¿¡æ¯ã€‚Hibernateè¿è¡Œæ—¶éœ€è¦ä¸€äº›åº•å±‚å®ç°çš„åŸºæœ¬ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯åŒ…æ‹¬ï¼šæ•°æ®åº“URLã€æ•°æ®åº“ç”¨æˆ·åã€æ•°æ®åº“ç”¨æˆ·å¯†ç ã€æ•°æ®åº“JDBCé©±åŠ¨ç±»ã€æ•°æ®åº“dialectã€‚ç”¨äºå¯¹ç‰¹å®šæ•°æ®åº“æä¾›æ”¯æŒï¼Œå…¶ä¸­åŒ…å«äº†é’ˆå¯¹ç‰¹å®šæ•°æ®åº“ç‰¹æ€§çš„å®ç°ï¼Œå¦‚Hibernateæ•°æ®åº“ç±»å‹åˆ°ç‰¹å®šæ•°æ®åº“ç±»å‹çš„æ˜ å°„ç­‰ã€‚ä½¿ç”¨Hibernateå¿…é¡»é¦–å…ˆæä¾›è¿™äº›åŸºç¡€ä¿¡æ¯ä»¥å®Œæˆåˆå§‹åŒ–å·¥ä½œï¼Œä¸ºåç»­æ“ä½œåšå¥½å‡†å¤‡ã€‚è¿™äº›å±æ€§åœ¨Hibernateé…ç½®æ–‡ä»¶hibernate.cfg.xmlä¸­åŠ ä»¥è®¾å®šï¼Œå½“è°ƒç”¨ï¼š
Configuration config = new Configuration().configure();
Hibernateä¼šè‡ªåŠ¨åœ¨ç›®å½•ä¸‹æœç´¢hibernate.cfg.xmlæ–‡ä»¶ï¼Œå¹¶å°†å…¶è‡ªåŠ¨è¯»å–åˆ°å†…å­˜ä¸­ä½œä¸ºåç»­æ“ä½œçš„åŸºç¡€é…ç½®ã€‚
SessionFactorySessionFactoryè´Ÿè´£åˆ›å»ºSessionå®ä¾‹ï¼Œå¯ä»¥é€šè¿‡Configurationå®ä¾‹æ„å»ºSessionFactoryã€‚
Configuration config = new Configuration().configure();SessionFactory sessionFactory = config.buildSessionFactory();
Configurationå®ä¾‹configä¼šæ ¹æ®å½“å‰æ•°æ®åº“çš„é…ç½®ä¿¡æ¯ï¼Œæ„é€ SessionFactoryå®ä¾‹å¹¶è¿”å›ã€‚SessionFactoryä¸€æ—¦æ„é€ å®Œæ¯•ï¼Œå³è¢«èµ‹äºˆç‰¹å®šçš„é…ç½®ä¿¡æ¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»¥åconfigçš„ä»»ä½•å˜æ›´å°†ä¸ä¼šå½±å“åˆ°å·²ç»åˆ›å»ºçš„SessionFactoryå®ä¾‹sessionFactoryã€‚å¦‚æœåº”ç”¨ä¸­éœ€è¦è®¿é—®å¤šä¸ªæ•°æ®åº“ï¼Œé’ˆå¯¹æ¯ä¸ªæ•°æ®åº“ï¼Œåº”åˆ†åˆ«å¯¹å…¶åˆ›å»ºå¯¹åº”çš„SessionFactoryå®ä¾‹ã€‚SessionFactoryä¿å­˜äº†å¯¹åº”å½“å‰æ•°æ®åº“é…ç½®çš„æ‰€æœ‰æ˜ å°„å…³ç³»ï¼ŒåŒæ—¶ä¹Ÿè´Ÿè´£ç»´æŠ¤å½“å‰çš„äºŒçº§æ•°æ®ç¼“å­˜å’ŒStatement Poolã€‚ç”±æ­¤å¯è§ï¼ŒSessionFactoryçš„åˆ›å»ºè¿‡ç¨‹éå¸¸å¤æ‚ã€ä»£ä»·é«˜æ˜‚ã€‚ç”±äºSessionFactoryé‡‡ç”¨äº†çº¿ç¨‹å®‰å…¨çš„è®¾è®¡ï¼Œå¯ç”±å¤šä¸ªçº¿ç¨‹å¹¶å‘è°ƒç”¨ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”ç”¨ä¸­é’ˆå¯¹ä¸€ä¸ªæ•°æ®åº“å…±äº«ä¸€ä¸ªSessionFactoryå®ä¾‹å³å¯ã€‚
SessionSessionæ˜¯HibernateæŒä¹…åŒ–æ“ä½œçš„åŸºç¡€ï¼Œæä¾›äº†ä¼—å¤šæŒä¹…åŒ–æ–¹æ³•ï¼Œå¦‚saveã€updateã€deleteç­‰ã€‚é€šè¿‡è¿™äº›æ–¹æ³•ï¼Œé€æ˜åœ°å®Œæˆå¯¹è±¡çš„å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥æ‰¾ç­‰æ“ä½œã€‚åŒæ—¶ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒHibernate Sessionçš„è®¾è®¡æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œå³ä¸€ä¸ªSessionå®ä¾‹åŒæ—¶åªå¯ç”±ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ã€‚åŒä¸€ä¸ªSessionå®ä¾‹çš„å¤šçº¿ç¨‹å¹¶å‘è°ƒç”¨å°†å¯¼è‡´éš¾ä»¥é¢„çŸ¥çš„é”™è¯¯ã€‚Sessionå®ä¾‹ç”±SessionFactoryæ„å»ºï¼š
Configuration config = new Configuration().configure();SessionFactory sessionFactory = config.buildSessionFactory();Session session = sessionFactory.openSession();
ä¹‹åå¯ä»¥è°ƒç”¨Sessionæä¾›çš„saveã€getã€deleteç­‰æ–¹æ³•å®ŒæˆæŒä¹…å±‚æ“ä½œã€‚
TransactionTransactionæ˜¯Hibernateä¸­è¿›è¡Œäº‹åŠ¡æ“ä½œçš„æ¥å£ï¼ŒTransactionæ¥å£æ˜¯å¯¹å®é™…äº‹åŠ¡å®ç°çš„ä¸€ä¸ªæŠ½è±¡ï¼Œè¿™äº›å®ç°åŒ…æ‹¬JDBCçš„äº‹åŠ¡ã€JTAä¸­çš„UserTransactionï¼Œç”šè‡³å¯ä»¥æ˜¯CORBAäº‹åŠ¡ã€‚ä¹‹æ‰€ä»¥è¿™æ ·è®¾è®¡æ˜¯å¯ä»¥è®©å¼€å‘è€…èƒ½å¤Ÿä½¿ç”¨ä¸€ä¸ªç»Ÿä¸€çš„æ“ä½œç•Œé¢ï¼Œä½¿å¾—è‡ªå·±çš„é¡¹ç›®å¯ä»¥åœ¨ä¸åŒçš„ç¯å¢ƒå’Œå®¹å™¨ä¹‹é—´æ–¹ä¾¿åœ°ç§»æ¤ã€‚äº‹åŠ¡å¯¹è±¡é€šè¿‡Sessionåˆ›å»ºã€‚
Transaction ts = session.beginTransaction();



Queryåœ¨Hibernate 2.Xä¸­ï¼Œfind()æ–¹æ³•ç”¨äºæ‰§è¡ŒHQLè¯­å¥ã€‚Hibernate 3.XåºŸé™¤äº†find()æ–¹æ³•ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯Queryæ¥å£ï¼Œå®ƒä»¬éƒ½ç”¨äºæ‰§è¡ŒHQLè¯­å¥ã€‚Queryå’ŒHQLæ˜¯åˆ†ä¸å¼€çš„ã€‚
Query query = session.createQuery(&quot;from Kcb where kch=198&quot;);

Query query = session.createQuery(&quot;from Kcb where kch=?&quot;);query.setString(0,&quot;è¦è®¾ç½®çš„å€¼&quot;);

Query query = session.createQuery(&quot;from Kcb where kch=:kchValue&quot;);query.setString(&quot;kchValue&quot;,&quot;è¦è®¾ç½®çš„å€¼&quot;);
ç”±äºä¸Šä¾‹ä¸­çš„kchä¸ºStringç±»å‹ï¼Œæ‰€ä»¥è®¾ç½®çš„æ—¶å€™ç”¨setStringï¼Œå¦‚æœæ˜¯intç±»å‹å°±è¦ç”¨setIntã€‚è¿˜æœ‰ä¸€ç§é€šç”¨çš„è®¾ç½®æ–¹æ³•ï¼Œå°±æ˜¯setParameteræ–¹æ³•ï¼Œä¸ç®¡ä»€ä¹ˆç±»å‹çš„å‚æ•°éƒ½å¯ä»¥åº”ç”¨ã€‚
query.setParameter(0,&quot;è¦è®¾ç½®çš„å€¼&quot;);query.setParameter(&quot;kchValue&quot;,&quot;è¦è®¾ç½®çš„å€¼&quot;);

Queryè¿˜æœ‰ä¸€ä¸ªlist()æ–¹æ³•ï¼Œç”¨äºå–å¾—ä¸€ä¸ªListé›†åˆçš„ç¤ºä¾‹ï¼Œæ­¤ç¤ºä¾‹ä¸­åŒ…æ‹¬å¯èƒ½æ˜¯ä¸€ä¸ªObjecté›†åˆï¼Œä¹Ÿå¯èƒ½æ˜¯Objectæ•°ç»„é›†åˆã€‚
Query query = session.createQuery(&quot;form Kcb where kch=198&quot;);List list = query.list();

HQLæŸ¥è¯¢HQLæ˜¯Hibernate Query Languageçš„ç¼©å†™ã€‚HQLçš„è¯­æ³•å¾ˆåƒSQLï¼Œä½†HQLæ˜¯ä¸€ç§é¢å‘å¯¹è±¡æŸ¥è¯¢è¯­è¨€ã€‚SQLçš„æ“ä½œå¯¹è±¡æ˜¯æ•°æ®è¡¨å’Œåˆ—ç­‰æ•°æ®å¯¹è±¡ï¼Œè€ŒHQLçš„æ“ä½œå¯¹è±¡æ˜¯ç±»ã€å®ä¾‹ã€å±æ€§ç­‰ã€‚HQLçš„æŸ¥è¯¢ä¾èµ–äºQueryç±»ï¼Œæ¯ä¸ªQueryå®ä¾‹å¯¹åº”ä¸€ä¸ªæŸ¥è¯¢å¯¹è±¡ã€‚
åŸºæœ¬æŸ¥è¯¢1ã€æŸ¥è¯¢æ‰€æœ‰è¯¾ç¨‹ä¿¡æ¯
Session session=HibernateSessionFactory.getSession();Transaction ts=session.beginTransaction();Query query=session.createQuery(&quot;from Kcb&quot;);List list=query.list();ts.commit(); HibernateSessionFactory.closeSession();		 	
2ã€æŸ¥è¯¢æŸé—¨è¯¾ç¨‹ä¿¡æ¯
Session session=HibernateSessionFactory.getSession();Transaction ts=session.beginTransaction();Query query=session.createQuery(&quot;from Kcb order by xs desc&quot;);query.setMaxResults(1);//è®¾ç½®æœ€å¤§æ£€ç´¢æ•°ç›®ä¸º1Kcb kc = (Kcb)query.uniqueResult();ts.commit(); HibernateSessionFactory.closeSession();		 	
3ã€æŸ¥è¯¢æ»¡è¶³æ¡ä»¶çš„è¯¾ç¨‹ä¿¡æ¯
Session session=HibernateSessionFactory.getSession();Transaction ts=session.beginTransaction();Query query=session.createQuery(&quot;from Kcb where kch=001&quot;);List list=query.list();ts.commit(); HibernateSessionFactory.closeSession();		 	

æ¡ä»¶æŸ¥è¯¢1ã€æŒ‰æŒ‡å®šå‚æ•°æŸ¥è¯¢
Session session=HibernateSessionFactory.getSession();Transaction ts=session.beginTransaction();Query query=session.createQuery(&quot;from Kcb where kcm=?&quot;);query.setParameter(0,&quot;è®¡ç®—æœºåŸºç¡€&quot;);List list=query.list();ts.commit(); HibernateSessionFactory.closeSession();		 	

2ã€ä½¿ç”¨èŒƒå›´è¿ç®—æŸ¥è¯¢
Session session=HibernateSessionFactory.getSession();Transaction ts=session.beginTransaction();Query query=session.createQuery(&quot;from Kcb where (xs between 40 and 60) and kcm in(&#x27;è®¡ç®—æœºåŸºç¡€&#x27;,&#x27;æ•°æ®ç»“æ„&#x27;)&quot;);List list=query.list();ts.commit(); HibernateSessionFactory.closeSession();		 	

3ã€ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦æŸ¥è¯¢
Session session=HibernateSessionFactory.getSession();Transaction ts=session.beginTransaction();Query query=session.createQuery(&quot;from Kcb where xs &gt; 50 and kcm is not null&quot;);List list=query.list();ts.commit(); HibernateSessionFactory.closeSession();		 	

4ã€ä½¿ç”¨å­—ç¬¦ä¸²åŒ¹é…è¿ç®—æŸ¥è¯¢
Session session=HibernateSessionFactory.getSession();Transaction ts=session.beginTransaction();Query query=session.createQuery(&quot;from Kcb where kch like &#x27;%001%&#x27; and kcm like &#x27;è®¡ç®—æœº%&#x27;&quot;);List list=query.list();ts.commit(); HibernateSessionFactory.closeSession();		 	

åˆ†é¡µæŸ¥è¯¢åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºæ•°æ®ç»“æœæ—¶ï¼Œå¦‚æœæ•°æ®å¤ªå¤šï¼Œä¸€ä¸ªé¡µé¢æ— æ³•å…¨éƒ¨æ˜¾ç¤ºï¼Œè¿™æ˜¯åŠ¡å¿…è¦å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œåˆ†é¡µæ˜¾ç¤ºã€‚ä¸ºäº†æ»¡è¶³åˆ†é¡µæŸ¥è¯¢çš„éœ€è¦ï¼ŒHibernateçš„Queryå®ä¾‹æä¾›äº†ä¸¤ä¸ªæœ‰ç”¨çš„æ–¹æ³•ï¼šsetFirstResult(int firstResult)å’ŒsetMaxResult(int maxResult)ã€‚
Session session=HibernateSessionFactory.getSession();Transaction ts=session.beginTransaction();Query query=session.createQuery(&quot;from Kcb&quot;);int pageNow=1;int pageSize=5;query.setFirstResult((pageNow-1)*pageSize);query.setMaxResult(pageSize);List list=query.list();ts.commit(); HibernateSessionFactory.closeSession();		 	
é€šå¸¸æƒ…å†µä¸‹ï¼ŒpageNowä¼šä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ è¿›æ¥ï¼Œè¿™æ ·å°±å¯ä»¥å¾—åˆ°æƒ³è¦æ˜¾ç¤ºçš„é¡µæ•°çš„ç»“æœé›†äº†ã€‚
å‚è€ƒæ–‡æ¡£ã€ŠJava EEåŸºç¡€å®ç”¨æ•™ç¨‹ã€‹ï¼Œéƒ‘é˜¿å¥‡ä¸»ç¼–å…³äºå¯¹POJO PO çš„ç†è§£ï¼šhttp://fluagen.blog.51cto.com/146595/36396/
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>hibernate</tag>
      </tags>
  </entry>
  <entry>
    <title>Struts2ç»¼åˆåº”ç”¨å®ä¾‹</title>
    <url>/dev-struts2-comprehensive-example/</url>
    <content><![CDATA[å‰è¨€æœ¬å®ä¾‹å®ç°äº†ä¸€ä¸ªç®€å•çš„åŠŸèƒ½ï¼šæ·»åŠ å­¦ç”Ÿä¿¡æ¯ã€‚æˆ‘ä»¬ä»ç„¶åœ¨Struts2æ¦‚è¿°ä¸­struts2é¡¹ç›®çš„åŸºç¡€ä¸Šè¿›è¡Œã€‚
å»ºç«‹æ•°æ®åº“ä½¿ç”¨MySQLï¼Œscottç”¨æˆ·ï¼Œå»ºç«‹æ•°æ®åº“ï¼Œåä¸ºXSCJï¼Œå…¶ä¸­æœ‰ä¸€å¼ è¡¨XSBï¼Œç»“æ„å¦‚ä¸‹ï¼š



é¡¹ç›®å
åˆ—å
æ•°æ®ç±»å‹
å¯ç©º
é»˜è®¤å€¼
è¯´æ˜



å­¦å·
XH
å®šé•¿å­—ç¬¦ä¸²å‹ï¼ˆchar6ï¼‰
Ã—
æ— 
ä¸»é”®


å§“å
XM
ä¸å®šé•¿å­—ç¬¦ä¸²å‹ï¼ˆvarchar8ï¼‰
Ã—
æ— 



æ€§åˆ«
XB
ä½å‹ï¼ˆbitï¼‰
Ã—
æ— 
å€¼çº¦æŸï¼š1/0ã€‚1è¡¨ç¤ºç”·ï¼Œ0è¡¨ç¤ºå¥³


å‡ºç”Ÿæ—¶é—´
CSSJ
æ—¥æœŸæ—¶é—´å‹ï¼ˆdatetimeï¼‰
âˆš
æ— 



ä¸“ä¸šId
ZY_ID
æ•´æ•°å‹ï¼ˆintï¼‰
Ã—
æ— 



æ€»å­¦åˆ†
ZXF
æ•´æ•°å‹ï¼ˆintï¼‰
âˆš
0
0&lt;=æ€»å­¦åˆ†&lt;160


å¤‡æ³¨
BZ
ä¸å®šé•¿å­—ç¬¦ä¸²å‹ï¼ˆvarchar500ï¼‰
âˆš
æ— 



ç…§ç‰‡
ZP
longblob
âˆš
æ— 



create database xscj;use xscj;create table xsb(xh char(6) not null primary key,xm varchar(8) not null,xb bit not null check(xb=0 or xb=1),cssj datetime ,zy_id int,zxf int default 0 check(0&lt;=zxf&lt;160),bz varchar(500),zp longblob);

å»ºç«‹stu.jsp&lt;%@ page language=&quot;java&quot; pageEncoding=&quot;utf-8&quot;%&gt;&lt;%@ taglib uri=&quot;/struts-tags&quot; prefix=&quot;s&quot;%&gt;&lt;%@ taglib uri=&quot;/struts-dojo-tags&quot; prefix=&quot;sx&quot; %&gt;&lt;html&gt;&lt;head&gt;	&lt;s:head /&gt;	&lt;sx:head/&gt;&lt;/head&gt;&lt;body&gt;	&lt;h3&gt;æ·»åŠ å­¦ç”Ÿä¿¡æ¯&lt;/h3&gt;	&lt;s:form action=&quot;save&quot; namespace=&quot;/&quot; method=&quot;post&quot; theme=&quot;simple&quot;&gt;		&lt;table&gt;			&lt;tr&gt;				&lt;td&gt;å­¦å·ï¼ˆå…­ä½æ•°ï¼‰ï¼š&lt;/td&gt;				&lt;td&gt;&lt;s:textfield name=&quot;xs.xh&quot;&gt;&lt;/s:textfield&gt;&lt;/td&gt;			&lt;/tr&gt;			&lt;tr&gt;				&lt;td&gt;å§“åï¼š&lt;/td&gt;				&lt;td&gt;&lt;s:textfield name=&quot;xs.xm&quot; &gt;&lt;/s:textfield&gt;&lt;/td&gt;			&lt;/tr&gt;			&lt;tr&gt;				&lt;td&gt;æ€§åˆ«ï¼š&lt;/td&gt;				&lt;td&gt;&lt;s:radio name=&quot;xs.xb&quot; list=&quot;#&#123;true:&#x27;ç”·&#x27;,false:&#x27;å¥³&#x27;&#125;&quot; value=&quot;true&quot;&gt;&lt;/s:radio&gt;&lt;/td&gt;			&lt;/tr&gt;			&lt;tr&gt;				&lt;td width=&quot;70&quot;&gt;å‡ºç”Ÿæ—¶é—´:&lt;/td&gt;				&lt;td&gt;&lt;sx:datetimepicker name=&quot;xs.cssj&quot; id=&quot;cssj&quot;	displayFormat=&quot;yyyy-MM-dd&quot;&gt;&lt;/sx:datetimepicker&gt;&lt;/td&gt;			&lt;/tr&gt;			&lt;tr&gt;				&lt;td&gt;ä¸“ä¸šIDï¼š&lt;/td&gt;				&lt;td&gt;&lt;s:textfield name=&quot;xs.zy_id&quot; label=&quot;ä¸“ä¸š&quot;&gt;&lt;/s:textfield&gt;&lt;/td&gt;			&lt;/tr&gt;			&lt;tr&gt;				&lt;td&gt;å¤‡æ³¨ï¼š&lt;/td&gt;				&lt;td&gt;&lt;s:textarea name=&quot;xs.bz&quot; label=&quot;å¤‡æ³¨&quot;&gt;&lt;/s:textarea&gt;&lt;/td&gt;			&lt;/tr&gt;			&lt;tr&gt;				&lt;td&gt;&lt;s:submit value=&quot;æ·»åŠ &quot;&gt;&lt;/s:submit&gt;&lt;/td&gt;				&lt;td&gt;&lt;s:reset value=&quot;é‡ç½®&quot;&gt;&lt;/s:reset&gt;&lt;/td&gt;			&lt;/tr&gt;		&lt;/table&gt;	&lt;/s:form&gt;&lt;/body&gt;&lt;/html&gt;
æ³¨æ„ï¼Œä¸Šé¢çš„ä»£ç ä½¿ç”¨äº†/struts-dojo-tagsæ ‡ç­¾ï¼Œéœ€è¦å¯¼å…¥åŒ…struts2-dojo-plugin-*.jarã€‚Struts2çš„æ ‡ç­¾å…·æœ‰è‡ªåŠ¨æ’ç‰ˆçš„åŠŸèƒ½ï¼Œå¦‚æœæƒ³è¦è‡ªå·±æ’ç‰ˆï¼Œå¯ä»¥åœ¨formæ ‡ç­¾ä¸­åŠ å…¥theme=â€simpleâ€ï¼Œä½†åŠ å…¥è¯¥å…ƒç´ åï¼Œæ ‡ç­¾ä¸­çš„labelå±æ€§å°±æ²¡ç”¨äº†ã€‚
å»ºç«‹addsuccess.jsp&lt;%@ page language=&quot;java&quot; pageEncoding=&quot;utf-8&quot;%&gt;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;    	æ­å–œä½ ï¼Œæ·»åŠ æˆåŠŸï¼&lt;/body&gt;&lt;/html&gt;

å»ºç«‹JavaBeanpackage com.voidking.struts2.model;import java.sql.Date;public class Xsb &#123;   	private String xh;	private String xm;	private boolean xb;	private Date cssj;	private int zy_id;	private int zxf;	private String bz;	private byte[] zp;	public String getXh() &#123;		return xh;	&#125;	public void setXh(String xh) &#123;		this.xh = xh;	&#125;	public String getXm() &#123;		return xm;	&#125;	public void setXm(String xm) &#123;		this.xm = xm;	&#125;		public boolean isXb() &#123;		return xb;	&#125;	public void setXb(boolean xb) &#123;		this.xb = xb;	&#125;	public Date getCssj() &#123;		return cssj;	&#125;	public void setCssj(Date cssj) &#123;		this.cssj = cssj;	&#125;	public int getZy_id() &#123;		return zy_id;	&#125;	public void setZy_id(int zy_id) &#123;		this.zy_id = zy_id;	&#125;	public int getZxf() &#123;		return zxf;	&#125;	public void setZxf(int zxf) &#123;		this.zxf = zxf;	&#125;	public String getBz() &#123;		return bz;	&#125;	public void setBz(String bz) &#123;		this.bz = bz;	&#125;	public byte[] getZp() &#123;		return zp;	&#125;	public void setZp(byte[] zp) &#123;		this.zp = zp;	&#125;		&#125;

å»ºç«‹DBConnpackage com.voidking.struts2.db;import java.sql.Connection;import java.sql.DriverManager;import java.sql.PreparedStatement;import com.voidking.struts2.model.Xsb;public class DBConn &#123;	Connection conn;	PreparedStatement pstmt;	public DBConn()&#123;		try&#123;			Class.forName(&quot;com.mysql.jdbc.Driver&quot;);			conn=DriverManager.getConnection(&quot;jdbc:mysql://localhost/xscj&quot;,&quot;scott&quot;,&quot;tiger&quot;);		&#125;catch(Exception e)&#123;			e.printStackTrace();		&#125;	&#125;	// æ·»åŠ å­¦ç”Ÿ	public boolean save(Xsb xs)&#123;		try&#123;			pstmt=conn.prepareStatement(&quot;insert into XSB(xh,xm,xb,cssj,zy_id,bz) values(?,?,?,?,?,?)&quot;);			pstmt.setString(1, xs.getXh());			pstmt.setString(2, xs.getXm());			pstmt.setBoolean(3, xs.isXb());			pstmt.setDate(4, xs.getCssj());			pstmt.setInt(5, xs.getZy_id());			pstmt.setString(6, xs.getBz());			pstmt.executeUpdate();			return true;		&#125;catch(Exception e)&#123;			e.printStackTrace();			return false;		&#125;	&#125;&#125;
æ³¨æ„ï¼Œåˆ«å¿˜è®°å¯¼å…¥åŒ…mysql-connector-java-*-bin.jarã€‚
å»ºç«‹SaveActionpackage com.voidking.struts2.action;import com.opensymphony.xwork2.ActionSupport;import com.voidking.struts2.db.DBConn;import com.voidking.struts2.model.Xsb;public class SaveAction extends ActionSupport&#123;	private Xsb xs;	public Xsb getXs() &#123;		return xs;	&#125;	public void setXs(Xsb xs) &#123;		this.xs=xs;	&#125;	public String execute() throws Exception &#123;		DBConn db=new DBConn();		Xsb stu=new Xsb();		stu.setXh(xs.getXh());		stu.setXm(xs.getXm());		stu.setXb(xs.isXb());		stu.setZy_id(xs.getZy_id());		stu.setCssj(xs.getCssj());		stu.setBz(xs.getBz());		if(db.save(stu))&#123;			return SUCCESS;		&#125;else			return ERROR;	&#125;&#125;

struts.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE struts PUBLIC    &quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;    &quot;http://struts.apache.org/dtds/struts-2.0.dtd&quot;&gt;&lt;struts&gt;	&lt;constant name=&quot;struts.multipart.saveDir&quot; value=&quot;/tmp&quot;/&gt;    &lt;package name=&quot;default&quot;  extends=&quot;struts-default&quot;&gt;        	&lt;interceptors&gt;    		&lt;interceptor name=&quot;myInterceptor&quot; class=&quot;com.voidking.struts2.tool.MyInterceptor&quot;&gt;&lt;/interceptor&gt;    	&lt;/interceptors&gt;    	&lt;default-interceptor-ref name=&quot;&quot;&gt;&lt;/default-interceptor-ref&gt;    	        &lt;default-action-ref name=&quot;index&quot; /&gt;        &lt;action name=&quot;struts&quot; class=&quot;com.voidking.struts2.action.StrutsAction&quot;&gt;            &lt;result name=&quot;success&quot;&gt;/welcome.jsp&lt;/result&gt;            &lt;result name=&quot;error&quot;&gt;/hello.jsp&lt;/result&gt;            &lt;result name=&quot;input&quot;&gt;/hello.jsp&lt;/result&gt;                        &lt;!-- æ‹¦æˆªé…ç½®åœ¨resultåé¢ --&gt;            &lt;!-- ä½¿ç”¨ç³»ç»Ÿé»˜è®¤æ‹¦æˆªå™¨æ ˆ --&gt;            &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;            &lt;!-- é…ç½®æ‹¦æˆªå™¨ --&gt;            &lt;interceptor-ref name=&quot;myInterceptor&quot;&gt;&lt;/interceptor-ref&gt;                    &lt;/action&gt;                &lt;action name=&quot;upload&quot; class=&quot;com.voidking.struts2.action.UploadAction&quot;&gt;        	&lt;result name=&quot;success&quot;&gt;/uploadsuccess.jsp&lt;/result&gt;        	&lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;        &lt;/action&gt;                &lt;action name=&quot;upload2&quot; class=&quot;com.voidking.struts2.action.Upload2Action&quot;&gt;        	&lt;result name=&quot;success&quot;&gt;/uploadsuccess.jsp&lt;/result&gt;        	&lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;        &lt;/action&gt;                &lt;action name=&quot;save&quot; class=&quot;com.voidking.struts2.action.SaveAction&quot;&gt;        	&lt;result name=&quot;success&quot;&gt;/addsuccess.jsp&lt;/result&gt;        	&lt;result name=&quot;error&quot;&gt;/stu.jsp&lt;/result&gt;        	&lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;        &lt;/action&gt;    &lt;/package&gt;&lt;/struts&gt;
æºä»£ç åˆ†äº«https://github.com/voidking/struts2.gitåŒ…æ‹¬Struts2æ¦‚è¿°ã€Struts2å›½é™…åŒ–åº”ç”¨ã€Struts2æ–‡ä»¶ä¸Šä¼ ã€Struts2ç»¼åˆåº”ç”¨å®ä¾‹ã€‚
å°ç»“æ€§åˆ«ä¿å­˜ä¸ºbitç±»å‹æ•°æ®ï¼Œæèµ·æ¥æ„Ÿè§‰æœ‰ç‚¹éº»çƒ¦ï¼Œæ¢æˆchar(2)ç±»å‹ï¼Œé™å®šå€¼ä¸ºâ€œç”·â€æˆ–â€œå¥³â€ï¼Œä¹Ÿè®¸æ›´æ–¹ä¾¿ä¸€äº›ã€‚
å‚è€ƒæ–‡æ¡£ã€ŠJava EEåŸºç¡€å®ç”¨æ•™ç¨‹ã€‹ï¼Œéƒ‘é˜¿å¥‡ä¸»ç¼–
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>struts2</tag>
      </tags>
  </entry>
  <entry>
    <title>Struts2æ–‡ä»¶ä¸Šä¼ </title>
    <url>/dev-struts2-upload/</url>
    <content><![CDATA[Struts2æ–‡ä»¶ä¸Šä¼ ä¸Šä¼ å•ä¸ªæ–‡ä»¶Struts2ä¸­ï¼Œæä¾›äº†ä¸€ä¸ªå¾ˆå®¹æ˜“æ“ä½œçš„æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ã€‚ç”¨Struts2ä¸Šä¼ å•ä¸ªæ–‡ä»¶çš„åŠŸèƒ½éå¸¸å®¹æ˜“å®ç°ï¼Œåªè¦ä½¿ç”¨æ™®é€šçš„Actionå³å¯ã€‚ä½†ä¸ºäº†è·å¾—ä¸€äº›æ–‡ä»¶ä¸Šä¼ çš„ä¿¡æ¯ï¼Œå¦‚ä¸Šä¼ æ–‡ä»¶åç­‰ï¼Œéœ€è¦æŒ‰ç…§ä¸€å®šè§„åˆ™æ¥ä¸ºActionç±»å¢åŠ ä¸€äº›getterå’Œsetteræ–¹æ³•ã€‚Struts2çš„æ–‡ä»¶ä¸Šä¼ é»˜è®¤ä½¿ç”¨çš„æ˜¯Jakartaçš„Common-FileUploadæ–‡ä»¶ä¸Šä¼ æ¡†æ¶ã€‚å› æ­¤éœ€è¦åœ¨Webåº”ç”¨ä¸­å¢åŠ ä¸¤ä¸ªJaråŒ…ï¼Œå³common-io-*.jarå’Œcommon-fileupload-*.jarã€‚
æˆ‘ä»¬æ¥ç€åœ¨struts2æ¦‚è¿°ä¸­çš„struts2é¡¹ç›®ä¸­å¼€å‘æ–‡ä»¶ä¸Šä¼ å®ä¾‹ã€‚
æŒ‡å®šæ–‡ä»¶å¤¹åœ¨Dç›˜ä¸‹æ–°å»ºuploadæ–‡ä»¶å¤¹ï¼Œä¸Šä¼ çš„æ–‡ä»¶æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚

upload.jspåœ¨WebContentä¸­æ–°å»ºupload.jspï¼Œä»£ç å¦‚ä¸‹ï¼š
&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;    pageEncoding=&quot;UTF-8&quot;%&gt;&lt;%@ taglib uri=&quot;/struts-tags&quot; prefix=&quot;s&quot;%&gt;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;&lt;title&gt;æ–‡ä»¶ä¸Šä¼ &lt;/title&gt;&lt;/head&gt;&lt;body&gt;	&lt;s:form action=&quot;upload.action&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;		&lt;s:file name=&quot;upload&quot; label=&quot;ä¸Šä¼ çš„æ–‡ä»¶&quot;&gt;&lt;/s:file&gt;		&lt;s:submit value=&quot;ä¸Šä¼ &quot;&gt;&lt;/s:submit&gt;	&lt;/s:form&gt;&lt;/body&gt;&lt;/html&gt;
UploadActionpackage com.voidking.struts2.action;import java.io.File;import java.io.FileInputStream;import java.io.FileOutputStream;import java.io.InputStream;import java.io.OutputStream;import com.opensymphony.xwork2.ActionSupport;public class UploadAction extends ActionSupport&#123;	private File upload;	private String uploadFileName;		public String getUploadFileName() &#123;		return uploadFileName;	&#125;	public void setUploadFileName(String uploadFileName) &#123;		this.uploadFileName = uploadFileName;	&#125;	public File getUpload()	&#123;		return upload;	&#125;		public void setUpload(File upload)	&#123;		this.upload=upload;	&#125;		public String execute() throws Exception&#123;		InputStream is=new FileInputStream(getUpload());		OutputStream os = new FileOutputStream(&quot;d:\\upload\\&quot;+uploadFileName);		byte buffer[] = new byte[1024];		int count= 0;		while((count=is.read(buffer))&gt;0)		&#123;			os.write(buffer,0,count);		&#125;		os.close();		is.close();		return SUCCESS;	&#125;	&#125;
ä¸Šä¼ çš„æ–‡ä»¶ç»è¿‡Actionå¤„ç†åï¼Œä¼šè¢«å†™åˆ°æŒ‡å®šçš„è·¯å¾„ä¸‹ã€‚å…¶å®ä¹Ÿå¯ä»¥æŠŠä¸Šä¼ çš„æ–‡ä»¶å†™å…¥æ•°æ®åº“ä¸­ï¼Œä¹‹åçš„ä¾‹å­ä¼šä»‹ç»å¦‚ä½•æŠŠç…§ç‰‡å†™å…¥åˆ°æ•°æ®åº“ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒStruts2ä¸Šä¼ æ–‡ä»¶çš„é»˜è®¤å¤§å°é™åˆ¶ä¸º2MBï¼Œå¦‚æœéœ€è¦ä¿®æ”¹é»˜è®¤å¤§å°ï¼Œåªéœ€è¦åœ¨Struts2çš„struts.propertiesæ–‡ä»¶ä¸­ä¿®æ”¹struts.multipart.maxSizeã€‚å¦‚struts.mulitipart.maxSize=1024è¡¨ç¤ºä¸Šä¼ æ–‡ä»¶çš„æ€»å¤§å°ä¸èƒ½è¶…è¿‡1KBã€‚
struts.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE struts PUBLIC    &quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;    &quot;http://struts.apache.org/dtds/struts-2.0.dtd&quot;&gt;&lt;struts&gt;    &lt;package name=&quot;default&quot; namespace=&quot;/&quot; extends=&quot;struts-default&quot;&gt;        	&lt;interceptors&gt;    		&lt;interceptor name=&quot;myInterceptor&quot; class=&quot;com.voidking.struts2.tool.MyInterceptor&quot;&gt;&lt;/interceptor&gt;    	&lt;/interceptors&gt;    	&lt;default-interceptor-ref name=&quot;&quot;&gt;&lt;/default-interceptor-ref&gt;    	        &lt;default-action-ref name=&quot;index&quot; /&gt;        &lt;action name=&quot;struts&quot; class=&quot;com.voidking.struts2.action.StrutsAction&quot;&gt;            &lt;result name=&quot;success&quot;&gt;/welcome.jsp&lt;/result&gt;            &lt;result name=&quot;error&quot;&gt;/hello.jsp&lt;/result&gt;            &lt;result name=&quot;input&quot;&gt;/hello.jsp&lt;/result&gt;                        &lt;!-- æ‹¦æˆªé…ç½®åœ¨resultåé¢ --&gt;            &lt;!-- ä½¿ç”¨ç³»ç»Ÿé»˜è®¤æ‹¦æˆªå™¨æ ˆ --&gt;            &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;            &lt;!-- é…ç½®æ‹¦æˆªå™¨ --&gt;            &lt;interceptor-ref name=&quot;myInterceptor&quot;&gt;&lt;/interceptor-ref&gt;                    &lt;/action&gt;                &lt;action name=&quot;upload&quot; class=&quot;com.voidking.struts2.action.UploadAction&quot;&gt;        	&lt;result name=&quot;success&quot;&gt;/uploadsuccess.jsp&lt;/result&gt;        &lt;/action&gt;    &lt;/package&gt;&lt;/struts&gt;

uploadsuccess.jsp&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;    pageEncoding=&quot;UTF-8&quot;%&gt;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;&lt;title&gt;ä¸Šä¼ æˆåŠŸ&lt;/title&gt;&lt;/head&gt;&lt;body&gt;	æ­å–œä½ ï¼Œä¸Šä¼ æˆåŠŸï¼&lt;/body&gt;&lt;/html&gt;

404é”™è¯¯éƒ¨ç½²é¡¹ç›®ï¼Œå¯åŠ¨Tomcatï¼Œè®¿é—®ï¼šhttp://localhost:8080/struts2/upload.jsp ï¼Œæç¤º HTTP Status 404 - /struts2/upload.jspã€‚è®¿é—®ä¸»é¡µï¼šhttp://localhost:8080/struts2/ ï¼ŒåŒæ ·æç¤º404é”™è¯¯ï¼
å•Šå‹’ï¼Œè¿™æ˜¯è‚¿ä¹ˆå›äº‹ï¼Ÿæƒ³æ¥æƒ³å»ï¼Œå¼•èµ·é”™è¯¯çš„åŸå› ï¼Œå¯èƒ½æ˜¯æ˜¨å¤©å…³é—­eclipseçš„æ—¶å€™ï¼Œæ²¡æœ‰å…ˆå…³é—­TomcatæœåŠ¡å™¨ï¼Œå¼•èµ·äº†ä¸€äº›é…ç½®é”™è¯¯ã€‚
æŸ¥çœ‹tomcat/confæ–‡ä»¶å¤¹ä¸‹çš„é…ç½®æ–‡ä»¶ï¼Œserver.xmlå’Œtomcat-users.xmlï¼Œæ„Ÿè§‰æ²¡å•¥é—®é¢˜ã€‚
è®¿é—®ï¼šhttp://localhost:8080 ï¼Œä½¿ç”¨manager-guiè´¦æˆ·ç™»å½•tomcatï¼ŒManager Appï¼Œå¯ä»¥çœ‹åˆ°ï¼Œstruts2é¡¹ç›®çš„Runningå±æ€§çš„å€¼ä¸ºfalseã€‚å¥¥~è¿™å°±æ˜¯é—®é¢˜æ‰€åœ¨äº†ï¼ç‚¹å‡»startæŒ‰é’®ï¼Œå•Šå‹’ï¼Œæ— æ•ˆï¼
åˆ é™¤webappsä¸‹çš„struts2å·¥ç¨‹ï¼Œé‡æ–°å‘å¸ƒï¼Œè¿è¡Œtomcatï¼Œè¿˜æ˜¯404é”™è¯¯ï¼
å†æ¬¡ç‚¹å‡»startæŒ‰é’®ï¼ŒåŒæ—¶è§‚å¯ŸConsoleä¸‹é¢çš„ä¿¡æ¯ï¼š
SEVERE: Exception starting filter struts2Unable to load configuration. - package - file:/D:/Server/tomcat/webapps/struts2/WEB-INF/classes/struts.xml:7:67......SEVERE: Error filterStart

ç»è¿‡æŸ¥æ‰¾èµ„æ–™ï¼Œç¡®å®šäº†æ˜¯struts.xmlçš„é…ç½®é—®é¢˜ã€‚é¦–å…ˆä¿®æ”¹struts.xmå¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE struts PUBLIC    &quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;    &quot;http://struts.apache.org/dtds/struts-2.0.dtd&quot;&gt;&lt;struts&gt;    &lt;package name=&quot;default&quot; namespace=&quot;/&quot; extends=&quot;struts-default&quot;&gt;        	&lt;interceptors&gt;    		&lt;interceptor name=&quot;myInterceptor&quot; class=&quot;com.voidking.struts2.tool.MyInterceptor&quot;&gt;&lt;/interceptor&gt;    	&lt;/interceptors&gt;    	&lt;default-interceptor-ref name=&quot;&quot;&gt;&lt;/default-interceptor-ref&gt;    	        &lt;default-action-ref name=&quot;index&quot; /&gt;        &lt;action name=&quot;struts&quot; class=&quot;com.voidking.struts2.action.StrutsAction&quot;&gt;            &lt;result name=&quot;success&quot;&gt;/welcome.jsp&lt;/result&gt;            &lt;result name=&quot;error&quot;&gt;/hello.jsp&lt;/result&gt;            &lt;result name=&quot;input&quot;&gt;/hello.jsp&lt;/result&gt;                        &lt;!-- æ‹¦æˆªé…ç½®åœ¨resultåé¢ --&gt;            &lt;!-- ä½¿ç”¨ç³»ç»Ÿé»˜è®¤æ‹¦æˆªå™¨æ ˆ --&gt;            &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;            &lt;!-- é…ç½®æ‹¦æˆªå™¨ --&gt;            &lt;interceptor-ref name=&quot;myInterceptor&quot;&gt;&lt;/interceptor-ref&gt;                    &lt;/action&gt;    &lt;/package&gt;&lt;/struts&gt;
å¯åŠ¨Tomcatï¼Œé¡¹ç›®æœç„¶å¯ä»¥è®¿é—®äº†ï¼é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆåœ¨packageä¸­å¤šåŠ äº†ä¸€ä¸ªactionå°±ä¼šå‡ºé”™å‘¢ï¼Ÿå¾ˆå¤šæ•™ç¨‹ä¸­ï¼Œæ˜æ˜å¯ä»¥å¤šä¸ªactionå†™åœ¨ä¸€ä¸ªpackageé‡Œå•Šï¼å†çœ‹è¿™ä¸ªpackageï¼Œæœ‰ä½•ç‰¹æ®Šä¹‹å¤„ï¼Ÿé…ç½®äº†æ‹¦æˆªå™¨ï¼é‚£ä¹ˆï¼Œæ¥ä¸‹æ¥çš„actionæ˜¯å¦å¿…é¡»é…ç½®æ‹¦æˆªå™¨ï¼Ÿä¿®æ”¹è¯•è¯•ã€‚
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE struts PUBLIC    &quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;    &quot;http://struts.apache.org/dtds/struts-2.0.dtd&quot;&gt;&lt;struts&gt;    &lt;package name=&quot;default&quot; namespace=&quot;/&quot; extends=&quot;struts-default&quot;&gt;        	&lt;interceptors&gt;    		&lt;interceptor name=&quot;myInterceptor&quot; class=&quot;com.voidking.struts2.tool.MyInterceptor&quot;&gt;&lt;/interceptor&gt;    	&lt;/interceptors&gt;    	&lt;default-interceptor-ref name=&quot;&quot;&gt;&lt;/default-interceptor-ref&gt;    	        &lt;default-action-ref name=&quot;index&quot; /&gt;        &lt;action name=&quot;struts&quot; class=&quot;com.voidking.struts2.action.StrutsAction&quot;&gt;            &lt;result name=&quot;success&quot;&gt;/welcome.jsp&lt;/result&gt;            &lt;result name=&quot;error&quot;&gt;/hello.jsp&lt;/result&gt;            &lt;result name=&quot;input&quot;&gt;/hello.jsp&lt;/result&gt;                        &lt;!-- æ‹¦æˆªé…ç½®åœ¨resultåé¢ --&gt;            &lt;!-- ä½¿ç”¨ç³»ç»Ÿé»˜è®¤æ‹¦æˆªå™¨æ ˆ --&gt;            &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;            &lt;!-- é…ç½®æ‹¦æˆªå™¨ --&gt;            &lt;interceptor-ref name=&quot;myInterceptor&quot;&gt;&lt;/interceptor-ref&gt;                    &lt;/action&gt;                &lt;action name=&quot;upload&quot; class=&quot;com.voidking.struts2.action.UploadAction&quot;&gt;        	&lt;result name=&quot;success&quot;&gt;/uploadsuccess.jsp&lt;/result&gt;        	&lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;        &lt;/action&gt;    &lt;/package&gt;&lt;/struts&gt;
å¯åŠ¨Tomcatï¼Œé¡¹ç›®å¯ä»¥æ­£å¸¸è®¿é—®ã€‚ç»¼ä¸Šï¼Œå¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼špackageåŒ…ä¸­å¦‚æœå®šä¹‰äº†æ‹¦æˆªå™¨ï¼Œé‚£ä¹ˆï¼Œæ¥ä¸‹æ¥çš„actionä¸­å¿…é¡»é…ç½®æ‹¦æˆªå™¨ï¼Œå¦åˆ™ä¼šå¼•èµ·é¡¹ç›®æ— æ³•å¯åŠ¨ï¼
è­¦å‘Šæˆ‘ä»¬çš„é¡¹ç›®å·²ç»å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä¸Šä¼ åŠŸèƒ½ä¹Ÿæ­£å¸¸ã€‚ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬è®¿é—®ï¼šhttp://localhost:8080/struts2/upload.jsp ï¼Œä¼šæŠ¥å‡ºå¦‚ä¸‹è­¦å‘Šï¼š
&#x27;upload.action&#x27; in namespace: &#x27;&#x27;. Form action defaulting to &#x27;action&#x27; attribute&#x27;s literal value.
ç»è¿‡æŸ¥æ‰¾èµ„æ–™ï¼ŒåŸæ¥è¿™æ˜¯å› ä¸ºæ²¡æœ‰æ­£ç¡®ä½¿ç”¨tagï¼Œupload.jspä¿®æ”¹å¦‚ä¸‹ï¼š
&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;    pageEncoding=&quot;UTF-8&quot;%&gt;&lt;%@ taglib uri=&quot;/struts-tags&quot; prefix=&quot;s&quot;%&gt;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;&lt;title&gt;æ–‡ä»¶ä¸Šä¼ &lt;/title&gt;&lt;/head&gt;&lt;body&gt;	&lt;s:form action=&quot;upload&quot; namespace=&quot;/&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;		&lt;s:file name=&quot;upload&quot; label=&quot;ä¸Šä¼ çš„æ–‡ä»¶&quot;&gt;&lt;/s:file&gt;		&lt;s:submit value=&quot;ä¸Šä¼ &quot;&gt;&lt;/s:submit&gt;	&lt;/s:form&gt;&lt;/body&gt;&lt;/html&gt;
å†æ¬¡è®¿é—®ï¼Œå·²ç»æ²¡æœ‰è­¦å‘Šäº†ã€‚ä½†æ˜¯è¿˜æ˜¯æœ‰æç¤ºä¿¡æ¯ï¼š
At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.
å¯¹äºæœ‰æ´ç™–çš„åŒå­¦å¯ä»¥å‚è€ƒä¸‹é¢çš„å‚è€ƒæ–‡æ¡£å»é™¤è¿™ä¸ªä¿¡æ¯ï¼ŒéƒåŒå­¦è¿™é‡Œä¸å†èµ˜è¿°ã€‚
å¤šæ–‡ä»¶ä¸Šä¼ å¤šæ–‡ä»¶ä¸Šä¼ å’Œå•æ–‡ä»¶ä¸Šä¼ ç±»ä¼¼ï¼Œåªéœ€è¦æ”¹åŠ¨å‡ ä¸ªåœ°æ–¹å³å¯ã€‚
upload.jsp&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;    pageEncoding=&quot;UTF-8&quot;%&gt;&lt;%@ taglib uri=&quot;/struts-tags&quot; prefix=&quot;s&quot;%&gt;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;&lt;title&gt;æ–‡ä»¶ä¸Šä¼ &lt;/title&gt;&lt;/head&gt;&lt;body&gt;	&lt;s:form action=&quot;upload&quot; namespace=&quot;/&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;		&lt;s:file name=&quot;upload&quot; label=&quot;ä¸Šä¼ çš„æ–‡ä»¶&quot;&gt;&lt;/s:file&gt;		&lt;s:submit value=&quot;ä¸Šä¼ &quot;&gt;&lt;/s:submit&gt;	&lt;/s:form&gt;	&lt;hr/&gt;	&lt;s:form action=&quot;upload2&quot; namespace=&quot;/&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;		&lt;s:file name=&quot;upload2&quot; label=&quot;ä¸Šä¼ çš„æ–‡ä»¶&quot;&gt;&lt;/s:file&gt;		&lt;s:file name=&quot;upload2&quot; label=&quot;ä¸Šä¼ çš„æ–‡ä»¶&quot;&gt;&lt;/s:file&gt;		&lt;s:file name=&quot;upload2&quot; label=&quot;ä¸Šä¼ çš„æ–‡ä»¶&quot;&gt;&lt;/s:file&gt;		&lt;s:submit value=&quot;æ‰¹é‡ä¸Šä¼ &quot;&gt;&lt;/s:submit&gt;	&lt;/s:form&gt;&lt;/body&gt;&lt;/html&gt;

Upload2Actionpackage com.voidking.struts2.action;import java.io.File;import java.io.FileInputStream;import java.io.FileOutputStream;import java.io.InputStream;import java.io.OutputStream;import java.util.List;import com.opensymphony.xwork2.ActionSupport;public class Upload2Action extends ActionSupport&#123;	private List&lt;File&gt; upload2;	private List&lt;String&gt; upload2FileName;				public List&lt;File&gt; getUpload2() &#123;		return upload2;	&#125;	public void setUpload2(List&lt;File&gt; upload2) &#123;		this.upload2 = upload2;	&#125;	public List&lt;String&gt; getUpload2FileName() &#123;		return upload2FileName;	&#125;	public void setUpload2FileName(List&lt;String&gt; upload2FileName) &#123;		this.upload2FileName = upload2FileName;	&#125;	public String execute() throws Exception&#123;				if(upload2!=null || upload2FileName!=null)		&#123;			for(int i=0;i&lt;upload2.size();i++)			&#123;				InputStream is = new FileInputStream(upload2.get(i));				OutputStream os=new FileOutputStream(&quot;d:\\upload\\&quot;+getUpload2FileName().get(i));				byte buffer[] = new byte[1024];				int count=0;				while((count=is.read(buffer))&gt;0)				&#123;					os.write(buffer,0,count);				&#125;				os.close();				is.close();								return SUCCESS;			&#125;		&#125;				return ERROR;	&#125;	&#125;
è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯å±æ€§å‘½åé—®é¢˜ï¼Œå¦‚æœprivate List&lt;File&gt; upload2;ï¼Œé‚£ä¹ˆå¿…é¡»private List&lt;String&gt; upload2FileName;ï¼Œå¦åˆ™æ— æ³•è·å–åˆ°æ–‡ä»¶åã€‚
struts.xml&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE struts PUBLIC    &quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;    &quot;http://struts.apache.org/dtds/struts-2.0.dtd&quot;&gt;&lt;struts&gt;	&lt;constant name=&quot;struts.multipart.saveDir&quot; value=&quot;/tmp&quot;/&gt;    &lt;package name=&quot;default&quot;  extends=&quot;struts-default&quot;&gt;        	&lt;interceptors&gt;    		&lt;interceptor name=&quot;myInterceptor&quot; class=&quot;com.voidking.struts2.tool.MyInterceptor&quot;&gt;&lt;/interceptor&gt;    	&lt;/interceptors&gt;    	&lt;default-interceptor-ref name=&quot;&quot;&gt;&lt;/default-interceptor-ref&gt;    	        &lt;default-action-ref name=&quot;index&quot; /&gt;        &lt;action name=&quot;struts&quot; class=&quot;com.voidking.struts2.action.StrutsAction&quot;&gt;            &lt;result name=&quot;success&quot;&gt;/welcome.jsp&lt;/result&gt;            &lt;result name=&quot;error&quot;&gt;/hello.jsp&lt;/result&gt;            &lt;result name=&quot;input&quot;&gt;/hello.jsp&lt;/result&gt;                        &lt;!-- æ‹¦æˆªé…ç½®åœ¨resultåé¢ --&gt;            &lt;!-- ä½¿ç”¨ç³»ç»Ÿé»˜è®¤æ‹¦æˆªå™¨æ ˆ --&gt;            &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;            &lt;!-- é…ç½®æ‹¦æˆªå™¨ --&gt;            &lt;interceptor-ref name=&quot;myInterceptor&quot;&gt;&lt;/interceptor-ref&gt;                    &lt;/action&gt;                &lt;action name=&quot;upload&quot; class=&quot;com.voidking.struts2.action.UploadAction&quot;&gt;        	&lt;result name=&quot;success&quot;&gt;/uploadsuccess.jsp&lt;/result&gt;        	&lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;        &lt;/action&gt;                &lt;action name=&quot;upload2&quot; class=&quot;com.voidking.struts2.action.Upload2Action&quot;&gt;        	&lt;result name=&quot;success&quot;&gt;/uploadsuccess.jsp&lt;/result&gt;        	&lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;        &lt;/action&gt;    &lt;/package&gt;&lt;/struts&gt;
å…¶ä¸­ï¼Œ&lt;constant name=&quot;struts.multipart.saveDir&quot; value=&quot;/tmp&quot;/&gt;æœ€å¥½ä¿ç•™ï¼Œä¸ç„¶ä¼šæœ‰æç¤ºä¿¡æ¯:INFO: Unable to find &#39;struts.multipart.saveDir&#39; property setting.ã€‚å¦ä¸€ä¸ªè§£å†³åŠæ³•æ˜¯åœ¨struts.propertiesåŠ å…¥ï¼šstruts.multipart.saveDir = /tmpã€‚
å‚è€ƒæ–‡æ¡£ã€ŠJava EEåŸºç¡€å®ç”¨æ•™ç¨‹ã€‹ï¼Œéƒ‘é˜¿å¥‡ä¸»ç¼–

Form action defaulting to â€˜actionâ€™ attributeâ€™s literal valueï¼šhttp://www.blogjava.net/parable-myth/archive/336387.html

è§£å†³Tomcat7â€œAt least one JAR was scanned for TLDs yet contained no TLDsâ€é—®é¢˜ï¼šhttp://mov-webhobo.iteye.com/blog/1939655http://love-love-l.blog.163.com/blog/static/2107830420131159580327/

]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>struts2</tag>
      </tags>
  </entry>
  <entry>
    <title>Struts2å›½é™…åŒ–åº”ç”¨</title>
    <url>/dev-struts2-international/</url>
    <content><![CDATA[å‰è¨€æœ‰çš„æ—¶å€™ï¼Œä¸€ä¸ªé¡¹ç›®ä¸ä»…è¦æ±‚åªæ”¯æŒä¸€ç§è¯­è¨€ã€‚å¦‚ç”¨ä¸­æ–‡å¼€å‘çš„é¡¹ç›®ï¼Œåªæœ‰æ‡‚ä¸­æ–‡çš„ç”¨æˆ·èƒ½ç”¨ï¼Œè€Œåˆ«çš„å›½å®¶ç”±äºä¸ä½¿ç”¨ä¸­æ–‡å°†éš¾ä»¥ä½¿ç”¨ã€‚è‹¥å†é‡æ–°å¼€å‘ä¸€å¥—åŠŸèƒ½ç›¸åŒä½†åªæ˜¯è¯­è¨€ä¸åŒçš„é¡¹ç›®ï¼Œæ˜¾ç„¶æ˜¯ä¸å¯å–çš„ã€‚æ‰€ä»¥å¯¹äºä¸€ä¸ªé¡¹ç›®ï¼Œå›½é™…åŒ–çš„åº”ç”¨æ˜¯å¿…è¦çš„ã€‚
å»ºç«‹èµ„æºæ–‡ä»¶åœ¨Struts2æ¦‚è¿°ä¸­çš„å®ä¾‹çš„åŸºç¡€ä¸Šï¼Œåœ¨srcæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶struts.propertiesï¼Œå†…å®¹å¦‚ä¸‹ï¼š
struts.custom.resources=messageResource
æˆ–è€…ç›´æ¥åœ¨struts.xmlä¸­æ·»åŠ ï¼š
&lt;constant name=&quot;struts.custom.i18n.resources&quot; value=&quot;messageResource&quot;&gt;&lt;/constant&gt;

åœ¨srcæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸¤ä¸ªæ–‡ä»¶ï¼ŒmessageResource_en_US.propertieså’ŒmessageResource_zh_CN.propertiesï¼Œå†…å®¹åˆ†åˆ«å¦‚ä¸‹ï¼š
username=DLMpassword=KLlogin=login


username=ç™»å½•åpassword=å£ä»¤login=ç™»å½•
PSï¼šåœ¨è¾“å…¥ä¸­æ–‡æ—¶ï¼Œeclipseä¼šå¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨è½¬æˆASCIIå­—ç¬¦ï¼Œæ‰€ä»¥ï¼Œè¾“å…¥å®Œæˆåï¼Œæˆ‘ä»¬çœ‹åˆ°çš„ç»“æœå¦‚ä¸‹ï¼š
username=\u767B\u5F55\u540Dpassword=\u53E3\u4EE4login=\u767B\u5F55

å»ºç«‹login.jspæ–‡ä»¶ä¸ºäº†è®©ç¨‹åºå¯ä»¥æ˜¾ç¤ºå›½é™…åŒ–ä¿¡æ¯ï¼Œåˆ™éœ€è¦åœ¨JSPé¡µé¢è¾“å‡ºkeyï¼Œè€Œä¸æ˜¯ç›´æ¥è¾“å‡ºå­—ç¬¦å¸¸é‡ã€‚Struts2è®¿é—®å›½é™…åŒ–æ¶ˆæ¯ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼š1ã€åœ¨JSPé¡µé¢è¾“å‡ºå›½é™…åŒ–æ¶ˆæ¯ï¼Œå¯ä»¥ä½¿ç”¨Struts2çš„&lt;s:textâ€¦/&gt;æ ‡ç­¾ï¼Œè¯¥æ ‡ç­¾å¯ä»¥æŒ‡å®šnameå±æ€§ï¼Œè¯¥å±æ€§æŒ‡å®šå›½é™…åŒ–èµ„æºæ–‡ä»¶ä¸­çš„keyã€‚2ã€åœ¨Actionä¸­è®¿é—®å›½é™…åŒ–æ¶ˆæ¯ï¼Œå¯ä»¥ä½¿ç”¨ActionSupportç±»çš„getText()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°æŒ‡å®šäº†å›½é™…åŒ–èµ„æºæ–‡ä»¶ä¸­keyã€‚3ã€åœ¨è¡¨å•å…ƒç´ çš„labelå±æ€§é‡Œè¾“å‡ºå›½é™…åŒ–ä¿¡æ¯ï¼Œå¯ä»¥ä¸ºè¯¥è¡¨å•æ ‡ç­¾æŒ‡å®šä¸€ä¸ªkeyå±æ€§ï¼Œè¯¥å±æ€§æŒ‡å®šäº†å›½é™…åŒ–èµ„æºæ–‡ä»¶ä¸­çš„keyã€‚
ä¸‹é¢æ˜¯login.jspæ–‡ä»¶ä»£ç ï¼š
&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;    pageEncoding=&quot;UTF-8&quot;%&gt;&lt;%@ taglib uri=&quot;/struts-tags&quot; prefix=&quot;s&quot; %&gt;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;&lt;title&gt;ç™»å½•&lt;/title&gt;&lt;/head&gt;&lt;body&gt;	&lt;s:i18n name=&quot;messageResource&quot;&gt;		&lt;s:form action=&quot;login.action&quot; method=&quot;post&quot;&gt;			&lt;s:textfield name=&quot;XH&quot; key=&quot;username&quot; size=&quot;20&quot;&gt;&lt;/s:textfield&gt;			&lt;s:textfield name=&quot;KL&quot; key=&quot;password&quot; size=&quot;21&quot;&gt;&lt;/s:textfield&gt;			&lt;s:submit value=&quot;%&#123;getText(&#x27;login&#x27;)&#125;&quot;&gt;&lt;/s:submit&gt;		&lt;/s:form&gt;	&lt;/s:i18n&gt;&lt;/body&gt;&lt;/html&gt;

éƒ¨ç½²è¿è¡Œéƒ¨ç½²é¡¹ç›®ï¼Œå¯åŠ¨Tomcatï¼Œä½¿ç”¨IEè®¿é—®ï¼šhttp://localhost:8080/struts2/login.jsp ï¼Œå¯ä»¥çœ‹åˆ°ä¸­æ–‡ç•Œé¢ã€‚å·¥å…·ï¼ŒInterneté€‰é¡¹ï¼Œå¸¸è§„ï¼Œè¯­è¨€ï¼Œæ·»åŠ ï¼Œè‹±è¯­ï¼ˆç¾å›½ï¼‰[en-US]ï¼Œä¸Šç§»ã€‚åˆ·æ–°é¡µé¢ï¼Œå°±å¯ä»¥çœ‹åˆ°è‹±æ–‡ç•Œé¢äº†ã€‚
eclipseä¸‹æ˜¾ç¤ºclassesæ–‡ä»¶å¤¹eclipseï¼ŒWindowï¼ŒShow Viewï¼ŒNavigatorã€‚
å‚è€ƒæ–‡æ¡£ã€ŠJava EEåŸºç¡€å®ç”¨æ•™ç¨‹ã€‹ï¼Œéƒ‘é˜¿å¥‡ä¸»ç¼–
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>struts2</tag>
      </tags>
  </entry>
  <entry>
    <title>Struts2æ¦‚è¿°</title>
    <url>/dev-struts2-start/</url>
    <content><![CDATA[åè¯è§£é‡ŠStrutsï¼šå®ƒé€šè¿‡é‡‡ç”¨ Java Servlet/JSP æŠ€æœ¯ï¼Œå®ç°äº†åŸºäºJavaEE Webåº”ç”¨çš„MVCè®¾è®¡æ¨¡å¼çš„åº”ç”¨æ¡†æ¶ï¼Œæ˜¯MVCç»å…¸è®¾è®¡æ¨¡å¼ä¸­çš„ä¸€ä¸ªç»å…¸äº§å“ã€‚
Struts2ï¼šå®ƒæ˜¯Strutsçš„ä¸‹ä¸€ä»£äº§å“ï¼Œæ˜¯åœ¨Strutså’ŒWebWorkçš„æŠ€æœ¯åŸºç¡€ä¸Šè¿›è¡Œäº†åˆå¹¶çš„å…¨æ–°çš„Struts2æ¡†æ¶ã€‚å…¶å…¨æ–°çš„Struts2çš„ä½“ç³»ç»“æ„ä¸Strutsçš„ä½“ç³»ç»“æ„å·®åˆ«å·¨å¤§ã€‚Struts2ä»¥WebWorkä¸ºæ ¸å¿ƒï¼Œé‡‡ç”¨æ‹¦æˆªå™¨çš„æœºåˆ¶æ¥å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼Œè¿™æ ·çš„è®¾è®¡ä¹Ÿä½¿å¾—ä¸šåŠ¡é€»è¾‘æ§åˆ¶å™¨èƒ½å¤Ÿä¸ServletAPIå®Œå…¨è„±ç¦»å¼€ï¼Œæ‰€ä»¥Struts2å¯ä»¥ç†è§£ä¸ºWebWorkçš„æ›´æ–°äº§å“ã€‚
MVCæ¨¡å¼çš„æå‡ºæ”¹å˜äº†ç¨‹åºè®¾è®¡çš„æ€è·¯ï¼Œä½†ä»£ç çš„è§„èŒƒæ€§è¿˜æ˜¯å¾ˆå·®ï¼Œè€ŒStrutsæ¡†æ¶åˆ™å…·æœ‰ç»„ä»¶çš„æ¨¡å—åŒ–ã€çµæ´»æ€§å’Œé‡ç”¨æ€§çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶ä¹Ÿç®€åŒ–äº†åŸºäºMVCçš„Webåº”ç”¨ç¨‹åºçš„å¼€å‘ï¼Œä»åº”ç”¨çš„è§’åº¦æ¥è¯´ï¼ŒStrutsæœ‰ä¸‰å¤§å—ï¼šStrutsæ ¸å¿ƒç±»ã€Strutsé…ç½®æ–‡ä»¶åŠStrutsæ ‡ç­¾åº“ã€‚
Strutsæœ¬èº«å°±å®ç°äº†MVCæ¨¡å¼ï¼Œå°±Strutsçš„å‘å±•æ¥è¯´ï¼Œä»ä»¥å‰çš„Struts1åˆ°ç°åœ¨çš„Struts2ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†ç»™ç¨‹åºå‘˜ä¸€ä¸ªå¥½çš„æ¡†æ¶æ¥å¼€å‘åº”ç”¨è½¯ä»¶ã€‚

å®˜ç½‘http://struts.apache.org/index.html
ä¸‹è½½http://struts.apache.org/download
ä¸‹è½½çš„ä¸‹è½½ struts-*-all.zip è§£å‹åï¼Œæœ‰å››ä¸ªæ–‡ä»¶å¤¹ï¼š1ã€appsã€‚åŒ…å«åŸºäºStruts2çš„ç¤ºä¾‹åº”ç”¨ï¼Œæ˜¯å­¦ä¹ Struts2éå¸¸æœ‰ç”¨çš„èµ„æ–™ã€‚2ã€docsã€‚åŒ…å«Struts2çš„ç›¸å…³æ–‡æ¡£ï¼Œå¦‚Struts2å¿«é€Ÿå…¥é—¨ã€Struts2æ–‡æ¡£ã€APIæ–‡æ¡£ç­‰èµ„æ–™ã€‚3ã€libã€‚åŒ…å«Struts2æ¡†æ¶çš„æ ¸å¿ƒç±»åº“ï¼Œä»¥åŠStruts2çš„ç¬¬ä¸‰æ–¹æ’ä»¶ç±»åº“ã€‚å…¶ä¸­æœ‰5ä¸ªæ˜¯å¿…é¡»çš„ï¼šstruts2-core-*.jarã€xwork-*.jarã€ ognl-*.jarã€commons-logging-*.jarã€freemarker-*.jarã€‚è¿˜æœ‰3ä¸ªåŒ…ä¹Ÿè¦æ³¨æ„å¯¼å…¥ï¼Œä¸å¯¼å…¥è¿è¡ŒTomcatæ—¶å€™å¯èƒ½ä¼šå‡ºç°å¼‚å¸¸ã€‚åˆ†åˆ«æ˜¯ï¼šcommons-io-*.jarã€commons-fileupload-*.jarå’Œjavassist-*.ga.jarã€‚æ•´åˆSpringä¸Strutsæ—¶ï¼Œåœ¨Strutsçš„libç›®å½•ä¸­æ‰¾åˆ°struts2-spring-plugin-*.jarï¼Œå¼•å…¥åˆ°å·¥ç¨‹ä¸­ã€‚4ã€srcã€‚åŒ…å«Struts2æ¡†æ¶çš„å…¨éƒ¨æºä»£ç ã€‚
MVCç®€ä»‹MVCåŒ…å«ä¸‰ä¸ªåŸºç¡€éƒ¨åˆ†ï¼šModelã€Viewå’ŒControllerï¼Œè¿™ä¸‰ä¸ªéƒ¨åˆ†ä»¥æœ€å°çš„è€¦åˆååŒå·¥ä½œï¼Œä»¥å¢åŠ ç¨‹åºçš„å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚åœ¨JSP demoè®¾è®¡ä¸­ï¼Œé¦–å…ˆJSPé¡µé¢ä½œä¸ºViewï¼ŒServletä½œä¸ºControllerï¼Œè€ŒJavaBeanä½œä¸ºModelã€‚å…·ä½“æ¥è¯´ï¼ŒMVCå…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š1ã€å¤šä¸ªè§†å›¾å¯ä»¥å¯¹åº”ä¸€ä¸ªæ¨¡å‹ã€‚æŒ‰MVCè®¾è®¡æ¨¡å¼ï¼Œä¸€ä¸ªæ¨¡å‹å¯¹åº”å¤šä¸ªè§†å›¾ï¼Œå¯ä»¥å‡å°‘ä»£ç çš„å¤åˆ¶åŠä»£ç çš„ç»´æŠ¤é‡ï¼Œä¸€æ—¦æ¨¡å‹å‘ç”Ÿæ”¹å˜ï¼Œä¹Ÿæ˜“äºç»´æŠ¤ã€‚
2ã€æ¨¡å‹è¿”å›çš„æ•°æ®ä¸ç°å®é€»è¾‘åˆ†ç¦»ã€‚æ¨¡å‹æ•°æ®å¯ä»¥åº”ç”¨ä»»ä½•æ˜¾ç¤ºæŠ€æœ¯ï¼Œä¾‹å¦‚ï¼Œä½¿ç”¨JSPé¡µé¢ã€Velocityæ¨¡æ¿æˆ–è€…ç›´æ¥äº§ç”ŸExcelæ–‡æ¡£ç­‰ã€‚
3ã€åº”ç”¨è¢«åˆ†ä¸ºä¸‰å±‚ï¼Œé™ä½äº†å„å±‚ä¹‹é—´çš„è€¦åˆï¼Œæä¾›äº†åº”ç”¨çš„å¯æ‰©å±•æ€§ã€‚
4ã€æ§åˆ¶å±‚çš„æ¦‚å¿µä¹Ÿå¾ˆæœ‰æ•ˆï¼Œç”±äºå®ƒæŠŠä¸åŒçš„æ¨¡å‹å’Œä¸åŒçš„è§†å›¾ç»„åˆåœ¨ä¸€èµ·ï¼Œå®Œæˆä¸åŒçš„è¯·æ±‚ï¼Œå› æ­¤æ§åˆ¶å±‚å¯ä»¥è¯´æ˜¯åŒ…å«äº†ç”¨æˆ·è¯·æ±‚æƒé™çš„æ¦‚å¿µã€‚
5ã€MVCæ›´ç¬¦åˆè½¯ä»¶å·¥ç¨‹åŒ–ç®¡ç†çš„ç²¾ç¥ã€‚ä¸åŒçš„å±‚å„å¸å…¶èŒï¼Œæ¯ä¸€å±‚çš„ç»„ä»¶å…·æœ‰ç›¸åŒçš„ç‰¹å¾ï¼Œæœ‰åˆ©äºé€šè¿‡å·¥ç¨‹åŒ–å’Œå·¥å…·åŒ–äº§ç”Ÿç®¡ç†ç¨‹åºä»£ç ã€‚
Struts2ä½“ç³»ç»“æ„Struts2çš„åŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼š1ã€Webæµè§ˆå™¨è¯·æ±‚ä¸€ä¸ªèµ„æºã€‚2ã€è¿‡æ»¤å™¨DispatcheræŸ¥æ‰¾è¯·æ±‚ï¼Œç¡®å®šé€‚å½“çš„Actionã€‚3ã€æ‹¦æˆªå™¨è‡ªåŠ¨å¯¹è¯·æ±‚åº”ç”¨é€šç”¨åŠŸèƒ½ï¼Œå¦‚éªŒè¯å’Œæ–‡ä»¶ä¸Šä¼ ç­‰æ“ä½œã€‚4ã€Actionçš„executeæ–¹æ³•é€šå¸¸ç”¨æ¥å­˜å‚¨å’Œé‡æ–°è·å¾—ä¿¡æ¯ï¼ˆé€šè¿‡æ•°æ®åº“ï¼‰ã€‚5ã€ç»“æœè¢«è¿”å›åˆ°æµè§ˆå™¨ã€‚å¯èƒ½æ˜¯HTMLã€å›¾ç‰‡ã€PDFæˆ–å…¶ä»–ã€‚
å…¶å®ï¼ŒStruts2æ¡†æ¶çš„åº”ç”¨ç€é‡åœ¨æ§åˆ¶ä¸Šã€‚ç®€å•çš„æµç¨‹æ˜¯ï¼šé¡µé¢-&gt;æ§åˆ¶å™¨-&gt;é¡µé¢ã€‚æœ€é‡è¦çš„æ§åˆ¶å™¨çš„å–æ•°æ®ä¸å¤„ç†åä¼ æ•°æ®çš„é—®é¢˜ã€‚
Struts2å®ä¾‹å¼€å‘å»ºç«‹ä¸€ä¸ªWebé¡¹ç›®æ–°å»ºDynamic Web Projectï¼Œå‘½åä¸ºâ€œstruts2â€ã€‚
åŠ è½½Struts2åŸºæœ¬ç±»åº“å³å‡»é¡¹ç›®åï¼ŒPropertiesï¼ŒJava Build Pathï¼ŒLibrariesï¼ŒAdd Libraryâ€¦ï¼ŒUser Libraryï¼ŒNextï¼ŒUser Librariesâ€¦ï¼ŒNewâ€¦ï¼Œè¾“å…¥â€œstruts2â€ï¼ŒOKï¼ŒAdd External JARsâ€¦ï¼Œé€‰ä¸­5ä¸ªå¿…é¡»çš„jaræ–‡ä»¶ï¼Œæ‰“å¼€ï¼ŒOKã€‚
å³å‡»é¡¹ç›®åï¼ŒPropertiesï¼ŒJava Build Pathï¼ŒLibrariesï¼ŒAdd Libraryâ€¦ï¼ŒUser Libraryï¼ŒNextï¼Œé€‰ä¸­â€œstruts2â€ï¼ŒFinishã€‚
é…ç½®web.xmlæ–‡ä»¶åœ¨WebContent/WEB-INFä¸­æ–°å»ºæ–‡ä»¶web.xmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app id=&quot;WebApp_9&quot; version=&quot;2.4&quot; xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&gt;	&lt;welcome-file-list&gt;		&lt;welcome-file&gt;/hello.jsp&lt;/welcome-file&gt;	&lt;/welcome-file-list&gt;    &lt;filter&gt;        &lt;filter-name&gt;struts2&lt;/filter-name&gt;        &lt;filter-class&gt;org.apache.struts2.dispatcher.FilterDispatcher&lt;/filter-class&gt;    &lt;/filter&gt;    &lt;filter-mapping&gt;        &lt;filter-name&gt;struts2&lt;/filter-name&gt;        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;    &lt;/filter-mapping&gt;&lt;/web-app&gt;
åˆ›å»ºhello.jspåœ¨WebContentä¸­æ–°å»ºhello.jspï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;    pageEncoding=&quot;UTF-8&quot;%&gt;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;&lt;title&gt;Struts2åº”ç”¨&lt;/title&gt;&lt;/head&gt;&lt;body&gt;	&lt;form action=&quot;struts.action&quot; method=&quot;post&quot;&gt;		è¯·è¾“å…¥å§“åï¼š&lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;&lt;br/&gt;		&lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;/&gt;	&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;
Actionå®ç°ç±»æ–°å»ºåŒ…com.voidking.struts2.actionï¼Œæ–°å»ºç±»StrutsActionï¼Œä»£ç å¦‚ä¸‹ï¼š
package com.voidking.struts2.action;import java.util.Map;import com.opensymphony.xwork2.ActionContext;import com.opensymphony.xwork2.ActionSupport;public class StrutsAction extends ActionSupport&#123;	private String name;		public String getName()	&#123;		return name;			&#125;		public void setName(String name)	&#123;		this.name=name;	&#125;		public String execute() throws Exception	&#123;		if(!name.equals(&quot;HelloWorld&quot;))		&#123;			Map request = (Map)ActionContext.getContext().get(&quot;request&quot;);			request.put(&quot;name&quot;, getName());			return &quot;success&quot;;		&#125;else &#123;			return &quot;error&quot;;		&#125;	&#125;&#125;
åœ¨å†™ä»£ç çš„æ—¶å€™ï¼ŒéƒåŒå­¦å‘ç°ï¼Œå½“è¾“å…¥ç±»ActionSupportæ—¶ï¼Œä¸ä¼šå‡ºç°ä»£ç æç¤ºã€‚äºæ˜¯ï¼ŒéƒåŒå­¦ç›´æ¥æŠŠåˆšæ‰çš„Strutsçš„5ä¸ªä¸»è¦ç±»åº“æ‹·è´åˆ°äº†WebContent/libä¸‹ï¼Œæœç„¶å‡ºç°äº†ä»£ç æç¤ºã€‚ä¼°è®¡æ˜¯å› ä¸ºeclipseåœ¨ç¼–è¾‘æ—¶ä¸ä¼šæ‰«æé€šè¿‡Java Build Pathæ·»åŠ çš„ç±»åº“ï¼Œè€Œä¼šæ‰«ælibä¸­çš„ç±»åº“ã€‚
åˆ›å»ºå¹¶é…ç½®struts.xmlæ–‡ä»¶åœ¨srcä¸­æ–°å»ºæ–‡ä»¶struts.xmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE struts PUBLIC    &quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;    &quot;http://struts.apache.org/dtds/struts-2.0.dtd&quot;&gt;&lt;struts&gt;    &lt;package name=&quot;default&quot; namespace=&quot;/&quot; extends=&quot;struts-default&quot;&gt;        &lt;default-action-ref name=&quot;index&quot; /&gt;        &lt;action name=&quot;struts&quot; class=&quot;com.voidking.struts2.action.StrutsAction&quot;&gt;            &lt;result name=&quot;success&quot;&gt;/welcome.jsp&lt;/result&gt;            &lt;result name=&quot;error&quot;&gt;/hello.jsp&lt;/result&gt;        &lt;/action&gt;    &lt;/package&gt;&lt;/struts&gt;
åˆ›å»ºwelcome.jspåœ¨WebContentä¸­æ–°å»ºæ–‡ä»¶welcome.jspï¼Œä»£ç å¦‚ä¸‹ï¼š
&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;    pageEncoding=&quot;UTF-8&quot;%&gt;&lt;%@ taglib uri=&quot;/struts-tags&quot; prefix=&quot;s&quot; %&gt;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;&lt;title&gt;æ¬¢è¿&lt;/title&gt;&lt;/head&gt;&lt;body&gt;	hello&lt;s:property value=&quot;#request.name&quot;/&gt;!&lt;/body&gt;&lt;/html&gt;
éƒ¨ç½²å’Œè¿è¡Œå‘å¸ƒï¼Œå¯åŠ¨Tomcatï¼Œè®¿é—®http://localhost:8080/struts2/ æˆ–è€… http://localhost:8080/struts2/hello.jsp 
PSï¼šåœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¿®æ”¹äº†é¡¹ç›®ä¸­çš„.javaæ–‡ä»¶æˆ–è€…é…ç½®æ–‡ä»¶ï¼Œå°±å¿…é¡»é‡æ–°å¯åŠ¨TomcatæœåŠ¡å™¨ï¼Œè€Œä¿®æ”¹äº†JSPæ–‡ä»¶åˆ™åªéœ€è¦åˆ·æ–°é¡µé¢å³å¯ã€‚
Struts2å®ä¾‹åˆ†æå·¥ä½œæµç¨‹ç”¨æˆ·å‘é€ä¸€ä¸ªè¯·æ±‚åï¼Œweb.xmlä¸­é…ç½®çš„FilterDispatcherå°±ä¼šè¿‡æ»¤è¯¥è¯·æ±‚ã€‚å¦‚æœè¯·æ±‚æ˜¯ä»¥.actionç»“å°¾ï¼Œè¯¥è¯·æ±‚å°±ä¼šè¢«è½¬å…¥Struts2æ¡†æ¶å¤„ç†ã€‚Struts2æ¡†æ¶æ¥æ”¶åˆ°*.actionè¯·æ±‚åï¼Œå°†æ ¹æ®*.actionè¯·æ±‚å‰é¢çš„â€œ*â€æ¥å†³å®šè°ƒç”¨å“ªä¸ªä¸šåŠ¡ã€‚
Struts2æ¡†æ¶ä¸­çš„é…ç½®æ–‡ä»¶struts.xmlä¼šèµ·æ˜ å°„ä½œç”¨ï¼Œå®ƒä¼šæ ¹æ®â€œ*â€æ¥å†³å®šè°ƒç”¨ç”¨æˆ·å®šä¹‰çš„å“ªä¸ªActionç±»ã€‚ä¾‹å¦‚åœ¨ä¸Šé¢é¡¹ç›®ä¸­ï¼Œè¯·æ±‚ä¸ºstruts.actionï¼Œæ‰€ä»¥ï¼Œåœ¨struts.xmlä¸­æœ‰ä¸ªActionç±»çš„nameä¸ºâ€œstrutsâ€ï¼Œè¿™è¡¨ç¤ºè¯¥è¯·æ±‚ä¸è¿™ä¸ªActionæ¥åŒ¹é…ï¼Œå°±ä¼šè°ƒç”¨è¯¥Actionä¸­classå±æ€§æŒ‡å®šçš„Actionç±»ã€‚
ä½†æ˜¯ï¼Œåœ¨Struts2ä¸­ï¼Œç”¨æˆ·å®šä¹‰çš„Actionç±»å¹¶ä¸æ˜¯ä¸šåŠ¡æ‹¦æˆªå™¨ï¼Œè€Œæ˜¯Actionä»£ç†ï¼Œå…¶å¹¶æ²¡æœ‰å’ŒServletè€¦åˆã€‚æ‰€ä»¥Struts2æ¡†æ¶æä¾›äº†ä¸€ç³»åˆ—æ‹¦æˆªå™¨ï¼Œå®ƒè´Ÿè´£å°†HttpServletRequestè¯·æ±‚ä¸­çš„è¯·æ±‚å‚æ•°è§£æå‡ºæ¥ï¼Œä¼ å…¥åˆ°ç”¨æˆ·å®šä¹‰çš„Actionç±»ä¸­ã€‚ç„¶åå†è°ƒç”¨å…¶execute()æ–¹æ³•å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œå¤„ç†ç»“æŸåï¼Œä¼šè¿”å›ä¸€ä¸ªå€¼ï¼Œè¿™æ—¶ï¼ŒStruts2æ¡†æ¶çš„struts.xmlæ–‡ä»¶åˆèµ·åˆ°æ˜ å°„ä½œç”¨ï¼Œä¼šæ ¹æ®å…¶è¿”å›çš„å€¼æ¥å†³å®šè·³è½¬åˆ°å“ªä¸€ä¸ªé¡µé¢ã€‚å¦‚åœ¨ä¸Šé¢é¡¹ç›®ä¸­ï¼Œå¦‚æœè¿”å›çš„æ˜¯SUCCESSï¼Œå°±ä¼šè·³åˆ°welcome.jspé¡µé¢ï¼›å¦‚æœæ˜¯ERRORï¼Œå°±ä¼šå›åˆ°åŸé¡µé¢ã€‚
å„æ–‡ä»¶è¯¦è§£web.xmlweb.xmlä¸­å®šä¹‰äº†ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œé‚£ä¹ˆï¼Œè¿‡æ»¤å™¨æ˜¯ä»€ä¹ˆï¼Ÿ
è¿‡æ»¤å™¨æ˜¯ç”¨æˆ·è¯·æ±‚å’Œå¤„ç†ç¨‹åºä¹‹é—´çš„ä¸€å±‚å¤„ç†ç¨‹åºã€‚å®ƒå¯ä»¥å¯¹ç”¨æˆ·è¯·æ±‚å’Œå¤„ç†ç¨‹åºå“åº”çš„å†…å®¹è¿›è¡Œå¤„ç†ï¼Œé€šå¸¸ç”¨äºæƒé™æ§åˆ¶ã€ç¼–ç è½¬æ¢ç­‰åœºåˆã€‚å®ƒå…ˆäºä¸ä¹‹ç›¸å…³çš„servletæˆ–JSPé¡µé¢è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šã€‚è¿‡æ»¤å™¨å¯é™„åŠ åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªservletæˆ–JSPé¡µé¢ä¸Šï¼Œå¹¶ä¸”å¯ä»¥æ£€æŸ¥è¿›å…¥è¿™äº›èµ„æºçš„è¯·æ±‚ä¿¡æ¯ã€‚åœ¨è¿™ä¹‹åï¼Œè¿‡æ»¤å™¨å¯ä»¥ä½œå¦‚ä¸‹çš„é€‰æ‹©ï¼š1ã€ä»¥å¸¸è§„çš„æ–¹å¼è°ƒç”¨èµ„æºï¼ˆå³ï¼Œè°ƒç”¨servletæˆ–JSPé¡µé¢ï¼‰ã€‚2ã€åˆ©ç”¨ä¿®æ”¹è¿‡çš„è¯·æ±‚ä¿¡æ¯è°ƒç”¨èµ„æºã€‚3ã€è°ƒç”¨èµ„æºï¼Œä½†åœ¨å‘é€å“åº”åˆ°å®¢æˆ·æœºå‰å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚4ã€é˜»æ­¢è¯¥èµ„æºè°ƒç”¨ï¼Œä»£ä¹‹ä»¥è½¬åˆ°å…¶ä»–çš„èµ„æºï¼Œè¿”å›ä¸€ä¸ªç‰¹å®šçš„çŠ¶æ€ä»£ç æˆ–ç”Ÿæˆæ›¿æ¢è¾“å‡ºã€‚
åœ¨Servletä½œä¸ºè¿‡æ»¤å™¨ä½¿ç”¨æ—¶ï¼Œå®ƒå¯ä»¥å¯¹å®¢æˆ·çš„è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚å¤„ç†å®Œæˆåï¼Œå®ƒä¼šäº¤ç»™ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨å¤„ç†ï¼Œè¿™æ ·ï¼Œå®¢æˆ·çš„è¯·æ±‚åœ¨è¿‡æ»¤é“¾é‡Œé€ä¸ªå¤„ç†ï¼Œç›´åˆ°è¯·æ±‚å‘é€åˆ°ç›®æ ‡ä¸ºæ­¢ã€‚ä¾‹å¦‚ï¼ŒæŸç½‘ç«™é‡Œæœ‰æäº¤â€œä¿®æ”¹çš„æ³¨å†Œä¿¡æ¯â€çš„ç½‘é¡µï¼Œå½“ç”¨æˆ·å¡«å†™å®Œä¿®æ”¹ä¿¡æ¯å¹¶æäº¤åï¼ŒæœåŠ¡å™¨åœ¨è¿›è¡Œå¤„ç†æ—¶éœ€è¦åšä¸¤é¡¹å·¥ä½œï¼šåˆ¤æ–­å®¢æˆ·ç«¯çš„ä¼šè¯æ˜¯å¦æœ‰æ•ˆï¼›å¯¹æäº¤çš„æ•°æ®è¿›è¡Œç»Ÿä¸€ç¼–ç ã€‚è¿™ä¸¤é¡¹å·¥ä½œå¯ä»¥åœ¨ç”±ä¸¤ä¸ªè¿‡æ»¤å™¨ç»„æˆçš„è¿‡æ»¤é“¾é‡Œè¿›è¡Œå¤„ç†ã€‚å½“è¿‡æ»¤å™¨å¤„ç†æˆåŠŸåï¼ŒæŠŠæäº¤çš„æ•°æ®å‘é€åˆ°æœ€ç»ˆç›®æ ‡ï¼›å¦‚æœè¿‡æ»¤å™¨å¤„ç†ä¸æˆåŠŸï¼Œå°†æŠŠè§†å›¾æ´¾å‘åˆ°æŒ‡å®šçš„é”™è¯¯é¡µé¢ã€‚
Servletè¿‡æ»¤å™¨æ˜¯åœ¨Java Servletè§„èŒƒä¸­å®šä¹‰çš„ï¼Œå®ƒèƒ½å¤Ÿå¯¹è¿‡æ»¤å™¨å…³è”çš„URLè¯·æ±‚å’Œå“åº”è¿›è¡Œç›¸å…³æ£€æŸ¥å’Œä¿®æ”¹ã€‚Servletè¿‡æ»¤å™¨èƒ½å¤Ÿåœ¨Servletè¢«è°ƒç”¨ä¹‹åæ£€æŸ¥responseå¯¹è±¡ï¼Œä¿®æ”¹responseçš„Headerå¯¹è±¡å’Œresponseå†…å®¹ã€‚Servletè¿‡æ»¤å™¨è¿‡æ»¤çš„URLèµ„æºå¯ä»¥æ˜¯Servletã€JSPã€HTMLæ–‡ä»¶ï¼Œæˆ–è€…æ˜¯æ•´ä¸ªè·¯å¾„ä¸‹çš„ä»»ä½•èµ„æºã€‚å¤šä¸ªè¿‡æ»¤å™¨å¯ä»¥æ„æˆä¸€ä¸ªè¿‡æ»¤å™¨é“¾ï¼Œå½“è¯·æ±‚è¿‡æ»¤å™¨å…³è”çš„URLæ—¶ï¼Œè¿‡æ»¤å™¨å°±ä¼šé€ä¸ªå‘ç”Ÿä½œç”¨ã€‚
æ‰€æœ‰è¿‡æ»¤å™¨å¿…é¡»å®ç°java.Servlet.Filteræ¥å£ï¼Œè¿™ä¸ªæ¥å£ä¸­å«æœ‰3ä¸ªè¿‡æ»¤å™¨ç±»å¿…é¡»å®ç°çš„æ–¹æ³•ï¼š1ã€init(FilterConfig)ï¼šServletè¿‡æ»¤å™¨çš„åˆå§‹åŒ–æ–¹æ³•ï¼ŒServletå®¹å™¨åˆ›å»ºServletè¿‡æ»¤å™¨å®ä¾‹åå°†è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚2ã€doFilter(ServletRequest,ServletResponse,FilterChain)ï¼šå®Œæˆå®é™…çš„è¿‡æ»¤æ“ä½œï¼Œå½“ç”¨æˆ·è¯·æ±‚ä¸è¿‡æ»¤å™¨å…³è”çš„URLæ—¶ï¼ŒServletå®¹å™¨å°†å…ˆè°ƒç”¨è¿‡æ»¤å™¨doFilteræ–¹æ³•ï¼Œè¿”å›å“åº”ä¹‹å‰ä¹Ÿä¼šè°ƒç”¨æ­¤æ–¹æ³•ã€‚FilterChainå‚æ•°ç”¨äºè®¿é—®è¿‡æ»¤å™¨é“¾ä¸Šçš„ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨ã€‚3ã€destroy()ï¼šServletå®¹å™¨åœ¨é”€æ¯è¿‡æ»¤å™¨å®ä¾‹å‰è°ƒç”¨è¯¥æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥é‡Šæ”¾Servletè¿‡æ»¤å™¨å ç”¨çš„èµ„æºã€‚
è¿‡æ»¤å™¨ç±»ç¼–å†™å®Œæˆåï¼Œå¿…é¡»è¦åœ¨web.xmlä¸­è¿›è¡Œé…ç½®ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
&lt;filter&gt;	&lt;!--è‡ªå®šä¹‰çš„åç§°--&gt;	&lt;filter-name&gt;è¿‡æ»¤å™¨å&lt;/filter-name&gt;	&lt;!--è‡ªå®šä¹‰çš„è¿‡æ»¤å™¨ç±»ï¼Œæ³¨æ„ï¼Œå¦‚æœå†™åœ¨åŒ…ä¸‹ï¼Œè¦åŠ åŒ…å--&gt;	&lt;filter-class&gt;è¿‡æ»¤å™¨å¯¹åº”ç±»&lt;/filter-class&gt;	&lt;init-param&gt;		&lt;!--ç±»ä¸­å‚æ•°åç§°--&gt;		&lt;param-name&gt;å‚æ•°åç§°&lt;/param-name&gt;		&lt;!--å¯¹åº”å‚æ•°çš„å€¼--&gt;		&lt;param-value&gt;å‚æ•°å€¼&lt;/param-value&gt;	&lt;/init-param&gt;&lt;/filter&gt;
è¿‡æ»¤å™¨å¿…é¡»å’Œç‰¹å®šçš„URLå…³è”æ‰èƒ½å‘æŒ¥ä½œç”¨ï¼Œè¿‡æ»¤å™¨çš„å…³è”æ–¹å¼æœ‰3ç§ï¼šä¸ä¸€ä¸ªURLå…³è”ã€ä¸ä¸€ä¸ªURLç›®å½•ä¸‹çš„æ‰€æœ‰èµ„æºå…³è”ã€ä¸ä¸€ä¸ªServeletå…³è”ã€‚
&lt;filter-mapping&gt;	&lt;!--è¿™é‡Œä¸ä¸Šé¢é…ç½®çš„åç§°è¦ç›¸åŒ--&gt;	&lt;filter-name&gt;è¿‡æ»¤å™¨å&lt;/filter-name&gt;	&lt;!--ä¸ä¸€ä¸ªURLèµ„æºå…³è”--&gt;	&lt;url-pattern&gt;xxx.jsp&lt;/url-pattern&gt;&lt;/filter-mapping&gt;
&lt;filter-mapping&gt;	&lt;!--è¿™é‡Œä¸ä¸Šé¢é…ç½®çš„åç§°è¦ç›¸åŒ--&gt;	&lt;filter-name&gt;è¿‡æ»¤å™¨å&lt;/filter-name&gt;	&lt;!--ä¸ä¸€ä¸ªURLç›®å½•ä¸‹æ‰€æœ‰èµ„æºå…³è”--&gt;	&lt;url-pattern&gt;/*&lt;/url-pattern&gt;&lt;/filter-mapping&gt;
&lt;filter-mapping&gt;	&lt;!--è¿™é‡Œä¸ä¸Šé¢é…ç½®çš„åç§°è¦ç›¸åŒ--&gt;	&lt;filter-name&gt;è¿‡æ»¤å™¨å&lt;/filter-name&gt;	&lt;!--ä¸ä¸€ä¸ªServletå…³è”--&gt;	&lt;url-pattern&gt;Servletåç§°&lt;/url-pattern&gt;&lt;/filter-mapping&gt;

struts.xmlstruts.xmlæ˜¯Struts2æ¡†æ¶çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œä¸»è¦ç”¨äºé…ç½®å¼€å‘äººå‘˜ç¼–å†™çš„actionã€‚struts.xmlæ–‡ä»¶é€šå¸¸æ”¾åœ¨Webåº”ç”¨ç¨‹åºçš„WEB-INF/classesç›®å½•ä¸‹ï¼ˆsrcç›®å½•ä¸‹ä¹Ÿå¯ä»¥ï¼Œsrcç›®å½•ä¸‹ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶é»˜è®¤æ”¾åœ¨WEB-INF/classesç›®å½•ä¸‹ï¼‰ï¼Œè¯¥ç›®å½•ä¸‹çš„struts.xmlå°†è¢«Struts2æ¡†æ¶è‡ªåŠ¨åŠ è½½ã€‚
struts.xmlæ˜¯ä¸€ä¸ªXMLæ–‡ä»¶ï¼Œæ–‡ä»¶å‰é¢æ˜¯XMLçš„å¤´æ–‡ä»¶ï¼Œç„¶åæ˜¯æ ‡ç­¾ï¼Œä½äºStruts2é…ç½®çš„æœ€å¤–å±‚ï¼Œå…¶ä»–æ ‡ç­¾éƒ½æ˜¯åŒ…å«åœ¨å®ƒé‡Œé¢çš„ã€‚
packageå…ƒç´ Struts2çš„åŒ…ç±»ä¼¼äºJavaä¸­çš„åŒ…ï¼Œå°†actionã€resultã€resultç±»å‹ã€æ‹¦æˆªå™¨å’Œæ‹¦æˆªå™¨æ ˆç»„ç»‡ä¸ºä¸€ä¸ªé€»è¾‘å•å…ƒï¼Œä»è€Œç®€åŒ–äº†ç»´æŠ¤å·¥ä½œï¼Œæé«˜äº†é‡ç”¨æ€§ã€‚
ä¸Javaä¸­çš„åŒ…ä¸åŒçš„æ˜¯ï¼ŒStruts2ä¸­çš„åŒ…å¯ä»¥æ‰©å±•å¦å¤–çš„åŒ…ï¼Œä»è€Œâ€œç»§æ‰¿â€åŸæœ‰åŒ…çš„æ‰€æœ‰å®šä¹‰ï¼Œå¹¶å¯ä»¥æ·»åŠ è‡ªå·±åŒ…çš„ç‰¹æœ‰é…ç½®ï¼Œä»¥åŠä¿®æ”¹åŸæœ‰åŒ…çš„éƒ¨åˆ†é…ç½®ã€‚ä»è¿™ä¸€ç‚¹ä¸Šçœ‹ï¼ŒStruts2ä¸­çš„åŒ…æ›´åƒJavaä¸­çš„ç±»ã€‚
packageæœ‰ä»¥ä¸‹å‡ ä¸ªå¸¸ç”¨å±æ€§ï¼š1ã€nameï¼šè¯¥å±æ€§æ˜¯å¿…é€‰çš„ï¼ŒæŒ‡å®šåŒ…çš„åå­—ï¼Œè¿™ä¸ªåå­—å°†ä½œä¸ºå¼•ç”¨è¯¥åŒ…çš„é”®ã€‚æ³¨æ„ï¼ŒåŒ…çš„åå­—å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œåœ¨ä¸€ä¸ªstruts.xmlæ–‡ä»¶ä¸­ä¸èƒ½å‡ºç°ä¸¤ä¸ªåŒåçš„åŒ…ã€‚2ã€extendsï¼šè¯¥å±æ€§æ˜¯å¯é€‰çš„ï¼Œå…è®¸ä¸€ä¸ªåŒ…ç»§æ‰¿ä¸€ä¸ªæˆ–å¤šä¸ªå…ˆå‰å®šä¹‰çš„åŒ…ã€‚3ã€abstractï¼šè¯¥å±æ€§æ˜¯å¯é€‰çš„ï¼Œå°†å…¶è®¾ç½®ä¸ºtrueï¼Œå¯ä»¥æŠŠä¸€ä¸ªåŒ…å®šä¹‰ä¸ºæŠ½è±¡çš„ã€‚æŠ½è±¡åŒ…ä¸èƒ½æœ‰actionå®šä¹‰ï¼Œå®ƒåªèƒ½ä½œä¸ºâ€œçˆ¶â€åŒ…ï¼Œè¢«å…¶ä»–åŒ…æ‰€ç»§æ‰¿ã€‚æ³¨æ„ï¼Œä»¥ä¸ºStruts2çš„é…ç½®æ–‡ä»¶æ˜¯ä»ä¸Šåˆ°ä¸‹å¤„ç†çš„ï¼Œæ‰€ä»¥çˆ¶åŒ…åº”è¯¥åœ¨å­åŒ…å‰é¢å®šä¹‰ã€‚4ã€namespaceï¼šè¯¥å±æ€§æ˜¯å¯é€‰çš„ï¼Œå°†ä¿å­˜çš„actioné…ç½®ä¸ºä¸åŒçš„åç§°ç©ºé—´ã€‚å¦‚æœæ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ä¸º/space/main.actionï¼Œæ¡†æ¶å°†é¦–å…ˆæŸ¥æ‰¾/spaceåç§°ç©ºé—´ï¼Œå¦‚æœæ‰¾åˆ°äº†ï¼Œåˆ™æ‰§è¡Œmain.actionï¼›å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™åˆ°é»˜è®¤çš„åç§°ç©ºé—´ï¼ˆname=â€defaultâ€ï¼‰ä¸­ç»§ç»­æŸ¥æ‰¾ã€‚
å¦‚æœæ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ä¸º/main.actionï¼Œæ¡†æ¶å°†é¦–å…ˆæŸ¥æ‰¾â€œ/â€åç§°ç©ºé—´ï¼Œå¦‚æœæ‰¾åˆ°äº†ï¼Œåˆ™æ‰§è¡Œmain.actionï¼›å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™åˆ°é»˜è®¤çš„åç§°ç©ºé—´ï¼ˆname=â€defaultâ€ï¼‰ä¸­ç»§ç»­æŸ¥æ‰¾ã€‚
Actionå…ƒç´ Struts2çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯Actionã€‚å¯¹äºå¼€å‘äººå‘˜æ¥è¯´ï¼Œä½¿ç”¨Struts2æ¡†æ¶ï¼Œä¸»è¦çš„ç¼–ç å·¥ä½œå°±æ˜¯ç¼–å†™Actionç±»ã€‚è€Œå¼€å‘å¥½Actionç±»åï¼Œå°±éœ€è¦é…ç½®Actionæ˜ å°„ï¼Œä»¥å‘Šè¯‰Struts2æ¡†æ¶ï¼Œé’ˆå¯¹æŸä¸ªURLçš„è¯·æ±‚åº”è¯¥äº¤ç”±å“ªä¸ªActionè¿›è¡Œå¤„ç†ã€‚
å½“ä¸€ä¸ªè¯·æ±‚åŒ¹é…åˆ°æŸä¸ªActionåå­—æ—¶ï¼Œæ¡†æ¶å°±ä½¿ç”¨è¿™ä¸ªæ˜ å°„æ¥ç¡®å®šå¦‚ä½•å¤„ç†è¯·æ±‚ã€‚
&lt;action name=&quot;struts&quot; class=&quot;com.voidking.struts2.action.StrutsAction&quot;&gt;	&lt;result name=&quot;success&quot;&gt;/welcome.jsp&lt;/result&gt;	&lt;result name=&quot;error&quot;&gt;/hello.jsp&lt;/result&gt;&lt;/action&gt;
åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœä¸€ä¸ªè¯·æ±‚æ˜ å°„åˆ°strutsæ—¶ï¼Œå°±ä¼šæ‰§è¡Œè¯¥Actioné…ç½®çš„classå±æ€§å¯¹åº”çš„Actionç±»ã€‚ç„¶åæ ¹æ®Actionç±»çš„è¿”å›å€¼å†³å®šè·³è½¬çš„æ–¹å‘ã€‚å…¶å®ä¸€ä¸ªActionç±»ä¸­ä¸ä¸€å®šåªèƒ½æœ‰execute()æ–¹æ³•ã€‚å¦‚æœä¸€ä¸ªè¯·æ±‚è¦è°ƒç”¨Actionç±»ä¸­çš„å…¶ä»–æ–¹æ³•ï¼Œå°±éœ€è¦åœ¨Actioné…ç½®ä¸­åŠ ä»¥é…ç½®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨com.voidking.struts2.action.StrutsActionä¸­æœ‰å¦å¤–ä¸€ä¸ªæ–¹æ³•ä¸ºï¼š
public String find() throws Exception&#123;return SUCCESS;&#125;
å¦‚æœæƒ³è¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå°±å¿…é¡»åœ¨Actionä¸­é…ç½®methodå±æ€§ï¼Œå…¶é…ç½®æ–¹æ³•ä¸ºï¼š
&lt;action name=&quot;find&quot; class=&quot;com.voidking.struts2.action.StrutsAction&quot; method=&quot;find&quot;&gt;	&lt;result name=&quot;success&quot;&gt;/welcome.jsp&lt;/result&gt;	&lt;result name=&quot;error&quot;&gt;/hello.jsp&lt;/result&gt;&lt;/action&gt;


resultå…ƒç´ ä¸€ä¸ªresultå…ƒç´ ä»£è¡¨ä¸€ä¸ªå¯èƒ½çš„è¾“å‡ºã€‚å½“Actionç±»ä¸­çš„æ–¹æ³•æ‰§è¡Œå®Œæˆæ—¶ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²å‹çš„ç»“æœä»£ç ï¼Œæ¡†æ¶æ ¹æ®è¿™ä¸ªç»“æœä»£ç é€‰æ‹©å¯¹åº”çš„resultï¼Œå‘ç”¨æˆ·è¾“å‡ºã€‚
&lt;result name=&quot;é€»è¾‘è§†å›¾å&quot; type=&quot;è§†å›¾ç»“æœç±»å‹&quot; &gt;	&lt;param name=&quot;å‚æ•°å&quot;&gt;å‚æ•°å€¼&lt;/param&gt;&lt;/result&gt;
paramä¸­çš„nameå±æ€§æœ‰ä¸¤ä¸ªå€¼ï¼š1ã€locationï¼šæŒ‡å®šé€»è¾‘è§†å›¾ã€‚2ã€parseï¼šæ˜¯å¦å…è®¸åœ¨å®é™…è§†å›¾åä¸­ä½¿ç”¨OGNLè¡¨è¾¾å¼ï¼Œé»˜è®¤å‚æ•°ä¸ºtrueã€‚å®é™…ä¸Šé€šå¸¸ä¸éœ€è¦å†™è¿™ä¸ªparamæ ‡ç­¾ï¼Œè€Œæ˜¯ç›´æ¥åœ¨ä¸­æŒ‡å®šç‰©ç†è§†å›¾ä½ç½®ã€‚
resultä¸­çš„nameå±æ€§æœ‰å¦‚ä¸‹å€¼ï¼š1ã€successï¼šè¡¨ç¤ºè¯·æ±‚å¤„ç†æˆåŠŸï¼Œè¯¥å€¼ä¹Ÿæ˜¯é»˜è®¤å€¼ã€‚2ã€errorï¼šè¡¨ç¤ºè¯·æ±‚å¤„ç†å¤±è´¥ã€‚3ã€noneï¼šè¡¨ç¤ºè¯·æ±‚å¤„ç†å®Œæˆåä¸è·³è½¬åˆ°ä»»ä½•ç•Œé¢ã€‚4ã€inputï¼šè¡¨ç¤ºè¾“å…¥æ—¶å¦‚æœéªŒè¯å¤±è´¥åº”è¯¥è·³è½¬åˆ°ä»€ä¹ˆåœ°æ–¹ã€‚5ã€loginï¼šè¡¨ç¤ºç™»å½•å¤±è´¥åè·³è½¬çš„ç›®æ ‡ã€‚
typeï¼ˆéé»˜è®¤ç±»å‹ï¼‰å±æ€§æ”¯æŒçš„ç»“æœç±»å‹æœ‰ä»¥ä¸‹å‡ ç§ï¼š1ã€chainï¼šç”¨æ¥å¤„ç†Actioné“¾ã€‚2ã€chartï¼šç”¨æ¥æ•´åˆJFreeChartçš„ç»“æœç±»å‹ã€‚3ã€dispatcherï¼šç”¨æ¥è½¬å‘é¡µé¢ï¼Œé€šå¸¸å¤„ç†JSPï¼Œè¯¥ç±»å‹ä¹Ÿä¸ºé»˜è®¤ç±»å‹ã€‚4ã€freemarkerï¼šå¤„ç†FreMarkeræ¨¡æ¿ã€‚5ã€httpheaderï¼šæ§åˆ¶ç‰¹æ®ŠHTTPè¡Œä¸ºçš„ç»“æœç±»å‹ã€‚6ã€jsfï¼šJSFæ•´åˆçš„ç»“æœç±»å‹ã€‚7ã€redirectï¼šé‡å®šå‘åˆ°ä¸€ä¸ªURLã€‚8ã€redirect-actionï¼šé‡å®šå‘åˆ°ä¸€ä¸ªactionã€‚9ã€streamï¼šæƒ³æµè§ˆå™¨å‘é€InputStreamå¯¹è±¡ï¼Œé€šå¸¸ç”¨æ¥å¤„ç†æ–‡ä»¶ä¸‹è½½ï¼Œè¿˜å¯ç”¨äºè¿”å›Ajaxæ•°æ®ã€‚10ã€tilesï¼šä¸Tilesæ•´åˆçš„ç»“æœç±»å‹ã€‚11ã€velocityï¼šå¤„ç†Velocityæ¨¡æ¿ã€‚12ã€xsltï¼šå¤„ç†XML/XSMLæ¨¡æ¿ã€‚13ã€plaintextï¼šæ˜¾ç¤ºåŸå§‹æ–‡æœ¬æ–‡ä»¶ï¼Œå¦‚æ–‡ä»¶æºä»£ç ã€‚
ActionSupportç±»åœ¨Struts2ä¸­ï¼ŒActionä¸å®¹å™¨å·²ç»åšåˆ°å®Œå…¨è§£è€¦ï¼Œä¸å†ç»§æ‰¿æŸä¸ªç±»æˆ–å®ç°æŸä¸ªæ¥å£ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šé¢çš„å®ä¾‹ä¸­ï¼ŒStrutsActionå®Œå…¨å¯ä»¥ä¸ç»§æ‰¿ActionSupportç±»ã€‚ä½†æ˜¯ï¼Œåœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œä¸ºäº†é™ä½ç¼–ç¨‹çš„å·¥ä½œéš¾åº¦ï¼Œå……åˆ†åˆ©ç”¨Struts2æä¾›çš„åŠŸèƒ½ï¼Œå®šä¹‰Actionæ—¶ä¼šç»§æ‰¿ActionSupportç±»ï¼Œè¯¥ç±»ä½äºxwork2æä¾›çš„åŒ…com.opensymphony.xwork2ä¸­ã€‚ä¸‹é¢æ˜¯ActionSupportå®ç°çš„æ¥å£ï¼š
public class ActionSupport implements Action,Validateable,ValidationAware,TextProvider,LocaleProvider,Serializable&#123;&#125;
Actionæ¥å£åŒæ ·ä½äºcom.opensymphony.xwork2åŒ…ï¼Œå®šä¹‰äº†ä¸€äº›å¸¸é‡å’Œä¸€ä¸ªexecute()æ–¹æ³•ã€‚
public interface Action&#123;	public static final String SUCCESS = &quot;success&quot;;	public static final String NONE = &quot;none&quot;;	public static final String ERROR = &quot;error&quot;;	public static final String INPUT = &quot;input&quot;;	public static final String LOGIN = &quot;login&quot;;	public String execute() throws Exception;&#125;
æ¥å£ValidationAwareçš„å®ç°ç±»ValidationAwareSupportå®šä¹‰äº†ä¸‰ä¸ªé›†åˆæˆå‘˜ï¼Œè¿™äº›é›†åˆç”¨æˆ·å­˜å‚¨è¿è¡Œæ—¶çš„é”™è¯¯æˆ–è€…æ¶ˆæ¯ã€‚ValidationAwareçš„ä¼—å¤šæ–¹æ³•ä¸»è¦å®Œæˆå¯¹è¿™äº›æˆå‘˜çš„å­˜å‚¨æ“ä½œå’Œåˆ¤æ–­é›†åˆä¸­æ˜¯å¦æœ‰å…ƒç´ çš„æ“ä½œï¼ŒActionSupportä»…ä»…å®ç°å¯¹è¿™äº›æ–¹æ³•çš„ç®€å•è°ƒç”¨ã€‚
Struts2æ•°æ®éªŒè¯åŠéªŒè¯æ¡†æ¶æ•°æ®éªŒè¯ä¸Šé¢çš„å®ä¾‹ä¸­ï¼Œå³ä½¿ç”¨æˆ·è¾“å…¥ç©ºçš„nameï¼ŒæœåŠ¡å™¨ä¹Ÿä¼šå¤„ç†ç”¨æˆ·è¯·æ±‚ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ˜¯æ³¨å†Œæ—¶ï¼Œç”¨æˆ·æ³¨å†Œäº†ç©ºçš„ç”¨æˆ·åå’Œå¯†ç ï¼Œå¹¶ä¸”ä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼Œå¦‚æœåé¢è¦æ ¹æ®ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç æ¥æŸ¥è¯¢æ•°æ®ï¼Œè¿™äº›ç©ºçš„è¾“å…¥å°±å¯èƒ½ä¼šå¼•èµ·å¼‚å¸¸ã€‚ï¼ˆPSï¼šå¯ä»¥ä½¿ç”¨JavaScriptåœ¨å®¢æˆ·ç«¯éªŒè¯ï¼‰Actionç±»ç»§æ‰¿äº†ActionSupportç±»ï¼Œè¯¥ç±»å®ç°çš„æ¥å£ä¸­æœ‰Validateableï¼Œå®šä¹‰äº†validate()æ–¹æ³•ã€‚æ‰€ä»¥åªè¦åœ¨ç”¨æˆ·è‡ªå®šä¹‰çš„Actionç±»ä¸­é‡å†™è¯¥æ–¹æ³•å°±å¯ä»¥å®ç°éªŒè¯åŠŸèƒ½ï¼Œä¿®æ”¹ActionSupportå¦‚ä¸‹ï¼š
package com.voidking.struts2.action;import java.util.Map;import com.opensymphony.xwork2.ActionContext;import com.opensymphony.xwork2.ActionSupport;public class StrutsAction extends ActionSupport&#123;	private String name;		public String getName()	&#123;		return name;			&#125;		public void setName(String name)	&#123;		this.name=name;	&#125;		public String execute() throws Exception	&#123;		if(!name.equals(&quot;HelloWorld&quot;))		&#123;			Map request = (Map)ActionContext.getContext().get(&quot;request&quot;);			request.put(&quot;name&quot;, getName());			return SUCCESS;		&#125;else &#123;			return ERROR;		&#125;	&#125;		public void validate()	&#123;		//å¦‚æœå§“åä¸ºç©ºï¼Œåˆ™æŠŠé”™è¯¯ä¿¡æ¯æ·»åŠ åˆ°Actionç±»çš„fieldErrors		if(this.getName()==null || this.getName().trim().equals(&quot;&quot;))		&#123;			addFieldError(&quot;name&quot;, &quot;å§“åæ˜¯å¿…é¡»çš„ï¼&quot;);		&#125;			&#125;&#125;
validate()æ–¹æ³•ä¼šåœ¨execute()æ–¹æ³•ä¹‹å‰æ‰§è¡Œï¼Œæ‰§è¡Œè¯¥æ–¹æ³•ä¹‹åï¼ŒActionç±»çš„fieldErrorsä¸­å·²ç»åŒ…å«äº†æ•°æ®æ ¡éªŒé”™è¯¯ä¿¡æ¯ï¼Œå°†æŠŠè¯·æ±‚è½¬å‘åˆ°inputé€»è¾‘è§†å›¾å‡ºï¼Œæ‰€ä»¥è¦åœ¨é…ç½®ä¸­åŠ å…¥ä»¥ä¸‹ä»£ç ï¼š
&lt;action name=&quot;struts&quot; class=&quot;com.voidking.struts2.action.StrutsAction&quot;&gt;	&lt;result name=&quot;success&quot;&gt;/welcome.jsp&lt;/result&gt;	&lt;result name=&quot;error&quot;&gt;/hello.jsp&lt;/result&gt;	&lt;result name=&quot;input&quot;&gt;/hello.jsp&lt;/result&gt;&lt;/action&gt;

ç»è¿‡æµ‹è¯•ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå½“è¾“å…¥ä¸ºç©ºæ—¶ï¼Œç•Œé¢ä¸Šå¹¶ä¸ä¼šæœ‰ä»»ä½•æç¤ºï¼åºŸè¯ï¼Œæ ¹æœ¬å°±æ²¡æœ‰åœ¨ç•Œé¢ä¸Šè®¾ç½®æ˜¾ç¤ºé”™è¯¯çš„åŒºåŸŸå¥½ä¸æ¥ï¼ä¿®æ”¹hello.jspå¦‚ä¸‹ï¼š
&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;    pageEncoding=&quot;UTF-8&quot;%&gt;&lt;%@taglib prefix=&quot;s&quot; uri=&quot;/struts-tags&quot; %&gt;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;&lt;title&gt;Struts2åº”ç”¨&lt;/title&gt;&lt;/head&gt;&lt;body&gt;	&lt;form action=&quot;struts.action&quot; method=&quot;post&quot;&gt;		è¯·è¾“å…¥å§“åï¼š&lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;&lt;br/&gt;		&lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;/&gt;		&lt;s:fielderror fieldName=&quot;name&quot;/&gt;	&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;


éªŒè¯æ¡†æ¶ä¸Šé¢çš„æ ¡éªŒé€šè¿‡é‡å†™validateæ–¹æ³•å®ç°ï¼Œè¿™ç§æ–¹æ³•è™½ç„¶å¯ä»¥è¾¾åˆ°é¢„æœŸæ•ˆæœï¼Œä½†æ˜¯å¦‚æœä¸æ˜¯ä¸€ä¸ªè¾“å…¥æ¡†ï¼Œè€Œæ˜¯2ã€3ä¸ªç”šè‡³æ›´å¤šï¼Œé‚£å°±è¦åœ¨validateæ–¹æ³•ä¸­åšå‡ºå¾ˆå¤šåˆ¤æ–­ï¼Œè€Œä¸”è¿™äº›åˆ¤æ–­çš„è¯­å¥åŸºæœ¬ç›¸åŒã€‚æ‰€ä»¥Struts2æä¾›äº†æ ¡éªŒæ¡†æ¶ï¼Œåªéœ€è¦å¢åŠ ä¸€ä¸ªæ ¡éªŒé…ç½®æ–‡ä»¶ï¼Œå°±å¯ä»¥å®Œæˆå¯¹æ•°æ®çš„æ ¡éªŒã€‚Struts2æä¾›äº†å¤§é‡çš„æ•°æ®æ ¡éªŒæ¡†æ¶ï¼ŒåŒ…æ‹¬è¡¨å•åŸŸæ ¡éªŒå™¨å’Œéè¡¨å•åŸŸæ ¡éªŒå™¨ä¸¤ç§ã€‚
å¿…å¡«å­—ç¬¦ä¸²æ ¡éªŒå™¨åœ¨åŒ…com.voidking.struts2.actionä¸­ï¼Œæ–°å»ºæ–‡ä»¶StrutsAction-validation.xmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE validators PUBLIC        &quot;-//OpenSymphony Group//XWork Validator Config 1.0//EN&quot;        &quot;http://www.opensymphony.com/xwork/xwork-validator-config-1.0.dtd&quot;&gt;&lt;validators&gt;&lt;!--éœ€è¦æ ¡éªŒçš„å­—æ®µçš„å­—æ®µå--&gt;	&lt;field name=&quot;name&quot;&gt;		&lt;field-validator type=&quot;requiredstring&quot;&gt;			&lt;!--å»ç©ºæ ¼--&gt;			&lt;param name=&quot;trim&quot;&gt;true&lt;/param&gt;			&lt;!--é”™è¯¯æç¤ºä¿¡æ¯--&gt;			&lt;message&gt;å§“åæ˜¯å¿…é¡»çš„&lt;/message&gt;		&lt;/field-validator&gt;	&lt;/field&gt;&lt;/validators&gt;
å¦‚æœæƒ³å¯¹StrutsActionä¸­find()æ–¹æ³•è¿›è¡ŒéªŒè¯ï¼Œå‘½ååº”è¯¥ä¸ºStrutsAction-find-validation.xmlã€‚
ç»è¿‡æµ‹è¯•ï¼Œå®Œå…¨æ²¡æœ‰æ•ˆæœï¼Œè€Œä¸”ä¼šæŠ¥å‡ºè­¦å‘Šï¼java.io.FileNotFoundException: http://www.opensymphony.com/xwork/xwork-validator-1.0.dtd
ç»è¿‡æŸ¥æ‰¾èµ„æ–™ï¼ŒåŸæ¥æ˜¯è¿™ä¸ªurlå·²ç»è¿‡æ—¶äº†ï¼Œopensymphonyè¿™ä¸ªç»„ç»‡è²Œä¼¼å·²ç»åœæ­¢è¿è¥äº†ï¼Œä½†å…¶ä¸»è¦çš„å¼€æºé¡¹ç›®ï¼Œä¹Ÿéƒ½åŸºæœ¬æ‰¾åˆ°äº†æ–°ä¸œå®¶ï¼Œæ¯”å¦‚strutsäº¤ç”±Apacheæ¥è¿è¥äº†ï¼Œæ”¹æˆä¸‹é¢è¿™ä¸ªå†™æ³•å°±æ²¡é—®é¢˜ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE validators PUBLIC        &quot;-//OpenSymphony Group//XWork Validator Config 1.0//EN&quot;        &quot;http://struts.apache.org/dtds/xwork-validator-1.0.dtd&quot;&gt;&lt;validators&gt;&lt;!--éœ€è¦æ ¡éªŒçš„å­—æ®µçš„å­—æ®µå--&gt;	&lt;field name=&quot;name&quot;&gt;		&lt;field-validator type=&quot;requiredstring&quot;&gt;			&lt;!--å»ç©ºæ ¼--&gt;			&lt;param name=&quot;trim&quot;&gt;true&lt;/param&gt;			&lt;!--é”™è¯¯æç¤ºä¿¡æ¯--&gt;			&lt;message&gt;å§“åæ˜¯å¿…é¡»çš„&lt;/message&gt;		&lt;/field-validator&gt;	&lt;/field&gt;&lt;/validators&gt;
å…³é—­ç½‘ç»œè¿æ¥ï¼Œå†æ¬¡æµ‹è¯•ï¼Œæœç„¶åˆä¸å¯ä»¥äº†ï¼æ™•ï¼Œè¿˜éå¾—è”ç½‘ï¼Ÿéš¾é“ä¸å¯ä»¥ä½¿ç”¨æœ¬åœ°çš„æ–‡ä»¶å—ï¼1ã€è§£å‹xwork-core-*.jaråŒ…ï¼Œæ‰¾åˆ°xwork-validator-1.0.dtdã€‚
2ã€eclipseï¼ŒWindowï¼ŒPreferencesï¼ŒXMLï¼ŒXML Catelogï¼ŒAddï¼ŒFile Systemâ€¦ï¼Œé€‰ä¸­åˆšæ‰è§£å‹çš„xwork-validator-1.0.dtdï¼Œæ‰“å¼€ï¼Œ
3ã€Locationå·²ç»é€‰å¥½D:\jar\struts2\xwork-validator-1.0.dtdï¼ŒKey typeé€‰æ‹©Public IDï¼ŒKeyå¡«-//OpenSymphony Group//XWork Validator Config 1.0//ENï¼ŒAlternative web addresså¡«http://struts.apache.org/dtds/xwork-validator-1.0.dtdã€‚ï¼ˆæœ¬åœ°dtdä¸å­˜åœ¨æ—¶å›å»webä¸Šå»æ‰¾dtdï¼‰
4ã€StrutsAction-validation.xmléœ€è¦ä¿®æ”¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE validators PUBLIC        &quot;-//OpenSymphony Group//XWork Validator Config 1.0//EN&quot;        &quot;D:\jar\struts2\xwork-validator-1.0.dtd&quot;&gt;&lt;validators&gt;&lt;!--éœ€è¦æ ¡éªŒçš„å­—æ®µçš„å­—æ®µå--&gt;	&lt;field name=&quot;name&quot;&gt;		&lt;field-validator type=&quot;requiredstring&quot;&gt;			&lt;!--å»ç©ºæ ¼--&gt;			&lt;param name=&quot;trim&quot;&gt;true&lt;/param&gt;			&lt;!--é”™è¯¯æç¤ºä¿¡æ¯--&gt;			&lt;message&gt;å§“åæ˜¯å¿…é¡»çš„&lt;/message&gt;		&lt;/field-validator&gt;	&lt;/field&gt;&lt;/validators&gt;

å¿…å¡«æ ¡éªŒå™¨&lt;validators&gt;&lt;!--éœ€è¦æ ¡éªŒçš„å­—æ®µçš„å­—æ®µå--&gt;	&lt;field name=&quot;name&quot;&gt;		&lt;field-validator type=&quot;required&quot;&gt;			&lt;!--å»ç©ºæ ¼--&gt;			&lt;param name=&quot;trim&quot;&gt;true&lt;/param&gt;			&lt;!--é”™è¯¯æç¤ºä¿¡æ¯--&gt;			&lt;message&gt;å§“åæ˜¯å¿…é¡»çš„&lt;/message&gt;		&lt;/field-validator&gt;	&lt;/field&gt;&lt;/validators&gt;

æ•´æ•°æ ¡éªŒå™¨&lt;validators&gt;&lt;!--éœ€è¦æ ¡éªŒçš„å­—æ®µçš„å­—æ®µå--&gt;	&lt;field name=&quot;age&quot;&gt;		&lt;field-validator type=&quot;int&quot;&gt;			&lt;param name=&quot;min&quot;&gt;18&lt;/param&gt;			&lt;param name=&quot;max&quot;&gt;100&lt;/param&gt;			&lt;!--é”™è¯¯æç¤ºä¿¡æ¯--&gt;			&lt;message&gt;å¹´é¾„å¿…é¡»åœ¨18è‡³100ä¹‹é—´&lt;/message&gt;		&lt;/field-validator&gt;	&lt;/field&gt;&lt;/validators&gt;

æ—¥æœŸæ ¡éªŒå™¨&lt;validators&gt;&lt;!--éœ€è¦æ ¡éªŒçš„å­—æ®µçš„å­—æ®µå--&gt;	&lt;field name=&quot;date&quot;&gt;		&lt;field-validator type=&quot;date&quot;&gt;			&lt;param name=&quot;min&quot;&gt;1980-01-01&lt;/param&gt;			&lt;param name=&quot;max&quot;&gt;2016-01-01&lt;/param&gt;			&lt;!--é”™è¯¯æç¤ºä¿¡æ¯--&gt;			&lt;message&gt;æ—¥æœŸå¿…é¡»åœ¨1980-01-01åˆ°2016-01-01ä¹‹é—´&lt;/message&gt;		&lt;/field-validator&gt;	&lt;/field&gt;&lt;/validators&gt;

é‚®ä»¶åœ°å€æ ¡éªŒå™¨&lt;validators&gt;&lt;!--éœ€è¦æ ¡éªŒçš„å­—æ®µçš„å­—æ®µå--&gt;	&lt;field name=&quot;email&quot;&gt;		&lt;field-validator type=&quot;email&quot;&gt;			&lt;!--é”™è¯¯æç¤ºä¿¡æ¯--&gt;			&lt;message&gt;å¿…é¡»è¾“å…¥æœ‰æ•ˆçš„ç”µå­é‚®ä»¶åœ°å€&lt;/message&gt;		&lt;/field-validator&gt;	&lt;/field&gt;&lt;/validators&gt;

ç½‘å€æ ¡éªŒå™¨&lt;validators&gt;&lt;!--éœ€è¦æ ¡éªŒçš„å­—æ®µçš„å­—æ®µå--&gt;	&lt;field name=&quot;url&quot;&gt;		&lt;field-validator type=&quot;url&quot;&gt;			&lt;!--é”™è¯¯æç¤ºä¿¡æ¯--&gt;			&lt;message&gt;å¿…é¡»è¾“å…¥æœ‰æ•ˆçš„ç½‘å€&lt;/message&gt;		&lt;/field-validator&gt;	&lt;/field&gt;&lt;/validators&gt;

å­—ç¬¦ä¸²é•¿åº¦æ ¡éªŒå™¨&lt;validators&gt;&lt;!--éœ€è¦æ ¡éªŒçš„å­—æ®µçš„å­—æ®µå--&gt;	&lt;field name=&quot;password&quot;&gt;		&lt;field-validator type=&quot;stringlength&quot;&gt;			&lt;param name=&quot;minLength&quot;&gt;8&lt;/param&gt;			&lt;param name=&quot;maxLength&quot;&gt;16&lt;/param&gt;			&lt;!--é”™è¯¯æç¤ºä¿¡æ¯--&gt;			&lt;message&gt;å¯†ç é•¿åº¦å¿…é¡»åœ¨8åˆ°16ä½ä¹‹é—´&lt;/message&gt;		&lt;/field-validator&gt;	&lt;/field&gt;&lt;/validators&gt;

æ­£åˆ™è¡¨è¾¾å¼æ ¡éªŒå™¨&lt;validators&gt;&lt;!--éœ€è¦æ ¡éªŒçš„å­—æ®µçš„å­—æ®µå--&gt;	&lt;field name=&quot;xh&quot;&gt;		&lt;field-validator type=&quot;regex&quot;&gt;			&lt;param name=&quot;expression&quot;&gt;&lt;![CDATA[(\d&#123;6&#125;)]]&gt;&lt;/param&gt;			&lt;!--é”™è¯¯æç¤ºä¿¡æ¯--&gt;			&lt;message&gt;å­¦å·å¿…é¡»æ˜¯6ä½æ•°å­—&lt;/message&gt;		&lt;/field-validator&gt;	&lt;/field&gt;&lt;/validators&gt;

Struts2æ ‡ç­¾åº“Struts2æ ‡ç­¾åº“ï¼Œå¤§å¤§ç®€åŒ–äº†JSPé¡µé¢è¾“å‡ºé€»è¾‘çš„å®ç°ã€‚å€ŸåŠ©Struts2æ ‡ç­¾åº“ï¼Œå®Œå…¨å¯ä»¥é¿å…åœ¨JSPé¡µé¢ä¸­ä½¿ç”¨Javaè„šæœ¬ä»£ç ã€‚è™½ç„¶Struts2æŠŠæ‰€æœ‰çš„æ ‡ç­¾éƒ½å®šä¹‰åœ¨URIä¸º/struts-tagsçš„å‘½åç©ºé—´ä¸‹ï¼Œä½†ä¾ç„¶å¯ä»¥å¯¹Struts2æ ‡ç­¾è¿›è¡Œç®€å•çš„åˆ†ç±»ã€‚1ã€UIæ ‡ç­¾ã€‚ç”¨äºç”ŸæˆHTMLå…ƒç´ ï¼Œåˆ†ä¸ºè¡¨å•æ ‡ç­¾å’Œéè¡¨å•æ ‡ç­¾ã€‚2ã€éUIæ ‡ç­¾ã€‚ç”¨äºæ•°æ®è®¿é—®å’Œé€»è¾‘æ§åˆ¶ã€‚3ã€Ajaxæ ‡ç­¾ã€‚ç”¨äºAjaxæ”¯æŒã€‚
OGNLè¡¨è¾¾å¼OGNLæ˜¯Object Graphic Navigation Languageï¼ˆå¯¹è±¡å›¾å¯¼èˆªè¯­è¨€ï¼‰çš„ç¼©å†™ï¼Œæ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ã€‚OGNLæ˜¯ä¸€ç§åŠŸèƒ½å¼ºå¤§çš„ELï¼ˆExpression Languageï¼Œè¡¨è¾¾å¼è¯­è¨€ï¼‰ï¼Œå¯ä»¥é€šè¿‡ç®€å•çš„è¡¨è¾¾å¼æ¥è®¿é—®Javaå¯¹è±¡ä¸­çš„å±æ€§ã€‚
æ ‡å‡†çš„OGNLä¼šè®¾å®šä¸€ä¸ªæ ¹å¯¹è±¡ï¼ˆrootå¯¹è±¡ï¼‰ã€‚å‡è®¾ä½¿ç”¨æ ‡å‡†OGNLè¡¨è¾¾å¼æ¥æ±‚å€¼ï¼ˆä¸æ˜¯Struts2 OGNLï¼‰ï¼Œå¦‚æœOGNLä¸Šä¸‹æ–‡æœ‰ä¸¤ä¸ªå¯¹è±¡fooå¯¹è±¡å’Œbarå¯¹è±¡ï¼ŒåŒæ—¶fooå¯¹è±¡è¢«è®¾ç½®ä¸ºæ ¹å¯¹è±¡ï¼Œåˆ™åˆ©ç”¨ä¸‹é¢çš„OGNLè¡¨è¾¾å¼æ±‚å€¼ã€‚
#foo.blah	//è¿”å›foo.getBlah()#bar.blah	//è¿”å›bar.getBlah()blah		//è¿”å›foo.getBlah()ï¼Œå› ä¸ºfooæ˜¯æ ¹å¯¹è±¡

åœ¨Struts2æ¡†æ¶ä¸­ï¼Œå€¼æ ˆï¼ˆValue Stackï¼‰å°±æ˜¯OGNLçš„æ ¹å¯¹è±¡ã€‚å‡è®¾å€¼æ ˆä¸­å­˜åœ¨ä¸¤ä¸ªå¯¹è±¡å®ä¾‹Manå’ŒAnimalï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡å®ä¾‹éƒ½æœ‰ä¸€ä¸ªnameå±æ€§ï¼ŒAnimalæœ‰ä¸€ä¸ªspecieså±æ€§ï¼ŒManæœ‰ä¸€ä¸ªsalaryå±æ€§ã€‚å‡è®¾Animalåœ¨å€¼æ ˆçš„é¡¶éƒ¨ï¼ŒManåœ¨Animalåé¢ï¼Œä¸‹é¢çš„ä»£ç ç‰‡æ®µèƒ½å¤Ÿæ›´å¥½åœ°ç†è§£OGNLè¡¨è¾¾å¼ã€‚
species		//è°ƒç”¨animal.getSpecies()salary		//è°ƒç”¨man.getSalary()name		//è°ƒç”¨animal.getName()
å¦‚æœè¦è·å¾—Mançš„nameå€¼ï¼Œéœ€è¦å¦‚ä¸‹ä»£ç ï¼š
man.name
Struts2å…è®¸åœ¨å€¼æ ˆä¸­ä½¿ç”¨ç´¢å¼•ï¼Œå®ä¾‹ä»£ç å¦‚ä¸‹ï¼š
[0].name	//è°ƒç”¨animal.getName()[1].name	//è°ƒç”¨man.getName()
Struts2ä¸­çš„OGNL Contextæ˜¯ActionContextï¼ŒContext MapåŒ…æ‹¬ï¼šapplicationã€sessionã€å€¼æ ˆï¼ˆrootï¼‰ã€requestã€parametersã€attrã€‚
ç”±äºå€¼æ ˆæ˜¯Struts2ä¸­ONGLçš„æ ¹å¯¹è±¡ã€‚å¦‚æœç”¨æˆ·éœ€è¦è®¿é—®å€¼æ ˆä¸­çš„å¯¹è±¡ï¼Œåˆ™å¯ä»¥é€šè¿‡å¦‚ä¸‹ä»£ç è®¿é—®å€¼æ ˆä¸­çš„å±æ€§ï¼š
$&#123;foo&#125;	//è·å¾—å€¼æ ˆä¸­fooçš„å±æ€§
å¦‚æœè®¿é—®å…¶ä»–Contextä¸­çš„å¯¹è±¡ï¼Œç”±äºä¸æ˜¯æ ¹å¯¹è±¡ï¼Œåœ¨è®¿é—®æ—¶éœ€è¦åŠ #å‰ç¼€ã€‚1ã€applicationå¯¹è±¡ï¼šç”¨æ¥è®¿é—®ServletContextï¼Œå¦‚#application.userNameæˆ–è€…#application[â€œuserNameâ€]ï¼Œç›¸å½“äºè°ƒç”¨Servletçš„getAttribute(â€œuserNameâ€)ã€‚2ã€sessionå¯¹è±¡ï¼šç”¨æ¥è®¿é—®HttpSessionï¼Œå¦‚#session.userNameæˆ–è€…#session[â€œuserNameâ€]ï¼Œç›¸å½“äºè°ƒç”¨session.getAttribute(â€œuserNameâ€)ã€‚3ã€requestå¯¹è±¡ï¼šç”¨æ¥è®¿é—®HttpServletRequestå±æ€§çš„Mapï¼Œå¦‚#request.userNameæˆ–è€…#request[â€œuserNameâ€]ï¼Œç›¸å½“äºè°ƒç”¨request.getAttribute(â€œuserNameâ€)ã€‚StrutsActionä¸­æœ‰å¦‚ä¸‹ä»£ç ï¼š
Map request = (Map)ActionContext.getContext().get(&quot;request&quot;);request.put(&quot;name&quot;,getName);
è¿™å°±æ˜¯å…ˆå¾—åˆ°çš„requestå¯¹è±¡ï¼Œç„¶åæŠŠå€¼æ”¾è¿›å»ï¼Œè¯¥ä¾‹çš„welcome.jspä¸­æœ‰ï¼š
&lt;s:property value=&quot;#request.name&quot;/&gt;
å…¶ä¸­#request.nameç›¸å½“äºè°ƒç”¨äº†request.getAttribute(â€œnameâ€)ã€‚
å¦‚æœéœ€è¦ä¸€ä¸ªé›†åˆå…ƒç´ æ—¶ï¼Œå¯ä»¥ä½¿ç”¨OGNLä¸­é›†åˆç›¸å…³çš„è¡¨è¾¾å¼ã€‚ä½¿ç”¨å¦‚ä¸‹ä»£ç ç”Ÿæˆä¸€ä¸ªListå¯¹è±¡ï¼š
&#123;e1,e2,e3,...&#125;
ä½¿ç”¨å¦‚ä¸‹ä»£ç ç”Ÿæˆä¸€ä¸ªMapå¯¹è±¡ï¼š
#&#123;key:value1,key2:value2,...&#125;
å¯¹äºé›†åˆç±»å‹ï¼ŒOGNLè¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨inå’Œnot inä¸¤ä¸ªå…ƒç´ ç¬¦å·ã€‚å…¶ä¸­ï¼Œinè¡¨è¾¾å¼ç”¨æ¥åˆ¤æ–­æŸä¸ªå…ƒç´ æ˜¯å¦åœ¨æŒ‡å®šçš„é›†åˆå¯¹è±¡ä¸­ï¼›not inåˆ¤æ–­æŸä¸ªå…ƒç´ æ˜¯å¦ä¸åœ¨æŒ‡å®šçš„é›†åˆå¯¹è±¡ä¸­ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š
&lt;s:if test=&quot;&#x27;foo&#x27; in &#123;&#x27;foo&#x27;,&#x27;bar&#x27;&#125;&quot;&gt;	...&lt;s:/if&gt;
æˆ–
&lt;s: if test=&quot;&#x27;foo&#x27; not in &#123;&#x27;foo&#x27;,&#x27;bar&#x27;&#125;&quot;&gt;	...&lt;s:/if&gt;
é™¤äº†inå’Œnot inä¹‹å¤–ï¼ŒOGNLè¿˜å…è®¸ä½¿ç”¨æŸä¸ªè§„åˆ™è·å¾—é›†åˆå¯¹è±¡çš„è‡ªå·±ï¼Œå¸¸ç”¨çš„æœ‰ä»¥ä¸‹3ä¸ªç›¸å…³æ“ä½œç¬¦ã€‚

?:è·å¾—æ‰€æœ‰ç¬¦åˆé€»è¾‘çš„å…ƒç´ ã€‚
^:è·å¾—ç¬¦åˆé€»è¾‘çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚
$:è·å¾—ç¬¦åˆé€»è¾‘çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚Person.relatives.&#123;?#this.gender==&#x27;male&#x27;&#125;
è¯¥ä»£ç å¯ä»¥è·å¾—Personçš„æ‰€æœ‰æ€§åˆ«ä¸ºmaleçš„relativesé›†åˆã€‚

æ•°æ®æ ‡ç­¾æ•°æ®æ ‡ç­¾å±äºéUIæ ‡ç­¾ï¼Œä¸»è¦ç”¨äºæä¾›å„ç§æ•°æ®è®¿é—®ç›¸å…³çš„åŠŸèƒ½ã€‚

propertyï¼šç”¨äºè¾“å‡ºæŸä¸ªå€¼ã€‚
setï¼šç”¨äºè®¾ç½®ä¸€ä¸ªæ–°å˜é‡ã€‚
paramï¼šç”¨äºè®¾ç½®å‚æ•°ï¼Œé€šå¸¸ç”¨äºbeanæ ‡ç­¾å’Œactionæ ‡ç­¾çš„å­æ ‡ç­¾ã€‚
beanï¼šç”¨äºåˆ›å»ºä¸€ä¸ªJavaBeanå®ä¾‹ã€‚å¦‚æœæŒ‡å®šidå±æ€§ï¼Œåˆ™å¯ä»¥å°†åˆ›å»ºçš„JavaBeanå®ä¾‹æ”¾å…¥Stack Contextä¸­ã€‚
actionï¼šç”¨äºJSPé¡µé¢ç›´æ¥è°ƒç”¨ä¸€ä¸ªActionã€‚
dateï¼šç”¨äºæ ¼å¼åŒ–è¾“å‡ºä¸€ä¸ªæ—¥æœŸã€‚
debugï¼šç”¨äºåœ¨é¡µé¢ä¸Šç”Ÿæˆä¸€ä¸ªè°ƒè¯•é“¾æ¥ï¼Œå½“å•å‡»è¯¥é“¾æ¥æ—¶ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰å€¼æ ˆå’ŒStack Contextä¸­çš„å†…å®¹ã€‚
il8nï¼šç”¨äºæŒ‡å®šå›½é™…åŒ–èµ„æºæ–‡ä»¶çš„baseNameã€‚
includeï¼šç”¨äºåœ¨JSPé¡µé¢ä¸­åŒ…å«å…¶ä»–çš„JSPæˆ–Servletèµ„æºã€‚
pushï¼šç”¨äºå°†æŸä¸ªå€¼æ”¾å…¥å€¼æ ˆçš„æ ˆé¡¶ã€‚
textï¼šç”¨äºè¾“å‡ºå›½é™…åŒ–ã€‚
urlï¼šç”¨äºç”Ÿæˆä¸€ä¸ªURLåœ°å€ã€‚

æ§åˆ¶æ ‡ç­¾æ§åˆ¶æ ‡ç­¾ä¹Ÿå±äºéUIæ ‡ç­¾ï¼Œä¸»è¦ç”¨äºå®Œæˆæµç¨‹çš„æ§åˆ¶ï¼Œä»¥åŠå¯¹å€¼æ ˆçš„æ§åˆ¶ã€‚

ifã€elseifã€elseï¼šç”¨äºæ§åˆ¶é€‰æ‹©è¾“å‡ºçš„æ ‡ç­¾ã€‚
appendï¼šç”¨äºå°†å¤šä¸ªé›†åˆæ‹¼æ¥æˆä¸€ä¸ªæ–°çš„é›†åˆã€‚
generatorï¼šç”¨äºå°†ä¸€ä¸ªå­—ç¬¦ä¸²æŒ‰æŒ‡å®šçš„åˆ†éš”ç¬¦åˆ†éš”æˆå¤šä¸ªå­—ç¬¦ä¸²ï¼Œä¸´æ—¶ç”Ÿæˆçš„å¤šä¸ªå­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨iteratoræ ‡ç­¾æ¥è¿­ä»£è¾“å‡ºã€‚
iteratorï¼šç”¨äºå°†ihelloworldè¿­ä»£è¾“å‡ºã€‚
mergeï¼šç”¨äºå°†å¤šä¸ªé›†åˆæ‹¼æ¥æˆä¸€ä¸ªæ–°çš„é›†åˆï¼Œä½†ä¸appendçš„æ‹¼æ¥æ–¹å¼ä¸åŒã€‚
sortï¼šç”¨äºå¯¹é›†åˆè¿›è¡Œæ’åºã€‚
subsetï¼šç”¨äºæˆªå–é›†åˆçš„éƒ¨åˆ†å…ƒç´ ï¼Œå½¢æˆæ–°çš„å­é›†åˆã€‚

è¡¨å•æ ‡ç­¾å¤§éƒ¨åˆ†è¡¨å•æ ‡ç­¾å’ŒHTMLè¡¨å•å…ƒç´ æ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼Œè¡¨å•å…ƒç´ ä¸­çš„nameå±æ€§å€¼ä¼šæ˜ å°„åˆ°ç¨‹åºå‘˜å®šä¹‰çš„Actionç±»ä¸­ã€‚
åœ¨ä¸Šé¢çš„å®ä¾‹ä¸­ï¼Œå±æ€§nameçš„å€¼â€œnameâ€åœ¨StrutsActionçš„æˆå‘˜å˜é‡ä¸­å°±æœ‰setName()å’ŒgetName()çš„å®šä¹‰ï¼Œè¿™æ ·Struts2æ¡†æ¶å°±å¯ä»¥æŠŠå®ƒä»¬å…³è”èµ·æ¥ã€‚å®é™…ä¸Šï¼Œè¡¨å•å…ƒç´ çš„åå­—å°è£…ç€ä¸€ä¸ªè¯·æ±‚å‚æ•°ï¼Œè€Œè¯·æ±‚å‚æ•°è¢«å°è£…åˆ°Actionç±»ä¸­ï¼Œæ ¹æ®å…¶setæ–¹æ³•èµ‹å€¼ï¼Œå†æ ¹æ®å…¶getæ–¹æ³•å–å€¼ã€‚
å¦‚æœæœ‰è¿™æ ·ä¸€ä¸ªJavaBeanç±»ï¼Œç±»åä¸ºUserï¼Œè¯¥ç±»æœ‰ä¸¤ä¸ªå±æ€§ï¼šä¸€ä¸ªæ˜¯usernameï¼Œä¸€ä¸ªæ˜¯passwordã€‚å¹¶åˆ†åˆ«ç”Ÿæˆå®ƒä»¬çš„getterå’Œsetteræ–¹æ³•ï¼Œåœ¨JSPé¡µé¢çš„è¡¨å•ä¸­å¯ä»¥è¿™æ ·ä¸ºè¡¨å•å…ƒç´ å‘½åï¼š
&lt;s:textfield name=&quot;user.username&quot; label=&quot;ç”¨æˆ·å&quot;/&gt;&lt;s:textfield name=&quot;user.password&quot; label=&quot;å¯†ç &quot;&gt;
è¿™æ—¶å¯ä»¥åœ¨Actionç±»ä¸­ç›´æ¥å®šä¹‰userå¯¹è±¡userå±æ€§ï¼Œå¹¶ç”Ÿæˆå…¶getterå’Œsetteræ–¹æ³•ï¼Œè¿™æ ·å°±å¯ä»¥ç”¨user.getUsername()å’Œuser.getPassword()æ–¹æ³•è®¿é—®è¡¨å•æäº¤çš„usernameå’Œpasswordçš„å€¼ã€‚
ä¸‹é¢ä»‹ç»å’ŒHTMLè¡¨å•å…ƒç´ ä¸æ˜¯ä¸€ä¸€å¯¹åº”çš„å‡ ä¸ªé‡è¦çš„è¡¨å•æ ‡ç­¾ï¼š

checkboxlistï¼šå¯ä»¥ä¸€æ¬¡åˆ›å»ºå¤šä¸ªå¤é€‰æ¡†ï¼Œç›¸å½“äºHTMLæ ‡ç­¾çš„å¤šä¸ª&lt;input type=â€checkboxâ€ â€¦/&gt;ï¼Œå®ƒæ ¹æ®listå±æ€§æŒ‡å®šçš„é›†åˆæ¥ç”³è¯·å¤šä¸ªå¤é€‰æ¡†ã€‚å› æ­¤ï¼Œè¯¥æ ‡ç­¾éœ€è¦æŒ‡å®šä¸€ä¸ªlistå±æ€§ã€‚

comboboxï¼šç”Ÿæˆä¸€ä¸ªå•è¡Œæ–‡æœ¬æ¡†å’Œä¸‹æ‹‰åˆ—è¡¨æ¡†çš„ç»„åˆã€‚ä¸¤ä¸ªè¡¨å•å…ƒç´ åªèƒ½å¯¹åº”ä¸€ä¸ªè¯·æ±‚å‚æ•°ï¼Œåªæœ‰å•è¡Œæ–‡æœ¬æ¡†é‡Œçš„å€¼æ‰ä¼šæ‰åŒ…å«è¯·æ±‚å‚æ•°ï¼Œä¸‹æ‹‰åˆ—è¡¨æ¡†åªæ˜¯ç”¨äºè¾…åŠ©è¾“å…¥ï¼Œå¹¶æ²¡æœ‰nameå±æ€§ï¼Œæ•…ä¸ä¼šäº§ç”Ÿè¯·æ±‚å‚æ•°ã€‚

datetimepickerï¼šç”¨äºç”Ÿæˆä¸€ä¸ªæ—¥æœŸã€æ—¶é—´ä¸‹æ‹‰åˆ—è¡¨æ¡†ã€‚å½“ä½¿ç”¨è¯¥æ—¥æœŸã€æ—¶é—´åˆ—è¡¨æ¡†é€‰æ‹©æŸä¸ªæ—¥æœŸã€æ—¶é—´æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†é€‰ä¸­æ—¥æœŸã€æ—¶é—´è¾“å‡ºæŒ‡å®šæ–‡æœ¬æ¡†ä¸­ã€‚åœ¨ä½¿ç”¨è¯¥æ ‡ç­¾æ—¶ï¼Œè¦åœ¨HTMLçš„headéƒ¨åˆ†åŠ å…¥&lt;s:head/&gt;ï¼Œå› ä¸ºdatetimepickeræ ‡ç­¾ä¸­æœ‰ä¸€ä¸ªæ—¥å†å°æ§ä»¶ï¼Œå…¶ä¸­åŒ…å«JavaScriptä»£ç ã€‚

selectï¼šç”¨äºç”Ÿæˆä¸€ä¸ªä¸‹æ‹‰åˆ—è¡¨æ¡†ï¼Œé€šè¿‡ä¸ºè¯¥å…ƒç´ æŒ‡å®šlistå±æ€§çš„å€¼ï¼Œæ¥ç”Ÿæˆä¸‹æ‹‰åˆ—è¡¨æ¡†çš„é€‰é¡¹ã€‚

radioï¼šç”¨æ³•ä¸checkboxlistç”¨æ³•å¾ˆç›¸ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯checkboxlistç”Ÿæˆçš„æ˜¯å¤é€‰æ¡†ï¼Œè€Œradioç”Ÿæˆçš„æ˜¯å•é€‰æ¡†ã€‚

headï¼šç”¨äºç”ŸæˆHTMLé¡µé¢çš„headéƒ¨åˆ†ã€‚å¦‚æœéœ€è¦åœ¨é¡µé¢ä¸­ä½¿ç”¨Ajaxç»„ä»¶ï¼Œå°±éœ€è¦åœ¨headæ ‡ç­¾ä¸­åŠ å…¥theme=â€ajaxâ€å±æ€§ã€‚è¿™æ ·å°±å¯ä»¥å°†æ ‡å‡†Ajaxçš„å¤´ä¿¡æ¯åŒ…å«åˆ°é¡µé¢ä¸­ã€‚


éè¡¨å•æ ‡ç­¾éè¡¨å•æ ‡ç­¾ä¸»è¦ç”¨äºåœ¨ç•Œé¢ä¸­ç”Ÿæˆä¸€äº›éè¡¨å•çš„å¯è§†åŒ–å…ƒç´ ã€‚è¿™äº›æ ‡ç­¾ä¸ç»å¸¸ç”¨åˆ°ï¼š

aï¼šç”Ÿæˆè¶…é“¾æ¥ã€‚
actionerrorï¼šè¾“å‡ºActionå®ä¾‹çš„getActionMessage()æ–¹æ³•è¿”å›çš„æ¶ˆæ¯ã€‚
componentï¼šç”Ÿæˆä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ã€‚
divï¼šç”Ÿæˆä¸€ä¸ªdivç‰‡æ®µã€‚
fielderrorï¼šè¾“å‡ºè¡¨å•åŸŸçš„ç±»å‹è½¬åŒ–é”™è¯¯ã€æ ¡éªŒé”™è¯¯æç¤ºã€‚
tablePanelï¼šç”ŸæˆHTMLé¡µé¢çš„Tabé¡µã€‚
treeï¼šç”Ÿæˆä¸€ä¸ªæ ‘å½¢ç»“æ„ã€‚
treenodeï¼šç”Ÿæˆæ ‘å½¢ç»“æ„çš„èŠ‚ç‚¹ã€‚

Struts2æ‹¦æˆªå™¨Struts2æ¡†æ¶çš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½æ˜¯é€šè¿‡æ‹¦æˆªå™¨æ¥å®Œæˆçš„ã€‚å½“FilterDispatcheræ‹¦æˆªåˆ°ç”¨æˆ·è¯·æ±‚åï¼Œå¤§é‡æ‹¦æˆªå™¨å°†ä¼šå¯¹ç”¨æˆ·è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œç„¶åæ‰è°ƒç”¨ç”¨æˆ·è‡ªå®šä¹‰çš„Actionç±»ä¸­çš„æ–¹æ³•æ¥å¤„ç†è¯·æ±‚ã€‚å¯è§ï¼Œæ‹¦æˆªå™¨æ˜¯Struts2çš„æ ¸å¿ƒæ‰€åœ¨ã€‚å½“éœ€è¦æ‰©å±•Struts2åŠŸèƒ½æ—¶ï¼Œåªéœ€è¦æä¾›ç›¸åº”çš„æ‹¦æˆªå™¨ï¼Œå¹¶å°†å®ƒé…ç½®åœ¨Struts2å®¹å™¨å³å¯ã€‚åä¹‹ï¼Œå¦‚æœä¸éœ€è¦æŸä¸ªåŠŸèƒ½ï¼Œä¹Ÿåªéœ€è¦å–æ¶ˆè¯¥æ‹¦æˆªå™¨å³å¯ã€‚
Struts2å†…å»ºçš„å¤§é‡æ‹¦æˆªå™¨éƒ½æ˜¯ä»¥name-classå¯¹çš„å½¢å¼é…ç½®åœ¨struts-default.xmlæ–‡ä»¶ä¸­ï¼Œå…¶ä¸­nameæ˜¯æ‹¦æˆªå™¨çš„åç§°ï¼ŒclassæŒ‡å®šè¯¥æ‹¦æˆªå™¨çš„å®ç°ç±»ã€‚ä»å‰é¢çš„å®ä¾‹ä¸­å¯ä»¥çœ‹å‡ºï¼Œé…ç½®struts.xmæ—¶ï¼Œç»§æ‰¿äº†strut-defaultåŒ…ï¼Œè¿™æ ·å°±å¯ä»¥åº”ç”¨é‡Œé¢å®šä¹‰çš„æ‹¦æˆªå™¨ã€‚å¦åˆ™ï¼Œå°±å¿…é¡»è‡ªå·±å®šä¹‰è¿™äº›æ‹¦æˆªå™¨ã€‚
æ‹¦æˆªå™¨é…ç½®æ‹¦æˆªå™¨åœ¨struts.xmlä¸­é…ç½®ï¼Œæ ¼å¼ä¸ºï¼š
&lt;interceptor name=&quot;æ‹¦æˆªå™¨å&quot; class=&quot;æ‹¦æˆªå™¨å®ç°ç±»&quot;&gt;&lt;/interceptor&gt;
æœ‰äº›æ—¶å€™ï¼Œåœ¨æ‹¦æˆªå™¨å®ç°ç±»ä¸­ä¼šå®šä¹‰ä¸€äº›å‚æ•°ï¼Œé‚£ä¹ˆåœ¨é…ç½®æ‹¦æˆªå™¨æ—¶å°±éœ€è¦ä¸ºå…¶ä¼ å…¥æ‹¦æˆªå™¨å‚æ•°ã€‚
&lt;interceptor name=&quot;myInterceptor&quot; class=&quot;com.voidking.struts2.tool.MyInterceptor&quot;&gt;	&lt;param name=&quot;å‚æ•°å&quot;&gt;å‚æ•°å€¼&lt;/param&gt;&lt;/interceptor&gt;
é€šå¸¸æƒ…å†µä¸‹ï¼Œå¾€å¾€å¤šä¸ªæ‹¦æˆªå™¨ä¸€èµ·ä½¿ç”¨æ¥è¿›è¡Œè¿‡æ»¤ï¼Œè¿™æ—¶å°±ä¼šæŠŠéœ€è¦çš„æ‹¦æˆªå™¨ç»„æˆä¸€ä¸ªæ‹¦æˆªå™¨æ ˆã€‚
&lt;interceptor-stack name=&quot;æ‹¦æˆªå™¨æ ˆå&quot;&gt;	&lt;interceptor-ref name=&quot;æ‹¦æˆªå™¨ä¸€&quot;&gt;&lt;/interceptor-ref&gt;	&lt;interceptor-ref name=&quot;æ‹¦æˆªå™¨äºŒ&quot;&gt;&lt;/interceptor-ref&gt;	&lt;interceptor-ref name=&quot;æ‹¦æˆªå™¨ä¸‰&quot;&gt;&lt;/interceptor-ref&gt;&lt;/interceptor-stack&gt;
åœ¨é…ç½®æ‹¦æˆªå™¨æ ˆæ—¶ï¼Œç”¨åˆ°çš„æ‹¦æˆªå™¨å¿…é¡»æ˜¯å·²ç»å­˜åœ¨çš„æ‹¦æˆªå™¨ï¼Œå³å·²ç»é…ç½®å¥½çš„æ‹¦æˆªå™¨ã€‚æ‹¦æˆªå™¨æ ˆä¹Ÿå¯ä»¥å¼•ç”¨æ‹¦æˆªå™¨æ ˆï¼Œå®è´¨ä¸Šå°±æ˜¯æŠŠå¼•ç”¨çš„æ‹¦æˆªå™¨æ ˆä¸­çš„æ‹¦æˆªå™¨åŒ…å«åˆ°äº†è¯¥æ‹¦æˆªå™¨æ ˆä¸­ã€‚
å½“åœ¨struts.xmlä¸­é…ç½®ä¸€ä¸ªåŒ…æ—¶ï¼Œå¯ä»¥ä¸ºå…¶æŒ‡å®šé»˜è®¤çš„æ‹¦æˆªå™¨ï¼Œå¦‚æœä¸ºåŒ…æŒ‡å®šäº†æŸä¸ªæ‹¦æˆªå™¨ï¼Œåˆ™è¯¥æ‹¦æˆªå™¨ä¼šå¯¹æ¯ä¸ªActionèµ·ä½œç”¨ï¼Œä½†æ˜¯å¦‚æœæ˜¾å¼åœ°ä¸ºæŸä¸ªActioné…ç½®äº†æ‹¦æˆªå™¨ï¼Œåˆ™é»˜è®¤çš„æ‹¦æˆªå™¨å°†ä¸ä¼šèµ·ä½œç”¨ã€‚é»˜è®¤æ‹¦æˆªå™¨ç”¨å…ƒç´ æ¥å®šä¹‰ã€‚
&lt;package name=&quot;åŒ…å&quot;&gt;	&lt;interceptors&gt;		&lt;interceptor name=&quot;æ‹¦æˆªå™¨ä¸€&quot; class=&quot;æ‹¦æˆªå™¨å®ç°ç±»&quot;&gt;&lt;/interceptor&gt;		&lt;interceptor name=&quot;æ‹¦æˆªå™¨äºŒ&quot; class=&quot;æ‹¦æˆªå™¨å®ç°ç±»&quot;&gt;&lt;/interceptor&gt;		&lt;interceptor-stack name=&quot;æ‹¦æˆªå™¨æ ˆå&quot;&gt;			&lt;interceptor-ref name=&quot;æ‹¦æˆªå™¨ä¸€&quot;&gt;&lt;/interceptor-ref&gt;			&lt;interceptor-ref name=&quot;æ‹¦æˆªå™¨äºŒ&quot;&gt;&lt;/interceptor-ref&gt;		&lt;/interceptor-stack&gt;	&lt;/interceptors&gt;	&lt;default-interceptor-ref name=&quot;æ‹¦æˆªå™¨åæˆ–æ‹¦æˆªå™¨æ ˆå&quot;&gt;&lt;/default-interceptor-ref&gt;&lt;/package&gt;

æ‹¦æˆªå™¨å®ç°ç±»Struts2æ¡†æ¶æä¾›äº†å¾ˆå¤šæ‹¦æˆªå™¨ï¼Œä½†æ€»æœ‰ä¸€äº›åŠŸèƒ½éœ€è¦ç¨‹åºå‘˜è‡ªå®šä¹‰æ‹¦æˆªå™¨æ¥å®Œæˆï¼Œæ¯”å¦‚æƒé™æ§åˆ¶ç­‰ã€‚Struts2æä¾›äº†ä¸€äº›æ¥å£æˆ–ç±»ä¾›ç¨‹åºå‘˜è‡ªå®šä¹‰æ‹¦æˆªå™¨ã€‚å¦‚Struts2æä¾›äº†com.opensymphony.xwork2.interceptor.Interceptoræ¥å£ï¼Œç¨‹åºå‘˜åªè¦å®ç°è¯¥æ¥å£å°±å¯ä»¥å®Œæˆæ‹¦æˆªå™¨å®ç°ç±»ã€‚è¯¥æ¥å£ä»£ç å¦‚ä¸‹ï¼š
import java.io.Serializable;import com.opensymphony.xwork2.ActionInvocation;public interface Interceptor extends Serializable&#123;	void init();	String intercept(ActionInvocation invocation) throws Exception;	void destroy();&#125;

init()ï¼šè¯¥æ–¹æ³•åœ¨æ‹¦æˆªå™¨è¢«å®ä¾‹åŒ–ä¹‹åã€æ‹¦æˆªå™¨è¢«æ‰§è¡Œä¹‹å‰è°ƒç”¨ã€‚è¯¥æ–¹æ³•åªè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œä¸»è¦ç”¨äºåˆå§‹åŒ–èµ„æºã€‚
intercept(ActionInvocation invocation)ï¼šè¯¥æ–¹æ³•ç”¨äºå®ç°æ‹¦æˆªçš„åŠ¨ä½œã€‚è¯¥æ–¹æ³•æœ‰ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°è°ƒç”¨å…¶invokeæ–¹æ³•ï¼Œå°†æ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€æ‹¦æˆªå™¨ï¼Œæˆ–è€…äº¤ç»™Actionç±»çš„æ–¹æ³•ã€‚
destroy()ï¼šè¯¥æ–¹æ³•ä¸init()æ–¹æ³•å¯¹åº”ï¼Œæ‹¦æˆªå™¨å®ä¾‹è¢«é”€æ¯ä¹‹å‰è°ƒç”¨ï¼Œç”¨äºé”€æ¯åœ¨initæ–¹æ³•ä¸­æ‰“å¼€çš„èµ„æºã€‚

é™¤äº†Interceptæ¥å£å¤–ï¼ŒStruts2è¿˜æä¾›äº†AbstractInterceptorç±»ï¼Œè¯¥ç±»æä¾›äº†initæ–¹æ³•å’Œdestroyæ–¹æ³•çš„ç©ºå®ç°ã€‚åœ¨ä¸€èˆ¬çš„æ‹¦æˆªå™¨ä¸­ï¼Œéƒ½ä¼šç»§æ‰¿è¯¥ç±»ï¼Œå› ä¸ºä¸€èˆ¬å®ç°çš„æ‹¦æˆªå™¨æ˜¯ä¸éœ€è¦æ‰“å¼€èµ„æºçš„ï¼Œæ•…æ— éœ€å®ç°è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œç»§æ‰¿è¯¥ç±»ä¼šæ›´ç®€æ´ã€‚
å®ä¾‹åº”ç”¨åœ¨ä¸Šé¢çš„å®ä¾‹ä¸­ï¼Œæ·»åŠ åŠŸèƒ½ï¼šåœ¨è¾“å…¥æ¡†è¾“å…¥â€œhelloâ€ï¼Œä¸èƒ½é€šè¿‡ï¼Œè¿”å›å½“å‰é¡µé¢ã€‚æ–°å»ºåŒ…com.voidking.struts2.toolï¼Œæ–°å»ºç±»MyInterceptorï¼Œä»£ç å¦‚ä¸‹ï¼š
package com.voidking.struts2.tool;import com.opensymphony.xwork2.Action;import com.opensymphony.xwork2.ActionInvocation;import com.opensymphony.xwork2.interceptor.AbstractInterceptor;import com.voidking.struts2.action.StrutsAction;public class MyInterceptor extends AbstractInterceptor&#123;	@Override	public String intercept(ActionInvocation arg0) throws Exception &#123;		// å¾—åˆ°StrutsActionç±»å¯¹è±¡		StrutsAction action=(StrutsAction)arg0.getAction();		// å¦‚æœActionç±»çš„nameå±æ€§å€¼ä¸ºâ€œhelloâ€ï¼Œåˆ™è¿”å›é”™è¯¯é¡µé¢		if(action.getName().equals(&quot;hello&quot;))		&#123;			return Action.ERROR;		&#125;		return arg0.invoke();	&#125;&#125;
struts.xmlä¿®æ”¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;!DOCTYPE struts PUBLIC    &quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;    &quot;http://struts.apache.org/dtds/struts-2.0.dtd&quot;&gt;&lt;struts&gt;    &lt;package name=&quot;default&quot; namespace=&quot;/&quot; extends=&quot;struts-default&quot;&gt;        	&lt;interceptors&gt;    		&lt;interceptor name=&quot;myInterceptor&quot; class=&quot;com.voidking.struts2.tool.MyInterceptor&quot;&gt;&lt;/interceptor&gt;    	&lt;/interceptors&gt;    	&lt;default-interceptor-ref name=&quot;&quot;&gt;&lt;/default-interceptor-ref&gt;    	        &lt;default-action-ref name=&quot;index&quot; /&gt;        &lt;action name=&quot;struts&quot; class=&quot;com.voidking.struts2.action.StrutsAction&quot;&gt;            &lt;result name=&quot;success&quot;&gt;/welcome.jsp&lt;/result&gt;            &lt;result name=&quot;error&quot;&gt;/hello.jsp&lt;/result&gt;            &lt;result name=&quot;input&quot;&gt;/hello.jsp&lt;/result&gt;                        &lt;!-- æ‹¦æˆªé…ç½®åœ¨resultåé¢ --&gt;            &lt;!-- ä½¿ç”¨ç³»ç»Ÿé»˜è®¤æ‹¦æˆªå™¨æ ˆ --&gt;            &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;            &lt;!-- é…ç½®æ‹¦æˆªå™¨ --&gt;            &lt;interceptor-ref name=&quot;myInterceptor&quot;&gt;&lt;/interceptor-ref&gt;                    &lt;/action&gt;    &lt;/package&gt;&lt;/struts&gt;
Strutsæ¡†æ¶æä¾›äº†
XMLä»£ç æç¤ºeclipseï¼ŒWindowï¼ŒPreferencesï¼ŒXMLï¼ŒXML Filesï¼ŒEditorï¼ŒContent Assistã€‚Auto activation delay(ms):ï¼Œè®¾ç½®ä¸º200ã€‚Prompt when these characters are inserted:ï¼Œæ·»åŠ &quot;-abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZã€‚
å°ç»“æ ¡éªŒé”™è¯¯æœ‰æç¤ºfielderrorï¼Œé‚£ä¹ˆæ ¡éªŒæˆåŠŸçš„æç¤ºè¯¥æ€ä¹ˆæï¼Ÿ
å‚è€ƒæ–‡æ¡£ã€ŠJava EEåŸºç¡€å®ç”¨æ•™ç¨‹ã€‹ï¼Œéƒ‘é˜¿å¥‡ä¸»ç¼–Servletè¿‡æ»¤å™¨ä»‹ç»ä¹‹åŸç†åˆ†æï¼šhttp://zhangjunhd.blog.51cto.com/113473/20629/struts2å’ŒservletåŒºåˆ«ï¼šhttp://blog.csdn.net/qiluluwawa/article/details/8619568
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>struts2</tag>
      </tags>
  </entry>
  <entry>
    <title>JSP demoè®¾è®¡</title>
    <url>/dev-jsp-demo/</url>
    <content><![CDATA[éœ€æ±‚åˆ†ææ—¢ç„¶æ˜¯ç•™è¨€ç³»ç»Ÿï¼Œè‚¯å®šè¦æœ‰ç”¨æˆ·ç™»å½•ï¼Œæ‰€æœ‰éœ€è¦ä¸€ä¸ªç”¨æˆ·è¡¨ï¼ˆuserï¼‰ã€‚å­—æ®µåŒ…æ‹¬ï¼šidã€usernameå’Œpasswordã€‚å…¶ä¸­idè®¾ä¸ºè‡ªåŠ¨å¢é•¿çš„intå‹ï¼Œå¹¶è®¾ä¸ºä¸»é”®ã€‚usernameå’Œpasswordéƒ½è®¾ä¸ºvarcharå‹ã€‚ç™»å½•æˆåŠŸåè¦æœ‰ä¸ªä¸»ç•Œé¢ï¼Œæ˜¾ç¤ºåˆ«äººå’Œè‡ªå·±çš„ç•™è¨€ä¿¡æ¯ï¼Œé‚£å°±åº”è¯¥æœ‰ä¸ªç•™è¨€è¡¨ï¼ˆmessageï¼‰ã€‚å­—æ®µåŒ…æ‹¬ï¼šidã€useridã€dateã€titleã€contentã€‚å…¶ä¸­idè®¾ä¸ºè‡ªåŠ¨å¢é•¿çš„intå‹ï¼Œå¹¶è®¾ä¸ºä¸»é”®ã€‚useridæ˜¯userè¡¨ä¸­çš„idï¼Œè¡¨æ˜è¯¥æ¡ç•™è¨€æ˜¯è¯¥ç”¨æˆ·ç•™çš„ã€‚dateè¡¨ç¤ºå‘å¸ƒç•™è¨€çš„æ—¶é—´ï¼Œdatetimeå‹ã€‚titleè¡¨ç¤ºå‘å¸ƒç•™è¨€çš„æ ‡é¢˜ï¼Œvarcharå‹ã€‚contentè¡¨ç¤ºå‘å¸ƒçš„å†…å®¹ï¼Œvarcharå‹ã€‚
åˆ›å»ºæ•°æ®åº“å’Œè¡¨ä½¿ç”¨MySQLï¼Œscottç”¨æˆ·ã€‚åˆ›å»ºæ•°æ®åº“â€œjspâ€ï¼Œåˆ›å»ºè¡¨userã€messageã€‚

userè¡¨ç»“æ„


å­—æ®µåç§°
æ•°æ®ç±»å‹
ä¸»é”®
è‡ªå¢
å…è®¸ä¸ºç©º
æè¿°



id
int
æ˜¯
å¢1

IDå·


username
varchar(20)



ç”¨æˆ·å


password
varchar(20)



å¯†ç 


messageè¡¨ç»“æ„


å­—æ®µåç§°
æ•°æ®ç±»å‹
ä¸»é”®
è‡ªå¢
å…è®¸ä¸ºç©º
æè¿°



id
int
æ˜¯
å¢1

IDå·


userid
int



ç”¨æˆ·IDå·


date
datetime



å‘å¸ƒæ—¶é—´


title
varchar(20)



æ ‡é¢˜


content
varchar(500)



ç•™è¨€å†…å®¹


MySQLå‘½ä»¤è®°å½•rootç”¨æˆ·ç™»å½•
mysql -u root -pgrant all privileges on *.* to scott@&#x27;localhost&#x27;;flush privileges;exit
scottç”¨æˆ·ç™»å½•
create database jsp;show databases;use jsp;create table user(id int,username varchar(20),password varchar(20));create table message(id int,userid int ,date datetime,title varchar(20),content varchar(500));alter table user modify int id primary key auto_increment;alter table message modify id int primary key auto_increment;alter table message add constraint fk_id foreign key(userid) references user(id);desc user;desc message;

åˆ›å»ºé¡¹ç›®ä½¿ç”¨eclipseï¼Œæ–°å»ºDynamic Web Projectï¼Œå‘½åä¸ºâ€œjspâ€ã€‚
åˆ›å»ºè¡¨å¯¹åº”çš„JavaBeanæ–°å»ºåŒ…com.voidking.jsp.modelï¼Œç„¶åå»ºç«‹è¡¨å¯¹åº”çš„æ ‡å‡†JavaBeanï¼šUserå’ŒMessageã€‚
package com.voidking.jsp.model;public class User &#123;	//Fields	private Integer id;	private String username;	private String password;		//Property accessors	//å±æ€§ id çš„ get/set æ–¹æ³•	public Integer getId()&#123;		return this.id;	&#125;	public void setId(Integer id)&#123;		this.id=id;	&#125;	//å±æ€§ username çš„ get/set æ–¹æ³•	public String getUsername()&#123;		return this.username;	&#125;	public void setUsername(String username)&#123;		this.username=username;	&#125;	//å±æ€§ password çš„ get/set æ–¹æ³•	public String getPassword()&#123;		return this.password;	&#125;	public void setPassword(String password)&#123;		this.password=password;	&#125;&#125;

package com.voidking.jsp.model;import java.sql.Date;public class Message &#123;	//Fields	private Integer id;	private Integer userid;	private Date date;	private String title;	private String content;		//Property accessors	//å±æ€§ id çš„ get/set æ–¹æ³•	public Integer getId()&#123;		return this.id;			&#125;	public void setId(Integer id)&#123;		this.id=id;	&#125;	//å±æ€§ userId çš„ get/set æ–¹æ³•	public Integer getUserid()&#123;		return this.userid;	&#125;	public void setUserid(Integer userid)&#123;		this.userid=userid;	&#125;	//å±æ€§ date çš„ get/set æ–¹æ³•	public Date getDate()&#123;		return this.date;	&#125;	public void setDate(Date date)&#123;		this.date=date;	&#125;	//å±æ€§ title çš„ get/set æ–¹æ³•	public String getTitle()&#123;		return this.title;	&#125;	public void setTitle(String title)&#123;		this.title=title;	&#125;	//å±æ€§ content çš„ get/set æ–¹æ³•	public String getContent()&#123;		return this.content;	&#125;	public void setContent(String content)&#123;		this.content=content;	&#125;&#125;
åˆ›å»ºç™»å½•é¡µé¢åœ¨WebContentä¸­æ–°å»ºlogin.jspï¼Œä»£ç å¦‚ä¸‹ï¼š
&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;    pageEncoding=&quot;UTF-8&quot;%&gt;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;&lt;title&gt;ç®€æ˜“ç•™è¨€æ¿&lt;/title&gt;&lt;/head&gt;&lt;body bgcolor=&quot;#E3E3E3&quot;&gt;&lt;form action=&quot;mainServlet&quot; method=&quot;post&quot;&gt;&lt;table&gt;	&lt;caption&gt;ç”¨æˆ·ç™»å½•&lt;/caption&gt;	&lt;tr&gt;		&lt;td&gt;			ç”¨æˆ·åï¼š&lt;input type=&quot;text&quot; name=&quot;username&quot; size=&quot;20&quot;/&gt;		&lt;/td&gt;	&lt;/tr&gt;	&lt;tr&gt;		&lt;td&gt;			å¯†&amp;nbsp;&amp;nbsp;ç ï¼š&lt;input type=&quot;password&quot; name=&quot;password&quot; size=&quot;21&quot;/&gt;		&lt;/td&gt;	&lt;/tr&gt;	&lt;tr&gt;		&lt;td&gt;			&lt;input type=&quot;submit&quot; value=&quot;ç™»å½•&quot;/&gt;			&lt;input type=&quot;reset&quot; value=&quot;é‡ç½®&quot;/&gt;		&lt;/td&gt;	&lt;/tr&gt;&lt;/table&gt;&lt;/form&gt;å¦‚æœæ²¡æ³¨å†Œå•å‡»&lt;a href=&quot;register.jsp&quot;&gt;è¿™é‡Œ&lt;/a&gt;æ³¨å†Œï¼&lt;/body&gt;&lt;/html&gt;
åˆ›å»ºDBç±»æ–°å»ºåŒ…com.voidking.jsp.dbï¼Œæ–°å»ºç±»DBï¼Œä»£ç å¦‚ä¸‹ï¼š
package com.voidking.jsp.db;import java.sql.Connection;import java.sql.DriverManager;import java.sql.PreparedStatement;import java.sql.ResultSet;import java.util.ArrayList;import com.voidking.jsp.model.Message;import com.voidking.jsp.model.User;public class DB &#123;	Connection ct;	PreparedStatement pstmt;		public DB()	&#123;		try &#123;			Class.forName(&quot;com.mysql.jdbc.Driver&quot;);			ct=DriverManager.getConnection(&quot;jdbc:mysql://localhost/jsp&quot;,&quot;scott&quot;,&quot;tiger&quot;);		&#125; catch (Exception e) &#123;			e.printStackTrace();		&#125;			&#125;		public User checkUser(String username,String password)	&#123;		try &#123;			pstmt = ct.prepareStatement(&quot;select * from user where username=? and password=?&quot;);			pstmt.setString(1, username);			pstmt.setString(2, password);						ResultSet rs=pstmt.executeQuery();			User user = new User();			while (rs.next()) &#123;				user.setId(rs.getInt(1));				user.setUsername(rs.getString(2));				user.setPassword(rs.getString(3));				return user;							&#125;		&#125; catch (Exception e) &#123;			e.printStackTrace();		&#125;		return null;		&#125;		public ArrayList findMessage()	&#123;				try &#123;			ArrayList al = new ArrayList();			pstmt= ct.prepareStatement(&quot;select * from message&quot;);			ResultSet rs = pstmt.executeQuery();			while(rs.next())			&#123;				Message message = new Message();				message.setId(rs.getInt(1));				message.setUserid(rs.getInt(2));				message.setDate(rs.getDate(3));				message.setTitle(rs.getString(4));				message.setContent(rs.getString(5));				al.add(message);							&#125;			return al;		&#125; catch (Exception e) &#123;			e.printStackTrace();		&#125;		return null;				&#125;		public String getUsername(int id)	&#123;		String username = null;		try &#123;			pstmt = ct.prepareStatement(&quot;select username from user where id=?&quot;);			pstmt.setInt(1,id);			ResultSet rs = pstmt.executeQuery();			while(rs.next())			&#123;				username = rs.getString(1);										&#125;			return username;		&#125; catch (Exception e) &#123;			e.printStackTrace();		&#125;		return username;			&#125;		public boolean addMessage(Message message)	&#123;		try &#123;			pstmt= ct.prepareStatement(&quot;insert into message(userid,date,title,content) values(?,?,?,?)&quot;);			pstmt.setInt(1, message.getUserid());			pstmt.setDate(2,message.getDate());			pstmt.setString(3, message.getTitle());			pstmt.setString(4, message.getContent());						pstmt.executeUpdate();			return true;		&#125; catch (Exception e) &#123;			e.printStackTrace();		&#125;				return false;				&#125;			public boolean insertUser(String username,String password)	&#123;		try &#123;			pstmt = ct.prepareStatement(&quot;insert into user(username,password) values(?,?)&quot;);			pstmt.setString(1, username);			pstmt.setString(2, password);			pstmt.executeUpdate();			return true;		&#125; catch (Exception e) &#123;			e.printStackTrace();		&#125;		return false;					&#125;&#125;
åˆ›å»ºMainServletç±»æ–°å»ºåŒ…com.voidking.jsp.servletï¼Œæ–°å»ºç±»MainServletï¼Œä»£ç å¦‚ä¸‹ï¼š
package com.voidking.jsp.servlet;import java.io.IOException;import java.util.ArrayList;import javax.servlet.ServletException;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import javax.servlet.http.HttpSession;import com.voidking.jsp.db.DB;import com.voidking.jsp.model.Message;import com.voidking.jsp.model.User;public class MainServlet extends HttpServlet &#123;	public void doGet(HttpServletRequest request, HttpServletResponse response)			throws ServletException, IOException &#123;		request.setCharacterEncoding(&quot;utf8&quot;);		response.setContentType(&quot;utf8&quot;);		String username = request.getParameter(&quot;username&quot;);		String password = request.getParameter(&quot;password&quot;);		DB db = new DB();		HttpSession session = request.getSession();		User user = (User) session.getAttribute(&quot;user&quot;);		if (user == null) &#123;			user = db.checkUser(username, password);		&#125;		session.setAttribute(&quot;user&quot;, user);		if (user != null) &#123;			ArrayList al = db.findMessage();			session.setAttribute(&quot;al&quot;, al);			response.sendRedirect(&quot;main.jsp&quot;);		&#125; else &#123;			response.sendRedirect(&quot;login.jsp&quot;);		&#125;	&#125;	public void doPost(HttpServletRequest request, HttpServletResponse response)			throws ServletException, IOException &#123;		doGet(request, response);	&#125;&#125;

åˆ›å»ºmian.jspåœ¨WebContentä¸­æ–°å»ºmain.jspï¼Œä»£ç å¦‚ä¸‹ï¼š
&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;    pageEncoding=&quot;UTF-8&quot;%&gt;&lt;%@ page import=&quot;com.voidking.jsp.model.Message&quot; %&gt;&lt;%@ page import=&quot;com.voidking.jsp.model.User&quot; %&gt;&lt;%@ page import=&quot;com.voidking.jsp.db.DB&quot;%&gt;&lt;%@page import=&quot;java.util.Iterator&quot;%&gt;&lt;%@page import=&quot;java.util.ArrayList&quot;%&gt;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;&lt;title&gt;ç•™è¨€æ¿ä¿¡æ¯&lt;/title&gt;&lt;/head&gt;&lt;body bgcolor=&quot;#E3E3E3&quot;&gt;&lt;% User user = (User)session.getAttribute(&quot;user&quot;);	%&gt;	å½“å‰ç”¨æˆ·ä¸ºï¼š&lt;%=user.getUsername() %&gt;	&lt;form action=&quot;liuyan.jsp&quot; method=&quot;post&quot;&gt;		&lt;table border=&quot;1&quot;&gt;			&lt;caption&gt;æ‰€æœ‰ç•™è¨€ä¿¡æ¯&lt;/caption&gt;			&lt;tr&gt;				&lt;th&gt;ç•™è¨€äººå§“å&lt;/th&gt;&lt;th&gt;ç•™è¨€æ—¶é—´&lt;/th&gt;&lt;th&gt;ç•™è¨€æ ‡é¢˜&lt;/th&gt;&lt;th&gt;ç•™è¨€å†…å®¹&lt;/th&gt;			&lt;/tr&gt;		&lt;%			ArrayList al = (ArrayList)session.getAttribute(&quot;al&quot;);				if(al != null)			&#123;				Iterator iter = al.iterator();				while(iter.hasNext())				&#123;					Message message=(Message)iter.next();		%&gt;									&lt;tr&gt;				&lt;td&gt;&lt;%=new DB().getUsername(message.getUserid())%&gt;&lt;/td&gt;				&lt;td&gt;&lt;%=message.getDate().toString()%&gt;&lt;/td&gt;				&lt;td&gt;&lt;%=message.getTitle()%&gt;&lt;/td&gt;				&lt;td&gt;&lt;%=message.getContent()%&gt;&lt;/td&gt;			&lt;/tr&gt;		&lt;%				&#125;			&#125;		%&gt;		&lt;/table&gt;		&lt;input type=&quot;submit&quot; value=&quot;ç•™è¨€&quot;/&gt;	&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;
åˆ›å»ºliuyan.jspåœ¨WebContentä¸­æ–°å»ºliuyan.jspï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;    pageEncoding=&quot;UTF-8&quot;%&gt;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;&lt;title&gt;ç•™è¨€æ¿&lt;/title&gt;&lt;/head&gt;&lt;body bgcolor=&quot;#E3E3E3&quot;&gt;	&lt;center&gt;		&lt;form action = &quot;addServlet&quot; method=&quot;post&quot;&gt;			&lt;table border=&quot;1&quot;&gt;				&lt;caption&gt;å¡«å†™ç•™è¨€ä¿¡æ¯&lt;/caption&gt;				&lt;tr&gt;					&lt;td&gt;ç•™è¨€æ ‡é¢˜&lt;/td&gt;					&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;title&quot;/&gt;&lt;/td&gt;				&lt;/tr&gt;				&lt;tr&gt;					&lt;td&gt;ç•™è¨€å†…å®¹&lt;/td&gt;					&lt;td&gt;&lt;textarea rows=&quot;5&quot; cols=&quot;35&quot; name=&quot;content&quot;&gt;&lt;/textarea&gt;&lt;/td&gt;				&lt;/tr&gt;			&lt;/table&gt;			&lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;/&gt;			&lt;input type=&quot;reset&quot; value=&quot;é‡ç½®&quot; /&gt;		&lt;/form&gt;		&lt;/center&gt;&lt;/body&gt;&lt;/html&gt;
åˆ›å»ºAddServletç±»åœ¨åŒ…com.voidking.jsp.servletä¸­ï¼Œæ–°å»ºç±»AddServletï¼Œå†…å®¹å¦‚ä¸‹ï¼š
package com.voidking.jsp.servlet;import java.io.IOException;import java.sql.Date;import javax.servlet.ServletException;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import com.voidking.jsp.db.DB;import com.voidking.jsp.model.Message;import com.voidking.jsp.model.User;public class AddServlet extends HttpServlet &#123;	public void doGet(HttpServletRequest request, HttpServletResponse response)			throws ServletException, IOException &#123;		request.setCharacterEncoding(&quot;utf8&quot;);		response.setCharacterEncoding(&quot;utf8&quot;);		String title = request.getParameter(&quot;title&quot;);		String content = request.getParameter(&quot;content&quot;);		User user = (User) request.getSession().getAttribute(&quot;user&quot;);		Message message = new Message();		message.setUserid(user.getId());		message.setDate(new Date(System.currentTimeMillis()));		message.setTitle(title);		message.setContent(content);		if (new DB().addMessage(message)) &#123;			response.sendRedirect(&quot;success.jsp&quot;);		&#125;	&#125;	public void doPost(HttpServletRequest request, HttpServletResponse response)			throws ServletException, IOException &#123;		doGet(request, response);	&#125;&#125;
åˆ›å»ºæˆåŠŸé¡µé¢åœ¨WebContentä¸­æ–°å»ºsuccess.jspï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;    pageEncoding=&quot;UTF-8&quot;%&gt;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;&lt;title&gt;ç•™è¨€æˆåŠŸ&lt;/title&gt;&lt;/head&gt;&lt;body bgcolor=&quot;#E3E3E3&quot;&gt;	ç•™è¨€æˆåŠŸï¼Œå•å‡»&lt;a href=&quot;mainServlet&quot;&gt;è¿™é‡Œ&lt;/a&gt;è¿”å›ä¸»ç•Œé¢ã€‚&lt;/body&gt;&lt;/html&gt;
é…ç½®web.xmlåœ¨WebContentä¸­æ–°å»ºweb.xmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app version=&quot;2.5&quot; 	xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; 	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; 	xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee 	http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;&gt;  &lt;display-name&gt;&lt;/display-name&gt;	  &lt;welcome-file-list&gt;    &lt;welcome-file&gt;login.jsp&lt;/welcome-file&gt;  &lt;/welcome-file-list&gt;    &lt;servlet&gt;  	&lt;servlet-name&gt;mainServlet&lt;/servlet-name&gt;  	&lt;servlet-class&gt;com.voidking.jsp.servlet.MainServlet&lt;/servlet-class&gt;  &lt;/servlet&gt;    &lt;servlet-mapping&gt;  	&lt;servlet-name&gt;mainServlet&lt;/servlet-name&gt;  	&lt;url-pattern&gt;/mainServlet&lt;/url-pattern&gt;  &lt;/servlet-mapping&gt;    &lt;servlet&gt;  	&lt;servlet-name&gt;addServlet&lt;/servlet-name&gt;  	&lt;servlet-class&gt;com.voidking.jsp.servlet.AddServlet&lt;/servlet-class&gt;  &lt;/servlet&gt;    &lt;servlet-mapping&gt;  	&lt;servlet-name&gt;addServlet&lt;/servlet-name&gt;  	&lt;url-pattern&gt;/addServlet&lt;/url-pattern&gt;  &lt;/servlet-mapping&gt;    &lt;servlet&gt;  	&lt;servlet-name&gt;registerServlet&lt;/servlet-name&gt;  	&lt;servlet-class&gt;com.voidking.jsp.servlet.RegisterServlet&lt;/servlet-class&gt;  &lt;/servlet&gt;    &lt;servlet-mapping&gt;  	&lt;servlet-name&gt;registerServlet&lt;/servlet-name&gt;  	&lt;url-pattern&gt;/registerServlet&lt;/url-pattern&gt;  &lt;/servlet-mapping&gt;&lt;/web-app&gt;

åˆ›å»ºæ³¨å†Œé¡µé¢åœ¨WebContentä¸­æ–°å»ºregister.jspï¼Œä»£ç å¦‚ä¸‹ï¼š
&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;    pageEncoding=&quot;UTF-8&quot;%&gt;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;&lt;title&gt;ç”¨æˆ·æ³¨å†Œ&lt;/title&gt;&lt;/head&gt;&lt;body bgcolor=&quot;#E3E3E3&quot;&gt;	&lt;form action=&quot;registerServlet&quot; method=&quot;post&quot;&gt;		&lt;table&gt;			&lt;caption&gt;ç”¨æˆ·æ³¨å†Œ&lt;/caption&gt;			&lt;tr&gt;				&lt;td&gt;ç™»å½•å&lt;/td&gt;				&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;username&quot;/&gt;&lt;/td&gt;			&lt;/tr&gt;			&lt;tr&gt;				&lt;td&gt;å¯†ç ï¼š&lt;/td&gt;				&lt;td&gt;&lt;input type=&quot;password&quot; name=&quot;password&quot;/&gt;&lt;/td&gt;			&lt;/tr&gt;		&lt;/table&gt;		&lt;input type=&quot;submit&quot; value=&quot;æ³¨å†Œ&quot; /&gt;		&lt;input type=&quot;reset&quot; value=&quot;é‡ç½®&quot;/&gt;	&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;
åˆ›å»ºRegisterServletç±»åœ¨åŒ…com.voidking.jsp.servletä¸‹ï¼Œæ–°å»ºç±»RegisterServletï¼Œå†…å®¹å¦‚ä¸‹ï¼š
package com.voidking.jsp.servlet;import java.io.IOException;import javax.servlet.ServletException;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import com.voidking.jsp.db.DB;public class RegisterServlet extends HttpServlet &#123;	public void doGet(HttpServletRequest request, HttpServletResponse response)			throws ServletException, IOException &#123;		request.setCharacterEncoding(&quot;utf8&quot;);		response.setCharacterEncoding(&quot;utf8&quot;);		String username = request.getParameter(&quot;username&quot;);		String password = request.getParameter(&quot;password&quot;);		if (new DB().insertUser(username, password)) &#123;			response.sendRedirect(&quot;login.jsp&quot;);		&#125;	&#125;	public void doPost(HttpServletRequest request, HttpServletResponse response)			throws ServletException, IOException &#123;		doGet(request, response);	&#125;&#125;
éƒ¨ç½²å’Œè¿è¡Œæ‹·è´mysql-connector-java-*-bin.jaråˆ°WebContent/WEB-INF/libã€‚å‘å¸ƒå·¥ç¨‹ï¼Œå¯åŠ¨TomcatæœåŠ¡å™¨ï¼Œè®¿é—®åœ°å€ï¼šhttp://localhost:8080/jsp/login.jsp
ç¼–ç é—®é¢˜ç»è¿‡è°ƒè¯•ä¿®æ”¹ï¼Œç™»å½•ã€æ³¨å†Œã€ç•™è¨€ï¼ŒåŠŸèƒ½æ­£å¸¸ã€‚ä½†æ˜¯ï¼ŒæŸ¥çœ‹ç•™è¨€æ—¶ï¼Œä¸­æ–‡ç•™è¨€åœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºé—®å·ã€‚åœ¨æ•°æ®åº“ä¸­æŸ¥è¯¢ï¼Œä¹Ÿæ˜¾ç¤ºé—®å·ï¼Œé‚£ä¹ˆé—®é¢˜å‡ºåœ¨å“ªé‡Œå‘¢ï¼Ÿ
æŸ¥çœ‹MySQLé»˜è®¤ç¼–ç status;show variables like &#x27;character%&#x27;;
å‘ç°ç»“æœå¦‚ä¸‹ï¼š



Variable_name
Value



character_set_client
gbk


character_set_connection
gbk


character_set_database
latin1


character_set_filesystem
binary


character_set_results
gbk


character_set_server
latin1


character_set_system
utf8


character_sets_dir
d:\server\xampp\mysql\share\charsets\


æ¨æµ‹æ˜¯æ•°æ®åº“ç¼–ç é—®é¢˜ï¼Œå…¨éƒ¨ä¿®æ”¹æˆutf8åº”è¯¥å°±å¯ä»¥äº†ã€‚



ä¿®æ”¹æ— æ•ˆ1ã€ç”±äºæˆ‘çš„MySQLæ˜¯XAMPPçš„ä¸€éƒ¨åˆ†ï¼Œæ¯”è¾ƒç²¾ç®€ï¼Œæ‰€ä»¥åœ¨binæ–‡ä»¶å¤¹ä¸‹æ²¡æœ‰MySQLInstanceConfig.exeã€‚æ²¡æœ‰åŠæ³•åˆ©ç”¨è¿™ä¸ªå·¥å…·é‡æ–°é…ç½®ã€‚
2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚åœ¨my.iniä¸­æ·»åŠ ï¼š
[mysqld]default-character-set=utf8character_set_server=utf8init_connect=&#x27;SET NAMES utf8&#x27;
é‡å¯MySQLï¼Œå®Œå…¨æ²¡æœ‰æ•ˆæœï¼Œé ï¼
3ã€é€šè¿‡å‘½ä»¤é…ç½®
//create database jsp character set utf8;alter database jsp character set utf8;//åœ¨æ²¡æœ‰tableçš„æƒ…å†µä¸‹ï¼Œæ­¤å‘½ä»¤æ‰æœ‰æ•ˆã€‚set names utf8;  
ç»è¿‡æµ‹è¯•ï¼Œè¿˜æ˜¯æ˜¾ç¤ºä¹±ç ã€‚æŸ¥çœ‹ç¼–ç å¦‚ä¸‹ï¼š



Variable_name
Value



character_set_client
utf8


character_set_connection
utf8


character_set_database
utf8


character_set_filesystem
binary


character_set_results
utf8


character_set_server
latin1


character_set_system
utf8


character_sets_dir
d:\server\xampp\mysql\share\charsets\


çœ‹æ¥character_set_serverçš„å€¼æ˜¯é‡ç‚¹å•Šï¼



é‡è£…å¤‡ä»½æ•°æ®åº“ã€‚å¤åˆ¶D:\Server\xampp\mysql\dataè·¯å¾„ä¸‹çš„æ•°æ®åº“æ–‡ä»¶å¤¹ä»¥åŠibdata1æ–‡ä»¶ï¼Œå¾…ä¼šæ”¾åˆ°æ–°çš„MySQLçš„dataç›®å½•ä¸‹ã€‚
å¸è½½MySQLï¼Œä½¿ç”¨ç»¿è‰²ç‰ˆå®‰è£…ï¼Œæç¤ºæœåŠ¡å·²å­˜åœ¨ï¼Œæ— æ³•å®‰è£…ã€‚æœ€ç»ˆï¼Œä½¿ç”¨äº†windowså®‰è£…ç‰ˆã€‚æ³¨æ„ï¼Œé…ç½®æ•°æ®åº“çš„æ—¶å€™ï¼Œä¸€å®šè¦é€‰æ‹©utf8ç¼–ç ã€‚å®‰è£…æˆåŠŸï¼Œæ‹·è´æ•°æ®åº“æ–‡ä»¶åˆ°æ–°çš„dataä¸‹ï¼Œç»“æœï¼ŒMySQLæ— æ³•å¯åŠ¨ã€‚æ¨æµ‹æ˜¯å› ä¸ºæ–°å®‰è£…çš„32ä½ï¼Œè€ŒåŸæ•°æ®åº“æ˜¯64ä½ã€‚
æ²¡åŠæ³•ï¼Œé‡æ–°å»ºç«‹ç”¨æˆ·ï¼Œé‡æ–°å»ºç«‹æ•°æ®åº“å’Œè¡¨ã€‚ç»è¿‡æµ‹è¯•ï¼Œå¯ä»¥æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡ï¼é‡è£…æ²»ç™¾ç—…ï¼Œå¾ˆæœ‰é“ç†ï¼
æºä»£ç åˆ†äº«https://github.com/voidking/jsp.git
å°ç»“ä¹¦ä¸Šç»™çš„ä»£ç æœ‰å‡ å¤„é”™è¯¯ï¼Œä¿®æ”¹äº†ä¹‹åï¼Œæ‰æœ€ç»ˆè·‘èµ·æ¥ã€‚ä¹¦æœ¬ï¼Œç¡®å®åªæ˜¯ç”¨æ¥å‚è€ƒå°±å¤Ÿäº†ã€‚ç¼–ç¨‹èƒ½åŠ›æ˜¯å†™å‡ºæ¥çš„ï¼åœ¨ä¸€è¡Œè¡Œæ•²ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œä¼šé‡åˆ°å¾ˆå¤šé—®é¢˜ï¼Œè€Œè§£å†³è¿™äº›é—®é¢˜çš„è¿‡ç¨‹ï¼ŒåŸ¹å…»å‡ºæ¥çš„ï¼Œå°±æ˜¯ç¼–ç¨‹èƒ½åŠ›ï¼
å‚è€ƒæ–‡æ¡£ã€ŠJava EEåŸºç¡€å®ç”¨æ•™ç¨‹ã€‹ï¼Œéƒ‘é˜¿å¥‡ä¸»ç¼–mysqlæ·»åŠ å¤–é”®ï¼šhttp://www.cnblogs.com/xiangxiaodong/archive/3061049.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>jsp</tag>
      </tags>
  </entry>
  <entry>
    <title>JSPå’Œservletæ¦‚è¿°</title>
    <url>/dev-jsp-servlet-start/</url>
    <content><![CDATA[JSPæ¦‚è¿°åè¯è§£é‡ŠJSPå…¨åä¸ºJava Server Pagesï¼Œä¸­æ–‡åå«javaæœåŠ¡å™¨é¡µé¢ï¼Œå…¶æ ¹æœ¬æ˜¯ä¸€ä¸ªç®€åŒ–çš„Servletè®¾è®¡ã€‚
JSPæ–‡ä»¶ç±»ä¼¼äºHTMLæ–‡ä»¶ï¼Œä½†åˆä¸å®Œå…¨ç›¸åŒï¼Œå…¶å®JSPæ˜¯ç”±HTMLã€Javaç‰‡æ®µå’ŒJSPæ ‡è®°ç»„æˆçš„ã€‚
ServletJavaçš„è¿è¡Œæ–¹å¼æ˜¯é€šè¿‡Javaè™šæ‹ŸæœºæŠŠ*.javaçš„æ–‡ä»¶ç¼–è¯‘æˆ*.classæ–‡ä»¶ï¼Œä½†JSPæ–‡ä»¶å´æ˜¯åç¼€åä¸º.jspçš„æ–‡ä»¶ï¼Œæ€ä¹ˆæ‰§è¡Œå‘¢ï¼Ÿå½“*.jspæ–‡ä»¶è¢«é€åˆ°æœåŠ¡å™¨åï¼Œå…ˆç”±æœåŠ¡å™¨ç¿»è¯‘æˆServletæ–‡ä»¶ï¼Œè€ŒServletæ–‡ä»¶å°±æ˜¯*.javaæ–‡ä»¶ï¼Œç„¶å*.javaæ–‡ä»¶åˆè¢«ç¼–è¯‘æˆ*.classæ–‡ä»¶ï¼Œå†ç”±Javaè™šæ‹Ÿæœºè§£é‡Šæ‰§è¡Œã€‚

Servletå’ŒJava Appletä¸€æ ·ï¼Œå®ƒä»¬éƒ½ä¸æ˜¯ç‹¬ç«‹çš„åº”ç”¨ç¨‹åºï¼Œéƒ½æ²¡æœ‰main()æ–¹æ³•ï¼Œè€Œæ˜¯ç”Ÿå­˜åœ¨å®¹å™¨ä¸­ï¼Œç”±å®¹å™¨æ¥ç®¡ç†ã€‚ç¼–å†™ä¸€ä¸ªServletæ–‡ä»¶ï¼Œéœ€è¦å®ç°javax.servlet.Servletæ¥å£ã€‚
Servlet demoè®¾è®¡æ–°å»ºDynamic Web Projectï¼Œå‘½åä¸ºservletã€‚æ–°å»ºåŒ…com.voidking.servletï¼Œæ–°å»ºç±»HelloWorldï¼Œå®ç°Servletæ¥å£ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
package com.voidking.servlet;import java.io.IOException;import java.io.PrintWriter;import javax.servlet.Servlet;import javax.servlet.ServletConfig;import javax.servlet.ServletException;import javax.servlet.ServletRequest;import javax.servlet.ServletResponse;public class HelloWorld implements Servlet &#123;	@Override	public void destroy() &#123;		// TODO Auto-generated method stub	&#125;	@Override	public ServletConfig getServletConfig() &#123;		// TODO Auto-generated method stub		return null;	&#125;	@Override	public String getServletInfo() &#123;		// TODO Auto-generated method stub		return null;	&#125;	@Override	public void init(ServletConfig arg0) throws ServletException &#123;		// TODO Auto-generated method stub	&#125;	@Override	public void service(ServletRequest req, ServletResponse res)			throws ServletException, IOException &#123;		// TODO Auto-generated method stub		PrintWriter pw = res.getWriter();		pw.println(&quot;HelloWorld&quot;);	&#125;&#125;

åœ¨WebContent/WEB-INFä¸‹æ–°å»ºweb.xmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app version=&quot;2.5&quot; 	xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; 	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; 	xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee 	http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;&gt;  &lt;display-name&gt;&lt;/display-name&gt;	  &lt;servlet&gt;  	&lt;servlet-name&gt;HelloWorld&lt;/servlet-name&gt;  	&lt;servlet-class&gt;com.voidking.servlet.HelloWorld&lt;/servlet-class&gt;  &lt;/servlet&gt;    &lt;servlet-mapping&gt;  	&lt;servlet-name&gt;HelloWorld&lt;/servlet-name&gt;  	&lt;url-pattern&gt;/helloWorld&lt;/url-pattern&gt;  &lt;/servlet-mapping&gt;&lt;/web-app&gt;

å‘å¸ƒå·¥ç¨‹ï¼Œè®¿é—®http://localhost:8080/servlet/helloWorld ï¼Œå³å¯åœ¨ç•Œé¢ä¸Šçœ‹åˆ°â€œHelloWorldâ€ã€‚
åŸç†åˆ†æinit()ï¼šåœ¨Servletå®ä¾‹åŒ–ä¹‹åï¼ŒServletå®¹å™¨ä¼šè°ƒç”¨init()æ–¹æ³•ï¼Œæ¥åˆå§‹åŒ–è¯¥å¯¹è±¡ã€‚è¯¥æ–¹æ³•ä¸»è¦æ˜¯ä¸ºäº†è®©Servletå¯¹è±¡åœ¨å¤„ç†å®¢æˆ·è¯·æ±‚å‰å¯ä»¥å®Œæˆä¸€äº›åˆå§‹åŒ–å·¥ä½œï¼Œä¾‹å¦‚ï¼Œå»ºç«‹æ•°æ®åº“çš„è¿æ¥ï¼Œè·å–é…ç½®ä¿¡æ¯ç­‰ã€‚å¯¹äºæ¯ä¸ªServletå®ä¾‹ï¼Œinit()æ–¹æ³•åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ã€‚init()æ–¹æ³•æœ‰ä¸€ä¸ªç±»å‹ä¸ºServletConfigçš„å‚æ•°ï¼ŒServletå®¹å™¨é€šè¿‡è¿™ä¸ªå‚æ•°å‘Servletä¼ é€’é…ç½®ä¿¡æ¯ã€‚Servletä½¿ç”¨è¯¥å¯¹è±¡ä»Webåº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯ä¸­è·å–åˆå§‹åŒ–å‚æ•°ã€‚å¦å¤–ï¼Œåœ¨Servletä¸­ï¼Œè¿˜å¯ä»¥é€šè¿‡ServletConfigå¯¹è±¡è·å–æè¿°Servletè¿è¡Œç¯å¢ƒçš„ServletContextå¯¹è±¡ï¼Œä½¿ç”¨è¯¥å¯¹è±¡ï¼ŒServletå¯ä»¥å’Œå®ƒçš„Servletå®¹å™¨è¿›è¡Œé€šä¿¡ã€‚
service()ï¼šå®¹å™¨è°ƒç”¨service()æ–¹æ³•æ¥å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚åœ¨init()æ–¹æ³•æ­£ç¡®å®Œæˆåï¼Œservice()æ–¹æ³•è¢«å®¹å™¨è°ƒç”¨ã€‚åœ¨service()æ–¹æ³•ä¸­æœ‰ç”¨äºæ¥å—å®¢æˆ·ç«¯è¯·æ±‚ä¿¡æ¯çš„è¯·æ±‚å¯¹è±¡ï¼ˆç±»å‹ä¸ºServletRequestï¼‰å’Œç”¨äºå¯¹å®¢æˆ·ç«¯è¿›è¡Œå“åº”çš„å“åº”å¯¹è±¡ï¼ˆç±»å‹ä¸ºServletResponseï¼‰çš„å‚æ•°ã€‚Servletå¯¹è±¡é€šè¿‡ServletRequestå¯¹è±¡å¾—åˆ°å®¢æˆ·ç«¯çš„ç›¸å…³ä¿¡æ¯å’Œè¯·æ±‚ä¿¡æ¯ï¼Œåœ¨å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†åï¼Œè°ƒç”¨ServletResponseå¯¹è±¡çš„æ–¹æ³•è®¾ç½®å“åº”ä¿¡æ¯ã€‚
destroy()ï¼šå½“å®¹å™¨æ£€æµ‹åˆ°ä¸€ä¸ªServletå¯¹è±¡åº”è¯¥ä»æœåŠ¡ä¸­è¢«ç§»é™¤æ—¶ï¼Œå®¹å™¨ä¼šè°ƒç”¨è¯¥å¯¹è±¡çš„destroy()æ–¹æ³•ï¼Œæ¥é‡Šæ”¾Servletå¯¹è±¡æ‰€ä½¿ç”¨çš„èµ„æºï¼Œä¿å­˜æ•°æ®åˆ°æŒä¹…å­˜å‚¨è®¾å¤‡ä¸­ã€‚ä¾‹å¦‚ï¼Œå°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼Œå…³é—­æ•°æ®åº“è¿æ¥ç­‰ã€‚åœ¨Servletå®¹å™¨è°ƒç”¨destroy()æ–¹æ³•å‰ï¼Œå¦‚æœè¿˜æœ‰å…¶ä»–çº¿ç¨‹æ­£åœ¨service()æ–¹æ³•ä¸­æ‰§è¡Œï¼Œå®¹å™¨ä¼šç­‰å¾…è¿™äº›çº¿ç¨‹æ‰§è¡Œå®Œæ¯•æˆ–ç­‰å¾…æœåŠ¡å™¨è®¾å®šçš„æœ€å¤§æ—¶é—´åˆ°è¾¾ã€‚ä¸€æ—¦Servletå¯¹è±¡çš„destroy()æ–¹æ³•è¢«è°ƒç”¨ï¼Œå®¹å™¨ä¸ä¼šå†æŠŠå…¶ä»–çš„è¯·æ±‚å‘é€ç»™è¯¥å¯¹è±¡ã€‚å¦‚æœéœ€è¦è¯¥Servletå¯¹è±¡å†æ¬¡ä¸ºå®¢æˆ·ç«¯æœåŠ¡ï¼Œå®¹å™¨å°†ä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªServletå¯¹è±¡æ¥å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚åœ¨destroy()æ–¹æ³•è°ƒç”¨ä¹‹åï¼Œå®¹å™¨ä¼šé‡Šæ”¾è¿™ä¸ªServletå¯¹è±¡ï¼Œåœ¨éšåçš„æ—¶é—´å†…ï¼Œè¯¥å¯¹è±¡ä¼šè¢«Javaçš„åƒåœ¾æ”¶é›†å™¨å›æ”¶ã€‚
getServletConfig()ï¼šæ”¾å›å®¹å™¨è°ƒç”¨init()æ–¹æ³•æ—¶ä¼ é€’ç»™Servletå¯¹è±¡çš„ServletConfigå¯¹è±¡ï¼ŒServletConfigå¯¹è±¡åŒ…å«äº†Servletçš„åˆå§‹åŒ–å‚æ•°ã€‚
getServletInfo()ï¼šæ”¾å›ä¸€ä¸ªStringç±»å‹çš„å­—ç¬¦ä¸²ï¼Œå…¶ä¸­åŒ…æ‹¬å…³äºServletçš„ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼Œä½œè€…ã€ç‰ˆæœ¬å’Œç‰ˆæƒã€‚
web.xmlæ–‡ä»¶ä¸­åŒ…å«é…ç½®ä¿¡æ¯ã€‚web.xmlæ–‡ä»¶çš„ç¬¬ä¸€è¡Œæ˜¯å¯¹xmlæ–‡ä»¶çš„ç”Ÿå‘½ï¼Œæ¥ç€å°±æ˜¯xmlçš„æ ¹å…ƒç´ ï¼Œå…¶å±æ€§ä¸­å£°æ˜äº†ç‰ˆæœ¬ç­‰ä¿¡æ¯ã€‚å’Œä¹‹é—´é…ç½®çš„æ˜¯å’Œï¼Œå…¶ä¸­çš„å€¼â€œHelloWorldâ€æ˜¯ä¸ºServletèµ·çš„ä¸€ä¸ªåå­—ï¼Œè¿™ä¸ªå¯ä»¥éšä¾¿èµ·åï¼Œåªè¦ç¬¦åˆJavaçš„å‘½åè§„åˆ™å°±è¡Œï¼›è€Œçš„å€¼åˆ™æ˜¯è‡ªå·±å†™çš„Servletç±»çš„ç±»åï¼Œè¿™ä¸ªå¿…é¡»é…ç½®æ­£ç¡®ï¼Œå¦‚æœæœ‰åŒ…ï¼Œè¿˜è¦åœ¨å‰é¢åŠ ä¸ŠåŒ…åã€‚è¿™ä¸ªç±»åä¸å¸¦.javaï¼Œä¹Ÿä¸å¸¦.classã€‚
ä¸ä¹‹é—´é…ç½®çš„æ˜¯å’Œï¼Œå…¶ä¸­çš„å€¼å°±æ˜¯ä¸Šé¢åˆšåˆšé…ç½®çš„çš„å€¼ï¼›è€Œçš„å€¼ä¹Ÿå¯ä»¥éšä¾¿èµ·åï¼Œä½†å…¶å‰é¢å¿…é¡»åŠ â€œ/â€ï¼Œå¦‚ä¸Šé¢ä¾‹å­ä¸­çš„â€œ/helloWorldâ€ã€‚
è®¿é—®åœ°å€ï¼šhttp://localhost:8080/servlet/helloWorld  ï¼Œå…¶ä¸­ï¼Œhttp://localhost:8080 æ˜¯æœåŠ¡å™¨URLï¼Œè€Œåé¢çš„servletæ˜¯é¡¹ç›®åï¼Œæœ€åé¢çš„helloWorldæ˜¯åœ¨web.xmlä¸­é…ç½®çš„çš„å€¼ã€‚
ä¼˜åŒ–GenericServletç±»ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œé‡‡ç”¨å®ç°Servletæ¥å£çš„æ–¹æ³•ï¼Œéœ€è¦å®ç°5ä¸ªæ–¹æ³•ã€‚ä¸ºäº†ç®€åŒ–Servletçš„ç¼–å†™ï¼Œåœ¨javax.servletåŒ…ä¸­æä¾›äº†ä¸€ä¸ªæŠ½è±¡çš„ç±»GenericServletã€‚å®ƒç»™å‡ºäº†å‡ºservice()å¤–å…¶ä»–4ä¸ªæ–¹æ³•çš„ç®€å•å®ç°ã€‚GenericServletå®ç°äº†Servletæ¥å£å’ŒServletConfigæ¥å£ã€‚HelloWorld.javaå¯ä»¥æ”¹å†™ä¸ºï¼š
package com.voidking.servlet;import java.io.IOException;import java.io.PrintWriter;import javax.servlet.GenericServlet;import javax.servlet.ServletException;import javax.servlet.ServletRequest;import javax.servlet.ServletResponse;public class HelloWorld extends GenericServlet &#123;	@Override	public void service(ServletRequest arg0, ServletResponse arg1)			throws ServletException, IOException &#123;		// TODO Auto-generated method stub		PrintWriter pw = arg1.getWriter();		pw.println(&quot;HelloWorld&quot;);	&#125;&#125;

HttpServletç±»åœ¨å¤§éƒ¨åˆ†ç½‘ç»œä¸­ï¼Œéƒ½æ˜¯å®¢æˆ·ç«¯é€šè¿‡HTTPåè®®æ¥è®¿é—®æœåŠ¡ç«¯çš„èµ„æºã€‚ä¸ºäº†å¿«é€Ÿå¼€å‘åº”ç”¨äºHTTPåè®®çš„Servletç±»ï¼Œåœ¨javax.servlet.httpåŒ…ä¸­æä¾›äº†ä¸€ä¸ªæŠ½è±¡HttpServletã€‚å®ƒç»§æ‰¿äº†GenericServletç±»ã€‚
å½“å®¹å™¨æ¥åˆ°ä¸€ä¸ªé’ˆå¯¹HttpServletå¯¹è±¡è¯·æ±‚æ—¶ï¼Œè¯¥å¯¹è±¡å°±ä¼šè°ƒç”¨publicçš„service()æ–¹æ³•ï¼Œé¦–å…ˆå°†å‚æ•°ç±»å‹è½¬æ¢ä¸ºHttpServletRequestå’ŒHttpServletResponseï¼Œç„¶åè°ƒç”¨protectedçš„service()æ–¹æ³•å°†å‚æ•°ä¼ è¿›å»ã€‚
æ¥ç€è°ƒç”¨HttpServletRequestå¯¹è±¡çš„getMethod()æ–¹æ³•è·å–è¯·æ±‚æ–¹æ³•åæ¥è°ƒç”¨ç›¸åº”çš„doXxx()æ–¹æ³•ã€‚æ‰€ä»¥ä¸€ä¸ªServletç±»åœ¨ç»§æ‰¿HttpServletæ—¶ï¼Œä¸ç”¨è¦†ç›–å®ƒçš„service()æ–¹æ³•ï¼Œåªéœ€è¦è¦†ç›–ç›¸åº”çš„doXxx()æ–¹æ³•å°±è¡Œäº†ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯è¦†ç›–å…¶doGet()å’ŒdoPost()æ–¹æ³•ã€‚ç„¶ååœ¨å…¶ä¸­çš„ä¸€ä¸ªæ–¹æ³•ä¸­è°ƒç”¨å¦ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™æ ·å°±å¯ä»¥åšåˆ°åˆäºŒä¸ºä¸€ã€‚
HelloWorld.javaå¯ä»¥æ”¹å†™ä¸ºï¼š
package com.voidking.servlet;import java.io.IOException;import java.io.PrintWriter;import javax.servlet.ServletException;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;public class HelloWorld extends HttpServlet &#123;	protected void doGet(HttpServletRequest req,HttpServletResponse res) throws ServletException,IOException	&#123;		PrintWriter pw = res.getWriter();		pw.println(&quot;HelloWorld&quot;);	&#125;		protected void doPost(HttpServletRequest req,HttpServletResponse res) throws ServletException,IOException	&#123;		doGet(req, res);	&#125;&#125;

Servletè¿›é˜¶åœ¨ä¸€ä¸ªHTMLæ–‡ä»¶ä¸­å»ºç«‹ä¸€ä¸ªè¡¨å•ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªè¾“å…¥æ¡†ï¼Œå½“å®¢æˆ·è¾“å…¥å†…å®¹åï¼Œæäº¤åˆ°ä¸€ä¸ªServletç±»ï¼Œè¿™ä¸ªServletç±»å–å‡ºå®¢æˆ·è¾“å…¥çš„ä¿¡æ¯ï¼Œå¹¶åœ¨HTMLé¡µé¢ä¸Šæ˜¾ç¤ºè¯¥å†…å®¹ã€‚
å³å‡»servleté¡¹ç›®ä¸‹çš„WebContentï¼ŒNewï¼ŒHTML Fileï¼Œå‘½åä¸ºindex.htmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š
&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;UTF-8&quot;&gt;&lt;title&gt;Servletè¿›é˜¶&lt;/title&gt;&lt;/head&gt;&lt;body&gt;	&lt;form action=&quot;inputServlet&quot; method=&quot;post&quot;&gt;		è¯·è¾“å…¥ä½ æƒ³æ˜¾ç¤ºçš„å†…å®¹ï¼š&lt;input type=&quot;text&quot; name=&quot;input&quot;/&gt;&lt;/br&gt;		&lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot; /&gt;		&lt;input type=&quot;reset&quot; value=&quot;é‡ç½®&quot; /&gt;	&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;

åœ¨com.voidking.servletåŒ…ä¸‹æ–°å»ºInputServletç±»ï¼Œç»§æ‰¿HttpServletï¼Œå†…å®¹å¦‚ä¸‹ï¼š
package com.voidking.servlet;import java.io.IOException;import java.io.PrintWriter;import javax.servlet.ServletException;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;public class InputServlet extends HttpServlet &#123;	private static final long serialVersionUID = 1L;           public InputServlet() &#123;        super();    &#125;	protected void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException &#123;		// TODO Auto-generated method stub		res.setCharacterEncoding(&quot;utf8&quot;);		req.setCharacterEncoding(&quot;utf8&quot;);				String input = req.getParameter(&quot;input&quot;);				PrintWriter pw = res.getWriter();		pw.println(&quot;&lt;html&gt;&lt;head&gt;&lt;meta charset=\&quot;UTF-8\&quot;&gt;&lt;title&gt;&quot;);		pw.println(&quot;æ˜¾ç¤ºè¾“å…¥å†…å®¹&quot;);		pw.println(&quot;&lt;/title&gt;&lt;body&gt;&quot;);		pw.println(input);		pw.println(&quot;&lt;/body&gt;&lt;/html&gt;&quot;);	&#125;	protected void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException &#123;		// TODO Auto-generated method stub		doGet(req, res);	&#125;&#125;

web.xmlä¿®æ”¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app version=&quot;2.5&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;	xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee 	http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;&gt;	&lt;display-name&gt;&lt;/display-name&gt;	&lt;servlet&gt;		&lt;servlet-name&gt;HelloWorld&lt;/servlet-name&gt;		&lt;servlet-class&gt;com.voidking.servlet.HelloWorld&lt;/servlet-class&gt;	&lt;/servlet&gt;	&lt;servlet-mapping&gt;		&lt;servlet-name&gt;HelloWorld&lt;/servlet-name&gt;		&lt;url-pattern&gt;/helloWorld&lt;/url-pattern&gt;	&lt;/servlet-mapping&gt;	&lt;servlet&gt;		&lt;servlet-name&gt;InputServlet&lt;/servlet-name&gt;		&lt;servlet-class&gt;com.voidking.servlet.InputServlet&lt;/servlet-class&gt;	&lt;/servlet&gt;	&lt;servlet-mapping&gt;		&lt;servlet-name&gt;InputServlet&lt;/servlet-name&gt;		&lt;url-pattern&gt;/inputServlet&lt;/url-pattern&gt;	&lt;/servlet-mapping&gt;&lt;/web-app&gt;

å‘å¸ƒå·¥ç¨‹ï¼Œè®¿é—®ï¼šhttp://localhost:8080/servlet/
æºç åˆ†äº«https://github.com/voidking/servlet.git
JSPè¯­æ³•æ•°æ®å®šä¹‰&lt;%! å˜é‡å£°æ˜ %&gt;ï¼Œç›¸å½“äºServletç±»é‡Œé¢çš„å˜é‡å£°æ˜ã€‚
ç¨‹åºå—&lt;% ç¨‹åºå— %&gt;ï¼Œç›¸å½“äºåœ¨Servletç±»é‡Œé¢service()å‡½æ•°é‡Œã€‚
è¡¨è¾¾å¼&lt;%=Javaè¡¨è¾¾å¼ %&gt;ï¼Œç›¸å½“äºServletç±»é‡Œé¢service()å‡½æ•°é‡Œï¼ŒPrintWriterè°ƒç”¨println()å‡½æ•°ã€‚
æ³¨é‡Š&lt;%-- æ³¨é‡Šå†…å®¹[&lt;%=è¡¨è¾¾å¼%&gt;]--&gt;ï¼Œè¾“å‡ºæ³¨é‡Šã€‚&lt;%-- æ³¨é‡Šå†…å®¹--%&gt;ï¼Œéšè—æ³¨é‡Šã€‚
æŒ‡ä»¤JSPæŒ‡ä»¤ç”¨æ¥æä¾›æ•´ä¸ªJSPé¡µé¢çš„ç›¸å…³ä¿¡æ¯å’Œè®¾å®šJSPé¡µé¢çš„ç›¸å…³å±æ€§ï¼Œå¦‚è®¾å®šç½‘é¡µçš„ç¼–ç æ–¹å¼ã€è„šæœ¬è¯­è¨€åŠå¯¼å…¥éœ€è¦ç”¨åˆ°çš„åŒ…ç­‰ã€‚è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š&lt;%@ æŒ‡ä»¤å å±æ€§å=&quot;å±æ€§å€¼&quot;%&gt;
1ã€pageæŒ‡ä»¤2ã€includeæŒ‡ä»¤3ã€taglibæŒ‡ä»¤
åŠ¨ä½œ1ã€&lt;jsp:param&gt;2ã€&lt;jsp:include&gt;3ã€&lt;jsp:useBean&gt;4ã€&lt;jsp:setProperty&gt;5ã€&lt;jsp:getProperty&gt;6ã€&lt;jsp:forward&gt;7ã€&lt;jsp:plugin&gt;
å†…ç½®å¯¹è±¡1ã€page2ã€config3ã€out4ã€response5ã€request6ã€session7ã€application8ã€pageContext9ã€exception
å‚è€ƒæ–‡æ¡£ã€ŠJava EEåŸºç¡€å®ç”¨æ•™ç¨‹ã€‹ï¼Œéƒ‘é˜¿å¥‡ä¸»ç¼–
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>jsp</tag>
        <tag>servlet</tag>
      </tags>
  </entry>
  <entry>
    <title>JDBCæ¦‚è¿°</title>
    <url>/dev-jdbc-start/</url>
    <content><![CDATA[åè¯è§£é‡ŠJDBCï¼ˆJava Data Base Connectivity,javaæ•°æ®åº“è¿æ¥ï¼‰æ˜¯ä¸€ç§ç”¨äºæ‰§è¡ŒSQLè¯­å¥çš„Java APIï¼Œå¯ä»¥ä¸ºå¤šç§å…³ç³»æ•°æ®åº“æä¾›ç»Ÿä¸€è®¿é—®ï¼Œå®ƒç”±ä¸€ç»„ç”¨Javaè¯­è¨€ç¼–å†™çš„ç±»å’Œæ¥å£ç»„æˆã€‚JDBCæä¾›äº†ä¸€ç§åŸºå‡†ï¼Œæ®æ­¤å¯ä»¥æ„å»ºæ›´é«˜çº§çš„å·¥å…·å’Œæ¥å£ï¼Œä½¿æ•°æ®åº“å¼€å‘äººå‘˜èƒ½å¤Ÿç¼–å†™æ•°æ®åº“åº”ç”¨ç¨‹åºã€‚
ä¸‹è½½jaråŒ…MySQLï¼šMySQL Connectors
Oracleï¼šJDBCã€SQLJã€Oracle JPublisher å’Œé€šç”¨è¿æ¥æ±  (UCP)JDBC and Universal Connection Pool (UCP)
SQL Serverï¼šMicrosoft JDBC Drivers 4.1 and 4.0 for SQL Server


MySQLç”¨æˆ·ç®¡ç†åˆ›å»ºæ–°ç”¨æˆ·
mysql -u root -pcreate user &#x27;scott&#x27;@&#x27;localhost&#x27; identified by &#x27;tiger&#x27;;//åˆ›å»ºæœ¬åœ°ç”¨æˆ·create user &#x27;scott&#x27;@&#x27;%&#x27; identified by &#x27;tiger&#x27;;//åˆ›å»ºè¿œç¨‹ç”¨æˆ·ï¼Œå¯é€‰å‘½ä»¤create database test;grant all prvivileges on test.* to scott;flush privileges;select host,user,password from mysql.user;//æŸ¥çœ‹ç³»ç»Ÿæœ‰å“ªäº›ç”¨æˆ·exit

æ–°ç”¨æˆ·ç™»å½•
mysql -u scott -pshow databases;use test;show tables;exit

åˆ é™¤æ–°ç”¨æˆ·
mysql -u root -pdrop user &#x27;scott&#x27;@&#x27;localhost&#x27;;drop user &#x27;scott&#x27;;//ç›¸å½“äºdrop user &#x27;scott&#x27;@&#x27;%&#x27;;

æµ‹è¯•è¿é€šæ€§ä»¥æµ‹è¯•eclipseå’ŒMySQLè¿æ¥ä¸ºä¾‹ã€‚
è®¾ç½®é©±åŠ¨æ‰“å¼€eclipseï¼ŒWindowï¼ŒOpen Perspectiveï¼ŒOtherâ€¦ï¼ŒDatabase Developmentï¼ŒOKã€‚åœ¨å·¦ä¾§Data Source Explorerä¸­ï¼Œå³å‡»Database Connectionsæ–‡ä»¶å¤¹ï¼ŒNewâ€¦ï¼Œé€‰ä¸­MySQLï¼ŒNameéšæ„ï¼ŒDescriptionéšæ„ï¼ŒNextï¼ŒNew Driver Definitionï¼ŒName/Typeä¸­é€‰ä¸­ä¸€ä¸ªSystem Versionï¼Œç„¶ååœ¨JAR Listä¸­é€‰ä¸­mysql-connector-java-*-bin.jarï¼ŒEdit JAR/Zipâ€¦ï¼Œç„¶åé€‰ä¸­åˆšæ‰ä¸‹è½½è§£å‹çš„jaråŒ…ï¼ŒOKã€‚
è®¾ç½®è¿æ¥åœ¨Propertiesçš„Generalé€‰é¡¹å¡ä¸­ï¼Œè¾“å…¥Databaseã€URLã€User nameã€Passwordï¼ŒSave passwordå‰æ‰“é’©ã€‚
æµ‹è¯•è¿æ¥è®¾ç½®å¥½è¿æ¥åï¼Œç‚¹å‡»Test Connectionï¼Œå³å¯æµ‹è¯•è¿é€šæ€§ã€‚ä¼šæç¤ºping succeededï¼æˆ–è€…ping failedï¼
MySQL demoè®¾è®¡ä½¿ç”¨scottç™»å½•MySQL
use test;create table userbase(id int,username varchar(16),passwd varchar(16));insert into userbase values(1,&#x27;voidking&#x27;,&#x27;voidking&#x27;);insert into userbase values(2,&#x27;voidking2&#x27;,&#x27;voidking2&#x27;);insert into userbase values(3,&#x27;voidking3&#x27;,&#x27;voidking3&#x27;);

åˆ›å»ºjdbcå·¥ç¨‹ï¼Œåˆ›å»ºåŒ…com.voidking.jdbcï¼Œæ–°å»ºJdbcMySQLç±»ï¼Œå†…å®¹å¦‚ä¸‹ã€‚
package com.voidking.jdbc;import java.sql.*;public class JdbcMySQL &#123;	// JDBC driver name and database URL	static final String JDBC_DRIVER = &quot;com.mysql.jdbc.Driver&quot;;	static final String DB_URL = &quot;jdbc:mysql://localhost/test&quot;;	// Database credentials	static final String USER = &quot;scott&quot;;	static final String PASS = &quot;tiger&quot;;	public static void main(String[] args) &#123;		Connection conn = null;		Statement stmt = null;		try &#123;			// STEP 2: Register JDBC driver			Class.forName(JDBC_DRIVER);			// STEP 3: Open a connection			System.out.println(&quot;Connecting to database...&quot;);			conn = DriverManager.getConnection(DB_URL, USER, PASS);			// STEP 4: Execute a query			System.out.println(&quot;Creating statement...&quot;);			stmt = conn.createStatement();			String sql;			sql = &quot;select id,username,passwd from userbase&quot;;			ResultSet rs = stmt.executeQuery(sql);			// STEP 5: Extract data from result set			while (rs.next()) &#123;				// Retrieve by column name				int id = rs.getInt(&quot;id&quot;);				String username = rs.getString(&quot;username&quot;);				String passwd = rs.getString(&quot;passwd&quot;);				// Display values				System.out.print(&quot;ID: &quot; + id);				System.out.print(&quot;, username: &quot; + username);				System.out.println(&quot;, passwd: &quot; + passwd);			&#125;			// STEP 6: Clean-up environment			rs.close();			stmt.close();			conn.close();		&#125; catch (SQLException se) &#123;			// Handle errors for JDBC			se.printStackTrace();		&#125; catch (Exception e) &#123;			// Handle errors for Class.forName			e.printStackTrace();		&#125; finally &#123;			// finally block used to close resources			try &#123;				if (stmt != null)					stmt.close();			&#125; catch (SQLException se2) &#123;			&#125;// nothing we can do			try &#123;				if (conn != null)					conn.close();			&#125; catch (SQLException se) &#123;				se.printStackTrace();			&#125;// end finally try		&#125;// end try		System.out.println(&quot;Goodbye!&quot;);	&#125;// end main&#125;// end JdbcMySQL

å³å‡»JRE System Libraryï¼ŒBuild Pathï¼ŒConfigure Build Pathâ€¦ï¼ŒAdd External JARsâ€¦ï¼Œé€‰ä¸­ä¸‹è½½è§£å‹å¥½çš„mysql-connector-java-*-bin.jarã€‚
è¿è¡Œé¡¹ç›®ï¼Œå³å¯åœ¨æ§åˆ¶å°çœ‹åˆ°è¾“å‡ºã€‚
SQL Server demoè®¾è®¡ä½¿ç”¨saç™»å½•SQL Server
create database test;//åˆ‡æ¢åˆ°testæ•°æ®åº“create table userbase(id int,username varchar(16),passwd varchar(16));insert into userbase values(1,&#x27;voidking&#x27;,&#x27;voidking&#x27;);insert into userbase values(2,&#x27;voidking2&#x27;,&#x27;voidking2&#x27;);insert into userbase values(3,&#x27;voidking3&#x27;,&#x27;voidking3&#x27;);

æ–°å»ºJdbcSQLServerç±»ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
package com.voidking.jdbc;import java.sql.*;public class JdbcSQLServer &#123;	// JDBC driver name and database URL	static final String JDBC_DRIVER = &quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;;	static final String DB_URL = &quot;jdbc:sqlserver://127.0.0.1:1433;databaseName=test&quot;;	// Database credentials	static final String USER = &quot;sa&quot;;	static final String PASS = &quot;123&quot;;	public static void main(String[] args) &#123;		Connection conn = null;		Statement stmt = null;		try &#123;			// STEP 2: Register JDBC driver			Class.forName(JDBC_DRIVER);			// STEP 3: Open a connection			System.out.println(&quot;Connecting to database...&quot;);			conn = DriverManager.getConnection(DB_URL, USER, PASS);			// STEP 4: Execute a query			System.out.println(&quot;Creating statement...&quot;);			stmt = conn.createStatement();			String sql;			sql = &quot;select id,username,passwd from userbase&quot;;			ResultSet rs = stmt.executeQuery(sql);			// STEP 5: Extract data from result set			while (rs.next()) &#123;				// Retrieve by column name				int id = rs.getInt(&quot;id&quot;);				String username = rs.getString(&quot;username&quot;);				String passwd = rs.getString(&quot;passwd&quot;);				// Display values				System.out.print(&quot;ID: &quot; + id);				System.out.print(&quot;, username: &quot; + username);				System.out.println(&quot;, passwd: &quot; + passwd);			&#125;			// STEP 6: Clean-up environment			rs.close();			stmt.close();			conn.close();		&#125; catch (SQLException se) &#123;			// Handle errors for JDBC			se.printStackTrace();		&#125; catch (Exception e) &#123;			// Handle errors for Class.forName			e.printStackTrace();		&#125; finally &#123;			// finally block used to close resources			try &#123;				if (stmt != null)					stmt.close();			&#125; catch (SQLException se2) &#123;			&#125;// nothing we can do			try &#123;				if (conn != null)					conn.close();			&#125; catch (SQLException se) &#123;				se.printStackTrace();			&#125;// end finally try		&#125;// end try		System.out.println(&quot;Goodbye!&quot;);	&#125;// end main&#125;

Oracle demoè®¾è®¡ä½¿ç”¨scottç”¨æˆ·ç™»å½•
create table userbase(id int,username varchar(16),passwd varchar(16));insert into userbase values(1,&#x27;voidking&#x27;,&#x27;voidking&#x27;);insert into userbase values(2,&#x27;voidking2&#x27;,&#x27;voidking2&#x27;);insert into userbase values(3,&#x27;voidking3&#x27;,&#x27;voidking3&#x27;);

æ–°å»ºJdbcOracleç±»ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
package com.voidking.jdbc;import java.sql.*;public class JdbcOracle &#123;	// JDBC driver name and database URL	static final String JDBC_DRIVER = &quot;oracle.jdbc.OracleDriver&quot;;	static final String DB_URL = &quot;jdbc:oracle:thin:@localhost:1521:orcl&quot;;	// Database credentials	static final String USER = &quot;scott&quot;;	static final String PASS = &quot;tiger&quot;;	public static void main(String[] args) &#123;		Connection conn = null;		Statement stmt = null;		try &#123;			// STEP 2: Register JDBC driver			Class.forName(JDBC_DRIVER);			// STEP 3: Open a connection			System.out.println(&quot;Connecting to database...&quot;);			conn = DriverManager.getConnection(DB_URL, USER, PASS);			// STEP 4: Execute a query			System.out.println(&quot;Creating statement...&quot;);			stmt = conn.createStatement();			String sql;			sql = &quot;select id,username,passwd from userbase&quot;;			ResultSet rs = stmt.executeQuery(sql);			// STEP 5: Extract data from result set			while (rs.next()) &#123;				// Retrieve by column name				int id = rs.getInt(&quot;id&quot;);				String username = rs.getString(&quot;username&quot;);				String passwd = rs.getString(&quot;passwd&quot;);				// Display values				System.out.print(&quot;ID: &quot; + id);				System.out.print(&quot;, username: &quot; + username);				System.out.println(&quot;, passwd: &quot; + passwd);			&#125;			// STEP 6: Clean-up environment			rs.close();			stmt.close();			conn.close();		&#125; catch (SQLException se) &#123;			// Handle errors for JDBC			se.printStackTrace();		&#125; catch (Exception e) &#123;			// Handle errors for Class.forName			e.printStackTrace();		&#125; finally &#123;			// finally block used to close resources			try &#123;				if (stmt != null)					stmt.close();			&#125; catch (SQLException se2) &#123;			&#125;// nothing we can do			try &#123;				if (conn != null)					conn.close();			&#125; catch (SQLException se) &#123;				se.printStackTrace();			&#125;// end finally try		&#125;// end try		System.out.println(&quot;Goodbye!&quot;);	&#125;// end main&#125;// end JdbcOracle

æºä»£ç åˆ†äº«https://github.com/voidking/jdbc.git
å°ç»“é€šè¿‡ä¸Šé¢ä¸‰ä¸ªè¿æ¥ä¸åŒæ•°æ®åº“çš„ä¾‹å­ï¼Œæˆ‘ä»¬å‘ç°ï¼Œä»£ç çš„å·®åˆ«ï¼Œä»…ä»…åœ¨äºé©±åŠ¨åŒ…åã€æ•°æ®åº“çš„åœ°å€ã€ç”¨æˆ·åã€å¯†ç ã€‚é‚£ä¹ˆï¼Œè¿™å››ä¸ªä¿¡æ¯åœ¨å“ªé‡Œè·å¾—å‘¢ï¼Ÿé™¤äº†è‡ªå·±è®°å¿†ä¹‹å¤–ï¼ŒéƒåŒå­¦æä¾›ä¸€ä¸ªæŸ¥è¯¢æµ‹è¯•çš„æ–¹æ³•ã€‚Database Developmentï¼Œå³å‡»è¿æ¥ï¼ŒPropertiesï¼ŒDriver Propertiesã€‚è¿™æ—¶ï¼Œå·²ç»å¯ä»¥çœ‹åˆ°é©±åŠ¨ã€ç”¨æˆ·åã€å¯†ç ã€‚è‡³äºé©±åŠ¨ï¼Œè¯·æ¥ç€ç‚¹å¼€Edit Driver Definitionï¼ŒPropertiesï¼ŒDriver Classåé¢çš„å°±æ˜¯é©±åŠ¨åŒ…ã€‚è‡³æ­¤ï¼Œå››é¡¹ä¿¡æ¯éƒ½æœ‰äº†ã€‚
å‚è€ƒæ–‡æ¡£JDBCå¿«é€Ÿå…¥é—¨æ•™ç¨‹ï¼šhttp://www.yiibai.com/jdbc/jdbc_quick_guide.html
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
        <tag>jdbc</tag>
      </tags>
  </entry>
  <entry>
    <title>JPAä¸Hibernateçš„å…³ç³»</title>
    <url>/dev-jpa-and-hibernate/</url>
    <content><![CDATA[åè¯è§£é‡ŠJPAï¼šJava Persistence APIï¼Œæ˜¯Java EE 5çš„æ ‡å‡†ORMæ¥å£ï¼Œä¹Ÿæ˜¯ejb3è§„èŒƒçš„ä¸€éƒ¨åˆ†ã€‚JPAé€šè¿‡JDK5.0æ³¨è§£æˆ–XMLæè¿°å¯¹è±¡-å…³ç³»è¡¨çš„æ˜ å°„å…³ç³»ï¼Œå¹¶å°†è¿è¡ŒæœŸå®ä½“å¯¹è±¡æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­å»ã€‚
ORMï¼šObject-Relational Mappingï¼Œå¯¹è±¡å…³ç³»æ˜ å°„ï¼Œå³å®ä½“å¯¹è±¡å’Œæ•°æ®åº“è¡¨çš„æ˜ å°„ã€‚
Hibernateï¼šæ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„å¯¹è±¡å…³ç³»æ˜ å°„æ¡†æ¶ï¼Œå®ƒå¯¹JDBCè¿›è¡Œäº†éå¸¸è½»é‡çº§çš„å¯¹è±¡å°è£…ï¼Œä½¿å¾—Javaç¨‹åºå‘˜å¯ä»¥éšå¿ƒæ‰€æ¬²çš„ä½¿ç”¨å¯¹è±¡ç¼–ç¨‹æ€ç»´æ¥æ“çºµæ•°æ®åº“ã€‚
JPAä¸Hibernateçš„å…³ç³»JPAå’ŒHibernateä¹‹é—´çš„å…³ç³»ï¼Œå¯ä»¥ç®€å•çš„ç†è§£ä¸ºJPAæ˜¯æ ‡å‡†æ¥å£ï¼ŒHibernateæ˜¯å®ç°ã€‚

Hibernateä¸»è¦é€šè¿‡hibernate-annotationã€hibernate-coreå’Œhibernate-entitymanagerä¸‰ä¸ªç»„ä»¶æ¥å®ç°ä¸JPAçš„å…³ç³»ã€‚
hibernate-annotationæ˜¯Hibernateæ”¯æŒannotationæ–¹å¼é…ç½®çš„åŸºç¡€ï¼Œå®ƒåŒ…æ‹¬äº†æ ‡å‡†çš„JPA annotationä»¥åŠHibernateè‡ªèº«ç‰¹æ®ŠåŠŸèƒ½çš„annotationã€‚
hibernate-coreæ˜¯Hibernateçš„æ ¸å¿ƒå®ç°ï¼Œæä¾›äº†Hibernateæ‰€æœ‰çš„æ ¸å¿ƒåŠŸèƒ½ã€‚
hibernate-entitymanagerå®ç°äº†æ ‡å‡†çš„JPAï¼Œå¯ä»¥æŠŠå®ƒçœ‹æˆhibernate-coreå’ŒJPAä¹‹é—´çš„é€‚é…å™¨ï¼Œå®ƒå¹¶ä¸ç›´æ¥æä¾›ORMçš„åŠŸèƒ½ï¼Œè€Œæ˜¯å¯¹hibernate-coreè¿›è¡Œå°è£…ï¼Œä½¿å¾—Hibernateç¬¦åˆJPAçš„è§„èŒƒã€‚
å‚è€ƒæ–‡æ¡£http://blog.163.com/hero_213/blog/static/398912142010312024809/
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>hibernate</tag>
        <tag>jpa</tag>
      </tags>
  </entry>
  <entry>
    <title>eclipseå®ç”¨è®¾ç½®</title>
    <url>/dev-eclipse-practical-setting/</url>
    <content><![CDATA[è®¾ç½®é¡¹ç›®é»˜è®¤ç¼–ç åœ¨eclipseä¸­ï¼ŒWindowï¼ŒPreferenceï¼ŒGeneralï¼ŒWorkspaceï¼ŒText file encodingï¼ŒOtheré€‰æ‹©UTF-8ã€‚
è®¾ç½®JSPé¡µé¢é»˜è®¤ç¼–ç åœ¨eclipseä¸­ï¼ŒWindowï¼ŒPreferenceï¼ŒWebï¼ŒJSP Filesï¼ŒEncodingé€‰æ‹©ISO 10646/Uincode(UTF-8)ã€‚
è®¾ç½®ä»£ç æç¤ºåœ¨eclipseä¸­ï¼ŒWindowï¼ŒPreferenceï¼ŒJavaï¼ŒEditorï¼ŒContent Assistï¼ŒAuto Activationï¼ŒAuto activation triggers for Javaä¸­è¾“å…¥â€œ.â€å’Œ52ä¸ªè‹±æ–‡å­—ç¬¦ã€‚
è®¾ç½®å¿«æ·é”®åœ¨eclipseä¸­ï¼ŒWindowï¼ŒPreferenceï¼ŒGeneralï¼ŒKeysã€‚


æ¢å¤é»˜è®¤å¸ƒå±€Windowï¼ŒPerspectiveï¼ŒReset Perspective
eclipseæŸ¥çœ‹JDKæºä»£ç eclipseæŸ¥çœ‹JDKä¸­çš„ç±»ï¼Œå‡ºç°The jar file rt.jar has no source attachmentã€‚
è§£å†³åŠæ³•ï¼š1ã€Windowï¼ŒPreferencesï¼ŒJavaï¼ŒInstalled JREsï¼Œé€‰ä¸­å®‰è£…çš„JREï¼ŒEditã€‚2ã€JRE system librariesä¸­å±•å¼€rt.jarã€‚3ã€Source Attachmentâ€¦ï¼Œé€‰ä¸­JDKå®‰è£…ç›®å½•ä¸­çš„src.zipã€‚
eclipseæŸ¥çœ‹tomcatæºä»£ç eclipseæºç æŸ¥çœ‹tomcatä¸­çš„ç±»ï¼Œå‡ºç°Source not foundã€‚è§£å†³åŠæ³•ï¼š1ã€ä¸‹è½½ç›¸åº”ç‰ˆæœ¬tomcatæºç ï¼Œç±»ä¼¼äºapache-tomcat-8.0.44-src.zipã€‚æ‰¾ä¸åˆ°ç›¸åº”ç‰ˆæœ¬çš„è¯ï¼Œåœ¨é¡µé¢ä¸Šæ‰¾åˆ°Quick Navigationï¼ŒArchivesï¼Œå³å¯æ‰¾åˆ°å†å²ç‰ˆæœ¬ã€‚2ã€å•å‡»Change Attached Sourceâ€¦ï¼Œé€‰ä¸­External locationã€‚3ã€Pathé€‰ä¸­apache-tomcat-8.0.44-src.zipï¼ŒOKã€‚
å¸¦æºæ–‡ä»¶çš„jaråŒ…ä¸‹è½½http://www.java2s.com/Code/Jar/CatalogJar.htm
åç¼–è¯‘classæ–‡ä»¶1ã€ä¸‹è½½ç›¸åº”ç‰ˆæœ¬çš„jadClipseï¼Œè¿™é‡Œä¸‹è½½net.sf.jadclipse_3.3.0.jarã€‚2ã€ä¸‹è½½ç›¸åº”ç‰ˆæœ¬çš„jadï¼Œè¿™é‡Œä¸‹è½½Jad 1.5.8g for Windows 9x/NT/2000 on Intel platformã€‚3ã€å°†net.sf.jadclipse_3.3.0.jarç§»åŠ¨åˆ°eclipseçš„pluginsç›®å½•ä¸‹ã€‚4ã€å°†jad.exeç§»åŠ¨åˆ°JDKå®‰è£…ç›®å½•ä¸‹çš„binç›®å½•ä¸‹ï¼ˆæ–¹ä¾¿ä½¿ç”¨ï¼‰ã€‚5ã€ç§»åŠ¨eclipseçš„configurationç›®å½•ä¸‹çš„org.eclipse.updateæ–‡ä»¶å¤¹åˆ°å…¶ä»–ä½ç½®ï¼ˆæˆ–è€…ç›´æ¥åˆ é™¤ï¼‰ã€‚6ã€é‡å¯eclipseï¼ŒWindow-&gt;Preferences-&gt;Javaï¼Œæ­¤æ—¶å‘ç°å¤šäº†ä¸€ä¸ªJadClipseã€‚7ã€Path to decompilerå¡«å…¥jad.exeçš„è·¯å¾„ã€‚8ã€Window-&gt;Preferences-&gt;General-&gt;Editors-&gt;File Associationsï¼ŒæŸ¥çœ‹.classæ–‡ä»¶çš„é»˜è®¤æ‰“å¼€æ–¹å¼ï¼Œå·²ç»å˜æˆäº†JadClipseã€‚æŸ¥çœ‹.class without sourcesæ–‡ä»¶çš„é»˜è®¤æ‰“å¼€æ–¹å¼ï¼Œä¿®æ”¹ä¸ºJadClipseã€‚9ã€é€‰æ‹©éœ€è¦æŸ¥çœ‹çš„ç±»ï¼Œç‚¹å‡»F3æŸ¥çœ‹æºç ã€‚å¦‚æœä¸èƒ½æŸ¥çœ‹ï¼Œè¯·å…³é—­tabç„¶åé‡æ–°æŸ¥çœ‹ï¼ˆåç¼–è¯‘å¯èƒ½éœ€è¦ä¸€ç‚¹æ—¶é—´ï¼‰ã€‚
ä»£ç æç¤ºä¸Šå±è®¾ç½®ä¾‹å¦‚ï¼šè¦æ–°å»ºä¸€ä¸ªStringç±»å‹çš„å˜é‡valueï¼Œåˆ™å½“è¾“å…¥åˆ°valueçš„æ—¶å€™ï¼Œeclipseä¼šåœ¨å€™é€‰åˆ—è¡¨ä¸­åˆ—å‡ºvalueStringï¼Œå¦‚æœæ­¤æ—¶å†è¾“å…¥ç©ºæ ¼çš„è¯ï¼Œå°±ä¼šé€‰ä¸­å€™é€‰åˆ—è¡¨ä¸­çš„valueStringï¼Œåˆ™æ–°å»ºçš„å˜é‡å°†ä¼šå˜æˆvalueStringã€‚
è§£å†³åŠæ³•ï¼šæ‰“å¼€eclipseï¼ŒWindowï¼ŒShow Viewï¼ŒPlug-insï¼Œæ‰¾åˆ°org.eclipse.jface.textå³å‡»ï¼Œimport asï¼ŒSource Projectï¼Œå¯¼å…¥å®Œæˆåï¼Œåœ¨ä½ çš„workspaceå°±å¯ä»¥çœ‹åˆ°è¿™ä¸ªprojectäº†ã€‚
PSï¼šä¿®æ”¹æ’ä»¶ï¼Œéœ€è¦ä¸‹è½½ç›¸åŒVersionçš„Eclipse RCPï¼ˆè¯¥ç‰ˆæœ¬ä¿®æ”¹æºä»£ç æ¯”è¾ƒæ–¹ä¾¿ï¼Œèƒ½è‡ªåŠ¨å¯¼å…¥æºä»£ç ï¼‰ï¼Œå› ä¸ºå¼€å‘ç‰ˆã€ä¼ä¸šç‰ˆç­‰å¯¼å‡ºPlug-insé¡¹ç›®åæ— æ³•ç¼–è¾‘ã€‚
ç„¶åï¼Œåœ¨å¯¼å…¥å·¥ç¨‹ä¸‹çš„srcæ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰¾åˆ°åŒ…org.eclipse.jface.text.contentassistï¼Œç±»CompletionProposalPopupï¼Œå‡½æ•°verifyKey()ã€‚
if (contains(triggers, key)) &#123;	e.doit= false;	hide();	insertProposal(p, key, e.stateMask, fContentAssistSubjectControlAdapter.getSelectedRange().x);&#125;
ä¿®æ”¹ä¸º
if (key != &#x27;=&#x27; &amp;&amp; key != 0x20 &amp;&amp; key != &#x27;;&#x27; &amp;&amp; contains(triggers, key)) &#123;	e.doit= false;	hide();	insertProposal(p, key, e.stateMask, fContentAssistSubjectControlAdapter.getSelectedRange().x);&#125;
å®ç°æ•ˆæœï¼šç­‰å·é”®ã€ç©ºæ ¼é”®ã€åˆ†å·é”®ä¸ä¸Šå±ã€‚
case &#x27;\t&#x27;:	e.doit= false;	fProposalShell.setFocus();	return false;
ä¿®æ”¹ä¸º
case &#x27;\t&#x27;:	e.doit= false;	insertSelectedProposalWithMask(e.stateMask);	return false;
å®ç°æ•ˆæœï¼šTabé”®ä¸Šå±ã€‚
ä¿®æ”¹å®Œæˆåï¼Œé¡¹ç›®å³å‡»ï¼ŒExportï¼ŒDeployable plug-ins and fragmentsï¼Œå‹¾é€‰Available Plug-ins and Fragmentsï¼ŒæŒ‡å®šDestinationçš„Directoryï¼ŒFinishã€‚
ä½¿ç”¨å¯¼å‡ºçš„jaråŒ…ï¼Œæ›¿æ¢åŸeclipse/pluginsä¸‹çš„jaråŒ…ï¼Œå³å¯å®ç°æ’ä»¶çš„ä¿®æ”¹ã€‚
æ³¨æ„ï¼šæœ€æ–°ç‰ˆçš„eclipseï¼ŒNeon.1a Release (4.6.1)ï¼Œæ’ä»¶çš„æ‰€åœ¨ç›®å½•å˜æ›´å¦‚ä¸‹ï¼šC:\Users\Administrator\.p2\pool\plugins\ï¼Œä½¿ç”¨å¯¼å‡ºçš„jaråŒ…ï¼Œæ›¿æ¢è¯¥ç›®å½•ä¸‹çš„jaråŒ…ï¼Œå³å¯å®ç°æ’ä»¶çš„ä¿®æ”¹ã€‚
å¦‚æœå†æ¬¡å˜æ›´æ’ä»¶æ‰€åœ¨ç›®å½•ï¼Œè¯·ä¾æ¬¡ç‚¹å‡»Windowï¼ŒShow Viewï¼ŒPlug-insã€‚ç„¶åå•å‡»ä»»æ„æ’ä»¶ï¼Œåœ¨eclipseåº•éƒ¨å³å¯çœ‹åˆ°æ’ä»¶è·¯å¾„ã€‚
é…ç½®æœ¬åœ°dtdæ–‡ä»¶æˆ‘ä»¬ä»¥é…ç½®xwork-validator-1.0.dtdæ–‡ä»¶ä¸ºä¾‹ï¼š
1ã€è§£å‹xwork-core-*.jaråŒ…ï¼Œæ‰¾åˆ°xwork-validator-1.0.dtdã€‚
2ã€eclipseï¼ŒWindowï¼ŒPreferencesï¼ŒXMLï¼ŒXML Catelogï¼ŒAddï¼ŒFile Systemâ€¦ï¼Œé€‰ä¸­åˆšæ‰è§£å‹çš„xwork-validator-1.0.dtdï¼Œæ‰“å¼€ï¼Œ
3ã€Locationå·²ç»é€‰å¥½D:\jar\struts2\xwork-validator-1.0.dtdï¼ŒKey typeé€‰æ‹©Public IDï¼ŒKeyå¡«-//OpenSymphony Group//XWork Validator Config 1.0//ENï¼ŒAlternative web addresså¡«http://struts.apache.org/dtds/xwork-validator-1.0.dtdã€‚ï¼ˆæœ¬åœ°dtdä¸å­˜åœ¨æ—¶å›å»webä¸Šå»æ‰¾dtdï¼‰
4ã€StrutsAction-validation.xmléœ€è¦ä¿®æ”¹å¦‚ä¸‹ï¼š
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE validators PUBLIC        &quot;-//OpenSymphony Group//XWork Validator Config 1.0//EN&quot;        &quot;D:\jar\struts2\xwork-validator-1.0.dtd&quot;&gt;&lt;validators&gt;&lt;!--éœ€è¦æ ¡éªŒçš„å­—æ®µçš„å­—æ®µå--&gt;	&lt;field name=&quot;name&quot;&gt;		&lt;field-validator type=&quot;requiredstring&quot;&gt;			&lt;!--å»ç©ºæ ¼--&gt;			&lt;param name=&quot;trim&quot;&gt;true&lt;/param&gt;			&lt;!--é”™è¯¯æç¤ºä¿¡æ¯--&gt;			&lt;message&gt;å§“åæ˜¯å¿…é¡»çš„&lt;/message&gt;		&lt;/field-validator&gt;	&lt;/field&gt;&lt;/validators&gt;

å‚è€ƒæ–‡æ¡£ä¿®æ”¹ç©ºæ ¼é”®â€=â€é”®ä¸ä¸Šå±æ¯”è¾ƒå…¨é¢çš„Eclipseé…ç½®è¯¦è§£
]]></content>
      <categories>
        <category>engineering</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>eclipse</tag>
      </tags>
  </entry>
  <entry>
    <title>å•è¯ç¼©å†™</title>
    <url>/hobby-word-abbreviation/</url>
    <content><![CDATA[ç¼©å†™    å…¨ç§°POSIX    Portable Operating System Interface of Unixï¼ˆå¯ç§»æ¤æ“ä½œç³»ç»Ÿæ¥å£ï¼‰LSB           Linux Standard Base (Linuxæ ‡å‡†åŸºç¡€)FHS        File system Hierarchy Standard(æ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡æ ‡å‡†)GNU        GNUâ€™s Not UnixFSF        Free Software FoundationBSD        Berkeley Software DistributionLFS        Linux From ScratchBLFS    Beyond Linux From ScratchCLFS    Cross Linux From ScratchHLFS    Hardened Linux From ScratchMBR        Master Boot RecorderGNOME    The GNU Network Object Model Environment

SELinux    Security Enhanced LinuxLPI        Linux Professional Instituteext3    Third Extended File System(ç¬¬ä¸‰æ–‡ä»¶æ‰©å±•ç³»ç»Ÿ)VFS        Virtual Filesystem Switch(è™šæ‹Ÿæ–‡ä»¶äº¤æ¢ç³»ç»Ÿ)KDE        Kool Desktop EnvironmentIDE        Integrated Development Environment(é›†æˆå¼€å‘ç¯å¢ƒ)CLI        command-line interface(å‘½ä»¤è¡Œç•Œé¢)GUI        Graphical User Interface(å›¾å½¢ç”¨æˆ·ç•Œé¢)GPT        å…¨å±€å”¯ä¸€æ ‡è¯†åˆ†åŒºè¡¨(GUID Partition Table)VPS        Virtual Private Server ï¼ˆè™šæ‹Ÿä¸“ç”¨æœåŠ¡å™¨ï¼‰DNSR    domain name system resolutionSSH        Secure ShellPAM     Pluggable Authentication Modules, åµŒå…¥å¼æ¨¡å—SEO        Search Engine Optimizationrss        Really Simple Syndication | RDF Site Summary | Rich Site SummaryRDF        Resource Description FrameworkVPN        Virtual Private NetworkRE        Regular Expression(æ­£åˆ™è¡¨è¾¾å¼)RHCA    Red Hat Certified Architect(çº¢å¸½è®¤è¯æ¶æ„å¸ˆ)RHCT    çº¢å¸½è®¤è¯æŠ€å¸ˆRHCE    çº¢å¸½è®¤è¯å·¥ç¨‹å¸ˆRHEL    Red Hat Enterprise LinuxOSI(OSI/RM)        Open System Interconnection Reference ModelMAC        Media Access ControlLLC        Logic Link ContorlWLAN    Wireless Local Area NetworkNOS        Network Operation SystemTCP        Transmission Control ProtocolIP        Internet ProtocolUDP        User Datagram protocolARP        Address Resolution ProtocolRARP    Reverse Address Resolution ProtocolDHCP    Dynamic Host Configuration Protocoltty        teletypewriterGnome    GNUâ€™s network object model environmentipconfig        Internet Protocol Configuringï¼ˆIPåœ°å€é…ç½®ï¼‰ifconfig        Network Interfaces Configuringï¼ˆç½‘ç»œæ¥å£é…ç½®ï¼‰css        Cascading Style Sheets
]]></content>
      <categories>
        <category>computer</category>
      </categories>
  </entry>
  <entry>
    <title>Linuxä¸­å®‰è£…é…ç½®FTPæœåŠ¡</title>
    <url>/dev-linux-ftp/</url>
    <content><![CDATA[å‰è¨€FTPæœåŠ¡æ˜¯æœ€å¸¸è§çš„æœåŠ¡ä¹‹ä¸€ï¼Œæœ¬æ–‡ä¸­æˆ‘ä»¬å­¦ä¹ åœ¨Linuxä¸­å®‰è£…é…ç½®FTPæœåŠ¡ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

File Transfer Protocol
CentOS7 å®‰è£… vsftpd æœåŠ¡



å®‰è£…vsftpdæœåŠ¡vsftpdç®€ä»‹vsftpdæ˜¯åœ¨Linuxå‘è¡Œç‰ˆä¸­æœ€æ¨å´‡çš„ä¸€ç§FTPæœåŠ¡å™¨ç¨‹åºï¼Œvsftpdçš„ç‰¹ç‚¹ï¼šå°å·§è½»å¿«ã€å®‰å…¨æ˜“ç”¨ç­‰ã€‚ 
centos7å®‰è£…vsftpd1ã€å®‰è£… vsftpd å’Œ ftp
yum install vsftpd ftp -y

2ã€å¯åŠ¨vsftpdæœåŠ¡
systemctl enable vsftpdsystemctl start vsftpdsystemctl status vsftpd

vsftpdå¯åŠ¨åï¼Œé»˜è®¤ç«¯å£å·21ï¼Œå…è®¸åŒ¿åè®¿é—®ã€‚
3ã€è®¿é—®æµ‹è¯•
ftp 127.0.0.1ftp 192.168.56.101

Name è¾“å…¥ anonymous ï¼Œ Password ä¸ºç©ºç›´æ¥å›è½¦ã€‚ç™»å½•åï¼Œå½“å‰ç›®å½•ä¸ºæ ¹ç›®å½•ï¼Œé»˜è®¤æœ‰ä¸ªpubç›®å½•ï¼Œé‡Œé¢ä¸ºç©ºã€‚
é…ç½®æ–‡ä»¶è¯´æ˜
/etc/vsftpd/vsftpd.conf ä¸»é…ç½®æ–‡ä»¶
/etc/vsftpd/ftpusers ä¸å…è®¸è®¿é—®çš„ç”¨æˆ·åˆ—è¡¨
/etc/vsftpd/user_list å…è®¸æˆ–è€…ä¸å…è®¸è®¿é—®çš„ç”¨æˆ·åˆ—è¡¨
/var/log/xferlog ä¸Šä¼ ä¸‹è½½æ—¥å¿—

é…ç½®å…è®¸ç³»ç»Ÿç”¨æˆ·è®¿é—®FTP1ã€ç¼–è¾‘é…ç½®æ–‡ä»¶
vim /etc/vsftpd/vsftpd.conf

ä¿®æ”¹å¦‚ä¸‹ï¼š
anonymous_enable=NOlocal_enable=YESwrite_enable=YESlocal_umask=022chroot_local_user=YESuserlist_enable=YESuserlist_deny=NOuserlist_file=/etc/vsftpd/user_listpam_service_name=vsftpdtcp_wrappers=YES

2ã€é‡å¯vsftpd
systemctl restart vsftpd

3ã€åˆ›å»ºftpç”¨æˆ·
useradd ftpuser -d /data/ftpuserpasswd ftpuserchmod a-w /data/ftpuserecho ftpuser &gt; /etc/vsftpd/user_list

4ã€é™åˆ¶ç”¨æˆ·åªèƒ½ftpç™»å½•ï¼Œä¸èƒ½sshç™»å½•
usermod -s /sbin/nologin ftpuserecho &quot;/sbin/nologin&quot; &gt;&gt; /etc/shells

5ã€è®¿é—®æµ‹è¯•
ftp 127.0.0.1ftp 192.168.56.101

Name è¾“å…¥ ftpuser ï¼Œ Password è¾“å…¥è¯¥ç”¨æˆ·çš„å¯†ç ã€‚ç™»å½•åï¼Œå½“å‰ç›®å½•ä¸º/data/ftpuserã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ftp</tag>
      </tags>
  </entry>
  <entry>
    <title>Win7ä¸ç”¨è½¯ä»¶å¼€wifiçƒ­ç‚¹</title>
    <url>/hobby-win7-no-software-open-wifi/</url>
    <content><![CDATA[æ ‡å‡†è®¾ç½®æµç¨‹é¦–å…ˆwin+Rï¼Œè¾“å…¥cmdï¼Œæ‰“å¼€å‘½ä»¤ç¬¦æç¤ºç•Œé¢ï¼Œç„¶åç”¨ä»¥ä¸‹å‘½ä»¤æ¥å®Œæˆè®¾ç½®
netsh wlan set hostednetwork mode=allownetsh wlan set hostednetwork ssid=&quot;ihelloworld&quot;netsh wlan set hostednetwork key=&quot;helloworld&quot;netsh wlan refresh hostednetwork keynetsh wlan start hostednetwork 
å¦‚æœæœ‰å°ä¼™ä¼´ä¸ä¼šåšï¼Œè¯·ç›´æ¥ä¸‹è½½æ–‡ä»¶wifi.batï¼Œç„¶ååŒå‡»å³å¯ã€‚ç„¶åå¿…é¡»æ‰§è¡Œçš„ä¸€æ­¥æ˜¯ï¼š
æ‰“å¼€ç½‘ç»œå’Œå…±äº«ä¸­å¿ƒâ€”â€”æ›´æ”¹é€‚é…å™¨è®¾ç½®â€”â€”å³å‡»ä½ æ­£åœ¨ä½¿ç”¨çš„ç½‘ç»œè¿æ¥â€”â€”å±æ€§â€”â€”å…±äº«â€”â€”ç„¶åæŠŠä¸¤ä¸ªå‹¾éƒ½å‹¾ä¸Š
è‡³æ­¤ï¼Œç†è®ºä¸Šä½ å·²ç»æˆåŠŸå¼€å¯äº†åä¸ºâ€œihelloworldâ€ï¼Œå¯†ç ä¸ºâ€œhelloworldâ€çš„wifiã€‚å¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿ç•™è¨€æˆ–ç›´æ¥è”ç³»æˆ‘ã€‚


å¸¸ç”¨å‘½ä»¤é›†é”¦æœ‰æ—¶å€™é€šè¿‡ä»¥ä¸Šå‘½ä»¤æ— æ³•æˆåŠŸå¯åŠ¨æ— çº¿ï¼Œå°±éœ€è¦ä¸‹é¢çš„å‘½ä»¤æ¥è°ƒè¯•ã€‚
æ˜¾ç¤ºæ”¯æŒçš„æ‰¿è½½ç½‘ç»œ

netsh wlan show drivers

æ˜¾ç¤ºä½ çš„æ— çº¿æ‰¿è½½ç½‘ç»œçš„ä¿¡æ¯

netsh wlan show hostednetwork

å¯åŠ¨æ— çº¿æ‰¿è½½ç½‘ç»œ

netsh wlan start hostednetwork

åœæ­¢ä½ çš„æ— çº¿æ‰¿è½½ç½‘ç»œ

netsh wlan stop hostednetwork

æ›´æ”¹ç½‘ç»œåç§°

netsh wlan set hostednetwork ssid=â€ä½ çš„åç§°â€

æ›´æ”¹å¯†ç 

netsh wlan set hostednetwork key=â€ä½ çš„å¯†ç â€

å¦‚æœæƒ³å¯†ç ç«‹å³ç”Ÿæ•ˆå¯ä»¥ç”¨

netsh wlan refresh hostednetwork key

æœ€åå°±æ˜¯ä½ çœŸçš„ä¸ç”¨è¿™ä¸ªæ— çº¿ç½‘ç»œäº†ï¼Œä½ åœæ­¢ä¹‹åï¼Œä¹Ÿä¸æƒ³çœ‹åˆ°å¤šå‡ºæ¥çš„é‚£å—æ— çº¿ç½‘å¡ï¼Œé‚£ä¹ˆå°±æ‰§è¡Œ

netsh wlan set hostednetwork mode=

å°±å†ä¹Ÿçœ‹ä¸åˆ°é‚£å—ç½‘å¡äº†ï¼Œå½“ç„¶ä½ æƒ³é‡æ–°å¼€å¯çš„è¯å°±æ‰§è¡Œ

netsh wlan set hostednetwork mode=allow

PSï¼šå¦‚ä½•è®¾ç½®æ‰èƒ½è®©å®ƒå¼€æœºè‡ªåŠ¨å¯åŠ¨ï¼Ÿåœ¨win7ç³»ç»Ÿä¸‹å¯ä»¥è¿™æ ·è®¾ç½®ï¼Œæ‰“å¼€è®°äº‹æœ¬ï¼Œè¾“å…¥netsh wlan start hostednetworkï¼Œä¿å­˜ï¼ˆæ–‡ä»¶åä¸ºâ€å¯åŠ¨wifi.batâ€ï¼Œä¿å­˜ç±»å‹é€‰æ‰€æœ‰æ–‡ä»¶ï¼‰ã€‚æ‰“å¼€å¼€å§‹-æ‰€æœ‰ç¨‹åº-é™„ä»¶-ç³»ç»Ÿå·¥å…·-ä»»åŠ¡è®¡åˆ’ç¨‹åº-åˆ›å»ºåŸºæœ¬ä»»åŠ¡-å¡«å†™åç§°ï¼ˆè‡ªå·±å‘½åï¼‰-ä¸‹ä¸€æ­¥-é€‰æ‹©è®¡ç®—æœºå¯åŠ¨æ—¶-ä¸‹ä¸€æ­¥-æµè§ˆ-æ‰¾ä½ å»ºçš„é‚£ä¸ªæ–‡ä»¶é€‰å®š-ä¸‹ä¸€æ­¥-å®Œæˆã€‚OKäº†,ä¸‹æ¬¡åœ¨ä½ å¼€æœºçš„æ—¶å€™å°±ä¼šè‡ªå·±å¯åŠ¨äº†ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>windows</tag>
        <tag>wifi</tag>
      </tags>
  </entry>
  <entry>
    <title>ç½‘é¡µå†…å®¹æ— æ³•å¤åˆ¶è§£å†³åŠæ³•</title>
    <url>/hobby-page-content-copy/</url>
    <content><![CDATA[å¾ˆå¤šç½‘ç«™å†…å®¹ä¸èƒ½å¤åˆ¶ï¼Œä½†æ˜¯ç”±äºæŸäº›åŸå› ï¼Œæˆ‘ä»¬éœ€è¦å¤åˆ¶ä¸€äº›å†…å®¹ã€‚è¿™æ—¶ï¼Œä¸å¦¨è¯•è¯•voidç»™å‡ºçš„ä¸¤ä¸ªæ–¹æ³•ã€‚
æ–¹æ³•ä¸€ï¼š1ã€æ‰“å¼€http://www.360doc.com/content/15/0410/21/22116372_462274865.shtml ï¼Œæˆ‘ä»¬å‘ç°ï¼Œåœ¨è½¬è½½ä¹‹å‰å†…å®¹æ— æ³•å¤åˆ¶ã€‚

2ã€Ctrl+Sï¼Œä¿å­˜ä¸ºç½‘é¡µä»…htmlã€‚
3ã€åŒå‡»æ‰“å¼€åˆšæ‰ä¿å­˜çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬å‘ç°ç½‘é¡µå†…å®¹å¯ä»¥å¤åˆ¶äº†ï¼

æ–¹æ³•äºŒï¼šæˆ‘ä»¬å‘ç°ï¼ŒåŒæ ·çš„æ–¹æ³•ï¼Œå¯¹èµ·ç‚¹è¿™ç§ç¥çº§ç½‘ç«™æ— æ•ˆï¼æ²¡å…³ç³»ï¼Œæˆ‘ä»¬è¿˜æœ‰è¿›é˜¶æ•™ç¨‹ï¼1ã€æ‰“å¼€http://read.qidian.com/BookReader/2502372,42712100.aspxï¼Œæ— æ³•å¤åˆ¶ã€‚
2ã€åŒæ ·çš„ï¼ŒCtrl+Sï¼Œä¿å­˜ä¸ºç½‘é¡µä»…htmlï¼ŒåŒå‡»æ‰“å¼€ä¿å­˜çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬å‘ç°è¿˜æ˜¯æ— æ³•å¤åˆ¶
3ã€é€‰æ‹©ä¿å­˜çš„æ–‡ä»¶ï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€
4ã€Ctrl+Fï¼Œæœç´¢å…³é”®è¯â€œå…¨å±é˜…è¯»â€ï¼ˆå…³é”®è¯ä¸å”¯ä¸€ï¼‰ï¼Œâ€œæŸ¥æ‰¾ä¸‹ä¸€ä¸ªâ€ï¼Œç›´åˆ°æ‰¾ä¸åˆ°é‚£ä¸ªå…³é”®å­—ï¼ˆç›®çš„æ˜¯ä¸ºäº†å®šä½åˆ°æ­£æ–‡éƒ¨åˆ†ï¼‰
5ã€ç‚¹å‡»â€œç¡®å®šâ€ï¼Œå…³é—­æŸ¥æ‰¾æ¡†ï¼Œæˆ‘ä»¬æŠŠâ€œå…¨å±é˜…è¯»â€é‚£ä¸€è¡Œå¾€ä¸Šçš„å†…å®¹å…¨éƒ¨åˆ é™¤
6ã€Ctrl+Sï¼Œä¿å­˜åå…³é—­è®°äº‹æœ¬ã€‚å†æ¬¡æ‰“å¼€ä¿å­˜çš„htmlæ–‡ä»¶ï¼Œå‘ç°å·²ç»å¯ä»¥å¤åˆ¶äº†
]]></content>
      <categories>
        <category>computer</category>
      </categories>
  </entry>
  <entry>
    <title>Windowså¿«æ·é”®</title>
    <url>/hobby-windows-shortcut-key/</url>
    <content><![CDATA[fç³»åˆ—F1 å¸®åŠ©F2 æ”¹åF3 æœç´¢F4 åœ°å€F5 åˆ·æ–°F6 åˆ‡æ¢F10 èœå•


ctrlç³»åˆ—ctrl+A å…¨é€‰ctrl+C å¤åˆ¶ctrl+X å‰ªåˆ‡ctrl+V ç²˜è´´ctrl+Z æ’¤æ¶ˆctrl+O æ‰“å¼€ctrl+P æ‰“å°ctrl+S ä¿å­˜ctrl+F4 å…³é—­tabé¡µctrl+esc å¼€å§‹èœå•Ctrl+1,2,3â€¦ã€€åˆ‡æ¢åˆ°ä»å·¦è¾¹æ•°èµ·ç¬¬1,2,3â€¦ä¸ªæ ‡ç­¾ 
shiftç³»åˆ—shift+delete æ°¸ä¹…åˆ é™¤shift+å³é”® å¯ä»¥é€‰æ‹©æ‰“å¼€powershell
altç³»åˆ—alt+F4 å…³é—­è½¯ä»¶alt+enter å±æ€§alt+tab åˆ‡æ¢çª—å£alt+ç©ºæ ¼ çª—å£èœå• 
winç³»åˆ—win å¼€å§‹èœå•win+F1 å¸®åŠ©win+D æ˜¾ç¤ºæ¡Œé¢win+R è¿è¡Œwin+E æ‰“å¼€æˆ‘çš„ç”µè„‘win+F æœç´¢æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹win+U æ‰“å¼€è®¾ç½®win+tab åˆ‡æ¢çª—å£win+P å¤šæ˜¾ç¤ºå™¨è®¾ç½®
ä¸‰é”®ç»„åˆç³»åˆ—ctrl+alt+delete åˆ‡æ¢ç”¨æˆ·ã€æ³¨é”€ã€æ›´æ”¹å¯†ç ã€ä»»åŠ¡ç®¡ç†å™¨ctrl+shift+esc ä»»åŠ¡ç®¡ç†å™¨win+shift+å·¦å³é”® ç§»åŠ¨çª—å£åˆ°å¦ä¸€ä¸ªå±å¹•
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Windowsè¿è¡Œå‘½ä»¤å¤§å…¨</title>
    <url>/hobby-windows-cmd-all/</url>
    <content><![CDATA[
gpedit.mscâ€”â€“ç»„ç­–ç•¥ 

sndrec32â€”â€”-å½•éŸ³æœº

Nslookupâ€”â€”-IPåœ°å€ä¾¦æµ‹å™¨

explorerâ€”â€”-æ‰“å¼€èµ„æºç®¡ç†å™¨

logoffâ€”â€”â€”æ³¨é”€å‘½ä»¤

tsshutdnâ€”â€”-60ç§’å€’è®¡æ—¶å…³æœºå‘½ä»¤

lusrmgr.mscâ€”-æœ¬æœºç”¨æˆ·å’Œç»„

services.mscâ€”æœ¬åœ°æœåŠ¡è®¾ç½®

oobe/msoobe /aâ€”-æ£€æŸ¥XPæ˜¯å¦æ¿€æ´»

notepadâ€”â€”â€“æ‰“å¼€è®°äº‹æœ¬

cleanmgrâ€”â€”-åƒåœ¾æ•´ç†

net start messengerâ€”-å¼€å§‹ä¿¡ä½¿æœåŠ¡

compmgmt.mscâ€”è®¡ç®—æœºç®¡ç†

net stop messengerâ€”â€“åœæ­¢ä¿¡ä½¿æœåŠ¡

confâ€”â€”â€”â€“å¯åŠ¨netmeeting

dvdplayâ€”â€”â€“DVDæ’­æ”¾å™¨

charmapâ€”â€”â€“å¯åŠ¨å­—ç¬¦æ˜ å°„è¡¨

diskmgmt.mscâ€”ç£ç›˜ç®¡ç†å®ç”¨ç¨‹åº

calcâ€”â€”â€”â€“å¯åŠ¨è®¡ç®—å™¨

dfrg.mscâ€”â€”-ç£ç›˜ç¢ç‰‡æ•´ç†ç¨‹åº

chkdsk.exeâ€”â€“Chkdskç£ç›˜æ£€æŸ¥

devmgmt.mscâ€” è®¾å¤‡ç®¡ç†å™¨

regsvr32 /u *.dllâ€”-åœæ­¢dllæ–‡ä»¶è¿è¡Œ

drwtsn32â€”â€” ç³»ç»ŸåŒ»ç”Ÿ

rononce -p â€”-15ç§’å…³æœº

dxdiagâ€”â€”â€”æ£€æŸ¥DirectXä¿¡æ¯

regedt32â€”â€”-æ³¨å†Œè¡¨ç¼–è¾‘å™¨

Msconfig.exeâ€”ç³»ç»Ÿé…ç½®å®ç”¨ç¨‹åº

rsop.mscâ€”â€”-ç»„ç­–ç•¥ç»“æœé›†

mem.exeâ€”â€”â€“æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µ

regedit.exeâ€”-æ³¨å†Œè¡¨

winchatâ€”â€”â€“XPè‡ªå¸¦å±€åŸŸç½‘èŠå¤©

progmanâ€”â€”â€“ç¨‹åºç®¡ç†å™¨

winmsdâ€”â€”â€”ç³»ç»Ÿä¿¡æ¯

perfmon.mscâ€”-è®¡ç®—æœºæ€§èƒ½ç›‘æµ‹ç¨‹åº

winverâ€”â€”â€”æ£€æŸ¥Windowsç‰ˆæœ¬ 

sfc /scannowâ€”â€“æ‰«æé”™è¯¯å¹¶å¤åŸ

taskmgrâ€”â€“ä»»åŠ¡ç®¡ç†å™¨ï¼ˆ2000ï¼xpï¼2003

winverâ€”â€”â€”æ£€æŸ¥Windowsç‰ˆæœ¬ 

wmimgmt.mscâ€”-æ‰“å¼€windowsç®¡ç†ä½“ç³»ç»“æ„(WMI) 

wupdmgrâ€”â€”â€“windowsæ›´æ–°ç¨‹åº 

wscriptâ€”â€”â€“windowsè„šæœ¬å®¿ä¸»è®¾ç½® 

writeâ€”â€”â€”-å†™å­—æ¿ 

winmsdâ€”â€”â€”ç³»ç»Ÿä¿¡æ¯ 

wiaacmgrâ€”â€”-æ‰«æä»ªå’Œç…§ç›¸æœºå‘å¯¼ 

winchatâ€”â€”â€“XPè‡ªå¸¦å±€åŸŸç½‘èŠå¤©

mem.exeâ€”â€”â€“æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µ 

Msconfig.exeâ€”ç³»ç»Ÿé…ç½®å®ç”¨ç¨‹åº 

mplayer2â€”â€”-ç®€æ˜“widnows media player 

mspaintâ€”â€”â€“ç”»å›¾æ¿ 

mstscâ€”â€”â€”-è¿œç¨‹æ¡Œé¢è¿æ¥ 

mplayer2â€”â€”-åª’ä½“æ’­æ”¾æœº 

magnifyâ€”â€”â€“æ”¾å¤§é•œå®ç”¨ç¨‹åº 

mmcâ€”â€”â€”â€”æ‰“å¼€æ§åˆ¶å° 

mobsyncâ€”â€”â€“åŒæ­¥å‘½ä»¤

dxdiagâ€”â€”â€”æ£€æŸ¥DirectXä¿¡æ¯ 

drwtsn32â€”â€” ç³»ç»ŸåŒ»ç”Ÿ 

devmgmt.mscâ€” è®¾å¤‡ç®¡ç†å™¨ 

dfrg.mscâ€”â€”-ç£ç›˜ç¢ç‰‡æ•´ç†ç¨‹åº 

diskmgmt.mscâ€”ç£ç›˜ç®¡ç†å®ç”¨ç¨‹åº 

dcomcnfgâ€”â€”-æ‰“å¼€ç³»ç»Ÿç»„ä»¶æœåŠ¡ 

ddeshareâ€”â€”-æ‰“å¼€DDEå…±äº«è®¾ç½® 

dvdplayâ€”â€”â€“DVDæ’­æ”¾å™¨

net stop messengerâ€”â€“åœæ­¢ä¿¡ä½¿æœåŠ¡ 

net start messengerâ€”-å¼€å§‹ä¿¡ä½¿æœåŠ¡ 

notepadâ€”â€”â€“æ‰“å¼€è®°äº‹æœ¬ 

nslookupâ€”â€”-ç½‘ç»œç®¡ç†çš„å·¥å…·å‘å¯¼ 

ntbackupâ€”â€”-ç³»ç»Ÿå¤‡ä»½å’Œè¿˜åŸ 

narratorâ€”â€”-å±å¹•â€œè®²è¿°äººâ€ 

ntmsmgr.mscâ€”-ç§»åŠ¨å­˜å‚¨ç®¡ç†å™¨ 

ntmsoprq.mscâ€”ç§»åŠ¨å­˜å‚¨ç®¡ç†å‘˜æ“ä½œè¯·æ±‚ 

netstat -anâ€”-(TC)å‘½ä»¤æ£€æŸ¥æ¥å£

syncappâ€”â€”â€“åˆ›å»ºä¸€ä¸ªå…¬æ–‡åŒ… 

syseditâ€”â€”â€“ç³»ç»Ÿé…ç½®ç¼–è¾‘å™¨ 

sigverifâ€”â€”-æ–‡ä»¶ç­¾åéªŒè¯ç¨‹åº 

sndrec32â€”â€”-å½•éŸ³æœº 

shrpubwâ€”â€”â€“åˆ›å»ºå…±äº«æ–‡ä»¶å¤¹ 

secpol.mscâ€”â€“æœ¬åœ°å®‰å…¨ç­–ç•¥ 

syskeyâ€”â€”â€”ç³»ç»ŸåŠ å¯†ï¼Œä¸€æ—¦åŠ å¯†å°±ä¸èƒ½è§£å¼€ï¼Œä¿æŠ¤windows xpç³»ç»Ÿçš„åŒé‡å¯†ç  

services.mscâ€”æœ¬åœ°æœåŠ¡è®¾ç½® 

Sndvol32â€”â€”-éŸ³é‡æ§åˆ¶ç¨‹åº 

sfc.exeâ€”â€”â€“ç³»ç»Ÿæ–‡ä»¶æ£€æŸ¥å™¨ 

sfc /scannowâ€”windowsæ–‡ä»¶ä¿æŠ¤

tsshutdnâ€”â€”-60ç§’å€’è®¡æ—¶å…³æœºå‘½ä»¤ 

tourstartâ€”â€”xpç®€ä»‹ï¼ˆå®‰è£…å®Œæˆåå‡ºç°çš„æ¼«æ¸¸xpç¨‹åºï¼‰ 

taskmgrâ€”â€”â€“ä»»åŠ¡ç®¡ç†å™¨

eventvwrâ€”â€”-äº‹ä»¶æŸ¥çœ‹å™¨ 

eudceditâ€”â€”-é€ å­—ç¨‹åº 

explorerâ€”â€”-æ‰“å¼€èµ„æºç®¡ç†å™¨

packagerâ€”â€”-å¯¹è±¡åŒ…è£…ç¨‹åº 

perfmon.mscâ€”-è®¡ç®—æœºæ€§èƒ½ç›‘æµ‹ç¨‹åº 

progmanâ€”â€”â€“ç¨‹åºç®¡ç†å™¨

regedit.exeâ€”-æ³¨å†Œè¡¨ 

rsop.mscâ€”â€”-ç»„ç­–ç•¥ç»“æœé›† 

regedt32â€”â€”-æ³¨å†Œè¡¨ç¼–è¾‘å™¨ 

rononce -p â€”-15ç§’å…³æœº 

regsvr32 /u *.dllâ€”-åœæ­¢dllæ–‡ä»¶è¿è¡Œ 

regsvr32 /u zipfldr.dllâ€”â€”å–æ¶ˆZIPæ”¯æŒ

cmd.exeâ€”â€”â€“CMDå‘½ä»¤æç¤ºç¬¦ 

chkdsk.exeâ€”â€“Chkdskç£ç›˜æ£€æŸ¥ 

certmgr.mscâ€”-è¯ä¹¦ç®¡ç†å®ç”¨ç¨‹åº 

calcâ€”â€”â€”â€“å¯åŠ¨è®¡ç®—å™¨ 

charmapâ€”â€”â€“å¯åŠ¨å­—ç¬¦æ˜ å°„è¡¨ 

cliconfgâ€”â€”-SQL SERVER å®¢æˆ·ç«¯ç½‘ç»œå®ç”¨ç¨‹åº 

Clipbrdâ€”â€”â€“å‰ªè´´æ¿æŸ¥çœ‹å™¨ 

confâ€”â€”â€”â€“å¯åŠ¨netmeeting 

compmgmt.mscâ€”è®¡ç®—æœºç®¡ç† 

cleanmgrâ€”â€”-åƒåœ¾æ•´ç† 

ciadv.mscâ€”â€”ç´¢å¼•æœåŠ¡ç¨‹åº

oskâ€”â€”â€”â€”æ‰“å¼€å±å¹•é”®ç›˜ 

odbcad32â€”â€”-ODBCæ•°æ®æºç®¡ç†å™¨ 

oobe/msoobe /aâ€”-æ£€æŸ¥XPæ˜¯å¦æ¿€æ´» 

lusrmgr.mscâ€”-æœ¬æœºç”¨æˆ·å’Œç»„ 

logoffâ€”â€”â€”æ³¨é”€å‘½ä»¤

iexpressâ€”â€”-æœ¨é©¬æ†ç»‘å·¥å…·ï¼Œç³»ç»Ÿè‡ªå¸¦

Nslookupâ€”â€”-IPåœ°å€ä¾¦æµ‹å™¨

fsmgmt.mscâ€”â€“å…±äº«æ–‡ä»¶å¤¹ç®¡ç†å™¨

utilmanâ€”â€”â€“è¾…åŠ©å·¥å…·ç®¡ç†å™¨

gpedit.mscâ€”â€“ç»„ç­–ç•¥


]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Dellçš„BIOSè®¾ç½®</title>
    <url>/hobby-dell-bois-setting/</url>
    <content><![CDATA[å¯¹äºæˆ´å°”é¢„è£…äº† Microsoft Windows 8 çš„ç¬”è®°æœ¬ç”µè„‘ï¼ŒBIOS ä¸­çš„ Boot ï¼ˆå¯åŠ¨ï¼‰é€‰é¡¹ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹çš„è®¾ç½®ä¸º



é€‰é¡¹
å€¼



Secure Boot
[Enabled]


Load Legacy Option Rom
[Disabled]


Boot List Option
[UEFI]


å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š









åœ¨è¿™ç§è®¾ç½®ä¸‹ï¼Œå¦‚æœä½¿ç”¨è€…å¸Œæœ›ä»å…‰é©±æˆ–å…¶å®ƒUSBè®¾å¤‡å¯åŠ¨ï¼Œæœ‰æ—¶å€™ä¼šå‘ç”Ÿæ— æ³•å¼•å¯¼çš„æƒ…å†µã€‚æ­¤æ—¶ï¼Œéœ€è¦å¯¹ BIOS çš„é€‰é¡¹åšå¦‚ä¸‹ä¿®æ”¹ã€‚



é€‰é¡¹
å€¼



Secure Boot
[Disabled]


Load Legacy Option Rom
[Enabled]


Boot List Option
[Legacy]


ä¿®æ”¹åï¼Œèƒ½çœ‹åˆ° Boot é€‰é¡¹ä¸­åˆ—å‡ºäº† USB å­˜å‚¨ä¸å…‰é©±ç­‰è®¾å¤‡ã€‚
BIOS ä¿®æ”¹å¥½åä¿å­˜é€€å‡ºï¼Œé‡å¯ç”µè„‘çš„æ—¶å€™æŒ‰é”®ç›˜çš„ F12ï¼Œé‡æ–°è¿›å…¥å¼•å¯¼èœå•ï¼Œæ­¤æ—¶å°±èƒ½å¤Ÿä»è¿æ¥çš„ USB è®¾å¤‡æˆ–å…‰é©±è¿›è¡Œå¼•å¯¼ã€‚å¦å¤–è¯·æ³¨æ„ï¼šå¯¹äºæ”¯æŒ UEFI å¯åŠ¨çš„æœºå‹ï¼Œå¦‚æœå¼€æœºæ— æ³•è¿›å…¥ç³»ç»Ÿï¼Œæç¤º â€œinternal hard disk drive not foundâ€ é”™è¯¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚
è¯·è¿›å…¥ BIOSÂ æ£€æŸ¥ç¡¬ç›˜åœ¨ BIOSÂ ä¸­æ˜¯å¦èƒ½å¤Ÿè¢«æ­£å¸¸è¯†åˆ«ã€‚å¦‚æœå¯ä»¥ï¼Œè¿›å…¥ BootÂ é¡µé¢ï¼ŒåŠ¡å¿…å°†Â Secure BootÂ æ”¹ä¸º[Disable]ã€‚æ­¤æƒ…å†µç»å¸¸å‘ç”Ÿåœ¨ç”¨æˆ·åˆ é™¤äº†åŸå‚é¢„è£…çš„ Windows 8 å¹¶è£…ä¸º Windows 7Â æˆ–å…¶å®ƒç³»ç»Ÿä¹‹åã€‚å› ä¸ºé Windows 8 æ“ä½œç³»ç»Ÿï¼Œä¸èƒ½æ”¯æŒ Secure Bootã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOSçš„ä¸€äº›å°æŠ€å·§</title>
    <url>/dev-centos-skill/</url>
    <content><![CDATA[å®‰è£…ä¸­æ–‡è¾“å…¥æ³•1ã€å®‰è£…ä¸­æ–‡æ”¯æŒåŒ…yum install &quot;@Chinese Support&quot;
2ã€å›åˆ°æ¡Œé¢ï¼Œsystem-&gt;preferences-&gt;input method
3ã€å¦‚æœæ²¡æœ‰ï¼Œå…ˆæ³¨é”€ä¸€ä¸‹ã€‚


4ã€åˆ°é‡Œé¢addè¾“å…¥æ³•åˆ°åˆ—è¡¨é‡Œã€‚
5ã€æœ€åå†æ³¨é”€ã€ç™»å½•ã€‚
åœ¨centOS 6.4ä¸‹é¢æµ‹è¯•æ— è¯¯ã€‚
æŒ‚è½½NTFSæœ‰æ—¶å€™åšå¤§æ•°æ®é‡è¿ç§»æ—¶ï¼Œä¸ºäº†å¿«é€Ÿè¿ç§»å¤§æ•°æ®ï¼Œæœ‰å¯èƒ½åœ¨LinuxæœåŠ¡å™¨ä¸Šä¸´æ—¶æŒ‚è½½NTFSæ ¼å¼çš„ç§»åŠ¨ç¡¬ç›˜ï¼Œ ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒLinuxæ˜¯è¯†åˆ«ä¸äº†NTFSæ ¼å¼ç§»åŠ¨ç¡¬ç›˜çš„ï¼ˆéœ€è¦é‡ç¼–è¯‘Linuxæ ¸å¿ƒæ‰èƒ½ï¼ŒåŠ æŒ‚NTFSåˆ†åŒºï¼‰ï¼Œè¿™æ—¶å€™ä¸ºäº†èƒ½è®©LinuxæœåŠ¡å™¨èƒ½å¤Ÿè¯†åˆ«NTFSçš„ç§»åŠ¨ç¡¬ç›˜ï¼Œå°±å¿…é¡»å®‰è£…ntfs-3gï¼ˆThird Generation Read/Write NTFS Driverï¼‰çš„åŒ…ã€‚
å®˜æ–¹ç½‘å€ï¼šhttp://www.tuxera.com/æ–‡æ¡£æ‰‹å†Œï¼šhttp://www.tuxera.com/community/ntfs-3g-manual/ä¸‹è½½åœ°å€ï¼šhttp://www.tuxera.com/community/ntfs-3g-download/
1ã€è§£å‹å®‰è£…NTFS-3Gã€‚
tar -xvzf ntfs-3g_ntfsprogs-2012.1.15.tgzcd ntfs-3g_ntfsprogs-2012.1.15./configureÂ makeÂ make installÂ 

ä¹‹åç³»ç»Ÿä¼šæç¤ºå®‰è£…æˆåŠŸï¼Œä¸‹é¢å°±å¯ä»¥ç”¨ntfs-3gæ¥å®ç°å¯¹NTFSåˆ†åŒºçš„è¯»å†™äº†
2ã€é…ç½®æŒ‚è½½NTFSæ ¼å¼çš„ç§»åŠ¨ç¡¬ç›˜ï¼ˆ1ï¼‰é¦–å…ˆå¾—åˆ°NTFSåˆ†åŒºçš„ä¿¡æ¯Â sudo fdisk -l | grep NTFS
ï¼ˆ2ï¼‰è®¾ç½®æŒ‚è½½ç‚¹ï¼Œç”¨å¦‚ä¸‹å‘½ä»¤å®ç°æŒ‚è½½Â mount -t ntfs-3g &lt;NTFS Partition&gt; &lt;Mount Point&gt;
ä¾‹å¦‚å¾—åˆ°çš„NTFSåˆ†åŒºä¿¡æ¯ä¸º/dev/sdc1ï¼ŒæŒ‚è½½ç‚¹è®¾ç½®åœ¨/mnt/usbä¸‹ï¼Œå¯ä»¥ç”¨Â mount -t ntfs-3g /dev/sdc1 /mnt/usbæˆ–è€…ç›´æ¥ç”¨Â ntfs-3g ntfs-3g /dev/sdc1 /mnt/usbÂ 
3ã€å¦‚æœæƒ³å®ç°å¼€æœºè‡ªåŠ¨æŒ‚è½½ï¼Œå¯ä»¥åœ¨/etc/fstabé‡Œé¢æ·»åŠ å¦‚ä¸‹æ ¼å¼è¯­å¥
&lt;NTFS Partition&gt; &lt;Mount Point&gt; ntfs-3g silent,umask=0,locale=zh_CN.utf8 0 0Â 

è¿™æ ·å¯ä»¥å®ç°NTFSåˆ†åŒºé‡Œä¸­æ–‡æ–‡ä»¶åçš„æ˜¾ç¤ºã€‚Â 
4ã€å¸è½½åˆ†åŒºå¯ä»¥ç”¨umountå®ç°umount &lt;NTFS Partition&gt;æˆ–è€… ã€€ã€€umount &lt;Mount Point&gt;
Uç›˜å®‰è£…ç³»ç»Ÿæœ€è¿‘è¦ç»™æœåŠ¡å™¨é‡è£…ç³»ç»Ÿï¼Œç”±äºä½¿ç”¨dvdå®‰è£…åˆ»ç›˜æ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥å†³å®šé‡‡ç”¨Uç›˜å®‰è£…ï¼ŒUç›˜ä¸‹å®‰è£…CentOS/Red Hatæ¯”è¾ƒéº»çƒ¦ï¼Œç›¸å¯¹äºUbuntuæ¥è¯´è¦éº»çƒ¦å¾ˆå¤šï¼ˆUbuntuåªéœ€è¦ä½¿ç”¨Universal USB Installerå³å¯ï¼Œéå¸¸ç®€å•ï¼‰ï¼Œæ­¤æ–¹æ³•ç»è¿‡æœ¬äººäº²æµ‹ï¼ŒçœŸå®æœ‰æ•ˆã€‚
è¿™é‡Œé€‰æ‹©åœ¨windowsä¸‹ä½¿ç”¨UltraISOè¿›è¡Œå®‰è£…ï¼Œå»ºè®®ä½¿ç”¨bin DVDç‰ˆçš„CentOSï¼Œä¸ç”¨liveç‰ˆæœ¬çš„ï¼ŒåŒæ—¶æˆ‘ä»¬éœ€è¦ä¸€ä¸ª8GBåŠä»¥ä¸Šå®¹é‡çš„Uç›˜ï¼Œå› ä¸ºå®Œæ•´ç‰ˆçš„å®‰è£…åŒ…éœ€è¦4Gï¼ŒåŠ ä¸Šå¯åŠ¨å¼•å¯¼éƒ¨åˆ†ï¼Œ4Gçš„Uç›˜æ˜¯ä¸å¤Ÿçš„ã€‚è¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹åŸç†ï¼Œé¦–å…ˆä½¿ç”¨UltraISOå°†DVDç‰ˆçš„isoé•œåƒå†™å…¥Uç›˜æ¥åˆ¶ä½œå¯åŠ¨ç›˜ï¼Œç„¶åå°†å®Œæ•´çš„CentOSçš„DVDç‰ˆå®‰è£…isoå¤åˆ¶åˆ°Uç›˜æ ¹ç›®å½•ï¼Œå¾…å®‰è£…ç¨‹åºå¯åŠ¨ä¹‹åæœ‰ä¸€æ­¥ä¼šæç¤ºå¯»æ‰¾å®‰è£…é•œåƒï¼Œé€‰æ‹©Uç›˜å¯¹åº”çš„ç›®å½•å°±èƒ½æ‰¾åˆ°ã€‚
å…·ä½“æ­¥éª¤ï¼š1ã€ä¸‹è½½UltraISOï¼Œé€‰æ‹©â€œæ–‡ä»¶â€-&gt;â€œæ‰“å¼€â€ï¼Œæ‰¾åˆ°CentOSå®‰è£…æ–‡ä»¶ï¼Œæˆ‘çš„ä¸ºCentOS-6.3-x86_64-bin-DVD1.isoï¼ˆisoæ ¼å¼çš„ï¼‰
2ã€é€‰æ‹©â€œå¯åŠ¨â€-&gt;â€œå†™å…¥ç¡¬ç›˜æ˜ åƒâ€¦â€ï¼Œâ€œç¡¬ç›˜é©±åŠ¨å™¨â€é€‰æ‹©è¦å®‰è£…çš„Uç›˜ï¼Œâ€œå†™å…¥æ–¹å¼â€é€‰æ‹©â€œUSB-HDD+â€ï¼Œåœ¨è¿™ä¹‹å‰æœ€å¥½å°†Uç›˜æ ¼å¼åŒ–ï¼Œé»˜è®¤çš„ä¸ºFAT32ï¼Œæœ€åé€‰æ‹©â€œå†™å…¥â€ï¼Œå†é€‰æ‹©â€œæ˜¯â€å³å¯ï¼Œå…·ä½“è¿‡ç¨‹è§ä¸‹å›¾ã€‚
3ã€åœ¨Uç›˜å†™å…¥å®Œæ¯•ä¹‹åï¼Œæ‰“å¼€Uç›˜ï¼Œå°†Packagesç›®å½•å…¨éƒ¨åˆ é™¤ï¼Œå…¶å®é‚£4Gçš„å®‰è£…é•œåƒå¤§éƒ¨åˆ†éƒ½æ˜¯ç›¸å…³ç³»ç»Ÿè½¯ä»¶ä»¥åŠæœåŠ¡çš„å®‰è£…åŒ…ï¼Œè¿™é‡Œæˆ‘ä»¬åªæ˜¯åˆ¶ä½œUç›˜å¼•å¯¼ç³»ç»Ÿå®‰è£…ï¼Œæ‰€ä»¥Packagesç›®å½•ä¸éœ€è¦ï¼Œåˆ é™¤ä¹‹åå†å°†CentOS-6.3-x86_64-bin-DVD1.isoå¤åˆ¶åˆ°Uç›˜çš„æ ¹ç›®å½•å³å¯ã€‚
å°†Uç›˜æ’ä¸Šç”µè„‘é€‰æ‹©Uç›˜å¯åŠ¨ä¹‹åå°±å¯ä»¥å‚è€ƒç½‘ä¸Šå¤§é‡çš„å®‰è£…æ­¥éª¤ï¼Œä¸è¿‡è¿™é‡Œæœ‰ä¸€ç‚¹è¦æ³¨æ„çš„æ˜¯ï¼šä»Uç›˜å¯åŠ¨ä¹‹åUç›˜è¢«ç³»ç»Ÿè¯†åˆ«ä¸º/dev/sdaï¼Œè€Œç”µè„‘çš„SATAç¡¬ç›˜è¢«è¯†åˆ«ä¸º/dev/sdbã€‚å› æ­¤åˆ°äº†æœ‰ä¸€æ­¥è®©ä½ é€‰æ‹©å®‰è£…é•œåƒ(install image)çš„æ—¶å€™è¯·é€‰æ‹©sdaï¼ˆå³Uç›˜ï¼‰ï¼Œåé¢è¦æ±‚é€‰æ‹©å®‰è£…å¼•å¯¼ç¨‹åºçš„æ—¶å€™è¯·å®‰è£…åœ¨SATAç¡¬ç›˜å¯¹åº”çš„è®¾å¤‡åç§°ä¸Šï¼Œå¦åˆ™å¦‚æœé€‰æ‹©å®‰è£…åœ¨Uç›˜ä¸Šäº†ä¹‹åæ‹”æ‰Uç›˜å°±ä¸èƒ½å¯åŠ¨ç³»ç»Ÿäº†ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>centos</tag>
      </tags>
  </entry>
  <entry>
    <title>ipvså…¥é—¨ç¯‡</title>
    <url>/dev-ipvs-start/</url>
    <content><![CDATA[ipvsç®€ä»‹
Linux Virtual Server (LVS) is load balancing software for Linux kernelâ€“based operating systems.


LVS is a free and open-source project started by Wensong Zhang in May 1998, subject to the requirements of the GNU General Public License (GPL), version 2. The mission of the project is to build a high-performance and highly available server for Linux using clustering technology, which provides good scalability, reliability and serviceability.


The major work of the LVS project is now to develop advanced IP load balancing software (IPVS), application-level load balancing software (KTCPVS), and cluster management components.


IPVS (IP Virtual Server) implements transport-layer load balancing, usually called Layer 4 LAN switching, as part of the Linux kernel. Itâ€™s configured via the user-space utility ipvsadm(8) tool.


IPVS is incorporated into the Linux Virtual Server (LVS), where it runs on a host and acts as a load balancer in front of a cluster of real servers. IPVS can direct requests for TCP- and UDP-based services to the real servers, and make services of the real servers appear as virtual services on a single IP address. IPVS is built on top of the Netfilter.

ç®€è€Œè¨€ä¹‹ï¼Œlvsæ˜¯ä¸€ä¸ªå››å±‚è´Ÿè½½å‡è¡¡è½¯ä»¶ï¼ˆé¡¹ç›®ï¼‰ï¼Œipvsæ˜¯lvsçš„ä¸€éƒ¨åˆ†ã€‚ipvså†…ç½®åœ¨linuxå†…æ ¸ç©ºé—´ä¸­ï¼Œåœ¨ç”¨æˆ·ç©ºé—´ä½¿ç”¨ipvsadmå¯¹ipvsè¿›è¡Œç®¡ç†ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Wikipedia - Linux Virtual Server
Wikipedia - IP Virtual Server
The Linux Virtual Server Project



ipvså·¥ä½œåŸç†å‚è€ƒæ–‡æ¡£ï¼š

LVSåŸç†è¯¦è§£
LVSåŸç†è¯¦è§£ä»¥åŠéƒ¨ç½²
IPVSä»å…¥é—¨åˆ°ç²¾é€škube-proxyå®ç°åŸç†
ä»€ä¹ˆæ˜¯éš§é“ï¼Ÿ| ç½‘ç»œä¸­çš„éš§é“
IPVSåœ¨k8sä¸­çš„ä½¿ç”¨

ipvsæœ¯è¯­
DSï¼šDirector Serverã€‚æŒ‡çš„æ˜¯å‰ç«¯è´Ÿè½½å‡è¡¡å™¨èŠ‚ç‚¹ã€‚
RSï¼šReal Serverã€‚åç«¯çœŸå®çš„å·¥ä½œæœåŠ¡å™¨ã€‚
VIPï¼šVirtual IPï¼Œå‘å¤–éƒ¨ç›´æ¥é¢å‘ç”¨æˆ·è¯·æ±‚ï¼Œä½œä¸ºç”¨æˆ·è¯·æ±‚çš„ç›®æ ‡çš„IPåœ°å€ã€‚
DIPï¼šDirector Server IPï¼Œä¸»è¦ç”¨äºå’Œå†…éƒ¨ä¸»æœºé€šè®¯çš„IPåœ°å€ã€‚
RIPï¼šReal Server IPï¼Œåç«¯æœåŠ¡å™¨çš„IPåœ°å€ã€‚
CIPï¼šClient IPï¼Œè®¿é—®å®¢æˆ·ç«¯çš„IPåœ°å€ã€‚

ipvsåŸºæœ¬åŸç†1ã€å½“ç”¨æˆ·å‘è´Ÿè½½å‡è¡¡è°ƒåº¦å™¨ï¼ˆDirector Serverï¼‰å‘èµ·è¯·æ±‚ï¼Œè°ƒåº¦å™¨å°†è¯·æ±‚å‘å¾€è‡³å†…æ ¸ç©ºé—´ã€‚2ã€PREROUTINGé“¾é¦–å…ˆä¼šæ¥æ”¶åˆ°ç”¨æˆ·è¯·æ±‚ï¼Œåˆ¤æ–­ç›®æ ‡IPç¡®å®šæ˜¯æœ¬æœºIPï¼Œå°†æ•°æ®åŒ…å‘å¾€INPUTé“¾ã€‚3ã€IPVSæ˜¯å·¥ä½œåœ¨INPUTé“¾ä¸Šçš„ï¼Œå½“ç”¨æˆ·è¯·æ±‚åˆ°è¾¾INPUTæ—¶ï¼ŒIPVSä¼šå°†ç”¨æˆ·è¯·æ±‚å’Œè‡ªå·±å·²å®šä¹‰å¥½çš„é›†ç¾¤æœåŠ¡è¿›è¡Œæ¯”å¯¹ï¼Œå¦‚æœç”¨æˆ·è¯·æ±‚çš„å°±æ˜¯å®šä¹‰çš„é›†ç¾¤æœåŠ¡ï¼Œé‚£ä¹ˆæ­¤æ—¶IPVSä¼šå¼ºè¡Œä¿®æ”¹æ•°æ®åŒ…é‡Œçš„ç›®æ ‡IPåœ°å€åŠç«¯å£ï¼Œå¹¶å°†æ–°çš„æ•°æ®åŒ…å‘å¾€POSTROUTINGé“¾ã€‚4ã€POSTROUTINGé“¾æ¥æ”¶æ•°æ®åŒ…åå‘ç°ç›®æ ‡IPåœ°å€åˆšå¥½æ˜¯è‡ªå·±çš„åç«¯æœåŠ¡å™¨ï¼Œé‚£ä¹ˆæ­¤æ—¶é€šè¿‡é€‰è·¯ï¼Œå°†æ•°æ®åŒ…æœ€ç»ˆå‘é€ç»™åç«¯çš„æœåŠ¡å™¨ã€‚
ipvså·¥ä½œæ¨¡å¼
natæ¨¡å¼ï¼šé€šè¿‡ç½‘ç»œåœ°å€è½¬æ¢ï¼Œè°ƒåº¦å™¨é‡å†™è¯·æ±‚æŠ¥æ–‡çš„ç›®æ ‡åœ°å€ï¼Œæ ¹æ®é¢„è®¾çš„è°ƒåº¦ç®—æ³•ï¼Œå°†è¯·æ±‚åˆ†æ´¾ç»™åç«¯çš„çœŸå®æœåŠ¡å™¨ï¼›çœŸå®æœåŠ¡å™¨çš„å“åº”æŠ¥æ–‡é€šè¿‡è°ƒåº¦å™¨æ—¶ï¼ŒæŠ¥æ–‡çš„æºåœ°å€è¢«é‡å†™ï¼Œå†è¿”å›ç»™å®¢æˆ·ï¼Œå®Œæˆæ•´ä¸ªè´Ÿè½½è°ƒåº¦è¿‡ç¨‹ã€‚
tunnelæ¨¡å¼ï¼šæ”¹å†™è¯·æ±‚çš„IPåœ°å€ï¼Œå°†è¯·æ±‚å’Œå“åº”åˆ†å¼€å¤„ç†ï¼Œå³åœ¨è´Ÿè½½è°ƒåº¦å™¨ä¸­åªè´Ÿè´£è°ƒåº¦è¯·æ±‚è€Œå“åº”ç›´æ¥è¿”å›ç»™å®¢æˆ·ï¼Œå°†æå¤§åœ°æé«˜æ•´ä¸ªé›†ç¾¤ç³»ç»Ÿçš„ååé‡ã€‚
dræ¨¡å¼ï¼šæ”¹å†™è¯·æ±‚æŠ¥æ–‡çš„MACåœ°å€ï¼Œå°†è¯·æ±‚å‘é€åˆ°çœŸå®æœåŠ¡å™¨ï¼Œè€ŒçœŸå®æœåŠ¡å™¨å°†å“åº”ç›´æ¥è¿”å›ç»™å®¢æˆ·ã€‚è¿™ç§æ–¹æ³•æ²¡æœ‰IPéš§é“çš„å¼€é”€ï¼Œå¯¹é›†ç¾¤ä¸­çš„çœŸå®æœåŠ¡å™¨ä¹Ÿæ²¡æœ‰å¿…é¡»æ”¯æŒIPéš§é“åè®®çš„è¦æ±‚ï¼Œä½†æ˜¯è¦æ±‚è°ƒåº¦å™¨ä¸çœŸå®æœåŠ¡å™¨éƒ½æœ‰ä¸€å—ç½‘å¡è¿åœ¨åŒä¸€ç‰©ç†ç½‘æ®µä¸Šã€‚

ipvsè°ƒåº¦ç®—æ³•å›ºå®šè°ƒåº¦ç®—æ³•ï¼šå³è°ƒåº¦å™¨ä¸ä¼šå»åˆ¤æ–­åç«¯æœåŠ¡å™¨çš„ç¹å¿™ä¸å¦ï¼Œä¸€å¦‚æ—¢å¾€å¾—å°†è¯·æ±‚æ´¾å‘ä¸‹å»ã€‚å…·ä½“åŒ…æ‹¬rrã€wrrã€dhã€shåŠ¨æ€è°ƒåº¦ç®—æ³•ï¼šè°ƒåº¦å™¨ä¼šå»åˆ¤æ–­åç«¯æœåŠ¡å™¨çš„ç¹å¿™ç¨‹åº¦ï¼Œç„¶åä¾æ®è°ƒåº¦ç®—æ³•åŠ¨æ€å¾—æ´¾å‘è¯·æ±‚ã€‚å…·ä½“åŒ…æ‹¬wlcã€lcã€lblcã€lblcr
rrrrï¼šè½®è¯¢ï¼ˆround robinï¼‰è¿™ç§ç®—æ³•æ˜¯æœ€ç®€å•çš„ï¼Œå°±æ˜¯æŒ‰ä¾æ¬¡å¾ªç¯çš„æ–¹å¼å°†è¯·æ±‚è°ƒåº¦åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œè¯¥ç®—æ³•æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯ç®€å•ã€‚è½®è¯¢ç®—æ³•å‡è®¾æ‰€æœ‰çš„æœåŠ¡å™¨å¤„ç†è¯·æ±‚çš„èƒ½åŠ›éƒ½æ˜¯ä¸€æ ·çš„ï¼Œè°ƒåº¦å™¨ä¼šå°†æ‰€æœ‰çš„è¯·æ±‚å¹³å‡åˆ†é…ç»™æ¯ä¸ªçœŸå®æœåŠ¡å™¨ï¼Œä¸ç®¡åç«¯ RS é…ç½®å’Œå¤„ç†èƒ½åŠ›ï¼Œéå¸¸å‡è¡¡åœ°åˆ†å‘ä¸‹å»ã€‚è¿™ä¸ªè°ƒåº¦çš„ç¼ºç‚¹æ˜¯ï¼Œä¸ç®¡åç«¯æœåŠ¡å™¨çš„ç¹å¿™ç¨‹åº¦æ˜¯æ€æ ·çš„ï¼Œè°ƒåº¦å™¨éƒ½ä¼šè®²è¯·æ±‚ä¾æ¬¡å‘ä¸‹å»ã€‚å¦‚æœAæœåŠ¡å™¨ä¸Šçš„è¯·æ±‚å¾ˆå¿«è¯·æ±‚å®Œäº†ï¼Œè€ŒBæœåŠ¡å™¨çš„è¯·æ±‚ä¸€ç›´æŒç»­ç€ï¼Œå°†ä¼šå¯¼è‡´BæœåŠ¡å™¨ä¸€ç›´å¾ˆå¿™ï¼Œè€ŒAå¾ˆé—²ï¼Œè¿™æ ·ä¾¿æ²¡èµ·åˆ°å‡è¡¡çš„å·¦å³ã€‚
wrrwrrï¼šåŠ æƒè½®è¯¢ï¼ˆweight round robinï¼‰è¿™ç§ç®—æ³•æ¯” rr çš„ç®—æ³•å¤šäº†ä¸€ä¸ªæƒé‡çš„æ¦‚å¿µï¼Œå¯ä»¥ç»™ RS è®¾ç½®æƒé‡ï¼Œæƒé‡è¶Šé«˜ï¼Œé‚£ä¹ˆåˆ†å‘çš„è¯·æ±‚æ•°è¶Šå¤šï¼Œæƒé‡çš„å–å€¼èŒƒå›´ 0 â€“ 100ã€‚ä¸»è¦æ˜¯å¯¹rrç®—æ³•çš„ä¸€ç§ä¼˜åŒ–å’Œè¡¥å……ï¼Œ LVS ä¼šè€ƒè™‘æ¯å°æœåŠ¡å™¨çš„æ€§èƒ½ï¼Œå¹¶ç»™æ¯å°æœåŠ¡å™¨æ·»åŠ è¦ç»™æƒå€¼ï¼Œå¦‚æœæœåŠ¡å™¨Açš„æƒå€¼ä¸º1ï¼ŒæœåŠ¡å™¨Bçš„æƒå€¼ä¸º2ï¼Œåˆ™è°ƒåº¦åˆ°æœåŠ¡å™¨Bçš„è¯·æ±‚ä¼šæ˜¯æœåŠ¡å™¨Açš„2å€ã€‚æƒå€¼è¶Šé«˜çš„æœåŠ¡å™¨ï¼Œå¤„ç†çš„è¯·æ±‚è¶Šå¤šã€‚
dhdhï¼šç›®æ ‡åœ°å€æ•£åˆ—è°ƒåº¦ç®—æ³• ï¼ˆdestination hashï¼‰ç®€å•çš„è¯´ï¼Œå³å°†åŒä¸€ç±»å‹çš„è¯·æ±‚åˆ†é…ç»™åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œä¾‹å¦‚å°†ä»¥ .jgpã€.pngç­‰ç»“å°¾çš„è¯·æ±‚è½¬å‘åˆ°åŒä¸€ä¸ªèŠ‚ç‚¹ã€‚è¿™ç§ç®—æ³•å…¶å®ä¸æ˜¯ä¸ºäº†çœŸæ­£æ„ä¹‰çš„è´Ÿè½½å‡è¡¡ï¼Œè€Œæ˜¯ä¸ºäº†èµ„æºçš„åˆ†ç±»ç®¡ç†ã€‚è¿™ç§è°ƒåº¦ç®—æ³•ä¸»è¦åº”ç”¨åœ¨ä½¿ç”¨äº†ç¼“å­˜èŠ‚ç‚¹çš„ç³»ç»Ÿä¸­ï¼Œæé«˜ç¼“å­˜çš„å‘½ä¸­ç‡ã€‚
shshï¼šæºåœ°å€æ•£åˆ—è°ƒåº¦ç®—æ³•ï¼ˆsource hashï¼‰å³å°†æ¥è‡ªåŒä¸€ä¸ªipçš„è¯·æ±‚å‘ç»™åç«¯çš„åŒä¸€ä¸ªæœåŠ¡å™¨ï¼Œå¦‚æœåç«¯æœåŠ¡å™¨å·¥ä½œæ­£å¸¸æ²¡æœ‰è¶…è´Ÿè·çš„è¯ã€‚è¿™å¯ä»¥è§£å†³sessionå…±äº«çš„é—®é¢˜ï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œå¾ˆå¤šä¼ä¸šã€ç¤¾åŒºã€å­¦æ ¡éƒ½æ˜¯å…±ç”¨çš„ä¸€ä¸ªIPï¼Œè¿™å°†å¯¼è‡´è¯·æ±‚åˆ†é…çš„ä¸å‡è¡¡ã€‚
lclcï¼šæœ€å°‘è¿æ¥æ•°ï¼ˆleast-connectionï¼‰è¿™ä¸ªç®—æ³•ä¼šæ ¹æ®åç«¯ RS çš„è¿æ¥æ•°æ¥å†³å®šæŠŠè¯·æ±‚åˆ†å‘ç»™è°ï¼Œæ¯”å¦‚ RS1 è¿æ¥æ•°æ¯” RS2 è¿æ¥æ•°å°‘ï¼Œé‚£ä¹ˆè¯·æ±‚å°±ä¼˜å…ˆå‘ç»™ RS1ã€‚è¿™é‡Œé—®é¢˜æ˜¯æ— æ³•åšåˆ°ä¼šè¯ä¿æŒï¼Œå³sessionå…±äº«ã€‚
wlcwlcï¼šåŠ æƒæœ€å°‘è¿æ¥æ•°ï¼ˆweight least-connectionï¼‰è¿™ä¸ªæ¯”æœ€å°‘è¿æ¥æ•°å¤šäº†ä¸€ä¸ªåŠ æƒçš„æ¦‚å¿µï¼Œå³åœ¨æœ€å°‘è¿æ¥æ•°çš„åŸºç¡€ä¸ŠåŠ ä¸€ä¸ªæƒé‡å€¼ï¼Œå½“è¿æ¥æ•°ç›¸è¿‘ï¼Œæƒé‡å€¼è¶Šå¤§ï¼Œè¶Šä¼˜å…ˆè¢«åˆ†æ´¾è¯·æ±‚ã€‚
lblclblcï¼šåŸºäºå±€éƒ¨æ€§çš„æœ€å°‘è¿æ¥è°ƒåº¦ç®—æ³•ï¼ˆlocality-based least-connectionï¼‰å°†æ¥è‡ªåŒä¸€ç›®çš„åœ°å€çš„è¯·æ±‚åˆ†é…ç»™åŒä¸€å°RSå¦‚æœè¿™å°æœåŠ¡å™¨å°šæœªæ»¡è´Ÿè·ï¼Œå¦åˆ™åˆ†é…ç»™è¿æ¥æ•°æœ€å°çš„RSï¼Œå¹¶ä»¥å®ƒä¸ºä¸‹ä¸€æ¬¡åˆ†é…çš„é¦–å…ˆè€ƒè™‘ã€‚
lblcrlblcrï¼šåŸºäºåœ°å€çš„å¸¦é‡å¤æœ€å°è¿æ¥æ•°è°ƒåº¦ (Locality-Based Least-Connection with Replication)
å®‰è£…ipvsadmubuntuapt-get install ipvsadm

centosyum install ipvsadm#systemctl start ipvsadm#systemctl enable ipvsadm

ä½¿ç”¨ipvsadmipvsadmå‘½ä»¤å¸®åŠ©ipvsadm v1.27 2008/5/15 (compiled with popt and IPVS v1.2.1)Usage:  ipvsadm -A|E -t|u|f service-address [-s scheduler] [-p [timeout]] [-M netmask] [--pe persistence_engine] [-b sched-flags]  ipvsadm -D -t|u|f service-address  ipvsadm -C  ipvsadm -R  ipvsadm -S [-n]  ipvsadm -a|e -t|u|f service-address -r server-address [options]  ipvsadm -d -t|u|f service-address -r server-address  ipvsadm -L|l [options]  ipvsadm -Z [-t|u|f service-address]  ipvsadm --set tcp tcpfin udp  ipvsadm --start-daemon state [--mcast-interface interface] [--syncid sid]  ipvsadm --stop-daemon state  ipvsadm -hCommands:Either long or short options are allowed.  --add-service     -A        add virtual service with options  --edit-service    -E        edit virtual service with options  --delete-service  -D        delete virtual service  --clear           -C        clear the whole table  --restore         -R        restore rules from stdin  --save            -S        save rules to stdout  --add-server      -a        add real server with options  --edit-server     -e        edit real server with options  --delete-server   -d        delete real server  --list            -L|-l     list the table  --zero            -Z        zero counters in a service or all services  --set tcp tcpfin udp        set connection timeout values  --start-daemon              start connection sync daemon  --stop-daemon               stop connection sync daemon  --help            -h        display this help messageOptions:  --tcp-service  -t service-address   service-address is host[:port]  --udp-service  -u service-address   service-address is host[:port]  --fwmark-service  -f fwmark         fwmark is an integer greater than zero  --ipv6         -6                   fwmark entry uses IPv6  --scheduler    -s scheduler         one of rr|wrr|lc|wlc|lblc|lblcr|dh|sh|sed|nq,                                      the default scheduler is wlc.  --pe            engine              alternate persistence engine may be sip,                                      not set by default.  --persistent   -p [timeout]         persistent service  --netmask      -M netmask           persistent granularity mask  --real-server  -r server-address    server-address is host (and port)  --gatewaying   -g                   gatewaying (direct routing) (default)  --ipip         -i                   ipip encapsulation (tunneling)  --masquerading -m                   masquerading (NAT)  --weight       -w weight            capacity of real server  --u-threshold  -x uthreshold        upper threshold of connections  --l-threshold  -y lthreshold        lower threshold of connections  --mcast-interface interface         multicast interface for connection sync  --syncid sid                        syncid for connection sync (default=255)  --connection   -c                   output of current IPVS connections  --timeout                           output of timeout (tcp tcpfin udp)  --daemon                            output of daemon information  --stats                             output of statistics information  --rate                              output of rate information  --exact                             expand numbers (display exact values)  --thresholds                        output of thresholds information  --persistent-conn                   output of persistent connection info  --nosort                            disable sorting output of service/server entries  --sort                              does nothing, for backwards compatibility  --ops          -o                   one-packet scheduling  --numeric      -n                   numeric output of addresses and ports  --sched-flags  -b flags             scheduler flags (comma-separated)

å‚è€ƒæ–‡æ¡£ï¼š

ipvsadm(8)
ipvsadmå‘½ä»¤ â€“ ç®¡ç†Linuxè™šæ‹ŸæœåŠ¡å™¨
LVSç­–ç•¥ç®¡ç†å·¥å…·ï¼šipvsadmå‘½ä»¤è¯¦è§£

ç¯å¢ƒæè¿°192.168.56.254ä½œä¸ºDSï¼Œåˆ›å»ºè™šæ‹ŸæœåŠ¡æ—¶ï¼Œè™šæ‹ŸæœåŠ¡çš„VIPè¦ä½¿ç”¨è¿™ä¸ªIPã€‚192.168.56.102-104ä½œä¸ºRSï¼Œä¸Šé¢éƒ¨ç½²nginxæœåŠ¡åœ¨80ç«¯å£ã€‚
æŸ¥çœ‹è™šæ‹ŸæœåŠ¡å’ŒçœŸå®æœåŠ¡å™¨ipvsadm -Ln

æŸ¥çœ‹ipvsæ¨¡å—ä¸­çš„é“¾æ¥ä¿¡æ¯ipvsadm -lnc

æŸ¥çœ‹ipvsæ¨¡å—ä¸­çš„è½¬å‘æƒ…å†µä¿¡æ¯ipvsadm -Ln --stats | --rate

æ·»åŠ è™šæ‹ŸæœåŠ¡ipvsadm -A -t 192.168.56.254:80 -s rr

ä¿®æ”¹è™šæ‹ŸæœåŠ¡ç®—æ³•ipvsadm -E -t 192.168.56.254:80 -s wlc

åˆ é™¤è™šæ‹ŸæœåŠ¡ipvsadm -D -t 192.168.56.254:80

æ·»åŠ çœŸå®æœåŠ¡å™¨NATæ¨¡å¼ï¼š
ipvsadm -a -t 192.168.56.254:80 -r 192.168.56.102:80 -mipvsadm -a -t 192.168.56.254:80 -r 192.168.56.103:80 -m

NATæ¨¡å¼åŠ æƒè½®è¯¢ï¼š
ipvsadm -a -t 192.168.56.254:80 -r 192.168.56.104:80 -m -w 1

è®¿é—®æµ‹è¯•ï¼š
curl 192.168.56.254

ä¿®æ”¹çœŸå®æœåŠ¡å™¨ipvsadm -a -t 192.168.56.254:80 -r 192.168.56.102:80 -m -w 2

åˆ é™¤çœŸå®æœåŠ¡å™¨ipvsadm -d -t 192.168.56.254:80 -r 192.168.56.103:80

æ¸…ç©ºè½¬å‘æ•°æ®è®¡æ•°å™¨ipvsadm -Z

åˆ é™¤æ‰€æœ‰ipvsè§„åˆ™ipvsadm -C

ä¿å­˜ipvsè§„åˆ™ipvsadm-save &gt; /path/to/ipvsadm

åŠ è½½ipvsè§„åˆ™ipvsadm-restore &lt; /path/to/ipvsadm

VIPè‡ªå®šä¹‰ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„VIPæ˜¯å®¿ä¸»æœºçš„IPï¼Œå¦‚æœæƒ³è¦è‡ªå·±å†å®šä¹‰ä¸€ä¸ªIPä½œä¸ºVIPï¼Œè¯¥æ€ä¹ˆæï¼Ÿç­”ï¼šåˆ›å»ºä¸€ä¸ªVIPï¼Œç»‘å®šç»™å®¿ä¸»æœºçš„ç½‘å¡ã€‚
ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªVIPä¸º10.0.0.10/24ï¼Œåç«¯RIPä¸º192.168.56.102/24
ip addr add 10.0.0.10/24 dev enp0s3:0ipvsadm -A -t 10.0.0.10:80 -s rripvsadm -a -t 10.0.0.10:80 -r 192.168.56.102:80 -mcurl 10.0.0.10







]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>network</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ç½‘ç»œ</tag>
        <tag>ipvs</tag>
      </tags>
  </entry>
  <entry>
    <title>VM9ä¸‹ubuntuå®‰è£…vmtools</title>
    <url>/dev-vm9-ubuntu-vmtools/</url>
    <content><![CDATA[1.å³å‡»â€œubuntuâ€ï¼Œé€‰æ‹©å®‰è£…Vmware tools
2.è®¾å¤‡ï¼ˆCD-ROMï¼‰ä¸­ä¼šå‡ºç°Vmware tools
3.é€‰ä¸­é‡Œé¢çš„å‹ç¼©æ–‡ä»¶ï¼Œå¤åˆ¶åˆ°â€œä¸»æ–‡ä»¶å¤¹â€ï¼ˆä¸ºäº†ä¸‹é¢çš„æ“ä½œæ–¹ä¾¿ï¼‰ï¼Œè§£å‹
4.ctrl+ait+tï¼Œæ‰“å¼€ç»ˆç«¯
5.è¾“å…¥â€œcdâ€ï¼Œå›è½¦ï¼ˆä¸ºäº†ç¡®ä¿è¿›å…¥äº†è‡ªå·±çš„å®¶ç›®å½•ï¼‰

6.è¾“å…¥â€œsuâ€ï¼Œå›è½¦ï¼Œè¾“å…¥rootç”¨æˆ·å¯†ç ï¼Œå›è½¦ï¼ˆè¿™æ­¥æ˜¯ä¸ºäº†åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼‰
7.è¾“å…¥â€œls -lâ€ï¼Œå›è½¦ï¼Œä¼šçœ‹åˆ°æ–‡ä»¶åˆ—è¡¨ä¸­å‡ºç°äº†vmware-tools-distribè¿™ä¸ªæ–‡ä»¶å¤¹ 
8.è¾“å…¥â€œcd vmware-tools-distribâ€ï¼Œå›è½¦
9.è¾“å…¥â€œls -lâ€ï¼Œå›è½¦ï¼Œä¼šçœ‹åˆ°vmware-install.plè¿™ä¸ªæ–‡ä»¶
10.è¾“å…¥â€œ./vmware-install.plâ€ï¼Œå›è½¦
11.æ¥ä¸‹æ¥ä¸€è·¯å›è½¦
12.ç­‰åˆ°å†ä¹Ÿæ²¡æœ‰æç¤ºâ€œyesâ€æˆ–â€œnoâ€æ—¶ï¼Œå…³é—­çª—å£å³å¯ã€‚
13.å†æ¬¡å³å‡»â€œubuntuâ€ï¼Œä½ ä¼šå‘ç°â€œå®‰è£…vmware toolsâ€çš„æç¤ºå˜æˆäº†â€œé‡æ–°å®‰è£…vmware toolsâ€ï¼Œè‡³æ­¤ï¼Œå¤§åŠŸå‘Šæˆï¼
14.æ£€éªŒä¸€ä¸‹ï¼šé‡å¯è™šæ‹Ÿæœºï¼Œä»ä¸»æœºå¤åˆ¶ä¸€ä¸ªæ–‡ä»¶ç„¶åç²˜è´´åˆ°è™šæ‹Ÿæœº
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>iptableså…¥é—¨ç¯‡</title>
    <url>/dev-iptables-start/</url>
    <content><![CDATA[iptableså†å²é˜²ç«å¢™ï¼Œå…¶å®è¯´ç™½äº†è®²ï¼Œå°±æ˜¯ç”¨äºå®ç°Linuxä¸‹è®¿é—®æ§åˆ¶çš„åŠŸèƒ½çš„ï¼Œå®ƒåˆ†ä¸ºç¡¬ä»¶çš„æˆ–è€…è½¯ä»¶çš„é˜²ç«å¢™ä¸¤ç§ã€‚æ— è®ºæ˜¯åœ¨å“ªä¸ªç½‘ç»œä¸­ï¼Œé˜²ç«å¢™å·¥ä½œçš„åœ°æ–¹ä¸€å®šæ˜¯åœ¨ç½‘ç»œçš„è¾¹ç¼˜ã€‚è€Œæˆ‘ä»¬çš„ä»»åŠ¡å°±æ˜¯éœ€è¦å»å®šä¹‰åˆ°åº•é˜²ç«å¢™å¦‚ä½•å·¥ä½œï¼Œè¿™å°±æ˜¯é˜²ç«å¢™çš„ç­–ç•¥ï¼Œè§„åˆ™ï¼Œä»¥è¾¾åˆ°è®©å®ƒå¯¹å‡ºå…¥ç½‘ç»œçš„IPã€æ•°æ®è¿›è¡Œæ£€æµ‹ã€‚
iptablesçš„å‰èº«å«ipfirewall ï¼ˆå†…æ ¸1.xæ—¶ä»£ï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªä½œè€…ä»freeBSDä¸Šç§»æ¤è¿‡æ¥çš„ï¼Œèƒ½å¤Ÿå·¥ä½œåœ¨å†…æ ¸å½“ä¸­çš„ï¼Œå¯¹æ•°æ®åŒ…è¿›è¡Œæ£€æµ‹çš„ä¸€æ¬¾ç®€æ˜“è®¿é—®æ§åˆ¶å·¥å…·ã€‚ä½†æ˜¯ipfirewallå·¥ä½œåŠŸèƒ½æå…¶æœ‰é™ï¼ˆå®ƒéœ€è¦å°†æ‰€æœ‰çš„è§„åˆ™éƒ½æ”¾è¿›å†…æ ¸å½“ä¸­ï¼Œè¿™æ ·è§„åˆ™æ‰èƒ½å¤Ÿè¿è¡Œèµ·æ¥ï¼Œè€Œæ”¾è¿›å†…æ ¸ï¼Œè¿™ä¸ªåšæ³•ä¸€èˆ¬æ˜¯æå…¶å›°éš¾çš„ï¼‰ã€‚å½“å†…æ ¸å‘å±•åˆ°2.xç³»åˆ—çš„æ—¶å€™ï¼Œè½¯ä»¶æ›´åä¸ºipchainsï¼Œå®ƒå¯ä»¥å®šä¹‰å¤šæ¡è§„åˆ™ï¼Œå°†ä»–ä»¬ä¸²èµ·æ¥ï¼Œå…±åŒå‘æŒ¥ä½œç”¨ï¼Œè€Œç°åœ¨ï¼Œå®ƒå«åšiptablesï¼Œå¯ä»¥å°†è§„åˆ™ç»„æˆä¸€ä¸ªåˆ—è¡¨ï¼Œå®ç°ç»å¯¹è¯¦ç»†çš„è®¿é—®æ§åˆ¶åŠŸèƒ½ã€‚
å‚è€ƒæ–‡æ¡£ï¼š

Basic iptables howto
iptablesè¯¦è§£
ipateblesè¯¦è§£ï¼ˆ1ï¼‰ï¼šiptalesæ¦‚å¿µ
iptableså‘½ä»¤
25ä¸ªiptableså¸¸ç”¨ç¤ºä¾‹
Linuxé˜²ç«å¢™iptableså­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰iptableså‘½ä»¤è¯¦è§£å’Œä¸¾ä¾‹ 



è§„åˆ™é“¾iptableså·¥ä½œåœ¨ç”¨æˆ·ç©ºé—´ä¸­ï¼Œæ˜¯å®šä¹‰è§„åˆ™çš„å·¥å…·ï¼Œæœ¬èº«å¹¶ä¸ç®—æ˜¯é˜²ç«å¢™ã€‚å®ƒå®šä¹‰çš„è§„åˆ™ï¼Œå¯ä»¥è®©å†…æ ¸ç©ºé—´ä¸­çš„netfilteræ¥è¯»å–ï¼Œå¹¶ä¸”å®ç°è®©é˜²ç«å¢™å·¥ä½œã€‚netfilterçš„æ¶æ„å°±æ˜¯åœ¨æ•´ä¸ªç½‘ç»œæµç¨‹çš„è‹¥å¹²ä½ç½®è®¾ç½®ä¸€äº›å…³å¡ï¼ˆHOOKï¼‰ï¼Œè€Œåœ¨æ¯ä¸ªå…³å¡ä¸Šç™»è®°äº†ä¸€äº›è§„åˆ™ï¼Œæ‰€ä»¥è¿™äº›å…³å¡çš„æœ¯è¯­å«åšè§„åˆ™é“¾ã€‚
åœ¨å†…æ ¸ç©ºé—´ä¸­ï¼Œnetfilteré€‰æ‹©äº†5ä¸ªä½ç½®ï¼Œæ¥ä½œä¸ºæ§åˆ¶çš„å…³å¡ï¼Œä¸“ä¸šç‚¹å«åšè§„åˆ™é“¾ã€‚æœ±åŒå°å¤§ç¥çš„åšå®¢ä¸­ç»™å‡ºäº†ç›´è§‚çš„å›¾åƒï¼š
æ ¹æ®ä¸Šå›¾ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæƒ³è±¡å‡ºæŸäº›å¸¸ç”¨åœºæ™¯ä¸­ï¼ŒæŠ¥æ–‡çš„æµå‘ï¼šåˆ°æœ¬æœºæŸè¿›ç¨‹çš„æŠ¥æ–‡ï¼šPREROUTING â€“&gt; INPUTç”±æœ¬æœºè½¬å‘çš„æŠ¥æ–‡ï¼šPREROUTING â€“&gt; FORWARD â€“&gt; POSTROUTINGç”±æœ¬æœºçš„æŸè¿›ç¨‹å‘å‡ºæŠ¥æ–‡ï¼ˆé€šå¸¸ä¸ºå“åº”æŠ¥æ–‡ï¼‰ï¼šOUTPUT â€“&gt; POSTROUTING
äº”ä¸ªè§„åˆ™é“¾çš„ä½œç”¨å¦‚ä¸‹ï¼šINPUTé“¾ï¼šå¤„ç†è¾“å…¥æ•°æ®åŒ…ã€‚OUTPUTé“¾ï¼šå¤„ç†è¾“å‡ºæ•°æ®åŒ…ã€‚PORWARDé“¾ï¼šå¤„ç†è½¬å‘æ•°æ®åŒ…ã€‚PREROUTINGé“¾ï¼šç”¨äºç›®æ ‡åœ°å€è½¬æ¢ï¼ˆDNATï¼‰ã€‚POSTOUTINGé“¾ï¼šç”¨äºæºåœ°å€è½¬æ¢ï¼ˆSNATï¼‰ã€‚
è¡¨çš„æ¦‚å¿µæˆ‘ä»¬å†æƒ³æƒ³å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯¹æ¯ä¸ªâ€é“¾â€ä¸Šéƒ½æ”¾ç½®äº†ä¸€ä¸²è§„åˆ™ï¼Œä½†æ˜¯è¿™äº›è§„åˆ™æœ‰äº›å¾ˆç›¸ä¼¼ï¼Œæ¯”å¦‚ï¼ŒAç±»è§„åˆ™éƒ½æ˜¯å¯¹IPæˆ–è€…ç«¯å£çš„è¿‡æ»¤ï¼ŒBç±»è§„åˆ™æ˜¯ä¿®æ”¹æŠ¥æ–‡ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯èƒ½æŠŠå®ç°ç›¸åŒåŠŸèƒ½çš„è§„åˆ™æ”¾åœ¨ä¸€èµ·å‘¢ï¼Œå¿…é¡»èƒ½çš„ã€‚
æˆ‘ä»¬æŠŠå…·æœ‰ç›¸åŒåŠŸèƒ½çš„è§„åˆ™çš„é›†åˆå«åšâ€è¡¨â€ï¼Œæ‰€ä»¥è¯´ï¼Œä¸åŒåŠŸèƒ½çš„è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾ç½®åœ¨ä¸åŒçš„è¡¨ä¸­è¿›è¡Œç®¡ç†ï¼Œè€Œiptableså·²ç»ä¸ºæˆ‘ä»¬å®šä¹‰äº†4ç§è¡¨ï¼Œæ¯ç§è¡¨å¯¹åº”äº†ä¸åŒçš„åŠŸèƒ½ï¼Œè€Œæˆ‘ä»¬å®šä¹‰çš„è§„åˆ™ä¹Ÿéƒ½é€ƒè„±ä¸äº†è¿™4ç§åŠŸèƒ½çš„èŒƒå›´ï¼Œæ‰€ä»¥ï¼Œå­¦ä¹ iptablesä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆææ˜ç™½æ¯ç§è¡¨çš„ä½œç”¨ã€‚iptablesä¸ºæˆ‘ä»¬æä¾›äº†å¦‚ä¸‹è§„åˆ™çš„åˆ†ç±»ï¼Œæˆ–è€…è¯´ï¼Œiptablesä¸ºæˆ‘ä»¬æä¾›äº†å¦‚ä¸‹â€è¡¨â€ï¼š

filterè¡¨ï¼šè´Ÿè´£è¿‡æ»¤åŠŸèƒ½ï¼Œé˜²ç«å¢™ï¼›å†…æ ¸æ¨¡å—ï¼šiptables_filter
natè¡¨ï¼šnetwork address translationï¼Œç½‘ç»œåœ°å€è½¬æ¢åŠŸèƒ½ï¼›å†…æ ¸æ¨¡å—ï¼šiptable_nat
mangleè¡¨ï¼šæ‹†è§£æŠ¥æ–‡ï¼Œåšå‡ºä¿®æ”¹ï¼Œå¹¶é‡æ–°å°è£…çš„åŠŸèƒ½ï¼›iptable_mangle
rawè¡¨ï¼šå…³é—­natè¡¨ä¸Šå¯ç”¨çš„è¿æ¥è¿½è¸ªæœºåˆ¶ï¼›iptable_raw

ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è‡ªå®šä¹‰çš„æ‰€æœ‰è§„åˆ™ï¼Œéƒ½æ˜¯è¿™å››ç§åˆ†ç±»ä¸­çš„è§„åˆ™ï¼Œæˆ–è€…è¯´ï¼Œæ‰€æœ‰è§„åˆ™éƒ½å­˜åœ¨äºè¿™4å¼ â€è¡¨â€ä¸­ã€‚
æ•°æ®åŒ…æµå‘å¯ä»¥å°†æ•°æ®åŒ…é€šè¿‡é˜²ç«å¢™çš„æµç¨‹æ€»ç»“ä¸ºä¸‹å›¾ï¼šæˆ‘ä»¬åœ¨å†™iptablesè§„åˆ™çš„æ—¶å€™ï¼Œè¦æ—¶åˆ»ç‰¢è®°è¿™å¼ è·¯ç”±æ¬¡åºå›¾ï¼Œçµæ´»é…ç½®è§„åˆ™ã€‚
è§„åˆ™è§„åˆ™ï¼šæ ¹æ®æŒ‡å®šçš„åŒ¹é…æ¡ä»¶æ¥å°è¯•åŒ¹é…æ¯ä¸ªæµç»æ­¤å¤„çš„æŠ¥æ–‡ï¼Œä¸€æ—¦åŒ¹é…æˆåŠŸï¼Œåˆ™ç”±è§„åˆ™åé¢æŒ‡å®šçš„å¤„ç†åŠ¨ä½œè¿›è¡Œå¤„ç†ã€‚è§„åˆ™ç”±åŒ¹é…æ¡ä»¶å’Œå¤„ç†åŠ¨ä½œç»„æˆã€‚
åŒ¹é…æ¡ä»¶åˆ†ä¸ºåŸºæœ¬åŒ¹é…æ¡ä»¶ä¸æ‰©å±•åŒ¹é…æ¡ä»¶ï¼šåŸºæœ¬åŒ¹é…æ¡ä»¶åŒ…æ‹¬æºåœ°å€Source IPå’Œç›®æ ‡åœ°å€ Destination IPã€‚
æ‰©å±•åŒ¹é…æ¡ä»¶åŒ…æ‹¬æºç«¯å£Source Portï¼Œç›®æ ‡ç«¯å£Destination Portç­‰ç­‰ã€‚
åŠ¨ä½œä¹Ÿå¯ä»¥åˆ†ä¸ºåŸºæœ¬åŠ¨ä½œå’Œæ‰©å±•åŠ¨ä½œï¼Œæ­¤å¤„åˆ—å‡ºä¸€äº›å¸¸ç”¨åŠ¨ä½œï¼šACCEPTï¼šå…è®¸æ•°æ®åŒ…é€šè¿‡ã€‚DROPï¼šç›´æ¥ä¸¢å¼ƒæ•°æ®åŒ…ï¼Œä¸ç»™ä»»ä½•å›åº”ä¿¡æ¯ï¼Œè¿™æ—¶å€™å®¢æˆ·ç«¯ä¼šæ„Ÿè§‰è‡ªå·±çš„è¯·æ±‚æ³¥ç‰›å…¥æµ·äº†ï¼Œè¿‡äº†è¶…æ—¶æ—¶é—´æ‰ä¼šæœ‰ååº”ã€‚REJECTï¼šæ‹’ç»æ•°æ®åŒ…é€šè¿‡ï¼Œå¿…è¦æ—¶ä¼šç»™æ•°æ®å‘é€ç«¯ä¸€ä¸ªå“åº”çš„ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯åˆšè¯·æ±‚å°±ä¼šæ”¶åˆ°æ‹’ç»çš„ä¿¡æ¯ã€‚SNATï¼šæºåœ°å€è½¬æ¢ï¼Œè§£å†³å†…ç½‘ç”¨æˆ·ç”¨åŒä¸€ä¸ªå…¬ç½‘åœ°å€ä¸Šç½‘çš„é—®é¢˜ã€‚MASQUERADEï¼šæ˜¯SNATçš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼Œé€‚ç”¨äºåŠ¨æ€çš„ã€ä¸´æ—¶ä¼šå˜çš„ipä¸Šã€‚DNATï¼šç›®æ ‡åœ°å€è½¬æ¢ï¼Œè§£å†³å¤–ç½‘ç”¨æˆ·è®¿é—®å†…ç½‘çš„é—®é¢˜ã€‚REDIRECTï¼šåœ¨æœ¬æœºåšç«¯å£æ˜ å°„ã€‚LOGï¼šåœ¨/var/log/messagesæ–‡ä»¶ä¸­è®°å½•æ—¥å¿—ä¿¡æ¯ï¼Œç„¶åå°†æ•°æ®åŒ…ä¼ é€’ç»™ä¸‹ä¸€æ¡è§„åˆ™ï¼Œä¹Ÿå°±æ˜¯è¯´é™¤äº†è®°å½•ä»¥å¤–ä¸å¯¹æ•°æ®åŒ…åšä»»ä½•å…¶ä»–æ“ä½œï¼Œä»ç„¶è®©ä¸‹ä¸€æ¡è§„åˆ™å»åŒ¹é…ã€‚
å®‰è£…iptablesubuntu
apt-get install iptables

centos
yum install iptables

iptableså‘½ä»¤è¯¦è§£å‘½ä»¤æ ¼å¼ï¼š
iptables [é€‰é¡¹] [å‚æ•°]

é€‰é¡¹åŒ…æ‹¬ï¼š
-tï¼šæŒ‡å®šè¦æ“çºµçš„è¡¨ï¼›-Aï¼šå‘è§„åˆ™é“¾ä¸­æ·»åŠ æ¡ç›®ï¼›-Dï¼šä»è§„åˆ™é“¾ä¸­åˆ é™¤æ¡ç›®ï¼›-Iï¼šå‘è§„åˆ™é“¾ä¸­æ’å…¥æ¡ç›®ï¼›-Rï¼šæ›¿æ¢è§„åˆ™é“¾ä¸­çš„æ¡ç›®ï¼›-Lï¼šæ˜¾ç¤ºè§„åˆ™é“¾ä¸­å·²æœ‰çš„æ¡ç›®ï¼›-Fï¼šæ¸…æ¥šè§„åˆ™é“¾ä¸­å·²æœ‰çš„æ¡ç›®ï¼›-Zï¼šæ¸…ç©ºè§„åˆ™é“¾ä¸­çš„æ•°æ®åŒ…è®¡ç®—å™¨å’Œå­—èŠ‚è®¡æ•°å™¨ï¼›-Nï¼šåˆ›å»ºæ–°çš„ç”¨æˆ·è‡ªå®šä¹‰è§„åˆ™é“¾ï¼›-Pï¼šå®šä¹‰è§„åˆ™é“¾ä¸­çš„é»˜è®¤ç›®æ ‡ï¼›-hï¼šæ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ï¼›-pï¼šæŒ‡å®šè¦åŒ¹é…çš„æ•°æ®åŒ…åè®®ç±»å‹ï¼›-sï¼šæŒ‡å®šè¦åŒ¹é…çš„æ•°æ®åŒ…æºipåœ°å€ï¼›-dï¼šæŒ‡å®šè¦åŒ¹é…çš„æ•°æ®åŒ…ç›®æ ‡ipåœ°å€ï¼›-jï¼šæŒ‡å®šè¦è·³è½¬çš„ç›®æ ‡ï¼›-iï¼šæŒ‡å®šæ•°æ®åŒ…è¿›å…¥æœ¬æœºçš„ç½‘ç»œæ¥å£ï¼ˆç½‘å¡ï¼‰ï¼›-oï¼šæŒ‡å®šæ•°æ®åŒ…ç¦»å¼€æœ¬æœºçš„ç½‘ç»œæ¥å£ï¼ˆç½‘å¡ï¼‰ï¼›--sportï¼šåŒ¹é…æ¥æºç«¯å£å·ï¼›--dportï¼šåŒ¹é…ç›®æ ‡ç«¯å£å·ã€‚

å‘½ä»¤é€‰é¡¹è¾“å…¥é¡ºåºï¼š
iptables -t è¡¨å &lt;-A/I/D/R&gt; è§„åˆ™é“¾å [è§„åˆ™å·] &lt;-i/o ç½‘å¡å&gt; -p åè®®å &lt;-s æºIP/æºå­ç½‘&gt; --sport æºç«¯å£ &lt;-d ç›®æ ‡IP/ç›®æ ‡å­ç½‘&gt; --dport ç›®æ ‡ç«¯å£ -j åŠ¨ä½œ

iptablesç¤ºä¾‹æ¸…é™¤å·²æœ‰iptablesè§„åˆ™iptables -Fiptables -Xiptables -Z

å¼€æ”¾æŒ‡å®šçš„ç«¯å£iptables -A INPUT -s 127.0.0.1 -d 127.0.0.1 -j ACCEPT               #å…è®¸æœ¬åœ°å›ç¯æ¥å£(å³å…è®¸æœ¬æœºè®¿é—®æœ¬æœº)iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT    #å…è®¸å·²å»ºç«‹çš„æˆ–ç›¸å…³è¿çš„é€šè¡Œiptables -A OUTPUT -j ACCEPT         #å…è®¸æ‰€æœ‰æœ¬æœºå‘å¤–çš„è®¿é—®iptables -A INPUT -p tcp --dport 22 -j ACCEPT    #å…è®¸è®¿é—®22ç«¯å£iptables -A INPUT -p tcp --dport 80 -j ACCEPT    #å…è®¸è®¿é—®80ç«¯å£iptables -A INPUT -p tcp --dport 21 -j ACCEPT    #å…è®¸ftpæœåŠ¡çš„21ç«¯å£iptables -A INPUT -p tcp --dport 20 -j ACCEPT    #å…è®¸FTPæœåŠ¡çš„20ç«¯å£iptables -A INPUT -j REJECT       #ç¦æ­¢å…¶ä»–æœªå…è®¸çš„è§„åˆ™è®¿é—®iptables -A FORWARD -j REJECT     #ç¦æ­¢å…¶ä»–æœªå…è®¸çš„è§„åˆ™è®¿é—®

å±è”½IPiptables -I INPUT -s 123.45.6.7 -j DROP       #å±è”½å•ä¸ªIPçš„å‘½ä»¤iptables -I INPUT -s 123.0.0.0/8 -j DROP      #å°æ•´ä¸ªæ®µå³ä»123.0.0.1åˆ°123.255.255.254çš„å‘½ä»¤iptables -I INPUT -s 124.45.0.0/16 -j DROP    #å°IPæ®µå³ä»123.45.0.1åˆ°123.45.255.254çš„å‘½ä»¤iptables -I INPUT -s 123.45.6.0/24 -j DROP    #å°IPæ®µå³ä»123.45.6.1åˆ°123.45.6.254çš„å‘½ä»¤æ˜¯

æŸ¥çœ‹å·²æ·»åŠ çš„iptablesè§„åˆ™iptables -L -n -v

åˆ é™¤å·²æ·»åŠ çš„iptablesè§„åˆ™å°†æ‰€æœ‰iptablesä»¥åºå·æ ‡è®°æ˜¾ç¤ºï¼Œæ‰§è¡Œï¼š
iptables -L -n --line-numbers

æ¯”å¦‚è¦åˆ é™¤INPUTé‡Œåºå·ä¸º8çš„è§„åˆ™ï¼Œæ‰§è¡Œï¼š
iptables -D INPUT 8

å¤‡ä»½è§„åˆ™æ–‡ä»¶iptables-save -t filter &gt; iptables.bak

æŒä¹…åŒ–iptablesè§„åˆ™æŒä¹…åŒ–iptablesè§„åˆ™ï¼Œé‡å¯ä¾ç„¶ç”Ÿæ•ˆ
apt-get install iptables-persistentservice iptables-persistent save





]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>network</category>
        <category>shell</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ç½‘ç»œ</tag>
        <tag>iptables</tag>
      </tags>
  </entry>
  <entry>
    <title>LinuxåŸºç¡€æ¦‚å¿µ</title>
    <url>/dev-linux-basic-concepts/</url>
    <content><![CDATA[ç²˜è´´ä½è¦åˆ é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œä½ ä¸ä¸€å®šè¦æœ‰è¿™ä¸ªæ–‡ä»¶çš„å†™æƒé™ï¼Œä½†ä½ ä¸€å®šè¦æœ‰è¿™ä¸ªæ–‡ä»¶çš„ä¸Šçº§ç›®å½•çš„å†™æƒé™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å³ä½¿æ²¡æœ‰ä¸€ä¸ªæ–‡ä»¶çš„å†™æƒé™ï¼Œä½†ä½ æœ‰è¿™ä¸ªæ–‡ä»¶çš„ä¸Šçº§ç›®å½•çš„å†™æƒé™ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠè¿™ä¸ªæ–‡ä»¶ç»™åˆ é™¤ï¼Œè€Œå¦‚æœæ²¡æœ‰ä¸€ä¸ªç›®å½•çš„å†™æƒé™ï¼Œä¹Ÿå°±ä¸èƒ½åœ¨è¿™ä¸ªç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶ã€‚
å¦‚ä½•æ‰èƒ½ä½¿ä¸€ä¸ªç›®å½•æ—¢å¯ä»¥è®©ä»»ä½•ç”¨æˆ·å†™å…¥æ–‡ä»¶ï¼Œåˆä¸è®©ç”¨æˆ·åˆ é™¤è¿™ä¸ªç›®å½•ä¸‹ä»–äººçš„æ–‡ä»¶ï¼Œstickyå°±æ˜¯èƒ½èµ·åˆ°è¿™ä¸ªä½œç”¨ã€‚stcikyä¸€èˆ¬åªç”¨åœ¨ç›®å½•ä¸Šï¼Œç”¨åœ¨æ–‡ä»¶ä¸Šèµ·ä¸åˆ°ä»€ä¹ˆä½œç”¨ã€‚åœ¨ä¸€ä¸ªç›®å½•ä¸Šè®¾äº†stickyä½åï¼Œï¼ˆå¦‚/homeï¼Œæƒé™ä¸º1777)æ‰€æœ‰çš„ç”¨æˆ·éƒ½å¯ä»¥åœ¨è¿™ä¸ªç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶ï¼Œä½†åªèƒ½åˆ é™¤è‡ªå·±åˆ›å»ºçš„æ–‡ä»¶(rooté™¤å¤–)ï¼Œè¿™å°±å¯¹æ‰€æœ‰ç”¨æˆ·èƒ½å†™çš„ç›®å½•ä¸‹çš„ç”¨æˆ·æ–‡ä»¶å¯åˆ°äº†ä¿æŠ¤çš„ä½œç”¨ã€‚chmod 777 abc + chmod +t abc ï¼Œç­‰ä»·äº chmod 1777 abc ã€‚


å—å¤§å°å¯¹äºå•ä¸€æ–‡ä»¶ï¼Œè‹¥å—å¤§å°=1024ï¼Œæœ€å¤§å®¹é‡ä¸º16GBï¼›è‹¥å—å¤§å°=4096ï¼Œæœ€å¤§å®¹é‡ä¸º2TBã€‚ï¼ˆæ ¹æ®inodeçš„æ ¼å¼æ¥çœ‹(12ä¸ªç›´æ¥å—æŒ‡é’ˆ,1ä¸ªé—´æ¥å—æŒ‡é’ˆ,1ä¸ªäºŒæ¬¡é—´æ¥å—æŒ‡é’ˆ,1ä¸ªä¸‰æ¬¡é—´æ¥å—æŒ‡é’ˆ),å‡è®¾ç£ç›˜å—å°ºå¯¸ä¸ºnçš„è¯,å•ä¸ªæ–‡ä»¶å°ºå¯¸åº”è¯¥æ˜¯:12*n + (1/4)*n^2 + (1/16)*n^3 + (1/64)*n^4
ä»»åŠ¡å‰åå°
CTRL+Zåœæ­¢è¿›ç¨‹å¹¶æ”¾å…¥åå°     
jobsæ˜¾ç¤ºå½“å‰æš‚åœçš„è¿›ç¨‹     
bg %Nä½¿ç¬¬Nä¸ªä»»åŠ¡åœ¨åå°è¿è¡Œ(%å‰æœ‰ç©ºæ ¼)     
fg %Nä½¿ç¬¬Nä¸ªä»»åŠ¡åœ¨å‰å°è¿è¡Œ     
é»˜è®¤bg,fgä¸å¸¦%Næ—¶è¡¨ç¤ºå¯¹æœ€åä¸€ä¸ªè¿›ç¨‹æ“ä½œ

]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>LinuxæŒ‚è½½æ–‡ä»¶ç³»ç»Ÿ</title>
    <url>/dev-linux-mount/</url>
    <content><![CDATA[mount/umountç®€ä»‹
mount - mount a filesystemumount - unmount file systemsAll files accessible in a Unix system are arranged in one big tree, the file hierarchy, rooted at /.  These files can be spread out over several devices. The mount command serves to attach the filesystem found on some device to the big file tree. Conversely, the umount command will detach it again.

å‚è€ƒæ–‡æ¡£ï¼š

Linux mountå‘½ä»¤è¯¦è§£ï¼šæŒ‚è½½Linuxç³»ç»Ÿå¤–çš„æ–‡ä»¶
mount



æ ¼å¼åŒ–å¹¶æŒ‚è½½ç£ç›˜æ ¼å¼åŒ–ç£ç›˜1ã€æŸ¥çœ‹ç£ç›˜
fdisk -l

2ã€ç£ç›˜åˆ†åŒºï¼ˆå¯é€‰ï¼‰
fdisk /dev/sdb

æŒ‰ç…§æç¤ºï¼Œä¾æ¬¡è¾“å…¥pï¼Œnï¼Œå›è½¦ï¼ˆPartition numberï¼‰ï¼Œå›è½¦ï¼ˆFirst sectorï¼‰ï¼Œå›è½¦ï¼ˆLast sectorï¼‰ï¼Œwã€‚
3ã€ç£ç›˜æ ¼å¼åŒ–
# mkfs -t ext4 /dev/sdbmkfs.ext4 /dev/sdb1blkid /dev/sdb1

partedæ ¼å¼åŒ–ç£ç›˜fdiskåªæ”¯æŒMBRåˆ†åŒºï¼ŒMBRåˆ†åŒºè¡¨æœ€å¤§æ”¯æ’‘2Tçš„ç£ç›˜ï¼Œæ‰€ä»¥æ— æ³•åˆ’åˆ†å¤§äº2Tçš„åˆ†åŒºã€‚è€Œpartedå·¥å…·å¯ä»¥åˆ’åˆ†å•ä¸ªåˆ†åŒºå¤§äº2Tçš„GPTæ ¼å¼çš„åˆ†åŒºï¼Œä¹Ÿå¯ä»¥åˆ’åˆ†æ™®é€šçš„MBRåˆ†åŒºã€‚å‚è€ƒæ–‡æ¡£Linux parted åˆ†åŒºå‘½ä»¤è¯¦è§£
1ã€æŸ¥çœ‹ç£ç›˜
fdisk -l

2ã€ç£ç›˜åˆ†åŒº
parted /dev/sdb

æŒ‰ç…§æç¤ºï¼Œä¾æ¬¡è¾“å…¥mklabelï¼Œmkpartï¼Œprintï¼Œquitã€‚
äº¤äº’ç¤ºä¾‹ï¼š
GNU Parted 3.3ä½¿ç”¨ /dev/sdbæ¬¢è¿ä½¿ç”¨ GNU Partedï¼è¾“å…¥ &#x27;help&#x27; æ¥æŸ¥çœ‹å‘½ä»¤åˆ—è¡¨ã€‚(parted) help  align-check ç±»å‹ N                         æ£€æŸ¥åˆ†åŒº N æ˜¯å¦ä¸º (æœ€å°=min|æœ€ä½³=opt) å¯¹é½ç±»å‹  help [COMMAND]                           æ‰“å°é€šç”¨æ±‚åŠ©ä¿¡æ¯ï¼Œæˆ– COMMAND çš„å¸®åŠ©  mklabel,mktable LABEL-TYPE               åˆ›å»ºæ–°çš„ç£ç›˜å·æ ‡ (åˆ†åŒºè¡¨)  mkpart åˆ†åŒºç±»å‹ [æ–‡ä»¶ç³»ç»Ÿç±»å‹] èµ·å§‹ç‚¹ ç»“æŸç‚¹ åˆ›å»ºä¸€ä¸ªåˆ†åŒº  name ç¼–å· åç§°                           å°†æŒ‡å®šâ€œç¼–å·â€çš„åˆ†åŒºå‘½åä¸ºâ€œåç§°â€  print [devices|free|list,all|æ•°å­—]        æ˜¾ç¤ºåˆ†åŒºè¡¨ã€å¯ç”¨è®¾å¤‡ã€å‰©ä½™ç©ºé—´ã€æ‰€æœ‰åˆ†åŒºæˆ–ç‰¹æ®Šåˆ†åŒº  quit                                     é€€å‡ºç¨‹åº  rescue èµ·å§‹ç‚¹ ç»ˆæ­¢ç‚¹                      æŒ½æ•‘ä¸´è¿‘â€œèµ·å§‹ç‚¹â€ã€â€œç»ˆæ­¢ç‚¹â€çš„é—å¤±çš„åˆ†åŒº  resizepart NUMBER END                    æ”¹å˜ NUMBER çš„å¤§å°  rm NUMBER                                åˆ é™¤ç¼–å·ä¸º NUMBER çš„åˆ†åŒº  select è®¾å¤‡                              é€‰æ‹©è¦ç¼–è¾‘çš„è®¾å¤‡  disk_set æ——æ ‡ çŠ¶æ€                       å˜æ›´å·²é€‰è®¾å¤‡ä¸Šçš„æ——æ ‡  disk_toggle [æ——æ ‡]                       åˆ‡æ¢å·²é€‰è®¾å¤‡ä¸Šçš„æ——æ ‡çŠ¶æ€  set ç¼–å· æ——æ ‡ çŠ¶æ€                       æ”¹å˜æŒ‡å®šâ€œç¼–å·â€åˆ†åŒºçš„æ——æ ‡  toggle [ç¼–å· [æ——æ ‡]]                     åˆ‡æ¢â€œç¼–å·â€åˆ†åŒºä¸Šçš„â€œæ——æ ‡â€çŠ¶æ€  unit å•ä½                                è®¾ç½®ç¼ºçœçš„â€œå•ä½â€  version                                  æ˜¾ç¤ºç›®å‰ GNU Parted çš„ç‰ˆæœ¬ä¸ç‰ˆæƒä¿¡æ¯(parted) mklabelæ–°çš„ç£ç›˜å·æ ‡ç±»å‹ï¼Ÿ gpt(parted) mkpartåˆ†åŒºåç§°ï¼Ÿ  []? sdb1æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Ÿ  [ext2]? ext4èµ·å§‹ç‚¹ï¼Ÿ 0%ç»“æŸç‚¹ï¼Ÿ 100%è­¦å‘Š: æ‰€äº§ç”Ÿçš„åˆ†åŒºæ²¡æœ‰é€‚å½“ä¸ºè·å¾—æœ€ä½³æ€§èƒ½è€Œå¯¹é½ï¼š34s % 2048s != 0så¿½ç•¥/Ignore/æ”¾å¼ƒ/Cancel? Ignore(parted) printå‹å·ï¼šAVAGO INSPUR (scsi)ç£ç›˜ /dev/sdb: 20.0TBæ‰‡åŒºå¤§å° (é€»è¾‘/ç‰©ç†)ï¼š512B/512Båˆ†åŒºè¡¨ï¼šgptç£ç›˜æ ‡å¿—ï¼šç¼–å·  èµ·å§‹ç‚¹  ç»“æŸç‚¹  å¤§å°    æ–‡ä»¶ç³»ç»Ÿ  åç§°  æ ‡å¿— 1    17.4kB  20.0TB  20.0TB  ext4      sdb1(parted) quit

3ã€ç£ç›˜æ ¼å¼åŒ–
# mkfs -t ext4 /dev/sdbmkfs.ext4 /dev/sdb1blkid /dev/sdb1

é‡æ–°åˆ†åŒºfdisk -lå¦‚æœå‡ºç°æç¤ºï¼šåˆ†åŒº 1 æœªèµ·å§‹äºç‰©ç†æ‰‡åŒºè¾¹ç•Œã€‚
æˆ–è€…mkfs.ext4 /dev/sdb1å‡ºç°æç¤ºï¼š/dev/sdb1 æœªå¯¹é½ï¼Œåç§»äº† 244736 ä¸ªå­—èŠ‚ã€‚è¿™å¯èƒ½å¯¼è‡´æ€§èƒ½æ˜æ˜¾ä¸‹é™ï¼Œå»ºè®®é‡æ–°è¿›è¡Œåˆ†åŒºã€‚
æ­¤æ—¶è¯·é‡æ–°è¿›è¡Œåˆ†åŒºï¼Œå¦åˆ™ç£ç›˜æ€§èƒ½ä¼šå¾ˆå·®ã€‚fdiskæŒ‡ä»¤ï¼š
å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼š d

partedæŒ‡ä»¤ï¼š
(parted) rm 1

æŒ‚è½½ç£ç›˜1ã€åˆ›å»ºæŒ‚è½½ç›®å½•
mkdir /sdb

2ã€æ·»åŠ è‡ªåŠ¨æŒ‚è½½ï¼Œç¼–è¾‘ /etc/fstab ï¼Œæ·»åŠ 
# /dev/sdb1 /sdb ext4 defaults 0 0&lt;blkid&gt; /sdb ext4 defaults 0 0

3ã€æ‰§è¡ŒæŒ‚è½½ï¼ˆæ ¹æ®/etc/fstabçš„é…ç½®ï¼‰
# mount /dev/sdb1 /sdbmount -adf -h

æŒ‚è½½nfs1ã€æŸ¥çœ‹nfs-serverçš„æŒ‚è½½ç‚¹
showmount -e 192.168.56.200

2ã€æ‰§è¡ŒæŒ‚è½½
mount -t nfs 192.168.56.200:/opt/qemu /opt/qemu

å¦‚æœmountå¡ä½ï¼Œå¤§æ¦‚ç‡æ˜¯å› ä¸ºnfs-serverçš„é—®é¢˜ï¼Œå»ºè®®æ£€æŸ¥ä¸€ä¸‹æŒ‚è½½ç‚¹æ˜¯å¦æ­£å¸¸ã€‚
3ã€å†™å…¥åˆ° /etc/fstab
192.168.56.200:/opt/qemu /opt/qemu nfs defaults 0 0

å¸è½½æŒ‚è½½umount /opt/qemu

df -hå¡ä½é—®é¢˜é—®é¢˜æè¿°df -hæ‰§è¡Œåï¼Œå¡ä½äº†
è§£å†³åŠæ³•ä¸€èˆ¬æ˜¯ç”±äº mount ç›®å½•æ‰€åœ¨æœåŠ¡å™¨å…³æœºäº†ï¼Œæˆ–è€…ç›®å½•ä¸å­˜åœ¨äº†ï¼Œé€ æˆ df -h å¡ä½ä¸€ç›´ä¸åŠ¨
æ’æŸ¥åŠæ³•ï¼š
# æŸ¥çœ‹å…·ä½“æœ‰å“ªäº›æŒ‚è½½mount# æŸ¥çœ‹å…·ä½“å¡åœ¨å“ªé‡Œäº†strace df -h# æŸ¥çœ‹æœ‰å“ªäº›è¿›ç¨‹ä½¿ç”¨è¿™ä¸ªæŒ‚è½½fuser -cu /opt/qemu

è§£å†³åŠæ³•ï¼š
# å¸è½½æ— æ•ˆæŒ‚è½½umount -l /opt/qemuumount -lf /opt/qemu







]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
        <category>troubleshooting</category>
        <category>storage</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>é—®é¢˜æ’æŸ¥</tag>
        <tag>shell</tag>
        <tag>nfs</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxå­¦ä¹ èµ„æº</title>
    <url>/dev-linux-resources/</url>
    <content><![CDATA[è½¯ä»¶æ¨èlinuxä¸‹çš„å›¾ç‰‡å¤„ç†è½¯ä»¶ï¼Œå·ç§°linuxä¸‹çš„photoshopï¼šgimp
linuxä¸‹å¯ç”¨çš„qqï¼špidgin-lwqq
linuxä¸‹çš„ç¿»è¯‘è½¯ä»¶ï¼šstardict
linuxä¸‹æŸ¥çœ‹chmæ–‡ä»¶ï¼šchmsee
å®‰è£…windowsè½¯ä»¶ï¼šwine


è½¯ä»¶èµ„æº
linuxå†…æ ¸ä¸‹è½½
linuxè½¯ä»¶åŒ…ä¸‹è½½

å­¦ä¹ èµ„æº
æ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•å»ºç«‹è‡ªå·±çš„Linuxç³»ç»Ÿ
CROSS LFS
Linux From Scratch
LFS linuxçš„å®‰è£…è¿‡ç¨‹
Linuxsir
Gentoo Linuxæ–‡æ¡£
UnixæŠ€æœ¯ç½‘
ITæŠ€æœ¯è®¤è¯è€ƒè¯•
è‡ªåŠ¨ç”ŸæˆMakefileå®˜æ–¹æ•™ç¨‹

]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxä¸‹è§£å‹å‘½ä»¤å¤§å…¨</title>
    <url>/dev-linux-decompress-command-all/</url>
    <content><![CDATA[.tarè§£åŒ…ï¼štar xvf FileName.taræ‰“åŒ…ï¼štar cvf FileName.tar DirNameï¼ˆæ³¨ï¼štaræ˜¯æ‰“åŒ…ï¼Œä¸æ˜¯å‹ç¼©ï¼ï¼‰


.gzè§£å‹1ï¼šgunzip FileName.gzè§£å‹2ï¼šgzip -d FileName.gzå‹ç¼©ï¼šgzip FileName.tar.gz å’Œ .tgzè§£å‹ï¼štar zxvf FileName.tar.gzå‹ç¼©ï¼štar zcvf FileName.tar.gz DirName
ä¾‹ï¼šä¸‹è½½äº†ä¸€ä¸ªeclipseï¼Œæƒ³æŠŠå®ƒè§£å‹åˆ°/usrç›®å½•tar -zxvf eclipse-jee-indigo-SR2-linux-gtk-x86_64.tar.gz /usrï¼Œæç¤ºé”™è¯¯ï¼š
tar: /usr: Not found in archivetar: Exiting with failure status due to previous errors
åŸå› æ˜¯å› ä¸ºå‹ç¼©æ–‡ä»¶ä½¿ç”¨çš„ç›¸å¯¹è·¯å¾„ åœ¨å½“å‰ç›®å½•ä¸‹æ‰¾ä¸åˆ° /usrç›®å½•ï¼Œé€šè¿‡ä½¿ç”¨-CæŒ‡å®šè§£å‹ç›®å½•å¯è§£å†³æ­¤é—®é¢˜tar -zxvf eclipse-jee-indigo-SR2-linux-gtk-x86_64.tar.gzÂ -CÂ /usr
.bz2è§£å‹1ï¼šbzip2 -d FileName.bz2è§£å‹2ï¼šbunzip2 FileName.bz2å‹ç¼©ï¼š bzip2 -z FileName
.tar.bz2è§£å‹ï¼štar jxvf FileName.tar.bz2å‹ç¼©ï¼štar jcvf FileName.tar.bz2 DirName
.bzè§£å‹1ï¼šbzip2 -d FileName.bzè§£å‹2ï¼šbunzip2 FileName.bzå‹ç¼©ï¼šæœªçŸ¥
.tar.bzè§£å‹ï¼štar jxvf FileName.tar.bzå‹ç¼©ï¼šæœªçŸ¥
.Zè§£å‹ï¼šuncompress FileName.Zå‹ç¼©ï¼šcompress FileName
.tar.Zè§£å‹ï¼štar Zxvf FileName.tar.Zå‹ç¼©ï¼štar Zcvf FileName.tar.Z DirName
.zipè§£å‹ï¼šunzip FileName.zipå‹ç¼©ï¼šzip FileName.zip DirName
.rarè§£å‹ï¼šrar x FileName.rarå‹ç¼©ï¼šrar a FileName.rar DirName
.lhaè§£å‹ï¼šlha -e FileName.lhaå‹ç¼©ï¼šlha -a FileName.lha FileName
.rpmè§£åŒ…ï¼šrpm2cpio FileName.rpm | cpio -div
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Fedoraçš„ä¸€äº›æŠ€å·§</title>
    <url>/dev-fedora-skill/</url>
    <content><![CDATA[æ’­æ”¾éŸ³ä¹1ã€audacious:
yum install Audaciousyum install audacious-plugins-*



2ã€RPM Fusion
å› ä¸ºä¸“åˆ©è®¸å¯è¯çš„åŸå› ï¼ŒFedoraè½¯ä»¶ä»“åº“ä¸åŒ…å«MP3,DVDå’Œè§†é¢‘æ’­æ”¾åŠè§£ç åº“ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œä½ å¿…é¡»ä»ç¬¬ä¸‰æ–¹çš„è½¯ä»¶ä»“åº“å®‰è£…é‚£äº›è½¯ä»¶ï¼Œè¯·ä¸è¦æ‹…å¿ƒï¼Œè¿™æ˜¯éå¸¸å®¹æ˜“çš„ :)
ç°åœ¨æˆ‘ä»¬å¼€å§‹å®‰è£… RPM Fusion è½¯ä»¶ä»“åº“ï¼ŒRPM Fusion æ˜¯ Fedora å’Œ Red Hatä¼ä¸šç‰ˆçš„è½¯ä»¶ä»“åº“ï¼Œæ˜¯ç”±Dribble, Freshrpms å’Œ RPM Fusionåˆå¹¶è€Œæ¥çš„ã€‚å„ç§å„æ ·çš„åº”ç”¨ç¨‹åºåŒ…å«åœ¨è¿™ä¸ªè½¯ä»¶ä»“åº“ä¸­ï¼Œæ¯”å¦‚MP3ã€æœªåŠ å¯†çš„ DVD ã€Mplayer, VLX, Xine ç­‰å¤šåª’ä½“åº”ç”¨ç¨‹åºä½¿ç”¨çš„è§£ç åº“ï¼Œä»¥åŠé—­æºçš„ Nvidia å’Œ ATI æ˜¾å¡é©±åŠ¨ï¼ŒRPM FusionåŒ…å«ä»¥ä¸‹ä¸¤ä¸ªä¸»è¦çš„è½¯ä»¶ä»“åº“ï¼šä¸€ä¸ªè¢«å‘½åä¸ºâ€œå…è´¹â€ï¼Œä¸ºå¼€æºè½¯ä»¶æä¾›ï¼ˆå¼€æºè½¯ä»¶çš„å«ä¹‰é€šè¿‡FedoraæˆæƒæŒ‡å¼•å®šä¹‰ï¼‰ï¼Œä½†å› ä¸ºç¾å›½ä¸“åˆ©ä¿æŠ¤æ³•æ¡ˆåˆä¸èƒ½åŒ…å«åœ¨ Fedora ä¸­ã€‚å¦ä¸€ä¸ªè¢«å‘½åä¸ºâ€œéå…è´¹â€ï¼Œä¸ºéè‡ªç”±è½¯ä»¶æä¾›ï¼Œå°±æ˜¯å…¶å®ƒæ‰€æœ‰é‚£äº›ä¸èƒ½è¢«å…è´¹æä¾›çš„ï¼ŒåŒ…æ‹¬å…¬å¼€æºä»£ç çš„è½¯ä»¶ï¼Œä½†æ˜¯æœ‰â€œéå•†ä¸šä½¿ç”¨â€ä¹‹ç±»çš„é™åˆ¶ã€‚
åœ¨è¿™éƒ¨åˆ†æŒ‡å—çš„æœ€åï¼Œæˆ‘ä¿è¯ä½ å®‰è£…å¹¶å¯ç”¨äº† RPM Fusion è½¯ä»¶ä»“åº“ï¼Œæ‰€ä»¥ï¼Œæ‰“å¼€ä¸€ä¸ªç»ˆç«¯å§ï¼Œè¾“å…¥ï¼š
rpm -ivh http://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-stable.noarch.rpmrpm -ivh http://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-stable.noarch.rpmyum update Â Â Â 

è¾“å…¥ä¸Šé¢çš„æŒ‡ä»¤ä¹‹åï¼Œåªè¦é€‰æ‹©ä¸€ä¸ªmp3æ ¼å¼æ–‡ä»¶çš„åŒå‡»æ’­æ”¾ï¼Œå°±èƒ½æˆåŠŸçš„æ‰¾åˆ°mp3æ’ä»¶ï¼Œé€‰æ‹©å®‰è£…ï¼Œå°±å¥½äº†ï¼Œç„¶åé€‰æ‹©ä¸€ä¸ªwmaæ ¼å¼çš„æ–‡ä»¶åŒå‡» ï¼Œå°±ä¼šè‡ªåŠ¨çš„å»ä¸‹è½½wmaçš„æ’ä»¶ã€‚
åˆ é™¤å›¾æ ‡ä»¥å‰åœ¨Fedora15ä¸­ç”¨wineå®‰è£…äº†ä¸€ä¸ªCSå’Œè¿…é›·7ï¼Œä½†è¿è¡Œä¸å¤ªæµç•…ï¼Œæ‰€ä»¥æƒ³è¦åˆ æ‰é¢æ¿ä¸Šç›¸å…³çš„å›¾æ ‡ã€‚å…·ä½“å‘½ä»¤å¦‚ä¸‹ã€‚
1ã€cd Â  ~/.local/share/applications/wine/Programs/2ã€ls æŸ¥çœ‹ç›®å½•3ã€rm -r *é€’å½’åˆ é™¤æ‰€æœ‰çš„é¡¹ç›®ã€‚
å¸¸ç”¨å‘½ä»¤yum install gccyum install gcc-c++yum install vimrpm -ivh adobe-release-i386-1.0-1.noarch.rpm yum install flash-pluginyum install lib* --setopt=protect_multilib=false --skip broken
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Word2010å‘å¸ƒWordPressåšå®¢æ–‡ç« </title>
    <url>/dev-word2010-deploy-wordpress-article/</url>
    <content><![CDATA[ç”¨word2010ç¼–è¾‘å‘å¸ƒwordpressåšå®¢æ–‡ç« 1ã€æ‰“å¼€wordï¼Œé€‰æ‹©æ–°å»ºåšå®¢æ–‡ç« 


2ã€å¦‚æœä¹‹å‰æ²¡æœ‰ç”¨wordå‘å¸ƒè¿‡æ–‡ç« ï¼Œä¼šæç¤ºä½ æ³¨å†Œåšå®¢è´¦æˆ·
3ã€é€‰æ‹©ç«‹å³æ³¨å†Œï¼Œç„¶åé€‰æ‹©åšå®¢æä¾›å•†ï¼Œåœ¨æ­¤æˆ‘ä»¬é€‰æ‹©wordpress
4ã€æŠŠä¸‹é¢è¿™å¼ è¡¨æ ¼å¡«å†™å®Œæ•´ï¼Œå°±åƒæˆ‘ç»™å‡ºçš„ä¾‹å­é‚£æ ·
5ã€ç‚¹å‡»ç¡®å®šï¼Œç­‰å‡ ç§’é’Ÿä¼šæç¤ºâ€œè´¦æˆ·æ³¨å†ŒæˆåŠŸâ€ã€‚
6ã€ç„¶åæˆ‘ä»¬å°±å¯ä»¥ç”¨wordæ¥ç¼–è¾‘æ–‡ç« ï¼Œç¼–è¾‘å¥½ä¹‹åï¼Œç„¶åç‚¹å‡»å·¦ä¸Šè§’çš„â€œå‘å¸ƒâ€ï¼Œå°±ä¼šå‡ºç°æç¤ºï¼šâ€œæ­¤æ–‡ç« å·²äºæŸæ—¶é—´å‘å¸ƒåˆ°æŸç½‘ç«™ä¸Šäº†â€ã€‚
7ã€æŸ¥çœ‹è‡ªå·±çš„ç½‘ç«™ï¼Œä¼šå‘ç°æœç„¶å‘å¸ƒæˆåŠŸï¼Œä¸€åˆ‡å¦‚æ­¤ç®€å•ï¼å‘å¸ƒåçš„æ–‡ç« å±äºUncategorizedåˆ†ç±»ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±åœ¨ç½‘ç«™ä¸Šä¿®æ”¹åˆ†ç±»ï¼Œè¿™æ ·å°±å¤§åŠŸå‘Šæˆäº†ï¼
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>wordpress</tag>
        <tag>word</tag>
      </tags>
  </entry>
  <entry>
    <title>WordPressé¦–é¡µæ’­æ”¾éŸ³ä¹</title>
    <url>/dev-wordpress-music/</url>
    <content><![CDATA[Wordpressé¦–é¡µè‡ªåŠ¨æ’­æ”¾éŸ³ä¹æœ€ç®€å•æ–¹æ³•1ã€ç™»é™†flashç½‘é¡µmp3æ’­æ”¾å™¨ä»£ç ç”Ÿæˆå™¨ç½‘ç«™ï¼Œæ¯”å¦‚http://www.51119.com/play/

2ã€é€‰æ‹©ä¸€ç§æ’­æ”¾å™¨æ ¼å¼
3ã€å¯»æ‰¾MP3å¤–é“¾ï¼Œå¯ä»¥åˆ°è¿™ä¸ªç½‘ç«™http://www.111ttt.com/up/å»å¯»æ‰¾ï¼Œæ‰¾åˆ°çš„å¤–é“¾åƒè¿™ç§http://sc.111ttt.com/up/mp3/5060/973D42EA0271C8E4A1E9421D9AD2890E.mp34ã€ç²˜è´´åˆ°â€œMP3åœ°å€â€é‚£ä¸€æ ä¸­ï¼Œç®€å•è®¾ç½®åæäº¤ï¼Œç»“æœå¦‚ä¸‹
5ã€å¤åˆ¶htmlä»£ç ï¼Œæ¥ç€ï¼Œåˆ°WordPressæ§åˆ¶å°ä¸‹ï¼Œåœ¨â€œå¤–è§‚ï¼ˆAppearanceï¼‰â€é€‰é¡¹é‡Œæ‰¾åˆ°â€œå°å·¥å…·ï¼ˆWidgetsï¼‰â€ï¼Œç‚¹å‡»è¿›å…¥ï¼Œç„¶åæ‹–æ”¾ä¸€ä¸ªâ€œæ–‡æœ¬ï¼ˆTextï¼‰â€å°å·¥å…·æ”¾åˆ°è¾¹æ ï¼ˆSidebarï¼‰é‡Œï¼Œåœ¨æ–‡æœ¬æ¡†è¾“å…¥åŒºåŸŸç²˜è´´ä»£ç å³å¯ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>wordpress</tag>
      </tags>
  </entry>
  <entry>
    <title>WordPressä½¿ç”¨è¯´æ˜</title>
    <url>/dev-wordpress-illustration/</url>
    <content><![CDATA[WordPressä½¿ç”¨è¯´æ˜å‰è¨€WordPressæ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æºé¡¹ç›®ï¼Œåœ¨GNUé€šç”¨å…¬å…±è®¸å¯è¯ä¸‹æˆæƒå‘å¸ƒã€‚æ˜¯ä¸€ä¸ªæ³¨é‡ç¾å­¦ã€æ˜“ç”¨æ€§å’Œç½‘ç»œæ ‡å‡†çš„ä¸ªäººä¿¡æ¯å‘å¸ƒå¹³å°ã€‚ç®€ä½“ä¸­æ–‡å®˜ç½‘ï¼šhttp://cn.wordpress.org
å½“å¹´ï¼Œåˆšå¼€å§‹æ¥è§¦å»ºç«™ï¼Œå’ŒWordPressç•™ä¸‹äº†ä¸€æ®µéš¾å¿˜çš„æ—¶å…‰ã€‚
æœ¬åœ°ç¯å¢ƒç”±äºWordPresssæ˜¯ä½¿ç”¨PHPè¯­è¨€å’ŒMySQLæ•°æ®åº“å¼€å‘çš„ã€‚æ‰€ä»¥ï¼Œæœ¬åœ°æ­å»ºæµ‹è¯•ç¯å¢ƒï¼Œéœ€è¦PHPå’ŒMySQLã€‚

è¿™é‡Œæ¨èä¸¤ä¸ªå¥—ä»¶ï¼š1ã€XAMPPhttps://www.apachefriends.org/index.html
2ã€ServKitï¼ˆæ›¾ç»å«åšPHPnowï¼‰http://servkit.org/
æœ¬åœ°é—®é¢˜è§£å†³1ã€Attempting to start Tomcat serviceâ€¦åŒå‡»tomcat7.exeï¼Œæç¤ºä¸æ˜¯æœ‰æ•ˆçš„32ä½ç¨‹åºã€‚ä½†æ˜¯åœ¨å‘½ä»¤è¡Œæ•²startupå¯ä»¥æ­£å¸¸å¯åŠ¨ã€‚è‡ªæˆ‘æ„Ÿè§‰æœ€å¥½çš„è§£å†³åŠæ³•æ˜¯æŠŠå¯ä»¥æ­£å¸¸ä½¿ç”¨çš„tomcatæ–‡ä»¶å¤¹æ›¿æ¢æ‰xamppçš„tomcatæ–‡ä»¶å¤¹ã€‚
2ã€å®‰è£…xamppåapacheä¸èƒ½å¯åŠ¨è§£å†³æ–¹æ³•http://blog.csdn.net/kunlong0909/article/details/7716715
3ã€MySQL Service detected with wrong pathé¦–å…ˆéœ€è¦ä¿®æ”¹ä¸€ä¸‹ç¯å¢ƒå˜é‡ã€‚åº”è¯¥æ˜¯åœ¨å®‰è£…xamppä¹‹å‰ç”µè„‘ä¸Šè£…è¿‡mysqlï¼Œç„¶åé»˜è®¤å¯åŠ¨çš„æ˜¯ä»¥å‰çš„mysqlã€‚ä¿®æ”¹æ³¨å†Œè¡¨[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\MySQL]çš„ImagePathä¿®æ”¹æˆæ–°çš„xamppä¸­ä½ç½®\mysql\bin\mysqld MySQLé‡å¯explorer.exeè¿›ç¨‹ï¼Œä½¿æ³¨å†Œè¡¨ç”Ÿæ•ˆå†æ¬¡ç‚¹å‡» mysql åè¾¹çš„startï¼ŒOKï¼mysqlæœåŠ¡æ­£å¸¸å¯åŠ¨ï¼ 
4ã€å®‰è£…wordpressè¿‡ç¨‹ä¸­ï¼Œè®¿é—®wp-admin/install.phpå‡ºé”™ï¼šæ•°æ®åº“è¿æ¥é”™è¯¯ã€‚æ‚¨åœ¨wp-config.phpæ–‡ä»¶ä¸­æä¾›çš„æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç å¯èƒ½ä¸æ­£ç¡®crifançš„åšå®¢
ä¼˜åŒ–1ã€åœ¨wordpressåŠŸèƒ½ç‰ˆå—æœ‰ç™»å…¥\ç™»å‡ºï¼Œç®¡ç†ï¼ŒFeedä»¥å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªwordpressï¼Œå¦‚ä½•åˆ é™¤å®ƒä»¬å‘¢ï¼Œçœ‹èµ·æ¥ä½¿åšå®¢çš„æ‰€æœ‰é“¾æ¥å®é™…æœ‰ç”¨ï¼æ‰¾åˆ°ç½‘ç«™wordpresså®‰è£…ç›®å½•ï¼Œåœ¨wp_includesæ–‡ä»¶å¤¹ä¸‹é¢æœ‰ä¸€ä¸ªdefault-widgets.phpçš„æ–‡ä»¶ï¼Œåœ¨æ­¤æ–‡ä»¶é‡Œæœç´¢æŸ¥æ‰¾æ ‡ç­¾é‡Œå¸¦æœ‰rss2_urlï¼Œcomments_rss2_urlï¼Œwordpress.orgçš„ä¸‰æ®µä»£ç å…¨éƒ¨åˆ é™¤æ‰ã€‚
2ã€WordPressæ–‡ç« ç½®é¡¶1ã€å†™å¥½æ–‡ç« å¹¶å‘å¸ƒã€‚2ã€ç‚¹å‡»åšå®¢åå°æ–‡ç« èœå•ä¸‹çš„â€œç¼–è¾‘â€é€‰é¡¹ï¼Œè¿›å…¥æ–‡ç« åˆ—è¡¨ã€‚3ã€æŠŠé¼ æ ‡ç§»åˆ°éœ€è¦ç½®é¡¶çš„æ–‡ç« ä¸Šï¼Œç‚¹å‡»â€œå¿«é€Ÿç¼–è¾‘â€é€‰é¡¹ã€‚4ã€åœ¨å¿«é€Ÿç¼–è¾‘ä¸‹â€œä¿æŒè¿™ç¯‡æ–‡ç« ç½®é¡¶â€å‰é¢çš„å°æ¡†æ‰“å‹¾ï¼Œç„¶åç‚¹å‡»æ›´æ–°æ–‡ç« ã€‚5ã€æ›´æ–°æ–‡ç« åï¼Œæ‰“å¼€åšå®¢é¦–é¡µå°±ä¼šå‘ç°æ–‡ç« çš„ç½®é¡¶çŠ¶æ€äº†ã€‚Tipsï¼šé™¤äº†ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨WordPreeçš„ä¸€äº›æ–‡ç« ç½®é¡¶æ’ä»¶ï¼Œç›¸å¯¹æ¥è¯´å¯èƒ½ä¼šæ–¹ä¾¿è®¸å¤šï¼Œåœ¨è¿™é‡Œä¸åšæ¨èã€‚
3ã€WordPressè¯„è®ºæ¡†ä¸‹æ–¹â€œæ‚¨å¯ä»¥ä½¿ç”¨è¿™äº› HTML æ ‡ç­¾å’Œå±æ€§â€æ–‡å­—å»é™¤æ‰¾åˆ°wp-includes/comment-template.phpÂ æŸ¥æ‰¾ï¼šecho $args[â€˜comment_notes_afterâ€™];æ³¨é‡Šæ‰å®ƒï¼ˆä¹Ÿå¯ä»¥ç›´æ¥åˆ é™¤ï¼‰ã€‚
å‚è€ƒæ–‡æ¡£PHP æ‰‹å†Œhttp://php.net/manual/zh/

WordPressä¸­æ–‡æ–‡æ¡£ | WordPresså•¦http://www.wordpress.la/codex.html

WordPresså®˜æ–¹ä¸­æ–‡æ–‡æ¡£http://codex.wordpress.org/zh-cn:Main_Page

WordPressè¿æ¥å¾®åš:ä¸ªäººåšå®¢å¼€æ”¾åŒ–ç­–ç•¥å¾®åšQQç™¾åº¦è´¦å·ç™»å½•http://www.freehao123.com/wordpress-weibo-qq/

æ€æ ·åœ¨wordpressç½‘ç«™æ·»åŠ å°å·¥å…·http://www.zhidao91.com/wordpress-add-widget-area/

å¦‚ä½•è½»æ¾çš„åœ¨ä½ çš„wordpressç½‘ç«™æ·»åŠ é™„åŠ å°å·¥å…·æˆ–è€…å¯¼èˆªåŒºåŸŸhttp://www.ylsay029.com/how-to-add-widget-or-navigation-areas-wordpress-website.htmlhttp://www.douban.com/note/285551052/

æ–°ç‰ˆäº¬ä¸œäº‘æ“JAEäº‘ç©ºé—´ç”³è¯·ä½¿ç”¨å’Œå®‰è£…è¿è¡ŒWordPressåšå®¢http://www.freehao123.com/jae-wordpress/

å¢å¼ºWordpressç¼–è¾‘å™¨åŠŸèƒ½æœ€ç®€ä¾¿çš„æ–¹æ³•http://jingyan.baidu.com/article/7c6fb42841891b80652c906b.html

ä¸¤æ­¥æå®šWordPresså¤šåŒºåŸŸwidgethttp://www.wordpress.la/widgetize-wordpress-theme.htmlhttp://www.veryhuo.com/a/view/15116.html

WordPress åšå®¢æ·»åŠ ä¸ªæ€§æ ‡å¿—favicon.icohttp://www.chinaz.com/web/2010/0928/135480.shtml

ä¸­æ–‡ç‰ˆæ ‡ç­¾äº‘æ’ä»¶ï¼šwp-cumulushttp://plugins.wopus.org/content/tagplugin/146.html

29ä¸ªå®ç”¨çš„WordPressä¸»é¢˜å‡½æ•°ä½¿ç”¨æŠ€å·§.pdfã€WordPressä¸»é¢˜æ•™ç¨‹.pdfã€WordPress_ä¸»é¢˜æ¨¡æ¿åˆ¶ä½œåŠä¿®æ”¹æ•™ç¨‹.pdfhttp://yunpan.cn/cVbAQzcvut7FS  è®¿é—®å¯†ç  dd25

wordpressä»£ç è°ƒç”¨å¤§å…¨æ›´æ–°åˆ°_3.0ç‰ˆ.pdfã€WordPressé«˜çº§æ•™ç¨‹.pdfã€å¦‚ä½•ç”¨WORDPRESSæ”¹æˆCMSæ¥å¼€å‘ä¼ä¸šç«™.pdfhttp://yunpan.cn/cVbAqs5Bd32pS  è®¿é—®å¯†ç  82bc

]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>php</tag>
        <tag>wordpress</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenShiftä½¿ç”¨è¯´æ˜</title>
    <url>/dev-openshift-illustration/</url>
    <content><![CDATA[å‰è¨€éƒåŒå­¦çš„ç¬¬ä¸€ä¸ªç½‘ç«™ï¼Œä½¿ç”¨WordPressï¼Œæ­å»ºåœ¨OpenShiftä¸Šé¢ã€‚OpenShiftå‡ºèº«RedHatï¼Œç¨³å®šæ€§å’ŒåŠŸèƒ½æ€§éƒ½å¾ˆniceã€‚
å®˜ç½‘ï¼šhttps://www.openshift.com


å¸¸ç”¨å‘½ä»¤äº‘æœåŠ¡å™¨æ€»æ˜¯å‡ºé—®é¢˜ï¼Œå¯ä»¥æ¥è¿™é‡Œè¯•è¯•openshiftçš„å‘½ä»¤æ¥æ£€æŸ¥æµ‹è¯•
gem install rhcå®‰è£…rhc
gem update rhcæ›´æ–°rhcç‰ˆæœ¬
rhc-chkæ£€æµ‹æœ¬åœ°ç¯å¢ƒé…ç½®
rhc-user-infoæ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯
rhc-create-domainï¼šåˆ›å»ºä¸ªäººåŸŸ
rhc-create-appåˆ›å»ºåº”ç”¨
rhc-snapshotåº”ç”¨å¤‡ä»½
rhc-tail-filesæŸ¥çœ‹åº”ç”¨æ—¥å¿—
openshift: rhc setupç™»å½•
rhc app create -a  app_name -t php-5.3åˆ›å»ºphpåº”ç”¨
rhc app create -a wordpress -t php-5.3åˆ›å»ºwordpress
wordpressæ·»åŠ mysqlæ”¯æŒï¼šrhc app cartridge add -a wordpress -c mysql-5.1åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰åº”ç”¨ï¼šrhc-create-app -a  app_name -t diy-0.1åˆ›å»ºå‘½åç©ºé—´ï¼šrhc domain create -n mydomain -l rhloginåˆ›å»ºphpmyadminï¼šrhc app cartridge add -a  app_name -c phpmyadmin-3.4ç»‘å®šåŸŸå:rhc alias add appname domianåˆ é™¤ç»‘å®šåŸŸå: rhc alias removeappname domianå¦‚æœä½ æ˜¯åˆ›å»ºä¸€ä¸ªwordpressï¼Œéœ€è¦MongoDBæ”¯æŒï¼Œå¯ä»¥è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼šrhc app cartridge add -a wordpress -c mongodb-2.2
å¯åŠ¨åº”ç”¨ç¨‹åºï¼šctl_app startåœæ­¢åº”ç”¨ç¨‹åºï¼šctl_app stopé‡å¯åº”ç”¨ç¨‹åºï¼šctl_app restartæŸ¥çœ‹åº”ç”¨ç¨‹åºï¼šctl_app status
å¯åŠ¨åº”ç”¨ç¨‹åºï¼šctl_all startåœæ­¢åº”ç”¨ç¨‹åºï¼šctl_all stopé‡å¯åº”ç”¨ç¨‹åºï¼šctl_all restartæŸ¥çœ‹åº”ç”¨ç¨‹åºï¼šctl_all status
ä¹¦ç­¾Red Hatè€ç”¨æˆ·çš„OpenShiftåˆä½“éªŒ
OpenShiftçº¢å¸½å…è´¹äº‘ç©ºé—´ç”³è¯·ã€WordPresså®‰è£…(å›¾æ–‡æ•™ç¨‹)
RedHat Openshift æ­å»ºä¸ªäººåšå®¢(wordpress)æŒ‡å—
OpenShift Redhatå…è´¹ç©ºé—´SSHç™»å½•ç®¡ç†å’Œä½¿ç”¨:ä¸‹è½½æ–‡ä»¶å®‰è£…ç¨‹åºå’Œåº”ç”¨
OpenShift redhatæ¨å‡ºPaaSäº‘è®¡ç®—åº”ç”¨å¹³å°æ”¯æŒPHPã€Javaã€MySQL
openshiftå…è´¹ç©ºé—´ç»‘å®šé¡¶çº§åŸŸå
å‹å¥½é¢å¯¹å¼€å‘è€… OpenShiftåŠ å…¥æ›´å¤šæ–°å…ƒç´ 
OpenShiftå…è´¹ç©ºé—´å®‰è£…PhpMyadminåŠSQLæ•°æ®åº“ç®¡ç†ï¼ˆå›¾æ–‡æ•™ç¨‹ï¼‰
OpenShiftæ¨å‡ºæ”¶è´¹ä¸šåŠ¡å’Œè§£å†³OpenShiftç©ºé—´æ‰“ä¸å¼€å’ŒSSHæ— æ³•è¿æ¥
]]></content>
      <categories>
        <category>engineering</category>
        <category>uncategories</category>
      </categories>
      <tags>
        <tag>wordpress</tag>
      </tags>
  </entry>
  <entry>
    <title>yumå‘½ä»¤</title>
    <url>/dev-yum-command/</url>
    <content><![CDATA[é€šè¿‡yumå®‰è£…å’Œåˆ é™¤RPMåŒ…å®‰è£…rpmåŒ…,å¦‚dhcpyum install dhcp
åˆ é™¤rpmåŒ…,åŒ…æ‹¬ä¸è¯¥åŒ…æœ‰ä¾èµ–æ€§çš„åŒ…yum remove licqæ³¨æ„:åŒæ—¶ä¼šæç¤ºåˆ é™¤licq-gnome,licq-qt,licq-text
é€šè¿‡yumå·¥å…·æ›´æ–°è½¯ä»¶åŒ…æ£€æŸ¥å¯æ›´æ–°çš„rpmåŒ…ï¼šyum check-update
æ›´æ–°æ‰€æœ‰çš„rpmåŒ…ï¼šyum update

æ›´æ–°æŒ‡å®šçš„rpmåŒ…,å¦‚æ›´æ–°kernelå’Œkernel sourceï¼šyum update kernel kernel-source
å¤§è§„æ¨¡çš„ç‰ˆæœ¬å‡çº§,ä¸yum updateä¸åŒçš„æ˜¯,é™ˆæ—§çš„æ·˜æ±°çš„åŒ…ä¹Ÿä¼šå‡çº§ï¼šyum upgrade
é€šè¿‡yumæŸ¥è¯¢RPMåŒ…ä¿¡æ¯åˆ—å‡ºèµ„æºåº“ä¸­æ‰€æœ‰å¯ä»¥å®‰è£…æˆ–æ›´æ–°çš„rpmåŒ…çš„ä¿¡æ¯ï¼šyum info
åˆ—å‡ºèµ„æºåº“ä¸­æ‰€æœ‰å¯ä»¥æ›´æ–°çš„rpmåŒ…çš„ä¿¡æ¯ï¼šyum info updates
åˆ—å‡ºå·²ç»å®‰è£…çš„æ‰€æœ‰çš„rpmåŒ…çš„ä¿¡æ¯ï¼šyum info installed
åˆ—å‡ºå·²ç»å®‰è£…çš„ä½†æ˜¯ä¸åŒ…å«åœ¨èµ„æºåº“ä¸­çš„rpmåŒ…çš„ä¿¡æ¯ï¼šyum info extrasæ³¨ï¼šä¹Ÿå°±æ˜¯é€šè¿‡å…¶å®ƒç½‘ç«™ä¸‹è½½å®‰è£…çš„rpmåŒ…çš„ä¿¡æ¯ã€‚
åˆ—å‡ºèµ„æºåº“ä¸­æ‰€æœ‰å¯ä»¥å®‰è£…æˆ–æ›´æ–°çš„rpmåŒ…çš„ä¿¡æ¯ï¼šyum list
åˆ—å‡ºèµ„æºåº“ä¸­ç‰¹å®šçš„å¯ä»¥å®‰è£…æˆ–æ›´æ–°ä»¥åŠå·²ç»å®‰è£…çš„rpmåŒ…çš„ä¿¡æ¯ï¼šyum list sendmailyum list gcc*æ³¨æ„ï¼šå¯ä»¥åœ¨rpmåŒ…åä¸­ä½¿ç”¨åŒ¹é…ç¬¦ï¼Œ å¦‚ä¸Šé¢ä¾‹å­æ˜¯åˆ—å‡ºæ‰€æœ‰ä»¥gccå¼€å¤´çš„rpmåŒ…çš„ä¿¡æ¯ã€‚
æœç´¢åŒ¹é…ç‰¹å®šå­—ç¬¦çš„rpmåŒ…çš„è¯¦ç»†ä¿¡æ¯ï¼šyum search wgetæ³¨æ„ï¼šå¯ä»¥é€šè¿‡â€œsearchâ€åœ¨rpmåŒ…åï¼ŒåŒ…æè¿°ä¸­è¿›è¡Œæœç´¢ã€‚
æœç´¢åŒ…å«ç‰¹å®šæ–‡ä»¶åçš„rpmåŒ…ï¼šyum provides realplay
é€šè¿‡yumæ“ä½œæš‚å­˜ä¿¡æ¯ï¼ˆ/var/cache/yumï¼‰æ¸…é™¤æš‚å­˜çš„rpmåŒ…æ–‡ä»¶ï¼šyum clean packages
æ¸…é™¤æš‚å­˜çš„rpmå¤´æ–‡ä»¶ï¼šyum cleanÂ  headers
Â æ¸…é™¤æš‚å­˜ä¸­æ—§çš„rpmå¤´æ–‡ä»¶å’ŒåŒ…æ–‡ä»¶ï¼šyum cleanÂ  all
Redhat Linuxä¸‹ç”¨yumå‡çº§ç³»ç»Ÿyumä¹Ÿå¯ä»¥å‡çº§Redhat Linuxç³»ç»Ÿï¼Œåœ¨Redhat Linuxç³»ç»Ÿå®‰è£…ç›˜ä¸­é»˜è®¤æ²¡æœ‰yumçš„å®‰è£…åŒ…ï¼Œç”±äºRedhat Linuxä¸Centos LinuxåŸºæœ¬ä¸€è‡´ï¼Œå› æ­¤å¯ä»¥ç”¨åŒç‰ˆæœ¬åŒå†…æ ¸çš„Centos Linuxçš„yumåŒ…åœ¨Redhat Linuxä¸Šè¿›è¡Œå®‰è£…ã€‚å®‰è£…è¿‡ç¨‹åœ¨ä¸Šé¢ç« èŠ‚å·²ç»è®²è¿°ï¼Œè¿™é‡Œä¸åœ¨å¤šè¯´ã€‚ç”±äºä½¿ç”¨çš„æ˜¯Centos Linuxçš„yumåŒ…åœ¨Redhat Linuxä¸‹è¿›è¡Œçš„å®‰è£…ï¼Œå› æ­¤åœ¨Redhat Linuxä¸‹éœ€è¦å¢åŠ èµ„æºåº“ï¼Œå®šä¹‰yumçš„éå®˜æ–¹åº“æ–‡ä»¶ï¼Œè®©ä¸€äº›å¿…éœ€çš„è½¯ä»¶åŒ…é€šè¿‡yumä¹Ÿèƒ½å¤Ÿå®‰è£…ã€‚é¦–å…ˆå»ºç«‹dag.repoï¼Œå®šä¹‰éå®˜æ–¹åº“ï¼švi /etc/yum.repos.d/dag.repo
[dag]name=Dag RPM Repository for RHEL4baseurl=http://ftp.riken.jp/Linux/dag/redhat/el4/en/$basearch/dag/enabled=1gpgcheck=1
æ¥ç€å¯¼å…¥éå®˜æ–¹åº“çš„GPGï¼šrpm --import  http://ftp.riken.jp/Linux/caos/centos/RPM-GPG-KEY-centos4æ³¨æ„ï¼šæ­¤æ­¥éª¤å¾ˆé‡è¦ï¼Œå¦‚æœæ²¡æœ‰å¯¼å…¥æˆæƒçš„RPM-GPG-KEYï¼Œåœ¨ä½¿ç”¨yumå‡çº§å®‰è£…è½¯ä»¶æ—¶å°±ä¼šæç¤ºè½¯ä»¶ä¸åˆæ³•ï¼Œç»“åˆä¸Šä¸‹æ–‡å¯ä»¥çœ‹å‡ºï¼Œåœ¨Centosä¸‹è¿›è¡Œyumé…ç½®çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰æ¶‰åŠåˆ°å¯¼å…¥RPM-GPG-KEYï¼Œé‚£æ˜¯å› ä¸ºè¿æ¥çš„èµ„æºåº“ä¸ºCentoså®˜æ–¹çš„åº“ï¼Œè€Œå‡çº§çš„ç³»ç»Ÿä¹Ÿæ˜¯Centosï¼Œå½“ç„¶æ— éœ€æˆ æƒï¼Œè€Œè¿™é‡Œæˆ‘ä»¬å‡çº§çš„ç³»ç»Ÿæ˜¯Redhat Linuxï¼Œè€Œç”¨çš„èµ„æºæ–‡ä»¶æ˜¯Centosçš„ï¼Œæ‰€ä»¥å¿…é¡»å¯¼å…¥Centosçš„RPM-GPG-KEYï¼Œç³»ç»Ÿæ‰è®¤ä¸ºå‡çº§çš„åŒ…æ˜¯åˆæ³•çš„ã€‚ 
æœ€åï¼Œå°±å¯ä»¥ä½¿ç”¨éå®˜æ–¹å®šä¹‰çš„rpmåŒ…å‡çº§ç³»ç»Ÿï¼šyum update
å®è·µyum install vimyum install gccyum install gcc-c++]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>centos</tag>
      </tags>
  </entry>
  <entry>
    <title>ORA-01033</title>
    <url>/dev-ora-01033/</url>
    <content><![CDATA[è½¬è½½è‡ªç™¾åº¦ç™¾ç§‘
1ã€è¿›å…¥CMDï¼Œæ‰§è¡Œset ORACLE_SID=ORCLï¼Œç¡®ä¿è¿æ¥åˆ°æ­£ç¡®çš„SIDï¼›2ã€å‘½ä»¤çª—å£è¿è¡Œsqlplus â€œ/as sysdbaâ€ å¯åŠ¨çª—å£ä¹‹åæ˜¾ç¤ºå¦‚ä¸‹ä¿¡æ¯
SQL*Plus: Release 11.1.0.7.0 - Production on æ˜ŸæœŸä¸‰ 3æœˆ 6 17:17:53 2013Copyright (c) 1982, 2008, Oracle. All rights reserved.
è¿æ¥åˆ°:Oracle Database 11g Enterprise Edition Release 11.1.0.7.0 - ProductionWith the Partitioning, OLAP, Data Mining and Real Application Testing optionsSQL&gt;3ã€åœæ­¢æœåŠ¡ shutdown immediateSQL&gt; shutdown immediateORA-01109: æ•°æ®åº“æœªæ‰“å¼€

å·²ç»å¸è½½æ•°æ®åº“ã€‚ORACLE ä¾‹ç¨‹å·²ç»å…³é—­ã€‚4ã€ å¯åŠ¨æœåŠ¡ startup è§‚å¯Ÿå¯åŠ¨æ—¶æœ‰æ— æ•°æ®æ–‡ä»¶åŠ è½½æŠ¥é”™ï¼Œå¹¶è®°ä½å‡ºé”™æ•°æ®æ–‡ä»¶æ ‡å·SQL&gt; startupORACLE ä¾‹ç¨‹å·²ç»å¯åŠ¨ã€‚Total System Global Area 535662592 bytesFixed Size 1348508 bytesVariable Size 272632932 bytesDatabase Buffers 255852544 bytesRedo Buffers 5828608 bytesæ•°æ®åº“è£…è½½å®Œæ¯•ã€‚ORA-16038: æ—¥å¿— 2 sequence# 59 æ— æ³•å½’æ¡£ORA-19809: è¶…å‡ºäº†æ¢å¤æ–‡ä»¶æ•°çš„é™åˆ¶ORA-00312: è”æœºæ—¥å¿— 2 çº¿ç¨‹ 1: â€˜D:\APP\EN\ORADATA\ORCL\REDO02.LOGâ€™
5ã€æ£€æŸ¥å‡ºé”™æ—¥å¿—æ‰€åœ¨çš„ç»„SQL&gt; select group#,sequence#,archived,status from v$log;GROUP# SEQUENCE# ARC STATUS

1 61 NO CURRENT3 60 NO INACTIVE2 59 NO INACTIVE6ã€ä¿®å¤å‡ºé”™çš„ç»„æ—¥å¿—ä¿¡æ¯SQL&gt; alter database clear unarchived logfile group 2;æ•°æ®åº“å·²æ›´æ”¹ã€‚7ã€æ‰“å¼€æ•°æ®åº“SQL&gt; alter database open;æ•°æ®åº“å·²æ›´æ”¹ã€‚SQL&gt;
]]></content>
      <categories>
        <category>engineering</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxå„ç‰ˆæœ¬æ¯”è¾ƒ</title>
    <url>/hobby-linux-version-comparison/</url>
    <content><![CDATA[
Linuxçš„æ ¸å¿ƒæœ€æ—©ç”±Linus Benedict Torvaldsåœ¨1991å¹´å¼€å‘å‡ºæ¥ã€‚åœ¨è¿™ä¹‹å‰ï¼ŒRichard Stallmanåˆ›å»ºäº†Free Software Foundationï¼ˆFSFï¼‰ç»„ç»‡ä»¥åŠGNUé¡¹ç›®ï¼Œå¹¶ä¸æ–­çš„ç¼–å†™åˆ›å»ºGNUç¨‹åºï¼ˆæ­¤ç±»ç¨‹åºçš„è®¸å¯æ–¹å¼å‡ä¸ºGPL: General Public Licenseï¼‰ã€‚åœ¨ä¸æ–­çš„æœ‰æ°å‡ºçš„ç¨‹åºå‘˜å’Œå¼€å‘è€…åŠ å…¥åˆ°GNUç»„ç»‡ä¸­åï¼Œä¾¿é€ å°±äº†ä»Šå¤©æˆ‘ä»¬æ‰€çœ‹åˆ°çš„Linuxï¼Œæˆ–ç§°GNU/Linuxã€‚


Linuxçš„å‘è¡Œç‰ˆæœ¬å¯ä»¥å¤§ä½“åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯å•†ä¸šå…¬å¸ç»´æŠ¤çš„å‘è¡Œç‰ˆæœ¬ï¼Œä¸€ç±»æ˜¯ç¤¾åŒºç»„ç»‡ç»´æŠ¤çš„å‘è¡Œç‰ˆæœ¬ï¼Œå‰è€…ä»¥è‘—åçš„Redhatï¼ˆRHELï¼‰ä¸ºä»£è¡¨ï¼Œåè€…ä»¥ Debianä¸ºä»£è¡¨ã€‚ä¸‹é¢ä»‹ç»ä¸€ä¸‹å„ä¸ªå‘è¡Œç‰ˆæœ¬çš„ç‰¹ç‚¹ï¼šRedhatï¼Œåº”è¯¥ç§°ä¸ºRedhatç³»åˆ—ï¼ŒåŒ…æ‹¬RHEL(Redhat Enterprise Linuxï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„Redhat Advance Serverï¼Œæ”¶è´¹ç‰ˆæœ¬)ã€Fedora Core(ç”±åŸæ¥çš„Redhatæ¡Œé¢ç‰ˆæœ¬å‘å±•è€Œæ¥ï¼Œå…è´¹ç‰ˆæœ¬)ã€CentOS(RHELçš„ç¤¾åŒºå…‹éš†ç‰ˆæœ¬ï¼Œå…è´¹)ã€‚Redhatåº”è¯¥è¯´æ˜¯åœ¨å›½å†…ä½¿ç”¨äººç¾¤æœ€å¤šçš„Linuxç‰ˆæœ¬ï¼Œç”šè‡³æœ‰äººå°†Redhatç­‰åŒäºLinuxï¼Œè€Œæœ‰äº›è€é¸Ÿæ›´æ˜¯åªç”¨è¿™ä¸€ä¸ªç‰ˆæœ¬çš„Linuxã€‚æ‰€ä»¥è¿™ä¸ªç‰ˆæœ¬çš„ç‰¹ç‚¹å°±æ˜¯ä½¿ç”¨äººç¾¤æ•°é‡å¤§ï¼Œèµ„æ–™éå¸¸å¤šï¼Œè¨€ä¸‹ä¹‹æ„å°±æ˜¯å¦‚æœä½ æœ‰ä»€ä¹ˆä¸æ˜ç™½çš„åœ°æ–¹ï¼Œå¾ˆå®¹æ˜“æ‰¾åˆ°äººæ¥é—®ï¼Œè€Œä¸”ç½‘ä¸Šçš„ä¸€èˆ¬Linuxæ•™ç¨‹éƒ½æ˜¯ä»¥Redhatä¸ºä¾‹æ¥è®²è§£çš„ã€‚Redhatç³»åˆ—çš„åŒ…ç®¡ç†æ–¹å¼é‡‡ç”¨çš„æ˜¯åŸºäºRPMåŒ…çš„YUMåŒ…ç®¡ç†æ–¹å¼ï¼ŒåŒ…åˆ†å‘æ–¹å¼æ˜¯ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ç¨³å®šæ€§æ–¹é¢RHELå’ŒCentOSçš„ç¨³å®šæ€§éå¸¸å¥½ï¼Œé€‚åˆäºæœåŠ¡å™¨ä½¿ç”¨ï¼Œä½†æ˜¯Fedora Coreçš„ç¨³å®šæ€§è¾ƒå·®ï¼Œæœ€å¥½åªç”¨äºæ¡Œé¢åº”ç”¨ã€‚
Debianï¼Œæˆ–è€…ç§°Debianç³»åˆ—ï¼ŒåŒ…æ‹¬Debianå’ŒUbuntuç­‰ã€‚Debianæ˜¯ç¤¾åŒºç±»Linuxçš„å…¸èŒƒï¼Œæ˜¯è¿„ä»Šä¸ºæ­¢æœ€éµå¾ªGNUè§„èŒƒçš„Linuxç³»ç»Ÿã€‚Debianæœ€æ—©ç”±Ian Murdockäº1993å¹´åˆ›å»ºï¼Œåˆ†ä¸ºä¸‰ä¸ªç‰ˆæœ¬åˆ†æ”¯ï¼ˆbranchï¼‰ï¼š stable, testingå’Œunstableã€‚å…¶ä¸­ï¼Œunstableä¸ºæœ€æ–°çš„æµ‹è¯•ç‰ˆæœ¬ï¼Œå…¶ä¸­åŒ…æ‹¬æœ€æ–°çš„è½¯ä»¶åŒ…ï¼Œä½†æ˜¯ä¹Ÿæœ‰ç›¸å¯¹è¾ƒå¤šçš„bugï¼Œé€‚åˆæ¡Œé¢ç”¨æˆ·ã€‚testingçš„ç‰ˆæœ¬éƒ½ç»è¿‡unstableä¸­çš„æµ‹è¯•ï¼Œç›¸å¯¹è¾ƒä¸ºç¨³å®šï¼Œä¹Ÿæ”¯æŒäº†ä¸å°‘æ–°æŠ€æœ¯ï¼ˆæ¯”å¦‚SMPç­‰ï¼‰ã€‚è€Œstableä¸€èˆ¬åªç”¨äºæœåŠ¡å™¨ï¼Œä¸Šé¢çš„è½¯ä»¶åŒ…å¤§éƒ¨åˆ†éƒ½æ¯”è¾ƒè¿‡æ—¶ï¼Œä½†æ˜¯ç¨³å®šå’Œå®‰å…¨æ€§éƒ½éå¸¸çš„é«˜ã€‚Debianæœ€å…·ç‰¹è‰²çš„æ˜¯apt-get /dpkgåŒ…ç®¡ç†æ–¹å¼ï¼Œå…¶å®Redhatçš„YUMä¹Ÿæ˜¯åœ¨æ¨¡ä»¿Debiançš„APTæ–¹å¼ï¼Œä½†åœ¨äºŒè¿›åˆ¶æ–‡ä»¶å‘è¡Œæ–¹å¼ä¸­ï¼ŒAPTåº”è¯¥æ˜¯æœ€å¥½çš„äº†ã€‚Debiançš„èµ„æ–™ä¹Ÿå¾ˆä¸°å¯Œï¼Œæœ‰å¾ˆå¤šæ”¯æŒçš„ç¤¾åŒºï¼Œæœ‰é—®é¢˜æ±‚æ•™ä¹Ÿæœ‰åœ°æ–¹å¯å»:)
Ubuntuä¸¥æ ¼æ¥è¯´ä¸èƒ½ç®—ä¸€ä¸ªç‹¬ç«‹çš„å‘è¡Œç‰ˆæœ¬ï¼ŒUbuntuæ˜¯åŸºäºDebiançš„unstableç‰ˆæœ¬åŠ å¼ºè€Œæ¥ï¼Œå¯ä»¥è¿™ä¹ˆè¯´ï¼ŒUbuntuå°±æ˜¯ä¸€ä¸ªæ‹¥æœ‰Debianæ‰€æœ‰çš„ä¼˜ç‚¹ï¼Œä»¥åŠè‡ªå·±æ‰€åŠ å¼ºçš„ä¼˜ç‚¹çš„è¿‘ä¹å®Œç¾çš„Linuxæ¡Œé¢ç³»ç»Ÿã€‚æ ¹æ®é€‰æ‹©çš„æ¡Œé¢ç³»ç»Ÿä¸åŒï¼Œæœ‰ä¸‰ä¸ªç‰ˆæœ¬å¯ä¾›é€‰æ‹©ï¼ŒåŸºäºGnomeçš„Ubuntuï¼ŒåŸºäºKDEçš„Kubuntuä»¥åŠåŸºäºXfcçš„Xubuntuã€‚ç‰¹ç‚¹æ˜¯ç•Œé¢éå¸¸å‹å¥½ï¼Œå®¹æ˜“ä¸Šæ‰‹ï¼Œå¯¹ç¡¬ä»¶çš„æ”¯æŒéå¸¸å…¨é¢ï¼Œæ˜¯æœ€é€‚åˆåšæ¡Œé¢ç³»ç»Ÿçš„Linuxå‘è¡Œç‰ˆæœ¬ã€‚
Gentooï¼Œä¼Ÿå¤§çš„Gentooæ˜¯Linuxä¸–ç•Œæœ€å¹´è½»çš„å‘è¡Œç‰ˆæœ¬ï¼Œæ­£å› ä¸ºå¹´è½»ï¼Œæ‰€ä»¥èƒ½å¸å–åœ¨å¥¹ä¹‹å‰çš„æ‰€æœ‰å‘è¡Œç‰ˆæœ¬çš„ä¼˜ç‚¹ï¼Œè¿™ä¹Ÿæ˜¯Gentooè¢«ç§°ä¸ºæœ€å®Œç¾çš„Linuxå‘è¡Œç‰ˆæœ¬çš„åŸå› ä¹‹ä¸€ã€‚Gentooæœ€åˆç”±Daniel Robbinsï¼ˆFreeBSDçš„å¼€å‘è€…ä¹‹ä¸€ï¼‰åˆ›å»ºï¼Œé¦–ä¸ªç¨³å®šç‰ˆæœ¬å‘å¸ƒäº2002å¹´ã€‚ç”±äºå¼€å‘è€…å¯¹FreeBSDçš„ç†Ÿè¯†ï¼Œæ‰€ä»¥Gentooæ‹¥æœ‰åª²ç¾FreeBSDçš„å¹¿å—ç¾èª‰çš„portsç³»ç»Ÿâ€”â€”PortageåŒ…ç®¡ç†ç³»ç»Ÿã€‚ä¸åŒäºAPTå’ŒYUMç­‰äºŒè¿›åˆ¶æ–‡ä»¶åˆ†å‘çš„åŒ…ç®¡ç†ç³»ç»Ÿï¼ŒPortageæ˜¯åŸºäºæºä»£ç åˆ†å‘çš„ï¼Œå¿…é¡»ç¼–è¯‘åæ‰èƒ½è¿è¡Œï¼Œå¯¹äºå¤§å‹è½¯ä»¶è€Œè¨€æ¯”è¾ƒæ…¢ï¼Œä¸è¿‡æ­£å› ä¸ºæ‰€æœ‰è½¯ä»¶éƒ½æ˜¯åœ¨æœ¬åœ°æœºå™¨ç¼–è¯‘çš„ï¼Œåœ¨ç»è¿‡å„ç§å®šåˆ¶çš„ç¼–è¯‘å‚æ•°ä¼˜åŒ–åï¼Œèƒ½å°†æœºå™¨çš„ç¡¬ä»¶æ€§èƒ½å‘æŒ¥åˆ°æè‡´ã€‚Gentooæ˜¯æ‰€æœ‰Linuxå‘è¡Œç‰ˆæœ¬é‡Œå®‰è£…æœ€å¤æ‚çš„ï¼Œä½†æ˜¯åˆæ˜¯å®‰è£…å®Œæˆåæœ€ä¾¿äºç®¡ç†çš„ç‰ˆæœ¬ï¼Œä¹Ÿæ˜¯åœ¨ç›¸åŒç¡¬ä»¶ç¯å¢ƒä¸‹è¿è¡Œæœ€å¿«çš„ç‰ˆæœ¬ã€‚
æœ€åï¼Œä»‹ç»ä¸€ä¸‹FreeBSDï¼Œéœ€è¦å¼ºè°ƒçš„æ˜¯ï¼šFreeBSDå¹¶ä¸æ˜¯ä¸€ä¸ªLinuxç³»ç»Ÿï¼ä½†FreeBSDä¸ Linuxçš„ç”¨æˆ·ç¾¤æœ‰ç›¸å½“ä¸€éƒ¨åˆ†æ˜¯é‡åˆçš„ï¼ŒäºŒè€…æ”¯æŒçš„ç¡¬ä»¶ç¯å¢ƒä¹Ÿæ¯”è¾ƒä¸€è‡´ï¼Œæ‰€é‡‡ç”¨çš„è½¯ä»¶ä¹Ÿæ¯”è¾ƒç±»ä¼¼ï¼Œæ‰€ä»¥å¯ä»¥å°†FreeBSDè§†ä¸ºä¸€ä¸ªLinuxç‰ˆæœ¬æ¥æ¯”è¾ƒã€‚FreeBSDæ‹¥æœ‰ä¸¤ä¸ªåˆ†æ”¯ï¼šstableå’Œcurrentã€‚é¡¾åæ€ä¹‰ï¼Œstableæ˜¯ç¨³å®šç‰ˆï¼Œè€Œcurrentåˆ™æ˜¯æ·»åŠ äº†æ–°æŠ€æœ¯çš„æµ‹è¯•ç‰ˆã€‚FreeBSDé‡‡ç”¨PortsåŒ…ç®¡ç†ç³»ç»Ÿï¼Œä¸Gentooç±»ä¼¼ï¼ŒåŸºäºæºä»£ç åˆ†å‘ï¼Œå¿…é¡»åœ¨æœ¬åœ°æœºå™¨ç¼–ååæ‰èƒ½è¿è¡Œï¼Œä½†æ˜¯Portsç³»ç»Ÿæ²¡æœ‰Portageç³»ç»Ÿä½¿ç”¨ç®€ä¾¿ï¼Œä½¿ç”¨èµ·æ¥ç¨å¾®å¤æ‚ä¸€äº›ã€‚FreeBSDçš„æœ€å¤§ç‰¹ç‚¹å°±æ˜¯ç¨³å®šå’Œé«˜æ•ˆï¼Œæ˜¯ä½œä¸ºæœåŠ¡å™¨æ“ä½œç³»ç»Ÿçš„æœ€ä½³é€‰æ‹©ï¼Œä½†å¯¹ç¡¬ä»¶çš„æ”¯æŒæ²¡æœ‰Linuxå®Œå¤‡ï¼Œæ‰€ä»¥å¹¶ä¸é€‚åˆä½œä¸ºæ¡Œé¢ç³»ç»Ÿã€‚
ä¸‹é¢ç»™ä¸ºé€‰æ‹©ä¸€ä¸ªLinuxå‘è¡Œç‰ˆæœ¬çŠ¯æ„çš„æœ‹å‹ä¸€äº›å»ºè®®ï¼šå¦‚æœä½ åªæ˜¯éœ€è¦ä¸€ä¸ªæ¡Œé¢ç³»ç»Ÿï¼Œè€Œä¸”æ—¢ä¸æƒ³ä½¿ç”¨ç›—ç‰ˆï¼Œåˆä¸æƒ³èŠ±å¤§é‡çš„é’±è´­ä¹°å•†ä¸šè½¯ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦ä¸€æ¬¾é€‚åˆæ¡Œé¢ä½¿ç”¨çš„Linuxå‘è¡Œç‰ˆæœ¬äº†ï¼Œå¦‚æœä½ ä¸æƒ³è‡ªå·±å®šåˆ¶ä»»ä½•ä¸œè¥¿ï¼Œä¸æƒ³åœ¨ç³»ç»Ÿä¸Šæµªè´¹å¤ªå¤šæ—¶é—´ï¼Œé‚£ä¹ˆå¾ˆç®€å•ï¼Œä½ å°±æ ¹æ®è‡ªå·±çš„çˆ±å¥½åœ¨ubuntuã€kubuntuä»¥åŠxubuntuä¸­é€‰ä¸€æ¬¾å§ï¼Œä¸‰è€…çš„åŒºåˆ«ä»…ä»…æ˜¯æ¡Œé¢ç¨‹åºçš„ä¸ä¸€æ ·ã€‚
å¦‚æœä½ éœ€è¦ä¸€ä¸ªæ¡Œé¢ç³»ç»Ÿï¼Œè€Œä¸”è¿˜æƒ³éå¸¸çµæ´»çš„å®šåˆ¶è‡ªå·±çš„Linuxç³»ç»Ÿï¼Œæƒ³è®©è‡ªå·±çš„æœºå™¨è·‘å¾—æ›´æ¬¢ï¼Œä¸ä»‹æ„åœ¨Linuxç³»ç»Ÿå®‰è£…æ–¹é¢æµªè´¹ä¸€ç‚¹æ—¶é—´ï¼Œé‚£ä¹ˆä½ çš„å”¯ä¸€é€‰æ‹©å°±æ˜¯Gentooï¼Œå°½æƒ…äº«å—Gentooå¸¦æ¥çš„è‡ªç”±å¿«æ„Ÿå§ï¼
å¦‚æœä½ éœ€è¦çš„æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ç³»ç»Ÿï¼Œè€Œä¸”ä½ å·²ç»éå¸¸åŒçƒ¦å„ç§Linuxçš„é…ç½®ï¼Œåªæ˜¯æƒ³è¦ä¸€ä¸ªæ¯”è¾ƒç¨³å®šçš„æœåŠ¡å™¨ç³»ç»Ÿè€Œå·²ï¼Œé‚£ä¹ˆä½ æœ€å¥½çš„é€‰æ‹©å°±æ˜¯CentOSäº†ï¼Œå®‰è£…å®Œæˆåï¼Œç»è¿‡ç®€å•çš„é…ç½®å°±èƒ½æä¾›éå¸¸ç¨³å®šçš„æœåŠ¡äº†ã€‚å¦‚æœä½ éœ€è¦çš„æ˜¯ä¸€ä¸ªåšå¦‚ç£çŸ³çš„éå¸¸ç¨³å®šçš„æœåŠ¡å™¨ç³»ç»Ÿï¼Œé‚£ä¹ˆä½ çš„å”¯ä¸€é€‰æ‹©å°±æ˜¯FreeBSDã€‚
å¦‚æœä½ éœ€è¦ä¸€ä¸ªç¨³å®šçš„æœåŠ¡å™¨ç³»ç»Ÿï¼Œè€Œä¸”æƒ³æ·±å…¥æ‘¸ç´¢ä¸€ä¸‹Linuxçš„å„ä¸ªæ–¹é¢çš„çŸ¥è¯†ï¼Œæƒ³è‡ªå·±å®šåˆ¶è®¸å¤šå†…å®¹ï¼Œé‚£ä¹ˆæˆ‘æ¨èä½ ä½¿ç”¨Gentooã€‚Â å¯¹å„ç§æ“ä½œç³»ç»Ÿçš„ç”¨æˆ·åˆ†å¸ƒæ–¹é¢çš„æ¦‚æ‹¬:ã€€ã€€Mac â€“&gt; Windows â€“&gt; Linuxâ€“&gt; BSD â€“&gt; UNIXä»å·¦è¾¹åˆ°å³è¾¹ï¼Œåˆ†åˆ«æ˜¯â€ä½¿ç”¨è¯¥OSçš„äººé‡Œç²¾é€šç”µè„‘çš„ç”¨æˆ·ç¾¤æœ€å°‘â€åˆ°â€ä½¿ç”¨è¯¥OSçš„äººé‡Œç²¾é€šç”µè„‘çš„ç”¨æˆ·ç¾¤æœ€å¤šâ€çš„è¿‡æ¸¡ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒLinuxçš„è¢«æ”¾ç½®åœ¨äº†ä¸­é—´ï¼Œè€ŒBSDåˆ™æ›´æ¥è¿‘äºå³è¾¹ã€‚è®¸å¤šäººä¼šå¯¹æ­¤æœ‰äº‰è®ºï¼Œä¹Ÿæœ‰äº›äººå¯èƒ½ä¼šæ„Ÿè§‰è¢«å†’çŠ¯äº†ã€‚ä½†æ˜¯ï¼Œä¸ªäººè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå¯¹â€å“ªäº›ç”¨æˆ·ä½¿ç”¨å“ªäº›ç³»ç»Ÿâ€ç›¸å½“å‡†ç¡®çš„æ¦‚æ‹¬ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxç›®å½•ç»“æ„ç®€æ</title>
    <url>/hobby-linux-directory/</url>
    <content><![CDATA[å‰è¨€Linuxç»§æ‰¿äº†unixæ“ä½œç³»ç»Ÿç»“æ„æ¸…æ™°çš„ç‰¹ç‚¹ã€‚åœ¨linuxä¸‹çš„æ–‡ä»¶ç»“æ„éå¸¸æœ‰æ¡ç†ã€‚ä½†æ˜¯ï¼Œä¸Šè¿°çš„ä¼˜ç‚¹åªæœ‰åœ¨å¯¹linuxç›¸å½“ç†Ÿæ‚‰æ—¶ï¼Œæ‰èƒ½ä½“ä¼šåˆ°ã€‚
å‚è€ƒæ–‡æ¡£ï¼šFilesystem Hierarchy Standard


/binbinæ˜¯äºŒè¿›åˆ¶ï¼ˆbinaryï¼‰è‹±æ–‡ç¼©å†™ï¼Œè¿™ä¸ªç›®å½•ä¸‹å­˜æ”¾ç€linuxå¸¸ç”¨çš„ç¨‹åºå’Œå‘½ä»¤ã€‚
/bootåœ¨è¿™ä¸ªç›®å½•ä¸‹å­˜æ”¾çš„éƒ½æ˜¯ç³»ç»Ÿå¯åŠ¨æ—¶è¦ç”¨åˆ°çš„ç¨‹åºã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨liloå¼•å¯¼linuxçš„æ—¶å€™ï¼Œä¼šç”¨åˆ°è¿™é‡Œçš„ä¸€äº›ä¿¡æ¯ã€‚
/cdromå¯ä»¥å°†å…‰é©±æ–‡ä»¶ç³»ç»ŸæŒ‚åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚ä¾‹å¦‚ï¼šmount /dev/cdrom /cdrom
/devdevæ˜¯è®¾å¤‡ï¼ˆdeviceï¼‰çš„è‹±æ–‡ç¼©å†™ï¼Œè¿™ä¸ªç›®å½•ä¸­åŒ…å«äº†æ‰€æœ‰linuxç³»ç»Ÿä¸­ä½¿ç”¨çš„å¤–éƒ¨è®¾å¤‡ã€‚æˆ‘ä»¬å¯ä»¥éå¸¸æ–¹ä¾¿åœ°å»è®¿é—®è¿™äº›å¤–éƒ¨è®¾å¤‡ï¼Œå’Œè®¿é—®ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªç›®å½•æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚ä¾‹å¦‚ï¼šcd /dev/cdrom æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å…‰é©±ä¸­çš„æ–‡ä»¶äº†ã€‚åŒæ ·é“ç†ï¼Œcd /dev/mouse å°±å¯ä»¥çœ‹çœ‹é¼ æ ‡çš„ç›¸å…³æ–‡ä»¶ã€‚åœ¨devä¸‹ï¼Œæœ‰ä¸€ä¸ªnullè®¾å¤‡ï¼Œå¦‚æœä½ å‘è¿™ä¸ªè®¾å¤‡å†™å…¥å†…å®¹ï¼Œå†™å…¥çš„å†…å®¹å°±è¿›å…¥äº†é»‘æ´ã€‚
/etcetcè¿™ä¸ªç›®å½•æ˜¯linuxç³»ç»Ÿä¸­æœ€é‡è¦çš„ç›®å½•ä¹‹ä¸€ã€‚åœ¨è¿™ä¸ªç›®å½•ä¸‹å­˜æ”¾äº†ç³»ç»Ÿç®¡ç†æ—¶è¦ç”¨åˆ°çš„å„ç§é…ç½®æ–‡ä»¶å’Œå­ç›®å½•ã€‚æˆ‘ä»¬è¦ç”¨åˆ°çš„ç½‘ç»œé…ç½®æ–‡ä»¶ï¼Œæ–‡ä»¶ç³»ç»Ÿï¼Œç³»ç»Ÿé…ç½®æ–‡ä»¶ï¼Œè®¾å¤‡é…ç½®ä¿¡æ¯ï¼Œè®¾ç½®ç”¨æˆ·ä¿¡æ¯ç­‰éƒ½åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚
/sbinè¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾ç³»ç»Ÿç®¡ç†å‘˜çš„ç¨‹åºå’Œå‘½ä»¤ã€‚
/homeå¦‚æœæˆ‘ä»¬å»ºç«‹ä¸€ä¸ªç”¨æˆ·ï¼Œç”¨æˆ·åæ˜¯â€xxâ€ï¼Œé‚£ä¹ˆåœ¨/homeç›®å½•ä¸‹å°±æœ‰ä¸€ä¸ªå¯¹åº”çš„/home/xxè·¯å¾„ï¼Œç”¨æ¥å­˜æ”¾ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚
/liblibæ˜¯åº“ï¼ˆlibraryï¼‰è‹±æ–‡ç¼©å†™ï¼Œè¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾ç³»ç»ŸåŠ¨æ€è¿æ¥å…±äº«åº“ã€‚å‡ ä¹æ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½ä¼šç”¨åˆ°è¿™ä¸ªç›®å½•ä¸‹çš„å…±äº«åº“ã€‚

/libï¼šLibraries essential for the binaries in /bin and /sbin.
/usr/libï¼šLibraries for the binaries in /usr/bin and /usr/sbin.
/usr/localï¼šTertiary hierarchy for local data, specific to this host. Typically has further subdirectories (e.g., bin, lib, share).

/lost+foundè¿™ä¸ªç›®å½•åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯ç©ºçš„ã€‚ä½†æ˜¯å¦‚æœä½ æ­£åœ¨å·¥ä½œçªç„¶åœç”µï¼Œæˆ–æ˜¯æ²¡æœ‰ç”¨æ­£å¸¸æ–¹å¼å…³æœºï¼Œåœ¨ä½ é‡æ–°å¯åŠ¨æœºå™¨çš„æ—¶å€™ï¼Œæœ‰äº›æ–‡ä»¶å°±ä¼šæ‰¾ä¸åˆ°åº”è¯¥å­˜æ”¾çš„åœ°æ–¹ï¼Œå¯¹äºè¿™äº›æ–‡ä»¶ï¼Œç³»ç»Ÿå°†ä»–ä»¬æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œå°±åƒä¸ºæ— å®¶å¯å½’çš„äººæä¾›ä¸€ä¸ªä¸´æ—¶ä½æ‰€ã€‚
/mntç”¨äºæŒ‚è½½çš„ç›®å½•ã€‚
/procå¯ä»¥åœ¨è¿™ä¸ªç›®å½•ä¸‹è·å–ç³»ç»Ÿä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯æ˜¯åœ¨å†…å­˜ä¸­ï¼Œç”±ç³»ç»Ÿè‡ªå·±äº§ç”Ÿçš„ã€‚
/rootå¦‚æœä½ æ˜¯ä»¥è¶…çº§ç”¨æˆ·çš„èº«ä»½ç™»å½•çš„ï¼Œè¿™ä¸ªå°±æ˜¯è¶…çº§ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚
/tmpç”¨æ¥å­˜æ”¾ä¸åŒç¨‹åºæ‰§è¡Œæ—¶äº§ç”Ÿçš„ä¸´æ—¶æ–‡ä»¶ã€‚
/usrunix software resourceç”¨æˆ·åº”ç”¨ç¨‹åºé»˜è®¤å®‰è£…çš„è·¯å¾„ï¼Œè¿™æ˜¯linuxç³»ç»Ÿä¸­å ç”¨ç¡¬ç›˜ç©ºé—´æœ€å¤§çš„ç›®å½•ã€‚ç”¨æˆ·å®‰è£…çš„åº”ç”¨ç¨‹åºå¯ä»¥å®‰è£…åˆ°/usr/localè·¯å¾„ä¸‹ï¼Œ/usr/shareä¸»è¦å­˜æ”¾ä¸€äº›å…±äº«æ–‡ä»¶ï¼Œ/usr/binå­˜æ”¾æ™®é€šç”¨æˆ·ç¨‹åºæ‰€éœ€è¦ç”¨åˆ°çš„å‘½ä»¤ï¼Œ/usr/sbinå­˜æ”¾ç³»ç»Ÿç®¡ç†å‘˜ç¨‹åºæ‰€éœ€è¦ç”¨åˆ°çš„ç¨‹åºã€‚
/optå¯é€‰çš„åº”ç”¨ç¨‹åºçš„å®‰è£…è·¯å¾„ï¼Œå®‰è£…åœ¨è¿™ä¸ªè·¯å¾„ä¸‹çš„åº”ç”¨ç¨‹åºï¼Œå®ƒçš„æºæ–‡ä»¶ï¼Œåº“æ–‡ä»¶ç­‰éƒ½æ˜¯å¤„äºåŒä¸ªç›®å½•ä¸‹ï¼Œè¿™æ ·å¸è½½ç¨‹åºçš„æ—¶å€™ï¼Œåªéœ€è¦ç›´æ¥åˆ é™¤äº†ï¼Œä¸ä¼šå¯¹å…¶ä»–ç¨‹åºé€ æˆå½±å“ã€‚
/varVariable filesï¼Œå¯å˜æ–‡ä»¶ã€‚åœ¨ç³»ç»Ÿæ­£å¸¸è¿è¡ŒæœŸé—´ï¼Œå…¶å†…å®¹é¢„è®¡ä¼šä¸æ–­æ›´æ”¹çš„æ–‡ä»¶ï¼Œå¦‚æ—¥å¿—å’Œç¼“å­˜ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨Ubuntuæ—¶é‡åˆ°çš„é—®é¢˜</title>
    <url>/dev-ubuntu-questions/</url>
    <content><![CDATA[å‰è¨€æœ¬æ–‡è®°å½•ä½¿ç”¨Ubuntuç³»ç»Ÿæ˜¯é‡åˆ°çš„ä¸€äº›é—®é¢˜å’Œè§£å†³åŠæ³•ã€‚


å®‰è£…Ubuntuç³»ç»Ÿç‰¹åˆ«æ…¢é—®é¢˜æè¿°ubuntuå®‰è£…è¿‡ç¨‹â€œretrieving file 43 of 105â€å°±åœä½äº†ã€‚
è§£å†³åŠæ³•æ–‡ä»¶ç³»ç»Ÿä¸å¯¹ï¼Œé‡æ–°åˆ†åŒºï¼Œå†æ¬¡å®‰è£…ã€‚
rootè´¦å·é—®é¢˜rootè´¦æˆ·æœªæ¿€æ´»åœ¨å®‰è£…ç³»ç»Ÿæ—¶ï¼Œrootè´¦æˆ·å¹¶æ²¡æœ‰è¢«æ¿€æ´»æ¥ä¾›ä½ ä½¿ç”¨ï¼Œå³rootå¸å·è¢«éšè—äº†ï¼Œè€Œæ˜¯é€šè¿‡åˆå§‹ç”¨æˆ·ä¸sudoçš„ç»“åˆä½¿ç”¨æ¥å®Œæˆä¸€äº›éœ€è¦rootæƒé™çš„ä»»åŠ¡ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯é˜²æ­¢ä½ ä¸å¾—ä¸ä½¿ç”¨rootæ¥è¿›è¡Œä¸€äº›ç³»ç»Ÿçš„åˆçº§ç®¡ç†ï¼ŒåŒæ—¶å®Œå…¨å…è®¸å¦ä¸€ä¸ªè´¦æˆ·æ¥å……å½“è¶…çº§ç”¨æˆ·ï¼Œä¹Ÿä¿æŠ¤äº†ä½ ç³»ç»Ÿçš„å®‰å…¨æ–¹é¢çš„ç¼ºé™·ã€‚å¦‚æœä½ éœ€è¦ä½¿ç”¨rootç”¨æˆ·æ¥å®Œæˆä¸€äº›å·¥ä½œçš„è¯ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¿€æ´»rootç”¨æˆ·ï¼š
è§£å†³åŠæ³•æ³•ä¸€ï¼šåœ¨ç»ˆç«¯ä¸­è¾“å…¥ï¼šsudo passwd rootä¹‹åè¦æ±‚ä½ è¾“å…¥ä¸¤æ¬¡rootç”¨æˆ·çš„å¯†ç ï¼Œé‡å¯åå°±å¯ä»¥ç™»é™†rootç”¨æˆ·äº†ã€‚é€€å‡ºrootæƒé™æ–¹æ³•ï¼šexitè‹¥æƒ³ç¦ç”¨ root å¸å·ï¼š sudo passwd -l root
æ³•äºŒï¼š1ã€é‡å¯ç”µè„‘ï¼Œé€‰æ‹©recoveryæ¨¡å¼2ã€æ‰¾åˆ°æœ€ä¸‹è¾¹çš„rooté€‰é¡¹3ã€åœ¨recoveryæ¨¡å¼çš„rootç”¨æˆ·ä¸‹åˆ›å»ºä¸€ä¸ªrootç”¨æˆ·ï¼Œè¾“å…¥ï¼špasswd root4ã€ä¸¤æ¬¡è¾“å…¥æ–°å¯†ç å³å¯
vimæ–¹å‘é”®ä¹±ç é—®é¢˜é—®é¢˜æè¿°ubuntuä¸‹ä½¿ç”¨vimæ—¶æ–¹å‘é”®å˜ä¹±ç ï¼Œé€€æ ¼é”®ä¸èƒ½ä½¿ç”¨ã€‚
è§£å†³æ–¹æ³•é‡æ–°å®‰è£…vim
sudo apt-get remove vim-commonsudo apt-get install vim

å¦‚æœå®‰è£…å¤±è´¥ï¼Œæç¤ºï¼šPackage vim is not available, but is referred to by another package.
è¯·å…ˆæ‰§è¡Œï¼š
sudo apt-get update

æ— æ³•ä½¿ç”¨rootç”¨æˆ·ç™»å½•å›¾å½¢ç•Œé¢é—®é¢˜æè¿°Ubuntu12.10ï¼Œæ— æ³•ä½¿ç”¨rootç”¨æˆ·ç™»å½•å›¾å½¢ç•Œé¢ã€‚
è§£å†³åŠæ³•1ã€å…ˆè®¾å®šä¸€ä¸ªrootçš„å¯†ç sudo passwd root
2ã€root ç™»é™†su root
3ã€å¤‡ä»½ä¸€ä¸‹lightgdmcp -p /etc/lightdm/lightdm.conf /etc/lightdm/lightdm.conf.bak
4ã€ç¼–è¾‘lightdm.confsudo gedit /etc/lightdm/lightdm.conf
ä¿®æ”¹ä¸ºï¼š
[SeatDefaults]greeter-session=unity-greeteruser-session=ubuntugreeter-show-manual-login=true

é‡å¯ç™»é™†å³å¯ã€‚å·²ç»å¯ä»¥è¾“å…¥rootäº†ã€‚
æ³¨æ„ï¼šå¦‚æœrootç™»é™†åæ²¡å£°éŸ³ï¼Œæ˜¯å› ä¸ºpulseaudioæ²¡æœ‰å¯åŠ¨ã€‚è§£å†³åŠæ³•ï¼šå°†rootåŠ åˆ°pulse-accessç»„
sudo usermod -a -G pulse-access root
ç„¶åä¿®æ”¹é…ç½®æ–‡ä»¶/etc/default/pulseaudioï¼Œå°†PULSEAUDIO_SYSTEM_STARTè®¾ä¸º1ã€‚
NTFSæ–‡ä»¶ç³»ç»Ÿæƒé™é—®é¢˜é—®é¢˜æè¿°ä¿®æ”¹ ubuntu NTFS æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶ï¼Œæç¤ºæ²¡æœ‰æ‰§è¡Œæƒé™ã€‚
è§£å†³åŠæ³•ç”±äºNTFSæœ¬èº«çš„ç‰¹æ®Šæ€§ï¼Œä¸èƒ½å¯¹å…¶åˆ†åŒºçš„æ–‡ä»¶æƒé™è¿›è¡Œä¿®æ”¹ï¼Œæ— è®ºæ˜¯suodoè¿˜æ˜¯rootéƒ½æ²¡æœ‰ç”¨ã€‚
å®‰è£…ä»¥ä¸‹ä¸¤ä¸ªæ’ä»¶ï¼š
sudoÂ apt-getÂ installÂ ntfs-3gsudoÂ apt-getÂ installÂ ntfs-config

å›¾å½¢ç•Œé¢æ‰“å¼€ntfs-configï¼Œé…ç½®ntfsæƒé™ï¼Œå…¨å¼€ã€‚
å†çœ‹NTFSç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œæƒé™éƒ½æœ‰äº†ã€‚ä¸è¿‡è¿˜æ˜¯ä¸èƒ½ç”¨chmodå‘½ä»¤æ¥ä¿®æ”¹ã€‚
åŒæ—¶ï¼Œntfs-configå¯ä»¥å¸®åŠ©ç”¨æˆ·è‡ªåŠ¨æŒ‚è½½æ‰€æœ‰ç¡¬ç›˜åˆ†åŒºï¼š
sudoÂ ntfs-configï¼Œè‡ªåŠ¨æŒ‚è½½æ‰€æœ‰åˆ†åŒºã€‚
å®é™…å°±æ˜¯åœ¨/etc/fstabä¸­æ·»åŠ ç›¸åº”çš„æŒ‚è½½ä¿¡æ¯ï¼Œå¦‚ä¸éœ€è¦ï¼Œå¯ä»¥ç›´æ¥åˆ æ‰ï¼Œé‡å¯åå°±ä¸å†è‡ªåŠ¨æŒ‚è½½äº†ã€‚
PSï¼šæŸ¥çœ‹ç¡¬ç›˜åˆ†åŒºUUID sudoÂ blkid
å›ç¯è®¾å¤‡/dev/loop0å ç”¨100%é—®é¢˜æè¿°Ubuntu20.04ï¼Œå›ç¯è®¾å¤‡ä½¿ç”¨ç‡100%
Filesystem      Size  Used Avail Use% Mounted onudev            3.9G     0  3.9G   0% /devtmpfs           796M  1.9M  794M   1% /run/dev/sda1        20G   18G  1.1G  95% /tmpfs           3.9G     0  3.9G   0% /dev/shmtmpfs           5.0M  4.0K  5.0M   1% /run/locktmpfs           3.9G     0  3.9G   0% /sys/fs/cgroup/dev/loop0       15M   15M     0 100% /snap/gnome-characters/254/dev/loop2       90M   90M     0 100% /snap/core/6673/dev/loop1      3.8M  3.8M     0 100% /snap/gnome-system-monitor/77/dev/loop3      152M  152M     0 100% /snap/gnome-3-28-1804/31/dev/loop4       36M   36M     0 100% /snap/gtk-common-themes/1198/dev/loop7      1.0M  1.0M     0 100% /snap/gnome-logs/61/dev/loop6       54M   54M     0 100% /snap/core18/941/dev/loop5      4.2M  4.2M     0 100% /snap/gnome-calculator/406tmpfs           796M   36K  795M   1% /run/user/1000

è§£å†³åŠæ³•æ¸…ç†å›ç¯è®¾å¤‡æŒ‚è½½
sudo apt autoremove --purge snapd

æ‰©å±•é˜…è¯»/dev/loopnè¿™äº›è®¾å¤‡åœ¨Linuxä¸‹è¢«ç§°ä¸ºå›ç¯è®¾å¤‡ã€‚1ã€æŸ¥çœ‹å›ç¯è®¾å¤‡
losetup

2ã€æŒ‚è½½xxx.iosé•œåƒ
losetup /dev/loop0 xxx.isomount /dev/loop0 /media

ç­‰åŒäºï¼š
mount -o loop xxx.iso /media





]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxå‘½ä»¤å¤§å…¨â€”â€”RSTUVWXYZ</title>
    <url>/dev-linux-command-all-rstuvwxyz/</url>
    <content><![CDATA[æœ¬æ–‡æ‘˜è‡ªã€ŠLinux/UNIXæŒ‡ä»¤èŒƒä¾‹é€ŸæŸ¥æ‰‹å†Œã€‹ã€‚
Rraidstart
raidstart: RAID startï¼Œå¯åŠ¨è½¯ä»¶çš„ç¡¬ç›˜é˜µåˆ—

raidstop
raidstop: RAID stopï¼Œå…³é—­è½¯ä»¶çš„ç¡¬ç›˜é˜µåˆ—

rc-status
rc-status: runlevel command statusï¼Œæ˜¾ç¤ºæœåŠ¡å™¨çš„å¯åŠ¨çŠ¶æ€

rc-statusï¼Œåˆ—å‡ºå½“å‰è¿è¡Œç­‰çº§ä¸‹çš„æœåŠ¡çŠ¶æ€ã€‚
rc-status bootï¼Œåˆ—å‡ºè¿è¡Œç­‰çº§ä¸ºbootä¸‹çš„æœåŠ¡çŠ¶æ€ã€‚
rc-update
rc-update: runlevel command updateï¼Œæ˜¾ç¤ºä¸æ§åˆ¶æœåŠ¡å™¨çš„å¯åŠ¨çŠ¶æ€

rcp
rcp: remote copyï¼Œè¿œç¨‹å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•

reboot
reboot: rebootï¼Œé‡æ–°å¯åŠ¨ç³»ç»Ÿ

rebootï¼Œé‡æ–°å¯åŠ¨ç³»ç»Ÿã€‚
renice
renice: reniceï¼Œè°ƒæ•´æ­£åœ¨è¿è¡Œè¿›ç¨‹çš„ä¼˜å…ˆçº§

renice -1 1772ï¼Œå°†è¿›ç¨‹å·ç ä¸º1772çš„è¿›ç¨‹ä¼˜å…ˆçº§æ”¹ä¸º-1ã€‚
repquota
repquota: report of quotaï¼Œæ£€æŸ¥ç¡¬ç›˜å®¹é‡é™åˆ¶

resize2fs
resize2fs: resize file systemï¼Œè°ƒæ•´æ–‡ä»¶ç³»ç»Ÿçš„å¤§å°

df -humount /dev/sda2e2fsck -f /dev/sda2resize2fs /dev/sda2 100Mmount /dev/sda2 /homedf -h 
å°†æ–‡ä»¶ç³»ç»Ÿ/dev/sda2çš„å¤§å°è°ƒæ•´ä¸º100MBã€‚
restore
restore: restoreï¼Œå›å­˜dumpæ‰€äº§ç”Ÿçš„æ•°æ®

restore -r -f dump.txtï¼Œå°†æ–‡ä»¶dump.txtè¿˜åŸåˆ°dumpæ‰€å¤‡ä»½çš„ä½ç½®ã€‚
rlogin
rlogin: remote loginï¼Œè¿œç¨‹ç™»å½•ä¸»æœº

rlogin 10.1.1.3ï¼Œé»˜è®¤ä»¥å½“å‰rootç”¨æˆ·ç™»å½•10.1.1.3ä¸»æœºã€‚
rlogin 10.1.1.3 -l markï¼Œä½¿ç”¨markèº«ä»½ç™»å½•10.1.1.3ä¸»æœºã€‚
rm
rm: removeï¼Œåˆ é™¤æ–‡ä»¶æˆ–ç›®å½•

rm -i *.cï¼Œåˆ é™¤æ‰€æœ‰.cæ–‡ä»¶ï¼Œåˆ é™¤å‰é€ä¸€è¯¢é—®ç¡®è®¤ã€‚ã€€ã€€rm -rf finishedï¼Œå°† finished ç›®å½•åŠå­ç›®å½•ä¸­æ‰€æœ‰æ–‡ä»¶åˆ é™¤ï¼Œä¸å†ç¡®è®¤ã€‚
ã€€ã€€ 
rmdir
rmdir: remove directoryï¼Œåˆ é™¤ç›®å½•

rmdir AAAï¼Œå°†å½“å‰ç›®å½•ä¸‹åä¸º AAA çš„ç›®å½•åˆ é™¤ã€‚ã€€ã€€rmdir -p BBB/Testï¼Œåœ¨å½“å‰ç›®å½•ä¸‹çš„ BBB ç›®å½•ä¸­ï¼Œåˆ é™¤åä¸º Test çš„å­ç›®å½•ã€‚è‹¥ Test åˆ é™¤åï¼ŒBBB ç›®å½•æˆä¸ºç©ºç›®å½•ï¼Œåˆ™ BBB ä¹Ÿåˆ é™¤ã€‚ 
rmmod
rmmod: remove modulesï¼Œåˆ é™¤åŠ è½½çš„æ¨¡å—

route
route: routeï¼Œæ˜¾ç¤ºæˆ–è®¾ç½®è·¯ç”±

route add -net 192.168.0.0 netmask 255.255.255.0 dev eth0ï¼Œé€šè¿‡è®¾å¤‡eth0åœ¨ç½‘æ®µ192.168.0.0ä¸­å¢åŠ ä¸€ä¸ªè·¯ç”±ã€‚
route del default gw 10.1.1.1route add default gw 10.1.1.2
å°†åŸç½‘å…³åœ°å€10.1.1.1æ”¹ä¸º10.1.1.2ã€‚
rpm
rpm: Red Had package managementï¼Œç®¡ç†RPMè½¯ä»¶åŒ…

rpm -ivh postfix-2.5.6-i386.rpmï¼Œä½¿ç”¨rpmå‘½ä»¤å®‰è£…postfixã€‚
rpm -qi wgetï¼Œæ˜¾ç¤ºwgetè¯¦ç»†çš„å®‰è£…ä¿¡æ¯ã€‚
rpm -e sendmailï¼Œç§»é™¤sendmailã€‚
rsh
rsh: remote shellï¼Œè¿œç¨‹ç™»å½•çš„shell

rsh matt@10.1.1.5 /bin/lsï¼Œä½¿ç”¨mattè´¦å·ç™»å½•10.1.1.5å¹¶è¿è¡Œ/bin/lsã€‚
runlevel
runlevel: run levelï¼Œæ˜¾ç¤ºç›®å‰çš„è¿è¡Œç­‰çº§

Sscp
scp: secure copyï¼Œä½¿ç”¨åŠ å¯†è¿æ¥å¤åˆ¶æ–‡ä»¶

scp testfile john@10.1.1.2:/home/john/ï¼Œå°†æœ¬æœºçš„testfileæ–‡ä»¶ä»¥johnçš„èº«ä»½å¤åˆ¶åˆ°10.1.1.2ï¼ˆé»˜è®¤ç«¯å£ä¸º22ï¼‰ä¸Šã€‚
screen
screen: screenï¼Œå¤šé‡çª—å£ç®¡ç†è¿›ç¨‹

screenï¼Œä½¿ç”¨screenå‘½ä»¤åœ¨åŒä¸€ä¸ªç»ˆç«¯æœºä¸‹æ‰“å¼€ä¸¤ä¸ªçª—å£ï¼Œå¹¶è¿è¡Œä¸åŒçš„è¿›ç¨‹ã€‚
sed
sed: stream editorï¼Œæ–‡ä»¶å†…å®¹ä¿®æ”¹

sed &#39;2,4d&#39; testfileï¼Œå°†testfileçš„ç¬¬2~4è¡Œåˆ é™¤ã€‚
sed &#39;s/is/error/&#39; testfileï¼Œå°†testfileä¸­çš„æ¯è¡Œç¬¬ä¸€ä¸ªiså­—ç¬¦ä¸²æ¢æˆerrorã€‚
sed &#39;s/is/error/g&#39; testfileï¼Œå°†testfileä¸­çš„æ‰€æœ‰iså­—ç¬¦ä¸²æ¢æˆerrorã€‚
service
service: serviceï¼Œæ‰“å¼€æˆ–å…³é—­æœåŠ¡

service --status-allï¼Œæ˜¾ç¤ºæœåŠ¡å™¨ç›®å‰çš„çŠ¶æ€ã€‚
service postfix startï¼Œå¯åŠ¨postfixæœåŠ¡å™¨ã€‚
sestatus
sestatus: SELinux statusï¼Œæ˜¾ç¤ºSELinuxçš„çŠ¶æ€

sestatusï¼Œæ˜¾ç¤ºSELinuxçš„å½“å‰çŠ¶æ€ã€‚
sestatus -bï¼Œæ˜¾ç¤ºSELinuxä¸­å¸ƒå°”å€¼çš„çŠ¶æ€ã€‚
set
set: setï¼ŒæŸ¥çœ‹å’Œè®¾ç½®ç¯å¢ƒå˜é‡

setï¼ŒæŸ¥çœ‹ç³»ç»Ÿé»˜è®¤çš„ç¯å¢ƒå˜é‡ã€‚
set SHELL &quot;/bin/csh&quot;ï¼Œå°†å˜é‡åç§°SHELLè®¾ä¸º/bin/cshã€‚
setenforce
setenforce: set enforceï¼Œå¯ç”¨æˆ–å–æ¶ˆSELinuxçš„é™åˆ¶

setenforce 0ï¼Œå–æ¶ˆSELinuxçš„æ‰€æœ‰é™åˆ¶ã€‚
setenforce 1ï¼Œæ‰“å¼€SELinuxçš„é™åˆ¶ã€‚
setsebool
setsebool: set SELinux booleanï¼Œè®¾ç½®SELinuxçš„å¸ƒå°”å€¼

setsebool samba_enable_home_dirs 1ï¼Œå…è®¸sambaå…±äº«è´¦å·çš„å®¶ç›®å½•ã€‚
setsebool ftp_home_dir 1ï¼Œå…è®¸è´¦å·ftpè¿›å…¥è‡ªå·±çš„å®¶ç›®å½•ã€‚
showmount
showmount: show mountï¼Œæ˜¾ç¤ºNFSæ–‡ä»¶æŒ‚è½½çš„çŠ¶æ€

showmount -e 172.20.11.1ï¼Œæ˜¾ç¤º172.20.11.1è¿™å°NFSæœåŠ¡å™¨æ‰€å…±äº«çš„ç›®å½•ã€‚
shutdown
shutdown: shut downï¼Œå…³é—­ç³»ç»Ÿ

shutdown -h nowï¼Œç«‹å³å…³æœºã€‚
shutdown -h 0ï¼Œç«‹å³å…³æœºã€‚
shutdown 5 &quot;system will be off in 5 mins&quot;ï¼Œ5åˆ†é’Ÿåå…³æœºï¼Œå¹¶åœ¨æ¯ä¸ªç»ˆç«¯æœºçª—å£æç¤ºã€‚
sleep
sleep: sleepï¼Œæš‚åœè®¡æ—¶

date;sleep 10s;dateï¼Œæ˜¾ç¤ºç›®å‰æ—¶é—´åå»¶è¿Ÿ10ç§’ï¼Œä¹‹åå†æ¬¡æ˜¾ç¤ºæ—¶é—´ã€‚
sln
sln: static linkï¼Œæ–°å»ºæ–‡ä»¶é—´çš„è½¯è¿æ¥

sln /etc/hosts newhostï¼Œå»ºç«‹ä¸€ä¸ªé™æ€çš„è¿æ¥ã€‚
slogin
slogin: SSH loginï¼Œè¿œç¨‹åŠ å¯†çš„è¿æ¥

slocate
slocate: security enhanced locateï¼Œå¯»æ‰¾æ–‡ä»¶æˆ–ç›®å½•

smbpasswd
smbpasswd: samba passwordï¼Œæ”¹å˜sambaè´¦å·çš„å¯†ç 

smbpasswd -a devinï¼Œåœ¨sambaæœåŠ¡å™¨ä¸Šæ–°å»ºä¸€ä¸ªdevinè´¦å·ã€‚
smbpasswd -d devinï¼Œæš‚åœè´¦å·devinå¯¹sambaæœåŠ¡å™¨çš„ä½¿ç”¨æƒé™ã€‚
smbstatus
smbstatus: samba statusï¼Œæ˜¾ç¤ºsambaæœåŠ¡å™¨çš„çŠ¶æ€

sort
sort: sortï¼Œå°†æ–‡æœ¬æ–‡ä»¶çš„å†…å®¹é‡æ–°æ’åº

sort -t: /etc/passwdï¼Œå°†passwdä¸­çš„å†…å®¹æŒ‰ç…§è´¦æˆ·çš„å­—æ¯é¡ºåºæ’åºã€‚
ps -ef | sortï¼Œå¯¹äºè¿›ç¨‹ä¾ç…§è¿è¡Œçš„è´¦æˆ·æ’åºã€‚
split
split: splitï¼Œåˆ†å‰²æ–‡ä»¶

split -b 1000 vsftpd.confï¼Œå°†vsftpd.confåˆ†å‰²ä¸ºå°æ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶æœ€å¤§ä¸º1000Byteã€‚
split -l 30 -d vsftpd.confï¼Œå°†vsftpd.confåˆ†å‰²ä¸ºå°æ–‡ä»¶ï¼Œæ¯ä¸ªå°æ–‡ä»¶çš„è¡Œæ•°æœ€å¤šä¸º30è¡Œï¼Œä¸”å°æ–‡ä»¶çš„æ–‡ä»¶åä»¥æ•°å­—æ¥åŒºåˆ«ã€‚
ssh
ssh: secure shellï¼Œè¿œç¨‹åŠ å¯†çš„è¿æ¥

ssh 10.1.1.2ï¼Œé€šè¿‡sshè¿æ¥åˆ°ä¸»æœº10.1.1.2ã€‚
ssh 172.20.11.1 -p 12345 -l macroï¼Œè¿æ¥åˆ°172.20.11.1ï¼Œä½¿ç”¨ç«¯å£12345ï¼Œå¹¶ä½¿ç”¨marcoè´¦æˆ·ã€‚
stat
stat: statusï¼Œæ˜¾ç¤ºæ–‡ä»¶æˆ–æ–‡ä»¶ç³»ç»Ÿçš„çŠ¶æ€

stat vsftpd.confï¼Œæ˜¾ç¤ºæ–‡ä»¶vsftpd.confçš„çŠ¶æ€ã€‚
stat -f /dev/sda1ï¼Œæ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿ/dev/sda1çš„çŠ¶æ€ã€‚
su
su: substitute userï¼Œåˆ‡æ¢ç”¨æˆ·

suï¼Œé»˜è®¤åˆ‡æ¢rootè´¦å·ã€‚
su voidkingï¼Œåˆ‡æ¢ä¸ºvoidkingè´¦å·ã€‚
sudo
sudo: substitute user to do somethingï¼Œä½¿ç”¨æŒ‡å®šçš„è´¦å·æƒé™è¿è¡Œè¿›ç¨‹

sudo -u www vi /etc/httpd/conf/httpd.confï¼Œä½¿ç”¨èº«ä»½wwwç¼–è¾‘/etc/httpd/conf/httpd.confã€‚
sum
sum: sumï¼Œè®¡ç®—å¹¶æ˜¾ç¤ºæ–‡ä»¶çš„æ ‡è¯†ç¬¦

sum squid.confï¼Œæ˜¾ç¤ºæ–‡ä»¶çš„æ ‡è¯†ç¬¦ã€‚
suspend
suspend: suspendï¼Œæš‚åœå½“å‰æ‰€ä½¿ç”¨çš„shell

suspend -fï¼Œåœæ­¢ç›®å‰çš„shellã€‚
swapoff
swapoff: swap offï¼Œå…³é—­äº¤æ¢åŒºç©ºé—´

swapoff /dev/sda2ï¼Œå…³é—­å®šä¹‰åœ¨/dev/sda2ä¸Šçš„äº¤æ¢åŒºç©ºé—´ã€‚
swapoff -aï¼Œå…³é—­æ‰€æœ‰å®šä¹‰åœ¨/dev/fstabä¸Šçš„äº¤æ¢åŒºç©ºé—´ã€‚
swapon
swapon: swap onï¼ŒæŒ‚è½½äº¤æ¢åŒºç©ºé—´

swapon /dev/sda2ï¼ŒæŒ‚è½½/dev/sda2ä¸Šçš„äº¤æ¢åŒºç©ºé—´ã€‚
swapon -aï¼ŒæŒ‚è½½æ‰€æœ‰å®šä¹‰åœ¨/dev/fstabä¸Šçš„äº¤æ¢åŒºç©ºé—´ã€‚
sync
sync: synchronizeï¼Œå°†å†…å­˜ä¸­çš„æ•°æ®å­˜å›ç¡¬ç›˜

syncï¼Œå°†å†…å­˜ä¸­çš„æ•°æ®å†™å›ç¡¬ç›˜ã€‚
sysctl
sysctl: system controlï¼Œè®¾ç½®å†…æ ¸å‚æ•°

sysctl -aï¼Œåˆ—å‡ºæ­£åœ¨ä½¿ç”¨çš„å†…æ ¸å‚æ•°ã€‚
sysctl -w net.ipv4.ip_forward=1ï¼Œå°†net.ipv4.ip_forwardè®¾ä¸º1ã€‚
Ttac
tac: é¢ å€’çš„catï¼Œä»æ–‡ä»¶å†…å®¹ä»å°¾åˆ°å¤´æ˜¾ç¤º

tac file.txtï¼Œå°†æ–‡ä»¶ä»å°¾åˆ°å¤´ä»¥ååºæ˜¾ç¤ºã€‚
tail
tail: tailï¼Œæ˜¾ç¤ºæ–‡ä»¶åé¢çš„éƒ¨åˆ†

tail -n 10 file.txtï¼Œæ˜¾ç¤ºæ–‡ä»¶æœ€å10è¡Œã€‚
tail -f /var/log/maillogï¼ŒæŒç»­ç›‘æ§æ–‡ä»¶/var/log/maillogï¼Œåªè¦æ–‡ä»¶æœ‰æ–°å†…å®¹ï¼Œå°±åœ¨å±å¹•è¾“å‡ºã€‚
tar
tar: tape archiveï¼Œæ‰“åŒ…æ–‡ä»¶

tar -cvf mail.tar /var/spool/mailï¼Œå°†è´¦å·çš„é‚®ä»¶æ–‡ä»¶æ‰“åŒ…ä¸ºmail.tarã€‚
tar -xvf mail.tarï¼Œå°†ä¸€ä¸ªæ‰“åŒ…æ–‡ä»¶è§£å‹ç¼©åˆ°å½“å‰ç›®å½•ä¹‹ä¸‹ã€‚
tar -xvf mail.tar -C ./tmp/ï¼Œå°†æ‰“åŒ…æ–‡ä»¶è§£å‹ç¼©åˆ°/tmpä¸‹ã€‚
tar -zcvf conf.tar.gz /etc/*.confï¼Œä½¿ç”¨taræ‰“åŒ…æ–‡ä»¶ï¼Œå¹¶åªç”¨gzipå‹ç¼©è¯¥æ–‡ä»¶ã€‚
tar -zxvf conf.tar.gz -C ./tmp/ï¼Œå°†æ‰“åŒ…æ–‡ä»¶è§£å‹ç¼©åˆ°/tmpä¸‹ã€‚
tar -jcvf conf.tar.bz2 /etc/*.confï¼Œä½¿ç”¨taræ‰“åŒ…æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨bzip2å‹ç¼©è¯¥æ–‡ä»¶ã€‚
tar -jxvf conf.tar.bz2 -C ./tmp/ï¼Œå°†æ‰“åŒ…æ–‡ä»¶è§£å‹ç¼©åˆ°/tmpä¸‹ã€‚
tcpdump
tcpdump: TCP dumpï¼Œæ˜¾ç¤ºç½‘ç»œä¸ŠTCPçš„çŠ¶æ€

tcpdump -i eth0ï¼Œæ˜¾ç¤ºç½‘ç»œè®¾å¤‡eth0ä¸Šçš„æ•°æ®åŒ…çŠ¶æ€ã€‚
tee
tee: teeï¼Œè¯»å–æ–‡ä»¶å¹¶è¾“å‡º

tee -a fileï¼Œæ¥ç€è¾“å…¥é™„åŠ å†…å®¹ï¼Œctrl+Cè·³å‡ºã€‚
telinit
telinit: tell initï¼Œåˆ‡æ¢ç³»ç»Ÿç›®å‰çš„è¿è¡Œç­‰çº§

runleveltelinit 3runlevel
å°†ç›®å‰çš„è¿è¡Œç­‰çº§æ”¹ä¸º3ã€‚
telnet
telnet: tel netï¼Œè¿œç¨‹è¿æ¥ç¨‹åº

telnet 172.20.11.1ï¼Œè¿æ¥åˆ°172.20.11.1ä¸Šçš„telnetæœåŠ¡ã€‚
telnet localhost 25ï¼Œè¿æ¥åˆ°æœ¬æœºçš„25ç«¯å£ï¼ˆé‚®ä»¶æœåŠ¡å™¨ä½¿ç”¨çš„ç«¯å£ï¼‰ã€‚
tftp
tftp: trivial FTPï¼Œæ–‡ä»¶ä¼ è¾“

# tftp localhost&gt; help&gt; quit
è¿æ¥åˆ°æœ¬æœºtftpæœåŠ¡å™¨ã€‚
time
time: timeï¼Œç»Ÿè®¡æ—¶é—´æ¶ˆè€—

time ps -auxï¼Œè·å¾—æ‰§è¡Œps -auxçš„ç»“æœå’Œæ‰€èŠ±è´¹çš„ç³»ç»Ÿèµ„æºã€‚
top
top: topï¼ŒæŸ¥çœ‹ç›®å‰çš„è¿›ç¨‹çŠ¶æ€

topï¼Œæ˜¾ç¤ºæ‰€æœ‰çš„è¿›ç¨‹ä¸ç»Ÿè®¡ä¿¡æ¯ã€‚
top -u smmspï¼Œæ˜¾ç¤ºè´¦å·smmspæ‰€è¿è¡Œçš„è¿›ç¨‹ä¸ç»Ÿè®¡ä¿¡æ¯ã€‚
touch
touch: touchï¼Œæ›´æ”¹æ–‡ä»¶çš„æ—¶é—´æ ‡è®°

touch fileï¼Œæ–°å»ºä¸€ä¸ªåä¸ºfileçš„æ–‡ä»¶ã€‚
touch vsftpd.confï¼Œæ›´æ”¹å·²å­˜åœ¨æ–‡ä»¶çš„æ—¶é—´æ ‡è®°ã€‚
touch -d &quot;6:03pm&quot; file touch -d &quot;05/06/2000&quot; file touch -d &quot;6:03pm 05/06/2000&quot; file 
å°† file çš„æ—¶é—´è®°å½•æ”¹æˆ 5 æœˆ 6 æ—¥ 18 ç‚¹ 3 åˆ†ï¼Œå…¬å…ƒä¸¤åƒå¹´ã€‚æ—¶é—´å¯ä»¥ä½¿ç”¨ amï¼Œpm æˆ–æ˜¯ 24 å°æ—¶çš„æ ¼å¼ï¼Œæ—¥æœŸå¯ä»¥ä½¿ç”¨å…¶ä»–æ ¼å¼å¦‚ 6 May 2000ã€‚
tr
tr: translationï¼Œè½¬æ¢æˆ–æ›´æ”¹æ–‡ä»¶ä¸­çš„å­—ç¬¦

cat testfile | tr line abcdï¼Œå°†lineå­—ç¬¦ä¸²æ¢æˆabcdï¼ˆlæ¢æˆaï¼Œiæ¢æˆbï¼Œnæ¢æˆcï¼Œeæ¢æˆdï¼‰ã€‚
echo &quot;this is a test&quot; | tr a-z A-Z &gt; test.txtï¼Œè½¬æ¢â€œthis is a testâ€ä¸ºå¤§å†™ï¼Œå¹¶ä¸”å­˜å…¥test.txtæ–‡ä»¶ã€‚
cat test.txt | tr -d thisï¼Œå»æ‰å­—ç¬¦ä¸²ä¸­çš„tã€hã€iã€så››ä¸ªå­—ç¬¦ã€‚
tr -s &quot;this&quot; &quot;TEST&quot;ï¼Œå­—ç¬¦ä¸²ä¸­çš„tæ¢æˆTã€hæ¢æˆEï¼Œiæ¢æˆSï¼Œsæ¢æˆTã€‚
tracepath
tracepath: trace pathï¼Œè¿½è¸ªç½‘ç»œè¿æ¥çš„è·¯å¾„

tracepath 210.75.20.211ï¼Œè¿½è¸ªè¿æ¥åˆ°210.75.20.211çš„è·¯å¾„ã€‚
traceroute
traceroute: tracerouteï¼Œè¿½è¸ªè¿æ¥æ‰€ç»è¿‡çš„è·¯ç”±å™¨

traceroute 210.75.20.211ï¼Œæ˜¾ç¤ºè¿æ¥åˆ°210.75.20.211æ‰€ç»è¿‡çš„è·¯ç”±å™¨ã€‚
tune2fs
tune2fs: tune ext2 file systemï¼Œè°ƒæ•´æ–‡ä»¶ç³»ç»Ÿçš„å‚æ•°

tune2fs -l /dev/sda1ï¼Œåˆ—å‡º/dev/sda1çš„ç›¸å…³ä¿¡æ¯ã€‚
tune2fs -j /dev/sda1ï¼Œå°†æ–‡ä»¶ç³»ç»Ÿç”±ext2è°ƒæ•´ä¸ºext3ã€‚
Uulimit
ulimit: user limitï¼Œæ§åˆ¶ç³»ç»Ÿèµ„æº

ulimit -aï¼Œæ˜¾ç¤ºå½“å‰çš„ç³»ç»Ÿèµ„æºä½¿ç”¨é™åˆ¶ã€‚
ulimit -l 102400ï¼Œè®¾ç½®æ‰€æœ‰ç”¨æˆ·æ‰€èƒ½ä½¿ç”¨çš„å†…å­˜ä¸º102400KBã€‚
umask
umask: user file creation mode maskï¼Œè®¾ç½®æ–°å»ºæ–‡ä»¶çš„å±è”½æƒé™

umaskï¼Œæ˜¾ç¤ºé»˜è®¤çš„æ–‡ä»¶æƒé™ã€‚
umask -Sï¼Œç”¨è¾ƒæ˜“é˜…è¯»çš„æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶æƒé™ã€‚
umount
umount: un-mountï¼Œå¸è½½æ–‡ä»¶ç³»ç»Ÿ

umount /cdromï¼Œå¸è½½å·²æŒ‚è½½çš„çš„ç›®å½•/cdromã€‚
umount -aï¼Œå¸è½½æ‰€æœ‰å®šä¹‰åœ¨/etc/mtabä¸­çš„æ–‡ä»¶ç³»ç»Ÿã€‚
unalias
unalias: un-aliasï¼Œåˆ é™¤åˆ«åè®¾ç½®

unalias llï¼Œå°†å·²å®šä¹‰çš„åˆ«ållåˆ é™¤ã€‚
uname
uname: UNIX nameï¼Œæ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯

uname -aï¼Œæ˜¾ç¤ºæ‰€æœ‰ä¿¡æ¯ã€‚
uname -iï¼Œæ˜¾ç¤ºç¡¬ä»¶å¹³å°ã€‚
uncompress
uncompress: un-compressï¼Œè§£å‹ç¼©Zæ ¼å¼çš„å‹ç¼©æ–‡ä»¶

uncompress -v test.Zï¼Œè§£å‹ç¼©test.Zæ–‡ä»¶å¹¶ä¸”æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ã€‚
uniq
uniq: uniqueï¼Œåˆ é™¤æ–‡ä»¶ä¸­é‡å¤çš„è¡Œ

uniq testfileï¼Œå°†æ–‡ä»¶å”¯ä¸€åŒ–ï¼ˆé‡å¤çš„è¡Œæ˜¾ç¤ºä¸€è¡Œï¼‰ã€‚
uniq -d testfileï¼Œæ˜¾ç¤ºæ–‡ä»¶ä¸­é‡å¤å‡ºç°çš„è¡Œã€‚
unset
unset: un-setï¼Œåˆ é™¤å˜é‡è®¾ç½®

unset colorï¼Œå°†å˜é‡colorçš„è®¾ç½®åˆ é™¤ã€‚
unzip
unzip: un-zipï¼Œè§£å‹ç¼©zipæ–‡ä»¶

unzip -l file.zipï¼Œæ˜¾ç¤ºå‹ç¼©æ–‡ä»¶file.zipä¸­çš„æ–‡ä»¶åˆ—è¡¨ã€‚
unzip file.zipï¼Œè§£å‹ç¼©file.zipã€‚
uptime
uptime: up timeï¼Œæ˜¾ç¤ºç³»ç»Ÿå·²ç»è¿è¡Œçš„æ—¶é—´

uptimeï¼Œæ˜¾ç¤ºç³»ç»Ÿå·²è¿è¡Œçš„æ—¶é—´ã€‚
useradd
useradd: user addï¼Œæ–°å»ºè´¦å·

useradd -m maxï¼Œæ–°å¢ä¸€ä¸ªç”¨æˆ·maxã€‚
useradd -u 1001 -d /opt/jerry -m jerryï¼Œæ–°å¢ä¸€ä¸ªç”¨æˆ·jerryï¼Œå¹¶æŒ‡å®šè¯¥ç”¨æˆ·UIDä¸º1001ï¼Œä¸”å®¶ç›®å½•ä¸º/opt/jerryã€‚
userdel
userdel: user delï¼Œåˆ é™¤è´¦å·

userdel peterï¼Œåˆ é™¤ç”¨æˆ·peterã€‚ä¸åŠ ä»»ä½•å‚æ•°ï¼Œä»…åˆ é™¤è¯¥ç”¨æˆ·ï¼Œä¸ä¼šåˆ é™¤è¯¥ç”¨æˆ·çš„å®¶ç›®å½•ã€‚
usermod
usermod: user modeï¼Œä¿®æ”¹è´¦å·è®¾ç½®

usermod -d /data/john johnï¼Œå°†ç”¨æˆ·johnçš„ç™»å½•ç›®å½•æ”¹ä¸º/data/johnã€‚
usermod -e 01/31/2018 alexï¼Œå°†ç”¨æˆ·alexçš„æœ‰æ•ˆæœŸé™è®¾ä¸º2018å¹´1æœˆ31æ—¥ã€‚
usermod -l alex peterï¼Œå°†è´¦å·peteræ”¹ä¸ºalexã€‚
usermod -g users alexï¼Œå°†ç”¨æˆ·alexçš„ç¾¤ç»„æ”¹ä¸ºusersã€‚
users
users: user statusï¼Œæ˜¾ç¤ºç™»å½•è´¦å·

usersï¼Œæ˜¾ç¤ºç™»å½•çš„ç”¨æˆ·åç§°ã€‚
Vvi
vi: viewï¼Œæ–‡æœ¬ç¼–è¾‘

vi install.logï¼Œç¼–è¾‘æ–‡ä»¶install.logã€‚
vi/vimç¼–è¾‘å™¨å¸¸ç”¨å‘½ä»¤ä¸ç”¨æ³•æ€»ç»“
view
view: viewï¼Œæ–‡æœ¬ç¼–è¾‘

viewæ˜¯ä¸€ä¸ªè¿æ¥åˆ°viçš„è¿æ¥æ–‡ä»¶ï¼Œä¸viå®Œå…¨ç›¸åŒã€‚
vim
vim: vi improvedï¼Œæ–‡æœ¬ç¼–è¾‘

vimæ˜¯viçš„å‡çº§ç‰ˆï¼Œç”¨æ³•å‚è€ƒviã€‚
vlock
vlock: virtual lockï¼Œé”å®šè™šæ‹Ÿæ§åˆ¶å°çš„ä½¿ç”¨æƒ

vlockï¼Œå°†ç›®å‰çš„çª—å£é”å®šã€‚
vmstat
vmstat: virtual memory statusï¼Œæ˜¾ç¤ºè™šæ‹Ÿå†…å­˜çš„çŠ¶æ€

vmstatï¼Œæ˜¾ç¤ºè™šæ‹Ÿå†…å­˜ç›®å‰çš„ä½¿ç”¨çŠ¶å†µã€‚
vmstat -dï¼Œæ˜¾ç¤ºç£ç›˜çš„ä½¿ç”¨çŠ¶å†µã€‚
vmstat -sï¼Œæ˜¾ç¤ºå¤šæ ·çš„æ•°æ®ä¸ç»Ÿè®¡ä¿¡æ¯ã€‚
Ww
w: whoï¼Œæ˜¾ç¤ºç›®å‰ç™»å½•çš„è´¦å·ä¿¡æ¯

wï¼Œæ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·çš„æ•°æ®ã€‚
wait
wait: waitï¼Œç­‰å¾…ç¨‹åºä¼ å›ä¿¡æ¯

wait 3305ï¼Œç­‰å¾…è¿›ç¨‹ä¸º3305çš„ç¨‹åºä¼ å›å€¼ã€‚
wall
wall: wallï¼Œå¹¿æ’­ä¿¡æ¯

wall hiï¼Œä¼ è®¯æ¯â€hiâ€ç»™æ¯ä¸€ä¸ªç”¨æˆ·ã€‚
watch
watch: watchï¼Œå…¨å±è¾“å‡ºå‘½ä»¤çš„è¿è¡Œç»“æœ

watch -n 5 tail /var/log/messagesï¼Œæ¯ä¸ª5sè¿è¡Œä¸€æ¬¡tail /var/log/messagesã€‚
wc
wc: word countï¼Œè®¡ç®—æ–‡ä»¶çš„å­—èŠ‚æ•°ã€å­—æ•°æˆ–è¡Œæ•°

wc -c install.logï¼Œæ˜¾ç¤ºinstall.logçš„å­—ç¬¦æ•°ã€‚
wc -l install.logï¼Œæ˜¾ç¤ºinstall.logçš„è¡Œæ•°ã€‚
wget
wget: WWW getï¼Œä»æŒ‡å®šçš„ç½‘ç«™ä¸‹è½½æ–‡ä»¶

wget http://apache.mirror.com/httpd/httpd-2.2.8.tar.gzï¼Œä¸‹è½½httpd-2.2.8.tar.gzã€‚
wget -t 5 http://apache.mirror.com/httpd/httpd-2.2.8.tar.gzï¼Œä¸‹è½½httpd-2.2.8.tar.gzï¼Œæœ€å¤šå°è¯•5æ¬¡ã€‚
whatis
whatis: what isï¼ŒæŸ¥æ‰¾åœ¨çº¿å¸®åŠ©çš„ä½ç½®

whatis killï¼Œå¯»æ‰¾å‘½ä»¤killçš„åœ¨çº¿å¸®åŠ©æ‰€åœ¨çš„ä½ç½®ã€‚
whereis
whereis: where isï¼ŒæŸ¥æ‰¾ç›¸å…³çš„æ–‡ä»¶

whereis killï¼ŒæŸ¥æ‰¾å‘½ä»¤killçš„ç›¸å…³æ–‡ä»¶ã€‚
whereis hosts.allowï¼ŒæŸ¥æ‰¾host.allowçš„ç›¸å…³æ–‡ä»¶ã€‚
which
which: whichï¼ŒæŸ¥æ‰¾æŒ‡å®šçš„æ–‡ä»¶

which catï¼Œå¯»æ‰¾æ–‡ä»¶catã€‚
who
who: whoï¼Œæ˜¾ç¤ºç›®å‰ç™»å½•çš„è´¦å·ä¿¡æ¯

whoï¼Œæ˜¾ç¤ºå½“å‰ç™»å½•ç³»ç»Ÿçš„è´¦æˆ·ã€‚
who -qï¼Œæ˜¾ç¤ºå½“å‰ç™»å½•çš„ç”¨æˆ·åç§°åŠæ€»äººæ•°ã€‚
who -rï¼Œæ˜¾ç¤ºå½“å‰çš„è¿è¡Œç­‰çº§ã€‚
whoami
whoami: who am iï¼Œæ˜¾ç¤ºè´¦å·åç§°

whoamiï¼Œæ˜¾ç¤ºè‡ªå·±çš„ç”¨æˆ·åç§°ã€‚
write
write: writeï¼Œå‘é€ä¿¡æ¯ç»™å…¶ä»–è´¦å·

write Rollaendï¼Œä¼ è®¯æ¯ç»™Rollaendï¼Œæ­¤æ—¶ Rollaend åªæœ‰ä¸€ä¸ªè¿çº¿ã€‚æ¥ä¸‹æ¥å°±æ˜¯å°†è®¯æ¯æ‰“ä¸Šå»ï¼Œç»“æŸæŒ‰ ctrl+cã€‚
write Rollaend pts/2ï¼Œä¼ è®¯æ¯ç»™ Rollaendï¼ŒRollaend çš„è¿çº¿æœ‰ pts/2ï¼Œpts/3ã€‚æ³¨æ„ï¼šè‹¥å¯¹æ–¹è®¾å®š mesg nï¼Œåˆ™æ­¤æ—¶è®¯æ¯å°†æ— æ³•ä¼ ç»™å¯¹æ–¹ã€‚
Xxauth
xauth: X-authenticationï¼Œç¼–è¾‘XæœåŠ¡å™¨çš„æˆæƒä¿¡æ¯

xauthï¼Œè¿›å…¥å‘½ä»¤è¡Œäº’åŠ¨æ¨¡å¼ã€‚
xhost
xhost: X-hostï¼Œç®¡ç†å­˜å–XæœåŠ¡å™¨çš„æƒé™

xhostï¼Œæ˜¾ç¤ºç›®å‰çš„xhostçŠ¶æ€ã€‚
xhost +192.168.0.1ï¼Œå…è®¸åœ°å€192.168.0.1å¯¹æœ¬æœºçš„XæœåŠ¡å™¨æœ‰è®¿é—®æƒé™ã€‚
xset
xset: X-setï¼Œè®¾ç½®X-windowçš„å‚æ•°

xset s onï¼Œæ‰“å¼€å±å¹•ä¿æŠ¤åŠŸèƒ½ã€‚
xset qï¼Œæ˜¾ç¤ºç›®å‰çŠ¶æ€ã€‚
Yyes
yes: yesï¼Œå“åº”ç›¸åŒçš„å­—ç¬¦ä¸²

yes helloï¼Œåˆ©ç”¨yeså‘½ä»¤é‡å¤å“åº”å­—ç¬¦ä¸²helloã€‚
yum
yum: yellowdog updater modifiedï¼ŒRPMè½¯ä»¶åŒ…çš„é«˜çº§ç®¡ç†

yum check-updateï¼Œåˆ—å‡ºæ‰€æœ‰å¯å‡çº§çš„è½¯ä»¶åŒ…ã€‚
yum install lynxï¼Œå®‰è£…lynxè½¯ä»¶åŒ…ã€‚
yum update webalizerï¼Œå‡çº§webalizerè½¯ä»¶åŒ…ã€‚
# yum shell&gt; update vino&gt; run&gt; exit
ä½¿ç”¨shellå‡çº§vinoè½¯ä»¶åŒ…ã€‚
Zzcat
zcat: zip concatenateï¼Œåˆ—å‡ºå‹ç¼©æ–‡ä»¶ä¸­çš„æ–‡ä»¶å†…å®¹

zcat file.zipï¼ŒæŸ¥çœ‹å‹ç¼©æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œåªèƒ½åˆ—å‡ºå‹ç¼©æ–‡ä»¶å†…çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚
zgrep
zgrep: gz grepï¼ŒæŸ¥æ‰¾gzæˆ–Zæ–‡ä»¶ä¸­ç‰¹å®šçš„å­—ç¬¦ä¸²

zgrep line3 file.Zï¼Œç”¨zgrepå‘½ä»¤æŸ¥æ‰¾å‹ç¼©æ–‡ä»¶ä¸­åŒ…å«line3çš„å­—ç¬¦ä¸²ã€‚
zgrep line3 file.gzï¼Œç”¨zgrepå‘½ä»¤æŸ¥æ‰¾å‹ç¼©æ–‡ä»¶ä¸­åŒ…å«line3çš„å­—ç¬¦ä¸²ã€‚
zip
zip: zipï¼Œå°†æ–‡ä»¶å‹ç¼©ä¸ºzipæ ¼å¼

zip file.Z file*ï¼Œå°†æ–‡ä»¶åfileå¼€å¤´çš„æ–‡ä»¶å‹ç¼©ä¸ºfile.Zã€‚
zip -d file.Z file1.zipï¼Œæ‰¿æ¥ä¸Šä¾‹ï¼Œç§»é™¤å‹ç¼©æ–‡ä»¶file.Zä¸­çš„file1.zipã€‚
zipgrep
zipgrep: zip grepï¼ŒæŸ¥æ‰¾zipæ–‡ä»¶ä¸­ç‰¹å®šçš„å­—ç¬¦ä¸²

zipgrep Th file1.zipï¼Œå¯»æ‰¾å‹ç¼©æ–‡ä»¶file1.zipä¸­åŒ…å«å­—ç¬¦ä¸²Thçš„æ–‡ä»¶ï¼Œå¹¶åˆ—å‡ºè¯¥è¡Œã€‚
zipinfo
zipinfo: zip informationï¼Œæ˜¾ç¤ºzipå‹ç¼©æ–‡ä»¶çš„ä¿¡æ¯

zipinfo file.Zï¼Œæ˜¾ç¤ºæ–‡ä»¶file.Zçš„å‹ç¼©å†…å®¹ã€‚
zless
zless: zip lessï¼Œæ˜¾ç¤ºgzæˆ–Zæ–‡ä»¶çš„å†…å®¹

zless file.gzï¼ŒæŸ¥çœ‹å‹ç¼©æ–‡ä»¶çš„å†…å®¹ã€‚
znew
znew: Z new compressionï¼Œå°†Zæ–‡ä»¶é‡æ–°å‹ç¼©ä¸ºgzæ–‡ä»¶

znew file.Zï¼Œå°†æ–‡ä»¶file.Zè½¬æ¢ä¸ºfile.gzã€‚è‹¥Zæ–‡ä»¶ä¸­åŒ…å«å¤šä¸ªæ–‡ä»¶ï¼Œå°†æ— æ³•ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxå‘½ä»¤å¤§å…¨â€”â€”LMNOPQ</title>
    <url>/dev-linux-command-all-lmnopq/</url>
    <content><![CDATA[æœ¬æ–‡æ‘˜è‡ªã€ŠLinux/UNIXæŒ‡ä»¤èŒƒä¾‹é€ŸæŸ¥æ‰‹å†Œã€‹ã€‚
Llast
last: last loginï¼Œæ˜¾ç¤ºæ›¾ç™»å½•çš„è´¦å·

lastï¼Œæ˜¾ç¤ºæ›¾ç™»å½•çš„è´¦å·ã€‚
last -xï¼Œæ˜¾ç¤ºç³»ç»Ÿå…³æœºå‚æ•°ä¸è¿è¡Œç­‰çº§ã€‚
lastb
lastb: last bad loginï¼Œæ˜¾ç¤ºç™»å½•å¤±è´¥çš„è´¦å·

lastbï¼Œæ˜¾ç¤ºç™»å½•å¤±è´¥çš„è´¦å·ã€‚
lastb -iï¼Œæ˜¾ç¤ºIPåœ°å€ï¼Œè€Œä¸æ˜¾ç¤ºä¸»æœºåç§°ã€‚
ldd
ldd: library dependenciesï¼Œåˆ—å‡ºä¸æ–‡ä»¶æœ‰å…³çš„å‡½æ•°åº“

ldd /bin/netstatï¼Œæ˜¾ç¤º/bin/netstatæ‰€ä½¿ç”¨çš„å…±äº«å‡½æ•°åº“ã€‚
ldd /bin/catï¼Œæ˜¾ç¤º/bin/catæ‰€ä½¿ç”¨çš„å…±äº«å‡½æ•°åº“ã€‚
less
less: lessï¼Œæ˜¾ç¤ºæ–‡ä»¶å†…å®¹

less ezhttp.logï¼Œåˆ†é¡µæŸ¥çœ‹ezhttp.logæ–‡ä»¶ã€‚ä½¿ç”¨pgupå’Œpgdnä¸Šä¸‹ç¿»é¡µï¼Œä½¿ç”¨qé€€å‡ºã€‚
ps -ef | lessï¼ŒpsæŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯å¹¶é€šè¿‡lessåˆ†é¡µæ˜¾ç¤ºã€‚
lilo
lilo: LInux LOaderï¼Œå¼€æœºå¯åŠ¨ç¨‹åº

lilo -v -v -vï¼Œè®¾ç½®å®Œ/etc/lilo.confå¼€æœºé…ç½®åï¼Œä½¿ä¹‹å¼€æœºæ—¶ç”Ÿæ•ˆï¼ŒæŒ‡å®šæ˜¾ç¤ºç¬¬ä¸‰çº§æ¨¡å¼ã€‚
ln
ln: linkï¼Œæ–°å»ºæ–‡ä»¶ä¹‹é—´çš„è¿æ¥

ln -s yy zzï¼Œå°†æ–‡ä»¶yyäº§ç”Ÿä¸€ä¸ªç¬¦å·é“¾æ¥zzã€‚ã€€ã€€ln yy xxï¼Œå°†æ–‡ä»¶yyäº§ç”Ÿä¸€ä¸ªç¡¬é“¾æ¥zzã€‚
lndir
lindir: link directoryï¼Œæ–°å»ºç›®å½•ä¹‹é—´çš„è¿æ¥

lndir /etc/vsftpd/ï¼Œæ–°å»ºç›®å½•çš„è¿æ¥ã€‚
lnstat
lnstat: linux network statisticsï¼Œåˆ—å‡ºç½‘ç»œæ•°æ®ç»Ÿè®¡ä¿¡æ¯ã€‚

lnstat -dï¼Œåˆ—å‡ºæ”¯æŒçš„ç»Ÿè®¡æ–‡ä»¶ã€‚
locate
locate: locateï¼Œåœ¨ç³»ç»Ÿä¸­æŸ¥æ‰¾åŒ…å«ç‰¹å®šå­—ç¬¦ä¸²çš„æ–‡ä»¶

locate mysql.sockï¼Œåœ¨æ•´ä¸ªç³»ç»Ÿä¸­æŸ¥æ‰¾mysql.sockçš„æ–‡ä»¶ã€‚ 
locate -n 100 a.outï¼Œåœ¨æ•´ä¸ªç³»ç»Ÿä¸­æŸ¥æ‰¾a.outæ–‡ä»¶ï¼Œä½†æœ€å¤šåªæ˜¾ç¤º100ä¸ªã€‚
locate -uï¼Œå»ºç«‹èµ„æ–™åº“ã€‚
ç³»ç»Ÿå¦‚æœæ‰¾ä¸åˆ°locateå‘½ä»¤ï¼Œéœ€è¦å…ˆå®‰è£…locateï¼Œyum install mlocateï¼Œç„¶åæ›´æ–°locateçš„æ•°æ®åº“ï¼Œupdatedbã€‚
logname
logname: login nameï¼Œåˆ—å‡ºç™»å½•çš„è´¦å·

lognameï¼Œæ˜¾ç¤ºæœ€å¼€å§‹ç™»å½•ç³»ç»Ÿçš„è´¦å·ã€‚
logrotate
logrotate: log rotateï¼Œå®šæœŸæˆ–å®šé‡å°†æ—¥å¿—æ–‡ä»¶å‹ç¼©å¤‡ä»½

logrotate /etc/logrotate.confï¼Œæ‰§è¡Œlogrotateå‘½ä»¤å¹¶é‡‡ç”¨/etc/logrotate.confä¸­çš„è®¾ç½®ã€‚
logsave
logsave: log saveï¼Œå°†åˆ¶å®šç¨‹åºçš„è¾“å‡ºå­˜ä¸ºæ—¥å¿—æ–‡ä»¶

logsave ps.txt psï¼Œå°†psçš„è¾“å‡ºè®°å½•åˆ°æ–‡ä»¶ps.txtä¸­ã€‚
lp
lp: line printerï¼Œæ‰“å°æ–‡ä»¶

lp file1ï¼Œå°†file1é€šè¿‡é»˜è®¤çš„æ‰“å°æœºè¾“å…¥ã€‚
lpq
lpq: line printer queueï¼Œåˆ—å‡ºæ­£åœ¨ç­‰å¾…æ‰“å°æœºçš„é˜Ÿåˆ—

lpqï¼Œåˆ—å‡ºç›®å‰æ‰“å°æœºçš„é˜Ÿåˆ—çŠ¶æ€ã€‚
lprm
lprm: line printer removeï¼Œåˆ é™¤æ­£åœ¨æ‰“å°çš„ä»»åŠ¡

lprm -ï¼Œå–æ¶ˆæ‰€æœ‰çš„æ‰“å°ä»»åŠ¡ã€‚
ls
ls: listï¼Œåˆ—å‡ºç›®å½•æˆ–æ–‡ä»¶å

ls -ltr s*ï¼Œåˆ—å‡ºå½“å‰å·¥ä½œç›®å½•ä¸‹æ‰€æœ‰åç§°æ˜¯så¼€å¤´çš„æ–‡ä»¶ï¼Œæ–°çš„æ’åé¢ã€‚ã€€ã€€ls -lR /homeï¼Œå°† /home ç›®å½•ä»¥ä¸‹æ‰€æœ‰ç›®å½•åŠæ–‡ä»¶è¯¦ç»†èµ„æ–™åˆ—å‡ºã€‚ã€€ã€€ls -AFï¼Œåˆ—å‡ºç›®å‰å·¥ä½œç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶åŠç›®å½•ã€‚ç›®å½•åç§°åä¼šåŠ  â€œ/â€œï¼Œå¯æ‰§è¡Œæ–‡ä»¶åç§°åä¼šåŠ â€*â€ï¼Œé“¾æ¥æ–‡ä»¶åä¼šåŠ â€@â€ã€‚
lsattr
lsattr: list attributeï¼Œåˆ—å‡ºext2æˆ–ext3ç³»ç»Ÿä¸­æ–‡ä»¶çš„å±æ€§

lsattrï¼Œåˆ—å‡ºå½“å‰æ–‡ä»¶çš„ç±»åˆ«ã€‚
lsmod
lsmod: list moduleï¼Œåˆ—å‡ºå†…æ ¸æ¨¡å—çš„ä½¿ç”¨çŠ¶æ€

lsmodï¼Œåˆ—å‡ºï¼ˆéƒ¨åˆ†ï¼‰å†…æ ¸æ¨¡å—åœ¨RedHatä¸Fedoraä¸Šçš„ä½¿ç”¨çŠ¶æ€ã€‚
lsusb
lsusb: list usbï¼Œåˆ—å‡ºæ‰€æœ‰USBè®¾å¤‡ã€‚

lsusbï¼Œåˆ—å‡ºç›®å‰çš„USBè®¾å¤‡ã€‚
lynx
lynx: ç”±å¤§å­¦å®éªŒå®¤ä¸­å‘½åè€Œæ¥ï¼Œæ–‡å­—ç•Œé¢ä¸Šæ˜¾ç¤ºç½‘é¡µå†…å®¹

lynx www.google.comï¼Œé€šè¿‡lynxå‘½ä»¤åœ¨ç»ˆç«¯æœºä¸Šæµè§ˆç½‘é¡µã€‚
Mmail
mail: mailï¼Œæ”¶å‘é‚®ä»¶

mail -s &quot;test mail&quot; voidking@qq.comï¼Œä¿¡ä»¶ä¸»é¢˜ä¸ºâ€œtest mailâ€ï¼Œç„¶åè¾“å…¥å³é”®å†…å®¹ã€‚ä¿¡ä»¶ç»“æŸæ—¶ï¼Œè¾“å…¥ä¸€ä¸ªç‚¹å¹¶æŒ‰enteré”®ã€‚ç„¶åè¾“å…¥å‘ä»¶äººçš„emailåœ°å€ï¼Œæ²¡æœ‰å°±æŒ‰enteré”®ã€‚ 
å¦‚æœæ²¡æœ‰mailå‘½ä»¤ï¼Œéœ€è¦å…ˆå®‰è£…mailxï¼Œyum install mailxã€‚
mailstats
mailstats: mail statusï¼Œæ˜¾ç¤ºç›®å‰çš„é‚®ä»¶çŠ¶æ€

mailstatsï¼Œåˆ—å‡ºç›®å‰çš„é‚®ä»¶ç»Ÿè®¡è¡¨ã€‚
mailq
mailq: mail quequeï¼Œåˆ—å‡ºé˜Ÿåˆ—ä¸­çš„é‚®ä»¶

mailqï¼Œåˆ—å‡ºæ‰€æœ‰åœ¨é˜Ÿåˆ—ä¸­å°šæœªå¯„å‡ºé‚®ä»¶ã€‚
make
make: make gcc programï¼Œç»´æŠ¤æˆ–ç¼–è¯‘ç¨‹åºç»„

make -C /etc/mailï¼Œåœ¨RedHadä¸‹ç¼–è¯‘sendmailçš„é…ç½®æ–‡ä»¶ã€‚
cd /usr/src/linuxmakemake modules_installmake install
è¿è¡Œç¼–è¯‘å†…æ ¸çš„ç¼–è¯‘é¡ºåºã€‚
makemap
makemap: make map filesï¼Œäº§ç”Ÿsendmailçš„æ•°æ®åº“æ–‡ä»¶

makemap -lï¼Œåˆ—å‡ºæ”¯æŒçš„è½¬æ¢æ–‡ä»¶ç±»å‹ã€‚
makemap hash /etc/mail/access.db &lt; /etc/mail/accessï¼Œé€šè¿‡/etc/mail/accessäº§ç”Ÿ/etc/mail/access.dbè½¬æ¢æ–‡ä»¶ã€‚
man
man: manualï¼Œæ˜¾ç¤ºåœ¨çº¿å¸®åŠ©ä¿¡æ¯

man killï¼Œæ˜¾ç¤ºkillå‘½ä»¤è¯´æ˜ã€‚
man -K killï¼Œæ˜¾ç¤ºæ‰€æœ‰ä¸killæœ‰å…³çš„è¯´æ˜ã€‚
manpath
manpath: manual pathï¼Œæ˜¾ç¤ºåœ¨çº¿å¸®åŠ©çš„æœç´¢è·¯å¾„

manpathï¼Œæ˜¾ç¤ºåœ¨çº¿å¸®åŠ©çš„æœç´¢è·¯å¾„ã€‚
md5sum
md5sum: MD5 check sumï¼Œè®¡ç®—å¹¶æ˜¾ç¤ºMD5 sumã€‚

md5sum file1ï¼Œæ£€éªŒæ–‡ä»¶file1çš„MD5 sumã€‚
cat checktxtï¼Œmd5sum -c check.txtï¼Œæ£€éªŒcheck.txtä¸­æ‰€è®°è½½çš„MD5 sumæ˜¯å¦æ­£ç¡®ã€‚
mesg
mesg: messageï¼Œæ§åˆ¶ç»ˆç«¯æœºçš„å†™å…¥æƒé™

mesgï¼ŒæŸ¥çœ‹å…¶ä»–äººå¯¹å½“å‰ç»ˆç«¯æœºçš„å†™å…¥æƒé™ã€‚
mesg nï¼Œå…³é—­å…¶ä»–äººå¯¹å½“å‰ç»ˆç«¯æœºçš„å†™å…¥æƒé™ã€‚
mkbootdisk
mkbootdisk: make boot diskï¼Œåˆ¶ä½œå¯åŠ¨ç›˜

mkbootdisk --device /dev/fd0 --verbose 2.6.33ï¼Œä½¿ç”¨2.6.33çš„å†…æ ¸åˆ¶ä½œå¯åŠ¨ç›˜ã€‚
mkdir
mkdir: make directoryï¼Œæ–°å»ºç›®å½•

mkdir tempï¼Œåœ¨å½“å‰ç›®å½•ä¸‹æ–°å»ºtempå­ç›®å½•ã€‚
mkdir -p /opt/www/testï¼Œæ–°å»ºæ‰€æœ‰ä¸å­˜åœ¨çš„ç›®å½•å’Œä¸Šå±‚ç›®å½•ã€‚
mke2fs
mke2fs: make ext2/ext3 file systemï¼Œæ ¼å¼åŒ–ä¸ºext2ã€ext3æˆ–ext4çš„æ–‡ä»¶ç³»ç»Ÿ

mke2fs /dev/sda3ï¼Œå°†åˆ†åŒºæ ¼å¼åŒ–ä¸ºext2çš„æ–‡ä»¶ç³»ç»Ÿã€‚
mke2fs -j /dev/sda3ï¼Œå°†åˆ†åŒºæ ¼å¼åŒ–ä¸ºext3çš„æ–‡ä»¶ç³»ç»Ÿã€‚
mke2fs -t ext4 /dev/sda3ï¼Œå°†åˆ†åŒºæ ¼å¼åŒ–ä¸ºext4çš„æ–‡ä»¶ç³»ç»Ÿã€‚
mkfs
mkfs: make file systemï¼Œæ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿ

mkfs /dev/sda1ï¼Œå°†åˆ†åŒº/dev/sda1æ ¼å¼åŒ–ä¸ºé»˜è®¤çš„ext2æ–‡ä»¶ç³»ç»Ÿã€‚
mkfs.xfs
mkfs.xfs: make XFS file systemï¼Œæ ¼å¼åŒ–ä¸ºxfsçš„æ–‡ä»¶ç³»ç»Ÿ

mkfs.xfs /dev/sdc3ï¼Œå°†åˆ†åŒºæ ¼å¼åŒ–ä¸ºxfsçš„æ–‡ä»¶ç³»ç»Ÿã€‚
mkinitrd
mkinitrd: make initial ramdisk imagesï¼Œå»ºç«‹ramdiskçš„é•œåƒæ–‡ä»¶

uname -aï¼Œåˆ›å»ºä¸€ä¸ªé•œåƒæ–‡ä»¶ã€‚
mkinitrd /boot/initrd-new.img 2.6.33-85.fc13.i686.PAEï¼Œåˆ›å»ºä¸€ä¸ªé•œåƒæ–‡ä»¶ã€‚
mkreiserfs
mkreiserfs: make reiser file systemï¼Œæ ¼å¼åŒ–ä¸ºreiserfsçš„æ–‡ä»¶ç³»ç»Ÿ

mkreiserfs /dev/sda1ï¼Œå°†åˆ†åŒº/dev/sda1æ ¼å¼åŒ–ä¸ºreiserfsçš„æ–‡ä»¶ç³»ç»Ÿã€‚
mkswap
mkswap: make swapï¼Œæ–°å»ºswapç©ºé—´

mkswap /dev/sda2ï¼Œæ–°å»ºä¸€ä¸ªswapç©ºé—´ã€‚
modinfo
modinfo: module informationï¼Œæ˜¾ç¤ºå†…æ ¸æ¨¡å—çš„ä¿¡æ¯

modinfo miiï¼Œæ˜¾ç¤ºmiiæ¨¡å—çš„ä¿¡æ¯ã€‚
modinfo -a sndï¼Œåªæ˜¾ç¤ºsndæ¨¡å—çš„ä½œè€…ä¿¡æ¯ã€‚
modprobe
modeprobe: module probeï¼Œä»å†…æ ¸ä¸­æ–°å»ºæˆ–åˆ é™¤æ¨¡å—

modprobe -l ext*ï¼Œæ˜¾ç¤ºåç§°ä»¥extå¼€å¤´çš„æ¨¡å—åç§°ã€‚
modprobe --show-depends ext2ï¼Œæ˜¾ç¤ºä¸ext2æœ‰å…³çš„æ¨¡å—åç§°ã€‚
more
more: moreï¼Œæ˜¾ç¤ºæ–‡ä»¶å†…å®¹

more -s testfileï¼Œé€é¡µæ˜¾ç¤º testfile çš„æ–‡ä»¶å†…å®¹ï¼Œå¦‚æœ‰è¿ç»­ä¸¤è¡Œä»¥ä¸Šç©ºç™½è¡Œåˆ™ä»¥ä¸€è¡Œç©ºç™½è¡Œæ˜¾ç¤ºã€‚
more +20 testfileï¼Œä»ç¬¬ 20 è¡Œå¼€å§‹æ˜¾ç¤º testfile ä¹‹æ–‡ä»¶å†…å®¹ã€‚
mount
mount: mountï¼ŒæŒ‚è½½æ–‡ä»¶ç³»ç»Ÿ

mountï¼Œæ˜¾ç¤ºå½“å‰çš„åˆ†åŒºçŠ¶æ€ã€‚
mount -t xfs /dev/sda2 /optï¼Œå°†åˆ†åŒº/dev/sda2æŒ‚è½½åˆ°/optä¸Šï¼Œå¹¶æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿä¸ºxfsã€‚
mount -t ext3 server1://data /optï¼ŒæŒ‚è½½NFSæœåŠ¡å™¨æ‰€å…±äº«çš„æ–‡ä»¶ç³»ç»Ÿã€‚
mount -t smbfs -o username=tom,password=123 //10.1.1.1/TL /tmpï¼ŒæŒ‚è½½windowsç³»ç»Ÿçš„ç½‘ä¸Šé‚»å±…ä¸­æ‰€å…±äº«çš„æ–‡ä»¶ç³»ç»Ÿã€‚
mtools
mtools: MSDOS toolsï¼Œæ˜¾ç¤ºmtoolsæ‰€æ”¯æŒçš„å‘½ä»¤

mtoolsï¼Œæ˜¾ç¤ºæ‰€æœ‰æ”¯æŒMSDOSæ–‡ä»¶ç³»ç»Ÿçš„å‘½ä»¤ã€‚
mutt
mutt: mail user agentï¼Œæ–‡å­—ç•Œé¢çš„é‚®ä»¶å·¥å…·

mutt -s &quot;A test mail&quot; josfeng@gmail.comï¼Œå°†é‚®ä»¶å¯„ç»™ &#x6a;&#x6f;&#115;&#102;&#x65;&#x6e;&#x67;&#x40;&#x67;&#x6d;&#x61;&#105;&#108;&#x2e;&#x63;&#x6f;&#109;ï¼Œä¿¡ä»¶ä¸»é¢˜ä¸ºA test mailã€‚
mv
mv: moveï¼Œç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶æˆ–ç›®å½•

mv aaa bbbï¼Œå°†æ–‡ä»¶ aaa æ›´åä¸º bbbã€‚ã€€ã€€mv *.c finishedï¼Œå°†æ‰€æœ‰çš„.cæ–‡ä»¶ç§»åŠ¨åˆ° finished ç›®å½•ä¸­ã€‚
Nnano
nano: Nanoâ€™s another editorï¼Œæ–‡æœ¬ç¼–è¾‘

ncftp
ncftp: new command line FTPï¼Œä¼ é€ä¸æ¥æ”¶æ–‡ä»¶

# ncftp -u max -p abc123 172.20.11.1&gt; get readme&gt; bye&gt; yes
ä½¿ç”¨ncftpå‘½ä»¤ä¸‹è½½ä¸€ä¸ªreadmeæ–‡ä»¶ã€‚
netstat
netstat: net statusï¼ŒæŸ¥è¯¢ç½‘ç»œç›®å‰çš„çŠ¶æ€

netstat -ntï¼Œæ˜¾ç¤ºç›®å‰TCPçš„è¿æ¥çŠ¶æ€ã€‚
netstat -aptï¼Œæ˜¾ç¤ºç›®å‰TCPåº”ç”¨è¿›ç¨‹æ‰€ä½¿ç”¨çš„ç«¯å£å·ã€‚
nice
nice: niceï¼Œæ›´æ”¹ä¼˜å…ˆçº§

nicenice -n 1 /bin/bashnice
è°ƒæ•´shellçš„ä¼˜å…ˆçº§ã€‚
nohup
nohup: no hupï¼Œåå°è¿è¡ŒæŒ‡å®šçš„ç¨‹åº

nohup script1 &amp;ï¼Œåœ¨åå°è¿è¡Œscript1ï¼Œä¸”åœ¨è„±æœºåä»å¯ç»§ç»­è¿è¡Œã€‚
nslookup
nslookup: name server lookupï¼ŒåŸŸåä¸IPåœ°å€çš„å¯¹åº”

# nslookup&gt; www.163.com&gt; exit
æŸ¥è¯¢www.163.comçš„ç½‘ç«™åœ°å€ã€‚
# nslookup&gt; set type=mx&gt; qq.com
æŸ¥è¯¢qq.comé‚®ä»¶æœåŠ¡å™¨çš„åœ°å€ã€‚
Ood
od: octal dumpï¼Œä»¥å…«è¿›åˆ¶ç¼–ç è¾“å‡ºæ–‡ä»¶å†…å®¹

od fileï¼Œä»¥å…«è¿›åˆ¶ç¼–ç è¾“å‡ºæ–‡ä»¶å†…å®¹ã€‚
od -t c fileï¼Œä»¥ASCCIIç æ˜¾ç¤ºæ–‡ä»¶fileçš„å†…å®¹ã€‚
Ppasswd
passwd: passwordï¼Œä¿®æ”¹å¯†ç 

passwdï¼Œä¸€èˆ¬è´¦å·ä¿®æ”¹å¯†ç ã€‚
passwd markï¼Œä¿®æ”¹è´¦å·markçš„å¯†ç ã€‚
passwd -l peterï¼Œå°†peterè´¦å·åœç”¨ã€‚
passwd -u peterï¼Œå°†peterè´¦å·å¯ç”¨ã€‚
paste
paste: pasteï¼Œåˆå¹¶æ–‡ä»¶çš„å†…å®¹

paste file1 file2ï¼Œå°†ä¸¤ä¸ªæ–‡ä»¶æŒ‰åˆ—åˆå¹¶ã€‚
patch
patch: patchï¼Œè¡¥ä¸æ›´æ–°

patch file file.patchï¼Œä»¥è¡¥ä¸æ–‡ä»¶file.patchä¿®è¡¥æ–‡ä»¶fileã€‚
patch b file file.patchï¼Œä»¥è¡¥ä¸æ–‡ä»¶file.patchä¿®è¡¥æ–‡ä»¶fileï¼Œå¹¶å¤‡ä»½åŸæ–‡ä»¶ã€‚
pg
pg: pagewiseï¼Œæ˜¾ç¤ºæ–‡ä»¶å†…å®¹

pg aaaï¼Œä½¿ç”¨pgæ˜¾ç¤ºaaaè¿™ä¸ªæ–‡ä»¶ã€‚
pgrep
pgrep: process grepï¼Œæ ¹æ®PIDæ˜¾ç¤ºè¿›ç¨‹

pgrep gdmï¼Œåˆ—å‡ºä¸å­—ç¬¦ä¸²gdmæœ‰å…³çš„PIDã€‚
pico
pico: pine composerï¼Œæ–‡æœ¬ç¼–è¾‘

pidof
pidof: process ID of somethingï¼ŒæŸ¥æ‰¾è¿›ç¨‹çš„PID

pidof nfsï¼Œæ˜¾ç¤ºè¿›ç¨‹nfsæ‰€ç”¨çš„PIDã€‚
pine
pine: ä½œè€…å‘½åï¼Œæ–‡å­—ç•Œé¢çš„é‚®ä»¶å·¥å…·

æ–°ç‰ˆLinuxä¸­ï¼Œpineå·²è¢«alpineæ‰€å–ä»£ã€‚
ping
ping: ä¹’ä¹“ç¢°æ’å£°ï¼Œç”¨ç‰¹å®šçš„æ•°æ®åŒ…æµ‹è¯•ä¸»æœºæ˜¯å¦åœ¨çº¿

ping -c 5 www.sina.com.cnï¼Œå‘é€5æ¬¡ICMP echoæ•°æ®åŒ…ï¼Œå¹¶æ˜¾ç¤ºç»Ÿè®¡ç»“æœã€‚
ping -s 120 192.168.1.1ï¼Œä½¿ç”¨å¤§å°ä¸º120Byteçš„æ•°æ®åŒ…è¿›è¡Œæµ‹è¯•ã€‚
ping -r www.sina.com.cnï¼Œä¸é€šè¿‡ç½‘å…³ï¼Œç›´æ¥ä¼ é€æ•°æ®åŒ…ã€‚
pkill
pkill: process killï¼Œä¼ é€ä¿¡å·ç»™æŒ‡å®šçš„è¿›ç¨‹

pkill -9 sendmailï¼Œå°†æ­£åœ¨è¿è¡Œä¸”å«æœ‰sendmailçš„è¿›ç¨‹ç»ˆæ­¢ã€‚
pmap
pmap: process mapï¼Œæ˜¾ç¤ºè¿›ç¨‹çš„å†…å­˜å¯¹åº”

pmap 2245ï¼Œæ˜¾ç¤ºè¿›ç¨‹2245çš„è¿è¡ŒçŠ¶æ€ã€‚
postalias
postalias: postfix aliasesï¼Œäº§ç”Ÿpostfixçš„aliasesæ•°æ®åº“æ–‡ä»¶

postmap
postmap: postfix mapï¼Œäº§ç”Ÿpostfixçš„accessæ•°æ®åº“æ–‡ä»¶

postqueue
postqueue: postfix queueï¼Œpostfixé˜Ÿåˆ—åŒºçš„æ§åˆ¶å‘½ä»¤

mailqï¼Œæ˜¾ç¤ºåœ¨mailqé˜Ÿåˆ—ä¸­çš„é‚®ä»¶ã€‚
postqueue -fï¼Œå¼ºåˆ¶ä¼ é€é˜Ÿåˆ—ä¸­çš„é‚®ä»¶ã€‚
postsuper
postsuper: postfix superï¼Œpostfixé‚®ä»¶é˜Ÿåˆ—çš„é«˜çº§ç®¡ç†

mailqï¼Œpostsuper -d B175ï¼Œåˆ é™¤é‚®ä»¶B175ã€‚
postsuper -d ALLï¼Œåˆ é™¤æ‰€æœ‰åœ¨é˜Ÿåˆ—ä¸­çš„E-mailã€‚
pr
pr: printï¼Œæ‰“å°å‰çš„é‡æ–°æ’ç‰ˆ

ps
ps: processï¼Œæ˜¾ç¤ºç›®å‰çš„è¿›ç¨‹

psï¼Œæ˜¾ç¤ºå½“å‰è´¦å·æ‰€è¿è¡Œçš„è¿›ç¨‹ã€‚
ps -efï¼Œå®Œæˆåœ°åˆ—å‡ºæ‰€æœ‰è´¦å·çš„è¿›ç¨‹ã€‚
ps auxï¼Œåˆ—å‡ºæ‰€æœ‰è´¦å·çš„è¿›ç¨‹ï¼Œä»¥åŠè¯¥è¿›ç¨‹æ‰€æœ‰çš„CUPå’Œå†…å­˜æ¯”ä¾‹ã€‚
pstree
pstree: process treeï¼Œä»¥æ ‘çŠ¶è¡¨ç¤ºç›®å‰çš„è¿›ç¨‹

pstreeï¼Œä»¥æ ‘çŠ¶è¡¨ç¤ºç›®å‰çš„è¿›ç¨‹è¿è¡ŒçŠ¶å†µã€‚
pwck
pwck: passwod checkï¼Œæ£€æŸ¥å¯†ç æ–‡ä»¶çš„æ­£ç¡®æ€§

pwconv
pwconv: password convertï¼Œè½¬æ¢ä¸ºæŠ•å½±å¯†ç 

pwd
pwd: print the working directoryï¼Œæ˜¾ç¤ºå½“å‰æ‰€åœ¨çš„ç›®å½•

pwdï¼Œæ˜¾ç¤ºå½“å‰æ‰€åœ¨çš„ç›®å½•ã€‚
pwunconv
pwunconv: password convertï¼Œè¿˜åŸæŠ•å½±å¯†ç 

Qquota
quota: quotaï¼Œæ˜¾ç¤ºå¹¶é™åˆ¶è´¦å·çš„ç¡¬ç›˜ç”¨é‡

quotaï¼Œæ˜¾ç¤ºè‡ªå·±çš„ç¡¬ç›˜ç”¨é‡ã€‚
quota markï¼Œæ˜¾ç¤ºè´¦å·markçš„ç¡¬ç›˜ç”¨é‡ã€‚
quotacheck
quotacheck: quota checkï¼Œæ£€æŸ¥è´¦å·ç¡¬ç›˜ç©ºé—´çš„é™åˆ¶

quotaoff
quotaoff: quota offï¼Œå…³é—­è´¦å·ç¡¬ç›˜ç©ºé—´çš„é™åˆ¶

quotaon
quotaon: quota onï¼Œå¼€å¯è´¦å·ç¡¬ç›˜ç©ºé—´çš„é™åˆ¶

quotastats
quotastats: quota statusï¼Œæ˜¾ç¤ºè´¦å·ç¡¬ç›˜ç©ºé—´é™åˆ¶çš„ç»Ÿè®¡æ•°æ®

]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxå‘½ä»¤å¤§å…¨â€”â€”EFGHIJK</title>
    <url>/dev-linux-command-all-efghijk/</url>
    <content><![CDATA[æœ¬æ–‡æ‘˜è‡ªã€ŠLinux/UNIXæŒ‡ä»¤èŒƒä¾‹é€ŸæŸ¥æ‰‹å†Œã€‹ã€‚
Ee2fsck
e2fsck: ext2 file system checkï¼Œæ£€æŸ¥ext2å’Œext3æ–‡ä»¶ç³»ç»Ÿ

e2fsck /dev/sda1ï¼Œæ£€æŸ¥/dev/sda1çš„çŠ¶æ€æ˜¯å¦æ­£å¸¸ã€‚å¦‚æœå‘ç°å¼‚å¸¸ï¼Œåˆ™ä¼šè¯¢é—®æ˜¯å¦ä¿®å¤ã€‚
e2label
e2label: ext2 labelï¼Œè®¾ç½®ext2å’Œext3æ–‡ä»¶ç³»ç»Ÿå·æ ‡

e2label /dev/sda1 Bootï¼Œå°†æ–‡ä»¶ç³»ç»Ÿ/dev/sda1çš„å·æ ‡è®¾ç½®ä¸ºBootã€‚
e2label /dev/sda1ï¼Œæ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿ/dev/sda1çš„å·æ ‡ã€‚
echo
echo: echoï¼Œæ˜¾ç¤ºæ–‡å­—

echo &quot;This is a test&quot;ï¼Œå°†å­—ç¬¦ä¸²This is a testæ˜¾ç¤ºåˆ°å±å¹•ä¸Šã€‚
echo &quot;Test: \t example1\nTest: \t example2&quot;ï¼Œå°†å­—ç¬¦ä¸²è¿›è¡Œæ ¼å¼åŒ–çš„ç¼–æ’ã€‚
wï¼Œecho &quot;This is a test&quot; &gt; /dev/pts/1ï¼Œå°†å­—ç¬¦ä¸²This is a testæ˜¾ç¤ºåˆ°å…¶ä»–ç»ˆç«¯æœº/dev/pts/1ä¸Šã€‚
ed
ed: editorï¼Œæ–‡æœ¬ç¼–è¾‘

ed fileï¼Œç¼–è¾‘æ–‡ä»¶fileã€‚
edä¸å¸¸ç”¨ï¼Œä¸€èˆ¬ä½¿ç”¨viã€‚
edquota
edquota: edit quotaï¼Œç¼–è¾‘è´¦å·æˆ–ç»„æ‰€èƒ½ä½¿ç”¨çš„ç¡¬ç›˜å®¹é‡ã€‚

edquota karenï¼Œä¿®æ”¹è´¦å·karençš„quotaç”¨é‡ã€‚
edquota -p karen johnï¼Œå°†karençš„è®¾ç½®å¥—ç”¨åœ¨johnä¸Šã€‚
egrep
egrep: grep -eï¼ŒæŸ¥æ‰¾æ–‡ä»¶ä¸­çš„ç‰¹å®šå­—ç¬¦ä¸²

egrep 127.0 /etc/*ï¼Œåˆ—å‡º/etcä¸‹åŒ…å«127.0å­—ç¬¦ä¸²çš„æ‰€æœ‰æ–‡ä»¶ã€‚
eject
eject: ejectï¼Œå…‰é©±çš„å¼¹å‡ºä¸æ”¶å›

ejectï¼Œå¼¹å‡ºå…‰é©±ã€‚
eject -jï¼Œæ”¶å›å…‰é©±ã€‚
eject /dev/cdrom1ï¼Œå¼¹å‡ºæŒ‡å®šå…‰é©±ã€‚
emerge
emerge: emergeï¼Œè½¯ä»¶åŒ…å®‰è£…ä¸ç®¡ç†å‘½ä»¤

emerge --syncï¼ŒåŒæ­¥ç›®å‰æœ€æ–°è½¯ä»¶åŒ…åç§°ã€‚
emerge -pv apacheï¼Œemerge -u apacheï¼Œå°†apacheå‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚
emerge -u worldï¼Œå°†æ‰€æœ‰è½¯ä»¶åŒ…å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚
enable
enable: enableï¼Œå¯åŠ¨æˆ–å…³é—­shellçš„é»˜è®¤å‘½ä»¤

enable -aï¼Œæ˜¾ç¤ºå½“å‰shellçš„æ‰€æœ‰å¯åŠ¨çš„å‘½ä»¤ã€‚
enable -n cdï¼Œå…³é—­shellå†…ç½®çš„å‘½ä»¤cdã€‚
eval
eval: evaluateï¼Œè¿ç®—æ±‚å‡ºå‚æ•°çš„å†…å®¹

a1 = &quot;This is a book&quot;a2 = \$a1echo $a2eval echo $a2

ex
ex: vi in execution modeï¼Œæ–‡ä»¶ç¼–è¾‘

ex file1ï¼Œç¼–è¾‘æ–‡ä»¶file1ã€‚
exç›¸å½“äºvi -eã€‚
exit
exit: exitï¼Œé€€å‡ºå½“å‰shell

exitï¼Œé€€å‡ºå¹¶å…³é—­å½“å‰çš„çª—å£ã€‚
export
export: exportï¼Œè®¾ç½®ç¯å¢ƒå˜é‡

export exp=2.71828ï¼Œecho $expï¼Œå°†å˜é‡expè®¾ç½®ä¸º2.71828ã€‚
exportï¼Œåˆ—å‡ºå½“å‰çš„ç¯å¢ƒå˜é‡ã€‚
expr
expr: expressionï¼Œæ±‚è¡¨è¾¾å¼å˜é‡çš„å€¼

expr length &quot;this is a test&quot;ï¼Œè®¡ç®—å­—ç¬¦ä¸²é•¿åº¦ã€‚ 
expr 14 % 9ï¼Œè®¡ç®—ä½™æ•°ã€‚
expr substr &quot;this is a test&quot; 3 5ï¼Œä»ä½ç½®å¤„æŠ“å–å­—ä¸²ã€‚
expr index &quot;testforthegame&quot; eï¼Œè®¡ç®—ç¬¬ä¸€ä¸ªeå‡ºç°çš„ä½ç½®ã€‚
Ffc
fc: first commandï¼Œä¿®æ”¹æˆ–ä½¿ç”¨æ›¾ç»ä½¿ç”¨çš„å‘½ä»¤

fc -lï¼Œåˆ—å‡ºè¿è¡Œè¿‡çš„æŒ‡ä»¤ã€‚
fc -e viï¼Œç”¨viä¿®æ”¹æœ€åè¿è¡Œçš„æŒ‡ä»¤ï¼Œä¿®æ”¹å®Œè‡ªåŠ¨è¿è¡Œã€‚
fdisk
fdisk: formatted diskï¼Œè®¾ç½®ç¡¬ç›˜åˆ†åŒº

fdisk -lï¼Œåˆ—å‡ºç¬¬ä¸€å—SCSIç¡¬ç›˜ä¸Šçš„åˆ†åŒºè¡¨ã€‚
fdisk /dev/sdaï¼Œè¿›å…¥åˆ†åŒºç®¡ç†ã€‚

è¾“å…¥ m æ˜¾ç¤ºæ‰€æœ‰å‘½ä»¤æç¤ºã€‚
è¾“å…¥ p æ˜¾ç¤ºç¡¬ç›˜åˆ†å‰²æƒ…å½¢ã€‚
è¾“å…¥ a è®¾å®šç¡¬ç›˜å¯åŠ¨åŒºã€‚
è¾“å…¥ n è®¾å®šæ–°çš„ç¡¬ç›˜åˆ†å‰²åŒºã€‚è¾“å…¥ e ç¡¬ç›˜ä¸º[å»¶ä¼¸]åˆ†å‰²åŒº(extend)ï¼Œè¾“å…¥ p ç¡¬ç›˜ä¸º[ä¸»è¦]åˆ†å‰²åŒº(primary)ã€‚
è¾“å…¥ t æ”¹å˜ç¡¬ç›˜åˆ†å‰²åŒºå±æ€§ã€‚
è¾“å…¥ d åˆ é™¤ç¡¬ç›˜åˆ†å‰²åŒºå±æ€§ã€‚
è¾“å…¥ q ç»“æŸä¸å­˜å…¥ç¡¬ç›˜åˆ†å‰²åŒºå±æ€§ã€‚
è¾“å…¥ w ç»“æŸå¹¶å†™å…¥ç¡¬ç›˜åˆ†å‰²åŒºå±æ€§ã€‚

fg
fg: front groundï¼Œå°†è¿›ç¨‹æ”¾åˆ°å‰å°è¿è¡Œ

tail -f /var/log/maillog &amp;ï¼Œfg tailï¼Œå°†è¯¥è¿›ç¨‹æ”¾åˆ°å‰å°è¿è¡Œã€‚
fgrep
fgrep: grep -fï¼ŒæŸ¥æ‰¾æ–‡ä»¶ä¸­çš„å­—ç¬¦ä¸²

fgrep 127.0 /etc/*ï¼Œåˆ—å‡º/etcä¸‹æ–‡ä»¶ä¸­åŒ…å«å­—ç¬¦ä¸²127.0çš„æ‰€æœ‰æ–‡ä»¶ã€‚
file
file: fileï¼Œæ˜¾ç¤ºæ–‡ä»¶ç±»å‹

file /etc/hostsï¼Œæ˜¾ç¤ºä¸€èˆ¬æ–‡ä»¶ã€‚
file /etc/viewï¼Œæ˜¾ç¤ºè¿æ¥æ–‡ä»¶ã€‚
filefrag
filefrag: file fragmentï¼Œæ˜¾ç¤ºæ–‡ä»¶çš„ç ´ç¢çŠ¶æ€

filefrag -v backupfileï¼Œæ£€æŸ¥æ–‡ä»¶backupfileçš„ç ´ç¢çŠ¶æ€ã€‚
find
find: findï¼ŒæŸ¥æ‰¾ç‰¹å®šçš„æ–‡ä»¶æˆ–ç›®å½•åç§°

find . -name *.cï¼Œå°†ç›®å‰ç›®å½•åŠå…¶å­ç›®å½•ä¸‹æ‰€æœ‰æ‰©å±•åæ˜¯.cçš„æ–‡ä»¶åˆ—å‡ºæ¥ã€‚
find / -name mysql.sockï¼Œåœ¨æ•´ä¸ªç³»ç»Ÿä¸­æŸ¥æ‰¾mysql.sockæ–‡ä»¶ã€‚ã€€ã€€find . -type fï¼Œå°†ç›®å‰ç›®å½•å…¶å…¶ä¸‹å­ç›®å½•ä¸­æ‰€æœ‰ä¸€èˆ¬æ–‡ä»¶åˆ—å‡ºã€‚ã€€ã€€find . -ctime -20ï¼Œå°†ç›®å‰ç›®å½•åŠå…¶å­ç›®å½•ä¸‹æ‰€æœ‰æœ€è¿‘20åˆ†é’Ÿå†…æ›´æ–°è¿‡çš„æ–‡ä»¶åˆ—å‡ºã€‚ã€€ 
findfs
findfs: find file systemï¼Œç”¨æ ‡ç­¾æˆ–UUIDæŸ¥æ‰¾æ–‡ä»¶ç³»ç»Ÿ

findfs LABEL=/ï¼ŒæŸ¥æ‰¾åä¸º/çš„æ–‡ä»¶ç³»ç»Ÿã€‚
findfs LABEL=SWAP-sda6ï¼ŒæŸ¥æ‰¾åä¸ºSWAP-sda6çš„æ–‡ä»¶ç³»ç»Ÿã€‚
finger
finger: fingerï¼Œè¿œç¨‹æŸ¥è¯¢ä¸»æœºä¸Šçš„è´¦å·ä¿¡æ¯

finger scfeng@localhostï¼ŒæŸ¥è¯¢æœ¬æœºè´¦å·scfengçš„çŠ¶æ€ã€‚
fingeræ˜¯æ—©æœŸè¿œç¨‹æŸ¥è¯¢å‘½ä»¤ï¼Œè¿‘å¹´æ¥ç”±äºå®‰å…¨è€ƒè™‘ï¼Œå‡ ä¹æ²¡æœ‰ç”¨æˆ·å®‰è£…fingerè½¯ä»¶åŒ…ã€‚
fixfiles
fixfiles: fix files SELinux contextï¼Œä¿®æ­£æ–‡ä»¶çš„SELinuxæ ‡ç­¾

fixfiles restore /etc/vsftpd/*ï¼Œä¿®æ­£/etc/vsftpd/ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶çš„æ ‡ç­¾ã€‚
fmt
fmt: formatterï¼Œæ–‡ä»¶ç¼–æ’

cat fileï¼Œfmt -w 30 fileï¼Œè¿›è¡Œå›ºå®šå®½åº¦æ–‡ä»¶ç¼–æ’ã€‚
fold
fold: foldï¼Œä¿®æ”¹æ–‡ä»¶çš„æ˜¾ç¤ºå®½åº¦

cat fileï¼Œfold -w 20 fileï¼Œè¿›è¡Œå›ºå®šå®½åº¦æ–‡ä»¶ç¼–æ’ã€‚
free
free: freeï¼Œæ˜¾ç¤ºå†…å­˜ä½¿ç”¨çŠ¶å†µ

freeï¼ŒæŸ¥çœ‹å†…å®¹ä½¿ç”¨çŠ¶å†µã€‚
free -tï¼ŒæŸ¥è¯¢å†…å­˜ç›®å‰çš„çŠ¶æ€ï¼Œå¹¶åˆ—å‡ºç‰©ç†å†…å­˜ä¸è™šæ‹Ÿå†…å­˜çš„æ€»å’Œã€‚
fsck
fsck: file system checkï¼Œæ£€æŸ¥æˆ–ä¿®å¤æ–‡ä»¶ç³»ç»Ÿ

åœ¨ext2æ–‡ä»¶ç³»ç»Ÿä¸‹ï¼Œå’Œe2fsckåŠŸèƒ½å®Œå…¨ç›¸åŒã€‚
ftp
ftp: file transferring protocolï¼Œæ–‡ä»¶ä¼ è¾“

ftp 10.0.0.2ï¼Œput fileï¼Œbyeï¼Œä½¿ç”¨ftpä¸Šä¼ ä¸€ä¸ªåä¸ºfileçš„æ–‡ä»¶ã€‚
ftpcount
ftpcount: FTP countï¼Œæ˜¾ç¤ºå½“å‰ä½¿ç”¨FTPçš„äººæ•°

ftpcountï¼ŒæŸ¥çœ‹å½“å‰ç™»å½•FTPçš„äººæ•°ã€‚
ftpshut
ftpshut: FTP shutdownï¼Œåœæ­¢ProFTPæœåŠ¡å™¨

ftpshut -d 3ï¼Œ3minåå…³é—­FTPæœåŠ¡å™¨ã€‚
ftpwho
ftpwho: FTP whoï¼Œæ˜¾ç¤ºå½“å‰ç™»å½•FTPçš„åå•

ftpwhoï¼ŒæŸ¥çœ‹å½“å‰ç™»å½•FTPçš„åå•ã€‚
fuser
fuser: file and process userï¼Œé€šè¿‡æ–‡ä»¶æˆ–socketsç¡®è®¤è¿›ç¨‹

fuser -lï¼Œåˆ—å‡ºå¯ä»¥ä½¿ç”¨çš„ç³»ç»Ÿä¿¡å·ã€‚
fuser -km /homeï¼Œåˆ é™¤ä¸/homeæœ‰å…³çš„ç¨‹åºã€‚
Ggcc
gcc: GNU cc complierï¼ŒCè¯­è¨€ç¼–è¯‘å·¥å…·

gcc count.cï¼Œå°†æ–‡ä»¶count.cç¼–è¯‘ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ã€‚
./a.outï¼Œè¿è¡Œa.outã€‚
gcc count.c -o ccï¼Œå°†æ–‡ä»¶count.cç¼–è¯‘ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶æŒ‡å®šå¯æ‰§è¡Œæ–‡ä»¶çš„åç§°ä¸ºccã€‚
getsebool
getsebool: get SELinux booleanï¼Œæ˜¾ç¤ºSELinuxçš„å¸ƒå°”å€¼

getsebool ftp_home_dirï¼Œæ˜¾ç¤ºæ˜¯å¦å…è®¸é€šè¿‡vsftpdè¿æ¥åˆ°è´¦å·çš„å®¶ç›®å½•ã€‚
getsebool httpd_enable_cgiï¼Œæ˜¾ç¤ºæ˜¯å¦å…è®¸httpdæ‰§è¡Œcgi scriptã€‚
gpasswd
gpasswd: group passwordï¼Œç®¡ç†/etc/groupçš„é«˜çº§å·¥å…·

gpasswd elexï¼Œä¿®æ”¹elexç»„çš„ç»„å¯†ç ã€‚
gpasswd -a feng usersï¼Œå°†è´¦å·fengåˆ°usersç»„ä¸­ã€‚
gpasswd -d feng usersï¼Œå°†fengä»usersç»„ä¸­åˆ é™¤ã€‚
gpasswd -A feng usersï¼Œå°†fengè®¾ä¸ºusersç»„ä¸­ç®¡ç†å‘˜ã€‚
gpm
gpm: graphic cut and paste managerï¼Œè®¾ç½®é¼ æ ‡çš„ç²˜è´´åŠŸèƒ½

gpm -t ps2ï¼Œå¯åŠ¨PS/2é¼ æ ‡ã€‚
grep
grep: global search regular expressionï¼ŒæŸ¥æ‰¾æ–‡ä»¶ä¸­çš„å­—ç¬¦ä¸²

grep -c sum count.cï¼Œæ˜¾ç¤ºcount.cä¸­åŒ…å«å­—ç¬¦ä¸²sumçš„è¡Œæ•°ã€‚
grep -v sum count.cï¼Œæ˜¾ç¤ºcount.cä¸­ä¸å«å­—ç¬¦ä¸²sumçš„è¡Œã€‚
grep -f file1 file2ï¼Œæœå¯»file2ä¸­ä¸file1æœ‰ç›¸åŒå­—ç¬¦ä¸²çš„å†…å®¹ã€‚
groupadd
groupadd: group addï¼Œæ–°å»ºç»„

groupadd adminï¼Œæ–°å»ºåä¸ºadminçš„ç»„ã€‚
groupadd -r superï¼Œæ–°å»ºä¸€ä¸ªåä¸ºsuperçš„ç³»ç»Ÿç»„ã€‚
groupadd -g 566 spotï¼Œæ–°å»ºä¸€ä¸ªç»„å·ä¸º566ï¼Œåä¸ºspotçš„ç»„ã€‚
groupdel
groupdel: group delï¼Œåˆ é™¤ç»„

groupdel adminï¼Œåˆ é™¤åä¸ºadminçš„ç»„ã€‚
groupmod
groupmod: group modeï¼Œä¿®æ”¹ç»„çš„é«˜çº§å†…å®¹

groupmod -n admin superï¼Œå°†ç»„superçš„åç§°æ”¹æˆadminã€‚
groupmod -g 666 spotï¼Œå°†ç»„spotçš„ç»„å·æ”¹ä¸º666ã€‚
groups
groups: groupsï¼Œæ˜¾ç¤ºè´¦å·æ‰€å±çš„ç»„

groups adminï¼Œæ˜¾ç¤ºè´¦å·adminæ‰€å±çš„ç»„åç§°ã€‚
grpconv
grpconv: group convertï¼Œè½¬æ¢ä¸ºç»„æŠ•å½±å¯†ç 

gunzip
gunzip: GNU un-zipï¼Œè§£å‹ç¼©gzæ–‡ä»¶

gunzip -l /var/log/* .gzï¼Œæ˜¾ç¤ºç›®å½•/var/logä¸‹æ‰€æœ‰çš„gzæ–‡ä»¶çš„ä¿¡æ¯ã€‚
gunzip -c file.gz &gt; file2ï¼Œå°†file.gzè§£å‹ç¼©ï¼Œå¹¶ä¿ç•™åŸå‹ç¼©æ–‡ä»¶ã€‚
gunzip -r /home/markï¼Œå°†/home/markä¸‹çš„æ‰€æœ‰gzæ–‡ä»¶å…¨éƒ¨è§£å‹ç¼©ã€‚
gunzip -v file.gzï¼Œå°†file.gzè§£å‹ç¼©ï¼Œå¹¶æ˜¾ç¤ºè¿‡ç¨‹ã€‚
gzexe
gzexe: GNU zip executionï¼Œè¿è¡Œå‹ç¼©æ–‡ä»¶

gzexe -d a.outï¼Œè¿è¡Œå·²å‹ç¼©å¯æ‰§è¡Œæ–‡ä»¶çš„a.outã€‚
gzip
gzip: GNU zipï¼Œå‹ç¼©gzçš„æ–‡ä»¶

gzip -v outputï¼Œå‹ç¼©outputï¼Œå¹¶æ˜¾ç¤ºå‹ç¼©è¿‡ç¨‹ã€‚
gzip h*ï¼Œå‹ç¼©å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶åä»¥hå¼€å¤´çš„æ–‡ä»¶ã€‚
gzip -9 backupfile1ï¼ŒæŒ‡å®šå‹ç¼©ç‡å‹ç¼©æ–‡ä»¶ã€‚
gzip -l /var/log/*.gzï¼Œæ˜¾ç¤ºç›®å½•/var/log/ä¸‹æ‰€æœ‰gzæ–‡ä»¶çš„ä¿¡æ¯ã€‚
Hhalt
halt: haltï¼Œå…³é—­ç³»ç»Ÿ

halt -pï¼Œå…³é—­ç³»ç»Ÿå¹¶å…³é—­ç”µæºã€‚
halt -dï¼Œå…³é—­ç³»ç»Ÿï¼Œå¹¶ä¸”ä¸è®°å½•åœ¨æ—¥å¿—æ–‡ä»¶/var/log/wtmpä¸­ã€‚
halt -nï¼Œä¸å°†å†…å­˜æ•°æ®å†™å…¥ç¡¬ç›˜ï¼Œç›´æ¥å…³é—­ç³»ç»Ÿã€‚
hash
hash: hash table

hash -lï¼Œæ˜¾ç¤ºè®°å¿†çš„å‘½ä»¤ã€‚
hash -t catï¼Œåˆ—å‡ºå‘½ä»¤catçš„è·¯å¾„ã€‚
hdparm
hdparm: hard disk parameterï¼Œæ˜¾ç¤ºæˆ–è®¾ç½®ç¡¬ç›˜å‚æ•°

hdparm -t /dev/sdaï¼Œè¯„ä¼°ç¡¬ç›˜çš„è¯»å–æ•ˆç‡ã€‚
hdparm -d 1 /dev/sdaï¼Œå¯åŠ¨ç¡¬ç›˜çš„DMAæ¨¡å¼ã€‚
hdparm -I /dev/sdaï¼Œä¾¦æµ‹ç¡¬ç›˜çš„è§„æ ¼ã€‚
hdparm -C /dev/sdaï¼Œä¾¦æµ‹IDEç¡¬ç›˜ç”µæºç®¡ç†æ¨¡å¼ã€‚
head
head: head of fileï¼Œè¾“å‡ºæ–‡ä»¶å†…å®¹å‰é¢çš„å†…å®¹

head -n 3 install.logï¼Œæ˜¾ç¤ºå‰3è¡Œå†…å®¹ã€‚
head -c 30 install.logï¼Œæ˜¾ç¤ºå‰30å­—èŠ‚çš„å†…å®¹ã€‚
help
help: helpï¼Œshellå†…ç½®å‘½ä»¤è¯´æ˜

help aliasï¼Œæ˜¾ç¤ºaliaså‘½ä»¤çš„è¯´æ˜ã€‚
history
history: historyï¼Œåˆ—å‡ºä½¿ç”¨è¿‡çš„å‘½ä»¤

history 5ï¼Œåˆ—å‡º5ä¸ªæœ€è¿‘ä½¿ç”¨è¿‡çš„å‘½ä»¤ã€‚
host
host: hostï¼ŒæŸ¥è¯¢ä¸»æœºä½¿ç”¨çš„åŸŸå

host www.taobao.com 61.139.2.69ï¼Œåœ¨DNSæœåŠ¡å™¨ä¸Š61.139.2.69ä¸ŠæŸ¥è¯¢åœ°å€www.taobao.comã€‚
host -t mx 126.com 61.139.2.69ï¼Œåœ¨æœºå™¨61.139.2.69ä¸ŠæŸ¥è¯¢ç½‘åŸŸ126.comçš„é‚®ä»¶è®°å½•ã€‚
hostid
hostid: host idï¼Œæ˜¾ç¤ºä¸»æœºID

hostidï¼Œæ˜¾ç¤ºä¸»æœºçš„è¯†åˆ«ç ã€‚
hostname
hostname: host nameï¼Œæ˜¾ç¤ºæˆ–è®¾ç½®ä¸»æœºå

hostnameï¼Œæ˜¾ç¤ºå½“å‰çš„ä¸»æœºåç§°ã€‚
hostname -dï¼Œæ˜¾ç¤ºå½“å‰çš„ç½‘åŸŸåç§°ã€‚
hostname -iï¼ŒæŸ¥è¯¢ä¸»æœºåå¯¹åº”çš„IPåœ°å€ã€‚
htpasswd
htpasswd: httpd passwdï¼Œè®¾ç½®Apacheçš„è´¦æˆ·å¯†ç 

htpasswd -c /etc/htpasswd jackï¼Œæ–°å»ºä¸€ä¸ªApacheç™»å½•è´¦å·jackã€‚
httpd
httpd: HTTP deamonï¼Œç®¡ç†Apacheç½‘é¡µæœåŠ¡å™¨ã€‚

httpd -vï¼Œæ˜¾ç¤ºå½“å‰çš„apacheè¯¦ç»†ä¿¡æ¯ã€‚
httpd -f /opt/httpd.confï¼Œä½¿ç”¨æŒ‡å®šçš„é…ç½®æ–‡ä»¶å¯åŠ¨httpdã€‚
httpd -tï¼Œæµ‹è¯•é…ç½®æ–‡ä»¶çš„è¯­æ³•æ˜¯å¦æ­£ç¡®ã€‚
httpd -lï¼Œæ˜¾ç¤ºhttpdç¼–è¯‘æ—¶æ‰€åŒ…å«çš„æ¨¡å—ã€‚
hwclock
hwclock: hardware clockï¼Œæ˜¾ç¤ºæˆ–è®¾ç½®ç¡¬ä»¶æ—¶é—´

hwclockï¼Œæ˜¾ç¤ºç¡¬ä»¶æ—¥æœŸä¸æ—¶é—´ã€‚
hwclock --set --date=&quot;5/1/11 12:15:01&quot;ï¼Œå°†ç¡¬ä»¶æ—¶é’Ÿä¿®æ”¹ä¸º2011å¹´5æœˆ1æ—¥12ç‚¹15åˆ†01ç§’ã€‚
Iiconv
iconv: internet conversionï¼Œå­—ç¬¦é›†çš„è½¬æ¢

iconv -lï¼Œåˆ—å‡ºæ‰€æœ‰æ”¯æŒçš„æ ¼å¼ã€‚
id
id: identityï¼Œæ˜¾ç¤ºè´¦å·ä¸ç»„çš„ID

id -aï¼Œæ˜¾ç¤ºæ‰€æœ‰çš„è´¦å·ä¿¡æ¯ã€‚
id -gï¼Œæ˜¾ç¤ºè´¦å·æ‰€å±çš„ä¸»ç»„ä»£ç ã€‚
id -uï¼Œæ˜¾ç¤ºè´¦å·ä»£ç ã€‚
ifconfig
ifconfig: interface configurationï¼Œè®¾ç½®æˆ–æŸ¥çœ‹ç½‘ç»œé…ç½®

ifconfigï¼Œæ˜¾ç¤ºå½“å‰çš„ç½‘ç»œè®¾å¤‡åŠå…¶çŠ¶æ€ã€‚
ifconfig eth0 192.168.1.5 netmask 255.255.255.0ï¼Œå°†IPåœ°å€è®¾ç½®ä¸º192.168.1.5ï¼Œå­ç½‘æ©ç è®¾ç½®ä¸º255.255.255.0ã€‚
ifconfig eth0ï¼Œæ˜¾ç¤ºeth0çš„çŠ¶æ€ã€‚
ifconfig eth0 downï¼Œå°†eth0åœç”¨ã€‚
info
info: informationï¼Œæ˜¾ç¤ºåœ¨çº¿å¸®åŠ©ä¿¡æ¯

info killï¼ŒæŸ¥çœ‹killçš„åœ¨çº¿å¸®åŠ©ä¿¡æ¯ã€‚
init
init: initialï¼Œæ”¹å˜ç³»ç»Ÿçš„è¿è¡Œç­‰çº§

init 0ï¼Œå…³é—­è®¡ç®—æœºã€‚
init 6ï¼Œé‡æ–°å¼€æœºã€‚
init 1ï¼Œè¿›å…¥å•ç”¨æˆ·æ¨¡å¼ã€‚
insmod
insmod: insert moduleï¼Œä»·å€¼æ¨¡å—

insmod brdcom.koï¼ŒåŠ è½½æ¨¡å—brdcom.koã€‚
ip
ip: internet protocolï¼Œæ˜¾ç¤ºæˆ–è®¾ç½®ç½‘ç»œè®¾å¤‡çš„è·¯ç”±ç­–ç•¥


ip linkï¼šç½‘ç»œè®¾å¤‡è®¾ç½®ã€‚
ip addressï¼šIPåœ°å€çš„ç®¡ç†ã€‚
ip routeï¼šè·¯ç”±è¡¨çš„ç®¡ç†ã€‚
ip neighbourï¼šé‚»è¿‘åœ°å€ä¸ARPè¡¨çš„ç®¡ç†ã€‚
ip tunnelï¼šIPé€šé“è®¾ç½®ã€‚
ip maddrï¼šç»„å¹¿æ’­åœ°å€çš„ç®¡ç†ã€‚
ip ruleï¼šç»„å¹¿æ’­åœ°å€çš„ç®¡ç†ã€‚
ip mrouteï¼šåˆ—å‡ºç»„è·¯ç”±åœ°å€ã€‚

ip address showï¼Œæ˜¾ç¤ºå½“å‰ç½‘ç»œåœ°å€çš„è®¾ç½®ã€‚
ip route showï¼Œæ˜¾ç¤ºå½“å‰çš„è·¯ç”±åˆ—è¡¨ã€‚
ip route add 172.16.1.0/24 via 192.168.1.1ï¼Œå¤šé‡è·¯ç”±çš„è®¾ç½®ï¼šå‘å¾€172.16.1.0/24çš„æ•°æ®åŒ…ï¼Œä¸€å¾‹é€šè¿‡192.168.1.1ä¼ é€ã€‚
ipcrm
ipcrm: interprocess communication removeï¼Œåˆ é™¤æŒ‡å®šIDçš„IPCè¿›ç¨‹ã€‚

ipcsï¼Œipcrm -m 262149ï¼Œæ˜¾ç¤ºå†…éƒ¨ç¨‹åºç›®å‰çš„çŠ¶æ€ï¼Œå¹¶å°†å…¶ä¸­çš„å…±äº«å†…å­˜åˆ é™¤ã€‚
ipcs
ipcs: interprocess communication statusï¼Œæ˜¾ç¤ºIPCçš„çŠ¶æ€

ipcsï¼Œæ˜¾ç¤ºå†…éƒ¨ç¨‹åºç›®å‰çš„çŠ¶æ€ã€‚
iptab
iptab: IP tableï¼Œæ˜¾ç¤ºå­ç½‘æ©ç çš„ç§ç±»

iptabï¼Œæ˜¾ç¤ºå­ç½‘æ©ç çš„ç§ç±»ã€‚
iptables
iptables: IP tablesï¼Œæ•°æ®åŒ…å¤„ç†ä¸å®‰å…¨ç®¡ç†

iptables -Lï¼Œæ˜¾ç¤ºå½“å‰iptablesçš„è®¾ç½®ã€‚
iptables -Fï¼Œiptables -Xï¼Œå°†iptablesä¸­è¿‡æ»¤è¡¨æ ¼çš„è§„åˆ™æ¸…æ¥šã€‚
echo &quot;1&quot; &gt; /proc/sys/net/ipv4/ip_forwardingiptables -t nat -A POSTROUTING -o eth0 -s 10.1.1.1/24 -j MASQUERADE
å¼€å¯NATåŠŸèƒ½ï¼Œè®¾ç½®10.1.1.1~10.1.1.254å¯é€šè¿‡æœ¬æœºè¿æ¥åˆ°äº’è”ç½‘ã€‚
iptables -A INPUT -p tcp --dport 25 -j ACCEPTiptables -A INPUT -p tcp --dport 80 -j ACCEPTiptables -A INPUT -p tcp -i eth0 -j DROP
ä»…å¼€å¯SMTPä¸HTTPçš„è¿æ¥ï¼Œå…³é—­å…¶ä»–ç«¯å£çš„è¿æ¥ã€‚
iptables -A input -d 140.111.1.1 -p tcp -j DROPï¼Œä¸å¾—è¿åˆ°IPåœ°å€140.111.1.1ã€‚
iptables-save
iptables-save: IP tables saveï¼Œä¿å­˜å½“å‰iptablesçš„è§„åˆ™

iptables-saveï¼Œä¿å­˜å½“å‰iptablesçš„è§„åˆ™ã€‚
isosize
isosize: ISO sizeï¼Œæ˜¾ç¤ºiso9600æ ¼å¼çš„æ–‡ä»¶ç³»ç»Ÿå¤§å°

isosize /dev/hdcï¼Œæ˜¾ç¤ºå½“å‰å…‰ç›˜çš„å®¹é‡ã€‚
Jjobs
jobs: job statusï¼Œæ˜¾ç¤ºæ­£åœ¨åå°è¿è¡Œçš„ä»»åŠ¡

jobsï¼Œæ˜¾ç¤ºåœ¨åå°è¿è¡Œçš„ä»»åŠ¡ã€‚
jobs -pï¼Œä»…åˆ—å‡ºåœ¨åå°è¿è¡Œçš„ä»»åŠ¡çš„PIDã€‚
join
join: joinï¼Œåˆå¹¶ä¸¤ä¸ªæ–‡ä»¶ä¸­ç›¸åŒçš„åŒºåŸŸ

join -t &#39;:&#39; /etc/passwd /etc/shadowï¼Œå°†ä¸¤ä¸ªæ–‡ä»¶ç»“åˆï¼Œä»¥å†’å·ä½œä¸ºå­—ç¬¦ä¸²çš„åˆ†éš”ç¬¦ã€‚
Kkill
kill: killï¼Œä¼ é€ä¿¡æ¯ç»™è¿›ç¨‹

kill -lï¼Œåˆ—å‡ºæ‰€æœ‰çš„ä¿¡å·ä¸ä»£ç ã€‚
ps -ef | grep mysqlï¼Œkill -9 6887ï¼ŒæŸ¥çœ‹mysqlçš„PIDï¼Œå¹¶ä¸”ç»“æŸè¯¥PIDã€‚
killall
killall: kill allï¼Œæ ¹æ®ç»™å®šåç§°ç»ˆæ­¢è¿›ç¨‹

killall -9 ntopï¼Œå°†æ‰€æœ‰å…³äºntopå‘½ä»¤çš„ç¨‹åºåˆ é™¤ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxå‘½ä»¤å¤§å…¨â€”â€”ABCD</title>
    <url>/dev-linux-command-all-abcd/</url>
    <content><![CDATA[æœ¬æ–‡æ‘˜è‡ªã€ŠLinux/UNIXæŒ‡ä»¤èŒƒä¾‹é€ŸæŸ¥æ‰‹å†Œã€‹ã€‚
Aadduser
adduser: add userï¼Œæ–°å»ºç³»ç»Ÿä¸Šçš„è´¦å·

adduser -Dï¼Œæ˜¾ç¤ºæ–°å»ºè´¦å·æ—¶çš„é»˜è®¤å€¼ã€‚
adduser -m josï¼Œæ–°å»ºåä¸ºjosçš„è´¦å·ï¼ˆä½¿ç”¨ç³»ç»Ÿé»˜è®¤å€¼ï¼‰ã€‚
adduserä½äº/usr/sbin/ä¹‹ä¸‹ï¼Œæ˜¯/usr/sbin/useraddçš„è¿æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œadduserå’Œuseraddå®é™…ä¸Šæ˜¯åŒä¸€ä¸ªå‘½ä»¤ã€‚


alias
alias: aliasï¼Œå®šä¹‰å‘½ä»¤åŠå‚æ•°çš„åˆ«å

aliasï¼Œåˆ—å‡ºç°æœ‰çš„åˆ«åè®¾ç½®ã€‚
alias ua=&#39;uname -a&#39;ï¼Œå°†uname -açš„åˆ«åè®¾ç½®ä¸ºuaã€‚
aliasçš„ä¼˜å…ˆçº§é«˜äºpathï¼ˆç³»ç»Ÿæœå¯»çš„è·¯å¾„ï¼‰ã€‚
apachectl
apachectl: apache controllerï¼Œç®¡ç†Apacheç½‘é¡µæœåŠ¡å™¨

apachectl -lï¼Œåˆ—å‡ºç¼–å…¥apacheçš„æ¨¡å—ã€‚
apachectl restartï¼Œé‡å¯apacheã€‚
apt-get
apt-get: advanced package tool getï¼ŒAPTè½¯ä»¶åŒ…ç®¡ç†å·¥å…·ã€‚

apt-get install mailxï¼Œå®‰è£…mailxè½¯ä»¶åŒ…ã€‚
apt-getæ˜¯Linuxå‘è¡Œå•†Debianä¸Ubuntuä¸Šçš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ï¼Œå…¶ä»–ç‰ˆæœ¬Linuxæ— æ³•ä½¿ç”¨ã€‚
ar
ar: archivesï¼Œæ‰“åŒ…å’Œè§£å‹ç¼©æ–‡ä»¶

ar -rv afile a*ï¼Œå°†ä»¥aå¼€å¤´çš„æ–‡ä»¶æ‰“åŒ…ä¸ºafileæ–‡ä»¶ã€‚
ar -t afileï¼Œåˆ—å‡ºæ‰“åŒ…æ–‡ä»¶ä¸­çš„æˆå‘˜æ–‡ä»¶ã€‚
ar -p afile anaconda-ks.cfgï¼Œæ˜¾ç¤ºæ‰“åŒ…æ–‡ä»¶ä¸­æŸä¸€æ–‡ä»¶çš„å†…å®¹ã€‚
arå‘½ä»¤å·²è¢«taræ‰€å–ä»£ï¼Œç›®å‰å·²å¾ˆå°‘ä½¿ç”¨ã€‚
arch
arch: architectureï¼Œåˆ—å‡ºå¤„ç†å™¨çš„ç±»å‹

archï¼Œåˆ—å‡ºå¤„ç†å™¨çš„ç±»å‹ã€‚
arp
arp: address resolution protocolï¼Œç½‘å¡åœ°å€çš„å¯¹åº”

arpï¼Œåˆ—å‡ºarpçš„ä¿¡æ¯ã€‚
arp -s 10.1.1.10 00:0F:26:2A:BF:77ï¼Œå°†10.1.1.10å¼ºåˆ¶å¯¹åº”åˆ°ç½‘å¡å·00:0F:26:2A:BF:77ã€‚
arp -d 10.1.1.10ï¼Œåˆ é™¤IPåœ°å€ä¸ç½‘å¡å·çš„å¯¹åº”ã€‚
arping
arping: ARP pingï¼Œç½‘å¡åœ°å€çš„æµ‹è¯•å‘½ä»¤

arping 172.20.11.1ï¼Œå¯¹172.20.11.1çš„IPåœ°å€è¿›è¡Œç½‘å¡åœ°å€æµ‹è¯•ã€‚
è‹¥ä¸åœ¨åŒä¸€ä¸ªç½‘ç»œï¼Œarpingä¸ä¼šæœ‰å›åº”ï¼Œè¿™æ—¶éœ€è¦ç”¨pingå‘½ä»¤ã€‚
at
at: atï¼Œåœ¨æŒ‡å®šçš„æ—¶é—´è¿è¡Œå‘½ä»¤

at 5pm + 3 days /bin/lsï¼Œä¸‰å¤©åçš„ä¸‹åˆ 5 ç‚¹æ‰§è¡Œ /bin/lsã€‚ã€€ã€€at 5pm + 3 weeks /bin/lsï¼Œä¸‰ä¸ªæ˜ŸæœŸåçš„ä¸‹åˆ 5 ç‚¹æ‰§è¡Œ /bin/lsã€‚ã€€ã€€at 17:20 tomorrow /bin/dateï¼Œæ˜å¤©çš„ 17:20 æ‰§è¡Œ /bin/dateã€‚ã€€ã€€at 23:59 12/31/1999 echo the end of world !ï¼Œåœ¨1999å¹´çš„æœ€åä¸€å¤©çš„æœ€åä¸€åˆ†é’Ÿå°å‡º the end of world !  
at -lï¼Œåˆ—å‡ºå°†è¦è¿è¡Œçš„å·¥ä½œã€‚
at -c 1ï¼Œæ˜¾ç¤ºå·¥ä½œç¼–å·ä¸º1çš„å·¥ä½œã€‚
at -d 1ï¼Œåˆ é™¤ç¼–å·ä¸º1çš„å·¥ä½œã€‚
awk
awk: Alfred Aho, Peter Weinberger, and Brian Kernighan(ä½œè€…å)ï¼Œæ–‡å­—æ•°æ®çš„é«˜çº§å¤„ç†ã€‚

awk &#39;&#123;print&#125;&#39; /etc/passwdï¼Œæ˜¾ç¤º/etc/passwdä¸­å†…å®¹ï¼Œå’Œcatå‘½ä»¤ç»“æœç›¸åŒã€‚
awk -F&quot;:&quot; &#39;&#123;print $1 $3 $6&#125;&#39; /etc/passwdï¼Œå°†/etc/passwdä¸­çš„å†…å®¹ä»¥å†’å·åˆ†éš”ï¼Œå¹¶å–å‡ºç¬¬1ä½ã€ç¬¬3ä½å’Œç¬¬6ä½ã€‚
awk -F&quot;:&quot; &#39;&#123;print $1 &quot;\t&quot; $3 &quot;\t&quot; $6&#125;&#39; /etc/passwdï¼Œå°†/etc/passwdä¸­çš„å†…å®¹ä»¥å†’å·åˆ†éš”ï¼Œå¹¶å–å‡ºç¬¬1ä½ã€ç¬¬3ä½å’Œç¬¬6ä½ï¼Œå¹¶ç”¨Tabä½œä¸ºå­—æ®µé—´çš„åˆ†éš”ç¬¦ã€‚
awk -F&quot;:&quot; &#39;&#123;print &quot;ID=&quot; $1 &quot;\t å®¶ç›®å½•=&quot; $6&#125;&#39; /etc/passwdï¼Œå°†/etc/passwdä¸­çš„å†…å®¹ä»¥å†’å·åˆ†éš”ï¼Œå¹¶å–å‡ºç¬¬1ä½å’Œç¬¬6ä½ï¼Œå¹¶ç”¨Tabä½œä¸ºå­—æ®µé—´çš„åˆ†éš”ç¬¦ï¼Œåœ¨ç¬¬1ä½å‰åŠ ä¸Šâ€œID=â€ï¼Œç¬¬6ä½å‰åŠ ä¸Šâ€œå®¶ç›®å½•=â€ã€‚

Bbadblocks
badblocks: bad blocksï¼Œæ£€æŸ¥ç¡¬ç›˜ä¸­æŸåçš„åŒºå—

badblocks -v /dev/sda1ï¼Œæ£€æŸ¥æŸåçš„åŒºå—ï¼Œå¹¶æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ã€‚
é€‚ç”¨äºext2å’Œext3æ–‡ä»¶ç³»ç»Ÿã€‚
batch
batch: batchï¼Œè¿è¡Œæ‰¹æ¬¡ä½œä¸š

batch -f com.txtï¼Œè¿è¡Œæ–‡ä»¶com.txtä¸­çš„å‘½ä»¤ã€‚
bc
bc: arbitrary precision calculatorï¼Œæ–‡å­—å‹è®¡ç®—å™¨

bcï¼Œè¿›å…¥è®¡ç®—å™¨ã€‚å¯ä»¥åšå››åˆ™è¿ç®—ï¼Œä¹Ÿå¯ä»¥å®šä¹‰å˜é‡å¹¶åšè¿ç®—ã€‚
bg
bg: backgroundï¼Œå°†è¿›ç¨‹æ”¾åˆ°åå°è¿è¡Œ

cat /var/log/messages | moreï¼Œç„¶åctrl+zæš‚æ—¶ä¸­æ–­ç¨‹åºã€‚å†è¿è¡Œbg 1ï¼Œå…¶ä¸­1ä¸ºå·¥ä½œç¼–å·ã€‚
å°†æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ç§»åˆ°åå°è¿è¡Œï¼Œå…¶æ•ˆæœä¸è¿è¡Œå‘½ä»¤åé¢åŠ ä¸Š&amp;æ•ˆæœç›¸åŒã€‚
bind
bind: bindï¼Œæ˜¾ç¤ºæˆ–è®¾ç½®é”®ç›˜é…ç½®

bind -l | grep killï¼Œåˆ—å‡ºä¸killæœ‰å…³çš„æ‰€æœ‰åŠŸèƒ½åç§°ã€‚
bind -m vi -vï¼Œåˆ—å‡ºviçš„æŒ‰é”®é…ç½®ä¸ä½¿ç”¨çš„å˜é‡åç§°ã€‚
blockdev
blockdev: block deviceï¼ŒæŸ¥è¯¢åŒºå—è®¾å¤‡

blockdev -v --getss /dev/sda1ï¼Œåˆ—å‡º/dev/sda1çš„åŒºå—å¤§å°ã€‚
blockdev -v --getsize /dev/sda1ï¼Œè·å–/dev/sda1çš„åŒºå—å®¹é‡ã€‚
bunzip2
bunzip2: Burrows-Wheeler un-zip fileï¼Œè§£å‹ç¼©bz2æ ¼å¼çš„å‹ç¼©æ–‡ä»¶ã€‚

bunzip2 -k afile.bz2ï¼Œè§£å‹afile.bz2æ–‡ä»¶ï¼Œä¸åˆ é™¤åŸæ¥çš„å‹ç¼©æ–‡ä»¶ã€‚
bunzip2 -s afile.bz2ï¼Œç”¨è¾ƒå°‘çš„å†…å­˜è§£å‹afile.bz2æ–‡ä»¶ã€‚
bunzip2æ˜¯bzip -dçš„åŠŸèƒ½è¿æ¥ã€‚
bzgrep
bzgrep: Burrows-Wheeler zip file grepï¼ŒæŸ¥æ‰¾bz2æ–‡ä»¶ä¸­ç‰¹å®šçš„å­—ç¬¦ä¸²

bzgrep router ip.txt.bz2ï¼Œå¯»æ‰¾ip.txt.bz2å‹ç¼©æ–‡ä»¶ä¸­çš„routerå­—ç¬¦ä¸²ã€‚
bzip2
bzip2: Burrows-Wheeler zip fileï¼Œå°†æ–‡ä»¶å‹ç¼©ä¸ºbz2æ–‡ä»¶

bzip2 afileï¼Œå‹ç¼©æ–‡å­—æ–‡ä»¶afileä¸ºafile.bz2ï¼Œå‹ç¼©åafileæ–‡ä»¶æ¶ˆå¤±ã€‚
bzip2 -l pic.pngï¼Œå‹ç¼©ä¸€èˆ¬çš„pngå›¾åƒæ–‡ä»¶ã€‚
bzip2 -d pic.png.bz2ï¼Œè§£å‹æ–‡ä»¶ã€‚
bzip2recover
bzip2recover: Burrows-Wheeler zip file recoverï¼Œä¿®å¤æŸåçš„bz2æ–‡ä»¶

bzip2recover text.bz2ï¼Œå½“bz2æ–‡ä»¶å‘ç”Ÿé—®é¢˜æ— æ³•è§£å‹ç¼©æ—¶ï¼Œå°è¯•æ­¤å‘½ä»¤æ¥è¿˜åŸæ–‡ä»¶ã€‚
bzless
bzless: Burrows-Wheeler zip file lessï¼Œåˆ—å‡ºbz2æ–‡ä»¶çš„å†…å®¹

bzless afile.bz2ï¼Œåˆ—å‡ºå‹ç¼©æ–‡ä»¶afile.bz2ä¸­çš„å†…å®¹ã€‚

Ccal
cal: calendarï¼Œæ˜¾ç¤ºæ—¥å†

calï¼Œæ˜¾ç¤ºæœ¬æœˆçš„æœˆå†ã€‚
cal 2000ï¼Œæ˜¾ç¤º2000å¹´å¹´å†ã€‚
cal 5 2001ï¼Œæ˜¾ç¤º2000å¹´5æœˆæœˆå†ã€‚
cal -mï¼Œä»¥æ˜ŸæœŸä¸€ä¸ºæ¯å‘¨çš„ç¬¬ä¸€å¤©æ–¹å¼ï¼Œæ˜¾ç¤ºæœ¬æœˆçš„æœˆå†ã€‚ 
cal -jyï¼Œä»¥ä¸€æœˆä¸€æ—¥èµ·çš„å¤©æ•°æ˜¾ç¤ºä»Šå¹´çš„å¹´å†ã€‚
cat
cat: catenateï¼Œåˆ—å‡ºæ–‡ä»¶å†…å®¹

cat -n textfile1 &gt; textfile2ï¼ŒæŠŠtextfile1çš„å†…å®¹åŠ ä¸Šè¡Œå·åï¼Œè½¬å­˜ä¸ºtextfile2ã€‚
cat -b textfile1 textfile2 &gt;&gt; textfile3ï¼ŒæŠŠtextfile1å’Œtextfile2çš„å†…å®¹åŠ ä¸Šè¡Œå·ï¼ˆç©ºç™½è¡Œä¸åŠ ï¼‰ä¹‹åï¼Œå°†å†…å®¹é™„åŠ åˆ°textfile3çš„æœ€åã€‚
cd
cd: change directoryï¼Œåˆ‡æ¢ç›®å½•

cd /usr/binï¼Œè¿›å…¥/usr/bin/ç›®å½•ã€‚
cd ~ï¼Œå›åˆ°home directoryã€‚
cd ../..ï¼Œè·³åˆ°ç›®å‰ç›®å½•çš„ä¸Šä¸Šä¸¤å±‚:
cfdisk
cfdisk: curses formatted diskï¼Œè®¾ç½®ç¡¬ç›˜åˆ†åŒº

cfdiskï¼Œè¿›å…¥åˆ†åŒºç•Œé¢ã€‚
cfdisk -P S /dev/sdaï¼ŒæŒ‰ç…§æ‰‡åŒºæ’åºï¼Œæ˜¾ç¤ºç¬¬ä¸€å—ç¡¬ç›˜çš„åˆ†å‰²æƒ…å†µã€‚
cfdiskæ˜¯ä¼ ç»Ÿå‘½ä»¤fdiskçš„è¿›åŒ–ç‰ˆã€‚
chage
change: change user password expiry infoï¼Œæ”¹å˜å¯†ç çš„æœ‰æ•ˆæœŸ

cat /etc/shadow | grep sherryï¼Œchage -E 2018-12-31 sherryï¼Œè®¾ç½®sherryè´¦å·çš„å¯†ç è®¾ç½®åœ¨2018å¹´12æœˆ31æ—¥å¤±æ•ˆã€‚
chage -M 5 sherryï¼Œè¦æ±‚è´¦å·sherryå¿…é¡»åœ¨5å¤©å†…å˜æ›´å¯†ç ã€‚
chage -l sherryï¼Œæ˜¾ç¤ºè´¦å·çš„å¯†ç è®¾ç½®ã€‚
chattr
chattr: change attributesï¼Œæ”¹å˜æ–‡ä»¶å±æ€§

chattr +a file1ï¼Œlsattr file1ï¼Œå¢åŠ æ–‡ä»¶çš„å±æ€§ï¼Œä½¿ä¹‹å¯ä»¥é™„åŠ æ•°æ®ï¼Œè€Œæ— æ³•è¢«ä¿®æ”¹ã€‚
chattr +i file1ï¼Œæ”¹å˜æ–‡ä»¶å±æ€§ï¼Œæ— æ³•ä¿®æ”¹å’Œåˆ é™¤ã€‚
chcon
chcon: change security contextï¼Œä¿®æ”¹SELinuxæ ‡ç­¾

chcon -R -t httpd_sys_content_t www/ï¼Œå°†wwwç›®å½•ç±»å‹æ”¹ä¸ºhttpd_sys_content_tã€‚
chgrp
chgrp: change groupï¼Œæ”¹å˜æ–‡ä»¶æˆ–ç›®å½•æ‰€å±çš„ç»„

chgrp users afileï¼Œä¿®æ”¹afileçš„ç»„ä¸ºusersã€‚
chgrp -h users ttï¼Œä¿®æ”¹ç¬¦å·è¿æ¥ttçš„ç»„ä¸ºusersã€‚
å¯ä»¥ä½¿ç”¨chmodå®ç°åŒæ ·çš„æ•ˆæœï¼Œå› æ­¤chgrpä½¿ç”¨é¢‘ç‡è¾ƒä½ã€‚
chkconfig
chkconfig: check configurateï¼Œè®¾ç½®ç³»ç»Ÿåœ¨ä¸åŒè¿è¡Œç­‰çº§ä¸‹çš„æœåŠ¡ã€‚

chkconfig --list sendmailï¼Œåˆ—å‡ºsendmailåœ¨ä¸åŒè¿è¡Œç­‰çº§ä¸‹çš„çŠ¶æ€ã€‚
chkconfig --level 35 named onï¼Œä½¿DNSæœåŠ¡å™¨åœ¨è¿è¡Œç­‰çº§ä¸º3å’Œ5æ—¶å¯åŠ¨ã€‚
chkconfig --level 0123456 vsftpd onï¼Œä½¿FTPæœåŠ¡å™¨åœ¨æ‰€æœ‰ç­‰çº§ä¸‹å¯åŠ¨ã€‚
chkconfig --lis | grep 3:å¯ç”¨ï¼Œåˆ—å‡ºrunlevel3ä¸­æ‰€æœ‰å¼€å¯çš„æœåŠ¡ã€‚
chmod
chmod: change modeï¼Œæ”¹å˜æ–‡ä»¶æˆ–ç›®å½•çš„æƒé™

chmod ugo+r file1.txt ï¼Œå°†file1.txtè®¾ä¸ºæ‰€æœ‰äººå¯è¯»å–ã€‚
chmod a+r file1.txt ï¼Œå°†file1.txtè®¾ä¸ºæ‰€æœ‰äººå¯è¯»å–ã€‚ã€€ã€€chmod ug+w,o-w file1.txt file2.txtï¼Œå°†file1.txtä¸file2.txtè®¾ä¸ºæ–‡ä»¶æ‹¥æœ‰è€…å’Œå…¶æ‰€å±åŒä¸€ä¸ªç¾¤ä½“è€…å¯å†™å…¥ï¼Œä½†å…¶ä»–ä»¥å¤–çš„äººåˆ™ä¸å¯å†™å…¥ã€‚ã€€ã€€chmod u+x ex1.pyï¼Œå°†ex1.pyè®¾å®šä¸ºåªæœ‰è¯¥æ–‡ä»¶æ‹¥æœ‰è€…å¯ä»¥æ‰§è¡Œã€‚ã€€ã€€chmod -R a+r * ï¼Œå°†ç›®å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸å­ç›®å½•çš†è®¾ä¸ºä»»ä½•äººå¯è¯»å–ã€‚
chmod 777 fileï¼Œä¸‰ä¸ª7ï¼Œåˆ†åˆ«è¡¨ç¤ºUserã€GroupåŠOtherçš„æƒé™ã€‚r=4ï¼Œw=2ï¼Œx=1ã€‚è‹¥è¦rwxå±æ€§åˆ™4+2+1=7ï¼›è‹¥è¦rw-å±æ€§åˆ™4+2=6ï¼›è‹¥è¦r-xå±æ€§åˆ™4+1=7ã€‚ 
chmod a=rwx fileå’Œchmod 777 fileæ•ˆæœç›¸åŒã€‚
chmod ug=rwx,o=x fileå’Œchmod 771 fileæ•ˆæœç›¸åŒã€‚
chmod 4755 filenameï¼Œå¯ä½¿æ­¤ç¨‹åºå…·æœ‰rootçš„æƒé™ã€‚
chown
chown: change ownerï¼Œæ”¹å˜æ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€…æˆ–ç»„

chown jessie:users file1.txt ï¼Œå°†æ–‡ä»¶file1.txtçš„æ‹¥æœ‰è€…è®¾ä¸ºusersç¾¤ä½“çš„ç”¨æˆ·jessieã€‚ã€€ã€€chmod -R lamport:users *ï¼Œå°†å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸å­ç›®å½•çš„æ‹¥æœ‰è€…çš†è®¾ä¸ºusersç¾¤ä½“çš„ç”¨æˆ·lamportã€‚
chroot
chroot: change rootï¼Œåˆ‡æ¢æ ¹ç›®å½•æ‰€åœ¨çš„è·¯å¾„

chroot /mnt/disk /bin/bashï¼Œå°†æ ¹ç›®å½•åˆ‡æ¢åˆ°/mnt/diskï¼Œå¹¶å°†/bin/bashä½œä¸ºä½¿ç”¨çš„shellã€‚
chsh
chsh: change shellï¼Œæ”¹å˜è´¦å·ç™»å½•ç³»ç»Ÿæ—¶æ‰€ä½¿ç”¨çš„shell

chsh -lï¼Œåˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„shellã€‚
chshï¼Œç„¶åæŒ‡å®šä½¿ç”¨çš„shellã€‚
chsh -s /bin/bash peterï¼ŒæŒ‡å®špeterè´¦å·çš„shellã€‚
clear
clear: clearï¼Œæ¸…é™¤ç”»é¢

clearï¼Œæ¸…å±ã€‚ 
clock
clock: clockï¼Œè°ƒæ•´RTCï¼ˆReal Time Clockï¼‰æ—¶é—´

clockï¼Œæ˜¾ç¤ºç›®å‰ç¡¬ä»¶æ—¶é’Ÿçš„æ—¶é—´ã€‚
clock --set --data=&quot;2/27/11 22:15&quot;ï¼Œå°†ç›®å‰ç¡¬ä»¶æ—¶é’Ÿçš„æ—¶é—´è®¾ç½®ä¸º2011å¹´2æœˆ27æ—¥22:15ã€‚
clock --hctosysï¼Œè®©ç³»ç»Ÿæ—¶é—´å’Œç¡¬ä»¶æ—¶é’Ÿä¸€è‡´ã€‚
clock --systohcï¼Œå°†ç³»ç»Ÿæ—¶é—´å†™å…¥ç¡¬ä»¶æ—¶é’Ÿã€‚
cmp
cmp: compareï¼Œå¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶çš„å·®å¼‚

cmp test.txt text.txtï¼Œå¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶ã€‚
ä¸€èˆ¬ä½¿ç”¨diffå‘½ä»¤æ¥è¿›è¡Œæ–‡æœ¬å†…å®¹æ¯”è¾ƒï¼Œcmpä½¿ç”¨è¾ƒå°‘ã€‚
col
col: columnï¼Œè¿‡æ»¤ç‰¹æ®Šå­—ç¬¦

col -f &lt; testfileï¼Œè¿‡æ»¤testfileä¸­çš„RLFå­—ç¬¦ã€‚
man kill | col -b &gt; kill.txtï¼Œè¿‡æ»¤æ‰€æœ‰æ§åˆ¶å­—ç¬¦ï¼ˆRLFå’ŒHRLFï¼‰ã€‚
colrm
colrm: column removeï¼Œåˆ é™¤æŒ‡å®šçš„åˆ—

cat file | colrm 7ï¼Œåˆ é™¤ç¬¬6åˆ—ä»¥åçš„å­—ç¬¦ã€‚
cat file | colrm 2 5ï¼Œåˆ é™¤ç¬¬2~5åˆ—çš„å­—ç¬¦ã€‚
compress
copress: compress

compress -f source.datï¼Œå°† source.dat å‹ç¼©æˆ source.dat.Zï¼Œè‹¥ source.dat.Z å·²ç»å­˜åœ¨ï¼Œå†…å®¹åˆ™ä¼šè¢«å‹ç¼©æ¡£è¦†ç›–ã€‚ã€€ã€€compress -vf source.datï¼Œå°† source.dat å‹ç¼©æˆ source.dat.Z ï¼Œå¹¶åˆ—å°å‡ºå‹ç¼©æ¯”ä¾‹ã€‚
compress -c source.dat &gt; target.dat.Z ï¼ŒæŒ‡å®šå‹ç¼©æ¡£åã€‚ã€€ã€€compress -b 12 source.dat ï¼Œ-b çš„å€¼è¶Šå¤§ï¼Œå‹ç¼©æ¯”ä¾‹å°±è¶Šå¤§ï¼ŒèŒƒå›´æ˜¯ 9-16 ï¼Œé¢„è®¾å€¼æ˜¯ 16 ã€‚ 
ã€€ã€€
compress -d source.dat compress -d source.dat.Z 
ç”±äºç³»ç»Ÿä¼šè‡ªåŠ¨åŠ å…¥ .Z ä¸ºå»¶ä¼¸æ¡£åï¼Œæ‰€ä»¥ source.dat ä¼šè‡ªåŠ¨å½“ä½œ source.dat.Z å¤„ç†ã€‚
å°† source.dat.Z è§£å‹æˆ source.dat ï¼Œè‹¥æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œç”¨æˆ·æŒ‰ y ä»¥ç¡®å®šè¦†ç›–æ–‡ä»¶ï¼Œè‹¥ä½¿ç”¨ -df ç¨‹åºåˆ™ä¼šè‡ªåŠ¨è¦†ç›–æ–‡ä»¶ã€‚
cp
cp: copy fileï¼Œå¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•

cp aaa bbbï¼Œå°†æ–‡ä»¶aaaå¤åˆ¶å‘½åä¸º bbbã€‚
cp *.c finishedï¼Œå°†æ‰€æœ‰çš„.cæ–‡ä»¶å¤åˆ¶åˆ°finishedç›®å½•ä¸­ã€‚
cpio
cpio: copy in, copy outï¼Œæ–‡ä»¶å¤‡ä»½

ls | cpio -o -O ./backupfileï¼Œå°†ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆä¸åŒ…å«å­ç›®å½•ï¼‰å¤‡ä»½åˆ°backupfileã€‚
cpio -t -v -I backupfileï¼ŒæŸ¥çœ‹å¤‡ä»½æ–‡ä»¶backupfileä¸­çš„æ–‡ä»¶ä¿¡æ¯ã€‚
crontab
crontab: cron tableï¼Œè®¾ç½®è®¡åˆ’ä»»åŠ¡

crontab -lï¼Œåˆ—å‡ºè‡ªå·±çš„è®¡åˆ’ä»»åŠ¡è®¾ç½®ã€‚
crontab -eï¼Œç¼–è¾‘è‡ªå·±çš„è®¡åˆ’ä»»åŠ¡ã€‚è‹¥è¦åœ¨æ¯å‘¨å…­è¿è¡Œ/usr/bin/w &gt;&gt; /root/login.txtï¼Œå¯è®¾ç½®å¦‚ä¸‹ï¼š
* * * * 6 /usr/bin/w &gt;&gt; /root/login.txt
è‹¥è¦æ”¹ä¸ºæ¯å¤©23:55è¿è¡Œä»¥ä¸Šå‘½ä»¤ï¼Œå¯è®¾ç½®å¦‚ä¸‹ï¼š
55 23 * * * /usr/bin/w &gt;&gt; /root/login.txt

crontab -u adm -rï¼Œåˆ é™¤admè´¦å·çš„è®¡åˆ’ä»»åŠ¡è®¾ç½®ã€‚
1ã€ç¡®è®¤crontabæ˜¯å¦å®‰è£…crontabï¼Œå¦‚æœæŠ¥ command not foundï¼Œå°±è¡¨æ˜æ²¡æœ‰å®‰è£…2ã€å®‰è£… crontabyum install -y vixie-cron3ã€ç¡®è®¤æ˜¯å¦å®‰è£…æˆåŠŸ:æ‰§è¡Œ crontab -l4ã€çœ‹æ˜¯å¦è®¾ç½®äº†å¼€æœºè‡ªåŠ¨å¯åŠ¨chkconfig --list crond5ã€å¯åŠ¨crontabservice crond start
csplit
csplit: content splitï¼Œåˆ†å‰²æ–‡ä»¶

csplit -n 3 vsftpd.log 3000ï¼Œä»¥3000è¡Œä¸ºç•Œåˆ†å‰²ä¸ºä¸¤ä¸ªæ–‡ä»¶ï¼Œå¹¶æŒ‡å®šåˆ—å‡ºçš„æ–‡ä»¶åä½æ•°ä¸º3ã€‚
csplit -f file vsftpd.log 3000ï¼Œä»¥3000è¡Œä¸ºç•Œåˆ†å‰²ä¸ºä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸”æŒ‡å®šåˆ†å‰²çš„æ–‡ä»¶åä»¥fileå¼€å¤´ã€‚
csplit vsftpdlog 1000 &#123;7&#125;ï¼Œä»¥1000è¡Œä¸ºç•Œåˆ†å‰²ä¸º7ä¸ªæ–‡ä»¶ã€‚
ctrlaltdel
ctrlaltdel: control alt delï¼Œè®¾ç½®Ctrl+Alt+Delå¿«æ·é”®ã€‚

ctrlaltdel hardï¼Œè®¾ç½®ä¸ºä¸ä¿å­˜æ•°æ®ç«‹å³é‡å¯ã€‚ctrlaltdel softï¼Œè®¾ç½®ä¸ºä¿å­˜æ•°æ®ã€åœæ­¢æœåŠ¡ã€å¸è½½æ–‡ä»¶åé‡å¯ã€‚
cut
cut: cutï¼Œæˆªå–æ–‡æœ¬å†…å®¹çš„æŒ‡å®šèŒƒå›´

cat log1ï¼Œæ­£å¸¸æŸ¥çœ‹æ–‡ä»¶ã€‚
root    pts/0        2013-04-29 00:52(192.168.222.1)root    pts/0        2013-04-29 00:52(192.168.222.1)root    pts/0        2013-04-29 00:52(192.168.222.1)

cut -b 3,10 log1ï¼Œåªå–å‡ºç¬¬3ã€10ä¸ªå­—èŠ‚ã€‚
opopop

cut -b -3 log1ï¼Œå–å‰3ä¸ªå­—èŠ‚ã€‚
roorooroo


Ddate
date: dateï¼Œæ˜¾ç¤ºæˆ–ä¿®æ”¹æ—¥æœŸæ—¶é—´

dateï¼Œæ˜¾ç¤ºå½“å‰æ—¥æœŸå’Œæ—¶é—´ã€‚
date +%B%dï¼Œæ˜¾ç¤ºæœˆä»½ä¸æ—¥æ•°ã€‚
dd
dd: standard input, standard outputï¼Œè½¬æ¢å¹¶åˆ—å‡ºæ•°æ®

dd if=file.txt of=/dev/fd0ï¼Œå°†æ–‡ä»¶file.txtå†™å…¥åˆ°è½¯ç›˜ã€‚
dd if=boot.img of=/dev/fd0 bs=1440kï¼Œåˆ¶ä½œå¯åŠ¨ç›˜ï¼Œå…¶ä¸­ï¼Œboot.imgä¸ºå¼€æœºçš„é•œåƒæ–‡ä»¶ã€‚
dd if=test.txt of=out.txt conv=ucaseï¼Œå°†æ–‡ä»¶test.txtä¸­çš„è‹±æ–‡å­—æ¯å…¨éƒ¨è½¬æ¢ä¸ºå¤§å†™åï¼Œå­˜å‚¨ä¸ºout.txtã€‚
debugfs
debugfs: debug file systemï¼Œext2å’Œext3çš„æ–‡ä»¶ç³»ç»Ÿæ”¹é”™å·¥å…·

debugfs /dev/sda7ï¼Œdump install.log /root/bkp.txtï¼Œå°†/dev/sda7ä¸‹çš„install.logæ–‡ä»¶å¯¼å‡ºä¸€ä»½æ”¾åˆ°/root/bkp.txtä¸­ã€‚
declare
declare: declareï¼Œå£°æ˜ç¯å¢ƒå˜é‡

declareï¼Œæ˜¾ç¤ºå½“å‰çš„shellå˜é‡ã€‚
declare -xï¼Œæ˜¾ç¤ºæ‰€æœ‰çš„ç¯å¢ƒå˜é‡ã€‚
declare -i number=100+200ï¼Œecho $numberï¼Œå¦‚æœä¸åŠ -iï¼Œç³»ç»Ÿä¼šä»¥å­—ç¬¦ä¸²æ–¹å¼æ¥å¤„ç†100+200ã€‚
declareå‘½ä»¤ä¸exportå‘½ä»¤ç›¸æ¯”ï¼ŒåŒºåˆ«åœ¨äºdeclareå£°æ˜çš„æ˜¯shellå˜é‡ï¼Œexportå£°æ˜çš„æ˜¯ç¯å¢ƒå˜é‡ã€‚shellå˜é‡åªèƒ½ç»™shellåªç”¨ï¼Œç¯å¢ƒå˜é‡å¯ä»¥ç»™shellä»¥åŠå¤–éƒ¨å‘½ä»¤ä½¿ç”¨ã€‚declareåŠ ä¸Š-xå‚æ•°ï¼Œåˆ™ä¸exportçš„ä½œç”¨ç›¸åŒã€‚
depmod
depmod: dependence of moduleï¼Œåˆ†æå¯åŠ è½½æ¨¡å—çš„å…³è”æ€§

depmod -aï¼Œæ£€æµ‹æ¨¡å—çš„å…³è”æ€§ã€‚
df
df: display file systemï¼Œæ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿçš„ä½¿ç”¨æƒ…å†µ

dfï¼Œæ˜¾ç¤ºå½“å‰æ–‡ä»¶ç³»ç»Ÿçš„ä½¿ç”¨çŠ¶å†µã€‚
df -mï¼Œä»¥MBä¸ºå•ä½æ¥æ˜¾ç¤ºå½“å‰æ–‡ä»¶ç³»ç»Ÿçš„ä½¿ç”¨çŠ¶å†µã€‚
df -aï¼Œæ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿçš„ä½¿ç”¨çŠ¶å†µã€‚
df -hï¼Œä»¥è¾ƒæ˜“è¯»å–çš„æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿçš„ä½¿ç”¨çŠ¶å†µã€‚
df -iï¼Œæ˜¾ç¤ºç³»ç»Ÿinodeçš„çŠ¶æ€ã€‚
diff
diff: diffrenceï¼Œæ¯”è¾ƒå¹¶æ˜¾ç¤ºæ–‡ä»¶å·®å¼‚

diff file1 file2ï¼Œå¯¹æ¯”file1å’Œfile2ã€‚
diff -c file1 file2ï¼Œå¯¹æ¯”file1å’Œfile2ï¼Œå¹¶åˆ—å‡ºæ–‡ä»¶çš„å¼‚åŒã€‚
diff -y file1 file2ï¼Œå¯¹æ¯”file1å’Œfile2ï¼Œå¹¶ä»¥å¹¶åˆ—çš„æ–¹å¼æ˜¾ç¤ºå¯¹æ¯”ç»“æœã€‚
diff -B file1 file2ï¼Œå¯¹æ¯”file1å’Œfile2ï¼Œä¸å¯¹æ¯”ç©ºç™½è¡Œã€‚
diff /etc/mail/ mail/ï¼Œæ¯”è¾ƒä¸¤ä¸ªç›®å½•çš„å·®å¼‚ã€‚
diffstat
diffstat: diffrence statisticsï¼Œæ ¹æ®diffçš„æ¯”è¾ƒç»“æœæ˜¾ç¤ºç»Ÿè®¡æ•°å­—

diff /etc/mail/ mail/ | diffstatï¼Œå¯¹æ¯”ä¸¤ä¸ªç›®å½•çš„å·®å¼‚ï¼Œå¹¶é€šè¿‡diffstatå‘½ä»¤åˆ—å‡ºã€‚
dig
dig: digï¼Œæ˜¾ç¤ºåŸŸåçš„é«˜çº§ä¿¡æ¯

dig sina.comï¼ŒæŸ¥è¯¢åŸŸåsina.comã€‚
dig 163.com -t MXï¼ŒæŸ¥è¯¢163.comçš„é‚®ä»¶åç§°è®°å½•ï¼ˆMX recordï¼‰ã€‚
dir
dir: directoryï¼Œåˆ—å‡ºç›®å½•æˆ–æ–‡ä»¶å

dirï¼Œåˆ—å‡ºå½“å‰ç›®å½•çš„æ–‡ä»¶ã€‚
dir -lï¼Œä»¥é•¿åˆ—è¡¨åˆ—å‡ºå½“å‰çš„æ–‡ä»¶ã€‚
dirå‘½ä»¤å’Œlså‘½ä»¤çš„åŠŸèƒ½å®Œå…¨ç›¸åŒã€‚
dirname
dirname: directory nameï¼Œåˆ—å‡ºå½“å‰è·¯å¾„ä¸‹çš„è·¯å¾„åç§°

dirname /opt/httpdï¼Œæ˜¾ç¤º/opt/httpdä¸‹çš„è·¯å¾„åç§°ã€‚
dirname file.txtï¼Œæ˜¾ç¤ºfile.txtæ–‡ä»¶çš„è·¯å¾„åç§°ã€‚
dpkg
dpkg: Debian packageï¼ŒDebianè½¯ä»¶åŒ…ç®¡ç†å·¥å…·

dpkg -L postfixï¼Œåˆ—å‡ºpostfixå®‰è£…çš„æ–‡ä»¶ã€‚
dpkg -i ./unzip_6.0-1_i386.debï¼Œå®‰è£…å½“å‰è·¯å¾„ä¸‹çš„unzip_6.0-1_i386.debã€‚
dpkgæ˜¯Debianå’ŒUbuntuä¸Šçš„è½¯ä»¶åŒ…å®‰è£…æŒ‡ä»¤ï¼Œç±»ä¼¼äºRedHatä¸Fedoraä¸Šçš„rpmï¼Œä½†ä¸€èˆ¬è¾ƒå¸¸ä½¿ç”¨apt-getã€‚
du
du: display unitsï¼Œæ˜¾ç¤ºç›®å½•æˆ–æ–‡ä»¶çš„å¤§å°

duï¼Œæ˜¾ç¤ºå½“å‰ç›®å½•çš„ä½¿ç”¨æƒ…å†µã€‚
du -sk /var/*ï¼Œæ˜¾ç¤º/varç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶çš„å®¹é‡ï¼Œä»…æ˜¾ç¤ºæ€»å’Œï¼Œé»˜è®¤ä»¥KBä¸ºå•ä½ã€‚
du -sh /*ï¼Œä»¥å¯è¯»æ€§é«˜çš„æ–¹å¼æ˜¾ç¤ºæ ¹ç›®å½•ä¸‹çš„ç›®å½•å®¹é‡ã€‚
du --max-depth=2 /varï¼Œæ˜¾ç¤º/varç›®å½•ä¸‹ä¸¤å±‚å­ç›®å½•æ‰€å ç”¨çš„ç©ºé—´ã€‚
du -b backupfileï¼Œæ˜¾ç¤ºæ–‡ä»¶å ç”¨çš„ç©ºé—´ã€‚
dump
dump: dumpï¼Œæ–‡ä»¶ç³»ç»Ÿçš„å¤‡ä»½

dump -0 -f /opt/backup /bootï¼Œå°†/bootä¸‹çš„æ•°æ®å¤‡ä»½åˆ°/opt/backupä¸­ï¼Œå¹¶æ›´æ–°/etc/dumpdatesä¸­çš„è®°å½•ã€‚
cat /etc/dumpdatesï¼ŒæŸ¥çœ‹æ›´æ–°åçš„è®°å½•ã€‚
restore -r -f /opt/backupï¼Œè¿˜åŸbackupåˆ°å¤‡ä»½çš„ä½ç½®ã€‚
dumpå‘½ä»¤å¸¸ç”¨æ¥å¤‡ä»½ext2å’Œext3æ–‡ä»¶ç³»ç»Ÿã€‚
restoreå‘½ä»¤æ˜¯dumpå‘½ä»¤çš„é€†å‘½ä»¤ã€‚
]]></content>
      <categories>
        <category>engineering</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>å…³äºå®‰å“çš„é—®é¢˜</title>
    <url>/hobby-android-question/</url>
    <content><![CDATA[1ã€åˆ é™¤.thumbnailsæ–‡ä»¶å¤¹åœ¨DCIMæ–‡ä»¶å¤¹ä¸‹åˆ é™¤.thumbnailsæ–‡ä»¶å¤¹ï¼Œç”¨æ‰‹æœºä¸‹è½½reç®¡ç†å™¨ï¼Œæ‰“å¼€ç®¡ç†å™¨åœ¨DCIMæ–‡ä»¶å¤¹ä¸‹å»ºç«‹.thumbnailsæ–‡ä»¶ï¼ˆæ³¨ï¼šæ˜¯æ–‡ä»¶ä¸æ˜¯æ–‡ä»¶å¤¹ï¼‰ä»¥åå°±ä¸ä¼šå†æœ‰äº†ã€‚
2ã€å®‰å“å±è”½æ–‡ä»¶å¤¹ä¸‹çš„åª’ä½“æ–‡ä»¶åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹æ–°å»ºåä¸ºâ€œ.nomediaâ€çš„æ–‡ä»¶ã€‚
3ã€æ‰‹æœºè®¿é—®ç”µè„‘æ–‡ä»¶ESæ–‡ä»¶æµè§ˆå™¨
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>android</tag>
      </tags>
  </entry>
  <entry>
    <title>IEé¦–é¡µè¢«ç¯¡æ”¹è§£å†³åŠæ³•</title>
    <url>/hobby-ie-homepage/</url>
    <content><![CDATA[è§£å†³åŠæ³•1:ä½¿ç”¨360ã€‚
è§£å†³åŠæ³•2:1.èµ·å§‹é¡µçš„ä¿®æ”¹ã€‚å±•å¼€æ³¨å†Œè¡¨åˆ°HKEY_LOCAL_MACHINE\Software\Microsoft\Internet Explorer\Mainï¼Œåœ¨å³åŠéƒ¨åˆ†çª—å£ä¸­å°†â€Start Pageâ€çš„é”®å€¼æ”¹ä¸ºâ€about:blankâ€å³å¯ã€‚
åŒç†ï¼Œå±•å¼€æ³¨å†Œè¡¨åˆ°HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Mainï¼Œåœ¨å³åŠéƒ¨åˆ†çª—å£ä¸­å°†â€Start Pageâ€çš„é”®å€¼æ”¹ä¸ºâ€about:blankâ€å³å¯ã€‚
æ³¨æ„:æœ‰æ—¶è¿›è¡Œäº†ä»¥ä¸Šæ­¥éª¤åä»ç„¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œä¼°è®¡æ˜¯æœ‰ç¨‹åºåŠ è½½åˆ°äº†å¯åŠ¨é¡¹çš„ç¼˜æ•…ï¼Œå°±ç®—ä¿®æ”¹äº†ï¼Œä¸‹æ¬¡å¯åŠ¨æ—¶ä¹Ÿä¼šè‡ªåŠ¨è¿è¡Œç¨‹åºï¼Œå°†ä¸Šè¿°è®¾ç½®æ”¹å›æ¥ï¼Œè§£å†³æ–¹æ³•å¦‚ä¸‹:è¿è¡Œæ³¨å†Œè¡¨ç¼–è¾‘å™¨Regedit.exeï¼Œç„¶åä¾æ¬¡å±•å¼€HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Runä¸»é”®ï¼Œç„¶åå°†ä¸‹é¢çš„â€registry.exeâ€å­é”®(åå­—ä¸å›ºå®š)åˆ é™¤ï¼Œæœ€ååˆ é™¤ç¡¬ç›˜é‡Œçš„åŒåå¯æ‰§è¡Œç¨‹åºã€‚é€€å‡ºæ³¨å†Œç¼–è¾‘å™¨ï¼Œé‡æ–°å¯åŠ¨è®¡ç®—æœºï¼Œé—®é¢˜å°±è§£å†³äº†ã€‚
2.é»˜è®¤ä¸»é¡µçš„ä¿®æ”¹ã€‚è¿è¡Œæ³¨å†Œè¡¨ç¼–è¾‘å™¨ï¼Œå±•å¼€HKEY_LOCAL_MACHINE\Software\Microsoft\Internet Explorer\Main\ï¼Œå°†Default-Page-URLå­é”®çš„é”®å€¼ä¸­çš„é‚£äº›æ¶æ„ç½‘ç«™çš„ç½‘å€æ”¹æ­£ï¼Œæˆ–è€…è®¾ç½®ä¸ºIEçš„é»˜è®¤å€¼ã€‚
æ³¨:å¦‚æœæ— æ³•ä¿®æ”¹,è¯·è¿›å…¥å®‰å…¨æ¨¡å¼ã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
  </entry>
  <entry>
    <title>ArtCursorsä½¿ç”¨æ•™ç¨‹</title>
    <url>/hobby-artcursors/</url>
    <content><![CDATA[å·¦æ‰‹ä½¿ç”¨é¼ æ ‡ä½ æ˜¯å·¦æ’‡å—ï¼Œä»¥è‡³ç”¨é¼ æ ‡éƒ½æ˜¯å·¦æ‰‹ï¼Œæˆ–è€…ä½ åƒæˆ‘ä¸€æ ·ï¼Œæœ‰å…´è¶£ç»å¸¸æ”¹å˜å•è°ƒçš„ä¹ æƒ¯ï¼Œåˆæˆ–è€…æœ‰æ„é”»ç‚¼å³è¾¹å¤§è„‘ï¼Œè€Œæœ‰è¯•è¿‡æŠŠé¼ æ ‡è°ƒæˆå·¦æ‰‹ä¹ æƒ¯ï¼Ÿé‚£ä¹ˆä½ ä¸€å®šä¼šå‘ç°ï¼Œä½ å¯ä»¥æŠŠé¼ æ ‡æ‹¿åˆ°é”®ç›˜å·¦è¾¹ï¼ŒæŠŠå·¦å³é”®è°ƒæ¢ï¼Œä½†ç³»ç»Ÿå´æ²¡æœ‰å·¦æ‰‹æ–¹å‘çš„æŒ‡é’ˆã€‚
å¾®è½¯ä¼¼ä¹ä»ä¸€å¼€å§‹å°±æ²¡æœ‰ç…§é¡¾æƒ³ç”¨å·¦æ‰‹æ‹¿é¼ æ ‡çš„äººï¼Œä»win9xå¹´ä»£å¼€å§‹ï¼Œåˆ°ç°åœ¨çš„vistaï¼Œä»é”®ç›˜çš„å¸ƒå±€ï¼ˆä¸æ¸…æ¥šæ˜¯å¦å¾®è½¯è®¾è®¡ï¼‰ï¼Œç³»ç»Ÿå¿«æ·é”®ï¼Œåˆ°é¼ æ ‡æŒ‡é’ˆï¼Œç”šè‡³æ•´ä¸ªç³»ç»Ÿï¼Œæ²¡æœ‰å“ªä¸€ç‚¹æ˜¯ä¸ºäº†æ–¹ä¾¿å·¦æ‰‹ä¹ æƒ¯çš„ã€‚ä¹Ÿéš¾æ€ªç½‘ä¸Šä¼šæœ‰äººè¯´å¾®è½¯æ­§è§†å·¦æ’‡å­äº†ã€‚
æˆ‘å¾ˆç†è§£ä½¿ç”¨å·¦æ‰‹ä½†é¼ æ ‡æŒ‡é’ˆå´ä»å‘å³æ’‡çš„åˆ«æ‰­ï¼ï¼ä¸è¦è¯´ä¹ æƒ¯äº†ä¹Ÿä¸€æ ·ï½ï½
ä¹‹å‰çš„ç¡®æ‰¾åˆ°è¿‡xpä¸‹çš„åå‘é¼ æ ‡æŒ‡é’ˆï¼Œå¯æ˜¯æ‰¾äº†å¾ˆä¹…ä¹Ÿæ²¡æœ‰æ‰¾åˆ°vistaä¸‹çš„ï¼Œåˆä¸æƒ³ç‰ºç‰²å¤–è¡¨ç”¨å›ä»¥å‰xpä¸‹çš„æŒ‡é’ˆï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ
ä»Šå¤©æ‰¾äº†ä¸‹ï¼Œæ‰¾åˆ°ä¸ªè½¯ä»¶ï¼Œå«ArtCursorsã€‚
ArtCursorså°æ¡£æ¡ˆè½¯ä»¶ç‰ˆæœ¬ï¼š4.21 è½¯ä»¶å¤§å°ï¼š1051KBè½¯ä»¶æ€§è´¨ï¼šå…±äº«è½¯ä»¶ é€‚ç”¨å¹³å°ï¼šWindows 9x/ME/NT/2000/XP/2003ä¸‹è½½åœ°å€ï¼šhttp://www.onlinedown.net/soft/11132.htm


é¼ æ ‡æŒ‡é’ˆæ¢ä¸ªæ–¹å‘Step 1è¿è¡ŒArtCursorsï¼Œåœ¨å¼¹å‡ºçš„New Cursorï¼ˆæ–°å»ºæŒ‡é’ˆï¼‰çª—å£ä¸­å•å‡»â€œCancelï¼ˆå–æ¶ˆï¼‰â€æŒ‰é’®ï¼Œå› ä¸ºæˆ‘ä»¬è¦æ‰“å¼€å·²æœ‰çš„é¼ æ ‡æŒ‡é’ˆè¿›è¡Œç¼–è¾‘ã€‚é€‰æ‹©èœå•å‘½ä»¤â€œFileâ†’Openï¼ˆæ–‡ä»¶â†’æ‰“å¼€ï¼‰â€æˆ–æŒ‰ä¸‹Ctrl+Oç»„åˆé”®ï¼Œå±•å¼€X:\Windows\Cursorsï¼ˆX:è¡¨ç¤ºç³»ç»Ÿå®‰è£…ç›˜ç¬¦ï¼‰ç›®å½•ï¼Œæ‰¾åˆ°æŸä¸ªéœ€è¦è°ƒæ•´æ–¹å‘çš„æŒ‡é’ˆæ–‡ä»¶ï¼Œæ¯”å¦‚â€œaero_arrow.curâ€ï¼Œè¿™æ˜¯â€œWindows Aeroï¼ˆç³»ç»Ÿæ–¹æ¡ˆï¼‰â€ä¸­çš„â€œæ­£å¸¸é€‰æ‹©â€æŒ‡é’ˆã€‚å•å‡»â€œæ‰“å¼€â€æŒ‰é’®å°†æ­¤æŒ‡é’ˆæ–‡ä»¶æ‰“å¼€ã€‚
Â 
Step 2åœ¨å·¥ä½œåŒºåŸŸä¸­å•å‡»å³é”®ï¼Œé€‰æ‹©â€œFlipâ†’Horizontallyï¼ˆç¿»è½¬â†’æ°´å¹³æ–¹å‘ï¼‰â€ï¼Œå³å¯å°†æŒ‡é’ˆè½¬æ¢æˆé€‚åˆå·¦æ‰‹ä½¿ç”¨çš„æ–¹å‘ã€‚åœ¨çª—å£å³ä¸‹è§’å¯ä»¥çœ‹åˆ°è½¬æ¢åçš„å®é™…æ•ˆæœå›¾ã€‚
Â å…‰æŠŠå›¾æ ‡ç¿»è½¬æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜è¦è®¾ç½®â€œçƒ­ç‚¹â€ã€‚æ‰€è°“çƒ­ç‚¹å°±æ˜¯æŒ‡é’ˆç”¨æ¥è§¦å‘äº‹ä»¶çš„ç‚¹ï¼Œå¯¹äºç®­å¤´æ¥è¯´ï¼Œçƒ­ç‚¹å½“ç„¶å°±æ˜¯ç®­å¤´çš„å°–ç«¯äº†ã€‚å¯¹äºé»˜è®¤çš„32Ã—32åƒç´ çš„æŒ‡é’ˆï¼ŒArtCursorså°†å·¦ä¸Šè§’çš„åæ ‡å®šä¹‰ä¸ºï¼ˆ0,0ï¼‰ï¼Œå³ä¸‹è§’ä¸ºï¼ˆ31,31ï¼‰ã€‚å› ä¸ºæˆ‘ä»¬å¯¹æŒ‡é’ˆè¿›è¡Œäº†æ°´å¹³ç¿»è½¬ï¼Œæ‰€ä»¥å°†çƒ­ç‚¹çš„æ°´å¹³åæ ‡æ”¹ä¸ºâ€œ31-Xï¼ˆXæ˜¯åŸåæ ‡ï¼‰â€ï¼Œå‚ç›´åæ ‡ä¿æŒä¸å˜å³å¯ã€‚ä»¥â€œaero_arrow.curâ€æ–‡ä»¶ä¸ºä¾‹ï¼Œå°†çƒ­ç‚¹åæ ‡ä»ï¼ˆ0,0ï¼‰æ”¹ä¸ºï¼ˆ31,0ï¼‰ã€‚
Â 
Step 3é€‰æ‹©èœå•å‘½ä»¤â€œCursorâ†’Hot Spotï¼ˆæŒ‡é’ˆâ†’çƒ­ç‚¹ï¼‰â€ï¼Œåœ¨å¯¹è¯æ¡†ä¸­ä¸ºç¿»è½¬åçš„é¼ æ ‡æŒ‡é’ˆè®¾ç½®æ–°çš„çƒ­ç‚¹ã€‚
åšå®Œä»¥ä¸Šä¸¤æ­¥ï¼Œä¸€ä¸ªå·¦æ‰‹çš„æŒ‡é’ˆå°±å®Œæˆäº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿä½†è¯·ä¸è¦è¦†ç›–ä¿å­˜ç³»ç»Ÿè‡ªå¸¦çš„å›¾ç‰‡ï¼Œé€‰æ‹©èœå•å‘½ä»¤â€œFileâ†’Save asï¼ˆæ–‡ä»¶â†’å¦å­˜ä¸ºï¼‰â€ï¼Œåœ¨æ‰“å¼€çš„ä¿å­˜å¯¹è¯æ¡†ä¸­ï¼Œä¸ºç¿»è½¬åçš„æŒ‡é’ˆå‘½åä¸ºä½ æƒ³è¦çš„åå­—ï¼Œå¦‚â€œaero_left.curâ€ï¼Œä»¥ä¾¿å’ŒåŸæ¥çš„å³æ‰‹ç”¨æŒ‡é’ˆæ–‡ä»¶åŒºåˆ†å¼€æ¥ã€‚Â å¯¹äºæœ‰äº›åŠ¨æ€æŒ‡é’ˆï¼Œå¹¶ä¸æ˜¯ç¿»è½¬ä¸€æ¬¡å°±å®Œæˆï¼Œè€Œæ˜¯è¦ç¿»è½¬å¤šæ¬¡ï¼Œå› ä¸ºå®ƒæ˜¯å¤šå¸§çš„ï¼Œæ¯ä¸€å¸§éƒ½è¦å¤„ç†ã€‚
å…‰æ ‡è®¾ç½®ä½¿ç”¨ArtCursorsï¼Œæˆ‘ä»¬åˆ¶ä½œå‡ºäº†è‡ªå·±å–œæ¬¢çš„å…‰æ ‡ã€‚æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥åº”ç”¨åˆ°æˆ‘ä»¬çš„è®¡ç®—æœºä¸Šäº†ã€‚
1ã€æŠŠè‡ªå·±å–œæ¬¢çš„è¿™ä¸€å¥—å…‰æ ‡æ”¾è¿›æ–‡ä»¶å¤¹ï¼ˆåç§°éšæ„ï¼‰ï¼ŒéƒåŒå­¦ç»™è¿™ä¸ªæ–‡ä»¶å¤¹èµ·åmycursorã€‚ç„¶åæŠŠmycursorå¤åˆ¶åˆ°C:\Windows\Cursorsæ–‡ä»¶å¤¹ä¸‹é¢ã€‚
2ã€æ¡Œé¢å³å‡»ï¼Œä¸ªæ€§åŒ–ï¼Œæ›´æ”¹é¼ æ ‡æŒ‡é’ˆã€‚
3ã€å•å‡»è‡ªå®šä¹‰ï¼ˆCï¼‰é‡Œé¢çš„æ­£å¸¸é€‰æ‹©ï¼Œæµè§ˆï¼Œè¿›å…¥mycursoræ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°åˆé€‚çš„å…‰æ ‡ï¼Œæ‰“å¼€ã€‚ä¾æ¬¡é€ä¸ªæ›¿æ¢è‡ªå®šä¹‰ï¼ˆCï¼‰é‡Œé¢çš„å…‰æ ‡ã€‚
4ã€ä¿®æ”¹å®Œæˆåï¼Œå¦å­˜ä¸ºmycursorï¼Œä»¥åå°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„åˆ‡æ¢æ•´å¥—å…‰æ ‡äº†ã€‚
Â 
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title>æ— æ³•åœæ­¢é€šç”¨å·è®¾å¤‡</title>
    <url>/hobby-could-not-stop-the-general-volume-equipment/</url>
    <content><![CDATA[å®‰å…¨åˆ é™¤Uç›˜æ—¶ï¼Œå¤§å®¶å¸¸å¸¸ä¼šé‡åˆ°æç¤ºâ€œæ— æ³•åœæ­¢â€˜é€šç”¨å·â€™è®¾å¤‡ï¼Œè¯·ç¨å€™å†åœæ­¢è¯¥è®¾å¤‡ã€‚â€
è¿™ç§æƒ…å†µä¸‹å¯ä»¥å¼ºè¡Œæ‹”ä¸‹Uç›˜å—ï¼Ÿå½“ç„¶ä¸å¯ä»¥ï¼è¿™æ—¶å€™å¦‚æœå¼ºè¡Œæ‹”é™¤çš„è¯ï¼Œå¾ˆå®¹æ˜“æŸåè®¡ç®—æœºUå£æˆ–è€…ä½ çš„Uç›˜ã€‚å¦‚æœä½ çš„Uç›˜ä¸Šæœ‰é‡è¦çš„èµ„æ–™ï¼Œå¾ˆæœ‰å¯èƒ½å°±æ­¤æ¯åäº†ã€‚é‚£ä¹ˆåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ
ç¬¬ä¸€ç§æ–¹æ³•ï¼šï¼ˆè¿™ä¹Ÿæ˜¯æˆ‘å»ºè®®å¤§å®¶æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼‰å¾€å¾€æˆ‘ä»¬åœ¨æŠŠUç›˜çš„æ–‡ä»¶æˆ–è€…æ•°æ®å–å‡ºæ¥çš„æ—¶å€™ï¼Œéƒ½æ˜¯ç”¨çš„â€œå¤åˆ¶â€â€œç²˜è´´â€æ–¹å¼ï¼Œè€Œå¦‚æœå¤åˆ¶çš„æ˜¯Uç›˜ä¸Šçš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å°±ä¼šä¸€ç›´æ”¾åœ¨ç³»ç»Ÿçš„å‰ªåˆ‡æ¿é‡Œï¼Œå¤„äºå¾…ç”¨çŠ¶æ€ã€‚è€Œå¦‚æœè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬è¦åˆ é™¤Uç›˜çš„è¯ï¼Œå°±ä¼šå‡ºç°ä¸Šé¢çš„æ— æ³•åœæ­¢Uç›˜çš„æç¤ºã€‚
ç›¸åº”çš„è§£å†³åŠæ³•å°±æ˜¯ï¼šæ¸…ç©ºä½ çš„å‰ªåˆ‡æ¿ï¼Œæˆ–è€…åœ¨ä½ çš„ç¡¬ç›˜ä¸Šéšä¾¿è¿›è¡Œä¸€ä¸‹å¤åˆ¶æŸæ–‡ä»¶å†ç²˜è´´çš„æ“ä½œï¼Œè¿™æ—¶å€™ä½ å†å»åˆ é™¤Uç›˜æç¤ºç¬¦ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯é¡ºåˆ©åˆ é™¤äº†ï¼Ÿ 
ç¬¬äºŒç§æ–¹æ³•ï¼šå¦‚æœè§‰å¾—ä¸Šé¢é‚£ç§æ–¹æ³•è¿˜æ— æ•ˆçš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ä¸ªæ–¹æ³•ï¼š
åŒæ—¶æŒ‰ä¸‹é”®ç›˜çš„â€Ctrlâ€ï¼‹â€Altâ€ï¼‹â€Delâ€ç»„åˆé”®ï¼Œè¿™æ—¶ä¼šå‡ºç°â€ä»»åŠ¡ç®¡ç†å™¨â€çš„çª—å£ï¼Œå•å‡»â€è¿›ç¨‹â€æ ‡ç­¾ï¼Œåœ¨â€æ˜ åƒåç§°â€ä¸­å¯»æ‰¾â€rundll32.exeâ€è¿›ç¨‹ï¼Œé€‰æ‹©â€rundll32.exeâ€è¿›ç¨‹ï¼Œç„¶åç‚¹å‡»â€ç»“æŸè¿›ç¨‹â€ï¼Œè¿™æ—¶ä¼šå¼¹å‡ºä»»åŠ¡ç®¡ç†å™¨è­¦å‘Šï¼Œé—®ä½ ç¡®å®šæ˜¯å¦å…³é—­æ­¤è¿›ç¨‹ï¼Œç‚¹å‡»â€æ˜¯â€ï¼Œå³å…³é—­äº†â€rundll32.exeâ€è¿›ç¨‹ã€‚å†åˆ é™¤Uç›˜å°±å¯ä»¥æ­£å¸¸åˆ é™¤äº†ã€‚
ä½¿ç”¨è¿™ç§æ–¹æ³•æ—¶è¯·æ³¨æ„ï¼šå¦‚æœæœ‰å¤šä¸ªâ€rundll32.exeâ€è¿›ç¨‹ï¼Œéœ€è¦å°†å¤šä¸ªâ€rundll32.exeâ€è¿›ç¨‹å…¨éƒ¨å…³é—­ã€‚
ç¬¬ä¸‰ç§æ–¹æ³•ï¼šè¿™ç§æ–¹æ³•åŒæ ·æ˜¯å€ŸåŠ©äº†ä»»åŠ¡ç®¡ç†å™¨ï¼ŒåŒæ—¶æŒ‰ä¸‹é”®ç›˜çš„â€Ctrlâ€ï¼‹â€Altâ€ï¼‹â€Delâ€ç»„åˆé”®ï¼Œå‡ºç°â€ä»»åŠ¡ç®¡ç†å™¨â€çš„çª—å£ï¼Œå•å‡»â€è¿›ç¨‹â€ï¼Œå¯»æ‰¾â€EXPLORER.EXEâ€è¿›ç¨‹å¹¶ç»“æŸå®ƒã€‚è¿™æ—¶å€™ä½ ä¼šå‘ç°ä½ çš„æ¡Œé¢ä¸è§äº†ï¼Œè¯·ä¸è¦æƒŠæ…Œï¼Œç»§ç»­è¿›è¡Œä¸‹é¢çš„æ“ä½œï¼Œåœ¨ä»»åŠ¡ç®¡ç†å™¨ä¸­ç‚¹å‡»â€œæ–‡ä»¶â€â€”â€”â€œæ–°å»ºä»»åŠ¡â€â€”â€”è¾“å…¥EXPLORER.EXEâ€”â€”ç¡®å®šã€‚å†åˆ é™¤Uç›˜ï¼Œä½ ä¼šå‘ç°å¯ä»¥å®‰å…¨åˆ é™¤äº†ã€‚
ç¬¬å››ç§æ–¹æ³•ï¼šè¿™ç§æ–¹æ³•æœ€ç®€å•ï¼Œä½†æœ€è€—æ—¶ï¼Œé‚£å°±æ˜¯ï¼Œé‡å¯ä½ çš„ç”µè„‘ã€‚
ç¬¬äº”ç§æ–¹æ³•ï¼šä¸€ä¸ªå›½å¤–çš„ååˆ†å°å·§å®ç”¨çš„è½¯ä»¶ï¼Œåªæœ‰191KBï¼Œå«unlockerï¼Œååˆ†å¥½ç”¨ï¼è¿™ä¸ªè½¯ä»¶èƒ½è§£é”USBè¿æ¥è®¾å¤‡ï¼å°±èƒ½å®ç°100%å®‰å…¨åˆ é™¤USBè¿æ¥äº†ï¼ 
é¢„é˜²æ–¹æ³•ï¼šå¦‚æœè§‰å¾—å‡ºç°é—®é¢˜çš„æ—¶å€™æ‰è§£å†³æœ‰äº›éº»çƒ¦ï¼Œå¯ä»¥é‡‡ç”¨ä¸‹é¢è¿™ä¸ªæå‰çš„é¢„é˜²æªæ–½ï¼šå…³é—­ç³»ç»Ÿçš„é¢„è§ˆåŠŸèƒ½ã€‚
æ–¹æ³•ï¼šåŒå‡»æˆ‘çš„ç”µè„‘â€”â€”å·¥å…·â€”â€”æ–‡ä»¶å¤¹é€‰é¡¹â€”â€”å¸¸è§„â€”â€”ä»»åŠ¡â€”â€”ä½¿ç”¨windowsä¼ ç»Ÿé£æ ¼çš„æ–‡ä»¶å¤¹ï¼Œç„¶åç‚¹å‡»ç¡®å®šå°±è¡Œäº†ã€‚è¿™æ ·ä¸€åŠ³æ°¸é€¸äº†ã€‚
å°çªé—¨ï¼šç›®å‰æœ‰äº›Uç›˜çš„æŠ€æœ¯å¾ˆåˆ°ä½äº†ï¼Œæœ‰çš„Uç›˜ç›´æ¥æ’æ‹”ä¹Ÿå¯ä»¥çš„ã€‚ä½†æ— è®ºæ˜¯å¤šå¥½çš„Uç›˜ï¼Œæœ‰ä¸€ç§æ—¶å€™æ˜¯ç»å¯¹ä¸èƒ½ç›´æ¥æ’æ‹”çš„ï¼Œé‚£å°±æ˜¯ä»”ç»†çœ‹ä½ Uç›˜çš„é‚£ä¸ªå°çº¢ç¯ï¼Œå°ç¯åœ¨ä¸åœé—ªçš„æ—¶å€™è¡¨ç¤ºæ­£åœ¨ä¸åœåœ°è¯»å†™æ•°æ®ï¼Œè¿™æ—¶å€™åƒä¸‡ä¸èƒ½æ‹”ï¼Œå¦åˆ™è½»åˆ™æŸåæ•°æ®ï¼Œé‡åˆ™Uç›˜æŠ¥åºŸã€‚
]]></content>
      <categories>
        <category>computer</category>
      </categories>
      <tags>
        <tag>windows</tag>
      </tags>
  </entry>
</search>
