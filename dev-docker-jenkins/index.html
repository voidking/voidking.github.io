<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//qiniu-cdn.voidking.com/doc/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="前言《CentOS7安装部署Jenkins》一文中学习了Jenkins的安装方法，如果使用Docker来安装Jenkins，同样可以简单很多。 前置条件是安装配置好了docker环境，安装方法参考《Docker入门》。已知docker宿主机IP为192.168.56.130。"><meta property="og:type" content="article"><meta property="og:title" content="好好学Docker：使用Docker安装配置Jenkins"><meta property="og:url" content="https://www.voidking.com/dev-docker-jenkins/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="前言《CentOS7安装部署Jenkins》一文中学习了Jenkins的安装方法，如果使用Docker来安装Jenkins，同样可以简单很多。 前置条件是安装配置好了docker环境，安装方法参考《Docker入门》。已知docker宿主机IP为192.168.56.130。"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2019-12-28T20:00:00.000Z"><meta property="article:modified_time" content="2019-12-28T20:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="docker"><meta property="article:tag" content="好好学Docker"><meta property="article:tag" content="cicd"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-docker-jenkins/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>好好学Docker：使用Docker安装配置Jenkins | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">一个计算机技术爱好者与学习者</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-docker-jenkins/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="一个计算机技术爱好者与学习者"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> 好好学Docker：使用Docker安装配置Jenkins</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-12-28 20:00:00" itemprop="dateCreated datePublished" datetime="2019-12-28T20:00:00+00:00">2019-12-28</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/devops/" itemprop="url" rel="index"><span itemprop="name">devops</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="前言"><span class="post-title-index">1.</span><a href="#前言" class="headerlink" title="前言"></a> 前言</h1><p><a href="https://www.voidking.com/dev-centos7-install-jenkins/">《CentOS7安装部署Jenkins》</a>一文中学习了Jenkins的安装方法，如果使用Docker来安装Jenkins，同样可以简单很多。</p><p>前置条件是安装配置好了docker环境，安装方法参考<a href="https://www.voidking.com/dev-docker-start/">《Docker入门》</a>。已知docker宿主机IP为192.168.56.130。</p><span id="more"></span><h1 id="安装Jenkins"><span class="post-title-index">2.</span><a href="#安装Jenkins" class="headerlink" title="安装Jenkins"></a> 安装Jenkins</h1><p>1、登录dockerhub查看需要的<a target="_blank" rel="noopener" href="https://hub.docker.com/_/jenkins">jenkins-Docker Official Images</a>。<br>需要注意，官方的jenkins最新版本是2.60.3，版本太低！如果安装该版本，安装后会出现各种插件使用不了的情况。因此，这里真正需要使用的<a target="_blank" rel="noopener" href="https://hub.docker.com/r/jenkins/jenkins">jenkins命名空间下的jenkins</a>。</p><p>2、下载jenkins镜像（以2.210为例）<br><code>docker pull jenkins/jenkins:2.210</code></p><p>3、启动jenkins服务</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker</span> run --name vk-jenkins -d <span class="punctuation">\</span></span><br><span class="line"><span class="punctuation"></span>-p <span class="number">8080</span>:<span class="number">8080</span> -p <span class="number">50000</span>:<span class="number">50000</span> <span class="punctuation">\</span></span><br><span class="line"><span class="punctuation"></span>-v /opt/jenkins_home:/var/jenkins_home <span class="punctuation">\</span></span><br><span class="line"><span class="punctuation"></span>jenkins/jenkins:<span class="number">2</span>.<span class="number">210</span></span><br></pre></td></tr></table></figure><p>以上命令：</p><ul><li>命名容器为vk-jenkins，后台运行</li><li>映射宿主机8080、50000端口到容器8080、50000端口</li><li>挂载宿主机目录/opt/jenkins_home到容器目录/var/jenkins_home</li></ul><p>更多启动命令参数可以参考<a target="_blank" rel="noopener" href="https://hub.docker.com/_/jenkins?tab=description">How to use this image</a>。</p><p>启动报错：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker: Error response from daemon: driver failed programming external connectivity on endpoint vk-jenkins (d95f7502bb87d6795547061a2f13b5e2ba44648977399fcde1c05640f678554a):  (iptables failed: iptables --wait -t nat -A DOCKER -p tcp -d <span class="number">0</span><span class="regexp">/0 --dport 50000 -j DNAT --to-destination 172.17.0.2:50000 ! -i docker0: iptables: No chain/</span>target/match by that name.</span><br><span class="line"> (<span class="keyword">exit</span> status <span class="number">1</span>)).</span><br></pre></td></tr></table></figure><p>解决办法：重启docker，然后重新执行启动命令。</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">systemctl</span> restart docker</span><br><span class="line"><span class="attribute">docker</span> rm vk-jenkins</span><br><span class="line"></span><br><span class="line"><span class="attribute">docker</span> run --name vk-jenkins -d <span class="punctuation">\</span></span><br><span class="line"><span class="punctuation"></span>-p <span class="number">8080</span>:<span class="number">8080</span> -p <span class="number">50000</span>:<span class="number">50000</span> <span class="punctuation">\</span></span><br><span class="line"><span class="punctuation"></span>-v /opt/jenkins_home:/var/jenkins_home <span class="punctuation">\</span></span><br><span class="line"><span class="punctuation"></span>jenkins/jenkins:<span class="number">2</span>.<span class="number">210</span></span><br></pre></td></tr></table></figure><p>4、验证安装<br><code>docker ps</code><br>jenkins启动正常的话就可以看到vk-jenkins容器。<br>如果启动失败，可以使用<code>docker logs vk-jenkins</code>查看失败原因并进行解决。本例中确实报错了，提示目录权限问题：</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">touch: cannot touch &#x27;/var/jenkins_home/copy_reference_file.<span class="built_in">log</span>&#x27;: Permission denied</span><br><span class="line">Can <span class="keyword">not</span> <span class="built_in">write</span> <span class="keyword">to</span> /var/jenkins_home/copy_reference_file.<span class="built_in">log</span>. Wrong volume permissions?</span><br></pre></td></tr></table></figure><p>这是因为/opt/jenkins_home目录的拥有者为root用户，而容器中jenkins user的uid为1000，因此需要修改目录权限。</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">chown</span> -R <span class="number">1000</span>:<span class="number">1000</span> /opt/jenkins_home</span><br><span class="line"><span class="attribute">docker</span> start vk-jenkins</span><br></pre></td></tr></table></figure><h1 id="配置使用Jenkins"><span class="post-title-index">3.</span><a href="#配置使用Jenkins" class="headerlink" title="配置使用Jenkins"></a> 配置使用Jenkins</h1><p>1、加速插件安装（推荐）<br>参考<a target="_blank" rel="noopener" href="https://www.cnblogs.com/hellxz/p/jenkins_install_plugins_faster.html">Jenkins安装插件提速</a>，修改/opt/jenkins_home/updates/default.json。</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="operator">-</span>i &#x27;s<span class="regexp">/http:\/\/updates.jenkins-ci.org\/download/</span>https:\<span class="regexp">/\/</span>mirrors.tuna.tsinghua.edu.cn\<span class="regexp">/jenkins/</span>g&#x27; <span class="keyword">default</span>.json</span><br><span class="line">sed <span class="operator">-</span>i &#x27;s<span class="regexp">/http:\/\/www.google.com/</span>https:\<span class="regexp">/\/</span>www.baidu.com<span class="operator">/</span>g&#x27; <span class="keyword">default</span>.json</span><br></pre></td></tr></table></figure><p>修改完成重启vk-jenkins，正常进入安装流程，直观感觉就是“安装推荐的插件”这一步速度能够提高一百倍。</p><p>2、查看初始密码<br><code>cat /opt/jenkins_home/secrets/initialAdminPassword</code></p><p>3、jenkins配置<br>浏览器访问：<a target="_blank" rel="noopener" href="http://192.168.56.130:8080/">http://192.168.56.130:8080/</a><br>初始密码填入页面，开始进行jenkins配置。</p><p>4、后续<br>接下来的配置和使用参考<a href="https://www.voidking.com/dev-centos7-install-jenkins/">《CentOS7安装部署Jenkins》</a>即可。</p><p>至此，docker安装配置jenkins完成。因为第一次使用的是官方的jenkins2.60.3镜像，所以遇到了一些坑，下面一节中进行记录。</p><h1 id="jenkins2-60-3问题解决"><span class="post-title-index">4.</span><a href="#jenkins2-60-3问题解决" class="headerlink" title="jenkins2.60.3问题解决"></a> jenkins2.60.3问题解决</h1><p>1、安装推荐的插件，会卡在Getting Started。<br>。这是因为安装插件前会尝试连接 <a target="_blank" rel="noopener" href="http://www.google.com/">www.google.com</a> ，来判断网络是否连通。国内用户需要改成 <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> ，<code>vim /opt/jenkins_home/updates/default.json</code>，找到google，修改为baidu。</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 修改前</span></span><br><span class="line"><span class="string">&quot;connectionCheckUrl&quot;</span><span class="punctuation">:</span><span class="string">&quot;http://www.google.com/&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="meta"># 修改后</span></span><br><span class="line"><span class="string">&quot;connectionCheckUrl&quot;</span><span class="punctuation">:</span><span class="string">&quot;http://www.baidu.com/&quot;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p>2、重启jenkins特别慢<br><code>docker restart vk-jenkins</code><br>发现重启特别特别慢，大概要10分钟左右才能重启成功。而且，重启后connectionCheckUrl中的baidu又变成了google！！！</p><p>3、修改updatecenter<br>怀疑在jenkins启动时会根据其他地方的配置更改default.json，但是没有找到。查找资料发现了一篇<a target="_blank" rel="noopener" href="https://gist.github.com/jedi4ever/898114">update jenkins Updatecenter from CLI</a>，其中一行：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O <span class="keyword">default</span>.json http://updates.jenkins-ci.org/<span class="keyword">update</span>-center.json</span><br></pre></td></tr></table></figure><p>那么，如果修改updatecenter为中国的镜像站，是不是就会使用中国的update-center.json代替default.json？试一试，<code>vim /opt/jenkins_home/hudson.model.UpdateCenter.xml</code>，原文为：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&#x27;1.0&#x27; encoding=&#x27;UTF-8&#x27;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sites</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">site</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>default<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://updates.jenkins-ci.org/update-center.json<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">site</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sites</span>&gt;</span></span><br></pre></td></tr></table></figure><p>中国镜像站去哪里找呢？可以在<a target="_blank" rel="noopener" href="http://mirrors.jenkins-ci.org/status.html#cn">the status of Jenkins mirrors</a>网站上选择。<br>hudson.model.UpdateCenter.xml修改为：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&#x27;1.0&#x27; encoding=&#x27;UTF-8&#x27;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sites</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">site</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>default<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">site</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sites</span>&gt;</span></span><br></pre></td></tr></table></figure><p>删除/opt/jenkins_home/updates目录，再次重启vk-jenkins。<br>重启速度飞快，10秒左右，但是default.json中依然是google，因为镜像站里的update-center.json和jenkins源站里的update-center.json相同。既然jenkins启动时都会使用远端的update-center.json替代本地的default.json，那么解决该问题的方法就是给hudson.model.UpdateCenter.xml一个远端的修改后的update-center.json，或者不让jenkins获取到远端update-center.json。</p><p>4、填写假的updatecenter<br>修改hudson.model.UpdateCenter.xml为：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&#x27;1.0&#x27; encoding=&#x27;UTF-8&#x27;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sites</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">site</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>default<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">site</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sites</span>&gt;</span></span><br></pre></td></tr></table></figure><p>因为获取不到update-center.json，然后就可以跳过安装插件的步骤。</p><p>5、更换新版jenkins镜像<br>jenkins安装成功，但是在jenkins的系统配置页面，可以看到很多插件报错，而且无法修复，系统建议进行jenkins升级。<br>此时，郝同学才意识到，官方jenkins镜像不是最新版！！！需要改用jenkins命名空间下的新版jenkins镜像，但是“安装推荐的插件”这一步依然很慢，几个小时甚至更久才能安装成功。加速方法可以参考本文 配置使用Jenkins 一节中的 加速插件安装。</p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>原文链接：</strong> <a href="https://www.voidking.com/dev-docker-jenkins/" title="好好学Docker：使用Docker安装配置Jenkins">https://www.voidking.com/dev-docker-jenkins/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本文采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议，转载请注明出处！源站会即时更新知识点并修正错误，欢迎访问~</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/docker/" rel="tag"># docker</a> <a href="/tags/%E5%A5%BD%E5%A5%BD%E5%AD%A6Docker/" rel="tag"># 好好学Docker</a> <a href="/tags/cicd/" rel="tag"># cicd</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-docker-gitlab/" rel="prev" title="好好学GitLab：使用Docker安装配置GitLab"><i class="fa fa-chevron-left"></i> 好好学GitLab：使用Docker安装配置GitLab</a></div><div class="post-nav-item"> <a href="/dev-docker-nginx/" rel="next" title="好好学Nginx：使用Docker安装配置Nginx">好好学Nginx：使用Docker安装配置Nginx<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"><ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-3284447971731414" data-ad-slot="9697986181"></ins><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3284447971731414" crossorigin="anonymous"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">1. 前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85Jenkins"><span class="nav-text">2. 安装Jenkins</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8Jenkins"><span class="nav-text">3. 配置使用Jenkins</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#jenkins2-60-3%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3"><span class="nav-text">4. jenkins2.60.3问题解决</span></a></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">一个计算机技术爱好者与学习者</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">776</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">33</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">269</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2026</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '5a238b8c32b1e4dd2156',
      clientSecret: 'bfb5d518626f6fdc7da0351d1e0cd37ab75c6361',
      repo: 'gitalk-comments',
      owner: 'voidking',
      admin: ['voidking'],
      id: 'd515c03852d8904b747c35644cd53a33',
      title: '好好学Docker：使用Docker安装配置Jenkins',
      body: '欢迎留言，互相交流学习~',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></body></html>