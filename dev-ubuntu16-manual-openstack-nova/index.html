<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.1"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="目标紧接着《Ubuntu16手动安装OpenStack——glance篇》，本文我们来安装nova，主要参考Compute service、Install and configure controller node for Ubuntu、Install and configure a compute node for Ubuntu。"><meta property="og:type" content="article"><meta property="og:title" content="Ubuntu16手动安装OpenStack——nova篇"><meta property="og:url" content="https://www.voidking.com/dev-ubuntu16-manual-openstack-nova/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="目标紧接着《Ubuntu16手动安装OpenStack——glance篇》，本文我们来安装nova，主要参考Compute service、Install and configure controller node for Ubuntu、Install and configure a compute node for Ubuntu。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://cdn.voidking.com//imgs/ubuntu16-manual-openstack-nova/cell.jpg?imageView2/0/w/700"><meta property="og:image" content="http://cdn.voidking.com//imgs/ubuntu16-manual-openstack-nova/service0.jpg?imageView2/0/w/700"><meta property="og:image" content="http://cdn.voidking.com//imgs/ubuntu16-manual-openstack-nova/service1.jpg?imageView2/0/w/700"><meta property="og:image" content="http://cdn.voidking.com//imgs/ubuntu16-manual-openstack-nova/node.jpg?imageView2/0/w/700"><meta property="og:image" content="http://cdn.voidking.com//imgs/ubuntu16-manual-openstack-nova/service.jpg?imageView2/0/w/700"><meta property="og:image" content="http://cdn.voidking.com//imgs/ubuntu16-manual-openstack-nova/catalog.jpg?imageView2/0/w/700"><meta property="og:image" content="http://cdn.voidking.com//imgs/ubuntu16-manual-openstack-nova/mirror.jpg?imageView2/0/w/700"><meta property="og:image" content="http://cdn.voidking.com//imgs/ubuntu16-manual-openstack-nova/nova-status.jpg?imageView2/0/w/700"><meta property="og:image" content="http://cdn.voidking.com//imgs/ubuntu16-manual-openstack-nova/nodes.jpg?imageView2/0/w/700"><meta property="article:published_time" content="2018-07-03T00:30:00.000Z"><meta property="article:modified_time" content="2018-07-03T00:30:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="linux"><meta property="article:tag" content="ubuntu"><meta property="article:tag" content="openstack"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://cdn.voidking.com//imgs/ubuntu16-manual-openstack-nova/cell.jpg?imageView2/0/w/700"><link rel="canonical" href="https://www.voidking.com/dev-ubuntu16-manual-openstack-nova/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>Ubuntu16手动安装OpenStack——nova篇 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">好好学习，天天向上！</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-ubuntu16-manual-openstack-nova/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="学而不思则罔，思而不学则殆！"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> Ubuntu16手动安装OpenStack——nova篇</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-07-03 08:30:00" itemprop="dateCreated datePublished" datetime="2018-07-03T08:30:00+08:00">2018-07-03</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/" itemprop="url" rel="index"><span itemprop="name">专业</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/%E8%BF%90%E7%BB%B4/" itemprop="url" rel="index"><span itemprop="name">运维</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E4%B8%93%E4%B8%9A/%E8%BF%90%E7%BB%B4/openstack/" itemprop="url" rel="index"><span itemprop="name">openstack</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h1><p>紧接着<a href="https://www.voidking.com/dev-ubuntu16-manual-openstack-glance/">《Ubuntu16手动安装OpenStack——glance篇》</a>，本文我们来安装nova，主要参考<a href="https://docs.openstack.org/nova/queens/install/" target="_blank" rel="noopener">Compute service</a>、<a href="https://docs.openstack.org/nova/queens/install/controller-install-ubuntu.html" target="_blank" rel="noopener">Install and configure controller node for Ubuntu</a>、<a href="https://docs.openstack.org/nova/queens/install/compute-install-ubuntu.html" target="_blank" rel="noopener">Install and configure a compute node for Ubuntu</a>。</p><a id="more"></a><h1 id="nova简介"><a href="#nova简介" class="headerlink" title="nova简介"></a>nova简介</h1><p>使用OpenStack Compute来托管和管理云计算系统。OpenStack Compute是基础架构即服务（IaaS）系统的主要部分。主要模块用Python实现。</p><p>OpenStack Compute与OpenStack Identity交互以进行身份​​验证；OpenStack 镜像服务用于磁盘和镜像管理；OpenStack Dashboard用于用户界面和管理界面。镜像访问受项目和用户的限制；配额受每个项目限制（例如，实例数）。OpenStack Compute可以在标准硬件上水平扩展，下载镜像，然后启动实例。</p><p>OpenStack Compute包含以下组件：</p><p><strong>nova-api service</strong><br>接受并响应终端用户compute API调用。该服务支持OpenStack Compute API。它强制执行某些策略并启动大多数活动，例如运行实例。</p><p><strong>nova-api-metadata service</strong><br>接受来自实例的元数据请求。在nova-network的多主机模式下运行时，通常会使用nova-api-metadata服务。</p><p><strong>nova-compute service</strong><br>通过虚拟机管理程序API，创建和终止虚拟机实例。例如：</p><ul><li>XenAPI for XenServer/XCP</li><li>libvirt for KVM or QEMU</li><li>VMwareAPI for VMware</li></ul><p>处理相当复杂。基本上，nova-compute守护程序接受来自队列的操作，并执行一系列系统命令，例如启动KVM实例并更新其在数据库中的状态。</p><p><strong>nova-placement-api service</strong><br>跟踪每个provider的库存和使用情况。</p><p><strong>nova-scheduler service</strong><br>从队列中获取虚拟机实例请求，并确定它运行的计算服务器主机。</p><p><strong>nova-conductor module</strong><br>负责nova-compute服务和数据库之间的交互。它消除了nova-compute服务对云数据库的直接访问。nova-conductor module可以水平伸缩。不要将其部署在运行nova-compute服务的节点上。</p><p><strong>nova-consoleauth daemon</strong><br>在控制台代理为用户授权tokens，参见nova-novncproxy和nova-xvpvncproxy。必须运行此服务才能使控制台代理生效。可以针对群集配置中的单个nova-consoleauth服务运行任一类型的代理。</p><p><strong>nova-novncproxy daemon</strong><br>提供正在运行的实例的代理，该代理通过VNC连接访问。支持基于浏览器的novnc客户端。</p><p><strong>nova-spicehtml5proxy daemon</strong><br>提供正在运行的实例的代理，该代理通过SPICE连接访问。支持基于浏览器的HTML5客户端。</p><p><strong>nova-xvpvncproxy daemon</strong><br>提供正在运行的实例的代理，该代理通过VNC连接访问。支持OpenStack特定的Java客户端。</p><p><strong>The queue</strong><br>用于在守护进程之间传递消息的中央集线器。通常用RabbitMQ实现，也可以用另一个AMQP消息队列实现，比如ZeroMQ。</p><p><strong>SQL database</strong><br>存储云基础架构的大多数构建时和运行时状态，包括：</p><ul><li>Available instance types</li><li>Instances in use</li><li>Available networks</li><li>Projects</li></ul><p>从理论上讲，OpenStack Compute可以支持SQLAlchemy支持的任何数据库。常见的数据库是用于测试和开发工作的SQLite3，MySQL，MariaDB和PostgreSQL。</p><h1 id="控制节点"><a href="#控制节点" class="headerlink" title="控制节点"></a>控制节点</h1><h2 id="root用户"><a href="#root用户" class="headerlink" title="root用户"></a>root用户</h2><p>为了避免权限问题，建议切换到root用户进行操作（否则要加很多sudo）。<br><code>sudo -i</code></p><h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><p>1、登录数据库<br><code>mysql -uroot -p</code>，密码为openstack。</p><p>2、创建nova_api，nova，nova_placement和nova_cell0数据库</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> nova_api;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> nova;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> nova_placement; </span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> nova_cell0;</span><br></pre></td></tr></table></figure><p>3、授权</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> nova_api.* <span class="keyword">TO</span> <span class="string">'nova'</span>@<span class="string">'localhost'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'openstack'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> nova_api.* <span class="keyword">TO</span> <span class="string">'nova'</span>@<span class="string">'%'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'openstack'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> nova.* <span class="keyword">TO</span> <span class="string">'nova'</span>@<span class="string">'localhost'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'openstack'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> nova.* <span class="keyword">TO</span> <span class="string">'nova'</span>@<span class="string">'%'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'openstack'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> nova_placement.* <span class="keyword">TO</span> <span class="string">'nova'</span>@<span class="string">'localhost'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'openstack'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> nova_placement.* <span class="keyword">TO</span> <span class="string">'nova'</span>@<span class="string">'%'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'openstack'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> nova_cell0.* <span class="keyword">TO</span> <span class="string">'nova'</span>@<span class="string">'localhost'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'openstack'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> nova_cell0.* <span class="keyword">TO</span> <span class="string">'nova'</span>@<span class="string">'%'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'openstack'</span>;</span><br></pre></td></tr></table></figure><p>4、退出数据库<br><code>exit;</code></p><h2 id="服务证书和端点"><a href="#服务证书和端点" class="headerlink" title="服务证书和端点"></a>服务证书和端点</h2><p>1、使admin环境生效<br><code>. admin-openrc</code></p><p>2、创建nova用户<br><code>openstack user create --domain default --password-prompt nova</code></p><p>根据提示设置密码为openstack。</p><p>3、添加admin角色给nova用户<br><code>openstack role add --project service --user nova admin</code></p><p>4、创建nova服务实体<br><code>openstack service create --name nova --description &quot;OpenStack Compute&quot; compute</code></p><p>5、创建计算服务API endpoints</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">openstack endpoint create --region RegionOne compute <span class="keyword">public</span> <span class="string">http:</span><span class="comment">//controller:8774/v2.1</span></span><br><span class="line"></span><br><span class="line">openstack endpoint create --region RegionOne compute internal <span class="string">http:</span><span class="comment">//controller:8774/v2.1</span></span><br><span class="line"></span><br><span class="line">openstack endpoint create --region RegionOne compute admin <span class="string">http:</span><span class="comment">//controller:8774/v2.1</span></span><br></pre></td></tr></table></figure><h2 id="服务证书和端点2"><a href="#服务证书和端点2" class="headerlink" title="服务证书和端点2"></a>服务证书和端点2</h2><p>1、创建Placement service user<br><code>openstack user create --domain default --password-prompt placement</code></p><p>按照提示设置密码为openstack。</p><p>2、添加Placement user到service project，并且赋予admin角色<br><code>openstack role add --project service --user placement admin</code></p><p>3、创建placement服务实体<br><code>openstack service create --name placement --description &quot;Placement API&quot; placement</code></p><p>4、创建Placement API服务端点</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">openstack endpoint create --region RegionOne placement <span class="keyword">public</span> <span class="string">http:</span><span class="comment">//controller:8778</span></span><br><span class="line"></span><br><span class="line">openstack endpoint create --region RegionOne placement internal <span class="string">http:</span><span class="comment">//controller:8778</span></span><br><span class="line"></span><br><span class="line">openstack endpoint create --region RegionOne placement admin <span class="string">http:</span><span class="comment">//controller:8778</span></span><br></pre></td></tr></table></figure><h2 id="安装配置组件"><a href="#安装配置组件" class="headerlink" title="安装配置组件"></a>安装配置组件</h2><p>1、安装组件<br><code>apt-get -y install nova-api nova-placement-api nova-conductor nova-consoleauth nova-scheduler nova-novncproxy python-novaclient</code></p><p>2、备份nova.conf<br><code>mv /etc/nova/nova.conf /etc/nova/nova.conf.bak</code></p><p>3、<code>vim /etc/nova/nova.conf</code>，新建nova.conf内容为：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[DEFAULT]</span></span><br><span class="line"><span class="comment"># define own IP</span></span><br><span class="line"><span class="attr">my_ip</span> = <span class="number">192.168</span>.<span class="number">56.110</span></span><br><span class="line"><span class="attr">state_path</span> = /var/lib/nova</span><br><span class="line"><span class="attr">enabled_apis</span> = osapi_compute,metadata</span><br><span class="line"><span class="attr">log_dir</span> = /var/log/nova</span><br><span class="line"><span class="comment"># RabbitMQ connection info</span></span><br><span class="line"><span class="attr">transport_url</span> = rabbit://openstack:openstack@controller</span><br><span class="line"></span><br><span class="line"><span class="section">[api]</span></span><br><span class="line"><span class="attr">auth_strategy</span> = keystone</span><br><span class="line"></span><br><span class="line"><span class="comment"># Glance connection info</span></span><br><span class="line"><span class="section">[glance]</span></span><br><span class="line"><span class="attr">api_servers</span> = http://controller:<span class="number">9292</span></span><br><span class="line"></span><br><span class="line"><span class="section">[oslo_concurrency]</span></span><br><span class="line"><span class="attr">lock_path</span> = <span class="variable">$state_path</span>/tmp</span><br><span class="line"></span><br><span class="line"><span class="comment"># MariaDB connection info</span></span><br><span class="line"><span class="section">[api_database]</span></span><br><span class="line"><span class="attr">connection</span> = mysql+pymysql://nova:openstack@controller/nova_api</span><br><span class="line"></span><br><span class="line"><span class="section">[database]</span></span><br><span class="line"><span class="attr">connection</span> = mysql+pymysql://nova:openstack@controller/nova</span><br><span class="line"></span><br><span class="line"><span class="comment"># Keystone auth info</span></span><br><span class="line"><span class="section">[keystone_authtoken]</span></span><br><span class="line"><span class="attr">www_authenticate_uri</span> = http://controller:<span class="number">5000</span></span><br><span class="line"><span class="attr">auth_url</span> = http://controller:<span class="number">5000</span></span><br><span class="line"><span class="attr">memcached_servers</span> = controller:<span class="number">11211</span></span><br><span class="line"><span class="attr">auth_type</span> = password</span><br><span class="line"><span class="attr">project_domain_name</span> = default</span><br><span class="line"><span class="attr">user_domain_name</span> = default</span><br><span class="line"><span class="attr">project_name</span> = service</span><br><span class="line"><span class="attr">username</span> = nova</span><br><span class="line"><span class="attr">password</span> = openstack</span><br><span class="line"></span><br><span class="line"><span class="section">[placement]</span></span><br><span class="line"><span class="attr">auth_url</span> = http://controller:<span class="number">5000</span></span><br><span class="line"><span class="attr">os_region_name</span> = RegionOne</span><br><span class="line"><span class="attr">auth_type</span> = password</span><br><span class="line"><span class="attr">project_domain_name</span> = default</span><br><span class="line"><span class="attr">user_domain_name</span> = default</span><br><span class="line"><span class="attr">project_name</span> = service</span><br><span class="line"><span class="attr">username</span> = placement</span><br><span class="line"><span class="attr">password</span> = openstack</span><br><span class="line"></span><br><span class="line"><span class="section">[placement_database]</span></span><br><span class="line"><span class="attr">connection</span> = mysql+pymysql://nova:openstack@controller/nova_placement</span><br><span class="line"></span><br><span class="line"><span class="section">[wsgi]</span></span><br><span class="line"><span class="attr">api_paste_config</span> = /etc/nova/api-paste.ini</span><br></pre></td></tr></table></figure><p>4、更改权限<br><code>chmod 640 /etc/nova/nova.conf</code></p><p><code>chgrp nova /etc/nova/nova.conf</code></p><p>5、生成数据库表结构</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">su</span> -s /<span class="keyword">bin/bash </span>nova -c <span class="string">"nova-manage api_db sync"</span></span><br><span class="line"><span class="symbol">su</span> -s /<span class="keyword">bin/bash </span>nova -c <span class="string">"nova-manage cell_v2 map_cell0"</span></span><br><span class="line"><span class="symbol">su</span> -s /<span class="keyword">bin/bash </span>nova -c <span class="string">"nova-manage db sync"</span></span><br><span class="line"><span class="symbol">su</span> -s /<span class="keyword">bin/bash </span>nova -c <span class="string">"nova-manage cell_v2 create_cell --name cell1"</span></span><br></pre></td></tr></table></figure><p>完成后查看日志：<code>tail /var/log/nova/nova-manage.log</code><br>不放心的话，就登录数据库查看数据。</p><p>6、验证一下cell0和cell1是否被正确注册<br><code>nova-manage cell_v2 list_cells</code><br><img src="http://cdn.voidking.com//imgs/ubuntu16-manual-openstack-nova/cell.jpg?imageView2/0/w/700" alt=""></p><p>7、重启服务，完成安装</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span><span class="built_in"> service </span><span class="keyword">in</span> api conductor<span class="built_in"> scheduler </span>consoleauth novncproxy; <span class="keyword">do</span></span><br><span class="line">systemctl restart nova-<span class="variable">$service</span></span><br><span class="line">done</span><br></pre></td></tr></table></figure><p>8、查看计算服务列表<br><code>openstack compute service list</code><br><img src="http://cdn.voidking.com//imgs/ubuntu16-manual-openstack-nova/service0.jpg?imageView2/0/w/700" alt=""></p><h1 id="计算节点"><a href="#计算节点" class="headerlink" title="计算节点"></a>计算节点</h1><p>本节介绍如何在计算节点上安装和配置Compute服务，该服务支持多个虚拟机管理程序来部署实例或虚拟机（VM）。为简单起见，此配置使用Quick EMUlator（QEMU）虚拟机管理程序，和支持虚拟机硬件加速的KVM扩展。可以按照教程进行小改，以便水平扩展计算节点。</p><p>安装方法主要参考<a href="https://www.server-world.info/en/note?os=Ubuntu_16.04&p=openstack_queens&f=16" target="_blank" rel="noopener">OpenStack Queens : Add Compute Nodes</a>。</p><h2 id="root用户-1"><a href="#root用户-1" class="headerlink" title="root用户"></a>root用户</h2><p>为了避免权限问题，建议切换到root用户进行操作（否则要加很多sudo）。<br><code>sudo -i</code></p><h2 id="安装配置"><a href="#安装配置" class="headerlink" title="安装配置"></a>安装配置</h2><p>1、安装组件<br><code>apt-get -y install nova-compute-kvm</code></p><p>2、备份nova.conf<br><code>mv /etc/nova/nova.conf /etc/nova/nova.conf.bak</code></p><p>3、<code>vim /etc/nova/nova.conf</code>，新建nova.conf内容为：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[DEFAULT]</span></span><br><span class="line"><span class="comment"># define own IP address</span></span><br><span class="line"><span class="attr">my_ip</span> = <span class="number">192.168</span>.<span class="number">56.111</span></span><br><span class="line"><span class="attr">state_path</span> = /var/lib/nova</span><br><span class="line"><span class="attr">enabled_apis</span> = osapi_compute,metadata</span><br><span class="line"><span class="attr">log_dir</span> = /var/log/nova</span><br><span class="line"><span class="comment"># RabbitMQ connection info</span></span><br><span class="line"><span class="attr">transport_url</span> = rabbit://openstack:openstack@controller</span><br><span class="line"></span><br><span class="line"><span class="section">[api]</span></span><br><span class="line"><span class="attr">auth_strategy</span> = keystone</span><br><span class="line"></span><br><span class="line"><span class="comment"># enable VNC</span></span><br><span class="line"><span class="section">[vnc]</span></span><br><span class="line"><span class="attr">enabled</span> = <span class="literal">True</span></span><br><span class="line"><span class="attr">server_listen</span> = <span class="number">0.0</span>.<span class="number">0.0</span></span><br><span class="line"><span class="attr">server_proxyclient_address</span> = <span class="variable">$my_ip</span></span><br><span class="line"><span class="attr">novncproxy_base_url</span> = http://controller:<span class="number">6080</span>/vnc_auto.html</span><br><span class="line"></span><br><span class="line"><span class="comment"># Glance connection info</span></span><br><span class="line"><span class="section">[glance]</span></span><br><span class="line"><span class="attr">api_servers</span> = http://controller:<span class="number">9292</span></span><br><span class="line"></span><br><span class="line"><span class="section">[oslo_concurrency]</span></span><br><span class="line"><span class="attr">lock_path</span> = <span class="variable">$state_path</span>/tmp</span><br><span class="line"></span><br><span class="line"><span class="comment"># Keystone auth info</span></span><br><span class="line"><span class="section">[keystone_authtoken]</span></span><br><span class="line"><span class="attr">www_authenticate_uri</span> = http://controller:<span class="number">5000</span></span><br><span class="line"><span class="attr">auth_url</span> = http://controller:<span class="number">5000</span></span><br><span class="line"><span class="attr">memcached_servers</span> = controller:<span class="number">11211</span></span><br><span class="line"><span class="attr">auth_type</span> = password</span><br><span class="line"><span class="attr">project_domain_name</span> = default</span><br><span class="line"><span class="attr">user_domain_name</span> = default</span><br><span class="line"><span class="attr">project_name</span> = service</span><br><span class="line"><span class="attr">username</span> = nova</span><br><span class="line"><span class="attr">password</span> = openstack</span><br><span class="line"></span><br><span class="line"><span class="section">[placement]</span></span><br><span class="line"><span class="attr">auth_url</span> = http://controller:<span class="number">5000</span></span><br><span class="line"><span class="attr">os_region_name</span> = RegionOne</span><br><span class="line"><span class="attr">auth_type</span> = password</span><br><span class="line"><span class="attr">project_domain_name</span> = default</span><br><span class="line"><span class="attr">user_domain_name</span> = default</span><br><span class="line"><span class="attr">project_name</span> = service</span><br><span class="line"><span class="attr">username</span> = placement</span><br><span class="line"><span class="attr">password</span> = openstack</span><br><span class="line"></span><br><span class="line"><span class="section">[wsgi]</span></span><br><span class="line"><span class="attr">api_paste_config</span> = /etc/nova/api-paste.ini</span><br></pre></td></tr></table></figure><p>4、设置权限<br><code>chmod 640 /etc/nova/nova.conf</code></p><p><code>chgrp nova /etc/nova/nova.conf</code></p><p>5、硬件加速（可选）<br><code>egrep -c &#39;(vmx|svm)&#39; /proc/cpuinfo</code></p><p>如果看到大于等于1的数字，说明主机支持硬件加速，不需要额外的配置。</p><p>如果此命令返回零值，则计算节点不支持硬件加速，您必须将libvirt配置为使用QEMU而不是KVM。</p><p>编辑/etc/nova/nova-compute.conf文件，libvirt部分修改为：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[libvirt]</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="attr">virt_type</span> = qemu</span><br></pre></td></tr></table></figure><p>6、重启nova-compute服务<br><code>systemctl restart nova-compute</code></p><h1 id="添加计算节点到数据库"><a href="#添加计算节点到数据库" class="headerlink" title="添加计算节点到数据库"></a>添加计算节点到数据库</h1><p>以下操作在controller节点操作。</p><p>1、使admin环境生效<br><code>. admin-openrc</code></p><p>2、查看计算服务列表<br><code>openstack compute service list</code><br><img src="http://cdn.voidking.com//imgs/ubuntu16-manual-openstack-nova/service1.jpg?imageView2/0/w/700" alt=""></p><p>发现，此时已经多了nova-compute服务。</p><p>3、查看计算节点<br><code>openstack compute service list --service nova-compute</code></p><p>4、如果没有看到计算节点，那么需要查找计算节点，并且进行注册<br><code>su -s /bin/bash nova -c &quot;nova-manage cell_v2 discover_hosts&quot;</code><br><img src="http://cdn.voidking.com//imgs/ubuntu16-manual-openstack-nova/node.jpg?imageView2/0/w/700" alt=""></p><p>添加新的compute节点时，必须在控制器节点上运行<code>nova-manage cell_v2 discover_hosts</code>以注册这些新计算节点。或者，可以在/etc/nova/nova.conf中设置适当的间隔来自动发现和注册节点：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[scheduler]</span></span><br><span class="line"><span class="attr">discover_hosts_in_cells_interval</span> = <span class="number">300</span></span><br></pre></td></tr></table></figure><h1 id="验证操作"><a href="#验证操作" class="headerlink" title="验证操作"></a>验证操作</h1><p>以下操作在controller节点操作。</p><p>1、使admin环境生效<br><code>. admin-openrc</code></p><p>2、列出服务组件，以验证每个进程的成功启动和注册<br><code>openstack compute service list</code><br><img src="http://cdn.voidking.com//imgs/ubuntu16-manual-openstack-nova/service.jpg?imageView2/0/w/700" alt=""></p><p>成功的话可以看到四个服务：nova-scheduler、nova-consoleauth、nova-conductor和nova-compute。</p><p>3、列出Identity服务中的API端点，以验证与Identity服务的连接<br><code>openstack catalog list</code></p><p><img src="http://cdn.voidking.com//imgs/ubuntu16-manual-openstack-nova/catalog.jpg?imageView2/0/w/700" alt=""></p><p>4、列出镜像服务中的镜像，以验证与镜像服务的连接<br><code>openstack image list</code></p><p><img src="http://cdn.voidking.com//imgs/ubuntu16-manual-openstack-nova/mirror.jpg?imageView2/0/w/700" alt=""></p><p>5、检查cells and placement API是否工作正常<br><code>nova-status upgrade check</code><br><img src="http://cdn.voidking.com//imgs/ubuntu16-manual-openstack-nova/nova-status.jpg?imageView2/0/w/700" alt=""></p><h1 id="控制节点安装计算服务"><a href="#控制节点安装计算服务" class="headerlink" title="控制节点安装计算服务"></a>控制节点安装计算服务</h1><p>1、安装组件<br><code>apt -y install nova-compute-kvm</code></p><p>2、<code>vim /etc/nova/nova.conf</code>，添加vnc配置：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># enable VNC</span></span><br><span class="line"><span class="section">[vnc]</span></span><br><span class="line"><span class="attr">enabled</span> = <span class="literal">True</span></span><br><span class="line"><span class="attr">server_listen</span> = <span class="number">0.0</span>.<span class="number">0.0</span></span><br><span class="line"><span class="attr">server_proxyclient_address</span> = <span class="variable">$my_ip</span></span><br><span class="line"><span class="attr">novncproxy_base_url</span> = http://controller:<span class="number">6080</span>/vnc_auto.html</span><br></pre></td></tr></table></figure><p>3、硬件加速（可选）<br><code>egrep -c &#39;(vmx|svm)&#39; /proc/cpuinfo</code></p><p>如果看到大于等于1的数字，说明主机支持硬件加速，不需要额外的配置。</p><p>如果此命令返回零值，则计算节点不支持硬件加速，您必须将libvirt配置为使用QEMU而不是KVM。</p><p>编辑/etc/nova/nova-compute.conf文件，libvirt部分修改为：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[libvirt]</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="attr">virt_type</span> = qemu</span><br></pre></td></tr></table></figure><p>4、重启nova-compute服务<br><code>systemctl restart nova-compute</code></p><p>5、添加到数据库<br><code>su -s /bin/bash nova -c &quot;nova-manage cell_v2 discover_hosts&quot;</code></p><p>6、查看计算节点<br><code>openstack compute service list --service nova-compute</code><br><img src="http://cdn.voidking.com//imgs/ubuntu16-manual-openstack-nova/nodes.jpg?imageView2/0/w/700" alt=""></p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.voidking.com/dev-ubuntu16-manual-openstack-nova/" title="Ubuntu16手动安装OpenStack——nova篇">https://www.voidking.com/dev-ubuntu16-manual-openstack-nova/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！源站会及时更新知识点及修正错误，阅读体验也更好。欢迎分享，欢迎收藏~</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/linux/" rel="tag"># linux</a> <a href="/tags/ubuntu/" rel="tag"># ubuntu</a> <a href="/tags/openstack/" rel="tag"># openstack</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-ubuntu16-manual-openstack-glance/" rel="prev" title="Ubuntu16手动安装OpenStack——glance篇"><i class="fa fa-chevron-left"></i> Ubuntu16手动安装OpenStack——glance篇</a></div><div class="post-nav-item"> <a href="/dev-ubuntu16-manual-openstack-neutron/" rel="next" title="Ubuntu16手动安装OpenStack——neutron篇">Ubuntu16手动安装OpenStack——neutron篇<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zODU3Mi8xNTEwMA=="></div></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#目标"><span class="nav-number">1.</span> <span class="nav-text">目标</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#nova简介"><span class="nav-number">2.</span> <span class="nav-text">nova简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#控制节点"><span class="nav-number">3.</span> <span class="nav-text">控制节点</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#root用户"><span class="nav-number">3.1.</span> <span class="nav-text">root用户</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据库"><span class="nav-number">3.2.</span> <span class="nav-text">数据库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#服务证书和端点"><span class="nav-number">3.3.</span> <span class="nav-text">服务证书和端点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#服务证书和端点2"><span class="nav-number">3.4.</span> <span class="nav-text">服务证书和端点2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装配置组件"><span class="nav-number">3.5.</span> <span class="nav-text">安装配置组件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#计算节点"><span class="nav-number">4.</span> <span class="nav-text">计算节点</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#root用户-1"><span class="nav-number">4.1.</span> <span class="nav-text">root用户</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装配置"><span class="nav-number">4.2.</span> <span class="nav-text">安装配置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#添加计算节点到数据库"><span class="nav-number">5.</span> <span class="nav-text">添加计算节点到数据库</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#验证操作"><span class="nav-number">6.</span> <span class="nav-text">验证操作</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#控制节点安装计算服务"><span class="nav-number">7.</span> <span class="nav-text">控制节点安装计算服务</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">学而不思则罔，思而不学则殆！</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">620</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">50</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">198</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2021</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://www.beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer><div id="needsharebutton-float"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css"><script src="/lib/needsharebutton/needsharebutton.js"></script><script>pbOptions={iconStyle:"box",boxForm:"horizontal",position:"bottomCenter",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-postbottom",pbOptions),flOptions={iconStyle:"box",boxForm:"horizontal",position:"topRight",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-float",flOptions)</script><script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  // window.livereOptions = {
  //   refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  // };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script></body></html>