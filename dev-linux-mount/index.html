<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//qiniu-cdn.voidking.com/doc/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="mount&#x2F;umount简介 mount - mount a filesystemumount - unmount file systemsAll files accessible in a Unix system are arranged in one big tree, the file hierarchy, rooted at &#x2F;.  These files can be spread ou"><meta property="og:type" content="article"><meta property="og:title" content="好好学Linux：Linux挂载文件系统"><meta property="og:url" content="https://www.voidking.com/dev-linux-mount/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="mount&#x2F;umount简介 mount - mount a filesystemumount - unmount file systemsAll files accessible in a Unix system are arranged in one big tree, the file hierarchy, rooted at &#x2F;.  These files can be spread ou"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2013-11-22T14:22:46.000Z"><meta property="article:modified_time" content="2024-06-29T08:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="linux"><meta property="article:tag" content="好好学Linux"><meta property="article:tag" content="问题排查"><meta property="article:tag" content="shell"><meta property="article:tag" content="nfs"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-linux-mount/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>好好学Linux：Linux挂载文件系统 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">一个计算机技术爱好者与学习者</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-linux-mount/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="一个计算机技术爱好者与学习者"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> 好好学Linux：Linux挂载文件系统</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2013-11-22 14:22:46" itemprop="dateCreated datePublished" datetime="2013-11-22T14:22:46+00:00">2013-11-22</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2024-06-29 08:00:00" itemprop="dateModified" datetime="2024-06-29T08:00:00+00:00">2024-06-29</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/storage/" itemprop="url" rel="index"><span itemprop="name">storage</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/devops/" itemprop="url" rel="index"><span itemprop="name">devops</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/troubleshooting/" itemprop="url" rel="index"><span itemprop="name">troubleshooting</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="mount-umount简介"><span class="post-title-index">1.</span><a href="#mount-umount简介" class="headerlink" title="mount/umount简介"></a> mount/umount简介</h1><blockquote><p>mount - mount a filesystem<br>umount - unmount file systems<br>All files accessible in a Unix system are arranged in one big tree, the file hierarchy, rooted at /. These files can be spread out over several devices. The mount command serves to attach the filesystem found on some device to the big file tree. Conversely, the umount command will detach it again.</p></blockquote><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="http://c.biancheng.net/view/885.html">Linux mount命令详解：挂载Linux系统外的文件</a></li><li><a target="_blank" rel="noopener" href="https://wangchujiang.com/linux-command/c/mount.html">mount</a></li></ul><span id="more"></span><h1 id="磁盘分区并格式化"><span class="post-title-index">2.</span><a href="#磁盘分区并格式化" class="headerlink" title="磁盘分区并格式化"></a> 磁盘分区并格式化</h1><h2 id="使用fdisk磁盘分区"><span class="post-title-index">2.1.</span><a href="#使用fdisk磁盘分区" class="headerlink" title="使用fdisk磁盘分区"></a> 使用fdisk磁盘分区</h2><p>1、查看磁盘</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fdisk -l</span><br></pre></td></tr></table></figure><p>2、磁盘分区</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fdisk /dev/sdb</span><br></pre></td></tr></table></figure><p>按照提示，依次输入p，n，回车（Partition number），回车（First sector），回车（Last sector），w。<br>这种方法分区后，整块磁盘划分成了一个分区 <code>/dev/sdb1</code></p><h2 id="使用parted磁盘分区"><span class="post-title-index">2.2.</span><a href="#使用parted磁盘分区" class="headerlink" title="使用parted磁盘分区"></a> 使用parted磁盘分区</h2><p>fdisk只支持MBR分区，MBR分区表最大支撑2T的磁盘，所以无法划分大于2T的分区。<br>而parted工具可以划分单个分区大于2T的GPT格式的分区，也可以划分普通的MBR分区。<br>参考文档<a target="_blank" rel="noopener" href="https://blog.csdn.net/zfw_666666/article/details/126744930">Linux parted 分区命令详解</a></p><p>1、查看磁盘</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fdisk -l</span><br></pre></td></tr></table></figure><p>2、磁盘分区（可选）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parted /dev/sdb</span><br></pre></td></tr></table></figure><p>按照提示，依次输入mklabel，mkpart，print，quit。</p><p>交互示例：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">GNU Parted 3.3</span><br><span class="line">使用 /dev/sdb</span><br><span class="line">欢迎使用 GNU Parted！输入 &#x27;help&#x27; 来查看命令列表。</span><br><span class="line">(parted) help</span><br><span class="line">  align-check 类型 N                         检查分区 N 是否为 (最小=min|最佳=opt) 对齐类型</span><br><span class="line">  help [COMMAND]                           打印通用求助信息，或 COMMAND 的帮助</span><br><span class="line">  mklabel,mktable LABEL-TYPE               创建新的磁盘卷标 (分区表)</span><br><span class="line">  mkpart 分区类型 [文件系统类型] 起始点 结束点 创建一个分区</span><br><span class="line">  name 编号 名称                           将指定“编号”的分区命名为“名称”</span><br><span class="line">  print [devices|free|list,all|数字]        显示分区表、可用设备、剩余空间、所有分区或特殊分区</span><br><span class="line">  quit                                     退出程序</span><br><span class="line">  rescue 起始点 终止点                      挽救临近“起始点”、“终止点”的遗失的分区</span><br><span class="line">  resizepart NUMBER END                    改变 NUMBER 的大小</span><br><span class="line">  rm NUMBER                                删除编号为 NUMBER 的分区</span><br><span class="line">  select 设备                              选择要编辑的设备</span><br><span class="line">  disk_set 旗标 状态                       变更已选设备上的旗标</span><br><span class="line">  disk_toggle [旗标]                       切换已选设备上的旗标状态</span><br><span class="line">  set 编号 旗标 状态                       改变指定“编号”分区的旗标</span><br><span class="line">  toggle [编号 [旗标]]                     切换“编号”分区上的“旗标”状态</span><br><span class="line">  unit 单位                                设置缺省的“单位”</span><br><span class="line">  version                                  显示目前 GNU Parted 的版本与版权信息</span><br><span class="line">(parted) mklabel</span><br><span class="line">新的磁盘卷标类型？ gpt</span><br><span class="line">(parted) mkpart</span><br><span class="line">分区名称？  []? sdb1</span><br><span class="line">文件系统类型？  [ext2]? ext4</span><br><span class="line">起始点？ 0%</span><br><span class="line">结束点？ 100%</span><br><span class="line">警告: 所产生的分区没有适当为获得最佳性能而对齐：34s % 2048s != 0s</span><br><span class="line">忽略/Ignore/放弃/Cancel? Ignore</span><br><span class="line">(parted) print</span><br><span class="line">型号：AVAGO INSPUR (scsi)</span><br><span class="line">磁盘 /dev/sdb: 20.0TB</span><br><span class="line">扇区大小 (逻辑/物理)：512B/512B</span><br><span class="line">分区表：gpt</span><br><span class="line">磁盘标志：</span><br><span class="line"></span><br><span class="line">编号  起始点  结束点  大小    文件系统  名称  标志</span><br><span class="line"> 1    17.4kB  20.0TB  20.0TB  ext4      sdb1</span><br><span class="line"></span><br><span class="line">(parted) quit</span><br></pre></td></tr></table></figure><p>这种方法分区后，整块磁盘划分成了一个分区 <code>/dev/sdb1</code></p><h2 id="磁盘重新分区"><span class="post-title-index">2.3.</span><a href="#磁盘重新分区" class="headerlink" title="磁盘重新分区"></a> 磁盘重新分区</h2><p><code>fdisk -l</code>如果出现提示：分区 1 未起始于物理扇区边界。</p><p>或者<code>mkfs.ext4 /dev/sdb1</code>出现提示：/dev/sdb1 未对齐，偏移了 244736 个字节。这可能导致性能明显下降，建议重新进行分区。</p><p>此时请重新进行分区，否则磁盘性能会很差。<br>fdisk指令：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">命令(输入 m 获取帮助)： d</span><br></pre></td></tr></table></figure><p>parted指令：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(parted) rm 1</span><br></pre></td></tr></table></figure><h2 id="使用mkfs磁盘格式化"><span class="post-title-index">2.4.</span><a href="#使用mkfs磁盘格式化" class="headerlink" title="使用mkfs磁盘格式化"></a> 使用mkfs磁盘格式化</h2><p>格式化整块磁盘为ext4格式（这种情况下不需要分区）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs -t ext4 /dev/sdb</span><br></pre></td></tr></table></figure><p>格式化某个分区为 ext4 格式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs.ext4 /dev/sdb1</span><br></pre></td></tr></table></figure><p>格式化某个分区为 xfs 格式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs.xfs /dev/sdb1</span><br></pre></td></tr></table></figure><p>查看分区ID：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blkid /dev/sdb1</span><br></pre></td></tr></table></figure><h1 id="挂载磁盘"><span class="post-title-index">3.</span><a href="#挂载磁盘" class="headerlink" title="挂载磁盘"></a> 挂载磁盘</h1><h2 id="临时挂载磁盘"><span class="post-title-index">3.1.</span><a href="#临时挂载磁盘" class="headerlink" title="临时挂载磁盘"></a> 临时挂载磁盘</h2><p>1、创建挂载目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /sdb</span><br></pre></td></tr></table></figure><p>2、挂载磁盘</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/sdb1 /sdb</span><br></pre></td></tr></table></figure><h2 id="开机自动挂载磁盘"><span class="post-title-index">3.2.</span><a href="#开机自动挂载磁盘" class="headerlink" title="开机自动挂载磁盘"></a> 开机自动挂载磁盘</h2><p>1、创建挂载目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /sdb</span><br></pre></td></tr></table></figure><p>2、添加自动挂载，编辑 /etc/fstab ，添加</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># /dev/sdb1 /sdb ext4 defaults 0 0</span><br><span class="line">&lt;blkid&gt; /sdb ext4 defaults 0 0</span><br></pre></td></tr></table></figure><p>3、执行挂载（根据/etc/fstab的配置）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mount -a</span><br><span class="line"><span class="built_in">df</span> -h</span><br></pre></td></tr></table></figure><h1 id="卸载磁盘"><span class="post-title-index">4.</span><a href="#卸载磁盘" class="headerlink" title="卸载磁盘"></a> 卸载磁盘</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">umount /sdb</span><br></pre></td></tr></table></figure><h1 id="挂载NFS"><span class="post-title-index">5.</span><a href="#挂载NFS" class="headerlink" title="挂载NFS"></a> 挂载NFS</h1><p>在Linux中挂载NFS格式的磁盘需要使用NFS客户端。</p><p>1、安装NFS客户端</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt install nfs-common <span class="comment"># Debian/Ubuntu</span></span><br><span class="line">yum install nfs-utils <span class="comment"># CentOS/RedHat/Fedora</span></span><br><span class="line">pacman -S nfs-utils <span class="comment"># Arch Linux</span></span><br></pre></td></tr></table></figure><p>2、查看nfs-server的挂载点</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">showmount -e 192.168.56.200</span><br></pre></td></tr></table></figure><p>3、创建挂载点，执行挂载</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /data/nfs</span><br><span class="line">mount -t nfs 192.168.56.200:/data/nfs /data/nfs</span><br></pre></td></tr></table></figure><p>如果mount卡住，大概率是因为nfs-server的问题，建议检查一下挂载点是否正常。</p><p>4、<code>/etc/fstab</code>中配置开机自动挂载（可选）</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.56.200:/data/nfs /data/nfs nfs defaults 0 0</span><br></pre></td></tr></table></figure><h1 id="挂载NTFS"><span class="post-title-index">6.</span><a href="#挂载NTFS" class="headerlink" title="挂载NTFS"></a> 挂载NTFS</h1><p>在Linux中挂载NTFS格式的磁盘通常使用<code>ntfs-3g</code>驱动程序。</p><p>1、安装 ntfs-3g</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt-get install ntfs-3g <span class="comment"># Debian/Ubuntu</span></span><br><span class="line">yum install ntfs-3g <span class="comment"># CentOS/RedHat/Fedora</span></span><br><span class="line">pacman -S ntfs-3g <span class="comment"># Arch Linux</span></span><br></pre></td></tr></table></figure><p>2、找出磁盘分区</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fdisk -l</span><br><span class="line">lsblk</span><br></pre></td></tr></table></figure><p>看到类似 <code>/dev/sda1</code> 或 <code>/dev/sdb2</code> 的分区表示法。</p><p>4、创建挂载点，执行挂载<br>假设NTFS分区是 <code>/dev/sdb1</code>，挂载点为 <code>/data/samba/wd</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /data/samba/wd</span><br><span class="line">mount -t ntfs-3g /dev/sdb1 /data/samba/wd</span><br></pre></td></tr></table></figure><p>如果想要挂载时有特定的读写权限，可以使用如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -t ntfs-3g -o uid=1000,gid=1000 /dev/sdb1 /data/samba/wd</span><br></pre></td></tr></table></figure><p>其中<code>uid</code>和<code>gid</code>应该替换成你希望给予访问权限的用户和组的ID。</p><p>5、<code>/etc/fstab</code>中配置开机自动挂载（可选）</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/dev/sdb1 /data/samba/wd ntfs-3g defaults,umask=022 0 0</span><br></pre></td></tr></table></figure><h1 id="df-h卡住问题"><span class="post-title-index">7.</span><a href="#df-h卡住问题" class="headerlink" title="df -h卡住问题"></a> df -h卡住问题</h1><h2 id="问题描述"><span class="post-title-index">7.1.</span><a href="#问题描述" class="headerlink" title="问题描述"></a> 问题描述</h2><p><code>df -h</code>执行后，卡住了</p><h2 id="解决办法"><span class="post-title-index">7.2.</span><a href="#解决办法" class="headerlink" title="解决办法"></a> 解决办法</h2><p>一般是由于 mount 目录所在nfs服务器关机了，或者目录不存在了，造成 df -h 卡住一直不动</p><p>排查办法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看具体有哪些挂载</span></span><br><span class="line">mount</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看具体卡在哪里了</span></span><br><span class="line">strace <span class="built_in">df</span> -h</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看有哪些进程使用这个挂载</span></span><br><span class="line">fuser -cu /data/nfs</span><br></pre></td></tr></table></figure><p>解决办法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 卸载无效挂载</span></span><br><span class="line">umount -l /data/nfs</span><br><span class="line">umount -lf /data/nfs</span><br></pre></td></tr></table></figure></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>原文链接：</strong> <a href="https://www.voidking.com/dev-linux-mount/" title="好好学Linux：Linux挂载文件系统">https://www.voidking.com/dev-linux-mount/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本文采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议，转载请注明出处！源站会即时更新知识点并修正错误，欢迎访问~</li><li> <img width="200" height="200" src="/images/avatar.jpg"><p style="text-align:center;margin-bottom:0">微信公众号同步更新，欢迎关注~</p></li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/linux/" rel="tag"># linux</a> <a href="/tags/%E5%A5%BD%E5%A5%BD%E5%AD%A6Linux/" rel="tag"># 好好学Linux</a> <a href="/tags/%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/" rel="tag"># 问题排查</a> <a href="/tags/shell/" rel="tag"># shell</a> <a href="/tags/nfs/" rel="tag"># nfs</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-linux-resources/" rel="prev" title="好好学Linux：Linux学习资源"><i class="fa fa-chevron-left"></i> 好好学Linux：Linux学习资源</a></div><div class="post-nav-item"> <a href="/dev-linux-basic-concepts/" rel="next" title="好好学Linux：Linux基础概念">好好学Linux：Linux基础概念<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"><ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-3284447971731414" data-ad-slot="9697986181"></ins><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3284447971731414" crossorigin="anonymous"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#mount-umount%E7%AE%80%E4%BB%8B"><span class="nav-text">1. mount&#x2F;umount简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA%E5%B9%B6%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="nav-text">2. 磁盘分区并格式化</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8fdisk%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA"><span class="nav-text">2.1. 使用fdisk磁盘分区</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8parted%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA"><span class="nav-text">2.2. 使用parted磁盘分区</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A3%81%E7%9B%98%E9%87%8D%E6%96%B0%E5%88%86%E5%8C%BA"><span class="nav-text">2.3. 磁盘重新分区</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8mkfs%E7%A3%81%E7%9B%98%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="nav-text">2.4. 使用mkfs磁盘格式化</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8C%82%E8%BD%BD%E7%A3%81%E7%9B%98"><span class="nav-text">3. 挂载磁盘</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%B4%E6%97%B6%E6%8C%82%E8%BD%BD%E7%A3%81%E7%9B%98"><span class="nav-text">3.1. 临时挂载磁盘</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E6%9C%BA%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD%E7%A3%81%E7%9B%98"><span class="nav-text">3.2. 开机自动挂载磁盘</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%B8%E8%BD%BD%E7%A3%81%E7%9B%98"><span class="nav-text">4. 卸载磁盘</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8C%82%E8%BD%BDNFS"><span class="nav-text">5. 挂载NFS</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8C%82%E8%BD%BDNTFS"><span class="nav-text">6. 挂载NTFS</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#df-h%E5%8D%A1%E4%BD%8F%E9%97%AE%E9%A2%98"><span class="nav-text">7. df -h卡住问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0"><span class="nav-text">7.1. 问题描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="nav-text">7.2. 解决办法</span></a></li></ol></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">一个计算机技术爱好者与学习者</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">744</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">32</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">258</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2024</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '5a238b8c32b1e4dd2156',
      clientSecret: 'bfb5d518626f6fdc7da0351d1e0cd37ab75c6361',
      repo: 'gitalk-comments',
      owner: 'voidking',
      admin: ['voidking'],
      id: 'ea1d7805785decaca22972292fdd417a',
      title: '好好学Linux：Linux挂载文件系统',
      body: '欢迎留言，互相交流学习~',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></body></html>