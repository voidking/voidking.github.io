<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//qiniu.cdn.voidking.com/doc/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="前言Branches in Git are incredibly lightweight as well. They are simply pointers to a specific commit – nothing more. This is why many Git enthusiasts chant the mantra:  branch early, and branch often."><meta property="og:type" content="article"><meta property="og:title" content="好好学Git：Git分支"><meta property="og:url" content="https://www.voidking.com/dev-git-branch/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="前言Branches in Git are incredibly lightweight as well. They are simply pointers to a specific commit – nothing more. This is why many Git enthusiasts chant the mantra:  branch early, and branch often."><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2015-07-21T12:00:00.000Z"><meta property="article:modified_time" content="2023-12-16T08:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="git"><meta property="article:tag" content="好好学Git"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-git-branch/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>好好学Git：Git分支 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">一个计算机技术爱好者与学习者</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-git-branch/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="一个计算机技术爱好者与学习者"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> 好好学Git：Git分支</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2015-07-21 12:00:00" itemprop="dateCreated datePublished" datetime="2015-07-21T12:00:00+00:00">2015-07-21</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2023-12-16 08:00:00" itemprop="dateModified" datetime="2023-12-16T08:00:00+00:00">2023-12-16</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="前言"><span class="post-title-index">1.</span><a href="#前言" class="headerlink" title="前言"></a> 前言</h1><p>Branches in Git are incredibly lightweight as well. They are simply pointers to a specific commit – nothing more. This is why many Git enthusiasts chant the mantra:</p><blockquote><p>branch early, and branch often.</p></blockquote><p>Because there is no storage / memory overhead with making many branches, it’s easier to logically divide up your work than have big beefy branches.</p><p>When we start mixing branches and commits, we will see how these two features combine. For now though, just remember that a branch essentially says “I want to include the work of this commit and all parent commits.”</p><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="http://learngitbranching.js.org/">Learn Git Branching</a></li><li><a target="_blank" rel="noopener" href="http://blog.csdn.net/hudashi/article/details/7664382">git merge简介</a></li><li><a target="_blank" rel="noopener" href="http://git.seyren.com/4_2.html">Git Book - rebase</a></li></ul><span id="more"></span><h1 id="git分支规范"><span class="post-title-index">2.</span><a href="#git分支规范" class="headerlink" title="git分支规范"></a> git分支规范</h1><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="https://nvie.com/posts/a-successful-git-branching-model/">A successful Git branching model</a></li><li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/198066289">图解git flow开发流程</a></li></ul><h1 id="分支基本操作"><span class="post-title-index">3.</span><a href="#分支基本操作" class="headerlink" title="分支基本操作"></a> 分支基本操作</h1><h2 id="查看分支"><span class="post-title-index">3.1.</span><a href="#查看分支" class="headerlink" title="查看分支"></a> 查看分支</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -a</span><br></pre></td></tr></table></figure><h2 id="本地仓库中创建分支"><span class="post-title-index">3.2.</span><a href="#本地仓库中创建分支" class="headerlink" title="本地仓库中创建分支"></a> 本地仓库中创建分支</h2><p>本地仓库中创建与当前分支相同的bugfix分支，并切换到bugfix分支</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b bugfix</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">git branch bugfix &amp;&amp; git checkout bugfix</span><br></pre></td></tr></table></figure><p>创建与本地仓库main分支相同的分支</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout main -b bugfix</span><br></pre></td></tr></table></figure><p>创建与远程仓库main分支相同的分支，追踪远程分支</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout origin/main -b bugfix</span><br></pre></td></tr></table></figure><h2 id="切换分支"><span class="post-title-index">3.3.</span><a href="#切换分支" class="headerlink" title="切换分支"></a> 切换分支</h2><p>下载仓库后，切换到bugfix分支，bugfix分支追踪远程 origin/bugfix 分支</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git pull</span><br><span class="line">git checkout origin/bugfix</span><br></pre></td></tr></table></figure><h2 id="远程仓库中创建分支"><span class="post-title-index">3.4.</span><a href="#远程仓库中创建分支" class="headerlink" title="远程仓库中创建分支"></a> 远程仓库中创建分支</h2><p>创建远程仓库bugfix分支和bugfix2分支</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git push origin HEAD:bugfix</span><br><span class="line">git push origin HEAD:bugfix2</span><br></pre></td></tr></table></figure><h2 id="上传分支"><span class="post-title-index">3.5.</span><a href="#上传分支" class="headerlink" title="上传分支"></a> 上传分支</h2><p>在bugfix分支下进行了修改，然后提交修改</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;something&quot;</span></span><br><span class="line">git push origin HEAD:bugfix</span><br></pre></td></tr></table></figure><h2 id="删除分支"><span class="post-title-index">3.6.</span><a href="#删除分支" class="headerlink" title="删除分支"></a> 删除分支</h2><p>1、删除本地分支</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -D bugfix</span><br></pre></td></tr></table></figure><p>2、删除远程分支</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push --delete origin bugfix</span><br></pre></td></tr></table></figure><h1 id="恢复已删除分支"><span class="post-title-index">4.</span><a href="#恢复已删除分支" class="headerlink" title="恢复已删除分支"></a> 恢复已删除分支</h1><p>1、查看全局日志</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reflog</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> -g</span><br></pre></td></tr></table></figure><p>2、新建分支</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch bugfix 3eac14d</span><br></pre></td></tr></table></figure><p>3、上传分支</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout bugfix</span><br><span class="line">git push origin HEAD:bugfix</span><br></pre></td></tr></table></figure><h1 id="合并分支"><span class="post-title-index">5.</span><a href="#合并分支" class="headerlink" title="合并分支"></a> 合并分支</h1><h2 id="合并分支概述"><span class="post-title-index">5.1.</span><a href="#合并分支概述" class="headerlink" title="合并分支概述"></a> 合并分支概述</h2><p>合并分支，可以使用merge，也可以使用rebase。它们俩有什么区别呢？主要是适用场景不同：</p><p>场景一：基于 master 拉出来一个开发分支 dev，在 dev 分支开发完成了之后，要合并到 master 上。<br>操作：切换到 master 分支，使用 <code>git merge dev</code><br>PS：对于git服务器端的merge合并，往往要发起MR，也就是Merge Request<br>为什么不使用<code>git rebase dev</code>？因为master是主干，rebase的话，主干就长歪了。为了保证master提交记录是笔直的主干，是一条直线，所以使用merge。</p><p>场景二：基于 master 拉出来一个开发分支 dev，在 dev 上开发了一段时间后，master分支也有了新的变更。为了保证我们在最新的版本基础上进行开发，这时需要把 master 分支提交的新内容更新到 dev 分支。<br>操作：切换到 dev 分支，使用 <code>git rebase master</code><br>为什么不使用<code>git merge master</code>？因为dev最终是要merge到master的，如果master先merge到dev，开发一段时间后dev最后又merge到master，整个提交树会很混乱。为了保证提交记录的清晰明了，所以使用rebase。</p><p>查看提交树命令：<code>git log --graph --pretty=oneline</code></p><h2 id="模拟分支变更"><span class="post-title-index">5.2.</span><a href="#模拟分支变更" class="headerlink" title="模拟分支变更"></a> 模拟分支变更</h2><p>1、初始化仓库和分支</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> <span class="built_in">test</span></span><br><span class="line"><span class="built_in">cd</span> <span class="built_in">test</span></span><br><span class="line">git init</span><br><span class="line"><span class="built_in">touch</span> test.txt</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;first commit&quot;</span></span><br><span class="line">git checkout -b bugfix</span><br></pre></td></tr></table></figure><p>2、bugfix分支上，新建test.txt文件，提交</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hello bugfix&quot;</span> &gt; test.txt</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;update file in bugfix branch&quot;</span></span><br></pre></td></tr></table></figure><p>3、切到master分支，新建test.txt文件，提交</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git checkout master</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hello master&quot;</span> &gt; test.txt</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;update file in master branch&quot;</span></span><br></pre></td></tr></table></figure><h2 id="merge"><span class="post-title-index">5.3.</span><a href="#merge" class="headerlink" title="merge"></a> merge</h2><p>1、通过merge命令合并bugfix分支到master</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge bugfix</span><br></pre></td></tr></table></figure><p>提示冲突：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Auto-merging test.txt</span><br><span class="line">CONFLICT (content): Merge conflict in test.txt</span><br><span class="line">Automatic merge failed; fix conflicts and then commit the result.</span><br></pre></td></tr></table></figure><p>2、查看冲突<br><code>git status</code>，提示test.txt文件冲突。<br>打开test.txt，可以看到如下冲突：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line">hello master</span><br><span class="line">=======</span><br><span class="line">hello bugfix</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; update file in bugfix branch</span><br></pre></td></tr></table></figure><p>其中 ======= 隔开的上半部分，是 HEAD（即 master 分支，在运行 merge 命令时检出的分支）中的内容，下半部分是在bugfix分支中的内容。解决冲突的办法无非是二者选其一或者由你亲自整合到一起。</p><p>3、解决冲突<br>修改test.txt如下：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello master</span><br></pre></td></tr></table></figure><p>4、提交</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add test.txt</span><br><span class="line">git commit -m <span class="string">&quot;merge bugfix into master&quot;</span></span><br></pre></td></tr></table></figure><p>5、查看提交记录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span></span><br></pre></td></tr></table></figure><h2 id="rebase"><span class="post-title-index">5.4.</span><a href="#rebase" class="headerlink" title="rebase"></a> rebase</h2><h3 id="rebase合并内容"><span class="post-title-index">5.4.1.</span><a href="#rebase合并内容" class="headerlink" title="rebase合并内容"></a> rebase合并内容</h3><p>需求：text.txt 打算合并master分支和bugfix分支中的内容。<br>text.txt最终内容为：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello master bugfix</span><br></pre></td></tr></table></figure><p>1、通过rebase命令合并master分支到bugfix</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout bugfix</span><br><span class="line">git rebase master</span><br></pre></td></tr></table></figure><p>提示冲突：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">First, rewinding head to replay your work on top of it...</span><br><span class="line">Applying: update file in bugfix branch</span><br><span class="line">Using index info to reconstruct a base tree...</span><br><span class="line">M   test.txt</span><br><span class="line">Falling back to patching base and 3-way merge...</span><br><span class="line">Auto-merging test.txt</span><br><span class="line">CONFLICT (content): Merge conflict in test.txt</span><br><span class="line">error: Failed to merge in the changes.</span><br><span class="line">Patch failed at 0001 update file in bugfix branch</span><br><span class="line">hint: Use &#x27;git am --show-current-patch&#x27; to see the failed patch</span><br><span class="line">Resolve all conflicts manually, mark them as resolved with</span><br><span class="line">&quot;git add/rm &lt;conflicted_files&gt;&quot;, then run &quot;git rebase --continue&quot;.</span><br><span class="line">You can instead skip this commit: run &quot;git rebase --skip&quot;.</span><br><span class="line">To abort and get back to the state before &quot;git rebase&quot;, run &quot;git rebase --abort&quot;</span><br></pre></td></tr></table></figure><p>此时我们进入了一个临时分支。</p><p>2、查看冲突<br><code>git status</code>，提示test.txt文件冲突。<br>打开test.txt，可以看到如下冲突：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line">hello master</span><br><span class="line">=======</span><br><span class="line">hello bugfix</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; update file in bugfix branch</span><br></pre></td></tr></table></figure><p>3、解决冲突<br>修改test.txt如下：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello master bugfix</span><br></pre></td></tr></table></figure><p>4、提交</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add test.txt</span><br><span class="line">git rebase --<span class="built_in">continue</span></span><br></pre></td></tr></table></figure><p>5、查看提交记录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span></span><br></pre></td></tr></table></figure><p>可以看到三条记录：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">update file in bugfix branch</span><br><span class="line">update file in master branch</span><br><span class="line">first commit</span><br></pre></td></tr></table></figure><h3 id="rebase保留master"><span class="post-title-index">5.4.2.</span><a href="#rebase保留master" class="headerlink" title="rebase保留master"></a> rebase保留master</h3><p>需求：text.txt 打算保留master分支中的内容，舍弃bugfix分支中的内容。<br>text.txt最终内容为：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello master</span><br></pre></td></tr></table></figure><p>1、通过rebase命令合并master分支到bugfix</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout bugfix</span><br><span class="line">git rebase master</span><br></pre></td></tr></table></figure><p>提示冲突：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">First, rewinding head to replay your work on top of it...</span><br><span class="line">Applying: update file in bugfix branch</span><br><span class="line">Using index info to reconstruct a base tree...</span><br><span class="line">M   test.txt</span><br><span class="line">Falling back to patching base and 3-way merge...</span><br><span class="line">Auto-merging test.txt</span><br><span class="line">CONFLICT (content): Merge conflict in test.txt</span><br><span class="line">error: Failed to merge in the changes.</span><br><span class="line">Patch failed at 0001 update file in bugfix branch</span><br><span class="line">hint: Use &#x27;git am --show-current-patch&#x27; to see the failed patch</span><br><span class="line">Resolve all conflicts manually, mark them as resolved with</span><br><span class="line">&quot;git add/rm &lt;conflicted_files&gt;&quot;, then run &quot;git rebase --continue&quot;.</span><br><span class="line">You can instead skip this commit: run &quot;git rebase --skip&quot;.</span><br><span class="line">To abort and get back to the state before &quot;git rebase&quot;, run &quot;git rebase --abort&quot;</span><br></pre></td></tr></table></figure><p>此时我们进入了一个临时分支。</p><p>2、查看冲突<br><code>git status</code>，提示test.txt文件冲突。<br>打开test.txt，可以看到如下冲突：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line">hello master</span><br><span class="line">=======</span><br><span class="line">hello bugfix</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; update file in bugfix branch</span><br></pre></td></tr></table></figure><p>3、解决冲突<br>修改test.txt如下：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello master</span><br></pre></td></tr></table></figure><p>或者直接使用命令行解决冲突：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout --ours test.txt</span><br></pre></td></tr></table></figure><p>4、提交</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add test.txt</span><br><span class="line">git rebase --skip</span><br></pre></td></tr></table></figure><p>5、查看提交记录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span></span><br></pre></td></tr></table></figure><p>可以看到两条记录：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update file in master branch</span><br><span class="line">first commit</span><br></pre></td></tr></table></figure><h3 id="放弃rebase"><span class="post-title-index">5.4.3.</span><a href="#放弃rebase" class="headerlink" title="放弃rebase"></a> 放弃rebase</h3><p>rebase过程中，可以随时放弃rebase</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase --abort</span><br></pre></td></tr></table></figure><h2 id="解决冲突小结"><span class="post-title-index">5.5.</span><a href="#解决冲突小结" class="headerlink" title="解决冲突小结"></a> 解决冲突小结</h2><p>合并时难免代码冲突，git会将冲突的代码用 <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD ======= &gt;&gt;&gt;&gt;&gt;&gt;&gt; xxx</code> 标识出来，其中=======之前表示的是ours分支，之后表示theirs分支。</p><p>解决冲突办法：首先确定保留哪一部分代码，然后手动删除标志 <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD ======= &gt;&gt;&gt;&gt;&gt;&gt;&gt; xxx</code>，最后commit。</p><p>如果想要保留两个分支中的某一个，可以使用 <code>git chekout --ours &lt;fileName&gt;</code> 或者 <code>git checkout --theirs &lt;fileName&gt;</code>。</p><p>对于merge和rebase来说，这两个选项对应的分支正好是相反的。<br>在使用 merge 时，ours指的是当前分支（master），theirs指的是要被合并的分支（dev）。<br>而在 rebase 时，theirs指的是当前分支（dev），ours指向（master）。</p><h1 id="HEAD分支告警"><span class="post-title-index">6.</span><a href="#HEAD分支告警" class="headerlink" title="HEAD分支告警"></a> HEAD分支告警</h1><h2 id="问题描述"><span class="post-title-index">6.1.</span><a href="#问题描述" class="headerlink" title="问题描述"></a> 问题描述</h2><p>执行 <code>git status</code>，出现了warning</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">warning: refname &#x27;HEAD&#x27; is ambiguous.</span><br></pre></td></tr></table></figure><h2 id="解决办法"><span class="post-title-index">6.2.</span><a href="#解决办法" class="headerlink" title="解决办法"></a> 解决办法</h2><p>解决办法：删除 HEAD 分支</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -D HEAD</span><br></pre></td></tr></table></figure><p>原因分析：<br>这个问题是因为我们有一个叫做 HEAD 或者 head 的分支造成的，这个名字是一个保留字，它用于标示哪个分支是当前分支 ，而不应该直接拿来做分支的名字。<br>但是 remote 的 HEAD 分支是 OK 的，比如 origin/HEAD，经常有人把这个 checkout 下来，结果就变成了本地的 HEAD 分支，这就是此问题产生的源头。<br>如果用 HEAD 创建了一个 tag，这也会引起相同的问题。</p><p>参考文档：<a target="_blank" rel="noopener" href="https://segmentfault.com/q/1010000006978681">git warning: refname ‘HEAD’ is ambiguous是什么问题</a></p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>原文链接：</strong> <a href="https://www.voidking.com/dev-git-branch/" title="好好学Git：Git分支">https://www.voidking.com/dev-git-branch/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本文采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议，转载请注明出处！源站会即时更新知识点并修正错误，欢迎访问~</li><li> <img width="200" height="200" src="/images/avatar.jpg"><p style="text-align:center;margin-bottom:0">微信公众号同步更新，欢迎关注~</p></li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/git/" rel="tag"># git</a> <a href="/tags/%E5%A5%BD%E5%A5%BD%E5%AD%A6Git/" rel="tag"># 好好学Git</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-gitignore/" rel="prev" title="gitignore用法"><i class="fa fa-chevron-left"></i> gitignore用法</a></div><div class="post-nav-item"> <a href="/dev-android-open-sourse/" rel="next" title="Android开发——常见开源项目">Android开发——常见开源项目<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"><ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-3284447971731414" data-ad-slot="9697986181"></ins><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3284447971731414" crossorigin="anonymous"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">1. 前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git%E5%88%86%E6%94%AF%E8%A7%84%E8%8C%83"><span class="nav-text">2. git分支规范</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%86%E6%94%AF%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="nav-text">3. 分支基本操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%88%86%E6%94%AF"><span class="nav-text">3.1. 查看分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%88%86%E6%94%AF"><span class="nav-text">3.2. 本地仓库中创建分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%87%E6%8D%A2%E5%88%86%E6%94%AF"><span class="nav-text">3.3. 切换分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%88%86%E6%94%AF"><span class="nav-text">3.4. 远程仓库中创建分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8A%E4%BC%A0%E5%88%86%E6%94%AF"><span class="nav-text">3.5. 上传分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E5%88%86%E6%94%AF"><span class="nav-text">3.6. 删除分支</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%81%A2%E5%A4%8D%E5%B7%B2%E5%88%A0%E9%99%A4%E5%88%86%E6%94%AF"><span class="nav-text">4. 恢复已删除分支</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%88%E5%B9%B6%E5%88%86%E6%94%AF"><span class="nav-text">5. 合并分支</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%88%E5%B9%B6%E5%88%86%E6%94%AF%E6%A6%82%E8%BF%B0"><span class="nav-text">5.1. 合并分支概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A8%A1%E6%8B%9F%E5%88%86%E6%94%AF%E5%8F%98%E6%9B%B4"><span class="nav-text">5.2. 模拟分支变更</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#merge"><span class="nav-text">5.3. merge</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rebase"><span class="nav-text">5.4. rebase</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#rebase%E5%90%88%E5%B9%B6%E5%86%85%E5%AE%B9"><span class="nav-text">5.4.1. rebase合并内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rebase%E4%BF%9D%E7%95%99master"><span class="nav-text">5.4.2. rebase保留master</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%94%BE%E5%BC%83rebase"><span class="nav-text">5.4.3. 放弃rebase</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E5%86%B2%E7%AA%81%E5%B0%8F%E7%BB%93"><span class="nav-text">5.5. 解决冲突小结</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HEAD%E5%88%86%E6%94%AF%E5%91%8A%E8%AD%A6"><span class="nav-text">6. HEAD分支告警</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0"><span class="nav-text">6.1. 问题描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="nav-text">6.2. 解决办法</span></a></li></ol></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">一个计算机技术爱好者与学习者</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">702</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">31</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">256</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2024</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '5a238b8c32b1e4dd2156',
      clientSecret: 'bfb5d518626f6fdc7da0351d1e0cd37ab75c6361',
      repo: 'gitalk-comments',
      owner: 'voidking',
      admin: ['voidking'],
      id: '9e230afa61e6ee1b4c8d1905354a1d56',
      title: '好好学Git：Git分支',
      body: '欢迎留言，互相交流学习~',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></body></html>