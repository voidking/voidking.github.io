<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//qiniu-cdn.voidking.com/doc/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="前言mysql是郝同学使用最多的数据库，但是每次要手敲命令，还是得谷歌百度。好记性不如烂笔头，本文对常用mysql命令进行一些整理，方便再次拾起。"><meta property="og:type" content="article"><meta property="og:title" content="好好学MySQL：MySQL常用命令"><meta property="og:url" content="https://www.voidking.com/dev-mysql-command/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="前言mysql是郝同学使用最多的数据库，但是每次要手敲命令，还是得谷歌百度。好记性不如烂笔头，本文对常用mysql命令进行一些整理，方便再次拾起。"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2017-09-05T11:24:57.000Z"><meta property="article:modified_time" content="2025-04-04T08:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="python"><meta property="article:tag" content="mysql"><meta property="article:tag" content="数据库"><meta property="article:tag" content="好好学MySQL"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-mysql-command/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>好好学MySQL：MySQL常用命令 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">一个计算机技术爱好者与学习者</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-mysql-command/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="一个计算机技术爱好者与学习者"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> 好好学MySQL：MySQL常用命令</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2017-09-05 11:24:57" itemprop="dateCreated datePublished" datetime="2017-09-05T11:24:57+00:00">2017-09-05</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-04-04 08:00:00" itemprop="dateModified" datetime="2025-04-04T08:00:00+00:00">2025-04-04</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/database/" itemprop="url" rel="index"><span itemprop="name">database</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="前言"><span class="post-title-index">1.</span><a href="#前言" class="headerlink" title="前言"></a> 前言</h1><p>mysql是郝同学使用最多的数据库，但是每次要手敲命令，还是得谷歌百度。好记性不如烂笔头，本文对常用mysql命令进行一些整理，方便再次拾起。</p><span id="more"></span><h1 id="mysql中SQL语句的大小写规则"><span class="post-title-index">2.</span><a href="#mysql中SQL语句的大小写规则" class="headerlink" title="mysql中SQL语句的大小写规则"></a> mysql中SQL语句的大小写规则</h1><p>mysql中，数据库名、表名、列名、索引名、SQL关键字、函数名都不区分大小写<br>详情参考<a target="_blank" rel="noopener" href="http://c.biancheng.net/view/7178.html">MySQL中SQL语句的大小写规则</a></p><h1 id="权限相关"><span class="post-title-index">3.</span><a href="#权限相关" class="headerlink" title="权限相关"></a> 权限相关</h1><p>参考<a href="https://www.voidking.com/dev-mysql-reset-password/">《MySQL重置密码》</a>。</p><h1 id="数据库相关"><span class="post-title-index">4.</span><a href="#数据库相关" class="headerlink" title="数据库相关"></a> 数据库相关</h1><h2 id="创建-删除数据库"><span class="post-title-index">4.1.</span><a href="#创建-删除数据库" class="headerlink" title="创建/删除数据库"></a> 创建/删除数据库</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建数据库</span></span><br><span class="line"><span class="keyword">create</span> database vkdb <span class="keyword">default</span> <span class="keyword">character set</span> utf8 <span class="keyword">collate</span> utf8_general_ci;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除数据库</span></span><br><span class="line"><span class="keyword">drop</span> database vkdb;</span><br></pre></td></tr></table></figure><h2 id="创建-删除用户"><span class="post-title-index">4.2.</span><a href="#创建-删除用户" class="headerlink" title="创建/删除用户"></a> 创建/删除用户</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建用户</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;vkuser&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;vkpassword&#x27;</span>;</span><br><span class="line"><span class="comment">-- or</span></span><br><span class="line"><span class="keyword">insert into</span> mysql.user(Host,<span class="keyword">User</span>,Password) <span class="keyword">values</span>(<span class="string">&#x27;%&#x27;</span>,<span class="string">&#x27;vkuser&#x27;</span>,<span class="string">&#x27;vkpassword&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除用户</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">user</span> <span class="string">&#x27;vkuser&#x27;</span>;</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">user</span> <span class="string">&#x27;vkuser&#x27;</span>@<span class="string">&#x27;192.168.56.101&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="授权数据库给用户"><span class="post-title-index">4.3.</span><a href="#授权数据库给用户" class="headerlink" title="授权数据库给用户"></a> 授权数据库给用户</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 授权数据库给用户</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> privileges <span class="keyword">on</span> vkdb.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;vkuser&#x27;</span>@<span class="string">&#x27;%&#x27;</span> <span class="keyword">with</span> <span class="keyword">grant</span> option;</span><br><span class="line"><span class="comment">-- or</span></span><br><span class="line"><span class="keyword">insert into</span> mysql.user(HOST,Db,<span class="keyword">USER</span>,Select_priv,Insert_priv,Update_priv,Delete_priv,Create_priv,Drop_priv)</span><br><span class="line">    <span class="keyword">VALUES</span>(<span class="string">&#x27;%&#x27;</span>,<span class="string">&#x27;vkdb&#x27;</span>,<span class="string">&#x27;vkuser&#x27;</span>,<span class="string">&#x27;Y&#x27;</span>,<span class="string">&#x27;Y&#x27;</span>,<span class="string">&#x27;Y&#x27;</span>,<span class="string">&#x27;Y&#x27;</span>,<span class="string">&#x27;Y&#x27;</span>,<span class="string">&#x27;Y&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 授权数据库给用户，同时指定密码</span></span><br><span class="line"><span class="comment">-- 危险！这条命令会同时修改vkuser的密码，不区分数据库！</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> privileges <span class="keyword">on</span> vkdb.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;vkuser&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;vkpassword2&#x27;</span> <span class="keyword">with</span> <span class="keyword">grant</span> option; </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 授权数据库给用户，同时指定主机和密码</span></span><br><span class="line"><span class="comment">-- 只有通过192.168.56.101访问数据库时，使用密码vkpassword2，其他主机访问数据库时还是使用vkpassword</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> privileges <span class="keyword">on</span> vkdb.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;vkuser&#x27;</span>@<span class="string">&#x27;192.168.56.101&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;vkpassword2&#x27;</span> <span class="keyword">with</span> <span class="keyword">grant</span> option;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 取消授权</span></span><br><span class="line"><span class="keyword">revoke</span> <span class="keyword">all</span> <span class="keyword">on</span> vkdb.<span class="operator">*</span> <span class="keyword">from</span> <span class="string">&#x27;vkuser&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 授权用户只允许登录权限</span></span><br><span class="line"><span class="keyword">grant</span> usage <span class="keyword">on</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;vkuser&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看用户和授权</span></span><br><span class="line"><span class="keyword">show</span> grants <span class="keyword">for</span> <span class="string">&#x27;vkuser&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">User</span>,Host <span class="keyword">from</span> mysql.user;</span><br></pre></td></tr></table></figure><h1 id="数据表相关"><span class="post-title-index">5.</span><a href="#数据表相关" class="headerlink" title="数据表相关"></a> 数据表相关</h1><h2 id="创建-删除数据表"><span class="post-title-index">5.1.</span><a href="#创建-删除数据表" class="headerlink" title="创建/删除数据表"></a> 创建/删除数据表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建数据表</span></span><br><span class="line"><span class="keyword">create table</span> if <span class="keyword">not</span> <span class="keyword">exists</span> `<span class="keyword">user</span>` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">8</span>) <span class="keyword">not null</span> auto_increment,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">not null</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">not null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="keyword">primary key</span> (id)</span><br><span class="line">) engine<span class="operator">=</span>innodb <span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看数据表</span></span><br><span class="line"><span class="keyword">describe</span> <span class="keyword">table</span> <span class="keyword">user</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除数据表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> `<span class="keyword">user</span>`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除所有数据表</span></span><br><span class="line"><span class="keyword">select</span> concat(<span class="string">&#x27;drop table &#x27;</span>,table_name,<span class="string">&#x27;;&#x27;</span>) <span class="keyword">FROM</span> information_schema.`TABLES` <span class="keyword">WHERE</span> table_schema<span class="operator">=</span><span class="string">&#x27;vkdb&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="添加-修改-删除column"><span class="post-title-index">5.2.</span><a href="#添加-修改-删除column" class="headerlink" title="添加/修改/删除column"></a> 添加/修改/删除column</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 添加column</span></span><br><span class="line"><span class="keyword">alter table</span> `<span class="keyword">user</span>` <span class="keyword">add</span> <span class="keyword">column</span> `deleted1` bool <span class="keyword">not null</span> <span class="keyword">default</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改column</span></span><br><span class="line"><span class="keyword">alter table</span> `<span class="keyword">user</span>` change `deleted1` `deleted` bool <span class="keyword">not null</span> <span class="keyword">default</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">alter table</span> `<span class="keyword">user</span>` modify `deleted` <span class="type">int</span>(<span class="number">1</span>) <span class="keyword">not null</span> <span class="keyword">default</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">alter table</span> `<span class="keyword">user</span>` modify <span class="keyword">column</span> `deleted` <span class="type">int</span>(<span class="number">1</span>) <span class="keyword">not null</span> <span class="keyword">default</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除column</span></span><br><span class="line"><span class="keyword">alter table</span> `<span class="keyword">user</span>` <span class="keyword">drop</span> `deleted`;</span><br><span class="line"><span class="keyword">alter table</span> `<span class="keyword">user</span>` <span class="keyword">drop</span> <span class="keyword">column</span> `deleted`;</span><br></pre></td></tr></table></figure><h2 id="设置unique"><span class="post-title-index">5.3.</span><a href="#设置unique" class="headerlink" title="设置unique"></a> 设置unique</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 设置unique</span></span><br><span class="line"><span class="keyword">alter table</span> `<span class="keyword">user</span>` modify `name` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">not null</span> <span class="keyword">unique</span>;</span><br><span class="line"><span class="keyword">alter table</span> `<span class="keyword">user</span>` modify <span class="keyword">column</span> `name` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">not null</span> <span class="keyword">unique</span>;</span><br></pre></td></tr></table></figure><h2 id="插入-修改-删除数据"><span class="post-title-index">5.4.</span><a href="#插入-修改-删除数据" class="headerlink" title="插入/修改/删除数据"></a> 插入/修改/删除数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">insert into</span> `<span class="keyword">user</span>` (`name`,`password`) <span class="keyword">values</span>(<span class="string">&#x27;haojin&#x27;</span>,<span class="string">&#x27;voidking&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改数据</span></span><br><span class="line"><span class="keyword">update</span> `<span class="keyword">user</span>` <span class="keyword">set</span> password<span class="operator">=</span><span class="string">&#x27;haojin&#x27;</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;haojin&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除数据</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> `<span class="keyword">user</span>` <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;haojin&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="查询数据"><span class="post-title-index">5.5.</span><a href="#查询数据" class="headerlink" title="查询数据"></a> 查询数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询数据</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> `<span class="keyword">user</span>` <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;haojin&#x27;</span> <span class="keyword">and</span> password<span class="operator">=</span><span class="string">&#x27;voidking&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> `<span class="keyword">user</span>` <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;haojin&#x27;</span> <span class="keyword">or</span> password<span class="operator">=</span><span class="string">&#x27;haojin&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> `<span class="keyword">user</span>` <span class="keyword">where</span> name<span class="operator">&lt;&gt;</span><span class="string">&#x27;haojin0&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> `<span class="keyword">user</span>` <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;%ao%&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> `<span class="keyword">user</span>` <span class="keyword">order</span> <span class="keyword">by</span> id <span class="keyword">asc</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> `<span class="keyword">user</span>` <span class="keyword">order</span> <span class="keyword">by</span> id <span class="keyword">desc</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> `<span class="keyword">user</span>` <span class="keyword">order</span> <span class="keyword">by</span> id <span class="keyword">desc</span> limit <span class="number">2</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> `<span class="keyword">user</span>` <span class="keyword">where</span> unix_timestamp(update_time) <span class="operator">&lt;</span> unix_timestamp(<span class="string">&#x27;2020-03-01 10:14:51&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="查看表是否被锁"><span class="post-title-index">5.6.</span><a href="#查看表是否被锁" class="headerlink" title="查看表是否被锁"></a> 查看表是否被锁</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看表是否被锁</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">OPEN</span> TABLES;</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">OPEN</span> TABLES <span class="keyword">WHERE</span> In_use <span class="operator">&gt;</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">SHOW</span> PROCESSLIST;</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">TABLE</span> STATUS <span class="keyword">LIKE</span> <span class="string">&#x27;your_table_name&#x27;</span>;</span><br></pre></td></tr></table></figure><h1 id="导入导出数据"><span class="post-title-index">6.</span><a href="#导入导出数据" class="headerlink" title="导入导出数据"></a> 导入导出数据</h1><h2 id="导出数据库数据"><span class="post-title-index">6.1.</span><a href="#导出数据库数据" class="headerlink" title="导出数据库数据"></a> 导出数据库数据</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -ppassword vkdb &gt; /root/vkdb.sql</span><br></pre></td></tr></table></figure><h2 id="导出数据库所有表结构"><span class="post-title-index">6.2.</span><a href="#导出数据库所有表结构" class="headerlink" title="导出数据库所有表结构"></a> 导出数据库所有表结构</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -ppassword -d vkdb &gt; /root/vkdb_structure.sql</span><br></pre></td></tr></table></figure><h2 id="导出数据库user表数据"><span class="post-title-index">6.3.</span><a href="#导出数据库user表数据" class="headerlink" title="导出数据库user表数据"></a> 导出数据库user表数据</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -ppassword vkdb user &gt; /root/vkdb_user.sql</span><br></pre></td></tr></table></figure><h2 id="导出数据库user表结构"><span class="post-title-index">6.4.</span><a href="#导出数据库user表结构" class="headerlink" title="导出数据库user表结构"></a> 导出数据库user表结构</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -ppassword -d vkdb user &gt; /root/user_structure.sql</span><br></pre></td></tr></table></figure><p>CREATE DATABASE 语句之前加一个 DROP DATABASE</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -uroot -ppassword -d --add-drop-table vkdb user &gt; /root/user_structure.sql </span><br></pre></td></tr></table></figure><h2 id="导入数据库数据"><span class="post-title-index">6.5.</span><a href="#导入数据库数据" class="headerlink" title="导入数据库数据"></a> 导入数据库数据</h2><p>通过mysql命令导入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -ppassword vkdb &lt; /root/vkdb.sql</span><br><span class="line">mysql -uroot -ppassword -f vkdb &lt; /root/vkdb.sql</span><br></pre></td></tr></table></figure><p>或者登录到mysql后执行导入</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source <span class="operator">/</span>root<span class="operator">/</span>vkdb.sql;</span><br></pre></td></tr></table></figure><h2 id="csv数据导入"><span class="post-title-index">6.6.</span><a href="#csv数据导入" class="headerlink" title="csv数据导入"></a> csv数据导入</h2><p>使用dbeaver导入csv数据，可以自动创建表结构。</p><h1 id="从binlog导出sql语句"><span class="post-title-index">7.</span><a href="#从binlog导出sql语句" class="headerlink" title="从binlog导出sql语句"></a> 从binlog导出sql语句</h1><p>首先确保mysql server开启了binlog</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;%log_bin%&#x27;</span>;</span><br></pre></td></tr></table></figure><p>本地导出：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqlbinlog --base64-output=decode-rows -v --result-file=output.sql binlog.000001</span><br></pre></td></tr></table></figure><p>binlog文件可能比较多，选择最近修改的那个导出。</p><p>远程导出：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqlbinlog --read-from-remote-server --host=host_name --user=user_name --password=password --base64-output=decode-rows -v --result-file=output.sql -v binlog.000001</span><br></pre></td></tr></table></figure><h1 id="shell执行sql"><span class="post-title-index">8.</span><a href="#shell执行sql" class="headerlink" title="shell执行sql"></a> shell执行sql</h1><h2 id="shell中直接执行sql示例"><span class="post-title-index">8.1.</span><a href="#shell中直接执行sql示例" class="headerlink" title="shell中直接执行sql示例"></a> shell中直接执行sql示例</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -h 192.168.56.100 -uroot -pvoidking -D vkdb -e <span class="string">&quot;select * from user;&quot;</span></span><br></pre></td></tr></table></figure><h2 id="获取数据写入到txt"><span class="post-title-index">8.2.</span><a href="#获取数据写入到txt" class="headerlink" title="获取数据写入到txt"></a> 获取数据写入到txt</h2><p>需求：mysql数据库，获取数据库vk中的app表中所有记录的name，写入到 name.txt 文件。</p><p>脚本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">sql=<span class="string">&quot;select name from app where app.deleted=0;&quot;</span></span><br><span class="line"></span><br><span class="line">data=$(mysql -h192.168.56.100 -uroot -pmypassword -s -e <span class="string">&quot;use vk;<span class="variable">$&#123;sql&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;data&#125;</span>&quot;</span> &gt; name.txt</span><br></pre></td></tr></table></figure><h2 id="获取数据写入到csv"><span class="post-title-index">8.3.</span><a href="#获取数据写入到csv" class="headerlink" title="获取数据写入到csv"></a> 获取数据写入到csv</h2><p>需求：mysql数据库，获取数据库vk中的app表中所有记录的name和summary，写入到 app.csv 文件。<br>脚本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">sql=<span class="string">&quot;select name,summary from app where app.deleted=0;&quot;</span></span><br><span class="line"></span><br><span class="line">data=$(mysql -h192.168.56.100 -uroot -pmypassword -s -e <span class="string">&quot;use vk;<span class="variable">$&#123;sql&#125;</span>&quot;</span> | sed <span class="string">&#x27;s/\t/,/g&#x27;</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;data&#125;</span>&quot;</span> &gt; app.csv</span><br></pre></td></tr></table></figure><p>注意：假设name或者summary字段本身就包含制表符<code>\t</code>，那么最终导出的数据是会有问题的。这种情形建议使用python执行sql获取数据。</p><h1 id="python执行sql"><span class="post-title-index">9.</span><a href="#python执行sql" class="headerlink" title="python执行sql"></a> python执行sql</h1><p>需求：mysql数据库，获取数据库vk中的app表中所有记录的name和summary（summary字段中可能包含<code>\t</code>），写入到 app.xlsx 文件。</p><p>安装依赖：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pandas pymysql openpyxl</span><br></pre></td></tr></table></figure><p>脚本：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line">sql=<span class="string">&quot;select name,summary from app where app.deleted=0&quot;</span></span><br><span class="line"></span><br><span class="line">conn = pymysql.connect(host=<span class="string">&#x27;192.168.56.100&#x27;</span>, user=<span class="string">&#x27;root&#x27;</span>, password=<span class="string">&#x27;mypassword&#x27;</span>, db=<span class="string">&#x27;vk&#x27;</span>)</span><br><span class="line">df = pd.read_sql(sql, conn)</span><br><span class="line">df.to_excel(<span class="string">&quot;app.xlsx&quot;</span>, index=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure><h1 id="高级命令"><span class="post-title-index">10.</span><a href="#高级命令" class="headerlink" title="高级命令"></a> 高级命令</h1><h2 id="联合查询"><span class="post-title-index">10.1.</span><a href="#联合查询" class="headerlink" title="联合查询"></a> 联合查询</h2><p>left join（左联接）：返回左表中的所有记录以及和右表中的联接字段相等的记录。<br>right join（右联接）：返回右表中的所有记录以及和左表中的联接字段相等的记录。<br>inner join（等值联接）：只返回两个表中联接字段相等的记录。</p><p>例子：查询用户表（user）中的用户名（name）和用户详细表（user_detail）中的用户手机号码（telephone）。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> user.name, user_detail.telephone</span><br><span class="line"><span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">inner</span> <span class="keyword">join</span> user_detail</span><br><span class="line"><span class="keyword">on</span> user.id<span class="operator">=</span>user_detail.user_id</span><br><span class="line"><span class="keyword">where</span> user.id<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"><span class="comment">-- or</span></span><br><span class="line"><span class="keyword">select</span> U1.name, U2.telephone</span><br><span class="line"><span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">as</span> U1 <span class="keyword">inner</span> <span class="keyword">join</span> user_detail <span class="keyword">as</span> U2</span><br><span class="line"><span class="keyword">on</span> U1.id<span class="operator">=</span>U2.user_id</span><br><span class="line"><span class="keyword">where</span> U1.id<span class="operator">=</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure><h2 id="联合查询3张表"><span class="post-title-index">10.2.</span><a href="#联合查询3张表" class="headerlink" title="联合查询3张表"></a> 联合查询3张表</h2><p>例子：查询用户表（user）中的用户名（name）、用户角色表（role）中的角色名（name）、用户详细表（user_detail）中的用户手机号码（telephone）。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> user.name, user_detail.telephone, role.name</span><br><span class="line"><span class="keyword">from</span> <span class="keyword">user</span> </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> role</span><br><span class="line"><span class="keyword">on</span> user.role_id<span class="operator">=</span>role.id</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> user_detail</span><br><span class="line"><span class="keyword">on</span> user.id<span class="operator">=</span>user_detail.user_id</span><br><span class="line"><span class="keyword">where</span> user.id<span class="operator">=</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure><h2 id="查询重复记录"><span class="post-title-index">10.3.</span><a href="#查询重复记录" class="headerlink" title="查询重复记录"></a> 查询重复记录</h2><p>需求：查询user表中的重名记录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * from user </span><br><span class="line"><span class="built_in">where</span> name <span class="keyword">in</span> </span><br><span class="line">(<span class="keyword">select</span> name from user group by name having count(name) &gt; 1);</span><br></pre></td></tr></table></figure><h2 id="替换字符串"><span class="post-title-index">10.4.</span><a href="#替换字符串" class="headerlink" title="替换字符串"></a> 替换字符串</h2><p>需求：用户表（user）的个性签名字段（info）是字符串，字符串中都包含“my name is haojin”，现在需要把“my name is haojin”都替换成“my name is voidking”。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> info<span class="operator">=</span>replace(info,&quot;my name is haojin&quot;,&quot;my name is voidking&quot;) <span class="keyword">where</span> info <span class="keyword">like</span> &quot;%my name is haojin%&quot;;</span><br></pre></td></tr></table></figure><h2 id="拼接命令"><span class="post-title-index">10.5.</span><a href="#拼接命令" class="headerlink" title="拼接命令"></a> 拼接命令</h2><p>例子：根据手机号17625160000查询用户，给该用户添加另外一个手机号17625160001，手机号用逗号分隔。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> name,mobiles <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> mobiles <span class="keyword">like</span> &quot;%17625160000%&quot;;</span><br><span class="line"><span class="comment">-- 查询出name=&quot;haojin&quot;,mobiles=&quot;17625160000&quot;</span></span><br><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> mobiles<span class="operator">=</span>&quot;17625160000,17625160001&quot; <span class="keyword">where</span> name<span class="operator">=</span>&quot;haojin&quot;;</span><br></pre></td></tr></table></figure><p>更简单的方法是使用concat拼接：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> CONCAT(<span class="string">&#x27;update user set mobiles=&quot;&#x27;</span>,mobiles,<span class="string">&#x27;,17625161201&quot; where name=&quot;&#x27;</span>,name,<span class="string">&#x27;&quot;;&#x27;</span>) <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> mobiles <span class="keyword">like</span> &quot;%17625160000%&quot;;</span><br></pre></td></tr></table></figure><p>假设有很多用户需要另外添加手机号，使用拼接的方式也很麻烦，此时需要借助shell脚本。<br>已有文本mobiles.txt，内容为：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">17625160000 17625160001</span><br><span class="line">17625160002 17625160003</span><br></pre></td></tr></table></figure><p>编写shell脚本为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"> </span><br><span class="line">grep -v <span class="string">&quot;^$&quot;</span> mobiles.txt | <span class="keyword">while</span> <span class="built_in">read</span> line</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  old=`<span class="built_in">echo</span> <span class="variable">$line</span> | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>`</span><br><span class="line">  new=`<span class="built_in">echo</span> <span class="variable">$line</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;select CONCAT(&#x27;update user set mobiles=\&quot;&#x27;,mobiles,&#x27;,<span class="variable">$&#123;new&#125;</span>\&quot; where name=\&quot;&#x27;,name,&#x27;\&quot;;&#x27;) from user where mobiles like \&quot;%<span class="variable">$&#123;old&#125;</span>%\&quot;;&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h2 id="定时备份"><span class="post-title-index">10.6.</span><a href="#定时备份" class="headerlink" title="定时备份"></a> 定时备份</h2><p>需求：每天自动备份数据库。<br>1、测试命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/mysqldump -h 127.0.0.1 -uroot -pvoidking vkdb &gt; /root/vkdb-`<span class="built_in">date</span> +%Y%m%d-%H%M%S`.sql</span><br></pre></td></tr></table></figure><p>2、测试定时任务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure><p>写入每分钟执行一次的定时任务：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># backup vkdbdb</span><br><span class="line">* * * * * /usr/bin/mysqldump -h 127.0.0.1 -uroot -pvoidking vkdb &gt; /root/vkdb-`date +\%Y\%m\%d-\%H\%M\%S`.sql</span><br></pre></td></tr></table></figure><p>查看执行结果是否正常，如果不正常，通过crontab日志排查：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -f /var/log/cron</span><br></pre></td></tr></table></figure><p>3、确认定时任务</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># backup vkdbdb</span><br><span class="line">0 0 * * * /usr/bin/mysqldump -h 127.0.0.1 -uroot -pvoidking vkdb &gt; /root/vkdb-`date +\%Y\%m\%d-\%H\%M\%S`.sql</span><br></pre></td></tr></table></figure></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>原文链接：</strong> <a href="https://www.voidking.com/dev-mysql-command/" title="好好学MySQL：MySQL常用命令">https://www.voidking.com/dev-mysql-command/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本文采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议，转载请注明出处！源站会即时更新知识点并修正错误，欢迎访问~</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/python/" rel="tag"># python</a> <a href="/tags/mysql/" rel="tag"># mysql</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag"># 数据库</a> <a href="/tags/%E5%A5%BD%E5%A5%BD%E5%AD%A6MySQL/" rel="tag"># 好好学MySQL</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-hbuilder-app/" rel="prev" title="使用HBuilder开发移动APP"><i class="fa fa-chevron-left"></i> 使用HBuilder开发移动APP</a></div><div class="post-nav-item"> <a href="/dev-nginx-url-to-lowercase/" rel="next" title="好好学Nginx：Nginx URL大小写转换">好好学Nginx：Nginx URL大小写转换<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">1. 前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#mysql%E4%B8%ADSQL%E8%AF%AD%E5%8F%A5%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%86%99%E8%A7%84%E5%88%99"><span class="nav-text">2. mysql中SQL语句的大小写规则</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3"><span class="nav-text">3. 权限相关</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%B8%E5%85%B3"><span class="nav-text">4. 数据库相关</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-text">4.1. 创建&#x2F;删除数据库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="nav-text">4.2. 创建&#x2F;删除用户</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8E%88%E6%9D%83%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%99%E7%94%A8%E6%88%B7"><span class="nav-text">4.3. 授权数据库给用户</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%9B%B8%E5%85%B3"><span class="nav-text">5. 数据表相关</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="nav-text">5.1. 创建&#x2F;删除数据表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0-%E4%BF%AE%E6%94%B9-%E5%88%A0%E9%99%A4column"><span class="nav-text">5.2. 添加&#x2F;修改&#x2F;删除column</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AEunique"><span class="nav-text">5.3. 设置unique</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%92%E5%85%A5-%E4%BF%AE%E6%94%B9-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="nav-text">5.4. 插入&#x2F;修改&#x2F;删除数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE"><span class="nav-text">5.5. 查询数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E8%A1%A8%E6%98%AF%E5%90%A6%E8%A2%AB%E9%94%81"><span class="nav-text">5.6. 查看表是否被锁</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE"><span class="nav-text">6. 导入导出数据</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E6%95%B0%E6%8D%AE"><span class="nav-text">6.1. 导出数据库数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E6%89%80%E6%9C%89%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="nav-text">6.2. 导出数据库所有表结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E5%BA%93user%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="nav-text">6.3. 导出数据库user表数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE%E5%BA%93user%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="nav-text">6.4. 导出数据库user表结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E6%95%B0%E6%8D%AE"><span class="nav-text">6.5. 导入数据库数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#csv%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5"><span class="nav-text">6.6. csv数据导入</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BB%8Ebinlog%E5%AF%BC%E5%87%BAsql%E8%AF%AD%E5%8F%A5"><span class="nav-text">7. 从binlog导出sql语句</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#shell%E6%89%A7%E8%A1%8Csql"><span class="nav-text">8. shell执行sql</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#shell%E4%B8%AD%E7%9B%B4%E6%8E%A5%E6%89%A7%E8%A1%8Csql%E7%A4%BA%E4%BE%8B"><span class="nav-text">8.1. shell中直接执行sql示例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%86%99%E5%85%A5%E5%88%B0txt"><span class="nav-text">8.2. 获取数据写入到txt</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%86%99%E5%85%A5%E5%88%B0csv"><span class="nav-text">8.3. 获取数据写入到csv</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#python%E6%89%A7%E8%A1%8Csql"><span class="nav-text">9. python执行sql</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E5%91%BD%E4%BB%A4"><span class="nav-text">10. 高级命令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="nav-text">10.1. 联合查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A23%E5%BC%A0%E8%A1%A8"><span class="nav-text">10.2. 联合查询3张表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E9%87%8D%E5%A4%8D%E8%AE%B0%E5%BD%95"><span class="nav-text">10.3. 查询重复记录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%BF%E6%8D%A2%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-text">10.4. 替换字符串</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8B%BC%E6%8E%A5%E5%91%BD%E4%BB%A4"><span class="nav-text">10.5. 拼接命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E5%A4%87%E4%BB%BD"><span class="nav-text">10.6. 定时备份</span></a></li></ol></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">一个计算机技术爱好者与学习者</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">780</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">34</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">272</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2026</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="https://cdn.staticfile.net/gitalk/1.7.2/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://cdn.staticfile.net/gitalk/1.7.2/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '5a238b8c32b1e4dd2156',
      clientSecret: 'bfb5d518626f6fdc7da0351d1e0cd37ab75c6361',
      repo: 'gitalk-comments',
      owner: 'voidking',
      admin: ['voidking'],
      id: '76b2c4b4bc1cb1e1a24cf7b08cbd103a',
      title: '好好学MySQL：MySQL常用命令',
      body: '欢迎留言，互相交流学习~',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></body></html>