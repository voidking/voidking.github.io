<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//qiniu.cdn.voidking.com/doc/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="前言Prometheus中，数据模型的核心是标签（Labels）。标签允许我们对指标数据进行维度化和分类，从而更好地理解系统的运行状态和性能。 本文将学习 Prometheus 中标签的基础知识，以及如何使用标签来优化指标的管理和查询。 参考文档：  服务发现与Relabel prometheus label标签的使用 relabel_config"><meta property="og:type" content="article"><meta property="og:title" content="Prometheus中标签（Labels）详解"><meta property="og:url" content="https://www.voidking.com/dev-prometheus-labels/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="前言Prometheus中，数据模型的核心是标签（Labels）。标签允许我们对指标数据进行维度化和分类，从而更好地理解系统的运行状态和性能。 本文将学习 Prometheus 中标签的基础知识，以及如何使用标签来优化指标的管理和查询。 参考文档：  服务发现与Relabel prometheus label标签的使用 relabel_config"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2020-01-13T20:00:00.000Z"><meta property="article:modified_time" content="2023-08-19T08:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="prometheus"><meta property="article:tag" content="监控"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-prometheus-labels/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>Prometheus中标签（Labels）详解 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">一个计算机技术爱好者与学习者</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-prometheus-labels/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="一个计算机技术爱好者与学习者"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> Prometheus中标签（Labels）详解</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-01-13 20:00:00" itemprop="dateCreated datePublished" datetime="2020-01-13T20:00:00+00:00">2020-01-13</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2023-08-19 08:00:00" itemprop="dateModified" datetime="2023-08-19T08:00:00+00:00">2023-08-19</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/monitoring/" itemprop="url" rel="index"><span itemprop="name">monitoring</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="前言"><span class="post-title-index">1.</span><a href="#前言" class="headerlink" title="前言"></a> 前言</h1><p>Prometheus中，数据模型的核心是标签（Labels）。标签允许我们对指标数据进行维度化和分类，从而更好地理解系统的运行状态和性能。</p><p>本文将学习 Prometheus 中标签的基础知识，以及如何使用标签来优化指标的管理和查询。</p><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="https://yunlzheng.gitbook.io/prometheus-book/part-ii-prometheus-jin-jie/sd/service-discovery-with-relabel">服务发现与Relabel</a></li><li><a target="_blank" rel="noopener" href="https://juejin.cn/post/7128262424091705352">prometheus label标签的使用</a></li><li><a target="_blank" rel="noopener" href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#relabel_config">relabel_config</a></li></ul><span id="more"></span><h1 id="标签是什么？"><span class="post-title-index">2.</span><a href="#标签是什么？" class="headerlink" title="标签是什么？"></a> 标签是什么？</h1><p>标签是 Prometheus 数据模型中的重要组成部分，它是一个键值对，用于描述指标的维度和属性。<br>每个样本数据都附带一组标签，这样我们可以将数据划分为不同的维度，从而更好地分析和查询数据。<br>例如，对于 CPU 使用率指标，我们可以使用 instance 标签来表示不同的主机，使用 job 标签来表示不同的任务。</p><p>标签的作用包括：</p><ul><li>数据分类和分组： 标签允许我们将数据按照不同的维度进行分类和分组，从而在查询和分析时更精确地选择数据。</li><li>查询和过滤： 标签使我们能够在查询时按照特定维度进行过滤，从而获取我们所需的数据。</li><li>聚合和计算： 标签使我们能够对数据进行聚合和计算，生成更高级别的指标，如平均值、总和等。</li></ul><h1 id="使用标签"><span class="post-title-index">3.</span><a href="#使用标签" class="headerlink" title="使用标签"></a> 使用标签</h1><h2 id="添加标签"><span class="post-title-index">3.1.</span><a href="#添加标签" class="headerlink" title="添加标签"></a> 添加标签</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">scrape_configs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;example-job&#x27;</span></span><br><span class="line">    <span class="attr">static_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;example-host:9090&#x27;</span>]</span><br><span class="line">        <span class="attr">labels:</span></span><br><span class="line">          <span class="attr">app:</span> <span class="string">&#x27;example-app&#x27;</span></span><br><span class="line">          <span class="attr">environment:</span> <span class="string">&#x27;production&#x27;</span></span><br></pre></td></tr></table></figure><p>在上述示例中，我们通过 labels 字段添加了两个标签：app 和 environment。这样，所有从 example-host:9090 采集到的指标都会带有这两个标签，从而更好地描述数据的来源和环境。</p><h2 id="查询和分组"><span class="post-title-index">3.2.</span><a href="#查询和分组" class="headerlink" title="查询和分组"></a> 查询和分组</h2><p>在 PromQL 查询中，我们可以使用标签进行数据的选择、分组和聚合。<br>例如，我们可以使用以下查询来获取特定应用的请求计数：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http_requests_total&#123;app=&quot;example-app&quot;&#125;</span><br></pre></td></tr></table></figure><h1 id="relabel-configs是什么？"><span class="post-title-index">4.</span><a href="#relabel-configs是什么？" class="headerlink" title="relabel_configs是什么？"></a> relabel_configs是什么？</h1><p>relabel_configs 是Prometheus中的一个关键配置项，它允许我们在数据采集之前对指标的标签进行操作。<br>relabel_configs 允许我们对标签进行添加、删除、重命名、合并，以及对标签值进行提取和替换等操作，以满足不同场景下的需求。</p><h1 id="使用relabel-configs"><span class="post-title-index">5.</span><a href="#使用relabel-configs" class="headerlink" title="使用relabel_configs"></a> 使用relabel_configs</h1><h2 id="relabel-configs-的配置格式"><span class="post-title-index">5.1.</span><a href="#relabel-configs-的配置格式" class="headerlink" title="relabel_configs 的配置格式"></a> relabel_configs 的配置格式</h2><p>在 Prometheus 的配置文件中，我们可以在 scrape_config（用于数据采集配置）或者 service_monitor（用于服务监控配置）中使用 relabel_configs。<br>下面是一个示例配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">scrape_configs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;example-job&#x27;</span></span><br><span class="line">    <span class="attr">static_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;example-host:9090&#x27;</span>]</span><br><span class="line">    <span class="attr">relabel_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">source_labels:</span> [<span class="string">source_label</span>]</span><br><span class="line">        <span class="attr">target_label:</span> <span class="string">target_label</span></span><br><span class="line">        <span class="attr">action:</span> [<span class="string">keep|drop|replace|labelmap</span>]</span><br><span class="line">        <span class="attr">regex:</span> <span class="string">&#x27;regex_pattern&#x27;</span></span><br><span class="line">        <span class="attr">replacement:</span> <span class="string">&#x27;replacement_string&#x27;</span></span><br></pre></td></tr></table></figure><p>在上面的配置中，我们可以配置以下属性：</p><ul><li>source_labels：源标签，用于指定操作的源标签。</li><li>target_label：目标标签，用于存储操作的结果。</li><li>action：操作类型，可以是 keep（保留）、drop（删除）、replace（替换）和 labelmap（从标签名中提取）。</li><li>regex：正则表达式，用于匹配源标签的值。</li><li>replacement：在替换操作中使用的字符串。</li></ul><h2 id="relabel-configs-常见操作"><span class="post-title-index">5.2.</span><a href="#relabel-configs-常见操作" class="headerlink" title="relabel_configs 常见操作"></a> relabel_configs 常见操作</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">scrape_configs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;example-app&#x27;</span></span><br><span class="line">    <span class="attr">metrics_path:</span> <span class="string">/metrics</span></span><br><span class="line">    <span class="attr">static_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;example-app:8080&#x27;</span>]</span><br><span class="line">    <span class="attr">relabel_configs:</span></span><br><span class="line">      <span class="comment"># 添加标签</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">source_labels:</span> []</span><br><span class="line">        <span class="attr">target_label:</span> <span class="string">added_label</span></span><br><span class="line">        <span class="attr">replacement:</span> <span class="string">&#x27;new_value&#x27;</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment"># 重命名标签</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">source_labels:</span> [<span class="string">old_label</span>]</span><br><span class="line">        <span class="attr">target_label:</span> <span class="string">new_label</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment"># 删除标签</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">action:</span> <span class="string">labeldrop</span></span><br><span class="line">        <span class="attr">regex:</span> <span class="string">label_to_remove</span></span><br><span class="line">        </span><br><span class="line">      <span class="comment"># 多值标签的操作 - 合并多个标签值为一个</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">action:</span> <span class="string">replace</span></span><br><span class="line">        <span class="attr">source_labels:</span> [<span class="string">label1</span>, <span class="string">label2</span>]</span><br><span class="line">        <span class="attr">target_label:</span> <span class="string">merged_labels</span></span><br><span class="line">        <span class="attr">separator:</span> <span class="string">&#x27;;&#x27;</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment"># 使用正则表达式从标签值中提取信息</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">source_labels:</span> [<span class="string">instance</span>]</span><br><span class="line">        <span class="attr">target_label:</span> <span class="string">extracted_info</span></span><br><span class="line">        <span class="attr">regex:</span> <span class="string">^(.*):8080$</span></span><br><span class="line">        <span class="attr">replacement:</span> <span class="string">$1</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment"># 对标签值进行保留</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">action:</span> <span class="string">keep</span></span><br><span class="line">        <span class="attr">source_labels:</span> [<span class="string">important_label</span>]</span><br><span class="line">      </span><br><span class="line">      <span class="comment"># 替换标签值</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">source_labels:</span> [<span class="string">instance</span>]</span><br><span class="line">        <span class="attr">target_label:</span> <span class="string">instance</span></span><br><span class="line">        <span class="attr">regex:</span> <span class="string">(.*).example-app.*$</span></span><br><span class="line">        <span class="attr">replacement:</span> <span class="string">$1</span></span><br></pre></td></tr></table></figure><h2 id="relabel-configs示例"><span class="post-title-index">5.3.</span><a href="#relabel-configs示例" class="headerlink" title="relabel_configs示例"></a> relabel_configs示例</h2><p>场景： 我们有一个 Kubernetes 集群中运行的微服务架构，每个服务都暴露了 /metrics 端点。我们想要为每个服务添加一个标签，以标识不同的应用。</p><p>步骤：<br>1、在 Prometheus 的 scrape_configs 中，配置每个服务的 job_name 和 targets。<br>2、使用 relabel_configs 来为每个服务添加一个标签，如 app_name。</p><p>以下是一个示例的配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">scrape_configs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;service-metrics&#x27;</span></span><br><span class="line">    <span class="attr">static_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;service-1:8080&#x27;</span>, <span class="string">&#x27;service-2:8080&#x27;</span>, <span class="string">&#x27;service-3:8080&#x27;</span>]</span><br><span class="line">    <span class="attr">relabel_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">source_labels:</span> [<span class="string">__meta_kubernetes_service_label_app</span>]</span><br><span class="line">        <span class="attr">target_label:</span> <span class="string">app_name</span></span><br></pre></td></tr></table></figure><p>在上述配置中，我们使用 relabel_configs 将 Kubernetes 服务标签 <code>__meta_kubernetes_service_label_app</code> 的值赋给了 app_name 标签。</p><h1 id="relabelings是什么？"><span class="post-title-index">6.</span><a href="#relabelings是什么？" class="headerlink" title="relabelings是什么？"></a> relabelings是什么？</h1><p>relabelings是Kubernetes servicemonitor中专用配置项，配置方式和 relabel_configs 相同。<br>relabelings 和 relabel_configs 有什么区别？名字不同，子项的大小写不同，其余没有区别。</p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>原文链接：</strong> <a href="https://www.voidking.com/dev-prometheus-labels/" title="Prometheus中标签（Labels）详解">https://www.voidking.com/dev-prometheus-labels/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本文采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议，转载请注明出处！源站会即时更新知识点并修正错误，欢迎访问~</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/prometheus/" rel="tag"># prometheus</a> <a href="/tags/%E7%9B%91%E6%8E%A7/" rel="tag"># 监控</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-prometheus-service-discovery/" rel="prev" title="Prometheus服务发现"><i class="fa fa-chevron-left"></i> Prometheus服务发现</a></div><div class="post-nav-item"> <a href="/dev-grafana-prometheus-problem/" rel="next" title="Grafana和Prometheus问题记录">Grafana和Prometheus问题记录<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"><ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-3284447971731414" data-ad-slot="9697986181"></ins><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3284447971731414" crossorigin="anonymous"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">1. 前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A0%87%E7%AD%BE%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="nav-text">2. 标签是什么？</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%A0%87%E7%AD%BE"><span class="nav-text">3. 使用标签</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E6%A0%87%E7%AD%BE"><span class="nav-text">3.1. 添加标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E5%92%8C%E5%88%86%E7%BB%84"><span class="nav-text">3.2. 查询和分组</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#relabel-configs%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="nav-text">4. relabel_configs是什么？</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8relabel-configs"><span class="nav-text">5. 使用relabel_configs</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#relabel-configs-%E7%9A%84%E9%85%8D%E7%BD%AE%E6%A0%BC%E5%BC%8F"><span class="nav-text">5.1. relabel_configs 的配置格式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#relabel-configs-%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C"><span class="nav-text">5.2. relabel_configs 常见操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#relabel-configs%E7%A4%BA%E4%BE%8B"><span class="nav-text">5.3. relabel_configs示例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#relabelings%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="nav-text">6. relabelings是什么？</span></a></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">一个计算机技术爱好者与学习者</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">660</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">29</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">242</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2023</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '5a238b8c32b1e4dd2156',
      clientSecret: 'bfb5d518626f6fdc7da0351d1e0cd37ab75c6361',
      repo: 'gitalk-comments',
      owner: 'voidking',
      admin: ['voidking'],
      id: '524a5315fdb34ce0375a37cf23c0d1fb',
      title: 'Prometheus中标签（Labels）详解',
      body: '欢迎留言，互相交流学习~',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></body></html>