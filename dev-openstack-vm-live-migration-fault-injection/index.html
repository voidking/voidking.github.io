<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//qiniu.cdn.voidking.com/doc/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="前言《虚拟机在线迁移的性能统计》一文中，已经找到了虚拟机迁移过程中性能统计的方法，可以统计出迁移时间、停机时间、迁移数据量等指标。 而实际生产环境是复杂的，所以我们想模拟一些环境，看看这些环境（故障）对于虚拟机迁移性能的影响。本文就来研究一下CPU故障、内存故障、磁盘故障、网络故障等的模拟方法。"><meta property="og:type" content="article"><meta property="og:title" content="好好学OpenStack：虚拟机在线迁移过程中的故障注入"><meta property="og:url" content="https://www.voidking.com/dev-openstack-vm-live-migration-fault-injection/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="前言《虚拟机在线迁移的性能统计》一文中，已经找到了虚拟机迁移过程中性能统计的方法，可以统计出迁移时间、停机时间、迁移数据量等指标。 而实际生产环境是复杂的，所以我们想模拟一些环境，看看这些环境（故障）对于虚拟机迁移性能的影响。本文就来研究一下CPU故障、内存故障、磁盘故障、网络故障等的模拟方法。"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2018-11-20T09:30:00.000Z"><meta property="article:modified_time" content="2024-02-16T08:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="linux"><meta property="article:tag" content="docker"><meta property="article:tag" content="ubuntu"><meta property="article:tag" content="openstack"><meta property="article:tag" content="测试"><meta property="article:tag" content="好好学OpenStack"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-openstack-vm-live-migration-fault-injection/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>好好学OpenStack：虚拟机在线迁移过程中的故障注入 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">一个计算机技术爱好者与学习者</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-openstack-vm-live-migration-fault-injection/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="一个计算机技术爱好者与学习者"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> 好好学OpenStack：虚拟机在线迁移过程中的故障注入</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-11-20 09:30:00" itemprop="dateCreated datePublished" datetime="2018-11-20T09:30:00+00:00">2018-11-20</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2024-02-16 08:00:00" itemprop="dateModified" datetime="2024-02-16T08:00:00+00:00">2024-02-16</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/testing/" itemprop="url" rel="index"><span itemprop="name">testing</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/openstack/" itemprop="url" rel="index"><span itemprop="name">openstack</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="前言"><span class="post-title-index">1.</span><a href="#前言" class="headerlink" title="前言"></a> 前言</h1><p><a href="https://www.voidking.com/dev-openstack-vm-live-migration-performance/">《虚拟机在线迁移的性能统计》</a>一文中，已经找到了虚拟机迁移过程中性能统计的方法，可以统计出迁移时间、停机时间、迁移数据量等指标。</p><p>而实际生产环境是复杂的，所以我们想模拟一些环境，看看这些环境（故障）对于虚拟机迁移性能的影响。本文就来研究一下CPU故障、内存故障、磁盘故障、网络故障等的模拟方法。</p><span id="more"></span><h1 id="故障注入"><span class="post-title-index">2.</span><a href="#故障注入" class="headerlink" title="故障注入"></a> 故障注入</h1><p>故障注入有两个大的思路：一个是注入到被迁移的虚拟机，另一个是注入到宿主机。</p><p>本次故障注入主要有CPU故障、内存故障、磁盘故障、网络故障。</p><p>故障模拟方法如下（感谢卢澄志同学提供模拟方法）：</p><ul><li>对于CPU故障、内存故障、磁盘故障的模拟，使用stress或者stress-ng</li><li>对于网络故障的模拟，使用netem</li></ul><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="https://www.hi-linux.com/posts/59095.html">Linux 压力测试软件 Stress 使用指南</a></li><li><a target="_blank" rel="noopener" href="http://kbase101.com/question/36649.html">stress-ng：模拟特定的cpu百分比</a></li><li><a target="_blank" rel="noopener" href="https://cizixs.com/2017/10/23/tc-netem-for-terrible-network/">使用 tc netem 模拟网络异常</a></li><li><a target="_blank" rel="noopener" href="https://wiki.linuxfoundation.org/networking/netem">netem wiki</a></li></ul><h1 id="安装使用stress-ng"><span class="post-title-index">3.</span><a href="#安装使用stress-ng" class="headerlink" title="安装使用stress-ng"></a> 安装使用stress-ng</h1><h2 id="stress-ng简介"><span class="post-title-index">3.1.</span><a href="#stress-ng简介" class="headerlink" title="stress-ng简介"></a> stress-ng简介</h2><p>stress-ng是一个压力测试工具，用于对计算机系统实施较大的工作负荷，以验证其健壮性和稳定性，或者用于检测可能存在的软硬件问题。</p><p>stress-ng 特点：</p><ul><li>提供了超过 240 种压力测试。</li><li>各种压力测试可以单独运行，也可以以随机的方式混合运行，以便在真实场景下对系统进行压力测试。</li><li>还可以实施各种操作系统调用的压力测试。例如，可以选择进行 CPU 忙测试、硬盘测试、内存测试等。</li><li>通过调整测试时间、测试并发量等参数，可以根据需求定制不同的压力测试环境。</li></ul><h2 id="安装stress-ng"><span class="post-title-index">3.2.</span><a href="#安装stress-ng" class="headerlink" title="安装stress-ng"></a> 安装stress-ng</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install stress-ng</span><br></pre></td></tr></table></figure><h2 id="stress-ng使用示例"><span class="post-title-index">3.3.</span><a href="#stress-ng使用示例" class="headerlink" title="stress-ng使用示例"></a> stress-ng使用示例</h2><h3 id="模拟CPU压力"><span class="post-title-index">3.3.1.</span><a href="#模拟CPU压力" class="headerlink" title="模拟CPU压力"></a> 模拟CPU压力</h3><p>产生3个CPU进程1分钟后关闭</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stress-ng --cpu 3 --verbose --<span class="built_in">timeout</span> 1m</span><br></pre></td></tr></table></figure><h3 id="模拟内存压力"><span class="post-title-index">3.3.2.</span><a href="#模拟内存压力" class="headerlink" title="模拟内存压力"></a> 模拟内存压力</h3><p>产生2个10MB的内存进程1分钟后关闭</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stress-ng --vm 2 --vm-bytes 10M --vm-keep --<span class="built_in">timeout</span> 1m</span><br></pre></td></tr></table></figure><h3 id="模拟IO进程压力"><span class="post-title-index">3.3.3.</span><a href="#模拟IO进程压力" class="headerlink" title="模拟IO进程压力"></a> 模拟IO进程压力</h3><p>产生3个IO进程1分钟后关闭</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stress-ng --io 3 --<span class="built_in">timeout</span> 1m</span><br></pre></td></tr></table></figure><h1 id="安装使用tc-netem"><span class="post-title-index">4.</span><a href="#安装使用tc-netem" class="headerlink" title="安装使用tc netem"></a> 安装使用tc netem</h1><h2 id="tc-netem简介"><span class="post-title-index">4.1.</span><a href="#tc-netem简介" class="headerlink" title="tc netem简介"></a> tc netem简介</h2><p>TC(Network Control) 是 Linux 系统中的 “流量控制” 工具，TC netem（network emulator）则是 TC 的一个扩展，用于模拟网络的不同条件，以便在各种环境下测试网络应用。</p><p>TC netem 可以模拟的网络条件包括但不限于：</p><ul><li>延迟：模拟网络传输数据包之间的延迟，包括固定的延迟和随机的延迟。</li><li>丢包：模拟网络数据包在传输过程中的丢失。</li><li>乱序：模拟网络数据包接收顺序的混乱。</li><li>带宽限制：模拟某种预设的网络带宽条件。</li><li>包重复：模拟在网络中发送重复数据包的情况。</li></ul><p>所有这些条件都可以单独或一起使用，以模拟几乎任何可能的网络环境。使用tc netem可以让开发者更有效地进行网络应用开发和测试，从而提高应用在实际网络环境下的性能和稳定性。</p><h2 id="安装tc-netem"><span class="post-title-index">4.2.</span><a href="#安装tc-netem" class="headerlink" title="安装tc netem"></a> 安装tc netem</h2><p>在Ubuntu16中，tc netem不需要安装，系统自带。</p><h2 id="tc-netem使用示例"><span class="post-title-index">4.3.</span><a href="#tc-netem使用示例" class="headerlink" title="tc netem使用示例"></a> tc netem使用示例</h2><h3 id="模拟延迟传输"><span class="post-title-index">4.3.1.</span><a href="#模拟延迟传输" class="headerlink" title="模拟延迟传输"></a> 模拟延迟传输</h3><p>报文延迟 100ms 发送</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tc qdisc add dev eth0 root netem delay 100ms</span><br></pre></td></tr></table></figure><p>报文延迟的时间在 100ms ± 20ms 之间，具体值随机选择</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tc qdisc replace dev eth0 root netem delay 100ms 20ms</span><br></pre></td></tr></table></figure><h3 id="模拟丢包率"><span class="post-title-index">4.3.2.</span><a href="#模拟丢包率" class="headerlink" title="模拟丢包率"></a> 模拟丢包率</h3><p>丢包率是 0.3%，并且当前报文丢弃的可能性和前一个报文 25% 相关。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tc qdisc change dev eth0 root netem loss 0.3% 25%</span><br></pre></td></tr></table></figure><h3 id="模拟包重复"><span class="post-title-index">4.3.3.</span><a href="#模拟包重复" class="headerlink" title="模拟包重复"></a> 模拟包重复</h3><p>随机产生 50% 重复的包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tc qdisc change dev eth0 root netem duplicate 50%</span><br></pre></td></tr></table></figure><h3 id="模拟包损坏"><span class="post-title-index">4.3.4.</span><a href="#模拟包损坏" class="headerlink" title="模拟包损坏"></a> 模拟包损坏</h3><p>随机产生 2% 损坏的报文（在报文的随机位置造成一个比特的错误）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tc qdisc add dev eth0 root netem corrupt 2%</span><br></pre></td></tr></table></figure><h3 id="模拟包乱序"><span class="post-title-index">4.3.5.</span><a href="#模拟包乱序" class="headerlink" title="模拟包乱序"></a> 模拟包乱序</h3><p>固定的每隔一定数量的报文就乱序一次：每5个报文会正常发送，其他的报文延迟 100ms</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tc qdisc change dev eth0 root netem reorder 50% gap 3 delay 100ms</span><br></pre></td></tr></table></figure><p>注意：要想看到 ping 报文的乱序，我们要保证发送报文的间隔小于报文的延迟时间 100ms，这里可以用 <code>-i 0.05</code> 把发送间隔设置为 50ms。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping -i 0.05 192.168.56.101</span><br></pre></td></tr></table></figure><p>使用概率来选择乱序的报文：50% 的报文会正常发送，其他报文（1-50%）延迟 300ms 发送。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tc qdisc change dev eth0 root netem reorder 50% 15% delay 300ms</span><br></pre></td></tr></table></figure><h3 id="取消模拟"><span class="post-title-index">4.3.6.</span><a href="#取消模拟" class="headerlink" title="取消模拟"></a> 取消模拟</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tc qdisc del dev eth0 root</span><br></pre></td></tr></table></figure></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>原文链接：</strong> <a href="https://www.voidking.com/dev-openstack-vm-live-migration-fault-injection/" title="好好学OpenStack：虚拟机在线迁移过程中的故障注入">https://www.voidking.com/dev-openstack-vm-live-migration-fault-injection/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本文采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议，转载请注明出处！源站会即时更新知识点并修正错误，欢迎访问~</li><li> <img width="200" height="200" src="/images/avatar.jpg"><p style="text-align:center;margin-bottom:0">微信公众号同步更新，欢迎关注~</p></li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/linux/" rel="tag"># linux</a> <a href="/tags/docker/" rel="tag"># docker</a> <a href="/tags/ubuntu/" rel="tag"># ubuntu</a> <a href="/tags/openstack/" rel="tag"># openstack</a> <a href="/tags/%E6%B5%8B%E8%AF%95/" rel="tag"># 测试</a> <a href="/tags/%E5%A5%BD%E5%A5%BD%E5%AD%A6OpenStack/" rel="tag"># 好好学OpenStack</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-openstack-vm-live-migration-performance/" rel="prev" title="好好学OpenStack：虚拟机在线迁移的性能统计"><i class="fa fa-chevron-left"></i> 好好学OpenStack：虚拟机在线迁移的性能统计</a></div><div class="post-nav-item"> <a href="/dev-openstack-vm-live-migration-experiment/" rel="next" title="好好学OpenStack：虚拟机在线迁移实验">好好学OpenStack：虚拟机在线迁移实验<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="footer-ads" style="margin-top:10px"><ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-3284447971731414" data-ad-slot="9697986181"></ins><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3284447971731414" crossorigin="anonymous"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="comments" id="gitalk-container"></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">1. 前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%85%E9%9A%9C%E6%B3%A8%E5%85%A5"><span class="nav-text">2. 故障注入</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8stress-ng"><span class="nav-text">3. 安装使用stress-ng</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#stress-ng%E7%AE%80%E4%BB%8B"><span class="nav-text">3.1. stress-ng简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85stress-ng"><span class="nav-text">3.2. 安装stress-ng</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#stress-ng%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="nav-text">3.3. stress-ng使用示例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E6%8B%9FCPU%E5%8E%8B%E5%8A%9B"><span class="nav-text">3.3.1. 模拟CPU压力</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E6%8B%9F%E5%86%85%E5%AD%98%E5%8E%8B%E5%8A%9B"><span class="nav-text">3.3.2. 模拟内存压力</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E6%8B%9FIO%E8%BF%9B%E7%A8%8B%E5%8E%8B%E5%8A%9B"><span class="nav-text">3.3.3. 模拟IO进程压力</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8tc-netem"><span class="nav-text">4. 安装使用tc netem</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#tc-netem%E7%AE%80%E4%BB%8B"><span class="nav-text">4.1. tc netem简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85tc-netem"><span class="nav-text">4.2. 安装tc netem</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tc-netem%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="nav-text">4.3. tc netem使用示例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E6%8B%9F%E5%BB%B6%E8%BF%9F%E4%BC%A0%E8%BE%93"><span class="nav-text">4.3.1. 模拟延迟传输</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E6%8B%9F%E4%B8%A2%E5%8C%85%E7%8E%87"><span class="nav-text">4.3.2. 模拟丢包率</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E6%8B%9F%E5%8C%85%E9%87%8D%E5%A4%8D"><span class="nav-text">4.3.3. 模拟包重复</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E6%8B%9F%E5%8C%85%E6%8D%9F%E5%9D%8F"><span class="nav-text">4.3.4. 模拟包损坏</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E6%8B%9F%E5%8C%85%E4%B9%B1%E5%BA%8F"><span class="nav-text">4.3.5. 模拟包乱序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%96%E6%B6%88%E6%A8%A1%E6%8B%9F"><span class="nav-text">4.3.6. 取消模拟</span></a></li></ol></li></ol></li></ol></div></div><div class="sidecar-ads" style="margin-top:10px"><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">一个计算机技术爱好者与学习者</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">723</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">31</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">254</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2024</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.css"><script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/gitalk/1.7.2/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '5a238b8c32b1e4dd2156',
      clientSecret: 'bfb5d518626f6fdc7da0351d1e0cd37ab75c6361',
      repo: 'gitalk-comments',
      owner: 'voidking',
      admin: ['voidking'],
      id: '6172e2a42703142de60da1c511b2914c',
      title: '好好学OpenStack：虚拟机在线迁移过程中的故障注入',
      body: '欢迎留言，互相交流学习~',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script></body></html>