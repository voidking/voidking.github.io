<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("https://www.voidking.com").hostname,root:"/",scheme:"Gemini",version:"7.7.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1,cdn:{enable:!0,url:"//cdn.jsdelivr.net/gh/voidking/voidking.github.io/search.xml"}},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="Helm简介 Helm is the best way to find, share, and use software built for Kubernetes.  helm是k8s的包管理工具，就像yum之于centos，apt之于ubuntu。不同的是，yum管理的是软件包，helm管理的是配置好的k8s资源包。这种配置好的k8s资源包，按照chart的包格式进行包装。以下是wordpres"><meta property="og:type" content="article"><meta property="og:title" content="Helm入门篇"><meta property="og:url" content="https://www.voidking.com/dev-helm-start/index.html"><meta property="og:site_name" content="好好学习的郝"><meta property="og:description" content="Helm简介 Helm is the best way to find, share, and use software built for Kubernetes.  helm是k8s的包管理工具，就像yum之于centos，apt之于ubuntu。不同的是，yum管理的是软件包，helm管理的是配置好的k8s资源包。这种配置好的k8s资源包，按照chart的包格式进行包装。以下是wordpres"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2020-06-30T20:00:00.000Z"><meta property="article:modified_time" content="2023-05-27T08:00:00.000Z"><meta property="article:author" content="好好学习的郝"><meta property="article:tag" content="k8s"><meta property="article:tag" content="helm"><meta property="article:tag" content="bitnami"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.voidking.com/dev-helm-start/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>Helm入门篇 | 好好学习的郝</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?b759ac2a7fa45129e3ef060bf68259f0";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="好好学习的郝" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">好好学习的郝</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">好好学习，天天向上！</h1></div><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="搜索..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/voidking" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.voidking.com/dev-helm-start/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="好好学习的郝"><meta itemprop="description" content="学而不思则罔，思而不学则殆！"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="好好学习的郝"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> Helm入门篇</h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-06-30 20:00:00" itemprop="dateCreated datePublished" datetime="2020-06-30T20:00:00+00:00">2020-06-30</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2023-05-27 08:00:00" itemprop="dateModified" datetime="2023-05-27T08:00:00+00:00">2023-05-27</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/" itemprop="url" rel="index"><span itemprop="name">engineering</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/devops/" itemprop="url" rel="index"><span itemprop="name">devops</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/k8s/" itemprop="url" rel="index"><span itemprop="name">k8s</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/engineering/cloudnative/" itemprop="url" rel="index"><span itemprop="name">cloudnative</span></a></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="Helm简介"><a href="#Helm简介" class="headerlink" title="Helm简介"></a>Helm简介</h1><blockquote><p><a target="_blank" rel="noopener" href="https://helm.sh/">Helm</a> is the best way to find, share, and use software built for Kubernetes.</p></blockquote><p>helm是k8s的包管理工具，就像yum之于centos，apt之于ubuntu。不同的是，yum管理的是软件包，helm管理的是配置好的k8s资源包。这种配置好的k8s资源包，按照chart的包格式进行包装。以下是wordpress的chart包结构：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">wordpress/</span><br><span class="line">  Chart.yaml          # A YAML file containing information about the chart</span><br><span class="line">  LICENSE             # OPTIONAL: A plain text file containing the license for the chart</span><br><span class="line">  README.md           # OPTIONAL: A human-readable README file</span><br><span class="line">  requirements.yaml   # OPTIONAL: A YAML file listing dependencies for the chart</span><br><span class="line">  values.yaml         # The default configuration values for this chart</span><br><span class="line">  charts/             # A directory containing any charts upon which this chart depends.</span><br><span class="line">  templates/          # A directory of templates that, when combined with values,</span><br><span class="line">                      # will generate valid Kubernetes manifest files.</span><br><span class="line">  templates/NOTES.txt # OPTIONAL: A plain text file containing short usage notes</span><br></pre></td></tr></table></figure><p>Helm2包括两个组件：客户端（Helm Client）和服务端（Tiller）。Helm发送指令给Tiller(gRPC协议)，Tiller主要用于管理各种应用发布的版本，并且与k8s进行交互。<br>不过，在 Helm3 中 Tiller 被移除掉了，Helm直接与k8s进行交互，版本相关的数据存储在k8s中。</p><p>Helm3中命令也发生了变化：</p><ul><li>helm delete 更名为 helm uninstall</li><li>helm inspect 更名为 helm show</li><li>helm fetch 更名为 helm pull</li></ul><p>旧的命令依然可以使用。</p><p>参考文档：</p><ul><li><a target="_blank" rel="noopener" href="https://github.com/helm/helm">helm/helm</a></li><li><a target="_blank" rel="noopener" href="https://helm.sh/docs/intro/quickstart/">Helm Quickstart Guide</a></li><li><a target="_blank" rel="noopener" href="https://helm.sh/zh/docs/intro/using_helm/">使用Helm</a></li><li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/uWdPB4LvmMmvUX2ioKwbww?spm=a2c6h.12873639.0.0.67905225zuo8Vs">Helm 从入门到实践 | 从 0 开始制作一个 Helm Charts</a></li><li><a target="_blank" rel="noopener" href="https://whmzsu.github.io/helm-doc-zh-cn/chart/charts-zh_cn.html">Helm用户与开发者指南</a>。</li></ul><span id="more"></span><h1 id="体验Helm"><a href="#体验Helm" class="headerlink" title="体验Helm"></a>体验Helm</h1><p>越来越喜欢用<a target="_blank" rel="noopener" href="https://www.katacoda.com/">katacoda</a>来学习新技能，Helm也可以在上面通过实践学习。</p><p>Helm相关教程：</p><ul><li><a target="_blank" rel="noopener" href="https://www.katacoda.com/javajon/courses/kubernetes-pipelines/helm">Helm Package Manager - BY JAVAJON</a></li><li><a target="_blank" rel="noopener" href="https://www.katacoda.com/courses/kubernetes/helm-package-manager">Helm Package Manager - BY KATACODA</a></li></ul><h1 id="安装Helm"><a href="#安装Helm" class="headerlink" title="安装Helm"></a>安装Helm</h1><p>参考 <a target="_blank" rel="noopener" href="https://helm.sh/docs/intro/install/">Installing Helm</a>，安装helm。</p><h2 id="macos"><a href="#macos" class="headerlink" title="macos"></a>macos</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew install helm</span><br><span class="line">helm version</span><br></pre></td></tr></table></figure><h2 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h2><p>1、查找需要的<a target="_blank" rel="noopener" href="https://github.com/helm/helm/releases">release版本</a></p><p>2、下载并安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget https://get.helm.sh/helm-v3.2.4-linux-amd64.tar.gz</span><br><span class="line">tar -xzvf helm-v3.2.4-linux-amd64.tar.gz</span><br><span class="line"><span class="built_in">mv</span> linux-amd64/helm /usr/local/bin/helm</span><br><span class="line"><span class="built_in">ln</span> -s /usr/local/bin/helm /usr/bin/helm</span><br><span class="line">helm version</span><br></pre></td></tr></table></figure><h1 id="Helm常用命令"><a href="#Helm常用命令" class="headerlink" title="Helm常用命令"></a>Helm常用命令</h1><h2 id="使用条件"><a href="#使用条件" class="headerlink" title="使用条件"></a>使用条件</h2><p>helm命令使用条件：</p><ul><li>安装配置好k8s集群</li><li>安装配置好kubectl，可以正常访问k8s</li><li>安装好helm</li></ul><p>helm和kubectl一样，可以在一台机器上管理多个k8s集群，使用<code>kubectl config use-context xxx</code>切换一下集群即可。</p><h2 id="查看帮助"><a href="#查看帮助" class="headerlink" title="查看帮助"></a>查看帮助</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">helm -h</span><br><span class="line">helm get -h</span><br></pre></td></tr></table></figure><h2 id="从-Artifact-Hub-查找chart"><a href="#从-Artifact-Hub-查找chart" class="headerlink" title="从 Artifact Hub 查找chart"></a>从 Artifact Hub 查找chart</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm search hub mysql</span><br></pre></td></tr></table></figure><p><a target="_blank" rel="noopener" href="https://artifacthub.io/">Artifact Hub</a>中存放了大量不同的仓库。</p><h2 id="添加chart仓库到本地"><a href="#添加chart仓库到本地" class="headerlink" title="添加chart仓库到本地"></a>添加chart仓库到本地</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># helm repo add stable https://kubernetes-charts.storage.googleapis.com/</span></span><br><span class="line"><span class="comment"># helm repo add stable https://charts.helm.sh/stable</span></span><br><span class="line"><span class="comment"># helm repo remove stable</span></span><br><span class="line">helm repo add stable https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts</span><br><span class="line">helm repo update</span><br><span class="line">helm repo list</span><br></pre></td></tr></table></figure><p>执行<code>helm repo add</code>，实际上是在本地创建或更新一个名为repositories.yaml的文件，该文件存储了所有已添加的仓库的详细信息，包括名称和URL。</p><p>repositories.yaml 文件路径为：</p><ul><li>在Linux上：<code>$HOME/.config/helm</code></li><li>在macOS上：<code>$HOME/Library/Preferences/helm</code></li><li>在Windows上：<code>%USERPROFILE%\AppData\Roaming\Helm</code></li></ul><h2 id="本地查找chart列表"><a href="#本地查找chart列表" class="headerlink" title="本地查找chart列表"></a>本地查找chart列表</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">helm search repo stable</span><br><span class="line">helm search repo stable/mysql</span><br><span class="line">helm search repo stable/mysql -l</span><br></pre></td></tr></table></figure><h2 id="查看chart详情"><a href="#查看chart详情" class="headerlink" title="查看chart详情"></a>查看chart详情</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">helm show chart stable/mysql</span><br><span class="line">helm show all stable/mysql</span><br></pre></td></tr></table></figure><h2 id="安装软件"><a href="#安装软件" class="headerlink" title="安装软件"></a>安装软件</h2><p>以安装mysql为例（适用于 k8s v1.16- 版本）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">helm install mysql stable/mysql</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">helm install stable/mysql --generate-name</span><br><span class="line">helm status mysql</span><br></pre></td></tr></table></figure><p>安装指定chart版本的mysql</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">helm search repo stable/mysql -l</span><br><span class="line">helm install mysql stable/mysql --version 0.3.5</span><br></pre></td></tr></table></figure><p>k8s v1.16+ 版本，extensions/v1beta1 API version中Deployment资源已经被移除了，因此这里的mysql chart仅适用于1.16以下的版本。详情参考<a target="_blank" rel="noopener" href="https://kubernetes.io/blog/2019/07/18/api-deprecations-in-1-16/">Deprecated APIs Removed In 1.16: Here’s What You Need To Know</a></p><p>如果想要在 k8s v1.16+ 版本中使用这个mysql chart，请参考<a href="https://www.voidking.com/dev-k8s-mysql/">《K8S中安装Mysql》</a>一文中的【helm安装单节点mysql（5.7.x）】一节。</p><h2 id="模拟安装软件"><a href="#模拟安装软件" class="headerlink" title="模拟安装软件"></a>模拟安装软件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm install mysql stable/mysql --version 0.3.5 --debug --dry-run</span><br></pre></td></tr></table></figure><h2 id="查看k8s中安装的chart"><a href="#查看k8s中安装的chart" class="headerlink" title="查看k8s中安装的chart"></a>查看k8s中安装的chart</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">helm list</span><br><span class="line">helm list -A</span><br><span class="line">helm list -n mysql</span><br><span class="line">helm status mysql -n mysql</span><br></pre></td></tr></table></figure><h2 id="查看k8s中安装的chart详情"><a href="#查看k8s中安装的chart详情" class="headerlink" title="查看k8s中安装的chart详情"></a>查看k8s中安装的chart详情</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm get manifest mysql -n mysql</span><br></pre></td></tr></table></figure><p>该命令能够打印出所有上传到k8s的资源清单。<br>每个文件以<code>---</code>开头表示YAML文件的开头，然后是自动生成的注释行，表示哪个模板文件生成了这个YAML文档。</p><h2 id="卸载软件"><a href="#卸载软件" class="headerlink" title="卸载软件"></a>卸载软件</h2><p>以卸载mysql为例</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">helm <span class="built_in">ls</span></span><br><span class="line">helm uninstall mysql</span><br><span class="line">helm status mysql</span><br></pre></td></tr></table></figure><p>卸载指定namespace下的软件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">helm <span class="built_in">ls</span> -A</span><br><span class="line">helm uninstall xxx -n yyy</span><br></pre></td></tr></table></figure><h2 id="修改默认配置"><a href="#修改默认配置" class="headerlink" title="修改默认配置"></a>修改默认配置</h2><h3 id="方法一：下载chart（推荐）"><a href="#方法一：下载chart（推荐）" class="headerlink" title="方法一：下载chart（推荐）"></a>方法一：下载chart（推荐）</h3><p>下载chart，修改配置文件。<br>这种方法是最推荐的方法，原因有二：</p><ul><li>有时不止需要修改values.yaml，还需要修改其他yaml文件</li><li>安装之后有完整留档，方便以后的配置调整和升级</li></ul><p>以修改mysql的默认配置为例：</p><p>1、获取chart并解压</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">helm fetch stable/mysql </span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">helm fetch stable/mysql --version 0.3.5</span><br><span class="line"></span><br><span class="line">tar -xzvf mysql-0.3.5.tgz</span><br></pre></td></tr></table></figure><p>2、编辑values</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> mysql</span><br><span class="line">vim values.yaml</span><br></pre></td></tr></table></figure><p>配置项改为我们需要的配置。</p><p>3、执行安装<br>在values所在目录下，执行命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl create ns mysql</span><br><span class="line">helm install mysql -f values.yaml . -n mysql</span><br></pre></td></tr></table></figure><p>安装过程中有两种方式传递配置数据：</p><ul><li><code>--values</code> (或 <code>-f</code>)：使用 YAML 文件覆盖配置。可以指定多次，优先使用最右边的文件。</li><li><code>--set</code>：通过命令行的方式对指定项进行覆盖。优先级更高。</li></ul><h3 id="方法二：导出配置文件"><a href="#方法二：导出配置文件" class="headerlink" title="方法二：导出配置文件"></a>方法二：导出配置文件</h3><p>导出配置文件，修改配置文件</p><p>以修改mysql的默认配置为例：</p><p>1、获取默认values</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm show values stable/mysql &gt; mysql-values.yaml</span><br></pre></td></tr></table></figure><p>2、编辑values<br>编辑mysql-values.yaml</p><p>3、执行安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl create ns mysql</span><br><span class="line">helm install mysql stable/mysql -f mysql-values.yaml -n mysql</span><br></pre></td></tr></table></figure><h3 id="方法三：执行命令时指定配置"><a href="#方法三：执行命令时指定配置" class="headerlink" title="方法三：执行命令时指定配置"></a>方法三：执行命令时指定配置</h3><p>执行<code>helm install</code>命令时，指定配置</p><p>以修改mysql的默认配置为例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm install mysql stable/mysql -n mysql --<span class="built_in">set</span> persistence.size=10Gi</span><br></pre></td></tr></table></figure><h2 id="修改配置后更新"><a href="#修改配置后更新" class="headerlink" title="修改配置后更新"></a>修改配置后更新</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm upgrade mysql stable/mysql -f mysql-values.yaml -n mysql</span><br></pre></td></tr></table></figure><h2 id="创建chart并打包"><a href="#创建chart并打包" class="headerlink" title="创建chart并打包"></a>创建chart并打包</h2><p>1、创建chart</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm create wecms</span><br></pre></td></tr></table></figure><p>2、验证chart</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm lint wecms</span><br></pre></td></tr></table></figure><p>3、打包chart</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm package wecms</span><br></pre></td></tr></table></figure><p>4、使用chart安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm install wecms ./wecms-0.1.0.tgz</span><br></pre></td></tr></table></figure><p>更多关于创建chart的内容，参考文档<a href="https://www.voidking.com/dev-make-helm-chart/">《自己动手制作Helm Chart》</a></p><h2 id="生成渲染好的资源清单"><a href="#生成渲染好的资源清单" class="headerlink" title="生成渲染好的资源清单"></a>生成渲染好的资源清单</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">helm template wecms wecms &gt; wecms_manifest.yaml</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">helm template wecms wecms-0.1.0.tgz &gt; wecms_manifest.yaml</span><br></pre></td></tr></table></figure><h1 id="Helm基础知识"><a href="#Helm基础知识" class="headerlink" title="Helm基础知识"></a>Helm基础知识</h1><p>参考文档<a href="https://www.voidking.com/dev-helm-doc-extract/">《Helm官方文档摘录》</a></p><h1 id="常用chart仓库"><a href="#常用chart仓库" class="headerlink" title="常用chart仓库"></a>常用chart仓库</h1><ul><li><a target="_blank" rel="noopener" href="https://github.com/bitnami/charts/tree/main/bitnami/mysql">github - MySQL packaged by Bitnami</a></li><li><a target="_blank" rel="noopener" href="https://artifacthub.io/packages/helm/bitnami/mysql">artifacthub - MySQL packaged by Bitnami</a></li><li><a target="_blank" rel="noopener" href="https://github.com/bitnami/charts/tree/main/bitnami/redis">github - Bitnami package for Redis(R)</a></li><li><a target="_blank" rel="noopener" href="https://artifacthub.io/packages/helm/bitnami/redis">artifacthub - Bitnami package for Redis(R)</a></li></ul></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 好好学习的郝</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://www.voidking.com/dev-helm-start/" title="Helm入门篇">https://www.voidking.com/dev-helm-start/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！源站会及时更新知识点及修正错误，阅读体验也更好。欢迎分享，欢迎收藏~</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/k8s/" rel="tag"># k8s</a> <a href="/tags/helm/" rel="tag"># helm</a> <a href="/tags/bitnami/" rel="tag"># bitnami</a></div><div class="post-nav"><div class="post-nav-item"><a href="/dev-prometheus-operator-blackbox-exporter/" rel="prev" title="Prometheus Operator + Blackbox exporter"><i class="fa fa-chevron-left"></i> Prometheus Operator + Blackbox exporter</a></div><div class="post-nav-item"> <a href="/hobby-video-download/" rel="next" title="youtube、youku、爱奇艺等视频平台下载方法">youtube、youku、爱奇艺等视频平台下载方法<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zODU3Mi8xNTEwMA=="></div></div><script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Helm%E7%AE%80%E4%BB%8B"><span class="nav-number">1.</span> <span class="nav-text">Helm简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BD%93%E9%AA%8CHelm"><span class="nav-number">2.</span> <span class="nav-text">体验Helm</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85Helm"><span class="nav-number">3.</span> <span class="nav-text">安装Helm</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#macos"><span class="nav-number">3.1.</span> <span class="nav-text">macos</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#linux"><span class="nav-number">3.2.</span> <span class="nav-text">linux</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Helm%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="nav-number">4.</span> <span class="nav-text">Helm常用命令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%9D%A1%E4%BB%B6"><span class="nav-number">4.1.</span> <span class="nav-text">使用条件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%B8%AE%E5%8A%A9"><span class="nav-number">4.2.</span> <span class="nav-text">查看帮助</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8E-Artifact-Hub-%E6%9F%A5%E6%89%BEchart"><span class="nav-number">4.3.</span> <span class="nav-text">从 Artifact Hub 查找chart</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0chart%E4%BB%93%E5%BA%93%E5%88%B0%E6%9C%AC%E5%9C%B0"><span class="nav-number">4.4.</span> <span class="nav-text">添加chart仓库到本地</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E6%9F%A5%E6%89%BEchart%E5%88%97%E8%A1%A8"><span class="nav-number">4.5.</span> <span class="nav-text">本地查找chart列表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8Bchart%E8%AF%A6%E6%83%85"><span class="nav-number">4.6.</span> <span class="nav-text">查看chart详情</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6"><span class="nav-number">4.7.</span> <span class="nav-text">安装软件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A8%A1%E6%8B%9F%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6"><span class="nav-number">4.8.</span> <span class="nav-text">模拟安装软件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8Bk8s%E4%B8%AD%E5%AE%89%E8%A3%85%E7%9A%84chart"><span class="nav-number">4.9.</span> <span class="nav-text">查看k8s中安装的chart</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8Bk8s%E4%B8%AD%E5%AE%89%E8%A3%85%E7%9A%84chart%E8%AF%A6%E6%83%85"><span class="nav-number">4.10.</span> <span class="nav-text">查看k8s中安装的chart详情</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%B8%E8%BD%BD%E8%BD%AF%E4%BB%B6"><span class="nav-number">4.11.</span> <span class="nav-text">卸载软件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE"><span class="nav-number">4.12.</span> <span class="nav-text">修改默认配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E4%B8%80%EF%BC%9A%E4%B8%8B%E8%BD%BDchart%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="nav-number">4.12.1.</span> <span class="nav-text">方法一：下载chart（推荐）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E4%BA%8C%EF%BC%9A%E5%AF%BC%E5%87%BA%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">4.12.2.</span> <span class="nav-text">方法二：导出配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E4%B8%89%EF%BC%9A%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%E6%97%B6%E6%8C%87%E5%AE%9A%E9%85%8D%E7%BD%AE"><span class="nav-number">4.12.3.</span> <span class="nav-text">方法三：执行命令时指定配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E5%90%8E%E6%9B%B4%E6%96%B0"><span class="nav-number">4.13.</span> <span class="nav-text">修改配置后更新</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAchart%E5%B9%B6%E6%89%93%E5%8C%85"><span class="nav-number">4.14.</span> <span class="nav-text">创建chart并打包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E6%B8%B2%E6%9F%93%E5%A5%BD%E7%9A%84%E8%B5%84%E6%BA%90%E6%B8%85%E5%8D%95"><span class="nav-number">4.15.</span> <span class="nav-text">生成渲染好的资源清单</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Helm%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="nav-number">5.</span> <span class="nav-text">Helm基础知识</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8chart%E4%BB%93%E5%BA%93"><span class="nav-number">6.</span> <span class="nav-text">常用chart仓库</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="好好学习的郝" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">好好学习的郝</p><div class="site-description" itemprop="description">学而不思则罔，思而不学则殆！</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">645</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">30</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">242</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="mailto:voidking@qq.com" title="E-Mail → mailto:voidking@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://github.com/voidking" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://weibo.com/voidking" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/voidking" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;voidking" rel="noopener" target="_blank"><i class="fa fa-fw fa-quora"></i> Zhihu</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="_xduxciwe4ao"></div><script type="text/javascript">(window.slotbydup=window.slotbydup||[]).push({id:"u6920911",container:"_xduxciwe4ao",async:!0})</script><script type="text/javascript" src="//cpro.baidustatic.com/cpro/ui/cm.js" async="async" defer="defer"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3284447971731414" crossorigin="anonymous"></script><div class="copyright"> &copy; 2014 – <span itemprop="copyrightYear">2023</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">好好学习的郝</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><div class="footer-beian"> <a href="http://beian.miit.gov.cn/" target="_blank">苏ICP备14021030号</a>&nbsp;|&nbsp; <img src="/images/beian.png" alt=""> <a target="_blank" href="http://www.beian.gov.cn/">苏公网安备 32032202000223号</a></div></div></footer><div id="needsharebutton-float"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div></div><script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css"><script src="/lib/needsharebutton/needsharebutton.js"></script><script>pbOptions={iconStyle:"box",boxForm:"horizontal",position:"bottomCenter",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-postbottom",pbOptions),flOptions={iconStyle:"box",boxForm:"horizontal",position:"topRight",networks:"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"},new needShareButton("#needsharebutton-float",flOptions)</script><script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  // window.livereOptions = {
  //   refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  // };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script></body></html>